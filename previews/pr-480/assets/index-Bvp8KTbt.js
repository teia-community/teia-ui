const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/keyboard-CqA7Zne8.js","assets/contracts-DAjPKkz1.js"])))=>i.map(i=>d[i]);
var Hg=Object.defineProperty;var Qg=(Xe,Ke,Ye)=>Ke in Xe?Hg(Xe,Ke,{enumerable:!0,configurable:!0,writable:!0,value:Ye}):Xe[Ke]=Ye;var Hi=(Xe,Ke,Ye)=>Qg(Xe,typeof Ke!="symbol"?Ke+"":Ke,Ye);import{b as buffer$2,p as process$1,P as ParametersInvalidBeaconError,c as commonjsGlobal,g as getDefaultExportFromCjs,a as axios,d as Parser$2,S as Schema,M as MichelCodecPacker,O as OpKind,T as TezosToolkit,B as BeaconWallet,N as NetworkType,e as BeaconEvent,f as MichelsonMap,h as getAugmentedNamespace,i as Buffer$2,j as browser$1$1,r as require$$1$1,k as require$$0$1,l as __awaiter$1,m as __decorate$8,_ as __vitePreload,n as base,o as bytes2Char,v as validateAddress,V as ValidationResult,q as char2Bytes,s as emitMicheline,t as encodePubKey,u as encodeKeyHash}from"./contracts-DAjPKkz1.js";import{j as jsxRuntimeExports,r as reactExports,a as React,_ as __webpack_exports__GlobalWorkerOptions,D as Document$1,P as Page$1,R as React$1}from"./pdf-a-CnCRMp.js";import{c as classNames$1,N as NavLink,m as motion,a as create$2,A as AnimatePresence,u as useRouteError,i as isRouteErrorResponse,L as Link,b as useParams,r as reactDomExports,P as PropTypes,d as useLocation,e as useNavigate,f as useSearchParams,O as Outlet,g as Navigate,h as useOutlet,j as createSearchParams,k as useOutletContext,S as ScrollRestoration,l as createBrowserRouter,n as createRoutesFromChildren,R as RouterProvider,o as Route}from"./ui-YQ9YSZe-.js";import{L as Loader,F as FileLoader,B as BufferGeometry,a as BufferAttribute,T as TrianglesDrawMode,b as TriangleFanDrawMode,c as TriangleStripDrawMode,d as LoaderUtils,M as MeshPhysicalMaterial,V as Vector2,C as Color,s as sRGBEncoding,S as SpotLight,P as PointLight,D as DirectionalLight,e as Matrix4,f as Vector3,I as InstancedMesh,Q as Quaternion,O as Object3D,g as TextureLoader,h as ImageBitmapLoader,i as InterleavedBuffer,j as LinearMipmapLinearFilter,N as NearestMipmapLinearFilter,k as LinearMipmapNearestFilter,l as NearestMipmapNearestFilter,m as LinearFilter,n as NearestFilter,R as RepeatWrapping,o as MirroredRepeatWrapping,p as ClampToEdgeWrapping,q as PointsMaterial,r as Material$1,t as LineBasicMaterial,u as MeshStandardMaterial,v as DoubleSide,w as MeshBasicMaterial,x as PropertyBinding,y as SkinnedMesh,z as Mesh,A as LineSegments,E as Line$1,G as LineLoop,H as Points,J as Group$1,K as PerspectiveCamera,U as MathUtils,W as OrthographicCamera,X as Skeleton,Y as InterpolateDiscrete,Z as InterpolateLinear,_ as AnimationClip,$ as Bone,a0 as InterleavedBufferAttribute,a1 as Texture$1,a2 as VectorKeyframeTrack,a3 as QuaternionKeyframeTrack,a4 as NumberKeyframeTrack,a5 as FrontSide,a6 as Interpolant,a7 as Box3,a8 as Sphere,a9 as CompressedArrayTexture,aa as UnsignedByteType,ab as CompressedTexture,ac as LinearEncoding,ad as RedFormat,ae as RGFormat,af as RGBAFormat,ag as HalfFloatType,ah as FloatType,ai as DataTexture,aj as Data3DTexture,ak as RGB_S3TC_DXT1_Format,al as RGB_PVRTC_4BPPV1_Format,am as RGB_ETC2_Format,an as RGB_ETC1_Format,ao as RGBA_S3TC_DXT5_Format,ap as RGBA_PVRTC_4BPPV1_Format,aq as RGBA_ETC2_EAC_Format,ar as RGBA_BPTC_Format,as as RGBA_ASTC_4x4_Format,at as EventDispatcher,au as Source$2,av as Scene,aw as LightProbe,ax as WebGLCubeRenderTarget,ay as Float32BufferAttribute,az as PlaneGeometry,aA as Spherical,aB as Matrix3,aC as Euler,aD as WebGLRenderTarget,aE as ShaderMaterial,aF as DataTextureLoader,aG as DataUtils,aH as BoxGeometry,aI as BackSide,aJ as EquirectangularReflectionMapping,aK as CubeCamera,aL as NoToneMapping,aM as NoBlending,aN as WebGLRenderer,aO as ACESFilmicToneMapping,aP as VideoTexture,aQ as CanvasTexture,aR as Triangle,aS as MeshDepthMaterial,aT as Raycaster,aU as AnimationMixer,aV as LoopPingPong,aW as LoopRepeat,aX as LoopOnce}from"./three-Crc6O2-l.js";(function(){const Ke=document.createElement("link").relList;if(Ke&&Ke.supports&&Ke.supports("modulepreload"))return;for(const tt of document.querySelectorAll('link[rel="modulepreload"]'))Je(tt);new MutationObserver(tt=>{for(const st of tt)if(st.type==="childList")for(const rt of st.addedNodes)rt.tagName==="LINK"&&rt.rel==="modulepreload"&&Je(rt)}).observe(document,{childList:!0,subtree:!0});function Ye(tt){const st={};return tt.integrity&&(st.integrity=tt.integrity),tt.referrerPolicy&&(st.referrerPolicy=tt.referrerPolicy),tt.crossOrigin==="use-credentials"?st.credentials="include":tt.crossOrigin==="anonymous"?st.credentials="omit":st.credentials="same-origin",st}function Je(tt){if(tt.ep)return;tt.ep=!0;const st=Ye(tt);fetch(tt.href,st)}})();globalThis.Buffer=buffer$2.Buffer;globalThis.process=process$1;typeof process>"u"&&(globalThis.process={});process.hrtime||(process.hrtime=function(Xe){var Ke=performance.now()*.001,Ye=Math.floor(Ke),Je=Math.floor(Ke%1*1e9);return Xe&&(Ye=Ye-Xe[0],Je=Je-Xe[1],Je<0&&(Ye--,Je+=1e9)),[Ye,Je]});const container$A="_container_12gil_216",msg_box="_msg_box_12gil_217",styles$17={container:container$A,msg_box},loader$1="_loader_158c3_216",container$z="_container_158c3_223",circle="_circle_158c3_230",message$1="_message_158c3_241",styles$16={loader:loader$1,container:container$z,circle,message:message$1},Loading=({message:Xe})=>jsxRuntimeExports.jsx("div",{className:styles$16.container,children:jsxRuntimeExports.jsxs("div",{className:styles$16.loader,children:[jsxRuntimeExports.jsx("div",{className:styles$16.circle}),Xe&&jsxRuntimeExports.jsx("p",{className:styles$16.message,children:Xe})]})}),strong="_strong_1uioe_216",container$y="_container_1uioe_220",inline$1="_inline_1uioe_240",fit="_fit_1uioe_244",small$1="_small_1uioe_247",disabled$1="_disabled_1uioe_250",full="_full_1uioe_255",primary="_primary_1uioe_268",selected="_selected_1uioe_272",active$2="_active_1uioe_272",secondary="_secondary_1uioe_292",box$1="_box_1uioe_307",shadow_box="_shadow_box_1uioe_336",pagination_button="_pagination_button_1uioe_368",daoDonateButton="_daoDonateButton_1uioe_376",donateInput="_donateInput_1uioe_397",donateButton="_donateButton_1uioe_414",styles$15={strong,container:container$y,inline:inline$1,fit,small:small$1,disabled:disabled$1,full,primary,selected,active:active$2,secondary,box:box$1,shadow_box,pagination_button,daoDonateButton,donateInput,donateButton},Button=({to:Xe,href:Ke,onClick:Ye,onTo:Je,children:tt,className:st,style:rt,alt:it,disabled:ot,selected:at,fit:lt,full:ut,box:ht,strong:pt,shadow_box:ft,secondary:xt,small:vt,inline:At,activeClass:Et,...wt})=>{const Ct=`${classNames$1({[styles$15.container]:!0,[styles$15.disabled]:ot,[styles$15.fit]:lt,[styles$15.full]:ut,[styles$15.small]:vt,[styles$15.strong]:pt,[styles$15.inline]:At,[styles$15.selected]:at,[styles$15.primary]:!xt})} ${st||""}`;return ht?tt=jsxRuntimeExports.jsx("div",{className:styles$15.box,children:tt}):ft&&(tt=jsxRuntimeExports.jsx("div",{className:styles$15.shadow_box,children:tt})),Xe!=null?jsxRuntimeExports.jsx(NavLink,{"aria-label":it,to:Xe,onClick:Je,className:({isActive:Tt})=>Tt?`${styles$15.active} ${Ct} ${Et||""}`:Ct,...wt,end:!0,children:tt}):Ke!=null?jsxRuntimeExports.jsx(motion.a,{style:rt,href:Ke,target:"_blank",rel:"noopener noreferrer",className:Ct,"aria-label":it,...wt,children:tt}):jsxRuntimeExports.jsx(motion.button,{style:rt,"aria-label":it,onClick:Ye,className:Ct,...wt,children:tt})},Secondary=({children:Xe,selected:Ke,label:Ye=""})=>{const Je=classNames$1({[styles$15.secondary]:!0,[styles$15.selected]:Ke});return jsxRuntimeExports.jsx("div",{className:Je,role:"button","aria-label":Ye,children:Xe})},Secondary$1=reactExports.memo(Secondary);function IncrementButtons({onClick:Xe}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Button,{shadow_box:!0,inline:!0,onClick:Ke=>Xe(Ke,!0),children:"+"}),jsxRuntimeExports.jsx(Button,{shadow_box:!0,inline:!0,onClick:Ke=>Xe(Ke,!1),children:"-"})]})}function PaginationButtons({path:Xe,current:Ke,min:Ye,max:Je}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Button,{to:`${Xe}/${Math.max(Ye,Ke-1)}`,className:styles$15.pagination_button,shadow_box:!0,children:Ke>Ye?"❰":"|"})," ",jsxRuntimeExports.jsx(Button,{to:`${Xe}/${Math.min(Ke+1,Je)}`,className:styles$15.pagination_button,shadow_box:!0,children:Ke<Je?"❱":"|"})]})}const fadeIn=()=>({initial:{opacity:0,transition:{duration:.2,ease:"easeOut"}},animate:{opacity:1,transition:{duration:.2,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.2,ease:"easeInOut"}}}),containerMenu={hidden:{border:0,y:-25,opacity:0,transition:{ease:"easeOut",duration:.2,staggerChildren:.02,staggerDirection:-1}},show:{border:"1px",y:0,opacity:1,transition:{ease:"easeOut",staggerChildren:.04}}},containerVariants={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.333}},exit:{opacity:0,transition:{ease:"easeInOut"}}},container$x="_container_jg3vp_1",content$5="_content_jg3vp_13",message="_message_jg3vp_21",buttons$2="_buttons_jg3vp_33",loader="_loader_jg3vp_39",styles$14={container:container$x,content:content$5,message,buttons:buttons$2,loader};function n$7(){return n$7=Object.assign?Object.assign.bind():function(Xe){for(var Ke=1;Ke<arguments.length;Ke++){var Ye=arguments[Ke];for(var Je in Ye)Object.prototype.hasOwnProperty.call(Ye,Je)&&(Xe[Je]=Ye[Je])}return Xe},n$7.apply(this,arguments)}const r$5=["children","options"],o$5=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((Xe,Ke)=>(Xe[Ke.toLowerCase()]=Ke,Xe),{class:"className",for:"htmlFor"}),a$3={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},c$5=["style","script","pre"],i$5=["src","href","data","formAction","srcDoc","action"],u$1=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,l$4=/\n{2,}$/,s$5=/^(\s*>[\s\S]*?)(?=\n\n|$)/,f$2=/^ *> ?/gm,_$2=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,d$3=/^ {2,}\n/,p$4=/^(?:([-*_])( *\1){2,}) *(?:\n *)+\n/,y$2=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,h$3=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,g$3=/^(`+)((?:\\`|(?!\1)`|[^`])+)\1/,m$4=/^(?:\n *)*\n/,k$2=/\r\n?/g,x$5=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,q$1=/^\[\^([^\]]+)]/,v$2=/\f/g,b$3=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,$$1=/^\s*?\[(x|\s)\]/,S$2=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,z$2=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,E$1=/^([^\n]+)\n *(=|-)\2{2,} *\n/,A$3=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,R$1=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,B$1=/^<!--[\s\S]*?(?:-->)/,L=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,O=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,j$1=/^\{.*\}$/,C$2=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,I$2=/^<([^ >]+[:@\/][^ >]+)>/,T$1=/-([a-z])?/gi,M$2=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,w$2=/^[^\n]+(?:  \n|\n{2,})/,D=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,F=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,P$1=/^\[([^\]]*)\] ?\[([^\]]*)\]/,Z$1=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,N$1=/\t/g,G=/(^ *\||\| *$)/g,U=/^ *:-+: *$/,V$1=/^ *:-+ *$/,H$1=/^ *-+: *$/,Q$1=Xe=>`(?=[\\s\\S]+?\\1${Xe?"\\1":""})`,W$1="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|\\\\\\1|[\\s\\S])+?)",J=RegExp(`^([*_])\\1${Q$1(1)}${W$1}\\1\\1(?!\\1)`),K=RegExp(`^([*_])${Q$1(0)}${W$1}\\1(?!\\1)`),X=RegExp(`^(==)${Q$1(0)}${W$1}\\1`),Y=RegExp(`^(~~)${Q$1(0)}${W$1}\\1`),ee=/^(:[a-zA-Z0-9-_]+:)/,ne=/^\\([^0-9A-Za-z\s])/,re=/\\([^0-9A-Za-z\s])/g,te$1=/^[\s\S](?:(?!  \n|[0-9]\.|http)[^=*_~\-\n:<`\\\[!])*/,oe$1=/^\n+/,ae=/^([ \t]*)/,ce=/(?:^|\n)( *)$/,ie$1="(?:\\d+\\.)",ue="(?:[*+-])";function le(Xe){return"( *)("+(Xe===1?ie$1:ue)+") +"}const se$1=le(1),fe=le(2);function _e$2(Xe){return RegExp("^"+(Xe===1?se$1:fe))}const de$1=_e$2(1),pe$1=_e$2(2);function ye(Xe){return RegExp("^"+(Xe===1?se$1:fe)+"[^\\n]*(?:\\n(?!\\1"+(Xe===1?ie$1:ue)+" )[^\\n]*)*(\\n|$)","gm")}const he=ye(1),ge=ye(2);function me(Xe){const Ke=Xe===1?ie$1:ue;return RegExp("^( *)("+Ke+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+Ke+" (?!"+Ke+" ))\\n*|\\s*\\n*$)")}const ke=me(1),xe$1=me(2);function qe(Xe,Ke){const Ye=Ke===1,Je=Ye?ke:xe$1,tt=Ye?he:ge,st=Ye?de$1:pe$1;return{t:rt=>st.test(rt),o:je(function(rt,it){const ot=ce.exec(it.prevCapture);return ot&&(it.list||!it.inline&&!it.simple)?Je.exec(rt=ot[1]+rt):null}),i:1,u(rt,it,ot){const at=Ye?+rt[2]:void 0,lt=rt[0].replace(l$4,`
`).match(tt);let ut=!1;return{items:lt.map(function(ht,pt){const ft=st.exec(ht)[0].length,xt=RegExp("^ {1,"+ft+"}","gm"),vt=ht.replace(xt,"").replace(st,""),At=pt===lt.length-1,Et=vt.indexOf(`

`)!==-1||At&&ut;ut=Et;const wt=ot.inline,_t=ot.list;let Ct;ot.list=!0,Et?(ot.inline=!1,Ct=Se(vt)+`

`):(ot.inline=!0,Ct=Se(vt));const Tt=it(Ct,ot);return ot.inline=wt,ot.list=_t,Tt}),ordered:Ye,start:at}},l:(rt,it,ot)=>Xe(rt.ordered?"ol":"ul",{key:ot.key,start:rt.type==="20"?rt.start:void 0},rt.items.map(function(at,lt){return Xe("li",{key:lt},it(at,ot))}))}}const ve=RegExp(`^\\[((?:\\[[^\\[\\]]*(?:\\[[^\\[\\]]*\\][^\\[\\]]*)*\\]|[^\\[\\]])*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*\\)`),be=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/;function $e(Xe){return typeof Xe=="string"}function Se(Xe){let Ke=Xe.length;for(;Ke>0&&Xe[Ke-1]<=" ";)Ke--;return Xe.slice(0,Ke)}function ze(Xe,Ke){return Xe.startsWith(Ke)}function Ee(Xe,Ke,Ye){if(Array.isArray(Ye)){for(let Je=0;Je<Ye.length;Je++)if(ze(Xe,Ye[Je]))return!0;return!1}return Ye(Xe,Ke)}function Ae$2(Xe){return Xe.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function Re(Xe){return H$1.test(Xe)?"right":U.test(Xe)?"center":V$1.test(Xe)?"left":null}function Be(Xe,Ke,Ye,Je){const tt=Ye.inTable;Ye.inTable=!0;let st=[[]],rt="";function it(){if(!rt)return;const ot=st[st.length-1];ot.push.apply(ot,Ke(rt,Ye)),rt=""}return Xe.trim().split(/(`[^`]*`|\\\||\|)/).filter(Boolean).forEach((ot,at,lt)=>{ot.trim()==="|"&&(it(),Je)?at!==0&&at!==lt.length-1&&st.push([]):rt+=ot}),it(),Ye.inTable=tt,st}function Le(Xe,Ke,Ye){Ye.inline=!0;const Je=Xe[2]?Xe[2].replace(G,"").split("|").map(Re):[],tt=Xe[3]?(function(rt,it,ot){return rt.trim().split(`
`).map(function(at){return Be(at,it,ot,!0)})})(Xe[3],Ke,Ye):[],st=Be(Xe[1],Ke,Ye,!!tt.length);return Ye.inline=!1,tt.length?{align:Je,cells:tt,header:st,type:"25"}:{children:st,type:"21"}}function Oe(Xe,Ke){return Xe.align[Ke]==null?{}:{textAlign:Xe.align[Ke]}}function je(Xe){return Xe.inline=1,Xe}function Ce(Xe){return je(function(Ke,Ye){return Ye.inline?Xe.exec(Ke):null})}function Ie$1(Xe){return je(function(Ke,Ye){return Ye.inline||Ye.simple?Xe.exec(Ke):null})}function Te(Xe){return function(Ke,Ye){return Ye.inline||Ye.simple?null:Xe.exec(Ke)}}function Me(Xe){return je(function(Ke){return Xe.exec(Ke)})}const we=/(javascript|vbscript|data(?!:image)):/i;function De(Xe){try{const Ke=decodeURIComponent(Xe).replace(/[^A-Za-z0-9/:]/g,"");if(we.test(Ke))return null}catch{return null}return Xe}function Fe(Xe){return Xe&&Xe.replace(re,"$1")}function Pe(Xe,Ke,Ye){const Je=Ye.inline||!1,tt=Ye.simple||!1;Ye.inline=!0,Ye.simple=!0;const st=Xe(Ke,Ye);return Ye.inline=Je,Ye.simple=tt,st}function Ze(Xe,Ke,Ye){const Je=Ye.inline||!1,tt=Ye.simple||!1;Ye.inline=!1,Ye.simple=!0;const st=Xe(Ke,Ye);return Ye.inline=Je,Ye.simple=tt,st}function Ne(Xe,Ke,Ye){const Je=Ye.inline||!1;Ye.inline=!1;const tt=Xe(Ke,Ye);return Ye.inline=Je,tt}const Ge=(Xe,Ke,Ye)=>({children:Pe(Ke,Xe[2],Ye)});function Ue(){return{}}function Ve(){return null}function He(...Xe){return Xe.filter(Boolean).join(" ")}function Qe(Xe,Ke,Ye){let Je=Xe;const tt=Ke.split(".");for(;tt.length&&(Je=Je[tt[0]],Je!==void 0);)tt.shift();return Je||Ye}function We(Xe="",Ke={}){Ke.overrides=Ke.overrides||{},Ke.namedCodesToUnicode=Ke.namedCodesToUnicode?n$7({},a$3,Ke.namedCodesToUnicode):a$3;const Ye=Ke.slugify||Ae$2,Je=Ke.sanitizer||De,tt=Ke.createElement||reactExports.createElement,st=[s$5,y$2,h$3,Ke.enforceAtxHeadings?z$2:S$2,E$1,M$2,ke,xe$1],rt=[...st,w$2,A$3,B$1,O];function it(At,Et){for(let wt=0;wt<At.length;wt++)if(At[wt].test(Et))return!0;return!1}function ot(At,Et,...wt){const _t=Qe(Ke.overrides,At+".props",{});return tt((function(Ct,Tt){const St=Qe(Tt,Ct);return St?typeof St=="function"||typeof St=="object"&&"render"in St?St:Qe(Tt,Ct+".component",Ct):Ct})(At,Ke.overrides),n$7({},Et,_t,{className:He(Et==null?void 0:Et.className,_t.className)||void 0}),...wt)}function at(At){At=At.replace(b$3,"");let Et=!1;Ke.forceInline?Et=!0:Ke.forceBlock||(Et=Z$1.test(At)===!1);const wt=xt(ft(Et?At:Se(At).replace(oe$1,"")+`

`,{inline:Et}));for(;$e(wt[wt.length-1])&&!wt[wt.length-1].trim();)wt.pop();if(Ke.wrapper===null)return wt;const _t=Ke.wrapper||(Et?"span":"div");let Ct;if(wt.length>1||Ke.forceWrapper)Ct=wt;else{if(wt.length===1)return Ct=wt[0],typeof Ct=="string"?ot("span",{key:"outer"},Ct):Ct;Ct=null}return tt(_t,{key:"outer"},Ct)}function lt(At,Et){if(!Et||!Et.trim())return null;const wt=Et.match(u$1);return wt?wt.reduce(function(_t,Ct){const Tt=Ct.indexOf("=");if(Tt!==-1){const St=(function(Bt){return Bt.indexOf("-")!==-1&&Bt.match(L)===null&&(Bt=Bt.replace(T$1,function(Lt,zt){return zt.toUpperCase()})),Bt})(Ct.slice(0,Tt)).trim(),Rt=(function(Bt){const Lt=Bt[0];return(Lt==='"'||Lt==="'")&&Bt.length>=2&&Bt[Bt.length-1]===Lt?Bt.slice(1,-1):Bt})(Ct.slice(Tt+1).trim()),Nt=o$5[St]||St;if(Nt==="ref")return _t;const Pt=_t[Nt]=(function(Bt,Lt,zt,Dt){return Lt==="style"?(function(Vt){const Gt=[];let Qt="",jt=!1,Ht=!1,Yt="";if(!Vt)return Gt;for(let Zt=0;Zt<Vt.length;Zt++){const nn=Vt[Zt];if(nn!=='"'&&nn!=="'"||jt||(Ht?nn===Yt&&(Ht=!1,Yt=""):(Ht=!0,Yt=nn)),nn==="("&&Qt.endsWith("url")?jt=!0:nn===")"&&jt&&(jt=!1),nn!==";"||Ht||jt)Qt+=nn;else{const cn=Qt.trim();if(cn){const an=cn.indexOf(":");if(an>0){const mn=cn.slice(0,an).trim(),dn=cn.slice(an+1).trim();Gt.push([mn,dn])}}Qt=""}}const Jt=Qt.trim();if(Jt){const Zt=Jt.indexOf(":");if(Zt>0){const nn=Jt.slice(0,Zt).trim(),cn=Jt.slice(Zt+1).trim();Gt.push([nn,cn])}}return Gt})(zt).reduce(function(Vt,[Gt,Qt]){return Vt[Gt.replace(/(-[a-z])/g,jt=>jt[1].toUpperCase())]=Dt(Qt,Bt,Gt),Vt},{}):i$5.indexOf(Lt)!==-1?Dt(Fe(zt),Bt,Lt):(zt.match(j$1)&&(zt=Fe(zt.slice(1,zt.length-1))),zt==="true"||zt!=="false"&&zt)})(At,St,Rt,Je);typeof Pt=="string"&&(A$3.test(Pt)||O.test(Pt))&&(_t[Nt]=at(Pt.trim()))}else Ct!=="style"&&(_t[o$5[Ct]||Ct]=!0);return _t},{}):null}const ut=[],ht={},pt={0:{t:[">"],o:Te(s$5),i:1,u(At,Et,wt){const[,_t,Ct]=At[0].replace(f$2,"").match(_$2);return{alert:_t,children:Et(Ct,wt)}},l(At,Et,wt){const _t={key:wt.key};return At.alert&&(_t.className="markdown-alert-"+Ye(At.alert.toLowerCase(),Ae$2),At.children.unshift({attrs:{},children:[{type:"27",text:At.alert}],noInnerParse:!0,type:"11",tag:"header"})),ot("blockquote",_t,Et(At.children,wt))}},1:{t:["  "],o:Me(d$3),i:1,u:Ue,l:(At,Et,wt)=>ot("br",{key:wt.key})},2:{t:["--","__","**","- ","* ","_ "],o:Te(p$4),i:1,u:Ue,l:(At,Et,wt)=>ot("hr",{key:wt.key})},3:{t:["    "],o:Te(h$3),i:0,u:At=>({lang:void 0,text:Fe(Se(At[0].replace(/^ {4}/gm,"")))}),l:(At,Et,wt)=>ot("pre",{key:wt.key},ot("code",n$7({},At.attrs,{className:At.lang?"lang-"+At.lang:""}),At.text))},4:{t:["```","~~~"],o:Te(y$2),i:0,u:At=>({attrs:lt("code",At[3]||""),lang:At[2]||void 0,text:At[4],type:"3"})},5:{t:["`"],o:Ie$1(g$3),i:3,u:At=>({text:Fe(At[2])}),l:(At,Et,wt)=>ot("code",{key:wt.key},At.text)},6:{t:["[^"],o:Te(x$5),i:0,u:At=>(ut.push({footnote:At[2],identifier:At[1]}),{}),l:Ve},7:{t:["[^"],o:Ce(q$1),i:1,u:At=>({target:"#"+Ye(At[1],Ae$2),text:At[1]}),l:(At,Et,wt)=>ot("a",{key:wt.key,href:Je(At.target,"a","href")},ot("sup",{key:wt.key},At.text))},8:{t:["[ ]","[x]"],o:Ce($$1),i:1,u:At=>({completed:At[1].toLowerCase()==="x"}),l:(At,Et,wt)=>ot("input",{checked:At.completed,key:wt.key,readOnly:!0,type:"checkbox"})},9:{t:["#"],o:Te(Ke.enforceAtxHeadings?z$2:S$2),i:1,u:(At,Et,wt)=>({children:Pe(Et,At[2],wt),id:Ye(At[2],Ae$2),level:At[1].length}),l:(At,Et,wt)=>ot("h"+At.level,{id:At.id,key:wt.key},Et(At.children,wt))},10:{t:At=>{const Et=At.indexOf(`
`);return Et>0&&Et<At.length-1&&(At[Et+1]==="="||At[Et+1]==="-")},o:Te(E$1),i:1,u:(At,Et,wt)=>({children:Pe(Et,At[1],wt),level:At[2]==="="?1:2,type:"9"})},11:{t:["<"],o:Me(A$3),i:1,u(At,Et,wt){const[,_t]=At[3].match(ae),Ct=RegExp("^"+_t,"gm"),Tt=At[3].replace(Ct,""),St=it(rt,Tt)?Ne:Pe,Rt=At[1].toLowerCase(),Nt=c$5.indexOf(Rt)!==-1,Pt=(Nt?Rt:At[1]).trim(),Bt={attrs:lt(Pt,At[2]),noInnerParse:Nt,tag:Pt};if(wt.inAnchor=wt.inAnchor||Rt==="a",Nt)Bt.text=At[3];else{const Lt=wt.inHTML;wt.inHTML=!0,Bt.children=St(Et,Tt,wt),wt.inHTML=Lt}return wt.inAnchor=!1,Bt},l:(At,Et,wt)=>ot(At.tag,n$7({key:wt.key},At.attrs),At.text||(At.children?Et(At.children,wt):""))},13:{t:["<"],o:Me(O),i:1,u(At){const Et=At[1].trim();return{attrs:lt(Et,At[2]||""),tag:Et}},l:(At,Et,wt)=>ot(At.tag,n$7({},At.attrs,{key:wt.key}))},12:{t:["<!--"],o:Me(B$1),i:1,u:()=>({}),l:Ve},14:{t:["!["],o:Ie$1(be),i:1,u:At=>({alt:Fe(At[1]),target:Fe(At[2]),title:Fe(At[3])}),l:(At,Et,wt)=>ot("img",{key:wt.key,alt:At.alt||void 0,title:At.title||void 0,src:Je(At.target,"img","src")})},15:{t:["["],o:Ce(ve),i:3,u:(At,Et,wt)=>({children:Ze(Et,At[1],wt),target:Fe(At[2]),title:Fe(At[3])}),l:(At,Et,wt)=>ot("a",{key:wt.key,href:Je(At.target,"a","href"),title:At.title},Et(At.children,wt))},16:{t:["<"],o:Ce(I$2),i:0,u(At){let Et=At[1],wt=!1;return Et.indexOf("@")!==-1&&Et.indexOf("//")===-1&&(wt=!0,Et=Et.replace("mailto:","")),{children:[{text:Et,type:"27"}],target:wt?"mailto:"+Et:Et,type:"15"}}},17:{t:(At,Et)=>!Et.inAnchor&&!Ke.disableAutoLink&&(ze(At,"http://")||ze(At,"https://")),o:Ce(C$2),i:0,u:At=>({children:[{text:At[1],type:"27"}],target:At[1],title:void 0,type:"15"})},20:qe(ot,1),33:qe(ot,2),19:{t:[`
`],o:Te(m$4),i:3,u:Ue,l:()=>`
`},21:{o:je(function(At,Et){if(Et.inline||Et.simple||Et.inHTML&&At.indexOf(`

`)===-1&&Et.prevCapture.indexOf(`

`)===-1)return null;let wt="",_t=0;for(;;){const Tt=At.indexOf(`
`,_t),St=At.slice(_t,Tt===-1?void 0:Tt+1);if(it(st,St)||(wt+=St,Tt===-1||!St.trim()))break;_t=Tt+1}const Ct=Se(wt);return Ct===""?null:[wt,,Ct]}),i:3,u:Ge,l:(At,Et,wt)=>ot("p",{key:wt.key},Et(At.children,wt))},22:{t:["["],o:Ce(D),i:0,u:At=>(ht[At[1]]={target:At[2],title:At[4]},{}),l:Ve},23:{t:["!["],o:Ie$1(F),i:0,u:At=>({alt:At[1]?Fe(At[1]):void 0,ref:At[2]}),l:(At,Et,wt)=>ht[At.ref]?ot("img",{key:wt.key,alt:At.alt,src:Je(ht[At.ref].target,"img","src"),title:ht[At.ref].title}):null},24:{t:At=>At[0]==="["&&At.indexOf("](")===-1,o:Ce(P$1),i:0,u:(At,Et,wt)=>({children:Et(At[1],wt),fallbackChildren:At[0],ref:At[2]}),l:(At,Et,wt)=>ht[At.ref]?ot("a",{key:wt.key,href:Je(ht[At.ref].target,"a","href"),title:ht[At.ref].title},Et(At.children,wt)):ot("span",{key:wt.key},At.fallbackChildren)},25:{t:["|"],o:Te(M$2),i:1,u:Le,l(At,Et,wt){const _t=At;return ot("table",{key:wt.key},ot("thead",null,ot("tr",null,_t.header.map(function(Ct,Tt){return ot("th",{key:Tt,style:Oe(_t,Tt)},Et(Ct,wt))}))),ot("tbody",null,_t.cells.map(function(Ct,Tt){return ot("tr",{key:Tt},Ct.map(function(St,Rt){return ot("td",{key:Rt,style:Oe(_t,Rt)},Et(St,wt))}))})))}},27:{o:je(function(At,Et){let wt;return ze(At,":")&&(wt=ee.exec(At)),wt||te$1.exec(At)}),i:4,u(At){const Et=At[0];return{text:Et.indexOf("&")===-1?Et:Et.replace(R$1,(wt,_t)=>Ke.namedCodesToUnicode[_t]||wt)}},l:At=>At.text},28:{t:["**","__"],o:Ie$1(J),i:2,u:(At,Et,wt)=>({children:Et(At[2],wt)}),l:(At,Et,wt)=>ot("strong",{key:wt.key},Et(At.children,wt))},29:{t:At=>{const Et=At[0];return(Et==="*"||Et==="_")&&At[1]!==Et},o:Ie$1(K),i:3,u:(At,Et,wt)=>({children:Et(At[2],wt)}),l:(At,Et,wt)=>ot("em",{key:wt.key},Et(At.children,wt))},30:{t:["\\"],o:Ie$1(ne),i:1,u:At=>({text:At[1],type:"27"})},31:{t:["=="],o:Ie$1(X),i:3,u:Ge,l:(At,Et,wt)=>ot("mark",{key:wt.key},Et(At.children,wt))},32:{t:["~~"],o:Ie$1(Y),i:3,u:Ge,l:(At,Et,wt)=>ot("del",{key:wt.key},Et(At.children,wt))}};Ke.disableParsingRawHTML===!0&&(delete pt[11],delete pt[13]);const ft=(function(At){var Et=Object.keys(At);function wt(_t,Ct){var Tt=[];if(Ct.prevCapture=Ct.prevCapture||"",_t.trim())for(;_t;)for(var St=0;St<Et.length;){var Rt=Et[St],Nt=At[Rt];if(!Nt.t||Ee(_t,Ct,Nt.t)){var Pt=Nt.o(_t,Ct);if(Pt&&Pt[0]){_t=_t.substring(Pt[0].length);var Bt=Nt.u(Pt,wt,Ct);Ct.prevCapture+=Pt[0],Bt.type||(Bt.type=Rt),Tt.push(Bt);break}St++}else St++}return Ct.prevCapture="",Tt}return Et.sort(function(_t,Ct){return At[_t].i-At[Ct].i||(_t<Ct?-1:1)}),function(_t,Ct){return wt((function(Tt){return Tt.replace(k$2,`
`).replace(v$2,"").replace(N$1,"    ")})(_t),Ct)}})(pt),xt=(function(At,Et){return function wt(_t,Ct={}){if(Array.isArray(_t)){const Tt=Ct.key,St=[];let Rt=!1;for(let Nt=0;Nt<_t.length;Nt++){Ct.key=Nt;const Pt=wt(_t[Nt],Ct),Bt=$e(Pt);Bt&&Rt?St[St.length-1]+=Pt:Pt!==null&&St.push(Pt),Rt=Bt}return Ct.key=Tt,St}return(function(Tt,St,Rt){const Nt=At[Tt.type].l;return Et?Et(()=>Nt(Tt,St,Rt),Tt,St,Rt):Nt(Tt,St,Rt)})(_t,wt,Ct)}})(pt,Ke.renderRule),vt=at(Xe);return ut.length?ot("div",null,vt,ot("footer",{key:"footer"},ut.map(function(At){return ot("div",{id:Ye(At.identifier,Ae$2),key:At.identifier},At.identifier,xt(ft(At.footnote,{inline:!0})))}))):vt}const Markdown$1=Xe=>{let{children:Ke,options:Ye}=Xe,Je=(function(tt,st){if(tt==null)return{};var rt,it,ot={},at=Object.keys(tt);for(it=0;it<at.length;it++)st.indexOf(rt=at[it])>=0||(ot[rt]=tt[rt]);return ot})(Xe,r$5);return reactExports.cloneElement(We(Ke??"",Ye),Je)},content$4="_content_1qqc3_216",styles$13={content:content$4},LinkRenderer=Xe=>jsxRuntimeExports.jsx("a",{href:Xe.href,target:"_blank",rel:"noreferrer",children:Xe.children}),Markdown=({children:Xe,className:Ke})=>jsxRuntimeExports.jsx(Markdown$1,{options:{forceBlock:!0,overrides:{a:{component:LinkRenderer},hr:{props:{className:styles$13.spacer}}}},className:`${Ke||""} ${styles$13.content}`,children:Xe}),__vite_import_meta_env__={BASE_URL:"/teia-ui/previews/pr-480/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CJS_IGNORE_WARNING:"true",VITE_IMGPROXY:"https://imgproxy.teia.rocks",VITE_IPFS_DEFAULT_GATEWAY:"CDN",VITE_IPFS_UPLOAD_PROXY:"https://ipfsproxy.teia.rocks",VITE_LOGOS:"https://lists.teia.art/teia-logos/dist",VITE_TEIA_GRAPHQL_API:"https://teztok.teia.rocks/v1/graphql",VITE_TEIA_REPORT:"https://lists.teia.art",VITE_TEZOSDOMAINS_GRAPHQL_API:"https://api.tezos.domains/graphql",VITE_TEZOS_RPC:"https://mainnet.teia.rocks",VITE_TZKT_API:"https://api.tzkt.io",VITE_TZPROFILES_GRAPHQL_API:"https://indexer.tzprofiles.com/v1/graphql"},subscribeWithSelectorImpl=Xe=>(Ke,Ye,Je)=>{const tt=Je.subscribe;return Je.subscribe=(rt,it,ot)=>{let at=rt;if(it){const lt=(ot==null?void 0:ot.equalityFn)||Object.is;let ut=rt(Je.getState());at=ht=>{const pt=rt(ht);if(!lt(ut,pt)){const ft=ut;it(ut=pt,ft)}},ot!=null&&ot.fireImmediately&&it(ut,ut)}return tt(at)},Xe(Ke,Ye,Je)},subscribeWithSelector=subscribeWithSelectorImpl;function createJSONStorage(Xe){let Ke;try{Ke=Xe()}catch{return}return{getItem:Je=>{var tt;const st=it=>it===null?null:JSON.parse(it),rt=(tt=Ke.getItem(Je))!=null?tt:null;return rt instanceof Promise?rt.then(st):st(rt)},setItem:(Je,tt)=>Ke.setItem(Je,JSON.stringify(tt)),removeItem:Je=>Ke.removeItem(Je)}}const toThenable=Xe=>Ke=>{try{const Ye=Xe(Ke);return Ye instanceof Promise?Ye:{then(Je){return toThenable(Je)(Ye)},catch(Je){return this}}}catch(Ye){return{then(Je){return this},catch(Je){return toThenable(Je)(Ye)}}}},oldImpl=(Xe,Ke)=>(Ye,Je,tt)=>{let st={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:vt=>vt,version:0,merge:(vt,At)=>({...At,...vt}),...Ke},rt=!1;const it=new Set,ot=new Set;let at;try{at=st.getStorage()}catch{}if(!at)return Xe((...vt)=>{console.warn(`[zustand persist middleware] Unable to update item '${st.name}', the given storage is currently unavailable.`),Ye(...vt)},Je,tt);const lt=toThenable(st.serialize),ut=()=>{const vt=st.partialize({...Je()});let At;const Et=lt({state:vt,version:st.version}).then(wt=>at.setItem(st.name,wt)).catch(wt=>{At=wt});if(At)throw At;return Et},ht=tt.setState;tt.setState=(vt,At)=>{ht(vt,At),ut()};const pt=Xe((...vt)=>{Ye(...vt),ut()},Je,tt);let ft;const xt=()=>{var vt;if(!at)return;rt=!1,it.forEach(Et=>Et(Je()));const At=((vt=st.onRehydrateStorage)==null?void 0:vt.call(st,Je()))||void 0;return toThenable(at.getItem.bind(at))(st.name).then(Et=>{if(Et)return st.deserialize(Et)}).then(Et=>{if(Et)if(typeof Et.version=="number"&&Et.version!==st.version){if(st.migrate)return st.migrate(Et.state,Et.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return Et.state}).then(Et=>{var wt;return ft=st.merge(Et,(wt=Je())!=null?wt:pt),Ye(ft,!0),ut()}).then(()=>{At==null||At(ft,void 0),rt=!0,ot.forEach(Et=>Et(ft))}).catch(Et=>{At==null||At(void 0,Et)})};return tt.persist={setOptions:vt=>{st={...st,...vt},vt.getStorage&&(at=vt.getStorage())},clearStorage:()=>{at==null||at.removeItem(st.name)},getOptions:()=>st,rehydrate:()=>xt(),hasHydrated:()=>rt,onHydrate:vt=>(it.add(vt),()=>{it.delete(vt)}),onFinishHydration:vt=>(ot.add(vt),()=>{ot.delete(vt)})},xt(),ft||pt},newImpl=(Xe,Ke)=>(Ye,Je,tt)=>{let st={storage:createJSONStorage(()=>localStorage),partialize:xt=>xt,version:0,merge:(xt,vt)=>({...vt,...xt}),...Ke},rt=!1;const it=new Set,ot=new Set;let at=st.storage;if(!at)return Xe((...xt)=>{console.warn(`[zustand persist middleware] Unable to update item '${st.name}', the given storage is currently unavailable.`),Ye(...xt)},Je,tt);const lt=()=>{const xt=st.partialize({...Je()});return at.setItem(st.name,{state:xt,version:st.version})},ut=tt.setState;tt.setState=(xt,vt)=>{ut(xt,vt),lt()};const ht=Xe((...xt)=>{Ye(...xt),lt()},Je,tt);let pt;const ft=()=>{var xt;if(!at)return;rt=!1,it.forEach(At=>At(Je()));const vt=((xt=st.onRehydrateStorage)==null?void 0:xt.call(st,Je()))||void 0;return toThenable(at.getItem.bind(at))(st.name).then(At=>{if(At)if(typeof At.version=="number"&&At.version!==st.version){if(st.migrate)return st.migrate(At.state,At.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return At.state}).then(At=>{var Et;return pt=st.merge(At,(Et=Je())!=null?Et:ht),Ye(pt,!0),lt()}).then(()=>{vt==null||vt(pt,void 0),rt=!0,ot.forEach(At=>At(pt))}).catch(At=>{vt==null||vt(void 0,At)})};return tt.persist={setOptions:xt=>{st={...st,...xt},xt.storage&&(at=xt.storage)},clearStorage:()=>{at==null||at.removeItem(st.name)},getOptions:()=>st,rehydrate:()=>ft(),hasHydrated:()=>rt,onHydrate:xt=>(it.add(xt),()=>{it.delete(xt)}),onFinishHydration:xt=>(ot.add(xt),()=>{ot.delete(xt)})},ft(),pt||ht},persistImpl=(Xe,Ke)=>{var Ye;return"getStorage"in Ke||"serialize"in Ke||"deserialize"in Ke?(((Ye=__vite_import_meta_env__)==null?void 0:Ye.MODE)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),oldImpl(Xe,Ke)):newImpl(Xe,Ke)},persist=persistImpl,useModalStore=create$2()(subscribeWithSelector((Xe,Ke)=>({collapsed:!0,visible:!1,message:"",progress:!1,confirm:!0,confirmCallback:()=>Ke().close(),show:(Ye,Je)=>{Xe({message:`# ${Ye}
${Je||""}`,progress:!1,visible:!0,confirm:!0,confirmCallback:()=>{Xe({visible:!1})}})},showError(Ye,Je){const tt=Ke().show;console.error(Je),Je instanceof Error&&tt(`${Ye} (Error)`,Je.message),Je instanceof ParametersInvalidBeaconError&&tt(`${Ye} (${Je.title})`,Je.description)},setCollapsed:Ye=>Xe({collapsed:Ye}),toggleMenu:()=>Xe({collapsed:!Ke().collapsed}),step:(Ye,Je,tt)=>{tt&&window.scrollTo(0,0),Xe({progress:!0,visible:!0,confirm:!1,message:`# ${Ye}
${Je}`})},close:()=>{Xe({visible:!1,progress:!1})}}))),FeedbackComponent=()=>{const[Xe,Ke,Ye,Je,tt]=useModalStore(st=>[st.visible,st.message,st.progress,st.confirm,st.confirmCallback]);return jsxRuntimeExports.jsx(AnimatePresence,{children:Xe&&jsxRuntimeExports.jsx(motion.div,{className:styles$14.container,...fadeIn(),children:jsxRuntimeExports.jsxs("div",{className:styles$14.content,children:[jsxRuntimeExports.jsx(Markdown,{className:styles$14.message,children:Ke}),jsxRuntimeExports.jsx("div",{className:styles$14.loader,children:Ye&&jsxRuntimeExports.jsx(Loading,{})}),Je&&jsxRuntimeExports.jsx("div",{className:styles$14.buttons,children:jsxRuntimeExports.jsx(Button,{shadow_box:!0,onClick:()=>tt(),children:"close"})})]})})})},container$w="_container_1y6ng_216",content$3="_content_1y6ng_227",feed$1="_feed_1y6ng_235",styles$12={container:container$w,content:content$3,feed:feed$1};function useTitle(Xe){reactExports.useEffect(()=>{document.title=Xe?`${Xe} - teia`:"teia"},[Xe])}const footer={mint:"This open-source, experimental dApp is developed and maintained by the Teia Community and powered by the Tezos blockchain.",warning:"use it consciously. visit artists profiles. be careful with copy minters."},mint={supports:"Supports"},about$1={paragraphs:["a collaborative artwork made of artworks, a place for ideas and creative works.","a non-profit, open-source online platform for trading digital assets as OBJKT NFTs.","a collective, aligning under the values of sustainability, accessibility, and equity.","owned and maintained by its community, built and improved by its participants.","Teia is and always will be a work-in-progress.","If you're having trouble with the website, please report an %ISSUE%"]},en={footer,mint,about:about$1};function useLanguage(){return{language:en}}const container$v="_container_mbqkd_216",pinned="_pinned_mbqkd_226",content$2="_content_mbqkd_231",minimal$2="_minimal_mbqkd_256",logo$1="_logo_mbqkd_259",menus="_menus_mbqkd_263",menu_label_row="_menu_label_row_mbqkd_285",copyright="_copyright_mbqkd_313",menuitems="_menuitems_mbqkd_318",styles$11={container:container$v,pinned,content:content$2,minimal:minimal$2,logo:logo$1,menus,menu_label_row,copyright,menuitems},walletPreview=Xe=>{try{return`${Xe.slice(0,5)}...${Xe.slice(Xe.length-5,Xe.length)}`}catch{return""}},capitalizeFirstLetter=Xe=>Xe[0].toUpperCase()+Xe.slice(1),theme_selection="_theme_selection_8hh8c_216",menu$2="_menu_8hh8c_220",content$1="_content_8hh8c_237",menu_label="_menu_label_8hh8c_248",address="_address_8hh8c_261",menu_left$1="_menu_left_8hh8c_267",menu_right="_menu_right_8hh8c_268",disabled="_disabled_8hh8c_299",state_buttons="_state_buttons_8hh8c_303",line$3="_line_8hh8c_312",styles$10={theme_selection,menu:menu$2,content:content$1,menu_label,address,menu_left:menu_left$1,menu_right,disabled,state_buttons,line:line$3};var lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */lodash.exports;(function(Xe,Ke){(function(){var Ye,Je="4.17.21",tt=200,st="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",rt="Expected a function",it="Invalid `variable` option passed into `_.template`",ot="__lodash_hash_undefined__",at=500,lt="__lodash_placeholder__",ut=1,ht=2,pt=4,ft=1,xt=2,vt=1,At=2,Et=4,wt=8,_t=16,Ct=32,Tt=64,St=128,Rt=256,Nt=512,Pt=30,Bt="...",Lt=800,zt=16,Dt=1,Vt=2,Gt=3,Qt=1/0,jt=9007199254740991,Ht=17976931348623157e292,Yt=NaN,Jt=4294967295,Zt=Jt-1,nn=Jt>>>1,cn=[["ary",St],["bind",vt],["bindKey",At],["curry",wt],["curryRight",_t],["flip",Nt],["partial",Ct],["partialRight",Tt],["rearg",Rt]],an="[object Arguments]",mn="[object Array]",dn="[object AsyncFunction]",fn="[object Boolean]",Sn="[object Date]",Tn="[object DOMException]",Nn="[object Error]",gn="[object Function]",_n="[object GeneratorFunction]",kn="[object Map]",Wt="[object Number]",sn="[object Null]",hn="[object Object]",En="[object Promise]",An="[object Proxy]",wn="[object RegExp]",Fn="[object Set]",Hn="[object String]",Yn="[object Symbol]",Un="[object Undefined]",Kn="[object WeakMap]",hs="[object WeakSet]",zn="[object ArrayBuffer]",es="[object DataView]",bn="[object Float32Array]",pn="[object Float64Array]",Ln="[object Int8Array]",Mn="[object Int16Array]",ls="[object Int32Array]",_s="[object Uint8Array]",as="[object Uint8ClampedArray]",In="[object Uint16Array]",Pn="[object Uint32Array]",qn=/\b__p \+= '';/g,Wn=/\b(__p \+=) '' \+/g,ts=/(__e\(.*?\)|\b__t\)) \+\n'';/g,us=/&(?:amp|lt|gt|quot|#39);/g,xs=/[&<>"']/g,vs=RegExp(us.source),gs=RegExp(xs.source),Ss=/<%-([\s\S]+?)%>/g,Es=/<%([\s\S]+?)%>/g,Is=/<%=([\s\S]+?)%>/g,qs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vs=/^\w*$/,Sr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pr=/[\\^$.*+?()[\]{}|]/g,ri=RegExp(Pr.source),Ws=/^\s+/,Ms=/\s/,Vo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ii=/\{\n\/\* \[wrapped with (.+)\] \*/,Er=/,? & /,Uo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,wi=/[()=,{}\[\]\/\s]/,Go=/\\(\\)?/g,qo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qi=/\w*$/,Wo=/^[-+]0x[0-9a-f]+$/i,Ho=/^0b[01]+$/i,Qo=/^\[object .+?Constructor\]$/,Ko=/^0o[0-7]+$/i,Yo=/^(?:0|[1-9]\d*)$/,Xo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oi=/($^)/,Jo=/['\n\r\u2028\u2029\\]/g,ai="\\ud800-\\udfff",Zo="\\u0300-\\u036f",ea="\\ufe20-\\ufe2f",ta="\\u20d0-\\u20ff",Ki=Zo+ea+ta,Yi="\\u2700-\\u27bf",Xi="a-z\\xdf-\\xf6\\xf8-\\xff",na="\\xac\\xb1\\xd7\\xf7",ar="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ci="\\u2000-\\u206f",Ji=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_i="A-Z\\xc0-\\xd6\\xd8-\\xde",Zi="\\ufe0e\\ufe0f",Br=na+ar+Ci+Ji,$i="['’]",sa="["+ai+"]",Ri="["+Br+"]",ci="["+Ki+"]",eo="\\d+",kt="["+Yi+"]",Ut="["+Xi+"]",tn="[^"+ai+Br+eo+Yi+Xi+_i+"]",xn="\\ud83c[\\udffb-\\udfff]",Rn="(?:"+ci+"|"+xn+")",jn="[^"+ai+"]",rs="(?:\\ud83c[\\udde6-\\uddff]){2}",fs="[\\ud800-\\udbff][\\udc00-\\udfff]",$s="["+_i+"]",Ds="\\u200d",Ac="(?:"+Ut+"|"+tn+")",Bu="(?:"+$s+"|"+tn+")",yc="(?:"+$i+"(?:d|ll|m|re|s|t|ve))?",bc="(?:"+$i+"(?:D|LL|M|RE|S|T|VE))?",Ec=Rn+"?",wc="["+Zi+"]?",Lu="(?:"+Ds+"(?:"+[jn,rs,fs].join("|")+")"+wc+Ec+")*",ju="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Cc=wc+Ec+Lu,Vu="(?:"+[kt,rs,fs].join("|")+")"+Cc,Uu="(?:"+[jn+ci+"?",ci,rs,fs,sa].join("|")+")",Gu=RegExp($i,"g"),qu=RegExp(ci,"g"),ra=RegExp(xn+"(?="+xn+")|"+Uu+Cc,"g"),Wu=RegExp([$s+"?"+Ut+"+"+yc+"(?="+[Ri,$s,"$"].join("|")+")",Bu+"+"+bc+"(?="+[Ri,$s+Ac,"$"].join("|")+")",$s+"?"+Ac+"+"+yc,$s+"+"+bc,zu,ju,eo,Vu].join("|"),"g"),Hu=RegExp("["+Ds+ai+Ki+Zi+"]"),Qu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ku=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yu=-1,Ts={};Ts[bn]=Ts[pn]=Ts[Ln]=Ts[Mn]=Ts[ls]=Ts[_s]=Ts[as]=Ts[In]=Ts[Pn]=!0,Ts[an]=Ts[mn]=Ts[zn]=Ts[fn]=Ts[es]=Ts[Sn]=Ts[Nn]=Ts[gn]=Ts[kn]=Ts[Wt]=Ts[hn]=Ts[wn]=Ts[Fn]=Ts[Hn]=Ts[Kn]=!1;var Cs={};Cs[an]=Cs[mn]=Cs[zn]=Cs[es]=Cs[fn]=Cs[Sn]=Cs[bn]=Cs[pn]=Cs[Ln]=Cs[Mn]=Cs[ls]=Cs[kn]=Cs[Wt]=Cs[hn]=Cs[wn]=Cs[Fn]=Cs[Hn]=Cs[Yn]=Cs[_s]=Cs[as]=Cs[In]=Cs[Pn]=!0,Cs[Nn]=Cs[gn]=Cs[Kn]=!1;var Xu={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ju={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Zu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ed={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nd=parseFloat,sd=parseInt,Sc=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,rd=typeof self=="object"&&self&&self.Object===Object&&self,js=Sc||rd||Function("return this")(),ia=Ke&&!Ke.nodeType&&Ke,Kr=ia&&!0&&Xe&&!Xe.nodeType&&Xe,Tc=Kr&&Kr.exports===ia,oa=Tc&&Sc.process,cr=(function(){try{var vn=Kr&&Kr.require&&Kr.require("util").types;return vn||oa&&oa.binding&&oa.binding("util")}catch{}})(),Ic=cr&&cr.isArrayBuffer,$c=cr&&cr.isDate,Rc=cr&&cr.isMap,kc=cr&&cr.isRegExp,Nc=cr&&cr.isSet,Dc=cr&&cr.isTypedArray;function er(vn,$n,Cn){switch(Cn.length){case 0:return vn.call($n);case 1:return vn.call($n,Cn[0]);case 2:return vn.call($n,Cn[0],Cn[1]);case 3:return vn.call($n,Cn[0],Cn[1],Cn[2])}return vn.apply($n,Cn)}function id(vn,$n,Cn,Gn){for(var ns=-1,As=vn==null?0:vn.length;++ns<As;){var Ps=vn[ns];$n(Gn,Ps,Cn(Ps),vn)}return Gn}function lr(vn,$n){for(var Cn=-1,Gn=vn==null?0:vn.length;++Cn<Gn&&$n(vn[Cn],Cn,vn)!==!1;);return vn}function od(vn,$n){for(var Cn=vn==null?0:vn.length;Cn--&&$n(vn[Cn],Cn,vn)!==!1;);return vn}function Oc(vn,$n){for(var Cn=-1,Gn=vn==null?0:vn.length;++Cn<Gn;)if(!$n(vn[Cn],Cn,vn))return!1;return!0}function Lr(vn,$n){for(var Cn=-1,Gn=vn==null?0:vn.length,ns=0,As=[];++Cn<Gn;){var Ps=vn[Cn];$n(Ps,Cn,vn)&&(As[ns++]=Ps)}return As}function to(vn,$n){var Cn=vn==null?0:vn.length;return!!Cn&&li(vn,$n,0)>-1}function aa(vn,$n,Cn){for(var Gn=-1,ns=vn==null?0:vn.length;++Gn<ns;)if(Cn($n,vn[Gn]))return!0;return!1}function Rs(vn,$n){for(var Cn=-1,Gn=vn==null?0:vn.length,ns=Array(Gn);++Cn<Gn;)ns[Cn]=$n(vn[Cn],Cn,vn);return ns}function jr(vn,$n){for(var Cn=-1,Gn=$n.length,ns=vn.length;++Cn<Gn;)vn[ns+Cn]=$n[Cn];return vn}function ca(vn,$n,Cn,Gn){var ns=-1,As=vn==null?0:vn.length;for(Gn&&As&&(Cn=vn[++ns]);++ns<As;)Cn=$n(Cn,vn[ns],ns,vn);return Cn}function ad(vn,$n,Cn,Gn){var ns=vn==null?0:vn.length;for(Gn&&ns&&(Cn=vn[--ns]);ns--;)Cn=$n(Cn,vn[ns],ns,vn);return Cn}function la(vn,$n){for(var Cn=-1,Gn=vn==null?0:vn.length;++Cn<Gn;)if($n(vn[Cn],Cn,vn))return!0;return!1}var cd=ua("length");function ld(vn){return vn.split("")}function ud(vn){return vn.match(Uo)||[]}function Fc(vn,$n,Cn){var Gn;return Cn(vn,function(ns,As,Ps){if($n(ns,As,Ps))return Gn=As,!1}),Gn}function no(vn,$n,Cn,Gn){for(var ns=vn.length,As=Cn+(Gn?1:-1);Gn?As--:++As<ns;)if($n(vn[As],As,vn))return As;return-1}function li(vn,$n,Cn){return $n===$n?wd(vn,$n,Cn):no(vn,Mc,Cn)}function dd(vn,$n,Cn,Gn){for(var ns=Cn-1,As=vn.length;++ns<As;)if(Gn(vn[ns],$n))return ns;return-1}function Mc(vn){return vn!==vn}function Pc(vn,$n){var Cn=vn==null?0:vn.length;return Cn?ha(vn,$n)/Cn:Yt}function ua(vn){return function($n){return $n==null?Ye:$n[vn]}}function da(vn){return function($n){return vn==null?Ye:vn[$n]}}function Bc(vn,$n,Cn,Gn,ns){return ns(vn,function(As,Ps,ws){Cn=Gn?(Gn=!1,As):$n(Cn,As,Ps,ws)}),Cn}function hd(vn,$n){var Cn=vn.length;for(vn.sort($n);Cn--;)vn[Cn]=vn[Cn].value;return vn}function ha(vn,$n){for(var Cn,Gn=-1,ns=vn.length;++Gn<ns;){var As=$n(vn[Gn]);As!==Ye&&(Cn=Cn===Ye?As:Cn+As)}return Cn}function pa(vn,$n){for(var Cn=-1,Gn=Array(vn);++Cn<vn;)Gn[Cn]=$n(Cn);return Gn}function pd(vn,$n){return Rs($n,function(Cn){return[Cn,vn[Cn]]})}function Lc(vn){return vn&&vn.slice(0,Uc(vn)+1).replace(Ws,"")}function tr(vn){return function($n){return vn($n)}}function fa(vn,$n){return Rs($n,function(Cn){return vn[Cn]})}function ki(vn,$n){return vn.has($n)}function jc(vn,$n){for(var Cn=-1,Gn=vn.length;++Cn<Gn&&li($n,vn[Cn],0)>-1;);return Cn}function zc(vn,$n){for(var Cn=vn.length;Cn--&&li($n,vn[Cn],0)>-1;);return Cn}function md(vn,$n){for(var Cn=vn.length,Gn=0;Cn--;)vn[Cn]===$n&&++Gn;return Gn}var gd=da(Xu),xd=da(Ju);function vd(vn){return"\\"+ed[vn]}function Ad(vn,$n){return vn==null?Ye:vn[$n]}function ui(vn){return Hu.test(vn)}function yd(vn){return Qu.test(vn)}function bd(vn){for(var $n,Cn=[];!($n=vn.next()).done;)Cn.push($n.value);return Cn}function ma(vn){var $n=-1,Cn=Array(vn.size);return vn.forEach(function(Gn,ns){Cn[++$n]=[ns,Gn]}),Cn}function Vc(vn,$n){return function(Cn){return vn($n(Cn))}}function zr(vn,$n){for(var Cn=-1,Gn=vn.length,ns=0,As=[];++Cn<Gn;){var Ps=vn[Cn];(Ps===$n||Ps===lt)&&(vn[Cn]=lt,As[ns++]=Cn)}return As}function so(vn){var $n=-1,Cn=Array(vn.size);return vn.forEach(function(Gn){Cn[++$n]=Gn}),Cn}function Ed(vn){var $n=-1,Cn=Array(vn.size);return vn.forEach(function(Gn){Cn[++$n]=[Gn,Gn]}),Cn}function wd(vn,$n,Cn){for(var Gn=Cn-1,ns=vn.length;++Gn<ns;)if(vn[Gn]===$n)return Gn;return-1}function Cd(vn,$n,Cn){for(var Gn=Cn+1;Gn--;)if(vn[Gn]===$n)return Gn;return Gn}function di(vn){return ui(vn)?Td(vn):cd(vn)}function xr(vn){return ui(vn)?Id(vn):ld(vn)}function Uc(vn){for(var $n=vn.length;$n--&&Ms.test(vn.charAt($n)););return $n}var Sd=da(Zu);function Td(vn){for(var $n=ra.lastIndex=0;ra.test(vn);)++$n;return $n}function Id(vn){return vn.match(ra)||[]}function $d(vn){return vn.match(Wu)||[]}var Rd=(function vn($n){$n=$n==null?js:hi.defaults(js.Object(),$n,hi.pick(js,Ku));var Cn=$n.Array,Gn=$n.Date,ns=$n.Error,As=$n.Function,Ps=$n.Math,ws=$n.Object,ga=$n.RegExp,kd=$n.String,ur=$n.TypeError,ro=Cn.prototype,Nd=As.prototype,pi=ws.prototype,io=$n["__core-js_shared__"],oo=Nd.toString,bs=pi.hasOwnProperty,Dd=0,Gc=(function(){var mt=/[^.]+$/.exec(io&&io.keys&&io.keys.IE_PROTO||"");return mt?"Symbol(src)_1."+mt:""})(),ao=pi.toString,Od=oo.call(ws),Fd=js._,Md=ga("^"+oo.call(bs).replace(Pr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),co=Tc?$n.Buffer:Ye,Vr=$n.Symbol,lo=$n.Uint8Array,qc=co?co.allocUnsafe:Ye,uo=Vc(ws.getPrototypeOf,ws),Wc=ws.create,Hc=pi.propertyIsEnumerable,ho=ro.splice,Qc=Vr?Vr.isConcatSpreadable:Ye,Ni=Vr?Vr.iterator:Ye,Yr=Vr?Vr.toStringTag:Ye,po=(function(){try{var mt=ti(ws,"defineProperty");return mt({},"",{}),mt}catch{}})(),Pd=$n.clearTimeout!==js.clearTimeout&&$n.clearTimeout,Bd=Gn&&Gn.now!==js.Date.now&&Gn.now,Ld=$n.setTimeout!==js.setTimeout&&$n.setTimeout,fo=Ps.ceil,mo=Ps.floor,xa=ws.getOwnPropertySymbols,jd=co?co.isBuffer:Ye,Kc=$n.isFinite,zd=ro.join,Vd=Vc(ws.keys,ws),Bs=Ps.max,Us=Ps.min,Ud=Gn.now,Gd=$n.parseInt,Yc=Ps.random,qd=ro.reverse,va=ti($n,"DataView"),Di=ti($n,"Map"),Aa=ti($n,"Promise"),fi=ti($n,"Set"),Oi=ti($n,"WeakMap"),Fi=ti(ws,"create"),go=Oi&&new Oi,mi={},Wd=ni(va),Hd=ni(Di),Qd=ni(Aa),Kd=ni(fi),Yd=ni(Oi),xo=Vr?Vr.prototype:Ye,Mi=xo?xo.valueOf:Ye,Xc=xo?xo.toString:Ye;function Kt(mt){if(Ns(mt)&&!ss(mt)&&!(mt instanceof ps)){if(mt instanceof dr)return mt;if(bs.call(mt,"__wrapped__"))return eu(mt)}return new dr(mt)}var gi=(function(){function mt(){}return function(bt){if(!ks(bt))return{};if(Wc)return Wc(bt);mt.prototype=bt;var It=new mt;return mt.prototype=Ye,It}})();function vo(){}function dr(mt,bt){this.__wrapped__=mt,this.__actions__=[],this.__chain__=!!bt,this.__index__=0,this.__values__=Ye}Kt.templateSettings={escape:Ss,evaluate:Es,interpolate:Is,variable:"",imports:{_:Kt}},Kt.prototype=vo.prototype,Kt.prototype.constructor=Kt,dr.prototype=gi(vo.prototype),dr.prototype.constructor=dr;function ps(mt){this.__wrapped__=mt,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Jt,this.__views__=[]}function Xd(){var mt=new ps(this.__wrapped__);return mt.__actions__=Ys(this.__actions__),mt.__dir__=this.__dir__,mt.__filtered__=this.__filtered__,mt.__iteratees__=Ys(this.__iteratees__),mt.__takeCount__=this.__takeCount__,mt.__views__=Ys(this.__views__),mt}function Jd(){if(this.__filtered__){var mt=new ps(this);mt.__dir__=-1,mt.__filtered__=!0}else mt=this.clone(),mt.__dir__*=-1;return mt}function Zd(){var mt=this.__wrapped__.value(),bt=this.__dir__,It=ss(mt),Mt=bt<0,qt=It?mt.length:0,Xt=fp(0,qt,this.__views__),rn=Xt.start,un=Xt.end,yn=un-rn,Dn=Mt?un:rn-1,On=this.__iteratees__,Bn=On.length,Vn=0,Qn=Us(yn,this.__takeCount__);if(!It||!Mt&&qt==yn&&Qn==yn)return El(mt,this.__actions__);var Jn=[];e:for(;yn--&&Vn<Qn;){Dn+=bt;for(var os=-1,Zn=mt[Dn];++os<Bn;){var ds=On[os],ms=ds.iteratee,ir=ds.type,Ks=ms(Zn);if(ir==Vt)Zn=Ks;else if(!Ks){if(ir==Dt)continue e;break e}}Jn[Vn++]=Zn}return Jn}ps.prototype=gi(vo.prototype),ps.prototype.constructor=ps;function Xr(mt){var bt=-1,It=mt==null?0:mt.length;for(this.clear();++bt<It;){var Mt=mt[bt];this.set(Mt[0],Mt[1])}}function eh(){this.__data__=Fi?Fi(null):{},this.size=0}function th(mt){var bt=this.has(mt)&&delete this.__data__[mt];return this.size-=bt?1:0,bt}function nh(mt){var bt=this.__data__;if(Fi){var It=bt[mt];return It===ot?Ye:It}return bs.call(bt,mt)?bt[mt]:Ye}function sh(mt){var bt=this.__data__;return Fi?bt[mt]!==Ye:bs.call(bt,mt)}function rh(mt,bt){var It=this.__data__;return this.size+=this.has(mt)?0:1,It[mt]=Fi&&bt===Ye?ot:bt,this}Xr.prototype.clear=eh,Xr.prototype.delete=th,Xr.prototype.get=nh,Xr.prototype.has=sh,Xr.prototype.set=rh;function Tr(mt){var bt=-1,It=mt==null?0:mt.length;for(this.clear();++bt<It;){var Mt=mt[bt];this.set(Mt[0],Mt[1])}}function ih(){this.__data__=[],this.size=0}function oh(mt){var bt=this.__data__,It=Ao(bt,mt);if(It<0)return!1;var Mt=bt.length-1;return It==Mt?bt.pop():ho.call(bt,It,1),--this.size,!0}function ah(mt){var bt=this.__data__,It=Ao(bt,mt);return It<0?Ye:bt[It][1]}function ch(mt){return Ao(this.__data__,mt)>-1}function lh(mt,bt){var It=this.__data__,Mt=Ao(It,mt);return Mt<0?(++this.size,It.push([mt,bt])):It[Mt][1]=bt,this}Tr.prototype.clear=ih,Tr.prototype.delete=oh,Tr.prototype.get=ah,Tr.prototype.has=ch,Tr.prototype.set=lh;function Ir(mt){var bt=-1,It=mt==null?0:mt.length;for(this.clear();++bt<It;){var Mt=mt[bt];this.set(Mt[0],Mt[1])}}function uh(){this.size=0,this.__data__={hash:new Xr,map:new(Di||Tr),string:new Xr}}function dh(mt){var bt=No(this,mt).delete(mt);return this.size-=bt?1:0,bt}function hh(mt){return No(this,mt).get(mt)}function ph(mt){return No(this,mt).has(mt)}function fh(mt,bt){var It=No(this,mt),Mt=It.size;return It.set(mt,bt),this.size+=It.size==Mt?0:1,this}Ir.prototype.clear=uh,Ir.prototype.delete=dh,Ir.prototype.get=hh,Ir.prototype.has=ph,Ir.prototype.set=fh;function Jr(mt){var bt=-1,It=mt==null?0:mt.length;for(this.__data__=new Ir;++bt<It;)this.add(mt[bt])}function mh(mt){return this.__data__.set(mt,ot),this}function gh(mt){return this.__data__.has(mt)}Jr.prototype.add=Jr.prototype.push=mh,Jr.prototype.has=gh;function vr(mt){var bt=this.__data__=new Tr(mt);this.size=bt.size}function xh(){this.__data__=new Tr,this.size=0}function vh(mt){var bt=this.__data__,It=bt.delete(mt);return this.size=bt.size,It}function Ah(mt){return this.__data__.get(mt)}function yh(mt){return this.__data__.has(mt)}function bh(mt,bt){var It=this.__data__;if(It instanceof Tr){var Mt=It.__data__;if(!Di||Mt.length<tt-1)return Mt.push([mt,bt]),this.size=++It.size,this;It=this.__data__=new Ir(Mt)}return It.set(mt,bt),this.size=It.size,this}vr.prototype.clear=xh,vr.prototype.delete=vh,vr.prototype.get=Ah,vr.prototype.has=yh,vr.prototype.set=bh;function Jc(mt,bt){var It=ss(mt),Mt=!It&&si(mt),qt=!It&&!Mt&&Qr(mt),Xt=!It&&!Mt&&!qt&&yi(mt),rn=It||Mt||qt||Xt,un=rn?pa(mt.length,kd):[],yn=un.length;for(var Dn in mt)(bt||bs.call(mt,Dn))&&!(rn&&(Dn=="length"||qt&&(Dn=="offset"||Dn=="parent")||Xt&&(Dn=="buffer"||Dn=="byteLength"||Dn=="byteOffset")||Dr(Dn,yn)))&&un.push(Dn);return un}function Zc(mt){var bt=mt.length;return bt?mt[ka(0,bt-1)]:Ye}function Eh(mt,bt){return Do(Ys(mt),Zr(bt,0,mt.length))}function wh(mt){return Do(Ys(mt))}function ya(mt,bt,It){(It!==Ye&&!Ar(mt[bt],It)||It===Ye&&!(bt in mt))&&$r(mt,bt,It)}function Bi(mt,bt,It){var Mt=mt[bt];(!(bs.call(mt,bt)&&Ar(Mt,It))||It===Ye&&!(bt in mt))&&$r(mt,bt,It)}function Ao(mt,bt){for(var It=mt.length;It--;)if(Ar(mt[It][0],bt))return It;return-1}function Ch(mt,bt,It,Mt){return Ur(mt,function(qt,Xt,rn){bt(Mt,qt,It(qt),rn)}),Mt}function el(mt,bt){return mt&&Cr(bt,Ls(bt),mt)}function Sh(mt,bt){return mt&&Cr(bt,Js(bt),mt)}function $r(mt,bt,It){bt=="__proto__"&&po?po(mt,bt,{configurable:!0,enumerable:!0,value:It,writable:!0}):mt[bt]=It}function ba(mt,bt){for(var It=-1,Mt=bt.length,qt=Cn(Mt),Xt=mt==null;++It<Mt;)qt[It]=Xt?Ye:sc(mt,bt[It]);return qt}function Zr(mt,bt,It){return mt===mt&&(It!==Ye&&(mt=mt<=It?mt:It),bt!==Ye&&(mt=mt>=bt?mt:bt)),mt}function hr(mt,bt,It,Mt,qt,Xt){var rn,un=bt&ut,yn=bt&ht,Dn=bt&pt;if(It&&(rn=qt?It(mt,Mt,qt,Xt):It(mt)),rn!==Ye)return rn;if(!ks(mt))return mt;var On=ss(mt);if(On){if(rn=gp(mt),!un)return Ys(mt,rn)}else{var Bn=Gs(mt),Vn=Bn==gn||Bn==_n;if(Qr(mt))return Sl(mt,un);if(Bn==hn||Bn==an||Vn&&!qt){if(rn=yn||Vn?{}:ql(mt),!un)return yn?rp(mt,Sh(rn,mt)):sp(mt,el(rn,mt))}else{if(!Cs[Bn])return qt?mt:{};rn=xp(mt,Bn,un)}}Xt||(Xt=new vr);var Qn=Xt.get(mt);if(Qn)return Qn;Xt.set(mt,rn),yu(mt)?mt.forEach(function(Zn){rn.add(hr(Zn,bt,It,Zn,mt,Xt))}):vu(mt)&&mt.forEach(function(Zn,ds){rn.set(ds,hr(Zn,bt,It,ds,mt,Xt))});var Jn=Dn?yn?Va:za:yn?Js:Ls,os=On?Ye:Jn(mt);return lr(os||mt,function(Zn,ds){os&&(ds=Zn,Zn=mt[ds]),Bi(rn,ds,hr(Zn,bt,It,ds,mt,Xt))}),rn}function Th(mt){var bt=Ls(mt);return function(It){return tl(It,mt,bt)}}function tl(mt,bt,It){var Mt=It.length;if(mt==null)return!Mt;for(mt=ws(mt);Mt--;){var qt=It[Mt],Xt=bt[qt],rn=mt[qt];if(rn===Ye&&!(qt in mt)||!Xt(rn))return!1}return!0}function nl(mt,bt,It){if(typeof mt!="function")throw new ur(rt);return qi(function(){mt.apply(Ye,It)},bt)}function Li(mt,bt,It,Mt){var qt=-1,Xt=to,rn=!0,un=mt.length,yn=[],Dn=bt.length;if(!un)return yn;It&&(bt=Rs(bt,tr(It))),Mt?(Xt=aa,rn=!1):bt.length>=tt&&(Xt=ki,rn=!1,bt=new Jr(bt));e:for(;++qt<un;){var On=mt[qt],Bn=It==null?On:It(On);if(On=Mt||On!==0?On:0,rn&&Bn===Bn){for(var Vn=Dn;Vn--;)if(bt[Vn]===Bn)continue e;yn.push(On)}else Xt(bt,Bn,Mt)||yn.push(On)}return yn}var Ur=kl(wr),sl=kl(wa,!0);function Ih(mt,bt){var It=!0;return Ur(mt,function(Mt,qt,Xt){return It=!!bt(Mt,qt,Xt),It}),It}function yo(mt,bt,It){for(var Mt=-1,qt=mt.length;++Mt<qt;){var Xt=mt[Mt],rn=bt(Xt);if(rn!=null&&(un===Ye?rn===rn&&!rr(rn):It(rn,un)))var un=rn,yn=Xt}return yn}function $h(mt,bt,It,Mt){var qt=mt.length;for(It=is(It),It<0&&(It=-It>qt?0:qt+It),Mt=Mt===Ye||Mt>qt?qt:is(Mt),Mt<0&&(Mt+=qt),Mt=It>Mt?0:Eu(Mt);It<Mt;)mt[It++]=bt;return mt}function rl(mt,bt){var It=[];return Ur(mt,function(Mt,qt,Xt){bt(Mt,qt,Xt)&&It.push(Mt)}),It}function zs(mt,bt,It,Mt,qt){var Xt=-1,rn=mt.length;for(It||(It=Ap),qt||(qt=[]);++Xt<rn;){var un=mt[Xt];bt>0&&It(un)?bt>1?zs(un,bt-1,It,Mt,qt):jr(qt,un):Mt||(qt[qt.length]=un)}return qt}var Ea=Nl(),il=Nl(!0);function wr(mt,bt){return mt&&Ea(mt,bt,Ls)}function wa(mt,bt){return mt&&il(mt,bt,Ls)}function bo(mt,bt){return Lr(bt,function(It){return Or(mt[It])})}function ei(mt,bt){bt=Wr(bt,mt);for(var It=0,Mt=bt.length;mt!=null&&It<Mt;)mt=mt[_r(bt[It++])];return It&&It==Mt?mt:Ye}function ol(mt,bt,It){var Mt=bt(mt);return ss(mt)?Mt:jr(Mt,It(mt))}function Hs(mt){return mt==null?mt===Ye?Un:sn:Yr&&Yr in ws(mt)?pp(mt):Sp(mt)}function Ca(mt,bt){return mt>bt}function Rh(mt,bt){return mt!=null&&bs.call(mt,bt)}function kh(mt,bt){return mt!=null&&bt in ws(mt)}function Nh(mt,bt,It){return mt>=Us(bt,It)&&mt<Bs(bt,It)}function Sa(mt,bt,It){for(var Mt=It?aa:to,qt=mt[0].length,Xt=mt.length,rn=Xt,un=Cn(Xt),yn=1/0,Dn=[];rn--;){var On=mt[rn];rn&&bt&&(On=Rs(On,tr(bt))),yn=Us(On.length,yn),un[rn]=!It&&(bt||qt>=120&&On.length>=120)?new Jr(rn&&On):Ye}On=mt[0];var Bn=-1,Vn=un[0];e:for(;++Bn<qt&&Dn.length<yn;){var Qn=On[Bn],Jn=bt?bt(Qn):Qn;if(Qn=It||Qn!==0?Qn:0,!(Vn?ki(Vn,Jn):Mt(Dn,Jn,It))){for(rn=Xt;--rn;){var os=un[rn];if(!(os?ki(os,Jn):Mt(mt[rn],Jn,It)))continue e}Vn&&Vn.push(Jn),Dn.push(Qn)}}return Dn}function Dh(mt,bt,It,Mt){return wr(mt,function(qt,Xt,rn){bt(Mt,It(qt),Xt,rn)}),Mt}function ji(mt,bt,It){bt=Wr(bt,mt),mt=Kl(mt,bt);var Mt=mt==null?mt:mt[_r(mr(bt))];return Mt==null?Ye:er(Mt,mt,It)}function al(mt){return Ns(mt)&&Hs(mt)==an}function Oh(mt){return Ns(mt)&&Hs(mt)==zn}function Fh(mt){return Ns(mt)&&Hs(mt)==Sn}function zi(mt,bt,It,Mt,qt){return mt===bt?!0:mt==null||bt==null||!Ns(mt)&&!Ns(bt)?mt!==mt&&bt!==bt:Mh(mt,bt,It,Mt,zi,qt)}function Mh(mt,bt,It,Mt,qt,Xt){var rn=ss(mt),un=ss(bt),yn=rn?mn:Gs(mt),Dn=un?mn:Gs(bt);yn=yn==an?hn:yn,Dn=Dn==an?hn:Dn;var On=yn==hn,Bn=Dn==hn,Vn=yn==Dn;if(Vn&&Qr(mt)){if(!Qr(bt))return!1;rn=!0,On=!1}if(Vn&&!On)return Xt||(Xt=new vr),rn||yi(mt)?Vl(mt,bt,It,Mt,qt,Xt):dp(mt,bt,yn,It,Mt,qt,Xt);if(!(It&ft)){var Qn=On&&bs.call(mt,"__wrapped__"),Jn=Bn&&bs.call(bt,"__wrapped__");if(Qn||Jn){var os=Qn?mt.value():mt,Zn=Jn?bt.value():bt;return Xt||(Xt=new vr),qt(os,Zn,It,Mt,Xt)}}return Vn?(Xt||(Xt=new vr),hp(mt,bt,It,Mt,qt,Xt)):!1}function Ph(mt){return Ns(mt)&&Gs(mt)==kn}function Ta(mt,bt,It,Mt){var qt=It.length,Xt=qt,rn=!Mt;if(mt==null)return!Xt;for(mt=ws(mt);qt--;){var un=It[qt];if(rn&&un[2]?un[1]!==mt[un[0]]:!(un[0]in mt))return!1}for(;++qt<Xt;){un=It[qt];var yn=un[0],Dn=mt[yn],On=un[1];if(rn&&un[2]){if(Dn===Ye&&!(yn in mt))return!1}else{var Bn=new vr;if(Mt)var Vn=Mt(Dn,On,yn,mt,bt,Bn);if(!(Vn===Ye?zi(On,Dn,ft|xt,Mt,Bn):Vn))return!1}}return!0}function cl(mt){if(!ks(mt)||bp(mt))return!1;var bt=Or(mt)?Md:Qo;return bt.test(ni(mt))}function Bh(mt){return Ns(mt)&&Hs(mt)==wn}function Lh(mt){return Ns(mt)&&Gs(mt)==Fn}function jh(mt){return Ns(mt)&&Lo(mt.length)&&!!Ts[Hs(mt)]}function ll(mt){return typeof mt=="function"?mt:mt==null?Zs:typeof mt=="object"?ss(mt)?hl(mt[0],mt[1]):dl(mt):Du(mt)}function Ia(mt){if(!Gi(mt))return Vd(mt);var bt=[];for(var It in ws(mt))bs.call(mt,It)&&It!="constructor"&&bt.push(It);return bt}function Vh(mt){if(!ks(mt))return _p(mt);var bt=Gi(mt),It=[];for(var Mt in mt)Mt=="constructor"&&(bt||!bs.call(mt,Mt))||It.push(Mt);return It}function $a(mt,bt){return mt<bt}function ul(mt,bt){var It=-1,Mt=Xs(mt)?Cn(mt.length):[];return Ur(mt,function(qt,Xt,rn){Mt[++It]=bt(qt,Xt,rn)}),Mt}function dl(mt){var bt=Ga(mt);return bt.length==1&&bt[0][2]?Hl(bt[0][0],bt[0][1]):function(It){return It===mt||Ta(It,mt,bt)}}function hl(mt,bt){return Wa(mt)&&Wl(bt)?Hl(_r(mt),bt):function(It){var Mt=sc(It,mt);return Mt===Ye&&Mt===bt?rc(It,mt):zi(bt,Mt,ft|xt)}}function Eo(mt,bt,It,Mt,qt){mt!==bt&&Ea(bt,function(Xt,rn){if(qt||(qt=new vr),ks(Xt))Uh(mt,bt,rn,It,Eo,Mt,qt);else{var un=Mt?Mt(Qa(mt,rn),Xt,rn+"",mt,bt,qt):Ye;un===Ye&&(un=Xt),ya(mt,rn,un)}},Js)}function Uh(mt,bt,It,Mt,qt,Xt,rn){var un=Qa(mt,It),yn=Qa(bt,It),Dn=rn.get(yn);if(Dn){ya(mt,It,Dn);return}var On=Xt?Xt(un,yn,It+"",mt,bt,rn):Ye,Bn=On===Ye;if(Bn){var Vn=ss(yn),Qn=!Vn&&Qr(yn),Jn=!Vn&&!Qn&&yi(yn);On=yn,Vn||Qn||Jn?ss(un)?On=un:Os(un)?On=Ys(un):Qn?(Bn=!1,On=Sl(yn,!0)):Jn?(Bn=!1,On=Tl(yn,!0)):On=[]:Wi(yn)||si(yn)?(On=un,si(un)?On=wu(un):(!ks(un)||Or(un))&&(On=ql(yn))):Bn=!1}Bn&&(rn.set(yn,On),qt(On,yn,Mt,Xt,rn),rn.delete(yn)),ya(mt,It,On)}function pl(mt,bt){var It=mt.length;if(It)return bt+=bt<0?It:0,Dr(bt,It)?mt[bt]:Ye}function ml(mt,bt,It){bt.length?bt=Rs(bt,function(Xt){return ss(Xt)?function(rn){return ei(rn,Xt.length===1?Xt[0]:Xt)}:Xt}):bt=[Zs];var Mt=-1;bt=Rs(bt,tr(Xn()));var qt=ul(mt,function(Xt,rn,un){var yn=Rs(bt,function(Dn){return Dn(Xt)});return{criteria:yn,index:++Mt,value:Xt}});return hd(qt,function(Xt,rn){return np(Xt,rn,It)})}function Gh(mt,bt){return gl(mt,bt,function(It,Mt){return rc(mt,Mt)})}function gl(mt,bt,It){for(var Mt=-1,qt=bt.length,Xt={};++Mt<qt;){var rn=bt[Mt],un=ei(mt,rn);It(un,rn)&&Vi(Xt,Wr(rn,mt),un)}return Xt}function qh(mt){return function(bt){return ei(bt,mt)}}function Ra(mt,bt,It,Mt){var qt=Mt?dd:li,Xt=-1,rn=bt.length,un=mt;for(mt===bt&&(bt=Ys(bt)),It&&(un=Rs(mt,tr(It)));++Xt<rn;)for(var yn=0,Dn=bt[Xt],On=It?It(Dn):Dn;(yn=qt(un,On,yn,Mt))>-1;)un!==mt&&ho.call(un,yn,1),ho.call(mt,yn,1);return mt}function xl(mt,bt){for(var It=mt?bt.length:0,Mt=It-1;It--;){var qt=bt[It];if(It==Mt||qt!==Xt){var Xt=qt;Dr(qt)?ho.call(mt,qt,1):Oa(mt,qt)}}return mt}function ka(mt,bt){return mt+mo(Yc()*(bt-mt+1))}function Wh(mt,bt,It,Mt){for(var qt=-1,Xt=Bs(fo((bt-mt)/(It||1)),0),rn=Cn(Xt);Xt--;)rn[Mt?Xt:++qt]=mt,mt+=It;return rn}function Na(mt,bt){var It="";if(!mt||bt<1||bt>jt)return It;do bt%2&&(It+=mt),bt=mo(bt/2),bt&&(mt+=mt);while(bt);return It}function cs(mt,bt){return Ka(Ql(mt,bt,Zs),mt+"")}function Hh(mt){return Zc(bi(mt))}function Qh(mt,bt){var It=bi(mt);return Do(It,Zr(bt,0,It.length))}function Vi(mt,bt,It,Mt){if(!ks(mt))return mt;bt=Wr(bt,mt);for(var qt=-1,Xt=bt.length,rn=Xt-1,un=mt;un!=null&&++qt<Xt;){var yn=_r(bt[qt]),Dn=It;if(yn==="__proto__"||yn==="constructor"||yn==="prototype")return mt;if(qt!=rn){var On=un[yn];Dn=Mt?Mt(On,yn,un):Ye,Dn===Ye&&(Dn=ks(On)?On:Dr(bt[qt+1])?[]:{})}Bi(un,yn,Dn),un=un[yn]}return mt}var vl=go?function(mt,bt){return go.set(mt,bt),mt}:Zs,Kh=po?function(mt,bt){return po(mt,"toString",{configurable:!0,enumerable:!1,value:oc(bt),writable:!0})}:Zs;function Yh(mt){return Do(bi(mt))}function fr(mt,bt,It){var Mt=-1,qt=mt.length;bt<0&&(bt=-bt>qt?0:qt+bt),It=It>qt?qt:It,It<0&&(It+=qt),qt=bt>It?0:It-bt>>>0,bt>>>=0;for(var Xt=Cn(qt);++Mt<qt;)Xt[Mt]=mt[Mt+bt];return Xt}function Xh(mt,bt){var It;return Ur(mt,function(Mt,qt,Xt){return It=bt(Mt,qt,Xt),!It}),!!It}function wo(mt,bt,It){var Mt=0,qt=mt==null?Mt:mt.length;if(typeof bt=="number"&&bt===bt&&qt<=nn){for(;Mt<qt;){var Xt=Mt+qt>>>1,rn=mt[Xt];rn!==null&&!rr(rn)&&(It?rn<=bt:rn<bt)?Mt=Xt+1:qt=Xt}return qt}return Da(mt,bt,Zs,It)}function Da(mt,bt,It,Mt){var qt=0,Xt=mt==null?0:mt.length;if(Xt===0)return 0;bt=It(bt);for(var rn=bt!==bt,un=bt===null,yn=rr(bt),Dn=bt===Ye;qt<Xt;){var On=mo((qt+Xt)/2),Bn=It(mt[On]),Vn=Bn!==Ye,Qn=Bn===null,Jn=Bn===Bn,os=rr(Bn);if(rn)var Zn=Mt||Jn;else Dn?Zn=Jn&&(Mt||Vn):un?Zn=Jn&&Vn&&(Mt||!Qn):yn?Zn=Jn&&Vn&&!Qn&&(Mt||!os):Qn||os?Zn=!1:Zn=Mt?Bn<=bt:Bn<bt;Zn?qt=On+1:Xt=On}return Us(Xt,Zt)}function Al(mt,bt){for(var It=-1,Mt=mt.length,qt=0,Xt=[];++It<Mt;){var rn=mt[It],un=bt?bt(rn):rn;if(!It||!Ar(un,yn)){var yn=un;Xt[qt++]=rn===0?0:rn}}return Xt}function yl(mt){return typeof mt=="number"?mt:rr(mt)?Yt:+mt}function nr(mt){if(typeof mt=="string")return mt;if(ss(mt))return Rs(mt,nr)+"";if(rr(mt))return Xc?Xc.call(mt):"";var bt=mt+"";return bt=="0"&&1/mt==-Qt?"-0":bt}function Gr(mt,bt,It){var Mt=-1,qt=to,Xt=mt.length,rn=!0,un=[],yn=un;if(It)rn=!1,qt=aa;else if(Xt>=tt){var Dn=bt?null:lp(mt);if(Dn)return so(Dn);rn=!1,qt=ki,yn=new Jr}else yn=bt?[]:un;e:for(;++Mt<Xt;){var On=mt[Mt],Bn=bt?bt(On):On;if(On=It||On!==0?On:0,rn&&Bn===Bn){for(var Vn=yn.length;Vn--;)if(yn[Vn]===Bn)continue e;bt&&yn.push(Bn),un.push(On)}else qt(yn,Bn,It)||(yn!==un&&yn.push(Bn),un.push(On))}return un}function Oa(mt,bt){return bt=Wr(bt,mt),mt=Kl(mt,bt),mt==null||delete mt[_r(mr(bt))]}function bl(mt,bt,It,Mt){return Vi(mt,bt,It(ei(mt,bt)),Mt)}function Co(mt,bt,It,Mt){for(var qt=mt.length,Xt=Mt?qt:-1;(Mt?Xt--:++Xt<qt)&&bt(mt[Xt],Xt,mt););return It?fr(mt,Mt?0:Xt,Mt?Xt+1:qt):fr(mt,Mt?Xt+1:0,Mt?qt:Xt)}function El(mt,bt){var It=mt;return It instanceof ps&&(It=It.value()),ca(bt,function(Mt,qt){return qt.func.apply(qt.thisArg,jr([Mt],qt.args))},It)}function Fa(mt,bt,It){var Mt=mt.length;if(Mt<2)return Mt?Gr(mt[0]):[];for(var qt=-1,Xt=Cn(Mt);++qt<Mt;)for(var rn=mt[qt],un=-1;++un<Mt;)un!=qt&&(Xt[qt]=Li(Xt[qt]||rn,mt[un],bt,It));return Gr(zs(Xt,1),bt,It)}function wl(mt,bt,It){for(var Mt=-1,qt=mt.length,Xt=bt.length,rn={};++Mt<qt;){var un=Mt<Xt?bt[Mt]:Ye;It(rn,mt[Mt],un)}return rn}function Ma(mt){return Os(mt)?mt:[]}function Pa(mt){return typeof mt=="function"?mt:Zs}function Wr(mt,bt){return ss(mt)?mt:Wa(mt,bt)?[mt]:Zl(ys(mt))}var Jh=cs;function Hr(mt,bt,It){var Mt=mt.length;return It=It===Ye?Mt:It,!bt&&It>=Mt?mt:fr(mt,bt,It)}var Cl=Pd||function(mt){return js.clearTimeout(mt)};function Sl(mt,bt){if(bt)return mt.slice();var It=mt.length,Mt=qc?qc(It):new mt.constructor(It);return mt.copy(Mt),Mt}function Ba(mt){var bt=new mt.constructor(mt.byteLength);return new lo(bt).set(new lo(mt)),bt}function Zh(mt,bt){var It=bt?Ba(mt.buffer):mt.buffer;return new mt.constructor(It,mt.byteOffset,mt.byteLength)}function ep(mt){var bt=new mt.constructor(mt.source,Qi.exec(mt));return bt.lastIndex=mt.lastIndex,bt}function tp(mt){return Mi?ws(Mi.call(mt)):{}}function Tl(mt,bt){var It=bt?Ba(mt.buffer):mt.buffer;return new mt.constructor(It,mt.byteOffset,mt.length)}function Il(mt,bt){if(mt!==bt){var It=mt!==Ye,Mt=mt===null,qt=mt===mt,Xt=rr(mt),rn=bt!==Ye,un=bt===null,yn=bt===bt,Dn=rr(bt);if(!un&&!Dn&&!Xt&&mt>bt||Xt&&rn&&yn&&!un&&!Dn||Mt&&rn&&yn||!It&&yn||!qt)return 1;if(!Mt&&!Xt&&!Dn&&mt<bt||Dn&&It&&qt&&!Mt&&!Xt||un&&It&&qt||!rn&&qt||!yn)return-1}return 0}function np(mt,bt,It){for(var Mt=-1,qt=mt.criteria,Xt=bt.criteria,rn=qt.length,un=It.length;++Mt<rn;){var yn=Il(qt[Mt],Xt[Mt]);if(yn){if(Mt>=un)return yn;var Dn=It[Mt];return yn*(Dn=="desc"?-1:1)}}return mt.index-bt.index}function $l(mt,bt,It,Mt){for(var qt=-1,Xt=mt.length,rn=It.length,un=-1,yn=bt.length,Dn=Bs(Xt-rn,0),On=Cn(yn+Dn),Bn=!Mt;++un<yn;)On[un]=bt[un];for(;++qt<rn;)(Bn||qt<Xt)&&(On[It[qt]]=mt[qt]);for(;Dn--;)On[un++]=mt[qt++];return On}function Rl(mt,bt,It,Mt){for(var qt=-1,Xt=mt.length,rn=-1,un=It.length,yn=-1,Dn=bt.length,On=Bs(Xt-un,0),Bn=Cn(On+Dn),Vn=!Mt;++qt<On;)Bn[qt]=mt[qt];for(var Qn=qt;++yn<Dn;)Bn[Qn+yn]=bt[yn];for(;++rn<un;)(Vn||qt<Xt)&&(Bn[Qn+It[rn]]=mt[qt++]);return Bn}function Ys(mt,bt){var It=-1,Mt=mt.length;for(bt||(bt=Cn(Mt));++It<Mt;)bt[It]=mt[It];return bt}function Cr(mt,bt,It,Mt){var qt=!It;It||(It={});for(var Xt=-1,rn=bt.length;++Xt<rn;){var un=bt[Xt],yn=Mt?Mt(It[un],mt[un],un,It,mt):Ye;yn===Ye&&(yn=mt[un]),qt?$r(It,un,yn):Bi(It,un,yn)}return It}function sp(mt,bt){return Cr(mt,qa(mt),bt)}function rp(mt,bt){return Cr(mt,Ul(mt),bt)}function So(mt,bt){return function(It,Mt){var qt=ss(It)?id:Ch,Xt=bt?bt():{};return qt(It,mt,Xn(Mt,2),Xt)}}function xi(mt){return cs(function(bt,It){var Mt=-1,qt=It.length,Xt=qt>1?It[qt-1]:Ye,rn=qt>2?It[2]:Ye;for(Xt=mt.length>3&&typeof Xt=="function"?(qt--,Xt):Ye,rn&&Qs(It[0],It[1],rn)&&(Xt=qt<3?Ye:Xt,qt=1),bt=ws(bt);++Mt<qt;){var un=It[Mt];un&&mt(bt,un,Mt,Xt)}return bt})}function kl(mt,bt){return function(It,Mt){if(It==null)return It;if(!Xs(It))return mt(It,Mt);for(var qt=It.length,Xt=bt?qt:-1,rn=ws(It);(bt?Xt--:++Xt<qt)&&Mt(rn[Xt],Xt,rn)!==!1;);return It}}function Nl(mt){return function(bt,It,Mt){for(var qt=-1,Xt=ws(bt),rn=Mt(bt),un=rn.length;un--;){var yn=rn[mt?un:++qt];if(It(Xt[yn],yn,Xt)===!1)break}return bt}}function ip(mt,bt,It){var Mt=bt&vt,qt=Ui(mt);function Xt(){var rn=this&&this!==js&&this instanceof Xt?qt:mt;return rn.apply(Mt?It:this,arguments)}return Xt}function Dl(mt){return function(bt){bt=ys(bt);var It=ui(bt)?xr(bt):Ye,Mt=It?It[0]:bt.charAt(0),qt=It?Hr(It,1).join(""):bt.slice(1);return Mt[mt]()+qt}}function vi(mt){return function(bt){return ca(ku(Ru(bt).replace(Gu,"")),mt,"")}}function Ui(mt){return function(){var bt=arguments;switch(bt.length){case 0:return new mt;case 1:return new mt(bt[0]);case 2:return new mt(bt[0],bt[1]);case 3:return new mt(bt[0],bt[1],bt[2]);case 4:return new mt(bt[0],bt[1],bt[2],bt[3]);case 5:return new mt(bt[0],bt[1],bt[2],bt[3],bt[4]);case 6:return new mt(bt[0],bt[1],bt[2],bt[3],bt[4],bt[5]);case 7:return new mt(bt[0],bt[1],bt[2],bt[3],bt[4],bt[5],bt[6])}var It=gi(mt.prototype),Mt=mt.apply(It,bt);return ks(Mt)?Mt:It}}function ap(mt,bt,It){var Mt=Ui(mt);function qt(){for(var Xt=arguments.length,rn=Cn(Xt),un=Xt,yn=Ai(qt);un--;)rn[un]=arguments[un];var Dn=Xt<3&&rn[0]!==yn&&rn[Xt-1]!==yn?[]:zr(rn,yn);if(Xt-=Dn.length,Xt<It)return Bl(mt,bt,To,qt.placeholder,Ye,rn,Dn,Ye,Ye,It-Xt);var On=this&&this!==js&&this instanceof qt?Mt:mt;return er(On,this,rn)}return qt}function Ol(mt){return function(bt,It,Mt){var qt=ws(bt);if(!Xs(bt)){var Xt=Xn(It,3);bt=Ls(bt),It=function(un){return Xt(qt[un],un,qt)}}var rn=mt(bt,It,Mt);return rn>-1?qt[Xt?bt[rn]:rn]:Ye}}function Fl(mt){return Nr(function(bt){var It=bt.length,Mt=It,qt=dr.prototype.thru;for(mt&&bt.reverse();Mt--;){var Xt=bt[Mt];if(typeof Xt!="function")throw new ur(rt);if(qt&&!rn&&ko(Xt)=="wrapper")var rn=new dr([],!0)}for(Mt=rn?Mt:It;++Mt<It;){Xt=bt[Mt];var un=ko(Xt),yn=un=="wrapper"?Ua(Xt):Ye;yn&&Ha(yn[0])&&yn[1]==(St|wt|Ct|Rt)&&!yn[4].length&&yn[9]==1?rn=rn[ko(yn[0])].apply(rn,yn[3]):rn=Xt.length==1&&Ha(Xt)?rn[un]():rn.thru(Xt)}return function(){var Dn=arguments,On=Dn[0];if(rn&&Dn.length==1&&ss(On))return rn.plant(On).value();for(var Bn=0,Vn=It?bt[Bn].apply(this,Dn):On;++Bn<It;)Vn=bt[Bn].call(this,Vn);return Vn}})}function To(mt,bt,It,Mt,qt,Xt,rn,un,yn,Dn){var On=bt&St,Bn=bt&vt,Vn=bt&At,Qn=bt&(wt|_t),Jn=bt&Nt,os=Vn?Ye:Ui(mt);function Zn(){for(var ds=arguments.length,ms=Cn(ds),ir=ds;ir--;)ms[ir]=arguments[ir];if(Qn)var Ks=Ai(Zn),or=md(ms,Ks);if(Mt&&(ms=$l(ms,Mt,qt,Qn)),Xt&&(ms=Rl(ms,Xt,rn,Qn)),ds-=or,Qn&&ds<Dn){var Fs=zr(ms,Ks);return Bl(mt,bt,To,Zn.placeholder,It,ms,Fs,un,yn,Dn-ds)}var br=Bn?It:this,Mr=Vn?br[mt]:mt;return ds=ms.length,un?ms=Tp(ms,un):Jn&&ds>1&&ms.reverse(),On&&yn<ds&&(ms.length=yn),this&&this!==js&&this instanceof Zn&&(Mr=os||Ui(Mr)),Mr.apply(br,ms)}return Zn}function Ml(mt,bt){return function(It,Mt){return Dh(It,mt,bt(Mt),{})}}function Io(mt,bt){return function(It,Mt){var qt;if(It===Ye&&Mt===Ye)return bt;if(It!==Ye&&(qt=It),Mt!==Ye){if(qt===Ye)return Mt;typeof It=="string"||typeof Mt=="string"?(It=nr(It),Mt=nr(Mt)):(It=yl(It),Mt=yl(Mt)),qt=mt(It,Mt)}return qt}}function La(mt){return Nr(function(bt){return bt=Rs(bt,tr(Xn())),cs(function(It){var Mt=this;return mt(bt,function(qt){return er(qt,Mt,It)})})})}function $o(mt,bt){bt=bt===Ye?" ":nr(bt);var It=bt.length;if(It<2)return It?Na(bt,mt):bt;var Mt=Na(bt,fo(mt/di(bt)));return ui(bt)?Hr(xr(Mt),0,mt).join(""):Mt.slice(0,mt)}function cp(mt,bt,It,Mt){var qt=bt&vt,Xt=Ui(mt);function rn(){for(var un=-1,yn=arguments.length,Dn=-1,On=Mt.length,Bn=Cn(On+yn),Vn=this&&this!==js&&this instanceof rn?Xt:mt;++Dn<On;)Bn[Dn]=Mt[Dn];for(;yn--;)Bn[Dn++]=arguments[++un];return er(Vn,qt?It:this,Bn)}return rn}function Pl(mt){return function(bt,It,Mt){return Mt&&typeof Mt!="number"&&Qs(bt,It,Mt)&&(It=Mt=Ye),bt=Fr(bt),It===Ye?(It=bt,bt=0):It=Fr(It),Mt=Mt===Ye?bt<It?1:-1:Fr(Mt),Wh(bt,It,Mt,mt)}}function Ro(mt){return function(bt,It){return typeof bt=="string"&&typeof It=="string"||(bt=gr(bt),It=gr(It)),mt(bt,It)}}function Bl(mt,bt,It,Mt,qt,Xt,rn,un,yn,Dn){var On=bt&wt,Bn=On?rn:Ye,Vn=On?Ye:rn,Qn=On?Xt:Ye,Jn=On?Ye:Xt;bt|=On?Ct:Tt,bt&=~(On?Tt:Ct),bt&Et||(bt&=-4);var os=[mt,bt,qt,Qn,Bn,Jn,Vn,un,yn,Dn],Zn=It.apply(Ye,os);return Ha(mt)&&Yl(Zn,os),Zn.placeholder=Mt,Xl(Zn,mt,bt)}function ja(mt){var bt=Ps[mt];return function(It,Mt){if(It=gr(It),Mt=Mt==null?0:Us(is(Mt),292),Mt&&Kc(It)){var qt=(ys(It)+"e").split("e"),Xt=bt(qt[0]+"e"+(+qt[1]+Mt));return qt=(ys(Xt)+"e").split("e"),+(qt[0]+"e"+(+qt[1]-Mt))}return bt(It)}}var lp=fi&&1/so(new fi([,-0]))[1]==Qt?function(mt){return new fi(mt)}:uc;function Ll(mt){return function(bt){var It=Gs(bt);return It==kn?ma(bt):It==Fn?Ed(bt):pd(bt,mt(bt))}}function kr(mt,bt,It,Mt,qt,Xt,rn,un){var yn=bt&At;if(!yn&&typeof mt!="function")throw new ur(rt);var Dn=Mt?Mt.length:0;if(Dn||(bt&=-97,Mt=qt=Ye),rn=rn===Ye?rn:Bs(is(rn),0),un=un===Ye?un:is(un),Dn-=qt?qt.length:0,bt&Tt){var On=Mt,Bn=qt;Mt=qt=Ye}var Vn=yn?Ye:Ua(mt),Qn=[mt,bt,It,Mt,qt,On,Bn,Xt,rn,un];if(Vn&&Cp(Qn,Vn),mt=Qn[0],bt=Qn[1],It=Qn[2],Mt=Qn[3],qt=Qn[4],un=Qn[9]=Qn[9]===Ye?yn?0:mt.length:Bs(Qn[9]-Dn,0),!un&&bt&(wt|_t)&&(bt&=-25),!bt||bt==vt)var Jn=ip(mt,bt,It);else bt==wt||bt==_t?Jn=ap(mt,bt,un):(bt==Ct||bt==(vt|Ct))&&!qt.length?Jn=cp(mt,bt,It,Mt):Jn=To.apply(Ye,Qn);var os=Vn?vl:Yl;return Xl(os(Jn,Qn),mt,bt)}function jl(mt,bt,It,Mt){return mt===Ye||Ar(mt,pi[It])&&!bs.call(Mt,It)?bt:mt}function zl(mt,bt,It,Mt,qt,Xt){return ks(mt)&&ks(bt)&&(Xt.set(bt,mt),Eo(mt,bt,Ye,zl,Xt),Xt.delete(bt)),mt}function up(mt){return Wi(mt)?Ye:mt}function Vl(mt,bt,It,Mt,qt,Xt){var rn=It&ft,un=mt.length,yn=bt.length;if(un!=yn&&!(rn&&yn>un))return!1;var Dn=Xt.get(mt),On=Xt.get(bt);if(Dn&&On)return Dn==bt&&On==mt;var Bn=-1,Vn=!0,Qn=It&xt?new Jr:Ye;for(Xt.set(mt,bt),Xt.set(bt,mt);++Bn<un;){var Jn=mt[Bn],os=bt[Bn];if(Mt)var Zn=rn?Mt(os,Jn,Bn,bt,mt,Xt):Mt(Jn,os,Bn,mt,bt,Xt);if(Zn!==Ye){if(Zn)continue;Vn=!1;break}if(Qn){if(!la(bt,function(ds,ms){if(!ki(Qn,ms)&&(Jn===ds||qt(Jn,ds,It,Mt,Xt)))return Qn.push(ms)})){Vn=!1;break}}else if(!(Jn===os||qt(Jn,os,It,Mt,Xt))){Vn=!1;break}}return Xt.delete(mt),Xt.delete(bt),Vn}function dp(mt,bt,It,Mt,qt,Xt,rn){switch(It){case es:if(mt.byteLength!=bt.byteLength||mt.byteOffset!=bt.byteOffset)return!1;mt=mt.buffer,bt=bt.buffer;case zn:return!(mt.byteLength!=bt.byteLength||!Xt(new lo(mt),new lo(bt)));case fn:case Sn:case Wt:return Ar(+mt,+bt);case Nn:return mt.name==bt.name&&mt.message==bt.message;case wn:case Hn:return mt==bt+"";case kn:var un=ma;case Fn:var yn=Mt&ft;if(un||(un=so),mt.size!=bt.size&&!yn)return!1;var Dn=rn.get(mt);if(Dn)return Dn==bt;Mt|=xt,rn.set(mt,bt);var On=Vl(un(mt),un(bt),Mt,qt,Xt,rn);return rn.delete(mt),On;case Yn:if(Mi)return Mi.call(mt)==Mi.call(bt)}return!1}function hp(mt,bt,It,Mt,qt,Xt){var rn=It&ft,un=za(mt),yn=un.length,Dn=za(bt),On=Dn.length;if(yn!=On&&!rn)return!1;for(var Bn=yn;Bn--;){var Vn=un[Bn];if(!(rn?Vn in bt:bs.call(bt,Vn)))return!1}var Qn=Xt.get(mt),Jn=Xt.get(bt);if(Qn&&Jn)return Qn==bt&&Jn==mt;var os=!0;Xt.set(mt,bt),Xt.set(bt,mt);for(var Zn=rn;++Bn<yn;){Vn=un[Bn];var ds=mt[Vn],ms=bt[Vn];if(Mt)var ir=rn?Mt(ms,ds,Vn,bt,mt,Xt):Mt(ds,ms,Vn,mt,bt,Xt);if(!(ir===Ye?ds===ms||qt(ds,ms,It,Mt,Xt):ir)){os=!1;break}Zn||(Zn=Vn=="constructor")}if(os&&!Zn){var Ks=mt.constructor,or=bt.constructor;Ks!=or&&"constructor"in mt&&"constructor"in bt&&!(typeof Ks=="function"&&Ks instanceof Ks&&typeof or=="function"&&or instanceof or)&&(os=!1)}return Xt.delete(mt),Xt.delete(bt),os}function Nr(mt){return Ka(Ql(mt,Ye,su),mt+"")}function za(mt){return ol(mt,Ls,qa)}function Va(mt){return ol(mt,Js,Ul)}var Ua=go?function(mt){return go.get(mt)}:uc;function ko(mt){for(var bt=mt.name+"",It=mi[bt],Mt=bs.call(mi,bt)?It.length:0;Mt--;){var qt=It[Mt],Xt=qt.func;if(Xt==null||Xt==mt)return qt.name}return bt}function Ai(mt){var bt=bs.call(Kt,"placeholder")?Kt:mt;return bt.placeholder}function Xn(){var mt=Kt.iteratee||ac;return mt=mt===ac?ll:mt,arguments.length?mt(arguments[0],arguments[1]):mt}function No(mt,bt){var It=mt.__data__;return yp(bt)?It[typeof bt=="string"?"string":"hash"]:It.map}function Ga(mt){for(var bt=Ls(mt),It=bt.length;It--;){var Mt=bt[It],qt=mt[Mt];bt[It]=[Mt,qt,Wl(qt)]}return bt}function ti(mt,bt){var It=Ad(mt,bt);return cl(It)?It:Ye}function pp(mt){var bt=bs.call(mt,Yr),It=mt[Yr];try{mt[Yr]=Ye;var Mt=!0}catch{}var qt=ao.call(mt);return Mt&&(bt?mt[Yr]=It:delete mt[Yr]),qt}var qa=xa?function(mt){return mt==null?[]:(mt=ws(mt),Lr(xa(mt),function(bt){return Hc.call(mt,bt)}))}:dc,Ul=xa?function(mt){for(var bt=[];mt;)jr(bt,qa(mt)),mt=uo(mt);return bt}:dc,Gs=Hs;(va&&Gs(new va(new ArrayBuffer(1)))!=es||Di&&Gs(new Di)!=kn||Aa&&Gs(Aa.resolve())!=En||fi&&Gs(new fi)!=Fn||Oi&&Gs(new Oi)!=Kn)&&(Gs=function(mt){var bt=Hs(mt),It=bt==hn?mt.constructor:Ye,Mt=It?ni(It):"";if(Mt)switch(Mt){case Wd:return es;case Hd:return kn;case Qd:return En;case Kd:return Fn;case Yd:return Kn}return bt});function fp(mt,bt,It){for(var Mt=-1,qt=It.length;++Mt<qt;){var Xt=It[Mt],rn=Xt.size;switch(Xt.type){case"drop":mt+=rn;break;case"dropRight":bt-=rn;break;case"take":bt=Us(bt,mt+rn);break;case"takeRight":mt=Bs(mt,bt-rn);break}}return{start:mt,end:bt}}function mp(mt){var bt=mt.match(ii);return bt?bt[1].split(Er):[]}function Gl(mt,bt,It){bt=Wr(bt,mt);for(var Mt=-1,qt=bt.length,Xt=!1;++Mt<qt;){var rn=_r(bt[Mt]);if(!(Xt=mt!=null&&It(mt,rn)))break;mt=mt[rn]}return Xt||++Mt!=qt?Xt:(qt=mt==null?0:mt.length,!!qt&&Lo(qt)&&Dr(rn,qt)&&(ss(mt)||si(mt)))}function gp(mt){var bt=mt.length,It=new mt.constructor(bt);return bt&&typeof mt[0]=="string"&&bs.call(mt,"index")&&(It.index=mt.index,It.input=mt.input),It}function ql(mt){return typeof mt.constructor=="function"&&!Gi(mt)?gi(uo(mt)):{}}function xp(mt,bt,It){var Mt=mt.constructor;switch(bt){case zn:return Ba(mt);case fn:case Sn:return new Mt(+mt);case es:return Zh(mt,It);case bn:case pn:case Ln:case Mn:case ls:case _s:case as:case In:case Pn:return Tl(mt,It);case kn:return new Mt;case Wt:case Hn:return new Mt(mt);case wn:return ep(mt);case Fn:return new Mt;case Yn:return tp(mt)}}function vp(mt,bt){var It=bt.length;if(!It)return mt;var Mt=It-1;return bt[Mt]=(It>1?"& ":"")+bt[Mt],bt=bt.join(It>2?", ":" "),mt.replace(Vo,`{
/* [wrapped with `+bt+`] */
`)}function Ap(mt){return ss(mt)||si(mt)||!!(Qc&&mt&&mt[Qc])}function Dr(mt,bt){var It=typeof mt;return bt=bt??jt,!!bt&&(It=="number"||It!="symbol"&&Yo.test(mt))&&mt>-1&&mt%1==0&&mt<bt}function Qs(mt,bt,It){if(!ks(It))return!1;var Mt=typeof bt;return(Mt=="number"?Xs(It)&&Dr(bt,It.length):Mt=="string"&&bt in It)?Ar(It[bt],mt):!1}function Wa(mt,bt){if(ss(mt))return!1;var It=typeof mt;return It=="number"||It=="symbol"||It=="boolean"||mt==null||rr(mt)?!0:Vs.test(mt)||!qs.test(mt)||bt!=null&&mt in ws(bt)}function yp(mt){var bt=typeof mt;return bt=="string"||bt=="number"||bt=="symbol"||bt=="boolean"?mt!=="__proto__":mt===null}function Ha(mt){var bt=ko(mt),It=Kt[bt];if(typeof It!="function"||!(bt in ps.prototype))return!1;if(mt===It)return!0;var Mt=Ua(It);return!!Mt&&mt===Mt[0]}function bp(mt){return!!Gc&&Gc in mt}var Ep=io?Or:hc;function Gi(mt){var bt=mt&&mt.constructor,It=typeof bt=="function"&&bt.prototype||pi;return mt===It}function Wl(mt){return mt===mt&&!ks(mt)}function Hl(mt,bt){return function(It){return It==null?!1:It[mt]===bt&&(bt!==Ye||mt in ws(It))}}function wp(mt){var bt=Po(mt,function(Mt){return It.size===at&&It.clear(),Mt}),It=bt.cache;return bt}function Cp(mt,bt){var It=mt[1],Mt=bt[1],qt=It|Mt,Xt=qt<(vt|At|St),rn=Mt==St&&It==wt||Mt==St&&It==Rt&&mt[7].length<=bt[8]||Mt==(St|Rt)&&bt[7].length<=bt[8]&&It==wt;if(!(Xt||rn))return mt;Mt&vt&&(mt[2]=bt[2],qt|=It&vt?0:Et);var un=bt[3];if(un){var yn=mt[3];mt[3]=yn?$l(yn,un,bt[4]):un,mt[4]=yn?zr(mt[3],lt):bt[4]}return un=bt[5],un&&(yn=mt[5],mt[5]=yn?Rl(yn,un,bt[6]):un,mt[6]=yn?zr(mt[5],lt):bt[6]),un=bt[7],un&&(mt[7]=un),Mt&St&&(mt[8]=mt[8]==null?bt[8]:Us(mt[8],bt[8])),mt[9]==null&&(mt[9]=bt[9]),mt[0]=bt[0],mt[1]=qt,mt}function _p(mt){var bt=[];if(mt!=null)for(var It in ws(mt))bt.push(It);return bt}function Sp(mt){return ao.call(mt)}function Ql(mt,bt,It){return bt=Bs(bt===Ye?mt.length-1:bt,0),function(){for(var Mt=arguments,qt=-1,Xt=Bs(Mt.length-bt,0),rn=Cn(Xt);++qt<Xt;)rn[qt]=Mt[bt+qt];qt=-1;for(var un=Cn(bt+1);++qt<bt;)un[qt]=Mt[qt];return un[bt]=It(rn),er(mt,this,un)}}function Kl(mt,bt){return bt.length<2?mt:ei(mt,fr(bt,0,-1))}function Tp(mt,bt){for(var It=mt.length,Mt=Us(bt.length,It),qt=Ys(mt);Mt--;){var Xt=bt[Mt];mt[Mt]=Dr(Xt,It)?qt[Xt]:Ye}return mt}function Qa(mt,bt){if(!(bt==="constructor"&&typeof mt[bt]=="function")&&bt!="__proto__")return mt[bt]}var Yl=Jl(vl),qi=Ld||function(mt,bt){return js.setTimeout(mt,bt)},Ka=Jl(Kh);function Xl(mt,bt,It){var Mt=bt+"";return Ka(mt,vp(Mt,Ip(mp(Mt),It)))}function Jl(mt){var bt=0,It=0;return function(){var Mt=Ud(),qt=zt-(Mt-It);if(It=Mt,qt>0){if(++bt>=Lt)return arguments[0]}else bt=0;return mt.apply(Ye,arguments)}}function Do(mt,bt){var It=-1,Mt=mt.length,qt=Mt-1;for(bt=bt===Ye?Mt:bt;++It<bt;){var Xt=ka(It,qt),rn=mt[Xt];mt[Xt]=mt[It],mt[It]=rn}return mt.length=bt,mt}var Zl=wp(function(mt){var bt=[];return mt.charCodeAt(0)===46&&bt.push(""),mt.replace(Sr,function(It,Mt,qt,Xt){bt.push(qt?Xt.replace(Go,"$1"):Mt||It)}),bt});function _r(mt){if(typeof mt=="string"||rr(mt))return mt;var bt=mt+"";return bt=="0"&&1/mt==-Qt?"-0":bt}function ni(mt){if(mt!=null){try{return oo.call(mt)}catch{}try{return mt+""}catch{}}return""}function Ip(mt,bt){return lr(cn,function(It){var Mt="_."+It[0];bt&It[1]&&!to(mt,Mt)&&mt.push(Mt)}),mt.sort()}function eu(mt){if(mt instanceof ps)return mt.clone();var bt=new dr(mt.__wrapped__,mt.__chain__);return bt.__actions__=Ys(mt.__actions__),bt.__index__=mt.__index__,bt.__values__=mt.__values__,bt}function $p(mt,bt,It){(It?Qs(mt,bt,It):bt===Ye)?bt=1:bt=Bs(is(bt),0);var Mt=mt==null?0:mt.length;if(!Mt||bt<1)return[];for(var qt=0,Xt=0,rn=Cn(fo(Mt/bt));qt<Mt;)rn[Xt++]=fr(mt,qt,qt+=bt);return rn}function Rp(mt){for(var bt=-1,It=mt==null?0:mt.length,Mt=0,qt=[];++bt<It;){var Xt=mt[bt];Xt&&(qt[Mt++]=Xt)}return qt}function kp(){var mt=arguments.length;if(!mt)return[];for(var bt=Cn(mt-1),It=arguments[0],Mt=mt;Mt--;)bt[Mt-1]=arguments[Mt];return jr(ss(It)?Ys(It):[It],zs(bt,1))}var Np=cs(function(mt,bt){return Os(mt)?Li(mt,zs(bt,1,Os,!0)):[]}),Dp=cs(function(mt,bt){var It=mr(bt);return Os(It)&&(It=Ye),Os(mt)?Li(mt,zs(bt,1,Os,!0),Xn(It,2)):[]}),Fp=cs(function(mt,bt){var It=mr(bt);return Os(It)&&(It=Ye),Os(mt)?Li(mt,zs(bt,1,Os,!0),Ye,It):[]});function Mp(mt,bt,It){var Mt=mt==null?0:mt.length;return Mt?(bt=It||bt===Ye?1:is(bt),fr(mt,bt<0?0:bt,Mt)):[]}function Pp(mt,bt,It){var Mt=mt==null?0:mt.length;return Mt?(bt=It||bt===Ye?1:is(bt),bt=Mt-bt,fr(mt,0,bt<0?0:bt)):[]}function Bp(mt,bt){return mt&&mt.length?Co(mt,Xn(bt,3),!0,!0):[]}function Lp(mt,bt){return mt&&mt.length?Co(mt,Xn(bt,3),!0):[]}function jp(mt,bt,It,Mt){var qt=mt==null?0:mt.length;return qt?(It&&typeof It!="number"&&Qs(mt,bt,It)&&(It=0,Mt=qt),$h(mt,bt,It,Mt)):[]}function tu(mt,bt,It){var Mt=mt==null?0:mt.length;if(!Mt)return-1;var qt=It==null?0:is(It);return qt<0&&(qt=Bs(Mt+qt,0)),no(mt,Xn(bt,3),qt)}function nu(mt,bt,It){var Mt=mt==null?0:mt.length;if(!Mt)return-1;var qt=Mt-1;return It!==Ye&&(qt=is(It),qt=It<0?Bs(Mt+qt,0):Us(qt,Mt-1)),no(mt,Xn(bt,3),qt,!0)}function su(mt){var bt=mt==null?0:mt.length;return bt?zs(mt,1):[]}function zp(mt){var bt=mt==null?0:mt.length;return bt?zs(mt,Qt):[]}function Vp(mt,bt){var It=mt==null?0:mt.length;return It?(bt=bt===Ye?1:is(bt),zs(mt,bt)):[]}function Up(mt){for(var bt=-1,It=mt==null?0:mt.length,Mt={};++bt<It;){var qt=mt[bt];Mt[qt[0]]=qt[1]}return Mt}function ru(mt){return mt&&mt.length?mt[0]:Ye}function Gp(mt,bt,It){var Mt=mt==null?0:mt.length;if(!Mt)return-1;var qt=It==null?0:is(It);return qt<0&&(qt=Bs(Mt+qt,0)),li(mt,bt,qt)}function qp(mt){var bt=mt==null?0:mt.length;return bt?fr(mt,0,-1):[]}var Wp=cs(function(mt){var bt=Rs(mt,Ma);return bt.length&&bt[0]===mt[0]?Sa(bt):[]}),Hp=cs(function(mt){var bt=mr(mt),It=Rs(mt,Ma);return bt===mr(It)?bt=Ye:It.pop(),It.length&&It[0]===mt[0]?Sa(It,Xn(bt,2)):[]}),Qp=cs(function(mt){var bt=mr(mt),It=Rs(mt,Ma);return bt=typeof bt=="function"?bt:Ye,bt&&It.pop(),It.length&&It[0]===mt[0]?Sa(It,Ye,bt):[]});function Kp(mt,bt){return mt==null?"":zd.call(mt,bt)}function mr(mt){var bt=mt==null?0:mt.length;return bt?mt[bt-1]:Ye}function Yp(mt,bt,It){var Mt=mt==null?0:mt.length;if(!Mt)return-1;var qt=Mt;return It!==Ye&&(qt=is(It),qt=qt<0?Bs(Mt+qt,0):Us(qt,Mt-1)),bt===bt?Cd(mt,bt,qt):no(mt,Mc,qt,!0)}function Xp(mt,bt){return mt&&mt.length?pl(mt,is(bt)):Ye}var Jp=cs(iu);function iu(mt,bt){return mt&&mt.length&&bt&&bt.length?Ra(mt,bt):mt}function Zp(mt,bt,It){return mt&&mt.length&&bt&&bt.length?Ra(mt,bt,Xn(It,2)):mt}function ef(mt,bt,It){return mt&&mt.length&&bt&&bt.length?Ra(mt,bt,Ye,It):mt}var tf=Nr(function(mt,bt){var It=mt==null?0:mt.length,Mt=ba(mt,bt);return xl(mt,Rs(bt,function(qt){return Dr(qt,It)?+qt:qt}).sort(Il)),Mt});function nf(mt,bt){var It=[];if(!(mt&&mt.length))return It;var Mt=-1,qt=[],Xt=mt.length;for(bt=Xn(bt,3);++Mt<Xt;){var rn=mt[Mt];bt(rn,Mt,mt)&&(It.push(rn),qt.push(Mt))}return xl(mt,qt),It}function Ya(mt){return mt==null?mt:qd.call(mt)}function sf(mt,bt,It){var Mt=mt==null?0:mt.length;return Mt?(It&&typeof It!="number"&&Qs(mt,bt,It)?(bt=0,It=Mt):(bt=bt==null?0:is(bt),It=It===Ye?Mt:is(It)),fr(mt,bt,It)):[]}function rf(mt,bt){return wo(mt,bt)}function of(mt,bt,It){return Da(mt,bt,Xn(It,2))}function af(mt,bt){var It=mt==null?0:mt.length;if(It){var Mt=wo(mt,bt);if(Mt<It&&Ar(mt[Mt],bt))return Mt}return-1}function cf(mt,bt){return wo(mt,bt,!0)}function lf(mt,bt,It){return Da(mt,bt,Xn(It,2),!0)}function uf(mt,bt){var It=mt==null?0:mt.length;if(It){var Mt=wo(mt,bt,!0)-1;if(Ar(mt[Mt],bt))return Mt}return-1}function df(mt){return mt&&mt.length?Al(mt):[]}function hf(mt,bt){return mt&&mt.length?Al(mt,Xn(bt,2)):[]}function pf(mt){var bt=mt==null?0:mt.length;return bt?fr(mt,1,bt):[]}function ff(mt,bt,It){return mt&&mt.length?(bt=It||bt===Ye?1:is(bt),fr(mt,0,bt<0?0:bt)):[]}function mf(mt,bt,It){var Mt=mt==null?0:mt.length;return Mt?(bt=It||bt===Ye?1:is(bt),bt=Mt-bt,fr(mt,bt<0?0:bt,Mt)):[]}function gf(mt,bt){return mt&&mt.length?Co(mt,Xn(bt,3),!1,!0):[]}function xf(mt,bt){return mt&&mt.length?Co(mt,Xn(bt,3)):[]}var vf=cs(function(mt){return Gr(zs(mt,1,Os,!0))}),Af=cs(function(mt){var bt=mr(mt);return Os(bt)&&(bt=Ye),Gr(zs(mt,1,Os,!0),Xn(bt,2))}),yf=cs(function(mt){var bt=mr(mt);return bt=typeof bt=="function"?bt:Ye,Gr(zs(mt,1,Os,!0),Ye,bt)});function bf(mt){return mt&&mt.length?Gr(mt):[]}function Ef(mt,bt){return mt&&mt.length?Gr(mt,Xn(bt,2)):[]}function wf(mt,bt){return bt=typeof bt=="function"?bt:Ye,mt&&mt.length?Gr(mt,Ye,bt):[]}function Xa(mt){if(!(mt&&mt.length))return[];var bt=0;return mt=Lr(mt,function(It){if(Os(It))return bt=Bs(It.length,bt),!0}),pa(bt,function(It){return Rs(mt,ua(It))})}function ou(mt,bt){if(!(mt&&mt.length))return[];var It=Xa(mt);return bt==null?It:Rs(It,function(Mt){return er(bt,Ye,Mt)})}var Cf=cs(function(mt,bt){return Os(mt)?Li(mt,bt):[]}),Sf=cs(function(mt){return Fa(Lr(mt,Os))}),Tf=cs(function(mt){var bt=mr(mt);return Os(bt)&&(bt=Ye),Fa(Lr(mt,Os),Xn(bt,2))}),If=cs(function(mt){var bt=mr(mt);return bt=typeof bt=="function"?bt:Ye,Fa(Lr(mt,Os),Ye,bt)}),$f=cs(Xa);function Rf(mt,bt){return wl(mt||[],bt||[],Bi)}function kf(mt,bt){return wl(mt||[],bt||[],Vi)}var Nf=cs(function(mt){var bt=mt.length,It=bt>1?mt[bt-1]:Ye;return It=typeof It=="function"?(mt.pop(),It):Ye,ou(mt,It)});function au(mt){var bt=Kt(mt);return bt.__chain__=!0,bt}function Df(mt,bt){return bt(mt),mt}function Oo(mt,bt){return bt(mt)}var Of=Nr(function(mt){var bt=mt.length,It=bt?mt[0]:0,Mt=this.__wrapped__,qt=function(Xt){return ba(Xt,mt)};return bt>1||this.__actions__.length||!(Mt instanceof ps)||!Dr(It)?this.thru(qt):(Mt=Mt.slice(It,+It+(bt?1:0)),Mt.__actions__.push({func:Oo,args:[qt],thisArg:Ye}),new dr(Mt,this.__chain__).thru(function(Xt){return bt&&!Xt.length&&Xt.push(Ye),Xt}))});function Ff(){return au(this)}function Mf(){return new dr(this.value(),this.__chain__)}function Pf(){this.__values__===Ye&&(this.__values__=bu(this.value()));var mt=this.__index__>=this.__values__.length,bt=mt?Ye:this.__values__[this.__index__++];return{done:mt,value:bt}}function Bf(){return this}function Lf(mt){for(var bt,It=this;It instanceof vo;){var Mt=eu(It);Mt.__index__=0,Mt.__values__=Ye,bt?qt.__wrapped__=Mt:bt=Mt;var qt=Mt;It=It.__wrapped__}return qt.__wrapped__=mt,bt}function jf(){var mt=this.__wrapped__;if(mt instanceof ps){var bt=mt;return this.__actions__.length&&(bt=new ps(this)),bt=bt.reverse(),bt.__actions__.push({func:Oo,args:[Ya],thisArg:Ye}),new dr(bt,this.__chain__)}return this.thru(Ya)}function zf(){return El(this.__wrapped__,this.__actions__)}var Vf=So(function(mt,bt,It){bs.call(mt,It)?++mt[It]:$r(mt,It,1)});function Uf(mt,bt,It){var Mt=ss(mt)?Oc:Ih;return It&&Qs(mt,bt,It)&&(bt=Ye),Mt(mt,Xn(bt,3))}function Gf(mt,bt){var It=ss(mt)?Lr:rl;return It(mt,Xn(bt,3))}var qf=Ol(tu),Wf=Ol(nu);function Hf(mt,bt){return zs(Fo(mt,bt),1)}function Qf(mt,bt){return zs(Fo(mt,bt),Qt)}function Kf(mt,bt,It){return It=It===Ye?1:is(It),zs(Fo(mt,bt),It)}function cu(mt,bt){var It=ss(mt)?lr:Ur;return It(mt,Xn(bt,3))}function lu(mt,bt){var It=ss(mt)?od:sl;return It(mt,Xn(bt,3))}var Yf=So(function(mt,bt,It){bs.call(mt,It)?mt[It].push(bt):$r(mt,It,[bt])});function Xf(mt,bt,It,Mt){mt=Xs(mt)?mt:bi(mt),It=It&&!Mt?is(It):0;var qt=mt.length;return It<0&&(It=Bs(qt+It,0)),jo(mt)?It<=qt&&mt.indexOf(bt,It)>-1:!!qt&&li(mt,bt,It)>-1}var Jf=cs(function(mt,bt,It){var Mt=-1,qt=typeof bt=="function",Xt=Xs(mt)?Cn(mt.length):[];return Ur(mt,function(rn){Xt[++Mt]=qt?er(bt,rn,It):ji(rn,bt,It)}),Xt}),Zf=So(function(mt,bt,It){$r(mt,It,bt)});function Fo(mt,bt){var It=ss(mt)?Rs:ul;return It(mt,Xn(bt,3))}function em(mt,bt,It,Mt){return mt==null?[]:(ss(bt)||(bt=bt==null?[]:[bt]),It=Mt?Ye:It,ss(It)||(It=It==null?[]:[It]),ml(mt,bt,It))}var tm=So(function(mt,bt,It){mt[It?0:1].push(bt)},function(){return[[],[]]});function nm(mt,bt,It){var Mt=ss(mt)?ca:Bc,qt=arguments.length<3;return Mt(mt,Xn(bt,4),It,qt,Ur)}function sm(mt,bt,It){var Mt=ss(mt)?ad:Bc,qt=arguments.length<3;return Mt(mt,Xn(bt,4),It,qt,sl)}function rm(mt,bt){var It=ss(mt)?Lr:rl;return It(mt,Bo(Xn(bt,3)))}function im(mt){var bt=ss(mt)?Zc:Hh;return bt(mt)}function om(mt,bt,It){(It?Qs(mt,bt,It):bt===Ye)?bt=1:bt=is(bt);var Mt=ss(mt)?Eh:Qh;return Mt(mt,bt)}function am(mt){var bt=ss(mt)?wh:Yh;return bt(mt)}function cm(mt){if(mt==null)return 0;if(Xs(mt))return jo(mt)?di(mt):mt.length;var bt=Gs(mt);return bt==kn||bt==Fn?mt.size:Ia(mt).length}function lm(mt,bt,It){var Mt=ss(mt)?la:Xh;return It&&Qs(mt,bt,It)&&(bt=Ye),Mt(mt,Xn(bt,3))}var um=cs(function(mt,bt){if(mt==null)return[];var It=bt.length;return It>1&&Qs(mt,bt[0],bt[1])?bt=[]:It>2&&Qs(bt[0],bt[1],bt[2])&&(bt=[bt[0]]),ml(mt,zs(bt,1),[])}),Mo=Bd||function(){return js.Date.now()};function dm(mt,bt){if(typeof bt!="function")throw new ur(rt);return mt=is(mt),function(){if(--mt<1)return bt.apply(this,arguments)}}function uu(mt,bt,It){return bt=It?Ye:bt,bt=mt&&bt==null?mt.length:bt,kr(mt,St,Ye,Ye,Ye,Ye,bt)}function du(mt,bt){var It;if(typeof bt!="function")throw new ur(rt);return mt=is(mt),function(){return--mt>0&&(It=bt.apply(this,arguments)),mt<=1&&(bt=Ye),It}}var Ja=cs(function(mt,bt,It){var Mt=vt;if(It.length){var qt=zr(It,Ai(Ja));Mt|=Ct}return kr(mt,Mt,bt,It,qt)}),hu=cs(function(mt,bt,It){var Mt=vt|At;if(It.length){var qt=zr(It,Ai(hu));Mt|=Ct}return kr(bt,Mt,mt,It,qt)});function pu(mt,bt,It){bt=It?Ye:bt;var Mt=kr(mt,wt,Ye,Ye,Ye,Ye,Ye,bt);return Mt.placeholder=pu.placeholder,Mt}function fu(mt,bt,It){bt=It?Ye:bt;var Mt=kr(mt,_t,Ye,Ye,Ye,Ye,Ye,bt);return Mt.placeholder=fu.placeholder,Mt}function mu(mt,bt,It){var Mt,qt,Xt,rn,un,yn,Dn=0,On=!1,Bn=!1,Vn=!0;if(typeof mt!="function")throw new ur(rt);bt=gr(bt)||0,ks(It)&&(On=!!It.leading,Bn="maxWait"in It,Xt=Bn?Bs(gr(It.maxWait)||0,bt):Xt,Vn="trailing"in It?!!It.trailing:Vn);function Qn(Fs){var br=Mt,Mr=qt;return Mt=qt=Ye,Dn=Fs,rn=mt.apply(Mr,br),rn}function Jn(Fs){return Dn=Fs,un=qi(ds,bt),On?Qn(Fs):rn}function os(Fs){var br=Fs-yn,Mr=Fs-Dn,Ou=bt-br;return Bn?Us(Ou,Xt-Mr):Ou}function Zn(Fs){var br=Fs-yn,Mr=Fs-Dn;return yn===Ye||br>=bt||br<0||Bn&&Mr>=Xt}function ds(){var Fs=Mo();if(Zn(Fs))return ms(Fs);un=qi(ds,os(Fs))}function ms(Fs){return un=Ye,Vn&&Mt?Qn(Fs):(Mt=qt=Ye,rn)}function ir(){un!==Ye&&Cl(un),Dn=0,Mt=yn=qt=un=Ye}function Ks(){return un===Ye?rn:ms(Mo())}function or(){var Fs=Mo(),br=Zn(Fs);if(Mt=arguments,qt=this,yn=Fs,br){if(un===Ye)return Jn(yn);if(Bn)return Cl(un),un=qi(ds,bt),Qn(yn)}return un===Ye&&(un=qi(ds,bt)),rn}return or.cancel=ir,or.flush=Ks,or}var hm=cs(function(mt,bt){return nl(mt,1,bt)}),pm=cs(function(mt,bt,It){return nl(mt,gr(bt)||0,It)});function fm(mt){return kr(mt,Nt)}function Po(mt,bt){if(typeof mt!="function"||bt!=null&&typeof bt!="function")throw new ur(rt);var It=function(){var Mt=arguments,qt=bt?bt.apply(this,Mt):Mt[0],Xt=It.cache;if(Xt.has(qt))return Xt.get(qt);var rn=mt.apply(this,Mt);return It.cache=Xt.set(qt,rn)||Xt,rn};return It.cache=new(Po.Cache||Ir),It}Po.Cache=Ir;function Bo(mt){if(typeof mt!="function")throw new ur(rt);return function(){var bt=arguments;switch(bt.length){case 0:return!mt.call(this);case 1:return!mt.call(this,bt[0]);case 2:return!mt.call(this,bt[0],bt[1]);case 3:return!mt.call(this,bt[0],bt[1],bt[2])}return!mt.apply(this,bt)}}function mm(mt){return du(2,mt)}var gm=Jh(function(mt,bt){bt=bt.length==1&&ss(bt[0])?Rs(bt[0],tr(Xn())):Rs(zs(bt,1),tr(Xn()));var It=bt.length;return cs(function(Mt){for(var qt=-1,Xt=Us(Mt.length,It);++qt<Xt;)Mt[qt]=bt[qt].call(this,Mt[qt]);return er(mt,this,Mt)})}),Za=cs(function(mt,bt){var It=zr(bt,Ai(Za));return kr(mt,Ct,Ye,bt,It)}),gu=cs(function(mt,bt){var It=zr(bt,Ai(gu));return kr(mt,Tt,Ye,bt,It)}),xm=Nr(function(mt,bt){return kr(mt,Rt,Ye,Ye,Ye,bt)});function vm(mt,bt){if(typeof mt!="function")throw new ur(rt);return bt=bt===Ye?bt:is(bt),cs(mt,bt)}function Am(mt,bt){if(typeof mt!="function")throw new ur(rt);return bt=bt==null?0:Bs(is(bt),0),cs(function(It){var Mt=It[bt],qt=Hr(It,0,bt);return Mt&&jr(qt,Mt),er(mt,this,qt)})}function ym(mt,bt,It){var Mt=!0,qt=!0;if(typeof mt!="function")throw new ur(rt);return ks(It)&&(Mt="leading"in It?!!It.leading:Mt,qt="trailing"in It?!!It.trailing:qt),mu(mt,bt,{leading:Mt,maxWait:bt,trailing:qt})}function bm(mt){return uu(mt,1)}function Em(mt,bt){return Za(Pa(bt),mt)}function wm(){if(!arguments.length)return[];var mt=arguments[0];return ss(mt)?mt:[mt]}function Cm(mt){return hr(mt,pt)}function Sm(mt,bt){return bt=typeof bt=="function"?bt:Ye,hr(mt,pt,bt)}function Tm(mt){return hr(mt,ut|pt)}function Im(mt,bt){return bt=typeof bt=="function"?bt:Ye,hr(mt,ut|pt,bt)}function $m(mt,bt){return bt==null||tl(mt,bt,Ls(bt))}function Ar(mt,bt){return mt===bt||mt!==mt&&bt!==bt}var Rm=Ro(Ca),km=Ro(function(mt,bt){return mt>=bt}),si=al((function(){return arguments})())?al:function(mt){return Ns(mt)&&bs.call(mt,"callee")&&!Hc.call(mt,"callee")},ss=Cn.isArray,Nm=Ic?tr(Ic):Oh;function Xs(mt){return mt!=null&&Lo(mt.length)&&!Or(mt)}function Os(mt){return Ns(mt)&&Xs(mt)}function Dm(mt){return mt===!0||mt===!1||Ns(mt)&&Hs(mt)==fn}var Qr=jd||hc,Om=$c?tr($c):Fh;function Fm(mt){return Ns(mt)&&mt.nodeType===1&&!Wi(mt)}function Mm(mt){if(mt==null)return!0;if(Xs(mt)&&(ss(mt)||typeof mt=="string"||typeof mt.splice=="function"||Qr(mt)||yi(mt)||si(mt)))return!mt.length;var bt=Gs(mt);if(bt==kn||bt==Fn)return!mt.size;if(Gi(mt))return!Ia(mt).length;for(var It in mt)if(bs.call(mt,It))return!1;return!0}function Pm(mt,bt){return zi(mt,bt)}function Bm(mt,bt,It){It=typeof It=="function"?It:Ye;var Mt=It?It(mt,bt):Ye;return Mt===Ye?zi(mt,bt,Ye,It):!!Mt}function tc(mt){if(!Ns(mt))return!1;var bt=Hs(mt);return bt==Nn||bt==Tn||typeof mt.message=="string"&&typeof mt.name=="string"&&!Wi(mt)}function Lm(mt){return typeof mt=="number"&&Kc(mt)}function Or(mt){if(!ks(mt))return!1;var bt=Hs(mt);return bt==gn||bt==_n||bt==dn||bt==An}function xu(mt){return typeof mt=="number"&&mt==is(mt)}function Lo(mt){return typeof mt=="number"&&mt>-1&&mt%1==0&&mt<=jt}function ks(mt){var bt=typeof mt;return mt!=null&&(bt=="object"||bt=="function")}function Ns(mt){return mt!=null&&typeof mt=="object"}var vu=Rc?tr(Rc):Ph;function jm(mt,bt){return mt===bt||Ta(mt,bt,Ga(bt))}function zm(mt,bt,It){return It=typeof It=="function"?It:Ye,Ta(mt,bt,Ga(bt),It)}function Vm(mt){return Au(mt)&&mt!=+mt}function Um(mt){if(Ep(mt))throw new ns(st);return cl(mt)}function Gm(mt){return mt===null}function qm(mt){return mt==null}function Au(mt){return typeof mt=="number"||Ns(mt)&&Hs(mt)==Wt}function Wi(mt){if(!Ns(mt)||Hs(mt)!=hn)return!1;var bt=uo(mt);if(bt===null)return!0;var It=bs.call(bt,"constructor")&&bt.constructor;return typeof It=="function"&&It instanceof It&&oo.call(It)==Od}var nc=kc?tr(kc):Bh;function Wm(mt){return xu(mt)&&mt>=-jt&&mt<=jt}var yu=Nc?tr(Nc):Lh;function jo(mt){return typeof mt=="string"||!ss(mt)&&Ns(mt)&&Hs(mt)==Hn}function rr(mt){return typeof mt=="symbol"||Ns(mt)&&Hs(mt)==Yn}var yi=Dc?tr(Dc):jh;function Hm(mt){return mt===Ye}function Qm(mt){return Ns(mt)&&Gs(mt)==Kn}function Km(mt){return Ns(mt)&&Hs(mt)==hs}var Ym=Ro($a),Xm=Ro(function(mt,bt){return mt<=bt});function bu(mt){if(!mt)return[];if(Xs(mt))return jo(mt)?xr(mt):Ys(mt);if(Ni&&mt[Ni])return bd(mt[Ni]());var bt=Gs(mt),It=bt==kn?ma:bt==Fn?so:bi;return It(mt)}function Fr(mt){if(!mt)return mt===0?mt:0;if(mt=gr(mt),mt===Qt||mt===-Qt){var bt=mt<0?-1:1;return bt*Ht}return mt===mt?mt:0}function is(mt){var bt=Fr(mt),It=bt%1;return bt===bt?It?bt-It:bt:0}function Eu(mt){return mt?Zr(is(mt),0,Jt):0}function gr(mt){if(typeof mt=="number")return mt;if(rr(mt))return Yt;if(ks(mt)){var bt=typeof mt.valueOf=="function"?mt.valueOf():mt;mt=ks(bt)?bt+"":bt}if(typeof mt!="string")return mt===0?mt:+mt;mt=Lc(mt);var It=Ho.test(mt);return It||Ko.test(mt)?sd(mt.slice(2),It?2:8):Wo.test(mt)?Yt:+mt}function wu(mt){return Cr(mt,Js(mt))}function Jm(mt){return mt?Zr(is(mt),-jt,jt):mt===0?mt:0}function ys(mt){return mt==null?"":nr(mt)}var Zm=xi(function(mt,bt){if(Gi(bt)||Xs(bt)){Cr(bt,Ls(bt),mt);return}for(var It in bt)bs.call(bt,It)&&Bi(mt,It,bt[It])}),Cu=xi(function(mt,bt){Cr(bt,Js(bt),mt)}),zo=xi(function(mt,bt,It,Mt){Cr(bt,Js(bt),mt,Mt)}),e1=xi(function(mt,bt,It,Mt){Cr(bt,Ls(bt),mt,Mt)}),t1=Nr(ba);function n1(mt,bt){var It=gi(mt);return bt==null?It:el(It,bt)}var s1=cs(function(mt,bt){mt=ws(mt);var It=-1,Mt=bt.length,qt=Mt>2?bt[2]:Ye;for(qt&&Qs(bt[0],bt[1],qt)&&(Mt=1);++It<Mt;)for(var Xt=bt[It],rn=Js(Xt),un=-1,yn=rn.length;++un<yn;){var Dn=rn[un],On=mt[Dn];(On===Ye||Ar(On,pi[Dn])&&!bs.call(mt,Dn))&&(mt[Dn]=Xt[Dn])}return mt}),r1=cs(function(mt){return mt.push(Ye,zl),er(_u,Ye,mt)});function i1(mt,bt){return Fc(mt,Xn(bt,3),wr)}function o1(mt,bt){return Fc(mt,Xn(bt,3),wa)}function c1(mt,bt){return mt==null?mt:Ea(mt,Xn(bt,3),Js)}function l1(mt,bt){return mt==null?mt:il(mt,Xn(bt,3),Js)}function u1(mt,bt){return mt&&wr(mt,Xn(bt,3))}function d1(mt,bt){return mt&&wa(mt,Xn(bt,3))}function h1(mt){return mt==null?[]:bo(mt,Ls(mt))}function p1(mt){return mt==null?[]:bo(mt,Js(mt))}function sc(mt,bt,It){var Mt=mt==null?Ye:ei(mt,bt);return Mt===Ye?It:Mt}function f1(mt,bt){return mt!=null&&Gl(mt,bt,Rh)}function rc(mt,bt){return mt!=null&&Gl(mt,bt,kh)}var m1=Ml(function(mt,bt,It){bt!=null&&typeof bt.toString!="function"&&(bt=ao.call(bt)),mt[bt]=It},oc(Zs)),g1=Ml(function(mt,bt,It){bt!=null&&typeof bt.toString!="function"&&(bt=ao.call(bt)),bs.call(mt,bt)?mt[bt].push(It):mt[bt]=[It]},Xn),x1=cs(ji);function Ls(mt){return Xs(mt)?Jc(mt):Ia(mt)}function Js(mt){return Xs(mt)?Jc(mt,!0):Vh(mt)}function v1(mt,bt){var It={};return bt=Xn(bt,3),wr(mt,function(Mt,qt,Xt){$r(It,bt(Mt,qt,Xt),Mt)}),It}function A1(mt,bt){var It={};return bt=Xn(bt,3),wr(mt,function(Mt,qt,Xt){$r(It,qt,bt(Mt,qt,Xt))}),It}var y1=xi(function(mt,bt,It){Eo(mt,bt,It)}),_u=xi(function(mt,bt,It,Mt){Eo(mt,bt,It,Mt)}),b1=Nr(function(mt,bt){var It={};if(mt==null)return It;var Mt=!1;bt=Rs(bt,function(Xt){return Xt=Wr(Xt,mt),Mt||(Mt=Xt.length>1),Xt}),Cr(mt,Va(mt),It),Mt&&(It=hr(It,ut|ht|pt,up));for(var qt=bt.length;qt--;)Oa(It,bt[qt]);return It});function E1(mt,bt){return Su(mt,Bo(Xn(bt)))}var w1=Nr(function(mt,bt){return mt==null?{}:Gh(mt,bt)});function Su(mt,bt){if(mt==null)return{};var It=Rs(Va(mt),function(Mt){return[Mt]});return bt=Xn(bt),gl(mt,It,function(Mt,qt){return bt(Mt,qt[0])})}function C1(mt,bt,It){bt=Wr(bt,mt);var Mt=-1,qt=bt.length;for(qt||(qt=1,mt=Ye);++Mt<qt;){var Xt=mt==null?Ye:mt[_r(bt[Mt])];Xt===Ye&&(Mt=qt,Xt=It),mt=Or(Xt)?Xt.call(mt):Xt}return mt}function _1(mt,bt,It){return mt==null?mt:Vi(mt,bt,It)}function S1(mt,bt,It,Mt){return Mt=typeof Mt=="function"?Mt:Ye,mt==null?mt:Vi(mt,bt,It,Mt)}var Tu=Ll(Ls),Iu=Ll(Js);function T1(mt,bt,It){var Mt=ss(mt),qt=Mt||Qr(mt)||yi(mt);if(bt=Xn(bt,4),It==null){var Xt=mt&&mt.constructor;qt?It=Mt?new Xt:[]:ks(mt)?It=Or(Xt)?gi(uo(mt)):{}:It={}}return(qt?lr:wr)(mt,function(rn,un,yn){return bt(It,rn,un,yn)}),It}function I1(mt,bt){return mt==null?!0:Oa(mt,bt)}function $1(mt,bt,It){return mt==null?mt:bl(mt,bt,Pa(It))}function R1(mt,bt,It,Mt){return Mt=typeof Mt=="function"?Mt:Ye,mt==null?mt:bl(mt,bt,Pa(It),Mt)}function bi(mt){return mt==null?[]:fa(mt,Ls(mt))}function k1(mt){return mt==null?[]:fa(mt,Js(mt))}function N1(mt,bt,It){return It===Ye&&(It=bt,bt=Ye),It!==Ye&&(It=gr(It),It=It===It?It:0),bt!==Ye&&(bt=gr(bt),bt=bt===bt?bt:0),Zr(gr(mt),bt,It)}function D1(mt,bt,It){return bt=Fr(bt),It===Ye?(It=bt,bt=0):It=Fr(It),mt=gr(mt),Nh(mt,bt,It)}function O1(mt,bt,It){if(It&&typeof It!="boolean"&&Qs(mt,bt,It)&&(bt=It=Ye),It===Ye&&(typeof bt=="boolean"?(It=bt,bt=Ye):typeof mt=="boolean"&&(It=mt,mt=Ye)),mt===Ye&&bt===Ye?(mt=0,bt=1):(mt=Fr(mt),bt===Ye?(bt=mt,mt=0):bt=Fr(bt)),mt>bt){var Mt=mt;mt=bt,bt=Mt}if(It||mt%1||bt%1){var qt=Yc();return Us(mt+qt*(bt-mt+nd("1e-"+((qt+"").length-1))),bt)}return ka(mt,bt)}var F1=vi(function(mt,bt,It){return bt=bt.toLowerCase(),mt+(It?$u(bt):bt)});function $u(mt){return ic(ys(mt).toLowerCase())}function Ru(mt){return mt=ys(mt),mt&&mt.replace(Xo,gd).replace(qu,"")}function M1(mt,bt,It){mt=ys(mt),bt=nr(bt);var Mt=mt.length;It=It===Ye?Mt:Zr(is(It),0,Mt);var qt=It;return It-=bt.length,It>=0&&mt.slice(It,qt)==bt}function P1(mt){return mt=ys(mt),mt&&gs.test(mt)?mt.replace(xs,xd):mt}function B1(mt){return mt=ys(mt),mt&&ri.test(mt)?mt.replace(Pr,"\\$&"):mt}var L1=vi(function(mt,bt,It){return mt+(It?"-":"")+bt.toLowerCase()}),j1=vi(function(mt,bt,It){return mt+(It?" ":"")+bt.toLowerCase()}),z1=Dl("toLowerCase");function V1(mt,bt,It){mt=ys(mt),bt=is(bt);var Mt=bt?di(mt):0;if(!bt||Mt>=bt)return mt;var qt=(bt-Mt)/2;return $o(mo(qt),It)+mt+$o(fo(qt),It)}function U1(mt,bt,It){mt=ys(mt),bt=is(bt);var Mt=bt?di(mt):0;return bt&&Mt<bt?mt+$o(bt-Mt,It):mt}function G1(mt,bt,It){mt=ys(mt),bt=is(bt);var Mt=bt?di(mt):0;return bt&&Mt<bt?$o(bt-Mt,It)+mt:mt}function q1(mt,bt,It){return It||bt==null?bt=0:bt&&(bt=+bt),Gd(ys(mt).replace(Ws,""),bt||0)}function W1(mt,bt,It){return(It?Qs(mt,bt,It):bt===Ye)?bt=1:bt=is(bt),Na(ys(mt),bt)}function H1(){var mt=arguments,bt=ys(mt[0]);return mt.length<3?bt:bt.replace(mt[1],mt[2])}var Q1=vi(function(mt,bt,It){return mt+(It?"_":"")+bt.toLowerCase()});function K1(mt,bt,It){return It&&typeof It!="number"&&Qs(mt,bt,It)&&(bt=It=Ye),It=It===Ye?Jt:It>>>0,It?(mt=ys(mt),mt&&(typeof bt=="string"||bt!=null&&!nc(bt))&&(bt=nr(bt),!bt&&ui(mt))?Hr(xr(mt),0,It):mt.split(bt,It)):[]}var Y1=vi(function(mt,bt,It){return mt+(It?" ":"")+ic(bt)});function X1(mt,bt,It){return mt=ys(mt),It=It==null?0:Zr(is(It),0,mt.length),bt=nr(bt),mt.slice(It,It+bt.length)==bt}function J1(mt,bt,It){var Mt=Kt.templateSettings;It&&Qs(mt,bt,It)&&(bt=Ye),mt=ys(mt),bt=zo({},bt,Mt,jl);var qt=zo({},bt.imports,Mt.imports,jl),Xt=Ls(qt),rn=fa(qt,Xt),un,yn,Dn=0,On=bt.interpolate||oi,Bn="__p += '",Vn=ga((bt.escape||oi).source+"|"+On.source+"|"+(On===Is?qo:oi).source+"|"+(bt.evaluate||oi).source+"|$","g"),Qn="//# sourceURL="+(bs.call(bt,"sourceURL")?(bt.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Yu+"]")+`
`;mt.replace(Vn,function(Zn,ds,ms,ir,Ks,or){return ms||(ms=ir),Bn+=mt.slice(Dn,or).replace(Jo,vd),ds&&(un=!0,Bn+=`' +
__e(`+ds+`) +
'`),Ks&&(yn=!0,Bn+=`';
`+Ks+`;
__p += '`),ms&&(Bn+=`' +
((__t = (`+ms+`)) == null ? '' : __t) +
'`),Dn=or+Zn.length,Zn}),Bn+=`';
`;var Jn=bs.call(bt,"variable")&&bt.variable;if(!Jn)Bn=`with (obj) {
`+Bn+`
}
`;else if(wi.test(Jn))throw new ns(it);Bn=(yn?Bn.replace(qn,""):Bn).replace(Wn,"$1").replace(ts,"$1;"),Bn="function("+(Jn||"obj")+`) {
`+(Jn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(un?", __e = _.escape":"")+(yn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Bn+`return __p
}`;var os=Nu(function(){return As(Xt,Qn+"return "+Bn).apply(Ye,rn)});if(os.source=Bn,tc(os))throw os;return os}function Z1(mt){return ys(mt).toLowerCase()}function eg(mt){return ys(mt).toUpperCase()}function tg(mt,bt,It){if(mt=ys(mt),mt&&(It||bt===Ye))return Lc(mt);if(!mt||!(bt=nr(bt)))return mt;var Mt=xr(mt),qt=xr(bt),Xt=jc(Mt,qt),rn=zc(Mt,qt)+1;return Hr(Mt,Xt,rn).join("")}function ng(mt,bt,It){if(mt=ys(mt),mt&&(It||bt===Ye))return mt.slice(0,Uc(mt)+1);if(!mt||!(bt=nr(bt)))return mt;var Mt=xr(mt),qt=zc(Mt,xr(bt))+1;return Hr(Mt,0,qt).join("")}function sg(mt,bt,It){if(mt=ys(mt),mt&&(It||bt===Ye))return mt.replace(Ws,"");if(!mt||!(bt=nr(bt)))return mt;var Mt=xr(mt),qt=jc(Mt,xr(bt));return Hr(Mt,qt).join("")}function rg(mt,bt){var It=Pt,Mt=Bt;if(ks(bt)){var qt="separator"in bt?bt.separator:qt;It="length"in bt?is(bt.length):It,Mt="omission"in bt?nr(bt.omission):Mt}mt=ys(mt);var Xt=mt.length;if(ui(mt)){var rn=xr(mt);Xt=rn.length}if(It>=Xt)return mt;var un=It-di(Mt);if(un<1)return Mt;var yn=rn?Hr(rn,0,un).join(""):mt.slice(0,un);if(qt===Ye)return yn+Mt;if(rn&&(un+=yn.length-un),nc(qt)){if(mt.slice(un).search(qt)){var Dn,On=yn;for(qt.global||(qt=ga(qt.source,ys(Qi.exec(qt))+"g")),qt.lastIndex=0;Dn=qt.exec(On);)var Bn=Dn.index;yn=yn.slice(0,Bn===Ye?un:Bn)}}else if(mt.indexOf(nr(qt),un)!=un){var Vn=yn.lastIndexOf(qt);Vn>-1&&(yn=yn.slice(0,Vn))}return yn+Mt}function ig(mt){return mt=ys(mt),mt&&vs.test(mt)?mt.replace(us,Sd):mt}var og=vi(function(mt,bt,It){return mt+(It?" ":"")+bt.toUpperCase()}),ic=Dl("toUpperCase");function ku(mt,bt,It){return mt=ys(mt),bt=It?Ye:bt,bt===Ye?yd(mt)?$d(mt):ud(mt):mt.match(bt)||[]}var Nu=cs(function(mt,bt){try{return er(mt,Ye,bt)}catch(It){return tc(It)?It:new ns(It)}}),ag=Nr(function(mt,bt){return lr(bt,function(It){It=_r(It),$r(mt,It,Ja(mt[It],mt))}),mt});function cg(mt){var bt=mt==null?0:mt.length,It=Xn();return mt=bt?Rs(mt,function(Mt){if(typeof Mt[1]!="function")throw new ur(rt);return[It(Mt[0]),Mt[1]]}):[],cs(function(Mt){for(var qt=-1;++qt<bt;){var Xt=mt[qt];if(er(Xt[0],this,Mt))return er(Xt[1],this,Mt)}})}function lg(mt){return Th(hr(mt,ut))}function oc(mt){return function(){return mt}}function ug(mt,bt){return mt==null||mt!==mt?bt:mt}var dg=Fl(),hg=Fl(!0);function Zs(mt){return mt}function ac(mt){return ll(typeof mt=="function"?mt:hr(mt,ut))}function pg(mt){return dl(hr(mt,ut))}function fg(mt,bt){return hl(mt,hr(bt,ut))}var mg=cs(function(mt,bt){return function(It){return ji(It,mt,bt)}}),gg=cs(function(mt,bt){return function(It){return ji(mt,It,bt)}});function cc(mt,bt,It){var Mt=Ls(bt),qt=bo(bt,Mt);It==null&&!(ks(bt)&&(qt.length||!Mt.length))&&(It=bt,bt=mt,mt=this,qt=bo(bt,Ls(bt)));var Xt=!(ks(It)&&"chain"in It)||!!It.chain,rn=Or(mt);return lr(qt,function(un){var yn=bt[un];mt[un]=yn,rn&&(mt.prototype[un]=function(){var Dn=this.__chain__;if(Xt||Dn){var On=mt(this.__wrapped__),Bn=On.__actions__=Ys(this.__actions__);return Bn.push({func:yn,args:arguments,thisArg:mt}),On.__chain__=Dn,On}return yn.apply(mt,jr([this.value()],arguments))})}),mt}function xg(){return js._===this&&(js._=Fd),this}function uc(){}function vg(mt){return mt=is(mt),cs(function(bt){return pl(bt,mt)})}var Ag=La(Rs),yg=La(Oc),bg=La(la);function Du(mt){return Wa(mt)?ua(_r(mt)):qh(mt)}function Eg(mt){return function(bt){return mt==null?Ye:ei(mt,bt)}}var wg=Pl(),Cg=Pl(!0);function dc(){return[]}function hc(){return!1}function Sg(){return{}}function Tg(){return""}function Ig(){return!0}function $g(mt,bt){if(mt=is(mt),mt<1||mt>jt)return[];var It=Jt,Mt=Us(mt,Jt);bt=Xn(bt),mt-=Jt;for(var qt=pa(Mt,bt);++It<mt;)bt(It);return qt}function Rg(mt){return ss(mt)?Rs(mt,_r):rr(mt)?[mt]:Ys(Zl(ys(mt)))}function kg(mt){var bt=++Dd;return ys(mt)+bt}var Ng=Io(function(mt,bt){return mt+bt},0),Dg=ja("ceil"),Og=Io(function(mt,bt){return mt/bt},1),Fg=ja("floor");function Mg(mt){return mt&&mt.length?yo(mt,Zs,Ca):Ye}function Pg(mt,bt){return mt&&mt.length?yo(mt,Xn(bt,2),Ca):Ye}function Bg(mt){return Pc(mt,Zs)}function Lg(mt,bt){return Pc(mt,Xn(bt,2))}function jg(mt){return mt&&mt.length?yo(mt,Zs,$a):Ye}function zg(mt,bt){return mt&&mt.length?yo(mt,Xn(bt,2),$a):Ye}var Vg=Io(function(mt,bt){return mt*bt},1),Ug=ja("round"),Gg=Io(function(mt,bt){return mt-bt},0);function qg(mt){return mt&&mt.length?ha(mt,Zs):0}function Wg(mt,bt){return mt&&mt.length?ha(mt,Xn(bt,2)):0}return Kt.after=dm,Kt.ary=uu,Kt.assign=Zm,Kt.assignIn=Cu,Kt.assignInWith=zo,Kt.assignWith=e1,Kt.at=t1,Kt.before=du,Kt.bind=Ja,Kt.bindAll=ag,Kt.bindKey=hu,Kt.castArray=wm,Kt.chain=au,Kt.chunk=$p,Kt.compact=Rp,Kt.concat=kp,Kt.cond=cg,Kt.conforms=lg,Kt.constant=oc,Kt.countBy=Vf,Kt.create=n1,Kt.curry=pu,Kt.curryRight=fu,Kt.debounce=mu,Kt.defaults=s1,Kt.defaultsDeep=r1,Kt.defer=hm,Kt.delay=pm,Kt.difference=Np,Kt.differenceBy=Dp,Kt.differenceWith=Fp,Kt.drop=Mp,Kt.dropRight=Pp,Kt.dropRightWhile=Bp,Kt.dropWhile=Lp,Kt.fill=jp,Kt.filter=Gf,Kt.flatMap=Hf,Kt.flatMapDeep=Qf,Kt.flatMapDepth=Kf,Kt.flatten=su,Kt.flattenDeep=zp,Kt.flattenDepth=Vp,Kt.flip=fm,Kt.flow=dg,Kt.flowRight=hg,Kt.fromPairs=Up,Kt.functions=h1,Kt.functionsIn=p1,Kt.groupBy=Yf,Kt.initial=qp,Kt.intersection=Wp,Kt.intersectionBy=Hp,Kt.intersectionWith=Qp,Kt.invert=m1,Kt.invertBy=g1,Kt.invokeMap=Jf,Kt.iteratee=ac,Kt.keyBy=Zf,Kt.keys=Ls,Kt.keysIn=Js,Kt.map=Fo,Kt.mapKeys=v1,Kt.mapValues=A1,Kt.matches=pg,Kt.matchesProperty=fg,Kt.memoize=Po,Kt.merge=y1,Kt.mergeWith=_u,Kt.method=mg,Kt.methodOf=gg,Kt.mixin=cc,Kt.negate=Bo,Kt.nthArg=vg,Kt.omit=b1,Kt.omitBy=E1,Kt.once=mm,Kt.orderBy=em,Kt.over=Ag,Kt.overArgs=gm,Kt.overEvery=yg,Kt.overSome=bg,Kt.partial=Za,Kt.partialRight=gu,Kt.partition=tm,Kt.pick=w1,Kt.pickBy=Su,Kt.property=Du,Kt.propertyOf=Eg,Kt.pull=Jp,Kt.pullAll=iu,Kt.pullAllBy=Zp,Kt.pullAllWith=ef,Kt.pullAt=tf,Kt.range=wg,Kt.rangeRight=Cg,Kt.rearg=xm,Kt.reject=rm,Kt.remove=nf,Kt.rest=vm,Kt.reverse=Ya,Kt.sampleSize=om,Kt.set=_1,Kt.setWith=S1,Kt.shuffle=am,Kt.slice=sf,Kt.sortBy=um,Kt.sortedUniq=df,Kt.sortedUniqBy=hf,Kt.split=K1,Kt.spread=Am,Kt.tail=pf,Kt.take=ff,Kt.takeRight=mf,Kt.takeRightWhile=gf,Kt.takeWhile=xf,Kt.tap=Df,Kt.throttle=ym,Kt.thru=Oo,Kt.toArray=bu,Kt.toPairs=Tu,Kt.toPairsIn=Iu,Kt.toPath=Rg,Kt.toPlainObject=wu,Kt.transform=T1,Kt.unary=bm,Kt.union=vf,Kt.unionBy=Af,Kt.unionWith=yf,Kt.uniq=bf,Kt.uniqBy=Ef,Kt.uniqWith=wf,Kt.unset=I1,Kt.unzip=Xa,Kt.unzipWith=ou,Kt.update=$1,Kt.updateWith=R1,Kt.values=bi,Kt.valuesIn=k1,Kt.without=Cf,Kt.words=ku,Kt.wrap=Em,Kt.xor=Sf,Kt.xorBy=Tf,Kt.xorWith=If,Kt.zip=$f,Kt.zipObject=Rf,Kt.zipObjectDeep=kf,Kt.zipWith=Nf,Kt.entries=Tu,Kt.entriesIn=Iu,Kt.extend=Cu,Kt.extendWith=zo,cc(Kt,Kt),Kt.add=Ng,Kt.attempt=Nu,Kt.camelCase=F1,Kt.capitalize=$u,Kt.ceil=Dg,Kt.clamp=N1,Kt.clone=Cm,Kt.cloneDeep=Tm,Kt.cloneDeepWith=Im,Kt.cloneWith=Sm,Kt.conformsTo=$m,Kt.deburr=Ru,Kt.defaultTo=ug,Kt.divide=Og,Kt.endsWith=M1,Kt.eq=Ar,Kt.escape=P1,Kt.escapeRegExp=B1,Kt.every=Uf,Kt.find=qf,Kt.findIndex=tu,Kt.findKey=i1,Kt.findLast=Wf,Kt.findLastIndex=nu,Kt.findLastKey=o1,Kt.floor=Fg,Kt.forEach=cu,Kt.forEachRight=lu,Kt.forIn=c1,Kt.forInRight=l1,Kt.forOwn=u1,Kt.forOwnRight=d1,Kt.get=sc,Kt.gt=Rm,Kt.gte=km,Kt.has=f1,Kt.hasIn=rc,Kt.head=ru,Kt.identity=Zs,Kt.includes=Xf,Kt.indexOf=Gp,Kt.inRange=D1,Kt.invoke=x1,Kt.isArguments=si,Kt.isArray=ss,Kt.isArrayBuffer=Nm,Kt.isArrayLike=Xs,Kt.isArrayLikeObject=Os,Kt.isBoolean=Dm,Kt.isBuffer=Qr,Kt.isDate=Om,Kt.isElement=Fm,Kt.isEmpty=Mm,Kt.isEqual=Pm,Kt.isEqualWith=Bm,Kt.isError=tc,Kt.isFinite=Lm,Kt.isFunction=Or,Kt.isInteger=xu,Kt.isLength=Lo,Kt.isMap=vu,Kt.isMatch=jm,Kt.isMatchWith=zm,Kt.isNaN=Vm,Kt.isNative=Um,Kt.isNil=qm,Kt.isNull=Gm,Kt.isNumber=Au,Kt.isObject=ks,Kt.isObjectLike=Ns,Kt.isPlainObject=Wi,Kt.isRegExp=nc,Kt.isSafeInteger=Wm,Kt.isSet=yu,Kt.isString=jo,Kt.isSymbol=rr,Kt.isTypedArray=yi,Kt.isUndefined=Hm,Kt.isWeakMap=Qm,Kt.isWeakSet=Km,Kt.join=Kp,Kt.kebabCase=L1,Kt.last=mr,Kt.lastIndexOf=Yp,Kt.lowerCase=j1,Kt.lowerFirst=z1,Kt.lt=Ym,Kt.lte=Xm,Kt.max=Mg,Kt.maxBy=Pg,Kt.mean=Bg,Kt.meanBy=Lg,Kt.min=jg,Kt.minBy=zg,Kt.stubArray=dc,Kt.stubFalse=hc,Kt.stubObject=Sg,Kt.stubString=Tg,Kt.stubTrue=Ig,Kt.multiply=Vg,Kt.nth=Xp,Kt.noConflict=xg,Kt.noop=uc,Kt.now=Mo,Kt.pad=V1,Kt.padEnd=U1,Kt.padStart=G1,Kt.parseInt=q1,Kt.random=O1,Kt.reduce=nm,Kt.reduceRight=sm,Kt.repeat=W1,Kt.replace=H1,Kt.result=C1,Kt.round=Ug,Kt.runInContext=vn,Kt.sample=im,Kt.size=cm,Kt.snakeCase=Q1,Kt.some=lm,Kt.sortedIndex=rf,Kt.sortedIndexBy=of,Kt.sortedIndexOf=af,Kt.sortedLastIndex=cf,Kt.sortedLastIndexBy=lf,Kt.sortedLastIndexOf=uf,Kt.startCase=Y1,Kt.startsWith=X1,Kt.subtract=Gg,Kt.sum=qg,Kt.sumBy=Wg,Kt.template=J1,Kt.times=$g,Kt.toFinite=Fr,Kt.toInteger=is,Kt.toLength=Eu,Kt.toLower=Z1,Kt.toNumber=gr,Kt.toSafeInteger=Jm,Kt.toString=ys,Kt.toUpper=eg,Kt.trim=tg,Kt.trimEnd=ng,Kt.trimStart=sg,Kt.truncate=rg,Kt.unescape=ig,Kt.uniqueId=kg,Kt.upperCase=og,Kt.upperFirst=ic,Kt.each=cu,Kt.eachRight=lu,Kt.first=ru,cc(Kt,(function(){var mt={};return wr(Kt,function(bt,It){bs.call(Kt.prototype,It)||(mt[It]=bt)}),mt})(),{chain:!1}),Kt.VERSION=Je,lr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(mt){Kt[mt].placeholder=Kt}),lr(["drop","take"],function(mt,bt){ps.prototype[mt]=function(It){It=It===Ye?1:Bs(is(It),0);var Mt=this.__filtered__&&!bt?new ps(this):this.clone();return Mt.__filtered__?Mt.__takeCount__=Us(It,Mt.__takeCount__):Mt.__views__.push({size:Us(It,Jt),type:mt+(Mt.__dir__<0?"Right":"")}),Mt},ps.prototype[mt+"Right"]=function(It){return this.reverse()[mt](It).reverse()}}),lr(["filter","map","takeWhile"],function(mt,bt){var It=bt+1,Mt=It==Dt||It==Gt;ps.prototype[mt]=function(qt){var Xt=this.clone();return Xt.__iteratees__.push({iteratee:Xn(qt,3),type:It}),Xt.__filtered__=Xt.__filtered__||Mt,Xt}}),lr(["head","last"],function(mt,bt){var It="take"+(bt?"Right":"");ps.prototype[mt]=function(){return this[It](1).value()[0]}}),lr(["initial","tail"],function(mt,bt){var It="drop"+(bt?"":"Right");ps.prototype[mt]=function(){return this.__filtered__?new ps(this):this[It](1)}}),ps.prototype.compact=function(){return this.filter(Zs)},ps.prototype.find=function(mt){return this.filter(mt).head()},ps.prototype.findLast=function(mt){return this.reverse().find(mt)},ps.prototype.invokeMap=cs(function(mt,bt){return typeof mt=="function"?new ps(this):this.map(function(It){return ji(It,mt,bt)})}),ps.prototype.reject=function(mt){return this.filter(Bo(Xn(mt)))},ps.prototype.slice=function(mt,bt){mt=is(mt);var It=this;return It.__filtered__&&(mt>0||bt<0)?new ps(It):(mt<0?It=It.takeRight(-mt):mt&&(It=It.drop(mt)),bt!==Ye&&(bt=is(bt),It=bt<0?It.dropRight(-bt):It.take(bt-mt)),It)},ps.prototype.takeRightWhile=function(mt){return this.reverse().takeWhile(mt).reverse()},ps.prototype.toArray=function(){return this.take(Jt)},wr(ps.prototype,function(mt,bt){var It=/^(?:filter|find|map|reject)|While$/.test(bt),Mt=/^(?:head|last)$/.test(bt),qt=Kt[Mt?"take"+(bt=="last"?"Right":""):bt],Xt=Mt||/^find/.test(bt);qt&&(Kt.prototype[bt]=function(){var rn=this.__wrapped__,un=Mt?[1]:arguments,yn=rn instanceof ps,Dn=un[0],On=yn||ss(rn),Bn=function(ds){var ms=qt.apply(Kt,jr([ds],un));return Mt&&Vn?ms[0]:ms};On&&It&&typeof Dn=="function"&&Dn.length!=1&&(yn=On=!1);var Vn=this.__chain__,Qn=!!this.__actions__.length,Jn=Xt&&!Vn,os=yn&&!Qn;if(!Xt&&On){rn=os?rn:new ps(this);var Zn=mt.apply(rn,un);return Zn.__actions__.push({func:Oo,args:[Bn],thisArg:Ye}),new dr(Zn,Vn)}return Jn&&os?mt.apply(this,un):(Zn=this.thru(Bn),Jn?Mt?Zn.value()[0]:Zn.value():Zn)})}),lr(["pop","push","shift","sort","splice","unshift"],function(mt){var bt=ro[mt],It=/^(?:push|sort|unshift)$/.test(mt)?"tap":"thru",Mt=/^(?:pop|shift)$/.test(mt);Kt.prototype[mt]=function(){var qt=arguments;if(Mt&&!this.__chain__){var Xt=this.value();return bt.apply(ss(Xt)?Xt:[],qt)}return this[It](function(rn){return bt.apply(ss(rn)?rn:[],qt)})}}),wr(ps.prototype,function(mt,bt){var It=Kt[bt];if(It){var Mt=It.name+"";bs.call(mi,Mt)||(mi[Mt]=[]),mi[Mt].push({name:bt,func:It})}}),mi[To(Ye,At).name]=[{name:"wrapper",func:Ye}],ps.prototype.clone=Xd,ps.prototype.reverse=Jd,ps.prototype.value=Zd,Kt.prototype.at=Of,Kt.prototype.chain=Ff,Kt.prototype.commit=Mf,Kt.prototype.next=Pf,Kt.prototype.plant=Lf,Kt.prototype.reverse=jf,Kt.prototype.toJSON=Kt.prototype.valueOf=Kt.prototype.value=zf,Kt.prototype.first=Kt.prototype.head,Ni&&(Kt.prototype[Ni]=Bf),Kt}),hi=Rd();Kr?((Kr.exports=hi)._=hi,ia._=hi):js._=hi}).call(commonjsGlobal)})(lodash,lodash.exports);var lodashExports=lodash.exports;const _$1=getDefaultExportFromCjs(lodashExports),flipObject=Xe=>Object.fromEntries(Object.entries(Xe).map(Ke=>Ke.reverse()));function randomSeed(Xe){let Ke=Math.sin(Xe)*1e4;return Ke-=Math.floor(Ke)}const CIDToURL=(Xe,Ke="CDN",Ye)=>{if(Xe==null)return"";switch(Ke!=="CDN"&&!lodashExports.isEmpty(Ye)&&console.warn("Using options for IPFS Gateways does nothing"),Ke){case"CDN":return`https://cache.teia.rocks/ipfs/${Xe}`;case"CLOUDFLARE":return`https://cloudflare-ipfs.com/ipfs/${Xe}`;case"PINATA":return`https://gateway.pinata.cloud/ipfs/${Xe}`;case"IPFS":return`https://ipfs.io/ipfs/${Xe}`;case"DWEB":return`http://dweb.link/ipfs/${Xe}`;case"NFTSTORAGE":return`https://nftstorage.link/ipfs/${Xe}`;default:return console.error("please specify type"),Xe}},HashToURL=(Xe,Ke="CDN",Ye={size:"raw"})=>{if(Xe==null)return"";const Je=Xe.split("ipfs://")[1];return CIDToURL(Je,Ke,Ye)};function formatRoyalties(Xe){const Ke=lodashExports.get(Xe,"royalty_receivers.0.royalties");return lodashExports.isNumber(Ke)?`${Ke/1e4}%`:"-"}const BANNER_URL="https://lists.teia.art/teia-status",PATH={ISSUER:"/tz",COLLAB:"/kt",PROPOSAL:"/proposal",POLL:"/poll",OBJKT:"/objkt",TAGS:"/tags"},MINT_FILESIZE=2e3,MIMETYPE={BMP:"image/bmp",FLAC:"audio/flac",GIF:"image/gif",GLB:"model/gltf-binary",GLTF:"model/gltf+json",DIRECTORY:"application/x-directory",JPEG:"image/jpeg",MD:"text/markdown",MIDI:"audio/midi",MID:"audio/mid",MP3:"audio/mpeg",MP4:"video/mp4",OGG:"audio/ogg",OGV:"video/ogg",PDF:"application/pdf",PNG:"image/png",QUICKTIME:"video/quicktime",SVG:"image/svg+xml",TIFF:"image/tiff",WAV:"audio/wav",WEBM:"video/webm",WEBP:"image/webp",XWAV:"audio/x-wav",ZIP:"application/zip",ZIP1:"application/x-zip-compressed",ZIP2:"multipart/x-zip",TXT:"text/plain"},AUDIO_MIME_TYPES=["audio/mpeg","audio/wav","audio/flac","audio/x-flac","audio/ogg"],ALLOWED_MIMETYPES=Object.keys(MIMETYPE).map(Xe=>MIMETYPE[Xe]).filter(Xe=>Xe!==MIMETYPE.GLTF||Xe!==MIMETYPE.TXT),ALLOWED_FILETYPES_LABEL=Object.entries(MIMETYPE).filter(Xe=>ALLOWED_MIMETYPES.includes(Xe[1])).filter(Xe=>!["ZIP1","ZIP2","OGV","BMP","TIFF","XWAV","QUICKTIME","WEBP","TXT"].includes(Xe[0])).map(Xe=>Xe[0]==="ZIP"?"HTML (ZIP ARCHIVE)":Xe[0]).join(", "),FEED_LIST=["Recent Sales","Random","New OBJKTs","Friends","Quake Aid","🇵🇸 Tez4Pal","🇺🇦 Ukraine","🇵🇰 Pakistan","🇮🇷 Iran","🏳️‍🌈 Tezospride","Art4Artists","Image","Video","Audio","3D","HTML & SVG","GIF","PDF","Markdown"],DEFAULT_START_FEED="New OBJKTs",ALLOWED_COVER_MIMETYPES=[MIMETYPE.JPEG,MIMETYPE.PNG,MIMETYPE.GIF],AUTO_GENERATE_COVER_MIMETYPES=["text/plain","audio/midi","audio/mid"],ALLOWED_COVER_FILETYPES_LABEL="jpeg, png, gif",MAX_EDITIONS=1e4,MIN_ROYALTIES=10,MAX_ROYALTIES=25,IPFS_DEFAULT_THUMBNAIL_URI="ipfs://QmNrhZHUaEqxhyLfqoq1mtHSipkWHeT31LNHb1QEbDHgnc",MARKETPLACE_CONTRACT_V1="KT1Hkg5qeNhfwpKW4fXvq7HGZB9z2EnmCCA9",MARKETPLACE_CONTRACT_V2="KT1HbQepzV1nVGg8QVznG7z4RcHseD5kwqBn",MARKETPLACE_CONTRACT_TEIA="KT1PHubm9HtyQEJ4BBpMTVomq6mhbfNZ9z5w",MARKETPLACE_CONTRACT_OBJKTCOM_V1="KT1FvqJwEDWb1Gwc55Jd1jjTHRVWbYKUUpyq",MARKETPLACE_CONTRACT_OBJKTCOM_V4="KT1WvzYHCNBvDSdwafTHv7nJ1dWmZ8GCYuuC",MARKETPLACE_CONTRACTS_FROM_NAME={"HEN v1 Marketplace":MARKETPLACE_CONTRACT_V1,"HEN v2 Marketplace":MARKETPLACE_CONTRACT_V2,"Teia Marketplace":MARKETPLACE_CONTRACT_TEIA,"OBJKT v1 Marketplace":MARKETPLACE_CONTRACT_OBJKTCOM_V1,"OBJKT v4 Marketplace":MARKETPLACE_CONTRACT_OBJKTCOM_V4,"Crunchy Burner":"KT1CZMurPAjSfZqcn6LBUNUhG4byE6AJgDT6"},MARKETPLACE_CONTRACTS_TO_NAME=flipObject(MARKETPLACE_CONTRACTS_FROM_NAME),HEN_CONTRACT_FA2="KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",ART4ARTISTS_BREADFOND_CONTRACT="KT1LgnHXu8NVa674xJhSFhnKjrn7v2ZMsu2a",TEZ4PAL_FUNDING_ADDRESS="tz2TfuukrHVoeUqFvcRViPJ2VqL7nEQi7xgW",UKRAINE_FUNDING_CONTRACT="KT1DWnLiUkNtAQDErXxudFEH63JC6mqg3HEx",PAKISTAN_FUNDING_CONTRACT="KT1Jpf2TAcZS7QfBraQMBeCxjFhH6kAdDL4z",IRAN_FUNDING_CONTRACT="KT1KYfj97fpdomqyKsZSBdSVvh9afh93b4Ge",QUAKE_FUNDING_CONTRACT="KT1X1jyohFrZyDYWvCPXw9KvWxk2VDwxyg2g",COPYRIGHT_CONTRACT="KT1XAiMoaddkmLUhMYMrc3ghm9uBdLgVbiFK",MOROCCO_QUAKE_FUNDING_CONTRACT="KT1RwXEP8Sj1UQDHPG4oEjRohBdzG2R7FCpA",POLLS_CONTRACT="KT1SUExZfkmxf2fafrVgYjZGEKDete2siWoU",DAO_GOVERNANCE_CONTRACT="KT1GHX73W5BcjbYRSZSrUJcnZE3Uw92VYF66",DAO_TREASURY_CONTRACT="KT1J9FYz29RBQi1oGLw8uXyACrzXzV1dHuvb",DAO_TOKEN_CONTRACT="KT1QrtA753MSv8VGxkDrKKyJniG5JtuHHbtV",DAO_TOKEN_CLAIM_CONTRACT="KT1NrfV4e2qWqFrnrKyPTJth5wq2KP9VyBei",DISTRIBUTION_MAPPING_IPFS_PATH="QmbRmck8A5sBYQC7WEuK8dApnGQGXBhyPEgQpLm8ftfAtL",MERKLE_DATA_IPFS_PATHS={0:"QmUETPfQaoE2mTzBUMbXGk4VgJUqvitwmti2iuk7p1KUPa",1:"Qme3evVseBhLhoK4iefXiSHnr2wegGVnPccCYKQWqrDuPy",2:"QmdGaYaM1gdqqVVaApmwxdg5Mu5Ckkh9hdDSfnC6nP6G14",3:"QmZQzGdwZgMa8aNwhyFiLy2rKHmyvfFpi6pYfdE3t7wHTV",4:"QmbB2LyNoVEy6jZTZ66GZL4ousBxGA1EeiEV5vCWyH2Wkq",5:"QmPi7kuiRLD2rV854AV8gfMYchQhamxcp4X16phnyzdPLR",6:"QmdrhhjL2R49SYdwdPF3eEVU1GHDSdJ4Ykya3jvt7TdRTu",7:"QmXiD3T5erwNAZ5yFYpz3AA2h6FXfPMt7XzKCDrKwJSMDX",8:"QmW4jpn5EnjQx6aCbSAodEhh6BW2UqvZSGvubu2tv4UWCn"},CLAIMED_DAO_TOKENS_BIGMAP_ID="518731",DAO_TOKEN_DECIMALS=1e6,TOKENS=[{name:"TEIA",fa2:"KT1QrtA753MSv8VGxkDrKKyJniG5JtuHHbtV",multiasset:!1,decimals:DAO_TOKEN_DECIMALS,website:void 0},{name:"OBJKT",fa2:"KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",multiasset:!0,decimals:1,website:"https://teia.art/objkt/"},{name:"hDAO",fa2:"KT1AFA2mwNUMNd4SsujE1YYp29vd8BZejyKW",multiasset:!1,decimals:1e6,website:void 0}],SUBJKT_CONTRACT="KT1My1wDZHDGweCrJnQJi3wcFaS67iksirvj",PROXY_FACTORY_CONTRACT="KT1DoyD6kr8yLK8mRBFusyKYJUk2ZxNHKP1N",SIGNING_CONTRACT="KT1BcLnWRziLDNJNRn3phAANKrEBiXhytsMY",SWAP_TYPE_TEIA="TEIA",SWAP_TYPE_HEN="HEN",MAIN_MARKETPLACE_CONTRACT=MARKETPLACE_CONTRACT_TEIA,MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE=SWAP_TYPE_TEIA,BURN_ADDRESS="tz1burnburnburnburnburnburnburjAYjjX",COVER_COMPRESSOR_OPTIONS={quality:.85,maxWidth:1024,maxHeight:1024},THUMBNAIL_COMPRESSOR_OPTIONS={quality:.85,maxWidth:350,maxHeight:350},LICENSE_TYPES={none:"None (All rights reserved)","cc-by-4.0":"CC-BY-4.0 (Attribution)","cc-by-sa-4.0":"CC BY-SA 4.0 (Attribution ShareAlike)","cc-by-nd-4.0":"CC BY-ND 4.0 (Attribution-NoDerivs)","cc-by-nc-4.0":"CC BY-NC 4.0 (Attribution-NonCommercial)","cc-by-nc-sa-4.0":"CC BY-NC-SA 4.0 (Attribution-NonCommercial-ShareAlike)","cc-by-nc-nd-4.0":"CC BY-NC-ND 4.0 (Attribution-NonCommercial-NoDerivs)"},LICENSE_TYPES_OPTIONS=Object.keys(LICENSE_TYPES).map(Xe=>({label:LICENSE_TYPES[Xe],value:Xe})),THEMES={dark:"Dark",light:"Light",kawaii:"Kawaii",aqua:"Aqua",coffee:"Coffee",midnight:"Midnight",grass:"Grass"},THEME_OPTIONS=Object.keys(THEMES).map(Xe=>({label:THEMES[Xe],value:Xe})),LANGUAGES={none:"None",af:"Afrikaans (Afrikaans)",sq:"Albanian (shqipe)",gsw:"Alsatian (Elsässisch)",am:"Amharic (አማርኛ)",ar:"Arabic (العربية)",hy:"Armenian (Հայերեն)",as:"Assamese (অসমীয়া)",az:"Azeri (Azərbaycan­ılı)",ba:"Bashkir (Башҡорт)",eu:"Basque (euskara)",be:"Belarusian (беларуская)",bn:"Bengali (বাংলা)",bs:"Bosnian (bosanski)/босански",br:"Breton (brezhoneg)",bg:"Bulgarian (български)",my:"Burmese (Myanmar)",ca:"Catalan (català)",zh:"Chinese (中文)",co:"Corsican (Corsu)",hr:"Croatian (hrvatski)",cs:"Czech (čeština)",da:"Danish (dansk)",prs:"Dari (درى)",dv:"Divehi (ދިވެހިބަސް)",nl:"Dutch (Nederlands)",en:"English (English)",et:"Estonian (eesti)",fo:"Faroese (føroyskt)",fil:"Filipino (Filipino)",fi:"Finnish (suomi)",fr:"French (français)",fy:"Frisian (Frysk)",gl:"Galician (galego)",ka:"Georgian (ქართული)",de:"German (Deutsch)",el:"Greek (ελληνικά)",kl:"Greenlandic (kalaallisut)",gu:"Gujarati (ગુજરાતી)",ha:"Hausa (Hausa)",he:"Hebrew (עברית)",hi:"Hindi (हिंदी)",hu:"Hungarian (magyar)",is:"Icelandic (íslenska)",ig:"Igbo (Igbo)",id:"Indonesian (Bahasa Indonesia)",iu:"Inuktitut (Inuktitut /ᐃᓄᒃᑎᑐᑦ (ᑲᓇᑕ))",ga:"Irish (Gaeilge)",it:"Italian (italiano)",ja:"Japanese (日本語)",quc:"K'iche (K'iche)",kn:"Kannada (ಕನ್ನಡ)",kk:"Kazakh (Қазащb)",km:"Khmer (ខ្មែរ)",rw:"Kinyarwanda (Kinyarwanda)",sw:"Kiswahili (Kiswahili)",kok:"Konkani (कोंकणी)",ko:"Korean (한국어)",ky:"Kyrgyz (Кыргыз)",lo:"Lao (ລາວ)",lv:"Latvian (latviešu)",lt:"Lithuanian (lietuvių)",dsb:"Lower Sorbian (dolnoserbšćina)",lb:"Luxembourgish (Lëtzebuergesch)",mk:"Macedonian (македонски јазик)",ms:"Malay (Bahasa Malaysia)",ml:"Malayalam (മലയാളം)",mt:"Maltese (Malti)",mi:"Maori (Reo Māori)",arn:"Mapudungun (Mapudungun)",mr:"Marathi (मराठी)",moh:"Mohawk (Kanien'kéha)",mn:"Mongolian (Монгол хэл/ᠮᠤᠨᠭᠭᠤᠯ ᠬᠡᠯᠡ)",ne:"Nepali (नेपाली (नेपाल))",nb:"Norwegian 'Bokmål' (norsk 'bokmål')",no:"Norwegian (norsk)",nn:"Norwegian Nynorsk (norsk (nynorsk))",oc:"Occitan (Occitan)",or:"Oriya (ଓଡ଼ିଆ)",ps:"Pashto (پښتو)",fa:"Persian (فارسى)",pl:"Polish (polski)",pt:"Portuguese (Português)",pa:"Punjabi (ਪੰਜਾਬੀ)",quz:"Quechua (runasimi)",ro:"Romanian (română)",rm:"Romansh (Rumantsch)",ru:"Russian (русский)",smn:"Sami Inari (sämikielâ)",smj:"Sami Lule (julevusámegiella)",se:"Sami Northern (davvisámegiella)",sms:"Sami Skolt (sääm´ǩiõll)",sma:"Sami Southern (åarjelsaemiengiel)e",sa:"Sanskrit (संस्कृत)",gd:"Scottish Gaelic (Gàidhlig)",sr:"Serbian (srpski/српски)",nso:"Sesotho (Sesotho sa Leboa)",tn:"Setswana (Setswana)",si:"Sinhala (සිංහ)",sk:"Slovak (slovenčina)",sl:"Slovenian (slovenski)",es:"Spanish (español)",sv:"Swedish (svenska)",syr:"Syriac (ܣܘܪܝܝܐ)",tg:"Tajik (Тоҷикӣ)",tzm:"Tamazight (Tamazight)",ta:"Tamil (தமிழ்)",tt:"Tatar (Татар)",te:"Telugu (తెలుగు)",th:"Thai (ไทย)",bo:"Tibetan (བོད་ཡིག)",tr:"Turkish (Türkçe)",tk:"Turkmen (türkmençe)",uk:"Ukrainian (українська)",hsb:"Upper (Sorbian) hornjoserbšćina",ur:"Urdu (اُردو)",ug:"Uyghur (ئۇيغۇرچە)",uz:"Uzbek (U'zbek/Ўзбек)",vi:"Vietnamese (Tiếng Việt)",cy:"Welsh (Cymraeg)",wo:"Wolof (Wolof)",sah:"Yakut (саха)",ii:"Yi (ꆈꌠꁱꂷ)",yo:"Yoruba (Yoruba)",xh:"isiXhosa (isiXhosa)",zu:"isiZulu (isiZulu)"},LANGUAGES_OPTIONS=Object.keys(LANGUAGES).map(Xe=>({label:LANGUAGES[Xe],value:Xe})),METADATA_CONTENT_RATING_MATURE="mature",METADATA_ACCESSIBILITY_HAZARDS_PHOTOSENS="flashing",CollaboratorType={CORE_PARTICIPANT:"core_participant"},ossProjects=[{name:"Art4Artists Breadfond",address:"KT1LgnHXu8NVa674xJhSFhnKjrn7v2ZMsu2a"},{name:"Tez4Pal Fundraiser",address:"tz2TfuukrHVoeUqFvcRViPJ2VqL7nEQi7xgW"},{name:"TezQuakeAid Morocco Fundraiser",address:"KT1RwXEP8Sj1UQDHPG4oEjRohBdzG2R7FCpA"},{name:"TezQuakeAid Turkey/Syria Fundraiser",address:"KT1X1jyohFrZyDYWvCPXw9KvWxk2VDwxyg2g"},{name:"Tezos4Iran Fundraiser",address:"KT1KYfj97fpdomqyKsZSBdSVvh9afh93b4Ge"},{name:"SavePakistan Fundraiser",address:"KT1Jpf2TAcZS7QfBraQMBeCxjFhH6kAdDL4z"},{name:"Ukraine Relief Fundraiser",address:"KT1DWnLiUkNtAQDErXxudFEH63JC6mqg3HEx"},{name:"Teia Fountain Donations",address:"KT1EsvmkijLKPQmcJMbjDeKRXdwky1LWvwpG"},{name:"Community Representation/Equity Donations (Multisig)",address:"KT1TGJGjh9oMntcny4J7eVn1NDPgCXimHqss"},{name:"WG3.2 (collab contract dev team)",address:"KT1BBYzfuYjgRdeHJ79vG3fZd8cHW9ueCEcN"},{name:"Processing",address:"tz1aPHze1U5BEEKrGYt3dvY6aAQEeiWm8jjK"},{name:"three.js",address:"tz1ZUohCAkGjp7vPjQcC4VWcpgYZR1t3Si5C"}],collaboratorTemplate={address:"",tezAddress:"",shares:void 0},tipOptions=[1,5,10],createProxySchema=`
(map address (pair (bool %isCore) (nat %share))))
`,teiaSwapSchema=`
(pair (address %marketplaceAddress)
  (pair %params (address %fa2)
    (pair (nat %objkt_id)
      (pair (nat %objkt_amount)
        (pair (mutez %xtz_per_objkt)
          (pair (nat %royalties) (address %creator)))))))
`,teiaCancelSwapSchema=`
(pair (address %marketplaceAddress) (nat %swap_id))
`,rpc_nodes=["https://mainnet.api.tez.ie","https://mainnet.smartpy.io","https://rpc.tzbeta.net","https://mainnet.tezos.marigold.dev","https://rpc.tzkt.io/mainnet","https://mainnet.teia.rocks","https://teia.art/rpc","custom"],defaultValues$1={viewMode:"single",nsfwFriendly:!1,photosensitiveFriendly:!1,startFeed:DEFAULT_START_FEED,zen:!1,theme:"dark",themeDark:"dark",themeLight:"light",rpcNode:rpc_nodes[5],customRpcNode:"",tilted:!1,imgproxy:!0,has_seen_banner:!1},useLocalSettings=create$2()(subscribeWithSelector(persist((Xe,Ke)=>({...defaultValues$1,setHasSeenBanner:Ye=>Xe({has_seen_banner:Ye}),setTilted:Ye=>Xe({tilted:Ye}),setImgproxy:Ye=>Xe({imgproxy:Ye}),toggleViewMode:()=>Xe(Ye=>({viewMode:Ye.viewMode==="single"?"masonry":"single"})),toggleZen:()=>Xe(Ye=>({zen:!Ye.zen})),setZen:Ye=>Xe({zen:Ye}),toggleTheme:()=>Xe(Ye=>({theme:Ye.theme===Ye.themeDark?Ye.themeLight:Ye.themeDark})),setViewMode:Ye=>Xe({viewMode:Ye}),setTheme:(Ye,Je)=>{Xe({theme:Ye}),Je&&Ke().applyTheme(Ye)},applyTheme:Ye=>{document.documentElement.setAttribute("data-theme",Ye)},getRpcNode:()=>{const Ye=Ke().rpcNode;return Ye==="custom"&&Ke().customRpcNode||Ye},setCustomRpcNode:Ye=>{!Ye||typeof Ye!="string"||(Ye.startsWith("http")||(Ye=`https://${Ye}`),Xe({customRpcNode:Ye}))},setRpcNode:async Ye=>{Xe({rpcNode:Ye})},setNsfwFriendly:Ye=>Xe({nsfwFriendly:Ye}),setPhotosensitiveFriendly:Ye=>Xe({photosensitiveFriendly:Ye}),setStartFeed:Ye=>Xe({startFeed:Ye})}),{name:"settings",storage:createJSONStorage(()=>localStorage),version:2,partialize:Xe=>Object.fromEntries(Object.entries(Xe).filter(([Ke])=>Object.keys(defaultValues$1).includes(Ke))),onRehydrateStorage:Xe=>(Ke,Ye)=>{Ye&&console.error("an error happened during hydration",Ye)},migrate:(Xe,Ke)=>(console.debug("migrating settings from version",Ke),Xe.has_seen_banner=!1,Xe)}))),BaseTokenFieldsFragment=`
fragment baseTokenFields on tokens {
  artifact_uri
  display_uri
  thumbnail_uri
  metadata_uri

  artist_address
  artist_profile {
    name
    is_split
  }
  description
  editions
  fa2_address
  listings(where: {status: {_eq: "active"}}, order_by: {price: asc}) {
    amount
    amount_left
    contract_address
    price
    status
    type
  }
  mime_type
  minted_at
  metadata_status
  name
  price
  
  royalties
  royalties_total
 
  royalty_receivers {
    receiver_address
    royalties
  }
  teia_meta {
    accessibility
    content_rating
    is_signed
    preview_uri
  }

  tags {
    tag
  }
  
  token_id
}
`;async function fetchGraphQL(Xe,Ke,Ye){return await(await fetch("https://teztok.teia.rocks/v1/graphql",{method:"POST",body:JSON.stringify({query:Xe,variables:Ye,operationName:Ke})})).json()}const getCollabsForAddress=`query GetCollabs($address: String!) {
  split_contracts: teia_split_contracts(where: {_or: [{administrator_address: {_eq: $address}}, {shareholders: {shareholder_address: {_eq: $address}}}]}) {
    contract_address
    contract_profile {
      name
      metadata {
        data
      }
    }
    administrator_address
    shareholders {
      shareholder_address
      shareholder_profile {
        name
      }
      shares
      holder_type
    }
  }
}`,query_objkt=`
${BaseTokenFieldsFragment}
query objkt($id: String!) {
  tokens_by_pk(fa2_address: "${HEN_CONTRACT_FA2}", token_id: $id) {
    ...baseTokenFields
    artist_profile {
      name
      is_split
      split_contract {
        administrator_address
        shareholders {
          shareholder_address
          shareholder_profile {
            user_address
            name
          }
          holder_type
          shares
        }
      }
    }
    signatures {
      shareholder_address
    }
    rights
    right_uri
    listings(where: {status: {_eq: "active"}}, order_by: {price: asc}) {
      type
      contract_address
      amount
      amount_left
      swap_id
      ask_id
      offer_id
      price
      start_price
      end_price
      seller_address
      seller_profile {
        name
      }
      status
    }
    holdings(where: {amount: {_gt: "0"}}) {
      holder_address
      amount
      holder_profile {
        name
      }
    }
    tags {
      tag
    }
    events(where: { _or: [{ implements: {_eq: "SALE"} }, { type: {_in: ["HEN_MINT", "TEIA_SWAP", "HEN_SWAP", "HEN_SWAP_V2", "VERSUM_SWAP", "FA2_TRANSFER", "OBJKT_ASK", "OBJKT_ASK_V2", "OBJKT_ASK_V3", "OBJKT_ASK_V3_PRE", "OBJKT_ASK_V3_2"]} }]}, order_by: [{level: desc}, {opid: desc}]) {
      timestamp
      implements
      ophash
      id
      type
      price
      amount
      editions
      seller_address
      seller_profile {
        name
      }
      buyer_address
      buyer_profile {
        name
      }
      from_address
      from_profile {
        name
      }
      to_address
      to_profile {
        name
      }
    }
  }
}
`;async function getUser(Xe,Ke="user_address"){var Je;const{data:Ye}=await fetchGraphQL(`
  query addressQuery($addressOrName: String!) {
    teia_users(where: { ${Ke}: {_eq: $addressOrName}}) {
      user_address
      name
      metadata {
        data
      }
    }
  }
  `,"addressQuery",{addressOrName:Xe});return(Je=Ye==null?void 0:Ye.teia_users)!=null&&Je.length?Ye.teia_users[0]:null}async function fetchCollabCreations(Xe,Ke="address"){const{data:Ye}=await fetchGraphQL(`
    ${BaseTokenFieldsFragment}
    query GetCollabCreations($addressOrSubjkt: String!) {
      tokens(where: {${Ke==="address"?"artist_address: {_eq: $addressOrSubjkt}":"artist_profile: {name: {_eq: $addressOrSubjkt }}"}, editions: {_gt: "0"}}, order_by: {token_id: desc}) {
        ...baseTokenFields
        tags {
          tag
        }
      }
      split_contracts: teia_split_contracts(where: {${Ke==="address"?"contract_address: {_eq: $addressOrSubjkt}":"contract_profile: {name: {_eq: $addressOrSubjkt}}"}}) {
        administrator_address
        shareholders {
          shareholder_address
          shareholder_profile {
            name
          }
          holder_type
        }
        contract_address
        contract_profile {
          name
          metadata {
            data
          }
        }
      }
    }`,"GetCollabCreations",{addressOrSubjkt:Xe});return Ye}async function fetchObjktDetails(Xe){const{data:Ke}=await fetchGraphQL(query_objkt,"objkt",{id:Xe});return Ke.tokens_by_pk}const GetUserMetadata=async Xe=>await getTzktData(`/v1/accounts/${Xe}`);async function getTzktData(Xe,Ke={},Ye=!1){const Je="https://api.tzkt.io"+Xe,tt=await axios.get(Je,{params:Ke}).catch(st=>console.log(`The following TzKT query returned an error: ${Je}`,st));return Ye&&console.log(`Executed TzKT query: ${Je}`),tt==null?void 0:tt.data}async function getClaimedDaoTokens(Xe){const Ke=await getTzktData(`/v1/bigmaps/${CLAIMED_DAO_TOKENS_BIGMAP_ID}/keys/${Xe}`);return Ke!=null&&Ke.value?parseInt(Ke.value)/DAO_TOKEN_DECIMALS:0}const teiaSwapLambda=[{prim:"CDR"},{prim:"UNPACK",args:[{prim:"pair",args:[{prim:"address",annots:["%marketplaceAddress"]},{prim:"pair",args:[{prim:"address",annots:["%fa2"]},{prim:"pair",args:[{prim:"nat",annots:["%objkt_id"]},{prim:"pair",args:[{prim:"nat",annots:["%objkt_amount"]},{prim:"pair",args:[{prim:"mutez",annots:["%xtz_per_objkt"]},{prim:"pair",args:[{prim:"nat",annots:["%royalties"]},{prim:"address",annots:["%creator"]}]}]}]}]}],annots:["%params"]}]}]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Unpack failed"}]},{prim:"FAILWITH"}],[]]},{prim:"DUP"},{prim:"CAR"},{prim:"CONTRACT",args:[{prim:"pair",args:[{prim:"address",annots:["%fa2"]},{prim:"pair",args:[{prim:"nat",annots:["%objkt_id"]},{prim:"pair",args:[{prim:"nat",annots:["%objkt_amount"]},{prim:"pair",args:[{prim:"mutez",annots:["%xtz_per_objkt"]},{prim:"pair",args:[{prim:"nat",annots:["%royalties"]},{prim:"address",annots:["%creator"]}]}]}]}]}]}],annots:["%swap"]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Marketplace V3 is not found"}]},{prim:"FAILWITH"}],[]]},{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]},{prim:"DIG",args:[{int:"2"}]},{prim:"CDR"},{prim:"TRANSFER_TOKENS"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"SWAP"},{prim:"CONS"}],Packer$1=new MichelCodecPacker,packData=(Xe,Ke)=>{const Je=new Parser$2().parseData(Ke);if(Je)return{data:new Schema(Je).Encode(Xe),type:Je};throw Error("Cannot pack data",{cause:"invalid schema"})};function createAddOperatorCall(Xe,Ke,Ye,Je){return{kind:OpKind.TRANSACTION,...Xe.methods.update_operators([{add_operator:{operator:Je,token_id:parseFloat(Ke),owner:Ye}}]).toTransferParams({amount:0,mutez:!0,storageLimit:175})}}function createRemoveOperatorCall(Xe,Ke,Ye,Je){return{kind:OpKind.TRANSACTION,...Xe.methods.update_operators([{remove_operator:{operator:Je,token_id:parseFloat(Ke),owner:Ye}}]).toTransferParams({amount:0,mutez:!0,storageLimit:175})}}function createSwapCall(Xe,Ke,Ye,Je,tt,st,rt,it,ot=MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE){if(ot===SWAP_TYPE_TEIA)return{kind:OpKind.TRANSACTION,...Xe.methods.swap(Ke,parseFloat(Ye),tt,st,rt,it).toTransferParams({amount:0,mutez:!0,storageLimit:300})};if(ot===SWAP_TYPE_HEN)return{kind:OpKind.TRANSACTION,...Xe.methods.swap(it,tt,Ye,rt,st).toTransferParams({amount:0,mutez:!0,storageLimit:300})};throw Error("Invalid Swap Type",{cause:"Requested swap is neither a Teia or HEN swap"})}function createSwapCalls(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt=MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE){return[createAddOperatorCall(Xe,tt,st,Je),createSwapCall(Ke,Ye,tt,st,rt,it,ot,at,lt),createRemoveOperatorCall(Xe,tt,st,Je)]}async function createLambdaSwapCall(Xe,Ke,Ye,Je,tt,st,rt,it,ot){const at={marketplaceAddress:Ke,params:{fa2:Ye,objkt_id:parseFloat(Je),objkt_amount:st,royalties:it,xtz_per_objkt:rt,creator:ot}},lt=packData(at,teiaSwapSchema),{packed:ut}=await Packer$1.packData(lt);return{kind:OpKind.TRANSACTION,...Xe.methods.execute(teiaSwapLambda,ut).toTransferParams({amount:0,mutez:!0,storageLimit:300})}}const teiaCancelSwapLambda=[{prim:"CDR"},{prim:"UNPACK",args:[{prim:"pair",args:[{prim:"address",annots:["%marketplaceAddress"]},{prim:"nat",annots:["%swap_id"]}]}]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Unpack failed"}]},{prim:"FAILWITH"}],[]]},{prim:"DUP"},{prim:"CAR"},{prim:"CONTRACT",args:[{prim:"nat"}],annots:["%cancel_swap"]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Marketplace V3 is not found"}]},{prim:"FAILWITH"}],[]]},{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]},{prim:"DIG",args:[{int:"2"}]},{prim:"CDR"},{prim:"TRANSFER_TOKENS"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"SWAP"},{prim:"CONS"}],Tezos=new TezosToolkit(useLocalSettings.getState().getRpcNode()),Packer=new MichelCodecPacker,wallet=new BeaconWallet({name:"teia.art",appUrl:"https://teia.art",iconUrl:"https://teia.art/icons/android-chrome-512x512.png",preferredNetwork:NetworkType.MAINNET,network:{type:NetworkType.MAINNET,rpcUrl:useLocalSettings.getState().getRpcNode()}});Tezos.setWalletProvider(wallet);let current;wallet.client.subscribeToEvent(BeaconEvent.ACTIVE_ACCOUNT_SET,async Xe=>{console.log(`${BeaconEvent.ACTIVE_ACCOUNT_SET} triggered: `,Xe==null?void 0:Xe.address),Xe&&(current=Xe.address)});const useUserStore=create$2()(subscribeWithSelector(persist((Xe,Ke)=>({address:void 0,proxyAddress:void 0,proxyName:void 0,subjktInfo:void 0,handleOp:async(Ye,Je,tt)=>{const st=useModalStore.getState().step,rt=useModalStore.getState().show,it=useModalStore.getState().showError,ot=setTimeout(()=>{rt(Je,"Something seems to hang, did you abort the transaction?")},15e3),at=await Ye.send(tt);clearTimeout(ot);try{st(Je,`Awaiting for confirmation of the [operation](https://tzkt.io/${at.opHash})
              *closing this dialog has no effect on the transaction*`),useModalStore.setState({confirm:!0});const lt=await at.confirmation();return rt(lt.completed?`${Je} Successful`:`${Je} Error`,`[see on tzkt.io](https://tzkt.io/${at.opHash})`),at.opHash}catch(lt){it("Transfer",lt)}},sync:async Ye=>{await wallet.client.requestPermissions();const Je=await getUser(current);return console.log("getting user info",Je),Xe({address:current,userInfo:await getUser(current)}),current},unsync:async()=>{await wallet.client.clearActiveAccount(),Xe({address:void 0,userInfo:void 0,proxyAddress:void 0,proxyName:void 0})},setAccount:async()=>{const Ye=Tezos!==void 0?await wallet.client.getActiveAccount():void 0;Ye!=null&&Ye.address&&Xe({userInfo:await getUser(Ye.address,"user_address"),address:Ye.address})},getBalance:async Ye=>{if(Ye)return(await Tezos.tz.getBalance(Ye)).toNumber();const Je=Ke().address,tt=Ke().proxyAddress;return Je?(await Tezos.tz.getBalance(tt||Je)).toNumber():-1},resetProxy:()=>Xe({proxyAddress:void 0,proxyName:void 0}),registry:async(Ye,Je)=>{const tt=Ke().handleOp,st=Ke().proxyAddress||SUBJKT_CONTRACT,it=(await Tezos.wallet.at(st)).methods.registry(`ipfs://${Je}`.split("").reduce((ot,at)=>ot+=at.charCodeAt(0).toString(16).padStart(2,"0"),""),Ye.split("").reduce((ot,at)=>ot+=at.charCodeAt(0).toString(16).padStart(2,"0"),""));return await tt(it,"Editing Profile",{amount:0})},swap:async(Ye,Je,tt,st,rt,it)=>{const{proxyAddress:ot,handleOp:at}=Ke(),lt=useModalStore.getState().showError,ut=useModalStore.getState().step;if(ut("Swap","Preparing swap",!0),ot){const vt=await Tezos.wallet.at(ot),At=await createLambdaSwapCall(vt,MAIN_MARKETPLACE_CONTRACT,HEN_CONTRACT_FA2,st,ot,it,tt,Je,rt),Et=[createAddOperatorCall(vt,st,ot,MAIN_MARKETPLACE_CONTRACT),At,createRemoveOperatorCall(vt,st,ot,MAIN_MARKETPLACE_CONTRACT)],wt=Tezos.wallet.batch(Et);return await at(wt,"Swap")}const ht=HEN_CONTRACT_FA2,[pt,ft]=await Promise.all([Tezos.wallet.at(ht),Tezos.wallet.at(MAIN_MARKETPLACE_CONTRACT)]),xt=createSwapCalls(pt,ft,ht,MAIN_MARKETPLACE_CONTRACT,st,Ye,it,tt,Je,rt,MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE);try{const vt=Tezos.wallet.batch(xt);return await at(vt,"Swap")}catch(vt){lt("Swap",vt)}},burn:async(Ye,Je)=>{const{proxyAddress:tt,handleOp:st}=Ke(),rt=useModalStore.getState().step;rt("Burn",`Burning ${Je} edition of OBJKT #${Ye}`,!0);const it=await wallet.client.getActiveAccount(),ot=tt||HEN_CONTRACT_FA2,at=tt||(it==null?void 0:it.address);console.debug("Using",ot,"for burn");const ut=(await Tezos.wallet.at(ot)).methods.transfer([{from_:at,txs:[{to_:BURN_ADDRESS,token_id:parseInt(Ye),amount:Je}]}]);return await st(ut,"Burn")},transfer:async Ye=>{const Je=Ke().handleOp,tt=useModalStore.getState().showError,st=useModalStore.getState().step;st("Transferring tokens","Waiting for confirmation",!0);const{proxyAddress:rt,address:it}=Ke(),ot=rt||HEN_CONTRACT_FA2;try{const lt=(await Tezos.wallet.at(ot)).methods.transfer([{from_:rt||it,txs:Ye}]);return await Je(lt,"Transfer")}catch(at){tt("Transfer",at)}},donate:async(Ye,Je)=>{const tt=Ke().handleOp,st=useModalStore.getState().showError,rt=useModalStore.getState().show;(isNaN(Ye)||Ye<=0)&&rt("Invalid amount","Please enter a valid donation amount");try{await Ke().sync();const it=[{to:Je,amount:Ye,kind:OpKind.TRANSACTION}];return await tt(Tezos.wallet.batch(it),"Donate")}catch(it){st("Donate",it)}},collect:async Ye=>{const Je=Ke().handleOp,tt=useModalStore.getState().show,st=useModalStore.getState().showError;let rt;try{if(["HEN_SWAP_V2","TEIA_SWAP"].includes(Ye.type)?rt=(await Tezos.wallet.at(Ye.contract_address)).methods.collect(parseInt(Ye.swap_id)):["OBJKT_ASK","OBJKT_ASK_V2"].includes(Ye.type)?rt=(await Tezos.wallet.at(Ye.contract_address)).methods.fulfill_ask(Ye.ask_id):["OBJKT_ASK_V3","OBJKT_ASK_V3_PRE","OBJKT_ASK_V3_2"].includes(Ye.type)?rt=(await Tezos.wallet.at(Ye.contract_address)).methods.fulfill_ask(Ye.ask_id,1,null,null,MichelsonMap.fromLiteral({})):["VERSUM_SWAP"].includes(Ye.type)&&(rt=(await Tezos.wallet.at(Ye.contract_address)).methods.collect_swap("1",Ye.swap_id)),rt)return await Je(rt,"Collect",{amount:parseInt(Ye.price),mutez:!0,storageLimit:350});tt("Collect Error","unsupported listing")}catch(it){st("Collect",it)}},cancelV1:async Ye=>await Tezos.wallet.at(MARKETPLACE_CONTRACT_V1).then(Je=>Je.methods.cancel_swap(parseFloat(Ye)).send({amount:0,storageLimit:310})).catch(Je=>Je),cancel:async(Ye,Je)=>{const{proxyAddress:tt,handleOp:st}=Ke(),rt=useModalStore.getState().step;if(rt("Cancel Swap","Waiting for wallet",!0),tt&&Ye===MARKETPLACE_CONTRACT_TEIA){const ut=packData({marketplaceAddress:Ye,swap_id:Je},teiaCancelSwapSchema),{packed:ht}=await Packer.packData(ut),ft=(await Tezos.wallet.at(tt)).methods.execute(teiaCancelSwapLambda,ht);return st(ft,"Cancel Swap",{amount:0,storageLimit:310})}const at=(await Tezos.wallet.at(tt||Ye)).methods.cancel_swap(Je);return st(at,"Cancel Swap",{amount:0,storageLimit:310})},reswap:async(Ye,Je,tt)=>{const{proxyAddress:st,handleOp:rt}=Ke(),it=useModalStore.getState().step,ot=useModalStore.getState().showError,at=useModalStore.getState().show;it("Reswapping",`reswapping ${Ye.token_id} for ${Je/1e6}tz`,!0),console.debug({nft:Ye,price:Je,swap:tt});const lt=Ye.token_id,ut=Ye.artist_address,ht=tt.seller_address;if(st){at("Reswap","reswapping is not yet supported in collab mode");return}const[pt,ft,xt]=await Promise.all([Tezos.wallet.at(HEN_CONTRACT_FA2),Tezos.wallet.at(tt.contract_address),Tezos.wallet.at(MAIN_MARKETPLACE_CONTRACT)]),vt=ft,At=[{kind:OpKind.TRANSACTION,...vt.methods.cancel_swap(tt.swap_id).toTransferParams({amount:0,mutez:!0,storageLimit:310})},...createSwapCalls(pt,xt,HEN_CONTRACT_FA2,MAIN_MARKETPLACE_CONTRACT,lt,ht,tt.amount_left,Je,Ye.royalties_total/1e3,ut,MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE)];console.debug(At);try{const Et=Tezos.wallet.batch(At);return await rt(Et,"Reswap")}catch(Et){ot("Reswap",Et)}},mint:async(Ye,Je,tt,st)=>{const rt=Ke().handleOp,it=useModalStore.getState().step,{proxyAddress:ot}=Ke();console.debug("CID",tt),it("Mint","minting OBJKT",!0);const lt=(await Tezos.wallet.at(ot||MARKETPLACE_CONTRACT_V1)).methods.mint_OBJKT(Ye,Je,`ipfs://${tt}`.split("").reduce((ut,ht)=>ut+=ht.charCodeAt(0).toString(16).padStart(2,"0"),""),st*10);return await rt(lt,"Mint",{amount:0,storageLimit:310})}}),{name:"user",storage:createJSONStorage(()=>localStorage)}))),MenuItem=({label:Xe,route:Ke,need_sync:Ye,className:Je})=>{Xe=Xe||capitalizeFirstLetter(Ke);const tt=useUserStore(rt=>rt.address),st=useModalStore(rt=>rt.setCollapsed);return jsxRuntimeExports.jsx(Button,{className:`${Ye&&!tt?styles$10.disabled:""} ${Je||""} `,to:Ye&&!tt?"/sync":`/${Ke}`,state:Ye&&tt?`/${Ke}`:null,onTo:()=>st(!0),children:Xe})},base_toggle="_base_toggle_17ekr_216",box_toggle="_box_toggle_17ekr_225",toggled="_toggled_17ekr_236",minimal_toggle="_minimal_toggle_17ekr_241",styles$$={base_toggle,box_toggle,toggled,minimal_toggle},useControlled=(Xe,Ke)=>{const Ye=reactExports.useRef(!1);Ye.current=Xe!==void 0;const[Je,tt]=reactExports.useState(Ke),st=Ye.current?Xe:Je,rt=reactExports.useCallback(it=>{Ye.current||tt(it)},[Ye]);return[st,rt,Ye.current]},Toggle=({label:Xe,initial:Ke,toggled:Ye,style:Je={},alt:tt,box:st,onToggle:rt,className:it})=>{const[ot,at]=useControlled(Ye,Ke),lt=reactExports.useCallback(ht=>{const{checked:pt}=ht.target;at(pt),rt==null||rt(pt)},[at,rt]),ut=classNames$1({[styles$$.base_toggle]:!0,[styles$$.box_toggle]:st,[styles$$.toggled]:ot,className:it});return jsxRuntimeExports.jsxs("label",{style:Je,className:ut,children:[jsxRuntimeExports.jsx("input",{defaultChecked:Ke,checked:Ye,"aria-label":tt||(typeof Xe=="string"?Xe:"icon-toggle"),"aria-checked":ot,type:"checkbox",onChange:lt}),Xe]})},IconToggle=({icon:Xe,toggled:Ke,alt:Ye,onClick:Je})=>{const tt=classNames$1({[styles$$.base_toggle]:!0,[styles$$.minimal_toggle]:!0,[styles$$.toggled]:Ke});return jsxRuntimeExports.jsx(Button,{onClick:Je,alt:Ye,className:tt,children:Xe})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __awaiter(Xe,Ke,Ye,Je){function tt(st){return st instanceof Ye?st:new Ye(function(rt){rt(st)})}return new(Ye||(Ye=Promise))(function(st,rt){function it(lt){try{at(Je.next(lt))}catch(ut){rt(ut)}}function ot(lt){try{at(Je.throw(lt))}catch(ut){rt(ut)}}function at(lt){lt.done?st(lt.value):tt(lt.value).then(it,ot)}at((Je=Je.apply(Xe,[])).next())})}function __generator(Xe,Ke){var Ye={label:0,sent:function(){if(st[0]&1)throw st[1];return st[1]},trys:[],ops:[]},Je,tt,st,rt;return rt={next:it(0),throw:it(1),return:it(2)},typeof Symbol=="function"&&(rt[Symbol.iterator]=function(){return this}),rt;function it(at){return function(lt){return ot([at,lt])}}function ot(at){if(Je)throw new TypeError("Generator is already executing.");for(;Ye;)try{if(Je=1,tt&&(st=at[0]&2?tt.return:at[0]?tt.throw||((st=tt.return)&&st.call(tt),0):tt.next)&&!(st=st.call(tt,at[1])).done)return st;switch(tt=0,st&&(at=[at[0]&2,st.value]),at[0]){case 0:case 1:st=at;break;case 4:return Ye.label++,{value:at[1],done:!1};case 5:Ye.label++,tt=at[1],at=[0];continue;case 7:at=Ye.ops.pop(),Ye.trys.pop();continue;default:if(st=Ye.trys,!(st=st.length>0&&st[st.length-1])&&(at[0]===6||at[0]===2)){Ye=0;continue}if(at[0]===3&&(!st||at[1]>st[0]&&at[1]<st[3])){Ye.label=at[1];break}if(at[0]===6&&Ye.label<st[1]){Ye.label=st[1],st=at;break}if(st&&Ye.label<st[2]){Ye.label=st[2],Ye.ops.push(at);break}st[2]&&Ye.ops.pop(),Ye.trys.pop();continue}at=Ke.call(Xe,Ye)}catch(lt){at=[6,lt],tt=0}finally{Je=st=0}if(at[0]&5)throw at[1];return{value:at[0]?at[1]:void 0,done:!0}}}var noop$4=function(){},UNDEFINED=noop$4(),OBJECT=Object,isUndefined$1=function(Xe){return Xe===UNDEFINED},isFunction$6=function(Xe){return typeof Xe=="function"},mergeObjects=function(Xe,Ke){return OBJECT.assign({},Xe,Ke)},STR_UNDEFINED="undefined",hasWindow=function(){return typeof window!=STR_UNDEFINED},hasDocument=function(){return typeof document!=STR_UNDEFINED},hasRequestAnimationFrame=function(){return hasWindow()&&typeof window.requestAnimationFrame!=STR_UNDEFINED},table$1=new WeakMap,counter=0,stableHash=function(Xe){var Ke=typeof Xe,Ye=Xe&&Xe.constructor,Je=Ye==Date,tt,st;if(OBJECT(Xe)===Xe&&!Je&&Ye!=RegExp){if(tt=table$1.get(Xe),tt)return tt;if(tt=++counter+"~",table$1.set(Xe,tt),Ye==Array){for(tt="@",st=0;st<Xe.length;st++)tt+=stableHash(Xe[st])+",";table$1.set(Xe,tt)}if(Ye==OBJECT){tt="#";for(var rt=OBJECT.keys(Xe).sort();!isUndefined$1(st=rt.pop());)isUndefined$1(Xe[st])||(tt+=st+":"+stableHash(Xe[st])+",");table$1.set(Xe,tt)}}else tt=Je?Xe.toJSON():Ke=="symbol"?Xe.toString():Ke=="string"?JSON.stringify(Xe):""+Xe;return tt},online=!0,isOnline=function(){return online},hasWin=hasWindow(),hasDoc=hasDocument(),onWindowEvent=hasWin&&window.addEventListener?window.addEventListener.bind(window):noop$4,onDocumentEvent=hasDoc?document.addEventListener.bind(document):noop$4,offWindowEvent=hasWin&&window.removeEventListener?window.removeEventListener.bind(window):noop$4,offDocumentEvent=hasDoc?document.removeEventListener.bind(document):noop$4,isVisible=function(){var Xe=hasDoc&&document.visibilityState;return isUndefined$1(Xe)||Xe!=="hidden"},initFocus=function(Xe){return onDocumentEvent("visibilitychange",Xe),onWindowEvent("focus",Xe),function(){offDocumentEvent("visibilitychange",Xe),offWindowEvent("focus",Xe)}},initReconnect=function(Xe){var Ke=function(){online=!0,Xe()},Ye=function(){online=!1};return onWindowEvent("online",Ke),onWindowEvent("offline",Ye),function(){offWindowEvent("online",Ke),offWindowEvent("offline",Ye)}},preset={isOnline,isVisible},defaultConfigOptions={initFocus,initReconnect},IS_SERVER=!hasWindow()||"Deno"in window,rAF=function(Xe){return hasRequestAnimationFrame()?window.requestAnimationFrame(Xe):setTimeout(Xe,1)},useIsomorphicLayoutEffect=IS_SERVER?reactExports.useEffect:reactExports.useLayoutEffect,navigatorConnection=typeof navigator<"u"&&navigator.connection,slowConnection=!IS_SERVER&&navigatorConnection&&(["slow-2g","2g"].includes(navigatorConnection.effectiveType)||navigatorConnection.saveData),serialize$1=function(Xe){if(isFunction$6(Xe))try{Xe=Xe()}catch{Xe=""}var Ke=[].concat(Xe);Xe=typeof Xe=="string"?Xe:(Array.isArray(Xe)?Xe.length:Xe)?stableHash(Xe):"";var Ye=Xe?"$swr$"+Xe:"";return[Xe,Ke,Ye]},SWRGlobalState=new WeakMap,FOCUS_EVENT=0,RECONNECT_EVENT=1,MUTATE_EVENT=2,broadcastState=function(Xe,Ke,Ye,Je,tt,st,rt){rt===void 0&&(rt=!0);var it=SWRGlobalState.get(Xe),ot=it[0],at=it[1],lt=it[3],ut=ot[Ke],ht=at[Ke];if(rt&&ht)for(var pt=0;pt<ht.length;++pt)ht[pt](Ye,Je,tt);return st&&(delete lt[Ke],ut&&ut[0])?ut[0](MUTATE_EVENT).then(function(){return Xe.get(Ke)}):Xe.get(Ke)},__timestamp=0,getTimestamp=function(){return++__timestamp},internalMutate=function(){for(var Xe=[],Ke=0;Ke<arguments.length;Ke++)Xe[Ke]=arguments[Ke];return __awaiter(void 0,void 0,void 0,function(){var Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht,pt,ft,xt,vt,At,Et,wt,_t,Ct,Tt;return __generator(this,function(St){switch(St.label){case 0:if(Ye=Xe[0],Je=Xe[1],tt=Xe[2],st=Xe[3],rt=typeof st=="boolean"?{revalidate:st}:st||{},it=isUndefined$1(rt.populateCache)?!0:rt.populateCache,ot=rt.revalidate!==!1,at=rt.rollbackOnError!==!1,lt=rt.optimisticData,ut=serialize$1(Je),ht=ut[0],pt=ut[2],!ht)return[2];if(ft=SWRGlobalState.get(Ye),xt=ft[2],Xe.length<3)return[2,broadcastState(Ye,ht,Ye.get(ht),UNDEFINED,UNDEFINED,ot,!0)];if(vt=tt,Et=getTimestamp(),xt[ht]=[Et,0],wt=!isUndefined$1(lt),_t=Ye.get(ht),wt&&(Ct=isFunction$6(lt)?lt(_t):lt,Ye.set(ht,Ct),broadcastState(Ye,ht,Ct)),isFunction$6(vt))try{vt=vt(Ye.get(ht))}catch(Rt){At=Rt}return vt&&isFunction$6(vt.then)?[4,vt.catch(function(Rt){At=Rt})]:[3,2];case 1:if(vt=St.sent(),Et!==xt[ht][0]){if(At)throw At;return[2,vt]}else At&&wt&&at&&(it=!0,vt=_t,Ye.set(ht,_t));St.label=2;case 2:return it&&(At||(isFunction$6(it)&&(vt=it(vt,_t)),Ye.set(ht,vt)),Ye.set(pt,mergeObjects(Ye.get(pt),{error:At}))),xt[ht][1]=getTimestamp(),[4,broadcastState(Ye,ht,vt,At,UNDEFINED,ot,!!it)];case 3:if(Tt=St.sent(),At)throw At;return[2,it?Tt:vt]}})})},revalidateAllKeys=function(Xe,Ke){for(var Ye in Xe)Xe[Ye][0]&&Xe[Ye][0](Ke)},initCache=function(Xe,Ke){if(!SWRGlobalState.has(Xe)){var Ye=mergeObjects(defaultConfigOptions,Ke),Je={},tt=internalMutate.bind(UNDEFINED,Xe),st=noop$4;if(SWRGlobalState.set(Xe,[Je,{},{},{},tt]),!IS_SERVER){var rt=Ye.initFocus(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,Je,FOCUS_EVENT))),it=Ye.initReconnect(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,Je,RECONNECT_EVENT)));st=function(){rt&&rt(),it&&it(),SWRGlobalState.delete(Xe)}}return[Xe,tt,st]}return[Xe,SWRGlobalState.get(Xe)[4]]},onErrorRetry=function(Xe,Ke,Ye,Je,tt){var st=Ye.errorRetryCount,rt=tt.retryCount,it=~~((Math.random()+.5)*(1<<(rt<8?rt:8)))*Ye.errorRetryInterval;!isUndefined$1(st)&&rt>st||setTimeout(Je,it,tt)},_a$b=initCache(new Map),cache$2=_a$b[0],mutate=_a$b[1],defaultConfig=mergeObjects({onLoadingSlow:noop$4,onSuccess:noop$4,onError:noop$4,onErrorRetry,onDiscarded:noop$4,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:slowConnection?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:slowConnection?5e3:3e3,compare:function(Xe,Ke){return stableHash(Xe)==stableHash(Ke)},isPaused:function(){return!1},cache:cache$2,mutate,fallback:{}},preset),mergeConfigs=function(Xe,Ke){var Ye=mergeObjects(Xe,Ke);if(Ke){var Je=Xe.use,tt=Xe.fallback,st=Ke.use,rt=Ke.fallback;Je&&st&&(Ye.use=Je.concat(st)),tt&&rt&&(Ye.fallback=mergeObjects(tt,rt))}return Ye},SWRConfigContext=reactExports.createContext({}),useStateWithDeps=function(Xe,Ke){var Ye=reactExports.useState({})[1],Je=reactExports.useRef(Xe),tt=reactExports.useRef({data:!1,error:!1,isValidating:!1}),st=reactExports.useCallback(function(rt){var it=!1,ot=Je.current;for(var at in rt){var lt=at;ot[lt]!==rt[lt]&&(ot[lt]=rt[lt],tt.current[lt]&&(it=!0))}it&&!Ke.current&&Ye({})},[]);return useIsomorphicLayoutEffect(function(){Je.current=Xe}),[Je,tt.current,st]},normalize=function(Xe){return isFunction$6(Xe[1])?[Xe[0],Xe[1],Xe[2]||{}]:[Xe[0],null,(Xe[1]===null?Xe[2]:Xe[1])||{}]},useSWRConfig=function(){return mergeObjects(defaultConfig,reactExports.useContext(SWRConfigContext))},withArgs=function(Xe){return function(){for(var Ye=[],Je=0;Je<arguments.length;Je++)Ye[Je]=arguments[Je];var tt=useSWRConfig(),st=normalize(Ye),rt=st[0],it=st[1],ot=st[2],at=mergeConfigs(tt,ot),lt=Xe,ut=at.use;if(ut)for(var ht=ut.length;ht-- >0;)lt=ut[ht](lt);return lt(rt,it||at.fetcher,at)}},subscribeCallback=function(Xe,Ke,Ye){var Je=Ke[Xe]||(Ke[Xe]=[]);return Je.push(Ye),function(){var tt=Je.indexOf(Ye);tt>=0&&(Je[tt]=Je[Je.length-1],Je.pop())}},WITH_DEDUPE={dedupe:!0},useSWRHandler=function(Xe,Ke,Ye){var Je=Ye.cache,tt=Ye.compare,st=Ye.fallbackData,rt=Ye.suspense,it=Ye.revalidateOnMount,ot=Ye.refreshInterval,at=Ye.refreshWhenHidden,lt=Ye.refreshWhenOffline,ut=SWRGlobalState.get(Je),ht=ut[0],pt=ut[1],ft=ut[2],xt=ut[3],vt=serialize$1(Xe),At=vt[0],Et=vt[1],wt=vt[2],_t=reactExports.useRef(!1),Ct=reactExports.useRef(!1),Tt=reactExports.useRef(At),St=reactExports.useRef(Ke),Rt=reactExports.useRef(Ye),Nt=function(){return Rt.current},Pt=function(){return Nt().isVisible()&&Nt().isOnline()},Bt=function(dn){return Je.set(wt,mergeObjects(Je.get(wt),dn))},Lt=Je.get(At),zt=isUndefined$1(st)?Ye.fallback[At]:st,Dt=isUndefined$1(Lt)?zt:Lt,Vt=Je.get(wt)||{},Gt=Vt.error,Qt=!_t.current,jt=function(){return Qt&&!isUndefined$1(it)?it:Nt().isPaused()?!1:rt?isUndefined$1(Dt)?!1:Ye.revalidateIfStale:isUndefined$1(Dt)||Ye.revalidateIfStale},Ht=function(){return!At||!Ke?!1:Vt.isValidating?!0:Qt&&jt()},Yt=Ht(),Jt=useStateWithDeps({data:Dt,error:Gt,isValidating:Yt},Ct),Zt=Jt[0],nn=Jt[1],cn=Jt[2],an=reactExports.useCallback(function(dn){return __awaiter(void 0,void 0,void 0,function(){var fn,Sn,Tn,Nn,gn,_n,kn,Wt,sn,hn,En,An,wn;return __generator(this,function(Fn){switch(Fn.label){case 0:if(fn=St.current,!At||!fn||Ct.current||Nt().isPaused())return[2,!1];Nn=!0,gn=dn||{},_n=!xt[At]||!gn.dedupe,kn=function(){return!Ct.current&&At===Tt.current&&_t.current},Wt=function(){var Hn=xt[At];Hn&&Hn[1]===Tn&&delete xt[At]},sn={isValidating:!1},hn=function(){Bt({isValidating:!1}),kn()&&cn(sn)},Bt({isValidating:!0}),cn({isValidating:!0}),Fn.label=1;case 1:return Fn.trys.push([1,3,,4]),_n&&(broadcastState(Je,At,Zt.current.data,Zt.current.error,!0),Ye.loadingTimeout&&!Je.get(At)&&setTimeout(function(){Nn&&kn()&&Nt().onLoadingSlow(At,Ye)},Ye.loadingTimeout),xt[At]=[fn.apply(void 0,Et),getTimestamp()]),wn=xt[At],Sn=wn[0],Tn=wn[1],[4,Sn];case 2:return Sn=Fn.sent(),_n&&setTimeout(Wt,Ye.dedupingInterval),!xt[At]||xt[At][1]!==Tn?(_n&&kn()&&Nt().onDiscarded(At),[2,!1]):(Bt({error:UNDEFINED}),sn.error=UNDEFINED,En=ft[At],!isUndefined$1(En)&&(Tn<=En[0]||Tn<=En[1]||En[1]===0)?(hn(),_n&&kn()&&Nt().onDiscarded(At),[2,!1]):(tt(Zt.current.data,Sn)?sn.data=Zt.current.data:sn.data=Sn,tt(Je.get(At),Sn)||Je.set(At,Sn),_n&&kn()&&Nt().onSuccess(Sn,At,Ye),[3,4]));case 3:return An=Fn.sent(),Wt(),Nt().isPaused()||(Bt({error:An}),sn.error=An,_n&&kn()&&(Nt().onError(An,At,Ye),(typeof Ye.shouldRetryOnError=="boolean"&&Ye.shouldRetryOnError||isFunction$6(Ye.shouldRetryOnError)&&Ye.shouldRetryOnError(An))&&Pt()&&Nt().onErrorRetry(An,At,Ye,an,{retryCount:(gn.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return Nn=!1,hn(),kn()&&_n&&broadcastState(Je,At,sn.data,sn.error,!1),[2,!0]}})})},[At]),mn=reactExports.useCallback(internalMutate.bind(UNDEFINED,Je,function(){return Tt.current}),[]);if(useIsomorphicLayoutEffect(function(){St.current=Ke,Rt.current=Ye}),useIsomorphicLayoutEffect(function(){if(At){var dn=At!==Tt.current,fn=an.bind(UNDEFINED,WITH_DEDUPE),Sn=function(kn,Wt,sn){cn(mergeObjects({error:Wt,isValidating:sn},tt(Zt.current.data,kn)?UNDEFINED:{data:kn}))},Tn=0,Nn=function(kn){if(kn==FOCUS_EVENT){var Wt=Date.now();Nt().revalidateOnFocus&&Wt>Tn&&Pt()&&(Tn=Wt+Nt().focusThrottleInterval,fn())}else if(kn==RECONNECT_EVENT)Nt().revalidateOnReconnect&&Pt()&&fn();else if(kn==MUTATE_EVENT)return an()},gn=subscribeCallback(At,pt,Sn),_n=subscribeCallback(At,ht,Nn);return Ct.current=!1,Tt.current=At,_t.current=!0,dn&&cn({data:Dt,error:Gt,isValidating:Yt}),jt()&&(isUndefined$1(Dt)||IS_SERVER?fn():rAF(fn)),function(){Ct.current=!0,gn(),_n()}}},[At,an]),useIsomorphicLayoutEffect(function(){var dn;function fn(){var Tn=isFunction$6(ot)?ot(Dt):ot;Tn&&dn!==-1&&(dn=setTimeout(Sn,Tn))}function Sn(){!Zt.current.error&&(at||Nt().isVisible())&&(lt||Nt().isOnline())?an(WITH_DEDUPE).then(fn):fn()}return fn(),function(){dn&&(clearTimeout(dn),dn=-1)}},[ot,at,lt,an]),reactExports.useDebugValue(Dt),rt&&isUndefined$1(Dt)&&At)throw St.current=Ke,Rt.current=Ye,Ct.current=!1,isUndefined$1(Gt)?an(WITH_DEDUPE):Gt;return{mutate:mn,get data(){return nn.data=!0,Dt},get error(){return nn.error=!0,Gt},get isValidating(){return nn.isValidating=!0,Yt}}},useSWR=withArgs(useSWRHandler);function arrayPush$2(Xe,Ke){for(var Ye=-1,Je=Ke.length,tt=Xe.length;++Ye<Je;)Xe[tt+Ye]=Ke[Ye];return Xe}var _arrayPush=arrayPush$2,freeGlobal$1=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$6=root$8.Symbol,_Symbol=Symbol$6,Symbol$5=_Symbol,objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty,nativeObjectToString$1=objectProto$b.toString,symToStringTag$1=Symbol$5?Symbol$5.toStringTag:void 0;function getRawTag$1(Xe){var Ke=hasOwnProperty$9.call(Xe,symToStringTag$1),Ye=Xe[symToStringTag$1];try{Xe[symToStringTag$1]=void 0;var Je=!0}catch{}var tt=nativeObjectToString$1.call(Xe);return Je&&(Ke?Xe[symToStringTag$1]=Ye:delete Xe[symToStringTag$1]),tt}var _getRawTag=getRawTag$1,objectProto$a=Object.prototype,nativeObjectToString=objectProto$a.toString;function objectToString$1(Xe){return nativeObjectToString.call(Xe)}var _objectToString=objectToString$1,Symbol$4=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$4?Symbol$4.toStringTag:void 0;function baseGetTag$6(Xe){return Xe==null?Xe===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(Xe)?getRawTag(Xe):objectToString(Xe)}var _baseGetTag=baseGetTag$6;function isObjectLike$7(Xe){return Xe!=null&&typeof Xe=="object"}var isObjectLike_1=isObjectLike$7,baseGetTag$5=_baseGetTag,isObjectLike$6=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(Xe){return isObjectLike$6(Xe)&&baseGetTag$5(Xe)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$5=isObjectLike_1,objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty,propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable,isArguments$3=baseIsArguments((function(){return arguments})())?baseIsArguments:function(Xe){return isObjectLike$5(Xe)&&hasOwnProperty$8.call(Xe,"callee")&&!propertyIsEnumerable$1.call(Xe,"callee")},isArguments_1=isArguments$3,isArray$d=Array.isArray,isArray_1=isArray$d,Symbol$3=_Symbol,isArguments$2=isArguments_1,isArray$c=isArray_1,spreadableSymbol=Symbol$3?Symbol$3.isConcatSpreadable:void 0;function isFlattenable$1(Xe){return isArray$c(Xe)||isArguments$2(Xe)||!!(spreadableSymbol&&Xe&&Xe[spreadableSymbol])}var _isFlattenable=isFlattenable$1,arrayPush$1=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$1(Xe,Ke,Ye,Je,tt){var st=-1,rt=Xe.length;for(Ye||(Ye=isFlattenable),tt||(tt=[]);++st<rt;){var it=Xe[st];Ke>0&&Ye(it)?Ke>1?baseFlatten$1(it,Ke-1,Ye,Je,tt):arrayPush$1(tt,it):Je||(tt[tt.length]=it)}return tt}var _baseFlatten=baseFlatten$1,baseFlatten=_baseFlatten;function flatten$3(Xe){var Ke=Xe==null?0:Xe.length;return Ke?baseFlatten(Xe,1):[]}var flatten_1=flatten$3;const flatten$4=getDefaultExportFromCjs(flatten_1);function shuffleLogos(Xe){const Ke=[...Xe];let Ye=Ke.length,Je,tt;const st=new Date(Date.now());let rt=(Date.UTC(st.getFullYear(),st.getMonth(),st.getDate())-Date.UTC(st.getFullYear(),0,0))/24/60/60/1e3;const it=()=>{const ot=Math.sin(rt++)*1e4;return ot-Math.floor(ot)};for(;Ye!==0;)tt=Math.floor(it()*Ye),Ye--,Je=Ke[Ye],Ke[Ye]=Ke[tt],Ke[tt]=Je;return Ke}function filterWalletBlockList(Xe,Ke){const Ye=flatten$4(Ke),Je=flatten$4(Xe).filter(tt=>!Ye.includes(tt));return mapFromList(Je)}const mapFromList=Xe=>{const Ke=new Map;return Xe.forEach(Ye=>{Ke.set(Ye,1)}),Ke},report_url=Xe=>`https://lists.teia.art/${Xe}`;async function fetchSettings(){const[Xe,Ke,Ye,Je,tt,st,rt,it,ot,at]=await Promise.all([axios.get(report_url("restricted_objkt.json")),axios.get("https://lists.teia.art/teia-logos/dist/logos.json"),axios.get("https://lists.teia.art/teia-logos/dist/logos_pride.json"),axios.get(report_url("restricted.json")),axios.get(report_url("permitted.json")),axios.get(report_url("nsfw.json")),axios.get(report_url("photosensitive.json")),axios.get(report_url("under_review.json")),axios.get(report_url("ignore_uri.json")),axios.get(report_url("fund_feed_ignored_addresses.json"))]),ut=[Ke,Ye].flatMap(wt=>wt.data.logos.map(_t=>({name:_t,themable:wt.data.themable,collection:wt.data.collection}))),ht=mapFromList(Xe.data.map(wt=>wt.toString())),pt=mapFromList(st.data.map(wt=>wt.toString())),ft=mapFromList(rt.data.map(wt=>wt.toString())),xt=mapFromList(it.data),vt=mapFromList(ot.data),At=mapFromList(at.data),Et=filterWalletBlockList([Je.data],[tt.data]);return{logos:shuffleLogos(ut),walletBlockMap:Et,nsfwMap:pt,photosensitiveMap:ft,underReviewMap:xt,ignoreUriMap:vt,objktBlockMap:ht,feedIgnoreUriMap:At}}function useSettings(){const{data:Xe,error:Ke,isValidating:Ye}=useSWR("/settings",fetchSettings,{revalidateIfStale:!1,revalidateOnFocus:!1});return{...Xe||{},error:Ke,isLoading:Ye}}const container$u="_container_159i4_231",styles$_={container:container$u},SvgAcidmanhattan01=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M241.9 5.7H0v90.7h83.1v181.4h90.8V96.4H257V5.7h-7.6zm347.7 0H347.7v90.7h257V5.7h-7.5zm181.4 0h-75.6v272.1h90.7V5.7h-7.5zm355.3 0H876.9v272.1h90.7V96.4h75.5v181.4h90.8V5.7zM589.6 187.1H347.7v90.7h257v-90.7h-7.5z"})),SvgAcidmanhattan02=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M247.1 10.9H0v87.2h87.2v174.5h87.2V98.1h87.3V10.9h-7.3zm348.9 0H348.9v87.2h261.6V10.9h-7.2zm174.4 0h-72.6v261.7H785V10.9h-7.3zm356.2 0H872.1v262.5h87.6V229h87.6v43.8h87.6v-262h-8.3zm-80 94.5v36.5h-87.2V98.1h87.6v7.3zM596 185.3H348.9v87.3h261.6v-87.3h-7.2z"})),SvgAfrizalRizki01=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M410 170.1h56.7v56.7H410zM466.7 0v56.7h113.4V0h-56.7zm56.7 170.1h56.7v-56.7H466.7v56.7zm0 113.4h56.7v-56.7H466.7v56.7zM636.7 56.7v226.8h56.7V0h-56.7zm113.4 0h56.7v56.7h-56.7zM806.8 0h56.7v56.7h-56.7zm56.7 56.7h56.7v56.7h-56.7zm-679.9 0h56.7v56.7h-56.7zM240.3 0H297v56.7h-56.7zM297 113.4v170.1h56.7V56.7H297zM410.4 0h-56.7v56.7H410v56.7h56.7V56.7h-56.3zm339.7 170.1v113.4h56.7v-85.1h56.7v85.1h56.7V139.8H750.1z"})),SvgAlterebro01=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M268.4 2.9H0v92.6h185.1v185.1h92.6V2.9h-4.6zm347.1 0H347.1v277.7h277.7V188H439.7V95.5h185.1V2.9h-4.6zm162 0h-83.3v277.7h92.6V2.9h-4.7zm351.7 0h-273v277.7h92.5V95.5h92.6v185.1h92.6V2.9z"})),SvgAlterebro02=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M597.9 0H0v79.7h606.8V0h-4.4zm101.9 0h-70.9v79.7h79.8V0h-4.5zm429.6 0H730.8v79.7h403.1V0zM172.7 101.9h-70.8v181.6h79.7V101.9h-4.4zm425.2 0H203.7v79.7h403.1v-79.7h-4.4zm101.9 0h-70.9v181.6h79.8V101.9h-4.5zm425.2 0H730.8v181.6h79.7V181.6h243.6v101.9h79.8V101.9h-4.5zM597.9 203.7H203.7v79.8h403.1v-79.8h-4.4z"})),SvgAlterebro03=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M372 62H221.5v53.2h106.3v106.3h53.1V62h-4.4zm212.6 0H434.1v53.2h159.4V62h-4.4zm106.3 0h-44.2v159.5h53.1V62h-4.4zM908 62H753v159.5h53.1V115.2h53.2v106.3h53.1V62zM584.6 168.3H434.1v53.2h159.4v-53.2h-4.4z"})),SvgAnnekatrinenderlein01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"m208 114-15-8V42l8 4 27 14 18 10v16l-3-2-35-18v8l19 10 19 10v16l-2-1a4531 4531 0 0 1-36-18v7l15 8 16 9-15 8-16-9Zm91-3-22-11V78l18-9 18-10 32 17 32 17-8 4-8 4-10-5-11-6-6 3-12 7-7 3 11 5 10 6-16 8-21-11Zm13-22 12-7-6-3-5-3-12 6-13 7 11 6 13-6Z"}),reactExports.createElement("path",{d:"M255 86V65l-7-4-6-3 7-4 7-4 7 4 6 3v42l-7 4-7 4V86ZM147 50l-8-4 19-11 19-10-9-5c-8-4-9-4-8-5l7-4 7-3 24 12 27 14 3 2-8 3-8 4-10-6-9-4-20 10-20 10-6-3Z"}))),SvgBurkabayram01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{d:"M173 65V7h166v116H173V65Zm153 0V19H185l-1 44 1 46v3l70-1h71V65Z"}),reactExports.createElement("path",{d:"M191 74V43h26l25 1v41l-19 1-19 1v5h39v12h-52V74Zm38-9v-8h-25v15h25v-7Zm20 29V83h12v21h-12V94Zm18-10V63h40v-5l-20-1h-19V44l26-1h25v61h-52V84Zm40 0v-8h-26v16h26v-8Zm-58-15v-6h12v13h-12v-7Z"}),reactExports.createElement("path",{d:"M249 48V38h-58V25h128v13h-58v19h-12v-9Z"})),SvgCarolyn01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"m187.55 68.08 68.444-64.483H187.55V68.08zm68.444 56.323h34.228L255.994 3.597l-34.216 120.806h34.216zM324.45 3.597h-68.456L324.45 68.08V3.597z"})),SvgCryptemes01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",xmlSpace:"preserve",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M501 59.7H376.8c-2.8 0-5.2 2.3-5.2 5.2v53.5c0 2.8 2.3 5.2 5.2 5.2s5.2-2.3 5.2-5.2V70h51.8v143.4h-33.4c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h77.2c2.8 0 5.2-2.3 5.2-5.2s-2.3-5.2-5.2-5.2h-33.4V70H496v48.4c0 2.8 2.3 5.2 5.2 5.2s5.2-2.3 5.2-5.2V64.9c-.2-2.9-2.6-5.2-5.4-5.2zM839.3 70c2.8 0 5.2-2.3 5.2-5.2 0-2.8-2.3-5.2-5.2-5.2h-98.1c-2.8 0-5.2 2.3-5.2 5.2 0 2.8 2.3 5.2 5.2 5.2h43.9v143.4h-43.9c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h98.1c2.8 0 5.2-2.3 5.2-5.2s-2.3-5.2-5.2-5.2h-43.9V70h43.9zm-162.8 94.8c-2.8 0-5.2 2.3-5.2 5.2v43.4H578V144h43.9v19.4c0 2.8 2.3 5.2 5.2 5.2 2.8 0 5.2-2.3 5.2-5.2v-24c0-.2.1-.4.1-.6s0-.4-.1-.6v-24c0-2.8-2.3-5.2-5.2-5.2-2.8 0-5.2 2.3-5.2 5.2v19.5H578V70h85.8v32.5c0 2.8 2.3 5.2 5.2 5.2 2.8 0 5.2-2.3 5.2-5.2V64.9c0-2.8-2.3-5.2-5.2-5.2H547c-2.8 0-5.2 2.3-5.2 5.2 0 2.8 2.3 5.2 5.2 5.2h20.7v143.4H547c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h129.5c2.8 0 5.2-2.3 5.2-5.2V170c-.1-2.9-2.4-5.2-5.2-5.2zm375.2 48.6h-12L978.6 62.9c-.8-1.9-2.7-3.2-4.8-3.2h-58.7c-2.8 0-5.2 2.3-5.2 5.2 0 2.8 2.3 5.2 5.2 5.2h41.8l-58.2 143.4h-14.1c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h54c2.8 0 5.2-2.3 5.2-5.2s-2.3-5.2-5.2-5.2h-28.7l18.8-46.3h81.2l18.8 46.3h-30.9c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h53.9c2.8 0 5.2-2.3 5.2-5.2s-2.3-5.3-5.2-5.3zm-118.9-56.6L968 70h2.3l35.2 86.7h-72.7zm-616.4-15.1c0-33.1-16.5-62.4-41.8-80l20.8-33.1c.1-.2.2-.5.3-.7 0-.1.1-.2.1-.2.8-2.3 0-4.9-2.1-6.2C271.3 7.4 245.3 0 218.7 0c-18.7 0-36.5 3.6-52.8 10.2-.1 0-.3.1-.4.1-.1 0-.2.1-.2.1C113.5 31.6 77 82.5 77 141.7c0 51 27.1 95.9 67.7 120.8.1.1.3.2.4.3.2.1.5.3.7.4 21.3 12.8 46.2 20.2 72.9 20.2 27 0 53.3-7.6 76-22.1 2.1-1.3 2.9-3.9 2.1-6.1v-.1l-.3-.6c-.1-.1-.1-.2-.2-.3l-20.9-33.1c24.8-17.6 41-46.6 41-79.4zm-10.5-5.1H269c-2.6-25.5-24.2-45.4-50.3-45.4-4.2 0-8.3.5-12.2 1.5l-14.6-34c8.6-2.8 17.6-4.2 26.8-4.2 46.4-.1 84.5 36.3 87.2 82.1zm-137.5 10.3c1.5 14.5 9.2 27.3 20.3 35.5l-19.3 31.3c-21.6-14.8-36.2-39.1-37.9-66.9h36.9zm29.2 40.8c6.4 3 13.6 4.6 21.1 4.6 8.2 0 16-2 22.8-5.5l19.7 31.2c-12.6 7-27.1 11.1-42.5 11.1-14.6 0-28.4-3.6-40.5-10l19.4-31.4zm21.1-5.7c-22.2 0-40.3-18.1-40.3-40.3s18.1-40.3 40.3-40.3 40.3 18.1 40.3 40.3-18.1 40.3-40.3 40.3zm65.1-154.4-18 28.7c-14-7.7-30.1-12.2-47.1-12.2-10.6 0-21 1.7-30.9 5L174.4 18c13.8-5 28.8-7.7 44.3-7.7 22.9 0 45.3 6 65.1 17.3zM87.3 141.7c0-53.3 31.9-99.3 77.5-119.9l31.9 74.3c-15.5 7.5-26.6 22.6-28.4 40.4h-42.2c-2.8 0-5.2 2.3-5.2 5.2 0 33.6 17 63.2 42.9 80.8l-17.7 28.7c-35.4-23.5-58.8-63.8-58.8-109.5zm197.4 113.7c-20 11.6-42.7 17.8-66 17.8-23.1 0-44.8-6-63.7-16.5l17.7-28.8c13.7 7.3 29.3 11.5 45.9 11.5 17.4 0 33.8-4.6 48-12.6l18.1 28.6zm-14.8-42.9-19.7-31.2c10.4-8.3 17.4-20.5 18.8-34.4h36.9c-1.6 26.9-15.4 50.6-36 65.6z"})),SvgDjkero01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"m231.62 57.401-18.431 18.431V97.72l28.038-28.057L253.488 57.4 216.99 20.883l-3.801-3.8V38.95l3.8 3.801 14.63 14.65zm-63.754 0v17.17h19.004V18.248L147.717 57.4h20.15z"}),reactExports.createElement("path",{d:"M208.185 57.401h20.15L216.99 46.037l-3.801-3.8-21.888-21.87-2.12-2.12v56.324h19.004v-17.17zm2.674 42.84V84.35l-17.705 17.723 18.85 18.87.727.707 4.125-4.125 19.806-19.806 12.835-12.835V64.678l-38.638 38.638v-3.075zm16.349-93.892-10.715 10.734 10.715 10.733V6.35zm4.202 113.736 15.165-15.184H231.41v15.184zm20.398-56.305v.02l.019-.02h-.02zm0 20.608h20.589L251.807 63.8v20.59zm26.128-75.537h-.02l-18.965 18.965h37.931L277.916 8.851h.02zM258.95 67.658l20.379 20.36v-57.89h-20.38v37.53zm62.57-39.842L300.91 7.227H279.56l20.608 20.59h21.353zm12.165 12.167-10.695-10.696-10.677 10.696-30.597 30.597h21.372l19.902-19.902 19.901 19.902h21.391l-30.597-30.597z"}),reactExports.createElement("path",{d:"m322.99 53.963-9.816 9.817h19.634l-9.817-9.817z"}))),SvgImnot01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M267 121V87c-2-2-7-2-8 0v33c2 3 6 3 8 1Z"}),reactExports.createElement("path",{d:"M303 107c3-3 2-5-8-15l-9-10 4-8 5-8 11-2c9 0 10-1 12-2 2-2 2-3 1-4 0-2-2-3-3-3l-7-8-11-18-7-11-7-2-10-3-11-4c-8-4-11-4-12 0-1 2-1 3 1 5 2 1 25 10 28 10 2 0 2 3 0 4l-6 8-8 13-4 6-19-19c-15-15-19-18-21-18-3 0-28 37-28 41 1 2 1 3 4 3 2 0 3 0 13-16l12-17 7 7 7 7-3 3c-5 6-11 14-11 16s4 4 6 4l8-9 6-8c1 0 13 12 13 14l-19 24-10 15 2 3c2 1 3 1 5-1l24-28c4-6 6-7 7-5l8 9 16 18c9 10 12 11 14 9Zm-27-36-2-4 4-1 5 1-3 7-4-3Zm-4-15 1-2 8-12 8-11 7 10a466 466 0 0 0 7 14l-11 2c-20 1-20 1-20-1Z"}))),SvgSantiagoItzcoatl01=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M1129.4 0H0v282.2h1127V0h2.4zm0 8.9v268.9H4.4V4.4h1118.2v4.5z"}),reactExports.createElement("path",{d:"M1009.8 13.3h-899v260.1h902v-260h-4.4 1.4zm0 22.1v158.8h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v-163h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v4.4zm0 181.6v48.4H119.6V22.2h52.8v4.4H168V31h-4.4v4.4h-4.4v4.4H155v4.4h-4.4v4.4h-4.4V93h70.4v145.2h44v-4.4h4.4v-4.4h4.4V225h4.4v-4.4h4.4V217h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v101.2h184.8v-4.4h4.4v-4.4h4.4v-4.4h4.4V221h4.4v-4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v57.2h-35.2v44H727v-4.4h4.4v-4.4h4.4v-4.4h4.4V221h4.4v-4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v61.6h44v-4.4h4.4V230h4.4v-4.4h4.4v-4.4h4.4V217h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h30.8v74.8h44v-4.4h4.4V230h4.4v-4.4h4.4v-4.4h4.4V217h4.4v-4.4h4.4v4.4zM1001 26.6h-4.4V31h-4.4v4.4h-4.4v4.4h-4.4v4.4H979v4.4H810.6v-4.4h4.4v-4.4h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h167.2v4.4zM890.3 168.3v4.4h-4.4v4.4h-4.4v4.4H877v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H855v4.4h-4.4v4.4H846v4.4h-4.4v4.4h-4.4V164h57.2v4.4h-4.1zm-252.5-35.4v4.4h-4.4v4.4H629v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H607v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H585v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H563v4.4h-4.4v4.4h-4.4v4.4h-4.4v-21.5h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V133h4.4v-4.4h4.4V124h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V102h4.4v22h-4.4v4.4h-4.4v4.4h-4.4zm-287.9 0v4.4h-4.4v4.4H341v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H319v4.4h-4.4v4.4H310v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H288v4.4h-4.4v4.4H279v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4V93h74.8v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V71h4.4v-4.4h4.4v57.2h-4.4v4.4h-4.4v4.4h-3.9zm429.6 39.8h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H753v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H731v-17.6h4.4v-4.4h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v17.6h-4.4v4.4H784v4.4h-4.4v4.5zM637.8 97.4v4.4h-4.4v4.4H629v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H607v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H585v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H563v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H417.8v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164H519v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V133h4.4v-4.4h4.4V124h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V102h4.4v-4.4h4.4V93h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V71h4.4v-4.4h4.4V93h26.4v4.4h-4.4zm-106.3 0h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-92.4V115h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V93h92.4v4.4zm-110.7 0v4.4h-4.4v4.4H412v4.4h-4.4V93h17.6v4.4h-4.4zm4.4 70.9h-4.4v4.4h-4.4v4.4H412v4.4h-4.4v-17.6h17.6v4.4zM708.7 186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V133h4.4v-4.4h4.4V124h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V124h-4.4v4.4H784v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H762v4.4h-4.4v4.4H753v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H731v4.4h-4.4v4.4h-4.4v4.4h-17.6V190h4.4v-4zM939 97.4v22h-88.4V115h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V93h66v4.4zm-101.9 8.9V93h17.6v4.4h-4.4v4.4H846v4.4h-4.4v4.4h-4.4v-4.3zm-17.7-79.7H815V31h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H793v39.8h-4.4V93H784v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H762v4.4h-4.4v4.4H753v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H731v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H709v4.4h-4.4v4.4h-4.4v4.4h-4.4V93H731v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V71h4.4v-4.4h4.4V62h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h22v4.4zm-35.4 0h-4.4V31h-4.4v4.4h-4.4v4.4h-4.4v4.4H762v4.4h-4.4V53H753v4.4h-4.4V62h-4.4v4.4h-4.4v4.4h-4.4v4.4H731v-22h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h22v4.4zm-35.5 0h-4.4V31h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-92.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h92.4v4.4zm-110.7 0h-4.4V31H629v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4V53H607v4.4h-4.4V62h-4.4v4.4h-4.4v4.4h-4.4v4.4H585v4.4h-4.4V84h-4.4v4.4h-4.4V93h-4.4v4.4H563v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H541v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H519v4.4h-4.4v-17.6h4.4V124h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V102h4.4v-4.4h4.4V93h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V71h4.4v-4.4h4.4V62h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h17.6v4.4zm-35.4 0H598V31h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H576V53h-4.4v4.4h-4.4V62h-4.4v4.4h-4.4v4.4H554v4.4h-4.4V57.6h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h17.6v4.4zm-35.5 0h-4.4V31h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H382.1v-4.4h4.4v-4.4h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h162.8v4.4zm-181.6 0h-4.4V31h-4.4v4.4H372v4.4h-4.4v4.4h-4.4v4.4h-4.4V53h-4.4v4.4H350V62h-4.4v4.4H341v4.4h-4.4v4.4h-4.4V57.6h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4H385v4.4zm-35.4 0h-4.4V31H341v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H164v-4.4h4.4v-4.4h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h162.8v4.4z"})),SvgSantiagoItzcoatl02=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M236.8 19.7H1v243.8h244.2V20.2h-8.4zm-18.5 37v174.8H33.4V52.4h184.2v4.3zm314.4-37H297v243.8h243.8V20.2h-8.1zm-18.4 37v174.8H329.4V52.4h184v4.3zm314.4-37H593v243.8h243.8V20.2h-8.1zm-18.5 37v174.8H625.4V52.4h184v4.3zm319-37H888.8v243.8h243.8V20.2h-3.4zm-23.1 37v174.8H921.2V52.4h184v4.3z"}),reactExports.createElement("path",{d:"M186 70.6H56.5v32.3h50.8V126H84.2v32.4h23.1v50.9h32.4v-50.9h27.8V126h-27.8v-23.1h55.5V70.6h-4.6zm295.9 0H352.4v138h138v-27h-54.6v-23.2h27.6V126h-27.6v-23H491V70.8h-9.1zm-78.6 37V126h-18.5v-23h18.4v4.6zm-18.5 69.3v-18.5h18.4v23h-18.4v-4.5zm393-106.3H648.3v32.3h50.9V126h-23.1v32.4h23.1v23.1h-50.9v27.8h138.8v-27.8h-55.5v-23.1h27.7V126h-27.7v-23.1h55.5V70.6h-4.7zm295.9 0H944.4v138h32.2v-50.2H995V186h32.2v-27.6h23V209h32.2V70.8h-8.7zm-23.1 37V126h-23v-23h23v4.6zm-74 13.8V103H995v23h-18.4v-4.6z"})),SvgKlausJoerres01=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M252.5 0H0v283.5h261.3V0h-4.4zm345.4 0H345.5v93h261.3V0h-4.4zm531.5 0h-434v283.5H784V93h84.1v190.5h88.6V93h88.6v190.5h88.6V0zM597.9 190.5H345.5v93h261.3v-93h-4.4z"})),SvgSpencerLinkous03=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M274.6 46.5H0v93h93V237h97.5v-97.5h93v-93H279zm473.9 0h-88.6V237h97.5V46.5H753zm-190.4 93H376.5V237h190.4v-97.5h-4.4zm571.3 0h-88.6v-93h-97.4v93h-93V237h283.5v-97.5z"})),SvgMaes02=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M45.07 121.74c-2.59-3.99-3.19-10.77-3.19-37.88v-32.9H29.92c-10.17 0-12.16-.6-14.15-4.38a84.87 84.87 0 0 0-6.98-10.17c-6.38-7.57-6.98-27.9-1-31.3 2.6-1.2 46.45-2 128.59-2h124.4l2.6 7.39c2.39 7.57 1 38.07-2 41.06-.8.8-39.27 1.2-85.53 1l-84.13-.6-.4 30.9-.6 30.7-6.97 2c-3.79 1-9.77 3.99-13.36 6.58-8.77 6.38-20.93 6.38-25.32-.4Z"}),reactExports.createElement("path",{d:"M168.48 123.33c-10.17-.6-14.56-1.59-16.35-3.98-3.19-4.19-3.59-40.67-.6-43.66 1.4-1.4 24.13-1.8 66.79-1.2l64.8 1v-34.1c0-30.5.39-34.28 3.58-35.88 1.8-1 11.36-2.4 21.13-3.19 24.92-1.8 25.12-1.6 25.12 29.1 0 12.97.4 23.53.8 23.53 1 0 66.99-34.49 87.12-45.45 11.76-6.58 17.15-8.37 24.52-8.37 5.19 0 10.57 1.2 11.77 2.59 7.97 8.37 13.95 18.74 14.95 25.91 1 7.78 14.55 31.9 30.7 54.03 5.78 7.98 7.18 16.55 3.59 23.33-3.99 7.17-21.93 15.75-32.9 15.75-11.36-.2-9.17 2.19-30.9-31.9-7.97-12.56-14.75-23.33-15.15-23.73-.6-.6-12.96 5.59-69.58 34.7-11.96 6.17-23.32 12.35-24.92 13.95-1.8 1.6-4.38 2.99-5.78 2.99-1.4 0-3.79 1.4-5.38 2.99-2.6 2.6-12.96 2.99-71.18 2.6-37.48-.2-74.36-.6-82.13-1Z"}))),SvgMumuthestan02=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{d:"M313.58 102.25V83.47h39.38v37.55h-39.38v-18.77Zm-265.31-.61V82.86H10.72V43.5h37.55V7.75h38.77V43.5h36.35v39.36H87.03v37.56H48.27v-18.78Zm114.49-.91V81.05h112.06v39.37H162.76v-19.69Zm227.33 18.97c.12-.43 8.84-25.33 19.38-55.31 10.48-29.99 19.26-55 19.5-55.55.43-1.03 1.76-1.09 16.6-1.09h16.12l19.99 55.55a7897.4 7897.4 0 0 1 20.17 56.27c.18.73-3.21.85-20.78.73l-21.02-.18-6.48-18.78c-7.7-22.3-7.27-21.14-7.7-20.72-.18.18-3.38 9.15-7.08 19.93L432 120.12l-21.13.18c-16.78.12-21.02 0-20.78-.6ZM162.76 27.14V7.75h112.06v38.77H162.76V27.14Zm150.82-.91V8.36h39.38V44.1h-39.38V26.23Z"})),SvgMumuthestan03=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",null,reactExports.createElement("path",{fill:"currentColor",d:"M34.86 64.27V2.05h66.83v9.22h9.99v9.99h9.2v9.2h10v10h9.21v86.01H34.86V64.26Zm96.01 19.2v-33.8h-9.99v57.6H54.07V21.26h38.4v-9.98H44.08v106h86.8v-33.8Zm-19.2 9.6v-5h-9.98v-9.21h9.99V49.67H92.46v-19.2H63.28v19.2h9.99v9.99h-9.99v19.2h9.99v9.22h-9.99v9.99h48.4v-5Zm9.22-57.6v-5h-9.21v-9.21h-10v19.2h19.2v-5Z"}),reactExports.createElement("path",{fill:"currentColor",d:"M73.27 73.87v-5h28.42v9.99H73.27v-5Zm9.21-19.21v-4.99h-9.21v-9.22h9.21v9.22h9.99v9.99h-9.99v-5Zm134.42 67.21v-4.6h-9.22v-19.2h9.21V59.65h-19.2v-9.99h29.2v-19.2h9.21v-19.2h9.99v19.2h-9.99v19.2h19.2v9.99h-28.42v38.4h-9.99v19.2h29.2v9.22h-29.2v-4.6Zm67.6 0v-4.6h-10v-10h-9.21v-19.2h9.21v-19.2h9.99v-9.21h9.2v-9.99h29.2v9.99h9.21v19.2h-9.21v9.22h-48.4v19.2h10v9.98h28.41v-9.99h9.99v10h-9.99v9.21h-28.4v-4.6Zm38.4-52.61v-9.6h-29.2v9.21h-9.2v9.99h38.4v-9.6Zm19.2 52.61v-4.6h19.2v-19.2h9.22v-29.2h9.99v-9.21h-29.2v-9.99h38.4v19.2h-9.2v29.2h-10v19.2h19.2v9.21H342.1v-4.6Zm76.8 0v-4.6h-9.98v-29.2h9.99v-9.21h38.4v-9.99h9.21v-9.21h-38.4v9.21h-9.21v-9.21h9.21v-9.99h38.4v9.99h10v9.21h-10v29.2h-9.2v19.2h19.2v9.21h-19.2v-9.22h-10v9.22h-28.41v-4.6Zm28.43-14.2v-9.6h9.99v-10H418.9v29.2h28.42v-9.6ZM380.5 25.86v-4.6h19.2v9.2h-19.2v-4.6Z"}))),SvgMumuthestan04=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M327.695 6.908h-143.39v114.184h143.01v-2.283.241V6.92h.38v-.012zM193.96 112.162V16.588h123.776v95.46h-8.222.267-115.784v.114h-.037z"}),reactExports.createElement("path",{d:"M261.975 45.515h8.73V35.86h-9.643v9.655h.914-.001zm19.31 0h8.729V35.86h-9.654v9.655h.926zM214.184 74.01H299.2V55.17h-9.186v9.186h-28.952V55.17h-9.655v9.186h-28.495V35.86h-9.655v38.15h.926v.001zm17.457 9.655h-8.728v9.642h9.655v-9.642h-.927zm18.841 0h-8.729v9.642h9.655v-9.642h-.926z"}))),SvgNatived01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("style",{type:"text/css"},`
		.st0 {
			fill: var(--gray-50);
		}

		.st2 {
			fill: "currentColor"
		}
	`),reactExports.createElement("path",{d:"M235.6 35H21.8v214.6h229.4V35h-15.6zm7.4 22.1v177.6h-7.4v7.4h-199v-7.4h-7.4V49.4h7.4V42h199.8v7.4h7.4v7.7zM522.8 35H309.2v214.6h229.4V35h-15.8zm7.3 22.1v177.6h-7.4v7.4H324v-7.4h-7.4V49.4h7.4V42h199.8v7.4h7.4v7.7zM809.9 35H596v214.6h229.4V35h-15.5zm7.4 22.1v177.6h-7.4v7.4H610.8v-7.4h-7.4V49.4h7.4V42h199.8v7.4h7.4v7.7zM1104.4 35h-221v214.6h229.4V35h-8.4zm0 22.1v177.6h-7.4v7.4H898.2v-7.4h-7.4V49.4h7.4V42H1098v7.4h7.4v7.7z",className:"st0"}),reactExports.createElement("path",{d:"M508 57.1h-7.3v169.3h7.3V219h7.4v-7.3H508V71.8h7.4v-7.4H508zm117.8 29.4v117.8h7.4V79.1h-7.4zm162 0v117.8h7.4V79.1h-7.4zM220.9 204.3V79.1h-7.4v132.6H58.9V79.1h-7.4v132.6h-7.3v7.3h7.3v7.4h7.4V219h154.6v7.4h7.4V219h7.3v-7.3h-7.3zm684.7 7.4h7.4v7.4h-7.4zm162 0H920.3v7.3H1075v-7.3zm14.7 0h7.4v7.4h-7.4zM913 219h7.4v7.4H913z",className:"st0"}),reactExports.createElement("path",{d:"M1075 219h7.4v7.4h-7.4z",className:"st0"}),reactExports.createElement("path",{d:"M257.7 12.9H0v258.9h273.4v-259h-15.7zm7.4 22.1v222h-7.4v7.4H14.4V257h-7V27.6h7.4v-7.4h243.8v7.4h7.4V35zm279.7-22.1H287v258.9h273.8v-259h-16zm7.4 22.1v222h-7.4v7.4h-243V257h-7.4V27.6h7.4v-7.4H546v7.4h7.4V35zM832 12.9H574.2v258.9H848v-259h-16zm7.3 22.1v222H832v7.4H589V257h-7.4V27.6h7.4v-7.4h244.2v7.4h7.4V35zm287.2-22.1H861.2v258.9H1135v-259h-8.5zm0 22.1v222h-7.4v7.4H876V257h-7.4V27.6h7.4v-7.4h244.2v7.4h7.4V35z",className:"st2"}),reactExports.createElement("path",{d:"M220.9 57.1h-7.4v7.3H58.9v-7.3h-7.4v7.3h-7.3v7.4h7.3v7.3h7.4v-7.3h73.6v29.4h-7.3v7.4h7.3v14.7h-7.3v7.4h7.3v22.1h-7.3v7.3h7.3v22.1h-7.3v7.4h7.3v22.1h7.4v-29.5h7.4v-7.3h-7.4v-14.8h7.4v-7.3h-7.4v-14.7h7.4v-7.4h-7.4v-29.5h7.4v-7.3h-7.4V71.8h73.6v7.3h7.4v-7.3h7.3v-7.4h-7.3zm574.3 0h-7.4v7.3H633.2v-7.3h-7.4v7.3h-7.3v7.4h7.3v7.3h7.4v-7.3h73.6v29.4h-7.3v7.4h7.3v14.7h-7.3v7.4h7.3v22.1h-7.3v7.3h7.3v22.1h-7.3v7.4h7.3v22.1h-73.6v-7.4h-7.4v7.4h-7.3v7.3h7.3v7.4h7.4V219h154.6v7.4h7.4V219h7.3v-7.3h-7.3v-7.4h-7.4v7.4h-73.6v-29.5h7.3v-7.3h-7.3v-14.8h7.3v-7.3h-7.3v-14.7h7.3v-7.4h-7.3v-29.5h7.3v-7.3h-7.3V71.8h73.6v7.3h7.4v-7.3h7.3v-7.4h-7.3zm287.1 0h-7.4v7.4h-37v-7.4h-7.4v7.4h-29.6v-7.4H994v7.4h-29.6v-7.4H957v7.4h-37v-7.4h-7v7.4h-7.4v7.4h7.4v29.6h-7.4v7.4h7.4v14.8h-7.4v7.4h7.4v22.2h-7.4v7.4h7.4v22.2h-7.4v7.4h7.4v29.6h7.4v-37.7h7.4v-7.4h-7.4V160h7.4v-7.4h-7.4v-14.8h155.4v14.8h-7.4v7.4h7.4v22.2h-7.4v7.4h7.4v29.6h7.4v-37h7.4v-7.4h-7.4V160h7.4v-7.4h-7.4v-14.8h7.4v-7.4h-7.4v-29.2h7.4v-7.4h-7.4V71.6h7.4v-7.4h-7.4v-7.1zm-7.3 22v22.2h-7.4v7.4h7.4v22.2H920v-29.7h7.4v-7.4H920V71.6h44.4V79h7.4v-7.4h14.8V79h7.4v-7.4h7.4V79h7.4v-7.4h14.8V79h7.4v-7.4h44.4v7.5zM485.9 64.4H346v-7.3h-7.3v7.3h-7.4v7.4h7.4v29.4h-7.4v7.4h7.4v14.7h-7.4v7.4h7.4v22.1h-7.4v7.3h7.4v22.1h-7.4v7.4h7.4v22.1h-7.4v7.3h7.4v7.4h7.3V219h154.7v-7.3H346v-29.5h7.4v-7.3H346v-14.8h7.4v-7.3H346v-14.7h22.1v7.3h7.4v-7.3h29.4v7.3h7.4v-7.3h36.8v7.3h7.4v-7.3h44.2v-7.4h-51.6v-7.4h-7.3v7.4h-22.1v-7.4h-7.4v7.4h-29.4v-7.4h-7.4v7.4H346v-29.5h7.4v-7.3H346V71.8h154.7v-7.4h-7.4z",className:"st2"})),SvgNorulesjustfeels07=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{fill:"currentColor",d:"m155.28 1-27.94.62-27.04.6V127.8l26.85-.62 27.1-.6.62-62.8.4-62.8Zm136.58.21-61.56.4-61.77.63-.62 28.12-.6 27.94h124.55V1.2Zm12.23 2.03V64.4c0 33.64.41 61.16 1.03 61.16.6 0 28.74-13.87 62.58-30.8L429.47 64l-60.13-30.37C336.3 17.11 307.98 3.45 306.76 3.45l-2.67-.21ZM167.51 70.53v55.04h124.35V70.53H167.51Z"})),Svg111V1Ab01=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M669.7 0h-280v35h285V0h-5zm0 10v20h-275V5h275v5zm0 114.4H391.2v34.7h283.5v-34.7zM326.6 0H48.1v34.8h124.4v248.7h34.7V34.8h124.4V0zm343.1 248.6h-280v35h285v-35h-5zm0 10v20h-275v-25h275v5zM764.2 0h-29.8v283.5h34.8V0z"}),reactExports.createElement("path",{d:"M734.4 0h34.8v283.5h-34.8zm118.5 283.5 97.2-203.4 97.2 203.4h38.5L969.4 39.7 950.6.4l-.2-.4-.3.1-.3-.1-.2.4-18.8 39.3-116.4 243.8z"})),Svg111V1Ab02=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M41.6 0h283.2v32H41.6zm342.6 32h283.2v32H384.2zm0 188.2h283.2v32H384.2z"}),reactExports.createElement("path",{d:"M199.216.28v283.2h-32V.28zM760.519.276v283.2h-32V.276z"}),reactExports.createElement("circle",{cx:418.6,cy:141.8,r:29.1}),reactExports.createElement("path",{d:"m980.6 39.5-5.1-10h-25.7l-5.1 10L833 261.1h35.8l93.8-186 93.9 186h35.8z"})),SvgOviy01=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M857 0H272.4v283.5h221.4V217h-155v-39.8h155v-70.9h-155V66.4H795v39.9H640v177.2h70.9V177.2H795v106.3h66.5V0z"}),reactExports.createElement("path",{d:"M591.3 106.3h-57.6v177.2h66.4V106.3h-4.4z"})),SvgOviy02=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M363.2 0H199.3v66.4H248v217.1h70.9V66.4H372V0h-4.4zm225.9 0h-176v282.2h184.8V217H479.1v-31h118.8V0h-8.8zm-57.6 70.9V115h-52.8V66.6h52.8v4.3zM699.8 0h-62v66.4h70.9V0h-4.5zm230.3 0H748.6v66.4h118.8v31H748.6v184.8h184.8V0h-3.3zm-62 172.7v44H815v-48.3h52.8v4.3zM699.8 97.4h-62v186.1h70.9V97.4h-4.5z"})),SvgPilhei01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{fill:"currentColor",d:"M129.24 121.84c-4.26-4.26-4.42-7.7-.5-17.02.99-2.3 2.46-5.9 3.44-8.19a62.6 62.6 0 0 1 3.28-7.36c13.42-25.37 22.42-44.03 22.42-46.65 0-1.8.66-3.28 1.48-3.28 2.13 0 6.7-9.49 6.7-13.58 0-2.3-.65-2.78-2.78-1.97-1.63.82-7.69 1.8-13.58 2.46-5.9.65-13.26 1.8-16.53 2.3-5.24 1.14-6.55.65-10.97-3.94-6.55-6.38-7.37-14.56-1.47-14.9 1.96-.16 6.87-.48 10.96-.65 4.1-.16 18.5-1.3 31.92-2.62 13.59-1.14 30.77-2.29 38.47-2.29 12.93 0 13.91.17 13.42 3.28-1.3 9.33-4.91 11.95-16.7 12.76-8.34.66-12.6 3.6-13.9 9.66-.66 2.95-2.96 8.19-5.08 11.46-2.13 3.44-3.93 6.87-3.93 7.7 0 .97-1.8 4.9-4.1 9-2.28 4.09-4.08 8.5-4.08 9.82 0 1.47-.66 2.61-1.48 2.61-1.63 0-16.37 29.8-24.88 50.42-2.78 6.38-6.38 6.71-12.11.98ZM261 118.57c0-1.48 2.62-8.19 5.9-14.73 3.27-6.72 6.05-13.75 6.22-16.05.32-2.12 2.13-6.05 3.93-8.83 1.96-2.62 3.6-5.4 3.6-5.9 0-1.47 10.3-24.39 22.42-49.27 6.88-14.24 9.5-16.04 18.5-11.94 6.22 2.61 6.22 6.22 0 15.55-2.62 3.92-4.91 8.34-4.91 9.65 0 1.15-.5 2.3-1.31 2.3-.66 0-2.13 2.45-3.28 5.4-4.9 11.78-20.62 43.2-24.06 47.8-1.96 2.77-4.09 7.03-4.75 9.48-.65 2.79-3.27 5.9-6.54 7.86-3.11 1.8-6.06 4.26-6.55 5.57a3.94 3.94 0 0 1-3.44 2.45c-1.3 0-2.45.82-2.45 1.64 0 .98-.66 1.64-1.64 1.64-.82 0-1.64-1.15-1.64-2.62Zm120.15-.33c-.98-.66-2.62-4.58-3.6-8.84-3.44-14.08-5.08-21.77-5.57-25.86-.33-2.46-1.63-4.26-3.6-4.58-3.27-.66-13.1 1.8-21.6 5.4a64.48 64.48 0 0 1-11.3 3.43c-6.22 1.15-17.68 11.3-23.4 20.63-3.12 5.4-6.06 6.71-9.83 4.75a41.2 41.2 0 0 0-5.56-2.46c-1.64-.49-2.95-1.8-2.95-2.95 0-1.14 8.51-13.42 18.82-27.33 10.32-13.75 20.14-27.83 21.61-31.1 1.47-3.27 5.57-10.15 9-15.22 3.44-5.08 6.22-10.32 6.22-11.62 0-1.31 1.15-3.28 2.46-4.42 1.3-1.15 2.45-3.44 2.45-5.08 0-2.45 1.15-3.1 5.4-3.1 2.79 0 6.55.97 8.03 2.28 2.94 2.13 7.85 22.26 7.85 32.25 0 3.27 1.15 8.67 2.46 11.95l2.45 5.89h10.48c7.2 0 10.97.82 12.44 2.46 3.6 4.25.65 7.36-6.88 7.36-12.1 0-12.93 2.46-8.02 22.92.99 4.09 2.3 10.14 2.95 13.58.82 5.4.5 6.06-2.62 6.06-1.96 0-3.44.98-3.44 2.45 0 2.62-1.47 3.11-4.25 1.15Zm-24.4-49.1 8.2-2.95.48-8.84c.33-5.9-.32-10.15-1.8-12.11-2.29-3.11-2.45-3.11-7.36.49-5.73 3.93-14.24 20.13-12.77 23.9 1.15 3.1 3.27 3.1 13.26-.5Zm-171.69 44.84c-.5-2.29-.5-5.4 0-7.03 1.3-3.93 3.92-10.48 5.89-14.08.82-1.64.98-3.77.33-4.75-.66-.82-.33-2.13.49-2.78 2.12-1.31 10.3-16.04 10.3-18.5 0-1.14 6.06-14.24 13.6-29.46l13.42-27.33 22.58-.17c19.48 0 22.6.33 23.58 2.62 1.3 3.6-3.6 7.2-10.15 7.2-2.79 0-5.73.66-6.55 1.31-.98.66-4.58 2.3-8.19 3.44-9 3.1-15.55 10.64-15.55 18.17 0 1.64-1.14 3.76-2.45 4.9-4.91 4.1-2.62 5.25 7.86 4.26 11.45-1.14 14.73.17 13.91 5.73-.5 3.44-1.8 4.1-12.77 6.06-18.99 3.27-21.77 5.07-27.33 17.02-2.79 5.57-5.57 12.12-6.22 14.24-1.15 3.77-.99 3.93 5.73 2.95 3.92-.5 7.53-1.47 8.02-2.3.49-.65 4.74-1.47 9.16-1.47 4.59-.16 12.44-.81 17.68-1.47 8.51-1.14 9.33-.98 9.33 1.8-.16 5.73-3.93 8.35-13.1 9.5-21.44 2.78-41.73 7.69-46.8 11.62-5.08 3.93-11.63 3.1-12.78-1.48Z"})),SvgHermanPretorius01=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M217 28.8H0v115.1h115.2v110.8h110.7V28.8h-4.4zm567 0H682.1v225.9h110.7V28.8h-4.4zm345.4 0h-110.7v115.1H908v110.8h225.9V28.8zM558.1 143.9H451.8V28.8H341v225.9h225.9V143.9h-4.4z"})),SvgQizzio02=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M562.8 0H413.2v62h-30.8v158.6h30.8v61.6h158.4v-29.6H444v-31h30.8v-62h61.6V124h-61.6V62H444V31h127.6V0h-8.8zM443.2 97.4v26.4h-30.8V93h30.8v4.4zm0 66.5v26.4h-30.8v-30.7h30.8v4.3zm-62-137.3V0H97.8v31h61.6v62H221v127.6h-30.2v61.6h30.8v-29.6h35.2v30.8h30.8v-61.8h-30.4V93h61.6V31h61.6v-4.4zm-93 8.8V62h-31V31H288v4.4zm-97.5 22.2V31h30.8v31h-30.7v-4.4zm567 31V0H603.4v93H665v127.6h-30.8v61.6H665v-29.6h30.8v30.8h30.8v-61.8h-30.8V93h61.6v-4.4zm-124-31V31h30.8v31h-30.8v-4.4zm62 0V31h30.8v31h-30.7v-4.4zm279 194.9h-26.5V0h-62v31H917v62h-97.2V31H855V0h-66.2v251.4h-31v30.8h61.6v-91.6h96.8V283h61.6v-30.4h-3.1zm-155-97.5v-31h35.2v35.2h-35.1V155zm66.4 0v-31h30.8v35.2h-30.7V155z"})),SvgRodicqart01=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M255.1 9.4H0v56.7h264.6V9.4h-4.8zm302.4 0H378v18.9h-18.9v18.9h-18.9v18.9h226.7V9.4h-4.7zm207.9 0h-66.2v56.7h75.6V9.4h-4.7zm363.7 56.7H1115V47.2h-18.9V28.3h-18.9V9.4H926v18.9h-18.9v18.9h-18.9v18.9h-18.9V274h75.6V85h18.9V66.1h75.6V85h18.9v189h75.6V66.1zm-968.5 56.7H94.5V274h75.6V122.8h-4.7zm604.8 0h-66.2V274h75.6V122.8h-4.7z"}),reactExports.createElement("path",{d:"M1029.9 122.8h-66.1v37.8h75.6v-37.8h-4.8zm-472.4 94.5H415.7v-18.9h-18.8v-18.9H378v-18.9h132.2v-37.8H302.4v75.6h18.9v18.9h18.9v18.9h18.9v18.9H378V274h188.9v-56.7h-4.7z"})),SvgKerimSafa01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M372.358 9.081H264.146V24.75h-15.792V9.08H138.1v31.335h15.667V24.832h15.75v47.002h15.668V24.832h47.002v15.667h-31.001v15.667h31.334v15.668h-31.334V87.5h31.334v15.667h-15.667v15.667h31.334V40.582h15.667v78.337h31.335v-15.293h-15.292V56.333h47.001V72h15.668V24.832h15.667v15.667H373.9V9.165h-1.542V9.08zm-45.272 17.71v13.708h-47.19V24.832h47.002v1.958h.188z"})),Svg33301=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M468.5 0H192.1v90.6H282v192.9h96.6V90.6h89.9zm191.6 0v283.5h96.6V0h-96.6zm48.3 84C686.6 84 669 66.3 669 44.6c0-21.8 17.6-39.4 39.4-39.4 21.8 0 39.4 17.6 39.4 39.4 0 21.7-17.7 39.4-39.4 39.4z",className:"st0"}),reactExports.createElement("path",{d:"M580.1 235.9c-44.7 0-49.3-31.7-49.3-31.7h98.5c0-74.2-47-108.1-96.8-108.1s-104.7 22.6-104.7 96.2 64 91.2 64 91.2h88.3c24.3 0 49.3-31.7 49.3-31.7V215c0-.1-13.6 20.9-49.3 20.9zm-32.8-94c12.1 0 22 13.8 22.6 31.2h-45.2c.5-17.4 10.4-31.2 22.6-31.2zm334.9-48c-47.5 0-93.5 23.2-93.5 23.2v59.5s12-19.1 52.1-19.1C881 157.5 881 187 881 187s-11.5-4.2-31.3-4.2c-31.3 0-66.4 18.2-66.4 55.2 0 37.1 28.2 45.5 28.2 45.5h46c14.7 0 23.6-14.6 23.6-14.6v14.6h95.4V161.9c0-45.6-46.8-68-94.3-68zm-1.1 144.2c-2.8 6.3-9 9.6-16.3 9.6-9.9 0-19.9-7-19.9-16.9s10-16.9 19.9-16.9c7.3 0 13.6 3.4 16.3 9.6v14.6z",className:"st0"})),SvgVarda01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M242.883 4.05H196.05v16.855h16.855v33.721h16.866v-33.72h16.855V4.05H242.883zm71.185 0h-48.705v16.855h50.587V4.05h-1.882zm-1.872 33.72h-46.833v16.856h50.587V37.771h-3.754zm-86.168 26.225h-13.123V80.86h16.866V63.995H226.028zm86.168 9.368H282.23V90.23h16.855v33.721h16.866V73.363h-3.754zM226.028 90.23h-13.123v33.721h16.866V90.23H226.028zm52.447 0h-13.112v33.721h16.866V90.23h-3.754z"})),SvgVarda02=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M573.6 0h-22.2v26.6h31V0H578zM516 26.6h-75.3v115.1h-57.6v26.6h57.6v88.6h57.6v-31h-31v-57.6h31v-26.6h-31V57.6h31v84.1h26.6V26.6h-4.5zm168.3 0H640v31h26.6v57.6H640v26.5h26.6v84.2H640v-84.2h-31v115.2h84.2V141.7h57.5v-26.5h-57.5V26.6h-4.5zm-425.2 31h-17.7v26.6H268V57.6h-4.5zm314.5 0h-22.2v168.3h31V57.6H578z"}),reactExports.createElement("path",{d:"M631.2 57.6H609v26.6h31V57.6h-4.4zM888 199.3h-22.1v26.6h26.6v-26.6zm-380.9 26.6h17.8v-26.6h-26.6v26.6h4.4zm349.9 0h-48.7V0H693.2v26.6h88.5v199.3h-57.5v57.6h26.5v-26.6h115.2v-31h-4.4zm-425.2 31h-75.3V57.6h53.2V0h-26.6v26.6H268v31h57.5v225.9h115.2v-26.6h-4.4zm141.8 0h-22.2v26.6h31v-26.6H578z"})),SvgSimoneVirgini01=Xe=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M403.1 0H270.2v163.9h13.3V155h8.8v-13.3h13.3v-13.3h-13.3v-93h13.3V22.1h13.3v13.3h8.9v128.5h-8.9v13.3h-13.3v13.3h13.3v8.8h8.9v62h-8.9v8.9h-13.3v13.3h70.9v-13.3h-13.3v-8.9h-8.9v-62h8.9v-8.8h13.3v-13.3h-13.3v-13.3h-8.9V35.4h8.9V22.1h13.3v13.3h13.3v93h-13.3v13.3h13.3V155h8.8v8.9h13.3V0h-4.4zm256.8 88.6v-4.4h-35.4V22.1h13.3v-8.8h13.3V0h-75.3v13.3h13.3v8.8h13.3v62.1h-35.5V93h8.9v13.3h13.3v13.3h13.3v44.3h-13.3v8.8h-13.3v17.8h13.3v8.8h13.3v62h-13.3v8.9h-13.3v13.3h75.3v-13.3h-13.3v-8.9h-13.3v-62h13.3v-8.8h13.3v-17.8h-13.3v-8.8h-13.3v-44.3h13.3v-13.3h13.3V93h8.8z"}),reactExports.createElement("path",{d:"M558.1 248h-4.4v13.2h-83.6V248h-8.8v-48.6h8.8v-8.8h61.6v-13.4h8.8V164h13.2v-44.4h-13.2v-13.2h-8.8V93h-61.6v-8.8h-8.8V35.6h8.8V22.2h70.4v13.2h13.2v13.2h13.2V0H426.1v13.2h8.8V269h-8.8v13.2h140.8V248h-8.8zm-26.6-93h-13.2v8.8h-48.4V155h-8.8v-26.4h8.8v-9h48.4v8.8h13.2V155zm327.8 115.2h-8.8v-8.8h-13.3v-26.6h-8.8v-44.2H815V164h13.2v-9h8.8v-26.4h-8.8v-9H815V48.8h13.2V22.2h8.8v-8.8h13.2V0H673.8v13.2H687V22h8.8v26.6H709v70.8h-13.2v8.8H687v26.4h8.8v8.8H709v26.4h-13.2v44H687v26.4h-13.2v8.8h-13.2v13.2h61.6v-12H709V248h13.2v-35.4h8.8v-13.2h61.6v13.2h8.8v35.2h13.2v22h-13.2V283H863v-12.8h-3.7zM801.7 35.4h-8.8v128h-13.3v13.2h-35.4v-13.2H731V35.6h-8.8V22.2h79.2v13.2z"})),SvgChristianWaadt02=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",stroke:"null",shapeRendering:"crispEdges",style:{vectorEffect:"non-scaling-stroke"},viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{d:"M277.873 5.233h-14.679v117.534h18.349V5.233h-3.67zM138.3 18.087v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37H145.638zm95.515 0H153v18.37h18.348v73.456h18.37V36.457h55.107v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.669v-18.37h-3.67zm29.398 0v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37h-3.67zm78.97 0h-71.652V36.54h55.357v18.453H299.89v55.356H373.7V18.046h-2.156v.041zM355.02 75.02v16.607H318.28V73.174h36.905v1.845h-.166z"}),reactExports.createElement("path",{d:"M195.232 54.805v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.69v-18.37h-3.69zm38.583 0h-33.068v18.37h36.738v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.669v-18.37h-3.67zm29.398 0v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37h-3.67zm-97.34 36.739v18.369h3.669v-18.37h-3.67zm7.339 0v18.369h3.69v-18.37h-3.69zm38.583 0h-33.068v18.369h36.738v-18.37h-3.67zm7.34 0v18.369h3.67v-18.37h-3.67zm7.34 0v18.369h3.669v-18.37h-3.67zm29.398 0v18.369h3.67v-18.37h-3.67zm7.34 0v18.369h3.67v-18.37h-3.67z"})),SvgChristianWaadt03=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...Xe},reactExports.createElement("path",{d:"M581.1 113.4h-102v56.7h113.3v-56.7h-5.6zm0 113.4h-102v56.7h113.3v-56.7h-5.6z"}),reactExports.createElement("path",{d:"m989.3 277.8-17-17-5.7-5.7-11.3-11.3-5.7-5.7-11.3-11.3-5.7-5.7-5.7-5.7-11.3-11.3-5.7-5.7-17-17-5.7-5.7-17-17-39.6-39.6-17.1-17.1-39.6-39.6-22.7-22.7-17-17L711.5 0H138.9l283.5 283.5v-85.1L280.6 56.7h396.9L688.8 68l11.4 11.4 5.6 5.6 11.4 11.4 11.3 11.3 17 17 11.4 11.4 5.6 5.6 5.7 5.7 5.7 5.7 11.3 11.3 5.7 5.7 17 17 11.3 11.3 28.4 28.4H705.8V113.4h-56.7v170.1H995z"})),SvgWans01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M138.9 123.67c-4.22-.82-6.47-1.9-8.7-4.17a13.62 13.62 0 0 1-3.49-5.85c-.95-3.05-1.12-4.3-1.09-9.12 0-4.49.11-5.76.93-10.61.62-3.7 1.47-7.4 2.72-12.11.95-3.49.98-3.65 1.39-4.9.24-.68.81-2.5 1.3-4.08a95.3 95.3 0 0 1 2.18-6.67c.14-.3.55-1.47.93-2.59.81-2.5 2.01-5.93 2.34-6.67l.54-1.5c.2-.51.44-1.2.55-1.5l.78-2.09c.33-.87.82-2.28 1.15-3.13l.79-2.12.54-1.5c.2-.51.44-1.2.55-1.5.1-.3.46-1.22.76-2.04l1-2.72c1.97-5.2 3.19-9.88 3.49-13.42.1-1.17.05-1.3-.52-1.44a241 241 0 0 0-11.67 0c-6.08.08-16 .25-22.1.33-13.64.19-14.38.08-17.34-2.61a7.16 7.16 0 0 1-2.45-5.72c-.03-1.74.08-2.23.7-3.27 2.26-3.86 6.4-5.47 14.92-5.85l9.12-.4c28.8-1.34 48.47-1.8 89.27-2.16 30-.24 58.44-.16 142.5.5 55.93.43 56.6.46 60.96 1.82 4.38 1.38 6.59 4.51 5.72 8.13-1.7 7-10.37 9.45-30.22 8.58-10.94-.5-73.54-1.23-123.97-1.47-40.56-.2-93.28.54-94.83 1.28a1.6 1.6 0 0 0-.85 1.14c-.1.46-.35 1.5-.52 2.31-.19.82-.43 1.8-.57 2.18l-.54 1.9c-.65 2.32-.82 2.9-3.13 9.8A251.61 251.61 0 0 1 158.09 52c-.24.6-1.44 3.95-2.07 5.86-.21.68-.51 1.47-.65 1.77-.24.57-1.41 3.83-2.07 5.85-.22.68-.52 1.47-.65 1.77-.3.62-4.82 14.34-5.66 17.14-2.4 7.9-3.57 13.89-3.6 18.32 0 2.02 0 2.02 1.72 1.83a51.7 51.7 0 0 0 5.77-.96l2.59-.57c.81-.16 1.8-.4 2.17-.52l1.9-.54c5.67-1.6 11.47-4.08 14.7-6.26 3.35-2.29 6.81-6.67 6.81-8.68 0-.3.1-1.12.27-1.85.14-.71.38-2.24.55-3.35.54-3.65 1.33-7.95 1.82-9.8.76-2.89.84-3.13 1.03-3.68.85-2.42 3.16-6.88 4.03-7.8.17-.2.76-.9 1.31-1.59a41.41 41.41 0 0 1 10.04-8.65 46.5 46.5 0 0 1 14.97-5.55c2.37-.47 10.56-.44 12.52.02 3.98.96 6.1 1.85 8.3 3.52 6.9 5.2 5.75 14.4-3.2 25.63-2.13 2.67-10.24 10.73-13.53 13.45l-3.27 2.72c-.82.68-5.3 4.06-7.13 5.34-1.85 1.28-1.74 1.68.4 1.5a97.54 97.54 0 0 0 9.72-1.5c.52-.14 1.58-.38 2.32-.57 1.5-.36 5.85-1.75 6.94-2.2a69.64 69.64 0 0 0 9.58-4.6c.38-.3.79-.53.87-.53.25 0 4.06-2.55 5.47-3.64 6.7-5.23 11.81-11.1 15-17.2a109.1 109.1 0 0 1 5.9-10.32c3.43-5.17 6.73-8.41 10.18-9.99a7.77 7.77 0 0 1 4.09-.84 9.3 9.3 0 0 1 2.85.27c.36.16 1.1.52 1.7.76a8.92 8.92 0 0 1 4.78 5.8c.66 2.8-.62 6.83-4.1 12.7-.9 1.56-2.78 4.23-8.14 11.58-6.27 8.57-8.33 12.16-9.42 16.27-.87 3.27-.2 3.54 3.15 1.31l1.64-1.14c.21-.2 1.14-.93 2.04-1.64a174.6 174.6 0 0 0 6.94-5.93l2.72-2.45 5.3-4.9c5.07-4.74 6.43-5.99 8.86-8.06 1.11-.98 2.1-1.82 2.17-1.9.08-.08.93-.82 1.9-1.63a173.66 173.66 0 0 1 9-7.27c9.3-7.05 17.27-11.35 24.65-13.31 1.96-.5 5.9-.76 8.33-.55 1.52.17 2.2.36 2.7.8 1.9 1.68 2.96 4.51 2.96 7.89 0 3.8-.93 5.22-5.44 8.33a43.56 43.56 0 0 1-7.49 4.1l-2.45 1.1c-.6.27-1.58.67-2.18.92a67.32 67.32 0 0 0-12.17 6.34c-5.57 4-11.56 11.16-12.98 15.57-1.28 3.95 1.2 7.35 5.34 7.38 2.78 0 7.6-1.96 10.4-4.22 5.36-4.33 9.77-9.96 14.29-18.21 1.96-3.57 4.24-6.23 6.75-7.9 2.64-1.76 4.9-1.87 6.53-.32 1.88 1.77 3.78 5.66 5.06 10.37.9 3.24 1.52 4.98 2.26 6.01 2.48 3.62 8.25 5.28 22.02 6.37 2.01.17 4.79.41 6.18.55 1.36.16 4.54.27 7.07.27 6.62 0 9.8-.73 12.69-2.86 2.42-1.85 5.42-3.13 7.21-3.13 3.3 0 6.53 3.02 7.81 7.27 1.53 5-1.8 10.34-8.84 14.13a34.1 34.1 0 0 1-7.35 2.8l-2.59.57c-7.6 1.63-12.87 1.77-20.82.52a60.22 60.22 0 0 1-5.36-1.1 107.9 107.9 0 0 1-17.91-6.5c-1.2-.51-2.78-1.25-7.46-3.5-1.58-.74-2.01-.74-3.07.18a143.8 143.8 0 0 1-13.07 9.18c-4.33 2.53-10.97 5.33-14.5 6.1-6.16 1.3-9.62 1.16-15.38-.6-1.88-.6-6.13-2.97-8.3-4.66a53.36 53.36 0 0 1-7.03-7.02c-.33-.44-.7-.77-.9-.77-.16 0-1.22.66-2.34 1.45-8 5.69-15.21 9.44-21.31 11.1-.79.22-2.67.38-4.5.38-2.96-.02-3.23-.05-4.94-.9-2.89-1.38-5.1-4.32-6.18-8.21-.55-1.94-.82-2.45-1.17-2.45a25 25 0 0 0-3.35 1.47 122.4 122.4 0 0 1-4.27 2.04c-.74.32-1.88.84-2.59 1.14l-2.53 1.12-2.67 1.2c-.79.35-1.5.65-1.55.65-.08 0-.74.24-1.44.57a72.35 72.35 0 0 1-11.22 3.86c-.98.25-2.45.58-3.26.8-2.07.48-10.54.46-12.66-.03a41.24 41.24 0 0 1-11.84-4.77c-1.52-.92-1.99-1.09-3.24-1.06-.81.03-1.74.16-2.04.3a58.52 58.52 0 0 0-4.93 2.5 60.82 60.82 0 0 1-5.98 3l-2.73 1.2c-.73.35-2.4 1-3.67 1.5-1.28.48-2.56 1-2.86 1.14-.92.38-6.48 2.2-7.48 2.45-.52.1-1.45.35-2.05.51-4.43 1.2-11.2 1.85-13.88 1.31Zm59.42-45.32c.9-.57 9.94-7.3 10.45-7.76.2-.19.8-.68 1.36-1.08.55-.41 1.15-.9 1.37-1.1.19-.18.78-.7 1.3-1.1 1.72-1.4 4.9-4.64 4.9-5.02 0-.57-1.39-.4-3.3.36-4.95 2.01-6.66 3.07-10.06 6.4-5.64 5.5-9.56 11.53-6.02 9.3Z"}),reactExports.createElement("path",{d:"M284.66 44.14c-3.24-.76-4.66-1.74-6.5-4.52a16.4 16.4 0 0 1-1.91-3.62c-.41-1-.38-4.16.05-5.36.87-2.48 2.91-4.6 5.72-5.96 2.47-1.17 3.32-1.4 5.69-1.4 2.4 0 3.8.53 5.3 1.91.98.93 2.54 3.08 2.54 3.52 0 .16.1.51.24.78.82 1.47 1.09 5.23.54 7.24-.7 2.59-1.27 3.65-2.83 5.2-2.12 2.13-5.52 2.97-8.84 2.2Z"}))),SvgYazid01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M255.994 18.436 189.55 124.754h132.9L255.994 18.436zm-41.76 93.027 41.772-66.445 41.772 66.445h-83.544zM189.55 3.246h132.9v13.291h-132.9V3.247z"})),SvgActiveprinciple01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{d:"M4 9.215h113.54v48.74H91.66v-23.05H75.04v58.19h42.51v25.69H4v-25.69h42.69v-58.19H29.88v23.05H4V9.215zm168.88 25.69-10.01 10.2v5.29h42.51v27.2h-42.51v15.49h84.82v25.69H134.16v-74.04l35.33-35.52h78.21v25.69h-74.82zm204.97-25.69v25.69h-42.32v58.19h42.32v25.69H264.31v-25.69h42.51v-58.19h-42.51V9.215h113.54zm51.94 0h42.88L508 44.735v74.05h-28.71v-42.32h-39.48v-26.07h39.48v-5.29l-10.2-10.2h-35.7l-10.2 10.2v73.68h-28.72v-74.05l35.32-35.52z"})),SvgActiveprinciple02=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M106.324 104.855c-2.636-2.637-4.018-6.152-4.018-9.789V55.778L89.129 45.735c-3.388-2.637-5.394-6.777-5.394-11.043 0-7.535 6.273-13.68 13.807-13.68h67.4c7.406 0 13.558 6.152 13.558 13.68 0 4.394-2.133 8.533-4.77 10.546l-13.686 10.54v39.288c0 3.643-1.503 7.152-4.14 9.789-2.509 2.509-6.024 4.019-9.667 4.019h-30.252c-3.636-.007-7.151-1.51-9.66-4.02zm39.913.624a9.95 9.95 0 0 0 7.279-3.14 10.356 10.356 0 0 0 3.012-7.28V54.02l15.062-11.546c2.134-1.63 3.516-5.018 3.516-7.91 0-5.018-4.643-10.164-10.165-10.164H97.535c-5.521 0-10.419 4.515-10.419 10.292 0 3.14 1.51 6.272 4.14 8.285l14.438 11.043v41.046c0 2.764 1.127 5.394 3.012 7.28 2.006 2.006 4.643 3.14 7.28 3.14l30.25-.007zm-37.028-10.42V52.384l-15.94-12.17c-1.63-1.255-2.637-3.388-2.637-5.394a6.885 6.885 0 0 1 6.904-6.904h67.278c3.643 0 6.776 2.382 6.776 7.152 0 1.51-.376 3.14-1.382 3.891L153.14 52.39v42.676c0 3.764-3.14 6.904-6.903 6.904h-30.252c-3.763-.007-6.776-3.14-6.776-6.91zm37.028 3.516c1.885 0 3.388-1.63 3.388-3.515V50.632l17.443-13.304c1.007-.751 1.127-1.63 1.127-2.509 0-2.006-1.51-3.516-3.515-3.516H97.536c-2.134 0-3.516 2.134-3.516 3.516 0 1.006.503 2.006 1.382 2.637l17.195 13.176v44.434c0 1.886 1.51 3.516 3.388 3.516h30.252v-.007zm-30.252-49.58-18.45-14.183h67.151l-18.45 14.183V95.06h-30.25V48.995zm26.736 42.676V48.995c0-1.127.503-2.133 1.382-2.764l11.801-8.03h-49.459l11.674 8.03c.879.63 1.382 1.63 1.382 2.764v42.676h23.22zm44.809 13.184c-2.508-2.637-4.018-6.152-4.018-9.789V34.82c0-3.643 1.382-7.28 4.019-9.789 2.636-2.509 6.152-4.018 9.788-4.018h60.503c7.03 0 13.559 6.152 13.559 13.68 0 3.26-1.007 6.655-3.261 9.037l-11.298 11.418c2.637 2.51 4.14 6.025 4.14 9.668s-1.383 7.28-4.14 9.916L267.368 85.4c2.637 2.636 4.02 6.152 4.02 9.788 0 1.758-.377 3.516-1.007 5.146-2.006 5.146-7.152 8.534-12.801 8.534h-60.247c-3.657 0-7.293-1.376-9.802-4.012zm70.037.624c4.139 0 8.03-2.51 9.54-6.4.503-1.255.751-2.637.751-4.02 0-2.636-.879-5.273-2.885-7.279l-13.055-13.056 2.509-2.381c2.006-2.006 3.26-4.77 3.14-7.535-.128-4.018-1.758-5.897-5.65-9.667l13.68-13.808c1.63-1.63 2.382-4.394 2.382-6.527 0-5.395-4.14-10.42-10.164-10.42h-60.502c-2.765 0-5.274 1.255-7.28 3.14s-3.14 4.515-3.14 7.28v60.247c0 2.764 1.255 5.273 3.14 7.28s4.515 3.139 7.28 3.139l60.254.007zm-67.151-10.42V34.813c0-3.891 3.012-6.903 6.903-6.903h60.248c3.763 0 6.903 2.885 6.903 6.903a6.93 6.93 0 0 1-2.006 4.898L246.9 55.275l5.019 4.643c1.382 1.254 2.133 3.012 2.133 4.897 0 1.885-.751 3.764-2.006 5.019l-5.018 4.897 15.437 15.438c1.382 1.382 2.006 3.14 2.006 4.897 0 4.14-3.26 6.904-6.903 6.904H197.32c-3.891-.007-6.903-3.02-6.903-6.91zm67.15 3.516c1.383 0 2.765-.751 3.261-2.133.128-.376.248-.88.248-1.255 0-.879-.375-1.758-1.006-2.51l-17.947-17.946 7.407-7.28c.752-.75 1.127-1.63 1.127-2.508 0-1.007-.503-1.886-1.127-2.51l-7.534-7.03L260.069 37.2c.63-.631 1.006-1.51 1.006-2.382 0-1.885-1.63-3.516-3.515-3.516h-60.247c-1.886 0-3.516 1.63-3.516 3.516v60.247c0 1.885 1.63 3.516 3.516 3.516h60.254v-.007zM197.32 34.812h60.248l-20.584 20.584 10.164 9.54-9.916 9.788 20.336 20.336H197.32V34.812zm53.216 56.86-15.692-14.56c-.63-.623-1.006-1.502-1.006-2.508a3.4 3.4 0 0 1 1.006-2.382l7.28-7.152-7.535-7.031c-.63-.63-1.006-1.63-1.006-2.51s.248-1.884 1.006-2.508l15.94-14.814h-49.827v53.471l49.834-.007zm29.874 13.183c-2.508-2.637-4.018-6.152-4.018-9.789V34.82c0-3.643 1.382-7.28 4.019-9.789s6.152-4.018 9.788-4.018h30.124c3.643 0 7.28 1.382 9.789 4.018s4.018 6.153 4.018 9.789v60.247c0 3.643-1.382 7.28-4.018 9.789-2.637 2.509-6.153 4.019-9.789 4.019h-30.124c-3.643-.007-7.279-1.383-9.788-4.02zm40.04.624c2.765 0 5.274-1.255 7.28-3.14 2.006-1.885 3.012-4.522 3.012-7.28V34.813c0-2.764-1.127-5.273-3.012-7.28s-4.522-3.139-7.28-3.139h-30.123c-2.764 0-5.273 1.255-7.28 3.14a9.976 9.976 0 0 0-3.14 7.28V95.06c0 2.764 1.255 5.273 3.14 7.279s4.522 3.14 7.28 3.14h30.124zm-37.154-10.42V34.813c0-3.891 3.012-6.903 6.903-6.903h30.124a6.885 6.885 0 0 1 6.904 6.903V95.06a6.885 6.885 0 0 1-6.904 6.903h-30.124c-3.89 0-6.903-3.012-6.903-6.903zm37.155 3.516c1.885 0 3.388-1.63 3.388-3.515V34.812c0-1.885-1.51-3.515-3.388-3.515h-30.124c-1.885 0-3.516 1.63-3.516 3.515V95.06c0 1.885 1.63 3.515 3.516 3.515h30.124zm-30.252-63.763h30.124V95.06h-30.124V34.812zm26.736 56.86V38.2h-23.348v53.471h23.348zm25.602 10.674c-1.382-2.261-2.134-4.77-2.134-7.407 0-2.006.503-4.14 1.382-6.025L371.91 26.91c2.382-4.77 7.152-7.783 12.425-7.783s10.044 3.013 12.425 7.783l30.124 62.005c1.006 2.006 1.382 4.019 1.382 6.152 0 2.51-.63 5.019-2.006 7.28-2.51 4.018-7.031 6.527-11.801 6.527H354.21c-4.77-.006-9.164-2.515-11.673-6.527zm71.92 3.012c3.644 0 6.904-1.758 8.79-4.898 1.006-1.63 1.63-3.515 1.63-5.521 0-1.51-.376-3.013-1.127-4.522l-30.124-62.005c-1.758-3.516-5.273-5.777-9.285-5.777-3.891 0-7.534 2.261-9.286 5.777l-30.123 62.005c-.752 1.51-1.127 3.012-1.127 4.522 0 2.006.624 3.891 1.63 5.521 1.885 3.14 5.146 4.898 8.789 4.898h60.234zm-66.144-6.655a6.733 6.733 0 0 1-1.006-3.516c0-1.127.248-2.26.751-3.26l30.124-62.006c1.127-2.381 3.515-3.89 6.152-3.89s5.018 1.509 6.152 3.89l30.251 62.005c.504 1.007.631 2.006.631 3.013 0 1.382-.255 2.636-1.006 3.764a7.01 7.01 0 0 1-5.898 3.26h-60.247a7.013 7.013 0 0 1-5.904-3.26zm66.145-.249c1.254 0 2.381-.63 3.012-1.63.376-.503.503-1.127.503-1.758a3.9 3.9 0 0 0-.375-1.63l-30.124-62.005c-.503-1.127-1.758-1.885-3.14-1.885-1.254 0-2.637.751-3.14 1.885l-30.123 62.005c-.249.503-.249 1.006-.249 1.51 0 .623.128 1.254.504 1.885.63 1.006 1.63 1.63 2.884 1.63l60.248-.007zm-30.124-65.4 30.124 61.878H354.21l30.124-61.878zm24.602 58.497-24.602-50.707-24.602 50.707h49.204z"})),SvgActiveprinciple03=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M185.987 23.31c0 .25-.25.881-.63 1.382-.5 1.26-.75 2.89-1.13 4.28-1.01 4.532-5.541 3.651-7.173 5.792v2.01c.38.501 1.26.752 1.89 1.26-.5.502-1.38 1.382-2.14 1.64-1.89.501-5.791 1.382-6.542 1.382-4.03 0-4.152-3.021-4.911-3.021-.38 0-2.52-.25-4.03-.25-.63 0-1.382.13-1.511.25 0 3.02-.38 5.282-1.64 8.812-.63 1.76-.88 3.271-.88 4.782 0 2.64 1.01 4.03.88 7.042-.25.76-.751 10.064-.751 13.715 0 1.13.13 2.261.25 3.65.13 5.913-1.64 9.063-1.26 15.105.13.5.88 1.01 1.01 1.51.13.25.13.38.13 1.13 0 1.762-.63 3.401-.63 5.162-.13 1.13-.13 2.261-1.01 3.271-.501 0-1.26.25-1.89.76-.25-.25-.63-.25-.88-.5v.129c0 .63 1.89 2.52 1.51 2.891-1.26 3.521-2.771 2.77-4.031 6.292-1.64 1.64-2.14 2.14-2.52 2.77-.76.63-5.032 1.51-7.173 1.51-1.01 0-1.89.13-2.77.13-1.89 0-3.021-.76-3.772-2.64-.25-.752-.13-2.771-.5-4.282-.13-1.38-.63-3.02-1.131-3.771-.63-1.381-1.01-2.77-1.01-4.402 0-2.641.76-5.161.88-7.423 0-.5-.63-1.26-.63-1.76.25-3.15.38-5.283.38-6.793 0-1.01 0-1.26-.13-1.76-.5-2.892-1.26-8.562-2.52-11.454-.25-.5-.129-1.01.501-1.26v-.13c0-1.51 1.51-2.39 1.01-3.65-.25.25-2.641 1.51-2.641 2.01 0-.88 2.64-3.02 2.52-4.03 0-.13-.13-.25-.25-.13 0-.5-.25-1.38-.751-2.52.25-2.77 2.77-8.812 2.64-11.574-.25-.25-.5-.25-1.26 0-.25-3.4-.379-5.912-.5-6.421l.13-1.51c-.38-.25-.63-.38-.88-.63 0 .129-.13.129-.13.129-.38 0-.38-4.402-.76-3.02 0-.501-.25-.881-.5-.881-.76 0-2.14 1.89-2.892 1.89-.25 0-.38-.25-.38-1.01l-.63.25c-.38.25-.75.38-1.26.38-1.64 0-3.9-1.01-5.282-1.01-1.26 0-2.77-.25-3.521-.63.13 0 1.89.25 2.14 0-.5-.38-1.38-.5-2.39-.5-3.772-.38-7.173-4.402-7.803-9.183-.25-.25-.25-.25-.88-.25-.5 0-.5.5-1.13.63-1.382.38-2.012 2.89-2.642 3.771-.25-1.26-.63-3.521-.63-4.531.13-2.14.5-3.021 1.64-3.901 0 .13.25.25.38.25.5-.38.88-1.13 1.26-1.64l-.75-1.38c-.502.379-.881 1.009-.881 1.51v-.13c0-.5.38-1.26.88-1.76-.25-.25-.25-.38-.25-1.01.13-3.401 2.52-1.89 6.162-4.402.63-.5 3.522-1.381 4.531-1.381.501 0 6.543 1.26 7.173 1.51 2.64-1.38 6.292-2.01 11.453-2.01 4.151 0 8.553.379 12.333.379 7.173 0 14.846-3.142 23.407-3.142 1.26 0 2.262 0 3.651.25.13-.25.5-.5.751-.38 2.14.631 3.271 2.521 4.911 3.902 2.39 1.89 4.402 5.032 6.922 8.053l-.25.25c.112.12.613.242 1.113.242zm-80.785 3.272c-1.38.25-2.261 2.77-2.64 3.4.759-1.26 2.01-2.64 2.64-3.4zm-2.261 1.39c.25-.501.25-1.131.38-1.64-.63 2.52-.38 1.38-.38 1.64zm1.001-2.65c.25.25.5.63.88.63l.13-.38c-.25 0-.751-.12-1.01-.25zm.63 4.28c.13-.129.5-.25.63-.25 0 .25-.63.5-.63.25zM127.1 68.235c0 .25.25.76.13.88h-.63c.25 0 .5-.5.5-.88zm2.52 10.444c0 .13.25.88.25 1.38-.25 0-.63-.5-1.38-1.51-.251.5-.251 1.01-.76 1.51v-1.13c0 .13.13.25.25.63v-.25c0-1.01-1.01-2.261-.13-3.142h.13c.63 0 1.13 1.26.75 2.011.26.25.64.5.89.5zm-1.14-18.876h.501l-.13 1.51c-.5.501-.88.63-1.01.13 0-.13-.129-.25-.129-.38.018-.38.268-.76.769-1.26zm.89 2.641v.25c0 .501-.25 1.131-.501 1.381 0 .38-.25.63-.63.38a.97.97 0 0 1 .13-1.26c.742-.872.871-1.001 1-.75zm-1.01 10.953h.5l.13 1.13h-.751c-.259-.25-.259-1.01.12-1.13zm.88-12.204.38-.751h.38l-.38.88-.38-.13zm0 3.012h1.26c0 .25-.38.76-.38 1.01 0-.25-.129-.63-.38-.88-.37 0-.5 0-.5-.13zm.25 10.573c.751.88.88 2.77 1.26 4.401-.25-1.13-1.01-2.01-1.13-3.4-.13.13-.25.5-.25.88 0-.241-.13-1.881.12-1.881zm0-15.855c.13-.13.25-.38.25-.5 0 .5-.63.75-.25.5zm0-.88c0-.13 0 0 .38-.881 0 .13 0 .25.13.25-.13.13-.26.38-.51.63zm.38-.881c.25-.88 1.64-3.65 1.64-3.901.12.38-.51 1.89-1.64 3.901zm.121-13.214c.38-.25.5-.25.63-.13.13.38-.371.38-.63.13zm.38 49.585.38.129-.38.63-.38-.13.38-.63zm1.76-49.706h-.5l-.13 2.52h.501l.13-2.52zm42.913-31.339-1.01-.25v.38l.88.25.13-.38zm88.759 85.195c-.13 3.4.25 4.652-1.01 5.161-1.51.63-3.4.25-5.282.25-3.9 0-3.27.76-6.162 1.01-1.76.25-4.781.88-6.792 1.26l-8.813 1.51c-.25.13-.25-.379-.75-.379.38.13-.38-.13-.76-.13-.88.38-1.64.13-2.39.13l-.63.5c.379.13.88.251 1.63.251-.13.13-.88.5-1.26.63.5.25 1.13.5 1.761.5.25 0 1.38.13 2.39.13.76.13 1.26 0 1.89 0 .501 0 9.184-.88 9.693-.88.501 0 .63.63 1.26.63h.13c.25-.38 1.26 0 .88-.63.13 0 .38.25 2.262.25v-.5l4.91-.38c-.88.13-1.76.38-2.26 1.01h-1.382l.13.25c1.26 0 2.52.25 3.521.38-1.38 0-2.39.13-3.4.25 0-.13 0-.13.13-.13-1.64-.25-3.902.13-7.044 1.01.88.13 1.632.25 2.262.25 2.14 0 4.781-.38 8.182-.759-3.522.63-9.063 1.51-9.693 1.51-.5 0-.88-.5-1.26-.5-.5 0-3.142.88-4.652 1.13-1.38.13-3.271.13-4.652.38-1.51.13-3.02.38-4.402.751-7.932 2.011-16.735 2.77-24.287 4.782-.88.13-2.891.38-3.651.38-2.52 0-2.14.38-6.542-1.26-.63-.13-1.89-1.131-3.4-2.642-3.022-2.52-5.162-6.542-5.162-10.193 0-2.261.63-5.411 1.26-6.421.38-7.172 3.271-17.366 3.901-24.037 0-.76 1.01-5.792 1.01-6.292 0-1.26-2.011-3.271-2.52-4.281-.63-1.01-1.13-3.02-1.13-4.782 0-4.652 3.65-7.301 3.65-8.933l-.25-4.401c-.13-.88-.5-2.011-1.13-2.892-.251 0-.752.25-1.01.501.25-.38.25-.88 0-1.51-.38-.13-.63-.63-.76-.88-.63-.881-.751-2.012-1.26-2.642-2.641-4.151-2.391-3.65-2.391-5.282 0-2.01.75-3.521 3.772-7.552.63-.76 2.14-1.51 2.89-2.261.881-.88-.129-2.641 2.262-3.522 3.651-2.01 7.673-3.521 11.704-4.652.25 0 .5-1.51 2.52-.75 3.15.38 4.03.5 6.042.5 7.422 0 13.964-1.26 29.949-1.26 7.422 0 12.454 1.51 13.844 4.151.5 1.26 1.13 3.772 1.13 4.911 0 6.163-8.933 4.03-9.942 6.922 0 .25.5.5.88 1.01V31c-1.26.38-2.77 1.01-4.152 1.762-.129 0-.5-.25-.63-.13-.63.38-1.38.38-1.76 0-1.51.38-3.021 1.13-4.532.88-.38 0-12.583 2.011-12.963 2.011-.63 0-1.76.13-2.641.13.38 0 .76-.13 1.13-.5h-.129c-.5.129-.63-.13-.88-.38-.88.25-2.011.759-2.641.759-.13 0-.501-.63-1.381-.38.76.5 1.13.5.63 1.64-.13.13-.25.25-.13.38 1.51-.38 3.651-.38 6.042-.76.13-.13-.25-.38-.76-.38.13 0 8.554-1.38 11.833-1.38.63 0 1.131.13 1.26.25.88 0 2.641-.5 3.272-.5.5 0 1.01.63 1.38.759-1.51.88-15.224 2.77-16.735 3.02v.501c-1.38.63-2.64 1.131-3.772 1.761h-1.63c-.501 0-.881.13-1.64.38.63.13 1.26.13 1.89.13-.501 0-1.01.379-3.272.379l.25.63c.13 0 .63-.25 1.131-.25-.88.63-1.89 1.01-1.76 2.14-.76.13-2.641.25-3.15 1.381-.13 0-.13.13 0 .25.759-.129 2.39-.25 3.771-.25.5 0 1.26-.5 1.89-.63 1.26-.38 4.911-.76 9.693-1.01-1.76.5-4.402 1.13-5.282 1.26-.5 0-1.381.38-2.011.63v.13c.13 0 .25.13.25.13.38 0 .75-.25 1.13-.25l.38.129c-.76.129-1.38 0-2.01 1.01.25.25.5.38 1.26.63 1.64.25 7.672-.25 11.323-.25 1.76 0 2.011 0 2.391.129.63.76 2.011 1.64 2.891 2.26.38.251 1.89 4.031 1.89 4.653 0 3.271-2.52 6.162-5.79 6.672-.251 0-.63.25-1.131.25-.63.25-1.381 1.13-1.64 1.76.25.13.25.25.38.25.88 0 2.01-2.01 3.141-2.01.5 0 1.26.38 1.89.63.25.13.38.76.13 1.13.63.501-5.541 2.262-5.032 2.771-.38.38-.25 1.26-.76 1.76-.38.38-1.26.501-1.51 1.26l-1.381-.25c0 .13-.13-.25.75 1.382-.63.38-1.639 1.64-2.77 1.76-1.26.13-2.52.13-3.65.13-4.402 0-4.782-1.01-8.183.88-2.14.76-4.53 1.51-4.151 3.142.25.76 0 3.15 1.76 3.15.63 0 8.053-.13 12.714-.38 1.76-.13 3.4-.38 5.032-.38 3.4 0 4.91-.5 6.041 0 .63.25.25 1.51-1.26 1.761-4.28.76-9.062 1.89-11.453 2.011-1.38 0-2.891.38-4.652.63-.25.25-.63.38-1.01.38-.63 0-1.38-.25-2.14-.13h-.13c-.5 0-.76-1.38-1.01-.759-2.26.88-2.52.25-3.52 1.26.25.5.129.63.379.76 1.26-.38 2.52-.63 3.27-.63 0 .129.13.25.13.5l.501 1.13c-.13-.129-.25-.25-.38-.25l-.13-.38v.251l-.129.13c-.38-.38-.76-.501-1.38-.501-.63 0-1.64.76-1.64 1.38-.501 0-.76 0-1.01.13.38.25.38.38.63.5 1.38.13 2.64.251 3.27.13l.251-.25c.38 0 .5 2.39 1.13 2.261l.251.25c3.901-.63 7.423-1.38 10.694-2.26-.38.129-1.01.63-1.51.759-1.01.25-2.642.38-3.651 1.26h-.13l.5.13c.501 0 1.26-.25 1.64-.63l22.398-.76c.5 0 2.39.5 2.891.5.63 0 .63-1.26 1.89-.5 1.26.13 1.76 1.01 3.021 1.51.5.5 1.13 1.381 2.011 1.89.76 1.26 3.142.501 3.142 3.021.38.88.76 2.14 1.01 2.641.785 1.468-1.226 1.347-1.356 1.597zM220.02 84.59l.25.38-.13.13c-.129.129-.129-.13-.25-.63.13 0 .13 0 .13.12zm.25.38.13.25c-.13 0-.13-.12-.13-.25zm.121-.121c.13.13.25.25.25.38l-.25-.38zm.25.371.13.38v.38l-.38-.76h.25zm0 0c.25 0 .5-.13.63 0v.38l-.13.38c.01.12-.24-.25-.5-.76zm1.64-.5c.25 0 .751-.13 1.13 0l-.5.25c-.25-.121-.38-.25-.63-.25zm2.011-1.26h-1.38v-.38h1.38v.38zm0 1.13-.63-.25.13-.38.63.25-.13.38zm2.02 3.65-2.52.38v.25l2.52-.379v-.25zm-1.51-5.03v-.38l1.01.25v.38l-1.01-.25zm7.293 3.02h-.13.13zm1.01-20.766 3.4.76c-.13-.76-.13-.13.38-1.26-1.64.25-2.78.25-3.78.5zm3.141 1.51h-.88c-.63 0-1.01 0-1.26.13.25.13.38.13 1.01.13.38-.01.759-.13 1.13-.26zm-1.252 19.006v-.38l1.89-.25v.38l-1.89.25zm2.391-.88c1.13 0 2.641-.251 3.772-.251-.76.13-1.76.38-2.641.38-.38-.009-.76-.009-1.13-.13zm3.142-4.411c.38 0 .76.13.88.25-.5.009-1.13-.25-.88-.25zm.38 28.818.76.25.129-.38-.88-.25-.01.38zm.5-29.19 2.391.251v.25l-2.39-.13v-.37zm2.77.372.251-.5.38.129-.38.38h-.25v-.01zm.752-.622h1.64v.38h-1.64v-.38zm.509 29.06h1.13v-.38h-1.13v.38zm2.132-77.004.38.25.5-.75-.38-.251-.5.75zm5.29 76.754h.501-.5zm6.413-2.01c-.88 0-1.76 0-2.52.129 1.13-.25 2.39-.13 3.142-.13h-.622zm1.14-80.536c.88.501 1.51 1.131 2.14 1.761-.38.38-.88.63-1.26.63-1.381 0-3.15-1.38-2.641-2.01l1.76-.38zm19.427 73.234c-.38-1.26.38 4.53-.501 4.03-2.14-1.01-2.641-1.89-2.641-3.9 0-.38.38-2.141.88-2.892.63.38 1.131.76 1.26.5-1.13-1.38-3.02-2.14-3.02-4.151 0-.76 1.13-1.381 1.13-2.011 0-1.01-1.13-3.4-1.76-3.901-1.01-1.01-1.01 2.14-1.01 2.77 0 1.26 2.261 5.912 2.14 8.683-.38 1.13-3.771-4.782-3.771-9.693 0-4.652 1.38-3.771 1.38-6.292l.501-27.938c.13-6.041-5.412-38.131 10.573-42.282 2.891-.38 3.02.5 3.65.63 3.401 1.01 5.412 0 8.053 0 6.793 0 7.173 11.453 7.173 15.855 0 2.14.76 6.162-.63 7.802-2.14 2.261-3.021 5.411-3.021 11.453l-.38 9.693c0 8.682 1.64 15.354 1.64 17.115v8.682c0 1.89 1.89 4.281 1.89 8.812 0 .76-.25 2.641-.25 11.574 0 7.423-4.03 12.205-9.693 12.205-6.671-.01-12.083-7.682-13.593-16.744zm21.637-53.978c0-1.51 1.01-3.4 2.011-2.52.25.63.38 1.01.38 1.76s-.88 4.031-1.51 3.522c-.501-.25-.88-2.132-.88-2.762zm1.89 10.564.25-.75c.501-1.01 1.131 1.51.76 2.14-.25 0-.38 1.51-1.01.38-.12-.51 0-1.26 0-1.77zm.501 5.662c-.38-1.38.38-1.01.76-.13.5.88 1.63 1.01 1.63 2.012 0 1.89-1.38 1.89-1.76 1.38-.371-.742-.25-2.502-.63-3.262zm93.965 54.997c.25-1.382 1.26-.881 2.14-2.262.13-.13.13-.25.13-.38 0-1.01-2.391-1.26-2.892-1.76-.5-.38-.76-1.761-1.26-2.52-.63-1.01-2.52-2.521-3.02-2.521-.501-.13 0 .13-.501.13-.63-.13-1.89-1.64-2.14-2.391-2.892-4.532-7.933-13.344-8.433-13.465-.5 0 0 .25-.63.13-.38 0-5.162-2.011-7.932-3.02-1.01-.38-1.89-.13-2.891-.251-.13.13 4.151 1.01 3.27 1.76-.129.13-.38.25-.63.13-1.01-.5-3.02-1.26-3.52-1.26a29.203 29.203 0 0 0-4.653-.38c-3.141 0-5.411.5-7.552 1.76-1.01.63 1.01 1.64 3.651 1.761.25.25-.38.751-.76.88-.759-.129-1.64.13-2.14 0-.25-.129.38-.379.25-.63-.13-.129-.25-.129-.38 0-.38.251-.25.881-.63 1.131s-.88.38-1.38.38c-.63-.13.5-.38-.13-.5h-.38c-.5 0-1.13-3.401-1.64-3.021-.25.13-.25 1.01-1.13 1.51-.25.25.25 0 .63 0 .25.13-.13.5-.63.76-1.631.38-1.13 0-2.261.38-.38 0 .25-.38.129-.63l-.88-.13c-.25.13.25.63 0 .76-1.01.759-2.77 1.01-4.152 1.51v.13c2.011-.251 4.152-.76 6.422-1.26-2.262.5-6.793 2.14-7.302 2.14-.5-.13.13-.5-.38-.5-.5-.13-3.65 1.13-5.541 1.51-1.51.5-4.911.25-5.412 1.89-1.76 7.051-4.151 11.574-6.792 12.713-.38.25-1.26 1.89-2.011 2.77-.63.76-2.261 2.011-3.4 2.642-1.382.759-4.782 1.26-6.793 1.13-4.402-.63-6.672-3.4-6.672-7.802 0-3.15-3.65 4.781 4.402-9.442.38-.76.63-1.51.63-2.391s-.25-1.76-.13-2.261c.501-2.641 1.64-5.412 2.642-8.053 4.401-11.954 6.421-15.605 9.813-23.528 1.01-2.261 2.52-5.411 3.271-7.802.13-.38 1.01-1.01 1.13-1.381 1.511-3.271 3.142-6.542 4.402-9.563.38-.88 1.51-2.641 2.14-3.901 3.902-7.803 7.052-14.845 12.585-20.887.63-.76 2.261-1.51 3.27-1.51 0 .129.13.25.251.129.63-.76 1.01-2.011 1.64-2.77.63-.76 1.51-1.64 2.261-2.642.25-.38.25-1.01 0-1.01-.38.881-1.01 1.511-1.76 1.761-.38.13.5-.63.5-1.13 0-.13-.13-.25-.25-.25-.38 0-.88.25-1.01-.13s1.381-1.51 2.77-2.011c.38-.13.881-.5 1.382-1.01.129-.13 0-.5.129-.63 3.15-1.13 4.531-1.76 6.292-1.76.76 0 1.51.129 2.39.25.501.13 3.272 2.64 3.902 2.77.5.13.13-.25.63-.13.25 0 1.64 2.262 1.64 2.771.63 2.52-.63 4.911-1.01 7.302-.13.63-1.64 2.011-1.76 2.52 0 .5.63 1.26.63 1.76-.251 1.762.25 3.652 1.51 5.412 1.38 2.011 3.65 4.402 5.411 6.543 3.4 4.28 6.422 8.812 9.313 13.084 2.891 4.531 4.782 9.434 6.672 13.085.13.25.5.129.76.25.25.13-.38.25-.251.5 0 1.26.75 2.262 1.51 2.14.13 0-.63-.759-.38-1.38.13-.25.88-.25.88-.13.13.25.13.501.13 1.51v1.762c0 1.01 0 1.26.13 1.64s1.01 4.652 1.51 5.16c.38.251.76 1.131 1.13 1.89.13.251.13.752.38.631.501-.13.13-1.01.63-1.01.63.38.13 5.032 1.511 5.282 1.64.76 3.901 8.182 5.912 12.204v-.13c0-.25-.13-.63-.13-1.009 0-.5.251-.88.63-1.01 1.261-.25 1.64 3.271 1.132 3.772-.25.25-.63-1.01-1.26-.5-.25.25-.38.75-.38 1.26 0 .63.25 1.76 1.13 4.15.13.38.13 0 .38-.129.5-.129-.13-1.13.13-1.26.25-.13.5-.25.76.13.25.38.5 1.38.5 1.89-.13 1.13-.5.25-1.761 1.51-.38.501-.63 1.131-.76 1.89-.129 1.131-.5 2.262-.88 3.772v.25c0 .76 1.89.88 2.52 1.64 1.381 1.64 1.26 2.262 1.131 3.401-.13.5-.5 3.02-1.13 4.151-1.01 1.51-3.522 2.892-4.653 2.52-.38-.25.13-1.26-.25-1.38-.13 0-.25-.13-.38 0-.5.5-.38 1.76-1.01 1.51-2.26-.656-5.411-.405-5.031-3.297zm-48.195-46.936c.88 0 2.77-.38 3.27-.76 3.522-.88 9.434-2.14 14.095-3.02.13 0 .38-.13.38-.25 0-.25-1.01-1.131-.76-1.131h.38c1.51 0 1.01.75 1.64.63.13 0 .25-.38.25-.5 0-.501-.5-1.26-.38-1.64.13-.88.25-1.381.13-1.89 0-.38-.25-.76-.13-.88.38-.38 1.761-.251 1.51-.76-.75-1.51-2.14-2.391-3.02-3.272-.25-.25-.25-.5-.13-.63l.25-.25c.38-.25.63.25 1.01.38.501 0 2.012 5.282 3.272 4.03 1.26-1.13-1.26-3.52-2.14-4.53-.251-.38-.76-.38-.881-.501-1.01-1.51-1.76-3.4-2.891-4.402-1.51-1.89-5.032-4.782-6.042-4.911-.63 0-1.76.25-2.14.75 0 .13 0 .63-.13.76-.25.25-.76.13-1.01.38-1.01 1.89-2.891 4.03-3.27 5.161-1.261 3.651-3.773 10.064-3.773 10.323-.88 1.89-.5 3.901-.76 5.912.13.63.76 1.01 1.01 1.01h.26v-.009zm-1.01-50.594.13-1.01c.129-.88 1.38-2.52 2.52-3.141.5-.13 1.38-.76 1.51-.501l-.5.88c-.251.25-.63.63-.76 1.01-.25.38-.13 1.13-.38 1.64-.38.5-.76 1.381-1.64 1.64-.25.112-.621-.518-.88-.518zm4.781-3.392.38-.75.25.129-.38.76-.25-.139zm4.41-4.151c-.25.13-.129.5.13.63.242.12.5-.88-.13-.63zm1.511-.13v-.38l-.5.13-.13.38.63-.13zm3.901 83.936c2.14 0-.5.76-3.141.88-1.27.25 1.501-.88 3.141-.88zm.88-35.361c-.25-.13-.38-1.13-.129-1.13.38-.13 1.26-.251 1.64-.251.5.13 1.381 1.13 1.64 2.01a1 1 0 0 1-.25.63c-.64-.129-1.77-.759-2.9-1.26zm1.252 34.98v-.379l.76.13v.38l-.76-.13zm1.14-.12v-.25h.63l-.13.38-.5-.13zm.75-37.63h.13c.5 0 1.01.759.76 1.26-.13.38-1.14-1.26-.89-1.26zm2.77 5.54c-.129-.13-.25 0-.379 0 0 .38-.25 1.01 0 1.26l.38.13c0-.51.25-1.269 0-1.39zm1.01 31.46h-.129c0-.13 2.77 0 2.892-.5.129-.251.25-.251.5-.251.5 0 1.76.38 2.52.88.13.13-.5.38-.5.63-.13.25.88.38.63.38-1.89-.388-3.78-.638-5.912-1.14zm39.004.88c.13-.13.25-.13.38 0 0 .25.129.5-.13.76-.13.13-.25 0-.38 0-.12-.26-.12-.51.13-.76z"})),SvgActiveprinciple04=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M193.066 29.207h-14.002c-2.596 0-3.614 2.743-3.614 5.199v6.496c0 2.743-1.732 3.178-3.9 2.02l-11.408-6.496c-1.157-.723-2.307-.862-2.307-3.178v-1.733c0-1.733-1.01-2.308-2.456-2.308h-15.44c-2.743 0-4.189-1.445-4.189-4.188v-7.367c0-2.595 1.298-4.188 4.041-4.188h53.563c2.89 0 4.188 1.445 4.188 4.188v7.367c0 2.883-1.872 4.188-4.476 4.188zm-35.371 48.94V51.29c0-3.9 2.168-5.486 5.773-3.465l7.942 4.475c1.733 1.01 4.04 2.743 4.04 5.051v13.28c0 2.89-1.157 4.189-3.613 5.634l-8.377 5.05c-3.597 2.169-5.765.436-5.765-3.17zm13.862 36.381c2.456 0 4.041-1.445 4.041-4.04l-.148-18.914c0-4.04-2.168-5.338-5.633-3.178l-8.804 5.346c-2.308 1.445-3.318 2.595-3.318 5.338l.147 11.547c0 2.743 1.733 3.901 4.328 3.901h9.387zm40.711-84.311c-2.596-1.585-3.901-3.03-3.901-5.486v-7.366c0-2.596 1.733-3.901 4.04-3.901h43.454c2.168 0 3.9 1.733 3.9 3.9v7.795c0 2.308-1.732 4.04-3.9 4.04h-21.797c-4.911 0-6.784 1.446-8.081 5.051-.863 2.308-2.456 2.89-5.199 1.158l-8.517-5.19zm-3.894 54.573V43.932c0-1.88.863-3.03 2.456-3.03 1.158 0 2.02.575 3.318 1.298l7.942 4.91c2.595 1.586 4.04 2.456 4.04 4.912 0 2.308 1.01 2.89 4.328 2.89h14.586c2.743 0 4.04 1.298 4.04 4.041l.148 6.931c0 2.891-1.445 4.041-4.188 4.041h-14.725c-3.466 0-4.189 1.585-4.189 5.346 0 3.753-1.297 4.764-3.613 6.209l-8.369 5.183c-1.298.723-2.456 1.298-3.318 1.298-1.593 0-2.456-1.01-2.456-3.17zm25.698 14.003h21.796a3.884 3.884 0 0 1 3.901 3.9v7.795c0 2.307-1.733 4.04-3.9 4.04h-43.454c-2.308 0-4.04-1.733-4.04-4.04v-6.349c0-2.456 1.297-3.9 3.9-5.486l8.517-5.199c2.455-1.445 4.328-1.157 5.198 1.158 1.298 3.598 3.17 4.18 8.082 4.18zm60.222-81.428v6.496c0 3.318-1.01 4.476-3.318 5.921l-8.804 5.486c-3.466 2.168-5.634 1.01-5.634-3.178V17.365a3.884 3.884 0 0 1 3.9-3.901h9.815c2.308 0 4.04 1.733 4.04 3.9zm-5.774 63.96c3.606 2.168 5.774.435 5.774-3.179v-32.48c0-3.902-2.168-5.634-5.774-3.466l-8.951 5.486c-2.168 1.297-3.031 2.595-3.031 4.91V70.5c0 2.89 1.158 4.188 3.606 5.634l8.376 5.19zm5.774 29.302c0 2.168-1.733 3.901-4.04 3.901h-9.823a3.884 3.884 0 0 1-3.9-3.9V91.425c0-4.188 2.167-5.346 5.633-3.178l8.804 5.486c2.308 1.446 3.318 2.596 3.318 5.921l.008 10.972zm14.313-2.02 4.328-20.359c.87-4.328 1.881-6.06 5.199-8.081l10.972-6.497c3.9-2.307 5.634-2.89 9.1-2.89h6.348c3.03 0 4.763-1.88 4.328-5.051l-3.318-22.667c-.435-2.595 0-3.753 2.596-5.198l6.783-3.754c3.03-1.732 5.051-1.297 5.774 2.168l9.962 48.365c.722 3.465-1.585 4.475-3.03 4.475-2.456 0-13.864-4.328-22.38-4.328h-7.359c-5.05 0-7.071 1.446-7.941 5.774l-3.606 19.776c-.575 2.89-2.168 4.188-5.486 4.188H312.5c-3.753 0-4.763-2.02-3.893-5.92zm8.804-45.046 10.972-46.484c.288-1.297 2.168-3.613 4.911-3.613h18.191c2.891 0 4.189 1.298 4.189 3.9v2.169c0 2.89-1.158 4.188-3.606 5.486l-8.229 4.328c-2.743 1.445-3.466 3.466-4.04 6.209L335.897 52.3c-1.586 6.644-1.298 6.784-5.774 9.527l-8.081 5.051c-3.474 2.168-5.502.435-4.632-3.318zm39.848 46.779-1.733-9.814c-.435-2.743 1.01-4.189 4.188-3.466l10.11 2.455c3.178.723 4.763 1.733 5.338 4.911l1.01 6.21c.436 2.89-1.01 3.9-3.465 3.9h-9.814c-3.179-.008-5.059-.73-5.634-4.196z"})),SvgActiveprinciple05=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M131.96 114.562V28.269c0-3.503 1.885-5.396 5.396-5.396h14.83c3.503 0 5.396 1.885 5.396 5.396v2.563h21.442c1.215 0 2.02.813 2.02 2.02v4.047c0 1.215-.814 2.019-2.02 2.019h-21.45v70.248c0 1.751.947 2.698 2.698 2.698h2.698c1.751 0 2.698-.947 2.698-2.698V80.443c0-3.502 1.885-5.396 5.396-5.396h14.83c3.503 0 5.396 1.886 5.396 5.396v34.11c0 3.503-1.885 5.397-5.396 5.397h-48.546c-3.503 0-5.388-1.886-5.388-5.388zm68.757 0V36.354c0-3.502 1.885-5.396 5.396-5.396h53.934c3.502 0 5.396 1.885 5.396 5.396V69.66c0 3.502-1.885 5.396-5.396 5.396h-33.708v39.506c0 3.502-1.885 5.396-5.396 5.396h-14.83c-3.511-.008-5.396-1.894-5.396-5.396zm39.104-47.6V41.75c0-1.751-.947-2.698-2.698-2.698h-8.086c-1.751 0-2.698.947-2.698 2.698v25.212h13.482zm0 47.6v-23.46c0-3.503 1.885-5.397 5.395-5.397h14.831c3.502 0 5.396 1.886 5.396 5.396v23.461c0 3.502-1.885 5.396-5.396 5.396h-14.83c-3.511-.008-5.396-1.894-5.396-5.396zm43.142-106.52h14.83c3.503 0 5.397 1.885 5.397 5.396v4.047c0 3.502-1.886 5.396-5.396 5.396h-14.831c-3.502 0-5.396-1.885-5.396-5.396v-4.047c0-3.51 1.885-5.396 5.396-5.396zm0 22.925h14.83c3.503 0 5.397 1.885 5.397 5.395v78.2c0 3.502-1.886 5.396-5.396 5.396h-14.831c-3.502 0-5.396-1.885-5.396-5.396V36.354c0-3.502 1.885-5.387 5.396-5.387zm32.359 83.595V80.443c0-3.502 1.885-5.396 5.396-5.396h33.708V41.75c0-1.751-.947-2.698-2.698-2.698h-5.396c-1.751 0-2.698.947-2.698 2.698v14.428c0 3.503-1.885 5.396-5.396 5.396h-14.83c-3.503 0-5.396-1.885-5.396-5.396V36.354c0-3.502 1.885-5.396 5.396-5.396h51.236c3.502 0 5.396 1.885 5.396 5.396v78.2c0 3.502-1.885 5.396-5.396 5.396h-14.83c-3.503 0-5.396-1.886-5.396-5.396V83.14h-10.784c-1.751 0-2.698.947-2.698 2.698v28.723c0 3.502-1.885 5.396-5.396 5.396h-14.83c-3.503-.008-5.388-1.894-5.388-5.396z"})),SvgActiveprinciple06=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{d:"M144.624 108.848h-34.23c0-3.36-.17-6.71 0-10.24 0-1.85 1.51-11.07-2.18-11.24-5.7 0-11.58 0-17.11.17-6.54.17-12.92.5-19.3.67-7.89.5-15.94 1.17-23.83 1.17 0-3.02.34-5.87.34-8.72.17-4.7 0-9.06-.34-13.76 0-1.68.17-3.02.17-4.7 0-4.03 0-8.22-.17-12.58 0-2.52-2.01-13.93 2.68-13.09 2.85.67 5.87.34 9.06.34 2.52 0 5.03-.17 7.89 0 1.01 0 2.35.5 3.52.5 2.18 0 4.87-.67 6.88 0 4.36 1.51 9.06-.17 13.09 1.17 4.19 1.34 8.05 0 12.08.84.84.17 1.68-.5 2.68-.84 0-2.52-.34-5.2 0-7.89.5-4.19 1.01-9.56 1.01-13.76 0-2.52 0-5.03.17-7.72 2.18 0 4.36-.17 6.54 0 4.03.17 8.05.67 12.08.84 2.68.17 5.54-.34 8.05.17 4.03.84 7.72.67 11.58.5.5 0 1.34.84 1.51 1.51.17 2.35.17 4.53.17 6.88.17 2.68.34 5.54.17 8.22 0 2.01-1.01 3.86-.67 5.54 1.01 2.85-.34 5.54 0 8.22.17 1.17-.17 2.52-.17 3.69.17 1.85.17 3.86.17 5.7 0 3.86-.5 7.72-.5 11.41 0 1.51.34 3.02.17 4.53 0 1.68-.84 3.19.34 4.7l.17.67c-2.01 1.85-.17 4.19-.5 6.38-.84 3.19-.84 6.38-.5 9.56 0 1.17-.67 2.52.17 4.19.5.84-.34 2.85-.5 4.36-.17 1.34-.34 2.85-.34 4.36v7.38c-.02.36-.19.7-.35.87zm119.96-25.84c-.33 2.01-1.01 4.2-1.34 6.21-.17 1.68 0 3.19 0 4.7-.17 1.85-.5 3.52-.67 5.2 0 .17.17 7.72-.34 11.91-.17 1.85-.17 4.36-.17 6.54-.17 0-.33.17-.33.17-5.54-.5-11.07-.84-16.61-1.17l-11.24-.5c-4.03 0-8.22-.67-12.08-.5-12.25.34-24.5.84-36.91 1.01-5.03 0-10.23.34-15.44.5-6.38 0-2.52-11.41-2.52-15.77 0-4.7-.67-9.4-.67-14.09 0-1.34-.5-2.52-.5-4.03 0-2.18.34-4.03.17-6.04 0-1.34.5-4.7.34-6.04 0 0 .5-6.04.34-6.04 0-4.19 0-8.39.17-12.58.17-4.03.67-8.22 1.01-12.08.5-4.36-1.01-9.4 0-13.76.67-2.68-.34-5.87-.5-8.89 0-2.35.34-4.7.5-7.21h24.5c.84 5.03.5 8.56.5 13.26 0 2.18.5 4.03.67 6.04-.17.5-.67 10.91-.84 14.77 0 1.01-.84 2.01-.84 3.19.17 1.51.34 3.19.84 4.87 0 .34 1.17-.17 1.85-.17 1.85 0 6.71-1.85 8.05-2.01.17-1.51.33-3.19.33-4.87-.33-1.51.67-7.72 1.01-9.56 2.85-1.51 6.88-.5 10.07-1.17 1.68-.34 3.36 0 5.54.17-.34 2.18-.5 4.36-.67 6.38-.17 1.34.33 2.35.17 3.69-.33 4.53-.67 11.24-.84 11.91l.17 3.19c-.17.5 0 1.17.34 1.51.17.17.84.17 1.17 0 5.2-2.35 10.4-5.03 16.95-4.53 0-3.69-.17-7.21 0-10.74.17-1.85 1.01-3.69 1.01-5.54.17-1.68 0-4.03 0-5.37 0-4.03.67-7.05.34-10.91-.34-3.02-.5-6.21-.67-9.23-.17-.84 0-1.68.17-2.68 8.56-.17 17.45-1.01 26.34.17-.34 2.85-.5 5.37-.67 7.89-.67-1.85.84 13.42.84 16.44 0 1.01.5 4.19.17 5.03 0 2.35.17 6.21.17 6.88.5 3.19.5 5.87.5 9.06.17 4.53.17 9.23.34 13.76 0 2.85-.5 5.7-.67 8.39-.21.79.12 1.8-.05 2.64zm-71.14-53.02v-.17.17zm76.01 64.59c2.52-4.19 5.71-8.72 8.05-12.92 2.52-4.03 4.53-8.39 6.88-12.25 4.53-8.05 9.56-16.11 14.09-24.16 2.52-4.19 4.53-8.89 7.05-13.09 1.85-3.36 4.53-6.54 6.54-9.9 1.85-3.02 3.52-6.21 5.2-9.4.5-.84.67-1.51 2.35-.5 3.86 2.35 8.05 4.03 11.91 6.21 6.21 3.19 12.08 6.71 18.12 10.07 2.01 1.34 4.19 2.52 6.21 3.86 1.01.67 1.68 1.68.84 3.19-4.36 7.05-8.22 14.26-12.42 21.81-2.68 4.36-5.37 8.56-8.05 13.09-3.19 6.21-6.71 12.75-10.24 18.96-2.18 4.03-4.7 8.05-6.88 12.08l-9.06 15.77c-13.57-7.55-27-15.1-40.59-22.82zm85.91 24.33c.17-3.69.5-7.05.84-10.57-.17.17-.33.17-.5.17 2.68-7.38 2.18-16.11 3.52-23.99.67-4.03 1.01-8.05 1.51-12.08.34-1.85-.17-6.21.84-7.72 1.34-8.39 1.68-16.78 3.19-25 1.51-7.89 3.02-15.44 3.86-23.49 25-2.85 50-5.54 75-5.54 1.85 8.39 3.86 16.61 5.7 25 1.68 7.72 3.19 15.6 4.87 23.49.17 1.01.17 2.18.33 3.19 0 .67.34 1.17.5 1.68 1.34 2.85 1.01 7.21 1.85 10.4.84 3.52.67 7.89 2.35 11.24.34 1.68.5 3.52.84 5.37 1.01 4.03 2.52 7.55 2.01 11.75 1.51 1.68 4.03 8.73.84 10.07-3.19 1.34-6.88 1.01-10.4 1.34-7.72.67-17.11 3.36-24.83 2.68-5.2-.5-5.87-7.21-8.05-11.75-.84-1.51-10.4-1.01-12.25-1.17-4.87-.67-14.43-3.86-18.96-.84-3.52 2.52-5.7 11.75-6.54 15.77h-26.52z"})),SvgBentameleon01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 1",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M98.428 58.82c-1.528.606-2.935.938-4.092 1.662-4.643 2.906-9.111 6.093-13.826 8.874-5.916 3.489-11.806 7.138-18.082 9.877-6.342 2.767-11.084.445-14.594-5.59-4.022-6.916-3.914-14.238-2.543-21.72 1.19-6.49 2.18-13.106 6.702-18.37 2.094-2.438 4.547-4.574 6.836-6.847l.664.396c.238 1.807.638 3.608.687 5.421.158 5.736-.193 11.313-1.697 17.027-1.304 4.954-.498 10.465-.433 15.727.006.456 1.562 1.388 2.2 1.244 1.653-.371 3.299-1.05 4.765-1.91 6.74-3.952 13.45-7.96 20.11-12.044 4.2-2.576 8.323-5.279 12.397-8.047.507-.345.667-1.425.697-2.176.09-2.214.032-4.435.032-6.652l1.065-.438c1.015 1.034 2.218 1.945 3.006 3.127 1.55 2.322 1.596 2.31 4.176.942 9.818-5.207 19.626-10.433 29.553-15.43 4.332-2.18 7.8-1.612 10.422 1.146 2.06 2.168 2.54 4.918 2.501 7.79-.01.833-.001 1.668-.001 2.791 3.414-1.541 6.548-3.117 9.805-4.387a154.007 154.007 0 0 1 11.983-4.125c1.375-.408 2.98-.064 4.478-.064.114.323.229.646.342.97-1.219.975-2.372 2.048-3.669 2.911-8.21 5.467-16.452 10.887-24.687 16.319-2.302 1.519-4.025 3.329-4.362 6.284-.09.796-1.585 2.184-2.155 2.058-4.272-.942-5.975 2.66-8.81 4.201l.106.82c1.664 0 3.333.092 4.99-.016 6.276-.41 12.55-.85 18.818-1.348 3.706-.295 6.671 1.154 7.766 3.956 1.173 3.002.066 6.098-3.046 8.298-2.427 1.715-4.83 3.484-7.376 5.014-4.618 2.775-7.377 7.133-10.13 11.449-2.898 4.544-2.35 9.416-.324 14.094 1.122 2.59 3.422 3.832 6.376 4.098 6.068.543 11.947-.56 17.707-2.068 9.143-2.394 17.298-6.93 24.15-13.285 3.126-2.9 5.573-6.78 7.49-10.624 2.702-5.425-.555-11.297-6.428-12.859-2.347-.623-4.613-1.553-6.97-2.113-1.788-.424-1.964-1.377-1.696-2.907.973-5.563 6.64-9.355 12.495-8.235 1.452.278 2.867.742 4.481 1.168 0-3.653.26-7.266-.06-10.83-.501-5.594.317-11.013 1.695-16.366.232-.902 1.708-2.17 2.475-2.084.901.1 2.231 1.403 2.38 2.339.888 5.587 1.453 11.222 2.199 16.833.346 2.603.856 5.186 1.293 7.777.49 2.897.93 5.804 1.482 8.69.858 4.491 1.571 9.026 2.748 13.438 1.562 5.85 3.37 11.645 5.34 17.374 1.473 4.284 3.594 8.257 8.123 10.45-.881-6.693-.354-13.221 1.111-19.69.354-1.558-.222-2.532-1.699-3.105-1.68-.652-3.318-1.42-5.012-2.033-1.876-.678-2.239-2.17-1.954-3.767.309-1.732 1.856-1.597 3.2-1.508 1.873.122 3.742.291 5.875.46.49-3.006 1.05-5.879 1.411-8.777 1.12-8.996 2.25-17.994 3.19-27.01.361-3.468.133-6.993.35-10.48.089-1.441.412-2.958 1.019-4.263 1.824-3.92 6.26-4.826 9.238-1.74 1.502 1.559 2.905 3.587 3.424 5.633 3.04 11.978 8.622 22.441 17.936 30.803 4.072 3.657 8.17 7.293 12.398 10.77.884.728 2.477 1.18 3.593.973 9.092-1.691 18.192-3.383 27.2-5.456 5.793-1.332 11.484-3.163 17.135-5.025 11.305-3.73 22.528-7.703 33.828-11.447 10.115-3.35 20.163-7.003 30.47-9.651 10.842-2.787 21.805-5.426 33.123-5.753 9.708-.28 19.23.715 27.857 5.489 10.266 5.68 15.804 14.365 15.885 26.18.015 2.226.002 4.453.002 6.515-3.98-4.475-7.971-8.75-11.723-13.22-6.915-8.238-15.935-11.305-26.48-11.368-13.339-.079-26.234 2.5-39.015 5.839-5.221 1.363-10.36 3.047-15.503 4.687-11.486 3.662-22.953 7.382-34.423 11.093-6.774 2.19-13.503 4.521-20.32 6.573-3.75 1.13-7.63 1.845-11.464 2.689-4.56 1.003-9.132 1.941-13.978 2.967 1.393.922 2.651 1.938 4.062 2.659 8.56 4.377 17.391 7.888 27.116 8.935 2.212.237 4.513 1.404 6.372 2.703 3.495 2.44 3.139 6.483-.468 8.84-2.649 1.73-5.582 1.998-8.608 1.617-8.984-1.13-17.526-3.822-25.407-8.14-6.782-3.718-13.174-8.127-19.848-12.046-1.504-.882-3.49-1.448-5.22-1.378-6.671.269-13.326 1.084-19.998 1.244-4.605.111-9.228-.521-13.844-.82-.925-.06-1.85-.112-2.874-.174-.856 4.867-1.705 9.578-2.507 14.3-.453 2.676-.806 5.37-1.257 8.048-.097.576-.415 1.118-.652 1.667-.323.756-.936 1.497-.954 2.255-.08 3.34-2.954 5.992-6.363 5.736-2.931-.218-5.143-1.696-7.089-3.751-4.199-4.434-7.244-9.551-9.393-15.217-.27-.711-.604-1.398-.912-2.106-3.163 2.805-6.029 5.782-9.329 8.172-4.855 3.516-9.985 6.666-15.066 9.87-2.57 1.621-5.219 2.966-8.46 3.19-1.52.105-2.844 1.937-4.43 2.371-3.164.87-6.44 1.365-9.685 1.925-6.538 1.126-13.082 1.083-19.246-1.489-5.92-2.47-9.657-7.282-11.233-13.295-.841-3.206-.823-6.823-.35-10.136 1.064-7.434 3.104-14.61 9.216-20.788-2.51-.113-4.246-.283-5.977-.253-5.016.09-9.681-.783-13.621-4.17-4.013-3.447-4.276-6.934-.764-10.846 5.528-6.156 11.964-11.219 19.09-15.42 1.928-1.136 2.857-2.448 2.448-4.731-.235-1.317-.043-2.708-.043-4.313-4.469 2.55-8.562 4.78-12.549 7.184-6.373 3.843-12.66 7.827-19.021 11.689-1.49.903-1.78 1.82-1.476 3.613 1.464 8.647 2.609 17.346 3.958 26.014.75 4.825 1.679 9.622 2.529 14.432.013.075.056.145.075.22 1 4.104-.497 7.529-3.606 8.253-2.845.663-6.8-2.309-7.306-5.941-1.133-8.148-2.172-16.316-2.929-24.505-.413-4.475-.159-9.008-.24-13.515-.012-.67-.21-1.34-.374-2.311h.005zm144.933-9.307c-1.559 7.927-3.116 15.854-4.792 24.382 8.263-.267 16.071-.521 24.47-.794-6.674-8.292-14.665-14.5-19.678-23.59v.002z"}),reactExports.createElement("path",{d:"M202.708 8.169c4.256.027 8.365 4.315 8.387 8.747.017 3.638-3.45 7.072-7.064 7-4.224-.085-9.461-4.885-9.435-8.649.026-3.894 3.722-7.127 8.112-7.098z"}))),SvgFakeart01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M44.592 9.85H16.068v19.256c0 4.36 3.554 7.914 7.914 7.914s7.914-3.555 7.914-7.914V25.72h12.696v84.516c0 4.359 3.555 7.914 7.914 7.914s7.914-3.555 7.914-7.914V25.678h12.696v3.386c0 4.359 3.555 7.914 7.915 7.914 4.359 0 7.914-3.555 7.914-7.914V9.85H44.592zm171.697 15.828c4.36 0 7.914-3.555 7.914-7.914s-3.555-7.914-7.914-7.914h-63.482v108.258h63.482c4.36 0 7.914-3.555 7.914-7.914s-3.555-7.914-7.914-7.914h-47.654V71.893h22.811c4.36 0 7.915-3.555 7.915-7.914 0-4.36-3.555-7.914-7.915-7.914h-22.81V25.678h47.653zm136.486 0c4.359 0 7.914-3.555 7.914-7.914s-3.555-7.914-7.914-7.914h-58.192c-4.359 0-7.914 3.555-7.914 7.914s3.555 7.914 7.914 7.914h21.203v76.602h-21.203c-4.359 0-7.914 3.554-7.914 7.914s3.555 7.914 7.914 7.914h58.192c4.359 0 7.914-3.555 7.914-7.914s-3.555-7.914-7.914-7.914h-21.203V25.678h21.203zm142.834 82.272-6.645-22.133v-.043l-21.033-70.253v-.042c-.043-.17-.127-.339-.17-.508-.042-.085-.042-.17-.084-.254-.043-.085-.085-.212-.127-.296a5.757 5.757 0 0 0-1.016-1.608s0-.043-.042-.043c-.127-.127-.212-.254-.339-.38a.743.743 0 0 1-.17-.212c-.084-.085-.168-.127-.253-.212-.127-.085-.212-.211-.339-.296l-.084-.085a6.999 6.999 0 0 0-1.524-.93c-.127-.043-.254-.128-.38-.17-.085-.042-.128-.042-.212-.085-.17-.084-.339-.127-.55-.211h-.043c-.042 0-.127-.043-.169-.043-.17-.042-.38-.084-.55-.127-.085 0-.212-.042-.296-.042-.17-.042-.297-.042-.466-.085-.127 0-.254 0-.38-.042h-1.186c-.17 0-.338.042-.508.085-.084 0-.169.042-.254.042-.211.042-.38.085-.592.127-.042 0-.127.042-.17.042h-.042c-.211.043-.38.127-.592.212-.043.042-.127.042-.17.085a1.976 1.976 0 0 0-.423.211c-.508.254-.973.55-1.439.889-.042.042-.084.042-.127.085-.127.084-.211.211-.338.296-.085.084-.17.17-.254.211-.042.043-.127.127-.17.212a2.738 2.738 0 0 0-.338.38l-.042.043c-.381.508-.72 1.058-1.016 1.65-.042.085-.085.212-.127.297-.042.085-.042.17-.085.254-.084.17-.127.339-.169.508v.042l-21.034 70.253v.085l-6.602 22.092c-1.27 4.19 1.143 8.59 5.333 9.86.762.212 1.523.339 2.285.339 3.428 0 6.56-2.2 7.576-5.629l4.909-16.42h30.387l4.909 16.42c1.016 3.428 4.19 5.629 7.575 5.629.762 0 1.524-.127 2.286-.339 4.147-1.27 6.517-5.67 5.29-9.86zm-35.296-27.72H449.86l10.453-34.83 10.453 34.83h-10.453z"})),SvgHeracles01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M325.757 62.199c3.089-5.395 8.111-13.246 11.088-18.418 2.307-4.093 6.028-6.064 10.046-3.572 4.874 3.051.93 6.437-1.042 9.265-4.8 6.772-18.194 24.333-18.194 24.333s.26 7.367 3.832 11.311c4.54 4.986 9.376 0 13.47-2.977 1.04-.78 1.785-1.6 2.715-2.567a39.6 39.6 0 0 0 2.344-2.641c1.303-1.638 2.568-2.903 4.502-1.414 2.344 1.748.075 4.316-.893 6.139-2.902 5.618-6.548 10.753-11.422 14.92-7.888 6.66-13.171 5.32-17.078-4.242-.93-2.344-2.381-7.255-3.423-10.157-4.39 6.51-5.916 9.487-9.45 12.576-5.693 5.06-11.944 9.487-19.534 6.436-7.367-2.976-7.479-10.901-7.479-17.598 0-12.986 4.205-24.631 12.092-34.938 4.316-5.618 9.6-10.38 17.488-8.743 7.59 1.6 8.408 8.52 10.008 14.548.335 1.525.335 2.38.93 7.739zm-5.432 5.32c-.93-5.804-1.153-7.33-2.418-10.567-3.386-8.446-8.297-9.19-15.292-3.423-7.218 5.954-11.609 21.73-8.67 30.473 2.233 6.623 6.065 7.516 12.093 5.172 6.623-2.568 14.399-14.623 14.287-21.655z"}),reactExports.createElement("path",{stroke:"#000",strokeMiterlimit:10,strokeWidth:.75,d:"M225.522 116.67c-10.232-.484-18.008-5.88-20.278-13.693-2.344-8.148.484-15.106 7.665-19.384.967-.596 2.158-1.042 2.828-1.526.297-.223.446-.67.26-1.005-.335-.855-1.042-2.492-1.6-3.757-4.278-10.046-.446-18.083 9.823-21.543 10.641-3.572 21.059.781 24.11 10.195.707 2.12 1.674 4.8-.67 6.25-2.381 1.489-4.353-.558-5.841-2.27-4.279-4.873-9.6-5.952-15.664-4.353-3.87 1.005-5.619 3.833-5.246 7.74.297 3.832 2.306 6.362 6.51 6.51.596.038 1.154 0 1.712.038 4.279.298 8.781.26 11.05 4.948.67 1.34.522 3.014-.706 3.907-3.907 3.014-8.26 1.972-12.316.484-4.762-1.749-9.376-3.61-13.32 1.116-2.232 2.679-2.046 5.879-.41 8.818 2.94 5.209 7.666 7.702 13.581 7.18 2.79-.222 5.507-1.599 8.26-2.231 2.01-.447 4.093-.447 5.247 1.748s0 3.907-1.452 5.284c-3.98 4.018-9.264 5.171-13.543 5.543z",className:"st0"}),reactExports.createElement("path",{d:"M233.708 45.381c-3.647-.037-4.019-2.344-2.902-4.614 4.241-8.966 8.632-17.933 13.245-26.751 1.228-2.27 3.832-3.647 6.66-2.195s3.237 4.427 1.935 6.622c-5.358 8.707-11.162 17.19-16.855 25.636-.483.744-1.45.967-2.083 1.302zm-18.715-7.069c-5.619.186-14.92-.335-33.859 1.228-22.026 1.86-25.3 15.7-24.593 28.016.148 2.493 3.72 2.903 4.39.484 2.865-10.604 8.893-16.594 25.375-17.078.67-.037 1.154.707.819 1.302-7.516 14.548-15.516 40.556-15.516 40.556-2.492 6.139 3.163 7.888 11.162 4.986 6.214-2.233 10.94-6.437 14.586-11.535 2.232-3.125-.745-6.808-4.242-5.246-2.084.93-4.093 1.749-5.655 2.27-.782.26-1.563-.484-1.34-1.302l8.632-28.426c.447-1.489 1.786-2.456 3.386-2.419l17.078.521c3.46 0 6.288-2.456 6.288-7.07 0-3.571-2.977-6.436-6.511-6.287z"}),reactExports.createElement("circle",{cx:258.971,cy:39.093,r:8.632}),reactExports.createElement("circle",{cx:282.374,cy:39.093,r:8.632}),reactExports.createElement("path",{stroke:"#000",strokeMiterlimit:10,d:"M269.315 56.246c-2.79-.856-5.767.706-6.623 3.497l-2.01 6.511-1.971 6.437-1.898 6.437c-.595 2.158-1.228 4.316-1.786 6.474-1.19 4.316-2.27 8.669-3.311 13.022-.26 1.116-.521 2.195-.744 3.312-.26 1.116-.484 2.195-.707 3.31-.484 2.196-.893 4.429-1.34 6.698-.26 1.414.186 2.94 1.414 3.907 1.712 1.414 4.279 1.19 5.693-.558l.335-.41c.744-.632 1.413-1.339 2.083-2.046.67-.707 1.302-1.451 1.972-2.195 1.265-1.488 2.419-3.014 3.61-4.54l3.422-4.539c1.154-1.488 2.233-2.976 3.237-4.316l.15-.223c.78-1.004.966-2.418.334-3.683-.856-1.712-2.94-2.382-4.65-1.526-1.117.558-2.01 1.563-2.903 2.195-.781.596-2.79 2.419-3.758 3.312.819-3.163 1.712-6.325 2.753-9.45 1.34-4.13 2.828-8.186 4.465-12.242a170.49 170.49 0 0 1 2.567-5.99c.447-.967.893-1.972 1.377-2.94l.707-1.45c.223-.484.52-.968.707-1.414v-.038c.149-.26.26-.595.335-.892a5.279 5.279 0 0 0-3.46-6.66z",className:"st1"}))),SvgHoroMox01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M245.989 35.521h-18.488v19.941h18.488v37.017h19.982V55.462h18.488V35.521h-18.488z"}),reactExports.createElement("path",{d:"M256 6.78c-31.567 0-57.2 25.673-57.2 57.24 0 31.567 25.673 57.2 57.2 57.2s57.2-25.673 57.2-57.2c0-31.567-25.673-57.24-57.2-57.24zm0 108.99c-28.54 0-51.79-23.21-51.79-51.79 0-28.54 23.21-51.75 51.79-51.75s51.75 23.21 51.75 51.79c0 28.54-23.21 51.75-51.75 51.75z"}))),SvgHoroMox03=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M236.122 7.25H199.25v39.755h36.872v73.745h39.756V47.005h36.872V7.25h-76.628z"})),SvgIcecreamgreezer01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"m409.65 121.291-.325-113.038c0-1.422-.488-1.87-1.057-1.87h-61.882c-.569 0-1.057.488-1.057 1.87l-1.95 113.038c0-.203.488.285 1.057.285h14.586a1.05 1.05 0 0 0 1.057-1.057V91.102c0-.61.487-1.057 1.056-1.057h30.8a1.05 1.05 0 0 1 1.056 1.057v29.417c0 .61.487 1.057 1.097 1.057h14.465c.61 0 1.097-.488 1.097-.285zm-49.53-52.375V43.643c0-.61.487-1.056 1.056-1.056h30.799c.61 0 1.056.488 1.056 1.056v25.273a1.05 1.05 0 0 1-1.056 1.057h-30.799c-.569.04-1.056-.447-1.056-1.057zm-94.957-26.004h12.636c.61 0 1.056.488 1.056 1.056v42.014a1.05 1.05 0 0 1-1.056 1.056h-15.074a1.05 1.05 0 0 0-1.057 1.057v32.384a1.05 1.05 0 0 0 1.057 1.056h64.93a1.05 1.05 0 0 0 1.056-1.056V88.095a1.05 1.05 0 0 0-1.056-1.057h-14.75a1.05 1.05 0 0 1-1.056-1.056V43.968c0-.61.487-1.056 1.056-1.056h14.709a1.05 1.05 0 0 0 1.056-1.056V7.44a1.05 1.05 0 0 0-1.056-1.056h-62.451a1.05 1.05 0 0 0-1.057 1.056v34.375c0 .61.447 1.097 1.057 1.097zM183.37 7.4l-4.51 113.038a1.07 1.07 0 0 0 1.057 1.138h64.767a1.05 1.05 0 0 0 1.056-1.057v-18.325a1.05 1.05 0 0 0-1.056-1.056h-29.336c-.61 0-1.097-.488-1.057-1.097l.57-25.233c0-.569.487-1.056 1.056-1.056h30.392a1.05 1.05 0 0 0 1.057-1.057V54.33a1.05 1.05 0 0 0-1.057-1.057h-29.905c-.61 0-1.097-.487-1.056-1.097l.528-23.85c0-.57.487-1.057 1.056-1.057h31.206a1.05 1.05 0 0 0 1.056-1.057V7.44a1.05 1.05 0 0 0-1.056-1.056h-63.671c-.569 0-1.056.447-1.097 1.016zm-79.964 33.684 12.556.243c.61 0 1.097.529 1.056 1.138l-4.429 78.014a1.069 1.069 0 0 0 1.057 1.137h35.268a1.05 1.05 0 0 0 1.057-1.056l1.91-78.136c0-.568.487-1.056 1.056-1.056h16.537a1.05 1.05 0 0 0 1.057-1.056V7.44a1.05 1.05 0 0 0-1.057-1.056h-65.296a1.05 1.05 0 0 0-1.056 1.056l-.772 32.546a1.11 1.11 0 0 0 1.056 1.098z"})),SvgJeanSaucisse01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M257.748 21.861h-7.846v91.433h-6.749V37.107h-7.846v84.074h7.846v-.04h6.749v.04h7.846V60.158h24.027l16.669 61.226 8.05-.284-27.036-99.239h-21.71zm0 30.45V29.709h15.734l6.138 22.604h-21.872z"}),reactExports.createElement("path",{fill:"#FFF",d:"m298.281 121.628-.04-.162-16.628-61.105H257.95v60.983h-8.25v-.041h-6.302v.04h-8.253v-84.44h8.253v76.147h6.302V21.658h29.921l.041.163 27.117 99.523-8.497.284zm-40.777-61.673h24.393l16.669 61.226 7.643-.285-26.914-98.831h-29.19v91.432h-7.155V37.31h-7.44v83.668h7.44v-.04h7.155v.04h7.44V59.955h-.04zm22.36-7.44h-22.36v-23.01h16.059l6.301 23.01zm-21.913-.407h21.426l-6.058-22.197h-15.368v22.197z",className:"st0"}),reactExports.createElement("path",{d:"M317.633 105.488 290.679 6.575h-63.137l11.708 22.726 7.684-14.88h37.768l26.914 98.873 2.155 7.846h7.561l.163.041v-.04l.203-.732 1.952-7.156 13.538-49.64-7.562-2.073-11.993 43.948zM239.21 21.251l-5.651-10.976h11.302L239.21 21.25z"}),reactExports.createElement("path",{fill:"#FFF",d:"m321.617 121.425-.366-.081h-7.684l-2.195-8.01-26.873-98.71h-37.484l-7.805 15.124-12.034-23.376H290.8l.04.162 26.751 98.182 11.83-43.379 7.969 2.155-.04.203-15.734 57.73zm-7.725-.488h7.44l15.571-57.16-7.196-1.952-12.115 44.436-27.076-99.483h-62.65l11.384 22.076 7.562-14.636h38.053l.04.163 28.988 106.556zM239.21 21.7l-5.977-11.628h11.993L239.21 21.7zm-5.326-11.221 5.326 10.367 5.325-10.367h-10.651z",className:"st0"}),reactExports.createElement("path",{d:"M197.294 21.861v30.451h-15.001V14.096h-7.847v38.216h-7.602v7.846h7.602v61.023h7.847v-.041h46.062v-7.846h-46.062V60.158h15.001v30.491h31.061v-7.846h-23.214V60.158h23.214v-7.846h-23.214V29.708h23.214v-7.847h-23.214z"}),reactExports.createElement("path",{fill:"#FFF",d:"M182.496 121.384h-8.253V60.402H166.6v-8.253h7.643V13.893h8.253v38.256h14.595V21.658h31.467v8.253h-23.214v22.197h23.214v8.253h-23.214V82.56h23.214v8.253h-31.467V60.32h-14.554v52.688h46.062v8.253h-46.103v.122zm-7.846-.406h7.44v-.04h46.061v-7.44H182.09V59.954h15.408v30.491h30.653v-7.44h-23.213v-23.05h23.213v-7.44h-23.213v-23.01h23.213v-7.44h-30.653v30.49H182.13V14.3h-7.44v38.257h-7.643v7.44h7.643v60.982h-.04z",className:"st0"}),reactExports.createElement("path",{d:"m345.115 65.647-3.008-11.465-3.049-11.465-8.416 8.375-8.375 8.334 11.424 3.09z"}),reactExports.createElement("path",{fill:"#FFF",d:"m345.4 65.931-23.54-6.383 17.32-17.197 6.22 23.58zm-22.726-6.586 22.197 6.017-5.894-22.238-16.303 16.221z",className:"st0"}))),SvgJudoKazate01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M147.257 12.605h25.453v102.789h-25.453zm153.767 0h25.453v102.789h-25.453z"}),reactExports.createElement("path",{strokeWidth:.363,d:"M172.79 12.612v25.453H70V12.612zm115.51.005V38.07H185.512V12.617zm.011 38.661v25.453H185.522V51.278zm.011 38.662v25.452H185.533V89.939zM121.956 45.428l17.997 17.998-51.941 51.941L70.014 97.37zm242.792 69.967h-25.452V12.605h25.452z"}),reactExports.createElement("path",{strokeWidth:.363,d:"M442 12.613v25.452H339.21V12.613zm-.006 84.769-17.998 17.997-51.941-51.941 17.997-17.998z"}))),SvgJulioGlatt01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null","data-name":"Layer 1"},reactExports.createElement("path",{fill:"none",stroke:"#000",strokeMiterlimit:10,strokeWidth:7,d:"m256.24 119.306-40.779-11.562V95.082l-19.791-6.188V23.35l61.606-14.655 59.054 14.671V88.99l-19.791 5.438v13.795l-40.284 11.068-.016.016zm-30.971-18.977 31.018 8.787 30.444-8.373V86.95l19.791-5.438V31.02l-49.294-12.249-51.734 12.312V81.67l19.79 6.188v12.455l-.015.016z",className:"cls-1"}),reactExports.createElement("path",{d:"M229.559 68.465V51.003h-4.832v-1.93h11.817v1.93h-4.832v17.462h-2.17.017zm16.952.208c-.51 0-1.02-.048-1.547-.128-.526-.096-1.004-.24-1.483-.478s-.893-.527-1.26-.877c-.383-.367-.686-.782-.925-1.244s-.398-.957-.494-1.468a8.378 8.378 0 0 1-.144-1.562v-2.632c0-.51.048-1.02.128-1.547.08-.526.255-1.004.494-1.467.24-.462.543-.877.925-1.244.383-.367.798-.67 1.26-.893s.941-.383 1.467-.478c.51-.08 1.037-.128 1.547-.128s1.02.048 1.547.128 1.005.239 1.467.478c.463.223.877.526 1.26.893s.686.782.925 1.244c.24.463.399.941.495 1.467s.127 1.037.127 1.547v2.297h-9.409v.335c0 .334.032.67.08 1.004.048.335.143.654.287.957s.335.574.574.83c.24.255.494.462.797.605.287.144.606.256.941.32.335.063.67.095 1.005.095.383 0 .765-.032 1.132-.08a3.76 3.76 0 0 0 1.069-.319c.335-.16.638-.382.877-.685s.383-.638.414-1.021h2.185a4.164 4.164 0 0 1-.303 1.26c-.16.399-.398.765-.67 1.1-.287.32-.606.606-.972.83s-.766.414-1.18.542c-.415.127-.83.223-1.26.27s-.861.065-1.308.065l-.048-.016zm-3.668-8.038h7.224V60.3c0-.335-.031-.67-.08-.989s-.143-.638-.286-.956c-.144-.303-.32-.59-.543-.83s-.478-.446-.781-.606c-.303-.16-.606-.27-.94-.335s-.655-.111-.99-.111-.67.032-.988.111-.638.192-.941.335c-.303.16-.558.367-.782.606-.223.24-.398.527-.542.83-.144.303-.24.621-.287.956s-.08.654-.08.99v.334h.016zm14.146 7.83V66.52h4.433v-9.84h-4.003v-1.93h6.172v11.77h4.003v1.945h-10.605zm5.294-16.027c-.223 0-.446-.032-.653-.096a1.344 1.344 0 0 1-.894-.893c-.063-.207-.095-.43-.095-.654s.032-.446.095-.654c.064-.207.176-.398.335-.558.16-.16.335-.27.559-.335s.43-.111.653-.111.447.032.654.111.399.192.558.335c.16.16.272.335.335.558.064.208.112.431.112.654s-.032.447-.112.654-.191.399-.335.558c-.16.16-.334.271-.558.335-.207.064-.43.096-.654.096zm14.529 16.235a8.74 8.74 0 0 1-1.117-.08 4.302 4.302 0 0 1-1.1-.287 4.005 4.005 0 0 1-.973-.574 3.37 3.37 0 0 1-.75-.83 3.03 3.03 0 0 1-.43-1.02 4.486 4.486 0 0 1-.128-1.132c0-.495.08-.973.24-1.436s.398-.877.733-1.228.718-.638 1.148-.86c.431-.224.878-.4 1.356-.527.478-.128.957-.223 1.435-.271s.957-.064 1.436-.064h2.854V59.31a3.08 3.08 0 0 0-.111-.845 2.377 2.377 0 0 0-.335-.765 2.314 2.314 0 0 0-.59-.59 3.696 3.696 0 0 0-.75-.383c-.271-.096-.542-.144-.813-.192a7.507 7.507 0 0 0-.845-.047c-.383 0-.766.032-1.149.095a3.789 3.789 0 0 0-1.084.367 2.339 2.339 0 0 0-.845.782 1.93 1.93 0 0 0-.335 1.084h-2.185c0-.447.08-.861.223-1.292s.367-.797.638-1.148.59-.638.957-.877.765-.447 1.18-.574c.415-.144.845-.24 1.276-.287.446-.048.877-.08 1.324-.08.478 0 .94.032 1.403.096.462.063.909.175 1.34.35.43.16.829.4 1.212.67.382.287.701.622.956 1.005.272.383.447.813.559 1.26.111.462.16.925.16 1.403v9.154h-2.186V66.12a4.25 4.25 0 0 1-.797 1.148 4.649 4.649 0 0 1-1.148.846 4.76 4.76 0 0 1-1.34.462 8.35 8.35 0 0 1-1.403.128l-.016-.032zm.813-1.93c.319 0 .638-.032.957-.08.319-.048.622-.127.925-.239s.574-.255.845-.446c.271-.192.494-.415.67-.686s.319-.558.383-.877.111-.638.111-.941v-1.18h-2.854c-.287 0-.574 0-.877.031-.303.016-.59.064-.878.112a8.265 8.265 0 0 0-.845.223c-.287.08-.542.208-.797.383-.24.176-.447.383-.574.654s-.208.542-.208.813c0 .367.096.718.287 1.021.192.319.447.574.75.75s.638.303 1.005.366c.366.064.717.096 1.1.096z"}))),SvgJulioGlatt02=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{"data-name":"Layer 1"},reactExports.createElement("rect",{width:61.68,height:47.89,x:90.865,y:61.12,rx:4.01,ry:4.01}),reactExports.createElement("rect",{width:43.87,height:41.92,x:46.995,y:18.98,rx:4.01,ry:4.01}),reactExports.createElement("path",{d:"M429.995 60.75a4.01 4.01 0 0 1-4.01-4.01V46.33h-3.74v-.12h-37.9v.12h-3.74v10.41a4.01 4.01 0 0 1-4.01 4.01h-37.35v.08h-156.91a4.01 4.01 0 0 1-4.01-4.01V22.99a4.01 4.01 0 0 0-4.01-4.01h-17.77a4.01 4.01 0 0 0-4.01 4.01V56.9a4.01 4.01 0 0 0 4.01 4.01h17.41a4.01 4.01 0 0 1 4.01 4.01v40.09a4.01 4.01 0 0 0 4.01 4.01h157.57v-.08h37.62a4.01 4.01 0 0 0 4.01-4.01V92.28a4.01 4.01 0 0 1 4.01-4.01h33.88a4.01 4.01 0 0 1 4.01 4.01v12.65a4.01 4.01 0 0 0 4.01 4.01h33.91a4.01 4.01 0 0 0 4.01-4.01V64.78a4.01 4.01 0 0 0-4.01-4.01h-30.99l-.01-.02z"}))),SvgJulioGlatt03=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"m313.102 30.014.223 27.651L340.82 30.17l-27.718-.156zM238.996 64.4a2.813 2.813 0 0 0-.467-.711 2.356 2.356 0 0 0-.667-.523 3.48 3.48 0 0 0-.8-.3c-.278-.055-.567-.089-.856-.089s-.566.034-.855.09a2.69 2.69 0 0 0-.8.3 2.355 2.355 0 0 0-.667.522 3.026 3.026 0 0 0-.467.711c-.122.267-.2.534-.245.823a5.408 5.408 0 0 0-.066.844v.3h6.212v-.3a5.34 5.34 0 0 0-.066-.844 3.67 3.67 0 0 0-.245-.823h-.011zm24.15 3.412a4.01 4.01 0 0 0-.745.1 13.83 13.83 0 0 0-.722.189 2.566 2.566 0 0 0-.678.333c-.211.145-.378.334-.5.556s-.178.467-.178.7c0 .323.078.611.245.89.166.277.378.488.644.644.267.156.556.267.867.322a5.33 5.33 0 0 0 1.756.011c.278-.044.534-.11.79-.2.255-.089.5-.222.722-.389s.422-.366.578-.589c.155-.222.266-.478.333-.744a4.03 4.03 0 0 0 .089-.812v-1.022h-2.445c-.245 0-.49 0-.745.022l-.01-.011zm28.351 18.627V30.014H262.89V8.398l-57.602-.445-34.108 34.064v21.616h28.607v56.414h78.963l34.352-33.62h-21.616l.011.012zm-43.01-29.096c.056-.178.145-.345.29-.478.132-.133.3-.233.477-.289.178-.056.367-.089.567-.089s.389.033.567.089c.177.056.344.156.477.289.134.133.234.3.3.478s.09.367.09.567-.034.389-.09.566-.155.345-.3.478c-.133.134-.3.234-.477.278-.178.056-.367.078-.567.078s-.39-.022-.567-.078a1.154 1.154 0 0 1-.478-.278c-.133-.133-.233-.3-.289-.478s-.078-.366-.078-.566.023-.39.078-.567zm-20.805.744h-4.145v15.015h-1.856V58.087h-4.146v-1.655h10.158v1.655h-.01zm13.515 9.958h-8.091v.29c0 .288.022.577.066.866.045.29.134.556.245.823s.289.5.489.71.433.39.678.523c.244.134.522.223.8.278.289.056.578.078.867.078.333 0 .656-.022.978-.067.322-.044.622-.133.922-.267.3-.133.545-.333.756-.589.211-.255.333-.555.367-.878h1.878a3.993 3.993 0 0 1-.256 1.09 3.426 3.426 0 0 1-.578.944c-.244.278-.522.523-.833.712s-.656.355-1.011.466a5.265 5.265 0 0 1-1.09.223c-.366.033-.744.055-1.122.055a7.67 7.67 0 0 1-1.323-.11 4.574 4.574 0 0 1-2.356-1.168c-.322-.311-.589-.667-.789-1.067s-.344-.822-.433-1.256a6.693 6.693 0 0 1-.122-1.333V66.1c0-.434.033-.878.11-1.323a4.279 4.279 0 0 1 1.213-2.323c.321-.322.688-.578 1.077-.767s.811-.333 1.256-.41.89-.112 1.323-.112.877.033 1.322.111a4.387 4.387 0 0 1 2.334 1.178 4.28 4.28 0 0 1 1.211 2.323c.078.445.111.89.111 1.323v1.978-.034zm13.17 5.057h-9.114v-1.678h3.812v-8.458h-3.445V61.31h5.301v10.114h3.445v1.678zm13.858 0h-1.878v-2.045c-.167.367-.4.69-.69.99-.3.3-.622.533-.988.722a4.25 4.25 0 0 1-1.145.4 6.3 6.3 0 0 1-1.211.111c-.323 0-.634-.022-.967-.067a4.725 4.725 0 0 1-.945-.244c-.3-.122-.578-.29-.834-.49s-.477-.444-.644-.71a2.755 2.755 0 0 1-.378-.89 4.126 4.126 0 0 1-.111-.978c0-.422.067-.833.2-1.233.133-.4.344-.756.633-1.056s.612-.545.99-.734a5.918 5.918 0 0 1 1.166-.455c.412-.111.823-.19 1.234-.222s.823-.056 1.234-.056h2.445v-.911c0-.245-.034-.49-.09-.723a1.746 1.746 0 0 0-.3-.655 2.243 2.243 0 0 0-1.155-.834 3.037 3.037 0 0 0-.7-.156 5.362 5.362 0 0 0-.723-.044c-.333 0-.666.022-.989.078a2.916 2.916 0 0 0-.933.322 1.89 1.89 0 0 0-.723.667c-.189.289-.278.6-.278.933h-1.878c0-.377.067-.744.19-1.11a3.57 3.57 0 0 1 .544-.99c.233-.289.511-.545.822-.756s.656-.378 1.012-.5c.355-.122.722-.2 1.1-.244a9.695 9.695 0 0 1 2.345.01c.4.056.789.156 1.156.29.366.144.722.333 1.044.578s.6.533.823.866c.222.334.389.7.478 1.09s.133.789.133 1.2v7.868l.011-.022z","data-name":"Layer 1"})),SvgJulioGlatt04=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null","data-name":"Layer 1"},reactExports.createElement("path",{d:"M337.094 11.522v16.56a2.943 2.943 0 0 0-.177.188c-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.234.211-.334.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.111.1-.222.211-.322.322-.122.1-.234.211-.333.334-.112.1-.223.21-.323.322-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.11.1-.222.21-.322.322-.122.1-.233.21-.333.333-.111.1-.222.211-.322.322-.122.1-.233.211-.333.333-.123.1-.222.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.222.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333a3.346 3.346 0 0 0-1.022 1.6c-.155.388-.244.81-.244 1.243v26.2a1.43 1.43 0 0 0-.178.19c-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.067.055-.122.11-.189.177h-73.536V63.567a3.328 3.328 0 0 0-3.332-3.332h-25.257V43.687a1.43 1.43 0 0 0 .178-.19c.122-.1.233-.21.333-.332.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333a1.43 1.43 0 0 0 .189-.178h131.046m3.332-3.332H204.338v.333h-.334v.334h-.333v.333h-.333v.333h-.333V10h-.333v.333h-.334v.334h-.333V11h-.333v.333h-.333v.333h-.333V12h-.334v.334h-.333v.333h-.333V13h-.333v.333h-.333v.333h-.334V14h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334V63.59h28.589v56.377h78.912v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-27.91h.111v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333V8.19l.022.144z"}),reactExports.createElement("path",{d:"M341.315 8.034h-78.768v21.602h28.589v56.377h21.591V29.636h28.588V8.034zm-118.163 62.63V55.659h-4.142v-1.655h10.151v1.655h-4.143v15.005h-1.865zm14.572.178c-.444 0-.877-.034-1.322-.111a4.57 4.57 0 0 1-2.354-1.167c-.322-.31-.589-.666-.789-1.066s-.344-.822-.433-1.255a6.689 6.689 0 0 1-.122-1.333v-2.265c0-.434.033-.878.111-1.322.078-.444.211-.866.422-1.255.2-.389.467-.744.789-1.066.322-.322.688-.578 1.077-.767s.81-.333 1.255-.41.889-.112 1.322-.112.877.034 1.321.111.867.211 1.255.411c.39.2.756.456 1.078.767a4.278 4.278 0 0 1 1.21 2.32c.078.445.111.89.111 1.323v1.977h-8.085v.288c0 .29.022.578.067.867.044.288.133.555.244.822s.289.5.489.71.433.39.677.522c.244.134.522.222.8.278.289.056.577.078.866.078.333 0 .655-.022.977-.067a3.37 3.37 0 0 0 .922-.266c.3-.134.545-.334.756-.59.21-.255.333-.554.366-.877h1.877a3.99 3.99 0 0 1-.255 1.089 3.424 3.424 0 0 1-.578.944c-.244.278-.522.522-.833.71s-.655.356-1.01.467a5.261 5.261 0 0 1-1.089.222c-.367.034-.744.056-1.122.056v-.033zm-3.154-6.909h6.208v-.3a5.3 5.3 0 0 0-.066-.844 3.668 3.668 0 0 0-.245-.822 2.812 2.812 0 0 0-.466-.71 2.354 2.354 0 0 0-.666-.522 3.477 3.477 0 0 0-.8-.3c-.278-.056-.566-.09-.855-.09s-.567.034-.855.09a2.689 2.689 0 0 0-.8.3 2.354 2.354 0 0 0-.667.522 3.024 3.024 0 0 0-.466.71 3.05 3.05 0 0 0-.244.822 5.404 5.404 0 0 0-.067.844v.3h-.011zm12.15 6.731v-1.677h3.81v-8.452h-3.443V58.88h5.298v10.107h3.443v1.677h-9.108zm4.554-13.783c-.2 0-.389-.023-.566-.078a1.153 1.153 0 0 1-.478-.278c-.133-.133-.233-.3-.289-.477s-.077-.367-.077-.567.022-.388.077-.566.145-.344.29-.478c.132-.133.299-.233.477-.289.177-.055.366-.088.566-.088s.389.033.567.088c.177.056.344.156.477.29.133.133.233.3.3.477s.089.366.089.566-.033.389-.089.567-.155.344-.3.477c-.133.134-.3.234-.477.278a1.888 1.888 0 0 1-.567.078zm12.484 13.961c-.322 0-.633-.023-.966-.067a4.724 4.724 0 0 1-.944-.244c-.3-.123-.578-.29-.833-.489s-.478-.444-.645-.71a2.753 2.753 0 0 1-.377-.89 4.123 4.123 0 0 1-.111-.977c0-.422.066-.833.2-1.233.133-.4.344-.755.633-1.055s.61-.544.988-.733a5.915 5.915 0 0 1 1.166-.455c.411-.111.822-.189 1.233-.222s.822-.056 1.233-.056h2.443v-.91c0-.245-.033-.49-.088-.722-.056-.245-.156-.456-.3-.656s-.311-.366-.511-.51a2.19 2.19 0 0 0-.644-.323 3.035 3.035 0 0 0-.7-.155 5.358 5.358 0 0 0-.722-.045c-.333 0-.666.023-.988.078a2.914 2.914 0 0 0-.933.322 1.89 1.89 0 0 0-.722.667c-.19.288-.278.6-.278.933h-1.877c0-.378.067-.745.189-1.111.133-.367.31-.689.544-.989.233-.288.511-.544.822-.755s.655-.377 1.01-.5a5.26 5.26 0 0 1 1.1-.244 9.687 9.687 0 0 1 2.344.011c.4.056.788.156 1.155.289.366.144.722.333 1.044.577s.6.534.822.867c.222.333.388.7.477 1.088s.134.789.134 1.2v7.863h-1.877v-2.043c-.167.366-.4.688-.69.988-.299.3-.621.533-.988.722a4.248 4.248 0 0 1-1.144.4c-.4.078-.8.11-1.21.11l.01-.021zm.7-1.655a4.99 4.99 0 0 0 1.599-.267c.255-.089.5-.222.722-.389s.422-.366.577-.588c.156-.222.267-.478.334-.744.055-.267.089-.545.089-.811v-1.022h-2.444c-.244 0-.489 0-.744.022s-.511.045-.744.1c-.245.056-.489.122-.722.19a2.564 2.564 0 0 0-.678.332c-.21.145-.377.333-.5.556s-.177.466-.177.7c0 .321.078.61.244.888.167.277.378.489.644.644.267.156.556.267.867.322.31.056.622.078.944.078l-.011-.011z"}))),SvgJulioGlatt05=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M179.572 61.676h60.179v65.132h-60.179zM114.135 1.192h65.132v60.179h-65.132zM305.984 29.06a3.818 3.818 0 0 0-.648-1.002 3.37 3.37 0 0 0-.934-.727 4.73 4.73 0 0 0-1.13-.413c-.393-.088-.786-.127-1.19-.127s-.795.039-1.188.127-.767.226-1.13.413-.668.433-.934.727a3.818 3.818 0 0 0-.648 1.003 4.782 4.782 0 0 0-.354 1.14 7.977 7.977 0 0 0-.098 1.189v.412h8.706v-.412c0-.403-.03-.796-.098-1.19a3.935 3.935 0 0 0-.354-1.14zM240.056 1.193v60.18h157.809V1.191H240.056zm79.214 17.973c.079-.255.206-.481.393-.668a1.74 1.74 0 0 1 .668-.413c.256-.088.521-.128.796-.128s.54.04.796.128c.256.089.472.226.668.413.187.187.325.413.413.668.089.256.128.52.128.796s-.04.54-.128.796a1.816 1.816 0 0 1-.413.668 1.493 1.493 0 0 1-.668.393c-.255.079-.52.108-.796.108s-.54-.039-.796-.108a1.65 1.65 0 0 1-.668-.393 1.493 1.493 0 0 1-.393-.668c-.079-.255-.108-.52-.108-.796s.04-.54.108-.796zm-29.136 1.052h-5.818v21.029h-2.604v-21.03h-5.818v-2.319h14.23v2.32h.01zM309.06 34.16h-11.34v.413c0 .402.03.805.098 1.208.059.403.177.786.354 1.14.167.364.393.698.678 1.003.285.304.6.55.953.727.354.177.727.304 1.13.383.403.079.806.108 1.209.108.462 0 .924-.03 1.366-.098a4.313 4.313 0 0 0 1.287-.383c.413-.187.767-.462 1.061-.826s.462-.776.511-1.238h2.634a5.005 5.005 0 0 1-.364 1.523 4.987 4.987 0 0 1-.805 1.317c-.334.393-.728.727-1.18 1.002s-.913.492-1.415.649a7.362 7.362 0 0 1-1.523.314c-.52.05-1.041.079-1.572.079-.61 0-1.238-.05-1.857-.157a6.49 6.49 0 0 1-1.779-.57c-.56-.276-1.071-.63-1.523-1.062s-.826-.933-1.11-1.493a6.315 6.315 0 0 1-.6-1.76 9.88 9.88 0 0 1-.177-1.876V31.39c0-.61.05-1.239.157-1.858a6.092 6.092 0 0 1 .59-1.759 5.853 5.853 0 0 1 1.11-1.493c.452-.442.954-.806 1.514-1.081s1.14-.462 1.759-.57c.629-.108 1.248-.157 1.857-.157s1.228.049 1.857.157a6.256 6.256 0 0 1 1.76.57c.55.275 1.05.639 1.513 1.08.452.443.825.944 1.11 1.494.285.55.481 1.14.59 1.76.108.628.157 1.247.157 1.857v2.761l-.01.01zm18.455 7.085H314.75v-2.349h5.336v-11.85h-4.825v-2.32h7.429v14.17h4.825v2.349zm19.408 0h-2.634v-2.86c-.236.511-.56.973-.973 1.386a5.578 5.578 0 0 1-1.385 1.012 5.861 5.861 0 0 1-1.602.56c-.56.108-1.13.157-1.7.157-.442 0-.894-.029-1.346-.098a5.121 5.121 0 0 1-1.317-.354c-.423-.167-.816-.393-1.18-.678s-.658-.619-.903-1.002a3.819 3.819 0 0 1-.521-1.238 5.768 5.768 0 0 1-.158-1.366c0-.59.099-1.17.285-1.73.187-.56.492-1.051.895-1.474.403-.422.864-.766 1.385-1.031s1.062-.482 1.641-.64a9.548 9.548 0 0 1 1.73-.314 20.62 20.62 0 0 1 1.73-.078h3.429V30.23c0-.334-.04-.678-.128-1.012a3.02 3.02 0 0 0-.413-.924 2.926 2.926 0 0 0-.717-.717 3.744 3.744 0 0 0-.904-.462 5.49 5.49 0 0 0-.983-.226 8.867 8.867 0 0 0-2.397.05 4.467 4.467 0 0 0-1.307.441 2.72 2.72 0 0 0-1.013.934 2.318 2.318 0 0 0-.393 1.307h-2.633c0-.53.088-1.052.265-1.553.177-.51.433-.973.767-1.385a4.975 4.975 0 0 1 1.16-1.062c.441-.294.913-.53 1.414-.697a8.177 8.177 0 0 1 1.543-.354c.53-.069 1.061-.098 1.592-.098.57 0 1.14.039 1.7.108.56.078 1.1.216 1.622.412a6.66 6.66 0 0 1 1.464.806c.452.344.845.737 1.16 1.209.314.462.54.973.667 1.523s.187 1.11.187 1.68v11.026l-.03.01zm-7.115-7.4a6.16 6.16 0 0 0-1.051.148c-.334.078-.678.167-1.013.265a3.425 3.425 0 0 0-.953.462c-.295.206-.53.462-.697.776a2.093 2.093 0 0 0-.256.983c0 .442.118.855.354 1.238s.53.688.904.904a3.32 3.32 0 0 0 1.209.442c.432.079.874.109 1.316.109.384 0 .767-.03 1.14-.099a6.139 6.139 0 0 0 1.11-.285c.364-.127.698-.304 1.013-.54s.59-.511.806-.826a2.89 2.89 0 0 0 .462-1.051c.088-.383.127-.767.127-1.14v-1.425h-3.43c-.343 0-.687.01-1.05.03l.01.01z","data-name":"Layer 1"})),SvgJulioGlatt06=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null","data-name":"Layer 1"},reactExports.createElement("path",{d:"M321.526 13.743v65.611h-50.341l-1.758 1.44-28.676 23.52L244.331 87l1.577-7.635h-55.434V13.743h131.052m6.354-6.353H184.12v78.318h53.995l-7.212 34.902 42.559-34.902h54.418V7.39z"}),reactExports.createElement("path",{d:"M226.583 58.197V38.512h-5.443V36.34h13.321v2.17h-5.442v19.686h-2.436zm19.124.233c-.572 0-1.154-.053-1.736-.148-.583-.096-1.144-.276-1.663-.54s-.995-.593-1.43-.996c-.423-.402-.773-.868-1.037-1.397s-.456-1.08-.561-1.652-.16-1.165-.16-1.758v-2.976c0-.572.054-1.154.149-1.736a5.623 5.623 0 0 1 .55-1.652 5.334 5.334 0 0 1 1.038-1.398c.424-.413.9-.752 1.409-1.006s1.07-.434 1.652-.54 1.164-.148 1.736-.148 1.154.053 1.737.148 1.133.275 1.652.54c.519.254.985.593 1.408 1.006.424.413.773.879 1.038 1.398.265.519.455 1.07.55 1.652.096.582.149 1.164.149 1.736v2.584h-10.621v.381c0 .381.032.752.085 1.133.063.381.169.73.328 1.07.159.339.37.646.635.932s.561.519.89.688c.328.17.677.286 1.059.36.37.074.751.106 1.133.106.434 0 .857-.032 1.28-.085.414-.063.816-.18 1.208-.36s.72-.434.995-.773c.276-.339.435-.72.477-1.154h2.467a5.033 5.033 0 0 1-.339 1.43 4.65 4.65 0 0 1-.762 1.238 4.631 4.631 0 0 1-1.101.932 6.02 6.02 0 0 1-1.324.614 7.297 7.297 0 0 1-1.43.297c-.487.053-.974.074-1.471.074h.01zm-4.13-9.075h8.154v-.392c0-.37-.032-.752-.085-1.112a4.294 4.294 0 0 0-.328-1.07 3.472 3.472 0 0 0-.614-.931 3.13 3.13 0 0 0-.879-.688 4.25 4.25 0 0 0-1.059-.392c-.37-.074-.741-.117-1.112-.117s-.752.043-1.112.117c-.37.085-.72.212-1.059.392a2.95 2.95 0 0 0-.878.688 3.948 3.948 0 0 0-.615.932c-.158.35-.264.71-.328 1.07s-.085.74-.085 1.111v.392zm15.937 8.842v-2.202h4.998V44.897h-4.521v-2.17h6.957v13.268h4.522v2.202h-11.956zm5.983-18.086c-.254 0-.508-.032-.741-.106-.233-.074-.445-.19-.625-.37s-.307-.393-.37-.626-.106-.487-.106-.74.031-.51.106-.742.19-.445.37-.625.381-.307.625-.381c.244-.085.487-.117.741-.117s.508.043.741.117.445.212.625.381c.18.18.307.392.381.625.085.233.117.487.117.741s-.042.508-.117.741a1.66 1.66 0 0 1-.38.625c-.18.18-.393.297-.626.37s-.487.107-.74.107zm16.382 18.319c-.413 0-.837-.032-1.26-.085a5.632 5.632 0 0 1-1.24-.328c-.391-.159-.762-.37-1.1-.635s-.615-.583-.848-.932a3.536 3.536 0 0 1-.487-1.165 5.658 5.658 0 0 1-.148-1.281c0-.55.085-1.091.265-1.62.18-.53.455-.985.836-1.388.37-.402.805-.72 1.292-.963a8.384 8.384 0 0 1 1.536-.593c.54-.149 1.07-.244 1.62-.297s1.09-.074 1.62-.074h3.208v-1.186a4.19 4.19 0 0 0-.116-.953 2.642 2.642 0 0 0-1.059-1.525 3.377 3.377 0 0 0-.847-.434 5.297 5.297 0 0 0-.921-.212 7.508 7.508 0 0 0-2.245.042c-.424.075-.837.212-1.218.414s-.71.497-.953.879a2.22 2.22 0 0 0-.37 1.217h-2.468c0-.497.085-.984.254-1.461a4.4 4.4 0 0 1 .71-1.292c.307-.381.667-.72 1.09-.995a5.715 5.715 0 0 1 1.324-.657 7.293 7.293 0 0 1 1.44-.328c.498-.064.996-.085 1.483-.085.54 0 1.07.032 1.588.106.53.064 1.027.201 1.514.381.487.19.943.445 1.366.763.424.317.784.699 1.08 1.133.297.434.509.91.625 1.43.117.518.18 1.037.18 1.577v10.325h-2.467v-2.68a4.34 4.34 0 0 1-.91 1.292 4.91 4.91 0 0 1-1.293.953 5.388 5.388 0 0 1-1.503.52 8.958 8.958 0 0 1-1.589.148l.01-.011zm.921-2.17c.36 0 .71-.033 1.07-.085.36-.064.71-.149 1.037-.265.34-.117.657-.286.953-.508s.551-.477.763-.774.35-.624.434-.984c.074-.36.116-.71.116-1.07V51.24h-3.208c-.318 0-.646 0-.985.032s-.667.063-.985.137-.635.16-.953.254a3.153 3.153 0 0 0-.89.435c-.275.19-.497.434-.656.73a1.92 1.92 0 0 0-.233.922c0 .413.106.804.329 1.164.222.36.497.636.847.848.35.211.72.349 1.133.413.402.074.815.105 1.239.105l-.01-.02z"}))),SvgLukaPiskore01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M52.05 14.024h22.555v12.663H52.05zm32.304 0h46.621v12.663H84.354zm93.854 0h73.781v12.663h-73.781zm0 87.307h73.781v12.663h-73.781zm0-43.672h73.781v12.663h-73.781z"}),reactExports.createElement("path",{strokeWidth:.36,d:"M97.043 13.997v99.97H84.38v-99.97zm227.676.035v99.97h-12.663v-99.97z"}),reactExports.createElement("path",{d:"m404.551 20.643-35.361 93.171.503.179h12.987l28.67-75.507zm17.447-6.619h-13.562l37.952 99.969h13.562z"}))),SvgLululi02=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M105.027 33.423H36.524c-3.834 0-6.99-3.115-6.99-6.99s3.156-6.99 6.99-6.99h68.503c3.875 0 6.99 3.156 6.99 6.99s-3.115 6.99-6.99 6.99zm120.829 0h-63.75c-3.874 0-6.99-3.155-6.99-6.99s3.156-6.99 6.99-6.99h63.75c3.875 0 6.99 3.156 6.99 6.99s-3.115 6.99-6.99 6.99zm0 75.134h-63.75c-3.874 0-6.99-3.156-6.99-6.99s3.156-6.99 6.99-6.99h63.75c3.875 0 6.99 3.155 6.99 6.99s-3.115 6.99-6.99 6.99zm0-37.547h-63.75c-3.874 0-6.99-3.155-6.99-6.99s3.156-6.99 6.99-6.99h63.75c3.875 0 6.99 3.155 6.99 6.99s-3.115 6.99-6.99 6.99z"}),reactExports.createElement("path",{d:"M70.796 108.557c-3.875 0-6.99-3.156-6.99-6.99V26.433c0-3.874 3.155-6.99 6.99-6.99s6.99 3.156 6.99 6.99v75.134a6.972 6.972 0 0 1-6.99 6.99zm247.09-3.315c-3.874 0-6.99-3.156-6.99-6.99V29.788c0-3.874 3.155-6.99 6.99-6.99 3.875 0 6.99 3.156 6.99 6.99v68.464c.04 3.834-3.115 6.99-6.99 6.99zm157.577 3.315h-68.862a6.951 6.951 0 0 1-5.952-3.315 6.975 6.975 0 0 1-.32-6.79l34.432-69.462a6.96 6.96 0 0 1 6.27-3.875c2.677 0 5.114 1.518 6.272 3.875l34.431 69.461a6.97 6.97 0 0 1-.32 6.79 7.001 7.001 0 0 1-5.95 3.316zm-57.598-13.98h46.254l-23.127-46.654-23.127 46.654z"}),reactExports.createElement("path",{d:"M338.377 108.557h-40.942c-3.874 0-6.99-3.156-6.99-6.99 0-3.875 3.155-6.99 6.99-6.99h40.982c3.875 0 6.99 3.155 6.99 6.99 0 3.874-3.155 6.99-7.03 6.99zm0-71.778h-40.942c-3.874 0-6.99-3.156-6.99-6.99 0-3.875 3.155-6.99 6.99-6.99h40.982c3.875 0 6.99 3.155 6.99 6.99 0 3.834-3.155 6.99-7.03 6.99z"}))),SvgMaes01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M289.2995 85.096c10.8352-6.7622 19.7724-11.4285 25.8227-22.2638 14.9875-26.8905 40.2567-39.8612 70.5085-43.8552 3.5985-.4746 7.988-1.3841 9.4116 4.2708.7514 2.9263 4.1127 1.7795 6.3668 2.254 20.0096 3.9941 29.7772 16.3716 27.6813 36.5395-.7118 6.7622 3.6777 5.0617 6.6831 5.1013 6.169.079 9.9258 1.74 9.4908 8.779-.2768 4.6662-1.74 7.4343-6.8808 7.4343-4.2709 0-8.5022.1187-12.773.2373-7.3949.1977-13.287 7.7508-12.259 15.6598.7119 5.5758-7.197 12.4566-11.7052 9.372-4.3104-2.9658-6.4458-.8699-9.5303.87-21.8287 12.338-44.053 14.7503-66.7912 2.4123-5.734-3.0845-10.9144-7.0785-13.3266-13.1289-2.1354-5.3385-4.6268-5.4176-8.5417-2.3727-4.943 3.8359-11.468 5.8527-14.2361 12.2194-1.1864 2.689-3.7172 2.689-6.2086 2.8077-31.3195 1.5027-62.5994 3.915-93.9585 3.7567-12.6148-.0395-14.3943-1.5027-13.4848-14.2757.87-12.6543.5932-25.2691 1.0677-37.8839.1978-5.5758-1.6608-7.2367-7.2762-7.0785a863.8271 863.8271 0 0 1-42.9457 0c-5.5758-.1582-7.3553 1.4631-7.3158 7.0785.0791 14.1175-.6722 28.2746-.7909 42.4316-.0395 5.5363-2.0168 8.2253-7.988 8.344-5.9713.1186-8.0276-2.4518-8.265-8.0276-.593-14.157-.3558-28.2746.5537-42.3921.3164-5.1408-.7909-7.553-6.8808-7.3949-7.553.1582-15.1456-1.305-22.7383-1.6609-5.5362-.2372-6.2876-3.4799-6.2876-7.8694s.9095-7.4344 6.248-8.1462c7.9882-1.0282 15.7785 1.1468 23.6874 1.0282 46.8211-.6328 93.7213 1.2654 140.5028-2.4518 6.604-.5141 12.4962-.0791 11.7053 9.0953-.356 4.3104-1.8982 6.3667-6.525 6.8808-13.9197 1.5027-27.8 3.8358-41.7988 3.0845-9.0162-.4745-6.5644 5.299-7.0785 9.9653-.6327 6.0899 2.7681 5.813 7.3158 5.4572 6.6435-.4746 13.4057.0395 20.0888-.2768 5.734-.2768 7.3948 2.7681 7.7507 7.6717.3955 5.0617-1.305 7.7508-6.8017 8.5021-7.3158 1.0282-14.592.9886-21.8683.6327-4.5476-.2372-6.5249 1.1864-6.8412 5.9318-.3955 5.8526 3.5986 4.5476 6.604 4.4685 22.501-.7513 45.002-1.819 67.5425-2.4122 4.7059-.1186 4.3104-2.5309 4.6268-5.6945 1.6213-15.3038.6723-30.6472.5536-45.9906-.0395-5.6945 1.0677-9.8071 7.474-9.8862 6.4853-.1186 9.9257 2.7286 9.649 9.9653-.5537 13.0893-.2373 26.2182-.2373 40.8102zm66.3166 28.2745c11.0726-.435 20.8006-2.8077 29.54-7.988 3.4404-2.0169 10.163-2.5705 7.553-9.0954-2.4517-6.0899-4.0335-13.287-13.6033-13.0893-16.9648.3559-33.9295.6327-50.9338-.87-4.7454-.3955-9.4907 3.4008-11.8634 7.3553-1.819 3.0845 1.6213 6.7622 3.9545 9.3721 9.6093 10.7167 22.5405 13.5244 35.353 14.3153zm25.8624-80.276c6.6435 4.864 1.305 10.3607 1.74 15.3038.5931 6.5645 5.2594 15.0666 11.7447 17.1625 7.6717 2.4518 16.767.7118 25.2296.435.7119-.0396 1.7005-2.3332 1.9773-3.6777 1.1863-6.6435 1.0677-13.0102-3.124-18.942-6.9204-9.807-23.1733-14.592-37.5676-10.2816zm-60.029 32.0708c16.6483-10.677 31.2403-20.0492 45.8324-29.4213-18.863 2.8077-34.9577 9.8467-45.8325 29.4213zm31.2403 1.1073h19.021c-3.7171-10.1235-8.423-10.163-19.021 0z"}),reactExports.createElement("path",{d:"M280.2832 28.3491c-4.6267-2.2145-11.6657-2.4913-10.163-10.163 1.0677-5.4177 2.254-11.7844 10.9144-9.8862 5.5758 1.2259 10.5585 3.2822 9.4907 9.649-.8304 5.0221-2.5308 10.9143-10.242 10.4002z"}))),SvgMaliciousSheep01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M301.113 11.5507h-90.2643c-.5378 0-.9987-.461-.9987-.9987s.461-.9986 1.037-.9986h90.2643c.5378 0 .9987.4609.9987.9986s-.461.9987-1.037.9987zm-25.274 16.9006h-39.5627c-.5377 0-.9987-.461-.9987-.9987 0-.5378.461-.9987.9987-.9987h39.601c.5378 0 .9987.461.9987.9987 0 .5377-.461.9987-1.037.9987zm0 16.8237h-39.5627c-.5377 0-.9987-.461-.9987-.9987 0-.5377.461-.9987.9987-.9987h39.601c.5378 0 .9987.461.9987.9987 0 .5377-.461.9987-1.037.9987zm0 16.8237h-39.5627c-.5377 0-.9987-.461-.9987-.9987 0-.5377.461-.9987.9987-.9987h39.601c.5378 0 .9987.461.9987.9987 0 .5378-.461.9987-1.037.9987zm-1.4212 37.9878h-36.7203c-.5378 0-.9987-.461-.9987-.9987s.461-.9987.9987-.9987h36.7203c.5377 0 .9986.461.9986.9987s-.4225.9987-.9986.9987z"}),reactExports.createElement("path",{d:"M256.0576 100.0865c-.5377 0-.9986-.461-.9986-.9987v-88.459c0-.5377.4609-.9986.9986-.9986s.9987.4609.9987.9986v88.459c0 .5762-.4225.9987-.9987.9987z"}),reactExports.createElement("path",{d:"M290.0123 118.4466c-.2688 0-.5761-.1152-.7682-.3457l-33.9547-39.9467c-.3457-.4225-.3073-1.037.1152-1.4212.4225-.3457 1.0371-.3073 1.4212.1153l33.9547 39.9467c.3457.4225.3073 1.037-.1152 1.4212a1.043 1.043 0 0 1-.653.2304z"}),reactExports.createElement("path",{d:"M222.1413 118.4466a1.043 1.043 0 0 1-.653-.2304c-.4225-.3457-.4609-.9987-.1152-1.4212l33.9547-39.9467c.3457-.4225.9987-.461 1.4212-.1153s.461.9987.1152 1.4212l-33.9547 39.9467c-.2304.2305-.4993.3457-.7682.3457z"}))),SvgMarkKnol01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M246.2306 24.7784h-97.9813v19.6212h19.5797v78.4016h19.6211V44.3996h19.5797v78.4016h39.2008v-19.6211H226.651V83.6004h19.5796V63.9792H226.651V44.3996h39.2008V24.7784zm19.6212 39.2008v58.822h19.5796V44.3996h-19.5796zm9.7483-39.2008h.083c5.3927 0 9.7483-4.3556 9.7483-9.7483v-.083c0-5.3927-4.3556-9.7483-9.7483-9.7483h-.083c-5.3927 0-9.7483 4.3556-9.7483 9.7483v.083c0 5.3927 4.3556 9.7483 9.7483 9.7483zm68.7363 0h-58.905v19.5797h19.5797v78.4017h19.5797V83.6003h19.5797v39.1594H363.75V44.3166c.083-10.7854-8.6698-19.5382-19.4137-19.5382zm-.1245 39.2009h-19.5796V44.3996h19.5796v19.5797z"})),SvgMarquesa01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M114.55 56.1406h15.7188v15.7188H114.55zm15.7188 47.1564h15.7188v15.7188h-15.7188zm0-62.8752h15.7188v15.7188h-15.7188zm15.7189 62.8752h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7189h15.7188v15.7188h-15.7188zm15.7188 78.5941h15.7188v15.7188h-15.7188zm0-62.8752h15.7188v15.7188h-15.7188zm15.7188 15.7188h15.7188v15.7188h-15.7188zm15.68 47.1564h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188z"}),reactExports.createElement("path",{d:"M193.1053 56.1406h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm15.7188 62.8752h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm0-15.7189h15.7188v15.7188h-15.7188zm15.7188 78.5941h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm15.7189 15.7188h15.7188v15.7188h-15.7188zm15.7188 47.1564h15.7188v15.7188h-15.7188zm0-62.8752h15.7188v15.7188h-15.7188zm15.7188 62.8752h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-31.4377h15.7188v15.7188h-15.7188zm15.7189 94.3129h15.7188v15.7188h-15.7188zm0-62.8752h15.7188v15.7188h-15.7188zm15.7188 15.7188h15.7188v15.7188h-15.7188zm15.7188 47.1564h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm15.7188 31.4376h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm0-15.7189h15.7188v15.7188h-15.7188zm15.7188 78.5941h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm15.7189 62.8752h15.7188v15.7188h-15.7188zm0-47.1564h15.7188v15.7188h-15.7188zm15.7188-15.7188H397.45v15.7188h-15.7188z"}))),SvgMarquesa02=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M141.1043 5.4565H24.1v58.5848h58.5021v58.5022h58.5849V5.5392h-.0827v-.0827zm16.9925.0827v117.0043h117.1696v-20.6308c-2.77 5.3334-8.3515 8.9717-14.7599 8.9717-9.1784 0-16.6204-7.442-16.6204-16.6204s7.442-16.6204 16.6204-16.6204c6.4084 0 11.9899 3.6383 14.76 8.9717V55.4831c-4.1345 10.9149-14.6773 18.6462-27.0392 18.6462-15.959 0-28.8997-12.9407-28.8997-28.8996s12.9408-28.8996 28.8997-28.8996c12.362 0 22.9047 7.7313 27.0391 18.6462V5.5393H158.0967l.0001-.0001zm134.7823 0h58.5848v117.0043h-58.5848V5.5392zm129.6556 0-65.3653 117.0043H487.9L422.5347 5.5392zm0 109.893c-16.7858 0-30.388-13.6022-30.388-30.388s13.6022-30.388 30.388-30.388 30.388 13.6022 30.388 30.388-13.5609 30.388-30.388 30.388z"})),SvgMerchantCoppola01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M82.8133 119.9192h23.1495v5.6462H82.8133zm0-11.6833h23.1495v5.6462H82.8133zm0-41.2608h23.1495v5.6462H82.8133zm0-11.6399h23.1495v5.6462H82.8133zm0-41.2607h23.1495v5.6462H82.8133zm0-11.6399h23.1495v5.6462H82.8133zM52.15 14.0745h23.1495v5.6462H52.15zm0-11.6399h23.1495v5.6462H52.15zm61.3266 11.6399h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm98.3309 11.6399h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm30.6633 11.6399h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0 117.4846h23.1495v5.6462h-23.1495zm0-11.6833h23.1495v5.6462h-23.1495zm-61.3266 11.6833h23.1495v5.6462h-23.1495zm0-11.6833h23.1495v5.6462h-23.1495zm0-41.2608h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0-41.2607h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm128.4297 117.4846h23.1495v5.6462h-23.1495zm0-11.6833h23.1495v5.6462h-23.1495zm0-41.2608h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0-41.2607h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm96.4633 64.5405h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0-41.2607h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zM211.8075 66.9751h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0 64.584h23.1495v5.6462h-23.1495zm0-11.6833h23.1495v5.6462h-23.1495zm224.893 11.6833H459.85v5.6462h-23.1495zm0-11.6833H459.85v5.6462h-23.1495zm-61.3265 11.6833h23.1495v5.6462H375.374zm0-11.6833h23.1495v5.6462H375.374zm61.3265-41.2608H459.85v5.6462h-23.1495zm0-11.6399H459.85v5.6462h-23.1495zM375.374 66.9751h23.1495v5.6462H375.374zm0-11.6399h23.1495v5.6462H375.374z"})),SvgMerchantCoppola02=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M207.7674 11.8539c.4564-.2662.6085-.8366.3423-1.293-.2662-.4563-.8366-.6084-1.293-.3422L81.5926 83.3834c-.4563.2662-.6084.8366-.3422 1.293.1901.3042.4943.4563.7985.4563.1521 0 .3043-.038.4564-.1141l80.618-47.078-25.06 78.7548c-.1521.4944.114 1.0268.6085 1.1789.076.038.19.038.2661.038.3803 0 .7606-.2662.8747-.6465l25.6685-80.7322 42.2864-24.6797z"}),reactExports.createElement("path",{d:"M310.8978 16.7974c-.4183-.3042-.9888-.1901-1.293.2282l-57.8397 84.2307-39.9667-6.7309-9.545-23.501 54.3032-8.1378c.4944-.076.8746-.5704.7986-1.0647-.076-.4944-.5704-.8747-1.0648-.7986l-54.7594 8.2139-15.8955-39.1682 87.8053-11.5984c.4943-.076.8746-.5324.7986-1.0648-.076-.4943-.5324-.8746-1.0648-.7985l-90.163 11.9025 26.6192 65.6353-27.3797-4.6013c-.4944-.076-.9888.2662-1.0648.7606-.076.4943.2662.9887.7605 1.0647l28.4826 4.7915 7.6435 18.8616c.152.3802.4943.5704.8746.5704.114 0 .2282-.038.3423-.076.4943-.1902.7225-.7226.5323-1.217l-7.2252-17.7968 37.9894 6.3886-6.6548 9.697c-.3042.4183-.1901.9887.2282 1.293.152.114.3422.152.5323.152.3043 0 .6085-.152.7606-.4182l7.1491-10.3815 56.5088 9.5068h.152c.4564 0 .8367-.3042.9127-.7605.076-.4944-.2662-.9887-.7605-1.0648l-55.6721-9.3928 57.4213-83.432c.2662-.4184.1522-1.0268-.2661-1.293zM430.57 111.2195l-41.4879-38.2556 39.4344-13.0814c.4944-.1521.7606-.6845.6085-1.1789-.1521-.4943-.6845-.7605-1.1789-.6084L387.523 71.5189l-59.1707-54.5314v96.2094c0 .5324.4183.9507.9507.9507s.9507-.4183.9507-.9507v-20.687l56.813-18.8615 42.2484 38.978c.3803.3423.9887.3423 1.331-.038.3422-.4182.3042-1.0267-.076-1.369zm-100.3543-20.725V21.2466l55.2538 50.9567-55.2538 18.2912z"}))),SvgMightymoss01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M188.0409 9.6174h81.9575v23.7013h-81.9575zm0 42.4936h81.9575v23.7013h-81.9575zm0 42.4936h81.9575v23.7013h-81.9575zm-77.432-84.9872H81.5v23.7013h29.1089v85.0256h23.7397V33.3187h29.1089V9.6174h-29.1089zm189.227 0h23.7013v108.7269h-23.7013zm122.3034 0h-59.2916c-4.6406 0-8.3607 3.7584-8.3607 8.3606v100.4047h23.7014V89.5421h28.6103v28.8405H430.5V17.978c0-4.6022-3.7201-8.3606-8.3607-8.3606zm-43.951 57.911V31.6312h28.6104v35.8972h-28.6103z"})),SvgMiusoph01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M137.75 8.4509h29.6654v6.9363H137.75zm121.2871 0h26.9222v6.9363h-26.9222zm30.214 0h29.6262v6.9363h-29.6262zm35.7395 0h46.0068v6.9363h-46.0068zm0 52.0418h46.0068v6.9363h-46.0068zm-65.9535 52.0417h26.9222v6.9363h-26.9222zm30.214 0h29.6262v6.9363h-29.6262zM170.7072 8.4509h33.4274v6.9363h-33.4274zm39.2664 0h43.1853v6.9363h-43.1853zm0 52.0418h43.1853v6.9363h-43.1853zm0 52.0417h43.1853v6.9363h-43.1853zm-42.5583-97.1472h3.2526v104.1619h-3.2526zm118.5831 0h3.2526v97.1472h-3.2526zm35.7004.0392h3.2526v104.0835h-3.2526zm49.2986 0h3.2526v104.0835h-3.2526zm-164.2764-.0392h3.2526v97.1472h-3.2526z"})),SvgMiusoph02=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M201.35 20.5131v7.2376h3.8028V13.2755H201.35zm23.6346 14.5161h-3.7619v7.2376h3.7619v7.2376h-3.7619v7.2376h3.7619v7.2375h-3.7619v7.2377h3.7619v7.2785h-3.7619v7.2375h3.7619v7.2377h-3.7619v7.2376h3.7619v7.2375h-3.7619v7.2377h3.7619v7.2784h3.8029v-7.2784h3.8028v-7.2377h-3.8028v-7.2375h3.8028v-7.2376h-3.8028v-7.2377h3.8028v-7.2375h-3.8028v-7.2785h3.8028v-7.2377h-3.8028V56.742h3.8028v-7.2376h-3.8028v-7.2376h3.8028v-7.2376h-3.8028v-7.2785h-3.8029zm21.3039 36.188v-7.2377h-3.8028V49.5044h-3.7619v14.4751h-3.8028v7.2377h3.8028v7.2785h3.7619v-7.2785zm-3.8028 7.2785v7.2375h7.6056v-7.2375h-3.8028zm17.0104-7.2785h-3.7619v7.2785h7.5648v-7.2785zm11.4084 7.2785h3.762v-7.2785h-7.5648v7.2785zm-3.8028-21.3039v6.7877h-3.8027v-6.7877h-7.5648v7.2375h7.5648v6.7879h3.8027v-6.7879h7.5648v-7.2375h-3.762zm-7.6056-29.4411h-3.7619v7.2785h7.5648v-7.2785zm11.4084 7.2785h3.762v-7.2785h-7.5648v7.2785zm-11.4084-21.7537h-3.7619v7.2376h7.5648v-7.2376zm7.6056 0v7.2376h7.5648v-7.2376h-3.762zm43.4257 14.4752V20.513h-3.8029v-7.2376h-3.8028V6.0379h-3.8028v7.2376h-3.8028V6.0379h-3.8028v7.2376h-3.8028V6.0379h-3.8028v7.2376h-3.8028v7.2376h-3.6802v7.2376h3.8028v7.2376h-3.8028v7.2376h3.8028v7.2376h-3.8028v7.2785h3.8028v7.2376h-3.8028v7.2376h3.8028v7.2376h-3.8028v7.2376h3.8028V92.93h-3.8028v7.2376h3.8028v7.9327h-3.8028v7.2376h3.8028v6.5834h7.6057v-7.2377h-3.8029v-6.5833h3.8029v-7.2376h-3.8029V78.4956h3.8029v7.2377h3.8028v-7.2377h3.8028v7.2377h3.8028v-7.2377h3.8028v21.7129h-3.8028v7.2375h3.8028v7.2377h-3.8028v7.2375h7.6056v-7.2375h3.8028v-7.2377h-3.8028v-7.2375h3.8028v-7.2377h-3.8028v-7.2375h3.8028v-7.2377h-3.8028v-7.2375h3.8028v-7.2377h-3.8028V56.742h3.8028v-7.2376h-3.8028v-7.2376h3.8028v-7.2376h-3.8028v-7.2785h3.6802zm-7.5648 7.2785h-3.8028v7.2376h3.8028v7.2376h-3.8028v7.2376h3.8028v14.4752h-3.8028v-7.2376h-3.8028v7.2376h-3.8028v-7.2376h-3.8028v7.2376h-3.8028V56.742h3.8028v-7.2376h-3.8028v-7.2376h3.8028v-7.2376h-3.8028V20.513h3.8028v7.2376h3.8028V20.513h3.8028v7.2376h3.8028V20.513h3.8028v14.5161zm-43.4665 50.704h-3.7619v7.2377h7.5648v-7.2377zm11.4084 7.2377h3.762v-7.2377h-7.5648v7.2377zm-11.4084 7.2376h-3.7619v7.2375h7.5648v-7.2375zm11.4084 7.2375h3.762v-7.2375h-7.5648v7.2375zm-24.616 14.5161h3.8028v-7.2784h-7.6056v7.2784zm6.1336-101.449v-7.2376h-3.8028v14.4752h3.8028zm-3.8028 14.5161h3.8028v7.2376h-3.8028z"}),reactExports.createElement("path",{d:"M242.4857 42.2668h6.1336v7.2376h-6.1336zm6.1336 7.2376h3.8028v7.2376h-3.8028zm1.4721 21.7128h3.8028v7.2376h-3.8028zm0 14.516h3.8028v7.2376h-3.8028zm-11.3676 7.2377v7.2376h-3.8028v7.2375h3.8028v7.2377h3.7619v-7.2377h3.8028v-7.2375h-3.8028V85.7332h-3.7619zm11.3676 14.4751h3.8028v7.2376h-3.8028zm-14.6797-86.9329v7.2376h3.8028V13.2755h2.8215v14.4752h3.7619V13.2755h2.6987V6.0379h-19.7091v7.2376h-3.8029V6.0379h-19.7091v7.2376h2.6988v14.4752h3.8027V13.2755h2.8215v14.4752h3.7619V13.2755h2.8623v14.4752h3.7619v-7.2376h3.8029v7.2376h3.8028V13.2755h2.8214zm27.8872-14.4752h3.8028v7.2376h-3.8028zm0 14.4752h3.8028v7.2376h-3.8028zm0 14.5161h3.8028v7.2376h-3.8028zm0 14.4752h3.8028v7.2376h-3.8028zm0 28.9912h3.8028v7.2376h-3.8028zm0 14.4752h3.8028v7.2376h-3.8028zm.0001 21.3039h-7.5648v7.2376h7.5648v-6.8286h3.8027v6.8286h7.5648v-7.2376h-7.5648v-6.8287h-3.8027z"}))),SvgQizzio01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M55.075 55.2705h94.0255V66.399H55.075z"}),reactExports.createElement("path",{strokeWidth:.3544,d:"M107.65 55.2698v52.5947H96.5215V55.2698zm124.3123-31.9277v89.2055h-7.3009V23.3421z"}),reactExports.createElement("path",{d:"M149.1005 55.4832h7.9742c0 3.0125 3.296 7.3009 6.8756 7.3009 3.5796 0 6.8756-2.41 6.8756-5.4226 0-2.658-2.3745-4.9263-5.5997-5.3161l-3.7922-.071v-7.159l3.7922-.071c3.1897-.3543 5.5997-2.658 5.5997-5.387 0-2.977-3.296-5.387-6.8756-5.387-3.5795 0-6.8756 4.6428-6.8756 7.6198h-7.9742c0-6.911 6.4148-14.8498 14.8498-14.8498 8.3642 0 15.5942 5.6706 15.5942 12.5816 0 3.5087-1.7012 6.7338-4.5365 9.002 2.8353 2.2683 4.5365 5.4935 4.5365 8.9667 0 6.982-7.23 12.5816-15.5942 12.5816-8.435.0709-14.8498-7.4072-14.8498-14.3891zm124.3277 53.6225c-.319 0-.638-.1063-.886-.3544-.4962-.4962-.4962-1.2759 0-1.772l91.1193-91.1548c.4962-.4962 1.2759-.4962 1.772 0 .4963.4961.4963 1.2758 0 1.772l-91.1192 91.1548c-.2481.248-.5671.3544-.886.3544z"}),reactExports.createElement("path",{d:"M455.6669 109.1057c-.319 0-.638-.1063-.886-.3544L363.6615 17.632c-.4962-.4962-.4962-1.276 0-1.7721.4962-.4962 1.2759-.4962 1.772 0l91.1194 91.1193c.4962.4962.4962 1.276 0 1.772-.248.2482-.567.3545-.886.3545z"}))),SvgRkhairunnas01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M145.8704 8.9204h-83.892C47.4848 8.9204 35.75 20.655 35.75 35.1488V46.767h83.892c14.4936 0 26.2284-11.7348 26.2284-26.2284V8.9204z"}),reactExports.createElement("path",{d:"M109.6947 92.8512v-46.123H98.0765c-14.4937 0-26.2285 11.7347-26.2285 26.2283v46.1231h11.6183c14.4936 0 26.2284-11.7347 26.2284-26.2284zM247.1703 8.9204h-83.9308v11.6182c0 14.4936 11.7347 26.2284 26.2284 26.2284h83.892V35.1488c0-14.4937-11.7348-26.2284-26.1895-26.2284zm100.0565 83.892V8.9204h-11.6182c-14.4547 0-26.1895 11.7347-26.1895 26.2284v83.892h11.6182c14.4547 0 26.1895-11.7348 26.1895-26.2284zm71.9242 0V8.9204h-11.6183c-14.4936 0-26.2284 11.7347-26.2284 26.2284v83.892h11.6571c14.4548 0 26.1895-11.7348 26.1895-26.2284zm55.099 26.2284v-83.892c0-14.4937-11.7348-26.2284-26.2284-26.2284h-11.6182v83.892c0 14.4936 11.7348 26.2284 26.2284 26.2284H474.25zM273.3599 81.233h-83.892c-14.4937 0-26.2285 11.7348-26.2285 26.2284v11.6182h83.892c14.4937 0 26.2285-11.7347 26.2285-26.2284V81.233z"}))),SvgSantiagoItzcoatl03=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M63.39 57.1554h82.6357V39.1163H66.3098L159.265 8.7579V25.397h82.4357l21.9989 31.2384c.12.2.36.28.56.28v.24h63.0367v-.24c.16 0 .32-.04.44-.16l38.198-31.3984v.04H448.57V7.358H159.625c-.12-.04-.2-.04-.32 0h-.04L63.83 38.4763c-.28.08-.48.36-.48.64v18.039h.04zM365.9743 8.9179V23.637l-38.638 31.7584V40.6762c.16 0 .32-.04.44-.16l38.198-31.5983zm-1.92-.2-36.718 30.4384v-.04h-62.8367l-21.279-30.3984h120.8338zM263.7397 40.3962c.12.2.36.28.56.28v14.3593l-21.839-30.9585c-.12-.2-.36-.28-.56-.28V9.1979l21.8389 31.1983z"}),reactExports.createElement("path",{d:"M159.265 27.8769h18.0791v8.7596H159.265zm206.7093 0h18.0791v8.7596h-18.0791zm64.5566 0H448.61v8.7596h-18.0791zm-125.6734 72.2762V59.6352h-18.0791v38.638l-21.6389-30.2784c-.16-.2-.4-.32-.64-.28h-17.3589c-.36 0-.68.32-.68.68v1.2399l-21.159-29.9984c-.1199-.2-.3599-.28-.5599-.28v-.24H159.265v18.079h65.4766V41.1962l21.7189 30.7984v.76c0 .3599.32.6799.68.6799h17.279c.36 0 .68-.32.68-.68v-2.4798l21.159 29.5984c.1199.2.3599.28.5599.28h18.039zm-41.118-28.1185h-15.879v-2.9599h15.879v2.9599z"}),reactExports.createElement("path",{d:"M384.0134 87.7138V59.6352h-18.0791c-.12 0-.24.04-.36.12l-39.358 30.0385-.04.04-.04.04-.04.04-.04.04s-.04.04-.04.08c0 0 0 .04-.04.04 0 .04 0 .04-.04.08v12.4793h-61.4368l-21.9988-31.2384c-.12-.2-.36-.28-.56-.28v-.24H159.265v17.8391c-.08.2-.04.48.12.64l25.1587 29.9584h-70.8363v-58.237h45.5576v7.3197h18.079v-8.7596h-18.079v.08h-45.5576v-.08h-18.079v61.0369h249.3469c.16 0 .32-.04.44-.16l38.438-31.5984h.2v-.16c.28-.24.32-.68.08-.96-.04-.04-.08-.08-.12-.08zm-120.2738 16.1991c.12.2.36.28.56.28v14.5993l-22.3989-31.7584V72.9145l21.8389 30.9984zm-77.396 15.3992c0-.04-.04-.04-.04-.08L160.825 88.9137h80.7158l21.439 30.3984h-76.636zm140.9927-16.6791V90.7136l38.638-29.4785v26.3187c-.16 0-.32.04-.44.16l-38.198 31.3983V102.633zm17.3991 16.6791h-15.4792l36.958-30.3984h15.4793l-36.9581 30.3984zM448.61 87.9938V58.9953h-18.079v.6h-.04l-39.038 32.1183c-.16.12-.24.32-.24.52v27.7985c0 .08 0 .12.04.16v.04c0 .04.04.08.04.12v.04l.12.12s.04 0 .04.04c.04.04.08.04.12.08h.04c.04 0 .08.04.12.04h18.279c.16 0 .32-.04.44-.16l37.958-31.8384c.2-.16.24-.44.2-.68zm-55.997 4.5597 37.918-31.1984v25.8787l-37.918 31.3584V92.5535zm17.119 26.7586h-15.9192l37.5981-31.0784h15.3592l-37.038 31.0784z"}),reactExports.createElement("path",{d:"M325.9764 86.4338v.04c0 .04 0 .04.04.08 0 .04 0 .04.04.04l.04.04c0 .04.04.04.04.08l.04.04.08.08.04.04c.04 0 .04.04.08.04 0 0 .04 0 .04.04.04 0 .08.04.12.04h.2c.08 0 .12 0 .2-.04h.04c.08-.04.12-.04.16-.08l38.918-29.7184H448.65v-18.039h-82.5957c-.16 0-.36.04-.52.16l-39.318 33.1982c-.16.12-.24.32-.24.52v13.4393zm39.9979-45.7576v14.7992c-.04.04-.08.04-.12.08l-38.478 29.3985V73.2745l38.598-32.5983z"}))),SvgSantiagoItzcoatl04=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M376.0022 48.8862c-.7688 0-1.3978-.629-1.3978-1.3979v-.0349c0-.7688.629-1.3978 1.3978-1.3978.7688 0 1.3978.629 1.3978 1.3978v.035c0 .7687-.629 1.3978-1.3978 1.3978zm0 33.0582c-.7688 0-1.3978-.629-1.3978-1.3978v-.0699c0-.7688.629-1.3629 1.3978-1.3629.7688 0 1.3978.629 1.3978 1.3979v.035c0 .7687-.629 1.3977-1.3978 1.3977zM261.731 113.535h-46.7218c-17.7173 0-32.2196-14.048-32.9884-31.5906h-46.023c-.7688 0-1.3978-.629-1.3978-1.3978V47.4534c0-.7688.629-1.3978 1.3978-1.3978h46.023c.7688-17.5426 15.271-31.5906 32.9884-31.5906h46.7218c.7688 0 1.3978.629 1.3978 1.3978 0 .7688-.629 1.3978-1.3978 1.3978-16.1797 0-29.4589 12.79-30.1927 28.795h45.324c.7688 0 1.3979.629 1.3979 1.3978v33.1281c0 .7688-.629 1.3978-1.3979 1.3978h-45.324c.7688 16.005 14.013 28.795 30.1927 28.795.7688 0 1.3978.629 1.3978 1.3978s-.629 1.3629-1.3978 1.3629zM137.3956 79.1488h45.988c.7688 0 1.3979.629 1.3979 1.3978.035 16.634 13.5937 30.1927 30.2276 30.1927h33.4776c-11.6018-5.102-19.744-16.7038-19.779-30.1927 0-.3844.1398-.7339.4193-.9785.2447-.2446.629-.4193.9785-.4193h45.359V48.8163h-45.359c-.3844 0-.7338-.1398-.9785-.4194-.2446-.2446-.4193-.629-.4193-.9785.035-13.4539 8.1772-25.0557 19.779-30.1578h-33.4776c-16.634 0-30.2276 13.5588-30.2276 30.1928 0 .7688-.629 1.3978-1.3979 1.3978h-45.988v30.2976z"}),reactExports.createElement("path",{d:"M308.4878 113.535H261.731c-18.1715 0-32.9883-14.7819-33.0233-32.9534 0-.3845.1398-.7339.4194-.9785.2446-.2446.629-.4194.9784-.4194h46.7219c.7688 0 1.3978.629 1.3978 1.3978 0 10.938 5.9757 21.072 15.5856 26.3838 4.473 2.481 9.54 3.809 14.677 3.809.7688 0 1.3979.629 1.3979 1.3978s-.629 1.3629-1.3979 1.3629zm-76.9495-31.5906c.7688 16.005 14.013 28.795 30.1927 28.795h33.4776c-.9435-.4194-1.852-.8737-2.7607-1.363-10.0642-5.5912-16.4592-16.0049-16.9834-27.432h-43.9262zm45.324-33.1281h-46.7568c-.3844 0-.7338-.1398-.9784-.4194-.2447-.2446-.4194-.629-.4194-.9784.035-18.1716 14.8518-32.9535 33.0233-32.9535h46.7219c.7688 0 1.3978.629 1.3978 1.3979s-.629 1.3978-1.3978 1.3978c-5.137 0-10.204 1.3279-14.677 3.809-9.575 5.3466-15.5507 15.4458-15.5856 26.3837.0349.7688-.5592 1.3629-1.328 1.3629zm-45.324-2.7607h43.9612c.4892-11.4271 6.9191-21.8408 16.9834-27.432.9086-.4893 1.8172-.9436 2.7607-1.363H261.766c-16.2146 0-29.459 12.79-30.2277 28.795z"}),reactExports.createElement("path",{d:"M344.3767 113.535h-35.8889c-5.5912 0-11.1475-1.4328-16.005-4.1585-10.4835-5.8359-16.9833-16.8786-17.0183-28.8299V47.4184c.035-11.9512 6.5348-22.994 17.0184-28.7949 4.8574-2.7257 10.4137-4.1585 16.005-4.1585h35.8888c5.5912 0 11.1475 1.4328 16.005 4.1585 10.4486 5.801 16.9833 16.8437 17.0183 28.8299v33.1281c0 .2097-.035.4194-.1398.629-.035.07-.0699.1398-.1048.1748-.2447.3494-.664.594-1.1532.594h-64.2295v5.766c0 2.9005 2.3763 5.2768 5.2767 5.2768h55.7727c.4893 0 .9086.2446 1.1882.664.2446.4193.2795.9085.0699 1.3628-3.0053 6.1154-7.723 11.1126-13.6636 14.3975-4.8924 2.6558-10.4487 4.0886-16.04 4.0886zm-35.8889-96.2743c-5.137 0-10.204 1.3279-14.677 3.809-9.575 5.3466-15.5506 15.4458-15.5856 26.3837v33.0932c0 10.9379 5.9757 21.072 15.5856 26.3837 4.473 2.4811 9.54 3.809 14.677 3.809h35.8889c5.137 0 10.204-1.3279 14.677-3.809 4.7875-2.6558 8.7014-6.4998 11.462-11.1825h-53.4663c-4.438 0-8.0374-3.5994-8.0374-8.0374v-7.1638c0-.7688.629-1.3978 1.3978-1.3978h64.2295V47.4185c-.035-10.938-5.9756-21.072-15.5856-26.3838-4.473-2.481-9.54-3.774-14.677-3.774h-35.8889zm34.3163 31.5556H310.375c-.7688 0-1.3978-.629-1.3978-1.3978v-7.1289c0-4.438 3.5993-8.0374 8.0374-8.0374h19.115c4.4381 0 8.0375 3.5994 8.0375 8.0374v7.1638c.035.7688-.594 1.3629-1.3629 1.3629zm-31.0314-2.7607h29.6336v-5.766c0-2.9005-2.3763-5.2767-5.2767-5.2767h-19.1151c-2.9005 0-5.2767 2.3762-5.2767 5.2767v5.766h.035z"}),reactExports.createElement("path",{d:"M310.3749 81.8745h-33.5475c-.7688 0-1.3978-.629-1.3978-1.3978V47.4534c0-.7688.629-1.3978 1.3978-1.3978h33.5475c.7688 0 1.3978.629 1.3978 1.3978v33.0583c0 .7688-.629 1.3628-1.3978 1.3628zm-32.1497-2.7607h30.7519V48.8163h-30.7519v30.2975z"}))),SvgSomfay03=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M188.2668 10.3093h-81.7132c-1.4168 0-2.5835-1.1667-2.5835-2.5835v-.2083c0-1.4168 1.1667-2.5835 2.5835-2.5835h81.7132c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c.0416 1.4585-1.125 2.6252-2.5835 2.6252zm0 8.0421h-81.7132c-1.4168 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1667-2.5835 2.5835-2.5835h81.7132c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c.0416 1.4168-1.125 2.5835-2.5835 2.5835zm0 8.0422h-81.7132c-1.4168 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1667-2.5835 2.5835-2.5835h81.7132c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4167-1.125 2.5835-2.5835 2.5835zm110.6316-16.0843h-23.543c-1.4168 0-2.5836-1.1667-2.5836-2.5835v-.2083c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4585-1.1668 2.6252-2.5835 2.6252zm0 8.0421h-23.543c-1.4168 0-2.5836-1.1667-2.5836-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 16.1259h-30.7102c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h30.7102c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5834-2.5835 2.5834zm97.1308 0h-23.3764c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5834-2.5835 2.5834zm0 8.0422h-65.1706c-1.4167 0-2.5834-1.1668-2.5834-2.5835v-.1667c0-1.4167 1.1667-2.5835 2.5835-2.5835h65.1705c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm0 8.0421h-69.0041c-1.4168 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1667-2.5835 2.5835-2.5835h69.0041c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1666c.0417 1.4168-1.125 2.5835-2.5835 2.5835zm0 8.0839h-23.3764c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm0 8.0421h-23.3764c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c.0417 1.4168-1.125 2.5835-2.5835 2.5835zm0 8.0422h-23.3764c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm0 8.0838h-23.3764c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm0 8.0422h-23.3764c-1.4167 0-2.5835-1.1668-2.5835-2.5836v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c.0417 1.4168-1.125 2.5835-2.5835 2.5835zm9.4172 8.042h-32.7936c-1.4167 0-2.5835-1.1667-2.5835-2.5834v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h32.7936c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1667 2.5835-2.5835 2.5835zm0 8.0422h-32.7936c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h32.7936c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1667 2.5835-2.5835 2.5835zm0 8.0838h-32.7936c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5834 2.5835-2.5834h32.7936c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1667 2.5835-2.5835 2.5835zm-57.0867-56.3783h-23.3764c-1.4168 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1667-2.5835 2.5835-2.5835h23.3764c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm-1.5001 8.0421h-23.3764c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.3764c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm-.4584 8.0422h-24.0014c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h24.0014c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm-1.0834 8.0838h-24.0014c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h24.0014c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4167-1.1667 2.5835-2.5835 2.5835zm-.4167 8.0422h-24.0014c-1.4167 0-2.5835-1.1668-2.5835-2.5836v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h24.0015c1.4167 0 2.5834 1.1668 2.5834 2.5835v.1667c0 1.4168-1.1667 2.5835-2.5834 2.5835zm15.0843 8.042h-39.0857c-1.4167 0-2.5835-1.1667-2.5835-2.5834v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h39.0857c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-36.9606c-1.4167 0-2.5834-1.1667-2.5834-2.5835v-.1667c0-1.4167 1.1667-2.5835 2.5835-2.5835h36.9605c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0838h-31.1269c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5834 2.5835-2.5834h31.1269c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1668 2.5835-2.5835 2.5835zm1.6251-80.5465h-25.1682c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h25.1682c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5834-2.5835 2.5834zm-62.7121 8.0422h-30.7102c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h30.7102c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0421h-30.7102c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h30.7102c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0839h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0421h-23.543c-1.4168 0-2.5836-1.1667-2.5836-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0838h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5836v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm7.5838 8.042H275.397c-1.4167 0-2.5835-1.1667-2.5835-2.5834v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h31.0852c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-28.6684c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h28.6684c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0838H281.189c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5834 2.5835-2.5834h25.2932c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1668 2.5835-2.5835 2.5835zm-145.467-88.5886h-27.2517c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4168-1.1251 2.5835-2.5835 2.5835zm0 8.0421h-27.2517c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5834-2.5835 2.5834zm0 8.0422h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5835-2.5835 2.5835zm0 8.0421h-27.2517c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c.0416 1.4168-1.1251 2.5835-2.5835 2.5835zm0 8.0839h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5835-2.5835 2.5835zm0 8.0421h-27.2517c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4168-1.1251 2.5835-2.5835 2.5835zm0 8.0422h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5835-2.5835 2.5835zm0 8.0838h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5835-2.5835 2.5835zm0 8.0422h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5836v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4168-1.1251 2.5835-2.5835 2.5835zm10.5423 8.042h-37.0023c-1.4167 0-2.5834-1.1667-2.5834-2.5834v-.1667c0-1.4168 1.1667-2.5835 2.5834-2.5835h37.0023c1.4167 0 2.5834 1.1667 2.5834 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5834 2.5835zm0 8.0422h-35.5438c-1.4168 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1667-2.5835 2.5835-2.5835h35.5438c1.4167 0 2.5834 1.1668 2.5834 2.5835v.1667c.0417 1.4168-1.125 2.5835-2.5834 2.5835zm0 8.0838h-31.2936c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5834 2.5835-2.5834h31.2936c1.4167 0 2.5834 1.1667 2.5834 2.5835v.1666c.0417 1.4168-1.125 2.5835-2.5834 2.5835zm76.3379-80.5465h-49.0446c-1.1251 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9167-2.0418 2.0418-2.0418h49.0446c1.125 0 2.0417.9168 2.0417 2.0418v1.3334c0 1.1251-.9167 2.0418-2.0417 2.0418zm5.8753 8.0422h-62.587c-1.1251 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9167-2.0418 2.0417-2.0418h62.5871c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c-.0417 1.125-.9167 2.0418-2.0418 2.0418zm0 8.0421h-66.2123c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9168-2.0418 2.0418-2.0418h66.2123c1.125 0 2.0418.9168 2.0418 2.0418v1.3334c-.0417 1.1668-.9167 2.0418-2.0418 2.0418zm-41.8775 8.0839h-26.335c-1.125 0-2.0417-.9168-2.0417-2.0418v-1.3334c0-1.1251.9167-2.0418 2.0418-2.0418h26.3349c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c0 1.125-.9167 2.0418-2.0418 2.0418zm40.5024-.6251h-19.6261c-1.1251 0-2.0418-.9167-2.0418-2.0418v-.125c0-1.125.9167-2.0418 2.0418-2.0418h19.6261c1.125 0 2.0418.9167 2.0418 2.0418v.125c0 1.1668-.9167 2.0418-2.0418 2.0418zm-42.3776 8.6672h-24.4597c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9167-2.0418 2.0418-2.0418h24.4598c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c0 1.125-.9167 2.0418-2.0418 2.0418zm40.0442 0h-18.7928c-1.1251 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9167-2.0418 2.0418-2.0418h18.7928c1.125 0 2.0417.9167 2.0417 2.0418v1.3334c0 1.125-.9167 2.0418-2.0418 2.0418zM210.018 82.772h-24.4597c-1.125 0-2.0418-.9168-2.0418-2.0418v-1.3334c0-1.1251.9167-2.0418 2.0418-2.0418h24.4598c1.125 0 2.0418.9167 2.0418 2.0417v1.3335c0 1.1667-.9167 2.0418-2.0418 2.0418zm36.1273 0h-26.2516c-1.125 0-2.0418-.9168-2.0418-2.0418v-1.3334c0-1.1251.9167-2.0418 2.0418-2.0418h26.2516c1.125 0 2.0417.9167 2.0417 2.0417v1.3335c0 1.1667-.9167 2.0418-2.0417 2.0418zm-5.5837 8.0838h-55.0033c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.1251.9167-2.0418 2.0418-2.0418h55.0033c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c0 1.125-.9168 2.0418-2.0418 2.0418zm-29.5435 8.0422h-25.4598c-1.125 0-2.0418-.9168-2.0418-2.0419v-1.3334c0-1.125.9167-2.0418 2.0418-2.0418h25.4598c1.1251 0 2.0418.9167 2.0418 2.0418v1.3334c0 1.125-.9167 2.0418-2.0418 2.0418zm37.0023 8.042h-60.087c-1.125 0-2.0417-.9167-2.0417-2.0417v-1.3334c0-1.1251.9167-2.0418 2.0417-2.0418h60.087c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c-.0417 1.125-.9168 2.0418-2.0418 2.0418zm0 8.0422h-56.8368c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9168-2.0418 2.0418-2.0418h56.8368c1.125 0 2.0417.9167 2.0417 2.0418v1.3334c-.0416 1.1668-.9167 2.0418-2.0417 2.0418zm0 8.0838h-49.128c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9168-2.0418 2.0418-2.0418h49.128c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c-.0417 1.1251-.9168 2.0418-2.0418 2.0418z"})),SvgSpencerLinkous01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 1",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:5,d:"M14.16 10.2598h107.4803m-53.7439 0h0v107.4804m107.4804 0H282.857M175.384 10.2597h107.4804m53.7439 107.4804h0V10.2597m53.7438 107.4804h0L444.096 10.2597l53.744 107.4805H390.3597",className:"cls-1"})),SvgSpencerLinkous02=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M267.8165 10.5529v29.5973h-91.6069V10.5529h91.6069m1.955-1.955h-95.5168v33.5072h95.4776V8.598h.0391zm-1.955 79.2911v29.5972h-91.6069V87.889h91.6069m1.955-1.9549h-95.5168v33.5071h95.4776v-33.507h.0391zm60.4065-75.3812v106.9333h-29.5973V10.553h29.5973m1.955-1.955h-33.5072v110.8432h33.5071V8.598zm-188.6876 1.9549v29.5973h-31.0048v77.336H82.8433V40.1501H51.8776V10.553h91.5678m1.9549-1.955H49.9227v33.5072h31.0048v77.336h33.507v-77.336h31.0049V8.598h-.0391zm307.8195 110.8431h-92.1152c-.3519 0-.6256-.1564-.821-.4692-.1564-.2736-.1955-.6255-.0391-.9383l38.5507-77.297c.1564-.3128.5083-.5474.8602-.5474s.7037.1955.8601.5474l7.5069 15.0528a1.0953 1.0953 0 0 1 0 .8602l-22.1687 44.4154h75.2248c.3128 0 .6256.1564.821.4301.1956.2737.1956.6256.0392.9384l-7.8587 16.4603c-.1564.3127-.5083.5473-.8602.5473zm-90.5513-1.9158h89.9257l6.9595-14.5445h-75.2248c-.3519 0-.6256-.1564-.821-.4692-.1564-.2736-.1955-.6255-.0392-.9383l22.6379-45.393-6.4121-12.9023-37.026 74.2473z"}),reactExports.createElement("path",{d:"M461.0785 102.9808H384.329c-.3519 0-.6256-.1564-.821-.4692-.1565-.2737-.1956-.6255-.0392-.9383l8.2106-16.4603c.1564-.3128.5083-.5474.8602-.5474h42.7343L398.4824 9.9664c-.1564-.3128-.1173-.6647.0391-.9384.1564-.2737.4692-.4691.821-.4691h15.6784c.352 0 .7038.1954.8602.5473l46.0967 92.467c.1564.3129.1173.6648-.0391.9384-.1955.2737-.5083.4692-.8602.4692zm-75.1857-1.9158h73.6609l-45.1583-90.5512h-13.528l36.7913 74.5992c.1564.3128.1173.6647-.039.9383-.1565.2737-.4692.4692-.8211.4692H393.126l-7.2332 14.5445z"}),reactExports.createElement("path",{d:"M361.1046 119.4411c-.391 0-.7037-.2346-.8601-.5473l-7.8588-16.4994a1.0953 1.0953 0 0 1 0-.8602l46.0967-92.3889c.1564-.3127.5083-.5473.8602-.5473s.7038.1955.8602.5473l37.456 76.0068c.1563.3128.1172.6647-.0391.9383-.1955.2737-.5083.4692-.8211.4301l-15.0919-.1955c-.3519 0-.7037-.1955-.8601-.5473L399.6554 43.317l-37.6906 75.5767c-.1564.3127-.4692.5473-.8602.5473zm-6.803-17.4377 6.8421 14.2708 37.6906-75.5376c.1564-.3128.5083-.5474.8602-.5474s.7037.1955.8601.5474l21.7777 43.6726 12.9415.1955-35.9312-72.8789-45.041 90.2776z"}))),SvgSpencerLinkous04=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M168.9861 5.0551h101.5474v35.6372H168.9861zm0 82.2526h101.5474v35.6372H168.9861zM301.2638 5.0551h35.6372v117.8898h-35.6372zm-162.9664 0H36.75v35.6372h32.9343v82.2526h35.6372V40.6923h32.9759z"}),reactExports.createElement("path",{fill:"none",d:"M417.1992 56.6189 402.0627 86.975h30.2729z",className:"st0"}),reactExports.createElement("path",{d:"m409.0072 40.235-8.6078 17.2987-32.6432 65.4112h99.385l8.1088-16.9246h-83.001c-.1664 0-.3327-.0831-.4575-.2495-.0831-.1663-.1247-.3326-.0415-.499l8.9404-17.9641 15.885-31.8115-7.5682-15.2612z"}),reactExports.createElement("path",{d:"M393.1222 104.9807H475.25L425.4328 5.0551h-15.9266l40.5441 82.211c0 .0416.0416.0831.0416.1247v.2911c0 .0416 0 .0416-.0416.0832-.0832.1247-.2495.2079-.4158.2495h-48.0708l-8.4415 16.9661zm8.4415-16.9245-8.4415 16.9245 8.4415-16.9245z"}),reactExports.createElement("path",{d:"m448.7196 86.975-22.7463-46.158L408.633 5.7206l-49.734 99.7177 8.0256 16.7998 41.6253-83.417c.0831-.1662.291-.291.4574-.291s.3742.1247.4574.291l23.9106 47.946 15.3444.208zM408.6329 5.7205l17.3404 35.0966z"}))),SvgSpencerLinkous05=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M148.1698 8.5686H59.5433c-6.0676 0-11 4.9324-11 11 0 6.1068 4.9324 11.0392 11.0391 11.0392h88.6265c6.1068 0 11.0392-4.9324 11.0392-11.0392-.0392-6.0676-4.9716-11-11.0783-11zm128.2813 0h-88.6265c-6.1067 0-11.0391 4.9324-11.0391 11.0392 0 6.1067 4.9324 11.0391 11.0391 11.0391h88.6265c6.1068 0 11.0392-4.9324 11.0392-11.0391 0-6.1068-4.9324-11.0392-11.0392-11.0392zm0 44.0784h-88.6265c-6.1067 0-11.0391 4.9324-11.0391 11.0391 0 6.1068 4.9324 11.0392 11.0391 11.0392h88.6265c6.1068 0 11.0392-4.9324 11.0392-11.0392 0-6.1068-4.9324-11.0391-11.0392-11.0391zm77.5874 55.8221v-89.331c0-6.1069-4.9324-10.6478-11.0392-10.6478-6.1068 0-11.0392 4.541-11.0392 10.6477v89.292c0 6.1068 4.9324 11.0391 11.0392 11.0391 6.1068 0 11.0392-4.9323 11.0392-11zm62.9075 4.7367 45.2528-88.3133c2.7793-5.4022.822-12.3702-4.5801-15.1495-5.4021-2.936-12.2527-.3523-15.032 5.089l-45.2528 88.3133c-2.7794 5.4021-.6263 12.4484 4.7758 15.2278 5.4413 2.7793 12.057.2348 14.8363-5.1673z"})),SvgTamasAntal01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M308.0824 36.8185c-.7879-1.5343-2.4051-2.3222-4.0223-2.1978h-.0415c-.1244 0-.2488.0415-.3732.0415-.0414 0-.083 0-.083.0415-.0828.0414-.2072.0414-.2902.083-.0414 0-.083.0414-.1244.0414-.083.0414-.1658.0414-.2488.083-.0414.0414-.1244.0414-.1658.0828-.083.0415-.1244.0415-.2074.083l-15.011 7.9616-14.472 7.6714c-.0414.0414-.1243.083-.1658.083-.0414.0414-.1244.0828-.1658.0828-.083.0415-.1244.083-.2074.166-.0414.0414-.083.0414-.1244.0828-.083.083-.1658.1244-.2073.2074l-.083.0829-.2487.2488-.0415.0415c-.083.0829-.1659.2073-.2073.2902-.8294 1.244-.9952 2.8612-.2488 4.2711v.0415c1.2025 2.3636 1.783 4.9346 1.783 7.6299 0 4.271-1.5757 8.3763-4.437 11.5278-1.5342 1.7001-1.4098 4.3125.2903 5.8468.788.705 1.7831 1.0781 2.7783 1.0781 1.1196 0 2.2392-.456 3.0686-1.3684 4.271-4.6857 6.5932-10.7399 6.5932-17.0843 0-2.6539-.4147-5.2248-1.2025-7.7128l7.2567-3.8565c1.3684 3.6906 2.0319 7.547 2.0319 11.5693 0 4.0637-.705 8.0031-2.1149 11.7766-.7878 2.1148.2903 4.5199 2.4051 5.3077.4976.166.9538.2488 1.4514.2488 1.6586 0 3.2344-1.0366 3.8564-2.6953 1.7416-4.6858 2.6539-9.6203 2.6539-14.6793 0-5.3077-1.0367-10.574-2.9442-15.4256l7.7958-4.1467c2.6124 6.1785 3.9393 12.7303 3.9393 19.5723 0 16.421-8.003 31.8466-21.4383 41.3425-1.866 1.327-2.3222 3.8979-.9952 5.7639.7878 1.1196 2.0733 1.7416 3.3588 1.7416.8293 0 1.6587-.2488 2.3636-.7464 15.633-11.0302 24.963-28.9853 24.963-48.06-.0829-9.3716-2.405-18.7846-6.7176-27.1194zm-37.4031 75.5111c-3.4418 1.0367-7.008 1.7002-10.6155 2.0319V89.0667c.9952-.1659 1.9904-.3732 2.9856-.6635 2.1977-.622 3.4417-2.9441 2.8197-5.1004-.622-2.1977-2.9441-3.4417-5.1004-2.8197-3.11.9122-6.5103.9122-9.5788 0-2.1978-.622-4.4785.622-5.1005 2.8197-.622 2.1978.622 4.4784 2.8198 5.1004.9952.2903 1.949.4976 2.9856.6635v25.2948c-3.6905-.2903-7.3396-.9952-10.9058-2.1148-2.1563-.6635-4.4784.539-5.1833 2.6953-.6635 2.1563.539 4.4785 2.6953 5.1834 5.6395 1.7416 11.5278 2.6539 17.4576 2.6539 5.8468 0 11.6107-.8708 17.1672-2.5295 2.1978-.6635 3.4003-2.9856 2.7368-5.1419-.7049-2.1977-3.027-3.4417-5.1833-2.7783zM222.163 26.4103c8.252-7.4226 18.6601-11.8595 29.6074-12.7718v25.2948c-.9952.1659-1.9904.3732-2.9856.6635-2.1978.622-3.4418 2.9441-2.8198 5.1004.539 1.8245 2.1563 2.9856 3.9394 2.9856.3732 0 .7878-.0415 1.161-.1659 3.11-.9123 6.5103-.9123 9.5789 0 2.1977.622 4.4784-.622 5.1004-2.8197.622-2.1978-.622-4.4785-2.8198-5.1005-.9537-.2902-1.9489-.4975-2.9856-.6634V13.6385c10.9888.9123 21.3555 5.3492 29.6074 12.7718.7878.705 1.783 1.0367 2.7368 1.0367 1.1196 0 2.2392-.4562 3.0685-1.3684 1.5343-1.7002 1.3684-4.3126-.3317-5.8469-10.6155-9.6618-24.5484-15.011-39.1032-15.011-14.5134 0-28.4463 5.3492-39.2692 15.0525-1.7 1.5343-1.8245 4.1467-.3317 5.8468 1.5758 1.6587 4.1882 1.783 5.8468.2903z"}),reactExports.createElement("circle",{cx:486.4639,cy:-139.1956,r:26.3,transform:"matrix(.40932 -.06643 .06643 .40932 66.0468 153.269)"}),reactExports.createElement("path",{d:"M243.6843 81.8515c1.6173-1.6172 1.6173-4.2296 0-5.8469-1.6172-1.6172-4.2296-1.6172-5.8468 0l-8.4178 8.4593c-4.5198-5.8468-6.9664-12.9791-6.9664-20.4846 0-3.9394.705-7.8787 2.0319-11.5278l10.5326 5.598c.622.3317 1.2854.4976 1.949.4976 1.4927 0 2.9026-.7879 3.649-2.1977 1.0781-2.032.2903-4.52-1.7001-5.598l-29.1098-15.4257-.3732-.2074c-1.949-1.0366-4.354-.3317-5.4736 1.4929l-.0415.0414C199.5221 45.029 197.2 54.442 197.2 63.9793c0 15.633 6.0542 30.3537 17.0843 41.4253.788.8294 1.866 1.2026 2.9442 1.2026.9123 0 1.866-.3317 2.6124-.9123.083-.083.2073-.1659.2903-.2488l12.0254-12.0254 11.5277-11.5692zm-34.3345-37.4446 7.7958 4.1467c-1.949 4.893-2.9442 10.1594-2.9442 15.4257 0 9.7032 3.2759 18.9088 9.3715 26.3314l-6.22 6.22c-7.7128-9.0812-11.901-20.526-11.901-32.5514-.0415-6.7177 1.327-13.3938 3.8979-19.5724z"}))),SvgThequrator01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M223.2474 42.9233h31.025v10.8752h-31.025zm0 30.0811h31.025v10.8752h-31.025zm-27.742-30.0811h-12.9271v10.8341h12.9271v30.1222h10.8342V53.7574h12.9271V42.9233h-12.9271zm65.9077 0h10.8752v40.9563h-10.8752zm46.0861 0h-27.9471v40.9563h10.8752V73.0044h17.113v10.8752h10.8751V42.9233h-10.9162zm-17.113 19.206v-8.3719h17.113v8.3718h-17.113z"}),reactExports.createElement("path",{strokeWidth:.4104,d:"m151.2491 65.0586 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zm14.5705.0035 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zm165.7939.0021 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zm14.5705.0035 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zM243.2284 27.686l7.2836-7.2837 7.2836 7.2836-7.2836 7.2836zm.0036-14.5706 7.2835-7.2836 7.2836 7.2836-7.2836 7.2836zm.0143 101.7684 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zm-.0255-14.5995 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836z"}),reactExports.createElement("path",{d:"M292.6433 104.0294h10.3006V114.33h-10.3006zm-10.3006-10.3006h10.3006v10.3006h-10.3006zm-89.3816 10.3006h10.3006V114.33h-10.3006zm10.3006-10.3006h10.3006v10.3006h-10.3006zm79.081-70.2988h10.3006v10.3006h-10.3006zm10.3006-10.3006h10.3006V23.43h-10.3006zm-99.6822 0h10.3006V23.43h-10.3006zM203.2617 23.43h10.3006v10.3006h-10.3006z"}))),SvgTofudog01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null",strokeWidth:.3507},reactExports.createElement("path",{d:"M129.0495 24.2257c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9258 4.4544 9.9258 9.926c0 5.5065-4.4544 9.9258-9.9259 9.9258s-9.9259-4.4193-9.9259-9.9259zm19.8872.0007c0-5.5066 4.4544-9.926 9.926-9.926s9.9259 4.4545 9.9259 9.926c0 5.5066-4.4544 9.926-9.926 9.926s-9.9259-4.4194-9.9259-9.926zm19.8867.0002c0-5.5066 4.4544-9.9259 9.926-9.9259s9.961 4.4544 9.961 9.926c0 5.5065-4.4545 9.9258-9.926 9.9258s-9.961-4.4193-9.961-9.9259zm35.214-.0008c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.926 4.4544 9.926 9.926c0 5.5066-4.4545 9.9259-9.926 9.9259s-9.926-4.4193-9.926-9.926zm19.8871.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.4715.0351-9.926-4.4193-9.926-9.9259zm19.8873-.0002c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9258 4.4544 9.9258 9.926c0 5.5065-4.4543 9.9258-9.9259 9.9258s-9.9259-4.4193-9.9259-9.9259zm39.7734.0003c0-5.5066 4.4543-9.926 9.9259-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926 0 5.5066-4.4544 9.9259-9.926 9.9259-5.4715.035-9.9258-4.4193-9.9258-9.926zm39.7744-.0007c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.5066.0351-9.926-4.4193-9.926-9.9259z"}),reactExports.createElement("path",{d:"M343.2111 24.2264c0-5.5066 4.4544-9.9259 9.926-9.9259 5.5065 0 9.9258 4.4544 9.9258 9.926 0 5.5065-4.4543 9.9258-9.9259 9.9258-5.4715.0351-9.9259-4.4193-9.9259-9.9259zm19.8869-.0004c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9258-9.926 9.9258s-9.9259-4.4193-9.9259-9.9259zM148.9368 44.1134c0-5.5066 4.4544-9.926 9.926-9.926s9.9258 4.4545 9.9258 9.926-4.4543 9.926-9.9259 9.926-9.9259-4.4194-9.9259-9.926zm55.1007-.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.9259 4.4544 9.9259 9.926-4.4544 9.9259-9.926 9.9259-9.9258-4.4194-9.9258-9.926zm79.5478.0007c0-5.5066 4.4543-9.926 9.9259-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926s-4.4544 9.9259-9.926 9.9259c-5.4715.035-9.9258-4.4193-9.9258-9.926zm39.774-.0007c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926s-4.4545 9.9258-9.926 9.9258c-5.5066.0351-9.926-4.4193-9.926-9.9259zm39.7387.0004c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926-4.4544 9.9258-9.926 9.9258-9.9259-4.4193-9.9259-9.9259zM148.937 64.0004c0-5.5066 4.4543-9.926 9.9258-9.926s9.926 4.4545 9.926 9.926c0 5.5066-4.4544 9.926-9.926 9.926s-9.9259-4.4194-9.9259-9.926zm55.1006-.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9259-9.926 9.9259s-9.9258-4.4194-9.9258-9.926zm19.8871.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.4715.0351-9.926-4.4193-9.926-9.9259zm19.8873-.0002c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9258 4.4544 9.9258 9.926c0 5.5065-4.4544 9.9258-9.9259 9.9258s-9.9259-4.4193-9.9259-9.9259zm39.7733-.0007c0-5.5067 4.4544-9.926 9.926-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926 0 5.5066-4.4544 9.9259-9.926 9.9259-5.4715.035-9.9259-4.4193-9.9259-9.926zm39.774.0003c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.5066.0351-9.926-4.4193-9.926-9.9259z"}),reactExports.createElement("path",{d:"M343.2111 63.9994c0-5.5066 4.4544-9.9259 9.926-9.9259 5.5065 0 9.9258 4.4544 9.9258 9.926 0 5.5065-4.4544 9.9258-9.9259 9.9258-5.4715.0351-9.9259-4.4193-9.9259-9.9259zm19.8869.0008c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9258-9.926 9.9258s-9.9259-4.4193-9.9259-9.9259zM148.937 83.8874c0-5.5066 4.4544-9.926 9.926-9.926s9.9258 4.4545 9.9258 9.926c0 5.5066-4.4543 9.926-9.9259 9.926s-9.9259-4.4194-9.9259-9.926zm55.1007-.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9259-9.926 9.9259s-9.9258-4.4194-9.9258-9.926zm79.5478-.0003c0-5.5066 4.4543-9.926 9.9259-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926 0 5.5066-4.4544 9.9259-9.926 9.9259-5.4715.035-9.9258-4.4193-9.9258-9.926zm39.7738.0003c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.5066.0351-9.926-4.4193-9.926-9.9259zm39.7387.0004c0-5.5066 4.4545-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9258-9.926 9.9258s-9.9258-4.4193-9.9258-9.9259zm-214.1609 19.8862c0-5.5066 4.4544-9.926 9.926-9.926s9.9258 4.4545 9.9258 9.926-4.4543 9.926-9.9259 9.926-9.9259-4.4194-9.9259-9.926zm55.1007.0004c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.9259 4.4544 9.9259 9.926-4.4544 9.9259-9.926 9.9259-9.9258-4.4194-9.9258-9.926zm19.8871-.0004c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926s-4.4545 9.9258-9.926 9.9258c-5.4715.0351-9.926-4.4193-9.926-9.9259zm19.8863.0008c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9258 4.4544 9.9258 9.926-4.4544 9.9258-9.9259 9.9258-9.9259-4.4193-9.9259-9.9259zm39.7742-.0007c0-5.5066 4.4544-9.926 9.926-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926s-4.4544 9.9259-9.926 9.9259c-5.4715.035-9.9259-4.4193-9.9259-9.926zm39.7739.0003c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926s-4.4545 9.9258-9.926 9.9258c-5.5066.0351-9.926-4.4193-9.926-9.9259zm39.7387-.0006c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926-4.4544 9.9258-9.926 9.9258-9.9259-4.4193-9.9259-9.9259z"}))),SvgTofudog02=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M400.4148 42.4695c1.947-3.3212 1.947-7.444 0-10.7653-1.9469-3.3212-5.4971-5.3826-9.2764-5.3826-3.8938 0-7.444-2.0614-9.2765-5.3826-1.9469-3.3212-5.4971-5.3827-9.2764-5.3827-3.8939 0-7.444 2.0615-9.2765 5.3827-1.9469 3.3212-5.4971 5.3826-9.2764 5.3826-3.8939 0-7.444 2.0614-9.2765 5.3826-1.9469 3.3212-1.9469 7.444 0 10.7653 1.947 3.3212 1.947 7.444 0 10.7652-1.9469 3.3212-1.9469 7.4441 0 10.7653 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 5.4972 5.3827 9.2765 5.3827 3.8938 0 7.444-2.0615 9.2764-5.3827 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.444 0-10.7653 1.947-3.3212 5.4972-5.3826 9.2765-5.3826 3.8938 0 7.444 2.0614 9.2764 5.3826 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 5.4972 5.3827 9.2765 5.3827 3.8938 0 7.444-2.0615 9.2764-5.3827 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.444 0-10.7653 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.4441 0-10.7653 1.947-3.3212 1.947-7.444 0-10.7653-1.9469-3.3212-1.9469-7.444 0-10.7652zM363.08 53.2347c-1.947-3.3212-1.947-7.444 0-10.7652 1.9469-3.3212 5.4971-5.3826 9.2764-5.3826 3.8939 0 7.444 2.0614 9.2765 5.3826 1.9469 3.3212 1.9469 7.444 0 10.7652-1.947 3.3212-5.4972 5.3827-9.2765 5.3827s-7.3295-2.0615-9.2764-5.3827zm-47.642-23.1338a9.6229 9.6229 0 0 0 0-9.62c-1.7179-3.0922-4.9246-4.9246-8.3603-4.9246-3.4357 0-6.6424 1.8324-8.3602 4.81a9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.6201 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.6201 9.6229 9.6229 0 0 0 0 9.62c1.7178 2.9776 4.9245 4.81 8.3602 4.81 3.4357 0 6.6424-1.8324 8.3603-4.81a9.6229 9.6229 0 0 0 0-9.62 9.6229 9.6229 0 0 1 0-9.62 9.6229 9.6229 0 0 0 0-9.62 9.6229 9.6229 0 0 1 0-9.62 9.6229 9.6229 0 0 0 0-9.62 9.6229 9.6229 0 0 1 0-9.6201 9.6229 9.6229 0 0 0 0-9.62c-1.7179-2.8631-1.7179-6.5279 0-9.5055zm-62.5302 58.0637c-1.7178 2.9776-4.9245 4.81-8.3602 4.81-3.4357 0-6.6424-1.8324-8.3603-4.81a9.6229 9.6229 0 0 1 0-9.62c1.7179-2.9777 4.9246-4.81 8.3603-4.81 3.4357 0 6.6424-1.8324 8.3602-4.81a9.6229 9.6229 0 0 0 0-9.62c-1.7178-2.9777-4.9245-4.8101-8.3602-4.8101-3.4357 0-6.6424-1.8324-8.3603-4.81a9.6229 9.6229 0 0 1 0-9.62c1.7179-2.9777 4.9246-4.81 8.3603-4.81 3.4357 0 6.6424 1.8323 8.3602 4.81 1.718 2.9776 4.9246 4.81 8.3603 4.81 3.4357 0 6.6424-1.8324 8.3603-4.81a9.6229 9.6229 0 0 0 0-9.62c-1.7179-2.9777-4.9246-4.81-8.3603-4.81-3.4357 0-6.6424-1.8324-8.3603-4.81-1.7178-2.9777-4.9245-4.81-8.3602-4.81-3.4357 0-6.6424 1.8323-8.3603 4.81-1.7178 2.9776-4.9245 4.81-8.3602 4.81-3.4358 0-6.6424 1.8323-8.3603 4.81a9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62c1.7179 2.9777 4.9245 4.8101 8.3603 4.8101 3.4357 0 6.6424 1.8324 8.3602 4.81 1.7179 2.9776 4.9246 4.81 8.3603 4.81 3.4357 0 6.6424-1.8324 8.3602-4.81 1.718-2.9776 4.9246-4.81 8.3603-4.81 3.4357 0 6.6424-1.8324 8.3603-4.81a9.6229 9.6229 0 0 0 0-9.62c-1.7179-2.9777-4.9246-4.81-8.3603-4.81-3.4357-.1146-6.6424 1.8323-8.3603 4.81zm-57.6056-61.843c-3.8938 0-7.444-2.0614-9.2764-5.3826-1.947-3.3212-5.4972-5.3827-9.2765-5.3827-3.8938 0-7.444 2.0615-9.2764 5.3827-1.947 3.3212-5.4972 5.3826-9.2765 5.3826-3.8938 0-7.444-2.0614-9.2764-5.3826-2.0614-3.3212-5.6117-5.3827-9.5055-5.3827-3.8938 0-7.444 2.0615-9.2765 5.3827-1.9469 3.3212-5.4971 5.3826-9.2764 5.3826-3.8938 0-7.444 2.0614-9.2765 5.3826-1.9469 3.3212-1.9469 7.444 0 10.7653 1.947 3.3212 5.4972 5.3826 9.2765 5.3826 3.8938 0 7.444-2.0614 9.2764-5.3826 1.947-3.3212 5.4972-5.3826 9.2765-5.3826 3.8938 0 7.444 2.0614 9.2764 5.3826 1.947 3.3212 1.947 7.444 0 10.7652-1.9469 3.3212-1.9469 7.4441 0 10.7653 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 5.4972 5.3827 9.2765 5.3827 3.8938 0 7.444-2.0615 9.2764-5.3827 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.444 0-10.7653 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.4441 0-10.7653 1.947-3.3212 1.947-7.444 0-10.7653-1.9469-3.3212-1.9469-7.444 0-10.7652 1.947-3.3212 5.4972-5.3826 9.2765-5.3826 3.8938 0 7.444 2.0614 9.2764 5.3826 1.947 3.3212 5.4972 5.3826 9.2765 5.3826 3.8938 0 7.444-2.0614 9.2764-5.3826 1.947-3.3212 1.947-7.444 0-10.7653-1.6033-3.3212-5.1535-5.3826-9.0474-5.3826z"})),SvgTxchiDu01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"#FFF",strokeMiterlimit:10},reactExports.createElement("path",{d:"m312.0294 39.7987-31.828-31.8681c-.4405-.4404-1.041-.6806-1.6815-.6806h-45.0397c-.6406 0-1.2411.2402-1.6815.6806l-31.868 31.868c-.4405.4405-.6807 1.041-.6807 1.6816v45.0396c0 .6406.2402 1.2411.6806 1.6815l31.868 31.8681c.4405.4404 1.041.6806 1.6816.6806h45.0396c.6406 0 1.2411-.2402 1.6815-.6806l31.8681-31.868c.4404-.4405.6806-1.041.6806-1.6816V41.4802c0-.6406-.2802-1.2411-.7206-1.6815zm-4.0036 45.7603-30.4668 30.4668h-43.118L203.9742 85.559V42.441l30.4668-30.4668h43.118l30.4668 30.4668v43.118z",className:"st0"}),reactExports.createElement("path",{d:"M295.775 46.5246 273.4755 24.225c-.04-.04-.08-.04-.08-.0801-.0801-.08-.1602-.1602-.2803-.2002-.08-.08-.2002-.1201-.3203-.1601-.04 0-.08-.04-.08-.04-.1602-.0401-.2803-.1202-.4405-.1202h-.1601c-.08 0-.2002-.04-.2802-.04-.0801 0-.1602 0-.2403.04-.08 0-.1601 0-.2402.04-.08 0-.12.04-.2001.04-.0801.0401-.1602.0401-.2403.0802-.08.04-.12.08-.2001.12-.0801.0401-.1602.0801-.2002.1202-.1201.08-.2402.2002-.3603.2802-.04.04-.04.0801-.0801.1201-.08.0801-.1601.1602-.2002.2403-.08.12-.1201.2001-.1601.3202 0 .04-.04.04-.04.0801l-11.0898 26.7436h-5.0445l-9.7285-23.5008h19.417c1.3212 0 2.3621-1.0409 2.3621-2.362s-1.0409-2.3621-2.362-2.3621H240.166c-.08 0-.2001 0-.2802.04-.1601.04-.2803.0801-.4004.1201h-.04s-.04 0-.04.04c-.1201.0401-.2402.1202-.3604.2003-.08.04-.1601.12-.2402.2001-.04.04-.08.04-.12.0801l-16.2144 16.2143a2.3439 2.3439 0 0 0 0 3.323c.4805.4403 1.081.6805 1.6815.6805s1.201-.2402 1.6815-.6806l13.732-13.732 9.7287 23.5006-3.5632 3.5632-12.1307-4.9644c-.04 0-.08-.04-.12-.04-.1202-.04-.2003-.0801-.3204-.0801-.12-.04-.2001-.04-.3202-.04h-.1602c-.12 0-.2802 0-.4003.04-.1602.04-.2803.08-.4004.1201-.04 0-.04 0-.08.04-.0801.04-.2002.0801-.2803.1602-.04.04-.08.04-.1201.08-.08.0401-.1201.1202-.2002.1602-.04.04-.1201.08-.1601.1201-.0801.08-.1201.1601-.2002.2402-.04.04-.08.08-.08.1201-.0801.1201-.1602.2803-.2403.4004 0 .04 0 .08-.04.08l-.1201.3604c-.04.12-.04.2402-.04.3603v19.4171c0 .6406.2401 1.241.6805 1.6815l12.531 12.531-4.2036 10.089-19.1369-19.137v-30.627c0-1.3211-1.041-2.362-2.362-2.362s-2.3622 1.0409-2.3622 2.362V79.834c0 .6405.2403 1.241.6806 1.6815l22.3397 22.3396.08.0801c.0802.08.1602.1602.2803.2402.0801.0801.2002.1201.3203.1602.04 0 .08.04.08.04l.3604.1201c.04 0 .04 0 .08.04h.0802c.12 0 .2402.0401.3603.0401.12 0 .2802 0 .4003-.04.04 0 .08 0 .1201-.04.0801-.0401.2002-.0401.2803-.0801.04 0 .08-.04.12-.04.1202-.0401.2403-.1202.3604-.2003.1201-.08.2402-.1601.3203-.2802 0 0 .04 0 .04-.04l.04-.0401c.0801-.08.1602-.1601.2003-.2803l.08-.08c.08-.1201.1201-.2402.2002-.3603l6.1254-14.813 4.9243-11.9306h5.0445l9.7286 23.5007h-3.243c-1.321 0-2.362 1.041-2.362 2.362s1.041 2.3622 2.362 2.3622h6.766c.1602 0 .3203 0 .4404-.04.3203-.0801.6006-.2003.8408-.3604.08-.08.1601-.1201.2402-.2002.04-.04.08-.04.1201-.08l4.7642-4.7642a2.3439 2.3439 0 0 0 0-3.323 2.3439 2.3439 0 0 0-3.323 0l-2.282 2.282-9.7285-23.5007 3.5631-3.5631 26.7836 11.0898c.2803.12.6006.1601.9208.1601.9209 0 1.8016-.5605 2.162-1.4413.4804-1.201-.0801-2.6023-1.2812-3.0827l-26.7836-11.0898V61.618l26.7436-11.0898c.04 0 .08-.04.12-.04.1202-.04.2003-.08.2803-.1602.0801-.08.2002-.16.2803-.2402l.08-.08c.1202-.1201.2002-.2402.2803-.3604.04-.04.08-.12.08-.16l.1202-.2403c.04-.08.04-.1601.08-.2402 0-.08.04-.1201.04-.2002 0-.08 0-.1201.0401-.2002 0-.08.04-.1601.04-.2402 0-.08 0-.1601-.04-.2402 0-.08 0-.1601-.04-.2002-.04-.1601-.08-.3203-.1201-.4404 0-.04-.04-.08-.04-.08-.0401-.1201-.0801-.2002-.1602-.3203-.08-.08-.1201-.1602-.2002-.2402.2002-.2402.1602-.2803.1201-.3203zm-29.3058 10.5693-3.5631-3.5631 9.7286-23.5007 17.3352 17.3352-23.5007 9.7286zm-7.3665 14.4527h-6.2455l-4.4439-4.4439v-6.2455l4.444-4.4439h6.2454l4.444 4.444v6.2454l-4.444 4.444zm-24.0612 1.121v-14.813l8.6877 3.6032v6.6458c0 .6406.2402 1.2411.6806 1.6815l4.6841 4.6841-3.6031 8.6877-10.4493-10.4893z",className:"st0"}),reactExports.createElement("circle",{cx:797.1289,cy:-60.4278,r:9,className:"st0",transform:"matrix(.15321 -.36989 .36989 .15321 156.199 368.1)"}))),SvgViscous01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M224.8418 33.1511h-13.7144c-19.592 0-35.5063 15.9143-35.5063 35.5063v39.2184c0 2.681 2.1655 4.8465 4.8465 4.8465s4.8464-2.1655 4.8464-4.8465V68.6574c0-14.23 11.5834-25.8477 25.8477-25.8477h13.7145c2.681 0 4.8464-2.1655 4.8464-4.8465s-2.2342-4.812-4.8808-4.812zm0-17.8734h-88.6454c-2.681 0-4.8464 2.1655-4.8464 4.8465s2.1654 4.8464 4.8464 4.8464h88.6454c2.681 0 4.8464-2.1654 4.8464-4.8464s-2.1998-4.8465-4.8464-4.8465zm65.3412 0h-43.3431c-2.681 0-4.8465 2.1655-4.8465 4.8465s2.1655 4.8464 4.8465 4.8464h43.343c2.681 0 4.8465-2.1654 4.8465-4.8464s-2.1998-4.8465-4.8465-4.8465zm-13.8863 27.532h13.8519c2.681 0 4.8464-2.1655 4.8464-4.8465s-2.1654-4.812-4.812-4.812h-13.852c-18.9046 0-34.3032 15.3986-34.3032 34.3032v40.4214c0 2.681 2.1654 4.8465 4.8464 4.8465h43.3431c2.681 0 4.8465-2.1654 4.8465-4.8465s-2.1655-4.8464-4.8465-4.8464h-38.4966v-35.575c-.0344-13.577 10.999-24.6447 24.576-24.6447zm34.8532-27.532c-2.681 0-4.8465 2.1655-4.8465 4.8465v87.7516c0 2.681 2.1654 4.8465 4.8464 4.8465s4.8465-2.1655 4.8465-4.8465V20.1242c0-2.681-2.1654-4.8465-4.8464-4.8465zm66.2004 20.8982c-.0687-.1719-.1375-.3437-.2406-.5156-5.7401-12.0302-18.0453-20.3826-32.2753-20.3826H331.12c-2.681 0-4.8465 2.1654-4.8465 4.8465v87.7516c0 2.681 2.1655 4.8465 4.8465 4.8465s4.8464-2.1655 4.8464-4.8465V24.9362h8.9024c7.4587 0 14.1956 3.1623 18.9733 8.1806h-14.9174c-2.681 0-4.8465 2.1654-4.8465 4.8464s2.1655 4.8465 4.8465 4.8465h20.692a26.0956 26.0956 0 0 1 1.3404 8.2492v56.817c0 2.681 2.1655 4.8464 4.8465 4.8464s4.8464-2.1655 4.8464-4.8465V51.059c-.0343-5.3276-1.203-10.346-3.2997-14.883z"})),SvgWans02=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("path",{stroke:"null",d:"M164.7912 16.3016c0-2.9157-2.355-5.2707-5.2707-5.2707h-24.4473v-.0748H88.4588v.0748H63.9743c-2.9157 0-5.2708 2.355-5.2708 5.2707v36.1102c0 2.9158 2.355 5.2708 5.2708 5.2708H87.3c.6355 0 1.1215.486 1.1215 1.1214v52.9692c0 2.9157 2.355 5.2707 5.2707 5.2707h36.1103c2.9157 0 5.2707-2.355 5.2707-5.2707V58.804c0-.6355.486-1.1214 1.1214-1.1214h23.3259c2.9157 0 5.2708-2.355 5.2708-5.2708V16.3016zm127.2455 95.4716V16.2268c0-2.9158 2.355-5.2708 5.2708-5.2708h36.1102c2.9158 0 5.2708 2.355 5.2708 5.2708v95.5463c0 2.9157-2.355 5.2707-5.2708 5.2707h-36.1102c-2.9157 0-5.2707-2.355-5.2707-5.2707zm-15.8496-54.0906h-95.5463c-2.9157 0-5.2707-2.355-5.2707-5.2708V16.3016c0-2.9157 2.355-5.2707 5.2707-5.2707h95.5463c2.9158 0 5.2708 2.355 5.2708 5.2707v36.1102c0 2.9158-2.355 5.2708-5.2708 5.2708zm0 59.3239h-95.5463c-2.9157 0-5.2707-2.355-5.2707-5.2707V75.6255c0-2.9157 2.355-5.2707 5.2707-5.2707h95.5463c2.9158 0 5.2708 2.355 5.2708 5.2707v36.1103c0 2.9157-2.355 5.2707-5.2708 5.2707zM399.059 13.8718l-51.1374 100.7797c-.5607 1.084.2243 2.3924 1.4579 2.3924h102.2749c1.2336 0 2.0186-1.3083 1.4578-2.3924L401.9749 13.8718c-.5981-1.1962-2.3176-1.1962-2.9157 0z"})),SvgZootghost01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...Xe},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M441.6742 117.9702H490.9l-57.886-84.4048h-50.6346l-46.491 70.8139V33.5654H289.19v65.2615h-79.5154V82.7497h72.347v-18.066h-72.347V51.59h57.803V33.5654H21.1v21.008h47.4855v63.3968h46.6982V54.5733h47.6927v63.397h210.9501l7.3756-13.591h52.9965l7.3756 13.591zM391.6196 85.526l16.2843-29.9581 16.2015 29.9581h-32.4858z"}),reactExports.createElement("ellipse",{cx:68.2955,cy:33.5653,fill:"#FFF",className:"st0",rx:21.1323,ry:22.7483}),reactExports.createElement("path",{d:"M68.2955 11.6872c11.229 0 20.3035 9.8203 20.3035 21.9196s-9.0744 21.9196-20.3036 21.9196c-11.229 0-20.3035-9.8203-20.3035-21.9196s9.0744-21.9196 20.3036-21.9196m0-1.6574c-12.0993 0-21.961 10.5661-21.961 23.577s9.8617 23.577 21.961 23.577 21.961-10.5661 21.961-23.577-9.8618-23.577-21.961-23.577z"}),reactExports.createElement("ellipse",{cx:74.6766,cy:33.5653,rx:10.1932,ry:10.6905}),reactExports.createElement("ellipse",{cx:115.4909,cy:33.5653,fill:"#FFF",className:"st0",rx:21.1323,ry:22.7483}),reactExports.createElement("path",{d:"M115.491 11.6872c11.229 0 20.3035 9.8203 20.3035 21.9196s-9.0745 21.9196-20.3036 21.9196-20.3036-9.8203-20.3036-21.9196 9.0745-21.9196 20.3036-21.9196m0-1.6574c-12.0993 0-21.961 10.5661-21.961 23.577s9.8617 23.577 21.961 23.577 21.961-10.5661 21.961-23.577-9.8617-23.577-21.961-23.577z"}),reactExports.createElement("ellipse",{cx:109.1098,cy:33.5653,rx:10.1932,ry:10.6905}),reactExports.createElement("ellipse",{cx:384.2441,cy:33.5653,fill:"#FFF",className:"st0",rx:21.1323,ry:22.7483}),reactExports.createElement("path",{d:"M384.244 11.6872c11.2292 0 20.3036 9.8203 20.3036 21.9196s-9.0744 21.9196-20.3035 21.9196c-11.2292 0-20.3036-9.8203-20.3036-21.9196s9.1159-21.9196 20.3036-21.9196m0-1.6574c-12.0993 0-21.961 10.5661-21.961 23.577s9.8617 23.577 21.961 23.577c12.0992 0 21.961-10.5661 21.961-23.577s-9.8203-23.577-21.961-23.577z"}),reactExports.createElement("ellipse",{cx:390.6252,cy:33.5653,rx:10.1932,ry:10.6905}),reactExports.createElement("ellipse",{cx:431.481,cy:33.5653,fill:"#FFF",className:"st0",rx:21.1323,ry:22.7483}),reactExports.createElement("path",{d:"M431.481 11.6872c11.229 0 20.3035 9.8203 20.3035 21.9196s-9.0744 21.9196-20.3035 21.9196c-11.2292 0-20.3036-9.8203-20.3036-21.9196s9.0744-21.9196 20.3036-21.9196m0-1.6574c-12.0993 0-21.961 10.5661-21.961 23.577s9.8617 23.577 21.961 23.577c12.0992 0 21.961-10.5661 21.961-23.577s-9.8618-23.577-21.961-23.577z"}),reactExports.createElement("ellipse",{cx:425.0584,cy:33.5653,rx:10.1932,ry:10.6905}),reactExports.createElement("path",{fill:"#FFF",d:"M232.2987 85.8574c-6.0911 0-11.0634-5.428-11.0634-12.0993s4.9723-12.0992 11.0634-12.0992c6.091 0 11.0633 5.428 11.0633 12.0992s-4.9308 12.0993-11.0633 12.0993z",className:"st0"}),reactExports.createElement("path",{d:"M232.2987 62.529c5.6352 0 10.2346 5.0552 10.2346 11.2706S237.934 85.07 232.2987 85.07s-10.2347-5.0551-10.2347-11.2705 4.5994-11.2706 10.2347-11.2706m0-1.6574c-6.5469 0-11.8921 5.801-11.8921 12.928s5.3452 12.928 11.892 12.928c6.547 0 11.8922-5.801 11.8922-12.928s-5.3038-12.928-11.8921-12.928z"}),reactExports.createElement("ellipse",{cx:232.2987,cy:73.7582,rx:5.3452,ry:5.8839}),reactExports.createElement("path",{fill:"#FFF",d:"M256.2486 85.8574c-6.091 0-11.0634-5.428-11.0634-12.0993s4.9723-12.0992 11.0634-12.0992c6.091 0 11.0634 5.428 11.0634 12.0992s-4.9723 12.0993-11.0634 12.0993z",className:"st0"}),reactExports.createElement("path",{d:"M256.2486 62.529c5.6353 0 10.2347 5.0552 10.2347 11.2706S261.8839 85.07 256.2486 85.07s-10.2346-5.055-10.2346-11.2704 4.558-11.2706 10.2347-11.2706m0-1.6574c-6.5469 0-11.892 5.801-11.892 12.928s5.3451 12.928 11.892 12.928 11.8921-5.801 11.8921-12.928-5.3452-12.928-11.892-12.928z"}),reactExports.createElement("ellipse",{cx:256.2486,cy:73.7582,rx:5.3452,ry:5.8839}),reactExports.createElement("ellipse",{cx:302.7397,cy:32.6538,fill:"#FFF",className:"st0",rx:9.406,ry:8.9087}),reactExports.createElement("path",{d:"M302.7397 24.5738c4.7237 0 8.5772 3.6049 8.5772 8.08s-3.8121 8.08-8.5772 8.08-8.5773-3.605-8.5773-8.08 3.8536-8.08 8.5773-8.08m0-1.6575c-5.6353 0-10.2347 4.3508-10.2347 9.7374s4.5994 9.7375 10.2347 9.7375 10.2346-4.3508 10.2346-9.7374-4.5994-9.7375-10.2346-9.7375z"}),reactExports.createElement("ellipse",{cx:302.7397,cy:32.6538,rx:4.4751,ry:4.2265}),reactExports.createElement("ellipse",{cx:322.7532,cy:32.6538,fill:"#FFF",className:"st0",rx:9.406,ry:8.9087}),reactExports.createElement("path",{d:"M322.7532 24.5738c4.7237 0 8.5772 3.6049 8.5772 8.08s-3.812 8.08-8.5772 8.08-8.5772-3.605-8.5772-8.08 3.8535-8.08 8.5772-8.08m0-1.6575c-5.6353 0-10.2347 4.3508-10.2347 9.7374s4.5994 9.7375 10.2347 9.7375 10.2347-4.3508 10.2347-9.7374-4.5994-9.7375-10.2347-9.7375z"}),reactExports.createElement("ellipse",{cx:322.7532,cy:32.6538,rx:4.4751,ry:4.2265}))),SvgHanneMaes01=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 80.43442 33.86671",...Xe},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M-87.89572 152.05557q.55291-.5529 2.24847-1.25324 1.69557-.73721 4.16519-1.51127 2.50649-.77406 5.56588-1.54812 3.09624-.81093 6.37679-1.43755 3.28055-.66348 6.5611-1.1058 3.3174-.47918 6.22935-.62662 2.94881-.14744 5.30786.0737 2.3959.22116 3.83345.9215.70034.33174.81092 1.40069.11058 1.06894-.25802 2.24846-.3686 1.14266-1.17952 2.13789-.77406.99522-1.80615 1.17952-.7372.14744-1.87986 0-1.1058-.1843-2.94881-.3686-1.843-.1843-4.60751-.22116-2.72765-.0737-6.67168.29488 1.14266.9215 1.54812 1.76928.1843.44233.11058 1.95359-.03686 1.4744-.29488 3.50171-.22116 1.99044-.5529 4.20205-.33174 2.17475-.70034 4.09147-.33174 1.87987-.66348 3.13311-.29488 1.2901-.44232 1.40068-.22117.1843-.77407.22116-.51604.0737-1.17952-.0369-.62662-.11058-1.25324-.44232-.58976-.33174-.9215-.9215-.1843-.29488-.33175-1.40068-.14744-1.06895-.25802-2.61707-.11058-1.58498-.1843-3.46485-.07372-1.87986-.07372-3.79659t.03686-3.68601q.03686-1.80614.14744-3.16997-2.87509.40546-6.30308 1.1058-3.39112.66349-7.44573 1.62185-.62662.14744-1.21638-.22116-.58976-.3686-.99523-.95836-.3686-.62663-.44232-1.29011-.0369-.70034.44232-1.17952zm48.39732 6.96656q.25802-.14744.70034-.11058.47918.0369.9215.29488.47918.22116.81093.62662.33174.40546.33174.95836 0 .92151-.88465 2.28533-.84778 1.36382-2.35904 2.65393-1.4744 1.25324-3.53857 2.17474-2.06417.88464-4.42321.88464-1.54813 0-3.02253-.44232-1.4744-.44232-2.61707-1.2901-1.1058-.84778-1.80614-2.06417-.66349-1.25324-.66349-2.87508 0-1.54813.5529-2.72765.5529-1.21638 1.43755-2.02731.9215-.84778 2.06417-1.32696 1.14266-.47918 2.35904-.58976 1.14267-.11058 2.2116.11058 1.10581.22116 1.99045.70034.88465.44232 1.51127 1.14266.62662.70035.81092 1.58499.25802 1.21638-.25802 2.24846-.47918 1.03209-1.51127 1.62185-.99522.58976-2.3959.58976-1.40069 0-2.91195-.88464.47918.81092 1.43754 1.25324.95837.44232 2.10103.44232 1.17952 0 2.3959-.47918 1.25325-.47918 2.3222-1.51126.44231-.44232.77405-.92151.33175-.47918.58977-.9215.29488-.47918.5529-.84778.25802-.3686.51604-.5529zm-9.17817.0369q-.33174-.3686-.77406-.33174-.40546.0369-.70034.33174-.25802.25802-.29488.66348 0 .40546.40546.77406.40546.33174.77406.29488.40546-.0369.62662-.29488.25803-.25802.25803-.66348.03686-.40546-.29489-.77406zm10.2471-3.42803q.29489-.14744.81093-.14744.5529 0 1.1058.14744.5529.11058.99522.33174.47918.22116.62662.51604.14745.29488 0 .84778-.11057.5529-.25802 1.25325-.14744.70034-.25802 1.4744-.07372.7372.14744 1.43754.14744.58977.5529.95837.44233.33174.95837.47918.51604.11058 1.06894 0 .58976-.11058 1.06894-.47918.47918-.3686.77407-.88465.29488-.5529.47918-1.03208.1843-.51604.3686-.9215.1843-.40546.44232-.58976.25802-.14744.70034-.0737.44232.0369.88464.29488.44233.22116.77407.62662.3686.40546.40546.9215.07372.51604-.33174 1.54813-.3686 1.03208-1.14267 2.17474-.77406 1.14267-1.91672 2.21161-1.14267 1.03208-2.5802 1.62184-1.51127.58976-2.8751.40546-1.36382-.1843-2.43276-.9215-1.06895-.7372-1.73243-1.91672-.66348-1.21639-.77406-2.65393-.11058-1.43754.11058-2.72765.22116-1.32696.5529-2.35904.3686-1.03209.77406-1.69557.40546-.66348.70034-.84778zm6.30308-4.64437q0 1.4744-1.03208 2.50648-1.03208 1.03209-2.50649 1.03209-1.4744 0-2.50648-1.03209-1.03209-1.03208-1.03209-2.50648 0-1.47441 1.03209-2.50649 1.03208-1.03208 2.50648-1.03208 1.4744 0 2.50649 1.03208 1.03208 1.03208 1.03208 2.50649zm7.9249 4.46007q2.61706-.11058 4.0546 1.54812.40546-.66348.81093-.9215.33174-.14744.84778-.14744.5529 0 1.1058.14744.5529.11058.99522.33174.44232.22116.58976.51604.14745.29488 0 .77406-.11058.47919-.25802 1.10581-.14744.58976-.25802 1.2901-.07372.70034.14744 1.40068.14744.58977.51605.95837.40546.33174.88464.47918.47918.11058.99522 0 .5529-.11058 1.03208-.47918.47918-.3686.77407-.88465.29488-.5529.47918-1.03208.1843-.51604.3686-.9215.1843-.40546.44232-.58976.25802-.14744.70034-.0737.44232.0369.88464.29488.44232.22116.77406.62662.33174.40546.40547.9215.03686.51604-.3686 1.54813-.40547 1.03208-1.21639 2.17474-.81092 1.14267-1.99044 2.21161-1.17953 1.03208-2.61707 1.62184-2.10103.84779-3.7966.22116-1.69556-.66348-2.61706-2.17474-.84778 1.03208-1.91672 1.62184-1.06895.58976-2.17475.66348-1.21638.11058-2.32219-.25802-1.1058-.3686-1.95358-1.14266-.81092-.77406-1.2901-1.95359-.47919-1.17952-.44233-2.72764 0-1.54813.5529-2.83823.5529-1.2901 1.43755-2.21161.9215-.95836 2.06417-1.4744 1.14266-.5529 2.35904-.62662zm2.72764 6.04505q.07372-.66348-.07372-1.1058-.11058-.47918-.3686-.77406-.25802-.29488-.58976-.44232-.29489-.14744-.62663-.1843-.47918-.0369-.88464.14744-.3686.1843-.62662.5529-.25802.33174-.40546.77406-.14744.44232-.11058.88464.07372.88465.5529 1.54813.47918.66348 1.2901.58976.81093-.0737 1.2901-.58976.47919-.5529.5529-1.40069z",transform:"translate(88.34068 -144.51399)"}),reactExports.createElement("path",{d:"M-51.86699 177.02183q2.28283.0725 5.45827.26163 3.17367.22592 6.43057.41893 3.3366.23374 6.43058.41894 3.17543.18909 5.3768.25773 2.20313.0318 3.12926-.55116.92614-.58295.80026-1.36393-.1241-.8178-1.22934-1.60883-1.02378-.78712-2.88516-1.13466-1.21317-.24266-3.411-.38491-2.11638-.13832-4.72684-.18968-2.52723-.0843-5.3024-.10655-2.69369-.0184-5.14651.0485-2.3696.034-4.25039.0915-1.79932.0614-2.62105.16958-1.14936.12942-1.82933.68727-.5985.56175-.5488 1.22838.13293.63371 1.16906 1.1631 1.03612.5294 3.15602.59411z",transform:"translate(88.34068 -144.51399)"})));var fnv1a={exports:{}};(function(Xe,Ke){Object.defineProperty(Ke,"__esModule",{value:!0}),Ye.BASE=2166136261;function Ye(Je,tt=Ye.BASE){const st=Je.length;for(let rt=0;rt<st;rt++)tt^=Je.charCodeAt(rt),tt+=(tt<<1)+(tt<<4)+(tt<<7)+(tt<<8)+(tt<<24);return tt>>>0}Ke.default=Ye,Xe.exports=Ye})(fnv1a,fnv1a.exports);var fnv1aExports=fnv1a.exports;const hash$1=getDefaultExportFromCjs(fnv1aExports),IconCache=React.createContext({}),useIconCache=()=>React.useContext(IconCache),withIcon=(Xe,Ke)=>{const Ye=Je=>{const{size:tt=30,viewBox:st=Ke}=Je,rt=useIconCache(),it=rt[Xe];let ot;return it||(ot="icon-"+hash$1(Xe).toString(16),rt[Xe]=ot),jsxRuntimeExports.jsx("svg",{viewBox:`0 0 ${st||tt} ${st||tt}`,width:tt,height:tt,fill:"none",dangerouslySetInnerHTML:{__html:it?`<use href="#${it}" />`:`<g id="${ot}">${Xe}</g>`}})};return reactExports.memo(Ye)},IndexerStatus=`
<circle cx="15" cy="15" r="10" fill="#E81224" stroke="none" />
`;withIcon(IndexerStatus);const BurnIcon=withIcon(`<svg>
  <path d="M9.66 2.67c-.13.6-.26 1.2-.15 1.76.08.39.29.78.84 1.1l.16-.38.24-.64.63.34.25.16a7.07 7.07 0 0 1 2.14 2.12c1 1.55 1.53 3.83-.12 6.79a.62.62 0 0 1-.8.24.54.54 0 0 1-.26-.75c1.45-2.6.95-4.48.15-5.7-.4-.64-.9-1.12-1.3-1.44l-.1-.08a3.2 3.2 0 0 1-.07.13c-.06.1-.17.26-.33.38l-.27.2-.32-.13C9.08 6.28 8.5 5.5 8.33 4.63a3.83 3.83 0 0 1-.02-1.26 3.79 3.79 0 0 0-2.3 2.15 5.48 5.48 0 0 0 .14 3.8l.45 1.27-1.3-.6a4.84 4.84 0 0 1-1.6-1.43 8.76 8.76 0 0 1-.4-.54 3.2 3.2 0 0 0-.73 2.77c.2 1.09.86 2.04 1.32 2.5.22.22.2.57-.04.78-.24.2-.62.2-.85-.03a6.26 6.26 0 0 1-1.61-3.06 4.37 4.37 0 0 1 1.65-4.32l.67-.57.3.8c.03.09.24.46.56.89-.1-.9-.01-1.8.32-2.64.57-1.46 1.86-2.62 4.04-3.12l.93-.22-.2.87Z"/>
</svg>`,16),GenerativeIcon=withIcon(`
  <circle cx="15" cy="15" r="14.25" fill="var(--text-color)" stroke="var(--background-color)"/>
  <path fill="var(--background-color)" d="m10.6 13.34-3.3 1.7v.06l3.3 1.7v.92h-.15l-4.24-2.3v-.7l4.24-2.3h.14v.92Zm6.18-3.98h1l-4.15 11.51h-1l4.15-11.5Zm2.85 3.06 4.24 2.3v.7l-4.24 2.3h-.14v-.92l3.3-1.7v-.06l-3.3-1.7v-.92h.14Z"/>
  <path fill="var(--background-color)" d="m10.6 13.34.18.35.21-.11v-.24h-.4Zm-3.3 1.7-.2-.36-.2.12v.24h.4Zm0 .06h-.4v.24l.2.12.2-.36Zm3.3 1.7h.4v-.24l-.22-.11-.19.35Zm0 .92v.4h.4v-.4h-.4Zm-.15 0-.2.35.1.05h.1v-.4Zm-4.24-2.3h-.4v.24l.21.12.2-.36Zm0-.7-.19-.36-.2.12v.24h.4Zm4.24-2.3v-.4h-.1l-.1.05.2.35Zm.14 0h.4v-.4h-.4v.4Zm-.18.56-3.3 1.7.37.72 3.3-1.7-.37-.72Zm-3.52 2.06v.06h.8v-.06h-.8Zm.22.42 3.3 1.7.37-.71-3.3-1.7-.37.7Zm3.08 1.34v.92h.8v-.92h-.8Zm.4.52h-.14v.8h.14v-.8Zm.05.04L6.4 15.07l-.38.7 4.24 2.3.38-.7ZM6.6 15.42v-.7h-.8v.7h.8Zm-.2-.35 4.23-2.3-.38-.7-4.24 2.3.38.7Zm4.04-2.25h.14v-.8h-.14v.8Zm-.26-.4v.92h.8v-.92h-.8Zm6.59-3.06v-.4h-.28l-.1.27.38.13Zm1 0 .38.14.2-.54h-.58v.4Zm-4.15 11.51v.4h.28l.1-.26-.38-.14Zm-1 0-.38-.13-.2.53h.57v-.4Zm4.15-11.1h1v-.8h-1v.8Zm.63-.54-4.15 11.5.75.28L18.16 9.5l-.75-.27Zm-3.78 11.24h-1v.8h1v-.8Zm-.63.54L17.15 9.5l-.75-.27-4.15 11.5.75.28Zm6.63-8.59.19-.35-.09-.05h-.1v.4Zm4.24 2.3h.4v-.24l-.21-.12-.2.36Zm0 .7.19.36.2-.12v-.24h-.4Zm-4.24 2.3v.4h.1l.09-.05-.19-.35Zm-.14 0h-.4v.4h.4v-.4Zm0-.92-.19-.35-.21.11v.24h.4Zm3.3-1.7.2.36.2-.12v-.24h-.4Zm0-.06h.4v-.24l-.2-.12-.2.36Zm-3.3-1.7h-.4v.24l.21.11.19-.35Zm0-.92v-.4h-.4v.4h.4Zm-.05.36 4.24 2.29.38-.7-4.24-2.3-.38.7Zm4.03 1.94v.7h.8v-.7h-.8Zm.2.35-4.23 2.3.38.7 4.24-2.3-.38-.7Zm-4.04 2.25h-.14v.8h.14v-.8Zm.26.4v-.92h-.8v.92h.8Zm-.22-.56 3.31-1.7-.36-.72-3.32 1.7.37.72Zm3.53-2.06v-.06h-.8v.06h.8Zm-.22-.42-3.31-1.7-.37.71 3.32 1.7.36-.7Zm-3.1-1.34v-.92h-.8v.92h.8Zm-.4-.52h.15v-.8h-.14v.8Z"/>
`),SwapIcon=withIcon(`
<path d="M1.97 1.97a.56.56 0 0 1 .44-.16l5.5.36c.14 0 .27.06.37.16l5.63 5.63c.4.4.4 1.06 0 1.46l-4.49 4.5c-.4.4-1.05.4-1.46 0L2.33 8.27a.56.56 0 0 1-.16-.36L1.8 2.4a.56.56 0 0 1 .16-.44Zm1.3 5.66 5.42 5.42 4.36-4.36-5.41-5.42-4.67-.3.3 4.66Z"/>
`,16),TezosIcon=withIcon(`<path 
      fill="var(--text-color)" 
      d="M9.23 11.96a4.18 4.18 0 0 0 1.12-.16v.9a3.75 3.75 0 0 1-1.36.23c-.63 0-1.12-.16-1.47-.49-.34-.34-.51-.91-.51-1.72V6.57H6v-.56l1.06-.44L7.48 4h.69v1.64h7.57v.8l-3.15 3.35c1.21.06 2.09.36 2.62.89.53.52.79 1.23.79 2.12a3.3 3.3 0 0 1-.41 1.67c-.27.49-.67.86-1.2 1.13-.51.28-1.14.4-1.87.4-.95 0-1.78-.16-2.5-.47v-1.08a5.53 5.53 0 0 0 2.43.56c.8 0 1.39-.21 1.78-.64.39-.42.58-.96.58-1.61 0-.65-.22-1.15-.65-1.5-.43-.37-1.15-.55-2.14-.55h-.8v-.88l3.05-3.26h-6.1v4.1c0 .86.35 1.29 1.06 1.29Z" 
      />`,16),MintedIcon=withIcon(`
<path d="M7 2.63a1.07 1.07 0 0 1 2.03 0l1.01 3.12h3.28c1.03 0 1.46 1.32.63 1.93l-2.66 1.93 1.02 3.11c.32.99-.81 1.8-1.65 1.2l-2.65-1.93-2.65 1.93c-.84.6-1.96-.21-1.65-1.2l1.02-3.11-2.65-1.93c-.84-.6-.41-1.93.62-1.93h3.28L7 2.63Zm1.01.4-1 3.07c-.14.44-.55.74-1.01.74H2.77l2.61 1.9c.38.27.53.75.39 1.19l-1 3.07 2.61-1.9c.38-.27.88-.27 1.26 0l2.6 1.9-.99-3.07a1.1 1.1 0 0 1 .39-1.2l2.6-1.89h-3.22c-.46 0-.87-.3-1.01-.74L8 3.03Z"/>
`,16),TradeIcon=withIcon(`
<path d="M2.95 8.39v2.5c0 .34-.25.61-.56.61-.3 0-.56-.27-.56-.6V6.94c0-.34.25-.6.56-.6h3.67c.3 0 .56.26.56.6 0 .33-.25.6-.56.6H3.75l5.33 5.75c.22.24.22.62 0 .86a.53.53 0 0 1-.8 0L2.96 8.39Zm9.55 1.26-.02-.03-6.02-6.5a.64.64 0 0 1 0-.85.53.53 0 0 1 .79 0l6 6.48V6.29c0-.33.25-.6.56-.6.31 0 .56.27.56.6v3.96c0 .33-.25.6-.56.6h-3.67c-.3 0-.56-.27-.56-.6 0-.33.25-.6.56-.6h2.36Z"/>
`,16),VideoIcon=withIcon(`<g transform="translate(-240.658 -193.721)"><circle cx="252.673" cy="205.713" r="8.119" fill="var(--text-color)"/><path fill="var(--background-color)" d="M252.658 195.721c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10Zm0 18c-4.41 0-8-3.59-8-8a8 8 0 0 1 3.558-6.65 7.954 7.954 0 0 1 4.442-1.35c4.41 0 8 3.59 8 8s-3.59 8-8 8Zm-2-3.5 6-4.5-6-4.5v9Z" paint-order="fill"/></g> 
`,24),SvgConfig=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",...Xe},reactExports.createElement("path",{fill:"current",fillRule:"evenodd",d:"M9.6 4a.6.6 0 0 0-1.2 0v.4H1a.6.6 0 0 0 0 1.2h7.4V6a.6.6 0 0 0 1.2 0V4Zm4 0v.4H15a.6.6 0 1 1 0 1.2h-1.4V6a.6.6 0 0 1-1.2 0v-.94a.6.6 0 0 1 0-.12V4a.6.6 0 1 1 1.2 0Zm-4 5.4V9a.6.6 0 0 0-1.2 0v.94a.6.6 0 0 0 0 .12V11a.6.6 0 1 0 1.2 0v-.4H15a.6.6 0 1 0 0-1.2H9.6ZM1 9.4a.6.6 0 0 0 0 1.2h3.4v.4a.6.6 0 1 0 1.2 0V9a.6.6 0 0 0-1.2 0v.4H1Z",clipRule:"evenodd"})),SvgChevron=Xe=>reactExports.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...Xe},reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.42583 11.4258C8.19151 11.6601 7.81161 11.6601 7.5773 11.4258L2.5773 6.42583C2.34298 6.19151 2.34298 5.81161 2.5773 5.5773C2.81161 5.34298 3.19151 5.34298 3.42583 5.5773L8.00156 10.153L12.5773 5.5773C12.8116 5.34298 13.1915 5.34298 13.4258 5.5773C13.6601 5.81161 13.6601 6.19151 13.4258 6.42583L8.42583 11.4258Z",fill:"current"})),SvgEvents=Xe=>reactExports.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...Xe},reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.39844 2.99844C1.39844 2.11478 2.11478 1.39844 2.99844 1.39844H12.9984C13.8821 1.39844 14.5984 2.11478 14.5984 2.99844V5.99844C14.5984 6.88209 13.8821 7.59844 12.9984 7.59844H2.99844C2.11478 7.59844 1.39844 6.88209 1.39844 5.99844V2.99844ZM2.99844 2.59844C2.77752 2.59844 2.59844 2.77752 2.59844 2.99844V5.99844C2.59844 6.21935 2.77752 6.39844 2.99844 6.39844H12.9984C13.2194 6.39844 13.3984 6.21935 13.3984 5.99844V2.99844C13.3984 2.77752 13.2194 2.59844 12.9984 2.59844H2.99844ZM1.39844 9.99844C1.39844 9.66707 1.66707 9.39844 1.99844 9.39844L13.9984 9.39844C14.3298 9.39844 14.5984 9.66707 14.5984 9.99844C14.5984 10.3298 14.3298 10.5984 13.9984 10.5984L1.99844 10.5984C1.66707 10.5984 1.39844 10.3298 1.39844 9.99844ZM1.99844 12.3984C1.66707 12.3984 1.39844 12.6671 1.39844 12.9984C1.39844 13.3298 1.66707 13.5984 1.99844 13.5984L13.9984 13.5984C14.3298 13.5984 14.5984 13.3298 14.5984 12.9984C14.5984 12.6671 14.3298 12.3984 13.9984 12.3984L1.99844 12.3984Z",fill:"current"})),SvgMasonry=Xe=>reactExports.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...Xe},reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.99844 0.398438C1.11478 0.398438 0.398438 1.11478 0.398438 1.99844V6.99844C0.398438 7.88209 1.11478 8.59844 1.99844 8.59844H7.99844C8.88209 8.59844 9.59844 7.88209 9.59844 6.99844V1.99844C9.59844 1.11478 8.88209 0.398438 7.99844 0.398438H1.99844ZM1.59844 1.99844C1.59844 1.77752 1.77752 1.59844 1.99844 1.59844H7.99844C8.21935 1.59844 8.39844 1.77752 8.39844 1.99844V6.99844C8.39844 7.21935 8.21935 7.39844 7.99844 7.39844H1.99844C1.77752 7.39844 1.59844 7.21935 1.59844 6.99844V1.99844ZM12.9984 0.398438C12.1148 0.398438 11.3984 1.11478 11.3984 1.99844V6.99844C11.3984 7.88209 12.1148 8.59844 12.9984 8.59844H13.9984C14.8821 8.59844 15.5984 7.88209 15.5984 6.99844V1.99844C15.5984 1.11478 14.8821 0.398438 13.9984 0.398438H12.9984ZM12.5984 1.99844C12.5984 1.77752 12.7775 1.59844 12.9984 1.59844H13.9984C14.2194 1.59844 14.3984 1.77752 14.3984 1.99844V6.99844C14.3984 7.21935 14.2194 7.39844 13.9984 7.39844H12.9984C12.7775 7.39844 12.5984 7.21935 12.5984 6.99844V1.99844ZM0.398438 11.9984C0.398438 11.1148 1.11478 10.3984 1.99844 10.3984H3.99844C4.88209 10.3984 5.59844 11.1148 5.59844 11.9984V13.9984C5.59844 14.8821 4.88209 15.5984 3.99844 15.5984H1.99844C1.11478 15.5984 0.398438 14.8821 0.398438 13.9984V11.9984ZM1.99844 11.5984C1.77752 11.5984 1.59844 11.7775 1.59844 11.9984V13.9984C1.59844 14.2194 1.77752 14.3984 1.99844 14.3984H3.99844C4.21935 14.3984 4.39844 14.2194 4.39844 13.9984V11.9984C4.39844 11.7775 4.21935 11.5984 3.99844 11.5984H1.99844ZM8.99844 10.3984C8.11478 10.3984 7.39844 11.1148 7.39844 11.9984V13.9984C7.39844 14.8821 8.11478 15.5984 8.99844 15.5984H13.9984C14.8821 15.5984 15.5984 14.8821 15.5984 13.9984V11.9984C15.5984 11.1148 14.8821 10.3984 13.9984 10.3984H8.99844ZM8.59844 11.9984C8.59844 11.7775 8.77752 11.5984 8.99844 11.5984H13.9984C14.2194 11.5984 14.3984 11.7775 14.3984 11.9984V13.9984C14.3984 14.2194 14.2194 14.3984 13.9984 14.3984H8.99844C8.77752 14.3984 8.59844 14.2194 8.59844 13.9984V11.9984Z",fill:"current"})),SvgSingleView=Xe=>reactExports.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...Xe},reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.398438 1.99844C0.398438 1.11478 1.11478 0.398438 1.99844 0.398438H13.9984C14.8821 0.398438 15.5984 1.11478 15.5984 1.99844V13.9984C15.5984 14.8821 14.8821 15.5984 13.9984 15.5984H1.99844C1.11478 15.5984 0.398438 14.8821 0.398438 13.9984V1.99844ZM1.99844 1.59844C1.77752 1.59844 1.59844 1.77752 1.59844 1.99844V13.9984C1.59844 14.2194 1.77752 14.3984 1.99844 14.3984H13.9984C14.2194 14.3984 14.3984 14.2194 14.3984 13.9984V1.99844C14.3984 1.77752 14.2194 1.59844 13.9984 1.59844H1.99844Z",fill:"current"})),SvgPlay=Xe=>reactExports.createElement("svg",{viewBox:"0 0 24 24",...Xe},reactExports.createElement("path",{fill:"current",d:"M3.9 18.9V5.1c0-1.6 1.7-2.6 3-1.8l12 6.9c1.4.8 1.4 2.9 0 3.7l-12 6.9c-1.3.7-3-.3-3-1.9z"})),SvgPause=Xe=>reactExports.createElement("svg",{viewBox:"0 0 32 32",...Xe},reactExports.createElement("path",{fill:"current",d:"M20 4h8v24h-8zM4 4h8v24H4z"})),SvgClose=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 145.2 145.2",...Xe},reactExports.createElement("path",{fill:"current",d:"M145.2 15.7 129.8.3l-57.1 57-57-57L.3 15.7l57 57-57 57.1 15.4 15.4 57-57 57.1 57 15.4-15.4-57-57.1z"})),SvgFullscreenEnter=Xe=>reactExports.createElement("svg",{viewBox:"0 0 14 14",...Xe},reactExports.createElement("path",{fill:"current",d:"M0 11h3v3h2V9H0v2Zm3-8H0v2h5V0H3v3Zm6 11h2v-3h3V9H9v5Zm2-11V0H9v5h5V3h-3Z"})),SvgFullscreenExit=Xe=>reactExports.createElement("svg",{viewBox:"0 0 14 14",...Xe},reactExports.createElement("path",{fill:"current",d:"M2 9H0v5h5v-2H2V9ZM0 5h2V2h3V0H0v5Zm12 7H9v2h5V9h-2v3ZM9 0v2h3v3h2V0H9Z"})),SvgEnterAnav=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:64,...Xe},reactExports.createElement("path",{d:"M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480h80q0 115 72.5 203T418-166l-58-58 56-56L598-98q-29 10-58.5 14T480-80Zm20-280v-240h120q17 0 28.5 11.5T660-560v160q0 17-11.5 28.5T620-360H500Zm-200 0v-60h100v-40h-60v-40h60v-40H300v-60h120q17 0 28.5 11.5T460-560v160q0 17-11.5 28.5T420-360H300Zm260-60h40v-120h-40v120Zm240-60q0-115-72.5-203T542-794l58 58-56 56-182-182q29-10 58.5-14t59.5-4q83 0 156 31.5T763-763q54 54 85.5 127T880-480h-80Z"})),SvgTeiaDao=Xe=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:280,height:128,...Xe},reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"null",d:"M72.825 8.864H15.5V61.29h57.325v57.847h53.47l-.001-57.847H264.5V8.864H126.294V61.29H72.825V8.864zm113.268 20.73v13.56h2.862v-13.56h3.62v-2.386h-10.102v2.386h3.62zm13.626-2.386v15.946h9.408v-2.386h-6.547V36.06h5.116v-2.387h-5.116v-4.079h6.547v-2.386h-9.408zm17.073 15.946v-2.386h2.927V29.594h-2.927v-2.386h8.714v2.386h-2.926v11.174h2.926v2.386h-8.714zm16.054-1.518-.369 1.518h2.949l.715-3.254h3.641l.715 3.254h2.95l-3.838-15.946h-3.295l-1.28 5.315-2.188 9.113zm5.354-9.113 1.084 4.99h-2.645l1.084-4.99a7.677 7.677 0 0 0 .108-.564l.13-.564a7.677 7.677 0 0 1 .109.564l.13.564z",clipRule:"evenodd"})),RotatingLogoSVG=[SvgAcidmanhattan01,SvgAcidmanhattan02,SvgAfrizalRizki01,SvgAlterebro01,SvgAlterebro02,SvgAlterebro03,SvgAnnekatrinenderlein01,SvgBurkabayram01,SvgCarolyn01,SvgCryptemes01,SvgDjkero01,SvgImnot01,SvgSantiagoItzcoatl01,SvgSantiagoItzcoatl02,SvgKlausJoerres01,SvgSpencerLinkous03,SvgMaes02,SvgMumuthestan02,SvgMumuthestan03,SvgMumuthestan04,SvgNatived01,SvgNorulesjustfeels07,Svg111V1Ab01,Svg111V1Ab02,SvgOviy01,SvgOviy02,SvgPilhei01,SvgHermanPretorius01,SvgQizzio02,SvgRodicqart01,SvgKerimSafa01,Svg33301,SvgVarda01,SvgVarda02,SvgSimoneVirgini01,SvgChristianWaadt02,SvgChristianWaadt03,SvgWans01,SvgYazid01,SvgActiveprinciple01,SvgActiveprinciple02,SvgActiveprinciple03,SvgActiveprinciple04,SvgActiveprinciple05,SvgActiveprinciple06,SvgBentameleon01,SvgFakeart01,SvgHeracles01,SvgHoroMox01,SvgHoroMox03,SvgIcecreamgreezer01,SvgJeanSaucisse01,SvgJudoKazate01,SvgJulioGlatt01,SvgJulioGlatt02,SvgJulioGlatt03,SvgJulioGlatt04,SvgJulioGlatt05,SvgJulioGlatt06,SvgLukaPiskore01,SvgLululi02,SvgMaes01,SvgMaliciousSheep01,SvgMarkKnol01,SvgMarquesa01,SvgMarquesa02,SvgMerchantCoppola01,SvgMerchantCoppola02,SvgMightymoss01,SvgMiusoph01,SvgMiusoph02,SvgQizzio01,SvgRkhairunnas01,SvgSantiagoItzcoatl03,SvgSantiagoItzcoatl04,SvgSomfay03,SvgSpencerLinkous01,SvgSpencerLinkous02,SvgSpencerLinkous04,SvgSpencerLinkous05,SvgTamasAntal01,SvgThequrator01,SvgTofudog01,SvgTofudog02,SvgTxchiDu01,SvgViscous01,SvgWans02,SvgZootghost01,SvgHanneMaes01],RotatingLogo=({className:Xe,seed:Ke=1})=>{const Ye=reactExports.useMemo(()=>RotatingLogoSVG[Math.floor(randomSeed(Ke)*RotatingLogoSVG.length)],[Ke]);return jsxRuntimeExports.jsx("div",{className:styles$_.container,children:jsxRuntimeExports.jsx(Ye,{fill:"var(--text-color)",width:"132px"})})},RotatingLogo$1=reactExports.memo(RotatingLogo),horizontal="_horizontal_qh7uj_1",vertical$1="_vertical_qh7uj_7",styles$Z={horizontal,vertical:vertical$1},Line=({vertical:Xe,className:Ke,style:Ye})=>{const Je=classNames$1({[styles$Z.vertical]:Xe,[styles$Z.horizontal]:!Xe});return jsxRuntimeExports.jsx("hr",{style:Ye,className:`${Ke||""} ${Je} `})};function shallow(Xe,Ke){if(Object.is(Xe,Ke))return!0;if(typeof Xe!="object"||Xe===null||typeof Ke!="object"||Ke===null)return!1;if(Xe instanceof Map&&Ke instanceof Map){if(Xe.size!==Ke.size)return!1;for(const[Je,tt]of Xe)if(!Object.is(tt,Ke.get(Je)))return!1;return!0}if(Xe instanceof Set&&Ke instanceof Set){if(Xe.size!==Ke.size)return!1;for(const Je of Xe)if(!Ke.has(Je))return!1;return!0}const Ye=Object.keys(Xe);if(Ye.length!==Object.keys(Ke).length)return!1;for(let Je=0;Je<Ye.length;Je++)if(!Object.prototype.hasOwnProperty.call(Ke,Ye[Je])||!Object.is(Xe[Ye[Je]],Ke[Ye[Je]]))return!1;return!0}const Footer=({menu:Xe,pin:Ke})=>{const{language:Ye}=useLanguage();useUserStore(pt=>pt.address);const[Je,tt]=reactExports.useState(3),[st,rt]=useLocalSettings(pt=>[pt.zen,pt.setZen],shallow),[it,ot]=useLocalSettings(pt=>[pt.theme,pt.toggleTheme],shallow),{logos:at}=useSettings(),lt=()=>({initial:{opacity:0,y:100,transition:{duration:.2,ease:"easeOut"}},animate:{opacity:1,y:0,transition:{duration:.2,ease:"easeOut"}},exit:{opacity:0,y:100,transition:{duration:.2,ease:"easeInOut"}}}),ut=classNames$1({[styles$11.container]:!0,[styles$11.pinned]:Ke}),ht=classNames$1({[styles$11.content]:!0,[styles$11.minimal]:!Xe});return jsxRuntimeExports.jsxs(motion.div,{...lt(),className:ut,children:[jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsxs(motion.footer,{...lt(),className:ht,children:[jsxRuntimeExports.jsxs("div",{className:styles$11.logo,children:["Teia DAO LLC.",Xe&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{alt:"teia rotating logo",onClick:()=>tt(Math.random()*100),children:jsxRuntimeExports.jsx(RotatingLogo,{theme:it,logos:at,seed:Je})})}),jsxRuntimeExports.jsx("a",{href:"https://tzkt.io/",children:"Powered by TzKT API"})]}),jsxRuntimeExports.jsxs("div",{className:styles$11.copyright,children:[jsxRuntimeExports.jsx("div",{children:Ye.footer.mint}),jsxRuntimeExports.jsxs("div",{className:styles$11.menuitems,children:[jsxRuntimeExports.jsx(MenuItem,{className:styles$11.menu_label_row,route:"about"}),jsxRuntimeExports.jsx(MenuItem,{className:styles$11.menu_label_row,label:"F.A.Q",route:"faq"}),jsxRuntimeExports.jsx(MenuItem,{className:styles$11.menu_label_row,label:"Core Values",route:"corevalues"}),jsxRuntimeExports.jsx(MenuItem,{className:styles$11.menu_label_row,label:"Code of Conduct",route:"codeofconduct"}),jsxRuntimeExports.jsx(MenuItem,{className:styles$11.menu_label_row,label:"Terms and Conditions",route:"terms"}),jsxRuntimeExports.jsx(MenuItem,{className:styles$11.menu_label_row,label:"Privacy Policy",route:"privacypolicy"})]})]}),Xe&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$11.menus,children:jsxRuntimeExports.jsx(Line,{vertical:!0})}),!1]}),!1]})]})},Page=({title:Xe,children:Ke,feed:Ye,className:Je})=>{const tt=classNames$1({[styles$12.container]:!0,[styles$12.feed]:Ye});return useTitle(Xe),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FeedbackComponent,{}),jsxRuntimeExports.jsx(motion.main,{initial:"hidden",animate:"visible",exit:"exit",variants:containerVariants,className:`${tt} ${Je||""}`,children:jsxRuntimeExports.jsx(motion.div,{className:`${styles$12.content} no-fool`,children:Ke})}),jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsx(Footer,{menu:!0})})]})},container$t="_container_1doqe_216",large="_large_1doqe_224",xlarge="_xlarge_1doqe_229",styles$Y={container:container$t,large,xlarge},Container$2=({children:Xe=null,large:Ke=!1,xlarge:Ye=!1})=>{const Je=classNames$1({[styles$Y.container]:!0,[styles$Y.large]:Ke,[styles$Y.xlarge]:Ye});return jsxRuntimeExports.jsx("div",{className:Je,children:Xe})},Container$3=reactExports.memo(Container$2),status_to_string={404:"This page doesn't exist!",401:"You aren't authorized to see this",503:"Looks like our API is down",418:"🫖",default:"Something went wrong"};function RootErrorBoundary({title:Xe,msg:Ke}){const Ye=useRouteError();let Je="";return isRouteErrorResponse(Ye)&&(Je=lodashExports.get(status_to_string,Ye.status)),Je||(Je=status_to_string.default),jsxRuntimeExports.jsx(Page,{title:"Error",children:jsxRuntimeExports.jsxs("div",{className:styles$17.container,children:[jsxRuntimeExports.jsxs("div",{className:styles$17.msg_box,children:[jsxRuntimeExports.jsx("h1",{children:Xe||(Ye==null?void 0:Ye.cause)||Je}),jsxRuntimeExports.jsx("p",{children:(Ye==null?void 0:Ye.message)||Ke})]}),jsxRuntimeExports.jsx(Button,{href:"https://github.com/teia-community/teia-ui/issues",children:jsxRuntimeExports.jsx("strong",{children:"Report Issue"})}),jsxRuntimeExports.jsx(Button,{to:"/",children:"Go back home"})]})})}var dist={},browserPonyfill={exports:{}};(function(Xe,Ke){var Ye=typeof self<"u"?self:commonjsGlobal,Je=(function(){function st(){this.fetch=!1,this.DOMException=Ye.DOMException}return st.prototype=Ye,new st})();(function(st){(function(rt){var it={searchParams:"URLSearchParams"in st,iterable:"Symbol"in st&&"iterator"in Symbol,blob:"FileReader"in st&&"Blob"in st&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in st,arrayBuffer:"ArrayBuffer"in st};function ot(Dt){return Dt&&DataView.prototype.isPrototypeOf(Dt)}if(it.arrayBuffer)var at=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],lt=ArrayBuffer.isView||function(Dt){return Dt&&at.indexOf(Object.prototype.toString.call(Dt))>-1};function ut(Dt){if(typeof Dt!="string"&&(Dt=String(Dt)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(Dt))throw new TypeError("Invalid character in header field name");return Dt.toLowerCase()}function ht(Dt){return typeof Dt!="string"&&(Dt=String(Dt)),Dt}function pt(Dt){var Vt={next:function(){var Gt=Dt.shift();return{done:Gt===void 0,value:Gt}}};return it.iterable&&(Vt[Symbol.iterator]=function(){return Vt}),Vt}function ft(Dt){this.map={},Dt instanceof ft?Dt.forEach(function(Vt,Gt){this.append(Gt,Vt)},this):Array.isArray(Dt)?Dt.forEach(function(Vt){this.append(Vt[0],Vt[1])},this):Dt&&Object.getOwnPropertyNames(Dt).forEach(function(Vt){this.append(Vt,Dt[Vt])},this)}ft.prototype.append=function(Dt,Vt){Dt=ut(Dt),Vt=ht(Vt);var Gt=this.map[Dt];this.map[Dt]=Gt?Gt+", "+Vt:Vt},ft.prototype.delete=function(Dt){delete this.map[ut(Dt)]},ft.prototype.get=function(Dt){return Dt=ut(Dt),this.has(Dt)?this.map[Dt]:null},ft.prototype.has=function(Dt){return this.map.hasOwnProperty(ut(Dt))},ft.prototype.set=function(Dt,Vt){this.map[ut(Dt)]=ht(Vt)},ft.prototype.forEach=function(Dt,Vt){for(var Gt in this.map)this.map.hasOwnProperty(Gt)&&Dt.call(Vt,this.map[Gt],Gt,this)},ft.prototype.keys=function(){var Dt=[];return this.forEach(function(Vt,Gt){Dt.push(Gt)}),pt(Dt)},ft.prototype.values=function(){var Dt=[];return this.forEach(function(Vt){Dt.push(Vt)}),pt(Dt)},ft.prototype.entries=function(){var Dt=[];return this.forEach(function(Vt,Gt){Dt.push([Gt,Vt])}),pt(Dt)},it.iterable&&(ft.prototype[Symbol.iterator]=ft.prototype.entries);function xt(Dt){if(Dt.bodyUsed)return Promise.reject(new TypeError("Already read"));Dt.bodyUsed=!0}function vt(Dt){return new Promise(function(Vt,Gt){Dt.onload=function(){Vt(Dt.result)},Dt.onerror=function(){Gt(Dt.error)}})}function At(Dt){var Vt=new FileReader,Gt=vt(Vt);return Vt.readAsArrayBuffer(Dt),Gt}function Et(Dt){var Vt=new FileReader,Gt=vt(Vt);return Vt.readAsText(Dt),Gt}function wt(Dt){for(var Vt=new Uint8Array(Dt),Gt=new Array(Vt.length),Qt=0;Qt<Vt.length;Qt++)Gt[Qt]=String.fromCharCode(Vt[Qt]);return Gt.join("")}function _t(Dt){if(Dt.slice)return Dt.slice(0);var Vt=new Uint8Array(Dt.byteLength);return Vt.set(new Uint8Array(Dt)),Vt.buffer}function Ct(){return this.bodyUsed=!1,this._initBody=function(Dt){this._bodyInit=Dt,Dt?typeof Dt=="string"?this._bodyText=Dt:it.blob&&Blob.prototype.isPrototypeOf(Dt)?this._bodyBlob=Dt:it.formData&&FormData.prototype.isPrototypeOf(Dt)?this._bodyFormData=Dt:it.searchParams&&URLSearchParams.prototype.isPrototypeOf(Dt)?this._bodyText=Dt.toString():it.arrayBuffer&&it.blob&&ot(Dt)?(this._bodyArrayBuffer=_t(Dt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):it.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(Dt)||lt(Dt))?this._bodyArrayBuffer=_t(Dt):this._bodyText=Dt=Object.prototype.toString.call(Dt):this._bodyText="",this.headers.get("content-type")||(typeof Dt=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):it.searchParams&&URLSearchParams.prototype.isPrototypeOf(Dt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},it.blob&&(this.blob=function(){var Dt=xt(this);if(Dt)return Dt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?xt(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(At)}),this.text=function(){var Dt=xt(this);if(Dt)return Dt;if(this._bodyBlob)return Et(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(wt(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},it.formData&&(this.formData=function(){return this.text().then(Nt)}),this.json=function(){return this.text().then(JSON.parse)},this}var Tt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function St(Dt){var Vt=Dt.toUpperCase();return Tt.indexOf(Vt)>-1?Vt:Dt}function Rt(Dt,Vt){Vt=Vt||{};var Gt=Vt.body;if(Dt instanceof Rt){if(Dt.bodyUsed)throw new TypeError("Already read");this.url=Dt.url,this.credentials=Dt.credentials,Vt.headers||(this.headers=new ft(Dt.headers)),this.method=Dt.method,this.mode=Dt.mode,this.signal=Dt.signal,!Gt&&Dt._bodyInit!=null&&(Gt=Dt._bodyInit,Dt.bodyUsed=!0)}else this.url=String(Dt);if(this.credentials=Vt.credentials||this.credentials||"same-origin",(Vt.headers||!this.headers)&&(this.headers=new ft(Vt.headers)),this.method=St(Vt.method||this.method||"GET"),this.mode=Vt.mode||this.mode||null,this.signal=Vt.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Gt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Gt)}Rt.prototype.clone=function(){return new Rt(this,{body:this._bodyInit})};function Nt(Dt){var Vt=new FormData;return Dt.trim().split("&").forEach(function(Gt){if(Gt){var Qt=Gt.split("="),jt=Qt.shift().replace(/\+/g," "),Ht=Qt.join("=").replace(/\+/g," ");Vt.append(decodeURIComponent(jt),decodeURIComponent(Ht))}}),Vt}function Pt(Dt){var Vt=new ft,Gt=Dt.replace(/\r?\n[\t ]+/g," ");return Gt.split(/\r?\n/).forEach(function(Qt){var jt=Qt.split(":"),Ht=jt.shift().trim();if(Ht){var Yt=jt.join(":").trim();Vt.append(Ht,Yt)}}),Vt}Ct.call(Rt.prototype);function Bt(Dt,Vt){Vt||(Vt={}),this.type="default",this.status=Vt.status===void 0?200:Vt.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in Vt?Vt.statusText:"OK",this.headers=new ft(Vt.headers),this.url=Vt.url||"",this._initBody(Dt)}Ct.call(Bt.prototype),Bt.prototype.clone=function(){return new Bt(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new ft(this.headers),url:this.url})},Bt.error=function(){var Dt=new Bt(null,{status:0,statusText:""});return Dt.type="error",Dt};var Lt=[301,302,303,307,308];Bt.redirect=function(Dt,Vt){if(Lt.indexOf(Vt)===-1)throw new RangeError("Invalid status code");return new Bt(null,{status:Vt,headers:{location:Dt}})},rt.DOMException=st.DOMException;try{new rt.DOMException}catch{rt.DOMException=function(Vt,Gt){this.message=Vt,this.name=Gt;var Qt=Error(Vt);this.stack=Qt.stack},rt.DOMException.prototype=Object.create(Error.prototype),rt.DOMException.prototype.constructor=rt.DOMException}function zt(Dt,Vt){return new Promise(function(Gt,Qt){var jt=new Rt(Dt,Vt);if(jt.signal&&jt.signal.aborted)return Qt(new rt.DOMException("Aborted","AbortError"));var Ht=new XMLHttpRequest;function Yt(){Ht.abort()}Ht.onload=function(){var Jt={status:Ht.status,statusText:Ht.statusText,headers:Pt(Ht.getAllResponseHeaders()||"")};Jt.url="responseURL"in Ht?Ht.responseURL:Jt.headers.get("X-Request-URL");var Zt="response"in Ht?Ht.response:Ht.responseText;Gt(new Bt(Zt,Jt))},Ht.onerror=function(){Qt(new TypeError("Network request failed"))},Ht.ontimeout=function(){Qt(new TypeError("Network request failed"))},Ht.onabort=function(){Qt(new rt.DOMException("Aborted","AbortError"))},Ht.open(jt.method,jt.url,!0),jt.credentials==="include"?Ht.withCredentials=!0:jt.credentials==="omit"&&(Ht.withCredentials=!1),"responseType"in Ht&&it.blob&&(Ht.responseType="blob"),jt.headers.forEach(function(Jt,Zt){Ht.setRequestHeader(Zt,Jt)}),jt.signal&&(jt.signal.addEventListener("abort",Yt),Ht.onreadystatechange=function(){Ht.readyState===4&&jt.signal.removeEventListener("abort",Yt)}),Ht.send(typeof jt._bodyInit>"u"?null:jt._bodyInit)})}return zt.polyfill=!0,st.fetch||(st.fetch=zt,st.Headers=ft,st.Request=Rt,st.Response=Bt),rt.Headers=ft,rt.Request=Rt,rt.Response=Bt,rt.fetch=zt,Object.defineProperty(rt,"__esModule",{value:!0}),rt})({})})(Je),Je.fetch.ponyfill=!0,delete Je.fetch.polyfill;var tt=Je;Ke=tt.fetch,Ke.default=tt.fetch,Ke.fetch=tt.fetch,Ke.Headers=tt.Headers,Ke.Request=tt.Request,Ke.Response=tt.Response,Xe.exports=Ke})(browserPonyfill,browserPonyfill.exports);var browserPonyfillExports=browserPonyfill.exports;function isObjectLike$4(Xe){return typeof Xe=="object"&&Xe!==null}function invariant(Xe,Ke){if(!!!Xe)throw new Error("Unexpected invariant triggered.")}const LineRegExp=/\r\n|[\n\r]/g;function getLocation(Xe,Ke){let Ye=0,Je=1;for(const tt of Xe.body.matchAll(LineRegExp)){if(typeof tt.index=="number"||invariant(!1),tt.index>=Ke)break;Ye=tt.index+tt[0].length,Je+=1}return{line:Je,column:Ke+1-Ye}}function printLocation(Xe){return printSourceLocation(Xe.source,getLocation(Xe.source,Xe.start))}function printSourceLocation(Xe,Ke){const Ye=Xe.locationOffset.column-1,Je="".padStart(Ye)+Xe.body,tt=Ke.line-1,st=Xe.locationOffset.line-1,rt=Ke.line+st,it=Ke.line===1?Ye:0,ot=Ke.column+it,at=`${Xe.name}:${rt}:${ot}
`,lt=Je.split(/\r\n|[\n\r]/g),ut=lt[tt];if(ut.length>120){const ht=Math.floor(ot/80),pt=ot%80,ft=[];for(let xt=0;xt<ut.length;xt+=80)ft.push(ut.slice(xt,xt+80));return at+printPrefixedLines([[`${rt} |`,ft[0]],...ft.slice(1,ht+1).map(xt=>["|",xt]),["|","^".padStart(pt)],["|",ft[ht+1]]])}return at+printPrefixedLines([[`${rt-1} |`,lt[tt-1]],[`${rt} |`,ut],["|","^".padStart(ot)],[`${rt+1} |`,lt[tt+1]]])}function printPrefixedLines(Xe){const Ke=Xe.filter(([Je,tt])=>tt!==void 0),Ye=Math.max(...Ke.map(([Je])=>Je.length));return Ke.map(([Je,tt])=>Je.padStart(Ye)+(tt?" "+tt:"")).join(`
`)}function toNormalizedOptions(Xe){const Ke=Xe[0];return Ke==null||"kind"in Ke||"length"in Ke?{nodes:Ke,source:Xe[1],positions:Xe[2],path:Xe[3],originalError:Xe[4],extensions:Xe[5]}:Ke}class GraphQLError extends Error{constructor(Ke,...Ye){var Je,tt,st;const{nodes:rt,source:it,positions:ot,path:at,originalError:lt,extensions:ut}=toNormalizedOptions(Ye);super(Ke),this.name="GraphQLError",this.path=at??void 0,this.originalError=lt??void 0,this.nodes=undefinedIfEmpty(Array.isArray(rt)?rt:rt?[rt]:void 0);const ht=undefinedIfEmpty((Je=this.nodes)===null||Je===void 0?void 0:Je.map(ft=>ft.loc).filter(ft=>ft!=null));this.source=it??(ht==null||(tt=ht[0])===null||tt===void 0?void 0:tt.source),this.positions=ot??(ht==null?void 0:ht.map(ft=>ft.start)),this.locations=ot&&it?ot.map(ft=>getLocation(it,ft)):ht==null?void 0:ht.map(ft=>getLocation(ft.source,ft.start));const pt=isObjectLike$4(lt==null?void 0:lt.extensions)?lt==null?void 0:lt.extensions:void 0;this.extensions=(st=ut??pt)!==null&&st!==void 0?st:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),lt!=null&&lt.stack?Object.defineProperty(this,"stack",{value:lt.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,GraphQLError):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let Ke=this.message;if(this.nodes)for(const Ye of this.nodes)Ye.loc&&(Ke+=`

`+printLocation(Ye.loc));else if(this.source&&this.locations)for(const Ye of this.locations)Ke+=`

`+printSourceLocation(this.source,Ye);return Ke}toJSON(){const Ke={message:this.message};return this.locations!=null&&(Ke.locations=this.locations),this.path!=null&&(Ke.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(Ke.extensions=this.extensions),Ke}}function undefinedIfEmpty(Xe){return Xe===void 0||Xe.length===0?void 0:Xe}function syntaxError$1(Xe,Ke,Ye){return new GraphQLError(`Syntax Error: ${Ye}`,{source:Xe,positions:[Ke]})}class Location{constructor(Ke,Ye,Je){this.start=Ke.start,this.end=Ye.end,this.startToken=Ke,this.endToken=Ye,this.source=Je}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class Token{constructor(Ke,Ye,Je,tt,st,rt){this.kind=Ke,this.start=Ye,this.end=Je,this.line=tt,this.column=st,this.value=rt,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const QueryDocumentKeys={Name:[],Document:["definitions"],OperationDefinition:["description","name","variableDefinitions","directives","selectionSet"],VariableDefinition:["description","variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["description","name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"],TypeCoordinate:["name"],MemberCoordinate:["name","memberName"],ArgumentCoordinate:["name","fieldName","argumentName"],DirectiveCoordinate:["name"],DirectiveArgumentCoordinate:["name","argumentName"]},kindValues=new Set(Object.keys(QueryDocumentKeys));function isNode$2(Xe){const Ke=Xe==null?void 0:Xe.kind;return typeof Ke=="string"&&kindValues.has(Ke)}var OperationTypeNode;(function(Xe){Xe.QUERY="query",Xe.MUTATION="mutation",Xe.SUBSCRIPTION="subscription"})(OperationTypeNode||(OperationTypeNode={}));var DirectiveLocation;(function(Xe){Xe.QUERY="QUERY",Xe.MUTATION="MUTATION",Xe.SUBSCRIPTION="SUBSCRIPTION",Xe.FIELD="FIELD",Xe.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",Xe.FRAGMENT_SPREAD="FRAGMENT_SPREAD",Xe.INLINE_FRAGMENT="INLINE_FRAGMENT",Xe.VARIABLE_DEFINITION="VARIABLE_DEFINITION",Xe.SCHEMA="SCHEMA",Xe.SCALAR="SCALAR",Xe.OBJECT="OBJECT",Xe.FIELD_DEFINITION="FIELD_DEFINITION",Xe.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",Xe.INTERFACE="INTERFACE",Xe.UNION="UNION",Xe.ENUM="ENUM",Xe.ENUM_VALUE="ENUM_VALUE",Xe.INPUT_OBJECT="INPUT_OBJECT",Xe.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(DirectiveLocation||(DirectiveLocation={}));var Kind;(function(Xe){Xe.NAME="Name",Xe.DOCUMENT="Document",Xe.OPERATION_DEFINITION="OperationDefinition",Xe.VARIABLE_DEFINITION="VariableDefinition",Xe.SELECTION_SET="SelectionSet",Xe.FIELD="Field",Xe.ARGUMENT="Argument",Xe.FRAGMENT_SPREAD="FragmentSpread",Xe.INLINE_FRAGMENT="InlineFragment",Xe.FRAGMENT_DEFINITION="FragmentDefinition",Xe.VARIABLE="Variable",Xe.INT="IntValue",Xe.FLOAT="FloatValue",Xe.STRING="StringValue",Xe.BOOLEAN="BooleanValue",Xe.NULL="NullValue",Xe.ENUM="EnumValue",Xe.LIST="ListValue",Xe.OBJECT="ObjectValue",Xe.OBJECT_FIELD="ObjectField",Xe.DIRECTIVE="Directive",Xe.NAMED_TYPE="NamedType",Xe.LIST_TYPE="ListType",Xe.NON_NULL_TYPE="NonNullType",Xe.SCHEMA_DEFINITION="SchemaDefinition",Xe.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",Xe.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",Xe.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",Xe.FIELD_DEFINITION="FieldDefinition",Xe.INPUT_VALUE_DEFINITION="InputValueDefinition",Xe.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",Xe.UNION_TYPE_DEFINITION="UnionTypeDefinition",Xe.ENUM_TYPE_DEFINITION="EnumTypeDefinition",Xe.ENUM_VALUE_DEFINITION="EnumValueDefinition",Xe.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",Xe.DIRECTIVE_DEFINITION="DirectiveDefinition",Xe.SCHEMA_EXTENSION="SchemaExtension",Xe.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",Xe.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",Xe.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",Xe.UNION_TYPE_EXTENSION="UnionTypeExtension",Xe.ENUM_TYPE_EXTENSION="EnumTypeExtension",Xe.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension",Xe.TYPE_COORDINATE="TypeCoordinate",Xe.MEMBER_COORDINATE="MemberCoordinate",Xe.ARGUMENT_COORDINATE="ArgumentCoordinate",Xe.DIRECTIVE_COORDINATE="DirectiveCoordinate",Xe.DIRECTIVE_ARGUMENT_COORDINATE="DirectiveArgumentCoordinate"})(Kind||(Kind={}));function isWhiteSpace(Xe){return Xe===9||Xe===32}function isDigit(Xe){return Xe>=48&&Xe<=57}function isLetter(Xe){return Xe>=97&&Xe<=122||Xe>=65&&Xe<=90}function isNameStart(Xe){return isLetter(Xe)||Xe===95}function isNameContinue(Xe){return isLetter(Xe)||isDigit(Xe)||Xe===95}function dedentBlockStringLines(Xe){var Ke;let Ye=Number.MAX_SAFE_INTEGER,Je=null,tt=-1;for(let rt=0;rt<Xe.length;++rt){var st;const it=Xe[rt],ot=leadingWhitespace(it);ot!==it.length&&(Je=(st=Je)!==null&&st!==void 0?st:rt,tt=rt,rt!==0&&ot<Ye&&(Ye=ot))}return Xe.map((rt,it)=>it===0?rt:rt.slice(Ye)).slice((Ke=Je)!==null&&Ke!==void 0?Ke:0,tt+1)}function leadingWhitespace(Xe){let Ke=0;for(;Ke<Xe.length&&isWhiteSpace(Xe.charCodeAt(Ke));)++Ke;return Ke}function printBlockString(Xe,Ke){const Ye=Xe.replace(/"""/g,'\\"""'),Je=Ye.split(/\r\n|[\n\r]/g),tt=Je.length===1,st=Je.length>1&&Je.slice(1).every(pt=>pt.length===0||isWhiteSpace(pt.charCodeAt(0))),rt=Ye.endsWith('\\"""'),it=Xe.endsWith('"')&&!rt,ot=Xe.endsWith("\\"),at=it||ot,lt=!tt||Xe.length>70||at||st||rt;let ut="";const ht=tt&&isWhiteSpace(Xe.charCodeAt(0));return(lt&&!ht||st)&&(ut+=`
`),ut+=Ye,(lt||at)&&(ut+=`
`),'"""'+ut+'"""'}var TokenKind;(function(Xe){Xe.SOF="<SOF>",Xe.EOF="<EOF>",Xe.BANG="!",Xe.DOLLAR="$",Xe.AMP="&",Xe.PAREN_L="(",Xe.PAREN_R=")",Xe.DOT=".",Xe.SPREAD="...",Xe.COLON=":",Xe.EQUALS="=",Xe.AT="@",Xe.BRACKET_L="[",Xe.BRACKET_R="]",Xe.BRACE_L="{",Xe.PIPE="|",Xe.BRACE_R="}",Xe.NAME="Name",Xe.INT="Int",Xe.FLOAT="Float",Xe.STRING="String",Xe.BLOCK_STRING="BlockString",Xe.COMMENT="Comment"})(TokenKind||(TokenKind={}));class Lexer{constructor(Ke){const Ye=new Token(TokenKind.SOF,0,0,0,0);this.source=Ke,this.lastToken=Ye,this.token=Ye,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let Ke=this.token;if(Ke.kind!==TokenKind.EOF)do if(Ke.next)Ke=Ke.next;else{const Ye=readNextToken$1(this,Ke.end);Ke.next=Ye,Ye.prev=Ke,Ke=Ye}while(Ke.kind===TokenKind.COMMENT);return Ke}}function isPunctuatorTokenKind(Xe){return Xe===TokenKind.BANG||Xe===TokenKind.DOLLAR||Xe===TokenKind.AMP||Xe===TokenKind.PAREN_L||Xe===TokenKind.PAREN_R||Xe===TokenKind.DOT||Xe===TokenKind.SPREAD||Xe===TokenKind.COLON||Xe===TokenKind.EQUALS||Xe===TokenKind.AT||Xe===TokenKind.BRACKET_L||Xe===TokenKind.BRACKET_R||Xe===TokenKind.BRACE_L||Xe===TokenKind.PIPE||Xe===TokenKind.BRACE_R}function isUnicodeScalarValue(Xe){return Xe>=0&&Xe<=55295||Xe>=57344&&Xe<=1114111}function isSupplementaryCodePoint(Xe,Ke){return isLeadingSurrogate(Xe.charCodeAt(Ke))&&isTrailingSurrogate(Xe.charCodeAt(Ke+1))}function isLeadingSurrogate(Xe){return Xe>=55296&&Xe<=56319}function isTrailingSurrogate(Xe){return Xe>=56320&&Xe<=57343}function printCodePointAt(Xe,Ke){const Ye=Xe.source.body.codePointAt(Ke);if(Ye===void 0)return TokenKind.EOF;if(Ye>=32&&Ye<=126){const Je=String.fromCodePoint(Ye);return Je==='"'?`'"'`:`"${Je}"`}return"U+"+Ye.toString(16).toUpperCase().padStart(4,"0")}function createToken(Xe,Ke,Ye,Je,tt){const st=Xe.line,rt=1+Ye-Xe.lineStart;return new Token(Ke,Ye,Je,st,rt,tt)}function readNextToken$1(Xe,Ke){const Ye=Xe.source.body,Je=Ye.length;let tt=Ke;for(;tt<Je;){const st=Ye.charCodeAt(tt);switch(st){case 65279:case 9:case 32:case 44:++tt;continue;case 10:++tt,++Xe.line,Xe.lineStart=tt;continue;case 13:Ye.charCodeAt(tt+1)===10?tt+=2:++tt,++Xe.line,Xe.lineStart=tt;continue;case 35:return readComment(Xe,tt);case 33:return createToken(Xe,TokenKind.BANG,tt,tt+1);case 36:return createToken(Xe,TokenKind.DOLLAR,tt,tt+1);case 38:return createToken(Xe,TokenKind.AMP,tt,tt+1);case 40:return createToken(Xe,TokenKind.PAREN_L,tt,tt+1);case 41:return createToken(Xe,TokenKind.PAREN_R,tt,tt+1);case 46:if(Ye.charCodeAt(tt+1)===46&&Ye.charCodeAt(tt+2)===46)return createToken(Xe,TokenKind.SPREAD,tt,tt+3);break;case 58:return createToken(Xe,TokenKind.COLON,tt,tt+1);case 61:return createToken(Xe,TokenKind.EQUALS,tt,tt+1);case 64:return createToken(Xe,TokenKind.AT,tt,tt+1);case 91:return createToken(Xe,TokenKind.BRACKET_L,tt,tt+1);case 93:return createToken(Xe,TokenKind.BRACKET_R,tt,tt+1);case 123:return createToken(Xe,TokenKind.BRACE_L,tt,tt+1);case 124:return createToken(Xe,TokenKind.PIPE,tt,tt+1);case 125:return createToken(Xe,TokenKind.BRACE_R,tt,tt+1);case 34:return Ye.charCodeAt(tt+1)===34&&Ye.charCodeAt(tt+2)===34?readBlockString(Xe,tt):readString(Xe,tt)}if(isDigit(st)||st===45)return readNumber(Xe,tt,st);if(isNameStart(st))return readName(Xe,tt);throw syntaxError$1(Xe.source,tt,st===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:isUnicodeScalarValue(st)||isSupplementaryCodePoint(Ye,tt)?`Unexpected character: ${printCodePointAt(Xe,tt)}.`:`Invalid character: ${printCodePointAt(Xe,tt)}.`)}return createToken(Xe,TokenKind.EOF,Je,Je)}function readComment(Xe,Ke){const Ye=Xe.source.body,Je=Ye.length;let tt=Ke+1;for(;tt<Je;){const st=Ye.charCodeAt(tt);if(st===10||st===13)break;if(isUnicodeScalarValue(st))++tt;else if(isSupplementaryCodePoint(Ye,tt))tt+=2;else break}return createToken(Xe,TokenKind.COMMENT,Ke,tt,Ye.slice(Ke+1,tt))}function readNumber(Xe,Ke,Ye){const Je=Xe.source.body;let tt=Ke,st=Ye,rt=!1;if(st===45&&(st=Je.charCodeAt(++tt)),st===48){if(st=Je.charCodeAt(++tt),isDigit(st))throw syntaxError$1(Xe.source,tt,`Invalid number, unexpected digit after 0: ${printCodePointAt(Xe,tt)}.`)}else tt=readDigits(Xe,tt,st),st=Je.charCodeAt(tt);if(st===46&&(rt=!0,st=Je.charCodeAt(++tt),tt=readDigits(Xe,tt,st),st=Je.charCodeAt(tt)),(st===69||st===101)&&(rt=!0,st=Je.charCodeAt(++tt),(st===43||st===45)&&(st=Je.charCodeAt(++tt)),tt=readDigits(Xe,tt,st),st=Je.charCodeAt(tt)),st===46||isNameStart(st))throw syntaxError$1(Xe.source,tt,`Invalid number, expected digit but got: ${printCodePointAt(Xe,tt)}.`);return createToken(Xe,rt?TokenKind.FLOAT:TokenKind.INT,Ke,tt,Je.slice(Ke,tt))}function readDigits(Xe,Ke,Ye){if(!isDigit(Ye))throw syntaxError$1(Xe.source,Ke,`Invalid number, expected digit but got: ${printCodePointAt(Xe,Ke)}.`);const Je=Xe.source.body;let tt=Ke+1;for(;isDigit(Je.charCodeAt(tt));)++tt;return tt}function readString(Xe,Ke){const Ye=Xe.source.body,Je=Ye.length;let tt=Ke+1,st=tt,rt="";for(;tt<Je;){const it=Ye.charCodeAt(tt);if(it===34)return rt+=Ye.slice(st,tt),createToken(Xe,TokenKind.STRING,Ke,tt+1,rt);if(it===92){rt+=Ye.slice(st,tt);const ot=Ye.charCodeAt(tt+1)===117?Ye.charCodeAt(tt+2)===123?readEscapedUnicodeVariableWidth(Xe,tt):readEscapedUnicodeFixedWidth(Xe,tt):readEscapedCharacter(Xe,tt);rt+=ot.value,tt+=ot.size,st=tt;continue}if(it===10||it===13)break;if(isUnicodeScalarValue(it))++tt;else if(isSupplementaryCodePoint(Ye,tt))tt+=2;else throw syntaxError$1(Xe.source,tt,`Invalid character within String: ${printCodePointAt(Xe,tt)}.`)}throw syntaxError$1(Xe.source,tt,"Unterminated string.")}function readEscapedUnicodeVariableWidth(Xe,Ke){const Ye=Xe.source.body;let Je=0,tt=3;for(;tt<12;){const st=Ye.charCodeAt(Ke+tt++);if(st===125){if(tt<5||!isUnicodeScalarValue(Je))break;return{value:String.fromCodePoint(Je),size:tt}}if(Je=Je<<4|readHexDigit(st),Je<0)break}throw syntaxError$1(Xe.source,Ke,`Invalid Unicode escape sequence: "${Ye.slice(Ke,Ke+tt)}".`)}function readEscapedUnicodeFixedWidth(Xe,Ke){const Ye=Xe.source.body,Je=read16BitHexCode(Ye,Ke+2);if(isUnicodeScalarValue(Je))return{value:String.fromCodePoint(Je),size:6};if(isLeadingSurrogate(Je)&&Ye.charCodeAt(Ke+6)===92&&Ye.charCodeAt(Ke+7)===117){const tt=read16BitHexCode(Ye,Ke+8);if(isTrailingSurrogate(tt))return{value:String.fromCodePoint(Je,tt),size:12}}throw syntaxError$1(Xe.source,Ke,`Invalid Unicode escape sequence: "${Ye.slice(Ke,Ke+6)}".`)}function read16BitHexCode(Xe,Ke){return readHexDigit(Xe.charCodeAt(Ke))<<12|readHexDigit(Xe.charCodeAt(Ke+1))<<8|readHexDigit(Xe.charCodeAt(Ke+2))<<4|readHexDigit(Xe.charCodeAt(Ke+3))}function readHexDigit(Xe){return Xe>=48&&Xe<=57?Xe-48:Xe>=65&&Xe<=70?Xe-55:Xe>=97&&Xe<=102?Xe-87:-1}function readEscapedCharacter(Xe,Ke){const Ye=Xe.source.body;switch(Ye.charCodeAt(Ke+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw syntaxError$1(Xe.source,Ke,`Invalid character escape sequence: "${Ye.slice(Ke,Ke+2)}".`)}function readBlockString(Xe,Ke){const Ye=Xe.source.body,Je=Ye.length;let tt=Xe.lineStart,st=Ke+3,rt=st,it="";const ot=[];for(;st<Je;){const at=Ye.charCodeAt(st);if(at===34&&Ye.charCodeAt(st+1)===34&&Ye.charCodeAt(st+2)===34){it+=Ye.slice(rt,st),ot.push(it);const lt=createToken(Xe,TokenKind.BLOCK_STRING,Ke,st+3,dedentBlockStringLines(ot).join(`
`));return Xe.line+=ot.length-1,Xe.lineStart=tt,lt}if(at===92&&Ye.charCodeAt(st+1)===34&&Ye.charCodeAt(st+2)===34&&Ye.charCodeAt(st+3)===34){it+=Ye.slice(rt,st),rt=st+1,st+=4;continue}if(at===10||at===13){it+=Ye.slice(rt,st),ot.push(it),at===13&&Ye.charCodeAt(st+1)===10?st+=2:++st,it="",rt=st,tt=st;continue}if(isUnicodeScalarValue(at))++st;else if(isSupplementaryCodePoint(Ye,st))st+=2;else throw syntaxError$1(Xe.source,st,`Invalid character within String: ${printCodePointAt(Xe,st)}.`)}throw syntaxError$1(Xe.source,st,"Unterminated string.")}function readName(Xe,Ke){const Ye=Xe.source.body,Je=Ye.length;let tt=Ke+1;for(;tt<Je;){const st=Ye.charCodeAt(tt);if(isNameContinue(st))++tt;else break}return createToken(Xe,TokenKind.NAME,Ke,tt,Ye.slice(Ke,tt))}class SchemaCoordinateLexer{constructor(Ke){Hi(this,"line",1);Hi(this,"lineStart",0);const Ye=new Token(TokenKind.SOF,0,0,0,0);this.source=Ke,this.lastToken=Ye,this.token=Ye}get[Symbol.toStringTag](){return"SchemaCoordinateLexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let Ke=this.token;if(Ke.kind!==TokenKind.EOF){const Ye=readNextToken(this,Ke.end);Ke.next=Ye,Ye.prev=Ke,Ke=Ye}return Ke}}function readNextToken(Xe,Ke){const Ye=Xe.source.body,Je=Ye.length,tt=Ke;if(tt<Je){const st=Ye.charCodeAt(tt);switch(st){case 46:return createToken(Xe,TokenKind.DOT,tt,tt+1);case 40:return createToken(Xe,TokenKind.PAREN_L,tt,tt+1);case 41:return createToken(Xe,TokenKind.PAREN_R,tt,tt+1);case 58:return createToken(Xe,TokenKind.COLON,tt,tt+1);case 64:return createToken(Xe,TokenKind.AT,tt,tt+1)}if(isNameStart(st))return readName(Xe,tt);throw syntaxError$1(Xe.source,tt,`Invalid character: ${printCodePointAt(Xe,tt)}.`)}return createToken(Xe,TokenKind.EOF,Je,Je)}function devAssert(Xe,Ke){if(!!!Xe)throw new Error(Ke)}const MAX_ARRAY_LENGTH=10,MAX_RECURSIVE_DEPTH=2;function inspect(Xe){return formatValue(Xe,[])}function formatValue(Xe,Ke){switch(typeof Xe){case"string":return JSON.stringify(Xe);case"function":return Xe.name?`[function ${Xe.name}]`:"[function]";case"object":return formatObjectValue(Xe,Ke);default:return String(Xe)}}function formatObjectValue(Xe,Ke){if(Xe===null)return"null";if(Ke.includes(Xe))return"[Circular]";const Ye=[...Ke,Xe];if(isJSONable(Xe)){const Je=Xe.toJSON();if(Je!==Xe)return typeof Je=="string"?Je:formatValue(Je,Ye)}else if(Array.isArray(Xe))return formatArray(Xe,Ye);return formatObject(Xe,Ye)}function isJSONable(Xe){return typeof Xe.toJSON=="function"}function formatObject(Xe,Ke){const Ye=Object.entries(Xe);return Ye.length===0?"{}":Ke.length>MAX_RECURSIVE_DEPTH?"["+getObjectTag(Xe)+"]":"{ "+Ye.map(([tt,st])=>tt+": "+formatValue(st,Ke)).join(", ")+" }"}function formatArray(Xe,Ke){if(Xe.length===0)return"[]";if(Ke.length>MAX_RECURSIVE_DEPTH)return"[Array]";const Ye=Math.min(MAX_ARRAY_LENGTH,Xe.length),Je=Xe.length-Ye,tt=[];for(let st=0;st<Ye;++st)tt.push(formatValue(Xe[st],Ke));return Je===1?tt.push("... 1 more item"):Je>1&&tt.push(`... ${Je} more items`),"["+tt.join(", ")+"]"}function getObjectTag(Xe){const Ke=Object.prototype.toString.call(Xe).replace(/^\[object /,"").replace(/]$/,"");if(Ke==="Object"&&typeof Xe.constructor=="function"){const Ye=Xe.constructor.name;if(typeof Ye=="string"&&Ye!=="")return Ye}return Ke}const isProduction=globalThis.process&&!0,instanceOf=isProduction?function(Ke,Ye){return Ke instanceof Ye}:function(Ke,Ye){if(Ke instanceof Ye)return!0;if(typeof Ke=="object"&&Ke!==null){var Je;const tt=Ye.prototype[Symbol.toStringTag],st=Symbol.toStringTag in Ke?Ke[Symbol.toStringTag]:(Je=Ke.constructor)===null||Je===void 0?void 0:Je.name;if(tt===st){const rt=inspect(Ke);throw new Error(`Cannot use ${tt} "${rt}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};let Source$1=class{constructor(Ke,Ye="GraphQL request",Je={line:1,column:1}){typeof Ke=="string"||devAssert(!1,`Body must be a string. Received: ${inspect(Ke)}.`),this.body=Ke,this.name=Ye,this.locationOffset=Je,this.locationOffset.line>0||devAssert(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||devAssert(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}};function isSource(Xe){return instanceOf(Xe,Source$1)}function parse$3(Xe,Ke){const Ye=new Parser$1(Xe,Ke),Je=Ye.parseDocument();return Object.defineProperty(Je,"tokenCount",{enumerable:!1,value:Ye.tokenCount}),Je}function parseValue$1(Xe,Ke){const Ye=new Parser$1(Xe,Ke);Ye.expectToken(TokenKind.SOF);const Je=Ye.parseValueLiteral(!1);return Ye.expectToken(TokenKind.EOF),Je}function parseConstValue(Xe,Ke){const Ye=new Parser$1(Xe,Ke);Ye.expectToken(TokenKind.SOF);const Je=Ye.parseConstValueLiteral();return Ye.expectToken(TokenKind.EOF),Je}function parseType(Xe,Ke){const Ye=new Parser$1(Xe,Ke);Ye.expectToken(TokenKind.SOF);const Je=Ye.parseTypeReference();return Ye.expectToken(TokenKind.EOF),Je}function parseSchemaCoordinate(Xe){const Ke=isSource(Xe)?Xe:new Source$1(Xe),Ye=new SchemaCoordinateLexer(Ke),Je=new Parser$1(Xe,{lexer:Ye});Je.expectToken(TokenKind.SOF);const tt=Je.parseSchemaCoordinate();return Je.expectToken(TokenKind.EOF),tt}let Parser$1=class{constructor(Ke,Ye={}){const{lexer:Je,...tt}=Ye;if(Je)this._lexer=Je;else{const st=isSource(Ke)?Ke:new Source$1(Ke);this._lexer=new Lexer(st)}this._options=tt,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const Ke=this.expectToken(TokenKind.NAME);return this.node(Ke,{kind:Kind.NAME,value:Ke.value})}parseDocument(){return this.node(this._lexer.token,{kind:Kind.DOCUMENT,definitions:this.many(TokenKind.SOF,this.parseDefinition,TokenKind.EOF)})}parseDefinition(){if(this.peek(TokenKind.BRACE_L))return this.parseOperationDefinition();const Ke=this.peekDescription(),Ye=Ke?this._lexer.lookahead():this._lexer.token;if(Ke&&Ye.kind===TokenKind.BRACE_L)throw syntaxError$1(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are not supported on shorthand queries.");if(Ye.kind===TokenKind.NAME){switch(Ye.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}switch(Ye.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition()}if(Ke)throw syntaxError$1(this._lexer.source,this._lexer.token.start,"Unexpected description, only GraphQL definitions support descriptions.");switch(Ye.value){case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(Ye)}parseOperationDefinition(){const Ke=this._lexer.token;if(this.peek(TokenKind.BRACE_L))return this.node(Ke,{kind:Kind.OPERATION_DEFINITION,operation:OperationTypeNode.QUERY,description:void 0,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const Ye=this.parseDescription(),Je=this.parseOperationType();let tt;return this.peek(TokenKind.NAME)&&(tt=this.parseName()),this.node(Ke,{kind:Kind.OPERATION_DEFINITION,operation:Je,description:Ye,name:tt,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const Ke=this.expectToken(TokenKind.NAME);switch(Ke.value){case"query":return OperationTypeNode.QUERY;case"mutation":return OperationTypeNode.MUTATION;case"subscription":return OperationTypeNode.SUBSCRIPTION}throw this.unexpected(Ke)}parseVariableDefinitions(){return this.optionalMany(TokenKind.PAREN_L,this.parseVariableDefinition,TokenKind.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:Kind.VARIABLE_DEFINITION,description:this.parseDescription(),variable:this.parseVariable(),type:(this.expectToken(TokenKind.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(TokenKind.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const Ke=this._lexer.token;return this.expectToken(TokenKind.DOLLAR),this.node(Ke,{kind:Kind.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:Kind.SELECTION_SET,selections:this.many(TokenKind.BRACE_L,this.parseSelection,TokenKind.BRACE_R)})}parseSelection(){return this.peek(TokenKind.SPREAD)?this.parseFragment():this.parseField()}parseField(){const Ke=this._lexer.token,Ye=this.parseName();let Je,tt;return this.expectOptionalToken(TokenKind.COLON)?(Je=Ye,tt=this.parseName()):tt=Ye,this.node(Ke,{kind:Kind.FIELD,alias:Je,name:tt,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(TokenKind.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(Ke){const Ye=Ke?this.parseConstArgument:this.parseArgument;return this.optionalMany(TokenKind.PAREN_L,Ye,TokenKind.PAREN_R)}parseArgument(Ke=!1){const Ye=this._lexer.token,Je=this.parseName();return this.expectToken(TokenKind.COLON),this.node(Ye,{kind:Kind.ARGUMENT,name:Je,value:this.parseValueLiteral(Ke)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const Ke=this._lexer.token;this.expectToken(TokenKind.SPREAD);const Ye=this.expectOptionalKeyword("on");return!Ye&&this.peek(TokenKind.NAME)?this.node(Ke,{kind:Kind.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(Ke,{kind:Kind.INLINE_FRAGMENT,typeCondition:Ye?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const Ke=this._lexer.token,Ye=this.parseDescription();return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(Ke,{kind:Kind.FRAGMENT_DEFINITION,description:Ye,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(Ke,{kind:Kind.FRAGMENT_DEFINITION,description:Ye,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(Ke){const Ye=this._lexer.token;switch(Ye.kind){case TokenKind.BRACKET_L:return this.parseList(Ke);case TokenKind.BRACE_L:return this.parseObject(Ke);case TokenKind.INT:return this.advanceLexer(),this.node(Ye,{kind:Kind.INT,value:Ye.value});case TokenKind.FLOAT:return this.advanceLexer(),this.node(Ye,{kind:Kind.FLOAT,value:Ye.value});case TokenKind.STRING:case TokenKind.BLOCK_STRING:return this.parseStringLiteral();case TokenKind.NAME:switch(this.advanceLexer(),Ye.value){case"true":return this.node(Ye,{kind:Kind.BOOLEAN,value:!0});case"false":return this.node(Ye,{kind:Kind.BOOLEAN,value:!1});case"null":return this.node(Ye,{kind:Kind.NULL});default:return this.node(Ye,{kind:Kind.ENUM,value:Ye.value})}case TokenKind.DOLLAR:if(Ke)if(this.expectToken(TokenKind.DOLLAR),this._lexer.token.kind===TokenKind.NAME){const Je=this._lexer.token.value;throw syntaxError$1(this._lexer.source,Ye.start,`Unexpected variable "$${Je}" in constant value.`)}else throw this.unexpected(Ye);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const Ke=this._lexer.token;return this.advanceLexer(),this.node(Ke,{kind:Kind.STRING,value:Ke.value,block:Ke.kind===TokenKind.BLOCK_STRING})}parseList(Ke){const Ye=()=>this.parseValueLiteral(Ke);return this.node(this._lexer.token,{kind:Kind.LIST,values:this.any(TokenKind.BRACKET_L,Ye,TokenKind.BRACKET_R)})}parseObject(Ke){const Ye=()=>this.parseObjectField(Ke);return this.node(this._lexer.token,{kind:Kind.OBJECT,fields:this.any(TokenKind.BRACE_L,Ye,TokenKind.BRACE_R)})}parseObjectField(Ke){const Ye=this._lexer.token,Je=this.parseName();return this.expectToken(TokenKind.COLON),this.node(Ye,{kind:Kind.OBJECT_FIELD,name:Je,value:this.parseValueLiteral(Ke)})}parseDirectives(Ke){const Ye=[];for(;this.peek(TokenKind.AT);)Ye.push(this.parseDirective(Ke));return Ye}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(Ke){const Ye=this._lexer.token;return this.expectToken(TokenKind.AT),this.node(Ye,{kind:Kind.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(Ke)})}parseTypeReference(){const Ke=this._lexer.token;let Ye;if(this.expectOptionalToken(TokenKind.BRACKET_L)){const Je=this.parseTypeReference();this.expectToken(TokenKind.BRACKET_R),Ye=this.node(Ke,{kind:Kind.LIST_TYPE,type:Je})}else Ye=this.parseNamedType();return this.expectOptionalToken(TokenKind.BANG)?this.node(Ke,{kind:Kind.NON_NULL_TYPE,type:Ye}):Ye}parseNamedType(){return this.node(this._lexer.token,{kind:Kind.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(TokenKind.STRING)||this.peek(TokenKind.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const Ke=this._lexer.token,Ye=this.parseDescription();this.expectKeyword("schema");const Je=this.parseConstDirectives(),tt=this.many(TokenKind.BRACE_L,this.parseOperationTypeDefinition,TokenKind.BRACE_R);return this.node(Ke,{kind:Kind.SCHEMA_DEFINITION,description:Ye,directives:Je,operationTypes:tt})}parseOperationTypeDefinition(){const Ke=this._lexer.token,Ye=this.parseOperationType();this.expectToken(TokenKind.COLON);const Je=this.parseNamedType();return this.node(Ke,{kind:Kind.OPERATION_TYPE_DEFINITION,operation:Ye,type:Je})}parseScalarTypeDefinition(){const Ke=this._lexer.token,Ye=this.parseDescription();this.expectKeyword("scalar");const Je=this.parseName(),tt=this.parseConstDirectives();return this.node(Ke,{kind:Kind.SCALAR_TYPE_DEFINITION,description:Ye,name:Je,directives:tt})}parseObjectTypeDefinition(){const Ke=this._lexer.token,Ye=this.parseDescription();this.expectKeyword("type");const Je=this.parseName(),tt=this.parseImplementsInterfaces(),st=this.parseConstDirectives(),rt=this.parseFieldsDefinition();return this.node(Ke,{kind:Kind.OBJECT_TYPE_DEFINITION,description:Ye,name:Je,interfaces:tt,directives:st,fields:rt})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(TokenKind.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(TokenKind.BRACE_L,this.parseFieldDefinition,TokenKind.BRACE_R)}parseFieldDefinition(){const Ke=this._lexer.token,Ye=this.parseDescription(),Je=this.parseName(),tt=this.parseArgumentDefs();this.expectToken(TokenKind.COLON);const st=this.parseTypeReference(),rt=this.parseConstDirectives();return this.node(Ke,{kind:Kind.FIELD_DEFINITION,description:Ye,name:Je,arguments:tt,type:st,directives:rt})}parseArgumentDefs(){return this.optionalMany(TokenKind.PAREN_L,this.parseInputValueDef,TokenKind.PAREN_R)}parseInputValueDef(){const Ke=this._lexer.token,Ye=this.parseDescription(),Je=this.parseName();this.expectToken(TokenKind.COLON);const tt=this.parseTypeReference();let st;this.expectOptionalToken(TokenKind.EQUALS)&&(st=this.parseConstValueLiteral());const rt=this.parseConstDirectives();return this.node(Ke,{kind:Kind.INPUT_VALUE_DEFINITION,description:Ye,name:Je,type:tt,defaultValue:st,directives:rt})}parseInterfaceTypeDefinition(){const Ke=this._lexer.token,Ye=this.parseDescription();this.expectKeyword("interface");const Je=this.parseName(),tt=this.parseImplementsInterfaces(),st=this.parseConstDirectives(),rt=this.parseFieldsDefinition();return this.node(Ke,{kind:Kind.INTERFACE_TYPE_DEFINITION,description:Ye,name:Je,interfaces:tt,directives:st,fields:rt})}parseUnionTypeDefinition(){const Ke=this._lexer.token,Ye=this.parseDescription();this.expectKeyword("union");const Je=this.parseName(),tt=this.parseConstDirectives(),st=this.parseUnionMemberTypes();return this.node(Ke,{kind:Kind.UNION_TYPE_DEFINITION,description:Ye,name:Je,directives:tt,types:st})}parseUnionMemberTypes(){return this.expectOptionalToken(TokenKind.EQUALS)?this.delimitedMany(TokenKind.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const Ke=this._lexer.token,Ye=this.parseDescription();this.expectKeyword("enum");const Je=this.parseName(),tt=this.parseConstDirectives(),st=this.parseEnumValuesDefinition();return this.node(Ke,{kind:Kind.ENUM_TYPE_DEFINITION,description:Ye,name:Je,directives:tt,values:st})}parseEnumValuesDefinition(){return this.optionalMany(TokenKind.BRACE_L,this.parseEnumValueDefinition,TokenKind.BRACE_R)}parseEnumValueDefinition(){const Ke=this._lexer.token,Ye=this.parseDescription(),Je=this.parseEnumValueName(),tt=this.parseConstDirectives();return this.node(Ke,{kind:Kind.ENUM_VALUE_DEFINITION,description:Ye,name:Je,directives:tt})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw syntaxError$1(this._lexer.source,this._lexer.token.start,`${getTokenDesc(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const Ke=this._lexer.token,Ye=this.parseDescription();this.expectKeyword("input");const Je=this.parseName(),tt=this.parseConstDirectives(),st=this.parseInputFieldsDefinition();return this.node(Ke,{kind:Kind.INPUT_OBJECT_TYPE_DEFINITION,description:Ye,name:Je,directives:tt,fields:st})}parseInputFieldsDefinition(){return this.optionalMany(TokenKind.BRACE_L,this.parseInputValueDef,TokenKind.BRACE_R)}parseTypeSystemExtension(){const Ke=this._lexer.lookahead();if(Ke.kind===TokenKind.NAME)switch(Ke.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(Ke)}parseSchemaExtension(){const Ke=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const Ye=this.parseConstDirectives(),Je=this.optionalMany(TokenKind.BRACE_L,this.parseOperationTypeDefinition,TokenKind.BRACE_R);if(Ye.length===0&&Je.length===0)throw this.unexpected();return this.node(Ke,{kind:Kind.SCHEMA_EXTENSION,directives:Ye,operationTypes:Je})}parseScalarTypeExtension(){const Ke=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const Ye=this.parseName(),Je=this.parseConstDirectives();if(Je.length===0)throw this.unexpected();return this.node(Ke,{kind:Kind.SCALAR_TYPE_EXTENSION,name:Ye,directives:Je})}parseObjectTypeExtension(){const Ke=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const Ye=this.parseName(),Je=this.parseImplementsInterfaces(),tt=this.parseConstDirectives(),st=this.parseFieldsDefinition();if(Je.length===0&&tt.length===0&&st.length===0)throw this.unexpected();return this.node(Ke,{kind:Kind.OBJECT_TYPE_EXTENSION,name:Ye,interfaces:Je,directives:tt,fields:st})}parseInterfaceTypeExtension(){const Ke=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const Ye=this.parseName(),Je=this.parseImplementsInterfaces(),tt=this.parseConstDirectives(),st=this.parseFieldsDefinition();if(Je.length===0&&tt.length===0&&st.length===0)throw this.unexpected();return this.node(Ke,{kind:Kind.INTERFACE_TYPE_EXTENSION,name:Ye,interfaces:Je,directives:tt,fields:st})}parseUnionTypeExtension(){const Ke=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const Ye=this.parseName(),Je=this.parseConstDirectives(),tt=this.parseUnionMemberTypes();if(Je.length===0&&tt.length===0)throw this.unexpected();return this.node(Ke,{kind:Kind.UNION_TYPE_EXTENSION,name:Ye,directives:Je,types:tt})}parseEnumTypeExtension(){const Ke=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const Ye=this.parseName(),Je=this.parseConstDirectives(),tt=this.parseEnumValuesDefinition();if(Je.length===0&&tt.length===0)throw this.unexpected();return this.node(Ke,{kind:Kind.ENUM_TYPE_EXTENSION,name:Ye,directives:Je,values:tt})}parseInputObjectTypeExtension(){const Ke=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const Ye=this.parseName(),Je=this.parseConstDirectives(),tt=this.parseInputFieldsDefinition();if(Je.length===0&&tt.length===0)throw this.unexpected();return this.node(Ke,{kind:Kind.INPUT_OBJECT_TYPE_EXTENSION,name:Ye,directives:Je,fields:tt})}parseDirectiveDefinition(){const Ke=this._lexer.token,Ye=this.parseDescription();this.expectKeyword("directive"),this.expectToken(TokenKind.AT);const Je=this.parseName(),tt=this.parseArgumentDefs(),st=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const rt=this.parseDirectiveLocations();return this.node(Ke,{kind:Kind.DIRECTIVE_DEFINITION,description:Ye,name:Je,arguments:tt,repeatable:st,locations:rt})}parseDirectiveLocations(){return this.delimitedMany(TokenKind.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const Ke=this._lexer.token,Ye=this.parseName();if(Object.prototype.hasOwnProperty.call(DirectiveLocation,Ye.value))return Ye;throw this.unexpected(Ke)}parseSchemaCoordinate(){const Ke=this._lexer.token,Ye=this.expectOptionalToken(TokenKind.AT),Je=this.parseName();let tt;!Ye&&this.expectOptionalToken(TokenKind.DOT)&&(tt=this.parseName());let st;return(Ye||tt)&&this.expectOptionalToken(TokenKind.PAREN_L)&&(st=this.parseName(),this.expectToken(TokenKind.COLON),this.expectToken(TokenKind.PAREN_R)),Ye?st?this.node(Ke,{kind:Kind.DIRECTIVE_ARGUMENT_COORDINATE,name:Je,argumentName:st}):this.node(Ke,{kind:Kind.DIRECTIVE_COORDINATE,name:Je}):tt?st?this.node(Ke,{kind:Kind.ARGUMENT_COORDINATE,name:Je,fieldName:tt,argumentName:st}):this.node(Ke,{kind:Kind.MEMBER_COORDINATE,name:Je,memberName:tt}):this.node(Ke,{kind:Kind.TYPE_COORDINATE,name:Je})}node(Ke,Ye){return this._options.noLocation!==!0&&(Ye.loc=new Location(Ke,this._lexer.lastToken,this._lexer.source)),Ye}peek(Ke){return this._lexer.token.kind===Ke}expectToken(Ke){const Ye=this._lexer.token;if(Ye.kind===Ke)return this.advanceLexer(),Ye;throw syntaxError$1(this._lexer.source,Ye.start,`Expected ${getTokenKindDesc(Ke)}, found ${getTokenDesc(Ye)}.`)}expectOptionalToken(Ke){return this._lexer.token.kind===Ke?(this.advanceLexer(),!0):!1}expectKeyword(Ke){const Ye=this._lexer.token;if(Ye.kind===TokenKind.NAME&&Ye.value===Ke)this.advanceLexer();else throw syntaxError$1(this._lexer.source,Ye.start,`Expected "${Ke}", found ${getTokenDesc(Ye)}.`)}expectOptionalKeyword(Ke){const Ye=this._lexer.token;return Ye.kind===TokenKind.NAME&&Ye.value===Ke?(this.advanceLexer(),!0):!1}unexpected(Ke){const Ye=Ke??this._lexer.token;return syntaxError$1(this._lexer.source,Ye.start,`Unexpected ${getTokenDesc(Ye)}.`)}any(Ke,Ye,Je){this.expectToken(Ke);const tt=[];for(;!this.expectOptionalToken(Je);)tt.push(Ye.call(this));return tt}optionalMany(Ke,Ye,Je){if(this.expectOptionalToken(Ke)){const tt=[];do tt.push(Ye.call(this));while(!this.expectOptionalToken(Je));return tt}return[]}many(Ke,Ye,Je){this.expectToken(Ke);const tt=[];do tt.push(Ye.call(this));while(!this.expectOptionalToken(Je));return tt}delimitedMany(Ke,Ye){this.expectOptionalToken(Ke);const Je=[];do Je.push(Ye.call(this));while(this.expectOptionalToken(Ke));return Je}advanceLexer(){const{maxTokens:Ke}=this._options,Ye=this._lexer.advance();if(Ye.kind!==TokenKind.EOF&&(++this._tokenCounter,Ke!==void 0&&this._tokenCounter>Ke))throw syntaxError$1(this._lexer.source,Ye.start,`Document contains more that ${Ke} tokens. Parsing aborted.`)}};function getTokenDesc(Xe){const Ke=Xe.value;return getTokenKindDesc(Xe.kind)+(Ke!=null?` "${Ke}"`:"")}function getTokenKindDesc(Xe){return isPunctuatorTokenKind(Xe)?`"${Xe}"`:Xe}const parser=Object.freeze(Object.defineProperty({__proto__:null,Parser:Parser$1,parse:parse$3,parseConstValue,parseSchemaCoordinate,parseType,parseValue:parseValue$1},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(parser);function printString(Xe){return`"${Xe.replace(escapedRegExp,escapedReplacer)}"`}const escapedRegExp=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function escapedReplacer(Xe){return escapeSequences[Xe.charCodeAt(0)]}const escapeSequences=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],BREAK=Object.freeze({});function visit(Xe,Ke,Ye=QueryDocumentKeys){const Je=new Map;for(const At of Object.values(Kind))Je.set(At,getEnterLeaveForKind(Ke,At));let tt,st=Array.isArray(Xe),rt=[Xe],it=-1,ot=[],at=Xe,lt,ut;const ht=[],pt=[];do{it++;const At=it===rt.length,Et=At&&ot.length!==0;if(At){if(lt=pt.length===0?void 0:ht[ht.length-1],at=ut,ut=pt.pop(),Et)if(st){at=at.slice();let _t=0;for(const[Ct,Tt]of ot){const St=Ct-_t;Tt===null?(at.splice(St,1),_t++):at[St]=Tt}}else{at={...at};for(const[_t,Ct]of ot)at[_t]=Ct}it=tt.index,rt=tt.keys,ot=tt.edits,st=tt.inArray,tt=tt.prev}else if(ut){if(lt=st?it:rt[it],at=ut[lt],at==null)continue;ht.push(lt)}let wt;if(!Array.isArray(at)){var ft,xt;isNode$2(at)||devAssert(!1,`Invalid AST Node: ${inspect(at)}.`);const _t=At?(ft=Je.get(at.kind))===null||ft===void 0?void 0:ft.leave:(xt=Je.get(at.kind))===null||xt===void 0?void 0:xt.enter;if(wt=_t==null?void 0:_t.call(Ke,at,lt,ut,ht,pt),wt===BREAK)break;if(wt===!1){if(!At){ht.pop();continue}}else if(wt!==void 0&&(ot.push([lt,wt]),!At))if(isNode$2(wt))at=wt;else{ht.pop();continue}}if(wt===void 0&&Et&&ot.push([lt,at]),At)ht.pop();else{var vt;tt={inArray:st,index:it,keys:rt,edits:ot,prev:tt},st=Array.isArray(at),rt=st?at:(vt=Ye[at.kind])!==null&&vt!==void 0?vt:[],it=-1,ot=[],ut&&pt.push(ut),ut=at}}while(tt!==void 0);return ot.length!==0?ot[ot.length-1][1]:Xe}function getEnterLeaveForKind(Xe,Ke){const Ye=Xe[Ke];return typeof Ye=="object"?Ye:typeof Ye=="function"?{enter:Ye,leave:void 0}:{enter:Xe.enter,leave:Xe.leave}}function print$1(Xe){return visit(Xe,printDocASTReducer)}const MAX_LINE_LENGTH=80,printDocASTReducer={Name:{leave:Xe=>Xe.value},Variable:{leave:Xe=>"$"+Xe.name},Document:{leave:Xe=>join(Xe.definitions,`

`)},OperationDefinition:{leave(Xe){const Ke=hasMultilineItems(Xe.variableDefinitions)?wrap(`(
`,join(Xe.variableDefinitions,`
`),`
)`):wrap("(",join(Xe.variableDefinitions,", "),")"),Ye=wrap("",Xe.description,`
`)+join([Xe.operation,join([Xe.name,Ke]),join(Xe.directives," ")]," ");return(Ye==="query"?"":Ye+" ")+Xe.selectionSet}},VariableDefinition:{leave:({variable:Xe,type:Ke,defaultValue:Ye,directives:Je,description:tt})=>wrap("",tt,`
`)+Xe+": "+Ke+wrap(" = ",Ye)+wrap(" ",join(Je," "))},SelectionSet:{leave:({selections:Xe})=>block(Xe)},Field:{leave({alias:Xe,name:Ke,arguments:Ye,directives:Je,selectionSet:tt}){const st=wrap("",Xe,": ")+Ke;let rt=st+wrap("(",join(Ye,", "),")");return rt.length>MAX_LINE_LENGTH&&(rt=st+wrap(`(
`,indent(join(Ye,`
`)),`
)`)),join([rt,join(Je," "),tt]," ")}},Argument:{leave:({name:Xe,value:Ke})=>Xe+": "+Ke},FragmentSpread:{leave:({name:Xe,directives:Ke})=>"..."+Xe+wrap(" ",join(Ke," "))},InlineFragment:{leave:({typeCondition:Xe,directives:Ke,selectionSet:Ye})=>join(["...",wrap("on ",Xe),join(Ke," "),Ye]," ")},FragmentDefinition:{leave:({name:Xe,typeCondition:Ke,variableDefinitions:Ye,directives:Je,selectionSet:tt,description:st})=>wrap("",st,`
`)+`fragment ${Xe}${wrap("(",join(Ye,", "),")")} on ${Ke} ${wrap("",join(Je," ")," ")}`+tt},IntValue:{leave:({value:Xe})=>Xe},FloatValue:{leave:({value:Xe})=>Xe},StringValue:{leave:({value:Xe,block:Ke})=>Ke?printBlockString(Xe):printString(Xe)},BooleanValue:{leave:({value:Xe})=>Xe?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:Xe})=>Xe},ListValue:{leave:({values:Xe})=>"["+join(Xe,", ")+"]"},ObjectValue:{leave:({fields:Xe})=>"{"+join(Xe,", ")+"}"},ObjectField:{leave:({name:Xe,value:Ke})=>Xe+": "+Ke},Directive:{leave:({name:Xe,arguments:Ke})=>"@"+Xe+wrap("(",join(Ke,", "),")")},NamedType:{leave:({name:Xe})=>Xe},ListType:{leave:({type:Xe})=>"["+Xe+"]"},NonNullType:{leave:({type:Xe})=>Xe+"!"},SchemaDefinition:{leave:({description:Xe,directives:Ke,operationTypes:Ye})=>wrap("",Xe,`
`)+join(["schema",join(Ke," "),block(Ye)]," ")},OperationTypeDefinition:{leave:({operation:Xe,type:Ke})=>Xe+": "+Ke},ScalarTypeDefinition:{leave:({description:Xe,name:Ke,directives:Ye})=>wrap("",Xe,`
`)+join(["scalar",Ke,join(Ye," ")]," ")},ObjectTypeDefinition:{leave:({description:Xe,name:Ke,interfaces:Ye,directives:Je,fields:tt})=>wrap("",Xe,`
`)+join(["type",Ke,wrap("implements ",join(Ye," & ")),join(Je," "),block(tt)]," ")},FieldDefinition:{leave:({description:Xe,name:Ke,arguments:Ye,type:Je,directives:tt})=>wrap("",Xe,`
`)+Ke+(hasMultilineItems(Ye)?wrap(`(
`,indent(join(Ye,`
`)),`
)`):wrap("(",join(Ye,", "),")"))+": "+Je+wrap(" ",join(tt," "))},InputValueDefinition:{leave:({description:Xe,name:Ke,type:Ye,defaultValue:Je,directives:tt})=>wrap("",Xe,`
`)+join([Ke+": "+Ye,wrap("= ",Je),join(tt," ")]," ")},InterfaceTypeDefinition:{leave:({description:Xe,name:Ke,interfaces:Ye,directives:Je,fields:tt})=>wrap("",Xe,`
`)+join(["interface",Ke,wrap("implements ",join(Ye," & ")),join(Je," "),block(tt)]," ")},UnionTypeDefinition:{leave:({description:Xe,name:Ke,directives:Ye,types:Je})=>wrap("",Xe,`
`)+join(["union",Ke,join(Ye," "),wrap("= ",join(Je," | "))]," ")},EnumTypeDefinition:{leave:({description:Xe,name:Ke,directives:Ye,values:Je})=>wrap("",Xe,`
`)+join(["enum",Ke,join(Ye," "),block(Je)]," ")},EnumValueDefinition:{leave:({description:Xe,name:Ke,directives:Ye})=>wrap("",Xe,`
`)+join([Ke,join(Ye," ")]," ")},InputObjectTypeDefinition:{leave:({description:Xe,name:Ke,directives:Ye,fields:Je})=>wrap("",Xe,`
`)+join(["input",Ke,join(Ye," "),block(Je)]," ")},DirectiveDefinition:{leave:({description:Xe,name:Ke,arguments:Ye,repeatable:Je,locations:tt})=>wrap("",Xe,`
`)+"directive @"+Ke+(hasMultilineItems(Ye)?wrap(`(
`,indent(join(Ye,`
`)),`
)`):wrap("(",join(Ye,", "),")"))+(Je?" repeatable":"")+" on "+join(tt," | ")},SchemaExtension:{leave:({directives:Xe,operationTypes:Ke})=>join(["extend schema",join(Xe," "),block(Ke)]," ")},ScalarTypeExtension:{leave:({name:Xe,directives:Ke})=>join(["extend scalar",Xe,join(Ke," ")]," ")},ObjectTypeExtension:{leave:({name:Xe,interfaces:Ke,directives:Ye,fields:Je})=>join(["extend type",Xe,wrap("implements ",join(Ke," & ")),join(Ye," "),block(Je)]," ")},InterfaceTypeExtension:{leave:({name:Xe,interfaces:Ke,directives:Ye,fields:Je})=>join(["extend interface",Xe,wrap("implements ",join(Ke," & ")),join(Ye," "),block(Je)]," ")},UnionTypeExtension:{leave:({name:Xe,directives:Ke,types:Ye})=>join(["extend union",Xe,join(Ke," "),wrap("= ",join(Ye," | "))]," ")},EnumTypeExtension:{leave:({name:Xe,directives:Ke,values:Ye})=>join(["extend enum",Xe,join(Ke," "),block(Ye)]," ")},InputObjectTypeExtension:{leave:({name:Xe,directives:Ke,fields:Ye})=>join(["extend input",Xe,join(Ke," "),block(Ye)]," ")},TypeCoordinate:{leave:({name:Xe})=>Xe},MemberCoordinate:{leave:({name:Xe,memberName:Ke})=>join([Xe,wrap(".",Ke)])},ArgumentCoordinate:{leave:({name:Xe,fieldName:Ke,argumentName:Ye})=>join([Xe,wrap(".",Ke),wrap("(",Ye,":)")])},DirectiveCoordinate:{leave:({name:Xe})=>join(["@",Xe])},DirectiveArgumentCoordinate:{leave:({name:Xe,argumentName:Ke})=>join(["@",Xe,wrap("(",Ke,":)")])}};function join(Xe,Ke=""){var Ye;return(Ye=Xe==null?void 0:Xe.filter(Je=>Je).join(Ke))!==null&&Ye!==void 0?Ye:""}function block(Xe){return wrap(`{
`,indent(join(Xe,`
`)),`
}`)}function wrap(Xe,Ke,Ye=""){return Ke!=null&&Ke!==""?Xe+Ke+Ye:""}function indent(Xe){return wrap("  ",Xe.replace(/\n/g,`
  `))}function hasMultilineItems(Xe){var Ke;return(Ke=Xe==null?void 0:Xe.some(Ye=>Ye.includes(`
`)))!==null&&Ke!==void 0?Ke:!1}const printer=Object.freeze(Object.defineProperty({__proto__:null,print:print$1},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(printer);var createRequestBody$1={},_public={},ReactNativeFile$1=function(Ke){var Ye=Ke.uri,Je=Ke.name,tt=Ke.type;this.uri=Ye,this.name=Je,this.type=tt},ReactNativeFile=ReactNativeFile$1,isExtractableFile=function(Ke){return typeof File<"u"&&Ke instanceof File||typeof Blob<"u"&&Ke instanceof Blob||Ke instanceof ReactNativeFile},defaultIsExtractableFile=isExtractableFile,extractFiles=function Xe(Ke,Ye,Je){Ye===void 0&&(Ye=""),Je===void 0&&(Je=defaultIsExtractableFile);var tt,st=new Map;function rt(lt,ut){var ht=st.get(ut);ht?ht.push.apply(ht,lt):st.set(ut,lt)}if(Je(Ke))tt=null,rt([Ye],Ke);else{var it=Ye?Ye+".":"";if(typeof FileList<"u"&&Ke instanceof FileList)tt=Array.prototype.map.call(Ke,function(lt,ut){return rt([""+it+ut],lt),null});else if(Array.isArray(Ke))tt=Ke.map(function(lt,ut){var ht=Xe(lt,""+it+ut,Je);return ht.files.forEach(rt),ht.clone});else if(Ke&&Ke.constructor===Object){tt={};for(var ot in Ke){var at=Xe(Ke[ot],""+it+ot,Je);at.files.forEach(rt),tt[ot]=at.clone}}else tt=Ke}return{clone:tt,files:st}};_public.ReactNativeFile=ReactNativeFile$1;_public.extractFiles=extractFiles;_public.isExtractableFile=isExtractableFile;var browser$1=typeof self=="object"?self.FormData:window.FormData,defaultJsonSerializer={};Object.defineProperty(defaultJsonSerializer,"__esModule",{value:!0});defaultJsonSerializer.defaultJsonSerializer=void 0;defaultJsonSerializer.defaultJsonSerializer={parse:JSON.parse,stringify:JSON.stringify};var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(Xe){return Xe&&Xe.__esModule?Xe:{default:Xe}};Object.defineProperty(createRequestBody$1,"__esModule",{value:!0});var extract_files_1=_public,form_data_1=__importDefault(browser$1),defaultJsonSerializer_1=defaultJsonSerializer,isExtractableFileEnhanced=function(Xe){return extract_files_1.isExtractableFile(Xe)||Xe!==null&&typeof Xe=="object"&&typeof Xe.pipe=="function"};function createRequestBody(Xe,Ke,Ye,Je){Je===void 0&&(Je=defaultJsonSerializer_1.defaultJsonSerializer);var tt=extract_files_1.extractFiles({query:Xe,variables:Ke,operationName:Ye},"",isExtractableFileEnhanced),st=tt.clone,rt=tt.files;if(rt.size===0){if(!Array.isArray(Xe))return Je.stringify(st);if(typeof Ke<"u"&&!Array.isArray(Ke))throw new Error("Cannot create request body with given variable type, array expected");var it=Xe.reduce(function(ht,pt,ft){return ht.push({query:pt,variables:Ke?Ke[ft]:void 0}),ht},[]);return Je.stringify(it)}var ot=typeof FormData>"u"?form_data_1.default:FormData,at=new ot;at.append("operations",Je.stringify(st));var lt={},ut=0;return rt.forEach(function(ht){lt[++ut]=ht}),at.append("map",Je.stringify(lt)),ut=0,rt.forEach(function(ht,pt){at.append(""+ ++ut,pt)}),at}createRequestBody$1.default=createRequestBody;var parseArgs={};Object.defineProperty(parseArgs,"__esModule",{value:!0});parseArgs.parseBatchRequestsExtendedArgs=parseArgs.parseRawRequestExtendedArgs=parseArgs.parseRequestExtendedArgs=parseArgs.parseBatchRequestArgs=parseArgs.parseRawRequestArgs=parseArgs.parseRequestArgs=void 0;function parseRequestArgs(Xe,Ke,Ye){return Xe.document?Xe:{document:Xe,variables:Ke,requestHeaders:Ye,signal:void 0}}parseArgs.parseRequestArgs=parseRequestArgs;function parseRawRequestArgs(Xe,Ke,Ye){return Xe.query?Xe:{query:Xe,variables:Ke,requestHeaders:Ye,signal:void 0}}parseArgs.parseRawRequestArgs=parseRawRequestArgs;function parseBatchRequestArgs(Xe,Ke){return Xe.documents?Xe:{documents:Xe,requestHeaders:Ke,signal:void 0}}parseArgs.parseBatchRequestArgs=parseBatchRequestArgs;function parseRequestExtendedArgs(Xe,Ke,Ye,Je){return Xe.document?Xe:{url:Xe,document:Ke,variables:Ye,requestHeaders:Je,signal:void 0}}parseArgs.parseRequestExtendedArgs=parseRequestExtendedArgs;function parseRawRequestExtendedArgs(Xe,Ke,Ye,Je){return Xe.query?Xe:{url:Xe,query:Ke,variables:Ye,requestHeaders:Je,signal:void 0}}parseArgs.parseRawRequestExtendedArgs=parseRawRequestExtendedArgs;function parseBatchRequestsExtendedArgs(Xe,Ke,Ye){return Xe.documents?Xe:{url:Xe,documents:Ke,requestHeaders:Ye,signal:void 0}}parseArgs.parseBatchRequestsExtendedArgs=parseBatchRequestsExtendedArgs;var types={},__extends=commonjsGlobal&&commonjsGlobal.__extends||(function(){var Xe=function(Ke,Ye){return Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Je,tt){Je.__proto__=tt}||function(Je,tt){for(var st in tt)Object.prototype.hasOwnProperty.call(tt,st)&&(Je[st]=tt[st])},Xe(Ke,Ye)};return function(Ke,Ye){if(typeof Ye!="function"&&Ye!==null)throw new TypeError("Class extends value "+String(Ye)+" is not a constructor or null");Xe(Ke,Ye);function Je(){this.constructor=Ke}Ke.prototype=Ye===null?Object.create(Ye):(Je.prototype=Ye.prototype,new Je)}})();Object.defineProperty(types,"__esModule",{value:!0});types.ClientError=void 0;var ClientError=(function(Xe){__extends(Ke,Xe);function Ke(Ye,Je){var tt=this,st=Ke.extractMessage(Ye)+": "+JSON.stringify({response:Ye,request:Je});return tt=Xe.call(this,st)||this,Object.setPrototypeOf(tt,Ke.prototype),tt.response=Ye,tt.request=Je,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(tt,Ke),tt}return Ke.extractMessage=function(Ye){try{return Ye.errors[0].message}catch{return"GraphQL Error (Code: "+Ye.status+")"}},Ke})(Error);types.ClientError=ClientError;var graphqlWs={},hasRequiredGraphqlWs;function requireGraphqlWs(){if(hasRequiredGraphqlWs)return graphqlWs;hasRequiredGraphqlWs=1;var Xe=commonjsGlobal&&commonjsGlobal.__assign||function(){return Xe=Object.assign||function(Ct){for(var Tt,St=1,Rt=arguments.length;St<Rt;St++){Tt=arguments[St];for(var Nt in Tt)Object.prototype.hasOwnProperty.call(Tt,Nt)&&(Ct[Nt]=Tt[Nt])}return Ct},Xe.apply(this,arguments)},Ke=commonjsGlobal&&commonjsGlobal.__awaiter||function(Ct,Tt,St,Rt){function Nt(Pt){return Pt instanceof St?Pt:new St(function(Bt){Bt(Pt)})}return new(St||(St=Promise))(function(Pt,Bt){function Lt(Vt){try{Dt(Rt.next(Vt))}catch(Gt){Bt(Gt)}}function zt(Vt){try{Dt(Rt.throw(Vt))}catch(Gt){Bt(Gt)}}function Dt(Vt){Vt.done?Pt(Vt.value):Nt(Vt.value).then(Lt,zt)}Dt((Rt=Rt.apply(Ct,Tt||[])).next())})},Ye=commonjsGlobal&&commonjsGlobal.__generator||function(Ct,Tt){var St={label:0,sent:function(){if(Pt[0]&1)throw Pt[1];return Pt[1]},trys:[],ops:[]},Rt,Nt,Pt,Bt;return Bt={next:Lt(0),throw:Lt(1),return:Lt(2)},typeof Symbol=="function"&&(Bt[Symbol.iterator]=function(){return this}),Bt;function Lt(Dt){return function(Vt){return zt([Dt,Vt])}}function zt(Dt){if(Rt)throw new TypeError("Generator is already executing.");for(;St;)try{if(Rt=1,Nt&&(Pt=Dt[0]&2?Nt.return:Dt[0]?Nt.throw||((Pt=Nt.return)&&Pt.call(Nt),0):Nt.next)&&!(Pt=Pt.call(Nt,Dt[1])).done)return Pt;switch(Nt=0,Pt&&(Dt=[Dt[0]&2,Pt.value]),Dt[0]){case 0:case 1:Pt=Dt;break;case 4:return St.label++,{value:Dt[1],done:!1};case 5:St.label++,Nt=Dt[1],Dt=[0];continue;case 7:Dt=St.ops.pop(),St.trys.pop();continue;default:if(Pt=St.trys,!(Pt=Pt.length>0&&Pt[Pt.length-1])&&(Dt[0]===6||Dt[0]===2)){St=0;continue}if(Dt[0]===3&&(!Pt||Dt[1]>Pt[0]&&Dt[1]<Pt[3])){St.label=Dt[1];break}if(Dt[0]===6&&St.label<Pt[1]){St.label=Pt[1],Pt=Dt;break}if(Pt&&St.label<Pt[2]){St.label=Pt[2],St.ops.push(Dt);break}Pt[2]&&St.ops.pop(),St.trys.pop();continue}Dt=Tt.call(Ct,St)}catch(Vt){Dt=[6,Vt],Nt=0}finally{Rt=Pt=0}if(Dt[0]&5)throw Dt[1];return{value:Dt[0]?Dt[1]:void 0,done:!0}}};Object.defineProperty(graphqlWs,"__esModule",{value:!0}),graphqlWs.GraphQLWebSocketClient=void 0;var Je=types,tt=requireDist(),st="connection_init",rt="connection_ack",it="ping",ot="pong",at="subscribe",lt="next",ut="error",ht="complete",pt=(function(){function Ct(Tt,St,Rt){this._type=Tt,this._payload=St,this._id=Rt}return Object.defineProperty(Ct.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(Ct.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(Ct.prototype,"payload",{get:function(){return this._payload},enumerable:!1,configurable:!0}),Object.defineProperty(Ct.prototype,"text",{get:function(){var Tt={type:this.type};return this.id!=null&&this.id!=null&&(Tt.id=this.id),this.payload!=null&&this.payload!=null&&(Tt.payload=this.payload),JSON.stringify(Tt)},enumerable:!1,configurable:!0}),Ct.parse=function(Tt,St){var Rt=JSON.parse(Tt),Nt=Rt.type,Pt=Rt.payload,Bt=Rt.id;return new Ct(Nt,St(Pt),Bt)},Ct})(),ft=(function(){function Ct(Tt,St){var Rt=this,Nt=St.onInit,Pt=St.onAcknowledged,Bt=St.onPing,Lt=St.onPong;this.socketState={acknowledged:!1,lastRequestId:0,subscriptions:{}},this.socket=Tt,Tt.onopen=function(zt){return Ke(Rt,void 0,void 0,function(){var Dt,Vt,Gt,Qt;return Ye(this,function(jt){switch(jt.label){case 0:return this.socketState.acknowledged=!1,this.socketState.subscriptions={},Vt=(Dt=Tt).send,Gt=vt,Nt?[4,Nt()]:[3,2];case 1:return Qt=jt.sent(),[3,3];case 2:Qt=null,jt.label=3;case 3:return Vt.apply(Dt,[Gt.apply(void 0,[Qt]).text]),[2]}})})},Tt.onclose=function(zt){Rt.socketState.acknowledged=!1,Rt.socketState.subscriptions={}},Tt.onerror=function(zt){console.error(zt)},Tt.onmessage=function(zt){try{var Dt=xt(zt.data);switch(Dt.type){case rt:{Rt.socketState.acknowledged?console.warn("Duplicate CONNECTION_ACK message ignored"):(Rt.socketState.acknowledged=!0,Pt&&Pt(Dt.payload));return}case it:{Bt?Bt(Dt.payload).then(function(Ht){return Tt.send(Et(Ht).text)}):Tt.send(Et(null).text);return}case ot:{Lt&&Lt(Dt.payload);return}}if(!Rt.socketState.acknowledged||Dt.id===void 0||Dt.id===null||!Rt.socketState.subscriptions[Dt.id])return;var Vt=Rt.socketState.subscriptions[Dt.id],Gt=Vt.query,Qt=Vt.variables,jt=Vt.subscriber;switch(Dt.type){case lt:{!Dt.payload.errors&&Dt.payload.data&&jt.next&&jt.next(Dt.payload.data),Dt.payload.errors&&jt.error&&jt.error(new Je.ClientError(Xe(Xe({},Dt.payload),{status:200}),{query:Gt,variables:Qt}));return}case ut:{jt.error&&jt.error(new Je.ClientError({errors:Dt.payload,status:200},{query:Gt,variables:Qt}));return}case ht:{jt.complete&&jt.complete(),delete Rt.socketState.subscriptions[Dt.id];return}}}catch(Ht){console.error(Ht),Tt.close(1006)}Tt.close(4400,"Unknown graphql-ws message.")}}return Ct.prototype.makeSubscribe=function(Tt,St,Rt,Nt){var Pt=this,Bt=(this.socketState.lastRequestId++).toString();return this.socketState.subscriptions[Bt]={query:Tt,variables:Rt,subscriber:Nt},this.socket.send(wt(Bt,{query:Tt,operationName:St,variables:Rt}).text),function(){Pt.socket.send(_t(Bt).text),delete Pt.socketState.subscriptions[Bt]}},Ct.prototype.rawRequest=function(Tt,St){var Rt=this;return new Promise(function(Nt,Pt){var Bt;Rt.rawSubscribe(Tt,{next:function(Lt,zt){return Bt={data:Lt,extensions:zt}},error:Pt,complete:function(){return Nt(Bt)}},St)})},Ct.prototype.request=function(Tt,St){var Rt=this;return new Promise(function(Nt,Pt){var Bt;Rt.subscribe(Tt,{next:function(Lt){return Bt=Lt},error:Pt,complete:function(){return Nt(Bt)}},St)})},Ct.prototype.subscribe=function(Tt,St,Rt){var Nt=tt.resolveRequestDocument(Tt),Pt=Nt.query,Bt=Nt.operationName;return this.makeSubscribe(Pt,Bt,Rt,St)},Ct.prototype.rawSubscribe=function(Tt,St,Rt){return this.makeSubscribe(Tt,void 0,Rt,St)},Ct.prototype.ping=function(Tt){this.socket.send(At(Tt).text)},Ct.prototype.close=function(){this.socket.close(1e3)},Ct.PROTOCOL="graphql-transport-ws",Ct})();graphqlWs.GraphQLWebSocketClient=ft;function xt(Ct,Tt){Tt===void 0&&(Tt=function(Rt){return Rt});var St=pt.parse(Ct,Tt);return St}function vt(Ct){return new pt(st,Ct)}function At(Ct){return new pt(it,Ct,void 0)}function Et(Ct){return new pt(ot,Ct,void 0)}function wt(Ct,Tt){return new pt(at,Tt,Ct)}function _t(Ct){return new pt(ht,void 0,Ct)}return graphqlWs}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,(function(Xe){var Ke=commonjsGlobal&&commonjsGlobal.__assign||function(){return Ke=Object.assign||function(jt){for(var Ht,Yt=1,Jt=arguments.length;Yt<Jt;Yt++){Ht=arguments[Yt];for(var Zt in Ht)Object.prototype.hasOwnProperty.call(Ht,Zt)&&(jt[Zt]=Ht[Zt])}return jt},Ke.apply(this,arguments)},Ye=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?(function(jt,Ht,Yt,Jt){Jt===void 0&&(Jt=Yt),Object.defineProperty(jt,Jt,{enumerable:!0,get:function(){return Ht[Yt]}})}):(function(jt,Ht,Yt,Jt){Jt===void 0&&(Jt=Yt),jt[Jt]=Ht[Yt]})),Je=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?(function(jt,Ht){Object.defineProperty(jt,"default",{enumerable:!0,value:Ht})}):function(jt,Ht){jt.default=Ht}),tt=commonjsGlobal&&commonjsGlobal.__importStar||function(jt){if(jt&&jt.__esModule)return jt;var Ht={};if(jt!=null)for(var Yt in jt)Yt!=="default"&&Object.prototype.hasOwnProperty.call(jt,Yt)&&Ye(Ht,jt,Yt);return Je(Ht,jt),Ht},st=commonjsGlobal&&commonjsGlobal.__awaiter||function(jt,Ht,Yt,Jt){function Zt(nn){return nn instanceof Yt?nn:new Yt(function(cn){cn(nn)})}return new(Yt||(Yt=Promise))(function(nn,cn){function an(fn){try{dn(Jt.next(fn))}catch(Sn){cn(Sn)}}function mn(fn){try{dn(Jt.throw(fn))}catch(Sn){cn(Sn)}}function dn(fn){fn.done?nn(fn.value):Zt(fn.value).then(an,mn)}dn((Jt=Jt.apply(jt,Ht||[])).next())})},rt=commonjsGlobal&&commonjsGlobal.__generator||function(jt,Ht){var Yt={label:0,sent:function(){if(nn[0]&1)throw nn[1];return nn[1]},trys:[],ops:[]},Jt,Zt,nn,cn;return cn={next:an(0),throw:an(1),return:an(2)},typeof Symbol=="function"&&(cn[Symbol.iterator]=function(){return this}),cn;function an(dn){return function(fn){return mn([dn,fn])}}function mn(dn){if(Jt)throw new TypeError("Generator is already executing.");for(;Yt;)try{if(Jt=1,Zt&&(nn=dn[0]&2?Zt.return:dn[0]?Zt.throw||((nn=Zt.return)&&nn.call(Zt),0):Zt.next)&&!(nn=nn.call(Zt,dn[1])).done)return nn;switch(Zt=0,nn&&(dn=[dn[0]&2,nn.value]),dn[0]){case 0:case 1:nn=dn;break;case 4:return Yt.label++,{value:dn[1],done:!1};case 5:Yt.label++,Zt=dn[1],dn=[0];continue;case 7:dn=Yt.ops.pop(),Yt.trys.pop();continue;default:if(nn=Yt.trys,!(nn=nn.length>0&&nn[nn.length-1])&&(dn[0]===6||dn[0]===2)){Yt=0;continue}if(dn[0]===3&&(!nn||dn[1]>nn[0]&&dn[1]<nn[3])){Yt.label=dn[1];break}if(dn[0]===6&&Yt.label<nn[1]){Yt.label=nn[1],nn=dn;break}if(nn&&Yt.label<nn[2]){Yt.label=nn[2],Yt.ops.push(dn);break}nn[2]&&Yt.ops.pop(),Yt.trys.pop();continue}dn=Ht.call(jt,Yt)}catch(fn){dn=[6,fn],Zt=0}finally{Jt=nn=0}if(dn[0]&5)throw dn[1];return{value:dn[0]?dn[1]:void 0,done:!0}}},it=commonjsGlobal&&commonjsGlobal.__rest||function(jt,Ht){var Yt={};for(var Jt in jt)Object.prototype.hasOwnProperty.call(jt,Jt)&&Ht.indexOf(Jt)<0&&(Yt[Jt]=jt[Jt]);if(jt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Zt=0,Jt=Object.getOwnPropertySymbols(jt);Zt<Jt.length;Zt++)Ht.indexOf(Jt[Zt])<0&&Object.prototype.propertyIsEnumerable.call(jt,Jt[Zt])&&(Yt[Jt[Zt]]=jt[Jt[Zt]]);return Yt},ot=commonjsGlobal&&commonjsGlobal.__importDefault||function(jt){return jt&&jt.__esModule?jt:{default:jt}};Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.GraphQLWebSocketClient=Xe.gql=Xe.resolveRequestDocument=Xe.batchRequests=Xe.request=Xe.rawRequest=Xe.GraphQLClient=Xe.ClientError=void 0;var at=tt(browserPonyfillExports),lt=at,ut=require$$1,ht=require$$2$1,pt=ot(createRequestBody$1),ft=defaultJsonSerializer,xt=parseArgs,vt=types;Object.defineProperty(Xe,"ClientError",{enumerable:!0,get:function(){return vt.ClientError}});var At=function(jt){var Ht={};return jt&&(typeof Headers<"u"&&jt instanceof Headers||jt instanceof lt.Headers?Ht=Gt(jt):Array.isArray(jt)?jt.forEach(function(Yt){var Jt=Yt[0],Zt=Yt[1];Ht[Jt]=Zt}):Ht=jt),Ht},Et=function(jt){return jt.replace(/([\s,]|#[^\n\r]+)+/g," ").trim()},wt=function(jt){var Ht=jt.query,Yt=jt.variables,Jt=jt.operationName,Zt=jt.jsonSerializer;if(!Array.isArray(Ht)){var nn=["query="+encodeURIComponent(Et(Ht))];return Yt&&nn.push("variables="+encodeURIComponent(Zt.stringify(Yt))),Jt&&nn.push("operationName="+encodeURIComponent(Jt)),nn.join("&")}if(typeof Yt<"u"&&!Array.isArray(Yt))throw new Error("Cannot create query with given variable type, array expected");var cn=Ht.reduce(function(an,mn,dn){return an.push({query:Et(mn),variables:Yt?Zt.stringify(Yt[dn]):void 0}),an},[]);return"query="+encodeURIComponent(Zt.stringify(cn))},_t=function(jt){var Ht=jt.url,Yt=jt.query,Jt=jt.variables,Zt=jt.operationName,nn=jt.headers,cn=jt.fetch,an=jt.fetchOptions;return st(void 0,void 0,void 0,function(){var mn;return rt(this,function(dn){switch(dn.label){case 0:return mn=pt.default(Yt,Jt,Zt,an.jsonSerializer),[4,cn(Ht,Ke({method:"POST",headers:Ke(Ke({},typeof mn=="string"?{"Content-Type":"application/json"}:{}),nn),body:mn},an))];case 1:return[2,dn.sent()]}})})},Ct=function(jt){var Ht=jt.url,Yt=jt.query,Jt=jt.variables,Zt=jt.operationName,nn=jt.headers,cn=jt.fetch,an=jt.fetchOptions;return st(void 0,void 0,void 0,function(){var mn;return rt(this,function(dn){switch(dn.label){case 0:return mn=wt({query:Yt,variables:Jt,operationName:Zt,jsonSerializer:an.jsonSerializer}),[4,cn(Ht+"?"+mn,Ke({method:"GET",headers:nn},an))];case 1:return[2,dn.sent()]}})})},Tt=(function(){function jt(Ht,Yt){this.url=Ht,this.options=Yt||{}}return jt.prototype.rawRequest=function(Ht,Yt,Jt){return st(this,void 0,void 0,function(){var Zt,nn,cn,an,mn,dn,fn,Sn,Tn,Nn;return rt(this,function(gn){return Zt=xt.parseRawRequestArgs(Ht,Yt,Jt),nn=this.options,cn=nn.headers,an=nn.fetch,mn=an===void 0?at.default:an,dn=nn.method,fn=dn===void 0?"POST":dn,Sn=it(nn,["headers","fetch","method"]),Tn=this.url,Zt.signal!==void 0&&(Sn.signal=Zt.signal),Nn=zt(Zt.query).operationName,[2,St({url:Tn,query:Zt.query,variables:Zt.variables,headers:Ke(Ke({},At(Dt(cn))),At(Zt.requestHeaders)),operationName:Nn,fetch:mn,method:fn,fetchOptions:Sn})]})})},jt.prototype.request=function(Ht,Yt,Jt){return st(this,void 0,void 0,function(){var Zt,nn,cn,an,mn,dn,fn,Sn,Tn,Nn,gn,_n,kn;return rt(this,function(Wt){switch(Wt.label){case 0:return Zt=xt.parseRequestArgs(Ht,Yt,Jt),nn=this.options,cn=nn.headers,an=nn.fetch,mn=an===void 0?at.default:an,dn=nn.method,fn=dn===void 0?"POST":dn,Sn=it(nn,["headers","fetch","method"]),Tn=this.url,Zt.signal!==void 0&&(Sn.signal=Zt.signal),Nn=zt(Zt.document),gn=Nn.query,_n=Nn.operationName,[4,St({url:Tn,query:gn,variables:Zt.variables,headers:Ke(Ke({},At(Dt(cn))),At(Zt.requestHeaders)),operationName:_n,fetch:mn,method:fn,fetchOptions:Sn})];case 1:return kn=Wt.sent().data,[2,kn]}})})},jt.prototype.batchRequests=function(Ht,Yt){return st(this,void 0,void 0,function(){var Jt,Zt,nn,cn,an,mn,dn,fn,Sn,Tn,Nn,gn;return rt(this,function(_n){switch(_n.label){case 0:return Jt=xt.parseBatchRequestArgs(Ht,Yt),Zt=this.options,nn=Zt.headers,cn=Zt.fetch,an=cn===void 0?at.default:cn,mn=Zt.method,dn=mn===void 0?"POST":mn,fn=it(Zt,["headers","fetch","method"]),Sn=this.url,Jt.signal!==void 0&&(fn.signal=Jt.signal),Tn=Jt.documents.map(function(kn){var Wt=kn.document;return zt(Wt).query}),Nn=Jt.documents.map(function(kn){var Wt=kn.variables;return Wt}),[4,St({url:Sn,query:Tn,variables:Nn,headers:Ke(Ke({},At(Dt(nn))),At(Jt.requestHeaders)),operationName:void 0,fetch:an,method:dn,fetchOptions:fn})];case 1:return gn=_n.sent().data,[2,gn]}})})},jt.prototype.setHeaders=function(Ht){return this.options.headers=Ht,this},jt.prototype.setHeader=function(Ht,Yt){var Jt,Zt=this.options.headers;return Zt?Zt[Ht]=Yt:this.options.headers=(Jt={},Jt[Ht]=Yt,Jt),this},jt.prototype.setEndpoint=function(Ht){return this.url=Ht,this},jt})();Xe.GraphQLClient=Tt;function St(jt){var Ht=jt.url,Yt=jt.query,Jt=jt.variables,Zt=jt.headers,nn=jt.operationName,cn=jt.fetch,an=jt.method,mn=an===void 0?"POST":an,dn=jt.fetchOptions;return st(this,void 0,void 0,function(){var fn,Sn,Tn,Nn,gn,_n,kn,Wt,sn,hn,En;return rt(this,function(An){switch(An.label){case 0:return fn=mn.toUpperCase()==="POST"?_t:Ct,Sn=Array.isArray(Yt),[4,fn({url:Ht,query:Yt,variables:Jt,operationName:nn,headers:Zt,fetch:cn,fetchOptions:dn})];case 1:return Tn=An.sent(),[4,Bt(Tn,dn.jsonSerializer)];case 2:if(Nn=An.sent(),gn=Sn&&Array.isArray(Nn)?!Nn.some(function(wn){var Fn=wn.data;return!Fn}):!!Nn.data,_n=!Nn.errors||dn.errorPolicy==="all"||dn.errorPolicy==="ignore",Tn.ok&&_n&&gn)return kn=Tn.headers,Wt=Tn.status,Nn.errors,sn=it(Nn,["errors"]),hn=dn.errorPolicy==="ignore"?sn:Nn,[2,Ke(Ke({},Sn?{data:hn}:hn),{headers:kn,status:Wt})];throw En=typeof Nn=="string"?{error:Nn}:Nn,new vt.ClientError(Ke(Ke({},En),{status:Tn.status,headers:Tn.headers}),{query:Yt,variables:Jt})}})})}function Rt(jt,Ht,Yt,Jt){return st(this,void 0,void 0,function(){var Zt,nn;return rt(this,function(cn){return Zt=xt.parseRawRequestExtendedArgs(jt,Ht,Yt,Jt),nn=new Tt(Zt.url),[2,nn.rawRequest(Ke({},Zt))]})})}Xe.rawRequest=Rt;function Nt(jt,Ht,Yt,Jt){return st(this,void 0,void 0,function(){var Zt,nn;return rt(this,function(cn){return Zt=xt.parseRequestExtendedArgs(jt,Ht,Yt,Jt),nn=new Tt(Zt.url),[2,nn.request(Ke({},Zt))]})})}Xe.request=Nt;function Pt(jt,Ht,Yt){return st(this,void 0,void 0,function(){var Jt,Zt;return rt(this,function(nn){return Jt=xt.parseBatchRequestsExtendedArgs(jt,Ht,Yt),Zt=new Tt(Jt.url),[2,Zt.batchRequests(Ke({},Jt))]})})}Xe.batchRequests=Pt,Xe.default=Nt;function Bt(jt,Ht){return Ht===void 0&&(Ht=ft.defaultJsonSerializer),st(this,void 0,void 0,function(){var Yt,Jt,Zt;return rt(this,function(nn){switch(nn.label){case 0:return jt.headers.forEach(function(cn,an){an.toLowerCase()==="content-type"&&(Yt=cn)}),Yt&&Yt.toLowerCase().startsWith("application/json")?(Zt=(Jt=Ht).parse,[4,jt.text()]):[3,2];case 1:return[2,Zt.apply(Jt,[nn.sent()])];case 2:return[2,jt.text()]}})})}function Lt(jt){var Ht,Yt=void 0,Jt=jt.definitions.filter(function(Zt){return Zt.kind==="OperationDefinition"});return Jt.length===1&&(Yt=(Ht=Jt[0].name)===null||Ht===void 0?void 0:Ht.value),Yt}function zt(jt){if(typeof jt=="string"){var Ht=void 0;try{var Yt=ut.parse(jt);Ht=Lt(Yt)}catch{}return{query:jt,operationName:Ht}}var Jt=Lt(jt);return{query:ht.print(jt),operationName:Jt}}Xe.resolveRequestDocument=zt;function Dt(jt){return typeof jt=="function"?jt():jt}function Vt(jt){for(var Ht=[],Yt=1;Yt<arguments.length;Yt++)Ht[Yt-1]=arguments[Yt];return jt.reduce(function(Jt,Zt,nn){return""+Jt+Zt+(nn in Ht?Ht[nn]:"")},"")}Xe.gql=Vt;function Gt(jt){var Ht={};return jt.forEach(function(Yt,Jt){Ht[Jt]=Yt}),Ht}var Qt=requireGraphqlWs();Object.defineProperty(Xe,"GraphQLWebSocketClient",{enumerable:!0,get:function(){return Qt.GraphQLWebSocketClient}})})(dist)),dist}var distExports=requireDist(),baseGetTag$4=_baseGetTag,isObjectLike$3=isObjectLike_1,symbolTag$1="[object Symbol]";function isSymbol$5(Xe){return typeof Xe=="symbol"||isObjectLike$3(Xe)&&baseGetTag$4(Xe)==symbolTag$1}var isSymbol_1=isSymbol$5,isArray$b=isArray_1,isSymbol$4=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$4(Xe,Ke){if(isArray$b(Xe))return!1;var Ye=typeof Xe;return Ye=="number"||Ye=="symbol"||Ye=="boolean"||Xe==null||isSymbol$4(Xe)?!0:reIsPlainProp.test(Xe)||!reIsDeepProp.test(Xe)||Ke!=null&&Xe in Object(Ke)}var _isKey=isKey$4;function isObject$7(Xe){var Ke=typeof Xe;return Xe!=null&&(Ke=="object"||Ke=="function")}var isObject_1=isObject$7,baseGetTag$3=_baseGetTag,isObject$6=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$5(Xe){if(!isObject$6(Xe))return!1;var Ke=baseGetTag$3(Xe);return Ke==funcTag$1||Ke==genTag||Ke==asyncTag||Ke==proxyTag}var isFunction_1=isFunction$5,root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=(function(){var Xe=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return Xe?"Symbol(src)_1."+Xe:""})();function isMasked$1(Xe){return!!maskSrcKey&&maskSrcKey in Xe}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$2(Xe){if(Xe!=null){try{return funcToString$1.call(Xe)}catch{}try{return Xe+""}catch{}}return""}var _toSource=toSource$2,isFunction$4=isFunction_1,isMasked=_isMasked,isObject$5=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$8=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$8.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(Xe){if(!isObject$5(Xe)||isMasked(Xe))return!1;var Ke=isFunction$4(Xe)?reIsNative:reIsHostCtor;return Ke.test(toSource$1(Xe))}var _baseIsNative=baseIsNative$1;function getValue$1(Xe,Ke){return Xe==null?void 0:Xe[Ke]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$6(Xe,Ke){var Ye=getValue(Xe,Ke);return baseIsNative(Ye)?Ye:void 0}var _getNative=getNative$6,getNative$5=_getNative,nativeCreate$4=getNative$5(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(Xe){var Ke=this.has(Xe)&&delete this.__data__[Xe];return this.size-=Ke?1:0,Ke}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function hashGet$1(Xe){var Ke=this.__data__;if(nativeCreate$2){var Ye=Ke[Xe];return Ye===HASH_UNDEFINED$2?void 0:Ye}return hasOwnProperty$6.call(Ke,Xe)?Ke[Xe]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function hashHas$1(Xe){var Ke=this.__data__;return nativeCreate$1?Ke[Xe]!==void 0:hasOwnProperty$5.call(Ke,Xe)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(Xe,Ke){var Ye=this.__data__;return this.size+=this.has(Xe)?0:1,Ye[Xe]=nativeCreate&&Ke===void 0?HASH_UNDEFINED$1:Ke,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(Xe){var Ke=-1,Ye=Xe==null?0:Xe.length;for(this.clear();++Ke<Ye;){var Je=Xe[Ke];this.set(Je[0],Je[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$3(Xe,Ke){return Xe===Ke||Xe!==Xe&&Ke!==Ke}var eq_1=eq$3,eq$2=eq_1;function assocIndexOf$4(Xe,Ke){for(var Ye=Xe.length;Ye--;)if(eq$2(Xe[Ye][0],Ke))return Ye;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(Xe){var Ke=this.__data__,Ye=assocIndexOf$3(Ke,Xe);if(Ye<0)return!1;var Je=Ke.length-1;return Ye==Je?Ke.pop():splice.call(Ke,Ye,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(Xe){var Ke=this.__data__,Ye=assocIndexOf$2(Ke,Xe);return Ye<0?void 0:Ke[Ye][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(Xe){return assocIndexOf$1(this.__data__,Xe)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(Xe,Ke){var Ye=this.__data__,Je=assocIndexOf(Ye,Xe);return Je<0?(++this.size,Ye.push([Xe,Ke])):Ye[Je][1]=Ke,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(Xe){var Ke=-1,Ye=Xe==null?0:Xe.length;for(this.clear();++Ke<Ye;){var Je=Xe[Ke];this.set(Je[0],Je[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,getNative$4=_getNative,root$6=_root,Map$4=getNative$4(root$6,"Map"),_Map=Map$4,Hash=_Hash,ListCache$3=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$3),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(Xe){var Ke=typeof Xe;return Ke=="string"||Ke=="number"||Ke=="symbol"||Ke=="boolean"?Xe!=="__proto__":Xe===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(Xe,Ke){var Ye=Xe.__data__;return isKeyable(Ke)?Ye[typeof Ke=="string"?"string":"hash"]:Ye.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(Xe){var Ke=getMapData$3(this,Xe).delete(Xe);return this.size-=Ke?1:0,Ke}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(Xe){return getMapData$2(this,Xe).get(Xe)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(Xe){return getMapData$1(this,Xe).has(Xe)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(Xe,Ke){var Ye=getMapData(this,Xe),Je=Ye.size;return Ye.set(Xe,Ke),this.size+=Ye.size==Je?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(Xe){var Ke=-1,Ye=Xe==null?0:Xe.length;for(this.clear();++Ke<Ye;){var Je=Xe[Ke];this.set(Je[0],Je[1])}}MapCache$3.prototype.clear=mapCacheClear;MapCache$3.prototype.delete=mapCacheDelete;MapCache$3.prototype.get=mapCacheGet;MapCache$3.prototype.has=mapCacheHas;MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3,MapCache$2=_MapCache,FUNC_ERROR_TEXT="Expected a function";function memoize$2(Xe,Ke){if(typeof Xe!="function"||Ke!=null&&typeof Ke!="function")throw new TypeError(FUNC_ERROR_TEXT);var Ye=function(){var Je=arguments,tt=Ke?Ke.apply(this,Je):Je[0],st=Ye.cache;if(st.has(tt))return st.get(tt);var rt=Xe.apply(this,Je);return Ye.cache=st.set(tt,rt)||st,rt};return Ye.cache=new(memoize$2.Cache||MapCache$2),Ye}memoize$2.Cache=MapCache$2;var memoize_1=memoize$2,memoize$1=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(Xe){var Ke=memoize$1(Xe,function(Je){return Ye.size===MAX_MEMOIZE_SIZE&&Ye.clear(),Je}),Ye=Ke.cache;return Ke}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath$2=memoizeCapped(function(Xe){var Ke=[];return Xe.charCodeAt(0)===46&&Ke.push(""),Xe.replace(rePropName,function(Ye,Je,tt,st){Ke.push(tt?st.replace(reEscapeChar,"$1"):Je||Ye)}),Ke}),_stringToPath=stringToPath$2;function arrayMap$2(Xe,Ke){for(var Ye=-1,Je=Xe==null?0:Xe.length,tt=Array(Je);++Ye<Je;)tt[Ye]=Ke(Xe[Ye],Ye,Xe);return tt}var _arrayMap=arrayMap$2,Symbol$2=_Symbol,arrayMap$1=_arrayMap,isArray$a=isArray_1,isSymbol$3=isSymbol_1,symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString$1(Xe){if(typeof Xe=="string")return Xe;if(isArray$a(Xe))return arrayMap$1(Xe,baseToString$1)+"";if(isSymbol$3(Xe))return symbolToString?symbolToString.call(Xe):"";var Ke=Xe+"";return Ke=="0"&&1/Xe==-1/0?"-0":Ke}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$1(Xe){return Xe==null?"":baseToString(Xe)}var toString_1=toString$1,isArray$9=isArray_1,isKey$3=_isKey,stringToPath$1=_stringToPath,toString=toString_1;function castPath$2(Xe,Ke){return isArray$9(Xe)?Xe:isKey$3(Xe,Ke)?[Xe]:stringToPath$1(toString(Xe))}var _castPath=castPath$2,isSymbol$2=isSymbol_1;function toKey$4(Xe){if(typeof Xe=="string"||isSymbol$2(Xe))return Xe;var Ke=Xe+"";return Ke=="0"&&1/Xe==-1/0?"-0":Ke}var _toKey=toKey$4,castPath$1=_castPath,toKey$3=_toKey;function baseGet$4(Xe,Ke){Ke=castPath$1(Ke,Xe);for(var Ye=0,Je=Ke.length;Xe!=null&&Ye<Je;)Xe=Xe[toKey$3(Ke[Ye++])];return Ye&&Ye==Je?Xe:void 0}var _baseGet=baseGet$4,baseGet$3=_baseGet;function get$4(Xe,Ke,Ye){var Je=Xe==null?void 0:baseGet$3(Xe,Ke);return Je===void 0?Ye:Je}var get_1=get$4;const get$5=getDefaultExportFromCjs(get_1);function _objectWithoutProperties$1(Xe,Ke){if(Xe==null)return{};var Ye=_objectWithoutPropertiesLoose$1(Xe,Ke),Je,tt;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(Xe);for(tt=0;tt<st.length;tt++)Je=st[tt],!(Ke.indexOf(Je)>=0)&&Object.prototype.propertyIsEnumerable.call(Xe,Je)&&(Ye[Je]=Xe[Je])}return Ye}function _objectWithoutPropertiesLoose$1(Xe,Ke){if(Xe==null)return{};var Ye={},Je=Object.keys(Xe),tt,st;for(st=0;st<Je.length;st++)tt=Je[st],!(Ke.indexOf(tt)>=0)&&(Ye[tt]=Xe[tt]);return Ye}function _extends$2(){return _extends$2=Object.assign||function(Xe){for(var Ke=1;Ke<arguments.length;Ke++){var Ye=arguments[Ke];for(var Je in Ye)Object.prototype.hasOwnProperty.call(Ye,Je)&&(Xe[Je]=Ye[Je])}return Xe},_extends$2.apply(this,arguments)}function ownKeys$2(Xe,Ke){var Ye=Object.keys(Xe);if(Object.getOwnPropertySymbols){var Je=Object.getOwnPropertySymbols(Xe);Ke&&(Je=Je.filter(function(tt){return Object.getOwnPropertyDescriptor(Xe,tt).enumerable})),Ye.push.apply(Ye,Je)}return Ye}function _objectSpread(Xe){for(var Ke=1;Ke<arguments.length;Ke++){var Ye=arguments[Ke]!=null?arguments[Ke]:{};Ke%2?ownKeys$2(Object(Ye),!0).forEach(function(Je){_defineProperty$2(Xe,Je,Ye[Je])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Xe,Object.getOwnPropertyDescriptors(Ye)):ownKeys$2(Object(Ye)).forEach(function(Je){Object.defineProperty(Xe,Je,Object.getOwnPropertyDescriptor(Ye,Je))})}return Xe}function _defineProperty$2(Xe,Ke,Ye){return Ke in Xe?Object.defineProperty(Xe,Ke,{value:Ye,enumerable:!0,configurable:!0,writable:!0}):Xe[Ke]=Ye,Xe}const defaultProps$1={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},DEFAULT_COLUMNS=2;class Masonry extends React.Component{constructor(Ke){super(Ke),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this);let Ye;this.props.breakpointCols&&this.props.breakpointCols.default?Ye=this.props.breakpointCols.default:Ye=parseInt(this.props.breakpointCols)||DEFAULT_COLUMNS,this.state={columnCount:Ye}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){const Ke=window&&window.innerWidth||1/0;let Ye=this.props.breakpointCols;typeof Ye!="object"&&(Ye={default:parseInt(Ye)||DEFAULT_COLUMNS});let Je=1/0,tt=Ye.default||DEFAULT_COLUMNS;for(let st in Ye){const rt=parseInt(st);rt>0&&Ke<=rt&&rt<Je&&(Je=rt,tt=Ye[st])}tt=Math.max(1,parseInt(tt)||1),this.state.columnCount!==tt&&this.setState({columnCount:tt})}itemsInColumns(){const Ke=this.state.columnCount,Ye=new Array(Ke),Je=React.Children.toArray(this.props.children);for(let tt=0;tt<Je.length;tt++){const st=tt%Ke;Ye[st]||(Ye[st]=[]),Ye[st].push(Je[tt])}return Ye}renderColumns(){const{column:Ke,columnAttrs:Ye={},columnClassName:Je}=this.props,tt=this.itemsInColumns(),st=`${100/tt.length}%`;let rt=Je;rt&&typeof rt!="string"&&(this.logDeprecated('The property "columnClassName" requires a string'),typeof rt>"u"&&(rt="my-masonry-grid_column"));const it=_objectSpread(_objectSpread(_objectSpread({},Ke),Ye),{},{style:_objectSpread(_objectSpread({},Ye.style),{},{width:st}),className:rt});return tt.map((ot,at)=>React.createElement("div",_extends$2({},it,{key:at}),ot))}logDeprecated(Ke){console.error("[Masonry]",Ke)}render(){const Ke=this.props,{children:Ye,breakpointCols:Je,columnClassName:tt,columnAttrs:st,column:rt,className:it}=Ke,ot=_objectWithoutProperties$1(Ke,["children","breakpointCols","columnClassName","columnAttrs","column","className"]);let at=it;return typeof it!="string"&&(this.logDeprecated('The property "className" requires a string'),typeof it>"u"&&(at="my-masonry-grid")),React.createElement("div",_extends$2({},ot,{className:at}),this.renderColumns())}}Masonry.defaultProps=defaultProps$1;const grid$1="_grid_gxg6m_1",column$2="_column_gxg6m_12",styles$X={grid:grid$1,column:column$2},ResponsiveMasonry=({children:Xe})=>{const Ke=()=>globalThis.innerWidth>1170?4:globalThis.innerWidth>744?3:globalThis.innerWidth>320?2:1,[Ye,Je]=reactExports.useState(Ke());return reactExports.useEffect(()=>{const tt=()=>{Je(Ke())};return globalThis.addEventListener("resize",tt),()=>globalThis.removeEventListener("resize",tt)},[]),jsxRuntimeExports.jsx(Masonry,{breakpointCols:Ye,className:`${styles$X.grid} no-fool`,columnClassName:styles$X.column,children:Xe})},compact_container="_compact_container_145qs_216",artist="_artist_145qs_228",hide="_hide_145qs_234",price_box="_price_box_145qs_238",container$s="_container_145qs_246",spread="_spread_145qs_258",editions="_editions_145qs_285",edition="_edition_145qs_285",inline="_inline_145qs_296",objkt_label="_objkt_label_145qs_369",objkt_details_container="_objkt_details_container_145qs_379",objkt_label_container="_objkt_label_container_145qs_383",collab_verification_title="_collab_verification_title_145qs_387",collab_verification_symbol="_collab_verification_symbol_145qs_393",main_swap="_main_swap_145qs_397",styles$W={compact_container,artist,hide,price_box,container:container$s,spread,editions,edition,inline,objkt_label,objkt_details_container,objkt_label_container,collab_verification_title,collab_verification_symbol,main_swap},container$r="_container_2afg7_216",input="_input_2afg7_222",link="_link_2afg7_228",table="_table_2afg7_251",reviewTable="_reviewTable_2afg7_252",row="_row_2afg7_253",borderBottom="_borderBottom_2afg7_272",addressCell="_addressCell_2afg7_276",cellWithPadding="_cellWithPadding_2afg7_282",sharesCell="_sharesCell_2afg7_287",actionCell="_actionCell_2afg7_294",absolute="_absolute_2afg7_311",projectList="_projectList_2afg7_323",mb1$1="_mb1_2afg7_334",mt2="_mt2_2afg7_346",mb2$1="_mb2_2afg7_350",mt3="_mt3_2afg7_362",mb3="_mb3_2afg7_366",list="_list_2afg7_399",flex$2="_flex_2afg7_412",flexBetween="_flexBetween_2afg7_416",alignStart="_alignStart_2afg7_421",tipSelect="_tipSelect_2afg7_425",btn="_btn_2afg7_438",muted$1="_muted_2afg7_460",border="_border_2afg7_272",textInput="_textInput_2afg7_489",relative="_relative_2afg7_516",collabInfo="_collabInfo_2afg7_524",descriptive="_descriptive_2afg7_537",infoLabel="_infoLabel_2afg7_556",fullWidth="_fullWidth_2afg7_562",collabStyles={container:container$r,input,link,table,reviewTable,row,borderBottom,addressCell,cellWithPadding,sharesCell,actionCell,absolute,projectList,mb1:mb1$1,mt2,mb2:mb2$1,mt3,mb3,list,flex:flex$2,flexBetween,alignStart,tipSelect,btn,muted:muted$1,border,textInput,relative,collabInfo,descriptive,infoLabel,fullWidth},useCollabStore=create$2()(subscribeWithSelector(persist((Xe,Ke)=>({originatedContract:void 0,findOriginatedContractFromOpHash:async Ye=>{const Je=useModalStore.getState().step,tt=useModalStore.getState().close,st=useModalStore.getState().show;Je("Originating Contract","Checking network for collab contract"),axios.get(`https://api.tzkt.io/v1/operations/originations/${Ye}`).then(rt=>{const{data:it}=rt;if(console.log("response from originations call",it[0]),it[0]){console.log("There is correct data",it[0]);const{originatedContract:ot}=it[0];Xe({originatedContract:ot,originationOpHash:void 0}),console.log("Saved state originatedContract",ot),Je("Originating Contract","Collaborative contract created successfully"),setTimeout(()=>{tt()},2500)}else console.log("missing data"),st("Originating Contract (Error)","Sorry, there was possibly an error creating the collaborative contract - please check tzkt.io for your wallet address");setTimeout(()=>{tt()},2e3)})},sign:async Ye=>{const Je=useUserStore.getState().handleOp,tt=useModalStore.getState().step;tt("Signing OBJKT","Waiting for wallet",!0);const rt=(await Tezos.wallet.at(SIGNING_CONTRACT)).methods.sign(Ye);return await Je(rt,"Signing OBJKT",{amount:0,storageLimit:310})},originateProxy:async Ye=>{const Je=useModalStore.getState().step,tt=useUserStore.getState().handleOp;console.log("originateProxy",Ye),Xe({originationOpHash:void 0,originatedProxy:void 0}),Je("Originate","creating collaborative contract");const st=MichelsonMap.fromLiteral(Ye),rt=packData(st,createProxySchema),{packed:it}=await Packer$1.packData(rt),at=(await Tezos.wallet.at(PROXY_FACTORY_CONTRACT)).methods.create_proxy(it,"hic_proxy"),lt=await tt(at,"Originate",{amount:0});Xe({originationOpHash:lt})}}),{name:"collab",storage:createJSONStorage(()=>localStorage)}))),SigningUI=({id:Xe,hasSigned:Ke})=>{const Ye=useCollabStore(tt=>tt.sign),Je=()=>{Ye(Xe).then(tt=>console.log(tt))};return Ke?jsxRuntimeExports.jsx("p",{children:"You have signed this work"}):jsxRuntimeExports.jsx("div",{className:collabStyles.border,children:jsxRuntimeExports.jsxs("div",{className:collabStyles.flexBetween,children:[jsxRuntimeExports.jsx("p",{children:"You are a core participant in this work but you haven’t signed it yet"}),jsxRuntimeExports.jsx(Button,{shadow_box:!0,onClick:Je,children:"sign work now"})]})})},SigningSummary=({coreParticipants:Xe,signatures:Ke})=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:collabStyles.mb1,children:jsxRuntimeExports.jsx("strong",{children:"Signing status"})}),jsxRuntimeExports.jsx("ul",{className:collabStyles.list,children:Xe.map(Ye=>{const Je=Ke.some(({shareholder_address:tt})=>Ye.shareholder_address===tt);return jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsxs("a",{href:`/tz/${Ye.shareholder_address}`,children:[get$5(Ye,"shareholder_profile.name")||walletPreview(Ye.shareholder_address),":"," "]}),Je?"✓":"❌"]},Ye.shareholder_address)})})]}),swapLabel="_swapLabel_1umiv_216",teiaLabel="_teiaLabel_1umiv_232",styles$V={swapLabel,teiaLabel},ListingLabel=({children:Xe,className:Ke,label:Ye,alt:Je,tooltip:tt})=>jsxRuntimeExports.jsx("div",{className:`${styles$V.swapLabel} ${Ke||""}`,title:tt||Je,"aria-label":Je,children:Ye}),TeiaLabel=()=>jsxRuntimeExports.jsx(ListingLabel,{label:"TEIA",className:styles$V.teiaLabel,alt:"buy this listing and support teia"}),HENLabel=()=>jsxRuntimeExports.jsx(ListingLabel,{label:"H=N",alt:"this listing is through the original HEN contract"}),OBJKTLabel=()=>jsxRuntimeExports.jsx(ListingLabel,{label:"Objkt.com",alt:"This swap is through OBJKT.com"}),RestrictedLabel=()=>jsxRuntimeExports.jsx(ListingLabel,{label:"Restricted",alt:"This swap is made by a restricted wallet."}),VersumLabel=()=>jsxRuntimeExports.jsx(ListingLabel,{label:"Versum.xyz",alt:"This swap is through versum.xyz"}),MarketplaceLabel=({listing:Xe})=>Xe.type.startsWith("TEIA")?jsxRuntimeExports.jsx(TeiaLabel,{}):Xe.type.startsWith("HEN")?jsxRuntimeExports.jsx(HENLabel,{}):Xe.type.startsWith("OBJKT")?jsxRuntimeExports.jsx(OBJKTLabel,{}):Xe.type.startsWith("VERSUM")?jsxRuntimeExports.jsx(VersumLabel,{}):(console.error("Could not resolve the proper label for this listing",Xe),null),MarketplaceLabel$1=reactExports.memo(MarketplaceLabel),CheapestButton=({listing:Xe})=>{const[Ke,Ye,Je]=useUserStore(tt=>[tt.address,tt.sync,tt.collect]);return Xe?jsxRuntimeExports.jsxs("div",{className:styles$W.main_swap,children:[jsxRuntimeExports.jsx(MarketplaceLabel$1,{listing:Xe}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{Ke==null?Ye():Je(Xe)},full:!0,shadow_box:!0,children:["Collect for ",Number(Xe.price)/1e6," tez"]})]}):jsxRuntimeExports.jsx(Button,{shadow_box:!0,full:!0,children:"Not for sale"})},CollabParticipant=({participant:Xe})=>{const Ke=get$5(Xe,"shareholder_profile.name")?get$5(Xe,"shareholder_profile.name"):Xe.shareholder_address;return Ke&&jsxRuntimeExports.jsx(Link,{className:collabStyles.link,to:`${PATH.ISSUER}/${Xe.shareholder_address}`,children:Ke})},ParticipantList=({title:Xe,participants:Ke})=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:collabStyles.flex,children:[Xe&&jsxRuntimeExports.jsx("p",{className:collabStyles.infoLabel,children:jsxRuntimeExports.jsxs("span",{children:[Xe,":"]})}),jsxRuntimeExports.jsx("div",{children:Ke.map((Ye,Je)=>[Je>0&&Je<Ke.length-1&&", ",Je>0&&Je===Ke.length-1&&", ",jsxRuntimeExports.jsx(CollabParticipant,{participant:Ye},Ye.shareholder_address)])})]})}),ParticipantList$1=reactExports.memo(ParticipantList),CollabIssuerInfo=({creator:Xe})=>{const{name:Ke,user_address:Ye}=Xe,[Je,tt]=reactExports.useState(!1),st=get$5(Xe,"split_contract.shareholders",[]).filter(it=>it.holder_type===CollaboratorType.CORE_PARTICIPANT),rt=Ke?`/collab/${Ke}`:`${PATH.COLLAB}/${Ye}`;return jsxRuntimeExports.jsxs("div",{onMouseOver:()=>tt(!0),onFocus:()=>tt(!0),onMouseOut:()=>tt(!1),onBlur:()=>tt(!1),children:[jsxRuntimeExports.jsx(Button,{className:collabStyles.issuerBtn,to:rt,children:Ke===""?walletPreview(Ye):Ke}),Je&&jsxRuntimeExports.jsx("div",{className:collabStyles.collabInfo,children:jsxRuntimeExports.jsx(ParticipantList$1,{title:!1,participants:st})})]})},Editions=({prefix:Xe,nft:Ke,className:Ye})=>{const{walletBlockMap:Je,isLoading:tt}=useSettings(),rt=reactExports.useMemo(()=>{var it;if(!tt)return lodashExports.sum((it=Ke.listings)==null?void 0:it.filter(ot=>Je.get(ot.seller_address)!==1).map(({amount_left:ot})=>ot))},[tt,Ke.listings,Je])||"X";return jsxRuntimeExports.jsx("div",{className:Ye,children:jsxRuntimeExports.jsx("p",{children:Xe?jsxRuntimeExports.jsxs("span",{children:["Editions:",jsxRuntimeExports.jsxs("span",{children:[rt,"/",Ke.editions]})]}):jsxRuntimeExports.jsxs("span",{children:[rt,"/",Ke.editions]})})})},Editions$1=reactExports.memo(Editions),ItemInfo=({nft:Xe})=>{var vt,At,Et,wt;const Ke=useUserStore(_t=>_t.address),{walletBlockMap:Ye}=useSettings(),[Je,tt]=reactExports.useState(!1),st=Ye.get(Xe.artist_address)===1,rt=Xe.listings.find(_t=>Ye.get(_t.seller_address)!==1),it=get$5(Xe,"teia_meta.is_signed"),ot=get$5(Xe,"artist_profile.is_split"),at=ot&&it?"✓ ":"⚠️",lt=ot&&it?"VERIFIED":"UNVERIFIED",ut=((At=(vt=Xe==null?void 0:Xe.artist_profile)==null?void 0:vt.split_contract)==null?void 0:At.shareholders)||[],ht=ot?ut.some(({shareholder_address:_t,holder_type:Ct})=>Ke===_t&&Ct===CollaboratorType.CORE_PARTICIPANT):!1,pt=Xe.signatures.find(_t=>_t.shareholder_address===Ke),ft=ot?ut.filter(_t=>_t.holder_type===CollaboratorType.CORE_PARTICIPANT):null,xt=classNames$1(collabStyles.flexBetween,collabStyles.alignStart);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ot&&ht&&!pt&&jsxRuntimeExports.jsx(SigningUI,{id:Xe.token_id,hasSigned:!1}),jsxRuntimeExports.jsx("div",{className:styles$W.container,children:jsxRuntimeExports.jsxs("div",{className:styles$W.edition,children:[jsxRuntimeExports.jsx("div",{className:collabStyles.relative,children:jsxRuntimeExports.jsx("div",{className:styles$W.inline,children:ot?jsxRuntimeExports.jsx(CollabIssuerInfo,{creator:Xe.artist_profile}):jsxRuntimeExports.jsx(Button,{to:(Et=Xe.artist_profile)!=null&&Et.name?encodeURI(`/${Xe.artist_profile.name}`):`${PATH.ISSUER}/${Xe.artist_address}`,children:(wt=Xe.artist_profile)!=null&&wt.name?Xe.artist_profile.name:walletPreview(Xe.artist_address)})})}),jsxRuntimeExports.jsx(Editions$1,{prefix:"Editions:",nft:Xe})]})}),!st&&jsxRuntimeExports.jsxs("div",{className:`${styles$W.spread} ${styles$W.objkt_details_container}`,children:[jsxRuntimeExports.jsxs("div",{className:styles$W.objkt_label_container,children:[jsxRuntimeExports.jsxs("p",{className:styles$W.objkt_label,children:["OBJKT#",Xe.token_id]}),ot&&jsxRuntimeExports.jsxs("div",{className:collabStyles.relative,children:[jsxRuntimeExports.jsxs("div",{className:styles$W.collab_verification_title,children:[jsxRuntimeExports.jsx("span",{className:styles$W.collab_verification_symbol,children:at}),jsxRuntimeExports.jsx(Button,{onClick:()=>tt(!Je),children:lt})]}),Je&&jsxRuntimeExports.jsx("div",{className:collabStyles.collabInfo,children:jsxRuntimeExports.jsxs("div",{className:xt,children:[jsxRuntimeExports.jsx(SigningSummary,{coreParticipants:ft,signatures:Xe.signatures}),jsxRuntimeExports.jsx(Button,{onClick:()=>tt(!1),children:jsxRuntimeExports.jsx(Secondary$1,{children:"close"})})]})})]})]}),jsxRuntimeExports.jsx(CheapestButton,{listing:rt})]})]})},Price=({price:Xe})=>jsxRuntimeExports.jsxs("div",{className:styles$W.price_box,children:[Xe,jsxRuntimeExports.jsx(TezosIcon,{size:16})]}),ItemInfoCompact=({nft:Xe})=>{var st,rt;const[Ke,Ye]=useLocalSettings(it=>[it.zen,it.viewMode]),Je=useParams(),tt=Ke?null:lodashExports.isNumber(Xe.price)?(Number(Xe.price)/1e6).toString():"X";return jsxRuntimeExports.jsxs("div",{className:`${styles$W.compact_container} ${styles$W.masonry}`,children:[(Ye==="single"||Je.id&&Je["*"]==="")&&jsxRuntimeExports.jsxs(Button,{alt:`Go to OBJKT ${Xe.token_id}`,to:`${PATH.OBJKT}/${Xe.token_id}`,children:["#",Xe.token_id]}),jsxRuntimeExports.jsx(Button,{className:styles$W.artist,activeClass:styles$W.hide,alt:`Go to artist page of token #${Xe.token_id}`,to:(st=Xe.artist_profile)!=null&&st.name?encodeURI(`/${Xe.artist_profile.name}`):`/tz/${Xe.artist_address}`,children:(rt=Xe.artist_profile)!=null&&rt.name?Xe.artist_profile.name:walletPreview(Xe.artist_address)}),jsxRuntimeExports.jsx(Editions$1,{className:styles$W.editions,nft:Xe}),jsxRuntimeExports.jsx(Price,{price:tt})]})},arButton="_arButton_15is3_34",styles$U={arButton};var build={exports:{}};(()=>{var Xe={296:(tt,st,rt)=>{var it=/^\s+|\s+$/g,ot=/^[-+]0x[0-9a-f]+$/i,at=/^0b[01]+$/i,lt=/^0o[0-7]+$/i,ut=parseInt,ht=typeof rt.g=="object"&&rt.g&&rt.g.Object===Object&&rt.g,pt=typeof self=="object"&&self&&self.Object===Object&&self,ft=ht||pt||Function("return this")(),xt=Object.prototype.toString,vt=Math.max,At=Math.min,Et=function(){return ft.Date.now()};function wt(Ct){var Tt=typeof Ct;return!!Ct&&(Tt=="object"||Tt=="function")}function _t(Ct){if(typeof Ct=="number")return Ct;if((function(Rt){return typeof Rt=="symbol"||(function(Nt){return!!Nt&&typeof Nt=="object"})(Rt)&&xt.call(Rt)=="[object Symbol]"})(Ct))return NaN;if(wt(Ct)){var Tt=typeof Ct.valueOf=="function"?Ct.valueOf():Ct;Ct=wt(Tt)?Tt+"":Tt}if(typeof Ct!="string")return Ct===0?Ct:+Ct;Ct=Ct.replace(it,"");var St=at.test(Ct);return St||lt.test(Ct)?ut(Ct.slice(2),St?2:8):ot.test(Ct)?NaN:+Ct}tt.exports=function(Ct,Tt,St){var Rt,Nt,Pt,Bt,Lt,zt,Dt=0,Vt=!1,Gt=!1,Qt=!0;if(typeof Ct!="function")throw new TypeError("Expected a function");function jt(cn){var an=Rt,mn=Nt;return Rt=Nt=void 0,Dt=cn,Bt=Ct.apply(mn,an)}function Ht(cn){return Dt=cn,Lt=setTimeout(Jt,Tt),Vt?jt(cn):Bt}function Yt(cn){var an=cn-zt;return zt===void 0||an>=Tt||an<0||Gt&&cn-Dt>=Pt}function Jt(){var cn=Et();if(Yt(cn))return Zt(cn);Lt=setTimeout(Jt,(function(an){var mn=Tt-(an-zt);return Gt?At(mn,Pt-(an-Dt)):mn})(cn))}function Zt(cn){return Lt=void 0,Qt&&Rt?jt(cn):(Rt=Nt=void 0,Bt)}function nn(){var cn=Et(),an=Yt(cn);if(Rt=arguments,Nt=this,zt=cn,an){if(Lt===void 0)return Ht(zt);if(Gt)return Lt=setTimeout(Jt,Tt),jt(zt)}return Lt===void 0&&(Lt=setTimeout(Jt,Tt)),Bt}return Tt=_t(Tt)||0,wt(St)&&(Vt=!!St.leading,Pt=(Gt="maxWait"in St)?vt(_t(St.maxWait)||0,Tt):Pt,Qt="trailing"in St?!!St.trailing:Qt),nn.cancel=function(){Lt!==void 0&&clearTimeout(Lt),Dt=0,Rt=zt=Nt=Lt=void 0},nn.flush=function(){return Lt===void 0?Bt:Zt(Et())},nn}},96:(tt,st,rt)=>{var it="Expected a function",ot=/^\s+|\s+$/g,at=/^[-+]0x[0-9a-f]+$/i,lt=/^0b[01]+$/i,ut=/^0o[0-7]+$/i,ht=parseInt,pt=typeof rt.g=="object"&&rt.g&&rt.g.Object===Object&&rt.g,ft=typeof self=="object"&&self&&self.Object===Object&&self,xt=pt||ft||Function("return this")(),vt=Object.prototype.toString,At=Math.max,Et=Math.min,wt=function(){return xt.Date.now()};function _t(Tt){var St=typeof Tt;return!!Tt&&(St=="object"||St=="function")}function Ct(Tt){if(typeof Tt=="number")return Tt;if((function(Nt){return typeof Nt=="symbol"||(function(Pt){return!!Pt&&typeof Pt=="object"})(Nt)&&vt.call(Nt)=="[object Symbol]"})(Tt))return NaN;if(_t(Tt)){var St=typeof Tt.valueOf=="function"?Tt.valueOf():Tt;Tt=_t(St)?St+"":St}if(typeof Tt!="string")return Tt===0?Tt:+Tt;Tt=Tt.replace(ot,"");var Rt=lt.test(Tt);return Rt||ut.test(Tt)?ht(Tt.slice(2),Rt?2:8):at.test(Tt)?NaN:+Tt}tt.exports=function(Tt,St,Rt){var Nt=!0,Pt=!0;if(typeof Tt!="function")throw new TypeError(it);return _t(Rt)&&(Nt="leading"in Rt?!!Rt.leading:Nt,Pt="trailing"in Rt?!!Rt.trailing:Pt),(function(Bt,Lt,zt){var Dt,Vt,Gt,Qt,jt,Ht,Yt=0,Jt=!1,Zt=!1,nn=!0;if(typeof Bt!="function")throw new TypeError(it);function cn(Tn){var Nn=Dt,gn=Vt;return Dt=Vt=void 0,Yt=Tn,Qt=Bt.apply(gn,Nn)}function an(Tn){return Yt=Tn,jt=setTimeout(dn,Lt),Jt?cn(Tn):Qt}function mn(Tn){var Nn=Tn-Ht;return Ht===void 0||Nn>=Lt||Nn<0||Zt&&Tn-Yt>=Gt}function dn(){var Tn=wt();if(mn(Tn))return fn(Tn);jt=setTimeout(dn,(function(Nn){var gn=Lt-(Nn-Ht);return Zt?Et(gn,Gt-(Nn-Yt)):gn})(Tn))}function fn(Tn){return jt=void 0,nn&&Dt?cn(Tn):(Dt=Vt=void 0,Qt)}function Sn(){var Tn=wt(),Nn=mn(Tn);if(Dt=arguments,Vt=this,Ht=Tn,Nn){if(jt===void 0)return an(Ht);if(Zt)return jt=setTimeout(dn,Lt),cn(Ht)}return jt===void 0&&(jt=setTimeout(dn,Lt)),Qt}return Lt=Ct(Lt)||0,_t(zt)&&(Jt=!!zt.leading,Gt=(Zt="maxWait"in zt)?At(Ct(zt.maxWait)||0,Lt):Gt,nn="trailing"in zt?!!zt.trailing:nn),Sn.cancel=function(){jt!==void 0&&clearTimeout(jt),Yt=0,Dt=Ht=Vt=jt=void 0},Sn.flush=function(){return jt===void 0?Qt:fn(wt())},Sn})(Tt,St,{leading:Nt,maxWait:St,trailing:Pt})}},703:(tt,st,rt)=>{var it=rt(414);function ot(){}function at(){}at.resetWarningCache=ot,tt.exports=function(){function lt(pt,ft,xt,vt,At,Et){if(Et!==it){var wt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw wt.name="Invariant Violation",wt}}function ut(){return lt}lt.isRequired=lt;var ht={array:lt,bool:lt,func:lt,number:lt,object:lt,string:lt,symbol:lt,any:lt,arrayOf:ut,element:lt,elementType:lt,instanceOf:ut,node:lt,objectOf:ut,oneOf:ut,oneOfType:ut,shape:ut,exact:ut,checkPropTypes:at,resetWarningCache:ot};return ht.PropTypes=ht,ht}},697:(tt,st,rt)=>{tt.exports=rt(703)()},414:tt=>{tt.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},Ke={};function Ye(tt){var st=Ke[tt];if(st!==void 0)return st.exports;var rt=Ke[tt]={exports:{}};return Xe[tt](rt,rt.exports,Ye),rt.exports}Ye.n=tt=>{var st=tt&&tt.__esModule?()=>tt.default:()=>tt;return Ye.d(st,{a:st}),st},Ye.d=(tt,st)=>{for(var rt in st)Ye.o(st,rt)&&!Ye.o(tt,rt)&&Object.defineProperty(tt,rt,{enumerable:!0,get:st[rt]})},Ye.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),Ye.o=(tt,st)=>Object.prototype.hasOwnProperty.call(tt,st),Ye.r=tt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(tt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(tt,"__esModule",{value:!0})};var Je={};(()=>{Ye.r(Je),Ye.d(Je,{LazyLoadComponent:()=>sn,LazyLoadImage:()=>es,trackWindowScroll:()=>Jt});const tt=reactExports;var st=Ye.n(tt),rt=Ye(697);const it=reactDomExports;var ot=Ye.n(it);function at(){return typeof window<"u"&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}function lt(bn){return(lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pn){return typeof pn}:function(pn){return pn&&typeof Symbol=="function"&&pn.constructor===Symbol&&pn!==Symbol.prototype?"symbol":typeof pn})(bn)}function ut(bn,pn){var Ln=Object.keys(bn);if(Object.getOwnPropertySymbols){var Mn=Object.getOwnPropertySymbols(bn);pn&&(Mn=Mn.filter((function(ls){return Object.getOwnPropertyDescriptor(bn,ls).enumerable}))),Ln.push.apply(Ln,Mn)}return Ln}function ht(bn,pn,Ln){return pn in bn?Object.defineProperty(bn,pn,{value:Ln,enumerable:!0,configurable:!0,writable:!0}):bn[pn]=Ln,bn}function pt(bn,pn){for(var Ln=0;Ln<pn.length;Ln++){var Mn=pn[Ln];Mn.enumerable=Mn.enumerable||!1,Mn.configurable=!0,"value"in Mn&&(Mn.writable=!0),Object.defineProperty(bn,Mn.key,Mn)}}function ft(bn,pn){return(ft=Object.setPrototypeOf||function(Ln,Mn){return Ln.__proto__=Mn,Ln})(bn,pn)}function xt(bn,pn){if(pn&&(lt(pn)==="object"||typeof pn=="function"))return pn;if(pn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(Ln){if(Ln===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ln})(bn)}function vt(bn){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(pn){return pn.__proto__||Object.getPrototypeOf(pn)})(bn)}var At=function(bn){bn.forEach((function(pn){pn.isIntersecting&&pn.target.onVisible()}))},Et={},wt=(function(bn){(function(In,Pn){if(typeof Pn!="function"&&Pn!==null)throw new TypeError("Super expression must either be null or a function");In.prototype=Object.create(Pn&&Pn.prototype,{constructor:{value:In,writable:!0,configurable:!0}}),Pn&&ft(In,Pn)})(as,bn);var pn,Ln,Mn,ls,_s=(Mn=as,ls=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var In,Pn=vt(Mn);if(ls){var qn=vt(this).constructor;In=Reflect.construct(Pn,arguments,qn)}else In=Pn.apply(this,arguments);return xt(this,In)});function as(In){var Pn;if((function(Wn,ts){if(!(Wn instanceof ts))throw new TypeError("Cannot call a class as a function")})(this,as),(Pn=_s.call(this,In)).supportsObserver=!In.scrollPosition&&In.useIntersectionObserver&&at(),Pn.supportsObserver){var qn=In.threshold;Pn.observer=(function(Wn){return Et[Wn]=Et[Wn]||new IntersectionObserver(At,{rootMargin:Wn+"px"}),Et[Wn]})(qn)}return Pn}return pn=as,(Ln=[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.placeholder&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var In=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollPosition,Pn=this.placeholder.getBoundingClientRect(),qn=ot().findDOMNode(this.placeholder).style,Wn={left:parseInt(qn.getPropertyValue("margin-left"),10)||0,top:parseInt(qn.getPropertyValue("margin-top"),10)||0};return{bottom:In.y+Pn.bottom+Wn.top,left:In.x+Pn.left+Wn.left,right:In.x+Pn.right+Wn.left,top:In.y+Pn.top+Wn.top}}},{key:"isPlaceholderInViewport",value:function(){if(typeof window>"u"||!this.placeholder)return!1;var In=this.props,Pn=In.scrollPosition,qn=In.threshold,Wn=this.getPlaceholderBoundingBox(Pn),ts=Pn.y+window.innerHeight,us=Pn.x,xs=Pn.x+window.innerWidth,vs=Pn.y;return vs-qn<=Wn.bottom&&ts+qn>=Wn.top&&us-qn<=Wn.right&&xs+qn>=Wn.left}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var In=this,Pn=this.props,qn=Pn.className,Wn=Pn.height,ts=Pn.placeholder,us=Pn.style,xs=Pn.width;if(ts&&typeof ts.type!="function")return st().cloneElement(ts,{ref:function(gs){return In.placeholder=gs}});var vs=(function(gs){for(var Ss=1;Ss<arguments.length;Ss++){var Es=arguments[Ss]!=null?arguments[Ss]:{};Ss%2?ut(Object(Es),!0).forEach((function(Is){ht(gs,Is,Es[Is])})):Object.getOwnPropertyDescriptors?Object.defineProperties(gs,Object.getOwnPropertyDescriptors(Es)):ut(Object(Es)).forEach((function(Is){Object.defineProperty(gs,Is,Object.getOwnPropertyDescriptor(Es,Is))}))}return gs})({display:"inline-block"},us);return xs!==void 0&&(vs.width=xs),Wn!==void 0&&(vs.height=Wn),st().createElement("span",{className:qn,ref:function(gs){return In.placeholder=gs},style:vs},ts)}}])&&pt(pn.prototype,Ln),as})(st().Component);wt.propTypes={onVisible:rt.PropTypes.func.isRequired,className:rt.PropTypes.string,height:rt.PropTypes.oneOfType([rt.PropTypes.number,rt.PropTypes.string]),placeholder:rt.PropTypes.element,threshold:rt.PropTypes.number,useIntersectionObserver:rt.PropTypes.bool,scrollPosition:rt.PropTypes.shape({x:rt.PropTypes.number.isRequired,y:rt.PropTypes.number.isRequired}),width:rt.PropTypes.oneOfType([rt.PropTypes.number,rt.PropTypes.string])},wt.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0};const _t=wt;var Ct=Ye(296),Tt=Ye.n(Ct),St=Ye(96),Rt=Ye.n(St),Nt=function(bn){var pn=getComputedStyle(bn,null);return pn.getPropertyValue("overflow")+pn.getPropertyValue("overflow-y")+pn.getPropertyValue("overflow-x")};const Pt=function(bn){if(!(bn instanceof HTMLElement))return window;for(var pn=bn;pn&&pn instanceof HTMLElement;){if(/(scroll|auto)/.test(Nt(pn)))return pn;pn=pn.parentNode}return window};function Bt(bn){return(Bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pn){return typeof pn}:function(pn){return pn&&typeof Symbol=="function"&&pn.constructor===Symbol&&pn!==Symbol.prototype?"symbol":typeof pn})(bn)}var Lt=["delayMethod","delayTime"];function zt(){return(zt=Object.assign||function(bn){for(var pn=1;pn<arguments.length;pn++){var Ln=arguments[pn];for(var Mn in Ln)Object.prototype.hasOwnProperty.call(Ln,Mn)&&(bn[Mn]=Ln[Mn])}return bn}).apply(this,arguments)}function Dt(bn,pn){for(var Ln=0;Ln<pn.length;Ln++){var Mn=pn[Ln];Mn.enumerable=Mn.enumerable||!1,Mn.configurable=!0,"value"in Mn&&(Mn.writable=!0),Object.defineProperty(bn,Mn.key,Mn)}}function Vt(bn,pn){return(Vt=Object.setPrototypeOf||function(Ln,Mn){return Ln.__proto__=Mn,Ln})(bn,pn)}function Gt(bn,pn){if(pn&&(Bt(pn)==="object"||typeof pn=="function"))return pn;if(pn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qt(bn)}function Qt(bn){if(bn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return bn}function jt(bn){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(pn){return pn.__proto__||Object.getPrototypeOf(pn)})(bn)}var Ht=function(){return typeof window>"u"?0:window.scrollX||window.pageXOffset},Yt=function(){return typeof window>"u"?0:window.scrollY||window.pageYOffset};const Jt=function(bn){var pn=(function(Ln){(function(qn,Wn){if(typeof Wn!="function"&&Wn!==null)throw new TypeError("Super expression must either be null or a function");qn.prototype=Object.create(Wn&&Wn.prototype,{constructor:{value:qn,writable:!0,configurable:!0}}),Wn&&Vt(qn,Wn)})(Pn,Ln);var Mn,ls,_s,as,In=(_s=Pn,as=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var qn,Wn=jt(_s);if(as){var ts=jt(this).constructor;qn=Reflect.construct(Wn,arguments,ts)}else qn=Wn.apply(this,arguments);return Gt(this,qn)});function Pn(qn){var Wn;if((function(us,xs){if(!(us instanceof xs))throw new TypeError("Cannot call a class as a function")})(this,Pn),(Wn=In.call(this,qn)).useIntersectionObserver=qn.useIntersectionObserver&&at(),Wn.useIntersectionObserver)return Gt(Wn);var ts=Wn.onChangeScroll.bind(Qt(Wn));return qn.delayMethod==="debounce"?Wn.delayedScroll=Tt()(ts,qn.delayTime):qn.delayMethod==="throttle"&&(Wn.delayedScroll=Rt()(ts,qn.delayTime)),Wn.state={scrollPosition:{x:Ht(),y:Yt()}},Wn.baseComponentRef=st().createRef(),Wn}return Mn=Pn,(ls=[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){typeof window>"u"||this.useIntersectionObserver||Pt(ot().findDOMNode(this.baseComponentRef.current))!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement=Pt(ot().findDOMNode(this.baseComponentRef.current)),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:Ht(),y:Yt()}})}},{key:"render",value:function(){var qn=this.props,Wn=(qn.delayMethod,qn.delayTime,(function(us,xs){if(us==null)return{};var vs,gs,Ss=(function(Is,qs){if(Is==null)return{};var Vs,Sr,Pr={},ri=Object.keys(Is);for(Sr=0;Sr<ri.length;Sr++)Vs=ri[Sr],qs.indexOf(Vs)>=0||(Pr[Vs]=Is[Vs]);return Pr})(us,xs);if(Object.getOwnPropertySymbols){var Es=Object.getOwnPropertySymbols(us);for(gs=0;gs<Es.length;gs++)vs=Es[gs],xs.indexOf(vs)>=0||Object.prototype.propertyIsEnumerable.call(us,vs)&&(Ss[vs]=us[vs])}return Ss})(qn,Lt)),ts=this.useIntersectionObserver?null:this.state.scrollPosition;return st().createElement(bn,zt({forwardRef:this.baseComponentRef,scrollPosition:ts},Wn))}}])&&Dt(Mn.prototype,ls),Pn})(st().Component);return pn.propTypes={delayMethod:rt.PropTypes.oneOf(["debounce","throttle"]),delayTime:rt.PropTypes.number,useIntersectionObserver:rt.PropTypes.bool},pn.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},pn};function Zt(bn){return(Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pn){return typeof pn}:function(pn){return pn&&typeof Symbol=="function"&&pn.constructor===Symbol&&pn!==Symbol.prototype?"symbol":typeof pn})(bn)}function nn(bn,pn){for(var Ln=0;Ln<pn.length;Ln++){var Mn=pn[Ln];Mn.enumerable=Mn.enumerable||!1,Mn.configurable=!0,"value"in Mn&&(Mn.writable=!0),Object.defineProperty(bn,Mn.key,Mn)}}function cn(bn,pn){return(cn=Object.setPrototypeOf||function(Ln,Mn){return Ln.__proto__=Mn,Ln})(bn,pn)}function an(bn,pn){if(pn&&(Zt(pn)==="object"||typeof pn=="function"))return pn;if(pn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(Ln){if(Ln===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ln})(bn)}function mn(bn){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(pn){return pn.__proto__||Object.getPrototypeOf(pn)})(bn)}var dn=(function(bn){(function(In,Pn){if(typeof Pn!="function"&&Pn!==null)throw new TypeError("Super expression must either be null or a function");In.prototype=Object.create(Pn&&Pn.prototype,{constructor:{value:In,writable:!0,configurable:!0}}),Pn&&cn(In,Pn)})(as,bn);var pn,Ln,Mn,ls,_s=(Mn=as,ls=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var In,Pn=mn(Mn);if(ls){var qn=mn(this).constructor;In=Reflect.construct(Pn,arguments,qn)}else In=Pn.apply(this,arguments);return an(this,In)});function as(In){return(function(Pn,qn){if(!(Pn instanceof qn))throw new TypeError("Cannot call a class as a function")})(this,as),_s.call(this,In)}return pn=as,(Ln=[{key:"render",value:function(){return st().createElement(_t,this.props)}}])&&nn(pn.prototype,Ln),as})(st().Component);const fn=Jt(dn);function Sn(bn){return(Sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pn){return typeof pn}:function(pn){return pn&&typeof Symbol=="function"&&pn.constructor===Symbol&&pn!==Symbol.prototype?"symbol":typeof pn})(bn)}function Tn(bn,pn){for(var Ln=0;Ln<pn.length;Ln++){var Mn=pn[Ln];Mn.enumerable=Mn.enumerable||!1,Mn.configurable=!0,"value"in Mn&&(Mn.writable=!0),Object.defineProperty(bn,Mn.key,Mn)}}function Nn(bn,pn){return(Nn=Object.setPrototypeOf||function(Ln,Mn){return Ln.__proto__=Mn,Ln})(bn,pn)}function gn(bn,pn){if(pn&&(Sn(pn)==="object"||typeof pn=="function"))return pn;if(pn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _n(bn)}function _n(bn){if(bn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return bn}function kn(bn){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(pn){return pn.__proto__||Object.getPrototypeOf(pn)})(bn)}var Wt=(function(bn){(function(In,Pn){if(typeof Pn!="function"&&Pn!==null)throw new TypeError("Super expression must either be null or a function");In.prototype=Object.create(Pn&&Pn.prototype,{constructor:{value:In,writable:!0,configurable:!0}}),Pn&&Nn(In,Pn)})(as,bn);var pn,Ln,Mn,ls,_s=(Mn=as,ls=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var In,Pn=kn(Mn);if(ls){var qn=kn(this).constructor;In=Reflect.construct(Pn,arguments,qn)}else In=Pn.apply(this,arguments);return gn(this,In)});function as(In){var Pn;(function(xs,vs){if(!(xs instanceof vs))throw new TypeError("Cannot call a class as a function")})(this,as),Pn=_s.call(this,In);var qn=In.afterLoad,Wn=In.beforeLoad,ts=In.scrollPosition,us=In.visibleByDefault;return Pn.state={visible:us},us&&(Wn(),qn()),Pn.onVisible=Pn.onVisible.bind(_n(Pn)),Pn.isScrollTracked=!!(ts&&Number.isFinite(ts.x)&&ts.x>=0&&Number.isFinite(ts.y)&&ts.y>=0),Pn}return pn=as,(Ln=[{key:"componentDidUpdate",value:function(In,Pn){Pn.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var In=this.props,Pn=In.className,qn=In.delayMethod,Wn=In.delayTime,ts=In.height,us=In.placeholder,xs=In.scrollPosition,vs=In.style,gs=In.threshold,Ss=In.useIntersectionObserver,Es=In.width;return this.isScrollTracked||Ss&&at()?st().createElement(_t,{className:Pn,height:ts,onVisible:this.onVisible,placeholder:us,scrollPosition:xs,style:vs,threshold:gs,useIntersectionObserver:Ss,width:Es}):st().createElement(fn,{className:Pn,delayMethod:qn,delayTime:Wn,height:ts,onVisible:this.onVisible,placeholder:us,style:vs,threshold:gs,width:Es})}}])&&Tn(pn.prototype,Ln),as})(st().Component);Wt.propTypes={afterLoad:rt.PropTypes.func,beforeLoad:rt.PropTypes.func,useIntersectionObserver:rt.PropTypes.bool,visibleByDefault:rt.PropTypes.bool},Wt.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1};const sn=Wt;function hn(bn){return(hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pn){return typeof pn}:function(pn){return pn&&typeof Symbol=="function"&&pn.constructor===Symbol&&pn!==Symbol.prototype?"symbol":typeof pn})(bn)}var En=["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"];function An(bn,pn){var Ln=Object.keys(bn);if(Object.getOwnPropertySymbols){var Mn=Object.getOwnPropertySymbols(bn);pn&&(Mn=Mn.filter((function(ls){return Object.getOwnPropertyDescriptor(bn,ls).enumerable}))),Ln.push.apply(Ln,Mn)}return Ln}function wn(bn){for(var pn=1;pn<arguments.length;pn++){var Ln=arguments[pn]!=null?arguments[pn]:{};pn%2?An(Object(Ln),!0).forEach((function(Mn){Fn(bn,Mn,Ln[Mn])})):Object.getOwnPropertyDescriptors?Object.defineProperties(bn,Object.getOwnPropertyDescriptors(Ln)):An(Object(Ln)).forEach((function(Mn){Object.defineProperty(bn,Mn,Object.getOwnPropertyDescriptor(Ln,Mn))}))}return bn}function Fn(bn,pn,Ln){return pn in bn?Object.defineProperty(bn,pn,{value:Ln,enumerable:!0,configurable:!0,writable:!0}):bn[pn]=Ln,bn}function Hn(){return(Hn=Object.assign||function(bn){for(var pn=1;pn<arguments.length;pn++){var Ln=arguments[pn];for(var Mn in Ln)Object.prototype.hasOwnProperty.call(Ln,Mn)&&(bn[Mn]=Ln[Mn])}return bn}).apply(this,arguments)}function Yn(bn,pn){for(var Ln=0;Ln<pn.length;Ln++){var Mn=pn[Ln];Mn.enumerable=Mn.enumerable||!1,Mn.configurable=!0,"value"in Mn&&(Mn.writable=!0),Object.defineProperty(bn,Mn.key,Mn)}}function Un(bn,pn){return(Un=Object.setPrototypeOf||function(Ln,Mn){return Ln.__proto__=Mn,Ln})(bn,pn)}function Kn(bn,pn){if(pn&&(hn(pn)==="object"||typeof pn=="function"))return pn;if(pn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(Ln){if(Ln===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ln})(bn)}function hs(bn){return(hs=Object.setPrototypeOf?Object.getPrototypeOf:function(pn){return pn.__proto__||Object.getPrototypeOf(pn)})(bn)}var zn=(function(bn){(function(In,Pn){if(typeof Pn!="function"&&Pn!==null)throw new TypeError("Super expression must either be null or a function");In.prototype=Object.create(Pn&&Pn.prototype,{constructor:{value:In,writable:!0,configurable:!0}}),Pn&&Un(In,Pn)})(as,bn);var pn,Ln,Mn,ls,_s=(Mn=as,ls=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var In,Pn=hs(Mn);if(ls){var qn=hs(this).constructor;In=Reflect.construct(Pn,arguments,qn)}else In=Pn.apply(this,arguments);return Kn(this,In)});function as(In){var Pn;return(function(qn,Wn){if(!(qn instanceof Wn))throw new TypeError("Cannot call a class as a function")})(this,as),(Pn=_s.call(this,In)).state={loaded:!1},Pn}return pn=as,(Ln=[{key:"onImageLoad",value:function(){var In=this;return this.state.loaded?null:function(){In.props.afterLoad(),In.setState({loaded:!0})}}},{key:"getImg",value:function(){var In=this.props,Pn=(In.afterLoad,In.beforeLoad,In.delayMethod,In.delayTime,In.effect,In.placeholder,In.placeholderSrc,In.scrollPosition,In.threshold,In.useIntersectionObserver,In.visibleByDefault,In.wrapperClassName,In.wrapperProps,(function(qn,Wn){if(qn==null)return{};var ts,us,xs=(function(gs,Ss){if(gs==null)return{};var Es,Is,qs={},Vs=Object.keys(gs);for(Is=0;Is<Vs.length;Is++)Es=Vs[Is],Ss.indexOf(Es)>=0||(qs[Es]=gs[Es]);return qs})(qn,Wn);if(Object.getOwnPropertySymbols){var vs=Object.getOwnPropertySymbols(qn);for(us=0;us<vs.length;us++)ts=vs[us],Wn.indexOf(ts)>=0||Object.prototype.propertyIsEnumerable.call(qn,ts)&&(xs[ts]=qn[ts])}return xs})(In,En));return st().createElement("img",Hn({onLoad:this.onImageLoad()},Pn))}},{key:"getLazyLoadImage",value:function(){var In=this.props,Pn=In.beforeLoad,qn=In.className,Wn=In.delayMethod,ts=In.delayTime,us=In.height,xs=In.placeholder,vs=In.scrollPosition,gs=In.style,Ss=In.threshold,Es=In.useIntersectionObserver,Is=In.visibleByDefault,qs=In.width;return st().createElement(sn,{beforeLoad:Pn,className:qn,delayMethod:Wn,delayTime:ts,height:us,placeholder:xs,scrollPosition:vs,style:gs,threshold:Ss,useIntersectionObserver:Es,visibleByDefault:Is,width:qs},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(In){var Pn=this.props,qn=Pn.effect,Wn=Pn.height,ts=Pn.placeholderSrc,us=Pn.width,xs=Pn.wrapperClassName,vs=Pn.wrapperProps,gs=this.state.loaded,Ss=gs?" lazy-load-image-loaded":"",Es=gs||!ts?{}:{backgroundImage:"url(".concat(ts,")"),backgroundSize:"100% 100%"};return st().createElement("span",Hn({className:xs+" lazy-load-image-background "+qn+Ss,style:wn(wn({},Es),{},{color:"transparent",display:"inline-block",height:Wn,width:us})},vs),In)}},{key:"render",value:function(){var In=this.props,Pn=In.effect,qn=In.placeholderSrc,Wn=In.visibleByDefault,ts=In.wrapperClassName,us=In.wrapperProps,xs=this.getLazyLoadImage();return(Pn||qn)&&!Wn||ts||us?this.getWrappedLazyLoadImage(xs):xs}}])&&Yn(pn.prototype,Ln),as})(st().Component);zn.propTypes={afterLoad:rt.PropTypes.func,beforeLoad:rt.PropTypes.func,delayMethod:rt.PropTypes.string,delayTime:rt.PropTypes.number,effect:rt.PropTypes.string,placeholderSrc:rt.PropTypes.string,threshold:rt.PropTypes.number,useIntersectionObserver:rt.PropTypes.bool,visibleByDefault:rt.PropTypes.bool,wrapperClassName:rt.PropTypes.string,wrapperProps:rt.PropTypes.object},zn.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""};const es=zn})(),build.exports=Je})();var buildExports=build.exports;const style$2="_style_1avr2_216",container$q="_container_1avr2_226",image="_image_1avr2_226",smol$1="_smol_1avr2_234",styles$T={style:style$2,container:container$q,image,smol:smol$1},ImageComponent=({artifactUri:Xe,displayUri:Ke,previewUri:Ye,displayView:Je,nft:tt})=>{var ut;const[st,rt]=reactExports.useState(!1),it=useLocalSettings(ht=>ht.imgproxy);let ot;Ye?ot=Ye:Je?ot=Xe:it&&((ut=tt==null?void 0:tt.teia_meta)!=null&&ut.preview_uri)?ot=`https://imgproxy.teia.rocks${tt.teia_meta.preview_uri}`:ot=Ke;const at=ht=>{console.error(ht)},lt=({target:ht})=>{const pt=ht.naturalWidth,ft=ht.naturalHeight;pt+ft<256&&rt(!0)};return Je?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(buildExports.LazyLoadImage,{className:`${styles$T.style} ${st?styles$T.smol:""}`,src:ot,width:600,alt:`object ${tt.token_id} image`,onLoad:lt,onError:at})}):jsxRuntimeExports.jsx("div",{className:styles$T.container,children:jsxRuntimeExports.jsx(buildExports.LazyLoadImage,{className:`${styles$T.image} ${st?styles$T.smol:""}`,src:ot,width:600,onLoad:lt,alt:`object ${tt.token_id} image`,onError:at})})};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const i$4=(Xe,Ke)=>Ke.kind==="method"&&Ke.descriptor&&!("value"in Ke.descriptor)?{...Ke,finisher(Ye){Ye.createProperty(Ke.key,Xe)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:Ke.key,initializer(){typeof Ke.initializer=="function"&&(this[Ke.key]=Ke.initializer.call(this))},finisher(Ye){Ye.createProperty(Ke.key,Xe)}};function e$4(Xe){return(Ke,Ye)=>Ye!==void 0?((Je,tt,st)=>{tt.constructor.createProperty(st,Je)})(Xe,Ke,Ye):i$4(Xe,Ke)}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var n$6;((n$6=window.HTMLSlotElement)===null||n$6===void 0?void 0:n$6.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t$3=window,e$3=t$3.ShadowRoot&&(t$3.ShadyCSS===void 0||t$3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$4=Symbol(),n$5=new WeakMap;let o$4=class{constructor(Ke,Ye,Je){if(this._$cssResult$=!0,Je!==s$4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=Ke,this.t=Ye}get styleSheet(){let Ke=this.o;const Ye=this.t;if(e$3&&Ke===void 0){const Je=Ye!==void 0&&Ye.length===1;Je&&(Ke=n$5.get(Ye)),Ke===void 0&&((this.o=Ke=new CSSStyleSheet).replaceSync(this.cssText),Je&&n$5.set(Ye,Ke))}return Ke}toString(){return this.cssText}};const r$4=Xe=>new o$4(typeof Xe=="string"?Xe:Xe+"",void 0,s$4),S$1=(Xe,Ke)=>{e$3?Xe.adoptedStyleSheets=Ke.map((Ye=>Ye instanceof CSSStyleSheet?Ye:Ye.styleSheet)):Ke.forEach((Ye=>{const Je=document.createElement("style"),tt=t$3.litNonce;tt!==void 0&&Je.setAttribute("nonce",tt),Je.textContent=Ye.cssText,Xe.appendChild(Je)}))},c$4=e$3?Xe=>Xe:Xe=>Xe instanceof CSSStyleSheet?(Ke=>{let Ye="";for(const Je of Ke.cssRules)Ye+=Je.cssText;return r$4(Ye)})(Xe):Xe;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var s$3;const e$2=window,r$3=e$2.trustedTypes,h$2=r$3?r$3.emptyScript:"",o$3=e$2.reactiveElementPolyfillSupport,n$4={toAttribute(Xe,Ke){switch(Ke){case Boolean:Xe=Xe?h$2:null;break;case Object:case Array:Xe=Xe==null?Xe:JSON.stringify(Xe)}return Xe},fromAttribute(Xe,Ke){let Ye=Xe;switch(Ke){case Boolean:Ye=Xe!==null;break;case Number:Ye=Xe===null?null:Number(Xe);break;case Object:case Array:try{Ye=JSON.parse(Xe)}catch{Ye=null}}return Ye}},a$2=(Xe,Ke)=>Ke!==Xe&&(Ke==Ke||Xe==Xe),l$3={attribute:!0,type:String,converter:n$4,reflect:!1,hasChanged:a$2};let d$2=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(Ke){var Ye;this.finalize(),((Ye=this.h)!==null&&Ye!==void 0?Ye:this.h=[]).push(Ke)}static get observedAttributes(){this.finalize();const Ke=[];return this.elementProperties.forEach(((Ye,Je)=>{const tt=this._$Ep(Je,Ye);tt!==void 0&&(this._$Ev.set(tt,Je),Ke.push(tt))})),Ke}static createProperty(Ke,Ye=l$3){if(Ye.state&&(Ye.attribute=!1),this.finalize(),this.elementProperties.set(Ke,Ye),!Ye.noAccessor&&!this.prototype.hasOwnProperty(Ke)){const Je=typeof Ke=="symbol"?Symbol():"__"+Ke,tt=this.getPropertyDescriptor(Ke,Je,Ye);tt!==void 0&&Object.defineProperty(this.prototype,Ke,tt)}}static getPropertyDescriptor(Ke,Ye,Je){return{get(){return this[Ye]},set(tt){const st=this[Ke];this[Ye]=tt,this.requestUpdate(Ke,st,Je)},configurable:!0,enumerable:!0}}static getPropertyOptions(Ke){return this.elementProperties.get(Ke)||l$3}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const Ke=Object.getPrototypeOf(this);if(Ke.finalize(),Ke.h!==void 0&&(this.h=[...Ke.h]),this.elementProperties=new Map(Ke.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const Ye=this.properties,Je=[...Object.getOwnPropertyNames(Ye),...Object.getOwnPropertySymbols(Ye)];for(const tt of Je)this.createProperty(tt,Ye[tt])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(Ke){const Ye=[];if(Array.isArray(Ke)){const Je=new Set(Ke.flat(1/0).reverse());for(const tt of Je)Ye.unshift(c$4(tt))}else Ke!==void 0&&Ye.push(c$4(Ke));return Ye}static _$Ep(Ke,Ye){const Je=Ye.attribute;return Je===!1?void 0:typeof Je=="string"?Je:typeof Ke=="string"?Ke.toLowerCase():void 0}u(){var Ke;this._$E_=new Promise((Ye=>this.enableUpdating=Ye)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(Ke=this.constructor.h)===null||Ke===void 0||Ke.forEach((Ye=>Ye(this)))}addController(Ke){var Ye,Je;((Ye=this._$ES)!==null&&Ye!==void 0?Ye:this._$ES=[]).push(Ke),this.renderRoot!==void 0&&this.isConnected&&((Je=Ke.hostConnected)===null||Je===void 0||Je.call(Ke))}removeController(Ke){var Ye;(Ye=this._$ES)===null||Ye===void 0||Ye.splice(this._$ES.indexOf(Ke)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((Ke,Ye)=>{this.hasOwnProperty(Ye)&&(this._$Ei.set(Ye,this[Ye]),delete this[Ye])}))}createRenderRoot(){var Ke;const Ye=(Ke=this.shadowRoot)!==null&&Ke!==void 0?Ke:this.attachShadow(this.constructor.shadowRootOptions);return S$1(Ye,this.constructor.elementStyles),Ye}connectedCallback(){var Ke;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(Ke=this._$ES)===null||Ke===void 0||Ke.forEach((Ye=>{var Je;return(Je=Ye.hostConnected)===null||Je===void 0?void 0:Je.call(Ye)}))}enableUpdating(Ke){}disconnectedCallback(){var Ke;(Ke=this._$ES)===null||Ke===void 0||Ke.forEach((Ye=>{var Je;return(Je=Ye.hostDisconnected)===null||Je===void 0?void 0:Je.call(Ye)}))}attributeChangedCallback(Ke,Ye,Je){this._$AK(Ke,Je)}_$EO(Ke,Ye,Je=l$3){var tt;const st=this.constructor._$Ep(Ke,Je);if(st!==void 0&&Je.reflect===!0){const rt=(((tt=Je.converter)===null||tt===void 0?void 0:tt.toAttribute)!==void 0?Je.converter:n$4).toAttribute(Ye,Je.type);this._$El=Ke,rt==null?this.removeAttribute(st):this.setAttribute(st,rt),this._$El=null}}_$AK(Ke,Ye){var Je;const tt=this.constructor,st=tt._$Ev.get(Ke);if(st!==void 0&&this._$El!==st){const rt=tt.getPropertyOptions(st),it=typeof rt.converter=="function"?{fromAttribute:rt.converter}:((Je=rt.converter)===null||Je===void 0?void 0:Je.fromAttribute)!==void 0?rt.converter:n$4;this._$El=st,this[st]=it.fromAttribute(Ye,rt.type),this._$El=null}}requestUpdate(Ke,Ye,Je){let tt=!0;Ke!==void 0&&(((Je=Je||this.constructor.getPropertyOptions(Ke)).hasChanged||a$2)(this[Ke],Ye)?(this._$AL.has(Ke)||this._$AL.set(Ke,Ye),Je.reflect===!0&&this._$El!==Ke&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(Ke,Je))):tt=!1),!this.isUpdatePending&&tt&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(Ye){Promise.reject(Ye)}const Ke=this.scheduleUpdate();return Ke!=null&&await Ke,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var Ke;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((tt,st)=>this[st]=tt)),this._$Ei=void 0);let Ye=!1;const Je=this._$AL;try{Ye=this.shouldUpdate(Je),Ye?(this.willUpdate(Je),(Ke=this._$ES)===null||Ke===void 0||Ke.forEach((tt=>{var st;return(st=tt.hostUpdate)===null||st===void 0?void 0:st.call(tt)})),this.update(Je)):this._$Ek()}catch(tt){throw Ye=!1,this._$Ek(),tt}Ye&&this._$AE(Je)}willUpdate(Ke){}_$AE(Ke){var Ye;(Ye=this._$ES)===null||Ye===void 0||Ye.forEach((Je=>{var tt;return(tt=Je.hostUpdated)===null||tt===void 0?void 0:tt.call(Je)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(Ke)),this.updated(Ke)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(Ke){return!0}update(Ke){this._$EC!==void 0&&(this._$EC.forEach(((Ye,Je)=>this._$EO(Je,this[Je],Ye))),this._$EC=void 0),this._$Ek()}updated(Ke){}firstUpdated(Ke){}};d$2.finalized=!0,d$2.elementProperties=new Map,d$2.elementStyles=[],d$2.shadowRootOptions={mode:"open"},o$3==null||o$3({ReactiveElement:d$2}),((s$3=e$2.reactiveElementVersions)!==null&&s$3!==void 0?s$3:e$2.reactiveElementVersions=[]).push("1.6.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var t$2;const i$3=window,s$2=i$3.trustedTypes,e$1=s$2?s$2.createPolicy("lit-html",{createHTML:Xe=>Xe}):void 0,o$2=`lit$${(Math.random()+"").slice(9)}$`,n$3="?"+o$2,l$2=`<${n$3}>`,h$1=document,r$2=(Xe="")=>h$1.createComment(Xe),d$1=Xe=>Xe===null||typeof Xe!="object"&&typeof Xe!="function",u=Array.isArray,c$3=Xe=>u(Xe)||typeof(Xe==null?void 0:Xe[Symbol.iterator])=="function",v$1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,a$1=/-->/g,f$1=/>/g,_=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),m$3=/'/g,p$3=/"/g,$=/^(?:script|style|textarea|title)$/i,g$2=Xe=>(Ke,...Ye)=>({_$litType$:Xe,strings:Ke,values:Ye}),y$1=g$2(1),x$4=Symbol.for("lit-noChange"),b$2=Symbol.for("lit-nothing"),T=new WeakMap,A$2=h$1.createTreeWalker(h$1,129,null,!1),E=(Xe,Ke)=>{const Ye=Xe.length-1,Je=[];let tt,st=Ke===2?"<svg>":"",rt=v$1;for(let ot=0;ot<Ye;ot++){const at=Xe[ot];let lt,ut,ht=-1,pt=0;for(;pt<at.length&&(rt.lastIndex=pt,ut=rt.exec(at),ut!==null);)pt=rt.lastIndex,rt===v$1?ut[1]==="!--"?rt=a$1:ut[1]!==void 0?rt=f$1:ut[2]!==void 0?($.test(ut[2])&&(tt=RegExp("</"+ut[2],"g")),rt=_):ut[3]!==void 0&&(rt=_):rt===_?ut[0]===">"?(rt=tt??v$1,ht=-1):ut[1]===void 0?ht=-2:(ht=rt.lastIndex-ut[2].length,lt=ut[1],rt=ut[3]===void 0?_:ut[3]==='"'?p$3:m$3):rt===p$3||rt===m$3?rt=_:rt===a$1||rt===f$1?rt=v$1:(rt=_,tt=void 0);const ft=rt===_&&Xe[ot+1].startsWith("/>")?" ":"";st+=rt===v$1?at+l$2:ht>=0?(Je.push(lt),at.slice(0,ht)+"$lit$"+at.slice(ht)+o$2+ft):at+o$2+(ht===-2?(Je.push(void 0),ot):ft)}const it=st+(Xe[Ye]||"<?>")+(Ke===2?"</svg>":"");if(!Array.isArray(Xe)||!Xe.hasOwnProperty("raw"))throw Error("invalid template strings array");return[e$1!==void 0?e$1.createHTML(it):it,Je]};let C$1=class Fu{constructor({strings:Ke,_$litType$:Ye},Je){let tt;this.parts=[];let st=0,rt=0;const it=Ke.length-1,ot=this.parts,[at,lt]=E(Ke,Ye);if(this.el=Fu.createElement(at,Je),A$2.currentNode=this.el.content,Ye===2){const ut=this.el.content,ht=ut.firstChild;ht.remove(),ut.append(...ht.childNodes)}for(;(tt=A$2.nextNode())!==null&&ot.length<it;){if(tt.nodeType===1){if(tt.hasAttributes()){const ut=[];for(const ht of tt.getAttributeNames())if(ht.endsWith("$lit$")||ht.startsWith(o$2)){const pt=lt[rt++];if(ut.push(ht),pt!==void 0){const ft=tt.getAttribute(pt.toLowerCase()+"$lit$").split(o$2),xt=/([.?@])?(.*)/.exec(pt);ot.push({type:1,index:st,name:xt[2],strings:ft,ctor:xt[1]==="."?M$1:xt[1]==="?"?k$1:xt[1]==="@"?H:S})}else ot.push({type:6,index:st})}for(const ht of ut)tt.removeAttribute(ht)}if($.test(tt.tagName)){const ut=tt.textContent.split(o$2),ht=ut.length-1;if(ht>0){tt.textContent=s$2?s$2.emptyScript:"";for(let pt=0;pt<ht;pt++)tt.append(ut[pt],r$2()),A$2.nextNode(),ot.push({type:2,index:++st});tt.append(ut[ht],r$2())}}}else if(tt.nodeType===8)if(tt.data===n$3)ot.push({type:2,index:st});else{let ut=-1;for(;(ut=tt.data.indexOf(o$2,ut+1))!==-1;)ot.push({type:7,index:st}),ut+=o$2.length-1}st++}}static createElement(Ke,Ye){const Je=h$1.createElement("template");return Je.innerHTML=Ke,Je}};function P(Xe,Ke,Ye=Xe,Je){var tt,st,rt,it;if(Ke===x$4)return Ke;let ot=Je!==void 0?(tt=Ye._$Co)===null||tt===void 0?void 0:tt[Je]:Ye._$Cl;const at=d$1(Ke)?void 0:Ke._$litDirective$;return(ot==null?void 0:ot.constructor)!==at&&((st=ot==null?void 0:ot._$AO)===null||st===void 0||st.call(ot,!1),at===void 0?ot=void 0:(ot=new at(Xe),ot._$AT(Xe,Ye,Je)),Je!==void 0?((rt=(it=Ye)._$Co)!==null&&rt!==void 0?rt:it._$Co=[])[Je]=ot:Ye._$Cl=ot),ot!==void 0&&(Ke=P(Xe,ot._$AS(Xe,Ke.values),ot,Je)),Ke}class V{constructor(Ke,Ye){this.u=[],this._$AN=void 0,this._$AD=Ke,this._$AM=Ye}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(Ke){var Ye;const{el:{content:Je},parts:tt}=this._$AD,st=((Ye=Ke==null?void 0:Ke.creationScope)!==null&&Ye!==void 0?Ye:h$1).importNode(Je,!0);A$2.currentNode=st;let rt=A$2.nextNode(),it=0,ot=0,at=tt[0];for(;at!==void 0;){if(it===at.index){let lt;at.type===2?lt=new N(rt,rt.nextSibling,this,Ke):at.type===1?lt=new at.ctor(rt,at.name,at.strings,this,Ke):at.type===6&&(lt=new I$1(rt,this,Ke)),this.u.push(lt),at=tt[++ot]}it!==(at==null?void 0:at.index)&&(rt=A$2.nextNode(),it++)}return st}p(Ke){let Ye=0;for(const Je of this.u)Je!==void 0&&(Je.strings!==void 0?(Je._$AI(Ke,Je,Ye),Ye+=Je.strings.length-2):Je._$AI(Ke[Ye])),Ye++}}class N{constructor(Ke,Ye,Je,tt){var st;this.type=2,this._$AH=b$2,this._$AN=void 0,this._$AA=Ke,this._$AB=Ye,this._$AM=Je,this.options=tt,this._$Cm=(st=tt==null?void 0:tt.isConnected)===null||st===void 0||st}get _$AU(){var Ke,Ye;return(Ye=(Ke=this._$AM)===null||Ke===void 0?void 0:Ke._$AU)!==null&&Ye!==void 0?Ye:this._$Cm}get parentNode(){let Ke=this._$AA.parentNode;const Ye=this._$AM;return Ye!==void 0&&Ke.nodeType===11&&(Ke=Ye.parentNode),Ke}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(Ke,Ye=this){Ke=P(this,Ke,Ye),d$1(Ke)?Ke===b$2||Ke==null||Ke===""?(this._$AH!==b$2&&this._$AR(),this._$AH=b$2):Ke!==this._$AH&&Ke!==x$4&&this.g(Ke):Ke._$litType$!==void 0?this.$(Ke):Ke.nodeType!==void 0?this.T(Ke):c$3(Ke)?this.k(Ke):this.g(Ke)}O(Ke,Ye=this._$AB){return this._$AA.parentNode.insertBefore(Ke,Ye)}T(Ke){this._$AH!==Ke&&(this._$AR(),this._$AH=this.O(Ke))}g(Ke){this._$AH!==b$2&&d$1(this._$AH)?this._$AA.nextSibling.data=Ke:this.T(h$1.createTextNode(Ke)),this._$AH=Ke}$(Ke){var Ye;const{values:Je,_$litType$:tt}=Ke,st=typeof tt=="number"?this._$AC(Ke):(tt.el===void 0&&(tt.el=C$1.createElement(tt.h,this.options)),tt);if(((Ye=this._$AH)===null||Ye===void 0?void 0:Ye._$AD)===st)this._$AH.p(Je);else{const rt=new V(st,this),it=rt.v(this.options);rt.p(Je),this.T(it),this._$AH=rt}}_$AC(Ke){let Ye=T.get(Ke.strings);return Ye===void 0&&T.set(Ke.strings,Ye=new C$1(Ke)),Ye}k(Ke){u(this._$AH)||(this._$AH=[],this._$AR());const Ye=this._$AH;let Je,tt=0;for(const st of Ke)tt===Ye.length?Ye.push(Je=new N(this.O(r$2()),this.O(r$2()),this,this.options)):Je=Ye[tt],Je._$AI(st),tt++;tt<Ye.length&&(this._$AR(Je&&Je._$AB.nextSibling,tt),Ye.length=tt)}_$AR(Ke=this._$AA.nextSibling,Ye){var Je;for((Je=this._$AP)===null||Je===void 0||Je.call(this,!1,!0,Ye);Ke&&Ke!==this._$AB;){const tt=Ke.nextSibling;Ke.remove(),Ke=tt}}setConnected(Ke){var Ye;this._$AM===void 0&&(this._$Cm=Ke,(Ye=this._$AP)===null||Ye===void 0||Ye.call(this,Ke))}}class S{constructor(Ke,Ye,Je,tt,st){this.type=1,this._$AH=b$2,this._$AN=void 0,this.element=Ke,this.name=Ye,this._$AM=tt,this.options=st,Je.length>2||Je[0]!==""||Je[1]!==""?(this._$AH=Array(Je.length-1).fill(new String),this.strings=Je):this._$AH=b$2}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(Ke,Ye=this,Je,tt){const st=this.strings;let rt=!1;if(st===void 0)Ke=P(this,Ke,Ye,0),rt=!d$1(Ke)||Ke!==this._$AH&&Ke!==x$4,rt&&(this._$AH=Ke);else{const it=Ke;let ot,at;for(Ke=st[0],ot=0;ot<st.length-1;ot++)at=P(this,it[Je+ot],Ye,ot),at===x$4&&(at=this._$AH[ot]),rt||(rt=!d$1(at)||at!==this._$AH[ot]),at===b$2?Ke=b$2:Ke!==b$2&&(Ke+=(at??"")+st[ot+1]),this._$AH[ot]=at}rt&&!tt&&this.j(Ke)}j(Ke){Ke===b$2?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,Ke??"")}}let M$1=class extends S{constructor(){super(...arguments),this.type=3}j(Ke){this.element[this.name]=Ke===b$2?void 0:Ke}};const R=s$2?s$2.emptyScript:"";let k$1=class extends S{constructor(){super(...arguments),this.type=4}j(Ke){Ke&&Ke!==b$2?this.element.setAttribute(this.name,R):this.element.removeAttribute(this.name)}};class H extends S{constructor(Ke,Ye,Je,tt,st){super(Ke,Ye,Je,tt,st),this.type=5}_$AI(Ke,Ye=this){var Je;if((Ke=(Je=P(this,Ke,Ye,0))!==null&&Je!==void 0?Je:b$2)===x$4)return;const tt=this._$AH,st=Ke===b$2&&tt!==b$2||Ke.capture!==tt.capture||Ke.once!==tt.once||Ke.passive!==tt.passive,rt=Ke!==b$2&&(tt===b$2||st);st&&this.element.removeEventListener(this.name,this,tt),rt&&this.element.addEventListener(this.name,this,Ke),this._$AH=Ke}handleEvent(Ke){var Ye,Je;typeof this._$AH=="function"?this._$AH.call((Je=(Ye=this.options)===null||Ye===void 0?void 0:Ye.host)!==null&&Je!==void 0?Je:this.element,Ke):this._$AH.handleEvent(Ke)}}let I$1=class{constructor(Ke,Ye,Je){this.element=Ke,this.type=6,this._$AN=void 0,this._$AM=Ye,this.options=Je}get _$AU(){return this._$AM._$AU}_$AI(Ke){P(this,Ke)}};const z$1=i$3.litHtmlPolyfillSupport;z$1==null||z$1(C$1,N),((t$2=i$3.litHtmlVersions)!==null&&t$2!==void 0?t$2:i$3.litHtmlVersions=[]).push("2.6.1");const Z=(Xe,Ke,Ye)=>{var Je,tt;const st=(Je=Ye==null?void 0:Ye.renderBefore)!==null&&Je!==void 0?Je:Ke;let rt=st._$litPart$;if(rt===void 0){const it=(tt=Ye==null?void 0:Ye.renderBefore)!==null&&tt!==void 0?tt:null;st._$litPart$=rt=new N(Ke.insertBefore(r$2(),it),it,void 0,Ye??{})}return rt._$AI(Xe),rt};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var l$1,o$1;let s$1=class extends d$2{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var Ke,Ye;const Je=super.createRenderRoot();return(Ke=(Ye=this.renderOptions).renderBefore)!==null&&Ke!==void 0||(Ye.renderBefore=Je.firstChild),Je}update(Ke){const Ye=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(Ke),this._$Do=Z(Ye,this.renderRoot,this.renderOptions)}connectedCallback(){var Ke;super.connectedCallback(),(Ke=this._$Do)===null||Ke===void 0||Ke.setConnected(!0)}disconnectedCallback(){var Ke;super.disconnectedCallback(),(Ke=this._$Do)===null||Ke===void 0||Ke.setConnected(!1)}render(){return x$4}};s$1.finalized=!0,s$1._$litElement$=!0,(l$1=globalThis.litElementHydrateSupport)===null||l$1===void 0||l$1.call(globalThis,{LitElement:s$1});const n$2=globalThis.litElementPolyfillSupport;n$2==null||n$2({LitElement:s$1});((o$1=globalThis.litElementVersions)!==null&&o$1!==void 0?o$1:globalThis.litElementVersions=[]).push("3.2.2");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HAS_WEBXR_DEVICE_API=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,HAS_WEBXR_HIT_TEST_API=HAS_WEBXR_DEVICE_API&&self.XRSession.prototype.requestHitTestSource!=null,HAS_RESIZE_OBSERVER=self.ResizeObserver!=null,HAS_INTERSECTION_OBSERVER=self.IntersectionObserver!=null,IS_WEBXR_AR_CANDIDATE=HAS_WEBXR_HIT_TEST_API;(()=>{const Xe=navigator.userAgent||navigator.vendor||self.opera;let Ke=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Xe)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Xe.substr(0,4)))&&(Ke=!0),Ke})();const IS_ANDROID=/android/i.test(navigator.userAgent),IS_IOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,IS_FIREFOX=/firefox/i.test(navigator.userAgent),IS_OCULUS=/OculusBrowser/.test(navigator.userAgent),IS_SCENEVIEWER_CANDIDATE=IS_ANDROID&&!IS_FIREFOX&&!IS_OCULUS,IS_WKWEBVIEW=!!(window.webkit&&window.webkit.messageHandlers),IS_AR_QUICKLOOK_CANDIDATE=(()=>{if(IS_IOS){if(IS_WKWEBVIEW)return!!/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent);{const Xe=document.createElement("a");return!!(Xe.relList&&Xe.relList.supports&&Xe.relList.supports("ar"))}}else return!1})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const deserializeUrl=Xe=>Xe&&Xe!=="null"?toFullUrl(Xe):null,assertIsArCandidate=()=>{if(IS_WEBXR_AR_CANDIDATE)return;const Xe=[];throw HAS_WEBXR_DEVICE_API||Xe.push("WebXR Device API"),HAS_WEBXR_HIT_TEST_API||Xe.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${Xe.join(", ")}`)},toFullUrl=Xe=>new URL(Xe,window.location.toString()).toString(),throttle=(Xe,Ke)=>{let Ye=null;const Je=(...tt)=>{Ye==null&&(Xe(...tt),Ye=self.setTimeout(()=>Ye=null,Ke))};return Je.flush=()=>{Ye!=null&&(self.clearTimeout(Ye),Ye=null)},Je},debounce$1=(Xe,Ke)=>{let Ye=null;return(...Je)=>{Ye!=null&&self.clearTimeout(Ye),Ye=self.setTimeout(()=>{Ye=null,Xe(...Je)},Ke)}},clamp$2=(Xe,Ke,Ye)=>Math.max(Ke,Math.min(Ye,Xe)),CAPPED_DEVICE_PIXEL_RATIO=1,resolveDpr=(()=>{const Xe=(()=>{var Ke;if(!((Ke=document.documentElement.getAttribute("itemtype"))===null||Ke===void 0)&&Ke.includes("schema.org/SearchResultsPage"))return!0;const Ye=document.head!=null?Array.from(document.head.querySelectorAll("meta")):[];for(const Je of Ye)if(Je.name==="viewport")return!0;return!1})();return Xe||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),()=>Xe?window.devicePixelRatio:CAPPED_DEVICE_PIXEL_RATIO})(),isDebugMode=(()=>{const Xe="model-viewer-debug-mode",Ke=new RegExp(`[?&]${Xe}(&|$)`);return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(Ke)})(),timePasses=(Xe=0)=>new Promise(Ke=>setTimeout(Ke,Xe)),waitForEvent=(Xe,Ke,Ye=null)=>new Promise(Je=>{function tt(st){(!Ye||Ye(st))&&(Je(st),Xe.removeEventListener(Ke,tt))}Xe.addEventListener(Ke,tt)});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$7=function(Xe,Ke,Ye,Je){var tt=arguments.length,st=tt<3?Ke:Je===null?Je=Object.getOwnPropertyDescriptor(Ke,Ye):Je,rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")st=Reflect.decorate(Xe,Ke,Ye,Je);else for(var it=Xe.length-1;it>=0;it--)(rt=Xe[it])&&(st=(tt<3?rt(st):tt>3?rt(Ke,Ye,st):rt(Ke,Ye))||st);return tt>3&&st&&Object.defineProperty(Ke,Ye,st),st};const BASE_OPACITY=.5,DEFAULT_SHADOW_INTENSITY=0,DEFAULT_SHADOW_SOFTNESS=1,DEFAULT_EXPOSURE=1,$currentEnvironmentMap=Symbol("currentEnvironmentMap"),$currentBackground=Symbol("currentBackground"),$updateEnvironment=Symbol("updateEnvironment"),$cancelEnvironmentUpdate=Symbol("cancelEnvironmentUpdate"),EnvironmentMixin=Xe=>{var Ke,Ye,Je;class tt extends Xe{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=DEFAULT_SHADOW_INTENSITY,this.shadowSoftness=DEFAULT_SHADOW_SOFTNESS,this.exposure=DEFAULT_EXPOSURE,this[Ke]=null,this[Ye]=null,this[Je]=null}updated(rt){super.updated(rt),rt.has("shadowIntensity")&&(this[$scene].setShadowIntensity(this.shadowIntensity*BASE_OPACITY),this[$needsRender]()),rt.has("shadowSoftness")&&(this[$scene].setShadowSoftness(this.shadowSoftness),this[$needsRender]()),rt.has("exposure")&&(this[$scene].exposure=this.exposure,this[$needsRender]()),(rt.has("environmentImage")||rt.has("skyboxImage"))&&this[$shouldAttemptPreload]()&&this[$updateEnvironment]()}hasBakedShadow(){return this[$scene].bakedShadows.size>0}async[(Ke=$currentEnvironmentMap,Ye=$currentBackground,Je=$cancelEnvironmentUpdate,$updateEnvironment)](){const{skyboxImage:rt,environmentImage:it}=this;this[$cancelEnvironmentUpdate]!=null&&(this[$cancelEnvironmentUpdate](),this[$cancelEnvironmentUpdate]=null);const{textureUtils:ot}=this[$renderer];if(ot==null)return;const at=this[$progressTracker].beginActivity();try{const{environmentMap:lt,skybox:ut}=await ot.generateEnvironmentMapAndSkybox(deserializeUrl(rt),it,ht=>at(clamp$2(ht,0,1)));this[$currentEnvironmentMap]!==lt&&(this[$currentEnvironmentMap]=lt,this.dispatchEvent(new CustomEvent("environment-change"))),ut!=null?this[$currentBackground]=ut.name===lt.name?lt:ut:this[$currentBackground]=null,this[$scene].setEnvironmentAndSkybox(this[$currentEnvironmentMap],this[$currentBackground]),this[$scene].dispatchEvent({type:"envmap-update"})}catch(lt){if(lt instanceof Error)throw this[$scene].setEnvironmentAndSkybox(null,null),lt}finally{at(1)}}}return __decorate$7([e$4({type:String,attribute:"environment-image"})],tt.prototype,"environmentImage",void 0),__decorate$7([e$4({type:String,attribute:"skybox-image"})],tt.prototype,"skyboxImage",void 0),__decorate$7([e$4({type:Number,attribute:"shadow-intensity"})],tt.prototype,"shadowIntensity",void 0),__decorate$7([e$4({type:Number,attribute:"shadow-softness"})],tt.prototype,"shadowSoftness",void 0),__decorate$7([e$4({type:Number})],tt.prototype,"exposure",void 0),tt};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CloseIcon=y$1`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ControlsPrompt=y$1`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ARGlyph=y$1`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const templateResult=y$1`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

/* NOTE: This rule set is our integration surface area with the
 * :focus-visible polyfill.
 *
 * @see https://github.com/WICG/focus-visible/pull/196 */
:host([data-js-focus-visible]:focus:not(.focus-visible)),
:host([data-js-focus-visible]) :focus:not(.focus-visible) {
  outline: none;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          aria-label="View in your space">
        ${ARGlyph}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${ControlsPrompt}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${CloseIcon}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,makeTemplate=Xe=>{Z(templateResult,Xe)},_taskCache$1=new WeakMap;class DRACOLoader extends Loader{constructor(Ke){super(Ke),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(Ke){return this.decoderPath=Ke,this}setDecoderConfig(Ke){return this.decoderConfig=Ke,this}setWorkerLimit(Ke){return this.workerLimit=Ke,this}load(Ke,Ye,Je,tt){const st=new FileLoader(this.manager);st.setPath(this.path),st.setResponseType("arraybuffer"),st.setRequestHeader(this.requestHeader),st.setWithCredentials(this.withCredentials),st.load(Ke,rt=>{this.decodeDracoFile(rt,Ye).catch(tt)},Je,tt)}decodeDracoFile(Ke,Ye,Je,tt){const st={attributeIDs:Je||this.defaultAttributeIDs,attributeTypes:tt||this.defaultAttributeTypes,useUniqueIDs:!!Je};return this.decodeGeometry(Ke,st).then(Ye)}decodeGeometry(Ke,Ye){const Je=JSON.stringify(Ye);if(_taskCache$1.has(Ke)){const ot=_taskCache$1.get(Ke);if(ot.key===Je)return ot.promise;if(Ke.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let tt;const st=this.workerNextTaskID++,rt=Ke.byteLength,it=this._getWorker(st,rt).then(ot=>(tt=ot,new Promise((at,lt)=>{tt._callbacks[st]={resolve:at,reject:lt},tt.postMessage({type:"decode",id:st,taskConfig:Ye,buffer:Ke},[Ke])}))).then(ot=>this._createGeometry(ot.geometry));return it.catch(()=>!0).then(()=>{tt&&st&&this._releaseTask(tt,st)}),_taskCache$1.set(Ke,{key:Je,promise:it}),it}_createGeometry(Ke){const Ye=new BufferGeometry;Ke.index&&Ye.setIndex(new BufferAttribute(Ke.index.array,1));for(let Je=0;Je<Ke.attributes.length;Je++){const tt=Ke.attributes[Je],st=tt.name,rt=tt.array,it=tt.itemSize;Ye.setAttribute(st,new BufferAttribute(rt,it))}return Ye}_loadLibrary(Ke,Ye){const Je=new FileLoader(this.manager);return Je.setPath(this.decoderPath),Je.setResponseType(Ye),Je.setWithCredentials(this.withCredentials),new Promise((tt,st)=>{Je.load(Ke,tt,void 0,st)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const Ke=typeof WebAssembly!="object"||this.decoderConfig.type==="js",Ye=[];return Ke?Ye.push(this._loadLibrary("draco_decoder.js","text")):(Ye.push(this._loadLibrary("draco_wasm_wrapper.js","text")),Ye.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(Ye).then(Je=>{const tt=Je[0];Ke||(this.decoderConfig.wasmBinary=Je[1]);const st=DRACOWorker.toString(),rt=["/* draco decoder */",tt,"","/* worker */",st.substring(st.indexOf("{")+1,st.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([rt]))}),this.decoderPending}_getWorker(Ke,Ye){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const tt=new Worker(this.workerSourceURL);tt._callbacks={},tt._taskCosts={},tt._taskLoad=0,tt.postMessage({type:"init",decoderConfig:this.decoderConfig}),tt.onmessage=function(st){const rt=st.data;switch(rt.type){case"decode":tt._callbacks[rt.id].resolve(rt);break;case"error":tt._callbacks[rt.id].reject(rt);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+rt.type+'"')}},this.workerPool.push(tt)}else this.workerPool.sort(function(tt,st){return tt._taskLoad>st._taskLoad?-1:1});const Je=this.workerPool[this.workerPool.length-1];return Je._taskCosts[Ke]=Ye,Je._taskLoad+=Ye,Je})}_releaseTask(Ke,Ye){Ke._taskLoad-=Ke._taskCosts[Ye],delete Ke._callbacks[Ye],delete Ke._taskCosts[Ye]}debug(){console.log("Task load: ",this.workerPool.map(Ke=>Ke._taskLoad))}dispose(){for(let Ke=0;Ke<this.workerPool.length;++Ke)this.workerPool[Ke].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function DRACOWorker(){let Xe,Ke;onmessage=function(rt){const it=rt.data;switch(it.type){case"init":Xe=it.decoderConfig,Ke=new Promise(function(lt){Xe.onModuleLoaded=function(ut){lt({draco:ut})},DracoDecoderModule(Xe)});break;case"decode":const ot=it.buffer,at=it.taskConfig;Ke.then(lt=>{const ut=lt.draco,ht=new ut.Decoder,pt=new ut.DecoderBuffer;pt.Init(new Int8Array(ot),ot.byteLength);try{const ft=Ye(ut,ht,pt,at),xt=ft.attributes.map(vt=>vt.array.buffer);ft.index&&xt.push(ft.index.array.buffer),self.postMessage({type:"decode",id:it.id,geometry:ft},xt)}catch(ft){console.error(ft),self.postMessage({type:"error",id:it.id,error:ft.message})}finally{ut.destroy(pt),ut.destroy(ht)}});break}};function Ye(rt,it,ot,at){const lt=at.attributeIDs,ut=at.attributeTypes;let ht,pt;const ft=it.GetEncodedGeometryType(ot);if(ft===rt.TRIANGULAR_MESH)ht=new rt.Mesh,pt=it.DecodeBufferToMesh(ot,ht);else if(ft===rt.POINT_CLOUD)ht=new rt.PointCloud,pt=it.DecodeBufferToPointCloud(ot,ht);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!pt.ok()||ht.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+pt.error_msg());const xt={index:null,attributes:[]};for(const vt in lt){const At=self[ut[vt]];let Et,wt;if(at.useUniqueIDs)wt=lt[vt],Et=it.GetAttributeByUniqueId(ht,wt);else{if(wt=it.GetAttributeId(ht,rt[lt[vt]]),wt===-1)continue;Et=it.GetAttribute(ht,wt)}xt.attributes.push(tt(rt,it,ht,vt,At,Et))}return ft===rt.TRIANGULAR_MESH&&(xt.index=Je(rt,it,ht)),rt.destroy(ht),xt}function Je(rt,it,ot){const lt=ot.num_faces()*3,ut=lt*4,ht=rt._malloc(ut);it.GetTrianglesUInt32Array(ot,ut,ht);const pt=new Uint32Array(rt.HEAPF32.buffer,ht,lt).slice();return rt._free(ht),{array:pt,itemSize:1}}function tt(rt,it,ot,at,lt,ut){const ht=ut.num_components(),ft=ot.num_points()*ht,xt=ft*lt.BYTES_PER_ELEMENT,vt=st(rt,lt),At=rt._malloc(xt);it.GetAttributeDataArrayForAllPoints(ot,ut,vt,xt,At);const Et=new lt(rt.HEAPF32.buffer,At,ft).slice();return rt._free(At),{name:at,array:Et,itemSize:ht}}function st(rt,it){switch(it){case Float32Array:return rt.DT_FLOAT32;case Int8Array:return rt.DT_INT8;case Int16Array:return rt.DT_INT16;case Int32Array:return rt.DT_INT32;case Uint8Array:return rt.DT_UINT8;case Uint16Array:return rt.DT_UINT16;case Uint32Array:return rt.DT_UINT32}}}function toTrianglesDrawMode(Xe,Ke){if(Ke===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),Xe;if(Ke===TriangleFanDrawMode||Ke===TriangleStripDrawMode){let Ye=Xe.getIndex();if(Ye===null){const rt=[],it=Xe.getAttribute("position");if(it!==void 0){for(let ot=0;ot<it.count;ot++)rt.push(ot);Xe.setIndex(rt),Ye=Xe.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),Xe}const Je=Ye.count-2,tt=[];if(Ke===TriangleFanDrawMode)for(let rt=1;rt<=Je;rt++)tt.push(Ye.getX(0)),tt.push(Ye.getX(rt)),tt.push(Ye.getX(rt+1));else for(let rt=0;rt<Je;rt++)rt%2===0?(tt.push(Ye.getX(rt)),tt.push(Ye.getX(rt+1)),tt.push(Ye.getX(rt+2))):(tt.push(Ye.getX(rt+2)),tt.push(Ye.getX(rt+1)),tt.push(Ye.getX(rt)));tt.length/3!==Je&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const st=Xe.clone();return st.setIndex(tt),st.clearGroups(),st}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",Ke),Xe}class GLTFLoader extends Loader{constructor(Ke){super(Ke),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(Ye){return new GLTFMaterialsClearcoatExtension$1(Ye)}),this.register(function(Ye){return new GLTFTextureBasisUExtension(Ye)}),this.register(function(Ye){return new GLTFTextureWebPExtension(Ye)}),this.register(function(Ye){return new GLTFMaterialsSheenExtension(Ye)}),this.register(function(Ye){return new GLTFMaterialsTransmissionExtension$1(Ye)}),this.register(function(Ye){return new GLTFMaterialsVolumeExtension$1(Ye)}),this.register(function(Ye){return new GLTFMaterialsIorExtension$1(Ye)}),this.register(function(Ye){return new GLTFMaterialsEmissiveStrengthExtension(Ye)}),this.register(function(Ye){return new GLTFMaterialsSpecularExtension$1(Ye)}),this.register(function(Ye){return new GLTFMaterialsIridescenceExtension$1(Ye)}),this.register(function(Ye){return new GLTFLightsExtension(Ye)}),this.register(function(Ye){return new GLTFMeshoptCompression(Ye)}),this.register(function(Ye){return new GLTFMeshGpuInstancing(Ye)})}load(Ke,Ye,Je,tt){const st=this;let rt;this.resourcePath!==""?rt=this.resourcePath:this.path!==""?rt=this.path:rt=LoaderUtils.extractUrlBase(Ke),this.manager.itemStart(Ke);const it=function(at){tt?tt(at):console.error(at),st.manager.itemError(Ke),st.manager.itemEnd(Ke)},ot=new FileLoader(this.manager);ot.setPath(this.path),ot.setResponseType("arraybuffer"),ot.setRequestHeader(this.requestHeader),ot.setWithCredentials(this.withCredentials),ot.load(Ke,function(at){try{st.parse(at,rt,function(lt){Ye(lt),st.manager.itemEnd(Ke)},it)}catch(lt){it(lt)}},Je,it)}setDRACOLoader(Ke){return this.dracoLoader=Ke,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(Ke){return this.ktx2Loader=Ke,this}setMeshoptDecoder(Ke){return this.meshoptDecoder=Ke,this}register(Ke){return this.pluginCallbacks.indexOf(Ke)===-1&&this.pluginCallbacks.push(Ke),this}unregister(Ke){return this.pluginCallbacks.indexOf(Ke)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(Ke),1),this}parse(Ke,Ye,Je,tt){let st;const rt={},it={},ot=new TextDecoder;if(typeof Ke=="string")st=JSON.parse(Ke);else if(Ke instanceof ArrayBuffer)if(ot.decode(new Uint8Array(Ke,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{rt[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(Ke)}catch(ut){tt&&tt(ut);return}st=JSON.parse(rt[EXTENSIONS.KHR_BINARY_GLTF].content)}else st=JSON.parse(ot.decode(Ke));else st=Ke;if(st.asset===void 0||st.asset.version[0]<2){tt&&tt(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const at=new GLTFParser(st,{path:Ye||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});at.fileLoader.setRequestHeader(this.requestHeader);for(let lt=0;lt<this.pluginCallbacks.length;lt++){const ut=this.pluginCallbacks[lt](at);it[ut.name]=ut,rt[ut.name]=!0}if(st.extensionsUsed)for(let lt=0;lt<st.extensionsUsed.length;++lt){const ut=st.extensionsUsed[lt],ht=st.extensionsRequired||[];switch(ut){case EXTENSIONS.KHR_MATERIALS_UNLIT:rt[ut]=new GLTFMaterialsUnlitExtension$1;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:rt[ut]=new GLTFDracoMeshCompressionExtension(st,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:rt[ut]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:rt[ut]=new GLTFMeshQuantizationExtension;break;default:ht.indexOf(ut)>=0&&it[ut]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+ut+'".')}}at.setExtensions(rt),at.setPlugins(it),at.parse(Je,tt)}parseAsync(Ke,Ye){const Je=this;return new Promise(function(tt,st){Je.parse(Ke,Ye,tt,st)})}}function GLTFRegistry(){let Xe={};return{get:function(Ke){return Xe[Ke]},add:function(Ke,Ye){Xe[Ke]=Ye},remove:function(Ke){delete Xe[Ke]},removeAll:function(){Xe={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(Ke){this.parser=Ke,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const Ke=this.parser,Ye=this.parser.json.nodes||[];for(let Je=0,tt=Ye.length;Je<tt;Je++){const st=Ye[Je];st.extensions&&st.extensions[this.name]&&st.extensions[this.name].light!==void 0&&Ke._addNodeRef(this.cache,st.extensions[this.name].light)}}_loadLight(Ke){const Ye=this.parser,Je="light:"+Ke;let tt=Ye.cache.get(Je);if(tt)return tt;const st=Ye.json,ot=((st.extensions&&st.extensions[this.name]||{}).lights||[])[Ke];let at;const lt=new Color(16777215);ot.color!==void 0&&lt.fromArray(ot.color);const ut=ot.range!==void 0?ot.range:0;switch(ot.type){case"directional":at=new DirectionalLight(lt),at.target.position.set(0,0,-1),at.add(at.target);break;case"point":at=new PointLight(lt),at.distance=ut;break;case"spot":at=new SpotLight(lt),at.distance=ut,ot.spot=ot.spot||{},ot.spot.innerConeAngle=ot.spot.innerConeAngle!==void 0?ot.spot.innerConeAngle:0,ot.spot.outerConeAngle=ot.spot.outerConeAngle!==void 0?ot.spot.outerConeAngle:Math.PI/4,at.angle=ot.spot.outerConeAngle,at.penumbra=1-ot.spot.innerConeAngle/ot.spot.outerConeAngle,at.target.position.set(0,0,-1),at.add(at.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+ot.type)}return at.position.set(0,0,0),at.decay=2,assignExtrasToUserData(at,ot),ot.intensity!==void 0&&(at.intensity=ot.intensity),at.name=Ye.createUniqueName(ot.name||"light_"+Ke),tt=Promise.resolve(at),Ye.cache.add(Je,tt),tt}getDependency(Ke,Ye){if(Ke==="light")return this._loadLight(Ye)}createNodeAttachment(Ke){const Ye=this,Je=this.parser,st=Je.json.nodes[Ke],it=(st.extensions&&st.extensions[this.name]||{}).light;return it===void 0?null:this._loadLight(it).then(function(ot){return Je._getNodeRef(Ye.cache,it,ot)})}}let GLTFMaterialsUnlitExtension$1=class{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(Ke,Ye,Je){const tt=[];Ke.color=new Color(1,1,1),Ke.opacity=1;const st=Ye.pbrMetallicRoughness;if(st){if(Array.isArray(st.baseColorFactor)){const rt=st.baseColorFactor;Ke.color.fromArray(rt),Ke.opacity=rt[3]}st.baseColorTexture!==void 0&&tt.push(Je.assignTexture(Ke,"map",st.baseColorTexture,sRGBEncoding))}return Promise.all(tt)}};class GLTFMaterialsEmissiveStrengthExtension{constructor(Ke){this.parser=Ke,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(Ke,Ye){const tt=this.parser.json.materials[Ke];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const st=tt.extensions[this.name].emissiveStrength;return st!==void 0&&(Ye.emissiveIntensity=st),Promise.resolve()}}let GLTFMaterialsClearcoatExtension$1=class{constructor(Ke){this.parser=Ke,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(Ke){const Je=this.parser.json.materials[Ke];return!Je.extensions||!Je.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(Ke,Ye){const Je=this.parser,tt=Je.json.materials[Ke];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const st=[],rt=tt.extensions[this.name];if(rt.clearcoatFactor!==void 0&&(Ye.clearcoat=rt.clearcoatFactor),rt.clearcoatTexture!==void 0&&st.push(Je.assignTexture(Ye,"clearcoatMap",rt.clearcoatTexture)),rt.clearcoatRoughnessFactor!==void 0&&(Ye.clearcoatRoughness=rt.clearcoatRoughnessFactor),rt.clearcoatRoughnessTexture!==void 0&&st.push(Je.assignTexture(Ye,"clearcoatRoughnessMap",rt.clearcoatRoughnessTexture)),rt.clearcoatNormalTexture!==void 0&&(st.push(Je.assignTexture(Ye,"clearcoatNormalMap",rt.clearcoatNormalTexture)),rt.clearcoatNormalTexture.scale!==void 0)){const it=rt.clearcoatNormalTexture.scale;Ye.clearcoatNormalScale=new Vector2(it,it)}return Promise.all(st)}},GLTFMaterialsIridescenceExtension$1=class{constructor(Ke){this.parser=Ke,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(Ke){const Je=this.parser.json.materials[Ke];return!Je.extensions||!Je.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(Ke,Ye){const Je=this.parser,tt=Je.json.materials[Ke];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const st=[],rt=tt.extensions[this.name];return rt.iridescenceFactor!==void 0&&(Ye.iridescence=rt.iridescenceFactor),rt.iridescenceTexture!==void 0&&st.push(Je.assignTexture(Ye,"iridescenceMap",rt.iridescenceTexture)),rt.iridescenceIor!==void 0&&(Ye.iridescenceIOR=rt.iridescenceIor),Ye.iridescenceThicknessRange===void 0&&(Ye.iridescenceThicknessRange=[100,400]),rt.iridescenceThicknessMinimum!==void 0&&(Ye.iridescenceThicknessRange[0]=rt.iridescenceThicknessMinimum),rt.iridescenceThicknessMaximum!==void 0&&(Ye.iridescenceThicknessRange[1]=rt.iridescenceThicknessMaximum),rt.iridescenceThicknessTexture!==void 0&&st.push(Je.assignTexture(Ye,"iridescenceThicknessMap",rt.iridescenceThicknessTexture)),Promise.all(st)}};class GLTFMaterialsSheenExtension{constructor(Ke){this.parser=Ke,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(Ke){const Je=this.parser.json.materials[Ke];return!Je.extensions||!Je.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(Ke,Ye){const Je=this.parser,tt=Je.json.materials[Ke];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const st=[];Ye.sheenColor=new Color(0,0,0),Ye.sheenRoughness=0,Ye.sheen=1;const rt=tt.extensions[this.name];return rt.sheenColorFactor!==void 0&&Ye.sheenColor.fromArray(rt.sheenColorFactor),rt.sheenRoughnessFactor!==void 0&&(Ye.sheenRoughness=rt.sheenRoughnessFactor),rt.sheenColorTexture!==void 0&&st.push(Je.assignTexture(Ye,"sheenColorMap",rt.sheenColorTexture,sRGBEncoding)),rt.sheenRoughnessTexture!==void 0&&st.push(Je.assignTexture(Ye,"sheenRoughnessMap",rt.sheenRoughnessTexture)),Promise.all(st)}}let GLTFMaterialsTransmissionExtension$1=class{constructor(Ke){this.parser=Ke,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(Ke){const Je=this.parser.json.materials[Ke];return!Je.extensions||!Je.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(Ke,Ye){const Je=this.parser,tt=Je.json.materials[Ke];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const st=[],rt=tt.extensions[this.name];return rt.transmissionFactor!==void 0&&(Ye.transmission=rt.transmissionFactor),rt.transmissionTexture!==void 0&&st.push(Je.assignTexture(Ye,"transmissionMap",rt.transmissionTexture)),Promise.all(st)}},GLTFMaterialsVolumeExtension$1=class{constructor(Ke){this.parser=Ke,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(Ke){const Je=this.parser.json.materials[Ke];return!Je.extensions||!Je.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(Ke,Ye){const Je=this.parser,tt=Je.json.materials[Ke];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const st=[],rt=tt.extensions[this.name];Ye.thickness=rt.thicknessFactor!==void 0?rt.thicknessFactor:0,rt.thicknessTexture!==void 0&&st.push(Je.assignTexture(Ye,"thicknessMap",rt.thicknessTexture)),Ye.attenuationDistance=rt.attenuationDistance||1/0;const it=rt.attenuationColor||[1,1,1];return Ye.attenuationColor=new Color(it[0],it[1],it[2]),Promise.all(st)}},GLTFMaterialsIorExtension$1=class{constructor(Ke){this.parser=Ke,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(Ke){const Je=this.parser.json.materials[Ke];return!Je.extensions||!Je.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(Ke,Ye){const tt=this.parser.json.materials[Ke];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const st=tt.extensions[this.name];return Ye.ior=st.ior!==void 0?st.ior:1.5,Promise.resolve()}},GLTFMaterialsSpecularExtension$1=class{constructor(Ke){this.parser=Ke,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(Ke){const Je=this.parser.json.materials[Ke];return!Je.extensions||!Je.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(Ke,Ye){const Je=this.parser,tt=Je.json.materials[Ke];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const st=[],rt=tt.extensions[this.name];Ye.specularIntensity=rt.specularFactor!==void 0?rt.specularFactor:1,rt.specularTexture!==void 0&&st.push(Je.assignTexture(Ye,"specularIntensityMap",rt.specularTexture));const it=rt.specularColorFactor||[1,1,1];return Ye.specularColor=new Color(it[0],it[1],it[2]),rt.specularColorTexture!==void 0&&st.push(Je.assignTexture(Ye,"specularColorMap",rt.specularColorTexture,sRGBEncoding)),Promise.all(st)}};class GLTFTextureBasisUExtension{constructor(Ke){this.parser=Ke,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(Ke){const Ye=this.parser,Je=Ye.json,tt=Je.textures[Ke];if(!tt.extensions||!tt.extensions[this.name])return null;const st=tt.extensions[this.name],rt=Ye.options.ktx2Loader;if(!rt){if(Je.extensionsRequired&&Je.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return Ye.loadTextureImage(Ke,st.source,rt)}}class GLTFTextureWebPExtension{constructor(Ke){this.parser=Ke,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(Ke){const Ye=this.name,Je=this.parser,tt=Je.json,st=tt.textures[Ke];if(!st.extensions||!st.extensions[Ye])return null;const rt=st.extensions[Ye],it=tt.images[rt.source];let ot=Je.textureLoader;if(it.uri){const at=Je.options.manager.getHandler(it.uri);at!==null&&(ot=at)}return this.detectSupport().then(function(at){if(at)return Je.loadTextureImage(Ke,rt.source,ot);if(tt.extensionsRequired&&tt.extensionsRequired.indexOf(Ye)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return Je.loadTexture(Ke)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(Ke){const Ye=new Image;Ye.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",Ye.onload=Ye.onerror=function(){Ke(Ye.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(Ke){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=Ke}loadBufferView(Ke){const Ye=this.parser.json,Je=Ye.bufferViews[Ke];if(Je.extensions&&Je.extensions[this.name]){const tt=Je.extensions[this.name],st=this.parser.getDependency("buffer",tt.buffer),rt=this.parser.options.meshoptDecoder;if(!rt||!rt.supported){if(Ye.extensionsRequired&&Ye.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return st.then(function(it){const ot=tt.byteOffset||0,at=tt.byteLength||0,lt=tt.count,ut=tt.byteStride,ht=new Uint8Array(it,ot,at);return rt.decodeGltfBufferAsync?rt.decodeGltfBufferAsync(lt,ut,ht,tt.mode,tt.filter).then(function(pt){return pt.buffer}):rt.ready.then(function(){const pt=new ArrayBuffer(lt*ut);return rt.decodeGltfBuffer(new Uint8Array(pt),lt,ut,ht,tt.mode,tt.filter),pt})})}else return null}}class GLTFMeshGpuInstancing{constructor(Ke){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=Ke}createNodeMesh(Ke){const Ye=this.parser.json,Je=Ye.nodes[Ke];if(!Je.extensions||!Je.extensions[this.name]||Je.mesh===void 0)return null;const tt=Ye.meshes[Je.mesh];for(const at of tt.primitives)if(at.mode!==WEBGL_CONSTANTS$1.TRIANGLES&&at.mode!==WEBGL_CONSTANTS$1.TRIANGLE_STRIP&&at.mode!==WEBGL_CONSTANTS$1.TRIANGLE_FAN&&at.mode!==void 0)return null;const rt=Je.extensions[this.name].attributes,it=[],ot={};for(const at in rt)it.push(this.parser.getDependency("accessor",rt[at]).then(lt=>(ot[at]=lt,ot[at])));return it.length<1?null:(it.push(this.parser.createNodeMesh(Ke)),Promise.all(it).then(at=>{const lt=at.pop(),ut=lt.isGroup?lt.children:[lt],ht=at[0].count,pt=[];for(const ft of ut){const xt=new Matrix4,vt=new Vector3,At=new Quaternion,Et=new Vector3(1,1,1),wt=new InstancedMesh(ft.geometry,ft.material,ht);for(let _t=0;_t<ht;_t++)ot.TRANSLATION&&vt.fromBufferAttribute(ot.TRANSLATION,_t),ot.ROTATION&&At.fromBufferAttribute(ot.ROTATION,_t),ot.SCALE&&Et.fromBufferAttribute(ot.SCALE,_t),wt.setMatrixAt(_t,xt.compose(vt,At,Et));for(const _t in ot)_t!=="TRANSLATION"&&_t!=="ROTATION"&&_t!=="SCALE"&&ft.geometry.setAttribute(_t,ot[_t]);Object3D.prototype.copy.call(wt,ft),wt.frustumCulled=!1,this.parser.assignFinalMaterial(wt),pt.push(wt)}return lt.isGroup?(lt.clear(),lt.add(...pt),lt):pt[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(Ke){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const Ye=new DataView(Ke,0,BINARY_EXTENSION_HEADER_LENGTH),Je=new TextDecoder;if(this.header={magic:Je.decode(new Uint8Array(Ke.slice(0,4))),version:Ye.getUint32(4,!0),length:Ye.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const tt=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,st=new DataView(Ke,BINARY_EXTENSION_HEADER_LENGTH);let rt=0;for(;rt<tt;){const it=st.getUint32(rt,!0);rt+=4;const ot=st.getUint32(rt,!0);if(rt+=4,ot===BINARY_EXTENSION_CHUNK_TYPES.JSON){const at=new Uint8Array(Ke,BINARY_EXTENSION_HEADER_LENGTH+rt,it);this.content=Je.decode(at)}else if(ot===BINARY_EXTENSION_CHUNK_TYPES.BIN){const at=BINARY_EXTENSION_HEADER_LENGTH+rt;this.body=Ke.slice(at,at+it)}rt+=it}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(Ke,Ye){if(!Ye)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=Ke,this.dracoLoader=Ye,this.dracoLoader.preload()}decodePrimitive(Ke,Ye){const Je=this.json,tt=this.dracoLoader,st=Ke.extensions[this.name].bufferView,rt=Ke.extensions[this.name].attributes,it={},ot={},at={};for(const lt in rt){const ut=ATTRIBUTES[lt]||lt.toLowerCase();it[ut]=rt[lt]}for(const lt in Ke.attributes){const ut=ATTRIBUTES[lt]||lt.toLowerCase();if(rt[lt]!==void 0){const ht=Je.accessors[Ke.attributes[lt]],pt=WEBGL_COMPONENT_TYPES[ht.componentType];at[ut]=pt.name,ot[ut]=ht.normalized===!0}}return Ye.getDependency("bufferView",st).then(function(lt){return new Promise(function(ut){tt.decodeDracoFile(lt,function(ht){for(const pt in ht.attributes){const ft=ht.attributes[pt],xt=ot[pt];xt!==void 0&&(ft.normalized=xt)}ut(ht)},it,at)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(Ke,Ye){return Ye.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),Ye.offset===void 0&&Ye.rotation===void 0&&Ye.scale===void 0||(Ke=Ke.clone(),Ye.offset!==void 0&&Ke.offset.fromArray(Ye.offset),Ye.rotation!==void 0&&(Ke.rotation=Ye.rotation),Ye.scale!==void 0&&Ke.repeat.fromArray(Ye.scale),Ke.needsUpdate=!0),Ke}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(Ke,Ye,Je,tt){super(Ke,Ye,Je,tt)}copySampleValue_(Ke){const Ye=this.resultBuffer,Je=this.sampleValues,tt=this.valueSize,st=Ke*tt*3+tt;for(let rt=0;rt!==tt;rt++)Ye[rt]=Je[st+rt];return Ye}interpolate_(Ke,Ye,Je,tt){const st=this.resultBuffer,rt=this.sampleValues,it=this.valueSize,ot=it*2,at=it*3,lt=tt-Ye,ut=(Je-Ye)/lt,ht=ut*ut,pt=ht*ut,ft=Ke*at,xt=ft-at,vt=-2*pt+3*ht,At=pt-ht,Et=1-vt,wt=At-ht+ut;for(let _t=0;_t!==it;_t++){const Ct=rt[xt+_t+it],Tt=rt[xt+_t+ot]*lt,St=rt[ft+_t+it],Rt=rt[ft+_t]*lt;st[_t]=Et*Ct+wt*Tt+vt*St+At*Rt}return st}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(Ke,Ye,Je,tt){const st=super.interpolate_(Ke,Ye,Je,tt);return _q.fromArray(st).normalize().toArray(st),st}}const WEBGL_CONSTANTS$1={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES$1={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(Xe){return Xe.DefaultMaterial===void 0&&(Xe.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),Xe.DefaultMaterial}function addUnknownExtensionsToUserData(Xe,Ke,Ye){for(const Je in Ye.extensions)Xe[Je]===void 0&&(Ke.userData.gltfExtensions=Ke.userData.gltfExtensions||{},Ke.userData.gltfExtensions[Je]=Ye.extensions[Je])}function assignExtrasToUserData(Xe,Ke){Ke.extras!==void 0&&(typeof Ke.extras=="object"?Object.assign(Xe.userData,Ke.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+Ke.extras))}function addMorphTargets(Xe,Ke,Ye){let Je=!1,tt=!1,st=!1;for(let at=0,lt=Ke.length;at<lt;at++){const ut=Ke[at];if(ut.POSITION!==void 0&&(Je=!0),ut.NORMAL!==void 0&&(tt=!0),ut.COLOR_0!==void 0&&(st=!0),Je&&tt&&st)break}if(!Je&&!tt&&!st)return Promise.resolve(Xe);const rt=[],it=[],ot=[];for(let at=0,lt=Ke.length;at<lt;at++){const ut=Ke[at];if(Je){const ht=ut.POSITION!==void 0?Ye.getDependency("accessor",ut.POSITION):Xe.attributes.position;rt.push(ht)}if(tt){const ht=ut.NORMAL!==void 0?Ye.getDependency("accessor",ut.NORMAL):Xe.attributes.normal;it.push(ht)}if(st){const ht=ut.COLOR_0!==void 0?Ye.getDependency("accessor",ut.COLOR_0):Xe.attributes.color;ot.push(ht)}}return Promise.all([Promise.all(rt),Promise.all(it),Promise.all(ot)]).then(function(at){const lt=at[0],ut=at[1],ht=at[2];return Je&&(Xe.morphAttributes.position=lt),tt&&(Xe.morphAttributes.normal=ut),st&&(Xe.morphAttributes.color=ht),Xe.morphTargetsRelative=!0,Xe})}function updateMorphTargets(Xe,Ke){if(Xe.updateMorphTargets(),Ke.weights!==void 0)for(let Ye=0,Je=Ke.weights.length;Ye<Je;Ye++)Xe.morphTargetInfluences[Ye]=Ke.weights[Ye];if(Ke.extras&&Array.isArray(Ke.extras.targetNames)){const Ye=Ke.extras.targetNames;if(Xe.morphTargetInfluences.length===Ye.length){Xe.morphTargetDictionary={};for(let Je=0,tt=Ye.length;Je<tt;Je++)Xe.morphTargetDictionary[Ye[Je]]=Je}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(Xe){const Ke=Xe.extensions&&Xe.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];let Ye;return Ke?Ye="draco:"+Ke.bufferView+":"+Ke.indices+":"+createAttributesKey(Ke.attributes):Ye=Xe.indices+":"+createAttributesKey(Xe.attributes)+":"+Xe.mode,Ye}function createAttributesKey(Xe){let Ke="";const Ye=Object.keys(Xe).sort();for(let Je=0,tt=Ye.length;Je<tt;Je++)Ke+=Ye[Je]+":"+Xe[Ye[Je]]+";";return Ke}function getNormalizedComponentScale(Xe){switch(Xe){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(Xe){return Xe.search(/\.jpe?g($|\?)/i)>0||Xe.search(/^data\:image\/jpeg/)===0?"image/jpeg":Xe.search(/\.webp($|\?)/i)>0||Xe.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(Ke={},Ye={}){this.json=Ke,this.extensions={},this.plugins={},this.options=Ye,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let Je=!1,tt=!1,st=-1;typeof navigator<"u"&&(Je=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,tt=navigator.userAgent.indexOf("Firefox")>-1,st=tt?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||Je||tt&&st<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(Ke){this.extensions=Ke}setPlugins(Ke){this.plugins=Ke}parse(Ke,Ye){const Je=this,tt=this.json,st=this.extensions;this.cache.removeAll(),this._invokeAll(function(rt){return rt._markDefs&&rt._markDefs()}),Promise.all(this._invokeAll(function(rt){return rt.beforeRoot&&rt.beforeRoot()})).then(function(){return Promise.all([Je.getDependencies("scene"),Je.getDependencies("animation"),Je.getDependencies("camera")])}).then(function(rt){const it={scene:rt[0][tt.scene||0],scenes:rt[0],animations:rt[1],cameras:rt[2],asset:tt.asset,parser:Je,userData:{}};addUnknownExtensionsToUserData(st,it,tt),assignExtrasToUserData(it,tt),Promise.all(Je._invokeAll(function(ot){return ot.afterRoot&&ot.afterRoot(it)})).then(function(){Ke(it)})}).catch(Ye)}_markDefs(){const Ke=this.json.nodes||[],Ye=this.json.skins||[],Je=this.json.meshes||[];for(let tt=0,st=Ye.length;tt<st;tt++){const rt=Ye[tt].joints;for(let it=0,ot=rt.length;it<ot;it++)Ke[rt[it]].isBone=!0}for(let tt=0,st=Ke.length;tt<st;tt++){const rt=Ke[tt];rt.mesh!==void 0&&(this._addNodeRef(this.meshCache,rt.mesh),rt.skin!==void 0&&(Je[rt.mesh].isSkinnedMesh=!0)),rt.camera!==void 0&&this._addNodeRef(this.cameraCache,rt.camera)}}_addNodeRef(Ke,Ye){Ye!==void 0&&(Ke.refs[Ye]===void 0&&(Ke.refs[Ye]=Ke.uses[Ye]=0),Ke.refs[Ye]++)}_getNodeRef(Ke,Ye,Je){if(Ke.refs[Ye]<=1)return Je;const tt=Je.clone(),st=(rt,it)=>{const ot=this.associations.get(rt);ot!=null&&this.associations.set(it,ot);for(const[at,lt]of rt.children.entries())st(lt,it.children[at])};return st(Je,tt),tt.name+="_instance_"+Ke.uses[Ye]++,tt}_invokeOne(Ke){const Ye=Object.values(this.plugins);Ye.push(this);for(let Je=0;Je<Ye.length;Je++){const tt=Ke(Ye[Je]);if(tt)return tt}return null}_invokeAll(Ke){const Ye=Object.values(this.plugins);Ye.unshift(this);const Je=[];for(let tt=0;tt<Ye.length;tt++){const st=Ke(Ye[tt]);st&&Je.push(st)}return Je}getDependency(Ke,Ye){const Je=Ke+":"+Ye;let tt=this.cache.get(Je);if(!tt){switch(Ke){case"scene":tt=this.loadScene(Ye);break;case"node":tt=this._invokeOne(function(st){return st.loadNode&&st.loadNode(Ye)});break;case"mesh":tt=this._invokeOne(function(st){return st.loadMesh&&st.loadMesh(Ye)});break;case"accessor":tt=this.loadAccessor(Ye);break;case"bufferView":tt=this._invokeOne(function(st){return st.loadBufferView&&st.loadBufferView(Ye)});break;case"buffer":tt=this.loadBuffer(Ye);break;case"material":tt=this._invokeOne(function(st){return st.loadMaterial&&st.loadMaterial(Ye)});break;case"texture":tt=this._invokeOne(function(st){return st.loadTexture&&st.loadTexture(Ye)});break;case"skin":tt=this.loadSkin(Ye);break;case"animation":tt=this._invokeOne(function(st){return st.loadAnimation&&st.loadAnimation(Ye)});break;case"camera":tt=this.loadCamera(Ye);break;default:if(tt=this._invokeOne(function(st){return st!=this&&st.getDependency&&st.getDependency(Ke,Ye)}),!tt)throw new Error("Unknown type: "+Ke);break}this.cache.add(Je,tt)}return tt}getDependencies(Ke){let Ye=this.cache.get(Ke);if(!Ye){const Je=this,tt=this.json[Ke+(Ke==="mesh"?"es":"s")]||[];Ye=Promise.all(tt.map(function(st,rt){return Je.getDependency(Ke,rt)})),this.cache.add(Ke,Ye)}return Ye}loadBuffer(Ke){const Ye=this.json.buffers[Ke],Je=this.fileLoader;if(Ye.type&&Ye.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+Ye.type+" buffer type is not supported.");if(Ye.uri===void 0&&Ke===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const tt=this.options;return new Promise(function(st,rt){Je.load(LoaderUtils.resolveURL(Ye.uri,tt.path),st,void 0,function(){rt(new Error('THREE.GLTFLoader: Failed to load buffer "'+Ye.uri+'".'))})})}loadBufferView(Ke){const Ye=this.json.bufferViews[Ke];return this.getDependency("buffer",Ye.buffer).then(function(Je){const tt=Ye.byteLength||0,st=Ye.byteOffset||0;return Je.slice(st,st+tt)})}loadAccessor(Ke){const Ye=this,Je=this.json,tt=this.json.accessors[Ke];if(tt.bufferView===void 0&&tt.sparse===void 0){const rt=WEBGL_TYPE_SIZES[tt.type],it=WEBGL_COMPONENT_TYPES[tt.componentType],ot=tt.normalized===!0,at=new it(tt.count*rt);return Promise.resolve(new BufferAttribute(at,rt,ot))}const st=[];return tt.bufferView!==void 0?st.push(this.getDependency("bufferView",tt.bufferView)):st.push(null),tt.sparse!==void 0&&(st.push(this.getDependency("bufferView",tt.sparse.indices.bufferView)),st.push(this.getDependency("bufferView",tt.sparse.values.bufferView))),Promise.all(st).then(function(rt){const it=rt[0],ot=WEBGL_TYPE_SIZES[tt.type],at=WEBGL_COMPONENT_TYPES[tt.componentType],lt=at.BYTES_PER_ELEMENT,ut=lt*ot,ht=tt.byteOffset||0,pt=tt.bufferView!==void 0?Je.bufferViews[tt.bufferView].byteStride:void 0,ft=tt.normalized===!0;let xt,vt;if(pt&&pt!==ut){const At=Math.floor(ht/pt),Et="InterleavedBuffer:"+tt.bufferView+":"+tt.componentType+":"+At+":"+tt.count;let wt=Ye.cache.get(Et);wt||(xt=new at(it,At*pt,tt.count*pt/lt),wt=new InterleavedBuffer(xt,pt/lt),Ye.cache.add(Et,wt)),vt=new InterleavedBufferAttribute(wt,ot,ht%pt/lt,ft)}else it===null?xt=new at(tt.count*ot):xt=new at(it,ht,tt.count*ot),vt=new BufferAttribute(xt,ot,ft);if(tt.sparse!==void 0){const At=WEBGL_TYPE_SIZES.SCALAR,Et=WEBGL_COMPONENT_TYPES[tt.sparse.indices.componentType],wt=tt.sparse.indices.byteOffset||0,_t=tt.sparse.values.byteOffset||0,Ct=new Et(rt[1],wt,tt.sparse.count*At),Tt=new at(rt[2],_t,tt.sparse.count*ot);it!==null&&(vt=new BufferAttribute(vt.array.slice(),vt.itemSize,vt.normalized));for(let St=0,Rt=Ct.length;St<Rt;St++){const Nt=Ct[St];if(vt.setX(Nt,Tt[St*ot]),ot>=2&&vt.setY(Nt,Tt[St*ot+1]),ot>=3&&vt.setZ(Nt,Tt[St*ot+2]),ot>=4&&vt.setW(Nt,Tt[St*ot+3]),ot>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return vt})}loadTexture(Ke){const Ye=this.json,Je=this.options,st=Ye.textures[Ke].source,rt=Ye.images[st];let it=this.textureLoader;if(rt.uri){const ot=Je.manager.getHandler(rt.uri);ot!==null&&(it=ot)}return this.loadTextureImage(Ke,st,it)}loadTextureImage(Ke,Ye,Je){const tt=this,st=this.json,rt=st.textures[Ke],it=st.images[Ye],ot=(it.uri||it.bufferView)+":"+rt.sampler;if(this.textureCache[ot])return this.textureCache[ot];const at=this.loadImageSource(Ye,Je).then(function(lt){lt.flipY=!1,lt.name=rt.name||it.name||"";const ht=(st.samplers||{})[rt.sampler]||{};return lt.magFilter=WEBGL_FILTERS[ht.magFilter]||LinearFilter,lt.minFilter=WEBGL_FILTERS[ht.minFilter]||LinearMipmapLinearFilter,lt.wrapS=WEBGL_WRAPPINGS[ht.wrapS]||RepeatWrapping,lt.wrapT=WEBGL_WRAPPINGS[ht.wrapT]||RepeatWrapping,tt.associations.set(lt,{textures:Ke}),lt}).catch(function(){return null});return this.textureCache[ot]=at,at}loadImageSource(Ke,Ye){const Je=this,tt=this.json,st=this.options;if(this.sourceCache[Ke]!==void 0)return this.sourceCache[Ke].then(ut=>ut.clone());const rt=tt.images[Ke],it=self.URL||self.webkitURL;let ot=rt.uri||"",at=!1;if(rt.bufferView!==void 0)ot=Je.getDependency("bufferView",rt.bufferView).then(function(ut){at=!0;const ht=new Blob([ut],{type:rt.mimeType});return ot=it.createObjectURL(ht),ot});else if(rt.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+Ke+" is missing URI and bufferView");const lt=Promise.resolve(ot).then(function(ut){return new Promise(function(ht,pt){let ft=ht;Ye.isImageBitmapLoader===!0&&(ft=function(xt){const vt=new Texture$1(xt);vt.needsUpdate=!0,ht(vt)}),Ye.load(LoaderUtils.resolveURL(ut,st.path),ft,void 0,pt)})}).then(function(ut){return at===!0&&it.revokeObjectURL(ot),ut.userData.mimeType=rt.mimeType||getImageURIMimeType(rt.uri),ut}).catch(function(ut){throw console.error("THREE.GLTFLoader: Couldn't load texture",ot),ut});return this.sourceCache[Ke]=lt,lt}assignTexture(Ke,Ye,Je,tt){const st=this;return this.getDependency("texture",Je.index).then(function(rt){if(!rt)return null;if(Je.texCoord!==void 0&&Je.texCoord!=0&&!(Ye==="aoMap"&&Je.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+Je.texCoord+" for texture "+Ye+" not yet supported."),st.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const it=Je.extensions!==void 0?Je.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(it){const ot=st.associations.get(rt);rt=st.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(rt,it),st.associations.set(rt,ot)}}return tt!==void 0&&(rt.encoding=tt),Ke[Ye]=rt,rt})}assignFinalMaterial(Ke){const Ye=Ke.geometry;let Je=Ke.material;const tt=Ye.attributes.tangent===void 0,st=Ye.attributes.color!==void 0,rt=Ye.attributes.normal===void 0;if(Ke.isPoints){const it="PointsMaterial:"+Je.uuid;let ot=this.cache.get(it);ot||(ot=new PointsMaterial,Material$1.prototype.copy.call(ot,Je),ot.color.copy(Je.color),ot.map=Je.map,ot.sizeAttenuation=!1,this.cache.add(it,ot)),Je=ot}else if(Ke.isLine){const it="LineBasicMaterial:"+Je.uuid;let ot=this.cache.get(it);ot||(ot=new LineBasicMaterial,Material$1.prototype.copy.call(ot,Je),ot.color.copy(Je.color),this.cache.add(it,ot)),Je=ot}if(tt||st||rt){let it="ClonedMaterial:"+Je.uuid+":";tt&&(it+="derivative-tangents:"),st&&(it+="vertex-colors:"),rt&&(it+="flat-shading:");let ot=this.cache.get(it);ot||(ot=Je.clone(),st&&(ot.vertexColors=!0),rt&&(ot.flatShading=!0),tt&&(ot.normalScale&&(ot.normalScale.y*=-1),ot.clearcoatNormalScale&&(ot.clearcoatNormalScale.y*=-1)),this.cache.add(it,ot),this.associations.set(ot,this.associations.get(Je))),Je=ot}Je.aoMap&&Ye.attributes.uv2===void 0&&Ye.attributes.uv!==void 0&&Ye.setAttribute("uv2",Ye.attributes.uv),Ke.material=Je}getMaterialType(){return MeshStandardMaterial}loadMaterial(Ke){const Ye=this,Je=this.json,tt=this.extensions,st=Je.materials[Ke];let rt;const it={},ot=st.extensions||{},at=[];if(ot[EXTENSIONS.KHR_MATERIALS_UNLIT]){const ut=tt[EXTENSIONS.KHR_MATERIALS_UNLIT];rt=ut.getMaterialType(),at.push(ut.extendParams(it,st,Ye))}else{const ut=st.pbrMetallicRoughness||{};if(it.color=new Color(1,1,1),it.opacity=1,Array.isArray(ut.baseColorFactor)){const ht=ut.baseColorFactor;it.color.fromArray(ht),it.opacity=ht[3]}ut.baseColorTexture!==void 0&&at.push(Ye.assignTexture(it,"map",ut.baseColorTexture,sRGBEncoding)),it.metalness=ut.metallicFactor!==void 0?ut.metallicFactor:1,it.roughness=ut.roughnessFactor!==void 0?ut.roughnessFactor:1,ut.metallicRoughnessTexture!==void 0&&(at.push(Ye.assignTexture(it,"metalnessMap",ut.metallicRoughnessTexture)),at.push(Ye.assignTexture(it,"roughnessMap",ut.metallicRoughnessTexture))),rt=this._invokeOne(function(ht){return ht.getMaterialType&&ht.getMaterialType(Ke)}),at.push(Promise.all(this._invokeAll(function(ht){return ht.extendMaterialParams&&ht.extendMaterialParams(Ke,it)})))}st.doubleSided===!0&&(it.side=DoubleSide);const lt=st.alphaMode||ALPHA_MODES.OPAQUE;if(lt===ALPHA_MODES.BLEND?(it.transparent=!0,it.depthWrite=!1):(it.transparent=!1,lt===ALPHA_MODES.MASK&&(it.alphaTest=st.alphaCutoff!==void 0?st.alphaCutoff:.5)),st.normalTexture!==void 0&&rt!==MeshBasicMaterial&&(at.push(Ye.assignTexture(it,"normalMap",st.normalTexture)),it.normalScale=new Vector2(1,1),st.normalTexture.scale!==void 0)){const ut=st.normalTexture.scale;it.normalScale.set(ut,ut)}return st.occlusionTexture!==void 0&&rt!==MeshBasicMaterial&&(at.push(Ye.assignTexture(it,"aoMap",st.occlusionTexture)),st.occlusionTexture.strength!==void 0&&(it.aoMapIntensity=st.occlusionTexture.strength)),st.emissiveFactor!==void 0&&rt!==MeshBasicMaterial&&(it.emissive=new Color().fromArray(st.emissiveFactor)),st.emissiveTexture!==void 0&&rt!==MeshBasicMaterial&&at.push(Ye.assignTexture(it,"emissiveMap",st.emissiveTexture,sRGBEncoding)),Promise.all(at).then(function(){const ut=new rt(it);return st.name&&(ut.name=st.name),assignExtrasToUserData(ut,st),Ye.associations.set(ut,{materials:Ke}),st.extensions&&addUnknownExtensionsToUserData(tt,ut,st),ut})}createUniqueName(Ke){const Ye=PropertyBinding.sanitizeNodeName(Ke||"");let Je=Ye;for(let tt=1;this.nodeNamesUsed[Je];++tt)Je=Ye+"_"+tt;return this.nodeNamesUsed[Je]=!0,Je}loadGeometries(Ke){const Ye=this,Je=this.extensions,tt=this.primitiveCache;function st(it){return Je[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(it,Ye).then(function(ot){return addPrimitiveAttributes(ot,it,Ye)})}const rt=[];for(let it=0,ot=Ke.length;it<ot;it++){const at=Ke[it],lt=createPrimitiveKey(at),ut=tt[lt];if(ut)rt.push(ut.promise);else{let ht;at.extensions&&at.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?ht=st(at):ht=addPrimitiveAttributes(new BufferGeometry,at,Ye),tt[lt]={primitive:at,promise:ht},rt.push(ht)}}return Promise.all(rt)}loadMesh(Ke){const Ye=this,Je=this.json,tt=this.extensions,st=Je.meshes[Ke],rt=st.primitives,it=[];for(let ot=0,at=rt.length;ot<at;ot++){const lt=rt[ot].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",rt[ot].material);it.push(lt)}return it.push(Ye.loadGeometries(rt)),Promise.all(it).then(function(ot){const at=ot.slice(0,ot.length-1),lt=ot[ot.length-1],ut=[];for(let pt=0,ft=lt.length;pt<ft;pt++){const xt=lt[pt],vt=rt[pt];let At;const Et=at[pt];if(vt.mode===WEBGL_CONSTANTS$1.TRIANGLES||vt.mode===WEBGL_CONSTANTS$1.TRIANGLE_STRIP||vt.mode===WEBGL_CONSTANTS$1.TRIANGLE_FAN||vt.mode===void 0)At=st.isSkinnedMesh===!0?new SkinnedMesh(xt,Et):new Mesh(xt,Et),At.isSkinnedMesh===!0&&!At.geometry.attributes.skinWeight.normalized&&At.normalizeSkinWeights(),vt.mode===WEBGL_CONSTANTS$1.TRIANGLE_STRIP?At.geometry=toTrianglesDrawMode(At.geometry,TriangleStripDrawMode):vt.mode===WEBGL_CONSTANTS$1.TRIANGLE_FAN&&(At.geometry=toTrianglesDrawMode(At.geometry,TriangleFanDrawMode));else if(vt.mode===WEBGL_CONSTANTS$1.LINES)At=new LineSegments(xt,Et);else if(vt.mode===WEBGL_CONSTANTS$1.LINE_STRIP)At=new Line$1(xt,Et);else if(vt.mode===WEBGL_CONSTANTS$1.LINE_LOOP)At=new LineLoop(xt,Et);else if(vt.mode===WEBGL_CONSTANTS$1.POINTS)At=new Points(xt,Et);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+vt.mode);Object.keys(At.geometry.morphAttributes).length>0&&updateMorphTargets(At,st),At.name=Ye.createUniqueName(st.name||"mesh_"+Ke),assignExtrasToUserData(At,st),vt.extensions&&addUnknownExtensionsToUserData(tt,At,vt),Ye.assignFinalMaterial(At),ut.push(At)}for(let pt=0,ft=ut.length;pt<ft;pt++)Ye.associations.set(ut[pt],{meshes:Ke,primitives:pt});if(ut.length===1)return ut[0];const ht=new Group$1;Ye.associations.set(ht,{meshes:Ke});for(let pt=0,ft=ut.length;pt<ft;pt++)ht.add(ut[pt]);return ht})}loadCamera(Ke){let Ye;const Je=this.json.cameras[Ke],tt=Je[Je.type];if(!tt){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return Je.type==="perspective"?Ye=new PerspectiveCamera(MathUtils.radToDeg(tt.yfov),tt.aspectRatio||1,tt.znear||1,tt.zfar||2e6):Je.type==="orthographic"&&(Ye=new OrthographicCamera(-tt.xmag,tt.xmag,tt.ymag,-tt.ymag,tt.znear,tt.zfar)),Je.name&&(Ye.name=this.createUniqueName(Je.name)),assignExtrasToUserData(Ye,Je),Promise.resolve(Ye)}loadSkin(Ke){const Ye=this.json.skins[Ke],Je=[];for(let tt=0,st=Ye.joints.length;tt<st;tt++)Je.push(this.getDependency("node",Ye.joints[tt]));return Ye.inverseBindMatrices!==void 0?Je.push(this.getDependency("accessor",Ye.inverseBindMatrices)):Je.push(null),Promise.all(Je).then(function(tt){const st=tt.pop(),rt=tt,it=[],ot=[];for(let at=0,lt=rt.length;at<lt;at++){const ut=rt[at];if(ut){it.push(ut);const ht=new Matrix4;st!==null&&ht.fromArray(st.array,at*16),ot.push(ht)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Ye.joints[at])}return new Skeleton(it,ot)})}loadAnimation(Ke){const Je=this.json.animations[Ke],tt=[],st=[],rt=[],it=[],ot=[];for(let at=0,lt=Je.channels.length;at<lt;at++){const ut=Je.channels[at],ht=Je.samplers[ut.sampler],pt=ut.target,ft=pt.node,xt=Je.parameters!==void 0?Je.parameters[ht.input]:ht.input,vt=Je.parameters!==void 0?Je.parameters[ht.output]:ht.output;tt.push(this.getDependency("node",ft)),st.push(this.getDependency("accessor",xt)),rt.push(this.getDependency("accessor",vt)),it.push(ht),ot.push(pt)}return Promise.all([Promise.all(tt),Promise.all(st),Promise.all(rt),Promise.all(it),Promise.all(ot)]).then(function(at){const lt=at[0],ut=at[1],ht=at[2],pt=at[3],ft=at[4],xt=[];for(let At=0,Et=lt.length;At<Et;At++){const wt=lt[At],_t=ut[At],Ct=ht[At],Tt=pt[At],St=ft[At];if(wt===void 0)continue;wt.updateMatrix();let Rt;switch(PATH_PROPERTIES$1[St.path]){case PATH_PROPERTIES$1.weights:Rt=NumberKeyframeTrack;break;case PATH_PROPERTIES$1.rotation:Rt=QuaternionKeyframeTrack;break;case PATH_PROPERTIES$1.position:case PATH_PROPERTIES$1.scale:default:Rt=VectorKeyframeTrack;break}const Nt=wt.name?wt.name:wt.uuid,Pt=Tt.interpolation!==void 0?INTERPOLATION[Tt.interpolation]:InterpolateLinear,Bt=[];PATH_PROPERTIES$1[St.path]===PATH_PROPERTIES$1.weights?wt.traverse(function(zt){zt.morphTargetInfluences&&Bt.push(zt.name?zt.name:zt.uuid)}):Bt.push(Nt);let Lt=Ct.array;if(Ct.normalized){const zt=getNormalizedComponentScale(Lt.constructor),Dt=new Float32Array(Lt.length);for(let Vt=0,Gt=Lt.length;Vt<Gt;Vt++)Dt[Vt]=Lt[Vt]*zt;Lt=Dt}for(let zt=0,Dt=Bt.length;zt<Dt;zt++){const Vt=new Rt(Bt[zt]+"."+PATH_PROPERTIES$1[St.path],_t.array,Lt,Pt);Tt.interpolation==="CUBICSPLINE"&&(Vt.createInterpolant=function(Qt){const jt=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new jt(this.times,this.values,this.getValueSize()/3,Qt)},Vt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),xt.push(Vt)}}const vt=Je.name?Je.name:"animation_"+Ke;return new AnimationClip(vt,void 0,xt)})}createNodeMesh(Ke){const Ye=this.json,Je=this,tt=Ye.nodes[Ke];return tt.mesh===void 0?null:Je.getDependency("mesh",tt.mesh).then(function(st){const rt=Je._getNodeRef(Je.meshCache,tt.mesh,st);return tt.weights!==void 0&&rt.traverse(function(it){if(it.isMesh)for(let ot=0,at=tt.weights.length;ot<at;ot++)it.morphTargetInfluences[ot]=tt.weights[ot]}),rt})}loadNode(Ke){const Ye=this.json,Je=this.extensions,tt=this,st=Ye.nodes[Ke],rt=st.name?tt.createUniqueName(st.name):"";return(function(){const it=[],ot=tt._invokeOne(function(ht){return ht.createNodeMesh&&ht.createNodeMesh(Ke)});ot&&it.push(ot),st.camera!==void 0&&it.push(tt.getDependency("camera",st.camera).then(function(ht){return tt._getNodeRef(tt.cameraCache,st.camera,ht)})),tt._invokeAll(function(ht){return ht.createNodeAttachment&&ht.createNodeAttachment(Ke)}).forEach(function(ht){it.push(ht)});const at=[],lt=st.children||[];for(let ht=0,pt=lt.length;ht<pt;ht++)at.push(tt.getDependency("node",lt[ht]));const ut=st.skin===void 0?Promise.resolve(null):tt.getDependency("skin",st.skin);return Promise.all([Promise.all(it),Promise.all(at),ut])})().then(function(it){const ot=it[0],at=it[1],lt=it[2];let ut;if(st.isBone===!0?ut=new Bone:ot.length>1?ut=new Group$1:ot.length===1?ut=ot[0]:ut=new Object3D,ut!==ot[0])for(let ht=0,pt=ot.length;ht<pt;ht++)ut.add(ot[ht]);if(st.name&&(ut.userData.name=st.name,ut.name=rt),assignExtrasToUserData(ut,st),st.extensions&&addUnknownExtensionsToUserData(Je,ut,st),st.matrix!==void 0){const ht=new Matrix4;ht.fromArray(st.matrix),ut.applyMatrix4(ht)}else st.translation!==void 0&&ut.position.fromArray(st.translation),st.rotation!==void 0&&ut.quaternion.fromArray(st.rotation),st.scale!==void 0&&ut.scale.fromArray(st.scale);tt.associations.has(ut)||tt.associations.set(ut,{}),tt.associations.get(ut).nodes=Ke,lt!==null&&ut.traverse(function(ht){ht.isSkinnedMesh&&ht.bind(lt,_identityMatrix)});for(let ht=0,pt=at.length;ht<pt;ht++)ut.add(at[ht]);return ut})}loadScene(Ke){const Ye=this.extensions,Je=this.json.scenes[Ke],tt=this,st=new Group$1;Je.name&&(st.name=tt.createUniqueName(Je.name)),assignExtrasToUserData(st,Je),Je.extensions&&addUnknownExtensionsToUserData(Ye,st,Je);const rt=Je.nodes||[],it=[];for(let ot=0,at=rt.length;ot<at;ot++)it.push(tt.getDependency("node",rt[ot]));return Promise.all(it).then(function(ot){for(let lt=0,ut=ot.length;lt<ut;lt++)st.add(ot[lt]);const at=lt=>{const ut=new Map;for(const[ht,pt]of tt.associations)(ht instanceof Material$1||ht instanceof Texture$1)&&ut.set(ht,pt);return lt.traverse(ht=>{const pt=tt.associations.get(ht);pt!=null&&ut.set(ht,pt)}),ut};return tt.associations=at(st),st})}}function computeBounds(Xe,Ke,Ye){const Je=Ke.attributes,tt=new Box3;if(Je.POSITION!==void 0){const it=Ye.json.accessors[Je.POSITION],ot=it.min,at=it.max;if(ot!==void 0&&at!==void 0){if(tt.set(new Vector3(ot[0],ot[1],ot[2]),new Vector3(at[0],at[1],at[2])),it.normalized){const lt=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[it.componentType]);tt.min.multiplyScalar(lt),tt.max.multiplyScalar(lt)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const st=Ke.targets;if(st!==void 0){const it=new Vector3,ot=new Vector3;for(let at=0,lt=st.length;at<lt;at++){const ut=st[at];if(ut.POSITION!==void 0){const ht=Ye.json.accessors[ut.POSITION],pt=ht.min,ft=ht.max;if(pt!==void 0&&ft!==void 0){if(ot.setX(Math.max(Math.abs(pt[0]),Math.abs(ft[0]))),ot.setY(Math.max(Math.abs(pt[1]),Math.abs(ft[1]))),ot.setZ(Math.max(Math.abs(pt[2]),Math.abs(ft[2]))),ht.normalized){const xt=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[ht.componentType]);ot.multiplyScalar(xt)}it.max(ot)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}tt.expandByVector(it)}Xe.boundingBox=tt;const rt=new Sphere;tt.getCenter(rt.center),rt.radius=tt.min.distanceTo(tt.max)/2,Xe.boundingSphere=rt}function addPrimitiveAttributes(Xe,Ke,Ye){const Je=Ke.attributes,tt=[];function st(rt,it){return Ye.getDependency("accessor",rt).then(function(ot){Xe.setAttribute(it,ot)})}for(const rt in Je){const it=ATTRIBUTES[rt]||rt.toLowerCase();it in Xe.attributes||tt.push(st(Je[rt],it))}if(Ke.indices!==void 0&&!Xe.index){const rt=Ye.getDependency("accessor",Ke.indices).then(function(it){Xe.setIndex(it)});tt.push(rt)}return assignExtrasToUserData(Xe,Ke),computeBounds(Xe,Ke,Ye),Promise.all(tt).then(function(){return Ke.targets!==void 0?addMorphTargets(Xe,Ke.targets,Ye):Xe})}class WorkerPool{constructor(Ke=4){this.pool=Ke,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(Ke){if(!this.workers[Ke]){const Ye=this.workerCreator();Ye.addEventListener("message",this._onMessage.bind(this,Ke)),this.workers[Ke]=Ye}}_getIdleWorker(){for(let Ke=0;Ke<this.pool;Ke++)if(!(this.workerStatus&1<<Ke))return Ke;return-1}_onMessage(Ke,Ye){const Je=this.workersResolve[Ke];if(Je&&Je(Ye),this.queue.length){const{resolve:tt,msg:st,transfer:rt}=this.queue.shift();this.workersResolve[Ke]=tt,this.workers[Ke].postMessage(st,rt)}else this.workerStatus^=1<<Ke}setWorkerCreator(Ke){this.workerCreator=Ke}setWorkerLimit(Ke){this.pool=Ke}postMessage(Ke,Ye){return new Promise(Je=>{const tt=this._getIdleWorker();tt!==-1?(this._initWorker(tt),this.workerStatus|=1<<tt,this.workersResolve[tt]=Je,this.workers[tt].postMessage(Ke,Ye)):this.queue.push({resolve:Je,msg:Ke,transfer:Ye})})}dispose(){this.workers.forEach(Ke=>Ke.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const t$1=0,n$1=2,p$2=1,x$3=2,nt=0,ct=9,gt=15,yt=16,dt=22,Ot=37,Ft=43,$t=76,se=83,pe=97,xe=100,de=103,Ae$1=109;class Si{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Ii{constructor(Ke,Ye,Je,tt){this._dataView=new DataView(Ke.buffer,Ke.byteOffset+Ye,Je),this._littleEndian=tt,this._offset=0}_nextUint8(){const Ke=this._dataView.getUint8(this._offset);return this._offset+=1,Ke}_nextUint16(){const Ke=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,Ke}_nextUint32(){const Ke=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,Ke}_nextUint64(){const Ke=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,Ke}_nextInt32(){const Ke=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,Ke}_skip(Ke){return this._offset+=Ke,this}_scan(Ke,Ye=0){const Je=this._offset;let tt=0;for(;this._dataView.getUint8(this._offset)!==Ye&&tt<Ke;)tt++,this._offset++;return tt<Ke&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+Je,tt)}}const Ti=[171,75,84,88,32,50,48,187,13,10,26,10];function Ei(Xe){return typeof TextDecoder<"u"?new TextDecoder().decode(Xe):Buffer$2.from(Xe).toString("utf8")}function Pi(Xe){const Ke=new Uint8Array(Xe.buffer,Xe.byteOffset,Ti.length);if(Ke[0]!==Ti[0]||Ke[1]!==Ti[1]||Ke[2]!==Ti[2]||Ke[3]!==Ti[3]||Ke[4]!==Ti[4]||Ke[5]!==Ti[5]||Ke[6]!==Ti[6]||Ke[7]!==Ti[7]||Ke[8]!==Ti[8]||Ke[9]!==Ti[9]||Ke[10]!==Ti[10]||Ke[11]!==Ti[11])throw new Error("Missing KTX 2.0 identifier.");const Ye=new Si,Je=17*Uint32Array.BYTES_PER_ELEMENT,tt=new Ii(Xe,Ti.length,Je,!0);Ye.vkFormat=tt._nextUint32(),Ye.typeSize=tt._nextUint32(),Ye.pixelWidth=tt._nextUint32(),Ye.pixelHeight=tt._nextUint32(),Ye.pixelDepth=tt._nextUint32(),Ye.layerCount=tt._nextUint32(),Ye.faceCount=tt._nextUint32();const st=tt._nextUint32();Ye.supercompressionScheme=tt._nextUint32();const rt=tt._nextUint32(),it=tt._nextUint32(),ot=tt._nextUint32(),at=tt._nextUint32(),lt=tt._nextUint64(),ut=tt._nextUint64(),ht=new Ii(Xe,Ti.length+Je,3*st*8,!0);for(let Qt=0;Qt<st;Qt++)Ye.levels.push({levelData:new Uint8Array(Xe.buffer,Xe.byteOffset+ht._nextUint64(),ht._nextUint64()),uncompressedByteLength:ht._nextUint64()});const pt=new Ii(Xe,rt,it,!0),ft={vendorId:pt._skip(4)._nextUint16(),descriptorType:pt._nextUint16(),versionNumber:pt._nextUint16(),descriptorBlockSize:pt._nextUint16(),colorModel:pt._nextUint8(),colorPrimaries:pt._nextUint8(),transferFunction:pt._nextUint8(),flags:pt._nextUint8(),texelBlockDimension:[pt._nextUint8(),pt._nextUint8(),pt._nextUint8(),pt._nextUint8()],bytesPlane:[pt._nextUint8(),pt._nextUint8(),pt._nextUint8(),pt._nextUint8(),pt._nextUint8(),pt._nextUint8(),pt._nextUint8(),pt._nextUint8()],samples:[]},xt=(ft.descriptorBlockSize/4-6)/4;for(let Qt=0;Qt<xt;Qt++){const jt={bitOffset:pt._nextUint16(),bitLength:pt._nextUint8(),channelType:pt._nextUint8(),samplePosition:[pt._nextUint8(),pt._nextUint8(),pt._nextUint8(),pt._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&jt.channelType?(jt.sampleLower=pt._nextInt32(),jt.sampleUpper=pt._nextInt32()):(jt.sampleLower=pt._nextUint32(),jt.sampleUpper=pt._nextUint32()),ft.samples[Qt]=jt}Ye.dataFormatDescriptor.length=0,Ye.dataFormatDescriptor.push(ft);const vt=new Ii(Xe,ot,at,!0);for(;vt._offset<at;){const Qt=vt._nextUint32(),jt=vt._scan(Qt),Ht=Ei(jt),Yt=vt._scan(Qt-jt.byteLength);Ye.keyValue[Ht]=Ht.match(/^ktx/i)?Ei(Yt):Yt,vt._offset%4&&vt._skip(4-vt._offset%4)}if(ut<=0)return Ye;const At=new Ii(Xe,lt,ut,!0),Et=At._nextUint16(),wt=At._nextUint16(),_t=At._nextUint32(),Ct=At._nextUint32(),Tt=At._nextUint32(),St=At._nextUint32(),Rt=[];for(let Qt=0;Qt<st;Qt++)Rt.push({imageFlags:At._nextUint32(),rgbSliceByteOffset:At._nextUint32(),rgbSliceByteLength:At._nextUint32(),alphaSliceByteOffset:At._nextUint32(),alphaSliceByteLength:At._nextUint32()});const Nt=lt+At._offset,Pt=Nt+_t,Bt=Pt+Ct,Lt=Bt+Tt,zt=new Uint8Array(Xe.buffer,Xe.byteOffset+Nt,_t),Dt=new Uint8Array(Xe.buffer,Xe.byteOffset+Pt,Ct),Vt=new Uint8Array(Xe.buffer,Xe.byteOffset+Bt,Tt),Gt=new Uint8Array(Xe.buffer,Xe.byteOffset+Lt,St);return Ye.globalData={endpointCount:Et,selectorCount:wt,imageDescs:Rt,endpointsData:zt,selectorsData:Dt,tablesData:Vt,extendedData:Gt},Ye}let A$1,I,B;const g$1={env:{emscripten_notify_memory_growth:function(Xe){B=new Uint8Array(I.exports.memory.buffer)}}};class Q{init(){return A$1||(A$1=typeof fetch<"u"?fetch("data:application/wasm;base64,"+C).then(Ke=>Ke.arrayBuffer()).then(Ke=>WebAssembly.instantiate(Ke,g$1)).then(this._init):WebAssembly.instantiate(Buffer$2.from(C,"base64"),g$1).then(this._init),A$1)}_init(Ke){I=Ke.instance,g$1.env.emscripten_notify_memory_growth(0)}decode(Ke,Ye=0){if(!I)throw new Error("ZSTDDecoder: Await .init() before decoding.");const Je=Ke.byteLength,tt=I.exports.malloc(Je);B.set(Ke,tt),Ye=Ye||Number(I.exports.ZSTD_findDecompressedSize(tt,Je));const st=I.exports.malloc(Ye),rt=I.exports.ZSTD_decompress(st,Ye,tt,Je),it=B.slice(st,st+rt);return I.exports.free(tt),I.exports.free(st),it}}const C="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",_taskCache=new WeakMap;let _activeLoaders=0,_zstd;class KTX2Loader extends Loader{constructor(Ke){super(Ke),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new WorkerPool,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(Ke){return this.transcoderPath=Ke,this}setWorkerLimit(Ke){return this.workerPool.setWorkerLimit(Ke),this}detectSupport(Ke){return this.workerConfig={astcSupported:Ke.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:Ke.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:Ke.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:Ke.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:Ke.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:Ke.extensions.has("WEBGL_compressed_texture_pvrtc")||Ke.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},Ke.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const Ke=new FileLoader(this.manager);Ke.setPath(this.transcoderPath),Ke.setWithCredentials(this.withCredentials);const Ye=Ke.loadAsync("basis_transcoder.js"),Je=new FileLoader(this.manager);Je.setPath(this.transcoderPath),Je.setResponseType("arraybuffer"),Je.setWithCredentials(this.withCredentials);const tt=Je.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([Ye,tt]).then(([st,rt])=>{const it=KTX2Loader.BasisWorker.toString(),ot=["/* constants */","let _EngineFormat = "+JSON.stringify(KTX2Loader.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(KTX2Loader.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(KTX2Loader.BasisFormat),"/* basis_transcoder.js */",st,"/* worker */",it.substring(it.indexOf("{")+1,it.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([ot])),this.transcoderBinary=rt,this.workerPool.setWorkerCreator(()=>{const at=new Worker(this.workerSourceURL),lt=this.transcoderBinary.slice(0);return at.postMessage({type:"init",config:this.workerConfig,transcoderBinary:lt},[lt]),at})}),_activeLoaders>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),_activeLoaders++}return this.transcoderPending}load(Ke,Ye,Je,tt){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const st=new FileLoader(this.manager);st.setResponseType("arraybuffer"),st.setWithCredentials(this.withCredentials),st.load(Ke,rt=>{if(_taskCache.has(rt))return _taskCache.get(rt).promise.then(Ye).catch(tt);this._createTexture(rt).then(it=>Ye?Ye(it):null).catch(tt)},Je,tt)}_createTextureFrom(Ke,Ye){const{mipmaps:Je,width:tt,height:st,format:rt,type:it,error:ot,dfdTransferFn:at,dfdFlags:lt}=Ke;if(it==="error")return Promise.reject(ot);const ut=Ye.layerCount>1?new CompressedArrayTexture(Je,tt,st,Ye.layerCount,rt,UnsignedByteType):new CompressedTexture(Je,tt,st,rt,UnsignedByteType);return ut.minFilter=Je.length===1?LinearFilter:LinearMipmapLinearFilter,ut.magFilter=LinearFilter,ut.generateMipmaps=!1,ut.needsUpdate=!0,ut.encoding=at===x$3?sRGBEncoding:LinearEncoding,ut.premultiplyAlpha=!!(lt&p$2),ut}async _createTexture(Ke,Ye={}){const Je=Pi(new Uint8Array(Ke));if(Je.vkFormat!==nt)return createDataTexture(Je);const tt=Ye,st=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:Ke,taskConfig:tt},[Ke])).then(rt=>this._createTextureFrom(rt.data,Je));return _taskCache.set(Ke,{promise:st}),st}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),_activeLoaders--,this}}KTX2Loader.BasisFormat={ETC1S:0,UASTC_4x4:1};KTX2Loader.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16};KTX2Loader.EngineFormat={RGBAFormat,RGBA_ASTC_4x4_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format};KTX2Loader.BasisWorker=function(){let Xe,Ke,Ye;const Je=_EngineFormat,tt=_TranscoderFormat,st=_BasisFormat;self.addEventListener("message",function(ft){const xt=ft.data;switch(xt.type){case"init":Xe=xt.config,rt(xt.transcoderBinary);break;case"transcode":Ke.then(()=>{try{const{width:vt,height:At,hasAlpha:Et,mipmaps:wt,format:_t,dfdTransferFn:Ct,dfdFlags:Tt}=it(xt.buffer),St=[];for(let Rt=0;Rt<wt.length;++Rt)St.push(wt[Rt].data.buffer);self.postMessage({type:"transcode",id:xt.id,width:vt,height:At,hasAlpha:Et,mipmaps:wt,format:_t,dfdTransferFn:Ct,dfdFlags:Tt},St)}catch(vt){console.error(vt),self.postMessage({type:"error",id:xt.id,error:vt.message})}});break}});function rt(ft){Ke=new Promise(xt=>{Ye={wasmBinary:ft,onRuntimeInitialized:xt},BASIS(Ye)}).then(()=>{Ye.initializeBasis(),Ye.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function it(ft){const xt=new Ye.KTX2File(new Uint8Array(ft));function vt(){xt.close(),xt.delete()}if(!xt.isValid())throw vt(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const At=xt.isUASTC()?st.UASTC_4x4:st.ETC1S,Et=xt.getWidth(),wt=xt.getHeight(),_t=xt.getLayers()||1,Ct=xt.getLevels(),Tt=xt.getHasAlpha(),St=xt.getDFDTransferFunc(),Rt=xt.getDFDFlags(),{transcoderFormat:Nt,engineFormat:Pt}=ut(At,Et,wt,Tt);if(!Et||!wt||!Ct)throw vt(),new Error("THREE.KTX2Loader:	Invalid texture");if(!xt.startTranscoding())throw vt(),new Error("THREE.KTX2Loader: .startTranscoding failed");const Bt=[];for(let Lt=0;Lt<Ct;Lt++){const zt=[];let Dt,Vt;for(let Gt=0;Gt<_t;Gt++){const Qt=xt.getImageLevelInfo(Lt,Gt,0);Dt=Qt.origWidth,Vt=Qt.origHeight;const jt=new Uint8Array(xt.getImageTranscodedSizeInBytes(Lt,Gt,0,Nt));if(!xt.transcodeImage(jt,Lt,Gt,0,Nt,0,-1,-1))throw vt(),new Error("THREE.KTX2Loader: .transcodeImage failed.");zt.push(jt)}Bt.push({data:pt(zt),width:Dt,height:Vt})}return vt(),{width:Et,height:wt,hasAlpha:Tt,mipmaps:Bt,format:Pt,dfdTransferFn:St,dfdFlags:Rt}}const ot=[{if:"astcSupported",basisFormat:[st.UASTC_4x4],transcoderFormat:[tt.ASTC_4x4,tt.ASTC_4x4],engineFormat:[Je.RGBA_ASTC_4x4_Format,Je.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[st.ETC1S,st.UASTC_4x4],transcoderFormat:[tt.BC7_M5,tt.BC7_M5],engineFormat:[Je.RGBA_BPTC_Format,Je.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[st.ETC1S,st.UASTC_4x4],transcoderFormat:[tt.BC1,tt.BC3],engineFormat:[Je.RGB_S3TC_DXT1_Format,Je.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[st.ETC1S,st.UASTC_4x4],transcoderFormat:[tt.ETC1,tt.ETC2],engineFormat:[Je.RGB_ETC2_Format,Je.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[st.ETC1S,st.UASTC_4x4],transcoderFormat:[tt.ETC1],engineFormat:[Je.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[st.ETC1S,st.UASTC_4x4],transcoderFormat:[tt.PVRTC1_4_RGB,tt.PVRTC1_4_RGBA],engineFormat:[Je.RGB_PVRTC_4BPPV1_Format,Je.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],at=ot.sort(function(ft,xt){return ft.priorityETC1S-xt.priorityETC1S}),lt=ot.sort(function(ft,xt){return ft.priorityUASTC-xt.priorityUASTC});function ut(ft,xt,vt,At){let Et,wt;const _t=ft===st.ETC1S?at:lt;for(let Ct=0;Ct<_t.length;Ct++){const Tt=_t[Ct];if(Xe[Tt.if]&&Tt.basisFormat.includes(ft)&&!(At&&Tt.transcoderFormat.length<2)&&!(Tt.needsPowerOfTwo&&!(ht(xt)&&ht(vt))))return Et=Tt.transcoderFormat[At?1:0],wt=Tt.engineFormat[At?1:0],{transcoderFormat:Et,engineFormat:wt}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),Et=tt.RGBA32,wt=Je.RGBAFormat,{transcoderFormat:Et,engineFormat:wt}}function ht(ft){return ft<=2?!0:(ft&ft-1)===0&&ft!==0}function pt(ft){let xt=0;for(const Et of ft)xt+=Et.byteLength;const vt=new Uint8Array(xt);let At=0;for(const Et of ft)vt.set(Et,At),At+=Et.byteLength;return vt}};const FORMAT_MAP={[Ae$1]:RGBAFormat,[pe]:RGBAFormat,[Ot]:RGBAFormat,[Ft]:RGBAFormat,[de]:RGFormat,[se]:RGFormat,[yt]:RGFormat,[dt]:RGFormat,[xe]:RedFormat,[$t]:RedFormat,[gt]:RedFormat,[ct]:RedFormat},TYPE_MAP={[Ae$1]:FloatType,[pe]:HalfFloatType,[Ot]:UnsignedByteType,[Ft]:UnsignedByteType,[de]:FloatType,[se]:HalfFloatType,[yt]:UnsignedByteType,[dt]:UnsignedByteType,[xe]:FloatType,[$t]:HalfFloatType,[gt]:UnsignedByteType,[ct]:UnsignedByteType},ENCODING_MAP={[Ft]:sRGBEncoding,[dt]:sRGBEncoding,[gt]:sRGBEncoding};async function createDataTexture(Xe){const{vkFormat:Ke,pixelWidth:Ye,pixelHeight:Je,pixelDepth:tt}=Xe;if(FORMAT_MAP[Ke]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const st=Xe.levels[0];let rt,it;if(Xe.supercompressionScheme===t$1)rt=st.levelData;else if(Xe.supercompressionScheme===n$1)_zstd||(_zstd=new Promise(async at=>{const lt=new Q;await lt.init(),at(lt)})),rt=(await _zstd).decode(st.levelData,st.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");TYPE_MAP[Ke]===FloatType?it=new Float32Array(rt.buffer,rt.byteOffset,rt.byteLength/Float32Array.BYTES_PER_ELEMENT):TYPE_MAP[Ke]===HalfFloatType?it=new Uint16Array(rt.buffer,rt.byteOffset,rt.byteLength/Uint16Array.BYTES_PER_ELEMENT):it=rt;const ot=tt===0?new DataTexture(it,Ye,Je):new Data3DTexture(it,Ye,Je,tt);return ot.type=TYPE_MAP[Ke],ot.format=FORMAT_MAP[Ke],ot.encoding=ENCODING_MAP[Ke]||LinearEncoding,ot.needsUpdate=!0,Promise.resolve(ot)}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$a,_b$9;const $retainerCount=Symbol("retainerCount"),$recentlyUsed=Symbol("recentlyUsed"),$evict=Symbol("evict"),$evictionThreshold=Symbol("evictionThreshold"),$cache=Symbol("cache");class CacheEvictionPolicy{constructor(Ke,Ye=5){this[_a$a]=new Map,this[_b$9]=[],this[$cache]=Ke,this[$evictionThreshold]=Ye}set evictionThreshold(Ke){this[$evictionThreshold]=Ke,this[$evict]()}get evictionThreshold(){return this[$evictionThreshold]}get cache(){return this[$cache]}retainerCount(Ke){return this[$retainerCount].get(Ke)||0}reset(){this[$retainerCount].clear(),this[$recentlyUsed]=[]}retain(Ke){this[$retainerCount].has(Ke)||this[$retainerCount].set(Ke,0),this[$retainerCount].set(Ke,this[$retainerCount].get(Ke)+1);const Ye=this[$recentlyUsed].indexOf(Ke);Ye!==-1&&this[$recentlyUsed].splice(Ye,1),this[$recentlyUsed].unshift(Ke),this[$evict]()}release(Ke){this[$retainerCount].has(Ke)&&this[$retainerCount].set(Ke,Math.max(this[$retainerCount].get(Ke)-1,0)),this[$evict]()}[(_a$a=$retainerCount,_b$9=$recentlyUsed,$evict)](){if(!(this[$recentlyUsed].length<this[$evictionThreshold]))for(let Ke=this[$recentlyUsed].length-1;Ke>=this[$evictionThreshold];--Ke){const Ye=this[$recentlyUsed][Ke];this[$retainerCount].get(Ye)===0&&(this[$cache].delete(Ye),this[$recentlyUsed].splice(Ke,1))}}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ensureUniqueNames=Xe=>{const Ke=[],Ye=new Set;for(const Je of Xe){let tt=Je,st=0;for(;Ye.has(tt);)tt=Je+"."+ ++st;Ye.add(tt),Ke.push(tt)}return Ke},mappingsArrayToTable=Xe=>{const Ke=new Map;for(const Ye of Xe.mappings)for(const Je of Ye.variants)Ke.set(Je,{material:null,gltfMaterialIndex:Ye.material});return Ke};class GLTFMaterialsVariantsExtension{constructor(Ke){this.parser=Ke,this.name="KHR_materials_variants"}afterRoot(Ke){const Ye=this.parser,Je=Ye.json;if(Je.extensions===void 0||Je.extensions[this.name]===void 0)return null;const st=Je.extensions[this.name].variants||[],rt=ensureUniqueNames(st.map(it=>it.name));for(const it of Ke.scenes)it.traverse(ot=>{const at=ot;if(!at.isMesh)return;const lt=Ye.associations.get(at);if(lt==null||lt.meshes==null||lt.primitives==null)return;const ft=Je.meshes[lt.meshes].primitives[lt.primitives].extensions;!ft||!ft[this.name]||(at.userData.variantMaterials=mappingsArrayToTable(ft[this.name]))});return Ke.userData.variants=rt,Promise.resolve()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$9,_b$8;Texture$1.DEFAULT_ANISOTROPY=4;const loadWithLoader=(Xe,Ke,Ye=()=>{})=>{const Je=tt=>{const st=tt.loaded/tt.total;Ye(Math.max(0,Math.min(1,isFinite(st)?st:1)))};return new Promise((tt,st)=>{Ke.load(Xe,tt,Je,st)})},fetchScript=Xe=>new Promise((Ke,Ye)=>{const Je=document.createElement("script");document.body.appendChild(Je),Je.onload=Ke,Je.onerror=Ye,Je.async=!0,Je.src=Xe}),cache$1=new Map,preloaded=new Map;let dracoDecoderLocation;const dracoLoader=new DRACOLoader;let ktx2TranscoderLocation;const ktx2Loader=new KTX2Loader;let meshoptDecoderLocation,meshoptDecoder;const $loader=Symbol("loader"),$evictionPolicy=Symbol("evictionPolicy"),$GLTFInstance=Symbol("GLTFInstance");class CachingGLTFLoader extends EventDispatcher{constructor(Ke){super(),this[_b$8]=new GLTFLoader().register(Ye=>new GLTFMaterialsVariantsExtension(Ye)),this[$GLTFInstance]=Ke,this[$loader].setDRACOLoader(dracoLoader),this[$loader].setKTX2Loader(ktx2Loader)}static setDRACODecoderLocation(Ke){dracoDecoderLocation=Ke,dracoLoader.setDecoderPath(Ke)}static getDRACODecoderLocation(){return dracoDecoderLocation}static setKTX2TranscoderLocation(Ke){ktx2TranscoderLocation=Ke,ktx2Loader.setTranscoderPath(Ke)}static getKTX2TranscoderLocation(){return ktx2TranscoderLocation}static setMeshoptDecoderLocation(Ke){meshoptDecoderLocation!==Ke&&(meshoptDecoderLocation=Ke,meshoptDecoder=fetchScript(Ke).then(()=>MeshoptDecoder.ready).then(()=>MeshoptDecoder))}static getMeshoptDecoderLocation(){return meshoptDecoderLocation}static initializeKTX2Loader(Ke){ktx2Loader.detectSupport(Ke)}static get cache(){return cache$1}static clearCache(){cache$1.forEach((Ke,Ye)=>{this.delete(Ye)}),this[$evictionPolicy].reset()}static has(Ke){return cache$1.has(Ke)}static async delete(Ke){if(!this.has(Ke))return;const Ye=cache$1.get(Ke);preloaded.delete(Ke),cache$1.delete(Ke),(await Ye).dispose()}static hasFinishedLoading(Ke){return!!preloaded.get(Ke)}get[(_a$9=$evictionPolicy,_b$8=$loader,$evictionPolicy)](){return this.constructor[$evictionPolicy]}async preload(Ke,Ye,Je=()=>{}){if(this[$loader].setWithCredentials(CachingGLTFLoader.withCredentials),this.dispatchEvent({type:"preload",element:Ye,src:Ke}),!cache$1.has(Ke)){meshoptDecoder!=null&&this[$loader].setMeshoptDecoder(await meshoptDecoder);const tt=loadWithLoader(Ke,this[$loader],it=>{Je(it*.8)}),st=this[$GLTFInstance],rt=tt.then(it=>st.prepare(it)).then(it=>(Je(.9),new st(it))).catch((it=>(console.error(it),new st)));cache$1.set(Ke,rt)}await cache$1.get(Ke),preloaded.set(Ke,!0),Je&&Je(1)}async load(Ke,Ye,Je=()=>{}){await this.preload(Ke,Ye,Je);const st=await(await cache$1.get(Ke)).clone();return this[$evictionPolicy].retain(Ke),st.dispose=()=>{this[$evictionPolicy].release(Ke)},st}}CachingGLTFLoader[_a$9]=new CacheEvictionPolicy(CachingGLTFLoader);class CSS2DObject extends Object3D{constructor(Ke=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=Ke,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(Ye){Ye.element instanceof Element&&Ye.element.parentNode!==null&&Ye.element.parentNode.removeChild(Ye.element)})})}copy(Ke,Ye){return super.copy(Ke,Ye),this.element=Ke.element.cloneNode(!0),this}}const _vector=new Vector3,_viewMatrix=new Matrix4,_viewProjectionMatrix=new Matrix4,_a$8=new Vector3,_b$7=new Vector3;class CSS2DRenderer{constructor(Ke={}){const Ye=this;let Je,tt,st,rt;const it={objects:new WeakMap},ot=Ke.element!==void 0?Ke.element:document.createElement("div");ot.style.overflow="hidden",this.domElement=ot,this.getSize=function(){return{width:Je,height:tt}},this.render=function(pt,ft){pt.matrixWorldAutoUpdate===!0&&pt.updateMatrixWorld(),ft.parent===null&&ft.matrixWorldAutoUpdate===!0&&ft.updateMatrixWorld(),_viewMatrix.copy(ft.matrixWorldInverse),_viewProjectionMatrix.multiplyMatrices(ft.projectionMatrix,_viewMatrix),at(pt,pt,ft),ht(pt)},this.setSize=function(pt,ft){Je=pt,tt=ft,st=Je/2,rt=tt/2,ot.style.width=pt+"px",ot.style.height=ft+"px"};function at(pt,ft,xt){if(pt.isCSS2DObject){_vector.setFromMatrixPosition(pt.matrixWorld),_vector.applyMatrix4(_viewProjectionMatrix);const vt=pt.visible===!0&&_vector.z>=-1&&_vector.z<=1&&pt.layers.test(xt.layers)===!0;if(pt.element.style.display=vt===!0?"":"none",vt===!0){pt.onBeforeRender(Ye,ft,xt);const Et=pt.element;Et.style.transform="translate(-50%,-50%) translate("+(_vector.x*st+st)+"px,"+(-_vector.y*rt+rt)+"px)",Et.parentNode!==ot&&ot.appendChild(Et),pt.onAfterRender(Ye,ft,xt)}const At={distanceToCameraSquared:lt(xt,pt)};it.objects.set(pt,At)}for(let vt=0,At=pt.children.length;vt<At;vt++)at(pt.children[vt],ft,xt)}function lt(pt,ft){return _a$8.setFromMatrixPosition(pt.matrixWorld),_b$7.setFromMatrixPosition(ft.matrixWorld),_a$8.distanceToSquared(_b$7)}function ut(pt){const ft=[];return pt.traverse(function(xt){xt.isCSS2DObject&&ft.push(xt)}),ft}function ht(pt){const ft=ut(pt).sort(function(vt,At){if(vt.renderOrder!==At.renderOrder)return At.renderOrder-vt.renderOrder;const Et=it.objects.get(vt).distanceToCameraSquared,wt=it.objects.get(At).distanceToCameraSquared;return Et-wt}),xt=ft.length;for(let vt=0,At=ft.length;vt<At;vt++)ft[vt].element.style.zIndex=xt-vt}}}function reduceVertices(Xe,Ke,Ye){let Je=Ye;const tt=new Vector3;return Xe.updateWorldMatrix(!0,!0),Xe.traverseVisible(st=>{const{geometry:rt}=st;if(rt!==void 0){const{position:it}=rt.attributes;if(it!==void 0)for(let ot=0,at=it.count;ot<at;ot++)st.isMesh?st.getVertexPosition(ot,tt):tt.fromBufferAttribute(it,ot),st.isSkinnedMesh||tt.applyMatrix4(st.matrixWorld),Je=Ke(Je,tt)}}),Je}class GLTFExporter{constructor(){this.pluginCallbacks=[],this.register(function(Ke){return new GLTFLightExtension(Ke)}),this.register(function(Ke){return new GLTFMaterialsUnlitExtension(Ke)}),this.register(function(Ke){return new GLTFMaterialsTransmissionExtension(Ke)}),this.register(function(Ke){return new GLTFMaterialsVolumeExtension(Ke)}),this.register(function(Ke){return new GLTFMaterialsIorExtension(Ke)}),this.register(function(Ke){return new GLTFMaterialsSpecularExtension(Ke)}),this.register(function(Ke){return new GLTFMaterialsClearcoatExtension(Ke)}),this.register(function(Ke){return new GLTFMaterialsIridescenceExtension(Ke)})}register(Ke){return this.pluginCallbacks.indexOf(Ke)===-1&&this.pluginCallbacks.push(Ke),this}unregister(Ke){return this.pluginCallbacks.indexOf(Ke)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(Ke),1),this}parse(Ke,Ye,Je,tt){const st=new GLTFWriter,rt=[];for(let it=0,ot=this.pluginCallbacks.length;it<ot;it++)rt.push(this.pluginCallbacks[it](st));st.setPlugins(rt),st.write(Ke,Ye,tt).catch(Je)}parseAsync(Ke,Ye){const Je=this;return new Promise(function(tt,st){Je.parse(Ke,tt,st,Ye)})}}const WEBGL_CONSTANTS={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},THREE_TO_WEBGL={};THREE_TO_WEBGL[NearestFilter]=WEBGL_CONSTANTS.NEAREST;THREE_TO_WEBGL[NearestMipmapNearestFilter]=WEBGL_CONSTANTS.NEAREST_MIPMAP_NEAREST;THREE_TO_WEBGL[NearestMipmapLinearFilter]=WEBGL_CONSTANTS.NEAREST_MIPMAP_LINEAR;THREE_TO_WEBGL[LinearFilter]=WEBGL_CONSTANTS.LINEAR;THREE_TO_WEBGL[LinearMipmapNearestFilter]=WEBGL_CONSTANTS.LINEAR_MIPMAP_NEAREST;THREE_TO_WEBGL[LinearMipmapLinearFilter]=WEBGL_CONSTANTS.LINEAR_MIPMAP_LINEAR;THREE_TO_WEBGL[ClampToEdgeWrapping]=WEBGL_CONSTANTS.CLAMP_TO_EDGE;THREE_TO_WEBGL[RepeatWrapping]=WEBGL_CONSTANTS.REPEAT;THREE_TO_WEBGL[MirroredRepeatWrapping]=WEBGL_CONSTANTS.MIRRORED_REPEAT;const PATH_PROPERTIES={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},DEFAULT_SPECULAR_COLOR=new Color,GLB_HEADER_BYTES=12,GLB_HEADER_MAGIC=1179937895,GLB_VERSION=2,GLB_CHUNK_PREFIX_BYTES=8,GLB_CHUNK_TYPE_JSON=1313821514,GLB_CHUNK_TYPE_BIN=5130562;function equalArray(Xe,Ke){return Xe.length===Ke.length&&Xe.every(function(Ye,Je){return Ye===Ke[Je]})}function stringToArrayBuffer(Xe){return new TextEncoder().encode(Xe).buffer}function isIdentityMatrix(Xe){return equalArray(Xe.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function getMinMax(Xe,Ke,Ye){const Je={min:new Array(Xe.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(Xe.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let tt=Ke;tt<Ke+Ye;tt++)for(let st=0;st<Xe.itemSize;st++){let rt;Xe.itemSize>4?rt=Xe.array[tt*Xe.itemSize+st]:(st===0?rt=Xe.getX(tt):st===1?rt=Xe.getY(tt):st===2?rt=Xe.getZ(tt):st===3&&(rt=Xe.getW(tt)),Xe.normalized===!0&&(rt=MathUtils.normalize(rt,Xe.array))),Je.min[st]=Math.min(Je.min[st],rt),Je.max[st]=Math.max(Je.max[st],rt)}return Je}function getPaddedBufferSize(Xe){return Math.ceil(Xe/4)*4}function getPaddedArrayBuffer(Xe,Ke=0){const Ye=getPaddedBufferSize(Xe.byteLength);if(Ye!==Xe.byteLength){const Je=new Uint8Array(Ye);if(Je.set(new Uint8Array(Xe)),Ke!==0)for(let tt=Xe.byteLength;tt<Ye;tt++)Je[tt]=Ke;return Je.buffer}return Xe}function getCanvas(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function getToBlobPromise(Xe,Ke){if(Xe.toBlob!==void 0)return new Promise(Je=>Xe.toBlob(Je,Ke));let Ye;return Ke==="image/jpeg"?Ye=.92:Ke==="image/webp"&&(Ye=.8),Xe.convertToBlob({type:Ke,quality:Ye})}class GLTFWriter{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(Ke){this.plugins=Ke}async write(Ke,Ye,Je={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},Je),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(Ke),await Promise.all(this.pending);const tt=this,st=tt.buffers,rt=tt.json;Je=tt.options;const it=tt.extensionsUsed,ot=new Blob(st,{type:"application/octet-stream"}),at=Object.keys(it);if(at.length>0&&(rt.extensionsUsed=at),rt.buffers&&rt.buffers.length>0&&(rt.buffers[0].byteLength=ot.size),Je.binary===!0){const lt=new FileReader;lt.readAsArrayBuffer(ot),lt.onloadend=function(){const ut=getPaddedArrayBuffer(lt.result),ht=new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));ht.setUint32(0,ut.byteLength,!0),ht.setUint32(4,GLB_CHUNK_TYPE_BIN,!0);const pt=getPaddedArrayBuffer(stringToArrayBuffer(JSON.stringify(rt)),32),ft=new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));ft.setUint32(0,pt.byteLength,!0),ft.setUint32(4,GLB_CHUNK_TYPE_JSON,!0);const xt=new ArrayBuffer(GLB_HEADER_BYTES),vt=new DataView(xt);vt.setUint32(0,GLB_HEADER_MAGIC,!0),vt.setUint32(4,GLB_VERSION,!0);const At=GLB_HEADER_BYTES+ft.byteLength+pt.byteLength+ht.byteLength+ut.byteLength;vt.setUint32(8,At,!0);const Et=new Blob([xt,ft,pt,ht,ut],{type:"application/octet-stream"}),wt=new FileReader;wt.readAsArrayBuffer(Et),wt.onloadend=function(){Ye(wt.result)}}}else if(rt.buffers&&rt.buffers.length>0){const lt=new FileReader;lt.readAsDataURL(ot),lt.onloadend=function(){const ut=lt.result;rt.buffers[0].uri=ut,Ye(rt)}}else Ye(rt)}serializeUserData(Ke,Ye){if(Object.keys(Ke.userData).length===0)return;const Je=this.options,tt=this.extensionsUsed;try{const st=JSON.parse(JSON.stringify(Ke.userData));if(Je.includeCustomExtensions&&st.gltfExtensions){Ye.extensions===void 0&&(Ye.extensions={});for(const rt in st.gltfExtensions)Ye.extensions[rt]=st.gltfExtensions[rt],tt[rt]=!0;delete st.gltfExtensions}Object.keys(st).length>0&&(Ye.extras=st)}catch(st){console.warn("THREE.GLTFExporter: userData of '"+Ke.name+"' won't be serialized because of JSON.stringify error - "+st.message)}}getUID(Ke,Ye=!1){if(this.uids.has(Ke)===!1){const tt=new Map;tt.set(!0,this.uid++),tt.set(!1,this.uid++),this.uids.set(Ke,tt)}return this.uids.get(Ke).get(Ye)}isNormalizedNormalAttribute(Ke){if(this.cache.attributesNormalized.has(Ke))return!1;const Je=new Vector3;for(let tt=0,st=Ke.count;tt<st;tt++)if(Math.abs(Je.fromBufferAttribute(Ke,tt).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(Ke){const Ye=this.cache;if(Ye.attributesNormalized.has(Ke))return Ye.attributesNormalized.get(Ke);const Je=Ke.clone(),tt=new Vector3;for(let st=0,rt=Je.count;st<rt;st++)tt.fromBufferAttribute(Je,st),tt.x===0&&tt.y===0&&tt.z===0?tt.setX(1):tt.normalize(),Je.setXYZ(st,tt.x,tt.y,tt.z);return Ye.attributesNormalized.set(Ke,Je),Je}applyTextureTransform(Ke,Ye){let Je=!1;const tt={};(Ye.offset.x!==0||Ye.offset.y!==0)&&(tt.offset=Ye.offset.toArray(),Je=!0),Ye.rotation!==0&&(tt.rotation=Ye.rotation,Je=!0),(Ye.repeat.x!==1||Ye.repeat.y!==1)&&(tt.scale=Ye.repeat.toArray(),Je=!0),Je&&(Ke.extensions=Ke.extensions||{},Ke.extensions.KHR_texture_transform=tt,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(Ke,Ye){if(Ke===Ye)return Ke;function Je(pt){return pt.encoding===sRGBEncoding?function(xt){return xt<.04045?xt*.0773993808:Math.pow(xt*.9478672986+.0521327014,2.4)}:function(xt){return xt}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const tt=Ke?Ke.image:null,st=Ye?Ye.image:null,rt=Math.max(tt?tt.width:0,st?st.width:0),it=Math.max(tt?tt.height:0,st?st.height:0),ot=getCanvas();ot.width=rt,ot.height=it;const at=ot.getContext("2d");at.fillStyle="#00ffff",at.fillRect(0,0,rt,it);const lt=at.getImageData(0,0,rt,it);if(tt){at.drawImage(tt,0,0,rt,it);const pt=Je(Ke),ft=at.getImageData(0,0,rt,it).data;for(let xt=2;xt<ft.length;xt+=4)lt.data[xt]=pt(ft[xt]/256)*256}if(st){at.drawImage(st,0,0,rt,it);const pt=Je(Ye),ft=at.getImageData(0,0,rt,it).data;for(let xt=1;xt<ft.length;xt+=4)lt.data[xt]=pt(ft[xt]/256)*256}at.putImageData(lt,0,0);const ht=(Ke||Ye).clone();return ht.source=new Source$2(ot),ht.encoding=LinearEncoding,ht}processBuffer(Ke){const Ye=this.json,Je=this.buffers;return Ye.buffers||(Ye.buffers=[{byteLength:0}]),Je.push(Ke),0}processBufferView(Ke,Ye,Je,tt,st){const rt=this.json;rt.bufferViews||(rt.bufferViews=[]);let it;Ye===WEBGL_CONSTANTS.UNSIGNED_BYTE?it=1:Ye===WEBGL_CONSTANTS.UNSIGNED_SHORT?it=2:it=4;const ot=getPaddedBufferSize(tt*Ke.itemSize*it),at=new DataView(new ArrayBuffer(ot));let lt=0;for(let pt=Je;pt<Je+tt;pt++)for(let ft=0;ft<Ke.itemSize;ft++){let xt;Ke.itemSize>4?xt=Ke.array[pt*Ke.itemSize+ft]:(ft===0?xt=Ke.getX(pt):ft===1?xt=Ke.getY(pt):ft===2?xt=Ke.getZ(pt):ft===3&&(xt=Ke.getW(pt)),Ke.normalized===!0&&(xt=MathUtils.normalize(xt,Ke.array))),Ye===WEBGL_CONSTANTS.FLOAT?at.setFloat32(lt,xt,!0):Ye===WEBGL_CONSTANTS.UNSIGNED_INT?at.setUint32(lt,xt,!0):Ye===WEBGL_CONSTANTS.UNSIGNED_SHORT?at.setUint16(lt,xt,!0):Ye===WEBGL_CONSTANTS.UNSIGNED_BYTE&&at.setUint8(lt,xt),lt+=it}const ut={buffer:this.processBuffer(at.buffer),byteOffset:this.byteOffset,byteLength:ot};return st!==void 0&&(ut.target=st),st===WEBGL_CONSTANTS.ARRAY_BUFFER&&(ut.byteStride=Ke.itemSize*it),this.byteOffset+=ot,rt.bufferViews.push(ut),{id:rt.bufferViews.length-1,byteLength:0}}processBufferViewImage(Ke){const Ye=this,Je=Ye.json;return Je.bufferViews||(Je.bufferViews=[]),new Promise(function(tt){const st=new FileReader;st.readAsArrayBuffer(Ke),st.onloadend=function(){const rt=getPaddedArrayBuffer(st.result),it={buffer:Ye.processBuffer(rt),byteOffset:Ye.byteOffset,byteLength:rt.byteLength};Ye.byteOffset+=rt.byteLength,tt(Je.bufferViews.push(it)-1)}})}processAccessor(Ke,Ye,Je,tt){const st=this.json,rt={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};let it;if(Ke.array.constructor===Float32Array)it=WEBGL_CONSTANTS.FLOAT;else if(Ke.array.constructor===Uint32Array)it=WEBGL_CONSTANTS.UNSIGNED_INT;else if(Ke.array.constructor===Uint16Array)it=WEBGL_CONSTANTS.UNSIGNED_SHORT;else if(Ke.array.constructor===Uint8Array)it=WEBGL_CONSTANTS.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(Je===void 0&&(Je=0),tt===void 0&&(tt=Ke.count),tt===0)return null;const ot=getMinMax(Ke,Je,tt);let at;Ye!==void 0&&(at=Ke===Ye.index?WEBGL_CONSTANTS.ELEMENT_ARRAY_BUFFER:WEBGL_CONSTANTS.ARRAY_BUFFER);const lt=this.processBufferView(Ke,it,Je,tt,at),ut={bufferView:lt.id,byteOffset:lt.byteOffset,componentType:it,count:tt,max:ot.max,min:ot.min,type:rt[Ke.itemSize]};return Ke.normalized===!0&&(ut.normalized=!0),st.accessors||(st.accessors=[]),st.accessors.push(ut)-1}processImage(Ke,Ye,Je,tt="image/png"){if(Ke!==null){const st=this,rt=st.cache,it=st.json,ot=st.options,at=st.pending;rt.images.has(Ke)||rt.images.set(Ke,{});const lt=rt.images.get(Ke),ut=tt+":flipY/"+Je.toString();if(lt[ut]!==void 0)return lt[ut];it.images||(it.images=[]);const ht={mimeType:tt},pt=getCanvas();pt.width=Math.min(Ke.width,ot.maxTextureSize),pt.height=Math.min(Ke.height,ot.maxTextureSize);const ft=pt.getContext("2d");if(Je===!0&&(ft.translate(0,pt.height),ft.scale(1,-1)),Ke.data!==void 0){Ye!==RGBAFormat&&console.error("GLTFExporter: Only RGBAFormat is supported."),(Ke.width>ot.maxTextureSize||Ke.height>ot.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",Ke);const vt=new Uint8ClampedArray(Ke.height*Ke.width*4);for(let At=0;At<vt.length;At+=4)vt[At+0]=Ke.data[At+0],vt[At+1]=Ke.data[At+1],vt[At+2]=Ke.data[At+2],vt[At+3]=Ke.data[At+3];ft.putImageData(new ImageData(vt,Ke.width,Ke.height),0,0)}else ft.drawImage(Ke,0,0,pt.width,pt.height);ot.binary===!0?at.push(getToBlobPromise(pt,tt).then(vt=>st.processBufferViewImage(vt)).then(vt=>{ht.bufferView=vt})):pt.toDataURL!==void 0?ht.uri=pt.toDataURL(tt):at.push(getToBlobPromise(pt,tt).then(vt=>new FileReader().readAsDataURL(vt)).then(vt=>{ht.uri=vt}));const xt=it.images.push(ht)-1;return lt[ut]=xt,xt}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(Ke){const Ye=this.json;Ye.samplers||(Ye.samplers=[]);const Je={magFilter:THREE_TO_WEBGL[Ke.magFilter],minFilter:THREE_TO_WEBGL[Ke.minFilter],wrapS:THREE_TO_WEBGL[Ke.wrapS],wrapT:THREE_TO_WEBGL[Ke.wrapT]};return Ye.samplers.push(Je)-1}processTexture(Ke){const Ye=this.cache,Je=this.json;if(Ye.textures.has(Ke))return Ye.textures.get(Ke);Je.textures||(Je.textures=[]);let tt=Ke.userData.mimeType;tt==="image/webp"&&(tt="image/png");const st={sampler:this.processSampler(Ke),source:this.processImage(Ke.image,Ke.format,Ke.flipY,tt)};Ke.name&&(st.name=Ke.name),this._invokeAll(function(it){it.writeTexture&&it.writeTexture(Ke,st)});const rt=Je.textures.push(st)-1;return Ye.textures.set(Ke,rt),rt}processMaterial(Ke){const Ye=this.cache,Je=this.json;if(Ye.materials.has(Ke))return Ye.materials.get(Ke);if(Ke.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;Je.materials||(Je.materials=[]);const tt={pbrMetallicRoughness:{}};Ke.isMeshStandardMaterial!==!0&&Ke.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const st=Ke.color.toArray().concat([Ke.opacity]);if(equalArray(st,[1,1,1,1])||(tt.pbrMetallicRoughness.baseColorFactor=st),Ke.isMeshStandardMaterial?(tt.pbrMetallicRoughness.metallicFactor=Ke.metalness,tt.pbrMetallicRoughness.roughnessFactor=Ke.roughness):(tt.pbrMetallicRoughness.metallicFactor=.5,tt.pbrMetallicRoughness.roughnessFactor=.5),Ke.metalnessMap||Ke.roughnessMap){const it=this.buildMetalRoughTexture(Ke.metalnessMap,Ke.roughnessMap),ot={index:this.processTexture(it)};this.applyTextureTransform(ot,it),tt.pbrMetallicRoughness.metallicRoughnessTexture=ot}if(Ke.map){const it={index:this.processTexture(Ke.map)};this.applyTextureTransform(it,Ke.map),tt.pbrMetallicRoughness.baseColorTexture=it}if(Ke.emissive){const it=Ke.emissive.clone().multiplyScalar(Ke.emissiveIntensity),ot=Math.max(it.r,it.g,it.b);if(ot>1&&(it.multiplyScalar(1/ot),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),ot>0&&(tt.emissiveFactor=it.toArray()),Ke.emissiveMap){const at={index:this.processTexture(Ke.emissiveMap)};this.applyTextureTransform(at,Ke.emissiveMap),tt.emissiveTexture=at}}if(Ke.normalMap){const it={index:this.processTexture(Ke.normalMap)};Ke.normalScale&&Ke.normalScale.x!==1&&(it.scale=Ke.normalScale.x),this.applyTextureTransform(it,Ke.normalMap),tt.normalTexture=it}if(Ke.aoMap){const it={index:this.processTexture(Ke.aoMap),texCoord:1};Ke.aoMapIntensity!==1&&(it.strength=Ke.aoMapIntensity),this.applyTextureTransform(it,Ke.aoMap),tt.occlusionTexture=it}Ke.transparent?tt.alphaMode="BLEND":Ke.alphaTest>0&&(tt.alphaMode="MASK",tt.alphaCutoff=Ke.alphaTest),Ke.side===DoubleSide&&(tt.doubleSided=!0),Ke.name!==""&&(tt.name=Ke.name),this.serializeUserData(Ke,tt),this._invokeAll(function(it){it.writeMaterial&&it.writeMaterial(Ke,tt)});const rt=Je.materials.push(tt)-1;return Ye.materials.set(Ke,rt),rt}processMesh(Ke){const Ye=this.cache,Je=this.json,tt=[Ke.geometry.uuid];if(Array.isArray(Ke.material))for(let wt=0,_t=Ke.material.length;wt<_t;wt++)tt.push(Ke.material[wt].uuid);else tt.push(Ke.material.uuid);const st=tt.join(":");if(Ye.meshes.has(st))return Ye.meshes.get(st);const rt=Ke.geometry;let it;Ke.isLineSegments?it=WEBGL_CONSTANTS.LINES:Ke.isLineLoop?it=WEBGL_CONSTANTS.LINE_LOOP:Ke.isLine?it=WEBGL_CONSTANTS.LINE_STRIP:Ke.isPoints?it=WEBGL_CONSTANTS.POINTS:it=Ke.material.wireframe?WEBGL_CONSTANTS.LINES:WEBGL_CONSTANTS.TRIANGLES;const ot={},at={},lt=[],ut=[],ht={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},pt=rt.getAttribute("normal");pt!==void 0&&!this.isNormalizedNormalAttribute(pt)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),rt.setAttribute("normal",this.createNormalizedNormalAttribute(pt)));let ft=null;for(let wt in rt.attributes){if(wt.slice(0,5)==="morph")continue;const _t=rt.attributes[wt];if(wt=ht[wt]||wt.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(wt)||(wt="_"+wt),Ye.attributes.has(this.getUID(_t))){at[wt]=Ye.attributes.get(this.getUID(_t));continue}ft=null;const Tt=_t.array;wt==="JOINTS_0"&&!(Tt instanceof Uint16Array)&&!(Tt instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),ft=new BufferAttribute(new Uint16Array(Tt),_t.itemSize,_t.normalized));const St=this.processAccessor(ft||_t,rt);St!==null&&(at[wt]=St,Ye.attributes.set(this.getUID(_t),St))}if(pt!==void 0&&rt.setAttribute("normal",pt),Object.keys(at).length===0)return null;if(Ke.morphTargetInfluences!==void 0&&Ke.morphTargetInfluences.length>0){const wt=[],_t=[],Ct={};if(Ke.morphTargetDictionary!==void 0)for(const Tt in Ke.morphTargetDictionary)Ct[Ke.morphTargetDictionary[Tt]]=Tt;for(let Tt=0;Tt<Ke.morphTargetInfluences.length;++Tt){const St={};let Rt=!1;for(const Nt in rt.morphAttributes){if(Nt!=="position"&&Nt!=="normal"){Rt||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),Rt=!0);continue}const Pt=rt.morphAttributes[Nt][Tt],Bt=Nt.toUpperCase(),Lt=rt.attributes[Nt];if(Ye.attributes.has(this.getUID(Pt,!0))){St[Bt]=Ye.attributes.get(this.getUID(Pt,!0));continue}const zt=Pt.clone();if(!rt.morphTargetsRelative)for(let Dt=0,Vt=Pt.count;Dt<Vt;Dt++)for(let Gt=0;Gt<Pt.itemSize;Gt++)Gt===0&&zt.setX(Dt,Pt.getX(Dt)-Lt.getX(Dt)),Gt===1&&zt.setY(Dt,Pt.getY(Dt)-Lt.getY(Dt)),Gt===2&&zt.setZ(Dt,Pt.getZ(Dt)-Lt.getZ(Dt)),Gt===3&&zt.setW(Dt,Pt.getW(Dt)-Lt.getW(Dt));St[Bt]=this.processAccessor(zt,rt),Ye.attributes.set(this.getUID(Lt,!0),St[Bt])}ut.push(St),wt.push(Ke.morphTargetInfluences[Tt]),Ke.morphTargetDictionary!==void 0&&_t.push(Ct[Tt])}ot.weights=wt,_t.length>0&&(ot.extras={},ot.extras.targetNames=_t)}const xt=Array.isArray(Ke.material);if(xt&&rt.groups.length===0)return null;const vt=xt?Ke.material:[Ke.material],At=xt?rt.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let wt=0,_t=At.length;wt<_t;wt++){const Ct={mode:it,attributes:at};if(this.serializeUserData(rt,Ct),ut.length>0&&(Ct.targets=ut),rt.index!==null){let St=this.getUID(rt.index);(At[wt].start!==void 0||At[wt].count!==void 0)&&(St+=":"+At[wt].start+":"+At[wt].count),Ye.attributes.has(St)?Ct.indices=Ye.attributes.get(St):(Ct.indices=this.processAccessor(rt.index,rt,At[wt].start,At[wt].count),Ye.attributes.set(St,Ct.indices)),Ct.indices===null&&delete Ct.indices}const Tt=this.processMaterial(vt[At[wt].materialIndex]);Tt!==null&&(Ct.material=Tt),lt.push(Ct)}ot.primitives=lt,Je.meshes||(Je.meshes=[]),this._invokeAll(function(wt){wt.writeMesh&&wt.writeMesh(Ke,ot)});const Et=Je.meshes.push(ot)-1;return Ye.meshes.set(st,Et),Et}processCamera(Ke){const Ye=this.json;Ye.cameras||(Ye.cameras=[]);const Je=Ke.isOrthographicCamera,tt={type:Je?"orthographic":"perspective"};return Je?tt.orthographic={xmag:Ke.right*2,ymag:Ke.top*2,zfar:Ke.far<=0?.001:Ke.far,znear:Ke.near<0?0:Ke.near}:tt.perspective={aspectRatio:Ke.aspect,yfov:MathUtils.degToRad(Ke.fov),zfar:Ke.far<=0?.001:Ke.far,znear:Ke.near<0?0:Ke.near},Ke.name!==""&&(tt.name=Ke.type),Ye.cameras.push(tt)-1}processAnimation(Ke,Ye){const Je=this.json,tt=this.nodeMap;Je.animations||(Je.animations=[]),Ke=GLTFExporter.Utils.mergeMorphTargetTracks(Ke.clone(),Ye);const st=Ke.tracks,rt=[],it=[];for(let ot=0;ot<st.length;++ot){const at=st[ot],lt=PropertyBinding.parseTrackName(at.name);let ut=PropertyBinding.findNode(Ye,lt.nodeName);const ht=PATH_PROPERTIES[lt.propertyName];if(lt.objectName==="bones"&&(ut.isSkinnedMesh===!0?ut=ut.skeleton.getBoneByName(lt.objectIndex):ut=void 0),!ut||!ht)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',at.name),null;const pt=1;let ft=at.values.length/at.times.length;ht===PATH_PROPERTIES.morphTargetInfluences&&(ft/=ut.morphTargetInfluences.length);let xt;at.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(xt="CUBICSPLINE",ft/=3):at.getInterpolation()===InterpolateDiscrete?xt="STEP":xt="LINEAR",it.push({input:this.processAccessor(new BufferAttribute(at.times,pt)),output:this.processAccessor(new BufferAttribute(at.values,ft)),interpolation:xt}),rt.push({sampler:it.length-1,target:{node:tt.get(ut),path:ht}})}return Je.animations.push({name:Ke.name||"clip_"+Je.animations.length,samplers:it,channels:rt}),Je.animations.length-1}processSkin(Ke){const Ye=this.json,Je=this.nodeMap,tt=Ye.nodes[Je.get(Ke)],st=Ke.skeleton;if(st===void 0)return null;const rt=Ke.skeleton.bones[0];if(rt===void 0)return null;const it=[],ot=new Float32Array(st.bones.length*16),at=new Matrix4;for(let ut=0;ut<st.bones.length;++ut)it.push(Je.get(st.bones[ut])),at.copy(st.boneInverses[ut]),at.multiply(Ke.bindMatrix).toArray(ot,ut*16);return Ye.skins===void 0&&(Ye.skins=[]),Ye.skins.push({inverseBindMatrices:this.processAccessor(new BufferAttribute(ot,16)),joints:it,skeleton:Je.get(rt)}),tt.skin=Ye.skins.length-1}processNode(Ke){const Ye=this.json,Je=this.options,tt=this.nodeMap;Ye.nodes||(Ye.nodes=[]);const st={};if(Je.trs){const it=Ke.quaternion.toArray(),ot=Ke.position.toArray(),at=Ke.scale.toArray();equalArray(it,[0,0,0,1])||(st.rotation=it),equalArray(ot,[0,0,0])||(st.translation=ot),equalArray(at,[1,1,1])||(st.scale=at)}else Ke.matrixAutoUpdate&&Ke.updateMatrix(),isIdentityMatrix(Ke.matrix)===!1&&(st.matrix=Ke.matrix.elements);if(Ke.name!==""&&(st.name=String(Ke.name)),this.serializeUserData(Ke,st),Ke.isMesh||Ke.isLine||Ke.isPoints){const it=this.processMesh(Ke);it!==null&&(st.mesh=it)}else Ke.isCamera&&(st.camera=this.processCamera(Ke));if(Ke.isSkinnedMesh&&this.skins.push(Ke),Ke.children.length>0){const it=[];for(let ot=0,at=Ke.children.length;ot<at;ot++){const lt=Ke.children[ot];if(lt.visible||Je.onlyVisible===!1){const ut=this.processNode(lt);ut!==null&&it.push(ut)}}it.length>0&&(st.children=it)}this._invokeAll(function(it){it.writeNode&&it.writeNode(Ke,st)});const rt=Ye.nodes.push(st)-1;return tt.set(Ke,rt),rt}processScene(Ke){const Ye=this.json,Je=this.options;Ye.scenes||(Ye.scenes=[],Ye.scene=0);const tt={};Ke.name!==""&&(tt.name=Ke.name),Ye.scenes.push(tt);const st=[];for(let rt=0,it=Ke.children.length;rt<it;rt++){const ot=Ke.children[rt];if(ot.visible||Je.onlyVisible===!1){const at=this.processNode(ot);at!==null&&st.push(at)}}st.length>0&&(tt.nodes=st),this.serializeUserData(Ke,tt)}processObjects(Ke){const Ye=new Scene;Ye.name="AuxScene";for(let Je=0;Je<Ke.length;Je++)Ye.children.push(Ke[Je]);this.processScene(Ye)}processInput(Ke){const Ye=this.options;Ke=Ke instanceof Array?Ke:[Ke],this._invokeAll(function(tt){tt.beforeParse&&tt.beforeParse(Ke)});const Je=[];for(let tt=0;tt<Ke.length;tt++)Ke[tt]instanceof Scene?this.processScene(Ke[tt]):Je.push(Ke[tt]);Je.length>0&&this.processObjects(Je);for(let tt=0;tt<this.skins.length;++tt)this.processSkin(this.skins[tt]);for(let tt=0;tt<Ye.animations.length;++tt)this.processAnimation(Ye.animations[tt],Ke[0]);this._invokeAll(function(tt){tt.afterParse&&tt.afterParse(Ke)})}_invokeAll(Ke){for(let Ye=0,Je=this.plugins.length;Ye<Je;Ye++)Ke(this.plugins[Ye])}}class GLTFLightExtension{constructor(Ke){this.writer=Ke,this.name="KHR_lights_punctual"}writeNode(Ke,Ye){if(!Ke.isLight)return;if(!Ke.isDirectionalLight&&!Ke.isPointLight&&!Ke.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",Ke);return}const Je=this.writer,tt=Je.json,st=Je.extensionsUsed,rt={};Ke.name&&(rt.name=Ke.name),rt.color=Ke.color.toArray(),rt.intensity=Ke.intensity,Ke.isDirectionalLight?rt.type="directional":Ke.isPointLight?(rt.type="point",Ke.distance>0&&(rt.range=Ke.distance)):Ke.isSpotLight&&(rt.type="spot",Ke.distance>0&&(rt.range=Ke.distance),rt.spot={},rt.spot.innerConeAngle=(Ke.penumbra-1)*Ke.angle*-1,rt.spot.outerConeAngle=Ke.angle),Ke.decay!==void 0&&Ke.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),Ke.target&&(Ke.target.parent!==Ke||Ke.target.position.x!==0||Ke.target.position.y!==0||Ke.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),st[this.name]||(tt.extensions=tt.extensions||{},tt.extensions[this.name]={lights:[]},st[this.name]=!0);const it=tt.extensions[this.name].lights;it.push(rt),Ye.extensions=Ye.extensions||{},Ye.extensions[this.name]={light:it.length-1}}}class GLTFMaterialsUnlitExtension{constructor(Ke){this.writer=Ke,this.name="KHR_materials_unlit"}writeMaterial(Ke,Ye){if(!Ke.isMeshBasicMaterial)return;const tt=this.writer.extensionsUsed;Ye.extensions=Ye.extensions||{},Ye.extensions[this.name]={},tt[this.name]=!0,Ye.pbrMetallicRoughness.metallicFactor=0,Ye.pbrMetallicRoughness.roughnessFactor=.9}}class GLTFMaterialsClearcoatExtension{constructor(Ke){this.writer=Ke,this.name="KHR_materials_clearcoat"}writeMaterial(Ke,Ye){if(!Ke.isMeshPhysicalMaterial||Ke.clearcoat===0)return;const Je=this.writer,tt=Je.extensionsUsed,st={};if(st.clearcoatFactor=Ke.clearcoat,Ke.clearcoatMap){const rt={index:Je.processTexture(Ke.clearcoatMap)};Je.applyTextureTransform(rt,Ke.clearcoatMap),st.clearcoatTexture=rt}if(st.clearcoatRoughnessFactor=Ke.clearcoatRoughness,Ke.clearcoatRoughnessMap){const rt={index:Je.processTexture(Ke.clearcoatRoughnessMap)};Je.applyTextureTransform(rt,Ke.clearcoatRoughnessMap),st.clearcoatRoughnessTexture=rt}if(Ke.clearcoatNormalMap){const rt={index:Je.processTexture(Ke.clearcoatNormalMap)};Je.applyTextureTransform(rt,Ke.clearcoatNormalMap),st.clearcoatNormalTexture=rt}Ye.extensions=Ye.extensions||{},Ye.extensions[this.name]=st,tt[this.name]=!0}}class GLTFMaterialsIridescenceExtension{constructor(Ke){this.writer=Ke,this.name="KHR_materials_iridescence"}writeMaterial(Ke,Ye){if(!Ke.isMeshPhysicalMaterial||Ke.iridescence===0)return;const Je=this.writer,tt=Je.extensionsUsed,st={};if(st.iridescenceFactor=Ke.iridescence,Ke.iridescenceMap){const rt={index:Je.processTexture(Ke.iridescenceMap)};Je.applyTextureTransform(rt,Ke.iridescenceMap),st.iridescenceTexture=rt}if(st.iridescenceIor=Ke.iridescenceIOR,st.iridescenceThicknessMinimum=Ke.iridescenceThicknessRange[0],st.iridescenceThicknessMaximum=Ke.iridescenceThicknessRange[1],Ke.iridescenceThicknessMap){const rt={index:Je.processTexture(Ke.iridescenceThicknessMap)};Je.applyTextureTransform(rt,Ke.iridescenceThicknessMap),st.iridescenceThicknessTexture=rt}Ye.extensions=Ye.extensions||{},Ye.extensions[this.name]=st,tt[this.name]=!0}}class GLTFMaterialsTransmissionExtension{constructor(Ke){this.writer=Ke,this.name="KHR_materials_transmission"}writeMaterial(Ke,Ye){if(!Ke.isMeshPhysicalMaterial||Ke.transmission===0)return;const Je=this.writer,tt=Je.extensionsUsed,st={};if(st.transmissionFactor=Ke.transmission,Ke.transmissionMap){const rt={index:Je.processTexture(Ke.transmissionMap)};Je.applyTextureTransform(rt,Ke.transmissionMap),st.transmissionTexture=rt}Ye.extensions=Ye.extensions||{},Ye.extensions[this.name]=st,tt[this.name]=!0}}class GLTFMaterialsVolumeExtension{constructor(Ke){this.writer=Ke,this.name="KHR_materials_volume"}writeMaterial(Ke,Ye){if(!Ke.isMeshPhysicalMaterial||Ke.transmission===0)return;const Je=this.writer,tt=Je.extensionsUsed,st={};if(st.thicknessFactor=Ke.thickness,Ke.thicknessMap){const rt={index:Je.processTexture(Ke.thicknessMap)};Je.applyTextureTransform(rt,Ke.thicknessMap),st.thicknessTexture=rt}st.attenuationDistance=Ke.attenuationDistance,st.attenuationColor=Ke.attenuationColor.toArray(),Ye.extensions=Ye.extensions||{},Ye.extensions[this.name]=st,tt[this.name]=!0}}class GLTFMaterialsIorExtension{constructor(Ke){this.writer=Ke,this.name="KHR_materials_ior"}writeMaterial(Ke,Ye){if(!Ke.isMeshPhysicalMaterial||Ke.ior===1.5)return;const tt=this.writer.extensionsUsed,st={};st.ior=Ke.ior,Ye.extensions=Ye.extensions||{},Ye.extensions[this.name]=st,tt[this.name]=!0}}class GLTFMaterialsSpecularExtension{constructor(Ke){this.writer=Ke,this.name="KHR_materials_specular"}writeMaterial(Ke,Ye){if(!Ke.isMeshPhysicalMaterial||Ke.specularIntensity===1&&Ke.specularColor.equals(DEFAULT_SPECULAR_COLOR)&&!Ke.specularIntensityMap&&!Ke.specularColorTexture)return;const Je=this.writer,tt=Je.extensionsUsed,st={};if(Ke.specularIntensityMap){const rt={index:Je.processTexture(Ke.specularIntensityMap)};Je.applyTextureTransform(rt,Ke.specularIntensityMap),st.specularTexture=rt}if(Ke.specularColorMap){const rt={index:Je.processTexture(Ke.specularColorMap)};Je.applyTextureTransform(rt,Ke.specularColorMap),st.specularColorTexture=rt}st.specularFactor=Ke.specularIntensity,st.specularColorFactor=Ke.specularColor.toArray(),Ye.extensions=Ye.extensions||{},Ye.extensions[this.name]=st,tt[this.name]=!0}}GLTFExporter.Utils={insertKeyframe:function(Xe,Ke){const Je=Xe.getValueSize(),tt=new Xe.TimeBufferType(Xe.times.length+1),st=new Xe.ValueBufferType(Xe.values.length+Je),rt=Xe.createInterpolant(new Xe.ValueBufferType(Je));let it;if(Xe.times.length===0){tt[0]=Ke;for(let ot=0;ot<Je;ot++)st[ot]=0;it=0}else if(Ke<Xe.times[0]){if(Math.abs(Xe.times[0]-Ke)<.001)return 0;tt[0]=Ke,tt.set(Xe.times,1),st.set(rt.evaluate(Ke),0),st.set(Xe.values,Je),it=0}else if(Ke>Xe.times[Xe.times.length-1]){if(Math.abs(Xe.times[Xe.times.length-1]-Ke)<.001)return Xe.times.length-1;tt[tt.length-1]=Ke,tt.set(Xe.times,0),st.set(Xe.values,0),st.set(rt.evaluate(Ke),Xe.values.length),it=tt.length-1}else for(let ot=0;ot<Xe.times.length;ot++){if(Math.abs(Xe.times[ot]-Ke)<.001)return ot;if(Xe.times[ot]<Ke&&Xe.times[ot+1]>Ke){tt.set(Xe.times.slice(0,ot+1),0),tt[ot+1]=Ke,tt.set(Xe.times.slice(ot+1),ot+2),st.set(Xe.values.slice(0,(ot+1)*Je),0),st.set(rt.evaluate(Ke),(ot+1)*Je),st.set(Xe.values.slice((ot+1)*Je),(ot+2)*Je),it=ot+1;break}}return Xe.times=tt,Xe.values=st,it},mergeMorphTargetTracks:function(Xe,Ke){const Ye=[],Je={},tt=Xe.tracks;for(let st=0;st<tt.length;++st){let rt=tt[st];const it=PropertyBinding.parseTrackName(rt.name),ot=PropertyBinding.findNode(Ke,it.nodeName);if(it.propertyName!=="morphTargetInfluences"||it.propertyIndex===void 0){Ye.push(rt);continue}if(rt.createInterpolant!==rt.InterpolantFactoryMethodDiscrete&&rt.createInterpolant!==rt.InterpolantFactoryMethodLinear){if(rt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),rt=rt.clone(),rt.setInterpolation(InterpolateLinear)}const at=ot.morphTargetInfluences.length,lt=ot.morphTargetDictionary[it.propertyIndex];if(lt===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+it.propertyIndex);let ut;if(Je[ot.uuid]===void 0){ut=rt.clone();const pt=new ut.ValueBufferType(at*ut.times.length);for(let ft=0;ft<ut.times.length;ft++)pt[ft*at+lt]=ut.values[ft];ut.name=(it.nodeName||"")+".morphTargetInfluences",ut.values=pt,Je[ot.uuid]=ut,Ye.push(ut);continue}const ht=rt.createInterpolant(new rt.ValueBufferType(1));ut=Je[ot.uuid];for(let pt=0;pt<ut.times.length;pt++)ut.values[pt*at+lt]=ht.evaluate(ut.times[pt]);for(let pt=0;pt<rt.times.length;pt++){const ft=this.insertKeyframe(ut,rt.times[pt]);ut.values[ft*at+lt]=rt.values[pt]}}return Xe.tracks=Ye,Xe}};/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const compatibleObject=Xe=>Xe.material!==void 0&&Xe.userData&&Xe.userData.variantMaterials&&!!Array.from(Xe.userData.variantMaterials.values()).filter(Ke=>compatibleMaterial(Ke.material)),compatibleMaterial=Xe=>Xe&&Xe.isMaterial&&!Array.isArray(Xe);class GLTFExporterMaterialsVariantsExtension{constructor(Ke){this.writer=Ke,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(Ke){const Ye=new Set;for(const Je of Ke)Je.traverse(tt=>{if(!compatibleObject(tt))return;const st=tt.userData.variantMaterials,rt=tt.userData.variantData;for(const[it,ot]of rt){const at=st.get(ot.index);at&&compatibleMaterial(at.material)&&Ye.add(it)}});Ye.forEach(Je=>this.variantNames.push(Je))}writeMesh(Ke,Ye){if(!compatibleObject(Ke))return;const Je=Ke.userData,tt=Je.variantMaterials,st=Je.variantData,rt=new Map,it=new Map,ot=Array.from(st.values()).sort((ut,ht)=>ut.index-ht.index);for(const[ut,ht]of ot.entries())it.set(ht.index,ut);for(const ut of st.values()){const ht=tt.get(ut.index);if(!ht||!compatibleMaterial(ht.material))continue;const pt=this.writer.processMaterial(ht.material);rt.has(pt)||rt.set(pt,{material:pt,variants:[]}),rt.get(pt).variants.push(it.get(ut.index))}const at=Array.from(rt.values()).map((ut=>ut.variants.sort((ht,pt)=>ht-pt)&&ut)).sort((ut,ht)=>ut.material-ht.material);if(at.length===0)return;const lt=compatibleMaterial(Je.originalMaterial)?this.writer.processMaterial(Je.originalMaterial):-1;for(const ut of Ye.primitives)lt>=0&&(ut.material=lt),ut.extensions=ut.extensions||{},ut.extensions[this.name]={mappings:at}}afterParse(){if(this.variantNames.length===0)return;const Ke=this.writer.json;Ke.extensions=Ke.extensions||{};const Ye=this.variantNames.map(Je=>({name:Je}));Ke.extensions[this.name]={variants:Ye},this.writer.extensionsUsed[this.name]=!0}}class SessionLightProbe{constructor(Ke,Ye,Je,tt,st){this.xrLight=Ke,this.renderer=Ye,this.lightProbe=Je,this.xrWebGLBinding=null,this.estimationStartCallback=st,this.frameCallback=this.onXRFrame.bind(this);const rt=Ye.xr.getSession();if(tt&&"XRWebGLBinding"in window){const it=new WebGLCubeRenderTarget(16);Ke.environment=it.texture;const ot=Ye.getContext();switch(rt.preferredReflectionFormat){case"srgba8":ot.getExtension("EXT_sRGB");break;case"rgba16f":ot.getExtension("OES_texture_half_float");break}this.xrWebGLBinding=new XRWebGLBinding(rt,ot),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}rt.requestAnimationFrame(this.frameCallback)}updateReflection(){const Ke=this.renderer.properties.get(this.xrLight.environment);if(Ke){const Ye=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);Ye&&(Ke.__webglTexture=Ye,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(Ke,Ye){if(!this.xrLight)return;Ye.session.requestAnimationFrame(this.frameCallback);const tt=Ye.getLightEstimate(this.lightProbe);if(tt){this.xrLight.lightProbe.sh.fromArray(tt.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const st=Math.max(1,Math.max(tt.primaryLightIntensity.x,Math.max(tt.primaryLightIntensity.y,tt.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(tt.primaryLightIntensity.x/st,tt.primaryLightIntensity.y/st,tt.primaryLightIntensity.z/st),this.xrLight.directionalLight.intensity=st,this.xrLight.directionalLight.position.copy(tt.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class XREstimatedLight extends Group$1{constructor(Ke,Ye=!0){super(),this.lightProbe=new LightProbe,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new DirectionalLight,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let Je=null,tt=!1;Ke.xr.addEventListener("sessionstart",()=>{const st=Ke.xr.getSession();"requestLightProbe"in st&&st.requestLightProbe({reflectionFormat:st.preferredReflectionFormat}).then(rt=>{Je=new SessionLightProbe(this,Ke,rt,Ye,()=>{tt=!0,this.dispatchEvent({type:"estimationstart"})})})}),Ke.xr.addEventListener("sessionend",()=>{Je&&(Je.dispose(),Je=null),tt&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{Je&&(Je.dispose(),Je=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SETTLING_TIME=1e4,MIN_DECAY_MILLISECONDS=.001,DECAY_MILLISECONDS=50;class Damper{constructor(Ke=DECAY_MILLISECONDS){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(Ke)}setDecayTime(Ke){this.naturalFrequency=1/Math.max(MIN_DECAY_MILLISECONDS,Ke)}update(Ke,Ye,Je,tt){const st=2e-4*this.naturalFrequency;if(Ke==null||tt===0||Ke===Ye&&this.velocity===0)return Ye;if(Je<0)return Ke;const rt=Ke-Ye,it=this.velocity+this.naturalFrequency*rt,ot=rt+Je*it,at=Math.exp(-this.naturalFrequency*Je),lt=(it-this.naturalFrequency*ot)*at,ut=-this.naturalFrequency*(lt+it*at);return Math.abs(lt)<st*Math.abs(tt)&&ut*rt>=0?(this.velocity=0,Ye):(this.velocity=lt,Ye+ot*at)}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RADIUS=.2,LINE_WIDTH=.03,MAX_OPACITY=.75,SEGMENTS=12,DELTA_PHI=Math.PI/(2*SEGMENTS),vector2$1=new Vector2,addCorner=(Xe,Ke,Ye)=>{let Je=Ke>0?Ye>0?0:-Math.PI/2:Ye>0?Math.PI/2:Math.PI;for(let tt=0;tt<=SEGMENTS;++tt)Xe.push(Ke+(RADIUS-LINE_WIDTH)*Math.cos(Je),Ye+(RADIUS-LINE_WIDTH)*Math.sin(Je),0,Ke+RADIUS*Math.cos(Je),Ye+RADIUS*Math.sin(Je),0),Je+=DELTA_PHI};class PlacementBox extends Mesh{constructor(Ke,Ye){const Je=new BufferGeometry,tt=[],st=[],{size:rt,boundingBox:it}=Ke,ot=rt.x/2,at=(Ye==="back"?rt.y:rt.z)/2;addCorner(st,ot,at),addCorner(st,-ot,at),addCorner(st,-ot,-at),addCorner(st,ot,-at);const lt=st.length/3;for(let pt=0;pt<lt-2;pt+=2)tt.push(pt,pt+1,pt+3,pt,pt+3,pt+2);const ut=lt-2;tt.push(ut,ut+1,1,ut,1,0),Je.setAttribute("position",new Float32BufferAttribute(st,3)),Je.setIndex(tt),super(Je),this.side=Ye;const ht=this.material;switch(ht.side=DoubleSide,ht.transparent=!0,ht.opacity=0,this.goalOpacity=0,this.opacityDamper=new Damper,this.hitPlane=new Mesh(new PlaneGeometry(2*(ot+RADIUS),2*(at+RADIUS))),this.hitPlane.visible=!1,this.hitPlane.material.side=DoubleSide,this.add(this.hitPlane),it.getCenter(this.position),Ye){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=it.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=it.min.z,this.position.z=this.shadowHeight}Ke.target.add(this),this.offsetHeight=0}getHit(Ke,Ye,Je){vector2$1.set(Ye,-Je),this.hitPlane.visible=!0;const tt=Ke.positionAndNormalFromPoint(vector2$1,this.hitPlane);return this.hitPlane.visible=!1,tt==null?null:tt.position}getExpandedHit(Ke,Ye,Je){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const tt=this.getHit(Ke,Ye,Je);return this.hitPlane.scale.set(1,1,1),tt}set offsetHeight(Ke){Ke-=.001,this.side==="back"?this.position.z=this.shadowHeight+Ke:this.position.y=this.shadowHeight+Ke}get offsetHeight(){return this.side==="back"?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(Ke){this.goalOpacity=Ke?MAX_OPACITY:0}updateOpacity(Ke){const Ye=this.material;Ye.opacity=this.opacityDamper.update(Ye.opacity,this.goalOpacity,Ke,1),this.visible=Ye.opacity>0}dispose(){var Ke;const{geometry:Ye,material:Je}=this.hitPlane;Ye.dispose(),Je.dispose(),this.geometry.dispose(),this.material.dispose(),(Ke=this.parent)===null||Ke===void 0||Ke.remove(this)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const numberNode=(Xe,Ke)=>({type:"number",number:Xe,unit:Ke}),parseExpressions=(()=>{const Xe={};return Ye=>{const Je=Ye;if(Je in Xe)return Xe[Je];const tt=[];let st=0;for(;Ye;){if(++st>1e3){Ye="";break}const rt=parseExpression(Ye),it=rt.nodes[0];if(it==null||it.terms.length===0)break;tt.push(it),Ye=rt.remainingInput}return Xe[Je]=tt}})(),parseExpression=(()=>{const Xe=/^(\-\-|[a-z\u0240-\uffff])/i,Ke=/^([\*\+\/]|[\-]\s)/i,Ye=/^[\),]/;return st=>{const rt=[];for(;st.length&&(st=st.trim(),!Ye.test(st));)if(st[0]==="("){const{nodes:it,remainingInput:ot}=parseFunctionArguments(st);st=ot,rt.push({type:"function",name:{type:"ident",value:"calc"},arguments:it})}else if(Xe.test(st)){const it=parseIdent(st),ot=it.nodes[0];if(st=it.remainingInput,st[0]==="("){const{nodes:at,remainingInput:lt}=parseFunctionArguments(st);rt.push({type:"function",name:ot,arguments:at}),st=lt}else rt.push(ot)}else if(Ke.test(st))rt.push({type:"operator",value:st[0]}),st=st.slice(1);else{const{nodes:it,remainingInput:ot}=st[0]==="#"?parseHex(st):parseNumber(st);if(it.length===0)break;rt.push(it[0]),st=ot}return{nodes:[{type:"expression",terms:rt}],remainingInput:st}}})(),parseIdent=(()=>{const Xe=/[^a-z0-9_\-\u0240-\uffff]/i;return Ke=>{const Ye=Ke.match(Xe),Je=Ye==null?Ke:Ke.substr(0,Ye.index),tt=Ye==null?"":Ke.substr(Ye.index);return{nodes:[{type:"ident",value:Je}],remainingInput:tt}}})(),parseNumber=(()=>{const Xe=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,Ke=/^[a-z%]+/i,Ye=/^(m|mm|cm|rad|deg|[%])$/;return Je=>{const tt=Je.match(Xe),st=tt==null?"0":tt[0];Je=st==null?Je:Je.slice(st.length);const rt=Je.match(Ke);let it=rt!=null&&rt[0]!==""?rt[0]:null;const ot=rt==null?Je:Je.slice(it.length);return it!=null&&!Ye.test(it)&&(it=null),{nodes:[{type:"number",number:parseFloat(st)||0,unit:it}],remainingInput:ot}}})(),parseHex=(()=>{const Xe=/^[a-f0-9]*/i;return Ke=>{Ke=Ke.slice(1).trim();const Ye=Ke.match(Xe);return{nodes:Ye==null?[]:[{type:"hex",value:Ye[0]}],remainingInput:Ye==null?Ke:Ke.slice(Ye[0].length)}}})(),parseFunctionArguments=Xe=>{const Ke=[];for(Xe=Xe.slice(1).trim();Xe.length;){const Ye=parseExpression(Xe);if(Ke.push(Ye.nodes[0]),Xe=Ye.remainingInput.trim(),Xe[0]===",")Xe=Xe.slice(1).trim();else if(Xe[0]===")"){Xe=Xe.slice(1);break}}return{nodes:Ke,remainingInput:Xe}},$visitedTypes=Symbol("visitedTypes");class ASTWalker{constructor(Ke){this[$visitedTypes]=Ke}walk(Ke,Ye){const Je=Ke.slice();for(;Je.length;){const tt=Je.shift();switch(this[$visitedTypes].indexOf(tt.type)>-1&&Ye(tt),tt.type){case"expression":Je.unshift(...tt.terms);break;case"function":Je.unshift(tt.name,...tt.arguments);break}}}}const ZERO=Object.freeze({type:"number",number:0,unit:null});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const degreesToRadians=(Xe,Ke=0)=>{let{number:Ye,unit:Je}=Xe;if(!isFinite(Ye))Ye=Ke,Je="rad";else if(Xe.unit==="rad"||Xe.unit==null)return Xe;return{type:"number",number:(Je==="deg"&&Ye!=null?Ye:0)*Math.PI/180,unit:"rad"}},lengthToBaseMeters=(Xe,Ke=0)=>{let{number:Ye,unit:Je}=Xe;if(!isFinite(Ye))Ye=Ke,Je="m";else if(Xe.unit==="m")return Xe;let tt;switch(Je){default:tt=1;break;case"cm":tt=1/100;break;case"mm":tt=1/1e3;break}return{type:"number",number:tt*Ye,unit:"m"}},normalizeUnit=(()=>{const Xe=Ye=>Ye,Ke={rad:Xe,deg:degreesToRadians,m:Xe,mm:lengthToBaseMeters,cm:lengthToBaseMeters};return(Ye,Je=ZERO)=>{isFinite(Ye.number)||(Ye.number=Je.number,Ye.unit=Je.unit);const{unit:tt}=Ye;if(tt==null)return Ye;const st=Ke[tt];return st==null?Je:st(Ye)}})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$7,_b$6,_c$4;const $evaluate=Symbol("evaluate"),$lastValue=Symbol("lastValue");class Evaluator{constructor(){this[_a$7]=null}static evaluatableFor(Ke,Ye=ZERO){if(Ke instanceof Evaluator)return Ke;if(Ke.type==="number")return Ke.unit==="%"?new PercentageEvaluator(Ke,Ye):Ke;switch(Ke.name.value){case"calc":return new CalcEvaluator(Ke,Ye);case"env":return new EnvEvaluator(Ke)}return ZERO}static evaluate(Ke){return Ke instanceof Evaluator?Ke.evaluate():Ke}static isConstant(Ke){return Ke instanceof Evaluator?Ke.isConstant:!0}static applyIntrinsics(Ke,Ye){const{basis:Je,keywords:tt}=Ye,{auto:st}=tt;return Je.map((rt,it)=>{const ot=st[it]==null?rt:st[it];let at=Ke[it]?Ke[it]:ot;if(at.type==="ident"){const lt=at.value;lt in tt&&(at=tt[lt][it])}return(at==null||at.type==="ident")&&(at=ot),at.unit==="%"?numberNode(at.number/100*rt.number,rt.unit):(at=normalizeUnit(at,rt),at.unit!==rt.unit?rt:at)})}get isConstant(){return!1}evaluate(){return(!this.isConstant||this[$lastValue]==null)&&(this[$lastValue]=this[$evaluate]()),this[$lastValue]}}_a$7=$lastValue;const $percentage=Symbol("percentage"),$basis=Symbol("basis");class PercentageEvaluator extends Evaluator{constructor(Ke,Ye){super(),this[$percentage]=Ke,this[$basis]=Ye}get isConstant(){return!0}[$evaluate](){return numberNode(this[$percentage].number/100*this[$basis].number,this[$basis].unit)}}const $identNode=Symbol("identNode");class EnvEvaluator extends Evaluator{constructor(Ke){super(),this[_b$6]=null;const Ye=Ke.arguments.length?Ke.arguments[0].terms[0]:null;Ye!=null&&Ye.type==="ident"&&(this[$identNode]=Ye)}get isConstant(){return!1}[(_b$6=$identNode,$evaluate)](){if(this[$identNode]!=null)switch(this[$identNode].value){case"window-scroll-y":const Ke=window.pageYOffset,Ye=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);return{type:"number",number:Ke/(Ye-window.innerHeight)||0,unit:null}}return ZERO}}const IS_MULTIPLICATION_RE=/[\*\/]/,$evaluator=Symbol("evaluator");class CalcEvaluator extends Evaluator{constructor(Ke,Ye=ZERO){if(super(),this[_c$4]=null,Ke.arguments.length!==1)return;const Je=Ke.arguments[0].terms.slice(),tt=[];for(;Je.length;){const st=Je.shift();if(tt.length>0){const rt=tt[tt.length-1];if(rt.type==="operator"&&IS_MULTIPLICATION_RE.test(rt.value)){const it=tt.pop(),ot=tt.pop();if(ot==null)return;tt.push(new OperatorEvaluator(it,Evaluator.evaluatableFor(ot,Ye),Evaluator.evaluatableFor(st,Ye)));continue}}tt.push(st.type==="operator"?st:Evaluator.evaluatableFor(st,Ye))}for(;tt.length>2;){const[st,rt,it]=tt.splice(0,3);if(rt.type!=="operator")return;tt.unshift(new OperatorEvaluator(rt,Evaluator.evaluatableFor(st,Ye),Evaluator.evaluatableFor(it,Ye)))}tt.length===1&&(this[$evaluator]=tt[0])}get isConstant(){return this[$evaluator]==null||Evaluator.isConstant(this[$evaluator])}[(_c$4=$evaluator,$evaluate)](){return this[$evaluator]!=null?Evaluator.evaluate(this[$evaluator]):ZERO}}const $operator=Symbol("operator"),$left=Symbol("left"),$right=Symbol("right");class OperatorEvaluator extends Evaluator{constructor(Ke,Ye,Je){super(),this[$operator]=Ke,this[$left]=Ye,this[$right]=Je}get isConstant(){return Evaluator.isConstant(this[$left])&&Evaluator.isConstant(this[$right])}[$evaluate](){const Ke=normalizeUnit(Evaluator.evaluate(this[$left])),Ye=normalizeUnit(Evaluator.evaluate(this[$right])),{number:Je,unit:tt}=Ke,{number:st,unit:rt}=Ye;if(rt!=null&&tt!=null&&rt!=tt)return ZERO;const it=tt||rt;let ot;switch(this[$operator].value){case"+":ot=Je+st;break;case"-":ot=Je-st;break;case"/":ot=Je/st;break;case"*":ot=Je*st;break;default:return ZERO}return{type:"number",number:ot,unit:it}}}const $evaluatables=Symbol("evaluatables"),$intrinsics=Symbol("intrinsics");class StyleEvaluator extends Evaluator{constructor(Ke,Ye){super(),this[$intrinsics]=Ye;const Je=Ke[0],tt=Je!=null?Je.terms:[];this[$evaluatables]=Ye.basis.map((st,rt)=>{const it=tt[rt];return it==null?{type:"ident",value:"auto"}:it.type==="ident"?it:Evaluator.evaluatableFor(it,st)})}get isConstant(){for(const Ke of this[$evaluatables])if(!Evaluator.isConstant(Ke))return!1;return!0}[$evaluate](){const Ke=this[$evaluatables].map(Ye=>Evaluator.evaluate(Ye));return Evaluator.applyIntrinsics(Ke,this[$intrinsics]).map(Ye=>Ye.number)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$6,_b$5,_c$3,_d$2;const $instances=Symbol("instances"),$activateListener=Symbol("activateListener"),$deactivateListener=Symbol("deactivateListener"),$notifyInstances=Symbol("notifyInstances"),$notify=Symbol("notify"),$scrollCallback=Symbol("callback");class ScrollObserver{constructor(Ke){this[$scrollCallback]=Ke}static[$notifyInstances](){for(const Ke of ScrollObserver[$instances])Ke[$notify]()}static[(_a$6=$instances,$activateListener)](){window.addEventListener("scroll",this[$notifyInstances],{passive:!0})}static[$deactivateListener](){window.removeEventListener("scroll",this[$notifyInstances])}observe(){ScrollObserver[$instances].size===0&&ScrollObserver[$activateListener](),ScrollObserver[$instances].add(this)}disconnect(){ScrollObserver[$instances].delete(this),ScrollObserver[$instances].size===0&&ScrollObserver[$deactivateListener]()}[$notify](){this[$scrollCallback]()}}ScrollObserver[_a$6]=new Set;const $computeStyleCallback=Symbol("computeStyleCallback"),$astWalker=Symbol("astWalker"),$dependencies=Symbol("dependencies"),$onScroll=Symbol("onScroll");class StyleEffector{constructor(Ke){this[_b$5]={},this[_c$3]=new ASTWalker(["function"]),this[_d$2]=()=>{this[$computeStyleCallback]({relatedState:"window-scroll"})},this[$computeStyleCallback]=Ke}observeEffectsFor(Ke){const Ye={},Je=this[$dependencies];this[$astWalker].walk(Ke,tt=>{const{name:st}=tt,it=tt.arguments[0].terms[0];if(!(st.value!=="env"||it==null||it.type!=="ident"))switch(it.value){case"window-scroll-y":if(Ye["window-scroll"]==null){const ot="window-scroll"in Je?Je["window-scroll"]:new ScrollObserver(this[$onScroll]);ot.observe(),delete Je["window-scroll"],Ye["window-scroll"]=ot}break}});for(const tt in Je)Je[tt].disconnect();this[$dependencies]=Ye}dispose(){for(const Ke in this[$dependencies])this[$dependencies][Ke].disconnect()}}_b$5=$dependencies,_c$3=$astWalker,_d$2=$onScroll;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const style$1=Xe=>{const Ke=Xe.observeEffects||!1,Ye=Xe.intrinsics instanceof Function?Xe.intrinsics:(()=>Xe.intrinsics);return(Je,tt)=>{const st=Je.updated,rt=Je.connectedCallback,it=Je.disconnectedCallback,ot=Symbol(`${tt}StyleEffector`),at=Symbol(`${tt}StyleEvaluator`),lt=Symbol(`${tt}UpdateEvaluator`),ut=Symbol(`${tt}EvaluateAndSync`);Object.defineProperties(Je,{[ot]:{value:null,writable:!0},[at]:{value:null,writable:!0},[lt]:{value:function(){const ht=parseExpressions(this[tt]);this[at]=new StyleEvaluator(ht,Ye(this)),this[ot]==null&&Ke&&(this[ot]=new StyleEffector(()=>this[ut]())),this[ot]!=null&&this[ot].observeEffectsFor(ht)}},[ut]:{value:function(){if(this[at]==null)return;const ht=this[at].evaluate();this[Xe.updateHandler](ht)}},updated:{value:function(ht){ht.has(tt)&&(this[lt](),this[ut]()),st.call(this,ht)}},connectedCallback:{value:function(){rt.call(this),this.requestUpdate(tt,this[tt])}},disconnectedCallback:{value:function(){it.call(this),this[ot]!=null&&(this[ot].dispose(),this[ot]=null)}}})}};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const easeInOutQuad=Xe=>Xe<.5?2*Xe*Xe:-1+(4-2*Xe)*Xe,interpolate=(Xe,Ke,Ye=easeInOutQuad)=>Je=>Xe+(Ke-Xe)*Ye(Je),sequence=(Xe,Ke)=>{const Ye=(tt=>st=>tt+=st),Je=Ke.map(Ye(0));return tt=>{tt=clamp$2(tt,0,1),tt*=Je[Je.length-1];const st=Je.findIndex(ot=>ot>=tt),rt=st<1?0:Je[st-1],it=Je[st];return Xe[st]((tt-rt)/(it-rt))}},timeline=Xe=>{const Ke=[],Ye=[];let Je=Xe.initialValue;for(let tt=0;tt<Xe.keyframes.length;++tt){const st=Xe.keyframes[tt],{value:rt,frames:it}=st,ot=st.ease||easeInOutQuad,at=interpolate(Je,rt,ot);Ke.push(at),Ye.push(it),Je=rt}return sequence(Ke,Ye)};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$6=function(Xe,Ke,Ye,Je){var tt=arguments.length,st=tt<3?Ke:Je===null?Je=Object.getOwnPropertyDescriptor(Ke,Ye):Je,rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")st=Reflect.decorate(Xe,Ke,Ye,Je);else for(var it=Xe.length-1;it>=0;it--)(rt=Xe[it])&&(st=(tt<3?rt(st):tt>3?rt(Ke,Ye,st):rt(Ke,Ye))||st);return tt>3&&st&&Object.defineProperty(Ke,Ye,st),st};const PROMPT_ANIMATION_TIME=5e3,wiggle=timeline({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),fade=timeline({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),DEFAULT_FOV_DEG=30,DEFAULT_MIN_FOV_DEG=12,DEFAULT_CAMERA_ORBIT="0deg 75deg 105%",DEFAULT_CAMERA_TARGET="auto auto auto",DEFAULT_FIELD_OF_VIEW="auto",MINIMUM_RADIUS_RATIO=2.2,AZIMUTHAL_QUADRANT_LABELS=["front","right","back","left"],POLAR_TRIENT_LABELS=["upper-","","lower-"],DEFAULT_INTERACTION_PROMPT_THRESHOLD=3e3,INTERACTION_PROMPT=". Use mouse, touch or arrow keys to move.",InteractionPromptStrategy={AUTO:"auto"},InteractionPromptStyle={BASIC:"basic",WIGGLE:"wiggle"},TouchAction={NONE:"none"},fieldOfViewIntrinsics=()=>({basis:[degreesToRadians(numberNode(DEFAULT_FOV_DEG,"deg"))],keywords:{auto:[null]}}),minFieldOfViewIntrinsics=()=>({basis:[degreesToRadians(numberNode(DEFAULT_MIN_FOV_DEG,"deg"))],keywords:{auto:[null]}}),cameraOrbitIntrinsics=(()=>{const Xe=parseExpressions(DEFAULT_CAMERA_ORBIT)[0].terms,Ke=normalizeUnit(Xe[0]),Ye=normalizeUnit(Xe[1]);return Je=>{const tt=Je[$scene].idealCameraDistance();return{basis:[Ke,Ye,numberNode(tt,"m")],keywords:{auto:[null,null,numberNode(105,"%")]}}}})(),minCameraOrbitIntrinsics=Xe=>{const Ke=MINIMUM_RADIUS_RATIO*Xe[$scene].boundingSphere.radius;return{basis:[numberNode(-1/0,"rad"),numberNode(Math.PI/8,"rad"),numberNode(Ke,"m")],keywords:{auto:[null,null,null]}}},maxCameraOrbitIntrinsics=Xe=>{const Ke=cameraOrbitIntrinsics(Xe),Je=new StyleEvaluator([],Ke).evaluate()[2];return{basis:[numberNode(1/0,"rad"),numberNode(Math.PI-Math.PI/8,"rad"),numberNode(Je,"m")],keywords:{auto:[null,null,null]}}},cameraTargetIntrinsics=Xe=>{const Ke=Xe[$scene].boundingBox.getCenter(new Vector3);return{basis:[numberNode(Ke.x,"m"),numberNode(Ke.y,"m"),numberNode(Ke.z,"m")],keywords:{auto:[null,null,null]}}},HALF_PI=Math.PI/2,THIRD_PI=Math.PI/3,QUARTER_PI=HALF_PI/2,TAU=2*Math.PI,$controls=Symbol("controls"),$panElement=Symbol("panElement"),$promptElement=Symbol("promptElement"),$promptAnimatedContainer=Symbol("promptAnimatedContainer"),$fingerAnimatedContainers=Symbol("fingerAnimatedContainers"),$deferInteractionPrompt=Symbol("deferInteractionPrompt"),$updateAria=Symbol("updateAria"),$updateCameraForRadius=Symbol("updateCameraForRadius"),$cancelPrompts=Symbol("cancelPrompts"),$onChange=Symbol("onChange"),$onPointerChange=Symbol("onPointerChange"),$waitingToPromptUser=Symbol("waitingToPromptUser"),$userHasInteracted=Symbol("userHasInteracted"),$promptElementVisibleTime=Symbol("promptElementVisibleTime"),$lastPromptOffset=Symbol("lastPromptOffset"),$cancellationSource=Symbol("cancellationSource"),$lastSpherical=Symbol("lastSpherical"),$jumpCamera=Symbol("jumpCamera"),$initialized=Symbol("initialized"),$maintainThetaPhi=Symbol("maintainThetaPhi"),$syncCameraOrbit=Symbol("syncCameraOrbit"),$syncFieldOfView=Symbol("syncFieldOfView"),$syncCameraTarget=Symbol("syncCameraTarget"),$syncMinCameraOrbit=Symbol("syncMinCameraOrbit"),$syncMaxCameraOrbit=Symbol("syncMaxCameraOrbit"),$syncMinFieldOfView=Symbol("syncMinFieldOfView"),$syncMaxFieldOfView=Symbol("syncMaxFieldOfView"),ControlsMixin=Xe=>{var Ke,Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht,pt,ft,xt,vt,At;class Et extends Xe{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=DEFAULT_CAMERA_ORBIT,this.cameraTarget=DEFAULT_CAMERA_TARGET,this.fieldOfView=DEFAULT_FIELD_OF_VIEW,this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=DEFAULT_INTERACTION_PROMPT_THRESHOLD,this.interactionPrompt=InteractionPromptStrategy.AUTO,this.interactionPromptStyle=InteractionPromptStyle.WIGGLE,this.orbitSensitivity=1,this.touchAction=TouchAction.NONE,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=DECAY_MILLISECONDS,this[Ke]=this.shadowRoot.querySelector(".interaction-prompt"),this[Ye]=this.shadowRoot.querySelector("#prompt"),this[Je]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[tt]=this.shadowRoot.querySelector(".pan-target"),this[st]=0,this[rt]=1/0,this[it]=!1,this[ot]=!1,this[at]=ChangeSource.AUTOMATIC,this[lt]=new SmoothControls(this[$scene].camera,this[$userInputElement],this[$scene]),this[ut]=new Spherical,this[ht]=!1,this[pt]=!1,this[ft]=!1,this[xt]=()=>{const _t=this[$controls].changeSource;this[$cancellationSource]=_t,_t===ChangeSource.USER_INTERACTION&&(this[$userHasInteracted]=!0,this[$deferInteractionPrompt]())},this[vt]=()=>{this[$updateAria](),this[$needsRender]();const _t=this[$controls].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:_t}}))},this[At]=_t=>{_t.type==="pointer-change-start"?this[$container].classList.add("pointer-tumbling"):this[$container].classList.remove("pointer-tumbling")}}get inputSensitivity(){return this[$controls].inputSensitivity}set inputSensitivity(_t){this[$controls].inputSensitivity=_t}getCameraOrbit(){const{theta:_t,phi:Ct,radius:Tt}=this[$lastSpherical];return{theta:_t,phi:Ct,radius:Tt,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return toVector3D(this[$renderer].isPresenting?this[$renderer].arRenderer.target:this[$scene].getTarget())}getFieldOfView(){return this[$controls].getFieldOfView()}getMinimumFieldOfView(){return this[$controls].options.minimumFieldOfView}getMaximumFieldOfView(){return this[$controls].options.maximumFieldOfView}getIdealAspect(){return this[$scene].idealAspect}jumpCameraToGoal(){this[$jumpCamera]=!0,this.requestUpdate($jumpCamera,!1)}resetInteractionPrompt(){this[$lastPromptOffset]=0,this[$promptElementVisibleTime]=1/0,this[$userHasInteracted]=!1,this[$waitingToPromptUser]=this.interactionPrompt===InteractionPromptStrategy.AUTO&&this.cameraControls}zoom(_t){const Ct=new WheelEvent("wheel",{deltaY:-30*_t});this[$userInputElement].dispatchEvent(Ct)}connectedCallback(){super.connectedCallback(),this[$controls].addEventListener("user-interaction",this[$cancelPrompts]),this[$controls].addEventListener("pointer-change-start",this[$onPointerChange]),this[$controls].addEventListener("pointer-change-end",this[$onPointerChange])}disconnectedCallback(){super.disconnectedCallback(),this[$controls].removeEventListener("user-interaction",this[$cancelPrompts]),this[$controls].removeEventListener("pointer-change-start",this[$onPointerChange]),this[$controls].removeEventListener("pointer-change-end",this[$onPointerChange])}updated(_t){super.updated(_t);const Ct=this[$controls],Tt=this[$scene];if(_t.has("cameraControls")&&(this.cameraControls?(Ct.enableInteraction(),this.interactionPrompt===InteractionPromptStrategy.AUTO&&(this[$waitingToPromptUser]=!0)):(Ct.disableInteraction(),this[$deferInteractionPrompt]()),this[$userInputElement].setAttribute("aria-label",this[$ariaLabel])),_t.has("disableZoom")&&(Ct.disableZoom=this.disableZoom),_t.has("disablePan")&&(Ct.enablePan=!this.disablePan),_t.has("disableTap")&&(Ct.enableTap=!this.disableTap),(_t.has("interactionPrompt")||_t.has("cameraControls")||_t.has("src"))&&(this.interactionPrompt===InteractionPromptStrategy.AUTO&&this.cameraControls&&!this[$userHasInteracted]?this[$waitingToPromptUser]=!0:this[$deferInteractionPrompt]()),_t.has("interactionPromptStyle")&&(this[$promptAnimatedContainer].style.opacity=this.interactionPromptStyle==InteractionPromptStyle.BASIC?"1":"0"),_t.has("touchAction")){const St=this.touchAction;Ct.applyOptions({touchAction:St}),Ct.updateTouchActionStyle()}_t.has("orbitSensitivity")&&(Ct.orbitSensitivity=this.orbitSensitivity),_t.has("interpolationDecay")&&(Ct.setDamperDecayTime(this.interpolationDecay),Tt.setTargetDamperDecayTime(this.interpolationDecay)),this[$jumpCamera]===!0&&Promise.resolve().then(()=>{Ct.jumpToGoal(),Tt.jumpToGoal(),this[$onChange](),this[$jumpCamera]=!1})}async updateFraming(){const _t=this[$scene],Ct=_t.adjustedFoV(_t.framedFoVDeg);await _t.updateFraming();const Tt=_t.adjustedFoV(_t.framedFoVDeg),St=this[$controls].getFieldOfView()/Ct;this[$controls].setFieldOfView(Tt*St),this[$maintainThetaPhi]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(_t,Ct,Tt){const St=this[$userInputElement],Rt=this[$fingerAnimatedContainers];if(Rt[0].style.opacity==="1"){console.warn("interact() failed because an existing interaction is running.");return}const Nt=new Array;Nt.push({x:timeline(Ct.x),y:timeline(Ct.y)});const Pt=[{x:Nt[0].x(0),y:Nt[0].y(0)}];Tt!=null&&(Nt.push({x:timeline(Tt.x),y:timeline(Tt.y)}),Pt.push({x:Nt[1].x(0),y:Nt[1].y(0)}));let Bt=performance.now();const{width:Lt,height:zt}=this[$scene],Dt=Qt=>{for(const[jt,Ht]of Pt.entries()){const{style:Yt}=Rt[jt];Yt.transform=`translateX(${Lt*Ht.x}px) translateY(${zt*Ht.y}px)`,Qt==="pointerdown"?Yt.opacity="1":Qt==="pointerup"&&(Yt.opacity="0");const Jt={pointerId:jt-5678,pointerType:"touch",target:St,clientX:Lt*Ht.x,clientY:zt*Ht.y,altKey:!0};St.dispatchEvent(new PointerEvent(Qt,Jt))}},Vt=()=>{const Qt=this[$cancellationSource];if(Qt!==ChangeSource.AUTOMATIC||!St.isConnected){for(const Ht of this[$fingerAnimatedContainers])Ht.style.opacity="0";Dt("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:Qt}})),document.removeEventListener("visibilitychange",Gt);return}const jt=Math.min(1,(performance.now()-Bt)/_t);for(const[Ht,Yt]of Pt.entries())Yt.x=Nt[Ht].x(jt),Yt.y=Nt[Ht].y(jt);Dt("pointermove"),jt<1?requestAnimationFrame(Vt):(Dt("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:ChangeSource.AUTOMATIC}})),document.removeEventListener("visibilitychange",Gt))},Gt=()=>{let Qt=0;document.visibilityState==="hidden"?Qt=performance.now()-Bt:Bt=performance.now()-Qt};document.addEventListener("visibilitychange",Gt),Dt("pointerdown"),this[$cancellationSource]=ChangeSource.AUTOMATIC,requestAnimationFrame(Vt)}[(Ke=$promptElement,Ye=$promptAnimatedContainer,Je=$fingerAnimatedContainers,tt=$panElement,st=$lastPromptOffset,rt=$promptElementVisibleTime,it=$userHasInteracted,ot=$waitingToPromptUser,at=$cancellationSource,lt=$controls,ut=$lastSpherical,ht=$jumpCamera,pt=$initialized,ft=$maintainThetaPhi,$syncFieldOfView)](_t){const Ct=this[$controls],Tt=this[$scene];Tt.framedFoVDeg=_t[0]*180/Math.PI,Ct.changeSource=ChangeSource.NONE,Ct.setFieldOfView(Tt.adjustedFoV(Tt.framedFoVDeg)),this[$cancelPrompts]()}[$syncCameraOrbit](_t){const Ct=this[$controls];if(this[$maintainThetaPhi]){const{theta:Tt,phi:St}=this.getCameraOrbit();_t[0]=Tt,_t[1]=St,this[$maintainThetaPhi]=!1}Ct.changeSource=ChangeSource.NONE,Ct.setOrbit(_t[0],_t[1],_t[2]),this[$cancelPrompts]()}[$syncMinCameraOrbit](_t){this[$controls].applyOptions({minimumAzimuthalAngle:_t[0],minimumPolarAngle:_t[1],minimumRadius:_t[2]}),this.jumpCameraToGoal()}[$syncMaxCameraOrbit](_t){this[$controls].applyOptions({maximumAzimuthalAngle:_t[0],maximumPolarAngle:_t[1],maximumRadius:_t[2]}),this[$updateCameraForRadius](_t[2]),this.jumpCameraToGoal()}[$syncMinFieldOfView](_t){this[$controls].applyOptions({minimumFieldOfView:_t[0]*180/Math.PI}),this.jumpCameraToGoal()}[$syncMaxFieldOfView](_t){const Ct=this[$scene].adjustedFoV(_t[0]*180/Math.PI);this[$controls].applyOptions({maximumFieldOfView:Ct}),this.jumpCameraToGoal()}[$syncCameraTarget](_t){const[Ct,Tt,St]=_t;this[$renderer].arRenderer.isPresenting||this[$scene].setTarget(Ct,Tt,St),this[$controls].changeSource=ChangeSource.NONE,this[$renderer].arRenderer.updateTarget(),this[$cancelPrompts]()}[$tick](_t,Ct){if(super[$tick](_t,Ct),this[$renderer].isPresenting||!this[$getModelIsVisible]())return;const Tt=this[$controls],St=this[$scene],Rt=performance.now();if(this[$waitingToPromptUser]&&this.loaded&&Rt>this[$loadedTime]+this.interactionPromptThreshold&&(this[$waitingToPromptUser]=!1,this[$promptElementVisibleTime]=Rt,this[$promptElement].classList.add("visible")),isFinite(this[$promptElementVisibleTime])&&this.interactionPromptStyle===InteractionPromptStyle.WIGGLE){const Bt=(Rt-this[$promptElementVisibleTime])/PROMPT_ANIMATION_TIME%1,Lt=wiggle(Bt),zt=fade(Bt);if(this[$promptAnimatedContainer].style.opacity=`${zt}`,Lt!==this[$lastPromptOffset]){const Dt=Lt*St.width*.05,Vt=(Lt-this[$lastPromptOffset])*Math.PI/16;this[$promptAnimatedContainer].style.transform=`translateX(${Dt}px)`,Tt.changeSource=ChangeSource.AUTOMATIC,Tt.adjustOrbit(Vt,0,0),this[$lastPromptOffset]=Lt}}const Nt=Tt.update(_t,Ct),Pt=St.updateTarget(Ct);(Nt||Pt)&&this[$onChange]()}[$deferInteractionPrompt](){this[$waitingToPromptUser]=!1,this[$promptElement].classList.remove("visible"),this[$promptElementVisibleTime]=1/0}[$updateCameraForRadius](_t){const Ct=Math.max(this[$scene].boundingSphere.radius,_t),Tt=0,St=2*Ct;this[$controls].updateNearFar(Tt,St)}[$updateAria](){const{theta:_t,phi:Ct}=this[$controls].getCameraSpherical(this[$lastSpherical]),Tt=(4+Math.floor((_t%TAU+QUARTER_PI)/HALF_PI))%4,St=Math.floor(Ct/THIRD_PI),Rt=AZIMUTHAL_QUADRANT_LABELS[Tt],Nt=POLAR_TRIENT_LABELS[St];this[$updateStatus](`View from stage ${Nt}${Rt}`)}get[$ariaLabel](){return super[$ariaLabel]+(this.cameraControls?INTERACTION_PROMPT:"")}async[$onResize](_t){const Ct=this[$controls],Tt=this[$scene],St=Tt.adjustedFoV(Tt.framedFoVDeg);super[$onResize](_t);const Rt=Tt.adjustedFoV(Tt.framedFoVDeg)/St,Nt=Ct.getFieldOfView()*(isFinite(Rt)?Rt:1);Ct.updateAspect(this[$scene].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[$controls].setFieldOfView(Nt),this.jumpCameraToGoal()}[$onModelLoad](){super[$onModelLoad](),this[$initialized]?this[$maintainThetaPhi]=!0:this[$initialized]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}}return xt=$cancelPrompts,vt=$onChange,At=$onPointerChange,__decorate$6([e$4({type:Boolean,attribute:"camera-controls"})],Et.prototype,"cameraControls",void 0),__decorate$6([style$1({intrinsics:cameraOrbitIntrinsics,observeEffects:!0,updateHandler:$syncCameraOrbit}),e$4({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],Et.prototype,"cameraOrbit",void 0),__decorate$6([style$1({intrinsics:cameraTargetIntrinsics,observeEffects:!0,updateHandler:$syncCameraTarget}),e$4({type:String,attribute:"camera-target",hasChanged:()=>!0})],Et.prototype,"cameraTarget",void 0),__decorate$6([style$1({intrinsics:fieldOfViewIntrinsics,observeEffects:!0,updateHandler:$syncFieldOfView}),e$4({type:String,attribute:"field-of-view",hasChanged:()=>!0})],Et.prototype,"fieldOfView",void 0),__decorate$6([style$1({intrinsics:minCameraOrbitIntrinsics,updateHandler:$syncMinCameraOrbit}),e$4({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],Et.prototype,"minCameraOrbit",void 0),__decorate$6([style$1({intrinsics:maxCameraOrbitIntrinsics,updateHandler:$syncMaxCameraOrbit}),e$4({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],Et.prototype,"maxCameraOrbit",void 0),__decorate$6([style$1({intrinsics:minFieldOfViewIntrinsics,updateHandler:$syncMinFieldOfView}),e$4({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],Et.prototype,"minFieldOfView",void 0),__decorate$6([style$1({intrinsics:fieldOfViewIntrinsics,updateHandler:$syncMaxFieldOfView}),e$4({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],Et.prototype,"maxFieldOfView",void 0),__decorate$6([e$4({type:Number,attribute:"interaction-prompt-threshold"})],Et.prototype,"interactionPromptThreshold",void 0),__decorate$6([e$4({type:String,attribute:"interaction-prompt"})],Et.prototype,"interactionPrompt",void 0),__decorate$6([e$4({type:String,attribute:"interaction-prompt-style"})],Et.prototype,"interactionPromptStyle",void 0),__decorate$6([e$4({type:Number,attribute:"orbit-sensitivity"})],Et.prototype,"orbitSensitivity",void 0),__decorate$6([e$4({type:String,attribute:"touch-action"})],Et.prototype,"touchAction",void 0),__decorate$6([e$4({type:Boolean,attribute:"disable-zoom"})],Et.prototype,"disableZoom",void 0),__decorate$6([e$4({type:Boolean,attribute:"disable-pan"})],Et.prototype,"disablePan",void 0),__decorate$6([e$4({type:Boolean,attribute:"disable-tap"})],Et.prototype,"disableTap",void 0),__decorate$6([e$4({type:Number,attribute:"interpolation-decay"})],Et.prototype,"interpolationDecay",void 0),Et};/* @license
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PAN_SENSITIVITY=.018,TAP_DISTANCE=2,TAP_MS=300,vector2=new Vector2,vector3$2=new Vector3,DEFAULT_OPTIONS$k=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),KEYBOARD_ORBIT_INCREMENT=Math.PI/8,ZOOM_SENSITIVITY=.04,PAN_KEY_INCREMENT=10,ChangeSource={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class SmoothControls extends EventDispatcher{constructor(Ke,Ye,Je){super(),this.camera=Ke,this.element=Ye,this.scene=Je,this.orbitSensitivity=1,this.inputSensitivity=1,this.changeSource=ChangeSource.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new Matrix3,this.panPerPixel=0,this.spherical=new Spherical,this.goalSpherical=new Spherical,this.thetaDamper=new Damper,this.phiDamper=new Damper,this.radiusDamper=new Damper,this.logFov=Math.log(DEFAULT_OPTIONS$k.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new Damper,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=tt=>{if(this.enablePan)tt.preventDefault();else for(const st of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:st.id})))},this.touchModeZoom=(tt,st)=>{if(!this._disableZoom){const rt=this.twoTouchDistance(this.pointers[0],this.pointers[1]),it=ZOOM_SENSITIVITY*(this.lastSeparation-rt)*50/this.scene.height;this.lastSeparation=rt,this.userAdjustOrbit(0,0,it)}this.panPerPixel>0&&this.movePan(tt,st)},this.disableScroll=tt=>{tt.preventDefault()},this.touchModeRotate=(tt,st)=>{const{touchAction:rt}=this._options;if(!this.touchDecided&&rt!=="none"){this.touchDecided=!0;const it=Math.abs(tt),ot=Math.abs(st);if(this.changeSource===ChangeSource.USER_INTERACTION&&(rt==="pan-y"&&ot>it||rt==="pan-x"&&it>ot)){this.touchMode=null;return}else this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(tt,st)},this.onPointerDown=tt=>{if(this.pointers.length>2)return;const{element:st}=this;this.pointers.length===0&&(st.addEventListener("pointermove",this.onPointerMove),st.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=tt.clientX,this.startPointerPosition.clientY=tt.clientY,this.startTime=performance.now());try{st.setPointerCapture(tt.pointerId)}catch{}this.pointers.push({clientX:tt.clientX,clientY:tt.clientY,id:tt.pointerId}),this.isUserPointing=!1,tt.pointerType==="touch"?(this.changeSource=tt.altKey?ChangeSource.AUTOMATIC:ChangeSource.USER_INTERACTION,this.onTouchChange(tt)):(this.changeSource=ChangeSource.USER_INTERACTION,this.onMouseDown(tt)),this.changeSource===ChangeSource.USER_INTERACTION&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=tt=>{const st=this.pointers.find(at=>at.id===tt.pointerId);if(st==null)return;const rt=this.pointers.length,it=(tt.clientX-st.clientX)/rt,ot=(tt.clientY-st.clientY)/rt;it===0&&ot===0||(st.clientX=tt.clientX,st.clientY=tt.clientY,tt.pointerType==="touch"?(this.changeSource=tt.altKey?ChangeSource.AUTOMATIC:ChangeSource.USER_INTERACTION,this.touchMode!==null&&this.touchMode(it,ot)):(this.changeSource=ChangeSource.USER_INTERACTION,this.panPerPixel>0?this.movePan(it,ot):this.handleSinglePointerMove(it,ot)))},this.onPointerUp=tt=>{const{element:st}=this,rt=this.pointers.findIndex(it=>it.id===tt.pointerId);rt!==-1&&this.pointers.splice(rt,1),this.panPerPixel>0&&!tt.altKey&&this.resetRadius(),this.pointers.length===0?(st.removeEventListener("pointermove",this.onPointerMove),st.removeEventListener("pointerup",this.onPointerUp),st.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(tt)):this.touchMode!==null&&this.onTouchChange(tt),this.scene.element[$panElement].style.opacity=0,st.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=tt=>{this.changeSource=ChangeSource.USER_INTERACTION;const st=tt.deltaY*(tt.deltaMode==1?18:1)*ZOOM_SENSITIVITY/30;this.userAdjustOrbit(0,0,st),tt.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=tt=>{const{changeSource:st}=this;this.changeSource=ChangeSource.USER_INTERACTION,(tt.shiftKey&&this.enablePan?this.panKeyCodeHandler(tt):this.orbitZoomKeyCodeHandler(tt))?(tt.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=st},this._options=Object.assign({},DEFAULT_OPTIONS$k),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(this._interactionEnabled===!1){const{element:Ke}=this;Ke.addEventListener("pointerdown",this.onPointerDown),Ke.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||Ke.addEventListener("wheel",this.onWheel),Ke.addEventListener("keydown",this.onKeyDown),Ke.addEventListener("touchmove",()=>{},{passive:!1}),Ke.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(this._interactionEnabled===!0){const{element:Ke}=this;Ke.removeEventListener("pointerdown",this.onPointerDown),Ke.removeEventListener("pointermove",this.onPointerMove),Ke.removeEventListener("pointerup",this.onPointerUp),Ke.removeEventListener("pointercancel",this.onPointerUp),Ke.removeEventListener("wheel",this.onWheel),Ke.removeEventListener("keydown",this.onKeyDown),Ke.removeEventListener("contextmenu",this.onContext),Ke.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(Ke){this._disableZoom!=Ke&&(this._disableZoom=Ke,Ke===!0?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(Ke=new Spherical){return Ke.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(Ke){Object.assign(this._options,Ke),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(Ke,Ye){this.camera.far=Ye===0?2:Ye,this.camera.near=Math.max(Ke,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(Ke){this.camera.aspect=Ke,this.camera.updateProjectionMatrix()}setOrbit(Ke=this.goalSpherical.theta,Ye=this.goalSpherical.phi,Je=this.goalSpherical.radius){const{minimumAzimuthalAngle:tt,maximumAzimuthalAngle:st,minimumPolarAngle:rt,maximumPolarAngle:it,minimumRadius:ot,maximumRadius:at}=this._options,{theta:lt,phi:ut,radius:ht}=this.goalSpherical,pt=clamp$2(Ke,tt,st);!isFinite(tt)&&!isFinite(st)&&(this.spherical.theta=this.wrapAngle(this.spherical.theta-pt)+pt);const ft=clamp$2(Ye,rt,it),xt=clamp$2(Je,ot,at);return pt===lt&&ft===ut&&xt===ht||!isFinite(pt)||!isFinite(ft)||!isFinite(xt)?!1:(this.goalSpherical.theta=pt,this.goalSpherical.phi=ft,this.goalSpherical.radius=xt,this.goalSpherical.makeSafe(),!0)}setRadius(Ke){this.goalSpherical.radius=Ke,this.setOrbit()}setFieldOfView(Ke){const{minimumFieldOfView:Ye,maximumFieldOfView:Je}=this._options;Ke=clamp$2(Ke,Ye,Je),this.goalLogFov=Math.log(Ke)}setDamperDecayTime(Ke){this.thetaDamper.setDecayTime(Ke),this.phiDamper.setDecayTime(Ke),this.radiusDamper.setDecayTime(Ke),this.fovDamper.setDecayTime(Ke)}adjustOrbit(Ke,Ye,Je){const{theta:tt,phi:st,radius:rt}=this.goalSpherical,{minimumRadius:it,maximumRadius:ot,minimumFieldOfView:at,maximumFieldOfView:lt}=this._options,ut=this.spherical.theta-tt,ht=Math.PI-.001,pt=tt-clamp$2(Ke,-ht-ut,ht-ut),ft=st-Ye,xt=Je===0?0:((Je>0?ot:it)-rt)/(Math.log(Je>0?lt:at)-this.goalLogFov),vt=rt+Je*(isFinite(xt)?xt:(ot-it)*2);if(this.setOrbit(pt,ft,vt),Je!==0){const At=this.goalLogFov+Je;this.setFieldOfView(Math.exp(At))}}jumpToGoal(){this.update(0,SETTLING_TIME)}update(Ke,Ye){if(this.isStationary())return!1;const{maximumPolarAngle:Je,maximumRadius:tt}=this._options,st=this.spherical.theta-this.goalSpherical.theta;return Math.abs(st)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=Math.sign(st)*2*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,Ye,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,Ye,Je),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,Ye,tt),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,Ye,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:Ke}=this.element;if(this._interactionEnabled){const{touchAction:Ye}=this._options;this._disableZoom&&Ye!=="none"?Ke.touchAction="manipulation":Ke.touchAction=Ye}else Ke.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new Euler(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(Ke,Ye,Je){this.adjustOrbit(Ke*this.orbitSensitivity*this.inputSensitivity,Ye*this.orbitSensitivity*this.inputSensitivity,Je*this.inputSensitivity)}wrapAngle(Ke){const Ye=(Ke+Math.PI)/(2*Math.PI);return(Ye-Math.floor(Ye))*2*Math.PI-Math.PI}pixelLengthToSphericalAngle(Ke){return 2*Math.PI*Ke/this.scene.height}twoTouchDistance(Ke,Ye){const{clientX:Je,clientY:tt}=Ke,{clientX:st,clientY:rt}=Ye,it=st-Je,ot=rt-tt;return Math.sqrt(it*it+ot*ot)}handleSinglePointerMove(Ke,Ye){const Je=this.pixelLengthToSphericalAngle(Ke),tt=this.pixelLengthToSphericalAngle(Ye);this.isUserPointing===!1&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(Je,tt,0)}initializePan(){const{theta:Ke,phi:Ye}=this.spherical,Je=Ke-this.scene.yaw;this.panPerPixel=PAN_SENSITIVITY/this.scene.height,this.panProjection.set(-Math.cos(Je),-Math.cos(Ye)*Math.sin(Je),0,0,Math.sin(Ye),0,Math.sin(Je),-Math.cos(Ye)*Math.cos(Je),0)}movePan(Ke,Ye){const{scene:Je}=this,tt=vector3$2.set(Ke,Ye,0).multiplyScalar(this.inputSensitivity),st=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;tt.multiplyScalar(st);const rt=Je.getTarget();rt.add(tt.applyMatrix3(this.panProjection)),Je.boundingSphere.clampPoint(rt,rt),Je.setTarget(rt.x,rt.y,rt.z)}recenter(Ke){if(performance.now()>this.startTime+TAP_MS||Math.abs(Ke.clientX-this.startPointerPosition.clientX)>TAP_DISTANCE||Math.abs(Ke.clientY-this.startPointerPosition.clientY)>TAP_DISTANCE)return;const{scene:Ye}=this,Je=Ye.positionAndNormalFromPoint(Ye.getNDC(Ke.clientX,Ke.clientY));if(Je==null){const{cameraTarget:tt}=Ye.element;Ye.element.cameraTarget="",Ye.element.cameraTarget=tt,this.userAdjustOrbit(0,0,1)}else Ye.target.worldToLocal(Je.position),Ye.setTarget(Je.position.x,Je.position.y,Je.position.z)}resetRadius(){const{scene:Ke}=this,Ye=Ke.positionAndNormalFromPoint(vector2.set(0,0));if(Ye==null)return;Ke.target.worldToLocal(Ye.position);const Je=Ke.getTarget(),{theta:tt,phi:st}=this.spherical,rt=tt-Ke.yaw,it=vector3$2.set(Math.sin(st)*Math.sin(rt),Math.cos(st),Math.sin(st)*Math.cos(rt)),ot=it.dot(Ye.position.sub(Je));Je.add(it.multiplyScalar(ot)),Ke.setTarget(Je.x,Je.y,Je.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-ot)}onTouchChange(Ke){if(this.pointers.length===1)this.touchMode=this.touchModeRotate;else{if(this._disableZoom){this.touchMode=null,this.element.removeEventListener("touchmove",this.disableScroll);return}this.touchMode=this.touchDecided&&this.touchMode===null?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&this.touchMode!=null&&(this.initializePan(),Ke.altKey||(this.scene.element[$panElement].style.opacity=1))}}onMouseDown(Ke){this.panPerPixel=0,this.enablePan&&(Ke.button===2||Ke.ctrlKey||Ke.metaKey||Ke.shiftKey)&&(this.initializePan(),this.scene.element[$panElement].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(Ke){let Ye=!0;switch(Ke.key){case"PageUp":this.userAdjustOrbit(0,0,ZOOM_SENSITIVITY);break;case"PageDown":this.userAdjustOrbit(0,0,-1*ZOOM_SENSITIVITY);break;case"ArrowUp":this.userAdjustOrbit(0,-KEYBOARD_ORBIT_INCREMENT,0);break;case"ArrowDown":this.userAdjustOrbit(0,KEYBOARD_ORBIT_INCREMENT,0);break;case"ArrowLeft":this.userAdjustOrbit(-KEYBOARD_ORBIT_INCREMENT,0,0);break;case"ArrowRight":this.userAdjustOrbit(KEYBOARD_ORBIT_INCREMENT,0,0);break;default:Ye=!1;break}return Ye}panKeyCodeHandler(Ke){this.initializePan();let Ye=!0;switch(Ke.key){case"ArrowUp":this.movePan(0,-1*PAN_KEY_INCREMENT);break;case"ArrowDown":this.movePan(0,PAN_KEY_INCREMENT);break;case"ArrowLeft":this.movePan(-1*PAN_KEY_INCREMENT,0);break;case"ArrowRight":this.movePan(PAN_KEY_INCREMENT,0);break;default:Ye=!1;break}return Ye}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INIT_FRAMES=30,AR_SHADOW_INTENSITY=.8,ROTATION_RATE=1.5,HIT_ANGLE_DEG=20,SCALE_SNAP_HIGH=1.3,SCALE_SNAP_LOW=1/SCALE_SNAP_HIGH,MIN_VIEWPORT_SCALE=.25,MAX_DISTANCE=10,ARStatus={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},ARTracking={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},vector3$1=new Vector3,matrix4=new Matrix4,hitPosition=new Vector3,camera=new PerspectiveCamera(45,1,.1,100);class ARRenderer extends EventDispatcher{constructor(Ke){super(),this.renderer=Ke,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new Vector3,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new Vector3,this.firstRatio=0,this.lastAngle=0,this.goalPosition=new Vector3,this.goalYaw=0,this.goalScale=1,this.xDamper=new Damper,this.yDamper=new Damper,this.zDamper=new Damper,this.yawDamper=new Damper,this.scaleDamper=new Damper,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onUpdateScene=()=>{this.placementBox!=null&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new PlacementBox(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=Ye=>{const Je=this.transientHitTestSource;if(Je==null)return;const tt=this.frame.getHitTestResultsForTransientInput(Je),st=this.presentedScene,rt=this.placementBox;if(tt.length===1){this.inputSource=Ye.inputSource;const{axes:it}=this.inputSource.gamepad,ot=rt.getHit(this.presentedScene,it[0],it[1]);rt.show=!0,ot!=null?(this.isTranslating=!0,this.lastDragPosition.copy(ot)):this.placeOnWall===!1&&(this.isRotating=!0,this.lastAngle=it[0]*ROTATION_RATE)}else if(tt.length===2){rt.show=!0,this.isTwoFingering=!0;const{separation:it}=this.fingerPolar(tt);this.firstRatio=it/st.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=Ke.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){assertIsArCandidate();const Ke=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(Ke),this.threeRenderer.xr.cameraAutoUpdate=!1,Ke}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return assertIsArCandidate(),await navigator.xr.isSessionSupported("immersive-ar")}catch(Ke){return console.warn("Request to present in WebXR denied:"),console.warn(Ke),console.warn("Falling back to next ar-mode"),!1}}async present(Ke,Ye=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");let Je=new Promise((at,lt)=>{requestAnimationFrame(()=>at())});Ke.setHotspotsVisibility(!1),Ke.queueRender(),await Je,this._presentedScene=Ke,this.overlay=Ke.element.shadowRoot.querySelector("div.default"),Ye===!0&&(this.xrLight=new XREstimatedLight(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||this.xrLight==null)return;const at=this.presentedScene;at.add(this.xrLight),at.environment=this.xrLight.environment}));const tt=await this.resolveARSession();tt.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});const st=Ke.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");st.classList.add("enabled"),st.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=st;const rt=await tt.requestReferenceSpace("viewer");this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=Ke.yaw,this.goalYaw=Ke.yaw,this.goalScale=1,Ke.background=null,this.oldShadowIntensity=Ke.shadowIntensity,Ke.setShadowIntensity(.01),this.oldTarget.copy(Ke.getTarget()),Ke.element.addEventListener("load",this.onUpdateScene);const it=HIT_ANGLE_DEG*Math.PI/180,ot=this.placeOnWall===!0?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(it),z:-Math.cos(it)});tt.requestHitTestSource({space:rt,offsetRay:ot}).then(at=>{this.initialHitSource=at}),this.currentSession=tt,this.placementBox=new PlacementBox(Ke,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:ARStatus.SESSION_STARTED})}async stopPresenting(){if(!this.isPresenting)return;const Ke=new Promise(Ye=>{this.resolveCleanup=Ye});try{await this.currentSession.end(),await Ke}catch(Ye){console.warn("Error while trying to end WebXR AR session"),console.warn(Ye),this.postSessionCleanup()}}get isPresenting(){return this.presentedScene!=null}get target(){return this.oldTarget}updateTarget(){const Ke=this.presentedScene;if(Ke!=null){const Ye=Ke.getTarget();this.oldTarget.copy(Ye),this.placeOnWall?Ye.z=Ke.boundingBox.min.z:Ye.y=Ke.boundingBox.min.y,Ke.setTarget(Ye.x,Ye.y,Ye.z)}}postSessionCleanup(){const Ke=this.currentSession;Ke!=null&&(Ke.removeEventListener("selectstart",this.onSelectStart),Ke.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const Ye=this.presentedScene;if(this._presentedScene=null,Ye!=null){const{element:rt}=Ye;this.xrLight!=null&&(Ye.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),Ye.position.set(0,0,0),Ye.scale.set(1,1,1),Ye.setShadowOffset(0);const it=this.turntableRotation;it!=null&&(Ye.yaw=it);const ot=this.oldShadowIntensity;ot!=null&&Ye.setShadowIntensity(ot),Ye.setEnvironmentAndSkybox(rt[$currentEnvironmentMap],rt[$currentBackground]);const at=this.oldTarget;Ye.setTarget(at.x,at.y,at.z),Ye.xrCamera=null,Ye.element.removeEventListener("load",this.onUpdateScene),Ye.orientHotspots(0),rt.requestUpdate("cameraTarget"),rt.requestUpdate("maxCameraOrbit"),rt[$onResize](rt.getBoundingClientRect()),requestAnimationFrame(()=>{Ye.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:ChangeSource.NONE}}))})}this.renderer.height=0;const Je=this.exitWebXRButtonContainer;Je!=null&&(Je.classList.remove("enabled"),Je.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const tt=this.transientHitTestSource;tt!=null&&(tt.cancel(),this.transientHitTestSource=null);const st=this.initialHitSource;st!=null&&(st.cancel(),this.initialHitSource=null),this.placementBox!=null&&(this.placementBox.dispose(),this.placementBox=null),this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,this.resolveCleanup!=null&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:ARStatus.NOT_PRESENTING})}updateView(Ke){const Ye=this.presentedScene,Je=this.threeRenderer.xr;Je.updateCamera(camera),Ye.xrCamera=Je.getCamera();const{elements:tt}=Ye.getCamera().matrixWorld;if(Ye.orientHotspots(Math.atan2(tt[1],tt[5])),this.initialized||(this.placeInitially(),this.initialized=!0),Ke.requestViewportScale&&Ke.recommendedViewportScale){const rt=Ke.recommendedViewportScale;Ke.requestViewportScale(Math.max(rt,MIN_VIEWPORT_SCALE))}const st=Je.getBaseLayer();if(st!=null){const rt=st instanceof XRWebGLLayer?st.getViewport(Ke):Je.getBinding().getViewSubImage(st,Ke).viewport;this.threeRenderer.setViewport(rt.x,rt.y,rt.width,rt.height)}}placeInitially(){const Ke=this.presentedScene,{position:Ye,element:Je}=Ke,tt=Ke.getCamera(),{width:st,height:rt}=this.overlay.getBoundingClientRect();Ke.setSize(st,rt),tt.projectionMatrixInverse.copy(tt.projectionMatrix).invert();const{theta:it,radius:ot}=Je.getCameraOrbit(),at=tt.getWorldDirection(vector3$1);Ke.yaw=Math.atan2(-at.x,-at.z)-it,this.goalYaw=Ke.yaw,Ye.copy(tt.position).add(at.multiplyScalar(ot)),this.updateTarget();const lt=Ke.getTarget();Ye.add(lt).sub(this.oldTarget),this.goalPosition.copy(Ye),Ke.setHotspotsVisibility(!0);const{session:ut}=this.frame;ut.addEventListener("selectstart",this.onSelectStart),ut.addEventListener("selectend",this.onSelectEnd),ut.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(ht=>{this.transientHitTestSource=ht})}getTouchLocation(){const{axes:Ke}=this.inputSource.gamepad;let Ye=this.placementBox.getExpandedHit(this.presentedScene,Ke[0],Ke[1]);return Ye!=null&&(vector3$1.copy(Ye).sub(this.presentedScene.getCamera().position),vector3$1.length()>MAX_DISTANCE)?null:Ye}getHitPoint(Ke){const Ye=this.threeRenderer.xr.getReferenceSpace(),Je=Ke.getPose(Ye);if(Je==null)return null;const tt=matrix4.fromArray(Je.transform.matrix);return this.placeOnWall===!0&&(this.goalYaw=Math.atan2(tt.elements[4],tt.elements[6])),tt.elements[5]>.75!==this.placeOnWall?hitPosition.setFromMatrixPosition(tt):null}moveToFloor(Ke){const Ye=this.initialHitSource;if(Ye==null)return;const Je=Ke.getHitTestResults(Ye);if(Je.length==0)return;const tt=Je[0],st=this.getHitPoint(tt);st!=null&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(st):this.goalPosition.y=st.y),Ye.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:ARStatus.OBJECT_PLACED}))}fingerPolar(Ke){const Ye=Ke[0].inputSource.gamepad.axes,Je=Ke[1].inputSource.gamepad.axes,tt=Je[0]-Ye[0],st=Je[1]-Ye[1],rt=Math.atan2(st,tt);let it=this.lastAngle-rt;return it>Math.PI?it-=2*Math.PI:it<-Math.PI&&(it+=2*Math.PI),this.lastAngle=rt,{separation:Math.sqrt(tt*tt+st*st),deltaYaw:it}}processInput(Ke){const Ye=this.transientHitTestSource;if(Ye==null||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const Je=Ke.getHitTestResultsForTransientInput(Ye),tt=this.presentedScene,st=tt.scale.x;if(this.isTwoFingering){if(Je.length<2)this.isTwoFingering=!1;else{const{separation:rt,deltaYaw:it}=this.fingerPolar(Je);if(this.placeOnWall===!1&&(this.goalYaw+=it),tt.canScale){const ot=rt/this.firstRatio;this.goalScale=ot<SCALE_SNAP_HIGH&&ot>SCALE_SNAP_LOW?1:ot}}return}else if(Je.length===2){this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:rt}=this.fingerPolar(Je);this.firstRatio=rt/st;return}if(this.isRotating){const rt=this.inputSource.gamepad.axes[0]*ROTATION_RATE;this.goalYaw+=rt-this.lastAngle,this.lastAngle=rt}else this.isTranslating&&Je.forEach(rt=>{if(rt.inputSource!==this.inputSource)return;let it=null;if(rt.results.length>0&&(it=this.getHitPoint(rt.results[0])),it==null&&(it=this.getTouchLocation()),it!=null){if(this.goalPosition.sub(this.lastDragPosition),this.placeOnWall===!1){const ot=it.y-this.lastDragPosition.y;if(ot<0){this.placementBox.offsetHeight=ot/st,this.presentedScene.setShadowOffset(ot);const at=vector3$1.copy(tt.getCamera().position),lt=-ot/(at.y-it.y);at.multiplyScalar(lt),it.multiplyScalar(1-lt).add(at)}}this.goalPosition.add(it),this.lastDragPosition.copy(it)}})}moveScene(Ke){const Ye=this.presentedScene,{position:Je,yaw:tt}=Ye,st=Ye.boundingSphere.radius,rt=this.goalPosition,it=Ye.scale.x,ot=this.placementBox;let at=ChangeSource.NONE;if(!rt.equals(Je)||this.goalScale!==it){at=ChangeSource.USER_INTERACTION;let{x:lt,y:ut,z:ht}=Je;lt=this.xDamper.update(lt,rt.x,Ke,st),ut=this.yDamper.update(ut,rt.y,Ke,st),ht=this.zDamper.update(ht,rt.z,Ke,st),Je.set(lt,ut,ht);const pt=this.scaleDamper.update(it,this.goalScale,Ke,1);if(Ye.scale.set(pt,pt,pt),!this.isTranslating){const ft=rt.y-ut;this.placementComplete&&this.placeOnWall===!1?(ot.offsetHeight=ft/pt,Ye.setShadowOffset(ft)):ft===0&&(this.placementComplete=!0,ot.show=!1,Ye.setShadowIntensity(AR_SHADOW_INTENSITY))}}ot.updateOpacity(Ke),Ye.updateTarget(Ke),Ye.yaw=this.yawDamper.update(tt,this.goalYaw,Ke,Math.PI),Ye.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:at}}))}onWebXRFrame(Ke,Ye){this.frame=Ye,++this.frames;const Je=this.threeRenderer.xr.getReferenceSpace(),tt=Ye.getViewerPose(Je);tt==null&&this.tracking===!0&&this.frames>INIT_FRAMES&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:ARTracking.NOT_TRACKING}));const st=this.presentedScene;if(tt==null||st==null||!st.element.loaded){this.threeRenderer.clear();return}this.tracking===!1&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:ARTracking.TRACKING}));let rt=!0;for(const it of tt.views){if(this.updateView(it),rt){this.moveToFloor(Ye),this.processInput(Ye);const ot=Ke-this.lastTick;this.moveScene(ot),this.renderer.preRender(st,Ke,ot),this.lastTick=Ke,st.renderShadow(this.threeRenderer)}this.threeRenderer.render(st,st.getCamera()),rt=!1}}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Debugger{constructor(Ke){Ke.threeRenderer.debug={checkShaderErrors:!0},Promise.resolve().then(()=>{self.dispatchEvent(new CustomEvent("model-viewer-renderer-debug",{detail:{renderer:Ke,THREE:{ShaderMaterial,Texture:Texture$1,Mesh,Scene,PlaneGeometry,OrthographicCamera,WebGLRenderTarget}}}))})}addScene(Ke){self.dispatchEvent(new CustomEvent("model-viewer-scene-added-debug",{detail:{scene:Ke}}))}removeScene(Ke){self.dispatchEvent(new CustomEvent("model-viewer-scene-removed-debug",{detail:{scene:Ke}}))}}function clone$2(Xe){const Ke=new Map,Ye=new Map,Je=Xe.clone();return parallelTraverse(Xe,Je,function(tt,st){Ke.set(st,tt),Ye.set(tt,st)}),Je.traverse(function(tt){if(!tt.isSkinnedMesh)return;const st=tt,rt=Ke.get(tt),it=rt.skeleton.bones;st.skeleton=rt.skeleton.clone(),st.bindMatrix.copy(rt.bindMatrix),st.skeleton.bones=it.map(function(ot){return Ye.get(ot)}),st.bind(st.skeleton,st.bindMatrix)}),Je}function parallelTraverse(Xe,Ke,Ye){Ye(Xe,Ke);for(let Je=0;Je<Xe.children.length;Je++)parallelTraverse(Xe.children[Je],Ke.children[Je],Ye)}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $prepared=Symbol("prepared"),$prepare=Symbol("prepare"),$preparedGLTF=Symbol("preparedGLTF"),$clone=Symbol("clone");class GLTFInstance{constructor(Ke){this[$preparedGLTF]=Ke}static prepare(Ke){if(Ke.scene==null)throw new Error("Model does not have a scene");if(Ke[$prepared])return Ke;const Ye=this[$prepare](Ke);return Ye[$prepared]=!0,Ye}static[$prepare](Ke){const{scene:Ye}=Ke,Je=[Ye];return Object.assign(Object.assign({},Ke),{scene:Ye,scenes:Je})}get parser(){return this[$preparedGLTF].parser}get animations(){return this[$preparedGLTF].animations}get scene(){return this[$preparedGLTF].scene}get scenes(){return this[$preparedGLTF].scenes}get cameras(){return this[$preparedGLTF].cameras}get asset(){return this[$preparedGLTF].asset}get userData(){return this[$preparedGLTF].userData}clone(){const Ke=this.constructor,Ye=this[$clone]();return new Ke(Ye)}dispose(){this.scenes.forEach(Ke=>{Ke.traverse(Ye=>{if(!Ye.isMesh)return;const Je=Ye;(Array.isArray(Je.material)?Je.material:[Je.material]).forEach(st=>{for(const rt in st){const it=st[rt];if(it instanceof Texture$1){const ot=it.source.data;ot.close!=null&&ot.close(),it.dispose()}}st.dispose()}),Je.geometry.dispose()})})}[$clone](){const Ke=this[$preparedGLTF],Ye=clone$2(this.scene);cloneVariantMaterials(Ye,this.scene);const Je=[Ye],tt=Ke.userData?Object.assign({},Ke.userData):{};return Object.assign(Object.assign({},Ke),{scene:Ye,scenes:Je,userData:tt})}}const cloneVariantMaterials=(Xe,Ke)=>{traversePair(Xe,Ke,(Ye,Je)=>{Je.userData.variantMaterials!==void 0&&(Ye.userData.variantMaterials=new Map(Je.userData.variantMaterials)),Je.userData.variantData!==void 0&&(Ye.userData.variantData=Je.userData.variantData),Je.userData.originalMaterial!==void 0&&(Ye.userData.originalMaterial=Je.userData.originalMaterial)})},traversePair=(Xe,Ke,Ye)=>{Ye(Xe,Ke);for(let Je=0;Je<Xe.children.length;Je++)traversePair(Xe.children[Je],Ke.children[Je],Ye)},$threeGLTF=Symbol("threeGLTF"),$gltf=Symbol("gltf"),$gltfElementMap=Symbol("gltfElementMap"),$threeObjectMap=Symbol("threeObjectMap"),$parallelTraverseThreeScene=Symbol("parallelTraverseThreeScene"),$correlateOriginalThreeGLTF=Symbol("correlateOriginalThreeGLTF"),$correlateCloneThreeGLTF=Symbol("correlateCloneThreeGLTF");class CorrelatedSceneGraph{constructor(Ke,Ye,Je,tt){this[$threeGLTF]=Ke,this[$gltf]=Ye,this[$gltfElementMap]=tt,this[$threeObjectMap]=Je}static from(Ke,Ye){return Ye!=null?this[$correlateCloneThreeGLTF](Ke,Ye):this[$correlateOriginalThreeGLTF](Ke)}static[$correlateOriginalThreeGLTF](Ke){const Ye=Ke.parser.json,Je=Ke.parser.associations,tt=new Map,st={name:"Default"},rt={index:-1};for(const it of Je.keys())it instanceof Material$1&&Je.get(it)==null&&(rt.index<0&&(Ye.materials==null&&(Ye.materials=[]),rt.index=Ye.materials.length,Ye.materials.push(st)),it.name=st.name,Je.set(it,{materials:rt.index}));for(const[it,ot]of Je){if(ot){const at=it;at.userData=at.userData||{},at.userData.associations=ot}for(const at in ot)if(at!=null&&at!=="primitives"){const lt=at,ht=(Ye[lt]||[])[ot[lt]];if(ht==null)continue;let pt=tt.get(ht);pt==null&&(pt=new Set,tt.set(ht,pt)),pt.add(it)}}return new CorrelatedSceneGraph(Ke,Ye,Je,tt)}static[$correlateCloneThreeGLTF](Ke,Ye){const Je=Ye.threeGLTF,tt=Ye.gltf,st=JSON.parse(JSON.stringify(tt)),rt=new Map,it=new Map;for(let ot=0;ot<Je.scenes.length;ot++)this[$parallelTraverseThreeScene](Je.scenes[ot],Ke.scenes[ot],(at,lt)=>{const ut=Ye.threeObjectMap.get(at);if(ut!=null){for(const ht in ut)if(ht!=null&&ht!=="primitives"){const pt=ht,ft=ut[pt],xt=st[pt][ft],vt=rt.get(lt)||{};vt[pt]=ft,rt.set(lt,vt);const At=it.get(xt)||new Set;At.add(lt),it.set(xt,At)}}});return new CorrelatedSceneGraph(Ke,st,rt,it)}static[$parallelTraverseThreeScene](Ke,Ye,Je){const tt=rt=>rt.isMesh,st=(rt,it)=>{if(Je(rt,it),rt.isObject3D){if(tt(rt))if(Array.isArray(rt.material))for(let ot=0;ot<rt.material.length;++ot)st(rt.material[ot],it.material[ot]);else st(rt.material,it.material);for(let ot=0;ot<rt.children.length;++ot)st(rt.children[ot],it.children[ot])}};st(Ke,Ye)}get threeGLTF(){return this[$threeGLTF]}get gltf(){return this[$gltf]}get gltfElementMap(){return this[$gltfElementMap]}get threeObjectMap(){return this[$threeObjectMap]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $correlatedSceneGraph$1=Symbol("correlatedSceneGraph");class ModelViewerGLTFInstance extends GLTFInstance{static[$prepare](Ke){const Ye=super[$prepare](Ke);Ye[$correlatedSceneGraph$1]==null&&(Ye[$correlatedSceneGraph$1]=CorrelatedSceneGraph.from(Ye));const{scene:Je}=Ye,tt=new Sphere(void 0,1/0);return Je.traverse(st=>{st.renderOrder=1e3,st.frustumCulled=!1,st.name||(st.name=st.uuid);const rt=st;if(rt.isMesh){const{geometry:it}=rt;rt.castShadow=!0,rt.isSkinnedMesh&&(it.boundingSphere=tt,it.boundingBox=null);const ot=rt.material;if(ot.isMeshBasicMaterial===!0&&(ot.toneMapped=!1),ot.shadowSide=FrontSide,ot.aoMap){const{gltf:at,threeObjectMap:lt}=Ye[$correlatedSceneGraph$1],ut=lt.get(ot);if(at.materials!=null&&ut!=null&&ut.materials!=null){const ht=at.materials[ut.materials];ht.occlusionTexture&&ht.occlusionTexture.texCoord===0&&it.attributes.uv!=null&&it.setAttribute("uv2",it.attributes.uv)}}}}),Ye}get correlatedSceneGraph(){return this[$preparedGLTF][$correlatedSceneGraph$1]}[$clone](){const Ke=super[$clone](),Ye=new Map;return Ke.scene.traverse(Je=>{if(Je.isMesh){const tt=Je,st=tt.material;if(st!=null){if(Ye.has(st.uuid)){tt.material=Ye.get(st.uuid);return}tt.material=st.clone(),Ye.set(st.uuid,tt.material)}}}),Ke[$correlatedSceneGraph$1]=CorrelatedSceneGraph.from(Ke,this.correlatedSceneGraph),Ke}}class RGBELoader extends DataTextureLoader{constructor(Ke){super(Ke),this.type=HalfFloatType}parse(Ke){const it=function(wt,_t){switch(wt){case 1:console.error("THREE.RGBELoader Read Error: "+(_t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(_t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(_t||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(_t||""))}return-1},ht=function(wt,_t,Ct){_t=_t||1024;let St=wt.pos,Rt=-1,Nt=0,Pt="",Bt=String.fromCharCode.apply(null,new Uint16Array(wt.subarray(St,St+128)));for(;0>(Rt=Bt.indexOf(`
`))&&Nt<_t&&St<wt.byteLength;)Pt+=Bt,Nt+=Bt.length,St+=128,Bt+=String.fromCharCode.apply(null,new Uint16Array(wt.subarray(St,St+128)));return-1<Rt?(wt.pos+=Nt+Rt+1,Pt+Bt.slice(0,Rt)):!1},pt=function(wt){const _t=/^#\?(\S+)/,Ct=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Tt=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,St=/^\s*FORMAT=(\S+)\s*$/,Rt=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Nt={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Pt,Bt;if(wt.pos>=wt.byteLength||!(Pt=ht(wt)))return it(1,"no header found");if(!(Bt=Pt.match(_t)))return it(3,"bad initial token");for(Nt.valid|=1,Nt.programtype=Bt[1],Nt.string+=Pt+`
`;Pt=ht(wt),Pt!==!1;){if(Nt.string+=Pt+`
`,Pt.charAt(0)==="#"){Nt.comments+=Pt+`
`;continue}if((Bt=Pt.match(Ct))&&(Nt.gamma=parseFloat(Bt[1])),(Bt=Pt.match(Tt))&&(Nt.exposure=parseFloat(Bt[1])),(Bt=Pt.match(St))&&(Nt.valid|=2,Nt.format=Bt[1]),(Bt=Pt.match(Rt))&&(Nt.valid|=4,Nt.height=parseInt(Bt[1],10),Nt.width=parseInt(Bt[2],10)),Nt.valid&2&&Nt.valid&4)break}return Nt.valid&2?Nt.valid&4?Nt:it(3,"missing image size specifier"):it(3,"missing format specifier")},ft=function(wt,_t,Ct){const Tt=_t;if(Tt<8||Tt>32767||wt[0]!==2||wt[1]!==2||wt[2]&128)return new Uint8Array(wt);if(Tt!==(wt[2]<<8|wt[3]))return it(3,"wrong scanline width");const St=new Uint8Array(4*_t*Ct);if(!St.length)return it(4,"unable to allocate buffer space");let Rt=0,Nt=0;const Pt=4*Tt,Bt=new Uint8Array(4),Lt=new Uint8Array(Pt);let zt=Ct;for(;zt>0&&Nt<wt.byteLength;){if(Nt+4>wt.byteLength)return it(1);if(Bt[0]=wt[Nt++],Bt[1]=wt[Nt++],Bt[2]=wt[Nt++],Bt[3]=wt[Nt++],Bt[0]!=2||Bt[1]!=2||(Bt[2]<<8|Bt[3])!=Tt)return it(3,"bad rgbe scanline format");let Dt=0,Vt;for(;Dt<Pt&&Nt<wt.byteLength;){Vt=wt[Nt++];const Qt=Vt>128;if(Qt&&(Vt-=128),Vt===0||Dt+Vt>Pt)return it(3,"bad scanline data");if(Qt){const jt=wt[Nt++];for(let Ht=0;Ht<Vt;Ht++)Lt[Dt++]=jt}else Lt.set(wt.subarray(Nt,Nt+Vt),Dt),Dt+=Vt,Nt+=Vt}const Gt=Tt;for(let Qt=0;Qt<Gt;Qt++){let jt=0;St[Rt]=Lt[Qt+jt],jt+=Tt,St[Rt+1]=Lt[Qt+jt],jt+=Tt,St[Rt+2]=Lt[Qt+jt],jt+=Tt,St[Rt+3]=Lt[Qt+jt],Rt+=4}zt--}return St},xt=function(wt,_t,Ct,Tt){const St=wt[_t+3],Rt=Math.pow(2,St-128)/255;Ct[Tt+0]=wt[_t+0]*Rt,Ct[Tt+1]=wt[_t+1]*Rt,Ct[Tt+2]=wt[_t+2]*Rt,Ct[Tt+3]=1},vt=function(wt,_t,Ct,Tt){const St=wt[_t+3],Rt=Math.pow(2,St-128)/255;Ct[Tt+0]=DataUtils.toHalfFloat(Math.min(wt[_t+0]*Rt,65504)),Ct[Tt+1]=DataUtils.toHalfFloat(Math.min(wt[_t+1]*Rt,65504)),Ct[Tt+2]=DataUtils.toHalfFloat(Math.min(wt[_t+2]*Rt,65504)),Ct[Tt+3]=DataUtils.toHalfFloat(1)},At=new Uint8Array(Ke);At.pos=0;const Et=pt(At);if(Et!==-1){const wt=Et.width,_t=Et.height,Ct=ft(At.subarray(At.pos),wt,_t);if(Ct!==-1){let Tt,St,Rt;switch(this.type){case FloatType:Rt=Ct.length/4;const Nt=new Float32Array(Rt*4);for(let Bt=0;Bt<Rt;Bt++)xt(Ct,Bt*4,Nt,Bt*4);Tt=Nt,St=FloatType;break;case HalfFloatType:Rt=Ct.length/4;const Pt=new Uint16Array(Rt*4);for(let Bt=0;Bt<Rt;Bt++)vt(Ct,Bt*4,Pt,Bt*4);Tt=Pt,St=HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:wt,height:_t,data:Tt,header:Et.string,gamma:Et.gamma,exposure:Et.exposure,type:St}}}return null}setDataType(Ke){return this.type=Ke,this}load(Ke,Ye,Je,tt){function st(rt,it){switch(rt.type){case FloatType:case HalfFloatType:rt.encoding=LinearEncoding,rt.minFilter=LinearFilter,rt.magFilter=LinearFilter,rt.generateMipmaps=!1,rt.flipY=!0;break}Ye&&Ye(rt,it)}return super.load(Ke,st,Je,tt)}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EnvironmentScene extends Scene{constructor(){super(),this.position.y=-3.5;const Ke=new BoxGeometry;Ke.deleteAttribute("uv");const Ye=new MeshStandardMaterial({metalness:0,side:BackSide}),Je=new MeshStandardMaterial({metalness:0}),tt=new PointLight(16777215,500,28,2);tt.position.set(.418,16.199,.3),this.add(tt);const st=new Mesh(Ke,Ye);st.position.set(-.757,13.219,.717),st.scale.set(31.713,28.305,28.591),this.add(st);const rt=new Mesh(Ke,Je);rt.position.set(-10.906,2.009,1.846),rt.rotation.set(0,-.195,0),rt.scale.set(2.328,7.905,4.651),this.add(rt);const it=new Mesh(Ke,Je);it.position.set(-5.607,-.754,-.758),it.rotation.set(0,.994,0),it.scale.set(1.97,1.534,3.955),this.add(it);const ot=new Mesh(Ke,Je);ot.position.set(6.167,.857,7.803),ot.rotation.set(0,.561,0),ot.scale.set(3.927,6.285,3.687),this.add(ot);const at=new Mesh(Ke,Je);at.position.set(-2.017,.018,6.124),at.rotation.set(0,.333,0),at.scale.set(2.002,4.566,2.064),this.add(at);const lt=new Mesh(Ke,Je);lt.position.set(2.291,-.756,-2.621),lt.rotation.set(0,-.286,0),lt.scale.set(1.546,1.552,1.496),this.add(lt);const ut=new Mesh(Ke,Je);ut.position.set(-2.193,-.369,-5.547),ut.rotation.set(0,.516,0),ut.scale.set(3.875,3.487,2.986),this.add(ut);const ht=new Mesh(Ke,this.createAreaLightMaterial(50));ht.position.set(-16.116,14.37,8.208),ht.scale.set(.1,2.428,2.739),this.add(ht);const pt=new Mesh(Ke,this.createAreaLightMaterial(50));pt.position.set(-16.109,18.021,-8.207),pt.scale.set(.1,2.425,2.751),this.add(pt);const ft=new Mesh(Ke,this.createAreaLightMaterial(17));ft.position.set(14.904,12.198,-1.832),ft.scale.set(.15,4.265,6.331),this.add(ft);const xt=new Mesh(Ke,this.createAreaLightMaterial(43));xt.position.set(-.462,8.89,14.52),xt.scale.set(4.38,5.441,.088),this.add(xt);const vt=new Mesh(Ke,this.createAreaLightMaterial(20));vt.position.set(3.235,11.486,-12.541),vt.scale.set(2.5,2,.1),this.add(vt);const At=new Mesh(Ke,this.createAreaLightMaterial(100));At.position.set(0,20,0),At.scale.set(1,.1,1),this.add(At)}createAreaLightMaterial(Ke){const Ye=new MeshBasicMaterial;return Ye.color.setScalar(Ke),Ye}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EnvironmentSceneAlt extends Scene{constructor(){super(),this.position.y=-3.5;const Ke=new BoxGeometry;Ke.deleteAttribute("uv");const Ye=new MeshStandardMaterial({metalness:0,side:BackSide}),Je=new MeshStandardMaterial({metalness:0}),tt=new PointLight(16777215,400,28,2);tt.position.set(.5,14,.5),this.add(tt);const st=new Mesh(Ke,Ye);st.position.set(0,13.2,0),st.scale.set(31.5,28.5,31.5),this.add(st);const rt=new Mesh(Ke,Je);rt.position.set(-10.906,-1,1.846),rt.rotation.set(0,-.195,0),rt.scale.set(2.328,7.905,4.651),this.add(rt);const it=new Mesh(Ke,Je);it.position.set(-5.607,-.754,-.758),it.rotation.set(0,.994,0),it.scale.set(1.97,1.534,3.955),this.add(it);const ot=new Mesh(Ke,Je);ot.position.set(6.167,-.16,7.803),ot.rotation.set(0,.561,0),ot.scale.set(3.927,6.285,3.687),this.add(ot);const at=new Mesh(Ke,Je);at.position.set(-2.017,.018,6.124),at.rotation.set(0,.333,0),at.scale.set(2.002,4.566,2.064),this.add(at);const lt=new Mesh(Ke,Je);lt.position.set(2.291,-.756,-2.621),lt.rotation.set(0,-.286,0),lt.scale.set(1.546,1.552,1.496),this.add(lt);const ut=new Mesh(Ke,Je);ut.position.set(-2.193,-.369,-5.547),ut.rotation.set(0,.516,0),ut.scale.set(3.875,3.487,2.986),this.add(ut);const ht=new Mesh(Ke,this.createAreaLightMaterial(80));ht.position.set(-14,10,8),ht.scale.set(.1,2.5,2.5),this.add(ht);const pt=new Mesh(Ke,this.createAreaLightMaterial(80));pt.position.set(-14,14,-4),pt.scale.set(.1,2.5,2.5),this.add(pt);const ft=new Mesh(Ke,this.createAreaLightMaterial(23));ft.position.set(14,12,0),ft.scale.set(.1,5,5),this.add(ft);const xt=new Mesh(Ke,this.createAreaLightMaterial(16));xt.position.set(0,9,14),xt.scale.set(5,5,.1),this.add(xt);const vt=new Mesh(Ke,this.createAreaLightMaterial(80));vt.position.set(7,8,-14),vt.scale.set(2.5,2.5,.1),this.add(vt);const At=new Mesh(Ke,this.createAreaLightMaterial(80));At.position.set(-7,16,-14),At.scale.set(2.5,2.5,.1),this.add(At);const Et=new Mesh(Ke,this.createAreaLightMaterial(1));Et.position.set(0,20,0),Et.scale.set(.1,.1,.1),this.add(Et)}createAreaLightMaterial(Ke){const Ye=new MeshBasicMaterial;return Ye.color.setScalar(Ke),Ye}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GENERATED_SIGMA=.04,MAX_SAMPLES=20,HDR_FILE_RE=/\.hdr(\.js)?$/;class TextureUtils extends EventDispatcher{constructor(Ke){super(),this.threeRenderer=Ke,this.lottieLoaderUrl="",this.withCredentials=!1,this._ldrLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}get ldrLoader(){return this._ldrLoader==null&&(this._ldrLoader=new TextureLoader),this._ldrLoader.setWithCredentials(this.withCredentials),this._ldrLoader}get hdrLoader(){return this._hdrLoader==null&&(this._hdrLoader=new RGBELoader,this._hdrLoader.setDataType(HalfFloatType)),this._hdrLoader.setWithCredentials(this.withCredentials),this._hdrLoader}async getLottieLoader(){if(this._lottieLoader==null){const{LottieLoader:Ke}=await import(this.lottieLoaderUrl);this._lottieLoader=new Ke}return this._lottieLoader.setWithCredentials(this.withCredentials),this._lottieLoader}async loadImage(Ke){const Ye=await new Promise((Je,tt)=>this.ldrLoader.load(Ke,Je,()=>{},tt));return Ye.name=Ke,Ye.flipY=!1,Ye}async loadLottie(Ke,Ye){const Je=await this.getLottieLoader();Je.setQuality(Ye);const tt=await new Promise((st,rt)=>Je.load(Ke,st,()=>{},rt));return tt.name=Ke,tt}async loadEquirect(Ke,Ye=()=>{}){try{const Je=HDR_FILE_RE.test(Ke),tt=Je?this.hdrLoader:this.ldrLoader,st=await new Promise((rt,it)=>tt.load(Ke,rt,ot=>{Ye(ot.loaded/ot.total*.9)},it));return Ye(1),st.name=Ke,st.mapping=EquirectangularReflectionMapping,Je||(st.encoding=sRGBEncoding),st}finally{Ye&&Ye(1)}}async generateEnvironmentMapAndSkybox(Ke=null,Ye=null,Je=()=>{}){const tt=Ye!=="legacy";(Ye==="legacy"||Ye==="neutral")&&(Ye=null),Ye=deserializeUrl(Ye);let st=Promise.resolve(null),rt;Ke&&(st=this.loadEquirectFromUrl(Ke,Je)),Ye?rt=this.loadEquirectFromUrl(Ye,Je):Ke?rt=this.loadEquirectFromUrl(Ke,Je):rt=tt?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[it,ot]=await Promise.all([rt,st]);if(it==null)throw new Error("Failed to load environment map.");return{environmentMap:it,skybox:ot}}async loadEquirectFromUrl(Ke,Ye){if(!this.skyboxCache.has(Ke)){const Je=this.loadEquirect(Ke,Ye);this.skyboxCache.set(Ke,Je)}return this.skyboxCache.get(Ke)}async GenerateEnvironmentMap(Ke,Ye){await timePasses();const Je=this.threeRenderer,tt=new WebGLCubeRenderTarget(256,{generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,encoding:LinearEncoding,depthBuffer:!0}),st=new CubeCamera(.1,100,tt),rt=st.renderTarget.texture;rt.name=Ye;const it=Je.outputEncoding,ot=Je.toneMapping;return Je.toneMapping=NoToneMapping,Je.outputEncoding=LinearEncoding,st.update(Je,Ke),this.blurCubemap(tt,GENERATED_SIGMA),Je.toneMapping=ot,Je.outputEncoding=it,rt}async loadGeneratedEnvironmentMap(){return this.generatedEnvironmentMap==null&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new EnvironmentScene,"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return this.generatedEnvironmentMapAlt==null&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new EnvironmentSceneAlt,"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(Ke,Ye){if(this.blurMaterial==null){this.blurMaterial=this.getBlurShader(MAX_SAMPLES);const tt=new BoxGeometry,st=new Mesh(tt,this.blurMaterial);this.blurScene=new Scene,this.blurScene.add(st)}const Je=Ke.clone();this.halfblur(Ke,Je,Ye,"latitudinal"),this.halfblur(Je,Ke,Ye,"longitudinal")}halfblur(Ke,Ye,Je,tt){const rt=Ke.width,it=isFinite(Je)?Math.PI/(2*rt):2*Math.PI/(2*MAX_SAMPLES-1),ot=Je/it,at=isFinite(Je)?1+Math.floor(3*ot):MAX_SAMPLES;at>MAX_SAMPLES&&console.warn(`sigmaRadians, ${Je}, is too large and will clip, as it requested ${at} samples when the maximum is set to ${MAX_SAMPLES}`);const lt=[];let ut=0;for(let ft=0;ft<MAX_SAMPLES;++ft){const xt=ft/ot,vt=Math.exp(-xt*xt/2);lt.push(vt),ft==0?ut+=vt:ft<at&&(ut+=2*vt)}for(let ft=0;ft<lt.length;ft++)lt[ft]=lt[ft]/ut;const ht=this.blurMaterial.uniforms;ht.envMap.value=Ke.texture,ht.samples.value=at,ht.weights.value=lt,ht.latitudinal.value=tt==="latitudinal",ht.dTheta.value=it,new CubeCamera(.1,100,Ye).update(this.threeRenderer,this.blurScene)}getBlurShader(Ke){const Ye=new Float32Array(Ke),Je=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:Ke},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:Ye},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:Je}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:NoBlending,depthTest:!1,depthWrite:!1,side:BackSide})}async dispose(){for(const[,Ke]of this.skyboxCache)(await Ke).dispose();this.generatedEnvironmentMap!=null&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),this.generatedEnvironmentMapAlt!=null&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),this.blurMaterial!=null&&this.blurMaterial.dispose()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DURATION_DECAY=.2,LOW_FRAME_DURATION_MS=40,HIGH_FRAME_DURATION_MS=60,MAX_AVG_CHANGE_MS=5,SCALE_STEPS=[1,.79,.62,.5,.4,.31,.25],DEFAULT_LAST_STEP=3,DEFAULT_POWER_PREFERENCE="high-performance";class Renderer extends EventDispatcher{constructor(Ke){super(),this.loader=new CachingGLTFLoader(ModelViewerGLTFInstance),this.width=0,this.height=0,this.dpr=1,this.debugger=null,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=DEFAULT_LAST_STEP,this.avgFrameDuration=(HIGH_FRAME_DURATION_MS+LOW_FRAME_DURATION_MS)/2,this.onWebGLContextLost=Ye=>{this.dispatchEvent({type:"contextlost",sourceEvent:Ye})},this.onWebGLContextRestored=()=>{var Ye;(Ye=this.textureUtils)===null||Ye===void 0||Ye.dispose(),this.textureUtils=new TextureUtils(this.threeRenderer);for(const Je of this.scenes)Je.element[$updateEnvironment]()},this.dpr=resolveDpr(),this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new WebGLRenderer({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:Ke.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.outputEncoding=sRGBEncoding,this.threeRenderer.physicallyCorrectLights=!0,this.threeRenderer.setPixelRatio(1),this.debugger=Ke.debug?new Debugger(this):null,this.threeRenderer.debug={checkShaderErrors:!!this.debugger},this.threeRenderer.toneMapping=ACESFilmicToneMapping}catch(Ye){console.warn(Ye)}this.arRenderer=new ARRenderer(this),this.textureUtils=this.canRender?new TextureUtils(this.threeRenderer):null,CachingGLTFLoader.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}static get singleton(){return this._singleton}static resetSingleton(){const Ke=this._singleton.dispose();for(const Ye of Ke)Ye.disconnectedCallback();this._singleton=new Renderer({powerPreference:(self.ModelViewerElement||{}).powerPreference||DEFAULT_POWER_PREFERENCE,debug:isDebugMode()});for(const Ye of Ke)Ye.connectedCallback()}get canRender(){return this.threeRenderer!=null}get scaleFactor(){return SCALE_STEPS[this.scaleStep]}set minScale(Ke){let Ye=1;for(;Ye<SCALE_STEPS.length&&!(SCALE_STEPS[Ye]<Ke);)++Ye;this.lastStep=Ye-1}registerScene(Ke){this.scenes.add(Ke),Ke.forceRescale();const Ye=new Vector2;this.threeRenderer.getSize(Ye),Ke.canvas.width=Ye.x,Ke.canvas.height=Ye.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((Je,tt)=>this.render(Je,tt)),this.debugger!=null&&this.debugger.addScene(Ke)}unregisterScene(Ke){this.scenes.delete(Ke),this.canvas3D.parentElement===Ke.canvas.parentElement&&Ke.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&this.scenes.size===0&&this.threeRenderer.setAnimationLoop(null),this.debugger!=null&&this.debugger.removeScene(Ke)}displayCanvas(Ke){return this.multipleScenesVisible?Ke.element[$canvas]:this.canvas3D}countVisibleScenes(){const{canvas3D:Ke}=this;let Ye=0,Je=null;for(const st of this.scenes){const{element:rt}=st;rt.modelIsVisible&&st.externalRenderer==null&&++Ye,Ke.parentElement===st.canvas.parentElement&&(Je=st)}const tt=Ye>1;if(Je!=null){const st=tt&&!this.multipleScenesVisible,rt=!Je.element.modelIsVisible;if(st||rt){const{width:it,height:ot}=this.sceneSize(Je);this.copyPixels(Je,it,ot),Ke.parentElement.removeChild(Ke)}}this.multipleScenesVisible=tt}updateRendererSize(){const Ke=resolveDpr();if(Ke!==this.dpr)for(const tt of this.scenes){const{element:st}=tt;st[$updateSize](st.getBoundingClientRect())}let Ye=0,Je=0;for(const tt of this.scenes)Ye=Math.max(Ye,tt.width),Je=Math.max(Je,tt.height);if(!(Ye===this.width&&Je===this.height&&Ke===this.dpr)){this.width=Ye,this.height=Je,this.dpr=Ke,Ye=Math.ceil(Ye*Ke),Je=Math.ceil(Je*Ke),this.canRender&&this.threeRenderer.setSize(Ye,Je,!1);for(const tt of this.scenes){const{canvas:st}=tt;st.width=Ye,st.height=Je,tt.forceRescale()}}}updateRendererScale(Ke){const Ye=this.scaleStep;this.avgFrameDuration+=clamp$2(DURATION_DECAY*(Ke-this.avgFrameDuration),-MAX_AVG_CHANGE_MS,MAX_AVG_CHANGE_MS),this.avgFrameDuration>HIGH_FRAME_DURATION_MS?++this.scaleStep:this.avgFrameDuration<LOW_FRAME_DURATION_MS&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),Ye!==this.scaleStep&&(this.avgFrameDuration=(HIGH_FRAME_DURATION_MS+LOW_FRAME_DURATION_MS)/2)}shouldRender(Ke){if(Ke.shouldRender())Ke.scaleStep!=this.scaleStep&&(Ke.scaleStep=this.scaleStep,this.rescaleCanvas(Ke));else if(Ke.scaleStep!=0)Ke.scaleStep=0,this.rescaleCanvas(Ke);else return!1;return!0}rescaleCanvas(Ke){const Ye=SCALE_STEPS[Ke.scaleStep],Je=Math.ceil(this.width/Ye),tt=Math.ceil(this.height/Ye),{style:st}=Ke.canvas;st.width=`${Je}px`,st.height=`${tt}px`,this.canvas3D.style.width=`${Je}px`,this.canvas3D.style.height=`${tt}px`;const rt=this.dpr*Ye,it=Ye<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";Ke.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:rt,minimumDpr:this.dpr*SCALE_STEPS[this.lastStep],pixelWidth:Math.ceil(Ke.width*rt),pixelHeight:Math.ceil(Ke.height*rt),reason:it}}))}sceneSize(Ke){const{dpr:Ye}=this,Je=SCALE_STEPS[Ke.scaleStep],tt=Math.min(Math.ceil(Ke.width*Je*Ye),this.canvas3D.width),st=Math.min(Math.ceil(Ke.height*Je*Ye),this.canvas3D.height);return{width:tt,height:st}}copyPixels(Ke,Ye,Je){const tt=Ke.context;if(tt==null){console.log("could not acquire 2d context");return}tt.clearRect(0,0,Ye,Je),tt.drawImage(this.canvas3D,0,0,Ye,Je,0,0,Ye,Je),Ke.canvas.classList.add("show")}orderedScenes(){const Ke=[];for(const Ye of[!1,!0])for(const Je of this.scenes)Je.element.modelIsVisible===Ye&&Ke.push(Je);return Ke}get isPresenting(){return this.arRenderer.isPresenting}preRender(Ke,Ye,Je){const{element:tt,exposure:st}=Ke;tt[$tick](Ye,Je);const rt=typeof st=="number"&&!Number.isNaN(st);this.threeRenderer.toneMappingExposure=rt?st:1}render(Ke,Ye){if(Ye!=null){this.arRenderer.onWebXRFrame(Ke,Ye);return}const Je=Ke-this.lastTick;if(this.lastTick=Ke,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(Je),this.renderedLastFrame=!1);const{canvas3D:tt}=this;for(const st of this.orderedScenes()){const{element:rt}=st;if(!rt.loaded||!rt.modelIsVisible&&st.renderCount>0||(this.preRender(st,Ke,Je),!this.shouldRender(st)))continue;if(st.externalRenderer!=null){const at=st.getCamera();at.updateMatrix();const{matrix:lt,projectionMatrix:ut}=at,ht=lt.elements.slice(),pt=st.getTarget();ht[12]+=pt.x,ht[13]+=pt.y,ht[14]+=pt.z,st.externalRenderer.render({viewMatrix:ht,projectionMatrix:ut.elements});continue}if(!rt.modelIsVisible&&!this.multipleScenesVisible)for(const at of this.scenes)at.element.modelIsVisible&&at.queueRender();const{width:it,height:ot}=this.sceneSize(st);st.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-ot,it,ot),this.threeRenderer.render(st,st.camera),this.multipleScenesVisible||!st.element.modelIsVisible&&st.renderCount===0?this.copyPixels(st,it,ot):tt.parentElement!==st.canvas.parentElement&&(st.canvas.parentElement.appendChild(tt),st.canvas.classList.remove("show")),st.hasRendered(),++st.renderCount,this.renderedLastFrame=!0}}dispose(){this.textureUtils!=null&&this.textureUtils.dispose(),this.threeRenderer!=null&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const Ke=[];for(const Ye of this.scenes)Ke.push(Ye.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),Ke}}Renderer._singleton=new Renderer({powerPreference:(self.ModelViewerElement||{}).powerPreference||DEFAULT_POWER_PREFERENCE,debug:isDebugMode()});/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $correlatedObjects=Symbol("correlatedObjects"),$sourceObject=Symbol("sourceObject"),$onUpdate$1=Symbol("onUpdate");class ThreeDOMElement{constructor(Ke,Ye,Je=null){this[$onUpdate$1]=Ke,this[$sourceObject]=Ye,this[$correlatedObjects]=Je}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const quadMaterial=new MeshBasicMaterial,quad=new PlaneGeometry(2,2);let adhocNum=0;const $threeTexture=Symbol("threeTexture");let Image$1=class extends ThreeDOMElement{get[$threeTexture](){var Ke;return console.assert(this[$correlatedObjects]!=null&&this[$correlatedObjects].size>0,"Image correlated object is undefined"),(Ke=this[$correlatedObjects])===null||Ke===void 0?void 0:Ke.values().next().value}constructor(Ke,Ye,Je){Je=Je??{name:Ye&&Ye.image&&Ye.image.src?Ye.image.src.split("/").pop():"adhoc_image",uri:Ye&&Ye.image&&Ye.image.src?Ye.image.src:"adhoc_image"+adhocNum++},super(Ke,Je,new Set(Ye?[Ye]:[]))}get name(){return this[$sourceObject].name||""}get uri(){return this[$sourceObject].uri}get bufferView(){return this[$sourceObject].bufferView}get element(){const Ke=this[$threeTexture];if(Ke&&(Ke.isCanvasTexture||Ke.isVideoTexture))return Ke.image}get animation(){const Ke=this[$threeTexture];if(Ke&&Ke.isCanvasTexture&&Ke.animation)return Ke.animation}get type(){return this.uri!=null?"external":"embedded"}set name(Ke){this[$sourceObject].name=Ke}update(){const Ke=this[$threeTexture];Ke&&Ke.isCanvasTexture&&!Ke.animation&&(this[$threeTexture].needsUpdate=!0,this[$onUpdate$1]())}async createThumbnail(Ke,Ye){const Je=new Scene;quadMaterial.map=this[$threeTexture];const tt=new Mesh(quad,quadMaterial);Je.add(tt);const st=new OrthographicCamera(-1,1,1,-1,0,1),{threeRenderer:rt}=Renderer.singleton,it=new WebGLRenderTarget(Ke,Ye);rt.setRenderTarget(it),rt.render(Je,st),rt.setRenderTarget(null);const ot=new Uint8Array(Ke*Ye*4);rt.readRenderTargetPixels(it,0,0,Ke,Ye,ot),blobCanvas.width=Ke,blobCanvas.height=Ye;const at=blobCanvas.getContext("2d"),lt=at.createImageData(Ke,Ye);return lt.data.set(ot),at.putImageData(lt,0,0),new Promise(async(ut,ht)=>{blobCanvas.toBlob(pt=>{if(!pt)return ht("Failed to capture thumbnail.");ut(URL.createObjectURL(pt))},"image/png")})}};var Filter$1;(function(Xe){Xe[Xe.Nearest=9728]="Nearest",Xe[Xe.Linear=9729]="Linear",Xe[Xe.NearestMipmapNearest=9984]="NearestMipmapNearest",Xe[Xe.LinearMipmapNearest=9985]="LinearMipmapNearest",Xe[Xe.NearestMipmapLinear=9986]="NearestMipmapLinear",Xe[Xe.LinearMipmapLinear=9987]="LinearMipmapLinear"})(Filter$1||(Filter$1={}));var Wrap;(function(Xe){Xe[Xe.ClampToEdge=33071]="ClampToEdge",Xe[Xe.MirroredRepeat=33648]="MirroredRepeat",Xe[Xe.Repeat=10497]="Repeat"})(Wrap||(Wrap={}));/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const isMinFilter=(()=>{const Xe=[Filter$1.Nearest,Filter$1.Linear,Filter$1.NearestMipmapNearest,Filter$1.LinearMipmapLinear,Filter$1.NearestMipmapLinear,Filter$1.LinearMipmapLinear];return Ke=>Xe.indexOf(Ke)>-1})(),isMagFilter=(()=>{const Xe=[Filter$1.Nearest,Filter$1.Linear];return Ke=>Xe.indexOf(Ke)>-1})(),isWrapMode=(()=>{const Xe=[Wrap.ClampToEdge,Wrap.MirroredRepeat,Wrap.Repeat];return Ke=>Xe.indexOf(Ke)>-1})(),isValidSamplerValue=(Xe,Ke)=>{switch(Xe){case"minFilter":return isMinFilter(Ke);case"magFilter":return isMagFilter(Ke);case"wrapS":case"wrapT":return isWrapMode(Ke);default:throw new Error(`Cannot configure property "${Xe}" on Sampler`)}},$threeTextures=Symbol("threeTextures"),$setProperty=Symbol("setProperty"),$sourceSampler=Symbol("sourceSampler");let Sampler$1=class extends ThreeDOMElement{get[$threeTextures](){return console.assert(this[$correlatedObjects]!=null&&this[$correlatedObjects].size>0,"Sampler correlated object is undefined"),this[$correlatedObjects]}get[$sourceSampler](){return console.assert(this[$sourceObject]!=null,"Sampler source is undefined"),this[$sourceObject]}constructor(Ke,Ye,Je){Je=Je??{},Je.minFilter==null&&(Je.minFilter=Ye?Ye.minFilter:Filter$1.LinearMipmapLinear),Je.magFilter==null&&(Je.magFilter=Ye?Ye.magFilter:Filter$1.Linear),Je.wrapS==null&&(Je.wrapS=Ye?Ye.wrapS:Wrap.Repeat),Je.wrapT==null&&(Je.wrapT=Ye?Ye.wrapT:Wrap.Repeat),super(Ke,Je,new Set(Ye?[Ye]:[]))}get name(){return this[$sourceObject].name||""}get minFilter(){return this[$sourceSampler].minFilter}get magFilter(){return this[$sourceSampler].magFilter}get wrapS(){return this[$sourceSampler].wrapS}get wrapT(){return this[$sourceSampler].wrapT}setMinFilter(Ke){this[$setProperty]("minFilter",Ke)}setMagFilter(Ke){this[$setProperty]("magFilter",Ke)}setWrapS(Ke){this[$setProperty]("wrapS",Ke)}setWrapT(Ke){this[$setProperty]("wrapT",Ke)}[$setProperty](Ke,Ye){const Je=this[$sourceSampler];if(Je!=null){if(isValidSamplerValue(Ke,Ye)){Je[Ke]=Ye;for(const tt of this[$threeTextures])tt[Ke]=Ye,tt.needsUpdate=!0}this[$onUpdate$1]()}}};/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $image=Symbol("image"),$sampler=Symbol("sampler");class Texture extends ThreeDOMElement{constructor(Ke,Ye,Je=null,tt=null,st=null){super(Ke,Je||{},new Set(Ye?[Ye]:[])),this[$sampler]=new Sampler$1(Ke,Ye,tt),this[$image]=new Image$1(Ke,Ye,st)}get name(){return this[$sourceObject].name||""}set name(Ke){this[$sourceObject].name=Ke}get sampler(){return this[$sampler]}get source(){return this[$image]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$5,_b$4,_c$2;const $texture=Symbol("texture"),$transform=Symbol("transform"),$materials$1=Symbol("materials"),$usage=Symbol("usage"),$onUpdate=Symbol("onUpdate"),$activeVideo=Symbol("activeVideo");var TextureUsage$1;(function(Xe){Xe[Xe.Base=0]="Base",Xe[Xe.MetallicRoughness=1]="MetallicRoughness",Xe[Xe.Normal=2]="Normal",Xe[Xe.Occlusion=3]="Occlusion",Xe[Xe.Emissive=4]="Emissive"})(TextureUsage$1||(TextureUsage$1={}));class TextureInfo{constructor(Ke,Ye,Je,tt,st,rt){if(this[_a$5]=null,this[_b$4]={rotation:0,scale:new Vector2(1,1),offset:new Vector2(0,0)},this[_c$2]=!1,rt&&Je){const it=st.textures?st.textures[rt.index]:null,ot=it&&st.samplers?st.samplers[it.sampler]:null,at=it&&st.images?st.images[it.source]:null;this[$transform].rotation=Je.rotation,this[$transform].scale.copy(Je.repeat),this[$transform].offset.copy(Je.offset),this[$texture]=new Texture(Ke,Je,it,ot,at)}this[$onUpdate]=Ke,this[$materials$1]=tt,this[$usage]=Ye}get texture(){return this[$texture]}setTexture(Ke){var Ye,Je;const tt=Ke!=null?Ke.source[$threeTexture]:null,st=(Ye=this[$texture])===null||Ye===void 0?void 0:Ye.source[$threeTexture];if(st!=null&&st.isVideoTexture?this[$activeVideo]=!1:!((Je=this[$texture])===null||Je===void 0)&&Je.source.animation&&this[$texture].source.animation.removeEventListener("enterFrame",this[$onUpdate]),this[$texture]=Ke,tt!=null&&tt.isVideoTexture){const it=tt.image;if(this[$activeVideo]=!0,it.requestVideoFrameCallback!=null){const ot=()=>{this[$activeVideo]&&(this[$onUpdate](),it.requestVideoFrameCallback(ot))};it.requestVideoFrameCallback(ot)}else{const ot=()=>{this[$activeVideo]&&(this[$onUpdate](),requestAnimationFrame(ot))};requestAnimationFrame(ot)}}else(Ke==null?void 0:Ke.source.animation)!=null&&Ke.source.animation.addEventListener("enterFrame",this[$onUpdate]);let rt=sRGBEncoding;if(this[$materials$1])for(const it of this[$materials$1]){switch(this[$usage]){case TextureUsage$1.Base:it.map=tt;break;case TextureUsage$1.MetallicRoughness:rt=LinearEncoding,it.metalnessMap=tt,it.roughnessMap=tt;break;case TextureUsage$1.Normal:rt=LinearEncoding,it.normalMap=tt;break;case TextureUsage$1.Occlusion:rt=LinearEncoding,it.aoMap=tt;break;case TextureUsage$1.Emissive:it.emissiveMap=tt;break}it.needsUpdate=!0}tt&&(tt.encoding=rt,tt.rotation=this[$transform].rotation,tt.repeat=this[$transform].scale,tt.offset=this[$transform].offset),this[$onUpdate]()}}_a$5=$texture,_b$4=$transform,_c$2=$activeVideo;/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $threeMaterials=Symbol("threeMaterials"),$baseColorTexture=Symbol("baseColorTexture"),$metallicRoughnessTexture=Symbol("metallicRoughnessTexture");class PBRMetallicRoughness extends ThreeDOMElement{constructor(Ke,Ye,Je,tt){super(Ke,Je,tt),Je.baseColorFactor==null&&(Je.baseColorFactor=[1,1,1,1]),Je.roughnessFactor==null&&(Je.roughnessFactor=1),Je.metallicFactor==null&&(Je.metallicFactor=1);const{baseColorTexture:st,metallicRoughnessTexture:rt}=Je,{map:it,metalnessMap:ot}=tt.values().next().value;this[$baseColorTexture]=new TextureInfo(Ke,TextureUsage$1.Base,it,tt,Ye,st||null),this[$metallicRoughnessTexture]=new TextureInfo(Ke,TextureUsage$1.MetallicRoughness,ot,tt,Ye,rt||null)}get[$threeMaterials](){return this[$correlatedObjects]}get baseColorFactor(){return this[$sourceObject].baseColorFactor}get metallicFactor(){return this[$sourceObject].metallicFactor}get roughnessFactor(){return this[$sourceObject].roughnessFactor}get baseColorTexture(){return this[$baseColorTexture]}get metallicRoughnessTexture(){return this[$metallicRoughnessTexture]}setBaseColorFactor(Ke){const Ye=new Color;Ke instanceof Array?Ye.fromArray(Ke):Ye.set(Ke).convertSRGBToLinear();for(const tt of this[$threeMaterials])tt.color.set(Ye),Ke instanceof Array?tt.opacity=Ke[3]:(Ke=[0,0,0,tt.opacity],Ye.toArray(Ke));const Je=this[$sourceObject];Je.baseColorFactor=Ke,this[$onUpdate$1]()}setMetallicFactor(Ke){for(const Je of this[$threeMaterials])Je.metalness=Ke;const Ye=this[$sourceObject];Ye.metallicFactor=Ke,this[$onUpdate$1]()}setRoughnessFactor(Ke){for(const Je of this[$threeMaterials])Je.roughness=Ke;const Ye=this[$sourceObject];Ye.roughnessFactor=Ke,this[$onUpdate$1]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$4;const $pbrMetallicRoughness=Symbol("pbrMetallicRoughness"),$normalTexture=Symbol("normalTexture"),$occlusionTexture=Symbol("occlusionTexture"),$emissiveTexture=Symbol("emissiveTexture"),$backingThreeMaterial=Symbol("backingThreeMaterial"),$applyAlphaCutoff=Symbol("applyAlphaCutoff"),$lazyLoadGLTFInfo=Symbol("lazyLoadGLTFInfo"),$initialize=Symbol("initialize"),$getLoadedMaterial=Symbol("getLoadedMaterial"),$ensureMaterialIsLoaded=Symbol("ensureMaterialIsLoaded"),$gltfIndex=Symbol("gltfIndex"),$setActive=Symbol("setActive"),$variantIndices=Symbol("variantIndices"),$isActive=Symbol("isActive"),$variantSet=Symbol("variantSet"),$modelVariants=Symbol("modelVariants");class Material extends ThreeDOMElement{constructor(Ke,Ye,Je,tt,st,rt,it,ot=void 0){super(Ke,Je,it),this[_a$4]=new Set,this[$gltfIndex]=tt,this[$isActive]=st,this[$modelVariants]=rt,ot==null?this[$initialize](Ye):this[$lazyLoadGLTFInfo]=ot}get[(_a$4=$variantSet,$backingThreeMaterial)](){return this[$correlatedObjects].values().next().value}[$initialize](Ke){const Ye=this[$onUpdate$1],Je=this[$sourceObject],tt=this[$correlatedObjects];Je.extensions&&Je.extensions.KHR_materials_pbrSpecularGlossiness&&console.warn(`Material ${Je.name} uses a deprecated extension
          "KHR_materials_pbrSpecularGlossiness", please use
          "pbrMetallicRoughness" instead. Specular Glossiness materials are
          no longer supported; to convert to metal-rough, see 
          https://www.donmccurdy.com/2022/11/28/converting-gltf-pbr-materials-from-specgloss-to-metalrough/.`),Je.pbrMetallicRoughness==null&&(Je.pbrMetallicRoughness={}),this[$pbrMetallicRoughness]=new PBRMetallicRoughness(Ye,Ke,Je.pbrMetallicRoughness,tt),Je.emissiveFactor==null&&(Je.emissiveFactor=[0,0,0]),Je.doubleSided==null&&(Je.doubleSided=!1),Je.alphaMode==null&&(Je.alphaMode="OPAQUE"),Je.alphaCutoff==null&&(Je.alphaCutoff=.5);const{normalTexture:st,occlusionTexture:rt,emissiveTexture:it}=Je,{normalMap:ot,aoMap:at,emissiveMap:lt}=tt.values().next().value;this[$normalTexture]=new TextureInfo(Ye,TextureUsage$1.Normal,ot,tt,Ke,st||null),this[$occlusionTexture]=new TextureInfo(Ye,TextureUsage$1.Occlusion,at,tt,Ke,rt||null),this[$emissiveTexture]=new TextureInfo(Ye,TextureUsage$1.Emissive,lt,tt,Ke,it||null)}async[$getLoadedMaterial](){if(this[$lazyLoadGLTFInfo]!=null){const{set:Ke,material:Ye}=await this[$lazyLoadGLTFInfo].doLazyLoad();return this[$correlatedObjects]=Ke,this[$initialize](this[$lazyLoadGLTFInfo].gltf),this[$lazyLoadGLTFInfo]=void 0,this.ensureLoaded=async()=>{},Ye}return this[$correlatedObjects].values().next().value}[$ensureMaterialIsLoaded](){if(this[$lazyLoadGLTFInfo]!=null)throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[$getLoadedMaterial]()}get isLoaded(){return this[$lazyLoadGLTFInfo]==null}get isActive(){return this[$isActive]}[$setActive](Ke){this[$isActive]=Ke}get name(){return this[$sourceObject].name}set name(Ke){const Ye=this[$sourceObject];if(Ye!=null&&(Ye.name=Ke),this[$correlatedObjects]!=null)for(const Je of this[$correlatedObjects])Je.name=Ke}get pbrMetallicRoughness(){return this[$ensureMaterialIsLoaded](),this[$pbrMetallicRoughness]}get normalTexture(){return this[$ensureMaterialIsLoaded](),this[$normalTexture]}get occlusionTexture(){return this[$ensureMaterialIsLoaded](),this[$occlusionTexture]}get emissiveTexture(){return this[$ensureMaterialIsLoaded](),this[$emissiveTexture]}get emissiveFactor(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].emissiveFactor}get index(){return this[$gltfIndex]}[$variantIndices](){return this[$variantSet]}hasVariant(Ke){const Ye=this[$modelVariants].get(Ke);return Ye!=null&&this[$variantSet].has(Ye.index)}setEmissiveFactor(Ke){this[$ensureMaterialIsLoaded]();const Ye=new Color;Ke instanceof Array?Ye.fromArray(Ke):Ye.set(Ke).convertSRGBToLinear();for(const Je of this[$correlatedObjects])Je.emissive.set(Ye);this[$sourceObject].emissiveFactor=Ye.toArray(),this[$onUpdate$1]()}[$applyAlphaCutoff](){this[$ensureMaterialIsLoaded]();const Ke=this[$sourceObject];for(const Ye of this[$correlatedObjects])this[$sourceObject].alphaMode==="MASK"?Ye.alphaTest=Ke.alphaCutoff:Ye.alphaTest=void 0,Ye.needsUpdate=!0}setAlphaCutoff(Ke){this[$ensureMaterialIsLoaded](),this[$sourceObject].alphaCutoff=Ke,this[$applyAlphaCutoff](),this[$onUpdate$1]()}getAlphaCutoff(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].alphaCutoff}setDoubleSided(Ke){this[$ensureMaterialIsLoaded]();for(const Ye of this[$correlatedObjects])Ye.side=Ke?DoubleSide:FrontSide,Ye.needsUpdate=!0;this[$sourceObject].doubleSided=Ke,this[$onUpdate$1]()}getDoubleSided(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].doubleSided}setAlphaMode(Ke){this[$ensureMaterialIsLoaded]();const Ye=(Je,tt)=>{Je.transparent=tt,Je.depthWrite=!tt};this[$sourceObject].alphaMode=Ke;for(const Je of this[$correlatedObjects])Ye(Je,Ke==="BLEND"),this[$applyAlphaCutoff](),Je.needsUpdate=!0;this[$onUpdate$1]()}getAlphaMode(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].alphaMode}}let Node$2=class{constructor(Ke){this.name="",this.children=new Array,this.name=Ke}};class PrimitiveNode extends Node$2{constructor(Ke,Ye,Je,tt){super(Ke.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=Ke;const{gltf:st,threeGLTF:rt,threeObjectMap:it}=tt;this.modelVariants=Je,this.mesh.userData.variantData=Je;const ot=it.get(Ke.material);ot.materials!=null?this.initialMaterialIdx=this.activeMaterialIdx=ot.materials:console.error(`Primitive (${Ke.name}) missing initial material reference.`);const at=Ke.userData.associations||{};if(at.meshes==null){console.error("Mesh is missing primitive index association");return}const ht=((st.meshes||[])[at.meshes].primitives||[])[at.primitives];if(ht==null){console.error("Mesh primitive definition is missing.");return}if(ht.material!=null)this.materials.set(ht.material,Ye[ht.material]);else{const pt=Ye.findIndex(ft=>ft.name==="Default");pt>=0?this.materials.set(pt,Ye[pt]):console.warn("gltfPrimitive has no material!")}if(ht.extensions&&ht.extensions.KHR_materials_variants){const pt=ht.extensions.KHR_materials_variants,xt=rt.parser.json.extensions.KHR_materials_variants.variants;for(const vt of pt.mappings){const At=Ye[vt.material];this.materials.set(vt.material,At);for(const Et of vt.variants){const{name:wt}=xt[Et];this.variantToMaterialMap.set(Et,At),At[$variantIndices]().add(Et),Je.has(wt)||Je.set(wt,{name:wt,index:Et})}}}}async setActiveMaterial(Ke){const Ye=this.materials.get(Ke);return Ye!=null&&(this.mesh.material=await Ye[$getLoadedMaterial](),this.activeMaterialIdx=Ke),this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(Ke){return this.materials.get(Ke)}async enableVariant(Ke){if(Ke==null)return this.setActiveMaterial(this.initialMaterialIdx);if(this.variantToMaterialMap!=null&&this.modelVariants.has(Ke)){const Ye=this.modelVariants.get(Ke);return this.enableVariantHelper(Ye.index)}return null}async enableVariantHelper(Ke){if(this.variantToMaterialMap!=null&&Ke!=null){const Ye=this.variantToMaterialMap.get(Ke);if(Ye!=null)return this.setActiveMaterial(Ye.index)}return null}async instantiateVariants(){if(this.variantToMaterialMap!=null)for(const Ke of this.variantToMaterialMap.keys()){const Ye=this.mesh.userData.variantMaterials.get(Ke);if(Ye.material!=null)continue;const Je=await this.enableVariantHelper(Ke);Je!=null&&(Ye.material=Je)}}get variantInfo(){return this.variantToMaterialMap}addVariant(Ke,Ye){if(!this.ensureVariantIsUnused(Ye))return!1;this.modelVariants.has(Ye)||this.modelVariants.set(Ye,{name:Ye,index:this.modelVariants.size});const tt=this.modelVariants.get(Ye).index;return Ke[$variantIndices]().add(tt),this.variantToMaterialMap.set(tt,Ke),this.materials.set(Ke.index,Ke),this.updateVariantUserData(tt,Ke),!0}deleteVariant(Ke){if(this.variantInfo.has(Ke)){this.variantInfo.delete(Ke);const Ye=this.mesh.userData.variantMaterials;Ye!=null&&Ye.delete(Ke)}}updateVariantUserData(Ke,Ye){Ye[$variantIndices]().add(Ke),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(Ke,{material:Ye[$correlatedObjects].values().next().value,gltfMaterialIndex:Ye.index})}ensureVariantIsUnused(Ke){const Ye=this.modelVariants.get(Ke);return Ye!=null&&this.variantInfo.has(Ye.index)?(console.warn(`Primitive cannot add variant '${Ke}' for this material, it already exists.`),!1):!0}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$3,_b$3,_c$1,_d$1,_e$1,_f$1;const $materials=Symbol("materials"),$hierarchy=Symbol("hierarchy"),$roots=Symbol("roots"),$primitivesList=Symbol("primitives"),$correlatedSceneGraph=Symbol("correlatedSceneGraph"),$prepareVariantsForExport=Symbol("prepareVariantsForExport"),$switchVariant=Symbol("switchVariant"),$materialFromPoint=Symbol("materialFromPoint"),$nodeFromPoint=Symbol("nodeFromPoint"),$nodeFromIndex=Symbol("nodeFromIndex"),$variantData=Symbol("variantData"),$availableVariants=Symbol("availableVariants"),$modelOnUpdate=Symbol("modelOnUpdate"),$cloneMaterial=Symbol("cloneMaterial");class LazyLoader{constructor(Ke,Ye,Je,tt){this.gltf=Ke,this.gltfElementMap=Ye,this.mapKey=Je,this.doLazyLoad=tt}}class Model{constructor(Ke,Ye=()=>{}){this[_a$3]=new Array,this[_b$3]=new Array,this[_c$1]=new Array,this[_d$1]=new Array,this[_e$1]=()=>{},this[_f$1]=new Map,this[$modelOnUpdate]=Ye,this[$correlatedSceneGraph]=Ke;const{gltf:Je,threeGLTF:tt,gltfElementMap:st}=Ke;for(const[ot,at]of Je.materials.entries()){const lt=st.get(at);if(lt!=null)this[$materials].push(new Material(Ye,Je,at,ot,!0,this[$variantData],lt));else{const ht=(Je.materials||[])[ot],pt=ot,ft=async()=>{const xt=await tt.parser.getDependency("material",pt),vt=new Set;return st.set(ht,vt),vt.add(xt),{set:vt,material:xt}};this[$materials].push(new Material(Ye,Je,ht,ot,!1,this[$variantData],lt,new LazyLoader(Je,st,ht,ft)))}}const rt=new Map,it=new Array;for(const ot of tt.scene.children)it.push(ot);for(;it.length>0;){const ot=it.pop();let at=null;ot instanceof Mesh?(at=new PrimitiveNode(ot,this.materials,this[$variantData],Ke),this[$primitivesList].push(at)):at=new Node$2(ot.name);const lt=rt.get(ot);lt!=null?lt.children.push(at):this[$roots].push(at),this[$hierarchy].push(at);for(const ut of ot.children)it.push(ut),rt.set(ot,at)}}get materials(){return this[$materials]}[(_a$3=$materials,_b$3=$hierarchy,_c$1=$roots,_d$1=$primitivesList,_e$1=$modelOnUpdate,_f$1=$variantData,$availableVariants)](){const Ke=Array.from(this[$variantData].values());return Ke.sort((Ye,Je)=>Ye.index-Je.index),Ke.map(Ye=>Ye.name)}getMaterialByName(Ke){const Ye=this[$materials].filter(Je=>Je.name===Ke);return Ye.length>0?Ye[0]:null}[$nodeFromIndex](Ke,Ye){const Je=this[$hierarchy].find(tt=>{if(tt instanceof PrimitiveNode){const{meshes:st,primitives:rt}=tt.mesh.userData.associations;if(st==Ke&&rt==Ye)return!0}return!1});return Je??null}[$nodeFromPoint](Ke){return this[$hierarchy].find(Ye=>Ye instanceof PrimitiveNode&&Ye.mesh===Ke.object)}[$materialFromPoint](Ke){return this[$nodeFromPoint](Ke).getActiveMaterial()}async[$switchVariant](Ke){for(const Ye of this[$primitivesList])await Ye.enableVariant(Ke);for(const Ye of this.materials)Ye[$setActive](!1);for(const Ye of this[$primitivesList])this.materials[Ye.getActiveMaterial().index][$setActive](!0)}async[$prepareVariantsForExport](){const Ke=new Array;for(const Ye of this[$primitivesList])Ke.push(Ye.instantiateVariants());await Promise.all(Ke)}[$cloneMaterial](Ke,Ye){const Je=this.materials[Ke];Je.isLoaded||console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);const tt=Je[$correlatedObjects],st=JSON.parse(JSON.stringify(Je[$sourceObject]));st.name=Ye,this[$correlatedSceneGraph].gltf.materials.push(st);const it=new Set;for(const[at,lt]of tt.entries()){const ut=lt.clone();ut.name=Ye+(tt.size>1?"_inst"+at:""),it.add(ut)}const ot=new Material(this[$modelOnUpdate],this[$correlatedSceneGraph].gltf,st,this[$materials].length,!1,this[$variantData],it);return this[$materials].push(ot),ot}createMaterialInstanceForVariant(Ke,Ye,Je,tt=!0){let st=null;for(const rt of this[$primitivesList]){const it=this[$variantData].get(Je);it!=null&&rt.variantInfo.has(it.index)||rt.getMaterial(Ke)!=null&&(this.hasVariant(Je)||this.createVariant(Je),st==null&&(st=this[$cloneMaterial](Ke,Ye)),rt.addVariant(st,Je))}if(tt&&st!=null){st[$setActive](!0),this.materials[Ke][$setActive](!1);for(const rt of this[$primitivesList])rt.enableVariant(Je)}return st}createVariant(Ke){this[$variantData].has(Ke)?console.warn(`Variant '${Ke}'' already exists`):this[$variantData].set(Ke,{name:Ke,index:this[$variantData].size})}hasVariant(Ke){return this[$variantData].has(Ke)}setMaterialToVariant(Ke,Ye){if(this[$availableVariants]().find(Je=>Je===Ye)==null){console.warn(`Can't add material to '${Ye}', the variant does not exist.'`);return}if(Ke<0||Ke>=this.materials.length){console.error("setMaterialToVariant(): materialIndex is out of bounds.");return}for(const Je of this[$primitivesList]){const tt=Je.getMaterial(Ke);tt!=null&&Je.addVariant(tt,Ye)}}updateVariantName(Ke,Ye){const Je=this[$variantData].get(Ke);Je!=null&&(Je.name=Ye,this[$variantData].set(Ye,Je),this[$variantData].delete(Ke))}deleteVariant(Ke){const Ye=this[$variantData].get(Ke);if(Ye!=null){for(const Je of this.materials)Je.hasVariant(Ke)&&Je[$variantSet].delete(Ye.index);for(const Je of this[$primitivesList])Je.deleteVariant(Ye.index);this[$variantData].delete(Ke)}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$5=function(Xe,Ke,Ye,Je){var tt=arguments.length,st=tt<3?Ke:Je===null?Je=Object.getOwnPropertyDescriptor(Ke,Ye):Je,rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")st=Reflect.decorate(Xe,Ke,Ye,Je);else for(var it=Xe.length-1;it>=0;it--)(rt=Xe[it])&&(st=(tt<3?rt(st):tt>3?rt(Ke,Ye,st):rt(Ke,Ye))||st);return tt>3&&st&&Object.defineProperty(Ke,Ye,st),st};const $currentGLTF=Symbol("currentGLTF"),$originalGltfJson=Symbol("originalGltfJson"),$model=Symbol("model"),$getOnUpdateMethod=Symbol("getOnUpdateMethod"),$buildTexture=Symbol("buildTexture"),SceneGraphMixin=Xe=>{var Ke,Ye,Je;class tt extends Xe{constructor(){super(...arguments),this[Ke]=void 0,this[Ye]=null,this[Je]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[$model]}get availableVariants(){return this.model?this.model[$availableVariants]():[]}get originalGltfJson(){return this[$originalGltfJson]}[(Ke=$model,Ye=$currentGLTF,Je=$originalGltfJson,$getOnUpdateMethod)](){return()=>{this[$needsRender]()}}[$buildTexture](rt){return rt.encoding=sRGBEncoding,rt.wrapS=RepeatWrapping,rt.wrapT=RepeatWrapping,new Texture(this[$getOnUpdateMethod](),rt)}async createTexture(rt,it="image/png"){const{textureUtils:ot}=this[$renderer],at=await ot.loadImage(rt);return at.userData.mimeType=it,this[$buildTexture](at)}async createLottieTexture(rt,it=1){const{textureUtils:ot}=this[$renderer],at=await ot.loadLottie(rt,it);return this[$buildTexture](at)}createVideoTexture(rt){const it=document.createElement("video");it.src=rt,it.muted=!0,it.play(),it.loop=!0;const ot=new VideoTexture(it);return this[$buildTexture](ot)}createCanvasTexture(){const rt=document.createElement("canvas"),it=new CanvasTexture(rt);return this[$buildTexture](it)}async updated(rt){if(super.updated(rt),rt.has("variantName")){const it=this[$progressTracker].beginActivity();it(.1);const ot=this[$model],{variantName:at}=this;ot!=null&&(await ot[$switchVariant](at),this[$needsRender](),this.dispatchEvent(new CustomEvent("variant-applied"))),it(1)}if(rt.has("orientation")||rt.has("scale")){if(!this.loaded)return;const it=this[$scene];it.applyTransform(),it.updateBoundingBox(),it.updateShadow(),this[$renderer].arRenderer.onUpdateScene(),this[$needsRender]()}}[$onModelLoad](){super[$onModelLoad]();const{currentGLTF:rt}=this[$scene];if(rt!=null){const{correlatedSceneGraph:it}=rt;it!=null&&rt!==this[$currentGLTF]&&(this[$model]=new Model(it,this[$getOnUpdateMethod]()),this[$originalGltfJson]=JSON.parse(JSON.stringify(it.gltf))),"variants"in rt.userData&&this.requestUpdate("variantName")}this[$currentGLTF]=rt}async exportScene(rt){const it=this[$scene];return new Promise(async(ot,at)=>{const lt={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(lt,rt),lt.animations=it.animations,lt.truncateDrawRange=!0;const ut=it.shadow;let ht=!1;ut!=null&&(ht=ut.visible,ut.visible=!1),await this[$model][$prepareVariantsForExport](),new GLTFExporter().register(ft=>new GLTFExporterMaterialsVariantsExtension(ft)).parse(it.model,ft=>ot(new Blob([lt.binary?ft:JSON.stringify(ft)],{type:lt.binary?"application/octet-stream":"application/json"})),()=>at("glTF export failed"),lt),ut!=null&&(ut.visible=ht)})}materialFromPoint(rt,it){const ot=this[$model];if(ot==null)return null;const at=this[$scene],lt=at.getNDC(rt,it),ut=at.hitFromPoint(lt);return ut==null||ut.face==null?null:ot[$materialFromPoint](ut)}}return __decorate$5([e$4({type:String,attribute:"variant-name"})],tt.prototype,"variantName",void 0),__decorate$5([e$4({type:String,attribute:"orientation"})],tt.prototype,"orientation",void 0),__decorate$5([e$4({type:String,attribute:"scale"})],tt.prototype,"scale",void 0),tt};/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a=new Vector3,b$1=new Vector3,c$2=new Vector3,mat=new Matrix3,triangle=new Triangle,quat=new Quaternion;class Hotspot extends CSS2DObject{constructor(Ke){super(document.createElement("div")),this.normal=new Vector3(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=Ke.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(Ke.position),this.updateNormal(Ke.normal),this.surface=Ke.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){(!this.facingCamera||!this.initialized)&&this.updateVisibility(!0)}hide(){(this.facingCamera||!this.initialized)&&this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,this.referenceCount===0}updatePosition(Ke){if(Ke==null)return;const Ye=parseExpressions(Ke)[0].terms;for(let Je=0;Je<3;++Je)this.position.setComponent(Je,normalizeUnit(Ye[Je]).number);this.updateMatrixWorld()}updateNormal(Ke){if(Ke==null)return;const Ye=parseExpressions(Ke)[0].terms;for(let Je=0;Je<3;++Je)this.normal.setComponent(Je,Ye[Je].number)}updateSurface(Ke){if(!Ke&&this.initialized)return;const{mesh:Ye,tri:Je,bary:tt}=this;if(Ye==null||Je==null||tt==null)return;Ye.getVertexPosition(Je.x,a),Ye.getVertexPosition(Je.y,b$1),Ye.getVertexPosition(Je.z,c$2),a.toArray(mat.elements,0),b$1.toArray(mat.elements,3),c$2.toArray(mat.elements,6),this.position.copy(tt).applyMatrix3(mat);const st=this.parent;st.worldToLocal(Ye.localToWorld(this.position)),triangle.set(a,b$1,c$2),triangle.getNormal(this.normal).transformDirection(Ye.matrixWorld);const rt=st.parent;quat.setFromAxisAngle(a.set(0,1,0),-rt.yaw),this.normal.applyQuaternion(quat)}orient(Ke){this.pivot.style.transform=`rotate(${Ke}rad)`}updateVisibility(Ke){Ke?this.element.classList.remove("hide"):this.element.classList.add("hide"),this.slot.assignedNodes().forEach(Ye=>{if(Ye.nodeType!==Node.ELEMENT_NODE)return;const Je=Ye,tt=Je.dataset.visibilityAttribute;if(tt!=null){const st=`data-${tt}`;Ke?Je.setAttribute(st,""):Je.removeAttribute(st)}Je.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:Ke}}))}),this.initialized=!0}}const HorizontalBlurShader={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},VerticalBlurShader={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};function lerp(Xe,Ke,Ye){return(1-Ye)*Xe+Ye*Ke}/* @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LOG_MAX_RESOLUTION=9,LOG_MIN_RESOLUTION=6,ANIMATION_SCALING=2,DEFAULT_HARD_INTENSITY=.3;class Shadow extends Object3D{constructor(Ke,Ye,Je){super(),this.camera=new OrthographicCamera,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new MeshDepthMaterial,this.horizontalBlurMaterial=new ShaderMaterial(HorizontalBlurShader),this.verticalBlurMaterial=new ShaderMaterial(VerticalBlurShader),this.intensity=0,this.softness=1,this.boundingBox=new Box3,this.size=new Vector3,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:tt}=this;tt.rotation.x=Math.PI/2,tt.left=-.5,tt.right=.5,tt.bottom=-.5,tt.top=.5,this.add(tt);const st=new PlaneGeometry,rt=new MeshBasicMaterial({opacity:1,transparent:!0,side:BackSide});this.floor=new Mesh(st,rt),this.floor.userData.shadow=!0,tt.add(this.floor),this.blurPlane=new Mesh(st),this.blurPlane.visible=!1,tt.add(this.blurPlane),Ke.target.add(this),this.depthMaterial.onBeforeCompile=function(it){it.fragmentShader=it.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(Ke,Ye,Je)}setScene(Ke,Ye,Je){const{boundingBox:tt,size:st,rotation:rt,position:it}=this;if(this.isAnimated=Ke.animationNames.length>0,this.boundingBox.copy(Ke.boundingBox),this.size.copy(Ke.size),this.maxDimension=Math.max(st.x,st.y,st.z)*(this.isAnimated?ANIMATION_SCALING:1),this.boundingBox.getCenter(it),Je==="back"){const{min:ot,max:at}=tt;[ot.y,ot.z]=[ot.z,ot.y],[at.y,at.z]=[at.z,at.y],[st.y,st.z]=[st.z,st.y],rt.x=Math.PI/2,rt.y=Math.PI}else rt.x=0,rt.y=0;if(this.isAnimated){const ot=tt.min.y,at=tt.max.y;st.y=this.maxDimension,tt.expandByVector(st.subScalar(this.maxDimension).multiplyScalar(-.5)),tt.min.y=ot,tt.max.y=at,st.set(this.maxDimension,at-ot,this.maxDimension)}Je==="bottom"?it.y=tt.min.y:it.z=tt.min.y,this.setSoftness(Ye)}setSoftness(Ke){this.softness=Ke;const{size:Ye,camera:Je}=this,tt=this.isAnimated?ANIMATION_SCALING:1,st=tt*Math.pow(2,LOG_MAX_RESOLUTION-Ke*(LOG_MAX_RESOLUTION-LOG_MIN_RESOLUTION));this.setMapSize(st);const rt=Ye.y/2,it=Ye.y*tt;Je.near=0,Je.far=lerp(it,rt,Ke),this.depthMaterial.opacity=1/Ke,Je.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(Ke){const{size:Ye}=this;this.isAnimated&&(Ke*=ANIMATION_SCALING);const Je=Math.floor(Ye.x>Ye.z?Ke:Ke*Ye.x/Ye.z),tt=Math.floor(Ye.x>Ye.z?Ke*Ye.z/Ye.x:Ke),st=10,rt=st+Je,it=st+tt;if(this.renderTarget!=null&&(this.renderTarget.width!==rt||this.renderTarget.height!==it)&&(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),this.renderTarget==null){const ot={format:RGBAFormat};this.renderTarget=new WebGLRenderTarget(rt,it,ot),this.renderTargetBlur=new WebGLRenderTarget(rt,it,ot),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(Ye.x*(1+st/Je),Ye.z*(1+st/tt),1),this.needsUpdate=!0}setIntensity(Ke){this.intensity=Ke,Ke>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=Ke*lerp(DEFAULT_HARD_INTENSITY,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(Ke){this.floor.position.z=-Ke+.001*this.maxDimension}render(Ke,Ye){Ye.overrideMaterial=this.depthMaterial;const Je=Ke.getClearAlpha();Ke.setClearAlpha(0),this.floor.visible=!1;const tt=Ke.xr.enabled;Ke.xr.enabled=!1;const st=Ke.getRenderTarget();Ke.setRenderTarget(this.renderTarget),Ke.render(Ye,this.camera),Ye.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(Ke),Ke.xr.enabled=tt,Ke.setRenderTarget(st),Ke.setClearAlpha(Je)}blurShadow(Ke){const{camera:Ye,horizontalBlurMaterial:Je,verticalBlurMaterial:tt,renderTarget:st,renderTargetBlur:rt,blurPlane:it}=this;it.visible=!0,it.material=Je,Je.uniforms.h.value=1/this.renderTarget.width,Je.uniforms.tDiffuse.value=this.renderTarget.texture,Ke.setRenderTarget(rt),Ke.render(it,Ye),it.material=tt,tt.uniforms.v.value=1/this.renderTarget.height,tt.uniforms.tDiffuse.value=this.renderTargetBlur.texture,Ke.setRenderTarget(st),Ke.render(it,Ye),it.visible=!1}dispose(){this.renderTarget!=null&&this.renderTarget.dispose(),this.renderTargetBlur!=null&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MIN_SHADOW_RATIO=100,view=new Vector3,target=new Vector3,normalWorld=new Vector3,raycaster=new Raycaster,vector3=new Vector3,ndc=new Vector2;class ModelScene extends Scene{constructor({canvas:Ke,element:Ye,width:Je,height:tt}){super(),this.annotationRenderer=new CSS2DRenderer,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new PerspectiveCamera(45,1,.1,100),this.xrCamera=null,this.url=null,this.target=new Object3D,this.animationNames=[],this.boundingBox=new Box3,this.boundingSphere=new Sphere,this.size=new Vector3,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.canScale=!0,this.isDirty=!1,this.goalTarget=new Vector3,this.targetDamperX=new Damper,this.targetDamperY=new Damper,this.targetDamperZ=new Damper,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.name="ModelScene",this.element=Ye,this.canvas=Ke,this.camera=new PerspectiveCamera(45,1,.1,100),this.camera.name="MainCamera",this.add(this.target),this.setSize(Je,tt),this.target.name="Target",this.mixer=new AnimationMixer(this.target);const{domElement:st}=this.annotationRenderer,{style:rt}=st;rt.display="none",rt.pointerEvents="none",rt.position="absolute",rt.top="0",this.element.shadowRoot.querySelector(".default").appendChild(st),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return this.xrCamera!=null?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(Ke){this.reset(),this._model=Ke,this.target.add(Ke),await this.setupScene()}async setSource(Ke,Ye=()=>{}){if(!Ke||Ke===this.url){Ye(1);return}if(this.reset(),this.url=Ke,this.externalRenderer!=null){const it=await this.externalRenderer.load(Ye);this.boundingSphere.radius=it.framedRadius,this.idealAspect=it.fieldOfViewAspect;return}this.cancelPendingSourceChange!=null&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);let Je;try{Je=await new Promise(async(it,ot)=>{this.cancelPendingSourceChange=()=>ot();try{const at=await this.element[$renderer].loader.load(Ke,this.element,Ye);it(at)}catch(at){ot(at)}})}catch(it){if(it==null)return;throw it}this.cancelPendingSourceChange=null,this.reset(),this.url=Ke,this._currentGLTF=Je,Je!=null&&(this._model=Je.scene,this.target.add(Je.scene));const{animations:tt}=Je,st=new Map,rt=[];for(const it of tt)st.set(it.name,it),rt.push(it.name);this.animations=tt,this.animationsByName=st,this.animationNames=rt,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity)}reset(){this.url=null,this.renderCount=0,this.queueRender(),this.shadow!=null&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:Ke}=this;Ke!=null&&(Ke.removeFromParent(),this._model=null);const Ye=this._currentGLTF;Ye!=null&&(Ye.dispose(),this._currentGLTF=null),this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),this.shadow!=null&&(this.shadow.dispose(),this.shadow=null),this.element[$currentGLTF]=null,this.element[$originalGltfJson]=null,this.element[$model]=null}get currentGLTF(){return this._currentGLTF}setSize(Ke,Ye){if(!(this.width===Ke&&this.height===Ye)){if(this.width=Math.max(Ke,1),this.height=Math.max(Ye,1),this.annotationRenderer.setSize(Ke,Ye),this.aspect=this.width/this.height,this.externalRenderer!=null){const Je=resolveDpr();this.externalRenderer.resize(Ke*Je,Ye*Je)}this.queueRender()}}markBakedShadow(Ke){Ke.userData.shadow=!0,this.bakedShadows.add(Ke)}unmarkBakedShadow(Ke){Ke.userData.shadow=!1,Ke.visible=!0,this.bakedShadows.delete(Ke),this.boundingBox.expandByObject(Ke)}findBakedShadows(Ke){const Ye=new Box3;Ke.traverse(Je=>{const tt=Je;if(!tt.isMesh||!tt.material.transparent)return;Ye.setFromObject(tt);const rt=Ye.getSize(vector3),it=Math.min(rt.x,rt.y,rt.z);Math.max(rt.x,rt.y,rt.z)<MIN_SHADOW_RATIO*it||this.markBakedShadow(tt)})}checkBakedShadows(){const{min:Ke,max:Ye}=this.boundingBox,Je=new Box3;this.boundingBox.getSize(this.size);for(const tt of this.bakedShadows)Je.setFromObject(tt),!(Je.min.y<Ke.y+this.size.y/MIN_SHADOW_RATIO&&Je.min.x<=Ke.x&&Je.max.x>=Ye.x&&Je.min.z<=Ke.z&&Je.max.z>=Ye.z)&&(Je.min.z<Ke.z+this.size.z/MIN_SHADOW_RATIO&&Je.min.x<=Ke.x&&Je.max.x>=Ye.x&&Je.min.y<=Ke.y&&Je.max.y>=Ye.y||this.unmarkBakedShadow(tt))}applyTransform(){const{model:Ke}=this;if(Ke==null)return;const Ye=parseExpressions(this.element.orientation)[0].terms,Je=normalizeUnit(Ye[0]).number,tt=normalizeUnit(Ye[1]).number,st=normalizeUnit(Ye[2]).number;Ke.quaternion.setFromEuler(new Euler(tt,st,Je,"YXZ"));const rt=parseExpressions(this.element.scale)[0].terms;Ke.scale.set(rt[0].number,rt[1].number,rt[2].number)}updateBoundingBox(){const{model:Ke}=this;if(Ke==null)return;this.target.remove(Ke),this.findBakedShadows(Ke);const Ye=(Je,tt)=>Je.expandByPoint(tt);this.setBakedShadowVisibility(!1),this.boundingBox=reduceVertices(Ke,Ye,new Box3),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(Je=>this.unmarkBakedShadow(Je)),this.boundingBox=reduceVertices(Ke,Ye,new Box3)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(Ke)}async updateFraming(){const{model:Ke}=this;if(Ke==null)return;this.target.remove(Ke),this.setBakedShadowVisibility(!1);const{center:Ye}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,Ye.copy(this.getTarget());const Je=(st,rt)=>Math.max(st,Ye.distanceToSquared(rt));this.boundingSphere.radius=Math.sqrt(reduceVertices(Ke,Je,0));const tt=(st,rt)=>{rt.sub(Ye);const it=Math.sqrt(rt.x*rt.x+rt.z*rt.z);return Math.max(st,it/(this.idealCameraDistance()-Math.abs(rt.y)))};this.idealAspect=reduceVertices(Ke,tt,0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(Ke)}setBakedShadowVisibility(Ke=this.shadowIntensity<=0){for(const Ye of this.bakedShadows)Ye.visible=Ke}idealCameraDistance(){const Ke=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(Ke)}adjustedFoV(Ke){const Ye=Math.tan(Ke/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(Ye)*180/Math.PI}getNDC(Ke,Ye){if(this.xrCamera!=null)ndc.set(Ke/window.screen.width,Ye/window.screen.height);else{const Je=this.element.getBoundingClientRect();ndc.set((Ke-Je.x)/this.width,(Ye-Je.y)/this.height)}return ndc.multiplyScalar(2).subScalar(1),ndc.y*=-1,ndc}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(Ke,Ye){this.element[$renderer].arRenderer.presentedScene!==this&&(this.environment=Ke,this.background=Ye,this.queueRender())}setTarget(Ke,Ye,Je){this.goalTarget.set(-Ke,-Ye,-Je)}setTargetDamperDecayTime(Ke){this.targetDamperX.setDecayTime(Ke),this.targetDamperY.setDecayTime(Ke),this.targetDamperZ.setDecayTime(Ke)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(SETTLING_TIME)}updateTarget(Ke){const Ye=this.goalTarget,Je=this.target.position;if(Ye.equals(Je))return!1;{const tt=this.boundingSphere.radius/10;let{x:st,y:rt,z:it}=Je;return st=this.targetDamperX.update(st,Ye.x,Ke,tt),rt=this.targetDamperY.update(rt,Ye.y,Ke,tt),it=this.targetDamperZ.update(it,Ye.z,Ke,tt),this.target.position.set(st,rt,it),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(Ke,Ye){const{x:Je,z:tt}=this.position;this.yaw=Math.atan2(Ke-Je,Ye-tt)}get model(){return this._model}set yaw(Ke){this.rotation.y=Ke,this.queueRender()}get yaw(){return this.rotation.y}set animationTime(Ke){this.mixer.setTime(Ke),this.queueShadowRender()}get animationTime(){if(this.currentAnimationAction!=null){const Ke=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===LoopPingPong&&(Ke&1)===1?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(Ke){this.mixer.timeScale=Ke}get animationTimeScale(){return this.mixer.timeScale}get duration(){return this.currentAnimationAction!=null&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(Ke=null,Ye=0,Je=LoopRepeat,tt=1/0){if(this._currentGLTF==null)return;const{animations:st}=this;if(st==null||st.length===0){console.warn("Cannot play animation (model does not have any animations)");return}let rt=null;if(Ke!=null&&(rt=this.animationsByName.get(Ke),rt==null)){const it=parseInt(Ke);!isNaN(it)&&it>=0&&it<st.length&&(rt=st[it])}rt==null&&(rt=st[0]);try{const{currentAnimationAction:it}=this,ot=this.mixer.clipAction(rt,this);this.currentAnimationAction=ot,this.element.paused?this.mixer.stopAllAction():(ot.paused=!1,it!=null&&ot!==it?ot.crossFadeFrom(it,Ye,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),ot.setLoop(Je,tt),ot.enabled=!0,ot.clampWhenFinished=!0,ot.play()}catch(it){console.error(it)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(Ke){this.mixer.update(Ke),this.queueShadowRender()}subscribeMixerEvent(Ke,Ye){this.mixer.addEventListener(Ke,Ye)}updateShadow(){const Ke=this.shadow;if(Ke!=null){const Ye=this.element.arPlacement==="wall"?"back":"bottom";Ke.setScene(this,this.shadowSoftness,Ye),Ke.needsUpdate=!0}}renderShadow(Ke){const Ye=this.shadow;Ye!=null&&Ye.needsUpdate==!0&&(Ye.render(Ke,this),Ye.needsUpdate=!1)}queueShadowRender(){this.shadow!=null&&(this.shadow.needsUpdate=!0)}setShadowIntensity(Ke){if(this.shadowIntensity=Ke,this._currentGLTF!=null&&(this.setBakedShadowVisibility(),!(Ke<=0&&this.shadow==null))){if(this.shadow==null){const Ye=this.element.arPlacement==="wall"?"back":"bottom";this.shadow=new Shadow(this,this.shadowSoftness,Ye)}this.shadow.setIntensity(Ke)}}setShadowSoftness(Ke){this.shadowSoftness=Ke;const Ye=this.shadow;Ye!=null&&Ye.setSoftness(Ke)}setShadowOffset(Ke){const Ye=this.shadow;Ye!=null&&Ye.setOffset(Ke)}get raycaster(){return raycaster}hitFromPoint(Ke,Ye=this){return this.raycaster.setFromCamera(Ke,this.getCamera()),this.raycaster.intersectObject(Ye,!0).find(tt=>tt.object.visible&&!tt.object.userData.shadow)}positionAndNormalFromPoint(Ke,Ye=this){const Je=this.hitFromPoint(Ke,Ye);return Je==null||Je.face==null?null:Je.uv==null?{position:Je.point,normal:Je.face.normal,uv:null}:(Je.face.normal.applyNormalMatrix(new Matrix3().getNormalMatrix(Je.object.matrixWorld)),{position:Je.point,normal:Je.face.normal,uv:Je.uv})}surfaceFromPoint(Ke,Ye=this){const Je=this.element.model;if(Je==null)return null;const tt=this.hitFromPoint(Ke,Ye);if(tt==null||tt.face==null)return null;const st=Je[$nodeFromPoint](tt),{meshes:rt,primitives:it}=st.mesh.userData.associations,ot=new Vector3,at=new Vector3,lt=new Vector3,{a:ut,b:ht,c:pt}=tt.face,ft=tt.object;ft.getVertexPosition(ut,ot),ft.getVertexPosition(ht,at),ft.getVertexPosition(pt,lt);const xt=new Triangle(ot,at,lt),vt=new Vector3;return xt.getBarycoord(ft.worldToLocal(tt.point),vt),`${rt} ${it} ${ut} ${ht} ${pt} ${vt.x.toFixed(3)} ${vt.y.toFixed(3)} ${vt.z.toFixed(3)}`}addHotspot(Ke){this.target.add(Ke),this.annotationRenderer.domElement.appendChild(Ke.element)}removeHotspot(Ke){this.target.remove(Ke)}forHotspots(Ke){const{children:Ye}=this.target;for(let Je=0,tt=Ye.length;Je<tt;Je++){const st=Ye[Je];st instanceof Hotspot&&Ke(st)}}initializeSurface(Ke){if(Ke.surface!=null&&Ke.mesh==null){const Ye=parseExpressions(Ke.surface)[0].terms;if(Ye.length!=8){console.warn(Ke.surface+" does not have exactly 8 numbers.");return}const Je=this.element.model[$nodeFromIndex](Ye[0].number,Ye[1].number),tt=new Vector3(Ye[2].number,Ye[3].number,Ye[4].number);if(Je==null){console.warn(Ke.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");return}const st=Je.mesh.geometry.attributes.position.count;if(tt.x>=st||tt.y>=st||tt.z>=st){console.warn(Ke.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");return}const rt=new Vector3(Ye[5].number,Ye[6].number,Ye[7].number);Ke.mesh=Je.mesh,Ke.tri=tt,Ke.bary=rt}}updateSurfaceHotspots(){const Ke=!this.element.paused;this.forHotspots(Ye=>{this.initializeSurface(Ye),Ye.updateSurface(Ke)})}updateHotspotsVisibility(Ke){this.forHotspots(Ye=>{view.copy(Ke),target.setFromMatrixPosition(Ye.matrixWorld),view.sub(target),normalWorld.copy(Ye.normal).transformDirection(this.target.matrixWorld),view.dot(normalWorld)<0?Ye.hide():Ye.show()})}orientHotspots(Ke){this.forHotspots(Ye=>{Ye.orient(Ke)})}setHotspotsVisibility(Ke){this.forHotspots(Ye=>{Ye.visible=Ke})}updateSchema(Ke){var Ye;const{schemaElement:Je,element:tt}=this,{alt:st,poster:rt,iosSrc:it}=tt;if(Ke!=null){const ot=[{"@type":"MediaObject",contentUrl:Ke,encodingFormat:((Ye=Ke.split(".").pop())===null||Ye===void 0?void 0:Ye.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];it&&ot.push({"@type":"MediaObject",contentUrl:it,encodingFormat:"model/vnd.usdz+zip"});const at={"@context":"http://schema.org/","@type":"3DModel",image:rt??void 0,name:st??void 0,encoding:ot};Je.textContent=JSON.stringify(at),document.head.appendChild(Je)}else Je.parentElement!=null&&Je.parentElement.removeChild(Je)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dataUrlToBlob=async Xe=>new Promise((Ke,Ye)=>{const tt=Xe.match(/data:(.*);/);if(!tt)return Ye(new Error(`${Xe} is not a valid data Url`));const st=tt[1],rt=Xe.replace(/data:image\/\w+;base64,/,""),it=atob(rt),ot=[];for(let at=0;at<it.length;at+=512){const lt=it.slice(at,at+512),ut=new Array(lt.length);for(let pt=0;pt<lt.length;pt++)ut[pt]=lt.charCodeAt(pt);const ht=new Uint8Array(ut);ot.push(ht)}Ke(new Blob(ot,{type:st}))});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProgressTracker extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(){const Ke={progress:0,completed:!1};return this.ongoingActivities.add(Ke),this.ongoingActivityCount===1&&this.announceTotalProgress(Ke,0),Ye=>{let Je;return Je=Math.max(clamp$2(Ye,0,1),Ke.progress),Je!==Ke.progress&&this.announceTotalProgress(Ke,Je),Ke.progress}}announceTotalProgress(Ke,Ye){let Je=0,tt=0;Ye==1&&(Ke.completed=!0);for(const it of this.ongoingActivities){const{progress:ot}=it;Je+=1-ot,it.completed===!0&&tt++}const st=Ke.progress;Ke.progress=Ye,this.totalProgress+=(Ye-st)*(1-this.totalProgress)/Je;const rt=tt===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:rt}})),tt===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$4=function(Xe,Ke,Ye,Je){var tt=arguments.length,st=tt<3?Ke:Je===null?Je=Object.getOwnPropertyDescriptor(Ke,Ye):Je,rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")st=Reflect.decorate(Xe,Ke,Ye,Je);else for(var it=Xe.length-1;it>=0;it--)(rt=Xe[it])&&(st=(tt<3?rt(st):tt>3?rt(Ke,Ye,st):rt(Ke,Ye))||st);return tt>3&&st&&Object.defineProperty(Ke,Ye,st),st},_a$2,_b$2,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o;const CLEAR_MODEL_TIMEOUT_MS=10,FALLBACK_SIZE_UPDATE_THRESHOLD_MS=50,ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD=0,UNSIZED_MEDIA_WIDTH=300,UNSIZED_MEDIA_HEIGHT=150,blobCanvas=document.createElement("canvas"),$fallbackResizeHandler=Symbol("fallbackResizeHandler"),$defaultAriaLabel=Symbol("defaultAriaLabel"),$resizeObserver=Symbol("resizeObserver"),$clearModelTimeout=Symbol("clearModelTimeout"),$onContextLost=Symbol("onContextLost"),$loaded=Symbol("loaded"),$status=Symbol("status"),$onFocus=Symbol("onFocus"),$onBlur=Symbol("onBlur"),$updateSize=Symbol("updateSize"),$intersectionObserver=Symbol("intersectionObserver"),$isElementInViewport=Symbol("isElementInViewport"),$announceModelVisibility=Symbol("announceModelVisibility"),$ariaLabel=Symbol("ariaLabel"),$altDefaulted=Symbol("altDefaulted"),$statusElement=Symbol("statusElement"),$updateStatus=Symbol("updateStatus"),$loadedTime=Symbol("loadedTime"),$updateSource=Symbol("updateSource"),$markLoaded=Symbol("markLoaded"),$container=Symbol("container"),$userInputElement=Symbol("input"),$canvas=Symbol("canvas"),$scene=Symbol("scene"),$needsRender=Symbol("needsRender"),$tick=Symbol("tick"),$onModelLoad=Symbol("onModelLoad"),$onResize=Symbol("onResize"),$renderer=Symbol("renderer"),$progressTracker=Symbol("progressTracker"),$getLoaded=Symbol("getLoaded"),$getModelIsVisible=Symbol("getModelIsVisible"),$shouldAttemptPreload=Symbol("shouldAttemptPreload"),toVector3D=Xe=>({x:Xe.x,y:Xe.y,z:Xe.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),toVector2D=Xe=>({u:Xe.x,v:Xe.y,toString(){return`${this.u} ${this.v}`}});class ModelViewerElementBase extends d$2{constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[_a$2]=!1,this[_b$2]=!1,this[_c]=0,this[_d]="",this[_e]=null,this[_f]=debounce$1(()=>{const tt=this.getBoundingClientRect();this[$updateSize](tt)},FALLBACK_SIZE_UPDATE_THRESHOLD_MS),this[_g]=debounce$1(tt=>{const st=this.modelIsVisible;st!==tt&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:st}}))},ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD),this[_h]=null,this[_j]=null,this[_k]=new ProgressTracker,this[_l]=()=>{this[$statusElement].textContent=this[$status]},this[_m]=()=>{this[$statusElement].textContent=""},this[_o]=tt=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:tt.sourceEvent}}))},this.attachShadow({mode:"open"});const Ke=this.shadowRoot;makeTemplate(Ke),this[$container]=Ke.querySelector(".container"),this[$userInputElement]=Ke.querySelector(".userInput"),this[$canvas]=Ke.querySelector("canvas"),this[$statusElement]=Ke.querySelector("#status"),this[$defaultAriaLabel]=this[$userInputElement].getAttribute("aria-label");let Ye,Je;if(this.isConnected){const tt=this.getBoundingClientRect();Ye=tt.width,Je=tt.height}else Ye=UNSIZED_MEDIA_WIDTH,Je=UNSIZED_MEDIA_HEIGHT;this[$scene]=new ModelScene({canvas:this[$canvas],element:this,width:Ye,height:Je}),Promise.resolve().then(()=>{this[$updateSize](this.getBoundingClientRect())}),HAS_RESIZE_OBSERVER&&(this[$resizeObserver]=new ResizeObserver(tt=>{if(!this[$renderer].isPresenting)for(let st of tt)st.target===this&&this[$updateSize](st.contentRect)})),HAS_INTERSECTION_OBSERVER?this[$intersectionObserver]=new IntersectionObserver(tt=>{for(let st of tt)if(st.target===this){const rt=this.modelIsVisible;this[$isElementInViewport]=st.isIntersecting,this[$announceModelVisibility](rt),this[$isElementInViewport]&&!this.loaded&&this[$updateSource]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[$isElementInViewport]=!0}static get is(){return"model-viewer"}static set modelCacheSize(Ke){CachingGLTFLoader[$evictionPolicy].evictionThreshold=Ke}static get modelCacheSize(){return CachingGLTFLoader[$evictionPolicy].evictionThreshold}static set minimumRenderScale(Ke){Ke>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),Ke<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),Renderer.singleton.minScale=Ke}static get minimumRenderScale(){return Renderer.singleton.minScale}get loaded(){return this[$getLoaded]()}get[(_a$2=$isElementInViewport,_b$2=$loaded,_c=$loadedTime,_d=$status,_e=$clearModelTimeout,_f=$fallbackResizeHandler,_g=$announceModelVisibility,_h=$resizeObserver,_j=$intersectionObserver,_k=$progressTracker,$renderer)](){return Renderer.singleton}get modelIsVisible(){return this[$getModelIsVisible]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),HAS_RESIZE_OBSERVER?this[$resizeObserver].observe(this):self.addEventListener("resize",this[$fallbackResizeHandler]),HAS_INTERSECTION_OBSERVER&&this[$intersectionObserver].observe(this),this.addEventListener("focus",this[$onFocus]),this.addEventListener("blur",this[$onBlur]);const Ke=this[$renderer];Ke.addEventListener("contextlost",this[$onContextLost]),Ke.registerScene(this[$scene]),this[$clearModelTimeout]!=null&&(self.clearTimeout(this[$clearModelTimeout]),this[$clearModelTimeout]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),HAS_RESIZE_OBSERVER?this[$resizeObserver].unobserve(this):self.removeEventListener("resize",this[$fallbackResizeHandler]),HAS_INTERSECTION_OBSERVER&&this[$intersectionObserver].unobserve(this),this.removeEventListener("focus",this[$onFocus]),this.removeEventListener("blur",this[$onBlur]);const Ke=this[$renderer];Ke.removeEventListener("contextlost",this[$onContextLost]),Ke.unregisterScene(this[$scene]),this[$clearModelTimeout]=self.setTimeout(()=>{this[$scene].dispose(),this[$clearModelTimeout]=null},CLEAR_MODEL_TIMEOUT_MS)}updated(Ke){super.updated(Ke),Ke.has("src")&&(this.src==null?(this[$loaded]=!1,this[$loadedTime]=0,this[$scene].reset()):this.src!==this[$scene].url&&(this[$loaded]=!1,this[$loadedTime]=0,this[$updateSource]())),Ke.has("alt")&&this[$userInputElement].setAttribute("aria-label",this[$ariaLabel]),Ke.has("withCredentials")&&(CachingGLTFLoader.withCredentials=this.withCredentials,this[$renderer].textureUtils.withCredentials=this.withCredentials),Ke.has("generateSchema")&&(this.generateSchema?this[$scene].updateSchema(this.src):this[$scene].updateSchema(null))}toDataURL(Ke,Ye){return this[$renderer].displayCanvas(this[$scene]).toDataURL(Ke,Ye)}async toBlob(Ke){const Ye=Ke?Ke.mimeType:void 0,Je=Ke?Ke.qualityArgument:void 0,tt=Ke?Ke.idealAspect:void 0,{width:st,height:rt,idealAspect:it,aspect:ot}=this[$scene],{dpr:at,scaleFactor:lt}=this[$renderer];let ut=st*lt*at,ht=rt*lt*at,pt=0,ft=0;if(tt===!0)if(it>ot){const xt=ht;ht=Math.round(ut/it),ft=(xt-ht)/2}else{const xt=ut;ut=Math.round(ht*it),pt=(xt-ut)/2}blobCanvas.width=ut,blobCanvas.height=ht;try{return new Promise(async(xt,vt)=>{if(blobCanvas.getContext("2d").drawImage(this[$renderer].displayCanvas(this[$scene]),pt,ft,ut,ht,0,0,ut,ht),blobCanvas.msToBlob&&(!Ye||Ye==="image/png"))return xt(blobCanvas.msToBlob());if(!blobCanvas.toBlob)return xt(await dataUrlToBlob(blobCanvas.toDataURL(Ye,Je)));blobCanvas.toBlob(At=>{if(!At)return vt(new Error("Unable to retrieve canvas blob"));xt(At)},Ye,Je)})}finally{this[$updateSize]({width:st,height:rt})}}registerRenderer(Ke){this[$scene].externalRenderer=Ke}unregisterRenderer(){this[$scene].externalRenderer=null}get[$ariaLabel](){return this[$altDefaulted]}get[$altDefaulted](){return this.alt==null||this.alt==="null"?this[$defaultAriaLabel]:this.alt}[$getLoaded](){return this[$loaded]}[$getModelIsVisible](){return this.loaded&&this[$isElementInViewport]}[$shouldAttemptPreload](){return!!this.src&&this[$isElementInViewport]}[$updateSize]({width:Ke,height:Ye}){Ke===0||Ye===0||(this[$container].style.width=`${Ke}px`,this[$container].style.height=`${Ye}px`,this[$onResize]({width:Ke,height:Ye}))}[$tick](Ke,Ye){}[$markLoaded](){this[$loaded]||(this[$loaded]=!0,this[$loadedTime]=performance.now())}[$needsRender](){this[$scene].queueRender()}[$onModelLoad](){}[$updateStatus](Ke){this[$status]=Ke;const Ye=this.getRootNode();Ye!=null&&Ye.activeElement===this&&this[$statusElement].textContent!=Ke&&(this[$statusElement].textContent=Ke)}[(_l=$onFocus,_m=$onBlur,$onResize)](Ke){this[$scene].setSize(Ke.width,Ke.height)}async[(_o=$onContextLost,$updateSource)](){const Ke=this[$scene];if(this.loaded||!this[$shouldAttemptPreload]()||this.src===Ke.url)return;this.generateSchema&&Ke.updateSchema(this.src),this[$updateStatus]("Loading"),Ke.stopAnimation();const Ye=this[$progressTracker].beginActivity(),Je=this.src;try{const tt=Ke.setSource(Je,rt=>Ye(clamp$2(rt,0,1)*.95)),st=this[$updateEnvironment]();await Promise.all([tt,st]),this[$markLoaded](),this[$onModelLoad](),await new Promise(rt=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:Je}})),rt()})})})}catch(tt){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:tt}}))}finally{Ye(1)}}}__decorate$4([e$4({type:String})],ModelViewerElementBase.prototype,"alt",void 0);__decorate$4([e$4({type:String})],ModelViewerElementBase.prototype,"src",void 0);__decorate$4([e$4({type:Boolean,attribute:"with-credentials"})],ModelViewerElementBase.prototype,"withCredentials",void 0);__decorate$4([e$4({type:Boolean,attribute:"generate-schema"})],ModelViewerElementBase.prototype,"generateSchema",void 0);/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$3=function(Xe,Ke,Ye,Je){var tt=arguments.length,st=tt<3?Ke:Je===null?Je=Object.getOwnPropertyDescriptor(Ke,Ye):Je,rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")st=Reflect.decorate(Xe,Ke,Ye,Je);else for(var it=Xe.length-1;it>=0;it--)(rt=Xe[it])&&(st=(tt<3?rt(st):tt>3?rt(Ke,Ye,st):rt(Ke,Ye))||st);return tt>3&&st&&Object.defineProperty(Ke,Ye,st),st};const MILLISECONDS_PER_SECOND=1e3,$changeAnimation=Symbol("changeAnimation"),$paused=Symbol("paused"),DEFAULT_PLAY_OPTIONS={repetitions:1/0,pingpong:!1},AnimationMixin=Xe=>{var Ke;class Ye extends Xe{constructor(...tt){super(tt),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[Ke]=!0,this[$scene].subscribeMixerEvent("loop",st=>{const rt=st.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:rt}}))}),this[$scene].subscribeMixerEvent("finished",()=>{this[$paused]=!0,this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[$scene].animationNames:[]}get duration(){return this[$scene].duration}get paused(){return this[$paused]}get currentTime(){return this[$scene].animationTime}set currentTime(tt){this[$scene].animationTime=tt,this[$needsRender]()}get timeScale(){return this[$scene].animationTimeScale}set timeScale(tt){this[$scene].animationTimeScale=tt}pause(){this[$paused]||(this[$paused]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(tt){this.availableAnimations.length>0&&(this[$paused]=!1,this[$changeAnimation](tt),this.dispatchEvent(new CustomEvent("play")))}[(Ke=$paused,$onModelLoad)](){super[$onModelLoad](),this[$paused]=!0,this.autoplay&&this.play()}[$tick](tt,st){super[$tick](tt,st),!(this[$paused]||!this[$getModelIsVisible]()&&!this[$renderer].isPresenting)&&(this[$scene].updateAnimation(st/MILLISECONDS_PER_SECOND),this[$needsRender]())}updated(tt){super.updated(tt),tt.has("autoplay")&&this.autoplay&&this.play(),tt.has("animationName")&&this[$changeAnimation]()}[$changeAnimation](tt=DEFAULT_PLAY_OPTIONS){var st;const rt=(st=tt.repetitions)!==null&&st!==void 0?st:1/0,it=tt.pingpong?LoopPingPong:rt===1?LoopOnce:LoopRepeat;this[$scene].playAnimation(this.animationName,this.animationCrossfadeDuration/MILLISECONDS_PER_SECOND,it,rt),this[$paused]&&(this[$scene].updateAnimation(0),this[$needsRender]())}}return __decorate$3([e$4({type:Boolean})],Ye.prototype,"autoplay",void 0),__decorate$3([e$4({type:String,attribute:"animation-name"})],Ye.prototype,"animationName",void 0),__decorate$3([e$4({type:Number,attribute:"animation-crossfade-duration"})],Ye.prototype,"animationCrossfadeDuration",void 0),Ye};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $hotspotMap=Symbol("hotspotMap"),$mutationCallback=Symbol("mutationCallback"),$observer=Symbol("observer"),$addHotspot=Symbol("addHotspot"),$removeHotspot=Symbol("removeHotspot"),worldToModel=new Matrix4,AnnotationMixin=Xe=>{var Ke,Ye,Je;class tt extends Xe{constructor(){super(...arguments),this[Ke]=new Map,this[Ye]=rt=>{rt.forEach(it=>{(!(it instanceof MutationRecord)||it.type==="childList")&&(it.addedNodes.forEach(ot=>{this[$addHotspot](ot)}),it.removedNodes.forEach(ot=>{this[$removeHotspot](ot)}),this[$needsRender]())})},this[Je]=new MutationObserver(this[$mutationCallback])}connectedCallback(){super.connectedCallback();for(let it=0;it<this.children.length;++it)this[$addHotspot](this.children[it]);const{ShadyDOM:rt}=self;rt==null?this[$observer].observe(this,{childList:!0}):this[$observer]=rt.observeChildren(this,this[$mutationCallback])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:rt}=self;rt==null?this[$observer].disconnect():rt.unobserveChildren(this[$observer])}[(Ke=$hotspotMap,Ye=$mutationCallback,Je=$observer,$tick)](rt,it){super[$tick](rt,it);const ot=this[$scene],{annotationRenderer:at}=ot,lt=ot.getCamera();ot.shouldRender()&&(ot.updateSurfaceHotspots(),ot.updateHotspotsVisibility(lt.position),at.domElement.style.display="",at.render(ot,lt))}updateHotspot(rt){const it=this[$hotspotMap].get(rt.name);it!=null&&(it.updatePosition(rt.position),it.updateNormal(rt.normal),it.surface=rt.surface,this[$needsRender]())}queryHotspot(rt){const it=this[$hotspotMap].get(rt);if(it==null)return null;const ot=toVector3D(it.position),at=toVector3D(it.normal),lt=it.facingCamera,ut=this[$scene],ht=ut.getCamera(),pt=new Vector3;pt.setFromMatrixPosition(it.matrixWorld),pt.project(ht);const ft=ut.width/2,xt=ut.height/2;pt.x=pt.x*ft+ft,pt.y=-(pt.y*xt)+xt;const vt=toVector3D(new Vector3(pt.x,pt.y,pt.z));return!Number.isFinite(vt.x)||!Number.isFinite(vt.y)?null:{position:ot,normal:at,canvasPosition:vt,facingCamera:lt}}positionAndNormalFromPoint(rt,it){const ot=this[$scene],at=ot.getNDC(rt,it),lt=ot.positionAndNormalFromPoint(at);if(lt==null)return null;worldToModel.copy(ot.target.matrixWorld).invert();const ut=toVector3D(lt.position.applyMatrix4(worldToModel)),ht=toVector3D(lt.normal.transformDirection(worldToModel));let pt=null;return lt.uv!=null&&(pt=toVector2D(lt.uv)),{position:ut,normal:ht,uv:pt}}surfaceFromPoint(rt,it){const ot=this[$scene],at=ot.getNDC(rt,it);return ot.surfaceFromPoint(at)}[$addHotspot](rt){if(!(rt instanceof HTMLElement&&rt.slot.indexOf("hotspot")===0))return;let it=this[$hotspotMap].get(rt.slot);it!=null?it.increment():(it=new Hotspot({name:rt.slot,position:rt.dataset.position,normal:rt.dataset.normal,surface:rt.dataset.surface}),this[$hotspotMap].set(rt.slot,it),this[$scene].addHotspot(it)),this[$scene].queueRender()}[$removeHotspot](rt){if(!(rt instanceof HTMLElement))return;const it=this[$hotspotMap].get(rt.slot);it&&(it.decrement()&&(this[$scene].removeHotspot(it),this[$hotspotMap].delete(rt.slot)),this[$scene].queueRender())}}return tt};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var durl=function(Xe){return URL.createObjectURL(new Blob([Xe],{type:"text/javascript"}))};try{URL.revokeObjectURL(durl(""))}catch{durl=function(Ke){return"data:application/javascript;charset=UTF-8,"+encodeURI(Ke)}}var u8$1=Uint8Array,u16$1=Uint16Array,u32$1=Uint32Array,fleb$1=new u8$1([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb$1=new u8$1([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim$1=new u8$1([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb$1=function(Xe,Ke){for(var Ye=new u16$1(31),Je=0;Je<31;++Je)Ye[Je]=Ke+=1<<Xe[Je-1];for(var tt=new u32$1(Ye[30]),Je=1;Je<30;++Je)for(var st=Ye[Je];st<Ye[Je+1];++st)tt[st]=st-Ye[Je]<<5|Je;return[Ye,tt]},_a$1=freb$1(fleb$1,2),fl$1=_a$1[0],revfl$1=_a$1[1];fl$1[28]=258,revfl$1[258]=28;var _b$1=freb$1(fdeb$1,0),revfd=_b$1[1],rev$1=new u16$1(32768);for(var i$2=0;i$2<32768;++i$2){var x$2=(i$2&43690)>>>1|(i$2&21845)<<1;x$2=(x$2&52428)>>>2|(x$2&13107)<<2,x$2=(x$2&61680)>>>4|(x$2&3855)<<4,rev$1[i$2]=((x$2&65280)>>>8|(x$2&255)<<8)>>>1}var hMap$1=(function(Xe,Ke,Ye){for(var Je=Xe.length,tt=0,st=new u16$1(Ke);tt<Je;++tt)++st[Xe[tt]-1];var rt=new u16$1(Ke);for(tt=0;tt<Ke;++tt)rt[tt]=rt[tt-1]+st[tt-1]<<1;var it;if(Ye){it=new u16$1(1<<Ke);var ot=15-Ke;for(tt=0;tt<Je;++tt)if(Xe[tt])for(var at=tt<<4|Xe[tt],lt=Ke-Xe[tt],ut=rt[Xe[tt]-1]++<<lt,ht=ut|(1<<lt)-1;ut<=ht;++ut)it[rev$1[ut]>>>ot]=at}else for(it=new u16$1(Je),tt=0;tt<Je;++tt)Xe[tt]&&(it[tt]=rev$1[rt[Xe[tt]-1]++]>>>15-Xe[tt]);return it}),flt$1=new u8$1(288);for(var i$2=0;i$2<144;++i$2)flt$1[i$2]=8;for(var i$2=144;i$2<256;++i$2)flt$1[i$2]=9;for(var i$2=256;i$2<280;++i$2)flt$1[i$2]=7;for(var i$2=280;i$2<288;++i$2)flt$1[i$2]=8;var fdt$1=new u8$1(32);for(var i$2=0;i$2<32;++i$2)fdt$1[i$2]=5;var flm=hMap$1(flt$1,9,0),fdm=hMap$1(fdt$1,5,0),shft$1=function(Xe){return(Xe/8|0)+(Xe&7&&1)},slc$1=function(Xe,Ke,Ye){(Ye==null||Ye>Xe.length)&&(Ye=Xe.length);var Je=new(Xe instanceof u16$1?u16$1:Xe instanceof u32$1?u32$1:u8$1)(Ye-Ke);return Je.set(Xe.subarray(Ke,Ye)),Je},wbits=function(Xe,Ke,Ye){Ye<<=Ke&7;var Je=Ke/8|0;Xe[Je]|=Ye,Xe[Je+1]|=Ye>>>8},wbits16=function(Xe,Ke,Ye){Ye<<=Ke&7;var Je=Ke/8|0;Xe[Je]|=Ye,Xe[Je+1]|=Ye>>>8,Xe[Je+2]|=Ye>>>16},hTree=function(Xe,Ke){for(var Ye=[],Je=0;Je<Xe.length;++Je)Xe[Je]&&Ye.push({s:Je,f:Xe[Je]});var tt=Ye.length,st=Ye.slice();if(!tt)return[et$1,0];if(tt==1){var rt=new u8$1(Ye[0].s+1);return rt[Ye[0].s]=1,[rt,1]}Ye.sort(function(Ct,Tt){return Ct.f-Tt.f}),Ye.push({s:-1,f:25001});var it=Ye[0],ot=Ye[1],at=0,lt=1,ut=2;for(Ye[0]={s:-1,f:it.f+ot.f,l:it,r:ot};lt!=tt-1;)it=Ye[Ye[at].f<Ye[ut].f?at++:ut++],ot=Ye[at!=lt&&Ye[at].f<Ye[ut].f?at++:ut++],Ye[lt++]={s:-1,f:it.f+ot.f,l:it,r:ot};for(var ht=st[0].s,Je=1;Je<tt;++Je)st[Je].s>ht&&(ht=st[Je].s);var pt=new u16$1(ht+1),ft=ln(Ye[lt-1],pt,0);if(ft>Ke){var Je=0,xt=0,vt=ft-Ke,At=1<<vt;for(st.sort(function(Tt,St){return pt[St.s]-pt[Tt.s]||Tt.f-St.f});Je<tt;++Je){var Et=st[Je].s;if(pt[Et]>Ke)xt+=At-(1<<ft-pt[Et]),pt[Et]=Ke;else break}for(xt>>>=vt;xt>0;){var wt=st[Je].s;pt[wt]<Ke?xt-=1<<Ke-pt[wt]++-1:++Je}for(;Je>=0&&xt;--Je){var _t=st[Je].s;pt[_t]==Ke&&(--pt[_t],++xt)}ft=Ke}return[new u8$1(pt),ft]},ln=function(Xe,Ke,Ye){return Xe.s==-1?Math.max(ln(Xe.l,Ke,Ye+1),ln(Xe.r,Ke,Ye+1)):Ke[Xe.s]=Ye},lc=function(Xe){for(var Ke=Xe.length;Ke&&!Xe[--Ke];);for(var Ye=new u16$1(++Ke),Je=0,tt=Xe[0],st=1,rt=function(ot){Ye[Je++]=ot},it=1;it<=Ke;++it)if(Xe[it]==tt&&it!=Ke)++st;else{if(!tt&&st>2){for(;st>138;st-=138)rt(32754);st>2&&(rt(st>10?st-11<<5|28690:st-3<<5|12305),st=0)}else if(st>3){for(rt(tt),--st;st>6;st-=6)rt(8304);st>2&&(rt(st-3<<5|8208),st=0)}for(;st--;)rt(tt);st=1,tt=Xe[it]}return[Ye.subarray(0,Je),Ke]},clen=function(Xe,Ke){for(var Ye=0,Je=0;Je<Ke.length;++Je)Ye+=Xe[Je]*Ke[Je];return Ye},wfblk=function(Xe,Ke,Ye){var Je=Ye.length,tt=shft$1(Ke+2);Xe[tt]=Je&255,Xe[tt+1]=Je>>>8,Xe[tt+2]=Xe[tt]^255,Xe[tt+3]=Xe[tt+1]^255;for(var st=0;st<Je;++st)Xe[tt+st+4]=Ye[st];return(tt+4+Je)*8},wblk=function(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt){wbits(Ke,lt++,Ye),++tt[256];for(var ut=hTree(tt,15),ht=ut[0],pt=ut[1],ft=hTree(st,15),xt=ft[0],vt=ft[1],At=lc(ht),Et=At[0],wt=At[1],_t=lc(xt),Ct=_t[0],Tt=_t[1],St=new u16$1(19),Rt=0;Rt<Et.length;++Rt)St[Et[Rt]&31]++;for(var Rt=0;Rt<Ct.length;++Rt)St[Ct[Rt]&31]++;for(var Nt=hTree(St,7),Pt=Nt[0],Bt=Nt[1],Lt=19;Lt>4&&!Pt[clim$1[Lt-1]];--Lt);var zt=at+5<<3,Dt=clen(tt,flt$1)+clen(st,fdt$1)+rt,Vt=clen(tt,ht)+clen(st,xt)+rt+14+3*Lt+clen(St,Pt)+(2*St[16]+3*St[17]+7*St[18]);if(zt<=Dt&&zt<=Vt)return wfblk(Ke,lt,Xe.subarray(ot,ot+at));var Gt,Qt,jt,Ht;if(wbits(Ke,lt,1+(Vt<Dt)),lt+=2,Vt<Dt){Gt=hMap$1(ht,pt,0),Qt=ht,jt=hMap$1(xt,vt,0),Ht=xt;var Yt=hMap$1(Pt,Bt,0);wbits(Ke,lt,wt-257),wbits(Ke,lt+5,Tt-1),wbits(Ke,lt+10,Lt-4),lt+=14;for(var Rt=0;Rt<Lt;++Rt)wbits(Ke,lt+3*Rt,Pt[clim$1[Rt]]);lt+=3*Lt;for(var Jt=[Et,Ct],Zt=0;Zt<2;++Zt)for(var nn=Jt[Zt],Rt=0;Rt<nn.length;++Rt){var cn=nn[Rt]&31;wbits(Ke,lt,Yt[cn]),lt+=Pt[cn],cn>15&&(wbits(Ke,lt,nn[Rt]>>>5&127),lt+=nn[Rt]>>>12)}}else Gt=flm,Qt=flt$1,jt=fdm,Ht=fdt$1;for(var Rt=0;Rt<it;++Rt)if(Je[Rt]>255){var cn=Je[Rt]>>>18&31;wbits16(Ke,lt,Gt[cn+257]),lt+=Qt[cn+257],cn>7&&(wbits(Ke,lt,Je[Rt]>>>23&31),lt+=fleb$1[cn]);var an=Je[Rt]&31;wbits16(Ke,lt,jt[an]),lt+=Ht[an],an>3&&(wbits16(Ke,lt,Je[Rt]>>>5&8191),lt+=fdeb$1[an])}else wbits16(Ke,lt,Gt[Je[Rt]]),lt+=Qt[Je[Rt]];return wbits16(Ke,lt,Gt[256]),lt+Qt[256]},deo=new u32$1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8$1(0),dflt=function(Xe,Ke,Ye,Je,tt,st){var rt=Xe.length,it=new u8$1(Je+rt+5*(1+Math.ceil(rt/7e3))+tt),ot=it.subarray(Je,it.length-tt),at=0;if(!Ke||rt<8)for(var lt=0;lt<=rt;lt+=65535){var ut=lt+65535;ut<rt?at=wfblk(ot,at,Xe.subarray(lt,ut)):(ot[lt]=st,at=wfblk(ot,at,Xe.subarray(lt,rt)))}else{for(var ht=deo[Ke-1],pt=ht>>>13,ft=ht&8191,xt=(1<<Ye)-1,vt=new u16$1(32768),At=new u16$1(xt+1),Et=Math.ceil(Ye/3),wt=2*Et,_t=function(kn){return(Xe[kn]^Xe[kn+1]<<Et^Xe[kn+2]<<wt)&xt},Ct=new u32$1(25e3),Tt=new u16$1(288),St=new u16$1(32),Rt=0,Nt=0,lt=0,Pt=0,Bt=0,Lt=0;lt<rt;++lt){var zt=_t(lt),Dt=lt&32767,Vt=At[zt];if(vt[Dt]=Vt,At[zt]=Dt,Bt<=lt){var Gt=rt-lt;if((Rt>7e3||Pt>24576)&&Gt>423){at=wblk(Xe,ot,0,Ct,Tt,St,Nt,Pt,Lt,lt-Lt,at),Pt=Rt=Nt=0,Lt=lt;for(var Qt=0;Qt<286;++Qt)Tt[Qt]=0;for(var Qt=0;Qt<30;++Qt)St[Qt]=0}var jt=2,Ht=0,Yt=ft,Jt=Dt-Vt&32767;if(Gt>2&&zt==_t(lt-Jt))for(var Zt=Math.min(pt,Gt)-1,nn=Math.min(32767,lt),cn=Math.min(258,Gt);Jt<=nn&&--Yt&&Dt!=Vt;){if(Xe[lt+jt]==Xe[lt+jt-Jt]){for(var an=0;an<cn&&Xe[lt+an]==Xe[lt+an-Jt];++an);if(an>jt){if(jt=an,Ht=Jt,an>Zt)break;for(var mn=Math.min(Jt,an-2),dn=0,Qt=0;Qt<mn;++Qt){var fn=lt-Jt+Qt+32768&32767,Sn=vt[fn],Tn=fn-Sn+32768&32767;Tn>dn&&(dn=Tn,Vt=fn)}}}Dt=Vt,Vt=vt[Dt],Jt+=Dt-Vt+32768&32767}if(Ht){Ct[Pt++]=268435456|revfl$1[jt]<<18|revfd[Ht];var Nn=revfl$1[jt]&31,gn=revfd[Ht]&31;Nt+=fleb$1[Nn]+fdeb$1[gn],++Tt[257+Nn],++St[gn],Bt=lt+jt,++Rt}else Ct[Pt++]=Xe[lt],++Tt[Xe[lt]]}}at=wblk(Xe,ot,st,Ct,Tt,St,Nt,Pt,Lt,lt-Lt,at)}return slc$1(it,0,Je+shft$1(at)+tt)},crct=(function(){for(var Xe=new u32$1(256),Ke=0;Ke<256;++Ke){for(var Ye=Ke,Je=9;--Je;)Ye=(Ye&1&&3988292384)^Ye>>>1;Xe[Ke]=Ye}return Xe})(),crc=function(){var Xe=-1;return{p:function(Ke){for(var Ye=Xe,Je=0;Je<Ke.length;++Je)Ye=crct[Ye&255^Ke[Je]]^Ye>>>8;Xe=Ye},d:function(){return~Xe}}},dopt=function(Xe,Ke,Ye,Je,tt){return dflt(Xe,Ke.level==null?6:Ke.level,Ke.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(Xe.length)))*1.5):12+Ke.mem,Ye,Je,!0)},mrg=function(Xe,Ke){var Ye={};for(var Je in Xe)Ye[Je]=Xe[Je];for(var Je in Ke)Ye[Je]=Ke[Je];return Ye},wbytes=function(Xe,Ke,Ye){for(;Ye;++Ke)Xe[Ke]=Ye,Ye>>>=8};function deflateSync(Xe,Ke){return dopt(Xe,Ke||{},0,0)}var fltn=function(Xe,Ke,Ye,Je){for(var tt in Xe){var st=Xe[tt],rt=Ke+tt;st instanceof u8$1?Ye[rt]=[st,Je]:Array.isArray(st)?Ye[rt]=[st[0],mrg(Je,st[1])]:fltn(st,rt+"/",Ye,Je)}},te=typeof TextEncoder<"u"&&new TextEncoder,td$1=typeof TextDecoder<"u"&&new TextDecoder,tds$1=0;try{td$1.decode(et$1,{stream:!0}),tds$1=1}catch{}function strToU8(Xe,Ke){var Ye;if(te)return te.encode(Xe);for(var Je=Xe.length,tt=new u8$1(Xe.length+(Xe.length>>1)),st=0,rt=function(at){tt[st++]=at},Ye=0;Ye<Je;++Ye){if(st+5>tt.length){var it=new u8$1(st+8+(Je-Ye<<1));it.set(tt),tt=it}var ot=Xe.charCodeAt(Ye);ot<128||Ke?rt(ot):ot<2048?(rt(192|ot>>6),rt(128|ot&63)):ot>55295&&ot<57344?(ot=65536+(ot&1047552)|Xe.charCodeAt(++Ye)&1023,rt(240|ot>>18),rt(128|ot>>12&63),rt(128|ot>>6&63),rt(128|ot&63)):(rt(224|ot>>12),rt(128|ot>>6&63),rt(128|ot&63))}return slc$1(tt,0,st)}var exfl=function(Xe){var Ke=0;if(Xe)for(var Ye in Xe){var Je=Xe[Ye].length;if(Je>65535)throw"extra field too long";Ke+=Je+4}return Ke},wzh=function(Xe,Ke,Ye,Je,tt,st,rt,it){var ot=Je.length,at=Ye.extra,lt=it&&it.length,ut=exfl(at);wbytes(Xe,Ke,rt!=null?33639248:67324752),Ke+=4,rt!=null&&(Xe[Ke++]=20,Xe[Ke++]=Ye.os),Xe[Ke]=20,Ke+=2,Xe[Ke++]=Ye.flag<<1|(st==null&&8),Xe[Ke++]=tt&&8,Xe[Ke++]=Ye.compression&255,Xe[Ke++]=Ye.compression>>8;var ht=new Date(Ye.mtime==null?Date.now():Ye.mtime),pt=ht.getFullYear()-1980;if(pt<0||pt>119)throw"date not in range 1980-2099";if(wbytes(Xe,Ke,pt<<25|ht.getMonth()+1<<21|ht.getDate()<<16|ht.getHours()<<11|ht.getMinutes()<<5|ht.getSeconds()>>>1),Ke+=4,st!=null&&(wbytes(Xe,Ke,Ye.crc),wbytes(Xe,Ke+4,st),wbytes(Xe,Ke+8,Ye.size)),wbytes(Xe,Ke+12,ot),wbytes(Xe,Ke+14,ut),Ke+=16,rt!=null&&(wbytes(Xe,Ke,lt),wbytes(Xe,Ke+6,Ye.attrs),wbytes(Xe,Ke+10,rt),Ke+=14),Xe.set(Je,Ke),Ke+=ot,ut)for(var ft in at){var xt=at[ft],vt=xt.length;wbytes(Xe,Ke,+ft),wbytes(Xe,Ke+2,vt),Xe.set(xt,Ke+4),Ke+=4+vt}return lt&&(Xe.set(it,Ke),Ke+=lt),Ke},wzf=function(Xe,Ke,Ye,Je,tt){wbytes(Xe,Ke,101010256),wbytes(Xe,Ke+8,Ye),wbytes(Xe,Ke+10,Ye),wbytes(Xe,Ke+12,Je),wbytes(Xe,Ke+16,tt)};function zipSync(Xe,Ke){Ke||(Ke={});var Ye={},Je=[];fltn(Xe,"",Ye,Ke);var tt=0,st=0;for(var rt in Ye){var it=Ye[rt],ot=it[0],at=it[1],lt=at.level==0?0:8,ut=strToU8(rt),ht=ut.length,pt=at.comment,ft=pt&&strToU8(pt),xt=ft&&ft.length,vt=exfl(at.extra);if(ht>65535)throw"filename too long";var At=lt?deflateSync(ot,at):ot,Et=At.length,wt=crc();wt.p(ot),Je.push(mrg(at,{size:ot.length,crc:wt.d(),c:At,f:ut,m:ft,u:ht!=rt.length||ft&&pt.length!=xt,o:tt,compression:lt})),tt+=30+ht+vt+Et,st+=76+2*(ht+vt)+(xt||0)+Et}for(var _t=new u8$1(st+22),Ct=tt,Tt=st-tt,St=0;St<Je.length;++St){var ut=Je[St];wzh(_t,ut.o,ut,ut.f,ut.u,ut.c.length);var Rt=30+ut.f.length+exfl(ut.extra);_t.set(ut.c,ut.o+Rt),wzh(_t,tt,ut,ut.f,ut.u,ut.c.length,ut.o,ut.m),tt+=16+Rt+(ut.m?ut.m.length:0)}return wzf(_t,tt,Je.length,Tt,Ct),_t}class USDZExporter{async parse(Ke,Ye={}){Ye=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}}},Ye);const Je={},tt="model.usda";Je[tt]=null;let st=buildHeader();st+=buildSceneStart(Ye);const rt={},it={};Ke.traverseVisible(at=>{if(at.isMesh){const lt=at.geometry,ut=at.material;if(ut.isMeshStandardMaterial){const ht="geometries/Geometry_"+lt.id+".usd";if(!(ht in Je)){const pt=buildMeshObject(lt);Je[ht]=buildUSDFileAsString(pt)}ut.uuid in rt||(rt[ut.uuid]=ut),st+=buildXform(at,lt,ut)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",at)}else at.isCamera&&(st+=buildCamera(at))}),st+=buildSceneEnd(),st+=buildMaterials(rt,it),Je[tt]=strToU8(st),st=null;for(const at in it){const lt=it[at],ut=at.split("_")[1],ht=lt.format===1023,pt=imageToCanvas(lt.image,ut),ft=await new Promise(xt=>pt.toBlob(xt,ht?"image/png":"image/jpeg",1));Je[`textures/Texture_${at}.${ht?"png":"jpg"}`]=new Uint8Array(await ft.arrayBuffer())}let ot=0;for(const at in Je){const lt=Je[at],ut=34+at.length;ot+=ut;const ht=ot&63;if(ht!==4){const pt=64-ht,ft=new Uint8Array(pt);Je[at]=[lt,{extra:{12345:ft}}]}ot=lt.length}return zipSync(Je,{level:0})}}function imageToCanvas(Xe,Ke){if(typeof HTMLImageElement<"u"&&Xe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Xe instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&Xe instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&Xe instanceof ImageBitmap){const Ye=1024/Math.max(Xe.width,Xe.height),Je=document.createElement("canvas");Je.width=Xe.width*Math.min(1,Ye),Je.height=Xe.height*Math.min(1,Ye);const tt=Je.getContext("2d");if(tt.drawImage(Xe,0,0,Je.width,Je.height),Ke!==void 0){const st=parseInt(Ke,16),rt=(st>>16&255)/255,it=(st>>8&255)/255,ot=(st&255)/255,at=tt.getImageData(0,0,Je.width,Je.height),lt=at.data;for(let ut=0;ut<lt.length;ut+=4)lt[ut+0]=lt[ut+0]*rt,lt[ut+1]=lt[ut+1]*it,lt[ut+2]=lt[ut+2]*ot;tt.putImageData(at,0,0)}return Je}else throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}const PRECISION=7;function buildHeader(){return`#usda 1.0
(
    customLayerData = {
        string creator = "Three.js USDZExporter"
    }
    metersPerUnit = 1
    upAxis = "Y"
)

`}function buildSceneStart(Xe){return`def Xform "Root"
{
    def Scope "Scenes" (
        kind = "sceneLibrary"
    )
    {
        def Xform "Scene" (
            customData = {
                bool preliminary_collidesWithEnvironment = 0
                string sceneName = "Scene"
            }
            sceneName = "Scene"
        )
        {
        token preliminary:anchoring:type = "${Xe.ar.anchoring.type}"
        token preliminary:planeAnchoring:alignment = "${Xe.ar.planeAnchoring.alignment}"

`}function buildSceneEnd(){return`
        }
    }
}

`}function buildUSDFileAsString(Xe){let Ke=buildHeader();return Ke+=Xe,strToU8(Ke)}function buildXform(Xe,Ke,Ye){const Je="Object_"+Xe.id,tt=buildMatrix(Xe.matrixWorld);return Xe.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",Xe),`def Xform "${Je}" (
    prepend references = @./geometries/Geometry_${Ke.id}.usd@</Geometry>
)
{
    matrix4d xformOp:transform = ${tt}
    uniform token[] xformOpOrder = ["xformOp:transform"]

    rel material:binding = </Materials/Material_${Ye.id}>
}

`}function buildMatrix(Xe){const Ke=Xe.elements;return`( ${buildMatrixRow(Ke,0)}, ${buildMatrixRow(Ke,4)}, ${buildMatrixRow(Ke,8)}, ${buildMatrixRow(Ke,12)} )`}function buildMatrixRow(Xe,Ke){return`(${Xe[Ke+0]}, ${Xe[Ke+1]}, ${Xe[Ke+2]}, ${Xe[Ke+3]})`}function buildMeshObject(Xe){return`
def "Geometry"
{
  ${buildMesh(Xe)}
}
`}function buildMesh(Xe){const Ke="Geometry",Ye=Xe.attributes,Je=Ye.position.count;return`
    def Mesh "${Ke}"
    {
        int[] faceVertexCounts = [${buildMeshVertexCount(Xe)}]
        int[] faceVertexIndices = [${buildMeshVertexIndices(Xe)}]
        normal3f[] normals = [${buildVector3Array(Ye.normal,Je)}] (
            interpolation = "vertex"
        )
        point3f[] points = [${buildVector3Array(Ye.position,Je)}]
        float2[] primvars:st = [${buildVector2Array(Ye.uv,Je)}] (
            interpolation = "vertex"
        )
        uniform token subdivisionScheme = "none"
    }
`}function buildMeshVertexCount(Xe){const Ke=Xe.index!==null?Xe.index.count:Xe.attributes.position.count;return Array(Ke/3).fill(3).join(", ")}function buildMeshVertexIndices(Xe){const Ke=Xe.index,Ye=[];if(Ke!==null)for(let Je=0;Je<Ke.count;Je++)Ye.push(Ke.getX(Je));else{const Je=Xe.attributes.position.count;for(let tt=0;tt<Je;tt++)Ye.push(tt)}return Ye.join(", ")}function buildVector3Array(Xe,Ke){if(Xe===void 0)return console.warn("USDZExporter: Normals missing."),Array(Ke).fill("(0, 0, 0)").join(", ");const Ye=[];for(let Je=0;Je<Xe.count;Je++){const tt=Xe.getX(Je),st=Xe.getY(Je),rt=Xe.getZ(Je);Ye.push(`(${tt.toPrecision(PRECISION)}, ${st.toPrecision(PRECISION)}, ${rt.toPrecision(PRECISION)})`)}return Ye.join(", ")}function buildVector2Array(Xe,Ke){if(Xe===void 0)return console.warn("USDZExporter: UVs missing."),Array(Ke).fill("(0, 0)").join(", ");const Ye=[];for(let Je=0;Je<Xe.count;Je++){const tt=Xe.getX(Je),st=Xe.getY(Je);Ye.push(`(${tt.toPrecision(PRECISION)}, ${1-st.toPrecision(PRECISION)})`)}return Ye.join(", ")}function buildMaterials(Xe,Ke){const Ye=[];for(const Je in Xe){const tt=Xe[Je];Ye.push(buildMaterial(tt,Ke))}return`def "Materials"
{
${Ye.join("")}
}

`}function buildMaterial(Xe,Ke){const Ye="            ",Je=[],tt=[];function st(rt,it,ot){const at=rt.id+(ot?"_"+ot.getHexString():""),lt=rt.format===1023;return Ke[at]=rt,`
        def Shader "Transform2d_${it}" (
            sdrMetadata = {
                string role = "math"
            }
        )
        {
            uniform token info:id = "UsdTransform2d"
            float2 inputs:in.connect = </Materials/Material_${Xe.id}/uvReader_st.outputs:result>
            float2 inputs:scale = ${buildVector2(rt.repeat)}
            float2 inputs:translation = ${buildVector2(rt.offset)}
            float2 outputs:result
        }

        def Shader "Texture_${rt.id}_${it}"
        {
            uniform token info:id = "UsdUVTexture"
            asset inputs:file = @textures/Texture_${at}.${lt?"png":"jpg"}@
            float2 inputs:st.connect = </Materials/Material_${Xe.id}/Transform2d_${it}.outputs:result>
            token inputs:wrapS = "repeat"
            token inputs:wrapT = "repeat"
            float outputs:r
            float outputs:g
            float outputs:b
            float3 outputs:rgb
            ${Xe.transparent||Xe.alphaTest>0?"float outputs:a":""}
        }`}return Xe.side===DoubleSide&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",Xe),Xe.map!==null?(Je.push(`${Ye}color3f inputs:diffuseColor.connect = </Materials/Material_${Xe.id}/Texture_${Xe.map.id}_diffuse.outputs:rgb>`),Xe.transparent?Je.push(`${Ye}float inputs:opacity.connect = </Materials/Material_${Xe.id}/Texture_${Xe.map.id}_diffuse.outputs:a>`):Xe.alphaTest>0&&(Je.push(`${Ye}float inputs:opacity.connect = </Materials/Material_${Xe.id}/Texture_${Xe.map.id}_diffuse.outputs:a>`),Je.push(`${Ye}float inputs:opacityThreshold = ${Xe.alphaTest}`)),tt.push(st(Xe.map,"diffuse",Xe.color))):Je.push(`${Ye}color3f inputs:diffuseColor = ${buildColor(Xe.color)}`),Xe.emissiveMap!==null?(Je.push(`${Ye}color3f inputs:emissiveColor.connect = </Materials/Material_${Xe.id}/Texture_${Xe.emissiveMap.id}_emissive.outputs:rgb>`),tt.push(st(Xe.emissiveMap,"emissive"))):Xe.emissive.getHex()>0&&Je.push(`${Ye}color3f inputs:emissiveColor = ${buildColor(Xe.emissive)}`),Xe.normalMap!==null&&(Je.push(`${Ye}normal3f inputs:normal.connect = </Materials/Material_${Xe.id}/Texture_${Xe.normalMap.id}_normal.outputs:rgb>`),tt.push(st(Xe.normalMap,"normal"))),Xe.aoMap!==null&&(Je.push(`${Ye}float inputs:occlusion.connect = </Materials/Material_${Xe.id}/Texture_${Xe.aoMap.id}_occlusion.outputs:r>`),tt.push(st(Xe.aoMap,"occlusion"))),Xe.roughnessMap!==null&&Xe.roughness===1?(Je.push(`${Ye}float inputs:roughness.connect = </Materials/Material_${Xe.id}/Texture_${Xe.roughnessMap.id}_roughness.outputs:g>`),tt.push(st(Xe.roughnessMap,"roughness"))):Je.push(`${Ye}float inputs:roughness = ${Xe.roughness}`),Xe.metalnessMap!==null&&Xe.metalness===1?(Je.push(`${Ye}float inputs:metallic.connect = </Materials/Material_${Xe.id}/Texture_${Xe.metalnessMap.id}_metallic.outputs:b>`),tt.push(st(Xe.metalnessMap,"metallic"))):Je.push(`${Ye}float inputs:metallic = ${Xe.metalness}`),Xe.alphaMap!==null?(Je.push(`${Ye}float inputs:opacity.connect = </Materials/Material_${Xe.id}/Texture_${Xe.alphaMap.id}_opacity.outputs:r>`),Je.push(`${Ye}float inputs:opacityThreshold = 0.0001`),tt.push(st(Xe.alphaMap,"opacity"))):Je.push(`${Ye}float inputs:opacity = ${Xe.opacity}`),Xe.isMeshPhysicalMaterial&&(Je.push(`${Ye}float inputs:clearcoat = ${Xe.clearcoat}`),Je.push(`${Ye}float inputs:clearcoatRoughness = ${Xe.clearcoatRoughness}`),Je.push(`${Ye}float inputs:ior = ${Xe.ior}`)),`
    def Material "Material_${Xe.id}"
    {
        def Shader "PreviewSurface"
        {
            uniform token info:id = "UsdPreviewSurface"
${Je.join(`
`)}
            int inputs:useSpecularWorkflow = 0
            token outputs:surface
        }

        token outputs:surface.connect = </Materials/Material_${Xe.id}/PreviewSurface.outputs:surface>
        token inputs:frame:stPrimvarName = "st"

        def Shader "uvReader_st"
        {
            uniform token info:id = "UsdPrimvarReader_float2"
            token inputs:varname.connect = </Materials/Material_${Xe.id}.inputs:frame:stPrimvarName>
            float2 inputs:fallback = (0.0, 0.0)
            float2 outputs:result
        }

${tt.join(`
`)}

    }
`}function buildColor(Xe){return`(${Xe.r}, ${Xe.g}, ${Xe.b})`}function buildVector2(Xe){return`(${Xe.x}, ${Xe.y})`}function buildCamera(Xe){const Ke=Xe.name?Xe.name:"Camera_"+Xe.id,Ye=buildMatrix(Xe.matrixWorld);return Xe.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",Xe),Xe.isOrthographicCamera?`def Camera "${Ke}"
		{
			matrix4d xformOp:transform = ${Ye}
			uniform token[] xformOpOrder = ["xformOp:transform"]
	
			float2 clippingRange = (${Xe.near.toPrecision(PRECISION)}, ${Xe.far.toPrecision(PRECISION)})
			float horizontalAperture = ${((Math.abs(Xe.left)+Math.abs(Xe.right))*10).toPrecision(PRECISION)}
			float verticalAperture = ${((Math.abs(Xe.top)+Math.abs(Xe.bottom))*10).toPrecision(PRECISION)}
			token projection = "orthographic"
		}
	
	`:`def Camera "${Ke}"
		{
			matrix4d xformOp:transform = ${Ye}
			uniform token[] xformOpOrder = ["xformOp:transform"]
	
			float2 clippingRange = (${Xe.near.toPrecision(PRECISION)}, ${Xe.far.toPrecision(PRECISION)})
			float focalLength = ${Xe.getFocalLength().toPrecision(PRECISION)}
			float focusDistance = ${Xe.focus.toPrecision(PRECISION)}
			float horizontalAperture = ${Xe.getFilmWidth().toPrecision(PRECISION)}
			token projection = "perspective"
			float verticalAperture = ${Xe.getFilmHeight().toPrecision(PRECISION)}
		}
	
	`}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const enumerationDeserializer=Xe=>Ke=>{try{const Ye=parseExpressions(Ke),Je=(Ye.length?Ye[0].terms:[]).filter(st=>st&&st.type==="ident").map(st=>st.value).filter(st=>Xe.indexOf(st)>-1),tt=new Set;for(const st of Je)tt.add(st);return tt}catch{}return new Set};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$2=function(Xe,Ke,Ye,Je){var tt=arguments.length,st=tt<3?Ke:Je===null?Je=Object.getOwnPropertyDescriptor(Ke,Ye):Je,rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")st=Reflect.decorate(Xe,Ke,Ye,Je);else for(var it=Xe.length-1;it>=0;it--)(rt=Xe[it])&&(st=(tt<3?rt(st):tt>3?rt(Ke,Ye,st):rt(Ke,Ye))||st);return tt>3&&st&&Object.defineProperty(Ke,Ye,st),st};let isWebXRBlocked=!1,isSceneViewerBlocked=!1;const noArViewerSigil="#model-viewer-no-ar-fallback",deserializeARModes=enumerationDeserializer(["quick-look","scene-viewer","webxr","none"]),DEFAULT_AR_MODES="webxr scene-viewer quick-look",ARMode={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},$arButtonContainer=Symbol("arButtonContainer"),$enterARWithWebXR=Symbol("enterARWithWebXR"),$openSceneViewer=Symbol("openSceneViewer"),$openIOSARQuickLook=Symbol("openIOSARQuickLook"),$canActivateAR=Symbol("canActivateAR"),$arMode=Symbol("arMode"),$arModes=Symbol("arModes"),$arAnchor=Symbol("arAnchor"),$preload=Symbol("preload"),$onARButtonContainerClick=Symbol("onARButtonContainerClick"),$onARStatus=Symbol("onARStatus"),$onARTracking=Symbol("onARTracking"),$onARTap=Symbol("onARTap"),$selectARMode=Symbol("selectARMode"),$triggerLoad=Symbol("triggerLoad"),ARMixin=Xe=>{var Ke,Ye,Je,tt,st,rt,it,ot,at,lt;class ut extends Xe{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes=DEFAULT_AR_MODES,this.iosSrc=null,this.xrEnvironment=!1,this[Ke]=!1,this[Ye]=this.shadowRoot.querySelector(".ar-button"),this[Je]=document.createElement("a"),this[tt]=new Set,this[st]=ARMode.NONE,this[rt]=!1,this[it]=pt=>{pt.preventDefault(),this.activateAR()},this[ot]=({status:pt})=>{(pt===ARStatus.NOT_PRESENTING||this[$renderer].arRenderer.presentedScene===this[$scene])&&(this.setAttribute("ar-status",pt),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:pt}})),pt===ARStatus.NOT_PRESENTING?this.removeAttribute("ar-tracking"):pt===ARStatus.SESSION_STARTED&&this.setAttribute("ar-tracking",ARTracking.TRACKING))},this[at]=({status:pt})=>{this.setAttribute("ar-tracking",pt),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:pt}}))},this[lt]=pt=>{pt.data=="_apple_ar_quicklook_button_tapped"&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[$arMode]!==ARMode.NONE}connectedCallback(){super.connectedCallback(),this[$renderer].arRenderer.addEventListener("status",this[$onARStatus]),this.setAttribute("ar-status",ARStatus.NOT_PRESENTING),this[$renderer].arRenderer.addEventListener("tracking",this[$onARTracking]),this[$arAnchor].addEventListener("message",this[$onARTap])}disconnectedCallback(){super.disconnectedCallback(),this[$renderer].arRenderer.removeEventListener("status",this[$onARStatus]),this[$renderer].arRenderer.removeEventListener("tracking",this[$onARTracking]),this[$arAnchor].removeEventListener("message",this[$onARTap])}update(pt){super.update(pt),pt.has("arScale")&&(this[$scene].canScale=this.arScale!=="fixed"),pt.has("arPlacement")&&(this[$scene].updateShadow(),this[$needsRender]()),pt.has("arModes")&&(this[$arModes]=deserializeARModes(this.arModes)),(pt.has("ar")||pt.has("arModes")||pt.has("src")||pt.has("iosSrc"))&&this[$selectARMode]()}async activateAR(){switch(this[$arMode]){case ARMode.QUICK_LOOK:this[$openIOSARQuickLook]();break;case ARMode.WEBXR:await this[$enterARWithWebXR]();break;case ARMode.SCENE_VIEWER:this[$openSceneViewer]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");break}}async[(Ke=$canActivateAR,Ye=$arButtonContainer,Je=$arAnchor,tt=$arModes,st=$arMode,rt=$preload,it=$onARButtonContainerClick,ot=$onARStatus,at=$onARTracking,lt=$onARTap,$selectARMode)](){let pt=ARMode.NONE;if(this.ar){if(this.src!=null)for(const ft of this[$arModes]){if(ft==="webxr"&&IS_WEBXR_AR_CANDIDATE&&!isWebXRBlocked&&await this[$renderer].arRenderer.supportsPresentation()){pt=ARMode.WEBXR;break}if(ft==="scene-viewer"&&IS_SCENEVIEWER_CANDIDATE&&!isSceneViewerBlocked){pt=ARMode.SCENE_VIEWER;break}if(ft==="quick-look"&&IS_AR_QUICKLOOK_CANDIDATE){pt=ARMode.QUICK_LOOK;break}}pt===ARMode.NONE&&this.iosSrc!=null&&IS_AR_QUICKLOOK_CANDIDATE&&(pt=ARMode.QUICK_LOOK)}if(pt!==ARMode.NONE)this[$arButtonContainer].classList.add("enabled"),this[$arButtonContainer].addEventListener("click",this[$onARButtonContainerClick]);else if(this[$arButtonContainer].classList.contains("enabled")){this[$arButtonContainer].removeEventListener("click",this[$onARButtonContainerClick]),this[$arButtonContainer].classList.remove("enabled");const ft=ARStatus.FAILED;this.setAttribute("ar-status",ft),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:ft}}))}this[$arMode]=pt}async[$enterARWithWebXR](){console.log("Attempting to present in AR with WebXR..."),await this[$triggerLoad]();try{this[$arButtonContainer].removeEventListener("click",this[$onARButtonContainerClick]);const{arRenderer:pt}=this[$renderer];pt.placeOnWall=this.arPlacement==="wall",await pt.present(this[$scene],this.xrEnvironment)}catch(pt){console.warn("Error while trying to present in AR with WebXR"),console.error(pt),await this[$renderer].arRenderer.stopPresenting(),isWebXRBlocked=!0,console.warn("Falling back to next ar-mode"),await this[$selectARMode](),this.activateAR()}finally{this[$selectARMode]()}}async[$triggerLoad](){this.loaded||(this[$preload]=!0,this[$updateSource](),await waitForEvent(this,"load"),this[$preload]=!1)}[$shouldAttemptPreload](){return super[$shouldAttemptPreload]()||this[$preload]}[$openSceneViewer](){const pt=self.location.toString(),ft=new URL(pt),xt=new URL(this.src,pt);xt.hash&&(xt.hash="");const vt=new URLSearchParams(xt.search);if(ft.hash=noArViewerSigil,vt.set("mode","ar_preferred"),vt.has("disable_occlusion")||vt.set("disable_occlusion","true"),this.arScale==="fixed"&&vt.set("resizable","false"),this.arPlacement==="wall"&&vt.set("enable_vertical_placement","true"),vt.has("sound")){const wt=new URL(vt.get("sound"),pt);vt.set("sound",wt.toString())}if(vt.has("link")){const wt=new URL(vt.get("link"),pt);vt.set("link",wt.toString())}const At=`intent://arvr.google.com/scene-viewer/1.0?${vt.toString()+"&file="+encodeURIComponent(xt.toString())}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(ft.toString())};end;`,Et=()=>{self.location.hash===noArViewerSigil&&(isSceneViewerBlocked=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[$selectARMode]())};self.addEventListener("hashchange",Et,{once:!0}),this[$arAnchor].setAttribute("href",At),console.log("Attempting to present in AR with Scene Viewer..."),this[$arAnchor].click()}async[$openIOSARQuickLook](){const pt=!this.iosSrc;this[$arButtonContainer].classList.remove("enabled");const ft=pt?await this.prepareUSDZ():this.iosSrc,xt=new URL(ft,self.location.toString());if(pt){const Et=self.location.toString(),wt=new URL(Et),_t=new URL(this.src,wt);_t.hash&&(xt.hash=_t.hash)}this.arScale==="fixed"&&(xt.hash&&(xt.hash+="&"),xt.hash+="allowsContentScaling=0");const vt=this[$arAnchor];vt.setAttribute("rel","ar");const At=document.createElement("img");vt.appendChild(At),vt.setAttribute("href",xt.toString()),pt&&vt.setAttribute("download","model.usdz"),vt.style.display="none",vt.isConnected||this.shadowRoot.appendChild(vt),console.log("Attempting to present in AR with Quick Look..."),vt.click(),vt.removeChild(At),pt&&URL.revokeObjectURL(ft),this[$arButtonContainer].classList.add("enabled")}async prepareUSDZ(){const pt=this[$progressTracker].beginActivity();await this[$triggerLoad]();const{model:ft,shadow:xt}=this[$scene];if(ft==null)return"";let vt=!1;xt!=null&&(vt=xt.visible,xt.visible=!1),pt(.2);const Et=await new USDZExporter().parse(ft),wt=new Blob([Et],{type:"model/vnd.usdz+zip"}),_t=URL.createObjectURL(wt);return pt(1),xt!=null&&(xt.visible=vt),_t}}return __decorate$2([e$4({type:Boolean,attribute:"ar"})],ut.prototype,"ar",void 0),__decorate$2([e$4({type:String,attribute:"ar-scale"})],ut.prototype,"arScale",void 0),__decorate$2([e$4({type:String,attribute:"ar-placement"})],ut.prototype,"arPlacement",void 0),__decorate$2([e$4({type:String,attribute:"ar-modes"})],ut.prototype,"arModes",void 0),__decorate$2([e$4({type:String,attribute:"ios-src"})],ut.prototype,"iosSrc",void 0),__decorate$2([e$4({type:Boolean,attribute:"xr-environment"})],ut.prototype,"xrEnvironment",void 0),ut};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$1=function(Xe,Ke,Ye,Je){var tt=arguments.length,st=tt<3?Ke:Je,rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")st=Reflect.decorate(Xe,Ke,Ye,Je);else for(var it=Xe.length-1;it>=0;it--)(rt=Xe[it])&&(st=(tt<3?rt(st):tt>3?rt(Ke,Ye,st):rt(Ke,Ye))||st);return tt>3&&st&&Object.defineProperty(Ke,Ye,st),st};const PROGRESS_BAR_UPDATE_THRESHOLD=100,DEFAULT_DRACO_DECODER_LOCATION="https://www.gstatic.com/draco/versioned/decoders/1.5.6/",DEFAULT_KTX2_TRANSCODER_LOCATION="https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/",DEFAULT_LOTTIE_LOADER_LOCATION="https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js",RevealStrategy={AUTO:"auto"},LoadingStrategy={AUTO:"auto",EAGER:"eager"},$defaultProgressBarElement=Symbol("defaultProgressBarElement"),$posterContainerElement=Symbol("posterContainerElement"),$defaultPosterElement=Symbol("defaultPosterElement"),$shouldDismissPoster=Symbol("shouldDismissPoster"),$hidePoster=Symbol("hidePoster"),$modelIsRevealed=Symbol("modelIsRevealed"),$updateProgressBar=Symbol("updateProgressBar"),$ariaLabelCallToAction=Symbol("ariaLabelCallToAction"),$onProgress=Symbol("onProgress"),LoadingMixin=Xe=>{var Ke,Ye,Je,tt,st,rt,it,ot;class at extends Xe{constructor(...ut){super(...ut),this.poster=null,this.reveal=RevealStrategy.AUTO,this.loading=LoadingStrategy.AUTO,this[Ke]=!1,this[Ye]=!1,this[Je]=this.shadowRoot.querySelector(".slot.poster"),this[tt]=this.shadowRoot.querySelector("#default-poster"),this[st]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[rt]=this[$defaultPosterElement].getAttribute("aria-label"),this[it]=throttle(vt=>{const At=this[$defaultProgressBarElement].parentNode;requestAnimationFrame(()=>{this[$defaultProgressBarElement].style.transform=`scaleX(${vt})`,vt===0&&(At.removeChild(this[$defaultProgressBarElement]),At.appendChild(this[$defaultProgressBarElement])),vt===1?this[$defaultProgressBarElement].classList.add("hide"):this[$defaultProgressBarElement].classList.remove("hide")})},PROGRESS_BAR_UPDATE_THRESHOLD),this[ot]=vt=>{const At=vt.detail.totalProgress;At===1&&(this[$updateProgressBar].flush(),this.loaded&&(this[$shouldDismissPoster]||this.reveal===RevealStrategy.AUTO)&&this[$hidePoster]()),this[$updateProgressBar](At),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:At}}))};const ht=self.ModelViewerElement||{},pt=ht.dracoDecoderLocation||DEFAULT_DRACO_DECODER_LOCATION;CachingGLTFLoader.setDRACODecoderLocation(pt);const ft=ht.ktx2TranscoderLocation||DEFAULT_KTX2_TRANSCODER_LOCATION;CachingGLTFLoader.setKTX2TranscoderLocation(ft),ht.meshoptDecoderLocation&&CachingGLTFLoader.setMeshoptDecoderLocation(ht.meshoptDecoderLocation);const xt=ht.lottieLoaderLocation||DEFAULT_LOTTIE_LOADER_LOCATION;Renderer.singleton.textureUtils.lottieLoaderUrl=xt}static set dracoDecoderLocation(ut){CachingGLTFLoader.setDRACODecoderLocation(ut)}static get dracoDecoderLocation(){return CachingGLTFLoader.getDRACODecoderLocation()}static set ktx2TranscoderLocation(ut){CachingGLTFLoader.setKTX2TranscoderLocation(ut)}static get ktx2TranscoderLocation(){return CachingGLTFLoader.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(ut){CachingGLTFLoader.setMeshoptDecoderLocation(ut)}static get meshoptDecoderLocation(){return CachingGLTFLoader.getMeshoptDecoderLocation()}static set lottieLoaderLocation(ut){Renderer.singleton.textureUtils.lottieLoaderUrl=ut}static get lottieLoaderLocation(){return Renderer.singleton.textureUtils.lottieLoaderUrl}static mapURLs(ut){Renderer.singleton.loader[$loader].manager.setURLModifier(ut)}dismissPoster(){this.loaded?this[$hidePoster]():(this[$shouldDismissPoster]=!0,this[$updateSource]())}showPoster(){const ut=this[$posterContainerElement];if(ut.classList.contains("show"))return;ut.classList.add("show"),this[$userInputElement].classList.remove("show");const ht=this[$defaultPosterElement];ht.removeAttribute("tabindex"),ht.removeAttribute("aria-hidden");const pt=this.modelIsVisible;this[$modelIsRevealed]=!1,this[$announceModelVisibility](pt)}getDimensions(){return toVector3D(this[$scene].size)}getBoundingBoxCenter(){return toVector3D(this[$scene].boundingBox.getCenter(new Vector3))}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[$progressTracker].addEventListener("progress",this[$onProgress])}disconnectedCallback(){super.disconnectedCallback(),this[$progressTracker].removeEventListener("progress",this[$onProgress])}async updated(ut){super.updated(ut),ut.has("poster")&&this.poster!=null&&(this[$defaultPosterElement].style.backgroundImage=`url(${this.poster})`),ut.has("alt")&&this[$defaultPosterElement].setAttribute("aria-label",this[$altDefaulted]),(ut.has("reveal")||ut.has("loading"))&&this[$updateSource]()}[(Ke=$modelIsRevealed,Ye=$shouldDismissPoster,Je=$posterContainerElement,tt=$defaultPosterElement,st=$defaultProgressBarElement,rt=$ariaLabelCallToAction,it=$updateProgressBar,ot=$onProgress,$shouldAttemptPreload)](){return!!this.src&&(this[$shouldDismissPoster]||this.loading===LoadingStrategy.EAGER||this.reveal===RevealStrategy.AUTO&&this[$isElementInViewport])}[$hidePoster](){this[$shouldDismissPoster]=!1;const ut=this[$posterContainerElement];if(!ut.classList.contains("show"))return;ut.classList.remove("show"),this[$userInputElement].classList.add("show");const ht=this.modelIsVisible;this[$modelIsRevealed]=!0,this[$announceModelVisibility](ht);const pt=this.getRootNode();pt&&pt.activeElement===this&&this[$userInputElement].focus();const ft=this[$defaultPosterElement];ft.setAttribute("aria-hidden","true"),ft.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[$getModelIsVisible](){return super[$getModelIsVisible]()&&this[$modelIsRevealed]}}return __decorate$1([e$4({type:String})],at.prototype,"poster",void 0),__decorate$1([e$4({type:String})],at.prototype,"reveal",void 0),__decorate$1([e$4({type:String})],at.prototype,"loading",void 0),at};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate=function(Xe,Ke,Ye,Je){var tt=arguments.length,st=tt<3?Ke:Je===null?Je=Object.getOwnPropertyDescriptor(Ke,Ye):Je,rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")st=Reflect.decorate(Xe,Ke,Ye,Je);else for(var it=Xe.length-1;it>=0;it--)(rt=Xe[it])&&(st=(tt<3?rt(st):tt>3?rt(Ke,Ye,st):rt(Ke,Ye))||st);return tt>3&&st&&Object.defineProperty(Ke,Ye,st),st};const DEFAULT_ROTATION_SPEED=Math.PI/32,AUTO_ROTATE_DELAY_DEFAULT=3e3,rotationRateIntrinsics={basis:[degreesToRadians(numberNode(DEFAULT_ROTATION_SPEED,"rad"))],keywords:{auto:[null]}},$autoRotateStartTime=Symbol("autoRotateStartTime"),$radiansPerSecond=Symbol("radiansPerSecond"),$syncRotationRate=Symbol("syncRotationRate"),$onCameraChange=Symbol("onCameraChange"),StagingMixin=Xe=>{var Ke,Ye,Je;class tt extends Xe{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=AUTO_ROTATE_DELAY_DEFAULT,this.rotationPerSecond="auto",this[Ke]=performance.now(),this[Ye]=0,this[Je]=rt=>{this.autoRotate&&rt.detail.source==="user-interaction"&&(this[$autoRotateStartTime]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[$onCameraChange]),this[$autoRotateStartTime]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[$onCameraChange]),this[$autoRotateStartTime]=performance.now()}updated(rt){super.updated(rt),rt.has("autoRotate")&&(this[$autoRotateStartTime]=performance.now())}[(Ke=$autoRotateStartTime,Ye=$radiansPerSecond,$syncRotationRate)](rt){this[$radiansPerSecond]=rt[0]}[$tick](rt,it){if(super[$tick](rt,it),!this.autoRotate||!this[$getModelIsVisible]()||this[$renderer].isPresenting)return;const ot=Math.min(it,rt-this[$autoRotateStartTime]-this.autoRotateDelay);ot>0&&(this[$scene].yaw=this.turntableRotation+this[$radiansPerSecond]*ot*.001)}get turntableRotation(){return this[$scene].yaw}resetTurntableRotation(rt=0){this[$scene].yaw=rt}}return Je=$onCameraChange,__decorate([e$4({type:Boolean,attribute:"auto-rotate"})],tt.prototype,"autoRotate",void 0),__decorate([e$4({type:Number,attribute:"auto-rotate-delay"})],tt.prototype,"autoRotateDelay",void 0),__decorate([style$1({intrinsics:rotationRateIntrinsics,updateHandler:$syncRotationRate}),e$4({type:String,attribute:"rotation-per-second"})],tt.prototype,"rotationPerSecond",void 0),tt},FocusVisiblePolyfillMixin=Xe=>{var Ke;const Ye=st=>{if(st.shadowRoot==null||st.hasAttribute("data-js-focus-visible"))return()=>{};if(self.applyFocusVisiblePolyfill)self.applyFocusVisiblePolyfill(st.shadowRoot);else{const rt=()=>{self.applyFocusVisiblePolyfill(st.shadowRoot)};return self.addEventListener("focus-visible-polyfill-ready",rt,{once:!0}),()=>{self.removeEventListener("focus-visible-polyfill-ready",rt)}}return()=>{}},Je=Symbol("endPolyfillCoordination");class tt extends Xe{constructor(){super(...arguments),this[Ke]=null}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[Je]==null&&(this[Je]=Ye(this))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this[Je]!=null&&(this[Je](),this[Je]=null)}}return Ke=Je,tt};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ModelViewerElement=AnnotationMixin(SceneGraphMixin(StagingMixin(EnvironmentMixin(ControlsMixin(ARMixin(LoadingMixin(AnimationMixin(FocusVisiblePolyfillMixin(ModelViewerElementBase)))))))));customElements.define("model-viewer",ModelViewerElement);const GLBComponent=({artifactUri:Xe,displayUri:Ke,previewUri:Ye,displayView:Je,nft:tt})=>{let st={src:Ye||Xe};return Je&&(st={...st,autoplay:!0,"auto-rotate":!0,"data-js-focus-visible":!0,"interaction-prompt":"none",ar:!0,"ar-modes":"webxr scene-viewer quick-look","camera-controls":!0}),Je?jsxRuntimeExports.jsx("model-viewer",{...st,title:`GLB object ${tt.token_id}`,children:jsxRuntimeExports.jsx("button",{slot:"ar-button",className:styles$U.arButton,children:"AR"})}):jsxRuntimeExports.jsx(ImageComponent,{previewUri:Ye,displayUri:Ke,displayView:!1,nft:tt})},iOS=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,displayviewVideo="_displayviewVideo_1lpzo_221",icon$1="_icon_1lpzo_232",styles$S={displayviewVideo,icon:icon$1},VideoComponent=({artifactUri:Xe,displayUri:Ke,previewUri:Ye,inView:Je,displayView:tt,nft:st,forceVideo:rt})=>{const it=reactExports.useRef();return reactExports.useEffect(()=>{if(!tt)return;const ot=lt=>iOS||lt.readyState>2,at=lt=>lt.currentTime>0&&!lt.paused&&!lt.ended&&lt.readyState>2;if(Je){if(ot(it.current))try{it.current.play()}catch(lt){console.error(lt)}}else if(ot(it.current)&&at(it.current))try{it.current.pause()}catch(lt){console.error(lt)}},[Je,tt]),tt||rt?jsxRuntimeExports.jsx("video",{ref:it,className:styles$S.displayviewVideo,autoPlay:!0,playsInline:!0,muted:!tt,loop:!0,controls:tt,src:Ye||Xe,poster:Ke,title:`video object ${st.token_id}`}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$S.icon,children:jsxRuntimeExports.jsx(VideoIcon,{size:32})}),jsxRuntimeExports.jsx(ImageComponent,{artifactUri:Xe,displayUri:Ke,previewUri:Ye,inView:Je,displayView:tt,nft:st})]})},feed_container$2="_feed_container_1vzb9_216",container$p="_container_1vzb9_217",button$3="_button_1vzb9_232",styles$R={feed_container:feed_container$2,container:container$p,button:button$3},AudioComponent=({artifactUri:Xe,displayUri:Ke,previewUri:Ye,displayView:Je,nft:tt})=>{const st=reactExports.useRef(),[rt,it]=reactExports.useState(!1),ot=()=>{it(!rt)};return reactExports.useEffect(()=>{st.current&&(rt?st.current.play():st.current.pause())},[rt]),Je?jsxRuntimeExports.jsxs("div",{className:styles$R.container,children:[jsxRuntimeExports.jsx("img",{src:Ke,alt:`cover for audio object ${tt.token_id}`}),jsxRuntimeExports.jsx("audio",{playsInline:!0,autoPlay:Je,src:Ye||Xe,controls:!0})]}):jsxRuntimeExports.jsxs("div",{className:styles$R.feed_container,children:[jsxRuntimeExports.jsx(Button,{to:`${PATH.OBJKT}/${tt.token_id}`,children:jsxRuntimeExports.jsx("img",{alt:`cover for audio object ${tt.token_id}`,src:Ke})}),jsxRuntimeExports.jsx(Button,{className:styles$R.button,onClick:ot,children:rt?jsxRuntimeExports.jsx(SvgPause,{fill:"var(--gray-10)",width:64,height:64}):jsxRuntimeExports.jsx(SvgPlay,{fill:"var(--gray-10)",width:64,height:64})}),jsxRuntimeExports.jsx("audio",{ref:st,src:Ye||Xe})]})},vector="_vector_19knq_1",display="_display_19knq_24",container$o="_container_19knq_32",interactive$1="_interactive_19knq_47",styles$Q={vector,display,container:container$o,interactive:interactive$1},VectorComponent=({artifactUri:Xe,previewUri:Ke,displayView:Ye,nft:Je})=>{const tt=useUserStore(at=>at.address),st=classNames$1({[styles$Q.container]:!0,[styles$Q.interactive]:Ye,[styles$Q.display]:Ye});let rt=!1,it=!1;tt&&(rt=tt),Je.token_id&&(it=Je.token_id);const ot=Ke||`${Xe}?creator=${Je.artist_address}&viewer=${rt}&objkt=${it}`;return Ye?jsxRuntimeExports.jsx("div",{className:st,children:jsxRuntimeExports.jsx("iframe",{title:`SVG object ${Je.token_id}`,src:ot,sandbox:"allow-scripts",scrolling:"no"})}):jsxRuntimeExports.jsx("div",{className:`${st} vector-container`,children:jsxRuntimeExports.jsx("iframe",{className:`${styles$Q.vector} vector`,title:`SVG object ${Je.token_id}`,src:ot,sandbox:"allow-scripts",scrolling:"no"})})};var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(Xe,Ke){for(var Ye=new u16(31),Je=0;Je<31;++Je)Ye[Je]=Ke+=1<<Xe[Je-1];for(var tt=new u32(Ye[30]),Je=1;Je<30;++Je)for(var st=Ye[Je];st<Ye[Je+1];++st)tt[st]=st-Ye[Je]<<5|Je;return[Ye,tt]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>>8|(x$1&255)<<8)>>>1}var hMap=(function(Xe,Ke,Ye){for(var Je=Xe.length,tt=0,st=new u16(Ke);tt<Je;++tt)Xe[tt]&&++st[Xe[tt]-1];var rt=new u16(Ke);for(tt=0;tt<Ke;++tt)rt[tt]=rt[tt-1]+st[tt-1]<<1;var it;if(Ye){it=new u16(1<<Ke);var ot=15-Ke;for(tt=0;tt<Je;++tt)if(Xe[tt])for(var at=tt<<4|Xe[tt],lt=Ke-Xe[tt],ut=rt[Xe[tt]-1]++<<lt,ht=ut|(1<<lt)-1;ut<=ht;++ut)it[rev[ut]>>>ot]=at}else for(it=new u16(Je),tt=0;tt<Je;++tt)Xe[tt]&&(it[tt]=rev[rt[Xe[tt]-1]++]>>>15-Xe[tt]);return it}),flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flrm=hMap(flt,9,1),fdrm=hMap(fdt,5,1),max$5=function(Xe){for(var Ke=Xe[0],Ye=1;Ye<Xe.length;++Ye)Xe[Ye]>Ke&&(Ke=Xe[Ye]);return Ke},bits$1=function(Xe,Ke,Ye){var Je=Ke/8|0;return(Xe[Je]|Xe[Je+1]<<8)>>(Ke&7)&Ye},bits16=function(Xe,Ke){var Ye=Ke/8|0;return(Xe[Ye]|Xe[Ye+1]<<8|Xe[Ye+2]<<16)>>(Ke&7)},shft=function(Xe){return(Xe+7)/8|0},slc=function(Xe,Ke,Ye){(Ke==null||Ke<0)&&(Ke=0),(Ye==null||Ye>Xe.length)&&(Ye=Xe.length);var Je=new(Xe.BYTES_PER_ELEMENT==2?u16:Xe.BYTES_PER_ELEMENT==4?u32:u8)(Ye-Ke);return Je.set(Xe.subarray(Ke,Ye)),Je},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(Xe,Ke,Ye){var Je=new Error(Ke||ec[Xe]);if(Je.code=Xe,Error.captureStackTrace&&Error.captureStackTrace(Je,err),!Ye)throw Je;return Je},inflt=function(Xe,Ke,Ye){var Je=Xe.length;if(!Je||Ye&&Ye.f&&!Ye.l)return Ke||new u8(0);var tt=!Ke||Ye,st=!Ye||Ye.i;Ye||(Ye={}),Ke||(Ke=new u8(Je*3));var rt=function(mn){var dn=Ke.length;if(mn>dn){var fn=new u8(Math.max(dn*2,mn));fn.set(Ke),Ke=fn}},it=Ye.f||0,ot=Ye.p||0,at=Ye.b||0,lt=Ye.l,ut=Ye.d,ht=Ye.m,pt=Ye.n,ft=Je*8;do{if(!lt){it=bits$1(Xe,ot,1);var xt=bits$1(Xe,ot+1,3);if(ot+=3,xt)if(xt==1)lt=flrm,ut=fdrm,ht=9,pt=5;else if(xt==2){var wt=bits$1(Xe,ot,31)+257,_t=bits$1(Xe,ot+10,15)+4,Ct=wt+bits$1(Xe,ot+5,31)+1;ot+=14;for(var Tt=new u8(Ct),St=new u8(19),Rt=0;Rt<_t;++Rt)St[clim[Rt]]=bits$1(Xe,ot+Rt*3,7);ot+=_t*3;for(var Nt=max$5(St),Pt=(1<<Nt)-1,Bt=hMap(St,Nt,1),Rt=0;Rt<Ct;){var Lt=Bt[bits$1(Xe,ot,Pt)];ot+=Lt&15;var vt=Lt>>>4;if(vt<16)Tt[Rt++]=vt;else{var zt=0,Dt=0;for(vt==16?(Dt=3+bits$1(Xe,ot,3),ot+=2,zt=Tt[Rt-1]):vt==17?(Dt=3+bits$1(Xe,ot,7),ot+=3):vt==18&&(Dt=11+bits$1(Xe,ot,127),ot+=7);Dt--;)Tt[Rt++]=zt}}var Vt=Tt.subarray(0,wt),Gt=Tt.subarray(wt);ht=max$5(Vt),pt=max$5(Gt),lt=hMap(Vt,ht,1),ut=hMap(Gt,pt,1)}else err(1);else{var vt=shft(ot)+4,At=Xe[vt-4]|Xe[vt-3]<<8,Et=vt+At;if(Et>Je){st&&err(0);break}tt&&rt(at+At),Ke.set(Xe.subarray(vt,Et),at),Ye.b=at+=At,Ye.p=ot=Et*8,Ye.f=it;continue}if(ot>ft){st&&err(0);break}}tt&&rt(at+131072);for(var Qt=(1<<ht)-1,jt=(1<<pt)-1,Ht=ot;;Ht=ot){var zt=lt[bits16(Xe,ot)&Qt],Yt=zt>>>4;if(ot+=zt&15,ot>ft){st&&err(0);break}if(zt||err(2),Yt<256)Ke[at++]=Yt;else if(Yt==256){Ht=ot,lt=null;break}else{var Jt=Yt-254;if(Yt>264){var Rt=Yt-257,Zt=fleb[Rt];Jt=bits$1(Xe,ot,(1<<Zt)-1)+fl[Rt],ot+=Zt}var nn=ut[bits16(Xe,ot)&jt],cn=nn>>>4;nn||err(3),ot+=nn&15;var Gt=fd[cn];if(cn>3){var Zt=fdeb[cn];Gt+=bits16(Xe,ot)&(1<<Zt)-1,ot+=Zt}if(ot>ft){st&&err(0);break}tt&&rt(at+131072);for(var an=at+Jt;at<an;at+=4)Ke[at]=Ke[at-Gt],Ke[at+1]=Ke[at+1-Gt],Ke[at+2]=Ke[at+2-Gt],Ke[at+3]=Ke[at+3-Gt];at=an}}Ye.l=lt,Ye.p=Ht,Ye.b=at,Ye.f=it,lt&&(it=1,Ye.m=ht,Ye.d=ut,Ye.n=pt)}while(!it);return at==Ke.length?Ke:slc(Ke,0,at)},et=new u8(0),b2=function(Xe,Ke){return Xe[Ke]|Xe[Ke+1]<<8},b4=function(Xe,Ke){return(Xe[Ke]|Xe[Ke+1]<<8|Xe[Ke+2]<<16|Xe[Ke+3]<<24)>>>0},b8=function(Xe,Ke){return b4(Xe,Ke)+b4(Xe,Ke+4)*4294967296};function inflateSync(Xe,Ke){return inflt(Xe,Ke)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch{}var dutf8=function(Xe){for(var Ke="",Ye=0;;){var Je=Xe[Ye++],tt=(Je>127)+(Je>223)+(Je>239);if(Ye+tt>Xe.length)return[Ke,slc(Xe,Ye-1)];tt?tt==3?(Je=((Je&15)<<18|(Xe[Ye++]&63)<<12|(Xe[Ye++]&63)<<6|Xe[Ye++]&63)-65536,Ke+=String.fromCharCode(55296|Je>>10,56320|Je&1023)):tt&1?Ke+=String.fromCharCode((Je&31)<<6|Xe[Ye++]&63):Ke+=String.fromCharCode((Je&15)<<12|(Xe[Ye++]&63)<<6|Xe[Ye++]&63):Ke+=String.fromCharCode(Je)}};function strFromU8(Xe,Ke){if(Ke){for(var Ye="",Je=0;Je<Xe.length;Je+=16384)Ye+=String.fromCharCode.apply(null,Xe.subarray(Je,Je+16384));return Ye}else{if(td)return td.decode(Xe);var tt=dutf8(Xe),st=tt[0],rt=tt[1];return rt.length&&err(8),st}}var slzh=function(Xe,Ke){return Ke+30+b2(Xe,Ke+26)+b2(Xe,Ke+28)},zh=function(Xe,Ke,Ye){var Je=b2(Xe,Ke+28),tt=strFromU8(Xe.subarray(Ke+46,Ke+46+Je),!(b2(Xe,Ke+8)&2048)),st=Ke+46+Je,rt=b4(Xe,Ke+20),it=Ye&&rt==4294967295?z64e(Xe,st):[rt,b4(Xe,Ke+24),b4(Xe,Ke+42)],ot=it[0],at=it[1],lt=it[2];return[b2(Xe,Ke+10),ot,at,tt,st+b2(Xe,Ke+30)+b2(Xe,Ke+32),lt]},z64e=function(Xe,Ke){for(;b2(Xe,Ke)!=1;Ke+=4+b2(Xe,Ke+2));return[b8(Xe,Ke+12),b8(Xe,Ke+4),b8(Xe,Ke+20)]};function unzipSync(Xe,Ke){for(var Ye={},Je=Xe.length-22;b4(Xe,Je)!=101010256;--Je)(!Je||Xe.length-Je>65558)&&err(13);var tt=b2(Xe,Je+8);if(!tt)return{};var st=b4(Xe,Je+16),rt=st==4294967295||tt==65535;if(rt){var it=b4(Xe,Je-12);rt=b4(Xe,it)==101075792,rt&&(tt=b4(Xe,it+32),st=b4(Xe,it+48))}for(var ot=0;ot<tt;++ot){var at=zh(Xe,st,rt),lt=at[0],ut=at[1],ht=at[2],pt=at[3],ft=at[4],xt=at[5],vt=slzh(Xe,xt);st=ft,lt?lt==8?Ye[pt]=inflateSync(Xe.subarray(vt,vt+ut),new u8(ht)):err(14,"unknown compression type "+lt):Ye[pt]=slc(Xe,vt,vt+ut)}return Ye}var mimeTypes={};const require$$0={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}};/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015-2022 Douglas Christopher Wilson
 * MIT Licensed
 */var mimeDb=require$$0;function assertPath(Xe){if(typeof Xe!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(Xe))}function normalizeStringPosix(Xe,Ke){for(var Ye="",Je=0,tt=-1,st=0,rt,it=0;it<=Xe.length;++it){if(it<Xe.length)rt=Xe.charCodeAt(it);else{if(rt===47)break;rt=47}if(rt===47){if(!(tt===it-1||st===1))if(tt!==it-1&&st===2){if(Ye.length<2||Je!==2||Ye.charCodeAt(Ye.length-1)!==46||Ye.charCodeAt(Ye.length-2)!==46){if(Ye.length>2){var ot=Ye.lastIndexOf("/");if(ot!==Ye.length-1){ot===-1?(Ye="",Je=0):(Ye=Ye.slice(0,ot),Je=Ye.length-1-Ye.lastIndexOf("/")),tt=it,st=0;continue}}else if(Ye.length===2||Ye.length===1){Ye="",Je=0,tt=it,st=0;continue}}Ke&&(Ye.length>0?Ye+="/..":Ye="..",Je=2)}else Ye.length>0?Ye+="/"+Xe.slice(tt+1,it):Ye=Xe.slice(tt+1,it),Je=it-tt-1;tt=it,st=0}else rt===46&&st!==-1?++st:st=-1}return Ye}function _format(Xe,Ke){var Ye=Ke.dir||Ke.root,Je=Ke.base||(Ke.name||"")+(Ke.ext||"");return Ye?Ye===Ke.root?Ye+Je:Ye+Xe+Je:Je}var posix={resolve:function(){for(var Ke="",Ye=!1,Je,tt=arguments.length-1;tt>=-1&&!Ye;tt--){var st;tt>=0?st=arguments[tt]:(Je===void 0&&(Je=browser$1$1.cwd()),st=Je),assertPath(st),st.length!==0&&(Ke=st+"/"+Ke,Ye=st.charCodeAt(0)===47)}return Ke=normalizeStringPosix(Ke,!Ye),Ye?Ke.length>0?"/"+Ke:"/":Ke.length>0?Ke:"."},normalize:function(Ke){if(assertPath(Ke),Ke.length===0)return".";var Ye=Ke.charCodeAt(0)===47,Je=Ke.charCodeAt(Ke.length-1)===47;return Ke=normalizeStringPosix(Ke,!Ye),Ke.length===0&&!Ye&&(Ke="."),Ke.length>0&&Je&&(Ke+="/"),Ye?"/"+Ke:Ke},isAbsolute:function(Ke){return assertPath(Ke),Ke.length>0&&Ke.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var Ke,Ye=0;Ye<arguments.length;++Ye){var Je=arguments[Ye];assertPath(Je),Je.length>0&&(Ke===void 0?Ke=Je:Ke+="/"+Je)}return Ke===void 0?".":posix.normalize(Ke)},relative:function(Ke,Ye){if(assertPath(Ke),assertPath(Ye),Ke===Ye||(Ke=posix.resolve(Ke),Ye=posix.resolve(Ye),Ke===Ye))return"";for(var Je=1;Je<Ke.length&&Ke.charCodeAt(Je)===47;++Je);for(var tt=Ke.length,st=tt-Je,rt=1;rt<Ye.length&&Ye.charCodeAt(rt)===47;++rt);for(var it=Ye.length,ot=it-rt,at=st<ot?st:ot,lt=-1,ut=0;ut<=at;++ut){if(ut===at){if(ot>at){if(Ye.charCodeAt(rt+ut)===47)return Ye.slice(rt+ut+1);if(ut===0)return Ye.slice(rt+ut)}else st>at&&(Ke.charCodeAt(Je+ut)===47?lt=ut:ut===0&&(lt=0));break}var ht=Ke.charCodeAt(Je+ut),pt=Ye.charCodeAt(rt+ut);if(ht!==pt)break;ht===47&&(lt=ut)}var ft="";for(ut=Je+lt+1;ut<=tt;++ut)(ut===tt||Ke.charCodeAt(ut)===47)&&(ft.length===0?ft+="..":ft+="/..");return ft.length>0?ft+Ye.slice(rt+lt):(rt+=lt,Ye.charCodeAt(rt)===47&&++rt,Ye.slice(rt))},_makeLong:function(Ke){return Ke},dirname:function(Ke){if(assertPath(Ke),Ke.length===0)return".";for(var Ye=Ke.charCodeAt(0),Je=Ye===47,tt=-1,st=!0,rt=Ke.length-1;rt>=1;--rt)if(Ye=Ke.charCodeAt(rt),Ye===47){if(!st){tt=rt;break}}else st=!1;return tt===-1?Je?"/":".":Je&&tt===1?"//":Ke.slice(0,tt)},basename:function(Ke,Ye){if(Ye!==void 0&&typeof Ye!="string")throw new TypeError('"ext" argument must be a string');assertPath(Ke);var Je=0,tt=-1,st=!0,rt;if(Ye!==void 0&&Ye.length>0&&Ye.length<=Ke.length){if(Ye.length===Ke.length&&Ye===Ke)return"";var it=Ye.length-1,ot=-1;for(rt=Ke.length-1;rt>=0;--rt){var at=Ke.charCodeAt(rt);if(at===47){if(!st){Je=rt+1;break}}else ot===-1&&(st=!1,ot=rt+1),it>=0&&(at===Ye.charCodeAt(it)?--it===-1&&(tt=rt):(it=-1,tt=ot))}return Je===tt?tt=ot:tt===-1&&(tt=Ke.length),Ke.slice(Je,tt)}else{for(rt=Ke.length-1;rt>=0;--rt)if(Ke.charCodeAt(rt)===47){if(!st){Je=rt+1;break}}else tt===-1&&(st=!1,tt=rt+1);return tt===-1?"":Ke.slice(Je,tt)}},extname:function(Ke){assertPath(Ke);for(var Ye=-1,Je=0,tt=-1,st=!0,rt=0,it=Ke.length-1;it>=0;--it){var ot=Ke.charCodeAt(it);if(ot===47){if(!st){Je=it+1;break}continue}tt===-1&&(st=!1,tt=it+1),ot===46?Ye===-1?Ye=it:rt!==1&&(rt=1):Ye!==-1&&(rt=-1)}return Ye===-1||tt===-1||rt===0||rt===1&&Ye===tt-1&&Ye===Je+1?"":Ke.slice(Ye,tt)},format:function(Ke){if(Ke===null||typeof Ke!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof Ke);return _format("/",Ke)},parse:function(Ke){assertPath(Ke);var Ye={root:"",dir:"",base:"",ext:"",name:""};if(Ke.length===0)return Ye;var Je=Ke.charCodeAt(0),tt=Je===47,st;tt?(Ye.root="/",st=1):st=0;for(var rt=-1,it=0,ot=-1,at=!0,lt=Ke.length-1,ut=0;lt>=st;--lt){if(Je=Ke.charCodeAt(lt),Je===47){if(!at){it=lt+1;break}continue}ot===-1&&(at=!1,ot=lt+1),Je===46?rt===-1?rt=lt:ut!==1&&(ut=1):rt!==-1&&(ut=-1)}return rt===-1||ot===-1||ut===0||ut===1&&rt===ot-1&&rt===it+1?ot!==-1&&(it===0&&tt?Ye.base=Ye.name=Ke.slice(1,ot):Ye.base=Ye.name=Ke.slice(it,ot)):(it===0&&tt?(Ye.name=Ke.slice(1,rt),Ye.base=Ke.slice(1,ot)):(Ye.name=Ke.slice(it,rt),Ye.base=Ke.slice(it,ot)),Ye.ext=Ke.slice(rt,ot)),it>0?Ye.dir=Ke.slice(0,it-1):tt&&(Ye.dir="/"),Ye},sep:"/",delimiter:":",win32:null,posix:null};posix.posix=posix;var pathBrowserify=posix;/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */(function(Xe){var Ke=mimeDb,Ye=pathBrowserify.extname,Je=/^\s*([^;\s]*)(?:;|\s|$)/,tt=/^text\//i;Xe.charset=st,Xe.charsets={lookup:st},Xe.contentType=rt,Xe.extension=it,Xe.extensions=Object.create(null),Xe.lookup=ot,Xe.types=Object.create(null),at(Xe.extensions,Xe.types);function st(lt){if(!lt||typeof lt!="string")return!1;var ut=Je.exec(lt),ht=ut&&Ke[ut[1].toLowerCase()];return ht&&ht.charset?ht.charset:ut&&tt.test(ut[1])?"UTF-8":!1}function rt(lt){if(!lt||typeof lt!="string")return!1;var ut=lt.indexOf("/")===-1?Xe.lookup(lt):lt;if(!ut)return!1;if(ut.indexOf("charset")===-1){var ht=Xe.charset(ut);ht&&(ut+="; charset="+ht.toLowerCase())}return ut}function it(lt){if(!lt||typeof lt!="string")return!1;var ut=Je.exec(lt),ht=ut&&Xe.extensions[ut[1].toLowerCase()];return!ht||!ht.length?!1:ht[0]}function ot(lt){if(!lt||typeof lt!="string")return!1;var ut=Ye("x."+lt).toLowerCase().substr(1);return ut&&Xe.types[ut]||!1}function at(lt,ut){var ht=["nginx","apache",void 0,"iana"];Object.keys(Ke).forEach(function(ft){var xt=Ke[ft],vt=xt.extensions;if(!(!vt||!vt.length)){lt[ft]=vt;for(var At=0;At<vt.length;At++){var Et=vt[At];if(ut[Et]){var wt=ht.indexOf(Ke[ut[Et]].source),_t=ht.indexOf(xt.source);if(ut[Et]!=="application/octet-stream"&&(wt>_t||wt===_t&&ut[Et].substr(0,12)==="application/"))continue}ut[Et]=ft}}})}})(mimeTypes);const mime=getDefaultExportFromCjs(mimeTypes);async function prepareFilesFromZIP(Xe){console.debug("Preparing files from ZIP");let Ke=await unzipBuffer(Xe);const Ye=Ke["index.html"];Ke["index_raw.html"]=new Blob([Ye],{type:Ye.type});for(let Je in Ke)if(Je.endsWith(".html")||Je.endsWith(".htm")){const tt=await Ke[Je].arrayBuffer(),st=injectCSPMetaTagIntoBuffer(tt);Ke[Je]=new Blob([st],{type:Ye.type})}return Ke=Object.entries(Ke).map(Je=>(console.debug("Entry: ",Je),{path:Je[0],blob:Je[1]})),Ke=Ke.filter(Je=>Je.path!==""),Ke}async function unzipBuffer(Xe){console.debug("Unzipping buffer");let Ke=unzipSync(Xe);Ke=Object.entries(Ke).map(tt=>(console.debug("Entry: ",tt),{path:tt[0],buffer:tt[1]}));let Ye=null;for(const tt of Ke)if(tt.path.replace(/^.*[\\/]/,"")==="index.html"){const rt=tt.path.match(/.*\//)||"/";rt.length>0&&(console.debug("Found root dir: ",rt[0]),Ye=rt[0]);break}if(Ye===null){const tt="No index.html file found!";throw new Error(tt)}console.debug("Creating file map");const Je={};return Ke.forEach((tt,st)=>{const rt=Ye==="/"?tt.path:tt.path.replace(`${Ye}`,"");console.debug("Entry relPath: ",rt);let it;tt.buffer.length===0&&(tt.path.endsWith("/")||!tt.path)?it=MIMETYPE.DIRECTORY:it=mime.lookup(tt.path),Je[rt]=new Blob([tt.buffer],{type:it})}),Je}function injectCSPMetaTagIntoBuffer(Xe){const Ke=new TextDecoder().decode(Xe),Ye=injectCSPMetaTagIntoHTML(Ke);return new TextEncoder().encode(Ye)}function injectCSPMetaTagIntoHTML(Xe){const Ye=new DOMParser().parseFromString(Xe,"text/html"),Je=Ye.head.querySelectorAll('meta[http-equiv="Content-Security-Policy"]');if(Je.length)for(const tt of Je)tt.remove();if(!Ye.head){const tt="index.html is missing <head> tag!";throw window.alert(tt),new Error(tt)}return Ye.head.insertAdjacentHTML("afterbegin",`
    <meta http-equiv="Content-Security-Policy" content="
    upgrade-insecure-requests;
    default-src
      'none';
    frame-src
      'self';
    child-src
      'self'
      'unsafe-inline'
      blob:;
    script-src
      'self'
      'unsafe-inline'
      'unsafe-eval'
      blob:;
    style-src
      'self'
      'unsafe-inline';
    img-src
      'self'
      'unsafe-inline'
      data:
      blob:
      https://services.tzkt.io
      https://cloudflare-ipfs.com/
      https://ipfs.io/
      https://templewallet.com/logo.png
      https://gateway.pinata.cloud/;
    font-src
      'self'
      data:
      https://cloudflare-ipfs.com/
      https://fonts.googleapis.com/
      https://ipfs.io/
      https://gateway.pinata.cloud/;
    connect-src
      'self'
      https://better-call.dev
      https://*.better-call.dev
      https://*.cryptonomic-infra.tech
      https://cryptonomic-infra.tech
      blob:
      data:
      ws:
      wss:
      bootstrap.libp2p.io
      preload.ipfs.io
      https://mainnet.smartpy.io
      https://mainnet-tezos.giganode.io
      https://api.etherscan.io
      https://api.thegraph.com
      https://*.tzkt.io
      https://api.hicdex.com
      https://hdapi.teztools.io
      https://*.teia.rocks
      https://data.objkt.com
      https://api.tzstats.com
      https://*.wikidata.org
      https://*.coinmarketcap.com
      https://api.openweathermap.org
      https://hicetnunc.xyz
      https://*.hicetnunc.xyz
      https://teia.art
      https://*.teia.art
      https://api.teztok.com
      https://*.connkt.art
      https://*.hicetnunc.art
      https://*.teztools.io;
    manifest-src
      'self';
    base-uri
      'self';
    form-action
      'none';
    media-src
      'self'
      'unsafe-inline'
      data:
      blob:
      https://cloudflare-ipfs.com/
      https://ipfs.io/
      https://gateway.pinata.cloud/;
    prefetch-src
      'self'
      https://cloudflare-ipfs.com/
      https://fonts.googleapis.com/
      https://ipfs.io/
      https://gateway.pinata.cloud/;
    worker-src
      'self'
      'unsafe-inline'
      blob:;">
  `),`<!DOCTYPE html><html>${Ye.documentElement.innerHTML}</html>`}async function validateFiles(Xe){if(!Xe["index.html"])return{valid:!1,error:"Missing index.html file"};let Ye=await Xe["index.html"].text();return new DOMParser().parseFromString(Ye,"text/html").head?{valid:!0}:{valid:!1,error:"Missing <head> tag in index.html. Please refer to the Interactive OBJKTs Guide.."}}async function dataRUIToBuffer(Xe){const Ke=await fetch(Xe).then(tt=>tt.blob()),Ye=await new Response(Ke).arrayBuffer();return new Uint8Array(Ye)}const html="_html_1to66_1",container$n="_container_1to66_24",interactive="_interactive_1to66_38",preview$2="_preview_1to66_43",button$2="_button_1to66_51",warning="_warning_1to66_88",error$2="_error_1to66_96",styles$P={html,container:container$n,interactive,preview:preview$2,button:button$2,warning,error:error$2},uid=Math.round(Math.random()*1e8).toString(),allowed_features="accelerometer; camera; fullscreen; gyroscope; microphone; midi *; xr-spatial-tracking;",sandbox_features="allow-scripts allow-same-origin allow-modals allow-pointer-lock",HTMLComponent=Xe=>{const{artifactUri:Ke,displayUri:Ye,previewUri:Je,nft:tt,displayView:st}=Xe,rt=useUserStore(_t=>_t.address),it=useModalStore(_t=>_t.show);let ot=!1,at=!1,lt=!1;tt.artist_address&&(ot=tt.artist_address),rt&&(at=rt),tt.token_id&&(lt=String(tt.token_id));const ut=reactExports.useRef(null),ht=reactExports.useRef(null),pt=reactExports.useRef(!1),[ft,xt]=reactExports.useState(null),[vt,At]=reactExports.useState(null),Et=async()=>{pt.current=!0;const _t=await dataRUIToBuffer(Je);try{const Tt=(await prepareFilesFromZIP(_t)).reduce((Rt,Nt)=>({...Rt,[Nt.path]:Nt.blob}),{});ht.current=Tt;const St=await validateFiles(ht.current);St.error?(console.error(St.error),At(St.error)):At(null),xt(St.valid),pt.current=!1}catch(Ct){it(`Couldn't unpack ZIP file: ${Ct}`),console.error(Ct);return}};Je&&!ht.current&&!pt.current&&Et(),reactExports.useEffect(()=>{const _t=async Ct=>{Ct.data===uid&&ut.current.contentWindow.postMessage({target:"hicetnunc-html-preview",data:ht.current},"*")};return window.addEventListener("message",_t),()=>window.removeEventListener("message",_t)},[Je]);const wt=classNames$1({[styles$P.container]:!0,[styles$P.interactive]:st});if(Je){if(ot=at,ft)return jsxRuntimeExports.jsx("div",{className:wt,children:jsxRuntimeExports.jsx("iframe",{ref:ut,title:`interactive object ${tt.token_id}`,src:`https://iframe.teia.art/html/?uid=${uid}&creator=${ot}&viewer=${at}&objkt=${lt}`,sandbox:sandbox_features,allow:allowed_features})});if(ft===!1)return jsxRuntimeExports.jsxs("div",{className:styles$P.error,children:["Preview Error: ",vt]})}return st?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("iframe",{className:`${styles$P.html} zip-embed`,title:`interactive object ${tt.token_id}`,src:`${Ke}/?creator=${ot}&viewer=${at}&objkt=${lt}`,sandbox:sandbox_features,allow:allowed_features})}):jsxRuntimeExports.jsx("div",{className:wt,children:jsxRuntimeExports.jsxs("div",{className:styles$P.preview,children:[jsxRuntimeExports.jsx("img",{src:Ye,alt:`interactive object ${tt.token_id}`}),jsxRuntimeExports.jsx("div",{className:styles$P.button,children:jsxRuntimeExports.jsx(Button,{alt:"View Generative Token",children:jsxRuntimeExports.jsx(GenerativeIcon,{})})})]})})},UnknownComponent=({mimeType:Xe})=>{const[Ke,Ye]=reactExports.useState("checking");return reactExports.useEffect(()=>{const Je=Xe==null?void 0:Xe.toLowerCase().includes("png");Ye(Je?"processing":"unknown")},[Xe]),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center p-4",children:jsxRuntimeExports.jsx("div",{className:"bg-gray-100 rounded p-4 text-center",children:Ke==="processing"?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Metadata processing..."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"Please wait while we process your file"})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{children:["Unknown file type: ",Xe]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"This file type is not supported"})]})})})},container$m="_container_mdltp_216",pdfNav="_pdfNav_mdltp_225",previous_page="_previous_page_mdltp_238",page="_page_mdltp_246",styles$O={container:container$m,pdfNav,previous_page,page};__webpack_exports__GlobalWorkerOptions.workerSrc=new URL("/teia-ui/previews/pr-480/assets/pdf.worker.min-DGf6LXVo.mjs",import.meta.url).toString();const options$1={cMapUrl:"cmaps/",cMapPacked:!0,standardFontDataUrl:"standard_fonts/"},PdfComponent=reactExports.memo(function({artifactUri:Xe,displayUri:Ke,previewUri:Ye,displayView:Je,nft:tt}){const[st,rt]=reactExports.useState(),[it,ot]=reactExports.useState(1),[at,lt]=reactExports.useState(),[ut,ht]=reactExports.useState(Je),[pt,ft]=reactExports.useState(!0),[xt,vt]=reactExports.useState(),At=reactExports.useRef(null),Et=reactExports.useMemo(()=>Ye||Xe,[Ye,Xe]);function wt({numPages:Bt}){rt(Bt)}function _t(Bt){console.error(`PDF Error: ${Bt.message}`)}function Ct(Bt){ot(Lt=>Lt+Bt)}function Tt(){Ct(-1)}function St(){Ct(1)}const Rt=()=>{var Bt;ut&&(ht(!1),vt((Bt=At.current)==null?void 0:Bt.clientHeight)),lt(it)};function Nt(Bt,Lt){function zt(Dt){if(Dt===null){ft(!1);return}Bt(Dt)}switch(Lt){case 1:{const Dt=prompt("Enter the password to open this PDF file.");zt(Dt);break}case 2:{const Dt=prompt("Invalid password. Please try again.");zt(Dt);break}}}const Pt=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ImageComponent,{artifactUri:Ke,displayUri:Ke,previewUri:Ye,displayView:!1,nft:tt},`img-${tt.token_id}`),ut&&jsxRuntimeExports.jsx("p",{style:{textAlign:"center",margin:"1em"},children:"Loading PDF..."},`loading-${tt.token_id}`)]});return Je?jsxRuntimeExports.jsxs("div",{ref:At,className:styles$O.container,children:[pt?jsxRuntimeExports.jsxs(Document$1,{file:Et,loading:Pt,onPassword:Nt,onLoadSuccess:wt,onLoadError:_t,title:`PDF object ${tt.token_id}`,options:options$1,children:[at&&at!==it&&jsxRuntimeExports.jsx(Page$1,{className:styles$O.previous_page,pageNumber:at,height:xt},`${at}`),jsxRuntimeExports.jsx(Page$1,{className:styles$O.page,pageNumber:it,onRenderSuccess:Rt,height:xt},it)]}):jsxRuntimeExports.jsx(Button,{onClick:()=>{ft(!0)},children:"Reload PDF with password"}),!ut&&pt&&jsxRuntimeExports.jsxs("div",{className:styles$O.pdfNav,children:[jsxRuntimeExports.jsx(Button,{disabled:it<=1,onClick:Tt,children:"Prev «"}),jsxRuntimeExports.jsxs("p",{children:["Page ",it||(st?1:"--")," of ",st||"--"]}),jsxRuntimeExports.jsx(Button,{disabled:st?it>=st:!1,onClick:St,children:">» Next"})]})]}):Pt}),methodMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],nativeAPI=(()=>{if(typeof document>"u")return!1;const Xe=methodMap[0],Ke={};for(const Ye of methodMap)if((Ye==null?void 0:Ye[1])in document){for(const[tt,st]of Ye.entries())Ke[Xe[tt]]=st;return Ke}return!1})(),eventNameMap={change:nativeAPI.fullscreenchange,error:nativeAPI.fullscreenerror};let screenfull={request(Xe=document.documentElement,Ke){return new Promise((Ye,Je)=>{const tt=()=>{screenfull.off("change",tt),Ye()};screenfull.on("change",tt);const st=Xe[nativeAPI.requestFullscreen](Ke);st instanceof Promise&&st.then(tt).catch(Je)})},exit(){return new Promise((Xe,Ke)=>{if(!screenfull.isFullscreen){Xe();return}const Ye=()=>{screenfull.off("change",Ye),Xe()};screenfull.on("change",Ye);const Je=document[nativeAPI.exitFullscreen]();Je instanceof Promise&&Je.then(Ye).catch(Ke)})},toggle(Xe,Ke){return screenfull.isFullscreen?screenfull.exit():screenfull.request(Xe,Ke)},onchange(Xe){screenfull.on("change",Xe)},onerror(Xe){screenfull.on("error",Xe)},on(Xe,Ke){const Ye=eventNameMap[Xe];Ye&&document.addEventListener(Ye,Ke,!1)},off(Xe,Ke){const Ye=eventNameMap[Xe];Ye&&document.removeEventListener(Ye,Ke,!1)},raw:nativeAPI};Object.defineProperties(screenfull,{isFullscreen:{get:()=>!!document[nativeAPI.fullscreenElement]},element:{enumerable:!0,get:()=>document[nativeAPI.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[nativeAPI.fullscreenEnabled]}});nativeAPI||(screenfull={isEnabled:!1});const screenfull$1=screenfull,observerMap=new Map,RootIds=new WeakMap;let rootId=0,unsupportedValue;function getRootId(Xe){return Xe?(RootIds.has(Xe)||(rootId+=1,RootIds.set(Xe,rootId.toString())),RootIds.get(Xe)):"0"}function optionsToId(Xe){return Object.keys(Xe).sort().filter(Ke=>Xe[Ke]!==void 0).map(Ke=>`${Ke}_${Ke==="root"?getRootId(Xe.root):Xe[Ke]}`).toString()}function createObserver(Xe){let Ke=optionsToId(Xe),Ye=observerMap.get(Ke);if(!Ye){const Je=new Map;let tt;const st=new IntersectionObserver(rt=>{rt.forEach(it=>{var ot;const at=it.isIntersecting&&tt.some(lt=>it.intersectionRatio>=lt);Xe.trackVisibility&&typeof it.isVisible>"u"&&(it.isVisible=at),(ot=Je.get(it.target))==null||ot.forEach(lt=>{lt(at,it)})})},Xe);tt=st.thresholds||(Array.isArray(Xe.threshold)?Xe.threshold:[Xe.threshold||0]),Ye={id:Ke,observer:st,elements:Je},observerMap.set(Ke,Ye)}return Ye}function observe(Xe,Ke,Ye={},Je=unsupportedValue){if(typeof window.IntersectionObserver>"u"&&Je!==void 0){const ot=Xe.getBoundingClientRect();return Ke(Je,{isIntersecting:Je,target:Xe,intersectionRatio:typeof Ye.threshold=="number"?Ye.threshold:0,time:0,boundingClientRect:ot,intersectionRect:ot,rootBounds:ot}),()=>{}}const{id:tt,observer:st,elements:rt}=createObserver(Ye);let it=rt.get(Xe)||[];return rt.has(Xe)||rt.set(Xe,it),it.push(Ke),st.observe(Xe),function(){it.splice(it.indexOf(Ke),1),it.length===0&&(rt.delete(Xe),st.unobserve(Xe)),rt.size===0&&(st.disconnect(),observerMap.delete(tt))}}function useInView({threshold:Xe,delay:Ke,trackVisibility:Ye,rootMargin:Je,root:tt,triggerOnce:st,skip:rt,initialInView:it,fallbackInView:ot,onChange:at}={}){var lt;const[ut,ht]=reactExports.useState(null),pt=reactExports.useRef(),[ft,xt]=reactExports.useState({inView:!!it,entry:void 0});pt.current=at,reactExports.useEffect(()=>{if(rt||!ut)return;let wt;return wt=observe(ut,(_t,Ct)=>{xt({inView:_t,entry:Ct}),pt.current&&pt.current(_t,Ct),Ct.isIntersecting&&st&&wt&&(wt(),wt=void 0)},{root:tt,rootMargin:Je,threshold:Xe,trackVisibility:Ye,delay:Ke},ot),()=>{wt&&wt()}},[Array.isArray(Xe)?Xe.toString():Xe,ut,tt,Je,st,rt,Ye,ot,Ke]);const vt=(lt=ft.entry)==null?void 0:lt.target,At=reactExports.useRef();!ut&&vt&&!st&&!rt&&At.current!==vt&&(At.current=vt,xt({inView:!!it,entry:void 0}));const Et=[ht,ft.inView,ft.entry];return Et.ref=Et[0],Et.inView=Et[1],Et.entry=Et[2],Et}const flex$1="_flex_rhi74_216",anaverse_view="_anaverse_view_rhi74_225",container$l="_container_rhi74_234",feed="_feed_rhi74_244",fullscreen="_fullscreen_rhi74_253",icon="_icon_rhi74_277",icon_fullscreen="_icon_fullscreen_rhi74_307",styles$N={flex:flex$1,anaverse_view,container:container$l,feed,fullscreen,icon,icon_fullscreen},getAnaverseUrl=(Xe,Ke)=>Ke?`https://anaver.se/?gallery=1&loadsingle=1&singlecontract=${HEN_CONTRACT_FA2}&singletokenid=${Xe}&wallet=${Ke}&partnerPlatform=teia.art`:`https://anaver.se/?gallery=1&loadsingle=1&singlecontract=${HEN_CONTRACT_FA2}&singletokenid=${Xe}&partnerPlatform=teia.art`,AnaverseViewer=(Xe,Ke)=>{const Ye=getAnaverseUrl(Xe,Ke);return jsxRuntimeExports.jsx("iframe",{className:styles$N.anaverse_view,title:`#${Xe} inside Anaverse`,id:"anavIframe",src:Ye})},Container$1=({nft:Xe,children:Ke,displayView:Ye})=>{const Je=reactExports.useRef(null),[tt,st]=reactExports.useState(),[rt,it]=reactExports.useState(),{ref:ot,inView:at}=useInView({threshold:0,initialInView:!1}),lt=[MIMETYPE.MP4,MIMETYPE.OGV,MIMETYPE.QUICKTIME,MIMETYPE.WEBM].includes(Xe.mime_type),ut=()=>{Je.current&&(screenfull$1.isFullscreen?screenfull$1.exit():screenfull$1.request(Je.current,{navigationUI:"hide"}))};reactExports.useEffect(()=>{const At=Et=>{iOS||(screenfull$1.isFullscreen?st(!0):st(!1),window.dispatchEvent(new Event("resize")))};return(lt||!iOS)&&(document.addEventListener("fullscreenchange",At),document.addEventListener("webkitfullscreenchange",At,!1)),()=>{(lt||!iOS)&&(document.removeEventListener("fullscreenchange",At),document.removeEventListener("webkitfullscreenchange",At,!1))}},[]);const ht=classNames$1({[styles$N.container]:!0,[styles$N.fullscreen]:tt,[styles$N.flex]:Ye,[styles$N.feed]:!Ye}),pt=useUserStore(At=>At.address),ft=AnaverseViewer(Xe.token_id,pt),xt=React.Children.map(Ke,At=>React.isValidElement(At)?React.cloneElement(At,{inView:at,displayView:Ye}):At),vt=()=>{!!window.chrome?it(!rt):window.open(getAnaverseUrl(Xe.token_id,pt),"_blank")};return jsxRuntimeExports.jsx("div",{ref:ot,children:jsxRuntimeExports.jsxs("div",{ref:Je,className:ht,children:[rt?ft:xt,jsxRuntimeExports.jsxs("div",{style:{display:"flex"},children:[Ye&&!iOS&&!lt&&jsxRuntimeExports.jsx(Button,{alt:"Fullscreen Button",className:styles$N.icon+" svg-icon "+(tt?styles$N.icon_fullscreen:""),onClick:ut,children:tt?jsxRuntimeExports.jsx(SvgFullscreenEnter,{width:32}):jsxRuntimeExports.jsx(SvgFullscreenExit,{width:32})}),Ye&&!iOS&&jsxRuntimeExports.jsx(Button,{title:"Show in Anaverse",alt:"Anaverse Button",className:styles$N.icon+" svg-icon ",onClick:vt,children:jsxRuntimeExports.jsx(SvgEnterAnav,{width:32})})]})]})})},container$k="_container_mhzek_1",preview$1="_preview_mhzek_16",button$1="_button_mhzek_31",styles$M={container:container$k,preview:preview$1,button:button$1},MD=({displayView:Xe,displayUri:Ke,artifactUri:Ye,previewUri:Je,preview:tt,objktID:st})=>{const[rt,it]=React.useState("");return React.useEffect(()=>{if(Ye&&axios.get(Ye).then(ot=>{it(ot.data)}),tt&&Je)if(Je.startsWith("data:text/markdown;base64,")){const ot=Je.replace("data:text/markdown;base64,","");it(atob(ot))}else console.error("previewUri is not a base64 encoded markdown",Je)},[Ye,Je,Xe,Ke,tt]),Xe?jsxRuntimeExports.jsx("div",{className:styles$M.container,children:jsxRuntimeExports.jsxs("div",{className:styles$M.preview,children:[jsxRuntimeExports.jsx("img",{src:Ke,alt:`cover for markdown object ${st}`}),jsxRuntimeExports.jsx("div",{className:styles$M.button,children:jsxRuntimeExports.jsx(Button,{alt:"View Markdown Token"})})]})}):jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsx(Markdown$1,{children:rt})})})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EPSILON_FLOAT32$1=1e-7,EPSILON_FLOAT16$1=1e-4;class DataStorage{constructor(Ke,Ye){this.backend=Ke,this.dataMover=Ye,this.data=new WeakMap,this.dataIdsCount=0}get(Ke){return this.data.has(Ke)||this.dataMover.moveData(this.backend,Ke),this.data.get(Ke)}set(Ke,Ye){this.dataIdsCount++,this.data.set(Ke,Ye)}has(Ke){return this.data.has(Ke)}delete(Ke){return this.dataIdsCount--,this.data.delete(Ke)}numDataIds(){return this.dataIdsCount}}class KernelBackend{decComplexRef(Ke){}time(Ke){return notYetImplemented("time")}read(Ke){return notYetImplemented("read")}readSync(Ke){return notYetImplemented("readSync")}numDataIds(){return notYetImplemented("numDataIds")}disposeData(Ke){return notYetImplemented("disposeData")}write(Ke,Ye,Je){return notYetImplemented("write")}move(Ke,Ye,Je,tt){return notYetImplemented("move")}memory(){return notYetImplemented("memory")}floatPrecision(){return notYetImplemented("floatPrecision")}epsilon(){return this.floatPrecision()===32?EPSILON_FLOAT32$1:EPSILON_FLOAT16$1}batchMatMul(Ke,Ye,Je,tt){return notYetImplemented("batchMatMul")}fusedBatchMatMul({a:Ke,b:Ye,transposeA:Je,transposeB:tt,bias:st,activation:rt,preluActivationWeights:it}){return notYetImplemented("fusedBatchMatMul")}slice(Ke,Ye,Je){return notYetImplemented("slice")}stridedSlice(Ke,Ye,Je,tt){return notYetImplemented("stridedSlice")}unstack(Ke,Ye){return notYetImplemented("unstack")}reverse(Ke,Ye){return notYetImplemented("reverse")}concat(Ke,Ye){return notYetImplemented("concat")}neg(Ke){return notYetImplemented("neg")}add(Ke,Ye){return notYetImplemented("add")}addN(Ke){return notYetImplemented("addN")}subtract(Ke,Ye){return notYetImplemented("subtract")}multiply(Ke,Ye){return notYetImplemented("multiply")}realDivide(Ke,Ye){return notYetImplemented("realDivide")}floorDiv(Ke,Ye){return notYetImplemented("floorDiv")}sum(Ke,Ye){return notYetImplemented("sum")}prod(Ke,Ye){return notYetImplemented("prod")}unsortedSegmentSum(Ke,Ye,Je){return notYetImplemented("unsortedSegmentSum")}argMin(Ke,Ye){return notYetImplemented("argMin")}argMax(Ke,Ye){return notYetImplemented("argMax")}equal(Ke,Ye){return notYetImplemented("equal")}notEqual(Ke,Ye){return notYetImplemented("notEqual")}less(Ke,Ye){return notYetImplemented("less")}lessEqual(Ke,Ye){return notYetImplemented("lessEqual")}greater(Ke,Ye){return notYetImplemented("greater")}greaterEqual(Ke,Ye){return notYetImplemented("greaterEqual")}logicalNot(Ke){return notYetImplemented("logicalNot")}logicalAnd(Ke,Ye){return notYetImplemented("logicalAnd")}logicalOr(Ke,Ye){return notYetImplemented("logicalOr")}where(Ke){return notYetImplemented("where")}select(Ke,Ye,Je){return notYetImplemented("select")}topk(Ke,Ye,Je){return notYetImplemented("topk")}min(Ke,Ye){return notYetImplemented("min")}minimum(Ke,Ye){return notYetImplemented("minimum")}mod(Ke,Ye){return notYetImplemented("mod")}max(Ke,Ye){return notYetImplemented("max")}maximum(Ke,Ye){return notYetImplemented("maximum")}all(Ke,Ye){return notYetImplemented("all")}any(Ke,Ye){return notYetImplemented("any")}squaredDifference(Ke,Ye){return notYetImplemented("squaredDifference")}ceil(Ke){return notYetImplemented("ceil")}floor(Ke){return notYetImplemented("floor")}round(Ke){return notYetImplemented("round")}sign(Ke){return notYetImplemented("sign")}isNaN(Ke){return notYetImplemented("isNaN")}isInf(Ke){return notYetImplemented("isInf")}isFinite(Ke){return notYetImplemented("isFinite")}pow(Ke,Ye){return notYetImplemented("pow")}exp(Ke){return notYetImplemented("exp")}expm1(Ke){return notYetImplemented("expm1")}softmax(Ke,Ye){return notYetImplemented("softmax")}log(Ke){return notYetImplemented("log")}log1p(Ke){return notYetImplemented("log1p")}sqrt(Ke){return notYetImplemented("sqrt")}rsqrt(Ke){return notYetImplemented("rsqrt")}square(Ke){return notYetImplemented("square")}reciprocal(Ke){return notYetImplemented("reciprocal")}relu(Ke){return notYetImplemented("relu")}relu6(Ke){return notYetImplemented("relu6")}prelu(Ke,Ye){return notYetImplemented("prelu")}elu(Ke){return notYetImplemented("elu")}eluDer(Ke,Ye){return notYetImplemented("eluDer")}selu(Ke){return notYetImplemented("selu")}int(Ke){return notYetImplemented("int")}clip(Ke,Ye,Je){return notYetImplemented("clip")}abs(Ke){return notYetImplemented("abs")}complexAbs(Ke){return notYetImplemented("complexAbs")}sigmoid(Ke){return notYetImplemented("sigmoid")}softplus(Ke){return notYetImplemented("softplus")}sin(Ke){return notYetImplemented("sin")}cos(Ke){return notYetImplemented("cos")}tan(Ke){return notYetImplemented("tan")}asin(Ke){return notYetImplemented("asin")}acos(Ke){return notYetImplemented("acos")}atan(Ke){return notYetImplemented("atan")}atan2(Ke,Ye){return notYetImplemented("atan2")}sinh(Ke){return notYetImplemented("sinh")}cosh(Ke){return notYetImplemented("cosh")}tanh(Ke){return notYetImplemented("tanh")}asinh(Ke){return notYetImplemented("asinh")}acosh(Ke){return notYetImplemented("acosh")}atanh(Ke){return notYetImplemented("atanh")}erf(Ke){return notYetImplemented("erf")}step(Ke,Ye){return notYetImplemented("step")}fusedConv2d({input:Ke,filter:Ye,convInfo:Je,bias:tt,activation:st,preluActivationWeights:rt}){return notYetImplemented("fusedConv2d")}conv2d(Ke,Ye,Je){return notYetImplemented("conv2d")}conv2dDerInput(Ke,Ye,Je){return notYetImplemented("conv2dDerInput")}conv2dDerFilter(Ke,Ye,Je){return notYetImplemented("conv2dDerFilter")}fusedDepthwiseConv2D({input:Ke,filter:Ye,convInfo:Je,bias:tt,activation:st,preluActivationWeights:rt}){return notYetImplemented("fusedDepthwiseConv2D")}depthwiseConv2D(Ke,Ye,Je){return notYetImplemented("depthwiseConv2D")}depthwiseConv2DDerInput(Ke,Ye,Je){return notYetImplemented("depthwiseConv2DDerInput")}depthwiseConv2DDerFilter(Ke,Ye,Je){return notYetImplemented("depthwiseConv2DDerFilter")}conv3d(Ke,Ye,Je){return notYetImplemented("conv3d")}conv3dDerInput(Ke,Ye,Je){return notYetImplemented("conv3dDerInput")}conv3dDerFilter(Ke,Ye,Je){return notYetImplemented("conv3dDerFilter")}maxPool(Ke,Ye){return notYetImplemented("maxPool")}maxPoolBackprop(Ke,Ye,Je,tt){return notYetImplemented("maxPoolBackprop")}avgPool(Ke,Ye){return notYetImplemented("avgPool")}avgPoolBackprop(Ke,Ye,Je){return notYetImplemented("avgPoolBackprop")}avgPool3d(Ke,Ye){return notYetImplemented("avgPool3d")}avgPool3dBackprop(Ke,Ye,Je){return notYetImplemented("avgPool3dBackprop")}maxPool3d(Ke,Ye){return notYetImplemented("maxPool3d")}maxPool3dBackprop(Ke,Ye,Je,tt){return notYetImplemented("maxPool3dBackprop")}reshape(Ke,Ye){return notYetImplemented("reshape")}cast(Ke,Ye){return notYetImplemented("cast")}tile(Ke,Ye){return notYetImplemented("tile")}pad(Ke,Ye,Je){return notYetImplemented("pad")}transpose(Ke,Ye){return notYetImplemented("transpose")}gather(Ke,Ye,Je,tt=0){return notYetImplemented("gather")}gatherND(Ke,Ye){return notYetImplemented("gatherND")}scatterND(Ke,Ye,Je){return notYetImplemented("scatterND")}batchToSpaceND(Ke,Ye,Je){return notYetImplemented("batchToSpaceND")}spaceToBatchND(Ke,Ye,Je){return notYetImplemented("spaceToBatchND")}resizeBilinear(Ke,Ye,Je,tt,st){return notYetImplemented("resizeBilinear")}resizeBilinearBackprop(Ke,Ye,Je){return notYetImplemented("resizeBilinearBackprop")}resizeNearestNeighbor(Ke,Ye,Je,tt,st){return notYetImplemented("resizeNearestNeighbor")}resizeNearestNeighborBackprop(Ke,Ye,Je){return notYetImplemented("resizeNearestNeighborBackprop")}batchNorm(Ke,Ye,Je,tt,st,rt){return notYetImplemented("batchNorm")}localResponseNormalization4D(Ke,Ye,Je,tt,st){return notYetImplemented("localResponseNormalization4D")}LRNGrad(Ke,Ye,Je,tt,st,rt,it){return notYetImplemented("LRNGrad")}multinomial(Ke,Ye,Je,tt){return notYetImplemented("multinomial")}oneHot(Ke,Ye,Je,tt){return notYetImplemented("oneHot")}cumsum(Ke,Ye,Je,tt){return notYetImplemented("cumsum")}nonMaxSuppression(Ke,Ye,Je,tt,st){return notYetImplemented("nonMaxSuppression")}fft(Ke){return notYetImplemented("fft")}ifft(Ke){return notYetImplemented("ifft")}complex(Ke,Ye){return notYetImplemented("complex")}real(Ke){return notYetImplemented("real")}imag(Ke){return notYetImplemented("imag")}cropAndResize(Ke,Ye,Je,tt,st,rt){return notYetImplemented("cropAndResize")}depthToSpace(Ke,Ye,Je){return notYetImplemented("depthToSpace")}split(Ke,Ye,Je){return notYetImplemented("split")}sparseToDense(Ke,Ye,Je,tt){return notYetImplemented("sparseToDense")}diag(Ke){return notYetImplemented("diag")}fill(Ke,Ye,Je){return notYetImplemented("fill")}onesLike(Ke){return notYetImplemented("onesLike")}zerosLike(Ke){return notYetImplemented("zerosLike")}linspace(Ke,Ye,Je){return notYetImplemented("linspace")}dispose(){return notYetImplemented("dispose")}}function notYetImplemented(Xe){throw new Error(`'${Xe}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function shuffle(Xe){let Ke=Xe.length,Ye=0,Je=0;for(;Ke>0;)Je=Math.random()*Ke|0,Ke--,Ye=Xe[Ke],Xe[Ke]=Xe[Je],Xe[Je]=Ye}function clamp$1(Xe,Ke,Ye){return Math.max(Xe,Math.min(Ke,Ye))}function nearestLargerEven(Xe){return Xe%2===0?Xe:Xe+1}function sum$3(Xe){let Ke=0;for(let Ye=0;Ye<Xe.length;Ye++)Ke+=Xe[Ye];return Ke}function assert$2(Xe,Ke){if(!Xe)throw new Error(typeof Ke=="string"?Ke:Ke())}function assertShapesMatch(Xe,Ke,Ye=""){assert$2(arraysEqual(Xe,Ke),()=>Ye+` Shapes ${Xe} and ${Ke} must match`)}function assertNonNull(Xe){assert$2(Xe!=null,()=>"The input to the tensor constructor must be a non-null value.")}function flatten$2(Xe,Ke=[],Ye=!1){if(Ke==null&&(Ke=[]),Array.isArray(Xe)||isTypedArray$3(Xe)&&!Ye)for(let Je=0;Je<Xe.length;++Je)flatten$2(Xe[Je],Ke,Ye);else Ke.push(Xe);return Ke}function sizeFromShape(Xe){if(Xe.length===0)return 1;let Ke=Xe[0];for(let Ye=1;Ye<Xe.length;Ye++)Ke*=Xe[Ye];return Ke}function arraysEqual(Xe,Ke){if(Xe===Ke)return!0;if(Xe==null||Ke==null||Xe.length!==Ke.length)return!1;for(let Ye=0;Ye<Xe.length;Ye++)if(Xe[Ye]!==Ke[Ye])return!1;return!0}function isInt(Xe){return Xe%1===0}function sizeToSquarishShape(Xe){const Ke=Math.ceil(Math.sqrt(Xe));return[Ke,Math.ceil(Xe/Ke)]}function rightPad(Xe,Ke){return Ke<=Xe.length?Xe:Xe+" ".repeat(Ke-Xe.length)}function repeatedTry(Xe,Ke=Je=>0,Ye){return new Promise((Je,tt)=>{let st=0;const rt=()=>{if(Xe()){Je();return}st++;const it=Ke(st);setTimeout(rt,it)};rt()})}function inferFromImplicitShape(Xe,Ke){let Ye=1,Je=-1;for(let st=0;st<Xe.length;++st)if(Xe[st]>=0)Ye*=Xe[st];else if(Xe[st]===-1){if(Je!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${Je} and dim ${st}`);Je=st}else if(Xe[st]<0)throw Error(`Shapes can not be < 0. Found ${Xe[st]} at dim ${st}`);if(Je===-1){if(Ke>0&&Ke!==Ye)throw Error(`Size(${Ke}) must match the product of shape ${Xe}`);return Xe}if(Ye===0)throw Error(`Cannot infer the missing size in [${Xe}] when there are 0 elements`);if(Ke%Ye!==0)throw Error(`The implicit shape can't be a fractional number. Got ${Ke} / ${Ye}`);const tt=Xe.slice();return tt[Je]=Ke/Ye,tt}function parseAxisParam(Xe,Ke){const Ye=Ke.length;return Xe=Xe==null?Ke.map((Je,tt)=>tt):[].concat(Xe),assert$2(Xe.every(Je=>Je>=-Ye&&Je<Ye),()=>`All values in axis param must be in range [-${Ye}, ${Ye}) but got axis ${Xe}`),assert$2(Xe.every(Je=>isInt(Je)),()=>`All values in axis param must be integers but got axis ${Xe}`),Xe.map(Je=>Je<0?Ye+Je:Je)}function squeezeShape(Xe,Ke){const Ye=[],Je=[],tt=Ke!=null&&Array.isArray(Ke)&&Ke.length===0,st=Ke==null||tt?null:parseAxisParam(Ke,Xe).sort();let rt=0;for(let it=0;it<Xe.length;++it){if(st!=null){if(st[rt]===it&&Xe[it]!==1)throw new Error(`Can't squeeze axis ${it} since its dim '${Xe[it]}' is not 1`);(st[rt]==null||st[rt]>it)&&Xe[it]===1&&(Ye.push(Xe[it]),Je.push(it)),st[rt]<=it&&rt++}Xe[it]!==1&&(Ye.push(Xe[it]),Je.push(it))}return{newShape:Ye,keptDims:Je}}function getTypedArrayFromDType(Xe,Ke){let Ye=null;if(Xe==null||Xe==="float32")Ye=new Float32Array(Ke);else if(Xe==="int32")Ye=new Int32Array(Ke);else if(Xe==="bool")Ye=new Uint8Array(Ke);else throw new Error(`Unknown data type ${Xe}`);return Ye}function getArrayFromDType(Xe,Ke){let Ye=null;if(Xe==null||Xe==="float32")Ye=new Float32Array(Ke);else if(Xe==="int32")Ye=new Int32Array(Ke);else if(Xe==="bool")Ye=new Uint8Array(Ke);else if(Xe==="string")Ye=new Array(Ke);else throw new Error(`Unknown data type ${Xe}`);return Ye}function checkConversionForErrors(Xe,Ke){for(let Ye=0;Ye<Xe.length;Ye++){const Je=Xe[Ye];if(isNaN(Je)||!isFinite(Je))throw Error(`A tensor of type ${Ke} being uploaded contains ${Je}.`)}}function isValidDtype(Xe){return Xe==="bool"||Xe==="complex64"||Xe==="float32"||Xe==="int32"||Xe==="string"}function hasEncodingLoss(Xe,Ke){return!(Ke==="complex64"||Ke==="float32"&&Xe!=="complex64"||Ke==="int32"&&Xe!=="float32"&&Xe!=="complex64"||Ke==="bool"&&Xe==="bool")}function isTypedArray$3(Xe){return Xe instanceof Float32Array||Xe instanceof Int32Array||Xe instanceof Uint8Array}function bytesPerElement(Xe){if(Xe==="float32"||Xe==="int32")return 4;if(Xe==="complex64")return 8;if(Xe==="bool")return 1;throw new Error(`Unknown dtype ${Xe}`)}function bytesFromStringArray(Xe){if(Xe==null)return 0;let Ke=0;return Xe.forEach(Ye=>Ke+=Ye.length),Ke}function isString$2(Xe){return typeof Xe=="string"||Xe instanceof String}function isBoolean$2(Xe){return typeof Xe=="boolean"}function isNumber$3(Xe){return typeof Xe=="number"}function inferDtype(Xe){return Array.isArray(Xe)?inferDtype(Xe[0]):Xe instanceof Float32Array?"float32":Xe instanceof Int32Array||Xe instanceof Uint8Array?"int32":isNumber$3(Xe)?"float32":isString$2(Xe)?"string":isBoolean$2(Xe)?"bool":"float32"}function isFunction$3(Xe){return!!(Xe&&Xe.constructor&&Xe.call&&Xe.apply)}function nearestDivisor(Xe,Ke){for(let Ye=Ke;Ye<Xe;++Ye)if(Xe%Ye===0)return Ye;return Xe}function computeStrides(Xe){const Ke=Xe.length;if(Ke<2)return[];const Ye=new Array(Ke-1);Ye[Ke-2]=Xe[Ke-1];for(let Je=Ke-3;Je>=0;--Je)Ye[Je]=Ye[Je+1]*Xe[Je+1];return Ye}function createNestedArray(Xe,Ke,Ye){const Je=new Array;if(Ke.length===1){const tt=Ke[0];for(let st=0;st<tt;st++)Je[st]=Ye[Xe+st]}else{const tt=Ke[0],st=Ke.slice(1),rt=st.reduce((it,ot)=>it*ot);for(let it=0;it<tt;it++)Je[it]=createNestedArray(Xe+it*rt,st,Ye)}return Je}function toNestedArray(Xe,Ke){if(Xe.length===0)return Ke[0];const Ye=Xe.reduce((Je,tt)=>Je*tt);if(Ye===0)return[];if(Ye!==Ke.length)throw new Error(`[${Xe}] does not match the input size ${Ke.length}.`);return createNestedArray(0,Xe,Ke)}function makeOnesTypedArray(Xe,Ke){const Ye=makeZerosTypedArray(Xe,Ke);for(let Je=0;Je<Ye.length;Je++)Ye[Je]=1;return Ye}function makeZerosTypedArray(Xe,Ke){if(Ke==null||Ke==="float32"||Ke==="complex64")return new Float32Array(Xe);if(Ke==="int32")return new Int32Array(Xe);if(Ke==="bool")return new Uint8Array(Xe);throw new Error(`Unknown data type ${Ke}`)}function makeZerosNestedTypedArray(Xe,Ke){const Ye=Xe.reduce((Je,tt)=>Je*tt,1);if(Ke==null||Ke==="float32")return toNestedArray(Xe,new Float32Array(Ye));if(Ke==="int32")return toNestedArray(Xe,new Int32Array(Ye));if(Ke==="bool")return toNestedArray(Xe,new Uint8Array(Ye));throw new Error(`Unknown data type ${Ke}`)}function assertNonNegativeIntegerDimensions(Xe){Xe.forEach(Ke=>{assert$2(Number.isInteger(Ke)&&Ke>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${Xe}].`)})}function locToIndex(Xe,Ke,Ye){if(Ke===0)return 0;if(Ke===1)return Xe[0];let Je=Xe[Xe.length-1];for(let tt=0;tt<Xe.length-1;++tt)Je+=Ye[tt]*Xe[tt];return Je}function indexToLoc(Xe,Ke,Ye){if(Ke===0)return[];if(Ke===1)return[Xe];const Je=new Array(Ke);for(let tt=0;tt<Je.length-1;++tt)Je[tt]=Math.floor(Xe/Ye[tt]),Xe-=Je[tt]*Ye[tt];return Je[Je.length-1]=Xe,Je}function isPromise(Xe){return Xe&&Xe.then&&typeof Xe.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TENSORFLOWJS_FLAGS_PREFIX="tfjsflags";class Environment{constructor(Ke){this.global=Ke,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(Ke,Ye){this.platform!=null&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${Ye}.`),this.platformName=Ke,this.platform=Ye}registerFlag(Ke,Ye,Je){if(this.flagRegistry[Ke]={evaluationFn:Ye,setHook:Je},this.urlFlags[Ke]!=null){const tt=this.urlFlags[Ke];console.warn(`Setting feature override from URL ${Ke}: ${tt}.`),this.set(Ke,tt)}}async getAsync(Ke){return Ke in this.flags?this.flags[Ke]:(this.flags[Ke]=await this.evaluateFlag(Ke),this.flags[Ke])}get(Ke){if(Ke in this.flags)return this.flags[Ke];const Ye=this.evaluateFlag(Ke);if(isPromise(Ye))throw new Error(`Flag ${Ke} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[Ke]=Ye,this.flags[Ke]}getNumber(Ke){return this.get(Ke)}getBool(Ke){return this.get(Ke)}getFlags(){return this.flags}get features(){return this.flags}set(Ke,Ye){if(this.flagRegistry[Ke]==null)throw new Error(`Cannot set flag ${Ke} as it has not been registered.`);this.flags[Ke]=Ye,this.flagRegistry[Ke].setHook!=null&&this.flagRegistry[Ke].setHook(Ye)}evaluateFlag(Ke){if(this.flagRegistry[Ke]==null)throw new Error(`Cannot evaluate flag '${Ke}': no evaluation function found.`);return this.flagRegistry[Ke].evaluationFn()}setFlags(Ke){this.flags=Object.assign({},Ke)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const Ke=getQueryParams(this.global.location.search);TENSORFLOWJS_FLAGS_PREFIX in Ke&&Ke[TENSORFLOWJS_FLAGS_PREFIX].split(",").forEach(Je=>{const[tt,st]=Je.split(":");this.urlFlags[tt]=parseValue(tt,st)})}}function getQueryParams(Xe){const Ke={};return Xe.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(Ye,...Je)=>(decodeParam(Ke,Je[0],Je[1]),Je.join("="))),Ke}function decodeParam(Xe,Ke,Ye){Xe[decodeURIComponent(Ke)]=decodeURIComponent(Ye||"")}function parseValue(Xe,Ke){if(Ke=Ke.toLowerCase(),Ke==="true"||Ke==="false")return Ke==="true";if(`${+Ke}`===Ke)return+Ke;throw new Error(`Could not parse value flag value ${Ke} for flag ${Xe}.`)}function env(){return ENV$2}let ENV$2=null;function setEnvironmentGlobal(Xe){ENV$2=Xe}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let globalNameSpace;function getGlobalNamespace(){if(globalNameSpace==null){let Xe;if(typeof window<"u")Xe=window;else if(typeof globalThis<"u")Xe=globalThis;else if(typeof browser$1$1<"u")Xe=browser$1$1;else if(typeof self<"u")Xe=self;else throw new Error("Could not find a global object");globalNameSpace=Xe}return globalNameSpace}function getGlobalMap(){const Xe=getGlobalNamespace();return Xe._tfGlobals==null&&(Xe._tfGlobals=new Map),Xe._tfGlobals}function getGlobal(Xe,Ke){const Ye=getGlobalMap();if(Ye.has(Xe))return Ye.get(Xe);{const Je=Ke();return Ye.set(Xe,Je),Ye.get(Xe)}}const Abs$1="Abs",Acos="Acos",Acosh="Acosh",Add$2="Add",AddN="AddN",All="All",Any="Any",ArgMax="ArgMax",ArgMin="ArgMin",Asin="Asin",Asinh="Asinh",Atan="Atan",Atanh="Atanh",Atan2="Atan2",AvgPool="AvgPool",AvgPoolGrad="AvgPoolGrad",AvgPool3D="AvgPool3D",AvgPool3DGrad="AvgPool3DGrad",BatchMatMul="BatchMatMul",BatchToSpaceND="BatchToSpaceND",Bincount="Bincount",BroadcastTo="BroadcastTo",Cast="Cast",Ceil="Ceil",ClipByValue="ClipByValue",Complex="Complex",ComplexAbs="ComplexAbs",Concat="Concat",Conv2D$1="Conv2D",Conv2DBackpropFilter="Conv2DBackpropFilter",Conv2DBackpropInput="Conv2DBackpropInput",Conv3D$1="Conv3D",Conv3DBackpropFilterV2="Conv3DBackpropFilterV2",Conv3DBackpropInputV2="Conv3DBackpropInputV2",Cos="Cos",Cosh="Cosh",Cumsum="Cumsum",CropAndResize="CropAndResize",DenseBincount="DenseBincount",DepthToSpace="DepthToSpace",DepthwiseConv2dNative="DepthwiseConv2dNative",DepthwiseConv2dNativeBackpropFilter="DepthwiseConv2dNativeBackpropFilter",DepthwiseConv2dNativeBackpropInput="DepthwiseConv2dNativeBackpropInput",Diag="Diag",Dilation2D="Dilation2D",Dilation2DBackpropInput="Dilation2DBackpropInput",Dilation2DBackpropFilter="Dilation2DBackpropFilter",RealDiv="RealDiv",Elu$1="Elu",EluGrad="EluGrad",Erf="Erf",Equal="Equal",Exp="Exp",ExpandDims="ExpandDims",Expm1="Expm1",FFT$2="FFT",Fill="Fill",FlipLeftRight="FlipLeftRight",Floor="Floor",FloorDiv="FloorDiv",FusedBatchNorm="FusedBatchNorm",GatherV2="GatherV2",GatherNd="GatherNd",Greater="Greater",GreaterEqual="GreaterEqual",Identity$1="Identity",IFFT="IFFT",Imag="Imag",IsFinite="IsFinite",IsInf="IsInf",IsNan="IsNan",LeakyRelu="LeakyRelu",Less="Less",LessEqual="LessEqual",LinSpace="LinSpace",Log="Log",Log1p="Log1p",LogicalAnd="LogicalAnd",LogicalNot="LogicalNot",LogicalOr="LogicalOr",LogSoftmax$1="LogSoftmax",LRN="LRN",LRNGrad="LRNGrad",Max="Max",Maximum$1="Maximum",MaxPool="MaxPool",MaxPoolGrad="MaxPoolGrad",MaxPool3D="MaxPool3D",MaxPool3DGrad="MaxPool3DGrad",MaxPoolWithArgmax="MaxPoolWithArgmax",Mean="Mean",Min="Min",Minimum$1="Minimum",MirrorPad="MirrorPad",Mod="Mod",Multinomial="Multinomial",Multiply$2="Multiply",Neg="Neg",NotEqual="NotEqual",NonMaxSuppressionV3="NonMaxSuppressionV3",NonMaxSuppressionV4="NonMaxSuppressionV4",NonMaxSuppressionV5="NonMaxSuppressionV5",OnesLike="OnesLike",OneHot="OneHot",Pack="Pack",PadV2="PadV2",Pow$1="Pow",Prelu="Prelu",Prod="Prod",Range="Range",Real="Real",Reciprocal="Reciprocal",Relu$1="Relu",Reshape$1="Reshape",ResizeNearestNeighbor="ResizeNearestNeighbor",ResizeNearestNeighborGrad="ResizeNearestNeighborGrad",ResizeBilinear="ResizeBilinear",ResizeBilinearGrad="ResizeBilinearGrad",Relu6$1="Relu6",Reverse="Reverse",Round="Round",Rsqrt="Rsqrt",ScatterNd="ScatterNd",Select$2="Select",Selu$1="Selu",Slice="Slice",Sin="Sin",Sinh="Sinh",Sign="Sign",Sigmoid$1="Sigmoid",Softplus$1="Softplus",Sqrt="Sqrt",Sum="Sum",SpaceToBatchND="SpaceToBatchND",SplitV="SplitV",Softmax$2="Softmax",SquaredDifference="SquaredDifference",Square="Square",Sub="Sub",SparseToDense="SparseToDense",StridedSlice="StridedSlice",Tan="Tan",Tanh$1="Tanh",Tile="Tile",TopK="TopK",Transpose="Transpose",Unique="Unique",Unpack="Unpack",UnsortedSegmentSum="UnsortedSegmentSum",ZerosLike="ZerosLike",Step="Step",FromPixels="FromPixels",RotateWithOffset="RotateWithOffset",_FusedMatMul="_FusedMatMul",FusedConv2D="FusedConv2D",FusedDepthwiseConv2D="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kernelRegistry=getGlobal("kernelRegistry",()=>new Map),gradRegistry=getGlobal("gradRegistry",()=>new Map);function getKernel(Xe,Ke){const Ye=makeKey(Xe,Ke);return kernelRegistry.get(Ye)}function getGradient(Xe){return gradRegistry.get(Xe)}function getKernelsForBackend(Xe){const Ke=kernelRegistry.entries(),Ye=[];for(;;){const{done:Je,value:tt}=Ke.next();if(Je)break;const[st,rt]=tt,[it]=st.split("_");it===Xe&&Ye.push(rt)}return Ye}function registerKernel(Xe){const{kernelName:Ke,backendName:Ye}=Xe,Je=makeKey(Ke,Ye);kernelRegistry.has(Je)&&console.warn(`The kernel '${Ke}' for backend '${Ye}' is already registered`),kernelRegistry.set(Je,Xe)}function registerGradient(Xe){const{kernelName:Ke}=Xe;gradRegistry.has(Ke)&&env().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${Ke}'`),gradRegistry.set(Ke,Xe)}function makeKey(Xe,Ke){return`${Ke}_${Xe}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createScalarValue(Xe,Ke){return Ke==="string"?encodeString(Xe):toTypedArray([Xe],Ke)}function noConversionNeeded(Xe,Ke){return Xe instanceof Float32Array&&Ke==="float32"||Xe instanceof Int32Array&&Ke==="int32"||Xe instanceof Uint8Array&&Ke==="bool"}function toTypedArray(Xe,Ke){if(Ke==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(Xe)&&(Xe=flatten$2(Xe)),env().getBool("DEBUG")&&checkConversionForErrors(Xe,Ke),noConversionNeeded(Xe,Ke))return Xe;if(Ke==null||Ke==="float32"||Ke==="complex64")return new Float32Array(Xe);if(Ke==="int32")return new Int32Array(Xe);if(Ke==="bool"){const Ye=new Uint8Array(Xe.length);for(let Je=0;Je<Ye.length;++Je)Math.round(Xe[Je])!==0&&(Ye[Je]=1);return Ye}else throw new Error(`Unknown data type ${Ke}`)}function now$1(){return env().platform.now()}function encodeString(Xe,Ke="utf-8"){return Ke=Ke||"utf-8",env().platform.encode(Xe,Ke)}function decodeString(Xe,Ke="utf-8"){return Ke=Ke||"utf-8",env().platform.decode(Xe,Ke)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Profiler{constructor(Ke,Ye){this.backendTimer=Ke,this.logger=Ye,Ye==null&&(this.logger=new Logger)}profileKernel(Ke,Ye,Je){let tt;const st=()=>{tt=Je()},rt=this.backendTimer.time(st);if(env().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let ot=0;ot<tt.length;ot++){const at=tt[ot];at.data().then(lt=>{checkComputationForErrors(lt,at.dtype,Ke)})}return{kernelName:Ke,outputs:tt,inputs:Ye,timeMs:rt.then(ot=>ot.kernelMs),extraInfo:rt.then(ot=>ot.getExtraProfileInfo!=null?ot.getExtraProfileInfo():"")}}logKernelProfile(Ke){const{kernelName:Ye,outputs:Je,timeMs:tt,inputs:st,extraInfo:rt}=Ke;Je.forEach(it=>{Promise.all([it.data(),tt,rt]).then(ot=>{this.logger.logKernelProfile(Ye,it,ot[0],ot[1],st,ot[2])})})}}function checkComputationForErrors(Xe,Ke,Ye){if(Ke!=="float32")return!1;for(let Je=0;Je<Xe.length;Je++){const tt=Xe[Je];if(isNaN(tt)||!isFinite(tt))return console.warn(`Found ${tt} in the result of '${Ye}'`),!0}return!1}class Logger{logKernelProfile(Ke,Ye,Je,tt,st,rt){const it=typeof tt=="number"?rightPad(`${tt}ms`,9):tt.error,ot=rightPad(Ke,25),at=Ye.rank,lt=Ye.size,ut=rightPad(Ye.shape.toString(),14);let ht="";for(const pt in st){const ft=st[pt];if(ft!=null){const xt=ft.shape||Ye.shape,vt=xt.length;ht+=`${pt}: ${vt}D ${vt>0?xt:""} `}}console.log(`%c${ot}	%c${it}	%c${at}D ${ut}	%c${lt}	%c${ht}	%c${rt}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getFilteredNodesXToY(Xe,Ke,Ye){const Je={},tt={};for(let ot=0;ot<Ke.length;ot++)Je[Ke[ot].id]=!0;for(let ot=0;ot<Xe.length;ot++){const at=Xe[ot],lt=at.inputs;for(const ut in lt){const ht=lt[ut];let pt=!1;for(let ft=0;ft<Ke.length;ft++)if(Je[ht.id]){at.outputs.forEach(xt=>Je[xt.id]=!0),pt=!0,tt[at.id]=!0;break}if(pt)break}}const st={};st[Ye.id]=!0;const rt={};for(let ot=Xe.length-1;ot>=0;ot--){const at=Xe[ot],lt=at.inputs;for(let ut=0;ut<at.outputs.length;ut++)if(st[at.outputs[ut].id]){for(const ht in lt)st[lt[ht].id]=!0,rt[at.id]=!0;break}}const it=[];for(let ot=0;ot<Xe.length;ot++){const at=Xe[ot];if(tt[at.id]&&rt[at.id]){const lt={};for(const ht in at.inputs){const pt=at.inputs[ht];Je[pt.id]&&(lt[ht]=pt)}const ut=Object.assign({},at);ut.inputs=lt,ut.outputs=at.outputs,it.push(ut)}}return it}function backpropagateGradients(Xe,Ke,Ye,Je){for(let tt=Ke.length-1;tt>=0;tt--){const st=Ke[tt],rt=[];if(st.outputs.forEach(ot=>{const at=Xe[ot.id];at!=null?rt.push(at):rt.push(null)}),st.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${st.kernelName}.`);const it=st.gradient(rt);for(const ot in st.inputs){if(!(ot in it))throw new Error(`Cannot backprop through input ${ot}. Available gradients found: ${Object.keys(it)}.`);const at=Ye(()=>it[ot]());if(at.dtype!=="float32")throw new Error(`Error in gradient for op ${st.kernelName}. The gradient of input ${ot} must have 'float32' dtype, but has '${at.dtype}'`);const lt=st.inputs[ot];if(!arraysEqual(at.shape,lt.shape))throw new Error(`Error in gradient for op ${st.kernelName}. The gradient of input '${ot}' has shape '${at.shape}', which does not match the shape of the input '${lt.shape}'`);if(Xe[lt.id]==null)Xe[lt.id]=at;else{const ut=Xe[lt.id];Xe[lt.id]=Je(ut,at),ut.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FORMAT_LIMIT_NUM_VALS=20,FORMAT_NUM_FIRST_LAST_VALS=3,FORMAT_NUM_SIG_DIGITS=7;function tensorToString(Xe,Ke,Ye,Je){const tt=computeStrides(Ke),st=computeMaxSizePerColumn(Xe,Ke,Ye,tt),rt=Ke.length,it=subTensorToString(Xe,Ke,Ye,tt,st),ot=["Tensor"];return Je&&(ot.push(`  dtype: ${Ye}`),ot.push(`  rank: ${rt}`),ot.push(`  shape: [${Ke}]`),ot.push("  values:")),ot.push(it.map(at=>"    "+at).join(`
`)),ot.join(`
`)}function computeMaxSizePerColumn(Xe,Ke,Ye,Je){const tt=sizeFromShape(Ke),st=Je[Je.length-1],rt=new Array(st).fill(0),it=Ke.length,ot=Ye==="complex64"?createComplexTuples(Xe):Xe;if(it>1)for(let at=0;at<tt/st;at++){const lt=at*st;for(let ut=0;ut<st;ut++)rt[ut]=Math.max(rt[ut],valToString(ot[lt+ut],0,Ye).length)}return rt}function valToString(Xe,Ke,Ye){let Je;return Array.isArray(Xe)?Je=`${parseFloat(Xe[0].toFixed(FORMAT_NUM_SIG_DIGITS))} + ${parseFloat(Xe[1].toFixed(FORMAT_NUM_SIG_DIGITS))}j`:isString$2(Xe)?Je=`'${Xe}'`:Ye==="bool"?Je=boolNumToString(Xe):Je=parseFloat(Xe.toFixed(FORMAT_NUM_SIG_DIGITS)).toString(),rightPad(Je,Ke)}function boolNumToString(Xe){return Xe===0?"false":"true"}function subTensorToString(Xe,Ke,Ye,Je,tt,st=!0){const rt=Ye==="complex64"?2:1,it=Ke[0],ot=Ke.length;if(ot===0){if(Ye==="complex64"){const xt=createComplexTuples(Xe);return[valToString(xt[0],0,Ye)]}return Ye==="bool"?[boolNumToString(Xe[0])]:[Xe[0].toString()]}if(ot===1){if(it>FORMAT_LIMIT_NUM_VALS){const vt=FORMAT_NUM_FIRST_LAST_VALS*rt;let At=Array.from(Xe.slice(0,vt)),Et=Array.from(Xe.slice((it-FORMAT_NUM_FIRST_LAST_VALS)*rt,it*rt));return Ye==="complex64"&&(At=createComplexTuples(At),Et=createComplexTuples(Et)),["["+At.map((wt,_t)=>valToString(wt,tt[_t],Ye)).join(", ")+", ..., "+Et.map((wt,_t)=>valToString(wt,tt[it-FORMAT_NUM_FIRST_LAST_VALS+_t],Ye)).join(", ")+"]"]}return["["+(Ye==="complex64"?createComplexTuples(Xe):Array.from(Xe)).map((vt,At)=>valToString(vt,tt[At],Ye)).join(", ")+"]"]}const at=Ke.slice(1),lt=Je.slice(1),ut=Je[0]*rt,ht=[];if(it>FORMAT_LIMIT_NUM_VALS){for(let xt=0;xt<FORMAT_NUM_FIRST_LAST_VALS;xt++){const vt=xt*ut,At=vt+ut;ht.push(...subTensorToString(Xe.slice(vt,At),at,Ye,lt,tt,!1))}ht.push("...");for(let xt=it-FORMAT_NUM_FIRST_LAST_VALS;xt<it;xt++){const vt=xt*ut,At=vt+ut;ht.push(...subTensorToString(Xe.slice(vt,At),at,Ye,lt,tt,xt===it-1))}}else for(let xt=0;xt<it;xt++){const vt=xt*ut,At=vt+ut;ht.push(...subTensorToString(Xe.slice(vt,At),at,Ye,lt,tt,xt===it-1))}const pt=ot===2?",":"";ht[0]="["+ht[0]+pt;for(let xt=1;xt<ht.length-1;xt++)ht[xt]=" "+ht[xt]+pt;let ft=`,
`;for(let xt=2;xt<ot;xt++)ft+=`
`;return ht[ht.length-1]=" "+ht[ht.length-1]+"]"+(st?"":ft),ht}function createComplexTuples(Xe){const Ke=[];for(let Ye=0;Ye<Xe.length;Ye+=2)Ke.push([Xe[Ye],Xe[Ye+1]]);return Ke}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TensorBuffer{constructor(Ke,Ye,Je){if(this.dtype=Ye,this.shape=Ke.slice(),this.size=sizeFromShape(Ke),Je!=null){const tt=Je.length;assert$2(tt===this.size,()=>`Length of values '${tt}' does not match the size inferred by the shape '${this.size}'.`)}if(Ye==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=Je||getArrayFromDType(Ye,this.size),this.strides=computeStrides(Ke)}set(Ke,...Ye){Ye.length===0&&(Ye=[0]),assert$2(Ye.length===this.rank,()=>`The number of provided coordinates (${Ye.length}) must match the rank (${this.rank})`);const Je=this.locToIndex(Ye);this.values[Je]=Ke}get(...Ke){Ke.length===0&&(Ke=[0]);let Ye=0;for(const tt of Ke){if(tt<0||tt>=this.shape[Ye]){const st=`Requested out of range element at ${Ke}.   Buffer shape=${this.shape}`;throw new Error(st)}Ye++}let Je=Ke[Ke.length-1];for(let tt=0;tt<Ke.length-1;++tt)Je+=this.strides[tt]*Ke[tt];return this.values[Je]}locToIndex(Ke){if(this.rank===0)return 0;if(this.rank===1)return Ke[0];let Ye=Ke[Ke.length-1];for(let Je=0;Je<Ke.length-1;++Je)Ye+=this.strides[Je]*Ke[Je];return Ye}indexToLoc(Ke){if(this.rank===0)return[];if(this.rank===1)return[Ke];const Ye=new Array(this.shape.length);for(let Je=0;Je<Ye.length-1;++Je)Ye[Je]=Math.floor(Ke/this.strides[Je]),Ke-=Ye[Je]*this.strides[Je];return Ye[Ye.length-1]=Ke,Ye}get rank(){return this.shape.length}toTensor(){return trackerFn().makeTensor(this.values,this.shape,this.dtype)}}let trackerFn=null,opHandler$1=null;function setTensorTracker(Xe){trackerFn=Xe}function setOpHandler(Xe){opHandler$1=Xe}class Tensor{constructor(Ke,Ye,Je,tt){this.kept=!1,this.isDisposedInternal=!1,this.shape=Ke.slice(),this.dtype=Ye||"float32",this.size=sizeFromShape(Ke),this.strides=computeStrides(Ke),this.dataId=Je,this.id=tt,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const Ke=await this.data();return opHandler$1.buffer(this.shape,this.dtype,Ke)}bufferSync(){return opHandler$1.buffer(this.shape,this.dtype,this.dataSync())}async array(){const Ke=await this.data();return toNestedArray(this.shape,Ke)}arraySync(){return toNestedArray(this.shape,this.dataSync())}async data(){this.throwIfDisposed();const Ke=trackerFn().read(this.dataId);if(this.dtype==="string"){const Ye=await Ke;try{return Ye.map(Je=>decodeString(Je))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return Ke}dataSync(){this.throwIfDisposed();const Ke=trackerFn().readSync(this.dataId);if(this.dtype==="string")try{return Ke.map(Ye=>decodeString(Ye))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return Ke}async bytes(){this.throwIfDisposed();const Ke=await trackerFn().read(this.dataId);return this.dtype==="string"?Ke:new Uint8Array(Ke.buffer)}dispose(){this.isDisposed||(trackerFn().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(Ke=!1){return opHandler$1.print(this,Ke)}clone(){return this.throwIfDisposed(),opHandler$1.clone(this)}toString(Ke=!1){const Ye=this.dataSync();return tensorToString(Ye,this.shape,this.dtype,Ke)}cast(Ke){return this.throwIfDisposed(),opHandler$1.cast(this,Ke)}variable(Ke=!0,Ye,Je){return this.throwIfDisposed(),trackerFn().makeVariable(this,Ke,Ye,Je)}}Object.defineProperty(Tensor,Symbol.hasInstance,{value:Xe=>!!Xe&&Xe.data!=null&&Xe.dataSync!=null&&Xe.throwIfDisposed!=null});class Variable extends Tensor{constructor(Ke,Ye,Je,tt){super(Ke.shape,Ke.dtype,Ke.dataId,tt),this.trainable=Ye,this.name=Je}assign(Ke){if(Ke.dtype!==this.dtype)throw new Error(`dtype of the new value (${Ke.dtype}) and previous value (${this.dtype}) must match`);if(!arraysEqual(Ke.shape,this.shape))throw new Error(`shape of the new value (${Ke.shape}) and previous value (${this.shape}) must match`);trackerFn().disposeTensor(this),this.dataId=Ke.dataId,trackerFn().incRef(this,null)}dispose(){trackerFn().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Variable,Symbol.hasInstance,{value:Xe=>Xe instanceof Tensor&&Xe.assign!=null&&Xe.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Rank;(function(Xe){Xe.R0="R0",Xe.R1="R1",Xe.R2="R2",Xe.R3="R3",Xe.R4="R4",Xe.R5="R5",Xe.R6="R6"})(Rank||(Rank={}));var UpcastInt32AndMap;(function(Xe){Xe.float32="float32",Xe.int32="int32",Xe.bool="int32",Xe.complex64="complex64"})(UpcastInt32AndMap||(UpcastInt32AndMap={}));var UpcastBoolAndMap;(function(Xe){Xe.float32="float32",Xe.int32="int32",Xe.bool="bool",Xe.complex64="complex64"})(UpcastBoolAndMap||(UpcastBoolAndMap={}));var UpcastFloat32AndMap;(function(Xe){Xe.float32="float32",Xe.int32="float32",Xe.bool="float32",Xe.complex64="complex64"})(UpcastFloat32AndMap||(UpcastFloat32AndMap={}));var UpcastComplex64AndMap;(function(Xe){Xe.float32="complex64",Xe.int32="complex64",Xe.bool="complex64",Xe.complex64="complex64"})(UpcastComplex64AndMap||(UpcastComplex64AndMap={}));const upcastTypeMap={float32:UpcastFloat32AndMap,int32:UpcastInt32AndMap,bool:UpcastBoolAndMap,complex64:UpcastComplex64AndMap};function upcastType(Xe,Ke){if(Xe==="string"||Ke==="string"){if(Xe==="string"&&Ke==="string")return"string";throw new Error(`Can not upcast ${Xe} with ${Ke}`)}return upcastTypeMap[Xe][Ke]}function sumOutType(Xe){return upcastType(Xe,"int32")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function makeTypesMatch(Xe,Ke){if(Xe.dtype===Ke.dtype)return[Xe,Ke];const Ye=upcastType(Xe.dtype,Ke.dtype);return[Xe.cast(Ye),Ke.cast(Ye)]}function getTensorsInContainer(Xe){const Ke=[];return walkTensorContainer(Xe,Ke,new Set),Ke}function walkTensorContainer(Xe,Ke,Ye){if(Xe==null)return;if(Xe instanceof Tensor){Ke.push(Xe);return}if(!isIterable(Xe))return;const Je=Xe;for(const tt in Je){const st=Je[tt];Ye.has(st)||(Ye.add(st),walkTensorContainer(st,Ke,Ye))}}function isIterable(Xe){return Array.isArray(Xe)||typeof Xe=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EngineState{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(Ke=>Ke.name)))}}}dispose(){for(const Ke in this.registeredVariables)this.registeredVariables[Ke].dispose()}}class Engine{constructor(Ke){this.ENV=Ke,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new EngineState}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const Ke=this.getSortedBackends();for(let Ye=0;Ye<Ke.length;Ye++){const Je=Ke[Ye];if(await this.initializeBackend(Je).success){await this.setBackend(Je);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:Ke,asyncInit:Ye}=this.initializeBackendsAndReturnBest();if(Ye)throw new Error(`The highest priority backend '${Ke}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(Ke)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(Ke){if(!(Ke in this.registry))if(Ke in this.registryFactory){const{asyncInit:Ye}=this.initializeBackend(Ke);if(Ye)return null}else return null;return this.registry[Ke]}findBackendFactory(Ke){return Ke in this.registryFactory?this.registryFactory[Ke].factory:null}registerBackend(Ke,Ye,Je=1){return Ke in this.registryFactory?(console.warn(`${Ke} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[Ke]={factory:Ye,priority:Je},!0)}async setBackend(Ke){if(this.registryFactory[Ke]==null)throw new Error(`Backend name '${Ke}' not found in registry`);if(this.backendName=Ke,this.registry[Ke]==null){this.backendInstance=null;const{success:Ye,asyncInit:Je}=this.initializeBackend(Ke);if(!(Je?await Ye:Ye))return!1}return this.backendInstance=this.registry[Ke],this.setupRegisteredKernels(),this.profiler=new Profiler(this.backendInstance),!0}setupRegisteredKernels(){getKernelsForBackend(this.backendName).forEach(Ye=>{Ye.setupFunc!=null&&Ye.setupFunc(this.backendInstance)})}disposeRegisteredKernels(Ke){getKernelsForBackend(Ke).forEach(Je=>{Je.disposeFunc!=null&&Je.disposeFunc(this.registry[Ke])})}initializeBackend(Ke){const Ye=this.registryFactory[Ke];if(Ye==null)throw new Error(`Cannot initialize backend ${Ke}, no registration found.`);try{const Je=Ye.factory();if(Je&&!(Je instanceof KernelBackend)&&typeof Je.then=="function"){const tt=++this.pendingBackendInitId,st=Je.then(rt=>tt<this.pendingBackendInitId?!1:(this.registry[Ke]=rt,this.pendingBackendInit=null,!0)).catch(rt=>(tt<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${Ke} failed`),console.warn(rt.stack||rt.message)),!1));return this.pendingBackendInit=st,{success:st,asyncInit:!0}}else return this.registry[Ke]=Je,{success:!0,asyncInit:!1}}catch(Je){return console.warn(`Initialization of backend ${Ke} failed`),console.warn(Je.stack||Je.message),{success:!1,asyncInit:!1}}}removeBackend(Ke){if(!(Ke in this.registryFactory))throw new Error(`${Ke} backend not found in registry`);this.backendName===Ke&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,Ke in this.registry&&(this.disposeRegisteredKernels(Ke),this.registry[Ke].dispose(),delete this.registry[Ke]),delete this.registryFactory[Ke],this.backendName===Ke&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((Ke,Ye)=>this.registryFactory[Ye].priority-this.registryFactory[Ke].priority)}initializeBackendsAndReturnBest(){const Ke=this.getSortedBackends();for(let Ye=0;Ye<Ke.length;Ye++){const Je=Ke[Ye],{success:tt,asyncInit:st}=this.initializeBackend(Je);if(st||tt)return{name:Je,asyncInit:st}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(Ke,Ye){const Je=this.state.tensorInfo.get(Ye),tt=Je.backend,st=this.readSync(Ye);tt.disposeData(Ye),Je.backend=Ke,Ke.move(Ye,st,Je.shape,Je.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(Ke,Ye){let Je=null;if(Ye==null){if(typeof Ke!="function")throw new Error("Please provide a function to tidy()");Ye=Ke}else{if(typeof Ke!="string"&&!(Ke instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof Ye!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");Je=Ke}let tt;return this.scopedRun(()=>this.startScope(Je),()=>this.endScope(tt),()=>(tt=Ye(),tt instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),tt))}scopedRun(Ke,Ye,Je){Ke();try{const tt=Je();return Ye(),tt}catch(tt){throw Ye(),tt}}nextTensorId(){return Engine.nextTensorId++}nextVariableId(){return Engine.nextVariableId++}clone(Ke){const Ye=this.makeTensorFromDataId(Ke.dataId,Ke.shape,Ke.dtype),Je={x:Ke},tt=rt=>({x:()=>{const it="float32",ot={x:rt},at={dtype:it};return ENGINE.runKernelFunc(lt=>lt.cast(rt,it),ot,null,Cast,at)}}),st=[];return this.addTapeNode(this.state.activeScope.name,Je,[Ye],tt,st,{}),Ye}runKernel(Ke,Ye,Je,tt,st){return this.runKernelFunc(null,Ye,null,Ke,Je,tt,st)}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(Ke,Ye,Je){const tt=this.backend.numDataIds();let st=0;Je.forEach(ot=>{st+=ot.dtype==="complex64"?3:1});const rt=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],it=tt-Ye-st-rt;if(it>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${it} data ids) after running '${Ke}'`)}runKernelFunc(Ke,Ye,Je,tt,st,rt,it){let ot,at=[];const lt=this.isTapeOn();tt==null&&(tt=this.state.activeScope!=null?this.state.activeScope.name:"");const ut=this.state.numBytes,ht=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let pt;this.backendName==null&&this.backend;const ft=getKernel(tt,this.backendName);let xt;if(ft!=null)pt=()=>{const At=this.backend.numDataIds();xt=ft.kernelFunc({inputs:Ye,attrs:st,backend:this.backend});const Et=Array.isArray(xt)?xt:[xt];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(tt,At,Et);const wt=Et.map(_t=>{if(_t.rank!=null)return _t;const{dataId:Ct,shape:Tt,dtype:St}=_t;return this.makeTensorFromDataId(Ct,Tt,St)});if(lt){let _t=this.getTensorsForGradient(tt,Ye,wt);if(_t==null){it==null&&(it=[]);const Ct=wt.filter((Tt,St)=>it[St]);_t=(rt||[]).slice().concat(Ct)}at=this.saveTensorsForBackwardMode(_t)}return wt};else{if(Ke==null)throw new Error(`Error running ${tt}: Neither modular kernel nor forward func passed`);const At=Et=>{lt&&(at=Et.map(wt=>this.keep(this.clone(wt))))};pt=()=>{const Et=this.backend.numDataIds();xt=this.tidy(()=>Ke(this.backend,At));const wt=Array.isArray(xt)?xt:[xt];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(tt,Et,wt),wt}}let vt;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?ot=pt():(vt=this.profiler.profileKernel(tt,Ye,()=>pt()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(vt),ot=vt.outputs)}),lt&&this.addTapeNode(tt,Ye,ot,Je,at,st),this.state.profiling&&this.state.activeProfile.kernels.push({name:tt,bytesAdded:this.state.numBytes-ut,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-ht,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(Ye).map(At=>Ye[At]!=null?Ye[At].shape:null),outputShapes:ot.map(At=>At.shape),kernelTimeMs:vt.timeMs,extraInfo:vt.extraInfo}),Array.isArray(xt)?ot:ot[0]}saveTensorsForBackwardMode(Ke){return Ke.map(Je=>this.keep(this.clone(Je)))}getTensorsForGradient(Ke,Ye,Je){const tt=getGradient(Ke);if(tt!=null){const st=tt.inputsToSave||[],rt=tt.outputsToSave||[];let it;tt.saveAllInputs?(assert$2(Array.isArray(Ye),()=>"saveAllInputs is true, expected inputs to be an array."),it=Object.keys(Ye).map(at=>Ye[at])):it=st.map(at=>Ye[at]);const ot=Je.filter((at,lt)=>rt[lt]);return it.concat(ot)}return null}makeTensor(Ke,Ye,Je,tt){if(Ke==null)throw new Error("Values passed to engine.makeTensor() are null");Je=Je||"float32",tt=tt||this.backend;let st=Ke;Je==="string"&&isString$2(Ke[0])&&(st=Ke.map(ot=>encodeString(ot)));const rt=tt.write(st,Ye,Je),it=new Tensor(Ye,Je,rt,this.nextTensorId());if(this.incRef(it,tt),Je==="string"){const ot=this.state.tensorInfo.get(rt),at=bytesFromStringArray(st);this.state.numBytes+=at-ot.bytes,ot.bytes=at}return it}makeTensorFromDataId(Ke,Ye,Je,tt){Je=Je||"float32";const st=new Tensor(Ye,Je,Ke,this.nextTensorId());return this.incRef(st,tt),st}makeVariable(Ke,Ye=!0,Je,tt){Je=Je||this.nextVariableId().toString(),tt!=null&&tt!==Ke.dtype&&(Ke=Ke.cast(tt));const st=new Variable(Ke,Ye,Je,this.nextTensorId());if(this.state.registeredVariables[st.name]!=null)throw new Error(`Variable with name ${st.name} was already registered`);return this.state.registeredVariables[st.name]=st,this.incRef(st,this.backend),st}incRef(Ke,Ye){const Je=this.state.tensorInfo.has(Ke.dataId)?this.state.tensorInfo.get(Ke.dataId).refCount:0;if(this.state.numTensors++,Ke.dtype==="string"&&this.state.numStringTensors++,Je===0){this.state.numDataBuffers++;let tt=0;Ke.dtype!=="complex64"&&Ke.dtype!=="string"&&(tt=Ke.size*bytesPerElement(Ke.dtype)),this.state.tensorInfo.set(Ke.dataId,{backend:Ye||this.backend,dtype:Ke.dtype,shape:Ke.shape,bytes:tt,refCount:0}),this.state.numBytes+=tt}this.state.tensorInfo.get(Ke.dataId).refCount++,Ke instanceof Variable||this.track(Ke)}disposeTensor(Ke){if(!this.state.tensorInfo.has(Ke.dataId))return;this.state.numTensors--,Ke.dtype==="string"&&this.state.numStringTensors--;const Ye=this.state.tensorInfo.get(Ke.dataId);Ye.refCount<=1?(Ke.dtype!=="complex64"&&(this.state.numBytes-=Ye.bytes),this.state.numDataBuffers--,Ye.backend.disposeData(Ke.dataId),this.state.tensorInfo.delete(Ke.dataId)):(Ye.backend.decComplexRef(Ke.dataId),this.state.tensorInfo.get(Ke.dataId).refCount--)}disposeVariables(){for(const Ke in this.state.registeredVariables){const Ye=this.state.registeredVariables[Ke];this.disposeVariable(Ye)}}disposeVariable(Ke){this.disposeTensor(Ke),this.state.registeredVariables[Ke.name]!=null&&delete this.state.registeredVariables[Ke.name]}memory(){const Ke=this.backend.memory();return Ke.numTensors=this.state.numTensors,Ke.numDataBuffers=this.state.numDataBuffers,Ke.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(Ke.unreliable=!0,Ke.reasons==null&&(Ke.reasons=[]),Ke.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),Ke}async profile(Ke){this.state.profiling=!0;const Ye=this.state.numBytes,Je=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await Ke(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(tt=>tt.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-Ye,this.state.activeProfile.newTensors=this.state.numTensors-Je;for(const tt of this.state.activeProfile.kernels)tt.kernelTimeMs=await tt.kernelTimeMs,tt.extraInfo=await tt.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(Ke,Ye,Je,tt,st,rt){const it={id:this.state.nextTapeNodeId++,kernelName:Ke,inputs:Ye,outputs:Je,saved:st},ot=getGradient(Ke);ot!=null&&(tt=ot.gradFunc),tt!=null&&(it.gradient=at=>(at=at.map((lt,ut)=>{if(lt==null){const ht=Je[ut],pt=makeZerosTypedArray(ht.size,ht.dtype);return this.makeTensor(pt,ht.shape,ht.dtype)}return lt}),tt(at.length>1?at:at[0],st,rt))),this.state.activeTape.push(it)}keep(Ke){return Ke.kept=!0,Ke}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(Ke){const Ye={track:[],name:"unnamed scope",id:this.state.nextScopeId++};Ke&&(Ye.name=Ke),this.state.scopeStack.push(Ye),this.state.activeScope=Ye}endScope(Ke){const Ye=getTensorsInContainer(Ke),Je=new Set(Ye.map(st=>st.id));for(let st=0;st<this.state.activeScope.track.length;st++){const rt=this.state.activeScope.track[st];!rt.kept&&!Je.has(rt.id)&&rt.dispose()}const tt=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],Ye.forEach(st=>{!st.kept&&st.scopeId===tt.id&&this.track(st)})}gradients(Ke,Ye,Je,tt=!1){if(assert$2(Ye.length>0,()=>"gradients() received an empty list of xs."),Je!=null&&Je.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${Je.dtype}'`);const st=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",Ke));assert$2(st instanceof Tensor,()=>"The result y returned by f() must be a tensor.");const rt=getFilteredNodesXToY(this.state.activeTape,Ye,st);if(!tt&&rt.length===0&&Ye.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const it={};it[st.id]=Je??ones$1(st.shape),backpropagateGradients(it,rt,at=>this.tidy(at),add$2);const ot=Ye.map(at=>it[at.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(at=>{for(const lt of at.saved)lt.dispose()}),this.state.activeTape=null),{value:st,grads:ot}})}customGrad(Ke){return assert$2(isFunction$3(Ke),()=>"The f passed in customGrad(f) must be a function."),(...Ye)=>{assert$2(Ye.every(st=>st instanceof Tensor),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let Je;const tt={};return Ye.forEach((st,rt)=>{tt[rt]=st}),this.runKernelFunc((st,rt)=>(Je=Ke(...Ye,rt),assert$2(Je.value instanceof Tensor,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),assert$2(isFunction$3(Je.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),Je.value),tt,(st,rt)=>{const it=Je.gradFunc(st,rt),ot=Array.isArray(it)?it:[it];assert$2(ot.length===Ye.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),assert$2(ot.every(lt=>lt instanceof Tensor),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const at={};return ot.forEach((lt,ut)=>{at[ut]=()=>lt}),at})}}readSync(Ke){return this.state.tensorInfo.get(Ke).backend.readSync(Ke)}read(Ke){return this.state.tensorInfo.get(Ke).backend.read(Ke)}async time(Ke){const Ye=now$1(),Je=await this.backend.time(Ke);return Je.wallMs=now$1()-Ye,Je}track(Ke){return this.state.activeScope!=null&&(Ke.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(Ke)),Ke}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new EngineState;for(const Ke in this.registry)this.disposeRegisteredKernels(Ke),this.registry[Ke].dispose(),delete this.registry[Ke];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Engine.nextTensorId=0;Engine.nextVariableId=0;function ones$1(Xe){const Ke=makeOnesTypedArray(sizeFromShape(Xe),"float32");return ENGINE.makeTensor(Ke,Xe,"float32")}function getOrMakeEngine(){const Xe=getGlobalNamespace();if(Xe._tfengine==null){const Ke=new Environment(Xe);Xe._tfengine=new Engine(Ke)}return setEnvironmentGlobal(Xe._tfengine.ENV),setTensorTracker(()=>Xe._tfengine),Xe._tfengine}const ENGINE=getOrMakeEngine();function add$2(Xe,Ke){const Ye={a:Xe,b:Ke};return ENGINE.runKernel(Add$2,Ye)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _isNavigatorDefined(){return typeof navigator<"u"&&navigator!=null}function isMobile(){if(_isNavigatorDefined()){const Xe=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Xe)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Xe.substr(0,4))}return!1}function isBrowser$2(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const ENV$1=env();ENV$1.registerFlag("DEBUG",()=>!1,Xe=>{Xe&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ENV$1.registerFlag("IS_BROWSER",()=>isBrowser$2());ENV$1.registerFlag("IS_NODE",()=>typeof browser$1$1<"u"&&typeof browser$1$1.versions<"u"&&typeof browser$1$1.versions.node<"u");ENV$1.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ENV$1.registerFlag("PROD",()=>!1);ENV$1.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ENV$1.getBool("DEBUG"));ENV$1.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ENV$1.registerFlag("IS_TEST",()=>!1);ENV$1.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function inferShape(Xe,Ke){let Ye=Xe;if(isTypedArray$3(Xe))return Ke==="string"?[]:[Xe.length];if(!Array.isArray(Xe))return[];const Je=[];for(;Array.isArray(Ye)||isTypedArray$3(Ye)&&Ke!=="string";)Je.push(Ye.length),Ye=Ye[0];return Array.isArray(Xe)&&env().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&deepAssertShapeConsistency(Xe,Je,[]),Je}function deepAssertShapeConsistency(Xe,Ke,Ye){if(Ye=Ye||[],!Array.isArray(Xe)&&!isTypedArray$3(Xe)){assert$2(Ke.length===0,()=>`Element arr[${Ye.join("][")}] is a primitive, but should be an array/TypedArray of ${Ke[0]} elements`);return}assert$2(Ke.length>0,()=>`Element arr[${Ye.join("][")}] should be a primitive, but is an array of ${Xe.length} elements`),assert$2(Xe.length===Ke[0],()=>`Element arr[${Ye.join("][")}] should have ${Ke[0]} elements, but has ${Xe.length} elements`);const Je=Ke.slice(1);for(let tt=0;tt<Xe.length;++tt)deepAssertShapeConsistency(Xe[tt],Je,Ye.concat(tt))}function assertDtype(Xe,Ke,Ye,Je){if(Xe!=="string_or_numeric"){if(Xe==null)throw new Error("Expected dtype cannot be null.");if(Xe!=="numeric"&&Xe!==Ke||Xe==="numeric"&&Ke==="string")throw new Error(`Argument '${Ye}' passed to '${Je}' must be ${Xe} tensor, but got ${Ke} tensor`)}}function convertToTensor(Xe,Ke,Ye,Je="numeric"){if(Xe instanceof Tensor)return assertDtype(Je,Xe.dtype,Ke,Ye),Xe;let tt=inferDtype(Xe);if(tt!=="string"&&["bool","int32","float32"].indexOf(Je)>=0&&(tt=Je),assertDtype(Je,tt,Ke,Ye),Xe==null||!isTypedArray$3(Xe)&&!Array.isArray(Xe)&&typeof Xe!="number"&&typeof Xe!="boolean"&&typeof Xe!="string"){const ot=Xe==null?"null":Xe.constructor.name;throw new Error(`Argument '${Ke}' passed to '${Ye}' must be a Tensor or TensorLike, but got '${ot}'`)}const st=inferShape(Xe,tt);!isTypedArray$3(Xe)&&!Array.isArray(Xe)&&(Xe=[Xe]);const it=tt!=="string"?toTypedArray(Xe,tt):flatten$2(Xe,[],!0);return ENGINE.makeTensor(it,st,tt)}function convertToTensorArray(Xe,Ke,Ye,Je="numeric"){if(!Array.isArray(Xe))throw new Error(`Argument ${Ke} passed to ${Ye} must be a \`Tensor[]\` or \`TensorLike[]\``);return Xe.map((st,rt)=>convertToTensor(st,`${Ke}[${rt}]`,Ye,Je))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OP_SCOPE_SUFFIX="__op";function op(Xe){const Ke=Object.keys(Xe);if(Ke.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${Ke.length} keys.`);let Ye=Ke[0];const Je=Xe[Ye];Ye.endsWith("_")&&(Ye=Ye.substring(0,Ye.length-1)),Ye=Ye+OP_SCOPE_SUFFIX;const tt=(...st)=>{ENGINE.startScope(Ye);try{const rt=Je(...st);return isPromise(rt)&&console.error("Cannot return a Promise inside of tidy."),ENGINE.endScope(rt),rt}catch(rt){throw ENGINE.endScope(null),rt}};return Object.defineProperty(tt,"name",{value:Ye,configurable:!0}),tt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function complex_(Xe,Ke){const Ye=convertToTensor(Xe,"real","complex"),Je=convertToTensor(Ke,"imag","complex");assertShapesMatch(Ye.shape,Je.shape,`real and imag shapes, ${Ye.shape} and ${Je.shape}, must match in call to tf.complex().`);const tt={real:Ye,imag:Je};return ENGINE.runKernel(Complex,tt)}const complex$2=op({complex_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function makeTensor(Xe,Ke,Ye,Je){if(Je==null&&(Je=inferDtype(Xe)),Je==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!isTypedArray$3(Xe)&&!Array.isArray(Xe)&&typeof Xe!="number"&&typeof Xe!="boolean"&&typeof Xe!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(Ke!=null){assertNonNegativeIntegerDimensions(Ke);const tt=sizeFromShape(Ke),st=sizeFromShape(Ye);assert$2(tt===st,()=>`Based on the provided shape, [${Ke}], the tensor should have ${tt} values but has ${st}`);for(let rt=0;rt<Ye.length;++rt){const it=Ye[rt],ot=rt===Ye.length-1?it!==sizeFromShape(Ke.slice(rt)):!0;assert$2(Ye[rt]===Ke[rt]||!ot,()=>`Error creating a new Tensor. Inferred shape (${Ye}) does not match the provided shape (${Ke}). `)}}return!isTypedArray$3(Xe)&&!Array.isArray(Xe)&&(Xe=[Xe]),Ke=Ke||Ye,Xe=Je!=="string"?toTypedArray(Xe,Je):flatten$2(Xe,[],!0),ENGINE.makeTensor(Xe,Ke,Je)}const NUM_BYTES_STRING_LENGTH=4;async function encodeWeights(Xe,Ke){const Ye=[],Je=[],tt=Array.isArray(Xe)?Xe.map(rt=>rt.name):Object.keys(Xe);for(let rt=0;rt<tt.length;++rt){const it=tt[rt],ot=Array.isArray(Xe)?Xe[rt].tensor:Xe[it];if(ot.dtype!=="float32"&&ot.dtype!=="int32"&&ot.dtype!=="bool"&&ot.dtype!=="string"&&ot.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${it}': ${ot.dtype}`);const at={name:it,shape:ot.shape,dtype:ot.dtype};if(ot.dtype==="string"){const lt=new Promise(async ut=>{const ht=await ot.bytes(),pt=ht.reduce((vt,At)=>vt+At.length,0)+NUM_BYTES_STRING_LENGTH*ht.length,ft=new Uint8Array(pt);let xt=0;for(let vt=0;vt<ht.length;vt++){const At=ht[vt],Et=new Uint8Array(new Uint32Array([At.length]).buffer);ft.set(Et,xt),xt+=NUM_BYTES_STRING_LENGTH,ft.set(At,xt),xt+=At.length}ut(ft)});Je.push(lt)}else Je.push(ot.data());Ke!=null&&(at.group=Ke),Ye.push(at)}const st=await Promise.all(Je);return{data:concatenateTypedArrays(st),specs:Ye}}function concatenateTypedArrays(Xe){if(Xe===null)throw new Error(`Invalid input value: ${JSON.stringify(Xe)}`);let Ke=0;const Ye=[];Xe.forEach(st=>{if(Ke+=st.byteLength,Ye.push(st.byteLength===st.buffer.byteLength?st:new st.constructor(st)),!(st instanceof Float32Array||st instanceof Int32Array||st instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${st.constructor.name}`)});const Je=new Uint8Array(Ke);let tt=0;return Ye.forEach(st=>{Je.set(new Uint8Array(st.buffer),tt),tt+=st.byteLength}),Je.buffer}const useNodeBuffer=typeof Buffer$2<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function stringByteLength(Xe){return useNodeBuffer?Buffer$2.byteLength(Xe):new Blob([Xe]).size}function arrayBufferToBase64String(Xe){if(useNodeBuffer)return Buffer$2.from(Xe).toString("base64");const Ke=new Uint8Array(Xe);let Ye="";for(let Je=0,tt=Ke.length;Je<tt;Je++)Ye+=String.fromCharCode(Ke[Je]);return btoa(Ye)}function base64StringToArrayBuffer(Xe){if(useNodeBuffer){const Je=Buffer$2.from(Xe,"base64");return Je.buffer.slice(Je.byteOffset,Je.byteOffset+Je.byteLength)}const Ke=atob(Xe),Ye=new Uint8Array(Ke.length);for(let Je=0;Je<Ke.length;++Je)Ye.set([Ke.charCodeAt(Je)],Je);return Ye.buffer}function concatenateArrayBuffers(Xe){if(Xe.length===1)return Xe[0];let Ke=0;Xe.forEach(tt=>{Ke+=tt.byteLength});const Ye=new Uint8Array(Ke);let Je=0;return Xe.forEach(tt=>{Ye.set(new Uint8Array(tt),Je),Je+=tt.byteLength}),Ye.buffer}function getModelArtifactsInfoForJSON(Xe){if(Xe.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:Xe.modelTopology==null?0:stringByteLength(JSON.stringify(Xe.modelTopology)),weightSpecsBytes:Xe.weightSpecs==null?0:stringByteLength(JSON.stringify(Xe.weightSpecs)),weightDataBytes:Xe.weightData==null?0:Xe.weightData.byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IORouterRegistry{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return IORouterRegistry.instance==null&&(IORouterRegistry.instance=new IORouterRegistry),IORouterRegistry.instance}static registerSaveRouter(Ke){IORouterRegistry.getInstance().saveRouters.push(Ke)}static registerLoadRouter(Ke){IORouterRegistry.getInstance().loadRouters.push(Ke)}static getSaveHandlers(Ke){return IORouterRegistry.getHandlers(Ke,"save")}static getLoadHandlers(Ke,Ye){return IORouterRegistry.getHandlers(Ke,"load",Ye)}static getHandlers(Ke,Ye,Je){const tt=[];return(Ye==="load"?IORouterRegistry.getInstance().loadRouters:IORouterRegistry.getInstance().saveRouters).forEach(rt=>{const it=rt(Ke,Je);it!==null&&tt.push(it)}),tt}}const getSaveHandlers=Xe=>IORouterRegistry.getSaveHandlers(Xe);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DATABASE_NAME="tensorflowjs",DATABASE_VERSION=1,MODEL_STORE_NAME="models_store",INFO_STORE_NAME="model_info_store";function getIndexedDBFactory(){if(!env().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const Xe=typeof window>"u"?self:window,Ke=Xe.indexedDB||Xe.mozIndexedDB||Xe.webkitIndexedDB||Xe.msIndexedDB||Xe.shimIndexedDB;if(Ke==null)throw new Error("The current browser does not appear to support IndexedDB.");return Ke}function setUpDatabase(Xe){const Ke=Xe.result;Ke.createObjectStore(MODEL_STORE_NAME,{keyPath:"modelPath"}),Ke.createObjectStore(INFO_STORE_NAME,{keyPath:"modelPath"})}class BrowserIndexedDB{constructor(Ke){if(this.indexedDB=getIndexedDBFactory(),Ke==null||!Ke)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=Ke}async save(Ke){if(Ke.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,Ke)}async load(){return this.databaseAction(this.modelPath)}databaseAction(Ke,Ye){return new Promise((Je,tt)=>{const st=this.indexedDB.open(DATABASE_NAME,DATABASE_VERSION);st.onupgradeneeded=()=>setUpDatabase(st),st.onsuccess=()=>{const rt=st.result;if(Ye==null){const it=rt.transaction(MODEL_STORE_NAME,"readonly"),at=it.objectStore(MODEL_STORE_NAME).get(this.modelPath);at.onsuccess=()=>{if(at.result==null)return rt.close(),tt(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));Je(at.result.modelArtifacts)},at.onerror=lt=>(rt.close(),tt(at.error)),it.oncomplete=()=>rt.close()}else{const it=getModelArtifactsInfoForJSON(Ye),ot=rt.transaction(INFO_STORE_NAME,"readwrite");let at=ot.objectStore(INFO_STORE_NAME);const lt=at.put({modelPath:this.modelPath,modelArtifactsInfo:it});let ut;lt.onsuccess=()=>{ut=rt.transaction(MODEL_STORE_NAME,"readwrite");const pt=ut.objectStore(MODEL_STORE_NAME).put({modelPath:this.modelPath,modelArtifacts:Ye,modelArtifactsInfo:it});pt.onsuccess=()=>Je({modelArtifactsInfo:it}),pt.onerror=ft=>{at=ot.objectStore(INFO_STORE_NAME);const xt=at.delete(this.modelPath);xt.onsuccess=()=>(rt.close(),tt(pt.error)),xt.onerror=vt=>(rt.close(),tt(pt.error))}},lt.onerror=ht=>(rt.close(),tt(lt.error)),ot.oncomplete=()=>{ut==null?rt.close():ut.oncomplete=()=>rt.close()}}},st.onerror=rt=>tt(st.error)})}}BrowserIndexedDB.URL_SCHEME="indexeddb://";const indexedDBRouter=Xe=>env().getBool("IS_BROWSER")&&!Array.isArray(Xe)&&Xe.startsWith(BrowserIndexedDB.URL_SCHEME)?browserIndexedDB(Xe.slice(BrowserIndexedDB.URL_SCHEME.length)):null;IORouterRegistry.registerSaveRouter(indexedDBRouter);IORouterRegistry.registerLoadRouter(indexedDBRouter);function browserIndexedDB(Xe){return new BrowserIndexedDB(Xe)}function maybeStripScheme$1(Xe){return Xe.startsWith(BrowserIndexedDB.URL_SCHEME)?Xe.slice(BrowserIndexedDB.URL_SCHEME.length):Xe}class BrowserIndexedDBManager{constructor(){this.indexedDB=getIndexedDBFactory()}async listModels(){return new Promise((Ke,Ye)=>{const Je=this.indexedDB.open(DATABASE_NAME,DATABASE_VERSION);Je.onupgradeneeded=()=>setUpDatabase(Je),Je.onsuccess=()=>{const tt=Je.result,st=tt.transaction(INFO_STORE_NAME,"readonly"),it=st.objectStore(INFO_STORE_NAME).getAll();it.onsuccess=()=>{const ot={};for(const at of it.result)ot[at.modelPath]=at.modelArtifactsInfo;Ke(ot)},it.onerror=ot=>(tt.close(),Ye(it.error)),st.oncomplete=()=>tt.close()},Je.onerror=tt=>Ye(Je.error)})}async removeModel(Ke){return Ke=maybeStripScheme$1(Ke),new Promise((Ye,Je)=>{const tt=this.indexedDB.open(DATABASE_NAME,DATABASE_VERSION);tt.onupgradeneeded=()=>setUpDatabase(tt),tt.onsuccess=()=>{const st=tt.result,rt=st.transaction(INFO_STORE_NAME,"readwrite"),it=rt.objectStore(INFO_STORE_NAME),ot=it.get(Ke);let at;ot.onsuccess=()=>{if(ot.result==null)return st.close(),Je(new Error(`Cannot find model with path '${Ke}' in IndexedDB.`));{const lt=it.delete(Ke),ut=()=>{at=st.transaction(MODEL_STORE_NAME,"readwrite");const pt=at.objectStore(MODEL_STORE_NAME).delete(Ke);pt.onsuccess=()=>Ye(ot.result.modelArtifactsInfo),pt.onerror=ft=>Je(ot.error)};lt.onsuccess=ut,lt.onerror=ht=>(ut(),st.close(),Je(ot.error))}},ot.onerror=lt=>(st.close(),Je(ot.error)),rt.oncomplete=()=>{at==null?st.close():at.oncomplete=()=>st.close()}},tt.onerror=st=>Je(tt.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PATH_SEPARATOR="/",PATH_PREFIX="tensorflowjs_models",INFO_SUFFIX="info",MODEL_TOPOLOGY_SUFFIX="model_topology",WEIGHT_SPECS_SUFFIX="weight_specs",WEIGHT_DATA_SUFFIX="weight_data",MODEL_METADATA_SUFFIX="model_metadata";function getModelKeys(Xe){return{info:[PATH_PREFIX,Xe,INFO_SUFFIX].join(PATH_SEPARATOR),topology:[PATH_PREFIX,Xe,MODEL_TOPOLOGY_SUFFIX].join(PATH_SEPARATOR),weightSpecs:[PATH_PREFIX,Xe,WEIGHT_SPECS_SUFFIX].join(PATH_SEPARATOR),weightData:[PATH_PREFIX,Xe,WEIGHT_DATA_SUFFIX].join(PATH_SEPARATOR),modelMetadata:[PATH_PREFIX,Xe,MODEL_METADATA_SUFFIX].join(PATH_SEPARATOR)}}function getModelPathFromKey(Xe){const Ke=Xe.split(PATH_SEPARATOR);if(Ke.length<3)throw new Error(`Invalid key format: ${Xe}`);return Ke.slice(1,Ke.length-1).join(PATH_SEPARATOR)}function maybeStripScheme(Xe){return Xe.startsWith(BrowserLocalStorage.URL_SCHEME)?Xe.slice(BrowserLocalStorage.URL_SCHEME.length):Xe}class BrowserLocalStorage{constructor(Ke){if(!env().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,Ke==null||!Ke)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=Ke,this.keys=getModelKeys(this.modelPath)}async save(Ke){if(Ke.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const Ye=JSON.stringify(Ke.modelTopology),Je=JSON.stringify(Ke.weightSpecs),tt=getModelArtifactsInfoForJSON(Ke);try{this.LS.setItem(this.keys.info,JSON.stringify(tt)),this.LS.setItem(this.keys.topology,Ye),this.LS.setItem(this.keys.weightSpecs,Je),this.LS.setItem(this.keys.weightData,arrayBufferToBase64String(Ke.weightData));const st={format:Ke.format,generatedBy:Ke.generatedBy,convertedBy:Ke.convertedBy};return Ke.signature!=null&&(st.signature=Ke.signature),Ke.userDefinedMetadata!=null&&(st.userDefinedMetadata=Ke.userDefinedMetadata),Ke.modelInitializer!=null&&(st.modelInitializer=Ke.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(st)),{modelArtifactsInfo:tt}}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${tt.modelTopologyBytes}, weightSpecsBytes=${tt.weightSpecsBytes}, weightDataBytes=${tt.weightDataBytes}.`)}}}async load(){const Ke=JSON.parse(this.LS.getItem(this.keys.info));if(Ke==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(Ke.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const Ye={},Je=JSON.parse(this.LS.getItem(this.keys.topology));if(Je==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);Ye.modelTopology=Je;const tt=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(tt==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);Ye.weightSpecs=tt;const st=this.LS.getItem(this.keys.modelMetadata);if(st!=null){const it=JSON.parse(st);Ye.format=it.format,Ye.generatedBy=it.generatedBy,Ye.convertedBy=it.convertedBy,it.signature!=null&&(Ye.signature=it.signature),it.userDefinedMetadata!=null&&(Ye.userDefinedMetadata=it.userDefinedMetadata),it.modelInitializer!=null&&(Ye.modelInitializer=it.modelInitializer)}const rt=this.LS.getItem(this.keys.weightData);if(rt==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return Ye.weightData=base64StringToArrayBuffer(rt),Ye}}BrowserLocalStorage.URL_SCHEME="localstorage://";const localStorageRouter=Xe=>env().getBool("IS_BROWSER")&&!Array.isArray(Xe)&&Xe.startsWith(BrowserLocalStorage.URL_SCHEME)?browserLocalStorage(Xe.slice(BrowserLocalStorage.URL_SCHEME.length)):null;IORouterRegistry.registerSaveRouter(localStorageRouter);IORouterRegistry.registerLoadRouter(localStorageRouter);function browserLocalStorage(Xe){return new BrowserLocalStorage(Xe)}class BrowserLocalStorageManager{constructor(){assert$2(env().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),assert$2(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const Ke={},Ye=PATH_PREFIX+PATH_SEPARATOR,Je=PATH_SEPARATOR+INFO_SUFFIX;for(let tt=0;tt<this.LS.length;++tt){const st=this.LS.key(tt);if(st.startsWith(Ye)&&st.endsWith(Je)){const rt=getModelPathFromKey(st);Ke[rt]=JSON.parse(this.LS.getItem(st))}}return Ke}async removeModel(Ke){Ke=maybeStripScheme(Ke);const Ye=getModelKeys(Ke);if(this.LS.getItem(Ye.info)==null)throw new Error(`Cannot find model at path '${Ke}'`);const Je=JSON.parse(this.LS.getItem(Ye.info));return this.LS.removeItem(Ye.info),this.LS.removeItem(Ye.topology),this.LS.removeItem(Ye.weightSpecs),this.LS.removeItem(Ye.weightData),Je}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const URL_SCHEME_SUFFIX="://";class ModelStoreManagerRegistry{constructor(){this.managers={}}static getInstance(){return ModelStoreManagerRegistry.instance==null&&(ModelStoreManagerRegistry.instance=new ModelStoreManagerRegistry),ModelStoreManagerRegistry.instance}static registerManager(Ke,Ye){assert$2(Ke!=null,()=>"scheme must not be undefined or null."),Ke.endsWith(URL_SCHEME_SUFFIX)&&(Ke=Ke.slice(0,Ke.indexOf(URL_SCHEME_SUFFIX))),assert$2(Ke.length>0,()=>"scheme must not be an empty string.");const Je=ModelStoreManagerRegistry.getInstance();assert$2(Je.managers[Ke]==null,()=>`A model store manager is already registered for scheme '${Ke}'.`),Je.managers[Ke]=Ye}static getManager(Ke){const Ye=this.getInstance().managers[Ke];if(Ye==null)throw new Error(`Cannot find model manager for scheme '${Ke}'`);return Ye}static getSchemes(){return Object.keys(this.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PlatformBrowser{fetch(Ke,Ye){return fetch(Ke,Ye)}now(){return performance.now()}encode(Ke,Ye){if(Ye!=="utf-8"&&Ye!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${Ye}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(Ke)}decode(Ke,Ye){return new TextDecoder(Ye).decode(Ke)}}if(env().get("IS_BROWSER")){env().setPlatform("browser",new PlatformBrowser);try{ModelStoreManagerRegistry.registerManager(BrowserLocalStorage.URL_SCHEME,new BrowserLocalStorageManager)}catch{}try{ModelStoreManagerRegistry.registerManager(BrowserIndexedDB.URL_SCHEME,new BrowserIndexedDBManager)}catch{}}const getNodeFetch={importFetch:()=>require$$0$1};let systemFetch;class PlatformNode{constructor(){this.util=require$$1$1,this.textEncoder=new this.util.TextEncoder}fetch(Ke,Ye){return env().global.fetch!=null?env().global.fetch(Ke,Ye):(systemFetch==null&&(systemFetch=getNodeFetch.importFetch()),systemFetch(Ke,Ye))}now(){const Ke=browser$1$1.hrtime();return Ke[0]*1e3+Ke[1]/1e6}encode(Ke,Ye){if(Ye!=="utf-8"&&Ye!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${Ye}`);return this.textEncoder.encode(Ke)}decode(Ke,Ye){return Ke.length===0?"":new this.util.TextDecoder(Ye).decode(Ke)}}env().get("IS_NODE")&&env().setPlatform("node",new PlatformNode);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function buffer$1(Xe,Ke="float32",Ye){return Ke=Ke||"float32",assertNonNegativeIntegerDimensions(Xe),new TensorBuffer(Xe,Ke,Ye)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cast_(Xe,Ke){const Ye=convertToTensor(Xe,"x","cast");if(!isValidDtype(Ke))throw new Error(`Failed to cast to unknown dtype ${Ke}`);if(Ke==="string"&&Ye.dtype!=="string"||Ke!=="string"&&Ye.dtype==="string")throw new Error("Only strings can be casted to strings");const Je={x:Ye},tt={dtype:Ke};return ENGINE.runKernel(Cast,Je,tt)}const cast$3=op({cast_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function clone_(Xe){const Ye={x:convertToTensor(Xe,"x","clone","string_or_numeric")};return ENGINE.runKernel(Identity$1,Ye)}const clone$1=op({clone_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function print(Xe,Ke=!1){console.log(Xe.toString(Ke))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getOrMakeEngine();const opHandler={buffer:buffer$1,cast:cast$3,clone:clone$1,print};setOpHandler(opHandler);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function matMul_(Xe,Ke,Ye=!1,Je=!1){let tt=convertToTensor(Xe,"a","matMul"),st=convertToTensor(Ke,"b","matMul");[tt,st]=makeTypesMatch(tt,st);const rt={a:tt,b:st},it={transposeA:Ye,transposeB:Je};return ENGINE.runKernel(BatchMatMul,rt,it)}const matMul$1=op({matMul_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oneHot_(Xe,Ke,Ye=1,Je=0){if(Ke<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${Ke}`);const st={indices:convertToTensor(Xe,"indices","oneHot","int32")},rt={depth:Ke,onValue:Ye,offValue:Je};return ENGINE.runKernel(OneHot,st,rt)}const oneHot$2=op({oneHot_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transpose_(Xe,Ke){const Ye=convertToTensor(Xe,"x","transpose");if(Ke==null&&(Ke=Ye.shape.map((st,rt)=>rt).reverse()),assert$2(Ye.rank===Ke.length,()=>`Error in transpose: rank of input ${Ye.rank} must match length of perm ${Ke}.`),Ke.forEach(st=>{assert$2(st>=0&&st<Ye.rank,()=>`All entries in 'perm' must be between 0 and ${Ye.rank-1} but got ${Ke}`)}),Ye.rank<=1)return Ye.clone();const Je={x:Ye},tt={perm:Ke};return ENGINE.runKernel(Transpose,Je,tt)}const transpose$2=op({transpose_});function prepareAndValidate(Xe,Ke){const Ye=Xe.shape.length,Je=Ke.shape.length;if(Ye<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${Ye}.`);if(Je<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${Je}.`);if(Ke.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${Ke.dtype}.`);if(Ke.shape[Je-1]>Ye)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${Ke.shape[Je-1]} vs. ${Ye}`);if(sizeFromShape(Xe.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${Xe.shape}.`);const tt=Ke.shape,st=tt[tt.length-1];let rt=1;for(let ut=0;ut<tt.length-1;++ut)rt*=tt[ut];const it=Xe.shape,ot=tt.slice();ot.pop();let at=1;for(let ut=st;ut<Ye;++ut)at*=it[ut],ot.push(it[ut]);const lt=[...computeStrides(Xe.shape).map(ut=>ut/at),1].slice(0,st);return[ot,rt,at,lt]}function validateUpdateShape(Xe,Ke,Ye){const Je=Ke.rank>1?Ke.shape[Ke.rank-1]:1,tt=Ke.rank>1?Ke.rank-1:1,st=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${Ye.shape}, indices.shape: ${Ke.shape}, shape: ${Xe}, sliceDim: ${Je}, and batchDim: ${tt}.`;if(Ye.rank<tt)throw new Error(st+` update.rank < ${tt}. `);if(Xe.length<Je+(Ye.rank-tt))throw new Error(st+` Output shape length < ${Je+(Ye.rank-tt)}`);if(Ye.rank!==tt+Xe.length-Je)throw new Error(st+` update.rank != ${tt+Xe.length-Je}`);for(let rt=0;rt<tt;++rt)if(Ye.shape[rt]!==Ke.shape[rt])throw new Error(st+` updates.shape[${rt}] (${Ye.shape[rt]}) != indices.shape[${rt}] (${Ke.shape[rt]}).`);for(let rt=0;rt<Ye.rank-tt;++rt)if(Ye.shape[rt+tt]!==Xe[rt+Je])throw new Error(st+` updates.shape[${rt+tt}] (${Ye.shape[rt+tt]}) != shape[${rt+tt}] (${Xe[rt+tt]})`)}function validateInput(Xe,Ke,Ye){if(Ke.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${Ke.rank}.`);if(Xe.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${Xe.rank}.`);if(Ke.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${Ke.dtype}`);if(Ye.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${Ye}`);if(Ye.length===0){if(Ke.size===0)throw new Error(`Indices specified for empty output. indices shape: ${Ke.shape}`);if(Xe.size===0)throw new Error(`Updates specified for empty output. updates shape: ${Xe.shape}`)}validateUpdateShape(Ye,Ke,Xe)}function calculateShapes(Xe,Ke,Ye){const Je=Ke.shape.length,tt=Je>1?Ke.shape[Je-1]:1,st=Ye.length;let rt=1;for(let ut=tt;ut<st;++ut)rt*=Ye[ut];const it=tt<1?1:tt,ot=sizeFromShape(Ke.shape)/it,at=[...computeStrides(Ye.slice(0,tt)),1],lt=sizeFromShape(Ye);return{sliceRank:tt,numUpdates:ot,sliceSize:rt,strides:at,outputSize:lt}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function assertParamsValid(Xe,Ke,Ye){const Je=Xe.shape.length;assert$2(Je===Ke.length,()=>`Error in slice${Je}D: Length of begin ${Ke} must match the rank of the array (${Je}).`),assert$2(Je===Ye.length,()=>`Error in slice${Je}D: Length of size ${Ye} must match the rank of the array (${Je}).`);for(let tt=0;tt<Je;++tt)assert$2(Ke[tt]+Ye[tt]<=Xe.shape[tt],()=>`Error in slice${Je}D: begin[${tt}] + size[${tt}] (${Ke[tt]+Ye[tt]}) would overflow input.shape[${tt}] (${Xe.shape[tt]})`)}function maskToAxes(Xe){const Ke=[];let Ye=0;for(;Xe>0;)Xe&1&&Ke.push(Ye),Xe/=2,Ye++;return Ke}function computeOutShape$2(Xe,Ke,Ye){const Je=[];for(let tt=0;tt<Xe.length;tt++)Je[tt]=Math.ceil((Ke[tt]-Xe[tt])/Ye[tt]);return Je}function stridesWithElidedDims(Xe,Ke,Ye,Je){const tt=[...Xe];for(let st=tt.length;st<Je.length;st++)tt.push(1);for(let st=0;st<Ye;st++)st===0?tt[Ke]=1:(tt.splice(Ke,0,1),tt.pop());return tt}function unnormalizeAxis(Xe,Ke,Ye){return Ye<=Xe?Ye:Ye-(Ke-1)}function getElidedAxes(Xe,Ke){const Ye=[];for(let Je=0;Je<Xe;Je++)Ye.push(Ke+Je);return Ye}function getNormalizedAxes(Xe,Ke,Ye,Je,tt,st,rt,it,ot){const at=Xe.length;let lt=new Array(at),ut=new Array(at),ht=new Array(at);if(Ke.length&&Ye>0){const pt=Ke[0],ft=Ye+1;lt=startIndicesWithElidedDims(rt,pt,ft,Je,Xe),ut=stopIndicesWithElidedDims(it,pt,ft,tt,Xe),ht=stridesWithElidedDims(st,pt,ft,Xe)}else for(let pt=0;pt<at;pt++)lt[pt]=startForAxis(rt,Je,st,Xe,pt,ot),ut[pt]=stopForAxis(it,tt,st,Xe,pt,ot),ht[pt]=stridesForAxis(st,pt,ot);return{begin:lt,end:ut,strides:ht}}function startIndicesWithElidedDims(Xe,Ke,Ye,Je,tt){const st=[...tt],rt=getElidedAxes(Ye,Ke);for(let it=0;it<st.length;it++)if(rt.indexOf(it)>-1)st[it]=0;else{const ot=unnormalizeAxis(Ke,Ye,it);let at=Je[ot];Xe&1<<ot&&(at=0),st[it]=at}return st}function stopIndicesWithElidedDims(Xe,Ke,Ye,Je,tt){const st=[...tt],rt=getElidedAxes(Ye,Ke);for(let it=0;it<st.length;it++)if(rt.indexOf(it)>-1)st[it]=Number.MAX_SAFE_INTEGER;else{const ot=unnormalizeAxis(Ke,Ye,it);let at=Je[ot];Xe&1<<ot&&(at=Number.MAX_SAFE_INTEGER),st[it]=at}for(let it=0;it<st.length;it++){const ot=tt[it];st[it]<0&&(st[it]+=ot),st[it]=clamp$1(0,st[it],tt[it])}return st}function stridesForAxis(Xe,Ke,Ye){let Je=Xe[Ke];return(Ye&1<<Ke||Je==null)&&(Je=1),Je}function startForAxis(Xe,Ke,Ye,Je,tt,st){let rt=Ke[tt];const it=Ye[tt]||1;(Xe&1<<tt||st&1<<tt||rt==null)&&(it>0?rt=Number.MIN_SAFE_INTEGER:rt=Number.MAX_SAFE_INTEGER);const ot=Je[tt];return rt<0&&(rt+=ot),rt=clamp$1(0,rt,ot-1),rt}function stopForAxis(Xe,Ke,Ye,Je,tt,st){let rt=Ke[tt];const it=Ye[tt]||1;(Xe&1<<tt||st&1<<tt||rt==null)&&(it>0?rt=Number.MAX_SAFE_INTEGER:rt=Number.MIN_SAFE_INTEGER);const ot=Je[tt];return rt<0&&(rt+=ot),it>0?rt=clamp$1(0,rt,ot):rt=clamp$1(-1,rt,ot-1),rt}function isSliceContinous(Xe,Ke,Ye){let Je=Ye.length;for(let tt=0;tt<Ye.length;tt++)if(Ye[tt]>1){Je=tt;break}for(let tt=Je+1;tt<Ye.length;tt++)if(Ke[tt]>0||Ye[tt]!==Xe[tt])return!1;return!0}function computeFlatOffset(Xe,Ke){let Ye=Xe.length>0?Xe[Xe.length-1]:1;for(let Je=0;Je<Xe.length-1;Je++)Ye+=Xe[Je]*Ke[Je];return Ye}function parseSliceParams(Xe,Ke,Ye){let Je;const tt=Xe.shape.length;typeof Ke=="number"?Je=[Ke,...new Array(tt-1).fill(0)]:Ke.length<tt?Je=Ke.concat(new Array(tt-Ke.length).fill(0)):Je=Ke.slice(),Je.forEach(rt=>{assert$2(rt!==-1,()=>"slice() does not support negative begin indexing.")});let st;return Ye==null?st=new Array(tt).fill(-1):typeof Ye=="number"?st=[Ye,...new Array(tt-1).fill(-1)]:Ye.length<tt?st=Ye.concat(new Array(tt-Ye.length).fill(-1)):st=Ye,st=st.map((rt,it)=>rt>=0?rt:(assert$2(rt===-1,()=>`Negative size values should be exactly -1 but got ${rt} for the slice() size at index ${it}.`),Xe.shape[it]-Je[it])),[Je,st]}function sliceInfo(Xe,Ke,Ye,Je,tt,st,rt,it,ot){let at=Ke.slice(),lt=Ye.slice(),ut=Je;Je==null&&(ut=new Array(at.length));const ht=maskToAxes(rt);if(ht.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(rt!==0&&it!==0)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(rt!==0&&ot!==0)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const pt=Xe.length-at.length,ft=maskToAxes(it),xt=Xe.slice();ft.forEach(St=>{at[St]=0,lt[St]=1,xt.splice(St,0,1)});const{begin:vt,end:At,strides:Et}=getNormalizedAxes(xt,ht,pt,at,lt,ut,tt,st,rt);at=vt,lt=At,ut=Et;const wt=maskToAxes(ot);wt.forEach(St=>{lt[St]=at[St]+1,ut[St]=1});const _t=computeOutShape$2(at,lt,ut),Ct=_t.filter((St,Rt)=>wt.indexOf(Rt)===-1);return{nonStrided:ut.every(St=>St===1),$begin:at,$end:lt,$strides:ut,size:_t,newShape:xt,outShape:Ct}}const slice_util=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid,computeFlatOffset,computeOutShape:computeOutShape$2,getNormalizedAxes,isSliceContinous,maskToAxes,parseSliceParams,sliceInfo,startForAxis,startIndicesWithElidedDims,stopForAxis,stopIndicesWithElidedDims,stridesForAxis,stridesWithElidedDims},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Serializable{getClassName(){return this.constructor.className}static fromConfig(Ke,Ye){return new Ke(Ye)}}class SerializationMap{constructor(){this.classNameMap={}}static getMap(){return SerializationMap.instance==null&&(SerializationMap.instance=new SerializationMap),SerializationMap.instance}static register(Ke){SerializationMap.getMap().classNameMap[Ke.className]=[Ke,Ke.fromConfig]}}function registerClass(Xe){assert$2(Xe.className!=null,()=>"Class being registered does not have the static className property defined."),assert$2(typeof Xe.className=="string",()=>"className is required to be a string, but got type "+typeof Xe.className),assert$2(Xe.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),SerializationMap.register(Xe)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function deprecationWarn(Xe){env().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(Xe+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function engine(){return ENGINE}function memory(){return ENGINE.memory()}function tidy(Xe,Ke){return ENGINE.tidy(Xe,Ke)}function dispose(Xe){getTensorsInContainer(Xe).forEach(Ye=>Ye.dispose())}function keep(Xe){return ENGINE.keep(Xe)}function registerBackend(Xe,Ke,Ye=1){return ENGINE.registerBackend(Xe,Ke,Ye)}function backend(){return ENGINE.backend}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function add_(Xe,Ke){let Ye=convertToTensor(Xe,"a","add"),Je=convertToTensor(Ke,"b","add");[Ye,Je]=makeTypesMatch(Ye,Je);const tt={a:Ye,b:Je};return ENGINE.runKernel(Add$2,tt)}const add$1=op({add_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function floorDiv_(Xe,Ke){let Ye=convertToTensor(Xe,"a","floorDiv"),Je=convertToTensor(Ke,"b","floorDiv");[Ye,Je]=makeTypesMatch(Ye,Je);const tt={a:Ye,b:Je};return ENGINE.runKernel(FloorDiv,tt)}const floorDiv$2=op({floorDiv_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function div_(Xe,Ke){let Ye=convertToTensor(Xe,"a","div"),Je=convertToTensor(Ke,"b","div");if([Ye,Je]=makeTypesMatch(Ye,Je),Ye.dtype==="int32"&&Je.dtype==="int32")return floorDiv$2(Ye,Je);const tt={a:Ye,b:Je},st={};return ENGINE.runKernel(RealDiv,tt,st)}const div$1=op({div_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mul_(Xe,Ke){let Ye=convertToTensor(Xe,"a","mul"),Je=convertToTensor(Ke,"b","mul");[Ye,Je]=makeTypesMatch(Ye,Je);const tt={a:Ye,b:Je};return ENGINE.runKernel(Multiply$2,tt)}const mul=op({mul_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function abs_(Xe){const Ke=convertToTensor(Xe,"x","abs");if(Ke.dtype==="complex64"){const Ye={x:Ke};return ENGINE.runKernel(ComplexAbs,Ye)}else{const Ye={x:Ke};return ENGINE.runKernel(Abs$1,Ye)}}const abs$3=op({abs_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function acos_(Xe){const Ye={x:convertToTensor(Xe,"x","acos")};return ENGINE.runKernel(Acos,Ye)}const acos$2=op({acos_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function acosh_(Xe){const Ye={x:convertToTensor(Xe,"x","acosh")};return ENGINE.runKernel(Acosh,Ye)}const acosh$2=op({acosh_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function all_(Xe,Ke=null,Ye=!1){const tt={x:convertToTensor(Xe,"x","all","bool")},st={axis:Ke,keepDims:Ye};return ENGINE.runKernel(All,tt,st)}const all$2=op({all_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function any_(Xe,Ke=null,Ye=!1){const tt={x:convertToTensor(Xe,"x","any","bool")},st={axis:Ke,keepDims:Ye};return ENGINE.runKernel(Any,tt,st)}const any$2=op({any_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMax_(Xe,Ke=0){const Je={x:convertToTensor(Xe,"x","argMax")},tt={axis:Ke};return ENGINE.runKernel(ArgMax,Je,tt)}const argMax$2=op({argMax_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMin_(Xe,Ke=0){const Je={x:convertToTensor(Xe,"x","argMin")},tt={axis:Ke};return ENGINE.runKernel(ArgMin,Je,tt)}const argMin$2=op({argMin_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function asin_(Xe){const Ye={x:convertToTensor(Xe,"x","asin")};return ENGINE.runKernel(Asin,Ye)}const asin$2=op({asin_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function asinh_(Xe){const Ye={x:convertToTensor(Xe,"x","asinh")};return ENGINE.runKernel(Asinh,Ye)}const asinh$2=op({asinh_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function atan_(Xe){const Ye={x:convertToTensor(Xe,"x","atan")};return ENGINE.runKernel(Atan,Ye)}const atan$2=op({atan_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function atan2_(Xe,Ke){let Ye=convertToTensor(Xe,"a","atan2"),Je=convertToTensor(Ke,"b","atan2");[Ye,Je]=makeTypesMatch(Ye,Je);const tt={a:Ye,b:Je};return ENGINE.runKernel(Atan2,tt)}const atan2$2=op({atan2_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function atanh_(Xe){const Ye={x:convertToTensor(Xe,"x","atanh")};return ENGINE.runKernel(Atanh,Ye)}const atanh$2=op({atanh_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function computeDilation2DInfo(Xe,Ke,Ye,Je,tt="NHWC",st){const rt=Xe[3],it=[...Ke,rt],ot=convertConv2DDataFormat(tt);return computeConv2DInfo(Xe,it,Ye,st,Je,null,null,ot)}function computePool2DInfo(Xe,Ke,Ye,Je,tt,st,rt="channelsLast"){const[it,ot]=parseTupleParam(Ke);let at;if(rt==="channelsLast")at=[it,ot,Xe[3],Xe[3]];else if(rt==="channelsFirst")at=[it,ot,Xe[1],Xe[1]];else throw new Error(`Unknown dataFormat ${rt}`);return computeConv2DInfo(Xe,at,Ye,Je,tt,st,!1,rt)}function computePool3DInfo(Xe,Ke,Ye,Je,tt,st,rt="NDHWC"){const[it,ot,at]=parse3TupleParam(Ke);let lt,ut;if(rt==="NDHWC")ut="channelsLast",lt=[it,ot,at,Xe[4],Xe[4]];else if(rt==="NCDHW")ut="channelsFirst",lt=[it,ot,at,Xe[1],Xe[1]];else throw new Error(`Unknown dataFormat ${rt}`);return computeConv3DInfo(Xe,lt,Ye,Je,tt,!1,ut,st)}function computeConv2DInfo(Xe,Ke,Ye,Je,tt,st,rt=!1,it="channelsLast"){let[ot,at,lt,ut]=[-1,-1,-1,-1];if(it==="channelsLast")[ot,at,lt,ut]=Xe;else if(it==="channelsFirst")[ot,ut,at,lt]=Xe;else throw new Error(`Unknown dataFormat ${it}`);const[ht,pt,,ft]=Ke,[xt,vt]=parseTupleParam(Ye),[At,Et]=parseTupleParam(Je),wt=getEffectiveFilterSize(ht,At),_t=getEffectiveFilterSize(pt,Et),{padInfo:Ct,outHeight:Tt,outWidth:St}=getPadAndOutInfo(tt,at,lt,xt,vt,wt,_t,st,it),Rt=rt?ft*ut:ft;let Nt;return it==="channelsFirst"?Nt=[ot,Rt,Tt,St]:it==="channelsLast"&&(Nt=[ot,Tt,St,Rt]),{batchSize:ot,dataFormat:it,inHeight:at,inWidth:lt,inChannels:ut,outHeight:Tt,outWidth:St,outChannels:Rt,padInfo:Ct,strideHeight:xt,strideWidth:vt,filterHeight:ht,filterWidth:pt,effectiveFilterHeight:wt,effectiveFilterWidth:_t,dilationHeight:At,dilationWidth:Et,inShape:Xe,outShape:Nt,filterShape:Ke}}function computeConv3DInfo(Xe,Ke,Ye,Je,tt,st=!1,rt="channelsLast",it){let[ot,at,lt,ut,ht]=[-1,-1,-1,-1,-1];if(rt==="channelsLast")[ot,at,lt,ut,ht]=Xe;else if(rt==="channelsFirst")[ot,ht,at,lt,ut]=Xe;else throw new Error(`Unknown dataFormat ${rt}`);const[pt,ft,xt,,vt]=Ke,[At,Et,wt]=parse3TupleParam(Ye),[_t,Ct,Tt]=parse3TupleParam(Je),St=getEffectiveFilterSize(pt,_t),Rt=getEffectiveFilterSize(ft,Ct),Nt=getEffectiveFilterSize(xt,Tt),{padInfo:Pt,outDepth:Bt,outHeight:Lt,outWidth:zt}=get3DPadAndOutInfo(tt,at,lt,ut,At,Et,wt,St,Rt,Nt,it),Dt=st?vt*ht:vt;let Vt;return rt==="channelsFirst"?Vt=[ot,Dt,Bt,Lt,zt]:rt==="channelsLast"&&(Vt=[ot,Bt,Lt,zt,Dt]),{batchSize:ot,dataFormat:rt,inDepth:at,inHeight:lt,inWidth:ut,inChannels:ht,outDepth:Bt,outHeight:Lt,outWidth:zt,outChannels:Dt,padInfo:Pt,strideDepth:At,strideHeight:Et,strideWidth:wt,filterDepth:pt,filterHeight:ft,filterWidth:xt,effectiveFilterDepth:St,effectiveFilterHeight:Rt,effectiveFilterWidth:Nt,dilationDepth:_t,dilationHeight:Ct,dilationWidth:Tt,inShape:Xe,outShape:Vt,filterShape:Ke}}function computeOutputShape2D(Xe,Ke,Ye,Je,tt){Je==null&&(Je=computeDefaultPad(Xe,Ke,Ye));const st=Xe[0],rt=Xe[1],it=round$4((st-Ke+2*Je)/Ye+1,tt),ot=round$4((rt-Ke+2*Je)/Ye+1,tt);return[it,ot]}function computeOutputShape4D(Xe,Ke,Ye,Je,tt,st){tt==null&&(tt=computeDefaultPad(Xe,Ke,Je));const rt=Xe[0],it=Xe[1],ot=Xe[2],at=round$4((rt-Ke+2*tt)/Je+1,st),lt=round$4((it-Ke+2*tt)/Je+1,st),ut=round$4((ot-Ke+2*tt)/Je+1,st);return[at,lt,ut,Ye]}function computeDefaultPad(Xe,Ke,Ye,Je=1){const tt=getEffectiveFilterSize(Ke,Je);return Math.floor((Xe[0]*(Ye-1)-Ye+tt)/2)}function parseTupleParam(Xe){return typeof Xe=="number"?[Xe,Xe,Xe]:Xe.length===2?[Xe[0],Xe[1],1]:Xe}function parse3TupleParam(Xe){return typeof Xe=="number"?[Xe,Xe,Xe]:Xe}function getEffectiveFilterSize(Xe,Ke){return Ke<=1?Xe:Xe+(Xe-1)*(Ke-1)}function getPadAndOutInfo(Xe,Ke,Ye,Je,tt,st,rt,it,ot){let at,lt,ut;if(typeof Xe=="number"){at={top:Xe,bottom:Xe,left:Xe,right:Xe,type:Xe===0?"VALID":"NUMBER"};const pt=computeOutputShape2D([Ke,Ye],st,Je,Xe,it);lt=pt[0],ut=pt[1]}else if(Xe==="same"){lt=Math.ceil(Ke/Je),ut=Math.ceil(Ye/tt);const ht=Math.max(0,(lt-1)*Je+st-Ke),pt=Math.max(0,(ut-1)*tt+rt-Ye),ft=Math.floor(ht/2),xt=ht-ft,vt=Math.floor(pt/2),At=pt-vt;at={top:ft,bottom:xt,left:vt,right:At,type:"SAME"}}else if(Xe==="valid")at={top:0,bottom:0,left:0,right:0,type:"VALID"},lt=Math.ceil((Ke-st+1)/Je),ut=Math.ceil((Ye-rt+1)/tt);else if(typeof Xe=="object"){const ht=ot==="channelsLast"?Xe[1][0]:Xe[2][0],pt=ot==="channelsLast"?Xe[1][1]:Xe[2][1],ft=ot==="channelsLast"?Xe[2][0]:Xe[3][0],xt=ot==="channelsLast"?Xe[2][1]:Xe[3][1];at={top:ht,bottom:pt,left:ft,right:xt,type:ht===0&&pt===0&&ft===0&&xt===0?"VALID":"EXPLICIT"},lt=round$4((Ke-st+ht+pt)/Je+1,it),ut=round$4((Ye-rt+ft+xt)/tt+1,it)}else throw Error(`Unknown padding parameter: ${Xe}`);return{padInfo:at,outHeight:lt,outWidth:ut}}function get3DPadAndOutInfo(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt){let ut,ht,pt,ft;if(typeof Xe=="number"){ut={top:Xe,bottom:Xe,left:Xe,right:Xe,front:Xe,back:Xe,type:Xe===0?"VALID":"NUMBER"};const vt=computeOutputShape4D([Ke,Ye,Je,1],it,1,tt,Xe,lt);ht=vt[0],pt=vt[1],ft=vt[2]}else if(Xe==="same"){ht=Math.ceil(Ke/tt),pt=Math.ceil(Ye/st),ft=Math.ceil(Je/rt);const xt=(ht-1)*tt+it-Ke,vt=(pt-1)*st+ot-Ye,At=(ft-1)*rt+at-Je,Et=Math.floor(xt/2),wt=xt-Et,_t=Math.floor(vt/2),Ct=vt-_t,Tt=Math.floor(At/2),St=At-Tt;ut={top:_t,bottom:Ct,left:Tt,right:St,front:Et,back:wt,type:"SAME"}}else if(Xe==="valid")ut={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},ht=Math.ceil((Ke-it+1)/tt),pt=Math.ceil((Ye-ot+1)/st),ft=Math.ceil((Je-at+1)/rt);else throw Error(`Unknown padding parameter: ${Xe}`);return{padInfo:ut,outDepth:ht,outHeight:pt,outWidth:ft}}function round$4(Xe,Ke){if(!Ke)return Math.trunc(Xe);switch(Ke){case"round":return Math.round(Xe);case"ceil":return Math.ceil(Xe);case"floor":return Math.floor(Xe);default:throw new Error(`Unknown roundingMode ${Ke}`)}}function tupleValuesAreOne(Xe){const[Ke,Ye,Je]=parseTupleParam(Xe);return Ke===1&&Ye===1&&Je===1}function eitherStridesOrDilationsAreOne(Xe,Ke){return tupleValuesAreOne(Xe)||tupleValuesAreOne(Ke)}function convertConv2DDataFormat(Xe){if(Xe==="NHWC")return"channelsLast";if(Xe==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${Xe}`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reshape_(Xe,Ke){const Je={x:convertToTensor(Xe,"x","reshape","string_or_numeric")},tt={shape:Ke};return ENGINE.runKernel(Reshape$1,Je,tt)}const reshape$2=op({reshape_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool_(Xe,Ke,Ye,Je,tt){const st=convertToTensor(Xe,"x","avgPool","float32"),rt=1;assert$2(eitherStridesOrDilationsAreOne(Ye,rt),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${Ye} and dilations '${rt}'`);let it=st,ot=!1;st.rank===3&&(ot=!0,it=reshape$2(st,[1,st.shape[0],st.shape[1],st.shape[2]])),assert$2(it.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${it.rank}.`),tt!=null&&assert$2(isInt(Je),()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${tt} but got pad ${Je}.`);const at={x:it},lt={filterSize:Ke,strides:Ye,pad:Je,dimRoundingMode:tt};let ut=ENGINE.runKernel(AvgPool,at,lt);return ut=cast$3(ut,st.dtype),ot?reshape$2(ut,[ut.shape[1],ut.shape[2],ut.shape[3]]):ut}const avgPool$2=op({avgPool_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3d_(Xe,Ke,Ye,Je,tt,st="NDHWC",rt){rt==null?rt=[1,1,1]:deprecationWarn("dilations is deprecated, this field will be gone in v3.0.0.");const it=convertToTensor(Xe,"x","avgPool3d","float32");let ot=it,at=!1;it.rank===4&&(at=!0,ot=reshape$2(it,[1,it.shape[0],it.shape[1],it.shape[2],it.shape[3]])),assert$2(ot.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${ot.rank}.`),assert$2(st==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${st}`),assert$2(eitherStridesOrDilationsAreOne(Ye,rt),()=>`Error in avgPool3d: Either strides or dilations must be 1. Got strides ${Ye} and dilations '${rt}'`),tt!=null&&assert$2(isInt(Je),()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${tt} but got pad ${Je}.`);const lt={x:ot},ut={filterSize:Ke,strides:Ye,pad:Je,dimRoundingMode:tt,dataFormat:st,dilations:rt};let ht=ENGINE.runKernel(AvgPool3D,lt,ut);return ht=cast$3(ht,ot.dtype),at?reshape$2(ht,[ht.shape[1],ht.shape[2],ht.shape[3],ht.shape[4]]):ht}const avgPool3d=op({avgPool3d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concat_(Xe,Ke=0){assert$2(Xe.length>=1,()=>"Pass at least one tensor to concat");const Ye=convertToTensorArray(Xe,"tensors","concat","string_or_numeric");if(Ye[0].dtype==="complex64"&&Ye.forEach(st=>{if(st.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${st.dtype}. `)}),Ye.length===1)return clone$1(Ye[0]);const Je=Ye,tt={axis:Ke};return ENGINE.runKernel(Concat,Je,tt)}const concat$2=op({concat_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sigmoid_(Xe){const Ye={x:convertToTensor(Xe,"x","sigmoid")};return ENGINE.runKernel(Sigmoid$1,Ye)}const sigmoid$2=op({sigmoid_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice_(Xe,Ke,Ye){const Je=convertToTensor(Xe,"x","slice","string_or_numeric");if(Je.rank===0)throw new Error("Slicing scalar is not possible");const tt={x:Je},st={begin:Ke,size:Ye};return ENGINE.runKernel(Slice,tt,st)}const slice$4=op({slice_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tanh_(Xe){const Ye={x:convertToTensor(Xe,"x","tanh")};return ENGINE.runKernel(Tanh$1,Ye)}const tanh$2=op({tanh_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchToSpaceND_(Xe,Ke,Ye){const Je=convertToTensor(Xe,"x","batchToSpaceND"),tt=Ke.reduce((it,ot)=>it*ot);assert$2(Je.rank>=1+Ke.length,()=>`input rank is ${Je.rank} but should be > than blockShape.length ${Ke.length}`),assert$2(Ye.length===Ke.length,()=>`crops.length is ${Ye.length} but should be equal to blockShape.length  ${Ke.length}`),assert$2(Je.shape[0]%tt===0,()=>`input tensor batch is ${Je.shape[0]} but is not divisible by the product of the elements of blockShape ${Ke.join(" * ")} === ${tt}`);const st={x:Je},rt={blockShape:Ke,crops:Ye};return ENGINE.runKernel(BatchToSpaceND,st,rt)}const batchToSpaceND$2=op({batchToSpaceND_});function xAs4D(Xe){let Ke;return Xe.rank===0||Xe.rank===1?Ke=reshape$2(Xe,[1,1,1,Xe.size]):Xe.rank===2?Ke=reshape$2(Xe,[1,1,Xe.shape[0],Xe.shape[1]]):Xe.rank===3?Ke=reshape$2(Xe,[1,Xe.shape[0],Xe.shape[1],Xe.shape[2]]):Ke=Xe,Ke}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchNorm_(Xe,Ke,Ye,Je,tt,st){st==null&&(st=.001);const rt=convertToTensor(Xe,"x","batchNorm"),it=convertToTensor(Ke,"mean","batchNorm"),ot=convertToTensor(Ye,"variance","batchNorm");let at;tt!=null&&(at=convertToTensor(tt,"scale","batchNorm"));let lt;Je!=null&&(lt=convertToTensor(Je,"offset","batchNorm")),assert$2(it.rank===ot.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),assert$2(lt==null||it.rank===lt.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),assert$2(at==null||it.rank===at.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const ht={x:xAs4D(rt),scale:at,offset:lt,mean:it,variance:ot},pt={varianceEpsilon:st},ft=ENGINE.runKernel(FusedBatchNorm,ht,pt);return reshape$2(ft,rt.shape)}const batchNorm$2=op({batchNorm_});function batchNorm2d_(Xe,Ke,Ye,Je,tt,st){const rt=convertToTensor(Xe,"x","batchNorm"),it=convertToTensor(Ke,"mean","batchNorm"),ot=convertToTensor(Ye,"variance","batchNorm");let at;tt!=null&&(at=convertToTensor(tt,"scale","batchNorm"));let lt;return Je!=null&&(lt=convertToTensor(Je,"offset","batchNorm")),assert$2(rt.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${rt.rank}.`),assert$2(it.rank===2||it.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${it.rank}.`),assert$2(ot.rank===2||ot.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${ot.rank}.`),at!=null&&assert$2(at.rank===2||at.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${at.rank}.`),lt!=null&&assert$2(lt.rank===2||lt.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${lt.rank}.`),batchNorm$2(rt,it,ot,lt,at,st)}const batchNorm2d=op({batchNorm2d_});function batchNorm3d_(Xe,Ke,Ye,Je,tt,st){const rt=convertToTensor(Xe,"x","batchNorm"),it=convertToTensor(Ke,"mean","batchNorm"),ot=convertToTensor(Ye,"variance","batchNorm");let at;tt!=null&&(at=convertToTensor(tt,"scale","batchNorm"));let lt;return Je!=null&&(lt=convertToTensor(Je,"offset","batchNorm")),assert$2(rt.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${rt.rank}.`),assert$2(it.rank===3||it.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${it.rank}.`),assert$2(ot.rank===3||ot.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${ot.rank}.`),at!=null&&assert$2(at.rank===3||at.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${at.rank}.`),lt!=null&&assert$2(lt.rank===3||lt.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${lt.rank}.`),batchNorm$2(rt,it,ot,lt,at,st)}const batchNorm3d=op({batchNorm3d_});function batchNorm4d_(Xe,Ke,Ye,Je,tt,st){const rt=convertToTensor(Xe,"x","batchNorm"),it=convertToTensor(Ke,"mean","batchNorm"),ot=convertToTensor(Ye,"variance","batchNorm");let at;tt!=null&&(at=convertToTensor(tt,"scale","batchNorm"));let lt;return Je!=null&&(lt=convertToTensor(Je,"offset","batchNorm")),assert$2(rt.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${rt.rank}.`),assert$2(it.rank===4||it.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${it.rank}.`),assert$2(ot.rank===4||ot.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${ot.rank}.`),at!=null&&assert$2(at.rank===4||at.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${at.rank}.`),lt!=null&&assert$2(lt.rank===4||lt.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${lt.rank}.`),batchNorm$2(rt,it,ot,lt,at,st)}const batchNorm4d=op({batchNorm4d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function broadcastTo_(Xe,Ke){let Ye=convertToTensor(Xe,"broadcastTo","x");const Je=Ye.shape;if(Ke.some(at=>!(at>0)||at%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${Ke}].`);if(Ke.length<Ye.rank)throw new Error(`broadcastTo(): shape.length=${Ke.length} < input.rank=${Ye.rank}.`);if(Ke.length>Ye.rank){const at=Ye.shape.slice();for(;at.length<Ke.length;)at.unshift(1);Ye=reshape$2(Ye,at)}const tt=Ye.shape,st=Array.from(Ke);for(let at=Ke.length-1;at>=0;at--)if(tt[at]===Ke[at])st[at]=1;else if(Ye.shape[at]!==1)throw new Error(`broadcastTo(): [${Je}] cannot be broadcast to [${Ke}].`);if(st.map((at,lt)=>at>1?lt:-1).filter(at=>at>=0).length===0)return clone$1(Ye);const it={x:Ye},ot={reps:st};return ENGINE.runKernel(Tile,it,ot)}const broadcastTo=op({broadcastTo_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ceil_(Xe){const Ye={x:convertToTensor(Xe,"x","ceil")};return ENGINE.runKernel(Ceil,Ye)}const ceil$2=op({ceil_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function clipByValue_(Xe,Ke,Ye){const Je=convertToTensor(Xe,"x","clipByValue");assert$2(Ke<=Ye,()=>`Error in clip: min (${Ke}) must be less than or equal to max (${Ye}).`);const tt={x:Je},st={clipValueMin:Ke,clipValueMax:Ye};return ENGINE.runKernel(ClipByValue,tt,st)}const clipByValue$1=op({clipByValue_});function concat1d_(Xe){return concat$2(Xe,0)}const concat1d=op({concat1d_});function concat2d_(Xe,Ke){return concat$2(Xe,Ke)}const concat2d=op({concat2d_});function concat3d_(Xe,Ke){return concat$2(Xe,Ke)}const concat3d=op({concat3d_});function concat4d_(Xe,Ke){return concat$2(Xe,Ke)}const concat4d=op({concat4d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2d_(Xe,Ke,Ye,Je,tt="NHWC",st=[1,1],rt){const it=convertToTensor(Xe,"x","conv2d"),ot=convertToTensor(Ke,"filter","conv2d");let at=it,lt=!1;it.rank===3&&(lt=!0,at=reshape$2(it,[1,it.shape[0],it.shape[1],it.shape[2]])),assert$2(at.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${at.rank}.`),assert$2(ot.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${ot.rank}.`),rt!=null&&assert$2(isInt(Je),()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${rt} but got pad ${Je}.`);const ut=tt==="NHWC"?at.shape[3]:at.shape[1];assert$2(ut===ot.shape[2],()=>`Error in conv2d: depth of input (${ut}) must match input depth for filter ${ot.shape[2]}.`),assert$2(eitherStridesOrDilationsAreOne(Ye,st),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${Ye} and dilations '${st}'`);const ht={x:at,filter:ot},pt={strides:Ye,pad:Je,dataFormat:tt,dilations:st,dimRoundingMode:rt},ft=ENGINE.runKernel(Conv2D$1,ht,pt);return lt?reshape$2(ft,[ft.shape[1],ft.shape[2],ft.shape[3]]):ft}const conv2d$2=op({conv2d_});function conv1d_(Xe,Ke,Ye,Je,tt="NWC",st=1,rt){const it=convertToTensor(Xe,"x","conv1d"),ot=convertToTensor(Ke,"filter","conv1d");let at=it,lt=!1;it.rank===2&&(lt=!0,at=reshape$2(it,[1,it.shape[0],it.shape[1]])),assert$2(at.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${at.rank}.`),assert$2(ot.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${ot.rank}.`),rt!=null&&assert$2(isInt(Je),()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${rt} but got pad ${Je}.`),assert$2(at.shape[2]===ot.shape[1],()=>`Error in conv1d: depth of input (${at.shape[2]}) must match input depth for filter ${ot.shape[1]}.`),assert$2(eitherStridesOrDilationsAreOne(Ye,st),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${Ye} and dilation '${st}'`),assert$2(tt==="NWC",()=>`Error in conv1d: got dataFormat of ${tt} but only NWC is currently supported.`);const ut=reshape$2(ot,[1,ot.shape[0],ot.shape[1],ot.shape[2]]),ht=reshape$2(at,[at.shape[0],1,at.shape[1],at.shape[2]]),vt=conv2d$2(ht,ut,[1,Ye],Je,"NHWC",[1,st],rt);return lt?reshape$2(vt,[vt.shape[2],vt.shape[3]]):reshape$2(vt,[vt.shape[0],vt.shape[2],vt.shape[3]])}const conv1d=op({conv1d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropInput_(Xe,Ke,Ye,Je,tt,st="NHWC",rt){assert$2(Xe.length===Ke.rank,()=>`Length of inShape (${Xe.length}) and rank of dy (${Ke.rank}) must match`);let it=Xe,ot=Ke,at=!1;Ke.rank===3&&(at=!0,ot=reshape$2(Ke,[1,Ke.shape[0],Ke.shape[1],Ke.shape[2]]),it=[1,Xe[0],Xe[1],Xe[2]]),assert$2(it.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${it.length}.`),assert$2(ot.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${ot.rank}`),assert$2(Ye.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${Ye.rank}`);const lt=st==="NHWC"?it[3]:it[1],ut=st==="NHWC"?ot.shape[3]:ot.shape[1];assert$2(lt===Ye.shape[2],()=>`Error in conv2dDerInput: depth of input (${lt}) must match input depth for filter ${Ye.shape[2]}.`),assert$2(ut===Ye.shape[3],()=>`Error in conv2dDerInput: depth of output (${ut}) must match output depth for filter ${Ye.shape[3]}.`),rt!=null&&assert$2(isInt(tt),()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${rt} but got pad ${tt}.`);const ht={dy:ot,filter:Ye},pt={strides:Je,pad:tt,dataFormat:st,dimRoundingMode:rt,inputShape:it},ft=ENGINE.runKernel(Conv2DBackpropInput,ht,pt);return at?reshape$2(ft,[ft.shape[1],ft.shape[2],ft.shape[3]]):ft}const conv2DBackpropInput$2=op({conv2DBackpropInput_});function conv2dTranspose_(Xe,Ke,Ye,Je,tt,st){const rt=convertToTensor(Xe,"x","conv2dTranspose"),it=convertToTensor(Ke,"filter","conv2dTranspose");return conv2DBackpropInput$2(Ye,rt,it,Je,tt,"NHWC",st)}const conv2dTranspose=op({conv2dTranspose_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3d_(Xe,Ke,Ye,Je,tt="NDHWC",st=[1,1,1]){const rt=convertToTensor(Xe,"x","conv3d"),it=convertToTensor(Ke,"filter","conv3d");let ot=rt,at=!1;rt.rank===4&&(at=!0,ot=reshape$2(rt,[1,rt.shape[0],rt.shape[1],rt.shape[2],rt.shape[3]])),assert$2(ot.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${ot.rank}.`),assert$2(it.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${it.rank}.`),assert$2(ot.shape[4]===it.shape[3],()=>`Error in conv3d: depth of input (${ot.shape[4]}) must match input depth for filter ${it.shape[3]}.`),assert$2(eitherStridesOrDilationsAreOne(Ye,st),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${Ye} and dilations '${st}'`),assert$2(tt==="NDHWC",()=>`Error in conv3d: got dataFormat of ${tt} but only NDHWC is currently supported.`);const lt={x:ot,filter:it},ut={strides:Ye,pad:Je,dataFormat:tt,dilations:st},ht=ENGINE.runKernel(Conv3D$1,lt,ut);return at?reshape$2(ht,[ht.shape[1],ht.shape[2],ht.shape[3],ht.shape[4]]):ht}const conv3d=op({conv3d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropInput_(Xe,Ke,Ye,Je,tt){assert$2(Xe.length===Ke.rank,()=>`Length of inShape (${Xe.length}) and rank of dy (${Ke.rank}) must match`);let st=Xe,rt=Ke,it=!1;Ke.rank===4&&(it=!0,rt=reshape$2(Ke,[1,Ke.shape[0],Ke.shape[1],Ke.shape[2],Ke.shape[3]]),st=[1,Xe[0],Xe[1],Xe[2],Xe[3]]);const ot=st[4],at=rt.shape[4];assert$2(st.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${st.length}.`),assert$2(rt.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${rt.rank}`),assert$2(Ye.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${Ye.rank}`),assert$2(ot===Ye.shape[3],()=>`Error in conv3dDerInput: depth of input (${ot}) must match input depth for filter ${Ye.shape[3]}.`),assert$2(at===Ye.shape[4],()=>`Error in conv3dDerInput: depth of output (${at}) must match output depth for filter ${Ye.shape[4]}.`);const lt={dy:rt,filter:Ye},ut={pad:tt,strides:Je,inputShape:st},ht=ENGINE.runKernel(Conv3DBackpropInputV2,lt,ut);return it?reshape$2(ht,[ht.shape[1],ht.shape[2],ht.shape[3],ht.shape[4]]):ht}const conv3DBackpropInput$1=op({conv3DBackpropInput_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cos_(Xe){const Ye={x:convertToTensor(Xe,"x","cos")};return ENGINE.runKernel(Cos,Ye)}const cos$2=op({cos_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cosh_(Xe){const Ye={x:convertToTensor(Xe,"x","cosh")};return ENGINE.runKernel(Cosh,Ye)}const cosh$2=op({cosh_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumsum_(Xe,Ke=0,Ye=!1,Je=!1){const st={x:convertToTensor(Xe,"x","cumsum")},rt={axis:Ke,exclusive:Ye,reverse:Je};return ENGINE.runKernel(Cumsum,st,rt)}const cumsum$2=op({cumsum_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthToSpace_(Xe,Ke,Ye="NHWC"){const Je=convertToTensor(Xe,"x","depthToSpace"),tt=Ye==="NHWC"?Je.shape[1]:Je.shape[2],st=Ye==="NHWC"?Je.shape[2]:Je.shape[3],rt=Ye==="NHWC"?Je.shape[3]:Je.shape[1];assert$2(tt*Ke>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${tt} and ${Ke}  for depthToSpace with input shape
    ${Je.shape}`),assert$2(st*Ke>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${st} and ${Ke} for depthToSpace with input shape
        ${Je.shape}`),assert$2(rt%(Ke*Ke)===0,()=>`Dimension size must be evenly divisible by ${Ke*Ke} but is ${rt} for depthToSpace with input shape ${Je.shape}`);const it={x:Je},ot={blockSize:Ke,dataFormat:Ye};return ENGINE.runKernel(DepthToSpace,it,ot)}const depthToSpace$2=op({depthToSpace_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2d_(Xe,Ke,Ye,Je,tt="NHWC",st=[1,1],rt){const it=convertToTensor(Xe,"x","depthwiseConv2d"),ot=convertToTensor(Ke,"filter","depthwiseConv2d");let at=it,lt=!1;it.rank===3&&(lt=!0,at=reshape$2(it,[1,it.shape[0],it.shape[1],it.shape[2]])),assert$2(at.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${at.rank}.`),assert$2(ot.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${ot.rank}.`),assert$2(at.shape[3]===ot.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${at.shape[3]}) must match the inChannels dimension in filter ${ot.shape[2]}.`),rt!=null&&assert$2(isInt(Je),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${rt} but got pad ${Je}.`);const ut={x:at,filter:ot},ht={strides:Ye,pad:Je,dataFormat:tt,dilations:st,dimRoundingMode:rt},pt=ENGINE.runKernel(DepthwiseConv2dNative,ut,ht);return lt?reshape$2(pt,[pt.shape[1],pt.shape[2],pt.shape[3]]):pt}const depthwiseConv2d$1=op({depthwiseConv2d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dilation2d_(Xe,Ke,Ye,Je,tt=[1,1],st="NHWC"){const rt=convertToTensor(Xe,"x","dilation2d"),it=convertToTensor(Ke,"filter","dilation2d");assert$2(rt.rank===3||rt.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${rt.rank}.`),assert$2(it.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${it.rank}.`),assert$2(st==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${st}`);let ot=rt,at=!1;rt.rank===3&&(ot=reshape$2(rt,[1,rt.shape[0],rt.shape[1],rt.shape[2]]),at=!0);const lt={x:ot,filter:it},ut={strides:Ye,pad:Je,dilations:tt},ht=ENGINE.runKernel(Dilation2D,lt,ut);return at?reshape$2(ht,[ht.shape[1],ht.shape[2],ht.shape[3]]):ht}const dilation2d=op({dilation2d_});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getBroadcastDims$1(Xe,Ke){const Ye=Xe.length,Je=[];for(let tt=0;tt<Ye;tt++){const st=Ye-1-tt,rt=Xe[st]||1;(Ke[Ke.length-1-tt]||1)>1&&rt===1&&Je.unshift(st)}return Je}function getReductionAxes(Xe,Ke){const Ye=[];for(let Je=0;Je<Ke.length;Je++){const tt=Xe[Xe.length-Je-1],st=Ke.length-Je-1,rt=Ke[st];(tt==null||tt===1&&rt>1)&&Ye.unshift(st)}return Ye}function assertAndGetBroadcastShape(Xe,Ke){const Ye=[],Je=Math.max(Xe.length,Ke.length);for(let tt=0;tt<Je;tt++){let st=Xe[Xe.length-tt-1];st==null&&(st=1);let rt=Ke[Ke.length-tt-1];if(rt==null&&(rt=1),st===1)Ye.unshift(rt);else if(rt===1)Ye.unshift(st);else if(st!==rt){const it=`Operands could not be broadcast together with shapes ${Xe} and ${Ke}.`;throw Error(it)}else Ye.unshift(st)}return Ye}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function equal_(Xe,Ke){let Ye=convertToTensor(Xe,"a","equal"),Je=convertToTensor(Ke,"b","equal");[Ye,Je]=makeTypesMatch(Ye,Je),assertAndGetBroadcastShape(Ye.shape,Je.shape);const tt={a:Ye,b:Je};return ENGINE.runKernel(Equal,tt)}const equal$2=op({equal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function where_(Xe,Ke,Ye){const Je=convertToTensor(Ke,"a","where"),tt=convertToTensor(Ye,"b","where"),st=convertToTensor(Xe,"condition","where","bool"),rt=assertAndGetBroadcastShape(Je.shape,tt.shape),it=broadcastTo(Je,rt),ot=broadcastTo(tt,rt);st.rank===1&&assert$2(st.shape[0]===Je.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),st.rank!==1&&assertShapesMatch(st.shape,ot.shape,"Error in where: ");const at={condition:st,t:it,e:ot};return ENGINE.runKernel(Select$2,at)}const where=op({where_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zerosLike_(Xe){const Ye={x:convertToTensor(Xe,"x","zerosLike")};return ENGINE.runKernel(ZerosLike,Ye)}const zerosLike$2=op({zerosLike_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function divNoNan_(Xe,Ke){let Ye=convertToTensor(Xe,"a","div"),Je=convertToTensor(Ke,"b","div");[Ye,Je]=makeTypesMatch(Ye,Je);const tt=div$1(Ye,Je),st=zerosLike$2(tt),rt=equal$2(Je,st);return where(rt,st,tt)}const divNoNan=op({divNoNan_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dot_(Xe,Ke){const Ye=convertToTensor(Xe,"t1","dot"),Je=convertToTensor(Ke,"t2","dot");assert$2((Ye.rank===1||Ye.rank===2)&&(Je.rank===1||Je.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${Ye.rank} and ${Je.rank}.`);const tt=Ye.rank===1?Ye.size:Ye.shape[1],st=Je.rank===1?Je.size:Je.shape[0];if(assert$2(tt===st,()=>`Error in dot: inner dimensions of inputs must match, but got ${tt} and ${st}.`),Ye.rank===1&&Je.rank===1){const rt=reshape$2(Ye,[1,-1]),it=reshape$2(Je,[-1,1]),ot=matMul$1(rt,it);return reshape$2(ot,[])}else if(Ye.rank===1&&Je.rank===2){const rt=reshape$2(Ye,[1,-1]),it=reshape$2(Je,[Je.shape[0],Je.shape[1]]),ot=matMul$1(rt,it);return reshape$2(ot,[ot.size])}else if(Ye.rank===2&&Je.rank===1){const rt=reshape$2(Je,[-1,1]),it=matMul$1(Ye,rt);return reshape$2(it,[it.size])}else{const rt=reshape$2(Je,[Je.shape[0],Je.shape[1]]);return matMul$1(Ye,rt)}}const dot$1=op({dot_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function elu_(Xe){const Ye={x:convertToTensor(Xe,"x","elu")};return ENGINE.runKernel(Elu$1,Ye)}const elu$3=op({elu_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function erf_(Xe){let Ke=convertToTensor(Xe,"x","erf");assert$2(Ke.dtype==="int32"||Ke.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),Ke.dtype==="int32"&&(Ke=cast$3(Ke,"float32"));const Ye={x:Ke};return ENGINE.runKernel(Erf,Ye)}const erf$2=op({erf_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function exp_(Xe){const Ye={x:convertToTensor(Xe,"x","exp")};return ENGINE.runKernel(Exp,Ye)}const exp$2=op({exp_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expandDims_(Xe,Ke=0){const Ye=convertToTensor(Xe,"x","expandDims","string_or_numeric");assert$2(Ke<=Ye.rank,()=>"Axis must be <= rank of the tensor");const Je={input:Ye},tt={dim:Ke};return ENGINE.runKernel(ExpandDims,Je,tt)}const expandDims$3=op({expandDims_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expm1_(Xe){const Ye={x:convertToTensor(Xe,"x","expm1")};return ENGINE.runKernel(Expm1,Ye)}const expm1$2=op({expm1_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tile_(Xe,Ke){const Ye=convertToTensor(Xe,"x","tile","string_or_numeric");assert$2(Ye.rank===Ke.length,()=>`Error in transpose: rank of input ${Ye.rank} must match length of reps ${Ke}.`);const Je={x:Ye},tt={reps:Ke};return ENGINE.runKernel(Tile,Je,tt)}const tile$3=op({tile_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eye_(Xe,Ke,Ye,Je="float32"){Ke==null&&(Ke=Xe);const tt=buffer$1([Xe,Ke],Je),st=Xe<=Ke?Xe:Ke;for(let it=0;it<st;++it)tt.set(1,it,it);const rt=reshape$2(tt.toTensor(),[Xe,Ke]);if(Ye==null)return rt;if(Ye.length===1)return tile$3(expandDims$3(rt,0),[Ye[0],1,1]);if(Ye.length===2)return tile$3(expandDims$3(expandDims$3(rt,0),0),[Ye[0],Ye[1],1,1]);if(Ye.length===3)return tile$3(expandDims$3(expandDims$3(expandDims$3(rt,0),0),0),[Ye[0],Ye[1],Ye[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${Ye.length}D.`)}const eye=op({eye_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fill$2(Xe,Ke,Ye){const Je={shape:Xe,value:Ke,dtype:Ye};return ENGINE.runKernel(Fill,{},Je)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function floor_(Xe){const Ye={x:convertToTensor(Xe,"x","floor")};return ENGINE.runKernel(Floor,Ye)}const floor$3=op({floor_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gather_(Xe,Ke,Ye=0,Je=0){const tt=convertToTensor(Xe,"x","gather"),st=convertToTensor(Ke,"indices","gather","int32"),rt={x:tt,indices:st},it={axis:Ye,batchDims:Je};return ENGINE.runKernel(GatherV2,rt,it)}const gather$1=op({gather_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function greater_(Xe,Ke){let Ye=convertToTensor(Xe,"a","greater"),Je=convertToTensor(Ke,"b","greater");[Ye,Je]=makeTypesMatch(Ye,Je),assertAndGetBroadcastShape(Ye.shape,Je.shape);const tt={a:Ye,b:Je};return ENGINE.runKernel(Greater,tt)}const greater$2=op({greater_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function greaterEqual_(Xe,Ke){let Ye=convertToTensor(Xe,"a","greaterEqual"),Je=convertToTensor(Ke,"b","greaterEqual");[Ye,Je]=makeTypesMatch(Ye,Je),assertAndGetBroadcastShape(Ye.shape,Je.shape);const tt={a:Ye,b:Je};return ENGINE.runKernel(GreaterEqual,tt)}const greaterEqual$2=op({greaterEqual_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imag_(Xe){const Ye={input:convertToTensor(Xe,"input","imag")};return ENGINE.runKernel(Imag,Ye)}const imag$2=op({imag_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function isFinite_(Xe){const Ye={x:convertToTensor(Xe,"x","isFinite")};return ENGINE.runKernel(IsFinite,Ye)}const isFinite$3=op({isFinite_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function isInf_(Xe){const Ye={x:convertToTensor(Xe,"x","isInf")};return ENGINE.runKernel(IsInf,Ye)}const isInf$2=op({isInf_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function isNaN_(Xe){const Ye={x:convertToTensor(Xe,"x","isNaN")};return ENGINE.runKernel(IsNan,Ye)}const isNaN$3=op({isNaN_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function leakyRelu_(Xe,Ke=.2){const Je={x:convertToTensor(Xe,"x","leakyRelu")},tt={alpha:Ke};return ENGINE.runKernel(LeakyRelu,Je,tt)}const leakyRelu$2=op({leakyRelu_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function less_(Xe,Ke){let Ye=convertToTensor(Xe,"a","less"),Je=convertToTensor(Ke,"b","less");[Ye,Je]=makeTypesMatch(Ye,Je),assertAndGetBroadcastShape(Ye.shape,Je.shape);const tt={a:Ye,b:Je};return ENGINE.runKernel(Less,tt)}const less$2=op({less_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lessEqual_(Xe,Ke){let Ye=convertToTensor(Xe,"a","lessEqual"),Je=convertToTensor(Ke,"b","lessEqual");[Ye,Je]=makeTypesMatch(Ye,Je),assertAndGetBroadcastShape(Ye.shape,Je.shape);const tt={a:Ye,b:Je};return ENGINE.runKernel(LessEqual,tt)}const lessEqual$2=op({lessEqual_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function localResponseNormalization_(Xe,Ke=5,Ye=1,Je=1,tt=.5){const st=convertToTensor(Xe,"x","localResponseNormalization");assert$2(st.rank===4||st.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${st.rank}.`),assert$2(isInt(Ke),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${Ke}.`);let rt=st,it=!1;st.rank===3&&(it=!0,rt=reshape$2(st,[1,st.shape[0],st.shape[1],st.shape[2]]));const ot={x:rt},at={depthRadius:Ke,bias:Ye,alpha:Je,beta:tt},lt=ENGINE.runKernel(LRN,ot,at);return it?reshape$2(lt,[lt.shape[1],lt.shape[2],lt.shape[3]]):lt}const localResponseNormalization=op({localResponseNormalization_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function log_(Xe){const Ye={x:convertToTensor(Xe,"x","log")};return ENGINE.runKernel(Log,Ye)}const log$5=op({log_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function log1p_(Xe){const Ye={x:convertToTensor(Xe,"x","log1p")};return ENGINE.runKernel(Log1p,Ye)}const log1p$2=op({log1p_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function variableGrads(Xe,Ke){assert$2(isFunction$3(Xe),()=>"The f passed in variableGrads(f) must be a function"),assert$2(Ke==null||Array.isArray(Ke)&&Ke.every(at=>at instanceof Variable),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const Ye=Ke!=null;if(!Ye){Ke=[];for(const at in ENGINE.registeredVariables)Ke.push(ENGINE.registeredVariables[at])}const Je=Ye?Ke.filter(at=>!at.trainable):null,tt=Ke.length;Ke=Ke.filter(at=>at.trainable),assert$2(Ke.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${tt} variables is trainable.`);const st=!0,{value:rt,grads:it}=ENGINE.gradients(Xe,Ke,null,st);assert$2(it.some(at=>at!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),assert$2(rt.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${rt.rank} tensor`);const ot={};return Ke.forEach((at,lt)=>{it[lt]!=null&&(ot[at.name]=it[lt])}),Je!=null&&Je.forEach(at=>ot[at.name]=null),{value:rt,grads:ot}}function customGrad(Xe){return ENGINE.customGrad(Xe)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function neg_(Xe){const Ye={x:convertToTensor(Xe,"x","neg")};return ENGINE.runKernel(Neg,Ye)}const neg$2=op({neg_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softplus_(Xe){const Ye={x:convertToTensor(Xe,"x","softplus")};return ENGINE.runKernel(Softplus$1,Ye)}const softplus$2=op({softplus_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logSigmoid_(Xe){const Ke=convertToTensor(Xe,"x","logSigmoid");return customGrad(Je=>({value:neg$2(softplus$2(neg$2(Je))),gradFunc:rt=>mul(rt,sigmoid$2(neg$2(Je)))}))(Ke)}const logSigmoid=op({logSigmoid_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function max_(Xe,Ke=null,Ye=!1){const tt={x:convertToTensor(Xe,"x","max")},st={reductionIndices:Ke,keepDims:Ye};return ENGINE.runKernel(Max,tt,st)}const max$4=op({max_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sub_(Xe,Ke){let Ye=convertToTensor(Xe,"a","sub"),Je=convertToTensor(Ke,"b","sub");[Ye,Je]=makeTypesMatch(Ye,Je);const tt={a:Ye,b:Je};return ENGINE.runKernel(Sub,tt)}const sub$2=op({sub_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sum_(Xe,Ke=null,Ye=!1){let Je=convertToTensor(Xe,"x","sum");Je.dtype==="bool"&&(Je=cast$3(Je,"int32"));const tt={x:Je},st={axis:Ke,keepDims:Ye};return ENGINE.runKernel(Sum,tt,st)}const sum$2=op({sum_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logSoftmax_(Xe,Ke=-1){const Ye=convertToTensor(Xe,"logits","logSoftmax");if(Ke===-1&&(Ke=Ye.rank-1),Ke!==Ye.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${Ye.rank} and axis was ${Ke}`);return customGrad((tt,st)=>{const it=max$4(tt,Ke,!0),ot=sub$2(tt,it),at=sub$2(cast$3(ot,"float32"),log$5(sum$2(exp$2(ot),Ke,!0)));return st([at]),{value:at,gradFunc:(ut,ht)=>{const[pt]=ht,ft=!0,xt=exp$2(pt);return sub$2(ut,mul(sum$2(ut,Ke,ft),xt))}}})(Ye)}const logSoftmax=op({logSoftmax_});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function axesAreInnerMostDims(Xe,Ke){for(let Ye=0;Ye<Xe.length;++Ye)if(Xe[Xe.length-Ye-1]!==Ke-1-Ye)return!1;return!0}function combineLocations(Xe,Ke,Ye){const Je=Xe.length+Ke.length,tt=[];let st=0,rt=0;for(let it=0;it<Je;it++)Ye.indexOf(it)===-1?tt.push(Xe[st++]):tt.push(Ke[rt++]);return tt}function computeOutAndReduceShapes(Xe,Ke){const Ye=[],Je=Xe.length;for(let st=0;st<Je;st++)Ke.indexOf(st)===-1&&Ye.push(Xe[st]);const tt=Ke.map(st=>Xe[st]);return[Ye,tt]}function expandShapeToKeepDim(Xe,Ke){const Ye=Ke.map(Je=>1);return combineLocations(Xe,Ye,Ke)}function assertAxesAreInnerMostDims(Xe,Ke,Ye){assert$2(axesAreInnerMostDims(Ke,Ye),()=>`${Xe} supports only inner-most axes for now. Got axes ${Ke} and rank-${Ye} input.`)}function getAxesPermutation(Xe,Ke){if(axesAreInnerMostDims(Xe,Ke))return null;const Ye=[];for(let Je=0;Je<Ke;++Je)Xe.indexOf(Je)===-1&&Ye.push(Je);return Xe.forEach(Je=>Ye.push(Je)),Ye}function getUndoAxesPermutation(Xe){return Xe.map((Ke,Ye)=>[Ye,Ke]).sort((Ke,Ye)=>Ke[1]-Ye[1]).map(Ke=>Ke[0])}function getInnerMostAxes(Xe,Ke){const Ye=[];for(let Je=Ke-Xe;Je<Ke;++Je)Ye.push(Je);return Ye}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logSumExp_(Xe,Ke=null,Ye=!1){const Je=convertToTensor(Xe,"x","logSumExp"),tt=parseAxisParam(Ke,Je.shape),st=max$4(Je,tt,!0),rt=sub$2(Je,st),it=exp$2(rt),ot=sum$2(it,tt),at=log$5(ot),lt=add$1(reshape$2(st,at.shape),at);if(Ye){const ut=expandShapeToKeepDim(lt.shape,tt);return reshape$2(lt,ut)}return lt}const logSumExp=op({logSumExp_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalAnd_(Xe,Ke){const Ye=convertToTensor(Xe,"a","logicalAnd","bool"),Je=convertToTensor(Ke,"b","logicalAnd","bool");assertAndGetBroadcastShape(Ye.shape,Je.shape);const tt={a:Ye,b:Je};return ENGINE.runKernel(LogicalAnd,tt)}const logicalAnd$2=op({logicalAnd_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalNot_(Xe){const Ye={x:convertToTensor(Xe,"x","logicalNot","bool")};return ENGINE.runKernel(LogicalNot,Ye)}const logicalNot$2=op({logicalNot_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalOr_(Xe,Ke){const Ye=convertToTensor(Xe,"a","logicalOr","bool"),Je=convertToTensor(Ke,"b","logicalOr","bool");assertAndGetBroadcastShape(Ye.shape,Je.shape);const tt={a:Ye,b:Je};return ENGINE.runKernel(LogicalOr,tt)}const logicalOr$2=op({logicalOr_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalXor_(Xe,Ke){const Ye=convertToTensor(Xe,"a","logicalXor","bool"),Je=convertToTensor(Ke,"b","logicalXor","bool");return assertAndGetBroadcastShape(Ye.shape,Je.shape),logicalAnd$2(logicalOr$2(Xe,Ke),logicalNot$2(logicalAnd$2(Xe,Ke)))}const logicalXor=op({logicalXor_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool_(Xe,Ke,Ye,Je,tt){const st=convertToTensor(Xe,"x","maxPool"),rt=1;let it=st,ot=!1;st.rank===3&&(ot=!0,it=reshape$2(st,[1,st.shape[0],st.shape[1],st.shape[2]])),assert$2(it.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${it.rank}.`),assert$2(eitherStridesOrDilationsAreOne(Ye,rt),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${Ye} and dilations '${rt}'`),tt!=null&&assert$2(isInt(Je),()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${tt} but got pad ${Je}.`);const at={x:it},lt={filterSize:Ke,strides:Ye,pad:Je,dimRoundingMode:tt},ut=ENGINE.runKernel(MaxPool,at,lt);return ot?reshape$2(ut,[ut.shape[1],ut.shape[2],ut.shape[3]]):ut}const maxPool$2=op({maxPool_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3d_(Xe,Ke=[1,1,1],Ye,Je,tt,st="NDHWC",rt){rt==null?rt=[1,1,1]:deprecationWarn("dilations is deprecated, this field will be gone in v3.0.0.");const it=convertToTensor(Xe,"x","maxPool3d");let ot=it,at=!1;it.rank===4&&(at=!0,ot=reshape$2(it,[1,it.shape[0],it.shape[1],it.shape[2],it.shape[3]])),assert$2(ot.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${ot.rank}.`),assert$2(st==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${st}`),assert$2(eitherStridesOrDilationsAreOne(Ye,rt),()=>`Error in maxPool3d: Either strides or dilations must be 1. Got strides ${Ye} and dilations '${rt}'`),tt!=null&&assert$2(isInt(Je),()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${tt} but got pad ${Je}.`);const lt={x:ot},ut={filterSize:Ke,strides:Ye,pad:Je,dimRoundingMode:tt,dataFormat:st,dilations:rt},ht=ENGINE.runKernel(MaxPool3D,lt,ut);return at?reshape$2(ht,[ht.shape[1],ht.shape[2],ht.shape[3],ht.shape[4]]):ht}const maxPool3d$1=op({maxPool3d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maximum_(Xe,Ke){let Ye=convertToTensor(Xe,"a","maximum"),Je=convertToTensor(Ke,"b","maximum");[Ye,Je]=makeTypesMatch(Ye,Je),Ye.dtype==="bool"&&(Ye=cast$3(Ye,"int32"),Je=cast$3(Je,"int32")),assertAndGetBroadcastShape(Ye.shape,Je.shape);const tt={a:Ye,b:Je};return ENGINE.runKernel(Maximum$1,tt)}const maximum$2=op({maximum_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mean_(Xe,Ke=null,Ye=!1){const tt={x:convertToTensor(Xe,"x","mean")},st={axis:Ke,keepDims:Ye};return ENGINE.runKernel(Mean,tt,st)}const mean$1=op({mean_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function min_(Xe,Ke=null,Ye=!1){const tt={x:convertToTensor(Xe,"x","min")},st={axis:Ke,keepDims:Ye};return ENGINE.runKernel(Min,tt,st)}const min$4=op({min_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function minimum_(Xe,Ke){let Ye=convertToTensor(Xe,"a","minimum"),Je=convertToTensor(Ke,"b","minimum");[Ye,Je]=makeTypesMatch(Ye,Je),Ye.dtype==="bool"&&(Ye=cast$3(Ye,"int32"),Je=cast$3(Je,"int32")),assertAndGetBroadcastShape(Ye.shape,Je.shape);const tt={a:Ye,b:Je};return ENGINE.runKernel(Minimum$1,tt)}const minimum$2=op({minimum_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mirrorPad_(Xe,Ke,Ye){assert$2(Ye==="reflect"||Ye==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${Ye}.`);const Je=convertToTensor(Xe,"x","mirrorPad");if(Je.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");assert$2(Ke.length===Je.rank,()=>`Padding doesn't match input. Must be ${Je.rank}. Got ${Ke.length}.`);const tt=Ye==="reflect"?1:0;for(let it=0;it<Je.rank;it++)assert$2(Ke[it].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),assert$2(Ke[it][0]>=0&&Ke[it][0]<=Je.shape[it]-tt&&Ke[it][1]>=0&&Ke[it][1]<=Je.shape[it]-tt,()=>`Padding in dimension ${it} cannot be greater than or equal to ${Je.shape[it]-tt} or less than 0 for input of shape ${Je.shape}`);const st={paddings:Ke,mode:Ye},rt={x:Je};return ENGINE.runKernel(MirrorPad,rt,st)}const mirrorPad$1=op({mirrorPad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mod_(Xe,Ke){let Ye=convertToTensor(Xe,"a","mod"),Je=convertToTensor(Ke,"b","mod");[Ye,Je]=makeTypesMatch(Ye,Je);const tt={a:Ye,b:Je};return ENGINE.runKernel(Mod,tt)}const mod$2=op({mod_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function square_(Xe){const Ke=convertToTensor(Xe,"x","square"),Ye={};return ENGINE.runKernel("Square",{x:Ke},Ye)}const square$3=op({square_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function moments_(Xe,Ke=null,Ye=!1){Xe=convertToTensor(Xe,"x","moments");const Je=parseAxisParam(Ke,Xe.shape),tt=mean$1(Xe,Je,Ye);let st=tt.shape;Ye||(st=expandShapeToKeepDim(tt.shape,Je));const rt=square$3(sub$2(cast$3(Xe,"float32"),reshape$2(tt,st))),it=mean$1(rt,Je,Ye);return{mean:tt,variance:it}}const moments=op({moments_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function notEqual_(Xe,Ke){let Ye=convertToTensor(Xe,"a","notEqual"),Je=convertToTensor(Ke,"b","notEqual");[Ye,Je]=makeTypesMatch(Ye,Je),assertAndGetBroadcastShape(Ye.shape,Je.shape);const tt={a:Ye,b:Je};return ENGINE.runKernel(NotEqual,tt)}const notEqual$2=op({notEqual_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zeros$1(Xe,Ke="float32"){if(Ke==="complex64"){const Je=zeros$1(Xe,"float32"),tt=zeros$1(Xe,"float32");return complex$2(Je,tt)}const Ye=makeZerosTypedArray(sizeFromShape(Xe),Ke);return ENGINE.makeTensor(Ye,Xe,Ke)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ones(Xe,Ke="float32"){if(Ke==="complex64"){const Je=ones(Xe,"float32"),tt=zeros$1(Xe,"float32");return complex$2(Je,tt)}const Ye=makeOnesTypedArray(sizeFromShape(Xe),Ke);return ENGINE.makeTensor(Ye,Xe,Ke)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function onesLike_(Xe){const Ye={x:convertToTensor(Xe,"x","onesLike")};return ENGINE.runKernel(OnesLike,Ye)}const onesLike$2=op({onesLike_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pad_(Xe,Ke,Ye=0){const Je=convertToTensor(Xe,"x","pad");if(Je.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const tt={paddings:Ke,constantValue:Ye},st={x:Je};return ENGINE.runKernel(PadV2,st,tt)}const pad=op({pad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function spaceToBatchND_(Xe,Ke,Ye){const Je=convertToTensor(Xe,"x","spaceToBatchND");assert$2(Je.rank>=1+Ke.length,()=>`input rank ${Je.rank} should be > than [blockShape] ${Ke.length}`),assert$2(Ye.length===Ke.length,()=>`paddings.shape[0] ${Ye.length} must be equal to [blockShape] ${Ke.length}`),assert$2(Je.shape.reduce((rt,it,ot)=>ot>0&&ot<=Ke.length?rt&&(it+Ye[ot-1][0]+Ye[ot-1][1])%Ke[ot-1]===0:rt,!0),()=>`input spatial dimensions ${Je.shape.slice(1)} with paddings ${Ye.toString()} must be divisible by blockShapes ${Ke.toString()}`);const tt={x:Je},st={blockShape:Ke,paddings:Ye};return ENGINE.runKernel(SpaceToBatchND,tt,st)}const spaceToBatchND$2=op({spaceToBatchND_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pool_(Xe,Ke,Ye,Je,tt,st){tt==null&&(tt=[1,1]),st==null&&(st=1),Je===0&&(Je="valid");const rt=convertToTensor(Xe,"x","maxPool");let it=rt,ot=!1;rt.rank===3&&(ot=!0,it=reshape$2(rt,[1,rt.shape[0],rt.shape[1],rt.shape[2]])),assert$2(eitherStridesOrDilationsAreOne(st,tt),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${st} and dilations '${tt}'`);const at=computePool2DInfo(it.shape,Ke,st,tt,Je),lt=[at.dilationHeight,at.dilationWidth];let ut;Je==="same"?ut=withSpaceToBatchBasePaddings([at.filterHeight,at.filterWidth],lt):ut=[[0,0],[0,0]];const ht=lt[0]===1&&lt[1]===1,[pt,ft]=requiredSpaceToBatchPaddings([at.inHeight,at.inWidth],lt,ut),xt=ht?Je:"valid",vt=ht?it:spaceToBatchND$2(it,lt,pt),Et=(Ye==="avg"?()=>avgPool$2(vt,Ke,st,xt):()=>maxPool$2(vt,Ke,st,xt))(),wt=ht?Et:batchToSpaceND$2(Et,lt,ft);return ot?reshape$2(wt,[wt.shape[1],wt.shape[2],wt.shape[3]]):wt}function requiredSpaceToBatchPaddings(Xe,Ke,Ye){const Je=Ye.map(lt=>lt[0]),tt=Ye.map(lt=>lt[1]),st=Xe.concat(Je,tt),rt=Ke.map((lt,ut)=>(lt-st[ut]%lt)%lt),it=tt.map((lt,ut)=>lt+rt[ut]),ot=Ke.map((lt,ut)=>[Je[ut],it[ut]]),at=Ke.map((lt,ut)=>[0,rt[ut]]);return[ot,at]}function withSpaceToBatchBasePaddings(Xe,Ke){const Je=Xe.map((rt,it)=>rt+(rt-1)*(Ke[it]-1)).map(rt=>rt-1),tt=Je.map(rt=>Math.floor(rt/2)),st=Je.map((rt,it)=>rt-tt[it]);return Je.map((rt,it)=>[tt[it],st[it]])}const pool$2=op({pool_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pow_(Xe,Ke){let Ye=convertToTensor(Xe,"base","pow"),Je=convertToTensor(Ke,"exp","pow");[Ye,Je]=makeTypesMatch(Ye,Je);const tt={a:Ye,b:Je};return ENGINE.runKernel(Pow$1,tt)}const pow$2=op({pow_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prelu_(Xe,Ke){const Ye=convertToTensor(Xe,"x","prelu"),Je=convertToTensor(Ke,"alpha","prelu"),tt={x:Ye,alpha:Je};return ENGINE.runKernel(Prelu,tt)}const prelu$2=op({prelu_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prod_(Xe,Ke=null,Ye=!1){let Je=convertToTensor(Xe,"x","prod");Je.dtype==="bool"&&(Je=cast$3(Je,"int32"));const tt={x:Je},st={axis:Ke,keepDims:Ye};return ENGINE.runKernel(Prod,tt,st)}const prod$2=op({prod_});var alea$5={exports:{}};alea$5.exports;(function(Xe){(function(Ke,Ye,Je){function tt(ot){var at=this,lt=it();at.next=function(){var ut=2091639*at.s0+at.c*23283064365386963e-26;return at.s0=at.s1,at.s1=at.s2,at.s2=ut-(at.c=ut|0)},at.c=1,at.s0=lt(" "),at.s1=lt(" "),at.s2=lt(" "),at.s0-=lt(ot),at.s0<0&&(at.s0+=1),at.s1-=lt(ot),at.s1<0&&(at.s1+=1),at.s2-=lt(ot),at.s2<0&&(at.s2+=1),lt=null}function st(ot,at){return at.c=ot.c,at.s0=ot.s0,at.s1=ot.s1,at.s2=ot.s2,at}function rt(ot,at){var lt=new tt(ot),ut=at&&at.state,ht=lt.next;return ht.int32=function(){return lt.next()*4294967296|0},ht.double=function(){return ht()+(ht()*2097152|0)*11102230246251565e-32},ht.quick=ht,ut&&(typeof ut=="object"&&st(ut,lt),ht.state=function(){return st(lt,{})}),ht}function it(){var ot=4022871197,at=function(lt){lt=lt.toString();for(var ut=0;ut<lt.length;ut++){ot+=lt.charCodeAt(ut);var ht=.02519603282416938*ot;ot=ht>>>0,ht-=ot,ht*=ot,ot=ht>>>0,ht-=ot,ot+=ht*4294967296}return(ot>>>0)*23283064365386963e-26};return at}Ye&&Ye.exports?Ye.exports=rt:this.alea=rt})(commonjsGlobal,Xe)})(alea$5);var aleaExports$2=alea$5.exports,xor128$5={exports:{}};xor128$5.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this,at="";ot.x=0,ot.y=0,ot.z=0,ot.w=0,ot.next=function(){var ut=ot.x^ot.x<<11;return ot.x=ot.y,ot.y=ot.z,ot.z=ot.w,ot.w^=ot.w>>>19^ut^ut>>>8},it===(it|0)?ot.x=it:at+=it;for(var lt=0;lt<at.length+64;lt++)ot.x^=at.charCodeAt(lt)|0,ot.next()}function st(it,ot){return ot.x=it.x,ot.y=it.y,ot.z=it.z,ot.w=it.w,ot}function rt(it,ot){var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(typeof lt=="object"&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.xor128=rt})(commonjsGlobal,Xe)})(xor128$5);var xor128Exports$2=xor128$5.exports,xorwow$5={exports:{}};xorwow$5.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this,at="";ot.next=function(){var ut=ot.x^ot.x>>>2;return ot.x=ot.y,ot.y=ot.z,ot.z=ot.w,ot.w=ot.v,(ot.d=ot.d+362437|0)+(ot.v=ot.v^ot.v<<4^(ut^ut<<1))|0},ot.x=0,ot.y=0,ot.z=0,ot.w=0,ot.v=0,it===(it|0)?ot.x=it:at+=it;for(var lt=0;lt<at.length+64;lt++)ot.x^=at.charCodeAt(lt)|0,lt==at.length&&(ot.d=ot.x<<10^ot.x>>>4),ot.next()}function st(it,ot){return ot.x=it.x,ot.y=it.y,ot.z=it.z,ot.w=it.w,ot.v=it.v,ot.d=it.d,ot}function rt(it,ot){var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(typeof lt=="object"&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.xorwow=rt})(commonjsGlobal,Xe)})(xorwow$5);var xorwowExports$2=xorwow$5.exports,xorshift7$5={exports:{}};xorshift7$5.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this;ot.next=function(){var lt=ot.x,ut=ot.i,ht,pt;return ht=lt[ut],ht^=ht>>>7,pt=ht^ht<<24,ht=lt[ut+1&7],pt^=ht^ht>>>10,ht=lt[ut+3&7],pt^=ht^ht>>>3,ht=lt[ut+4&7],pt^=ht^ht<<7,ht=lt[ut+7&7],ht=ht^ht<<13,pt^=ht^ht<<9,lt[ut]=pt,ot.i=ut+1&7,pt};function at(lt,ut){var ht,pt=[];if(ut===(ut|0))pt[0]=ut;else for(ut=""+ut,ht=0;ht<ut.length;++ht)pt[ht&7]=pt[ht&7]<<15^ut.charCodeAt(ht)+pt[ht+1&7]<<13;for(;pt.length<8;)pt.push(0);for(ht=0;ht<8&&pt[ht]===0;++ht);for(ht==8?pt[7]=-1:pt[ht],lt.x=pt,lt.i=0,ht=256;ht>0;--ht)lt.next()}at(ot,it)}function st(it,ot){return ot.x=it.x.slice(),ot.i=it.i,ot}function rt(it,ot){it==null&&(it=+new Date);var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(lt.x&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.xorshift7=rt})(commonjsGlobal,Xe)})(xorshift7$5);var xorshift7Exports$2=xorshift7$5.exports,xor4096$5={exports:{}};xor4096$5.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this;ot.next=function(){var lt=ot.w,ut=ot.X,ht=ot.i,pt,ft;return ot.w=lt=lt+1640531527|0,ft=ut[ht+34&127],pt=ut[ht=ht+1&127],ft^=ft<<13,pt^=pt<<17,ft^=ft>>>15,pt^=pt>>>12,ft=ut[ht]=ft^pt,ot.i=ht,ft+(lt^lt>>>16)|0};function at(lt,ut){var ht,pt,ft,xt,vt,At=[],Et=128;for(ut===(ut|0)?(pt=ut,ut=null):(ut=ut+"\0",pt=0,Et=Math.max(Et,ut.length)),ft=0,xt=-32;xt<Et;++xt)ut&&(pt^=ut.charCodeAt((xt+32)%ut.length)),xt===0&&(vt=pt),pt^=pt<<10,pt^=pt>>>15,pt^=pt<<4,pt^=pt>>>13,xt>=0&&(vt=vt+1640531527|0,ht=At[xt&127]^=pt+vt,ft=ht==0?ft+1:0);for(ft>=128&&(At[(ut&&ut.length||0)&127]=-1),ft=127,xt=512;xt>0;--xt)pt=At[ft+34&127],ht=At[ft=ft+1&127],pt^=pt<<13,ht^=ht<<17,pt^=pt>>>15,ht^=ht>>>12,At[ft]=pt^ht;lt.w=vt,lt.X=At,lt.i=ft}at(ot,it)}function st(it,ot){return ot.i=it.i,ot.w=it.w,ot.X=it.X.slice(),ot}function rt(it,ot){it==null&&(it=+new Date);var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(lt.X&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.xor4096=rt})(commonjsGlobal,Xe)})(xor4096$5);var xor4096Exports$2=xor4096$5.exports,tychei$5={exports:{}};tychei$5.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this,at="";ot.next=function(){var ut=ot.b,ht=ot.c,pt=ot.d,ft=ot.a;return ut=ut<<25^ut>>>7^ht,ht=ht-pt|0,pt=pt<<24^pt>>>8^ft,ft=ft-ut|0,ot.b=ut=ut<<20^ut>>>12^ht,ot.c=ht=ht-pt|0,ot.d=pt<<16^ht>>>16^ft,ot.a=ft-ut|0},ot.a=0,ot.b=0,ot.c=-1640531527,ot.d=1367130551,it===Math.floor(it)?(ot.a=it/4294967296|0,ot.b=it|0):at+=it;for(var lt=0;lt<at.length+20;lt++)ot.b^=at.charCodeAt(lt)|0,ot.next()}function st(it,ot){return ot.a=it.a,ot.b=it.b,ot.c=it.c,ot.d=it.d,ot}function rt(it,ot){var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(typeof lt=="object"&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.tychei=rt})(commonjsGlobal,Xe)})(tychei$5);var tycheiExports$2=tychei$5.exports,seedrandom$4={exports:{}};(function(Xe){(function(Ke,Ye){var Je=this,tt=256,st=6,rt=52,it="random",ot=Ye.pow(tt,st),at=Ye.pow(2,rt),lt=at*2,ut=tt-1,ht;function pt(_t,Ct,Tt){var St=[];Ct=Ct==!0?{entropy:!0}:Ct||{};var Rt=At(vt(Ct.entropy?[_t,wt(Ke)]:_t??Et(),3),St),Nt=new ft(St),Pt=function(){for(var Bt=Nt.g(st),Lt=ot,zt=0;Bt<at;)Bt=(Bt+zt)*tt,Lt*=tt,zt=Nt.g(1);for(;Bt>=lt;)Bt/=2,Lt/=2,zt>>>=1;return(Bt+zt)/Lt};return Pt.int32=function(){return Nt.g(4)|0},Pt.quick=function(){return Nt.g(4)/4294967296},Pt.double=Pt,At(wt(Nt.S),Ke),(Ct.pass||Tt||function(Bt,Lt,zt,Dt){return Dt&&(Dt.S&&xt(Dt,Nt),Bt.state=function(){return xt(Nt,{})}),zt?(Ye[it]=Bt,Lt):Bt})(Pt,Rt,"global"in Ct?Ct.global:this==Ye,Ct.state)}Ye["seed"+it]=pt;function ft(_t){var Ct,Tt=_t.length,St=this,Rt=0,Nt=St.i=St.j=0,Pt=St.S=[];for(Tt||(_t=[Tt++]);Rt<tt;)Pt[Rt]=Rt++;for(Rt=0;Rt<tt;Rt++)Pt[Rt]=Pt[Nt=ut&Nt+_t[Rt%Tt]+(Ct=Pt[Rt])],Pt[Nt]=Ct;(St.g=function(Bt){for(var Lt,zt=0,Dt=St.i,Vt=St.j,Gt=St.S;Bt--;)Lt=Gt[Dt=ut&Dt+1],zt=zt*tt+Gt[ut&(Gt[Dt]=Gt[Vt=ut&Vt+Lt])+(Gt[Vt]=Lt)];return St.i=Dt,St.j=Vt,zt})(tt)}function xt(_t,Ct){return Ct.i=_t.i,Ct.j=_t.j,Ct.S=_t.S.slice(),Ct}function vt(_t,Ct){var Tt=[],St=typeof _t,Rt;if(Ct&&St=="object")for(Rt in _t)try{Tt.push(vt(_t[Rt],Ct-1))}catch{}return Tt.length?Tt:St=="string"?_t:_t+"\0"}function At(_t,Ct){for(var Tt=_t+"",St,Rt=0;Rt<Tt.length;)Ct[ut&Rt]=ut&(St^=Ct[ut&Rt]*19)+Tt.charCodeAt(Rt++);return wt(Ct)}function Et(){try{var _t;return ht&&(_t=ht.randomBytes)?_t=_t(tt):(_t=new Uint8Array(tt),(Je.crypto||Je.msCrypto).getRandomValues(_t)),wt(_t)}catch{var Ct=Je.navigator,Tt=Ct&&Ct.plugins;return[+new Date,Je,Tt,Je.screen,wt(Ke)]}}function wt(_t){return String.fromCharCode.apply(0,_t)}if(At(Ye.random(),Ke),Xe.exports){Xe.exports=pt;try{ht=require$$0$1}catch{}}})([],Math)})(seedrandom$4);var seedrandomExports$2=seedrandom$4.exports,alea$4=aleaExports$2,xor128$4=xor128Exports$2,xorwow$4=xorwowExports$2,xorshift7$4=xorshift7Exports$2,xor4096$4=xor4096Exports$2,tychei$4=tycheiExports$2,sr$2=seedrandomExports$2;sr$2.alea=alea$4;sr$2.xor128=xor128$4;sr$2.xorwow=xorwow$4;sr$2.xorshift7=xorshift7$4;sr$2.xor4096=xor4096$4;sr$2.tychei=tychei$4;var seedrandom$3=sr$2;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MPRandGauss{constructor(Ke,Ye,Je,tt,st){this.mean=Ke,this.stdDev=Ye,this.dtype=Je,this.nextVal=NaN,this.truncated=tt,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const rt=st||Math.random();this.random=seedrandom$3.alea(rt.toString())}nextValue(){if(!isNaN(this.nextVal)){const tt=this.nextVal;return this.nextVal=NaN,tt}let Ke,Ye,Je=!1;for(;!Je;){let tt,st,rt;do tt=2*this.random()-1,st=2*this.random()-1,rt=tt*tt+st*st;while(rt>=1||rt===0);const it=Math.sqrt(-2*Math.log(rt)/rt);Ke=this.mean+this.stdDev*tt*it,Ye=this.mean+this.stdDev*st*it,(!this.truncated||this.isValidTruncated(Ke))&&(Je=!0)}return(!this.truncated||this.isValidTruncated(Ye))&&(this.nextVal=this.convertValue(Ye)),this.convertValue(Ke)}convertValue(Ke){return this.dtype==null||this.dtype==="float32"?Ke:Math.round(Ke)}isValidTruncated(Ke){return Ke<=this.upper&&Ke>=this.lower}}class UniformRandom{constructor(Ke=0,Ye=1,Je,tt){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=Ke,this.range=Ye-Ke,this.dtype=Je,tt==null&&(tt=Math.random()),typeof tt=="number"&&(tt=tt.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${Ke} - ${Ye} <= 1 and dtype is not float`);this.random=seedrandom$3.alea(tt)}convertValue(Ke){return this.canReturnFloat()?Ke:Math.round(Ke)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function randomNormal_(Xe,Ke=0,Ye=1,Je,tt){if(Je!=null&&Je==="bool")throw new Error(`Unsupported data type ${Je}`);const st=new MPRandGauss(Ke,Ye,Je,!1,tt),rt=buffer$1(Xe,Je);for(let it=0;it<rt.values.length;it++)rt.values[it]=st.nextValue();return rt.toTensor()}const randomNormal$1=op({randomNormal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function randomUniform_(Xe,Ke=0,Ye=1,Je="float32",tt){const st=buffer$1(Xe,Je),rt=new UniformRandom(Ke,Ye,null,tt);for(let it=0;it<st.values.length;it++)st.values[it]=rt.nextValue();return st.toTensor()}const randomUniform=op({randomUniform_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function range$4(Xe,Ke,Ye=1,Je="float32"){if(Ye===0)throw new Error("Cannot have a step of zero");const tt={start:Xe,stop:Ke,step:Ye,dtype:Je};return ENGINE.runKernel(Range,{},tt)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function real_(Xe){const Ye={input:convertToTensor(Xe,"input","real")};return ENGINE.runKernel(Real,Ye)}const real$2=op({real_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reciprocal_(Xe){const Ye={x:convertToTensor(Xe,"x","reciprocal")};return ENGINE.runKernel(Reciprocal,Ye)}const reciprocal$2=op({reciprocal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function relu_(Xe){const Ye={x:convertToTensor(Xe,"x","relu")};return ENGINE.runKernel(Relu$1,Ye)}const relu$2=op({relu_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function relu6_(Xe){const Ye={x:convertToTensor(Xe,"x","relu6")};return ENGINE.runKernel(Relu6$1,Ye)}const relu6$2=op({relu6_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse_(Xe,Ke){const Je={x:convertToTensor(Xe,"x","reverse")},tt={dims:Ke};return ENGINE.runKernel(Reverse,Je,tt)}const reverse$2=op({reverse_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function round_(Xe){const Ye={x:convertToTensor(Xe,"x","round")};return ENGINE.runKernel(Round,Ye)}const round$3=op({round_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rsqrt_(Xe){const Ye={x:convertToTensor(Xe,"x","rsqrt")};return ENGINE.runKernel(Rsqrt,Ye)}const rsqrt$2=op({rsqrt_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scalar(Xe,Ke){if((isTypedArray$3(Xe)&&Ke!=="string"||Array.isArray(Xe))&&Ke!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(Ke==="string"&&isTypedArray$3(Xe)&&!(Xe instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return makeTensor(Xe,[],[],Ke)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function selu_(Xe){const Ye={x:convertToTensor(Xe,"x","selu")};return ENGINE.runKernel(Selu$1,Ye)}const selu$2=op({selu_});function separableConv2d_(Xe,Ke,Ye,Je,tt,st=[1,1],rt="NHWC"){const it=convertToTensor(Xe,"x","separableConv2d"),ot=convertToTensor(Ke,"depthwiseFilter","separableConv2d"),at=convertToTensor(Ye,"pointwiseFilter","separableConv2d");let lt=it,ut=!1;if(it.rank===3&&(ut=!0,lt=reshape$2(it,[1,it.shape[0],it.shape[1],it.shape[2]])),rt==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");assert$2(lt.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${lt.rank}.`),assert$2(ot.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${ot.rank}.`),assert$2(at.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${ot.rank}.`),assert$2(at.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${at.shape[0]}.`),assert$2(at.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${at.shape[1]}.`);const ht=ot.shape[2],pt=ot.shape[3];assert$2(at.shape[2]===ht*pt,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${ht*pt}, but got ${at.shape[2]}.`);const ft=depthwiseConv2d$1(lt,ot,Je,tt,rt,st),vt=conv2d$2(ft,at,1,"valid",rt);return ut?reshape$2(vt,[vt.shape[1],vt.shape[2],vt.shape[3]]):vt}const separableConv2d=op({separableConv2d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sign_(Xe){const Ye={x:convertToTensor(Xe,"x","sign")};return ENGINE.runKernel(Sign,Ye)}const sign$3=op({sign_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sin_(Xe){const Ye={x:convertToTensor(Xe,"x","sin")};return ENGINE.runKernel(Sin,Ye)}const sin$2=op({sin_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sinh_(Xe){const Ye={x:convertToTensor(Xe,"x","sinh")};return ENGINE.runKernel(Sinh,Ye)}const sinh$2=op({sinh_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice1d_(Xe,Ke,Ye){const Je=convertToTensor(Xe,"x","slice1d");return assert$2(Je.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${Je.rank} tensor`),slice$4(Je,[Ke],[Ye])}const slice1d=op({slice1d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice2d_(Xe,Ke,Ye){const Je=convertToTensor(Xe,"x","slice2d");return assert$2(Je.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${Je.rank} tensor`),slice$4(Je,Ke,Ye)}const slice2d=op({slice2d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice3d_(Xe,Ke,Ye){const Je=convertToTensor(Xe,"x","slice3d");return assert$2(Je.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${Je.rank} tensor`),slice$4(Je,Ke,Ye)}const slice3d=op({slice3d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice4d_(Xe,Ke,Ye){const Je=convertToTensor(Xe,"x","slice4d");return assert$2(Je.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${Je.rank} tensor`),slice$4(Je,Ke,Ye)}const slice4d=op({slice4d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softmax_(Xe,Ke=-1){const Ye=convertToTensor(Xe,"logits","softmax","float32");if(Ke===-1&&(Ke=Ye.rank-1),Ke!==Ye.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${Ye.rank} and dim was ${Ke}`);const Je={logits:Ye},tt={dim:Ke};return ENGINE.runKernel(Softmax$2,Je,tt)}const softmax$2=op({softmax_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fft_(Xe){assert$2(Xe.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${Xe.dtype}.`);const Ke={input:Xe};return ENGINE.runKernel(FFT$2,Ke)}const fft$3=op({fft_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ifft_(Xe){assert$2(Xe.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${Xe.dtype}.`);const Ke={input:Xe};return ENGINE.runKernel(IFFT,Ke)}const ifft$2=op({ifft_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function irfft_(Xe){const Ke=Xe.shape[Xe.shape.length-1],Ye=Xe.size/Ke;let Je;if(Ke<=2){const tt=reshape$2(Xe,[Ye,Ke]);Je=ifft$2(tt)}else{const tt=[Ye,2*(Ke-1)],st=reshape$2(real$2(Xe),[Ye,Ke]),rt=reshape$2(imag$2(Xe),[Ye,Ke]),it=reverse$2(slice$4(st,[0,1],[Ye,Ke-2]),1),ot=mul(reverse$2(slice$4(rt,[0,1],[Ye,Ke-2]),1),scalar(-1)),at=concat$2([st,it],1),lt=concat$2([rt,ot],1),ut=reshape$2(complex$2(at,lt),[tt[0],tt[1]]);Je=ifft$2(ut)}if(Je=real$2(Je),Xe.rank===3&&Xe.shape[0]!==0){const tt=Je,st=Xe.shape[0];Je=reshape$2(Je,[st,Je.shape[0]/st,Je.shape[1]]),tt.dispose()}return Je}const irfft=op({irfft_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function split_(Xe,Ke,Ye=0){const tt={x:convertToTensor(Xe,"x","split")},st={numOrSizeSplits:Ke,axis:Ye};return ENGINE.runKernel(SplitV,tt,st)}const split=op({split_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rfft_(Xe,Ke){assert$2(Xe.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${Xe.dtype}`);let Ye=Xe.shape[Xe.shape.length-1];const Je=Xe.size/Ye;let tt;if(Ke!=null&&Ke<Ye){const ft=Xe.shape.map(vt=>0),xt=Xe.shape.map(vt=>vt);xt[Xe.shape.length-1]=Ke,tt=slice$4(Xe,ft,xt),Ye=Ke}else if(Ke!=null&&Ke>Ye){const ft=Xe.shape.map(xt=>xt);ft[Xe.shape.length-1]=Ke-Ye,tt=concat$2([Xe,zeros$1(ft)],Xe.shape.length-1),Ye=Ke}else tt=Xe;const st=zerosLike$2(tt),rt=reshape$2(complex$2(tt,st),[Je,Ye]),it=fft$3(rt),ot=Math.floor(Ye/2)+1,at=real$2(it),lt=imag$2(it),ut=split(at,[ot,Ye-ot],at.shape.length-1),ht=split(lt,[ot,Ye-ot],lt.shape.length-1),pt=tt.shape.slice();return pt[tt.shape.length-1]=ot,reshape$2(complex$2(ut[0],ht[0]),pt)}const rfft=op({rfft_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sqrt_(Xe){const Ye={x:convertToTensor(Xe,"x","sqrt")};return ENGINE.runKernel(Sqrt,Ye)}const sqrt$2=op({sqrt_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function squaredDifference_(Xe,Ke){let Ye=convertToTensor(Xe,"a","squaredDifference"),Je=convertToTensor(Ke,"b","squaredDifference");[Ye,Je]=makeTypesMatch(Ye,Je),assertAndGetBroadcastShape(Ye.shape,Je.shape);const tt={a:Ye,b:Je},st={};return ENGINE.runKernel(SquaredDifference,tt,st)}const squaredDifference$2=op({squaredDifference_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function squeeze_(Xe,Ke){const Ye=convertToTensor(Xe,"x","squeeze");return reshape$2(Ye,squeezeShape(Ye.shape,Ke).newShape)}const squeeze=op({squeeze_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stack_(Xe,Ke=0){const Ye=convertToTensorArray(Xe,"tensors","stack","string_or_numeric");assert$2(Ye.length>=1,()=>"Pass at least one tensor to tf.stack"),Ye.length>0&&assert$2(Ke<=Ye[0].rank,()=>"Axis must be <= rank of the tensor");const Je=Ye,tt={axis:Ke};return ENGINE.runKernel(Pack,Je,tt)}const stack$1=op({stack_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function step_(Xe,Ke=0){const Je={x:convertToTensor(Xe,"x","step")},tt={alpha:Ke};return ENGINE.runKernel(Step,Je,tt)}const step$2=op({step_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSlice_(Xe,Ke,Ye,Je,tt=0,st=0,rt=0,it=0,ot=0){const lt={x:convertToTensor(Xe,"x","stridedSlice")},ut={begin:Ke,end:Ye,strides:Je,beginMask:tt,endMask:st,ellipsisMask:rt,newAxisMask:it,shrinkAxisMask:ot};return ENGINE.runKernel(StridedSlice,lt,ut)}const stridedSlice$2=op({stridedSlice_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tan_(Xe){const Ye={x:convertToTensor(Xe,"x","tan")};return ENGINE.runKernel(Tan,Ye)}const tan$2=op({tan_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensor1d(Xe,Ke){assertNonNull(Xe);const Ye=inferShape(Xe,Ke);if(Ye.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return makeTensor(Xe,null,Ye,Ke)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensor2d(Xe,Ke,Ye){if(assertNonNull(Xe),Ke!=null&&Ke.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const Je=inferShape(Xe,Ye);if(Je.length!==2&&Je.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(Je.length===1&&Ke==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return makeTensor(Xe,Ke,Je,Ye)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function topk_(Xe,Ke=1,Ye=!0){const Je=convertToTensor(Xe,"x","topk");if(Je.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const tt=Je.shape[Je.shape.length-1];if(Ke>tt)throw new Error(`'k' passed to topk() must be <= the last dimension (${tt}) but got ${Ke}`);const st={x:Je},rt={k:Ke,sorted:Ye},[it,ot]=ENGINE.runKernel(TopK,st,rt);return{values:it,indices:ot}}const topk=op({topk_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function truncatedNormal_(Xe,Ke=0,Ye=1,Je,tt){if(Je!=null&&Je==="bool")throw new Error("Unsupported data type $ { dtype }");const st=new MPRandGauss(Ke,Ye,Je,!0,tt),rt=buffer$1(Xe,Je);for(let it=0;it<rt.values.length;it++)rt.values[it]=st.nextValue();return rt.toTensor()}const truncatedNormal=op({truncatedNormal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unique_(Xe,Ke=0){const Ye=convertToTensor(Xe,"x","unique","string_or_numeric");assert$2(Ye.rank>0,()=>"The input tensor must be at least 1D");const Je={x:Ye},tt={axis:Ke},[st,rt]=ENGINE.runKernel(Unique,Je,tt);return{values:st,indices:rt}}const unique$4=op({unique_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unsortedSegmentSum_(Xe,Ke,Ye){const Je=convertToTensor(Xe,"x","unsortedSegmentSum"),tt=convertToTensor(Ke,"segmentIds","unsortedSegmentSum","int32");assert$2(isInt(Ye),()=>"numSegments must be of dtype int");const st={x:Je,segmentIds:tt},rt={numSegments:Ye};return ENGINE.runKernel(UnsortedSegmentSum,st,rt)}const unsortedSegmentSum$2=op({unsortedSegmentSum_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unstack_(Xe,Ke=0){const Ye=convertToTensor(Xe,"x","unstack","string_or_numeric");assert$2(Ke>=-Ye.shape.length&&Ke<Ye.shape.length,()=>`Axis = ${Ke} is not in [-${Ye.shape.length}, ${Ye.shape.length})`);const Je={value:Ye},tt={axis:Ke};return ENGINE.runKernel(Unpack,Je,tt)}const unstack=op({unstack_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function variable(Xe,Ke=!0,Ye,Je){return ENGINE.makeVariable(Xe,Ke,Ye,Je)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function whereImpl$2(Xe,Ke){const Ye=[];for(let st=0;st<Ke.length;st++)Ke[st]&&Ye.push(st);const Je=buffer$1(Xe,"int32"),tt=buffer$1([Ye.length,Xe.length],"int32");for(let st=0;st<Ye.length;st++){const rt=Je.indexToLoc(Ye[st]),it=st*Xe.length;tt.values.set(rt,it)}return tt.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function notEqualStrict_(Xe,Ke){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const Ye=convertToTensor(Xe,"a","notEqualStrict"),Je=convertToTensor(Ke,"b","notEqualStrict");return assertShapesMatch(Ye.shape,Je.shape,"Error in notEqualStrict: "),notEqual$2(Ye,Je)}function lessStrict_(Xe,Ke){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const Ye=convertToTensor(Xe,"a","lessStrict"),Je=convertToTensor(Ke,"b","lessStrict");return assertShapesMatch(Ye.shape,Je.shape,"Error in lessStrict: "),less$2(Ye,Je)}function equalStrict_(Xe,Ke){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const Ye=convertToTensor(Xe,"a","equalStrict"),Je=convertToTensor(Ke,"b","equalStrict");return assertShapesMatch(Ye.shape,Je.shape,"Error in equalStrict: "),equal$2(Ye,Je)}function lessEqualStrict_(Xe,Ke){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const Ye=convertToTensor(Xe,"a","lessEqualStrict"),Je=convertToTensor(Ke,"b","lessEqualStrict");return assertShapesMatch(Ye.shape,Je.shape,"Error in lessEqualStrict: "),lessEqual$2(Ye,Je)}function greaterStrict_(Xe,Ke){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const Ye=convertToTensor(Xe,"a","greaterStrict"),Je=convertToTensor(Ke,"b","greaterStrict");return assertShapesMatch(Ye.shape,Je.shape,"Error in greaterStrict: "),greater$2(Ye,Je)}function greaterEqualStrict_(Xe,Ke){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const Ye=convertToTensor(Xe,"a","greaterEqualStrict"),Je=convertToTensor(Ke,"b","greaterEqualStrict");return assertShapesMatch(Ye.shape,Je.shape,"Error in greaterEqualStrict: "),greaterEqual$2(Ye,Je)}const equalStrict=op({equalStrict_}),greaterEqualStrict=op({greaterEqualStrict_}),greaterStrict=op({greaterStrict_}),lessEqualStrict=op({lessEqualStrict_}),lessStrict=op({lessStrict_}),notEqualStrict=op({notEqualStrict_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function addStrict_(Xe,Ke){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const Ye=convertToTensor(Xe,"a","addStrict"),Je=convertToTensor(Ke,"b","addStrict");return assertShapesMatch(Ye.shape,Je.shape,"Error in addStrict: "),add$1(Ye,Je)}function subStrict_(Xe,Ke){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const Ye=convertToTensor(Xe,"a","subStrict"),Je=convertToTensor(Ke,"b","subStrict");return assertShapesMatch(Ye.shape,Je.shape,"Error in subStrict: "),sub$2(Ye,Je)}function powStrict_(Xe,Ke){return deprecationWarn("strict variants of ops have been deprecated and will be removed in future"),assertShapesMatch(Xe.shape,Ke.shape,"Error in powStrict: "),pow$2(Xe,Ke)}function mulStrict_(Xe,Ke){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const Ye=convertToTensor(Xe,"a","mul"),Je=convertToTensor(Ke,"b","mul");return assertShapesMatch(Ye.shape,Je.shape,"Error in multiplyStrict: "),mul(Ye,Je)}function divStrict_(Xe,Ke){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const Ye=convertToTensor(Xe,"a","div"),Je=convertToTensor(Ke,"b","div");return assertShapesMatch(Ye.shape,Je.shape,"Error in divideStrict: "),div$1(Ye,Je)}function modStrict_(Xe,Ke){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const Ye=convertToTensor(Xe,"a","modStrict"),Je=convertToTensor(Ke,"b","modStrict");return assertShapesMatch(Ye.shape,Je.shape,"Error in modStrict: "),mod$2(Ye,Je)}function minimumStrict_(Xe,Ke){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const Ye=convertToTensor(Xe,"a","minimumStrict"),Je=convertToTensor(Ke,"b","minimumStrict");return assertShapesMatch(Ye.shape,Je.shape,"Error in minimumStrict: "),minimum$2(Ye,Je)}function maximumStrict_(Xe,Ke){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const Ye=convertToTensor(Xe,"a","maximumStrict"),Je=convertToTensor(Ke,"b","maximumStrict");return assertShapesMatch(Ye.shape,Je.shape,"Error in maximumStrict: "),maximum$2(Ye,Je)}function squaredDifferenceStrict_(Xe,Ke){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const Ye=convertToTensor(Xe,"a","squaredDifferenceStrict"),Je=convertToTensor(Ke,"b","squaredDifferenceStrict");return assertShapesMatch(Ye.shape,Je.shape,"Error in squaredDifferenceStrict: "),squaredDifference$2(Ye,Je)}const addStrict=op({addStrict_}),divStrict=op({divStrict_}),maximumStrict=op({maximumStrict_}),minimumStrict=op({minimumStrict_}),modStrict=op({modStrict_}),mulStrict=op({mulStrict_}),powStrict=op({powStrict_}),squaredDifferenceStrict=op({squaredDifferenceStrict_}),subStrict=op({subStrict_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function norm_(Xe,Ke="euclidean",Ye=null,Je=!1){Xe=convertToTensor(Xe,"x","norm");const tt=normImpl(Xe,Ke,Ye);let st=tt.shape;if(Je){const rt=parseAxisParam(Ye,Xe.shape);st=expandShapeToKeepDim(tt.shape,rt)}return reshape$2(tt,st)}function normImpl(Xe,Ke,Ye=null){if(Xe.rank===0)return abs$3(Xe);if(Xe.rank!==1&&Ye===null)return normImpl(reshape$2(Xe,[-1]),Ke,Ye);if(Xe.rank===1||typeof Ye=="number"||Array.isArray(Ye)&&Ye.length===1){if(Ke===1)return sum$2(abs$3(Xe),Ye);if(Ke===1/0)return max$4(abs$3(Xe),Ye);if(Ke===-1/0)return min$4(abs$3(Xe),Ye);if(Ke==="euclidean"||Ke===2)return sqrt$2(sum$2(pow$2(abs$3(Xe),scalar(2,"int32")),Ye));throw new Error(`Error in norm: invalid ord value: ${Ke}`)}if(Array.isArray(Ye)&&Ye.length===2){if(Ke===1)return max$4(sum$2(abs$3(Xe),Ye[0]),Ye[1]-1);if(Ke===1/0)return max$4(sum$2(abs$3(Xe),Ye[1]),Ye[0]);if(Ke===-1/0)return min$4(sum$2(abs$3(Xe),Ye[1]),Ye[0]);if(Ke==="fro"||Ke==="euclidean")return sqrt$2(sum$2(square$3(Xe),Ye));throw new Error(`Error in norm: invalid ord value: ${Ke}`)}throw new Error(`Error in norm: invalid axis: ${Ye}`)}const norm=op({norm_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getNoiseShape(Xe,Ke){if(Ke==null)return Xe.shape.slice();if(arraysEqual(Xe.shape,Ke))return Ke;if(Xe.shape.length===Ke.length){const Ye=[];for(let Je=0;Je<Xe.shape.length;Je++)Ke[Je]==null&&Xe.shape[Je]!=null?Ye.push(Xe.shape[Je]):Ye.push(Ke[Je]);return Ye}return Ke}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dropout_(Xe,Ke,Ye,Je){const tt=convertToTensor(Xe,"x","dropout");if(assert$2(tt.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${tt.dtype} tensor instead.`),assert$2(Ke>=0&&Ke<1,()=>`rate must be a float in the range [0, 1), but got ${Ke}.`),Ke===0)return Xe instanceof Tensor?tt.clone():tt;const st=getNoiseShape(tt,Ye),rt=1-Ke,it=div$1(floor$3(add$1(randomUniform(st,0,1,"float32",Je),rt)),rt);return mul(tt,it)}const dropout$1=op({dropout_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropFilter_(Xe,Ke,Ye,Je,tt,st="NHWC",rt){let it=Xe;Xe.rank===3&&(it=reshape$2(Xe,[1,Xe.shape[0],Xe.shape[1],Xe.shape[2]]));let ot=Ke;ot.rank===3&&(ot=reshape$2(Ke,[1,Ke.shape[0],Ke.shape[1],Ke.shape[2]])),assert$2(it.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${it.shape}.`),assert$2(ot.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${ot.shape}.`),assert$2(Ye.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${Ye}.`);const at=st==="NHWC"?it.shape[3]:it.shape[1],lt=st==="NHWC"?ot.shape[3]:ot.shape[1];assert$2(at===Ye[2],()=>`Error in conv2dDerFilter: depth of input ${at}) must match input depth in filter (${Ye[2]}.`),assert$2(lt===Ye[3],()=>`Error in conv2dDerFilter: depth of dy (${lt}) must match output depth for filter (${Ye[3]}).`),rt!=null&&assert$2(isInt(tt),()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${rt} but got pad ${tt}.`);const ut={x:it,dy:ot},ht={strides:Je,pad:tt,dataFormat:st,dimRoundingMode:rt,filterShape:Ye};return ENGINE.runKernel(Conv2DBackpropFilter,ut,ht)}const conv2DBackpropFilter$2=op({conv2DBackpropFilter_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getFusedDyActivation(Xe,Ke,Ye){if(Ye==null||Ye==="linear")return Xe;if(Ye==="relu")return mul(Xe,step$2(Ke));throw new Error(`Cannot compute gradient for fused activation ${Ye}.`)}function getFusedBiasGradient(Xe,Ke){let Ye=Ke;const Je=getReductionAxes(Xe.shape,Ke.shape);return Je.length>0&&(Ye=sum$2(Ye,Je)),reshape$2(Ye,Xe.shape)}function applyActivation$1(Xe,Ke,Ye,Je){if(Ke==="linear")return Xe;if(Ke==="relu")return relu$2(Xe);if(Ke==="elu")return elu$3(Xe);if(Ke==="relu6")return relu6$2(Xe);if(Ke==="prelu")return prelu$2(Xe,Ye);if(Ke==="leakyrelu")return leakyRelu$2(Xe,Je);throw new Error(`Unknown fused activation ${Ke}.`)}const shouldFuse=(Xe,Ke)=>!(Xe>0)||Ke==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedConv2d_({x:Xe,filter:Ke,strides:Ye,pad:Je,dataFormat:tt="NHWC",dilations:st=[1,1],dimRoundingMode:rt,bias:it,activation:ot="linear",preluActivationWeights:at,leakyreluAlpha:lt}){if(ot=ot||"linear",shouldFuse(ENGINE.state.gradientDepth,ot)===!1){let Ct=conv2d$2(Xe,Ke,Ye,Je,tt,st,rt);return it!=null&&(Ct=add$1(Ct,it)),applyActivation$1(Ct,ot,at,lt)}const ut=convertToTensor(Xe,"x","conv2d"),ht=convertToTensor(Ke,"filter","conv2d");let pt=ut,ft=!1;ut.rank===3&&(ft=!0,pt=reshape$2(ut,[1,ut.shape[0],ut.shape[1],ut.shape[2]])),assert$2(pt.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${pt.rank}.`),assert$2(ht.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${ht.rank}.`),rt!=null&&assert$2(isInt(Je),()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${rt} but got pad ${Je}.`),assert$2(pt.shape[3]===ht.shape[2],()=>`Error in conv2d: depth of input (${pt.shape[3]}) must match input depth for filter ${ht.shape[2]}.`),assert$2(eitherStridesOrDilationsAreOne(Ye,st),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${Ye} and dilations '${st}'`),assert$2(tt==="NHWC",()=>`Error in conv2d: got dataFormat of ${tt} but only NHWC is currently supported.`);const xt=computeConv2DInfo(pt.shape,ht.shape,Ye,st,Je,rt);let vt;it!=null&&(vt=convertToTensor(it,"bias","fused conv2d"),[vt]=makeTypesMatch(vt,ut),assertAndGetBroadcastShape(xt.outShape,vt.shape));let At;at!=null&&(At=convertToTensor(at,"prelu weights","fused conv2d"));const Et=(Ct,Tt)=>{const[St,Rt,Nt,Pt]=Tt,Bt=getFusedDyActivation(Ct,Nt,ot);assert$2(tupleValuesAreOne(st),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${st}'`);const Lt=conv2DBackpropInput$2(Rt.shape,Bt,St,Ye,Je),zt=conv2DBackpropFilter$2(Rt,Bt,St.shape,Ye,Je),Dt=[Lt,zt];if(Pt!=null){const Vt=getFusedBiasGradient(Pt,Bt);Dt.push(Vt)}return Dt},wt={x:pt,filter:ht,bias:vt,preluActivationWeights:At},_t={strides:Ye,pad:Je,dataFormat:tt,dilations:st,dimRoundingMode:rt,activation:ot,leakyreluAlpha:lt};return it==null?customGrad((Tt,St,Rt)=>{let Nt=ENGINE.runKernel(FusedConv2D,wt,_t);return Rt([St,Tt,Nt]),ft&&(Nt=reshape$2(Nt,[Nt.shape[1],Nt.shape[2],Nt.shape[3]])),{value:Nt,gradFunc:Et}})(pt,ht):customGrad((Tt,St,Rt,Nt)=>{let Pt=ENGINE.runKernel(FusedConv2D,wt,_t);return Nt([St,Tt,Pt,Rt]),ft&&(Pt=reshape$2(Pt,[Pt.shape[1],Pt.shape[2],Pt.shape[3]])),{value:Pt,gradFunc:Et}})(pt,ht,vt)}const conv2d$1=op({fusedConv2d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropFilter_(Xe,Ke,Ye,Je,tt,st=[1,1],rt){let it=Xe;Xe.rank===3&&(it=reshape$2(Xe,[1,Xe.shape[0],Xe.shape[1],Xe.shape[2]]));let ot=Ke;ot.rank===3&&(ot=reshape$2(Ke,[1,Ke.shape[0],Ke.shape[1],Ke.shape[2]]));const at={x:it,dy:ot},lt={strides:Je,pad:tt,dimRoundingMode:rt,dilations:st,filterShape:Ye};return ENGINE.runKernel(DepthwiseConv2dNativeBackpropFilter,at,lt)}const depthwiseConv2dNativeBackpropFilter$2=op({depthwiseConv2dNativeBackpropFilter_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropInput_(Xe,Ke,Ye,Je,tt,st=[1,1],rt){let it=Ke,ot=!1;Ke.rank===3&&(ot=!0,it=reshape$2(Ke,[1,Ke.shape[0],Ke.shape[1],Ke.shape[2]]));const at={dy:it,filter:Ye},lt={strides:Je,pad:tt,dimRoundingMode:rt,dilations:st,inputShape:Xe},ut=ENGINE.runKernel(DepthwiseConv2dNativeBackpropInput,at,lt);return ot?reshape$2(ut,[ut.shape[1],ut.shape[2],ut.shape[3]]):ut}const depthwiseConv2dNativeBackpropInput$2=op({depthwiseConv2dNativeBackpropInput_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedMatMul_({a:Xe,b:Ke,transposeA:Ye=!1,transposeB:Je=!1,bias:tt,activation:st="linear",preluActivationWeights:rt,leakyreluAlpha:it}){if(shouldFuse(ENGINE.state.gradientDepth,st)===!1){let Pt=matMul$1(Xe,Ke,Ye,Je);return tt!=null&&(Pt=add$1(Pt,tt)),applyActivation$1(Pt,st,rt,it)}let ot=convertToTensor(Xe,"a","fused matMul"),at=convertToTensor(Ke,"b","fused matMul");[ot,at]=makeTypesMatch(ot,at);const lt=Ye?ot.shape[ot.rank-2]:ot.shape[ot.rank-1],ut=Je?at.shape[at.rank-1]:at.shape[at.rank-2],ht=Ye?ot.shape[ot.rank-1]:ot.shape[ot.rank-2],pt=Je?at.shape[at.rank-2]:at.shape[at.rank-1],ft=ot.shape.slice(0,-2),xt=at.shape.slice(0,-2),vt=sizeFromShape(ft),At=sizeFromShape(xt);assert$2(ot.rank>=2&&at.rank>=2&&ot.rank===at.rank,()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${ot.rank} and ${at.rank}.`),assert$2(arraysEqual(ft,xt),()=>`Error in fused matMul: outer dimensions (${ft}) and (${xt}) of Tensors with shapes ${ot.shape} and ${at.shape} must match.`),assert$2(lt===ut,()=>`Error in fused matMul: inner shapes (${lt}) and (${ut}) of Tensors with shapes ${ot.shape} and ${at.shape} and transposeA=${Ye} and transposeB=${Je} must match.`);const Et=ot.shape.slice(0,-2).concat([ht,pt]),wt=Ye?reshape$2(ot,[vt,lt,ht]):reshape$2(ot,[vt,ht,lt]),_t=Je?reshape$2(at,[At,pt,ut]):reshape$2(at,[At,ut,pt]);let Ct;tt!=null&&(Ct=convertToTensor(tt,"bias","fused matMul"),[Ct]=makeTypesMatch(Ct,ot),assertAndGetBroadcastShape(Et,Ct.shape));let Tt;rt!=null&&(Tt=convertToTensor(rt,"prelu weights","fused matMul"));const St=(Pt,Bt)=>{const[Lt,zt,Dt,Vt]=Bt,Gt=getFusedDyActivation(reshape$2(Pt,Dt.shape),Dt,st);let Qt,jt;if(!Ye&&!Je?(Qt=matMul$1(Gt,zt,!1,!0),jt=matMul$1(Lt,Gt,!0,!1)):!Ye&&Je?(Qt=matMul$1(Gt,zt,!1,!1),jt=matMul$1(Gt,Lt,!0,!1)):Ye&&!Je?(Qt=matMul$1(zt,Gt,!1,!0),jt=matMul$1(Lt,Gt,!1,!1)):(Qt=matMul$1(zt,Gt,!0,!0),jt=matMul$1(Gt,Lt,!0,!0)),tt!=null){const Ht=getFusedBiasGradient(Vt,Gt);return[Qt,jt,Ht]}else return[Qt,jt]},Rt={a:wt,b:_t,bias:Ct,preluActivationWeights:Tt},Nt={transposeA:Ye,transposeB:Je,activation:st,leakyreluAlpha:it};return tt==null?customGrad((Bt,Lt,zt)=>{const Dt=ENGINE.runKernel(_FusedMatMul,Rt,Nt);return zt([Bt,Lt,Dt]),{value:reshape$2(Dt,Et),gradFunc:St}})(wt,_t):customGrad((Bt,Lt,zt,Dt)=>{const Vt=ENGINE.runKernel(_FusedMatMul,Rt,Nt);return Dt([Bt,Lt,Vt,zt]),{value:reshape$2(Vt,Et),gradFunc:St}})(wt,_t,Ct)}const matMul=op({fusedMatMul_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function binaryInsert(Xe,Ke,Ye){const Je=binarySearch(Xe,Ke,Ye),tt=Je<0?-(Je+1):Je;Xe.splice(tt,0,Ke)}function binarySearch(Xe,Ke,Ye){return binarySearch_(Xe,Ke,Ye||defaultComparator)}function defaultComparator(Xe,Ke){return Xe>Ke?1:Xe<Ke?-1:0}function binarySearch_(Xe,Ke,Ye){let Je=0,tt=Xe.length,st=0,rt=!1;for(;Je<tt;){st=Je+(tt-Je>>>1);const it=Ye(Ke,Xe[st]);it>0?Je=st+1:(tt=st,rt=!it)}return rt?Je:-Je-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nonMaxSuppressionV3Impl$2(Xe,Ke,Ye,Je,tt){return nonMaxSuppressionImpl_(Xe,Ke,Ye,Je,tt,0)}function nonMaxSuppressionV4Impl$2(Xe,Ke,Ye,Je,tt,st){return nonMaxSuppressionImpl_(Xe,Ke,Ye,Je,tt,0,!1,st,!0)}function nonMaxSuppressionV5Impl$2(Xe,Ke,Ye,Je,tt,st){return nonMaxSuppressionImpl_(Xe,Ke,Ye,Je,tt,st,!0)}function nonMaxSuppressionImpl_(Xe,Ke,Ye,Je,tt,st,rt=!1,it=!1,ot=!1){const at=[];for(let vt=0;vt<Ke.length;vt++)Ke[vt]>tt&&at.push({score:Ke[vt],boxIndex:vt,suppressBeginIndex:0});at.sort(ascendingComparator);const lt=st>0?-.5/st:0,ut=[],ht=[];for(;ut.length<Ye&&at.length>0;){const vt=at.pop(),{score:At,boxIndex:Et,suppressBeginIndex:wt}=vt;if(At<tt)break;let _t=!1;for(let Ct=ut.length-1;Ct>=wt;--Ct){const Tt=intersectionOverUnion(Xe,Et,ut[Ct]);if(Tt>=Je){_t=!0;break}if(vt.score=vt.score*suppressWeight(Je,lt,Tt),vt.score<=tt)break}vt.suppressBeginIndex=ut.length,_t||(vt.score===At?(ut.push(Et),ht.push(vt.score)):vt.score>tt&&binaryInsert(at,vt,ascendingComparator))}const pt=ut.length,ft=Ye-pt;it&&ft>0&&(ut.push(...new Array(ft).fill(0)),ht.push(...new Array(ft).fill(0)));const xt={selectedIndices:ut};return rt&&(xt.selectedScores=ht),ot&&(xt.validOutputs=pt),xt}function intersectionOverUnion(Xe,Ke,Ye){const Je=Xe.subarray(Ke*4,Ke*4+4),tt=Xe.subarray(Ye*4,Ye*4+4),st=Math.min(Je[0],Je[2]),rt=Math.min(Je[1],Je[3]),it=Math.max(Je[0],Je[2]),ot=Math.max(Je[1],Je[3]),at=Math.min(tt[0],tt[2]),lt=Math.min(tt[1],tt[3]),ut=Math.max(tt[0],tt[2]),ht=Math.max(tt[1],tt[3]),pt=(it-st)*(ot-rt),ft=(ut-at)*(ht-lt);if(pt<=0||ft<=0)return 0;const xt=Math.max(st,at),vt=Math.max(rt,lt),At=Math.min(it,ut),Et=Math.min(ot,ht),wt=Math.max(At-xt,0)*Math.max(Et-vt,0);return wt/(pt+ft-wt)}function suppressWeight(Xe,Ke,Ye){const Je=Math.exp(Ke*Ye*Ye);return Ye<=Xe?Je:0}function ascendingComparator(Xe,Ke){return Xe.score-Ke.score||Xe.score===Ke.score&&Ke.boxIndex-Xe.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinear_(Xe,Ke,Ye=!1,Je=!1){const tt=convertToTensor(Xe,"images","resizeBilinear");assert$2(tt.rank===3||tt.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${tt.rank}.`),assert$2(Ke.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${Ke}.`),assert$2(Je===!1||Ye===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let st=tt,rt=!1;tt.rank===3&&(rt=!0,st=reshape$2(tt,[1,tt.shape[0],tt.shape[1],tt.shape[2]]));const it={images:st},ot={alignCorners:Ye,halfPixelCenters:Je,size:Ke},at=ENGINE.runKernel(ResizeBilinear,it,ot);return rt?reshape$2(at,[at.shape[1],at.shape[2],at.shape[3]]):at}const resizeBilinear$2=op({resizeBilinear_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighbor_(Xe,Ke,Ye=!1,Je=!1){const tt=convertToTensor(Xe,"images","resizeNearestNeighbor");assert$2(tt.rank===3||tt.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${tt.rank}.`),assert$2(Ke.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${Ke}.`),assert$2(tt.dtype==="float32"||tt.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),assert$2(Je===!1||Ye===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let st=tt,rt=!1;tt.rank===3&&(rt=!0,st=reshape$2(tt,[1,tt.shape[0],tt.shape[1],tt.shape[2]]));const it={images:st},ot={alignCorners:Ye,halfPixelCenters:Je,size:Ke},at=ENGINE.runKernel(ResizeNearestNeighbor,it,ot);return rt?reshape$2(at,[at.shape[1],at.shape[2],at.shape[3]]):at}const resizeNearestNeighbor$2=op({resizeNearestNeighbor_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bandPart_(Xe,Ke,Ye){assert$2(Ke%1===0,()=>`bandPart(): numLower must be an integer, got ${Ke}.`),assert$2(Ye%1===0,()=>`bandPart(): numUpper must be an integer, got ${Ye}.`);const Je=convertToTensor(Xe,"a","bandPart");assert$2(Je.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${Je.rank}.`);const tt=Je.shape,[st,rt]=Je.shape.slice(-2);if(!(Ke<=st))throw new Error(`bandPart(): numLower (${Ke}) must not be greater than the number of rows (${st}).`);if(!(Ye<=rt))throw new Error(`bandPart(): numUpper (${Ye}) must not be greater than the number of columns (${rt}).`);Ke<0&&(Ke=st),Ye<0&&(Ye=rt);const it=reshape$2(range$4(0,st,1,"int32"),[-1,1]),ot=range$4(0,rt,1,"int32"),at=sub$2(it,ot),lt=logicalAnd$2(lessEqual$2(at,scalar(+Ke,"int32")),greaterEqual$2(at,scalar(-Ye,"int32"))),ut=zeros$1([st,rt],Je.dtype);return reshape$2(stack$1(unstack(reshape$2(Je,[-1,st,rt])).map(ht=>where(lt,ht,ut))),tt)}const bandPart=op({bandPart_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gramSchmidt_(Xe){let Ke;if(Array.isArray(Xe)){Ke=!1,assert$2(Xe!=null&&Xe.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const tt=Xe[0].shape[0];for(let st=1;st<Xe.length;++st)assert$2(Xe[st].shape[0]===tt,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${Xe[st].shape[0]} vs. ${tt})`)}else Ke=!0,Xe=split(Xe,Xe.shape[0],0).map(tt=>squeeze(tt,[0]));assert$2(Xe.length<=Xe[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${Xe.length}) exceeds number of dimensions (${Xe[0].shape[0]}).`);const Ye=[],Je=Xe;for(let tt=0;tt<Xe.length;++tt)Ye.push(ENGINE.tidy(()=>{let st=Je[tt];if(tt>0)for(let rt=0;rt<tt;++rt){const it=mul(sum$2(mul(Ye[rt],st)),Ye[rt]);st=sub$2(st,it)}return div$1(st,norm(st,"euclidean"))}));return Ke?stack$1(Ye,0):Ye}const gramSchmidt=op({gramSchmidt_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qr_(Xe,Ke=!1){if(assert$2(Xe.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${Xe.rank}`),Xe.rank===2)return qr2d(Xe,Ke);{const Ye=Xe.shape.slice(0,Xe.shape.length-2).reduce((ot,at)=>ot*at),Je=unstack(reshape$2(Xe,[Ye,Xe.shape[Xe.shape.length-2],Xe.shape[Xe.shape.length-1]]),0),tt=[],st=[];Je.forEach(ot=>{const[at,lt]=qr2d(ot,Ke);tt.push(at),st.push(lt)});const rt=reshape$2(stack$1(tt,0),Xe.shape),it=reshape$2(stack$1(st,0),Xe.shape);return[rt,it]}}function qr2d(Xe,Ke=!1){return ENGINE.tidy(()=>{assert$2(Xe.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${Xe.shape.length}D Tensor.`);const Ye=Xe.shape[0],Je=Xe.shape[1];let tt=eye(Ye),st=clone$1(Xe);const rt=tensor2d([[1]],[1,1]);let it=clone$1(rt);const ot=Ye>=Je?Je:Ye;for(let at=0;at<ot;++at){const lt=st,ut=it,ht=tt;[it,st,tt]=ENGINE.tidy(()=>{const pt=slice$4(st,[at,at],[Ye-at,1]),ft=norm(pt),xt=slice$4(st,[at,at],[1,1]),vt=where(greater$2(xt,0),tensor2d([[-1]]),tensor2d([[1]])),At=sub$2(xt,mul(vt,ft)),Et=div$1(pt,At);Et.shape[0]===1?it=clone$1(rt):it=concat$2([rt,slice$4(Et,[1,0],[Et.shape[0]-1,Et.shape[1]])],0);const wt=neg$2(div$1(matMul$1(vt,At),ft)),_t=slice$4(st,[at,0],[Ye-at,Je]),Ct=mul(wt,it),Tt=transpose$2(it);if(at===0)st=sub$2(_t,matMul$1(Ct,matMul$1(Tt,_t)));else{const Nt=sub$2(_t,matMul$1(Ct,matMul$1(Tt,_t)));st=concat$2([slice$4(st,[0,0],[at,Je]),Nt],0)}const St=transpose$2(Ct),Rt=slice$4(tt,[0,at],[Ye,tt.shape[1]-at]);if(at===0)tt=sub$2(Rt,matMul$1(matMul$1(Rt,it),St));else{const Nt=sub$2(Rt,matMul$1(matMul$1(Rt,it),St));tt=concat$2([slice$4(tt,[0,0],[Ye,at]),Nt],1)}return[it,st,tt]}),dispose([lt,ut,ht])}return!Ke&&Ye>Je&&(tt=slice$4(tt,[0,0],[Ye,Je]),st=slice$4(st,[0,0],[Je,Je])),[tt,st]})}const qr=op({qr_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const linalg={bandPart,gramSchmidt,qr};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Optimizer extends Serializable{minimize(Ke,Ye=!1,Je){const{value:tt,grads:st}=this.computeGradients(Ke,Je);if(Je!=null){const rt=Je.map(it=>({name:it.name,tensor:st[it.name]}));this.applyGradients(rt)}else this.applyGradients(st);return dispose(st),Ye?tt:(tt.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(Ke,Ye){return variableGrads(Ke,Ye)}dispose(){this.iterations_!=null&&dispose(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:scalar(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(Ke){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(Ke){return this.iterations_=(await Ke[0].tensor.data())[0],Ke.slice(1)}}Object.defineProperty(Optimizer,Symbol.hasInstance,{value:Xe=>Xe.minimize!=null&&Xe.computeGradients!=null&&Xe.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdadeltaOptimizer extends Optimizer{constructor(Ke,Ye,Je=null){super(),this.learningRate=Ke,this.rho=Ye,this.epsilon=Je,this.accumulatedGrads=[],this.accumulatedUpdates=[],Je==null&&(this.epsilon=ENGINE.backend.epsilon())}applyGradients(Ke){(Array.isArray(Ke)?Ke.map(Je=>Je.name):Object.keys(Ke)).forEach((Je,tt)=>{const st=ENGINE.registeredVariables[Je],rt=!1;this.accumulatedGrads[tt]==null&&(this.accumulatedGrads[tt]={originalName:`${Je}/accum_grad`,variable:tidy(()=>zerosLike$2(st).variable(rt))}),this.accumulatedUpdates[tt]==null&&(this.accumulatedUpdates[tt]={originalName:`${Je}/accum_var`,variable:tidy(()=>zerosLike$2(st).variable(rt))});const it=Array.isArray(Ke)?Ke[tt].tensor:Ke[Je];if(it==null)return;const ot=this.accumulatedGrads[tt].variable,at=this.accumulatedUpdates[tt].variable;tidy(()=>{const lt=add$1(mul(ot,this.rho),mul(square$3(it),1-this.rho)),ut=mul(div$1(sqrt$2(add$1(at,this.epsilon)),sqrt$2(add$1(ot,this.epsilon))),it),ht=add$1(mul(at,this.rho),mul(square$3(ut),1-this.rho));ot.assign(lt),at.assign(ht);const pt=add$1(mul(ut,-this.learningRate),st);st.assign(pt)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(dispose(this.accumulatedGrads.map(Ke=>Ke.variable)),dispose(this.accumulatedUpdates.map(Ke=>Ke.variable)))}async getWeights(){const Ke=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(Ke.map(Ye=>({name:Ye.originalName,tensor:Ye.variable})))}async setWeights(Ke){Ke=await this.extractIterations(Ke);const Ye=Ke.length/2,Je=!1;this.accumulatedGrads=Ke.slice(0,Ye).map(tt=>({originalName:tt.name,variable:tt.tensor.variable(Je)})),this.accumulatedUpdates=Ke.slice(Ye,Ye*2).map(tt=>({originalName:tt.name,variable:tt.tensor.variable(Je)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(Ke,Ye){return new Ke(Ye.learningRate,Ye.rho,Ye.epsilon)}}AdadeltaOptimizer.className="Adadelta";registerClass(AdadeltaOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdagradOptimizer extends Optimizer{constructor(Ke,Ye=.1){super(),this.learningRate=Ke,this.initialAccumulatorValue=Ye,this.accumulatedGrads=[]}applyGradients(Ke){(Array.isArray(Ke)?Ke.map(Je=>Je.name):Object.keys(Ke)).forEach((Je,tt)=>{const st=ENGINE.registeredVariables[Je];this.accumulatedGrads[tt]==null&&(this.accumulatedGrads[tt]={originalName:`${Je}/accumulator`,variable:tidy(()=>fill$2(st.shape,this.initialAccumulatorValue).variable(!1))});const rt=Array.isArray(Ke)?Ke[tt].tensor:Ke[Je];if(rt==null)return;const it=this.accumulatedGrads[tt].variable;tidy(()=>{const ot=add$1(it,square$3(rt));it.assign(ot);const at=add$1(mul(div$1(rt,sqrt$2(add$1(ot,ENGINE.backend.epsilon()))),-this.learningRate),st);st.assign(at)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&dispose(this.accumulatedGrads.map(Ke=>Ke.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(Ke=>({name:Ke.originalName,tensor:Ke.variable})))}async setWeights(Ke){Ke=await this.extractIterations(Ke);const Ye=!1;this.accumulatedGrads=Ke.map(Je=>({originalName:Je.name,variable:Je.tensor.variable(Ye)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(Ke,Ye){return new Ke(Ye.learningRate,Ye.initialAccumulatorValue)}}AdagradOptimizer.className="Adagrad";registerClass(AdagradOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdamOptimizer extends Optimizer{constructor(Ke,Ye,Je,tt=null){super(),this.learningRate=Ke,this.beta1=Ye,this.beta2=Je,this.epsilon=tt,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],tidy(()=>{this.accBeta1=scalar(Ye).variable(),this.accBeta2=scalar(Je).variable()}),tt==null&&(this.epsilon=ENGINE.backend.epsilon())}applyGradients(Ke){const Ye=Array.isArray(Ke)?Ke.map(Je=>Je.name):Object.keys(Ke);tidy(()=>{const Je=sub$2(1,this.accBeta1),tt=sub$2(1,this.accBeta2);Ye.forEach((st,rt)=>{const it=ENGINE.registeredVariables[st],ot=!1;this.accumulatedFirstMoment[rt]==null&&(this.accumulatedFirstMoment[rt]={originalName:`${st}/m`,variable:tidy(()=>zerosLike$2(it).variable(ot))}),this.accumulatedSecondMoment[rt]==null&&(this.accumulatedSecondMoment[rt]={originalName:`${st}/v`,variable:tidy(()=>zerosLike$2(it).variable(ot))});const at=Array.isArray(Ke)?Ke[rt].tensor:Ke[st];if(at==null)return;const lt=this.accumulatedFirstMoment[rt].variable,ut=this.accumulatedSecondMoment[rt].variable,ht=add$1(mul(lt,this.beta1),mul(at,1-this.beta1)),pt=add$1(mul(ut,this.beta2),mul(square$3(at),1-this.beta2)),ft=div$1(ht,Je),xt=div$1(pt,tt);lt.assign(ht),ut.assign(pt);const vt=add$1(mul(div$1(ft,add$1(sqrt$2(xt),this.epsilon)),-this.learningRate),it);it.assign(vt)}),this.accBeta1.assign(mul(this.accBeta1,this.beta1)),this.accBeta2.assign(mul(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&dispose(this.accumulatedFirstMoment.map(Ke=>Ke.variable)),this.accumulatedSecondMoment!=null&&dispose(this.accumulatedSecondMoment.map(Ke=>Ke.variable))}async getWeights(){const Ke=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(Ke.map(Ye=>({name:Ye.originalName,tensor:Ye.variable})))}async setWeights(Ke){Ke=await this.extractIterations(Ke),tidy(()=>{this.accBeta1.assign(pow$2(this.beta1,this.iterations_+1)),this.accBeta2.assign(pow$2(this.beta2,this.iterations_+1))});const Ye=Ke.length/2,Je=!1;this.accumulatedFirstMoment=Ke.slice(0,Ye).map(tt=>({originalName:tt.name,variable:tt.tensor.variable(Je)})),this.accumulatedSecondMoment=Ke.slice(Ye,Ye*2).map(tt=>({originalName:tt.name,variable:tt.tensor.variable(Je)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(Ke,Ye){return new Ke(Ye.learningRate,Ye.beta1,Ye.beta2,Ye.epsilon)}}AdamOptimizer.className="Adam";registerClass(AdamOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdamaxOptimizer extends Optimizer{constructor(Ke,Ye,Je,tt=null,st=0){super(),this.learningRate=Ke,this.beta1=Ye,this.beta2=Je,this.epsilon=tt,this.decay=st,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],tidy(()=>{this.iteration=scalar(0).variable(),this.accBeta1=scalar(Ye).variable()}),tt==null&&(this.epsilon=ENGINE.backend.epsilon())}applyGradients(Ke){const Ye=Array.isArray(Ke)?Ke.map(Je=>Je.name):Object.keys(Ke);tidy(()=>{const Je=sub$2(1,this.accBeta1),tt=div$1(-this.learningRate,add$1(mul(this.iteration,this.decay),1));Ye.forEach((st,rt)=>{const it=ENGINE.registeredVariables[st],ot=!1;this.accumulatedFirstMoment[rt]==null&&(this.accumulatedFirstMoment[rt]={originalName:`${st}/m`,variable:zerosLike$2(it).variable(ot)}),this.accumulatedWeightedInfNorm[rt]==null&&(this.accumulatedWeightedInfNorm[rt]={originalName:`${st}/v`,variable:zerosLike$2(it).variable(ot)});const at=Array.isArray(Ke)?Ke[rt].tensor:Ke[st];if(at==null)return;const lt=this.accumulatedFirstMoment[rt].variable,ut=this.accumulatedWeightedInfNorm[rt].variable,ht=add$1(mul(lt,this.beta1),mul(at,1-this.beta1)),pt=mul(ut,this.beta2),ft=abs$3(at),xt=maximum$2(pt,ft);lt.assign(ht),ut.assign(xt);const vt=add$1(mul(div$1(tt,Je),div$1(ht,add$1(xt,this.epsilon))),it);it.assign(vt)}),this.iteration.assign(add$1(this.iteration,1)),this.accBeta1.assign(mul(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&dispose(this.accumulatedFirstMoment.map(Ke=>Ke.variable)),this.accumulatedWeightedInfNorm!=null&&dispose(this.accumulatedWeightedInfNorm.map(Ke=>Ke.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(Ke){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(Ke,Ye){return new Ke(Ye.learningRate,Ye.beta1,Ye.beta2,Ye.epsilon,Ye.decay)}}AdamaxOptimizer.className="Adamax";registerClass(AdamaxOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SGDOptimizer extends Optimizer{constructor(Ke){super(),this.learningRate=Ke,this.setLearningRate(Ke)}applyGradients(Ke){(Array.isArray(Ke)?Ke.map(Je=>Je.name):Object.keys(Ke)).forEach((Je,tt)=>{const st=Array.isArray(Ke)?Ke[tt].tensor:Ke[Je];if(st==null)return;const rt=ENGINE.registeredVariables[Je];tidy(()=>{const it=add$1(mul(this.c,st),rt);rt.assign(it)})}),this.incrementIterations()}setLearningRate(Ke){this.learningRate=Ke,this.c!=null&&this.c.dispose(),this.c=keep(scalar(-Ke))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(Ke){if(Ke=await this.extractIterations(Ke),Ke.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(Ke,Ye){return new Ke(Ye.learningRate)}}SGDOptimizer.className="SGD";registerClass(SGDOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MomentumOptimizer extends SGDOptimizer{constructor(Ke,Ye,Je=!1){super(Ke),this.learningRate=Ke,this.momentum=Ye,this.useNesterov=Je,this.accumulations=[],this.m=scalar(this.momentum)}applyGradients(Ke){(Array.isArray(Ke)?Ke.map(Je=>Je.name):Object.keys(Ke)).forEach((Je,tt)=>{const st=ENGINE.registeredVariables[Je];this.accumulations[tt]==null&&(this.accumulations[tt]={originalName:`${Je}/momentum`,variable:tidy(()=>zerosLike$2(st).variable(!1))});const rt=this.accumulations[tt].variable,it=Array.isArray(Ke)?Ke[tt].tensor:Ke[Je];it!=null&&tidy(()=>{let ot;const at=add$1(mul(this.m,rt),it);this.useNesterov?ot=add$1(mul(this.c,add$1(it,mul(at,this.m))),st):ot=add$1(mul(this.c,at),st),rt.assign(at),st.assign(ot)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&dispose(this.accumulations.map(Ke=>Ke.variable))}setMomentum(Ke){this.momentum=Ke}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(Ke=>({name:Ke.originalName,tensor:Ke.variable})))}async setWeights(Ke){Ke=await this.extractIterations(Ke);const Ye=!1;this.accumulations=Ke.map(Je=>({originalName:Je.name,variable:Je.tensor.variable(Ye)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(Ke,Ye){return new Ke(Ye.learningRate,Ye.momentum,Ye.useNesterov)}}MomentumOptimizer.className="Momentum";registerClass(MomentumOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RMSPropOptimizer extends Optimizer{constructor(Ke,Ye=.9,Je=0,tt=null,st=!1){if(super(),this.learningRate=Ke,this.decay=Ye,this.momentum=Je,this.epsilon=tt,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=st,tt==null&&(this.epsilon=ENGINE.backend.epsilon()),Ke==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(Ke){(Array.isArray(Ke)?Ke.map(Je=>Je.name):Object.keys(Ke)).forEach((Je,tt)=>{const st=ENGINE.registeredVariables[Je],rt=!1;this.accumulatedMeanSquares[tt]==null&&(this.accumulatedMeanSquares[tt]={originalName:`${Je}/rms`,variable:tidy(()=>zerosLike$2(st).variable(rt))}),this.accumulatedMoments[tt]==null&&(this.accumulatedMoments[tt]={originalName:`${Je}/momentum`,variable:tidy(()=>zerosLike$2(st).variable(rt))}),this.accumulatedMeanGrads[tt]==null&&this.centered&&(this.accumulatedMeanGrads[tt]={originalName:`${Je}/mg`,variable:tidy(()=>zerosLike$2(st).variable(rt))});const it=Array.isArray(Ke)?Ke[tt].tensor:Ke[Je];if(it==null)return;const ot=this.accumulatedMeanSquares[tt].variable,at=this.accumulatedMoments[tt].variable;tidy(()=>{const lt=add$1(mul(ot,this.decay),mul(square$3(it),1-this.decay));if(this.centered){const ut=this.accumulatedMeanGrads[tt].variable,ht=add$1(mul(ut,this.decay),mul(it,1-this.decay)),pt=div$1(mul(it,this.learningRate),sqrt$2(sub$2(lt,add$1(square$3(ht),this.epsilon)))),ft=add$1(mul(at,this.momentum),pt);ot.assign(lt),ut.assign(ht),at.assign(ft);const xt=sub$2(st,ft);st.assign(xt)}else{const ut=add$1(mul(ot,this.decay),mul(square$3(it),1-this.decay)),ht=add$1(mul(at,this.momentum),div$1(mul(it,this.learningRate),sqrt$2(add$1(ut,this.epsilon))));ot.assign(ut),at.assign(ht);const pt=sub$2(st,ht);st.assign(pt)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&dispose(this.accumulatedMeanSquares.map(Ke=>Ke.variable)),this.accumulatedMeanGrads!=null&&this.centered&&dispose(this.accumulatedMeanGrads.map(Ke=>Ke.variable)),this.accumulatedMoments!=null&&dispose(this.accumulatedMoments.map(Ke=>Ke.variable))}async getWeights(){const Ke=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&Ke.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(Ke.map(Ye=>({name:Ye.originalName,tensor:Ye.variable})))}async setWeights(Ke){Ke=await this.extractIterations(Ke);const Ye=this.centered?Ke.length/3:Ke.length/2,Je=!1;this.accumulatedMeanSquares=Ke.slice(0,Ye).map(tt=>({originalName:tt.name,variable:tt.tensor.variable(Je)})),this.accumulatedMoments=Ke.slice(Ye,Ye*2).map(tt=>({originalName:tt.name,variable:tt.tensor.variable(Je)})),this.centered&&(this.accumulatedMeanGrads=Ke.slice(Ye*2,Ye*3).map(tt=>({originalName:tt.name,variable:tt.tensor.variable(Je)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(Ke,Ye){return new Ke(Ye.learningRate,Ye.decay,Ye.momentum,Ye.epsilon,Ye.centered)}}RMSPropOptimizer.className="RMSProp";registerClass(RMSPropOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OptimizerConstructors{static sgd(Ke){return new SGDOptimizer(Ke)}static momentum(Ke,Ye,Je=!1){return new MomentumOptimizer(Ke,Ye,Je)}static rmsprop(Ke,Ye=.9,Je=0,tt=null,st=!1){return new RMSPropOptimizer(Ke,Ye,Je,tt,st)}static adam(Ke=.001,Ye=.9,Je=.999,tt=null){return new AdamOptimizer(Ke,Ye,Je,tt)}static adadelta(Ke=.001,Ye=.95,Je=null){return new AdadeltaOptimizer(Ke,Ye,Je)}static adamax(Ke=.002,Ye=.9,Je=.999,tt=null,st=0){return new AdamaxOptimizer(Ke,Ye,Je,tt,st)}static adagrad(Ke,Ye=.1){return new AdagradOptimizer(Ke,Ye)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const train={sgd:OptimizerConstructors.sgd,momentum:OptimizerConstructors.momentum,adadelta:OptimizerConstructors.adadelta,adagrad:OptimizerConstructors.adagrad,rmsprop:OptimizerConstructors.rmsprop,adamax:OptimizerConstructors.adamax,adam:OptimizerConstructors.adam};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const delayCallback=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:Xe=>Xe();function nextFrame(){return new Promise(Xe=>delayCallback(()=>Xe()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function assertParamsConsistent(Xe,Ke){const Ye=Xe[0].length;Xe.forEach((tt,st)=>{assert$2(tt.length===Ye,()=>`Error in concat${Ye}D: rank of tensors[${st}] must be the same as the rank of the rest (${Ye})`)}),assert$2(Ke>=0&&Ke<Ye,()=>`Error in concat${Ye}D: axis must be between 0 and ${Ye-1}.`);const Je=Xe[0];Xe.forEach((tt,st)=>{for(let rt=0;rt<Ye;rt++)assert$2(rt===Ke||tt[rt]===Je[rt],()=>`Error in concat${Ye}D: Shape of tensors[${st}] (${tt}) does not match the shape of the rest (${Je}) along the non-concatenated axis ${st}.`)})}function computeOutShape$1(Xe,Ke){const Ye=Xe[0].slice();for(let Je=1;Je<Xe.length;Je++)Ye[Ke]+=Xe[Je][Ke];return Ye}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PARALLELIZE_THRESHOLD=30;function computeOptimalWindowSize(Xe){return Xe<=PARALLELIZE_THRESHOLD?Xe:nearestDivisor(Xe,Math.floor(Math.sqrt(Xe)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getImageCenter(Xe,Ke,Ye){const Je=Ye*(typeof Xe=="number"?Xe:Xe[0]),tt=Ke*(typeof Xe=="number"?Xe:Xe[1]);return[Je,tt]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getReshaped(Xe,Ke,Ye,Je=!0){let tt=[];if(Je)tt=tt.concat(Ke.slice(0)),tt.push(Xe[0]/Ye),tt=tt.concat(Xe.slice(1));else{tt=tt.concat(Xe[0]);const st=Ke.length;for(let rt=0;rt<st;++rt)tt=tt.concat([Xe[rt+1]/Ke[rt],Ke[rt]]);tt=tt.concat(Xe.slice(st+1))}return tt}function getPermuted(Xe,Ke,Ye=!0){const Je=[];if(Ye){Je.push(Ke);for(let tt=Ke+1;tt<Xe;++tt)tt<=2*Ke?(Je.push(tt),Je.push(tt-(Ke+1))):Je.push(tt)}else{const tt=[],st=[];for(let rt=1;rt<Xe;++rt)rt>=Ke*2+1||rt%2===1?st.push(rt):tt.push(rt);Je.push(...tt),Je.push(0),Je.push(...st)}return Je}function getReshapedPermuted(Xe,Ke,Ye,Je=!0){const tt=[];Je?tt.push(Xe[0]/Ye):tt.push(Xe[0]*Ye);for(let st=1;st<Xe.length;++st)st<=Ke.length?Je?tt.push(Ke[st-1]*Xe[st]):tt.push(Xe[st]/Ke[st-1]):tt.push(Xe[st]);return tt}function getSliceBeginCoords(Xe,Ke){const Ye=[0];for(let Je=0;Je<Ke;++Je)Ye.push(Xe[Je][0]);return Ye}function getSliceSize(Xe,Ke,Ye){const Je=Xe.slice(0,1);for(let tt=0;tt<Ye;++tt)Je.push(Xe[tt+1]-Ke[tt][0]-Ke[tt][1]);return Je}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SELU_SCALEALPHA=1.7580993408473768,SELU_SCALE=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ERF_P=.3275911,ERF_A1=.254829592,ERF_A2=-.284496736,ERF_A3=1.421413741,ERF_A4=-1.453152027,ERF_A5=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function warn$1(...Xe){env().getBool("IS_TEST")||console.warn(...Xe)}function log$4(...Xe){env().getBool("IS_TEST")||console.log(...Xe)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mergeRealAndImagArrays(Xe,Ke){if(Xe.length!==Ke.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${Xe.length}, imag: ${Ke.length}.`);const Ye=new Float32Array(Xe.length*2);for(let Je=0;Je<Ye.length;Je+=2)Ye[Je]=Xe[Je/2],Ye[Je+1]=Ke[Je/2];return Ye}function splitRealAndImagArrays(Xe){const Ke=new Float32Array(Xe.length/2),Ye=new Float32Array(Xe.length/2);for(let Je=0;Je<Xe.length;Je+=2)Ke[Je/2]=Xe[Je],Ye[Je/2]=Xe[Je+1];return{real:Ke,imag:Ye}}function complexWithEvenIndex(Xe){const Ke=Math.ceil(Xe.length/4),Ye=new Float32Array(Ke),Je=new Float32Array(Ke);for(let tt=0;tt<Xe.length;tt+=4)Ye[Math.floor(tt/4)]=Xe[tt],Je[Math.floor(tt/4)]=Xe[tt+1];return{real:Ye,imag:Je}}function complexWithOddIndex(Xe){const Ke=Math.floor(Xe.length/4),Ye=new Float32Array(Ke),Je=new Float32Array(Ke);for(let tt=2;tt<Xe.length;tt+=4)Ye[Math.floor(tt/4)]=Xe[tt],Je[Math.floor(tt/4)]=Xe[tt+1];return{real:Ye,imag:Je}}function getComplexWithIndex(Xe,Ke){const Ye=Xe[Ke*2],Je=Xe[Ke*2+1];return{real:Ye,imag:Je}}function assignToTypedArray(Xe,Ke,Ye,Je){Xe[Je*2]=Ke,Xe[Je*2+1]=Ye}function exponents(Xe,Ke){const Ye=new Float32Array(Xe/2),Je=new Float32Array(Xe/2);for(let tt=0;tt<Math.ceil(Xe/2);tt++){const st=(Ke?2:-2)*Math.PI*(tt/Xe);Ye[tt]=Math.cos(st),Je[tt]=Math.sin(st)}return{real:Ye,imag:Je}}function exponent(Xe,Ke,Ye){const Je=(Ye?2:-2)*Math.PI*(Xe/Ke),tt=Math.cos(Je),st=Math.sin(Je);return{real:tt,imag:st}}function prepareSplitSize(Xe,Ke,Ye=0){let Je=[];if(typeof Ke=="number")assert$2(Xe.shape[Ye]%Ke===0,()=>"Number of splits must evenly divide the axis."),Je=new Array(Ke).fill(Xe.shape[Ye]/Ke);else{const tt=Ke.reduce((rt,it)=>(it===-1&&(rt+=1),rt),0);assert$2(tt<=1,()=>"There should be only one negative value in split array.");const st=Ke.indexOf(-1);if(st!==-1){const rt=Ke.reduce((it,ot)=>ot>0?it+ot:it);Ke[st]=Xe.shape[Ye]-rt}assert$2(Xe.shape[Ye]===Ke.reduce((rt,it)=>rt+it),()=>"The sum of sizes must match the size of the axis dimension."),Je=Ke}return Je}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function segOpComputeOptimalWindowSize(Xe,Ke){let Ye=!1,Je;for(Xe<=PARALLELIZE_THRESHOLD?(Je=Xe,Ye=!0):Je=nearestDivisor(Xe,Math.floor(Math.sqrt(Xe)));!Ye;)Je>Ke||Je===Xe?Ye=!0:Je=nearestDivisor(Xe,Je+1);return Je}function computeOutShape(Xe,Ke,Ye){const Je=[],tt=Xe.length;for(let st=0;st<tt;st++)st!==Ke?Je.push(Xe[st]):Je.push(Ye);return Je}function collectGatherOpShapeInfo(Xe,Ke,Ye,Je){const tt=Ke.shape.length,st=Xe.shape.length;if(Je!==0&&(Je<-tt||Je>tt))throw new Error(`Expect batchDims in the range of [-${tt}, ${tt}], but got ${Je}`);if(Je<0&&(Je+=tt),Je>st)throw new Error(`batchDims (${Je}) must be less than rank(x) (
    ${st}).`);if(Ye<Je)throw new Error(`batchDims (${Je}) must be less than or equal to axis (${Ye}).`);for(let ut=0;ut<Je;++ut)if(Xe.shape[ut]!==Ke.shape[ut])throw new Error(`x.shape[${ut}]: ${Xe.shape[ut]} should be equal to indices.shape[${ut}]: ${Ke.shape[ut]}.`);const rt=Xe.shape[Ye],it=[];let ot=1,at=1,lt=1;for(let ut=0;ut<Je;++ut)it.push(Xe.shape[ut]),ot*=Xe.shape[ut];for(let ut=Je;ut<Ye;ut++)it.push(Xe.shape[ut]),at*=Xe.shape[ut];for(let ut=Je;ut<tt;ut++)it.push(Ke.shape[ut]);for(let ut=Ye+1;ut<st;ut++)it.push(Xe.shape[ut]),lt*=Xe.shape[ut];return{batchSize:ot,sliceSize:lt,outerSize:at,dimSize:rt,outputShape:it}}const segment_util=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo,computeOutShape,segOpComputeOptimalWindowSize},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function castTensor(Xe,Ke,Ye){if(Ke==="complex64"){if(Xe.dtype==="complex64")return Xe.clone();const Je=zeros$1(Xe.shape),tt=cast$3(Xe,"float32"),st=Ye.complex(tt,Je);return Je.dispose(),tt.dispose(),st}if(!hasEncodingLoss(Xe.dtype,Ke))return ENGINE.makeTensorFromDataId(Xe.dataId,Xe.shape,Ke);if(Xe.dtype==="complex64"){const Je=Ye.real(Xe),tt=cast$3(Je,Ke);return Je.dispose(),tt}if(Ke==="int32")return Ye.int(Xe);if(Ke==="bool"){const Je=scalar(0,Xe.dtype),tt=Ye.notEqual(Xe,Je);return Je.dispose(),tt}else throw new Error(`Error in Cast: failed to cast ${Xe.dtype} to ${Ke}`)}function reshapeTensor(Xe,Ke){return ENGINE.makeTensorFromDataId(Xe.dataId,Ke,Xe.dtype)}function fromUint8ToStringArray(Xe){try{return Xe.map(Ke=>decodeString(Ke))}catch(Ke){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${Ke}`)}}function fromStringArrayToUint8(Xe){return Xe.map(Ke=>encodeString(Ke))}const backend_util=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1,ERF_A2,ERF_A3,ERF_A4,ERF_A5,ERF_P,PARALLELIZE_THRESHOLD,SELU_SCALE,SELU_SCALEALPHA,applyActivation:applyActivation$1,assertAndGetBroadcastShape,assertAxesAreInnerMostDims,assertParamsConsistent,assignToTypedArray,axesAreInnerMostDims,calculateShapes,castTensor,combineLocations,complexWithEvenIndex,complexWithOddIndex,computeConv2DInfo,computeConv3DInfo,computeDefaultPad,computeDilation2DInfo,computeOptimalWindowSize,computeOutAndReduceShapes,computeOutShape:computeOutShape$1,computePool2DInfo,computePool3DInfo,convertConv2DDataFormat,eitherStridesOrDilationsAreOne,expandShapeToKeepDim,exponent,exponents,fromStringArrayToUint8,fromUint8ToStringArray,getAxesPermutation,getBroadcastDims:getBroadcastDims$1,getComplexWithIndex,getFusedBiasGradient,getFusedDyActivation,getImageCenter,getInnerMostAxes,getPermuted,getReductionAxes,getReshaped,getReshapedPermuted,getSliceBeginCoords,getSliceSize,getUndoAxesPermutation,log:log$4,mergeRealAndImagArrays,prepareAndValidate,prepareSplitSize,reshapeTensor,segment_util,shouldFuse,slice_util,splitRealAndImagArrays,tupleValuesAreOne,upcastType,validateInput,validateUpdateShape,warn:warn$1},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const absGradConfig={kernelName:Abs$1,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>mul(Xe,step$2(cast$3(Ye,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acosGradConfig={kernelName:Acos,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>{const Je=square$3(cast$3(Ye,"float32")),tt=sqrt$2(sub$2(scalar(1),Je));return neg$2(div$1(Xe,tt))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acoshGradConfig={kernelName:Acosh,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>{const Je=sqrt$2(sub$2(square$3(cast$3(Ye,"float32")),1));return div$1(Xe,Je)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const addGradConfig={kernelName:Add$2,inputsToSave:["a","b"],gradFunc:(Xe,Ke)=>{const[Ye,Je]=Ke,tt=assertAndGetBroadcastShape(Ye.shape,Je.shape);return{a:()=>{let it=Xe;const ot=getReductionAxes(Ye.shape,tt);return ot.length>0&&(it=sum$2(it,ot)),reshape$2(it,Ye.shape)},b:()=>{let it=Xe;const ot=getReductionAxes(Je.shape,tt);return ot.length>0&&(it=sum$2(it,ot)),reshape$2(it,Je.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const addNGradConfig={kernelName:AddN,saveAllInputs:!0,gradFunc:(Xe,Ke)=>{const Ye={};return Ke.forEach((Je,tt)=>{Ye[tt]=()=>Xe.clone()}),Ye}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const argMaxGradConfig={kernelName:ArgMax,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>zerosLike$2(Ye)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const argMinGradConfig={kernelName:ArgMin,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>zerosLike$2(Ye)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asinGradConfig={kernelName:Asin,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>div$1(Xe,sqrt$2(sub$2(scalar(1),square$3(cast$3(Ye,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asinhGradConfig={kernelName:Asinh,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>{const Je=sqrt$2(add$1(scalar(1),square$3(cast$3(Ye,"float32"))));return div$1(Xe,Je)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atan2GradConfig={kernelName:Atan2,inputsToSave:["a","b"],gradFunc:(Xe,Ke)=>{const[Ye,Je]=Ke,tt=assertAndGetBroadcastShape(Ye.shape,Je.shape);return{a:()=>{const it=add$1(square$3(Ye),square$3(Je));let ot=mul(Xe,div$1(Je,it));const at=getReductionAxes(Ye.shape,tt);return at.length>0&&(ot=sum$2(ot,at)),reshape$2(ot,Ye.shape)},b:()=>{const it=add$1(square$3(Ye),square$3(Je));let ot=neg$2(mul(Xe,div$1(Ye,it)));const at=getReductionAxes(Je.shape,tt);return at.length>0&&(ot=sum$2(ot,at)),reshape$2(ot,Je.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atanGradConfig={kernelName:Atan,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>div$1(Xe,add$1(square$3(cast$3(Ye,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atanhGradConfig={kernelName:Atanh,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>div$1(Xe,sub$2(scalar(1),square$3(cast$3(Ye,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3dGrad_(Xe,Ke,Ye,Je,tt=[1,1,1],st,rt){const it=convertToTensor(Xe,"dy","avgPool3dGrad"),ot=convertToTensor(Ke,"input","avgPool3dGrad");let at=it,lt=ot,ut=!1;ot.rank===4&&(ut=!0,at=reshape$2(it,[1,it.shape[0],it.shape[1],it.shape[2],it.shape[3]]),lt=reshape$2(ot,[1,ot.shape[0],ot.shape[1],ot.shape[2],ot.shape[3]])),assert$2(at.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${at.rank}.`),assert$2(lt.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${lt.rank}.`),assert$2(eitherStridesOrDilationsAreOne(Je,tt),()=>`Error in avgPool3dGrad: Either strides or dilations must be 1. Got strides ${Je} and dilations '${tt}'`),rt!=null&&assert$2(isInt(st),()=>`Error in avgPool3dGrad: pad must be an integer when using, dimRoundingMode ${rt} but got pad ${st}.`);const ht={dy:at,input:lt},pt={filterSize:Ye,strides:Je,dilations:tt,pad:st,dimRoundingMode:rt},ft=ENGINE.runKernel(AvgPool3DGrad,ht,pt);return ut?reshape$2(ft,[ft.shape[1],ft.shape[2],ft.shape[3],ft.shape[4]]):ft}const avgPool3dGrad=op({avgPool3dGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const avgPool3DGradConfig$1={kernelName:AvgPool3D,inputsToSave:["x"],gradFunc:(Xe,Ke,Ye)=>{const[Je]=Ke,{filterSize:tt,strides:st,dilations:rt,pad:it,dimRoundingMode:ot}=Ye,at=rt??[1,1,1];return{x:()=>avgPool3dGrad(Xe,Je,tt,st,at,it,ot)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPoolGrad_(Xe,Ke,Ye,Je,tt){const st=convertToTensor(Xe,"dy","avgPoolGrad"),rt=convertToTensor(Ke,"input","avgPoolGrad");assert$2(rt.rank===st.rank,()=>`Rank of input (${rt.rank}) does not match rank of dy (${st.rank})`);let it=rt,ot=st,at=!1;rt.rank===3&&(at=!0,it=reshape$2(rt,[1,rt.shape[0],rt.shape[1],rt.shape[2]]),ot=reshape$2(st,[1,st.shape[0],st.shape[1],st.shape[2]])),assert$2(ot.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${ot.rank}.`),assert$2(it.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${it.rank}.`);const lt={dy:ot,input:it},ut={filterSize:Ye,strides:Je,pad:tt},ht=ENGINE.runKernel(AvgPoolGrad,lt,ut);return at?reshape$2(ht,[ht.shape[1],ht.shape[2],ht.shape[3]]):ht}const avgPoolGrad$2=op({avgPoolGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const avgPoolGradConfig$2={kernelName:AvgPool,inputsToSave:["x"],gradFunc:(Xe,Ke,Ye)=>{const[Je]=Ke,{filterSize:tt,strides:st,pad:rt}=Ye;return{x:()=>avgPoolGrad$2(Xe,Je,tt,st,rt)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchMatMulGradConfig={kernelName:BatchMatMul,inputsToSave:["a","b"],gradFunc:(Xe,Ke,Ye)=>{const[Je,tt]=Ke,{transposeA:st,transposeB:rt}=Ye;return!st&&!rt?{a:()=>matMul$1(Xe,tt,!1,!0),b:()=>matMul$1(Je,Xe,!0,!1)}:!st&&rt?{a:()=>matMul$1(Xe,tt,!1,!1),b:()=>matMul$1(Xe,Je,!0,!1)}:st&&!rt?{a:()=>matMul$1(tt,Xe,!1,!0),b:()=>matMul$1(Je,Xe,!1,!1)}:{a:()=>matMul$1(tt,Xe,!0,!0),b:()=>matMul$1(Xe,Je,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchToSpaceNDGradConfig={kernelName:BatchToSpaceND,gradFunc:(Xe,Ke,Ye)=>{const{blockShape:Je,crops:tt}=Ye;return{x:()=>spaceToBatchND$2(Xe,Je,tt)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const broadcastToGradConfig={kernelName:BroadcastTo,gradFunc:(Xe,Ke,Ye)=>{const Je=Ye,tt=Je.inputShape,st=Je.shape,rt=Array.from(st);for(let ot=tt.length-1;ot>=0;ot--)if(tt[ot]===st[ot])rt[ot]=1;else if(tt[ot]!==1)throw new Error(`broadcastTo(): [${tt}] cannot be broadcast to [${st}].`);const it=[];for(let ot=0;ot<rt.length;ot++)rt[ot]>1&&it.push(ot);return{x:()=>sum$2(Xe,it,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const castGradConfig={kernelName:Cast,gradFunc:Xe=>({x:()=>Xe.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ceilGradConfig={kernelName:Ceil,gradFunc:Xe=>({x:()=>zerosLike$2(Xe)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const clipByValueGradConfig={kernelName:ClipByValue,inputsToSave:["x"],gradFunc:(Xe,Ke,Ye)=>{const[Je]=Ke,{clipValueMin:tt,clipValueMax:st}=Ye;return{x:()=>where(logicalAnd$2(greaterEqual$2(Je,tt),lessEqual$2(Je,st)),Xe,zerosLike$2(Xe))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const complexAbsGradConfig={kernelName:ComplexAbs,inputsToSave:["x"],gradFunc:absGradConfig.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const concatGradConfig={kernelName:Concat,saveAllInputs:!0,gradFunc:(Xe,Ke,Ye)=>{const Je=Ke.map(ot=>ot.shape),{axis:tt}=Ye,st=parseAxisParam(tt,Ke[0].shape)[0],rt=Je.map(ot=>ot[st]);return split(Xe,rt,st).map(ot=>()=>ot)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const conv2DGradConfig={kernelName:Conv2D$1,inputsToSave:["x","filter"],gradFunc:(Xe,Ke,Ye)=>{const[Je,tt]=Ke,{dilations:st,strides:rt,pad:it,dataFormat:ot}=Ye;return assert$2(tupleValuesAreOne(st),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${st}'`),{x:()=>conv2DBackpropInput$2(Je.shape,Xe,tt,rt,it,ot),filter:()=>conv2DBackpropFilter$2(Je,Xe,tt.shape,rt,it,ot)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const conv2DBackpropInputGradConfig={kernelName:Conv2DBackpropInput,inputsToSave:["dy","filter"],gradFunc:(Xe,Ke,Ye)=>{const[Je,tt]=Ke,{strides:st,pad:rt,dataFormat:it,dimRoundingMode:ot}=Ye;return{dy:()=>conv2d$2(Xe,tt,st,rt,it,1,ot),filter:()=>conv2DBackpropFilter$2(Xe,Je,tt.shape,st,rt,it,ot)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropFilter_(Xe,Ke,Ye,Je,tt){let st=Xe;Xe.rank===4&&(st=reshape$2(Xe,[1,Xe.shape[0],Xe.shape[1],Xe.shape[2],Xe.shape[3]]));let rt=Ke;rt.rank===4&&(rt=reshape$2(Ke,[1,Ke.shape[0],Ke.shape[1],Ke.shape[2],Ke.shape[3]])),assert$2(st.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${st.shape}.`),assert$2(rt.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${rt.shape}.`),assert$2(Ye.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${Ye}.`),assert$2(st.shape[4]===Ye[3],()=>`Error in conv3dDerFilter: depth of input ${st.shape[4]}) must match input depth in filter (${Ye[3]}.`),assert$2(rt.shape[4]===Ye[4],()=>`Error in conv3dDerFilter: depth of dy (${rt.shape[4]}) must match output depth for filter (${Ye[4]}).`);const it={x:st,dy:rt},ot={strides:Je,pad:tt,filterShape:Ye};return ENGINE.runKernel(Conv3DBackpropFilterV2,it,ot)}const conv3DBackpropFilter=op({conv3DBackpropFilter_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const conv3DGradConfig={kernelName:Conv3D$1,inputsToSave:["x","filter"],gradFunc:(Xe,Ke,Ye)=>{const{dilations:Je,strides:tt,pad:st}=Ye;assert$2(tupleValuesAreOne(Je),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${Je}'`);const[rt,it]=Ke;return{x:()=>conv3DBackpropInput$1(rt.shape,Xe,it,tt,st),filter:()=>conv3DBackpropFilter(rt,Xe,it.shape,tt,st)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cosGradConfig={kernelName:Cos,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>mul(neg$2(sin$2(cast$3(Ye,"float32"))),Xe)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const coshGradConfig={kernelName:Cosh,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>mul(sinh$2(cast$3(Ye,"float32")),Xe)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cumsumGradConfig={kernelName:Cumsum,inputsToSave:["x"],gradFunc:(Xe,Ke,Ye)=>{const[Je]=Ke,{axis:tt,exclusive:st,reverse:rt}=Ye;return{x:()=>{const it=getAxesPermutation([tt],Je.rank);let ot=cumsum$2(Xe,tt,st,!rt);return it!=null&&(ot=transpose$2(ot,it)),ot}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const depthwiseConv2dNativeGradConfig={kernelName:DepthwiseConv2dNative,inputsToSave:["x","filter"],gradFunc:(Xe,Ke,Ye)=>{const{dilations:Je,strides:tt,pad:st,dimRoundingMode:rt}=Ye,it=Je??[1,1];assert$2(tupleValuesAreOne(it),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${it}'`);const[ot,at]=Ke;return assert$2(ot.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${ot.rank}.`),assert$2(at.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${at.rank}.`),assert$2(ot.shape[3]===at.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${ot.shape[3]}) must match the inChannels dimension in filter ${at.shape[2]}.`),assert$2(eitherStridesOrDilationsAreOne(tt,it),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${tt} and dilations '${it}'.`),rt!=null&&assert$2(isInt(st),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${rt} but got pad ${st}.`),{x:()=>depthwiseConv2dNativeBackpropInput$2(ot.shape,Xe,at,tt,st,Je,rt),filter:()=>depthwiseConv2dNativeBackpropFilter$2(ot,Xe,at.shape,tt,st,Je,rt)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2dGradConfig={kernelName:Dilation2D,inputsToSave:["x","filter"],gradFunc:(Xe,Ke,Ye)=>{const[Je,tt]=Ke,st={x:Je,filter:tt,dy:Xe},rt={x:Je,filter:tt,dy:Xe};return{x:()=>ENGINE.runKernel(Dilation2DBackpropInput,st,Ye),filter:()=>ENGINE.runKernel(Dilation2DBackpropFilter,rt,Ye)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eluGradConfig$2={kernelName:Elu$1,outputsToSave:[!0],gradFunc:(Xe,Ke)=>{const[Ye]=Ke,Je={dy:Xe,y:Ye};return{x:()=>ENGINE.runKernel(EluGrad,Je)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const erfGradConfig={kernelName:Erf,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke,Je=mul(exp$2(neg$2(square$3(Ye))),2/Math.sqrt(Math.PI));return{x:()=>mul(Xe,Je)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expGradConfig={kernelName:Exp,outputsToSave:[!0],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>mul(Xe,Ye)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expandDimsGradConfig={kernelName:ExpandDims,inputsToSave:["input"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{input:()=>reshape$2(Xe,Ye.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expm1GradConfig={kernelName:Expm1,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>mul(Xe,exp$2(Ye))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorGradConfig={kernelName:Floor,gradFunc:Xe=>({x:()=>zerosLike$2(Xe)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorDivGradConfig={kernelName:FloorDiv,inputsToSave:["a","b"],gradFunc:(Xe,Ke)=>{const[Ye,Je]=Ke,tt=assertAndGetBroadcastShape(Ye.shape,Je.shape);return{a:()=>{const it=div$1(Xe,cast$3(Je,"float32")),ot=getReductionAxes(Ye.shape,tt);return ot.length>0?reshape$2(sum$2(it,ot),Ye.shape):it},b:()=>{let it=mul(Xe,cast$3(Ye,"float32"));const ot=getReductionAxes(Je.shape,tt);ot.length>0&&(it=reshape$2(sum$2(it,ot),Je.shape));const at=square$3(Je);return neg$2(div$1(it,cast$3(at,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fusedBatchNormGradConfig={kernelName:FusedBatchNorm,inputsToSave:["x","mean","variance","scale"],gradFunc:(Xe,Ke,Ye)=>{const{varianceEpsilon:Je}=Ye,[tt,st,rt,it]=Ke,ot=it??scalar(1),at=getReductionAxes(st.shape,tt.shape),lt=[];if(st.rank===1){for(let _t=0;_t<tt.shape.length-1;++_t)lt.push(tt.shape[_t]);lt.push(1)}const ut=sub$2(tt,st),ht=mul(Xe,ot),pt=rsqrt$2(add$1(rt,scalar(Je))),ft=mul(mul(mul(pt,pt),pt),scalar(-.5));return{x:()=>st.rank===1?reshape$2(mul(mul(Xe,tile$3(reshape$2(pt,[1,1,1,st.shape[0]]),lt)),ot),tt.shape):reshape$2(mul(mul(Xe,pt),ot),tt.shape),mean:()=>{let _t=mul(mul(pt,scalar(-1)),ht);return st.rank===1&&(_t=sum$2(_t,at)),reshape$2(_t,st.shape)},variance:()=>{let _t=mul(mul(ft,ut),ht);return st.rank===1&&(_t=sum$2(_t,at)),reshape$2(_t,st.shape)},scale:()=>{const _t=mul(ut,pt);let Ct=mul(Xe,_t);return st.rank===1&&(Ct=sum$2(Ct,at)),reshape$2(Ct,st.shape)},offset:()=>{let _t=Xe;return st.rank===1&&(_t=sum$2(_t,at)),reshape$2(_t,st.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gatherGradConfig={kernelName:GatherV2,inputsToSave:["x","indices"],gradFunc:(Xe,Ke,Ye)=>{const[Je,tt]=Ke,{axis:st}=Ye,rt=parseAxisParam(st,Je.shape)[0];return{x:()=>{const ot=Je.shape,at=tt.size,lt=ot.slice(0,rt),ut=lt.length,ht=ot.slice(st,ot.length).slice(1),pt=ht.length,ft=arrayRange(0,ut),xt=arrayRange(ut+1,ut+1+pt),vt=arrayConcat([lt,[at],ht]),At=reshape$2(Xe,vt),Et=reshape$2(tt,[at]),wt=arrayConcat([[ut],ft,xt]),_t=transpose$2(At,wt);let Ct=unsortedSegmentSum$2(_t,Et,Je.shape[rt]);const Tt=getUndoAxesPermutation(wt);return Ct=transpose$2(Ct,Tt),Ct},indices:()=>tt}}};function arrayRange(Xe,Ke){const Ye=[];for(let Je=Xe;Je<Ke;++Je)Ye.push(Je);return Ye}function arrayConcat(Xe){const Ke=[];for(let Ye=0;Ye<Xe.length;++Ye)for(let Je=0;Je<Xe[Ye].length;++Je)Ke.push(Xe[Ye][Je]);return Ke}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const greaterEqualGradConfig={kernelName:GreaterEqual,inputsToSave:["a","b"],gradFunc:(Xe,Ke)=>{const[Ye,Je]=Ke;return{a:()=>zerosLike$2(Ye),b:()=>zerosLike$2(Je)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const identityGradConfig={kernelName:Identity$1,gradFunc:Xe=>({x:()=>cast$3(Xe,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isFiniteGradConfig={kernelName:IsFinite,gradFunc:Xe=>({x:()=>zerosLike$2(Xe)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isInfGradConfig={kernelName:IsInf,gradFunc:Xe=>({x:()=>zerosLike$2(Xe)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isNanGradConfig={kernelName:IsNan,gradFunc:Xe=>({x:()=>zerosLike$2(Xe)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const leakyReluGradConfig={kernelName:LeakyRelu,inputsToSave:["x"],gradFunc:(Xe,Ke,Ye)=>{const[Je]=Ke,{alpha:tt}=Ye,st=greater$2(Je,0);return{x:()=>where(st,Xe,mul(Xe,tt))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const log1pGradConfig={kernelName:Log1p,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>div$1(Xe,add$1(Ye,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logGradConfig={kernelName:Log,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>div$1(Xe,cast$3(Ye,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logSoftmaxGradConfig={kernelName:LogSoftmax$1,inputsToSave:[],outputsToSave:[!0],gradFunc:(Xe,Ke,Ye)=>{const[Je]=Ke,{axis:tt}=Ye;return{logits:()=>{const rt=exp$2(Je);return sub$2(Xe,mul(sum$2(Xe,tt,!0),rt))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function localResponseNormalizationBackprop_(Xe,Ke,Ye,Je=5,tt=1,st=1,rt=.5){const it={x:Xe,y:Ke,dy:Ye},ot={depthRadius:Je,bias:tt,alpha:st,beta:rt};return ENGINE.runKernel(LRNGrad,it,ot)}const localResponseNormalizationBackprop=op({localResponseNormalizationBackprop_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lrnGradConfig={kernelName:LRN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(Xe,Ke,Ye)=>{const[Je,tt]=Ke,{depthRadius:st,bias:rt,alpha:it,beta:ot}=Ye;return{x:()=>localResponseNormalizationBackprop(Je,tt,Xe,st,rt,it,ot)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gradForMinAndMax(Xe,Ke,Ye,Je){return Ke.rank<Ye.rank&&(Ke=reshape$2(Ke,expandShapeToKeepDim(Ke.shape,Je))),Xe.rank<Ye.rank&&(Xe=reshape$2(Xe,expandShapeToKeepDim(Xe.shape,Je))),{x:()=>mul(Xe,cast$3(equal$2(Ye,Ke),Xe.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxGradConfig={kernelName:Max,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(Xe,Ke,Ye)=>{const Je=Ye,{reductionIndices:tt}=Je,st=Ke[0],rt=Ke[1],it=parseAxisParam(tt,st.shape),ot=gradForMinAndMax(Xe,rt,st,it);return{x:()=>ot.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maximumGradConfig={kernelName:Maximum$1,inputsToSave:["a","b"],gradFunc:(Xe,Ke)=>{const[Ye,Je]=Ke;return{a:()=>mul(Xe,cast$3(greaterEqual$2(Ye,Je),"float32")),b:()=>mul(Xe,cast$3(less$2(Ye,Je),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3dGrad_(Xe,Ke,Ye,Je,tt,st=[1,1,1],rt,it){const ot=convertToTensor(Xe,"dy","maxPool3dGrad"),at=convertToTensor(Ke,"input","maxPool3dGrad"),lt=convertToTensor(Ye,"output","maxPool3dGrad");let ut=ot,ht=at,pt=lt,ft=!1;at.rank===4&&(ft=!0,ut=reshape$2(ot,[1,ot.shape[0],ot.shape[1],ot.shape[2],ot.shape[3]]),ht=reshape$2(at,[1,at.shape[0],at.shape[1],at.shape[2],at.shape[3]]),pt=reshape$2(lt,[1,lt.shape[0],lt.shape[1],lt.shape[2],lt.shape[3]])),assert$2(ut.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${ut.rank}.`),assert$2(ht.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${ht.rank}.`),assert$2(pt.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${pt.rank}.`),assert$2(eitherStridesOrDilationsAreOne(tt,st),()=>`Error in maxPool3dGrad: Either strides or dilations must be 1. Got strides ${tt} and dilations '${st}'`),it!=null&&assert$2(isInt(rt),()=>`Error in maxPool3dGrad: pad must be an integer when using, dimRoundingMode ${it} but got pad ${rt}.`);const xt={dy:ut,input:ht,output:pt},vt={filterSize:Je,strides:tt,dilations:st,pad:rt,dimRoundingMode:it},At=ENGINE.runKernel(MaxPool3DGrad,xt,vt);return ft?reshape$2(At,[At.shape[1],At.shape[2],At.shape[3],At.shape[4]]):At}const maxPool3dGrad=op({maxPool3dGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPool3DGradConfig$1={kernelName:MaxPool3D,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(Xe,Ke,Ye)=>{const[Je,tt]=Ke,{filterSize:st,strides:rt,dilations:it,pad:ot,dimRoundingMode:at}=Ye,lt=it??[1,1,1];return{x:()=>maxPool3dGrad(Xe,Je,tt,st,rt,lt,ot,at)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolGrad_(Xe,Ke,Ye,Je,tt,st,rt){const it=convertToTensor(Xe,"dy","maxPoolGrad"),ot=convertToTensor(Ke,"input","maxPoolGrad"),at=convertToTensor(Ye,"output","maxPoolGrad");assert$2(ot.rank===it.rank,()=>`Rank of input (${ot.rank}) does not match rank of dy (${it.rank})`),assert$2(it.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${it.rank}.`),assert$2(ot.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${ot.rank}.`),rt!=null&&assert$2(isInt(st),()=>`Error in maxPoolGrad: pad must be an integer when using, dimRoundingMode ${rt} but got pad ${st}.`);const lt={dy:it,input:ot,output:at},ut={filterSize:Je,strides:tt,pad:st,dimRoundingMode:rt};return ENGINE.runKernel(MaxPoolGrad,lt,ut)}const maxPoolGrad$2=op({maxPoolGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPoolGradConfig$2={kernelName:MaxPool,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(Xe,Ke,Ye)=>{const[Je,tt]=Ke,{filterSize:st,strides:rt,pad:it}=Ye;return{x:()=>maxPoolGrad$2(Xe,Je,tt,st,rt,it)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const meanGradConfig={kernelName:Mean,inputsToSave:["x"],gradFunc:(Xe,Ke,Ye)=>{const[Je]=Ke,{axis:tt}=Ye,st=parseAxisParam(tt,Je.shape),it=computeOutAndReduceShapes(Je.shape,st)[1],ot=sizeFromShape(it);return{x:()=>{const lt=Je.shape.slice();st.forEach(pt=>{lt[pt]=1});const ut=reshape$2(Xe,lt);return div$1(mul(ut,ones(Je.shape,"float32")),ot)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const minGradConfig={kernelName:Min,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(Xe,Ke,Ye)=>{const Je=Ye,{axis:tt}=Je,[st,rt]=Ke,it=parseAxisParam(tt,st.shape),ot=gradForMinAndMax(Xe,rt,st,it);return{x:()=>ot.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const minimumGradConfig={kernelName:Minimum$1,inputsToSave:["a","b"],gradFunc:(Xe,Ke)=>{const[Ye,Je]=Ke;return{a:()=>mul(Xe,cast$3(lessEqual$2(Ye,Je),"float32")),b:()=>mul(Xe,cast$3(greater$2(Ye,Je),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mirrorPadGradConfig={kernelName:MirrorPad,inputsToSave:["x"],gradFunc:(Xe,Ke,Ye)=>{const Je=Ke[0],{paddings:tt}=Ye,st=tt.map(rt=>rt[0]);return{x:()=>slice$4(Xe,st,Je.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const modGradConfig={kernelName:Mod,inputsToSave:["a","b"],gradFunc:(Xe,Ke)=>{const[Ye,Je]=Ke,tt=assertAndGetBroadcastShape(Ye.shape,Je.shape);return{a:()=>{const it=getReductionAxes(Ye.shape,tt);return it.length>0?reshape$2(sum$2(Xe,it),Ye.shape):Xe},b:()=>{const it=mul(Xe,neg$2(floor$3(div$1(Ye,Je)))),ot=getReductionAxes(Je.shape,tt);return ot.length>0?reshape$2(sum$2(it,ot),Je.shape):it}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const multiplyGradConfig={kernelName:Multiply$2,inputsToSave:["a","b"],gradFunc:(Xe,Ke)=>{const[Ye,Je]=Ke,tt=assertAndGetBroadcastShape(Ye.shape,Je.shape);return{a:()=>{const it=mul(Xe,cast$3(Je,"float32")),ot=getReductionAxes(Ye.shape,tt);return ot.length>0?reshape$2(sum$2(it,ot),Ye.shape):it},b:()=>{const it=mul(Xe,cast$3(Ye,"float32")),ot=getReductionAxes(Je.shape,tt);return ot.length>0?reshape$2(sum$2(it,ot),Je.shape):it}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const negGradConfig={kernelName:Neg,gradFunc:Xe=>({x:()=>neg$2(Xe)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oneHotGradConfig={kernelName:OneHot,inputsToSave:["indices"],gradFunc:(Xe,Ke)=>{const Ye=Ke[0];return{indices:()=>zeros$1(Ye.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const onesLikeGradConfig={kernelName:OnesLike,gradFunc:Xe=>({x:()=>zerosLike$2(Xe)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const packGradConfig={kernelName:Pack,saveAllInputs:!0,gradFunc:(Xe,Ke,Ye)=>{const{axis:Je}=Ye;return unstack(Xe,Je).map(st=>()=>st)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const padV2GradConfig={kernelName:PadV2,inputsToSave:["x"],gradFunc:(Xe,Ke,Ye)=>{const Je=Ke[0],{paddings:tt}=Ye,st=tt.map(rt=>rt[0]);return{x:()=>slice$4(Xe,st,Je.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const powGradConfig={kernelName:Pow$1,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(Xe,Ke)=>{const[Ye,Je,tt]=Ke,st=Ye,rt=Je,it=assertAndGetBroadcastShape(st.shape,rt.shape);return{a:()=>{const lt=cast$3(rt,"float32");let ut=mul(Xe,mul(lt,pow$2(st,sub$2(lt,scalar(1)))));const ht=getReductionAxes(st.shape,it);return ht.length>0&&(ut=sum$2(ut,ht)),reshape$2(ut,st.shape)},b:()=>{const lt=greater$2(st,0),ut=where(lt,log$5(st),zerosLike$2(st));let ht=mul(Xe,mul(tt,ut));const pt=getReductionAxes(rt.shape,it);return pt.length>0&&(ht=sum$2(ht,pt)),reshape$2(ht,rt.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const preluGradConfig={kernelName:Prelu,inputsToSave:["x","alpha"],gradFunc:(Xe,Ke)=>{const[Ye,Je]=Ke,tt=greater$2(Ye,0);return{x:()=>where(tt,Xe,mul(Xe,Je)),alpha:()=>{let st=where(tt,zerosLike$2(Xe),mul(Xe,Ye));const rt=getReductionAxes(Je.shape,Xe.shape);return rt.length>0&&(st=sum$2(st,rt)),reshape$2(st,Je.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const divGradConfig={kernelName:RealDiv,inputsToSave:["a","b"],gradFunc:(Xe,Ke)=>{const[Ye,Je]=Ke,tt=assertAndGetBroadcastShape(Ye.shape,Je.shape);return{a:()=>{const it=div$1(Xe,cast$3(Je,"float32")),ot=getReductionAxes(Ye.shape,tt);return ot.length>0?reshape$2(sum$2(it,ot),Ye.shape):it},b:()=>{let it=mul(Xe,cast$3(Ye,"float32"));const ot=getReductionAxes(Je.shape,tt);ot.length>0&&(it=reshape$2(sum$2(it,ot),Je.shape));const at=square$3(Je);return neg$2(div$1(it,cast$3(at,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reciprocalGradConfig={kernelName:Reciprocal,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>div$1(Xe,neg$2(square$3(Ye)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const relu6GradConfig={kernelName:Relu6$1,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke,Je=mul(lessEqual$2(Ye,6),step$2(Ye));return{x:()=>mul(Xe,cast$3(Je,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reluGradConfig={kernelName:Relu$1,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>mul(Xe,cast$3(step$2(Ye),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reshapeGradConfig={kernelName:Reshape$1,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>reshape$2(Xe,Ye.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const resizeBilinearGradConfig$2={kernelName:ResizeBilinear,inputsToSave:["images"],gradFunc:(Xe,Ke,Ye)=>{const[Je]=Ke,tt={dy:Xe,images:Je};return{images:()=>ENGINE.runKernel(ResizeBilinearGrad,tt,Ye)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const resizeNearestNeighborGradConfig$2={kernelName:ResizeNearestNeighbor,inputsToSave:["images"],gradFunc:(Xe,Ke,Ye)=>{const[Je]=Ke,tt={dy:Xe,images:Je};return{images:()=>ENGINE.runKernel(ResizeNearestNeighborGrad,tt,Ye)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reverseGradConfig={kernelName:Reverse,gradFunc:(Xe,Ke,Ye)=>{const{dims:Je}=Ye,tt=parseAxisParam(Je,Xe.shape);return{x:()=>reverse$2(Xe,tt)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const roundGradConfig={kernelName:Round,gradFunc:Xe=>({x:()=>zerosLike$2(Xe)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rsqrtGradConfig={kernelName:Rsqrt,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>neg$2(div$1(Xe,mul(pow$2(Ye,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const selectGradConfig={kernelName:Select$2,inputsToSave:["condition"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{condition:()=>cast$3(zerosLike$2(Ye),"float32"),t:()=>mul(Xe,cast$3(Ye,Xe.dtype)),e:()=>mul(Xe,cast$3(logicalNot$2(Ye),Xe.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const seluGradConfig={kernelName:Selu$1,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>{const Je=greater$2(Ye,scalar(0)),tt=scalar(SELU_SCALEALPHA),st=scalar(SELU_SCALE),rt=mul(Xe,st),it=mul(mul(Xe,tt),exp$2(cast$3(Ye,"float32")));return where(Je,rt,it)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sigmoidGradConfig={kernelName:Sigmoid$1,outputsToSave:[!0],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>mul(Xe,mul(Ye,sub$2(scalar(1),Ye)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const signGradConfig={kernelName:Sign,gradFunc:Xe=>({x:()=>zerosLike$2(Xe)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sinGradConfig={kernelName:Sin,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>mul(cos$2(cast$3(Ye,"float32")),Xe)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sinhGradConfig={kernelName:Sinh,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>mul(cosh$2(cast$3(Ye,"float32")),Xe)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sliceGradConfig={kernelName:Slice,inputsToSave:["x"],gradFunc:(Xe,Ke,Ye)=>{const[Je]=Ke,{begin:tt,size:st}=Ye,rt=Je.shape,[it,ot]=parseSliceParams(Je,tt,st),at=[];for(let lt=0;lt<Xe.rank;lt++)at.push([it[lt],rt[lt]-it[lt]-ot[lt]]);return{x:()=>pad(Xe,at)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const softmaxGradConfig={kernelName:Softmax$2,outputsToSave:[!0],gradFunc:(Xe,Ke,Ye)=>{const[Je]=Ke,{dim:tt}=Ye,st=!0,rt=mul(Xe,Je);return{logits:()=>sub$2(rt,mul(sum$2(rt,[tt],st),Je))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const softplusGradConfig={kernelName:Softplus$1,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>mul(Xe,sigmoid$2(Ye))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const spaceToBatchNDGradConfig={kernelName:SpaceToBatchND,gradFunc:(Xe,Ke,Ye)=>{const{blockShape:Je,paddings:tt}=Ye;return{x:()=>batchToSpaceND$2(Xe,Je,tt)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const splitVGradConfig={kernelName:SplitV,gradFunc:(Xe,Ke,Ye)=>{const{axis:Je}=Ye;return{x:()=>concat$2(Xe,Je)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sqrtGradConfig={kernelName:Sqrt,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>div$1(Xe,mul(sqrt$2(cast$3(Ye,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squareGradConfig={kernelName:Square,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>mul(Xe,mul(cast$3(Ye,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squaredDifferenceGradConfig={kernelName:SquaredDifference,inputsToSave:["a","b"],gradFunc:(Xe,Ke)=>{const[Ye,Je]=Ke,tt=scalar(2);return{a:()=>mul(Xe,mul(tt,sub$2(Ye,Je))),b:()=>mul(Xe,mul(tt,sub$2(Je,Ye)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const stepGradConfig={kernelName:Step,gradFunc:Xe=>({x:()=>zerosLike$2(Xe)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const subGradConfig={kernelName:Sub,inputsToSave:["a","b"],gradFunc:(Xe,Ke)=>{const[Ye,Je]=Ke,tt=assertAndGetBroadcastShape(Ye.shape,Je.shape);return{a:()=>{let it=Xe;const ot=getReductionAxes(Ye.shape,tt);return ot.length>0&&(it=sum$2(it,ot)),reshape$2(it,Ye.shape)},b:()=>{let it=Xe;const ot=getReductionAxes(Je.shape,tt);return ot.length>0&&(it=sum$2(it,ot)),reshape$2(neg$2(it),Je.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sumGradConfig={kernelName:Sum,inputsToSave:["x"],gradFunc:(Xe,Ke,Ye)=>{const[Je]=Ke,tt=Je.shape.slice(),{axis:st}=Ye;parseAxisParam(st,Je.shape).forEach(at=>{tt[at]=1});const it=reshape$2(Xe,tt),ot=mul(it,ones(Je.shape,"float32"));return{x:()=>ot}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tanGradConfig={kernelName:Tan,inputsToSave:["x"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>div$1(Xe,square$3(cos$2(Ye)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tanhGradConfig={kernelName:Tanh$1,outputsToSave:[!0],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>mul(sub$2(scalar(1),square$3(Ye)),Xe)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tileGradConfig={kernelName:Tile,inputsToSave:["x"],gradFunc:(Xe,Ke,Ye)=>{const[Je]=Ke,{reps:tt}=Ye;return{x:()=>{let rt=zerosLike$2(Je);if(Je.rank===1)for(let it=0;it<tt[0];++it)rt=add$1(rt,slice$4(Xe,[it*Je.shape[0]],[Je.shape[0]]));else if(Je.rank===2)for(let it=0;it<tt[0];++it)for(let ot=0;ot<tt[1];++ot)rt=add$1(rt,slice$4(Xe,[it*Je.shape[0],ot*Je.shape[1]],[Je.shape[0],Je.shape[1]]));else if(Je.rank===3)for(let it=0;it<tt[0];++it)for(let ot=0;ot<tt[1];++ot)for(let at=0;at<tt[2];++at)rt=add$1(rt,slice$4(Xe,[it*Je.shape[0],ot*Je.shape[1],at*Je.shape[2]],[Je.shape[0],Je.shape[1],Je.shape[2]]));else if(Je.rank===4)for(let it=0;it<tt[0];++it)for(let ot=0;ot<tt[1];++ot)for(let at=0;at<tt[2];++at)for(let lt=0;lt<tt[3];++lt)rt=add$1(rt,slice$4(Xe,[it*Je.shape[0],ot*Je.shape[1],at*Je.shape[2],lt*Je.shape[3]],[Je.shape[0],Je.shape[1],Je.shape[2],Je.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${Je.rank} tensors yet.`);return rt}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const transposeGradConfig={kernelName:Transpose,gradFunc:(Xe,Ke,Ye)=>{const Je=Ye,{perm:tt}=Je,st=getUndoAxesPermutation(tt);return{x:()=>transpose$2(Xe,st)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const unpackGradConfig={kernelName:Unpack,gradFunc:(Xe,Ke,Ye)=>{const Je=Ye,{axis:tt}=Je;return{value:()=>stack$1(Xe,tt)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const unsortedSegmentSumGradConfig={kernelName:UnsortedSegmentSum,inputsToSave:["segmentIds"],gradFunc:(Xe,Ke)=>{const[Ye]=Ke;return{x:()=>gatherDropNegatives(Xe,Ye)}}};function gatherDropNegatives(Xe,Ke){const Ye=maximum$2(Ke,zerosLike$2(Ke)),Je=gather$1(Xe,Ye);let tt=greaterEqual$2(Ke,scalar(0,"int32"));const st=Je.rank-tt.rank;for(let it=0;it<st;++it)tt=expandDims$3(tt,it+1);tt=logicalAnd$2(tt,ones(Je.shape,"bool"));const rt=zerosLike$2(Je);return where(tt,Je,rt)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zerosLikeGradConfig={kernelName:ZerosLike,gradFunc:Xe=>({x:()=>zerosLike$2(Xe)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gradConfigs=[absGradConfig,acosGradConfig,acoshGradConfig,addGradConfig,addNGradConfig,argMaxGradConfig,argMinGradConfig,asinGradConfig,asinhGradConfig,atan2GradConfig,atanGradConfig,atanhGradConfig,avgPool3DGradConfig$1,avgPoolGradConfig$2,batchMatMulGradConfig,batchToSpaceNDGradConfig,broadcastToGradConfig,castGradConfig,ceilGradConfig,clipByValueGradConfig,complexAbsGradConfig,concatGradConfig,conv2DBackpropInputGradConfig,conv2DGradConfig,conv3DGradConfig,cosGradConfig,coshGradConfig,cumsumGradConfig,depthwiseConv2dNativeGradConfig,dilation2dGradConfig,divGradConfig,eluGradConfig$2,erfGradConfig,expGradConfig,expandDimsGradConfig,expm1GradConfig,floorDivGradConfig,floorGradConfig,fusedBatchNormGradConfig,gatherGradConfig,greaterEqualGradConfig,identityGradConfig,isFiniteGradConfig,isInfGradConfig,isNanGradConfig,leakyReluGradConfig,log1pGradConfig,logGradConfig,logSoftmaxGradConfig,lrnGradConfig,maxGradConfig,maxGradConfig,maximumGradConfig,maxPool3DGradConfig$1,maxPoolGradConfig$2,meanGradConfig,minGradConfig,minimumGradConfig,mirrorPadGradConfig,modGradConfig,multiplyGradConfig,negGradConfig,oneHotGradConfig,onesLikeGradConfig,packGradConfig,padV2GradConfig,padV2GradConfig,powGradConfig,preluGradConfig,reciprocalGradConfig,relu6GradConfig,reluGradConfig,reshapeGradConfig,resizeBilinearGradConfig$2,resizeNearestNeighborGradConfig$2,reverseGradConfig,roundGradConfig,rsqrtGradConfig,selectGradConfig,seluGradConfig,sigmoidGradConfig,signGradConfig,sinGradConfig,sinhGradConfig,sliceGradConfig,softmaxGradConfig,softplusGradConfig,spaceToBatchNDGradConfig,spaceToBatchNDGradConfig,splitVGradConfig,splitVGradConfig,sqrtGradConfig,squaredDifferenceGradConfig,squareGradConfig,stepGradConfig,subGradConfig,sumGradConfig,tanGradConfig,tanhGradConfig,tileGradConfig,transposeGradConfig,unpackGradConfig,unsortedSegmentSumGradConfig,zerosLikeGradConfig];for(const Xe of gradConfigs)registerGradient(Xe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.abs=function(){return this.throwIfDisposed(),abs$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.acos=function(){return this.throwIfDisposed(),acos$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.acosh=function(){return this.throwIfDisposed(),acosh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.addStrict=function(Xe){return this.throwIfDisposed(),addStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.add=function(Xe){return this.throwIfDisposed(),add$1(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.all=function(Xe,Ke){return this.throwIfDisposed(),all$2(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.any=function(Xe,Ke){return this.throwIfDisposed(),any$2(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.argMax=function(Xe){return this.throwIfDisposed(),argMax$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.argMin=function(Xe){return this.throwIfDisposed(),argMin$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.asScalar=function(){return this.throwIfDisposed(),assert$2(this.size===1,()=>"The array must have only 1 element."),reshape$2(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.asType=function(Xe){return this.throwIfDisposed(),cast$3(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as1D=function(){return this.throwIfDisposed(),reshape$2(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as2D=function(Xe,Ke){return this.throwIfDisposed(),reshape$2(this,[Xe,Ke])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as3D=function(Xe,Ke,Ye){return this.throwIfDisposed(),reshape$2(this,[Xe,Ke,Ye])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as4D=function(Xe,Ke,Ye,Je){return this.throwIfDisposed(),reshape$2(this,[Xe,Ke,Ye,Je])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as5D=function(Xe,Ke,Ye,Je,tt){return this.throwIfDisposed(),reshape$2(this,[Xe,Ke,Ye,Je,tt])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.asin=function(){return this.throwIfDisposed(),asin$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.asinh=function(){return this.throwIfDisposed(),asinh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.atan=function(){return this.throwIfDisposed(),atan$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.atan2=function(Xe){return this.throwIfDisposed(),atan2$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.atanh=function(){return this.throwIfDisposed(),atanh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.avgPool=function(Xe,Ke,Ye,Je){return this.throwIfDisposed(),avgPool$2(this,Xe,Ke,Ye,Je)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.batchToSpaceND=function(Xe,Ke){return this.throwIfDisposed(),batchToSpaceND$2(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.batchNorm=function(Xe,Ke,Ye,Je,tt){return this.throwIfDisposed(),batchNorm$2(this,Xe,Ke,Ye,Je,tt)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.broadcastTo=function(Xe){return this.throwIfDisposed(),broadcastTo(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.cast=function(Xe){return this.throwIfDisposed(),cast$3(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.ceil=function(){return this.throwIfDisposed(),ceil$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.clipByValue=function(Xe,Ke){return this.throwIfDisposed(),clipByValue$1(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.concat=function(Xe,Ke){return this.throwIfDisposed(),Xe instanceof Tensor&&(Xe=[Xe]),concat$2([this,...Xe],Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.conv1d=function(Xe,Ke,Ye,Je,tt,st){return this.throwIfDisposed(),conv1d(this,Xe,Ke,Ye,Je,tt,st)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.conv2dTranspose=function(Xe,Ke,Ye,Je,tt){return this.throwIfDisposed(),conv2dTranspose(this,Xe,Ke,Ye,Je,tt)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.conv2d=function(Xe,Ke,Ye,Je,tt,st){return this.throwIfDisposed(),conv2d$2(this,Xe,Ke,Ye,Je,tt,st)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.cos=function(){return this.throwIfDisposed(),cos$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.cosh=function(){return this.throwIfDisposed(),cosh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.cumsum=function(Xe,Ke,Ye){return this.throwIfDisposed(),cumsum$2(this,Xe,Ke,Ye)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.depthToSpace=function(Xe,Ke){return this.throwIfDisposed(),depthToSpace$2(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.depthwiseConv2D=function(Xe,Ke,Ye,Je,tt,st){return deprecationWarn("depthwiseConv2D is deprecated, use depthwiseConv2d instead"),this.throwIfDisposed(),depthwiseConv2d$1(this,Xe,Ke,Ye,Je,tt,st)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.depthwiseConv2d=function(Xe,Ke,Ye,Je,tt,st){return this.throwIfDisposed(),depthwiseConv2d$1(this,Xe,Ke,Ye,Je,tt,st)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.dilation2d=function(Xe,Ke,Ye,Je,tt){return this.throwIfDisposed(),dilation2d(this,Xe,Ke,Ye,Je,tt)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.divNoNan=function(Xe){return this.throwIfDisposed(),divNoNan(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.divStrict=function(Xe){return this.throwIfDisposed(),divStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.div=function(Xe){return this.throwIfDisposed(),div$1(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.dot=function(Xe){return this.throwIfDisposed(),dot$1(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.elu=function(){return this.throwIfDisposed(),elu$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.equalStrict=function(Xe){return this.throwIfDisposed(),equalStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.equal=function(Xe){return this.throwIfDisposed(),equal$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.erf=function(){return this.throwIfDisposed(),erf$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.exp=function(){return this.throwIfDisposed(),exp$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.expandDims=function(Xe){return this.throwIfDisposed(),expandDims$3(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.expm1=function(){return this.throwIfDisposed(),expm1$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.fft=function(){return this.throwIfDisposed(),fft$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.flatten=function(){return this.throwIfDisposed(),reshape$2(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.floor=function(){return this.throwIfDisposed(),floor$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.floorDiv=function(Xe){return this.throwIfDisposed(),floorDiv$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.gather=function(Xe,Ke){return this.throwIfDisposed(),gather$1(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.greaterEqualStrict=function(Xe){return this.throwIfDisposed(),greaterEqualStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.greaterEqual=function(Xe){return this.throwIfDisposed(),greaterEqual$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.greaterStrict=function(Xe){return this.throwIfDisposed(),greaterStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.greater=function(Xe){return this.throwIfDisposed(),greater$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.ifft=function(){return this.throwIfDisposed(),ifft$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.irfft=function(){return this.throwIfDisposed(),irfft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.isFinite=function(){return this.throwIfDisposed(),isFinite$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.isInf=function(){return this.throwIfDisposed(),isInf$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.isNaN=function(){return this.throwIfDisposed(),isNaN$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.leakyRelu=function(Xe){return this.throwIfDisposed(),leakyRelu$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.lessEqualStrict=function(Xe){return this.throwIfDisposed(),lessEqualStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.lessEqual=function(Xe){return this.throwIfDisposed(),lessEqual$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.lessStrict=function(Xe){return this.throwIfDisposed(),lessStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.less=function(Xe){return this.throwIfDisposed(),less$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.localResponseNormalization=function(Xe,Ke,Ye,Je){return this.throwIfDisposed(),localResponseNormalization(this,Xe,Ke,Ye,Je)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logSigmoid=function(){return this.throwIfDisposed(),logSigmoid(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logSoftmax=function(Xe){return this.throwIfDisposed(),logSoftmax(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logSumExp=function(Xe,Ke){return this.throwIfDisposed(),logSumExp(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.log=function(){return this.throwIfDisposed(),log$5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.log1p=function(){return this.throwIfDisposed(),log1p$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logicalAnd=function(Xe){return this.throwIfDisposed(),logicalAnd$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logicalNot=function(){return this.throwIfDisposed(),logicalNot$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logicalOr=function(Xe){return this.throwIfDisposed(),logicalOr$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logicalXor=function(Xe){return this.throwIfDisposed(),logicalXor(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.matMul=function(Xe,Ke,Ye){return this.throwIfDisposed(),matMul$1(this,Xe,Ke,Ye)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.maxPool=function(Xe,Ke,Ye,Je){return this.throwIfDisposed(),maxPool$2(this,Xe,Ke,Ye,Je)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.max=function(Xe,Ke){return this.throwIfDisposed(),max$4(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.maximumStrict=function(Xe){return this.throwIfDisposed(),maximumStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.maximum=function(Xe){return this.throwIfDisposed(),maximum$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mean=function(Xe,Ke){return this.throwIfDisposed(),mean$1(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.min=function(Xe,Ke){return this.throwIfDisposed(),min$4(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.minimumStrict=function(Xe){return this.throwIfDisposed(),minimumStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.minimum=function(Xe){return this.throwIfDisposed(),minimum$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mirrorPad=function(Xe,Ke){return this.throwIfDisposed(),mirrorPad$1(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.modStrict=function(Xe){return this.throwIfDisposed(),modStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mod=function(Xe){return this.throwIfDisposed(),mod$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mulStrict=function(Xe){return this.throwIfDisposed(),mulStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mul=function(Xe){return this.throwIfDisposed(),mul(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.neg=function(){return this.throwIfDisposed(),neg$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.norm=function(Xe,Ke,Ye){return this.throwIfDisposed(),norm(this,Xe,Ke,Ye)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.notEqualStrict=function(Xe){return this.throwIfDisposed(),notEqualStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.notEqual=function(Xe){return this.throwIfDisposed(),notEqual$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.oneHot=function(Xe,Ke=1,Ye=0){return this.throwIfDisposed(),oneHot$2(this,Xe,Ke,Ye)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.onesLike=function(){return this.throwIfDisposed(),onesLike$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.pad=function(Xe,Ke){return this.throwIfDisposed(),pad(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.pool=function(Xe,Ke,Ye,Je,tt){return this.throwIfDisposed(),pool$2(this,Xe,Ke,Ye,Je,tt)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.powStrict=function(Xe){return this.throwIfDisposed(),powStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.pow=function(Xe){return this.throwIfDisposed(),pow$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.prelu=function(Xe){return this.throwIfDisposed(),prelu$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.prod=function(Xe,Ke){return this.throwIfDisposed(),prod$2(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.reciprocal=function(){return this.throwIfDisposed(),reciprocal$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.relu=function(){return this.throwIfDisposed(),relu$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.relu6=function(){return this.throwIfDisposed(),relu6$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.reshapeAs=function(Xe){return this.throwIfDisposed(),reshape$2(this,Xe.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.reshape=function(Xe){return this.throwIfDisposed(),reshape$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.resizeBilinear=function(Xe,Ke,Ye){return this.throwIfDisposed(),resizeBilinear$2(this,Xe,Ke,Ye)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.resizeNearestNeighbor=function(Xe,Ke,Ye){return this.throwIfDisposed(),resizeNearestNeighbor$2(this,Xe,Ke,Ye)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.reverse=function(Xe){return this.throwIfDisposed(),reverse$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.rfft=function(){return this.throwIfDisposed(),rfft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.round=function(){return this.throwIfDisposed(),round$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.rsqrt=function(){return this.throwIfDisposed(),rsqrt$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.selu=function(){return this.throwIfDisposed(),selu$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.separableConv2d=function(Xe,Ke,Ye,Je,tt,st){return this.throwIfDisposed(),separableConv2d(this,Xe,Ke,Ye,Je,tt,st)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sigmoid=function(){return this.throwIfDisposed(),sigmoid$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sign=function(){return this.throwIfDisposed(),sign$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sin=function(){return this.throwIfDisposed(),sin$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sinh=function(){return this.throwIfDisposed(),sinh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.slice=function(Xe,Ke){return this.throwIfDisposed(),slice$4(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.softmax=function(Xe){return this.throwIfDisposed(),softmax$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.softplus=function(){return this.throwIfDisposed(),softplus$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.spaceToBatchND=function(Xe,Ke){return this.throwIfDisposed(),spaceToBatchND$2(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.split=function(Xe,Ke){return this.throwIfDisposed(),split(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sqrt=function(){return this.throwIfDisposed(),sqrt$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.square=function(){return this.throwIfDisposed(),square$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.squaredDifference=function(Xe){return this.throwIfDisposed(),squaredDifference$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.squaredDifferenceStrict=function(Xe){return this.throwIfDisposed(),squaredDifferenceStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.squeeze=function(Xe){return this.throwIfDisposed(),squeeze(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.stack=function(Xe,Ke){this.throwIfDisposed();const Ye=Xe instanceof Tensor?[this,Xe]:[this,...Xe];return stack$1(Ye,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.step=function(Xe){return this.throwIfDisposed(),step$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.stridedSlice=function(Xe,Ke,Ye,Je,tt,st,rt,it){return this.throwIfDisposed(),stridedSlice$2(this,Xe,Ke,Ye,Je,tt,st,rt,it)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.subStrict=function(Xe){return this.throwIfDisposed(),subStrict(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sub=function(Xe){return this.throwIfDisposed(),sub$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sum=function(Xe,Ke){return this.throwIfDisposed(),sum$2(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.tan=function(){return this.throwIfDisposed(),tan$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.tanh=function(){return this.throwIfDisposed(),tanh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.tile=function(Xe){return this.throwIfDisposed(),tile$3(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.toBool=function(){return this.throwIfDisposed(),cast$3(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.toFloat=function(){return this.throwIfDisposed(),cast$3(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.toInt=function(){return this.throwIfDisposed(),cast$3(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.topk=function(Xe,Ke){return this.throwIfDisposed(),topk(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.transpose=function(Xe){return this.throwIfDisposed(),transpose$2(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.unique=function(Xe){return this.throwIfDisposed(),unique$4(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.unsortedSegmentSum=function(Xe,Ke){return this.throwIfDisposed(),unsortedSegmentSum$2(this,Xe,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.unstack=function(Xe){return this.throwIfDisposed(),unstack(this,Xe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.where=function(Xe,Ke){return this.throwIfDisposed(),where(Xe,this,Ke)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.zerosLike=function(){return this.throwIfDisposed(),zerosLike$2(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let _epsilon;function epsilon$1(){return _epsilon==null&&(_epsilon=backend().epsilon()),_epsilon}function imageDataFormat(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class AttributeError extends Error{constructor(Ke){super(Ke),Object.setPrototypeOf(this,AttributeError.prototype)}}class RuntimeError extends Error{constructor(Ke){super(Ke),Object.setPrototypeOf(this,RuntimeError.prototype)}}class ValueError extends Error{constructor(Ke){super(Ke),Object.setPrototypeOf(this,ValueError.prototype)}}class NotImplementedError extends Error{constructor(Ke){super(Ke),Object.setPrototypeOf(this,NotImplementedError.prototype)}}class AssertionError extends Error{constructor(Ke){super(Ke),Object.setPrototypeOf(this,AssertionError.prototype)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pyListRepeat(Xe,Ke){if(Array.isArray(Xe)){let Ye=[];for(let Je=0;Je<Ke;Je++)Ye=Ye.concat(Xe);return Ye}else{const Ye=new Array(Ke);return Ye.fill(Xe),Ye}}function assert$1(Xe,Ke){if(!Xe)throw new AssertionError(Ke)}function count(Xe,Ke){let Ye=0;for(const Je of Xe)Je===Ke&&Ye++;return Ye}function singletonOrArray(Xe){return Xe.length===1?Xe[0]:Xe}function toList(Xe){return Array.isArray(Xe)?Xe:[Xe]}function toSnakeCase(Xe){const Ye=Xe.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return Ye[0]!=="_"?Ye:"private"+Ye}function toCamelCase(Xe){return Xe.length<=1||Xe.indexOf("_")===-1?Xe:Xe.replace(/[_]+(\w|$)/g,(Ke,Ye)=>Ye.toUpperCase())}let _GLOBAL_CUSTOM_OBJECTS={};function serializeKerasObject(Xe){if(Xe==null)return null;const Ke={};return Ke.className=Xe.getClassName(),Ke.config=Xe.getConfig(),Ke}function convertNDArrayScalarsInConfig(Xe){if(!(Xe==null||typeof Xe!="object"))if(Array.isArray(Xe))Xe.forEach(Ke=>convertNDArrayScalarsInConfig(Ke));else{const Ke=Object.keys(Xe);for(const Ye of Ke){const Je=Xe[Ye];Je!=null&&typeof Je=="object"&&(!Array.isArray(Je)&&Je.type==="ndarray"&&typeof Je.value=="number"?Xe[Ye]=Je.value:convertNDArrayScalarsInConfig(Je))}}}function deserializeKerasObject(Xe,Ke={},Ye={},Je="object",tt=!1){if(typeof Xe=="string"){const st=Xe;let rt;if(st in Ye)rt=Ye[st];else if(st in _GLOBAL_CUSTOM_OBJECTS)rt=_GLOBAL_CUSTOM_OBJECTS[st];else if(rt=Ke[st],rt==null)throw new ValueError(`Unknown ${Je}: ${Xe}. This may be due to one of the following reasons:
1. The ${Je} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${Je} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return rt}else{const st=Xe;if(st.className==null||st.config==null)throw new ValueError(`${Je}: Improper config format: ${JSON.stringify(st)}.
'className' and 'config' must set.`);const rt=st.className;let it,ot;if(rt in Ye?[it,ot]=Ye[rt]:rt in _GLOBAL_CUSTOM_OBJECTS?[it,ot]=_GLOBAL_CUSTOM_OBJECTS.className:rt in Ke&&([it,ot]=Ke[rt]),it==null)throw new ValueError(`Unknown ${Je}: ${rt}. This may be due to one of the following reasons:
1. The ${Je} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${Je} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(ot!=null){const at={};for(const pt of Object.keys(_GLOBAL_CUSTOM_OBJECTS))at[pt]=_GLOBAL_CUSTOM_OBJECTS[pt];for(const pt of Object.keys(Ye))at[pt]=Ye[pt];const lt=st.config;lt.customObjects=at;const ut=Object.assign({},_GLOBAL_CUSTOM_OBJECTS);for(const pt of Object.keys(Ye))_GLOBAL_CUSTOM_OBJECTS[pt]=Ye[pt];convertNDArrayScalarsInConfig(st.config);const ht=ot(it,st.config,Ye,tt);return _GLOBAL_CUSTOM_OBJECTS=Object.assign({},ut),ht}else{const at=Object.assign({},_GLOBAL_CUSTOM_OBJECTS);for(const ut of Object.keys(Ye))_GLOBAL_CUSTOM_OBJECTS[ut]=Ye[ut];const lt=new it(st.config);return _GLOBAL_CUSTOM_OBJECTS=Object.assign({},at),lt}}}function numberCompare(Xe,Ke){return Xe<Ke?-1:Xe>Ke?1:0}function reverseNumberCompare(Xe,Ke){return-1*numberCompare(Xe,Ke)}function unique$3(Xe){if(Xe==null)return Xe;const Ke=[];for(const Ye of Xe)Ke.indexOf(Ye)===-1&&Ke.push(Ye);return Ke}function isObjectEmpty(Xe){if(Xe==null)throw new ValueError(`Invalid value in obj: ${JSON.stringify(Xe)}`);for(const Ke in Xe)if(Xe.hasOwnProperty(Ke))return!1;return!0}function checkStringTypeUnionValue(Xe,Ke,Ye){if(Ye!=null&&Xe.indexOf(Ye)<0)throw new ValueError(`${Ye} is not a valid ${Ke}.  Valid values are ${Xe} or null/undefined.`)}function checkArrayTypeAndLength(Xe,Ke,Ye=0,Je=1/0){return assert$1(Ye>=0),assert$1(Je>=Ye),Array.isArray(Xe)&&Xe.length>=Ye&&Xe.length<=Je&&Xe.every(tt=>typeof tt===Ke)}function assertPositiveInteger(Xe,Ke){Array.isArray(Xe)?(assert$2(Xe.length>0,()=>`${Ke} is unexpectedly an empty array.`),Xe.forEach((Ye,Je)=>assertPositiveInteger(Ye,`element ${Je+1} of ${Ke}`))):assert$2(Number.isInteger(Xe)&&Xe>0,()=>`Expected ${Ke} to be a positive integer, but got ${formatAsFriendlyString(Xe)}.`)}function formatAsFriendlyString(Xe){return Xe===null?"null":Array.isArray(Xe)?"["+Xe.map(Ke=>formatAsFriendlyString(Ke)).join(",")+"]":typeof Xe=="string"?`"${Xe}"`:`${Xe}`}function debounce(Xe,Ke){let Ye=now$1(),Je;return(...st)=>{const rt=now$1();return rt-Ye<Ke||(Ye=rt,Je=Xe(...st)),Je}}function mapActivationToFusedKernel(Xe){return Xe==="relu"?"relu":Xe==="linear"?"linear":Xe==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function calcL2Norms(Xe,Ke){return tidy(()=>sqrt$2(sum$2(mul(Xe,Xe),Ke,!0)))}class Constraint extends Serializable{getConfig(){return{}}}class MaxNorm extends Constraint{constructor(Ke){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=Ke.maxValue!=null?Ke.maxValue:this.defaultMaxValue,this.axis=Ke.axis!=null?Ke.axis:this.defaultAxis}apply(Ke){return tidy(()=>{const Ye=calcL2Norms(Ke,this.axis),Je=clipByValue$1(Ye,0,this.maxValue);return mul(Ke,div$1(Je,add$1(epsilon$1(),Ye)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}MaxNorm.className="MaxNorm";registerClass(MaxNorm);class UnitNorm extends Constraint{constructor(Ke){super(),this.defaultAxis=0,this.axis=Ke.axis!=null?Ke.axis:this.defaultAxis}apply(Ke){return tidy(()=>div$1(Ke,add$1(epsilon$1(),calcL2Norms(Ke,this.axis))))}getConfig(){return{axis:this.axis}}}UnitNorm.className="UnitNorm";registerClass(UnitNorm);class NonNeg extends Constraint{apply(Ke){return relu$2(Ke)}}NonNeg.className="NonNeg";registerClass(NonNeg);class MinMaxNorm extends Constraint{constructor(Ke){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=Ke.minValue!=null?Ke.minValue:this.defaultMinValue,this.maxValue=Ke.maxValue!=null?Ke.maxValue:this.defaultMaxValue,this.rate=Ke.rate!=null?Ke.rate:this.defaultRate,this.axis=Ke.axis!=null?Ke.axis:this.defaultAxis}apply(Ke){return tidy(()=>{const Ye=calcL2Norms(Ke,this.axis),Je=add$1(mul(this.rate,clipByValue$1(Ye,this.minValue,this.maxValue)),mul(1-this.rate,Ye));return mul(Ke,div$1(Je,add$1(epsilon$1(),Ye)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}MinMaxNorm.className="MinMaxNorm";registerClass(MinMaxNorm);const CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function serializeConstraint(Xe){return serializeKerasObject(Xe)}function deserializeConstraint(Xe,Ke={}){return deserializeKerasObject(Xe,SerializationMap.getMap().classNameMap,Ke,"constraint")}function getConstraint(Xe){if(Xe==null)return null;if(typeof Xe=="string"){const Ye={className:Xe in CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP?CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP[Xe]:Xe,config:{}};return deserializeConstraint(Ye)}else return Xe instanceof Constraint?Xe:deserializeConstraint(Xe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const VALID_DATA_FORMAT_VALUES=["channelsFirst","channelsLast"],VALID_INTERPOLATION_FORMAT_VALUES=["nearest","bilinear"],VALID_PADDING_MODE_VALUES=["valid","same","causal"],VALID_POOL_MODE_VALUES=["max","avg"],VALID_BIDIRECTIONAL_MERGE_MODES=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const nameMap=new Map;function checkDataFormat(Xe){checkStringTypeUnionValue(VALID_DATA_FORMAT_VALUES,"DataFormat",Xe)}function checkInterpolationFormat(Xe){checkStringTypeUnionValue(VALID_INTERPOLATION_FORMAT_VALUES,"InterpolationFormat",Xe)}function checkPaddingMode(Xe){checkStringTypeUnionValue(VALID_PADDING_MODE_VALUES,"PaddingMode",Xe)}function checkPoolMode(Xe){checkStringTypeUnionValue(VALID_POOL_MODE_VALUES,"PoolMode",Xe)}const _nameScopeStack=[],_nameScopeDivider="/";function nameScope(Xe,Ke){_nameScopeStack.push(Xe);try{const Ye=Ke();return _nameScopeStack.pop(),Ye}catch(Ye){throw _nameScopeStack.pop(),Ye}}function currentNameScopePrefix(){return _nameScopeStack.length===0?"":_nameScopeStack.join(_nameScopeDivider)+_nameScopeDivider}function getScopedTensorName(Xe){if(!isValidTensorName(Xe))throw new Error("Not a valid tensor name: '"+Xe+"'");return currentNameScopePrefix()+Xe}function getUniqueTensorName(Xe){if(!isValidTensorName(Xe))throw new Error("Not a valid tensor name: '"+Xe+"'");nameMap.has(Xe)||nameMap.set(Xe,0);const Ke=nameMap.get(Xe);if(nameMap.set(Xe,nameMap.get(Xe)+1),Ke>0){const Ye=`${Xe}_${Ke}`;return nameMap.set(Ye,1),Ye}else return Xe}const tensorNameRegex=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function isValidTensorName(Xe){return!!Xe.match(tensorNameRegex)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isInteger(Xe){return Xe===parseInt(Xe.toString(),10)}function arrayProd(Xe,Ke,Ye){Ke==null&&(Ke=0),Ye==null&&(Ye=Xe.length);let Je=1;for(let tt=Ke;tt<Ye;++tt)Je*=Xe[tt];return Je}function toArray1D(Xe){return Xe=Array.isArray(Xe)?new Float32Array(Xe):Xe,tensor1d(Xe)}function min$3(Xe){return min$4(toArray1D(Xe)).dataSync()[0]}function max$3(Xe){return max$4(toArray1D(Xe)).dataSync()[0]}function range$3(Xe,Ke){if(Ke<Xe)throw new ValueError(`end (${Ke}) < begin (${Xe}) is forbidden.`);const Ye=[];for(let Je=Xe;Je<Ke;++Je)Ye.push(Je);return Ye}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cast$2(Xe,Ke){return Xe.asType(Ke)}function expandDims$2(Xe,Ke=-1){const Ye=Xe.shape.slice();return Ke<0&&(Ke=Ye.length+Ke+1),Ye.splice(Ke,0,1),Xe.reshape(Ye)}function repeat(Xe,Ke){return tidy(()=>{if(Xe.shape.length!==2)throw new ValueError(`repeat() expects a rank-2 tensor, but received a rank-${Xe.shape.length} tensor.`);const Ye=expandDims$2(Xe,1);return tile$2(Ye,[1,Ke,1])})}function flatten$1(Xe){const Ke=[arrayProd(Xe.shape)];return Xe.reshape(Ke)}function batchFlatten(Xe){if(Xe.rank<=1)throw new ValueError(`batchFlatten requires a minimum rank of 2. Got rank: ${Xe.rank}.`);const Ke=[Xe.shape[0],arrayProd(Xe.shape,1)];return Xe.reshape(Ke)}function sliceAlongFirstAxis(Xe,Ke,Ye){return tidy(()=>{switch(Xe.rank){case 1:return slice1d(Xe,Ke,Ye);case 2:return slice2d(Xe,[Ke,0],[Ye,Xe.shape[1]]);case 3:return slice3d(Xe,[Ke,0,0],[Ye,Xe.shape[1],Xe.shape[2]]);case 4:return slice4d(Xe,[Ke,0,0,0],[Ye,Xe.shape[1],Xe.shape[2],Xe.shape[3]]);case 5:return slice$4(Xe,[Ke,0,0,0,0],[Ye,Xe.shape[1],Xe.shape[2],Xe.shape[3],Xe.shape[4]]);case 6:return slice$4(Xe,[Ke,0,0,0,0,0],[Ye,Xe.shape[1],Xe.shape[2],Xe.shape[3],Xe.shape[4],Xe.shape[5]]);default:throw new ValueError(`sliceAlongFirstAxis() received an unsupported tensor rank: ${Xe.rank}`)}})}function sliceAlongLastAxis(Xe,Ke,Ye){return tidy(()=>{switch(Xe.rank){case 1:return slice1d(Xe,Ke,Ye);case 2:return slice2d(Xe,[0,Ke],[Xe.shape[0],Ye]);case 3:return slice3d(Xe,[0,0,Ke],[Xe.shape[0],Xe.shape[1],Ye]);case 4:return slice4d(Xe,[0,0,0,Ke],[Xe.shape[0],Xe.shape[1],Xe.shape[2],Ye]);default:throw new ValueError(`sliceAlongLastAxis() received an unsupported tensor rank: ${Xe.rank}`)}})}function sliceAlongAxis(Xe,Ke,Ye,Je){return tidy(()=>{switch(Xe.rank){case 1:return slice1d(Xe,Ke,Ye);case 2:switch(Je){case 1:return sliceAlongFirstAxis(Xe,Ke,Ye);case 2:return sliceAlongLastAxis(Xe,Ke,Ye);default:throw new ValueError(`The axis is not within the rank of the tensor ${Je}`)}case 3:switch(Je){case 1:return sliceAlongFirstAxis(Xe,Ke,Ye);case 2:return slice3d(Xe,[0,Ke,0],[Xe.shape[0],Ye,Xe.shape[2]]);case 3:return sliceAlongLastAxis(Xe,Ke,Ye);default:throw new ValueError(`The axis is not within the rank of the tensor ${Je}`)}case 4:switch(Je){case 1:return sliceAlongFirstAxis(Xe,Ke,Ye);case 2:return slice4d(Xe,[0,Ke,0,0],[Xe.shape[0],Ye,Xe.shape[2],Xe.shape[3]]);case 3:return slice4d(Xe,[0,0,Ke,0],[Xe.shape[0],Xe.shape[1],Ye,Xe.shape[3]]);case 4:return sliceAlongLastAxis(Xe,Ke,Ye);default:throw new ValueError(`The axis is not within the rank of the tensor ${Je}`)}default:throw new ValueError(`sliceAlongLastAxis() received an unsupported tensor rank: ${Xe.rank}`)}})}function concatenate(Xe,Ke=-1){let Ye;return Ke<0&&(Ye=Xe[0].rank,Ye!==0?Ke=Ye:Ke=0),Ke===Xe[0].rank&&(Ke=-1),concat$2(Xe,Ke)}function concatAlongFirstAxis(Xe,Ke){switch(Xe.rank){case 1:return concat1d([Xe,Ke]);case 2:return concat2d([Xe,Ke],0);case 3:return concat3d([Xe,Ke],0);case 4:return concat4d([Xe,Ke],0);default:throw new ValueError(`concatAlongFirstAxis() received an unsupported tensor rank: ${Xe.rank}`)}}function tile$2(Xe,Ke){if(Array.isArray(Ke)||(Ke=[Ke]),Xe.rank!==Ke.length)throw new ValueError(`The length of input n (${Ke.length}) does not match the number of dimensions in input x (${Xe.rank})`);return tile$3(Xe,Ke)}function randomNormal(Xe,Ke=0,Ye=1,Je,tt){return randomNormal$1(Xe,Ke,Ye,Je,tt)}function dot(Xe,Ke,Ye,Je){if(Xe.rank<2||Ke.rank<2)throw new NotImplementedError(`dot requires both inputs to be rank >= 2 but got x shape = ${Xe.shape} and y shape = ${Ke.shape}`);if(Ke.rank>=3){const tt=Xe.shape.slice(-1)[0],st=Ke.shape.slice(-2)[0];if(tt!==st)throw new NotImplementedError(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${Xe.shape} and  y shape = ${Ke.shape}`)}if(Xe.rank===2&&Ke.rank===2)return matMul({a:Xe,b:Ke,transposeA:!1,transposeB:!1,bias:Je?reshapeBias(Xe.rank,Je,imageDataFormat()):null,activation:Ye});{const tt=Xe.shape.slice(),st=tt.pop();Xe=Xe.reshape([-1,st]);const rt=Ke.shape.slice(),it=rt.pop(),ot=rt.pop(),at=[...rt,it],lt=Array.from({length:Ke.rank},(ft,xt)=>xt===0?Ke.rank-2:xt<=Ke.rank-2?xt-1:xt);Ke=Ke.transpose(lt).reshape([ot,-1]);const ut=[...tt,...at];return matMul({a:Xe,b:Ke,transposeA:!1,transposeB:!1,bias:Je?reshapeBias(Xe.rank,Je,imageDataFormat()):null,activation:Ye}).reshape(ut)}}function gather(Xe,Ke,Ye){return tidy(()=>(Array.isArray(Ke)?Ke=tensor1d(Ke,"int32"):Ke=Ke.toInt(),gather$1(Xe,Ke,Ye)))}function square$2(Xe){return mul(Xe,Xe)}function reshapeBias(Xe,Ke,Ye){const Je=Ke.shape;if(Ke.rank!==1&&Ke.rank!==Xe)throw new ValueError(`Unexpected bias dimensions: ${Ke.rank}; expected it to be 1 or ${Xe}`);if(Xe===5){if(Ye==="channelsFirst")return Je.length===1?Ke.reshape([1,Je[0],1,1,1]):Ke.reshape([1,Je[3],Je[0],Je[1],Je[2]]);if(Ye==="channelsLast")return Je.length===1?Ke.reshape([1,1,1,1,Je[0]]):Ke.reshape([1].concat(Je))}else if(Xe===4){if(Ye==="channelsFirst")return Je.length===1?Ke.reshape([1,Je[0],1,1]):Ke.reshape([1,Je[2],Je[0],Je[1]]);if(Ye==="channelsLast")return Je.length===1?Ke.reshape([1,1,1,Je[0]]):Ke.reshape([1].concat(Je))}else if(Xe===3){if(Ye==="channelsFirst")return Je.length===1?Ke.reshape([1,Je[0],1]):Ke.reshape([1,Je[1],Je[0]]);if(Ye==="channelsLast")return Je.length===1?Ke.reshape([1,1,Je[0]]):Ke.reshape([1].concat(Je))}else if(Xe<3)return Ke;throw new ValueError(`Unsupported input rank by biasAdd: ${Ke.rank}`)}function biasAdd(Xe,Ke,Ye){return tidy(()=>(Ye==null&&(Ye=imageDataFormat()),checkDataFormat(Ye),Xe.add(reshapeBias(Xe.rank,Ke,Ye))))}function elu$2(Xe,Ke=1){if(Ke!==1)throw new NotImplementedError(`Support for alpha values other than 1 (${Ke}) is not implemented yet.`);return elu$3(Xe)}function softsign(Xe){return tidy(()=>div$1(Xe,abs$3(Xe).add(1)))}function dropout(Xe,Ke,Ye,Je){return tidy(()=>dropout$1(Xe,Ke,Ye,Je))}function hardSigmoid(Xe){return tidy(()=>{const Ke=add$1(.5,mul(.2,Xe));return clipByValue$1(Ke,0,1)})}function inTrainPhase(Xe,Ke,Ye=!1){return Ye?Xe():Ke()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const VALID_FAN_MODE_VALUES=["fanIn","fanOut","fanAvg"],VALID_DISTRIBUTION_VALUES=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function checkFanMode(Xe){checkStringTypeUnionValue(VALID_FAN_MODE_VALUES,"FanMode",Xe)}function checkDistribution(Xe){checkStringTypeUnionValue(VALID_DISTRIBUTION_VALUES,"Distribution",Xe)}class Initializer extends Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Zeros extends Initializer{apply(Ke,Ye){return zeros$1(Ke,Ye)}}Zeros.className="Zeros";registerClass(Zeros);class Ones extends Initializer{apply(Ke,Ye){return ones(Ke,Ye)}}Ones.className="Ones";registerClass(Ones);class Constant extends Initializer{constructor(Ke){if(super(),typeof Ke!="object")throw new ValueError(`Expected argument of type ConstantConfig but got ${Ke}`);if(Ke.value===void 0)throw new ValueError(`config must have value set but got ${Ke}`);this.value=Ke.value}apply(Ke,Ye){return tidy(()=>mul(scalar(this.value),ones(Ke,Ye)))}getConfig(){return{value:this.value}}}Constant.className="Constant";registerClass(Constant);class RandomUniform extends Initializer{constructor(Ke){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=Ke.minval||this.DEFAULT_MINVAL,this.maxval=Ke.maxval||this.DEFAULT_MAXVAL,this.seed=Ke.seed}apply(Ke,Ye){return randomUniform(Ke,this.minval,this.maxval,Ye)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}RandomUniform.className="RandomUniform";registerClass(RandomUniform);class RandomNormal extends Initializer{constructor(Ke){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=Ke.mean||this.DEFAULT_MEAN,this.stddev=Ke.stddev||this.DEFAULT_STDDEV,this.seed=Ke.seed}apply(Ke,Ye){if(Ye=Ye||"float32",Ye!=="float32"&&Ye!=="int32")throw new NotImplementedError(`randomNormal does not support dType ${Ye}.`);return randomNormal(Ke,this.mean,this.stddev,Ye,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}RandomNormal.className="RandomNormal";registerClass(RandomNormal);class TruncatedNormal extends Initializer{constructor(Ke){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=Ke.mean||this.DEFAULT_MEAN,this.stddev=Ke.stddev||this.DEFAULT_STDDEV,this.seed=Ke.seed}apply(Ke,Ye){if(Ye=Ye||"float32",Ye!=="float32"&&Ye!=="int32")throw new NotImplementedError(`truncatedNormal does not support dType ${Ye}.`);return truncatedNormal(Ke,this.mean,this.stddev,Ye,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}TruncatedNormal.className="TruncatedNormal";registerClass(TruncatedNormal);class Identity extends Initializer{constructor(Ke){super(),this.gain=Ke.gain!=null?Ke.gain:1}apply(Ke,Ye){return tidy(()=>{if(Ke.length!==2||Ke[0]!==Ke[1])throw new ValueError("Identity matrix initializer can only be used for 2D square matrices.");return mul(this.gain,eye(Ke[0]))})}getConfig(){return{gain:this.gain}}}Identity.className="Identity";registerClass(Identity);function computeFans(Xe,Ke="channelsLast"){let Ye,Je;if(checkDataFormat(Ke),Xe.length===2)Ye=Xe[0],Je=Xe[1];else if([3,4,5].indexOf(Xe.length)!==-1){if(Ke==="channelsFirst"){const tt=arrayProd(Xe,2);Ye=Xe[1]*tt,Je=Xe[0]*tt}else if(Ke==="channelsLast"){const tt=arrayProd(Xe,0,Xe.length-2);Ye=Xe[Xe.length-2]*tt,Je=Xe[Xe.length-1]*tt}}else{const tt=arrayProd(Xe);Ye=Math.sqrt(tt),Je=Math.sqrt(tt)}return[Ye,Je]}class VarianceScaling extends Initializer{constructor(Ke){if(super(),Ke.scale<0)throw new ValueError(`scale must be a positive float. Got: ${Ke.scale}`);this.scale=Ke.scale==null?1:Ke.scale,this.mode=Ke.mode==null?"fanIn":Ke.mode,checkFanMode(this.mode),this.distribution=Ke.distribution==null?"normal":Ke.distribution,checkDistribution(this.distribution),this.seed=Ke.seed}apply(Ke,Ye){const Je=computeFans(Ke),tt=Je[0],st=Je[1];let rt=this.scale;if(this.mode==="fanIn"?rt/=Math.max(1,tt):this.mode==="fanOut"?rt/=Math.max(1,st):rt/=Math.max(1,(tt+st)/2),this.distribution==="normal"){const it=Math.sqrt(rt);if(Ye=Ye||"float32",Ye!=="float32"&&Ye!=="int32")throw new NotImplementedError(`${this.getClassName()} does not support dType ${Ye}.`);return truncatedNormal(Ke,0,it,Ye,this.seed)}else{const it=Math.sqrt(3*rt);return randomUniform(Ke,-it,it,Ye)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}VarianceScaling.className="VarianceScaling";registerClass(VarianceScaling);class GlorotUniform extends VarianceScaling{constructor(Ke){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:Ke==null?null:Ke.seed})}getClassName(){return VarianceScaling.className}}GlorotUniform.className="GlorotUniform";registerClass(GlorotUniform);class GlorotNormal extends VarianceScaling{constructor(Ke){super({scale:1,mode:"fanAvg",distribution:"normal",seed:Ke==null?null:Ke.seed})}getClassName(){return VarianceScaling.className}}GlorotNormal.className="GlorotNormal";registerClass(GlorotNormal);class HeNormal extends VarianceScaling{constructor(Ke){super({scale:2,mode:"fanIn",distribution:"normal",seed:Ke==null?null:Ke.seed})}getClassName(){return VarianceScaling.className}}HeNormal.className="HeNormal";registerClass(HeNormal);class HeUniform extends VarianceScaling{constructor(Ke){super({scale:2,mode:"fanIn",distribution:"uniform",seed:Ke==null?null:Ke.seed})}getClassName(){return VarianceScaling.className}}HeUniform.className="HeUniform";registerClass(HeUniform);class LeCunNormal extends VarianceScaling{constructor(Ke){super({scale:1,mode:"fanIn",distribution:"normal",seed:Ke==null?null:Ke.seed})}getClassName(){return VarianceScaling.className}}LeCunNormal.className="LeCunNormal";registerClass(LeCunNormal);class LeCunUniform extends VarianceScaling{constructor(Ke){super({scale:1,mode:"fanIn",distribution:"uniform",seed:Ke==null?null:Ke.seed})}getClassName(){return VarianceScaling.className}}LeCunUniform.className="LeCunNormal";registerClass(LeCunUniform);class Orthogonal extends Initializer{constructor(Ke){if(super(),this.DEFAULT_GAIN=1,this.gain=Ke.gain==null?this.DEFAULT_GAIN:Ke.gain,this.seed=Ke.seed,this.seed!=null)throw new NotImplementedError("Random seed is not implemented for Orthogonal Initializer yet.")}apply(Ke,Ye){return tidy(()=>{if(Ke.length<2)throw new NotImplementedError("Shape must be at least 2D.");Ke[0]*Ke[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${Ke[0]*Ke[1]}) elements: Slowness may result.`);const Je=Ke[0]>Ke[1]?[Ke[1],Ke[0]]:Ke,tt=randomNormal(Je,0,1,"float32");let st=linalg.gramSchmidt(tt);return Ke[0]>Ke[1]&&(st=st.transpose()),mul(this.gain,st)})}getConfig(){return{gain:this.gain,seed:this.seed}}}Orthogonal.className="Orthogonal";registerClass(Orthogonal);const INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function deserializeInitializer(Xe,Ke={}){return deserializeKerasObject(Xe,SerializationMap.getMap().classNameMap,Ke,"initializer")}function serializeInitializer(Xe){return serializeKerasObject(Xe)}function getInitializer(Xe){if(typeof Xe=="string"){const Ke=Xe in INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP?INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP[Xe]:Xe;if(Ke==="GlorotNormal")return new GlorotNormal;if(Ke==="GlorotUniform")return new GlorotUniform;if(Ke==="HeNormal")return new HeNormal;if(Ke==="HeUniform")return new HeUniform;if(Ke==="LeCunNormal")return new LeCunNormal;if(Ke==="LeCunUniform")return new LeCunUniform;{const Ye={};return Ye.className=Ke,Ye.config={},deserializeInitializer(Ye)}}else return Xe instanceof Initializer?Xe:deserializeInitializer(Xe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let _nextUniqueTensorId=0;function getNextUniqueTensorId(){return _nextUniqueTensorId++}const _uidPrefixes={};function getUid(Xe=""){return Xe in _uidPrefixes||(_uidPrefixes[Xe]=0),_uidPrefixes[Xe]+=1,Xe+_uidPrefixes[Xe].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isArrayOfShapes(Xe){return Array.isArray(Xe)&&Array.isArray(Xe[0])}function normalizeShapeList(Xe){return Xe.length===0?[]:Array.isArray(Xe[0])?Xe:[Xe]}function getExactlyOneTensor(Xe){let Ke;if(Array.isArray(Xe)){if(Xe.length!==1)throw new ValueError(`Expected Tensor length to be 1; got ${Xe.length}`);Ke=Xe[0]}else Ke=Xe;return Ke}function getExactlyOneShape(Xe){if(Array.isArray(Xe)&&Array.isArray(Xe[0])){if(Xe.length===1)return Xe=Xe,Xe[0];throw new ValueError(`Expected exactly 1 Shape; got ${Xe.length}`)}else return Xe}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function countParamsInWeights(Xe){let Ke=0;for(const Ye of Xe)Ye.shape.length===0?Ke+=1:Ke+=Ye.shape.reduce((Je,tt)=>Je*tt);return Ke}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const DEFAULT_VARIABLE_NAME_PREFIX="Variable";class LayerVariable{constructor(Ke,Ye="float32",Je=DEFAULT_VARIABLE_NAME_PREFIX,tt=!0,st=null){this.dtype=Ye??"float32",this.shape=Ke.shape,this.id=getNextUniqueTensorId(),Je=Je??DEFAULT_VARIABLE_NAME_PREFIX,this.originalName=getScopedTensorName(Je),this.name=getUniqueTensorName(this.originalName),this.trainable_=tt,this.constraint=st,this.val=variable(Ke,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(Ke){return this.assertNotDisposed(),checkShapesMatch(this.val,Ke),this.val.id!==Ke.id&&(this.val.assign(Ke),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(Ke){this.trainable_=Ke,this.val.trainable=Ke}}function checkShapesMatch(Xe,Ke){if(Xe.shape.toString()!==Ke.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(Xe.shape)+" vs. "+JSON.stringify(Ke.shape))}function batchGetValue(Xe){return Xe.map(Ke=>Ke.read())}function batchSetValue(Xe){Xe.forEach(Ke=>{Ke[0].write(Ke[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class InputSpec{constructor(Ke){this.dtype=Ke.dtype,this.shape=Ke.shape,Ke.shape!=null?this.ndim=Ke.shape.length:this.ndim=Ke.ndim,this.maxNDim=Ke.maxNDim,this.minNDim=Ke.minNDim,this.axes=Ke.axes||{}}}class SymbolicTensor{constructor(Ke,Ye,Je,tt,st,rt,it){this.dtype=Ke,this.shape=Ye,this.sourceLayer=Je,this.inputs=tt,this.callArgs=st,this.outputTensorIndex=it,this.id=getNextUniqueTensorId(),rt!=null&&(this.originalName=getScopedTensorName(rt),this.name=getUniqueTensorName(this.originalName)),this.rank=Ye.length}}let _nextNodeID=0,Node$1=class{constructor(Ke,Ye){this.callArgs=Ye,this.id=_nextNodeID++,this.outboundLayer=Ke.outboundLayer,this.inboundLayers=Ke.inboundLayers,this.nodeIndices=Ke.nodeIndices,this.tensorIndices=Ke.tensorIndices,this.inputTensors=Ke.inputTensors,this.outputTensors=Ke.outputTensors,this.inputMasks=Ke.inputMasks,this.outputMasks=Ke.outputMasks,this.inputShapes=Ke.inputShapes,this.outputShapes=Ke.outputShapes;for(const Je of Ke.inboundLayers)Je!=null&&Je.outboundNodes.push(this);Ke.outboundLayer.inboundNodes.push(this)}getConfig(){const Ke=[];for(const Ye of this.inboundLayers)Ye!=null?Ke.push(Ye.name):Ke.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:Ke,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},_nextLayerID=0;class Layer extends Serializable{constructor(Ke={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=_nextLayerID++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let Ye=Ke.name;if(!Ye){const Je=this.getClassName();Ye=toSnakeCase(Je)+"_"+getUid(Je)}if(this.name=Ye,this.trainable_=Ke.trainable==null?!0:Ke.trainable,Ke.inputShape!=null||Ke.batchInputShape!=null){let Je;if(Ke.batchInputShape!=null)Je=Ke.batchInputShape;else if(Ke.inputShape!=null){let st=null;Ke.batchSize!=null&&(st=Ke.batchSize),Je=[st].concat(Ke.inputShape)}this.batchInputShape=Je;let tt=Ke.dtype;tt==null&&(tt=Ke.inputDType),tt==null&&(tt="float32"),this.dtype=tt}Ke.weights!=null?this.initialWeights=Ke.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(Ke,Ye){return Ke.name+"_ib-"+Ye.toString()}getNodeAtIndex(Ke,Ye){if(this.inboundNodes.length===0)throw new RuntimeError(`The layer has never been called and thus has no defined ${Ye}.`);if(this.inboundNodes.length<=Ke)throw new ValueError(`Asked to get ${Ye} at node ${Ke}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[Ke]}getInputAt(Ke){return singletonOrArray(this.getNodeAtIndex(Ke,"input").inputTensors)}getOutputAt(Ke){return singletonOrArray(this.getNodeAtIndex(Ke,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new AttributeError(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new AttributeError(`Layer ${this.name} is not connected, no input to return.`);return singletonOrArray(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new AttributeError(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new AttributeError(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return singletonOrArray(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(Ke=>Ke())}get updates(){return this._updates}get built(){return this._built}set built(Ke){this._built=Ke}get trainable(){return this.trainable_}set trainable(Ke){this._trainableWeights.forEach(Ye=>Ye.trainable=Ke),this.trainable_=Ke}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(Ke=>Ke.trainable):[]}set trainableWeights(Ke){this._trainableWeights=Ke}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(Ke=>!Ke.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(Ke){this._nonTrainableWeights=Ke}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(Ke){if(Ke=toList(Ke),this.inputSpec==null||this.inputSpec.length===0)return;const Ye=toList(this.inputSpec);if(Ke.length!==Ye.length)throw new ValueError(`Layer ${this.name} expects ${Ye.length} inputs, but it received ${Ke.length} input tensors. Input received: ${Ke}`);for(let Je=0;Je<Ke.length;Je++){const tt=Ke[Je],st=Ye[Je];if(st==null)continue;const rt=tt.rank;if(st.ndim!=null&&rt!==st.ndim)throw new ValueError(`Input ${Je} is incompatible with layer ${this.name}: expected ndim=${st.ndim}, found ndim=${rt}`);if(st.maxNDim!=null&&rt>st.maxNDim)throw new ValueError(`Input ${Je} is incompatible with layer ${this.name}: expected max_ndim=${st.maxNDim}, found ndim=${rt}`);if(st.minNDim!=null&&rt<st.minNDim)throw new ValueError(`Input ${Je} is incompatible with layer ${this.name}: expected min_ndim=${st.minNDim}, found ndim=${rt}.`);if(st.dtype!=null&&tt.dtype!==st.dtype)throw new ValueError(`Input ${Je} is incompatible with layer ${this.name} : expected dtype=${st.dtype}, found dtype=${tt.dtype}.`);if(st.axes){const it=tt.shape;for(const ot in st.axes){const at=Number(ot),lt=st.axes[ot],ut=at>=0?it[at]:it[it.length+at];if(lt!=null&&[lt,null].indexOf(ut)===-1)throw new ValueError(`Input ${Je} is incompatible with layer ${this.name}: expected axis ${at} of input shape to have value ${lt} but got shape ${it}.`)}}if(st.shape!=null)for(let it=0;it<st.shape.length;++it){const ot=st.shape[it],at=tt.shape[it];if(ot!=null&&at!=null&&ot!==at)throw new ValueError(`Input ${Je} is incompatible with layer ${this.name}: expected shape=${st.shape}, found shape=${tt.shape}.`)}}}call(Ke,Ye){return Ke}invokeCallHook(Ke,Ye){this._callHook!=null&&this._callHook(Ke,Ye)}setCallHook(Ke){this._callHook=Ke}clearCallHook(){this._callHook=null}apply(Ke,Ye){Ye=Ye||{},this.assertNotDisposed();const Je=toList(Ke);let tt=!0;for(const rt of Je)if(!(rt instanceof SymbolicTensor)){tt=!1;break}let st=!0;for(const rt of Je)if(rt instanceof SymbolicTensor){st=!1;break}if(tt===st)throw new ValueError("Arguments to apply() must be all SymbolicTensors or all Tensors");return nameScope(this.name,()=>{if(!this.built){this.assertInputCompatibility(Ke);const rt=[];for(const it of toList(Ke))rt.push(it.shape);this.build(singletonOrArray(rt)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&st&&(this._refCount=1)}if(this.assertInputCompatibility(Ke),st){let rt=this.call(Ke,Ye);const it=toList(rt),ot=[];for(let at of it)Je.indexOf(at)!==-1&&(at=at.clone()),ot.push(at);if(rt=singletonOrArray(ot),this.activityRegularizer!=null)throw new NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return rt}else{const rt=collectInputShape(Ke),it=this.computeOutputShape(rt);let ot;const at=guessOutputDType(Ke);if(this.warnOnIncompatibleInputShape(Array.isArray(Ke)?rt[0]:rt),it!=null&&it.length>0&&Array.isArray(it[0])?ot=it.map((lt,ut)=>new SymbolicTensor(at,lt,this,toList(Ke),Ye,this.name,ut)):ot=new SymbolicTensor(at,it,this,toList(Ke),Ye,this.name),this.addInboundNode(Ke,ot,null,null,rt,it,Ye),this._refCount++,this.activityRegularizer!=null)throw new NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return ot}})}warnOnIncompatibleInputShape(Ke){if(this.batchInputShape!=null)if(Ke.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(Ke)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let Ye=!1;this.batchInputShape.forEach((Je,tt)=>{Je!=null&&Ke[tt]!=null&&Ke[tt]!==Je&&(Ye=!0)}),Ye&&console.warn(`The shape of the input tensor (${JSON.stringify(Ke)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new AttributeError(`The layer ${this.name} has never been called and thus has no defined output shape.`);const Ke=[];for(const Ye of this.inboundNodes){const Je=JSON.stringify(Ye.outputShapes);Ke.indexOf(Je)===-1&&Ke.push(Je)}if(Ke.length===1){const Ye=this.inboundNodes[0].outputShapes;return Array.isArray(Ye)&&Array.isArray(Ye[0])&&Ye.length===1?Ye[0]:Ye}else throw new AttributeError(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new RuntimeError(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return countParamsInWeights(this.weights)}build(Ke){this.built=!0}getWeights(Ke=!1){return batchGetValue(Ke?this.trainableWeights:this.weights)}setWeights(Ke){tidy(()=>{const Ye=this.weights;if(Ye.length!==Ke.length)throw new ValueError(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${Ke.length}, but the layer was expecting ${Ye.length} weights. Provided weights: ${Ke}...`);if(Ye.length===0)return;const Je=[],tt=batchGetValue(Ye);for(let st=0;st<tt.length;++st){const rt=tt[st],it=Ye[st],ot=Ke[st];if(!arraysEqual(rt.shape,ot.shape))throw new ValueError(`Layer weight shape ${rt.shape} not compatible with provided weight shape ${ot.shape}`);Je.push([it,ot])}batchSetValue(Je)})}addWeight(Ke,Ye,Je,tt,st,rt,it){if(this._addedWeightNames.indexOf(Ke)!==-1)throw new ValueError(`Duplicate weight name ${Ke} for layer ${this.name}`);this._addedWeightNames.push(Ke),Je==null&&(Je="float32"),this.fastWeightInitDuringBuild&&(tt=getInitializer("zeros"));const ot=tt.apply(Ye,Je),at=new LayerVariable(ot,Je,Ke,rt,it);return ot.dispose(),st!=null&&this.addLoss(()=>st.apply(at.read())),rt==null&&(rt=!0),rt?this._trainableWeights.push(at):this._nonTrainableWeights.push(at),at}setFastWeightInitDuringBuild(Ke){this.fastWeightInitDuringBuild=Ke}addLoss(Ke){Ke==null||Array.isArray(Ke)&&Ke.length===0||(Ke=toList(Ke),this._losses!==void 0&&this._losses!==null&&this.losses.push(...Ke))}computeOutputShape(Ke){return Ke}computeMask(Ke,Ye){if(!this.supportsMasking){if(Ye!=null)if(Array.isArray(Ye))Ye.forEach(Je=>{if(Je!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return Ye}addInboundNode(Ke,Ye,Je,tt,st,rt,it=null){const ot=toList(Ke);Ye=toList(Ye),Je=toList(Je),tt=toList(tt),st=normalizeShapeList(st),rt=normalizeShapeList(rt);const at=[],lt=[],ut=[];for(const ht of ot)at.push(ht.sourceLayer),lt.push(ht.nodeIndex),ut.push(ht.tensorIndex);new Node$1({outboundLayer:this,inboundLayers:at,nodeIndices:lt,tensorIndices:ut,inputTensors:ot,outputTensors:Ye,inputMasks:Je,outputMasks:tt,inputShapes:st,outputShapes:rt},it);for(let ht=0;ht<Ye.length;ht++)Ye[ht].sourceLayer=this,Ye[ht].nodeIndex=this.inboundNodes.length-1,Ye[ht].tensorIndex=ht}getConfig(){const Ke={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(Ke.batchInputShape=this.batchInputShape),this.dtype!=null&&(Ke.dtype=this.dtype),Ke}disposeWeights(){return this.weights.forEach(Ke=>Ke.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let Ke=0;return--this._refCount===0&&(Ke=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:Ke}}}function collectInputShape(Xe){Xe=toList(Xe);const Ke=[];for(const Ye of Xe)Ke.push(Ye.shape);return singletonOrArray(Ke)}function guessOutputDType(Xe){return"float32"}function getSourceInputs(Xe,Ke,Ye){if((Ke==null||Ye!=null&&Ye>0)&&(Ke=Xe.sourceLayer,Ye=Xe.nodeIndex),Ke.inboundNodes.length===0)return[Xe];{const Je=Ke.inboundNodes[Ye];if(Je.inboundLayers.length===0)return Je.inputTensors;{const tt=[];for(let st=0;st<Je.inboundLayers.length;st++){const rt=Je.inputTensors[st],it=Je.inboundLayers[st],ot=Je.nodeIndices[st],at=getSourceInputs(rt,it,ot);for(const lt of at)tt.indexOf(lt)===-1&&tt.push(lt)}return tt}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class InputLayer extends Layer{constructor(Ke){if(super({dtype:Ke.dtype,name:Ke.name!=null?Ke.name:getUid("input").toString()}),Ke.batchSize==null&&(Ke.batchSize=null),Ke.sparse==null&&(Ke.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=Ke.sparse,Ke.inputShape!=null&&Ke.batchInputShape!=null)throw new ValueError("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let Ye=Ke.batchInputShape;if(Ye==null){if(Ke.inputShape==null)throw new ValueError("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");Ye=[Ke.batchSize].concat(Ke.inputShape)}else if(Ke.batchSize!=null)throw new ValueError("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const Je=Ke.dtype||"float32";this.batchInputShape=Ye,this.dtype=Je,this.inputSpec=[{shape:Ye}];const tt=new SymbolicTensor(this.dtype,this.batchInputShape,this,[],{},this.name);tt.nodeIndex=0,tt.tensorIndex=0,new Node$1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[tt],outputTensors:[tt],inputMasks:[null],outputMasks:[null],inputShapes:[Ye],outputShapes:[Ye]})}apply(Ke,Ye){throw new ValueError(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}InputLayer.className="InputLayer";registerClass(InputLayer);function Input$3(Xe){if(Xe.batchShape==null&&Xe.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(Xe.batchShape!=null&&Xe.shape!=null)throw new ValueError("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let Ke=Xe.batchShape;Xe.shape!=null&&Ke==null&&(Ke=[null].concat(Xe.shape));let Ye=Xe.dtype;return Ye==null&&(Ye="float32"),new InputLayer({batchInputShape:Ke,name:Xe.name,dtype:Ye,sparse:Xe.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function resolveScalarsInLogs(Xe){if(Xe==null)return;const Ke=[],Ye=[],Je=[];for(const tt in Xe){const st=Xe[tt];if(typeof st!="number"){const rt=st;Ke.push(rt.data()),Ye.push(tt),Je.push(rt)}}if(Ke.length>0){const tt=await Promise.all(Ke);for(let st=0;st<tt.length;++st)Xe[Ye[st]]=tt[st][0];dispose(Je)}}function disposeTensorsInLogs(Xe){if(Xe!=null)for(const Ke in Xe){const Ye=Xe[Ke];typeof Ye!="number"&&Ye.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var ModelLoggingVerbosity;(function(Xe){Xe[Xe.SILENT=0]="SILENT",Xe[Xe.VERBOSE=1]="VERBOSE"})(ModelLoggingVerbosity||(ModelLoggingVerbosity={}));const DEFAULT_YIELD_EVERY_MS=125;class BaseCallback{constructor(){this.validationData=null}setParams(Ke){this.params=Ke}async onEpochBegin(Ke,Ye){}async onEpochEnd(Ke,Ye){}async onBatchBegin(Ke,Ye){}async onBatchEnd(Ke,Ye){}async onTrainBegin(Ke){}async onTrainEnd(Ke){}setModel(Ke){}}class CallbackList{constructor(Ke,Ye=10){Ke==null&&(Ke=[]),this.callbacks=Ke,this.queueLength=Ye}append(Ke){this.callbacks.push(Ke)}setParams(Ke){for(const Ye of this.callbacks)Ye.setParams(Ke)}setModel(Ke){for(const Ye of this.callbacks)Ye.setModel(Ke)}async onEpochBegin(Ke,Ye){Ye==null&&(Ye={});for(const Je of this.callbacks)await Je.onEpochBegin(Ke,Ye)}async onEpochEnd(Ke,Ye){Ye==null&&(Ye={});for(const Je of this.callbacks)await Je.onEpochEnd(Ke,Ye)}async onBatchBegin(Ke,Ye){Ye==null&&(Ye={});for(const Je of this.callbacks)await Je.onBatchBegin(Ke,Ye)}async onBatchEnd(Ke,Ye){Ye==null&&(Ye={});for(const Je of this.callbacks)await Je.onBatchEnd(Ke,Ye)}async onTrainBegin(Ke){Ke==null&&(Ke={});for(const Ye of this.callbacks)await Ye.onTrainBegin(Ke)}async onTrainEnd(Ke){Ke==null&&(Ke={});for(const Ye of this.callbacks)await Ye.onTrainEnd(Ke)}}class BaseLogger extends BaseCallback{constructor(){super()}async onEpochBegin(Ke){this.seen=0,this.totals={}}async onBatchEnd(Ke,Ye){Ye==null&&(Ye={});const Je=Ye.size==null?0:Ye.size;this.seen+=Je;for(const tt in Ye){const st=Ye[tt];if(typeof st=="number")this.totals.hasOwnProperty(tt)||(this.totals[tt]=0),this.totals[tt]=this.totals[tt]+st*Je;else{let rt;tt in this.totals?rt=this.totals[tt]:this.totals[tt]=0;const it=tidy(()=>add$1(this.totals[tt],mul(st,Je)));this.totals[tt]=it,rt!=null&&rt.dispose()}}}async onEpochEnd(Ke,Ye){if(Ye!=null)for(const Je of this.params.metrics)this.totals[Je]!=null&&(typeof this.totals[Je]=="number"?Ye[Je]=this.totals[Je]/this.seen:tidy(()=>{const tt=mul(div$1(1,this.seen),this.totals[Je]);Ye[Je]=tt,this.totals[Je].dispose(),keep(Ye[Je])}))}}let History$1=class extends BaseCallback{async onTrainBegin(Ke){this.epoch=[],this.history={}}async onEpochEnd(Ke,Ye){Ye==null&&(Ye={}),this.epoch.push(Ke);for(const Je in Ye)this.history[Je]==null&&(this.history[Je]=[]),this.history[Je].push(Ye[Je])}async syncData(){const Ke=[],Ye=[],Je=[];for(const st in this.history){const rt=this.history[st];for(let it=0;it<rt.length;++it)if(typeof rt[it]!="number"){const ot=rt[it];Ke.push(ot.data()),Ye.push(st),Je.push(it)}}const tt=await Promise.all(Ke);for(let st=0;st<tt.length;++st)this.history[Ye[st]][Je[st]].dispose(),this.history[Ye[st]][Je[st]]=tt[st][0]}};class CustomCallback extends BaseCallback{constructor(Ke,Ye){if(super(),this.currentEpoch=0,this.yieldEvery=Ye||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=DEFAULT_YIELD_EVERY_MS),this.yieldEvery==="never"&&Ke.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");isNumber$3(this.yieldEvery)&&(this.maybeWait=debounce(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=Ke.onTrainBegin,this.trainEnd=Ke.onTrainEnd,this.epochBegin=Ke.onEpochBegin,this.epochEnd=Ke.onEpochEnd,this.batchBegin=Ke.onBatchBegin,this.batchEnd=Ke.onBatchEnd,this.yield=Ke.onYield}async maybeWait(Ke,Ye,Je){const tt=[];this.yield!=null&&(await resolveScalarsInLogs(Je),tt.push(this.yield(Ke,Ye,Je))),tt.push(nextFrame()),await Promise.all(tt)}async onEpochBegin(Ke,Ye){this.currentEpoch=Ke,this.epochBegin!=null&&(await resolveScalarsInLogs(Ye),await this.epochBegin(Ke,Ye))}async onEpochEnd(Ke,Ye){const Je=[];this.epochEnd!=null&&(await resolveScalarsInLogs(Ye),Je.push(this.epochEnd(Ke,Ye))),this.yieldEvery==="epoch"&&Je.push(nextFrame()),await Promise.all(Je)}async onBatchBegin(Ke,Ye){this.batchBegin!=null&&(await resolveScalarsInLogs(Ye),await this.batchBegin(Ke,Ye))}async onBatchEnd(Ke,Ye){const Je=[];this.batchEnd!=null&&(await resolveScalarsInLogs(Ye),Je.push(this.batchEnd(Ke,Ye))),this.yieldEvery==="batch"?Je.push(nextFrame()):isNumber$3(this.yieldEvery)&&Je.push(this.maybeWait(this.currentEpoch,Ke,Ye)),await Promise.all(Je)}async onTrainBegin(Ke){this.trainBegin!=null&&(await resolveScalarsInLogs(Ke),await this.trainBegin(Ke))}async onTrainEnd(Ke){this.trainEnd!=null&&(await resolveScalarsInLogs(Ke),await this.trainEnd(Ke))}}function standardizeCallbacks(Xe,Ke){return Xe==null&&(Xe={}),Xe instanceof BaseCallback?[Xe]:Array.isArray(Xe)&&Xe[0]instanceof BaseCallback?Xe:toList(Xe).map(Je=>new CustomCallback(Je,Ke))}class CallbackConstructorRegistry{constructor(){}static registerCallbackConstructor(Ke,Ye){assert$2(Ke>=0&&Number.isInteger(Ke),()=>`Verbosity level is expected to be an integer >= 0, but got ${Ke}`),CallbackConstructorRegistry.checkForDuplicate(Ye),CallbackConstructorRegistry.constructors[Ke]==null&&(CallbackConstructorRegistry.constructors[Ke]=[]),CallbackConstructorRegistry.constructors[Ke].push(Ye)}static checkForDuplicate(Ke){for(const Ye in CallbackConstructorRegistry.constructors)CallbackConstructorRegistry.constructors[+Ye].forEach(tt=>{if(tt===Ke)throw new ValueError("Duplicate callback constructor.")})}static clear(){CallbackConstructorRegistry.constructors={}}static createCallbacks(Ke){const Ye=[];for(const Je in CallbackConstructorRegistry.constructors){const tt=+Je;Ke>=tt&&Ye.push(...CallbackConstructorRegistry.constructors[tt])}return Ye.map(Je=>new Je)}}CallbackConstructorRegistry.constructors={};function configureCallbacks(Xe,Ke,Ye,Je,tt,st,rt,it,ot){const at=new History$1,lt=[new BaseLogger,...CallbackConstructorRegistry.createCallbacks(Ke)];Xe!=null&&lt.push(...Xe),lt.push(at);const ut=new CallbackList(lt);return ut.setParams({epochs:Ye,initialEpoch:Je,samples:tt,steps:st,batchSize:rt,verbose:Ke,doValidation:it,metrics:ot}),{callbackList:ut,history:at}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function deserialize(Xe,Ke={},Ye=!1){return deserializeKerasObject(Xe,SerializationMap.getMap().classNameMap,Ke,"layer",Ye)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function l2Normalize(Xe,Ke){return tidy(()=>{Xe.dtype!=="float32"&&(Xe=Xe.asType("float32"));const Ye=sum$2(square$2(Xe),Ke,!0),Je=fill$2(Ye.shape,epsilon$1()),tt=sqrt$2(maximum$2(Ye,Je));return div$1(Xe,tt)})}function meanSquaredError(Xe,Ke){return tidy(()=>mean$1(square$2(sub$2(Ke,Xe)),-1))}function meanAbsoluteError(Xe,Ke){return tidy(()=>mean$1(abs$3(sub$2(Ke,Xe)),-1))}function meanAbsolutePercentageError(Xe,Ke){return tidy(()=>{const Ye=sub$2(Xe,Ke),Je=clipByValue$1(abs$3(Xe),epsilon$1(),Number.MAX_VALUE),tt=abs$3(div$1(Ye,Je));return mul(100,mean$1(tt,-1))})}function meanSquaredLogarithmicError(Xe,Ke){return tidy(()=>{const Ye=clipByValue$1(Ke,epsilon$1(),Number.MAX_VALUE),Je=log$5(add$1(1,Ye)),tt=clipByValue$1(Xe,epsilon$1(),Number.MAX_VALUE),st=log$5(add$1(1,tt));return mean$1(square$2(sub$2(Je,st)),-1)})}function squaredHinge(Xe,Ke){return tidy(()=>{const Ye=maximum$2(0,sub$2(1,mul(Xe,Ke)));return mean$1(square$2(Ye),-1)})}function hinge(Xe,Ke){return tidy(()=>{const Ye=maximum$2(0,sub$2(1,mul(Xe,Ke)));return mean$1(Ye,-1)})}function categoricalHinge(Xe,Ke){return tidy(()=>{const Ye=sum$2(mul(Xe,Ke),-1),Je=max$4(mul(sub$2(1,Xe),Ke),-1);return maximum$2(0,add$1(1,sub$2(Je,Ye)))})}function logcosh(Xe,Ke){return tidy(()=>{const Ye=Math.log(2),Je=sub$2(Ke,Xe),tt=sub$2(add$1(Je,softplus$2(mul(-2,Je))),Ye);return mean$1(tt,-1)})}function categoricalCrossentropy$1(Xe,Ke,Ye=!1){return tidy(()=>{if(Ye)Ke=softmax$2(Ke);else{const Je=sum$2(Ke,Ke.shape.length-1,!0);Ke=div$1(Ke,Je)}return Ke=clipByValue$1(Ke,epsilon$1(),1-epsilon$1()),neg$2(sum$2(mul(Xe.toFloat(),log$5(Ke)),Ke.shape.length-1))})}function sparseCategoricalCrossentropy$1(Xe,Ke,Ye=!1){return tidy(()=>{const Je=floor$3(flatten$1(Xe)).toInt();Ke=clipByValue$1(Ke,epsilon$1(),1-epsilon$1());const tt=Ke.shape,st=oneHot$2(Je,tt[tt.length-1]).reshape(tt);return categoricalCrossentropy$1(st,Ke,Ye)})}function sigmoidCrossEntropyWithLogits(Xe,Ke){if(!arraysEqual(Xe.shape,Ke.shape))throw new ValueError(`logits and labels must have the same shape, but got shapes ${JSON.stringify(Xe.shape)} and ${JSON.stringify(Ke.shape)}`);return tidy(()=>{const Ye=Ke.relu(),Je=Ke.abs().neg();return Ye.sub(Ke.mul(Xe)).add(Je.exp().log1p())})}function binaryCrossentropy$1(Xe,Ke){return tidy(()=>{let Ye;return Ye=clipByValue$1(Ke,epsilon$1(),1-epsilon$1()),Ye=log$5(div$1(Ye,sub$2(1,Ye))),mean$1(sigmoidCrossEntropyWithLogits(Xe,Ye),-1)})}function kullbackLeiblerDivergence(Xe,Ke){return tidy(()=>{const Ye=clipByValue$1(Xe,epsilon$1(),1),Je=clipByValue$1(Ke,epsilon$1(),1);return sum$2(mul(Xe,log$5(div$1(Ye,Je))),-1)})}function poisson(Xe,Ke){return tidy(()=>{const Ye=log$5(add$1(epsilon$1(),Ke));return mean$1(sub$2(Ke,mul(Xe,Ye)),-1)})}function cosineProximity(Xe,Ke){return tidy(()=>{const Ye=l2Normalize(Xe,-1),Je=l2Normalize(Ke,-1),tt=mul(Ye,Je);return neg$2(sum$2(tt,-1))})}const lossesMap={meanSquaredError,meanAbsoluteError,meanAbsolutePercentageError,meanSquaredLogarithmicError,squaredHinge,hinge,categoricalHinge,logcosh,categoricalCrossentropy:categoricalCrossentropy$1,sparseCategoricalCrossentropy:sparseCategoricalCrossentropy$1,binaryCrossentropy:binaryCrossentropy$1,kullbackLeiblerDivergence,poisson,cosineProximity};function get$3(Xe){if(typeof Xe=="string"){if(Xe in lossesMap)return lossesMap[Xe];let Ke=`Unknown loss ${Xe}`;throw Xe.toLowerCase().includes("softmaxcrossentropy")&&(Ke=`Unknown loss ${Xe}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ValueError(Ke)}else return Xe}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function binaryAccuracy(Xe,Ke){return tidy(()=>{const Ye=mul(.5,onesLike$2(Ke)),Je=cast$2(greater$2(Ke,Ye),Xe.dtype);return mean$1(equal$2(Xe,Je),-1)})}function categoricalAccuracy(Xe,Ke){return tidy(()=>cast$2(equal$2(argMax$2(Xe,-1),argMax$2(Ke,-1)),"float32"))}function truePositives(Xe,Ke){return tidy(()=>logicalAnd$2(Xe.equal(1),Ke.equal(1)).sum().cast("float32"))}function falsePositives(Xe,Ke){return tidy(()=>logicalAnd$2(Xe.equal(0),Ke.equal(1)).sum().cast("float32"))}function precision(Xe,Ke){return tidy(()=>{const Ye=truePositives(Xe,Ke),Je=falsePositives(Xe,Ke),tt=Ye.add(Je);return where(greater$2(tt,0),Ye.div(tt),0).cast("float32")})}function binaryCrossentropy(Xe,Ke){return binaryCrossentropy$1(Xe,Ke)}function sparseCategoricalAccuracy(Xe,Ke){return Xe.rank===Ke.rank&&(Xe=Xe.squeeze([Xe.rank-1])),Ke=Ke.argMax(-1),Ke.dtype!==Xe.dtype&&(Ke=Ke.asType(Xe.dtype)),equal$2(Xe,Ke).asType("float32")}const mse=meanSquaredError,MSE=meanSquaredError,mae=meanAbsoluteError,MAE=meanAbsoluteError,mape=meanAbsolutePercentageError,MAPE=meanAbsolutePercentageError,categoricalCrossentropy=categoricalCrossentropy$1,cosine=cosineProximity,sparseCategoricalCrossentropy=sparseCategoricalCrossentropy$1,metricsMap={binaryAccuracy,categoricalAccuracy,precision,categoricalCrossentropy,sparseCategoricalCrossentropy,mse,MSE,mae,MAE,mape,MAPE,cosine};function get$2(Xe){if(typeof Xe=="string"&&Xe in metricsMap)return metricsMap[Xe];if(typeof Xe!="string"&&Xe!=null)return Xe;throw new ValueError(`Unknown metric ${Xe}`)}function getLossOrMetricName(Xe){if(assert$1(Xe!==null,`Unknown LossOrMetricFn ${Xe}`),typeof Xe=="string")return Xe;{let Ke;for(const Ye of Object.keys(lossesMap))if(lossesMap[Ye]===Xe){Ke=Ye;break}if(Ke!==void 0)return Ke;for(const Ye of Object.keys(metricsMap))if(metricsMap[Ye]===Xe){Ke=Ye;break}return Ke!==void 0?Ke:Xe.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function getOptimizer(Xe){const Ke={Adagrad:()=>train.adagrad(.01),Adadelta:()=>train.adadelta(1,.95,epsilon$1()),Adam:()=>train.adam(.001,.9,.999,epsilon$1()),Adamax:()=>train.adamax(.002,.9,.999,epsilon$1(),0),RMSProp:()=>train.rmsprop(.001,.9,0,epsilon$1()),SGD:()=>train.sgd(.01)};if(Ke.adagrad=Ke.Adagrad,Ke.adadelta=Ke.Adadelta,Ke.adam=Ke.Adam,Ke.adamax=Ke.Adamax,Ke.rmsprop=Ke.RMSProp,Ke.sgd=Ke.SGD,Xe in Ke)return Ke[Xe]();throw new ValueError(`Unknown Optimizer ${Xe}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH=1*1024*1024;function checkUserDefinedMetadata(Xe,Ke,Ye=!1){if(Xe==null||typeof Xe!="object"||Object.getPrototypeOf(Xe)!==Object.prototype||!plainObjectCheck(Xe))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(Ye){const Je=JSON.stringify(Xe);Je.length>MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH&&console.warn(`User-defined metadata of model "${Ke}" is too large in size (length=${Je.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH}.`)}}function plainObjectCheck(Xe){if(Xe===null)return!0;if(typeof Xe=="object")if(Object.getPrototypeOf(Xe)===Object.prototype){const Ke=Object.keys(Xe);for(const Ye of Ke)if(typeof Ye!="string"||!plainObjectCheck(Xe[Ye]))return!1;return!0}else if(Array.isArray(Xe)){for(const Ke of Xe)if(!plainObjectCheck(Ke))return!1;return!0}else return!1;else{const Ke=typeof Xe;return Ke==="string"||Ke==="number"||Ke==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function printSummary(Xe,Ke,Ye,Je=console.log){const tt=isModelSequentialLike(Xe),st=["Layer (type)","Output shape","Param #"];tt?(Ke=Ke||65,Ye=Ye||[.45,.85,1]):(Ke=Ke||98,Ye=Ye||[.33,.55,.67,1]),Ye[Ye.length-1]<=1&&(Ye=Ye.map(lt=>Math.floor(Ke*lt)));let rt;if(!tt){st.push("Receives inputs"),rt=[];for(const lt in Xe.nodesByDepth)rt.push(...Xe.nodesByDepth[lt])}Je("_".repeat(Ke)),printRow(st,Ye,Je),Je("=".repeat(Ke));const it=Xe.layers;for(let lt=0;lt<it.length;++lt)tt?printLayerSummary(it[lt],Ye,Je):printLayerSummaryWithConnections(it[lt],Ye,rt,Je),Je((lt===it.length-1?"=":"_").repeat(Ke));Xe.checkTrainableWeightsConsistency();const ot=countTrainableParams(Xe),at=countParamsInWeights(Xe.nonTrainableWeights);Je(`Total params: ${ot+at}`),Je(`Trainable params: ${ot}`),Je(`Non-trainable params: ${at}`),Je("_".repeat(Ke))}function countTrainableParams(Xe){let Ke;return Xe.collectedTrainableWeights!=null?Ke=countParamsInWeights(Xe.collectedTrainableWeights):Ke=countParamsInWeights(Xe.trainableWeights),Ke}function isModelSequentialLike(Xe){let Ke=!0;const Ye=[],Je=[];for(const tt in Xe.nodesByDepth)Ye.push(Xe.nodesByDepth[tt]);for(const tt of Ye){if(tt.length>1||tt.length===1&&tt[0].inboundLayers.length>1){Ke=!1;break}Je.push(...tt)}if(Ke)for(const tt of Xe.layers){let st=!1;for(const rt of tt.inboundNodes)if(Je.indexOf(rt)!==-1)if(st){Ke=!1;break}else st=!0;if(!Ke)break}return Ke}function printRow(Xe,Ke,Ye=console.log){let Je="";for(let tt=0;tt<Xe.length;++tt)tt>0&&(Je=Je.slice(0,Je.length-1)+" "),Je+=Xe[tt],Je=Je.slice(0,Ke[tt]),Je+=" ".repeat(Ke[tt]-Je.length);Ye(Je)}function printLayerSummary(Xe,Ke,Ye){let Je;try{Je=JSON.stringify(Xe.outputShape)}catch{Je="multiple"}const tt=Xe.name,st=Xe.getClassName(),rt=[`${tt} (${st})`,Je,Xe.countParams().toString()];printRow(rt,Ke,Ye)}function printLayerSummaryWithConnections(Xe,Ke,Ye,Je){let tt;try{tt=JSON.stringify(Xe.outputShape)}catch{tt="multiple"}const st=[];for(const lt of Xe.inboundNodes)if(!(Ye!=null&&Ye.length>0&&Ye.indexOf(lt)===-1))for(let ut=0;ut<lt.inboundLayers.length;++ut){const ht=lt.inboundLayers[ut].name,pt=lt.nodeIndices[ut],ft=lt.tensorIndices[ut];st.push(`${ht}[${pt}][${ft}]`)}const rt=Xe.name,it=Xe.getClassName(),ot=st.length===0?"":st[0],at=[`${rt} (${it})`,tt,Xe.countParams().toString(),ot];printRow(at,Ke,Je);for(let lt=1;lt<st.length;++lt)printRow(["","","",st[lt]],Ke,Je)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isArrayItemInputOrOutputName(Xe,Ke,Ye){return(Xe==="inboundNodes"||Xe==="outputLayers"||Xe==="inputLayers")&&Ke===0&&typeof Ye=="string"}function convertPythonicToTs(Xe,Ke){if(Xe===null)return null;if(typeof Xe=="string")return toCamelCase(Xe);if(typeof Xe=="number"||typeof Xe=="boolean")return Xe;if(Xe instanceof Array){const Ye=[],Je=Xe.length;for(let tt=0;tt<Je;++tt){const st=Xe[tt];isArrayItemInputOrOutputName(Ke,tt,st)?Ye.push(st):Ye.push(convertPythonicToTs(st,Ke))}return Ye}else{const Ye={};for(const Je of Object.keys(Xe)){const tt=Xe[Je];if(Je==="name"&&typeof tt=="string")Ye[Je]=tt;else{const st=toCamelCase(Je);Ye[st]=convertPythonicToTs(tt,st)}}return Ye}}function convertTsToPythonic(Xe,Ke){if(Xe==null)return null;if(typeof Xe=="string")return toSnakeCase(Xe);if(typeof Xe=="number"||typeof Xe=="boolean")return Xe;if(Xe instanceof Array){const Ye=[],Je=Xe.length;for(let tt=0;tt<Je;++tt){const st=Xe[tt];isArrayItemInputOrOutputName(Ke,tt,st)?Ye.push(st):Ye.push(convertTsToPythonic(st,Ke))}return Ye}else{const Ye={};for(const Je of Object.keys(Xe)){const tt=Xe[Je],st=toSnakeCase(Je);(Je==="name"||Je==="className")&&typeof tt=="string"?Ye[st]=tt:Ye[st]=convertTsToPythonic(tt,Je)}return Ye}}/** @license See the LICENSE file. */const version$1="2.8.6";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function assertFeedCompatibility(Xe,Ke){if(Xe.dtype==null||Xe.dtype===Ke.dtype)return Ke;try{return cast$3(Ke,Xe.dtype)}catch{throw new ValueError(`The dtype of the feed (${Ke.dtype}) can not be cast to the dtype of the key '${Xe.name}' (${Xe.dtype}).`)}}class FeedDict{constructor(Ke){if(this.id2Value={},this.id2Mask={},this.name2Id={},Ke instanceof FeedDict)for(const Ye in Ke.id2Value)this.id2Value[Ye]=Ke.id2Value[Ye],Ye in Ke.id2Mask&&(this.id2Mask[Ye]=Ke.id2Mask[Ye]);else{if(Ke==null)return;for(const Ye of Ke)this.add(Ye.key,Ye.value)}}add(Ke,Ye,Je){if(this.id2Value[Ke.id]==null)this.id2Value[Ke.id]=assertFeedCompatibility(Ke,Ye),this.name2Id[Ke.name]=Ke.id,Je!=null&&(this.id2Mask[Ke.id]=Je);else throw new ValueError(`Duplicate key: name=${Ke.name}, id=${Ke.id}`);return this}addFeed(Ke){this.add(Ke.key,Ke.value)}hasKey(Ke){return this.id2Value[Ke.id]!=null}names(){return Object.keys(this.name2Id)}getValue(Ke){if(Ke instanceof SymbolicTensor){if(this.id2Value[Ke.id]==null)throw new ValueError(`Nonexistent key: ${Ke.name}`);return this.id2Value[Ke.id]}else{const Ye=this.name2Id[Ke];if(Ye==null)throw new ValueError(`Feed dict has no SymbolicTensor name: ${Ke}`);return this.id2Value[Ye]}}getMask(Ke){if(Ke instanceof SymbolicTensor){if(this.id2Value[Ke.id]==null)throw new ValueError(`Nonexistent key: ${Ke.name}`);return this.id2Mask[Ke.id]}else{const Ye=this.name2Id[Ke];if(Ye==null)throw new ValueError(`Feed dict has no SymbolicTensor name: ${Ke}`);return this.id2Mask[Ye]}}disposeMasks(){this.id2Mask!=null&&dispose(this.id2Mask)}}const cachedSorted={},cachedRecipientCounts={};function execute(Xe,Ke,Ye,Je){const tt=Ye==null?!1:Ye.training,st=Array.isArray(Xe),rt=st?Xe:[Xe],it=rt.map(ft=>ft.name),ot=[],at=Ke.names();for(const ft of it)at.indexOf(ft)!==-1?ot.push(Ke.getValue(ft)):ot.push(null);const lt=it.join(",")+"|"+Ke.names().join(",");let ut,ht;if(cachedSorted[lt]==null){const ft=getTopologicalSortAndRecipientCounts(rt,Ke);ut=ft.sorted,ht=ft.recipientCounts,cachedSorted[lt]=ut,cachedRecipientCounts[lt]=ht}ut=cachedSorted[lt],ht={},tt||Object.assign(ht,cachedRecipientCounts[lt]);const pt=new FeedDict(Ke);for(let ft=0;ft<ut.length;++ft){const xt=ut[ft],vt=xt.sourceLayer;if(vt instanceof InputLayer)continue;const At=[],Et=[],wt=[];let _t=!1;for(const Nt of xt.inputs){const Pt=pt.getValue(Nt),Bt=pt.getMask(Nt);At.push(Pt),Et.push(Bt),Bt!=null&&(_t=!0),tt||(ht[Nt.name]--,ht[Nt.name]===0&&!Ke.hasKey(Nt)&&it.indexOf(Nt.name)===-1&&!Pt.isDisposed&&Nt.sourceLayer.stateful!==!0&&wt.push(Pt))}_t&&(Ye=Ye||{},Ye.mask=Et[0]);const Ct=toList(vt.apply(At,Ye));let Tt=null;vt.supportsMasking&&(Tt=vt.computeMask(At,Et));const St=getNodeOutputs(xt),Rt=Array.isArray(St)?St:[St];for(let Nt=0;Nt<Rt.length;++Nt){pt.hasKey(Rt[Nt])||pt.add(Rt[Nt],Ct[Nt],Array.isArray(Tt)?Tt[0]:Tt);const Pt=it.indexOf(Rt[Nt].name);Pt!==-1&&(ot[Pt]=Ct[Nt])}tt||dispose(wt)}return pt.disposeMasks(),st?ot:ot[0]}function getTopologicalSortAndRecipientCounts(Xe,Ke){assert$2(Xe!=null&&Xe.length>0,()=>"Expected at least one fetch, got none");let Ye=[],Je={};if(Xe.length===1){const tt=getTopologicalSortAndRecipientCountsForOneFetch(Xe[0],Ke);Ye=tt.sorted,Je=tt.recipientMap}else{const tt=new Set;for(const st of Xe){const{sorted:rt,recipientMap:it}=getTopologicalSortAndRecipientCountsForOneFetch(st,Ke);for(const ot of rt)tt.has(ot.name)||(Ye.push(ot),tt.add(ot.name));for(const ot in it)Je[ot]==null&&(Je[ot]=new Set),it[ot].forEach(at=>Je[ot].add(at))}}return{sorted:Ye,recipientCounts:recipientMap2Counts(Je)}}function recipientMap2Counts(Xe){const Ke={};for(const Ye in Xe)Ke[Ye]=Xe[Ye].size;return Ke}function getTopologicalSortAndRecipientCountsForOneFetch(Xe,Ke){const Ye=new Set,Je=[],tt={};for(const it of Ke.names())Ye.add(it);const st=[],rt=[];for(st.push(Xe);st.length>0;){const it=st[st.length-1];if(Ye.has(it.name)){st.pop();continue}const ot=rt[rt.length-1]===st.length-1;if(it.inputs.length===0||ot)st.pop(),Je.push(it),Ye.add(it.name),ot&&rt.pop();else{rt.push(st.length-1);for(const at of it.inputs)tt[at.name]==null&&(tt[at.name]=new Set),tt[at.name].add(it.name),!Ye.has(at.name)&&st.push(at)}}return{sorted:Je,recipientMap:tt}}function getNodeOutputs(Xe){let Ke;if(Xe.sourceLayer.inboundNodes.length===1)Ke=Xe.sourceLayer.output;else{let Ye=null;for(let Je=0;Je<Xe.sourceLayer.inboundNodes.length;++Je)for(const tt of Xe.sourceLayer.inboundNodes[Je].outputTensors)if(tt.id===Xe.id){Ye=Je;break}Ke=Xe.sourceLayer.getOutputAt(Ye)}return Ke}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Container extends Layer{constructor(Ke){if(super({}),this.containerNodes=new Set,this.name=Ke.name,this.name==null){const Et=this.getClassName().toLowerCase();this.name=getUid(Et)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(Ke.inputs)?this.inputs=Ke.inputs.slice():this.inputs=[Ke.inputs],Array.isArray(Ke.outputs)?this.outputs=Ke.outputs.slice():this.outputs=[Ke.outputs],unique$3(this.inputs).length!==this.inputs.length)throw new ValueError(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(Et=>Et.name)}`);unique$3(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(Et=>Et.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const Et of this.outputs){const wt=Et.sourceLayer,_t=Et.nodeIndex,Ct=Et.tensorIndex;this.outputLayers.push(wt),this.outputLayersNodeIndices.push(_t),this.outputLayersTensorIndices.push(Ct)}for(const Et of this.inputs){const wt=Et.sourceLayer,_t=Et.nodeIndex,Ct=Et.tensorIndex;assert$1(_t===0,"input layer has >1 nodes"),assert$1(Ct===0,"input layer has >1 tensors"),this.inputLayers.push(wt),this.inputLayersNodeIndices.push(_t),this.inputLayersTensorIndices.push(Ct)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let Et=0;Et<this.inputLayers.length;Et++){const wt=this.inputLayers[Et];if(!(wt instanceof InputLayer))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${Ke.inputs}. Input ${Et} (0-based) originates from layer type ${wt.getClassName()}.`);this.inputNames.push(wt.name),this.feedInputShapes.push(wt.batchInputShape),this.feedInputNames.push(wt.name)}for(const Et of this.outputLayers)this.outputNames.push(Et.name);this.internalInputShapes=this.inputs.map(Et=>Et.shape),this.internalOutputShapes=this.outputs.map(Et=>Et.shape);const Ye={},Je={},tt={},st={},rt={},it=[],ot=(Et,wt,_t,Ct,Tt,St)=>{(Ct==null||Tt==null||St==null)&&(Ct=Et.sourceLayer,Tt=Et.nodeIndex,St=Et.tensorIndex);const Rt=Ct.inboundNodes[Tt];if(_t.indexOf(Rt)!==-1)throw new RuntimeError(`The tensor ${Et.name} at layer "${Ct.name}" is part of a cycle.`);if(wt.indexOf(Rt)!==-1)return;this.containerNodes.add(Container.nodeKey(Ct,Tt)),Ct.id in rt||(rt[Ct.id]=Object.keys(rt).length),_t.indexOf(Rt)===-1&&_t.push(Rt);const Nt=Rt.inboundLayers.length;for(let Pt=0;Pt<Nt;Pt++){const Bt=Rt.inputTensors[Pt],Lt=Rt.inboundLayers[Pt],zt=Rt.nodeIndices[Pt],Dt=Rt.tensorIndices[Pt];ot(Bt,wt,_t,Lt,zt,Dt)}for(wt.push(Rt);_t.indexOf(Rt)>=0;)_t.splice(_t.indexOf(Rt),1);it.push(Rt)},at=[],lt=[];for(const Et of this.outputs)ot(Et,at,lt);const ut=it.slice().reverse();for(const Et of ut){Je[Et.id]=Et,Et.id in Ye||(Ye[Et.id]=0);let wt=Ye[Et.id];const _t=tt[Et.outboundLayer.id]==null?0:tt[Et.outboundLayer.id];wt=Math.max(wt,_t),tt[Et.outboundLayer.id]=wt,st[Et.outboundLayer.id]=Et.outboundLayer,Ye[Et.id]=wt;for(let Ct=0;Ct<Et.inboundLayers.length;Ct++){const Tt=Et.inboundLayers[Ct],St=Et.nodeIndices[Ct],Rt=Tt.inboundNodes[St],Nt=Ye[Rt.id]==null?0:Ye[Rt.id];Ye[Rt.id]=Math.max(wt+1,Nt),Je[Rt.id]=Rt}}const ht={};for(const Et in Ye){const wt=Ye[Et];wt in ht||(ht[wt]=[]),ht[wt].push(Je[Et])}const pt={};for(const Et in tt){const wt=tt[Et];wt in pt||(pt[wt]=[]),pt[wt].push(st[Et])}let ft=Object.keys(pt).map(Et=>parseInt(Et,10)).sort(reverseNumberCompare);this.layers=[];for(const Et of ft){const wt=pt[Et];wt.sort((_t,Ct)=>{const Tt=rt[_t.id],St=rt[Ct.id];return Tt<St?-1:Tt>St?1:0});for(const _t of wt)_t instanceof Container&&this.internalContainerRefs.push(_t),this.layers.push(_t)}this.layersByDepth=pt,ft=Object.keys(ht).map(Et=>parseInt(Et,10)).sort(reverseNumberCompare);const xt=this.inputs.slice(),vt=[];for(const Et of ft)for(const wt of ht[Et]){const _t=wt.outboundLayer;if(_t!=null){for(const Ct of wt.inputTensors)if(xt.indexOf(Ct)===-1)throw new RuntimeError(`Graph disconnected: cannot obtain value for tensor ${Ct} at layer "${_t.name}". The following previous layers were accessed without issue: ${vt}`);for(const Ct of wt.outputTensors)xt.push(Ct);vt.push(_t.name)}}this.nodesByDepth=ht;const At=this.layers.map(Et=>Et.name);for(const Et of At){const wt=At.filter(_t=>_t===Et).length;if(wt!==1)throw new RuntimeError(`The name "${Et}" is used ${wt} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(At))}this.outboundNodes=[],this.inboundNodes=[],new Node$1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(Et=>null),outputMasks:this.outputs.map(Et=>null),inputShapes:this.inputs.map(Et=>Et.shape),outputShapes:this.outputs.map(Et=>Et.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const Ke={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const Ye of this.layers)Ke.numDisposedVariables+=Ye.dispose().numDisposedVariables;for(const Ye of this.internalContainerRefs)Ke.numDisposedVariables+=Ye.dispose().numDisposedVariables}return Ke.refCountAfterDispose=this._refCount,Ke}get trainable(){return this.trainable_}set trainable(Ke){this.layers.forEach(Ye=>{Ye._trainableWeights.forEach(Je=>Je.trainable=Ke)}),this.trainable_=Ke}get trainableWeights(){if(this._trainableWeights.length>0)throw new ValueError("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let Ke=[];for(const Ye of this.layers)Ke=Ke.concat(Ye.trainableWeights);return Ke}get nonTrainableWeights(){const Ke=[];for(const Ye of this.layers)Ke.push(...Ye.nonTrainableWeights);if(!this.trainable){const Ye=[];for(const Je of this.layers)Ye.push(...Je.trainableWeights);return Ye.concat(Ke)}return Ke}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(Ke,Ye=!0){const Je={};let tt=0;for(const rt of this.layers)for(const it of rt.weights){if(Je[it.originalName]!=null)throw new ValueError(`Duplicate weight name: ${it.originalName}`);Je[it.originalName]=it,tt++}const st=[];for(const rt in Ke){let it=rt;if(Je[rt]==null){const ot=rt.split("/");it=ot.slice(0,-2).concat([ot[ot.length-1]]).join("/")}if(Je[it]!=null)st.push([Je[it],Ke[rt]]);else if(Ye)throw new ValueError(`Provided weight data has no target variable: ${rt}`);delete Je[it]}if(Ye){const rt=[];for(const it in Je)rt.push(it);if(rt.length>0)throw new ValueError(`${rt.length} of ${tt} weights are not set: ${rt}`)}batchSetValue(st)}updatedConfig(){const Ke=this.getConfig(),Ye={};return Ye.className=this.getClassName(),Ye.config=Ke,Ye.kerasVersion=`tfjs-layers ${version$1}`,Ye.backend="TensorFlow.js",Ye}toJSON(Ke,Ye=!0){const Je=convertTsToPythonic(this.updatedConfig());return Ye?JSON.stringify(Je):Je}call(Ke,Ye){return tidy(()=>{Ke=toList(Ke);const Je=new FeedDict;for(let tt=0;tt<this.inputs.length;++tt)Je.add(this.inputs[tt],Ke[tt]);return execute(this.outputs,Je,Ye)})}computeMask(Ke,Ye){return tidy(()=>{Ke=toList(Ke);let Je;return Ye==null?Je=pyListRepeat(null,Ke.length):Je=toList(Ye),this.runInternalGraph(Ke,Je)[1]})}computeOutputShape(Ke){const Ye=normalizeShapeList(Ke);if(Ye.length!==this.inputLayers.length)throw new ValueError(`Invalid inputShape argument ${Ke}: model has ${this.inputLayers.length} tensor inputs.`);const Je={};for(let it=0;it<Ye.length;it++){const ot=this.inputLayers[it],at=Ye[it],lt=ot.name+"_0_0";Je[lt]=at}const tt=Object.keys(this.nodesByDepth).map(it=>parseInt(it,10)).sort(reverseNumberCompare);if(tt.length>1)for(const it of tt){const ot=this.nodesByDepth[it];for(const at of ot){const lt=at.outboundLayer;if(this.inputLayers.map(xt=>xt.id).indexOf(lt.id)!==-1)continue;const ut=[];for(let xt=0;xt<at.inboundLayers.length;xt++){const vt=at.inboundLayers[xt],At=at.nodeIndices[xt],Et=at.tensorIndices[xt],wt=`${vt.name}_${At}_${Et}`,_t=Je[wt];ut.push(_t)}const ht=lt.computeOutputShape(singletonOrArray(ut)),pt=normalizeShapeList(ht),ft=lt.inboundNodes.indexOf(at);for(let xt=0;xt<pt.length;xt++){const vt=`${lt.name}_${ft}_${xt}`;Je[vt]=pt[xt]}}}const st=[],rt=[];for(let it=0;it<this.outputLayers.length;it++){const ot=this.outputLayers[it],at=this.outputLayersNodeIndices[it],lt=this.outputLayersTensorIndices[it],ut=`${ot.name}_${at}_${lt}`;rt.push(ut)}for(let it=0;it<rt.length;it++){const ot=rt[it];assert$1(ot in Je),st.push(Je[ot])}return singletonOrArray(st)}runInternalGraph(Ke,Ye){Ye==null&&(Ye=pyListRepeat(null,Ke.length));const Je={};for(let ot=0;ot<this.inputs.length;++ot){const at=this.inputs[ot],lt=Ke[ot],ut=Ye[ot];Je[at.id]=[lt,ut]}const tt=Object.keys(this.nodesByDepth).map(ot=>parseInt(ot,10)).sort(reverseNumberCompare);for(const ot of tt){const at=this.nodesByDepth[ot];for(const lt of at){const ut=lt.outboundLayer,ht=lt.inputTensors,pt=lt.outputTensors,ft=new Array;for(const xt of ht)xt.id in Je&&ft.push(Je[xt.id]);if(ft.length===ht.length){let xt={},vt,At,Et,wt;if(lt.callArgs!=null&&(xt=lt.callArgs),ft.length===1){const[_t,Ct]=ft[0];xt.mask==null&&(xt.mask=Ct),Et=toList(ut.call(_t,xt)),wt=toList(ut.computeMask(_t,Ct)),vt=[_t],At=[Ct]}else vt=ft.map(_t=>_t[0]),At=ft.map(_t=>_t[1]),xt.mask==null&&(xt.mask=At),Et=toList(ut.call(vt,xt)),wt=toList(ut.computeMask(vt,At));if(ut.activityRegularizer)throw new NotImplementedError("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let _t=0;_t<pt.length;++_t){const Ct=pt[_t],Tt=Et[_t],St=wt[_t];Je[Ct.id]=[Tt,St]}}}}const st=[],rt=[],it=[];for(const ot of this.outputs){assert$1(ot.id in Je,`Could not compute output ${ot.name} : ${ot.id}`);const[at,lt]=Je[ot.id];it.push(at.shape),st.push(at),rt.push(lt)}return[st,rt,it]}buildNodeConversionMap(Ke){const Ye={};let Je;for(const tt of this.layers){Je=tt instanceof Container?1:0;for(let st=0;st<tt.inboundNodes.length;st++){const rt=Container.nodeKey(tt,st);this.containerNodes.has(rt)&&(Ye[rt]=Je,Je+=1)}}return Ye}getLayer(Ke,Ye){if(Ye!=null){if(this.layers.length<=Ye)throw new ValueError(`Was asked to retrieve layer at index ${Ye}, but model only has ${this.layers.length} layer(s).`);return this.layers[Ye]}else if(Ke==null)throw new ValueError("Provide either a layer name or layer index");for(const Je of this.layers)if(Je.name===Ke)return Je;throw new ValueError(`No such layer: ${Ke}`)}calculateLosses(){return tidy(()=>{const Ke=[];for(const Ye of this.layers)for(let Je=0;Je<Ye.inboundNodes.length;++Je){const tt=Container.nodeKey(Ye,Je);this.containerNodes.has(tt)&&Ke.push(...Ye.calculateLosses())}return Ke})}getConfig(){const Ke={name:this.name},Ye=this.buildNodeConversionMap(this.layers),Je=[];for(const rt of this.layers){const it=rt.getClassName(),ot=rt.getConfig(),at=[];for(let ut=0;ut<rt.inboundNodes.length;ut++){const ht=rt.inboundNodes[ut],pt=Container.nodeKey(rt,ut);let ft={};if(this.containerNodes.has(pt)){if(ht.callArgs)try{JSON.stringify(ht.callArgs),ft=ht.callArgs}catch{console.warn(`Layer ${rt.name} was passed non-serializable keyword arguments: ${ht.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),ft={}}if(ht.inboundLayers.length>0){const xt=[];for(let vt=0;vt<ht.inboundLayers.length;vt++){const At=ht.inboundLayers[vt],Et=ht.nodeIndices[vt],wt=ht.tensorIndices[vt],_t=Container.nodeKey(At,Et);let Ct=Ye[_t];Ct==null&&(Ct=0),xt.push([At.name,Ct,wt,ft])}at.push(xt)}}}const lt={};lt.name=rt.name,lt.className=it,lt.config=ot,lt.inboundNodes=at,Je.push(lt)}Ke.layers=Je;const tt=[];for(let rt=0;rt<this.inputLayers.length;rt++){const it=this.inputLayers[rt],ot=this.inputLayersNodeIndices[rt],at=Container.nodeKey(it,ot);if(!this.containerNodes.has(at))continue;let lt=Ye[at];lt==null&&(lt=0);const ut=this.inputLayersTensorIndices[rt];tt.push([it.name,lt,ut])}Ke.inputLayers=tt;const st=[];for(let rt=0;rt<this.outputLayers.length;rt++){const it=this.outputLayers[rt],ot=this.outputLayersNodeIndices[rt],at=Container.nodeKey(it,ot);if(!this.containerNodes.has(at))continue;let lt=Ye[at];lt==null&&(lt=0);const ut=this.outputLayersTensorIndices[rt];st.push([it.name,lt,ut])}return Ke.outputLayers=st,Ke}static fromConfig(Ke,Ye,Je={},tt=!1){const st={},rt={};function it(vt,At){vt.name in rt?rt[vt.name].push(At):rt[vt.name]=[At]}function ot(vt,At){const Et=[];let wt;for(const _t of At){const Ct=_t[0],Tt=_t[1],St=_t[2];if(wt=_t[3]==null?{}:_t[3],!(Ct in st)){it(vt,At);return}const Rt=st[Ct];if(Rt.inboundNodes.length<=Tt){it(vt,At);return}const Nt=Rt.inboundNodes[Tt];Et.push(Nt.outputTensors[St])}Et.length>0&&vt.apply(singletonOrArray(Et),wt)}function at(vt){const At=vt.name,Et=deserialize(vt,Ye.customObjects!=null?Ye.customObjects:{});Et.setFastWeightInitDuringBuild(tt),st[At]=Et,vt.inboundNodes.forEach(_t=>{if(!(_t instanceof Array))throw new ValueError(`Corrupted configuration, expected array for nodeData: ${_t}`);it(Et,_t)})}const lt=Ye.name,ut=Ye.layers;for(const vt of ut)at(vt);for(;!isObjectEmpty(rt);)for(const vt of ut){const At=st[vt.name];if(At.name in rt){const Et=rt[At.name];delete rt[At.name];for(const wt of Et)ot(At,wt)}}const ht=[],pt=[],ft=Ye.inputLayers;for(const vt of ft){const At=vt[0],Et=vt[1],wt=vt[2];assert$1(At in st);const Ct=st[At].inboundNodes[Et].outputTensors;ht.push(Ct[wt])}const xt=Ye.outputLayers;for(const vt of xt){const At=vt[0],Et=vt[1],wt=vt[2];assert$1(At in st);const Ct=st[At].inboundNodes[Et].outputTensors;pt.push(Ct[wt])}return new Ke({inputs:ht,outputs:pt,name:lt})}get stateful(){if(this._stateful)throw new ValueError("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const Ke of this.layers)if(Ke.stateful)return!0;return!1}resetStates(){tidy(()=>{this.layers.forEach(Ke=>{Ke.stateful&&Ke.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function standardizeSampleOrClassWeights(Xe,Ke,Ye){const Je=Ke.length;if(Xe==null||Array.isArray(Xe)&&Xe.length===0)return Ke.map(tt=>null);if(Je===1)return Array.isArray(Xe)&&Xe.length===1?Xe:typeof Xe=="object"&&Ke[0]in Xe?[Xe[Ke[0]]]:[Xe];if(Array.isArray(Xe)){if(Xe.length!==Je)throw new Error(`Provided ${Ye} is an array of ${Xe.length} element(s), but the model has ${Je} outputs. Make sure a set of weights is provided for each model output.`);return Xe}else if(typeof Xe=="object"&&Object.keys(Xe).length>0&&typeof Xe[Object.keys(Xe)[0]]=="object"){const tt=[];return Ke.forEach(st=>{st in Xe?tt.push(Xe[st]):tt.push(null)}),tt}else throw new Error(`The model has multiple (${Je}) outputs, so ${Ye} must be either an array with ${Je} elements or an object with ${Ke} keys. Provided ${Ye} not understood: ${JSON.stringify(Xe)}`)}function standardizeClassWeights(Xe,Ke){return standardizeSampleOrClassWeights(Xe,Ke,"classWeight")}async function standardizeWeights(Xe,Ke,Ye,Je){if(Ye!=null){const tt=tidy(()=>{if(Xe.shape.length===1)return Xe.clone();if(Xe.shape.length===2){if(Xe.shape[1]>1)return Xe.argMax(1);if(Xe.shape[1]===1)return Xe.reshape([Xe.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${Xe.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${Xe.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),st=Array.from(await tt.data());dispose(tt);const rt=[];return st.forEach(it=>{if(Ye[it]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${it} exists in the data but not in classWeight`);rt.push(Ye[it])}),tensor1d(rt,"float32")}else return null}function computeWeightedLoss(Xe,Ke){return mul(Xe,Ke)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const DEFAULT_VALIDATION_BATCH_SIZE=32;function standardizeDataIteratorOutput(Xe,Ke){let Ye,Je;const tt=Ke;Ye=tt.xs,Je=tt.ys,assert$2(Ye!=null&&Je!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${Ke}`);const st=flattenTensorOrArrayOrMap("input",Xe.inputNames,Ye),rt=flattenTensorOrArrayOrMap("output",Xe.outputNames,Je),it=st[0].shape[0];assert$2(st.length===Xe.inputs.length,()=>`LayersModel has ${Xe.inputs.length} inputs, but the dataset provides ${st.length} inputs.  (Expected input keys: ${JSON.stringify(Xe.inputNames)})`),assert$2(rt.length===Xe.outputs.length,()=>`LayersModel has ${Xe.outputs.length} outputs, but the dataset provides ${rt.length} outputs.  (Expected output keys: ${JSON.stringify(Xe.outputNames)})`);for(let ot=0;ot<st.length;ot++)assert$2(st[ot].shape[0]===it,()=>`Batch size mismatch: input ${Xe.inputNames[ot]} has ${st[ot].shape[0]}; expected  ${it} based on input ${Xe.inputNames[0]}.`);for(let ot=0;ot<rt.length;ot++)assert$2(rt[ot].shape[0]===it,()=>`Batch size mismatch: output ${Xe.outputNames[ot]} has ${rt[ot].shape[0]}; expected  ${it} based on input ${Xe.inputNames[0]}.`);return{xs:st,ys:rt}}function flattenTensorOrArrayOrMap(Xe,Ke,Ye){if(Ye instanceof Tensor)return[Ye];if(Array.isArray(Ye))return assert$2(Ye.length===Ke.length,()=>`Received an array of ${Ye.length} Tensors, but expected ${Ke.length} to match the ${Xe} keys ${Ke}.`),Ye;{const Je=[];for(const tt of Ke){if(Ye[tt]==null)throw new ValueError(`The feature data generated by the dataset lacks the required ${Xe} key '${tt}'.`);Je.push(Ye[tt])}return Je}}function standardizeTensorValidationData(Xe){if(Xe.length===3)throw new NotImplementedError("Validation with sample weights is not implemented yet.");return{xs:Xe[0],ys:Xe[1]}}async function fitDataset(Xe,Ke,Ye){const Je=Ye.batchesPerEpoch!=null;if(assert$2(Xe.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),assert$2(Ye!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),assert$2(Ye.epochs!=null&&Ye.epochs>0&&Number.isInteger(Ye.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${Ye.epochs}`),assert$2(!Je||Ye.batchesPerEpoch>0&&Number.isInteger(Ye.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${Ye.batchesPerEpoch}`),assert$2(Ye.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),Xe.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");Xe.isTraining=!0;try{const tt=Ye.validationData!=null;let st,rt;if(tt)if(isDatasetObject(Ye.validationData))assert$2(Ye.validationBatches==null||Ye.validationBatches>0&&Number.isInteger(Ye.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${Ye.validationBatches}`);else{const vt=standardizeTensorValidationData(Ye.validationData);st=vt.xs,rt=vt.ys}const it=Xe.makeTrainFunction(),ot=Xe.getDedupedMetricsNames();let at;tt?at=ot.slice().concat(ot.map(vt=>"val_"+vt)):at=ot.slice();const lt=standardizeCallbacks(Ye.callbacks,Ye.yieldEvery),ut=Ye.verbose==null?1:Ye.verbose,{callbackList:ht,history:pt}=configureCallbacks(lt,ut,Ye.epochs,null,null,getStepsPerEpoch(Ke,Ye),null,tt,at);ht.setModel(Xe),Xe.history=pt,await ht.onTrainBegin(),Xe.stopTraining_=!1;let ft=Ye.initialEpoch==null?0:Ye.initialEpoch,xt=await Ke.iterator();for(;ft<Ye.epochs;){const vt={};await ht.onEpochBegin(ft);let At=0,Et=0;for(Je||(xt=await Ke.iterator());!Je||At<Ye.batchesPerEpoch;){const wt=await xt.next();if(Je&&wt.done){console.warn(`You provided \`batchesPerEpoch\` as ${Ye.batchesPerEpoch}, but your dataset iterator ran out of data after ${At} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${Ye.batchesPerEpoch*Ye.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(wt.value!=null){const{xs:_t,ys:Ct}=standardizeDataIteratorOutput(Xe,wt.value),Tt={};Tt.batch=Et,Tt.size=_t[0].shape[0],await ht.onBatchBegin(Et,Tt);const St=[];if(Ye.classWeight!=null){const Pt=standardizeClassWeights(Ye.classWeight,Xe.outputNames);for(let Bt=0;Bt<Pt.length;++Bt)St.push(await standardizeWeights(Ct[Bt],null,Pt[Bt]))}const Rt=_t.concat(Ct).concat(St),Nt=it(Rt);dispose(Rt);for(let Pt=0;Pt<ot.length;++Pt){const Bt=ot[Pt],Lt=Nt[Pt];Tt[Bt]=Lt,keep(Lt)}await ht.onBatchEnd(Et,Tt),disposeTensorsInLogs(Tt),Et++,At++}if(Je?At>=Ye.batchesPerEpoch:wt.done){if(tt){let _t;isDatasetObject(Ye.validationData)?_t=toList(await Xe.evaluateDataset(Ye.validationData,{batches:Ye.validationBatches})):_t=toList(Xe.evaluate(st,rt,{batchSize:Ye.validationBatchSize==null?DEFAULT_VALIDATION_BATCH_SIZE:Ye.validationBatchSize,verbose:0}));for(let Ct=0;Ct<Xe.metricsNames.length;++Ct)vt[`val_${Xe.metricsNames[Ct]}`]=_t[Ct]}break}if(Xe.stopTraining_)break}if(await ht.onEpochEnd(ft,vt),ft++,Xe.stopTraining_)break}return await ht.onTrainEnd(),await Xe.history.syncData(),Xe.history}finally{Xe.isTraining=!1}}function getStepsPerEpoch(Xe,Ke){let Ye=null;return Ke.batchesPerEpoch!=null?Ye=Ke.batchesPerEpoch:Number.isFinite(Xe.size)&&(Ye=Xe.size),Ye}function isDatasetObject(Xe){return typeof Xe.iterator=="function"}function isLazyIteratorObject(Xe){return typeof Xe.next=="function"}async function evaluateDataset(Xe,Ke,Ye){Ye=Ye||{};const Je=Ye.batches!=null,tt=Xe.testFunction;let st=[];if(Ye.verbose>0)throw new NotImplementedError("Verbose mode is not implemented yet.");assert$2(!Je||Ye.batches>0&&Number.isInteger(Ye.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(Ye.batches)}`);const rt=isLazyIteratorObject(Ke)?Ke:await Ke.iterator();let it=0,ot=0;for(;!Je||ot<Ye.batches;){const at=await rt.next();if(st=tidy(()=>{if(at.value){const{xs:lt,ys:ut}=standardizeDataIteratorOutput(Xe,at.value),ht=lt.concat(ut),pt=tidy(()=>tt(ht));if(dispose(ht),ot===0)for(let xt=0;xt<pt.length;++xt)st.push(scalar(0));const ft=ht[0].shape[0];for(let xt=0;xt<pt.length;++xt){const vt=pt[xt],At=st[xt];st[xt]=tidy(()=>add$1(st[xt],mul(ft,vt))),ot>0&&dispose(At)}dispose(pt),it+=ft,++ot}return st}),at.done){Je&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${Ye.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let at=0;at<st.length;++at){const lt=st[at];st[at]=div$1(st[at],it),dispose(lt)}return singletonOrArray(st)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function checkBatchSize(Xe){assert$2(Xe>0&&Number.isInteger(Xe),()=>`batchSize is required to be a positive integer, but got ${Xe}`)}function sliceArrays(Xe,Ke,Ye){return Xe==null?[null]:Array.isArray(Xe)?Xe.map(Je=>sliceAlongFirstAxis(Je,Ke,Ye-Ke)):sliceAlongFirstAxis(Xe,Ke,Ye-Ke)}function sliceArraysByIndices(Xe,Ke){return tidy(()=>Xe==null?null:Array.isArray(Xe)?Xe.map(Ye=>sliceArraysByIndices(Ye,Ke)):gather(Xe,Ke.dtype==="int32"?Ke:Ke.toInt()))}function makeBatches(Xe,Ke){const Ye=[];let Je=0,tt=null;for(;Je<Xe;)tt=Je+Ke,tt>=Xe&&(tt=Xe),Ye.push([Je,tt]),Je=tt;return Ye}async function fitLoop(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht,pt,ft){tt==null&&(tt=32),st==null&&(st=1),lt==null&&(lt=!0),ht==null&&(ht=0);let xt=!1;ot!=null&&at!=null&&(xt=!0);const vt=Xe.checkNumSamples(Ye,tt,pt,"steps_per_epoch");let At;vt!=null&&(At=range$3(0,vt)),rt==null&&(rt=1);const{callbackList:Et,history:wt}=configureCallbacks(it,rt,st,ht,vt,pt,tt,xt,ut);Et.setModel(Xe),Xe.history=wt,await Et.onTrainBegin(),Xe.stopTraining_=!1;for(let _t=ht;_t<st;++_t){await Et.onEpochBegin(_t);const Ct={};{if(lt==="batch")throw new NotImplementedError("batch shuffling is not implemneted yet");lt&&shuffle(At);const Tt=tensor1d(At),St=makeBatches(vt,tt);for(let Rt=0;Rt<St.length;++Rt){const Nt={};if(await Et.onBatchBegin(Rt,Nt),tidy(()=>{const Pt=St[Rt][0],Bt=St[Rt][1],Lt=sliceAlongFirstAxis(Tt,Pt,Bt-Pt);Nt.batch=Rt,Nt.size=Bt-Pt;const zt=sliceArraysByIndices(Ye,Lt),Dt=Ke(zt);for(let Vt=0;Vt<Je.length;++Vt){const Gt=Je[Vt],Qt=Dt[Vt];Nt[Gt]=Qt,keep(Qt)}if(Rt===St.length-1&&xt){const Vt=Xe.testLoop(ot,at,tt);for(let Gt=0;Gt<Je.length;++Gt){const Qt=Je[Gt],jt=Vt[Gt];keep(jt),Ct["val_"+Qt]=jt}}}),await Et.onBatchEnd(Rt,Nt),disposeTensorsInLogs(Nt),Xe.stopTraining_)break}Tt.dispose()}if(await Et.onEpochEnd(_t,Ct),Xe.stopTraining_)break}return await Et.onTrainEnd(),await Xe.history.syncData(),Xe.history}async function fitTensors(Xe,Ke,Ye,Je={}){if(Xe.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");Xe.isTraining=!0;let tt,st,rt,it,ot,at,lt;try{const ut=Je.batchSize==null?32:Je.batchSize;checkBatchSize(ut);const pt=await Xe.standardizeUserData(Ke,Ye,Je.sampleWeight,Je.classWeight,!1,ut);tt=pt[0],st=pt[1],lt=pt[2];let ft=!1,xt;if(Je.validationData!=null&&Je.validationData.length>0){if(ft=!0,Je.validationData.length===2)rt=Je.validationData[0],it=Je.validationData[1];else throw Je.validationData.length===3?new NotImplementedError("validationData including sample weights is not supported yet."):new ValueError(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${Je.validationData} is invalid.`);const Rt=await Xe.standardizeUserData(rt,it,null,null,!0,ut);ot=Rt[0],at=Rt[1],xt=ot.concat(at)}else if(Je.validationSplit!=null&&Je.validationSplit>0&&Je.validationSplit<1){ft=!0;const St=Math.floor(tt[0].shape[0]*(1-Je.validationSplit)),Rt=tt[0].shape[0];ot=sliceArrays(tt,St,Rt),tt=sliceArrays(tt,0,St),at=sliceArrays(st,St,Rt),st=sliceArrays(st,0,St),xt=ot.concat(at)}else Je.validationSteps!=null&&(ft=!0);const vt=tt.concat(st).concat(lt);Xe.checkTrainableWeightsConsistency();const At=Xe.makeTrainFunction(),Et=Xe.getDedupedMetricsNames();let wt,_t;ft?(Xe.makeTestFunction(),wt=Xe.testFunction,_t=Et.slice().concat(Et.map(St=>"val_"+St))):(wt=null,xt=[],_t=Et.slice());const Ct=standardizeCallbacks(Je.callbacks,Je.yieldEvery);return await fitLoop(Xe,At,vt,Et,ut,Je.epochs,Je.verbose,Ct,wt,xt,Je.shuffle,_t,Je.initialEpoch,null,null)}finally{Xe.isTraining=!1,disposeNewTensors(tt,Ke),disposeNewTensors(st,Ye),disposeNewTensors(ot,rt),disposeNewTensors(at,it),lt!=null&&dispose(lt)}}function ensureTensorsRank2OrHigher(Xe){const Ke=[];Xe instanceof Tensor&&(Xe=[Xe]);for(let Ye=0;Ye<Xe.length;++Ye){const Je=Xe[Ye];if(Je.rank===1)Ke.push(expandDims$2(Je,1));else{if(Je.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");Ke.push(Je)}}return Ke}function disposeNewTensors(Xe,Ke){if(Xe==null)return;const Ye=[];if(Ke instanceof Tensor)Ye.push(Ke.id);else if(Array.isArray(Ke))Ke.forEach(tt=>Ye.push(tt.id));else if(Ke!=null)for(const tt in Ke){const st=Ke[tt];Ye.push(st.id)}const Je=[];if(Xe instanceof Tensor)Ye.indexOf(Xe.id)===-1&&Je.push(Xe);else if(Array.isArray(Xe))Xe.forEach(tt=>{Ye.indexOf(tt.id)===-1&&Je.push(tt)});else if(Xe!=null)for(const tt in Xe){const st=Xe[tt];Ye.indexOf(st.id)===-1&&Je.push(st)}Je.forEach(tt=>{tt.isDisposed||tt.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isDataTensor(Xe){return Xe instanceof Tensor}function isDataArray(Xe){return Array.isArray(Xe)}function isDataDict(Xe){return!isDataTensor(Xe)&&!isDataArray(Xe)}function standardizeInputData(Xe,Ke,Ye,Je=!0,tt=""){if(Ke==null||Ke.length===0){if(Xe!=null){let rt=!1;if(isDataArray(Xe)&&Xe.length>0)rt=!0;else if(isDataDict(Xe)){for(const it in Xe)if(Xe.hasOwnProperty(it)){rt=!0;break}}else rt=!0;if(rt)throw new ValueError(`Error when checking model ${tt} expected no data, but got ${Xe}`)}return[]}if(Xe==null)return Ke.map(rt=>null);let st;if(isDataDict(Xe)){Xe=Xe,st=[];for(const rt of Ke){if(Xe[rt]==null)throw new ValueError(`No data provided for "${rt}". Need data for each key in: ${Ke}`);st.push(Xe[rt])}}else if(isDataArray(Xe)){if(Xe=Xe,Xe.length!==Ke.length)throw new ValueError(`Error when checking model ${tt}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${Ke.length} Tensor(s), but instead got the following list of Tensor(s): ${Xe}`);st=Xe}else{if(Xe=Xe,Ke.length>1)throw new ValueError(`The model ${tt} expects ${Ke.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${Xe.shape}`);st=[Xe]}if(st=ensureTensorsRank2OrHigher(st),Ye!=null)for(let rt=0;rt<Ke.length;++rt){if(Ye[rt]==null)continue;const it=st[rt];if(it.shape.length!==Ye[rt].length)throw new ValueError(`Error when checking ${tt}: expected ${Ke[rt]} to have ${Ye[rt].length} dimension(s). but got array with shape ${it.shape}`);for(let ot=0;ot<Ye[rt].length;++ot){if(ot===0&&!Je)continue;const at=it.shape[ot],lt=Ye[rt][ot];if(lt!=null&&lt>=0&&at!==lt)throw new ValueError(`Error when checking ${tt}: expected ${Ke[rt]} to have shape [${Ye[rt]}], but got array with shape [${it.shape}].`)}}return st}function checkArrayLengths(Xe,Ke,Ye){const Je=unique$3(Xe.map(st=>st.shape[0]));Je.sort();const tt=unique$3(Ke.map(st=>st.shape[0]));if(tt.sort(),Je.length>1)throw new ValueError(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(Xe.map(st=>st.shape))}`);if(tt.length>1)throw new ValueError(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(Ke.map(st=>st.shape))}`);if(Je.length>0&&tt.length>0&&!arraysEqual(Je,tt))throw new ValueError(`Input Tensors should have the same number of samples as target Tensors. Found ${Je[0]} input sample(s) and ${tt[0]} target sample(s).`)}function checkLossAndTargetCompatibility(Xe,Ke,Ye){const Je=[meanSquaredError,binaryCrossentropy$1,categoricalCrossentropy$1];for(let tt=0;tt<Xe.length;++tt){const st=Xe[tt],rt=Ke[tt],it=Ye[tt];if(rt!=null){if(rt===categoricalCrossentropy$1&&st.shape[st.shape.length-1]===1)throw new ValueError(`You are passing a target array of shape ${st.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(Je.indexOf(rt)!==-1){const ot=st.shape.slice(1),at=it.slice(1);for(let lt=0;lt<ot.length;++lt){const ut=ot[lt],ht=at[lt];if(ht!=null&&ut!==ht)throw new ValueError(`A target Tensor with shape ${st.shape} was passed for an output of shape ${it}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function checkInputData(Xe,Ke,Ye,Je=!0,tt=""){let st;if(Array.isArray(Xe)){if(Xe.length!==Ke.length)throw new ValueError(`Error when checking model ${tt}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${Ke.length} Tensor(s), but instead got ${Xe.length} Tensors(s).`);st=Xe}else{if(Ke.length>1)throw new ValueError(`The model expects ${Ke.length} ${tt} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(Xe.shape)}.`);st=[Xe]}if(Ye!=null)for(let rt=0;rt<Ke.length;++rt){if(Ye[rt]==null)continue;const it=st[rt];if(it.shape.length!==Ye[rt].length)throw new ValueError(`Error when checking ${tt}: expected ${Ke[rt]} to have ${Ye[rt].length} dimension(s), but got array with shape ${JSON.stringify(it.shape)}`);for(let ot=0;ot<Ye[rt].length;++ot){if(ot===0&&!Je)continue;const at=it.shape[ot],lt=Ye[rt][ot];if(lt!=null&&lt!==at)throw new ValueError(`Error when checking ${tt}: expected ${Ke[rt]} to have shape ${JSON.stringify(Ye[rt])} but got array with shape ${JSON.stringify(it.shape)}.`)}}}function collectMetrics(Xe,Ke){if(Xe==null||Array.isArray(Xe)&&Xe.length===0)return Ke.map(Je=>[]);let Ye;if(typeof Xe=="string"||typeof Xe=="function")Ye=[Xe];else if(Array.isArray(Xe)||typeof Xe=="object")Ye=Xe;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${Xe}`);if(Array.isArray(Ye))return Ke.map(Je=>Ye);{const Je=[];for(const tt of Ke){let st=Ye.hasOwnProperty(tt)?Ye[tt]:[];Array.isArray(st)||(st=[st]),Je.push(st)}return Je}}const LAYERS_MODEL_FORMAT_NAME="layers-model";class LayersModel extends Container{constructor(Ke){super(Ke),this.isTraining=!1}summary(Ke,Ye,Je=console.log){if(!this.built)throw new ValueError("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");printSummary(this,Ke,Ye,Je)}compile(Ke){if(Ke.loss==null&&(Ke.loss=[]),this.loss=Ke.loss,typeof Ke.optimizer=="string")this.optimizer_=getOptimizer(Ke.optimizer),this.isOptimizerOwned=!0;else{if(!(Ke.optimizer instanceof Optimizer))throw new ValueError("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=Ke.optimizer,this.isOptimizerOwned=!1}let Ye=[];if(!Array.isArray(Ke.loss)&&typeof Ke.loss!="string"&&typeof Ke.loss!="function"){Ke.loss=Ke.loss;for(const rt in Ke.loss)if(this.outputNames.indexOf(rt)===-1)throw new ValueError(`Unknown entry in loss dictionary: "${rt}". Only expected the following keys: ${this.outputNames}`);for(const rt of this.outputNames)Ke.loss[rt]==null&&console.warn(`Output "${rt}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${rt} during training`),Ye.push(get$3(Ke.loss[rt]))}else if(Array.isArray(Ke.loss)){if(Ke.loss.length!==this.outputs.length)throw new ValueError(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${Ke.loss}.`);Ye=Ke.loss.map(it=>get$3(it))}else{const rt=get$3(Ke.loss);this.outputs.forEach(it=>{Ye.push(rt)})}this.lossFunctions=Ye,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let rt=0;rt<this.outputs.length;++rt){const it=this.internalOutputShapes[rt],ot=this.outputNames[rt];this.feedOutputNames.push(ot),this.feedOutputShapes.push(it),this.feedLossFns.push(this.lossFunctions[rt])}const Je=[];this.metrics=Ke.metrics,this.metricsNames=["loss"],this.metricsTensors=[],nameScope("loss",()=>{for(let rt=0;rt<this.outputs.length;++rt){if(Je.indexOf(rt)!==-1)continue;const it=this.lossFunctions[rt];this.outputs.length>1&&(this.metricsTensors.push([it,rt]),this.metricsNames.push(this.outputNames[rt]+"_loss"))}});const tt=collectMetrics(Ke.metrics,this.outputNames),st=(rt,it,ot)=>{this.outputNames.length>1&&(it=this.outputNames[rt]+"_"+it),this.metricsNames.push(it),this.metricsTensors.push([ot,rt])};nameScope("metric",()=>{for(let rt=0;rt<this.outputs.length;++rt){if(Je.indexOf(rt)!==-1)continue;const it=tt[rt];(at=>{let ut,ht,pt;for(const ft of at){if(typeof ft=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(ft)!==-1){const vt=this.internalOutputShapes[rt];vt[vt.length-1]===1||this.lossFunctions[rt]===binaryCrossentropy$1?["accuracy","acc"].indexOf(ft)!==-1?ht=binaryAccuracy:["crossentropy","ce"].indexOf(ft)!==-1&&(ht=binaryCrossentropy):this.lossFunctions[rt]===sparseCategoricalCrossentropy$1?["accuracy","acc"].indexOf(ft)!==-1?ht=sparseCategoricalAccuracy:["crossentropy","ce"].indexOf(ft)!==-1&&(ht=sparseCategoricalCrossentropy):["accuracy","acc"].indexOf(ft)!==-1?ht=categoricalAccuracy:["crossentropy","ce"].indexOf(ft)!==-1&&(ht=categoricalCrossentropy);let At;["accuracy","acc"].indexOf(ft)!==-1?At="acc":["crossentropy","ce"].indexOf(ft)!==-1&&(At="ce"),pt=ht,ut=""+At}else pt=get$2(ft),ut=""+getLossOrMetricName(ft);let xt;nameScope(ut,()=>{xt=pt}),st(rt,ut,xt)}})(it)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(Ke,Ye,Je={}){const tt=Je.batchSize==null?32:Je.batchSize;checkBatchSize(tt);const rt=this.standardizeUserDataXY(Ke,Ye,!0,tt);try{const it=rt[0].concat(rt[1]);this.makeTestFunction();const ot=this.testFunction,at=this.testLoop(ot,it,tt,Je.verbose,Je.steps);return singletonOrArray(at)}finally{disposeNewTensors(rt[0],Ke),disposeNewTensors(rt[1],Ye)}}async evaluateDataset(Ke,Ye){return this.makeTestFunction(),evaluateDataset(this,Ke,Ye)}checkNumSamples(Ke,Ye,Je,tt="steps"){let st;if(Je!=null){if(st=null,Ye!=null)throw new ValueError(`If ${tt} is set, batchSize must be null or undefined.Got batchSize = ${Ye}`)}else if(Ke!=null)Array.isArray(Ke)?st=Ke[0].shape[0]:st=Ke.shape[0];else throw new ValueError(`Either the input data should have a defined shape, or ${tt} shoud be specified.`);return st}execute(Ke,Ye){if(Array.isArray(Ye)&&Ye.length===0)throw new ValueError("`outputs` is an empty Array, which is not allowed.");const Je=Array.isArray(Ye),tt=Je?Ye:[Ye],st=this.retrieveSymbolicTensors(tt),rt=new FeedDict;if(Ke instanceof Tensor&&(Ke=[Ke]),Array.isArray(Ke)){if(Ke.length!==this.inputs.length)throw new ValueError(`The number of inputs provided (${Ke.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let ot=0;ot<this.inputs.length;++ot)rt.add(this.inputs[ot],Ke[ot])}else for(const ot of this.inputs){const at=Ke[ot.name];if(at==null)throw new ValueError(`No value is provided for the model's input ${ot.name}`);rt.add(ot,at)}const it=execute(st,rt);return Je?it:it[0]}retrieveSymbolicTensors(Ke){const Ye=pyListRepeat(null,Ke.length);let Je=Ke.length;for(const tt of this.layers){const st=Array.isArray(tt.output)?tt.output:[tt.output],rt=st.map(it=>it.name);for(let it=0;it<Ke.length;++it){const ot=rt.indexOf(Ke[it]);if(ot!==-1&&(Ye[it]=st[ot],Je--),Je===0)break}if(Je===0)break}if(Je>0){const tt=[];throw Ye.forEach((st,rt)=>{st==null&&tt.push(Ke[rt])}),new ValueError(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(tt)}`)}return Ye}predictLoop(Ke,Ye=32,Je=!1){return tidy(()=>{const tt=this.checkNumSamples(Ke);if(Je)throw new NotImplementedError("Verbose predictLoop() is not implemented yet.");const st=makeBatches(tt,Ye),rt=this.outputs.map(it=>[]);for(let it=0;it<st.length;++it)tidy(()=>{const at=st[it][0],lt=st[it][1],ut=sliceArrays(Ke,at,lt),ht=[];if(Array.isArray(ut))for(let ft=0;ft<ut.length;++ft)ht.push({key:this.inputs[ft],value:ut[ft]});else ht.push({key:this.inputs[0],value:ut});const pt=new FeedDict(ht);return execute(this.outputs,pt)}).forEach((at,lt)=>rt[lt].push(at));return singletonOrArray(rt.map(it=>concat$2(it,0)))})}predict(Ke,Ye={}){const Je=ensureTensorsRank2OrHigher(Ke);checkInputData(Je,this.inputNames,this.feedInputShapes,!1);try{const tt=Ye.batchSize==null?32:Ye.batchSize;return checkBatchSize(tt),this.predictLoop(Je,tt)}finally{disposeNewTensors(Je,Ke)}}predictOnBatch(Ke){checkInputData(Ke,this.inputNames,this.feedInputShapes,!0);const Ye=(Array.isArray(Ke)?Ke[0]:Ke).shape[0];return this.predictLoop(Ke,Ye)}standardizeUserDataXY(Ke,Ye,Je=!0,tt){if(this.optimizer_==null)throw new RuntimeError("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const st=[];for(let rt=0;rt<this.feedOutputShapes.length;++rt){const it=this.feedOutputShapes[rt];this.feedLossFns[rt]===sparseCategoricalCrossentropy$1?st.push(it.slice(0,it.length-1).concat([1])):st.push(it)}if(Ke=standardizeInputData(Ke,this.feedInputNames,this.feedInputShapes,!1,"input"),Ye=standardizeInputData(Ye,this.feedOutputNames,st,!1,"target"),checkArrayLengths(Ke,Ye),checkLossAndTargetCompatibility(Ye,this.feedLossFns,this.feedOutputShapes),this.stateful&&tt!=null&&tt>0&&Ke[0].shape[0]%tt!==0)throw new ValueError(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${tt}. Found: ${Ke[0].shape[0]} sample(s).`);return[Ke,Ye]}async standardizeUserData(Ke,Ye,Je,tt,st=!0,rt){const[it,ot]=this.standardizeUserDataXY(Ke,Ye,st,rt);if(Je!=null)throw new Error("sample weight is not supported yet.");let at=null;if(tt!=null){const lt=standardizeClassWeights(tt,this.outputNames);at=[];for(let ut=0;ut<lt.length;++ut)at.push(await standardizeWeights(ot[ut],null,lt[ut]))}return[it,ot,at]}testLoop(Ke,Ye,Je,tt=0,st){return tidy(()=>{const rt=this.checkNumSamples(Ye,Je,st,"steps"),it=[];if(tt>0)throw new NotImplementedError("Verbose mode is not implemented yet.");if(st!=null)throw new NotImplementedError("steps mode in testLoop() is not implemented yet");{const ot=makeBatches(rt,Je),at=tensor1d(range$3(0,rt));for(let lt=0;lt<ot.length;++lt){const ut=ot[lt][0],ht=ot[lt][1],pt=sliceAlongFirstAxis(at,ut,ht-ut),ft=sliceArraysByIndices(Ye,pt),xt=Ke(ft);if(lt===0)for(let vt=0;vt<xt.length;++vt)it.push(scalar(0));for(let vt=0;vt<xt.length;++vt){const At=xt[vt];it[vt]=add$1(it[vt],mul(ht-ut,At))}}for(let lt=0;lt<it.length;++lt)it[lt]=div$1(it[lt],rt)}return it})}getDedupedMetricsNames(){const Ke=this.metricsNames,Ye=[];for(let Je=0;Je<Ke.length;++Je){const tt=Ke[Je];let st=tt;if(count(Ke,tt)>1){const rt=count(Ke.slice(0,Je),tt);st+=`_${rt}`}Ye.push(st)}return Ye}makeTrainFunction(){return Ke=>{const Ye=[],Je=Ke.slice(0,this.inputs.length),tt=Ke.slice(this.inputs.length,this.inputs.length+this.outputs.length),st=Ke.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),rt=[],it=()=>{const ut=[];for(let xt=0;xt<this.inputs.length;++xt)ut.push({key:this.inputs[xt],value:Je[xt]});const ht=new FeedDict(ut),pt=execute(this.outputs,ht,{training:!0});let ft;for(let xt=0;xt<this.lossFunctions.length;++xt){const vt=this.lossFunctions[xt];let At=vt(tt[xt],pt[xt]);st[xt]!=null&&(At=computeWeightedLoss(At,st[xt]));const Et=mean$1(At);Ye.push(Et),xt===0?ft=At:ft=add$1(ft,At)}for(let xt=0;xt<this.metricsTensors.length;++xt){let vt;if(this.outputs.length>1&&xt<this.outputs.length)vt=Ye[xt];else{const At=this.metricsTensors[xt][0],Et=this.metricsTensors[xt][1];vt=mean$1(At(tt[Et],pt[Et]))}keep(vt),rt.push(vt)}return ft=mean$1(ft),this.calculateLosses().forEach(xt=>{ft=add$1(ft,xt)}),ft},ot=this.collectedTrainableWeights.map(ut=>ut.read());return[this.optimizer_.minimize(it,!0,ot)].concat(rt)}}makeTestFunction(){this.testFunction=Ke=>tidy(()=>{const Ye=[];let Je;const tt=Ke.slice(0,this.inputs.length),st=Ke.slice(this.inputs.length,this.inputs.length+this.outputs.length),rt=[];for(let at=0;at<this.inputs.length;++at)rt.push({key:this.inputs[at],value:tt[at]});const it=new FeedDict(rt),ot=execute(this.outputs,it);for(let at=0;at<this.lossFunctions.length;++at){const lt=this.lossFunctions[at],ut=mean$1(lt(st[at],ot[at]));at===0?Je=ut:Je=add$1(Je,ut),Ye.push(Je)}for(let at=0;at<this.metricsTensors.length;++at){const lt=this.metricsTensors[at][0],ut=this.metricsTensors[at][1],ht=mean$1(lt(st[ut],ot[ut]));Ye.push(ht)}return Ye})}async fit(Ke,Ye,Je={}){return fitTensors(this,Ke,Ye,Je)}async fitDataset(Ke,Ye){return fitDataset(this,Ke,Ye)}async trainOnBatch(Ke,Ye){const Je=await this.standardizeUserData(Ke,Ye),tt=Je[0],st=Je[1],it=this.makeTrainFunction()(tt.concat(st)),ot=[];for(const at of it){const lt=await at.data();ot.push(lt[0])}return dispose(it),singletonOrArray(ot)}getNamedWeights(Ke){const Ye=[],Je=Ke!=null&&Ke.trainableOnly,tt=Je?this.trainableWeights:this.weights,st=this.getWeights(Je);for(let rt=0;rt<tt.length;++rt)Je&&!tt[rt].trainable||Ye.push({name:tt[rt].originalName,tensor:st[rt]});return Ye}set stopTraining(Ke){this.stopTraining_=Ke}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(Ke){this.optimizer_!==Ke&&(this.optimizer_=Ke,this.isOptimizerOwned=!1)}dispose(){const Ke=super.dispose();if(Ke.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const Ye=memory().numTensors;this.optimizer_.dispose(),Ke.numDisposedVariables+=Ye-memory().numTensors}return Ke}getLossIdentifiers(){let Ke;if(typeof this.loss=="string")Ke=toSnakeCase(this.loss);else if(Array.isArray(this.loss)){for(const Ye of this.loss)if(typeof Ye!="string")throw new Error("Serialization of non-string loss is not supported.");Ke=this.loss.map(Ye=>toSnakeCase(Ye))}else{const Ye=Object.keys(this.loss);Ke={};const Je=this.loss;for(const tt of Ye)if(typeof Je[tt]=="string")Ke[tt]=toSnakeCase(Je[tt]);else throw new Error("Serialization of non-string loss is not supported.")}return Ke}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[toSnakeCase(getLossOrMetricName(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(Ke=>toSnakeCase(getLossOrMetricName(Ke)));{const Ke={};for(const Ye in this.metrics)Ke[Ye]=toSnakeCase(getLossOrMetricName(this.metrics[Ye]));return Ke}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(Ke){if(Ke.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(Ke.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(Ke.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const Ye=convertPythonicToTs(Ke.optimizer_config),Je=deserialize(Ye);let tt;if(typeof Ke.loss=="string")tt=toCamelCase(Ke.loss);else if(Array.isArray(Ke.loss))tt=Ke.loss.map(rt=>toCamelCase(rt));else if(Ke.loss!=null){tt={};for(const rt in Ke.loss)tt[rt]=toCamelCase(Ke.loss[rt])}let st;if(Array.isArray(Ke.metrics))st=Ke.metrics.map(rt=>toCamelCase(rt));else if(Ke.metrics!=null){st={};for(const rt in Ke.metrics)st[rt]=toCamelCase(Ke.metrics[rt])}this.compile({loss:tt,metrics:st,optimizer:Je})}async save(Ke,Ye){if(typeof Ke=="string"){const at=getSaveHandlers(Ke);if(at.length===0)throw new ValueError(`Cannot find any save handlers for URL '${Ke}'`);if(at.length>1)throw new ValueError(`Found more than one (${at.length}) save handlers for URL '${Ke}'`);Ke=at[0]}if(Ke.save==null)throw new ValueError("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const Je=await encodeWeights(this.getNamedWeights(Ye)),it={modelTopology:this.toJSON(null,!1),format:LAYERS_MODEL_FORMAT_NAME,generatedBy:`TensorFlow.js tfjs-layers v${version$1}`,convertedBy:null};if((Ye==null?!1:Ye.includeOptimizer)&&this.optimizer!=null){it.trainingConfig=this.getTrainingConfig();const at="optimizer",{data:lt,specs:ut}=await encodeWeights(await this.optimizer.getWeights(),at);Je.specs.push(...ut),Je.data=concatenateArrayBuffers([Je.data,lt])}return this.userDefinedMetadata!=null&&(checkUserDefinedMetadata(this.userDefinedMetadata,this.name,!0),it.userDefinedMetadata=this.userDefinedMetadata),it.weightData=Je.data,it.weightSpecs=Je.specs,Ke.save(it)}setUserDefinedMetadata(Ke){checkUserDefinedMetadata(Ke,this.name),this.userDefinedMetadata=Ke}getUserDefinedMetadata(){return this.userDefinedMetadata}}LayersModel.className="Model";registerClass(LayersModel);class Functional extends LayersModel{}Functional.className="Functional";registerClass(Functional);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Sequential extends LayersModel{constructor(Ke){if(super({inputs:[],outputs:[]}),Ke=Ke||{},this.trainable=!0,this.built=!1,this.name=Ke.name!=null?Ke.name:getUid("sequential_"),Ke.layers!=null)for(const Ye of Ke.layers)this.add(Ye)}checkShape(Ke){if(Ke.inboundNodes[0].outputTensors[0].shape.some(Je=>Je<0))throw new ValueError(`Negative dimension size caused by adding layer ${Ke.name} with input shape [${Ke.inboundNodes[0].inputTensors[0].shape}]`)}add(Ke){const Ye=Ke instanceof Sequential||Ke instanceof LayersModel;let Je;if(Ye){if(Je=Ke,Je.outputs.length!==1)throw new ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(Je.inputs.length!==1)throw new ValueError("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(Ke.inboundNodes.length===0){if(Ke.batchInputShape==null)throw new ValueError("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const tt=Input$3({batchShape:Ke.batchInputShape,dtype:Ke.dtype,name:Ke.name+"_input"});Ke.apply(tt)}if(Ye)this.outputs=Je.outputs,this.inputs=Je.inputs;else{if(Ke.inboundNodes.length!==1)throw new ValueError(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${Ke.name} which has ${Ke.inboundNodes.length} pre-existing inbound connections.`);if(Ke.inboundNodes[0].outputTensors.length!==1)throw new ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(Ke),this.outputs=[Ke.inboundNodes[0].outputTensors[0]],this.inputs=getSourceInputs(this.outputs[0])}this.inboundNodes=[],new Node$1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:pyListRepeat(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(tt=>tt.shape),outputShapes:this.outputs[0].shape})}else{const tt=Ke.apply(this.outputs[0]);if(Array.isArray(tt))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(Ke),this.outputs=[tt],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(Ke),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const Ke=this.layers.length-1;this.layers[Ke].outboundNodes=[],this.outputs=[this.layers[Ke].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(Ke,Ye){return this.model==null&&this.build(),this.model.call(Ke,Ye)}build(Ke){if(getExactlyOneShape(Ke),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new LayersModel({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(Ke,Ye,Je=console.log){this.built||this.build(),super.summary(Ke,Ye,Je)}setWeights(Ke){this.model==null&&this.build(),this.model.setWeights(Ke)}evaluate(Ke,Ye,Je={}){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.evaluate(Ke,Ye,Je)}async evaluateDataset(Ke,Ye){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.evaluateDataset(Ke,Ye)}predict(Ke,Ye={}){return this.model==null&&this.build(),this.model.predict(Ke,Ye)}predictOnBatch(Ke){return this.model==null&&this.build(),this.model.predictOnBatch(Ke)}compile(Ke){this.build(),this.model.compile(Ke),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(Ke){this.model.optimizer=Ke}async fit(Ke,Ye,Je={}){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.fit(Ke,Ye,Je)}async fitDataset(Ke,Ye){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.fitDataset(Ke,Ye)}async trainOnBatch(Ke,Ye){return this.model.trainOnBatch(Ke,Ye)}static fromConfig(Ke,Ye,Je={},tt=!1){let st,rt={};if(Ye instanceof Array){if(Ye[0].className==null||Ye[0].className==="Merge")throw new ValueError("Legacy serialization format not supported yet.");st=Ye}else assert$2(Ye.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),st=Ye.layers,delete Ye.layers,rt=Ye;const it=new Ke(rt);if(!(it instanceof Sequential))throw new NotImplementedError(`Sequential.fromConfig called on non-Sequential input: ${it}`);for(const ot of st){const lt=deserialize(ot,void 0,tt);tt&&lt.setFastWeightInitDuringBuild(!0),it.add(lt)}return it}set stopTraining(Ke){if(this.model==null)throw new ValueError("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=Ke}get stopTraining(){if(this.model==null)throw new ValueError("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const Ke=[];for(const Ye of this.layers){const Je={};Je.className=Ye.getClassName(),Je.config=Ye.getConfig(),Ke.push(Je)}return{name:this.name,layers:Ke}}}Sequential.className="Sequential";registerClass(Sequential);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Activation$1=class extends Serializable{getConfig(){return{}}};class Elu extends Activation$1{apply(Ke,Ye=1){return elu$2(Ke,Ye)}}Elu.className="elu";registerClass(Elu);class Selu extends Activation$1{apply(Ke){return selu$2(Ke)}}Selu.className="selu";registerClass(Selu);class Relu extends Activation$1{apply(Ke){return relu$2(Ke)}}Relu.className="relu";registerClass(Relu);class Relu6 extends Activation$1{apply(Ke){return tidy(()=>minimum$2(6,relu$2(Ke)))}}Relu6.className="relu6";registerClass(Relu6);class Linear extends Activation$1{apply(Ke){return Ke}}Linear.className="linear";registerClass(Linear);class Sigmoid extends Activation$1{apply(Ke){return sigmoid$2(Ke)}}Sigmoid.className="sigmoid";registerClass(Sigmoid);class HardSigmoid extends Activation$1{apply(Ke){return hardSigmoid(Ke)}}HardSigmoid.className="hardSigmoid";registerClass(HardSigmoid);class Softplus extends Activation$1{apply(Ke){return softplus$2(Ke)}}Softplus.className="softplus";registerClass(Softplus);class Softsign extends Activation$1{apply(Ke){return softsign(Ke)}}Softsign.className="softsign";registerClass(Softsign);class Tanh extends Activation$1{apply(Ke){return tanh$2(Ke)}}Tanh.className="tanh";registerClass(Tanh);let Softmax$1=class extends Activation$1{apply(Ke,Ye=-1){return softmax$2(Ke,Ye)}};Softmax$1.className="softmax";registerClass(Softmax$1);class LogSoftmax extends Activation$1{apply(Ke,Ye=-1){return logSoftmax(Ke,Ye)}}LogSoftmax.className="logSoftmax";registerClass(LogSoftmax);class Swish extends Activation$1{apply(Ke,Ye=1){return tidy(()=>sigmoid$2(Ke.mul(Ye)).mul(Ke))}}Swish.className="swish";registerClass(Swish);function serializeActivation(Xe){return Xe.getClassName()}function deserializeActivation(Xe,Ke={}){return deserializeKerasObject(Xe,SerializationMap.getMap().classNameMap,Ke,"activation")}function getActivation(Xe){if(Xe==null){const Ke={};return Ke.className="linear",Ke.config={},deserializeActivation(Ke)}if(typeof Xe=="string"){const Ke={};return Ke.className=Xe,Ke.config={},deserializeActivation(Ke)}else return Xe instanceof Activation$1?Xe:deserializeActivation(Xe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function assertObjectArgs(Xe){if(Xe!=null&&typeof Xe!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${Xe}`)}class Regularizer extends Serializable{}class L1L2 extends Regularizer{constructor(Ke){super(),assertObjectArgs(Ke),this.l1=Ke==null||Ke.l1==null?.01:Ke.l1,this.l2=Ke==null||Ke.l2==null?.01:Ke.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(Ke){return tidy(()=>{let Ye=zeros$1([1]);return this.hasL1&&(Ye=add$1(Ye,sum$2(mul(this.l1,abs$3(Ke))))),this.hasL2&&(Ye=add$1(Ye,sum$2(mul(this.l2,square$2(Ke))))),Ye.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(Ke,Ye){return new Ke({l1:Ye.l1,l2:Ye.l2})}}L1L2.className="L1L2";registerClass(L1L2);const REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP={l1l2:"L1L2"};function serializeRegularizer(Xe){return serializeKerasObject(Xe)}function deserializeRegularizer(Xe,Ke={}){return deserializeKerasObject(Xe,SerializationMap.getMap().classNameMap,Ke,"regularizer")}function getRegularizer(Xe){if(Xe==null)return null;if(typeof Xe=="string"){const Ye={className:Xe in REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP?REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP[Xe]:Xe,config:{}};return deserializeRegularizer(Ye)}else return Xe instanceof Regularizer?Xe:deserializeRegularizer(Xe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ReLU extends Layer{constructor(Ke){super(Ke??{}),this.supportsMasking=!0,Ke!=null&&(this.maxValue=Ke.maxValue)}call(Ke,Ye){Ke=getExactlyOneTensor(Ke);let Je=relu$2(Ke);return this.maxValue!=null&&(Je=clipByValue$1(Je,0,this.maxValue)),Je}computeOutputShape(Ke){return Ke}getConfig(){const Ke={maxValue:this.maxValue},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}ReLU.className="ReLU";registerClass(ReLU);class LeakyReLU extends Layer{constructor(Ke){super(Ke??{}),this.DEFAULT_ALPHA=.3,Ke==null&&(Ke={}),this.alpha=Ke.alpha==null?this.DEFAULT_ALPHA:Ke.alpha}call(Ke,Ye){const Je=getExactlyOneTensor(Ke);return leakyRelu$2(Je,this.alpha)}computeOutputShape(Ke){return Ke}getConfig(){const Ke={alpha:this.alpha},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}LeakyReLU.className="LeakyReLU";registerClass(LeakyReLU);class PReLU extends Layer{constructor(Ke){if(super(Ke??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",Ke==null&&(Ke={}),this.supportsMasking=!0,this.alphaInitializer=getInitializer(Ke.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=getRegularizer(Ke.alphaRegularizer),this.alphaConstraint=getConstraint(Ke.alphaConstraint),Ke.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(Ke.sharedAxes))this.sharedAxes=Ke.sharedAxes;else if(typeof Ke.sharedAxes=="number")this.sharedAxes=[Ke.sharedAxes];else throw new ValueError(`Expected sharedAxes to be a number or an array of numbers, but got ${Ke.sharedAxes}`)}build(Ke){Ke=getExactlyOneShape(Ke);const Ye=Ke.slice(1);if(this.sharedAxes!=null)for(const tt of this.sharedAxes)Ye[tt-1]=1;this.alpha=this.addWeight("alpha",Ye,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const Je={};if(this.sharedAxes!=null)for(let tt=1;tt<Ke.length;++tt)Je[tt]=Ke[tt];this.inputSpec=[new InputSpec({ndim:Ke.length,axes:Je})],this.built=!0}call(Ke,Ye){return Ke=getExactlyOneTensor(Ke),prelu$2(Ke,this.alpha.read())}getConfig(){const Ke={alphaInitializer:serializeInitializer(this.alphaInitializer),alphaRegularizer:serializeRegularizer(this.alphaRegularizer),alphaConstraint:serializeConstraint(this.alphaConstraint),sharedAxes:this.sharedAxes},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}PReLU.className="PReLU";registerClass(PReLU);let ELU$3=class extends Layer{constructor(Ke){if(super(Ke??{}),this.DEFAULT_ALPHA=1,Ke==null&&(Ke={}),Ke.alpha!=null&&Ke.alpha!==this.DEFAULT_ALPHA)throw new NotImplementedError(`Non-default alpha value (${Ke.alpha}) is not supported by the ELU layer yet.`);this.alpha=Ke.alpha==null?this.DEFAULT_ALPHA:Ke.alpha}call(Ke,Ye){const Je=getExactlyOneTensor(Ke);return elu$3(Je)}computeOutputShape(Ke){return Ke}getConfig(){const Ke={alpha:this.alpha},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}};ELU$3.className="ELU";registerClass(ELU$3);class ThresholdedReLU extends Layer{constructor(Ke){super(Ke??{}),this.DEFAULT_THETA=1,Ke==null&&(Ke={}),this.theta=Ke.theta==null?this.DEFAULT_THETA:Ke.theta}call(Ke,Ye){const Je=getExactlyOneTensor(Ke);return Je.mul(cast$2(Je.greater(this.theta),"float32"))}computeOutputShape(Ke){return Ke}getConfig(){const Ke={theta:this.theta},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}ThresholdedReLU.className="ThresholdedReLU";registerClass(ThresholdedReLU);class Softmax extends Layer{constructor(Ke){super(Ke??{}),this.DEFAULT_AXIS=1,Ke==null&&(Ke={}),this.softmax=new Softmax$1().apply,this.axis=Ke.axis==null?this.DEFAULT_AXIS:Ke.axis}call(Ke,Ye){const Je=getExactlyOneTensor(Ke);return this.softmax(Je,this.axis)}computeOutputShape(Ke){return Ke}getConfig(){const Ke={axis:this.axis},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}Softmax.className="Softmax";registerClass(Softmax);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function normalizeArray(Xe,Ke,Ye){if(typeof Xe=="number")return pyListRepeat(Xe,Ke);if(Xe.length!==Ke)throw new ValueError(`The ${Ye} argument must be an integer or tuple of ${Ke} integers. Received: ${Xe.length} elements.`);for(let Je=0;Je<Ke;++Je){const tt=Xe[Je];if(!isInteger(tt))throw new ValueError(`The ${Ye} argument must be an integer or tuple of ${Ke} integers. Received: ${JSON.stringify(Xe)} including a non-integer number ${tt}`)}return Xe}function convOutputLength(Xe,Ke,Ye,Je,tt=1){if(Xe==null)return Xe;const st=Ke+(Ke-1)*(tt-1);let rt;return Ye==="same"?rt=Xe:rt=Xe-st+1,Math.floor((rt+Je-1)/Je)}function deconvLength(Xe,Ke,Ye,Je){if(Xe==null)return null;if(Je==="valid")Xe=Xe*Ke+max$3([Ye-Ke,0]);else if(Je==="same")Xe=Xe*Ke;else throw new ValueError(`Unsupport padding mode: ${Je}.`);return Xe}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function preprocessConv2DInput(Xe,Ke){return tidy(()=>(checkDataFormat(Ke),Ke==="channelsFirst"?transpose$2(Xe,[0,2,3,1]):Xe))}function preprocessConv3DInput(Xe,Ke){return tidy(()=>(checkDataFormat(Ke),Ke==="channelsFirst"?transpose$2(Xe,[0,2,3,4,1]):Xe))}function conv1dWithBias(Xe,Ke,Ye,Je=1,tt="valid",st,rt=1){return tidy(()=>{if(st==null&&(st=imageDataFormat()),checkDataFormat(st),Xe.shape.length!==3)throw new ValueError(`The input of a conv1dWithBias operation should be 3, but is ${Xe.shape.length} instead.`);if(Ke.shape.length!==3)throw new ValueError(`The kernel for a conv1dWithBias operation should be 3, but is ${Ke.shape.length} instead`);if(Ye!=null&&Ye.shape.length!==1)throw new ValueError(`The bias for a conv1dWithBias operation should be 1, but is ${Ke.shape.length} instead`);if(st==="channelsFirst"&&(Xe=transpose$2(Xe,[0,2,1])),tt==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let it=conv1d(Xe,Ke,Je,tt==="same"?"same":"valid","NWC",rt);return Ye!=null&&(it=biasAdd(it,Ye)),it})}function conv2dWithBiasActivation(Xe,Ke,Ye,Je=[1,1],tt="valid",st,rt,it=null){return tidy(()=>{if(st==null&&(st=imageDataFormat()),checkDataFormat(st),Xe.rank!==3&&Xe.rank!==4)throw new ValueError(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${Xe.rank}.`);if(Ke.rank!==3&&Ke.rank!==4)throw new ValueError(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${Xe.rank}.`);let ot=preprocessConv2DInput(Xe,st);if(tt==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return ot=conv2d$1({x:ot,filter:Ke,strides:Je,pad:tt==="same"?"same":"valid",dilations:rt,dataFormat:"NHWC",bias:Ye,activation:it}),st==="channelsFirst"&&(ot=transpose$2(ot,[0,3,1,2])),ot})}function conv3dWithBias(Xe,Ke,Ye,Je=[1,1,1],tt="valid",st,rt){return tidy(()=>{if(st==null&&(st=imageDataFormat()),checkDataFormat(st),Xe.rank!==4&&Xe.rank!==5)throw new ValueError(`conv3dWithBias expects input to be of rank 4 or 5, but received ${Xe.rank}.`);if(Ke.rank!==4&&Ke.rank!==5)throw new ValueError(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${Xe.rank}.`);let it=preprocessConv3DInput(Xe,st);if(tt==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return it=conv3d(it,Ke,Je,tt==="same"?"same":"valid","NDHWC",rt),Ye!=null&&(it=biasAdd(it,Ye)),st==="channelsFirst"&&(it=transpose$2(it,[0,4,1,2,3])),it})}class BaseConv extends Layer{constructor(Ke,Ye){if(super(Ye),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",BaseConv.verifyArgs(Ye),this.rank=Ke,assertPositiveInteger(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new NotImplementedError(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=normalizeArray(Ye.kernelSize,Ke,"kernelSize"),this.strides=normalizeArray(Ye.strides==null?1:Ye.strides,Ke,"strides"),this.padding=Ye.padding==null?"valid":Ye.padding,checkPaddingMode(this.padding),this.dataFormat=Ye.dataFormat==null?"channelsLast":Ye.dataFormat,checkDataFormat(this.dataFormat),this.activation=getActivation(Ye.activation),this.useBias=Ye.useBias==null?!0:Ye.useBias,this.biasInitializer=getInitializer(Ye.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=getConstraint(Ye.biasConstraint),this.biasRegularizer=getRegularizer(Ye.biasRegularizer),this.activityRegularizer=getRegularizer(Ye.activityRegularizer),this.dilationRate=normalizeArray(Ye.dilationRate==null?1:Ye.dilationRate,Ke,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ValueError(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ValueError(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ValueError(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(Ke){if(assert$1("kernelSize"in Ke,"required key 'kernelSize' not in config"),typeof Ke.kernelSize!="number"&&!checkArrayTypeAndLength(Ke.kernelSize,"number",1,3))throw new ValueError(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(Ke.kernelSize)}.`)}getConfig(){const Ke={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:serializeActivation(this.activation),useBias:this.useBias,biasInitializer:serializeInitializer(this.biasInitializer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),biasConstraint:serializeConstraint(this.biasConstraint)},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}class Conv extends BaseConv{constructor(Ke,Ye){super(Ke,Ye),this.kernel=null,Conv.verifyArgs(Ye),this.filters=Ye.filters,assertPositiveInteger(this.filters,"filters"),this.kernelInitializer=getInitializer(Ye.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=getConstraint(Ye.kernelConstraint),this.kernelRegularizer=getRegularizer(Ye.kernelRegularizer)}build(Ke){Ke=getExactlyOneShape(Ke);const Ye=this.dataFormat==="channelsFirst"?1:Ke.length-1;if(Ke[Ye]==null)throw new ValueError(`The channel dimension of the input should be defined. Found ${Ke[Ye]}`);const Je=Ke[Ye],tt=this.kernelSize.concat([Je,this.filters]);this.kernel=this.addWeight("kernel",tt,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[Ye]:Je}}],this.built=!0}call(Ke,Ye){return tidy(()=>{Ke=getExactlyOneTensor(Ke);let Je;const tt=this.bias==null?null:this.bias.read(),st=mapActivationToFusedKernel(this.activation.getClassName());if(st!=null&&this.rank===2)Je=conv2dWithBiasActivation(Ke,this.kernel.read(),tt,this.strides,this.padding,this.dataFormat,this.dilationRate,st);else{if(this.rank===1)Je=conv1dWithBias(Ke,this.kernel.read(),tt,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)Je=conv2dWithBiasActivation(Ke,this.kernel.read(),tt,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)Je=conv3dWithBias(Ke,this.kernel.read(),tt,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new NotImplementedError("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(Je=this.activation.apply(Je))}return Je})}computeOutputShape(Ke){Ke=getExactlyOneShape(Ke);const Ye=[],Je=this.dataFormat==="channelsLast"?Ke.slice(1,Ke.length-1):Ke.slice(2);for(let st=0;st<Je.length;++st){const rt=convOutputLength(Je[st],this.kernelSize[st],this.padding,this.strides[st],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[st]);Ye.push(rt)}let tt=[Ke[0]];return this.dataFormat==="channelsLast"?(tt=tt.concat(Ye),tt.push(this.filters)):(tt.push(this.filters),tt=tt.concat(Ye)),tt}getConfig(){const Ke={filters:this.filters,kernelInitializer:serializeInitializer(this.kernelInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint)},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}static verifyArgs(Ke){if(!("filters"in Ke)||typeof Ke.filters!="number"||Ke.filters<1)throw new ValueError(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(Ke.filters)}`)}}class Conv2D extends Conv{constructor(Ke){super(2,Ke),Conv2D.verifyArgs(Ke)}getConfig(){const Ke=super.getConfig();return delete Ke.rank,Ke}static verifyArgs(Ke){if(typeof Ke.kernelSize!="number"&&!checkArrayTypeAndLength(Ke.kernelSize,"number",1,2))throw new ValueError(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(Ke.kernelSize)}.`)}}Conv2D.className="Conv2D";registerClass(Conv2D);class Conv3D extends Conv{constructor(Ke){super(3,Ke),Conv3D.verifyArgs(Ke)}getConfig(){const Ke=super.getConfig();return delete Ke.rank,Ke}static verifyArgs(Ke){if(typeof Ke.kernelSize!="number"&&!(Array.isArray(Ke.kernelSize)&&(Ke.kernelSize.length===1||Ke.kernelSize.length===3)))throw new ValueError(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(Ke.kernelSize)}.`)}}Conv3D.className="Conv3D";registerClass(Conv3D);class Conv2DTranspose extends Conv2D{constructor(Ke){if(super(Ke),this.inputSpec=[new InputSpec({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ValueError(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(Ke){if(Ke=getExactlyOneShape(Ke),Ke.length!==4)throw new ValueError("Input should have rank 4; Received input shape: "+JSON.stringify(Ke));const Ye=this.dataFormat==="channelsFirst"?1:Ke.length-1;if(Ke[Ye]==null)throw new ValueError("The channel dimension of the inputs should be defined. Found `None`.");const Je=Ke[Ye],tt=this.kernelSize.concat([this.filters,Je]);this.kernel=this.addWeight("kernel",tt,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new InputSpec({ndim:4,axes:{[Ye]:Je}})],this.built=!0}call(Ke,Ye){return tidy(()=>{let Je=getExactlyOneTensor(Ke);if(Je.shape.length!==4)throw new ValueError(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${Je.shape.length}`);const tt=Je.shape,st=tt[0];let rt,it;this.dataFormat==="channelsFirst"?(rt=2,it=3):(rt=1,it=2);const ot=tt[rt],at=tt[it],lt=this.kernelSize[0],ut=this.kernelSize[1],ht=this.strides[0],pt=this.strides[1],ft=deconvLength(ot,ht,lt,this.padding),xt=deconvLength(at,pt,ut,this.padding),vt=[st,ft,xt,this.filters];this.dataFormat!=="channelsLast"&&(Je=transpose$2(Je,[0,2,3,1]));let At=conv2dTranspose(Je,this.kernel.read(),vt,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(At=transpose$2(At,[0,3,1,2])),this.bias!=null&&(At=biasAdd(At,this.bias.read(),this.dataFormat)),this.activation!=null&&(At=this.activation.apply(At)),At})}computeOutputShape(Ke){Ke=getExactlyOneShape(Ke);const Ye=Ke.slice();let Je,tt,st;this.dataFormat==="channelsFirst"?(Je=1,tt=2,st=3):(Je=3,tt=1,st=2);const rt=this.kernelSize[0],it=this.kernelSize[1],ot=this.strides[0],at=this.strides[1];return Ye[Je]=this.filters,Ye[tt]=deconvLength(Ye[tt],ot,rt,this.padding),Ye[st]=deconvLength(Ye[st],at,it,this.padding),Ye}getConfig(){const Ke=super.getConfig();return delete Ke.dilationRate,Ke}}Conv2DTranspose.className="Conv2DTranspose";registerClass(Conv2DTranspose);class SeparableConv extends Conv{constructor(Ke,Ye){if(super(Ke,Ye),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,Ye.filters==null)throw new ValueError("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(Ye.kernelInitializer!=null||Ye.kernelRegularizer!=null||Ye.kernelConstraint!=null)throw new ValueError("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(Ye.padding!=null&&Ye.padding!=="same"&&Ye.padding!=="valid")throw new ValueError(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(Ye.padding)}`);this.depthMultiplier=Ye.depthMultiplier==null?1:Ye.depthMultiplier,this.depthwiseInitializer=getInitializer(Ye.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=getRegularizer(Ye.depthwiseRegularizer),this.depthwiseConstraint=getConstraint(Ye.depthwiseConstraint),this.pointwiseInitializer=getInitializer(Ye.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=getRegularizer(Ye.pointwiseRegularizer),this.pointwiseConstraint=getConstraint(Ye.pointwiseConstraint)}build(Ke){if(Ke=getExactlyOneShape(Ke),Ke.length<this.rank+2)throw new ValueError(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(Ke)}`);const Ye=this.dataFormat==="channelsFirst"?1:Ke.length-1;if(Ke[Ye]==null||Ke[Ye]<0)throw new ValueError(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(Ke[Ye])}`);const Je=Ke[Ye],tt=this.kernelSize.concat([Je,this.depthMultiplier]),st=[];for(let it=0;it<this.rank;++it)st.push(1);st.push(Je*this.depthMultiplier,this.filters);const rt=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",tt,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,rt,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",st,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,rt,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,rt,this.biasConstraint):this.bias=null,this.inputSpec=[new InputSpec({ndim:this.rank+2,axes:{[Ye]:Je}})],this.built=!0}call(Ke,Ye){return tidy(()=>{Ke=getExactlyOneTensor(Ke);let Je;if(this.rank===1)throw new NotImplementedError("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(Ke=transpose$2(Ke,[0,2,3,1])),Je=separableConv2d(Ke,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(Je=biasAdd(Je,this.bias.read(),this.dataFormat)),this.activation!=null&&(Je=this.activation.apply(Je)),this.dataFormat==="channelsFirst"&&(Je=transpose$2(Je,[0,3,1,2])),Je})}getConfig(){const Ke=super.getConfig();return delete Ke.rank,delete Ke.kernelInitializer,delete Ke.kernelRegularizer,delete Ke.kernelConstraint,Ke.depthwiseInitializer=serializeInitializer(this.depthwiseInitializer),Ke.pointwiseInitializer=serializeInitializer(this.pointwiseInitializer),Ke.depthwiseRegularizer=serializeRegularizer(this.depthwiseRegularizer),Ke.pointwiseRegularizer=serializeRegularizer(this.pointwiseRegularizer),Ke.depthwiseConstraint=serializeConstraint(this.depthwiseConstraint),Ke.pointwiseConstraint=serializeConstraint(this.pointwiseConstraint),Ke}}SeparableConv.className="SeparableConv";class SeparableConv2D extends SeparableConv{constructor(Ke){super(2,Ke)}}SeparableConv2D.className="SeparableConv2D";registerClass(SeparableConv2D);class Conv1D extends Conv{constructor(Ke){super(1,Ke),Conv1D.verifyArgs(Ke),this.inputSpec=[{ndim:3}]}getConfig(){const Ke=super.getConfig();return delete Ke.rank,delete Ke.dataFormat,Ke}static verifyArgs(Ke){if(typeof Ke.kernelSize!="number"&&!checkArrayTypeAndLength(Ke.kernelSize,"number",1,1))throw new ValueError(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(Ke.kernelSize)}.`)}}Conv1D.className="Conv1D";registerClass(Conv1D);class Cropping2D extends Layer{constructor(Ke){super(Ke),typeof Ke.cropping=="number"?this.cropping=[[Ke.cropping,Ke.cropping],[Ke.cropping,Ke.cropping]]:typeof Ke.cropping[0]=="number"?this.cropping=[[Ke.cropping[0],Ke.cropping[0]],[Ke.cropping[1],Ke.cropping[1]]]:this.cropping=Ke.cropping,this.dataFormat=Ke.dataFormat===void 0?"channelsLast":Ke.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(Ke){return this.dataFormat==="channelsFirst"?[Ke[0],Ke[1],Ke[2]-this.cropping[0][0]-this.cropping[0][1],Ke[3]-this.cropping[1][0]-this.cropping[1][1]]:[Ke[0],Ke[1]-this.cropping[0][0]-this.cropping[0][1],Ke[2]-this.cropping[1][0]-this.cropping[1][1],Ke[3]]}call(Ke,Ye){return tidy(()=>{if(Ke=getExactlyOneTensor(Ke),this.dataFormat==="channelsLast"){const Je=sliceAlongAxis(Ke,this.cropping[0][0],Ke.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return sliceAlongAxis(Je,this.cropping[1][0],Ke.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const Je=sliceAlongAxis(Ke,this.cropping[0][0],Ke.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return sliceAlongAxis(Je,this.cropping[1][0],Ke.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const Ke={cropping:this.cropping,dataFormat:this.dataFormat},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}Cropping2D.className="Cropping2D";registerClass(Cropping2D);class UpSampling2D extends Layer{constructor(Ke){super(Ke),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=Ke.size==null?this.DEFAULT_SIZE:Ke.size,this.dataFormat=Ke.dataFormat==null?"channelsLast":Ke.dataFormat,checkDataFormat(this.dataFormat),this.interpolation=Ke.interpolation==null?"nearest":Ke.interpolation,checkInterpolationFormat(this.interpolation)}computeOutputShape(Ke){if(this.dataFormat==="channelsFirst"){const Ye=Ke[2]==null?null:this.size[0]*Ke[2],Je=Ke[3]==null?null:this.size[1]*Ke[3];return[Ke[0],Ke[1],Ye,Je]}else{const Ye=Ke[1]==null?null:this.size[0]*Ke[1],Je=Ke[2]==null?null:this.size[1]*Ke[2];return[Ke[0],Ye,Je,Ke[3]]}}call(Ke,Ye){return tidy(()=>{let Je=getExactlyOneTensor(Ke);const tt=Je.shape;if(this.dataFormat==="channelsFirst"){Je=transpose$2(Je,[0,2,3,1]);const st=this.size[0]*tt[2],rt=this.size[1]*tt[3],it=this.interpolation==="nearest"?Je.resizeNearestNeighbor([st,rt]):Je.resizeBilinear([st,rt]);return transpose$2(it,[0,3,1,2])}else{const st=this.size[0]*tt[1],rt=this.size[1]*tt[2];return this.interpolation==="nearest"?Je.resizeNearestNeighbor([st,rt]):Je.resizeBilinear([st,rt])}})}getConfig(){const Ke={size:this.size,dataFormat:this.dataFormat},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}UpSampling2D.className="UpSampling2D";registerClass(UpSampling2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function depthwiseConv2d(Xe,Ke,Ye=[1,1],Je="valid",tt,st){return tidy(()=>{tt==null&&(tt=imageDataFormat()),checkDataFormat(tt);let rt=preprocessConv2DInput(Xe,tt);if(Xe.rank!==4)throw new ValueError(`Input for depthwiseConv2d is required to be 4-D, but is instead ${Xe.rank}-D`);if(Ke.rank!==4)throw new ValueError(`depthwiseKernel is required to be 4-D, but is instead ${Ke.rank}-D`);return rt=depthwiseConv2d$1(rt,Ke,Ye,Je==="same"?"same":"valid","NHWC",st),tt==="channelsFirst"&&(rt=transpose$2(rt,[0,3,1,2])),rt})}class DepthwiseConv2D extends BaseConv{constructor(Ke){super(2,Ke),this.depthwiseKernel=null,this.depthMultiplier=Ke.depthMultiplier==null?1:Ke.depthMultiplier,this.depthwiseInitializer=getInitializer(Ke.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=getConstraint(Ke.depthwiseConstraint),this.depthwiseRegularizer=getRegularizer(Ke.depthwiseRegularizer)}build(Ke){if(Ke=getExactlyOneShape(Ke),Ke.length<4)throw new ValueError(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(Ke)}.`);const Ye=this.dataFormat==="channelsFirst"?1:3;if(Ke[Ye]==null||Ke[Ye]<0)throw new ValueError(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${Ke[Ye]}).`);const Je=Ke[Ye],tt=[this.kernelSize[0],this.kernelSize[1],Je,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",tt,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[Je*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(Ke,Ye){return tidy(()=>{Ke=getExactlyOneTensor(Ke);let Je=depthwiseConv2d(Ke,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(Je=biasAdd(Je,this.bias.read(),this.dataFormat)),this.activation!=null&&(Je=this.activation.apply(Je)),Je})}computeOutputShape(Ke){Ke=getExactlyOneShape(Ke);const Ye=this.dataFormat==="channelsFirst"?Ke[2]:Ke[1],Je=this.dataFormat==="channelsFirst"?Ke[3]:Ke[2],tt=this.dataFormat==="channelsFirst"?Ke[1]*this.depthMultiplier:Ke[3]*this.depthMultiplier,st=convOutputLength(Ye,this.kernelSize[0],this.padding,this.strides[0]),rt=convOutputLength(Je,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[Ke[0],tt,st,rt]:[Ke[0],st,rt,tt]}getConfig(){const Ke=super.getConfig();return Ke.depthMultiplier=this.depthMultiplier,Ke.depthwiseInitializer=serializeInitializer(this.depthwiseInitializer),Ke.depthwiseRegularizer=serializeRegularizer(this.depthwiseRegularizer),Ke.depthwiseConstraint=serializeConstraint(this.depthwiseRegularizer),Ke}}DepthwiseConv2D.className="DepthwiseConv2D";registerClass(DepthwiseConv2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function standardizeArgs(Xe,Ke,Ye,Je){if(Array.isArray(Xe)){if(Ke!=null||Ye!=null)throw new ValueError("When inputs is an array, neither initialState or constants should be provided");Je!=null&&(Ye=Xe.slice(Xe.length-Je,Xe.length),Xe=Xe.slice(0,Xe.length-Je)),Xe.length>1&&(Ke=Xe.slice(1,Xe.length)),Xe=Xe[0]}function tt(st){return st==null||Array.isArray(st)?st:[st]}return Ke=tt(Ke),Ye=tt(Ye),{inputs:Xe,initialState:Ke,constants:Ye}}function rnn(Xe,Ke,Ye,Je=!1,tt,st,rt=!1,it=!1){return tidy(()=>{const ot=Ke.shape.length;if(ot<3)throw new ValueError(`Input should be at least 3D, but is ${ot}D.`);const at=[1,0].concat(range$3(2,ot));Ke=transpose$2(Ke,at),rt&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),tt!=null&&(tt=tt.asType("bool").asType("float32"),tt.rank===ot-1&&(tt=expandDims$3(tt,-1)),tt=transpose$2(tt,at)),Je&&(Ke=reverse$2(Ke,0),tt!=null&&(tt=reverse$2(tt,0)));const lt=[];let ut,ht=Ye;const pt=Ke.shape[0],ft=unstack(Ke);let xt;tt!=null&&(xt=unstack(tt));for(let At=0;At<pt;++At){const Et=ft[At],wt=tidy(()=>Xe(Et,ht));if(tt==null)ut=wt[0],ht=wt[1];else{const _t=tidy(()=>{const Ct=xt[At],Tt=onesLike$2(Ct).sub(Ct),St=wt[0].mul(Ct).add(ht[0].mul(Tt)),Rt=ht.map((Nt,Pt)=>wt[1][Pt].mul(Ct).add(Nt.mul(Tt)));return{output:St,newStates:Rt}});ut=_t.output,ht=_t.newStates}it&&lt.push(ut)}let vt;return it&&(vt=stack$1(lt,1)),[ut,vt,ht]})}class RNN extends Layer{constructor(Ke){super(Ke);let Ye;if(Ke.cell==null)throw new ValueError("cell property is missing for the constructor of RNN.");if(Array.isArray(Ke.cell)?Ye=new StackedRNNCells({cells:Ke.cell}):Ye=Ke.cell,Ye.stateSize==null)throw new ValueError("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=Ye,this.returnSequences=Ke.returnSequences==null?!1:Ke.returnSequences,this.returnState=Ke.returnState==null?!1:Ke.returnState,this.goBackwards=Ke.goBackwards==null?!1:Ke.goBackwards,this._stateful=Ke.stateful==null?!1:Ke.stateful,this.unroll=Ke.unroll==null?!1:Ke.unroll,this.supportsMasking=!0,this.inputSpec=[new InputSpec({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const Ke=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return range$3(0,Ke).map(Ye=>null)}else return this.states_}setStates(Ke){this.states_=Ke}computeOutputShape(Ke){isArrayOfShapes(Ke)&&(Ke=Ke[0]),Ke=Ke;let Ye=this.cell.stateSize;Array.isArray(Ye)||(Ye=[Ye]);const Je=Ye[0];let tt;if(this.returnSequences?tt=[Ke[0],Ke[1],Je]:tt=[Ke[0],Je],this.returnState){const st=[];for(const rt of Ye)st.push([Ke[0],rt]);return[tt].concat(st)}else return tt}computeMask(Ke,Ye){return tidy(()=>{Array.isArray(Ye)&&(Ye=Ye[0]);const Je=this.returnSequences?Ye:null;if(this.returnState){const tt=this.states.map(st=>null);return[Je].concat(tt)}else return Je})}get states(){if(this.states_==null){const Ke=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,Ye=[];for(let Je=0;Je<Ke;++Je)Ye.push(null);return Ye}else return this.states_}set states(Ke){this.states_=Ke}build(Ke){if(this.numConstants!=null)throw new NotImplementedError("Constants support is not implemented in RNN yet.");isArrayOfShapes(Ke)&&(Ke=Ke[0]),Ke=Ke;const Ye=this.stateful?Ke[0]:null,Je=Ke.slice(2);this.inputSpec[0]=new InputSpec({shape:[Ye,null,...Je]});const tt=[Ke[0]].concat(Ke.slice(2));this.cell.build(tt);let st;if(Array.isArray(this.cell.stateSize)?st=this.cell.stateSize:st=[this.cell.stateSize],this.stateSpec!=null){if(!arraysEqual(this.stateSpec.map(rt=>rt.shape[rt.shape.length-1]),st))throw new ValueError(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=st.map(rt=>new InputSpec({shape:[null,rt]}));this.stateful&&this.resetStates()}resetStates(Ke,Ye=!1){tidy(()=>{if(!this.stateful)throw new AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");const Je=this.inputSpec[0].shape[0];if(Je==null)throw new ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(tt=>zeros$1([Je,tt])):this.states_=[zeros$1([Je,this.cell.stateSize])];else if(Ke==null)dispose(this.states_),this.keptStates!=null&&(dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(tt=>zeros$1([Je,tt])):this.states_[0]=zeros$1([Je,this.cell.stateSize]);else{if(Array.isArray(Ke)||(Ke=[Ke]),Ke.length!==this.states_.length)throw new ValueError(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${Ke.length} state value(s). Input received: ${Ke}`);Ye===!0?this.keptStates.push(this.states_.slice()):dispose(this.states_);for(let tt=0;tt<this.states_.length;++tt){const st=Ke[tt],rt=Array.isArray(this.cell.stateSize)?this.cell.stateSize[tt]:this.cell.stateSize,it=[Je,rt];if(!arraysEqual(st.shape,it))throw new ValueError(`State ${tt} is incompatible with layer ${this.name}: expected shape=${it}, received shape=${st.shape}`);this.states_[tt]=st}}this.states_=this.states_.map(tt=>keep(tt.clone()))})}apply(Ke,Ye){let Je=Ye==null?null:Ye.initialState,tt=Ye==null?null:Ye.constants;Ye==null&&(Ye={});const st=standardizeArgs(Ke,Je,tt,this.numConstants);Ke=st.inputs,Je=st.initialState,tt=st.constants;let rt=[],it=[];if(Je!=null){Ye.initialState=Je,rt=rt.concat(Je),this.stateSpec=[];for(const at of Je)this.stateSpec.push(new InputSpec({shape:at.shape}));it=it.concat(this.stateSpec)}if(tt!=null&&(Ye.constants=tt,rt=rt.concat(tt),this.numConstants=tt.length),rt[0]instanceof SymbolicTensor){const at=[Ke].concat(rt),lt=this.inputSpec.concat(it),ut=this.inputSpec;this.inputSpec=lt;const ht=super.apply(at,Ye);return this.inputSpec=ut,ht}else return super.apply(Ke,Ye)}call(Ke,Ye){return tidy(()=>{const Je=Ye==null?null:Ye.mask,tt=Ye==null?null:Ye.training;let st=Ye==null?null:Ye.initialState;Ke=getExactlyOneTensor(Ke),st==null&&(this.stateful?st=this.states_:st=this.getInitialState(Ke));const rt=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(st.length!==rt)throw new ValueError(`RNN Layer has ${rt} state(s) but was passed ${st.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const it={training:tt},at=rnn((ft,xt)=>{const vt=this.cell.call([ft].concat(xt),it);return[vt[0],vt.slice(1)]},Ke,st,this.goBackwards,Je,null,this.unroll,this.returnSequences),lt=at[0],ut=at[1],ht=at[2];this.stateful&&this.resetStates(ht,tt);const pt=this.returnSequences?ut:lt;return this.returnState?[pt].concat(ht):pt})}getInitialState(Ke){return tidy(()=>{let Ye=zeros$1(Ke.shape);return Ye=sum$2(Ye,[1,2]),Ye=expandDims$2(Ye),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(Je=>Je>1?tile$2(Ye,[1,Je]):Ye):this.cell.stateSize>1?[tile$2(Ye,[1,this.cell.stateSize])]:[Ye]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(Ke){super.setFastWeightInitDuringBuild(Ke),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(Ke)}getConfig(){const Ke=super.getConfig(),Ye={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(Ye.numConstants=this.numConstants);const Je=this.cell.getConfig();return this.getClassName()===RNN.className&&(Ye.cell={className:this.cell.getClassName(),config:Je}),Object.assign({},Je,Ke,Ye)}static fromConfig(Ke,Ye,Je={}){const tt=Ye.cell,st=deserialize(tt,Je);return new Ke(Object.assign(Ye,{cell:st}))}}RNN.className="RNN";registerClass(RNN);class RNNCell extends Layer{}class SimpleRNNCell extends RNNCell{constructor(Ke){super(Ke),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=Ke.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation(Ke.activation==null?this.DEFAULT_ACTIVATION:Ke.activation),this.useBias=Ke.useBias==null?!0:Ke.useBias,this.kernelInitializer=getInitializer(Ke.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=getInitializer(Ke.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=getInitializer(Ke.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=getRegularizer(Ke.kernelRegularizer),this.recurrentRegularizer=getRegularizer(Ke.recurrentRegularizer),this.biasRegularizer=getRegularizer(Ke.biasRegularizer),this.kernelConstraint=getConstraint(Ke.kernelConstraint),this.recurrentConstraint=getConstraint(Ke.recurrentConstraint),this.biasConstraint=getConstraint(Ke.biasConstraint),this.dropout=min$3([1,max$3([0,Ke.dropout==null?0:Ke.dropout])]),this.recurrentDropout=min$3([1,max$3([0,Ke.recurrentDropout==null?0:Ke.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(Ke){Ke=getExactlyOneShape(Ke),this.kernel=this.addWeight("kernel",[Ke[Ke.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(Ke,Ye){return tidy(()=>{if(Ke=Ke,Ke.length!==2)throw new ValueError(`SimpleRNNCell expects 2 input Tensors, got ${Ke.length}.`);let Je=Ke[1];Ke=Ke[0];const tt=Ye.training==null?!1:Ye.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2(Ke),rate:this.dropout,training:tt})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(Je),rate:this.recurrentDropout,training:tt}));let st;const rt=this.dropoutMask,it=this.recurrentDropoutMask;rt!=null?st=dot(mul(Ke,rt),this.kernel.read()):st=dot(Ke,this.kernel.read()),this.bias!=null&&(st=biasAdd(st,this.bias.read())),it!=null&&(Je=mul(Je,it));let ot=add$1(st,dot(Je,this.recurrentKernel.read()));return this.activation!=null&&(ot=this.activation.apply(ot)),[ot,ot]})}getConfig(){const Ke=super.getConfig(),Ye={units:this.units,activation:serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},Ke,Ye)}}SimpleRNNCell.className="SimpleRNNCell";registerClass(SimpleRNNCell);class SimpleRNN extends RNN{constructor(Ke){Ke.cell=new SimpleRNNCell(Ke),super(Ke)}call(Ke,Ye){return tidy(()=>{this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const Je=Ye==null?null:Ye.mask,tt=Ye==null?null:Ye.training,st=Ye==null?null:Ye.initialState;return super.call(Ke,{mask:Je,training:tt,initialState:st})})}static fromConfig(Ke,Ye){return new Ke(Ye)}}SimpleRNN.className="SimpleRNN";registerClass(SimpleRNN);class GRUCell extends RNNCell{constructor(Ke){if(super(Ke),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",Ke.resetAfter)throw new ValueError("GRUCell does not support reset_after parameter set to true.");this.units=Ke.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation(Ke.activation===void 0?this.DEFAULT_ACTIVATION:Ke.activation),this.recurrentActivation=getActivation(Ke.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:Ke.recurrentActivation),this.useBias=Ke.useBias==null?!0:Ke.useBias,this.kernelInitializer=getInitializer(Ke.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=getInitializer(Ke.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=getInitializer(Ke.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=getRegularizer(Ke.kernelRegularizer),this.recurrentRegularizer=getRegularizer(Ke.recurrentRegularizer),this.biasRegularizer=getRegularizer(Ke.biasRegularizer),this.kernelConstraint=getConstraint(Ke.kernelConstraint),this.recurrentConstraint=getConstraint(Ke.recurrentConstraint),this.biasConstraint=getConstraint(Ke.biasConstraint),this.dropout=min$3([1,max$3([0,Ke.dropout==null?0:Ke.dropout])]),this.recurrentDropout=min$3([1,max$3([0,Ke.recurrentDropout==null?0:Ke.recurrentDropout])]),this.implementation=Ke.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(Ke){Ke=getExactlyOneShape(Ke);const Ye=Ke[Ke.length-1];this.kernel=this.addWeight("kernel",[Ye,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(Ke,Ye){return tidy(()=>{if(Ke=Ke,Ke.length!==2)throw new ValueError(`GRUCell expects 2 input Tensors (inputs, h, c), got ${Ke.length}.`);const Je=Ye.training==null?!1:Ye.training;let tt=Ke[1];Ke=Ke[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2(Ke),rate:this.dropout,training:Je,count:3})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(tt),rate:this.recurrentDropout,training:Je,count:3}));const st=this.dropoutMask,rt=this.recurrentDropoutMask;let it,ot,at;0<this.dropout&&this.dropout<1&&(Ke=mul(Ke,st[0]));let lt=dot(Ke,this.kernel.read());this.useBias&&(lt=biasAdd(lt,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(tt=mul(tt,rt[0]));const ut=this.recurrentKernel.read(),[ht,pt]=split(ut,[2*this.units,this.units],ut.rank-1),ft=dot(tt,ht),[xt,vt,At]=split(lt,3,lt.rank-1),[Et,wt]=split(ft,2,ft.rank-1);it=this.recurrentActivation.apply(add$1(xt,Et)),ot=this.recurrentActivation.apply(add$1(vt,wt));const _t=dot(mul(ot,tt),pt);at=this.activation.apply(add$1(At,_t));const Ct=add$1(mul(it,tt),mul(add$1(1,neg$2(it)),at));return[Ct,Ct]})}getConfig(){const Ke=super.getConfig(),Ye={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},Ke,Ye)}}GRUCell.className="GRUCell";registerClass(GRUCell);class GRU extends RNN{constructor(Ke){Ke.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),Ke.cell=new GRUCell(Ke),super(Ke)}call(Ke,Ye){return tidy(()=>{this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const Je=Ye==null?null:Ye.mask,tt=Ye==null?null:Ye.training,st=Ye==null?null:Ye.initialState;return super.call(Ke,{mask:Je,training:tt,initialState:st})})}static fromConfig(Ke,Ye){return Ye.implmentation===0&&(Ye.implementation=1),new Ke(Ye)}}GRU.className="GRU";registerClass(GRU);class LSTMCell extends RNNCell{constructor(Ke){super(Ke),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=Ke.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation(Ke.activation===void 0?this.DEFAULT_ACTIVATION:Ke.activation),this.recurrentActivation=getActivation(Ke.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:Ke.recurrentActivation),this.useBias=Ke.useBias==null?!0:Ke.useBias,this.kernelInitializer=getInitializer(Ke.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=getInitializer(Ke.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=getInitializer(Ke.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=Ke.unitForgetBias,this.kernelRegularizer=getRegularizer(Ke.kernelRegularizer),this.recurrentRegularizer=getRegularizer(Ke.recurrentRegularizer),this.biasRegularizer=getRegularizer(Ke.biasRegularizer),this.kernelConstraint=getConstraint(Ke.kernelConstraint),this.recurrentConstraint=getConstraint(Ke.recurrentConstraint),this.biasConstraint=getConstraint(Ke.biasConstraint),this.dropout=min$3([1,max$3([0,Ke.dropout==null?0:Ke.dropout])]),this.recurrentDropout=min$3([1,max$3([0,Ke.recurrentDropout==null?0:Ke.recurrentDropout])]),this.implementation=Ke.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(Ke){var Ye;Ke=getExactlyOneShape(Ke);const Je=Ke[Ke.length-1];this.kernel=this.addWeight("kernel",[Je,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let tt;if(this.useBias){if(this.unitForgetBias){const st=this.biasInitializer,rt=this.units;tt=new(Ye=class extends Initializer{apply(ot,at){const lt=st.apply([rt]),ut=new Ones().apply([rt]),ht=st.apply([rt*2]);return concatAlongFirstAxis(concatAlongFirstAxis(lt,ut),ht)}},Ye.className="CustomInit",Ye)}else tt=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,tt,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(Ke,Ye){return tidy(()=>{const Je=Ye.training==null?!1:Ye.training;if(Ke=Ke,Ke.length!==3)throw new ValueError(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${Ke.length}.`);let tt=Ke[1];const st=Ke[2];Ke=Ke[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2(Ke),rate:this.dropout,training:Je,count:4})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(tt),rate:this.recurrentDropout,training:Je,count:4}));const rt=this.dropoutMask,it=this.recurrentDropoutMask;let ot,at,lt,ut;0<this.dropout&&this.dropout<1&&(Ke=mul(Ke,rt[0]));let ht=dot(Ke,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(tt=mul(tt,it[0])),ht=add$1(ht,dot(tt,this.recurrentKernel.read())),this.useBias&&(ht=biasAdd(ht,this.bias.read()));const[pt,ft,xt,vt]=split(ht,4,ht.rank-1);ot=this.recurrentActivation.apply(pt),at=this.recurrentActivation.apply(ft),lt=add$1(mul(at,st),mul(ot,this.activation.apply(xt))),ut=this.recurrentActivation.apply(vt);const At=mul(ut,this.activation.apply(lt));return[At,At,lt]})}getConfig(){const Ke=super.getConfig(),Ye={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},Ke,Ye)}}LSTMCell.className="LSTMCell";registerClass(LSTMCell);class LSTM extends RNN{constructor(Ke){Ke.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),Ke.cell=new LSTMCell(Ke),super(Ke)}call(Ke,Ye){return tidy(()=>{this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const Je=Ye==null?null:Ye.mask,tt=Ye==null?null:Ye.training,st=Ye==null?null:Ye.initialState;return super.call(Ke,{mask:Je,training:tt,initialState:st})})}static fromConfig(Ke,Ye){return Ye.implmentation===0&&(Ye.implementation=1),new Ke(Ye)}}LSTM.className="LSTM";registerClass(LSTM);class StackedRNNCells extends RNNCell{constructor(Ke){super(Ke),this.cells=Ke.cells}get stateSize(){const Ke=[];for(const Ye of this.cells.slice().reverse())Array.isArray(Ye.stateSize)?Ke.push(...Ye.stateSize):Ke.push(Ye.stateSize);return Ke}call(Ke,Ye){return tidy(()=>{Ke=Ke;let Je=Ke.slice(1);const tt=[];for(const it of this.cells.slice().reverse())Array.isArray(it.stateSize)?tt.push(Je.splice(0,it.stateSize.length)):tt.push(Je.splice(0,1));tt.reverse();const st=[];let rt;for(let it=0;it<this.cells.length;++it){const ot=this.cells[it];Je=tt[it],it===0?rt=[Ke[0]].concat(Je):rt=[rt[0]].concat(Je),rt=ot.call(rt,Ye),st.push(rt.slice(1))}Je=[];for(const it of st.slice().reverse())Je.push(...it);return[rt[0]].concat(Je)})}build(Ke){isArrayOfShapes(Ke)&&(Ke=Ke[0]),Ke=Ke;let Ye;this.cells.forEach((Je,tt)=>{nameScope(`RNNCell_${tt}`,()=>{Je.build(Ke),Array.isArray(Je.stateSize)?Ye=Je.stateSize[0]:Ye=Je.stateSize,Ke=[Ke[0],Ye]})}),this.built=!0}getConfig(){const Ke=super.getConfig(),Ye=st=>({className:st.getClassName(),config:st.getConfig()}),tt={cells:this.cells.map(Ye)};return Object.assign({},Ke,tt)}static fromConfig(Ke,Ye,Je={}){const tt=[];for(const st of Ye.cells)tt.push(deserialize(st,Je));return new Ke({cells:tt})}get trainableWeights(){if(!this.trainable)return[];const Ke=[];for(const Ye of this.cells)Ke.push(...Ye.trainableWeights);return Ke}get nonTrainableWeights(){const Ke=[];for(const Ye of this.cells)Ke.push(...Ye.nonTrainableWeights);if(!this.trainable){const Ye=[];for(const Je of this.cells)Ye.push(...Je.trainableWeights);return Ye.concat(Ke)}return Ke}getWeights(){const Ke=[];for(const Ye of this.cells)Ke.push(...Ye.weights);return batchGetValue(Ke)}setWeights(Ke){const Ye=[];for(const Je of this.cells){const tt=Je.weights.length,st=Ke.splice(tt);for(let rt=0;rt<Je.weights.length;++rt)Ye.push([Je.weights[rt],st[rt]])}batchSetValue(Ye)}}StackedRNNCells.className="StackedRNNCells";registerClass(StackedRNNCells);function generateDropoutMask(Xe){const{ones:Ke,rate:Ye,training:Je=!1,count:tt=1}=Xe,st=()=>dropout(Ke(),Ye),rt=()=>inTrainPhase(st,Ke,Je);return!tt||tt<=1?keep(rt().clone()):Array(tt).fill(void 0).map(rt).map(ot=>keep(ot.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var __rest=function(Xe,Ke){var Ye={};for(var Je in Xe)Object.prototype.hasOwnProperty.call(Xe,Je)&&Ke.indexOf(Je)<0&&(Ye[Je]=Xe[Je]);if(Xe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tt=0,Je=Object.getOwnPropertySymbols(Xe);tt<Je.length;tt++)Ke.indexOf(Je[tt])<0&&Object.prototype.propertyIsEnumerable.call(Xe,Je[tt])&&(Ye[Je[tt]]=Xe[Je[tt]]);return Ye};class ConvRNN2D extends RNN{constructor(Ke){if(Ke.unroll)throw new NotImplementedError("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(Ke.cell))throw new NotImplementedError("It is not possible at the moment to stack convolutional cells.");super(Ke),this.inputSpec=[new InputSpec({ndim:5})]}call(Ke,Ye){return tidy(()=>{if(this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),Ye&&Ye.constants)throw new ValueError("ConvRNN2D cell does not support constants");const Je=Ye==null?null:Ye.mask,tt=Ye==null?null:Ye.training,st=Ye==null?null:Ye.initialState;return super.call(Ke,{mask:Je,training:tt,initialState:st})})}computeOutputShape(Ke){let Ye=this.computeSingleOutputShape(Ke);return this.returnSequences||(Ye=[Ye[0],...Ye.slice(2)]),this.returnState&&(Ye=[Ye,...Array(2).fill([Ke[0],...Ye.slice(-3)])]),Ye}getInitialState(Ke){return tidy(()=>{const{stateSize:Ye}=this.cell,Je=Ke.shape,tt=this.computeSingleOutputShape(Je),st=[tt[0],...tt.slice(2)],rt=zeros$1(st);return Array.isArray(Ye)?Array(Ye.length).fill(rt):[rt]})}resetStates(Ke,Ye=!1){tidy(()=>{if(!this.stateful)throw new AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");const Je=this.inputSpec[0].shape,tt=this.computeSingleOutputShape(Je),st=[tt[0],...tt.slice(2)];if(Je[0]==null)throw new ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>zeros$1(st)):this.states_=[zeros$1(st)];else if(Ke==null)dispose(this.states_),this.keptStates!=null&&(dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>zeros$1(st)):this.states_[0]=zeros$1(st);else{if(Array.isArray(Ke)||(Ke=[Ke]),Ke.length!==this.states_.length)throw new ValueError(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${Ke.length} state value(s). Input received: ${Ke}`);Ye?this.keptStates.push(this.states_.slice()):dispose(this.states_);for(let it=0;it<this.states_.length;++it){const ot=Ke[it],at=st;if(!arraysEqual(ot.shape,at))throw new ValueError(`State ${it} is incompatible with layer ${this.name}: expected shape=${at}, received shape=${ot.shape}`);this.states_[it]=ot}}this.states_=this.states_.map(it=>keep(it.clone()))})}computeSingleOutputShape(Ke){const{dataFormat:Ye,filters:Je,kernelSize:tt,padding:st,strides:rt,dilationRate:it}=this.cell,ot=Ye==="channelsFirst",at=Ke[ot?3:2],lt=Ke[ot?4:3],ut=convOutputLength(at,tt[0],st,rt[0],it[0]),ht=convOutputLength(lt,tt[1],st,rt[1],it[1]);return[...Ke.slice(0,2),...ot?[Je,ut,ht]:[ut,ht,Je]]}}ConvRNN2D.className="ConvRNN2D";class ConvLSTM2DCell extends LSTMCell{constructor(Ke){const{filters:Ye,kernelSize:Je,strides:tt,padding:st,dataFormat:rt,dilationRate:it}=Ke;super(Object.assign({},Ke,{units:Ye})),this.filters=Ye,assertPositiveInteger(this.filters,"filters"),this.kernelSize=normalizeArray(Je,2,"kernelSize"),this.kernelSize.forEach(ot=>assertPositiveInteger(ot,"kernelSize")),this.strides=normalizeArray(tt||1,2,"strides"),this.strides.forEach(ot=>assertPositiveInteger(ot,"strides")),this.padding=st||"valid",checkPaddingMode(this.padding),this.dataFormat=rt||"channelsLast",checkDataFormat(this.dataFormat),this.dilationRate=normalizeArray(it||1,2,"dilationRate"),this.dilationRate.forEach(ot=>assertPositiveInteger(ot,"dilationRate"))}build(Ke){var Ye;Ke=getExactlyOneShape(Ke);const Je=this.dataFormat==="channelsFirst"?1:Ke.length-1;if(Ke[Je]==null)throw new ValueError(`The channel dimension of the input should be defined. Found ${Ke[Je]}`);const tt=Ke[Je],st=4,rt=this.kernelSize.concat([tt,this.filters*st]);this.kernel=this.addWeight("kernel",rt,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const it=this.kernelSize.concat([this.filters,this.filters*st]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",it,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let ot;if(this.unitForgetBias){const at=this.biasInitializer,lt=this.filters;ot=new(Ye=class extends Initializer{apply(ht,pt){const ft=at.apply([lt]),xt=ones([lt]),vt=at.apply([lt*2]);return concatenate([ft,xt,vt])}},Ye.className="CustomInit",Ye)}else ot=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*st],null,ot,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(Ke,Ye){return tidy(()=>{if(Ke.length!==3)throw new ValueError(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${Ke.length}.`);const Je=Ye.training||!1,tt=Ke[0],st=Ke[1],rt=Ke[2],it=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2(tt),rate:this.dropout,training:Je,count:it}));const ot=this.dropoutMask,at=(Yt,Jt,Zt)=>!Jt||!Jt[Zt]?Yt:mul(Jt[Zt],Yt);let lt=at(tt,ot,0),ut=at(tt,ot,1),ht=at(tt,ot,2),pt=at(tt,ot,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(st),rate:this.recurrentDropout,training:Je,count:it}));const ft=this.recurrentDropoutMask;let xt=at(st,ft,0),vt=at(st,ft,1),At=at(st,ft,2),Et=at(st,ft,3);const wt=3,[_t,Ct,Tt,St]=split(this.kernel.read(),it,wt),[Rt,Nt,Pt,Bt]=this.useBias?split(this.bias.read(),it):[null,null,null,null];lt=this.inputConv(lt,_t,Rt,this.padding),ut=this.inputConv(ut,Ct,Nt,this.padding),ht=this.inputConv(ht,Tt,Pt,this.padding),pt=this.inputConv(pt,St,Bt,this.padding);const[Lt,zt,Dt,Vt]=split(this.recurrentKernel.read(),it,wt);xt=this.recurrentConv(xt,Lt),vt=this.recurrentConv(vt,zt),At=this.recurrentConv(At,Dt),Et=this.recurrentConv(Et,Vt);const Gt=this.recurrentActivation.apply(add$1(lt,xt)),Qt=this.recurrentActivation.apply(add$1(ut,vt)),jt=add$1(mul(Qt,rt),mul(Gt,this.activation.apply(add$1(ht,At)))),Ht=mul(this.recurrentActivation.apply(add$1(pt,Et)),this.activation.apply(jt));return[Ht,Ht,jt]})}getConfig(){const Ke=super.getConfig(),{units:Ye}=Ke,Je=__rest(Ke,["units"]),tt={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},Je,tt)}inputConv(Ke,Ye,Je,tt){const st=conv2d$2(Ke,Ye,this.strides,tt||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return Je?biasAdd(st,Je,this.dataFormat):st}recurrentConv(Ke,Ye){return conv2d$2(Ke,Ye,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}ConvLSTM2DCell.className="ConvLSTM2DCell";registerClass(ConvLSTM2DCell);class ConvLSTM2D extends ConvRNN2D{constructor(Ke){const Ye=new ConvLSTM2DCell(Ke);super(Object.assign({},Ke,{cell:Ye}))}static fromConfig(Ke,Ye){return new Ke(Ye)}}ConvLSTM2D.className="ConvLSTM2D";registerClass(ConvLSTM2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Dropout extends Layer{constructor(Ke){super(Ke),this.rate=Math.max(Math.min(Ke.rate,1),0),this.noiseShape=Ke.noiseShape,this.seed=Ke.seed,this.supportsMasking=!0}getNoiseShape(Ke){if(this.noiseShape==null)return this.noiseShape;const Ye=Ke.shape,Je=[];for(let tt=0;tt<this.noiseShape.length;++tt)Je.push(this.noiseShape[tt]==null?Ye[tt]:this.noiseShape[tt]);return Je}call(Ke,Ye){return tidy(()=>{this.invokeCallHook(Ke,Ye);const Je=getExactlyOneTensor(Ke);if(0<this.rate&&this.rate<1){const tt=Ye.training==null?!1:Ye.training,st=this.getNoiseShape(Je);return inTrainPhase(()=>dropout(Je,this.rate,st,this.seed),()=>Je,tt)}return Ke})}getConfig(){const Ke={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}dispose(){return super.dispose()}}Dropout.className="Dropout";registerClass(Dropout);class SpatialDropout1D extends Dropout{constructor(Ke){super(Ke),this.inputSpec=[{ndim:3}]}getNoiseShape(Ke){const Ye=Ke.shape;return[Ye[0],1,Ye[2]]}}SpatialDropout1D.className="SpatialDropout1D";registerClass(SpatialDropout1D);class Dense extends Layer{constructor(Ke){if(super(Ke),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Ke.batchInputShape==null&&Ke.inputShape==null&&Ke.inputDim!=null){let Ye=null;Ke.batchSize!=null&&(Ye=Ke.batchSize),this.batchInputShape=[Ye,Ke.inputDim]}this.units=Ke.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation(Ke.activation),Ke.useBias!=null&&(this.useBias=Ke.useBias),this.kernelInitializer=getInitializer(Ke.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=getInitializer(Ke.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=getConstraint(Ke.kernelConstraint),this.biasConstraint=getConstraint(Ke.biasConstraint),this.kernelRegularizer=getRegularizer(Ke.kernelRegularizer),this.biasRegularizer=getRegularizer(Ke.biasRegularizer),this.activityRegularizer=getRegularizer(Ke.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(Ke){Ke=getExactlyOneShape(Ke);const Ye=Ke[Ke.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[Ye,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:Ye}}],this.built=!0}computeOutputShape(Ke){Ke=getExactlyOneShape(Ke);const Ye=Ke.slice();return Ye[Ye.length-1]=this.units,Ye}call(Ke,Ye){return tidy(()=>{this.invokeCallHook(Ke,Ye);const Je=getExactlyOneTensor(Ke),tt=mapActivationToFusedKernel(this.activation.getClassName());let st;return tt!=null?st=dot(Je,this.kernel.read(),tt,this.bias?this.bias.read():null):(st=dot(Je,this.kernel.read()),this.bias!=null&&(st=biasAdd(st,this.bias.read())),this.activation!=null&&(st=this.activation.apply(st))),st})}getConfig(){const Ke={units:this.units,activation:serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),biasConstraint:serializeConstraint(this.biasConstraint)},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}Dense.className="Dense";registerClass(Dense);class Flatten extends Layer{constructor(Ke){Ke=Ke||{},super(Ke),this.inputSpec=[{minNDim:3}],this.dataFormat=Ke.dataFormat}computeOutputShape(Ke){Ke=getExactlyOneShape(Ke);for(const Ye of Ke.slice(1))if(Ye==null)throw new ValueError(`The shape of the input to "Flatten" is not fully defined (got ${Ke.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[Ke[0],arrayProd(Ke,1)]}call(Ke,Ye){return tidy(()=>{this.invokeCallHook(Ke,Ye);let Je=getExactlyOneTensor(Ke);if(this.dataFormat==="channelsFirst"&&Je.rank>1){const tt=[0];for(let st=2;st<Je.rank;++st)tt.push(st);tt.push(1),Je=Je.transpose(tt)}return batchFlatten(Je)})}getConfig(){const Ke={};this.dataFormat!=null&&(Ke.dataFormat=this.dataFormat);const Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}Flatten.className="Flatten";registerClass(Flatten);class Activation extends Layer{constructor(Ke){super(Ke),this.supportsMasking=!0,this.activation=getActivation(Ke.activation)}call(Ke,Ye){return tidy(()=>{this.invokeCallHook(Ke,Ye);const Je=getExactlyOneTensor(Ke);return this.activation.apply(Je)})}getConfig(){const Ke={activation:serializeActivation(this.activation)},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}Activation.className="Activation";registerClass(Activation);class RepeatVector extends Layer{constructor(Ke){super(Ke),this.n=Ke.n,this.inputSpec=[{ndim:2}]}computeOutputShape(Ke){return[Ke[0],this.n,Ke[1]]}call(Ke,Ye){return tidy(()=>(Ke=getExactlyOneTensor(Ke),repeat(Ke,this.n)))}getConfig(){const Ke={n:this.n},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}RepeatVector.className="RepeatVector";registerClass(RepeatVector);class Reshape extends Layer{constructor(Ke){super(Ke),this.targetShape=Ke.targetShape;for(let Ye=0;Ye<this.targetShape.length;++Ye)this.isUnknown(this.targetShape[Ye])&&(this.targetShape[Ye]=null)}isUnknown(Ke){return Ke<0||Ke==null}fixUnknownDimension(Ke,Ye){const Je="Total size of new array must be unchanged.",tt=Ye.slice();let st=1,rt=null;for(let ot=0;ot<tt.length;++ot){const at=tt[ot];if(this.isUnknown(at))if(rt===null)rt=ot;else throw new ValueError("Can only specifiy one unknown dimension.");else st*=at}const it=arrayProd(Ke);if(rt!==null){if(st===0||it%st!==0)throw new ValueError(Je);tt[rt]=it/st}else if(it!==st)throw new ValueError(Je);return tt}computeOutputShape(Ke){let Ye=!1;for(let Je=0;Je<Ke.length;++Je)if(this.isUnknown(Ke[Je])){Ye=!0;break}return Ye?Ke.slice(0,1).concat(this.targetShape):Ke.slice(0,1).concat(this.fixUnknownDimension(Ke.slice(1),this.targetShape))}call(Ke,Ye){return tidy(()=>{this.invokeCallHook(Ke,Ye);const Je=getExactlyOneTensor(Ke),tt=Je.shape,st=tt.slice(0,1).concat(this.fixUnknownDimension(tt.slice(1),this.targetShape));return Je.reshape(st)})}getConfig(){const Ke={targetShape:this.targetShape},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}Reshape.className="Reshape";registerClass(Reshape);class Permute extends Layer{constructor(Ke){if(super(Ke),Ke.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(Ke.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${Ke.dims} instead.`);const Ye=range$3(1,Ke.dims.length+1);if(!arraysEqual(Ke.dims.slice().sort(),Ye))throw new Error("Invalid permutation `dims`: "+JSON.stringify(Ke.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=Ke.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new InputSpec({ndim:this.dims.length+1})]}computeOutputShape(Ke){Ke=getExactlyOneShape(Ke);const Ye=Ke.slice();return this.dims.forEach((Je,tt)=>{Ye[tt+1]=Ke[Je]}),Ye}call(Ke,Ye){return transpose$2(getExactlyOneTensor(Ke),this.dimsIncludingBatch)}getConfig(){const Ke={dims:this.dims},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}Permute.className="Permute";registerClass(Permute);class Masking extends Layer{constructor(Ke){super(Ke??{}),this.supportsMasking=!0,Ke!=null?this.maskValue=Ke.maskValue==null?0:Ke.maskValue:this.maskValue=0}computeOutputShape(Ke){return Ke}getConfig(){const Ke=super.getConfig(),Ye={maskValue:this.maskValue};return Object.assign(Ye,Ke),Ye}computeMask(Ke,Ye){const Je=getExactlyOneTensor(Ke);return any$2(notEqual$2(Je,this.maskValue),-1)}call(Ke,Ye){return tidy(()=>{this.invokeCallHook(Ke,Ye);const Je=getExactlyOneTensor(Ke),rt=any$2(notEqual$2(Je,this.maskValue),-1,!0);return Je.mul(rt.asType(Je.dtype))})}}Masking.className="Masking";registerClass(Masking);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Embedding extends Layer{constructor(Ke){if(super(Ke),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",Ke.batchInputShape==null&&Ke.inputShape==null){let Ye=null;Ke.batchSize!=null&&(Ye=Ke.batchSize),Ke.inputLength==null?this.batchInputShape=[Ye,null]:this.batchInputShape=[Ye].concat(toList(Ke.inputLength))}this.inputDim=Ke.inputDim,assertPositiveInteger(this.inputDim,"inputDim"),this.outputDim=Ke.outputDim,assertPositiveInteger(this.outputDim,"outputDim"),this.embeddingsInitializer=getInitializer(Ke.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=getRegularizer(Ke.embeddingsRegularizer),this.activityRegularizer=getRegularizer(Ke.activityRegularizer),this.embeddingsConstraint=getConstraint(Ke.embeddingsConstraint),this.maskZero=Ke.maskZero,this.supportsMasking=Ke.maskZero,this.inputLength=Ke.inputLength}build(Ke){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(Ke){}computeMask(Ke,Ye){return tidy(()=>this.maskZero?(Ke=getExactlyOneTensor(Ke),notEqual$2(Ke,zerosLike$2(Ke))):null)}computeOutputShape(Ke){if(Ke=getExactlyOneShape(Ke),this.inputLength==null)return[...Ke,this.outputDim];const Ye=toList(this.inputLength);if(Ye.length!==Ke.length-1)throw new ValueError(`"inputLength" is ${this.inputLength}, but received input shape has shape ${Ke}`);{let Je=0;for(let tt=0;tt<Ye.length;++tt){const st=Ye[tt],rt=Ke[tt+1];if(st!=null&&rt!=null&&st!==rt)throw new ValueError(`"inputLength" is ${this.inputLength}, but received input shape has shape ${Ke}`);st==null&&(Ye[Je]=rt),Je++}}return[Ke[0],...Ye,this.outputDim]}call(Ke,Ye){return tidy(()=>{this.invokeCallHook(Ke,Ye);let Je=getExactlyOneTensor(Ke);return Je.dtype!=="int32"&&(Je=cast$2(Je,"int32")),gather(this.embeddings.read(),Je.as1D()).reshape(getExactlyOneShape(this.computeOutputShape(Je.shape)))})}getConfig(){const Ke={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:serializeInitializer(this.embeddingsInitializer),embeddingsRegularizer:serializeRegularizer(this.embeddingsRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),embeddingsConstraint:serializeConstraint(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}Embedding.className="Embedding";registerClass(Embedding);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Merge$1=class extends Layer{constructor(Ke){super(Ke||{}),this.supportsMasking=!0}mergeFunction(Ke){throw new NotImplementedError}computeElementwiseOpOutputShape(Ke,Ye){if(Ke==null||Ye==null)return null;if(Ke.length<Ye.length)return this.computeElementwiseOpOutputShape(Ye,Ke);if(Ye.length===0)return Ke;const Je=Ke.slice(0,Ke.length-Ye.length);for(let tt=0;tt<Ye.length;++tt){const st=Ke[Ke.length-Ye.length+tt],rt=Ye[tt];if(st==null||rt==null||st<0||rt<0)Je.push(null);else if(st===1)Je.push(rt);else if(rt===1)Je.push(st);else{if(st!==rt)throw new ValueError("Operands could not be broadcast together with shapes "+JSON.stringify(Ke)+" "+JSON.stringify(Ye));Je.push(st)}}return Je}build(Ke){if(Array.isArray(Ke)&&!Array.isArray(Ke[0])&&(Ke=[getExactlyOneShape(Ke)]),Ke=Ke,Ke.length<2)throw new ValueError(`A merge layer should be called on an Array of at least 2 inputs. Got ${Ke.length} input(s).`);let Ye=[];for(const st of Ke)st!=null&&st[0]!==null&&Ye.push(st[0]);if(Ye=unique$3(Ye),Ye.length>1)throw new ValueError(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(Ke)}.`);let Je=Ke[0]==null?null:Ke[0].slice(1);for(let st=1;st<Ke.length;++st){const rt=Ke[st]==null?null:Ke[st].slice(1);Je=this.computeElementwiseOpOutputShape(Je,rt)}const tt=Ke.map(st=>st.length);Ke.indexOf(null)===-1&&unique$3(tt).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(Ke,Ye){return tidy(()=>{if(Ke=Ke,this.reshapeRequired){const Je=[],tt=Ke.map(st=>st.rank);if(tt.indexOf(null)===-1){const st=max$3(tt);for(let rt of Ke){const it=rt.rank;for(let ot=0;ot<st-it;++ot)rt=expandDims$2(rt,1);Je.push(rt)}return this.mergeFunction(Je)}else{let st=!1;for(const ot of Ke){const at=ot.rank;if(at==null){const lt=ot.shape,ut=lt[0],ht=lt.slice(1).concat([ut]);let pt=ot.reshape([ut].concat(arrayProd(lt.slice(1))));pt=transpose$2(pt,[1,0]),pt=pt.reshape(ht),Je.push(pt),st=!0}else if(at>1){const lt=range$3(1,at).concat([0]);Je.push(transpose$2(ot,lt)),st=!0}else Je.push(ot)}let rt=this.mergeFunction(Je);const it=rt.rank;if(st){if(it==null){const ot=rt.shape,at=ot.length,lt=ot[at-1],ut=[lt].concat(ot.slice(0,ot.length-1));rt=transpose$2(rt.reshape([-1,lt]),[1,0]).reshape(ut)}else if(it>1){const ot=[it-1].concat(range$3(0,it-1));rt=transpose$2(rt,ot)}}return rt}}else return this.mergeFunction(Ke)})}computeOutputShape(Ke){Ke=Ke;let Ye;Ke[0]==null?Ye=null:Ye=Ke[0].slice(1);for(let tt=1;tt<Ke.length;++tt){const st=Ke[tt]==null?null:Ke[tt].slice(1);Ye=this.computeElementwiseOpOutputShape(Ye,st)}let Je=[];for(const tt of Ke)tt!=null&&tt[0]!==null&&Je.push(tt[0]);return Je=unique$3(Je),Je.length===1?Ye=Je.concat(Ye):Ye=[null].concat(Ye),Ye}computeMask(Ke,Ye){return tidy(()=>{if(Ye==null)return null;if(!Array.isArray(Ye))throw new ValueError("`mask` should be an Array");if(!Array.isArray(Ke))throw new ValueError("`inputs` should be an Array");if(Ye.length!==Ke.length)throw new ValueError(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${Ke.length} vs ${Ye.length})`);if(Ye.every(tt=>tt==null))return null;Ye=Ye.map(tt=>tt==null?tt:expandDims$3(tt,0));let Je=Ye[0];for(let tt=1;tt<Ye.length-1;++tt)Je=logicalAnd$2(Je,Ye[tt]);return Je})}},Add$1=class extends Merge$1{constructor(Ke){super(Ke)}mergeFunction(Ke){return tidy(()=>{let Ye=Ke[0].clone();for(let Je=1;Je<Ke.length;++Je)Ye=add$1(Ye,Ke[Je]);return Ye})}};Add$1.className="Add";registerClass(Add$1);let Multiply$1=class extends Merge$1{constructor(Ke){super(Ke)}mergeFunction(Ke){return tidy(()=>{let Ye=Ke[0].clone();for(let Je=1;Je<Ke.length;++Je)Ye=mul(Ye,Ke[Je]);return Ye})}};Multiply$1.className="Multiply";registerClass(Multiply$1);class Average extends Merge$1{constructor(Ke){super(Ke)}mergeFunction(Ke){return tidy(()=>{let Ye=Ke[0].clone();for(let Je=1;Je<Ke.length;++Je)Ye=add$1(Ye,Ke[Je]);return mul(1/Ke.length,Ye)})}}Average.className="Average";registerClass(Average);class Maximum extends Merge$1{constructor(Ke){super(Ke)}mergeFunction(Ke){return tidy(()=>{let Ye=Ke[0];for(let Je=1;Je<Ke.length;++Je)Ye=maximum$2(Ye,Ke[Je]);return Ye})}}Maximum.className="Maximum";registerClass(Maximum);class Minimum extends Merge$1{constructor(Ke){super(Ke)}mergeFunction(Ke){return tidy(()=>{let Ye=Ke[0];for(let Je=1;Je<Ke.length;++Je)Ye=minimum$2(Ye,Ke[Je]);return Ye})}}Minimum.className="Minimum";registerClass(Minimum);class Concatenate extends Merge$1{constructor(Ke){super(Ke),this.DEFAULT_AXIS=-1,Ke==null&&(Ke={}),this.axis=Ke.axis==null?this.DEFAULT_AXIS:Ke.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(Ke){if(!(Array.isArray(Ke)&&Array.isArray(Ke[0]))||Ke.length===1)throw new ValueError("A `Concatenate` layer should be called on a list of at least 2 inputs");Ke=Ke;let Ye=!0;for(const tt of Ke)if(tt!=null){Ye=!1;break}if(Ye)return;const Je=[];for(let tt=0;tt<Ke.length;++tt){const st=Ke[tt].slice();st.splice(this.axis,1);let rt=!1;for(const it of Je)if(arraysEqual(it,st)){rt=!0;break}rt||Je.push(st)}if(Je.length>1)throw new ValueError("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(Ke))}mergeFunction(Ke){return tidy(()=>concatenate(Ke,this.axis))}computeOutputShape(Ke){if(!(Array.isArray(Ke)&&Array.isArray(Ke[0])))throw new ValueError("A `Concatenate` layer should be called on a list of inputs.");const Ye=Ke,Je=Ye[0].slice(),tt=this.axis<0?Je.length+this.axis:this.axis;for(const st of Ye.slice(1)){if(Je[tt]==null||st[tt]==null){Je[tt]=null;break}Je[tt]+=st[tt]}return Je}computeMask(Ke,Ye){if(Ye==null)return null;if(!Array.isArray(Ye))throw new ValueError("`mask` should be an array for Concatenate");if(!Array.isArray(Ke))throw new ValueError("`inputs` should be an array for Concatenate");if(Ye.length!==Ke.length)throw new ValueError(`Mismatch in the length of mask (${Ye.length}) and the legnth of inputs (${Ke.length})`);return tidy(()=>{let Je=!0;if(Ye.forEach(rt=>{if(rt!=null){Je=!1;return}}),Je)return null;const tt=[];for(let rt=0;rt<Ke.length;++rt)Ye[rt]==null?tt.push(onesLike$2(Ke[rt]).asType("bool")):Ye[rt].rank<Ke[rt].rank?tt.push(expandDims$3(Ye[rt],-1)):tt.push(Ye[rt]);const st=concat$2(tt,this.axis);return all$2(st,-1,!1)})}getConfig(){const Ke={axis:this.axis},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}Concatenate.className="Concatenate";registerClass(Concatenate);function interpretAxis(Xe,Ke){for(;Xe<0;)Xe+=Ke;return Xe}function batchDot(Xe,Ke,Ye){if(Xe.shape.length>3||Ke.shape.length>3)throw new NotImplementedError("batchDot is not implemented for tensors of 4D or higher rank yet");if(assert$2(Xe.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${Xe.shape.length}`),assert$2(Xe.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${Ke.shape.length}`),typeof Ye=="number"&&(Ye=[Ye,Ye]),Xe.dtype==="complex64"||Ke.dtype==="complex64")throw new NotImplementedError("batchDot is not implemented for complex64-type Tensors yet.");const Je=Xe.shape.length,tt=Ke.shape.length;Ye==null&&(Ye=[Je-1,tt-2]);const st=Ye;return tidy(()=>{let rt;if(Je>tt){rt=Je-tt;const ot=[];for(let at=0;at<rt;++at)ot.push(1);Ke=Ke.reshape(Ke.shape.concat(ot))}else if(tt>Je){rt=tt-Je;const ot=[];for(let at=0;at<rt;++at)ot.push(1);Xe=Xe.reshape(Xe.shape.concat(ot))}else rt=0;let it;if(Xe.shape.length===2&&Ke.shape.length===2)st[0]===st[1]?it=Xe.mul(Ke).sum(st[0]):it=Xe.transpose([1,0]).mul(Ke).sum(st[1]);else{const ot=st[0]!==Xe.shape.length-1,at=st[1]===Ke.shape.length-1;it=Xe.matMul(Ke,ot,at)}if(rt>0){let ot;Je>tt?ot=Je+tt-3:ot=Je-1;const at=[];for(let lt=ot;lt<ot+rt;++lt)at.push(lt);it=it.squeeze(at)}return it.shape.length===1&&(it=it.expandDims(1)),it})}class Dot extends Merge$1{constructor(Ke){super(Ke),this.axes=Ke.axes,this.normalize=Ke.normalize==null?!1:Ke.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(Ke){assert$2(Array.isArray(Ke)&&Ke.length===2&&Array.isArray(Ke[0])&&Array.isArray(Ke[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const Ye=Ke[0],Je=Ke[1];if(Ye.length>3||Je.length>3)throw new NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");const tt=this.interpretAxes(Ye,Je);if(Ye[tt[0]]!==Je[tt[1]])throw new ValueError(`Dimension incompatibility: ${Ye[tt[0]]} !== ${Je[tt[1]]}`)}mergeFunction(Ke){if(Ke.length!==2)throw new ValueError(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${Ke.length} input(s).`);let Ye=Ke[0],Je=Ke[1],tt;return Array.isArray(this.axes)?tt=this.axes.map((st,rt)=>interpretAxis(st,Ke[rt].shape.length)):tt=[interpretAxis(this.axes,Ye.shape.length),interpretAxis(this.axes,Je.shape.length)],this.normalize&&(Ye=l2Normalize(Ye,tt[0]),Je=l2Normalize(Je,tt[1])),batchDot(Ye,Je,tt)}interpretAxes(Ke,Ye){let Je;return Array.isArray(this.axes)?Je=this.axes:Je=[interpretAxis(this.axes,Ke.length),interpretAxis(this.axes,Ye.length)],Je}computeOutputShape(Ke){assert$2(Array.isArray(Ke)&&Ke.length===2&&Array.isArray(Ke[0])&&Array.isArray(Ke[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const Ye=Ke[0].slice(),Je=Ke[1].slice();if(Ye.length>3||Je.length>3)throw new NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");const tt=this.interpretAxes(Ye,Je);Ye.splice(tt[0],1),Je.splice(tt[1],1),Je.splice(0,1);const st=Ye.concat(Je);return st.length===1&&st.push(1),st}computeMask(Ke,Ye){return null}getConfig(){const Ke={axes:this.axes,normalize:this.normalize},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}Dot.className="Dot";registerClass(Dot);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class GaussianNoise extends Layer{constructor(Ke){super(Ke),this.supportsMasking=!0,this.stddev=Ke.stddev}computeOutputShape(Ke){return Ke}getConfig(){const Ke=super.getConfig(),Ye={stddev:this.stddev};return Object.assign(Ye,Ke),Ye}call(Ke,Ye){return tidy(()=>{this.invokeCallHook(Ke,Ye);const Je=getExactlyOneTensor(Ke);return inTrainPhase(()=>randomNormal(Je.shape,0,this.stddev).add(Je),()=>Je,Ye.training||!1)})}}GaussianNoise.className="GaussianNoise";registerClass(GaussianNoise);class GaussianDropout extends Layer{constructor(Ke){super(Ke),this.supportsMasking=!0,this.rate=Ke.rate}computeOutputShape(Ke){return Ke}getConfig(){const Ke=super.getConfig(),Ye={rate:this.rate};return Object.assign(Ye,Ke),Ye}call(Ke,Ye){return tidy(()=>{this.invokeCallHook(Ke,Ye);const Je=getExactlyOneTensor(Ke);return this.rate>0&&this.rate<1?inTrainPhase(()=>{const st=Math.sqrt(this.rate/(1-this.rate));return Je.mul(randomNormal(Je.shape,1,st))},()=>Je,Ye.training||!1):Je})}}GaussianDropout.className="GaussianDropout";registerClass(GaussianDropout);class AlphaDropout extends Layer{constructor(Ke){super(Ke),this.supportsMasking=!0,this.rate=Ke.rate,this.noiseShape=Ke.noiseShape}_getNoiseShape(Ke){return this.noiseShape||getExactlyOneTensor(Ke).shape}computeOutputShape(Ke){return Ke}getConfig(){const Ke=super.getConfig(),Ye={rate:this.rate};return Object.assign(Ye,Ke),Ye}call(Ke,Ye){return tidy(()=>{if(this.rate<1&&this.rate>0){const Je=this._getNoiseShape(Ke);return inTrainPhase(()=>{const st=getExactlyOneTensor(Ke),it=-1.6732632423543772*1.0507009873554805;let ot=greaterEqual$2(randomUniform(Je),this.rate);ot=cast$2(ot,"float32");const at=((1-this.rate)*(1+this.rate*it**2))**-.5,lt=-at*it*this.rate;return st.mul(ot).add(ot.add(-1).mul(it)).mul(at).add(lt)},()=>getExactlyOneTensor(Ke),Ye.training||!1)}return Ke})}}AlphaDropout.className="AlphaDropout";registerClass(AlphaDropout);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function batchNormalization(Xe,Ke,Ye,Je,tt,st=.001){let rt;if(Xe.rank===2)rt=batchNorm2d(Xe,Ke,Ye,Je,tt,st);else if(Xe.rank===3)rt=batchNorm3d(Xe,Ke,Ye,Je,tt,st);else if(Xe.rank===4)rt=batchNorm4d(Xe,Ke,Ye,Je,tt,st);else throw new NotImplementedError(`batchNormalization is not implemented for array of rank ${Xe.rank} yet`);return rt}function regularNormalizeBatchInTraining(Xe,Ke,Ye,Je,tt=.001){return tidy(()=>{const st=moments(Xe,Je),rt=st.mean,it=st.variance;return[batchNormalization(Xe,rt,it,Ye,Ke,tt),rt,it]})}function broadcastNormalizeBatchInTraining(Xe,Ke,Ye,Je,tt=.001){return tidy(()=>{const st=moments(Xe,Je),rt=st.mean,it=st.variance,ot=[];for(const ft of range$3(0,Xe.rank))Je.indexOf(ft)!==-1?ot.push(1):ot.push(Xe.shape[ft]);const at=rt.reshape(ot),lt=it.reshape(ot),ut=Ke==null?null:Ke.reshape(ot),ht=Ye==null?null:Ye.reshape(ot);return[batchNormalization(Xe,at,lt,ht,ut,tt),rt,it]})}function normalizeBatchInTraining(Xe,Ke,Ye,Je,tt=.001){return arraysEqual(Je.slice().sort(),range$3(0,Xe.rank-1))?regularNormalizeBatchInTraining(Xe,Ke,Ye,Je,tt):broadcastNormalizeBatchInTraining(Xe,Ke,Ye,Je,tt)}class BatchNormalization extends Layer{constructor(Ke){Ke==null&&(Ke={}),super(Ke),this.supportsMasking=!0,this.axis=Ke.axis==null?-1:Ke.axis,this.momentum=Ke.momentum==null?.99:Ke.momentum,this.epsilon=Ke.epsilon==null?.001:Ke.epsilon,this.center=Ke.center==null?!0:Ke.center,this.scale=Ke.scale==null?!0:Ke.scale,this.betaInitializer=getInitializer(Ke.betaInitializer||"zeros"),this.gammaInitializer=getInitializer(Ke.gammaInitializer||"ones"),this.movingMeanInitializer=getInitializer(Ke.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=getInitializer(Ke.movingVarianceInitializer||"ones"),this.betaConstraint=getConstraint(Ke.betaConstraint),this.gammaConstraint=getConstraint(Ke.gammaConstraint),this.betaRegularizer=getRegularizer(Ke.betaRegularizer),this.gammaRegularizer=getRegularizer(Ke.gammaRegularizer)}build(Ke){Ke=getExactlyOneShape(Ke);const Ye=this.axis>=0?this.axis:this.axis+Ke.length,Je=Ke[Ye];if(Je==null)throw new ValueError(`Axis ${Ye} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(Ke)}.`);this.inputSpec=[new InputSpec({ndim:Ke.length,axes:{[Ye]:Je}})];const tt=[Je];this.scale&&(this.gamma=this.addWeight("gamma",tt,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",tt,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",tt,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",tt,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(Ke,Ye){return tidy(()=>{const Je=Ye.training==null?!1:Ye.training,tt=getExactlyOneTensor(Ke),st=tt.shape,rt=st.length,it=range$3(0,rt),ot=this.axis>=0?this.axis:this.axis+rt;it.splice(ot,1);const at=pyListRepeat(1,rt);at[ot]=st[ot];const lt=it.slice();lt.sort();const ut=!arraysEqual(lt,range$3(0,rt).slice(0,rt-1)),ht=()=>{if(ut){const Et=this.movingMean.read().reshape(at),wt=this.movingVariance.read().reshape(at),_t=this.center?this.beta.read().reshape(at):null,Ct=this.scale?this.gamma.read().reshape(at):null;return batchNormalization(tt,Et,wt,_t,Ct,this.epsilon)}else return batchNormalization(tt,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!Je)return ht();const[pt,ft,xt]=normalizeBatchInTraining(tt,this.gamma.read(),this.beta.read(),it,this.epsilon),vt=(Et,wt,_t)=>{tidy(()=>{const Ct=1-_t,Tt=Et.read(),St=Tt.sub(wt).mul(Ct);Et.write(Tt.sub(St))})};return(()=>{vt(this.movingMean,ft,this.momentum),vt(this.movingVariance,xt,this.momentum)})(),pt})}getConfig(){const Ke={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:serializeInitializer(this.betaInitializer),gammaInitializer:serializeInitializer(this.gammaInitializer),movingMeanInitializer:serializeInitializer(this.movingMeanInitializer),movingVarianceInitializer:serializeInitializer(this.movingVarianceInitializer),betaRegularizer:serializeRegularizer(this.betaRegularizer),gammaRegularizer:serializeRegularizer(this.gammaRegularizer),betaConstraint:serializeConstraint(this.betaConstraint),gammaConstraint:serializeConstraint(this.gammaConstraint)},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}BatchNormalization.className="BatchNormalization";registerClass(BatchNormalization);class LayerNormalization extends Layer{constructor(Ke){if(Ke==null&&(Ke={}),super(Ke),this.axis=Ke.axis==null?-1:Ke.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const Ye of this.axis)if(!Number.isInteger(Ye))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=Ke.epsilon==null?.001:Ke.epsilon,this.center=Ke.center==null?!0:Ke.center,this.scale=Ke.scale==null?!0:Ke.scale,this.betaInitializer=getInitializer(Ke.betaInitializer||"zeros"),this.gammaInitializer=getInitializer(Ke.gammaInitializer||"ones"),this.betaRegularizer=getRegularizer(Ke.betaRegularizer),this.gammaRegularizer=getRegularizer(Ke.gammaRegularizer),this.supportsMasking=!0}build(Ke){Ke=getExactlyOneShape(Ke);const Ye=Ke.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let st=0;st<this.axis.length;++st)this.axis[st]<0&&(this.axis[st]+=Ye);for(const st of this.axis)if(st<0||st>=Ye)throw new Error(`Invalid axis: ${st}`);if(this.axis.length!==unique$3(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const Je=this.axis.map(st=>Ke[st]),tt=!0;this.scale?this.gamma=this.addWeight("gamma",Je,"float32",this.gammaInitializer,this.gammaRegularizer,tt):this.gamma=null,this.center?this.beta=this.addWeight("beta",Je,"float32",this.betaInitializer,this.betaRegularizer,tt):this.beta=null,this.built=!0}call(Ke,Ye){const Je=getExactlyOneTensor(Ke),tt=Je.shape,st=tt.length;return tidy(()=>{let{mean:it,variance:ot}=moments(Je,this.axis,!0);const at=pyListRepeat(1,st);for(const xt of this.axis)at[xt]=tt[xt];const lt=xt=>xt!=null&&xt.shape.length!==st&&this.axis!==[st-1]?xt.reshape(at):xt;let ut=lt(this.gamma.read()),ht=lt(this.beta.read());const pt=[],ft=[];for(let xt=0;xt<st;++xt)this.axis.indexOf(xt)!==-1?(pt.push(tt[xt]),ft.push(1)):(pt.push(1),ft.push(tt[xt]));return it=it.tile(pt),ot=ot.tile(pt),ut=ut.tile(ft),ht=ht.tile(ft),batchNormalization(Je,it,ot,ht,ut,this.epsilon)})}getConfig(){const Ke={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:serializeInitializer(this.betaInitializer),gammaInitializer:serializeInitializer(this.gammaInitializer),betaRegularizer:serializeRegularizer(this.betaRegularizer),gammaRegularizer:serializeRegularizer(this.gammaRegularizer)},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}LayerNormalization.className="LayerNormalization";registerClass(LayerNormalization);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function spatial2dPadding(Xe,Ke,Ye){return tidy(()=>{if(Xe.rank!==4)throw new ValueError(`temporalPadding expects input tensor to be 4-D, but received a ${Xe.rank}-D tensor.`);if(Ke==null&&(Ke=[[1,1],[1,1]]),Ke.length!==2||Ke[0].length!==2||Ke[1].length!==2)throw new ValueError("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(Ye==null&&(Ye=imageDataFormat()),Ye!=="channelsLast"&&Ye!=="channelsFirst")throw new ValueError(`Unknown data format: ${Ye}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let Je;return Ye==="channelsFirst"?Je=[[0,0],[0,0],Ke[0],Ke[1]]:Je=[[0,0],Ke[0],Ke[1],[0,0]],pad(Xe,Je)})}class ZeroPadding2D extends Layer{constructor(Ke){if(Ke==null&&(Ke={}),super(Ke),this.dataFormat=Ke.dataFormat==null?imageDataFormat():Ke.dataFormat,Ke.padding==null)this.padding=[[1,1],[1,1]];else if(typeof Ke.padding=="number")this.padding=[[Ke.padding,Ke.padding],[Ke.padding,Ke.padding]];else{if(Ke.padding=Ke.padding,Ke.padding.length!==2)throw new ValueError(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${Ke.padding.length} array.`);let Ye,Je;if(typeof Ke.padding[0]=="number")Ye=[Ke.padding[0],Ke.padding[0]],Je=[Ke.padding[1],Ke.padding[1]];else{if(Ke.padding=Ke.padding,Ke.padding[0].length!==2)throw new ValueError(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${Ke.padding[0].length} array.`);if(Ye=Ke.padding[0],Ke.padding[1].length!==2)throw new ValueError(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${Ke.padding[1].length} array.`);Je=Ke.padding[1]}this.padding=[Ye,Je]}this.inputSpec=[new InputSpec({ndim:4})]}computeOutputShape(Ke){Ke=getExactlyOneShape(Ke);let Ye,Je;return this.dataFormat==="channelsFirst"?(Ke[2]!=null&&Ke[2]>=0?Ye=Ke[2]+this.padding[0][0]+this.padding[0][1]:Ye=null,Ke[3]!=null&&Ke[3]>=0?Je=Ke[3]+this.padding[1][0]+this.padding[1][1]:Je=null,[Ke[0],Ke[1],Ye,Je]):(Ke[1]!=null&&Ke[1]>=0?Ye=Ke[1]+this.padding[0][0]+this.padding[0][1]:Ye=null,Ke[2]!=null&&Ke[2]>=0?Je=Ke[2]+this.padding[1][0]+this.padding[1][1]:Je=null,[Ke[0],Ye,Je,Ke[3]])}call(Ke,Ye){return tidy(()=>spatial2dPadding(getExactlyOneTensor(Ke),this.padding,this.dataFormat))}getConfig(){const Ke={padding:this.padding,dataFormat:this.dataFormat},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}ZeroPadding2D.className="ZeroPadding2D";registerClass(ZeroPadding2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pool2d(Xe,Ke,Ye,Je,tt,st){return tidy(()=>{checkDataFormat(tt),checkPoolMode(st),checkPaddingMode(Je),Ye==null&&(Ye=[1,1]),Je==null&&(Je="valid"),tt==null&&(tt=imageDataFormat()),st==null&&(st="max"),Xe=preprocessConv2DInput(Xe,tt);let rt;const it=Je==="same"?"same":"valid";return st==="max"?rt=maxPool$2(Xe,Ke,Ye,it):rt=avgPool$2(Xe,Ke,Ye,it),tt==="channelsFirst"&&(rt=transpose$2(rt,[0,3,1,2])),rt})}function pool3d$1(Xe,Ke,Ye,Je,tt,st){return tidy(()=>{checkDataFormat(tt),checkPoolMode(st),checkPaddingMode(Je),Ye==null&&(Ye=[1,1,1]),Je==null&&(Je="valid"),tt==null&&(tt=imageDataFormat()),st==null&&(st="max"),Xe=preprocessConv3DInput(Xe,tt);let rt;const it=Je==="same"?"same":"valid";return st==="max"?rt=maxPool3d$1(Xe,Ke,Ye,it):rt=avgPool3d(Xe,Ke,Ye,it),tt==="channelsFirst"&&(rt=transpose$2(rt,[0,4,1,2,3])),rt})}class Pooling1D extends Layer{constructor(Ke){if(Ke.poolSize==null&&(Ke.poolSize=2),super(Ke),typeof Ke.poolSize=="number")this.poolSize=[Ke.poolSize];else if(Array.isArray(Ke.poolSize)&&Ke.poolSize.length===1&&typeof Ke.poolSize[0]=="number")this.poolSize=Ke.poolSize;else throw new ValueError(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(Ke.poolSize)}`);if(assertPositiveInteger(this.poolSize,"poolSize"),Ke.strides==null)this.strides=this.poolSize;else if(typeof Ke.strides=="number")this.strides=[Ke.strides];else if(Array.isArray(Ke.strides)&&Ke.strides.length===1&&typeof Ke.strides[0]=="number")this.strides=Ke.strides;else throw new ValueError(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(Ke.strides)}`);assertPositiveInteger(this.strides,"strides"),this.padding=Ke.padding==null?"valid":Ke.padding,checkPaddingMode(this.padding),this.inputSpec=[new InputSpec({ndim:3})]}computeOutputShape(Ke){Ke=getExactlyOneShape(Ke);const Ye=convOutputLength(Ke[1],this.poolSize[0],this.padding,this.strides[0]);return[Ke[0],Ye,Ke[2]]}call(Ke,Ye){return tidy(()=>{this.invokeCallHook(Ke,Ye),Ke=expandDims$2(getExactlyOneTensor(Ke),2);const Je=this.poolingFunction(getExactlyOneTensor(Ke),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return squeeze(Je,[2])})}getConfig(){const Ke={poolSize:this.poolSize,padding:this.padding,strides:this.strides},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}class MaxPooling1D extends Pooling1D{constructor(Ke){super(Ke)}poolingFunction(Ke,Ye,Je,tt,st){return checkDataFormat(st),checkPaddingMode(tt),pool2d(Ke,Ye,Je,tt,st,"max")}}MaxPooling1D.className="MaxPooling1D";registerClass(MaxPooling1D);class AveragePooling1D extends Pooling1D{constructor(Ke){super(Ke)}poolingFunction(Ke,Ye,Je,tt,st){return checkDataFormat(st),checkPaddingMode(tt),pool2d(Ke,Ye,Je,tt,st,"avg")}}AveragePooling1D.className="AveragePooling1D";registerClass(AveragePooling1D);class Pooling2D extends Layer{constructor(Ke){if(Ke.poolSize==null&&(Ke.poolSize=[2,2]),super(Ke),this.poolSize=Array.isArray(Ke.poolSize)?Ke.poolSize:[Ke.poolSize,Ke.poolSize],Ke.strides==null)this.strides=this.poolSize;else if(Array.isArray(Ke.strides)){if(Ke.strides.length!==2)throw new ValueError(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${Ke.strides.length}.`);this.strides=Ke.strides}else this.strides=[Ke.strides,Ke.strides];assertPositiveInteger(this.poolSize,"poolSize"),assertPositiveInteger(this.strides,"strides"),this.padding=Ke.padding==null?"valid":Ke.padding,this.dataFormat=Ke.dataFormat==null?"channelsLast":Ke.dataFormat,checkDataFormat(this.dataFormat),checkPaddingMode(this.padding),this.inputSpec=[new InputSpec({ndim:4})]}computeOutputShape(Ke){Ke=getExactlyOneShape(Ke);let Ye=this.dataFormat==="channelsFirst"?Ke[2]:Ke[1],Je=this.dataFormat==="channelsFirst"?Ke[3]:Ke[2];return Ye=convOutputLength(Ye,this.poolSize[0],this.padding,this.strides[0]),Je=convOutputLength(Je,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[Ke[0],Ke[1],Ye,Je]:[Ke[0],Ye,Je,Ke[3]]}call(Ke,Ye){return tidy(()=>(this.invokeCallHook(Ke,Ye),this.poolingFunction(getExactlyOneTensor(Ke),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const Ke={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}class MaxPooling2D extends Pooling2D{constructor(Ke){super(Ke)}poolingFunction(Ke,Ye,Je,tt,st){return checkDataFormat(st),checkPaddingMode(tt),pool2d(Ke,Ye,Je,tt,st,"max")}}MaxPooling2D.className="MaxPooling2D";registerClass(MaxPooling2D);class AveragePooling2D extends Pooling2D{constructor(Ke){super(Ke)}poolingFunction(Ke,Ye,Je,tt,st){return checkDataFormat(st),checkPaddingMode(tt),pool2d(Ke,Ye,Je,tt,st,"avg")}}AveragePooling2D.className="AveragePooling2D";registerClass(AveragePooling2D);class Pooling3D extends Layer{constructor(Ke){if(Ke.poolSize==null&&(Ke.poolSize=[2,2,2]),super(Ke),this.poolSize=Array.isArray(Ke.poolSize)?Ke.poolSize:[Ke.poolSize,Ke.poolSize,Ke.poolSize],Ke.strides==null)this.strides=this.poolSize;else if(Array.isArray(Ke.strides)){if(Ke.strides.length!==3)throw new ValueError(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${Ke.strides.length}.`);this.strides=Ke.strides}else this.strides=[Ke.strides,Ke.strides,Ke.strides];assertPositiveInteger(this.poolSize,"poolSize"),assertPositiveInteger(this.strides,"strides"),this.padding=Ke.padding==null?"valid":Ke.padding,this.dataFormat=Ke.dataFormat==null?"channelsLast":Ke.dataFormat,checkDataFormat(this.dataFormat),checkPaddingMode(this.padding),this.inputSpec=[new InputSpec({ndim:5})]}computeOutputShape(Ke){Ke=getExactlyOneShape(Ke);let Ye=this.dataFormat==="channelsFirst"?Ke[2]:Ke[1],Je=this.dataFormat==="channelsFirst"?Ke[3]:Ke[2],tt=this.dataFormat==="channelsFirst"?Ke[4]:Ke[3];return Ye=convOutputLength(Ye,this.poolSize[0],this.padding,this.strides[0]),Je=convOutputLength(Je,this.poolSize[1],this.padding,this.strides[1]),tt=convOutputLength(tt,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[Ke[0],Ke[1],Ye,Je,tt]:[Ke[0],Ye,Je,tt,Ke[4]]}call(Ke,Ye){return tidy(()=>(this.invokeCallHook(Ke,Ye),this.poolingFunction(getExactlyOneTensor(Ke),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const Ke={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}class MaxPooling3D extends Pooling3D{constructor(Ke){super(Ke)}poolingFunction(Ke,Ye,Je,tt,st){return checkDataFormat(st),checkPaddingMode(tt),pool3d$1(Ke,Ye,Je,tt,st,"max")}}MaxPooling3D.className="MaxPooling3D";registerClass(MaxPooling3D);class AveragePooling3D extends Pooling3D{constructor(Ke){super(Ke)}poolingFunction(Ke,Ye,Je,tt,st){return checkDataFormat(st),checkPaddingMode(tt),pool3d$1(Ke,Ye,Je,tt,st,"avg")}}AveragePooling3D.className="AveragePooling3D";registerClass(AveragePooling3D);class GlobalPooling1D extends Layer{constructor(Ke){super(Ke),this.inputSpec=[new InputSpec({ndim:3})]}computeOutputShape(Ke){return[Ke[0],Ke[2]]}call(Ke,Ye){throw new NotImplementedError}}class GlobalAveragePooling1D extends GlobalPooling1D{constructor(Ke){super(Ke||{})}call(Ke,Ye){return tidy(()=>{const Je=getExactlyOneTensor(Ke);return mean$1(Je,1)})}}GlobalAveragePooling1D.className="GlobalAveragePooling1D";registerClass(GlobalAveragePooling1D);class GlobalMaxPooling1D extends GlobalPooling1D{constructor(Ke){super(Ke||{})}call(Ke,Ye){return tidy(()=>{const Je=getExactlyOneTensor(Ke);return max$4(Je,1)})}}GlobalMaxPooling1D.className="GlobalMaxPooling1D";registerClass(GlobalMaxPooling1D);class GlobalPooling2D extends Layer{constructor(Ke){super(Ke),this.dataFormat=Ke.dataFormat==null?"channelsLast":Ke.dataFormat,checkDataFormat(this.dataFormat),this.inputSpec=[new InputSpec({ndim:4})]}computeOutputShape(Ke){return Ke=Ke,this.dataFormat==="channelsLast"?[Ke[0],Ke[3]]:[Ke[0],Ke[1]]}call(Ke,Ye){throw new NotImplementedError}getConfig(){const Ke={dataFormat:this.dataFormat},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}}class GlobalAveragePooling2D extends GlobalPooling2D{call(Ke,Ye){return tidy(()=>{const Je=getExactlyOneTensor(Ke);return this.dataFormat==="channelsLast"?mean$1(Je,[1,2]):mean$1(Je,[2,3])})}}GlobalAveragePooling2D.className="GlobalAveragePooling2D";registerClass(GlobalAveragePooling2D);class GlobalMaxPooling2D extends GlobalPooling2D{call(Ke,Ye){return tidy(()=>{const Je=getExactlyOneTensor(Ke);return this.dataFormat==="channelsLast"?max$4(Je,[1,2]):max$4(Je,[2,3])})}}GlobalMaxPooling2D.className="GlobalMaxPooling2D";registerClass(GlobalMaxPooling2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wrapper extends Layer{constructor(Ke){super(Ke),this.layer=Ke.layer}build(Ke){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(Ke){this.layer!=null&&(this.layer.trainable=Ke)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(Ke){this.layer.setWeights(Ke)}getConfig(){const Ke={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}setFastWeightInitDuringBuild(Ke){super.setFastWeightInitDuringBuild(Ke),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(Ke)}static fromConfig(Ke,Ye,Je={}){const tt=Ye.layer,st=deserialize(tt,Je);delete Ye.layer;const rt={layer:st};return Object.assign(rt,Ye),new Ke(rt)}}class TimeDistributed extends Wrapper{constructor(Ke){super(Ke),this.supportsMasking=!0}build(Ke){if(Ke=getExactlyOneShape(Ke),Ke.length<3)throw new ValueError(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(Ke)}`);this.inputSpec=[{shape:Ke}];const Ye=[Ke[0]].concat(Ke.slice(2));this.layer.built||(this.layer.build(Ye),this.layer.built=!0),super.build(Ke)}computeOutputShape(Ke){Ke=getExactlyOneShape(Ke);const Ye=[Ke[0]].concat(Ke.slice(2)),Je=this.layer.computeOutputShape(Ye),tt=Ke[1];return[Je[0],tt].concat(Je.slice(1))}call(Ke,Ye){return tidy(()=>(Ke=getExactlyOneTensor(Ke),rnn((rt,it)=>[getExactlyOneTensor(this.layer.call(rt,Ye)),[]],Ke,[],!1,null,null,!1,!0)[1]))}}TimeDistributed.className="TimeDistributed";registerClass(TimeDistributed);function checkBidirectionalMergeMode(Xe){checkStringTypeUnionValue(VALID_BIDIRECTIONAL_MERGE_MODES,"BidirectionalMergeMode",Xe)}const DEFAULT_BIDIRECTIONAL_MERGE_MODE="concat";class Bidirectional extends Wrapper{constructor(Ke){super(Ke);const Ye=Ke.layer.getConfig(),Je={};Je.className=Ke.layer.getClassName(),Je.config=Ye,this.forwardLayer=deserialize(Je),Ye.goBackwards=Ye.goBackwards!==!0;const tt={};if(tt.className=Ke.layer.getClassName(),tt.config=Ye,this.backwardLayer=deserialize(tt),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=Ke.mergeMode===void 0?DEFAULT_BIDIRECTIONAL_MERGE_MODE:Ke.mergeMode,checkBidirectionalMergeMode(this.mergeMode),Ke.weights)throw new NotImplementedError("weights support is not implemented for Bidirectional layer yet.");this._stateful=Ke.layer.stateful,this.returnSequences=Ke.layer.returnSequences,this.returnState=Ke.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=Ke.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(Ke){this._trainable=Ke,this.forwardLayer!=null&&(this.forwardLayer.trainable=Ke),this.backwardLayer!=null&&(this.backwardLayer.trainable=Ke)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(Ke){const Ye=Ke.length,Je=Math.floor(Ye/2);this.forwardLayer.setWeights(Ke.slice(0,Je)),this.backwardLayer.setWeights(Ke.slice(Je))}computeOutputShape(Ke){let Ye=this.forwardLayer.computeOutputShape(Ke);Array.isArray(Ye)&&Array.isArray(Ye[0])||(Ye=[Ye]),Ye=Ye;let Je,tt,st;return this.returnState&&(st=Ye.slice(1)),Je=Ye[0],Je=Je,this.mergeMode==="concat"?(Je[Je.length-1]*=2,tt=[Je]):this.mergeMode==null?tt=[Je,Je.slice()]:tt=[Je],this.returnState?this.mergeMode==null?tt.concat(st).concat(st.slice()):[Je].concat(st).concat(st.slice()):singletonOrArray(tt)}apply(Ke,Ye){let Je=Ye==null?null:Ye.initialState,tt=Ye==null?null:Ye.constants;Ye==null&&(Ye={});const st=standardizeArgs(Ke,Je,tt,this.numConstants);if(Ke=st.inputs,Je=st.initialState,tt=st.constants,Array.isArray(Ke)&&(Je=Ke.slice(1),Ke=Ke[0]),(Je==null||Je.length===0)&&tt==null)return super.apply(Ke,Ye);const rt=[],it=[];if(Je!=null){const at=Je.length;if(at%2>0)throw new ValueError("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");Ye.initialState=Je,rt.push(...Je);const lt=Je.map(ut=>new InputSpec({shape:ut.shape}));this.forwardLayer.stateSpec=lt.slice(0,at/2),this.backwardLayer.stateSpec=lt.slice(at/2),it.push(...lt)}if(tt!=null)throw new NotImplementedError("Support for constants in Bidirectional layers is not implemented yet.");const ot=rt[0]instanceof SymbolicTensor;for(const at of rt)if(at instanceof SymbolicTensor!==ot)throw new ValueError("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(ot){const at=[Ke].concat(rt),lt=this.inputSpec.concat(it),ut=this.inputSpec;this.inputSpec=lt;const ht=super.apply(at,Ye);return this.inputSpec=ut,ht}else return super.apply(Ke,Ye)}call(Ke,Ye){return tidy(()=>{const Je=Ye.initialState;let tt,st;if(Je==null)tt=this.forwardLayer.call(Ke,Ye),st=this.backwardLayer.call(Ke,Ye);else{const ot=Je.slice(0,Je.length/2),at=Je.slice(Je.length/2);tt=this.forwardLayer.call(Ke,Object.assign(Ye,{initialState:ot})),st=this.backwardLayer.call(Ke,Object.assign(Ye,{initialState:at}))}let rt;this.returnState&&(Array.isArray(tt)&&(rt=tt.slice(1).concat(st.slice(1))),tt=tt[0],st=st[0]),this.returnSequences&&(st=reverse$2(st,1));let it;return this.mergeMode==="concat"?it=concatenate([tt,st]):this.mergeMode==="sum"?it=add$1(tt,st):this.mergeMode==="ave"?it=mul(.5,add$1(tt,st)):this.mergeMode==="mul"?it=mul(tt,st):this.mergeMode==null&&(it=[tt,st]),this.returnState?this.mergeMode==null?it.concat(rt):[it].concat(rt):it})}resetStates(Ke){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(Ke){nameScope(this.forwardLayer.name,()=>{this.forwardLayer.build(Ke)}),nameScope(this.backwardLayer.name,()=>{this.backwardLayer.build(Ke)}),this.built=!0}computeMask(Ke,Ye){Array.isArray(Ye)&&(Ye=Ye[0]);let Je;if(this.returnSequences?this.mergeMode==null?Je=[Ye,Ye]:Je=Ye:this.mergeMode==null?Je=[null,null]:Je=null,this.returnState){const st=this.forwardLayer.states.map(rt=>null);return Array.isArray(Je)?Je.concat(st).concat(st):[Je].concat(st).concat(st)}else return Je}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(Ke){super.setFastWeightInitDuringBuild(Ke),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(Ke),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(Ke)}getConfig(){const Ke={mergeMode:this.mergeMode},Ye=super.getConfig();return Object.assign(Ke,Ye),Ke}static fromConfig(Ke,Ye){const Je=deserialize(Ye.layer);if(delete Ye.layer,Ye.numConstants!=null)throw new NotImplementedError("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const tt=Ye;return tt.layer=Je,new Ke(tt)}}Bidirectional.className="Bidirectional";registerClass(Bidirectional);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var DataType;(function(Xe){Xe[Xe.DT_INVALID=0]="DT_INVALID",Xe[Xe.DT_FLOAT=1]="DT_FLOAT",Xe[Xe.DT_DOUBLE=2]="DT_DOUBLE",Xe[Xe.DT_INT32=3]="DT_INT32",Xe[Xe.DT_UINT8=4]="DT_UINT8",Xe[Xe.DT_INT16=5]="DT_INT16",Xe[Xe.DT_INT8=6]="DT_INT8",Xe[Xe.DT_STRING=7]="DT_STRING",Xe[Xe.DT_COMPLEX64=8]="DT_COMPLEX64",Xe[Xe.DT_INT64=9]="DT_INT64",Xe[Xe.DT_BOOL=10]="DT_BOOL",Xe[Xe.DT_QINT8=11]="DT_QINT8",Xe[Xe.DT_QUINT8=12]="DT_QUINT8",Xe[Xe.DT_QINT32=13]="DT_QINT32",Xe[Xe.DT_BFLOAT16=14]="DT_BFLOAT16",Xe[Xe.DT_FLOAT_REF=101]="DT_FLOAT_REF",Xe[Xe.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",Xe[Xe.DT_INT32_REF=103]="DT_INT32_REF",Xe[Xe.DT_UINT8_REF=104]="DT_UINT8_REF",Xe[Xe.DT_INT16_REF=105]="DT_INT16_REF",Xe[Xe.DT_INT8_REF=106]="DT_INT8_REF",Xe[Xe.DT_STRING_REF=107]="DT_STRING_REF",Xe[Xe.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",Xe[Xe.DT_INT64_REF=109]="DT_INT64_REF",Xe[Xe.DT_BOOL_REF=110]="DT_BOOL_REF",Xe[Xe.DT_QINT8_REF=111]="DT_QINT8_REF",Xe[Xe.DT_QUINT8_REF=112]="DT_QUINT8_REF",Xe[Xe.DT_QINT32_REF=113]="DT_QINT32_REF",Xe[Xe.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"})(DataType||(DataType={}));var SaverDef;(function(Xe){(function(Ke){Ke[Ke.LEGACY=0]="LEGACY",Ke[Ke.V1=1]="V1",Ke[Ke.V2=2]="V2"})(Xe.CheckpointFormatVersion||(Xe.CheckpointFormatVersion={}))})(SaverDef||(SaverDef={}));var alea$3={exports:{}};alea$3.exports;(function(Xe){(function(Ke,Ye,Je){function tt(ot){var at=this,lt=it();at.next=function(){var ut=2091639*at.s0+at.c*23283064365386963e-26;return at.s0=at.s1,at.s1=at.s2,at.s2=ut-(at.c=ut|0)},at.c=1,at.s0=lt(" "),at.s1=lt(" "),at.s2=lt(" "),at.s0-=lt(ot),at.s0<0&&(at.s0+=1),at.s1-=lt(ot),at.s1<0&&(at.s1+=1),at.s2-=lt(ot),at.s2<0&&(at.s2+=1),lt=null}function st(ot,at){return at.c=ot.c,at.s0=ot.s0,at.s1=ot.s1,at.s2=ot.s2,at}function rt(ot,at){var lt=new tt(ot),ut=at&&at.state,ht=lt.next;return ht.int32=function(){return lt.next()*4294967296|0},ht.double=function(){return ht()+(ht()*2097152|0)*11102230246251565e-32},ht.quick=ht,ut&&(typeof ut=="object"&&st(ut,lt),ht.state=function(){return st(lt,{})}),ht}function it(){var ot=4022871197,at=function(lt){lt=lt.toString();for(var ut=0;ut<lt.length;ut++){ot+=lt.charCodeAt(ut);var ht=.02519603282416938*ot;ot=ht>>>0,ht-=ot,ht*=ot,ot=ht>>>0,ht-=ot,ot+=ht*4294967296}return(ot>>>0)*23283064365386963e-26};return at}Ye&&Ye.exports?Ye.exports=rt:this.alea=rt})(commonjsGlobal,Xe)})(alea$3);var aleaExports$1=alea$3.exports,xor128$3={exports:{}};xor128$3.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this,at="";ot.x=0,ot.y=0,ot.z=0,ot.w=0,ot.next=function(){var ut=ot.x^ot.x<<11;return ot.x=ot.y,ot.y=ot.z,ot.z=ot.w,ot.w^=ot.w>>>19^ut^ut>>>8},it===(it|0)?ot.x=it:at+=it;for(var lt=0;lt<at.length+64;lt++)ot.x^=at.charCodeAt(lt)|0,ot.next()}function st(it,ot){return ot.x=it.x,ot.y=it.y,ot.z=it.z,ot.w=it.w,ot}function rt(it,ot){var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(typeof lt=="object"&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.xor128=rt})(commonjsGlobal,Xe)})(xor128$3);var xor128Exports$1=xor128$3.exports,xorwow$3={exports:{}};xorwow$3.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this,at="";ot.next=function(){var ut=ot.x^ot.x>>>2;return ot.x=ot.y,ot.y=ot.z,ot.z=ot.w,ot.w=ot.v,(ot.d=ot.d+362437|0)+(ot.v=ot.v^ot.v<<4^(ut^ut<<1))|0},ot.x=0,ot.y=0,ot.z=0,ot.w=0,ot.v=0,it===(it|0)?ot.x=it:at+=it;for(var lt=0;lt<at.length+64;lt++)ot.x^=at.charCodeAt(lt)|0,lt==at.length&&(ot.d=ot.x<<10^ot.x>>>4),ot.next()}function st(it,ot){return ot.x=it.x,ot.y=it.y,ot.z=it.z,ot.w=it.w,ot.v=it.v,ot.d=it.d,ot}function rt(it,ot){var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(typeof lt=="object"&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.xorwow=rt})(commonjsGlobal,Xe)})(xorwow$3);var xorwowExports$1=xorwow$3.exports,xorshift7$3={exports:{}};xorshift7$3.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this;ot.next=function(){var lt=ot.x,ut=ot.i,ht,pt;return ht=lt[ut],ht^=ht>>>7,pt=ht^ht<<24,ht=lt[ut+1&7],pt^=ht^ht>>>10,ht=lt[ut+3&7],pt^=ht^ht>>>3,ht=lt[ut+4&7],pt^=ht^ht<<7,ht=lt[ut+7&7],ht=ht^ht<<13,pt^=ht^ht<<9,lt[ut]=pt,ot.i=ut+1&7,pt};function at(lt,ut){var ht,pt=[];if(ut===(ut|0))pt[0]=ut;else for(ut=""+ut,ht=0;ht<ut.length;++ht)pt[ht&7]=pt[ht&7]<<15^ut.charCodeAt(ht)+pt[ht+1&7]<<13;for(;pt.length<8;)pt.push(0);for(ht=0;ht<8&&pt[ht]===0;++ht);for(ht==8?pt[7]=-1:pt[ht],lt.x=pt,lt.i=0,ht=256;ht>0;--ht)lt.next()}at(ot,it)}function st(it,ot){return ot.x=it.x.slice(),ot.i=it.i,ot}function rt(it,ot){it==null&&(it=+new Date);var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(lt.x&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.xorshift7=rt})(commonjsGlobal,Xe)})(xorshift7$3);var xorshift7Exports$1=xorshift7$3.exports,xor4096$3={exports:{}};xor4096$3.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this;ot.next=function(){var lt=ot.w,ut=ot.X,ht=ot.i,pt,ft;return ot.w=lt=lt+1640531527|0,ft=ut[ht+34&127],pt=ut[ht=ht+1&127],ft^=ft<<13,pt^=pt<<17,ft^=ft>>>15,pt^=pt>>>12,ft=ut[ht]=ft^pt,ot.i=ht,ft+(lt^lt>>>16)|0};function at(lt,ut){var ht,pt,ft,xt,vt,At=[],Et=128;for(ut===(ut|0)?(pt=ut,ut=null):(ut=ut+"\0",pt=0,Et=Math.max(Et,ut.length)),ft=0,xt=-32;xt<Et;++xt)ut&&(pt^=ut.charCodeAt((xt+32)%ut.length)),xt===0&&(vt=pt),pt^=pt<<10,pt^=pt>>>15,pt^=pt<<4,pt^=pt>>>13,xt>=0&&(vt=vt+1640531527|0,ht=At[xt&127]^=pt+vt,ft=ht==0?ft+1:0);for(ft>=128&&(At[(ut&&ut.length||0)&127]=-1),ft=127,xt=512;xt>0;--xt)pt=At[ft+34&127],ht=At[ft=ft+1&127],pt^=pt<<13,ht^=ht<<17,pt^=pt>>>15,ht^=ht>>>12,At[ft]=pt^ht;lt.w=vt,lt.X=At,lt.i=ft}at(ot,it)}function st(it,ot){return ot.i=it.i,ot.w=it.w,ot.X=it.X.slice(),ot}function rt(it,ot){it==null&&(it=+new Date);var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(lt.X&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.xor4096=rt})(commonjsGlobal,Xe)})(xor4096$3);var xor4096Exports$1=xor4096$3.exports,tychei$3={exports:{}};tychei$3.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this,at="";ot.next=function(){var ut=ot.b,ht=ot.c,pt=ot.d,ft=ot.a;return ut=ut<<25^ut>>>7^ht,ht=ht-pt|0,pt=pt<<24^pt>>>8^ft,ft=ft-ut|0,ot.b=ut=ut<<20^ut>>>12^ht,ot.c=ht=ht-pt|0,ot.d=pt<<16^ht>>>16^ft,ot.a=ft-ut|0},ot.a=0,ot.b=0,ot.c=-1640531527,ot.d=1367130551,it===Math.floor(it)?(ot.a=it/4294967296|0,ot.b=it|0):at+=it;for(var lt=0;lt<at.length+20;lt++)ot.b^=at.charCodeAt(lt)|0,ot.next()}function st(it,ot){return ot.a=it.a,ot.b=it.b,ot.c=it.c,ot.d=it.d,ot}function rt(it,ot){var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(typeof lt=="object"&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.tychei=rt})(commonjsGlobal,Xe)})(tychei$3);var tycheiExports$1=tychei$3.exports,seedrandom$2={exports:{}};(function(Xe){(function(Ke,Ye){var Je=(0,eval)("this"),tt=256,st=6,rt=52,it="random",ot=Ye.pow(tt,st),at=Ye.pow(2,rt),lt=at*2,ut=tt-1,ht;function pt(_t,Ct,Tt){var St=[];Ct=Ct==!0?{entropy:!0}:Ct||{};var Rt=At(vt(Ct.entropy?[_t,wt(Ke)]:_t??Et(),3),St),Nt=new ft(St),Pt=function(){for(var Bt=Nt.g(st),Lt=ot,zt=0;Bt<at;)Bt=(Bt+zt)*tt,Lt*=tt,zt=Nt.g(1);for(;Bt>=lt;)Bt/=2,Lt/=2,zt>>>=1;return(Bt+zt)/Lt};return Pt.int32=function(){return Nt.g(4)|0},Pt.quick=function(){return Nt.g(4)/4294967296},Pt.double=Pt,At(wt(Nt.S),Ke),(Ct.pass||Tt||function(Bt,Lt,zt,Dt){return Dt&&(Dt.S&&xt(Dt,Nt),Bt.state=function(){return xt(Nt,{})}),zt?(Ye[it]=Bt,Lt):Bt})(Pt,Rt,"global"in Ct?Ct.global:this==Ye,Ct.state)}Ye["seed"+it]=pt;function ft(_t){var Ct,Tt=_t.length,St=this,Rt=0,Nt=St.i=St.j=0,Pt=St.S=[];for(Tt||(_t=[Tt++]);Rt<tt;)Pt[Rt]=Rt++;for(Rt=0;Rt<tt;Rt++)Pt[Rt]=Pt[Nt=ut&Nt+_t[Rt%Tt]+(Ct=Pt[Rt])],Pt[Nt]=Ct;(St.g=function(Bt){for(var Lt,zt=0,Dt=St.i,Vt=St.j,Gt=St.S;Bt--;)Lt=Gt[Dt=ut&Dt+1],zt=zt*tt+Gt[ut&(Gt[Dt]=Gt[Vt=ut&Vt+Lt])+(Gt[Vt]=Lt)];return St.i=Dt,St.j=Vt,zt})(tt)}function xt(_t,Ct){return Ct.i=_t.i,Ct.j=_t.j,Ct.S=_t.S.slice(),Ct}function vt(_t,Ct){var Tt=[],St=typeof _t,Rt;if(Ct&&St=="object")for(Rt in _t)try{Tt.push(vt(_t[Rt],Ct-1))}catch{}return Tt.length?Tt:St=="string"?_t:_t+"\0"}function At(_t,Ct){for(var Tt=_t+"",St,Rt=0;Rt<Tt.length;)Ct[ut&Rt]=ut&(St^=Ct[ut&Rt]*19)+Tt.charCodeAt(Rt++);return wt(Ct)}function Et(){try{var _t;return ht&&(_t=ht.randomBytes)?_t=_t(tt):(_t=new Uint8Array(tt),(Je.crypto||Je.msCrypto).getRandomValues(_t)),wt(_t)}catch{var Ct=Je.navigator,Tt=Ct&&Ct.plugins;return[+new Date,Je,Tt,Je.screen,wt(Ke)]}}function wt(_t){return String.fromCharCode.apply(0,_t)}if(At(Ye.random(),Ke),Xe.exports){Xe.exports=pt;try{ht=require$$0$1}catch{}}})([],Math)})(seedrandom$2);var seedrandomExports$1=seedrandom$2.exports,alea$2=aleaExports$1,xor128$2=xor128Exports$1,xorwow$2=xorwowExports$1,xorshift7$2=xorshift7Exports$1,xor4096$2=xor4096Exports$1,tychei$2=tycheiExports$1,sr$1=seedrandomExports$1;sr$1.alea=alea$2;sr$1.xor128=xor128$2;sr$1.xorwow=xorwow$2;sr$1.xorshift7=xorshift7$2;sr$1.xor4096=xor4096$2;sr$1.tychei=tychei$2;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ZipMismatchMode;(function(Xe){Xe[Xe.FAIL=0]="FAIL",Xe[Xe.SHORTEST=1]="SHORTEST",Xe[Xe.LONGEST=2]="LONGEST"})(ZipMismatchMode||(ZipMismatchMode={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function assertNotComplex$1(Xe,Ke){Array.isArray(Xe)||(Xe=[Xe]),Xe.forEach(Ye=>{Ye!=null&&assert$2(Ye.dtype!=="complex64",()=>`${Ke} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const whereImpl$1=whereImpl$2;class MathBackendCPU extends KernelBackend{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new DataStorage(this,engine())}write(Ke,Ye,Je){this.firstUse&&(this.firstUse=!1,env().get("IS_NODE")&&warn$1(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));const tt={};return this.data.set(tt,{values:Ke,dtype:Je,refCount:1}),tt}makeTensorInfo(Ke,Ye,Je){let tt;if(Ye==="string"&&Je!=null&&Je.length>0&&isString$2(Je[0])){const st=Je.map(rt=>encodeString(rt));tt=this.write(st,Ke,Ye)}else tt=this.write(Je,Ke,Ye);return{dataId:tt,shape:Ke,dtype:Ye}}incRef(Ke){const Ye=this.data.get(Ke);Ye.refCount++}decRef(Ke){if(this.data.has(Ke)){const Ye=this.data.get(Ke);Ye.refCount--}}move(Ke,Ye,Je,tt){this.data.set(Ke,{values:Ye,dtype:tt,refCount:1})}numDataIds(){return this.data.numDataIds()}async read(Ke){return this.readSync(Ke)}readSync(Ke){const{dtype:Ye,complexTensorInfos:Je}=this.data.get(Ke);if(Ye==="complex64"){const tt=this.readSync(Je.real.dataId),st=this.readSync(Je.imag.dataId);return mergeRealAndImagArrays(tt,st)}return this.data.get(Ke).values}bufferSync(Ke){const Ye=this.readSync(Ke.dataId);let Je=Ye;if(Ke.dtype==="string")try{Je=Ye.map(tt=>decodeString(tt))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return buffer$1(Ke.shape,Ke.dtype,Je)}makeOutput(Ke,Ye,Je){const tt=this.write(Ke,Ye,Je);return engine().makeTensorFromDataId(tt,Ye,Je,this)}disposeData(Ke){if(this.data.has(Ke)){const{complexTensorInfos:Ye}=this.data.get(Ke);Ye!=null&&(this.disposeData(Ye.real.dataId),this.disposeData(Ye.imag.dataId)),this.data.delete(Ke)}}disposeIntermediateTensorInfo(Ke){const Ye=Ke.dataId;if(this.data.has(Ye)){const Je=this.data.get(Ye);Je.refCount--,Je.refCount<1&&this.disposeData(Ye)}}async time(Ke){const Ye=now$1();return Ke(),{kernelMs:now$1()-Ye}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(Ke){assertNotComplex$1([Ke],"where");const Ye=this.readSync(Ke.dataId);return whereImpl$1(Ke.shape,Ye)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function simpleAbsImpl(Xe){const Ke=new Float32Array(Xe.length);for(let Ye=0;Ye<Xe.length;++Ye)Ke[Ye]=Math.abs(Xe[Ye]);return Ke}const abs$2=Xe=>{const{x:Ke}=Xe.inputs,Ye=Xe.backend;assertNotComplex$1(Ke,"abs");let Je=new Float32Array(sizeFromShape(Ke.shape));const tt=Ye.data.get(Ke.dataId).values;return Je=simpleAbsImpl(tt),Ye.makeOutput(Je,Ke.shape,"float32")},absConfig$1={kernelName:Abs$1,backendName:"cpu",kernelFunc:abs$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createSimpleBinaryKernelImpl(Xe){return(Ke,Ye,Je,tt,st)=>{const rt=assertAndGetBroadcastShape(Ke,Ye),it=rt.length,ot=computeStrides(rt),at=sizeFromShape(rt),lt=getTypedArrayFromDType(st,at),ut=Ke.length,ht=Ye.length,pt=computeStrides(Ke),ft=computeStrides(Ye),xt=getBroadcastDims$1(Ke,rt),vt=getBroadcastDims$1(Ye,rt);if(xt.length+vt.length===0)for(let At=0;At<lt.length;++At)lt[At]=Xe(Je[At%Je.length],tt[At%tt.length]);else for(let At=0;At<lt.length;++At){const Et=indexToLoc(At,it,ot),wt=Et.slice(-ut);xt.forEach(St=>wt[St]=0);const _t=locToIndex(wt,ut,pt),Ct=Et.slice(-ht);vt.forEach(St=>Ct[St]=0);const Tt=locToIndex(Ct,ht,ft);lt[At]=Xe(Je[_t],tt[Tt])}return[lt,rt]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function complex$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{real:Je,imag:tt}=Ke,st=Ye.data.get(Je.dataId).values,rt=Ye.data.get(tt.dataId).values,it=Ye.makeTensorInfo(Je.shape,"complex64"),ot=Ye.data.get(it.dataId);return ot.complexTensorInfos={real:Ye.makeTensorInfo(Je.shape,"float32",st),imag:Ye.makeTensorInfo(tt.shape,"float32",rt)},it}const complexConfig$1={kernelName:Complex,backendName:"cpu",kernelFunc:complex$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zeros(Xe,Ke,Ye="float32"){if(Ye==="complex64"){const tt=zeros(Xe,Ke,"float32"),st=zeros(Xe,Ke,"float32");return complex$1({inputs:{real:tt,imag:st},backend:Xe})}const Je=makeZerosTypedArray(sizeFromShape(Ke),Ye);return Xe.makeTensorInfo(Ke,Ye,Je)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function identity$4(Xe){const{inputs:Ke,backend:Ye}=Xe,{x:Je}=Ke;return Ye.incRef(Je.dataId),{dataId:Je.dataId,shape:Je.shape,dtype:Je.dtype}}const identityConfig$1={kernelName:Identity$1,backendName:"cpu",kernelFunc:identity$4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function real$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{input:Je}=Ke,tt=Ye.data.get(Je.dataId).complexTensorInfos.real,st=Ye.data.get(tt.dataId).values;return Ye.makeTensorInfo(tt.shape,tt.dtype,st)}const realConfig$1={kernelName:Real,backendName:"cpu",kernelFunc:real$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cast$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{dtype:st}=Je;if(st==="complex64"){if(tt.dtype==="complex64")return identity$4({inputs:{x:tt},backend:Ye});const rt=zeros(Ye,tt.shape,tt.dtype),it=cast$1({inputs:{x:tt},backend:Ye,attrs:{dtype:"float32"}}),ot=complex$1({inputs:{real:it,imag:rt},backend:Ye});return Ye.disposeIntermediateTensorInfo(rt),Ye.disposeIntermediateTensorInfo(it),ot}if(tt.dtype==="complex64"){const rt=real$1({inputs:{input:tt},backend:Ye}),it=cast$1({inputs:{x:rt},backend:Ye,attrs:{dtype:st}});return Ye.disposeIntermediateTensorInfo(rt),it}if(!hasEncodingLoss(tt.dtype,st)){const rt=identity$4({inputs:{x:tt},backend:Ye});return{dataId:rt.dataId,shape:rt.shape,dtype:st}}if(st==="int32"){const rt=Ye.data.get(tt.dataId).values,it=Int32Array.from(rt);return Ye.makeTensorInfo(tt.shape,"int32",it)}if(st==="bool"){const rt=Ye.data.get(tt.dataId).values,it=toTypedArray([0],tt.dtype),[ot,at]=createSimpleBinaryKernelImpl((lt,ut)=>lt!==ut?1:0)(tt.shape,[],rt,it,"bool");return Ye.makeTensorInfo(at,"bool",ot)}throw new Error(`Error in Cast: failed to cast ${tt.dtype} to ${st}`)}const castConfig$1={kernelName:Cast,backendName:"cpu",kernelFunc:cast$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function binaryKernelFunc$1(Xe,Ke,Ye,Je){return Ye==null?({inputs:tt,backend:st})=>{const{a:rt,b:it}=tt,ot=st;assertNotComplex$1([rt,it],Xe);const at=ot.data.get(rt.dataId).values,lt=ot.data.get(it.dataId).values,ut=Je||rt.dtype,[ht,pt]=Ke(rt.shape,it.shape,at,lt,ut);return ot.makeTensorInfo(pt,ut,ht)}:({inputs:tt,backend:st})=>{const{a:rt,b:it}=tt,ot=st;if(rt.dtype==="complex64"||it.dtype==="complex64"){const at=cast$1({inputs:{x:rt},backend:ot,attrs:{dtype:"complex64"}}),lt=ot.data.get(at.dataId),ut=lt.complexTensorInfos.real,ht=lt.complexTensorInfos.imag,pt=ot.data.get(ut.dataId).values,ft=ot.data.get(ht.dataId).values,xt=cast$1({inputs:{x:it},backend:ot,attrs:{dtype:"complex64"}}),vt=ot.data.get(xt.dataId),At=vt.complexTensorInfos.real,Et=vt.complexTensorInfos.imag,wt=ot.data.get(At.dataId).values,_t=ot.data.get(Et.dataId).values,[Ct,Tt,St]=Ye(rt.shape,it.shape,pt,ft,wt,_t),Rt=ot.makeTensorInfo(St,"float32",Ct),Nt=ot.makeTensorInfo(St,"float32",Tt),Pt=complex$1({inputs:{real:Rt,imag:Nt},backend:ot});return ot.disposeIntermediateTensorInfo(at),ot.disposeIntermediateTensorInfo(xt),ot.disposeIntermediateTensorInfo(Rt),ot.disposeIntermediateTensorInfo(Nt),Pt}else{const at=ot.data.get(rt.dataId).values,lt=ot.data.get(it.dataId).values,ut=Je||rt.dtype,[ht,pt]=Ke(rt.shape,it.shape,at,lt,ut);return ot.makeTensorInfo(pt,ut,ht)}}}function createComplexBinaryKernelImpl(Xe){return(Ke,Ye,Je,tt,st,rt)=>{const it=assertAndGetBroadcastShape(Ke,Ye),ot=sizeFromShape(it),at=it.length,lt=computeStrides(it),ut=getTypedArrayFromDType("float32",ot),ht=getTypedArrayFromDType("float32",ot),pt=getBroadcastDims$1(Ke,it),ft=getBroadcastDims$1(Ye,it),xt=mergeRealAndImagArrays(Je,tt),vt=mergeRealAndImagArrays(st,rt),At=Ke.length,Et=computeStrides(Ke),wt=Ye.length,_t=computeStrides(Ye);if(pt.length+ft.length===0)for(let Ct=0;Ct<ut.length;Ct++){const Tt=Ct%xt.length,St=Ct%vt.length,Rt=Xe(xt[Tt*2],xt[Tt*2+1],vt[St*2],vt[St*2+1]);ut[Ct]=Rt.real,ht[Ct]=Rt.imag}else for(let Ct=0;Ct<ut.length;Ct++){const Tt=indexToLoc(Ct,at,lt),St=Tt.slice(-At);pt.forEach(Lt=>St[Lt]=0);const Rt=locToIndex(St,At,Et),Nt=Tt.slice(-wt);ft.forEach(Lt=>Nt[Lt]=0);const Pt=locToIndex(Nt,wt,_t),Bt=Xe(xt[Rt*2],xt[Rt*2+1],vt[Pt*2],vt[Pt*2+1]);ut[Ct]=Bt.real,ht[Ct]=Bt.imag}return[ut,ht,it]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const addImpl=createSimpleBinaryKernelImpl(((Xe,Ke)=>Xe+Ke)),addComplexImpl=createComplexBinaryKernelImpl(((Xe,Ke,Ye,Je)=>({real:Xe+Ye,imag:Ke+Je}))),add=binaryKernelFunc$1(Add$2,addImpl,addComplexImpl),addConfig$1={kernelName:Add$2,backendName:"cpu",kernelFunc:add};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bincountImpl(Xe,Ke,Ye,Je,tt){const st=sizeFromShape(Je),rt=makeZerosTypedArray(tt,Ye);for(let it=0;it<Xe.length;it++){const ot=Xe[it];if(ot<0)throw new Error("Input x must be non-negative!");ot>=tt||(st>0?rt[ot]+=Ke[it]:rt[ot]+=1)}return rt}function bincountReduceImpl(Xe,Ke,Ye,Je=!1){const tt=Xe.shape[0],st=Xe.shape[1],rt=buffer$1([tt,Ye],Ke.dtype);for(let it=0;it<tt;it++)for(let ot=0;ot<st;ot++){const at=Xe.get(it,ot);if(at<0)throw new Error("Input x must be non-negative!");at>=Ye||(Je?rt.set(1,it,at):Ke.size>0?rt.set(rt.get(it,at)+Ke.get(it,ot),it,at):rt.set(rt.get(it,at)+1,it,at))}return rt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createSimpleUnaryImpl(Xe){return(Ke,Ye,Je)=>{const tt=getTypedArrayFromDType(Ye,Ke.length);for(let st=0;st<Ke.length;++st)tt[st]=Xe(Ke[st],Je);return tt}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unaryKernelFunc$1(Xe,Ke,Ye){return({inputs:Je,attrs:tt,backend:st})=>{const{x:rt}=Je;if(assertNotComplex$1(rt,Xe),rt.dtype==="string"||Ye==="string")throw new Error("unaryKernelFunc does not support string input/output");const it=st,ot=it.data.get(rt.dataId).values,at=sizeFromShape(rt.shape),lt=Ye||rt.dtype,ut=getArrayFromDType(lt,at);for(let ht=0;ht<at;++ht)ut[ht]=Ke(ot[ht],tt);return it.makeTensorInfo(rt.shape,lt,ut)}}function unaryKernelFuncFromImpl(Xe,Ke,Ye){return({inputs:Je,attrs:tt,backend:st})=>{const{x:rt}=Je;if(assertNotComplex$1(rt,Xe),rt.dtype==="string"||Ye==="string")throw new Error("unaryKernelFunc does not support string input/output");const it=st,ot=it.data.get(rt.dataId).values,at=rt.dtype,lt=Ke(ot,at,tt);return it.makeTensorInfo(rt.shape,at,lt)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ceilImpl=createSimpleUnaryImpl(Xe=>Math.ceil(Xe)),ceil$1=unaryKernelFuncFromImpl(Ceil,ceilImpl),ceilConfig$1={kernelName:Ceil,backendName:"cpu",kernelFunc:ceil$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concatImpl$1(Xe,Ke,Ye,Je){const tt=getArrayFromDType(Ye,sizeFromShape(Ke));if(Je&&Ye!=="string"){let st=0;Xe.forEach(rt=>{const it=sizeFromShape(rt.shape);tt.set(rt.vals,st),st+=it})}else{let st=0;Xe.forEach(rt=>{const it=Ye==="string"?fromUint8ToStringArray(rt.vals):rt.vals;let ot=0;for(let at=0;at<rt.shape[0];++at){const lt=at*Ke[1]+st;for(let ut=0;ut<rt.shape[1];++ut)tt[lt+ut]=it[ot++]}st+=rt.shape[1]})}return tt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expImpl=createSimpleUnaryImpl(Xe=>Math.exp(Xe)),exp$1=unaryKernelFuncFromImpl(Exp,expImpl),expConfig$1={kernelName:Exp,backendName:"cpu",kernelFunc:exp$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expm1Impl=createSimpleUnaryImpl(Xe=>Math.expm1(Xe)),expm1$1=unaryKernelFuncFromImpl(Expm1,expm1Impl),expm1Config$1={kernelName:Expm1,backendName:"cpu",kernelFunc:expm1$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorImpl=createSimpleUnaryImpl(Xe=>Math.floor(Xe)),floor$2=unaryKernelFuncFromImpl(Floor,floorImpl),floorConfig$1={kernelName:Floor,backendName:"cpu",kernelFunc:floor$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherV2Impl(Xe,Ke,Ye){const Je=buffer$1(Ye,Xe.dtype);for(let tt=0;tt<Je.size;++tt){const rt=Je.indexToLoc(tt).slice(),it=rt[0],ot=rt[2],at=Ke.locToIndex([it,ot]);rt[2]=Ke.values[at];const lt=Xe.locToIndex(rt);Je.values[tt]=Xe.values[lt]}return Je}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const greaterImpl=createSimpleBinaryKernelImpl((Xe,Ke)=>Xe>Ke?1:0),greater$1=binaryKernelFunc$1(Greater,greaterImpl,null,"bool"),greaterConfig$1={kernelName:Greater,backendName:"cpu",kernelFunc:greater$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lessImpl=createSimpleBinaryKernelImpl((Xe,Ke)=>Xe<Ke?1:0),less$1=binaryKernelFunc$1(Less,lessImpl,null,"bool"),lessConfig$1={kernelName:Less,backendName:"cpu",kernelFunc:less$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function linSpaceImpl(Xe,Ke,Ye){const Je=(Ke-Xe)/(Ye-1),tt=makeZerosTypedArray(Ye,"float32");tt[0]=Xe;for(let st=1;st<tt.length;st++)tt[st]=tt[st-1]+Je;return tt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logImpl=createSimpleUnaryImpl(Xe=>Math.log(Xe)),log$3=unaryKernelFuncFromImpl(Log,logImpl),logConfig$1={kernelName:Log,backendName:"cpu",kernelFunc:log$3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxImpl$1(Xe,Ke,Ye,Je){const tt=getTypedArrayFromDType(Je,sizeFromShape(Ye));for(let st=0;st<tt.length;++st){const rt=st*Ke;let it=Xe[rt];for(let ot=0;ot<Ke;++ot){const at=Xe[rt+ot];at>it&&(it=at)}tt[st]=it}return tt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maximumImpl=createSimpleBinaryKernelImpl(((Xe,Ke)=>Math.max(Xe,Ke))),maximum$1=binaryKernelFunc$1(Maximum$1,maximumImpl),maximumConfig$1={kernelName:Maximum$1,backendName:"cpu",kernelFunc:maximum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const minimumImpl=createSimpleBinaryKernelImpl(((Xe,Ke)=>Math.min(Xe,Ke))),minimum$1=binaryKernelFunc$1(Minimum$1,minimumImpl),minimumConfig$1={kernelName:Minimum$1,backendName:"cpu",kernelFunc:minimum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const multiplyImpl=createSimpleBinaryKernelImpl(((Xe,Ke)=>Xe*Ke)),multiplyComplexImpl=createComplexBinaryKernelImpl(((Xe,Ke,Ye,Je)=>({real:Xe*Ye-Ke*Je,imag:Xe*Je+Ke*Ye}))),multiply$2=binaryKernelFunc$1(Multiply$2,multiplyImpl,multiplyComplexImpl),multiplyConfig$1={kernelName:Multiply$2,backendName:"cpu",kernelFunc:multiply$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function negImpl(Xe,Ke,Ye){const Je=createScalarValue(-1,Ye);return multiplyImpl([],Ke,Je,Xe,Ye)}function neg$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{x:Je}=Ke;assertNotComplex$1(Je,"neg");const tt=Ye.data.get(Je.dataId).values,[st,rt]=negImpl(tt,Je.shape,Je.dtype);return Ye.makeTensorInfo(rt,Je.dtype,st)}const negConfig$1={kernelName:Neg,backendName:"cpu",kernelFunc:neg$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const notEqualImpl=createSimpleBinaryKernelImpl(((Xe,Ke)=>Xe!==Ke?1:0)),notEqual$1=binaryKernelFunc$1(NotEqual,notEqualImpl,null,"bool"),notEqualConfig$1={kernelName:NotEqual,backendName:"cpu",kernelFunc:notEqual$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transposeImpl$1(Xe,Ke,Ye,Je,tt){const st=Ke.length,rt=sizeFromShape(Ke),it=computeStrides(Ke),ot=computeStrides(tt),at=getTypedArrayFromDType(Ye,sizeFromShape(tt));for(let lt=0;lt<rt;++lt){const ut=indexToLoc(lt,st,it),ht=new Array(ut.length);for(let ft=0;ft<ht.length;ft++)ht[ft]=ut[Je[ft]];const pt=locToIndex(ht,st,ot);at[pt]=Xe[lt]}return at}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transpose$1(Xe){const{inputs:Ke,attrs:Ye,backend:Je}=Xe,{x:tt}=Ke,{perm:st}=Ye;assertNotComplex$1(tt,"transpose");const rt=tt.shape.length,it=new Array(rt);for(let ut=0;ut<it.length;ut++)it[ut]=tt.shape[st[ut]];const ot=Je.data.get(tt.dataId).values,at=transposeImpl$1(ot,tt.shape,tt.dtype,st,it);return{dataId:Je.write(at,it,tt.dtype),shape:it,dtype:tt.dtype}}const transposeConfig$1={kernelName:Transpose,backendName:"cpu",kernelFunc:transpose$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prodImpl(Xe,Ke,Ye,Je){const[tt,st]=computeOutAndReduceShapes(Xe,Je),rt=upcastType(Ke,"int32"),it=makeZerosTypedArray(sizeFromShape(tt),rt),ot=sizeFromShape(st);for(let at=0;at<it.length;++at){const lt=at*ot;let ut=1;for(let ht=0;ht<ot;++ht)ut*=Ye[lt+ht];it[at]=ut}return{outVals:it,outShape:tt,outDtype:rt}}function prod$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st,keepDims:rt}=Je;assertNotComplex$1(tt,"prod");const it=tt.shape.length,ot=parseAxisParam(st,tt.shape),at=getAxesPermutation(ot,it);let lt=ot,ut=tt;const ht=[];at!=null&&(ut=transpose$1({inputs:{x:tt},backend:Ye,attrs:{perm:at}}),ht.push(ut),lt=getInnerMostAxes(lt.length,it));const pt=Ye.data.get(ut.dataId).values,{outVals:ft,outShape:xt,outDtype:vt}=prodImpl(ut.shape,ut.dtype,pt,lt);let At=xt;return rt&&(At=expandShapeToKeepDim(xt,ot)),ht.forEach(Et=>Ye.disposeIntermediateTensorInfo(Et)),Ye.makeTensorInfo(At,vt,ft)}const prodConfig$1={kernelName:Prod,backendName:"cpu",kernelFunc:prod$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rangeImpl(Xe,Ke,Ye,Je){const tt=Xe===Ke,st=Xe<Ke&&Ye<0,rt=Ke<Xe&&Ye>1;if(tt||st||rt)return makeZerosTypedArray(0,Je);const it=Math.abs(Math.ceil((Ke-Xe)/Ye)),ot=makeZerosTypedArray(it,Je);Ke<Xe&&Ye===1&&(Ye=-1),ot[0]=Xe;for(let at=1;at<ot.length;at++)ot[at]=ot[at-1]+Ye;return ot}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rsqrtImpl=createSimpleUnaryImpl(Xe=>1/Math.sqrt(Xe)),rsqrt$1=unaryKernelFuncFromImpl(Rsqrt,rsqrtImpl),rsqrtConfig$1={kernelName:Rsqrt,backendName:"cpu",kernelFunc:rsqrt$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sliceImpl(Xe,Ke,Ye,Je,tt){const st=isSliceContinous(Je,Ke,Ye),rt=sizeFromShape(Ye),it=computeStrides(Je);if(st){const ut=computeFlatOffset(Ke,it);return tt==="string"?Xe.slice(ut,ut+rt):Xe.subarray(ut,ut+rt)}const ot=tt==="string"?fromUint8ToStringArray(Xe):Xe,at=buffer$1(Je,tt,ot),lt=buffer$1(Ye,tt);for(let ut=0;ut<lt.size;++ut){const ht=lt.indexToLoc(ut),pt=ht.map((ft,xt)=>ft+Ke[xt]);lt.set(at.get(...pt),...ht)}return tt==="string"?fromStringArrayToUint8(lt.values):lt.values}function slice$3(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{begin:st,size:rt}=Je;assertNotComplex$1(tt,"slice");const[it,ot]=parseSliceParams(tt,st,rt);assertParamsValid(tt,it,ot);const at=Ye.data.get(tt.dataId).values,lt=sliceImpl(at,it,ot,tt.shape,tt.dtype);return Ye.makeTensorInfo(ot,tt.dtype,lt)}const sliceConfig$1={kernelName:Slice,backendName:"cpu",kernelFunc:slice$3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squaredDifferenceImpl=createSimpleBinaryKernelImpl(((Xe,Ke)=>{const Ye=Xe-Ke;return Ye*Ye})),squaredDifference$1=binaryKernelFunc$1(SquaredDifference,squaredDifferenceImpl),squaredDifferenceConfig$1={kernelName:SquaredDifference,backendName:"cpu",kernelFunc:squaredDifference$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSliceImpl(Xe,Ke,Ye,Je){const tt=buffer$1(Xe,Ke.dtype);for(let st=0;st<tt.size;st++){const rt=tt.indexToLoc(st),it=new Array(rt.length);for(let ot=0;ot<it.length;ot++)it[ot]=rt[ot]*Ye[ot]+Je[ot];tt.set(Ke.get(...it),...rt)}return tt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const subImpl=createSimpleBinaryKernelImpl(((Xe,Ke)=>Xe-Ke)),subComplexImpl=createComplexBinaryKernelImpl(((Xe,Ke,Ye,Je)=>({real:Xe-Ye,imag:Ke-Je}))),sub$1=binaryKernelFunc$1(Sub,subImpl,subComplexImpl),subConfig$1={kernelName:Sub,backendName:"cpu",kernelFunc:sub$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tileImpl(Xe,Ke){const Ye=new Array(Xe.rank);for(let tt=0;tt<Ye.length;tt++)Ye[tt]=Xe.shape[tt]*Ke[tt];const Je=buffer$1(Ye,Xe.dtype);for(let tt=0;tt<Je.values.length;++tt){const st=Je.indexToLoc(tt),rt=new Array(Xe.rank);for(let ot=0;ot<rt.length;ot++)rt[ot]=st[ot]%Xe.shape[ot];const it=Xe.locToIndex(rt);Je.values[tt]=Xe.values[it]}return Je}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function topKImpl(Xe,Ke,Ye,Je,tt){const st=Ke[Ke.length-1],[rt,it]=[Xe.length/st,st],ot=getTypedArrayFromDType(Ye,rt*Je),at=getTypedArrayFromDType("int32",rt*Je);for(let ut=0;ut<rt;ut++){const ht=ut*it,pt=Xe.subarray(ht,ht+it),ft=[];for(let Et=0;Et<pt.length;Et++)ft.push({value:pt[Et],index:Et});ft.sort((Et,wt)=>wt.value-Et.value);const xt=ut*Je,vt=ot.subarray(xt,xt+Je),At=at.subarray(xt,xt+Je);for(let Et=0;Et<Je;Et++)vt[Et]=ft[Et].value,At[Et]=ft[Et].index}const lt=Ke.slice();return lt[lt.length-1]=Je,[buffer$1(lt,Ye,ot),buffer$1(lt,"int32",at)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uniqueImpl(Xe,Ke,Ye,Je){const tt=parseAxisParam(Ke,Ye)[0],st=[1,Ye[0],1];for(let ft=0;ft<tt;ft++)st[0]*=Ye[ft];st[1]=Ye[tt];for(let ft=tt+1;ft<Ye.length;ft++)st[2]*=Ye[ft];const rt={},it=new Int32Array(Ye[tt]),ot=new TensorBuffer(st,Je,Xe),at=[],lt=st[0]===1&&st[2]===1;for(let ft=0;ft<Ye[tt];ft++){let xt;if(lt)xt=Xe[ft].toString();else{const vt=[];for(let At=0;At<st[0];At++)for(let Et=0;Et<st[2];Et++)vt.push(ot.get(At,ft,Et));xt=vt.join(",")}if(rt[xt]!==void 0)it[ft]=rt[xt];else{const vt=Object.keys(rt).length;rt[xt]=vt,it[ft]=vt,at.push(ft)}}const ut=st.slice();ut[1]=Object.keys(rt).length;const ht=new TensorBuffer(ut,Je);at.forEach((ft,xt)=>{for(let vt=0;vt<st[0];vt++)for(let At=0;At<st[2];At++)ht.set(ot.get(vt,ft,At),vt,xt,At)});const pt=Ye.slice();return pt[tt]=ut[1],{outputValues:ht.values,outputShape:pt,indices:it}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const shared=Object.freeze(Object.defineProperty({__proto__:null,addImpl,bincountImpl,bincountReduceImpl,ceilImpl,concatImpl:concatImpl$1,expImpl,expm1Impl,floorImpl,gatherV2Impl,greaterImpl,lessImpl,linSpaceImpl,logImpl,maxImpl:maxImpl$1,maximumImpl,minimumImpl,multiplyImpl,negImpl,notEqualImpl,prodImpl,rangeImpl,rsqrtImpl,simpleAbsImpl,sliceImpl,squaredDifferenceImpl,stridedSliceImpl,subImpl,tileImpl,topKImpl,transposeImpl:transposeImpl$1,uniqueImpl},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */registerBackend("cpu",()=>new MathBackendCPU,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const elu$1=unaryKernelFunc$1(Elu$1,Xe=>Xe>=0?Xe:Math.exp(Xe)-1),eluConfig$1={kernelName:Elu$1,backendName:"cpu",kernelFunc:elu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function leakyRelu$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{alpha:st}=Je;assertNotComplex$1([tt],"leakyRelu");const rt=sizeFromShape(tt.shape),it=Ye.data.get(tt.dataId).values,ot=getTypedArrayFromDType("float32",rt);for(let at=0;at<it.length;at++)ot[at]=it[at]<0?st*it[at]:it[at];return Ye.makeTensorInfo(tt.shape,"float32",ot)}const leakyReluConfig$1={kernelName:LeakyRelu,backendName:"cpu",kernelFunc:leakyRelu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const preluImpl=createSimpleBinaryKernelImpl((Xe,Ke)=>Xe<0?Ke*Xe:Xe);function prelu$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{x:Je,alpha:tt}=Ke;assertNotComplex$1([Je,tt],"prelu");const st=Ye.data.get(Je.dataId).values,rt=Ye.data.get(tt.dataId).values,[it,ot]=preluImpl(Je.shape,tt.shape,st,rt,Je.dtype);return Ye.makeTensorInfo(ot,Je.dtype,it)}const preluConfig$1={kernelName:Prelu,backendName:"cpu",kernelFunc:prelu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const relu$1=unaryKernelFunc$1(Relu$1,Xe=>Math.max(0,Xe)),reluConfig$1={kernelName:Relu$1,backendName:"cpu",kernelFunc:relu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const relu6$1=unaryKernelFunc$1(Relu6$1,Xe=>Math.min(Math.max(0,Xe),6)),relu6Config$1={kernelName:Relu6$1,backendName:"cpu",kernelFunc:relu6$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function applyActivation(Xe,Ke,Ye,Je,tt){if(Ye==="linear")return identity$4({inputs:{x:Ke},backend:Xe});if(Ye==="relu")return relu$1({inputs:{x:Ke},backend:Xe});if(Ye==="elu")return elu$1({inputs:{x:Ke},backend:Xe});if(Ye==="relu6")return relu6$1({inputs:{x:Ke},backend:Xe});if(Ye==="prelu")return prelu$1({inputs:{x:Ke,alpha:Je},backend:Xe});if(Ye==="leakyrelu")return leakyRelu$1({inputs:{x:Ke},backend:Xe,attrs:{alpha:tt}});throw new Error(`Activation ${Ye} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reshape$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{shape:st}=Je,rt=sizeFromShape(tt.shape),it=inferFromImplicitShape(st,rt),ot=sizeFromShape(it);assert$2(rt===ot,()=>`The new shape (${it}) has ${ot} elements and the old shape (${tt.shape}) has ${rt} elements. The new shape and old shape must have the same number of elements.`),Ye.incRef(tt.dataId);const at=Ye.data.get(tt.dataId);if(at.complexTensorInfos!=null){const lt=at.complexTensorInfos.real,ut=at.complexTensorInfos.imag;lt.shape=it,ut.shape=it}return{dataId:tt.dataId,shape:it,dtype:tt.dtype}}const reshapeConfig$1={kernelName:Reshape$1,backendName:"cpu",kernelFunc:reshape$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchMatMul$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{a:tt,b:st}=Ke,{transposeA:rt,transposeB:it}=Je;assertNotComplex$1([tt,st],"matMul");const ot=tt.shape.length,at=st.shape.length,lt=rt?tt.shape[ot-2]:tt.shape[ot-1],ut=it?st.shape[at-1]:st.shape[at-2],ht=rt?tt.shape[ot-1]:tt.shape[ot-2],pt=it?st.shape[at-2]:st.shape[at-1],ft=tt.shape.slice(0,-2),xt=st.shape.slice(0,-2),vt=sizeFromShape(ft),At=sizeFromShape(xt),Et=vt===At||vt===1||At===1;assert$2(ot>=2&&at>=2&&Et,()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${ft}) and (${xt}).`);const _t=(vt>At?tt.shape.slice(0,-2):st.shape.slice(0,-2)).concat([ht,pt]);assert$2(lt===ut,()=>`Error in matMul: inner shapes (${lt}) and (${ut}) of Tensors with shapes ${tt.shape} and ${st.shape} and transposeA=${rt} and transposeB=${it} must match.`);const Ct=rt?[vt,lt,ht]:[vt,ht,lt],Tt=it?[At,pt,ut]:[At,ut,pt],St=reshape$1({inputs:{x:tt},backend:Ye,attrs:{shape:Ct}}),Rt=reshape$1({inputs:{x:st},backend:Ye,attrs:{shape:Tt}}),Nt=rt?St.shape[1]:St.shape[2],Pt=rt?St.shape[2]:St.shape[1],Bt=it?Rt.shape[1]:Rt.shape[2],Lt=Math.max(vt,At),zt=Ye.data.get(St.dataId).values,Dt=Ye.data.get(Rt.dataId).values,Vt=computeStrides(St.shape),Gt=computeStrides(Rt.shape),[Qt,jt,Ht]=rt?[Vt[0],1,Vt[1]]:[Vt[0],Vt[1],1],[Yt,Jt,Zt]=it?[1,Gt[1],Gt[0]]:[Gt[1],1,Gt[0]],nn=Pt*Bt,cn=buffer$1([Lt,Pt,Bt],St.dtype),an=cn.values,mn=Ye.blockSize;for(let dn=0;dn<Lt;dn++)for(let fn=0;fn<Pt;fn+=mn)for(let Sn=0;Sn<Bt;Sn+=mn)for(let Tn=0;Tn<Nt;Tn+=mn){const Nn=Math.min(fn+mn,Pt),gn=Math.min(Sn+mn,Bt),_n=Math.min(Tn+mn,Nt);for(let kn=fn;kn<Nn;kn++)for(let Wt=Sn;Wt<gn;Wt++){let sn=0;for(let hn=Tn;hn<_n;hn++){const En=Math.min(dn,vt-1)*Qt,An=Math.min(dn,At-1)*Zt,wn=zt[En+kn*jt+hn*Ht],Fn=Dt[hn*Yt+Wt*Jt+An];sn+=wn*Fn}an[dn*nn+(kn*Bt+Wt)]+=sn}}return Ye.disposeIntermediateTensorInfo(St),Ye.disposeIntermediateTensorInfo(Rt),Ye.makeTensorInfo(_t,cn.dtype,cn.values)}const batchMatMulConfig$1={kernelName:BatchMatMul,backendName:"cpu",kernelFunc:batchMatMul$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _fusedMatMul$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{a:tt,b:st,bias:rt,preluActivationWeights:it}=Ke,{transposeA:ot,transposeB:at,activation:lt,leakyreluAlpha:ut}=Je;let ht,pt,ft;const xt=[];ht=batchMatMul$1({inputs:{a:tt,b:st},attrs:{transposeA:ot,transposeB:at},backend:Ye}),rt&&(pt=add({inputs:{a:ht,b:rt},backend:Ye}),xt.push(ht),ht=pt),lt&&(ft=applyActivation(Ye,ht,lt,it,ut),xt.push(ht),ht=ft);for(const At of xt)Ye.disposeIntermediateTensorInfo(At);return ht}const _fusedMatMulConfig$1={kernelName:_FusedMatMul,backendName:"cpu",kernelFunc:_fusedMatMul$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acos$1=unaryKernelFunc$1(Acos,Xe=>Math.acos(Xe)),acosConfig$1={kernelName:Acos,backendName:"cpu",kernelFunc:acos$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acosh$1=unaryKernelFunc$1(Acosh,Xe=>Math.acosh(Xe)),acoshConfig$1={kernelName:Acosh,backendName:"cpu",kernelFunc:acosh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function addN$1(Xe){const{inputs:Ke,backend:Ye}=Xe,Je=Ke;assertNotComplex$1(Ke,"addN");const tt=Je.map(it=>Ye.data.get(it.dataId).values),st=buffer$1(Je[0].shape,Je[0].dtype),rt=st.values;for(let it=0;it<Je.length;it++){const ot=tt[it];for(let at=0;at<rt.length;at++)rt[at]+=ot[at]}return Ye.makeTensorInfo(st.shape,st.dtype,st.values)}const addNConfig$1={kernelName:AddN,backendName:"cpu",kernelFunc:addN$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function all$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st,keepDims:rt}=Je;assertNotComplex$1(tt,"all");const it=parseAxisParam(st,tt.shape);let ot=it;const at=getAxesPermutation(ot,tt.shape.length);let lt=tt;at!=null&&(lt=transpose$1({inputs:{x:tt},backend:Ye,attrs:{perm:at}}),ot=getInnerMostAxes(ot.length,tt.shape.length)),assertAxesAreInnerMostDims("all",ot,lt.shape.length);const[ut,ht]=computeOutAndReduceShapes(lt.shape,ot),pt=sizeFromShape(ht),ft=makeZerosTypedArray(sizeFromShape(ut),lt.dtype),xt=Ye.data.get(lt.dataId).values;for(let At=0;At<ft.length;++At){const Et=At*pt;let wt=xt[Et];for(let _t=0;_t<pt;++_t){const Ct=xt[Et+_t];wt=wt&&Ct}ft[At]=wt}at!=null&&Ye.disposeIntermediateTensorInfo(lt);const vt=Ye.makeTensorInfo(ut,lt.dtype,ft);if(rt){const At=expandShapeToKeepDim(ut,it),Et=reshape$1({inputs:{x:vt},backend:Ye,attrs:{shape:At}});return Ye.disposeIntermediateTensorInfo(vt),Et}return vt}const allConfig$1={kernelName:All,backendName:"cpu",kernelFunc:all$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function any$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st,keepDims:rt}=Je;assertNotComplex$1(tt,"any");const it=parseAxisParam(st,tt.shape);let ot=it;const at=getAxesPermutation(ot,tt.shape.length);let lt=tt;at!=null&&(lt=transpose$1({inputs:{x:tt},backend:Ye,attrs:{perm:at}}),ot=getInnerMostAxes(ot.length,tt.shape.length)),assertAxesAreInnerMostDims("any",ot,lt.shape.length);const[ut,ht]=computeOutAndReduceShapes(lt.shape,ot),pt=sizeFromShape(ht),ft=makeZerosTypedArray(sizeFromShape(ut),lt.dtype),xt=Ye.data.get(lt.dataId).values;for(let At=0;At<ft.length;++At){const Et=At*pt;let wt=xt[Et];for(let _t=0;_t<pt;++_t){const Ct=xt[Et+_t];wt=wt||Ct}ft[At]=wt}at!=null&&Ye.disposeIntermediateTensorInfo(lt);const vt=Ye.makeTensorInfo(ut,lt.dtype,ft);if(rt){const At=expandShapeToKeepDim(ut,it),Et=reshape$1({inputs:{x:vt},backend:Ye,attrs:{shape:At}});return Ye.disposeIntermediateTensorInfo(vt),Et}return vt}const anyConfig$1={kernelName:Any,backendName:"cpu",kernelFunc:any$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMax$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st}=Je;assertNotComplex$1(tt,"argMax");let rt=parseAxisParam(st,tt.shape);const it=getAxesPermutation(rt,tt.shape.length);let ot=tt;const at=[];it!=null&&(ot=transpose$1({inputs:{x:tt},backend:Ye,attrs:{perm:it}}),at.push(ot),rt=getInnerMostAxes(rt.length,ot.shape.length)),rt=[rt[0]],assertAxesAreInnerMostDims("argMax",rt,ot.shape.length);const[lt,ut]=computeOutAndReduceShapes(ot.shape,rt),ht=sizeFromShape(lt),pt=makeZerosTypedArray(ht,"int32"),ft=sizeFromShape(ut),xt=Ye.data.get(ot.dataId).values;for(let vt=0;vt<pt.length;++vt){const At=vt*ft;let Et=xt[At],wt=0;for(let _t=0;_t<ft;++_t){const Ct=xt[At+_t];Ct>Et&&(Et=Ct,wt=_t)}pt[vt]=wt}return at.forEach(vt=>Ye.disposeIntermediateTensorInfo(vt)),Ye.makeTensorInfo(lt,"int32",pt)}const argMaxConfig$1={kernelName:ArgMax,backendName:"cpu",kernelFunc:argMax$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMin$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st}=Je;assertNotComplex$1(tt,"argMin");let rt=parseAxisParam(st,tt.shape);const it=getAxesPermutation(rt,tt.shape.length);let ot=tt;const at=[];it!=null&&(ot=transpose$1({inputs:{x:tt},backend:Ye,attrs:{perm:it}}),at.push(ot),rt=getInnerMostAxes(rt.length,ot.shape.length)),rt=[rt[0]],assertAxesAreInnerMostDims("argMin",rt,ot.shape.length);const[lt,ut]=computeOutAndReduceShapes(ot.shape,rt),ht=sizeFromShape(lt),pt=makeZerosTypedArray(ht,"int32"),ft=sizeFromShape(ut),xt=Ye.data.get(ot.dataId).values;for(let vt=0;vt<pt.length;++vt){const At=vt*ft;let Et=xt[At],wt=0;for(let _t=0;_t<ft;++_t){const Ct=xt[At+_t];Ct<Et&&(Et=Ct,wt=_t)}pt[vt]=wt}return at.forEach(vt=>Ye.disposeIntermediateTensorInfo(vt)),Ye.makeTensorInfo(lt,"int32",pt)}const argMinConfig$1={kernelName:ArgMin,backendName:"cpu",kernelFunc:argMin$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asin$1=unaryKernelFunc$1(Asin,Xe=>Math.asin(Xe)),asinConfig$1={kernelName:Asin,backendName:"cpu",kernelFunc:asin$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asinh$1=unaryKernelFunc$1(Asinh,Xe=>Math.asinh(Xe)),asinhConfig$1={kernelName:Asinh,backendName:"cpu",kernelFunc:asinh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atan$1=unaryKernelFunc$1(Atan,Xe=>Math.atan(Xe)),atanConfig$1={kernelName:Atan,backendName:"cpu",kernelFunc:atan$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atan2Impl=createSimpleBinaryKernelImpl((Xe,Ke)=>Math.atan2(Xe,Ke)),atan2$1=binaryKernelFunc$1(Atan2,atan2Impl),atan2Config$1={kernelName:Atan2,backendName:"cpu",kernelFunc:atan2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atanh$1=unaryKernelFunc$1(Atanh,Xe=>Math.atanh(Xe)),atanhConfig$1={kernelName:Atanh,backendName:"cpu",kernelFunc:atanh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pool$1(Xe,Ke,Ye,Je,tt,st){const rt=tt.strideHeight,it=tt.strideWidth,ot=tt.dilationHeight,at=tt.dilationWidth,lt=tt.effectiveFilterHeight,ut=tt.effectiveFilterWidth,ht=tt.padInfo.top,pt=tt.padInfo.left,ft=st==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,xt=buffer$1(tt.outShape,Ye),vt=xt.values,At=tt.outShape[1]*tt.outShape[2]*tt.outShape[3],Et=tt.outShape[2]*tt.outShape[3],wt=tt.outShape[3];for(let _t=0;_t<tt.batchSize;++_t){const Ct=_t*At,Tt=_t*Je[0];for(let St=0;St<tt.inChannels;++St)for(let Rt=0;Rt<tt.outHeight;++Rt){const Nt=Rt*rt-ht,Pt=Math.max(0,Nt),Bt=Math.min(tt.inHeight,lt+Nt),Lt=Ct+Rt*Et;for(let zt=0;zt<tt.outWidth;++zt){const Dt=zt*it-pt,Vt=Math.max(0,Dt),Gt=Math.min(tt.inWidth,ut+Dt);let Qt=ft,jt=0,Ht=0;for(let Jt=Pt;Jt<Bt;Jt+=ot){const Zt=Tt+Jt*Je[1];for(let nn=Vt;nn<Gt;nn+=at){const cn=Zt+nn*Je[2],an=Xe[cn+St];st==="max"&&an>Qt?Qt=an:st==="avg"&&(jt+=an,Ht++)}if(isNaN(Qt))break}const Yt=Lt+zt*wt+St;vt[Yt]=st==="avg"?jt/Ht:Qt}}}return xt}function maxPoolPositions(Xe,Ke,Ye,Je,tt=!1,st=!1){const rt=buffer$1(Je.outShape,"int32"),it=Je.strideHeight,ot=Je.strideWidth,at=Je.dilationHeight,lt=Je.dilationWidth,ut=Je.effectiveFilterHeight,ht=Je.effectiveFilterWidth,pt=Je.padInfo.top,ft=Je.padInfo.left,xt=buffer$1(Ke,Ye,Xe);for(let vt=0;vt<Je.batchSize;++vt)for(let At=0;At<Je.inChannels;++At)for(let Et=0;Et<Je.outHeight;++Et){const wt=Et*it-pt;let _t=wt;for(;_t<0;)_t+=at;const Ct=Math.min(Je.inHeight,ut+wt);for(let Tt=0;Tt<Je.outWidth;++Tt){const St=Tt*ot-ft;let Rt=St;for(;Rt<0;)Rt+=lt;const Nt=Math.min(Je.inWidth,ht+St);let Pt=Number.NEGATIVE_INFINITY,Bt=-1;for(let Lt=_t;Lt<Ct;Lt+=at){const zt=Lt-wt;for(let Dt=Rt;Dt<Nt;Dt+=lt){const Vt=Dt-St,Gt=xt.get(vt,Lt,Dt,At);Gt>Pt&&(Pt=Gt,tt?Bt=st?((vt*Je.inHeight+Lt)*Je.inWidth+Dt)*Je.inChannels+At:(Lt*Je.inWidth+Dt)*Je.inChannels+At:Bt=zt*ht+Vt)}}rt.set(Bt,vt,Et,Tt,At)}}return rt}function pool3d(Xe,Ke,Ye,Je,tt,st){const rt=tt.strideDepth,it=tt.strideHeight,ot=tt.strideWidth,at=tt.dilationDepth,lt=tt.dilationHeight,ut=tt.dilationWidth,ht=tt.effectiveFilterDepth,pt=tt.effectiveFilterHeight,ft=tt.effectiveFilterWidth,xt=tt.padInfo.front,vt=tt.padInfo.top,At=tt.padInfo.left,Et=st==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,wt=buffer$1(tt.outShape,Ye),_t=wt.values,Ct=tt.outShape[1]*tt.outShape[2]*tt.outShape[3]*tt.outShape[4],Tt=tt.outShape[2]*tt.outShape[3]*tt.outShape[4],St=tt.outShape[3]*tt.outShape[4],Rt=tt.outShape[4];for(let Nt=0;Nt<tt.batchSize;++Nt){const Pt=Nt*Ct,Bt=Nt*Je[0];for(let Lt=0;Lt<tt.inChannels;++Lt)for(let zt=0;zt<tt.outDepth;++zt){const Dt=zt*rt-xt;let Vt=Dt;for(;Vt<0;)Vt+=at;const Gt=Math.min(tt.inDepth,ht+Dt),Qt=Pt+zt*Tt;for(let jt=0;jt<tt.outHeight;++jt){const Ht=jt*it-vt;let Yt=Ht;for(;Yt<0;)Yt+=lt;const Jt=Math.min(tt.inHeight,pt+Ht),Zt=Qt+jt*St;for(let nn=0;nn<tt.outWidth;++nn){const cn=nn*ot-At;let an=cn;for(;an<0;)an+=ut;const mn=Math.min(tt.inWidth,ft+cn),dn=Zt+nn*Rt;let fn=Et,Sn=0,Tn=0;for(let gn=Vt;gn<Gt;gn+=at){const _n=Bt+gn*Je[1];for(let kn=Yt;kn<Jt;kn+=lt){const Wt=_n+kn*Je[2];for(let sn=an;sn<mn;sn+=ut){const hn=Wt+sn*Je[3],En=Xe[hn+Lt];if(st==="max"&&En>fn?fn=En:st==="avg"&&(Sn+=En,Tn++),isNaN(fn))break}if(isNaN(fn))break}if(isNaN(fn))break}const Nn=dn+Lt;_t[Nn]=st==="avg"?Sn/Tn:fn}}}}return wt}function maxPool3dPositions(Xe,Ke){const Ye=buffer$1(Ke.outShape,"int32"),Je=Ke.strideDepth,tt=Ke.strideHeight,st=Ke.strideWidth,rt=Ke.dilationDepth,it=Ke.dilationHeight,ot=Ke.dilationWidth,at=Ke.effectiveFilterDepth,lt=Ke.effectiveFilterHeight,ut=Ke.effectiveFilterWidth,ht=Ke.padInfo.front,pt=Ke.padInfo.top,ft=Ke.padInfo.left;for(let xt=0;xt<Ke.batchSize;++xt)for(let vt=0;vt<Ke.inChannels;++vt)for(let At=0;At<Ke.outDepth;++At){const Et=At*Je-ht;let wt=Et;for(;wt<0;)wt+=rt;const _t=Math.min(Ke.inDepth,at+Et);for(let Ct=0;Ct<Ke.outHeight;++Ct){const Tt=Ct*tt-pt;let St=Tt;for(;St<0;)St+=it;const Rt=Math.min(Ke.inHeight,lt+Tt);for(let Nt=0;Nt<Ke.outWidth;++Nt){const Pt=Nt*st-ft;let Bt=Pt;for(;Bt<0;)Bt+=ot;const Lt=Math.min(Ke.inWidth,ut+Pt);let zt=Number.NEGATIVE_INFINITY,Dt=-1;for(let Vt=wt;Vt<_t;Vt+=rt){const Gt=Vt-Et;for(let Qt=St;Qt<Rt;Qt+=it){const jt=Qt-Tt;for(let Ht=Bt;Ht<Lt;Ht+=ot){const Yt=Ht-Pt,Jt=Xe.get(xt,Vt,Qt,Ht,vt);Jt>=zt&&(zt=Jt,Dt=Gt*lt*ut+jt*lt+Yt)}}}Ye.set(Dt,xt,At,Ct,Nt,vt)}}}return Ye}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke;assertNotComplex$1(tt,"avgPool");const{filterSize:st,strides:rt,pad:it,dimRoundingMode:ot}=Je,at=1;assert$2(eitherStridesOrDilationsAreOne(rt,at),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${rt} and dilations '${at}'`);const lt=computePool2DInfo(tt.shape,st,rt,at,it,ot);let ut;if(lt.filterWidth===1&&lt.filterHeight===1&&arraysEqual(lt.inShape,lt.outShape))ut=identity$4({inputs:{x:tt},backend:Ye});else{const ht=Ye.data.get(tt.dataId).values,pt=computeStrides(tt.shape),ft=pool$1(ht,tt.shape,tt.dtype,pt,lt,"avg");ut=Ye.makeTensorInfo(lt.outShape,tt.dtype,ft.values)}return ut}const avgPoolConfig$1={kernelName:AvgPool,backendName:"cpu",kernelFunc:avgPool$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3D$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{filterSize:st,strides:rt,pad:it,dimRoundingMode:ot,dataFormat:at,dilations:lt}=Je;assertNotComplex$1(tt,"avgPool3d");let ut=lt;ut==null&&(ut=[1,1,1]);const ht=computePool3DInfo(tt.shape,st,rt,ut,it,ot,at),pt=Ye.data.get(tt.dataId).values,ft=pool3d(pt,tt.shape,tt.dtype,computeStrides(tt.shape),ht,"avg");return Ye.makeTensorInfo(ft.shape,"float32",ft.values)}const avgPool3DConfig$1={kernelName:AvgPool3D,backendName:"cpu",kernelFunc:avgPool3D$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3DGrad$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{dy:tt,input:st}=Ke,{filterSize:rt,strides:it,pad:ot,dilations:at,dimRoundingMode:lt}=Je;assertNotComplex$1([tt,st],"avgPool3DGrad");const ut=computePool3DInfo(st.shape,rt,it,at,ot,lt),ht=ut.strideDepth,pt=ut.strideHeight,ft=ut.strideWidth,xt=ut.filterDepth,vt=ut.filterHeight,At=ut.filterWidth,Et=ut.dilationDepth,wt=ut.dilationHeight,_t=ut.dilationWidth,Ct=ut.effectiveFilterDepth,Tt=ut.effectiveFilterHeight,St=ut.effectiveFilterWidth,Rt=Ct-1-ut.padInfo.front,Nt=St-1-ut.padInfo.left,Pt=Tt-1-ut.padInfo.top,Bt=buffer$1(st.shape,"float32"),Lt=1/(xt*vt*At),zt=Ye.bufferSync(tt);for(let Dt=0;Dt<ut.batchSize;++Dt)for(let Vt=0;Vt<ut.inChannels;++Vt)for(let Gt=0;Gt<ut.inDepth;++Gt)for(let Qt=0;Qt<ut.inHeight;++Qt)for(let jt=0;jt<ut.inWidth;++jt){const Ht=Gt-Rt,Yt=Qt-Pt,Jt=jt-Nt;let Zt=0;for(let nn=0;nn<Ct;nn+=Et){const cn=(Ht+nn)/ht;if(!(cn<0||cn>=ut.outDepth||Math.floor(cn)!==cn))for(let an=0;an<Tt;an+=wt){const mn=(Yt+an)/pt;if(!(mn<0||mn>=ut.outHeight||Math.floor(mn)!==mn))for(let dn=0;dn<St;dn+=_t){const fn=(Jt+dn)/ft;if(fn<0||fn>=ut.outWidth||Math.floor(fn)!==fn)continue;const Sn=zt.get(Dt,cn,mn,fn,Vt);Zt+=Sn}}}Bt.set(Zt*Lt,Dt,Gt,Qt,jt,Vt)}return Ye.makeTensorInfo(Bt.shape,Bt.dtype,Bt.values)}const avgPool3DGradConfig={kernelName:AvgPool3DGrad,backendName:"cpu",kernelFunc:avgPool3DGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPoolGrad$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{dy:tt,input:st}=Ke,rt=st;assertNotComplex$1([tt,st],"avgPoolGrad");const{filterSize:it,strides:ot,pad:at}=Je,lt=computePool2DInfo(rt.shape,it,ot,1,at),ut=lt.strideHeight,ht=lt.strideWidth,pt=lt.filterHeight,ft=lt.filterWidth,xt=lt.dilationHeight,vt=lt.dilationWidth,At=lt.effectiveFilterHeight,Et=lt.effectiveFilterWidth,wt=Et-1-lt.padInfo.left,_t=At-1-lt.padInfo.top,Ct=buffer$1(rt.shape,"float32"),Tt=1/(pt*ft),St=Ye.data.get(tt.dataId).values,Rt=buffer$1(tt.shape,"float32",St);for(let Nt=0;Nt<lt.batchSize;++Nt)for(let Pt=0;Pt<lt.inChannels;++Pt)for(let Bt=0;Bt<lt.inHeight;++Bt)for(let Lt=0;Lt<lt.inWidth;++Lt){const zt=Bt-_t,Dt=Lt-wt;let Vt=0;for(let Gt=0;Gt<At;Gt+=xt){const Qt=(zt+Gt)/ut;if(!(Qt<0||Qt>=lt.outHeight||Math.floor(Qt)!==Qt))for(let jt=0;jt<Et;jt+=vt){const Ht=(Dt+jt)/ht;if(Ht<0||Ht>=lt.outWidth||Math.floor(Ht)!==Ht)continue;const Yt=Rt.get(Nt,Qt,Ht,Pt);Vt+=Yt}}Ct.set(Vt*Tt,Nt,Bt,Lt,Pt)}return Ye.makeTensorInfo(Ct.shape,Ct.dtype,Ct.values)}const avgPoolGradConfig$1={kernelName:AvgPoolGrad,backendName:"cpu",kernelFunc:avgPoolGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchNorm$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,scale:st,offset:rt,mean:it,variance:ot}=Ke;assert$2(it.shape.length===ot.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),assert$2(rt==null||it.shape.length===rt.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),assert$2(st==null||it.shape.length===st.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),assertNotComplex$1([tt,it,ot,st,rt],"batchNorm");let{varianceEpsilon:at}=Je;at==null&&(at=.001);const lt=Ye.data.get(tt.dataId).values,ut=Ye.data.get(it.dataId).values,ht=Ye.data.get(ot.dataId).values,pt=st?Ye.data.get(st.dataId).values:new Float32Array([1]),ft=rt?Ye.data.get(rt.dataId).values:new Float32Array([0]),xt=new Float32Array(lt.length),vt=ft.length,At=pt.length,Et=ht.length,wt=ut.length;let _t=0,Ct=0,Tt=0,St=0;for(let Rt=0;Rt<lt.length;++Rt)xt[Rt]=ft[_t++]+(lt[Rt]-ut[Ct++])*pt[Tt++]/Math.sqrt(ht[St++]+at),_t>=vt&&(_t=0),Ct>=wt&&(Ct=0),Tt>=At&&(Tt=0),St>=Et&&(St=0);return Ye.makeTensorInfo(tt.shape,tt.dtype,xt)}const batchNormConfig$1={kernelName:FusedBatchNorm,backendName:"cpu",kernelFunc:batchNorm$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchToSpaceND$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{blockShape:st,crops:rt}=Je;assertNotComplex$1([tt],"batchToSpaceND");const it=st.reduce((At,Et)=>At*Et),ot=getReshaped(tt.shape,st,it),at=getPermuted(ot.length,st.length),lt=getReshapedPermuted(tt.shape,st,it),ut=getSliceBeginCoords(rt,st.length),ht=getSliceSize(lt,rt,st.length),pt=reshape$1({inputs:{x:tt},backend:Ye,attrs:{shape:ot}}),ft=transpose$1({inputs:{x:pt},backend:Ye,attrs:{perm:at}}),xt=reshape$1({inputs:{x:ft},backend:Ye,attrs:{shape:lt}}),vt=slice$3({inputs:{x:xt},backend:Ye,attrs:{begin:ut,size:ht}});return Ye.disposeIntermediateTensorInfo(pt),Ye.disposeIntermediateTensorInfo(ft),Ye.disposeIntermediateTensorInfo(xt),vt}const batchToSpaceNDConfig$1={kernelName:BatchToSpaceND,backendName:"cpu",kernelFunc:batchToSpaceND$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bincount$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,weights:st}=Ke,{size:rt}=Je,it=Ye.data.get(tt.dataId).values,ot=Ye.data.get(st.dataId).values,at=bincountImpl(it,ot,st.dtype,st.shape,rt);return Ye.makeTensorInfo([rt],st.dtype,at)}const bincountConfig$1={kernelName:Bincount,backendName:"cpu",kernelFunc:bincount$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const clip=unaryKernelFunc$1(ClipByValue,(Xe,Ke)=>{const Ye=Ke;return Xe>Ye.clipValueMax?Ye.clipValueMax:Xe<Ye.clipValueMin?Ye.clipValueMin:Xe}),clipConfig={kernelName:ClipByValue,backendName:"cpu",kernelFunc:clip};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const complexAbs$1=Xe=>{const{x:Ke}=Xe.inputs,Ye=Xe.backend,Je=new Float32Array(sizeFromShape(Ke.shape)),tt=Ye.data.get(Ke.dataId),st=tt.complexTensorInfos.real,rt=tt.complexTensorInfos.imag,it=Ye.data.get(st.dataId).values,ot=Ye.data.get(rt.dataId).values;for(let at=0;at<it.length;at++){const lt=it[at],ut=ot[at];Je[at]=Math.hypot(lt,ut)}return Ye.makeOutput(Je,Ke.shape,"float32")},complexAbsConfig$1={kernelName:ComplexAbs,backendName:"cpu",kernelFunc:complexAbs$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imag$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{input:Je}=Ke,tt=Ye.data.get(Je.dataId).complexTensorInfos.imag,st=Ye.data.get(tt.dataId).values;return Ye.makeTensorInfo(tt.shape,tt.dtype,st)}const imagConfig$1={kernelName:Imag,backendName:"cpu",kernelFunc:imag$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concat$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{axis:tt}=Je,st=parseAxisParam(tt,Ke[0].shape)[0];let rt=computeOutShape$1(Ke.map(xt=>xt.shape),st);if(sizeFromShape(rt)===0)return Ye.makeTensorInfo(rt,Ke[0].dtype,[]);const it=Ke.filter(xt=>sizeFromShape(xt.shape)>0);if(it.length===1)return identity$4({inputs:{x:it[0]},backend:Ye});const ot=it.map(xt=>xt.shape);if(assertParamsConsistent(ot,st),it[0].dtype==="complex64"){const xt=it.map(_t=>real$1({inputs:{input:_t},backend:Ye})),vt=it.map(_t=>imag$1({inputs:{input:_t},backend:Ye})),At=concat$1({inputs:xt,backend:Ye,attrs:{axis:st}}),Et=concat$1({inputs:vt,backend:Ye,attrs:{axis:st}}),wt=complex$1({inputs:{real:At,imag:Et},backend:Ye});return xt.forEach(_t=>Ye.disposeIntermediateTensorInfo(_t)),vt.forEach(_t=>Ye.disposeIntermediateTensorInfo(_t)),Ye.disposeIntermediateTensorInfo(At),Ye.disposeIntermediateTensorInfo(Et),wt}const at=it.map(xt=>{const At=[-1,sizeFromShape(xt.shape.slice(st))];return reshape$1({inputs:{x:xt},backend:Ye,attrs:{shape:At}})}),lt=at.map(xt=>({vals:Ye.data.get(xt.dataId).values,shape:xt.shape}));rt=computeOutShape$1(at.map(xt=>xt.shape),1);const ut=at[0].shape[0]===1,ht=concatImpl$1(lt,rt,Ke[0].dtype,ut),pt=computeOutShape$1(it.map(xt=>xt.shape),st),ft=Ye.makeTensorInfo(pt,Ke[0].dtype,ht);return at.forEach(xt=>Ye.disposeIntermediateTensorInfo(xt)),ft}const concatConfig$1={kernelName:Concat,backendName:"cpu",kernelFunc:concat$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2D(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,filter:st}=Ke,{strides:rt,pad:it,dataFormat:ot,dilations:at,dimRoundingMode:lt}=Je;assertNotComplex$1([tt,st],"conv2d");const ut=convertConv2DDataFormat(ot),ht=computeConv2DInfo(tt.shape,st.shape,rt,at,it,lt,!1,ut),pt=ht.filterHeight,ft=ht.filterWidth,xt=ht.dilationHeight,vt=ht.dilationWidth,At=ht.padInfo.left,Et=ht.padInfo.top,wt=ht.dataFormat==="channelsLast",_t=new TensorBuffer(ht.outShape,tt.dtype),Ct=computeStrides(tt.shape),Tt=computeStrides(st.shape),St=Ct[0],Rt=wt?Ct[1]:Ct[2],Nt=wt?Ct[2]:1,Pt=wt?1:Ct[1],Bt=_t.strides[0],Lt=wt?_t.strides[1]:_t.strides[2],zt=wt?_t.strides[2]:1,Dt=wt?1:_t.strides[1],Vt=Ye.data.get(tt.dataId).values,Gt=Ye.data.get(st.dataId).values,Qt=_t.values;for(let jt=0;jt<ht.batchSize;++jt){const Ht=jt*St,Yt=jt*Bt;for(let Jt=0;Jt<ht.outHeight;++Jt){const Zt=Yt+Jt*Lt,nn=Jt*ht.strideHeight-Et;for(let cn=0;cn<pt;++cn){const an=nn+cn*xt;if(an<0||an>=ht.inHeight)continue;const mn=cn*Tt[0],dn=Ht+an*Rt;for(let fn=0;fn<ht.outWidth;++fn){const Sn=Zt+fn*zt,Tn=fn*ht.strideWidth-At;for(let Nn=0;Nn<ft;++Nn){const gn=Tn+Nn*vt;if(gn<0||gn>=ht.inWidth)continue;const _n=mn+Nn*Tt[1],kn=dn+gn*Nt;let Wt=_n;for(let sn=0;sn<ht.inChannels;++sn){const hn=Vt[kn+sn*Pt];for(let En=0;En<ht.outChannels;++En)Qt[Sn+En*Dt]+=hn*Gt[Wt+En];Wt+=ht.outChannels}}}}}}return Ye.makeTensorInfo(_t.shape,_t.dtype,Qt)}const conv2DConfig$1={kernelName:Conv2D$1,backendName:"cpu",kernelFunc:conv2D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropFilter$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,dy:st}=Ke,{strides:rt,pad:it,dataFormat:ot,dimRoundingMode:at,filterShape:lt}=Je;assertNotComplex$1([tt,st],"conv2dBackpropFilter");const ut=convertConv2DDataFormat(ot),ht=computeConv2DInfo(tt.shape,lt,rt,1,it,at,!1,ut),{strideHeight:pt,strideWidth:ft,filterHeight:xt,filterWidth:vt}=ht,At=ht.dataFormat==="channelsLast",Et=new TensorBuffer(ht.filterShape,"float32"),wt=ht.padInfo.left,_t=ht.padInfo.top,Ct=Ye.data.get(tt.dataId).values,Tt=Ye.data.get(st.dataId).values,St=new TensorBuffer(tt.shape,tt.dtype,Ct),Rt=new TensorBuffer(st.shape,st.dtype,Tt);for(let Nt=0;Nt<xt;++Nt){const Pt=Math.max(0,Math.ceil((_t-Nt)/pt)),Bt=Math.min(ht.outHeight,(ht.inHeight+_t-Nt)/pt);for(let Lt=0;Lt<vt;++Lt){const zt=Math.max(0,Math.ceil((wt-Lt)/ft)),Dt=Math.min(ht.outWidth,(ht.inWidth+wt-Lt)/ft);for(let Vt=0;Vt<ht.inChannels;++Vt)for(let Gt=0;Gt<ht.outChannels;++Gt){let Qt=0;for(let jt=0;jt<ht.batchSize;++jt)for(let Ht=Pt;Ht<Bt;++Ht){const Yt=Nt+Ht*pt-_t;for(let Jt=zt;Jt<Dt;++Jt){const Zt=Lt+Jt*ft-wt;At?Qt+=St.get(jt,Yt,Zt,Vt)*Rt.get(jt,Ht,Jt,Gt):Qt+=St.get(jt,Vt,Yt,Zt)*Rt.get(jt,Gt,Ht,Jt)}}Et.set(Qt,Nt,Lt,Vt,Gt)}}}return Ye.makeTensorInfo(Et.shape,Et.dtype,Et.values)}const conv2DBackpropFilterConfig$1={kernelName:Conv2DBackpropFilter,backendName:"cpu",kernelFunc:conv2DBackpropFilter$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropInput$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{dy:tt,filter:st}=Ke,{inputShape:rt,strides:it,pad:ot,dataFormat:at,dimRoundingMode:lt}=Je;assertNotComplex$1([tt,st],"conv2dBackpropInput");const ut=computeStrides(st.shape),ht=computeStrides(tt.shape);let pt=convertConv2DDataFormat(at);const ft=computeConv2DInfo(rt,st.shape,it,1,ot,lt,!1,pt),xt=new TensorBuffer(ft.inShape,"float32"),vt=xt.values,At=Ye.data.get(tt.dataId).values,Et=Ye.data.get(st.dataId).values,[wt,_t,Ct]=ut,{batchSize:Tt,filterHeight:St,filterWidth:Rt,inChannels:Nt,inHeight:Pt,inWidth:Bt,outChannels:Lt,outHeight:zt,outWidth:Dt,strideHeight:Vt,strideWidth:Gt}=ft;pt=ft.dataFormat;const Qt=St-1-ft.padInfo.top,jt=Rt-1-ft.padInfo.left,Ht=pt==="channelsLast",Yt=xt.strides[0],Jt=Ht?xt.strides[1]:xt.strides[2],Zt=Ht?xt.strides[2]:1,nn=Ht?1:xt.strides[1],cn=ht[0],an=Ht?ht[1]:ht[2],mn=Ht?ht[2]:1,dn=Ht?1:ht[1];for(let fn=0;fn<Tt;++fn)for(let Sn=0;Sn<Nt;++Sn)for(let Tn=0;Tn<Pt;++Tn){const Nn=Tn-Qt,gn=Math.max(0,Math.ceil(Nn/Vt)),_n=Math.min(zt,(St+Nn)/Vt);for(let kn=0;kn<Bt;++kn){const Wt=kn-jt,sn=Math.max(0,Math.ceil(Wt/Gt)),hn=Math.min(Dt,(Rt+Wt)/Gt);let En=0;for(let wn=gn;wn<_n;++wn){const Fn=wn*Vt-Nn;for(let Hn=sn;Hn<hn;++Hn){const Yn=Hn*Gt-Wt,Un=cn*fn+an*wn+mn*Hn,Kn=wt*(St-1-Fn)+_t*(Rt-1-Yn)+Ct*Sn;for(let hs=0;hs<Lt;++hs){const zn=At[Un+dn*hs],es=Et[Kn+hs];En+=zn*es}}}const An=Yt*fn+Jt*Tn+Zt*kn+nn*Sn;vt[An]=En}}return Ye.makeTensorInfo(xt.shape,xt.dtype,xt.values)}const conv2DBackpropInputConfig$1={kernelName:Conv2DBackpropInput,backendName:"cpu",kernelFunc:conv2DBackpropInput$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3D$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,filter:st}=Ke,{strides:rt,pad:it,dilations:ot}=Je;assertNotComplex$1([tt,st],"conv3d");const at=computeConv3DInfo(tt.shape,st.shape,rt,ot,it),{filterDepth:lt,filterHeight:ut,filterWidth:ht,dilationDepth:pt,dilationHeight:ft,dilationWidth:xt,padInfo:vt}=at,At=vt.front,Et=vt.left,wt=vt.top,_t=new TensorBuffer(at.outShape,tt.dtype),Ct=Ye.data.get(tt.dataId).values,Tt=Ye.data.get(st.dataId).values,St=_t.values,Rt=computeStrides(tt.shape),Nt=computeStrides(st.shape);for(let Pt=0;Pt<at.batchSize;++Pt){const Bt=Pt*Rt[0],Lt=Pt*_t.strides[0];for(let zt=0;zt<at.outDepth;++zt){const Dt=Lt+zt*_t.strides[1],Vt=zt*at.strideDepth-At;for(let Gt=0;Gt<lt;++Gt){const Qt=Vt+Gt*pt;if(Qt<0||Qt>=at.inDepth)continue;const jt=Gt*Nt[0],Ht=Bt+Qt*Rt[1];for(let Yt=0;Yt<at.outHeight;++Yt){const Jt=Dt+Yt*_t.strides[2],Zt=Yt*at.strideHeight-wt;for(let nn=0;nn<ut;++nn){const cn=Zt+nn*ft;if(cn<0||cn>=at.inHeight)continue;const an=jt+nn*Nt[1],mn=Ht+cn*Rt[2];for(let dn=0;dn<at.outWidth;++dn){const fn=Jt+dn*at.outChannels,Sn=dn*at.strideWidth-Et;for(let Tn=0;Tn<ht;++Tn){const Nn=Sn+Tn*xt;if(Nn<0||Nn>=at.inWidth)continue;const gn=an+Tn*Nt[2],_n=mn+Nn*at.inChannels;let kn=gn;for(let Wt=0;Wt<at.inChannels;++Wt){const sn=Ct[_n+Wt];for(let hn=0;hn<at.outChannels;++hn)St[fn+hn]+=sn*Tt[kn+hn];kn+=at.outChannels}}}}}}}}return Ye.makeTensorInfo(_t.shape,_t.dtype,_t.values)}const conv3DConfig$1={kernelName:Conv3D$1,backendName:"cpu",kernelFunc:conv3D$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropFilterV2$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,dy:st}=Ke,{strides:rt,pad:it,filterShape:ot}=Je;assertNotComplex$1([tt,st],"conv3dBackpropFilterV2");const at=computeStrides(tt.shape),lt=computeStrides(st.shape),ut=computeConv3DInfo(tt.shape,ot,rt,1,it),ht=ut.strideDepth,pt=ut.strideHeight,ft=ut.strideWidth,xt=ut.filterDepth,vt=ut.filterHeight,At=ut.filterWidth,Et=new TensorBuffer(ut.filterShape,"float32"),wt=Et.values,[_t,Ct,Tt,St]=Et.strides,Rt=Ye.data.get(st.dataId).values,[Nt,Pt,Bt,Lt]=lt,zt=Ye.data.get(tt.dataId).values,[Dt,Vt,Gt,Qt]=at,jt=ut.padInfo.front,Ht=ut.padInfo.left,Yt=ut.padInfo.top;for(let Jt=0;Jt<xt;++Jt){const Zt=Math.max(0,Math.ceil((jt-Jt)/ht)),nn=Math.min(ut.outDepth,(ut.inDepth+jt-Jt)/ht),cn=Jt*_t;for(let an=0;an<vt;++an){const mn=Math.max(0,Math.ceil((Yt-an)/pt)),dn=Math.min(ut.outHeight,(ut.inHeight+Yt-an)/pt),fn=an*Ct+cn;for(let Sn=0;Sn<At;++Sn){const Tn=Math.max(0,Math.ceil((Ht-Sn)/ft)),Nn=Math.min(ut.outWidth,(ut.inWidth+Ht-Sn)/ft),gn=Sn*Tt+fn;for(let _n=0;_n<ut.inChannels;++_n){const kn=_n*St+gn;for(let Wt=0;Wt<ut.outChannels;++Wt){let sn=0;for(let hn=0;hn<ut.batchSize;++hn){const En=hn*Dt,An=hn*Nt;for(let wn=Zt;wn<nn;++wn){const Hn=(Jt+wn*ht-jt)*Vt+En,Yn=wn*Pt+An;for(let Un=mn;Un<dn;++Un){const hs=(an+Un*pt-Yt)*Gt+Hn,zn=Un*Bt+Yn;for(let es=Tn;es<Nn;++es){const pn=(Sn+es*ft-Ht)*Qt+hs,Ln=es*Lt+zn;sn+=zt[pn+_n]*Rt[Ln+Wt]}}}}wt[kn+Wt]=sn}}}}}return Ye.makeTensorInfo(Et.shape,Et.dtype,Et.values)}const conv3DBackpropFilterV2Config$1={kernelName:Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:conv3DBackpropFilterV2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropInputV2(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{dy:tt,filter:st}=Ke,{pad:rt,strides:it,inputShape:ot}=Je;assertNotComplex$1([tt],"conv3dBackpropInputV2");const at=computeStrides(tt.shape),lt=computeStrides(st.shape),ut=computeConv3DInfo(ot,st.shape,it,1,rt),ht=new TensorBuffer(ut.inShape,"float32"),pt=ht.values,[ft,xt,vt,At]=ht.strides,Et=Ye.data.get(tt.dataId).values,[wt,_t,Ct,Tt]=at,St=Ye.data.get(st.dataId).values,[Rt,Nt,Pt,Bt]=lt,{batchSize:Lt,filterDepth:zt,filterHeight:Dt,filterWidth:Vt,inChannels:Gt,inDepth:Qt,inHeight:jt,inWidth:Ht,outChannels:Yt,outDepth:Jt,outHeight:Zt,outWidth:nn,strideDepth:cn,strideHeight:an,strideWidth:mn}=ut,dn=zt-1-ut.padInfo.front,fn=Dt-1-ut.padInfo.top,Sn=Vt-1-ut.padInfo.left;for(let Tn=0;Tn<Lt;++Tn)for(let Nn=0;Nn<Gt;++Nn)for(let gn=0;gn<Qt;++gn){const _n=gn-dn,kn=Math.max(0,Math.ceil(_n/cn)),Wt=Math.min(Jt,(zt+_n)/cn);for(let sn=0;sn<jt;++sn){const hn=sn-fn,En=Math.max(0,Math.ceil(hn/an)),An=Math.min(Zt,(Dt+hn)/an);for(let wn=0;wn<Ht;++wn){const Fn=wn-Sn,Hn=Math.max(0,Math.ceil(Fn/mn)),Yn=Math.min(nn,(Vt+Fn)/mn);let Un=0;for(let Kn=kn;Kn<Wt;++Kn){const hs=Kn*cn-_n;for(let zn=En;zn<An;++zn){const es=zn*an-hn;for(let bn=Hn;bn<Yn;++bn){const pn=bn*mn-Fn,Ln=wt*Tn+_t*Kn+Ct*zn+Tt*bn,Mn=Rt*(zt-1-hs)+Nt*(Dt-1-es)+Pt*(Vt-1-pn)+Bt*Nn;for(let ls=0;ls<Yt;++ls){const _s=Et[Ln+ls],as=St[Mn+ls];Un+=_s*as}}}}pt[ft*Tn+xt*gn+vt*sn+At*wn+Nn]=Un}}}return Ye.makeTensorInfo(ht.shape,ht.dtype,ht.values)}const conv3DBackpropInputV2Config={kernelName:Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:conv3DBackpropInputV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cos$1=unaryKernelFunc$1(Cos,Xe=>Math.cos(Xe)),cosConfig$1={kernelName:Cos,backendName:"cpu",kernelFunc:cos$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cosh$1=unaryKernelFunc$1(Cosh,Xe=>Math.cosh(Xe)),coshConfig$1={kernelName:Cosh,backendName:"cpu",kernelFunc:cosh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cropAndResize$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{image:tt,boxes:st,boxInd:rt}=Ke,{cropSize:it,method:ot,extrapolationValue:at}=Je,[lt,ut,ht,pt]=tt.shape,ft=st.shape[0],[xt,vt]=it,At=buffer$1([ft,xt,vt,pt],"float32"),Et=Ye.data.get(st.dataId).values,wt=Ye.data.get(rt.dataId).values,_t=Ye.data.get(tt.dataId).values,Ct=computeStrides(tt.shape),Tt=computeStrides(At.shape);for(let St=0;St<ft;St++){const Rt=St*4,Nt=Et[Rt],Pt=Et[Rt+1],Bt=Et[Rt+2],Lt=Et[Rt+3],zt=wt[St];if(zt>=lt)continue;const Dt=xt>1?(Bt-Nt)*(ut-1)/(xt-1):0,Vt=vt>1?(Lt-Pt)*(ht-1)/(vt-1):0;for(let Gt=0;Gt<xt;Gt++){const Qt=xt>1?Nt*(ut-1)+Gt*Dt:.5*(Nt+Bt)*(ut-1);if(Qt<0||Qt>ut-1){for(let jt=0;jt<vt;jt++)for(let Ht=0;Ht<pt;Ht++){const Yt=Ht+jt*Tt[2]+Gt*Tt[1]+St*Tt[0];At.values[Yt]=at}continue}if(ot==="bilinear"){const jt=Math.floor(Qt),Ht=Math.ceil(Qt),Yt=Qt-jt;for(let Jt=0;Jt<vt;Jt++){const Zt=vt>1?Pt*(ht-1)+Jt*Vt:.5*(Pt+Lt)*(ht-1);if(Zt<0||Zt>ht-1){for(let mn=0;mn<pt;mn++){const dn=mn+Jt*Tt[2]+Gt*Tt[1]+St*Tt[0];At.values[dn]=at}continue}const nn=Math.floor(Zt),cn=Math.ceil(Zt),an=Zt-nn;for(let mn=0;mn<pt;mn++){let dn=mn+nn*Ct[2]+jt*Ct[1]+zt*Ct[0];const fn=_t[dn];dn=mn+cn*Ct[2]+jt*Ct[1]+zt*Ct[0];const Sn=_t[dn];dn=mn+nn*Ct[2]+Ht*Ct[1]+zt*Ct[0];const Tn=_t[dn];dn=mn+cn*Ct[2]+Ht*Ct[1]+zt*Ct[0];const Nn=_t[dn],gn=fn+(Sn-fn)*an,_n=Tn+(Nn-Tn)*an;dn=mn+Jt*Tt[2]+Gt*Tt[1]+St*Tt[0],At.values[dn]=gn+(_n-gn)*Yt}}}else for(let jt=0;jt<vt;++jt){const Ht=vt>1?Pt*(ht-1)+jt*Vt:.5*(Pt+Lt)*(ht-1);if(Ht<0||Ht>ht-1){for(let Zt=0;Zt<pt;Zt++){const nn=Zt+jt*Tt[2]+Gt*Tt[1]+St*Tt[0];At.values[nn]=at}continue}const Yt=Math.round(Ht),Jt=Math.round(Qt);for(let Zt=0;Zt<pt;Zt++){const nn=Zt+Yt*Ct[2]+Jt*Ct[1]+zt*Ct[0],cn=Zt+jt*Tt[2]+Gt*Tt[1]+St*Tt[0];At.values[cn]=_t[nn]}}}}return Ye.makeTensorInfo(At.shape,At.dtype,At.values)}const cropAndResizeConfig$1={kernelName:CropAndResize,backendName:"cpu",kernelFunc:cropAndResize$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumsum$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st,exclusive:rt,reverse:it}=Je;assertNotComplex$1(tt,"cumsum");const ot=getAxesPermutation([st],tt.shape.length);let at=tt;ot!=null&&(at=transpose$1({inputs:{x:tt},backend:Ye,attrs:{perm:ot}}));const lt=getInnerMostAxes(1,tt.shape.length)[0];if(lt!==at.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${at.shape.length-1} but got axis=${lt}`);const ut=upcastType(at.dtype,"int32"),ht=makeZerosTypedArray(sizeFromShape(at.shape),ut),pt=Ye.data.get(at.dataId).values,ft=at.shape[at.shape.length-1],xt=it?(At,Et)=>At+ft-Et-1:(At,Et)=>At+Et;for(let At=0;At<pt.length;At+=ft)for(let Et=0;Et<ft;Et++){const wt=xt(At,Et);if(Et===0)ht[wt]=rt?0:pt[wt];else{const _t=xt(At,Et-1);ht[wt]=rt?pt[_t]+ht[_t]:pt[wt]+ht[_t]}}const vt=Ye.makeTensorInfo(at.shape,ut,ht);if(ot!=null){const At=getUndoAxesPermutation(ot),Et=transpose$1({inputs:{x:vt},backend:Ye,attrs:{perm:At}});return Ye.disposeIntermediateTensorInfo(vt),Ye.disposeIntermediateTensorInfo(at),Et}return vt}const cumsumConfig$1={kernelName:Cumsum,backendName:"cpu",kernelFunc:cumsum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function denseBincount$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,weights:st}=Ke,{size:rt,binaryOutput:it}=Je;if(tt.shape.length===1){const ot=Ye.data.get(tt.dataId).values,at=Ye.data.get(st.dataId).values,lt=bincountImpl(ot,at,st.dtype,st.shape,rt);return Ye.makeTensorInfo([rt],st.dtype,lt)}else if(tt.shape.length===2){const ot=Ye.bufferSync(tt),at=Ye.bufferSync(st),lt=bincountReduceImpl(ot,at,rt,it);return Ye.makeTensorInfo(lt.shape,st.dtype,lt.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${tt.shape.length}.`)}const denseBincountConfig$1={kernelName:DenseBincount,backendName:"cpu",kernelFunc:denseBincount$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthToSpace$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{blockSize:st,dataFormat:rt}=Je;assert$2(rt==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${rt}`),assert$2(st>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${st}`);const it=tt.shape[0],ot=tt.shape[1],at=tt.shape[2],lt=tt.shape[3],ut=ot*st,ht=at*st,pt=lt/(st*st),ft=Ye.data.get(tt.dataId).values,xt=new Float32Array(it*ut*ht*pt);let vt=0;for(let At=0;At<it;++At)for(let Et=0;Et<ut;++Et){const wt=Math.floor(Et/st),_t=Et%st;for(let Ct=0;Ct<ht;++Ct){const Tt=Math.floor(Ct/st),St=Ct%st,Rt=(_t*st+St)*pt;for(let Nt=0;Nt<pt;++Nt){const Bt=Nt+Rt+lt*(Tt+at*(wt+ot*At));xt[vt++]=ft[Bt]}}}return Ye.makeTensorInfo([it,ut,ht,pt],tt.dtype,xt)}const depthToSpaceConfig$1={kernelName:DepthToSpace,backendName:"cpu",kernelFunc:depthToSpace$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNative$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,filter:st}=Ke,{strides:rt,pad:it,dilations:ot,dimRoundingMode:at}=Je;assertNotComplex$1([tt,st],"depthwiseConv2DNative");const lt=computeStrides(tt.shape),ut=computeStrides(st.shape);let ht=ot;ht==null&&(ht=[1,1]),assert$2(eitherStridesOrDilationsAreOne(rt,ht),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${rt} and dilations '${ht}'`);const pt=computeConv2DInfo(tt.shape,st.shape,rt,ht,it,at,!0),{filterHeight:ft,filterWidth:xt,dilationHeight:vt,dilationWidth:At,padInfo:Et}=pt,wt=Et.left,_t=Et.top,Ct=pt.outChannels/pt.inChannels,Tt=new TensorBuffer(pt.outShape,tt.dtype),St=Ye.data.get(tt.dataId).values,Rt=Ye.data.get(st.dataId).values,Nt=Tt.values;for(let Pt=0;Pt<pt.batchSize;++Pt){const Bt=Pt*lt[0],Lt=Pt*Tt.strides[0];for(let zt=0;zt<pt.outHeight;++zt){const Dt=Lt+zt*Tt.strides[1],Vt=zt*pt.strideHeight-wt;for(let Gt=0;Gt<ft;++Gt){const Qt=Vt+Gt*vt;if(Qt<0||Qt>=pt.inHeight)continue;const jt=Gt*ut[0],Ht=Bt+Qt*lt[1];for(let Yt=0;Yt<pt.outWidth;++Yt){const Jt=Dt+Yt*Tt.strides[2],Zt=Yt*pt.strideWidth-_t;for(let nn=0;nn<xt;++nn){const cn=Zt+nn*At;if(cn<0||cn>=pt.inWidth)continue;const an=jt+nn*ut[1],mn=Ht+cn*pt.inChannels;let dn=Jt,fn=an;for(let Sn=0;Sn<pt.inChannels;++Sn){const Tn=St[mn+Sn];for(let Nn=0;Nn<Ct;++Nn)Nt[dn+Nn]+=Tn*Rt[fn+Nn];dn+=Ct,fn+=Ct}}}}}}return Ye.makeTensorInfo(Tt.shape,Tt.dtype,Tt.values)}const depthwiseConv2dNativeConfig$1={kernelName:DepthwiseConv2dNative,backendName:"cpu",kernelFunc:depthwiseConv2dNative$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropFilter$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,dy:st}=Ke,{strides:rt,dilations:it,pad:ot,dimRoundingMode:at,filterShape:lt}=Je;assertNotComplex$1([tt,st],"depthwiseConv2dNativeBackpropFilter");const ut=computeConv2DInfo(tt.shape,lt,rt,it,ot,at,!0),{strideHeight:ht,strideWidth:pt,filterHeight:ft,filterWidth:xt}=ut,vt=new TensorBuffer(ut.filterShape,"float32"),At=ut.padInfo.left,Et=ut.padInfo.top,wt=ut.outChannels/ut.inChannels,_t=Ye.data.get(tt.dataId).values,Ct=new TensorBuffer(tt.shape,tt.dtype,_t),Tt=Ye.data.get(st.dataId).values,St=new TensorBuffer(st.shape,st.dtype,Tt);for(let Rt=0;Rt<ft;++Rt){const Nt=Math.max(0,Math.ceil((Et-Rt)/ht)),Pt=Math.min(ut.outHeight,(ut.inHeight+Et-Rt)/ht);for(let Bt=0;Bt<xt;++Bt){const Lt=Math.max(0,Math.ceil((At-Bt)/pt)),zt=Math.min(ut.outWidth,(ut.inWidth+At-Bt)/pt);for(let Dt=0;Dt<ut.outChannels;++Dt){const Vt=Math.trunc(Dt/wt),Gt=Dt%wt;let Qt=0;for(let jt=0;jt<ut.batchSize;++jt)for(let Ht=Nt;Ht<Pt;++Ht){const Yt=Rt+Ht*ht-Et;for(let Jt=Lt;Jt<zt;++Jt){const Zt=Bt+Jt*pt-At;Qt+=Ct.get(jt,Yt,Zt,Vt)*St.get(jt,Ht,Jt,Dt)}}vt.set(Qt,Rt,Bt,Vt,Gt)}}}return Ye.makeTensorInfo(vt.shape,vt.dtype,vt.values)}const depthwiseConv2dNativeBackpropFilterConfig$1={kernelName:DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:depthwiseConv2dNativeBackpropFilter$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropInput$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{dy:tt,filter:st}=Ke,{strides:rt,dilations:it,pad:ot,dimRoundingMode:at,inputShape:lt}=Je;assertNotComplex$1([tt,st],"depthwiseConv2DNativeBackpropInput");const ut=computeStrides(tt.shape),ht=computeStrides(st.shape),pt=computeConv2DInfo(lt,st.shape,rt,it,ot,at,!0),ft=new TensorBuffer(pt.inShape,"float32"),xt=ft.values,[vt,At,Et]=ft.strides,wt=Ye.data.get(tt.dataId).values,[_t,Ct,Tt]=ut,St=Ye.data.get(st.dataId).values,[Rt,Nt,Pt]=ht,{batchSize:Bt,filterHeight:Lt,filterWidth:zt,inChannels:Dt,inHeight:Vt,inWidth:Gt,outChannels:Qt,outHeight:jt,outWidth:Ht,strideHeight:Yt,strideWidth:Jt}=pt,Zt=Lt-1-pt.padInfo.top,nn=zt-1-pt.padInfo.left,cn=Qt/Dt;for(let an=0;an<Bt;++an)for(let mn=0;mn<Dt;++mn)for(let dn=0;dn<Vt;++dn){const fn=dn-Zt,Sn=Math.max(0,Math.ceil(fn/Yt)),Tn=Math.min(jt,(Lt+fn)/Yt);for(let Nn=0;Nn<Gt;++Nn){const gn=Nn-nn,_n=Math.max(0,Math.ceil(gn/Jt)),kn=Math.min(Ht,(zt+gn)/Jt);let Wt=0;for(let sn=Sn;sn<Tn;++sn){const hn=sn*Yt-fn;for(let En=_n;En<kn;++En){const An=En*Jt-gn,wn=_t*an+Ct*sn+Tt*En,Fn=Rt*(Lt-1-hn)+Nt*(zt-1-An)+Pt*mn;for(let Hn=0;Hn<cn;++Hn){const Yn=mn*cn+Hn,Un=wt[wn+Yn],Kn=St[Fn+Hn];Wt+=Un*Kn}}}xt[vt*an+At*dn+Et*Nn+mn]=Wt}}return Ye.makeTensorInfo(ft.shape,ft.dtype,ft.values)}const depthwiseConv2dNativeBackpropInputConfig$1={kernelName:DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:depthwiseConv2dNativeBackpropInput$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function diag$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{x:Je}=Ke,tt=sizeFromShape(Je.shape),st=Ye.data.get(Je.dataId).values,rt=buffer$1([tt,tt],Je.dtype),it=rt.values;for(let at=0;at<st.length;at++)it[at*tt+at]=st[at];const ot=[...Je.shape,...Je.shape];return Ye.makeTensorInfo(ot,rt.dtype,rt.values)}const diagConfig$1={kernelName:Diag,backendName:"cpu",kernelFunc:diag$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2dConfig={kernelName:Dilation2D,backendName:"cpu",kernelFunc:({inputs:Xe,backend:Ke,attrs:Ye})=>{const{x:Je,filter:tt}=Xe,{strides:st,pad:rt,dilations:it}=Ye,ot=Ke,at=ot.data.get(Je.dataId).values,lt=Je.shape.length,ut=ot.data.get(tt.dataId).values,ht=tt.shape.length,{batchSize:pt,inHeight:ft,inWidth:xt,inChannels:vt,outHeight:At,outWidth:Et,padInfo:wt,strideHeight:_t,strideWidth:Ct,filterHeight:Tt,filterWidth:St,dilationHeight:Rt,dilationWidth:Nt,outShape:Pt}=computeDilation2DInfo(Je.shape,tt.shape,st,rt,"NHWC",it),Bt=sizeFromShape(Pt),Lt=Pt.length,zt=getArrayFromDType(Je.dtype,Bt);for(let Vt=0;Vt<pt;++Vt)for(let Gt=0;Gt<At;++Gt){const Qt=Gt*_t-wt.top;for(let jt=0;jt<Et;++jt){const Ht=jt*Ct-wt.left;for(let Yt=0;Yt<vt;++Yt){let Jt=Number.MIN_SAFE_INTEGER;for(let nn=0;nn<Tt;++nn){const cn=Qt+nn*Rt;if(cn>=0&&cn<ft)for(let an=0;an<St;++an){const mn=Ht+an*Nt;if(mn>=0&&mn<xt){const dn=locToIndex([Vt,cn,mn,Yt],lt,computeStrides(Je.shape)),fn=locToIndex([nn,an,Yt],ht,computeStrides(tt.shape)),Sn=at[dn]+ut[fn];Sn>Jt&&(Jt=Sn)}}}const Zt=locToIndex([Vt,Gt,jt,Yt],Lt,computeStrides(Pt));zt[Zt]=Jt}}}return{dataId:ot.write(toTypedArray(zt,Je.dtype),Pt,Je.dtype),shape:Pt,dtype:Je.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2dBackpropFilterConfig={kernelName:Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:({inputs:Xe,backend:Ke,attrs:Ye})=>{const{x:Je,filter:tt,dy:st}=Xe,{strides:rt,pad:it,dilations:ot}=Ye,at=Ke,lt=toNestedArray(Je.shape,at.data.get(Je.dataId).values),ut=toNestedArray(tt.shape,at.data.get(tt.dataId).values),{batchSize:ht,inHeight:pt,inWidth:ft,inChannels:xt,outHeight:vt,outWidth:At,padInfo:Et,strideHeight:wt,strideWidth:_t,filterHeight:Ct,filterWidth:Tt,dilationHeight:St,dilationWidth:Rt,outShape:Nt}=computeDilation2DInfo(Je.shape,tt.shape,rt,it,"NHWC",ot);assert$2(st.rank===Nt.length,()=>`Error in ${Dilation2DBackpropFilter}, dy must have the same rank as output ${Nt.length}, but got ${st.rank}`);const Pt=toNestedArray(Nt,at.data.get(st.dataId).values),Bt=makeZerosNestedTypedArray(tt.shape,tt.dtype);for(let zt=0;zt<ht;++zt)for(let Dt=0;Dt<vt;++Dt){const Vt=Dt*wt-Et.top;for(let Gt=0;Gt<At;++Gt){const Qt=Gt*_t-Et.left;for(let jt=0;jt<xt;++jt){let Ht=Number.MIN_SAFE_INTEGER,Yt=0,Jt=0;for(let Zt=0;Zt<Ct;++Zt){const nn=Vt+Zt*St;if(nn>=0&&nn<pt)for(let cn=0;cn<Tt;++cn){const an=Qt+cn*Rt;if(an>=0&&an<ft){const mn=lt[zt][nn][an][jt]+ut[Zt][cn][jt];mn>Ht&&(Ht=mn,Yt=Zt,Jt=cn)}}}Bt[Yt][Jt][jt]+=Pt[zt][Dt][Gt][jt]}}}return{dataId:at.write(toTypedArray(Bt,Je.dtype),tt.shape,tt.dtype),shape:tt.shape,dtype:tt.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2dBackpropInputConfig={kernelName:Dilation2DBackpropInput,backendName:"cpu",kernelFunc:({inputs:Xe,backend:Ke,attrs:Ye})=>{const{x:Je,filter:tt,dy:st}=Xe,{strides:rt,pad:it,dilations:ot}=Ye,at=Ke,lt=toNestedArray(Je.shape,at.data.get(Je.dataId).values),ut=toNestedArray(tt.shape,at.data.get(tt.dataId).values),{batchSize:ht,inHeight:pt,inWidth:ft,inChannels:xt,outHeight:vt,outWidth:At,padInfo:Et,strideHeight:wt,strideWidth:_t,filterHeight:Ct,filterWidth:Tt,dilationHeight:St,dilationWidth:Rt,outShape:Nt}=computeDilation2DInfo(Je.shape,tt.shape,rt,it,"NHWC",ot);assert$2(st.rank===Nt.length,()=>`Error in ${Dilation2DBackpropInput}, dy must have the same rank as output ${Nt.length}, but got ${st.rank}`);const Pt=toNestedArray(Nt,at.data.get(st.dataId).values),Bt=makeZerosNestedTypedArray(Je.shape,Je.dtype);for(let zt=0;zt<ht;++zt)for(let Dt=0;Dt<vt;++Dt){const Vt=Dt*wt-Et.top;for(let Gt=0;Gt<At;++Gt){const Qt=Gt*_t-Et.left;for(let jt=0;jt<xt;++jt){let Ht=Number.MIN_SAFE_INTEGER,Yt=Vt<0?0:Vt,Jt=Qt<0?0:Qt;for(let Zt=0;Zt<Ct;++Zt){const nn=Vt+Zt*St;if(nn>=0&&nn<pt)for(let cn=0;cn<Tt;++cn){const an=Qt+cn*Rt;if(an>=0&&an<ft){const mn=lt[zt][nn][an][jt]+ut[Zt][cn][jt];mn>Ht&&(Ht=mn,Yt=nn,Jt=an)}}}Bt[zt][Yt][Jt][jt]+=Pt[zt][Dt][Gt][jt]}}}return{dataId:at.write(toTypedArray(Bt,Je.dtype),Je.shape,Je.dtype),shape:Je.shape,dtype:Je.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eluGrad$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{dy:Je,y:tt}=Ke;assertNotComplex$1([Je,tt],"eluGrad");const st=new Float32Array(sizeFromShape(tt.shape)),rt=Ye.data.get(tt.dataId).values,it=Ye.data.get(Je.dataId).values;for(let ot=0;ot<rt.length;++ot){const at=rt[ot];at>=1?st[ot]=it[ot]:st[ot]=it[ot]*(at+1)}return Ye.makeTensorInfo(tt.shape,"float32",st)}const eluGradConfig$1={kernelName:EluGrad,backendName:"cpu",kernelFunc:eluGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const equalImpl=createSimpleBinaryKernelImpl((Xe,Ke)=>Xe===Ke?1:0),equal$1=binaryKernelFunc$1(Equal,equalImpl,null,"bool"),equalConfig$1={kernelName:Equal,backendName:"cpu",kernelFunc:equal$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p$1=ERF_P,a1=ERF_A1,a2=ERF_A2,a3=ERF_A3,a4=ERF_A4,a5=ERF_A5,erf$1=unaryKernelFunc$1(Erf,Xe=>{const Ke=Math.sign(Xe),Ye=Math.abs(Xe),Je=1/(1+p$1*Ye);return Ke*(1-((((a5*Je+a4)*Je+a3)*Je+a2)*Je+a1)*Je*Math.exp(-Ye*Ye))}),erfConfig$1={kernelName:Erf,backendName:"cpu",kernelFunc:erf$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expandDims$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{input:tt}=Ke,{dim:st}=Je,rt=tt.shape.length,it=tt.shape.slice();let ot=st;return st<0&&(assert$2(-(rt+1)<=st,()=>`Axis must be in the interval [${-(rt+1)}, ${rt}]`),ot=rt+st+1),it.splice(ot,0,1),reshape$1({inputs:{x:tt},backend:Ye,attrs:{shape:it}})}const expandDimsConfig$1={kernelName:ExpandDims,backendName:"cpu",kernelFunc:expandDims$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const realDivImpl=createSimpleBinaryKernelImpl((Xe,Ke)=>Xe/Ke),div=binaryKernelFunc$1(RealDiv,realDivImpl),realDivConfig$1={kernelName:RealDiv,backendName:"cpu",kernelFunc:div};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fftBatch(Xe,Ke,Ye){const Je=Xe.shape,tt=Je[0],st=Je[1],rt=Ye.data.get(Xe.dataId),it=rt.complexTensorInfos.real,ot=rt.complexTensorInfos.imag,at=[tt,st],lt=sizeFromShape(at),ut=getTypedArrayFromDType("float32",lt),ht=getTypedArrayFromDType("float32",lt);for(let vt=0;vt<tt;vt++){const At=slice$3({inputs:{x:it},backend:Ye,attrs:{begin:[vt,0],size:[1,st]}}),Et=slice$3({inputs:{x:ot},backend:Ye,attrs:{begin:[vt,0],size:[1,st]}}),wt=complex$1({inputs:{real:At,imag:Et},backend:Ye}),{real:_t,imag:Ct}=fftImpl$1(wt,Ke,Ye),Tt=mergeRealAndImagArrays(_t,Ct);for(let St=0;St<st;St++){const Rt=getComplexWithIndex(Tt,St);ut[vt*st+St]=Rt.real,ht[vt*st+St]=Rt.imag}Ye.disposeIntermediateTensorInfo(At),Ye.disposeIntermediateTensorInfo(Et),Ye.disposeIntermediateTensorInfo(wt)}const pt=Ye.makeTensorInfo(at,"float32",ut),ft=Ye.makeTensorInfo(at,"float32",ht),xt=complex$1({inputs:{real:pt,imag:ft},backend:Ye});return Ye.disposeIntermediateTensorInfo(pt),Ye.disposeIntermediateTensorInfo(ft),xt}function fftImpl$1(Xe,Ke,Ye){const Je=sizeFromShape(Xe.shape),tt=Ye.data.get(Xe.dataId),st=Ye.data.get(tt.complexTensorInfos.real.dataId).values,rt=Ye.data.get(tt.complexTensorInfos.imag.dataId).values;if(isExponentOf2(Je)){const it=fftRadix2$1(st,rt,Je,Ke,Ye),ot=[Xe.shape[0],Xe.shape[1]];if(Ke){const at=Ye.makeTensorInfo(ot,"float32",it.real),lt=Ye.makeTensorInfo(ot,"float32",it.imag),ut=Ye.makeTensorInfo([],"float32",createScalarValue(Je,"float32")),ht=identity$4({inputs:{x:ut},backend:Ye}),pt=realDivConfig$1.kernelFunc({inputs:{a:at,b:ut},backend:Ye}),ft=realDivConfig$1.kernelFunc({inputs:{a:lt,b:ht},backend:Ye}),xt=Ye.data.get(pt.dataId).values,vt=Ye.data.get(ft.dataId).values;return Ye.disposeIntermediateTensorInfo(at),Ye.disposeIntermediateTensorInfo(lt),Ye.disposeIntermediateTensorInfo(ut),Ye.disposeIntermediateTensorInfo(ht),Ye.disposeIntermediateTensorInfo(pt),Ye.disposeIntermediateTensorInfo(ft),{real:xt,imag:vt}}return it}else{const it=mergeRealAndImagArrays(st,rt),ot=fourierTransformByMatmul(it,Je,Ke);return splitRealAndImagArrays(ot)}}function isExponentOf2(Xe){return(Xe&Xe-1)===0}function fftRadix2$1(Xe,Ke,Ye,Je,tt){if(Ye===1)return{real:Xe,imag:Ke};const st=mergeRealAndImagArrays(Xe,Ke),rt=Ye/2,it=complexWithEvenIndex(st),ot=it.real,at=it.imag,lt=[ot.length],ut=tt.makeTensorInfo(lt,"float32",ot),ht=tt.makeTensorInfo(lt,"float32",at),pt=complex$1({inputs:{real:ut,imag:ht},backend:tt}),ft=complexWithOddIndex(st),xt=ft.real,vt=ft.imag,At=[xt.length],Et=tt.makeTensorInfo(At,"float32",xt),wt=tt.makeTensorInfo(At,"float32",vt),_t=complex$1({inputs:{real:Et,imag:wt},backend:tt}),Ct=fftRadix2$1(ot,at,rt,Je,tt),Tt=Ct.real,St=Ct.imag,Rt=[Tt.length],Nt=tt.makeTensorInfo(Rt,"float32",Tt),Pt=tt.makeTensorInfo(Rt,"float32",St),Bt=complex$1({inputs:{real:Nt,imag:Pt},backend:tt}),Lt=fftRadix2$1(xt,vt,rt,Je,tt),zt=Lt.real,Dt=Lt.imag,Vt=[zt.length],Gt=tt.makeTensorInfo(Vt,"float32",zt),Qt=tt.makeTensorInfo(Vt,"float32",Dt),jt=complex$1({inputs:{real:Gt,imag:Qt},backend:tt}),Ht=exponents(Ye,Je),Yt=[Ht.real.length],Jt=tt.makeTensorInfo(Yt,"float32",Ht.real),Zt=tt.makeTensorInfo(Yt,"float32",Ht.imag),nn=complex$1({inputs:{real:Jt,imag:Zt},backend:tt}),cn=multiply$2({inputs:{a:nn,b:jt},backend:tt}),an=add({inputs:{a:Bt,b:cn},backend:tt}),mn=sub$1({inputs:{a:Bt,b:cn},backend:tt}),dn=real$1({inputs:{input:an},backend:tt}),fn=real$1({inputs:{input:mn},backend:tt}),Sn=imag$1({inputs:{input:an},backend:tt}),Tn=imag$1({inputs:{input:mn},backend:tt}),Nn=concat$1({inputs:[dn,fn],backend:tt,attrs:{axis:0}}),gn=concat$1({inputs:[Sn,Tn],backend:tt,attrs:{axis:0}}),_n=tt.data.get(Nn.dataId).values,kn=tt.data.get(gn.dataId).values;return tt.disposeIntermediateTensorInfo(ut),tt.disposeIntermediateTensorInfo(ht),tt.disposeIntermediateTensorInfo(pt),tt.disposeIntermediateTensorInfo(Et),tt.disposeIntermediateTensorInfo(wt),tt.disposeIntermediateTensorInfo(_t),tt.disposeIntermediateTensorInfo(Nt),tt.disposeIntermediateTensorInfo(Pt),tt.disposeIntermediateTensorInfo(Bt),tt.disposeIntermediateTensorInfo(Gt),tt.disposeIntermediateTensorInfo(Qt),tt.disposeIntermediateTensorInfo(jt),tt.disposeIntermediateTensorInfo(Jt),tt.disposeIntermediateTensorInfo(Zt),tt.disposeIntermediateTensorInfo(nn),tt.disposeIntermediateTensorInfo(cn),tt.disposeIntermediateTensorInfo(an),tt.disposeIntermediateTensorInfo(mn),tt.disposeIntermediateTensorInfo(dn),tt.disposeIntermediateTensorInfo(Sn),tt.disposeIntermediateTensorInfo(fn),tt.disposeIntermediateTensorInfo(Tn),tt.disposeIntermediateTensorInfo(Nn),tt.disposeIntermediateTensorInfo(gn),{real:_n,imag:kn}}function fourierTransformByMatmul(Xe,Ke,Ye){const Je=new Float32Array(Ke*2);for(let tt=0;tt<Ke;tt++){let st=0,rt=0;for(let it=0;it<Ke;it++){const ot=exponent(tt*it,Ke,Ye),at=getComplexWithIndex(Xe,it);st+=at.real*ot.real-at.imag*ot.imag,rt+=at.real*ot.imag+at.imag*ot.real}Ye&&(st/=Ke,rt/=Ke),assignToTypedArray(Je,st,rt,tt)}return Je}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fft$2(Xe){const{inputs:Ke,backend:Ye}=Xe,{input:Je}=Ke,tt=sizeFromShape(Je.shape),st=Je.shape[Je.shape.length-1],rt=tt/st,it=reshape$1({inputs:{x:Je},backend:Ye,attrs:{shape:[rt,st]}}),ot=fftBatch(it,!1,Ye),at=reshape$1({inputs:{x:ot},backend:Ye,attrs:{shape:Je.shape}});return Ye.disposeIntermediateTensorInfo(it),Ye.disposeIntermediateTensorInfo(ot),at}const fftConfig$1={kernelName:FFT$2,backendName:"cpu",kernelFunc:fft$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fill$1(Xe){const{backend:Ke,attrs:Ye}=Xe,{shape:Je,value:tt,dtype:st}=Ye,rt=st||inferDtype(tt),it=getArrayFromDType(rt,sizeFromShape(Je));return fillValues(it,tt,rt),Ke.makeTensorInfo(Je,rt,it)}const fillConfig$1={kernelName:Fill,backendName:"cpu",kernelFunc:fill$1};function fillValues(Xe,Ke,Ye){Xe.fill(Ke)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const flipLeftRightConfig$1={kernelName:FlipLeftRight,backendName:"cpu",kernelFunc:({inputs:Xe,attrs:Ke,backend:Ye})=>{const{image:Je}=Xe,tt=Ye,st=getTypedArrayFromDType(Je.dtype,sizeFromShape(Je.shape)),[rt,it,ot,at]=Je.shape,lt=tt.data.get(Je.dataId).values;for(let ht=0;ht<rt;ht++){const pt=ht*ot*it*at;for(let ft=0;ft<it;ft++){const xt=ft*(ot*at);for(let vt=0;vt<ot;vt++){const At=vt*at;for(let Et=0;Et<at;Et++){const _t=[rt,ft,vt,Et][2],Ct=Math.round(ot-_t),Tt=pt+xt+At+Et;let St=lt[Tt];if(Ct>=0&&Ct<ot){const Rt=Ct*at,Nt=pt+xt+Rt+Et;St=lt[Nt]}st[Tt]=St}}}}return{dataId:tt.write(st,Je.shape,Je.dtype),shape:Je.shape,dtype:Je.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorDivImpl=createSimpleBinaryKernelImpl((Xe,Ke)=>Math.floor(Xe/Ke)),floorDiv$1=binaryKernelFunc$1(FloorDiv,floorDivImpl,null,"int32"),floorDivConfig$1={kernelName:FloorDiv,backendName:"cpu",kernelFunc:floorDiv$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedConv2D(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,filter:st,bias:rt,preluActivationWeights:it}=Ke,{strides:ot,pad:at,dataFormat:lt,dilations:ut,dimRoundingMode:ht,activation:pt,leakyreluAlpha:ft}=Je;let xt=conv2D({inputs:{x:tt,filter:st},backend:Ye,attrs:{strides:ot,pad:at,dataFormat:lt,dilations:ut,dimRoundingMode:ht}});if(rt){const vt=xt;xt=add({inputs:{a:xt,b:rt},backend:Ye}),Ye.disposeIntermediateTensorInfo(vt)}if(pt){const vt=xt;xt=applyActivation(Ye,xt,pt,it,ft),Ye.disposeIntermediateTensorInfo(vt)}return xt}const fusedConv2DConfig$1={kernelName:FusedConv2D,backendName:"cpu",kernelFunc:fusedConv2D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedDepthwiseConv2D$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,filter:st,bias:rt,preluActivationWeights:it}=Ke,{strides:ot,pad:at,dataFormat:lt,dilations:ut,dimRoundingMode:ht,activation:pt,leakyreluAlpha:ft}=Je;let xt=depthwiseConv2dNative$1({inputs:{x:tt,filter:st},backend:Ye,attrs:{strides:ot,pad:at,dataFormat:lt,dilations:ut,dimRoundingMode:ht}});if(rt){const vt=xt;xt=add({inputs:{a:xt,b:rt},backend:Ye}),Ye.disposeIntermediateTensorInfo(vt)}if(pt){const vt=xt;xt=applyActivation(Ye,xt,pt,it,ft),Ye.disposeIntermediateTensorInfo(vt)}return xt}const fusedDepthwiseConv2DConfig$1={kernelName:FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:fusedDepthwiseConv2D$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherNd$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{params:Je,indices:tt}=Ke,st=sizeFromShape(Je.shape),rt=tt.shape,it=rt[rt.length-1],[ot,at,lt,ut]=prepareAndValidate(Je,tt);if(at===0)return Ye.makeTensorInfo(ot,Je.dtype,[]);const ht=buffer$1([at,lt],Je.dtype),pt=Ye.data.get(tt.dataId).values,ft=Ye.data.get(Je.dataId).values;for(let xt=0;xt<at;xt++){const vt=[];let At=0;for(let Et=0;Et<it;Et++){const wt=pt[xt*it+Et];At+=wt*ut[Et],vt.push(wt)}if(At<0||At>=st/lt)throw new Error(`Invalid indices: ${vt} does not index into ${Je.shape}`);for(let Et=0;Et<lt;Et++)ht.values[xt*lt+Et]=ft[At*lt+Et]}return Ye.makeTensorInfo(ot,ht.dtype,ht.values)}const gatherNdConfig$1={kernelName:GatherNd,backendName:"cpu",kernelFunc:gatherNd$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherV2$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,indices:st}=Ke,{axis:rt,batchDims:it}=Je;assertNotComplex$1([tt,st],"gatherV2");let ot=it;it==null&&(ot=0);const at=sizeFromShape(st.shape),lt=parseAxisParam(rt,tt.shape)[0],ut=collectGatherOpShapeInfo(tt,st,lt,ot),ht=reshape$1({inputs:{x:tt},backend:Ye,attrs:{shape:[ut.batchSize,ut.outerSize,ut.dimSize,ut.sliceSize]}}),pt=reshape$1({inputs:{x:st},backend:Ye,attrs:{shape:[ut.batchSize,at/ut.batchSize]}}),ft=[ut.batchSize,ut.outerSize,at/ut.batchSize,ut.sliceSize],xt=Ye.bufferSync(pt),vt=Ye.bufferSync(ht),At=gatherV2Impl(vt,xt,ft);return Ye.disposeIntermediateTensorInfo(ht),Ye.disposeIntermediateTensorInfo(pt),Ye.makeTensorInfo(ut.outputShape,At.dtype,At.values)}const gatherV2Config$1={kernelName:GatherV2,backendName:"cpu",kernelFunc:gatherV2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const greaterEqualImpl=createSimpleBinaryKernelImpl((Xe,Ke)=>Xe>=Ke?1:0),greaterEqual$1=binaryKernelFunc$1(GreaterEqual,greaterEqualImpl,null,"bool"),greaterEqualConfig$1={kernelName:GreaterEqual,backendName:"cpu",kernelFunc:greaterEqual$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ifft$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{input:Je}=Ke,tt=sizeFromShape(Je.shape),st=Je.shape[Je.shape.length-1],rt=tt/st,it=reshape$1({inputs:{x:Je},backend:Ye,attrs:{shape:[rt,st]}}),ot=fftBatch(it,!0,Ye),at=reshape$1({inputs:{x:ot},backend:Ye,attrs:{shape:Je.shape}});return Ye.disposeIntermediateTensorInfo(it),Ye.disposeIntermediateTensorInfo(ot),at}const ifftConfig$1={kernelName:IFFT,backendName:"cpu",kernelFunc:ifft$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isFinite$2=unaryKernelFunc$1(IsFinite,Xe=>Number.isFinite(Xe)?1:0,"bool"),isFiniteConfig$1={kernelName:IsFinite,backendName:"cpu",kernelFunc:isFinite$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isInf$1=unaryKernelFunc$1(IsInf,Xe=>Math.abs(Xe)===1/0?1:0,"bool"),isInfConfig$1={kernelName:IsInf,backendName:"cpu",kernelFunc:isInf$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isNaN$2=unaryKernelFunc$1(IsNan,Xe=>Number.isNaN(Xe)?1:0,"bool"),isNaNConfig$1={kernelName:IsNan,backendName:"cpu",kernelFunc:isNaN$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lessEqualImpl=createSimpleBinaryKernelImpl((Xe,Ke)=>Xe<=Ke?1:0),lessEqual$1=binaryKernelFunc$1(LessEqual,lessEqualImpl,null,"bool"),lessEqualConfig$1={kernelName:LessEqual,backendName:"cpu",kernelFunc:lessEqual$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function linSpace$1(Xe){const{backend:Ke,attrs:Ye}=Xe,{start:Je,stop:tt,num:st}=Ye,rt=linSpaceImpl(Je,tt,st);return Ke.makeTensorInfo([rt.length],"float32",rt)}const linSpaceConfig$1={kernelName:LinSpace,backendName:"cpu",kernelFunc:linSpace$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const log1p$1=unaryKernelFunc$1(Log1p,Xe=>Math.log1p(Xe)),log1pConfig$1={kernelName:Log1p,backendName:"cpu",kernelFunc:log1p$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logicalAndImpl=createSimpleBinaryKernelImpl((Xe,Ke)=>Xe&&Ke),logicalAnd$1=binaryKernelFunc$1(LogicalAnd,logicalAndImpl,null,"bool"),logicalAndConfig$1={kernelName:LogicalAnd,backendName:"cpu",kernelFunc:logicalAnd$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logicalNot$1=unaryKernelFunc$1(LogicalNot,Xe=>Xe?0:1,"bool"),logicalNotConfig$1={kernelName:LogicalNot,backendName:"cpu",kernelFunc:logicalNot$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logicalOrImpl=createSimpleBinaryKernelImpl((Xe,Ke)=>Xe||Ke),logicalOr$1=binaryKernelFunc$1(LogicalOr,logicalOrImpl,null,"bool"),logicalOrConfig$1={kernelName:LogicalOr,backendName:"cpu",kernelFunc:logicalOr$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRN(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{depthRadius:st,bias:rt,alpha:it,beta:ot}=Je;assertNotComplex$1(tt,"LRN");const at=tt.shape[3],lt=at-1,ut=Ye.data.get(tt.dataId).values,ht=sizeFromShape(tt.shape),pt=new Float32Array(ht);function ft(xt){const vt=xt%at;let At=xt-vt+Math.max(0,vt-st);const Et=xt-vt+Math.min(vt+st,lt);let wt=0;for(;At<=Et;At++){const _t=ut[At];wt+=_t*_t}return wt}for(let xt=0;xt<ht;xt++){const vt=ft(xt),At=ut[xt]*Math.pow(rt+it*vt,-ot);pt[xt]=At}return Ye.makeTensorInfo(tt.shape,tt.dtype,pt)}const lRNConfig={kernelName:LRN,backendName:"cpu",kernelFunc:lRN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRNGrad(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,y:st,dy:rt}=Ke,{depthRadius:it,bias:ot,alpha:at,beta:lt}=Je;assertNotComplex$1(rt,"LRNGrad");const ut=sizeFromShape(rt.shape),ht=rt.shape[3],pt=Ye.data.get(rt.dataId).values,ft=Ye.data.get(tt.dataId).values,xt=Ye.data.get(st.dataId).values,vt=new Float32Array(ut),At=ut;for(let Et=0;Et<At;Et++){const wt=Et%ht,_t=Et-wt+Math.max(0,wt-it),Ct=Et-wt+Math.min(ht,wt+it+1);let Tt=0;for(let St=_t;St<Ct;St++)Tt+=Math.pow(ft[St],2);Tt=at*Tt+ot;for(let St=_t;St<Ct;St++){let Rt=-2*at*lt*ft[St]*xt[Et]/Tt;Et===St&&(Rt+=Math.pow(Tt,-lt)),Rt*=pt[Et],vt[St]+=Rt}}return Ye.makeTensorInfo(rt.shape,tt.dtype,vt)}const lRNGradConfig={kernelName:LRNGrad,backendName:"cpu",kernelFunc:lRNGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function max$2(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{reductionIndices:st,keepDims:rt}=Je,it=Ye;let ot=tt.shape;const at=ot.length,lt=parseAxisParam(st,ot);let ut=lt;const ht=getAxesPermutation(ut,at);let pt=it.data.get(tt.dataId).values;if(ht!=null){const _t=new Array(at);for(let Ct=0;Ct<_t.length;Ct++)_t[Ct]=ot[ht[Ct]];pt=transposeImpl$1(pt,ot,tt.dtype,ht,_t),ut=getInnerMostAxes(ut.length,at),ot=_t}assertNotComplex$1(tt,"max"),assertAxesAreInnerMostDims("max",ut,at);const[ft,xt]=computeOutAndReduceShapes(ot,ut),vt=sizeFromShape(xt),At=maxImpl$1(pt,vt,ft,tt.dtype),Et=it.write(At,ft,tt.dtype);let wt=ft;return rt&&(wt=expandShapeToKeepDim(ft,lt)),{dataId:Et,shape:wt,dtype:tt.dtype}}const maxConfig$1={kernelName:Max,backendName:"cpu",kernelFunc:max$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke;assertNotComplex$1(tt,"maxPool");const{filterSize:st,strides:rt,pad:it,dimRoundingMode:ot}=Je,at=1;assert$2(eitherStridesOrDilationsAreOne(rt,at),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${rt} and dilations '${at}'`);const lt=computePool2DInfo(tt.shape,st,rt,at,it,ot);let ut;if(lt.filterWidth===1&&lt.filterHeight===1&&arraysEqual(lt.inShape,lt.outShape))ut=identity$4({inputs:{x:tt},backend:Ye});else{const ht=Ye.data.get(tt.dataId).values,pt=computeStrides(tt.shape),ft=pool$1(ht,tt.shape,tt.dtype,pt,lt,"max");ut=Ye.makeTensorInfo(lt.outShape,tt.dtype,ft.values)}return ut}const maxPoolConfig$1={kernelName:MaxPool,backendName:"cpu",kernelFunc:maxPool$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3D(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{filterSize:st,strides:rt,pad:it,dimRoundingMode:ot,dataFormat:at,dilations:lt}=Je;assertNotComplex$1(tt,"maxPool3d");let ut=lt;ut==null&&(ut=[1,1,1]);const ht=computePool3DInfo(tt.shape,st,rt,ut,it,ot,at),pt=Ye.data.get(tt.dataId).values,ft=pool3d(pt,tt.shape,tt.dtype,computeStrides(tt.shape),ht,"max");return Ye.makeTensorInfo(ft.shape,"float32",ft.values)}const maxPool3DConfig$1={kernelName:MaxPool3D,backendName:"cpu",kernelFunc:maxPool3D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3DGrad$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{dy:tt,input:st}=Ke,{filterSize:rt,strides:it,pad:ot,dilations:at,dimRoundingMode:lt}=Je;assertNotComplex$1([tt,st],"maxPool3DGrad");const ut=computePool3DInfo(st.shape,rt,it,at,ot,lt),ht=Ye.bufferSync(st),pt=maxPool3dPositions(ht,ut),ft=ut.strideDepth,xt=ut.strideHeight,vt=ut.strideWidth,At=ut.dilationDepth,Et=ut.dilationHeight,wt=ut.dilationWidth,_t=ut.effectiveFilterDepth,Ct=ut.effectiveFilterHeight,Tt=ut.effectiveFilterWidth,St=_t-1-ut.padInfo.front,Rt=Tt-1-ut.padInfo.left,Nt=Ct-1-ut.padInfo.top,Pt=buffer$1(st.shape,"float32"),Bt=Ye.bufferSync(tt);for(let Lt=0;Lt<ut.batchSize;++Lt)for(let zt=0;zt<ut.inChannels;++zt)for(let Dt=0;Dt<ut.inDepth;++Dt)for(let Vt=0;Vt<ut.inHeight;++Vt)for(let Gt=0;Gt<ut.inWidth;++Gt){const Qt=Dt-St,jt=Vt-Nt,Ht=Gt-Rt;let Yt=0;for(let Jt=0;Jt<_t;Jt+=At){const Zt=(Qt+Jt)/ft;if(!(Zt<0||Zt>=ut.outDepth||Math.floor(Zt)!==Zt))for(let nn=0;nn<Ct;nn+=Et){const cn=(jt+nn)/xt;if(!(cn<0||cn>=ut.outHeight||Math.floor(cn)!==cn))for(let an=0;an<Tt;an+=wt){const mn=(Ht+an)/vt;if(mn<0||mn>=ut.outWidth||Math.floor(mn)!==mn)continue;const dn=_t*Ct*Tt-1-pt.get(Lt,Zt,cn,mn,zt),fn=Jt*Ct*Tt+nn*Tt+an,Sn=dn===fn?1:0;if(Sn===0)continue;const Tn=Bt.get(Lt,Zt,cn,mn,zt);Yt+=Tn*Sn}}}Pt.set(Yt,Lt,Dt,Vt,Gt,zt)}return Ye.makeTensorInfo(Pt.shape,Pt.dtype,Pt.values)}const maxPool3DGradConfig={kernelName:MaxPool3DGrad,backendName:"cpu",kernelFunc:maxPool3DGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolGrad$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{dy:tt,input:st,output:rt}=Ke,it=st;assertNotComplex$1([st,rt],"maxPoolGrad");const{filterSize:ot,strides:at,pad:lt,dimRoundingMode:ut}=Je,ht=computePool2DInfo(it.shape,ot,at,1,lt,ut),pt=Ye.data.get(it.dataId).values,ft=buffer$1(ht.outShape,it.dtype,maxPoolPositions(pt,it.shape,it.dtype,ht).values),xt=ht.strideHeight,vt=ht.strideWidth,At=ht.dilationHeight,Et=ht.dilationWidth,wt=ht.effectiveFilterHeight,_t=ht.effectiveFilterWidth,Ct=_t-1-ht.padInfo.left,Tt=wt-1-ht.padInfo.top,St=buffer$1(it.shape,"float32"),Rt=Ye.data.get(tt.dataId).values,Nt=buffer$1(tt.shape,"float32",Rt);for(let Pt=0;Pt<ht.batchSize;++Pt)for(let Bt=0;Bt<ht.inChannels;++Bt)for(let Lt=0;Lt<ht.inHeight;++Lt)for(let zt=0;zt<ht.inWidth;++zt){const Dt=Lt-Tt,Vt=zt-Ct;let Gt=0;for(let Qt=0;Qt<wt;Qt+=At){const jt=(Dt+Qt)/xt;if(!(jt<0||jt>=ht.outHeight||Math.floor(jt)!==jt))for(let Ht=0;Ht<_t;Ht+=Et){const Yt=(Vt+Ht)/vt;if(Yt<0||Yt>=ht.outWidth||Math.floor(Yt)!==Yt)continue;const Jt=wt*_t-1-ft.get(Pt,jt,Yt,Bt),Zt=Qt*_t+Ht,nn=Jt===Zt?1:0;if(nn===0)continue;const cn=Nt.get(Pt,jt,Yt,Bt);Gt+=cn*nn}}St.set(Gt,Pt,Lt,zt,Bt)}return Ye.makeTensorInfo(St.shape,St.dtype,St.values)}const maxPoolGradConfig$1={kernelName:MaxPoolGrad,backendName:"cpu",kernelFunc:maxPoolGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolWithArgmaxImpl$1(Xe,Ke,Ye,Je,tt){const st=computeStrides(Ke),rt=pool$1(Xe,Ke,Ye,st,tt,"max"),it=maxPoolPositions(Xe,Ke,Ye,tt,!0,Je);return[rt.values,it.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPoolWithArgmaxConfig$1={kernelName:MaxPoolWithArgmax,backendName:"cpu",kernelFunc:({inputs:Xe,attrs:Ke,backend:Ye})=>{const{x:Je}=Xe,{filterSize:tt,strides:st,pad:rt,includeBatchInIndex:it}=Ke,ot=Ye;assertNotComplex$1(Je,"MaxPoolWithArgmax");const at=ot.data.get(Je.dataId).values,lt=computePool2DInfo(Je.shape,tt,st,[1,1],rt),[ut,ht]=maxPoolWithArgmaxImpl$1(at,Je.shape,Je.dtype,it,lt),pt=ot.write(ut,lt.outShape,Je.dtype),ft=ot.write(ht,lt.outShape,Je.dtype);return[{dataId:pt,shape:lt.outShape,dtype:Je.dtype},{dataId:ft,shape:lt.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sum$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st,keepDims:rt}=Je;assertNotComplex$1(tt,"sum");let it;tt.dtype==="bool"?it=cast$1({inputs:{x:tt},backend:Ye,attrs:{dtype:"int32"}}):it=identity$4({inputs:{x:tt},backend:Ye});const ot=it.shape.length,at=parseAxisParam(st,it.shape),lt=getAxesPermutation(at,ot);let ut=at,ht=it;lt!=null&&(ht=transpose$1({inputs:{x:it},backend:Ye,attrs:{perm:lt}}),ut=getInnerMostAxes(ut.length,ot)),assertAxesAreInnerMostDims("sum",ut,ht.shape.length);const[pt,ft]=computeOutAndReduceShapes(ht.shape,ut),xt=upcastType(ht.dtype,"int32");let vt=zeros(Ye,pt,xt);const At=sizeFromShape(ft),Et=Ye.data.get(vt.dataId).values,wt=Ye.data.get(ht.dataId).values;for(let _t=0;_t<Et.length;++_t){const Ct=_t*At;let Tt=0;for(let St=0;St<At;++St)Tt+=wt[Ct+St];Et[_t]=Tt}if(rt){const _t=expandShapeToKeepDim(vt.shape,at),Ct=vt;vt=reshape$1({inputs:{x:vt},backend:Ye,attrs:{shape:_t}}),Ye.disposeIntermediateTensorInfo(Ct)}return Ye.disposeIntermediateTensorInfo(it),lt!=null&&Ye.disposeIntermediateTensorInfo(ht),vt}const sumConfig$1={kernelName:Sum,backendName:"cpu",kernelFunc:sum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mean(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st,keepDims:rt}=Je,it=parseAxisParam(st,tt.shape),at=computeOutAndReduceShapes(tt.shape,it)[1],lt=sizeFromShape(at),ut=[],ht=Ye.makeTensorInfo([],"float32",new Float32Array([lt]));ut.push(ht);const pt=cast$1({inputs:{x:tt},backend:Ye,attrs:{dtype:"float32"}});ut.push(pt);const ft=div({inputs:{a:pt,b:ht},backend:Ye});ut.push(ft);const xt=sum$1({inputs:{x:ft},backend:Ye,attrs:{axis:st,keepDims:rt}});return ut.forEach(vt=>Ye.disposeIntermediateTensorInfo(vt)),xt}const meanConfig$1={kernelName:Mean,backendName:"cpu",kernelFunc:mean};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function min$2(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st,keepDims:rt}=Je;assertNotComplex$1(tt,"min");const it=parseAxisParam(st,tt.shape);let ot=it;const at=getAxesPermutation(ot,tt.shape.length);let lt=tt;at!=null&&(lt=transpose$1({inputs:{x:tt},backend:Ye,attrs:{perm:at}}),ot=getInnerMostAxes(ot.length,tt.shape.length)),assertAxesAreInnerMostDims("min",ot,lt.shape.length);const[ut,ht]=computeOutAndReduceShapes(lt.shape,ot),pt=sizeFromShape(ht),ft=makeZerosTypedArray(sizeFromShape(ut),lt.dtype),xt=Ye.data.get(lt.dataId).values;for(let At=0;At<ft.length;++At){const Et=At*pt;let wt=xt[Et];for(let _t=0;_t<pt;++_t){const Ct=xt[Et+_t];Ct<wt&&(wt=Ct)}ft[At]=wt}at!=null&&Ye.disposeIntermediateTensorInfo(lt);const vt=Ye.makeTensorInfo(ut,lt.dtype,ft);if(rt){const At=expandShapeToKeepDim(ut,it),Et=reshape$1({inputs:{x:vt},backend:Ye,attrs:{shape:At}});return Ye.disposeIntermediateTensorInfo(vt),Et}return vt}const minConfig$1={kernelName:Min,backendName:"cpu",kernelFunc:min$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mirrorPad(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{paddings:st,mode:rt}=Je;assertNotComplex$1(tt,"mirrorPad");const it=st.map((wt,_t)=>wt[0]+tt.shape[_t]+wt[1]),ot=st.map(wt=>wt[0]),at=st.map((wt,_t)=>wt[0]+tt.shape[_t]),lt=rt==="reflect"?0:1,ut=Ye.data.get(tt.dataId).values,ht=tt.shape.length,pt=computeStrides(tt.shape),ft=sizeFromShape(it),xt=it.length,vt=computeStrides(it),At=getTypedArrayFromDType(tt.dtype,ft);for(let wt=0;wt<ft;wt++){let _t=indexToLoc(wt,xt,vt);for(let Tt=0;Tt<xt;Tt++)_t[Tt]<ot[Tt]?_t[Tt]=ot[Tt]*2-_t[Tt]-lt:_t[Tt]>=at[Tt]&&(_t[Tt]=(at[Tt]-1)*2-_t[Tt]+lt);_t=_t.map((Tt,St)=>Tt-ot[St]);const Ct=locToIndex(_t,ht,pt);At[wt]=ut[Ct]}return{dataId:Ye.write(At,it,tt.dtype),shape:it,dtype:tt.dtype}}const mirrorPadConfig$1={kernelName:MirrorPad,backendName:"cpu",kernelFunc:mirrorPad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const modImpl=createSimpleBinaryKernelImpl(((Xe,Ke)=>{const Ye=Xe%Ke;return Xe<0&&Ke<0||Xe>=0&&Ke>=0?Ye:(Ye+Ke)%Ke})),mod$1=binaryKernelFunc$1(Mod,modImpl),modConfig$1={kernelName:Mod,backendName:"cpu",kernelFunc:mod$1};var alea$1={exports:{}};alea$1.exports;(function(Xe){(function(Ke,Ye,Je){function tt(ot){var at=this,lt=it();at.next=function(){var ut=2091639*at.s0+at.c*23283064365386963e-26;return at.s0=at.s1,at.s1=at.s2,at.s2=ut-(at.c=ut|0)},at.c=1,at.s0=lt(" "),at.s1=lt(" "),at.s2=lt(" "),at.s0-=lt(ot),at.s0<0&&(at.s0+=1),at.s1-=lt(ot),at.s1<0&&(at.s1+=1),at.s2-=lt(ot),at.s2<0&&(at.s2+=1),lt=null}function st(ot,at){return at.c=ot.c,at.s0=ot.s0,at.s1=ot.s1,at.s2=ot.s2,at}function rt(ot,at){var lt=new tt(ot),ut=at&&at.state,ht=lt.next;return ht.int32=function(){return lt.next()*4294967296|0},ht.double=function(){return ht()+(ht()*2097152|0)*11102230246251565e-32},ht.quick=ht,ut&&(typeof ut=="object"&&st(ut,lt),ht.state=function(){return st(lt,{})}),ht}function it(){var ot=4022871197,at=function(lt){lt=lt.toString();for(var ut=0;ut<lt.length;ut++){ot+=lt.charCodeAt(ut);var ht=.02519603282416938*ot;ot=ht>>>0,ht-=ot,ht*=ot,ot=ht>>>0,ht-=ot,ot+=ht*4294967296}return(ot>>>0)*23283064365386963e-26};return at}Ye&&Ye.exports?Ye.exports=rt:this.alea=rt})(commonjsGlobal,Xe)})(alea$1);var aleaExports=alea$1.exports,xor128$1={exports:{}};xor128$1.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this,at="";ot.x=0,ot.y=0,ot.z=0,ot.w=0,ot.next=function(){var ut=ot.x^ot.x<<11;return ot.x=ot.y,ot.y=ot.z,ot.z=ot.w,ot.w^=ot.w>>>19^ut^ut>>>8},it===(it|0)?ot.x=it:at+=it;for(var lt=0;lt<at.length+64;lt++)ot.x^=at.charCodeAt(lt)|0,ot.next()}function st(it,ot){return ot.x=it.x,ot.y=it.y,ot.z=it.z,ot.w=it.w,ot}function rt(it,ot){var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(typeof lt=="object"&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.xor128=rt})(commonjsGlobal,Xe)})(xor128$1);var xor128Exports=xor128$1.exports,xorwow$1={exports:{}};xorwow$1.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this,at="";ot.next=function(){var ut=ot.x^ot.x>>>2;return ot.x=ot.y,ot.y=ot.z,ot.z=ot.w,ot.w=ot.v,(ot.d=ot.d+362437|0)+(ot.v=ot.v^ot.v<<4^(ut^ut<<1))|0},ot.x=0,ot.y=0,ot.z=0,ot.w=0,ot.v=0,it===(it|0)?ot.x=it:at+=it;for(var lt=0;lt<at.length+64;lt++)ot.x^=at.charCodeAt(lt)|0,lt==at.length&&(ot.d=ot.x<<10^ot.x>>>4),ot.next()}function st(it,ot){return ot.x=it.x,ot.y=it.y,ot.z=it.z,ot.w=it.w,ot.v=it.v,ot.d=it.d,ot}function rt(it,ot){var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(typeof lt=="object"&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.xorwow=rt})(commonjsGlobal,Xe)})(xorwow$1);var xorwowExports=xorwow$1.exports,xorshift7$1={exports:{}};xorshift7$1.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this;ot.next=function(){var lt=ot.x,ut=ot.i,ht,pt;return ht=lt[ut],ht^=ht>>>7,pt=ht^ht<<24,ht=lt[ut+1&7],pt^=ht^ht>>>10,ht=lt[ut+3&7],pt^=ht^ht>>>3,ht=lt[ut+4&7],pt^=ht^ht<<7,ht=lt[ut+7&7],ht=ht^ht<<13,pt^=ht^ht<<9,lt[ut]=pt,ot.i=ut+1&7,pt};function at(lt,ut){var ht,pt=[];if(ut===(ut|0))pt[0]=ut;else for(ut=""+ut,ht=0;ht<ut.length;++ht)pt[ht&7]=pt[ht&7]<<15^ut.charCodeAt(ht)+pt[ht+1&7]<<13;for(;pt.length<8;)pt.push(0);for(ht=0;ht<8&&pt[ht]===0;++ht);for(ht==8?pt[7]=-1:pt[ht],lt.x=pt,lt.i=0,ht=256;ht>0;--ht)lt.next()}at(ot,it)}function st(it,ot){return ot.x=it.x.slice(),ot.i=it.i,ot}function rt(it,ot){it==null&&(it=+new Date);var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(lt.x&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.xorshift7=rt})(commonjsGlobal,Xe)})(xorshift7$1);var xorshift7Exports=xorshift7$1.exports,xor4096$1={exports:{}};xor4096$1.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this;ot.next=function(){var lt=ot.w,ut=ot.X,ht=ot.i,pt,ft;return ot.w=lt=lt+1640531527|0,ft=ut[ht+34&127],pt=ut[ht=ht+1&127],ft^=ft<<13,pt^=pt<<17,ft^=ft>>>15,pt^=pt>>>12,ft=ut[ht]=ft^pt,ot.i=ht,ft+(lt^lt>>>16)|0};function at(lt,ut){var ht,pt,ft,xt,vt,At=[],Et=128;for(ut===(ut|0)?(pt=ut,ut=null):(ut=ut+"\0",pt=0,Et=Math.max(Et,ut.length)),ft=0,xt=-32;xt<Et;++xt)ut&&(pt^=ut.charCodeAt((xt+32)%ut.length)),xt===0&&(vt=pt),pt^=pt<<10,pt^=pt>>>15,pt^=pt<<4,pt^=pt>>>13,xt>=0&&(vt=vt+1640531527|0,ht=At[xt&127]^=pt+vt,ft=ht==0?ft+1:0);for(ft>=128&&(At[(ut&&ut.length||0)&127]=-1),ft=127,xt=512;xt>0;--xt)pt=At[ft+34&127],ht=At[ft=ft+1&127],pt^=pt<<13,ht^=ht<<17,pt^=pt>>>15,ht^=ht>>>12,At[ft]=pt^ht;lt.w=vt,lt.X=At,lt.i=ft}at(ot,it)}function st(it,ot){return ot.i=it.i,ot.w=it.w,ot.X=it.X.slice(),ot}function rt(it,ot){it==null&&(it=+new Date);var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(lt.X&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.xor4096=rt})(commonjsGlobal,Xe)})(xor4096$1);var xor4096Exports=xor4096$1.exports,tychei$1={exports:{}};tychei$1.exports;(function(Xe){(function(Ke,Ye,Je){function tt(it){var ot=this,at="";ot.next=function(){var ut=ot.b,ht=ot.c,pt=ot.d,ft=ot.a;return ut=ut<<25^ut>>>7^ht,ht=ht-pt|0,pt=pt<<24^pt>>>8^ft,ft=ft-ut|0,ot.b=ut=ut<<20^ut>>>12^ht,ot.c=ht=ht-pt|0,ot.d=pt<<16^ht>>>16^ft,ot.a=ft-ut|0},ot.a=0,ot.b=0,ot.c=-1640531527,ot.d=1367130551,it===Math.floor(it)?(ot.a=it/4294967296|0,ot.b=it|0):at+=it;for(var lt=0;lt<at.length+20;lt++)ot.b^=at.charCodeAt(lt)|0,ot.next()}function st(it,ot){return ot.a=it.a,ot.b=it.b,ot.c=it.c,ot.d=it.d,ot}function rt(it,ot){var at=new tt(it),lt=ot&&ot.state,ut=function(){return(at.next()>>>0)/4294967296};return ut.double=function(){do var ht=at.next()>>>11,pt=(at.next()>>>0)/4294967296,ft=(ht+pt)/(1<<21);while(ft===0);return ft},ut.int32=at.next,ut.quick=ut,lt&&(typeof lt=="object"&&st(lt,at),ut.state=function(){return st(at,{})}),ut}Ye&&Ye.exports?Ye.exports=rt:this.tychei=rt})(commonjsGlobal,Xe)})(tychei$1);var tycheiExports=tychei$1.exports,seedrandom$1={exports:{}};(function(Xe){(function(Ke,Ye){var Je=this,tt=256,st=6,rt=52,it="random",ot=Ye.pow(tt,st),at=Ye.pow(2,rt),lt=at*2,ut=tt-1,ht;function pt(_t,Ct,Tt){var St=[];Ct=Ct==!0?{entropy:!0}:Ct||{};var Rt=At(vt(Ct.entropy?[_t,wt(Ke)]:_t??Et(),3),St),Nt=new ft(St),Pt=function(){for(var Bt=Nt.g(st),Lt=ot,zt=0;Bt<at;)Bt=(Bt+zt)*tt,Lt*=tt,zt=Nt.g(1);for(;Bt>=lt;)Bt/=2,Lt/=2,zt>>>=1;return(Bt+zt)/Lt};return Pt.int32=function(){return Nt.g(4)|0},Pt.quick=function(){return Nt.g(4)/4294967296},Pt.double=Pt,At(wt(Nt.S),Ke),(Ct.pass||Tt||function(Bt,Lt,zt,Dt){return Dt&&(Dt.S&&xt(Dt,Nt),Bt.state=function(){return xt(Nt,{})}),zt?(Ye[it]=Bt,Lt):Bt})(Pt,Rt,"global"in Ct?Ct.global:this==Ye,Ct.state)}Ye["seed"+it]=pt;function ft(_t){var Ct,Tt=_t.length,St=this,Rt=0,Nt=St.i=St.j=0,Pt=St.S=[];for(Tt||(_t=[Tt++]);Rt<tt;)Pt[Rt]=Rt++;for(Rt=0;Rt<tt;Rt++)Pt[Rt]=Pt[Nt=ut&Nt+_t[Rt%Tt]+(Ct=Pt[Rt])],Pt[Nt]=Ct;(St.g=function(Bt){for(var Lt,zt=0,Dt=St.i,Vt=St.j,Gt=St.S;Bt--;)Lt=Gt[Dt=ut&Dt+1],zt=zt*tt+Gt[ut&(Gt[Dt]=Gt[Vt=ut&Vt+Lt])+(Gt[Vt]=Lt)];return St.i=Dt,St.j=Vt,zt})(tt)}function xt(_t,Ct){return Ct.i=_t.i,Ct.j=_t.j,Ct.S=_t.S.slice(),Ct}function vt(_t,Ct){var Tt=[],St=typeof _t,Rt;if(Ct&&St=="object")for(Rt in _t)try{Tt.push(vt(_t[Rt],Ct-1))}catch{}return Tt.length?Tt:St=="string"?_t:_t+"\0"}function At(_t,Ct){for(var Tt=_t+"",St,Rt=0;Rt<Tt.length;)Ct[ut&Rt]=ut&(St^=Ct[ut&Rt]*19)+Tt.charCodeAt(Rt++);return wt(Ct)}function Et(){try{var _t;return ht&&(_t=ht.randomBytes)?_t=_t(tt):(_t=new Uint8Array(tt),(Je.crypto||Je.msCrypto).getRandomValues(_t)),wt(_t)}catch{var Ct=Je.navigator,Tt=Ct&&Ct.plugins;return[+new Date,Je,Tt,Je.screen,wt(Ke)]}}function wt(_t){return String.fromCharCode.apply(0,_t)}if(At(Ye.random(),Ke),Xe.exports){Xe.exports=pt;try{ht=require$$0$1}catch{}}})([],Math)})(seedrandom$1);var seedrandomExports=seedrandom$1.exports,alea=aleaExports,xor128=xor128Exports,xorwow=xorwowExports,xorshift7=xorshift7Exports,xor4096=xor4096Exports,tychei=tycheiExports,sr=seedrandomExports;sr.alea=alea;sr.xor128=xor128;sr.xorwow=xorwow;sr.xorshift7=xorshift7;sr.xor4096=xor4096;sr.tychei=tychei;var seedrandom=sr;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softmax$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{logits:tt}=Ke,{dim:st}=Je,rt=tt.shape.length;let it=st;if(it===-1&&(it=rt-1),it!==rt-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${rt} and dim was ${it}`);const ot=parseAxisParam([it],tt.shape),at=max$2({inputs:{x:tt},backend:Ye,attrs:{reductionIndices:ot,keepDims:!1}}),lt=expandShapeToKeepDim(at.shape,ot),ut=reshape$1({inputs:{x:at},backend:Ye,attrs:{shape:lt}}),ht=sub$1({inputs:{a:tt,b:ut},backend:Ye}),pt=exp$1({inputs:{x:ht},backend:Ye}),ft=sum$1({inputs:{x:pt},backend:Ye,attrs:{axis:ot,keepDims:!1}}),xt=reshape$1({inputs:{x:ft},backend:Ye,attrs:{shape:lt}}),vt=div({inputs:{a:pt,b:xt},backend:Ye});return Ye.disposeIntermediateTensorInfo(at),Ye.disposeIntermediateTensorInfo(ut),Ye.disposeIntermediateTensorInfo(ht),Ye.disposeIntermediateTensorInfo(pt),Ye.disposeIntermediateTensorInfo(ft),Ye.disposeIntermediateTensorInfo(xt),vt}const softmaxConfig$1={kernelName:Softmax$2,backendName:"cpu",kernelFunc:softmax$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function multinomial$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{logits:tt}=Ke,{numSamples:st,seed:rt,normalized:it}=Je;assertNotComplex$1(tt,"multinomial");const ot=it?tt:softmax$1({inputs:{logits:tt},backend:Ye,attrs:{dim:-1}}),at=ot.shape[0],lt=ot.shape[1],ut=Ye.data.get(ot.dataId).values,ht=[at,st],pt=makeZerosTypedArray(sizeFromShape(ht),"int32");for(let ft=0;ft<at;++ft){const xt=ft*lt,vt=new Float32Array(lt-1);vt[0]=ut[xt];for(let wt=1;wt<vt.length;++wt)vt[wt]=vt[wt-1]+ut[xt+wt];const At=seedrandom.alea(rt.toString()),Et=ft*st;for(let wt=0;wt<st;++wt){const _t=At();pt[Et+wt]=vt.length;for(let Ct=0;Ct<vt.length;Ct++)if(_t<vt[Ct]){pt[Et+wt]=Ct;break}}}return it||Ye.disposeIntermediateTensorInfo(ot),Ye.makeTensorInfo(ht,"int32",pt)}const multinomialConfig$1={kernelName:Multinomial,backendName:"cpu",kernelFunc:multinomial$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV3Impl$1=nonMaxSuppressionV3Impl$2;function nonMaxSuppressionV3$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{boxes:tt,scores:st}=Ke,{maxOutputSize:rt,iouThreshold:it,scoreThreshold:ot}=Je;assertNotComplex$1(tt,"NonMaxSuppression");const at=Ye.data.get(tt.dataId).values,lt=Ye.data.get(st.dataId).values,{selectedIndices:ut}=nonMaxSuppressionV3Impl$1(at,lt,rt,it,ot);return Ye.makeTensorInfo([ut.length],"int32",new Int32Array(ut))}const nonMaxSuppressionV3Config$1={kernelName:NonMaxSuppressionV3,backendName:"cpu",kernelFunc:nonMaxSuppressionV3$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV4Impl$1=nonMaxSuppressionV4Impl$2;function nonMaxSuppressionV4$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{boxes:tt,scores:st}=Ke,{maxOutputSize:rt,iouThreshold:it,scoreThreshold:ot,padToMaxOutputSize:at}=Je;assertNotComplex$1(tt,"NonMaxSuppressionPadded");const lt=Ye.data.get(tt.dataId).values,ut=Ye.data.get(st.dataId).values,{selectedIndices:ht,validOutputs:pt}=nonMaxSuppressionV4Impl$1(lt,ut,rt,it,ot,at);return[Ye.makeTensorInfo([ht.length],"int32",new Int32Array(ht)),Ye.makeTensorInfo([],"int32",new Int32Array([pt]))]}const nonMaxSuppressionV4Config$1={kernelName:NonMaxSuppressionV4,backendName:"cpu",kernelFunc:nonMaxSuppressionV4$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV5Impl$1=nonMaxSuppressionV5Impl$2;function nonMaxSuppressionV5$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{boxes:tt,scores:st}=Ke,{maxOutputSize:rt,iouThreshold:it,scoreThreshold:ot,softNmsSigma:at}=Je;assertNotComplex$1(tt,"NonMaxSuppressionWithScore");const lt=Ye.data.get(tt.dataId).values,ut=Ye.data.get(st.dataId).values,ht=rt,pt=it,ft=ot,xt=at,{selectedIndices:vt,selectedScores:At}=nonMaxSuppressionV5Impl$1(lt,ut,ht,pt,ft,xt);return[Ye.makeTensorInfo([vt.length],"int32",new Int32Array(vt)),Ye.makeTensorInfo([At.length],"float32",new Float32Array(At))]}const nonMaxSuppressionV5Config$1={kernelName:NonMaxSuppressionV5,backendName:"cpu",kernelFunc:nonMaxSuppressionV5$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oneHot$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{indices:tt}=Ke,{depth:st,onValue:rt,offValue:it}=Je;assertNotComplex$1(tt,"oneHot");const ot=sizeFromShape(tt.shape),at=new Float32Array(ot*st);at.fill(it);const lt=Ye.data.get(tt.dataId).values;for(let ut=0;ut<ot;++ut)lt[ut]>=0&&lt[ut]<st&&(at[ut*st+lt[ut]]=rt);return Ye.makeTensorInfo([...tt.shape,st],"int32",at)}const oneHotConfig$1={kernelName:OneHot,backendName:"cpu",kernelFunc:oneHot$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zerosLike$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{x:Je}=Ke;if(Je.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(Je.dtype==="complex64"){const tt=real$1({inputs:{input:Je},backend:Ye}),st=zerosLike$1({inputs:{x:tt},backend:Ye}),rt=imag$1({inputs:{input:Je},backend:Ye}),it=zerosLike$1({inputs:{x:rt},backend:Ye}),ot=complex$1({inputs:{real:st,imag:it},backend:Ye});return Ye.disposeIntermediateTensorInfo(tt),Ye.disposeIntermediateTensorInfo(st),Ye.disposeIntermediateTensorInfo(rt),Ye.disposeIntermediateTensorInfo(it),ot}else return fill$1({backend:Ye,attrs:{shape:Je.shape,value:0,dtype:Je.dtype}})}const zerosLikeConfig$1={kernelName:ZerosLike,backendName:"cpu",kernelFunc:zerosLike$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function onesLike$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{x:Je}=Ke;if(Je.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(Je.dtype==="complex64"){const tt=real$1({inputs:{input:Je},backend:Ye}),st=onesLike$1({inputs:{x:tt},backend:Ye}),rt=imag$1({inputs:{input:Je},backend:Ye}),it=zerosLike$1({inputs:{x:rt},backend:Ye}),ot=complex$1({inputs:{real:st,imag:it},backend:Ye});return Ye.disposeIntermediateTensorInfo(tt),Ye.disposeIntermediateTensorInfo(st),Ye.disposeIntermediateTensorInfo(rt),Ye.disposeIntermediateTensorInfo(it),ot}else return fill$1({backend:Ye,attrs:{shape:Je.shape,value:1,dtype:Je.dtype}})}const onesLikeConfig$1={kernelName:OnesLike,backendName:"cpu",kernelFunc:onesLike$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pack$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{axis:tt}=Je;if(Ke.length===1)return expandDims$1({inputs:{input:Ke[0]},backend:Ye,attrs:{dim:tt}});const st=Ke[0].shape,rt=Ke[0].dtype;Ke.forEach(lt=>{assertShapesMatch(st,lt.shape,"All tensors passed to stack must have matching shapes"),assert$2(rt===lt.dtype,()=>"All tensors passed to stack must have matching dtypes")});const it=[],ot=Ke.map(lt=>{const ut=expandDims$1({inputs:{input:lt},backend:Ye,attrs:{dim:tt}});return it.push(ut),ut}),at=concat$1({inputs:ot,backend:Ye,attrs:{axis:tt}});return it.forEach(lt=>Ye.disposeIntermediateTensorInfo(lt)),at}const packConfig$1={kernelName:Pack,backendName:"cpu",kernelFunc:pack$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function padV2$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{paddings:st,constantValue:rt}=Je;assertNotComplex$1(tt,"pad");const it=st.map((Et,wt)=>Et[0]+tt.shape[wt]+Et[1]),ot=st.map(Et=>Et[0]),at=Ye.data.get(tt.dataId).values,lt=sizeFromShape(tt.shape),ut=tt.shape.length,ht=computeStrides(tt.shape),pt=sizeFromShape(it),ft=it.length,xt=computeStrides(it),vt=getTypedArrayFromDType(tt.dtype,pt);rt!==0&&vt.fill(rt);for(let Et=0;Et<lt;Et++){const _t=indexToLoc(Et,ut,ht).map((Tt,St)=>Tt+ot[St]),Ct=locToIndex(_t,ft,xt);vt[Ct]=at[Et]}return{dataId:Ye.write(vt,it,tt.dtype),shape:it,dtype:tt.dtype}}const padV2Config$1={kernelName:PadV2,backendName:"cpu",kernelFunc:padV2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const powImpl=createSimpleBinaryKernelImpl((Xe,Ke)=>Math.pow(Xe,Ke)),pow$1=binaryKernelFunc$1(Pow$1,powImpl),powConfig$1={kernelName:Pow$1,backendName:"cpu",kernelFunc:pow$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function range$2(Xe){const{backend:Ke,attrs:Ye}=Xe,{start:Je,stop:tt,dtype:st,step:rt}=Ye,it=rangeImpl(Je,tt,rt,st);return Ke.makeTensorInfo([it.length],st,it)}const rangeConfig$1={kernelName:Range,backendName:"cpu",kernelFunc:range$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reciprocal$1=unaryKernelFunc$1(Reciprocal,Xe=>1/Xe),reciprocalConfig$1={kernelName:Reciprocal,backendName:"cpu",kernelFunc:reciprocal$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinear$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{images:tt}=Ke,{alignCorners:st,halfPixelCenters:rt,size:it}=Je;assertNotComplex$1(tt,"resizeBilinear");const ot=computeStrides(tt.shape),[at,lt]=it,[ut,ht,pt,ft]=tt.shape,xt=Ye.data.get(tt.dataId).values,vt=new Float32Array(sizeFromShape([ut,at,lt,ft])),At=[st&&at>1?ht-1:ht,st&&lt>1?pt-1:pt],Et=[st&&at>1?at-1:at,st&&lt>1?lt-1:lt];let wt=0;const _t=At[0]/Et[0],Ct=At[1]/Et[1];for(let Tt=0;Tt<ut;Tt++)for(let St=0;St<at;St++){let Rt;rt?Rt=_t*(St+.5)-.5:Rt=_t*St;const Nt=Math.max(0,Math.floor(Rt)),Pt=Rt-Nt,Bt=Math.min(ht-1,Math.ceil(Rt)),Lt=Tt*ot[0]+Nt*ot[1],zt=Tt*ot[0]+Bt*ot[1];for(let Dt=0;Dt<lt;Dt++){let Vt;rt?Vt=Ct*(Dt+.5)-.5:Vt=Ct*Dt;const Gt=Math.max(0,Math.floor(Vt)),Qt=Vt-Gt,jt=Math.min(pt-1,Math.ceil(Vt)),Ht=Lt+Gt*ot[2],Yt=zt+Gt*ot[2],Jt=Lt+jt*ot[2],Zt=zt+jt*ot[2];for(let nn=0;nn<ft;nn++){const cn=xt[Ht+nn],an=xt[Yt+nn],mn=xt[Jt+nn],dn=xt[Zt+nn],fn=cn+(mn-cn)*Qt,Sn=an+(dn-an)*Qt,Tn=fn+(Sn-fn)*Pt;vt[wt++]=Tn}}}return Ye.makeTensorInfo([ut,at,lt,ft],"float32",vt)}const resizeBilinearConfig$1={kernelName:ResizeBilinear,backendName:"cpu",kernelFunc:resizeBilinear$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinearGrad$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{images:tt,dy:st}=Ke,{alignCorners:rt}=Je;assertNotComplex$1([st,tt],"resizeBilinearGrad");const it=computeStrides(tt.shape),[ot,at,lt,ut]=tt.shape,[,ht,pt]=st.shape,ft=new Float32Array(ot*at*lt*ut),xt=[rt&&ht>1?at-1:at,rt&&pt>1?lt-1:lt],vt=[rt&&ht>1?ht-1:ht,rt&&pt>1?pt-1:pt],At=xt[0]/vt[0],Et=xt[1]/vt[1],wt=Ye.data.get(st.dataId).values;let _t=0;for(let Ct=0;Ct<ot;Ct++){const Tt=Ct*it[0];for(let St=0;St<ht;St++){const Rt=St*At,Nt=Math.floor(Rt),Pt=Math.min(Math.ceil(Rt),at-1),Bt=Tt+Nt*it[1],Lt=Tt+Pt*it[1],zt=Rt-Nt,Dt=1-zt;for(let Vt=0;Vt<pt;Vt++){const Gt=Vt*Et,Qt=Math.floor(Gt),jt=Math.min(Math.ceil(Gt),lt-1),Ht=Gt-Qt,Yt=1-Ht,Jt=Bt+Qt*it[2],Zt=Bt+jt*it[2],nn=Lt+Qt*it[2],cn=Lt+jt*it[2],an=Dt*Yt,mn=Dt*Ht,dn=zt*Yt,fn=zt*Ht;for(let Sn=0;Sn<ut;Sn++){const Tn=wt[_t++];ft[Jt+Sn]+=Tn*an,ft[Zt+Sn]+=Tn*mn,ft[nn+Sn]+=Tn*dn,ft[cn+Sn]+=Tn*fn}}}}return Ye.makeTensorInfo([ot,lt,at,ut],"float32",ft)}const resizeBilinearGradConfig$1={kernelName:ResizeBilinearGrad,backendName:"cpu",kernelFunc:resizeBilinearGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighbor$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{images:tt}=Ke,{alignCorners:st,halfPixelCenters:rt,size:it}=Je;assertNotComplex$1(tt,"resizeNearestNeighbor");const ot=computeStrides(tt.shape),[at,lt]=it,[ut,ht,pt,ft]=tt.shape,xt=Ye.data.get(tt.dataId).values,vt=new Float32Array(ut*at*lt*ft),At=[st&&at>1?ht-1:ht,st&&lt>1?pt-1:pt],Et=[st&&at>1?at-1:at,st&&lt>1?lt-1:lt],wt=At[0]/Et[0],_t=At[1]/Et[1];let Ct=0;for(let Tt=0;Tt<ut;Tt++){const St=Tt*ot[0];for(let Rt=0;Rt<at;Rt++){const Nt=rt?wt*(Rt+.5):wt*Rt;let Pt=Math.min(ht-1,st?Math.round(Nt):Math.floor(Nt));rt&&(Pt=Math.max(0,Pt));const Bt=St+Pt*ot[1];for(let Lt=0;Lt<lt;Lt++){const zt=rt?_t*(Lt+.5):_t*Lt;let Dt=Math.min(pt-1,st?Math.round(zt):Math.floor(zt));rt&&(Dt=Math.max(0,Dt));const Vt=Bt+Dt*ot[2];for(let Gt=0;Gt<ft;Gt++){const Qt=xt[Vt+Gt];vt[Ct++]=Qt}}}}return Ye.makeTensorInfo([ut,at,lt,ft],tt.dtype,vt)}const resizeNearestNeighborConfig$1={kernelName:ResizeNearestNeighbor,backendName:"cpu",kernelFunc:resizeNearestNeighbor$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighborGrad$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{images:tt,dy:st}=Ke,{alignCorners:rt}=Je;assertNotComplex$1([st,tt],"resizeNearestNeighborGrad");const it=computeStrides(tt.shape),ot=computeStrides(st.shape),[at,lt,ut,ht]=tt.shape,[,pt,ft]=st.shape,xt=new Float32Array(at*lt*ut*ht),vt=Ye.data.get(st.dataId).values,At=[rt&&pt>1?lt-1:lt,rt&&ft>1?ut-1:ut],Et=[rt&&pt>1?pt-1:pt,rt&&ft>1?ft-1:ft],wt=At[0]/Et[0],_t=At[1]/Et[1],Ct=1/wt,Tt=1/_t,St=Math.ceil(Ct)*2+2,Rt=Math.ceil(Tt)*2+2;for(let Nt=0;Nt<at;Nt++){const Pt=Nt*it[0];for(let Bt=0;Bt<lt;Bt++){const Lt=Pt+Bt*it[1],zt=Math.floor(Bt*Ct),Dt=Math.floor(zt-St/2);for(let Vt=0;Vt<ut;Vt++){const Gt=Lt+Vt*it[2],Qt=Math.floor(Vt*Tt),jt=Math.floor(Qt-Rt/2);for(let Ht=0;Ht<ht;Ht++){let Yt=0;for(let Jt=0;Jt<St;Jt++){const Zt=Jt+Dt;if(Zt<0||Zt>=pt)continue;const nn=Pt+Zt*ot[1],cn=Zt*wt,an=Math.min(lt-1,rt?Math.round(cn):Math.floor(cn));if(Bt===an)for(let mn=0;mn<Rt;mn++){const dn=mn+jt;if(dn<0||dn>=ft)continue;const fn=nn+dn*ot[2],Sn=dn*_t,Tn=Math.min(ut-1,rt?Math.round(Sn):Math.floor(Sn));Vt===Tn&&(Yt+=vt[fn+Ht])}}xt[Gt+Ht]=Yt}}}}return Ye.makeTensorInfo(tt.shape,tt.dtype,xt)}const resizeNearestNeighborGradConfig$1={kernelName:ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:resizeNearestNeighborGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{dims:st}=Je;assertNotComplex$1(tt,"reverse");const rt=tt.shape.length,it=parseAxisParam(st,tt.shape);if(rt===0)return identity$4({inputs:{x:tt},backend:Ye});const ot=new TensorBuffer(tt.shape,tt.dtype),at=Ye.bufferSync(tt);for(let lt=0;lt<ot.size;lt++){const ut=ot.indexToLoc(lt),ht=ut.slice();it.forEach(pt=>ht[pt]=tt.shape[pt]-1-ht[pt]),ot.set(at.get(...ht),...ut)}return Ye.makeTensorInfo(ot.shape,ot.dtype,ot.values)}const reverseConfig$1={kernelName:Reverse,backendName:"cpu",kernelFunc:reverse$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rotateWithOffsetConfig$1={kernelName:RotateWithOffset,backendName:"cpu",kernelFunc:({inputs:Xe,attrs:Ke,backend:Ye})=>{const{image:Je}=Xe,{radians:tt,fillValue:st,center:rt}=Ke,it=Ye,ot=getTypedArrayFromDType(Je.dtype,sizeFromShape(Je.shape)),[at,lt,ut,ht]=Je.shape,[pt,ft]=getImageCenter(rt,lt,ut),xt=255,vt=Math.sin(tt),At=Math.cos(tt),Et=it.data.get(Je.dataId).values;for(let _t=0;_t<at;_t++){const Ct=_t*ut*lt*ht;for(let Tt=0;Tt<lt;Tt++){const St=Tt*(ut*ht);for(let Rt=0;Rt<ut;Rt++){const Nt=Rt*ht;for(let Pt=0;Pt<ht;Pt++){const Bt=[at,Tt,Rt,Pt],Lt=Bt[2],zt=Bt[1];let Dt=(Lt-pt)*At-(zt-ft)*vt,Vt=(Lt-pt)*vt+(zt-ft)*At;Dt=Math.round(Dt+pt),Vt=Math.round(Vt+ft);let Gt=st;if(typeof st!="number"&&(Pt===3?Gt=xt:Gt=st[Pt]),Dt>=0&&Dt<ut&&Vt>=0&&Vt<lt){const jt=Vt*(ut*ht),Ht=Dt*ht,Yt=Ct+jt+Ht+Pt;Gt=Et[Yt]}const Qt=Ct+St+Nt+Pt;ot[Qt]=Gt}}}}return{dataId:it.write(ot,Je.shape,Je.dtype),shape:Je.shape,dtype:Je.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const round$2=unaryKernelFunc$1(Round,Xe=>{const Ke=Math.floor(Xe);return Xe-Ke<.5?Math.floor(Xe):Xe-Ke>.5?Math.ceil(Xe):Ke%2===0?Ke:Ke+1}),roundConfig$1={kernelName:Round,backendName:"cpu",kernelFunc:round$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scatterImpl(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at){const lt=[Je/tt,tt],ut=Xe.values,ht=Ke.values;if(Je===0)return buffer$1(Ye,Ke.dtype);const pt=buffer$1(lt,Ke.dtype);pt.values.fill(ot);for(let ft=0;ft<st;ft++){const xt=[];let vt=0;for(let At=0;At<rt;At++){const Et=ut[ft*rt+At];xt.push(Et),vt+=Et*it[At]}if(vt<0||vt>=Je/tt)throw new Error(`Invalid indices: ${xt} does not index into ${Ye}`);for(let At=0;At<tt;At++)at?pt.values[vt*tt+At]+=ht[ft*tt+At]:pt.values[vt*tt+At]=Ke.rank===0?ht[0]:ht[ft*tt+At]}return pt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scatterNd$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{indices:tt,updates:st}=Ke,{shape:rt}=Je,{sliceRank:it,numUpdates:ot,sliceSize:at,strides:lt,outputSize:ut}=calculateShapes(st,tt,rt),ht=!0,pt=Ye.bufferSync(tt),ft=Ye.bufferSync(st),xt=scatterImpl(pt,ft,rt,ut,at,ot,it,lt,0,ht);return Ye.makeTensorInfo(rt,xt.dtype,xt.values)}const scatterNdConfig$1={kernelName:ScatterNd,backendName:"cpu",kernelFunc:scatterNd$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function select$2(Xe){const{inputs:Ke,backend:Ye}=Xe,{condition:Je,t:tt,e:st}=Ke;assertNotComplex$1([Je,tt,st],"select");const rt=Je.shape.length,it=Ye.data.get(Je.dataId).values,ot=Ye.data.get(tt.dataId).values,at=Ye.data.get(st.dataId).values,lt=upcastType(tt.dtype,st.dtype),ut=makeZerosTypedArray(sizeFromShape(tt.shape),lt);let ht=0;const pt=rt===0||rt>1||tt.shape.length===1?1:sizeFromShape(tt.shape.slice(1));for(let ft=0;ft<it.length;ft++)for(let xt=0;xt<pt;xt++)it[ft]===1?ut[ht++]=ot[ft]:ut[ht++]=at[ft];return Ye.makeTensorInfo(tt.shape,lt,ut)}const selectConfig$1={kernelName:Select$2,backendName:"cpu",kernelFunc:select$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const scaleAlpha=SELU_SCALEALPHA,scale$1=SELU_SCALE,selu$1=unaryKernelFunc$1(Selu$1,Xe=>Xe>=0?scale$1*Xe:scaleAlpha*(Math.exp(Xe)-1)),seluConfig$1={kernelName:Selu$1,backendName:"cpu",kernelFunc:selu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sigmoid$1=unaryKernelFunc$1(Sigmoid$1,Xe=>1/(1+Math.exp(-Xe))),sigmoidConfig$1={kernelName:Sigmoid$1,backendName:"cpu",kernelFunc:sigmoid$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sign$2=unaryKernelFunc$1(Sign,Xe=>Xe<0?-1:Xe>0?1:0),signConfig$1={kernelName:Sign,backendName:"cpu",kernelFunc:sign$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sin$1=unaryKernelFunc$1(Sin,Xe=>Math.sin(Xe)),sinConfig$1={kernelName:Sin,backendName:"cpu",kernelFunc:sin$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sinh$1=unaryKernelFunc$1(Sinh,Xe=>Math.sinh(Xe)),sinhConfig$1={kernelName:Sinh,backendName:"cpu",kernelFunc:sinh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const epsilon=11920928955078125e-23,threshold=Math.log(epsilon)+2,softplus$1=unaryKernelFunc$1(Softplus$1,Xe=>{const Ke=Xe>-threshold,Ye=Xe<threshold,Je=Math.exp(Xe);let tt;return Ye?tt=Je:Ke?tt=Xe:tt=Math.log(1+Je),tt}),softplusConfig$1={kernelName:Softplus$1,backendName:"cpu",kernelFunc:softplus$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function spaceToBatchND$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{blockShape:st,paddings:rt}=Je;assertNotComplex$1([tt],"spaceToBatchND");const it=sizeFromShape(st),ot=[[0,0]];ot.push(...rt);for(let Tt=1+st.length;Tt<tt.shape.length;++Tt)ot.push([0,0]);const at=padV2Config$1.kernelFunc({inputs:{x:tt},backend:Ye,attrs:{paddings:ot,constantValue:0}}),lt=getReshaped(at.shape,st,it,!1),ut=getPermuted(lt.length,st.length,!1),ht=getReshapedPermuted(at.shape,st,it,!1),xt=reshape$1({inputs:{x:at},backend:Ye,attrs:{shape:lt}}),Et=transpose$1({inputs:{x:xt},backend:Ye,attrs:{perm:ut}}),Ct=reshape$1({inputs:{x:Et},backend:Ye,attrs:{shape:ht}});return Ye.disposeIntermediateTensorInfo(at),Ye.disposeIntermediateTensorInfo(xt),Ye.disposeIntermediateTensorInfo(Et),Ct}const spaceToBatchNDConfig$1={kernelName:SpaceToBatchND,backendName:"cpu",kernelFunc:spaceToBatchND$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseToDense$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{sparseIndices:tt,sparseValues:st,defaultValue:rt}=Ke,{outputShape:it}=Je,{sliceRank:ot,numUpdates:at,sliceSize:lt,strides:ut,outputSize:ht}=calculateShapes(st,tt,it),pt=!1,ft=Ye.bufferSync(tt),xt=Ye.bufferSync(st),vt=Ye.data.get(rt.dataId).values[0],At=scatterImpl(ft,xt,it,ht,lt,at,ot,ut,vt,pt);return Ye.makeTensorInfo(it,At.dtype,At.values)}const sparseToDenseConfig$1={kernelName:SparseToDense,backendName:"cpu",kernelFunc:sparseToDense$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function splitV$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{numOrSizeSplits:st,axis:rt}=Je,it=parseAxisParam(rt,tt.shape)[0],ot=prepareSplitSize(tt,st,it),at=new Array(tt.shape.length).fill(0),lt=tt.shape.slice();return ot.map(ut=>{const ht=[...lt];ht[it]=ut;const pt=slice$3({inputs:{x:tt},backend:Ye,attrs:{begin:at,size:ht}});return at[it]+=ut,pt})}const splitVConfig$1={kernelName:SplitV,backendName:"cpu",kernelFunc:splitV$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sqrt$1=unaryKernelFunc$1(Sqrt,Xe=>Math.sqrt(Xe)),sqrtConfig$1={kernelName:Sqrt,backendName:"cpu",kernelFunc:sqrt$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squareConfig$1={kernelName:Square,backendName:"cpu",kernelFunc:({inputs:Xe,backend:Ke})=>{const{x:Ye}=Xe,Je=Ke;assertNotComplex$1(Ye,"square");const tt=Je.data.get(Ye.dataId).values,st=new Float32Array(tt.length);for(let it=0;it<tt.length;++it){const ot=tt[it];st[it]=ot*ot}return{dataId:Je.write(st,Ye.shape,Ye.dtype),shape:Ye.shape,dtype:Ye.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const step$1=unaryKernelFunc$1(Step,(Xe,Ke)=>{const Ye=Ke;return isNaN(Xe)?NaN:Xe>0?1:Ye.alpha}),stepConfig$1={kernelName:Step,backendName:"cpu",kernelFunc:step$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSlice$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{begin:st,end:rt,strides:it,beginMask:ot,endMask:at,ellipsisMask:lt,newAxisMask:ut,shrinkAxisMask:ht}=Je;assertNotComplex$1(tt,"stridedSlice");const{nonStrided:pt,$begin:ft,$strides:xt,size:vt,newShape:At,outShape:Et}=sliceInfo(tt.shape,st,rt,it,ot,at,lt,ut,ht),wt=reshape$1({inputs:{x:tt},backend:Ye,attrs:{shape:At}});let _t;if(pt){const Tt=slice$3({inputs:{x:wt},backend:Ye,attrs:{begin:ft,size:vt}});_t=reshape$1({inputs:{x:Tt},backend:Ye,attrs:{shape:Et}}),Ye.disposeIntermediateTensorInfo(Tt)}else if(Et.some(Tt=>Tt===0))_t=Ye.makeTensorInfo(Et,tt.dtype,[]);else{const Tt=Ye.bufferSync(wt),St=stridedSliceImpl(Et,Tt,xt,ft);_t=Ye.makeTensorInfo(St.shape,St.dtype,St.values)}const Ct=reshape$1({inputs:{x:_t},backend:Ye,attrs:{shape:Et}});return Ye.disposeIntermediateTensorInfo(wt),Ye.disposeIntermediateTensorInfo(_t),Ct}const stridedSliceConfig$1={kernelName:StridedSlice,backendName:"cpu",kernelFunc:stridedSlice$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tan$1=unaryKernelFunc$1(Tan,Xe=>Math.tan(Xe)),tanConfig$1={kernelName:Tan,backendName:"cpu",kernelFunc:tan$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tanh$1=unaryKernelFunc$1(Tanh$1,Xe=>Math.tanh(Xe)),tanhConfig$1={kernelName:Tanh$1,backendName:"cpu",kernelFunc:tanh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tile$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{reps:st}=Je;assertNotComplex$1(tt,"tile");const rt=tileImpl(Ye.bufferSync(tt),st);return Ye.makeTensorInfo(rt.shape,rt.dtype,rt.values)}const tileConfig$1={kernelName:Tile,backendName:"cpu",kernelFunc:tile$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function topK$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{k:st,sorted:rt}=Je;assertNotComplex$1(tt,"topk");const it=Ye.data.get(tt.dataId).values,[ot,at]=topKImpl(it,tt.shape,tt.dtype,st);return[Ye.makeTensorInfo(ot.shape,ot.dtype,ot.values),Ye.makeTensorInfo(at.shape,at.dtype,at.values)]}const topKConfig$1={kernelName:TopK,backendName:"cpu",kernelFunc:topK$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unique$2(Xe){const{inputs:Ke,attrs:Ye,backend:Je}=Xe,{axis:tt}=Ye,{x:st}=Ke;assertNotComplex$1(st,"unique");const rt=Je.data.get(st.dataId).values,{outputValues:it,outputShape:ot,indices:at}=uniqueImpl(rt,tt,st.shape,st.dtype);return[Je.makeTensorInfo(ot,st.dtype,it),Je.makeTensorInfo([at.length],"int32",at)]}const uniqueConfig$1={kernelName:Unique,backendName:"cpu",kernelFunc:unique$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unpack$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{value:tt}=Ke;let{axis:st}=Je;st<0&&(st+=tt.shape.length);const rt=tt.shape.length,it=tt.shape[st],ot=new Array(rt-1);let at=0;for(let pt=0;pt<rt;pt++)pt!==st&&(ot[at++]=tt.shape[pt]);const lt=new Array(rt).fill(0),ut=tt.shape.slice();ut[st]=1;const ht=new Array(it);for(let pt=0;pt<ht.length;pt++){lt[st]=pt;const ft=slice$3({inputs:{x:tt},backend:Ye,attrs:{begin:lt,size:ut}});ht[pt]=reshape$1({inputs:{x:ft},backend:Ye,attrs:{shape:ot}}),Ye.disposeIntermediateTensorInfo(ft)}return ht}const unpackConfig$1={kernelName:Unpack,backendName:"cpu",kernelFunc:unpack$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unsortedSegmentSum$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,segmentIds:st}=Ke,{numSegments:rt}=Je;assertNotComplex$1(tt,"unsortedSegmentSum");const it=tt.shape.length,ot=st.shape.length,at=[],lt=[],ut=it-ot;let ht=st;for(let ft=0;ft<ut;++ft){const xt=expandDims$1({inputs:{input:ht},backend:Ye,attrs:{dim:ft+1}});ht=xt,lt.push(xt)}for(let ft=0;ft<rt;++ft){const xt=createScalarValue(ft,"int32"),vt=Ye.makeTensorInfo([],"int32",xt),At=equal$1({inputs:{a:vt,b:ht},backend:Ye}),Et=cast$1({inputs:{x:At},backend:Ye,attrs:{dtype:"float32"}}),wt=multiply$2({inputs:{a:Et,b:tt},backend:Ye}),_t=sum$1({inputs:{x:wt},backend:Ye,attrs:{axis:0,keepDims:!1}});at.push(_t),lt.push(vt),lt.push(At),lt.push(Et),lt.push(wt),lt.push(_t)}const pt=pack$1({inputs:at,backend:Ye,attrs:{axis:0}});return lt.forEach(ft=>Ye.disposeIntermediateTensorInfo(ft)),pt}const unsortedSegmentSumConfig$1={kernelName:UnsortedSegmentSum,backendName:"cpu",kernelFunc:unsortedSegmentSum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kernelConfigs$1=[_fusedMatMulConfig$1,absConfig$1,acosConfig$1,acoshConfig$1,addConfig$1,addNConfig$1,allConfig$1,anyConfig$1,argMaxConfig$1,argMinConfig$1,asinConfig$1,asinhConfig$1,atanConfig$1,atan2Config$1,atanhConfig$1,avgPoolConfig$1,avgPool3DConfig$1,avgPool3DGradConfig,avgPoolGradConfig$1,batchMatMulConfig$1,batchNormConfig$1,batchToSpaceNDConfig$1,bincountConfig$1,castConfig$1,ceilConfig$1,clipConfig,complexConfig$1,complexAbsConfig$1,concatConfig$1,conv2DBackpropFilterConfig$1,conv2DBackpropInputConfig$1,conv2DConfig$1,conv3DBackpropFilterV2Config$1,conv3DBackpropInputV2Config,conv3DConfig$1,cosConfig$1,coshConfig$1,cropAndResizeConfig$1,cumsumConfig$1,denseBincountConfig$1,depthToSpaceConfig$1,depthwiseConv2dNativeConfig$1,depthwiseConv2dNativeBackpropFilterConfig$1,depthwiseConv2dNativeBackpropInputConfig$1,diagConfig$1,dilation2dConfig,dilation2dBackpropInputConfig,dilation2dBackpropFilterConfig,realDivConfig$1,eluConfig$1,eluGradConfig$1,equalConfig$1,erfConfig$1,expConfig$1,expandDimsConfig$1,expm1Config$1,fftConfig$1,fillConfig$1,flipLeftRightConfig$1,floorConfig$1,floorDivConfig$1,fusedConv2DConfig$1,fusedDepthwiseConv2DConfig$1,gatherNdConfig$1,gatherV2Config$1,greaterConfig$1,greaterEqualConfig$1,identityConfig$1,ifftConfig$1,imagConfig$1,isFiniteConfig$1,isInfConfig$1,isNaNConfig$1,leakyReluConfig$1,lessConfig$1,lessEqualConfig$1,linSpaceConfig$1,logConfig$1,log1pConfig$1,logicalAndConfig$1,logicalNotConfig$1,logicalOrConfig$1,lRNConfig,lRNGradConfig,maximumConfig$1,maxPoolConfig$1,maxPool3DConfig$1,maxPool3DGradConfig,maxPoolGradConfig$1,maxPoolWithArgmaxConfig$1,maxConfig$1,meanConfig$1,minConfig$1,minimumConfig$1,mirrorPadConfig$1,modConfig$1,multinomialConfig$1,multiplyConfig$1,negConfig$1,nonMaxSuppressionV3Config$1,nonMaxSuppressionV4Config$1,nonMaxSuppressionV5Config$1,notEqualConfig$1,oneHotConfig$1,onesLikeConfig$1,packConfig$1,padV2Config$1,powConfig$1,preluConfig$1,prodConfig$1,rangeConfig$1,realConfig$1,reciprocalConfig$1,reluConfig$1,relu6Config$1,reshapeConfig$1,resizeBilinearConfig$1,resizeBilinearGradConfig$1,resizeNearestNeighborConfig$1,resizeNearestNeighborGradConfig$1,reverseConfig$1,rotateWithOffsetConfig$1,roundConfig$1,rsqrtConfig$1,scatterNdConfig$1,selectConfig$1,seluConfig$1,sigmoidConfig$1,signConfig$1,sinConfig$1,sinhConfig$1,sliceConfig$1,softmaxConfig$1,softplusConfig$1,spaceToBatchNDConfig$1,sparseToDenseConfig$1,splitVConfig$1,sqrtConfig$1,squareConfig$1,squaredDifferenceConfig$1,stepConfig$1,stridedSliceConfig$1,subConfig$1,sumConfig$1,tanConfig$1,tanhConfig$1,tileConfig$1,topKConfig$1,transposeConfig$1,uniqueConfig$1,unpackConfig$1,unsortedSegmentSumConfig$1,zerosLikeConfig$1];for(const Xe of kernelConfigs$1)registerKernel(Xe);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const contexts={},WEBGL_ATTRIBUTES={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function setWebGLContext(Xe,Ke){contexts[Xe]=Ke}function getWebGLContext(Xe){if(!(Xe in contexts)){const Ye=getWebGLRenderingContext(Xe);if(Ye!==null)contexts[Xe]=Ye;else return console.log("Could not get context for WebGL version",Xe),null}const Ke=contexts[Xe];return Ke.isContextLost()?(delete contexts[Xe],getWebGLContext(Xe)):(Ke.disable(Ke.DEPTH_TEST),Ke.disable(Ke.STENCIL_TEST),Ke.disable(Ke.BLEND),Ke.disable(Ke.DITHER),Ke.disable(Ke.POLYGON_OFFSET_FILL),Ke.disable(Ke.SAMPLE_COVERAGE),Ke.enable(Ke.SCISSOR_TEST),Ke.enable(Ke.CULL_FACE),Ke.cullFace(Ke.BACK),contexts[Xe])}function createCanvas(Xe){if(typeof OffscreenCanvas<"u"&&Xe===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function getWebGLRenderingContext(Xe){if(Xe!==1&&Xe!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const Ke=createCanvas(Xe);return Ke.addEventListener("webglcontextlost",Ye=>{Ye.preventDefault(),delete contexts[Xe]},!1),Xe===1?Ke.getContext("webgl",WEBGL_ATTRIBUTES)||Ke.getContext("experimental-webgl",WEBGL_ATTRIBUTES):Ke.getContext("webgl2",WEBGL_ATTRIBUTES)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var PackingScheme;(function(Xe){Xe[Xe.DENSE=0]="DENSE",Xe[Xe.SHARED_BATCH=1]="SHARED_BATCH"})(PackingScheme||(PackingScheme={}));var TextureUsage;(function(Xe){Xe[Xe.RENDER=0]="RENDER",Xe[Xe.UPLOAD=1]="UPLOAD",Xe[Xe.PIXELS=2]="PIXELS",Xe[Xe.DOWNLOAD=3]="DOWNLOAD"})(TextureUsage||(TextureUsage={}));var PhysicalTextureType;(function(Xe){Xe[Xe.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",Xe[Xe.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",Xe[Xe.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",Xe[Xe.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",Xe[Xe.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(PhysicalTextureType||(PhysicalTextureType={}));function getUnpackedMatrixTextureShapeWidthHeight(Xe,Ke){return[Ke,Xe]}function getUnpackedArraySizeFromMatrixSize(Xe,Ke){return Xe*Ke}function getDenseTexShape(Xe){const Ke=sizeFromShape(Xe),Ye=Math.ceil(Ke/4);return sizeToSquarishShape(Ye)}function getPackedMatrixTextureShapeWidthHeight(Xe,Ke){return[Math.max(1,Math.ceil(Ke/2)),Math.max(1,Math.ceil(Xe/2))]}function getPackedRGBAArraySizeFromMatrixShape(Xe,Ke){const[Ye,Je]=getPackedMatrixTextureShapeWidthHeight(Xe,Ke);return Ye*Je*4}function getTextureConfig(Xe,Ke){const Ye=Xe;let Je,tt,st,rt,it,ot,at,lt,ut,ht;return env().getNumber("WEBGL_VERSION")===2?(Je=Ye.R32F,tt=Ye.R16F,st=Ye.RGBA16F,rt=Ye.RGBA32F,it=Ye.RED,at=4,lt=1,ut=Ye.HALF_FLOAT,ht=Ye.FLOAT):(Je=Xe.RGBA,tt=Xe.RGBA,st=Xe.RGBA,rt=Ye.RGBA,it=Xe.RGBA,at=4,lt=4,ut=Ke!=null?Ke.HALF_FLOAT_OES:null,ht=Xe.FLOAT),ot=Xe.RGBA,{internalFormatFloat:Je,internalFormatHalfFloat:tt,internalFormatPackedHalfFloat:st,internalFormatPackedFloat:rt,textureFormatFloat:it,downloadTextureFormat:ot,downloadUnpackNumChannels:at,defaultNumChannels:lt,textureTypeHalfFloat:ut,textureTypeFloat:ht}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function callAndCheck(Xe,Ke){const Ye=Ke();return env().getBool("DEBUG")&&checkWebGLError(Xe),Ye}function checkWebGLError(Xe){const Ke=Xe.getError();if(Ke!==Xe.NO_ERROR)throw new Error("WebGL Error: "+getWebGLErrorMessage(Xe,Ke))}const MIN_FLOAT16=596e-10,MAX_FLOAT16=65504;function canBeRepresented(Xe){return!!(env().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||Xe===0||MIN_FLOAT16<Math.abs(Xe)&&Math.abs(Xe)<MAX_FLOAT16)}function getWebGLErrorMessage(Xe,Ke){switch(Ke){case Xe.NO_ERROR:return"NO_ERROR";case Xe.INVALID_ENUM:return"INVALID_ENUM";case Xe.INVALID_VALUE:return"INVALID_VALUE";case Xe.INVALID_OPERATION:return"INVALID_OPERATION";case Xe.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case Xe.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case Xe.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${Ke}`}}function getExtensionOrThrow(Xe,Ke){return throwIfNull(Xe,()=>Xe.getExtension(Ke),'Extension "'+Ke+'" not supported on this browser.')}function createVertexShader$1(Xe,Ke){const Ye=throwIfNull(Xe,()=>Xe.createShader(Xe.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(callAndCheck(Xe,()=>Xe.shaderSource(Ye,Ke)),callAndCheck(Xe,()=>Xe.compileShader(Ye)),Xe.getShaderParameter(Ye,Xe.COMPILE_STATUS)===!1)throw console.log(Xe.getShaderInfoLog(Ye)),new Error("Failed to compile vertex shader.");return Ye}function createFragmentShader(Xe,Ke){const Ye=throwIfNull(Xe,()=>Xe.createShader(Xe.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(callAndCheck(Xe,()=>Xe.shaderSource(Ye,Ke)),callAndCheck(Xe,()=>Xe.compileShader(Ye)),Xe.getShaderParameter(Ye,Xe.COMPILE_STATUS)===!1)throw logShaderSourceAndInfoLog(Ke,Xe.getShaderInfoLog(Ye)),new Error("Failed to compile fragment shader.");return Ye}const lineNumberRegex=/ERROR: [0-9]+:([0-9]+):/g;function logShaderSourceAndInfoLog(Xe,Ke){const Ye=lineNumberRegex.exec(Ke);if(Ye==null){console.log(`Couldn't parse line number in error: ${Ke}`),console.log(Xe);return}const Je=+Ye[1],tt=Xe.split(`
`),st=tt.length.toString().length+2,rt=tt.map((ut,ht)=>rightPad((ht+1).toString(),st)+ut);let it=0;for(let ut=0;ut<rt.length;ut++)it=Math.max(rt[ut].length,it);const ot=rt.slice(0,Je-1),at=rt.slice(Je-1,Je),lt=rt.slice(Je);console.log(ot.join(`
`)),console.log(Ke.split(`
`)[0]),console.log(`%c ${rightPad(at[0],it)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(lt.join(`
`))}function createProgram(Xe){return throwIfNull(Xe,()=>Xe.createProgram(),"Unable to create WebGLProgram.")}function linkProgram(Xe,Ke){if(callAndCheck(Xe,()=>Xe.linkProgram(Ke)),Xe.getProgramParameter(Ke,Xe.LINK_STATUS)===!1)throw console.log(Xe.getProgramInfoLog(Ke)),new Error("Failed to link vertex and fragment shaders.")}function validateProgram(Xe,Ke){if(callAndCheck(Xe,()=>Xe.validateProgram(Ke)),Xe.getProgramParameter(Ke,Xe.VALIDATE_STATUS)===!1)throw console.log(Xe.getProgramInfoLog(Ke)),new Error("Shader program validation failed.")}function createStaticVertexBuffer(Xe,Ke){const Ye=throwIfNull(Xe,()=>Xe.createBuffer(),"Unable to create WebGLBuffer");return callAndCheck(Xe,()=>Xe.bindBuffer(Xe.ARRAY_BUFFER,Ye)),callAndCheck(Xe,()=>Xe.bufferData(Xe.ARRAY_BUFFER,Ke,Xe.STATIC_DRAW)),Ye}function createStaticIndexBuffer(Xe,Ke){const Ye=throwIfNull(Xe,()=>Xe.createBuffer(),"Unable to create WebGLBuffer");return callAndCheck(Xe,()=>Xe.bindBuffer(Xe.ELEMENT_ARRAY_BUFFER,Ye)),callAndCheck(Xe,()=>Xe.bufferData(Xe.ELEMENT_ARRAY_BUFFER,Ke,Xe.STATIC_DRAW)),Ye}function createTexture(Xe){return throwIfNull(Xe,()=>Xe.createTexture(),"Unable to create WebGLTexture.")}function validateTextureSize(Xe,Ke){const Ye=env().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(Xe<=0||Ke<=0){const Je=`[${Xe}x${Ke}]`;throw new Error("Requested texture size "+Je+" is invalid.")}if(Xe>Ye||Ke>Ye){const Je=`[${Xe}x${Ke}]`,tt=`[${Ye}x${Ye}]`;throw new Error("Requested texture size "+Je+" greater than WebGL maximum on this browser / GPU "+tt+".")}}function createFramebuffer(Xe){return throwIfNull(Xe,()=>Xe.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function bindVertexBufferToProgramAttribute(Xe,Ke,Ye,Je,tt,st,rt){const it=Xe.getAttribLocation(Ke,Ye);return it===-1?!1:(callAndCheck(Xe,()=>Xe.bindBuffer(Xe.ARRAY_BUFFER,Je)),callAndCheck(Xe,()=>Xe.vertexAttribPointer(it,tt,Xe.FLOAT,!1,st,rt)),callAndCheck(Xe,()=>Xe.enableVertexAttribArray(it)),!0)}function bindTextureUnit(Xe,Ke,Ye){validateTextureUnit(Xe,Ye),callAndCheck(Xe,()=>Xe.activeTexture(Xe.TEXTURE0+Ye)),callAndCheck(Xe,()=>Xe.bindTexture(Xe.TEXTURE_2D,Ke))}function getProgramUniformLocationOrThrow(Xe,Ke,Ye){return throwIfNull(Xe,()=>Xe.getUniformLocation(Ke,Ye),'uniform "'+Ye+'" not present in program.')}function getProgramUniformLocation(Xe,Ke,Ye){return Xe.getUniformLocation(Ke,Ye)}function bindTextureToProgramUniformSampler(Xe,Ke,Ye,Je){callAndCheck(Xe,()=>bindTextureUnit(Xe,Ke,Je)),callAndCheck(Xe,()=>Xe.uniform1i(Ye,Je))}function bindColorTextureToFramebuffer(Xe,Ke,Ye){callAndCheck(Xe,()=>Xe.bindFramebuffer(Xe.FRAMEBUFFER,Ye)),callAndCheck(Xe,()=>Xe.framebufferTexture2D(Xe.FRAMEBUFFER,Xe.COLOR_ATTACHMENT0,Xe.TEXTURE_2D,Ke,0))}function unbindColorTextureFromFramebuffer(Xe,Ke){callAndCheck(Xe,()=>Xe.bindFramebuffer(Xe.FRAMEBUFFER,Ke)),callAndCheck(Xe,()=>Xe.framebufferTexture2D(Xe.FRAMEBUFFER,Xe.COLOR_ATTACHMENT0,Xe.TEXTURE_2D,null,0))}function validateFramebuffer(Xe){const Ke=Xe.checkFramebufferStatus(Xe.FRAMEBUFFER);if(Ke!==Xe.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+getFramebufferErrorMessage(Xe,Ke))}function getFramebufferErrorMessage(Xe,Ke){switch(Ke){case Xe.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case Xe.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case Xe.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case Xe.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${Ke}`}}function throwIfNull(Xe,Ke,Ye){const Je=callAndCheck(Xe,()=>Ke());if(Je==null)throw new Error(Ye);return Je}function validateTextureUnit(Xe,Ke){const Ye=Xe.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,Je=Ke+Xe.TEXTURE0;if(Je<Xe.TEXTURE0||Je>Ye){const tt=`[gl.TEXTURE0, gl.TEXTURE${Ye}]`;throw new Error(`textureUnit must be in ${tt}.`)}}function getBatchDim(Xe,Ke=2){return sizeFromShape(Xe.slice(0,Xe.length-Ke))}function getRowsCols(Xe){if(Xe.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[Xe.length>1?Xe[Xe.length-2]:1,Xe[Xe.length-1]]}function getShapeAs3D(Xe){let Ke=[1,1,1];return Xe.length===0||Xe.length===1&&Xe[0]===1||(Ke=[getBatchDim(Xe),...getRowsCols(Xe)]),Ke}function getTextureShapeFromLogicalShape(Xe,Ke=!1){let Ye=env().getNumber("WEBGL_MAX_TEXTURE_SIZE");Ke&&(Ye=Ye*2,Xe=Xe.map((tt,st)=>st>=Xe.length-2?nearestLargerEven(Xe[st]):Xe[st]),Xe.length===1&&(Xe=[2,Xe[0]])),Xe.length!==2&&(Xe=squeezeShape(Xe).newShape);let Je=sizeFromShape(Xe);if(Xe.length<=1&&Je<=Ye)return[1,Je];if(Xe.length===2&&Xe[0]<=Ye&&Xe[1]<=Ye)return Xe;if(Xe.length===3&&Xe[0]*Xe[1]<=Ye&&Xe[2]<=Ye)return[Xe[0]*Xe[1],Xe[2]];if(Xe.length===3&&Xe[0]<=Ye&&Xe[1]*Xe[2]<=Ye)return[Xe[0],Xe[1]*Xe[2]];if(Xe.length===4&&Xe[0]*Xe[1]*Xe[2]<=Ye&&Xe[3]<=Ye)return[Xe[0]*Xe[1]*Xe[2],Xe[3]];if(Xe.length===4&&Xe[0]<=Ye&&Xe[1]*Xe[2]*Xe[3]<=Ye)return[Xe[0],Xe[1]*Xe[2]*Xe[3]];if(Ke){const tt=getBatchDim(Xe);let st=2,rt=2;return Xe.length&&([st,rt]=getRowsCols(Xe)),Je=tt*(st/2)*(rt/2),sizeToSquarishShape(Je).map(it=>it*2)}return sizeToSquarishShape(Je)}function isEven(Xe){return Xe%2===0}function isReshapeFree(Xe,Ke){if(Xe=Xe.slice(-2),Ke=Ke.slice(-2),arraysEqual(Xe,Ke)||!Xe.length||!Ke.length||Xe[0]===0||Xe[1]===0||Ke[0]===0||Ke[1]===0)return!0;if(Xe.length!==Ke.length){const Ye=Xe.slice(-1)[0],Je=Ke.slice(-1)[0];if(Ye===Je||isEven(Ye)&&isEven(Je)&&(Xe[0]===1||Ke[0]===1))return!0}return Xe[1]===Ke[1]&&isEven(Xe[0])&&isEven(Ke[0])}let MAX_TEXTURE_SIZE,MAX_TEXTURES_IN_SHADER;function getWebGLMaxTextureSize(Xe){if(MAX_TEXTURE_SIZE==null){const Ke=getWebGLContext(Xe);MAX_TEXTURE_SIZE=Ke.getParameter(Ke.MAX_TEXTURE_SIZE)}return MAX_TEXTURE_SIZE}function getMaxTexturesInShader(Xe){if(MAX_TEXTURES_IN_SHADER==null){const Ke=getWebGLContext(Xe);MAX_TEXTURES_IN_SHADER=Ke.getParameter(Ke.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,MAX_TEXTURES_IN_SHADER)}function getWebGLDisjointQueryTimerVersion(Xe){if(Xe===0)return 0;let Ke;const Ye=getWebGLContext(Xe);return hasExtension(Ye,"EXT_disjoint_timer_query_webgl2")&&Xe===2?Ke=2:hasExtension(Ye,"EXT_disjoint_timer_query")?Ke=1:Ke=0,Ke}function hasExtension(Xe,Ke){return Xe.getExtension(Ke)!=null}function isWebGLVersionEnabled(Xe){try{if(getWebGLContext(Xe)!=null)return!0}catch(Ke){return console.log("Error when getting WebGL context: ",Ke),!1}return!1}function isCapableOfRenderingToFloatTexture(Xe){if(Xe===0)return!1;const Ke=getWebGLContext(Xe);if(Xe===1){if(!hasExtension(Ke,"OES_texture_float"))return!1}else if(!hasExtension(Ke,"EXT_color_buffer_float"))return!1;return createFloatTextureAndBindToFramebuffer(Ke)}function isDownloadFloatTextureEnabled(Xe){if(Xe===0)return!1;const Ke=getWebGLContext(Xe);if(Xe===1){if(!hasExtension(Ke,"OES_texture_float")||!hasExtension(Ke,"WEBGL_color_buffer_float"))return!1}else{if(hasExtension(Ke,"EXT_color_buffer_float"))return createFloatTextureAndBindToFramebuffer(Ke);const Je="EXT_color_buffer_half_float";if(hasExtension(Ke,Je)){const tt=Ke.getExtension(Je);return createHalfFloatTextureAndBindToFramebuffer(Ke,tt)}return!1}return createFloatTextureAndBindToFramebuffer(Ke)}function createFloatTextureAndBindToFramebuffer(Xe){const Ke=getTextureConfig(Xe),Ye=Xe.createTexture();Xe.bindTexture(Xe.TEXTURE_2D,Ye),Xe.texImage2D(Xe.TEXTURE_2D,0,Ke.internalFormatFloat,1,1,0,Ke.textureFormatFloat,Ke.textureTypeFloat,null);const st=Xe.createFramebuffer();Xe.bindFramebuffer(Xe.FRAMEBUFFER,st),Xe.framebufferTexture2D(Xe.FRAMEBUFFER,Xe.COLOR_ATTACHMENT0,Xe.TEXTURE_2D,Ye,0);const rt=Xe.checkFramebufferStatus(Xe.FRAMEBUFFER)===Xe.FRAMEBUFFER_COMPLETE;return Xe.bindTexture(Xe.TEXTURE_2D,null),Xe.bindFramebuffer(Xe.FRAMEBUFFER,null),Xe.deleteTexture(Ye),Xe.deleteFramebuffer(st),rt}function createHalfFloatTextureAndBindToFramebuffer(Xe,Ke){const Ye=getTextureConfig(Xe,Ke),Je=Xe.createTexture();Xe.bindTexture(Xe.TEXTURE_2D,Je),Xe.texImage2D(Xe.TEXTURE_2D,0,Ye.internalFormatHalfFloat,1,1,0,Ye.textureFormatFloat,Ye.textureTypeHalfFloat,null);const rt=Xe.createFramebuffer();Xe.bindFramebuffer(Xe.FRAMEBUFFER,rt),Xe.framebufferTexture2D(Xe.FRAMEBUFFER,Xe.COLOR_ATTACHMENT0,Xe.TEXTURE_2D,Je,0);const it=Xe.checkFramebufferStatus(Xe.FRAMEBUFFER)===Xe.FRAMEBUFFER_COMPLETE;return Xe.bindTexture(Xe.TEXTURE_2D,null),Xe.bindFramebuffer(Xe.FRAMEBUFFER,null),Xe.deleteTexture(Je),Xe.deleteFramebuffer(rt),it}function isWebGLFenceEnabled(Xe){return Xe!==2?!1:getWebGLContext(Xe).fenceSync!=null}function assertNotComplex(Xe,Ke){Array.isArray(Xe)||(Xe=[Xe]),Xe.forEach(Ye=>{Ye!=null&&assert$2(Ye.dtype!=="complex64",()=>`${Ke} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ENV=env();ENV.registerFlag("HAS_WEBGL",()=>ENV.getNumber("WEBGL_VERSION")>0);ENV.registerFlag("WEBGL_VERSION",()=>isWebGLVersionEnabled(2)?2:isWebGLVersionEnabled(1)?1:0);ENV.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);ENV.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>ENV.get("WEBGL_VERSION")===2);ENV.registerFlag("WEBGL_CPU_FORWARD",()=>!0);ENV.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);ENV.registerFlag("WEBGL_PACK",()=>ENV.getBool("HAS_WEBGL"));ENV.registerFlag("WEBGL_PACK_NORMALIZATION",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_CLIP",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1);ENV.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_REDUCE",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_LAZILY_UNPACK",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_CONV_IM2COL",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>getWebGLMaxTextureSize(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>getMaxTexturesInShader(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const Xe=ENV.getNumber("WEBGL_VERSION");return Xe===0?0:getWebGLDisjointQueryTimerVersion(Xe)});ENV.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>ENV.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!isMobile());ENV.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>isCapableOfRenderingToFloatTexture(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>ENV.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:ENV.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));ENV.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>isDownloadFloatTextureEnabled(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_FENCE_API_ENABLED",()=>isWebGLFenceEnabled(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>ENV.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);ENV.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,Xe=>{if(Xe<0&&Xe!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${Xe}.`)});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getGlslDifferences(){let Xe,Ke,Ye,Je,tt,st,rt,it,ot,at;return env().getNumber("WEBGL_VERSION")===2?(Xe="#version 300 es",Ke="in",Ye="out",Je="in",tt="texture",st="outputColor",rt="out vec4 outputColor;",it=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,ot="",at=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(Xe="",Ke="attribute",Ye="varying",Je="varying",tt="texture2D",st="gl_FragColor",rt="",it=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,ot=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,at=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:Xe,attribute:Ke,varyingVs:Ye,varyingFs:Je,texture2D:tt,output:st,defineOutput:rt,defineSpecialNaN:it,defineSpecialInf:ot,defineRound:at}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getLogicalCoordinatesFromFlatIndex(Xe,Ke,Ye="index"){const Je=computeStrides(Ke);return Je.map((tt,st)=>{const rt=`int ${Xe[st]} = ${Ye} / ${tt}`,it=st===Je.length-1?`int ${Xe[st+1]} = ${Ye} - ${Xe[st]} * ${tt}`:`index -= ${Xe[st]} * ${tt}`;return`${rt}; ${it};`}).join("")}function getFlatIndexFrom3D(Xe){const Ke=computeStrides(Xe).map(Ye=>Ye.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${Ke[0]} + coords.y * ${Ke[1]} + coords.z;
  }
`}const ENCODE_FLOAT_SNIPPET=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DecodeMatrixProgram{constructor(Ke){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=PackingScheme.DENSE;const Ye=getDenseTexShape(Ke),Je=getGlslDifferences();this.outputShape=Ke,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${getLogicalCoordinatesFromFlatIndex(["r","c","d"],Ke)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(${Ye[0]}, ${Ye[1]}));
        int index = 4 * (resTexRC.x * ${Ye[1]} + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${Je.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DecodeMatrixPackedProgram{constructor(Ke){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=PackingScheme.DENSE;const Ye=getDenseTexShape(Ke),Je=getGlslDifferences();this.outputShape=Ke,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${getLogicalCoordinatesFromFlatIndex(["r","c","d"],Ke)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(${Ye[0]}, ${Ye[1]}));
        int index = 4 * (resTexRC.x * ${Ye[1]} + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${Je.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeFloatProgram{constructor(Ke){this.variableNames=["A"],this.outTexUsage=TextureUsage.DOWNLOAD;const Ye=getGlslDifferences();this.outputShape=Ke,this.userCode=`
      ${ENCODE_FLOAT_SNIPPET}

      void main() {
        float x = getAAtOutCoords();
        ${Ye.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeFloatPackedProgram{constructor(Ke){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=TextureUsage.DOWNLOAD;const Ye=getGlslDifferences();this.outputShape=Ke,this.userCode=`
      ${ENCODE_FLOAT_SNIPPET}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${Ye.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeMatrixProgram{constructor(Ke,Ye,Je=!1){this.variableNames=["A"];const tt=getGlslDifferences(),[st,rt]=Ye;this.outputShape=Ke;let it="result";Je&&(it="floor(result * 255. + 0.5)"),this.userCode=`
      ${getFlatIndexFrom3D(Ke)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / ${rt};
        int c = imod(flatIndex, ${rt});
        vec2 uv = (vec2(c, r) + halfCR) / vec2(${rt}.0, ${st}.0);
        vec4 values = ${tt.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${tt.output} = vec4(${it}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeMatrixPackedProgram{constructor(Ke,Ye,Je=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const tt=getGlslDifferences(),[st,rt]=Ye;this.outputShape=Ke;let it="",ot="result";Je&&(ot="floor(result * 255. + 0.5)");for(let at=0;at<=1;at++)for(let lt=0;lt<=1;lt++){const ut=at*2+lt;it+=`
          localCoords = coords;
          if(localCoords[2] + ${lt} < ${Ke[2]}) {
            localCoords[2] += ${lt};
            if(localCoords[1] + ${at} < ${Ke[1]}) {
              localCoords[1] += ${at};

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / ${rt};
              c = imod(flatIndex, ${rt});
              uv = (vec2(c, r) + halfCR) / vec2(${rt}.0, ${st}.0);
              values = ${tt.texture2D}(A, uv);

              if(offset == 0) {
                result[${ut}] = values[0];
              } else if(offset == 1) {
                result[${ut}] = values[1];
              } else if(offset == 2) {
                result[${ut}] = values[2];
              } else {
                result[${ut}] = values[3];
              }
            }
          }
        `}this.userCode=`
      ${getFlatIndexFrom3D(Ke)}

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        ${it}

        ${tt.output} = ${ot};
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createVertexShader(Xe){const Ke=getGlslDifferences(),Ye=`${Ke.version}
    precision highp float;
    ${Ke.attribute} vec3 clipSpacePos;
    ${Ke.attribute} vec2 uv;
    ${Ke.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return createVertexShader$1(Xe,Ye)}function createVertexBuffer(Xe){const Ke=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return createStaticVertexBuffer(Xe,Ke)}function createIndexBuffer(Xe){const Ke=new Uint16Array([0,1,2,2,1,3]);return createStaticIndexBuffer(Xe,Ke)}function createAndConfigureTexture(Xe,Ke,Ye,Je,tt,st){validateTextureSize(Ke,Ye);const rt=createTexture(Xe),it=Xe.TEXTURE_2D;return callAndCheck(Xe,()=>Xe.bindTexture(it,rt)),callAndCheck(Xe,()=>Xe.texParameteri(it,Xe.TEXTURE_WRAP_S,Xe.CLAMP_TO_EDGE)),callAndCheck(Xe,()=>Xe.texParameteri(it,Xe.TEXTURE_WRAP_T,Xe.CLAMP_TO_EDGE)),callAndCheck(Xe,()=>Xe.texParameteri(it,Xe.TEXTURE_MIN_FILTER,Xe.NEAREST)),callAndCheck(Xe,()=>Xe.texParameteri(it,Xe.TEXTURE_MAG_FILTER,Xe.NEAREST)),callAndCheck(Xe,()=>Xe.texImage2D(it,0,Je,Ke,Ye,0,tt,st,null)),callAndCheck(Xe,()=>Xe.bindTexture(Xe.TEXTURE_2D,null)),rt}function getInternalFormatForFloat32MatrixTexture(Xe){return Xe.internalFormatFloat}function createFloat32MatrixTexture(Xe,Ke,Ye,Je){const[tt,st]=getUnpackedMatrixTextureShapeWidthHeight(Ke,Ye);return createAndConfigureTexture(Xe,tt,st,getInternalFormatForFloat32MatrixTexture(Je),Je.textureFormatFloat,Xe.FLOAT)}function getInternalFormatForFloat16MatrixTexture(Xe){return Xe.internalFormatHalfFloat}function createFloat16MatrixTexture(Xe,Ke,Ye,Je){const[tt,st]=getUnpackedMatrixTextureShapeWidthHeight(Ke,Ye);return createAndConfigureTexture(Xe,tt,st,getInternalFormatForFloat16MatrixTexture(Je),Je.textureFormatFloat,Je.textureTypeHalfFloat)}function getInternalFormatForUnsignedBytesMatrixTexture(Xe){return Xe.downloadTextureFormat}function createUnsignedBytesMatrixTexture(Xe,Ke,Ye,Je){const[tt,st]=getUnpackedMatrixTextureShapeWidthHeight(Ke,Ye);return createAndConfigureTexture(Xe,tt,st,getInternalFormatForUnsignedBytesMatrixTexture(Je),Xe.RGBA,Xe.UNSIGNED_BYTE)}function getInternalFormatForPackedMatrixTexture(Xe){return Xe.internalFormatPackedFloat}function createPackedMatrixTexture(Xe,Ke,Ye,Je){const[tt,st]=getPackedMatrixTextureShapeWidthHeight(Ke,Ye);return createAndConfigureTexture(Xe,tt,st,getInternalFormatForPackedMatrixTexture(Je),Xe.RGBA,Xe.FLOAT)}function getInternalFormatForFloat16PackedMatrixTexture(Xe){return Xe.internalFormatPackedHalfFloat}function createFloat16PackedMatrixTexture(Xe,Ke,Ye,Je){const[tt,st]=getPackedMatrixTextureShapeWidthHeight(Ke,Ye);return createAndConfigureTexture(Xe,tt,st,getInternalFormatForFloat16PackedMatrixTexture(Je),Xe.RGBA,Je.textureTypeHalfFloat)}function bindVertexProgramAttributeStreams(Xe,Ke,Ye){return callAndCheck(Xe,()=>Xe.bindBuffer(Xe.ARRAY_BUFFER,Ye)),bindVertexBufferToProgramAttribute(Xe,Ke,"clipSpacePos",Ye,3,20,0)&&bindVertexBufferToProgramAttribute(Xe,Ke,"uv",Ye,2,20,12)}function uploadDenseMatrixToTexture(Xe,Ke,Ye,Je,tt,st){callAndCheck(Xe,()=>Xe.bindTexture(Xe.TEXTURE_2D,Ke));let rt,it,ot;tt instanceof Uint8Array?(rt=new Uint8Array(Ye*Je*4),it=Xe.UNSIGNED_BYTE,ot=Xe.RGBA):(rt=new Float32Array(Ye*Je*4),it=Xe.FLOAT,ot=st.internalFormatPackedFloat),rt.set(tt),callAndCheck(Xe,()=>Xe.texImage2D(Xe.TEXTURE_2D,0,ot,Ye,Je,0,Xe.RGBA,it,rt)),callAndCheck(Xe,()=>Xe.bindTexture(Xe.TEXTURE_2D,null))}function uploadPixelDataToTexture(Xe,Ke,Ye){callAndCheck(Xe,()=>Xe.bindTexture(Xe.TEXTURE_2D,Ke)),Ye.data instanceof Uint8Array?callAndCheck(Xe,()=>Xe.texImage2D(Xe.TEXTURE_2D,0,Xe.RGBA,Ye.width,Ye.height,0,Xe.RGBA,Xe.UNSIGNED_BYTE,Ye.data)):callAndCheck(Xe,()=>Xe.texImage2D(Xe.TEXTURE_2D,0,Xe.RGBA,Xe.RGBA,Xe.UNSIGNED_BYTE,Ye)),callAndCheck(Xe,()=>Xe.bindTexture(Xe.TEXTURE_2D,null))}function createBufferFromOutputTexture(Xe,Ke,Ye,Je){const tt=Xe.createBuffer();callAndCheck(Xe,()=>Xe.bindBuffer(Xe.PIXEL_PACK_BUFFER,tt));const it=4*4*Ke*Ye;return callAndCheck(Xe,()=>Xe.bufferData(Xe.PIXEL_PACK_BUFFER,it,Xe.STREAM_READ)),callAndCheck(Xe,()=>Xe.readPixels(0,0,Ye,Ke,Xe.RGBA,Xe.FLOAT,0)),callAndCheck(Xe,()=>Xe.bindBuffer(Xe.PIXEL_PACK_BUFFER,null)),tt}function downloadFloat32MatrixFromBuffer(Xe,Ke,Ye){const Je=Xe,tt=new Float32Array(Ye);return Je.bindBuffer(Je.PIXEL_PACK_BUFFER,Ke),Je.getBufferSubData(Je.PIXEL_PACK_BUFFER,0,tt),Je.bindBuffer(Je.PIXEL_PACK_BUFFER,null),tt}function downloadByteEncodedFloatMatrixFromOutputTexture(Xe,Ke,Ye,Je){const[tt,st]=getUnpackedMatrixTextureShapeWidthHeight(Ke,Ye),rt=4,it=new Uint8Array(getUnpackedArraySizeFromMatrixSize(Ke*Ye,rt));return callAndCheck(Xe,()=>Xe.readPixels(0,0,tt,st,Je.downloadTextureFormat,Xe.UNSIGNED_BYTE,it)),new Float32Array(it.buffer)}function downloadPackedMatrixFromBuffer(Xe,Ke,Ye,Je,tt,st,rt,it){const ot=Xe,at=new Float32Array(getPackedRGBAArraySizeFromMatrixShape(st,rt));return ot.bindBuffer(ot.PIXEL_PACK_BUFFER,Ke),ot.getBufferSubData(ot.PIXEL_PACK_BUFFER,0,at),ot.bindBuffer(ot.PIXEL_PACK_BUFFER,null),at}function downloadMatrixFromPackedOutputTexture(Xe,Ke,Ye){const Je=new Float32Array(Ke*Ye*4);return callAndCheck(Xe,()=>Xe.readPixels(0,0,Ye,Ke,Xe.RGBA,Xe.FLOAT,Je)),Je}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GPGPUContext{constructor(Ke){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const Ye=env().getNumber("WEBGL_VERSION");Ke!=null?(this.gl=Ke,setWebGLContext(Ye,Ke)):this.gl=getWebGLContext(Ye);let Je="WEBGL_color_buffer_float";const tt="EXT_color_buffer_half_float";if(env().getNumber("WEBGL_VERSION")===1){const st="OES_texture_float",rt="OES_texture_half_float";if(this.textureFloatExtension=getExtensionOrThrow(this.gl,st),hasExtension(this.gl,rt))this.textureHalfFloatExtension=getExtensionOrThrow(this.gl,rt);else if(env().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(Je),hasExtension(this.gl,tt))this.colorBufferHalfFloatExtension=getExtensionOrThrow(this.gl,tt);else if(env().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(Je="EXT_color_buffer_float",hasExtension(this.gl,Je))this.colorBufferFloatExtension=this.gl.getExtension(Je);else if(hasExtension(this.gl,tt))this.colorBufferHalfFloatExtension=this.gl.getExtension(tt);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=createVertexBuffer(this.gl),this.indexBuffer=createIndexBuffer(this.gl),this.framebuffer=createFramebuffer(this.gl),this.textureConfig=getTextureConfig(this.gl,this.textureHalfFloatExtension)}get debug(){return env().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const Ke=this.gl;callAndCheck(Ke,()=>Ke.finish()),callAndCheck(Ke,()=>Ke.bindFramebuffer(Ke.FRAMEBUFFER,null)),callAndCheck(Ke,()=>Ke.deleteFramebuffer(this.framebuffer)),callAndCheck(Ke,()=>Ke.bindBuffer(Ke.ARRAY_BUFFER,null)),callAndCheck(Ke,()=>Ke.bindBuffer(Ke.ELEMENT_ARRAY_BUFFER,null)),callAndCheck(Ke,()=>Ke.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(Ke,Ye){return this.throwIfDisposed(),createFloat32MatrixTexture(this.gl,Ke,Ye,this.textureConfig)}createFloat16MatrixTexture(Ke,Ye){return this.throwIfDisposed(),createFloat16MatrixTexture(this.gl,Ke,Ye,this.textureConfig)}createUnsignedBytesMatrixTexture(Ke,Ye){return this.throwIfDisposed(),createUnsignedBytesMatrixTexture(this.gl,Ke,Ye,this.textureConfig)}uploadPixelDataToTexture(Ke,Ye){this.throwIfDisposed(),uploadPixelDataToTexture(this.gl,Ke,Ye)}uploadDenseMatrixToTexture(Ke,Ye,Je,tt){this.throwIfDisposed(),uploadDenseMatrixToTexture(this.gl,Ke,Ye,Je,tt,this.textureConfig)}createFloat16PackedMatrixTexture(Ke,Ye){return this.throwIfDisposed(),createFloat16PackedMatrixTexture(this.gl,Ke,Ye,this.textureConfig)}createPackedMatrixTexture(Ke,Ye){return this.throwIfDisposed(),createPackedMatrixTexture(this.gl,Ke,Ye,this.textureConfig)}deleteMatrixTexture(Ke){this.throwIfDisposed(),this.outputTexture===Ke&&(unbindColorTextureFromFramebuffer(this.gl,this.framebuffer),this.outputTexture=null),callAndCheck(this.gl,()=>this.gl.deleteTexture(Ke))}downloadByteEncodedFloatMatrixFromOutputTexture(Ke,Ye,Je){return this.downloadMatrixDriver(Ke,()=>downloadByteEncodedFloatMatrixFromOutputTexture(this.gl,Ye,Je,this.textureConfig))}downloadPackedMatrixFromBuffer(Ke,Ye,Je,tt,st,rt){return downloadPackedMatrixFromBuffer(this.gl,Ke,Ye,Je,tt,st,rt,this.textureConfig)}downloadFloat32MatrixFromBuffer(Ke,Ye){return downloadFloat32MatrixFromBuffer(this.gl,Ke,Ye)}createBufferFromTexture(Ke,Ye,Je){this.bindTextureToFrameBuffer(Ke);const tt=createBufferFromOutputTexture(this.gl,Ye,Je,this.textureConfig);return this.unbindTextureToFrameBuffer(),tt}createAndWaitForFence(){const Ke=this.createFence(this.gl);return this.pollFence(Ke)}createFence(Ke){let Ye,Je;if(env().getBool("WEBGL_FENCE_API_ENABLED")){const tt=Ke,st=tt.fenceSync(tt.SYNC_GPU_COMMANDS_COMPLETE,0);Ke.flush(),Je=()=>{const rt=tt.clientWaitSync(st,0,0);return rt===tt.ALREADY_SIGNALED||rt===tt.CONDITION_SATISFIED},Ye=st}else env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(Ye=this.beginQuery(),this.endQuery(),Je=()=>this.isQueryAvailable(Ye,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):Je=()=>!0;return{query:Ye,isFencePassed:Je}}downloadMatrixFromPackedTexture(Ke,Ye,Je){return this.downloadMatrixDriver(Ke,()=>downloadMatrixFromPackedOutputTexture(this.gl,Ye,Je))}createProgram(Ke){this.throwIfDisposed();const Ye=this.gl,Je=createFragmentShader(Ye,Ke),tt=createVertexShader(Ye),st=createProgram(Ye);return callAndCheck(Ye,()=>Ye.attachShader(st,tt)),callAndCheck(Ye,()=>Ye.attachShader(st,Je)),linkProgram(Ye,st),this.debug&&validateProgram(Ye,st),this.vertexAttrsAreBound||(this.setProgram(st),this.vertexAttrsAreBound=bindVertexProgramAttributeStreams(Ye,this.program,this.vertexBuffer)),st}deleteProgram(Ke){this.throwIfDisposed(),Ke===this.program&&(this.program=null),Ke!=null&&callAndCheck(this.gl,()=>this.gl.deleteProgram(Ke))}setProgram(Ke){this.throwIfDisposed(),this.program=Ke,this.program!=null&&this.debug&&validateProgram(this.gl,this.program),callAndCheck(this.gl,()=>this.gl.useProgram(Ke))}getUniformLocation(Ke,Ye,Je=!0){return this.throwIfDisposed(),Je?getProgramUniformLocationOrThrow(this.gl,Ke,Ye):getProgramUniformLocation(this.gl,Ke,Ye)}getAttributeLocation(Ke,Ye){return this.throwIfDisposed(),callAndCheck(this.gl,()=>this.gl.getAttribLocation(Ke,Ye))}getUniformLocationNoThrow(Ke,Ye){return this.throwIfDisposed(),this.gl.getUniformLocation(Ke,Ye)}setInputMatrixTexture(Ke,Ye,Je){this.throwIfDisposed(),this.throwIfNoProgram(),bindTextureToProgramUniformSampler(this.gl,Ke,Ye,Je)}setOutputMatrixTexture(Ke,Ye,Je){this.setOutputMatrixTextureDriver(Ke,Je,Ye)}setOutputPackedMatrixTexture(Ke,Ye,Je){this.throwIfDisposed();const[tt,st]=getPackedMatrixTextureShapeWidthHeight(Ye,Je);this.setOutputMatrixTextureDriver(Ke,tt,st)}setOutputMatrixWriteRegion(Ke,Ye,Je,tt){this.setOutputMatrixWriteRegionDriver(Je,Ke,tt,Ye)}setOutputPackedMatrixWriteRegion(Ke,Ye,Je,tt){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&validateProgram(this.gl,this.program),validateFramebuffer(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const Ke=this.gl;this.debug&&this.debugValidate(),callAndCheck(Ke,()=>Ke.drawElements(Ke.TRIANGLES,6,Ke.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),callAndCheck(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=getExtensionOrThrow(this.gl,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const Je=this.gl,tt=this.getQueryTimerExtensionWebGL2(),st=Je.createQuery();return Je.beginQuery(tt.TIME_ELAPSED_EXT,st),st}const Ke=this.getQueryTimerExtensionWebGL1(),Ye=Ke.createQueryEXT();return Ke.beginQueryEXT(Ke.TIME_ELAPSED_EXT,Ye),Ye}endQuery(){if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const Ye=this.gl,Je=this.getQueryTimerExtensionWebGL2();Ye.endQuery(Je.TIME_ELAPSED_EXT);return}const Ke=this.getQueryTimerExtensionWebGL1();Ke.endQueryEXT(Ke.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(Ke){return await repeatedTry(()=>this.disposed||this.isQueryAvailable(Ke,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(Ke,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(Ke,Ye){if(Ye===0)return null;if(Ye===2){const Je=this.gl;return Je.getQueryParameter(Ke,Je.QUERY_RESULT)/1e6}else{const Je=this.getQueryTimerExtensionWebGL1();return Je.getQueryObjectEXT(Ke,Je.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(Ke,Ye){if(Ye===0)return!0;if(Ye===2){const Je=this.gl,tt=this.getQueryTimerExtensionWebGL2(),st=Je.getQueryParameter(Ke,Je.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(tt.GPU_DISJOINT_EXT)),st&&!this.disjoint}else{const Je=this.getQueryTimerExtensionWebGL1(),tt=Je.getQueryObjectEXT(Ke,Je.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(Je.GPU_DISJOINT_EXT)),tt&&!this.disjoint}}pollFence(Ke){return new Promise(Ye=>{this.addItemToPoll(()=>Ke.isFencePassed(),()=>Ye())})}pollItems(){const Ke=linearSearchLastTrue(this.itemsToPoll.map(Ye=>Ye.isDoneFn));for(let Ye=0;Ye<=Ke;++Ye){const{resolveFn:Je}=this.itemsToPoll[Ye];Je()}this.itemsToPoll=this.itemsToPoll.slice(Ke+1)}addItemToPoll(Ke,Ye){this.itemsToPoll.push({isDoneFn:Ke,resolveFn:Ye}),!(this.itemsToPoll.length>1)&&repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0))}bindTextureToFrameBuffer(Ke){this.throwIfDisposed(),bindColorTextureToFramebuffer(this.gl,Ke,this.framebuffer),this.debug&&validateFramebuffer(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(bindColorTextureToFramebuffer(this.gl,this.outputTexture,this.framebuffer),this.debug&&validateFramebuffer(this.gl)):unbindColorTextureFromFramebuffer(this.gl,this.framebuffer)}downloadMatrixDriver(Ke,Ye){this.bindTextureToFrameBuffer(Ke);const Je=Ye();return this.unbindTextureToFrameBuffer(),Je}setOutputMatrixTextureDriver(Ke,Ye,Je){this.throwIfDisposed();const tt=this.gl;bindColorTextureToFramebuffer(tt,Ke,this.framebuffer),this.debug&&validateFramebuffer(tt),this.outputTexture=Ke,callAndCheck(tt,()=>tt.viewport(0,0,Ye,Je)),callAndCheck(tt,()=>tt.scissor(0,0,Ye,Je))}setOutputMatrixWriteRegionDriver(Ke,Ye,Je,tt){this.throwIfDisposed(),callAndCheck(this.gl,()=>this.gl.scissor(Ke,Ye,Je,tt))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function linearSearchLastTrue(Xe){let Ke=0;for(;Ke<Xe.length&&Xe[Ke]();++Ke);return Ke-1}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims}=backend_util;function makeShader(Xe,Ke,Ye,Je){const tt=[];Xe.forEach(ft=>{const xt=sizeFromShape(ft.shapeInfo.logicalShape);ft.shapeInfo.isUniform?tt.push(`uniform float ${ft.name}${xt>1?`[${xt}]`:""};`):(tt.push(`uniform sampler2D ${ft.name};`),tt.push(`uniform int offset${ft.name};`))});const st=tt.join(`
`),rt=Xe.map(ft=>getInputSamplingSnippet(ft,Ke,Je)).join(`
`),it=Ke.texShape,ot=getGlslDifferences(),at=getFloatTextureSampleSnippet(ot);let lt,ut,ht=getShaderPrefix(ot);return Ke.isPacked?(lt=getPackedOutputSamplingSnippet(Ke.logicalShape,it),ut=getFloatTextureSetRGBASnippet(ot)):(lt=getOutputSamplingSnippet(Ke.logicalShape,it),ut=getFloatTextureSetRSnippet(ot)),Je&&(ht+=SHADER_PACKED_PREFIX),[ht,at,ut,st,lt,rt,Ye].join(`
`)}function getSamplerFromInInfo(Xe){const Ke=Xe.shapeInfo.logicalShape;switch(Ke.length){case 0:return getSamplerScalar(Xe);case 1:return getSampler1D(Xe);case 2:return getSampler2D(Xe);case 3:return getSampler3D(Xe);case 4:return getSampler4D(Xe);case 5:return getSampler5D(Xe);case 6:return getSampler6D(Xe);default:throw new Error(`${Ke.length}-D input sampling is not yet supported`)}}function getPackedSamplerFromInInfo(Xe){switch(Xe.shapeInfo.logicalShape.length){case 0:return getPackedSamplerScalar(Xe);case 1:return getPackedSampler1D(Xe);case 2:return getPackedSampler2D(Xe);case 3:return getPackedSampler3D(Xe);default:return getPackedSamplerND(Xe)}}function getInputSamplingSnippet(Xe,Ke,Ye=!1){let Je="";Ye?Je+=getPackedSamplerFromInInfo(Xe):Je+=getSamplerFromInInfo(Xe);const tt=Xe.shapeInfo.logicalShape,st=Ke.logicalShape;return tt.length<=st.length&&(Ye?Je+=getPackedSamplerAtOutputCoords(Xe,Ke):Je+=getSamplerAtOutputCoords(Xe,Ke)),Je}function getPackedOutputSamplingSnippet(Xe,Ke){switch(Xe.length){case 0:return getOutputScalarCoords();case 1:return getOutputPacked1DCoords(Xe,Ke);case 2:return getOutputPacked2DCoords(Xe,Ke);case 3:return getOutputPacked3DCoords(Xe,Ke);default:return getOutputPackedNDCoords(Xe,Ke)}}function getOutputSamplingSnippet(Xe,Ke){switch(Xe.length){case 0:return getOutputScalarCoords();case 1:return getOutput1DCoords(Xe,Ke);case 2:return getOutput2DCoords(Xe,Ke);case 3:return getOutput3DCoords(Xe,Ke);case 4:return getOutput4DCoords(Xe,Ke);case 5:return getOutput5DCoords(Xe,Ke);case 6:return getOutput6DCoords(Xe,Ke);default:throw new Error(`${Xe.length}-D output sampling is not yet supported`)}}function getFloatTextureSampleSnippet(Xe){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${Xe.texture2D}(textureSampler, uv).r;
    }
  `}function getFloatTextureSetRSnippet(Xe){return`
    void setOutput(float val) {
      ${Xe.output} = vec4(val, 0, 0, 0);
    }
  `}function getFloatTextureSetRGBASnippet(Xe){return`
    void setOutput(vec4 val) {
      ${Xe.output} = val;
    }
  `}function getShaderPrefix(Xe){return`${Xe.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${Xe.varyingFs} vec2 resultUV;
    ${Xe.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${Xe.defineSpecialNaN}
    ${Xe.defineSpecialInf}
    ${Xe.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${SAMPLE_1D_SNIPPET}
    ${SAMPLE_2D_SNIPPET}
    ${SAMPLE_3D_SNIPPET}
  `}const SAMPLE_1D_SNIPPET=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SAMPLE_2D_SNIPPET=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SAMPLE_3D_SNIPPET=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SHADER_PACKED_PREFIX=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function getOutputScalarCoords(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function getOutputPacked1DCoords(Xe,Ke){const Ye=[Math.ceil(Ke[0]/2),Math.ceil(Ke[1]/2)];return Ye[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${Ye[1]}.0);
      }
    `:Ye[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${Ye[0]}.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${Ye[0]}, ${Ye[1]}));
      return 2 * (resTexRC.x * ${Ye[1]} + resTexRC.y);
    }
  `}function getOutput1DCoords(Xe,Ke){return Ke[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * ${Ke[1]}.0);
      }
    `:Ke[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * ${Ke[0]}.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${Ke[0]}, ${Ke[1]}));
      return resTexRC.x * ${Ke[1]} + resTexRC.y;
    }
  `}function getOutputPacked3DCoords(Xe,Ke){const Ye=[Math.ceil(Ke[0]/2),Math.ceil(Ke[1]/2)],Je=Math.ceil(Xe[2]/2),tt=Je*Math.ceil(Xe[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${Ye[0]}, ${Ye[1]}));
      int index = resTexRC.x * ${Ye[1]} + resTexRC.y;

      int b = index / ${tt};
      index -= b * ${tt};

      int r = 2 * (index / ${Je});
      int c = imod(index, ${Je}) * 2;

      return ivec3(b, r, c);
    }
  `}function getOutput3DCoords(Xe,Ke){const Ye=getLogicalCoordinatesFromFlatIndex(["r","c","d"],Xe);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${Ke[0]}, ${Ke[1]}));
      int index = resTexRC.x * ${Ke[1]} + resTexRC.y;
      ${Ye}
      return ivec3(r, c, d);
    }
  `}function getOutputPackedNDCoords(Xe,Ke){const Ye=[Math.ceil(Ke[0]/2),Math.ceil(Ke[1]/2)],Je=Math.ceil(Xe[Xe.length-1]/2),tt=Je*Math.ceil(Xe[Xe.length-2]/2);let st=tt,rt="",it="b, r, c";for(let ot=2;ot<Xe.length-1;ot++)st*=Xe[Xe.length-ot-1],rt=`
      int b${ot} = index / ${st};
      index -= b${ot} * ${st};
    `+rt,it=`b${ot}, `+it;return`
    ivec${Xe.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${Ye[0]}, ${Ye[1]}));
      int index = resTexRC.x * ${Ye[1]} + resTexRC.y;

      ${rt}

      int b = index / ${tt};
      index -= b * ${tt};

      int r = 2 * (index / ${Je});
      int c = imod(index, ${Je}) * 2;

      return ivec${Xe.length}(${it});
    }
  `}function getOutput4DCoords(Xe,Ke){const Ye=getLogicalCoordinatesFromFlatIndex(["r","c","d","d2"],Xe);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${Ke[0]}, ${Ke[1]}));
      int index = resTexRC.x * ${Ke[1]} + resTexRC.y;
      ${Ye}
      return ivec4(r, c, d, d2);
    }
  `}function getOutput5DCoords(Xe,Ke){const Ye=getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3"],Xe);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${Ke[0]},
                             ${Ke[1]}));

      int index = resTexRC.x * ${Ke[1]} + resTexRC.y;

      ${Ye}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function getOutput6DCoords(Xe,Ke){const Ye=getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3","d4"],Xe);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${Ke[0]}, ${Ke[1]}));
      int index = resTexRC.x * ${Ke[1]} + resTexRC.y;

      ${Ye}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function getOutputPacked2DCoords(Xe,Ke){const Ye=[Math.ceil(Ke[0]/2),Math.ceil(Ke[1]/2)];if(arraysEqual(Xe,Ke))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${Ye[0]}, ${Ye[1]}));
      }
    `;const Je=Math.ceil(Xe[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${Ye[0]}, ${Ye[1]}));

      int index = resTexRC.x * ${Ye[1]} + resTexRC.y;
      int r = 2 * (index / ${Je});
      int c = imod(index, ${Je}) * 2;

      return ivec2(r, c);
    }
  `}function getOutput2DCoords(Xe,Ke){return arraysEqual(Xe,Ke)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${Ke[0]}, ${Ke[1]}));
      }
    `:Xe[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${Ke[0]}, ${Ke[1]}));
        int index = resTexRC.x * ${Ke[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:Xe[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${Ke[0]}, ${Ke[1]}));
        int index = resTexRC.x * ${Ke[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${Ke[0]}, ${Ke[1]}));
      int index = resTexRC.x * ${Ke[1]} + resTexRC.y;
      int r = index / ${Xe[1]};
      int c = index - r * ${Xe[1]};
      return ivec2(r, c);
    }
  `}function getFlatOffsetUniformName(Xe){return`offset${Xe}`}function getPackedSamplerScalar(Xe){const Ke=Xe.name,Ye="get"+Ke.charAt(0).toUpperCase()+Ke.slice(1),Je=getGlslDifferences();return`
    vec4 ${Ye}() {
      return ${Je.texture2D}(${Ke}, halfCR);
    }
  `}function getSamplerScalar(Xe){const Ke=Xe.name,Ye="get"+Ke.charAt(0).toUpperCase()+Ke.slice(1);if(Xe.shapeInfo.isUniform)return`float ${Ye}() {return ${Ke};}`;const[Je,tt]=Xe.shapeInfo.texShape;if(Je===1&&tt===1)return`
      float ${Ye}() {
        return sampleTexture(${Ke}, halfCR);
      }
    `;const[st,rt]=Xe.shapeInfo.texShape,it=getFlatOffsetUniformName(Ke);return`
    float ${Ye}() {
      vec2 uv = uvFromFlat(${st}, ${rt}, ${it});
      return sampleTexture(${Ke}, uv);
    }
  `}function getPackedSampler1D(Xe){const Ke=Xe.name,Ye="get"+Ke.charAt(0).toUpperCase()+Ke.slice(1),Je=Xe.shapeInfo.texShape,tt=[Math.ceil(Je[0]/2),Math.ceil(Je[1]/2)],st=getGlslDifferences();return`
    vec4 ${Ye}(int index) {
      vec2 uv = packedUVfrom1D(
        ${tt[0]}, ${tt[1]}, index);
      return ${st.texture2D}(${Ke}, uv);
    }
  `}function getSampler1D(Xe){const Ke=Xe.name,Ye="get"+Ke.charAt(0).toUpperCase()+Ke.slice(1);if(Xe.shapeInfo.isUniform)return`
      float ${Ye}(int index) {
        ${getUniformSampler(Xe)}
      }
    `;const Je=Xe.shapeInfo.texShape,tt=Je[0],st=Je[1];if(st===1&&tt===1)return`
      float ${Ye}(int index) {
        return sampleTexture(${Ke}, halfCR);
      }
    `;const rt=getFlatOffsetUniformName(Ke);return st===1?`
      float ${Ye}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${rt}) + 0.5) / ${tt}.0);
        return sampleTexture(${Ke}, uv);
      }
    `:tt===1?`
      float ${Ye}(int index) {
        vec2 uv = vec2((float(index + ${rt}) + 0.5) / ${st}.0, 0.5);
        return sampleTexture(${Ke}, uv);
      }
    `:`
    float ${Ye}(int index) {
      vec2 uv = uvFromFlat(${tt}, ${st}, index + ${rt});
      return sampleTexture(${Ke}, uv);
    }
  `}function getPackedSampler2D(Xe){const Ke=Xe.shapeInfo.logicalShape,Ye=Xe.name,Je="get"+Ye.charAt(0).toUpperCase()+Ye.slice(1),tt=Xe.shapeInfo.texShape,st=tt[0],rt=tt[1],it=getGlslDifferences();if(tt!=null&&arraysEqual(Ke,tt))return`
      vec4 ${Je}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${rt}.0, ${st}.0);

        return ${it.texture2D}(${Ye}, uv);
      }
    `;const ot=[Math.ceil(tt[0]/2),Math.ceil(tt[1]/2)],at=Math.ceil(Ke[1]/2);return`
    vec4 ${Je}(int row, int col) {
      vec2 uv = packedUVfrom2D(${at}, ${ot[0]}, ${ot[1]}, row, col);
      return ${it.texture2D}(${Ye}, uv);
    }
  `}function getSampler2D(Xe){const Ke=Xe.shapeInfo.logicalShape,Ye=Xe.name,Je="get"+Ye.charAt(0).toUpperCase()+Ye.slice(1),tt=Xe.shapeInfo.texShape;if(tt!=null&&arraysEqual(Ke,tt)){const ut=tt[0],ht=tt[1];return`
    float ${Je}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${ht}.0, ${ut}.0);
      return sampleTexture(${Ye}, uv);
    }
  `}const{newShape:st,keptDims:rt}=squeezeShape(Ke),it=st;if(it.length<Ke.length){const ut=squeezeInputInfo(Xe,it),ht=["row","col"];return`
      ${getSamplerFromInInfo(ut)}
      float ${Je}(int row, int col) {
        return ${Je}(${getSqueezedParams(ht,rt)});
      }
    `}if(Xe.shapeInfo.isUniform)return`
      float ${Je}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${Ke[1]}, 1)));
        ${getUniformSampler(Xe)}
      }
    `;const ot=tt[0],at=tt[1],lt=getFlatOffsetUniformName(Ye);return at===1?`
    float ${Je}(int row, int col) {
      float index = dot(vec3(row, col, ${lt}), vec3(${Ke[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${ot}.0);
      return sampleTexture(${Ye}, uv);
    }
  `:ot===1?`
    float ${Je}(int row, int col) {
      float index = dot(vec3(row, col, ${lt}), vec3(${Ke[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${at}.0, 0.5);
      return sampleTexture(${Ye}, uv);
    }
  `:`
  float ${Je}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${Ke[1]} + col + ${lt};
    vec2 uv = uvFromFlat(${ot}, ${at}, index);
    return sampleTexture(${Ye}, uv);
  }
`}function getPackedSampler3D(Xe){const Ke=Xe.shapeInfo.logicalShape,Ye=Xe.name,Je="get"+Ye.charAt(0).toUpperCase()+Ye.slice(1),tt=Xe.shapeInfo.texShape,st=[Math.ceil(tt[0]/2),Math.ceil(tt[1]/2)];if(Ke[0]===1){const ut=Ke.slice(1),ht=[1,2],pt=squeezeInputInfo(Xe,ut),ft=["b","row","col"];return`
        ${getPackedSamplerFromInInfo(pt)}
        vec4 ${Je}(int b, int row, int col) {
          return ${Je}(${getSqueezedParams(ft,ht)});
        }
      `}const rt=st[0],it=st[1],ot=Math.ceil(Ke[2]/2),at=ot*Math.ceil(Ke[1]/2),lt=getGlslDifferences();return`
    vec4 ${Je}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${rt}, ${it}, ${at}, ${ot}, b, row, col);
      return ${lt.texture2D}(${Ye}, uv);
    }
  `}function getSampler3D(Xe){const Ke=Xe.shapeInfo.logicalShape,Ye=Xe.name,Je="get"+Ye.charAt(0).toUpperCase()+Ye.slice(1),tt=Ke[1]*Ke[2],st=Ke[2],{newShape:rt,keptDims:it}=squeezeShape(Ke),ot=rt;if(ot.length<Ke.length){const ft=squeezeInputInfo(Xe,ot),xt=["row","col","depth"];return`
        ${getSamplerFromInInfo(ft)}
        float ${Je}(int row, int col, int depth) {
          return ${Je}(${getSqueezedParams(xt,it)});
        }
      `}if(Xe.shapeInfo.isUniform)return`
      float ${Je}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${tt}, ${st}, 1)));
        ${getUniformSampler(Xe)}
      }
    `;const at=Xe.shapeInfo.texShape,lt=at[0],ut=at[1],ht=Xe.shapeInfo.flatOffset;if(ut===tt&&ht==null)return`
        float ${Je}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${st}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${ut}.0, ${lt}.0);
          return sampleTexture(${Ye}, uv);
        }
      `;if(ut===st&&ht==null)return`
    float ${Je}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${Ke[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${ut}.0, ${lt}.0);
      return sampleTexture(${Ye}, uv);
    }
  `;const pt=getFlatOffsetUniformName(Ye);return`
      float ${Je}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${tt} + col * ${st} + depth + ${pt};
        vec2 uv = uvFromFlat(${lt}, ${ut}, index);
        return sampleTexture(${Ye}, uv);
      }
  `}function getPackedSamplerND(Xe){const Ke=Xe.shapeInfo.logicalShape,Ye=Ke.length,Je=Xe.name,tt="get"+Je.charAt(0).toUpperCase()+Je.slice(1),st=Xe.shapeInfo.texShape,rt=[Math.ceil(st[0]/2),Math.ceil(st[1]/2)],it=rt[0],ot=rt[1],at=Math.ceil(Ke[Ye-1]/2);let lt=at*Math.ceil(Ke[Ye-2]/2),ut="int b, int row, int col",ht=`b * ${lt} + (row / 2) * ${at} + (col / 2)`;for(let ft=2;ft<Ye-1;ft++)ut=`int b${ft}, `+ut,lt*=Ke[Ye-ft-1],ht=`b${ft} * ${lt} + `+ht;const pt=getGlslDifferences();return`
    vec4 ${tt}(${ut}) {
      int index = ${ht};
      int texR = index / ${ot};
      int texC = index - texR * ${ot};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${ot}, ${it});
      return ${pt.texture2D}(${Je}, uv);
    }
  `}function getSampler4D(Xe){const Ke=Xe.shapeInfo.logicalShape,Ye=Xe.name,Je="get"+Ye.charAt(0).toUpperCase()+Ye.slice(1),tt=Ke[3],st=Ke[2]*tt,rt=Ke[1]*st,{newShape:it,keptDims:ot}=squeezeShape(Ke);if(it.length<Ke.length){const ft=squeezeInputInfo(Xe,it),xt=["row","col","depth","depth2"];return`
      ${getSamplerFromInInfo(ft)}
      float ${Je}(int row, int col, int depth, int depth2) {
        return ${Je}(${getSqueezedParams(xt,ot)});
      }
    `}if(Xe.shapeInfo.isUniform)return`
      float ${Je}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${rt}, ${st}, ${tt}, 1)));
        ${getUniformSampler(Xe)}
      }
    `;const at=Xe.shapeInfo.flatOffset,lt=Xe.shapeInfo.texShape,ut=lt[0],ht=lt[1];if(ht===rt&&at==null)return`
      float ${Je}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${st}, ${tt}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${ht}.0, ${ut}.0);
        return sampleTexture(${Ye}, uv);
      }
    `;if(ht===tt&&at==null)return`
      float ${Je}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${Ke[1]*Ke[2]}, ${Ke[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${ht}.0, ${ut}.0);
        return sampleTexture(${Ye}, uv);
      }
    `;const pt=getFlatOffsetUniformName(Ye);return`
    float ${Je}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${rt} + col * ${st} +
          depth * ${tt} + depth2;
      vec2 uv = uvFromFlat(${ut}, ${ht}, index + ${pt});
      return sampleTexture(${Ye}, uv);
    }
  `}function getSampler5D(Xe){const Ke=Xe.shapeInfo.logicalShape,Ye=Xe.name,Je="get"+Ye.charAt(0).toUpperCase()+Ye.slice(1),tt=Ke[4],st=Ke[3]*tt,rt=Ke[2]*st,it=Ke[1]*rt,{newShape:ot,keptDims:at}=squeezeShape(Ke);if(ot.length<Ke.length){const xt=squeezeInputInfo(Xe,ot),vt=["row","col","depth","depth2","depth3"];return`
      ${getSamplerFromInInfo(xt)}
      float ${Je}(int row, int col, int depth, int depth2, int depth3) {
        return ${Je}(${getSqueezedParams(vt,at)});
      }
    `}if(Xe.shapeInfo.isUniform)return`
      float ${Je}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${it}, ${rt}, ${st}, ${tt})) +
          depth3;
        ${getUniformSampler(Xe)}
      }
    `;const lt=Xe.shapeInfo.flatOffset,ut=Xe.shapeInfo.texShape,ht=ut[0],pt=ut[1];if(pt===it&&lt==null)return`
      float ${Je}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${rt}, ${st}, ${tt}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${pt}.0, ${ht}.0);
        return sampleTexture(${Ye}, uv);
      }
    `;if(pt===tt&&lt==null)return`
      float ${Je}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${Ke[1]*Ke[2]*Ke[3]},
               ${Ke[2]*Ke[3]}, ${Ke[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${pt}.0, ${ht}.0);
        return sampleTexture(${Ye}, uv);
      }
    `;const ft=getFlatOffsetUniformName(Ye);return`
    float ${Je}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${it} + col * ${rt} + depth * ${st} +
          depth2 * ${tt} + depth3 + ${ft};
      vec2 uv = uvFromFlat(${ht}, ${pt}, index);
      return sampleTexture(${Ye}, uv);
    }
  `}function getSampler6D(Xe){const Ke=Xe.shapeInfo.logicalShape,Ye=Xe.name,Je="get"+Ye.charAt(0).toUpperCase()+Ye.slice(1),{newShape:tt,keptDims:st}=squeezeShape(Ke);if(tt.length<Ke.length){const vt=squeezeInputInfo(Xe,tt),At=["row","col","depth","depth2","depth3","depth4"];return`
      ${getSamplerFromInInfo(vt)}
      float ${Je}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${Je}(${getSqueezedParams(At,st)});
      }
    `}const rt=Ke[5],it=Ke[4]*rt,ot=Ke[3]*it,at=Ke[2]*ot,lt=Ke[1]*at;if(Xe.shapeInfo.isUniform)return`
      float ${Je}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${lt}, ${at}, ${ot}, ${it})) +
          dot(
            vec2(depth3, depth4),
            vec2(${rt}, 1)));
        ${getUniformSampler(Xe)}
      }
    `;const ut=Xe.shapeInfo.flatOffset,ht=Xe.shapeInfo.texShape,pt=ht[0],ft=ht[1];if(ft===lt&&ut==null)return`
      float ${Je}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${at}, ${ot}, ${it}, ${rt})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${ft}.0, ${pt}.0);
        return sampleTexture(${Ye}, uv);
      }
    `;if(ft===rt&&ut==null)return`
      float ${Je}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${Ke[1]*Ke[2]*Ke[3]*Ke[4]},
               ${Ke[2]*Ke[3]*Ke[4]},
               ${Ke[3]*Ke[4]},
               ${Ke[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${ft}.0, ${pt}.0);
        return sampleTexture(${Ye}, uv);
      }
    `;const xt=getFlatOffsetUniformName(Ye);return`
    float ${Je}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${lt} + col * ${at} + depth * ${ot} +
          depth2 * ${it} + depth3 * ${rt} + depth4 + ${xt};
      vec2 uv = uvFromFlat(${pt}, ${ft}, index);
      return sampleTexture(${Ye}, uv);
    }
  `}function getUniformSampler(Xe){const Ke=Xe.name,Ye=sizeFromShape(Xe.shapeInfo.logicalShape);return Ye<2?`return ${Ke};`:`
    for (int i = 0; i < ${Ye}; i++) {
      if (i == index) {
        return ${Ke}[i];
      }
    }
  `}function getPackedSamplerAtOutputCoords(Xe,Ke){const Ye=Xe.name,Je=Ye.charAt(0).toUpperCase()+Ye.slice(1),tt="get"+Je+"AtOutCoords",st=Xe.shapeInfo.logicalShape.length,rt=Ke.logicalShape.length,it=getBroadcastDims(Xe.shapeInfo.logicalShape,Ke.logicalShape),ot=getCoordsDataType(rt),at=rt-st;let lt;const ut=["x","y","z","w","u","v"];st===0?lt="":rt<2&&it.length>=1?lt="coords = 0;":lt=it.map(Et=>`coords.${ut[Et+at]} = 0;`).join(`
`);let ht="";rt<2&&st>0?ht="coords":ht=Xe.shapeInfo.logicalShape.map((Et,wt)=>`coords.${ut[wt+at]}`).join(", ");let pt="return outputValue;";const xt=sizeFromShape(Xe.shapeInfo.logicalShape)===1,At=sizeFromShape(Ke.logicalShape)===1;if(st===1&&!xt&&!At)pt=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(xt&&!At)rt===1?pt=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:pt=`
        return vec4(outputValue.x);
      `;else if(it.length){const Et=st-2,wt=st-1;it.indexOf(Et)>-1&&it.indexOf(wt)>-1?pt="return vec4(outputValue.x);":it.indexOf(Et)>-1?pt="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":it.indexOf(wt)>-1&&(pt="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${tt}() {
      ${ot} coords = getOutputCoords();
      ${lt}
      vec4 outputValue = get${Je}(${ht});
      ${pt}
    }
  `}function getSamplerAtOutputCoords(Xe,Ke){const Ye=Xe.name,Je=Ye.charAt(0).toUpperCase()+Ye.slice(1),tt="get"+Je+"AtOutCoords",st=Ke.texShape,rt=Xe.shapeInfo.texShape,it=Xe.shapeInfo.logicalShape.length,ot=Ke.logicalShape.length;if(!Xe.shapeInfo.isUniform&&it===ot&&Xe.shapeInfo.flatOffset==null&&arraysEqual(rt,st))return`
      float ${tt}() {
        return sampleTexture(${Ye}, resultUV);
      }
    `;const at=getCoordsDataType(ot),lt=getBroadcastDims(Xe.shapeInfo.logicalShape,Ke.logicalShape),ut=ot-it;let ht;const pt=["x","y","z","w","u","v"];it===0?ht="":ot<2&&lt.length>=1?ht="coords = 0;":ht=lt.map(xt=>`coords.${pt[xt+ut]} = 0;`).join(`
`);let ft="";return ot<2&&it>0?ft="coords":ft=Xe.shapeInfo.logicalShape.map((xt,vt)=>`coords.${pt[vt+ut]}`).join(", "),`
    float ${tt}() {
      ${at} coords = getOutputCoords();
      ${ht}
      return get${Je}(${ft});
    }
  `}function getCoordsDataType(Xe){if(Xe<=1)return"int";if(Xe===2)return"ivec2";if(Xe===3)return"ivec3";if(Xe===4)return"ivec4";if(Xe===5)return"ivec5";if(Xe===6)return"ivec6";throw Error(`GPU for rank ${Xe} is not yet supported`)}function squeezeInputInfo(Xe,Ke){const Ye=JSON.parse(JSON.stringify(Xe));return Ye.shapeInfo.logicalShape=Ke,Ye}function getSqueezedParams(Xe,Ke){return Ke.map(Ye=>Xe[Ye]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function compileProgram(Xe,Ke,Ye,Je){const tt=Ke.userCode,st=Ye.map((pt,ft)=>{const xt={logicalShape:pt.shape,texShape:pt.isUniform?null:pt.texData.texShape,isUniform:pt.isUniform,isPacked:pt.isUniform?!1:pt.texData.isPacked,flatOffset:null};return pt.texData!=null&&pt.texData.slice!=null&&pt.texData.slice.flatOffset>0&&(xt.flatOffset=pt.texData.slice.flatOffset),{name:Ke.variableNames[ft],shapeInfo:xt}}),rt=st.map(pt=>pt.shapeInfo),it={logicalShape:Je.shape,texShape:Je.texData.texShape,isUniform:!1,isPacked:Je.texData.isPacked,flatOffset:null},ot=makeShader(st,it,tt,Ke.packedInputs),at=Xe.createProgram(ot);let lt=null;const ut=Xe.getUniformLocation(at,"NAN",!1);env().getNumber("WEBGL_VERSION")===1&&(lt=Xe.getUniformLocation(at,"INFINITY",!1));const ht={};for(let pt=0;pt<Ke.variableNames.length;pt++){const ft=Ke.variableNames[pt],xt=!1;ht[ft]=Xe.getUniformLocation(at,ft,xt),ht[`offset${ft}`]=Xe.getUniformLocation(at,`offset${ft}`,xt)}return{program:Ke,source:ot,webGLProgram:at,uniformLocations:ht,inShapeInfos:rt,outShapeInfo:it,infLoc:lt,nanLoc:ut}}function validateBinaryAndProgram(Xe,Ke){if(Xe.length!==Ke.length)throw Error(`Binary was compiled with ${Xe.length} inputs, but was executed with ${Ke.length} inputs`);Xe.forEach((Ye,Je)=>{const tt=Ye.logicalShape,st=Ke[Je],rt=st.shape;if(!arraysEqual(tt,rt))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${tt} and ${rt} must match`);if(Ye.isUniform&&st.isUniform)return;const it=Ye.texShape,ot=st.isUniform?null:st.texData.texShape;if(!arraysEqual(it,ot))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${it} and ${ot} must match`)})}function runProgram(Xe,Ke,Ye,Je,tt){validateBinaryAndProgram(Ke.inShapeInfos,Ye),validateBinaryAndProgram([Ke.outShapeInfo],[Je]);const st=Je.texData.texture,rt=Je.texData.texShape;Je.texData.isPacked?Xe.setOutputPackedMatrixTexture(st,rt[0],rt[1]):Xe.setOutputMatrixTexture(st,rt[0],rt[1]),Xe.setProgram(Ke.webGLProgram),env().getNumber("WEBGL_VERSION")===1&&Ke.infLoc!==null&&Xe.gl.uniform1f(Ke.infLoc,1/0),Ke.nanLoc!==null&&Xe.gl.uniform1f(Ke.nanLoc,NaN),Ye.forEach((it,ot)=>{const at=Ke.program.variableNames[ot],lt=Ke.uniformLocations[at],ut=Ke.uniformLocations[`offset${at}`];if(lt!=null){if(it.isUniform){if(sizeFromShape(it.shape)<2)Xe.gl.uniform1f(lt,it.uniformValues[0]);else{let ht=it.uniformValues;ht instanceof Float32Array||(ht=new Float32Array(ht)),Xe.gl.uniform1fv(lt,ht)}return}it.texData.slice!=null&&ut!=null&&Xe.gl.uniform1i(ut,it.texData.slice.flatOffset),Xe.setInputMatrixTexture(it.texData.texture,lt,ot)}}),tt!=null&&tt(Xe,Ke.webGLProgram),Xe.executeProgram()}function makeShaderKey(Xe,Ke,Ye){let Je="";Ke.concat(Ye).forEach(rt=>{const it=rt.texData!=null&&rt.texData.slice!=null&&rt.texData.slice.flatOffset>0,ot=rt.isUniform?"uniform":rt.texData.texShape;Je+=`${rt.shape}_${ot}_${it}`});const tt=Xe.userCode;let st=Xe.constructor.name;return st+="_"+Je+"_"+tt,st}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:addImplCPU,bincountImpl:bincountImplCPU,bincountReduceImpl:bincountReduceImplCPU,ceilImpl:ceilImplCPU,concatImpl:concatImplCPU,expImpl:expImplCPU,expm1Impl:expm1ImplCPU,floorImpl:floorImplCPU,gatherV2Impl:gatherV2ImplCPU,greaterImpl:greaterImplCPU,lessImpl:lessImplCPU,linSpaceImpl:linSpaceImplCPU,logImpl:logImplCPU,maxImpl:maxImplCPU,maximumImpl:maximumImplCPU,minimumImpl:minimumImplCPU,multiplyImpl:multiplyImplCPU,negImpl:negImplCPU,prodImpl:prodImplCPU,rangeImpl:rangeImplCPU,rsqrtImpl:rsqrtImplCPU,simpleAbsImpl:simpleAbsImplCPU,sliceImpl:sliceImplCPU,stridedSliceImpl:stridedSliceImplCPU,subImpl:subImplCPU,tileImpl:tileImplCPU,topKImpl:topKImplCPU,transposeImpl:transposeImplCPU,uniqueImpl:uniqueImplCPU}=shared;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getVecChannels(Xe,Ke){return["x","y","z","w","u","v"].slice(0,Ke).map(Ye=>`${Xe}.${Ye}`)}function getChannels(Xe,Ke){return Ke===1?[Xe]:getVecChannels(Xe,Ke)}function getSourceCoords$2(Xe,Ke){if(Xe===1)return"rc";let Ye="";for(let Je=0;Je<Xe;Je++)Ye+=Ke[Je],Je<Xe-1&&(Ye+=",");return Ye}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PackProgram{constructor(Ke){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=Ke;const Ye=Ke.length;if(Ye===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const Je=getChannels("rc",Ye),tt=getCoordsDataType(Ye),st=getOutOfBoundsCondition(Ye,Ke,Je),rt=getSetup(Ye,Ke[Ke.length-1],Ke[Ke.length-2],Je),it=getOutput(Ke,Je);this.userCode=`
        void main() {
          ${tt} rc = getOutputCoords();

          if(${st}) {
            setOutput(vec4(0));
          } else {
            ${rt}

            setOutput(vec4(${it}));
          }
        }
      `}}}function getSourceCoordsArr(Xe,Ke){const Ye=[];for(let Je=0;Je<=1;Je++)for(let tt=0;tt<=1;tt++){let st=`${Je===0?"r":"rp1"}, ${tt===0?"c":"cp1"}`;for(let rt=2;rt<Xe;rt++)st=`${Ke[Ke.length-1-rt]},`+st;Ye.push(st)}return Ye}function getOutOfBoundsCondition(Xe,Ke,Ye){if(Xe===1)return`rc > ${Ke[0]}`;let Je="";for(let tt=Xe-2;tt<Xe;tt++)Je+=`${Ye[tt]} >= ${Ke[tt]}`,tt<Xe-1&&(Je+="||");return Je}function getSetup(Xe,Ke,Ye,Je){if(Xe===1)return"";const tt=Je.slice(-2);return`
    int r = ${tt[0]};
    int c = ${tt[1]};
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= ${Ke};
    bool rEdge = rp1 >= ${Ye};
  `}function getOutput(Xe,Ke){const Ye=Xe.length,Je=getSourceCoordsArr(Ye,Ke);return Ye===1?`getA(rc),
            rc + 1 >= ${Xe[0]} ? 0. : getA(rc + 1),
            0, 0`:`getA(${Je[0]}),
          cEdge ? 0. : getA(${Je[1]}),
          rEdge ? 0. : getA(${Je[2]}),
          rEdge || cEdge ? 0. : getA(${Je[3]})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReshapePackedProgram{constructor(Ke,Ye){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ke;let Je="";for(let tt=0;tt<4;tt++){let st="thisRC = rc;";tt%2===1&&(st+="thisRC.z += 1;"),tt>1&&(st+="thisRC.y += 1;"),Je+=`
        ${st}
        ${tt>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${tt}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${tt>0?"}":""}
      `}this.userCode=`
      ${getReshapedInputCoords(Ye)}
      ${getFlatIndexFrom3D(Ke)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${Ke[1]};
        int cols = ${Ke[2]};

        ${Je}

        setOutput(result);
      }
    `}}function getReshapedInputCoords(Xe){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${getLogicalCoordinatesFromFlatIndex(["r","c","d"],Xe)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TextureManager{constructor(Ke){this.gpgpu=Ke,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(Ke,Ye,Je){const tt=getPhysicalFromLogicalTextureType(Ye,Je),st=getKeyFromTextureShape(Ke,tt,Je);st in this.freeTextures||(this.freeTextures[st]=[]),st in this.usedTextures||(this.usedTextures[st]=[]);const rt=computeBytes(Ke,tt,this.gpgpu.gl,this.gpgpu.textureConfig,Je);if(this.freeTextures[st].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=rt,this.log();const ot=this.freeTextures[st].shift();return this.usedTextures[st].push(ot),ot}let it;return tt===PhysicalTextureType.PACKED_2X2_FLOAT32?it=this.gpgpu.createPackedMatrixTexture(Ke[0],Ke[1]):tt===PhysicalTextureType.PACKED_2X2_FLOAT16?it=this.gpgpu.createFloat16PackedMatrixTexture(Ke[0],Ke[1]):tt===PhysicalTextureType.UNPACKED_FLOAT32?it=this.gpgpu.createFloat32MatrixTexture(Ke[0],Ke[1]):tt===PhysicalTextureType.UNPACKED_FLOAT16?it=this.gpgpu.createFloat16MatrixTexture(Ke[0],Ke[1]):tt===PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE&&(it=this.gpgpu.createUnsignedBytesMatrixTexture(Ke[0],Ke[1])),this.usedTextures[st].push(it),this.numUsedTextures++,this._numBytesAllocated+=rt,this.log(),it}releaseTexture(Ke,Ye,Je,tt){if(this.freeTextures==null)return;const st=getPhysicalFromLogicalTextureType(Je,tt),rt=getKeyFromTextureShape(Ye,st,tt);rt in this.freeTextures||(this.freeTextures[rt]=[]);const it=computeBytes(Ye,st,this.gpgpu.gl,this.gpgpu.textureConfig,tt),ot=env().get("WEBGL_DELETE_TEXTURE_THRESHOLD");ot!==-1&&this._numBytesAllocated>ot?(this.gpgpu.deleteMatrixTexture(Ke),this._numBytesAllocated-=it):(this.freeTextures[rt].push(Ke),this.numFreeTextures++,this._numBytesFree+=it),this.numUsedTextures--;const at=this.usedTextures[rt],lt=at.indexOf(Ke);if(lt<0)throw new Error("Cannot release a texture that was never provided by this texture manager");at.splice(lt,1),this.log()}log(){if(!this.logEnabled)return;const Ke=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${Ke})`);const Ye=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*Ye)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const Ke in this.freeTextures)this.freeTextures[Ke].forEach(Ye=>{this.gpgpu.deleteMatrixTexture(Ye)});for(const Ke in this.usedTextures)this.usedTextures[Ke].forEach(Ye=>{this.gpgpu.deleteMatrixTexture(Ye)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function numBytesForInternalFormat(Xe,Ke){const Ye=Xe;if(Ke===Ye.R32F)return 4;if(Ke===Ye.R16F)return 2;if(Ke===Ye.RGBA32F)return 16;if(Ke===Xe.RGBA)return 16;if(Ke===Ye.RGBA16F)return 8;throw new Error(`Unknown internal format ${Ke}`)}function computeBytes(Xe,Ke,Ye,Je,tt){const st=internalFormatForPhysicalTexType(Ke,Je);let rt;if(tt){const[ot,at]=getPackedMatrixTextureShapeWidthHeight(Xe[0],Xe[1]);rt=ot*at}else{const[ot,at]=getUnpackedMatrixTextureShapeWidthHeight(Xe[0],Xe[1]);rt=ot*at}const it=numBytesForInternalFormat(Ye,st);return rt*it}function internalFormatForPhysicalTexType(Xe,Ke){switch(Xe){case PhysicalTextureType.PACKED_2X2_FLOAT32:return getInternalFormatForPackedMatrixTexture(Ke);case PhysicalTextureType.PACKED_2X2_FLOAT16:return getInternalFormatForFloat16PackedMatrixTexture(Ke);case PhysicalTextureType.UNPACKED_FLOAT32:return getInternalFormatForFloat32MatrixTexture(Ke);case PhysicalTextureType.UNPACKED_FLOAT16:return getInternalFormatForFloat16MatrixTexture(Ke);case PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE:return getInternalFormatForUnsignedBytesMatrixTexture(Ke);default:throw new Error(`Unknown physical texture type ${Xe}`)}}function getPhysicalTextureForRendering(Xe){return env().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?Xe?PhysicalTextureType.PACKED_2X2_FLOAT32:PhysicalTextureType.UNPACKED_FLOAT32:Xe?PhysicalTextureType.PACKED_2X2_FLOAT16:PhysicalTextureType.UNPACKED_FLOAT16}function getPhysicalFromLogicalTextureType(Xe,Ke){if(Xe===TextureUsage.UPLOAD)return PhysicalTextureType.PACKED_2X2_FLOAT32;if(Xe===TextureUsage.RENDER||Xe==null)return getPhysicalTextureForRendering(Ke);if(Xe===TextureUsage.DOWNLOAD||Xe===TextureUsage.PIXELS)return PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${Xe}`)}function getKeyFromTextureShape(Xe,Ke,Ye){return`${Xe[0]}_${Xe[1]}_${Ke}_${Ye}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UnaryOpProgram{constructor(Ke,Ye){this.variableNames=["A"],this.outputShape=Ke,this.userCode=`
      float unaryOperation(float x) {
        ${Ye}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const CHECK_NAN_SNIPPET$2="if (isnan(x)) return x;",LINEAR$1="return x;",ABS$1="return abs(x);",ELU$2="return (x >= 0.0) ? x : (exp(x) - 1.0);",RELU$2=CHECK_NAN_SNIPPET$2+`
  return (x < 0.0) ? 0.0 : x;
`,RELU6$2=CHECK_NAN_SNIPPET$2+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,CLONE="return x;";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LINEAR="return x;",ELU$1=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,RELU$1=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,RELU6$1=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;class UnaryOpPackedProgram{constructor(Ke,Ye){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ke,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${Ye}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UnpackProgram{constructor(Ke){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=Ke;const Ye=Ke.length,Je=getChannels("rc",Ye),tt=getCoordsDataType(Ye),st=getSourceCoords$2(Ye,Je),rt=Je.slice(-2),it=Ye<=1?"rc":`vec2(${rt.join(",")})`;this.userCode=`
      void main() {
        ${tt} rc = getOutputCoords();
        vec4 packedInput = getA(${st});

        setOutput(getChannel(packedInput, ${it}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const whereImpl=whereImpl$2,EPSILON_FLOAT32=1e-7,EPSILON_FLOAT16=1e-4,binaryCaches={};function getBinaryCache(Xe){return Xe in binaryCaches||(binaryCaches[Xe]={}),binaryCaches[Xe]}const CPU_HANDOFF_SIZE_THRESHOLD=128,BEFORE_PAGING_CONSTANT=600;function numMBBeforeWarning(){return env().global.screen==null?1024:env().global.screen.height*env().global.screen.width*window.devicePixelRatio*BEFORE_PAGING_CONSTANT/1024/1024}class MathBackendWebGL extends KernelBackend{constructor(Ke){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,this.disposed=!1,!env().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(Ke==null){const Ye=getWebGLContext(env().getNumber("WEBGL_VERSION"));this.binaryCache=getBinaryCache(env().getNumber("WEBGL_VERSION")),this.gpgpu=new GPGPUContext(Ye),this.canvas=Ye.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=Ke,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=Ke.gl.canvas;this.textureManager=new TextureManager(this.gpgpu),this.numMBBeforeWarning=numMBBeforeWarning(),this.texData=new DataStorage(this,engine())}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(Ke,Ye,Je){if((env().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||env().getBool("DEBUG"))&&this.checkNumericalProblems(Ke),Je==="complex64"&&Ke!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const tt={};return this.texData.set(tt,{shape:Ye,dtype:Je,values:Ke,usage:TextureUsage.UPLOAD,refCount:1,complexParentRefCount:0}),tt}incRef(Ke){const Ye=this.texData.get(Ke);Ye.refCount++}decRef(Ke){if(this.texData.has(Ke)){const Ye=this.texData.get(Ke);Ye.refCount--}}decComplexRef(Ke){if(this.texData.has(Ke)){const Ye=this.texData.get(Ke);Ye.complexParentRefCount>0&&Ye.refCount--}}move(Ke,Ye,Je,tt){if(env().getBool("DEBUG")&&this.checkNumericalProblems(Ye),tt==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(Ke,{shape:Je,dtype:tt,values:Ye,usage:TextureUsage.UPLOAD,refCount:1,complexParentRefCount:0})}disposeIntermediateTensorInfo(Ke){const Ye=Ke.dataId;if(this.texData.has(Ye)){const Je=this.texData.get(Ye);Je.refCount--,Je.refCount<1&&this.disposeData(Ye)}}readSync(Ke){const Ye=this.texData.get(Ke),{values:Je,dtype:tt,complexTensorInfos:st,slice:rt,shape:it,isPacked:ot}=Ye;if(rt!=null){let ht;ot?ht=new UnaryOpPackedProgram(it,CLONE):ht=new UnaryOpProgram(it,CLONE);const pt=this.runWebGLProgram(ht,[{dataId:Ke,shape:it,dtype:tt}],tt),ft=this.readSync(pt.dataId);return this.disposeIntermediateTensorInfo(pt),ft}if(Je!=null)return this.convertAndCacheOnCPU(Ke);if(tt==="string")return Je;const at=this.activeTimers!=null;let lt;at&&(lt=now$1());let ut;if(tt==="complex64"){const ht=this.readSync(st.real.dataId),pt=this.readSync(st.imag.dataId);ut=mergeRealAndImagArrays(ht,pt)}else ut=this.getValuesFromTexture(Ke);return at&&(this.downloadWaitMs+=now$1()-lt),this.convertAndCacheOnCPU(Ke,ut)}async read(Ke){if(this.pendingRead.has(Ke)){const ft=this.pendingRead.get(Ke);return new Promise(xt=>ft.push(xt))}const Ye=this.texData.get(Ke),{values:Je,shape:tt,slice:st,dtype:rt,complexTensorInfos:it,isPacked:ot}=Ye;if(st!=null){let ft;ot?ft=new UnaryOpPackedProgram(tt,CLONE):ft=new UnaryOpProgram(tt,CLONE);const xt=this.runWebGLProgram(ft,[{dataId:Ke,shape:tt,dtype:rt}],rt),vt=this.read(xt.dataId);return this.disposeIntermediateTensorInfo(xt),vt}if(Je!=null)return this.convertAndCacheOnCPU(Ke);if(!env().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&env().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let at=null,lt;if(rt!=="complex64"&&env().get("WEBGL_BUFFER_SUPPORTED")){lt=this.decode(Ke);const ft=this.texData.get(lt.dataId);at=this.gpgpu.createBufferFromTexture(ft.texture,...getDenseTexShape(tt))}this.pendingRead.set(Ke,[]),rt!=="complex64"&&await this.gpgpu.createAndWaitForFence();let ut;if(rt==="complex64"){const ft=await Promise.all([this.read(it.real.dataId),this.read(it.imag.dataId)]),xt=ft[0],vt=ft[1];ut=mergeRealAndImagArrays(xt,vt)}else if(at==null)ut=this.getValuesFromTexture(Ke);else{const ft=sizeFromShape(tt);ut=this.gpgpu.downloadFloat32MatrixFromBuffer(at,ft)}lt!=null&&this.disposeIntermediateTensorInfo(lt);const ht=this.convertAndCacheOnCPU(Ke,ut),pt=this.pendingRead.get(Ke);return this.pendingRead.delete(Ke),pt.forEach(ft=>ft(ht)),this.pendingDisposal.has(Ke)&&(this.pendingDisposal.delete(Ke),this.disposeData(Ke),this.pendingDeletes--),ht}bufferSync(Ke){const Ye=this.readSync(Ke.dataId);let Je=Ye;if(Ke.dtype==="string")try{Je=Ye.map(tt=>decodeString(tt))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return buffer$1(Ke.shape,Ke.dtype,Je)}checkNumericalProblems(Ke){if(Ke!=null)for(let Ye=0;Ye<Ke.length;Ye++){const Je=Ke[Ye];if(!canBeRepresented(Je))throw env().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${Je} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${Je} cannot be represented on this device.`)}}getValuesFromTexture(Ke){const{shape:Ye,dtype:Je,isPacked:tt}=this.texData.get(Ke),st=sizeFromShape(Ye);if(env().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const ht=this.decode(Ke),pt=this.texData.get(ht.dataId),ft=this.gpgpu.downloadMatrixFromPackedTexture(pt.texture,...getDenseTexShape(Ye)).subarray(0,st);return this.disposeIntermediateTensorInfo(ht),ft}const rt=env().getBool("WEBGL_PACK")&&tt===!0,it=rt?getShapeAs3D(Ye):Ye,ot=rt?new EncodeFloatPackedProgram(it):new EncodeFloatProgram(it),at=this.runWebGLProgram(ot,[{shape:it,dtype:Je,dataId:Ke}],"float32"),lt=this.texData.get(at.dataId),ut=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(lt.texture,lt.texShape[0],lt.texShape[1]).subarray(0,st);return this.disposeIntermediateTensorInfo(at),ut}async time(Ke){const Ye=this.activeTimers,Je=[];let tt=!1;this.programTimersStack==null?(this.programTimersStack=Je,tt=!0):this.activeTimers.push(Je),this.activeTimers=Je,Ke();const st=flatten$2(this.activeTimers.map(ot=>ot.query)).filter(ot=>ot!=null),rt=flatten$2(this.activeTimers.map(ot=>ot.name)).filter(ot=>ot!=null);this.activeTimers=Ye,tt&&(this.programTimersStack=null);const it={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const ot=await Promise.all(st);it.kernelMs=sum$3(ot),it.getExtraProfileInfo=()=>ot.map((at,lt)=>({name:rt[lt],ms:at})).map(at=>`${at.name}: ${at.ms}`).join(", ")}else it.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,it}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:now$1(),endMs:null}}endTimer(Ke){return env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),Ke):(Ke.endMs=now$1(),Ke)}async getQueryTime(Ke){if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(Ke);const Ye=Ke;return Ye.endMs-Ye.startMs}disposeData(Ke){if(this.pendingDisposal.has(Ke))return;if(this.pendingRead.has(Ke)){this.pendingDisposal.add(Ke),this.pendingDeletes++;return}if(!this.texData.has(Ke))return;if(this.texData.get(Ke).complexParentRefCount>0){this.texData.get(Ke).refCount--;return}this.releaseGPUData(Ke);const{complexTensorInfos:Ye}=this.texData.get(Ke);Ye!=null&&(this.texData.get(Ye.real.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(Ye.real),this.texData.get(Ye.imag.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(Ye.imag)),this.texData.delete(Ke)}releaseGPUData(Ke){const{texture:Ye,dtype:Je,texShape:tt,usage:st,isPacked:rt,slice:it}=this.texData.get(Ke),ot=it&&it.origDataId||Ke,at=this.dataRefCount.get(ot);at>1?this.dataRefCount.set(ot,at-1):(this.dataRefCount.delete(ot),Ye!=null&&(this.numBytesInGPU-=this.computeBytes(tt,Je),this.textureManager.releaseTexture(Ye,tt,st,rt)));const lt=this.texData.get(Ke);lt.texture=null,lt.texShape=null,lt.isPacked=!1,lt.slice=null}getTexture(Ke){return this.uploadToGPU(Ke),this.texData.get(Ke).texture}getDataInfo(Ke){return this.texData.get(Ke)}getCPUBackend(){return env().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=engine().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(Ke,Ye=CPU_HANDOFF_SIZE_THRESHOLD){const Je=this.getCPUBackend();return!env().getBool("IS_TEST")&&!this.warnedAboutCPUBackend&&Je==null&&(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),Je!=null&&Ke.every(tt=>this.texData.get(tt.dataId).texture==null&&sizeFromShape(tt.shape)<Ye)}getGPGPUContext(){return this.gpgpu}where(Ke){warn$1("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const Ye=Ke.dataSync();return whereImpl(Ke.shape,Ye)}packedUnaryOp(Ke,Ye,Je){const tt=new UnaryOpPackedProgram(Ke.shape,Ye);return this.compileAndRun(tt,[Ke],Je)}abs(Ke){if(this.shouldExecuteOnCPU([Ke])&&Ke.dtype!=="complex64"){const Je=simpleAbsImplCPU(this.texData.get(Ke.dataId).values);return this.makeOutput(Ke.shape,Ke.dtype,Je)}if(env().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(Ke,ABS$1,Ke.dtype);const Ye=new UnaryOpProgram(Ke.shape,ABS$1);return this.compileAndRun(Ye,[Ke])}makeTensorInfo(Ke,Ye,Je){let tt;if(Ye==="string"&&Je!=null&&Je.length>0&&isString$2(Je[0])){const st=Je.map(rt=>encodeString(rt));tt=this.write(st,Ke,Ye)}else tt=this.write(Je,Ke,Ye);return this.texData.get(tt).usage=null,{dataId:tt,shape:Ke,dtype:Ye}}makeOutput(Ke,Ye,Je){const{dataId:tt}=this.makeTensorInfo(Ke,Ye,Je);return engine().makeTensorFromDataId(tt,Ke,Ye,this)}unpackTensor(Ke){const Ye=new UnpackProgram(Ke.shape);return this.runWebGLProgram(Ye,[Ke],Ke.dtype)}packTensor(Ke){const Ye=new PackProgram(Ke.shape);return this.runWebGLProgram(Ye,[Ke],Ke.dtype,null,!0)}packedReshape(Ke,Ye){const Je=[getBatchDim(Ke.shape),...getRowsCols(Ke.shape)],tt={dtype:Ke.dtype,shape:Je,dataId:Ke.dataId},st=[getBatchDim(Ye),...getRowsCols(Ye)],rt=new ReshapePackedProgram(st,Je),ot=this.runWebGLProgram(rt,[tt],Ke.dtype,null,!0);return{dataId:ot.dataId,shape:Ye,dtype:ot.dtype}}decode(Ke){const Ye=this.texData.get(Ke),{isPacked:Je,shape:tt,dtype:st}=Ye,rt=getShapeAs3D(tt);let it;Je?it=new DecodeMatrixPackedProgram(rt):it=new DecodeMatrixProgram(rt);const at=this.runWebGLProgram(it,[{shape:rt,dtype:st,dataId:Ke}],st,null,!0);return{dtype:st,shape:tt,dataId:at.dataId}}runWebGLProgram(Ke,Ye,Je,tt,st=!1){const rt=this.makeTensorInfo(Ke.outputShape,Je),it=this.texData.get(rt.dataId);if(Ke.packedOutput&&(it.isPacked=!0),Ke.outPackingScheme===PackingScheme.DENSE){const xt=getDenseTexShape(Ke.outputShape);it.texShape=xt.map(vt=>vt*2)}if(Ke.outTexUsage!=null&&(it.usage=Ke.outTexUsage),sizeFromShape(rt.shape)===0)return it.values=getTypedArrayFromDType(rt.dtype,0),rt;const ot=[],at=Ye.map(xt=>{if(xt.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let vt=this.texData.get(xt.dataId);if(vt.texture==null){if(!Ke.packedInputs&&sizeFromShape(xt.shape)<=env().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:xt.shape,texData:null,isUniform:!0,uniformValues:vt.values};Ke.packedInputs&&(vt.isPacked=!0,vt.shape=xt.shape)}else if(!!vt.isPacked!=!!Ke.packedInputs)xt=vt.isPacked?this.unpackTensor(xt):this.packTensor(xt),ot.push(xt),vt=this.texData.get(xt.dataId);else if(vt.isPacked&&!isReshapeFree(vt.shape,xt.shape)){const At=xt,Et=xt.shape;xt.shape=vt.shape,xt=this.packedReshape(xt,Et),ot.push(xt),vt=this.texData.get(xt.dataId),At.shape=Et}return this.uploadToGPU(xt.dataId),{shape:xt.shape,texData:vt,isUniform:!1}});this.uploadToGPU(rt.dataId);const lt={shape:rt.shape,texData:it,isUniform:!1},ut=makeShaderKey(Ke,at,lt),ht=this.getAndSaveBinary(ut,()=>compileProgram(this.gpgpu,Ke,at,lt)),pt=this.activeTimers!=null;let ft;if(pt&&(ft=this.startTimer()),runProgram(this.gpgpu,ht,at,lt,tt),ot.forEach(xt=>this.disposeIntermediateTensorInfo(xt)),pt&&(ft=this.endTimer(ft),this.activeTimers.push({name:Ke.constructor.name,query:this.getQueryTime(ft)})),!env().getBool("WEBGL_LAZILY_UNPACK")&&it.isPacked&&st===!1){const xt=this.unpackTensor(rt);return this.disposeIntermediateTensorInfo(rt),xt}return rt}compileAndRun(Ke,Ye,Je,tt,st=!1){Je=Je||Ye[0].dtype;const rt=this.runWebGLProgram(Ke,Ye,Je,tt,st);return engine().makeTensorFromDataId(rt.dataId,rt.shape,rt.dtype)}getAndSaveBinary(Ke,Ye){return Ke in this.binaryCache||(this.binaryCache[Ke]=Ye()),this.binaryCache[Ke]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(env().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(Ye=>{this.gpgpu.deleteProgram(this.binaryCache[Ye].webGLProgram),delete this.binaryCache[Ye]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=tidy(()=>{if(!env().get("WEBGL_RENDER_FLOAT32_ENABLED")){const Ke=env().getBool("DEBUG");env().set("DEBUG",!1);const Ye=this.abs(scalar(1e-8)).dataSync()[0];if(env().set("DEBUG",Ke),Ye>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?EPSILON_FLOAT32:EPSILON_FLOAT16}uploadToGPU(Ke){const Ye=this.texData.get(Ke),{shape:Je,dtype:tt,values:st,texture:rt,usage:it,isPacked:ot}=Ye;if(rt!=null)return;const at=this.activeTimers!=null;let lt;at&&(lt=now$1());let ut=Ye.texShape;if(ut==null&&(ut=getTextureShapeFromLogicalShape(Je,ot),Ye.texShape=ut),st!=null){const ht=getShapeAs3D(Je);let pt,ft=ut[1],xt=ut[0];const vt=st instanceof Uint8Array;ot?([ft,xt]=getPackedMatrixTextureShapeWidthHeight(ut[0],ut[1]),pt=new EncodeMatrixPackedProgram(ht,[xt,ft],vt)):pt=new EncodeMatrixProgram(ht,[xt,ft],vt);const At=this.makeTensorInfo([xt,ft],tt);vt?this.texData.get(At.dataId).usage=TextureUsage.PIXELS:this.texData.get(At.dataId).usage=TextureUsage.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(At.dataId),ft,xt,st);const wt=this.runWebGLProgram(pt,[At],tt,null,!0),_t=this.texData.get(wt.dataId);Ye.texture=_t.texture,Ye.texShape=_t.texShape,Ye.isPacked=_t.isPacked,Ye.usage=_t.usage,this.disposeIntermediateTensorInfo(At),this.texData.delete(wt.dataId),Ye.values=null,at&&(this.uploadWaitMs+=now$1()-lt)}else{const ht=this.acquireTexture(ut,it,tt,ot);Ye.texture=ht}}convertAndCacheOnCPU(Ke,Ye){const Je=this.texData.get(Ke),{dtype:tt}=Je;return this.releaseGPUData(Ke),Ye!=null&&(Je.values=float32ToTypedArray(Ye,tt)),Je.values}acquireTexture(Ke,Ye,Je,tt){if(this.numBytesInGPU+=this.computeBytes(Ke,Je),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const st=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${st} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(Ke,Ye,tt)}computeBytes(Ke,Ye){return Ke[0]*Ke[1]*bytesPerElement(Ye)}}function float32ToTypedArray(Xe,Ke){if(Ke==="float32"||Ke==="complex64")return Xe;if(Ke==="int32"||Ke==="bool"){const Ye=Ke==="int32"?new Int32Array(Xe.length):new Uint8Array(Xe.length);for(let Je=0;Je<Ye.length;++Je)Ye[Je]=Math.round(Xe[Je]);return Ye}else throw new Error(`Unknown dtype ${Ke}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */isBrowser$2()&&registerBackend("webgl",()=>new MathBackendWebGL,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHECK_NAN_SNIPPET$1=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class BinaryOpProgram{constructor(Ke,Ye,Je){this.variableNames=["A","B"],this.outputShape=assertAndGetBroadcastShape(Ye,Je),this.userCode=`
      float binaryOperation(float a, float b) {
        ${Ke}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHECK_NAN_SNIPPET=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;class BinaryOpPackedProgram{constructor(Ke,Ye,Je,tt=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=assertAndGetBroadcastShape(Ye,Je);const st=this.outputShape.length;let rt="";if(tt)if(st===0||sizeFromShape(this.outputShape)===1)rt=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(rt=`
          ${getCoordsDataType(st)} coords = getOutputCoords();
        `,st===1)rt+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const ot=getChannels("coords",st);rt+=`
            bool nextRowOutOfBounds =
              (${ot[st-2]} + 1) >= ${this.outputShape[st-2]};
            bool nextColOutOfBounds =
              (${ot[st-1]} + 1) >= ${this.outputShape[st-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${Ke}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${rt}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function identity$3(Xe){const{inputs:Ke,backend:Ye}=Xe,{x:Je}=Ke;return Ye.incRef(Je.dataId),{dataId:Je.dataId,shape:Je.shape,dtype:Je.dtype}}const identityConfig={kernelName:Identity$1,backendName:"webgl",kernelFunc:identity$3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function complex(Xe){const{inputs:Ke,backend:Ye}=Xe,{real:Je,imag:tt}=Ke,st=Ye.makeTensorInfo(Je.shape,"complex64"),rt=Ye.texData.get(st.dataId),it=identity$3({inputs:{x:Je},backend:Ye}),ot=Ye.texData.get(it.dataId);ot.complexParentRefCount++;const at=identity$3({inputs:{x:tt},backend:Ye}),lt=Ye.texData.get(at.dataId);return lt.complexParentRefCount++,rt.complexTensorInfos={real:it,imag:at},st}const complexConfig={kernelName:Complex,backendName:"webgl",kernelFunc:complex};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LEAKYRELU="return (a < 0.) ? b * a : a;",LEAKYRELU_PACKED=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function leakyRelu(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{alpha:st}=Je,rt=Ye.makeTensorInfo([],"float32",createScalarValue(st,"float32")),it=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new BinaryOpPackedProgram(LEAKYRELU_PACKED,tt.shape,rt.shape):new BinaryOpProgram(LEAKYRELU,tt.shape,rt.shape),ot=Ye.runWebGLProgram(it,[tt,rt],tt.dtype);return Ye.disposeIntermediateTensorInfo(rt),ot}const leakyReluConfig={kernelName:LeakyRelu,backendName:"webgl",kernelFunc:leakyRelu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PRELU="return (a < 0.) ? b * a : a;",PRELU_PACKED=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function prelu(Xe){const{inputs:Ke,backend:Ye}=Xe,{x:Je,alpha:tt}=Ke,st=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new BinaryOpPackedProgram(PRELU_PACKED,Je.shape,tt.shape):new BinaryOpProgram(PRELU,Je.shape,tt.shape);return Ye.runWebGLProgram(st,[Je,tt],Je.dtype)}const preluConfig={kernelName:Prelu,backendName:"webgl",kernelFunc:prelu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHECK_NAN_SNIPPET_UNARY="if (isnan(x)) return x;",CHECK_NAN_SNIPPET_BINARY=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,CHECK_NAN_SNIPPET_BINARY_PACKED=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;function unaryKernelFunc({opSnippet:Xe,packedOpSnippet:Ke,cpuKernelImpl:Ye,dtype:Je}){return({inputs:tt,backend:st})=>{const{x:rt}=tt,it=st,ot=Je||rt.dtype;if(it.shouldExecuteOnCPU([rt])&&Ye!=null){const ut=it.texData.get(rt.dataId),ht=Ye(ut.values,ot);return it.makeTensorInfo(rt.shape,ot,ht)}const at=env().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&Ke!=null;let lt;return at?lt=new UnaryOpPackedProgram(rt.shape,Ke):lt=new UnaryOpProgram(rt.shape,Xe),it.runWebGLProgram(lt,[rt],ot)}}function binaryKernelFunc({opSnippet:Xe,packedOpSnippet:Ke,checkOutOfBounds:Ye=!1,supportsComplex:Je=!1,cpuKernelImpl:tt,dtype:st}){return({inputs:rt,backend:it})=>{const{a:ot,b:at}=rt,lt=it;if(Je&&ot.dtype==="complex64"){const ft=lt.texData.get(ot.dataId),xt=lt.texData.get(at.dataId),[vt,At]=[[ft.complexTensorInfos.real,xt.complexTensorInfos.real],[ft.complexTensorInfos.imag,xt.complexTensorInfos.imag]].map(wt=>{const[_t,Ct]=wt,Tt={dataId:_t.dataId,dtype:_t.dtype,shape:ot.shape},St={dataId:Ct.dataId,dtype:Ct.dtype,shape:at.shape},Rt=new BinaryOpProgram(Xe,ot.shape,at.shape);return lt.runWebGLProgram(Rt,[Tt,St],upcastType(_t.dtype,Ct.dtype))}),Et=complex({inputs:{real:vt,imag:At},backend:lt});return lt.disposeIntermediateTensorInfo(vt),lt.disposeIntermediateTensorInfo(At),Et}const ut=st||upcastType(ot.dtype,at.dtype);if(lt.shouldExecuteOnCPU([ot,at])&&tt!=null){const ft=lt.texData.get(ot.dataId),xt=lt.texData.get(at.dataId),[vt,At]=tt(ot.shape,at.shape,ft.values,xt.values,ut),Et=lt.makeTensorInfo(At,ut),wt=lt.texData.get(Et.dataId);return wt.values=vt,Et}const ht=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&Ke!=null;let pt;return ht?pt=new BinaryOpPackedProgram(Ke,ot.shape,at.shape,Ye):pt=new BinaryOpProgram(Xe,ot.shape,at.shape),lt.runWebGLProgram(pt,[ot,at],ut)}}function mapActivationToShaderProgram(Xe,Ke=!1){if(Xe==="linear")return Ke?LINEAR:LINEAR$1;if(Xe==="relu")return Ke?RELU$1:RELU$2;if(Xe==="elu")return Ke?ELU$1:ELU$2;if(Xe==="relu6")return Ke?RELU6$1:RELU6$2;if(Xe==="prelu")return Ke?PRELU_PACKED:PRELU;if(Xe==="leakyrelu")return Ke?LEAKYRELU_PACKED:LEAKYRELU;throw new Error(`Activation ${Xe} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MatMulPackedProgram{constructor(Ke,Ye,Je,tt=!1,st=!1,rt=!1,it=null,ot=!1,at=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Je;const lt=tt?Ke[1]:Ke[2],ut=Math.ceil(lt/2),ht=tt?"i * 2, rc.y":"rc.y, i * 2",pt=st?"rc.z, i * 2":"i * 2, rc.z",ft=tt?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],xt=st?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let vt="",At="";it&&(ot?vt=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${it}
        }`:at?vt=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${it}
        }`:vt=`vec4 activation(vec4 x) {
          ${it}
        }`,At="result = activation(result);");const Et=rt?"result += getBiasAtOutCoords();":"";rt&&this.variableNames.push("bias"),ot&&this.variableNames.push("preluActivationWeights"),at&&this.variableNames.push("leakyreluAlpha");let wt="rc.x",_t="rc.x";Ke[0]<Ye[0]?wt=`int(min(float(rc.x), ${Ke[0]-1}.))`:Ye[0]<Ke[0]&&(_t=`int(min(float(rc.x), ${Ye[0]-1}.))`),this.userCode=`
      ${vt}

      const float sharedDimension = ${ut}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${ut}; i++) {
          int batchA = ${wt};
          int batchB = ${_t};
          vec4 a = getMatrixA(batchA, ${ht});
          vec4 b = getMatrixB(batchB, ${pt});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${ft[0]} * ${xt[0]});
          result += (${ft[1]} * ${xt[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${Et}

        ${At}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COMPLEX_MULTIPLY={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class BinaryOpComplexProgram{constructor(Ke,Ye,Je){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=assertAndGetBroadcastShape(Ye,Je),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${Ke}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MUL="return a * b;";function multiply$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{a:Je,b:tt}=Ke,st=upcastType(Je.dtype,tt.dtype);if(Je.dtype==="complex64"){const it=Ye.texData.get(Je.dataId),ot=Ye.texData.get(tt.dataId),at=new BinaryOpComplexProgram(COMPLEX_MULTIPLY.REAL,Je.shape,tt.shape),lt=new BinaryOpComplexProgram(COMPLEX_MULTIPLY.IMAG,Je.shape,tt.shape),ut=[{dataId:it.complexTensorInfos.real.dataId,dtype:it.complexTensorInfos.real.dtype,shape:Je.shape},{dataId:it.complexTensorInfos.imag.dataId,dtype:it.complexTensorInfos.imag.dtype,shape:Je.shape},{dataId:ot.complexTensorInfos.real.dataId,dtype:ot.complexTensorInfos.real.dtype,shape:tt.shape},{dataId:ot.complexTensorInfos.imag.dataId,dtype:ot.complexTensorInfos.imag.dtype,shape:tt.shape}],ht=Ye.runWebGLProgram(at,ut,"float32"),pt=Ye.runWebGLProgram(lt,ut,"float32"),ft=complex({inputs:{real:ht,imag:pt},backend:Ye});return Ye.disposeIntermediateTensorInfo(ht),Ye.disposeIntermediateTensorInfo(pt),ft}if(Ye.shouldExecuteOnCPU([Je,tt])){const it=Ye.texData.get(Je.dataId),ot=Ye.texData.get(tt.dataId),[at,lt]=multiplyImplCPU(Je.shape,tt.shape,it.values,ot.values,st),ut=Ye.makeTensorInfo(lt,st),ht=Ye.texData.get(ut.dataId);return ht.values=at,ut}let rt;return env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?rt=new BinaryOpPackedProgram(MUL,Je.shape,tt.shape):rt=new BinaryOpProgram(MUL,Je.shape,tt.shape),Ye.runWebGLProgram(rt,[Je,tt],st)}const multiplyConfig={kernelName:Multiply$2,backendName:"webgl",kernelFunc:multiply$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function packedReshape(Xe,Ke,Ye){const Je=[getBatchDim(Xe.shape),...getRowsCols(Xe.shape)],tt={dtype:Xe.dtype,shape:Je,dataId:Xe.dataId},st=[getBatchDim(Ke),...getRowsCols(Ke)],rt=new ReshapePackedProgram(st,Je),ot=Ye.runWebGLProgram(rt,[tt],Xe.dtype,null,!0);return{dataId:ot.dataId,shape:Ke,dtype:ot.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reshape(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{shape:st}=Je,rt=Ye,it=sizeFromShape(tt.shape),ot=inferFromImplicitShape(st,it),at=sizeFromShape(ot);assert$2(it===at,()=>`The new shape (${ot}) has ${at} elements and the old shape (${tt.shape}) has ${it} elements. The new shape and old shape must have the same number of elements.`);const lt=rt.texData.get(tt.dataId);return lt.isPacked&&!isReshapeFree(tt.shape,ot)&&!(lt.texture!==null&&isReshapeFree(lt.shape,ot))?packedReshape(tt,ot,rt):(rt.incRef(tt.dataId),{dataId:tt.dataId,shape:ot,dtype:tt.dtype})}const reshapeConfig={kernelName:Reshape$1,backendName:"webgl",kernelFunc:reshape};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MeanProgram{constructor(Ke,Ye){this.variableNames=["x"];const{windowSize:Je,batchSize:tt,inSize:st,outSize:rt}=Ke;this.outputShape=[tt,rt];const it=Math.floor(Je/4)*4,ot=Je%4;let at="sumValue += dot(values, ones);";if(Ye!=null){const ut=1/Ye;at=`sumValue += dot(values * ${isInt(ut)?ut.toPrecision(2):ut}, ones);`}let lt="";st%Je>0&&(lt=`
        if (inIdx < 0 || inIdx >= ${st}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${lt}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${Je};

        float sumValue = 0.0;

        for (int i = 0; i < ${it}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${at}
        }

        int inIdx = inOffset + ${it};
        if (${ot===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${at}
        } else if (${ot===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${at}
        } else if (${ot===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${at}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReduceProgram{constructor(Ke,Ye){this.variableNames=["x"];const{windowSize:Je,batchSize:tt,inSize:st,outSize:rt}=Ke;this.outputShape=[tt,rt];let it="0.0",ot="";Ye==="prod"?it="1.0":Ye==="min"?(it="1.0 / 1e-20",ot="min"):Ye==="max"&&(it="-1.0 / 1e-20",ot="max");let at=`${Ye}(${Ye}(${Ye}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;Ye==="sum"?at="sumValue":Ye==="prod"?at="prodValue":Ye==="all"?at="allValue":Ye==="any"&&(at="anyValue");const lt=Math.floor(Je/4)*4,ut=Je%4;let ht=`
      if (${Ye==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${Ye==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${ot}(values, minMaxValue);
      }
    `,pt="vec4";Ye==="all"?(it="1.0",ht=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,pt="bvec4"):Ye==="any"&&(it="0.0",ht=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,pt="bvec4");let ft="";st%Je>0&&(ft=`
        if (inIdx < 0 || inIdx >= ${st}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${it};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${ft}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${Je};

        vec4 minMaxValue = vec4(${it});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${lt}; i += 4) {
          int inIdx = inOffset + i;
          ${pt} values = ${pt}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${ht}
        }

        int inIdx = inOffset + ${lt};
        if (${ut===1}) {
          ${pt} values = ${pt}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${ht}
        } else if (${ut===2}) {
          ${pt} values = ${pt}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${ht}
        } else if (${ut===3}) {
          ${pt} values = ${pt}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${ht}
        }
        setOutput(${at});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getReductionStages(Xe){const Ke=[];for(;Ke.length===0||Ke[Ke.length-1].outSize!==1;){const Ye=Ke.length?Ke[Ke.length-1].outSize:Xe[1],Je=computeOptimalWindowSize(Ye);Ke.push({inSize:Ye,windowSize:Je,outSize:Math.ceil(Ye/Je)})}return Ke}function reduce(Xe,Ke,Ye,Je){const tt=getReductionStages(Xe.shape);let st=Xe;for(let rt=0;rt<tt.length;rt++){const{inSize:it,windowSize:ot,outSize:at}=tt[rt];let lt,ut;Ye==="mean"?lt=rt===0?new MeanProgram({windowSize:ot,inSize:it,batchSize:Xe.shape[0],outSize:at},it):new MeanProgram({windowSize:ot,inSize:it,batchSize:Xe.shape[0],outSize:at}):lt=new ReduceProgram({windowSize:ot,inSize:it,batchSize:Xe.shape[0],outSize:at},Ye),ut=st,st=Je.runWebGLProgram(lt,[st],Ke),ut.dataId!==Xe.dataId&&Je.disposeIntermediateTensorInfo(ut)}return st}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TransposeProgram{constructor(Ke,Ye){this.variableNames=["A"];const Je=new Array(Ke.length);for(let rt=0;rt<Je.length;rt++)Je[rt]=Ke[Ye[rt]];this.outputShape=Je,this.rank=Je.length;const tt=getCoordsDataType(this.rank),st=getSwitchedCoords(Ye);this.userCode=`
    void main() {
      ${tt} resRC = getOutputCoords();
      setOutput(getA(${st}));
    }
    `}}function getSwitchedCoords(Xe){const Ke=Xe.length;if(Ke>6)throw Error(`Transpose for rank ${Ke} is not yet supported`);const Ye=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],Je=new Array(Ke);for(let tt=0;tt<Xe.length;tt++)Je[Xe[tt]]=Ye[tt];return Je.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TransposePackedProgram{constructor(Ke,Ye){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const Je=new Array(Ke.length);for(let lt=0;lt<Je.length;lt++)Je[lt]=Ke[Ye[lt]];if(this.outputShape=Je,this.rank=Je.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const tt=getCoordsDataType(this.rank),st=getVecChannels("rc",this.rank),rt=new Array(this.rank);for(let lt=0;lt<Ye.length;lt++)rt[Ye[lt]]=st[lt];const it=`vec2(${rt.slice(-2).join()})`,ot=`++${st[this.rank-1]} < ${Je[this.rank-1]}`,at=`getChannel(getA(${rt.join()}), ${it})`;this.userCode=`
    void main() {
      ${tt} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${at};
      if(${ot}) {
        result[1] = ${at};
      }
      --${st[this.rank-1]};
      if(++${st[this.rank-2]} < ${Je[this.rank-2]}) {
        result[2] = ${at};
        if(${ot}) {
          result[3] = ${at};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transposeImpl(Xe,Ke,Ye){const Je=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TransposePackedProgram(Xe.shape,Ke):new TransposeProgram(Xe.shape,Ke);return Ye.runWebGLProgram(Je,[Xe],Xe.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sumImpl(Xe,Ke,Ye,Je){const tt=Ke,st=Xe.shape.length,rt=parseAxisParam(tt,Xe.shape);let it=rt;const ot=getAxesPermutation(it,st),at=ot!=null;let lt=Xe;at&&(lt=transposeImpl(Xe,ot,Je),it=getInnerMostAxes(it.length,st)),assertAxesAreInnerMostDims("sum",it,st);const[ut,ht]=computeOutAndReduceShapes(lt.shape,it);let pt=ut;Ye&&(pt=expandShapeToKeepDim(ut,rt));const ft=sizeFromShape(ht),vt=sizeFromShape(Xe.shape)/ft,At=reshape({inputs:{x:lt},attrs:{shape:[vt,ft]},backend:Je}),Et=sumOutType(Xe.dtype),wt=reduce(At,Et,"sum",Je),_t=reshape({inputs:{x:wt},attrs:{shape:pt},backend:Je});return Je.disposeIntermediateTensorInfo(At),Je.disposeIntermediateTensorInfo(wt),at&&Je.disposeIntermediateTensorInfo(lt),_t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sum(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st,keepDims:rt}=Je;return sumImpl(tt,st,rt,Ye)}const sumConfig={kernelName:Sum,backendName:"webgl",kernelFunc:sum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transpose(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{perm:st}=Je,rt=Ye,it=tt.shape.length,ot=new Array(it);for(let lt=0;lt<ot.length;lt++)ot[lt]=tt.shape[st[lt]];let at;if(rt.shouldExecuteOnCPU([tt])){const ut=rt.texData.get(tt.dataId).values,ht=transposeImplCPU(ut,tt.shape,tt.dtype,st,ot);at=rt.makeTensorInfo(ot,tt.dtype);const pt=rt.texData.get(at.dataId);pt.values=ht}else at=transposeImpl(tt,st,rt);return at}const transposeConfig={kernelName:Transpose,backendName:"webgl",kernelFunc:transpose};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MATMUL_SHARED_DIM_THRESHOLD=1e3;function batchMatMulImpl({a:Xe,b:Ke,transposeA:Ye,transposeB:Je,backend:tt,bias:st=null,preluActivationWeights:rt=null,leakyreluAlpha:it=0,activation:ot=null}){const at=Xe.shape.length,lt=Ke.shape.length,ut=Ye?Xe.shape[at-2]:Xe.shape[at-1],ht=Je?Ke.shape[lt-1]:Ke.shape[lt-2],pt=Ye?Xe.shape[at-1]:Xe.shape[at-2],ft=Je?Ke.shape[lt-2]:Ke.shape[lt-1],xt=Xe.shape.slice(0,-2),vt=Ke.shape.slice(0,-2),At=sizeFromShape(xt),Et=sizeFromShape(vt),wt=At===Et||At===1||Et===1;assert$2(at>=2&&lt>=2&&wt,()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${xt}) and (${vt}).`);const Ct=(At>Et?Xe.shape.slice(0,-2):Ke.shape.slice(0,-2)).concat([pt,ft]);assert$2(ut===ht,()=>`Error in matMul: inner shapes (${ut}) and (${ht}) of Tensors with shapes ${Xe.shape} and ${Ke.shape} and transposeA=${Ye} and transposeB=${Je} must match.`);const Tt=Ye?[At,ut,pt]:[At,pt,ut],St=Je?[Et,ft,ht]:[Et,ht,ft],Rt=reshape({inputs:{x:Xe},backend:tt,attrs:{shape:Tt}}),Nt=reshape({inputs:{x:Ke},backend:tt,attrs:{shape:St}}),Pt=[Rt,Nt],Bt=Math.max(At,Et),Lt=Ye?Rt.shape[1]:Rt.shape[2],zt=st!=null,Dt=rt!=null,Vt=ot==="leakyrelu",Gt=ot!=null?mapActivationToShaderProgram(ot,!0):null,Qt=zt||Dt||Vt||Gt!=null;let jt;if((pt===1||ft===1)&&Lt>MATMUL_SHARED_DIM_THRESHOLD&&Qt===!1){let Yt=Rt,Jt=Nt;Ye&&(Yt=transpose({inputs:{x:Rt},backend:tt,attrs:{perm:[0,2,1]}}),Pt.push(Yt)),Je&&(Jt=transpose({inputs:{x:Nt},backend:tt,attrs:{perm:[0,2,1]}}),Pt.push(Jt));const Zt=ft!==1,nn=ft===1;let cn=Yt;Zt&&(cn=reshape({inputs:{x:Yt},backend:tt,attrs:{shape:[Bt,Lt,1]}}),Pt.push(cn));const an=ft===1?2:1;let mn=Jt;nn&&(mn=reshape({inputs:{x:Jt},backend:tt,attrs:{shape:[Bt,1,Lt]}}),Pt.push(mn));const dn=multiply$1({inputs:{a:cn,b:mn},backend:tt});jt=sum({inputs:{x:dn},backend:tt,attrs:{axis:an,keepDims:!0}}),Pt.push(dn)}else{const Yt=upcastType(Xe.dtype,Ke.dtype),Jt=new MatMulPackedProgram(Tt,St,[Bt,pt,ft],Ye,Je,zt,Gt,Dt,Vt),Zt=[Rt,Nt];if(st!=null&&Zt.push(st),Dt&&Zt.push(rt),Vt){const nn=tt.makeTensorInfo([],"float32",createScalarValue(it,"float32"));Zt.push(nn),Pt.push(nn)}jt=tt.runWebGLProgram(Jt,Zt,Yt)}const Ht=reshape({inputs:{x:jt},backend:tt,attrs:{shape:Ct}});Pt.push(jt);for(const Yt of Pt)tt.disposeIntermediateTensorInfo(Yt);return Ht}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _fusedMatMul(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{a:tt,b:st,bias:rt,preluActivationWeights:it}=Ke,{transposeA:ot,transposeB:at,activation:lt,leakyreluAlpha:ut}=Je;return batchMatMulImpl({a:tt,b:st,transposeA:ot,transposeB:at,backend:Ye,bias:rt,preluActivationWeights:it,leakyreluAlpha:ut,activation:lt})}const _fusedMatMulConfig={kernelName:_FusedMatMul,backendName:"webgl",kernelFunc:_fusedMatMul};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ABS="return abs(x);";function abs$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{x:Je}=Ke;if(Ye.shouldExecuteOnCPU([Je])&&Je.dtype!=="complex64"){const st=Ye.texData.get(Je.dataId),rt=simpleAbsImplCPU(st.values);return Ye.makeTensorInfo(Je.shape,Je.dtype,rt)}let tt;return env().getBool("WEBGL_PACK_UNARY_OPERATIONS")?tt=new UnaryOpPackedProgram(Je.shape,ABS):tt=new UnaryOpProgram(Je.shape,ABS),Ye.runWebGLProgram(tt,[Je],Je.dtype)}const absConfig={kernelName:Abs$1,backendName:"webgl",kernelFunc:abs$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ACOS=CHECK_NAN_SNIPPET$2+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,acos=unaryKernelFunc({opSnippet:ACOS}),acosConfig={kernelName:Acos,backendName:"webgl",kernelFunc:acos};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ACOSH=CHECK_NAN_SNIPPET$2+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,acosh=unaryKernelFunc({opSnippet:ACOSH}),acoshConfig={kernelName:Acosh,backendName:"webgl",kernelFunc:acosh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ADD="return a + b;",addKernelFunc=binaryKernelFunc({opSnippet:ADD,packedOpSnippet:ADD,supportsComplex:!0,cpuKernelImpl:addImplCPU}),addConfig={kernelName:Add$2,backendName:"webgl",kernelFunc:addKernelFunc};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AddNProgram{constructor(Ke,Ye){this.outputShape=[],this.outputShape=Ke,this.variableNames=Ye.map((st,rt)=>`T${rt}`);const Je=[];this.variableNames.forEach(st=>{Je.push(`float v${st} = get${st}AtOutCoords();`)});const tt=this.variableNames.map(st=>`v${st}`).join(" + ");this.userCode=`
      void main() {
        ${Je.join(`
        `)}

        float result = ${tt};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AddNPackedProgram{constructor(Ke,Ye){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ke,this.variableNames=Ye.map((st,rt)=>`T${rt}`);const Je=[];this.variableNames.forEach(st=>{Je.push(`vec4 v${st} = get${st}AtOutCoords();`)});const tt=this.variableNames.map(st=>`v${st}`).join(" + ");this.userCode=`
      void main() {
        ${Je.join(`
        `)}

        vec4 result = ${tt};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function addN(Xe){const{inputs:Ke,backend:Ye}=Xe,Je=Ke;if(Je.length===1)return identity$3({inputs:{x:Je[0]},backend:Ye});if(Je.length>env().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const ot=Math.floor(Je.length/2),at=addN({inputs:Je.slice(0,ot),backend:Ye}),lt=addN({inputs:Je.slice(ot),backend:Ye});return addN({inputs:[at,lt],backend:Ye})}const tt=Je.map(ot=>ot.dtype).reduce((ot,at)=>upcastType(ot,at)),st=Je.map(ot=>ot.shape),it=env().getBool("WEBGL_PACK")?new AddNPackedProgram(Je[0].shape,st):new AddNProgram(Je[0].shape,st);return Ye.runWebGLProgram(it,Je,tt)}const addNConfig={kernelName:AddN,backendName:"webgl",kernelFunc:addN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function all(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st,keepDims:rt}=Je,it=tt.shape.length,ot=parseAxisParam(st,tt.shape);let at=ot;const lt=getAxesPermutation(at,it);let ut=tt;lt!=null&&(ut=transpose({inputs:{x:tt},backend:Ye,attrs:{perm:lt}}),at=getInnerMostAxes(at.length,it)),assertAxesAreInnerMostDims("all",at,it);const[ht,pt]=computeOutAndReduceShapes(ut.shape,at),ft=sizeFromShape(pt),xt=reshape({inputs:{x:ut},backend:Ye,attrs:{shape:[-1,ft]}}),vt=reduce(xt,xt.dtype,"all",Ye);let At;if(rt){const Et=expandShapeToKeepDim(ht,ot);At=reshape({inputs:{x:vt},backend:Ye,attrs:{shape:Et}})}else At=reshape({inputs:{x:vt},backend:Ye,attrs:{shape:ht}});return Ye.disposeIntermediateTensorInfo(xt),Ye.disposeIntermediateTensorInfo(vt),lt!=null&&Ye.disposeIntermediateTensorInfo(ut),At}const allConfig={kernelName:All,backendName:"webgl",kernelFunc:all};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function any(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st,keepDims:rt}=Je,it=tt.shape.length,ot=parseAxisParam(st,tt.shape);let at=ot;const lt=getAxesPermutation(at,it);let ut=tt;lt!=null&&(ut=transpose({inputs:{x:tt},backend:Ye,attrs:{perm:lt}}),at=getInnerMostAxes(at.length,it)),assertAxesAreInnerMostDims("any",at,it);const[ht,pt]=computeOutAndReduceShapes(ut.shape,at),ft=sizeFromShape(pt),xt=reshape({inputs:{x:ut},backend:Ye,attrs:{shape:[-1,ft]}}),vt=reduce(xt,xt.dtype,"any",Ye);let At;if(rt){const Et=expandShapeToKeepDim(ht,ot);At=reshape({inputs:{x:vt},backend:Ye,attrs:{shape:Et}})}else At=reshape({inputs:{x:vt},backend:Ye,attrs:{shape:ht}});return Ye.disposeIntermediateTensorInfo(xt),Ye.disposeIntermediateTensorInfo(vt),lt!=null&&Ye.disposeIntermediateTensorInfo(ut),At}const anyConfig={kernelName:Any,backendName:"webgl",kernelFunc:any};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ArgMinMaxProgram{constructor(Ke,Ye,Je){this.variableNames=["A"];const{windowSize:tt,batchSize:st,outSize:rt}=Ke;Je||this.variableNames.push("bestIndicesA"),this.outputShape=[st,rt];const it=Ye==="max"?">":"<",ot=Je?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${tt};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${tt}; i++) {
          int inIdx = ${ot};
          float candidate = getA(batch, inIdx);
          if (candidate ${it} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ArgMinMaxPackedProgram{constructor(Ke,Ye,Je,tt){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,assert$2(Ke.length>2,()=>`Packed arg${Je.charAt(0).toUpperCase()+Je.slice(1)} supports only inputs with rank above 2.`);const st=Ke[Ke.length-1],rt=Math.ceil(st/Ye);this.outputShape=Ke.slice(0,-1),rt>1&&this.outputShape.push(rt),tt||this.variableNames.push("bestIndicesA");const it=this.outputShape,ot=it.length,at=getCoordsDataType(ot),lt=getChannels("coords",ot);let ut,ht;if(rt===1){ht=ot+1;const Rt=getCoordsDataType(ht);ut=`
        ${Rt} sourceLocR = ${Rt}(${lt.join()}, 0);
        ++${lt[ot-1]};
        ${Rt} sourceLocG = ${Rt}(${lt.join()}, 0);
        ++${lt[ot-2]};
        ${Rt} sourceLocA = ${Rt}(${lt.join()}, 0);
        --${lt[ot-1]};
        ${Rt} sourceLocB = ${Rt}(${lt.join()}, 0);
        --${lt[ot-2]};`}else ht=ot,ut=`
        ${at} sourceLocR = coords;
        ++${lt[ot-1]};
        ${at} sourceLocG = coords;
        ++${lt[ot-2]};
        ${at} sourceLocA = coords;
        --${lt[ot-1]};
        ${at} sourceLocB = coords;
        --${lt[ot-2]};`;const pt=["x","y","z","w","u","v"].slice(0,ht),ft="."+pt[ht-1],xt=pt.map(Rt=>"int "+Rt),vt=getChannels("sourceLocR",ht-1).concat("inIdx.r"),At=getChannels("sourceLocG",ht-1).concat("inIdx.g"),Et=getChannels("sourceLocB",ht-1).concat("inIdx.b"),wt=getChannels("sourceLocA",ht-1).concat("inIdx.a"),_t=Je==="max"?"greaterThan":"lessThan",Ct=tt?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${vt.join()}),
                             getBestIndicesAChannel(${At.join()}),
                             getBestIndicesAChannel(${Et.join()}),
                             getBestIndicesAChannel(${wt.join()})));`,Tt=`vec4(
            getAChannel(${vt.join()}),
            hasNextCol ? getAChannel(${At.join()}) : 0.,
            hasNextRow ? getAChannel(${Et.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${wt.join()}) : 0.)`,St=tt?"":`
      float getBestIndicesAChannel(${xt.join()}) {
        return getChannel(getBestIndicesA(${pt.join()}),
                                          vec2(${pt.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${xt.join()}) {
        return getChannel(getA(${pt.join()}),
                               vec2(${pt.slice(-2).join()}));
      }
      ${St}
      void main() {
        ${at} coords = getOutputCoords();
        bool hasNextCol = ${lt[ot-1]} < ${it[ot-1]-1};
        bool hasNextRow = ${lt[ot-2]} < ${it[ot-2]-1};
        ${ut}
        ivec4 srcIdx = ivec4(sourceLocR${ft}, sourceLocG${ft},
          sourceLocB${ft}, sourceLocA${ft}) * ${Ye};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${Tt};

        for (int i = 0; i < ${Ye}; i++) {
          inIdx = srcIdx;
          ${Ct}
          vec4 candidate = ${Tt};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${_t}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argReduce(Xe,Ke,Ye,Je=null){let tt=Ke.shape[0],st=Ke.shape[1];Je!=null&&(tt=Je.shape[0],st=Je.shape[1]);const rt=computeOptimalWindowSize(st),it={windowSize:rt,inSize:st,batchSize:tt,outSize:Math.ceil(st/rt)},ot=new ArgMinMaxProgram(it,Ye,Je==null),at=[Ke];Je!=null&&at.push(Je);const lt=Xe.runWebGLProgram(ot,at,"int32");if(lt.shape[1]===1)return lt;const ut=argReduce(Xe,Ke,Ye,lt);return Xe.disposeIntermediateTensorInfo(lt),ut}function argReducePacked(Xe,Ke,Ye,Je=null){const tt=Je!=null?Je.shape:Ke.shape,st=tt[tt.length-1],rt=computeOptimalWindowSize(st),it=new ArgMinMaxPackedProgram(tt,rt,Ye,Je==null),ot=Je==null?[Ke]:[Ke,Je],at=Xe.runWebGLProgram(it,ot,"int32");if(at.shape.length===Ke.shape.length){const lt=argReducePacked(Xe,Ke,Ye,at);return Xe.disposeIntermediateTensorInfo(at),lt}return at}function argMinMaxReduce(Xe,Ke,Ye,Je){const tt=[Ye];if(assertAxesAreInnerMostDims("arg"+Je.charAt(0).toUpperCase()+Je.slice(1),tt,Ke.shape.length),!env().getBool("WEBGL_PACK_REDUCE")||Ke.shape.length<=2){const st=[],[rt,it]=computeOutAndReduceShapes(Ke.shape,tt),ot=sizeFromShape(it),at=reshape({inputs:{x:Ke},backend:Xe,attrs:{shape:[-1,ot]}});st.push(at);const lt=argReduce(Xe,at,Je);st.push(lt);const ut=reshape({inputs:{x:lt},backend:Xe,attrs:{shape:rt}});return st.forEach(ht=>Xe.disposeIntermediateTensorInfo(ht)),ut}return argReducePacked(Xe,Ke,Je)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMax(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st}=Je;let rt=parseAxisParam(st,tt.shape);const it=getAxesPermutation(rt,tt.shape.length);let ot=tt;const at=[];it!=null&&(ot=transpose({inputs:{x:tt},backend:Ye,attrs:{perm:it}}),at.push(ot),rt=getInnerMostAxes(rt.length,ot.shape.length)),assertAxesAreInnerMostDims("argMax",[rt[0]],ot.shape.length);const lt=argMinMaxReduce(Ye,ot,rt[0],"max");return at.forEach(ut=>Ye.disposeIntermediateTensorInfo(ut)),lt}const argMaxConfig={kernelName:ArgMax,backendName:"webgl",kernelFunc:argMax};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMin(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st}=Je;let rt=parseAxisParam(st,tt.shape);const it=getAxesPermutation(rt,tt.shape.length);let ot=tt;const at=[];it!=null&&(ot=transpose({inputs:{x:tt},backend:Ye,attrs:{perm:it}}),at.push(ot),rt=getInnerMostAxes(rt.length,ot.shape.length)),assertAxesAreInnerMostDims("argMin",[rt[0]],ot.shape.length);const lt=argMinMaxReduce(Ye,ot,rt[0],"min");return at.forEach(ut=>Ye.disposeIntermediateTensorInfo(ut)),lt}const argMinConfig={kernelName:ArgMin,backendName:"webgl",kernelFunc:argMin};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ASIN=CHECK_NAN_SNIPPET$2+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,asin=unaryKernelFunc({opSnippet:ASIN}),asinConfig={kernelName:Asin,backendName:"webgl",kernelFunc:asin};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ASINH=CHECK_NAN_SNIPPET$2+"return log(x + sqrt(x * x + 1.0));",asinh=unaryKernelFunc({opSnippet:ASINH}),asinhConfig={kernelName:Asinh,backendName:"webgl",kernelFunc:asinh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATAN=CHECK_NAN_SNIPPET$2+`
  return atan(x);
`,atan=unaryKernelFunc({opSnippet:ATAN}),atanConfig={kernelName:Atan,backendName:"webgl",kernelFunc:atan};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATAN2=CHECK_NAN_SNIPPET_BINARY+`
  return atan(a, b);
`,ATAN2_PACKED=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+CHECK_NAN_SNIPPET_BINARY_PACKED+`
  return result;
`,atan2=binaryKernelFunc({opSnippet:ATAN2,packedOpSnippet:ATAN2_PACKED}),atan2Config={kernelName:Atan2,backendName:"webgl",kernelFunc:atan2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATANH=CHECK_NAN_SNIPPET$2+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,atanh=unaryKernelFunc({opSnippet:ATANH}),atanhConfig={kernelName:Atanh,backendName:"webgl",kernelFunc:atanh};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pool2DProgram{constructor(Ke,Ye,Je,tt=!1,st=!1){if(this.variableNames=["x"],Ye==="avg"&&Je)throw new Error("Cannot compute positions for average pool.");const rt=Ke.filterWidth,it=Ke.strideHeight,ot=Ke.strideWidth,at=Ke.dilationHeight,lt=Ke.dilationWidth,ut=Ke.effectiveFilterHeight,ht=Ke.effectiveFilterWidth,pt=Ke.padInfo.top,ft=Ke.padInfo.left;this.outputShape=Ke.outShape;const xt=Ye==="avg",vt=`((batch  * ${Ke.inHeight} + xR) * ${Ke.inWidth} + xC) * ${Ke.inChannels} + d`,At=`(xR * ${Ke.inWidth} + xC) * ${Ke.inChannels} + d`;let Et="0.0";if(xt||(Et="-1.0 / 1e-20"),Je){this.userCode=`
        const ivec2 strides = ivec2(${it}, ${ot});
        const ivec2 pads = ivec2(${pt}, ${ft});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${ut};
              wR += ${at}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${Ke.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${ht};
                wC += ${lt}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${Ke.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${tt?st?vt:At:`wR * ${ht} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const wt="max";let _t=`${Ye}(${Ye}(${Ye}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;Ye==="avg"&&(_t="avgValue / count");const Ct=Math.floor(rt/4)*4,Tt=rt%4,St=`
      if (${xt}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${wt}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${it}, ${ot});
      const ivec2 pads = ivec2(${pt}, ${ft});
      const float initializationValue = ${Et};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${Ke.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${Et});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${ut};
            wR += ${at}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${Ke.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${Ct}; wC += 4) {
            int xC = xCCorner + wC * ${lt};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${lt}, d),
              getValue(batch, xR, xC + 2 * ${lt}, d),
              getValue(batch, xR, xC + 3 * ${lt}, d)
            );

            ${St}
          }

          int xC = xCCorner + ${Ct};
          if (${Tt===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${St}
          } else if (${Tt===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${lt}, d),
              initializationValue,
              initializationValue
            );

            ${St}
          } else if (${Tt===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${lt}, d),
              getValue(batch, xR, xC + 2 * ${lt}, d),
              initializationValue
            );

            ${St}
          }
        }
        setOutput(${_t});
      }
    `}}class Pool3DProgram{constructor(Ke,Ye,Je,tt=!1,st=!1){if(this.variableNames=["x"],Ye==="avg"&&Je)throw new Error("Cannot compute positions for average pool.");const rt=Ke.filterWidth,it=Ke.strideDepth,ot=Ke.strideHeight,at=Ke.strideWidth,lt=Ke.dilationDepth,ut=Ke.dilationHeight,ht=Ke.dilationWidth,pt=Ke.effectiveFilterDepth,ft=Ke.effectiveFilterHeight,xt=Ke.effectiveFilterWidth,vt=Ke.padInfo.front,At=Ke.padInfo.top,Et=Ke.padInfo.left;this.outputShape=Ke.outShape;const wt=Ye==="avg";let _t="0.0";if(wt||(_t="-1.0 / 1e-20"),Je){this.userCode=`
        const ivec3 strides =
            ivec3(${it}, ${ot}, ${at});
        const ivec3 pads = ivec3(${vt}, ${At}, ${Et});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${pt};
              wD += ${lt}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${Ke.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${ft};
                wR += ${ut}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${Ke.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${xt};
                  wC += ${ht}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${Ke.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${tt?st?`(((batch * ${Ke.inDepth} + xD) * ${Ke.inHeight} + xR) * ${Ke.inWidth} + xC) * ${Ke.inChannels} + ch`:`((xD * ${Ke.inHeight} + xR) * ${Ke.inWidth} + xC) * ${Ke.inChannels} + ch`:`wD * ${ft} * ${xt} +
                      wR * ${xt} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const Ct="max";let Tt=`${Ye}(${Ye}(${Ye}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;Ye==="avg"&&(Tt="avgValue / count");const St=Math.floor(rt/4)*4,Rt=rt%4,Nt=`
      if (${wt}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${Ct}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${it}, ${ot}, ${at});
      const ivec3 pads = ivec3(${vt}, ${At}, ${Et});
      const float initializationValue = ${_t};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${Ke.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${_t});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${pt};
            wD += ${lt}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${Ke.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${ft};
            wR += ${ut}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${Ke.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${St}; wC += 4) {
              int xC = xCCorner + wC * ${ht};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${ht}, ch),
                getValue(batch, xD, xR, xC + 2 * ${ht}, ch),
                getValue(batch, xD, xR, xC + 3 * ${ht}, ch)
              );

              ${Nt}
            }

            int xC = xCCorner + ${St};
            if (${Rt===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${Nt}
            } else if (${Rt===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${ht}, ch),
                initializationValue,
                initializationValue
              );

              ${Nt}
            } else if (${Rt===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${ht}, ch),
                getValue(batch, xD, xR, xC + 2 * ${ht}, ch),
                initializationValue
              );

              ${Nt}
            }
          }
          setOutput(${Tt});
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke;assertNotComplex(tt,"avgPool");const{filterSize:st,strides:rt,pad:it,dimRoundingMode:ot}=Je,at=1;assert$2(eitherStridesOrDilationsAreOne(rt,at),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${rt} and dilations '${at}'`);const lt=computePool2DInfo(tt.shape,st,rt,at,it,ot);if(lt.filterWidth===1&&lt.filterHeight===1&&arraysEqual(lt.inShape,lt.outShape))return identity$3({inputs:{x:tt},backend:Ye});const ut=new Pool2DProgram(lt,"avg",!1);return Ye.runWebGLProgram(ut,[tt],"float32")}const avgPoolConfig={kernelName:AvgPool,backendName:"webgl",kernelFunc:avgPool};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3D(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{filterSize:st,strides:rt,pad:it,dimRoundingMode:ot,dataFormat:at}=Je,lt=[1,1,1],ut=computePool3DInfo(tt.shape,st,rt,lt,it,ot,at),ht=new Pool3DProgram(ut,"avg",!1);return Ye.runWebGLProgram(ht,[tt],"float32")}const avgPool3DConfig={kernelName:AvgPool3D,backendName:"webgl",kernelFunc:avgPool3D};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AvgPool2DBackpropProgram{constructor(Ke){this.variableNames=["dy"],this.outputShape=Ke.inShape;const Ye=Ke.filterHeight,Je=Ke.filterWidth,tt=Ke.strideHeight,st=Ke.strideWidth,rt=Ke.dilationHeight,it=Ke.dilationWidth,ot=Ke.effectiveFilterHeight,at=Ke.effectiveFilterWidth,lt=ot-1-Ke.padInfo.top,ut=at-1-Ke.padInfo.left,ht=1/(Ye*Je);this.userCode=`
      const ivec2 pads = ivec2(${lt}, ${ut});
      const float avgMultiplier = float(${ht});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${ot};
            wR += ${rt}) {
          float dyR = float(dyRCorner + wR) / ${tt}.0;

          if (dyR < 0.0 || dyR >= ${Ke.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${at};
            wC+= ${it}) {
            float dyC = float(dyCCorner + wC) / ${st}.0;

            if (dyC < 0.0 || dyC >= ${Ke.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class AvgPool3DBackpropProgram{constructor(Ke){this.variableNames=["dy"],this.outputShape=Ke.inShape;const Ye=Ke.filterDepth,Je=Ke.filterHeight,tt=Ke.filterWidth,st=Ke.strideDepth,rt=Ke.strideHeight,it=Ke.strideWidth,ot=Ke.dilationDepth,at=Ke.dilationHeight,lt=Ke.dilationWidth,ut=Ke.effectiveFilterDepth,ht=Ke.effectiveFilterHeight,pt=Ke.effectiveFilterWidth,ft=ut-1-Ke.padInfo.front,xt=ht-1-Ke.padInfo.top,vt=pt-1-Ke.padInfo.left,At=1/(Ye*Je*tt);this.userCode=`
      const ivec3 pads = ivec3(${ft}, ${xt}, ${vt});
      const float avgMultiplier = float(${At});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${ut};
            wD += ${ot}) {
          float dyD = float(dyDCorner + wD) / ${st}.0;

          if (dyD < 0.0 || dyD >= ${Ke.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${ht};
              wR += ${at}) {
            float dyR = float(dyRCorner + wR) / ${rt}.0;

            if (dyR < 0.0 || dyR >= ${Ke.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${pt};
                wC += ${lt}) {
              float dyC = float(dyCCorner + wC) / ${it}.0;

              if (dyC < 0.0 || dyC >= ${Ke.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3DGrad(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{dy:tt,input:st}=Ke,rt=st,{filterSize:it,strides:ot,pad:at,dimRoundingMode:lt}=Je,ut=[1,1,1],ht=computePool3DInfo(rt.shape,it,ot,ut,at,lt),pt=new AvgPool3DBackpropProgram(ht);return Ye.runWebGLProgram(pt,[tt],rt.dtype)}const avgPoolGrad3DConfig={kernelName:AvgPool3DGrad,backendName:"webgl",kernelFunc:avgPool3DGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPoolGrad(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{dy:tt,input:st}=Ke,rt=st;assertNotComplex([tt,st],"avgPoolGrad");const{filterSize:it,strides:ot,pad:at}=Je,lt=computePool2DInfo(rt.shape,it,ot,1,at),ut=new AvgPool2DBackpropProgram(lt);return Ye.runWebGLProgram(ut,[tt],rt.dtype)}const avgPoolGradConfig={kernelName:AvgPoolGrad,backendName:"webgl",kernelFunc:avgPoolGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchMatMul(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{a:tt,b:st}=Ke,{transposeA:rt,transposeB:it}=Je;return batchMatMulImpl({a:tt,b:st,transposeA:rt,transposeB:it,backend:Ye})}const batchMatMulConfig={kernelName:BatchMatMul,backendName:"webgl",kernelFunc:batchMatMul};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BatchNormProgram{constructor(Ke,Ye,Je,tt,st,rt){this.outputShape=[],this.variableNames=["x","mean","variance"],assertAndGetBroadcastShape(Ke,Ye),assertAndGetBroadcastShape(Ke,Je);let it="0.0";tt!=null&&(assertAndGetBroadcastShape(Ke,tt),this.variableNames.push("offset"),it="getOffsetAtOutCoords()");let ot="1.0";st!=null&&(assertAndGetBroadcastShape(Ke,st),this.variableNames.push("scale"),ot="getScaleAtOutCoords()"),this.outputShape=Ke,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${it};
        float scale = ${ot};
        float inv = scale * inversesqrt(variance + float(${rt}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BatchNormPackedProgram{constructor(Ke,Ye,Je,tt,st,rt){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],assertAndGetBroadcastShape(Ke,Ye),assertAndGetBroadcastShape(Ke,Je);let it="vec4(0.0)";tt!=null&&(assertAndGetBroadcastShape(Ke,tt),this.variableNames.push("offset"),it="getOffsetAtOutCoords()");let ot="vec4(1.0)";st!=null&&(assertAndGetBroadcastShape(Ke,st),this.variableNames.push("scale"),ot="getScaleAtOutCoords()"),this.outputShape=Ke,this.userCode=`
      void main() {
        vec4 offset = ${it};
        vec4 scale = ${ot};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${rt}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchNorm=({inputs:Xe,backend:Ke,attrs:Ye})=>{const{x:Je,mean:tt,variance:st,offset:rt,scale:it}=Xe;assert$2(tt.shape.length===st.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),assert$2(rt==null||tt.shape.length===rt.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),assert$2(it==null||tt.shape.length===it.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:ot}=Ye;ot==null&&(ot=.001);const at=[Je,tt,st];let lt=null;rt!=null&&(lt=rt.shape,at.push(rt));let ut=null;it!=null&&(ut=it.shape,at.push(it));const ht=env().getBool("WEBGL_PACK_NORMALIZATION")?new BatchNormPackedProgram(Je.shape,tt.shape,st.shape,lt,ut,ot):new BatchNormProgram(Je.shape,tt.shape,st.shape,lt,ut,ot);return Ke.runWebGLProgram(ht,at,at[0].dtype)},batchNormConfig={kernelName:FusedBatchNorm,backendName:"webgl",kernelFunc:batchNorm};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SliceProgram{constructor(Ke){this.variableNames=["source"],this.outputShape=Ke,this.rank=Ke.length;const Ye=getCoordsDataType(this.rank),Je=`uniform int start[${this.rank}];`,tt=getCoords$1(this.rank);let st;const rt=Ke.map((it,ot)=>`sourceLoc.${coords[ot]} = start[${ot}] + coords.${coords[ot]};`);st=`
        ${Ye} sourceLoc;
        ${Ye} coords = getOutputCoords();
        ${rt.join(`
`)}
      `,this.userCode=`
      ${Je}
      void main() {
        ${st}
        setOutput(getSource(${tt}));
      }
    `}getCustomSetupFunc(Ke){if(Ke.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${Ke.length})`);return(Ye,Je)=>{this.startLoc==null&&(this.startLoc=Ye.getUniformLocationNoThrow(Je,"start"),this.startLoc==null)||Ye.gl.uniform1iv(this.startLoc,Ke)}}}const coords=["x","y","z","w","u","v"];function getCoords$1(Xe){if(Xe===1)return"sourceLoc";if(Xe<=6)return coords.slice(0,Xe).map(Ke=>"sourceLoc."+Ke).join(",");throw Error(`Slicing for rank ${Xe} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SlicePackedProgram{constructor(Ke){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ke,this.rank=Ke.length;const Ye=getCoordsDataType(this.rank),Je=getChannels("coords",this.rank),tt=getChannels("sourceLoc",this.rank),st=this.rank===1?"sourceLoc":`vec2(${tt.slice(-2).join()})`,rt=`getChannel(getSource(${tt.join()}), ${st})`,it=`
      result.x = ${rt};
      if (++${Je[this.rank-1]} < ${Ke[this.rank-1]}) {
        ++${tt[this.rank-1]};
        result.y = ${rt};
        --${tt[this.rank-1]};
      }
    `,ot=this.rank===1?"":`
      --${Je[this.rank-1]};
      if (++${Je[this.rank-2]} < ${Ke[this.rank-2]}) {
        ++${tt[this.rank-2]};
        result.z = ${rt};
        if (++${Je[this.rank-1]} < ${Ke[this.rank-1]}) {
          ++${tt[this.rank-1]};
          result.w = ${rt};
        }
      }
    `,at=this.rank<=4?`sourceLoc = coords +
            ${Ye}(${Ke.map((lt,ut)=>`start[${ut}]`).join()});`:Ke.map((lt,ut)=>`${tt[ut]} = ${Je[ut]} + start[${ut}];`).join(`
`);this.userCode=`
      uniform int start[${this.rank}];
      void main() {
        ${Ye} coords = getOutputCoords();
        ${Ye} sourceLoc;
        ${at}
        vec4 result = vec4(0.);
        ${it}
        ${ot}
        setOutput(result);
      }
    `}getCustomSetupFunc(Ke){if(Ke.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${Ke.length})`);return(Ye,Je)=>{this.startLoc==null&&(this.startLoc=Ye.getUniformLocationNoThrow(Je,"start"),this.startLoc==null)||Ye.gl.uniform1iv(this.startLoc,Ke)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function shallowSlice(Xe,Ke,Ye,Je){const tt=Je.texData.get(Xe.dataId),st=Je.makeTensorInfo(Ye,Xe.dtype),rt=Je.texData.get(st.dataId);Object.assign(rt,tt),rt.complexParentRefCount=0,rt.refCount=1,rt.shape=Ye,rt.dtype=Xe.dtype;let it=computeFlatOffset(Ke,computeStrides(Xe.shape));tt.slice&&(it+=tt.slice.flatOffset),rt.slice={flatOffset:it,origDataId:tt.slice&&tt.slice.origDataId||Xe.dataId};const ot=Je.dataRefCount.get(rt.slice.origDataId)||1;return Je.dataRefCount.set(rt.slice.origDataId,ot+1),st}function slice$2(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{begin:st,size:rt}=Je,[it,ot]=parseSliceParams(tt,st,rt);if(assertParamsValid(tt,it,ot),sizeFromShape(ot)===0)return Ye.makeTensorInfo(ot,tt.dtype,[]);if(Ye.shouldExecuteOnCPU([tt])||tt.dtype==="string"){const ut=Ye.texData.get(tt.dataId),ht=sliceImplCPU(ut.values,it,ot,tt.shape,tt.dtype);return Ye.makeTensorInfo(ot,tt.dtype,ht)}const{isPacked:at}=Ye.texData.get(tt.dataId),lt=isSliceContinous(tt.shape,it,ot);if(at||!lt){const ut=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new SlicePackedProgram(ot):new SliceProgram(ot),ht=ut.getCustomSetupFunc(it);return Ye.runWebGLProgram(ut,[tt],tt.dtype,ht)}return Ye.uploadToGPU(tt.dataId),shallowSlice(tt,it,ot,Ye)}const sliceConfig={kernelName:Slice,backendName:"webgl",kernelFunc:slice$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchToSpaceND=Xe=>{const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{blockShape:st,crops:rt}=Je;assert$2(tt.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const it=st.reduce((Et,wt)=>Et*wt),ot=getReshaped(tt.shape,st,it),at=getPermuted(ot.length,st.length),lt=getReshapedPermuted(tt.shape,st,it),ut=getSliceBeginCoords(rt,st.length),ht=getSliceSize(lt,rt,st.length),pt=[],ft=reshape({inputs:{x:tt},backend:Ye,attrs:{shape:ot}}),xt=transpose({inputs:{x:ft},backend:Ye,attrs:{perm:at}}),vt=reshape({inputs:{x:xt},backend:Ye,attrs:{shape:lt}}),At=slice$2({inputs:{x:vt},backend:Ye,attrs:{begin:ut,size:ht}});return pt.push(ft),pt.push(xt),pt.push(vt),pt.forEach(Et=>Ye.disposeIntermediateTensorInfo(Et)),At},batchToSpaceNDConfig={kernelName:BatchToSpaceND,backendName:"webgl",kernelFunc:batchToSpaceND};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bincount(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,weights:st}=Ke,{size:rt}=Je,it=Ye.readSync(tt.dataId),ot=Ye.readSync(st.dataId),at=bincountImplCPU(it,ot,st.dtype,st.shape,rt);return Ye.makeTensorInfo([rt],st.dtype,at)}const bincountConfig={kernelName:Bincount,backendName:"webgl",kernelFunc:bincount};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NOT_EQUAL="return float(a != b);",notEqual=binaryKernelFunc({opSnippet:NOT_EQUAL,dtype:"bool"}),notEqualConfig={kernelName:NotEqual,backendName:"webgl",kernelFunc:notEqual};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function real(Xe){const{inputs:Ke,backend:Ye}=Xe,{input:Je}=Ke,tt=Ye.texData.get(Je.dataId);return identity$3({inputs:{x:tt.complexTensorInfos.real},backend:Ye})}const realConfig={kernelName:Real,backendName:"webgl",kernelFunc:real};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TO_INT="return float(int(x));";function int(Xe,Ke){const Ye=new UnaryOpProgram(Xe.shape,TO_INT),Je=Ke.runWebGLProgram(Ye,[Xe],"int32");return{dataId:Je.dataId,shape:Je.shape,dtype:Je.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cast(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{dtype:st}=Je;if(st==="complex64"){if(tt.dtype==="complex64")return identity$3({inputs:{x:tt},backend:Ye});const rt=zeros$1(tt.shape),it=cast({inputs:{x:tt},backend:Ye,attrs:{dtype:"float32"}}),ot=complex({inputs:{real:it,imag:rt},backend:Ye});return rt.dispose(),Ye.disposeIntermediateTensorInfo(it),ot}if(tt.dtype==="complex64"){const rt=real({inputs:{input:tt},backend:Ye}),it=cast({inputs:{x:rt},backend:Ye,attrs:{dtype:st}});return Ye.disposeIntermediateTensorInfo(rt),it}if(!hasEncodingLoss(tt.dtype,st)){const rt=identity$3({inputs:{x:tt},backend:Ye});return{dataId:rt.dataId,shape:rt.shape,dtype:st}}if(st==="int32")return int(tt,Ye);if(st==="bool"){const rt=Ye.makeTensorInfo([],"bool",getTypedArrayFromDType("bool",1)),ot=notEqual({inputs:{a:tt,b:rt},backend:Ye});return Ye.disposeIntermediateTensorInfo(rt),ot}throw new Error(`Error in Cast: failed to cast ${tt.dtype} to ${st}`)}const castConfig={kernelName:Cast,backendName:"webgl",kernelFunc:cast};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CEIL="return ceil(x);",ceil=unaryKernelFunc({opSnippet:CEIL,packedOpSnippet:CEIL,cpuKernelImpl:ceilImplCPU}),ceilConfig={kernelName:Ceil,backendName:"webgl",kernelFunc:ceil};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ClipProgram{constructor(Ke){this.variableNames=["A"],this.outputShape=Ke,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}getCustomSetupFunc(Ke,Ye){return(Je,tt)=>{this.minLoc==null&&(this.minLoc=Je.getUniformLocationNoThrow(tt,"minVal"),this.maxLoc=Je.getUniformLocationNoThrow(tt,"maxVal")),Je.gl.uniform1f(this.minLoc,Ke),Je.gl.uniform1f(this.maxLoc,Ye)}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ClipPackedProgram{constructor(Ke){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ke,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}getCustomSetupFunc(Ke,Ye){return(Je,tt)=>{this.minLoc==null&&(this.minLoc=Je.getUniformLocationNoThrow(tt,"minVal"),this.maxLoc=Je.getUniformLocationNoThrow(tt,"maxVal")),Je.gl.uniform1f(this.minLoc,Ke),Je.gl.uniform1f(this.maxLoc,Ye)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function clipByValue(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{clipValueMin:st,clipValueMax:rt}=Je;let it;env().getBool("WEBGL_PACK_CLIP")?it=new ClipPackedProgram(tt.shape):it=new ClipProgram(tt.shape);const ot=it.getCustomSetupFunc(st,rt);return Ye.runWebGLProgram(it,[tt],tt.dtype,ot)}const clipByValueConfig={kernelName:ClipByValue,backendName:"webgl",kernelFunc:clipByValue};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ComplexAbsProgram{constructor(Ke){this.variableNames=["real","imag"],this.outputShape=Ke,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function makeComplexComponentTensorInfo(Xe,Ke){return{dataId:Ke.dataId,dtype:Ke.dtype,shape:Xe.shape}}function complexAbs(Xe){const{inputs:Ke,backend:Ye}=Xe,{x:Je}=Ke,tt=Ye.texData.get(Je.dataId),st=new ComplexAbsProgram(Je.shape),rt=[makeComplexComponentTensorInfo(Je,tt.complexTensorInfos.real),makeComplexComponentTensorInfo(Je,tt.complexTensorInfos.imag)];return Ye.runWebGLProgram(st,rt,rt[0].dtype)}const complexAbsConfig={kernelName:ComplexAbs,backendName:"webgl",kernelFunc:complexAbs};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ConcatProgram{constructor(Ke){this.outputShape=[],this.outputShape=computeOutShape$1(Ke,1),this.variableNames=Ke.map((rt,it)=>`T${it}`);const Ye=new Array(Ke.length-1);Ye[0]=Ke[0][1];for(let rt=1;rt<Ye.length;rt++)Ye[rt]=Ye[rt-1]+Ke[rt][1];const Je=[`if (yC < ${Ye[0]}) setOutput(getT0(yR, yC));`];for(let rt=1;rt<Ye.length;rt++){const it=Ye[rt-1];Je.push(`else if (yC < ${Ye[rt]}) setOutput(getT${rt}(yR, yC-${it}));`)}const tt=Ye.length,st=Ye[Ye.length-1];Je.push(`else setOutput(getT${tt}(yR, yC-${st}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${Je.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ConcatPackedProgram{constructor(Ke,Ye){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=computeOutShape$1(Ke,Ye);const Je=this.outputShape,tt=Je.length,st=getCoordsDataType(tt),rt=getChannels("coords",tt),it=["x","y","z","w","u","v"].slice(0,tt);this.variableNames=Ke.map((xt,vt)=>`T${vt}`);const ot=new Array(Ke.length-1);ot[0]=Ke[0][Ye];for(let xt=1;xt<ot.length;xt++)ot[xt]=ot[xt-1]+Ke[xt][Ye];const at=it[Ye],lt=it.slice(-2),ut=it.join();let ht=`if (${at} < ${ot[0]}) {
        return getChannel(
            getT0(${ut}), vec2(${lt.join()}));
        }`;for(let xt=1;xt<ot.length;xt++){const vt=ot[xt-1];ht+=`
        if (${at} < ${ot[xt]}  && ${at} >= ${ot[xt-1]}) {
          return getChannel(
            getT${xt}(${shiftedChannels(it,at,vt)}),
            vec2(${shiftedChannels(lt,at,vt)}));
        }`}const pt=ot.length,ft=ot[ot.length-1];ht+=`
        return getChannel(
          getT${pt}(${shiftedChannels(it,at,ft)}),
          vec2(${shiftedChannels(lt,at,ft)}));`,this.userCode=`
      float getValue(${it.map(xt=>"int "+xt)}) {
        ${ht}
      }

      void main() {
        ${st} coords = getOutputCoords();
        vec4 result = vec4(getValue(${rt}), 0., 0., 0.);

        ${rt[tt-1]} = ${rt[tt-1]} + 1;
        if (${rt[tt-1]} < ${Je[tt-1]}) {
          result.g = getValue(${rt});
        }

        ${rt[tt-2]} = ${rt[tt-2]} + 1;
        if (${rt[tt-2]} < ${Je[tt-2]}) {
          result.a = getValue(${rt});
        }

        ${rt[tt-1]} = ${rt[tt-1]} - 1;
        if (${rt[tt-2]} < ${Je[tt-2]} &&
            ${rt[tt-1]} < ${Je[tt-1]}) {
          result.b = getValue(${rt});
        }
        setOutput(result);
      }
    `}}function shiftedChannels(Xe,Ke,Ye){const Je=Xe.indexOf(Ke);return Xe.map((st,rt)=>rt===Je?`${st} - ${Ye}`:st).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imag(Xe){const{inputs:Ke,backend:Ye}=Xe,{input:Je}=Ke,tt=Ye.texData.get(Je.dataId);return identity$3({inputs:{x:tt.complexTensorInfos.imag},backend:Ye})}const imagConfig={kernelName:Imag,backendName:"webgl",kernelFunc:imag};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concatImpl(Xe,Ke,Ye){const Je=Xe[0].dtype;if(Je==="complex64"){const at=Xe.map(ft=>real({inputs:{input:ft},backend:Ye})),lt=Xe.map(ft=>imag({inputs:{input:ft},backend:Ye})),ut=concatImpl(at,Ke,Ye),ht=concatImpl(lt,Ke,Ye),pt=complex({inputs:{real:ut,imag:ht},backend:Ye});return at.forEach(ft=>Ye.disposeIntermediateTensorInfo(ft)),lt.forEach(ft=>Ye.disposeIntermediateTensorInfo(ft)),Ye.disposeIntermediateTensorInfo(ut),Ye.disposeIntermediateTensorInfo(ht),pt}if(Je==="string"){const{tensors2D:at,outShape:lt}=computeTensors2D(Xe,Ke,Ye),ut=at.map(vt=>({vals:Ye.readSync(vt.dataId),shape:vt.shape})),ht=at[0].shape[0]===1,pt=concatImplCPU(ut,lt,Je,ht),ft=computeOutShape$1(Xe.map(vt=>vt.shape),Ke),xt=Ye.makeTensorInfo(ft,Je,pt);return at.forEach(vt=>Ye.disposeIntermediateTensorInfo(vt)),xt}if(Xe.length>env().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const at=Math.floor(Xe.length/2),lt=concatImpl(Xe.slice(0,at),Ke,Ye),ut=concatImpl(Xe.slice(at),Ke,Ye),ht=concatImpl([lt,ut],Ke,Ye);return Ye.disposeIntermediateTensorInfo(lt),Ye.disposeIntermediateTensorInfo(ut),ht}if(env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&Xe[0].shape.length>1){const at=new ConcatPackedProgram(Xe.map(lt=>lt.shape),Ke);return Ye.runWebGLProgram(at,Xe,Je)}const{tensors2D:tt,outShape:st}=computeTensors2D(Xe,Ke,Ye),rt=new ConcatProgram(tt.map(at=>at.shape)),it=Ye.runWebGLProgram(rt,tt,Je);tt.forEach(at=>Ye.disposeIntermediateTensorInfo(at));const ot=reshape({inputs:{x:it},attrs:{shape:st},backend:Ye});return Ye.disposeIntermediateTensorInfo(it),ot}function computeTensors2D(Xe,Ke,Ye){const Je=computeOutShape$1(Xe.map(st=>st.shape),Ke);return{tensors2D:Xe.map(st=>reshape({inputs:{x:st},attrs:{shape:[-1,sizeFromShape(st.shape.slice(Ke))]},backend:Ye})),outShape:Je}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concat(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{axis:tt}=Je,st=parseAxisParam(tt,Ke[0].shape)[0],rt=computeOutShape$1(Ke.map(at=>at.shape),st);if(sizeFromShape(rt)===0)return Ye.makeTensorInfo(rt,Ke[0].dtype,[]);const it=Ke.filter(at=>sizeFromShape(at.shape)>0);if(it.length===1)return identity$3({inputs:{x:it[0]},backend:Ye});const ot=it.map(at=>at.shape);return assertParamsConsistent(ot,st),concatImpl(it,st,Ye)}const concatConfig={kernelName:Concat,backendName:"webgl",kernelFunc:concat};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Conv2DProgram{constructor(Ke,Ye=!1,Je=null,tt=!1,st=!1){this.variableNames=["x","W"],this.outputShape=Ke.outShape;const rt=Ke.padInfo.top,it=Ke.padInfo.left,ot=Ke.strideHeight,at=Ke.strideWidth,lt=Ke.dilationHeight,ut=Ke.dilationWidth,ht=Ke.filterHeight,pt=Ke.filterWidth,ft=Math.floor(Ke.inChannels/4)*4,xt=Ke.inChannels%4,vt=Ke.dataFormat==="channelsLast",At=vt?1:2,Et=vt?2:3,wt=vt?3:1;let _t="",Ct="";Je&&(tt?_t=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${Je}
        }`:st?_t=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${Je}
        }`:_t=`
          float activation(float x) {
            ${Je}
          }
        `,Ct="result = activation(result);");const Tt=Ye?"result += getBiasAtOutCoords();":"";Ye&&this.variableNames.push("bias"),tt&&this.variableNames.push("preluActivationWeights"),st&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${_t}

      const ivec2 strides = ivec2(${ot}, ${at});
      const ivec2 pads = ivec2(${rt}, ${it});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${wt}];

        ivec2 xRCCorner =
            ivec2(coords[${At}], coords[${Et}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${ht}; wR++) {
          int xR = xRCorner + wR * ${lt};

          if (xR < 0 || xR >= ${Ke.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${pt}; wC++) {
            int xC = xCCorner + wC * ${ut};

            if (xC < 0 || xC >= ${Ke.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${ft}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${vt}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${xt===1}) {

              if (${vt}) {
                dotProd +=
                    getX(batch, xR, xC, ${ft}) *
                    getW(wR, wC, ${ft}, d2);
              } else {
                dotProd +=
                    getX(batch, ${ft}, xR, xC) *
                    getW(wR, wC, ${ft}, d2);
              }

            } else if (${xt===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${ft}, d2),
                getW(wR, wC, ${ft} + 1, d2)
              );

              if (${vt}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${ft}),
                  getX(batch, xR, xC, ${ft} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${ft}, xR, xC),
                  getX(batch, ${ft} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${xt===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${ft}, d2),
                getW(wR, wC, ${ft} + 1, d2),
                getW(wR, wC, ${ft} + 2, d2)
              );

              if (${vt}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${ft}),
                  getX(batch, xR, xC, ${ft} + 1),
                  getX(batch, xR, xC, ${ft} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${ft}, xR, xC),
                  getX(batch, ${ft} + 1, xR, xC),
                  getX(batch, ${ft} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${Tt}
        ${Ct}
        setOutput(result);
      }
    `}}class Conv3DProgram{constructor(Ke){this.variableNames=["x","W"],this.outputShape=Ke.outShape;const Ye=Ke.padInfo.front,Je=Ke.padInfo.top,tt=Ke.padInfo.left,st=Ke.strideDepth,rt=Ke.strideHeight,it=Ke.strideWidth,ot=Ke.dilationDepth,at=Ke.dilationHeight,lt=Ke.dilationWidth,ut=Ke.filterDepth,ht=Ke.filterHeight,pt=Ke.filterWidth,ft=Math.floor(Ke.inChannels/4)*4,xt=Ke.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${st}, ${rt}, ${it});
      const ivec3 pads = ivec3(${Ye}, ${Je}, ${tt});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${ut}; wF++) {
          int xF = xFCorner + wF * ${ot};

          if (xF < 0 || xF >= ${Ke.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${ht}; wR++) {
            int xR = xRCorner + wR * ${at};

            if (xR < 0 || xR >= ${Ke.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${pt}; wC++) {
              int xC = xCCorner + wC * ${lt};

              if (xC < 0 || xC >= ${Ke.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${ft}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${xt===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${ft}) *
                  getW(wF, wR, wC, ${ft}, d2);
              } else if (${xt===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${ft}),
                  getX(batch, xF, xR, xC, ${ft} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${ft}, d2),
                  getW(wF, wR, wC, ${ft} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${xt===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${ft}),
                  getX(batch, xF, xR, xC, ${ft} + 1),
                  getX(batch, xF, xR, xC, ${ft} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${ft}, d2),
                  getW(wF, wR, wC, ${ft} + 1, d2),
                  getW(wF, wR, wC, ${ft} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Im2ColPackedProgram{constructor(Ke,Ye,Je){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ke;const{filterWidth:tt,inChannels:st,strideWidth:rt,strideHeight:it,padInfo:ot,outWidth:at,dilationWidth:lt,dilationHeight:ut,dataFormat:ht}=Je,{left:pt,top:ft}=ot,xt=st*tt,vt=getGlslDifferences(),At=ht==="channelsLast",Et=At?0:1,wt=At?1:2;let _t="";for(let Ct=0;Ct<=1;Ct++)for(let Tt=0;Tt<=1;Tt++)_t+=`
          blockIndex = rc.y + ${Tt};
          pos = rc.x + ${Ct};

          if(blockIndex < ${Ke[1]} && pos < ${Ke[0]}) {
            offsetY = int(blockIndex / (${at})) * ${it} - ${ft};
            d0 = offsetY + ${ut} * (pos / ${xt});

            if(d0 < ${Ye[Et]} && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), ${at}.) * ${rt}. - ${pt}.);
              d1 = offsetX + ${lt} * (int(mod(float(pos), ${xt}.) / ${st}.));

              if(d1 < ${Ye[wt]} && d1 >= 0) {

                ch = int(mod(float(pos), ${st}.));

                if (${At}) {
                  innerDims = vec2(d1, ch);
                  result[${Ct*2+Tt}] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${Ct*2+Tt}] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${_t}

        ${vt.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2dByMatMul({x:Xe,filter:Ke,convInfo:Ye,backend:Je,bias:tt=null,preluActivationWeights:st=null,leakyreluAlpha:rt=0,activation:it=null}){const ot=Xe.shape,at=Je.texData.get(Xe.dataId),lt=Ye.inChannels,ut=ot[0]*ot[1]*ot[2],ht=Ye.outChannels,pt=Ye.dataFormat==="channelsLast",ft=!1,xt=!1;let vt;const At=[],Et=(ut===1||ht===1)&&lt>MATMUL_SHARED_DIM_THRESHOLD,wt=ot[2]%2!==0&&!!at.isPacked;if(Et||!env().getBool("WEBGL_LAZILY_UNPACK")||!env().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!wt){const _t=pt?ot[0]*ot[1]*ot[2]:ot[0]*ot[2]*ot[3],Ct=reshape({inputs:{x:Xe},backend:Je,attrs:{shape:[1,_t,Ye.inChannels]}}),Tt=reshape({inputs:{x:Ke},backend:Je,attrs:{shape:[1,Ye.inChannels,Ye.outChannels]}}),St=batchMatMulImpl({a:Ct,b:Tt,transposeA:ft,transposeB:xt,backend:Je,bias:tt,activation:it,preluActivationWeights:st,leakyreluAlpha:rt});vt=reshape({inputs:{x:St},backend:Je,attrs:{shape:Ye.outShape}}),At.push(Ct),At.push(Tt),At.push(St)}else{const _t=pt?ot[0]*ot[1]*(ot[2]+1):ot[0]*ot[2]*(ot[3]+1),Ct={dataId:Xe.dataId,shape:[1,_t,Ye.inChannels],dtype:Xe.dtype},Tt=at.shape;at.shape=at.shape.slice(),at.shape[at.shape.length-2]++,assert$2(isReshapeFree(at.shape,Ct.shape),()=>`packed reshape ${at.shape} to ${Ct.shape} isn't free`);const St=reshape({inputs:{x:Ke},backend:Je,attrs:{shape:[1,Ye.inChannels,Ye.outChannels]}});At.push(St);const Rt=batchMatMulImpl({a:Ct,b:St,backend:Je,transposeA:ft,transposeB:xt,bias:tt,activation:it,preluActivationWeights:st,leakyreluAlpha:rt}),Nt=Je.texData.get(Rt.dataId);assert$2(Nt.isPacked,()=>"batchMatMul result is expected to be packed"),at.shape=Tt,Nt.shape=Ye.outShape,vt=identity$3({inputs:{x:Rt},backend:Je}),vt.shape=Ye.outShape,At.push(Rt)}for(const _t of At)Je.disposeIntermediateTensorInfo(_t);return vt}function conv2dWithIm2Row({x:Xe,filter:Ke,convInfo:Ye,backend:Je,bias:tt=null,preluActivationWeights:st=null,leakyreluAlpha:rt=0,activation:it=null}){const{filterWidth:ot,filterHeight:at,inChannels:lt,outWidth:ut,outHeight:ht,dataFormat:pt}=Ye,ft=pt==="channelsLast",xt=ot*at*lt,vt=ht*ut,At=[xt,vt],Et=!0,wt=!1,_t=[],Ct=reshape({inputs:{x:Xe},backend:Je,attrs:{shape:Xe.shape.slice(1)}}),Tt=reshape({inputs:{x:Ke},backend:Je,attrs:{shape:[1,xt,sizeFromShape(Ke.shape)/xt]}});_t.push(Ct),_t.push(Tt);const St=new Im2ColPackedProgram(At,Ct.shape,Ye),Rt=Je.runWebGLProgram(St,[Ct],"float32"),Nt=reshape({inputs:{x:Rt},backend:Je,attrs:{shape:[1,At[0],At[1]]}});_t.push(Rt),_t.push(Nt);const Pt=tt!=null,Bt=st!=null,Lt=it==="leakyrelu",zt=it?mapActivationToShaderProgram(it,!0):null,Dt=new MatMulPackedProgram(Nt.shape,Tt.shape,[1,vt,Ye.outChannels],Et,wt,Pt,zt,Bt,Lt),Vt=[Nt,Tt];if(tt&&Vt.push(tt),Bt&&Vt.push(st),Lt){const Ht=Je.makeTensorInfo([],"float32",createScalarValue(rt,"float32"));Vt.push(Ht),_t.push(Ht)}const Gt=Je.runWebGLProgram(Dt,Vt,"float32"),Qt=ft?[1,ht,ut,Ye.outChannels]:[1,Ye.outChannels,ht,ut],jt=reshape({inputs:{x:Gt},backend:Je,attrs:{shape:Qt}});_t.push(Gt);for(const Ht of _t)Je.disposeIntermediateTensorInfo(Ht);return jt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2d(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,filter:st}=Ke,{strides:rt,pad:it,dataFormat:ot,dilations:at,dimRoundingMode:lt}=Je,ut=convertConv2DDataFormat(ot),ht=computeConv2DInfo(tt.shape,st.shape,rt,at,it,lt,!1,ut);let pt;if(ht.filterHeight===1&&ht.filterWidth===1&&ht.dilationHeight===1&&ht.dilationWidth===1&&ht.strideHeight===1&&ht.strideWidth===1&&(ht.padInfo.type==="SAME"||ht.padInfo.type==="VALID"))pt=conv2dByMatMul({x:tt,filter:st,convInfo:ht,backend:Ye});else if(env().getBool("WEBGL_CONV_IM2COL")&&tt.shape[0]===1)pt=conv2dWithIm2Row({x:tt,filter:st,convInfo:ht,backend:Ye});else{const xt=new Conv2DProgram(ht);pt=Ye.runWebGLProgram(xt,[tt,st],"float32")}const ft=reshape({inputs:{x:pt},backend:Ye,attrs:{shape:ht.outShape}});return Ye.disposeIntermediateTensorInfo(pt),ft}const conv2DConfig={kernelName:Conv2D$1,backendName:"webgl",kernelFunc:conv2d};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Conv2DDerFilterProgram{constructor(Ke){this.variableNames=["x","dy"],this.outputShape=Ke.filterShape;const Ye=Ke.strideHeight,Je=Ke.strideWidth,tt=Ke.padInfo.top,st=Ke.padInfo.left,rt=Ke.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${Ke.batchSize}; b++) {
          for (int yR = 0; yR < ${Ke.outHeight}; yR++) {
            int xR = wR + yR * ${Ye} - ${tt};

            if (xR < 0 || xR >= ${Ke.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${Ke.outWidth}; yC++) {
              int xC = wC + yC * ${Je} - ${st};

              if (xC < 0 || xC >= ${Ke.inWidth}) {
                continue;
              }

              if (${rt}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Conv2DDerInputProgram{constructor(Ke){this.variableNames=["dy","W"],this.outputShape=Ke.inShape;const Ye=Ke.filterHeight,Je=Ke.filterWidth,tt=Ke.strideHeight,st=Ke.strideWidth,rt=Ke.dataFormat==="channelsLast",it=Ye-1-Ke.padInfo.top,ot=Je-1-Ke.padInfo.left,at=rt?1:2,lt=rt?2:3,ut=rt?3:1;this.userCode=`
      const ivec2 pads = ivec2(${it}, ${ot});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${ut}];

        ivec2 dyCorner = ivec2(coords[${at}], coords[${lt}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${Ye}; wR++) {
          float dyR = float(dyRCorner + wR) / ${tt}.0;

          if (dyR < 0.0 || dyR >= ${Ke.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${Ye} - 1 - wR;

          for (int wC = 0; wC < ${Je}; wC++) {
            float dyC = float(dyCCorner + wC) / ${st}.0;

            if (dyC < 0.0 || dyC >= ${Ke.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${Je} - 1 - wC;

            for (int d2 = 0; d2 < ${Ke.outChannels}; d2++) {

              if (${rt}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Conv3DDerFilterProgram{constructor(Ke){this.variableNames=["x","dy"],this.outputShape=Ke.filterShape;const Ye=Ke.strideDepth,Je=Ke.strideHeight,tt=Ke.strideWidth,st=Ke.padInfo.front,rt=Ke.padInfo.top,it=Ke.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${Ke.batchSize}; b++) {
          for (int yF = 0; yF < ${Ke.outDepth}; yF++) {
            int xF = wF + yF * ${Ye} - ${st};

            if (xF < 0 || xF >= ${Ke.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${Ke.outHeight}; yR++) {
              int xR = wR + yR * ${Je} - ${rt};

              if (xR < 0 || xR >= ${Ke.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${Ke.outWidth}; yC++) {
                int xC = wC + yC * ${tt} - ${it};

                if (xC < 0 || xC >= ${Ke.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Conv3DDerInputProgram{constructor(Ke){this.variableNames=["dy","W"],this.outputShape=Ke.inShape;const Ye=Ke.filterDepth,Je=Ke.filterHeight,tt=Ke.filterWidth,st=Ke.strideDepth,rt=Ke.strideHeight,it=Ke.strideWidth,ot=Ye-1-Ke.padInfo.front,at=Je-1-Ke.padInfo.top,lt=tt-1-Ke.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${ot}, ${at}, ${lt});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${Ye}; wF++) {
          float dyF = float(dyFCorner + wF) / ${st}.0;

          if (dyF < 0.0 || dyF >= ${Ke.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${Ye} - 1 - wF;

          for (int wR = 0; wR < ${Je}; wR++) {
            float dyR = float(dyRCorner + wR) / ${rt}.0;

            if (dyR < 0.0 || dyR >= ${Ke.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${Je} - 1 - wR;

            for (int wC = 0; wC < ${tt}; wC++) {
              float dyC = float(dyCCorner + wC) / ${it}.0;

              if (dyC < 0.0 || dyC >= ${Ke.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${tt} - 1 - wC;

              for (int d2 = 0; d2 < ${Ke.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropFilter(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,dy:st}=Ke,{strides:rt,pad:it,dataFormat:ot,dimRoundingMode:at,filterShape:lt}=Je,ut=convertConv2DDataFormat(ot),ht=computeConv2DInfo(tt.shape,lt,rt,1,it,at,!1,ut),pt=new Conv2DDerFilterProgram(ht);return Ye.runWebGLProgram(pt,[tt,st],"float32")}const conv2DBackpropFilterConfig={kernelName:Conv2DBackpropFilter,backendName:"webgl",kernelFunc:conv2DBackpropFilter};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropInput(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{dy:tt,filter:st}=Ke,{inputShape:rt,strides:it,pad:ot,dataFormat:at,dimRoundingMode:lt}=Je,ut=convertConv2DDataFormat(at),ht=computeConv2DInfo(rt,st.shape,it,1,ot,lt,!1,ut),pt=new Conv2DDerInputProgram(ht);return Ye.runWebGLProgram(pt,[tt,st],"float32")}const conv2DBackpropInputConfig={kernelName:Conv2DBackpropInput,backendName:"webgl",kernelFunc:conv2DBackpropInput};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3D(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,filter:st}=Ke,{strides:rt,pad:it,dilations:ot}=Je,at=computeConv3DInfo(tt.shape,st.shape,rt,ot,it),lt=new Conv3DProgram(at);return Ye.runWebGLProgram(lt,[tt,st],"float32")}const conv3DConfig={kernelName:Conv3D$1,backendName:"webgl",kernelFunc:conv3D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropFilterV2(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,dy:st}=Ke,{strides:rt,pad:it,filterShape:ot}=Je,at=computeConv3DInfo(tt.shape,ot,rt,1,it),lt=new Conv3DDerFilterProgram(at);return Ye.runWebGLProgram(lt,[tt,st],"float32")}const conv3DBackpropFilterV2Config={kernelName:Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:conv3DBackpropFilterV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropInput(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{dy:tt,filter:st}=Ke,{pad:rt,strides:it,inputShape:ot}=Je,at=computeConv3DInfo(ot,st.shape,it,1,rt),lt=new Conv3DDerInputProgram(at);return Ye.runWebGLProgram(lt,[tt,st],"float32")}const conv3DBackpropInputConfig={kernelName:Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:conv3DBackpropInput};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COS=CHECK_NAN_SNIPPET_UNARY+`
  return cos(x);
`,cos=unaryKernelFunc({opSnippet:COS}),cosConfig={kernelName:Cos,backendName:"webgl",kernelFunc:cos};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COSH=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,cosh=unaryKernelFunc({opSnippet:COSH}),coshConfig={kernelName:Cosh,backendName:"webgl",kernelFunc:cosh};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CropAndResizeProgram{constructor(Ke,Ye,Je,tt,st){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[rt,it,ot,at]=Ke,[lt]=Ye,[ut,ht]=Je;this.outputShape=[lt,ut,ht,at];const pt=tt==="bilinear"?1:0,[ft,xt]=[`${it-1}.0`,`${ot-1}.0`],[vt,At,Et]=ut>1?[`${(it-1)/(ut-1)}`,"(y2-y1) * height_ratio",`y1*${ft} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${ft}`],[wt,_t,Ct]=ht>1?[`${(ot-1)/(ht-1)}`,"(x2-x1) * width_ratio",`x1*${xt} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${xt}`];this.userCode=`
      const float height_ratio = float(${vt});
      const float width_ratio = float(${wt});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${rt}) {
          return;
        }

        float height_scale = ${At};
        float width_scale = ${_t};

        float in_y = ${Et};
        if( in_y < 0.0 || in_y > ${ft} ) {
          setOutput(float(${st}));
          return;
        }
        float in_x = ${Ct};
        if( in_x < 0.0 || in_x > ${xt} ) {
          setOutput(float(${st}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${pt} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cropAndResize=Xe=>{const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{image:tt,boxes:st,boxInd:rt}=Ke,{cropSize:it,method:ot,extrapolationValue:at}=Je,lt=new CropAndResizeProgram(tt.shape,st.shape,it,ot,at);return Ye.runWebGLProgram(lt,[tt,st,rt],"float32")},cropAndResizeConfig={kernelName:CropAndResize,backendName:"webgl",kernelFunc:cropAndResize};class CumSumProgram{constructor(Ke,Ye,Je){this.variableNames=["x"],this.outputShape=Ke;const tt=Ke.length,st=Ye?"0.0":`getX(${getCoords(tt,"coords")})`,rt=Ke[Ke.length-1];let it="",ot="";Ye?(it=Je?`end != ${rt-1}`:"end != 0",ot=Je?"end + 1":"end - 1"):(it=Je?`end + pow2 < ${rt}`:"end >= pow2",ot=Je?"end + pow2":"end - pow2"),this.userCode=`
      uniform float index;
      void main() {
        ${getCoordsDataType(tt)} coords = getOutputCoords();
        int end = ${getFinalCoord(tt,"coords")};
        float val = ${st};
        int pow2 = int(pow(2.0, index));
        if (${it}) {
          int idx = ${ot};
          ${getFinalCoord(tt,"coords")} = idx;
          val += getX(${getCoords(tt,"coords")});
        }
        setOutput(val);
      }
    `}getCustomSetupFunc(Ke){return(Ye,Je)=>{this.index==null&&(this.index=Ye.getUniformLocation(Je,"index")),Ye.gl.uniform1f(this.index,Ke)}}}function getCoords(Xe,Ke){if(Xe===1)return`${Ke}`;if(Xe===2)return`${Ke}.x, ${Ke}.y`;if(Xe===3)return`${Ke}.x, ${Ke}.y, ${Ke}.z`;if(Xe===4)return`${Ke}.x, ${Ke}.y, ${Ke}.z, ${Ke}.w`;throw Error(`Cumulative sum for rank ${Xe} is not yet supported`)}function getFinalCoord(Xe,Ke){if(Xe===1)return`${Ke}`;if(Xe===2)return`${Ke}.y`;if(Xe===3)return`${Ke}.z`;if(Xe===4)return`${Ke}.w`;throw Error(`Cumulative sum for rank ${Xe} is not yet supported`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumsum(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st,exclusive:rt,reverse:it}=Je,ot=tt.shape.length,at=getAxesPermutation([st],ot);let lt=tt;at!=null&&(lt=transpose({inputs:{x:tt},backend:Ye,attrs:{perm:at}}));const ut=getInnerMostAxes(1,ot)[0];if(ut!==ot-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${tt.shape.length-1} but got axis=${st}`);const ht=lt.shape[ut];let pt=identity$3({inputs:{x:lt},backend:Ye});for(let ft=0;ft<=Math.ceil(Math.log2(ht))-1;ft++){const xt=new CumSumProgram(lt.shape,!1,it),vt=xt.getCustomSetupFunc(ft),At=pt;pt=Ye.runWebGLProgram(xt,[pt],pt.dtype,vt),Ye.disposeIntermediateTensorInfo(At)}if(rt){const ft=new CumSumProgram(lt.shape,rt,it),xt=pt;pt=Ye.runWebGLProgram(ft,[pt],pt.dtype),Ye.disposeIntermediateTensorInfo(xt)}if(at!=null){const ft=getUndoAxesPermutation(at),xt=transpose({inputs:{x:pt},backend:Ye,attrs:{perm:ft}});return Ye.disposeIntermediateTensorInfo(pt),Ye.disposeIntermediateTensorInfo(lt),xt}return pt}const cumsumConfig={kernelName:Cumsum,backendName:"webgl",kernelFunc:cumsum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function denseBincount(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,weights:st}=Ke,{size:rt,binaryOutput:it}=Je;if(tt.shape.length===1){const ot=Ye.readSync(tt.dataId),at=Ye.readSync(st.dataId),lt=bincountImplCPU(ot,at,st.dtype,st.shape,rt);return Ye.makeTensorInfo([rt],st.dtype,lt)}else if(tt.shape.length===2){const ot=Ye.bufferSync(tt),at=Ye.bufferSync(st),lt=bincountReduceImplCPU(ot,at,rt,it);return Ye.makeTensorInfo(lt.shape,st.dtype,lt.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${tt.shape.length}.`)}const denseBincountConfig={kernelName:DenseBincount,backendName:"webgl",kernelFunc:denseBincount};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthToSpaceProgram{constructor(Ke,Ye,Je){this.variableNames=["x"],this.outputShape=[],this.outputShape=Ke,this.blockSize=Ye,this.dataFormat=Je,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${Ye};
      int offset_h = imod(h, ${Ye});
      int in_w = w / ${Ye};
      int offset_w = imod(w, ${Ye});
      int offset_d = (offset_h * ${Ye} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthToSpace(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{blockSize:st,dataFormat:rt}=Je;assert$2(st>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${st}`);const it=tt.shape[0],ot=rt==="NHWC"?tt.shape[1]:tt.shape[2],at=rt==="NHWC"?tt.shape[2]:tt.shape[3],lt=rt==="NHWC"?tt.shape[3]:tt.shape[1],ut=ot*st,ht=at*st,pt=lt/(st*st),ft=rt==="NHWC"?[it,ut,ht,pt]:[it,pt,ut,ht],xt=new DepthToSpaceProgram(ft,st,rt);return Ye.runWebGLProgram(xt,[tt],tt.dtype)}const depthToSpaceConfig={kernelName:DepthToSpace,backendName:"webgl",kernelFunc:depthToSpace};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthwiseConv2DProgram{constructor(Ke,Ye=!1,Je=null,tt=!1,st=!1){this.variableNames=["x","W"],this.outputShape=Ke.outShape;const rt=Ke.inHeight,it=Ke.inWidth,ot=Ke.padInfo.top,at=Ke.padInfo.left,lt=Ke.strideHeight,ut=Ke.strideWidth,ht=Ke.dilationHeight,pt=Ke.dilationWidth,ft=Ke.filterHeight,xt=Ke.filterWidth,vt=Ke.outChannels/Ke.inChannels;let At="",Et="";Je&&(tt?At=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${Je}
        }`:st?At=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${Je}
        }`:At=`
          float activation(float x) {
            ${Je}
          }
        `,Et="result = activation(result);");const wt=Ye?"result += getBiasAtOutCoords();":"";Ye&&this.variableNames.push("bias"),tt&&this.variableNames.push("preluActivationWeights"),st&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${At}

      const ivec2 strides = ivec2(${lt}, ${ut});
      const ivec2 pads = ivec2(${ot}, ${at});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${vt};
        int q = d2 - d1 * ${vt};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${ft}; wR++) {
          int xR = xRCorner + wR * ${ht};

          if (xR < 0 || xR >= ${rt}) {
            continue;
          }

          for (int wC = 0; wC < ${xt}; wC++) {
            int xC = xCCorner + wC * ${pt};

            if (xC < 0 || xC >= ${it}) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${wt}
        ${Et}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthwiseConvPacked2DProgram{constructor(Ke,Ye=!1,Je=null,tt=!1,st=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ke.outShape;const rt=Ke.inHeight,it=Ke.inWidth,ot=Ke.padInfo.top,at=Ke.padInfo.left,lt=Ke.strideHeight,ut=Ke.strideWidth,ht=Ke.dilationHeight,pt=Ke.dilationWidth,ft=Ke.filterHeight,xt=Ke.filterWidth,vt=xt;let At="int xR; int xC; int xCOffset;";for(let Ct=0;Ct<ft;Ct++)for(let Tt=0;Tt<xt;Tt++)At+=`
          vec4 xTexelR${Ct}C${Tt*2} = vec4(0.);
          vec4 wR${Ct}C${Tt} = vec4(0.);
          vec4 xR${Ct}C${Tt} = vec4(0.);`;for(let Ct=0;Ct<ft;Ct++)for(let Tt=0;Tt<vt;Tt++){const St=Tt*2;if(At+=`
          xR = xRCorner + ${Ct*ht};
          xC = xCCorner + ${St*pt};
        `,ut===1){if(St<xt&&(at%2===1?At+=`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < ${rt} && xCOffset >= 0 && xCOffset < ${it}) {
                  xTexelR${Ct}C${St} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= ${it}) {
                    xTexelR${Ct}C${St}.zw = vec2(0.);
                  }
                } else {
                  xTexelR${Ct}C${St} = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < ${rt} && xCOffset >= 0 && xCOffset < ${it}) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= ${it}) {
                    previous.zw = vec2(0.);
                  }

                  xR${Ct}C${St} = vec4(previous.zw, xTexelR${Ct}C${St}.xy);
                } else {
                  xR${Ct}C${St} = vec4(0, 0, xTexelR${Ct}C${St}.xy);
                }
              `:At+=`
                if(xR >= 0 && xR < ${rt} && xC >= 0 && xC < ${it}) {
                  xTexelR${Ct}C${St} = getX(batch, xR, xC, d1);
                } else {
                  xTexelR${Ct}C${St} = vec4(0.);
                }

                xR${Ct}C${St} = xTexelR${Ct}C${St};
              `,St+1<xt)){const Rt=at%2===0?nearestLargerEven(pt):pt;pt%2===0&&at%2===1||pt%2!==0&&at%2!==1?(At+=`
                  xCOffset = xC + ${at%2} + ${Rt};

                  if(xR >= 0 && xR < ${rt} &&
                    xCOffset >= 0 && xCOffset < ${it}) {
                    xTexelR${Ct}C${St+2} = getX(batch, xR, xCOffset, d1);
                  }
                `,pt>1&&(At+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < ${rt} &&
                      xCOffset >= 0 && xCOffset < ${it}) {
                      xTexelR${Ct}C${St} = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR${Ct}C${St} = vec4(0.);
                    }
                  `),At+=`
                  xR${Ct}C${St+1} = vec4(
                    xTexelR${Ct}C${St}.zw, xTexelR${Ct}C${St+2}.xy);
                `):At+=`
                  xCOffset = xC + ${Rt};

                  if(xR >= 0 && xR < ${rt} &&
                    xCOffset >= 0 && xCOffset < ${it}) {
                    xTexelR${Ct}C${St+2} = getX(batch, xR, xCOffset, d1);
                  }

                  xR${Ct}C${St+1} = xTexelR${Ct}C${St+2};
                `}}else St<xt&&(At+=`
              if(xR >= 0 && xR < ${rt}) {
            `,at%2===1?(At+=`
                xCOffset = xC + 1 - ${ut};
                if(xCOffset >= 0 && xCOffset < ${it}) {
                  xTexelR${Ct}C${St} = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR${Ct}C${St} = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < ${it}) {
                  xTexelR${Ct}C${St+2} = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR${Ct}C${St+2} = vec4(0.);
                }

                xR${Ct}C${St} = vec4(
                  xTexelR${Ct}C${St}.zw, xTexelR${Ct}C${St+2}.zw);
              `,St+1<xt&&(At+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + ${ut};
                  if(xCOffset >= 0 && xCOffset < ${it}) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR${Ct}C${St+1} = vec4(xTexelR${Ct}C${St+2}.xy, final.xy);
                `)):(At+=`
                if(xC >= 0 && xC < ${it}) {
                  xTexelR${Ct}C${St} = getX(batch, xR, xC, d1);
                } else {
                  xTexelR${Ct}C${St} = vec4(0.);
                }

                xCOffset = xC + ${ut};
                if(xCOffset >= 0 && xCOffset < ${it}) {
                  xTexelR${Ct}C${St+2} = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR${Ct}C${St+2} = vec4(0.);
                }

                xR${Ct}C${St} = vec4(
                  xTexelR${Ct}C${St}.xy, xTexelR${Ct}C${St+2}.xy);
              `,St+1<xt&&(At+=`
                  xR${Ct}C${St+1} = vec4(
                    xTexelR${Ct}C${St}.zw, xTexelR${Ct}C${St+2}.zw);
                `)),At+="}");St<xt&&(At+=`
            vec4 wTexelR${Ct}C${St} = getW(${Ct}, ${St}, d1, q);
            wR${Ct}C${St} = vec4(wTexelR${Ct}C${St}.xz, wTexelR${Ct}C${St}.xz);
          `,St+1<xt&&(At+=`
              vec4 wTexelR${Ct}C${St+1} = getW(${Ct}, ${St+1}, d1, q);
              wR${Ct}C${St+1} =
                vec4(wTexelR${Ct}C${St+1}.xz, wTexelR${Ct}C${St+1}.xz);`))}for(let Ct=0;Ct<ft;Ct++)for(let Tt=0;Tt<xt;Tt++)At+=`dotProd += xR${Ct}C${Tt} * wR${Ct}C${Tt};`;let Et="",wt="";Je&&(tt?Et=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${Je}
        }`:st?Et=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${Je}
        }`:Et=`vec4 activation(vec4 x) {
          ${Je}
        }`,wt="result = activation(result);");const _t=Ye?"result += getBiasAtOutCoords();":"";Ye&&this.variableNames.push("bias"),tt&&this.variableNames.push("preluActivationWeights"),st&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${Et}

      const ivec2 strides = ivec2(${lt}, ${ut});
      const ivec2 pads = ivec2(${ot}, ${at});

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        ${At}

        vec4 result = dotProd;
        ${_t}
        ${wt}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNative(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,filter:st}=Ke,{strides:rt,pad:it,dilations:ot,dimRoundingMode:at}=Je;let lt=ot;lt==null&&(lt=[1,1]),assert$2(eitherStridesOrDilationsAreOne(rt,lt),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${rt} and dilations '${lt}'`);const ut=computeConv2DInfo(tt.shape,st.shape,rt,lt,it,at,!0);let ht;return env().getBool("WEBGL_PACK_DEPTHWISECONV")&&ut.strideWidth<=2&&ut.outChannels/ut.inChannels===1?ht=new DepthwiseConvPacked2DProgram(ut):ht=new DepthwiseConv2DProgram(ut),Ye.runWebGLProgram(ht,[tt,st],"float32")}const depthwiseConv2dNativeConfig={kernelName:DepthwiseConv2dNative,backendName:"webgl",kernelFunc:depthwiseConv2dNative};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthwiseConv2DDerFilterProgram{constructor(Ke){this.variableNames=["x","dy"],this.outputShape=Ke.filterShape;const Ye=Ke.strideHeight,Je=Ke.strideWidth,tt=Ke.padInfo.top,st=Ke.padInfo.left,rt=Ke.outChannels/Ke.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${rt} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${Ke.batchSize}; b++) {
          for (int yR = 0; yR < ${Ke.outHeight}; yR++) {
            int xR = wR + yR * ${Ye} - ${tt};

            if (xR < 0 || xR >= ${Ke.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${Ke.outWidth}; yC++) {
              int xC = wC + yC * ${Je} - ${st};

              if (xC < 0 || xC >= ${Ke.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class DepthwiseConv2DDerInputProgram{constructor(Ke){this.variableNames=["dy","W"],this.outputShape=Ke.inShape;const Ye=Ke.filterHeight,Je=Ke.filterWidth,tt=Ke.strideHeight,st=Ke.strideWidth,rt=Ye-1-Ke.padInfo.top,it=Je-1-Ke.padInfo.left,ot=Ke.outChannels/Ke.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${rt}, ${it});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${Ye}; wR++) {
          float dyR = float(dyRCorner + wR) / ${tt}.0;

          if (dyR < 0.0 || dyR >= ${Ke.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${Ye} - 1 - wR;

          for (int wC = 0; wC < ${Je}; wC++) {
            float dyC = float(dyCCorner + wC) / ${st}.0;

            if (dyC < 0.0 || dyC >= ${Ke.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${Je} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${ot}; dm++) {
              int d2 = d1 * ${ot} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropFilter(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,dy:st}=Ke,{strides:rt,dilations:it,pad:ot,dimRoundingMode:at,filterShape:lt}=Je,ut=computeConv2DInfo(tt.shape,lt,rt,it,ot,at,!0),ht=new DepthwiseConv2DDerFilterProgram(ut);return Ye.runWebGLProgram(ht,[tt,st],"float32")}const depthwiseConv2dNativeBackpropFilterConfig={kernelName:DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:depthwiseConv2dNativeBackpropFilter};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropInput(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{dy:tt,filter:st}=Ke,{strides:rt,dilations:it,pad:ot,dimRoundingMode:at,inputShape:lt}=Je,ut=computeConv2DInfo(lt,st.shape,rt,it,ot,at,!0),ht=new DepthwiseConv2DDerInputProgram(ut);return Ye.runWebGLProgram(ht,[tt,st],"float32")}const depthwiseConv2dNativeBackpropInputConfig={kernelName:DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:depthwiseConv2dNativeBackpropInput};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DiagProgram{constructor(Ke){this.variableNames=["X"],this.outputShape=[Ke,Ke],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function diag(Xe){const{inputs:Ke,backend:Ye}=Xe,{x:Je}=Ke,tt=[...Je.shape,...Je.shape],st=sizeFromShape(Je.shape),rt=reshape({inputs:{x:Je},backend:Ye,attrs:{shape:[st]}}),it=new DiagProgram(st),ot=Ye.runWebGLProgram(it,[rt],rt.dtype),at=reshape({inputs:{x:ot},backend:Ye,attrs:{shape:tt}});return Ye.disposeIntermediateTensorInfo(rt),Ye.disposeIntermediateTensorInfo(ot),at}const diagConfig={kernelName:Diag,backendName:"webgl",kernelFunc:diag};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dilation2DProgram{constructor(Ke){this.variableNames=["x","W"],this.outputShape=Ke.outShape;const{inHeight:Ye,inWidth:Je,padInfo:tt,strideHeight:st,strideWidth:rt,filterHeight:it,filterWidth:ot,dilationHeight:at,dilationWidth:lt}=Ke,{top:ut,left:ht}=tt;this.userCode=`
      const ivec2 strides = ivec2(${st}, ${rt});
      const ivec2 pads = ivec2(${ut}, ${ht});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${it}; h++) {
          int hIn = hBeg + h * ${at};

          if (hIn >= 0 && hIn < ${Ye}) {
            for (int w = 0; w < ${ot}; w++) {
              int wIn = wBeg + w * ${lt};

              if (wIn >= 0 && wIn < ${Je}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dilation2D(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,filter:st}=Ke,{strides:rt,pad:it,dilations:ot}=Je,at=computeDilation2DInfo(tt.shape,st.shape,rt,it,"NHWC",ot);let lt;const ut=new Dilation2DProgram(at);lt=Ye.runWebGLProgram(ut,[tt,st],"float32");const ht=reshape({inputs:{x:lt},backend:Ye,attrs:{shape:at.outShape}});return Ye.disposeIntermediateTensorInfo(lt),ht}const dilation2DConfig={kernelName:Dilation2D,backendName:"webgl",kernelFunc:dilation2D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ELU="return (x >= 0.0) ? x : (exp(x) - 1.0);",ELU_PACKED=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,elu=unaryKernelFunc({opSnippet:ELU,packedOpSnippet:ELU_PACKED}),eluConfig={kernelName:Elu$1,backendName:"webgl",kernelFunc:elu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ELU_DER="return (b >= 1.0) ? a : a * (b + 1.0);",ELU_DER_PACKED=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,eluGrad=Xe=>{const{inputs:Ke,backend:Ye}=Xe,{dy:Je,y:tt}=Ke,st=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new BinaryOpPackedProgram(ELU_DER_PACKED,Je.shape,tt.shape):new BinaryOpProgram(ELU_DER,Je.shape,tt.shape);return Ye.runWebGLProgram(st,[Je,tt],Je.dtype)},eluGradConfig={kernelName:EluGrad,backendName:"webgl",kernelFunc:eluGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PACKED_EQUAL=`
  return vec4(equal(a, b));
`,EQUAL="return float(a == b);",equal=binaryKernelFunc({opSnippet:EQUAL,packedOpSnippet:PACKED_EQUAL,dtype:"bool"}),equalConfig={kernelName:Equal,backendName:"webgl",kernelFunc:equal};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ERF=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${ERF_P};
  float a1 = ${ERF_A1};
  float a2 = ${ERF_A2};
  float a3 = ${ERF_A3};
  float a4 = ${ERF_A4};
  float a5 = ${ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,erf=unaryKernelFunc({opSnippet:ERF}),erfConfig={kernelName:Erf,backendName:"webgl",kernelFunc:erf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EXP="return exp(x);",exp=unaryKernelFunc({opSnippet:EXP,packedOpSnippet:EXP,cpuKernelImpl:expImplCPU}),expConfig={kernelName:Exp,backendName:"webgl",kernelFunc:exp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expandDims(Xe){const{inputs:Ke,attrs:Ye,backend:Je}=Xe,{dim:tt}=Ye,{input:st}=Ke,rt=st.shape.length,it=st.shape.slice();let ot=tt;return tt<0&&(assert$2(-(rt+1)<=tt,()=>`Axis must be in the interval [${-(rt+1)}, ${rt}]`),ot=rt+tt+1),it.splice(ot,0,1),reshape({inputs:{x:st},backend:Je,attrs:{shape:it}})}const expandDimsConfig={kernelName:ExpandDims,backendName:"webgl",kernelFunc:expandDims};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EXPM1="return exp(x) - 1.0;",expm1=unaryKernelFunc({opSnippet:EXPM1,packedOpSnippet:EXPM1,cpuKernelImpl:expm1ImplCPU}),expm1Config={kernelName:Expm1,backendName:"webgl",kernelFunc:expm1};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FFTProgram{constructor(Ke,Ye,Je){this.variableNames=["real","imag"];const tt=Ye[1];this.outputShape=Ye;const st=Je?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,rt=Je?`${tt}.0`:"1.0";let it;if(Ke==="real")it="return real * expR - imag * expI;";else if(Ke==="imag")it="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${Ke}.`);this.userCode=`
      const float exponentMultiplier = ${st};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${it}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${tt});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${tt}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${rt};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fftImpl(Xe,Ke,Ye){const Je=Ye.texData.get(Xe.dataId),tt=sizeFromShape(Xe.shape),st=Xe.shape[Xe.shape.length-1],rt=tt/st,it=reshape({inputs:{x:Xe},backend:Ye,attrs:{shape:[rt,st]}}),ot=it.shape,at=new FFTProgram("real",ot,Ke),lt=new FFTProgram("imag",ot,Ke),ut=[{dataId:Je.complexTensorInfos.real.dataId,dtype:Je.complexTensorInfos.real.dtype,shape:ot},{dataId:Je.complexTensorInfos.imag.dataId,dtype:Je.complexTensorInfos.imag.dtype,shape:ot}],ht=Ye.runWebGLProgram(at,ut,"float32"),pt=Ye.runWebGLProgram(lt,ut,"float32"),ft=complex({inputs:{real:ht,imag:pt},backend:Ye});Ye.disposeIntermediateTensorInfo(ht),Ye.disposeIntermediateTensorInfo(pt);const xt=reshape({inputs:{x:ft},backend:Ye,attrs:{shape:Xe.shape}});return Ye.disposeIntermediateTensorInfo(it),Ye.disposeIntermediateTensorInfo(ft),xt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fft$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{input:Je}=Ke;return fftImpl(Je,!1,Ye)}const fftConfig={kernelName:FFT$2,backendName:"webgl",kernelFunc:fft$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FillProgram{constructor(Ke,Ye){this.outputShape=[],this.variableNames=["x"],this.outputShape=Ke,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}getCustomSetupFunc(Ke){return(Ye,Je)=>{this.valueLoc==null&&(this.valueLoc=Ye.getUniformLocationNoThrow(Je,"value")),Ye.gl.uniform1f(this.valueLoc,Ke)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fill(Xe){const{backend:Ke,attrs:Ye}=Xe,{shape:Je,value:tt}=Ye;let{dtype:st}=Ye;if(st=st||inferDtype(tt),st==="string"){const rt=getArrayFromDType(st,sizeFromShape(Je));return rt.fill(tt),Ke.makeTensorInfo(Je,st,rt)}else{const rt=new FillProgram(Je,tt),it=rt.getCustomSetupFunc(tt);return Ke.runWebGLProgram(rt,[],st,it)}}const fillConfig={kernelName:Fill,backendName:"webgl",kernelFunc:fill};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FlipLeftRightProgram{constructor(Ke){this.variableNames=["Image"],this.outputShape=[];const Ye=Ke[2];this.outputShape=Ke,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${Ye} - x;
          float outputValue;
          if(coordX >= 0 && coordX < ${Ye}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const flipLeftRightConfig={kernelName:FlipLeftRight,backendName:"webgl",kernelFunc:({inputs:Xe,backend:Ke})=>{const{image:Ye}=Xe,Je=Ke,tt=new FlipLeftRightProgram(Ye.shape);return Je.runWebGLProgram(tt,[Ye],Ye.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FLOOR="return floor(x);",floor$1=unaryKernelFunc({opSnippet:FLOOR,packedOpSnippet:FLOOR,cpuKernelImpl:floorImplCPU}),floorConfig={kernelName:Floor,backendName:"webgl",kernelFunc:floor$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const INT_DIV=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,INT_DIV_PACKED=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,floorDiv=binaryKernelFunc({opSnippet:INT_DIV,packedOpSnippet:INT_DIV_PACKED,dtype:"int32"}),floorDivConfig={kernelName:FloorDiv,backendName:"webgl",kernelFunc:floorDiv};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FromPixelsProgram{constructor(Ke){this.variableNames=["A"];const Ye=getGlslDifferences(),[Je,tt]=Ke;this.outputShape=Ke,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${tt}.0, ${Je}.0);

        vec4 values = ${Ye.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FromPixelsPackedProgram{constructor(Ke){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const Ye=getGlslDifferences(),[Je,tt]=Ke;this.outputShape=Ke,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${tt}.0, ${Je}.0);
            vec4 values = ${Ye.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${Ye.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fromPixelsConfig={kernelName:FromPixels,backendName:"webgl",kernelFunc:fromPixels};let fromPixels2DContext;function fromPixels(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe;let{pixels:tt}=Ke;const{numChannels:st}=Je,rt=typeof HTMLVideoElement<"u"&&tt instanceof HTMLVideoElement,it=typeof HTMLImageElement<"u"&&tt instanceof HTMLImageElement,ot=typeof ImageBitmap<"u"&&tt instanceof ImageBitmap,[at,lt]=rt?[tt.videoWidth,tt.videoHeight]:[tt.width,tt.height],ut=[lt,at],ht=[lt,at,st];(it||rt||ot)&&(fromPixels2DContext==null&&(fromPixels2DContext=document.createElement("canvas").getContext("2d")),fromPixels2DContext.canvas.width=at,fromPixels2DContext.canvas.height=lt,fromPixels2DContext.drawImage(tt,0,0,at,lt),tt=fromPixels2DContext.canvas);const pt=Ye.makeTensorInfo(ut,"int32");Ye.texData.get(pt.dataId).usage=TextureUsage.PIXELS,Ye.gpgpu.uploadPixelDataToTexture(Ye.getTexture(pt.dataId),tt);const ft=env().getBool("WEBGL_PACK")?new FromPixelsPackedProgram(ht):new FromPixelsProgram(ht),xt=Ye.runWebGLProgram(ft,[pt],"int32");return Ye.disposeData(pt.dataId),xt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedConv2d(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,filter:st,bias:rt,preluActivationWeights:it}=Ke,{strides:ot,pad:at,dataFormat:lt,dilations:ut,dimRoundingMode:ht,activation:pt,leakyreluAlpha:ft}=Je,xt=convertConv2DDataFormat(lt),vt=computeConv2DInfo(tt.shape,st.shape,ot,ut,at,ht,!1,xt);let At;const Et=[];if(vt.filterHeight===1&&vt.filterWidth===1&&vt.dilationHeight===1&&vt.dilationWidth===1&&vt.strideHeight===1&&vt.strideWidth===1&&(vt.padInfo.type==="SAME"||vt.padInfo.type==="VALID"))At=conv2dByMatMul({x:tt,filter:st,convInfo:vt,backend:Ye,bias:rt,activation:pt,preluActivationWeights:it,leakyreluAlpha:ft});else if(env().getBool("WEBGL_CONV_IM2COL")&&tt.shape[0]===1)At=conv2dWithIm2Row({x:tt,filter:st,convInfo:vt,backend:Ye,bias:rt,activation:pt,preluActivationWeights:it,leakyreluAlpha:ft});else{const _t=rt!=null,Ct=it!=null,Tt=pt==="leakyrelu",St=pt?mapActivationToShaderProgram(pt,!1):null,Rt=new Conv2DProgram(vt,_t,St,Ct,Tt),Nt=[tt,st];if(rt&&Nt.push(rt),it&&Nt.push(it),Tt){const Pt=Ye.makeTensorInfo([],"float32",createScalarValue(ft,"float32"));Nt.push(Pt),Et.push(Pt)}At=Ye.runWebGLProgram(Rt,Nt,"float32")}const wt=reshape({inputs:{x:At},backend:Ye,attrs:{shape:vt.outShape}});return Et.push(At),Et.forEach(_t=>Ye.disposeIntermediateTensorInfo(_t)),wt}const fusedConv2DConfig={kernelName:FusedConv2D,backendName:"webgl",kernelFunc:fusedConv2d};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedDepthwiseConv2D(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,filter:st,bias:rt,preluActivationWeights:it}=Ke,{strides:ot,pad:at,dilations:lt,dimRoundingMode:ut,activation:ht,leakyreluAlpha:pt}=Je,ft=[];let xt=lt;xt==null&&(xt=[1,1]),assert$2(eitherStridesOrDilationsAreOne(ot,xt),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${ot} and dilations '${xt}'`);const vt=computeConv2DInfo(tt.shape,st.shape,ot,xt,at,ut,!0),At=env().getBool("WEBGL_PACK_DEPTHWISECONV")&&vt.strideWidth<=2&&vt.outChannels/vt.inChannels===1,Et=ht?mapActivationToShaderProgram(ht,At):null,wt=[tt,st],_t=rt!=null,Ct=it!=null,Tt=ht==="leakyrelu";if(_t&&wt.push(rt),Ct&&wt.push(it),Tt){const Nt=Ye.makeTensorInfo([],"float32",createScalarValue(pt,"float32"));wt.push(Nt),ft.push(Nt)}let St;At?St=new DepthwiseConvPacked2DProgram(vt,_t,Et,Ct,Tt):St=new DepthwiseConv2DProgram(vt,_t,Et,Ct,Tt);const Rt=Ye.runWebGLProgram(St,wt,"float32");return ft.forEach(Nt=>Ye.disposeIntermediateTensorInfo(Nt)),Rt}const fusedDepthwiseConv2DConfig={kernelName:FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:fusedDepthwiseConv2D};class GatherNDProgram{constructor(Ke,Ye,Je){this.sliceDim=Ke,this.strides=Ye,this.variableNames=["x","indices"],this.outputShape=Je;const tt=getCoordsDataType(Ye.length),st=getCoordsDataType(Je.length),rt=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        ${tt} strides = ${tt}(${this.strides});
         void main() {
          ${st} coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < ${this.sliceDim}; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * ${rt};
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherNd(Xe){const{inputs:Ke,backend:Ye}=Xe,{params:Je,indices:tt}=Ke,st=tt.shape,rt=st[st.length-1],[it,ot,at,lt]=prepareAndValidate(Je,tt),ut=reshape({inputs:{x:tt},backend:Ye,attrs:{shape:[ot,rt]}}),ht=reshape({inputs:{x:Je},backend:Ye,attrs:{shape:[sizeFromShape(Je.shape)/at,at]}}),pt=new GatherNDProgram(rt,lt,[ot,at]),ft=Ye.runWebGLProgram(pt,[ht,ut],ht.dtype),xt=reshape({inputs:{x:ft},backend:Ye,attrs:{shape:it}});return Ye.disposeIntermediateTensorInfo(ut),Ye.disposeIntermediateTensorInfo(ht),Ye.disposeIntermediateTensorInfo(ft),xt}const gatherNdConfig={kernelName:GatherNd,backendName:"webgl",kernelFunc:gatherNd};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GatherProgram{constructor(Ke,Ye){this.variableNames=["A","indices"],this.outputShape=Ye,this.rank=Ye.length;const Je=getCoordsDataType(this.rank),tt=getSourceCoords$1(Ke);this.userCode=`
      void main() {
        ${Je} resRC = getOutputCoords();
        setOutput(getA(${tt}));
      }
    `}}function getSourceCoords$1(Xe,Ke){const Ye=["resRC.x","resRC.y","resRC.z","resRC.w"],Je=[];for(let tt=0;tt<Xe.length;tt++)tt===2?Je.push("int(getIndices(resRC.x, resRC.z))"):Je.push(`${Ye[tt]}`);return Je.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherV2(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,indices:st}=Ke,{axis:rt,batchDims:it}=Je,ot=parseAxisParam(rt,tt.shape)[0],at=collectGatherOpShapeInfo(tt,st,ot,it),lt=sizeFromShape(st.shape),ut=[],ht=reshape({inputs:{x:tt},backend:Ye,attrs:{shape:[at.batchSize,at.outerSize,at.dimSize,at.sliceSize]}}),pt=reshape({inputs:{x:st},backend:Ye,attrs:{shape:[at.batchSize,lt/at.batchSize]}});ut.push(ht),ut.push(pt);const ft=[at.batchSize,at.outerSize,lt/at.batchSize,at.sliceSize];if(Ye.shouldExecuteOnCPU([tt,st])||tt.dtype==="string"){const Et=Ye.bufferSync(pt),wt=Ye.bufferSync(ht),_t=gatherV2ImplCPU(wt,Et,ft);return ut.forEach(Ct=>Ye.disposeIntermediateTensorInfo(Ct)),Ye.makeTensorInfo(at.outputShape,_t.dtype,_t.values)}const xt=new GatherProgram(ht.shape,ft),vt=Ye.runWebGLProgram(xt,[ht,pt],ht.dtype);ut.push(vt);const At=reshape({inputs:{x:vt},backend:Ye,attrs:{shape:at.outputShape}});return ut.forEach(Et=>Ye.disposeIntermediateTensorInfo(Et)),At}const gatherV2Config={kernelName:GatherV2,backendName:"webgl",kernelFunc:gatherV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GREATER="return float(a > b);",GREATER_PACKED=`
  return vec4(greaterThan(a, b));
`,greater=binaryKernelFunc({opSnippet:GREATER,packedOpSnippet:GREATER_PACKED,cpuKernelImpl:greaterImplCPU,dtype:"bool"}),greaterConfig={kernelName:Greater,backendName:"webgl",kernelFunc:greater};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GREATER_EQUAL="return float(a >= b);",GREATER_EQUAL_PACKED=`
  return vec4(greaterThanEqual(a, b));
`,greaterEqual=binaryKernelFunc({opSnippet:GREATER_EQUAL,packedOpSnippet:GREATER_EQUAL_PACKED,dtype:"bool"}),greaterEqualConfig={kernelName:GreaterEqual,backendName:"webgl",kernelFunc:greaterEqual};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ifft(Xe){const{inputs:Ke,backend:Ye}=Xe,{input:Je}=Ke;return fftImpl(Je,!0,Ye)}const ifftConfig={kernelName:IFFT,backendName:"webgl",kernelFunc:ifft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IS_FINITE="return float(!isnan(x) && !isinf(x));",isFinite$1=unaryKernelFunc({opSnippet:IS_FINITE,dtype:"bool"}),isFiniteConfig={kernelName:IsFinite,backendName:"webgl",kernelFunc:isFinite$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IS_INF="return float(isinf(x));",isInf=unaryKernelFunc({opSnippet:IS_INF,dtype:"bool"}),isInfConfig={kernelName:IsInf,backendName:"webgl",kernelFunc:isInf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IS_NAN="return float(isnan(x));",isNaN$1=unaryKernelFunc({opSnippet:IS_NAN,dtype:"bool"}),isNaNConfig={kernelName:IsNan,backendName:"webgl",kernelFunc:isNaN$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LESS="return float(a < b);",LESS_PACKED=`
  return vec4(lessThan(a, b));
`,less=binaryKernelFunc({opSnippet:LESS,packedOpSnippet:LESS_PACKED,cpuKernelImpl:lessImplCPU,dtype:"bool"}),lessConfig={kernelName:Less,backendName:"webgl",kernelFunc:less};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LESS_EQUAL="return float(a <= b);",LESS_EQUAL_PACKED=`
  return vec4(lessThanEqual(a, b));
`,lessEqual=binaryKernelFunc({opSnippet:LESS_EQUAL,packedOpSnippet:LESS_EQUAL_PACKED,dtype:"bool"}),lessEqualConfig={kernelName:LessEqual,backendName:"webgl",kernelFunc:lessEqual};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function linSpace(Xe){const{backend:Ke,attrs:Ye}=Xe,{start:Je,stop:tt,num:st}=Ye,rt=linSpaceImplCPU(Je,tt,st);return Ke.makeTensorInfo([rt.length],"float32",rt)}const linSpaceConfig={kernelName:LinSpace,backendName:"webgl",kernelFunc:linSpace};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOG=`if (x < 0.0) return NAN;
  return log(x);`,LOG_PACKED=`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,log$2=unaryKernelFunc({opSnippet:LOG,packedOpSnippet:LOG_PACKED,cpuKernelImpl:logImplCPU}),logConfig={kernelName:Log,backendName:"webgl",kernelFunc:log$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOG1P="return log(1.0 + x);",log1p=unaryKernelFunc({opSnippet:LOG1P}),log1pConfig={kernelName:Log1p,backendName:"webgl",kernelFunc:log1p};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOGICAL_AND="return float(a >= 1.0 && b >= 1.0);",LOGICAL_AND_PACKED=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,logicalAnd=binaryKernelFunc({opSnippet:LOGICAL_AND,packedOpSnippet:LOGICAL_AND_PACKED,dtype:"bool"}),logicalAndConfig={kernelName:LogicalAnd,backendName:"webgl",kernelFunc:logicalAnd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOGICAL_NOT="return float(!(x >= 1.0));",logicalNot=unaryKernelFunc({opSnippet:LOGICAL_NOT}),logicalNotConfig={kernelName:LogicalNot,backendName:"webgl",kernelFunc:logicalNot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOGICAL_OR="return float(a >= 1.0 || b >= 1.0);",LOGICAL_OR_PACKED=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,logicalOr=binaryKernelFunc({opSnippet:LOGICAL_OR,packedOpSnippet:LOGICAL_OR_PACKED,dtype:"bool"}),logicalOrConfig={kernelName:LogicalOr,backendName:"webgl",kernelFunc:logicalOr};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LRNProgram{constructor(Ke,Ye,Je,tt,st){this.variableNames=["x"],this.outputShape=[];const rt=Ye,it=Ke[3]-1;this.outputShape=Ke;let ot;const at=`float(${Je}) + float(${tt}) * sum`;st===.5?ot=`inversesqrt(${at})`:st===1?ot=`1.0/(${at})`:ot=`exp(log(${at}) * float(-${st}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${rt}; j <= ${rt}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${it}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${ot};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LRNPackedProgram{constructor(Ke,Ye,Je,tt,st){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const rt=Ye,it=Ke[3]-1;this.outputShape=Ke;let ot;const at=`float(${Je}) + float(${tt}) * sum`;st===.5?ot=`inversesqrt(${at})`:st===1?ot=`1.0/(${at})`:ot=`exp(log(${at}) * float(-${st}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${rt};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${rt}; j <= ${rt}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${it}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${ot};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lrn=Xe=>{const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{depthRadius:st,bias:rt,alpha:it,beta:ot}=Je,at=env().getBool("WEBGL_PACK_NORMALIZATION")?new LRNPackedProgram(tt.shape,st,rt,it,ot):new LRNProgram(tt.shape,st,rt,it,ot);return Ye.runWebGLProgram(at,[tt],tt.dtype)},LRNConfig={kernelName:LRN,backendName:"webgl",kernelFunc:lrn};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LRNGradProgram{constructor(Ke,Ye,Je,tt,st){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=Ke,this.depth=Ke[3],this.depthRadius=Ye,this.bias=Je,this.alpha=tt,this.beta=st,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${Ye})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${Ye} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${tt}) * norm + float(${Je});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${tt})
                * float(${st})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${st});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lrnGrad=Xe=>{const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,y:st,dy:rt}=Ke,{depthRadius:it,bias:ot,alpha:at,beta:lt}=Je,ut=new LRNGradProgram(tt.shape,it,ot,at,lt);return Ye.runWebGLProgram(ut,[tt,st,rt],tt.dtype)},LRNGradConfig={kernelName:LRNGrad,backendName:"webgl",kernelFunc:lrnGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxImpl(Xe,Ke,Ye,Je){const tt=sizeFromShape(Ke),rt=sizeFromShape(Xe.shape)/tt,it=reshape({inputs:{x:Xe},attrs:{shape:[rt,tt]},backend:Je}),ot=reduce(it,Xe.dtype,"max",Je),at=reshape({inputs:{x:ot},attrs:{shape:Ye},backend:Je});return Je.disposeIntermediateTensorInfo(it),Je.disposeIntermediateTensorInfo(ot),at}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function max$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{reductionIndices:st,keepDims:rt}=Je,it=tt.shape.length,ot=parseAxisParam(st,tt.shape);let at=ot;const lt=getAxesPermutation(at,it),ut=lt!=null,ht=Ye.shouldExecuteOnCPU([tt]);let pt=tt;if(ut){if(ht){const wt=Ye.texData.get(pt.dataId).values,_t=new Array(it);for(let St=0;St<_t.length;St++)_t[St]=tt.shape[lt[St]];const Ct=transposeImplCPU(wt,tt.shape,tt.dtype,lt,_t);pt=Ye.makeTensorInfo(_t,tt.dtype);const Tt=Ye.texData.get(pt.dataId);Tt.values=Ct}else pt=transposeImpl(tt,lt,Ye);at=getInnerMostAxes(at.length,it)}assertAxesAreInnerMostDims("max",at,it);const[ft,xt]=computeOutAndReduceShapes(pt.shape,at);let vt=ft;rt&&(vt=expandShapeToKeepDim(ft,ot));let At;if(ht){const wt=Ye.texData.get(pt.dataId).values,_t=maxImplCPU(wt,sizeFromShape(xt),vt,tt.dtype);At=Ye.makeTensorInfo(vt,tt.dtype);const Ct=Ye.texData.get(At.dataId);Ct.values=_t}else At=maxImpl(pt,xt,vt,Ye);return ut&&Ye.disposeIntermediateTensorInfo(pt),At}const maxConfig={kernelName:Max,backendName:"webgl",kernelFunc:max$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MAXIMUM=CHECK_NAN_SNIPPET$1+`
  return max(a, b);
`,MAXIMUM_PACKED=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+CHECK_NAN_SNIPPET+`
  return result;
`,maximum=binaryKernelFunc({opSnippet:MAXIMUM,packedOpSnippet:MAXIMUM_PACKED,cpuKernelImpl:maximumImplCPU}),maximumConfig={kernelName:Maximum$1,backendName:"webgl",kernelFunc:maximum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke;assertNotComplex(tt,"maxPool");const{filterSize:st,strides:rt,pad:it,dimRoundingMode:ot}=Je,at=1;assert$2(eitherStridesOrDilationsAreOne(rt,at),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${rt} and dilations '${at}'`);const lt=computePool2DInfo(tt.shape,st,rt,at,it,ot);if(lt.filterWidth===1&&lt.filterHeight===1&&arraysEqual(lt.inShape,lt.outShape))return identity$3({inputs:{x:tt},backend:Ye});const ut=new Pool2DProgram(lt,"max",!1);return Ye.runWebGLProgram(ut,[tt],tt.dtype)}const maxPoolConfig={kernelName:MaxPool,backendName:"webgl",kernelFunc:maxPool};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3d(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{filterSize:st,strides:rt,pad:it,dataFormat:ot,dimRoundingMode:at}=Je,lt=[1,1,1],ut=computePool3DInfo(tt.shape,st,rt,lt,it,at,ot),ht=new Pool3DProgram(ut,"max",!1);return Ye.runWebGLProgram(ht,[tt],tt.dtype)}const maxPool3DConfig={kernelName:MaxPool3D,backendName:"webgl",kernelFunc:maxPool3d};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MaxPool2DBackpropProgram{constructor(Ke){this.variableNames=["dy","maxPos"],this.outputShape=Ke.inShape;const Ye=Ke.strideHeight,Je=Ke.strideWidth,tt=Ke.dilationHeight,st=Ke.effectiveFilterHeight,rt=Ke.effectiveFilterWidth,it=st-1-Ke.padInfo.top,ot=rt-1-Ke.padInfo.left,at=st*rt-1;this.userCode=`
      const ivec2 pads = ivec2(${it}, ${ot});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${st};
          wR += ${tt}) {
          float dyR = float(dyRCorner + wR) / ${Ye}.0;

          if (dyR < 0.0 || dyR >= ${Ke.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${rt}; wC++) {
            float dyC = float(dyCCorner + wC) / ${Je}.0;

            if (dyC < 0.0 || dyC >= ${Ke.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${at} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${rt} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class MaxPool3DBackpropProgram{constructor(Ke){this.variableNames=["dy","maxPos"],this.outputShape=Ke.inShape;const Ye=Ke.strideDepth,Je=Ke.strideHeight,tt=Ke.strideWidth,st=Ke.dilationDepth,rt=Ke.dilationHeight,it=Ke.dilationWidth,ot=Ke.effectiveFilterDepth,at=Ke.effectiveFilterHeight,lt=Ke.effectiveFilterWidth,ut=ot-1-Ke.padInfo.front,ht=at-1-Ke.padInfo.top,pt=lt-1-Ke.padInfo.left,ft=ot*at*lt-1;this.userCode=`
      const ivec3 pads = ivec3(${ut}, ${ht}, ${pt});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${ot};
           wD += ${st}) {
          float dyD = float(dyDCorner + wD) / ${Ye}.0;

          if (dyD < 0.0 || dyD >= ${Ke.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${at};
              wR += ${rt}) {
            float dyR = float(dyRCorner + wR) / ${Je}.0;

            if (dyR < 0.0 || dyR >= ${Ke.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${lt};
                wC += ${it}) {
              float dyC = float(dyCCorner + wC) / ${tt}.0;

              if (dyC < 0.0 || dyC >= ${Ke.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${ft} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${at} * ${lt} +
                  wR * ${lt} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3DGrad(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{dy:tt,input:st}=Ke,rt=st,{filterSize:it,strides:ot,pad:at,dimRoundingMode:lt}=Je,ut=[1,1,1],ht=computePool3DInfo(rt.shape,it,ot,ut,at,lt),pt=new Pool3DProgram(ht,"max",!0),ft=Ye.runWebGLProgram(pt,[rt],rt.dtype),xt=new MaxPool3DBackpropProgram(ht),vt=Ye.runWebGLProgram(xt,[tt,ft],rt.dtype);return Ye.disposeIntermediateTensorInfo(ft),vt}const maxPoolGrad3DConfig={kernelName:MaxPool3DGrad,backendName:"webgl",kernelFunc:maxPool3DGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolGrad(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{dy:tt,input:st,output:rt}=Ke,it=st;assertNotComplex([st,rt],"maxPoolGrad");const{filterSize:ot,strides:at,pad:lt,dimRoundingMode:ut}=Je,ht=computePool2DInfo(it.shape,ot,at,1,lt,ut),pt=!0,ft=new Pool2DProgram(ht,"max",pt),xt=Ye.runWebGLProgram(ft,[it],it.dtype),vt=new MaxPool2DBackpropProgram(ht),At=Ye.runWebGLProgram(vt,[tt,xt],it.dtype);return Ye.disposeIntermediateTensorInfo(xt),At}const maxPoolGradConfig={kernelName:MaxPoolGrad,backendName:"webgl",kernelFunc:maxPoolGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolWithArgmaxImpl(Xe,Ke,Ye,Je){let tt=new Pool2DProgram(Ye,"max",!1);const st=Je.runWebGLProgram(tt,[Xe],"float32");tt=new Pool2DProgram(Ye,"max",!0,!0,Ke);const rt=Je.runWebGLProgram(tt,[Xe],"float32");return[st,rt]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPoolWithArgmaxConfig={kernelName:MaxPoolWithArgmax,backendName:"webgl",kernelFunc:({inputs:Xe,attrs:Ke,backend:Ye})=>{const{x:Je}=Xe,{filterSize:tt,strides:st,pad:rt,includeBatchInIndex:it}=Ke,ot=Ye;assert$2(Je.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${Je.shape.length}.`);const at=[1,1];assert$2(eitherStridesOrDilationsAreOne(st,at),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${st} and dilations '${at}'`);const lt=computePool2DInfo(Je.shape,tt,st,at,rt),[ut,ht]=maxPoolWithArgmaxImpl(Je,it,lt,ot);return[ut,ht]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function meanImpl(Xe,Ke,Ye,Je){const tt=sizeFromShape(Ke),rt=sizeFromShape(Xe.shape)/tt,it=reshape({inputs:{x:Xe},attrs:{shape:[rt,tt]},backend:Je}),ot=reduce(it,"float32","mean",Je),at=reshape({inputs:{x:ot},attrs:{shape:Ye},backend:Je});return Je.disposeIntermediateTensorInfo(it),Je.disposeIntermediateTensorInfo(ot),at}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const meanConfig={kernelName:Mean,backendName:"webgl",kernelFunc:({inputs:Xe,attrs:Ke,backend:Ye})=>{const{x:Je}=Xe,{keepDims:tt,axis:st}=Ke,rt=Ye,it=Je.shape.length,ot=parseAxisParam(st,Je.shape);let at=ot;const lt=getAxesPermutation(at,it),ut=lt!=null,ht=rt.shouldExecuteOnCPU([Je]),pt=[];let ft=Je;if(ut){if(ht){const _t=rt.texData.get(ft.dataId).values,Ct=new Array(it);for(let Rt=0;Rt<Ct.length;Rt++)Ct[Rt]=Je.shape[lt[Rt]];const Tt=transposeImplCPU(_t,Je.shape,Je.dtype,lt,Ct);ft=rt.makeTensorInfo(Ct,Je.dtype);const St=rt.texData.get(ft.dataId);St.values=Tt}else ft=transposeImpl(Je,lt,rt);pt.push(ft),at=getInnerMostAxes(at.length,it)}assertAxesAreInnerMostDims("sum",at,it);const[xt,vt]=computeOutAndReduceShapes(ft.shape,at);let At=xt;tt&&(At=expandShapeToKeepDim(xt,ot));const Et=meanImpl(ft,vt,At,rt);for(const wt of pt)rt.disposeIntermediateTensorInfo(wt);return Et}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function min$1(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st,keepDims:rt}=Je,it=tt.shape.length,ot=parseAxisParam(st,tt.shape);let at=ot;const lt=getAxesPermutation(at,it);let ut=tt;lt!=null&&(ut=transpose({inputs:{x:tt},backend:Ye,attrs:{perm:lt}}),at=getInnerMostAxes(at.length,tt.shape.length)),assertAxesAreInnerMostDims("min",at,it);const[ht,pt]=computeOutAndReduceShapes(ut.shape,at),ft=sizeFromShape(pt),xt=reshape({inputs:{x:ut},backend:Ye,attrs:{shape:[-1,ft]}}),vt=reduce(xt,xt.dtype,"min",Ye);let At;if(rt){const Et=expandShapeToKeepDim(ht,ot);At=reshape({inputs:{x:vt},backend:Ye,attrs:{shape:Et}})}else At=reshape({inputs:{x:vt},backend:Ye,attrs:{shape:ht}});return Ye.disposeIntermediateTensorInfo(xt),Ye.disposeIntermediateTensorInfo(vt),lt!=null&&Ye.disposeIntermediateTensorInfo(ut),At}const minConfig={kernelName:Min,backendName:"webgl",kernelFunc:min$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MINIMUM=CHECK_NAN_SNIPPET$1+`
  return min(a, b);
`,MINIMUM_PACKED=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+CHECK_NAN_SNIPPET+`
  return result;
`,minimum=binaryKernelFunc({opSnippet:MINIMUM,packedOpSnippet:MINIMUM_PACKED,cpuKernelImpl:minimumImplCPU}),minimumConfig={kernelName:Minimum$1,backendName:"webgl",kernelFunc:minimum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MirrorPadProgram{constructor(Ke,Ye,Je){this.variableNames=["x"],this.outputShape=Ye.map((lt,ut)=>lt[0]+Ke[ut]+lt[1]);const tt=Ke.length,st=getCoordsDataType(tt),rt=Ye.map(lt=>lt[0]).join(","),it=Ye.map((lt,ut)=>lt[0]+Ke[ut]).join(","),ot=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,tt),at=Je==="reflect"?0:1;if(tt===1){this.userCode=`
        int start = ${rt};
        int end = ${it};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${at};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${at};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${st} start = ${st}(${rt});
      ${st} end = ${st}(${it});

      void main() {
        ${st} outC = getOutputCoords();
        for (int i = 0; i < ${tt}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${at};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${at};
          }
        }
        ${st} coords = outC - start;
        setOutput(getX(${ot}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MirrorPadPackedProgram{constructor(Ke,Ye,Je){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ye.map((ft,xt)=>ft[0]+Ke[xt]+ft[1]);const tt=Ke.length,st=getCoordsDataType(tt),rt=Ye.map(ft=>ft[0]).join(","),it=Ye.map((ft,xt)=>ft[0]+Ke[xt]).join(","),ot=getChannels("rc",tt),at=getChannels("source",tt),lt=`${ot[tt-1]} < ${this.outputShape[tt-1]}`,ut=tt===1?"source":`vec2(${at.slice(-2).join()})`,ht=Je==="reflect"?0:1;let pt="";if(tt===1){const ft=`
        ${st} source = rc;
        if (source < start) {
          source = start * 2 - source - ${ht};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${ht};
        }
        source -= start;
      `;pt=`
        ${st} rc = outputLoc;
        ${ft}
        result[0] = getChannel(getX(${at.join()}), ${ut});
        ${ot[tt-1]} += 1;
        if(${lt}) {
          ${ft}
          result[1] = getChannel(getX(${at.join()}), ${ut});
        }
      `}else{const ft=`
        ${st} source = rc;
        ${st} lt = ${st}(lessThan(source, start));
        ${st} gte = ${st}(greaterThanEqual(source, end));
        ${st} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${ht}) +
                gte * ((end - 1) * 2 - source + ${ht});
        source -= start;
      `;pt=`
        ${st} rc = outputLoc;
        ${ft}
        result[0] = getChannel(getX(${at.join()}), ${ut});
        ${ot[tt-1]} += 1;
        if(${lt}) {
          ${ft}
          result[1] = getChannel(getX(${at.join()}), ${ut});
        }
        rc = outputLoc;
        ${ot[tt-2]} += 1;
        if(${ot[tt-2]} < ${this.outputShape[tt-2]}) {
          ${ft}
          result[2] = getChannel(getX(${at.join()}), ${ut});
          ${ot[tt-1]} += 1;
          if(${lt}) {
            ${ft}
            result[3] = getChannel(getX(${at.join()}), ${ut});
          }
        }
      `}this.userCode=`
      const ${st} start = ${st}(${rt});
      const ${st} end = ${st}(${it});

      void main() {
        ${st} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${pt}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mirrorPadKernelFunc=({inputs:Xe,backend:Ke,attrs:Ye})=>{const{x:Je}=Xe,{paddings:tt,mode:st}=Ye,rt=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new MirrorPadPackedProgram(Je.shape,tt,st):new MirrorPadProgram(Je.shape,tt,st);return Ke.runWebGLProgram(rt,[Je],Je.dtype)},mirrorPadConfig={kernelName:MirrorPad,backendName:"webgl",kernelFunc:mirrorPadKernelFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MOD=`if (b == 0.0) return NAN;
  return mod(a, b);`,MOD_PACKED=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+CHECK_NAN_SNIPPET+`
  return result;
`,mod=binaryKernelFunc({opSnippet:MOD,packedOpSnippet:MOD_PACKED}),modConfig={kernelName:Mod,backendName:"webgl",kernelFunc:mod};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MultinomialProgram{constructor(Ke,Ye,Je){this.variableNames=["probs"],this.outputShape=[Ke,Je],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${Ye-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${Ye-1}));
      }
    `}getCustomSetupFunc(Ke){return(Ye,Je)=>{this.seedLoc==null&&(this.seedLoc=Ye.getUniformLocation(Je,"seed")),Ye.gl.uniform1f(this.seedLoc,Ke)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DIV=`
if (a == b) {
  return 1.0;
};
return a / b;`,DIV_PACKED=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,realDiv=binaryKernelFunc({opSnippet:DIV,packedOpSnippet:DIV_PACKED,checkOutOfBounds:!0}),realDivConfig={kernelName:RealDiv,backendName:"webgl",kernelFunc:realDiv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SUB="return a - b;",sub=binaryKernelFunc({opSnippet:SUB,packedOpSnippet:SUB,supportsComplex:!0,cpuKernelImpl:subImplCPU}),subConfig={kernelName:Sub,backendName:"webgl",kernelFunc:sub};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softmax(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{logits:tt}=Ke,{dim:st}=Je,rt=parseAxisParam([st],tt.shape),it=max$1({inputs:{x:tt},backend:Ye,attrs:{reductionIndices:rt,keepDims:!1}}),ot=expandShapeToKeepDim(it.shape,rt),at=reshape({inputs:{x:it},backend:Ye,attrs:{shape:ot}}),lt=sub({inputs:{a:tt,b:at},backend:Ye}),ut=exp({inputs:{x:lt},backend:Ye}),ht=sum({inputs:{x:ut},backend:Ye,attrs:{axis:rt,keepDims:!1}}),pt=reshape({inputs:{x:ht},backend:Ye,attrs:{shape:ot}}),ft=realDiv({inputs:{a:ut,b:pt},backend:Ye});return Ye.disposeIntermediateTensorInfo(it),Ye.disposeIntermediateTensorInfo(at),Ye.disposeIntermediateTensorInfo(lt),Ye.disposeIntermediateTensorInfo(ut),Ye.disposeIntermediateTensorInfo(ht),Ye.disposeIntermediateTensorInfo(pt),ft}const softmaxConfig={kernelName:Softmax$2,backendName:"webgl",kernelFunc:softmax};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function multinomial(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{logits:tt}=Ke,{numSamples:st,seed:rt,normalized:it}=Je,ot=it?tt:softmax({inputs:{logits:tt},backend:Ye,attrs:{dim:tt.shape.length-1}}),at=ot.shape[0],lt=ot.shape[1],ut=new MultinomialProgram(at,lt,st),ht=ut.getCustomSetupFunc(rt),pt=Ye.runWebGLProgram(ut,[ot],"int32",ht);return it||Ye.disposeIntermediateTensorInfo(ot),pt}const multinomialConfig={kernelName:Multinomial,backendName:"webgl",kernelFunc:multinomial};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NEG="return -x;";function neg(Xe){const{inputs:Ke,backend:Ye}=Xe,{x:Je}=Ke;if(Ye.shouldExecuteOnCPU([Je])){const st=Ye.texData.get(Je.dataId),[rt,it]=negImplCPU(st.values,Je.shape,Je.dtype);return Ye.makeTensorInfo(it,Je.dtype,rt)}let tt;return env().getBool("WEBGL_PACK_UNARY_OPERATIONS")?tt=new UnaryOpPackedProgram(Je.shape,NEG):tt=new UnaryOpProgram(Je.shape,NEG),Ye.runWebGLProgram(tt,[Je],Je.dtype)}const negConfig={kernelName:Neg,backendName:"webgl",kernelFunc:neg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV3Impl=nonMaxSuppressionV3Impl$2;function nonMaxSuppressionV3(Xe){warn$1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{boxes:tt,scores:st}=Ke,{maxOutputSize:rt,iouThreshold:it,scoreThreshold:ot}=Je,at=Ye.readSync(tt.dataId),lt=Ye.readSync(st.dataId),{selectedIndices:ut}=nonMaxSuppressionV3Impl(at,lt,rt,it,ot);return Ye.makeTensorInfo([ut.length],"int32",new Int32Array(ut))}const nonMaxSuppressionV3Config={kernelName:NonMaxSuppressionV3,backendName:"webgl",kernelFunc:nonMaxSuppressionV3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV4Impl=nonMaxSuppressionV4Impl$2;function nonMaxSuppressionV4(Xe){warn$1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{boxes:tt,scores:st}=Ke,{maxOutputSize:rt,iouThreshold:it,scoreThreshold:ot,padToMaxOutputSize:at}=Je,lt=Ye.readSync(tt.dataId),ut=Ye.readSync(st.dataId),{selectedIndices:ht,validOutputs:pt}=nonMaxSuppressionV4Impl(lt,ut,rt,it,ot,at);return[Ye.makeTensorInfo([ht.length],"int32",new Int32Array(ht)),Ye.makeTensorInfo([],"int32",new Int32Array([pt]))]}const nonMaxSuppressionV4Config={kernelName:NonMaxSuppressionV4,backendName:"webgl",kernelFunc:nonMaxSuppressionV4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV5Impl=nonMaxSuppressionV5Impl$2;function nonMaxSuppressionV5(Xe){warn$1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{boxes:tt,scores:st}=Ke,{maxOutputSize:rt,iouThreshold:it,scoreThreshold:ot,softNmsSigma:at}=Je,lt=Ye.readSync(tt.dataId),ut=Ye.readSync(st.dataId),ht=rt,pt=it,ft=ot,xt=at,{selectedIndices:vt,selectedScores:At}=nonMaxSuppressionV5Impl(lt,ut,ht,pt,ft,xt);return[Ye.makeTensorInfo([vt.length],"int32",new Int32Array(vt)),Ye.makeTensorInfo([At.length],"float32",new Float32Array(At))]}const nonMaxSuppressionV5Config={kernelName:NonMaxSuppressionV5,backendName:"webgl",kernelFunc:nonMaxSuppressionV5};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OneHotProgram{constructor(Ke,Ye,Je,tt){this.variableNames=["indices"],this.outputShape=[Ke,Ye],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${tt}), float(${Je}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oneHot=Xe=>{const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{indices:tt}=Ke,{depth:st,onValue:rt,offValue:it}=Je,ot=sizeFromShape(tt.shape),at=new OneHotProgram(ot,st,rt,it),lt=reshape({inputs:{x:tt},backend:Ye,attrs:{shape:[ot]}}),ut=Ye.runWebGLProgram(at,[lt],tt.dtype);Ye.disposeIntermediateTensorInfo(lt);const ht=[...tt.shape,st],pt=reshape({inputs:{x:ut},backend:Ye,attrs:{shape:ht}});return Ye.disposeIntermediateTensorInfo(ut),pt},oneHotConfig={kernelName:OneHot,backendName:"webgl",kernelFunc:oneHot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zerosLike(Xe){const{inputs:Ke,backend:Ye}=Xe,{x:Je}=Ke;if(Je.dtype==="complex64"){const tt=real({inputs:{input:Je},backend:Ye}),st=zerosLike({inputs:{x:tt},backend:Ye}),rt=imag({inputs:{input:Je},backend:Ye}),it=zerosLike({inputs:{x:rt},backend:Ye}),ot=complex({inputs:{real:st,imag:it},backend:Ye});return Ye.disposeIntermediateTensorInfo(tt),Ye.disposeIntermediateTensorInfo(st),Ye.disposeIntermediateTensorInfo(rt),Ye.disposeIntermediateTensorInfo(it),ot}else return fill({attrs:{shape:Je.shape,dtype:Je.dtype,value:Je.dtype==="string"?"":0},backend:Ye})}const zerosLikeConfig={kernelName:ZerosLike,backendName:"webgl",kernelFunc:zerosLike};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function onesLike(Xe){const{inputs:Ke,backend:Ye}=Xe,{x:Je}=Ke;if(Je.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(Je.dtype==="complex64"){const tt=real({inputs:{input:Je},backend:Ye}),st=onesLike({inputs:{x:tt},backend:Ye}),rt=imag({inputs:{input:Je},backend:Ye}),it=zerosLike({inputs:{x:rt},backend:Ye}),ot=complex({inputs:{real:st,imag:it},backend:Ye});return Ye.disposeIntermediateTensorInfo(tt),Ye.disposeIntermediateTensorInfo(st),Ye.disposeIntermediateTensorInfo(rt),Ye.disposeIntermediateTensorInfo(it),ot}else return fill({attrs:{shape:Je.shape,dtype:Je.dtype,value:1},backend:Ye})}const onesLikeConfig={kernelName:OnesLike,backendName:"webgl",kernelFunc:onesLike};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pack(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{axis:tt}=Je;if(Ke.length===1)return expandDims({inputs:{input:Ke[0]},backend:Ye,attrs:{dim:tt}});const st=Ke[0].shape,rt=Ke[0].dtype;Ke.forEach(lt=>{assertShapesMatch(st,lt.shape,"All tensors passed to stack must have matching shapes"),assert$2(rt===lt.dtype,()=>"All tensors passed to stack must have matching dtypes")});const it=[],ot=Ke.map(lt=>{const ut=expandDims({inputs:{input:lt},backend:Ye,attrs:{dim:tt}});return it.push(ut),ut}),at=concat({inputs:ot,backend:Ye,attrs:{axis:tt}});return it.forEach(lt=>Ye.disposeIntermediateTensorInfo(lt)),at}const packConfig={kernelName:Pack,backendName:"webgl",kernelFunc:pack};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PadProgram{constructor(Ke,Ye,Je){this.variableNames=["x"],this.outputShape=Ye.map((at,lt)=>at[0]+Ke[lt]+at[1]);const tt=Ke.length,st=getCoordsDataType(tt),rt=Ye.map(at=>at[0]).join(","),it=Ye.map((at,lt)=>at[0]+Ke[lt]).join(","),ot=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,tt);if(tt===1){this.userCode=`
        int start = ${rt};
        int end = ${it};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(${Je}));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${st} start = ${st}(${rt});
      ${st} end = ${st}(${it});

      void main() {
        ${st} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(${Je}));
        } else {
          ${st} coords = outC - start;
          setOutput(getX(${ot}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PadPackedProgram{constructor(Ke,Ye,Je){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ye.map((xt,vt)=>xt[0]+Ke[vt]+xt[1]);const tt=Ke.length,st=getCoordsDataType(tt),rt=Ye.map(xt=>xt[0]).join(","),it=Ye.map((xt,vt)=>xt[0]+Ke[vt]).join(","),ot=getChannels("rc",tt),at=getChannels("source",tt),lt=`${ot[tt-1]} < ${this.outputShape[tt-1]}`,ut=tt===1?"source":`vec2(${at.slice(-2).join()})`,ht=[`${st} rc = outputLoc;`,`${ot[tt-1]} += 1;
       if(${lt}) {
      `,tt===1?"":`}
       rc = outputLoc;
       ${ot[tt-2]} += 1;
       if(${ot[tt-2]} < ${this.outputShape[tt-2]}) {`,tt===1?"":`  ${ot[tt-1]} += 1;
         if(${lt}) {`],pt=tt===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let ft="";for(let xt=0,vt=tt===1?2:4;xt<vt;xt++)ft+=`
        ${ht[xt]}
        if (${pt}) {
          result[${xt}] = float(${Je});
        } else {
          ${st} source = rc - start;
          result[${xt}] = getChannel(getX(${at.join()}), ${ut});
        }
      `;ft+=tt===1?"} ":"}}",this.userCode=`
      const ${st} start = ${st}(${rt});
      const ${st} end = ${st}(${it});

      void main() {
        ${st} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${ft}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const padV2=Xe=>{const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{paddings:st,constantValue:rt}=Je,it=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new PadPackedProgram(tt.shape,st,rt):new PadProgram(tt.shape,st,rt);return Ye.runWebGLProgram(it,[tt],tt.dtype)},padV2Config={kernelName:PadV2,backendName:"webgl",kernelFunc:padV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const POW=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,POW_PACKED=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+CHECK_NAN_SNIPPET+`
  return result;
`,pow=binaryKernelFunc({opSnippet:POW,packedOpSnippet:POW_PACKED}),powConfig={kernelName:Pow$1,backendName:"webgl",kernelFunc:pow};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prod(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{axis:st,keepDims:rt}=Je,it=tt.shape.length,ot=[],at=parseAxisParam(st,tt.shape);let lt=at;const ut=getAxesPermutation(lt,it);let ht=tt;ut!=null&&(ht=transpose({inputs:{x:tt},backend:Ye,attrs:{perm:ut}}),lt=getInnerMostAxes(lt.length,it),ot.push(ht)),assertAxesAreInnerMostDims("prod",lt,it);let pt;if(Ye.shouldExecuteOnCPU([ht])){const ft=Ye.texData.get(ht.dataId).values,{outVals:xt,outShape:vt,outDtype:At}=prodImplCPU(ht.shape,ht.dtype,ft,lt);pt=Ye.makeTensorInfo(vt,At,xt)}else{const[ft,xt]=computeOutAndReduceShapes(ht.shape,lt),vt=sizeFromShape(xt),At=reshape({inputs:{x:ht},backend:Ye,attrs:{shape:[-1,vt]}}),Et=sumOutType(tt.dtype),wt=reduce(At,Et,"prod",Ye);pt=reshape({inputs:{x:wt},backend:Ye,attrs:{shape:ft}}),ot.push(At),ot.push(wt)}if(rt){ot.push(pt);const ft=expandShapeToKeepDim(pt.shape,at);pt=reshape({inputs:{x:pt},backend:Ye,attrs:{shape:ft}})}return ot.forEach(ft=>Ye.disposeIntermediateTensorInfo(ft)),pt}const prodConfig={kernelName:Prod,backendName:"webgl",kernelFunc:prod};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const range$1=Xe=>{const{backend:Ke,attrs:Ye}=Xe,{start:Je,stop:tt,step:st,dtype:rt}=Ye,it=rangeImplCPU(Je,tt,st,rt);return Ke.makeTensorInfo([it.length],rt,it)},rangeConfig={kernelName:Range,backendName:"webgl",kernelFunc:range$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RECIPROCAL="return 1.0 / x;",reciprocal=unaryKernelFunc({opSnippet:RECIPROCAL}),reciprocalConfig={kernelName:Reciprocal,backendName:"webgl",kernelFunc:reciprocal};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RELU=CHECK_NAN_SNIPPET$2+`
  return (x < 0.0) ? 0.0 : x;
`,RELU_PACKED=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,relu=unaryKernelFunc({opSnippet:RELU,packedOpSnippet:RELU_PACKED}),reluConfig={kernelName:Relu$1,backendName:"webgl",kernelFunc:relu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RELU6=CHECK_NAN_SNIPPET$2+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,RELU6_PACKED=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,relu6=unaryKernelFunc({opSnippet:RELU6,packedOpSnippet:RELU6_PACKED}),relu6Config={kernelName:Relu6$1,backendName:"webgl",kernelFunc:relu6};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeBilinearProgram{constructor(Ke,Ye,Je,tt,st){this.variableNames=["A"],this.outputShape=[];const[rt,it,ot,at]=Ke;this.outputShape=[rt,Ye,Je,at];const lt=[tt&&Ye>1?it-1:it,tt&&Je>1?ot-1:ot],ut=[tt&&Ye>1?Ye-1:Ye,tt&&Je>1?Je-1:Je];let ht;st?ht="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":ht="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${lt[0]/ut[0]},
          ${lt[1]/ut[1]});
      const vec2 inputShapeRC = vec2(${it}.0, ${ot}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${ht};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeBilinearPackedProgram{constructor(Ke,Ye,Je,tt,st){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[rt,it,ot,at]=Ke;this.outputShape=[rt,Ye,Je,at];const lt=[tt&&Ye>1?it-1:it,tt&&Je>1?ot-1:ot],ut=[tt&&Ye>1?Ye-1:Ye,tt&&Je>1?Je-1:Je];let ht;st?ht="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":ht="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${lt[0]/ut[0]},
          ${lt[1]/ut[1]},
          ${lt[1]/ut[1]});
      const vec3 inputShapeRC = vec3(${it}.0, ${ot}.0,
                                     ${ot}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${ht};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${at-1};
        bool hasNextRow = coords.z < ${Je-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinear(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{images:tt}=Ke,{alignCorners:st,halfPixelCenters:rt,size:it}=Je,[ot,at]=it,lt=env().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ResizeBilinearPackedProgram(tt.shape,ot,at,st,rt):new ResizeBilinearProgram(tt.shape,ot,at,st,rt);return Ye.runWebGLProgram(lt,[tt],"float32")}const resizeBilinearConfig={kernelName:ResizeBilinear,backendName:"webgl",kernelFunc:resizeBilinear};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeBilinearBackpropProgram{constructor(Ke,Ye,Je){this.variableNames=["dy"],this.outputShape=[],this.outputShape=Ye;const[,tt,st]=Ye,[,rt,it]=Ke,ot=[Je&&rt>1?tt-1:tt,Je&&it>1?st-1:st],at=[Je&&rt>1?rt-1:rt,Je&&it>1?it-1:it],lt=ot[0]/at[0],ut=ot[1]/at[1],ht=1/lt,pt=1/ut,ft=Math.ceil(ht)*2+2,xt=Math.ceil(pt)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${lt});
        const float widthScale = float(${ut});

        const float invHeightScale = float(${ht});
        const float invWidthScale = float(${pt});

        const int winHeight = int(${ft});
        const int winWidth = int(${xt});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${rt}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${it}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${tt-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${st-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinearGrad(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{images:tt,dy:st}=Ke,{alignCorners:rt}=Je,it=new ResizeBilinearBackpropProgram(st.shape,tt.shape,rt);return Ye.runWebGLProgram(it,[st],st.dtype)}const resizeBilinearGradConfig={kernelName:ResizeBilinearGrad,backendName:"webgl",kernelFunc:resizeBilinearGrad};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeNearestNeighborProgram{constructor(Ke,Ye,Je,tt,st){this.variableNames=["A"],this.outputShape=[];const[rt,it,ot,at]=Ke;this.outputShape=[rt,Ye,Je,at];const lt=[tt&&Ye>1?it-1:it,tt&&Je>1?ot-1:ot],ut=[tt&&Ye>1?Ye-1:Ye,tt&&Je>1?Je-1:Je],ht=tt?"0.5":"0.0";let pt;st?pt="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":pt="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${lt[0]/ut[0]},
          ${lt[1]/ut[1]});
      const vec2 inputShapeRC = vec2(${it}.0, ${ot}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${pt};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${ht})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighbor(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{images:tt}=Ke,{alignCorners:st,halfPixelCenters:rt,size:it}=Je,[ot,at]=it,lt=new ResizeNearestNeighborProgram(tt.shape,ot,at,st,rt);return Ye.runWebGLProgram(lt,[tt],tt.dtype)}const resizeNearestNeighborConfig={kernelName:ResizeNearestNeighbor,backendName:"webgl",kernelFunc:resizeNearestNeighbor};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeNearestNeigborBackpropProgram{constructor(Ke,Ye,Je){this.variableNames=["dy"],this.outputShape=[],this.outputShape=Ye;const[,tt,st]=Ye,[,rt,it]=Ke,ot=[Je&&rt>1?tt-1:tt,Je&&it>1?st-1:st],at=[Je&&rt>1?rt-1:rt,Je&&it>1?it-1:it],lt=ot[0]/at[0],ut=ot[1]/at[1],ht=1/lt,pt=1/ut,ft=Math.ceil(ht)*2+2,xt=Math.ceil(pt)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${lt});
        const float widthScale = float(${ut});

        const float invHeightScale = float(${ht});
        const float invWidthScale = float(${pt});

        const int winHeight = int(${ft});
        const int winWidth = int(${xt});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${rt}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${it}) {
              continue;
            }

            float sourceFracRow =
              float(${ot[0]}) *
                (float(dyR) / float(${at[0]}));

            float sourceFracCol =
                float(${ot[1]}) *
                  (float(dyC) / float(${at[1]}));

            int sourceNearestRow = int(min(
                float(int(${tt}) - 1),
                ${Je} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${st}) - 1),
                ${Je} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighborGrad(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{images:tt,dy:st}=Ke,{alignCorners:rt}=Je,it=new ResizeNearestNeigborBackpropProgram(st.shape,tt.shape,rt);return Ye.runWebGLProgram(it,[st],st.dtype)}const resizeNearestNeighborGradConfig={kernelName:ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:resizeNearestNeighborGrad};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReverseProgram{constructor(Ke,Ye){this.variableNames=["x"];const Je=Ke.length;if(Je>4)throw new Error(`WebGL backend: Reverse of rank-${Je} tensor is not yet supported`);if(this.outputShape=Ke,Je===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${Ke[0]} - coord - 1));
        }
      `;return}const tt=it=>Ye.indexOf(it)!==-1&&Ke[it]!==1?`${Ke[it]} - coords[${it}] - 1`:`coords[${it}]`,st=Ke.map((it,ot)=>tt(ot)).join(","),rt=getCoordsDataType(Je);this.userCode=`
      void main() {
        ${rt} coords = getOutputCoords();
        setOutput(getX(${st}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReversePackedProgram{constructor(Ke,Ye){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const Je=Ke.length;if(Je>4)throw new Error(`WebGL backend: Reverse of rank-${Je} tensor is not yet supported`);this.outputShape=Ke;const tt=getChannels("rc",Je),st=`${tt[Je-1]} + 1 < ${this.outputShape[Je-1]}`,rt=`${tt[Je-2]} + 1 < ${this.outputShape[Je-2]}`,it=getCoordsDataType(Je);Je===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${Ke[0]} - rc - 1),
            ${Ke[0]} - rc - 1);
          if(${st}){
              result.g = getChannel(getX(${Ke[0]} - (rc  + 1) - 1),
                ${Ke[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${it} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${ot(tt.slice())};
          if(${st}){
            result.g = ${at(tt.slice())};
          }
          if(${rt}) {
            result.b = ${lt(tt.slice())};
            if(${st}) {
              result.a = ${ut(tt.slice())};
            }
          }
          setOutput(result);
        }
    `;function ot(ft){return ht(ft)}function at(ft){return ft[Je-1]="("+ft[Je-1]+" + 1)",ht(ft)}function lt(ft){return ft[Je-2]="("+ft[Je-2]+" + 1)",ht(ft)}function ut(ft){return ft[Je-1]="("+ft[Je-1]+" + 1)",ft[Je-2]="("+ft[Je-2]+" + 1)",ht(ft)}function ht(ft){const xt=Ke.map((Et,wt)=>pt(wt,ft)),vt=xt.join(","),At=xt.slice(-2).join(",");return`getChannel(getX(${vt}), vec2(${At}))`}function pt(ft,xt){return Ye.indexOf(ft)!==-1&&Ke[ft]!==1?`${Ke[ft]} - ${xt[ft]} - 1`:`${xt[ft]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{dims:st}=Je,rt=tt.shape.length,it=parseAxisParam(st,tt.shape);if(rt===0)return identity$3({inputs:{x:tt},backend:Ye});const ot=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ReversePackedProgram(tt.shape,it):new ReverseProgram(tt.shape,it);return Ye.runWebGLProgram(ot,[tt],tt.dtype)}const reverseConfig={kernelName:Reverse,backendName:"webgl",kernelFunc:reverse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RotateProgram{constructor(Ke,Ye,Je,tt){this.variableNames=["Image"],this.outputShape=[];const st=Ke[1],rt=Ke[2],it=Math.sin(Ye).toFixed(3),ot=Math.cos(Ye).toFixed(3);this.outputShape=Ke;const[at,lt]=getImageCenter(tt,st,rt),ut=at.toFixed(3),ht=lt.toFixed(3);let pt="";typeof Je=="number"?pt=`float outputValue = ${Je.toFixed(2)};`:pt=`
        vec3 fill = vec3(${Je.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - ${ut}) * ${ot} - (float(y) - ${ht}) * ${it};
          float coordYFloat = (float(x) - ${ut}) * ${it} + (float(y) - ${ht}) * ${ot};
          int coordX = int(round(coordXFloat + ${ut}));
          int coordY = int(round(coordYFloat + ${ht}));
          ${pt}
          if(coordX >= 0 && coordX < ${rt} && coordY >= 0 && coordY < ${st}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rotateWithOffsetConfig={kernelName:RotateWithOffset,backendName:"webgl",kernelFunc:({inputs:Xe,attrs:Ke,backend:Ye})=>{const{image:Je}=Xe,{radians:tt,fillValue:st,center:rt}=Ke,it=Ye,ot=new RotateProgram(Je.shape,tt,st,rt);return it.runWebGLProgram(ot,[Je],Je.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ROUND=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,round$1=unaryKernelFunc({opSnippet:ROUND}),roundConfig={kernelName:Round,backendName:"webgl",kernelFunc:round$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RSQRT="return inversesqrt(x);",rsqrt=unaryKernelFunc({opSnippet:RSQRT,cpuKernelImpl:rsqrtImplCPU}),rsqrtConfig={kernelName:Rsqrt,backendName:"webgl",kernelFunc:rsqrt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ScatterProgram{constructor(Ke,Ye,Je,tt,st,rt,it=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=rt;const ot=getCoordsDataType(st.length),at=getCoordsDataType(rt.length);let lt="";Je===1?lt="i":Je===2&&(lt="i, j");const ut=`getIndices(${lt})`;let ht="";tt===1?ht="i":tt===2&&(ht="i, coords[1]");const pt=`getUpdates(${ht})`,ft=Ye>1?"strides[j]":"strides";this.userCode=`
        ${ot} strides = ${ot}(${st});

        void main() {
          ${at} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${Ke}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${Ye}; j++) {
              int index = round(${ut});
              flattenedIndex += index * ${ft};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${pt};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scatterNd(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{indices:tt,updates:st}=Ke,{shape:rt}=Je,{sliceRank:it,numUpdates:ot,sliceSize:at,strides:lt,outputSize:ut}=calculateShapes(st,tt,rt),ht=[ut/at,at];if(ut===0)return Ye.makeTensorInfo(rt,tt.dtype);const pt=reshape({inputs:{x:tt},backend:Ye,attrs:{shape:[ot,it]}}),ft=reshape({inputs:{x:st},backend:Ye,attrs:{shape:[ot,at]}}),xt=Ye.makeTensorInfo([],"float32",new Float32Array([0])),vt=new ScatterProgram(ot,it,pt.shape.length,ft.shape.length,lt,ht),At=Ye.runWebGLProgram(vt,[ft,pt,xt],ft.dtype),Et=reshape({inputs:{x:At},backend:Ye,attrs:{shape:rt}});return Ye.disposeIntermediateTensorInfo(pt),Ye.disposeIntermediateTensorInfo(ft),Ye.disposeIntermediateTensorInfo(At),Ye.disposeIntermediateTensorInfo(xt),Et}const scatterNdConfig={kernelName:ScatterNd,backendName:"webgl",kernelFunc:scatterNd};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SelectProgram{constructor(Ke,Ye,Je){this.variableNames=["c","a","b"],this.outputShape=Ye;let tt,st;if(Je>4)throw Error(`Where for rank ${Je} is not yet supported`);if(Je===1)st="resRC",tt="resRC";else{const it=["resRC.x","resRC.y","resRC.z","resRC.w"],ot=[],at=[];for(let lt=0;lt<Ye.length;lt++)at.push(`${it[lt]}`),lt<Ke&&ot.push(`${it[lt]}`);tt=ot.join(),st=at.join()}const rt=getCoordsDataType(Je);this.userCode=`
      void main() {
        ${rt} resRC = getOutputCoords();
        float cVal = getC(${tt});
        if (cVal >= 1.0) {
          setOutput(getA(${st}));
        } else {
          setOutput(getB(${st}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function select$1(Xe){const{inputs:Ke,backend:Ye}=Xe,{condition:Je,t:tt,e:st}=Ke,rt=new SelectProgram(Je.shape.length,tt.shape,tt.shape.length);return Ye.runWebGLProgram(rt,[Je,tt,st],upcastType(tt.dtype,st.dtype))}const selectConfig={kernelName:Select$2,backendName:"webgl",kernelFunc:select$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SELU=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${SELU_SCALEALPHA};
  float scale = ${SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,selu=unaryKernelFunc({opSnippet:SELU}),seluConfig={kernelName:Selu$1,backendName:"webgl",kernelFunc:selu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIGMOID="return 1.0 / (1.0 + exp(-1.0 * x));",sigmoid=unaryKernelFunc({opSnippet:SIGMOID}),sigmoidConfig={kernelName:Sigmoid$1,backendName:"webgl",kernelFunc:sigmoid};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIGN=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,sign$1=unaryKernelFunc({opSnippet:SIGN}),signConfig={kernelName:Sign,backendName:"webgl",kernelFunc:sign$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIN=CHECK_NAN_SNIPPET_UNARY+`
  return sin(x);
`,sin=unaryKernelFunc({opSnippet:SIN}),sinConfig={kernelName:Sin,backendName:"webgl",kernelFunc:sin};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SINH=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,sinh=unaryKernelFunc({opSnippet:SINH}),sinhConfig={kernelName:Sinh,backendName:"webgl",kernelFunc:sinh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SOFTPLUS=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,softplus=unaryKernelFunc({opSnippet:SOFTPLUS}),softplusConfig={kernelName:Softplus$1,backendName:"webgl",kernelFunc:softplus};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const spaceToBatchND=Xe=>{const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{blockShape:st,paddings:rt}=Je;assert$2(tt.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const it=st.reduce((At,Et)=>At*Et),ot=[[0,0]];ot.push(...rt);for(let At=1+st.length;At<tt.shape.length;++At)ot.push([0,0]);const at=[],lt=padV2({inputs:{x:tt},backend:Ye,attrs:{paddings:ot,constantValue:0}}),ut=getReshaped(lt.shape,st,it,!1),ht=getPermuted(ut.length,st.length,!1),pt=getReshapedPermuted(lt.shape,st,it,!1),ft=reshape({inputs:{x:lt},backend:Ye,attrs:{shape:ut}}),xt=transpose({inputs:{x:ft},backend:Ye,attrs:{perm:ht}}),vt=reshape({inputs:{x:xt},backend:Ye,attrs:{shape:pt}});return at.push(lt),at.push(ft),at.push(xt),at.forEach(At=>Ye.disposeIntermediateTensorInfo(At)),vt},spaceToBatchNDConfig={kernelName:SpaceToBatchND,backendName:"webgl",kernelFunc:spaceToBatchND};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseToDense(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{sparseIndices:tt,sparseValues:st,defaultValue:rt}=Ke,{outputShape:it}=Je,{sliceRank:ot,numUpdates:at,strides:lt,outputSize:ut}=calculateShapes(st,tt,it),ht=!1,pt=new ScatterProgram(at,ot,tt.shape.length,st.shape.length,lt,[ut,1],ht),ft=Ye.runWebGLProgram(pt,[st,tt,rt],st.dtype),xt=reshape({inputs:{x:ft},backend:Ye,attrs:{shape:it}});return Ye.disposeIntermediateTensorInfo(ft),xt}const sparseToDenseConfig={kernelName:SparseToDense,backendName:"webgl",kernelFunc:sparseToDense};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function splitV(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{numOrSizeSplits:st,axis:rt}=Je,it=parseAxisParam(rt,tt.shape)[0],ot=prepareSplitSize(tt,st,it),at=tt.shape.length,lt=new Array(at).fill(0),ut=tt.shape.slice();return ot.map(ht=>{const pt=[...ut];pt[it]=ht;const ft=slice$2({inputs:{x:tt},backend:Ye,attrs:{begin:lt,size:pt}});return lt[it]+=ht,ft})}const splitVConfig={kernelName:SplitV,backendName:"webgl",kernelFunc:splitV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQRT="return sqrt(x);",sqrt=unaryKernelFunc({opSnippet:SQRT}),sqrtConfig={kernelName:Sqrt,backendName:"webgl",kernelFunc:sqrt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQUARE="return x * x;",square$1=unaryKernelFunc({opSnippet:SQUARE}),squareConfig={kernelName:Square,backendName:"webgl",kernelFunc:square$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQUARED_DIFFERENCE="return (a - b) * (a - b);",squaredDifference=binaryKernelFunc({opSnippet:SQUARED_DIFFERENCE,packedOpSnippet:SQUARED_DIFFERENCE}),squaredDifferenceConfig={kernelName:SquaredDifference,backendName:"webgl",kernelFunc:squaredDifference};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function step({inputs:Xe,attrs:Ke,backend:Ye}){const{x:Je}=Xe,tt=CHECK_NAN_SNIPPET$2+`
    return x > 0.0 ? 1.0 : float(${Ke.alpha});
  `,st=new UnaryOpProgram(Je.shape,tt);return Ye.runWebGLProgram(st,[Je],Je.dtype)}const stepConfig={kernelName:Step,backendName:"webgl",kernelFunc:step};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class StridedSliceProgram{constructor(Ke,Ye,Je){this.variableNames=["x"],this.outputShape=Je;const tt=Je.length,st=getCoordsDataType(Je.length),rt=getCoordsDataType(Je.length);let it="";if(tt===1)it="coords * strides + begin";else{let ot=0;it=Je.map((at,lt)=>(ot++,Je.length===1?`coords * strides[${lt}] + begin[${lt}]`:`coords[${ot-1}] * strides[${lt}] + begin[${lt}]`)).join(",")}this.userCode=`
      ${st} begin = ${st}(${Ke});
      ${st} strides = ${st}(${Ye});

      void main() {
        ${rt} coords = getOutputCoords();
        setOutput(getX(${it}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSlice(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{begin:st,end:rt,strides:it,beginMask:ot,endMask:at,ellipsisMask:lt,newAxisMask:ut,shrinkAxisMask:ht}=Je,{nonStrided:pt,$begin:ft,$strides:xt,size:vt,newShape:At,outShape:Et}=sliceInfo(tt.shape,st,rt,it,ot,at,lt,ut,ht),wt=reshape({inputs:{x:tt},backend:Ye,attrs:{shape:At}});let _t;if(pt){const Tt=slice$2({inputs:{x:wt},backend:Ye,attrs:{begin:ft,size:vt}});_t=reshape({inputs:{x:Tt},backend:Ye,attrs:{shape:Et}}),Ye.disposeIntermediateTensorInfo(Tt)}else if(Et.some(Tt=>Tt===0))_t=Ye.makeTensorInfo(Et,tt.dtype,[]);else if(Ye.shouldExecuteOnCPU([wt])){const Rt=Ye.texData.get(wt.dataId).values,Nt=buffer$1(wt.shape,wt.dtype,Rt),Pt=stridedSliceImplCPU(Et,Nt,xt,ft);_t=Ye.makeTensorInfo(Et,wt.dtype,Pt.values)}else{const St=new StridedSliceProgram(ft,xt,Et);_t=Ye.runWebGLProgram(St,[wt],wt.dtype)}const Ct=reshape({inputs:{x:_t},backend:Ye,attrs:{shape:Et}});return Ye.disposeIntermediateTensorInfo(wt),Ye.disposeIntermediateTensorInfo(_t),Ct}const stridedSliceConfig={kernelName:StridedSlice,backendName:"webgl",kernelFunc:stridedSlice};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TAN="return tan(x);",tan=unaryKernelFunc({opSnippet:TAN}),tanConfig={kernelName:Tan,backendName:"webgl",kernelFunc:tan};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TANH=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,tanh=unaryKernelFunc({opSnippet:TANH}),tanhConfig={kernelName:Tanh$1,backendName:"webgl",kernelFunc:tanh};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TileProgram{constructor(Ke,Ye){this.variableNames=["A"];const Je=new Array(Ke.length);for(let rt=0;rt<Je.length;rt++)Je[rt]=Ke[rt]*Ye[rt];this.outputShape=Je,this.rank=Je.length;const tt=getCoordsDataType(this.rank),st=getSourceCoords(Ke);this.userCode=`
      void main() {
        ${tt} resRC = getOutputCoords();
        setOutput(getA(${st}));
      }
    `}}function getSourceCoords(Xe){const Ke=Xe.length;if(Ke>5)throw Error(`Tile for rank ${Ke} is not yet supported`);if(Ke===1)return`imod(resRC, ${Xe[0]})`;const Ye=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],Je=[];for(let tt=0;tt<Xe.length;tt++)Je.push(`imod(${Ye[tt]}, ${Xe[tt]})`);return Je.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tile(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{reps:st}=Je;if(tt.dtype==="string"){const at=Ye.readSync(tt.dataId).map(ht=>decodeString(ht)),lt=buffer$1(tt.shape,tt.dtype,at),ut=tileImplCPU(lt,st);return Ye.makeTensorInfo(ut.shape,ut.dtype,ut.values)}const rt=new TileProgram(tt.shape,st);return Ye.runWebGLProgram(rt,[tt],tt.dtype)}const tileConfig={kernelName:Tile,backendName:"webgl",kernelFunc:tile};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function topK(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt}=Ke,{k:st,sorted:rt}=Je,it=Ye.readSync(tt.dataId),[ot,at]=topKImplCPU(it,tt.shape,tt.dtype,st,rt);return[Ye.makeTensorInfo(ot.shape,ot.dtype,ot.values),Ye.makeTensorInfo(at.shape,at.dtype,at.values)]}const topKConfig={kernelName:TopK,backendName:"webgl",kernelFunc:topK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unique$1(Xe){const{inputs:Ke,attrs:Ye,backend:Je}=Xe,{axis:tt}=Ye,{x:st}=Ke;assertNotComplex(st,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const rt=Je.readSync(st.dataId),{outputValues:it,outputShape:ot,indices:at}=uniqueImplCPU(rt,tt,st.shape,st.dtype);return[Je.makeTensorInfo(ot,st.dtype,it),Je.makeTensorInfo([at.length],"int32",at)]}const uniqueConfig={kernelName:Unique,backendName:"webgl",kernelFunc:unique$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unpack(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{value:tt}=Ke;let{axis:st}=Je;st<0&&(st+=tt.shape.length);const rt=tt,it=rt.shape.length,ot=tt.shape[st],at=new Array(it-1);let lt=0;for(let xt=0;xt<it;xt++)xt!==st&&(at[lt++]=rt.shape[xt]);const ut=[],ht=new Array(it).fill(0),pt=rt.shape.slice();pt[st]=1;const ft=new Array(ot);for(let xt=0;xt<ft.length;xt++){ht[st]=xt;const vt=slice$2({inputs:{x:rt},backend:Ye,attrs:{begin:ht,size:pt}}),At=reshape({inputs:{x:vt},backend:Ye,attrs:{shape:at}});ft[xt]=At,ut.push(vt)}return ut.forEach(xt=>Ye.disposeIntermediateTensorInfo(xt)),ft}const unpackConfig={kernelName:Unpack,backendName:"webgl",kernelFunc:unpack};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SegmentOpProgram{constructor(Ke,Ye){this.variableNames=["x","segmentIds"];const Je=Ke.windowSize,tt=Ke.batchSize,st=Ke.inSize,rt=Ke.numSegments,it=rt*Math.ceil(st/Je);this.outputShape=[tt,it];const ot="0.0",at="sumValue",lt=Math.floor(Je/4)*4,ut=Je%4,ht=`
        sumValue += dot(values, segFilter);
    `;let pt="";st%Je>0&&(pt=`
        if (inIdx < 0 || inIdx >= ${st}) {
          return initializationValue;
        }
      `);let ft="";st%Je>0&&(ft=`
        if (inIdx < 0 || inIdx >= ${st}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${ot};

      float getValue(int batch, int inIdx) {
        ${pt}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${ft}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${rt})) * float(${Je}));
        int currentSeg = int(mod(float(outIdx), float(${rt})));

        float sumValue = 0.0;

        for (int i = 0; i < ${lt}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${ht}
        }

        int inIdx = inOffset + ${lt};
        if (${ut===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${ht}
        } else if (${ut===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${ht}
        } else if (${ut===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${ht}
        }
        setOutput(${at});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unsortedSegmentSum(Xe){const{inputs:Ke,backend:Ye,attrs:Je}=Xe,{x:tt,segmentIds:st}=Ke,{numSegments:rt}=Je,it=tt.shape.length,ot=[];let at=0;const lt=getAxesPermutation([at],it);let ut=tt;lt!=null&&(ut=transpose({inputs:{x:tt},backend:Ye,attrs:{perm:lt}}),ot.push(ut),at=getInnerMostAxes(1,it)[0]);const ht=computeOutShape(ut.shape,at,rt),pt=sizeFromShape([ut.shape[at]]),ft=reshape({inputs:{x:ut},backend:Ye,attrs:{shape:[-1,pt]}});ot.push(ft);const xt=sumOutType(tt.dtype),vt=(_t,Ct,Tt,St,Rt)=>{const Nt=_t.shape[0],Pt=_t.shape[1],Bt=segOpComputeOptimalWindowSize(Pt,Rt),Lt={windowSize:Bt,inSize:Pt,batchSize:Nt,numSegments:Rt},zt=new SegmentOpProgram(Lt,Ct),Dt=Ye.compileAndRun(zt,[_t,Tt],St);if(ot.push(Dt),Dt.shape[1]===Rt)return Dt;const Vt=range$1({backend:Ye,attrs:{start:0,stop:Rt,step:1,dtype:"float32"}}),Gt=tile({inputs:{x:Vt},backend:Ye,attrs:{reps:[Pt/Bt]}});return ot.push(Vt),ot.push(Gt),vt(Dt,Ct,Gt,St,Rt)},At=vt(ft,"unsortedSegmentSum",st,xt,rt),Et=reshape({inputs:{x:At},backend:Ye,attrs:{shape:ht}});let wt=Et;if(lt!=null){ot.push(Et);const _t=getUndoAxesPermutation(lt);wt=transpose({inputs:{x:wt},backend:Ye,attrs:{perm:_t}})}return ot.forEach(_t=>Ye.disposeIntermediateTensorInfo(_t)),wt}const unsortedSegmentSumConfig={kernelName:UnsortedSegmentSum,backendName:"webgl",kernelFunc:unsortedSegmentSum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kernelConfigs=[LRNConfig,LRNGradConfig,_fusedMatMulConfig,absConfig,acosConfig,acoshConfig,addConfig,addNConfig,allConfig,anyConfig,argMaxConfig,argMinConfig,asinConfig,asinhConfig,atan2Config,atanConfig,atanhConfig,avgPool3DConfig,avgPoolConfig,avgPoolGrad3DConfig,avgPoolGradConfig,batchMatMulConfig,batchNormConfig,batchToSpaceNDConfig,bincountConfig,castConfig,ceilConfig,clipByValueConfig,complexAbsConfig,complexConfig,concatConfig,conv2DBackpropFilterConfig,conv2DBackpropInputConfig,conv2DConfig,conv3DBackpropFilterV2Config,conv3DBackpropInputConfig,conv3DConfig,cosConfig,coshConfig,cropAndResizeConfig,cumsumConfig,denseBincountConfig,depthToSpaceConfig,depthwiseConv2dNativeBackpropFilterConfig,depthwiseConv2dNativeBackpropInputConfig,depthwiseConv2dNativeConfig,diagConfig,dilation2DConfig,eluConfig,eluGradConfig,equalConfig,erfConfig,expConfig,expandDimsConfig,expm1Config,fftConfig,fillConfig,flipLeftRightConfig,floorConfig,floorDivConfig,fromPixelsConfig,fusedConv2DConfig,fusedDepthwiseConv2DConfig,gatherNdConfig,gatherV2Config,greaterConfig,greaterEqualConfig,identityConfig,ifftConfig,imagConfig,isFiniteConfig,isInfConfig,isNaNConfig,leakyReluConfig,lessConfig,lessEqualConfig,linSpaceConfig,log1pConfig,logConfig,logicalAndConfig,logicalNotConfig,logicalOrConfig,maxConfig,maxPool3DConfig,maxPoolConfig,maxPoolGrad3DConfig,maxPoolGradConfig,maxPoolWithArgmaxConfig,maximumConfig,meanConfig,minConfig,minimumConfig,mirrorPadConfig,modConfig,multinomialConfig,multiplyConfig,negConfig,nonMaxSuppressionV3Config,nonMaxSuppressionV4Config,nonMaxSuppressionV5Config,notEqualConfig,oneHotConfig,onesLikeConfig,packConfig,padV2Config,powConfig,preluConfig,prodConfig,rangeConfig,realConfig,realDivConfig,reciprocalConfig,relu6Config,reluConfig,reshapeConfig,resizeBilinearConfig,resizeBilinearGradConfig,resizeNearestNeighborConfig,resizeNearestNeighborGradConfig,reverseConfig,rotateWithOffsetConfig,roundConfig,rsqrtConfig,scatterNdConfig,selectConfig,seluConfig,sigmoidConfig,signConfig,sinConfig,sinhConfig,sliceConfig,softmaxConfig,softplusConfig,spaceToBatchNDConfig,sparseToDenseConfig,splitVConfig,sqrtConfig,squareConfig,squaredDifferenceConfig,stepConfig,stridedSliceConfig,subConfig,sumConfig,tanConfig,tanhConfig,tileConfig,topKConfig,transposeConfig,uniqueConfig,unpackConfig,unsortedSegmentSumConfig,zerosLikeConfig];for(const Xe of kernelConfigs)registerKernel(Xe);var NAMES="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" "),names=function(Xe){return typeof Xe!="string"?NAMES.slice():NAMES.filter(function(Ke){var Ye=Ke[1]||" ";return Xe.indexOf(Ye)!==-1})};names(" #");names(" b");var REGEX$2=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenize$1(Xe){typeof Xe!="string"&&(Xe="");var Ke=REGEX$2.exec(Xe);return[Ke[1].toUpperCase(),Ke[2].replace(/x/g,"##"),Ke[3],Ke[4]]}var NO_NOTE=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),SEMI=[0,2,4,5,7,9,11],properties$1=function(Xe){var Ke=tokenize$1(Xe);if(Ke[0]===""||Ke[3]!=="")return NO_NOTE;var Ye=Ke[0],Je=Ke[1],tt=Ke[2],st={letter:Ye,acc:Je,octStr:tt,pc:Ye+Je,name:Ye+Je+tt,step:(Ye.charCodeAt(0)+3)%7,alt:Je[0]==="b"?-Je.length:Je.length,oct:tt.length?+tt:null,chroma:0,midi:null,freq:null};return st.chroma=(SEMI[st.step]+st.alt+120)%12,st.midi=st.oct!==null?SEMI[st.step]+st.alt+12*(st.oct+1):null,st.freq=midiToFreq(st.midi),Object.freeze(st)},memo=function(Xe,Ke){return Ke===void 0&&(Ke={}),function(Ye){return Ke[Ye]||(Ke[Ye]=Xe(Ye))}},props$1=memo(properties$1),midiToFreq=function(Xe,Ke){return Ke===void 0&&(Ke=440),typeof Xe=="number"?Math.pow(2,(Xe-69)/12)*Ke:null},chroma$2=function(Xe){return props$1(Xe).chroma},IVL_TNL="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",IVL_STR="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$1=new RegExp("^"+IVL_TNL+"|"+IVL_STR+"$"),SIZES=[0,2,4,5,7,9,11],TYPES="PMMPPMM",tokenize=function(Xe){var Ke=REGEX$1.exec(""+Xe);return Ke===null?null:Ke[1]?[Ke[1],Ke[2]]:[Ke[4],Ke[3]]},NO_IVL=Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null,oct:null}),qToAlt=function(Xe,Ke){return Ke==="M"&&Xe==="M"||Ke==="P"&&Xe==="P"?0:Ke==="m"&&Xe==="M"?-1:/^A+$/.test(Ke)?Ke.length:/^d+$/.test(Ke)?Xe==="P"?-Ke.length:-Ke.length-1:null},numToStep=function(Xe){return(Math.abs(Xe)-1)%7},properties=function(Xe){var Ke=tokenize(Xe);if(Ke===null)return NO_IVL;var Ye={num:0,q:"d",name:"",type:"M",step:0,dir:-1,simple:1,alt:0,oct:0,semitones:0,chroma:0,ic:0};return Ye.num=+Ke[0],Ye.q=Ke[1],Ye.step=numToStep(Ye.num),Ye.type=TYPES[Ye.step],Ye.type==="M"&&Ye.q==="P"?NO_IVL:(Ye.name=""+Ye.num+Ye.q,Ye.dir=Ye.num<0?-1:1,Ye.simple=Ye.num===8||Ye.num===-8?Ye.num:Ye.dir*(Ye.step+1),Ye.alt=qToAlt(Ye.type,Ye.q),Ye.oct=Math.floor((Math.abs(Ye.num)-1)/7),Ye.semitones=Ye.dir*(SIZES[Ye.step]+Ye.alt+12*Ye.oct),Ye.chroma=(Ye.dir*(SIZES[Ye.step]+Ye.alt)%12+12)%12,Object.freeze(Ye))},cache={};function props(Xe){return typeof Xe!="string"?NO_IVL:cache[Xe]||(cache[Xe]=properties(Xe))}var chroma$1=function(Xe){return props(Xe).chroma};const chromatic=["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],lydian=["1P 2M 3M 4A 5P 6M 7M"],major=["1P 2M 3M 4P 5P 6M 7M",["ionian"]],mixolydian=["1P 2M 3M 4P 5P 6M 7m",["dominant"]],dorian=["1P 2M 3m 4P 5P 6M 7m"],aeolian=["1P 2M 3m 4P 5P 6m 7m",["minor"]],phrygian=["1P 2m 3m 4P 5P 6m 7m"],locrian=["1P 2m 3m 4P 5d 6m 7m"],altered=["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],diminished=["1P 2M 3m 4P 5d 6m 6M 7M",["whole-half diminished"]],iwato=["1P 2m 4P 5d 7m"],hirajoshi=["1P 2M 3m 5P 6m"],kumoijoshi=["1P 2m 4P 5P 6m"],pelog=["1P 2m 3m 5P 6m"],prometheus=["1P 2M 3M 4A 6M 7m"],ritusen=["1P 2M 4P 5P 6M"],scriabin=["1P 2m 3M 5P 6M"],piongio=["1P 2M 4P 5P 6M 7m"],augmented=["1P 2A 3M 5P 5A 7M"],neopolitan=["1P 2m 3m 4P 5P 6m 7M"],egyptian=["1P 2M 4P 5P 7m"],oriental=["1P 2m 3M 4P 5d 6M 7m"],flamenco=["1P 2m 3m 3M 4A 5P 7m"],balinese=["1P 2m 3m 4P 5P 6m 7M"],persian=["1P 2m 3M 4P 5d 6m 7M"],bebop=["1P 2M 3M 4P 5P 6M 7m 7M"],enigmatic=["1P 2m 3M 5d 6m 7m 7M"],ichikosucho=["1P 2M 3M 4P 5d 5P 6M 7M"],sdata={chromatic,lydian,major,mixolydian,dorian,aeolian,phrygian,locrian,"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m",["half-diminished"]],altered,"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"phrygian dominant":["1P 2m 3M 4P 5P 6m 7m",["spanish","phrygian major"]],"half-whole diminished":["1P 2m 3m 3M 4A 5P 6M 7m",["dominant diminished"]],diminished,"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],iwato,hirajoshi,kumoijoshi,pelog,"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],prometheus,"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],ritusen,scriabin,piongio,"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],augmented,"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],neopolitan,"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],egyptian,"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],oriental,"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],flamenco,balinese,"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],persian,bebop,"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],enigmatic,"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],ichikosucho,"six tone symmetric":["1P 2m 3M 4P 5A 6M"]},M=["1P 3M 5P",["Major",""]],M13=["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],M6=["1P 3M 5P 13M",["6"]],M69=["1P 3M 5P 6M 9M",["69"]],M7add13=["1P 3M 5P 6M 7M 9M"],M7b5=["1P 3M 5d 7M"],M7b6=["1P 3M 6m 7M"],M7b9=["1P 3M 5P 7M 9m"],M7sus4=["1P 4P 5P 7M"],M9=["1P 3M 5P 7M 9M",["maj9","Maj9"]],M9b5=["1P 3M 5d 7M 9M"],M9sus4=["1P 4P 5P 7M 9M"],Madd9=["1P 3M 5P 9M",["2","add9","add2"]],Maj7=["1P 3M 5P 7M",["maj7","M7"]],Mb5=["1P 3M 5d"],Mb6=["1P 3M 13m"],Msus2=["1P 2M 5P",["add9no3","sus2"]],Msus4=["1P 4P 5P",["sus","sus4"]],Maddb9=["1P 3M 5P 9m"],m$2=["1P 3m 5P"],m11=["1P 3m 5P 7m 9M 11P",["_11"]],m11b5=["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],m13=["1P 3m 5P 7m 9M 11P 13M",["_13"]],m6=["1P 3m 4P 5P 13M",["_6"]],m69=["1P 3m 5P 6M 9M",["_69"]],m7=["1P 3m 5P 7m",["minor7","_","_7"]],m7add11=["1P 3m 5P 7m 11P",["m7add4"]],m7b5=["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],m9=["1P 3m 5P 7m 9M",["_9"]],m9b5=["1P 3m 7m 12d 2M",["h9","-9b5"]],mMaj7=["1P 3m 5P 7M",["mM7","_M7"]],mMaj7b6=["1P 3m 5P 6m 7M",["mM7b6"]],mM9=["1P 3m 5P 7M 9M",["mMaj9","-M9"]],mM9b6=["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],mb6M7=["1P 3m 6m 7M"],mb6b9=["1P 3m 6m 9m"],o=["1P 3m 5d",["mb5","dim"]],o7=["1P 3m 5d 13M",["diminished","m6b5","dim7"]],o7M7=["1P 3m 5d 6M 7M"],oM7=["1P 3m 5d 7M"],sus24=["1P 2M 4P 5P",["sus4add9"]],madd4=["1P 3m 4P 5P"],madd9=["1P 3m 5P 9M"],cdata={4:["1P 4P 7m 10m",["quartal"]],5:["1P 5P"],7:["1P 3M 5P 7m",["Dominant","Dom"]],9:["1P 3M 5P 7m 9M",["79"]],11:["1P 5P 7m 9M 11P"],13:["1P 3M 5P 7m 9M 13M",["13_"]],64:["5P 8P 10M"],M,"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],M13,"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],M6,"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],M69,"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],M7add13,M7b5,M7b6,M7b9,M7sus4,M9,"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],M9b5,M9sus4,Madd9,Maj7,Mb5,Mb6,Msus2,Msus4,Maddb9,"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],m:m$2,"m#5":["1P 3m 5A",["m+","mb6"]],m11,"m11A 5":["1P 3m 6m 7m 9M 11P"],m11b5,m13,m6,m69,m7,"m7#5":["1P 3m 6m 7m"],m7add11,m7b5,m9,"m9#5":["1P 3m 6m 7m 9M"],m9b5,mMaj7,mMaj7b6,mM9,mM9b6,mb6M7,mb6b9,o,o7,o7M7,oM7,sus24,"+add#9":["1P 3M 5A 9A"],madd4,madd9};var chr=function(Xe){return chroma$2(Xe)||chroma$1(Xe)||0};function chroma(Xe){if(isChroma(Xe))return Xe;if(!Array.isArray(Xe))return"";var Ke=[0,0,0,0,0,0,0,0,0,0,0,0];return Xe.map(chr).forEach(function(Ye){Ke[Ye]=1}),Ke.join("")}var REGEX=/^[01]{12}$/;function isChroma(Xe){return REGEX.test(Xe)}var dictionary=function(Xe){var Ke=Object.keys(Xe).sort(),Ye=[],Je=[],tt=function(it,ot,at){Ye[it]=ot,Je[at]=Je[at]||[],Je[at].push(it)};Ke.forEach(function(it){var ot=Xe[it][0].split(" "),at=Xe[it][1],lt=chroma(ot);tt(it,ot,lt),at&&at.forEach(function(ut){return tt(ut,ot,lt)})});var st=Object.keys(Ye).sort(),rt=function(it){return Ye[it]};return rt.names=function(it){return typeof it=="string"?(Je[it]||[]).slice():(it===!0?st:Ke).slice()},rt},scale=dictionary(sdata),chord=dictionary(cdata);scale.names;chord.names;const DEFAULT_QUARTERS_PER_MINUTE=120,DEFAULT_VELOCITY=80,DEFAULT_DRUM_PITCH_CLASSES=[[36,35],[38,27,28,31,32,33,34,37,39,40,56,65,66,75,85],[42,44,54,68,69,70,71,73,78,80],[46,67,72,74,79,81],[45,29,41,61,64,84],[48,47,60,63,77,86,87],[50,30,43,62,76,83],[49,55,57,58],[51,52,53,59,82]],MIN_MIDI_VELOCITY=0,MAX_MIDI_VELOCITY=127,MIDI_VELOCITIES=MAX_MIDI_VELOCITY-MIN_MIDI_VELOCITY+1,MIN_MIDI_PITCH=0,MAX_MIDI_PITCH=127,MIN_PIANO_PITCH=21,MAX_PIANO_PITCH=108,MIN_DRUM_PITCH=35,MAX_DRUM_PITCH=81,LO_CLICK_PITCH=89,HI_CLICK_PITCH=90,LO_CLICK_CLASS=9,HI_CLICK_CLASS=10;var ChordQuality;(function(Xe){Xe[Xe.Major=0]="Major",Xe[Xe.Minor=1]="Minor",Xe[Xe.Augmented=2]="Augmented",Xe[Xe.Diminished=3]="Diminished",Xe[Xe.Other=4]="Other"})(ChordQuality||(ChordQuality={}));var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(Xe,Ke){for(var Ye=new Array(arguments.length-1),Je=0,tt=2,st=!0;tt<arguments.length;)Ye[Je++]=arguments[tt++];return new Promise(function(it,ot){Ye[Je]=function(lt){if(st)if(st=!1,lt)ot(lt);else{for(var ut=new Array(arguments.length-1),ht=0;ht<ut.length;)ut[ht++]=arguments[ht];it.apply(null,ut)}};try{Xe.apply(Ke||null,Ye)}catch(at){st&&(st=!1,ot(at))}})}var base64$1={};(function(Xe){var Ke=Xe;Ke.length=function(it){var ot=it.length;if(!ot)return 0;for(var at=0;--ot%4>1&&it.charAt(ot)==="=";)++at;return Math.ceil(it.length*3)/4-at};for(var Ye=new Array(64),Je=new Array(123),tt=0;tt<64;)Je[Ye[tt]=tt<26?tt+65:tt<52?tt+71:tt<62?tt-4:tt-59|43]=tt++;Ke.encode=function(it,ot,at){for(var lt=null,ut=[],ht=0,pt=0,ft;ot<at;){var xt=it[ot++];switch(pt){case 0:ut[ht++]=Ye[xt>>2],ft=(xt&3)<<4,pt=1;break;case 1:ut[ht++]=Ye[ft|xt>>4],ft=(xt&15)<<2,pt=2;break;case 2:ut[ht++]=Ye[ft|xt>>6],ut[ht++]=Ye[xt&63],pt=0;break}ht>8191&&((lt||(lt=[])).push(String.fromCharCode.apply(String,ut)),ht=0)}return pt&&(ut[ht++]=Ye[ft],ut[ht++]=61,pt===1&&(ut[ht++]=61)),lt?(ht&&lt.push(String.fromCharCode.apply(String,ut.slice(0,ht))),lt.join("")):String.fromCharCode.apply(String,ut.slice(0,ht))};var st="invalid encoding";Ke.decode=function(it,ot,at){for(var lt=at,ut=0,ht,pt=0;pt<it.length;){var ft=it.charCodeAt(pt++);if(ft===61&&ut>1)break;if((ft=Je[ft])===void 0)throw Error(st);switch(ut){case 0:ht=ft,ut=1;break;case 1:ot[at++]=ht<<2|(ft&48)>>4,ht=ft,ut=2;break;case 2:ot[at++]=(ht&15)<<4|(ft&60)>>2,ht=ft,ut=3;break;case 3:ot[at++]=(ht&3)<<6|ft,ut=0;break}}if(ut===1)throw Error(st);return at-lt},Ke.test=function(it){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(it)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(Ke,Ye,Je){return(this._listeners[Ke]||(this._listeners[Ke]=[])).push({fn:Ye,ctx:Je||this}),this};EventEmitter.prototype.off=function(Ke,Ye){if(Ke===void 0)this._listeners={};else if(Ye===void 0)this._listeners[Ke]=[];else for(var Je=this._listeners[Ke],tt=0;tt<Je.length;)Je[tt].fn===Ye?Je.splice(tt,1):++tt;return this};EventEmitter.prototype.emit=function(Ke){var Ye=this._listeners[Ke];if(Ye){for(var Je=[],tt=1;tt<arguments.length;)Je.push(arguments[tt++]);for(tt=0;tt<Ye.length;)Ye[tt].fn.apply(Ye[tt++].ctx,Je)}return this};var float=factory(factory);function factory(Xe){return typeof Float32Array<"u"?(function(){var Ke=new Float32Array([-0]),Ye=new Uint8Array(Ke.buffer),Je=Ye[3]===128;function tt(ot,at,lt){Ke[0]=ot,at[lt]=Ye[0],at[lt+1]=Ye[1],at[lt+2]=Ye[2],at[lt+3]=Ye[3]}function st(ot,at,lt){Ke[0]=ot,at[lt]=Ye[3],at[lt+1]=Ye[2],at[lt+2]=Ye[1],at[lt+3]=Ye[0]}Xe.writeFloatLE=Je?tt:st,Xe.writeFloatBE=Je?st:tt;function rt(ot,at){return Ye[0]=ot[at],Ye[1]=ot[at+1],Ye[2]=ot[at+2],Ye[3]=ot[at+3],Ke[0]}function it(ot,at){return Ye[3]=ot[at],Ye[2]=ot[at+1],Ye[1]=ot[at+2],Ye[0]=ot[at+3],Ke[0]}Xe.readFloatLE=Je?rt:it,Xe.readFloatBE=Je?it:rt})():(function(){function Ke(Je,tt,st,rt){var it=tt<0?1:0;if(it&&(tt=-tt),tt===0)Je(1/tt>0?0:2147483648,st,rt);else if(isNaN(tt))Je(2143289344,st,rt);else if(tt>34028234663852886e22)Je((it<<31|2139095040)>>>0,st,rt);else if(tt<11754943508222875e-54)Je((it<<31|Math.round(tt/1401298464324817e-60))>>>0,st,rt);else{var ot=Math.floor(Math.log(tt)/Math.LN2),at=Math.round(tt*Math.pow(2,-ot)*8388608)&8388607;Je((it<<31|ot+127<<23|at)>>>0,st,rt)}}Xe.writeFloatLE=Ke.bind(null,writeUintLE),Xe.writeFloatBE=Ke.bind(null,writeUintBE);function Ye(Je,tt,st){var rt=Je(tt,st),it=(rt>>31)*2+1,ot=rt>>>23&255,at=rt&8388607;return ot===255?at?NaN:it*(1/0):ot===0?it*1401298464324817e-60*at:it*Math.pow(2,ot-150)*(at+8388608)}Xe.readFloatLE=Ye.bind(null,readUintLE),Xe.readFloatBE=Ye.bind(null,readUintBE)})(),typeof Float64Array<"u"?(function(){var Ke=new Float64Array([-0]),Ye=new Uint8Array(Ke.buffer),Je=Ye[7]===128;function tt(ot,at,lt){Ke[0]=ot,at[lt]=Ye[0],at[lt+1]=Ye[1],at[lt+2]=Ye[2],at[lt+3]=Ye[3],at[lt+4]=Ye[4],at[lt+5]=Ye[5],at[lt+6]=Ye[6],at[lt+7]=Ye[7]}function st(ot,at,lt){Ke[0]=ot,at[lt]=Ye[7],at[lt+1]=Ye[6],at[lt+2]=Ye[5],at[lt+3]=Ye[4],at[lt+4]=Ye[3],at[lt+5]=Ye[2],at[lt+6]=Ye[1],at[lt+7]=Ye[0]}Xe.writeDoubleLE=Je?tt:st,Xe.writeDoubleBE=Je?st:tt;function rt(ot,at){return Ye[0]=ot[at],Ye[1]=ot[at+1],Ye[2]=ot[at+2],Ye[3]=ot[at+3],Ye[4]=ot[at+4],Ye[5]=ot[at+5],Ye[6]=ot[at+6],Ye[7]=ot[at+7],Ke[0]}function it(ot,at){return Ye[7]=ot[at],Ye[6]=ot[at+1],Ye[5]=ot[at+2],Ye[4]=ot[at+3],Ye[3]=ot[at+4],Ye[2]=ot[at+5],Ye[1]=ot[at+6],Ye[0]=ot[at+7],Ke[0]}Xe.readDoubleLE=Je?rt:it,Xe.readDoubleBE=Je?it:rt})():(function(){function Ke(Je,tt,st,rt,it,ot){var at=rt<0?1:0;if(at&&(rt=-rt),rt===0)Je(0,it,ot+tt),Je(1/rt>0?0:2147483648,it,ot+st);else if(isNaN(rt))Je(0,it,ot+tt),Je(2146959360,it,ot+st);else if(rt>17976931348623157e292)Je(0,it,ot+tt),Je((at<<31|2146435072)>>>0,it,ot+st);else{var lt;if(rt<22250738585072014e-324)lt=rt/5e-324,Je(lt>>>0,it,ot+tt),Je((at<<31|lt/4294967296)>>>0,it,ot+st);else{var ut=Math.floor(Math.log(rt)/Math.LN2);ut===1024&&(ut=1023),lt=rt*Math.pow(2,-ut),Je(lt*4503599627370496>>>0,it,ot+tt),Je((at<<31|ut+1023<<20|lt*1048576&1048575)>>>0,it,ot+st)}}}Xe.writeDoubleLE=Ke.bind(null,writeUintLE,0,4),Xe.writeDoubleBE=Ke.bind(null,writeUintBE,4,0);function Ye(Je,tt,st,rt,it){var ot=Je(rt,it+tt),at=Je(rt,it+st),lt=(at>>31)*2+1,ut=at>>>20&2047,ht=4294967296*(at&1048575)+ot;return ut===2047?ht?NaN:lt*(1/0):ut===0?lt*5e-324*ht:lt*Math.pow(2,ut-1075)*(ht+4503599627370496)}Xe.readDoubleLE=Ye.bind(null,readUintLE,0,4),Xe.readDoubleBE=Ye.bind(null,readUintBE,4,0)})(),Xe}function writeUintLE(Xe,Ke,Ye){Ke[Ye]=Xe&255,Ke[Ye+1]=Xe>>>8&255,Ke[Ye+2]=Xe>>>16&255,Ke[Ye+3]=Xe>>>24}function writeUintBE(Xe,Ke,Ye){Ke[Ye]=Xe>>>24,Ke[Ye+1]=Xe>>>16&255,Ke[Ye+2]=Xe>>>8&255,Ke[Ye+3]=Xe&255}function readUintLE(Xe,Ke){return(Xe[Ke]|Xe[Ke+1]<<8|Xe[Ke+2]<<16|Xe[Ke+3]<<24)>>>0}function readUintBE(Xe,Ke){return(Xe[Ke]<<24|Xe[Ke+1]<<16|Xe[Ke+2]<<8|Xe[Ke+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(Xe){}return null}var utf8$2={};(function(Xe){var Ke=Xe;Ke.length=function(Je){for(var tt=0,st=0,rt=0;rt<Je.length;++rt)st=Je.charCodeAt(rt),st<128?tt+=1:st<2048?tt+=2:(st&64512)===55296&&(Je.charCodeAt(rt+1)&64512)===56320?(++rt,tt+=4):tt+=3;return tt},Ke.read=function(Je,tt,st){var rt=st-tt;if(rt<1)return"";for(var it=null,ot=[],at=0,lt;tt<st;)lt=Je[tt++],lt<128?ot[at++]=lt:lt>191&&lt<224?ot[at++]=(lt&31)<<6|Je[tt++]&63:lt>239&&lt<365?(lt=((lt&7)<<18|(Je[tt++]&63)<<12|(Je[tt++]&63)<<6|Je[tt++]&63)-65536,ot[at++]=55296+(lt>>10),ot[at++]=56320+(lt&1023)):ot[at++]=(lt&15)<<12|(Je[tt++]&63)<<6|Je[tt++]&63,at>8191&&((it||(it=[])).push(String.fromCharCode.apply(String,ot)),at=0);return it?(at&&it.push(String.fromCharCode.apply(String,ot.slice(0,at))),it.join("")):String.fromCharCode.apply(String,ot.slice(0,at))},Ke.write=function(Je,tt,st){for(var rt=st,it,ot,at=0;at<Je.length;++at)it=Je.charCodeAt(at),it<128?tt[st++]=it:it<2048?(tt[st++]=it>>6|192,tt[st++]=it&63|128):(it&64512)===55296&&((ot=Je.charCodeAt(at+1))&64512)===56320?(it=65536+((it&1023)<<10)+(ot&1023),++at,tt[st++]=it>>18|240,tt[st++]=it>>12&63|128,tt[st++]=it>>6&63|128,tt[st++]=it&63|128):(tt[st++]=it>>12|224,tt[st++]=it>>6&63|128,tt[st++]=it&63|128);return st-rt}})(utf8$2);var pool_1=pool;function pool(Xe,Ke,Ye){var Je=Ye||8192,tt=Je>>>1,st=null,rt=Je;return function(ot){if(ot<1||ot>tt)return Xe(ot);rt+ot>Je&&(st=Xe(Je),rt=0);var at=Ke.call(st,rt,rt+=ot);return rt&7&&(rt=(rt|7)+1),at}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=Ke;var Xe=requireMinimal();function Ke(st,rt){this.lo=st>>>0,this.hi=rt>>>0}var Ye=Ke.zero=new Ke(0,0);Ye.toNumber=function(){return 0},Ye.zzEncode=Ye.zzDecode=function(){return this},Ye.length=function(){return 1};var Je=Ke.zeroHash="\0\0\0\0\0\0\0\0";Ke.fromNumber=function(rt){if(rt===0)return Ye;var it=rt<0;it&&(rt=-rt);var ot=rt>>>0,at=(rt-ot)/4294967296>>>0;return it&&(at=~at>>>0,ot=~ot>>>0,++ot>4294967295&&(ot=0,++at>4294967295&&(at=0))),new Ke(ot,at)},Ke.from=function(rt){if(typeof rt=="number")return Ke.fromNumber(rt);if(Xe.isString(rt))if(Xe.Long)rt=Xe.Long.fromString(rt);else return Ke.fromNumber(parseInt(rt,10));return rt.low||rt.high?new Ke(rt.low>>>0,rt.high>>>0):Ye},Ke.prototype.toNumber=function(rt){if(!rt&&this.hi>>>31){var it=~this.lo+1>>>0,ot=~this.hi>>>0;return it||(ot=ot+1>>>0),-(it+ot*4294967296)}return this.lo+this.hi*4294967296},Ke.prototype.toLong=function(rt){return Xe.Long?new Xe.Long(this.lo|0,this.hi|0,!!rt):{low:this.lo|0,high:this.hi|0,unsigned:!!rt}};var tt=String.prototype.charCodeAt;return Ke.fromHash=function(rt){return rt===Je?Ye:new Ke((tt.call(rt,0)|tt.call(rt,1)<<8|tt.call(rt,2)<<16|tt.call(rt,3)<<24)>>>0,(tt.call(rt,4)|tt.call(rt,5)<<8|tt.call(rt,6)<<16|tt.call(rt,7)<<24)>>>0)},Ke.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},Ke.prototype.zzEncode=function(){var rt=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^rt)>>>0,this.lo=(this.lo<<1^rt)>>>0,this},Ke.prototype.zzDecode=function(){var rt=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^rt)>>>0,this.hi=(this.hi>>>1^rt)>>>0,this},Ke.prototype.length=function(){var rt=this.lo,it=(this.lo>>>28|this.hi<<4)>>>0,ot=this.hi>>>24;return ot===0?it===0?rt<16384?rt<128?1:2:rt<2097152?3:4:it<16384?it<128?5:6:it<2097152?7:8:ot<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,(function(Xe){var Ke=Xe;Ke.asPromise=aspromise,Ke.base64=base64$1,Ke.EventEmitter=eventemitter,Ke.float=float,Ke.inquire=inquire_1,Ke.utf8=utf8$2,Ke.pool=pool_1,Ke.LongBits=requireLongbits(),Ke.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node),Ke.global=Ke.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,Ke.emptyArray=Object.freeze?Object.freeze([]):[],Ke.emptyObject=Object.freeze?Object.freeze({}):{},Ke.isInteger=Number.isInteger||function(st){return typeof st=="number"&&isFinite(st)&&Math.floor(st)===st},Ke.isString=function(st){return typeof st=="string"||st instanceof String},Ke.isObject=function(st){return st&&typeof st=="object"},Ke.isset=Ke.isSet=function(st,rt){var it=st[rt];return it!=null&&st.hasOwnProperty(rt)?typeof it!="object"||(Array.isArray(it)?it.length:Object.keys(it).length)>0:!1},Ke.Buffer=(function(){try{var tt=Ke.inquire("buffer").Buffer;return tt.prototype.utf8Write?tt:null}catch{return null}})(),Ke._Buffer_from=null,Ke._Buffer_allocUnsafe=null,Ke.newBuffer=function(st){return typeof st=="number"?Ke.Buffer?Ke._Buffer_allocUnsafe(st):new Ke.Array(st):Ke.Buffer?Ke._Buffer_from(st):typeof Uint8Array>"u"?st:new Uint8Array(st)},Ke.Array=typeof Uint8Array<"u"?Uint8Array:Array,Ke.Long=Ke.global.dcodeIO&&Ke.global.dcodeIO.Long||Ke.global.Long||Ke.inquire("long"),Ke.key2Re=/^true|false|0|1$/,Ke.key32Re=/^-?(?:0|[1-9][0-9]*)$/,Ke.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,Ke.longToHash=function(st){return st?Ke.LongBits.from(st).toHash():Ke.LongBits.zeroHash},Ke.longFromHash=function(st,rt){var it=Ke.LongBits.fromHash(st);return Ke.Long?Ke.Long.fromBits(it.lo,it.hi,rt):it.toNumber(!!rt)};function Ye(tt,st,rt){for(var it=Object.keys(st),ot=0;ot<it.length;++ot)(tt[it[ot]]===void 0||!rt)&&(tt[it[ot]]=st[it[ot]]);return tt}Ke.merge=Ye,Ke.lcFirst=function(st){return st.charAt(0).toLowerCase()+st.substring(1)};function Je(tt){function st(rt,it){if(!(this instanceof st))return new st(rt,it);Object.defineProperty(this,"message",{get:function(){return rt}}),Error.captureStackTrace?Error.captureStackTrace(this,st):Object.defineProperty(this,"stack",{value:new Error().stack||""}),it&&Ye(this,it)}return(st.prototype=Object.create(Error.prototype)).constructor=st,Object.defineProperty(st.prototype,"name",{get:function(){return tt}}),st.prototype.toString=function(){return this.name+": "+this.message},st}Ke.newError=Je,Ke.ProtocolError=Je("ProtocolError"),Ke.oneOfGetter=function(st){for(var rt={},it=0;it<st.length;++it)rt[st[it]]=1;return function(){for(var ot=Object.keys(this),at=ot.length-1;at>-1;--at)if(rt[ot[at]]===1&&this[ot[at]]!==void 0&&this[ot[at]]!==null)return ot[at]}},Ke.oneOfSetter=function(st){return function(rt){for(var it=0;it<st.length;++it)st[it]!==rt&&delete this[st[it]]}},Ke.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},Ke._configure=function(){var tt=Ke.Buffer;if(!tt){Ke._Buffer_from=Ke._Buffer_allocUnsafe=null;return}Ke._Buffer_from=tt.from!==Uint8Array.from&&tt.from||function(rt,it){return new tt(rt,it)},Ke._Buffer_allocUnsafe=tt.allocUnsafe||function(rt){return new tt(rt)}}})(minimal$1)),minimal$1}var writer=Writer$2,util$5=requireMinimal(),BufferWriter$1,LongBits$1=util$5.LongBits,base64=util$5.base64,utf8$1=util$5.utf8;function Op(Xe,Ke,Ye){this.fn=Xe,this.len=Ke,this.next=void 0,this.val=Ye}function noop$3(){}function State(Xe){this.head=Xe.head,this.tail=Xe.tail,this.len=Xe.len,this.next=Xe.states}function Writer$2(){this.len=0,this.head=new Op(noop$3,0,0),this.tail=this.head,this.states=null}var create$1=function Xe(){return util$5.Buffer?function(){return(Writer$2.create=function(){return new BufferWriter$1})()}:function(){return new Writer$2}};Writer$2.create=create$1();Writer$2.alloc=function Xe(Ke){return new util$5.Array(Ke)};util$5.Array!==Array&&(Writer$2.alloc=util$5.pool(Writer$2.alloc,util$5.Array.prototype.subarray));Writer$2.prototype._push=function Xe(Ke,Ye,Je){return this.tail=this.tail.next=new Op(Ke,Ye,Je),this.len+=Ye,this};function writeByte(Xe,Ke,Ye){Ke[Ye]=Xe&255}function writeVarint32(Xe,Ke,Ye){for(;Xe>127;)Ke[Ye++]=Xe&127|128,Xe>>>=7;Ke[Ye]=Xe}function VarintOp(Xe,Ke){this.len=Xe,this.next=void 0,this.val=Ke}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$2.prototype.uint32=function Xe(Ke){return this.len+=(this.tail=this.tail.next=new VarintOp((Ke=Ke>>>0)<128?1:Ke<16384?2:Ke<2097152?3:Ke<268435456?4:5,Ke)).len,this};Writer$2.prototype.int32=function Xe(Ke){return Ke<0?this._push(writeVarint64,10,LongBits$1.fromNumber(Ke)):this.uint32(Ke)};Writer$2.prototype.sint32=function Xe(Ke){return this.uint32((Ke<<1^Ke>>31)>>>0)};function writeVarint64(Xe,Ke,Ye){for(;Xe.hi;)Ke[Ye++]=Xe.lo&127|128,Xe.lo=(Xe.lo>>>7|Xe.hi<<25)>>>0,Xe.hi>>>=7;for(;Xe.lo>127;)Ke[Ye++]=Xe.lo&127|128,Xe.lo=Xe.lo>>>7;Ke[Ye++]=Xe.lo}Writer$2.prototype.uint64=function Xe(Ke){var Ye=LongBits$1.from(Ke);return this._push(writeVarint64,Ye.length(),Ye)};Writer$2.prototype.int64=Writer$2.prototype.uint64;Writer$2.prototype.sint64=function Xe(Ke){var Ye=LongBits$1.from(Ke).zzEncode();return this._push(writeVarint64,Ye.length(),Ye)};Writer$2.prototype.bool=function Xe(Ke){return this._push(writeByte,1,Ke?1:0)};function writeFixed32(Xe,Ke,Ye){Ke[Ye]=Xe&255,Ke[Ye+1]=Xe>>>8&255,Ke[Ye+2]=Xe>>>16&255,Ke[Ye+3]=Xe>>>24}Writer$2.prototype.fixed32=function Xe(Ke){return this._push(writeFixed32,4,Ke>>>0)};Writer$2.prototype.sfixed32=Writer$2.prototype.fixed32;Writer$2.prototype.fixed64=function Xe(Ke){var Ye=LongBits$1.from(Ke);return this._push(writeFixed32,4,Ye.lo)._push(writeFixed32,4,Ye.hi)};Writer$2.prototype.sfixed64=Writer$2.prototype.fixed64;Writer$2.prototype.float=function Xe(Ke){return this._push(util$5.float.writeFloatLE,4,Ke)};Writer$2.prototype.double=function Xe(Ke){return this._push(util$5.float.writeDoubleLE,8,Ke)};var writeBytes=util$5.Array.prototype.set?function Xe(Ke,Ye,Je){Ye.set(Ke,Je)}:function Xe(Ke,Ye,Je){for(var tt=0;tt<Ke.length;++tt)Ye[Je+tt]=Ke[tt]};Writer$2.prototype.bytes=function Xe(Ke){var Ye=Ke.length>>>0;if(!Ye)return this._push(writeByte,1,0);if(util$5.isString(Ke)){var Je=Writer$2.alloc(Ye=base64.length(Ke));base64.decode(Ke,Je,0),Ke=Je}return this.uint32(Ye)._push(writeBytes,Ye,Ke)};Writer$2.prototype.string=function Xe(Ke){var Ye=utf8$1.length(Ke);return Ye?this.uint32(Ye)._push(utf8$1.write,Ye,Ke):this._push(writeByte,1,0)};Writer$2.prototype.fork=function Xe(){return this.states=new State(this),this.head=this.tail=new Op(noop$3,0,0),this.len=0,this};Writer$2.prototype.reset=function Xe(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$3,0,0),this.len=0),this};Writer$2.prototype.ldelim=function Xe(){var Ke=this.head,Ye=this.tail,Je=this.len;return this.reset().uint32(Je),Je&&(this.tail.next=Ke.next,this.tail=Ye,this.len+=Je),this};Writer$2.prototype.finish=function Xe(){for(var Ke=this.head.next,Ye=this.constructor.alloc(this.len),Je=0;Ke;)Ke.fn(Ke.val,Ye,Je),Je+=Ke.len,Ke=Ke.next;return Ye};Writer$2._configure=function(Xe){BufferWriter$1=Xe,Writer$2.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer$1=writer;(BufferWriter.prototype=Object.create(Writer$1.prototype)).constructor=BufferWriter;var util$4=requireMinimal();function BufferWriter(){Writer$1.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$4._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$4.Buffer&&util$4.Buffer.prototype instanceof Uint8Array&&util$4.Buffer.prototype.set.name==="set"?function(Ke,Ye,Je){Ye.set(Ke,Je)}:function(Ke,Ye,Je){if(Ke.copy)Ke.copy(Ye,Je,0,Ke.length);else for(var tt=0;tt<Ke.length;)Ye[Je++]=Ke[tt++]}};BufferWriter.prototype.bytes=function Xe(Ke){util$4.isString(Ke)&&(Ke=util$4._Buffer_from(Ke,"base64"));var Ye=Ke.length>>>0;return this.uint32(Ye),Ye&&this._push(BufferWriter.writeBytesBuffer,Ye,Ke),this};function writeStringBuffer(Xe,Ke,Ye){Xe.length<40?util$4.utf8.write(Xe,Ke,Ye):Ke.utf8Write?Ke.utf8Write(Xe,Ye):Ke.write(Xe,Ye)}BufferWriter.prototype.string=function Xe(Ke){var Ye=util$4.Buffer.byteLength(Ke);return this.uint32(Ye),Ye&&this._push(writeStringBuffer,Ye,Ke),this};BufferWriter._configure();var reader=Reader$1,util$3=requireMinimal(),BufferReader$1,LongBits=util$3.LongBits,utf8=util$3.utf8;function indexOutOfRange(Xe,Ke){return RangeError("index out of range: "+Xe.pos+" + "+(Ke||1)+" > "+Xe.len)}function Reader$1(Xe){this.buf=Xe,this.pos=0,this.len=Xe.length}var create_array=typeof Uint8Array<"u"?function Xe(Ke){if(Ke instanceof Uint8Array||Array.isArray(Ke))return new Reader$1(Ke);throw Error("illegal buffer")}:function Xe(Ke){if(Array.isArray(Ke))return new Reader$1(Ke);throw Error("illegal buffer")},create=function Xe(){return util$3.Buffer?function(Ye){return(Reader$1.create=function(tt){return util$3.Buffer.isBuffer(tt)?new BufferReader$1(tt):create_array(tt)})(Ye)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$3.Array.prototype.subarray||util$3.Array.prototype.slice;Reader$1.prototype.uint32=(function Xe(){var Ke=4294967295;return function(){if(Ke=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(Ke=(Ke|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(Ke=(Ke|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(Ke=(Ke|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(Ke=(Ke|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return Ke;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return Ke}})();Reader$1.prototype.int32=function Xe(){return this.uint32()|0};Reader$1.prototype.sint32=function Xe(){var Ke=this.uint32();return Ke>>>1^-(Ke&1)|0};function readLongVarint(){var Xe=new LongBits(0,0),Ke=0;if(this.len-this.pos>4){for(;Ke<4;++Ke)if(Xe.lo=(Xe.lo|(this.buf[this.pos]&127)<<Ke*7)>>>0,this.buf[this.pos++]<128)return Xe;if(Xe.lo=(Xe.lo|(this.buf[this.pos]&127)<<28)>>>0,Xe.hi=(Xe.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return Xe;Ke=0}else{for(;Ke<3;++Ke){if(this.pos>=this.len)throw indexOutOfRange(this);if(Xe.lo=(Xe.lo|(this.buf[this.pos]&127)<<Ke*7)>>>0,this.buf[this.pos++]<128)return Xe}return Xe.lo=(Xe.lo|(this.buf[this.pos++]&127)<<Ke*7)>>>0,Xe}if(this.len-this.pos>4){for(;Ke<5;++Ke)if(Xe.hi=(Xe.hi|(this.buf[this.pos]&127)<<Ke*7+3)>>>0,this.buf[this.pos++]<128)return Xe}else for(;Ke<5;++Ke){if(this.pos>=this.len)throw indexOutOfRange(this);if(Xe.hi=(Xe.hi|(this.buf[this.pos]&127)<<Ke*7+3)>>>0,this.buf[this.pos++]<128)return Xe}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function Xe(){return this.uint32()!==0};function readFixed32_end(Xe,Ke){return(Xe[Ke-4]|Xe[Ke-3]<<8|Xe[Ke-2]<<16|Xe[Ke-1]<<24)>>>0}Reader$1.prototype.fixed32=function Xe(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function Xe(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function Xe(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var Ke=util$3.float.readFloatLE(this.buf,this.pos);return this.pos+=4,Ke};Reader$1.prototype.double=function Xe(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var Ke=util$3.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,Ke};Reader$1.prototype.bytes=function Xe(){var Ke=this.uint32(),Ye=this.pos,Je=this.pos+Ke;if(Je>this.len)throw indexOutOfRange(this,Ke);return this.pos+=Ke,Array.isArray(this.buf)?this.buf.slice(Ye,Je):Ye===Je?new this.buf.constructor(0):this._slice.call(this.buf,Ye,Je)};Reader$1.prototype.string=function Xe(){var Ke=this.bytes();return utf8.read(Ke,0,Ke.length)};Reader$1.prototype.skip=function Xe(Ke){if(typeof Ke=="number"){if(this.pos+Ke>this.len)throw indexOutOfRange(this,Ke);this.pos+=Ke}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(Xe){switch(Xe){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(Xe=this.uint32()&7)!==4;)this.skipType(Xe);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+Xe+" at offset "+this.pos)}return this};Reader$1._configure=function(Xe){BufferReader$1=Xe,Reader$1.create=create(),BufferReader$1._configure();var Ke=util$3.Long?"toLong":"toNumber";util$3.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[Ke](!1)},uint64:function(){return readLongVarint.call(this)[Ke](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[Ke](!1)},fixed64:function(){return readFixed64.call(this)[Ke](!0)},sfixed64:function(){return readFixed64.call(this)[Ke](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$2=requireMinimal();function BufferReader(Xe){Reader.call(this,Xe)}BufferReader._configure=function(){util$2.Buffer&&(BufferReader.prototype._slice=util$2.Buffer.prototype.slice)};BufferReader.prototype.string=function Xe(){var Ke=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+Ke,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+Ke,this.len))};BufferReader._configure();var rpc={},service=Service,util$1=requireMinimal();(Service.prototype=Object.create(util$1.EventEmitter.prototype)).constructor=Service;function Service(Xe,Ke,Ye){if(typeof Xe!="function")throw TypeError("rpcImpl must be a function");util$1.EventEmitter.call(this),this.rpcImpl=Xe,this.requestDelimited=!!Ke,this.responseDelimited=!!Ye}Service.prototype.rpcCall=function Xe(Ke,Ye,Je,tt,st){if(!tt)throw TypeError("request must be specified");var rt=this;if(!st)return util$1.asPromise(Xe,rt,Ke,Ye,Je,tt);if(!rt.rpcImpl){setTimeout(function(){st(Error("already ended"))},0);return}try{return rt.rpcImpl(Ke,Ye[rt.requestDelimited?"encodeDelimited":"encode"](tt).finish(),function(ot,at){if(ot)return rt.emit("error",ot,Ke),st(ot);if(at===null){rt.end(!0);return}if(!(at instanceof Je))try{at=Je[rt.responseDelimited?"decodeDelimited":"decode"](at)}catch(lt){return rt.emit("error",lt,Ke),st(lt)}return rt.emit("data",at,Ke),st(null,at)})}catch(it){rt.emit("error",it,Ke),setTimeout(function(){st(it)},0);return}};Service.prototype.end=function Xe(Ke){return this.rpcImpl&&(Ke||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(Xe){var Ke=Xe;Ke.Service=service})(rpc);var roots={};(function(Xe){var Ke=Xe;Ke.build="minimal",Ke.Writer=writer,Ke.BufferWriter=writer_buffer,Ke.Reader=reader,Ke.BufferReader=reader_buffer,Ke.util=requireMinimal(),Ke.rpc=rpc,Ke.roots=roots,Ke.configure=Ye;function Ye(){Ke.util._configure(),Ke.Writer._configure(Ke.BufferWriter),Ke.Reader._configure(Ke.BufferReader)}Ye()})(indexMinimal);var minimal=indexMinimal,$protobuf=minimal,$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.default||($protobuf.roots.default={});$root.tensorflow=(function(){var Xe={};return Xe.magenta=(function(){var Ke={};return Ke.NoteSequence=(function(){function Ye(Je){if(this.timeSignatures=[],this.keySignatures=[],this.tempos=[],this.notes=[],this.pitchBends=[],this.controlChanges=[],this.partInfos=[],this.textAnnotations=[],this.sectionAnnotations=[],this.sectionGroups=[],Je)for(var tt=Object.keys(Je),st=0;st<tt.length;++st)Je[tt[st]]!=null&&(this[tt[st]]=Je[tt[st]])}return Ye.prototype.id="",Ye.prototype.filename="",Ye.prototype.referenceNumber=$util.Long?$util.Long.fromBits(0,0,!1):0,Ye.prototype.collectionName="",Ye.prototype.ticksPerQuarter=0,Ye.prototype.timeSignatures=$util.emptyArray,Ye.prototype.keySignatures=$util.emptyArray,Ye.prototype.tempos=$util.emptyArray,Ye.prototype.notes=$util.emptyArray,Ye.prototype.totalTime=0,Ye.prototype.totalQuantizedSteps=$util.Long?$util.Long.fromBits(0,0,!1):0,Ye.prototype.pitchBends=$util.emptyArray,Ye.prototype.controlChanges=$util.emptyArray,Ye.prototype.partInfos=$util.emptyArray,Ye.prototype.sourceInfo=null,Ye.prototype.textAnnotations=$util.emptyArray,Ye.prototype.sectionAnnotations=$util.emptyArray,Ye.prototype.sectionGroups=$util.emptyArray,Ye.prototype.quantizationInfo=null,Ye.prototype.subsequenceInfo=null,Ye.prototype.sequenceMetadata=null,Ye.create=function(tt){return new Ye(tt)},Ye.encode=function(tt,st){if(st||(st=$Writer.create()),tt.id!=null&&tt.hasOwnProperty("id")&&st.uint32(10).string(tt.id),tt.filename!=null&&tt.hasOwnProperty("filename")&&st.uint32(18).string(tt.filename),tt.collectionName!=null&&tt.hasOwnProperty("collectionName")&&st.uint32(26).string(tt.collectionName),tt.ticksPerQuarter!=null&&tt.hasOwnProperty("ticksPerQuarter")&&st.uint32(32).int32(tt.ticksPerQuarter),tt.timeSignatures!=null&&tt.timeSignatures.length)for(var rt=0;rt<tt.timeSignatures.length;++rt)$root.tensorflow.magenta.NoteSequence.TimeSignature.encode(tt.timeSignatures[rt],st.uint32(42).fork()).ldelim();if(tt.keySignatures!=null&&tt.keySignatures.length)for(var rt=0;rt<tt.keySignatures.length;++rt)$root.tensorflow.magenta.NoteSequence.KeySignature.encode(tt.keySignatures[rt],st.uint32(50).fork()).ldelim();if(tt.tempos!=null&&tt.tempos.length)for(var rt=0;rt<tt.tempos.length;++rt)$root.tensorflow.magenta.NoteSequence.Tempo.encode(tt.tempos[rt],st.uint32(58).fork()).ldelim();if(tt.notes!=null&&tt.notes.length)for(var rt=0;rt<tt.notes.length;++rt)$root.tensorflow.magenta.NoteSequence.Note.encode(tt.notes[rt],st.uint32(66).fork()).ldelim();if(tt.totalTime!=null&&tt.hasOwnProperty("totalTime")&&st.uint32(73).double(tt.totalTime),tt.pitchBends!=null&&tt.pitchBends.length)for(var rt=0;rt<tt.pitchBends.length;++rt)$root.tensorflow.magenta.NoteSequence.PitchBend.encode(tt.pitchBends[rt],st.uint32(82).fork()).ldelim();if(tt.controlChanges!=null&&tt.controlChanges.length)for(var rt=0;rt<tt.controlChanges.length;++rt)$root.tensorflow.magenta.NoteSequence.ControlChange.encode(tt.controlChanges[rt],st.uint32(90).fork()).ldelim();if(tt.partInfos!=null&&tt.partInfos.length)for(var rt=0;rt<tt.partInfos.length;++rt)$root.tensorflow.magenta.NoteSequence.PartInfo.encode(tt.partInfos[rt],st.uint32(98).fork()).ldelim();if(tt.sourceInfo!=null&&tt.hasOwnProperty("sourceInfo")&&$root.tensorflow.magenta.NoteSequence.SourceInfo.encode(tt.sourceInfo,st.uint32(106).fork()).ldelim(),tt.textAnnotations!=null&&tt.textAnnotations.length)for(var rt=0;rt<tt.textAnnotations.length;++rt)$root.tensorflow.magenta.NoteSequence.TextAnnotation.encode(tt.textAnnotations[rt],st.uint32(114).fork()).ldelim();if(tt.quantizationInfo!=null&&tt.hasOwnProperty("quantizationInfo")&&$root.tensorflow.magenta.NoteSequence.QuantizationInfo.encode(tt.quantizationInfo,st.uint32(122).fork()).ldelim(),tt.totalQuantizedSteps!=null&&tt.hasOwnProperty("totalQuantizedSteps")&&st.uint32(128).int64(tt.totalQuantizedSteps),tt.subsequenceInfo!=null&&tt.hasOwnProperty("subsequenceInfo")&&$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.encode(tt.subsequenceInfo,st.uint32(138).fork()).ldelim(),tt.referenceNumber!=null&&tt.hasOwnProperty("referenceNumber")&&st.uint32(144).int64(tt.referenceNumber),tt.sequenceMetadata!=null&&tt.hasOwnProperty("sequenceMetadata")&&$root.tensorflow.magenta.SequenceMetadata.encode(tt.sequenceMetadata,st.uint32(154).fork()).ldelim(),tt.sectionAnnotations!=null&&tt.sectionAnnotations.length)for(var rt=0;rt<tt.sectionAnnotations.length;++rt)$root.tensorflow.magenta.NoteSequence.SectionAnnotation.encode(tt.sectionAnnotations[rt],st.uint32(162).fork()).ldelim();if(tt.sectionGroups!=null&&tt.sectionGroups.length)for(var rt=0;rt<tt.sectionGroups.length;++rt)$root.tensorflow.magenta.NoteSequence.SectionGroup.encode(tt.sectionGroups[rt],st.uint32(170).fork()).ldelim();return st},Ye.encodeDelimited=function(tt,st){return this.encode(tt,st).ldelim()},Ye.decode=function(tt,st){tt instanceof $Reader||(tt=$Reader.create(tt));for(var rt=st===void 0?tt.len:tt.pos+st,it=new $root.tensorflow.magenta.NoteSequence;tt.pos<rt;){var ot=tt.uint32();switch(ot>>>3){case 1:it.id=tt.string();break;case 2:it.filename=tt.string();break;case 18:it.referenceNumber=$util.Long?tt.int64().toNumber():tt.int64();break;case 3:it.collectionName=tt.string();break;case 4:it.ticksPerQuarter=tt.int32();break;case 5:it.timeSignatures&&it.timeSignatures.length||(it.timeSignatures=[]),it.timeSignatures.push($root.tensorflow.magenta.NoteSequence.TimeSignature.decode(tt,tt.uint32()));break;case 6:it.keySignatures&&it.keySignatures.length||(it.keySignatures=[]),it.keySignatures.push($root.tensorflow.magenta.NoteSequence.KeySignature.decode(tt,tt.uint32()));break;case 7:it.tempos&&it.tempos.length||(it.tempos=[]),it.tempos.push($root.tensorflow.magenta.NoteSequence.Tempo.decode(tt,tt.uint32()));break;case 8:it.notes&&it.notes.length||(it.notes=[]),it.notes.push($root.tensorflow.magenta.NoteSequence.Note.decode(tt,tt.uint32()));break;case 9:it.totalTime=tt.double();break;case 16:it.totalQuantizedSteps=$util.Long?tt.int64().toNumber():tt.int64();break;case 10:it.pitchBends&&it.pitchBends.length||(it.pitchBends=[]),it.pitchBends.push($root.tensorflow.magenta.NoteSequence.PitchBend.decode(tt,tt.uint32()));break;case 11:it.controlChanges&&it.controlChanges.length||(it.controlChanges=[]),it.controlChanges.push($root.tensorflow.magenta.NoteSequence.ControlChange.decode(tt,tt.uint32()));break;case 12:it.partInfos&&it.partInfos.length||(it.partInfos=[]),it.partInfos.push($root.tensorflow.magenta.NoteSequence.PartInfo.decode(tt,tt.uint32()));break;case 13:it.sourceInfo=$root.tensorflow.magenta.NoteSequence.SourceInfo.decode(tt,tt.uint32());break;case 14:it.textAnnotations&&it.textAnnotations.length||(it.textAnnotations=[]),it.textAnnotations.push($root.tensorflow.magenta.NoteSequence.TextAnnotation.decode(tt,tt.uint32()));break;case 20:it.sectionAnnotations&&it.sectionAnnotations.length||(it.sectionAnnotations=[]),it.sectionAnnotations.push($root.tensorflow.magenta.NoteSequence.SectionAnnotation.decode(tt,tt.uint32()));break;case 21:it.sectionGroups&&it.sectionGroups.length||(it.sectionGroups=[]),it.sectionGroups.push($root.tensorflow.magenta.NoteSequence.SectionGroup.decode(tt,tt.uint32()));break;case 15:it.quantizationInfo=$root.tensorflow.magenta.NoteSequence.QuantizationInfo.decode(tt,tt.uint32());break;case 17:it.subsequenceInfo=$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.decode(tt,tt.uint32());break;case 19:it.sequenceMetadata=$root.tensorflow.magenta.SequenceMetadata.decode(tt,tt.uint32());break;default:tt.skipType(ot&7);break}}return it},Ye.decodeDelimited=function(tt){return tt instanceof $Reader||(tt=new $Reader(tt)),this.decode(tt,tt.uint32())},Ye.verify=function(tt){if(typeof tt!="object"||tt===null)return"object expected";if(tt.id!=null&&tt.hasOwnProperty("id")&&!$util.isString(tt.id))return"id: string expected";if(tt.filename!=null&&tt.hasOwnProperty("filename")&&!$util.isString(tt.filename))return"filename: string expected";if(tt.referenceNumber!=null&&tt.hasOwnProperty("referenceNumber")&&!$util.isInteger(tt.referenceNumber)&&!(tt.referenceNumber&&$util.isInteger(tt.referenceNumber.low)&&$util.isInteger(tt.referenceNumber.high)))return"referenceNumber: integer|Long expected";if(tt.collectionName!=null&&tt.hasOwnProperty("collectionName")&&!$util.isString(tt.collectionName))return"collectionName: string expected";if(tt.ticksPerQuarter!=null&&tt.hasOwnProperty("ticksPerQuarter")&&!$util.isInteger(tt.ticksPerQuarter))return"ticksPerQuarter: integer expected";if(tt.timeSignatures!=null&&tt.hasOwnProperty("timeSignatures")){if(!Array.isArray(tt.timeSignatures))return"timeSignatures: array expected";for(var st=0;st<tt.timeSignatures.length;++st){var rt=$root.tensorflow.magenta.NoteSequence.TimeSignature.verify(tt.timeSignatures[st]);if(rt)return"timeSignatures."+rt}}if(tt.keySignatures!=null&&tt.hasOwnProperty("keySignatures")){if(!Array.isArray(tt.keySignatures))return"keySignatures: array expected";for(var st=0;st<tt.keySignatures.length;++st){var rt=$root.tensorflow.magenta.NoteSequence.KeySignature.verify(tt.keySignatures[st]);if(rt)return"keySignatures."+rt}}if(tt.tempos!=null&&tt.hasOwnProperty("tempos")){if(!Array.isArray(tt.tempos))return"tempos: array expected";for(var st=0;st<tt.tempos.length;++st){var rt=$root.tensorflow.magenta.NoteSequence.Tempo.verify(tt.tempos[st]);if(rt)return"tempos."+rt}}if(tt.notes!=null&&tt.hasOwnProperty("notes")){if(!Array.isArray(tt.notes))return"notes: array expected";for(var st=0;st<tt.notes.length;++st){var rt=$root.tensorflow.magenta.NoteSequence.Note.verify(tt.notes[st]);if(rt)return"notes."+rt}}if(tt.totalTime!=null&&tt.hasOwnProperty("totalTime")&&typeof tt.totalTime!="number")return"totalTime: number expected";if(tt.totalQuantizedSteps!=null&&tt.hasOwnProperty("totalQuantizedSteps")&&!$util.isInteger(tt.totalQuantizedSteps)&&!(tt.totalQuantizedSteps&&$util.isInteger(tt.totalQuantizedSteps.low)&&$util.isInteger(tt.totalQuantizedSteps.high)))return"totalQuantizedSteps: integer|Long expected";if(tt.pitchBends!=null&&tt.hasOwnProperty("pitchBends")){if(!Array.isArray(tt.pitchBends))return"pitchBends: array expected";for(var st=0;st<tt.pitchBends.length;++st){var rt=$root.tensorflow.magenta.NoteSequence.PitchBend.verify(tt.pitchBends[st]);if(rt)return"pitchBends."+rt}}if(tt.controlChanges!=null&&tt.hasOwnProperty("controlChanges")){if(!Array.isArray(tt.controlChanges))return"controlChanges: array expected";for(var st=0;st<tt.controlChanges.length;++st){var rt=$root.tensorflow.magenta.NoteSequence.ControlChange.verify(tt.controlChanges[st]);if(rt)return"controlChanges."+rt}}if(tt.partInfos!=null&&tt.hasOwnProperty("partInfos")){if(!Array.isArray(tt.partInfos))return"partInfos: array expected";for(var st=0;st<tt.partInfos.length;++st){var rt=$root.tensorflow.magenta.NoteSequence.PartInfo.verify(tt.partInfos[st]);if(rt)return"partInfos."+rt}}if(tt.sourceInfo!=null&&tt.hasOwnProperty("sourceInfo")){var rt=$root.tensorflow.magenta.NoteSequence.SourceInfo.verify(tt.sourceInfo);if(rt)return"sourceInfo."+rt}if(tt.textAnnotations!=null&&tt.hasOwnProperty("textAnnotations")){if(!Array.isArray(tt.textAnnotations))return"textAnnotations: array expected";for(var st=0;st<tt.textAnnotations.length;++st){var rt=$root.tensorflow.magenta.NoteSequence.TextAnnotation.verify(tt.textAnnotations[st]);if(rt)return"textAnnotations."+rt}}if(tt.sectionAnnotations!=null&&tt.hasOwnProperty("sectionAnnotations")){if(!Array.isArray(tt.sectionAnnotations))return"sectionAnnotations: array expected";for(var st=0;st<tt.sectionAnnotations.length;++st){var rt=$root.tensorflow.magenta.NoteSequence.SectionAnnotation.verify(tt.sectionAnnotations[st]);if(rt)return"sectionAnnotations."+rt}}if(tt.sectionGroups!=null&&tt.hasOwnProperty("sectionGroups")){if(!Array.isArray(tt.sectionGroups))return"sectionGroups: array expected";for(var st=0;st<tt.sectionGroups.length;++st){var rt=$root.tensorflow.magenta.NoteSequence.SectionGroup.verify(tt.sectionGroups[st]);if(rt)return"sectionGroups."+rt}}if(tt.quantizationInfo!=null&&tt.hasOwnProperty("quantizationInfo")){var rt=$root.tensorflow.magenta.NoteSequence.QuantizationInfo.verify(tt.quantizationInfo);if(rt)return"quantizationInfo."+rt}if(tt.subsequenceInfo!=null&&tt.hasOwnProperty("subsequenceInfo")){var rt=$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.verify(tt.subsequenceInfo);if(rt)return"subsequenceInfo."+rt}if(tt.sequenceMetadata!=null&&tt.hasOwnProperty("sequenceMetadata")){var rt=$root.tensorflow.magenta.SequenceMetadata.verify(tt.sequenceMetadata);if(rt)return"sequenceMetadata."+rt}return null},Ye.fromObject=function(tt){if(tt instanceof $root.tensorflow.magenta.NoteSequence)return tt;var st=new $root.tensorflow.magenta.NoteSequence;if(tt.id!=null&&(st.id=String(tt.id)),tt.filename!=null&&(st.filename=String(tt.filename)),tt.referenceNumber!=null&&($util.Long?(st.referenceNumber=$util.Long.fromValue(tt.referenceNumber)).unsigned=!1:typeof tt.referenceNumber=="string"?st.referenceNumber=parseInt(tt.referenceNumber,10):typeof tt.referenceNumber=="number"?st.referenceNumber=tt.referenceNumber:typeof tt.referenceNumber=="object"&&(st.referenceNumber=new $util.LongBits(tt.referenceNumber.low>>>0,tt.referenceNumber.high>>>0).toNumber())),tt.collectionName!=null&&(st.collectionName=String(tt.collectionName)),tt.ticksPerQuarter!=null&&(st.ticksPerQuarter=tt.ticksPerQuarter|0),tt.timeSignatures){if(!Array.isArray(tt.timeSignatures))throw TypeError(".tensorflow.magenta.NoteSequence.timeSignatures: array expected");st.timeSignatures=[];for(var rt=0;rt<tt.timeSignatures.length;++rt){if(typeof tt.timeSignatures[rt]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.timeSignatures: object expected");st.timeSignatures[rt]=$root.tensorflow.magenta.NoteSequence.TimeSignature.fromObject(tt.timeSignatures[rt])}}if(tt.keySignatures){if(!Array.isArray(tt.keySignatures))throw TypeError(".tensorflow.magenta.NoteSequence.keySignatures: array expected");st.keySignatures=[];for(var rt=0;rt<tt.keySignatures.length;++rt){if(typeof tt.keySignatures[rt]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.keySignatures: object expected");st.keySignatures[rt]=$root.tensorflow.magenta.NoteSequence.KeySignature.fromObject(tt.keySignatures[rt])}}if(tt.tempos){if(!Array.isArray(tt.tempos))throw TypeError(".tensorflow.magenta.NoteSequence.tempos: array expected");st.tempos=[];for(var rt=0;rt<tt.tempos.length;++rt){if(typeof tt.tempos[rt]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.tempos: object expected");st.tempos[rt]=$root.tensorflow.magenta.NoteSequence.Tempo.fromObject(tt.tempos[rt])}}if(tt.notes){if(!Array.isArray(tt.notes))throw TypeError(".tensorflow.magenta.NoteSequence.notes: array expected");st.notes=[];for(var rt=0;rt<tt.notes.length;++rt){if(typeof tt.notes[rt]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.notes: object expected");st.notes[rt]=$root.tensorflow.magenta.NoteSequence.Note.fromObject(tt.notes[rt])}}if(tt.totalTime!=null&&(st.totalTime=Number(tt.totalTime)),tt.totalQuantizedSteps!=null&&($util.Long?(st.totalQuantizedSteps=$util.Long.fromValue(tt.totalQuantizedSteps)).unsigned=!1:typeof tt.totalQuantizedSteps=="string"?st.totalQuantizedSteps=parseInt(tt.totalQuantizedSteps,10):typeof tt.totalQuantizedSteps=="number"?st.totalQuantizedSteps=tt.totalQuantizedSteps:typeof tt.totalQuantizedSteps=="object"&&(st.totalQuantizedSteps=new $util.LongBits(tt.totalQuantizedSteps.low>>>0,tt.totalQuantizedSteps.high>>>0).toNumber())),tt.pitchBends){if(!Array.isArray(tt.pitchBends))throw TypeError(".tensorflow.magenta.NoteSequence.pitchBends: array expected");st.pitchBends=[];for(var rt=0;rt<tt.pitchBends.length;++rt){if(typeof tt.pitchBends[rt]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.pitchBends: object expected");st.pitchBends[rt]=$root.tensorflow.magenta.NoteSequence.PitchBend.fromObject(tt.pitchBends[rt])}}if(tt.controlChanges){if(!Array.isArray(tt.controlChanges))throw TypeError(".tensorflow.magenta.NoteSequence.controlChanges: array expected");st.controlChanges=[];for(var rt=0;rt<tt.controlChanges.length;++rt){if(typeof tt.controlChanges[rt]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.controlChanges: object expected");st.controlChanges[rt]=$root.tensorflow.magenta.NoteSequence.ControlChange.fromObject(tt.controlChanges[rt])}}if(tt.partInfos){if(!Array.isArray(tt.partInfos))throw TypeError(".tensorflow.magenta.NoteSequence.partInfos: array expected");st.partInfos=[];for(var rt=0;rt<tt.partInfos.length;++rt){if(typeof tt.partInfos[rt]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.partInfos: object expected");st.partInfos[rt]=$root.tensorflow.magenta.NoteSequence.PartInfo.fromObject(tt.partInfos[rt])}}if(tt.sourceInfo!=null){if(typeof tt.sourceInfo!="object")throw TypeError(".tensorflow.magenta.NoteSequence.sourceInfo: object expected");st.sourceInfo=$root.tensorflow.magenta.NoteSequence.SourceInfo.fromObject(tt.sourceInfo)}if(tt.textAnnotations){if(!Array.isArray(tt.textAnnotations))throw TypeError(".tensorflow.magenta.NoteSequence.textAnnotations: array expected");st.textAnnotations=[];for(var rt=0;rt<tt.textAnnotations.length;++rt){if(typeof tt.textAnnotations[rt]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.textAnnotations: object expected");st.textAnnotations[rt]=$root.tensorflow.magenta.NoteSequence.TextAnnotation.fromObject(tt.textAnnotations[rt])}}if(tt.sectionAnnotations){if(!Array.isArray(tt.sectionAnnotations))throw TypeError(".tensorflow.magenta.NoteSequence.sectionAnnotations: array expected");st.sectionAnnotations=[];for(var rt=0;rt<tt.sectionAnnotations.length;++rt){if(typeof tt.sectionAnnotations[rt]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.sectionAnnotations: object expected");st.sectionAnnotations[rt]=$root.tensorflow.magenta.NoteSequence.SectionAnnotation.fromObject(tt.sectionAnnotations[rt])}}if(tt.sectionGroups){if(!Array.isArray(tt.sectionGroups))throw TypeError(".tensorflow.magenta.NoteSequence.sectionGroups: array expected");st.sectionGroups=[];for(var rt=0;rt<tt.sectionGroups.length;++rt){if(typeof tt.sectionGroups[rt]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.sectionGroups: object expected");st.sectionGroups[rt]=$root.tensorflow.magenta.NoteSequence.SectionGroup.fromObject(tt.sectionGroups[rt])}}if(tt.quantizationInfo!=null){if(typeof tt.quantizationInfo!="object")throw TypeError(".tensorflow.magenta.NoteSequence.quantizationInfo: object expected");st.quantizationInfo=$root.tensorflow.magenta.NoteSequence.QuantizationInfo.fromObject(tt.quantizationInfo)}if(tt.subsequenceInfo!=null){if(typeof tt.subsequenceInfo!="object")throw TypeError(".tensorflow.magenta.NoteSequence.subsequenceInfo: object expected");st.subsequenceInfo=$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.fromObject(tt.subsequenceInfo)}if(tt.sequenceMetadata!=null){if(typeof tt.sequenceMetadata!="object")throw TypeError(".tensorflow.magenta.NoteSequence.sequenceMetadata: object expected");st.sequenceMetadata=$root.tensorflow.magenta.SequenceMetadata.fromObject(tt.sequenceMetadata)}return st},Ye.toObject=function(tt,st){st||(st={});var rt={};if((st.arrays||st.defaults)&&(rt.timeSignatures=[],rt.keySignatures=[],rt.tempos=[],rt.notes=[],rt.pitchBends=[],rt.controlChanges=[],rt.partInfos=[],rt.textAnnotations=[],rt.sectionAnnotations=[],rt.sectionGroups=[]),st.defaults){if(rt.id="",rt.filename="",rt.collectionName="",rt.ticksPerQuarter=0,rt.totalTime=0,rt.sourceInfo=null,rt.quantizationInfo=null,$util.Long){var it=new $util.Long(0,0,!1);rt.totalQuantizedSteps=st.longs===String?it.toString():st.longs===Number?it.toNumber():it}else rt.totalQuantizedSteps=st.longs===String?"0":0;if(rt.subsequenceInfo=null,$util.Long){var it=new $util.Long(0,0,!1);rt.referenceNumber=st.longs===String?it.toString():st.longs===Number?it.toNumber():it}else rt.referenceNumber=st.longs===String?"0":0;rt.sequenceMetadata=null}if(tt.id!=null&&tt.hasOwnProperty("id")&&(rt.id=tt.id),tt.filename!=null&&tt.hasOwnProperty("filename")&&(rt.filename=tt.filename),tt.collectionName!=null&&tt.hasOwnProperty("collectionName")&&(rt.collectionName=tt.collectionName),tt.ticksPerQuarter!=null&&tt.hasOwnProperty("ticksPerQuarter")&&(rt.ticksPerQuarter=tt.ticksPerQuarter),tt.timeSignatures&&tt.timeSignatures.length){rt.timeSignatures=[];for(var ot=0;ot<tt.timeSignatures.length;++ot)rt.timeSignatures[ot]=$root.tensorflow.magenta.NoteSequence.TimeSignature.toObject(tt.timeSignatures[ot],st)}if(tt.keySignatures&&tt.keySignatures.length){rt.keySignatures=[];for(var ot=0;ot<tt.keySignatures.length;++ot)rt.keySignatures[ot]=$root.tensorflow.magenta.NoteSequence.KeySignature.toObject(tt.keySignatures[ot],st)}if(tt.tempos&&tt.tempos.length){rt.tempos=[];for(var ot=0;ot<tt.tempos.length;++ot)rt.tempos[ot]=$root.tensorflow.magenta.NoteSequence.Tempo.toObject(tt.tempos[ot],st)}if(tt.notes&&tt.notes.length){rt.notes=[];for(var ot=0;ot<tt.notes.length;++ot)rt.notes[ot]=$root.tensorflow.magenta.NoteSequence.Note.toObject(tt.notes[ot],st)}if(tt.totalTime!=null&&tt.hasOwnProperty("totalTime")&&(rt.totalTime=st.json&&!isFinite(tt.totalTime)?String(tt.totalTime):tt.totalTime),tt.pitchBends&&tt.pitchBends.length){rt.pitchBends=[];for(var ot=0;ot<tt.pitchBends.length;++ot)rt.pitchBends[ot]=$root.tensorflow.magenta.NoteSequence.PitchBend.toObject(tt.pitchBends[ot],st)}if(tt.controlChanges&&tt.controlChanges.length){rt.controlChanges=[];for(var ot=0;ot<tt.controlChanges.length;++ot)rt.controlChanges[ot]=$root.tensorflow.magenta.NoteSequence.ControlChange.toObject(tt.controlChanges[ot],st)}if(tt.partInfos&&tt.partInfos.length){rt.partInfos=[];for(var ot=0;ot<tt.partInfos.length;++ot)rt.partInfos[ot]=$root.tensorflow.magenta.NoteSequence.PartInfo.toObject(tt.partInfos[ot],st)}if(tt.sourceInfo!=null&&tt.hasOwnProperty("sourceInfo")&&(rt.sourceInfo=$root.tensorflow.magenta.NoteSequence.SourceInfo.toObject(tt.sourceInfo,st)),tt.textAnnotations&&tt.textAnnotations.length){rt.textAnnotations=[];for(var ot=0;ot<tt.textAnnotations.length;++ot)rt.textAnnotations[ot]=$root.tensorflow.magenta.NoteSequence.TextAnnotation.toObject(tt.textAnnotations[ot],st)}if(tt.quantizationInfo!=null&&tt.hasOwnProperty("quantizationInfo")&&(rt.quantizationInfo=$root.tensorflow.magenta.NoteSequence.QuantizationInfo.toObject(tt.quantizationInfo,st)),tt.totalQuantizedSteps!=null&&tt.hasOwnProperty("totalQuantizedSteps")&&(typeof tt.totalQuantizedSteps=="number"?rt.totalQuantizedSteps=st.longs===String?String(tt.totalQuantizedSteps):tt.totalQuantizedSteps:rt.totalQuantizedSteps=st.longs===String?$util.Long.prototype.toString.call(tt.totalQuantizedSteps):st.longs===Number?new $util.LongBits(tt.totalQuantizedSteps.low>>>0,tt.totalQuantizedSteps.high>>>0).toNumber():tt.totalQuantizedSteps),tt.subsequenceInfo!=null&&tt.hasOwnProperty("subsequenceInfo")&&(rt.subsequenceInfo=$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.toObject(tt.subsequenceInfo,st)),tt.referenceNumber!=null&&tt.hasOwnProperty("referenceNumber")&&(typeof tt.referenceNumber=="number"?rt.referenceNumber=st.longs===String?String(tt.referenceNumber):tt.referenceNumber:rt.referenceNumber=st.longs===String?$util.Long.prototype.toString.call(tt.referenceNumber):st.longs===Number?new $util.LongBits(tt.referenceNumber.low>>>0,tt.referenceNumber.high>>>0).toNumber():tt.referenceNumber),tt.sequenceMetadata!=null&&tt.hasOwnProperty("sequenceMetadata")&&(rt.sequenceMetadata=$root.tensorflow.magenta.SequenceMetadata.toObject(tt.sequenceMetadata,st)),tt.sectionAnnotations&&tt.sectionAnnotations.length){rt.sectionAnnotations=[];for(var ot=0;ot<tt.sectionAnnotations.length;++ot)rt.sectionAnnotations[ot]=$root.tensorflow.magenta.NoteSequence.SectionAnnotation.toObject(tt.sectionAnnotations[ot],st)}if(tt.sectionGroups&&tt.sectionGroups.length){rt.sectionGroups=[];for(var ot=0;ot<tt.sectionGroups.length;++ot)rt.sectionGroups[ot]=$root.tensorflow.magenta.NoteSequence.SectionGroup.toObject(tt.sectionGroups[ot],st)}return rt},Ye.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Ye.Note=(function(){function Je(tt){if(tt)for(var st=Object.keys(tt),rt=0;rt<st.length;++rt)tt[st[rt]]!=null&&(this[st[rt]]=tt[st[rt]])}return Je.prototype.pitch=0,Je.prototype.pitchName=0,Je.prototype.velocity=0,Je.prototype.startTime=0,Je.prototype.quantizedStartStep=$util.Long?$util.Long.fromBits(0,0,!1):0,Je.prototype.endTime=0,Je.prototype.quantizedEndStep=$util.Long?$util.Long.fromBits(0,0,!1):0,Je.prototype.numerator=0,Je.prototype.denominator=0,Je.prototype.instrument=0,Je.prototype.program=0,Je.prototype.isDrum=!1,Je.prototype.part=0,Je.prototype.voice=0,Je.create=function(st){return new Je(st)},Je.encode=function(st,rt){return rt||(rt=$Writer.create()),st.pitch!=null&&st.hasOwnProperty("pitch")&&rt.uint32(8).int32(st.pitch),st.velocity!=null&&st.hasOwnProperty("velocity")&&rt.uint32(16).int32(st.velocity),st.startTime!=null&&st.hasOwnProperty("startTime")&&rt.uint32(25).double(st.startTime),st.endTime!=null&&st.hasOwnProperty("endTime")&&rt.uint32(33).double(st.endTime),st.numerator!=null&&st.hasOwnProperty("numerator")&&rt.uint32(40).int32(st.numerator),st.denominator!=null&&st.hasOwnProperty("denominator")&&rt.uint32(48).int32(st.denominator),st.instrument!=null&&st.hasOwnProperty("instrument")&&rt.uint32(56).int32(st.instrument),st.program!=null&&st.hasOwnProperty("program")&&rt.uint32(64).int32(st.program),st.isDrum!=null&&st.hasOwnProperty("isDrum")&&rt.uint32(72).bool(st.isDrum),st.part!=null&&st.hasOwnProperty("part")&&rt.uint32(80).int32(st.part),st.pitchName!=null&&st.hasOwnProperty("pitchName")&&rt.uint32(88).int32(st.pitchName),st.voice!=null&&st.hasOwnProperty("voice")&&rt.uint32(96).int32(st.voice),st.quantizedStartStep!=null&&st.hasOwnProperty("quantizedStartStep")&&rt.uint32(104).int64(st.quantizedStartStep),st.quantizedEndStep!=null&&st.hasOwnProperty("quantizedEndStep")&&rt.uint32(112).int64(st.quantizedEndStep),rt},Je.encodeDelimited=function(st,rt){return this.encode(st,rt).ldelim()},Je.decode=function(st,rt){st instanceof $Reader||(st=$Reader.create(st));for(var it=rt===void 0?st.len:st.pos+rt,ot=new $root.tensorflow.magenta.NoteSequence.Note;st.pos<it;){var at=st.uint32();switch(at>>>3){case 1:ot.pitch=st.int32();break;case 11:ot.pitchName=st.int32();break;case 2:ot.velocity=st.int32();break;case 3:ot.startTime=st.double();break;case 13:ot.quantizedStartStep=$util.Long?st.int64().toNumber():st.int64();break;case 4:ot.endTime=st.double();break;case 14:ot.quantizedEndStep=$util.Long?st.int64().toNumber():st.int64();break;case 5:ot.numerator=st.int32();break;case 6:ot.denominator=st.int32();break;case 7:ot.instrument=st.int32();break;case 8:ot.program=st.int32();break;case 9:ot.isDrum=st.bool();break;case 10:ot.part=st.int32();break;case 12:ot.voice=st.int32();break;default:st.skipType(at&7);break}}return ot},Je.decodeDelimited=function(st){return st instanceof $Reader||(st=new $Reader(st)),this.decode(st,st.uint32())},Je.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.pitch!=null&&st.hasOwnProperty("pitch")&&!$util.isInteger(st.pitch))return"pitch: integer expected";if(st.pitchName!=null&&st.hasOwnProperty("pitchName"))switch(st.pitchName){default:return"pitchName: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:break}return st.velocity!=null&&st.hasOwnProperty("velocity")&&!$util.isInteger(st.velocity)?"velocity: integer expected":st.startTime!=null&&st.hasOwnProperty("startTime")&&typeof st.startTime!="number"?"startTime: number expected":st.quantizedStartStep!=null&&st.hasOwnProperty("quantizedStartStep")&&!$util.isInteger(st.quantizedStartStep)&&!(st.quantizedStartStep&&$util.isInteger(st.quantizedStartStep.low)&&$util.isInteger(st.quantizedStartStep.high))?"quantizedStartStep: integer|Long expected":st.endTime!=null&&st.hasOwnProperty("endTime")&&typeof st.endTime!="number"?"endTime: number expected":st.quantizedEndStep!=null&&st.hasOwnProperty("quantizedEndStep")&&!$util.isInteger(st.quantizedEndStep)&&!(st.quantizedEndStep&&$util.isInteger(st.quantizedEndStep.low)&&$util.isInteger(st.quantizedEndStep.high))?"quantizedEndStep: integer|Long expected":st.numerator!=null&&st.hasOwnProperty("numerator")&&!$util.isInteger(st.numerator)?"numerator: integer expected":st.denominator!=null&&st.hasOwnProperty("denominator")&&!$util.isInteger(st.denominator)?"denominator: integer expected":st.instrument!=null&&st.hasOwnProperty("instrument")&&!$util.isInteger(st.instrument)?"instrument: integer expected":st.program!=null&&st.hasOwnProperty("program")&&!$util.isInteger(st.program)?"program: integer expected":st.isDrum!=null&&st.hasOwnProperty("isDrum")&&typeof st.isDrum!="boolean"?"isDrum: boolean expected":st.part!=null&&st.hasOwnProperty("part")&&!$util.isInteger(st.part)?"part: integer expected":st.voice!=null&&st.hasOwnProperty("voice")&&!$util.isInteger(st.voice)?"voice: integer expected":null},Je.fromObject=function(st){if(st instanceof $root.tensorflow.magenta.NoteSequence.Note)return st;var rt=new $root.tensorflow.magenta.NoteSequence.Note;switch(st.pitch!=null&&(rt.pitch=st.pitch|0),st.pitchName){case"UNKNOWN_PITCH_NAME":case 0:rt.pitchName=0;break;case"F_FLAT_FLAT":case 1:rt.pitchName=1;break;case"C_FLAT_FLAT":case 2:rt.pitchName=2;break;case"G_FLAT_FLAT":case 3:rt.pitchName=3;break;case"D_FLAT_FLAT":case 4:rt.pitchName=4;break;case"A_FLAT_FLAT":case 5:rt.pitchName=5;break;case"E_FLAT_FLAT":case 6:rt.pitchName=6;break;case"B_FLAT_FLAT":case 7:rt.pitchName=7;break;case"F_FLAT":case 8:rt.pitchName=8;break;case"C_FLAT":case 9:rt.pitchName=9;break;case"G_FLAT":case 10:rt.pitchName=10;break;case"D_FLAT":case 11:rt.pitchName=11;break;case"A_FLAT":case 12:rt.pitchName=12;break;case"E_FLAT":case 13:rt.pitchName=13;break;case"B_FLAT":case 14:rt.pitchName=14;break;case"F":case 15:rt.pitchName=15;break;case"C":case 16:rt.pitchName=16;break;case"G":case 17:rt.pitchName=17;break;case"D":case 18:rt.pitchName=18;break;case"A":case 19:rt.pitchName=19;break;case"E":case 20:rt.pitchName=20;break;case"B":case 21:rt.pitchName=21;break;case"F_SHARP":case 22:rt.pitchName=22;break;case"C_SHARP":case 23:rt.pitchName=23;break;case"G_SHARP":case 24:rt.pitchName=24;break;case"D_SHARP":case 25:rt.pitchName=25;break;case"A_SHARP":case 26:rt.pitchName=26;break;case"E_SHARP":case 27:rt.pitchName=27;break;case"B_SHARP":case 28:rt.pitchName=28;break;case"F_SHARP_SHARP":case 29:rt.pitchName=29;break;case"C_SHARP_SHARP":case 30:rt.pitchName=30;break;case"G_SHARP_SHARP":case 31:rt.pitchName=31;break;case"D_SHARP_SHARP":case 32:rt.pitchName=32;break;case"A_SHARP_SHARP":case 33:rt.pitchName=33;break;case"E_SHARP_SHARP":case 34:rt.pitchName=34;break;case"B_SHARP_SHARP":case 35:rt.pitchName=35;break}return st.velocity!=null&&(rt.velocity=st.velocity|0),st.startTime!=null&&(rt.startTime=Number(st.startTime)),st.quantizedStartStep!=null&&($util.Long?(rt.quantizedStartStep=$util.Long.fromValue(st.quantizedStartStep)).unsigned=!1:typeof st.quantizedStartStep=="string"?rt.quantizedStartStep=parseInt(st.quantizedStartStep,10):typeof st.quantizedStartStep=="number"?rt.quantizedStartStep=st.quantizedStartStep:typeof st.quantizedStartStep=="object"&&(rt.quantizedStartStep=new $util.LongBits(st.quantizedStartStep.low>>>0,st.quantizedStartStep.high>>>0).toNumber())),st.endTime!=null&&(rt.endTime=Number(st.endTime)),st.quantizedEndStep!=null&&($util.Long?(rt.quantizedEndStep=$util.Long.fromValue(st.quantizedEndStep)).unsigned=!1:typeof st.quantizedEndStep=="string"?rt.quantizedEndStep=parseInt(st.quantizedEndStep,10):typeof st.quantizedEndStep=="number"?rt.quantizedEndStep=st.quantizedEndStep:typeof st.quantizedEndStep=="object"&&(rt.quantizedEndStep=new $util.LongBits(st.quantizedEndStep.low>>>0,st.quantizedEndStep.high>>>0).toNumber())),st.numerator!=null&&(rt.numerator=st.numerator|0),st.denominator!=null&&(rt.denominator=st.denominator|0),st.instrument!=null&&(rt.instrument=st.instrument|0),st.program!=null&&(rt.program=st.program|0),st.isDrum!=null&&(rt.isDrum=!!st.isDrum),st.part!=null&&(rt.part=st.part|0),st.voice!=null&&(rt.voice=st.voice|0),rt},Je.toObject=function(st,rt){rt||(rt={});var it={};if(rt.defaults){if(it.pitch=0,it.velocity=0,it.startTime=0,it.endTime=0,it.numerator=0,it.denominator=0,it.instrument=0,it.program=0,it.isDrum=!1,it.part=0,it.pitchName=rt.enums===String?"UNKNOWN_PITCH_NAME":0,it.voice=0,$util.Long){var ot=new $util.Long(0,0,!1);it.quantizedStartStep=rt.longs===String?ot.toString():rt.longs===Number?ot.toNumber():ot}else it.quantizedStartStep=rt.longs===String?"0":0;if($util.Long){var ot=new $util.Long(0,0,!1);it.quantizedEndStep=rt.longs===String?ot.toString():rt.longs===Number?ot.toNumber():ot}else it.quantizedEndStep=rt.longs===String?"0":0}return st.pitch!=null&&st.hasOwnProperty("pitch")&&(it.pitch=st.pitch),st.velocity!=null&&st.hasOwnProperty("velocity")&&(it.velocity=st.velocity),st.startTime!=null&&st.hasOwnProperty("startTime")&&(it.startTime=rt.json&&!isFinite(st.startTime)?String(st.startTime):st.startTime),st.endTime!=null&&st.hasOwnProperty("endTime")&&(it.endTime=rt.json&&!isFinite(st.endTime)?String(st.endTime):st.endTime),st.numerator!=null&&st.hasOwnProperty("numerator")&&(it.numerator=st.numerator),st.denominator!=null&&st.hasOwnProperty("denominator")&&(it.denominator=st.denominator),st.instrument!=null&&st.hasOwnProperty("instrument")&&(it.instrument=st.instrument),st.program!=null&&st.hasOwnProperty("program")&&(it.program=st.program),st.isDrum!=null&&st.hasOwnProperty("isDrum")&&(it.isDrum=st.isDrum),st.part!=null&&st.hasOwnProperty("part")&&(it.part=st.part),st.pitchName!=null&&st.hasOwnProperty("pitchName")&&(it.pitchName=rt.enums===String?$root.tensorflow.magenta.NoteSequence.PitchName[st.pitchName]:st.pitchName),st.voice!=null&&st.hasOwnProperty("voice")&&(it.voice=st.voice),st.quantizedStartStep!=null&&st.hasOwnProperty("quantizedStartStep")&&(typeof st.quantizedStartStep=="number"?it.quantizedStartStep=rt.longs===String?String(st.quantizedStartStep):st.quantizedStartStep:it.quantizedStartStep=rt.longs===String?$util.Long.prototype.toString.call(st.quantizedStartStep):rt.longs===Number?new $util.LongBits(st.quantizedStartStep.low>>>0,st.quantizedStartStep.high>>>0).toNumber():st.quantizedStartStep),st.quantizedEndStep!=null&&st.hasOwnProperty("quantizedEndStep")&&(typeof st.quantizedEndStep=="number"?it.quantizedEndStep=rt.longs===String?String(st.quantizedEndStep):st.quantizedEndStep:it.quantizedEndStep=rt.longs===String?$util.Long.prototype.toString.call(st.quantizedEndStep):rt.longs===Number?new $util.LongBits(st.quantizedEndStep.low>>>0,st.quantizedEndStep.high>>>0).toNumber():st.quantizedEndStep),it},Je.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Je})(),Ye.PitchName=(function(){var Je={},tt=Object.create(Je);return tt[Je[0]="UNKNOWN_PITCH_NAME"]=0,tt[Je[1]="F_FLAT_FLAT"]=1,tt[Je[2]="C_FLAT_FLAT"]=2,tt[Je[3]="G_FLAT_FLAT"]=3,tt[Je[4]="D_FLAT_FLAT"]=4,tt[Je[5]="A_FLAT_FLAT"]=5,tt[Je[6]="E_FLAT_FLAT"]=6,tt[Je[7]="B_FLAT_FLAT"]=7,tt[Je[8]="F_FLAT"]=8,tt[Je[9]="C_FLAT"]=9,tt[Je[10]="G_FLAT"]=10,tt[Je[11]="D_FLAT"]=11,tt[Je[12]="A_FLAT"]=12,tt[Je[13]="E_FLAT"]=13,tt[Je[14]="B_FLAT"]=14,tt[Je[15]="F"]=15,tt[Je[16]="C"]=16,tt[Je[17]="G"]=17,tt[Je[18]="D"]=18,tt[Je[19]="A"]=19,tt[Je[20]="E"]=20,tt[Je[21]="B"]=21,tt[Je[22]="F_SHARP"]=22,tt[Je[23]="C_SHARP"]=23,tt[Je[24]="G_SHARP"]=24,tt[Je[25]="D_SHARP"]=25,tt[Je[26]="A_SHARP"]=26,tt[Je[27]="E_SHARP"]=27,tt[Je[28]="B_SHARP"]=28,tt[Je[29]="F_SHARP_SHARP"]=29,tt[Je[30]="C_SHARP_SHARP"]=30,tt[Je[31]="G_SHARP_SHARP"]=31,tt[Je[32]="D_SHARP_SHARP"]=32,tt[Je[33]="A_SHARP_SHARP"]=33,tt[Je[34]="E_SHARP_SHARP"]=34,tt[Je[35]="B_SHARP_SHARP"]=35,tt})(),Ye.TimeSignature=(function(){function Je(tt){if(tt)for(var st=Object.keys(tt),rt=0;rt<st.length;++rt)tt[st[rt]]!=null&&(this[st[rt]]=tt[st[rt]])}return Je.prototype.time=0,Je.prototype.numerator=0,Je.prototype.denominator=0,Je.create=function(st){return new Je(st)},Je.encode=function(st,rt){return rt||(rt=$Writer.create()),st.time!=null&&st.hasOwnProperty("time")&&rt.uint32(9).double(st.time),st.numerator!=null&&st.hasOwnProperty("numerator")&&rt.uint32(16).int32(st.numerator),st.denominator!=null&&st.hasOwnProperty("denominator")&&rt.uint32(24).int32(st.denominator),rt},Je.encodeDelimited=function(st,rt){return this.encode(st,rt).ldelim()},Je.decode=function(st,rt){st instanceof $Reader||(st=$Reader.create(st));for(var it=rt===void 0?st.len:st.pos+rt,ot=new $root.tensorflow.magenta.NoteSequence.TimeSignature;st.pos<it;){var at=st.uint32();switch(at>>>3){case 1:ot.time=st.double();break;case 2:ot.numerator=st.int32();break;case 3:ot.denominator=st.int32();break;default:st.skipType(at&7);break}}return ot},Je.decodeDelimited=function(st){return st instanceof $Reader||(st=new $Reader(st)),this.decode(st,st.uint32())},Je.verify=function(st){return typeof st!="object"||st===null?"object expected":st.time!=null&&st.hasOwnProperty("time")&&typeof st.time!="number"?"time: number expected":st.numerator!=null&&st.hasOwnProperty("numerator")&&!$util.isInteger(st.numerator)?"numerator: integer expected":st.denominator!=null&&st.hasOwnProperty("denominator")&&!$util.isInteger(st.denominator)?"denominator: integer expected":null},Je.fromObject=function(st){if(st instanceof $root.tensorflow.magenta.NoteSequence.TimeSignature)return st;var rt=new $root.tensorflow.magenta.NoteSequence.TimeSignature;return st.time!=null&&(rt.time=Number(st.time)),st.numerator!=null&&(rt.numerator=st.numerator|0),st.denominator!=null&&(rt.denominator=st.denominator|0),rt},Je.toObject=function(st,rt){rt||(rt={});var it={};return rt.defaults&&(it.time=0,it.numerator=0,it.denominator=0),st.time!=null&&st.hasOwnProperty("time")&&(it.time=rt.json&&!isFinite(st.time)?String(st.time):st.time),st.numerator!=null&&st.hasOwnProperty("numerator")&&(it.numerator=st.numerator),st.denominator!=null&&st.hasOwnProperty("denominator")&&(it.denominator=st.denominator),it},Je.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Je})(),Ye.KeySignature=(function(){function Je(tt){if(tt)for(var st=Object.keys(tt),rt=0;rt<st.length;++rt)tt[st[rt]]!=null&&(this[st[rt]]=tt[st[rt]])}return Je.prototype.time=0,Je.prototype.key=0,Je.prototype.mode=0,Je.create=function(st){return new Je(st)},Je.encode=function(st,rt){return rt||(rt=$Writer.create()),st.time!=null&&st.hasOwnProperty("time")&&rt.uint32(9).double(st.time),st.key!=null&&st.hasOwnProperty("key")&&rt.uint32(16).int32(st.key),st.mode!=null&&st.hasOwnProperty("mode")&&rt.uint32(24).int32(st.mode),rt},Je.encodeDelimited=function(st,rt){return this.encode(st,rt).ldelim()},Je.decode=function(st,rt){st instanceof $Reader||(st=$Reader.create(st));for(var it=rt===void 0?st.len:st.pos+rt,ot=new $root.tensorflow.magenta.NoteSequence.KeySignature;st.pos<it;){var at=st.uint32();switch(at>>>3){case 1:ot.time=st.double();break;case 2:ot.key=st.int32();break;case 3:ot.mode=st.int32();break;default:st.skipType(at&7);break}}return ot},Je.decodeDelimited=function(st){return st instanceof $Reader||(st=new $Reader(st)),this.decode(st,st.uint32())},Je.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.time!=null&&st.hasOwnProperty("time")&&typeof st.time!="number")return"time: number expected";if(st.key!=null&&st.hasOwnProperty("key"))switch(st.key){default:return"key: enum value expected";case 0:case 1:case 1:case 2:case 3:case 3:case 4:case 5:case 6:case 6:case 7:case 8:case 8:case 9:case 10:case 10:case 11:break}if(st.mode!=null&&st.hasOwnProperty("mode"))switch(st.mode){default:return"mode: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break}return null},Je.fromObject=function(st){if(st instanceof $root.tensorflow.magenta.NoteSequence.KeySignature)return st;var rt=new $root.tensorflow.magenta.NoteSequence.KeySignature;switch(st.time!=null&&(rt.time=Number(st.time)),st.key){case"C":case 0:rt.key=0;break;case"C_SHARP":case 1:rt.key=1;break;case"D_FLAT":case 1:rt.key=1;break;case"D":case 2:rt.key=2;break;case"D_SHARP":case 3:rt.key=3;break;case"E_FLAT":case 3:rt.key=3;break;case"E":case 4:rt.key=4;break;case"F":case 5:rt.key=5;break;case"F_SHARP":case 6:rt.key=6;break;case"G_FLAT":case 6:rt.key=6;break;case"G":case 7:rt.key=7;break;case"G_SHARP":case 8:rt.key=8;break;case"A_FLAT":case 8:rt.key=8;break;case"A":case 9:rt.key=9;break;case"A_SHARP":case 10:rt.key=10;break;case"B_FLAT":case 10:rt.key=10;break;case"B":case 11:rt.key=11;break}switch(st.mode){case"MAJOR":case 0:rt.mode=0;break;case"MINOR":case 1:rt.mode=1;break;case"NOT_SPECIFIED":case 2:rt.mode=2;break;case"MIXOLYDIAN":case 3:rt.mode=3;break;case"DORIAN":case 4:rt.mode=4;break;case"PHRYGIAN":case 5:rt.mode=5;break;case"LYDIAN":case 6:rt.mode=6;break;case"LOCRIAN":case 7:rt.mode=7;break}return rt},Je.toObject=function(st,rt){rt||(rt={});var it={};return rt.defaults&&(it.time=0,it.key=rt.enums===String?"C":0,it.mode=rt.enums===String?"MAJOR":0),st.time!=null&&st.hasOwnProperty("time")&&(it.time=rt.json&&!isFinite(st.time)?String(st.time):st.time),st.key!=null&&st.hasOwnProperty("key")&&(it.key=rt.enums===String?$root.tensorflow.magenta.NoteSequence.KeySignature.Key[st.key]:st.key),st.mode!=null&&st.hasOwnProperty("mode")&&(it.mode=rt.enums===String?$root.tensorflow.magenta.NoteSequence.KeySignature.Mode[st.mode]:st.mode),it},Je.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Je.Key=(function(){var tt={},st=Object.create(tt);return st[tt[0]="C"]=0,st[tt[1]="C_SHARP"]=1,st.D_FLAT=1,st[tt[2]="D"]=2,st[tt[3]="D_SHARP"]=3,st.E_FLAT=3,st[tt[4]="E"]=4,st[tt[5]="F"]=5,st[tt[6]="F_SHARP"]=6,st.G_FLAT=6,st[tt[7]="G"]=7,st[tt[8]="G_SHARP"]=8,st.A_FLAT=8,st[tt[9]="A"]=9,st[tt[10]="A_SHARP"]=10,st.B_FLAT=10,st[tt[11]="B"]=11,st})(),Je.Mode=(function(){var tt={},st=Object.create(tt);return st[tt[0]="MAJOR"]=0,st[tt[1]="MINOR"]=1,st[tt[2]="NOT_SPECIFIED"]=2,st[tt[3]="MIXOLYDIAN"]=3,st[tt[4]="DORIAN"]=4,st[tt[5]="PHRYGIAN"]=5,st[tt[6]="LYDIAN"]=6,st[tt[7]="LOCRIAN"]=7,st})(),Je})(),Ye.Tempo=(function(){function Je(tt){if(tt)for(var st=Object.keys(tt),rt=0;rt<st.length;++rt)tt[st[rt]]!=null&&(this[st[rt]]=tt[st[rt]])}return Je.prototype.time=0,Je.prototype.qpm=0,Je.create=function(st){return new Je(st)},Je.encode=function(st,rt){return rt||(rt=$Writer.create()),st.time!=null&&st.hasOwnProperty("time")&&rt.uint32(9).double(st.time),st.qpm!=null&&st.hasOwnProperty("qpm")&&rt.uint32(17).double(st.qpm),rt},Je.encodeDelimited=function(st,rt){return this.encode(st,rt).ldelim()},Je.decode=function(st,rt){st instanceof $Reader||(st=$Reader.create(st));for(var it=rt===void 0?st.len:st.pos+rt,ot=new $root.tensorflow.magenta.NoteSequence.Tempo;st.pos<it;){var at=st.uint32();switch(at>>>3){case 1:ot.time=st.double();break;case 2:ot.qpm=st.double();break;default:st.skipType(at&7);break}}return ot},Je.decodeDelimited=function(st){return st instanceof $Reader||(st=new $Reader(st)),this.decode(st,st.uint32())},Je.verify=function(st){return typeof st!="object"||st===null?"object expected":st.time!=null&&st.hasOwnProperty("time")&&typeof st.time!="number"?"time: number expected":st.qpm!=null&&st.hasOwnProperty("qpm")&&typeof st.qpm!="number"?"qpm: number expected":null},Je.fromObject=function(st){if(st instanceof $root.tensorflow.magenta.NoteSequence.Tempo)return st;var rt=new $root.tensorflow.magenta.NoteSequence.Tempo;return st.time!=null&&(rt.time=Number(st.time)),st.qpm!=null&&(rt.qpm=Number(st.qpm)),rt},Je.toObject=function(st,rt){rt||(rt={});var it={};return rt.defaults&&(it.time=0,it.qpm=0),st.time!=null&&st.hasOwnProperty("time")&&(it.time=rt.json&&!isFinite(st.time)?String(st.time):st.time),st.qpm!=null&&st.hasOwnProperty("qpm")&&(it.qpm=rt.json&&!isFinite(st.qpm)?String(st.qpm):st.qpm),it},Je.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Je})(),Ye.PitchBend=(function(){function Je(tt){if(tt)for(var st=Object.keys(tt),rt=0;rt<st.length;++rt)tt[st[rt]]!=null&&(this[st[rt]]=tt[st[rt]])}return Je.prototype.time=0,Je.prototype.bend=0,Je.prototype.instrument=0,Je.prototype.program=0,Je.prototype.isDrum=!1,Je.create=function(st){return new Je(st)},Je.encode=function(st,rt){return rt||(rt=$Writer.create()),st.time!=null&&st.hasOwnProperty("time")&&rt.uint32(9).double(st.time),st.bend!=null&&st.hasOwnProperty("bend")&&rt.uint32(16).int32(st.bend),st.instrument!=null&&st.hasOwnProperty("instrument")&&rt.uint32(24).int32(st.instrument),st.program!=null&&st.hasOwnProperty("program")&&rt.uint32(32).int32(st.program),st.isDrum!=null&&st.hasOwnProperty("isDrum")&&rt.uint32(40).bool(st.isDrum),rt},Je.encodeDelimited=function(st,rt){return this.encode(st,rt).ldelim()},Je.decode=function(st,rt){st instanceof $Reader||(st=$Reader.create(st));for(var it=rt===void 0?st.len:st.pos+rt,ot=new $root.tensorflow.magenta.NoteSequence.PitchBend;st.pos<it;){var at=st.uint32();switch(at>>>3){case 1:ot.time=st.double();break;case 2:ot.bend=st.int32();break;case 3:ot.instrument=st.int32();break;case 4:ot.program=st.int32();break;case 5:ot.isDrum=st.bool();break;default:st.skipType(at&7);break}}return ot},Je.decodeDelimited=function(st){return st instanceof $Reader||(st=new $Reader(st)),this.decode(st,st.uint32())},Je.verify=function(st){return typeof st!="object"||st===null?"object expected":st.time!=null&&st.hasOwnProperty("time")&&typeof st.time!="number"?"time: number expected":st.bend!=null&&st.hasOwnProperty("bend")&&!$util.isInteger(st.bend)?"bend: integer expected":st.instrument!=null&&st.hasOwnProperty("instrument")&&!$util.isInteger(st.instrument)?"instrument: integer expected":st.program!=null&&st.hasOwnProperty("program")&&!$util.isInteger(st.program)?"program: integer expected":st.isDrum!=null&&st.hasOwnProperty("isDrum")&&typeof st.isDrum!="boolean"?"isDrum: boolean expected":null},Je.fromObject=function(st){if(st instanceof $root.tensorflow.magenta.NoteSequence.PitchBend)return st;var rt=new $root.tensorflow.magenta.NoteSequence.PitchBend;return st.time!=null&&(rt.time=Number(st.time)),st.bend!=null&&(rt.bend=st.bend|0),st.instrument!=null&&(rt.instrument=st.instrument|0),st.program!=null&&(rt.program=st.program|0),st.isDrum!=null&&(rt.isDrum=!!st.isDrum),rt},Je.toObject=function(st,rt){rt||(rt={});var it={};return rt.defaults&&(it.time=0,it.bend=0,it.instrument=0,it.program=0,it.isDrum=!1),st.time!=null&&st.hasOwnProperty("time")&&(it.time=rt.json&&!isFinite(st.time)?String(st.time):st.time),st.bend!=null&&st.hasOwnProperty("bend")&&(it.bend=st.bend),st.instrument!=null&&st.hasOwnProperty("instrument")&&(it.instrument=st.instrument),st.program!=null&&st.hasOwnProperty("program")&&(it.program=st.program),st.isDrum!=null&&st.hasOwnProperty("isDrum")&&(it.isDrum=st.isDrum),it},Je.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Je})(),Ye.ControlChange=(function(){function Je(tt){if(tt)for(var st=Object.keys(tt),rt=0;rt<st.length;++rt)tt[st[rt]]!=null&&(this[st[rt]]=tt[st[rt]])}return Je.prototype.time=0,Je.prototype.quantizedStep=$util.Long?$util.Long.fromBits(0,0,!1):0,Je.prototype.controlNumber=0,Je.prototype.controlValue=0,Je.prototype.instrument=0,Je.prototype.program=0,Je.prototype.isDrum=!1,Je.create=function(st){return new Je(st)},Je.encode=function(st,rt){return rt||(rt=$Writer.create()),st.time!=null&&st.hasOwnProperty("time")&&rt.uint32(9).double(st.time),st.controlNumber!=null&&st.hasOwnProperty("controlNumber")&&rt.uint32(16).int32(st.controlNumber),st.controlValue!=null&&st.hasOwnProperty("controlValue")&&rt.uint32(24).int32(st.controlValue),st.instrument!=null&&st.hasOwnProperty("instrument")&&rt.uint32(32).int32(st.instrument),st.program!=null&&st.hasOwnProperty("program")&&rt.uint32(40).int32(st.program),st.isDrum!=null&&st.hasOwnProperty("isDrum")&&rt.uint32(48).bool(st.isDrum),st.quantizedStep!=null&&st.hasOwnProperty("quantizedStep")&&rt.uint32(56).int64(st.quantizedStep),rt},Je.encodeDelimited=function(st,rt){return this.encode(st,rt).ldelim()},Je.decode=function(st,rt){st instanceof $Reader||(st=$Reader.create(st));for(var it=rt===void 0?st.len:st.pos+rt,ot=new $root.tensorflow.magenta.NoteSequence.ControlChange;st.pos<it;){var at=st.uint32();switch(at>>>3){case 1:ot.time=st.double();break;case 7:ot.quantizedStep=$util.Long?st.int64().toNumber():st.int64();break;case 2:ot.controlNumber=st.int32();break;case 3:ot.controlValue=st.int32();break;case 4:ot.instrument=st.int32();break;case 5:ot.program=st.int32();break;case 6:ot.isDrum=st.bool();break;default:st.skipType(at&7);break}}return ot},Je.decodeDelimited=function(st){return st instanceof $Reader||(st=new $Reader(st)),this.decode(st,st.uint32())},Je.verify=function(st){return typeof st!="object"||st===null?"object expected":st.time!=null&&st.hasOwnProperty("time")&&typeof st.time!="number"?"time: number expected":st.quantizedStep!=null&&st.hasOwnProperty("quantizedStep")&&!$util.isInteger(st.quantizedStep)&&!(st.quantizedStep&&$util.isInteger(st.quantizedStep.low)&&$util.isInteger(st.quantizedStep.high))?"quantizedStep: integer|Long expected":st.controlNumber!=null&&st.hasOwnProperty("controlNumber")&&!$util.isInteger(st.controlNumber)?"controlNumber: integer expected":st.controlValue!=null&&st.hasOwnProperty("controlValue")&&!$util.isInteger(st.controlValue)?"controlValue: integer expected":st.instrument!=null&&st.hasOwnProperty("instrument")&&!$util.isInteger(st.instrument)?"instrument: integer expected":st.program!=null&&st.hasOwnProperty("program")&&!$util.isInteger(st.program)?"program: integer expected":st.isDrum!=null&&st.hasOwnProperty("isDrum")&&typeof st.isDrum!="boolean"?"isDrum: boolean expected":null},Je.fromObject=function(st){if(st instanceof $root.tensorflow.magenta.NoteSequence.ControlChange)return st;var rt=new $root.tensorflow.magenta.NoteSequence.ControlChange;return st.time!=null&&(rt.time=Number(st.time)),st.quantizedStep!=null&&($util.Long?(rt.quantizedStep=$util.Long.fromValue(st.quantizedStep)).unsigned=!1:typeof st.quantizedStep=="string"?rt.quantizedStep=parseInt(st.quantizedStep,10):typeof st.quantizedStep=="number"?rt.quantizedStep=st.quantizedStep:typeof st.quantizedStep=="object"&&(rt.quantizedStep=new $util.LongBits(st.quantizedStep.low>>>0,st.quantizedStep.high>>>0).toNumber())),st.controlNumber!=null&&(rt.controlNumber=st.controlNumber|0),st.controlValue!=null&&(rt.controlValue=st.controlValue|0),st.instrument!=null&&(rt.instrument=st.instrument|0),st.program!=null&&(rt.program=st.program|0),st.isDrum!=null&&(rt.isDrum=!!st.isDrum),rt},Je.toObject=function(st,rt){rt||(rt={});var it={};if(rt.defaults)if(it.time=0,it.controlNumber=0,it.controlValue=0,it.instrument=0,it.program=0,it.isDrum=!1,$util.Long){var ot=new $util.Long(0,0,!1);it.quantizedStep=rt.longs===String?ot.toString():rt.longs===Number?ot.toNumber():ot}else it.quantizedStep=rt.longs===String?"0":0;return st.time!=null&&st.hasOwnProperty("time")&&(it.time=rt.json&&!isFinite(st.time)?String(st.time):st.time),st.controlNumber!=null&&st.hasOwnProperty("controlNumber")&&(it.controlNumber=st.controlNumber),st.controlValue!=null&&st.hasOwnProperty("controlValue")&&(it.controlValue=st.controlValue),st.instrument!=null&&st.hasOwnProperty("instrument")&&(it.instrument=st.instrument),st.program!=null&&st.hasOwnProperty("program")&&(it.program=st.program),st.isDrum!=null&&st.hasOwnProperty("isDrum")&&(it.isDrum=st.isDrum),st.quantizedStep!=null&&st.hasOwnProperty("quantizedStep")&&(typeof st.quantizedStep=="number"?it.quantizedStep=rt.longs===String?String(st.quantizedStep):st.quantizedStep:it.quantizedStep=rt.longs===String?$util.Long.prototype.toString.call(st.quantizedStep):rt.longs===Number?new $util.LongBits(st.quantizedStep.low>>>0,st.quantizedStep.high>>>0).toNumber():st.quantizedStep),it},Je.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Je})(),Ye.PartInfo=(function(){function Je(tt){if(tt)for(var st=Object.keys(tt),rt=0;rt<st.length;++rt)tt[st[rt]]!=null&&(this[st[rt]]=tt[st[rt]])}return Je.prototype.part=0,Je.prototype.name="",Je.create=function(st){return new Je(st)},Je.encode=function(st,rt){return rt||(rt=$Writer.create()),st.part!=null&&st.hasOwnProperty("part")&&rt.uint32(8).int32(st.part),st.name!=null&&st.hasOwnProperty("name")&&rt.uint32(18).string(st.name),rt},Je.encodeDelimited=function(st,rt){return this.encode(st,rt).ldelim()},Je.decode=function(st,rt){st instanceof $Reader||(st=$Reader.create(st));for(var it=rt===void 0?st.len:st.pos+rt,ot=new $root.tensorflow.magenta.NoteSequence.PartInfo;st.pos<it;){var at=st.uint32();switch(at>>>3){case 1:ot.part=st.int32();break;case 2:ot.name=st.string();break;default:st.skipType(at&7);break}}return ot},Je.decodeDelimited=function(st){return st instanceof $Reader||(st=new $Reader(st)),this.decode(st,st.uint32())},Je.verify=function(st){return typeof st!="object"||st===null?"object expected":st.part!=null&&st.hasOwnProperty("part")&&!$util.isInteger(st.part)?"part: integer expected":st.name!=null&&st.hasOwnProperty("name")&&!$util.isString(st.name)?"name: string expected":null},Je.fromObject=function(st){if(st instanceof $root.tensorflow.magenta.NoteSequence.PartInfo)return st;var rt=new $root.tensorflow.magenta.NoteSequence.PartInfo;return st.part!=null&&(rt.part=st.part|0),st.name!=null&&(rt.name=String(st.name)),rt},Je.toObject=function(st,rt){rt||(rt={});var it={};return rt.defaults&&(it.part=0,it.name=""),st.part!=null&&st.hasOwnProperty("part")&&(it.part=st.part),st.name!=null&&st.hasOwnProperty("name")&&(it.name=st.name),it},Je.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Je})(),Ye.SourceInfo=(function(){function Je(tt){if(tt)for(var st=Object.keys(tt),rt=0;rt<st.length;++rt)tt[st[rt]]!=null&&(this[st[rt]]=tt[st[rt]])}return Je.prototype.sourceType=0,Je.prototype.encodingType=0,Je.prototype.parser=0,Je.create=function(st){return new Je(st)},Je.encode=function(st,rt){return rt||(rt=$Writer.create()),st.sourceType!=null&&st.hasOwnProperty("sourceType")&&rt.uint32(8).int32(st.sourceType),st.encodingType!=null&&st.hasOwnProperty("encodingType")&&rt.uint32(16).int32(st.encodingType),st.parser!=null&&st.hasOwnProperty("parser")&&rt.uint32(24).int32(st.parser),rt},Je.encodeDelimited=function(st,rt){return this.encode(st,rt).ldelim()},Je.decode=function(st,rt){st instanceof $Reader||(st=$Reader.create(st));for(var it=rt===void 0?st.len:st.pos+rt,ot=new $root.tensorflow.magenta.NoteSequence.SourceInfo;st.pos<it;){var at=st.uint32();switch(at>>>3){case 1:ot.sourceType=st.int32();break;case 2:ot.encodingType=st.int32();break;case 3:ot.parser=st.int32();break;default:st.skipType(at&7);break}}return ot},Je.decodeDelimited=function(st){return st instanceof $Reader||(st=new $Reader(st)),this.decode(st,st.uint32())},Je.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.sourceType!=null&&st.hasOwnProperty("sourceType"))switch(st.sourceType){default:return"sourceType: enum value expected";case 0:case 1:case 2:break}if(st.encodingType!=null&&st.hasOwnProperty("encodingType"))switch(st.encodingType){default:return"encodingType: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(st.parser!=null&&st.hasOwnProperty("parser"))switch(st.parser){default:return"parser: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:break}return null},Je.fromObject=function(st){if(st instanceof $root.tensorflow.magenta.NoteSequence.SourceInfo)return st;var rt=new $root.tensorflow.magenta.NoteSequence.SourceInfo;switch(st.sourceType){case"UNKNOWN_SOURCE_TYPE":case 0:rt.sourceType=0;break;case"SCORE_BASED":case 1:rt.sourceType=1;break;case"PERFORMANCE_BASED":case 2:rt.sourceType=2;break}switch(st.encodingType){case"UNKNOWN_ENCODING_TYPE":case 0:rt.encodingType=0;break;case"MUSIC_XML":case 1:rt.encodingType=1;break;case"ABC":case 2:rt.encodingType=2;break;case"MIDI":case 3:rt.encodingType=3;break;case"MUSICNET":case 4:rt.encodingType=4;break}switch(st.parser){case"UNKNOWN_PARSER":case 0:rt.parser=0;break;case"MUSIC21":case 1:rt.parser=1;break;case"PRETTY_MIDI":case 2:rt.parser=2;break;case"MAGENTA_MUSIC_XML":case 3:rt.parser=3;break;case"MAGENTA_MUSICNET":case 4:rt.parser=4;break;case"MAGENTA_ABC":case 5:rt.parser=5;break;case"TONEJS_MIDI_CONVERT":case 6:rt.parser=6;break}return rt},Je.toObject=function(st,rt){rt||(rt={});var it={};return rt.defaults&&(it.sourceType=rt.enums===String?"UNKNOWN_SOURCE_TYPE":0,it.encodingType=rt.enums===String?"UNKNOWN_ENCODING_TYPE":0,it.parser=rt.enums===String?"UNKNOWN_PARSER":0),st.sourceType!=null&&st.hasOwnProperty("sourceType")&&(it.sourceType=rt.enums===String?$root.tensorflow.magenta.NoteSequence.SourceInfo.SourceType[st.sourceType]:st.sourceType),st.encodingType!=null&&st.hasOwnProperty("encodingType")&&(it.encodingType=rt.enums===String?$root.tensorflow.magenta.NoteSequence.SourceInfo.EncodingType[st.encodingType]:st.encodingType),st.parser!=null&&st.hasOwnProperty("parser")&&(it.parser=rt.enums===String?$root.tensorflow.magenta.NoteSequence.SourceInfo.Parser[st.parser]:st.parser),it},Je.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Je.SourceType=(function(){var tt={},st=Object.create(tt);return st[tt[0]="UNKNOWN_SOURCE_TYPE"]=0,st[tt[1]="SCORE_BASED"]=1,st[tt[2]="PERFORMANCE_BASED"]=2,st})(),Je.EncodingType=(function(){var tt={},st=Object.create(tt);return st[tt[0]="UNKNOWN_ENCODING_TYPE"]=0,st[tt[1]="MUSIC_XML"]=1,st[tt[2]="ABC"]=2,st[tt[3]="MIDI"]=3,st[tt[4]="MUSICNET"]=4,st})(),Je.Parser=(function(){var tt={},st=Object.create(tt);return st[tt[0]="UNKNOWN_PARSER"]=0,st[tt[1]="MUSIC21"]=1,st[tt[2]="PRETTY_MIDI"]=2,st[tt[3]="MAGENTA_MUSIC_XML"]=3,st[tt[4]="MAGENTA_MUSICNET"]=4,st[tt[5]="MAGENTA_ABC"]=5,st[tt[6]="TONEJS_MIDI_CONVERT"]=6,st})(),Je})(),Ye.TextAnnotation=(function(){function Je(tt){if(tt)for(var st=Object.keys(tt),rt=0;rt<st.length;++rt)tt[st[rt]]!=null&&(this[st[rt]]=tt[st[rt]])}return Je.prototype.time=0,Je.prototype.quantizedStep=$util.Long?$util.Long.fromBits(0,0,!1):0,Je.prototype.text="",Je.prototype.annotationType=0,Je.create=function(st){return new Je(st)},Je.encode=function(st,rt){return rt||(rt=$Writer.create()),st.time!=null&&st.hasOwnProperty("time")&&rt.uint32(9).double(st.time),st.text!=null&&st.hasOwnProperty("text")&&rt.uint32(18).string(st.text),st.annotationType!=null&&st.hasOwnProperty("annotationType")&&rt.uint32(24).int32(st.annotationType),st.quantizedStep!=null&&st.hasOwnProperty("quantizedStep")&&rt.uint32(32).int64(st.quantizedStep),rt},Je.encodeDelimited=function(st,rt){return this.encode(st,rt).ldelim()},Je.decode=function(st,rt){st instanceof $Reader||(st=$Reader.create(st));for(var it=rt===void 0?st.len:st.pos+rt,ot=new $root.tensorflow.magenta.NoteSequence.TextAnnotation;st.pos<it;){var at=st.uint32();switch(at>>>3){case 1:ot.time=st.double();break;case 4:ot.quantizedStep=$util.Long?st.int64().toNumber():st.int64();break;case 2:ot.text=st.string();break;case 3:ot.annotationType=st.int32();break;default:st.skipType(at&7);break}}return ot},Je.decodeDelimited=function(st){return st instanceof $Reader||(st=new $Reader(st)),this.decode(st,st.uint32())},Je.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.time!=null&&st.hasOwnProperty("time")&&typeof st.time!="number")return"time: number expected";if(st.quantizedStep!=null&&st.hasOwnProperty("quantizedStep")&&!$util.isInteger(st.quantizedStep)&&!(st.quantizedStep&&$util.isInteger(st.quantizedStep.low)&&$util.isInteger(st.quantizedStep.high)))return"quantizedStep: integer|Long expected";if(st.text!=null&&st.hasOwnProperty("text")&&!$util.isString(st.text))return"text: string expected";if(st.annotationType!=null&&st.hasOwnProperty("annotationType"))switch(st.annotationType){default:return"annotationType: enum value expected";case 0:case 1:case 2:break}return null},Je.fromObject=function(st){if(st instanceof $root.tensorflow.magenta.NoteSequence.TextAnnotation)return st;var rt=new $root.tensorflow.magenta.NoteSequence.TextAnnotation;switch(st.time!=null&&(rt.time=Number(st.time)),st.quantizedStep!=null&&($util.Long?(rt.quantizedStep=$util.Long.fromValue(st.quantizedStep)).unsigned=!1:typeof st.quantizedStep=="string"?rt.quantizedStep=parseInt(st.quantizedStep,10):typeof st.quantizedStep=="number"?rt.quantizedStep=st.quantizedStep:typeof st.quantizedStep=="object"&&(rt.quantizedStep=new $util.LongBits(st.quantizedStep.low>>>0,st.quantizedStep.high>>>0).toNumber())),st.text!=null&&(rt.text=String(st.text)),st.annotationType){case"UNKNOWN":case 0:rt.annotationType=0;break;case"CHORD_SYMBOL":case 1:rt.annotationType=1;break;case"BEAT":case 2:rt.annotationType=2;break}return rt},Je.toObject=function(st,rt){rt||(rt={});var it={};if(rt.defaults)if(it.time=0,it.text="",it.annotationType=rt.enums===String?"UNKNOWN":0,$util.Long){var ot=new $util.Long(0,0,!1);it.quantizedStep=rt.longs===String?ot.toString():rt.longs===Number?ot.toNumber():ot}else it.quantizedStep=rt.longs===String?"0":0;return st.time!=null&&st.hasOwnProperty("time")&&(it.time=rt.json&&!isFinite(st.time)?String(st.time):st.time),st.text!=null&&st.hasOwnProperty("text")&&(it.text=st.text),st.annotationType!=null&&st.hasOwnProperty("annotationType")&&(it.annotationType=rt.enums===String?$root.tensorflow.magenta.NoteSequence.TextAnnotation.TextAnnotationType[st.annotationType]:st.annotationType),st.quantizedStep!=null&&st.hasOwnProperty("quantizedStep")&&(typeof st.quantizedStep=="number"?it.quantizedStep=rt.longs===String?String(st.quantizedStep):st.quantizedStep:it.quantizedStep=rt.longs===String?$util.Long.prototype.toString.call(st.quantizedStep):rt.longs===Number?new $util.LongBits(st.quantizedStep.low>>>0,st.quantizedStep.high>>>0).toNumber():st.quantizedStep),it},Je.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Je.TextAnnotationType=(function(){var tt={},st=Object.create(tt);return st[tt[0]="UNKNOWN"]=0,st[tt[1]="CHORD_SYMBOL"]=1,st[tt[2]="BEAT"]=2,st})(),Je})(),Ye.QuantizationInfo=(function(){function Je(st){if(st)for(var rt=Object.keys(st),it=0;it<rt.length;++it)st[rt[it]]!=null&&(this[rt[it]]=st[rt[it]])}Je.prototype.stepsPerQuarter=0,Je.prototype.stepsPerSecond=0;var tt;return Object.defineProperty(Je.prototype,"resolution",{get:$util.oneOfGetter(tt=["stepsPerQuarter","stepsPerSecond"]),set:$util.oneOfSetter(tt)}),Je.create=function(rt){return new Je(rt)},Je.encode=function(rt,it){return it||(it=$Writer.create()),rt.stepsPerQuarter!=null&&rt.hasOwnProperty("stepsPerQuarter")&&it.uint32(8).int32(rt.stepsPerQuarter),rt.stepsPerSecond!=null&&rt.hasOwnProperty("stepsPerSecond")&&it.uint32(16).int32(rt.stepsPerSecond),it},Je.encodeDelimited=function(rt,it){return this.encode(rt,it).ldelim()},Je.decode=function(rt,it){rt instanceof $Reader||(rt=$Reader.create(rt));for(var ot=it===void 0?rt.len:rt.pos+it,at=new $root.tensorflow.magenta.NoteSequence.QuantizationInfo;rt.pos<ot;){var lt=rt.uint32();switch(lt>>>3){case 1:at.stepsPerQuarter=rt.int32();break;case 2:at.stepsPerSecond=rt.int32();break;default:rt.skipType(lt&7);break}}return at},Je.decodeDelimited=function(rt){return rt instanceof $Reader||(rt=new $Reader(rt)),this.decode(rt,rt.uint32())},Je.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";var it={};if(rt.stepsPerQuarter!=null&&rt.hasOwnProperty("stepsPerQuarter")&&(it.resolution=1,!$util.isInteger(rt.stepsPerQuarter)))return"stepsPerQuarter: integer expected";if(rt.stepsPerSecond!=null&&rt.hasOwnProperty("stepsPerSecond")){if(it.resolution===1)return"resolution: multiple values";if(it.resolution=1,!$util.isInteger(rt.stepsPerSecond))return"stepsPerSecond: integer expected"}return null},Je.fromObject=function(rt){if(rt instanceof $root.tensorflow.magenta.NoteSequence.QuantizationInfo)return rt;var it=new $root.tensorflow.magenta.NoteSequence.QuantizationInfo;return rt.stepsPerQuarter!=null&&(it.stepsPerQuarter=rt.stepsPerQuarter|0),rt.stepsPerSecond!=null&&(it.stepsPerSecond=rt.stepsPerSecond|0),it},Je.toObject=function(rt,it){it||(it={});var ot={};return rt.stepsPerQuarter!=null&&rt.hasOwnProperty("stepsPerQuarter")&&(ot.stepsPerQuarter=rt.stepsPerQuarter,it.oneofs&&(ot.resolution="stepsPerQuarter")),rt.stepsPerSecond!=null&&rt.hasOwnProperty("stepsPerSecond")&&(ot.stepsPerSecond=rt.stepsPerSecond,it.oneofs&&(ot.resolution="stepsPerSecond")),ot},Je.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Je})(),Ye.SubsequenceInfo=(function(){function Je(tt){if(tt)for(var st=Object.keys(tt),rt=0;rt<st.length;++rt)tt[st[rt]]!=null&&(this[st[rt]]=tt[st[rt]])}return Je.prototype.startTimeOffset=0,Je.prototype.endTimeOffset=0,Je.create=function(st){return new Je(st)},Je.encode=function(st,rt){return rt||(rt=$Writer.create()),st.startTimeOffset!=null&&st.hasOwnProperty("startTimeOffset")&&rt.uint32(9).double(st.startTimeOffset),st.endTimeOffset!=null&&st.hasOwnProperty("endTimeOffset")&&rt.uint32(17).double(st.endTimeOffset),rt},Je.encodeDelimited=function(st,rt){return this.encode(st,rt).ldelim()},Je.decode=function(st,rt){st instanceof $Reader||(st=$Reader.create(st));for(var it=rt===void 0?st.len:st.pos+rt,ot=new $root.tensorflow.magenta.NoteSequence.SubsequenceInfo;st.pos<it;){var at=st.uint32();switch(at>>>3){case 1:ot.startTimeOffset=st.double();break;case 2:ot.endTimeOffset=st.double();break;default:st.skipType(at&7);break}}return ot},Je.decodeDelimited=function(st){return st instanceof $Reader||(st=new $Reader(st)),this.decode(st,st.uint32())},Je.verify=function(st){return typeof st!="object"||st===null?"object expected":st.startTimeOffset!=null&&st.hasOwnProperty("startTimeOffset")&&typeof st.startTimeOffset!="number"?"startTimeOffset: number expected":st.endTimeOffset!=null&&st.hasOwnProperty("endTimeOffset")&&typeof st.endTimeOffset!="number"?"endTimeOffset: number expected":null},Je.fromObject=function(st){if(st instanceof $root.tensorflow.magenta.NoteSequence.SubsequenceInfo)return st;var rt=new $root.tensorflow.magenta.NoteSequence.SubsequenceInfo;return st.startTimeOffset!=null&&(rt.startTimeOffset=Number(st.startTimeOffset)),st.endTimeOffset!=null&&(rt.endTimeOffset=Number(st.endTimeOffset)),rt},Je.toObject=function(st,rt){rt||(rt={});var it={};return rt.defaults&&(it.startTimeOffset=0,it.endTimeOffset=0),st.startTimeOffset!=null&&st.hasOwnProperty("startTimeOffset")&&(it.startTimeOffset=rt.json&&!isFinite(st.startTimeOffset)?String(st.startTimeOffset):st.startTimeOffset),st.endTimeOffset!=null&&st.hasOwnProperty("endTimeOffset")&&(it.endTimeOffset=rt.json&&!isFinite(st.endTimeOffset)?String(st.endTimeOffset):st.endTimeOffset),it},Je.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Je})(),Ye.SectionAnnotation=(function(){function Je(tt){if(tt)for(var st=Object.keys(tt),rt=0;rt<st.length;++rt)tt[st[rt]]!=null&&(this[st[rt]]=tt[st[rt]])}return Je.prototype.time=0,Je.prototype.sectionId=$util.Long?$util.Long.fromBits(0,0,!1):0,Je.create=function(st){return new Je(st)},Je.encode=function(st,rt){return rt||(rt=$Writer.create()),st.time!=null&&st.hasOwnProperty("time")&&rt.uint32(9).double(st.time),st.sectionId!=null&&st.hasOwnProperty("sectionId")&&rt.uint32(32).int64(st.sectionId),rt},Je.encodeDelimited=function(st,rt){return this.encode(st,rt).ldelim()},Je.decode=function(st,rt){st instanceof $Reader||(st=$Reader.create(st));for(var it=rt===void 0?st.len:st.pos+rt,ot=new $root.tensorflow.magenta.NoteSequence.SectionAnnotation;st.pos<it;){var at=st.uint32();switch(at>>>3){case 1:ot.time=st.double();break;case 4:ot.sectionId=$util.Long?st.int64().toNumber():st.int64();break;default:st.skipType(at&7);break}}return ot},Je.decodeDelimited=function(st){return st instanceof $Reader||(st=new $Reader(st)),this.decode(st,st.uint32())},Je.verify=function(st){return typeof st!="object"||st===null?"object expected":st.time!=null&&st.hasOwnProperty("time")&&typeof st.time!="number"?"time: number expected":st.sectionId!=null&&st.hasOwnProperty("sectionId")&&!$util.isInteger(st.sectionId)&&!(st.sectionId&&$util.isInteger(st.sectionId.low)&&$util.isInteger(st.sectionId.high))?"sectionId: integer|Long expected":null},Je.fromObject=function(st){if(st instanceof $root.tensorflow.magenta.NoteSequence.SectionAnnotation)return st;var rt=new $root.tensorflow.magenta.NoteSequence.SectionAnnotation;return st.time!=null&&(rt.time=Number(st.time)),st.sectionId!=null&&($util.Long?(rt.sectionId=$util.Long.fromValue(st.sectionId)).unsigned=!1:typeof st.sectionId=="string"?rt.sectionId=parseInt(st.sectionId,10):typeof st.sectionId=="number"?rt.sectionId=st.sectionId:typeof st.sectionId=="object"&&(rt.sectionId=new $util.LongBits(st.sectionId.low>>>0,st.sectionId.high>>>0).toNumber())),rt},Je.toObject=function(st,rt){rt||(rt={});var it={};if(rt.defaults)if(it.time=0,$util.Long){var ot=new $util.Long(0,0,!1);it.sectionId=rt.longs===String?ot.toString():rt.longs===Number?ot.toNumber():ot}else it.sectionId=rt.longs===String?"0":0;return st.time!=null&&st.hasOwnProperty("time")&&(it.time=rt.json&&!isFinite(st.time)?String(st.time):st.time),st.sectionId!=null&&st.hasOwnProperty("sectionId")&&(typeof st.sectionId=="number"?it.sectionId=rt.longs===String?String(st.sectionId):st.sectionId:it.sectionId=rt.longs===String?$util.Long.prototype.toString.call(st.sectionId):rt.longs===Number?new $util.LongBits(st.sectionId.low>>>0,st.sectionId.high>>>0).toNumber():st.sectionId),it},Je.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Je})(),Ye.Section=(function(){function Je(st){if(st)for(var rt=Object.keys(st),it=0;it<rt.length;++it)st[rt[it]]!=null&&(this[rt[it]]=st[rt[it]])}Je.prototype.sectionId=$util.Long?$util.Long.fromBits(0,0,!1):0,Je.prototype.sectionGroup=null;var tt;return Object.defineProperty(Je.prototype,"sectionType",{get:$util.oneOfGetter(tt=["sectionId","sectionGroup"]),set:$util.oneOfSetter(tt)}),Je.create=function(rt){return new Je(rt)},Je.encode=function(rt,it){return it||(it=$Writer.create()),rt.sectionId!=null&&rt.hasOwnProperty("sectionId")&&it.uint32(8).int64(rt.sectionId),rt.sectionGroup!=null&&rt.hasOwnProperty("sectionGroup")&&$root.tensorflow.magenta.NoteSequence.SectionGroup.encode(rt.sectionGroup,it.uint32(18).fork()).ldelim(),it},Je.encodeDelimited=function(rt,it){return this.encode(rt,it).ldelim()},Je.decode=function(rt,it){rt instanceof $Reader||(rt=$Reader.create(rt));for(var ot=it===void 0?rt.len:rt.pos+it,at=new $root.tensorflow.magenta.NoteSequence.Section;rt.pos<ot;){var lt=rt.uint32();switch(lt>>>3){case 1:at.sectionId=$util.Long?rt.int64().toNumber():rt.int64();break;case 2:at.sectionGroup=$root.tensorflow.magenta.NoteSequence.SectionGroup.decode(rt,rt.uint32());break;default:rt.skipType(lt&7);break}}return at},Je.decodeDelimited=function(rt){return rt instanceof $Reader||(rt=new $Reader(rt)),this.decode(rt,rt.uint32())},Je.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";var it={};if(rt.sectionId!=null&&rt.hasOwnProperty("sectionId")&&(it.sectionType=1,!$util.isInteger(rt.sectionId)&&!(rt.sectionId&&$util.isInteger(rt.sectionId.low)&&$util.isInteger(rt.sectionId.high))))return"sectionId: integer|Long expected";if(rt.sectionGroup!=null&&rt.hasOwnProperty("sectionGroup")){if(it.sectionType===1)return"sectionType: multiple values";it.sectionType=1;{var ot=$root.tensorflow.magenta.NoteSequence.SectionGroup.verify(rt.sectionGroup);if(ot)return"sectionGroup."+ot}}return null},Je.fromObject=function(rt){if(rt instanceof $root.tensorflow.magenta.NoteSequence.Section)return rt;var it=new $root.tensorflow.magenta.NoteSequence.Section;if(rt.sectionId!=null&&($util.Long?(it.sectionId=$util.Long.fromValue(rt.sectionId)).unsigned=!1:typeof rt.sectionId=="string"?it.sectionId=parseInt(rt.sectionId,10):typeof rt.sectionId=="number"?it.sectionId=rt.sectionId:typeof rt.sectionId=="object"&&(it.sectionId=new $util.LongBits(rt.sectionId.low>>>0,rt.sectionId.high>>>0).toNumber())),rt.sectionGroup!=null){if(typeof rt.sectionGroup!="object")throw TypeError(".tensorflow.magenta.NoteSequence.Section.sectionGroup: object expected");it.sectionGroup=$root.tensorflow.magenta.NoteSequence.SectionGroup.fromObject(rt.sectionGroup)}return it},Je.toObject=function(rt,it){it||(it={});var ot={};return rt.sectionId!=null&&rt.hasOwnProperty("sectionId")&&(typeof rt.sectionId=="number"?ot.sectionId=it.longs===String?String(rt.sectionId):rt.sectionId:ot.sectionId=it.longs===String?$util.Long.prototype.toString.call(rt.sectionId):it.longs===Number?new $util.LongBits(rt.sectionId.low>>>0,rt.sectionId.high>>>0).toNumber():rt.sectionId,it.oneofs&&(ot.sectionType="sectionId")),rt.sectionGroup!=null&&rt.hasOwnProperty("sectionGroup")&&(ot.sectionGroup=$root.tensorflow.magenta.NoteSequence.SectionGroup.toObject(rt.sectionGroup,it),it.oneofs&&(ot.sectionType="sectionGroup")),ot},Je.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Je})(),Ye.SectionGroup=(function(){function Je(tt){if(this.sections=[],tt)for(var st=Object.keys(tt),rt=0;rt<st.length;++rt)tt[st[rt]]!=null&&(this[st[rt]]=tt[st[rt]])}return Je.prototype.sections=$util.emptyArray,Je.prototype.numTimes=0,Je.create=function(st){return new Je(st)},Je.encode=function(st,rt){if(rt||(rt=$Writer.create()),st.sections!=null&&st.sections.length)for(var it=0;it<st.sections.length;++it)$root.tensorflow.magenta.NoteSequence.Section.encode(st.sections[it],rt.uint32(10).fork()).ldelim();return st.numTimes!=null&&st.hasOwnProperty("numTimes")&&rt.uint32(16).int32(st.numTimes),rt},Je.encodeDelimited=function(st,rt){return this.encode(st,rt).ldelim()},Je.decode=function(st,rt){st instanceof $Reader||(st=$Reader.create(st));for(var it=rt===void 0?st.len:st.pos+rt,ot=new $root.tensorflow.magenta.NoteSequence.SectionGroup;st.pos<it;){var at=st.uint32();switch(at>>>3){case 1:ot.sections&&ot.sections.length||(ot.sections=[]),ot.sections.push($root.tensorflow.magenta.NoteSequence.Section.decode(st,st.uint32()));break;case 2:ot.numTimes=st.int32();break;default:st.skipType(at&7);break}}return ot},Je.decodeDelimited=function(st){return st instanceof $Reader||(st=new $Reader(st)),this.decode(st,st.uint32())},Je.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.sections!=null&&st.hasOwnProperty("sections")){if(!Array.isArray(st.sections))return"sections: array expected";for(var rt=0;rt<st.sections.length;++rt){var it=$root.tensorflow.magenta.NoteSequence.Section.verify(st.sections[rt]);if(it)return"sections."+it}}return st.numTimes!=null&&st.hasOwnProperty("numTimes")&&!$util.isInteger(st.numTimes)?"numTimes: integer expected":null},Je.fromObject=function(st){if(st instanceof $root.tensorflow.magenta.NoteSequence.SectionGroup)return st;var rt=new $root.tensorflow.magenta.NoteSequence.SectionGroup;if(st.sections){if(!Array.isArray(st.sections))throw TypeError(".tensorflow.magenta.NoteSequence.SectionGroup.sections: array expected");rt.sections=[];for(var it=0;it<st.sections.length;++it){if(typeof st.sections[it]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.SectionGroup.sections: object expected");rt.sections[it]=$root.tensorflow.magenta.NoteSequence.Section.fromObject(st.sections[it])}}return st.numTimes!=null&&(rt.numTimes=st.numTimes|0),rt},Je.toObject=function(st,rt){rt||(rt={});var it={};if((rt.arrays||rt.defaults)&&(it.sections=[]),rt.defaults&&(it.numTimes=0),st.sections&&st.sections.length){it.sections=[];for(var ot=0;ot<st.sections.length;++ot)it.sections[ot]=$root.tensorflow.magenta.NoteSequence.Section.toObject(st.sections[ot],rt)}return st.numTimes!=null&&st.hasOwnProperty("numTimes")&&(it.numTimes=st.numTimes),it},Je.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Je})(),Ye})(),Ke.SequenceMetadata=(function(){function Ye(Je){if(this.genre=[],this.composers=[],Je)for(var tt=Object.keys(Je),st=0;st<tt.length;++st)Je[tt[st]]!=null&&(this[tt[st]]=Je[tt[st]])}return Ye.prototype.title="",Ye.prototype.artist="",Ye.prototype.genre=$util.emptyArray,Ye.prototype.composers=$util.emptyArray,Ye.create=function(tt){return new Ye(tt)},Ye.encode=function(tt,st){if(st||(st=$Writer.create()),tt.title!=null&&tt.hasOwnProperty("title")&&st.uint32(10).string(tt.title),tt.artist!=null&&tt.hasOwnProperty("artist")&&st.uint32(18).string(tt.artist),tt.genre!=null&&tt.genre.length)for(var rt=0;rt<tt.genre.length;++rt)st.uint32(26).string(tt.genre[rt]);if(tt.composers!=null&&tt.composers.length)for(var rt=0;rt<tt.composers.length;++rt)st.uint32(34).string(tt.composers[rt]);return st},Ye.encodeDelimited=function(tt,st){return this.encode(tt,st).ldelim()},Ye.decode=function(tt,st){tt instanceof $Reader||(tt=$Reader.create(tt));for(var rt=st===void 0?tt.len:tt.pos+st,it=new $root.tensorflow.magenta.SequenceMetadata;tt.pos<rt;){var ot=tt.uint32();switch(ot>>>3){case 1:it.title=tt.string();break;case 2:it.artist=tt.string();break;case 3:it.genre&&it.genre.length||(it.genre=[]),it.genre.push(tt.string());break;case 4:it.composers&&it.composers.length||(it.composers=[]),it.composers.push(tt.string());break;default:tt.skipType(ot&7);break}}return it},Ye.decodeDelimited=function(tt){return tt instanceof $Reader||(tt=new $Reader(tt)),this.decode(tt,tt.uint32())},Ye.verify=function(tt){if(typeof tt!="object"||tt===null)return"object expected";if(tt.title!=null&&tt.hasOwnProperty("title")&&!$util.isString(tt.title))return"title: string expected";if(tt.artist!=null&&tt.hasOwnProperty("artist")&&!$util.isString(tt.artist))return"artist: string expected";if(tt.genre!=null&&tt.hasOwnProperty("genre")){if(!Array.isArray(tt.genre))return"genre: array expected";for(var st=0;st<tt.genre.length;++st)if(!$util.isString(tt.genre[st]))return"genre: string[] expected"}if(tt.composers!=null&&tt.hasOwnProperty("composers")){if(!Array.isArray(tt.composers))return"composers: array expected";for(var st=0;st<tt.composers.length;++st)if(!$util.isString(tt.composers[st]))return"composers: string[] expected"}return null},Ye.fromObject=function(tt){if(tt instanceof $root.tensorflow.magenta.SequenceMetadata)return tt;var st=new $root.tensorflow.magenta.SequenceMetadata;if(tt.title!=null&&(st.title=String(tt.title)),tt.artist!=null&&(st.artist=String(tt.artist)),tt.genre){if(!Array.isArray(tt.genre))throw TypeError(".tensorflow.magenta.SequenceMetadata.genre: array expected");st.genre=[];for(var rt=0;rt<tt.genre.length;++rt)st.genre[rt]=String(tt.genre[rt])}if(tt.composers){if(!Array.isArray(tt.composers))throw TypeError(".tensorflow.magenta.SequenceMetadata.composers: array expected");st.composers=[];for(var rt=0;rt<tt.composers.length;++rt)st.composers[rt]=String(tt.composers[rt])}return st},Ye.toObject=function(tt,st){st||(st={});var rt={};if((st.arrays||st.defaults)&&(rt.genre=[],rt.composers=[]),st.defaults&&(rt.title="",rt.artist=""),tt.title!=null&&tt.hasOwnProperty("title")&&(rt.title=tt.title),tt.artist!=null&&tt.hasOwnProperty("artist")&&(rt.artist=tt.artist),tt.genre&&tt.genre.length){rt.genre=[];for(var it=0;it<tt.genre.length;++it)rt.genre[it]=tt.genre[it]}if(tt.composers&&tt.composers.length){rt.composers=[];for(var it=0;it<tt.composers.length;++it)rt.composers[it]=tt.composers[it]}return rt},Ye.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Ye})(),Ke.VelocityRange=(function(){function Ye(Je){if(Je)for(var tt=Object.keys(Je),st=0;st<tt.length;++st)Je[tt[st]]!=null&&(this[tt[st]]=Je[tt[st]])}return Ye.prototype.min=0,Ye.prototype.max=0,Ye.create=function(tt){return new Ye(tt)},Ye.encode=function(tt,st){return st||(st=$Writer.create()),tt.min!=null&&tt.hasOwnProperty("min")&&st.uint32(8).int32(tt.min),tt.max!=null&&tt.hasOwnProperty("max")&&st.uint32(16).int32(tt.max),st},Ye.encodeDelimited=function(tt,st){return this.encode(tt,st).ldelim()},Ye.decode=function(tt,st){tt instanceof $Reader||(tt=$Reader.create(tt));for(var rt=st===void 0?tt.len:tt.pos+st,it=new $root.tensorflow.magenta.VelocityRange;tt.pos<rt;){var ot=tt.uint32();switch(ot>>>3){case 1:it.min=tt.int32();break;case 2:it.max=tt.int32();break;default:tt.skipType(ot&7);break}}return it},Ye.decodeDelimited=function(tt){return tt instanceof $Reader||(tt=new $Reader(tt)),this.decode(tt,tt.uint32())},Ye.verify=function(tt){return typeof tt!="object"||tt===null?"object expected":tt.min!=null&&tt.hasOwnProperty("min")&&!$util.isInteger(tt.min)?"min: integer expected":tt.max!=null&&tt.hasOwnProperty("max")&&!$util.isInteger(tt.max)?"max: integer expected":null},Ye.fromObject=function(tt){if(tt instanceof $root.tensorflow.magenta.VelocityRange)return tt;var st=new $root.tensorflow.magenta.VelocityRange;return tt.min!=null&&(st.min=tt.min|0),tt.max!=null&&(st.max=tt.max|0),st},Ye.toObject=function(tt,st){st||(st={});var rt={};return st.defaults&&(rt.min=0,rt.max=0),tt.min!=null&&tt.hasOwnProperty("min")&&(rt.min=tt.min),tt.max!=null&&tt.hasOwnProperty("max")&&(rt.max=tt.max),rt},Ye.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},Ye})(),Ke})(),Xe})();var proto=$root,NoteSequence=proto.tensorflow.magenta.NoteSequence,browser={exports:{}},hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,(function(Xe,Ke){var Ye=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Je<"u")return Je;throw new Error("unable to locate global object")},Je=Ye();Xe.exports=Ke=Je.fetch,Je.fetch&&(Ke.default=Je.fetch.bind(Je)),Ke.Headers=Je.Headers,Ke.Request=Je.Request,Ke.Response=Je.Response})(browser,browser.exports)),browser.exports}globalThis.process.hrtime();function getGlobalObject(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("cannot find the global object")}const globalObject=getGlobalObject();globalObject.fetch.bind(globalObject);globalObject.performance;globalObject.navigator;const isSafari=!!globalObject.webkitOfflineAudioContext,isWorker=typeof globalObject.WorkerGlobalScope<"u";function getOfflineAudioContext(Xe){if(Xe=isSafari?44100:Xe,isWorker)throw new Error("Cannot use offline audio context in a web worker.");const Ye=globalObject.webkitOfflineAudioContext;return isSafari?new Ye(1,Xe,Xe):new globalObject.OfflineAudioContext(1,Xe,Xe)}const isNode$1=typeof globalThis<"u"&&typeof globalThis.process<"u",fetch$1=isNode$1?requireBrowser():window.fetch.bind(window);var Level;(function(Xe){Xe[Xe.NONE=0]="NONE",Xe[Xe.WARN=5]="WARN",Xe[Xe.INFO=10]="INFO",Xe[Xe.DEBUG=20]="DEBUG"})(Level||(Level={}));let verbosity=10;function log$1(Xe,Ke="Magenta.js",Ye=10){if(Ye===0)throw Error("Logging level cannot be NONE.");verbosity>=Ye&&(Ye===5?console.warn:console.log)(`%c ${Ke} `,"background:magenta; color:white",Xe)}class MultipleTempoException extends Error{constructor(Ke){super(Ke),Object.setPrototypeOf(this,new.target.prototype)}}class QuantizationStatusException extends Error{constructor(Ke){super(Ke),Object.setPrototypeOf(this,new.target.prototype)}}function clone(Xe){return NoteSequence.decode(NoteSequence.encode(Xe).finish())}function getQuantizedTimeEvents(Xe){return Xe.controlChanges.concat(Xe.textAnnotations)}function assertSingleTempo(Xe){if(!(!Xe.tempos||Xe.tempos.length===0)){if(Xe.tempos.sort((Ke,Ye)=>Ke.time-Ye.time),Xe.tempos[0].time!==0&&Xe.tempos[0].qpm!==DEFAULT_QUARTERS_PER_MINUTE)throw new MultipleTempoException(`NoteSequence has an implicit tempo change from initial ${DEFAULT_QUARTERS_PER_MINUTE} qpm to ${Xe.tempos[0].qpm} qpm at ${Xe.tempos[0].time} seconds.`);for(let Ke=1;Ke<Xe.tempos.length;Ke++)if(Xe.tempos[Ke].qpm!==Xe.tempos[0].qpm)throw new MultipleTempoException(`NoteSequence has at least one tempo change from ${Xe.tempos[0].qpm} qpm to ${Xe.tempos[Ke].qpm}qpm at ${Xe.tempos[Ke].time} seconds.`)}}function isQuantizedSequence(Xe){return Xe.quantizationInfo&&(Xe.quantizationInfo.stepsPerQuarter>0||Xe.quantizationInfo.stepsPerSecond>0)}function isRelativeQuantizedSequence(Xe){return Xe.quantizationInfo&&Xe.quantizationInfo.stepsPerQuarter>0}function assertIsRelativeQuantizedSequence(Xe){if(!isRelativeQuantizedSequence(Xe))throw new QuantizationStatusException(`NoteSequence ${Xe.id} is not quantized or is quantized based on absolute timing`)}function unquantizeSequence(Xe,Ke){assertIsRelativeQuantizedSequence(Xe),assertSingleTempo(Xe);const Ye=clone(Xe);Ke?Ye.tempos&&Ye.tempos.length>0?Ye.tempos[0].qpm=Ke:Ye.tempos.push(NoteSequence.Tempo.create({time:0,qpm:Ke})):Ke=Xe.tempos&&Xe.tempos.length>0?Ye.tempos[0].qpm:DEFAULT_QUARTERS_PER_MINUTE;const Je=tt=>tt/Ye.quantizationInfo.stepsPerQuarter*(60/Ke);return Ye.totalTime=Je(Ye.totalQuantizedSteps),Ye.notes.forEach(tt=>{tt.startTime=Je(tt.quantizedStartStep),tt.endTime=Je(tt.quantizedEndStep),Ye.totalTime=Math.max(Ye.totalTime,tt.endTime),delete tt.quantizedStartStep,delete tt.quantizedEndStep}),getQuantizedTimeEvents(Ye).forEach(tt=>{tt.time=Je(tt.time)}),delete Ye.totalQuantizedSteps,delete Ye.quantizationInfo,Ye}const version="14.7.77",createExtendedExponentialRampToValueAutomationEvent=(Xe,Ke,Ye)=>({endTime:Ke,insertTime:Ye,type:"exponentialRampToValue",value:Xe}),createExtendedLinearRampToValueAutomationEvent=(Xe,Ke,Ye)=>({endTime:Ke,insertTime:Ye,type:"linearRampToValue",value:Xe}),createSetValueAutomationEvent=(Xe,Ke)=>({startTime:Ke,type:"setValue",value:Xe}),createSetValueCurveAutomationEvent=(Xe,Ke,Ye)=>({duration:Ye,startTime:Ke,type:"setValueCurve",values:Xe}),getTargetValueAtTime=(Xe,Ke,{startTime:Ye,target:Je,timeConstant:tt})=>Je+(Ke-Je)*Math.exp((Ye-Xe)/tt),isExponentialRampToValueAutomationEvent=Xe=>Xe.type==="exponentialRampToValue",isLinearRampToValueAutomationEvent=Xe=>Xe.type==="linearRampToValue",isAnyRampToValueAutomationEvent=Xe=>isExponentialRampToValueAutomationEvent(Xe)||isLinearRampToValueAutomationEvent(Xe),isSetValueAutomationEvent=Xe=>Xe.type==="setValue",isSetValueCurveAutomationEvent=Xe=>Xe.type==="setValueCurve",getValueOfAutomationEventAtIndexAtTime=(Xe,Ke,Ye,Je)=>{const tt=Xe[Ke];return tt===void 0?Je:isAnyRampToValueAutomationEvent(tt)||isSetValueAutomationEvent(tt)?tt.value:isSetValueCurveAutomationEvent(tt)?tt.values[tt.values.length-1]:getTargetValueAtTime(Ye,getValueOfAutomationEventAtIndexAtTime(Xe,Ke-1,tt.startTime,Je),tt)},getEndTimeAndValueOfPreviousAutomationEvent=(Xe,Ke,Ye,Je,tt)=>Ye===void 0?[Je.insertTime,tt]:isAnyRampToValueAutomationEvent(Ye)?[Ye.endTime,Ye.value]:isSetValueAutomationEvent(Ye)?[Ye.startTime,Ye.value]:isSetValueCurveAutomationEvent(Ye)?[Ye.startTime+Ye.duration,Ye.values[Ye.values.length-1]]:[Ye.startTime,getValueOfAutomationEventAtIndexAtTime(Xe,Ke-1,Ye.startTime,tt)],isCancelAndHoldAutomationEvent=Xe=>Xe.type==="cancelAndHold",isCancelScheduledValuesAutomationEvent=Xe=>Xe.type==="cancelScheduledValues",getEventTime=Xe=>isCancelAndHoldAutomationEvent(Xe)||isCancelScheduledValuesAutomationEvent(Xe)?Xe.cancelTime:isExponentialRampToValueAutomationEvent(Xe)||isLinearRampToValueAutomationEvent(Xe)?Xe.endTime:Xe.startTime,getExponentialRampValueAtTime=(Xe,Ke,Ye,{endTime:Je,value:tt})=>Ye===tt?tt:0<Ye&&0<tt||Ye<0&&tt<0?Ye*(tt/Ye)**((Xe-Ke)/(Je-Ke)):0,getLinearRampValueAtTime=(Xe,Ke,Ye,{endTime:Je,value:tt})=>Ye+(Xe-Ke)/(Je-Ke)*(tt-Ye),interpolateValue=(Xe,Ke)=>{const Ye=Math.floor(Ke),Je=Math.ceil(Ke);return Ye===Je?Xe[Ye]:(1-(Ke-Ye))*Xe[Ye]+(1-(Je-Ke))*Xe[Je]},getValueCurveValueAtTime=(Xe,{duration:Ke,startTime:Ye,values:Je})=>{const tt=(Xe-Ye)/Ke*(Je.length-1);return interpolateValue(Je,tt)},isSetTargetAutomationEvent=Xe=>Xe.type==="setTarget";class AutomationEventList{constructor(Ke){this._automationEvents=[],this._currenTime=0,this._defaultValue=Ke}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(Ke){const Ye=getEventTime(Ke);if(isCancelAndHoldAutomationEvent(Ke)||isCancelScheduledValuesAutomationEvent(Ke)){const Je=this._automationEvents.findIndex(st=>isCancelScheduledValuesAutomationEvent(Ke)&&isSetValueCurveAutomationEvent(st)?st.startTime+st.duration>=Ye:getEventTime(st)>=Ye),tt=this._automationEvents[Je];if(Je!==-1&&(this._automationEvents=this._automationEvents.slice(0,Je)),isCancelAndHoldAutomationEvent(Ke)){const st=this._automationEvents[this._automationEvents.length-1];if(tt!==void 0&&isAnyRampToValueAutomationEvent(tt)){if(st!==void 0&&isSetTargetAutomationEvent(st))throw new Error("The internal list is malformed.");const rt=st===void 0?tt.insertTime:isSetValueCurveAutomationEvent(st)?st.startTime+st.duration:getEventTime(st),it=st===void 0?this._defaultValue:isSetValueCurveAutomationEvent(st)?st.values[st.values.length-1]:st.value,ot=isExponentialRampToValueAutomationEvent(tt)?getExponentialRampValueAtTime(Ye,rt,it,tt):getLinearRampValueAtTime(Ye,rt,it,tt),at=isExponentialRampToValueAutomationEvent(tt)?createExtendedExponentialRampToValueAutomationEvent(ot,Ye,this._currenTime):createExtendedLinearRampToValueAutomationEvent(ot,Ye,this._currenTime);this._automationEvents.push(at)}if(st!==void 0&&isSetTargetAutomationEvent(st)&&this._automationEvents.push(createSetValueAutomationEvent(this.getValue(Ye),Ye)),st!==void 0&&isSetValueCurveAutomationEvent(st)&&st.startTime+st.duration>Ye){const rt=Ye-st.startTime,it=(st.values.length-1)/st.duration,ot=Math.max(2,1+Math.ceil(rt*it)),at=rt/(ot-1)*it,lt=st.values.slice(0,ot);if(at<1)for(let ut=1;ut<ot;ut+=1){const ht=at*ut%1;lt[ut]=st.values[ut-1]*(1-ht)+st.values[ut]*ht}this._automationEvents[this._automationEvents.length-1]=createSetValueCurveAutomationEvent(lt,st.startTime,rt)}}}else{const Je=this._automationEvents.findIndex(rt=>getEventTime(rt)>Ye),tt=Je===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[Je-1];if(tt!==void 0&&isSetValueCurveAutomationEvent(tt)&&getEventTime(tt)+tt.duration>Ye)return!1;const st=isExponentialRampToValueAutomationEvent(Ke)?createExtendedExponentialRampToValueAutomationEvent(Ke.value,Ke.endTime,this._currenTime):isLinearRampToValueAutomationEvent(Ke)?createExtendedLinearRampToValueAutomationEvent(Ke.value,Ye,this._currenTime):Ke;if(Je===-1)this._automationEvents.push(st);else{if(isSetValueCurveAutomationEvent(Ke)&&Ye+Ke.duration>getEventTime(this._automationEvents[Je]))return!1;this._automationEvents.splice(Je,0,st)}}return!0}flush(Ke){const Ye=this._automationEvents.findIndex(Je=>getEventTime(Je)>Ke);if(Ye>1){const Je=this._automationEvents.slice(Ye-1),tt=Je[0];isSetTargetAutomationEvent(tt)&&Je.unshift(createSetValueAutomationEvent(getValueOfAutomationEventAtIndexAtTime(this._automationEvents,Ye-2,tt.startTime,this._defaultValue),tt.startTime)),this._automationEvents=Je}}getValue(Ke){if(this._automationEvents.length===0)return this._defaultValue;const Ye=this._automationEvents.findIndex(rt=>getEventTime(rt)>Ke),Je=this._automationEvents[Ye],tt=(Ye===-1?this._automationEvents.length:Ye)-1,st=this._automationEvents[tt];if(st!==void 0&&isSetTargetAutomationEvent(st)&&(Je===void 0||!isAnyRampToValueAutomationEvent(Je)||Je.insertTime>Ke))return getTargetValueAtTime(Ke,getValueOfAutomationEventAtIndexAtTime(this._automationEvents,tt-1,st.startTime,this._defaultValue),st);if(st!==void 0&&isSetValueAutomationEvent(st)&&(Je===void 0||!isAnyRampToValueAutomationEvent(Je)))return st.value;if(st!==void 0&&isSetValueCurveAutomationEvent(st)&&(Je===void 0||!isAnyRampToValueAutomationEvent(Je)||st.startTime+st.duration>Ke))return Ke<st.startTime+st.duration?getValueCurveValueAtTime(Ke,st):st.values[st.values.length-1];if(st!==void 0&&isAnyRampToValueAutomationEvent(st)&&(Je===void 0||!isAnyRampToValueAutomationEvent(Je)))return st.value;if(Je!==void 0&&isExponentialRampToValueAutomationEvent(Je)){const[rt,it]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,tt,st,Je,this._defaultValue);return getExponentialRampValueAtTime(Ke,rt,it,Je)}if(Je!==void 0&&isLinearRampToValueAutomationEvent(Je)){const[rt,it]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,tt,st,Je,this._defaultValue);return getLinearRampValueAtTime(Ke,rt,it,Je)}return this._defaultValue}}const createCancelAndHoldAutomationEvent=Xe=>({cancelTime:Xe,type:"cancelAndHold"}),createCancelScheduledValuesAutomationEvent=Xe=>({cancelTime:Xe,type:"cancelScheduledValues"}),createExponentialRampToValueAutomationEvent=(Xe,Ke)=>({endTime:Ke,type:"exponentialRampToValue",value:Xe}),createLinearRampToValueAutomationEvent=(Xe,Ke)=>({endTime:Ke,type:"linearRampToValue",value:Xe}),createSetTargetAutomationEvent=(Xe,Ke,Ye)=>({startTime:Ke,target:Xe,timeConstant:Ye,type:"setTarget"}),createAbortError=()=>new DOMException("","AbortError"),createAddActiveInputConnectionToAudioNode=Xe=>(Ke,Ye,[Je,tt,st],rt)=>{Xe(Ke[tt],[Ye,Je,st],it=>it[0]===Ye&&it[1]===Je,rt)},createAddAudioNodeConnections=Xe=>(Ke,Ye,Je)=>{const tt=[];for(let st=0;st<Je.numberOfInputs;st+=1)tt.push(new Set);Xe.set(Ke,{activeInputs:tt,outputs:new Set,passiveInputs:new WeakMap,renderer:Ye})},createAddAudioParamConnections=Xe=>(Ke,Ye)=>{Xe.set(Ke,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:Ye})},ACTIVE_AUDIO_NODE_STORE=new WeakSet,AUDIO_NODE_CONNECTIONS_STORE=new WeakMap,AUDIO_NODE_STORE=new WeakMap,AUDIO_PARAM_CONNECTIONS_STORE=new WeakMap,AUDIO_PARAM_STORE=new WeakMap,CONTEXT_STORE=new WeakMap,EVENT_LISTENERS=new WeakMap,CYCLE_COUNTERS=new WeakMap,NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=new WeakMap,NODE_TO_PROCESSOR_MAPS=new WeakMap,handler={construct(){return handler}},isConstructible=Xe=>{try{const Ke=new Proxy(Xe,handler);new Ke}catch{return!1}return!0},IMPORT_STATEMENT_REGEX=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,splitImportStatements=(Xe,Ke)=>{const Ye=[];let Je=Xe.replace(/^[\s]+/,""),tt=Je.match(IMPORT_STATEMENT_REGEX);for(;tt!==null;){const st=tt[1].slice(1,-1),rt=tt[0].replace(/([\s]+)?;?$/,"").replace(st,new URL(st,Ke).toString());Ye.push(rt),Je=Je.slice(tt[0].length).replace(/^[\s]+/,""),tt=Je.match(IMPORT_STATEMENT_REGEX)}return[Ye.join(";"),Je]},verifyParameterDescriptors=Xe=>{if(Xe!==void 0&&!Array.isArray(Xe))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},verifyProcessorCtor=Xe=>{if(!isConstructible(Xe))throw new TypeError("The given value for processorCtor should be a constructor.");if(Xe.prototype===null||typeof Xe.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},createAddAudioWorkletModule=(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht)=>{let pt=0;return(ft,xt,vt={credentials:"omit"})=>{const At=lt.get(ft);if(At!==void 0&&At.has(xt))return Promise.resolve();const Et=at.get(ft);if(Et!==void 0){const Ct=Et.get(xt);if(Ct!==void 0)return Ct}const wt=st(ft),_t=wt.audioWorklet===void 0?tt(xt).then(([Ct,Tt])=>{const[St,Rt]=splitImportStatements(Ct,Tt),Nt=`${St};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${Rt}
})})(window,'_AWGS')`;return Ye(Nt)}).then(()=>{const Ct=ht._AWGS.pop();if(Ct===void 0)throw new SyntaxError;Je(wt.currentTime,wt.sampleRate,()=>Ct(class{},void 0,(Tt,St)=>{if(Tt.trim()==="")throw Ke();const Rt=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(wt);if(Rt!==void 0){if(Rt.has(Tt))throw Ke();verifyProcessorCtor(St),verifyParameterDescriptors(St.parameterDescriptors),Rt.set(Tt,St)}else verifyProcessorCtor(St),verifyParameterDescriptors(St.parameterDescriptors),NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(wt,new Map([[Tt,St]]))},wt.sampleRate,void 0,void 0))}):Promise.all([tt(xt),Promise.resolve(Xe(ut,ut))]).then(([[Ct,Tt],St])=>{const Rt=pt+1;pt=Rt;const[Nt,Pt]=splitImportStatements(Ct,Tt),Dt=`${Nt};((AudioWorkletProcessor,registerProcessor)=>{${Pt}
})(${St?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${St?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${St?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${Rt}',class extends AudioWorkletProcessor{process(){return !1}})`,Vt=new Blob([Dt],{type:"application/javascript; charset=utf-8"}),Gt=URL.createObjectURL(Vt);return wt.audioWorklet.addModule(Gt,vt).then(()=>{if(it(wt))return wt;const Qt=rt(wt);return Qt.audioWorklet.addModule(Gt,vt).then(()=>Qt)}).then(Qt=>{if(ot===null)throw new SyntaxError;try{new ot(Qt,`__sac${Rt}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Gt))});return Et===void 0?at.set(ft,new Map([[xt,_t]])):Et.set(xt,_t),_t.then(()=>{const Ct=lt.get(ft);Ct===void 0?lt.set(ft,new Set([xt])):Ct.add(xt)}).finally(()=>{const Ct=at.get(ft);Ct!==void 0&&Ct.delete(xt)}),_t}},getValueForKey=(Xe,Ke)=>{const Ye=Xe.get(Ke);if(Ye===void 0)throw new Error("A value with the given key could not be found.");return Ye},pickElementFromSet=(Xe,Ke)=>{const Ye=Array.from(Xe).filter(Ke);if(Ye.length>1)throw Error("More than one element was found.");if(Ye.length===0)throw Error("No element was found.");const[Je]=Ye;return Xe.delete(Je),Je},deletePassiveInputConnectionToAudioNode=(Xe,Ke,Ye,Je)=>{const tt=getValueForKey(Xe,Ke),st=pickElementFromSet(tt,rt=>rt[0]===Ye&&rt[1]===Je);return tt.size===0&&Xe.delete(Ke),st},getEventListenersOfAudioNode=Xe=>getValueForKey(EVENT_LISTENERS,Xe),setInternalStateToActive=Xe=>{if(ACTIVE_AUDIO_NODE_STORE.has(Xe))throw new Error("The AudioNode is already stored.");ACTIVE_AUDIO_NODE_STORE.add(Xe),getEventListenersOfAudioNode(Xe).forEach(Ke=>Ke(!0))},isAudioWorkletNode=Xe=>"port"in Xe,setInternalStateToPassive=Xe=>{if(!ACTIVE_AUDIO_NODE_STORE.has(Xe))throw new Error("The AudioNode is not stored.");ACTIVE_AUDIO_NODE_STORE.delete(Xe),getEventListenersOfAudioNode(Xe).forEach(Ke=>Ke(!1))},setInternalStateToPassiveWhenNecessary=(Xe,Ke)=>{!isAudioWorkletNode(Xe)&&Ke.every(Ye=>Ye.size===0)&&setInternalStateToPassive(Xe)},createAddConnectionToAudioNode=(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht)=>{const pt=new WeakMap;return(ft,xt,vt,At,Et)=>{const{activeInputs:wt,passiveInputs:_t}=st(xt),{outputs:Ct}=st(ft),Tt=it(ft),St=Rt=>{const Nt=ot(xt),Pt=ot(ft);if(Rt){const Bt=deletePassiveInputConnectionToAudioNode(_t,ft,vt,At);Xe(wt,ft,Bt,!1),!Et&&!ut(ft)&&Ye(Pt,Nt,vt,At),ht(xt)&&setInternalStateToActive(xt)}else{const Bt=Je(wt,ft,vt,At);Ke(_t,At,Bt,!1),!Et&&!ut(ft)&&tt(Pt,Nt,vt,At);const Lt=rt(xt);if(Lt===0)lt(xt)&&setInternalStateToPassiveWhenNecessary(xt,wt);else{const zt=pt.get(xt);zt!==void 0&&clearTimeout(zt),pt.set(xt,setTimeout(()=>{lt(xt)&&setInternalStateToPassiveWhenNecessary(xt,wt)},Lt*1e3))}}};return at(Ct,[xt,vt,At],Rt=>Rt[0]===xt&&Rt[1]===vt&&Rt[2]===At,!0)?(Tt.add(St),lt(ft)?Xe(wt,ft,[vt,At,St],!0):Ke(_t,At,[ft,vt,St],!0),!0):!1}},createAddPassiveInputConnectionToAudioNode=Xe=>(Ke,Ye,[Je,tt,st],rt)=>{const it=Ke.get(Je);it===void 0?Ke.set(Je,new Set([[tt,Ye,st]])):Xe(it,[tt,Ye,st],ot=>ot[0]===tt&&ot[1]===Ye,rt)},createAddSilentConnection=Xe=>(Ke,Ye)=>{const Je=Xe(Ke,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});Ye.connect(Je).connect(Ke.destination);const tt=()=>{Ye.removeEventListener("ended",tt),Ye.disconnect(Je),Je.disconnect()};Ye.addEventListener("ended",tt)},createAddUnrenderedAudioWorkletNode=Xe=>(Ke,Ye)=>{Xe(Ke).add(Ye)},DEFAULT_OPTIONS$j={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},createAnalyserNodeConstructor=(Xe,Ke,Ye,Je,tt,st)=>class extends Xe{constructor(it,ot){const at=tt(it),lt={...DEFAULT_OPTIONS$j,...ot},ut=Je(at,lt),ht=st(at)?Ke():null;super(it,!1,ut,ht),this._nativeAnalyserNode=ut}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(it){this._nativeAnalyserNode.fftSize=it}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(it){const ot=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=it,!(it>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=ot,Ye()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(it){const ot=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=it,!(this._nativeAnalyserNode.maxDecibels>it))throw this._nativeAnalyserNode.minDecibels=ot,Ye()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(it){this._nativeAnalyserNode.smoothingTimeConstant=it}getByteFrequencyData(it){this._nativeAnalyserNode.getByteFrequencyData(it)}getByteTimeDomainData(it){this._nativeAnalyserNode.getByteTimeDomainData(it)}getFloatFrequencyData(it){this._nativeAnalyserNode.getFloatFrequencyData(it)}getFloatTimeDomainData(it){this._nativeAnalyserNode.getFloatTimeDomainData(it)}},isOwnedByContext=(Xe,Ke)=>Xe.context===Ke,createAnalyserNodeRendererFactory=(Xe,Ke,Ye)=>()=>{const Je=new WeakMap,tt=async(st,rt)=>{let it=Ke(st);if(!isOwnedByContext(it,rt)){const at={channelCount:it.channelCount,channelCountMode:it.channelCountMode,channelInterpretation:it.channelInterpretation,fftSize:it.fftSize,maxDecibels:it.maxDecibels,minDecibels:it.minDecibels,smoothingTimeConstant:it.smoothingTimeConstant};it=Xe(rt,at)}return Je.set(rt,it),await Ye(st,rt,it),it};return{render(st,rt){const it=Je.get(rt);return it!==void 0?Promise.resolve(it):tt(st,rt)}}},testAudioBufferCopyChannelMethodsOutOfBoundsSupport=Xe=>{try{Xe.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},createIndexSizeError=()=>new DOMException("","IndexSizeError"),wrapAudioBufferGetChannelDataMethod=Xe=>{Xe.getChannelData=(Ke=>Ye=>{try{return Ke.call(Xe,Ye)}catch(Je){throw Je.code===12?createIndexSizeError():Je}})(Xe.getChannelData)},DEFAULT_OPTIONS$i={numberOfChannels:1},createAudioBufferConstructor=(Xe,Ke,Ye,Je,tt,st,rt,it)=>{let ot=null;return class Mu{constructor(lt){if(tt===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:ut,numberOfChannels:ht,sampleRate:pt}={...DEFAULT_OPTIONS$i,...lt};ot===null&&(ot=new tt(1,1,44100));const ft=Je!==null&&Ke(st,st)?new Je({length:ut,numberOfChannels:ht,sampleRate:pt}):ot.createBuffer(ht,ut,pt);if(ft.numberOfChannels===0)throw Ye();return typeof ft.copyFromChannel!="function"?(rt(ft),wrapAudioBufferGetChannelDataMethod(ft)):Ke(testAudioBufferCopyChannelMethodsOutOfBoundsSupport,()=>testAudioBufferCopyChannelMethodsOutOfBoundsSupport(ft))||it(ft),Xe.add(ft),ft}static[Symbol.hasInstance](lt){return lt!==null&&typeof lt=="object"&&Object.getPrototypeOf(lt)===Mu.prototype||Xe.has(lt)}}},MOST_NEGATIVE_SINGLE_FLOAT=-34028234663852886e22,MOST_POSITIVE_SINGLE_FLOAT=-MOST_NEGATIVE_SINGLE_FLOAT,isActiveAudioNode=Xe=>ACTIVE_AUDIO_NODE_STORE.has(Xe),DEFAULT_OPTIONS$h={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},createAudioBufferSourceNodeConstructor=(Xe,Ke,Ye,Je,tt,st,rt,it)=>class extends Xe{constructor(at,lt){const ut=st(at),ht={...DEFAULT_OPTIONS$h,...lt},pt=tt(ut,ht),ft=rt(ut),xt=ft?Ke():null;super(at,!1,pt,xt),this._audioBufferSourceNodeRenderer=xt,this._isBufferNullified=!1,this._isBufferSet=ht.buffer!==null,this._nativeAudioBufferSourceNode=pt,this._onended=null,this._playbackRate=Ye(this,ft,pt.playbackRate,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(at){if(this._nativeAudioBufferSourceNode.buffer=at,at!==null){if(this._isBufferSet)throw Je();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(at){this._nativeAudioBufferSourceNode.loop=at}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(at){this._nativeAudioBufferSourceNode.loopEnd=at}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(at){this._nativeAudioBufferSourceNode.loopStart=at}get onended(){return this._onended}set onended(at){const lt=typeof at=="function"?it(this,at):null;this._nativeAudioBufferSourceNode.onended=lt;const ut=this._nativeAudioBufferSourceNode.onended;this._onended=ut!==null&&ut===lt?at:ut}get playbackRate(){return this._playbackRate}start(at=0,lt=0,ut){if(this._nativeAudioBufferSourceNode.start(at,lt,ut),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=ut===void 0?[at,lt]:[at,lt,ut]),this.context.state!=="closed"){setInternalStateToActive(this);const ht=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",ht),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",ht)}}stop(at=0){this._nativeAudioBufferSourceNode.stop(at),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=at)}},createAudioBufferSourceNodeRendererFactory=(Xe,Ke,Ye,Je,tt)=>()=>{const st=new WeakMap;let rt=null,it=null;const ot=async(at,lt)=>{let ut=Ye(at);const ht=isOwnedByContext(ut,lt);if(!ht){const pt={buffer:ut.buffer,channelCount:ut.channelCount,channelCountMode:ut.channelCountMode,channelInterpretation:ut.channelInterpretation,loop:ut.loop,loopEnd:ut.loopEnd,loopStart:ut.loopStart,playbackRate:ut.playbackRate.value};ut=Ke(lt,pt),rt!==null&&ut.start(...rt),it!==null&&ut.stop(it)}return st.set(lt,ut),ht?await Xe(lt,at.playbackRate,ut.playbackRate):await Je(lt,at.playbackRate,ut.playbackRate),await tt(at,lt,ut),ut};return{set start(at){rt=at},set stop(at){it=at},render(at,lt){const ut=st.get(lt);return ut!==void 0?Promise.resolve(ut):ot(at,lt)}}},isAudioBufferSourceNode=Xe=>"playbackRate"in Xe,isBiquadFilterNode=Xe=>"frequency"in Xe&&"gain"in Xe,isConstantSourceNode=Xe=>"offset"in Xe,isGainNode=Xe=>!("frequency"in Xe)&&"gain"in Xe,isOscillatorNode=Xe=>"detune"in Xe&&"frequency"in Xe,isStereoPannerNode=Xe=>"pan"in Xe,getAudioNodeConnections=Xe=>getValueForKey(AUDIO_NODE_CONNECTIONS_STORE,Xe),getAudioParamConnections=Xe=>getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE,Xe),deactivateActiveAudioNodeInputConnections=(Xe,Ke)=>{const{activeInputs:Ye}=getAudioNodeConnections(Xe);Ye.forEach(tt=>tt.forEach(([st])=>{Ke.includes(Xe)||deactivateActiveAudioNodeInputConnections(st,[...Ke,Xe])}));const Je=isAudioBufferSourceNode(Xe)?[Xe.playbackRate]:isAudioWorkletNode(Xe)?Array.from(Xe.parameters.values()):isBiquadFilterNode(Xe)?[Xe.Q,Xe.detune,Xe.frequency,Xe.gain]:isConstantSourceNode(Xe)?[Xe.offset]:isGainNode(Xe)?[Xe.gain]:isOscillatorNode(Xe)?[Xe.detune,Xe.frequency]:isStereoPannerNode(Xe)?[Xe.pan]:[];for(const tt of Je){const st=getAudioParamConnections(tt);st!==void 0&&st.activeInputs.forEach(([rt])=>deactivateActiveAudioNodeInputConnections(rt,Ke))}isActiveAudioNode(Xe)&&setInternalStateToPassive(Xe)},deactivateAudioGraph=Xe=>{deactivateActiveAudioNodeInputConnections(Xe.destination,[])},isValidLatencyHint=Xe=>Xe===void 0||typeof Xe=="number"||typeof Xe=="string"&&(Xe==="balanced"||Xe==="interactive"||Xe==="playback"),createAudioContextConstructor=(Xe,Ke,Ye,Je,tt,st,rt,it,ot)=>class extends Xe{constructor(lt={}){if(ot===null)throw new Error("Missing the native AudioContext constructor.");let ut;try{ut=new ot(lt)}catch(ft){throw ft.code===12&&ft.message==="sampleRate is not in range"?Ye():ft}if(ut===null)throw Je();if(!isValidLatencyHint(lt.latencyHint))throw new TypeError(`The provided value '${lt.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(lt.sampleRate!==void 0&&ut.sampleRate!==lt.sampleRate)throw Ye();super(ut,2);const{latencyHint:ht}=lt,{sampleRate:pt}=ut;if(this._baseLatency=typeof ut.baseLatency=="number"?ut.baseLatency:ht==="balanced"?512/pt:ht==="interactive"||ht===void 0?256/pt:ht==="playback"?1024/pt:Math.max(2,Math.min(128,Math.round(ht*pt/128)))*128/pt,this._nativeAudioContext=ut,ot.name==="webkitAudioContext"?(this._nativeGainNode=ut.createGain(),this._nativeOscillatorNode=ut.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(ut.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,ut.state==="running"){this._state="suspended";const ft=()=>{this._state==="suspended"&&(this._state=null),ut.removeEventListener("statechange",ft)};ut.addEventListener("statechange",ft)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw Ke()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),deactivateAudioGraph(this)}))}createMediaElementSource(lt){return new tt(this,{mediaElement:lt})}createMediaStreamDestination(){return new st(this)}createMediaStreamSource(lt){return new rt(this,{mediaStream:lt})}createMediaStreamTrackSource(lt){return new it(this,{mediaStreamTrack:lt})}resume(){return this._state==="suspended"?new Promise((lt,ut)=>{const ht=()=>{this._nativeAudioContext.removeEventListener("statechange",ht),this._nativeAudioContext.state==="running"?lt():this.resume().then(lt,ut)};this._nativeAudioContext.addEventListener("statechange",ht)}):this._nativeAudioContext.resume().catch(lt=>{throw lt===void 0||lt.code===15?Ke():lt})}suspend(){return this._nativeAudioContext.suspend().catch(lt=>{throw lt===void 0?Ke():lt})}},createAudioDestinationNodeConstructor=(Xe,Ke,Ye,Je,tt,st,rt,it)=>class extends Xe{constructor(at,lt){const ut=st(at),ht=rt(ut),pt=tt(ut,lt,ht),ft=ht?Ke(it):null;super(at,!1,pt,ft),this._isNodeOfNativeOfflineAudioContext=ht,this._nativeAudioDestinationNode=pt}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(at){if(this._isNodeOfNativeOfflineAudioContext)throw Je();if(at>this._nativeAudioDestinationNode.maxChannelCount)throw Ye();this._nativeAudioDestinationNode.channelCount=at}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(at){if(this._isNodeOfNativeOfflineAudioContext)throw Je();this._nativeAudioDestinationNode.channelCountMode=at}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},createAudioDestinationNodeRenderer=Xe=>{const Ke=new WeakMap,Ye=async(Je,tt)=>{const st=tt.destination;return Ke.set(tt,st),await Xe(Je,tt,st),st};return{render(Je,tt){const st=Ke.get(tt);return st!==void 0?Promise.resolve(st):Ye(Je,tt)}}},createAudioListenerFactory=(Xe,Ke,Ye,Je,tt,st,rt,it)=>(ot,at)=>{const lt=at.listener,ut=()=>{const Ct=new Float32Array(1),Tt=Ke(at,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),St=rt(at);let Rt=!1,Nt=[0,0,-1,0,1,0],Pt=[0,0,0];const Bt=()=>{if(Rt)return;Rt=!0;const Vt=Je(at,256,9,0);Vt.onaudioprocess=({inputBuffer:Gt})=>{const Qt=[st(Gt,Ct,0),st(Gt,Ct,1),st(Gt,Ct,2),st(Gt,Ct,3),st(Gt,Ct,4),st(Gt,Ct,5)];Qt.some((Ht,Yt)=>Ht!==Nt[Yt])&&(lt.setOrientation(...Qt),Nt=Qt);const jt=[st(Gt,Ct,6),st(Gt,Ct,7),st(Gt,Ct,8)];jt.some((Ht,Yt)=>Ht!==Pt[Yt])&&(lt.setPosition(...jt),Pt=jt)},Tt.connect(Vt)},Lt=Vt=>Gt=>{Gt!==Nt[Vt]&&(Nt[Vt]=Gt,lt.setOrientation(...Nt))},zt=Vt=>Gt=>{Gt!==Pt[Vt]&&(Pt[Vt]=Gt,lt.setPosition(...Pt))},Dt=(Vt,Gt,Qt)=>{const jt=Ye(at,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Gt});jt.connect(Tt,0,Vt),jt.start(),Object.defineProperty(jt.offset,"defaultValue",{get(){return Gt}});const Ht=Xe({context:ot},St,jt.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT);return it(Ht,"value",Yt=>()=>Yt.call(Ht),Yt=>Jt=>{try{Yt.call(Ht,Jt)}catch(Zt){if(Zt.code!==9)throw Zt}Bt(),St&&Qt(Jt)}),Ht.cancelAndHoldAtTime=(Yt=>St?()=>{throw tt()}:(...Jt)=>{const Zt=Yt.apply(Ht,Jt);return Bt(),Zt})(Ht.cancelAndHoldAtTime),Ht.cancelScheduledValues=(Yt=>St?()=>{throw tt()}:(...Jt)=>{const Zt=Yt.apply(Ht,Jt);return Bt(),Zt})(Ht.cancelScheduledValues),Ht.exponentialRampToValueAtTime=(Yt=>St?()=>{throw tt()}:(...Jt)=>{const Zt=Yt.apply(Ht,Jt);return Bt(),Zt})(Ht.exponentialRampToValueAtTime),Ht.linearRampToValueAtTime=(Yt=>St?()=>{throw tt()}:(...Jt)=>{const Zt=Yt.apply(Ht,Jt);return Bt(),Zt})(Ht.linearRampToValueAtTime),Ht.setTargetAtTime=(Yt=>St?()=>{throw tt()}:(...Jt)=>{const Zt=Yt.apply(Ht,Jt);return Bt(),Zt})(Ht.setTargetAtTime),Ht.setValueAtTime=(Yt=>St?()=>{throw tt()}:(...Jt)=>{const Zt=Yt.apply(Ht,Jt);return Bt(),Zt})(Ht.setValueAtTime),Ht.setValueCurveAtTime=(Yt=>St?()=>{throw tt()}:(...Jt)=>{const Zt=Yt.apply(Ht,Jt);return Bt(),Zt})(Ht.setValueCurveAtTime),Ht};return{forwardX:Dt(0,0,Lt(0)),forwardY:Dt(1,0,Lt(1)),forwardZ:Dt(2,-1,Lt(2)),positionX:Dt(6,0,zt(0)),positionY:Dt(7,0,zt(1)),positionZ:Dt(8,0,zt(2)),upX:Dt(3,0,Lt(3)),upY:Dt(4,1,Lt(4)),upZ:Dt(5,0,Lt(5))}},{forwardX:ht,forwardY:pt,forwardZ:ft,positionX:xt,positionY:vt,positionZ:At,upX:Et,upY:wt,upZ:_t}=lt.forwardX===void 0?ut():lt;return{get forwardX(){return ht},get forwardY(){return pt},get forwardZ(){return ft},get positionX(){return xt},get positionY(){return vt},get positionZ(){return At},get upX(){return Et},get upY(){return wt},get upZ(){return _t}}},isAudioNode$1=Xe=>"context"in Xe,isAudioNodeOutputConnection=Xe=>isAudioNode$1(Xe[0]),insertElementInSet=(Xe,Ke,Ye,Je)=>{for(const tt of Xe)if(Ye(tt)){if(Je)return!1;throw Error("The set contains at least one similar element.")}return Xe.add(Ke),!0},addActiveInputConnectionToAudioParam=(Xe,Ke,[Ye,Je],tt)=>{insertElementInSet(Xe,[Ke,Ye,Je],st=>st[0]===Ke&&st[1]===Ye,tt)},addPassiveInputConnectionToAudioParam=(Xe,[Ke,Ye,Je],tt)=>{const st=Xe.get(Ke);st===void 0?Xe.set(Ke,new Set([[Ye,Je]])):insertElementInSet(st,[Ye,Je],rt=>rt[0]===Ye,tt)},isNativeAudioNodeFaker=Xe=>"inputs"in Xe,connectNativeAudioNodeToNativeAudioNode=(Xe,Ke,Ye,Je)=>{if(isNativeAudioNodeFaker(Ke)){const tt=Ke.inputs[Je];return Xe.connect(tt,Ye,0),[tt,Ye,0]}return Xe.connect(Ke,Ye,Je),[Ke,Ye,Je]},deleteActiveInputConnection=(Xe,Ke,Ye)=>{for(const Je of Xe)if(Je[0]===Ke&&Je[1]===Ye)return Xe.delete(Je),Je;return null},deleteActiveInputConnectionToAudioParam=(Xe,Ke,Ye)=>pickElementFromSet(Xe,Je=>Je[0]===Ke&&Je[1]===Ye),deleteEventListenerOfAudioNode=(Xe,Ke)=>{if(!getEventListenersOfAudioNode(Xe).delete(Ke))throw new Error("Missing the expected event listener.")},deletePassiveInputConnectionToAudioParam=(Xe,Ke,Ye)=>{const Je=getValueForKey(Xe,Ke),tt=pickElementFromSet(Je,st=>st[0]===Ye);return Je.size===0&&Xe.delete(Ke),tt},disconnectNativeAudioNodeFromNativeAudioNode=(Xe,Ke,Ye,Je)=>{isNativeAudioNodeFaker(Ke)?Xe.disconnect(Ke.inputs[Je],Ye,0):Xe.disconnect(Ke,Ye,Je)},getNativeAudioNode=Xe=>getValueForKey(AUDIO_NODE_STORE,Xe),getNativeAudioParam=Xe=>getValueForKey(AUDIO_PARAM_STORE,Xe),isPartOfACycle=Xe=>CYCLE_COUNTERS.has(Xe),isPassiveAudioNode=Xe=>!ACTIVE_AUDIO_NODE_STORE.has(Xe),testAudioNodeDisconnectMethodSupport=(Xe,Ke)=>new Promise(Ye=>{if(Ke!==null)Ye(!0);else{const Je=Xe.createScriptProcessor(256,1,1),tt=Xe.createGain(),st=Xe.createBuffer(1,2,44100),rt=st.getChannelData(0);rt[0]=1,rt[1]=1;const it=Xe.createBufferSource();it.buffer=st,it.loop=!0,it.connect(Je).connect(Xe.destination),it.connect(tt),it.disconnect(tt),Je.onaudioprocess=ot=>{const at=ot.inputBuffer.getChannelData(0);Array.prototype.some.call(at,lt=>lt===1)?Ye(!0):Ye(!1),it.stop(),Je.onaudioprocess=null,it.disconnect(Je),Je.disconnect(Xe.destination)},it.start()}}),visitEachAudioNodeOnce=(Xe,Ke)=>{const Ye=new Map;for(const Je of Xe)for(const tt of Je){const st=Ye.get(tt);Ye.set(tt,st===void 0?1:st+1)}Ye.forEach((Je,tt)=>Ke(tt,Je))},isNativeAudioNode$1=Xe=>"context"in Xe,wrapAudioNodeDisconnectMethod=Xe=>{const Ke=new Map;Xe.connect=(Ye=>(Je,tt=0,st=0)=>{const rt=isNativeAudioNode$1(Je)?Ye(Je,tt,st):Ye(Je,tt),it=Ke.get(Je);return it===void 0?Ke.set(Je,[{input:st,output:tt}]):it.every(ot=>ot.input!==st||ot.output!==tt)&&it.push({input:st,output:tt}),rt})(Xe.connect.bind(Xe)),Xe.disconnect=(Ye=>(Je,tt,st)=>{if(Ye.apply(Xe),Je===void 0)Ke.clear();else if(typeof Je=="number")for(const[rt,it]of Ke){const ot=it.filter(at=>at.output!==Je);ot.length===0?Ke.delete(rt):Ke.set(rt,ot)}else if(Ke.has(Je))if(tt===void 0)Ke.delete(Je);else{const rt=Ke.get(Je);if(rt!==void 0){const it=rt.filter(ot=>ot.output!==tt&&(ot.input!==st||st===void 0));it.length===0?Ke.delete(Je):Ke.set(Je,it)}}for(const[rt,it]of Ke)it.forEach(ot=>{isNativeAudioNode$1(rt)?Xe.connect(rt,ot.output,ot.input):Xe.connect(rt,ot.output)})})(Xe.disconnect)},addConnectionToAudioParamOfAudioContext=(Xe,Ke,Ye,Je)=>{const{activeInputs:tt,passiveInputs:st}=getAudioParamConnections(Ke),{outputs:rt}=getAudioNodeConnections(Xe),it=getEventListenersOfAudioNode(Xe),ot=at=>{const lt=getNativeAudioNode(Xe),ut=getNativeAudioParam(Ke);if(at){const ht=deletePassiveInputConnectionToAudioParam(st,Xe,Ye);addActiveInputConnectionToAudioParam(tt,Xe,ht,!1),!Je&&!isPartOfACycle(Xe)&&lt.connect(ut,Ye)}else{const ht=deleteActiveInputConnectionToAudioParam(tt,Xe,Ye);addPassiveInputConnectionToAudioParam(st,ht,!1),!Je&&!isPartOfACycle(Xe)&&lt.disconnect(ut,Ye)}};return insertElementInSet(rt,[Ke,Ye],at=>at[0]===Ke&&at[1]===Ye,!0)?(it.add(ot),isActiveAudioNode(Xe)?addActiveInputConnectionToAudioParam(tt,Xe,[Ye,ot],!0):addPassiveInputConnectionToAudioParam(st,[Xe,Ye,ot],!0),!0):!1},deleteInputConnectionOfAudioNode=(Xe,Ke,Ye,Je)=>{const{activeInputs:tt,passiveInputs:st}=getAudioNodeConnections(Ke),rt=deleteActiveInputConnection(tt[Je],Xe,Ye);return rt===null?[deletePassiveInputConnectionToAudioNode(st,Xe,Ye,Je)[2],!1]:[rt[2],!0]},deleteInputConnectionOfAudioParam=(Xe,Ke,Ye)=>{const{activeInputs:Je,passiveInputs:tt}=getAudioParamConnections(Ke),st=deleteActiveInputConnection(Je,Xe,Ye);return st===null?[deletePassiveInputConnectionToAudioParam(tt,Xe,Ye)[1],!1]:[st[2],!0]},deleteInputsOfAudioNode=(Xe,Ke,Ye,Je,tt)=>{const[st,rt]=deleteInputConnectionOfAudioNode(Xe,Ye,Je,tt);if(st!==null&&(deleteEventListenerOfAudioNode(Xe,st),rt&&!Ke&&!isPartOfACycle(Xe)&&disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(Xe),getNativeAudioNode(Ye),Je,tt)),isActiveAudioNode(Ye)){const{activeInputs:it}=getAudioNodeConnections(Ye);setInternalStateToPassiveWhenNecessary(Ye,it)}},deleteInputsOfAudioParam=(Xe,Ke,Ye,Je)=>{const[tt,st]=deleteInputConnectionOfAudioParam(Xe,Ye,Je);tt!==null&&(deleteEventListenerOfAudioNode(Xe,tt),st&&!Ke&&!isPartOfACycle(Xe)&&getNativeAudioNode(Xe).disconnect(getNativeAudioParam(Ye),Je))},deleteAnyConnection=(Xe,Ke)=>{const Ye=getAudioNodeConnections(Xe),Je=[];for(const tt of Ye.outputs)isAudioNodeOutputConnection(tt)?deleteInputsOfAudioNode(Xe,Ke,...tt):deleteInputsOfAudioParam(Xe,Ke,...tt),Je.push(tt[0]);return Ye.outputs.clear(),Je},deleteConnectionAtOutput=(Xe,Ke,Ye)=>{const Je=getAudioNodeConnections(Xe),tt=[];for(const st of Je.outputs)st[1]===Ye&&(isAudioNodeOutputConnection(st)?deleteInputsOfAudioNode(Xe,Ke,...st):deleteInputsOfAudioParam(Xe,Ke,...st),tt.push(st[0]),Je.outputs.delete(st));return tt},deleteConnectionToDestination=(Xe,Ke,Ye,Je,tt)=>{const st=getAudioNodeConnections(Xe);return Array.from(st.outputs).filter(rt=>rt[0]===Ye&&(Je===void 0||rt[1]===Je)&&(tt===void 0||rt[2]===tt)).map(rt=>(isAudioNodeOutputConnection(rt)?deleteInputsOfAudioNode(Xe,Ke,...rt):deleteInputsOfAudioParam(Xe,Ke,...rt),st.outputs.delete(rt),rt[0]))},createAudioNodeConstructor=(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht,pt,ft,xt)=>class extends at{constructor(At,Et,wt,_t){super(wt),this._context=At,this._nativeAudioNode=wt;const Ct=lt(At);ut(Ct)&&Ye(testAudioNodeDisconnectMethodSupport,()=>testAudioNodeDisconnectMethodSupport(Ct,xt))!==!0&&wrapAudioNodeDisconnectMethod(wt),AUDIO_NODE_STORE.set(this,wt),EVENT_LISTENERS.set(this,new Set),At.state!=="closed"&&Et&&setInternalStateToActive(this),Xe(this,_t,wt)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(At){this._nativeAudioNode.channelCount=At}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(At){this._nativeAudioNode.channelCountMode=At}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(At){this._nativeAudioNode.channelInterpretation=At}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(At,Et=0,wt=0){if(Et<0||Et>=this._nativeAudioNode.numberOfOutputs)throw tt();const _t=lt(this._context),Ct=ft(_t);if(ht(At)||pt(At))throw st();if(isAudioNode$1(At)){const Rt=getNativeAudioNode(At);try{const Pt=connectNativeAudioNodeToNativeAudioNode(this._nativeAudioNode,Rt,Et,wt),Bt=isPassiveAudioNode(this);(Ct||Bt)&&this._nativeAudioNode.disconnect(...Pt),this.context.state!=="closed"&&!Bt&&isPassiveAudioNode(At)&&setInternalStateToActive(At)}catch(Pt){throw Pt.code===12?st():Pt}if(Ke(this,At,Et,wt,Ct)){const Pt=ot([this],At);visitEachAudioNodeOnce(Pt,Je(Ct))}return At}const Tt=getNativeAudioParam(At);if(Tt.name==="playbackRate"&&Tt.maxValue===1024)throw rt();try{this._nativeAudioNode.connect(Tt,Et),(Ct||isPassiveAudioNode(this))&&this._nativeAudioNode.disconnect(Tt,Et)}catch(Rt){throw Rt.code===12?st():Rt}if(addConnectionToAudioParamOfAudioContext(this,At,Et,Ct)){const Rt=ot([this],At);visitEachAudioNodeOnce(Rt,Je(Ct))}}disconnect(At,Et,wt){let _t;const Ct=lt(this._context),Tt=ft(Ct);if(At===void 0)_t=deleteAnyConnection(this,Tt);else if(typeof At=="number"){if(At<0||At>=this.numberOfOutputs)throw tt();_t=deleteConnectionAtOutput(this,Tt,At)}else{if(Et!==void 0&&(Et<0||Et>=this.numberOfOutputs)||isAudioNode$1(At)&&wt!==void 0&&(wt<0||wt>=At.numberOfInputs))throw tt();if(_t=deleteConnectionToDestination(this,Tt,At,Et,wt),_t.length===0)throw st()}for(const St of _t){const Rt=ot([this],St);visitEachAudioNodeOnce(Rt,it)}}},createAudioParamFactory=(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht)=>(pt,ft,xt,vt=null,At=null)=>{const Et=xt.value,wt=new AutomationEventList(Et),_t=ft?Je(wt):null,Ct={get defaultValue(){return Et},get maxValue(){return vt===null?xt.maxValue:vt},get minValue(){return At===null?xt.minValue:At},get value(){return xt.value},set value(Tt){xt.value=Tt,Ct.setValueAtTime(Tt,pt.context.currentTime)},cancelAndHoldAtTime(Tt){if(typeof xt.cancelAndHoldAtTime=="function")_t===null&&wt.flush(pt.context.currentTime),wt.add(tt(Tt)),xt.cancelAndHoldAtTime(Tt);else{const St=Array.from(wt).pop();_t===null&&wt.flush(pt.context.currentTime),wt.add(tt(Tt));const Rt=Array.from(wt).pop();xt.cancelScheduledValues(Tt),St!==Rt&&Rt!==void 0&&(Rt.type==="exponentialRampToValue"?xt.exponentialRampToValueAtTime(Rt.value,Rt.endTime):Rt.type==="linearRampToValue"?xt.linearRampToValueAtTime(Rt.value,Rt.endTime):Rt.type==="setValue"?xt.setValueAtTime(Rt.value,Rt.startTime):Rt.type==="setValueCurve"&&xt.setValueCurveAtTime(Rt.values,Rt.startTime,Rt.duration))}return Ct},cancelScheduledValues(Tt){return _t===null&&wt.flush(pt.context.currentTime),wt.add(st(Tt)),xt.cancelScheduledValues(Tt),Ct},exponentialRampToValueAtTime(Tt,St){if(Tt===0)throw new RangeError;if(!Number.isFinite(St)||St<0)throw new RangeError;const Rt=pt.context.currentTime;return _t===null&&wt.flush(Rt),Array.from(wt).length===0&&(wt.add(at(Et,Rt)),xt.setValueAtTime(Et,Rt)),wt.add(rt(Tt,St)),xt.exponentialRampToValueAtTime(Tt,St),Ct},linearRampToValueAtTime(Tt,St){const Rt=pt.context.currentTime;return _t===null&&wt.flush(Rt),Array.from(wt).length===0&&(wt.add(at(Et,Rt)),xt.setValueAtTime(Et,Rt)),wt.add(it(Tt,St)),xt.linearRampToValueAtTime(Tt,St),Ct},setTargetAtTime(Tt,St,Rt){return _t===null&&wt.flush(pt.context.currentTime),wt.add(ot(Tt,St,Rt)),xt.setTargetAtTime(Tt,St,Rt),Ct},setValueAtTime(Tt,St){return _t===null&&wt.flush(pt.context.currentTime),wt.add(at(Tt,St)),xt.setValueAtTime(Tt,St),Ct},setValueCurveAtTime(Tt,St,Rt){const Nt=Tt instanceof Float32Array?Tt:new Float32Array(Tt);if(ut!==null&&ut.name==="webkitAudioContext"){const Pt=St+Rt,Bt=pt.context.sampleRate,Lt=Math.ceil(St*Bt),zt=Math.floor(Pt*Bt),Dt=zt-Lt,Vt=new Float32Array(Dt);for(let Qt=0;Qt<Dt;Qt+=1){const jt=(Nt.length-1)/Rt*((Lt+Qt)/Bt-St),Ht=Math.floor(jt),Yt=Math.ceil(jt);Vt[Qt]=Ht===Yt?Nt[Ht]:(1-(jt-Ht))*Nt[Ht]+(1-(Yt-jt))*Nt[Yt]}_t===null&&wt.flush(pt.context.currentTime),wt.add(lt(Vt,St,Rt)),xt.setValueCurveAtTime(Vt,St,Rt);const Gt=zt/Bt;Gt<Pt&&ht(Ct,Vt[Vt.length-1],Gt),ht(Ct,Nt[Nt.length-1],Pt)}else _t===null&&wt.flush(pt.context.currentTime),wt.add(lt(Nt,St,Rt)),xt.setValueCurveAtTime(Nt,St,Rt);return Ct}};return Ye.set(Ct,xt),Ke.set(Ct,pt),Xe(Ct,_t),Ct},createAudioParamRenderer=Xe=>({replay(Ke){for(const Ye of Xe)if(Ye.type==="exponentialRampToValue"){const{endTime:Je,value:tt}=Ye;Ke.exponentialRampToValueAtTime(tt,Je)}else if(Ye.type==="linearRampToValue"){const{endTime:Je,value:tt}=Ye;Ke.linearRampToValueAtTime(tt,Je)}else if(Ye.type==="setTarget"){const{startTime:Je,target:tt,timeConstant:st}=Ye;Ke.setTargetAtTime(tt,Je,st)}else if(Ye.type==="setValue"){const{startTime:Je,value:tt}=Ye;Ke.setValueAtTime(tt,Je)}else if(Ye.type==="setValueCurve"){const{duration:Je,startTime:tt,values:st}=Ye;Ke.setValueCurveAtTime(st,tt,Je)}else throw new Error("Can't apply an unknown automation.")}});class ReadOnlyMap{constructor(Ke){this._map=new Map(Ke)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(Ke,Ye=null){return this._map.forEach((Je,tt)=>Ke.call(Ye,Je,tt,this))}get(Ke){return this._map.get(Ke)}has(Ke){return this._map.has(Ke)}keys(){return this._map.keys()}values(){return this._map.values()}}const DEFAULT_OPTIONS$g={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},createAudioWorkletNodeConstructor=(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht,pt)=>class extends Ke{constructor(xt,vt,At){var Et;const wt=it(xt),_t=ot(wt),Ct=lt({...DEFAULT_OPTIONS$g,...At});ht(Ct);const Tt=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(wt),St=Tt==null?void 0:Tt.get(vt),Rt=_t||wt.state!=="closed"?wt:(Et=rt(wt))!==null&&Et!==void 0?Et:wt,Nt=tt(Rt,_t?null:xt.baseLatency,at,vt,St,Ct),Pt=_t?Je(vt,Ct,St):null;super(xt,!0,Nt,Pt);const Bt=[];Nt.parameters.forEach((zt,Dt)=>{const Vt=Ye(this,_t,zt);Bt.push([Dt,Vt])}),this._nativeAudioWorkletNode=Nt,this._onprocessorerror=null,this._parameters=new ReadOnlyMap(Bt),_t&&Xe(wt,this);const{activeInputs:Lt}=st(this);ut(Nt,Lt)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(xt){const vt=typeof xt=="function"?pt(this,xt):null;this._nativeAudioWorkletNode.onprocessorerror=vt;const At=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=At!==null&&At===vt?xt:At}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function copyFromChannel(Xe,Ke,Ye,Je,tt){if(typeof Xe.copyFromChannel=="function")Ke[Ye].byteLength===0&&(Ke[Ye]=new Float32Array(128)),Xe.copyFromChannel(Ke[Ye],Je,tt);else{const st=Xe.getChannelData(Je);if(Ke[Ye].byteLength===0)Ke[Ye]=st.slice(tt,tt+128);else{const rt=new Float32Array(st.buffer,tt*Float32Array.BYTES_PER_ELEMENT,128);Ke[Ye].set(rt)}}}const copyToChannel=(Xe,Ke,Ye,Je,tt)=>{typeof Xe.copyToChannel=="function"?Ke[Ye].byteLength!==0&&Xe.copyToChannel(Ke[Ye],Je,tt):Ke[Ye].byteLength!==0&&Xe.getChannelData(Je).set(Ke[Ye],tt)},createNestedArrays=(Xe,Ke)=>{const Ye=[];for(let Je=0;Je<Xe;Je+=1){const tt=[],st=typeof Ke=="number"?Ke:Ke[Je];for(let rt=0;rt<st;rt+=1)tt.push(new Float32Array(128));Ye.push(tt)}return Ye},getAudioWorkletProcessor=(Xe,Ke)=>{const Ye=getValueForKey(NODE_TO_PROCESSOR_MAPS,Xe),Je=getNativeAudioNode(Ke);return getValueForKey(Ye,Je)},processBuffer=async(Xe,Ke,Ye,Je,tt,st,rt)=>{const it=Ke===null?Math.ceil(Xe.context.length/128)*128:Ke.length,ot=Je.channelCount*Je.numberOfInputs,at=tt.reduce((vt,At)=>vt+At,0),lt=at===0?null:Ye.createBuffer(at,it,Ye.sampleRate);if(st===void 0)throw new Error("Missing the processor constructor.");const ut=getAudioNodeConnections(Xe),ht=await getAudioWorkletProcessor(Ye,Xe),pt=createNestedArrays(Je.numberOfInputs,Je.channelCount),ft=createNestedArrays(Je.numberOfOutputs,tt),xt=Array.from(Xe.parameters.keys()).reduce((vt,At)=>({...vt,[At]:new Float32Array(128)}),{});for(let vt=0;vt<it;vt+=128){if(Je.numberOfInputs>0&&Ke!==null)for(let At=0;At<Je.numberOfInputs;At+=1)for(let Et=0;Et<Je.channelCount;Et+=1)copyFromChannel(Ke,pt[At],Et,Et,vt);st.parameterDescriptors!==void 0&&Ke!==null&&st.parameterDescriptors.forEach(({name:At},Et)=>{copyFromChannel(Ke,xt,At,ot+Et,vt)});for(let At=0;At<Je.numberOfInputs;At+=1)for(let Et=0;Et<tt[At];Et+=1)ft[At][Et].byteLength===0&&(ft[At][Et]=new Float32Array(128));try{const At=pt.map((wt,_t)=>ut.activeInputs[_t].size===0?[]:wt),Et=rt(vt/Ye.sampleRate,Ye.sampleRate,()=>ht.process(At,ft,xt));if(lt!==null)for(let wt=0,_t=0;wt<Je.numberOfOutputs;wt+=1){for(let Ct=0;Ct<tt[wt];Ct+=1)copyToChannel(lt,ft[wt],Ct,_t+Ct,vt);_t+=tt[wt]}if(!Et)break}catch(At){Xe.dispatchEvent(new ErrorEvent("processorerror",{colno:At.colno,filename:At.filename,lineno:At.lineno,message:At.message}));break}}return lt},createAudioWorkletNodeRendererFactory=(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht,pt,ft,xt)=>(vt,At,Et)=>{const wt=new WeakMap;let _t=null;const Ct=async(Tt,St)=>{let Rt=lt(Tt),Nt=null;const Pt=isOwnedByContext(Rt,St),Bt=Array.isArray(At.outputChannelCount)?At.outputChannelCount:Array.from(At.outputChannelCount);if(ut===null){const Lt=Bt.reduce((Gt,Qt)=>Gt+Qt,0),zt=tt(St,{channelCount:Math.max(1,Lt),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,Lt)}),Dt=[];for(let Gt=0;Gt<Tt.numberOfOutputs;Gt+=1)Dt.push(Je(St,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Bt[Gt]}));const Vt=rt(St,{channelCount:At.channelCount,channelCountMode:At.channelCountMode,channelInterpretation:At.channelInterpretation,gain:1});Vt.connect=Ke.bind(null,Dt),Vt.disconnect=ot.bind(null,Dt),Nt=[zt,Dt,Vt]}else Pt||(Rt=new ut(St,vt));if(wt.set(St,Nt===null?Rt:Nt[2]),Nt!==null){if(_t===null){if(Et===void 0)throw new Error("Missing the processor constructor.");if(ht===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Qt=Tt.channelCount*Tt.numberOfInputs,jt=Et.parameterDescriptors===void 0?0:Et.parameterDescriptors.length,Ht=Qt+jt;_t=processBuffer(Tt,Ht===0?null:await(async()=>{const Jt=new ht(Ht,Math.ceil(Tt.context.length/128)*128,St.sampleRate),Zt=[],nn=[];for(let mn=0;mn<At.numberOfInputs;mn+=1)Zt.push(rt(Jt,{channelCount:At.channelCount,channelCountMode:At.channelCountMode,channelInterpretation:At.channelInterpretation,gain:1})),nn.push(tt(Jt,{channelCount:At.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:At.channelCount}));const cn=await Promise.all(Array.from(Tt.parameters.values()).map(async mn=>{const dn=st(Jt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:mn.value});return await pt(Jt,mn,dn.offset),dn})),an=Je(Jt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Qt+jt)});for(let mn=0;mn<At.numberOfInputs;mn+=1){Zt[mn].connect(nn[mn]);for(let dn=0;dn<At.channelCount;dn+=1)nn[mn].connect(an,dn,mn*At.channelCount+dn)}for(const[mn,dn]of cn.entries())dn.connect(an,0,Qt+mn),dn.start(0);return an.connect(Jt.destination),await Promise.all(Zt.map(mn=>ft(Tt,Jt,mn))),xt(Jt)})(),St,At,Bt,Et,at)}const Lt=await _t,zt=Ye(St,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[Dt,Vt,Gt]=Nt;Lt!==null&&(zt.buffer=Lt,zt.start(0)),zt.connect(Dt);for(let Qt=0,jt=0;Qt<Tt.numberOfOutputs;Qt+=1){const Ht=Vt[Qt];for(let Yt=0;Yt<Bt[Qt];Yt+=1)Dt.connect(Ht,jt+Yt,Yt);jt+=Bt[Qt]}return Gt}if(Pt)for(const[Lt,zt]of Tt.parameters.entries())await Xe(St,zt,Rt.parameters.get(Lt));else for(const[Lt,zt]of Tt.parameters.entries())await pt(St,zt,Rt.parameters.get(Lt));return await ft(Tt,St,Rt),Rt};return{render(Tt,St){it(St,Tt);const Rt=wt.get(St);return Rt!==void 0?Promise.resolve(Rt):Ct(Tt,St)}}},createBaseAudioContextConstructor=(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht,pt,ft,xt,vt,At,Et,wt)=>class extends ft{constructor(Ct,Tt){super(Ct,Tt),this._nativeContext=Ct,this._audioWorklet=Xe===void 0?void 0:{addModule:(St,Rt)=>Xe(this,St,Rt)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new Ke(this)}createBiquadFilter(){return new tt(this)}createBuffer(Ct,Tt,St){return new Ye({length:Tt,numberOfChannels:Ct,sampleRate:St})}createBufferSource(){return new Je(this)}createChannelMerger(Ct=6){return new st(this,{numberOfInputs:Ct})}createChannelSplitter(Ct=6){return new rt(this,{numberOfOutputs:Ct})}createConstantSource(){return new it(this)}createConvolver(){return new ot(this)}createDelay(Ct=1){return new lt(this,{maxDelayTime:Ct})}createDynamicsCompressor(){return new ut(this)}createGain(){return new ht(this)}createIIRFilter(Ct,Tt){return new pt(this,{feedback:Tt,feedforward:Ct})}createOscillator(){return new xt(this)}createPanner(){return new vt(this)}createPeriodicWave(Ct,Tt,St={disableNormalization:!1}){return new At(this,{...St,imag:Tt,real:Ct})}createStereoPanner(){return new Et(this)}createWaveShaper(){return new wt(this)}decodeAudioData(Ct,Tt,St){return at(this._nativeContext,Ct).then(Rt=>(typeof Tt=="function"&&Tt(Rt),Rt),Rt=>{throw typeof St=="function"&&St(Rt),Rt})}},DEFAULT_OPTIONS$f={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},createBiquadFilterNodeConstructor=(Xe,Ke,Ye,Je,tt,st,rt,it)=>class extends Xe{constructor(at,lt){const ut=st(at),ht={...DEFAULT_OPTIONS$f,...lt},pt=tt(ut,ht),ft=rt(ut),xt=ft?Ye():null;super(at,!1,pt,xt),this._Q=Ke(this,ft,pt.Q,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._detune=Ke(this,ft,pt.detune,1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT),-1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT)),this._frequency=Ke(this,ft,pt.frequency,at.sampleRate/2,0),this._gain=Ke(this,ft,pt.gain,40*Math.log10(MOST_POSITIVE_SINGLE_FLOAT),MOST_NEGATIVE_SINGLE_FLOAT),this._nativeBiquadFilterNode=pt,it(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(at){this._nativeBiquadFilterNode.type=at}getFrequencyResponse(at,lt,ut){try{this._nativeBiquadFilterNode.getFrequencyResponse(at,lt,ut)}catch(ht){throw ht.code===11?Je():ht}if(at.length!==lt.length||lt.length!==ut.length)throw Je()}},createBiquadFilterNodeRendererFactory=(Xe,Ke,Ye,Je,tt)=>()=>{const st=new WeakMap,rt=async(it,ot)=>{let at=Ye(it);const lt=isOwnedByContext(at,ot);if(!lt){const ut={Q:at.Q.value,channelCount:at.channelCount,channelCountMode:at.channelCountMode,channelInterpretation:at.channelInterpretation,detune:at.detune.value,frequency:at.frequency.value,gain:at.gain.value,type:at.type};at=Ke(ot,ut)}return st.set(ot,at),lt?(await Xe(ot,it.Q,at.Q),await Xe(ot,it.detune,at.detune),await Xe(ot,it.frequency,at.frequency),await Xe(ot,it.gain,at.gain)):(await Je(ot,it.Q,at.Q),await Je(ot,it.detune,at.detune),await Je(ot,it.frequency,at.frequency),await Je(ot,it.gain,at.gain)),await tt(it,ot,at),at};return{render(it,ot){const at=st.get(ot);return at!==void 0?Promise.resolve(at):rt(it,ot)}}},createCacheTestResult=(Xe,Ke)=>(Ye,Je)=>{const tt=Ke.get(Ye);if(tt!==void 0)return tt;const st=Xe.get(Ye);if(st!==void 0)return st;try{const rt=Je();return rt instanceof Promise?(Xe.set(Ye,rt),rt.catch(()=>!1).then(it=>(Xe.delete(Ye),Ke.set(Ye,it),it))):(Ke.set(Ye,rt),rt)}catch{return Ke.set(Ye,!1),!1}},DEFAULT_OPTIONS$e={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},createChannelMergerNodeConstructor=(Xe,Ke,Ye,Je,tt)=>class extends Xe{constructor(rt,it){const ot=Je(rt),at={...DEFAULT_OPTIONS$e,...it},lt=Ye(ot,at),ut=tt(ot)?Ke():null;super(rt,!1,lt,ut)}},createChannelMergerNodeRendererFactory=(Xe,Ke,Ye)=>()=>{const Je=new WeakMap,tt=async(st,rt)=>{let it=Ke(st);if(!isOwnedByContext(it,rt)){const at={channelCount:it.channelCount,channelCountMode:it.channelCountMode,channelInterpretation:it.channelInterpretation,numberOfInputs:it.numberOfInputs};it=Xe(rt,at)}return Je.set(rt,it),await Ye(st,rt,it),it};return{render(st,rt){const it=Je.get(rt);return it!==void 0?Promise.resolve(it):tt(st,rt)}}},DEFAULT_OPTIONS$d={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},createChannelSplitterNodeConstructor=(Xe,Ke,Ye,Je,tt,st)=>class extends Xe{constructor(it,ot){const at=Je(it),lt=st({...DEFAULT_OPTIONS$d,...ot}),ut=Ye(at,lt),ht=tt(at)?Ke():null;super(it,!1,ut,ht)}},createChannelSplitterNodeRendererFactory=(Xe,Ke,Ye)=>()=>{const Je=new WeakMap,tt=async(st,rt)=>{let it=Ke(st);if(!isOwnedByContext(it,rt)){const at={channelCount:it.channelCount,channelCountMode:it.channelCountMode,channelInterpretation:it.channelInterpretation,numberOfOutputs:it.numberOfOutputs};it=Xe(rt,at)}return Je.set(rt,it),await Ye(st,rt,it),it};return{render(st,rt){const it=Je.get(rt);return it!==void 0?Promise.resolve(it):tt(st,rt)}}},createConnectAudioParam=Xe=>(Ke,Ye,Je)=>Xe(Ye,Ke,Je),createConnectMultipleOutputs=Xe=>(Ke,Ye,Je=0,tt=0)=>{const st=Ke[Je];if(st===void 0)throw Xe();return isNativeAudioNode$1(Ye)?st.connect(Ye,0,tt):st.connect(Ye,0)},createConnectedNativeAudioBufferSourceNodeFactory=Xe=>(Ke,Ye)=>{const Je=Xe(Ke,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),tt=Ke.createBuffer(1,2,44100);return Je.buffer=tt,Je.loop=!0,Je.connect(Ye),Je.start(),()=>{Je.stop(),Je.disconnect(Ye)}},DEFAULT_OPTIONS$c={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},createConstantSourceNodeConstructor=(Xe,Ke,Ye,Je,tt,st,rt)=>class extends Xe{constructor(ot,at){const lt=tt(ot),ut={...DEFAULT_OPTIONS$c,...at},ht=Je(lt,ut),pt=st(lt),ft=pt?Ye():null;super(ot,!1,ht,ft),this._constantSourceNodeRenderer=ft,this._nativeConstantSourceNode=ht,this._offset=Ke(this,pt,ht.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(ot){const at=typeof ot=="function"?rt(this,ot):null;this._nativeConstantSourceNode.onended=at;const lt=this._nativeConstantSourceNode.onended;this._onended=lt!==null&&lt===at?ot:lt}start(ot=0){if(this._nativeConstantSourceNode.start(ot),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=ot),this.context.state!=="closed"){setInternalStateToActive(this);const at=()=>{this._nativeConstantSourceNode.removeEventListener("ended",at),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeConstantSourceNode.addEventListener("ended",at)}}stop(ot=0){this._nativeConstantSourceNode.stop(ot),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=ot)}},createConstantSourceNodeRendererFactory=(Xe,Ke,Ye,Je,tt)=>()=>{const st=new WeakMap;let rt=null,it=null;const ot=async(at,lt)=>{let ut=Ye(at);const ht=isOwnedByContext(ut,lt);if(!ht){const pt={channelCount:ut.channelCount,channelCountMode:ut.channelCountMode,channelInterpretation:ut.channelInterpretation,offset:ut.offset.value};ut=Ke(lt,pt),rt!==null&&ut.start(rt),it!==null&&ut.stop(it)}return st.set(lt,ut),ht?await Xe(lt,at.offset,ut.offset):await Je(lt,at.offset,ut.offset),await tt(at,lt,ut),ut};return{set start(at){rt=at},set stop(at){it=at},render(at,lt){const ut=st.get(lt);return ut!==void 0?Promise.resolve(ut):ot(at,lt)}}},createConvertNumberToUnsignedLong=Xe=>Ke=>(Xe[0]=Ke,Xe[0]),DEFAULT_OPTIONS$b={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},createConvolverNodeConstructor=(Xe,Ke,Ye,Je,tt,st)=>class extends Xe{constructor(it,ot){const at=Je(it),lt={...DEFAULT_OPTIONS$b,...ot},ut=Ye(at,lt),pt=tt(at)?Ke():null;super(it,!1,ut,pt),this._isBufferNullified=!1,this._nativeConvolverNode=ut,lt.buffer!==null&&st(this,lt.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(it){if(this._nativeConvolverNode.buffer=it,it===null&&this._nativeConvolverNode.buffer!==null){const ot=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=ot.createBuffer(1,1,ot.sampleRate),this._isBufferNullified=!0,st(this,0)}else this._isBufferNullified=!1,st(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(it){this._nativeConvolverNode.normalize=it}},createConvolverNodeRendererFactory=(Xe,Ke,Ye)=>()=>{const Je=new WeakMap,tt=async(st,rt)=>{let it=Ke(st);if(!isOwnedByContext(it,rt)){const at={buffer:it.buffer,channelCount:it.channelCount,channelCountMode:it.channelCountMode,channelInterpretation:it.channelInterpretation,disableNormalization:!it.normalize};it=Xe(rt,at)}return Je.set(rt,it),isNativeAudioNodeFaker(it)?await Ye(st,rt,it.inputs[0]):await Ye(st,rt,it),it};return{render(st,rt){const it=Je.get(rt);return it!==void 0?Promise.resolve(it):tt(st,rt)}}},createCreateNativeOfflineAudioContext=(Xe,Ke)=>(Ye,Je,tt)=>{if(Ke===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new Ke(Ye,Je,tt)}catch(st){throw st.name==="SyntaxError"?Xe():st}},createDataCloneError=()=>new DOMException("","DataCloneError"),detachArrayBuffer=Xe=>{const{port1:Ke,port2:Ye}=new MessageChannel;return new Promise(Je=>{const tt=()=>{Ye.onmessage=null,Ke.close(),Ye.close(),Je()};Ye.onmessage=()=>tt();try{Ke.postMessage(Xe,[Xe])}catch{}finally{tt()}})},createDecodeAudioData=(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt)=>(ut,ht)=>{const pt=rt(ut)?ut:st(ut);if(tt.has(ht)){const ft=Ye();return Promise.reject(ft)}try{tt.add(ht)}catch{}return Ke(ot,()=>ot(pt))?pt.decodeAudioData(ht).then(ft=>(detachArrayBuffer(ht).catch(()=>{}),Ke(it,()=>it(ft))||lt(ft),Xe.add(ft),ft)):new Promise((ft,xt)=>{const vt=async()=>{try{await detachArrayBuffer(ht)}catch{}},At=Et=>{xt(Et),vt()};try{pt.decodeAudioData(ht,Et=>{typeof Et.copyFromChannel!="function"&&(at(Et),wrapAudioBufferGetChannelDataMethod(Et)),Xe.add(Et),vt().then(()=>ft(Et))},Et=>{At(Et===null?Je():Et)})}catch(Et){At(Et)}})},createDecrementCycleCounter=(Xe,Ke,Ye,Je,tt,st,rt,it)=>(ot,at)=>{const lt=Ke.get(ot);if(lt===void 0)throw new Error("Missing the expected cycle count.");const ut=st(ot.context),ht=it(ut);if(lt===at){if(Ke.delete(ot),!ht&&rt(ot)){const pt=Je(ot),{outputs:ft}=Ye(ot);for(const xt of ft)if(isAudioNodeOutputConnection(xt)){const vt=Je(xt[0]);Xe(pt,vt,xt[1],xt[2])}else{const vt=tt(xt[0]);pt.connect(vt,xt[1])}}}else Ke.set(ot,lt-at)},DEFAULT_OPTIONS$a={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},createDelayNodeConstructor=(Xe,Ke,Ye,Je,tt,st,rt)=>class extends Xe{constructor(ot,at){const lt=tt(ot),ut={...DEFAULT_OPTIONS$a,...at},ht=Je(lt,ut),pt=st(lt),ft=pt?Ye(ut.maxDelayTime):null;super(ot,!1,ht,ft),this._delayTime=Ke(this,pt,ht.delayTime),rt(this,ut.maxDelayTime)}get delayTime(){return this._delayTime}},createDelayNodeRendererFactory=(Xe,Ke,Ye,Je,tt)=>st=>{const rt=new WeakMap,it=async(ot,at)=>{let lt=Ye(ot);const ut=isOwnedByContext(lt,at);if(!ut){const ht={channelCount:lt.channelCount,channelCountMode:lt.channelCountMode,channelInterpretation:lt.channelInterpretation,delayTime:lt.delayTime.value,maxDelayTime:st};lt=Ke(at,ht)}return rt.set(at,lt),ut?await Xe(at,ot.delayTime,lt.delayTime):await Je(at,ot.delayTime,lt.delayTime),await tt(ot,at,lt),lt};return{render(ot,at){const lt=rt.get(at);return lt!==void 0?Promise.resolve(lt):it(ot,at)}}},createDeleteActiveInputConnectionToAudioNode=Xe=>(Ke,Ye,Je,tt)=>Xe(Ke[tt],st=>st[0]===Ye&&st[1]===Je),createDeleteUnrenderedAudioWorkletNode=Xe=>(Ke,Ye)=>{Xe(Ke).delete(Ye)},isDelayNode=Xe=>"delayTime"in Xe,createDetectCycles=(Xe,Ke,Ye)=>function Je(tt,st){const rt=isAudioNode$1(st)?st:Ye(Xe,st);if(isDelayNode(rt))return[];if(tt[0]===rt)return[tt];if(tt.includes(rt))return[];const{outputs:it}=Ke(rt);return Array.from(it).map(ot=>Je([...tt,rt],ot[0])).reduce((ot,at)=>ot.concat(at),[])},getOutputAudioNodeAtIndex=(Xe,Ke,Ye)=>{const Je=Ke[Ye];if(Je===void 0)throw Xe();return Je},createDisconnectMultipleOutputs=Xe=>(Ke,Ye=void 0,Je=void 0,tt=0)=>Ye===void 0?Ke.forEach(st=>st.disconnect()):typeof Ye=="number"?getOutputAudioNodeAtIndex(Xe,Ke,Ye).disconnect():isNativeAudioNode$1(Ye)?Je===void 0?Ke.forEach(st=>st.disconnect(Ye)):tt===void 0?getOutputAudioNodeAtIndex(Xe,Ke,Je).disconnect(Ye,0):getOutputAudioNodeAtIndex(Xe,Ke,Je).disconnect(Ye,0,tt):Je===void 0?Ke.forEach(st=>st.disconnect(Ye)):getOutputAudioNodeAtIndex(Xe,Ke,Je).disconnect(Ye,0),DEFAULT_OPTIONS$9={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},createDynamicsCompressorNodeConstructor=(Xe,Ke,Ye,Je,tt,st,rt,it)=>class extends Xe{constructor(at,lt){const ut=st(at),ht={...DEFAULT_OPTIONS$9,...lt},pt=Je(ut,ht),ft=rt(ut),xt=ft?Ye():null;super(at,!1,pt,xt),this._attack=Ke(this,ft,pt.attack),this._knee=Ke(this,ft,pt.knee),this._nativeDynamicsCompressorNode=pt,this._ratio=Ke(this,ft,pt.ratio),this._release=Ke(this,ft,pt.release),this._threshold=Ke(this,ft,pt.threshold),it(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(at){const lt=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=at,at>2)throw this._nativeDynamicsCompressorNode.channelCount=lt,tt()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(at){const lt=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=at,at==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=lt,tt()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},createDynamicsCompressorNodeRendererFactory=(Xe,Ke,Ye,Je,tt)=>()=>{const st=new WeakMap,rt=async(it,ot)=>{let at=Ye(it);const lt=isOwnedByContext(at,ot);if(!lt){const ut={attack:at.attack.value,channelCount:at.channelCount,channelCountMode:at.channelCountMode,channelInterpretation:at.channelInterpretation,knee:at.knee.value,ratio:at.ratio.value,release:at.release.value,threshold:at.threshold.value};at=Ke(ot,ut)}return st.set(ot,at),lt?(await Xe(ot,it.attack,at.attack),await Xe(ot,it.knee,at.knee),await Xe(ot,it.ratio,at.ratio),await Xe(ot,it.release,at.release),await Xe(ot,it.threshold,at.threshold)):(await Je(ot,it.attack,at.attack),await Je(ot,it.knee,at.knee),await Je(ot,it.ratio,at.ratio),await Je(ot,it.release,at.release),await Je(ot,it.threshold,at.threshold)),await tt(it,ot,at),at};return{render(it,ot){const at=st.get(ot);return at!==void 0?Promise.resolve(at):rt(it,ot)}}},createEncodingError=()=>new DOMException("","EncodingError"),createEvaluateSource=Xe=>Ke=>new Promise((Ye,Je)=>{if(Xe===null){Je(new SyntaxError);return}const tt=Xe.document.head;if(tt===null)Je(new SyntaxError);else{const st=Xe.document.createElement("script"),rt=new Blob([Ke],{type:"application/javascript"}),it=URL.createObjectURL(rt),ot=Xe.onerror,at=()=>{Xe.onerror=ot,URL.revokeObjectURL(it)};Xe.onerror=(lt,ut,ht,pt,ft)=>{if(ut===it||ut===Xe.location.href&&ht===1&&pt===1)return at(),Je(ft),!1;if(ot!==null)return ot(lt,ut,ht,pt,ft)},st.onerror=()=>{at(),Je(new SyntaxError)},st.onload=()=>{at(),Ye()},st.src=it,st.type="module",tt.appendChild(st)}}),createEventTargetConstructor=Xe=>class{constructor(Ye){this._nativeEventTarget=Ye,this._listeners=new WeakMap}addEventListener(Ye,Je,tt){if(Je!==null){let st=this._listeners.get(Je);st===void 0&&(st=Xe(this,Je),typeof Je=="function"&&this._listeners.set(Je,st)),this._nativeEventTarget.addEventListener(Ye,st,tt)}}dispatchEvent(Ye){return this._nativeEventTarget.dispatchEvent(Ye)}removeEventListener(Ye,Je,tt){const st=Je===null?void 0:this._listeners.get(Je);this._nativeEventTarget.removeEventListener(Ye,st===void 0?null:st,tt)}},createExposeCurrentFrameAndCurrentTime=Xe=>(Ke,Ye,Je)=>{Object.defineProperties(Xe,{currentFrame:{configurable:!0,get(){return Math.round(Ke*Ye)}},currentTime:{configurable:!0,get(){return Ke}}});try{return Je()}finally{Xe!==null&&(delete Xe.currentFrame,delete Xe.currentTime)}},createFetchSource=Xe=>async Ke=>{try{const Ye=await fetch(Ke);if(Ye.ok)return[await Ye.text(),Ye.url]}catch{}throw Xe()},DEFAULT_OPTIONS$8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},createGainNodeConstructor=(Xe,Ke,Ye,Je,tt,st)=>class extends Xe{constructor(it,ot){const at=tt(it),lt={...DEFAULT_OPTIONS$8,...ot},ut=Je(at,lt),ht=st(at),pt=ht?Ye():null;super(it,!1,ut,pt),this._gain=Ke(this,ht,ut.gain,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get gain(){return this._gain}},createGainNodeRendererFactory=(Xe,Ke,Ye,Je,tt)=>()=>{const st=new WeakMap,rt=async(it,ot)=>{let at=Ye(it);const lt=isOwnedByContext(at,ot);if(!lt){const ut={channelCount:at.channelCount,channelCountMode:at.channelCountMode,channelInterpretation:at.channelInterpretation,gain:at.gain.value};at=Ke(ot,ut)}return st.set(ot,at),lt?await Xe(ot,it.gain,at.gain):await Je(ot,it.gain,at.gain),await tt(it,ot,at),at};return{render(it,ot){const at=st.get(ot);return at!==void 0?Promise.resolve(at):rt(it,ot)}}},createGetActiveAudioWorkletNodeInputs=(Xe,Ke)=>Ye=>Ke(Xe,Ye),createGetAudioNodeRenderer=Xe=>Ke=>{const Ye=Xe(Ke);if(Ye.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return Ye.renderer},createGetAudioNodeTailTime=Xe=>Ke=>{var Ye;return(Ye=Xe.get(Ke))!==null&&Ye!==void 0?Ye:0},createGetAudioParamRenderer=Xe=>Ke=>{const Ye=Xe(Ke);if(Ye.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return Ye.renderer},createGetBackupOfflineAudioContext=Xe=>Ke=>Xe.get(Ke),createInvalidStateError=()=>new DOMException("","InvalidStateError"),createGetNativeContext=Xe=>Ke=>{const Ye=Xe.get(Ke);if(Ye===void 0)throw createInvalidStateError();return Ye},createGetOrCreateBackupOfflineAudioContext=(Xe,Ke)=>Ye=>{let Je=Xe.get(Ye);if(Je!==void 0)return Je;if(Ke===null)throw new Error("Missing the native OfflineAudioContext constructor.");return Je=new Ke(1,1,44100),Xe.set(Ye,Je),Je},createGetUnrenderedAudioWorkletNodes=Xe=>Ke=>{const Ye=Xe.get(Ke);if(Ye===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return Ye},createInvalidAccessError=()=>new DOMException("","InvalidAccessError"),wrapIIRFilterNodeGetFrequencyResponseMethod=Xe=>{Xe.getFrequencyResponse=(Ke=>(Ye,Je,tt)=>{if(Ye.length!==Je.length||Je.length!==tt.length)throw createInvalidAccessError();return Ke.call(Xe,Ye,Je,tt)})(Xe.getFrequencyResponse)},DEFAULT_OPTIONS$7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},createIIRFilterNodeConstructor=(Xe,Ke,Ye,Je,tt,st)=>class extends Xe{constructor(it,ot){const at=Je(it),lt=tt(at),ut={...DEFAULT_OPTIONS$7,...ot},ht=Ke(at,lt?null:it.baseLatency,ut),pt=lt?Ye(ut.feedback,ut.feedforward):null;super(it,!1,ht,pt),wrapIIRFilterNodeGetFrequencyResponseMethod(ht),this._nativeIIRFilterNode=ht,st(this,1)}getFrequencyResponse(it,ot,at){return this._nativeIIRFilterNode.getFrequencyResponse(it,ot,at)}},filterBuffer=(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt)=>{const ut=at.length;let ht=it;for(let pt=0;pt<ut;pt+=1){let ft=Ye[0]*at[pt];for(let xt=1;xt<tt;xt+=1){const vt=ht-xt&ot-1;ft+=Ye[xt]*st[vt],ft-=Xe[xt]*rt[vt]}for(let xt=tt;xt<Je;xt+=1)ft+=Ye[xt]*st[ht-xt&ot-1];for(let xt=tt;xt<Ke;xt+=1)ft-=Xe[xt]*rt[ht-xt&ot-1];st[ht]=at[pt],rt[ht]=ft,ht=ht+1&ot-1,lt[pt]=ft}return ht},filterFullBuffer=(Xe,Ke,Ye,Je)=>{const tt=Ye instanceof Float64Array?Ye:new Float64Array(Ye),st=Je instanceof Float64Array?Je:new Float64Array(Je),rt=tt.length,it=st.length,ot=Math.min(rt,it);if(tt[0]!==1){for(let ft=0;ft<rt;ft+=1)st[ft]/=tt[0];for(let ft=1;ft<it;ft+=1)tt[ft]/=tt[0]}const at=32,lt=new Float32Array(at),ut=new Float32Array(at),ht=Ke.createBuffer(Xe.numberOfChannels,Xe.length,Xe.sampleRate),pt=Xe.numberOfChannels;for(let ft=0;ft<pt;ft+=1){const xt=Xe.getChannelData(ft),vt=ht.getChannelData(ft);lt.fill(0),ut.fill(0),filterBuffer(tt,rt,st,it,ot,lt,ut,0,at,xt,vt)}return ht},createIIRFilterNodeRendererFactory=(Xe,Ke,Ye,Je,tt)=>(st,rt)=>{const it=new WeakMap;let ot=null;const at=async(lt,ut)=>{let ht=null,pt=Ke(lt);const ft=isOwnedByContext(pt,ut);if(ut.createIIRFilter===void 0?ht=Xe(ut,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):ft||(pt=ut.createIIRFilter(rt,st)),it.set(ut,ht===null?pt:ht),ht!==null){if(ot===null){if(Ye===null)throw new Error("Missing the native OfflineAudioContext constructor.");const vt=new Ye(lt.context.destination.channelCount,lt.context.length,ut.sampleRate);ot=(async()=>{await Je(lt,vt,vt.destination);const At=await tt(vt);return filterFullBuffer(At,ut,st,rt)})()}const xt=await ot;return ht.buffer=xt,ht.start(0),ht}return await Je(lt,ut,pt),pt};return{render(lt,ut){const ht=it.get(ut);return ht!==void 0?Promise.resolve(ht):at(lt,ut)}}},createIncrementCycleCounterFactory=(Xe,Ke,Ye,Je,tt,st)=>rt=>(it,ot)=>{const at=Xe.get(it);if(at===void 0){if(!rt&&st(it)){const lt=Je(it),{outputs:ut}=Ye(it);for(const ht of ut)if(isAudioNodeOutputConnection(ht)){const pt=Je(ht[0]);Ke(lt,pt,ht[1],ht[2])}else{const pt=tt(ht[0]);lt.disconnect(pt,ht[1])}}Xe.set(it,ot)}else Xe.set(it,at+ot)},createIsAnyAudioContext=(Xe,Ke)=>Ye=>{const Je=Xe.get(Ye);return Ke(Je)||Ke(Ye)},createIsAnyAudioNode=(Xe,Ke)=>Ye=>Xe.has(Ye)||Ke(Ye),createIsAnyAudioParam=(Xe,Ke)=>Ye=>Xe.has(Ye)||Ke(Ye),createIsAnyOfflineAudioContext=(Xe,Ke)=>Ye=>{const Je=Xe.get(Ye);return Ke(Je)||Ke(Ye)},createIsNativeAudioContext=Xe=>Ke=>Xe!==null&&Ke instanceof Xe,createIsNativeAudioNode=Xe=>Ke=>Xe!==null&&typeof Xe.AudioNode=="function"&&Ke instanceof Xe.AudioNode,createIsNativeAudioParam=Xe=>Ke=>Xe!==null&&typeof Xe.AudioParam=="function"&&Ke instanceof Xe.AudioParam,createIsNativeContext=(Xe,Ke)=>Ye=>Xe(Ye)||Ke(Ye),createIsNativeOfflineAudioContext=Xe=>Ke=>Xe!==null&&Ke instanceof Xe,createIsSecureContext=Xe=>Xe!==null&&Xe.isSecureContext,createIsSupportedPromise=async(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht,pt,ft,xt)=>Xe(Ke,Ke)&&Xe(Ye,Ye)&&Xe(tt,tt)&&Xe(st,st)&&Xe(it,it)&&Xe(ot,ot)&&Xe(at,at)&&Xe(lt,lt)&&Xe(ut,ut)&&Xe(ht,ht)&&Xe(pt,pt)?(await Promise.all([Xe(Je,Je),Xe(rt,rt),Xe(ft,ft),Xe(xt,xt)])).every(At=>At):!1,createMediaElementAudioSourceNodeConstructor=(Xe,Ke,Ye,Je)=>class extends Xe{constructor(st,rt){const it=Ye(st),ot=Ke(it,rt);if(Je(it))throw TypeError();super(st,!0,ot,null),this._nativeMediaElementAudioSourceNode=ot}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},DEFAULT_OPTIONS$6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},createMediaStreamAudioDestinationNodeConstructor=(Xe,Ke,Ye,Je)=>class extends Xe{constructor(st,rt){const it=Ye(st);if(Je(it))throw new TypeError;const ot={...DEFAULT_OPTIONS$6,...rt},at=Ke(it,ot);super(st,!1,at,null),this._nativeMediaStreamAudioDestinationNode=at}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},createMediaStreamAudioSourceNodeConstructor=(Xe,Ke,Ye,Je)=>class extends Xe{constructor(st,rt){const it=Ye(st),ot=Ke(it,rt);if(Je(it))throw new TypeError;super(st,!0,ot,null),this._nativeMediaStreamAudioSourceNode=ot}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},createMediaStreamTrackAudioSourceNodeConstructor=(Xe,Ke,Ye)=>class extends Xe{constructor(tt,st){const rt=Ye(tt),it=Ke(rt,st);super(tt,!0,it,null)}},createMinimalBaseAudioContextConstructor=(Xe,Ke,Ye,Je,tt,st)=>class extends Ye{constructor(it,ot){super(it),this._nativeContext=it,CONTEXT_STORE.set(this,it),Je(it)&&tt.set(it,new Set),this._destination=new Xe(this,ot),this._listener=Ke(this,it),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(it){const ot=typeof it=="function"?st(this,it):null;this._nativeContext.onstatechange=ot;const at=this._nativeContext.onstatechange;this._onstatechange=at!==null&&at===ot?it:at}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},testPromiseSupport=Xe=>{const Ke=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const Ye=Xe.decodeAudioData(Ke.buffer,()=>{});return Ye===void 0?!1:(Ye.catch(()=>{}),!0)}catch{}return!1},createMonitorConnections=(Xe,Ke)=>(Ye,Je,tt)=>{const st=new Set;return Ye.connect=(rt=>(it,ot=0,at=0)=>{const lt=st.size===0;if(Ke(it))return rt.call(Ye,it,ot,at),Xe(st,[it,ot,at],ut=>ut[0]===it&&ut[1]===ot&&ut[2]===at,!0),lt&&Je(),it;rt.call(Ye,it,ot),Xe(st,[it,ot],ut=>ut[0]===it&&ut[1]===ot,!0),lt&&Je()})(Ye.connect),Ye.disconnect=(rt=>(it,ot,at)=>{const lt=st.size>0;if(it===void 0)rt.apply(Ye),st.clear();else if(typeof it=="number"){rt.call(Ye,it);for(const ht of st)ht[1]===it&&st.delete(ht)}else{Ke(it)?rt.call(Ye,it,ot,at):rt.call(Ye,it,ot);for(const ht of st)ht[0]===it&&(ot===void 0||ht[1]===ot)&&(at===void 0||ht[2]===at)&&st.delete(ht)}const ut=st.size===0;lt&&ut&&tt()})(Ye.disconnect),Ye},assignNativeAudioNodeOption=(Xe,Ke,Ye)=>{const Je=Ke[Ye];Je!==void 0&&Je!==Xe[Ye]&&(Xe[Ye]=Je)},assignNativeAudioNodeOptions=(Xe,Ke)=>{assignNativeAudioNodeOption(Xe,Ke,"channelCount"),assignNativeAudioNodeOption(Xe,Ke,"channelCountMode"),assignNativeAudioNodeOption(Xe,Ke,"channelInterpretation")},testAnalyserNodeGetFloatTimeDomainDataMethodSupport=Xe=>typeof Xe.getFloatTimeDomainData=="function",wrapAnalyserNodeGetFloatTimeDomainDataMethod=Xe=>{Xe.getFloatTimeDomainData=Ke=>{const Ye=new Uint8Array(Ke.length);Xe.getByteTimeDomainData(Ye);const Je=Math.max(Ye.length,Xe.fftSize);for(let tt=0;tt<Je;tt+=1)Ke[tt]=(Ye[tt]-128)*.0078125;return Ke}},createNativeAnalyserNodeFactory=(Xe,Ke)=>(Ye,Je)=>{const tt=Ye.createAnalyser();if(assignNativeAudioNodeOptions(tt,Je),!(Je.maxDecibels>Je.minDecibels))throw Ke();return assignNativeAudioNodeOption(tt,Je,"fftSize"),assignNativeAudioNodeOption(tt,Je,"maxDecibels"),assignNativeAudioNodeOption(tt,Je,"minDecibels"),assignNativeAudioNodeOption(tt,Je,"smoothingTimeConstant"),Xe(testAnalyserNodeGetFloatTimeDomainDataMethodSupport,()=>testAnalyserNodeGetFloatTimeDomainDataMethodSupport(tt))||wrapAnalyserNodeGetFloatTimeDomainDataMethod(tt),tt},createNativeAudioBufferConstructor=Xe=>Xe===null?null:Xe.hasOwnProperty("AudioBuffer")?Xe.AudioBuffer:null,assignNativeAudioNodeAudioParamValue=(Xe,Ke,Ye)=>{const Je=Ke[Ye];Je!==void 0&&Je!==Xe[Ye].value&&(Xe[Ye].value=Je)},wrapAudioBufferSourceNodeStartMethodConsecutiveCalls=Xe=>{Xe.start=(Ke=>{let Ye=!1;return(Je=0,tt=0,st)=>{if(Ye)throw createInvalidStateError();Ke.call(Xe,Je,tt,st),Ye=!0}})(Xe.start)},wrapAudioScheduledSourceNodeStartMethodNegativeParameters=Xe=>{Xe.start=(Ke=>(Ye=0,Je=0,tt)=>{if(typeof tt=="number"&&tt<0||Je<0||Ye<0)throw new RangeError("The parameters can't be negative.");Ke.call(Xe,Ye,Je,tt)})(Xe.start)},wrapAudioScheduledSourceNodeStopMethodNegativeParameters=Xe=>{Xe.stop=(Ke=>(Ye=0)=>{if(Ye<0)throw new RangeError("The parameter can't be negative.");Ke.call(Xe,Ye)})(Xe.stop)},createNativeAudioBufferSourceNodeFactory=(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt)=>(ut,ht)=>{const pt=ut.createBufferSource();return assignNativeAudioNodeOptions(pt,ht),assignNativeAudioNodeAudioParamValue(pt,ht,"playbackRate"),assignNativeAudioNodeOption(pt,ht,"buffer"),assignNativeAudioNodeOption(pt,ht,"loop"),assignNativeAudioNodeOption(pt,ht,"loopEnd"),assignNativeAudioNodeOption(pt,ht,"loopStart"),Ke(Ye,()=>Ye(ut))||wrapAudioBufferSourceNodeStartMethodConsecutiveCalls(pt),Ke(Je,()=>Je(ut))||ot(pt),Ke(tt,()=>tt(ut))||at(pt,ut),Ke(st,()=>st(ut))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(pt),Ke(rt,()=>rt(ut))||lt(pt,ut),Ke(it,()=>it(ut))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(pt),Xe(ut,pt),pt},createNativeAudioContextConstructor=Xe=>Xe===null?null:Xe.hasOwnProperty("AudioContext")?Xe.AudioContext:Xe.hasOwnProperty("webkitAudioContext")?Xe.webkitAudioContext:null,createNativeAudioDestinationNodeFactory=(Xe,Ke)=>(Ye,Je,tt)=>{const st=Ye.destination;if(st.channelCount!==Je)try{st.channelCount=Je}catch{}tt&&st.channelCountMode!=="explicit"&&(st.channelCountMode="explicit"),st.maxChannelCount===0&&Object.defineProperty(st,"maxChannelCount",{value:Je});const rt=Xe(Ye,{channelCount:Je,channelCountMode:st.channelCountMode,channelInterpretation:st.channelInterpretation,gain:1});return Ke(rt,"channelCount",it=>()=>it.call(rt),it=>ot=>{it.call(rt,ot);try{st.channelCount=ot}catch(at){if(ot>st.maxChannelCount)throw at}}),Ke(rt,"channelCountMode",it=>()=>it.call(rt),it=>ot=>{it.call(rt,ot),st.channelCountMode=ot}),Ke(rt,"channelInterpretation",it=>()=>it.call(rt),it=>ot=>{it.call(rt,ot),st.channelInterpretation=ot}),Object.defineProperty(rt,"maxChannelCount",{get:()=>st.maxChannelCount}),rt.connect(st),rt},createNativeAudioWorkletNodeConstructor=Xe=>Xe===null?null:Xe.hasOwnProperty("AudioWorkletNode")?Xe.AudioWorkletNode:null,testClonabilityOfAudioWorkletNodeOptions=Xe=>{const{port1:Ke}=new MessageChannel;try{Ke.postMessage(Xe)}finally{Ke.close()}},createNativeAudioWorkletNodeFactory=(Xe,Ke,Ye,Je,tt)=>(st,rt,it,ot,at,lt)=>{if(it!==null)try{const ut=new it(st,ot,lt),ht=new Map;let pt=null;if(Object.defineProperties(ut,{channelCount:{get:()=>lt.channelCount,set:()=>{throw Xe()}},channelCountMode:{get:()=>"explicit",set:()=>{throw Xe()}},onprocessorerror:{get:()=>pt,set:ft=>{typeof pt=="function"&&ut.removeEventListener("processorerror",pt),pt=typeof ft=="function"?ft:null,typeof pt=="function"&&ut.addEventListener("processorerror",pt)}}}),ut.addEventListener=(ft=>(...xt)=>{if(xt[0]==="processorerror"){const vt=typeof xt[1]=="function"?xt[1]:typeof xt[1]=="object"&&xt[1]!==null&&typeof xt[1].handleEvent=="function"?xt[1].handleEvent:null;if(vt!==null){const At=ht.get(xt[1]);At!==void 0?xt[1]=At:(xt[1]=Et=>{Et.type==="error"?(Object.defineProperties(Et,{type:{value:"processorerror"}}),vt(Et)):vt(new ErrorEvent(xt[0],{...Et}))},ht.set(vt,xt[1]))}}return ft.call(ut,"error",xt[1],xt[2]),ft.call(ut,...xt)})(ut.addEventListener),ut.removeEventListener=(ft=>(...xt)=>{if(xt[0]==="processorerror"){const vt=ht.get(xt[1]);vt!==void 0&&(ht.delete(xt[1]),xt[1]=vt)}return ft.call(ut,"error",xt[1],xt[2]),ft.call(ut,xt[0],xt[1],xt[2])})(ut.removeEventListener),lt.numberOfOutputs!==0){const ft=Ye(st,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return ut.connect(ft).connect(st.destination),tt(ut,()=>ft.disconnect(),()=>ft.connect(st.destination))}return ut}catch(ut){throw ut.code===11?Je():ut}if(at===void 0)throw Je();return testClonabilityOfAudioWorkletNodeOptions(lt),Ke(st,rt,at,lt)},computeBufferSize=(Xe,Ke)=>Xe===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(Xe*Ke))))),cloneAudioWorkletNodeOptions=Xe=>new Promise((Ke,Ye)=>{const{port1:Je,port2:tt}=new MessageChannel;Je.onmessage=({data:st})=>{Je.close(),tt.close(),Ke(st)},Je.onmessageerror=({data:st})=>{Je.close(),tt.close(),Ye(st)},tt.postMessage(Xe)}),createAudioWorkletProcessorPromise=async(Xe,Ke)=>{const Ye=await cloneAudioWorkletNodeOptions(Ke);return new Xe(Ye)},createAudioWorkletProcessor=(Xe,Ke,Ye,Je)=>{let tt=NODE_TO_PROCESSOR_MAPS.get(Xe);tt===void 0&&(tt=new WeakMap,NODE_TO_PROCESSOR_MAPS.set(Xe,tt));const st=createAudioWorkletProcessorPromise(Ye,Je);return tt.set(Ke,st),st},createNativeAudioWorkletNodeFakerFactory=(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht)=>(pt,ft,xt,vt)=>{if(vt.numberOfInputs===0&&vt.numberOfOutputs===0)throw ot();const At=Array.isArray(vt.outputChannelCount)?vt.outputChannelCount:Array.from(vt.outputChannelCount);if(At.some(Wt=>Wt<1))throw ot();if(At.length!==vt.numberOfOutputs)throw Ke();if(vt.channelCountMode!=="explicit")throw ot();const Et=vt.channelCount*vt.numberOfInputs,wt=At.reduce((Wt,sn)=>Wt+sn,0),_t=xt.parameterDescriptors===void 0?0:xt.parameterDescriptors.length;if(Et+_t>6||wt>6)throw ot();const Ct=new MessageChannel,Tt=[],St=[];for(let Wt=0;Wt<vt.numberOfInputs;Wt+=1)Tt.push(rt(pt,{channelCount:vt.channelCount,channelCountMode:vt.channelCountMode,channelInterpretation:vt.channelInterpretation,gain:1})),St.push(tt(pt,{channelCount:vt.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:vt.channelCount}));const Rt=[];if(xt.parameterDescriptors!==void 0)for(const{defaultValue:Wt,maxValue:sn,minValue:hn,name:En}of xt.parameterDescriptors){const An=st(pt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:vt.parameterData[En]!==void 0?vt.parameterData[En]:Wt===void 0?0:Wt});Object.defineProperties(An.offset,{defaultValue:{get:()=>Wt===void 0?0:Wt},maxValue:{get:()=>sn===void 0?MOST_POSITIVE_SINGLE_FLOAT:sn},minValue:{get:()=>hn===void 0?MOST_NEGATIVE_SINGLE_FLOAT:hn}}),Rt.push(An)}const Nt=Je(pt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Et+_t)}),Pt=computeBufferSize(ft,pt.sampleRate),Bt=it(pt,Pt,Et+_t,Math.max(1,wt)),Lt=tt(pt,{channelCount:Math.max(1,wt),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,wt)}),zt=[];for(let Wt=0;Wt<vt.numberOfOutputs;Wt+=1)zt.push(Je(pt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:At[Wt]}));for(let Wt=0;Wt<vt.numberOfInputs;Wt+=1){Tt[Wt].connect(St[Wt]);for(let sn=0;sn<vt.channelCount;sn+=1)St[Wt].connect(Nt,sn,Wt*vt.channelCount+sn)}const Dt=new ReadOnlyMap(xt.parameterDescriptors===void 0?[]:xt.parameterDescriptors.map(({name:Wt},sn)=>{const hn=Rt[sn];return hn.connect(Nt,0,Et+sn),hn.start(0),[Wt,hn.offset]}));Nt.connect(Bt);let Vt=vt.channelInterpretation,Gt=null;const Qt=vt.numberOfOutputs===0?[Bt]:zt,jt={get bufferSize(){return Pt},get channelCount(){return vt.channelCount},set channelCount(Wt){throw Ye()},get channelCountMode(){return vt.channelCountMode},set channelCountMode(Wt){throw Ye()},get channelInterpretation(){return Vt},set channelInterpretation(Wt){for(const sn of Tt)sn.channelInterpretation=Wt;Vt=Wt},get context(){return Bt.context},get inputs(){return Tt},get numberOfInputs(){return vt.numberOfInputs},get numberOfOutputs(){return vt.numberOfOutputs},get onprocessorerror(){return Gt},set onprocessorerror(Wt){typeof Gt=="function"&&jt.removeEventListener("processorerror",Gt),Gt=typeof Wt=="function"?Wt:null,typeof Gt=="function"&&jt.addEventListener("processorerror",Gt)},get parameters(){return Dt},get port(){return Ct.port2},addEventListener(...Wt){return Bt.addEventListener(Wt[0],Wt[1],Wt[2])},connect:Xe.bind(null,Qt),disconnect:at.bind(null,Qt),dispatchEvent(...Wt){return Bt.dispatchEvent(Wt[0])},removeEventListener(...Wt){return Bt.removeEventListener(Wt[0],Wt[1],Wt[2])}},Ht=new Map;Ct.port1.addEventListener=(Wt=>(...sn)=>{if(sn[0]==="message"){const hn=typeof sn[1]=="function"?sn[1]:typeof sn[1]=="object"&&sn[1]!==null&&typeof sn[1].handleEvent=="function"?sn[1].handleEvent:null;if(hn!==null){const En=Ht.get(sn[1]);En!==void 0?sn[1]=En:(sn[1]=An=>{lt(pt.currentTime,pt.sampleRate,()=>hn(An))},Ht.set(hn,sn[1]))}}return Wt.call(Ct.port1,sn[0],sn[1],sn[2])})(Ct.port1.addEventListener),Ct.port1.removeEventListener=(Wt=>(...sn)=>{if(sn[0]==="message"){const hn=Ht.get(sn[1]);hn!==void 0&&(Ht.delete(sn[1]),sn[1]=hn)}return Wt.call(Ct.port1,sn[0],sn[1],sn[2])})(Ct.port1.removeEventListener);let Yt=null;Object.defineProperty(Ct.port1,"onmessage",{get:()=>Yt,set:Wt=>{typeof Yt=="function"&&Ct.port1.removeEventListener("message",Yt),Yt=typeof Wt=="function"?Wt:null,typeof Yt=="function"&&(Ct.port1.addEventListener("message",Yt),Ct.port1.start())}}),xt.prototype.port=Ct.port1;let Jt=null;createAudioWorkletProcessor(pt,jt,xt,vt).then(Wt=>Jt=Wt);const nn=createNestedArrays(vt.numberOfInputs,vt.channelCount),cn=createNestedArrays(vt.numberOfOutputs,At),an=xt.parameterDescriptors===void 0?[]:xt.parameterDescriptors.reduce((Wt,{name:sn})=>({...Wt,[sn]:new Float32Array(128)}),{});let mn=!0;const dn=()=>{vt.numberOfOutputs>0&&Bt.disconnect(Lt);for(let Wt=0,sn=0;Wt<vt.numberOfOutputs;Wt+=1){const hn=zt[Wt];for(let En=0;En<At[Wt];En+=1)Lt.disconnect(hn,sn+En,En);sn+=At[Wt]}},fn=new Map;Bt.onaudioprocess=({inputBuffer:Wt,outputBuffer:sn})=>{if(Jt!==null){const hn=ut(jt);for(let En=0;En<Pt;En+=128){for(let An=0;An<vt.numberOfInputs;An+=1)for(let wn=0;wn<vt.channelCount;wn+=1)copyFromChannel(Wt,nn[An],wn,wn,En);xt.parameterDescriptors!==void 0&&xt.parameterDescriptors.forEach(({name:An},wn)=>{copyFromChannel(Wt,an,An,Et+wn,En)});for(let An=0;An<vt.numberOfInputs;An+=1)for(let wn=0;wn<At[An];wn+=1)cn[An][wn].byteLength===0&&(cn[An][wn]=new Float32Array(128));try{const An=nn.map((Fn,Hn)=>{if(hn[Hn].size>0)return fn.set(Hn,Pt/128),Fn;const Un=fn.get(Hn);return Un===void 0?[]:(Fn.every(Kn=>Kn.every(hs=>hs===0))&&(Un===1?fn.delete(Hn):fn.set(Hn,Un-1)),Fn)});mn=lt(pt.currentTime+En/pt.sampleRate,pt.sampleRate,()=>Jt.process(An,cn,an));for(let Fn=0,Hn=0;Fn<vt.numberOfOutputs;Fn+=1){for(let Yn=0;Yn<At[Fn];Yn+=1)copyToChannel(sn,cn[Fn],Yn,Hn+Yn,En);Hn+=At[Fn]}}catch(An){mn=!1,jt.dispatchEvent(new ErrorEvent("processorerror",{colno:An.colno,filename:An.filename,lineno:An.lineno,message:An.message}))}if(!mn){for(let An=0;An<vt.numberOfInputs;An+=1){Tt[An].disconnect(St[An]);for(let wn=0;wn<vt.channelCount;wn+=1)St[En].disconnect(Nt,wn,An*vt.channelCount+wn)}if(xt.parameterDescriptors!==void 0){const An=xt.parameterDescriptors.length;for(let wn=0;wn<An;wn+=1){const Fn=Rt[wn];Fn.disconnect(Nt,0,Et+wn),Fn.stop()}}Nt.disconnect(Bt),Bt.onaudioprocess=null,Sn?dn():gn();break}}}};let Sn=!1;const Tn=rt(pt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Nn=()=>Bt.connect(Tn).connect(pt.destination),gn=()=>{Bt.disconnect(Tn),Tn.disconnect()},_n=()=>{if(mn){gn(),vt.numberOfOutputs>0&&Bt.connect(Lt);for(let Wt=0,sn=0;Wt<vt.numberOfOutputs;Wt+=1){const hn=zt[Wt];for(let En=0;En<At[Wt];En+=1)Lt.connect(hn,sn+En,En);sn+=At[Wt]}}Sn=!0},kn=()=>{mn&&(Nn(),dn()),Sn=!1};return Nn(),ht(jt,_n,kn)},createNativeBiquadFilterNode=(Xe,Ke)=>{const Ye=Xe.createBiquadFilter();return assignNativeAudioNodeOptions(Ye,Ke),assignNativeAudioNodeAudioParamValue(Ye,Ke,"Q"),assignNativeAudioNodeAudioParamValue(Ye,Ke,"detune"),assignNativeAudioNodeAudioParamValue(Ye,Ke,"frequency"),assignNativeAudioNodeAudioParamValue(Ye,Ke,"gain"),assignNativeAudioNodeOption(Ye,Ke,"type"),Ye},createNativeChannelMergerNodeFactory=(Xe,Ke)=>(Ye,Je)=>{const tt=Ye.createChannelMerger(Je.numberOfInputs);return Xe!==null&&Xe.name==="webkitAudioContext"&&Ke(Ye,tt),assignNativeAudioNodeOptions(tt,Je),tt},wrapChannelSplitterNode=Xe=>{const Ke=Xe.numberOfOutputs;Object.defineProperty(Xe,"channelCount",{get:()=>Ke,set:Ye=>{if(Ye!==Ke)throw createInvalidStateError()}}),Object.defineProperty(Xe,"channelCountMode",{get:()=>"explicit",set:Ye=>{if(Ye!=="explicit")throw createInvalidStateError()}}),Object.defineProperty(Xe,"channelInterpretation",{get:()=>"discrete",set:Ye=>{if(Ye!=="discrete")throw createInvalidStateError()}})},createNativeChannelSplitterNode=(Xe,Ke)=>{const Ye=Xe.createChannelSplitter(Ke.numberOfOutputs);return assignNativeAudioNodeOptions(Ye,Ke),wrapChannelSplitterNode(Ye),Ye},createNativeConstantSourceNodeFactory=(Xe,Ke,Ye,Je,tt)=>(st,rt)=>{if(st.createConstantSource===void 0)return Ye(st,rt);const it=st.createConstantSource();return assignNativeAudioNodeOptions(it,rt),assignNativeAudioNodeAudioParamValue(it,rt,"offset"),Ke(Je,()=>Je(st))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(it),Ke(tt,()=>tt(st))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(it),Xe(st,it),it},interceptConnections=(Xe,Ke)=>(Xe.connect=Ke.connect.bind(Ke),Xe.disconnect=Ke.disconnect.bind(Ke),Xe),createNativeConstantSourceNodeFakerFactory=(Xe,Ke,Ye,Je)=>(tt,{offset:st,...rt})=>{const it=tt.createBuffer(1,2,44100),ot=Ke(tt,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),at=Ye(tt,{...rt,gain:st}),lt=it.getChannelData(0);lt[0]=1,lt[1]=1,ot.buffer=it,ot.loop=!0;const ut={get bufferSize(){},get channelCount(){return at.channelCount},set channelCount(ft){at.channelCount=ft},get channelCountMode(){return at.channelCountMode},set channelCountMode(ft){at.channelCountMode=ft},get channelInterpretation(){return at.channelInterpretation},set channelInterpretation(ft){at.channelInterpretation=ft},get context(){return at.context},get inputs(){return[]},get numberOfInputs(){return ot.numberOfInputs},get numberOfOutputs(){return at.numberOfOutputs},get offset(){return at.gain},get onended(){return ot.onended},set onended(ft){ot.onended=ft},addEventListener(...ft){return ot.addEventListener(ft[0],ft[1],ft[2])},dispatchEvent(...ft){return ot.dispatchEvent(ft[0])},removeEventListener(...ft){return ot.removeEventListener(ft[0],ft[1],ft[2])},start(ft=0){ot.start.call(ot,ft)},stop(ft=0){ot.stop.call(ot,ft)}},ht=()=>ot.connect(at),pt=()=>ot.disconnect(at);return Xe(tt,ot),Je(interceptConnections(ut,at),ht,pt)},createNativeConvolverNodeFactory=(Xe,Ke)=>(Ye,Je)=>{const tt=Ye.createConvolver();if(assignNativeAudioNodeOptions(tt,Je),Je.disableNormalization===tt.normalize&&(tt.normalize=!Je.disableNormalization),assignNativeAudioNodeOption(tt,Je,"buffer"),Je.channelCount>2||(Ke(tt,"channelCount",st=>()=>st.call(tt),st=>rt=>{if(rt>2)throw Xe();return st.call(tt,rt)}),Je.channelCountMode==="max"))throw Xe();return Ke(tt,"channelCountMode",st=>()=>st.call(tt),st=>rt=>{if(rt==="max")throw Xe();return st.call(tt,rt)}),tt},createNativeDelayNode=(Xe,Ke)=>{const Ye=Xe.createDelay(Ke.maxDelayTime);return assignNativeAudioNodeOptions(Ye,Ke),assignNativeAudioNodeAudioParamValue(Ye,Ke,"delayTime"),Ye},createNativeDynamicsCompressorNodeFactory=Xe=>(Ke,Ye)=>{const Je=Ke.createDynamicsCompressor();if(assignNativeAudioNodeOptions(Je,Ye),Ye.channelCount>2||Ye.channelCountMode==="max")throw Xe();return assignNativeAudioNodeAudioParamValue(Je,Ye,"attack"),assignNativeAudioNodeAudioParamValue(Je,Ye,"knee"),assignNativeAudioNodeAudioParamValue(Je,Ye,"ratio"),assignNativeAudioNodeAudioParamValue(Je,Ye,"release"),assignNativeAudioNodeAudioParamValue(Je,Ye,"threshold"),Je},createNativeGainNode=(Xe,Ke)=>{const Ye=Xe.createGain();return assignNativeAudioNodeOptions(Ye,Ke),assignNativeAudioNodeAudioParamValue(Ye,Ke,"gain"),Ye},createNativeIIRFilterNodeFactory=Xe=>(Ke,Ye,Je)=>{if(Ke.createIIRFilter===void 0)return Xe(Ke,Ye,Je);const tt=Ke.createIIRFilter(Je.feedforward,Je.feedback);return assignNativeAudioNodeOptions(tt,Je),tt};function divide(Xe,Ke){const Ye=Ke[0]*Ke[0]+Ke[1]*Ke[1];return[(Xe[0]*Ke[0]+Xe[1]*Ke[1])/Ye,(Xe[1]*Ke[0]-Xe[0]*Ke[1])/Ye]}function multiply(Xe,Ke){return[Xe[0]*Ke[0]-Xe[1]*Ke[1],Xe[0]*Ke[1]+Xe[1]*Ke[0]]}function evaluatePolynomial(Xe,Ke){let Ye=[0,0];for(let Je=Xe.length-1;Je>=0;Je-=1)Ye=multiply(Ye,Ke),Ye[0]+=Xe[Je];return Ye}const createNativeIIRFilterNodeFakerFactory=(Xe,Ke,Ye,Je)=>(tt,st,{channelCount:rt,channelCountMode:it,channelInterpretation:ot,feedback:at,feedforward:lt})=>{const ut=computeBufferSize(st,tt.sampleRate),ht=at instanceof Float64Array?at:new Float64Array(at),pt=lt instanceof Float64Array?lt:new Float64Array(lt),ft=ht.length,xt=pt.length,vt=Math.min(ft,xt);if(ft===0||ft>20)throw Je();if(ht[0]===0)throw Ke();if(xt===0||xt>20)throw Je();if(pt[0]===0)throw Ke();if(ht[0]!==1){for(let Rt=0;Rt<xt;Rt+=1)pt[Rt]/=ht[0];for(let Rt=1;Rt<ft;Rt+=1)ht[Rt]/=ht[0]}const At=Ye(tt,ut,rt,rt);At.channelCount=rt,At.channelCountMode=it,At.channelInterpretation=ot;const Et=32,wt=[],_t=[],Ct=[];for(let Rt=0;Rt<rt;Rt+=1){wt.push(0);const Nt=new Float32Array(Et),Pt=new Float32Array(Et);Nt.fill(0),Pt.fill(0),_t.push(Nt),Ct.push(Pt)}At.onaudioprocess=Rt=>{const Nt=Rt.inputBuffer,Pt=Rt.outputBuffer,Bt=Nt.numberOfChannels;for(let Lt=0;Lt<Bt;Lt+=1){const zt=Nt.getChannelData(Lt),Dt=Pt.getChannelData(Lt);wt[Lt]=filterBuffer(ht,ft,pt,xt,vt,_t[Lt],Ct[Lt],wt[Lt],Et,zt,Dt)}};const Tt=tt.sampleRate/2;return interceptConnections({get bufferSize(){return ut},get channelCount(){return At.channelCount},set channelCount(Rt){At.channelCount=Rt},get channelCountMode(){return At.channelCountMode},set channelCountMode(Rt){At.channelCountMode=Rt},get channelInterpretation(){return At.channelInterpretation},set channelInterpretation(Rt){At.channelInterpretation=Rt},get context(){return At.context},get inputs(){return[At]},get numberOfInputs(){return At.numberOfInputs},get numberOfOutputs(){return At.numberOfOutputs},addEventListener(...Rt){return At.addEventListener(Rt[0],Rt[1],Rt[2])},dispatchEvent(...Rt){return At.dispatchEvent(Rt[0])},getFrequencyResponse(Rt,Nt,Pt){if(Rt.length!==Nt.length||Nt.length!==Pt.length)throw Xe();const Bt=Rt.length;for(let Lt=0;Lt<Bt;Lt+=1){const zt=-Math.PI*(Rt[Lt]/Tt),Dt=[Math.cos(zt),Math.sin(zt)],Vt=evaluatePolynomial(pt,Dt),Gt=evaluatePolynomial(ht,Dt),Qt=divide(Vt,Gt);Nt[Lt]=Math.sqrt(Qt[0]*Qt[0]+Qt[1]*Qt[1]),Pt[Lt]=Math.atan2(Qt[1],Qt[0])}},removeEventListener(...Rt){return At.removeEventListener(Rt[0],Rt[1],Rt[2])}},At)},createNativeMediaElementAudioSourceNode=(Xe,Ke)=>Xe.createMediaElementSource(Ke.mediaElement),createNativeMediaStreamAudioDestinationNode=(Xe,Ke)=>{const Ye=Xe.createMediaStreamDestination();return assignNativeAudioNodeOptions(Ye,Ke),Ye.numberOfOutputs===1&&Object.defineProperty(Ye,"numberOfOutputs",{get:()=>0}),Ye},createNativeMediaStreamAudioSourceNode=(Xe,{mediaStream:Ke})=>{const Ye=Ke.getAudioTracks();Ye.sort((st,rt)=>st.id<rt.id?-1:st.id>rt.id?1:0);const Je=Ye.slice(0,1),tt=Xe.createMediaStreamSource(new MediaStream(Je));return Object.defineProperty(tt,"mediaStream",{value:Ke}),tt},createNativeMediaStreamTrackAudioSourceNodeFactory=(Xe,Ke)=>(Ye,{mediaStreamTrack:Je})=>{if(typeof Ye.createMediaStreamTrackSource=="function")return Ye.createMediaStreamTrackSource(Je);const tt=new MediaStream([Je]),st=Ye.createMediaStreamSource(tt);if(Je.kind!=="audio")throw Xe();if(Ke(Ye))throw new TypeError;return st},createNativeOfflineAudioContextConstructor=Xe=>Xe===null?null:Xe.hasOwnProperty("OfflineAudioContext")?Xe.OfflineAudioContext:Xe.hasOwnProperty("webkitOfflineAudioContext")?Xe.webkitOfflineAudioContext:null,createNativeOscillatorNodeFactory=(Xe,Ke,Ye,Je,tt,st)=>(rt,it)=>{const ot=rt.createOscillator();return assignNativeAudioNodeOptions(ot,it),assignNativeAudioNodeAudioParamValue(ot,it,"detune"),assignNativeAudioNodeAudioParamValue(ot,it,"frequency"),it.periodicWave!==void 0?ot.setPeriodicWave(it.periodicWave):assignNativeAudioNodeOption(ot,it,"type"),Ke(Ye,()=>Ye(rt))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(ot),Ke(Je,()=>Je(rt))||st(ot,rt),Ke(tt,()=>tt(rt))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(ot),Xe(rt,ot),ot},createNativePannerNodeFactory=Xe=>(Ke,Ye)=>{const Je=Ke.createPanner();return Je.orientationX===void 0?Xe(Ke,Ye):(assignNativeAudioNodeOptions(Je,Ye),assignNativeAudioNodeAudioParamValue(Je,Ye,"orientationX"),assignNativeAudioNodeAudioParamValue(Je,Ye,"orientationY"),assignNativeAudioNodeAudioParamValue(Je,Ye,"orientationZ"),assignNativeAudioNodeAudioParamValue(Je,Ye,"positionX"),assignNativeAudioNodeAudioParamValue(Je,Ye,"positionY"),assignNativeAudioNodeAudioParamValue(Je,Ye,"positionZ"),assignNativeAudioNodeOption(Je,Ye,"coneInnerAngle"),assignNativeAudioNodeOption(Je,Ye,"coneOuterAngle"),assignNativeAudioNodeOption(Je,Ye,"coneOuterGain"),assignNativeAudioNodeOption(Je,Ye,"distanceModel"),assignNativeAudioNodeOption(Je,Ye,"maxDistance"),assignNativeAudioNodeOption(Je,Ye,"panningModel"),assignNativeAudioNodeOption(Je,Ye,"refDistance"),assignNativeAudioNodeOption(Je,Ye,"rolloffFactor"),Je)},createNativePannerNodeFakerFactory=(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at)=>(lt,{coneInnerAngle:ut,coneOuterAngle:ht,coneOuterGain:pt,distanceModel:ft,maxDistance:xt,orientationX:vt,orientationY:At,orientationZ:Et,panningModel:wt,positionX:_t,positionY:Ct,positionZ:Tt,refDistance:St,rolloffFactor:Rt,...Nt})=>{const Pt=lt.createPanner();if(Nt.channelCount>2||Nt.channelCountMode==="max")throw rt();assignNativeAudioNodeOptions(Pt,Nt);const Bt={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},Lt=Ye(lt,{...Bt,channelInterpretation:"speakers",numberOfInputs:6}),zt=Je(lt,{...Nt,gain:1}),Dt=Je(lt,{...Bt,gain:1}),Vt=Je(lt,{...Bt,gain:0}),Gt=Je(lt,{...Bt,gain:0}),Qt=Je(lt,{...Bt,gain:0}),jt=Je(lt,{...Bt,gain:0}),Ht=Je(lt,{...Bt,gain:0}),Yt=tt(lt,256,6,1),Jt=st(lt,{...Bt,curve:new Float32Array([1,1]),oversample:"none"});let Zt=[vt,At,Et],nn=[_t,Ct,Tt];const cn=new Float32Array(1);Yt.onaudioprocess=({inputBuffer:fn})=>{const Sn=[ot(fn,cn,0),ot(fn,cn,1),ot(fn,cn,2)];Sn.some((Nn,gn)=>Nn!==Zt[gn])&&(Pt.setOrientation(...Sn),Zt=Sn);const Tn=[ot(fn,cn,3),ot(fn,cn,4),ot(fn,cn,5)];Tn.some((Nn,gn)=>Nn!==nn[gn])&&(Pt.setPosition(...Tn),nn=Tn)},Object.defineProperty(Vt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Gt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Qt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(jt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Ht.gain,"defaultValue",{get:()=>0});const an={get bufferSize(){},get channelCount(){return Pt.channelCount},set channelCount(fn){if(fn>2)throw rt();zt.channelCount=fn,Pt.channelCount=fn},get channelCountMode(){return Pt.channelCountMode},set channelCountMode(fn){if(fn==="max")throw rt();zt.channelCountMode=fn,Pt.channelCountMode=fn},get channelInterpretation(){return Pt.channelInterpretation},set channelInterpretation(fn){zt.channelInterpretation=fn,Pt.channelInterpretation=fn},get coneInnerAngle(){return Pt.coneInnerAngle},set coneInnerAngle(fn){Pt.coneInnerAngle=fn},get coneOuterAngle(){return Pt.coneOuterAngle},set coneOuterAngle(fn){Pt.coneOuterAngle=fn},get coneOuterGain(){return Pt.coneOuterGain},set coneOuterGain(fn){if(fn<0||fn>1)throw Ke();Pt.coneOuterGain=fn},get context(){return Pt.context},get distanceModel(){return Pt.distanceModel},set distanceModel(fn){Pt.distanceModel=fn},get inputs(){return[zt]},get maxDistance(){return Pt.maxDistance},set maxDistance(fn){if(fn<0)throw new RangeError;Pt.maxDistance=fn},get numberOfInputs(){return Pt.numberOfInputs},get numberOfOutputs(){return Pt.numberOfOutputs},get orientationX(){return Dt.gain},get orientationY(){return Vt.gain},get orientationZ(){return Gt.gain},get panningModel(){return Pt.panningModel},set panningModel(fn){Pt.panningModel=fn},get positionX(){return Qt.gain},get positionY(){return jt.gain},get positionZ(){return Ht.gain},get refDistance(){return Pt.refDistance},set refDistance(fn){if(fn<0)throw new RangeError;Pt.refDistance=fn},get rolloffFactor(){return Pt.rolloffFactor},set rolloffFactor(fn){if(fn<0)throw new RangeError;Pt.rolloffFactor=fn},addEventListener(...fn){return zt.addEventListener(fn[0],fn[1],fn[2])},dispatchEvent(...fn){return zt.dispatchEvent(fn[0])},removeEventListener(...fn){return zt.removeEventListener(fn[0],fn[1],fn[2])}};ut!==an.coneInnerAngle&&(an.coneInnerAngle=ut),ht!==an.coneOuterAngle&&(an.coneOuterAngle=ht),pt!==an.coneOuterGain&&(an.coneOuterGain=pt),ft!==an.distanceModel&&(an.distanceModel=ft),xt!==an.maxDistance&&(an.maxDistance=xt),vt!==an.orientationX.value&&(an.orientationX.value=vt),At!==an.orientationY.value&&(an.orientationY.value=At),Et!==an.orientationZ.value&&(an.orientationZ.value=Et),wt!==an.panningModel&&(an.panningModel=wt),_t!==an.positionX.value&&(an.positionX.value=_t),Ct!==an.positionY.value&&(an.positionY.value=Ct),Tt!==an.positionZ.value&&(an.positionZ.value=Tt),St!==an.refDistance&&(an.refDistance=St),Rt!==an.rolloffFactor&&(an.rolloffFactor=Rt),(Zt[0]!==1||Zt[1]!==0||Zt[2]!==0)&&Pt.setOrientation(...Zt),(nn[0]!==0||nn[1]!==0||nn[2]!==0)&&Pt.setPosition(...nn);const mn=()=>{zt.connect(Pt),Xe(zt,Jt,0,0),Jt.connect(Dt).connect(Lt,0,0),Jt.connect(Vt).connect(Lt,0,1),Jt.connect(Gt).connect(Lt,0,2),Jt.connect(Qt).connect(Lt,0,3),Jt.connect(jt).connect(Lt,0,4),Jt.connect(Ht).connect(Lt,0,5),Lt.connect(Yt).connect(lt.destination)},dn=()=>{zt.disconnect(Pt),it(zt,Jt,0,0),Jt.disconnect(Dt),Dt.disconnect(Lt),Jt.disconnect(Vt),Vt.disconnect(Lt),Jt.disconnect(Gt),Gt.disconnect(Lt),Jt.disconnect(Qt),Qt.disconnect(Lt),Jt.disconnect(jt),jt.disconnect(Lt),Jt.disconnect(Ht),Ht.disconnect(Lt),Lt.disconnect(Yt),Yt.disconnect(lt.destination)};return at(interceptConnections(an,Pt),mn,dn)},createNativePeriodicWaveFactory=Xe=>(Ke,{disableNormalization:Ye,imag:Je,real:tt})=>{const st=Je instanceof Float32Array?Je:new Float32Array(Je),rt=tt instanceof Float32Array?tt:new Float32Array(tt),it=Ke.createPeriodicWave(rt,st,{disableNormalization:Ye});if(Array.from(Je).length<2)throw Xe();return it},createNativeScriptProcessorNode=(Xe,Ke,Ye,Je)=>Xe.createScriptProcessor(Ke,Ye,Je),createNativeStereoPannerNodeFactory=(Xe,Ke)=>(Ye,Je)=>{const tt=Je.channelCountMode;if(tt==="clamped-max")throw Ke();if(Ye.createStereoPanner===void 0)return Xe(Ye,Je);const st=Ye.createStereoPanner();return assignNativeAudioNodeOptions(st,Je),assignNativeAudioNodeAudioParamValue(st,Je,"pan"),Object.defineProperty(st,"channelCountMode",{get:()=>tt,set:rt=>{if(rt!==tt)throw Ke()}}),st},createNativeStereoPannerNodeFakerFactory=(Xe,Ke,Ye,Je,tt,st)=>{const it=new Float32Array([1,1]),ot=Math.PI/2,at={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},lt={...at,oversample:"none"},ut=(ft,xt,vt,At)=>{const Et=new Float32Array(16385),wt=new Float32Array(16385);for(let Nt=0;Nt<16385;Nt+=1){const Pt=Nt/16384*ot;Et[Nt]=Math.cos(Pt),wt[Nt]=Math.sin(Pt)}const _t=Ye(ft,{...at,gain:0}),Ct=Je(ft,{...lt,curve:Et}),Tt=Je(ft,{...lt,curve:it}),St=Ye(ft,{...at,gain:0}),Rt=Je(ft,{...lt,curve:wt});return{connectGraph(){xt.connect(_t),xt.connect(Tt.inputs===void 0?Tt:Tt.inputs[0]),xt.connect(St),Tt.connect(vt),vt.connect(Ct.inputs===void 0?Ct:Ct.inputs[0]),vt.connect(Rt.inputs===void 0?Rt:Rt.inputs[0]),Ct.connect(_t.gain),Rt.connect(St.gain),_t.connect(At,0,0),St.connect(At,0,1)},disconnectGraph(){xt.disconnect(_t),xt.disconnect(Tt.inputs===void 0?Tt:Tt.inputs[0]),xt.disconnect(St),Tt.disconnect(vt),vt.disconnect(Ct.inputs===void 0?Ct:Ct.inputs[0]),vt.disconnect(Rt.inputs===void 0?Rt:Rt.inputs[0]),Ct.disconnect(_t.gain),Rt.disconnect(St.gain),_t.disconnect(At,0,0),St.disconnect(At,0,1)}}},ht=(ft,xt,vt,At)=>{const Et=new Float32Array(16385),wt=new Float32Array(16385),_t=new Float32Array(16385),Ct=new Float32Array(16385),Tt=Math.floor(16385/2);for(let Qt=0;Qt<16385;Qt+=1)if(Qt>Tt){const jt=(Qt-Tt)/(16384-Tt)*ot;Et[Qt]=Math.cos(jt),wt[Qt]=Math.sin(jt),_t[Qt]=0,Ct[Qt]=1}else{const jt=Qt/(16384-Tt)*ot;Et[Qt]=1,wt[Qt]=0,_t[Qt]=Math.cos(jt),Ct[Qt]=Math.sin(jt)}const St=Ke(ft,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),Rt=Ye(ft,{...at,gain:0}),Nt=Je(ft,{...lt,curve:Et}),Pt=Ye(ft,{...at,gain:0}),Bt=Je(ft,{...lt,curve:wt}),Lt=Je(ft,{...lt,curve:it}),zt=Ye(ft,{...at,gain:0}),Dt=Je(ft,{...lt,curve:_t}),Vt=Ye(ft,{...at,gain:0}),Gt=Je(ft,{...lt,curve:Ct});return{connectGraph(){xt.connect(St),xt.connect(Lt.inputs===void 0?Lt:Lt.inputs[0]),St.connect(Rt,0),St.connect(Pt,0),St.connect(zt,1),St.connect(Vt,1),Lt.connect(vt),vt.connect(Nt.inputs===void 0?Nt:Nt.inputs[0]),vt.connect(Bt.inputs===void 0?Bt:Bt.inputs[0]),vt.connect(Dt.inputs===void 0?Dt:Dt.inputs[0]),vt.connect(Gt.inputs===void 0?Gt:Gt.inputs[0]),Nt.connect(Rt.gain),Bt.connect(Pt.gain),Dt.connect(zt.gain),Gt.connect(Vt.gain),Rt.connect(At,0,0),zt.connect(At,0,0),Pt.connect(At,0,1),Vt.connect(At,0,1)},disconnectGraph(){xt.disconnect(St),xt.disconnect(Lt.inputs===void 0?Lt:Lt.inputs[0]),St.disconnect(Rt,0),St.disconnect(Pt,0),St.disconnect(zt,1),St.disconnect(Vt,1),Lt.disconnect(vt),vt.disconnect(Nt.inputs===void 0?Nt:Nt.inputs[0]),vt.disconnect(Bt.inputs===void 0?Bt:Bt.inputs[0]),vt.disconnect(Dt.inputs===void 0?Dt:Dt.inputs[0]),vt.disconnect(Gt.inputs===void 0?Gt:Gt.inputs[0]),Nt.disconnect(Rt.gain),Bt.disconnect(Pt.gain),Dt.disconnect(zt.gain),Gt.disconnect(Vt.gain),Rt.disconnect(At,0,0),zt.disconnect(At,0,0),Pt.disconnect(At,0,1),Vt.disconnect(At,0,1)}}},pt=(ft,xt,vt,At,Et)=>{if(xt===1)return ut(ft,vt,At,Et);if(xt===2)return ht(ft,vt,At,Et);throw tt()};return(ft,{channelCount:xt,channelCountMode:vt,pan:At,...Et})=>{if(vt==="max")throw tt();const wt=Xe(ft,{...Et,channelCount:1,channelCountMode:vt,numberOfInputs:2}),_t=Ye(ft,{...Et,channelCount:xt,channelCountMode:vt,gain:1}),Ct=Ye(ft,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:At});let{connectGraph:Tt,disconnectGraph:St}=pt(ft,xt,_t,Ct,wt);Object.defineProperty(Ct.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Ct.gain,"maxValue",{get:()=>1}),Object.defineProperty(Ct.gain,"minValue",{get:()=>-1});const Rt={get bufferSize(){},get channelCount(){return _t.channelCount},set channelCount(Lt){_t.channelCount!==Lt&&(Nt&&St(),{connectGraph:Tt,disconnectGraph:St}=pt(ft,Lt,_t,Ct,wt),Nt&&Tt()),_t.channelCount=Lt},get channelCountMode(){return _t.channelCountMode},set channelCountMode(Lt){if(Lt==="clamped-max"||Lt==="max")throw tt();_t.channelCountMode=Lt},get channelInterpretation(){return _t.channelInterpretation},set channelInterpretation(Lt){_t.channelInterpretation=Lt},get context(){return _t.context},get inputs(){return[_t]},get numberOfInputs(){return _t.numberOfInputs},get numberOfOutputs(){return _t.numberOfOutputs},get pan(){return Ct.gain},addEventListener(...Lt){return _t.addEventListener(Lt[0],Lt[1],Lt[2])},dispatchEvent(...Lt){return _t.dispatchEvent(Lt[0])},removeEventListener(...Lt){return _t.removeEventListener(Lt[0],Lt[1],Lt[2])}};let Nt=!1;const Pt=()=>{Tt(),Nt=!0},Bt=()=>{St(),Nt=!1};return st(interceptConnections(Rt,wt),Pt,Bt)}},createNativeWaveShaperNodeFactory=(Xe,Ke,Ye,Je,tt,st,rt)=>(it,ot)=>{const at=it.createWaveShaper();if(st!==null&&st.name==="webkitAudioContext"&&it.createGain().gain.automationRate===void 0)return Ye(it,ot);assignNativeAudioNodeOptions(at,ot);const lt=ot.curve===null||ot.curve instanceof Float32Array?ot.curve:new Float32Array(ot.curve);if(lt!==null&&lt.length<2)throw Ke();assignNativeAudioNodeOption(at,{curve:lt},"curve"),assignNativeAudioNodeOption(at,ot,"oversample");let ut=null,ht=!1;return rt(at,"curve",xt=>()=>xt.call(at),xt=>vt=>(xt.call(at,vt),ht&&(Je(vt)&&ut===null?ut=Xe(it,at):!Je(vt)&&ut!==null&&(ut(),ut=null)),vt)),tt(at,()=>{ht=!0,Je(at.curve)&&(ut=Xe(it,at))},()=>{ht=!1,ut!==null&&(ut(),ut=null)})},createNativeWaveShaperNodeFakerFactory=(Xe,Ke,Ye,Je,tt)=>(st,{curve:rt,oversample:it,...ot})=>{const at=st.createWaveShaper(),lt=st.createWaveShaper();assignNativeAudioNodeOptions(at,ot),assignNativeAudioNodeOptions(lt,ot);const ut=Ye(st,{...ot,gain:1}),ht=Ye(st,{...ot,gain:-1}),pt=Ye(st,{...ot,gain:1}),ft=Ye(st,{...ot,gain:-1});let xt=null,vt=!1,At=null;const Et={get bufferSize(){},get channelCount(){return at.channelCount},set channelCount(Ct){ut.channelCount=Ct,ht.channelCount=Ct,at.channelCount=Ct,pt.channelCount=Ct,lt.channelCount=Ct,ft.channelCount=Ct},get channelCountMode(){return at.channelCountMode},set channelCountMode(Ct){ut.channelCountMode=Ct,ht.channelCountMode=Ct,at.channelCountMode=Ct,pt.channelCountMode=Ct,lt.channelCountMode=Ct,ft.channelCountMode=Ct},get channelInterpretation(){return at.channelInterpretation},set channelInterpretation(Ct){ut.channelInterpretation=Ct,ht.channelInterpretation=Ct,at.channelInterpretation=Ct,pt.channelInterpretation=Ct,lt.channelInterpretation=Ct,ft.channelInterpretation=Ct},get context(){return at.context},get curve(){return At},set curve(Ct){if(Ct!==null&&Ct.length<2)throw Ke();if(Ct===null)at.curve=Ct,lt.curve=Ct;else{const Tt=Ct.length,St=new Float32Array(Tt+2-Tt%2),Rt=new Float32Array(Tt+2-Tt%2);St[0]=Ct[0],Rt[0]=-Ct[Tt-1];const Nt=Math.ceil((Tt+1)/2),Pt=(Tt+1)/2-1;for(let Bt=1;Bt<Nt;Bt+=1){const Lt=Bt/Nt*Pt,zt=Math.floor(Lt),Dt=Math.ceil(Lt);St[Bt]=zt===Dt?Ct[zt]:(1-(Lt-zt))*Ct[zt]+(1-(Dt-Lt))*Ct[Dt],Rt[Bt]=zt===Dt?-Ct[Tt-1-zt]:-((1-(Lt-zt))*Ct[Tt-1-zt])-(1-(Dt-Lt))*Ct[Tt-1-Dt]}St[Nt]=Tt%2===1?Ct[Nt-1]:(Ct[Nt-2]+Ct[Nt-1])/2,at.curve=St,lt.curve=Rt}At=Ct,vt&&(Je(At)&&xt===null?xt=Xe(st,ut):xt!==null&&(xt(),xt=null))},get inputs(){return[ut]},get numberOfInputs(){return at.numberOfInputs},get numberOfOutputs(){return at.numberOfOutputs},get oversample(){return at.oversample},set oversample(Ct){at.oversample=Ct,lt.oversample=Ct},addEventListener(...Ct){return ut.addEventListener(Ct[0],Ct[1],Ct[2])},dispatchEvent(...Ct){return ut.dispatchEvent(Ct[0])},removeEventListener(...Ct){return ut.removeEventListener(Ct[0],Ct[1],Ct[2])}};rt!==null&&(Et.curve=rt instanceof Float32Array?rt:new Float32Array(rt)),it!==Et.oversample&&(Et.oversample=it);const wt=()=>{ut.connect(at).connect(pt),ut.connect(ht).connect(lt).connect(ft).connect(pt),vt=!0,Je(At)&&(xt=Xe(st,ut))},_t=()=>{ut.disconnect(at),at.disconnect(pt),ut.disconnect(ht),ht.disconnect(lt),lt.disconnect(ft),ft.disconnect(pt),vt=!1,xt!==null&&(xt(),xt=null)};return tt(interceptConnections(Et,pt),wt,_t)},createNotSupportedError=()=>new DOMException("","NotSupportedError"),DEFAULT_OPTIONS$5={numberOfChannels:1},createOfflineAudioContextConstructor=(Xe,Ke,Ye,Je,tt)=>class extends Xe{constructor(rt,it,ot){let at;if(typeof rt=="number"&&it!==void 0&&ot!==void 0)at={length:it,numberOfChannels:rt,sampleRate:ot};else if(typeof rt=="object")at=rt;else throw new Error("The given parameters are not valid.");const{length:lt,numberOfChannels:ut,sampleRate:ht}={...DEFAULT_OPTIONS$5,...at},pt=Je(ut,lt,ht);Ke(testPromiseSupport,()=>testPromiseSupport(pt))||pt.addEventListener("statechange",(()=>{let ft=0;const xt=vt=>{this._state==="running"&&(ft>0?(pt.removeEventListener("statechange",xt),vt.stopImmediatePropagation(),this._waitForThePromiseToSettle(vt)):ft+=1)};return xt})()),super(pt,ut),this._length=lt,this._nativeOfflineAudioContext=pt,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(Ye()):(this._state="running",tt(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,deactivateAudioGraph(this)}))}_waitForThePromiseToSettle(rt){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(rt):setTimeout(()=>this._waitForThePromiseToSettle(rt))}},DEFAULT_OPTIONS$4={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},createOscillatorNodeConstructor=(Xe,Ke,Ye,Je,tt,st,rt)=>class extends Xe{constructor(ot,at){const lt=tt(ot),ut={...DEFAULT_OPTIONS$4,...at},ht=Ye(lt,ut),pt=st(lt),ft=pt?Je():null,xt=ot.sampleRate/2;super(ot,!1,ht,ft),this._detune=Ke(this,pt,ht.detune,153600,-153600),this._frequency=Ke(this,pt,ht.frequency,xt,-xt),this._nativeOscillatorNode=ht,this._onended=null,this._oscillatorNodeRenderer=ft,this._oscillatorNodeRenderer!==null&&ut.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=ut.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(ot){const at=typeof ot=="function"?rt(this,ot):null;this._nativeOscillatorNode.onended=at;const lt=this._nativeOscillatorNode.onended;this._onended=lt!==null&&lt===at?ot:lt}get type(){return this._nativeOscillatorNode.type}set type(ot){this._nativeOscillatorNode.type=ot,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(ot){this._nativeOscillatorNode.setPeriodicWave(ot),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=ot)}start(ot=0){if(this._nativeOscillatorNode.start(ot),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=ot),this.context.state!=="closed"){setInternalStateToActive(this);const at=()=>{this._nativeOscillatorNode.removeEventListener("ended",at),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeOscillatorNode.addEventListener("ended",at)}}stop(ot=0){this._nativeOscillatorNode.stop(ot),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=ot)}},createOscillatorNodeRendererFactory=(Xe,Ke,Ye,Je,tt)=>()=>{const st=new WeakMap;let rt=null,it=null,ot=null;const at=async(lt,ut)=>{let ht=Ye(lt);const pt=isOwnedByContext(ht,ut);if(!pt){const ft={channelCount:ht.channelCount,channelCountMode:ht.channelCountMode,channelInterpretation:ht.channelInterpretation,detune:ht.detune.value,frequency:ht.frequency.value,periodicWave:rt===null?void 0:rt,type:ht.type};ht=Ke(ut,ft),it!==null&&ht.start(it),ot!==null&&ht.stop(ot)}return st.set(ut,ht),pt?(await Xe(ut,lt.detune,ht.detune),await Xe(ut,lt.frequency,ht.frequency)):(await Je(ut,lt.detune,ht.detune),await Je(ut,lt.frequency,ht.frequency)),await tt(lt,ut,ht),ht};return{set periodicWave(lt){rt=lt},set start(lt){it=lt},set stop(lt){ot=lt},render(lt,ut){const ht=st.get(ut);return ht!==void 0?Promise.resolve(ht):at(lt,ut)}}},DEFAULT_OPTIONS$3={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},createPannerNodeConstructor=(Xe,Ke,Ye,Je,tt,st,rt)=>class extends Xe{constructor(ot,at){const lt=tt(ot),ut={...DEFAULT_OPTIONS$3,...at},ht=Ye(lt,ut),pt=st(lt),ft=pt?Je():null;super(ot,!1,ht,ft),this._nativePannerNode=ht,this._orientationX=Ke(this,pt,ht.orientationX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationY=Ke(this,pt,ht.orientationY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationZ=Ke(this,pt,ht.orientationZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionX=Ke(this,pt,ht.positionX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionY=Ke(this,pt,ht.positionY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionZ=Ke(this,pt,ht.positionZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),rt(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(ot){this._nativePannerNode.coneInnerAngle=ot}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(ot){this._nativePannerNode.coneOuterAngle=ot}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(ot){this._nativePannerNode.coneOuterGain=ot}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(ot){this._nativePannerNode.distanceModel=ot}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(ot){this._nativePannerNode.maxDistance=ot}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(ot){this._nativePannerNode.panningModel=ot}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(ot){this._nativePannerNode.refDistance=ot}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(ot){this._nativePannerNode.rolloffFactor=ot}},createPannerNodeRendererFactory=(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at)=>()=>{const lt=new WeakMap;let ut=null;const ht=async(pt,ft)=>{let xt=null,vt=st(pt);const At={channelCount:vt.channelCount,channelCountMode:vt.channelCountMode,channelInterpretation:vt.channelInterpretation},Et={...At,coneInnerAngle:vt.coneInnerAngle,coneOuterAngle:vt.coneOuterAngle,coneOuterGain:vt.coneOuterGain,distanceModel:vt.distanceModel,maxDistance:vt.maxDistance,panningModel:vt.panningModel,refDistance:vt.refDistance,rolloffFactor:vt.rolloffFactor},wt=isOwnedByContext(vt,ft);if("bufferSize"in vt)xt=Je(ft,{...At,gain:1});else if(!wt){const _t={...Et,orientationX:vt.orientationX.value,orientationY:vt.orientationY.value,orientationZ:vt.orientationZ.value,positionX:vt.positionX.value,positionY:vt.positionY.value,positionZ:vt.positionZ.value};vt=tt(ft,_t)}if(lt.set(ft,xt===null?vt:xt),xt!==null){if(ut===null){if(rt===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Bt=new rt(6,pt.context.length,ft.sampleRate),Lt=Ke(Bt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});Lt.connect(Bt.destination),ut=(async()=>{const zt=await Promise.all([pt.orientationX,pt.orientationY,pt.orientationZ,pt.positionX,pt.positionY,pt.positionZ].map(async(Dt,Vt)=>{const Gt=Ye(Bt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Vt===0?1:0});return await it(Bt,Dt,Gt.offset),Gt}));for(let Dt=0;Dt<6;Dt+=1)zt[Dt].connect(Lt,0,Dt),zt[Dt].start(0);return at(Bt)})()}const _t=await ut,Ct=Je(ft,{...At,gain:1});await ot(pt,ft,Ct);const Tt=[];for(let Bt=0;Bt<_t.numberOfChannels;Bt+=1)Tt.push(_t.getChannelData(Bt));let St=[Tt[0][0],Tt[1][0],Tt[2][0]],Rt=[Tt[3][0],Tt[4][0],Tt[5][0]],Nt=Je(ft,{...At,gain:1}),Pt=tt(ft,{...Et,orientationX:St[0],orientationY:St[1],orientationZ:St[2],positionX:Rt[0],positionY:Rt[1],positionZ:Rt[2]});Ct.connect(Nt).connect(Pt.inputs[0]),Pt.connect(xt);for(let Bt=128;Bt<_t.length;Bt+=128){const Lt=[Tt[0][Bt],Tt[1][Bt],Tt[2][Bt]],zt=[Tt[3][Bt],Tt[4][Bt],Tt[5][Bt]];if(Lt.some((Dt,Vt)=>Dt!==St[Vt])||zt.some((Dt,Vt)=>Dt!==Rt[Vt])){St=Lt,Rt=zt;const Dt=Bt/ft.sampleRate;Nt.gain.setValueAtTime(0,Dt),Nt=Je(ft,{...At,gain:0}),Pt=tt(ft,{...Et,orientationX:St[0],orientationY:St[1],orientationZ:St[2],positionX:Rt[0],positionY:Rt[1],positionZ:Rt[2]}),Nt.gain.setValueAtTime(1,Dt),Ct.connect(Nt).connect(Pt.inputs[0]),Pt.connect(xt)}}return xt}return wt?(await Xe(ft,pt.orientationX,vt.orientationX),await Xe(ft,pt.orientationY,vt.orientationY),await Xe(ft,pt.orientationZ,vt.orientationZ),await Xe(ft,pt.positionX,vt.positionX),await Xe(ft,pt.positionY,vt.positionY),await Xe(ft,pt.positionZ,vt.positionZ)):(await it(ft,pt.orientationX,vt.orientationX),await it(ft,pt.orientationY,vt.orientationY),await it(ft,pt.orientationZ,vt.orientationZ),await it(ft,pt.positionX,vt.positionX),await it(ft,pt.positionY,vt.positionY),await it(ft,pt.positionZ,vt.positionZ)),isNativeAudioNodeFaker(vt)?await ot(pt,ft,vt.inputs[0]):await ot(pt,ft,vt),vt};return{render(pt,ft){const xt=lt.get(ft);return xt!==void 0?Promise.resolve(xt):ht(pt,ft)}}},DEFAULT_OPTIONS$2={disableNormalization:!1},createPeriodicWaveConstructor=(Xe,Ke,Ye,Je)=>class Pu{constructor(st,rt){const it=Ke(st),ot=Je({...DEFAULT_OPTIONS$2,...rt}),at=Xe(it,ot);return Ye.add(at),at}static[Symbol.hasInstance](st){return st!==null&&typeof st=="object"&&Object.getPrototypeOf(st)===Pu.prototype||Ye.has(st)}},createRenderAutomation=(Xe,Ke)=>(Ye,Je,tt)=>(Xe(Je).replay(tt),Ke(Je,Ye,tt)),createRenderInputsOfAudioNode=(Xe,Ke,Ye)=>async(Je,tt,st)=>{const rt=Xe(Je);await Promise.all(rt.activeInputs.map((it,ot)=>Array.from(it).map(async([at,lt])=>{const ht=await Ke(at).render(at,tt),pt=Je.context.destination;!Ye(at)&&(Je!==pt||!Ye(Je))&&ht.connect(st,lt,ot)})).reduce((it,ot)=>[...it,...ot],[]))},createRenderInputsOfAudioParam=(Xe,Ke,Ye)=>async(Je,tt,st)=>{const rt=Ke(Je);await Promise.all(Array.from(rt.activeInputs).map(async([it,ot])=>{const lt=await Xe(it).render(it,tt);Ye(it)||lt.connect(st,ot)}))},createRenderNativeOfflineAudioContext=(Xe,Ke,Ye,Je)=>tt=>Xe(testPromiseSupport,()=>testPromiseSupport(tt))?Promise.resolve(Xe(Je,Je)).then(st=>{if(!st){const rt=Ye(tt,512,0,1);tt.oncomplete=()=>{rt.onaudioprocess=null,rt.disconnect()},rt.onaudioprocess=()=>tt.currentTime,rt.connect(tt.destination)}return tt.startRendering()}):new Promise(st=>{const rt=Ke(tt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});tt.oncomplete=it=>{rt.disconnect(),st(it.renderedBuffer)},rt.connect(tt.destination),tt.startRendering()}),createSetActiveAudioWorkletNodeInputs=Xe=>(Ke,Ye)=>{Xe.set(Ke,Ye)},createSetAudioNodeTailTime=Xe=>(Ke,Ye)=>Xe.set(Ke,Ye),createStartRendering=(Xe,Ke,Ye,Je,tt,st,rt,it)=>(ot,at)=>Ye(ot).render(ot,at).then(()=>Promise.all(Array.from(Je(at)).map(lt=>Ye(lt).render(lt,at)))).then(()=>tt(at)).then(lt=>(typeof lt.copyFromChannel!="function"?(rt(lt),wrapAudioBufferGetChannelDataMethod(lt)):Ke(st,()=>st(lt))||it(lt),Xe.add(lt),lt)),DEFAULT_OPTIONS$1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},createStereoPannerNodeConstructor=(Xe,Ke,Ye,Je,tt,st)=>class extends Xe{constructor(it,ot){const at=tt(it),lt={...DEFAULT_OPTIONS$1,...ot},ut=Ye(at,lt),ht=st(at),pt=ht?Je():null;super(it,!1,ut,pt),this._pan=Ke(this,ht,ut.pan)}get pan(){return this._pan}},createStereoPannerNodeRendererFactory=(Xe,Ke,Ye,Je,tt)=>()=>{const st=new WeakMap,rt=async(it,ot)=>{let at=Ye(it);const lt=isOwnedByContext(at,ot);if(!lt){const ut={channelCount:at.channelCount,channelCountMode:at.channelCountMode,channelInterpretation:at.channelInterpretation,pan:at.pan.value};at=Ke(ot,ut)}return st.set(ot,at),lt?await Xe(ot,it.pan,at.pan):await Je(ot,it.pan,at.pan),isNativeAudioNodeFaker(at)?await tt(it,ot,at.inputs[0]):await tt(it,ot,at),at};return{render(it,ot){const at=st.get(ot);return at!==void 0?Promise.resolve(at):rt(it,ot)}}},createTestAudioBufferConstructorSupport=Xe=>()=>{if(Xe===null)return!1;try{new Xe({length:1,sampleRate:44100})}catch{return!1}return!0},createTestAudioBufferCopyChannelMethodsSubarraySupport=Xe=>()=>{if(Xe===null)return!1;const Ye=new Xe(1,1,44100).createBuffer(1,1,44100);if(Ye.copyToChannel===void 0)return!0;const Je=new Float32Array(2);try{Ye.copyFromChannel(Je,0,0)}catch{return!1}return!0},createTestAudioContextCloseMethodSupport=Xe=>()=>{if(Xe===null)return!1;if(Xe.prototype!==void 0&&Xe.prototype.close!==void 0)return!0;const Ke=new Xe,Ye=Ke.close!==void 0;try{Ke.close()}catch{}return Ye},createTestAudioContextDecodeAudioDataMethodTypeErrorSupport=Xe=>()=>{if(Xe===null)return Promise.resolve(!1);const Ke=new Xe(1,1,44100);return new Promise(Ye=>{let Je=!0;const tt=rt=>{Je&&(Je=!1,Ke.startRendering(),Ye(rt instanceof TypeError))};let st;try{st=Ke.decodeAudioData(null,()=>{},tt)}catch(rt){tt(rt)}st!==void 0&&st.catch(tt)})},createTestAudioContextOptionsSupport=Xe=>()=>{if(Xe===null)return!1;let Ke;try{Ke=new Xe({latencyHint:"balanced"})}catch{return!1}return Ke.close(),!0},createTestAudioNodeConnectMethodSupport=Xe=>()=>{if(Xe===null)return!1;const Ye=new Xe(1,1,44100).createGain(),Je=Ye.connect(Ye)===Ye;return Ye.disconnect(Ye),Je},createTestAudioWorkletProcessorNoOutputsSupport=(Xe,Ke)=>async()=>{if(Xe===null)return!0;if(Ke===null)return!1;const Ye=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),Je=new MessageChannel,tt=new Ke(1,128,44100),st=URL.createObjectURL(Ye);let rt=!1;try{await tt.audioWorklet.addModule(st);const it=new Xe(tt,"a",{numberOfOutputs:0}),ot=tt.createOscillator();await new Promise(at=>{it.port.onmessage=()=>at(),it.port.postMessage(Je.port2,[Je.port2])}),it.port.onmessage=()=>rt=!0,ot.connect(it),ot.start(0),await tt.startRendering(),rt=await new Promise(at=>{Je.port1.onmessage=({data:lt})=>at(lt===1),Je.port1.postMessage(0)})}catch{}finally{Je.port1.close(),URL.revokeObjectURL(st)}return rt},createTestAudioWorkletProcessorPostMessageSupport=(Xe,Ke)=>async()=>{if(Xe===null)return!0;if(Ke===null)return!1;const Ye=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),Je=new Ke(1,128,44100),tt=URL.createObjectURL(Ye);let st=!1,rt=!1;try{await Je.audioWorklet.addModule(tt);const it=new Xe(Je,"a",{numberOfOutputs:0}),ot=Je.createOscillator();it.port.onmessage=()=>st=!0,it.onprocessorerror=()=>rt=!0,ot.connect(it),ot.start(0),await Je.startRendering(),await new Promise(at=>setTimeout(at))}catch{}finally{URL.revokeObjectURL(tt)}return st&&!rt},createTestChannelMergerNodeChannelCountSupport=Xe=>()=>{if(Xe===null)return!1;const Ye=new Xe(1,1,44100).createChannelMerger();if(Ye.channelCountMode==="max")return!0;try{Ye.channelCount=2}catch{return!0}return!1},createTestConstantSourceNodeAccurateSchedulingSupport=Xe=>()=>{if(Xe===null)return!1;const Ke=new Xe(1,1,44100);return Ke.createConstantSource===void 0?!0:Ke.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY},createTestConvolverNodeBufferReassignabilitySupport=Xe=>()=>{if(Xe===null)return!1;const Ke=new Xe(1,1,44100),Ye=Ke.createConvolver();Ye.buffer=Ke.createBuffer(1,1,Ke.sampleRate);try{Ye.buffer=Ke.createBuffer(1,1,Ke.sampleRate)}catch{return!1}return!0},createTestConvolverNodeChannelCountSupport=Xe=>()=>{if(Xe===null)return!1;const Ye=new Xe(1,1,44100).createConvolver();try{Ye.channelCount=1}catch{return!1}return!0},createTestIsSecureContextSupport=Xe=>()=>Xe!==null&&Xe.hasOwnProperty("isSecureContext"),createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport=Xe=>()=>{if(Xe===null)return!1;const Ke=new Xe;try{return Ke.createMediaStreamSource(new MediaStream),!1}catch{return!0}finally{Ke.close()}},createTestOfflineAudioContextCurrentTimeSupport=(Xe,Ke)=>()=>{if(Ke===null)return Promise.resolve(!1);const Ye=new Ke(1,1,44100),Je=Xe(Ye,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(tt=>{Ye.oncomplete=()=>{Je.disconnect(),tt(Ye.currentTime!==0)},Ye.startRendering()})},createTestStereoPannerNodeDefaultValueSupport=Xe=>()=>{if(Xe===null)return Promise.resolve(!1);const Ke=new Xe(1,1,44100);if(Ke.createStereoPanner===void 0||Ke.createConstantSource===void 0)return Promise.resolve(!0);const Ye=Ke.createConstantSource(),Je=Ke.createStereoPanner();return Ye.channelCount=1,Ye.offset.value=1,Je.channelCount=1,Ye.start(),Ye.connect(Je).connect(Ke.destination),Ke.startRendering().then(tt=>tt.getChannelData(0)[0]!==1)},createUnknownError=()=>new DOMException("","UnknownError"),DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},createWaveShaperNodeConstructor=(Xe,Ke,Ye,Je,tt,st,rt)=>class extends Xe{constructor(ot,at){const lt=tt(ot),ut={...DEFAULT_OPTIONS,...at},ht=Ye(lt,ut),ft=st(lt)?Je():null;super(ot,!0,ht,ft),this._isCurveNullified=!1,this._nativeWaveShaperNode=ht,rt(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(ot){if(ot===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(ot.length<2)throw Ke();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=ot}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(ot){this._nativeWaveShaperNode.oversample=ot}},createWaveShaperNodeRendererFactory=(Xe,Ke,Ye)=>()=>{const Je=new WeakMap,tt=async(st,rt)=>{let it=Ke(st);if(!isOwnedByContext(it,rt)){const at={channelCount:it.channelCount,channelCountMode:it.channelCountMode,channelInterpretation:it.channelInterpretation,curve:it.curve,oversample:it.oversample};it=Xe(rt,at)}return Je.set(rt,it),isNativeAudioNodeFaker(it)?await Ye(st,rt,it.inputs[0]):await Ye(st,rt,it),it};return{render(st,rt){const it=Je.get(rt);return it!==void 0?Promise.resolve(it):tt(st,rt)}}},createWindow=()=>typeof window>"u"?null:window,createWrapAudioBufferCopyChannelMethods=(Xe,Ke)=>Ye=>{Ye.copyFromChannel=(Je,tt,st=0)=>{const rt=Xe(st),it=Xe(tt);if(it>=Ye.numberOfChannels)throw Ke();const ot=Ye.length,at=Ye.getChannelData(it),lt=Je.length;for(let ut=rt<0?-rt:0;ut+rt<ot&&ut<lt;ut+=1)Je[ut]=at[ut+rt]},Ye.copyToChannel=(Je,tt,st=0)=>{const rt=Xe(st),it=Xe(tt);if(it>=Ye.numberOfChannels)throw Ke();const ot=Ye.length,at=Ye.getChannelData(it),lt=Je.length;for(let ut=rt<0?-rt:0;ut+rt<ot&&ut<lt;ut+=1)at[ut+rt]=Je[ut]}},createWrapAudioBufferCopyChannelMethodsOutOfBounds=Xe=>Ke=>{Ke.copyFromChannel=(Ye=>(Je,tt,st=0)=>{const rt=Xe(st),it=Xe(tt);if(rt<Ke.length)return Ye.call(Ke,Je,it,rt)})(Ke.copyFromChannel),Ke.copyToChannel=(Ye=>(Je,tt,st=0)=>{const rt=Xe(st),it=Xe(tt);if(rt<Ke.length)return Ye.call(Ke,Je,it,rt)})(Ke.copyToChannel)},createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer=Xe=>(Ke,Ye)=>{const Je=Ye.createBuffer(1,1,44100);Ke.buffer===null&&(Ke.buffer=Je),Xe(Ke,"buffer",tt=>()=>{const st=tt.call(Ke);return st===Je?null:st},tt=>st=>tt.call(Ke,st===null?Je:st))},createWrapChannelMergerNode=(Xe,Ke)=>(Ye,Je)=>{Je.channelCount=1,Je.channelCountMode="explicit",Object.defineProperty(Je,"channelCount",{get:()=>1,set:()=>{throw Xe()}}),Object.defineProperty(Je,"channelCountMode",{get:()=>"explicit",set:()=>{throw Xe()}});const tt=Ye.createBufferSource();Ke(Je,()=>{const it=Je.numberOfInputs;for(let ot=0;ot<it;ot+=1)tt.connect(Je,0,ot)},()=>tt.disconnect(Je))},getFirstSample=(Xe,Ke,Ye)=>Xe.copyFromChannel===void 0?Xe.getChannelData(Ye)[0]:(Xe.copyFromChannel(Ke,Ye),Ke[0]),isDCCurve=Xe=>{if(Xe===null)return!1;const Ke=Xe.length;return Ke%2!==0?Xe[Math.floor(Ke/2)]!==0:Xe[Ke/2-1]+Xe[Ke/2]!==0},overwriteAccessors=(Xe,Ke,Ye,Je)=>{let tt=Xe;for(;!tt.hasOwnProperty(Ke);)tt=Object.getPrototypeOf(tt);const{get:st,set:rt}=Object.getOwnPropertyDescriptor(tt,Ke);Object.defineProperty(Xe,Ke,{get:Ye(st),set:Je(rt)})},sanitizeAudioWorkletNodeOptions=Xe=>({...Xe,outputChannelCount:Xe.outputChannelCount!==void 0?Xe.outputChannelCount:Xe.numberOfInputs===1&&Xe.numberOfOutputs===1?[Xe.channelCount]:Array.from({length:Xe.numberOfOutputs},()=>1)}),sanitizeChannelSplitterOptions=Xe=>({...Xe,channelCount:Xe.numberOfOutputs}),sanitizePeriodicWaveOptions=Xe=>{const{imag:Ke,real:Ye}=Xe;return Ke===void 0?Ye===void 0?{...Xe,imag:[0,0],real:[0,0]}:{...Xe,imag:Array.from(Ye,()=>0),real:Ye}:Ye===void 0?{...Xe,imag:Ke,real:Array.from(Ke,()=>0)}:{...Xe,imag:Ke,real:Ye}},setValueAtTimeUntilPossible=(Xe,Ke,Ye)=>{try{Xe.setValueAtTime(Ke,Ye)}catch(Je){if(Je.code!==9)throw Je;setValueAtTimeUntilPossible(Xe,Ke,Ye+1e-7)}},testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport=Xe=>{const Ke=Xe.createBufferSource();Ke.start();try{Ke.start()}catch{return!0}return!1},testAudioBufferSourceNodeStartMethodOffsetClampingSupport=Xe=>{const Ke=Xe.createBufferSource(),Ye=Xe.createBuffer(1,1,44100);Ke.buffer=Ye;try{Ke.start(0,1)}catch{return!1}return!0},testAudioBufferSourceNodeStopMethodNullifiedBufferSupport=Xe=>{const Ke=Xe.createBufferSource();Ke.start();try{Ke.stop()}catch{return!1}return!0},testAudioScheduledSourceNodeStartMethodNegativeParametersSupport=Xe=>{const Ke=Xe.createOscillator();try{Ke.start(-1)}catch(Ye){return Ye instanceof RangeError}return!1},testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=Xe=>{const Ke=Xe.createBuffer(1,1,44100),Ye=Xe.createBufferSource();Ye.buffer=Ke,Ye.start(),Ye.stop();try{return Ye.stop(),!0}catch{return!1}},testAudioScheduledSourceNodeStopMethodNegativeParametersSupport=Xe=>{const Ke=Xe.createOscillator();try{Ke.stop(-1)}catch(Ye){return Ye instanceof RangeError}return!1},testAudioWorkletNodeOptionsClonability=Xe=>{const{port1:Ke,port2:Ye}=new MessageChannel;try{Ke.postMessage(Xe)}finally{Ke.close(),Ye.close()}},testDomExceptionConstructorSupport=()=>{try{new DOMException}catch{return!1}return!0},testTransferablesSupport=()=>new Promise(Xe=>{const Ke=new ArrayBuffer(0),{port1:Ye,port2:Je}=new MessageChannel;Ye.onmessage=({data:tt})=>Xe(tt!==null),Je.postMessage(Ke,[Ke])}),wrapAudioBufferSourceNodeStartMethodOffsetClamping=Xe=>{Xe.start=(Ke=>(Ye=0,Je=0,tt)=>{const st=Xe.buffer,rt=st===null?Je:Math.min(st.duration,Je);st!==null&&rt>st.duration-.5/Xe.context.sampleRate?Ke.call(Xe,Ye,0,0):Ke.call(Xe,Ye,rt,tt)})(Xe.start)},wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=(Xe,Ke)=>{const Ye=Ke.createGain();Xe.connect(Ye);const Je=(tt=>()=>{tt.call(Xe,Ye),Xe.removeEventListener("ended",Je)})(Xe.disconnect);Xe.addEventListener("ended",Je),interceptConnections(Xe,Ye),Xe.stop=(tt=>{let st=!1;return(rt=0)=>{if(st)try{tt.call(Xe,rt)}catch{Ye.gain.setValueAtTime(0,rt)}else tt.call(Xe,rt),st=!0}})(Xe.stop)},wrapEventListener=(Xe,Ke)=>Ye=>{const Je={value:Xe};return Object.defineProperties(Ye,{currentTarget:Je,target:Je}),typeof Ke=="function"?Ke.call(Xe,Ye):Ke.handleEvent.call(Xe,Ye)},addActiveInputConnectionToAudioNode=createAddActiveInputConnectionToAudioNode(insertElementInSet),addPassiveInputConnectionToAudioNode=createAddPassiveInputConnectionToAudioNode(insertElementInSet),deleteActiveInputConnectionToAudioNode=createDeleteActiveInputConnectionToAudioNode(pickElementFromSet),audioNodeTailTimeStore=new WeakMap,getAudioNodeTailTime=createGetAudioNodeTailTime(audioNodeTailTimeStore),cacheTestResult=createCacheTestResult(new Map,new WeakMap),window$1=createWindow(),createNativeAnalyserNode=createNativeAnalyserNodeFactory(cacheTestResult,createIndexSizeError),getAudioNodeRenderer=createGetAudioNodeRenderer(getAudioNodeConnections),renderInputsOfAudioNode=createRenderInputsOfAudioNode(getAudioNodeConnections,getAudioNodeRenderer,isPartOfACycle),createAnalyserNodeRenderer=createAnalyserNodeRendererFactory(createNativeAnalyserNode,getNativeAudioNode,renderInputsOfAudioNode),getNativeContext=createGetNativeContext(CONTEXT_STORE),nativeOfflineAudioContextConstructor=createNativeOfflineAudioContextConstructor(window$1),isNativeOfflineAudioContext=createIsNativeOfflineAudioContext(nativeOfflineAudioContextConstructor),audioParamAudioNodeStore=new WeakMap,eventTargetConstructor=createEventTargetConstructor(wrapEventListener),nativeAudioContextConstructor=createNativeAudioContextConstructor(window$1),isNativeAudioContext=createIsNativeAudioContext(nativeAudioContextConstructor),isNativeAudioNode=createIsNativeAudioNode(window$1),isNativeAudioParam=createIsNativeAudioParam(window$1),nativeAudioWorkletNodeConstructor=createNativeAudioWorkletNodeConstructor(window$1),audioNodeConstructor=createAudioNodeConstructor(createAddAudioNodeConnections(AUDIO_NODE_CONNECTIONS_STORE),createAddConnectionToAudioNode(addActiveInputConnectionToAudioNode,addPassiveInputConnectionToAudioNode,connectNativeAudioNodeToNativeAudioNode,deleteActiveInputConnectionToAudioNode,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getAudioNodeTailTime,getEventListenersOfAudioNode,getNativeAudioNode,insertElementInSet,isActiveAudioNode,isPartOfACycle,isPassiveAudioNode),cacheTestResult,createIncrementCycleCounterFactory(CYCLE_COUNTERS,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,isActiveAudioNode),createIndexSizeError,createInvalidAccessError,createNotSupportedError,createDecrementCycleCounter(connectNativeAudioNodeToNativeAudioNode,CYCLE_COUNTERS,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,getNativeContext,isActiveAudioNode,isNativeOfflineAudioContext),createDetectCycles(audioParamAudioNodeStore,getAudioNodeConnections,getValueForKey),eventTargetConstructor,getNativeContext,isNativeAudioContext,isNativeAudioNode,isNativeAudioParam,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor),analyserNodeConstructor=createAnalyserNodeConstructor(audioNodeConstructor,createAnalyserNodeRenderer,createIndexSizeError,createNativeAnalyserNode,getNativeContext,isNativeOfflineAudioContext),audioBufferStore=new WeakSet,nativeAudioBufferConstructor=createNativeAudioBufferConstructor(window$1),convertNumberToUnsignedLong=createConvertNumberToUnsignedLong(new Uint32Array(1)),wrapAudioBufferCopyChannelMethods=createWrapAudioBufferCopyChannelMethods(convertNumberToUnsignedLong,createIndexSizeError),wrapAudioBufferCopyChannelMethodsOutOfBounds=createWrapAudioBufferCopyChannelMethodsOutOfBounds(convertNumberToUnsignedLong),audioBufferConstructor=createAudioBufferConstructor(audioBufferStore,cacheTestResult,createNotSupportedError,nativeAudioBufferConstructor,nativeOfflineAudioContextConstructor,createTestAudioBufferConstructorSupport(nativeAudioBufferConstructor),wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),addSilentConnection=createAddSilentConnection(createNativeGainNode),renderInputsOfAudioParam=createRenderInputsOfAudioParam(getAudioNodeRenderer,getAudioParamConnections,isPartOfACycle),connectAudioParam=createConnectAudioParam(renderInputsOfAudioParam),createNativeAudioBufferSourceNode=createNativeAudioBufferSourceNodeFactory(addSilentConnection,cacheTestResult,testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,testAudioBufferSourceNodeStartMethodOffsetClampingSupport,testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioBufferSourceNodeStartMethodOffsetClamping,createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer(overwriteAccessors),wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),renderAutomation=createRenderAutomation(createGetAudioParamRenderer(getAudioParamConnections),renderInputsOfAudioParam),createAudioBufferSourceNodeRenderer=createAudioBufferSourceNodeRendererFactory(connectAudioParam,createNativeAudioBufferSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),createAudioParam=createAudioParamFactory(createAddAudioParamConnections(AUDIO_PARAM_CONNECTIONS_STORE),audioParamAudioNodeStore,AUDIO_PARAM_STORE,createAudioParamRenderer,createCancelAndHoldAutomationEvent,createCancelScheduledValuesAutomationEvent,createExponentialRampToValueAutomationEvent,createLinearRampToValueAutomationEvent,createSetTargetAutomationEvent,createSetValueAutomationEvent,createSetValueCurveAutomationEvent,nativeAudioContextConstructor,setValueAtTimeUntilPossible),audioBufferSourceNodeConstructor=createAudioBufferSourceNodeConstructor(audioNodeConstructor,createAudioBufferSourceNodeRenderer,createAudioParam,createInvalidStateError,createNativeAudioBufferSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),audioDestinationNodeConstructor=createAudioDestinationNodeConstructor(audioNodeConstructor,createAudioDestinationNodeRenderer,createIndexSizeError,createInvalidStateError,createNativeAudioDestinationNodeFactory(createNativeGainNode,overwriteAccessors),getNativeContext,isNativeOfflineAudioContext,renderInputsOfAudioNode),createBiquadFilterNodeRenderer=createBiquadFilterNodeRendererFactory(connectAudioParam,createNativeBiquadFilterNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),setAudioNodeTailTime=createSetAudioNodeTailTime(audioNodeTailTimeStore),biquadFilterNodeConstructor=createBiquadFilterNodeConstructor(audioNodeConstructor,createAudioParam,createBiquadFilterNodeRenderer,createInvalidAccessError,createNativeBiquadFilterNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),monitorConnections=createMonitorConnections(insertElementInSet,isNativeAudioNode),wrapChannelMergerNode=createWrapChannelMergerNode(createInvalidStateError,monitorConnections),createNativeChannelMergerNode=createNativeChannelMergerNodeFactory(nativeAudioContextConstructor,wrapChannelMergerNode),createChannelMergerNodeRenderer=createChannelMergerNodeRendererFactory(createNativeChannelMergerNode,getNativeAudioNode,renderInputsOfAudioNode),channelMergerNodeConstructor=createChannelMergerNodeConstructor(audioNodeConstructor,createChannelMergerNodeRenderer,createNativeChannelMergerNode,getNativeContext,isNativeOfflineAudioContext),createChannelSplitterNodeRenderer=createChannelSplitterNodeRendererFactory(createNativeChannelSplitterNode,getNativeAudioNode,renderInputsOfAudioNode),channelSplitterNodeConstructor=createChannelSplitterNodeConstructor(audioNodeConstructor,createChannelSplitterNodeRenderer,createNativeChannelSplitterNode,getNativeContext,isNativeOfflineAudioContext,sanitizeChannelSplitterOptions),createNativeConstantSourceNodeFaker=createNativeConstantSourceNodeFakerFactory(addSilentConnection,createNativeAudioBufferSourceNode,createNativeGainNode,monitorConnections),createNativeConstantSourceNode=createNativeConstantSourceNodeFactory(addSilentConnection,cacheTestResult,createNativeConstantSourceNodeFaker,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport),createConstantSourceNodeRenderer=createConstantSourceNodeRendererFactory(connectAudioParam,createNativeConstantSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),constantSourceNodeConstructor=createConstantSourceNodeConstructor(audioNodeConstructor,createAudioParam,createConstantSourceNodeRenderer,createNativeConstantSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createNativeConvolverNode=createNativeConvolverNodeFactory(createNotSupportedError,overwriteAccessors),createConvolverNodeRenderer=createConvolverNodeRendererFactory(createNativeConvolverNode,getNativeAudioNode,renderInputsOfAudioNode),convolverNodeConstructor=createConvolverNodeConstructor(audioNodeConstructor,createConvolverNodeRenderer,createNativeConvolverNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createDelayNodeRenderer=createDelayNodeRendererFactory(connectAudioParam,createNativeDelayNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),delayNodeConstructor=createDelayNodeConstructor(audioNodeConstructor,createAudioParam,createDelayNodeRenderer,createNativeDelayNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativeDynamicsCompressorNode=createNativeDynamicsCompressorNodeFactory(createNotSupportedError),createDynamicsCompressorNodeRenderer=createDynamicsCompressorNodeRendererFactory(connectAudioParam,createNativeDynamicsCompressorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),dynamicsCompressorNodeConstructor=createDynamicsCompressorNodeConstructor(audioNodeConstructor,createAudioParam,createDynamicsCompressorNodeRenderer,createNativeDynamicsCompressorNode,createNotSupportedError,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createGainNodeRenderer=createGainNodeRendererFactory(connectAudioParam,createNativeGainNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),gainNodeConstructor=createGainNodeConstructor(audioNodeConstructor,createAudioParam,createGainNodeRenderer,createNativeGainNode,getNativeContext,isNativeOfflineAudioContext),createNativeIIRFilterNodeFaker=createNativeIIRFilterNodeFakerFactory(createInvalidAccessError,createInvalidStateError,createNativeScriptProcessorNode,createNotSupportedError),renderNativeOfflineAudioContext=createRenderNativeOfflineAudioContext(cacheTestResult,createNativeGainNode,createNativeScriptProcessorNode,createTestOfflineAudioContextCurrentTimeSupport(createNativeGainNode,nativeOfflineAudioContextConstructor)),createIIRFilterNodeRenderer=createIIRFilterNodeRendererFactory(createNativeAudioBufferSourceNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderInputsOfAudioNode,renderNativeOfflineAudioContext),createNativeIIRFilterNode=createNativeIIRFilterNodeFactory(createNativeIIRFilterNodeFaker),iIRFilterNodeConstructor=createIIRFilterNodeConstructor(audioNodeConstructor,createNativeIIRFilterNode,createIIRFilterNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createAudioListener=createAudioListenerFactory(createAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeScriptProcessorNode,createNotSupportedError,getFirstSample,isNativeOfflineAudioContext,overwriteAccessors),unrenderedAudioWorkletNodeStore=new WeakMap,minimalBaseAudioContextConstructor=createMinimalBaseAudioContextConstructor(audioDestinationNodeConstructor,createAudioListener,eventTargetConstructor,isNativeOfflineAudioContext,unrenderedAudioWorkletNodeStore,wrapEventListener),createNativeOscillatorNode=createNativeOscillatorNodeFactory(addSilentConnection,cacheTestResult,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),createOscillatorNodeRenderer=createOscillatorNodeRendererFactory(connectAudioParam,createNativeOscillatorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),oscillatorNodeConstructor=createOscillatorNodeConstructor(audioNodeConstructor,createAudioParam,createNativeOscillatorNode,createOscillatorNodeRenderer,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createConnectedNativeAudioBufferSourceNode=createConnectedNativeAudioBufferSourceNodeFactory(createNativeAudioBufferSourceNode),createNativeWaveShaperNodeFaker=createNativeWaveShaperNodeFakerFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeGainNode,isDCCurve,monitorConnections),createNativeWaveShaperNode=createNativeWaveShaperNodeFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeWaveShaperNodeFaker,isDCCurve,monitorConnections,nativeAudioContextConstructor,overwriteAccessors),createNativePannerNodeFaker=createNativePannerNodeFakerFactory(connectNativeAudioNodeToNativeAudioNode,createInvalidStateError,createNativeChannelMergerNode,createNativeGainNode,createNativeScriptProcessorNode,createNativeWaveShaperNode,createNotSupportedError,disconnectNativeAudioNodeFromNativeAudioNode,getFirstSample,monitorConnections),createNativePannerNode=createNativePannerNodeFactory(createNativePannerNodeFaker),createPannerNodeRenderer=createPannerNodeRendererFactory(connectAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeGainNode,createNativePannerNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),pannerNodeConstructor=createPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativePannerNode,createPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativePeriodicWave=createNativePeriodicWaveFactory(createIndexSizeError),periodicWaveConstructor=createPeriodicWaveConstructor(createNativePeriodicWave,getNativeContext,new WeakSet,sanitizePeriodicWaveOptions),nativeStereoPannerNodeFakerFactory=createNativeStereoPannerNodeFakerFactory(createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeGainNode,createNativeWaveShaperNode,createNotSupportedError,monitorConnections),createNativeStereoPannerNode=createNativeStereoPannerNodeFactory(nativeStereoPannerNodeFakerFactory,createNotSupportedError),createStereoPannerNodeRenderer=createStereoPannerNodeRendererFactory(connectAudioParam,createNativeStereoPannerNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),stereoPannerNodeConstructor=createStereoPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativeStereoPannerNode,createStereoPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext),createWaveShaperNodeRenderer=createWaveShaperNodeRendererFactory(createNativeWaveShaperNode,getNativeAudioNode,renderInputsOfAudioNode),waveShaperNodeConstructor=createWaveShaperNodeConstructor(audioNodeConstructor,createInvalidStateError,createNativeWaveShaperNode,createWaveShaperNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),isSecureContext=createIsSecureContext(window$1),exposeCurrentFrameAndCurrentTime=createExposeCurrentFrameAndCurrentTime(window$1),backupOfflineAudioContextStore=new WeakMap,getOrCreateBackupOfflineAudioContext=createGetOrCreateBackupOfflineAudioContext(backupOfflineAudioContextStore,nativeOfflineAudioContextConstructor),addAudioWorkletModule=isSecureContext?createAddAudioWorkletModule(cacheTestResult,createNotSupportedError,createEvaluateSource(window$1),exposeCurrentFrameAndCurrentTime,createFetchSource(createAbortError),getNativeContext,getOrCreateBackupOfflineAudioContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,new WeakMap,new WeakMap,createTestAudioWorkletProcessorPostMessageSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),window$1):void 0,isNativeContext=createIsNativeContext(isNativeAudioContext,isNativeOfflineAudioContext),decodeAudioData=createDecodeAudioData(audioBufferStore,cacheTestResult,createDataCloneError,createEncodingError,new WeakSet,getNativeContext,isNativeContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,testPromiseSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),baseAudioContextConstructor=createBaseAudioContextConstructor(addAudioWorkletModule,analyserNodeConstructor,audioBufferConstructor,audioBufferSourceNodeConstructor,biquadFilterNodeConstructor,channelMergerNodeConstructor,channelSplitterNodeConstructor,constantSourceNodeConstructor,convolverNodeConstructor,decodeAudioData,delayNodeConstructor,dynamicsCompressorNodeConstructor,gainNodeConstructor,iIRFilterNodeConstructor,minimalBaseAudioContextConstructor,oscillatorNodeConstructor,pannerNodeConstructor,periodicWaveConstructor,stereoPannerNodeConstructor,waveShaperNodeConstructor),mediaElementAudioSourceNodeConstructor=createMediaElementAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaElementAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioDestinationNodeConstructor=createMediaStreamAudioDestinationNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioDestinationNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioSourceNodeConstructor=createMediaStreamAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),createNativeMediaStreamTrackAudioSourceNode=createNativeMediaStreamTrackAudioSourceNodeFactory(createInvalidStateError,isNativeOfflineAudioContext),mediaStreamTrackAudioSourceNodeConstructor=createMediaStreamTrackAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamTrackAudioSourceNode,getNativeContext),audioContextConstructor=createAudioContextConstructor(baseAudioContextConstructor,createInvalidStateError,createNotSupportedError,createUnknownError,mediaElementAudioSourceNodeConstructor,mediaStreamAudioDestinationNodeConstructor,mediaStreamAudioSourceNodeConstructor,mediaStreamTrackAudioSourceNodeConstructor,nativeAudioContextConstructor),getUnrenderedAudioWorkletNodes=createGetUnrenderedAudioWorkletNodes(unrenderedAudioWorkletNodeStore),addUnrenderedAudioWorkletNode=createAddUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),connectMultipleOutputs=createConnectMultipleOutputs(createIndexSizeError),deleteUnrenderedAudioWorkletNode=createDeleteUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),disconnectMultipleOutputs=createDisconnectMultipleOutputs(createIndexSizeError),activeAudioWorkletNodeInputsStore=new WeakMap,getActiveAudioWorkletNodeInputs=createGetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore,getValueForKey),createNativeAudioWorkletNodeFaker=createNativeAudioWorkletNodeFakerFactory(connectMultipleOutputs,createIndexSizeError,createInvalidStateError,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,createNativeScriptProcessorNode,createNotSupportedError,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getActiveAudioWorkletNodeInputs,monitorConnections),createNativeAudioWorkletNode=createNativeAudioWorkletNodeFactory(createInvalidStateError,createNativeAudioWorkletNodeFaker,createNativeGainNode,createNotSupportedError,monitorConnections),createAudioWorkletNodeRenderer=createAudioWorkletNodeRendererFactory(connectAudioParam,connectMultipleOutputs,createNativeAudioBufferSourceNode,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,deleteUnrenderedAudioWorkletNode,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getNativeAudioNode,nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),getBackupOfflineAudioContext=createGetBackupOfflineAudioContext(backupOfflineAudioContextStore),setActiveAudioWorkletNodeInputs=createSetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore),audioWorkletNodeConstructor=isSecureContext?createAudioWorkletNodeConstructor(addUnrenderedAudioWorkletNode,audioNodeConstructor,createAudioParam,createAudioWorkletNodeRenderer,createNativeAudioWorkletNode,getAudioNodeConnections,getBackupOfflineAudioContext,getNativeContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,sanitizeAudioWorkletNodeOptions,setActiveAudioWorkletNodeInputs,testAudioWorkletNodeOptionsClonability,wrapEventListener):void 0,createNativeOfflineAudioContext=createCreateNativeOfflineAudioContext(createNotSupportedError,nativeOfflineAudioContextConstructor),startRendering=createStartRendering(audioBufferStore,cacheTestResult,getAudioNodeRenderer,getUnrenderedAudioWorkletNodes,renderNativeOfflineAudioContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),offlineAudioContextConstructor=createOfflineAudioContextConstructor(baseAudioContextConstructor,cacheTestResult,createInvalidStateError,createNativeOfflineAudioContext,startRendering),isAnyAudioContext=createIsAnyAudioContext(CONTEXT_STORE,isNativeAudioContext),isAnyAudioNode=createIsAnyAudioNode(AUDIO_NODE_STORE,isNativeAudioNode),isAnyAudioParam=createIsAnyAudioParam(AUDIO_PARAM_STORE,isNativeAudioParam),isAnyOfflineAudioContext=createIsAnyOfflineAudioContext(CONTEXT_STORE,isNativeOfflineAudioContext),isSupported=()=>createIsSupportedPromise(cacheTestResult,createTestAudioBufferCopyChannelMethodsSubarraySupport(nativeOfflineAudioContextConstructor),createTestAudioContextCloseMethodSupport(nativeAudioContextConstructor),createTestAudioContextDecodeAudioDataMethodTypeErrorSupport(nativeOfflineAudioContextConstructor),createTestAudioContextOptionsSupport(nativeAudioContextConstructor),createTestAudioNodeConnectMethodSupport(nativeOfflineAudioContextConstructor),createTestAudioWorkletProcessorNoOutputsSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),createTestChannelMergerNodeChannelCountSupport(nativeOfflineAudioContextConstructor),createTestConstantSourceNodeAccurateSchedulingSupport(nativeOfflineAudioContextConstructor),createTestConvolverNodeBufferReassignabilitySupport(nativeOfflineAudioContextConstructor),createTestConvolverNodeChannelCountSupport(nativeOfflineAudioContextConstructor),testDomExceptionConstructorSupport,createTestIsSecureContextSupport(window$1),createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport(nativeAudioContextConstructor),createTestStereoPannerNodeDefaultValueSupport(nativeOfflineAudioContextConstructor),testTransferablesSupport);function assert(Xe,Ke){if(!Xe)throw new Error(Ke)}function assertRange(Xe,Ke,Ye=1/0){if(!(Ke<=Xe&&Xe<=Ye))throw new RangeError(`Value must be within [${Ke}, ${Ye}], got: ${Xe}`)}function assertContextRunning(Xe){!Xe.isOffline&&Xe.state!=="running"&&warn('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let defaultLogger=console;function setLogger(Xe){defaultLogger=Xe}function log(...Xe){defaultLogger.log(...Xe)}function warn(...Xe){defaultLogger.warn(...Xe)}const Debug=Object.freeze(Object.defineProperty({__proto__:null,assert,assertContextRunning,assertRange,log,setLogger,warn},Symbol.toStringTag,{value:"Module"}));function isUndef(Xe){return typeof Xe>"u"}function isDefined(Xe){return!isUndef(Xe)}function isFunction$2(Xe){return typeof Xe=="function"}function isNumber$2(Xe){return typeof Xe=="number"}function isObject$4(Xe){return Object.prototype.toString.call(Xe)==="[object Object]"&&Xe.constructor===Object}function isBoolean$1(Xe){return typeof Xe=="boolean"}function isArray$8(Xe){return Array.isArray(Xe)}function isString$1(Xe){return typeof Xe=="string"}function isNote(Xe){return isString$1(Xe)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(Xe)}function createAudioContext(Xe){return new audioContextConstructor(Xe)}function createOfflineAudioContext(Xe,Ke,Ye){return new offlineAudioContextConstructor(Xe,Ke,Ye)}const theWindow=typeof self=="object"?self:null,hasAudioContext=theWindow&&(theWindow.hasOwnProperty("AudioContext")||theWindow.hasOwnProperty("webkitAudioContext"));function createAudioWorkletNode(Xe,Ke,Ye){return assert(isDefined(audioWorkletNodeConstructor),"This node only works in a secure context (https or localhost)"),new audioWorkletNodeConstructor(Xe,Ke,Ye)}class Ticker{constructor(Ke,Ye,Je){this._callback=Ke,this._type=Ye,this._updateInterval=Je,this._createClock()}_createWorker(){const Ke=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),Ye=URL.createObjectURL(Ke),Je=new Worker(Ye);Je.onmessage=this._callback.bind(this),this._worker=Je}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(Ke){this._updateInterval=Math.max(Ke,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(Ke*1e3,1))}get type(){return this._type}set type(Ke){this._disposeClock(),this._type=Ke,this._createClock()}dispose(){this._disposeClock()}}function isAudioParam(Xe){return isAnyAudioParam(Xe)}function isAudioNode(Xe){return isAnyAudioNode(Xe)}function isOfflineAudioContext(Xe){return isAnyOfflineAudioContext(Xe)}function isAudioContext(Xe){return isAnyAudioContext(Xe)}function isAudioBuffer(Xe){return Xe instanceof AudioBuffer}function noCopy(Xe,Ke){return Xe==="value"||isAudioParam(Ke)||isAudioNode(Ke)||isAudioBuffer(Ke)}function deepMerge(Xe,...Ke){if(!Ke.length)return Xe;const Ye=Ke.shift();if(isObject$4(Xe)&&isObject$4(Ye))for(const Je in Ye)noCopy(Je,Ye[Je])?Xe[Je]=Ye[Je]:isObject$4(Ye[Je])?(Xe[Je]||Object.assign(Xe,{[Je]:{}}),deepMerge(Xe[Je],Ye[Je])):Object.assign(Xe,{[Je]:Ye[Je]});return deepMerge(Xe,...Ke)}function deepEquals(Xe,Ke){return Xe.length===Ke.length&&Xe.every((Ye,Je)=>Ke[Je]===Ye)}function optionsFromArguments(Xe,Ke,Ye=[],Je){const tt={},st=Array.from(Ke);if(isObject$4(st[0])&&Je&&!Reflect.has(st[0],Je)&&(Object.keys(st[0]).some(it=>Reflect.has(Xe,it))||(deepMerge(tt,{[Je]:st[0]}),Ye.splice(Ye.indexOf(Je),1),st.shift())),st.length===1&&isObject$4(st[0]))deepMerge(tt,st[0]);else for(let rt=0;rt<Ye.length;rt++)isDefined(st[rt])&&(tt[Ye[rt]]=st[rt]);return deepMerge(Xe,tt)}function getDefaultsFromInstance(Xe){return Xe.constructor.getDefaults()}function defaultArg(Xe,Ke){return isUndef(Xe)?Ke:Xe}function omitFromObject(Xe,Ke){return Ke.forEach(Ye=>{Reflect.has(Xe,Ye)&&delete Xe[Ye]}),Xe}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */let Tone$1=class{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...Ke){(this.debug||theWindow&&this.toString()===theWindow.TONE_DEBUG_CLASS)&&log(this,...Ke)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}};Tone$1.version=version;const EPSILON=1e-6;function GT(Xe,Ke){return Xe>Ke+EPSILON}function GTE(Xe,Ke){return GT(Xe,Ke)||EQ(Xe,Ke)}function LT(Xe,Ke){return Xe+EPSILON<Ke}function EQ(Xe,Ke){return Math.abs(Xe-Ke)<EPSILON}function clamp(Xe,Ke,Ye){return Math.max(Math.min(Xe,Ye),Ke)}class Timeline extends Tone$1{constructor(){super(),this.name="Timeline",this._timeline=[];const Ke=optionsFromArguments(Timeline.getDefaults(),arguments,["memory"]);this.memory=Ke.memory,this.increasing=Ke.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(Ke){if(assert(Reflect.has(Ke,"time"),"Timeline: events must have a time attribute"),Ke.time=Ke.time.valueOf(),this.increasing&&this.length){const Ye=this._timeline[this.length-1];assert(GTE(Ke.time,Ye.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(Ke)}else{const Ye=this._search(Ke.time);this._timeline.splice(Ye+1,0,Ke)}if(this.length>this.memory){const Ye=this.length-this.memory;this._timeline.splice(0,Ye)}return this}remove(Ke){const Ye=this._timeline.indexOf(Ke);return Ye!==-1&&this._timeline.splice(Ye,1),this}get(Ke,Ye="time"){const Je=this._search(Ke,Ye);return Je!==-1?this._timeline[Je]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(Ke,Ye="time"){const Je=this._search(Ke,Ye);return Je+1<this._timeline.length?this._timeline[Je+1]:null}getBefore(Ke){const Ye=this._timeline.length;if(Ye>0&&this._timeline[Ye-1].time<Ke)return this._timeline[Ye-1];const Je=this._search(Ke);return Je-1>=0?this._timeline[Je-1]:null}cancel(Ke){if(this._timeline.length>1){let Ye=this._search(Ke);if(Ye>=0)if(EQ(this._timeline[Ye].time,Ke)){for(let Je=Ye;Je>=0&&EQ(this._timeline[Je].time,Ke);Je--)Ye=Je;this._timeline=this._timeline.slice(0,Ye)}else this._timeline=this._timeline.slice(0,Ye+1);else this._timeline=[]}else this._timeline.length===1&&GTE(this._timeline[0].time,Ke)&&(this._timeline=[]);return this}cancelBefore(Ke){const Ye=this._search(Ke);return Ye>=0&&(this._timeline=this._timeline.slice(Ye+1)),this}previousEvent(Ke){const Ye=this._timeline.indexOf(Ke);return Ye>0?this._timeline[Ye-1]:null}_search(Ke,Ye="time"){if(this._timeline.length===0)return-1;let Je=0;const tt=this._timeline.length;let st=tt;if(tt>0&&this._timeline[tt-1][Ye]<=Ke)return tt-1;for(;Je<st;){let rt=Math.floor(Je+(st-Je)/2);const it=this._timeline[rt],ot=this._timeline[rt+1];if(EQ(it[Ye],Ke)){for(let at=rt;at<this._timeline.length;at++){const lt=this._timeline[at];if(EQ(lt[Ye],Ke))rt=at;else break}return rt}else{if(LT(it[Ye],Ke)&&GT(ot[Ye],Ke))return rt;GT(it[Ye],Ke)?st=rt:Je=rt+1}}return-1}_iterate(Ke,Ye=0,Je=this._timeline.length-1){this._timeline.slice(Ye,Je+1).forEach(Ke)}forEach(Ke){return this._iterate(Ke),this}forEachBefore(Ke,Ye){const Je=this._search(Ke);return Je!==-1&&this._iterate(Ye,0,Je),this}forEachAfter(Ke,Ye){const Je=this._search(Ke);return this._iterate(Ye,Je+1),this}forEachBetween(Ke,Ye,Je){let tt=this._search(Ke),st=this._search(Ye);return tt!==-1&&st!==-1?(this._timeline[tt].time!==Ke&&(tt+=1),this._timeline[st].time===Ye&&(st-=1),this._iterate(Je,tt,st)):tt===-1&&this._iterate(Je,0,st),this}forEachFrom(Ke,Ye){let Je=this._search(Ke);for(;Je>=0&&this._timeline[Je].time>=Ke;)Je--;return this._iterate(Ye,Je+1),this}forEachAtTime(Ke,Ye){const Je=this._search(Ke);if(Je!==-1&&EQ(this._timeline[Je].time,Ke)){let tt=Je;for(let st=Je;st>=0&&EQ(this._timeline[st].time,Ke);st--)tt=st;this._iterate(st=>{Ye(st)},tt,Je)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const notifyNewContext=[];function onContextInit(Xe){notifyNewContext.push(Xe)}function initializeContext(Xe){notifyNewContext.forEach(Ke=>Ke(Xe))}const notifyCloseContext=[];function onContextClose(Xe){notifyCloseContext.push(Xe)}function closeContext(Xe){notifyCloseContext.forEach(Ke=>Ke(Xe))}class Emitter extends Tone$1{constructor(){super(...arguments),this.name="Emitter"}on(Ke,Ye){return Ke.split(/\W+/).forEach(tt=>{isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(tt)||(this._events[tt]=[]),this._events[tt].push(Ye)}),this}once(Ke,Ye){const Je=(...tt)=>{Ye(...tt),this.off(Ke,Je)};return this.on(Ke,Je),this}off(Ke,Ye){return Ke.split(/\W+/).forEach(tt=>{if(isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(Ke))if(isUndef(Ye))this._events[Ke]=[];else{const st=this._events[Ke];for(let rt=st.length-1;rt>=0;rt--)st[rt]===Ye&&st.splice(rt,1)}}),this}emit(Ke,...Ye){if(this._events&&this._events.hasOwnProperty(Ke)){const Je=this._events[Ke].slice(0);for(let tt=0,st=Je.length;tt<st;tt++)Je[tt].apply(this,Ye)}return this}static mixin(Ke){["on","once","off","emit"].forEach(Ye=>{const Je=Object.getOwnPropertyDescriptor(Emitter.prototype,Ye);Object.defineProperty(Ke.prototype,Ye,Je)})}dispose(){return super.dispose(),this._events=void 0,this}}class BaseContext extends Emitter{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Context extends BaseContext{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Timeline,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const Ke=optionsFromArguments(Context.getDefaults(),arguments,["context"]);Ke.context?this._context=Ke.context:this._context=createAudioContext({latencyHint:Ke.latencyHint}),this._ticker=new Ticker(this.emit.bind(this,"tick"),Ke.clockSource,Ke.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(Ke.latencyHint),this.lookAhead=Ke.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(initializeContext(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(Ke,Ye,Je){return this._context.createBuffer(Ke,Ye,Je)}createChannelMerger(Ke){return this._context.createChannelMerger(Ke)}createChannelSplitter(Ke){return this._context.createChannelSplitter(Ke)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(Ke){return this._context.createDelay(Ke)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(Ke,Ye){return this._context.createIIRFilter(Ke,Ye)}createPanner(){return this._context.createPanner()}createPeriodicWave(Ke,Ye,Je){return this._context.createPeriodicWave(Ke,Ye,Je)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(Ke){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(Ke)}createMediaElementSource(Ke){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(Ke)}createMediaStreamDestination(){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(Ke){return this._context.decodeAudioData(Ke)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(Ke){assert(!this._initialized,"The listener cannot be set after initialization."),this._listener=Ke}get transport(){return this.initialize(),this._transport}set transport(Ke){assert(!this._initialized,"The transport cannot be set after initialization."),this._transport=Ke}get draw(){return this.initialize(),this._draw}set draw(Ke){assert(!this._initialized,"Draw cannot be set after initialization."),this._draw=Ke}get destination(){return this.initialize(),this._destination}set destination(Ke){assert(!this._initialized,"The destination cannot be set after initialization."),this._destination=Ke}createAudioWorkletNode(Ke,Ye){return createAudioWorkletNode(this.rawContext,Ke,Ye)}addAudioWorkletModule(Ke,Ye){return __awaiter$1(this,void 0,void 0,function*(){assert(isDefined(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(Ye)||this._workletModules.set(Ye,this.rawContext.audioWorklet.addModule(Ke)),yield this._workletModules.get(Ye)})}workletsAreReady(){return __awaiter$1(this,void 0,void 0,function*(){const Ke=[];this._workletModules.forEach(Ye=>Ke.push(Ye)),yield Promise.all(Ke)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(Ke){this._ticker.updateInterval=Ke}get clockSource(){return this._ticker.type}set clockSource(Ke){this._ticker.type=Ke}get latencyHint(){return this._latencyHint}_setLatencyHint(Ke){let Ye=0;if(this._latencyHint=Ke,isString$1(Ke))switch(Ke){case"interactive":Ye=.1;break;case"playback":Ye=.5;break;case"balanced":Ye=.25;break}this.lookAhead=Ye,this.updateInterval=Ye/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return isAudioContext(this._context)?this._context.resume():Promise.resolve()}close(){return __awaiter$1(this,void 0,void 0,function*(){isAudioContext(this._context)&&(yield this._context.close()),this._initialized&&closeContext(this)})}getConstant(Ke){if(this._constants.has(Ke))return this._constants.get(Ke);{const Ye=this._context.createBuffer(1,128,this._context.sampleRate),Je=Ye.getChannelData(0);for(let st=0;st<Je.length;st++)Je[st]=Ke;const tt=this._context.createBufferSource();return tt.channelCount=1,tt.channelCountMode="explicit",tt.buffer=Ye,tt.loop=!0,tt.start(0),this._constants.set(Ke,tt),tt}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(Ke=>this._constants[Ke].disconnect()),this}_timeoutLoop(){const Ke=this.now();let Ye=this._timeouts.peek();for(;this._timeouts.length&&Ye&&Ye.time<=Ke;)Ye.callback(),this._timeouts.shift(),Ye=this._timeouts.peek()}setTimeout(Ke,Ye){this._timeoutIds++;const Je=this.now();return this._timeouts.add({callback:Ke,id:this._timeoutIds,time:Je+Ye}),this._timeoutIds}clearTimeout(Ke){return this._timeouts.forEach(Ye=>{Ye.id===Ke&&this._timeouts.remove(Ye)}),this}clearInterval(Ke){return this.clearTimeout(Ke)}setInterval(Ke,Ye){const Je=++this._timeoutIds,tt=()=>{const st=this.now();this._timeouts.add({callback:()=>{Ke(),tt()},id:Je,time:st+Ye})};return tt(),Je}}class DummyContext extends BaseContext{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(Ke,Ye,Je){return{}}createChannelMerger(Ke){return{}}createChannelSplitter(Ke){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(Ke){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(Ke,Ye){return{}}createPanner(){return{}}createPeriodicWave(Ke,Ye,Je){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(Ke){return{}}createMediaElementSource(Ke){return{}}createMediaStreamDestination(){return{}}decodeAudioData(Ke){return Promise.resolve({})}createAudioWorkletNode(Ke,Ye){return{}}get rawContext(){return{}}addAudioWorkletModule(Ke,Ye){return __awaiter$1(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(Ke,Ye){return 0}clearTimeout(Ke){return this}setInterval(Ke,Ye){return 0}clearInterval(Ke){return this}getConstant(Ke){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(Ke){}get destination(){return{}}set destination(Ke){}now(){return 0}immediate(){return 0}}function readOnly(Xe,Ke){isArray$8(Ke)?Ke.forEach(Ye=>readOnly(Xe,Ye)):Object.defineProperty(Xe,Ke,{enumerable:!0,writable:!1})}function writable(Xe,Ke){isArray$8(Ke)?Ke.forEach(Ye=>writable(Xe,Ye)):Object.defineProperty(Xe,Ke,{writable:!0})}const noOp=()=>{};class ToneAudioBuffer extends Tone$1{constructor(){super(),this.name="ToneAudioBuffer",this.onload=noOp;const Ke=optionsFromArguments(ToneAudioBuffer.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=Ke.reverse,this.onload=Ke.onload,Ke.url&&isAudioBuffer(Ke.url)||Ke.url instanceof ToneAudioBuffer?this.set(Ke.url):isString$1(Ke.url)&&this.load(Ke.url).catch(Ke.onerror)}static getDefaults(){return{onerror:noOp,onload:noOp,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:getContext().sampleRate}set(Ke){return Ke instanceof ToneAudioBuffer?Ke.loaded?this._buffer=Ke.get():Ke.onload=()=>{this.set(Ke),this.onload(this)}:this._buffer=Ke,this._reversed&&this._reverse(),this}get(){return this._buffer}load(Ke){return __awaiter$1(this,void 0,void 0,function*(){const Ye=ToneAudioBuffer.load(Ke).then(Je=>{this.set(Je),this.onload(this)});ToneAudioBuffer.downloads.push(Ye);try{yield Ye}finally{const Je=ToneAudioBuffer.downloads.indexOf(Ye);ToneAudioBuffer.downloads.splice(Je,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(Ke){const Ye=isArray$8(Ke)&&Ke[0].length>0,Je=Ye?Ke.length:1,tt=Ye?Ke[0].length:Ke.length,st=getContext(),rt=st.createBuffer(Je,tt,st.sampleRate),it=!Ye&&Je===1?[Ke]:Ke;for(let ot=0;ot<Je;ot++)rt.copyToChannel(it[ot],ot);return this._buffer=rt,this}toMono(Ke){if(isNumber$2(Ke))this.fromArray(this.toArray(Ke));else{let Ye=new Float32Array(this.length);const Je=this.numberOfChannels;for(let tt=0;tt<Je;tt++){const st=this.toArray(tt);for(let rt=0;rt<st.length;rt++)Ye[rt]+=st[rt]}Ye=Ye.map(tt=>tt/Je),this.fromArray(Ye)}return this}toArray(Ke){if(isNumber$2(Ke))return this.getChannelData(Ke);if(this.numberOfChannels===1)return this.toArray(0);{const Ye=[];for(let Je=0;Je<this.numberOfChannels;Je++)Ye[Je]=this.getChannelData(Je);return Ye}}getChannelData(Ke){return this._buffer?this._buffer.getChannelData(Ke):new Float32Array(0)}slice(Ke,Ye=this.duration){const Je=Math.floor(Ke*this.sampleRate),tt=Math.floor(Ye*this.sampleRate);assert(Je<tt,"The start time must be less than the end time");const st=tt-Je,rt=getContext().createBuffer(this.numberOfChannels,st,this.sampleRate);for(let it=0;it<this.numberOfChannels;it++)rt.copyToChannel(this.getChannelData(it).subarray(Je,tt),it);return new ToneAudioBuffer(rt)}_reverse(){if(this.loaded)for(let Ke=0;Ke<this.numberOfChannels;Ke++)this.getChannelData(Ke).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(Ke){this._reversed!==Ke&&(this._reversed=Ke,this._reverse())}static fromArray(Ke){return new ToneAudioBuffer().fromArray(Ke)}static fromUrl(Ke){return __awaiter$1(this,void 0,void 0,function*(){return yield new ToneAudioBuffer().load(Ke)})}static load(Ke){return __awaiter$1(this,void 0,void 0,function*(){const Ye=Ke.match(/\[([^\]\[]+\|.+)\]$/);if(Ye){const it=Ye[1].split("|");let ot=it[0];for(const at of it)if(ToneAudioBuffer.supportsType(at)){ot=at;break}Ke=Ke.replace(Ye[0],ot)}const Je=ToneAudioBuffer.baseUrl===""||ToneAudioBuffer.baseUrl.endsWith("/")?ToneAudioBuffer.baseUrl:ToneAudioBuffer.baseUrl+"/",tt=yield fetch(Je+Ke);if(!tt.ok)throw new Error(`could not load url: ${Ke}`);const st=yield tt.arrayBuffer();return yield getContext().decodeAudioData(st)})}static supportsType(Ke){const Ye=Ke.split("."),Je=Ye[Ye.length-1];return document.createElement("audio").canPlayType("audio/"+Je)!==""}static loaded(){return __awaiter$1(this,void 0,void 0,function*(){for(yield Promise.resolve();ToneAudioBuffer.downloads.length;)yield ToneAudioBuffer.downloads[0]})}}ToneAudioBuffer.baseUrl="";ToneAudioBuffer.downloads=[];class OfflineContext extends Context{constructor(){super({clockSource:"offline",context:isOfflineAudioContext(arguments[0])?arguments[0]:createOfflineAudioContext(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:isOfflineAudioContext(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=isOfflineAudioContext(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(Ke){return __awaiter$1(this,void 0,void 0,function*(){let Ye=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,Ye++;const Je=Math.floor(this.sampleRate/128);Ke&&Ye%Je===0&&(yield new Promise(tt=>setTimeout(tt,1)))}})}render(Ke=!0){return __awaiter$1(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(Ke);const Ye=yield this._context.startRendering();return new ToneAudioBuffer(Ye)})}close(){return Promise.resolve()}}const dummyContext=new DummyContext;let globalContext=dummyContext;function getContext(){return globalContext===dummyContext&&hasAudioContext&&setContext(new Context),globalContext}function setContext(Xe){isAudioContext(Xe)?globalContext=new Context(Xe):isOfflineAudioContext(Xe)?globalContext=new OfflineContext(Xe):globalContext=Xe}function start(){return globalContext.resume()}if(theWindow&&!theWindow.TONE_SILENCE_LOGGING){const Ke=` * Tone.js v${version} * `;console.log(`%c${Ke}`,"background: #000; color: #fff")}function dbToGain(Xe){return Math.pow(10,Xe/20)}function gainToDb(Xe){return 20*(Math.log(Xe)/Math.LN10)}function intervalToFrequencyRatio(Xe){return Math.pow(2,Xe/12)}let A4=440;function getA4(){return A4}function setA4(Xe){A4=Xe}function ftom(Xe){return Math.round(ftomf(Xe))}function ftomf(Xe){return 69+12*Math.log2(Xe/A4)}function mtof(Xe){return A4*Math.pow(2,(Xe-69)/12)}class TimeBaseClass extends Tone$1{constructor(Ke,Ye,Je){super(),this.defaultUnits="s",this._val=Ye,this._units=Je,this.context=Ke,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:Ke=>this._frequencyToUnits(parseFloat(Ke)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:Ke=>this._ticksToUnits(parseInt(Ke,10)),regexp:/^(\d+)i$/i},m:{method:Ke=>this._beatsToUnits(parseInt(Ke,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(Ke,Ye)=>{const Je=parseInt(Ke,10),tt=Ye==="."?1.5:1;return Je===1?this._beatsToUnits(this._getTimeSignature())*tt:this._beatsToUnits(4/Je)*tt},regexp:/^(\d+)n(\.?)$/i},number:{method:Ke=>this._expressions[this.defaultUnits].method.call(this,Ke),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:Ke=>this._secondsToUnits(parseFloat(Ke)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:Ke=>parseInt(Ke,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:Ke=>{const Ye=parseInt(Ke,10);return this._beatsToUnits(8/(Math.floor(Ye)*3))},regexp:/^(\d+)t$/i},tr:{method:(Ke,Ye,Je)=>{let tt=0;return Ke&&Ke!=="0"&&(tt+=this._beatsToUnits(this._getTimeSignature()*parseFloat(Ke))),Ye&&Ye!=="0"&&(tt+=this._beatsToUnits(parseFloat(Ye))),Je&&Je!=="0"&&(tt+=this._beatsToUnits(parseFloat(Je)/4)),tt},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof TimeBaseClass&&this.fromType(this._val),isUndef(this._val))return this._noArg();if(isString$1(this._val)&&isUndef(this._units)){for(const Ke in this._expressions)if(this._expressions[Ke].regexp.test(this._val.trim())){this._units=Ke;break}}else if(isObject$4(this._val)){let Ke=0;for(const Ye in this._val)if(isDefined(this._val[Ye])){const Je=this._val[Ye],tt=new this.constructor(this.context,Ye).valueOf()*Je;Ke+=tt}return Ke}if(isDefined(this._units)){const Ke=this._expressions[this._units],Ye=this._val.toString().trim().match(Ke.regexp);return Ye?Ke.method.apply(this,Ye.slice(1)):Ke.method.call(this,this._val)}else return isString$1(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(Ke){return 1/Ke}_beatsToUnits(Ke){return 60/this._getBpm()*Ke}_secondsToUnits(Ke){return Ke}_ticksToUnits(Ke){return Ke*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(Ke){switch(this._units=void 0,this.defaultUnits){case"s":this._val=Ke.toSeconds();break;case"i":this._val=Ke.toTicks();break;case"hz":this._val=Ke.toFrequency();break;case"midi":this._val=Ke.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class TimeClass extends TimeBaseClass{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:Ke=>this._now()+new this.constructor(this.context,Ke).valueOf(),regexp:/^\+(.+)/},quantize:{method:Ke=>{const Ye=new TimeClass(this.context,Ke).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(Ye))},regexp:/^@(.+)/}})}quantize(Ke,Ye=1){const Je=new this.constructor(this.context,Ke).valueOf(),tt=this.valueOf(),it=Math.round(tt/Je)*Je-tt;return tt+it*Ye}toNotation(){const Ke=this.toSeconds(),Ye=["1m"];for(let st=1;st<9;st++){const rt=Math.pow(2,st);Ye.push(rt+"n."),Ye.push(rt+"n"),Ye.push(rt+"t")}Ye.push("0");let Je=Ye[0],tt=new TimeClass(this.context,Ye[0]).toSeconds();return Ye.forEach(st=>{const rt=new TimeClass(this.context,st).toSeconds();Math.abs(rt-Ke)<Math.abs(tt-Ke)&&(Je=st,tt=rt)}),Je}toBarsBeatsSixteenths(){const Ke=this._beatsToUnits(1);let Ye=this.valueOf()/Ke;Ye=parseFloat(Ye.toFixed(4));const Je=Math.floor(Ye/this._getTimeSignature());let tt=Ye%1*4;Ye=Math.floor(Ye)%this._getTimeSignature();const st=tt.toString();return st.length>3&&(tt=parseFloat(parseFloat(st).toFixed(3))),[Je,Ye,tt].join(":")}toTicks(){const Ke=this._beatsToUnits(1),Ye=this.valueOf()/Ke;return Math.round(Ye*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return ftom(this.toFrequency())}_now(){return this.context.now()}}function Time(Xe,Ke){return new TimeClass(getContext(),Xe,Ke)}class FrequencyClass extends TimeClass{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return getA4()}static set A4(Ke){setA4(Ke)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(Ke){return this.defaultUnits==="midi"?Ke:FrequencyClass.mtof(Ke)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(Ke,Ye){const tt=noteToScaleIndex[Ke.toLowerCase()]+(parseInt(Ye,10)+1)*12;return this.defaultUnits==="midi"?tt:FrequencyClass.mtof(tt)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(Ke,Ye,Je){let tt=1;return Ke&&Ke!=="0"&&(tt*=this._beatsToUnits(this._getTimeSignature()*parseFloat(Ke))),Ye&&Ye!=="0"&&(tt*=this._beatsToUnits(parseFloat(Ye))),Je&&Je!=="0"&&(tt*=this._beatsToUnits(parseFloat(Je)/4)),tt}}})}transpose(Ke){return new FrequencyClass(this.context,this.valueOf()*intervalToFrequencyRatio(Ke))}harmonize(Ke){return Ke.map(Ye=>this.transpose(Ye))}toMidi(){return ftom(this.valueOf())}toNote(){const Ke=this.toFrequency(),Ye=Math.log2(Ke/FrequencyClass.A4);let Je=Math.round(12*Ye)+57;const tt=Math.floor(Je/12);return tt<0&&(Je+=-12*tt),scaleIndexToNote[Je%12]+tt.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const Ke=this._beatsToUnits(1),Ye=this.valueOf()/Ke;return Math.floor(Ye*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(Ke){return Ke}_ticksToUnits(Ke){return 1/(Ke*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(Ke){return 1/super._beatsToUnits(Ke)}_secondsToUnits(Ke){return 1/Ke}static mtof(Ke){return mtof(Ke)}static ftom(Ke){return ftom(Ke)}}const noteToScaleIndex={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},scaleIndexToNote=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Frequency(Xe,Ke){return new FrequencyClass(getContext(),Xe,Ke)}class TransportTimeClass extends TimeClass{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function TransportTime(Xe,Ke){return new TransportTimeClass(getContext(),Xe,Ke)}class ToneWithContext extends Tone$1{constructor(){super();const Ke=optionsFromArguments(ToneWithContext.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=Ke.context}static getDefaults(){return{context:getContext()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(Ke){return new TimeClass(this.context,Ke).toSeconds()}toFrequency(Ke){return new FrequencyClass(this.context,Ke).toFrequency()}toTicks(Ke){return new TransportTimeClass(this.context,Ke).toTicks()}_getPartialProperties(Ke){const Ye=this.get();return Object.keys(Ye).forEach(Je=>{isUndef(Ke[Je])&&delete Ye[Je]}),Ye}get(){const Ke=getDefaultsFromInstance(this);return Object.keys(Ke).forEach(Ye=>{if(Reflect.has(this,Ye)){const Je=this[Ye];isDefined(Je)&&isDefined(Je.value)&&isDefined(Je.setValueAtTime)?Ke[Ye]=Je.value:Je instanceof ToneWithContext?Ke[Ye]=Je._getPartialProperties(Ke[Ye]):isArray$8(Je)||isNumber$2(Je)||isString$1(Je)||isBoolean$1(Je)?Ke[Ye]=Je:delete Ke[Ye]}}),Ke}set(Ke){return Object.keys(Ke).forEach(Ye=>{Reflect.has(this,Ye)&&isDefined(this[Ye])&&(this[Ye]&&isDefined(this[Ye].value)&&isDefined(this[Ye].setValueAtTime)?this[Ye].value!==Ke[Ye]&&(this[Ye].value=Ke[Ye]):this[Ye]instanceof ToneWithContext?this[Ye].set(Ke[Ye]):this[Ye]=Ke[Ye])}),this}}class StateTimeline extends Timeline{constructor(Ke="stopped"){super(),this.name="StateTimeline",this._initial=Ke,this.setStateAtTime(this._initial,0)}getValueAtTime(Ke){const Ye=this.get(Ke);return Ye!==null?Ye.state:this._initial}setStateAtTime(Ke,Ye,Je){return assertRange(Ye,0),this.add(Object.assign({},Je,{state:Ke,time:Ye})),this}getLastState(Ke,Ye){const Je=this._search(Ye);for(let tt=Je;tt>=0;tt--){const st=this._timeline[tt];if(st.state===Ke)return st}}getNextState(Ke,Ye){const Je=this._search(Ye);if(Je!==-1)for(let tt=Je;tt<this._timeline.length;tt++){const st=this._timeline[tt];if(st.state===Ke)return st}}}class Param extends ToneWithContext{constructor(){super(optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const Ke=optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"]);for(assert(isDefined(Ke.param)&&(isAudioParam(Ke.param)||Ke.param instanceof Param),"param must be an AudioParam");!isAudioParam(Ke.param);)Ke.param=Ke.param._param;this._swappable=isDefined(Ke.swappable)?Ke.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=Ke.param,this.input.connect(this._param)):this._param=this.input=Ke.param,this._events=new Timeline(1e3),this._initialValue=this._param.defaultValue,this.units=Ke.units,this.convert=Ke.convert,this._minValue=Ke.minValue,this._maxValue=Ke.maxValue,isDefined(Ke.value)&&Ke.value!==this._toType(this._initialValue)&&this.setValueAtTime(Ke.value,0)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{convert:!0,units:"number"})}get value(){const Ke=this.now();return this.getValueAtTime(Ke)}set value(Ke){this.cancelScheduledValues(this.now()),this.setValueAtTime(Ke,this.now())}get minValue(){return isDefined(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return isDefined(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(Ke,Ye){return this.units===Ye}_assertRange(Ke){return isDefined(this.maxValue)&&isDefined(this.minValue)&&assertRange(Ke,this._fromType(this.minValue),this._fromType(this.maxValue)),Ke}_fromType(Ke){return this.convert&&!this.overridden?this._is(Ke,"time")?this.toSeconds(Ke):this._is(Ke,"decibels")?dbToGain(Ke):this._is(Ke,"frequency")?this.toFrequency(Ke):Ke:this.overridden?0:Ke}_toType(Ke){return this.convert&&this.units==="decibels"?gainToDb(Ke):Ke}setValueAtTime(Ke,Ye){const Je=this.toSeconds(Ye),tt=this._fromType(Ke);return assert(isFinite(tt)&&isFinite(Je),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(Ke)}, ${JSON.stringify(Ye)}`),this._assertRange(tt),this.log(this.units,"setValueAtTime",Ke,Je),this._events.add({time:Je,type:"setValueAtTime",value:tt}),this._param.setValueAtTime(tt,Je),this}getValueAtTime(Ke){const Ye=Math.max(this.toSeconds(Ke),0),Je=this._events.getAfter(Ye),tt=this._events.get(Ye);let st=this._initialValue;if(tt===null)st=this._initialValue;else if(tt.type==="setTargetAtTime"&&(Je===null||Je.type==="setValueAtTime")){const rt=this._events.getBefore(tt.time);let it;rt===null?it=this._initialValue:it=rt.value,tt.type==="setTargetAtTime"&&(st=this._exponentialApproach(tt.time,it,tt.value,tt.constant,Ye))}else if(Je===null)st=tt.value;else if(Je.type==="linearRampToValueAtTime"||Je.type==="exponentialRampToValueAtTime"){let rt=tt.value;if(tt.type==="setTargetAtTime"){const it=this._events.getBefore(tt.time);it===null?rt=this._initialValue:rt=it.value}Je.type==="linearRampToValueAtTime"?st=this._linearInterpolate(tt.time,rt,Je.time,Je.value,Ye):st=this._exponentialInterpolate(tt.time,rt,Je.time,Je.value,Ye)}else st=tt.value;return this._toType(st)}setRampPoint(Ke){Ke=this.toSeconds(Ke);let Ye=this.getValueAtTime(Ke);return this.cancelAndHoldAtTime(Ke),this._fromType(Ye)===0&&(Ye=this._toType(this._minOutput)),this.setValueAtTime(Ye,Ke),this}linearRampToValueAtTime(Ke,Ye){const Je=this._fromType(Ke),tt=this.toSeconds(Ye);return assert(isFinite(Je)&&isFinite(tt),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(Ke)}, ${JSON.stringify(Ye)}`),this._assertRange(Je),this._events.add({time:tt,type:"linearRampToValueAtTime",value:Je}),this.log(this.units,"linearRampToValueAtTime",Ke,tt),this._param.linearRampToValueAtTime(Je,tt),this}exponentialRampToValueAtTime(Ke,Ye){let Je=this._fromType(Ke);Je=EQ(Je,0)?this._minOutput:Je,this._assertRange(Je);const tt=this.toSeconds(Ye);return assert(isFinite(Je)&&isFinite(tt),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(Ke)}, ${JSON.stringify(Ye)}`),this._events.add({time:tt,type:"exponentialRampToValueAtTime",value:Je}),this.log(this.units,"exponentialRampToValueAtTime",Ke,tt),this._param.exponentialRampToValueAtTime(Je,tt),this}exponentialRampTo(Ke,Ye,Je){return Je=this.toSeconds(Je),this.setRampPoint(Je),this.exponentialRampToValueAtTime(Ke,Je+this.toSeconds(Ye)),this}linearRampTo(Ke,Ye,Je){return Je=this.toSeconds(Je),this.setRampPoint(Je),this.linearRampToValueAtTime(Ke,Je+this.toSeconds(Ye)),this}targetRampTo(Ke,Ye,Je){return Je=this.toSeconds(Je),this.setRampPoint(Je),this.exponentialApproachValueAtTime(Ke,Je,Ye),this}exponentialApproachValueAtTime(Ke,Ye,Je){Ye=this.toSeconds(Ye),Je=this.toSeconds(Je);const tt=Math.log(Je+1)/Math.log(200);return this.setTargetAtTime(Ke,Ye,tt),this.cancelAndHoldAtTime(Ye+Je*.9),this.linearRampToValueAtTime(Ke,Ye+Je),this}setTargetAtTime(Ke,Ye,Je){const tt=this._fromType(Ke);assert(isFinite(Je)&&Je>0,"timeConstant must be a number greater than 0");const st=this.toSeconds(Ye);return this._assertRange(tt),assert(isFinite(tt)&&isFinite(st),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(Ke)}, ${JSON.stringify(Ye)}`),this._events.add({constant:Je,time:st,type:"setTargetAtTime",value:tt}),this.log(this.units,"setTargetAtTime",Ke,st,Je),this._param.setTargetAtTime(tt,st,Je),this}setValueCurveAtTime(Ke,Ye,Je,tt=1){Je=this.toSeconds(Je),Ye=this.toSeconds(Ye);const st=this._fromType(Ke[0])*tt;this.setValueAtTime(this._toType(st),Ye);const rt=Je/(Ke.length-1);for(let it=1;it<Ke.length;it++){const ot=this._fromType(Ke[it])*tt;this.linearRampToValueAtTime(this._toType(ot),Ye+it*rt)}return this}cancelScheduledValues(Ke){const Ye=this.toSeconds(Ke);return assert(isFinite(Ye),`Invalid argument to cancelScheduledValues: ${JSON.stringify(Ke)}`),this._events.cancel(Ye),this._param.cancelScheduledValues(Ye),this.log(this.units,"cancelScheduledValues",Ye),this}cancelAndHoldAtTime(Ke){const Ye=this.toSeconds(Ke),Je=this._fromType(this.getValueAtTime(Ye));assert(isFinite(Ye),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(Ke)}`),this.log(this.units,"cancelAndHoldAtTime",Ye,"value="+Je);const tt=this._events.get(Ye),st=this._events.getAfter(Ye);return tt&&EQ(tt.time,Ye)?st?(this._param.cancelScheduledValues(st.time),this._events.cancel(st.time)):(this._param.cancelAndHoldAtTime(Ye),this._events.cancel(Ye+this.sampleTime)):st&&(this._param.cancelScheduledValues(st.time),this._events.cancel(st.time),st.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(Je),Ye):st.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(Je),Ye)),this._events.add({time:Ye,type:"setValueAtTime",value:Je}),this._param.setValueAtTime(Je,Ye),this}rampTo(Ke,Ye=.1,Je){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(Ke,Ye,Je):this.linearRampTo(Ke,Ye,Je),this}apply(Ke){const Ye=this.context.currentTime;Ke.setValueAtTime(this.getValueAtTime(Ye),Ye);const Je=this._events.get(Ye);if(Je&&Je.type==="setTargetAtTime"){const tt=this._events.getAfter(Je.time),st=tt?tt.time:Ye+2,rt=(st-Ye)/10;for(let it=Ye;it<st;it+=rt)Ke.linearRampToValueAtTime(this.getValueAtTime(it),it)}return this._events.forEachAfter(this.context.currentTime,tt=>{tt.type==="cancelScheduledValues"?Ke.cancelScheduledValues(tt.time):tt.type==="setTargetAtTime"?Ke.setTargetAtTime(tt.value,tt.time,tt.constant):Ke[tt.type](tt.value,tt.time)}),this}setParam(Ke){assert(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const Ye=this.input;return Ye.disconnect(this._param),this.apply(Ke),this._param=Ke,Ye.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(Ke,Ye,Je,tt,st){return Je+(Ye-Je)*Math.exp(-(st-Ke)/tt)}_linearInterpolate(Ke,Ye,Je,tt,st){return Ye+(tt-Ye)*((st-Ke)/(Je-Ke))}_exponentialInterpolate(Ke,Ye,Je,tt,st){return Ye*Math.pow(tt/Ye,(st-Ke)/(Je-Ke))}}class ToneAudioNode extends ToneWithContext{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return isDefined(this.input)?isAudioParam(this.input)||this.input instanceof Param?1:this.input.numberOfInputs:0}get numberOfOutputs(){return isDefined(this.output)?this.output.numberOfOutputs:0}_isAudioNode(Ke){return isDefined(Ke)&&(Ke instanceof ToneAudioNode||isAudioNode(Ke))}_getInternalNodes(){const Ke=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&Ke.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&Ke.push(this.output),Ke}_setChannelProperties(Ke){this._getInternalNodes().forEach(Je=>{Je.channelCount=Ke.channelCount,Je.channelCountMode=Ke.channelCountMode,Je.channelInterpretation=Ke.channelInterpretation})}_getChannelProperties(){const Ke=this._getInternalNodes();assert(Ke.length>0,"ToneAudioNode does not have any internal nodes");const Ye=Ke[0];return{channelCount:Ye.channelCount,channelCountMode:Ye.channelCountMode,channelInterpretation:Ye.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(Ke){const Ye=this._getChannelProperties();this._setChannelProperties(Object.assign(Ye,{channelCount:Ke}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(Ke){const Ye=this._getChannelProperties();this._setChannelProperties(Object.assign(Ye,{channelCountMode:Ke}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(Ke){const Ye=this._getChannelProperties();this._setChannelProperties(Object.assign(Ye,{channelInterpretation:Ke}))}connect(Ke,Ye=0,Je=0){return connect(this,Ke,Ye,Je),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return warn("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(Ke,Ye=0,Je=0){return disconnect(this,Ke,Ye,Je),this}chain(...Ke){return connectSeries(this,...Ke),this}fan(...Ke){return Ke.forEach(Ye=>this.connect(Ye)),this}dispose(){return super.dispose(),isDefined(this.input)&&(this.input instanceof ToneAudioNode?this.input.dispose():isAudioNode(this.input)&&this.input.disconnect()),isDefined(this.output)&&(this.output instanceof ToneAudioNode?this.output.dispose():isAudioNode(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function connectSeries(...Xe){const Ke=Xe.shift();Xe.reduce((Ye,Je)=>(Ye instanceof ToneAudioNode?Ye.connect(Je):isAudioNode(Ye)&&connect(Ye,Je),Je),Ke)}function connect(Xe,Ke,Ye=0,Je=0){for(assert(isDefined(Xe),"Cannot connect from undefined node"),assert(isDefined(Ke),"Cannot connect to undefined node"),(Ke instanceof ToneAudioNode||isAudioNode(Ke))&&assert(Ke.numberOfInputs>0,"Cannot connect to node with no inputs"),assert(Xe.numberOfOutputs>0,"Cannot connect from node with no outputs");Ke instanceof ToneAudioNode||Ke instanceof Param;)isDefined(Ke.input)&&(Ke=Ke.input);for(;Xe instanceof ToneAudioNode;)isDefined(Xe.output)&&(Xe=Xe.output);isAudioParam(Ke)?Xe.connect(Ke,Ye):Xe.connect(Ke,Ye,Je)}function disconnect(Xe,Ke,Ye=0,Je=0){if(isDefined(Ke))for(;Ke instanceof ToneAudioNode;)Ke=Ke.input;for(;!isAudioNode(Xe);)isDefined(Xe.output)&&(Xe=Xe.output);isAudioParam(Ke)?Xe.disconnect(Ke,Ye):isAudioNode(Ke)?Xe.disconnect(Ke,Ye,Je):Xe.disconnect()}class Gain extends ToneAudioNode{constructor(){super(optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const Ke=optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"]);this.gain=new Param({context:this.context,convert:Ke.convert,param:this._gainNode.gain,units:Ke.units,value:Ke.gain,minValue:Ke.minValue,maxValue:Ke.maxValue}),readOnly(this,"gain")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class OneShotSource extends ToneAudioNode{constructor(Ke){super(Ke),this.onended=noOp,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Gain({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(Ye){const Je=this.toSeconds(Ye);return this._startTime!==-1&&Je>=this._startTime&&(this._stopTime===-1||Je<=this._stopTime)?"started":"stopped"},this._fadeIn=Ke.fadeIn,this._fadeOut=Ke.fadeOut,this._curve=Ke.curve,this.onended=Ke.onended}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:noOp})}_startGain(Ke,Ye=1){assert(this._startTime===-1,"Source cannot be started more than once");const Je=this.toSeconds(this._fadeIn);return this._startTime=Ke+Je,this._startTime=Math.max(this._startTime,this.context.currentTime),Je>0?(this._gainNode.gain.setValueAtTime(0,Ke),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(Ye,Ke+Je):this._gainNode.gain.exponentialApproachValueAtTime(Ye,Ke,Je)):this._gainNode.gain.setValueAtTime(Ye,Ke),this}stop(Ke){return this.log("stop",Ke),this._stopGain(this.toSeconds(Ke)),this}_stopGain(Ke){assert(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const Ye=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(Ke)+Ye,this._stopTime=Math.max(this._stopTime,this.context.currentTime),Ye>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,Ye,Ke):this._gainNode.gain.targetRampTo(0,Ye,Ke):(this._gainNode.gain.cancelAndHoldAtTime(Ke),this._gainNode.gain.setValueAtTime(0,Ke)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const Je=this._curve==="exponential"?Ye*2:0;this._stopSource(this.now()+Je),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==noOp&&(this.onended(this),this.onended=noOp,!this.context.isOffline)){const Ke=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(Ke):setTimeout(Ke,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),assert(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class ToneConstantSource extends OneShotSource{constructor(){super(optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const Ke=optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"]);connect(this._source,this._gainNode),this.offset=new Param({context:this.context,convert:Ke.convert,param:this._source.offset,units:Ke.units,value:Ke.offset,minValue:Ke.minValue,maxValue:Ke.maxValue})}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{convert:!0,offset:1,units:"number"})}start(Ke){const Ye=this.toSeconds(Ke);return this.log("start",Ye),this._startGain(Ye),this._source.start(Ye),this}_stopSource(Ke){this._source.stop(Ke)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Signal extends ToneAudioNode{constructor(){super(optionsFromArguments(Signal.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const Ke=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new ToneConstantSource({context:this.context,convert:Ke.convert,offset:Ke.value,units:Ke.units,minValue:Ke.minValue,maxValue:Ke.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,units:"number",value:0})}connect(Ke,Ye=0,Je=0){return connectSignal(this,Ke,Ye,Je),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(Ke,Ye){return this._param.setValueAtTime(Ke,Ye),this}getValueAtTime(Ke){return this._param.getValueAtTime(Ke)}setRampPoint(Ke){return this._param.setRampPoint(Ke),this}linearRampToValueAtTime(Ke,Ye){return this._param.linearRampToValueAtTime(Ke,Ye),this}exponentialRampToValueAtTime(Ke,Ye){return this._param.exponentialRampToValueAtTime(Ke,Ye),this}exponentialRampTo(Ke,Ye,Je){return this._param.exponentialRampTo(Ke,Ye,Je),this}linearRampTo(Ke,Ye,Je){return this._param.linearRampTo(Ke,Ye,Je),this}targetRampTo(Ke,Ye,Je){return this._param.targetRampTo(Ke,Ye,Je),this}exponentialApproachValueAtTime(Ke,Ye,Je){return this._param.exponentialApproachValueAtTime(Ke,Ye,Je),this}setTargetAtTime(Ke,Ye,Je){return this._param.setTargetAtTime(Ke,Ye,Je),this}setValueCurveAtTime(Ke,Ye,Je,tt){return this._param.setValueCurveAtTime(Ke,Ye,Je,tt),this}cancelScheduledValues(Ke){return this._param.cancelScheduledValues(Ke),this}cancelAndHoldAtTime(Ke){return this._param.cancelAndHoldAtTime(Ke),this}rampTo(Ke,Ye,Je){return this._param.rampTo(Ke,Ye,Je),this}get value(){return this._param.value}set value(Ke){this._param.value=Ke}get convert(){return this._param.convert}set convert(Ke){this._param.convert=Ke}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(Ke){this._param.overridden=Ke}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(Ke){return this._param.apply(Ke),this}}function connectSignal(Xe,Ke,Ye,Je){(Ke instanceof Param||isAudioParam(Ke)||Ke instanceof Signal&&Ke.override)&&(Ke.cancelScheduledValues(0),Ke.setValueAtTime(0,0),Ke instanceof Signal&&(Ke.overridden=!0)),connect(Xe,Ke,Ye,Je)}class TickParam extends Param{constructor(){super(optionsFromArguments(TickParam.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Timeline(1/0),this._multiplier=1;const Ke=optionsFromArguments(TickParam.getDefaults(),arguments,["value"]);this._multiplier=Ke.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(Ke.value)}),this.setValueAtTime(Ke.value,0)}static getDefaults(){return Object.assign(Param.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(Ke,Ye,Je){Ye=this.toSeconds(Ye),this.setRampPoint(Ye);const tt=this._fromType(Ke),st=this._events.get(Ye),rt=Math.round(Math.max(1/Je,1));for(let it=0;it<=rt;it++){const ot=Je*it+Ye,at=this._exponentialApproach(st.time,st.value,tt,Je,ot);this.linearRampToValueAtTime(this._toType(at),ot)}return this}setValueAtTime(Ke,Ye){const Je=this.toSeconds(Ye);super.setValueAtTime(Ke,Ye);const tt=this._events.get(Je),st=this._events.previousEvent(tt),rt=this._getTicksUntilEvent(st,Je);return tt.ticks=Math.max(rt,0),this}linearRampToValueAtTime(Ke,Ye){const Je=this.toSeconds(Ye);super.linearRampToValueAtTime(Ke,Ye);const tt=this._events.get(Je),st=this._events.previousEvent(tt),rt=this._getTicksUntilEvent(st,Je);return tt.ticks=Math.max(rt,0),this}exponentialRampToValueAtTime(Ke,Ye){Ye=this.toSeconds(Ye);const Je=this._fromType(Ke),tt=this._events.get(Ye),st=Math.round(Math.max((Ye-tt.time)*10,1)),rt=(Ye-tt.time)/st;for(let it=0;it<=st;it++){const ot=rt*it+tt.time,at=this._exponentialInterpolate(tt.time,tt.value,Ye,Je,ot);this.linearRampToValueAtTime(this._toType(at),ot)}return this}_getTicksUntilEvent(Ke,Ye){if(Ke===null)Ke={ticks:0,time:0,type:"setValueAtTime",value:0};else if(isUndef(Ke.ticks)){const rt=this._events.previousEvent(Ke);Ke.ticks=this._getTicksUntilEvent(rt,Ke.time)}const Je=this._fromType(this.getValueAtTime(Ke.time));let tt=this._fromType(this.getValueAtTime(Ye));const st=this._events.get(Ye);return st&&st.time===Ye&&st.type==="setValueAtTime"&&(tt=this._fromType(this.getValueAtTime(Ye-this.sampleTime))),.5*(Ye-Ke.time)*(Je+tt)+Ke.ticks}getTicksAtTime(Ke){const Ye=this.toSeconds(Ke),Je=this._events.get(Ye);return Math.max(this._getTicksUntilEvent(Je,Ye),0)}getDurationOfTicks(Ke,Ye){const Je=this.toSeconds(Ye),tt=this.getTicksAtTime(Ye);return this.getTimeOfTick(tt+Ke)-Je}getTimeOfTick(Ke){const Ye=this._events.get(Ke,"ticks"),Je=this._events.getAfter(Ke,"ticks");if(Ye&&Ye.ticks===Ke)return Ye.time;if(Ye&&Je&&Je.type==="linearRampToValueAtTime"&&Ye.value!==Je.value){const tt=this._fromType(this.getValueAtTime(Ye.time)),rt=(this._fromType(this.getValueAtTime(Je.time))-tt)/(Je.time-Ye.time),it=Math.sqrt(Math.pow(tt,2)-2*rt*(Ye.ticks-Ke)),ot=(-tt+it)/rt,at=(-tt-it)/rt;return(ot>0?ot:at)+Ye.time}else return Ye?Ye.value===0?1/0:Ye.time+(Ke-Ye.ticks)/Ye.value:Ke/this._initialValue}ticksToTime(Ke,Ye){return this.getDurationOfTicks(Ke,Ye)}timeToTicks(Ke,Ye){const Je=this.toSeconds(Ye),tt=this.toSeconds(Ke),st=this.getTicksAtTime(Je);return this.getTicksAtTime(Je+tt)-st}_fromType(Ke){return this.units==="bpm"&&this.multiplier?1/(60/Ke/this.multiplier):super._fromType(Ke)}_toType(Ke){return this.units==="bpm"&&this.multiplier?Ke/this.multiplier*60:super._toType(Ke)}get multiplier(){return this._multiplier}set multiplier(Ke){const Ye=this.value;this._multiplier=Ke,this.cancelScheduledValues(0),this.setValueAtTime(Ye,0)}}class TickSignal extends Signal{constructor(){super(optionsFromArguments(TickSignal.getDefaults(),arguments,["value"])),this.name="TickSignal";const Ke=optionsFromArguments(TickSignal.getDefaults(),arguments,["value"]);this.input=this._param=new TickParam({context:this.context,convert:Ke.convert,multiplier:Ke.multiplier,param:this._constantSource.offset,units:Ke.units,value:Ke.value})}static getDefaults(){return Object.assign(Signal.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(Ke,Ye){return this._param.ticksToTime(Ke,Ye)}timeToTicks(Ke,Ye){return this._param.timeToTicks(Ke,Ye)}getTimeOfTick(Ke){return this._param.getTimeOfTick(Ke)}getDurationOfTicks(Ke,Ye){return this._param.getDurationOfTicks(Ke,Ye)}getTicksAtTime(Ke){return this._param.getTicksAtTime(Ke)}get multiplier(){return this._param.multiplier}set multiplier(Ke){this._param.multiplier=Ke}dispose(){return super.dispose(),this._param.dispose(),this}}class TickSource extends ToneWithContext{constructor(){super(optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new StateTimeline,this._tickOffset=new Timeline;const Ke=optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"]);this.frequency=new TickSignal({context:this.context,units:Ke.units,value:Ke.frequency}),readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ToneWithContext.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(Ke,Ye){const Je=this.toSeconds(Ke);return this._state.getValueAtTime(Je)!=="started"&&(this._state.setStateAtTime("started",Je),isDefined(Ye)&&this.setTicksAtTime(Ye,Je)),this}stop(Ke){const Ye=this.toSeconds(Ke);if(this._state.getValueAtTime(Ye)==="stopped"){const Je=this._state.get(Ye);Je&&Je.time>0&&(this._tickOffset.cancel(Je.time),this._state.cancel(Je.time))}return this._state.cancel(Ye),this._state.setStateAtTime("stopped",Ye),this.setTicksAtTime(0,Ye),this}pause(Ke){const Ye=this.toSeconds(Ke);return this._state.getValueAtTime(Ye)==="started"&&this._state.setStateAtTime("paused",Ye),this}cancel(Ke){return Ke=this.toSeconds(Ke),this._state.cancel(Ke),this._tickOffset.cancel(Ke),this}getTicksAtTime(Ke){const Ye=this.toSeconds(Ke),Je=this._state.getLastState("stopped",Ye),tt={state:"paused",time:Ye};this._state.add(tt);let st=Je,rt=0;return this._state.forEachBetween(Je.time,Ye+this.sampleTime,it=>{let ot=st.time;const at=this._tickOffset.get(it.time);at&&at.time>=st.time&&(rt=at.ticks,ot=at.time),st.state==="started"&&it.state!=="started"&&(rt+=this.frequency.getTicksAtTime(it.time)-this.frequency.getTicksAtTime(ot)),st=it}),this._state.remove(tt),rt}get ticks(){return this.getTicksAtTime(this.now())}set ticks(Ke){this.setTicksAtTime(Ke,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(Ke){const Ye=this.now(),Je=this.frequency.timeToTicks(Ke,Ye);this.setTicksAtTime(Je,Ye)}getSecondsAtTime(Ke){Ke=this.toSeconds(Ke);const Ye=this._state.getLastState("stopped",Ke),Je={state:"paused",time:Ke};this._state.add(Je);let tt=Ye,st=0;return this._state.forEachBetween(Ye.time,Ke+this.sampleTime,rt=>{let it=tt.time;const ot=this._tickOffset.get(rt.time);ot&&ot.time>=tt.time&&(st=ot.seconds,it=ot.time),tt.state==="started"&&rt.state!=="started"&&(st+=rt.time-it),tt=rt}),this._state.remove(Je),st}setTicksAtTime(Ke,Ye){return Ye=this.toSeconds(Ye),this._tickOffset.cancel(Ye),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(Ke,Ye),ticks:Ke,time:Ye}),this}getStateAtTime(Ke){return Ke=this.toSeconds(Ke),this._state.getValueAtTime(Ke)}getTimeOfTick(Ke,Ye=this.now()){const Je=this._tickOffset.get(Ye),tt=this._state.get(Ye),st=Math.max(Je.time,tt.time),rt=this.frequency.getTicksAtTime(st)+Ke-Je.ticks;return this.frequency.getTimeOfTick(rt)}forEachTickBetween(Ke,Ye,Je){let tt=this._state.get(Ke);this._state.forEachBetween(Ke,Ye,rt=>{tt&&tt.state==="started"&&rt.state!=="started"&&this.forEachTickBetween(Math.max(tt.time,Ke),rt.time-this.sampleTime,Je),tt=rt});let st=null;if(tt&&tt.state==="started"){const rt=Math.max(tt.time,Ke),it=this.frequency.getTicksAtTime(rt),ot=this.frequency.getTicksAtTime(tt.time),at=it-ot;let lt=Math.ceil(at)-at;lt=EQ(lt,1)?0:lt;let ut=this.frequency.getTimeOfTick(it+lt);for(;ut<Ye;){try{Je(ut,Math.round(this.getTicksAtTime(ut)))}catch(ht){st=ht;break}ut+=this.frequency.getDurationOfTicks(1,ut)}}if(st)throw st;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class Clock extends ToneWithContext{constructor(){super(optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=noOp,this._lastUpdate=0,this._state=new StateTimeline("stopped"),this._boundLoop=this._loop.bind(this);const Ke=optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"]);this.callback=Ke.callback,this._tickSource=new TickSource({context:this.context,frequency:Ke.frequency,units:Ke.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(Ke,Ye){assertContextRunning(this.context);const Je=this.toSeconds(Ke);return this.log("start",Je),this._state.getValueAtTime(Je)!=="started"&&(this._state.setStateAtTime("started",Je),this._tickSource.start(Je,Ye),Je<this._lastUpdate&&this.emit("start",Je,Ye)),this}stop(Ke){const Ye=this.toSeconds(Ke);return this.log("stop",Ye),this._state.cancel(Ye),this._state.setStateAtTime("stopped",Ye),this._tickSource.stop(Ye),Ye<this._lastUpdate&&this.emit("stop",Ye),this}pause(Ke){const Ye=this.toSeconds(Ke);return this._state.getValueAtTime(Ye)==="started"&&(this._state.setStateAtTime("paused",Ye),this._tickSource.pause(Ye),Ye<this._lastUpdate&&this.emit("pause",Ye)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(Ke){this._tickSource.ticks=Ke}get seconds(){return this._tickSource.seconds}set seconds(Ke){this._tickSource.seconds=Ke}getSecondsAtTime(Ke){return this._tickSource.getSecondsAtTime(Ke)}setTicksAtTime(Ke,Ye){return this._tickSource.setTicksAtTime(Ke,Ye),this}getTimeOfTick(Ke,Ye=this.now()){return this._tickSource.getTimeOfTick(Ke,Ye)}getTicksAtTime(Ke){return this._tickSource.getTicksAtTime(Ke)}nextTickTime(Ke,Ye){const Je=this.toSeconds(Ye),tt=this.getTicksAtTime(Je);return this._tickSource.getTimeOfTick(tt+Ke,Je)}_loop(){const Ke=this._lastUpdate,Ye=this.now();this._lastUpdate=Ye,this.log("loop",Ke,Ye),Ke!==Ye&&(this._state.forEachBetween(Ke,Ye,Je=>{switch(Je.state){case"started":const tt=this._tickSource.getTicksAtTime(Je.time);this.emit("start",Je.time,tt);break;case"stopped":Je.time!==0&&this.emit("stop",Je.time);break;case"paused":this.emit("pause",Je.time);break}}),this._tickSource.forEachTickBetween(Ke,Ye,(Je,tt)=>{this.callback(Je,tt)}))}getStateAtTime(Ke){const Ye=this.toSeconds(Ke);return this._state.getValueAtTime(Ye)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Emitter.mixin(Clock);class Delay extends ToneAudioNode{constructor(){super(optionsFromArguments(Delay.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const Ke=optionsFromArguments(Delay.getDefaults(),arguments,["delayTime","maxDelay"]),Ye=this.toSeconds(Ke.maxDelay);this._maxDelay=Math.max(Ye,this.toSeconds(Ke.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(Ye),this.delayTime=new Param({context:this.context,param:this._delayNode.delayTime,units:"time",value:Ke.delayTime,minValue:0,maxValue:this.maxDelay}),readOnly(this,"delayTime")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}function Offline(Xe,Ke,Ye=2,Je=getContext().sampleRate){return __awaiter$1(this,void 0,void 0,function*(){const tt=getContext(),st=new OfflineContext(Ye,Ke,Je);setContext(st),yield Xe(st);const rt=st.render();setContext(tt);const it=yield rt;return new ToneAudioBuffer(it)})}class ToneAudioBuffers extends Tone$1{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const Ke=optionsFromArguments(ToneAudioBuffers.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=Ke.baseUrl,Object.keys(Ke.urls).forEach(Ye=>{this._loadingCount++;const Je=Ke.urls[Ye];this.add(Ye,Je,this._bufferLoaded.bind(this,Ke.onload),Ke.onerror)})}static getDefaults(){return{baseUrl:"",onerror:noOp,onload:noOp,urls:{}}}has(Ke){return this._buffers.has(Ke.toString())}get(Ke){return assert(this.has(Ke),`ToneAudioBuffers has no buffer named: ${Ke}`),this._buffers.get(Ke.toString())}_bufferLoaded(Ke){this._loadingCount--,this._loadingCount===0&&Ke&&Ke()}get loaded(){return Array.from(this._buffers).every(([Ke,Ye])=>Ye.loaded)}add(Ke,Ye,Je=noOp,tt=noOp){return isString$1(Ye)?this._buffers.set(Ke.toString(),new ToneAudioBuffer(this.baseUrl+Ye,Je,tt)):this._buffers.set(Ke.toString(),new ToneAudioBuffer(Ye,Je,tt)),this}dispose(){return super.dispose(),this._buffers.forEach(Ke=>Ke.dispose()),this._buffers.clear(),this}}class MidiClass extends FrequencyClass{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(Ke){return ftom(super._frequencyToUnits(Ke))}_ticksToUnits(Ke){return ftom(super._ticksToUnits(Ke))}_beatsToUnits(Ke){return ftom(super._beatsToUnits(Ke))}_secondsToUnits(Ke){return ftom(super._secondsToUnits(Ke))}toMidi(){return this.valueOf()}toFrequency(){return mtof(this.toMidi())}transpose(Ke){return new MidiClass(this.context,this.toMidi()+Ke)}}function Midi$1(Xe,Ke){return new MidiClass(getContext(),Xe,Ke)}class TicksClass extends TransportTimeClass{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(Ke){return this._getPPQ()*Ke}_secondsToUnits(Ke){return Math.floor(Ke/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(Ke){return Ke}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function Ticks(Xe,Ke){return new TicksClass(getContext(),Xe,Ke)}let Draw$1=class extends ToneWithContext{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Timeline,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(Ke,Ye){return this._events.add({callback:Ke,time:this.toSeconds(Ye)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(Ke){return this._events.cancel(this.toSeconds(Ke)),this}_drawLoop(){const Ke=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=Ke;){const Ye=this._events.shift();Ye&&Ke-Ye.time<=this.expiration&&Ye.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}};onContextInit(Xe=>{Xe.draw=new Draw$1({context:Xe})});onContextClose(Xe=>{Xe.draw.dispose()});class IntervalTimeline extends Tone$1{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(Ke){assert(isDefined(Ke.time),"Events must have a time property"),assert(isDefined(Ke.duration),"Events must have a duration parameter"),Ke.time=Ke.time.valueOf();let Ye=new IntervalNode(Ke.time,Ke.time+Ke.duration,Ke);for(this._root===null?this._root=Ye:this._root.insert(Ye),this._length++;Ye!==null;)Ye.updateHeight(),Ye.updateMax(),this._rebalance(Ye),Ye=Ye.parent;return this}remove(Ke){if(this._root!==null){const Ye=[];this._root.search(Ke.time,Ye);for(const Je of Ye)if(Je.event===Ke){this._removeNode(Je),this._length--;break}}return this}get length(){return this._length}cancel(Ke){return this.forEachFrom(Ke,Ye=>this.remove(Ye)),this}_setRoot(Ke){this._root=Ke,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(Ke,Ye){Ke.parent!==null?(Ke.isLeftChild()?Ke.parent.left=Ye:Ke.parent.right=Ye,this._rebalance(Ke.parent)):this._setRoot(Ye)}_removeNode(Ke){if(Ke.left===null&&Ke.right===null)this._replaceNodeInParent(Ke,null);else if(Ke.right===null)this._replaceNodeInParent(Ke,Ke.left);else if(Ke.left===null)this._replaceNodeInParent(Ke,Ke.right);else{const Ye=Ke.getBalance();let Je,tt=null;if(Ye>0)if(Ke.left.right===null)Je=Ke.left,Je.right=Ke.right,tt=Je;else{for(Je=Ke.left.right;Je.right!==null;)Je=Je.right;Je.parent&&(Je.parent.right=Je.left,tt=Je.parent,Je.left=Ke.left,Je.right=Ke.right)}else if(Ke.right.left===null)Je=Ke.right,Je.left=Ke.left,tt=Je;else{for(Je=Ke.right.left;Je.left!==null;)Je=Je.left;Je.parent&&(Je.parent.left=Je.right,tt=Je.parent,Je.left=Ke.left,Je.right=Ke.right)}Ke.parent!==null?Ke.isLeftChild()?Ke.parent.left=Je:Ke.parent.right=Je:this._setRoot(Je),tt&&this._rebalance(tt)}Ke.dispose()}_rotateLeft(Ke){const Ye=Ke.parent,Je=Ke.isLeftChild(),tt=Ke.right;tt&&(Ke.right=tt.left,tt.left=Ke),Ye!==null?Je?Ye.left=tt:Ye.right=tt:this._setRoot(tt)}_rotateRight(Ke){const Ye=Ke.parent,Je=Ke.isLeftChild(),tt=Ke.left;tt&&(Ke.left=tt.right,tt.right=Ke),Ye!==null?Je?Ye.left=tt:Ye.right=tt:this._setRoot(tt)}_rebalance(Ke){const Ye=Ke.getBalance();Ye>1&&Ke.left?Ke.left.getBalance()<0?this._rotateLeft(Ke.left):this._rotateRight(Ke):Ye<-1&&Ke.right&&(Ke.right.getBalance()>0?this._rotateRight(Ke.right):this._rotateLeft(Ke))}get(Ke){if(this._root!==null){const Ye=[];if(this._root.search(Ke,Ye),Ye.length>0){let Je=Ye[0];for(let tt=1;tt<Ye.length;tt++)Ye[tt].low>Je.low&&(Je=Ye[tt]);return Je.event}}return null}forEach(Ke){if(this._root!==null){const Ye=[];this._root.traverse(Je=>Ye.push(Je)),Ye.forEach(Je=>{Je.event&&Ke(Je.event)})}return this}forEachAtTime(Ke,Ye){if(this._root!==null){const Je=[];this._root.search(Ke,Je),Je.forEach(tt=>{tt.event&&Ye(tt.event)})}return this}forEachFrom(Ke,Ye){if(this._root!==null){const Je=[];this._root.searchAfter(Ke,Je),Je.forEach(tt=>{tt.event&&Ye(tt.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(Ke=>Ke.dispose()),this._root=null,this}}class IntervalNode{constructor(Ke,Ye,Je){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=Je,this.low=Ke,this.high=Ye,this.max=this.high}insert(Ke){Ke.low<=this.low?this.left===null?this.left=Ke:this.left.insert(Ke):this.right===null?this.right=Ke:this.right.insert(Ke)}search(Ke,Ye){Ke>this.max||(this.left!==null&&this.left.search(Ke,Ye),this.low<=Ke&&this.high>Ke&&Ye.push(this),!(this.low>Ke)&&this.right!==null&&this.right.search(Ke,Ye))}searchAfter(Ke,Ye){this.low>=Ke&&(Ye.push(this),this.left!==null&&this.left.searchAfter(Ke,Ye)),this.right!==null&&this.right.searchAfter(Ke,Ye)}traverse(Ke){Ke(this),this.left!==null&&this.left.traverse(Ke),this.right!==null&&this.right.traverse(Ke)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let Ke=0;return this.left!==null&&this.right!==null?Ke=this.left.height-this.right.height:this.left!==null?Ke=this.left.height+1:this.right!==null&&(Ke=-(this.right.height+1)),Ke}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(Ke){this._left=Ke,Ke!==null&&(Ke.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(Ke){this._right=Ke,Ke!==null&&(Ke.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}const Units=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class Volume extends ToneAudioNode{constructor(){super(optionsFromArguments(Volume.getDefaults(),arguments,["volume"])),this.name="Volume";const Ke=optionsFromArguments(Volume.getDefaults(),arguments,["volume"]);this.input=this.output=new Gain({context:this.context,gain:Ke.volume,units:"decibels"}),this.volume=this.output.gain,readOnly(this,"volume"),this._unmutedVolume=Ke.volume,this.mute=Ke.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(Ke){!this.mute&&Ke?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!Ke&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}let Destination$1=class pc extends ToneAudioNode{constructor(){super(optionsFromArguments(pc.getDefaults(),arguments)),this.name="Destination",this.input=new Volume({context:this.context}),this.output=new Gain({context:this.context}),this.volume=this.input.volume;const Ke=optionsFromArguments(pc.getDefaults(),arguments);connectSeries(this.input,this.output,this.context.rawContext.destination),this.mute=Ke.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(Ke){this.input.mute=Ke}chain(...Ke){return this.input.disconnect(),Ke.unshift(this.input),Ke.push(this.output),connectSeries(...Ke),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};onContextInit(Xe=>{Xe.destination=new Destination$1({context:Xe})});onContextClose(Xe=>{Xe.destination.dispose()});class TimelineValue extends Tone$1{constructor(Ke){super(),this.name="TimelineValue",this._timeline=new Timeline({memory:10}),this._initialValue=Ke}set(Ke,Ye){return this._timeline.add({value:Ke,time:Ye}),this}get(Ke){const Ye=this._timeline.get(Ke);return Ye?Ye.value:this._initialValue}}class TransportEvent{constructor(Ke,Ye){this.id=TransportEvent._eventId++;const Je=Object.assign(TransportEvent.getDefaults(),Ye);this.transport=Ke,this.callback=Je.callback,this._once=Je.once,this.time=Je.time}static getDefaults(){return{callback:noOp,once:!1,time:0}}invoke(Ke){this.callback&&(this.callback(Ke),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}TransportEvent._eventId=0;class TransportRepeatEvent extends TransportEvent{constructor(Ke,Ye){super(Ke,Ye),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const Je=Object.assign(TransportRepeatEvent.getDefaults(),Ye);this.duration=new TicksClass(Ke.context,Je.duration).valueOf(),this._interval=new TicksClass(Ke.context,Je.interval).valueOf(),this._nextTick=Je.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},TransportEvent.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(Ke){this._createEvents(Ke),super.invoke(Ke)}_createEvents(Ke){const Ye=this.transport.getTicksAtTime(Ke);Ye>=this.time&&Ye>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()))}_restart(Ke){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const Ye=this.transport.getTicksAtTime(Ke);Ye>this.time&&(this._nextTick=this.time+Math.ceil((Ye-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}let Transport$1=class fc extends ToneWithContext{constructor(){super(optionsFromArguments(fc.getDefaults(),arguments)),this.name="Transport",this._loop=new TimelineValue(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Timeline,this._repeatedEvents=new IntervalTimeline,this._syncedSignals=[],this._swingAmount=0;const Ke=optionsFromArguments(fc.getDefaults(),arguments);this._ppq=Ke.ppq,this._clock=new Clock({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=Ke.ppq,this.bpm.setValueAtTime(Ke.bpm,0),readOnly(this,"bpm"),this._timeSignature=Ke.timeSignature,this._swingTicks=Ke.ppq/2}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(Ke,Ye){if(this._loop.get(Ke)&&Ye>=this._loopEnd&&(this.emit("loopEnd",Ke),this._clock.setTicksAtTime(this._loopStart,Ke),Ye=this._loopStart,this.emit("loopStart",Ke,this._clock.getSecondsAtTime(Ke)),this.emit("loop",Ke)),this._swingAmount>0&&Ye%this._ppq!==0&&Ye%(this._swingTicks*2)!==0){const Je=Ye%(this._swingTicks*2)/(this._swingTicks*2),tt=Math.sin(Je*Math.PI)*this._swingAmount;Ke+=new TicksClass(this.context,this._swingTicks*2/3).toSeconds()*tt}this._timeline.forEachAtTime(Ye,Je=>Je.invoke(Ke))}schedule(Ke,Ye){const Je=new TransportEvent(this,{callback:Ke,time:new TransportTimeClass(this.context,Ye).toTicks()});return this._addEvent(Je,this._timeline)}scheduleRepeat(Ke,Ye,Je,tt=1/0){const st=new TransportRepeatEvent(this,{callback:Ke,duration:new TimeClass(this.context,tt).toTicks(),interval:new TimeClass(this.context,Ye).toTicks(),time:new TransportTimeClass(this.context,Je).toTicks()});return this._addEvent(st,this._repeatedEvents)}scheduleOnce(Ke,Ye){const Je=new TransportEvent(this,{callback:Ke,once:!0,time:new TransportTimeClass(this.context,Ye).toTicks()});return this._addEvent(Je,this._timeline)}clear(Ke){if(this._scheduledEvents.hasOwnProperty(Ke)){const Ye=this._scheduledEvents[Ke.toString()];Ye.timeline.remove(Ye.event),Ye.event.dispose(),delete this._scheduledEvents[Ke.toString()]}return this}_addEvent(Ke,Ye){return this._scheduledEvents[Ke.id.toString()]={event:Ke,timeline:Ye},Ye.add(Ke),Ke.id}cancel(Ke=0){const Ye=this.toTicks(Ke);return this._timeline.forEachFrom(Ye,Je=>this.clear(Je.id)),this._repeatedEvents.forEachFrom(Ye,Je=>this.clear(Je.id)),this}_bindClockEvents(){this._clock.on("start",(Ke,Ye)=>{Ye=new TicksClass(this.context,Ye).toSeconds(),this.emit("start",Ke,Ye)}),this._clock.on("stop",Ke=>{this.emit("stop",Ke)}),this._clock.on("pause",Ke=>{this.emit("pause",Ke)})}get state(){return this._clock.getStateAtTime(this.now())}start(Ke,Ye){let Je;return isDefined(Ye)&&(Je=this.toTicks(Ye)),this._clock.start(Ke,Je),this}stop(Ke){return this._clock.stop(Ke),this}pause(Ke){return this._clock.pause(Ke),this}toggle(Ke){return Ke=this.toSeconds(Ke),this._clock.getStateAtTime(Ke)!=="started"?this.start(Ke):this.stop(Ke),this}get timeSignature(){return this._timeSignature}set timeSignature(Ke){isArray$8(Ke)&&(Ke=Ke[0]/Ke[1]*4),this._timeSignature=Ke}get loopStart(){return new TimeClass(this.context,this._loopStart,"i").toSeconds()}set loopStart(Ke){this._loopStart=this.toTicks(Ke)}get loopEnd(){return new TimeClass(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(Ke){this._loopEnd=this.toTicks(Ke)}get loop(){return this._loop.get(this.now())}set loop(Ke){this._loop.set(Ke,this.now())}setLoopPoints(Ke,Ye){return this.loopStart=Ke,this.loopEnd=Ye,this}get swing(){return this._swingAmount}set swing(Ke){this._swingAmount=Ke}get swingSubdivision(){return new TicksClass(this.context,this._swingTicks).toNotation()}set swingSubdivision(Ke){this._swingTicks=this.toTicks(Ke)}get position(){const Ke=this.now(),Ye=this._clock.getTicksAtTime(Ke);return new TicksClass(this.context,Ye).toBarsBeatsSixteenths()}set position(Ke){const Ye=this.toTicks(Ke);this.ticks=Ye}get seconds(){return this._clock.seconds}set seconds(Ke){const Ye=this.now(),Je=this._clock.frequency.timeToTicks(Ke,Ye);this.ticks=Je}get progress(){if(this.loop){const Ke=this.now();return(this._clock.getTicksAtTime(Ke)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(Ke){if(this._clock.ticks!==Ke){const Ye=this.now();if(this.state==="started"){const Je=this._clock.getTicksAtTime(Ye),tt=this._clock.frequency.getDurationOfTicks(Math.ceil(Je)-Je,Ye),st=Ye+tt;this.emit("stop",st),this._clock.setTicksAtTime(Ke,st),this.emit("start",st,this._clock.getSecondsAtTime(st))}else this._clock.setTicksAtTime(Ke,Ye)}}getTicksAtTime(Ke){return Math.round(this._clock.getTicksAtTime(Ke))}getSecondsAtTime(Ke){return this._clock.getSecondsAtTime(Ke)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(Ke){this._clock.frequency.multiplier=Ke}nextSubdivision(Ke){if(Ke=this.toTicks(Ke),this.state!=="started")return 0;{const Ye=this.now(),Je=this.getTicksAtTime(Ye),tt=Ke-Je%Ke;return this._clock.nextTickTime(tt,Ye)}}syncSignal(Ke,Ye){if(!Ye){const tt=this.now();if(Ke.getValueAtTime(tt)!==0){const rt=1/(60/this.bpm.getValueAtTime(tt)/this.PPQ);Ye=Ke.getValueAtTime(tt)/rt}else Ye=0}const Je=new Gain(Ye);return this.bpm.connect(Je),Je.connect(Ke._param),this._syncedSignals.push({initial:Ke.value,ratio:Je,signal:Ke}),Ke.value=0,this}unsyncSignal(Ke){for(let Ye=this._syncedSignals.length-1;Ye>=0;Ye--){const Je=this._syncedSignals[Ye];Je.signal===Ke&&(Je.ratio.dispose(),Je.signal.value=Je.initial,this._syncedSignals.splice(Ye,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),writable(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}};Emitter.mixin(Transport$1);onContextInit(Xe=>{Xe.transport=new Transport$1({context:Xe})});onContextClose(Xe=>{Xe.transport.dispose()});class Source extends ToneAudioNode{constructor(Ke){super(Ke),this.input=void 0,this._state=new StateTimeline("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=noOp,this._syncedStop=noOp,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Volume({context:this.context,mute:Ke.mute,volume:Ke.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this.onstop=Ke.onstop}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,onstop:noOp,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(Ke){this._volume.mute=Ke}_clampToCurrentTime(Ke){return this._synced?Ke:Math.max(Ke,this.context.currentTime)}start(Ke,Ye,Je){let tt=isUndef(Ke)&&this._synced?this.context.transport.seconds:this.toSeconds(Ke);if(tt=this._clampToCurrentTime(tt),!this._synced&&this._state.getValueAtTime(tt)==="started")assert(GT(tt,this._state.get(tt).time),"Start time must be strictly greater than previous start time"),this._state.cancel(tt),this._state.setStateAtTime("started",tt),this.log("restart",tt),this.restart(tt,Ye,Je);else if(this.log("start",tt),this._state.setStateAtTime("started",tt),this._synced){const st=this._state.get(tt);st&&(st.offset=this.toSeconds(defaultArg(Ye,0)),st.duration=Je?this.toSeconds(Je):void 0);const rt=this.context.transport.schedule(it=>{this._start(it,Ye,Je)},tt);this._scheduled.push(rt),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>tt&&this._syncedStart(this.now(),this.context.transport.seconds)}else assertContextRunning(this.context),this._start(tt,Ye,Je);return this}stop(Ke){let Ye=isUndef(Ke)&&this._synced?this.context.transport.seconds:this.toSeconds(Ke);if(Ye=this._clampToCurrentTime(Ye),this._state.getValueAtTime(Ye)==="started"||isDefined(this._state.getNextState("started",Ye))){if(this.log("stop",Ye),!this._synced)this._stop(Ye);else{const Je=this.context.transport.schedule(this._stop.bind(this),Ye);this._scheduled.push(Je)}this._state.cancel(Ye),this._state.setStateAtTime("stopped",Ye)}return this}restart(Ke,Ye,Je){return Ke=this.toSeconds(Ke),this._state.getValueAtTime(Ke)==="started"&&(this._state.cancel(Ke),this._restart(Ke,Ye,Je)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(Ke,Ye)=>{if(Ye>0){const Je=this._state.get(Ye);if(Je&&Je.state==="started"&&Je.time!==Ye){const tt=Ye-this.toSeconds(Je.time);let st;Je.duration&&(st=this.toSeconds(Je.duration)-tt),this._start(Ke,this.toSeconds(Je.offset)+tt,st)}}},this._syncedStop=Ke=>{const Ye=this.context.transport.getSecondsAtTime(Math.max(Ke-this.sampleTime,0));this._state.getValueAtTime(Ye)==="started"&&this._stop(Ke)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(Ke=>this.context.transport.clear(Ke)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=noOp,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ToneBufferSource extends OneShotSource{constructor(){super(optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const Ke=optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"]);connect(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Param({context:this.context,param:this._source.playbackRate,units:"positive",value:Ke.playbackRate}),this.loop=Ke.loop,this.loopStart=Ke.loopStart,this.loopEnd=Ke.loopEnd,this._buffer=new ToneAudioBuffer(Ke.url,Ke.onload,Ke.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{url:new ToneAudioBuffer,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(Ke){this._fadeIn=Ke}get fadeOut(){return this._fadeOut}set fadeOut(Ke){this._fadeOut=Ke}get curve(){return this._curve}set curve(Ke){this._curve=Ke}start(Ke,Ye,Je,tt=1){assert(this.buffer.loaded,"buffer is either not set or not loaded");const st=this.toSeconds(Ke);this._startGain(st,tt),this.loop?Ye=defaultArg(Ye,this.loopStart):Ye=defaultArg(Ye,0);let rt=Math.max(this.toSeconds(Ye),0);if(this.loop){const it=this.toSeconds(this.loopEnd)||this.buffer.duration,ot=this.toSeconds(this.loopStart),at=it-ot;GTE(rt,it)&&(rt=(rt-ot)%at+ot),EQ(rt,this.buffer.duration)&&(rt=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,LT(rt,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(st,rt)),isDefined(Je)){let it=this.toSeconds(Je);it=Math.max(it,0),this.stop(st+it)}return this}_stopSource(Ke){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(Ke)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(Ke){this._source.loopStart=this.toSeconds(Ke)}get loopEnd(){return this._source.loopEnd}set loopEnd(Ke){this._source.loopEnd=this.toSeconds(Ke)}get buffer(){return this._buffer}set buffer(Ke){this._buffer.set(Ke)}get loop(){return this._source.loop}set loop(Ke){this._source.loop=Ke,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Noise extends Source{constructor(){super(optionsFromArguments(Noise.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const Ke=optionsFromArguments(Noise.getDefaults(),arguments,["type"]);this._playbackRate=Ke.playbackRate,this.type=Ke.type,this._fadeIn=Ke.fadeIn,this._fadeOut=Ke.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(Ke){if(assert(Ke in _noiseBuffers,"Noise: invalid type: "+Ke),this._type!==Ke&&(this._type=Ke,this.state==="started")){const Ye=this.now();this._stop(Ye),this._start(Ye)}}get playbackRate(){return this._playbackRate}set playbackRate(Ke){this._playbackRate=Ke,this._source&&(this._source.playbackRate.value=Ke)}_start(Ke){const Ye=_noiseBuffers[this._type];this._source=new ToneBufferSource({url:Ye,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(Ke),Math.random()*(Ye.duration-.001))}_stop(Ke){this._source&&(this._source.stop(this.toSeconds(Ke)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(Ke){this._fadeIn=Ke,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(Ke){this._fadeOut=Ke,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(Ke){this._stop(Ke),this._start(Ke)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const BUFFER_LENGTH=44100*5,NUM_CHANNELS=2,_noiseCache={brown:null,pink:null,white:null},_noiseBuffers={get brown(){if(!_noiseCache.brown){const Xe=[];for(let Ke=0;Ke<NUM_CHANNELS;Ke++){const Ye=new Float32Array(BUFFER_LENGTH);Xe[Ke]=Ye;let Je=0;for(let tt=0;tt<BUFFER_LENGTH;tt++){const st=Math.random()*2-1;Ye[tt]=(Je+.02*st)/1.02,Je=Ye[tt],Ye[tt]*=3.5}}_noiseCache.brown=new ToneAudioBuffer().fromArray(Xe)}return _noiseCache.brown},get pink(){if(!_noiseCache.pink){const Xe=[];for(let Ke=0;Ke<NUM_CHANNELS;Ke++){const Ye=new Float32Array(BUFFER_LENGTH);Xe[Ke]=Ye;let Je,tt,st,rt,it,ot,at;Je=tt=st=rt=it=ot=at=0;for(let lt=0;lt<BUFFER_LENGTH;lt++){const ut=Math.random()*2-1;Je=.99886*Je+ut*.0555179,tt=.99332*tt+ut*.0750759,st=.969*st+ut*.153852,rt=.8665*rt+ut*.3104856,it=.55*it+ut*.5329522,ot=-.7616*ot-ut*.016898,Ye[lt]=Je+tt+st+rt+it+ot+at+ut*.5362,Ye[lt]*=.11,at=ut*.115926}}_noiseCache.pink=new ToneAudioBuffer().fromArray(Xe)}return _noiseCache.pink},get white(){if(!_noiseCache.white){const Xe=[];for(let Ke=0;Ke<NUM_CHANNELS;Ke++){const Ye=new Float32Array(BUFFER_LENGTH);Xe[Ke]=Ye;for(let Je=0;Je<BUFFER_LENGTH;Je++)Ye[Je]=Math.random()*2-1}_noiseCache.white=new ToneAudioBuffer().fromArray(Xe)}return _noiseCache.white}};class UserMedia extends ToneAudioNode{constructor(){super(optionsFromArguments(UserMedia.getDefaults(),arguments,["volume"])),this.name="UserMedia";const Ke=optionsFromArguments(UserMedia.getDefaults(),arguments,["volume"]);this._volume=this.output=new Volume({context:this.context,volume:Ke.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this.mute=Ke.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}open(Ke){return __awaiter$1(this,void 0,void 0,function*(){assert(UserMedia.supported,"UserMedia is not supported"),this.state==="started"&&this.close();const Ye=yield UserMedia.enumerateDevices();isNumber$2(Ke)?this._device=Ye[Ke]:(this._device=Ye.find(st=>st.label===Ke||st.deviceId===Ke),!this._device&&Ye.length>0&&(this._device=Ye[0]),assert(isDefined(this._device),`No matching device ${Ke}`));const Je={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(Je.audio.deviceId=this._device.deviceId);const tt=yield navigator.mediaDevices.getUserMedia(Je);if(!this._stream){this._stream=tt;const st=this.context.createMediaStreamSource(tt);connect(st,this.output),this._mediaStream=st}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(Ke=>{Ke.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return __awaiter$1(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(Ye=>Ye.kind==="audioinput")})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){if(this._device)return this._device.deviceId}get groupId(){if(this._device)return this._device.groupId}get label(){if(this._device)return this._device.label}get mute(){return this._volume.mute}set mute(Ke){this._volume.mute=Ke}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return isDefined(navigator.mediaDevices)&&isDefined(navigator.mediaDevices.getUserMedia)}}function generateWaveform(Xe,Ke){return __awaiter$1(this,void 0,void 0,function*(){const Ye=Ke/Xe.context.sampleRate,Je=new OfflineContext(1,Ye,Xe.context.sampleRate);return new Xe.constructor(Object.assign(Xe.get(),{frequency:2/Ye,detune:0,context:Je})).toDestination().start(0),(yield Je.render()).getChannelData(0)})}class ToneOscillatorNode extends OneShotSource{constructor(){super(optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const Ke=optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"]);connect(this._oscillator,this._gainNode),this.type=Ke.type,this.frequency=new Param({context:this.context,param:this._oscillator.frequency,units:"frequency",value:Ke.frequency}),this.detune=new Param({context:this.context,param:this._oscillator.detune,units:"cents",value:Ke.detune}),readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(Ke){const Ye=this.toSeconds(Ke);return this.log("start",Ye),this._startGain(Ye),this._oscillator.start(Ye),this}_stopSource(Ke){this._oscillator.stop(Ke)}setPeriodicWave(Ke){return this._oscillator.setPeriodicWave(Ke),this}get type(){return this._oscillator.type}set type(Ke){this._oscillator.type=Ke}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Oscillator extends Source{constructor(){super(optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const Ke=optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"]);this.frequency=new Signal({context:this.context,units:"frequency",value:Ke.frequency}),readOnly(this,"frequency"),this.detune=new Signal({context:this.context,units:"cents",value:Ke.detune}),readOnly(this,"detune"),this._partials=Ke.partials,this._partialCount=Ke.partialCount,this._type=Ke.type,Ke.partialCount&&Ke.type!=="custom"&&(this._type=this.baseType+Ke.partialCount.toString()),this.phase=Ke.phase}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(Ke){const Ye=this.toSeconds(Ke),Je=new ToneOscillatorNode({context:this.context,onended:()=>this.onstop(this)});this._oscillator=Je,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(Ye)}_stop(Ke){const Ye=this.toSeconds(Ke);this._oscillator&&this._oscillator.stop(Ye)}_restart(Ke){const Ye=this.toSeconds(Ke);return this.log("restart",Ye),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(Ye),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Oscillator._periodicWaveCache.find(Ye=>Ye.phase===this._phase&&deepEquals(Ye.partials,this._partials));{const Ke=Oscillator._periodicWaveCache.find(Ye=>Ye.type===this._type&&Ye.phase===this._phase);return this._partialCount=Ke?Ke.partialCount:this._partialCount,Ke}}get type(){return this._type}set type(Ke){this._type=Ke;const Ye=["sine","square","sawtooth","triangle"].indexOf(Ke)!==-1;if(this._phase===0&&Ye)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=Ke);else{const Je=this._getCachedPeriodicWave();if(isDefined(Je)){const{partials:tt,wave:st}=Je;this._wave=st,this._partials=tt,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[tt,st]=this._getRealImaginary(Ke,this._phase),rt=this.context.createPeriodicWave(tt,st);this._wave=rt,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Oscillator._periodicWaveCache.push({imag:st,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:tt,type:this._type,wave:this._wave}),Oscillator._periodicWaveCache.length>100&&Oscillator._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(Ke){this.partialCount&&this._type!=="custom"&&Ke!=="custom"?this.type=Ke+this.partialCount:this.type=Ke}get partialCount(){return this._partialCount}set partialCount(Ke){assertRange(Ke,0);let Ye=this._type;const Je=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(Je&&(Ye=Je[1]),this._type!=="custom")Ke===0?this.type=Ye:this.type=Ye+Ke.toString();else{const tt=new Float32Array(Ke);this._partials.forEach((st,rt)=>tt[rt]=st),this._partials=Array.from(tt),this.type=this._type}}_getRealImaginary(Ke,Ye){let tt=2048;const st=new Float32Array(tt),rt=new Float32Array(tt);let it=1;if(Ke==="custom"){if(it=this._partials.length+1,this._partialCount=this._partials.length,tt=it,this._partials.length===0)return[st,rt]}else{const ot=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(Ke);ot?(it=parseInt(ot[2],10)+1,this._partialCount=parseInt(ot[2],10),Ke=ot[1],it=Math.max(it,2),tt=it):this._partialCount=0,this._partials=[]}for(let ot=1;ot<tt;++ot){const at=2/(ot*Math.PI);let lt;switch(Ke){case"sine":lt=ot<=it?1:0,this._partials[ot-1]=lt;break;case"square":lt=ot&1?2*at:0,this._partials[ot-1]=lt;break;case"sawtooth":lt=at*(ot&1?1:-1),this._partials[ot-1]=lt;break;case"triangle":ot&1?lt=2*(at*at)*(ot-1>>1&1?-1:1):lt=0,this._partials[ot-1]=lt;break;case"custom":lt=this._partials[ot-1];break;default:throw new TypeError("Oscillator: invalid type: "+Ke)}lt!==0?(st[ot]=-lt*Math.sin(Ye*ot),rt[ot]=lt*Math.cos(Ye*ot)):(st[ot]=0,rt[ot]=0)}return[st,rt]}_inverseFFT(Ke,Ye,Je){let tt=0;const st=Ke.length;for(let rt=0;rt<st;rt++)tt+=Ke[rt]*Math.cos(rt*Je)+Ye[rt]*Math.sin(rt*Je);return tt}getInitialValue(){const[Ke,Ye]=this._getRealImaginary(this._type,0);let Je=0;const tt=Math.PI*2,st=32;for(let rt=0;rt<st;rt++)Je=Math.max(this._inverseFFT(Ke,Ye,rt/st*tt),Je);return clamp(-this._inverseFFT(Ke,Ye,this._phase)/Je,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(Ke){this._partials=Ke,this._partialCount=this._partials.length,Ke.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(Ke){this._phase=Ke*Math.PI/180,this.type=this._type}asArray(Ke=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,Ke)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Oscillator._periodicWaveCache=[];class SignalOperator extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(SignalOperator.getDefaults(),arguments,["context"])))}connect(Ke,Ye=0,Je=0){return connectSignal(this,Ke,Ye,Je),this}}class WaveShaper extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const Ke=optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]);isArray$8(Ke.mapping)||Ke.mapping instanceof Float32Array?this.curve=Float32Array.from(Ke.mapping):isFunction$2(Ke.mapping)&&this.setMap(Ke.mapping,Ke.length)}static getDefaults(){return Object.assign(Signal.getDefaults(),{length:1024})}setMap(Ke,Ye=1024){const Je=new Float32Array(Ye);for(let tt=0,st=Ye;tt<st;tt++){const rt=tt/(st-1)*2-1;Je[tt]=Ke(rt,tt)}return this.curve=Je,this}get curve(){return this._shaper.curve}set curve(Ke){this._shaper.curve=Ke}get oversample(){return this._shaper.oversample}set oversample(Ke){const Ye=["none","2x","4x"].some(Je=>Je.includes(Ke));assert(Ye,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=Ke}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class AudioToGain extends SignalOperator{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new WaveShaper({context:this.context,mapping:Ke=>(Ke+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Multiply extends Signal{constructor(){super(Object.assign(optionsFromArguments(Multiply.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const Ke=optionsFromArguments(Multiply.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Gain({context:this.context,minValue:Ke.minValue,maxValue:Ke.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(Ke.value,0)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class AMOscillator extends Source{constructor(){super(optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new AudioToGain({context:this.context}),this._modulationNode=new Gain({context:this.context});const Ke=optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Oscillator({context:this.context,detune:Ke.detune,frequency:Ke.frequency,onstop:()=>this.onstop(this),phase:Ke.phase,type:Ke.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Oscillator({context:this.context,phase:Ke.phase,type:Ke.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:Ke.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),readOnly(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(Ke){this._modulator.start(Ke),this._carrier.start(Ke)}_stop(Ke){this._modulator.stop(Ke),this._carrier.stop(Ke)}_restart(Ke){this._modulator.restart(Ke),this._carrier.restart(Ke)}get type(){return this._carrier.type}set type(Ke){this._carrier.type=Ke}get baseType(){return this._carrier.baseType}set baseType(Ke){this._carrier.baseType=Ke}get partialCount(){return this._carrier.partialCount}set partialCount(Ke){this._carrier.partialCount=Ke}get modulationType(){return this._modulator.type}set modulationType(Ke){this._modulator.type=Ke}get phase(){return this._carrier.phase}set phase(Ke){this._carrier.phase=Ke,this._modulator.phase=Ke}get partials(){return this._carrier.partials}set partials(Ke){this._carrier.partials=Ke}asArray(Ke=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,Ke)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class FMOscillator extends Source{constructor(){super(optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Gain({context:this.context,gain:0});const Ke=optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Oscillator({context:this.context,detune:Ke.detune,frequency:0,onstop:()=>this.onstop(this),phase:Ke.phase,type:Ke.type}),this.detune=this._carrier.detune,this.frequency=new Signal({context:this.context,units:"frequency",value:Ke.frequency}),this._modulator=new Oscillator({context:this.context,phase:Ke.phase,type:Ke.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:Ke.harmonicity}),this.modulationIndex=new Multiply({context:this.context,units:"positive",value:Ke.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),readOnly(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(Ke){this._modulator.start(Ke),this._carrier.start(Ke)}_stop(Ke){this._modulator.stop(Ke),this._carrier.stop(Ke)}_restart(Ke){return this._modulator.restart(Ke),this._carrier.restart(Ke),this}get type(){return this._carrier.type}set type(Ke){this._carrier.type=Ke}get baseType(){return this._carrier.baseType}set baseType(Ke){this._carrier.baseType=Ke}get partialCount(){return this._carrier.partialCount}set partialCount(Ke){this._carrier.partialCount=Ke}get modulationType(){return this._modulator.type}set modulationType(Ke){this._modulator.type=Ke}get phase(){return this._carrier.phase}set phase(Ke){this._carrier.phase=Ke,this._modulator.phase=Ke}get partials(){return this._carrier.partials}set partials(Ke){this._carrier.partials=Ke}asArray(Ke=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,Ke)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class PulseOscillator extends Source{constructor(){super(optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Gain({context:this.context,gain:0}),this._thresh=new WaveShaper({context:this.context,mapping:Ye=>Ye<=0?-1:1});const Ke=optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"]);this.width=new Signal({context:this.context,units:"audioRange",value:Ke.width}),this._triangle=new Oscillator({context:this.context,detune:Ke.detune,frequency:Ke.frequency,onstop:()=>this.onstop(this),phase:Ke.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),readOnly(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(Ke){Ke=this.toSeconds(Ke),this._triangle.start(Ke),this._widthGate.gain.setValueAtTime(1,Ke)}_stop(Ke){Ke=this.toSeconds(Ke),this._triangle.stop(Ke),this._widthGate.gain.cancelScheduledValues(Ke),this._widthGate.gain.setValueAtTime(0,Ke)}_restart(Ke){this._triangle.restart(Ke),this._widthGate.gain.cancelScheduledValues(Ke),this._widthGate.gain.setValueAtTime(1,Ke)}get phase(){return this._triangle.phase}set phase(Ke){this._triangle.phase=Ke}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(Ke){this._triangle.type=Ke}asArray(Ke=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,Ke)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class FatOscillator extends Source{constructor(){super(optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const Ke=optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Signal({context:this.context,units:"frequency",value:Ke.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:Ke.detune}),this._spread=Ke.spread,this._type=Ke.type,this._phase=Ke.phase,this._partials=Ke.partials,this._partialCount=Ke.partialCount,this.count=Ke.count,readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(Ke){Ke=this.toSeconds(Ke),this._forEach(Ye=>Ye.start(Ke))}_stop(Ke){Ke=this.toSeconds(Ke),this._forEach(Ye=>Ye.stop(Ke))}_restart(Ke){this._forEach(Ye=>Ye.restart(Ke))}_forEach(Ke){for(let Ye=0;Ye<this._oscillators.length;Ye++)Ke(this._oscillators[Ye],Ye)}get type(){return this._type}set type(Ke){this._type=Ke,this._forEach(Ye=>Ye.type=Ke)}get spread(){return this._spread}set spread(Ke){if(this._spread=Ke,this._oscillators.length>1){const Ye=-Ke/2,Je=Ke/(this._oscillators.length-1);this._forEach((tt,st)=>tt.detune.value=Ye+Je*st)}}get count(){return this._oscillators.length}set count(Ke){if(assertRange(Ke,1),this._oscillators.length!==Ke){this._forEach(Ye=>Ye.dispose()),this._oscillators=[];for(let Ye=0;Ye<Ke;Ye++){const Je=new Oscillator({context:this.context,volume:-6-Ke*1.1,type:this._type,phase:this._phase+Ye/Ke*360,partialCount:this._partialCount,onstop:Ye===0?()=>this.onstop(this):noOp});this.type==="custom"&&(Je.partials=this._partials),this.frequency.connect(Je.frequency),this.detune.connect(Je.detune),Je.detune.overridden=!1,Je.connect(this.output),this._oscillators[Ye]=Je}this.spread=this._spread,this.state==="started"&&this._forEach(Ye=>Ye.start())}}get phase(){return this._phase}set phase(Ke){this._phase=Ke,this._forEach((Ye,Je)=>Ye.phase=this._phase+Je/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(Ke){this._forEach(Ye=>Ye.baseType=Ke),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(Ke){this._partials=Ke,this._partialCount=this._partials.length,Ke.length&&(this._type="custom",this._forEach(Ye=>Ye.partials=Ke))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(Ke){this._partialCount=Ke,this._forEach(Ye=>Ye.partialCount=Ke),this._type=this._oscillators[0].type}asArray(Ke=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,Ke)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(Ke=>Ke.dispose()),this}}class PWMOscillator extends Source{constructor(){super(optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Multiply({context:this.context,value:2});const Ke=optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new PulseOscillator({context:this.context,frequency:Ke.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Oscillator({context:this.context,detune:Ke.detune,frequency:Ke.frequency,onstop:()=>this.onstop(this),phase:Ke.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),readOnly(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(Ke){Ke=this.toSeconds(Ke),this._modulator.start(Ke),this._pulse.start(Ke)}_stop(Ke){Ke=this.toSeconds(Ke),this._modulator.stop(Ke),this._pulse.stop(Ke)}_restart(Ke){this._modulator.restart(Ke),this._pulse.restart(Ke)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(Ke){this._modulator.phase=Ke}asArray(Ke=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,Ke)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const OmniOscillatorSourceMap={am:AMOscillator,fat:FatOscillator,fm:FMOscillator,oscillator:Oscillator,pulse:PulseOscillator,pwm:PWMOscillator};class OmniOscillator extends Source{constructor(){super(optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const Ke=optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"]);this.frequency=new Signal({context:this.context,units:"frequency",value:Ke.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:Ke.detune}),readOnly(this,["frequency","detune"]),this.set(Ke)}static getDefaults(){return Object.assign(Oscillator.getDefaults(),FMOscillator.getDefaults(),AMOscillator.getDefaults(),FatOscillator.getDefaults(),PulseOscillator.getDefaults(),PWMOscillator.getDefaults())}_start(Ke){this._oscillator.start(Ke)}_stop(Ke){this._oscillator.stop(Ke)}_restart(Ke){return this._oscillator.restart(Ke),this}get type(){let Ke="";return["am","fm","fat"].some(Ye=>this._sourceType===Ye)&&(Ke=this._sourceType),Ke+this._oscillator.type}set type(Ke){Ke.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=Ke.substr(2)):Ke.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=Ke.substr(2)):Ke.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=Ke.substr(3)):Ke==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):Ke==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=Ke)}get partials(){return this._oscillator.partials}set partials(Ke){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=Ke)}get partialCount(){return this._oscillator.partialCount}set partialCount(Ke){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=Ke)}set(Ke){return Reflect.has(Ke,"type")&&Ke.type&&(this.type=Ke.type),super.set(Ke),this}_createNewOscillator(Ke){if(Ke!==this._sourceType){this._sourceType=Ke;const Ye=OmniOscillatorSourceMap[Ke],Je=this.now();if(this._oscillator){const tt=this._oscillator;tt.stop(Je),this.context.setTimeout(()=>tt.dispose(),this.blockTime)}this._oscillator=new Ye({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(Je)}}get phase(){return this._oscillator.phase}set phase(Ke){this._oscillator.phase=Ke}get sourceType(){return this._sourceType}set sourceType(Ke){let Ye="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(Ye=this._oscillator.type),Ke==="fm"?this.type="fm"+Ye:Ke==="am"?this.type="am"+Ye:Ke==="fat"?this.type="fat"+Ye:Ke==="oscillator"?this.type=Ye:Ke==="pulse"?this.type="pulse":Ke==="pwm"&&(this.type="pwm")}_getOscType(Ke,Ye){return Ke instanceof OmniOscillatorSourceMap[Ye]}get baseType(){return this._oscillator.baseType}set baseType(Ke){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&Ke!=="pulse"&&Ke!=="pwm"&&(this._oscillator.baseType=Ke)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(Ke){this._getOscType(this._oscillator,"fat")&&isNumber$2(Ke)&&(this._oscillator.count=Ke)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(Ke){this._getOscType(this._oscillator,"fat")&&isNumber$2(Ke)&&(this._oscillator.spread=Ke)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(Ke){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&isString$1(Ke)&&(this._oscillator.modulationType=Ke)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(Ke=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,Ke)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Add extends Signal{constructor(){super(Object.assign(optionsFromArguments(Add.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new Gain({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,connectSeries(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Scale extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(Scale.getDefaults(),arguments,["min","max"]))),this.name="Scale";const Ke=optionsFromArguments(Scale.getDefaults(),arguments,["min","max"]);this._mult=this.input=new Multiply({context:this.context,value:Ke.max-Ke.min}),this._add=this.output=new Add({context:this.context,value:Ke.min}),this._min=Ke.min,this._max=Ke.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(Ke){this._min=Ke,this._setRange()}get max(){return this._max}set max(Ke){this._max=Ke,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Zero extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(Zero.getDefaults(),arguments))),this.name="Zero",this._gain=new Gain({context:this.context}),this.output=this._gain,this.input=void 0,connect(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),disconnect(this.context.getConstant(0),this._gain),this}}class LFO extends ToneAudioNode{constructor(){super(optionsFromArguments(LFO.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Param.prototype._fromType,this._toType=Param.prototype._toType,this._is=Param.prototype._is,this._clampValue=Param.prototype._clampValue;const Ke=optionsFromArguments(LFO.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new Oscillator(Ke),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Gain({context:this.context,gain:Ke.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Signal({context:this.context,units:"audioRange",value:0}),this._zeros=new Zero({context:this.context}),this._a2g=new AudioToGain({context:this.context}),this._scaler=this.output=new Scale({context:this.context,max:Ke.max,min:Ke.min}),this.units=Ke.units,this.min=Ke.min,this.max=Ke.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),readOnly(this,["amplitude","frequency"]),this.phase=Ke.phase}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(Ke){return Ke=this.toSeconds(Ke),this._stoppedSignal.setValueAtTime(0,Ke),this._oscillator.start(Ke),this}stop(Ke){return Ke=this.toSeconds(Ke),this._stoppedSignal.setValueAtTime(this._stoppedValue,Ke),this._oscillator.stop(Ke),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(Ke){Ke=this._fromType(Ke),this._scaler.min=Ke}get max(){return this._toType(this._scaler.max)}set max(Ke){Ke=this._fromType(Ke),this._scaler.max=Ke}get type(){return this._oscillator.type}set type(Ke){this._oscillator.type=Ke,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(Ke){this._oscillator.partials=Ke,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(Ke){this._oscillator.phase=Ke,this._setStoppedValue()}get units(){return this._units}set units(Ke){const Ye=this.min,Je=this.max;this._units=Ke,this.min=Ye,this.max=Je}get state(){return this._oscillator.state}connect(Ke,Ye,Je){return(Ke instanceof Param||Ke instanceof Signal)&&(this.convert=Ke.convert,this.units=Ke.units),connectSignal(this,Ke,Ye,Je),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function range(Xe,Ke=1/0){const Ye=new WeakMap;return function(Je,tt){Reflect.defineProperty(Je,tt,{configurable:!0,enumerable:!0,get:function(){return Ye.get(this)},set:function(st){assertRange(st,Xe,Ke),Ye.set(this,st)}})}}function timeRange(Xe,Ke=1/0){const Ye=new WeakMap;return function(Je,tt){Reflect.defineProperty(Je,tt,{configurable:!0,enumerable:!0,get:function(){return Ye.get(this)},set:function(st){assertRange(this.toSeconds(st),Xe,Ke),Ye.set(this,st)}})}}let Player$1=class mc extends Source{constructor(){super(optionsFromArguments(mc.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const Ke=optionsFromArguments(mc.getDefaults(),arguments,["url","onload"]);this._buffer=new ToneAudioBuffer({onload:this._onload.bind(this,Ke.onload),onerror:Ke.onerror,reverse:Ke.reverse,url:Ke.url}),this.autostart=Ke.autostart,this._loop=Ke.loop,this._loopStart=Ke.loopStart,this._loopEnd=Ke.loopEnd,this._playbackRate=Ke.playbackRate,this.fadeIn=Ke.fadeIn,this.fadeOut=Ke.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1,reverse:!1})}load(Ke){return __awaiter$1(this,void 0,void 0,function*(){return yield this._buffer.load(Ke),this._onload(),this})}_onload(Ke=noOp){Ke(),this.autostart&&this.start()}_onSourceEnd(Ke){this.onstop(this),this._activeSources.delete(Ke),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(Ke,Ye,Je){return super.start(Ke,Ye,Je),this}_start(Ke,Ye,Je){this._loop?Ye=defaultArg(Ye,this._loopStart):Ye=defaultArg(Ye,0);const tt=this.toSeconds(Ye),st=Je;Je=defaultArg(Je,Math.max(this._buffer.duration-tt,0));let rt=this.toSeconds(Je);rt=rt/this._playbackRate,Ke=this.toSeconds(Ke);const it=new ToneBufferSource({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(Ke+rt),this._state.setStateAtTime("stopped",Ke+rt,{implicitEnd:!0})),this._activeSources.add(it),this._loop&&isUndef(st)?it.start(Ke,tt):it.start(Ke,tt,rt-this.toSeconds(this.fadeOut))}_stop(Ke){const Ye=this.toSeconds(Ke);this._activeSources.forEach(Je=>Je.stop(Ye))}restart(Ke,Ye,Je){return super.restart(Ke,Ye,Je),this}_restart(Ke,Ye,Je){this._stop(Ke),this._start(Ke,Ye,Je)}seek(Ke,Ye){const Je=this.toSeconds(Ye);if(this._state.getValueAtTime(Je)==="started"){const tt=this.toSeconds(Ke);this._stop(Je),this._start(Je,tt)}return this}setLoopPoints(Ke,Ye){return this.loopStart=Ke,this.loopEnd=Ye,this}get loopStart(){return this._loopStart}set loopStart(Ke){this._loopStart=Ke,this.buffer.loaded&&assertRange(this.toSeconds(Ke),0,this.buffer.duration),this._activeSources.forEach(Ye=>{Ye.loopStart=Ke})}get loopEnd(){return this._loopEnd}set loopEnd(Ke){this._loopEnd=Ke,this.buffer.loaded&&assertRange(this.toSeconds(Ke),0,this.buffer.duration),this._activeSources.forEach(Ye=>{Ye.loopEnd=Ke})}get buffer(){return this._buffer}set buffer(Ke){this._buffer.set(Ke)}get loop(){return this._loop}set loop(Ke){if(this._loop!==Ke&&(this._loop=Ke,this._activeSources.forEach(Ye=>{Ye.loop=Ke}),Ke)){const Ye=this._state.getNextState("stopped",this.now());Ye&&this._state.cancel(Ye.time)}}get playbackRate(){return this._playbackRate}set playbackRate(Ke){this._playbackRate=Ke;const Ye=this.now(),Je=this._state.getNextState("stopped",Ye);Je&&Je.implicitEnd&&(this._state.cancel(Je.time),this._activeSources.forEach(tt=>tt.cancelStop())),this._activeSources.forEach(tt=>{tt.playbackRate.setValueAtTime(Ke,Ye)})}get reverse(){return this._buffer.reverse}set reverse(Ke){this._buffer.reverse=Ke}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(Ke=>Ke.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}};__decorate$8([timeRange(0)],Player$1.prototype,"fadeIn",void 0);__decorate$8([timeRange(0)],Player$1.prototype,"fadeOut",void 0);class Players extends ToneAudioNode{constructor(){super(optionsFromArguments(Players.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;const Ke=optionsFromArguments(Players.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new Volume({context:this.context,volume:Ke.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this._buffers=new ToneAudioBuffers({urls:Ke.urls,onload:Ke.onload,baseUrl:Ke.baseUrl,onerror:Ke.onerror}),this.mute=Ke.mute,this._fadeIn=Ke.fadeIn,this._fadeOut=Ke.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:noOp,onerror:noOp,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(Ke){this._volume.mute=Ke}get fadeIn(){return this._fadeIn}set fadeIn(Ke){this._fadeIn=Ke,this._players.forEach(Ye=>{Ye.fadeIn=Ke})}get fadeOut(){return this._fadeOut}set fadeOut(Ke){this._fadeOut=Ke,this._players.forEach(Ye=>{Ye.fadeOut=Ke})}get state(){return Array.from(this._players).some(([Ye,Je])=>Je.state==="started")?"started":"stopped"}has(Ke){return this._buffers.has(Ke)}player(Ke){if(assert(this.has(Ke),`No Player with the name ${Ke} exists on this object`),!this._players.has(Ke)){const Ye=new Player$1({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(Ke)}).connect(this.output);this._players.set(Ke,Ye)}return this._players.get(Ke)}get loaded(){return this._buffers.loaded}add(Ke,Ye,Je){return assert(!this._buffers.has(Ke),"A buffer with that name already exists on this object"),this._buffers.add(Ke,Ye,Je),this}stopAll(Ke){return this._players.forEach(Ye=>Ye.stop(Ke)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(Ke=>Ke.dispose()),this._buffers.dispose(),this}}class GrainPlayer extends Source{constructor(){super(optionsFromArguments(GrainPlayer.getDefaults(),arguments,["url","onload"])),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[];const Ke=optionsFromArguments(GrainPlayer.getDefaults(),arguments,["url","onload"]);this.buffer=new ToneAudioBuffer({onload:Ke.onload,onerror:Ke.onerror,reverse:Ke.reverse,url:Ke.url}),this._clock=new Clock({context:this.context,callback:this._tick.bind(this),frequency:1/Ke.grainSize}),this._playbackRate=Ke.playbackRate,this._grainSize=Ke.grainSize,this._overlap=Ke.overlap,this.detune=Ke.detune,this.overlap=Ke.overlap,this.loop=Ke.loop,this.playbackRate=Ke.playbackRate,this.grainSize=Ke.grainSize,this.loopStart=Ke.loopStart,this.loopEnd=Ke.loopEnd,this.reverse=Ke.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(Source.getDefaults(),{onload:noOp,onerror:noOp,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(Ke,Ye,Je){Ye=defaultArg(Ye,0),Ye=this.toSeconds(Ye),Ke=this.toSeconds(Ke);const tt=1/this._clock.frequency.getValueAtTime(Ke);this._clock.start(Ke,Ye/tt),Je&&this.stop(Ke+this.toSeconds(Je))}restart(Ke,Ye,Je){return super.restart(Ke,Ye,Je),this}_restart(Ke,Ye,Je){this._stop(Ke),this._start(Ke,Ye,Je)}_stop(Ke){this._clock.stop(Ke)}_onstop(Ke){this._activeSources.forEach(Ye=>{Ye.fadeOut=0,Ye.stop(Ke)}),this.onstop(this)}_tick(Ke){const Ye=this._clock.getTicksAtTime(Ke),Je=Ye*this._grainSize;if(this.log("offset",Je),!this.loop&&Je>this.buffer.duration){this.stop(Ke);return}const tt=Je<this._overlap?0:this._overlap,st=new ToneBufferSource({context:this.context,url:this.buffer,fadeIn:tt,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:intervalToFrequencyRatio(this.detune/100)}).connect(this.output);st.start(Ke,this._grainSize*Ye),st.stop(Ke+this._grainSize/this.playbackRate),this._activeSources.push(st),st.onended=()=>{const rt=this._activeSources.indexOf(st);rt!==-1&&this._activeSources.splice(rt,1)}}get playbackRate(){return this._playbackRate}set playbackRate(Ke){assertRange(Ke,.001),this._playbackRate=Ke,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(Ke){this.buffer.loaded&&assertRange(this.toSeconds(Ke),0,this.buffer.duration),this._loopStart=this.toSeconds(Ke)}get loopEnd(){return this._loopEnd}set loopEnd(Ke){this.buffer.loaded&&assertRange(this.toSeconds(Ke),0,this.buffer.duration),this._loopEnd=this.toSeconds(Ke)}get reverse(){return this.buffer.reverse}set reverse(Ke){this.buffer.reverse=Ke}get grainSize(){return this._grainSize}set grainSize(Ke){this._grainSize=this.toSeconds(Ke),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(Ke){const Ye=this.toSeconds(Ke);assertRange(Ye,0),this._overlap=Ye}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(Ke=>Ke.dispose()),this}}class Abs extends SignalOperator{constructor(){super(...arguments),this.name="Abs",this._abs=new WaveShaper({context:this.context,mapping:Ke=>Math.abs(Ke)<.001?0:Math.abs(Ke)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class GainToAudio extends SignalOperator{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new WaveShaper({context:this.context,mapping:Ke=>Math.abs(Ke)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Negate extends SignalOperator{constructor(){super(...arguments),this.name="Negate",this._multiply=new Multiply({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class Subtract extends Signal{constructor(){super(Object.assign(optionsFromArguments(Subtract.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Subtract",this._sum=new Gain({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new Negate({context:this.context}),this.subtrahend=this._param,connectSeries(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class GreaterThanZero extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(GreaterThanZero.getDefaults(),arguments))),this.name="GreaterThanZero",this._thresh=this.output=new WaveShaper({context:this.context,length:127,mapping:Ke=>Ke<=0?0:1}),this._scale=this.input=new Multiply({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class GreaterThan extends Signal{constructor(){super(Object.assign(optionsFromArguments(GreaterThan.getDefaults(),arguments,["value"]))),this.name="GreaterThan",this.override=!1;const Ke=optionsFromArguments(GreaterThan.getDefaults(),arguments,["value"]);this._subtract=this.input=new Subtract({context:this.context,value:Ke.value}),this._gtz=this.output=new GreaterThanZero({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,readOnly(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class Pow extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(Pow.getDefaults(),arguments,["value"]))),this.name="Pow";const Ke=optionsFromArguments(Pow.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new WaveShaper({context:this.context,mapping:this._expFunc(Ke.value),length:8192}),this._exponent=Ke.value}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{value:1})}_expFunc(Ke){return Ye=>Math.pow(Math.abs(Ye),Ke)}get value(){return this._exponent}set value(Ke){this._exponent=Ke,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class ScaleExp extends Scale{constructor(){super(Object.assign(optionsFromArguments(ScaleExp.getDefaults(),arguments,["min","max","exponent"]))),this.name="ScaleExp";const Ke=optionsFromArguments(ScaleExp.getDefaults(),arguments,["min","max","exponent"]);this.input=this._exp=new Pow({context:this.context,value:Ke.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(Scale.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(Ke){this._exp.value=Ke}dispose(){return super.dispose(),this._exp.dispose(),this}}class SyncedSignal extends Signal{constructor(){super(optionsFromArguments(Signal.getDefaults(),arguments,["value","units"])),this.name="SyncedSignal",this.override=!1;const Ke=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);this._lastVal=Ke.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new ToneConstantSource({context:this.context,offset:Ke.value,units:Ke.units}).start(0),this.setValueAtTime(Ke.value,0)}_onTick(Ke){const Ye=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==Ye&&(this._lastVal=Ye,this._constantSource.offset.setValueAtTime(Ye,Ke))}_anchorValue(Ke){const Ye=super.getValueAtTime(this.context.transport.seconds);this._lastVal=Ye,this._constantSource.offset.cancelAndHoldAtTime(Ke),this._constantSource.offset.setValueAtTime(Ye,Ke)}getValueAtTime(Ke){const Ye=new TransportTimeClass(this.context,Ke).toSeconds();return super.getValueAtTime(Ye)}setValueAtTime(Ke,Ye){const Je=new TransportTimeClass(this.context,Ye).toSeconds();return super.setValueAtTime(Ke,Je),this}linearRampToValueAtTime(Ke,Ye){const Je=new TransportTimeClass(this.context,Ye).toSeconds();return super.linearRampToValueAtTime(Ke,Je),this}exponentialRampToValueAtTime(Ke,Ye){const Je=new TransportTimeClass(this.context,Ye).toSeconds();return super.exponentialRampToValueAtTime(Ke,Je),this}setTargetAtTime(Ke,Ye,Je){const tt=new TransportTimeClass(this.context,Ye).toSeconds();return super.setTargetAtTime(Ke,tt,Je),this}cancelScheduledValues(Ke){const Ye=new TransportTimeClass(this.context,Ke).toSeconds();return super.cancelScheduledValues(Ye),this}setValueCurveAtTime(Ke,Ye,Je,tt){const st=new TransportTimeClass(this.context,Ye).toSeconds();return Je=this.toSeconds(Je),super.setValueCurveAtTime(Ke,st,Je,tt),this}cancelAndHoldAtTime(Ke){const Ye=new TransportTimeClass(this.context,Ke).toSeconds();return super.cancelAndHoldAtTime(Ye),this}setRampPoint(Ke){const Ye=new TransportTimeClass(this.context,Ke).toSeconds();return super.setRampPoint(Ye),this}exponentialRampTo(Ke,Ye,Je){const tt=new TransportTimeClass(this.context,Je).toSeconds();return super.exponentialRampTo(Ke,Ye,tt),this}linearRampTo(Ke,Ye,Je){const tt=new TransportTimeClass(this.context,Je).toSeconds();return super.linearRampTo(Ke,Ye,tt),this}targetRampTo(Ke,Ye,Je){const tt=new TransportTimeClass(this.context,Je).toSeconds();return super.targetRampTo(Ke,Ye,tt),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class Envelope extends ToneAudioNode{constructor(){super(optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Signal({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const Ke=optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=Ke.attack,this.decay=Ke.decay,this.sustain=Ke.sustain,this.release=Ke.release,this.attackCurve=Ke.attackCurve,this.releaseCurve=Ke.releaseCurve,this.decayCurve=Ke.decayCurve}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(Ke,Ye){if(isString$1(Ke))return Ke;{let Je;for(Je in EnvelopeCurves)if(EnvelopeCurves[Je][Ye]===Ke)return Je;return Ke}}_setCurve(Ke,Ye,Je){if(isString$1(Je)&&Reflect.has(EnvelopeCurves,Je)){const tt=EnvelopeCurves[Je];isObject$4(tt)?Ke!=="_decayCurve"&&(this[Ke]=tt[Ye]):this[Ke]=tt}else if(isArray$8(Je)&&Ke!=="_decayCurve")this[Ke]=Je;else throw new Error("Envelope: invalid curve: "+Je)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(Ke){this._setCurve("_attackCurve","In",Ke)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(Ke){this._setCurve("_releaseCurve","Out",Ke)}get decayCurve(){return this._decayCurve}set decayCurve(Ke){assert(["linear","exponential"].some(Ye=>Ye===Ke),`Invalid envelope curve: ${Ke}`),this._decayCurve=Ke}triggerAttack(Ke,Ye=1){this.log("triggerAttack",Ke,Ye),Ke=this.toSeconds(Ke);let tt=this.toSeconds(this.attack);const st=this.toSeconds(this.decay),rt=this.getValueAtTime(Ke);if(rt>0){const it=1/tt;tt=(1-rt)/it}if(tt<this.sampleTime)this._sig.cancelScheduledValues(Ke),this._sig.setValueAtTime(Ye,Ke);else if(this._attackCurve==="linear")this._sig.linearRampTo(Ye,tt,Ke);else if(this._attackCurve==="exponential")this._sig.targetRampTo(Ye,tt,Ke);else{this._sig.cancelAndHoldAtTime(Ke);let it=this._attackCurve;for(let ot=1;ot<it.length;ot++)if(it[ot-1]<=rt&&rt<=it[ot]){it=this._attackCurve.slice(ot),it[0]=rt;break}this._sig.setValueCurveAtTime(it,Ke,tt,Ye)}if(st&&this.sustain<1){const it=Ye*this.sustain,ot=Ke+tt;this.log("decay",ot),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(it,st+ot):this._sig.exponentialApproachValueAtTime(it,ot,st)}return this}triggerRelease(Ke){this.log("triggerRelease",Ke),Ke=this.toSeconds(Ke);const Ye=this.getValueAtTime(Ke);if(Ye>0){const Je=this.toSeconds(this.release);Je<this.sampleTime?this._sig.setValueAtTime(0,Ke):this._releaseCurve==="linear"?this._sig.linearRampTo(0,Je,Ke):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,Je,Ke):(assert(isArray$8(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(Ke),this._sig.setValueCurveAtTime(this._releaseCurve,Ke,Je,Ye))}return this}getValueAtTime(Ke){return this._sig.getValueAtTime(Ke)}triggerAttackRelease(Ke,Ye,Je=1){return Ye=this.toSeconds(Ye),this.triggerAttack(Ye,Je),this.triggerRelease(Ye+this.toSeconds(Ke)),this}cancel(Ke){return this._sig.cancelScheduledValues(this.toSeconds(Ke)),this}connect(Ke,Ye=0,Je=0){return connectSignal(this,Ke,Ye,Je),this}asArray(Ke=1024){return __awaiter$1(this,void 0,void 0,function*(){const Ye=Ke/this.context.sampleRate,Je=new OfflineContext(1,Ye,this.context.sampleRate),tt=this.toSeconds(this.attack)+this.toSeconds(this.decay),st=tt+this.toSeconds(this.release),rt=st*.1,it=st+rt,ot=new this.constructor(Object.assign(this.get(),{attack:Ye*this.toSeconds(this.attack)/it,decay:Ye*this.toSeconds(this.decay)/it,release:Ye*this.toSeconds(this.release)/it,context:Je}));return ot._sig.toDestination(),ot.triggerAttackRelease(Ye*(tt+rt)/it,0),(yield Je.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}__decorate$8([timeRange(0)],Envelope.prototype,"attack",void 0);__decorate$8([timeRange(0)],Envelope.prototype,"decay",void 0);__decorate$8([range(0,1)],Envelope.prototype,"sustain",void 0);__decorate$8([timeRange(0)],Envelope.prototype,"release",void 0);const EnvelopeCurves=(()=>{let Ke,Ye;const Je=[];for(Ke=0;Ke<128;Ke++)Je[Ke]=Math.sin(Ke/127*(Math.PI/2));const tt=[],st=6.4;for(Ke=0;Ke<127;Ke++){Ye=Ke/127;const ht=Math.sin(Ye*(Math.PI*2)*st-Math.PI/2)+1;tt[Ke]=ht/10+Ye*.83}tt[127]=1;const rt=[],it=5;for(Ke=0;Ke<128;Ke++)rt[Ke]=Math.ceil(Ke/127*it)/it;const ot=[];for(Ke=0;Ke<128;Ke++)Ye=Ke/127,ot[Ke]=.5*(1-Math.cos(Math.PI*Ye));const at=[];for(Ke=0;Ke<128;Ke++){Ye=Ke/127;const ht=Math.pow(Ye,3)*4+.2,pt=Math.cos(ht*Math.PI*2*Ye);at[Ke]=Math.abs(pt*(1-Ye))}function lt(ht){const pt=new Array(ht.length);for(let ft=0;ft<ht.length;ft++)pt[ft]=1-ht[ft];return pt}function ut(ht){return ht.slice(0).reverse()}return{bounce:{In:lt(at),Out:at},cosine:{In:Je,Out:ut(Je)},exponential:"exponential",linear:"linear",ripple:{In:tt,Out:lt(tt)},sine:{In:ot,Out:lt(ot)},step:{In:rt,Out:lt(rt)}}})();let Instrument$3=class gc extends ToneAudioNode{constructor(){super(optionsFromArguments(gc.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const Ke=optionsFromArguments(gc.getDefaults(),arguments);this._volume=this.output=new Volume({context:this.context,volume:Ke.volume}),this.volume=this._volume.volume,readOnly(this,"volume")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let Ke=!1;return this._synced||(this._synced=!0,Ke=!0),Ke}_syncMethod(Ke,Ye){const Je=this["_original_"+Ke]=this[Ke];this[Ke]=(...tt)=>{const st=tt[Ye],rt=this.context.transport.schedule(it=>{tt[Ye]=it,Je.apply(this,tt)},st);this._scheduledEvents.push(rt)}}unsync(){return this._scheduledEvents.forEach(Ke=>this.context.transport.clear(Ke)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(Ke,Ye,Je,tt){const st=this.toSeconds(Je),rt=this.toSeconds(Ye);return this.triggerAttack(Ke,st,tt),this.triggerRelease(st+rt),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};class Monophonic extends Instrument$3{constructor(){super(optionsFromArguments(Monophonic.getDefaults(),arguments));const Ke=optionsFromArguments(Monophonic.getDefaults(),arguments);this.portamento=Ke.portamento,this.onsilence=Ke.onsilence}static getDefaults(){return Object.assign(Instrument$3.getDefaults(),{detune:0,onsilence:noOp,portamento:0})}triggerAttack(Ke,Ye,Je=1){this.log("triggerAttack",Ke,Ye,Je);const tt=this.toSeconds(Ye);return this._triggerEnvelopeAttack(tt,Je),this.setNote(Ke,tt),this}triggerRelease(Ke){this.log("triggerRelease",Ke);const Ye=this.toSeconds(Ke);return this._triggerEnvelopeRelease(Ye),this}setNote(Ke,Ye){const Je=this.toSeconds(Ye),tt=Ke instanceof FrequencyClass?Ke.toFrequency():Ke;if(this.portamento>0&&this.getLevelAtTime(Je)>.05){const st=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(tt,st,Je)}else this.frequency.setValueAtTime(tt,Je);return this}}__decorate$8([timeRange(0)],Monophonic.prototype,"portamento",void 0);class AmplitudeEnvelope extends Envelope{constructor(){super(optionsFromArguments(AmplitudeEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Gain({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Synth extends Monophonic{constructor(){super(optionsFromArguments(Synth.getDefaults(),arguments)),this.name="Synth";const Ke=optionsFromArguments(Synth.getDefaults(),arguments);this.oscillator=new OmniOscillator(Object.assign({context:this.context,detune:Ke.detune,onstop:()=>this.onsilence(this)},Ke.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},Ke.envelope)),this.oscillator.chain(this.envelope,this.output),readOnly(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(Ke,Ye){if(this.envelope.triggerAttack(Ke,Ye),this.oscillator.start(Ke),this.envelope.sustain===0){const Je=this.toSeconds(this.envelope.attack),tt=this.toSeconds(this.envelope.decay);this.oscillator.stop(Ke+Je+tt)}}_triggerEnvelopeRelease(Ke){this.envelope.triggerRelease(Ke),this.oscillator.stop(Ke+this.toSeconds(this.envelope.release))}getLevelAtTime(Ke){return Ke=this.toSeconds(Ke),this.envelope.getValueAtTime(Ke)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class ModulationSynth extends Monophonic{constructor(){super(optionsFromArguments(ModulationSynth.getDefaults(),arguments)),this.name="ModulationSynth";const Ke=optionsFromArguments(ModulationSynth.getDefaults(),arguments);this._carrier=new Synth({context:this.context,oscillator:Ke.oscillator,envelope:Ke.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Synth({context:this.context,oscillator:Ke.modulation,envelope:Ke.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Signal({context:this.context,units:"frequency"}),this.detune=new Signal({context:this.context,value:Ke.detune,units:"cents"}),this.harmonicity=new Multiply({context:this.context,value:Ke.harmonicity,minValue:0}),this._modulationNode=new Gain({context:this.context,gain:0}),readOnly(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{harmonicity:3,oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(Ke,Ye){this._carrier._triggerEnvelopeAttack(Ke,Ye),this._modulator._triggerEnvelopeAttack(Ke,Ye)}_triggerEnvelopeRelease(Ke){return this._carrier._triggerEnvelopeRelease(Ke),this._modulator._triggerEnvelopeRelease(Ke),this}getLevelAtTime(Ke){return Ke=this.toSeconds(Ke),this.envelope.getValueAtTime(Ke)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class AMSynth extends ModulationSynth{constructor(){super(optionsFromArguments(AMSynth.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new AudioToGain({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class BiquadFilter extends ToneAudioNode{constructor(){super(optionsFromArguments(BiquadFilter.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const Ke=optionsFromArguments(BiquadFilter.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Param({context:this.context,units:"number",value:Ke.Q,param:this._filter.Q}),this.frequency=new Param({context:this.context,units:"frequency",value:Ke.frequency,param:this._filter.frequency}),this.detune=new Param({context:this.context,units:"cents",value:Ke.detune,param:this._filter.detune}),this.gain=new Param({context:this.context,units:"decibels",convert:!1,value:Ke.gain,param:this._filter.gain}),this.type=Ke.type}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(Ke){assert(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(Ke)!==-1,`Invalid filter type: ${Ke}`),this._filter.type=Ke}getFrequencyResponse(Ke=128){const Ye=new Float32Array(Ke);for(let rt=0;rt<Ke;rt++){const ot=Math.pow(rt/Ke,2)*19980+20;Ye[rt]=ot}const Je=new Float32Array(Ke),tt=new Float32Array(Ke),st=this.context.createBiquadFilter();return st.type=this.type,st.Q.value=this.Q.value,st.frequency.value=this.frequency.value,st.gain.value=this.gain.value,st.getFrequencyResponse(Ye,Je,tt),Je}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Filter extends ToneAudioNode{constructor(){super(optionsFromArguments(Filter.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._filters=[];const Ke=optionsFromArguments(Filter.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new Signal({context:this.context,units:"positive",value:Ke.Q}),this.frequency=new Signal({context:this.context,units:"frequency",value:Ke.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:Ke.detune}),this.gain=new Signal({context:this.context,units:"decibels",convert:!1,value:Ke.gain}),this._type=Ke.type,this.rolloff=Ke.rolloff,readOnly(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(Ke){assert(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(Ke)!==-1,`Invalid filter type: ${Ke}`),this._type=Ke,this._filters.forEach(Je=>Je.type=Ke)}get rolloff(){return this._rolloff}set rolloff(Ke){const Ye=isNumber$2(Ke)?Ke:parseInt(Ke,10),Je=[-12,-24,-48,-96];let tt=Je.indexOf(Ye);assert(tt!==-1,`rolloff can only be ${Je.join(", ")}`),tt+=1,this._rolloff=Ye,this.input.disconnect(),this._filters.forEach(st=>st.disconnect()),this._filters=new Array(tt);for(let st=0;st<tt;st++){const rt=new BiquadFilter({context:this.context});rt.type=this._type,this.frequency.connect(rt.frequency),this.detune.connect(rt.detune),this.Q.connect(rt.Q),this.gain.connect(rt.gain),this._filters[st]=rt}this._internalChannels=this._filters,connectSeries(this.input,...this._internalChannels,this.output)}getFrequencyResponse(Ke=128){const Ye=new BiquadFilter({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),Je=new Float32Array(Ke).map(()=>1);return this._filters.forEach(()=>{Ye.getFrequencyResponse(Ke).forEach((st,rt)=>Je[rt]*=st)}),Ye.dispose(),Je}dispose(){return super.dispose(),this._filters.forEach(Ke=>{Ke.dispose()}),writable(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class FrequencyEnvelope extends Envelope{constructor(){super(optionsFromArguments(FrequencyEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const Ke=optionsFromArguments(FrequencyEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=Ke.octaves,this._baseFrequency=this.toFrequency(Ke.baseFrequency),this._exponent=this.input=new Pow({context:this.context,value:Ke.exponent}),this._scale=this.output=new Scale({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Envelope.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(Ke){const Ye=this.toFrequency(Ke);assertRange(Ye,0),this._baseFrequency=Ye,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(Ke){this._octaves=Ke,this._scale.max=this._baseFrequency*Math.pow(2,Ke)}get exponent(){return this._exponent.value}set exponent(Ke){this._exponent.value=Ke}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class MonoSynth extends Monophonic{constructor(){super(optionsFromArguments(MonoSynth.getDefaults(),arguments)),this.name="MonoSynth";const Ke=optionsFromArguments(MonoSynth.getDefaults(),arguments);this.oscillator=new OmniOscillator(Object.assign(Ke.oscillator,{context:this.context,detune:Ke.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Filter(Object.assign(Ke.filter,{context:this.context})),this.filterEnvelope=new FrequencyEnvelope(Object.assign(Ke.filterEnvelope,{context:this.context})),this.envelope=new AmplitudeEnvelope(Object.assign(Ke.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),readOnly(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(omitFromObject(Filter.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(omitFromObject(FrequencyEnvelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),Object.keys(Source.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(Ke,Ye=1){if(this.envelope.triggerAttack(Ke,Ye),this.filterEnvelope.triggerAttack(Ke),this.oscillator.start(Ke),this.envelope.sustain===0){const Je=this.toSeconds(this.envelope.attack),tt=this.toSeconds(this.envelope.decay);this.oscillator.stop(Ke+Je+tt)}}_triggerEnvelopeRelease(Ke){this.envelope.triggerRelease(Ke),this.filterEnvelope.triggerRelease(Ke),this.oscillator.stop(Ke+this.toSeconds(this.envelope.release))}getLevelAtTime(Ke){return Ke=this.toSeconds(Ke),this.envelope.getValueAtTime(Ke)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class DuoSynth extends Monophonic{constructor(){super(optionsFromArguments(DuoSynth.getDefaults(),arguments)),this.name="DuoSynth";const Ke=optionsFromArguments(DuoSynth.getDefaults(),arguments);this.voice0=new MonoSynth(Object.assign(Ke.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new MonoSynth(Object.assign(Ke.voice1,{context:this.context})),this.harmonicity=new Multiply({context:this.context,units:"positive",value:Ke.harmonicity}),this._vibrato=new LFO({frequency:Ke.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new Gain({context:this.context,units:"normalRange",gain:Ke.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Signal({context:this.context,units:"frequency",value:440}),this.detune=new Signal({context:this.context,units:"cents",value:Ke.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),readOnly(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(Ke){return Ke=this.toSeconds(Ke),this.voice0.envelope.getValueAtTime(Ke)+this.voice1.envelope.getValueAtTime(Ke)}static getDefaults(){return deepMerge(Monophonic.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:deepMerge(omitFromObject(MonoSynth.getDefaults(),Object.keys(Monophonic.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:deepMerge(omitFromObject(MonoSynth.getDefaults(),Object.keys(Monophonic.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(Ke,Ye){this.voice0._triggerEnvelopeAttack(Ke,Ye),this.voice1._triggerEnvelopeAttack(Ke,Ye)}_triggerEnvelopeRelease(Ke){return this.voice0._triggerEnvelopeRelease(Ke),this.voice1._triggerEnvelopeRelease(Ke),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class FMSynth extends ModulationSynth{constructor(){super(optionsFromArguments(FMSynth.getDefaults(),arguments)),this.name="FMSynth";const Ke=optionsFromArguments(FMSynth.getDefaults(),arguments);this.modulationIndex=new Multiply({context:this.context,value:Ke.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(ModulationSynth.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const inharmRatios=[1,1.483,1.932,2.546,2.63,3.897];class MetalSynth extends Monophonic{constructor(){super(optionsFromArguments(MetalSynth.getDefaults(),arguments)),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];const Ke=optionsFromArguments(MetalSynth.getDefaults(),arguments);this.detune=new Signal({context:this.context,units:"cents",value:Ke.detune}),this.frequency=new Signal({context:this.context,units:"frequency"}),this._amplitude=new Gain({context:this.context,gain:0}).connect(this.output),this._highpass=new Filter({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let Ye=0;Ye<inharmRatios.length;Ye++){const Je=new FMOscillator({context:this.context,harmonicity:Ke.harmonicity,modulationIndex:Ke.modulationIndex,modulationType:"square",onstop:Ye===0?()=>this.onsilence(this):noOp,type:"square"});Je.connect(this._highpass),this._oscillators[Ye]=Je;const tt=new Multiply({context:this.context,value:inharmRatios[Ye]});this._freqMultipliers[Ye]=tt,this.frequency.chain(tt,Je.frequency),this.detune.connect(Je.detune)}this._filterFreqScaler=new Scale({context:this.context,max:7e3,min:this.toFrequency(Ke.resonance)}),this.envelope=new Envelope({attack:Ke.envelope.attack,attackCurve:"linear",context:this.context,decay:Ke.envelope.decay,release:Ke.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=Ke.octaves,this.octaves=Ke.octaves}static getDefaults(){return deepMerge(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(Ke,Ye=1){return this.envelope.triggerAttack(Ke,Ye),this._oscillators.forEach(Je=>Je.start(Ke)),this.envelope.sustain===0&&this._oscillators.forEach(Je=>{Je.stop(Ke+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(Ke){return this.envelope.triggerRelease(Ke),this._oscillators.forEach(Ye=>Ye.stop(Ke+this.toSeconds(this.envelope.release))),this}getLevelAtTime(Ke){return Ke=this.toSeconds(Ke),this.envelope.getValueAtTime(Ke)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(Ke){this._oscillators.forEach(Ye=>Ye.modulationIndex.value=Ke)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(Ke){this._oscillators.forEach(Ye=>Ye.harmonicity.value=Ke)}get resonance(){return this._filterFreqScaler.min}set resonance(Ke){this._filterFreqScaler.min=this.toFrequency(Ke),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(Ke){this._octaves=Ke,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,Ke)}dispose(){return super.dispose(),this._oscillators.forEach(Ke=>Ke.dispose()),this._freqMultipliers.forEach(Ke=>Ke.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class MembraneSynth extends Synth{constructor(){super(optionsFromArguments(MembraneSynth.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const Ke=optionsFromArguments(MembraneSynth.getDefaults(),arguments);this.pitchDecay=Ke.pitchDecay,this.octaves=Ke.octaves,readOnly(this,["oscillator","envelope"])}static getDefaults(){return deepMerge(Monophonic.getDefaults(),Synth.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(Ke,Ye){const Je=this.toSeconds(Ye),tt=this.toFrequency(Ke instanceof FrequencyClass?Ke.toFrequency():Ke),st=tt*this.octaves;return this.oscillator.frequency.setValueAtTime(st,Je),this.oscillator.frequency.exponentialRampToValueAtTime(tt,Je+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}__decorate$8([range(0)],MembraneSynth.prototype,"octaves",void 0);__decorate$8([timeRange(0)],MembraneSynth.prototype,"pitchDecay",void 0);class NoiseSynth extends Instrument$3{constructor(){super(optionsFromArguments(NoiseSynth.getDefaults(),arguments)),this.name="NoiseSynth";const Ke=optionsFromArguments(NoiseSynth.getDefaults(),arguments);this.noise=new Noise(Object.assign({context:this.context},Ke.noise)),this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},Ke.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Instrument$3.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(omitFromObject(Noise.getDefaults(),Object.keys(Source.getDefaults())),{type:"white"})})}triggerAttack(Ke,Ye=1){return Ke=this.toSeconds(Ke),this.envelope.triggerAttack(Ke,Ye),this.noise.start(Ke),this.envelope.sustain===0&&this.noise.stop(Ke+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(Ke){return Ke=this.toSeconds(Ke),this.envelope.triggerRelease(Ke),this.noise.stop(Ke+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(Ke,Ye,Je=1){return Ye=this.toSeconds(Ye),Ke=this.toSeconds(Ke),this.triggerAttack(Ye,Je),this.triggerRelease(Ye+Ke),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const workletContext=new Set;function addToWorklet(Xe){workletContext.add(Xe)}function registerProcessor(Xe,Ke){const Ye=`registerProcessor("${Xe}", ${Ke})`;workletContext.add(Ye)}function getWorkletGlobalScope(){return Array.from(workletContext).join(`
`)}class ToneAudioWorklet extends ToneAudioNode{constructor(Ke){super(Ke),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=noOp;const Ye=URL.createObjectURL(new Blob([getWorkletGlobalScope()],{type:"text/javascript"})),Je=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(Ye,Je).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(Je,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const toneAudioWorkletProcessor=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;addToWorklet(toneAudioWorkletProcessor);const singleIOProcess=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;addToWorklet(singleIOProcess);const delayLine=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;addToWorklet(delayLine);const workletName$1="feedback-comb-filter",feedbackCombFilter=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;registerProcessor(workletName$1,feedbackCombFilter);class FeedbackCombFilter extends ToneAudioWorklet{constructor(){super(optionsFromArguments(FeedbackCombFilter.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const Ke=optionsFromArguments(FeedbackCombFilter.getDefaults(),arguments,["delayTime","resonance"]);this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.delayTime=new Param({context:this.context,value:Ke.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new Param({context:this.context,value:Ke.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),readOnly(this,["resonance","delayTime"])}_audioWorkletName(){return workletName$1}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{delayTime:.1,resonance:.5})}onReady(Ke){connectSeries(this.input,Ke,this.output);const Ye=Ke.parameters.get("delayTime");this.delayTime.setParam(Ye);const Je=Ke.parameters.get("feedback");this.resonance.setParam(Je)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class OnePoleFilter extends ToneAudioNode{constructor(){super(optionsFromArguments(OnePoleFilter.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";const Ke=optionsFromArguments(OnePoleFilter.getDefaults(),arguments,["frequency","type"]);this._frequency=Ke.frequency,this._type=Ke.type,this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const Ke=this._filter,Ye=this.toFrequency(this._frequency),Je=1/(2*Math.PI*Ye);if(this._type==="lowpass"){const tt=1/(Je*this.context.sampleRate),st=tt-1;this._filter=this.context.createIIRFilter([tt,0],[1,st])}else{const tt=1/(Je*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,tt])}this.input.chain(this._filter,this.output),Ke&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(Ke),Ke.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(Ke){this._frequency=Ke,this._createFilter()}get type(){return this._type}set type(Ke){this._type=Ke,this._createFilter()}getFrequencyResponse(Ke=128){const Ye=new Float32Array(Ke);for(let st=0;st<Ke;st++){const it=Math.pow(st/Ke,2)*19980+20;Ye[st]=it}const Je=new Float32Array(Ke),tt=new Float32Array(Ke);return this._filter.getFrequencyResponse(Ye,Je,tt),Je}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class LowpassCombFilter extends ToneAudioNode{constructor(){super(optionsFromArguments(LowpassCombFilter.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";const Ke=optionsFromArguments(LowpassCombFilter.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new FeedbackCombFilter({context:this.context,delayTime:Ke.delayTime,resonance:Ke.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new OnePoleFilter({context:this.context,frequency:Ke.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(Ke){this._lowpass.frequency=Ke}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class PluckSynth extends Instrument$3{constructor(){super(optionsFromArguments(PluckSynth.getDefaults(),arguments)),this.name="PluckSynth";const Ke=optionsFromArguments(PluckSynth.getDefaults(),arguments);this._noise=new Noise({context:this.context,type:"pink"}),this.attackNoise=Ke.attackNoise,this._lfcf=new LowpassCombFilter({context:this.context,dampening:Ke.dampening,resonance:Ke.resonance}),this.resonance=Ke.resonance,this.release=Ke.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return deepMerge(Instrument$3.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(Ke){this._lfcf.dampening=Ke}triggerAttack(Ke,Ye){const Je=this.toFrequency(Ke);Ye=this.toSeconds(Ye);const tt=1/Je;return this._lfcf.delayTime.setValueAtTime(tt,Ye),this._noise.start(Ye),this._noise.stop(Ye+tt*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(Ye),this._lfcf.resonance.setValueAtTime(this.resonance,Ye),this}triggerRelease(Ke){return this._lfcf.resonance.linearRampTo(0,this.release,Ke),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class PolySynth extends Instrument$3{constructor(){super(optionsFromArguments(PolySynth.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;const Ke=optionsFromArguments(PolySynth.getDefaults(),arguments,["voice","options"]);assert(!isNumber$2(Ke.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const Ye=Ke.voice.getDefaults();this.options=Object.assign(Ye,Ke.options),this.voice=Ke.voice,this.maxPolyphony=Ke.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const Je=this._voices.indexOf(this._dummyVoice);this._voices.splice(Je,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Instrument$3.getDefaults(),{maxPolyphony:32,options:{},voice:Synth})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(Ke){this._availableVoices.push(Ke);const Ye=this._activeVoices.findIndex(Je=>Je.voice===Ke);this._activeVoices.splice(Ye,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const Ke=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Ke.connect(this.output),this._voices.push(Ke),Ke}else warn("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const Ke=this._availableVoices.shift(),Ye=this._voices.indexOf(Ke);this._voices.splice(Ye,1),this.context.isOffline||Ke.dispose()}}_triggerAttack(Ke,Ye,Je){Ke.forEach(tt=>{const st=new MidiClass(this.context,tt).toMidi(),rt=this._getNextAvailableVoice();rt&&(rt.triggerAttack(tt,Ye,Je),this._activeVoices.push({midi:st,voice:rt,released:!1}),this.log("triggerAttack",tt,Ye))})}_triggerRelease(Ke,Ye){Ke.forEach(Je=>{const tt=new MidiClass(this.context,Je).toMidi(),st=this._activeVoices.find(({midi:rt,released:it})=>rt===tt&&!it);st&&(st.voice.triggerRelease(Ye),st.released=!0,this.log("triggerRelease",Je,Ye))})}_scheduleEvent(Ke,Ye,Je,tt){assert(!this.disposed,"Synth was already disposed"),Je<=this.now()?Ke==="attack"?this._triggerAttack(Ye,Je,tt):this._triggerRelease(Ye,Je):this.context.setTimeout(()=>{this._scheduleEvent(Ke,Ye,Je,tt)},Je-this.now())}triggerAttack(Ke,Ye,Je){Array.isArray(Ke)||(Ke=[Ke]);const tt=this.toSeconds(Ye);return this._scheduleEvent("attack",Ke,tt,Je),this}triggerRelease(Ke,Ye){Array.isArray(Ke)||(Ke=[Ke]);const Je=this.toSeconds(Ye);return this._scheduleEvent("release",Ke,Je),this}triggerAttackRelease(Ke,Ye,Je,tt){const st=this.toSeconds(Je);if(this.triggerAttack(Ke,st,tt),isArray$8(Ye)){assert(isArray$8(Ke),"If the duration is an array, the notes must also be an array"),Ke=Ke;for(let rt=0;rt<Ke.length;rt++){const it=Ye[Math.min(rt,Ye.length-1)],ot=this.toSeconds(it);assert(ot>0,"The duration must be greater than 0"),this.triggerRelease(Ke[rt],st+ot)}}else{const rt=this.toSeconds(Ye);assert(rt>0,"The duration must be greater than 0"),this.triggerRelease(Ke,st+rt)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(Ke){const Ye=omitFromObject(Ke,["onsilence","context"]);return this.options=deepMerge(this.options,Ye),this._voices.forEach(Je=>Je.set(Ye)),this._dummyVoice.set(Ye),this}get(){return this._dummyVoice.get()}releaseAll(Ke){const Ye=this.toSeconds(Ke);return this._activeVoices.forEach(({voice:Je})=>{Je.triggerRelease(Ye)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(Ke=>Ke.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Sampler extends Instrument$3{constructor(){super(optionsFromArguments(Sampler.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const Ke=optionsFromArguments(Sampler.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),Ye={};Object.keys(Ke.urls).forEach(Je=>{const tt=parseInt(Je,10);if(assert(isNote(Je)||isNumber$2(tt)&&isFinite(tt),`url key is neither a note or midi pitch: ${Je}`),isNote(Je)){const st=new FrequencyClass(this.context,Je).toMidi();Ye[st]=Ke.urls[Je]}else isNumber$2(tt)&&isFinite(tt)&&(Ye[tt]=Ke.urls[tt])}),this._buffers=new ToneAudioBuffers({urls:Ye,onload:Ke.onload,baseUrl:Ke.baseUrl,onerror:Ke.onerror}),this.attack=Ke.attack,this.release=Ke.release,this.curve=Ke.curve,this._buffers.loaded&&Promise.resolve().then(Ke.onload)}static getDefaults(){return Object.assign(Instrument$3.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:noOp,onerror:noOp,release:.1,urls:{}})}_findClosest(Ke){let Je=0;for(;Je<96;){if(this._buffers.has(Ke+Je))return-Je;if(this._buffers.has(Ke-Je))return Je;Je++}throw new Error(`No available buffers for note: ${Ke}`)}triggerAttack(Ke,Ye,Je=1){return this.log("triggerAttack",Ke,Ye,Je),Array.isArray(Ke)||(Ke=[Ke]),Ke.forEach(tt=>{const st=ftomf(new FrequencyClass(this.context,tt).toFrequency()),rt=Math.round(st),it=st-rt,ot=this._findClosest(rt),at=rt-ot,lt=this._buffers.get(at),ut=intervalToFrequencyRatio(ot+it),ht=new ToneBufferSource({url:lt,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:ut}).connect(this.output);ht.start(Ye,0,lt.duration/ut,Je),isArray$8(this._activeSources.get(rt))||this._activeSources.set(rt,[]),this._activeSources.get(rt).push(ht),ht.onended=()=>{if(this._activeSources&&this._activeSources.has(rt)){const pt=this._activeSources.get(rt),ft=pt.indexOf(ht);ft!==-1&&pt.splice(ft,1)}}}),this}triggerRelease(Ke,Ye){return this.log("triggerRelease",Ke,Ye),Array.isArray(Ke)||(Ke=[Ke]),Ke.forEach(Je=>{const tt=new FrequencyClass(this.context,Je).toMidi();if(this._activeSources.has(tt)&&this._activeSources.get(tt).length){const st=this._activeSources.get(tt);Ye=this.toSeconds(Ye),st.forEach(rt=>{rt.stop(Ye)}),this._activeSources.set(tt,[])}}),this}releaseAll(Ke){const Ye=this.toSeconds(Ke);return this._activeSources.forEach(Je=>{for(;Je.length;)Je.shift().stop(Ye)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(Ke,Ye,Je,tt=1){const st=this.toSeconds(Je);return this.triggerAttack(Ke,st,tt),isArray$8(Ye)?(assert(isArray$8(Ke),"notes must be an array when duration is array"),Ke.forEach((rt,it)=>{const ot=Ye[Math.min(it,Ye.length-1)];this.triggerRelease(rt,st+this.toSeconds(ot))})):this.triggerRelease(Ke,st+this.toSeconds(Ye)),this}add(Ke,Ye,Je){if(assert(isNote(Ke)||isFinite(Ke),`note must be a pitch or midi: ${Ke}`),isNote(Ke)){const tt=new FrequencyClass(this.context,Ke).toMidi();this._buffers.add(tt,Ye,Je)}else this._buffers.add(Ke,Ye,Je);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(Ke=>{Ke.forEach(Ye=>Ye.dispose())}),this._activeSources.clear(),this}}__decorate$8([timeRange(0)],Sampler.prototype,"attack",void 0);__decorate$8([timeRange(0)],Sampler.prototype,"release",void 0);class ToneEvent extends ToneWithContext{constructor(){super(optionsFromArguments(ToneEvent.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new StateTimeline("stopped"),this._startOffset=0;const Ke=optionsFromArguments(ToneEvent.getDefaults(),arguments,["callback","value"]);this._loop=Ke.loop,this.callback=Ke.callback,this.value=Ke.value,this._loopStart=this.toTicks(Ke.loopStart),this._loopEnd=this.toTicks(Ke.loopEnd),this._playbackRate=Ke.playbackRate,this._probability=Ke.probability,this._humanize=Ke.humanize,this.mute=Ke.mute,this._playbackRate=Ke.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(Ke=-1){this._state.forEachFrom(Ke,Ye=>{let Je;if(Ye.state==="started"){Ye.id!==-1&&this.context.transport.clear(Ye.id);const tt=Ye.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||isNumber$2(this._loop)&&this._loop>1){Je=1/0,isNumber$2(this._loop)&&(Je=this._loop*this._getLoopDuration());const st=this._state.getAfter(tt);st!==null&&(Je=Math.min(Je,st.time-tt)),Je!==1/0&&(this._state.setStateAtTime("stopped",tt+Je+1,{id:-1}),Je=new TicksClass(this.context,Je));const rt=new TicksClass(this.context,this._getLoopDuration());Ye.id=this.context.transport.scheduleRepeat(this._tick.bind(this),rt,new TicksClass(this.context,tt),Je)}else Ye.id=this.context.transport.schedule(this._tick.bind(this),new TicksClass(this.context,tt))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(Ke){this._startOffset=Ke}get probability(){return this._probability}set probability(Ke){this._probability=Ke}get humanize(){return this._humanize}set humanize(Ke){this._humanize=Ke}start(Ke){const Ye=this.toTicks(Ke);return this._state.getValueAtTime(Ye)==="stopped"&&(this._state.add({id:-1,state:"started",time:Ye}),this._rescheduleEvents(Ye)),this}stop(Ke){this.cancel(Ke);const Ye=this.toTicks(Ke);if(this._state.getValueAtTime(Ye)==="started"){this._state.setStateAtTime("stopped",Ye,{id:-1});const Je=this._state.getBefore(Ye);let tt=Ye;Je!==null&&(tt=Je.time),this._rescheduleEvents(tt)}return this}cancel(Ke){Ke=defaultArg(Ke,-1/0);const Ye=this.toTicks(Ke);return this._state.forEachFrom(Ye,Je=>{this.context.transport.clear(Je.id)}),this._state.cancel(Ye),this}_tick(Ke){const Ye=this.context.transport.getTicksAtTime(Ke);if(!this.mute&&this._state.getValueAtTime(Ye)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let Je=.02;isBoolean$1(this.humanize)||(Je=this.toSeconds(this.humanize)),Ke+=(Math.random()*2-1)*Je}this.callback(Ke,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(Ke){this._loop=Ke,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(Ke){this._playbackRate=Ke,this._rescheduleEvents()}get loopEnd(){return new TicksClass(this.context,this._loopEnd).toSeconds()}set loopEnd(Ke){this._loopEnd=this.toTicks(Ke),this._loop&&this._rescheduleEvents()}get loopStart(){return new TicksClass(this.context,this._loopStart).toSeconds()}set loopStart(Ke){this._loopStart=this.toTicks(Ke),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const Ke=this.context.transport.ticks,Ye=this._state.get(Ke);if(Ye!==null&&Ye.state==="started"){const Je=this._getLoopDuration();return(Ke-Ye.time)%Je/Je}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Loop extends ToneWithContext{constructor(){super(optionsFromArguments(Loop.getDefaults(),arguments,["callback","interval"])),this.name="Loop";const Ke=optionsFromArguments(Loop.getDefaults(),arguments,["callback","interval"]);this._event=new ToneEvent({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:Ke.interval,playbackRate:Ke.playbackRate,probability:Ke.probability}),this.callback=Ke.callback,this.iterations=Ke.iterations}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{interval:"4n",callback:noOp,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(Ke){return this._event.start(Ke),this}stop(Ke){return this._event.stop(Ke),this}cancel(Ke){return this._event.cancel(Ke),this}_tick(Ke){this.callback(Ke)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(Ke){this._event.loopEnd=Ke}get playbackRate(){return this._event.playbackRate}set playbackRate(Ke){this._event.playbackRate=Ke}get humanize(){return this._event.humanize}set humanize(Ke){this._event.humanize=Ke}get probability(){return this._event.probability}set probability(Ke){this._event.probability=Ke}get mute(){return this._event.mute}set mute(Ke){this._event.mute=Ke}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(Ke){Ke===1/0?this._event.loop=!0:this._event.loop=Ke}dispose(){return super.dispose(),this._event.dispose(),this}}class Part extends ToneEvent{constructor(){super(optionsFromArguments(Part.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new StateTimeline("stopped"),this._events=new Set;const Ke=optionsFromArguments(Part.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,Ke.events.forEach(Ye=>{isArray$8(Ye)?this.add(Ye[0],Ye[1]):this.add(Ye)})}static getDefaults(){return Object.assign(ToneEvent.getDefaults(),{events:[]})}start(Ke,Ye){const Je=this.toTicks(Ke);if(this._state.getValueAtTime(Je)!=="started"){Ye=defaultArg(Ye,this._loop?this._loopStart:0),this._loop?Ye=defaultArg(Ye,this._loopStart):Ye=defaultArg(Ye,0);const tt=this.toTicks(Ye);this._state.add({id:-1,offset:tt,state:"started",time:Je}),this._forEach(st=>{this._startNote(st,Je,tt)})}return this}_startNote(Ke,Ye,Je){Ye-=Je,this._loop?Ke.startOffset>=this._loopStart&&Ke.startOffset<this._loopEnd?(Ke.startOffset<Je&&(Ye+=this._getLoopDuration()),Ke.start(new TicksClass(this.context,Ye))):Ke.startOffset<this._loopStart&&Ke.startOffset>=Je&&(Ke.loop=!1,Ke.start(new TicksClass(this.context,Ye))):Ke.startOffset>=Je&&Ke.start(new TicksClass(this.context,Ye))}get startOffset(){return this._startOffset}set startOffset(Ke){this._startOffset=Ke,this._forEach(Ye=>{Ye.startOffset+=this._startOffset})}stop(Ke){const Ye=this.toTicks(Ke);return this._state.cancel(Ye),this._state.setStateAtTime("stopped",Ye),this._forEach(Je=>{Je.stop(Ke)}),this}at(Ke,Ye){const Je=new TransportTimeClass(this.context,Ke).toTicks(),tt=new TicksClass(this.context,1).toSeconds(),st=this._events.values();let rt=st.next();for(;!rt.done;){const it=rt.value;if(Math.abs(Je-it.startOffset)<tt)return isDefined(Ye)&&(it.value=Ye),it;rt=st.next()}return isDefined(Ye)?(this.add(Ke,Ye),this.at(Ke)):null}add(Ke,Ye){Ke instanceof Object&&Reflect.has(Ke,"time")&&(Ye=Ke,Ke=Ye.time);const Je=this.toTicks(Ke);let tt;return Ye instanceof ToneEvent?(tt=Ye,tt.callback=this._tick.bind(this)):tt=new ToneEvent({callback:this._tick.bind(this),context:this.context,value:Ye}),tt.startOffset=Je,tt.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(tt),this._restartEvent(tt),this}_restartEvent(Ke){this._state.forEach(Ye=>{Ye.state==="started"?this._startNote(Ke,Ye.time,Ye.offset):Ke.stop(new TicksClass(this.context,Ye.time))})}remove(Ke,Ye){return isObject$4(Ke)&&Ke.hasOwnProperty("time")&&(Ye=Ke,Ke=Ye.time),Ke=this.toTicks(Ke),this._events.forEach(Je=>{Je.startOffset===Ke&&(isUndef(Ye)||isDefined(Ye)&&Je.value===Ye)&&(this._events.delete(Je),Je.dispose())}),this}clear(){return this._forEach(Ke=>Ke.dispose()),this._events.clear(),this}cancel(Ke){return this._forEach(Ye=>Ye.cancel(Ke)),this._state.cancel(this.toTicks(Ke)),this}_forEach(Ke){return this._events&&this._events.forEach(Ye=>{Ye instanceof Part?Ye._forEach(Ke):Ke(Ye)}),this}_setAll(Ke,Ye){this._forEach(Je=>{Je[Ke]=Ye})}_tick(Ke,Ye){this.mute||this.callback(Ke,Ye)}_testLoopBoundries(Ke){this._loop&&(Ke.startOffset<this._loopStart||Ke.startOffset>=this._loopEnd)?Ke.cancel(0):Ke.state==="stopped"&&this._restartEvent(Ke)}get probability(){return this._probability}set probability(Ke){this._probability=Ke,this._setAll("probability",Ke)}get humanize(){return this._humanize}set humanize(Ke){this._humanize=Ke,this._setAll("humanize",Ke)}get loop(){return this._loop}set loop(Ke){this._loop=Ke,this._forEach(Ye=>{Ye.loopStart=this.loopStart,Ye.loopEnd=this.loopEnd,Ye.loop=Ke,this._testLoopBoundries(Ye)})}get loopEnd(){return new TicksClass(this.context,this._loopEnd).toSeconds()}set loopEnd(Ke){this._loopEnd=this.toTicks(Ke),this._loop&&this._forEach(Ye=>{Ye.loopEnd=Ke,this._testLoopBoundries(Ye)})}get loopStart(){return new TicksClass(this.context,this._loopStart).toSeconds()}set loopStart(Ke){this._loopStart=this.toTicks(Ke),this._loop&&this._forEach(Ye=>{Ye.loopStart=this.loopStart,this._testLoopBoundries(Ye)})}get playbackRate(){return this._playbackRate}set playbackRate(Ke){this._playbackRate=Ke,this._setAll("playbackRate",Ke)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*upPatternGen(Xe){let Ke=0;for(;Ke<Xe.length;)Ke=clampToArraySize(Ke,Xe),yield Xe[Ke],Ke++}function*downPatternGen(Xe){let Ke=Xe.length-1;for(;Ke>=0;)Ke=clampToArraySize(Ke,Xe),yield Xe[Ke],Ke--}function*infiniteGen(Xe,Ke){for(;;)yield*Ke(Xe)}function clampToArraySize(Xe,Ke){return clamp(Xe,0,Ke.length-1)}function*alternatingGenerator(Xe,Ke){let Ye=Ke?0:Xe.length-1;for(;;)Ye=clampToArraySize(Ye,Xe),yield Xe[Ye],Ke?(Ye++,Ye>=Xe.length-1&&(Ke=!1)):(Ye--,Ye<=0&&(Ke=!0))}function*jumpUp(Xe){let Ke=0,Ye=0;for(;Ke<Xe.length;)Ke=clampToArraySize(Ke,Xe),yield Xe[Ke],Ye++,Ke+=Ye%2?2:-1}function*jumpDown(Xe){let Ke=Xe.length-1,Ye=0;for(;Ke>=0;)Ke=clampToArraySize(Ke,Xe),yield Xe[Ke],Ye++,Ke+=Ye%2?-2:1}function*randomGen(Xe){for(;;){const Ke=Math.floor(Math.random()*Xe.length);yield Xe[Ke]}}function*randomOnce(Xe){const Ke=[];for(let Ye=0;Ye<Xe.length;Ye++)Ke.push(Ye);for(;Ke.length>0;){const Ye=Ke.splice(Math.floor(Ke.length*Math.random()),1),Je=clampToArraySize(Ye[0],Xe);yield Xe[Je]}}function*randomWalk(Xe){let Ke=Math.floor(Math.random()*Xe.length);for(;;)Ke===0?Ke++:Ke===Xe.length-1||Math.random()<.5?Ke--:Ke++,yield Xe[Ke]}function*PatternGenerator(Xe,Ke="up",Ye=0){switch(assert(Xe.length>0,"The array must have more than one value in it"),Ke){case"up":yield*infiniteGen(Xe,upPatternGen);case"down":yield*infiniteGen(Xe,downPatternGen);case"upDown":yield*alternatingGenerator(Xe,!0);case"downUp":yield*alternatingGenerator(Xe,!1);case"alternateUp":yield*infiniteGen(Xe,jumpUp);case"alternateDown":yield*infiniteGen(Xe,jumpDown);case"random":yield*randomGen(Xe);case"randomOnce":yield*infiniteGen(Xe,randomOnce);case"randomWalk":yield*randomWalk(Xe)}}class Pattern extends Loop{constructor(){super(optionsFromArguments(Pattern.getDefaults(),arguments,["callback","values","pattern"])),this.name="Pattern";const Ke=optionsFromArguments(Pattern.getDefaults(),arguments,["callback","values","pattern"]);this.callback=Ke.callback,this._values=Ke.values,this._pattern=PatternGenerator(Ke.values,Ke.pattern),this._type=Ke.pattern}static getDefaults(){return Object.assign(Loop.getDefaults(),{pattern:"up",values:[],callback:noOp})}_tick(Ke){const Ye=this._pattern.next();this._value=Ye.value,this.callback(Ke,this._value)}get values(){return this._values}set values(Ke){this._values=Ke,this.pattern=this._type}get value(){return this._value}get pattern(){return this._type}set pattern(Ke){this._type=Ke,this._pattern=PatternGenerator(this._values,this._type)}}class Sequence extends ToneEvent{constructor(){super(optionsFromArguments(Sequence.getDefaults(),arguments,["callback","events","subdivision"])),this.name="Sequence",this._part=new Part({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[];const Ke=optionsFromArguments(Sequence.getDefaults(),arguments,["callback","events","subdivision"]);this._subdivision=this.toTicks(Ke.subdivision),this.events=Ke.events,this.loop=Ke.loop,this.loopStart=Ke.loopStart,this.loopEnd=Ke.loopEnd,this.playbackRate=Ke.playbackRate,this.probability=Ke.probability,this.humanize=Ke.humanize,this.mute=Ke.mute,this.playbackRate=Ke.playbackRate}static getDefaults(){return Object.assign(omitFromObject(ToneEvent.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(Ke,Ye){Ye!==null&&this.callback(Ke,Ye)}get events(){return this._events}set events(Ke){this.clear(),this._eventsArray=Ke,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(Ke,Ye){return this._part.start(Ke,Ye&&this._indexTime(Ye)),this}stop(Ke){return this._part.stop(Ke),this}get subdivision(){return new TicksClass(this.context,this._subdivision).toSeconds()}_createSequence(Ke){return new Proxy(Ke,{get:(Ye,Je)=>Ye[Je],set:(Ye,Je,tt)=>(isString$1(Je)&&isFinite(parseInt(Je,10))&&isArray$8(tt)?Ye[Je]=this._createSequence(tt):Ye[Je]=tt,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(Ke,Ye,Je){Ke.forEach((tt,st)=>{const rt=st*Ye+Je;if(isArray$8(tt))this._rescheduleSequence(tt,Ye/tt.length,rt);else{const it=new TicksClass(this.context,rt,"i").toSeconds();this._part.add(it,tt)}})}_indexTime(Ke){return new TicksClass(this.context,Ke*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(Ke){this._part.loop=Ke}get loopStart(){return this._loopStart}set loopStart(Ke){this._loopStart=Ke,this._part.loopStart=this._indexTime(Ke)}get loopEnd(){return this._loopEnd}set loopEnd(Ke){this._loopEnd=Ke,Ke===0?this._part.loopEnd=this._indexTime(this._eventsArray.length):this._part.loopEnd=this._indexTime(Ke)}get startOffset(){return this._part.startOffset}set startOffset(Ke){this._part.startOffset=Ke}get playbackRate(){return this._part.playbackRate}set playbackRate(Ke){this._part.playbackRate=Ke}get probability(){return this._part.probability}set probability(Ke){this._part.probability=Ke}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(Ke){this._part.humanize=Ke}get length(){return this._part.length}}class CrossFade extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new GainToAudio({context:this.context}),this.a=new Gain({context:this.context,gain:0}),this.b=new Gain({context:this.context,gain:0}),this.output=new Gain({context:this.context}),this._internalChannels=[this.a,this.b];const Ke=optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]);this.fade=new Signal({context:this.context,units:"normalRange",value:Ke.fade}),readOnly(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",connect(this._split,this.a.gain,0),connect(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Effect extends ToneAudioNode{constructor(Ke){super(Ke),this.name="Effect",this._dryWet=new CrossFade({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Gain({context:this.context}),this.effectReturn=new Gain({context:this.context}),this.input=new Gain({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(Ke.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],readOnly(this,"wet")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}connectEffect(Ke){return this._internalChannels.push(Ke),this.effectSend.chain(Ke,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class LFOEffect extends Effect{constructor(Ke){super(Ke),this.name="LFOEffect",this._lfo=new LFO({context:this.context,frequency:Ke.frequency,amplitude:Ke.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=Ke.type,readOnly(this,["frequency","depth"])}static getDefaults(){return Object.assign(Effect.getDefaults(),{frequency:1,type:"sine",depth:1})}start(Ke){return this._lfo.start(Ke),this}stop(Ke){return this._lfo.stop(Ke),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(Ke){this._lfo.type=Ke}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class AutoFilter extends LFOEffect{constructor(){super(optionsFromArguments(AutoFilter.getDefaults(),arguments,["frequency","baseFrequency","octaves"])),this.name="AutoFilter";const Ke=optionsFromArguments(AutoFilter.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);this.filter=new Filter(Object.assign(Ke.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=Ke.octaves,this.baseFrequency=Ke.baseFrequency}static getDefaults(){return Object.assign(LFOEffect.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(Ke){this._lfo.min=this.toFrequency(Ke),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(Ke){this._octaves=Ke,this._lfo.max=this._lfo.min*Math.pow(2,Ke)}dispose(){return super.dispose(),this.filter.dispose(),this}}class Panner extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Panner.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const Ke=optionsFromArguments(Panner.getDefaults(),arguments,["pan"]);this.pan=new Param({context:this.context,param:this._panner.pan,value:Ke.pan,minValue:-1,maxValue:1}),this._panner.channelCount=Ke.channelCount,this._panner.channelCountMode="explicit",readOnly(this,"pan")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class AutoPanner extends LFOEffect{constructor(){super(optionsFromArguments(AutoPanner.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";const Ke=optionsFromArguments(AutoPanner.getDefaults(),arguments,["frequency"]);this._panner=new Panner({context:this.context,channelCount:Ke.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(LFOEffect.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class Follower extends ToneAudioNode{constructor(){super(optionsFromArguments(Follower.getDefaults(),arguments,["smoothing"])),this.name="Follower";const Ke=optionsFromArguments(Follower.getDefaults(),arguments,["smoothing"]);this._abs=this.input=new Abs({context:this.context}),this._lowpass=this.output=new OnePoleFilter({context:this.context,frequency:1/this.toSeconds(Ke.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=Ke.smoothing}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(Ke){this._smoothing=Ke,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class AutoWah extends Effect{constructor(){super(optionsFromArguments(AutoWah.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"])),this.name="AutoWah";const Ke=optionsFromArguments(AutoWah.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);this._follower=new Follower({context:this.context,smoothing:Ke.follower}),this._sweepRange=new ScaleExp({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(Ke.baseFrequency),this._octaves=Ke.octaves,this._inputBoost=new Gain({context:this.context}),this._bandpass=new Filter({context:this.context,rolloff:-48,frequency:0,Q:Ke.Q}),this._peaking=new Filter({context:this.context,type:"peaking"}),this._peaking.gain.value=Ke.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=Ke.sensitivity,readOnly(this,["gain","Q"])}static getDefaults(){return Object.assign(Effect.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(Ke){this._octaves=Ke,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(Ke){this._follower.smoothing=Ke}get baseFrequency(){return this._baseFrequency}set baseFrequency(Ke){this._baseFrequency=this.toFrequency(Ke),this._setSweepRange()}get sensitivity(){return gainToDb(1/this._inputBoost.gain.value)}set sensitivity(Ke){this._inputBoost.gain.value=1/dbToGain(Ke)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const workletName="bit-crusher",bitCrusherWorklet=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;registerProcessor(workletName,bitCrusherWorklet);class BitCrusher extends Effect{constructor(){super(optionsFromArguments(BitCrusher.getDefaults(),arguments,["bits"])),this.name="BitCrusher";const Ke=optionsFromArguments(BitCrusher.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new BitCrusherWorklet({context:this.context,bits:Ke.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(Effect.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class BitCrusherWorklet extends ToneAudioWorklet{constructor(){super(optionsFromArguments(BitCrusherWorklet.getDefaults(),arguments)),this.name="BitCrusherWorklet";const Ke=optionsFromArguments(BitCrusherWorklet.getDefaults(),arguments);this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.bits=new Param({context:this.context,value:Ke.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(ToneAudioWorklet.getDefaults(),{bits:12})}_audioWorkletName(){return workletName}onReady(Ke){connectSeries(this.input,Ke,this.output);const Ye=Ke.parameters.get("bits");this.bits.setParam(Ye)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class Chebyshev extends Effect{constructor(){super(optionsFromArguments(Chebyshev.getDefaults(),arguments,["order"])),this.name="Chebyshev";const Ke=optionsFromArguments(Chebyshev.getDefaults(),arguments,["order"]);this._shaper=new WaveShaper({context:this.context,length:4096}),this._order=Ke.order,this.connectEffect(this._shaper),this.order=Ke.order,this.oversample=Ke.oversample}static getDefaults(){return Object.assign(Effect.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(Ke,Ye,Je){return Je.has(Ye)||(Ye===0?Je.set(Ye,0):Ye===1?Je.set(Ye,Ke):Je.set(Ye,2*Ke*this._getCoefficient(Ke,Ye-1,Je)-this._getCoefficient(Ke,Ye-2,Je))),Je.get(Ye)}get order(){return this._order}set order(Ke){this._order=Ke,this._shaper.setMap((Ye=>this._getCoefficient(Ye,Ke,new Map)))}get oversample(){return this._shaper.oversample}set oversample(Ke){this._shaper.oversample=Ke}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Split extends ToneAudioNode{constructor(){super(optionsFromArguments(Split.getDefaults(),arguments,["channels"])),this.name="Split";const Ke=optionsFromArguments(Split.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(Ke.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Merge extends ToneAudioNode{constructor(){super(optionsFromArguments(Merge.getDefaults(),arguments,["channels"])),this.name="Merge";const Ke=optionsFromArguments(Merge.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(Ke.channels)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class StereoEffect extends ToneAudioNode{constructor(Ke){super(Ke),this.name="StereoEffect",this.input=new Gain({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new CrossFade({context:this.context,fade:Ke.wet}),this.wet=this._dryWet.fade,this._split=new Split({context:this.context,channels:2}),this._merge=new Merge({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),readOnly(this,["wet"])}connectEffectLeft(...Ke){this._split.connect(Ke[0],0,0),connectSeries(...Ke),connect(Ke[Ke.length-1],this._merge,0,0)}connectEffectRight(...Ke){this._split.connect(Ke[0],1,0),connectSeries(...Ke),connect(Ke[Ke.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class StereoFeedbackEffect extends StereoEffect{constructor(Ke){super(Ke),this.feedback=new Signal({context:this.context,value:Ke.feedback,units:"normalRange"}),this._feedbackL=new Gain({context:this.context}),this._feedbackR=new Gain({context:this.context}),this._feedbackSplit=new Split({context:this.context,channels:2}),this._feedbackMerge=new Merge({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),readOnly(this,["feedback"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Chorus extends StereoFeedbackEffect{constructor(){super(optionsFromArguments(Chorus.getDefaults(),arguments,["frequency","delayTime","depth"])),this.name="Chorus";const Ke=optionsFromArguments(Chorus.getDefaults(),arguments,["frequency","delayTime","depth"]);this._depth=Ke.depth,this._delayTime=Ke.delayTime/1e3,this._lfoL=new LFO({context:this.context,frequency:Ke.frequency,min:0,max:1}),this._lfoR=new LFO({context:this.context,frequency:Ke.frequency,min:0,max:1,phase:180}),this._delayNodeL=new Delay({context:this.context}),this._delayNodeR=new Delay({context:this.context}),this.frequency=this._lfoL.frequency,readOnly(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=Ke.type,this.spread=Ke.spread}static getDefaults(){return Object.assign(StereoFeedbackEffect.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(Ke){this._depth=Ke;const Ye=this._delayTime*Ke;this._lfoL.min=Math.max(this._delayTime-Ye,0),this._lfoL.max=this._delayTime+Ye,this._lfoR.min=Math.max(this._delayTime-Ye,0),this._lfoR.max=this._delayTime+Ye}get delayTime(){return this._delayTime*1e3}set delayTime(Ke){this._delayTime=Ke/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(Ke){this._lfoL.type=Ke,this._lfoR.type=Ke}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(Ke){this._lfoL.phase=90-Ke/2,this._lfoR.phase=Ke/2+90}start(Ke){return this._lfoL.start(Ke),this._lfoR.start(Ke),this}stop(Ke){return this._lfoL.stop(Ke),this._lfoR.stop(Ke),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Distortion extends Effect{constructor(){super(optionsFromArguments(Distortion.getDefaults(),arguments,["distortion"])),this.name="Distortion";const Ke=optionsFromArguments(Distortion.getDefaults(),arguments,["distortion"]);this._shaper=new WaveShaper({context:this.context,length:4096}),this._distortion=Ke.distortion,this.connectEffect(this._shaper),this.distortion=Ke.distortion,this.oversample=Ke.oversample}static getDefaults(){return Object.assign(Effect.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(Ke){this._distortion=Ke;const Ye=Ke*100,Je=Math.PI/180;this._shaper.setMap(tt=>Math.abs(tt)<.001?0:(3+Ye)*tt*20*Je/(Math.PI+Ye*Math.abs(tt)))}get oversample(){return this._shaper.oversample}set oversample(Ke){this._shaper.oversample=Ke}dispose(){return super.dispose(),this._shaper.dispose(),this}}class FeedbackEffect extends Effect{constructor(Ke){super(Ke),this.name="FeedbackEffect",this._feedbackGain=new Gain({context:this.context,gain:Ke.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,readOnly(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Effect.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class FeedbackDelay extends FeedbackEffect{constructor(){super(optionsFromArguments(FeedbackDelay.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";const Ke=optionsFromArguments(FeedbackDelay.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new Delay({context:this.context,delayTime:Ke.delayTime,maxDelay:Ke.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),readOnly(this,"delayTime")}static getDefaults(){return Object.assign(FeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class PhaseShiftAllpass extends ToneAudioNode{constructor(Ke){super(Ke),this.name="PhaseShiftAllpass",this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.offset90=new Gain({context:this.context});const Ye=[.6923878,.9360654322959,.988229522686,.9987488452737],Je=[.4021921162426,.856171088242,.9722909545651,.9952884791278];this._bank0=this._createAllPassFilterBank(Ye),this._bank1=this._createAllPassFilterBank(Je),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),connectSeries(this.input,...this._bank0,this._oneSampleDelay,this.output),connectSeries(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(Ke){return Ke.map(Je=>{const tt=[[Je*Je,0,-1],[1,0,-(Je*Je)]];return this.context.createIIRFilter(tt[0],tt[1])})}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(Ke=>Ke.disconnect()),this._bank1.forEach(Ke=>Ke.disconnect()),this._oneSampleDelay.disconnect(),this}}class FrequencyShifter extends Effect{constructor(){super(optionsFromArguments(FrequencyShifter.getDefaults(),arguments,["frequency"])),this.name="FrequencyShifter";const Ke=optionsFromArguments(FrequencyShifter.getDefaults(),arguments,["frequency"]);this.frequency=new Signal({context:this.context,units:"frequency",value:Ke.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new ToneOscillatorNode({context:this.context,type:"sine"}),this._cosine=new Oscillator({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new Multiply({context:this.context}),this._cosineMultiply=new Multiply({context:this.context}),this._negate=new Negate({context:this.context}),this._add=new Add({context:this.context}),this._phaseShifter=new PhaseShiftAllpass({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const Ye=this.immediate();this._sine.start(Ye),this._cosine.start(Ye)}static getDefaults(){return Object.assign(Effect.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const combFilterTunings=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],allpassFilterFrequencies=[225,556,441,341];class Freeverb extends StereoEffect{constructor(){super(optionsFromArguments(Freeverb.getDefaults(),arguments,["roomSize","dampening"])),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];const Ke=optionsFromArguments(Freeverb.getDefaults(),arguments,["roomSize","dampening"]);this.roomSize=new Signal({context:this.context,value:Ke.roomSize,units:"normalRange"}),this._allpassFiltersL=allpassFilterFrequencies.map(Ye=>{const Je=this.context.createBiquadFilter();return Je.type="allpass",Je.frequency.value=Ye,Je}),this._allpassFiltersR=allpassFilterFrequencies.map(Ye=>{const Je=this.context.createBiquadFilter();return Je.type="allpass",Je.frequency.value=Ye,Je}),this._combFilters=combFilterTunings.map((Ye,Je)=>{const tt=new LowpassCombFilter({context:this.context,dampening:Ke.dampening,delayTime:Ye});return Je<combFilterTunings.length/2?this.connectEffectLeft(tt,...this._allpassFiltersL):this.connectEffectRight(tt,...this._allpassFiltersR),this.roomSize.connect(tt.resonance),tt}),readOnly(this,["roomSize"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(Ke){this._combFilters.forEach(Ye=>Ye.dampening=Ke)}dispose(){return super.dispose(),this._allpassFiltersL.forEach(Ke=>Ke.disconnect()),this._allpassFiltersR.forEach(Ke=>Ke.disconnect()),this._combFilters.forEach(Ke=>Ke.dispose()),this.roomSize.dispose(),this}}const combFilterDelayTimes=[1687/25e3,1601/25e3,2053/25e3,2251/25e3],combFilterResonances=[.773,.802,.753,.733],allpassFilterFreqs=[347,113,37];class JCReverb extends StereoEffect{constructor(){super(optionsFromArguments(JCReverb.getDefaults(),arguments,["roomSize"])),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[];const Ke=optionsFromArguments(JCReverb.getDefaults(),arguments,["roomSize"]);this.roomSize=new Signal({context:this.context,value:Ke.roomSize,units:"normalRange"}),this._scaleRoomSize=new Scale({context:this.context,min:-.733,max:.197}),this._allpassFilters=allpassFilterFreqs.map(Ye=>{const Je=this.context.createBiquadFilter();return Je.type="allpass",Je.frequency.value=Ye,Je}),this._feedbackCombFilters=combFilterDelayTimes.map((Ye,Je)=>{const tt=new FeedbackCombFilter({context:this.context,delayTime:Ye});return this._scaleRoomSize.connect(tt.resonance),tt.resonance.value=combFilterResonances[Je],Je<combFilterDelayTimes.length/2?this.connectEffectLeft(...this._allpassFilters,tt):this.connectEffectRight(...this._allpassFilters,tt),tt}),this.roomSize.connect(this._scaleRoomSize),readOnly(this,["roomSize"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(Ke=>Ke.disconnect()),this._feedbackCombFilters.forEach(Ke=>Ke.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class StereoXFeedbackEffect extends StereoFeedbackEffect{constructor(Ke){super(Ke),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),readOnly(this,["feedback"])}}class PingPongDelay extends StereoXFeedbackEffect{constructor(){super(optionsFromArguments(PingPongDelay.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";const Ke=optionsFromArguments(PingPongDelay.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new Delay({context:this.context,maxDelay:Ke.maxDelay}),this._rightDelay=new Delay({context:this.context,maxDelay:Ke.maxDelay}),this._rightPreDelay=new Delay({context:this.context,maxDelay:Ke.maxDelay}),this.delayTime=new Signal({context:this.context,units:"time",value:Ke.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),readOnly(this,["delayTime"])}static getDefaults(){return Object.assign(StereoXFeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class PitchShift extends FeedbackEffect{constructor(){super(optionsFromArguments(PitchShift.getDefaults(),arguments,["pitch"])),this.name="PitchShift";const Ke=optionsFromArguments(PitchShift.getDefaults(),arguments,["pitch"]);this._frequency=new Signal({context:this.context}),this._delayA=new Delay({maxDelay:1,context:this.context}),this._lfoA=new LFO({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new Delay({maxDelay:1,context:this.context}),this._lfoB=new LFO({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new CrossFade({context:this.context}),this._crossFadeLFO=new LFO({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new Delay({delayTime:Ke.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,readOnly(this,"delayTime"),this._pitch=Ke.pitch,this._windowSize=Ke.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const Ye=this.now();this._lfoA.start(Ye),this._lfoB.start(Ye),this._crossFadeLFO.start(Ye),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(FeedbackEffect.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(Ke){this._pitch=Ke;let Ye=0;Ke<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,Ye=intervalToFrequencyRatio(Ke-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,Ye=intervalToFrequencyRatio(Ke)-1),this._frequency.value=Ye*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(Ke){this._windowSize=this.toSeconds(Ke),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class Phaser extends StereoEffect{constructor(){super(optionsFromArguments(Phaser.getDefaults(),arguments,["frequency","octaves","baseFrequency"])),this.name="Phaser";const Ke=optionsFromArguments(Phaser.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);this._lfoL=new LFO({context:this.context,frequency:Ke.frequency,min:0,max:1}),this._lfoR=new LFO({context:this.context,frequency:Ke.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(Ke.baseFrequency),this._octaves=Ke.octaves,this.Q=new Signal({context:this.context,value:Ke.Q,units:"positive"}),this._filtersL=this._makeFilters(Ke.stages,this._lfoL),this._filtersR=this._makeFilters(Ke.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=Ke.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=Ke.baseFrequency,this.octaves=Ke.octaves,this._lfoL.start(),this._lfoR.start(),readOnly(this,["frequency","Q"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(Ke,Ye){const Je=[];for(let tt=0;tt<Ke;tt++){const st=this.context.createBiquadFilter();st.type="allpass",this.Q.connect(st.Q),Ye.connect(st.frequency),Je.push(st)}return Je}get octaves(){return this._octaves}set octaves(Ke){this._octaves=Ke;const Ye=this._baseFrequency*Math.pow(2,Ke);this._lfoL.max=Ye,this._lfoR.max=Ye}get baseFrequency(){return this._baseFrequency}set baseFrequency(Ke){this._baseFrequency=this.toFrequency(Ke),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(Ke=>Ke.disconnect()),this._filtersR.forEach(Ke=>Ke.disconnect()),this.frequency.dispose(),this}}class Reverb extends Effect{constructor(){super(optionsFromArguments(Reverb.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const Ke=optionsFromArguments(Reverb.getDefaults(),arguments,["decay"]);this._decay=Ke.decay,this._preDelay=Ke.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Effect.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(Ke){Ke=this.toSeconds(Ke),assertRange(Ke,.001),this._decay=Ke,this.generate()}get preDelay(){return this._preDelay}set preDelay(Ke){Ke=this.toSeconds(Ke),assertRange(Ke,0),this._preDelay=Ke,this.generate()}generate(){return __awaiter$1(this,void 0,void 0,function*(){const Ke=this.ready,Ye=new OfflineContext(2,this._decay+this._preDelay,this.context.sampleRate),Je=new Noise({context:Ye}),tt=new Noise({context:Ye}),st=new Merge({context:Ye});Je.connect(st,0,0),tt.connect(st,0,1);const rt=new Gain({context:Ye}).toDestination();st.connect(rt),Je.start(0),tt.start(0),rt.gain.setValueAtTime(0,0),rt.gain.setValueAtTime(1,this._preDelay),rt.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const it=Ye.render();return this.ready=it.then(noOp),yield Ke,this._convolver.buffer=(yield it).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class MidSideSplit extends ToneAudioNode{constructor(){super(optionsFromArguments(MidSideSplit.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new Split({channels:2,context:this.context}),this._midAdd=new Add({context:this.context}),this.mid=new Multiply({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new Subtract({context:this.context}),this.side=new Multiply({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class MidSideMerge extends ToneAudioNode{constructor(){super(optionsFromArguments(MidSideMerge.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new Gain({context:this.context}),this.side=new Gain({context:this.context}),this._left=new Add({context:this.context}),this._leftMult=new Multiply({context:this.context,value:Math.SQRT1_2}),this._right=new Subtract({context:this.context}),this._rightMult=new Multiply({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new Merge({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class MidSideEffect extends Effect{constructor(Ke){super(Ke),this.name="MidSideEffect",this._midSideMerge=new MidSideMerge({context:this.context}),this._midSideSplit=new MidSideSplit({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...Ke){this._midSend.chain(...Ke,this._midReturn)}connectEffectSide(...Ke){this._sideSend.chain(...Ke,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class StereoWidener extends MidSideEffect{constructor(){super(optionsFromArguments(StereoWidener.getDefaults(),arguments,["width"])),this.name="StereoWidener";const Ke=optionsFromArguments(StereoWidener.getDefaults(),arguments,["width"]);this.width=new Signal({context:this.context,value:Ke.width,units:"normalRange"}),readOnly(this,["width"]),this._twoTimesWidthMid=new Multiply({context:this.context,value:2}),this._twoTimesWidthSide=new Multiply({context:this.context,value:2}),this._midMult=new Multiply({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new Subtract({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),connect(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new Multiply({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(MidSideEffect.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class Tremolo extends StereoEffect{constructor(){super(optionsFromArguments(Tremolo.getDefaults(),arguments,["frequency","depth"])),this.name="Tremolo";const Ke=optionsFromArguments(Tremolo.getDefaults(),arguments,["frequency","depth"]);this._lfoL=new LFO({context:this.context,type:Ke.type,min:1,max:0}),this._lfoR=new LFO({context:this.context,type:Ke.type,min:1,max:0}),this._amplitudeL=new Gain({context:this.context}),this._amplitudeR=new Gain({context:this.context}),this.frequency=new Signal({context:this.context,value:Ke.frequency,units:"frequency"}),this.depth=new Signal({context:this.context,value:Ke.depth,units:"normalRange"}),readOnly(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=Ke.spread}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(Ke){return this._lfoL.start(Ke),this._lfoR.start(Ke),this}stop(Ke){return this._lfoL.stop(Ke),this._lfoR.stop(Ke),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(Ke){this._lfoL.type=Ke,this._lfoR.type=Ke}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(Ke){this._lfoL.phase=90-Ke/2,this._lfoR.phase=Ke/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Vibrato extends Effect{constructor(){super(optionsFromArguments(Vibrato.getDefaults(),arguments,["frequency","depth"])),this.name="Vibrato";const Ke=optionsFromArguments(Vibrato.getDefaults(),arguments,["frequency","depth"]);this._delayNode=new Delay({context:this.context,delayTime:0,maxDelay:Ke.maxDelay}),this._lfo=new LFO({context:this.context,type:Ke.type,min:0,max:Ke.maxDelay,frequency:Ke.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=Ke.depth,readOnly(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(Effect.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(Ke){this._lfo.type=Ke}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Analyser extends ToneAudioNode{constructor(){super(optionsFromArguments(Analyser.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const Ke=optionsFromArguments(Analyser.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new Gain({context:this.context}),this._split=new Split({context:this.context,channels:Ke.channels}),this.input.connect(this._split),assertRange(Ke.channels,1);for(let Ye=0;Ye<Ke.channels;Ye++)this._analysers[Ye]=this.context.createAnalyser(),this._split.connect(this._analysers[Ye],Ye,0);this.size=Ke.size,this.type=Ke.type}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((Ke,Ye)=>{const Je=this._buffers[Ye];this._type==="fft"?Ke.getFloatFrequencyData(Je):this._type==="waveform"&&Ke.getFloatTimeDomainData(Je)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(Ke){this._analysers.forEach((Ye,Je)=>{Ye.fftSize=Ke*2,this._buffers[Je]=new Float32Array(Ke)})}get channels(){return this._analysers.length}get type(){return this._type}set type(Ke){assert(Ke==="waveform"||Ke==="fft",`Analyser: invalid type: ${Ke}`),this._type=Ke}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(Ke){this._analysers.forEach(Ye=>Ye.smoothingTimeConstant=Ke)}dispose(){return super.dispose(),this._analysers.forEach(Ke=>Ke.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class MeterBase extends ToneAudioNode{constructor(){super(optionsFromArguments(MeterBase.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Analyser({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Meter extends MeterBase{constructor(){super(optionsFromArguments(Meter.getDefaults(),arguments,["smoothing"])),this.name="Meter",this._rms=0;const Ke=optionsFromArguments(Meter.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new Analyser({context:this.context,size:256,type:"waveform",channels:Ke.channels}),this.smoothing=Ke.smoothing,this.normalRange=Ke.normalRange}static getDefaults(){return Object.assign(MeterBase.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}getLevel(){return warn("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const Ke=this._analyser.getValue(),Je=(this.channels===1?[Ke]:Ke).map(tt=>{const st=tt.reduce((it,ot)=>it+ot*ot,0),rt=Math.sqrt(st/tt.length);return this._rms=Math.max(rt,this._rms*this.smoothing),this.normalRange?this._rms:gainToDb(this._rms)});return this.channels===1?Je[0]:Je}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}let FFT$1=class xc extends MeterBase{constructor(){super(optionsFromArguments(xc.getDefaults(),arguments,["size"])),this.name="FFT";const Ke=optionsFromArguments(xc.getDefaults(),arguments,["size"]);this.normalRange=Ke.normalRange,this._analyser.type="fft",this.size=Ke.size}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(Ye=>this.normalRange?dbToGain(Ye):Ye)}get size(){return this._analyser.size}set size(Ke){this._analyser.size=Ke}get smoothing(){return this._analyser.smoothing}set smoothing(Ke){this._analyser.smoothing=Ke}getFrequencyOfIndex(Ke){return assert(0<=Ke&&Ke<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),Ke*this.context.sampleRate/(this.size*2)}};class DCMeter extends MeterBase{constructor(){super(optionsFromArguments(DCMeter.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class Waveform extends MeterBase{constructor(){super(optionsFromArguments(Waveform.getDefaults(),arguments,["size"])),this.name="Waveform";const Ke=optionsFromArguments(Waveform.getDefaults(),arguments,["size"]);this._analyser.type="waveform",this.size=Ke.size}static getDefaults(){return Object.assign(MeterBase.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(Ke){this._analyser.size=Ke}}class Solo extends ToneAudioNode{constructor(){super(optionsFromArguments(Solo.getDefaults(),arguments,["solo"])),this.name="Solo";const Ke=optionsFromArguments(Solo.getDefaults(),arguments,["solo"]);this.input=this.output=new Gain({context:this.context}),Solo._allSolos.has(this.context)||Solo._allSolos.set(this.context,new Set),Solo._allSolos.get(this.context).add(this),this.solo=Ke.solo}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(Ke){Ke?this._addSolo():this._removeSolo(),Solo._allSolos.get(this.context).forEach(Ye=>Ye._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Solo._soloed.has(this.context)||Solo._soloed.set(this.context,new Set),Solo._soloed.get(this.context).add(this)}_removeSolo(){Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).delete(this)}_isSoloed(){return Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).has(this)}_noSolos(){return!Solo._soloed.has(this.context)||Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Solo._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Solo._allSolos=new Map;Solo._soloed=new Map;class PanVol extends ToneAudioNode{constructor(){super(optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const Ke=optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Panner({context:this.context,pan:Ke.pan,channelCount:Ke.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Volume({context:this.context,volume:Ke.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=Ke.mute,readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(Ke){this._volume.mute=Ke}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Channel extends ToneAudioNode{constructor(){super(optionsFromArguments(Channel.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const Ke=optionsFromArguments(Channel.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Solo({solo:Ke.solo,context:this.context}),this._panVol=this.output=new PanVol({context:this.context,pan:Ke.pan,volume:Ke.volume,mute:Ke.mute,channelCount:Ke.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(Ke){this._solo.solo=Ke}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(Ke){this._panVol.mute=Ke}_getBus(Ke){return Channel.buses.has(Ke)||Channel.buses.set(Ke,new Gain({context:this.context})),Channel.buses.get(Ke)}send(Ke,Ye=0){const Je=this._getBus(Ke),tt=new Gain({context:this.context,units:"decibels",gain:Ye});return this.connect(tt),tt.connect(Je),tt}receive(Ke){return this._getBus(Ke).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Channel.buses=new Map;class Mono extends ToneAudioNode{constructor(){super(optionsFromArguments(Mono.getDefaults(),arguments)),this.name="Mono",this.input=new Gain({context:this.context}),this._merge=this.output=new Merge({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class MultibandSplit extends ToneAudioNode{constructor(){super(optionsFromArguments(MultibandSplit.getDefaults(),arguments,["lowFrequency","highFrequency"])),this.name="MultibandSplit",this.input=new Gain({context:this.context}),this.output=void 0,this.low=new Filter({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Filter({context:this.context,frequency:0,type:"highpass"}),this.mid=new Filter({context:this.context,frequency:0,type:"lowpass"}),this.high=new Filter({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high];const Ke=optionsFromArguments(MultibandSplit.getDefaults(),arguments,["lowFrequency","highFrequency"]);this.lowFrequency=new Signal({context:this.context,units:"frequency",value:Ke.lowFrequency}),this.highFrequency=new Signal({context:this.context,units:"frequency",value:Ke.highFrequency}),this.Q=new Signal({context:this.context,units:"positive",value:Ke.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),readOnly(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),writable(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}let Listener$1=class extends ToneAudioNode{constructor(){super(...arguments),this.name="Listener",this.positionX=new Param({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Param({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Param({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Param({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Param({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Param({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Param({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Param({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Param({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}};onContextInit(Xe=>{Xe.listener=new Listener$1({context:Xe})});onContextClose(Xe=>{Xe.listener.dispose()});class Panner3D extends ToneAudioNode{constructor(){super(optionsFromArguments(Panner3D.getDefaults(),arguments,["positionX","positionY","positionZ"])),this.name="Panner3D";const Ke=optionsFromArguments(Panner3D.getDefaults(),arguments,["positionX","positionY","positionZ"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=Ke.panningModel,this.maxDistance=Ke.maxDistance,this.distanceModel=Ke.distanceModel,this.coneOuterGain=Ke.coneOuterGain,this.coneOuterAngle=Ke.coneOuterAngle,this.coneInnerAngle=Ke.coneInnerAngle,this.refDistance=Ke.refDistance,this.rolloffFactor=Ke.rolloffFactor,this.positionX=new Param({context:this.context,param:this._panner.positionX,value:Ke.positionX}),this.positionY=new Param({context:this.context,param:this._panner.positionY,value:Ke.positionY}),this.positionZ=new Param({context:this.context,param:this._panner.positionZ,value:Ke.positionZ}),this.orientationX=new Param({context:this.context,param:this._panner.orientationX,value:Ke.orientationX}),this.orientationY=new Param({context:this.context,param:this._panner.orientationY,value:Ke.orientationY}),this.orientationZ=new Param({context:this.context,param:this._panner.orientationZ,value:Ke.orientationZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(Ke,Ye,Je){return this.positionX.value=Ke,this.positionY.value=Ye,this.positionZ.value=Je,this}setOrientation(Ke,Ye,Je){return this.orientationX.value=Ke,this.orientationY.value=Ye,this.orientationZ.value=Je,this}get panningModel(){return this._panner.panningModel}set panningModel(Ke){this._panner.panningModel=Ke}get refDistance(){return this._panner.refDistance}set refDistance(Ke){this._panner.refDistance=Ke}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(Ke){this._panner.rolloffFactor=Ke}get distanceModel(){return this._panner.distanceModel}set distanceModel(Ke){this._panner.distanceModel=Ke}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(Ke){this._panner.coneInnerAngle=Ke}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(Ke){this._panner.coneOuterAngle=Ke}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(Ke){this._panner.coneOuterGain=Ke}get maxDistance(){return this._panner.maxDistance}set maxDistance(Ke){this._panner.maxDistance=Ke}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class Recorder extends ToneAudioNode{constructor(){super(optionsFromArguments(Recorder.getDefaults(),arguments)),this.name="Recorder";const Ke=optionsFromArguments(Recorder.getDefaults(),arguments);this.input=new Gain({context:this.context}),assert(Recorder.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:Ke.mimeType})}static getDefaults(){return ToneAudioNode.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return theWindow!==null&&Reflect.has(theWindow,"MediaRecorder")}get state(){return this._recorder.state==="inactive"?"stopped":this._recorder.state==="paused"?"paused":"started"}start(){return __awaiter$1(this,void 0,void 0,function*(){assert(this.state!=="started","Recorder is already started");const Ke=new Promise(Ye=>{const Je=()=>{this._recorder.removeEventListener("start",Je,!1),Ye()};this._recorder.addEventListener("start",Je,!1)});return this._recorder.start(),yield Ke})}stop(){return __awaiter$1(this,void 0,void 0,function*(){assert(this.state!=="stopped","Recorder is not started");const Ke=new Promise(Ye=>{const Je=tt=>{this._recorder.removeEventListener("dataavailable",Je,!1),Ye(tt.data)};this._recorder.addEventListener("dataavailable",Je,!1)});return this._recorder.stop(),yield Ke})}pause(){return assert(this.state==="started","Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}let Compressor$1=class vc extends ToneAudioNode{constructor(){super(optionsFromArguments(vc.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const Ke=optionsFromArguments(vc.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new Param({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:Ke.threshold}),this.attack=new Param({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:Ke.attack}),this.release=new Param({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:Ke.release}),this.knee=new Param({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:Ke.knee}),this.ratio=new Param({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:Ke.ratio}),readOnly(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}};class Gate extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Gate.getDefaults(),arguments,["threshold","smoothing"]))),this.name="Gate";const Ke=optionsFromArguments(Gate.getDefaults(),arguments,["threshold","smoothing"]);this._follower=new Follower({context:this.context,smoothing:Ke.smoothing}),this._gt=new GreaterThan({context:this.context,value:dbToGain(Ke.threshold)}),this.input=new Gain({context:this.context}),this._gate=this.output=new Gain({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return gainToDb(this._gt.value)}set threshold(Ke){this._gt.value=dbToGain(Ke)}get smoothing(){return this._follower.smoothing}set smoothing(Ke){this._follower.smoothing=Ke}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class Limiter extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Limiter.getDefaults(),arguments,["threshold"]))),this.name="Limiter";const Ke=optionsFromArguments(Limiter.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new Compressor$1({context:this.context,ratio:20,attack:.003,release:.01,threshold:Ke.threshold}),this.threshold=this._compressor.threshold,readOnly(this,"threshold")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class MidSideCompressor extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(MidSideCompressor.getDefaults(),arguments))),this.name="MidSideCompressor";const Ke=optionsFromArguments(MidSideCompressor.getDefaults(),arguments);this._midSideSplit=this.input=new MidSideSplit({context:this.context}),this._midSideMerge=this.output=new MidSideMerge({context:this.context}),this.mid=new Compressor$1(Object.assign(Ke.mid,{context:this.context})),this.side=new Compressor$1(Object.assign(Ke.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),readOnly(this,["mid","side"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class MultibandCompressor extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(MultibandCompressor.getDefaults(),arguments))),this.name="MultibandCompressor";const Ke=optionsFromArguments(MultibandCompressor.getDefaults(),arguments);this._splitter=this.input=new MultibandSplit({context:this.context,lowFrequency:Ke.lowFrequency,highFrequency:Ke.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new Gain({context:this.context}),this.low=new Compressor$1(Object.assign(Ke.low,{context:this.context})),this.mid=new Compressor$1(Object.assign(Ke.mid,{context:this.context})),this.high=new Compressor$1(Object.assign(Ke.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),readOnly(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class EQ3 extends ToneAudioNode{constructor(){super(optionsFromArguments(EQ3.getDefaults(),arguments,["low","mid","high"])),this.name="EQ3",this.output=new Gain({context:this.context}),this._internalChannels=[];const Ke=optionsFromArguments(EQ3.getDefaults(),arguments,["low","mid","high"]);this.input=this._multibandSplit=new MultibandSplit({context:this.context,highFrequency:Ke.highFrequency,lowFrequency:Ke.lowFrequency}),this._lowGain=new Gain({context:this.context,gain:Ke.low,units:"decibels"}),this._midGain=new Gain({context:this.context,gain:Ke.mid,units:"decibels"}),this._highGain=new Gain({context:this.context,gain:Ke.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),readOnly(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),writable(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class Convolver extends ToneAudioNode{constructor(){super(optionsFromArguments(Convolver.getDefaults(),arguments,["url","onload"])),this.name="Convolver",this._convolver=this.context.createConvolver();const Ke=optionsFromArguments(Convolver.getDefaults(),arguments,["url","onload"]);this._buffer=new ToneAudioBuffer(Ke.url,Ye=>{this.buffer=Ye,Ke.onload()}),this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=Ke.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{normalize:!0,onload:noOp})}load(Ke){return __awaiter$1(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(Ke)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(Ke){Ke&&this._buffer.set(Ke),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const Ye=this._buffer.get();this._convolver.buffer=Ye||null}get normalize(){return this._convolver.normalize}set normalize(Ke){this._convolver.normalize=Ke}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function now(){return getContext().now()}function immediate(){return getContext().immediate()}const Transport=getContext().transport;function getTransport(){return getContext().transport}const Destination=getContext().destination,Master=getContext().destination;function getDestination(){return getContext().destination}const Listener=getContext().listener;function getListener(){return getContext().listener}const Draw=getContext().draw;function getDraw(){return getContext().draw}const context=getContext();function loaded(){return ToneAudioBuffer.loaded()}const Buffer$1=ToneAudioBuffer,Buffers=ToneAudioBuffers,BufferSource=ToneBufferSource,Tone=Object.freeze(Object.defineProperty({__proto__:null,AMOscillator,AMSynth,Abs,Add,AmplitudeEnvelope,Analyser,AudioToGain,AutoFilter,AutoPanner,AutoWah,BaseContext,BiquadFilter,BitCrusher,Buffer:Buffer$1,BufferSource,Buffers,Channel,Chebyshev,Chorus,Clock,Compressor:Compressor$1,Context,Convolver,CrossFade,DCMeter,Delay,Destination,Distortion,Draw,DuoSynth,EQ3,Emitter,Envelope,FFT:FFT$1,FMOscillator,FMSynth,FatOscillator,FeedbackCombFilter,FeedbackDelay,Filter,Follower,Freeverb,Frequency,FrequencyClass,FrequencyEnvelope,FrequencyShifter,Gain,GainToAudio,Gate,GrainPlayer,GreaterThan,GreaterThanZero,IntervalTimeline,JCReverb,LFO,Limiter,Listener,Loop,LowpassCombFilter,Master,MembraneSynth,Merge,MetalSynth,Meter,MidSideCompressor,MidSideMerge,MidSideSplit,Midi:Midi$1,MidiClass,Mono,MonoSynth,MultibandCompressor,MultibandSplit,Multiply,Negate,Noise,NoiseSynth,Offline,OfflineContext,OmniOscillator,OnePoleFilter,Oscillator,PWMOscillator,PanVol,Panner,Panner3D,Param,Part,Pattern,Phaser,PingPongDelay,PitchShift,Player:Player$1,Players,PluckSynth,PolySynth,Pow,PulseOscillator,Recorder,Reverb,Sampler,Scale,ScaleExp,Sequence,Signal,Solo,Split,StateTimeline,StereoWidener,Subtract,SyncedSignal,Synth,Ticks,TicksClass,Time,TimeClass,Timeline,ToneAudioBuffer,ToneAudioBuffers,ToneAudioNode,ToneBufferSource,ToneEvent,ToneOscillatorNode,Transport,TransportTime,TransportTimeClass,Tremolo,Unit:Units,UserMedia,Vibrato,Volume,WaveShaper,Waveform,Zero,connect,connectSeries,connectSignal,context,dbToGain,debug:Debug,defaultArg,disconnect,ftom,gainToDb,getContext,getDestination,getDraw,getListener,getTransport,immediate,intervalToFrequencyRatio,isArray:isArray$8,isBoolean:isBoolean$1,isDefined,isFunction:isFunction$2,isNote,isNumber:isNumber$2,isObject:isObject$4,isString:isString$1,isUndef,loaded,mtof,now,optionsFromArguments,setContext,start,supported:isSupported,version},Symbol.toStringTag,{value:"Module"}));var Midi={},midiFile={};function parseMidi(Xe){var Ke=new Parser(Xe),Ye=Ke.readChunk();if(Ye.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+Ye.id+"'";for(var Je=parseHeader(Ye.data),tt=[],st=0;!Ke.eof()&&st<Je.numTracks;st++){var rt=Ke.readChunk();if(rt.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+rt.id+"'";var it=parseTrack(rt.data);tt.push(it)}return{header:Je,tracks:tt}}function parseHeader(Xe){var Ke=new Parser(Xe),Ye=Ke.readUInt16(),Je=Ke.readUInt16(),tt={format:Ye,numTracks:Je},st=Ke.readUInt16();return st&32768?(tt.framesPerSecond=256-(st>>8),tt.ticksPerFrame=st&255):tt.ticksPerBeat=st,tt}function parseTrack(Xe){for(var Ke=new Parser(Xe),Ye=[];!Ke.eof();){var Je=st();Ye.push(Je)}return Ye;var tt;function st(){var rt={};rt.deltaTime=Ke.readVarInt();var it=Ke.readUInt8();if((it&240)===240)if(it===255){rt.meta=!0;var ot=Ke.readUInt8(),at=Ke.readVarInt();switch(ot){case 0:if(rt.type="sequenceNumber",at!==2)throw"Expected length for sequenceNumber event is 2, got "+at;return rt.number=Ke.readUInt16(),rt;case 1:return rt.type="text",rt.text=Ke.readString(at),rt;case 2:return rt.type="copyrightNotice",rt.text=Ke.readString(at),rt;case 3:return rt.type="trackName",rt.text=Ke.readString(at),rt;case 4:return rt.type="instrumentName",rt.text=Ke.readString(at),rt;case 5:return rt.type="lyrics",rt.text=Ke.readString(at),rt;case 6:return rt.type="marker",rt.text=Ke.readString(at),rt;case 7:return rt.type="cuePoint",rt.text=Ke.readString(at),rt;case 32:if(rt.type="channelPrefix",at!=1)throw"Expected length for channelPrefix event is 1, got "+at;return rt.channel=Ke.readUInt8(),rt;case 33:if(rt.type="portPrefix",at!=1)throw"Expected length for portPrefix event is 1, got "+at;return rt.port=Ke.readUInt8(),rt;case 47:if(rt.type="endOfTrack",at!=0)throw"Expected length for endOfTrack event is 0, got "+at;return rt;case 81:if(rt.type="setTempo",at!=3)throw"Expected length for setTempo event is 3, got "+at;return rt.microsecondsPerBeat=Ke.readUInt24(),rt;case 84:if(rt.type="smpteOffset",at!=5)throw"Expected length for smpteOffset event is 5, got "+at;var lt=Ke.readUInt8(),ut={0:24,32:25,64:29,96:30};return rt.frameRate=ut[lt&96],rt.hour=lt&31,rt.min=Ke.readUInt8(),rt.sec=Ke.readUInt8(),rt.frame=Ke.readUInt8(),rt.subFrame=Ke.readUInt8(),rt;case 88:if(rt.type="timeSignature",at!=2&&at!=4)throw"Expected length for timeSignature event is 4 or 2, got "+at;return rt.numerator=Ke.readUInt8(),rt.denominator=1<<Ke.readUInt8(),at===4?(rt.metronome=Ke.readUInt8(),rt.thirtyseconds=Ke.readUInt8()):(rt.metronome=36,rt.thirtyseconds=8),rt;case 89:if(rt.type="keySignature",at!=2)throw"Expected length for keySignature event is 2, got "+at;return rt.key=Ke.readInt8(),rt.scale=Ke.readUInt8(),rt;case 127:return rt.type="sequencerSpecific",rt.data=Ke.readBytes(at),rt;default:return rt.type="unknownMeta",rt.data=Ke.readBytes(at),rt.metatypeByte=ot,rt}}else if(it==240){rt.type="sysEx";var at=Ke.readVarInt();return rt.data=Ke.readBytes(at),rt}else if(it==247){rt.type="endSysEx";var at=Ke.readVarInt();return rt.data=Ke.readBytes(at),rt}else throw"Unrecognised MIDI event type byte: "+it;else{var ht;if((it&128)===0){if(tt===null)throw"Running status byte encountered before status byte";ht=it,it=tt,rt.running=!0}else ht=Ke.readUInt8(),tt=it;var pt=it>>4;switch(rt.channel=it&15,pt){case 8:return rt.type="noteOff",rt.noteNumber=ht,rt.velocity=Ke.readUInt8(),rt;case 9:var ft=Ke.readUInt8();return rt.type=ft===0?"noteOff":"noteOn",rt.noteNumber=ht,rt.velocity=ft,ft===0&&(rt.byte9=!0),rt;case 10:return rt.type="noteAftertouch",rt.noteNumber=ht,rt.amount=Ke.readUInt8(),rt;case 11:return rt.type="controller",rt.controllerType=ht,rt.value=Ke.readUInt8(),rt;case 12:return rt.type="programChange",rt.programNumber=ht,rt;case 13:return rt.type="channelAftertouch",rt.amount=ht,rt;case 14:return rt.type="pitchBend",rt.value=ht+(Ke.readUInt8()<<7)-8192,rt;default:throw"Unrecognised MIDI event type: "+pt}}}}function Parser(Xe){this.buffer=Xe,this.bufferLen=this.buffer.length,this.pos=0}Parser.prototype.eof=function(){return this.pos>=this.bufferLen};Parser.prototype.readUInt8=function(){var Xe=this.buffer[this.pos];return this.pos+=1,Xe};Parser.prototype.readInt8=function(){var Xe=this.readUInt8();return Xe&128?Xe-256:Xe};Parser.prototype.readUInt16=function(){var Xe=this.readUInt8(),Ke=this.readUInt8();return(Xe<<8)+Ke};Parser.prototype.readInt16=function(){var Xe=this.readUInt16();return Xe&32768?Xe-65536:Xe};Parser.prototype.readUInt24=function(){var Xe=this.readUInt8(),Ke=this.readUInt8(),Ye=this.readUInt8();return(Xe<<16)+(Ke<<8)+Ye};Parser.prototype.readInt24=function(){var Xe=this.readUInt24();return Xe&8388608?Xe-16777216:Xe};Parser.prototype.readUInt32=function(){var Xe=this.readUInt8(),Ke=this.readUInt8(),Ye=this.readUInt8(),Je=this.readUInt8();return(Xe<<24)+(Ke<<16)+(Ye<<8)+Je};Parser.prototype.readBytes=function(Xe){var Ke=this.buffer.slice(this.pos,this.pos+Xe);return this.pos+=Xe,Ke};Parser.prototype.readString=function(Xe){var Ke=this.readBytes(Xe);return String.fromCharCode.apply(null,Ke)};Parser.prototype.readVarInt=function(){for(var Xe=0;!this.eof();){var Ke=this.readUInt8();if(Ke&128)Xe+=Ke&127,Xe<<=7;else return Xe+Ke}return Xe};Parser.prototype.readChunk=function(){var Xe=this.readString(4),Ke=this.readUInt32(),Ye=this.readBytes(Ke);return{id:Xe,length:Ke,data:Ye}};var midiParser=parseMidi;function writeMidi(Xe,Ke){if(typeof Xe!="object")throw"Invalid MIDI data";Ke=Ke||{};var Ye=Xe.header||{},Je=Xe.tracks||[],tt,st=Je.length,rt=new Writer;for(writeHeader(rt,Ye,st),tt=0;tt<st;tt++)writeTrack(rt,Je[tt],Ke);return rt.buffer}function writeHeader(Xe,Ke,Ye){var Je=Ke.format==null?1:Ke.format,tt=128;Ke.timeDivision?tt=Ke.timeDivision:Ke.ticksPerFrame&&Ke.framesPerSecond?tt=-(Ke.framesPerSecond&255)<<8|Ke.ticksPerFrame&255:Ke.ticksPerBeat&&(tt=Ke.ticksPerBeat&32767);var st=new Writer;st.writeUInt16(Je),st.writeUInt16(Ye),st.writeUInt16(tt),Xe.writeChunk("MThd",st.buffer)}function writeTrack(Xe,Ke,Ye){var Je=new Writer,tt,st=Ke.length,rt=null;for(tt=0;tt<st;tt++)(Ye.running===!1||!Ye.running&&!Ke[tt].running)&&(rt=null),rt=writeEvent(Je,Ke[tt],rt,Ye.useByte9ForNoteOff);Xe.writeChunk("MTrk",Je.buffer)}function writeEvent(Xe,Ke,Ye,Je){var tt=Ke.type,st=Ke.deltaTime,rt=Ke.text||"",it=Ke.data||[],ot=null;switch(Xe.writeVarInt(st),tt){case"sequenceNumber":Xe.writeUInt8(255),Xe.writeUInt8(0),Xe.writeVarInt(2),Xe.writeUInt16(Ke.number);break;case"text":Xe.writeUInt8(255),Xe.writeUInt8(1),Xe.writeVarInt(rt.length),Xe.writeString(rt);break;case"copyrightNotice":Xe.writeUInt8(255),Xe.writeUInt8(2),Xe.writeVarInt(rt.length),Xe.writeString(rt);break;case"trackName":Xe.writeUInt8(255),Xe.writeUInt8(3),Xe.writeVarInt(rt.length),Xe.writeString(rt);break;case"instrumentName":Xe.writeUInt8(255),Xe.writeUInt8(4),Xe.writeVarInt(rt.length),Xe.writeString(rt);break;case"lyrics":Xe.writeUInt8(255),Xe.writeUInt8(5),Xe.writeVarInt(rt.length),Xe.writeString(rt);break;case"marker":Xe.writeUInt8(255),Xe.writeUInt8(6),Xe.writeVarInt(rt.length),Xe.writeString(rt);break;case"cuePoint":Xe.writeUInt8(255),Xe.writeUInt8(7),Xe.writeVarInt(rt.length),Xe.writeString(rt);break;case"channelPrefix":Xe.writeUInt8(255),Xe.writeUInt8(32),Xe.writeVarInt(1),Xe.writeUInt8(Ke.channel);break;case"portPrefix":Xe.writeUInt8(255),Xe.writeUInt8(33),Xe.writeVarInt(1),Xe.writeUInt8(Ke.port);break;case"endOfTrack":Xe.writeUInt8(255),Xe.writeUInt8(47),Xe.writeVarInt(0);break;case"setTempo":Xe.writeUInt8(255),Xe.writeUInt8(81),Xe.writeVarInt(3),Xe.writeUInt24(Ke.microsecondsPerBeat);break;case"smpteOffset":Xe.writeUInt8(255),Xe.writeUInt8(84),Xe.writeVarInt(5);var at={24:0,25:32,29:64,30:96},lt=Ke.hour&31|at[Ke.frameRate];Xe.writeUInt8(lt),Xe.writeUInt8(Ke.min),Xe.writeUInt8(Ke.sec),Xe.writeUInt8(Ke.frame),Xe.writeUInt8(Ke.subFrame);break;case"timeSignature":Xe.writeUInt8(255),Xe.writeUInt8(88),Xe.writeVarInt(4),Xe.writeUInt8(Ke.numerator);var ut=Math.floor(Math.log(Ke.denominator)/Math.LN2)&255;Xe.writeUInt8(ut),Xe.writeUInt8(Ke.metronome),Xe.writeUInt8(Ke.thirtyseconds||8);break;case"keySignature":Xe.writeUInt8(255),Xe.writeUInt8(89),Xe.writeVarInt(2),Xe.writeInt8(Ke.key),Xe.writeUInt8(Ke.scale);break;case"sequencerSpecific":Xe.writeUInt8(255),Xe.writeUInt8(127),Xe.writeVarInt(it.length),Xe.writeBytes(it);break;case"unknownMeta":Ke.metatypeByte!=null&&(Xe.writeUInt8(255),Xe.writeUInt8(Ke.metatypeByte),Xe.writeVarInt(it.length),Xe.writeBytes(it));break;case"sysEx":Xe.writeUInt8(240),Xe.writeVarInt(it.length),Xe.writeBytes(it);break;case"endSysEx":Xe.writeUInt8(247),Xe.writeVarInt(it.length),Xe.writeBytes(it);break;case"noteOff":var ht=Je!==!1&&Ke.byte9||Je&&Ke.velocity==0?144:128;ot=ht|Ke.channel,ot!==Ye&&Xe.writeUInt8(ot),Xe.writeUInt8(Ke.noteNumber),Xe.writeUInt8(Ke.velocity);break;case"noteOn":ot=144|Ke.channel,ot!==Ye&&Xe.writeUInt8(ot),Xe.writeUInt8(Ke.noteNumber),Xe.writeUInt8(Ke.velocity);break;case"noteAftertouch":ot=160|Ke.channel,ot!==Ye&&Xe.writeUInt8(ot),Xe.writeUInt8(Ke.noteNumber),Xe.writeUInt8(Ke.amount);break;case"controller":ot=176|Ke.channel,ot!==Ye&&Xe.writeUInt8(ot),Xe.writeUInt8(Ke.controllerType),Xe.writeUInt8(Ke.value);break;case"programChange":ot=192|Ke.channel,ot!==Ye&&Xe.writeUInt8(ot),Xe.writeUInt8(Ke.programNumber);break;case"channelAftertouch":ot=208|Ke.channel,ot!==Ye&&Xe.writeUInt8(ot),Xe.writeUInt8(Ke.amount);break;case"pitchBend":ot=224|Ke.channel,ot!==Ye&&Xe.writeUInt8(ot);var pt=8192+Ke.value,ft=pt&127,xt=pt>>7&127;Xe.writeUInt8(ft),Xe.writeUInt8(xt);break;default:throw"Unrecognized event type: "+tt}return ot}function Writer(){this.buffer=[]}Writer.prototype.writeUInt8=function(Xe){this.buffer.push(Xe&255)};Writer.prototype.writeInt8=Writer.prototype.writeUInt8;Writer.prototype.writeUInt16=function(Xe){var Ke=Xe>>8&255,Ye=Xe&255;this.writeUInt8(Ke),this.writeUInt8(Ye)};Writer.prototype.writeInt16=Writer.prototype.writeUInt16;Writer.prototype.writeUInt24=function(Xe){var Ke=Xe>>16&255,Ye=Xe>>8&255,Je=Xe&255;this.writeUInt8(Ke),this.writeUInt8(Ye),this.writeUInt8(Je)};Writer.prototype.writeInt24=Writer.prototype.writeUInt24;Writer.prototype.writeUInt32=function(Xe){var Ke=Xe>>24&255,Ye=Xe>>16&255,Je=Xe>>8&255,tt=Xe&255;this.writeUInt8(Ke),this.writeUInt8(Ye),this.writeUInt8(Je),this.writeUInt8(tt)};Writer.prototype.writeInt32=Writer.prototype.writeUInt32;Writer.prototype.writeBytes=function(Xe){this.buffer=this.buffer.concat(Array.prototype.slice.call(Xe,0))};Writer.prototype.writeString=function(Xe){var Ke,Ye=Xe.length,Je=[];for(Ke=0;Ke<Ye;Ke++)Je.push(Xe.codePointAt(Ke));this.writeBytes(Je)};Writer.prototype.writeVarInt=function(Xe){if(Xe<0)throw"Cannot write negative variable-length integer";if(Xe<=127)this.writeUInt8(Xe);else{var Ke=Xe,Ye=[];for(Ye.push(Ke&127),Ke>>=7;Ke;){var Je=Ke&127|128;Ye.push(Je),Ke>>=7}this.writeBytes(Ye.reverse())}};Writer.prototype.writeChunk=function(Xe,Ke){this.writeString(Xe),this.writeUInt32(Ke.length),this.writeBytes(Ke)};var midiWriter=writeMidi;midiFile.parseMidi=midiParser;midiFile.writeMidi=midiWriter;var Header$1={},BinarySearch={};Object.defineProperty(BinarySearch,"__esModule",{value:!0});BinarySearch.insert=BinarySearch.search=void 0;function search(Xe,Ke,Ye){Ye===void 0&&(Ye="ticks");var Je=0,tt=Xe.length,st=tt;if(tt>0&&Xe[tt-1][Ye]<=Ke)return tt-1;for(;Je<st;){var rt=Math.floor(Je+(st-Je)/2),it=Xe[rt],ot=Xe[rt+1];if(it[Ye]===Ke){for(var at=rt;at<Xe.length;at++){var lt=Xe[at];lt[Ye]===Ke&&(rt=at)}return rt}else{if(it[Ye]<Ke&&ot[Ye]>Ke)return rt;it[Ye]>Ke?st=rt:it[Ye]<Ke&&(Je=rt+1)}}return-1}BinarySearch.search=search;function insert(Xe,Ke,Ye){if(Ye===void 0&&(Ye="ticks"),Xe.length){var Je=search(Xe,Ke[Ye],Ye);Xe.splice(Je+1,0,Ke)}else Xe.push(Ke)}BinarySearch.insert=insert;(function(Xe){Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.Header=Xe.keySignatureKeys=void 0;var Ke=BinarySearch,Ye=new WeakMap;Xe.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var Je=(function(){function tt(st){var rt=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",Ye.set(this,480),st){Ye.set(this,st.header.ticksPerBeat),st.tracks.forEach(function(ot){ot.forEach(function(at){at.meta&&(at.type==="timeSignature"?rt.timeSignatures.push({ticks:at.absoluteTime,timeSignature:[at.numerator,at.denominator]}):at.type==="setTempo"?rt.tempos.push({bpm:6e7/at.microsecondsPerBeat,ticks:at.absoluteTime}):at.type==="keySignature"&&rt.keySignatures.push({key:Xe.keySignatureKeys[at.key+7],scale:at.scale===0?"major":"minor",ticks:at.absoluteTime}))})});var it=0;st.tracks[0].forEach(function(ot){it+=ot.deltaTime,ot.meta&&(ot.type==="trackName"?rt.name=ot.text:(ot.type==="text"||ot.type==="cuePoint"||ot.type==="marker"||ot.type==="lyrics")&&rt.meta.push({text:ot.text,ticks:it,type:ot.type}))}),this.update()}}return tt.prototype.update=function(){var st=this,rt=0,it=0;this.tempos.sort(function(ot,at){return ot.ticks-at.ticks}),this.tempos.forEach(function(ot,at){var lt=at>0?st.tempos[at-1].bpm:st.tempos[0].bpm,ut=ot.ticks/st.ppq-it,ht=60/lt*ut;ot.time=ht+rt,rt=ot.time,it+=ut}),this.timeSignatures.sort(function(ot,at){return ot.ticks-at.ticks}),this.timeSignatures.forEach(function(ot,at){var lt=at>0?st.timeSignatures[at-1]:st.timeSignatures[0],ut=(ot.ticks-lt.ticks)/st.ppq,ht=ut/lt.timeSignature[0]/(lt.timeSignature[1]/4);lt.measures=lt.measures||0,ot.measures=ht+lt.measures})},tt.prototype.ticksToSeconds=function(st){var rt=(0,Ke.search)(this.tempos,st);if(rt!==-1){var it=this.tempos[rt],ot=it.time,at=(st-it.ticks)/this.ppq;return ot+60/it.bpm*at}else{var lt=st/this.ppq;return 60/120*lt}},tt.prototype.ticksToMeasures=function(st){var rt=(0,Ke.search)(this.timeSignatures,st);if(rt!==-1){var it=this.timeSignatures[rt],ot=(st-it.ticks)/this.ppq;return it.measures+ot/(it.timeSignature[0]/it.timeSignature[1])/4}else return st/this.ppq/4},Object.defineProperty(tt.prototype,"ppq",{get:function(){return Ye.get(this)},enumerable:!1,configurable:!0}),tt.prototype.secondsToTicks=function(st){var rt=(0,Ke.search)(this.tempos,st,"time");if(rt!==-1){var it=this.tempos[rt],ot=it.time,at=st-ot,lt=at/(60/it.bpm);return Math.round(it.ticks+lt*this.ppq)}else{var ut=st/.5;return Math.round(ut*this.ppq)}},tt.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(st){return{bpm:st.bpm,ticks:st.ticks}}),timeSignatures:this.timeSignatures}},tt.prototype.fromJSON=function(st){this.name=st.name,this.tempos=st.tempos.map(function(rt){return Object.assign({},rt)}),this.timeSignatures=st.timeSignatures.map(function(rt){return Object.assign({},rt)}),this.keySignatures=st.keySignatures.map(function(rt){return Object.assign({},rt)}),this.meta=st.meta.map(function(rt){return Object.assign({},rt)}),Ye.set(this,st.ppq),this.update()},tt.prototype.setTempo=function(st){this.tempos=[{bpm:st,ticks:0}],this.update()},tt})();Xe.Header=Je})(Header$1);var Track$1={},ControlChange={};(function(Xe){Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.ControlChange=Xe.controlChangeIds=Xe.controlChangeNames=void 0,Xe.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},Xe.controlChangeIds=Object.keys(Xe.controlChangeNames).reduce(function(tt,st){return tt[Xe.controlChangeNames[st]]=st,tt},{});var Ke=new WeakMap,Ye=new WeakMap,Je=(function(){function tt(st,rt){Ke.set(this,rt),Ye.set(this,st.controllerType),this.ticks=st.absoluteTime,this.value=st.value}return Object.defineProperty(tt.prototype,"number",{get:function(){return Ye.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"name",{get:function(){return Xe.controlChangeNames[this.number]?Xe.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"time",{get:function(){var st=Ke.get(this);return st.ticksToSeconds(this.ticks)},set:function(st){var rt=Ke.get(this);this.ticks=rt.secondsToTicks(st)},enumerable:!1,configurable:!0}),tt.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},tt})();Xe.ControlChange=Je})(ControlChange);var ControlChanges={};Object.defineProperty(ControlChanges,"__esModule",{value:!0});ControlChanges.createControlChanges=void 0;var ControlChange_1$1=ControlChange;function createControlChanges(){return new Proxy({},{get:function(Xe,Ke){if(Xe[Ke])return Xe[Ke];if(ControlChange_1$1.controlChangeIds.hasOwnProperty(Ke))return Xe[ControlChange_1$1.controlChangeIds[Ke]]},set:function(Xe,Ke,Ye){return ControlChange_1$1.controlChangeIds.hasOwnProperty(Ke)?Xe[ControlChange_1$1.controlChangeIds[Ke]]=Ye:Xe[Ke]=Ye,!0}})}ControlChanges.createControlChanges=createControlChanges;var PitchBend$1={};Object.defineProperty(PitchBend$1,"__esModule",{value:!0});PitchBend$1.PitchBend=void 0;var privateHeaderMap$2=new WeakMap,PitchBend=(function(){function Xe(Ke,Ye){privateHeaderMap$2.set(this,Ye),this.ticks=Ke.absoluteTime,this.value=Ke.value}return Object.defineProperty(Xe.prototype,"time",{get:function(){var Ke=privateHeaderMap$2.get(this);return Ke.ticksToSeconds(this.ticks)},set:function(Ke){var Ye=privateHeaderMap$2.get(this);this.ticks=Ye.secondsToTicks(Ke)},enumerable:!1,configurable:!0}),Xe.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},Xe})();PitchBend$1.PitchBend=PitchBend;var Instrument$2={},InstrumentMaps={};Object.defineProperty(InstrumentMaps,"__esModule",{value:!0});InstrumentMaps.DrumKitByPatchID=InstrumentMaps.InstrumentFamilyByID=InstrumentMaps.instrumentByPatchID=void 0;InstrumentMaps.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];InstrumentMaps.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];InstrumentMaps.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(Instrument$2,"__esModule",{value:!0});Instrument$2.Instrument=void 0;var InstrumentMaps_1=InstrumentMaps,privateTrackMap=new WeakMap,Instrument$1=(function(){function Xe(Ke,Ye){if(this.number=0,privateTrackMap.set(this,Ye),this.number=0,Ke){var Je=Ke.find(function(tt){return tt.type==="programChange"});Je&&(this.number=Je.programNumber)}}return Object.defineProperty(Xe.prototype,"name",{get:function(){return this.percussion?InstrumentMaps_1.DrumKitByPatchID[this.number]:InstrumentMaps_1.instrumentByPatchID[this.number]},set:function(Ke){var Ye=InstrumentMaps_1.instrumentByPatchID.indexOf(Ke);Ye!==-1&&(this.number=Ye)},enumerable:!1,configurable:!0}),Object.defineProperty(Xe.prototype,"family",{get:function(){return this.percussion?"drums":InstrumentMaps_1.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(Xe.prototype,"percussion",{get:function(){var Ke=privateTrackMap.get(this);return Ke.channel===9},enumerable:!1,configurable:!0}),Xe.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},Xe.prototype.fromJSON=function(Ke){this.number=Ke.number},Xe})();Instrument$2.Instrument=Instrument$1;var Note$1={};Object.defineProperty(Note$1,"__esModule",{value:!0});Note$1.Note=void 0;function midiToPitch(Xe){var Ke=Math.floor(Xe/12)-1;return midiToPitchClass(Xe)+Ke.toString()}function midiToPitchClass(Xe){var Ke=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Ye=Xe%12;return Ke[Ye]}function pitchClassToMidi(Xe){var Ke=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return Ke.indexOf(Xe)}var pitchToMidi=(function(){var Xe=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,Ke={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(Ye){var Je=Xe.exec(Ye),tt=Je[1],st=Je[2],rt=Ke[tt.toLowerCase()];return rt+(parseInt(st,10)+1)*12}})(),privateHeaderMap$1=new WeakMap,Note=(function(){function Xe(Ke,Ye,Je){privateHeaderMap$1.set(this,Je),this.midi=Ke.midi,this.velocity=Ke.velocity,this.noteOffVelocity=Ye.velocity,this.ticks=Ke.ticks,this.durationTicks=Ye.ticks-Ke.ticks}return Object.defineProperty(Xe.prototype,"name",{get:function(){return midiToPitch(this.midi)},set:function(Ke){this.midi=pitchToMidi(Ke)},enumerable:!1,configurable:!0}),Object.defineProperty(Xe.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(Ke){var Ye=Ke-this.octave;this.midi+=Ye*12},enumerable:!1,configurable:!0}),Object.defineProperty(Xe.prototype,"pitch",{get:function(){return midiToPitchClass(this.midi)},set:function(Ke){this.midi=12*(this.octave+1)+pitchClassToMidi(Ke)},enumerable:!1,configurable:!0}),Object.defineProperty(Xe.prototype,"duration",{get:function(){var Ke=privateHeaderMap$1.get(this);return Ke.ticksToSeconds(this.ticks+this.durationTicks)-Ke.ticksToSeconds(this.ticks)},set:function(Ke){var Ye=privateHeaderMap$1.get(this),Je=Ye.secondsToTicks(this.time+Ke);this.durationTicks=Je-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(Xe.prototype,"time",{get:function(){var Ke=privateHeaderMap$1.get(this);return Ke.ticksToSeconds(this.ticks)},set:function(Ke){var Ye=privateHeaderMap$1.get(this);this.ticks=Ye.secondsToTicks(Ke)},enumerable:!1,configurable:!0}),Object.defineProperty(Xe.prototype,"bars",{get:function(){var Ke=privateHeaderMap$1.get(this);return Ke.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),Xe.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},Xe})();Note$1.Note=Note;Object.defineProperty(Track$1,"__esModule",{value:!0});Track$1.Track=void 0;var BinarySearch_1=BinarySearch,ControlChange_1=ControlChange,ControlChanges_1=ControlChanges,PitchBend_1=PitchBend$1,Instrument_1=Instrument$2,Note_1=Note$1,privateHeaderMap=new WeakMap,Track=(function(){function Xe(Ke,Ye){var Je=this;if(this.name="",this.notes=[],this.controlChanges=(0,ControlChanges_1.createControlChanges)(),this.pitchBends=[],privateHeaderMap.set(this,Ye),Ke){var tt=Ke.find(function(ht){return ht.type==="trackName"});this.name=tt?tt.text:""}if(this.instrument=new Instrument_1.Instrument(Ke,this),this.channel=0,Ke){for(var st=Ke.filter(function(ht){return ht.type==="noteOn"}),rt=Ke.filter(function(ht){return ht.type==="noteOff"}),it=function(){var ht=st.shift();ot.channel=ht.channel;var pt=rt.findIndex(function(xt){return xt.noteNumber===ht.noteNumber&&xt.absoluteTime>=ht.absoluteTime});if(pt!==-1){var ft=rt.splice(pt,1)[0];ot.addNote({durationTicks:ft.absoluteTime-ht.absoluteTime,midi:ht.noteNumber,noteOffVelocity:ft.velocity/127,ticks:ht.absoluteTime,velocity:ht.velocity/127})}},ot=this;st.length;)it();var at=Ke.filter(function(ht){return ht.type==="controller"});at.forEach(function(ht){Je.addCC({number:ht.controllerType,ticks:ht.absoluteTime,value:ht.value/127})});var lt=Ke.filter(function(ht){return ht.type==="pitchBend"});lt.forEach(function(ht){Je.addPitchBend({ticks:ht.absoluteTime,value:ht.value/Math.pow(2,13)})});var ut=Ke.find(function(ht){return ht.type==="endOfTrack"});this.endOfTrackTicks=ut!==void 0?ut.absoluteTime:void 0}}return Xe.prototype.addNote=function(Ke){var Ye=privateHeaderMap.get(this),Je=new Note_1.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},Ye);return Object.assign(Je,Ke),(0,BinarySearch_1.insert)(this.notes,Je,"ticks"),this},Xe.prototype.addCC=function(Ke){var Ye=privateHeaderMap.get(this),Je=new ControlChange_1.ControlChange({controllerType:Ke.number},Ye);return delete Ke.number,Object.assign(Je,Ke),Array.isArray(this.controlChanges[Je.number])||(this.controlChanges[Je.number]=[]),(0,BinarySearch_1.insert)(this.controlChanges[Je.number],Je,"ticks"),this},Xe.prototype.addPitchBend=function(Ke){var Ye=privateHeaderMap.get(this),Je=new PitchBend_1.PitchBend({},Ye);return Object.assign(Je,Ke),(0,BinarySearch_1.insert)(this.pitchBends,Je,"ticks"),this},Object.defineProperty(Xe.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var Ke=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,Ye=0;Ye<this.notes.length-1;Ye++){var Je=this.notes[Ye].time+this.notes[Ye].duration;Ke<Je&&(Ke=Je)}return Ke},enumerable:!1,configurable:!0}),Object.defineProperty(Xe.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var Ke=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,Ye=0;Ye<this.notes.length-1;Ye++){var Je=this.notes[Ye].ticks+this.notes[Ye].durationTicks;Ke<Je&&(Ke=Je)}return Ke},enumerable:!1,configurable:!0}),Xe.prototype.fromJSON=function(Ke){var Ye=this;this.name=Ke.name,this.channel=Ke.channel,this.instrument=new Instrument_1.Instrument(void 0,this),this.instrument.fromJSON(Ke.instrument),Ke.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=Ke.endOfTrackTicks);for(var Je in Ke.controlChanges)Ke.controlChanges[Je]&&Ke.controlChanges[Je].forEach(function(tt){Ye.addCC({number:tt.number,ticks:tt.ticks,value:tt.value})});Ke.notes.forEach(function(tt){Ye.addNote({durationTicks:tt.durationTicks,midi:tt.midi,ticks:tt.ticks,velocity:tt.velocity})})},Xe.prototype.toJSON=function(){for(var Ke={},Ye=0;Ye<127;Ye++)this.controlChanges.hasOwnProperty(Ye)&&(Ke[Ye]=this.controlChanges[Ye].map(function(tt){return tt.toJSON()}));var Je={channel:this.channel,controlChanges:Ke,pitchBends:this.pitchBends.map(function(tt){return tt.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(tt){return tt.toJSON()})};return this.endOfTrackTicks!==void 0&&(Je.endOfTrackTicks=this.endOfTrackTicks),Je},Xe})();Track$1.Track=Track;var Encode={};function flatten(Xe){var Ke=[];return $flatten(Xe,Ke),Ke}function $flatten(Xe,Ke){for(var Ye=0;Ye<Xe.length;Ye++){var Je=Xe[Ye];Array.isArray(Je)?$flatten(Je,Ke):Ke.push(Je)}}const dist_es2015=Object.freeze(Object.defineProperty({__proto__:null,flatten},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(dist_es2015);var __spreadArray=commonjsGlobal&&commonjsGlobal.__spreadArray||function(Xe,Ke,Ye){if(Ye||arguments.length===2)for(var Je=0,tt=Ke.length,st;Je<tt;Je++)(st||!(Je in Ke))&&(st||(st=Array.prototype.slice.call(Ke,0,Je)),st[Je]=Ke[Je]);return Xe.concat(st||Array.prototype.slice.call(Ke))};Object.defineProperty(Encode,"__esModule",{value:!0});Encode.encode=void 0;var midi_file_1=midiFile,Header_1=Header$1,array_flatten_1=require$$2;function encodeNote(Xe,Ke){return[{absoluteTime:Xe.ticks,channel:Ke,deltaTime:0,noteNumber:Xe.midi,type:"noteOn",velocity:Math.floor(Xe.velocity*127)},{absoluteTime:Xe.ticks+Xe.durationTicks,channel:Ke,deltaTime:0,noteNumber:Xe.midi,type:"noteOff",velocity:Math.floor(Xe.noteOffVelocity*127)}]}function encodeNotes(Xe){return(0,array_flatten_1.flatten)(Xe.notes.map(function(Ke){return encodeNote(Ke,Xe.channel)}))}function encodeControlChange(Xe,Ke){return{absoluteTime:Xe.ticks,channel:Ke,controllerType:Xe.number,deltaTime:0,type:"controller",value:Math.floor(Xe.value*127)}}function encodeControlChanges(Xe){for(var Ke=[],Ye=0;Ye<127;Ye++)Xe.controlChanges.hasOwnProperty(Ye)&&Xe.controlChanges[Ye].forEach(function(Je){Ke.push(encodeControlChange(Je,Xe.channel))});return Ke}function encodePitchBend(Xe,Ke){return{absoluteTime:Xe.ticks,channel:Ke,deltaTime:0,type:"pitchBend",value:Xe.value}}function encodePitchBends(Xe){var Ke=[];return Xe.pitchBends.forEach(function(Ye){Ke.push(encodePitchBend(Ye,Xe.channel))}),Ke}function encodeInstrument(Xe){return{absoluteTime:0,channel:Xe.channel,deltaTime:0,programNumber:Xe.instrument.number,type:"programChange"}}function encodeTrackName(Xe){return{absoluteTime:0,deltaTime:0,meta:!0,text:Xe,type:"trackName"}}function encodeTempo(Xe){return{absoluteTime:Xe.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/Xe.bpm),type:"setTempo"}}function encodeTimeSignature(Xe){return{absoluteTime:Xe.ticks,deltaTime:0,denominator:Xe.timeSignature[1],meta:!0,metronome:24,numerator:Xe.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function encodeKeySignature(Xe){var Ke=Header_1.keySignatureKeys.indexOf(Xe.key);return{absoluteTime:Xe.ticks,deltaTime:0,key:Ke+7,meta:!0,scale:Xe.scale==="major"?0:1,type:"keySignature"}}function encodeText(Xe){return{absoluteTime:Xe.ticks,deltaTime:0,meta:!0,text:Xe.text,type:Xe.type}}function encode(Xe){var Ke={header:{format:1,numTracks:Xe.tracks.length+1,ticksPerBeat:Xe.header.ppq},tracks:__spreadArray([__spreadArray(__spreadArray(__spreadArray(__spreadArray([{absoluteTime:0,deltaTime:0,meta:!0,text:Xe.header.name,type:"trackName"}],Xe.header.keySignatures.map(function(Ye){return encodeKeySignature(Ye)}),!0),Xe.header.meta.map(function(Ye){return encodeText(Ye)}),!0),Xe.header.tempos.map(function(Ye){return encodeTempo(Ye)}),!0),Xe.header.timeSignatures.map(function(Ye){return encodeTimeSignature(Ye)}),!0)],Xe.tracks.map(function(Ye){return __spreadArray(__spreadArray(__spreadArray([encodeTrackName(Ye.name),encodeInstrument(Ye)],encodeNotes(Ye),!0),encodeControlChanges(Ye),!0),encodePitchBends(Ye),!0)}),!0)};return Ke.tracks=Ke.tracks.map(function(Ye){Ye=Ye.sort(function(tt,st){return tt.absoluteTime-st.absoluteTime});var Je=0;return Ye.forEach(function(tt){tt.deltaTime=tt.absoluteTime-Je,Je=tt.absoluteTime,delete tt.absoluteTime}),Ye.push({deltaTime:0,meta:!0,type:"endOfTrack"}),Ye}),new Uint8Array((0,midi_file_1.writeMidi)(Ke))}Encode.encode=encode;(function(Xe){var Ke=commonjsGlobal&&commonjsGlobal.__awaiter||function(ut,ht,pt,ft){function xt(vt){return vt instanceof pt?vt:new pt(function(At){At(vt)})}return new(pt||(pt=Promise))(function(vt,At){function Et(Ct){try{_t(ft.next(Ct))}catch(Tt){At(Tt)}}function wt(Ct){try{_t(ft.throw(Ct))}catch(Tt){At(Tt)}}function _t(Ct){Ct.done?vt(Ct.value):xt(Ct.value).then(Et,wt)}_t((ft=ft.apply(ut,ht||[])).next())})},Ye=commonjsGlobal&&commonjsGlobal.__generator||function(ut,ht){var pt={label:0,sent:function(){if(vt[0]&1)throw vt[1];return vt[1]},trys:[],ops:[]},ft,xt,vt,At;return At={next:Et(0),throw:Et(1),return:Et(2)},typeof Symbol=="function"&&(At[Symbol.iterator]=function(){return this}),At;function Et(_t){return function(Ct){return wt([_t,Ct])}}function wt(_t){if(ft)throw new TypeError("Generator is already executing.");for(;pt;)try{if(ft=1,xt&&(vt=_t[0]&2?xt.return:_t[0]?xt.throw||((vt=xt.return)&&vt.call(xt),0):xt.next)&&!(vt=vt.call(xt,_t[1])).done)return vt;switch(xt=0,vt&&(_t=[_t[0]&2,vt.value]),_t[0]){case 0:case 1:vt=_t;break;case 4:return pt.label++,{value:_t[1],done:!1};case 5:pt.label++,xt=_t[1],_t=[0];continue;case 7:_t=pt.ops.pop(),pt.trys.pop();continue;default:if(vt=pt.trys,!(vt=vt.length>0&&vt[vt.length-1])&&(_t[0]===6||_t[0]===2)){pt=0;continue}if(_t[0]===3&&(!vt||_t[1]>vt[0]&&_t[1]<vt[3])){pt.label=_t[1];break}if(_t[0]===6&&pt.label<vt[1]){pt.label=vt[1],vt=_t;break}if(vt&&pt.label<vt[2]){pt.label=vt[2],pt.ops.push(_t);break}vt[2]&&pt.ops.pop(),pt.trys.pop();continue}_t=ht.call(ut,pt)}catch(Ct){_t=[6,Ct],xt=0}finally{ft=vt=0}if(_t[0]&5)throw _t[1];return{value:_t[0]?_t[1]:void 0,done:!0}}};Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.Header=Xe.Track=Xe.Midi=void 0;var Je=midiFile,tt=Header$1,st=Track$1,rt=Encode,it=(function(){function ut(ht){var pt=this,ft=null;if(ht){var xt=ht instanceof ArrayBuffer?new Uint8Array(ht):ht;ft=(0,Je.parseMidi)(xt),ft.tracks.forEach(function(vt){var At=0;vt.forEach(function(Et){At+=Et.deltaTime,Et.absoluteTime=At})}),ft.tracks=lt(ft.tracks)}this.header=new tt.Header(ft),this.tracks=[],ht&&(this.tracks=ft.tracks.map(function(vt){return new st.Track(vt,pt.header)}),ft.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return ut.fromUrl=function(ht){return Ke(this,void 0,void 0,function(){var pt,ft;return Ye(this,function(xt){switch(xt.label){case 0:return[4,fetch(ht)];case 1:return pt=xt.sent(),pt.ok?[4,pt.arrayBuffer()]:[3,3];case 2:return ft=xt.sent(),[2,new ut(ft)];case 3:throw new Error("Could not load '".concat(ht,"'"))}})})},Object.defineProperty(ut.prototype,"name",{get:function(){return this.header.name},set:function(ht){this.header.name=ht},enumerable:!1,configurable:!0}),Object.defineProperty(ut.prototype,"duration",{get:function(){var ht=this.tracks.map(function(pt){return pt.duration});return Math.max.apply(Math,ht)},enumerable:!1,configurable:!0}),Object.defineProperty(ut.prototype,"durationTicks",{get:function(){var ht=this.tracks.map(function(pt){return pt.durationTicks});return Math.max.apply(Math,ht)},enumerable:!1,configurable:!0}),ut.prototype.addTrack=function(){var ht=new st.Track(void 0,this.header);return this.tracks.push(ht),ht},ut.prototype.toArray=function(){return(0,rt.encode)(this)},ut.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(ht){return ht.toJSON()})}},ut.prototype.fromJSON=function(ht){var pt=this;this.header=new tt.Header,this.header.fromJSON(ht.header),this.tracks=ht.tracks.map(function(ft){var xt=new st.Track(void 0,pt.header);return xt.fromJSON(ft),xt})},ut.prototype.clone=function(){var ht=new ut;return ht.fromJSON(this.toJSON()),ht},ut})();Xe.Midi=it;var ot=Track$1;Object.defineProperty(Xe,"Track",{enumerable:!0,get:function(){return ot.Track}});var at=Header$1;Object.defineProperty(Xe,"Header",{enumerable:!0,get:function(){return at.Header}});function lt(ut){for(var ht=[],pt=0;pt<ut.length;pt++)for(var ft=ht.length,xt=new Map,vt=Array(16).fill(0),At=0,Et=ut[pt];At<Et.length;At++){var wt=Et[At],_t=ft,Ct=wt.channel;if(Ct!==void 0){wt.type==="programChange"&&(vt[Ct]=wt.programNumber);var Tt=vt[Ct],St="".concat(Tt," ").concat(Ct);xt.has(St)?_t=xt.get(St):(_t=ft+xt.size,xt.set(St,_t))}ht[_t]||ht.push([]),ht[_t].push(wt)}return ht}})(Midi);function midiToSequenceProto(Xe){const Ke=new Midi.Midi(Xe),Ye=NoteSequence.create();Ye.ticksPerQuarter=Ke.header.ppq,Ye.sourceInfo=NoteSequence.SourceInfo.create({parser:NoteSequence.SourceInfo.Parser.TONEJS_MIDI_CONVERT,encodingType:NoteSequence.SourceInfo.EncodingType.MIDI});for(const tt of Ke.header.timeSignatures)Ye.timeSignatures.push(NoteSequence.TimeSignature.create({time:Ke.header.ticksToSeconds(tt.ticks),numerator:tt.timeSignature[0],denominator:tt.timeSignature[1]}));Ye.timeSignatures.length||Ye.timeSignatures.push(NoteSequence.TimeSignature.create({time:0,numerator:4,denominator:4}));for(const tt of Ke.header.tempos)Ye.tempos.push(NoteSequence.Tempo.create({time:tt.time,qpm:tt.bpm}));let Je=-1;for(const tt of Ke.tracks){tt.notes.length>0&&(Je+=1);for(const it of tt.notes){const ot=it.time,at=it.duration,lt=ot+at;Ye.notes.push(NoteSequence.Note.create({instrument:Je,program:tt.instrument.number,startTime:ot,endTime:lt,pitch:it.midi,velocity:Math.floor(it.velocity*MIDI_VELOCITIES),isDrum:tt.instrument.percussion})),lt>Ye.totalTime&&(Ye.totalTime=lt)}const st=Object.values(tt.controlChanges),rt=[].concat.apply([],st);for(const it of rt)Ye.controlChanges.push(NoteSequence.ControlChange.create({time:it.time,controlNumber:it.number,controlValue:Math.floor(it.value*(MIDI_VELOCITIES-1)),instrument:Je,program:tt.instrument.number,isDrum:tt.instrument.percussion}))}return Ye}function urlToBlob(Xe){return new Promise((Ke,Ye)=>{fetch$1(Xe).then(Je=>Je.blob()).then(Je=>{Ke(Je)}).catch(Je=>Ye(Je))})}function blobToNoteSequence(Xe){return new Promise((Ke,Ye)=>{const Je=new FileReader;Je.onload=tt=>{try{const st=midiToSequenceProto(Je.result);Ke(st)}catch(st){Ye(st)}},Je.onerror=tt=>Ye(tt),Je.readAsArrayBuffer(Xe)})}function urlToNoteSequence(Xe){return urlToBlob(Xe).then(blobToNoteSequence)}class Instrument{constructor(Ke){this.FADE_SECONDS=.1,this.baseURL=Ke,this.buffers=new ToneAudioBuffers,this.sourceMap=new Map,this.initialized=!1}async initialize(){await fetch$1(`${this.baseURL}/instrument.json`).then(Ke=>Ke.json()).then(Ke=>{this.name=Ke.name,this.minPitch=Ke.minPitch,this.maxPitch=Ke.maxPitch,this.durationSeconds=Ke.durationSeconds,this.releaseSeconds=Ke.releaseSeconds,this.percussive=Ke.percussive,this.velocities=Ke.velocities,this.initialized=!0})}sampleInfoToName(Ke){return this.velocities?`p${Ke.pitch}_v${Ke.velocity}`:`p${Ke.pitch}`}sampleNameToURL(Ke){return`${this.baseURL}/${Ke}.mp3`}nearestVelocity(Ke){if(!this.velocities)return Ke;Ke||(Ke=DEFAULT_VELOCITY);let Ye,Je=MIDI_VELOCITIES;return this.velocities.forEach(tt=>{const st=Math.abs(tt-Ke);st<Je&&(Ye=tt,Je=st)}),Ye}async loadSamples(Ke){this.initialized||await this.initialize();const Ye=Ke.filter(st=>st.pitch<this.minPitch||st.pitch>this.maxPitch?(log$1(`Pitch ${st.pitch} is outside the valid range for ${this.name}, ignoring.`,"SoundFont"),!1):!0).map(st=>this.sampleInfoToName({pitch:st.pitch,velocity:this.nearestVelocity(st.velocity)})),tt=Array.from(new Set(Ye)).filter(st=>!this.buffers.has(st)).map(st=>({name:st,url:this.sampleNameToURL(st)}));tt.length>0&&(tt.forEach(st=>this.buffers.add(st.name,st.url)),await loaded(),log$1(`Loaded samples for ${this.name}.`,"SoundFont"))}playNote(Ke,Ye,Je,tt,st){const rt=this.getBuffer(Ke,Ye);if(!rt)return;tt>this.durationSeconds&&log$1(`Requested note duration longer than sample duration: ${tt} > ${this.durationSeconds}`,"SoundFont");const it=new ToneBufferSource({url:rt,fadeOut:this.FADE_SECONDS}).connect(st);if(it.start(Je,0,void 0,1),!this.percussive&&tt<this.durationSeconds){const ot=new ToneBufferSource({url:rt,fadeOut:this.FADE_SECONDS}).connect(st);it.stop(Je+tt+this.FADE_SECONDS),ot.start(Je+tt,this.durationSeconds,void 0,1)}}playNoteDown(Ke,Ye,Je){const tt=this.getBuffer(Ke,Ye);if(!tt)return;const st=new ToneBufferSource(tt).connect(Je);st.start(0,0,void 0,1),this.sourceMap.has(Ke)&&this.sourceMap.get(Ke).stop(now()+this.FADE_SECONDS,this.FADE_SECONDS),this.sourceMap.set(Ke,st)}playNoteUp(Ke,Ye,Je){if(!this.sourceMap.has(Ke))return;const tt=this.getBuffer(Ke,Ye);if(!tt)return;new ToneBufferSource({url:tt,fadeOut:this.FADE_SECONDS}).connect(Je).start(0,this.durationSeconds,void 0,1),this.sourceMap.get(Ke).stop(now()+this.FADE_SECONDS,this.FADE_SECONDS),this.sourceMap.delete(Ke)}getBuffer(Ke,Ye){if(!this.initialized)throw new Error("Instrument is not initialized.");if(Ke<this.minPitch||Ke>this.maxPitch){log$1(`Pitch ${Ke} is outside the valid range for ${this.name} (${this.minPitch}-${this.maxPitch})`,"SoundFont");return}const Je=this.sampleInfoToName({pitch:Ke,velocity:this.nearestVelocity(Ye)});if(!this.buffers.has(Je))throw new Error(`Buffer not found for ${this.name}: ${Je}`);const tt=this.buffers.get(Je);if(!tt.loaded)throw new Error(`Buffer not loaded for ${this.name}: ${Je}`);return tt}}class SoundFont{constructor(Ke){this.baseURL=Ke,this.instruments=new Map,this.initialized=!1}async initialize(){await fetch$1(`${this.baseURL}/soundfont.json`).then(Ke=>Ke.json()).then(Ke=>{this.name=Ke.name;for(const Ye in Ke.instruments){const Je=`${this.baseURL}/${Ke.instruments[Ye]}`;this.instruments.set(Ye==="drums"?"drums":+Ye,new Instrument(Je))}this.initialized=!0})}async loadSamples(Ke){this.initialized||await this.initialize();const Ye=new Map;Ke.forEach(Je=>{Je.isDrum=Je.isDrum||!1,Je.program=Je.program||0;const tt=Je.isDrum?"drums":Je.program,st={pitch:Je.pitch,velocity:Je.velocity};Ye.has(tt)?Ye.get(tt).push(st):this.instruments.has(tt)?Ye.set(tt,[st]):log$1(`No instrument in ${this.name} for: program=${Je.program}, isDrum=${Je.isDrum}`,"SoundFont")}),await Promise.all(Array.from(Ye.keys()).map(Je=>this.instruments.get(Je).loadSamples(Ye.get(Je))))}playNote(Ke,Ye,Je,tt,st=0,rt=!1,it){const ot=rt?"drums":st;if(!this.initialized)throw new Error("SoundFont is not initialized.");if(!this.instruments.has(ot)){log$1(`No instrument in ${this.name} for: program=${st}, isDrum=${rt}`,"SoundFont");return}this.instruments.get(ot).playNote(Ke,Ye,Je,tt,it)}playNoteDown(Ke,Ye,Je=0,tt=!1,st){const rt=tt?"drums":Je;if(!this.initialized)throw new Error("SoundFont is not initialized.");if(!this.instruments.has(rt)){log$1(`No instrument in ${this.name} for: program=${Je}, isDrum=${tt}`,"SoundFont");return}this.instruments.get(rt).playNoteDown(Ke,Ye,st)}playNoteUp(Ke,Ye,Je=0,tt=!1,st){const rt=tt?"drums":Je;if(!this.initialized)throw new Error("SoundFont is not initialized.");if(!this.instruments.has(rt)){log$1(`No instrument in ${this.name} for: program=${Je}, isDrum=${tt}`,"SoundFont");return}this.instruments.get(rt).playNoteUp(Ke,Ye,st)}}function compareQuantizedNotes(Xe,Ke){return Xe.quantizedStartStep<Ke.quantizedStartStep?-1:Xe.quantizedStartStep>Ke.quantizedStartStep?1:Xe.pitch<Ke.pitch?-1:1}class BasePlayer{constructor(Ke=!1,Ye){this.playClick=Ke,this.callbackObject=Ye,this.desiredQPM=void 0}setTempo(Ke){this.desiredQPM=Ke,Transport.state==="started"&&(Transport.bpm.value=Ke)}makeClickSequence(Ke){const Ye=clone(Ke),Je=Ye.notes.map(st=>st.quantizedEndStep),tt=Math.max(...Je);for(let st=0;st<tt;st+=4){const rt={pitch:st%16===0?LO_CLICK_PITCH:HI_CLICK_PITCH,quantizedStartStep:st,isDrum:!0,quantizedEndStep:st+1};Ye.notes.push(rt)}return Ye.notes.sort(compareQuantizedNotes),Ye}resumeContext(){context.resume()}start(Ke,Ye,Je=0){if(this.getPlayState()==="started")throw new Error("Cannot start playback; player is already playing.");if(this.getPlayState()==="paused")throw new Error("Cannot `start()` a paused player; use `resume()`.");if(Transport.state!=="stopped")throw new Error("Cannot start playback while `Tone.Transport` is in use.");this.resumeContext();const tt=isQuantizedSequence(Ke);if(this.playClick&&tt&&(Ke=this.makeClickSequence(Ke)),Ye?Transport.bpm.value=Ye:Ke.tempos&&Ke.tempos.length>0&&Ke.tempos[0].qpm>0?Transport.bpm.value=Ke.tempos[0].qpm:Transport.bpm.value=DEFAULT_QUARTERS_PER_MINUTE,tt)Ke=unquantizeSequence(Ke,Ye);else if(Ye)throw new Error("Cannot specify a `qpm` for a non-quantized sequence.");const st=new Part((rt,it)=>{this.currentPart===st&&(this.playNote(rt,it),this.callbackObject&&Draw.schedule(()=>{this.callbackObject.run(it,rt)},rt))},Ke.notes.map(rt=>[rt.startTime,rt]));return this.currentPart=st,this.desiredQPM&&(Transport.bpm.value=this.desiredQPM),this.currentPart.start(void 0,Je),Transport.state!=="started"&&Transport.start(),new Promise(rt=>{this.scheduledStop=Transport.schedule(()=>{this.stop(),rt(),this.callbackObject&&this.callbackObject.stop()},`+${Ke.totalTime}`)})}stop(){this.isPlaying()&&(this.currentPart.stop(),Transport.stop(),this.currentPart=null),Transport.clear(this.scheduledStop),this.scheduledStop=void 0,this.desiredQPM=void 0}pause(){if(!this.isPlaying())throw new Error("Cannot pause playback while the player is stopped.");Transport.pause()}resume(){if(this.getPlayState()!=="paused")throw new Error(`Cannot resume playback while "${this.getPlayState()}".`);Transport.start()}seekTo(Ke){if(!this.isPlaying())throw new Error("Cannot seek while the player is stopped.");Transport.seconds=Ke}isPlaying(){return!!this.currentPart}getPlayState(){return this.isPlaying()?Transport.state:"stopped"}}class DrumKit{constructor(){this.DRUM_PITCH_TO_CLASS=new Map,this.kick=new MembraneSynth().toDestination(),this.tomLow=new MembraneSynth({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.tomMid=new MembraneSynth({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.tomHigh=new MembraneSynth({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.closedHihat=new MetalSynth({frequency:400,envelope:{attack:.001,decay:.1,release:.8},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1}).toDestination(),this.openHihat=new MetalSynth({frequency:400,envelope:{attack:.001,decay:.5,release:.8,sustain:1},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1}).toDestination(),this.ride=new MetalSynth().toDestination(),this.crash=new MetalSynth({frequency:300,envelope:{attack:.001,decay:1,release:3},harmonicity:5.1,modulationIndex:64,resonance:4e3,octaves:1.5}).toDestination(),this.snare=new NoiseSynth({noise:{type:"white"},envelope:{attack:.005,decay:.05,sustain:.1,release:.4}}).toDestination(),this.loClick=new MembraneSynth({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.hiClick=new MembraneSynth({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.pitchPlayers=[(Ke,Ye=1)=>this.kick.triggerAttackRelease("C2","8n",Ke,Ye),(Ke,Ye=1)=>this.snare.triggerAttackRelease("16n",Ke,Ye),(Ke,Ye=1)=>this.closedHihat.triggerAttack(Ke,.3,Ye),(Ke,Ye=1)=>this.openHihat.triggerAttack(Ke,.3,Ye),(Ke,Ye=.5)=>this.tomLow.triggerAttack("G3",Ke,Ye),(Ke,Ye=.5)=>this.tomMid.triggerAttack("C4",Ke,Ye),(Ke,Ye=.5)=>this.tomHigh.triggerAttack("F4",Ke,Ye),(Ke,Ye=1)=>this.crash.triggerAttack(Ke,1,Ye),(Ke,Ye=1)=>this.ride.triggerAttack(Ke,.5,Ye),(Ke,Ye=.5)=>this.loClick.triggerAttack("G5",Ke,Ye),(Ke,Ye=.5)=>this.hiClick.triggerAttack("C6",Ke,Ye)];for(let Ke=0;Ke<DEFAULT_DRUM_PITCH_CLASSES.length;++Ke)DEFAULT_DRUM_PITCH_CLASSES[Ke].forEach(Ye=>{this.DRUM_PITCH_TO_CLASS.set(Ye,Ke)});this.DRUM_PITCH_TO_CLASS.set(LO_CLICK_PITCH,LO_CLICK_CLASS),this.DRUM_PITCH_TO_CLASS.set(HI_CLICK_PITCH,HI_CLICK_CLASS)}static getInstance(){return DrumKit.instance||(DrumKit.instance=new DrumKit),DrumKit.instance}playNote(Ke,Ye,Je){this.pitchPlayers[this.DRUM_PITCH_TO_CLASS.get(Ke)](Ye,Je)}}class Player extends BasePlayer{constructor(){super(...arguments),this.drumKit=DrumKit.getInstance(),this.bassSynth=new Synth({volume:5,oscillator:{type:"triangle"}}).toDestination(),this.polySynth=new PolySynth().toDestination()}playNote(Ke,Ye){const Je=Ye.hasOwnProperty("velocity")?Ye.velocity/MAX_MIDI_VELOCITY:void 0;if(Ye.isDrum)this.drumKit.playNote(Ye.pitch,Ke,Je);else{const tt=Frequency(Ye.pitch,"midi").toFrequency(),st=Ye.endTime-Ye.startTime;this.getSynth(Ye.instrument,Ye.program).triggerAttackRelease(tt,st,Ke,Je)}}getSynth(Ke,Ye){return Ye!==void 0&&Ye>=32&&Ye<=39?this.bassSynth:this.polySynth}}Player.tone=Tone;class SoundFontPlayer extends BasePlayer{constructor(Ke,Ye=Master,Je,tt,st){super(!1,st),this.soundFont=new SoundFont(Ke),this.output=Ye,this.programOutputs=Je,this.drumOutputs=tt}async loadSamples(Ke){await this.soundFont.loadSamples(Ke.notes.map(Ye=>({pitch:Ye.pitch,velocity:Ye.velocity,program:Ye.program||0,isDrum:Ye.isDrum||!1})))}async loadAllSamples(Ke=0,Ye=!1){const Je=NoteSequence.create(),tt=Ye?MIN_DRUM_PITCH:MIN_PIANO_PITCH,st=Ye?MAX_DRUM_PITCH:MAX_PIANO_PITCH;for(let rt=tt;rt<=st;rt++)for(let it=MIN_MIDI_VELOCITY;it<MAX_MIDI_VELOCITY;it++)Je.notes.push({pitch:rt,velocity:it,program:Ke,isDrum:Ye});return this.loadSamples(Je)}resumeContext(){context.resume()}start(Ke,Ye,Je=0){return this.resumeContext(),this.loadSamples(Ke).then(()=>super.start(Ke,Ye,Je))}playNote(Ke,Ye){this.soundFont.playNote(Ye.pitch,Ye.velocity,Ke,Ye.endTime-Ye.startTime,Ye.program,Ye.isDrum,this.getAudioNodeOutput(Ye))}playNoteDown(Ke){this.soundFont.playNoteDown(Ke.pitch,Ke.velocity,Ke.program,Ke.isDrum,this.getAudioNodeOutput(Ke))}playNoteUp(Ke){this.soundFont.playNoteUp(Ke.pitch,Ke.velocity,Ke.program,Ke.isDrum,this.getAudioNodeOutput(Ke))}getAudioNodeOutput(Ke){let Ye=this.output;return this.programOutputs&&!Ke.isDrum?this.programOutputs.has(Ke.program)&&(Ye=this.programOutputs.get(Ke.program)):this.drumOutputs&&Ke.isDrum&&this.drumOutputs.has(Ke.pitch)&&(Ye=this.drumOutputs.get(Ke.pitch)),Ye}}var es6={exports:{}};(function(Xe,Ke){(function(Ye,Je){Xe.exports=Je()})(self,(function(){return(function(Ye){var Je={};function tt(st){if(Je[st])return Je[st].exports;var rt=Je[st]={i:st,l:!1,exports:{}};return Ye[st].call(rt.exports,rt,rt.exports,tt),rt.l=!0,rt.exports}return tt.m=Ye,tt.c=Je,tt.d=function(st,rt,it){tt.o(st,rt)||Object.defineProperty(st,rt,{enumerable:!0,get:it})},tt.r=function(st){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(st,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(st,"__esModule",{value:!0})},tt.t=function(st,rt){if(1&rt&&(st=tt(st)),8&rt||4&rt&&typeof st=="object"&&st&&st.__esModule)return st;var it=Object.create(null);if(tt.r(it),Object.defineProperty(it,"default",{enumerable:!0,value:st}),2&rt&&typeof st!="string")for(var ot in st)tt.d(it,ot,(function(at){return st[at]}).bind(null,ot));return it},tt.n=function(st){var rt=st&&st.__esModule?function(){return st.default}:function(){return st};return tt.d(rt,"a",rt),rt},tt.o=function(st,rt){return Object.prototype.hasOwnProperty.call(st,rt)},tt.p="",tt(tt.s=4)})([function(Ye,Je,tt){tt.r(Je),tt.d(Je,"SVGNS",(function(){return st})),tt.d(Je,"drawSVGPath",(function(){return rt})),tt.d(Je,"drawSVGText",(function(){return it})),tt.d(Je,"createSVGGroupChild",(function(){return ot})),tt.d(Je,"setFade",(function(){return at}));const st="http://www.w3.org/2000/svg";function rt(lt,ut,ht,pt,ft,xt,vt=1){const At=document.createElementNS(st,"path");return At.setAttributeNS(null,"d",ut),At.setAttributeNS(null,"transform",`translate(${ht}, ${pt}) scale(${ft}, ${xt})`),At.setAttributeNS(null,"opacity",`${vt}`),lt.appendChild(At),At}function it(lt,ut,ht,pt,ft,xt=!1,vt=1,At=1){const Et=document.createElementNS(st,"text");Et.setAttributeNS(null,"font-family","Times"),Et.setAttributeNS(null,"font-size",ft),xt&&Et.setAttributeNS(null,"font-weight","bold"),Et.setAttributeNS(null,"transform",`translate(${ht}, ${pt}) scale(${vt}, ${At})`);const wt=document.createTextNode(ut);return Et.appendChild(wt),lt.appendChild(Et),Et}function ot(lt,ut){const ht=document.createElementNS(st,"g");return ht.setAttribute("data-id",ut),lt.appendChild(ht),ht}function at(lt,ut=!1,ht=1,pt=0){let ft=lt.querySelector("animate");if(!ft){(ft=document.createElementNS(st,"animate")).setAttributeNS(null,"attributeName","opacity"),ft.setAttributeNS(null,"dur","4s"),ft.setAttributeNS(null,"fill","freeze"),ft.setAttributeNS(null,"keyTimes","0; 0.25; 0.5; 0.75; 1");const xt=(ht+3*pt)/4;ft.setAttributeNS(null,"values",`${ht}; ${xt}; ${pt}; ${xt}; ${ht}`)}return ut?ft.setAttributeNS(null,"repeatCount","indefinite"):ft.setAttributeNS(null,"repeatCount","1"),lt.appendChild(ft),lt}},function(Ye,Je,tt){tt.r(Je),tt.d(Je,"PATH_SCALE",(function(){return st})),tt.d(Je,"staffLinePath",(function(){return it})),tt.d(Je,"extraLinePath",(function(){return ot})),tt.d(Je,"barPath",(function(){return at})),tt.d(Je,"stemPath",(function(){return lt})),tt.d(Je,"singleFlagPath",(function(){return ut})),tt.d(Je,"multiFlagPath",(function(){return ht})),tt.d(Je,"tiePath",(function(){return pt})),tt.d(Je,"dotPath",(function(){return ft})),tt.d(Je,"NOTE_PATHS",(function(){return xt})),tt.d(Je,"REST_PATHS",(function(){return vt})),tt.d(Je,"CLEF_PATHS",(function(){return At})),tt.d(Je,"ACCIDENTAL_PATHS",(function(){return Et}));const st=100,rt=`M 0,10 C 0,-15 35,-50 80,-50 110,-50 125,-35 125,-10 
125,15 90,50 45,50 15,50 0,35 0,10 Z`,it="m 0,0 h 100",ot="m -25,0 h 175",at="m 0,-200 v 400",lt="m 0,0 v 100 h 15 v -100 z",ut=`M0,0 h 12 c 7,100 175,156 62,314 79,-177 -49,
-193 -61,-200 l -13,-5 z`,ht=`m 0,0 h 10 c 6,72 173,64 84,227 44,-120 -44,
-123 -94,-167 z`,pt=`M 0,25 C 10,46 30,67 50,67 69,67 90,47 100,25 94,
65 73,89 50,89 26,89 5,63 0,25 Z`,ft="M 5 -20 a 20 20 0 1 0 0.00001 0 z",xt={4:{path:`m 0,0 c 0,-37 49,-51 79,-51 31,0 83,13 83,51 0,39 
-55,51 -84,51 C 49,51 0,37 0,0 Z m 111,31 c 13,-19 0,-58 -22,-68 -33,-15 
-53,10 -39,49 9,27 48,39 61,19 z`,width:150,stemVSteps:0,stemAnchor:0,flags:0},2:{path:`m 0,10 c 0,-25 35,-60 80,-60 15,0 45,4 45,40 C 125,16 
89,50 45,50 17,50 0,36 0,10 Z m 71,7 c 17,-11 45,-34 38,-45 -7,-10 -39,1 
-57,12 -19,11 -42,31 -36,42 6,10 37,2 55,-9 z`,width:125,stemVSteps:7,stemAnchor:-10,flags:0},1:{path:rt,width:125,stemVSteps:7,stemAnchor:-10,flags:0},.5:{path:rt,width:125,stemVSteps:7,stemAnchor:-10,flags:1},.25:{path:rt,width:125,stemVSteps:9,stemAnchor:-10,flags:2},.125:{path:rt,width:125,stemVSteps:11,stemAnchor:-10,flags:3},.0625:{path:rt,width:125,stemVSteps:13,stemAnchor:-10,flags:4}},vt={4:"m 0,-50 h 125 v -50 H 0 Z",2:"M 0,0 H 125 V -50 H 0 Z",1:`m 0,-25 c 39,-39 37,-75 8,-120 l 6,-5 61,103 C 
40,-13 31,4 73,71 l -5,5 C 14,52 16,125 67,144 l -4,6 C -37,102 -1,22 59,60 Z`,.5:`m 52,-47 c 26,-2 42,-21 48,-42 l 12,4 L 64,83 52,79 
88,-49 c 0,0 -17,22 -57,22 -16,0 -31,-13 -31,-27 0,-18 10,-31 27,-31 17,0 
33,15 25,38 z`,.25:`m 129,-191 c -6,21 -22,40 -48,42 8,-23 -8,-38 
-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -20,69 
c -7,18 -22,33 -45,35 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 15,27 
31,27 40,0 57,-22 57,-22 l -36,128 12,4 77,-270 z`,.125:`m 129,-191 c -6,21 -22,40 -48,42 8,-23 -8,-38 
-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -20,69 
c -7,18 -22,33 -45,35 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 15,27 
31,27 40,0 57,-22 57,-22 L 68,20 C 61,37 46,51 24,52 32,29 16,14 -1,14 c 
-17,0 -27,13 -27,31 0,14 15,27 31,27 38,0 55,-20 57,-22 l -36,128 12,4 
105,-369 z`,.0625:`m 158,-292 c -6,21 -22,40 -48,42 8,-23 -8,-38 
-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -17,61 
v 0 c -6,21 -22,40 -48,42 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 
15,27 31,27 40,0 57,-22 57,-22 l -20,69 c -7,18 -22,33 -45,35 8,-23 -8,-38 
-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 L 68,20 C 
61,37 46,51 24,52 32,29 16,14 -1,14 c -17,0 -27,13 -27,31 0,14 15,27 31,27 
38,0 55,-20 57,-22 l -36,128 12,4 134,-469 z`},At={50:{path:`m 101,-199 c -49,0 -100,28 -100,83 0,39 58,57 82,26 15,-20 
-4,-47 -32,-47 -23,1 -25,0 -25,-8 0,-22 40,-46 71,-41 91,16 67,208 -105,302 
75,-27 198,-94 211,-201 6,-66 -42,-114 -102,-114 z m 143,33 c -13,0 -23,11 
-23,24 0,14 10,24 23,24 13,0 23,-11 23,-24 0,-13 -10,-24 -23,-24 z m 2,83 c 
-13,0 -23,11 -23,24 0,14 10,24 23,24 13,0 23,-11 23,-24 0,-13 -10,-24 -23,-24 
z`,upper:-4,lower:3},71:{path:`M 139,48 C 102,57 76,120 131,151 41,128 64,24 129,2 L 
117,-57 C -32,47 26,217 166,182 Z m 12,-1 27,131 C 242,153 216,46 151,47 
Z m -35,-177 c 34,-23 82,-117 50,-140 -23,-17 -71,33 -50,140 z m -10,10 c 
-23,-77 -20,-200 48,-213 19,-4 89,171 -26,266 l 13,66 c 120,-6 137,155 
39,191 l 12,58 c 30,131 -137,145 -138,47 0,-29 37,-59 63,-37 21,18 25,71 
-25,70 32,42 103,0 91,-65 L 167,193 C 56,232 -112,63 106,-120 Z`,upper:-7,lower:8}},Et=[null,`m -49,-121 v 52 l -29,9 v -48 h -8 v 51 l -20,6 v 29 l 
20,-6 v 70 l -20,6 v 30 l 20,-6 v 51 h 8 V 69 l 30,-8 v 50 h 8 V 58 l 20,-6 
V 23 l -20,6 v -71 l 20,-6 v -29 l -20,6 v -50 z m 1,82 v 71 l -29,9 v -71 z`,`M -106,-166 V 67 c 52,-42 85,-56 85,-94 0,-47 -46,-51 
-73,-22 v -117 z m 31,120 c 20,0 42,46 -20,91 V -7 c 0,-28 10,-39 20,-39 z`,`m -81,-58 v -48 H -92 V 73 l 60,-13 v 50 h 11 V -72 Z m 
50,24 v 58 l -50,11 v -58 z`]},function(Ye,Je,tt){tt.r(Je),tt.d(Je,"MIN_RESOLUTION",(function(){return st})),tt.d(Je,"STEM_WIDTH",(function(){return rt})),tt.d(Je,"LINE_STROKE",(function(){return it})),tt.d(Je,"COMPACT_SPACING",(function(){return ot}));const st=.0625,rt=15,it=1,ot=150},function(Ye,Je,tt){tt.r(Je),tt.d(Je,"MAX_QUARTER_DIVISION",(function(){return lt})),tt.d(Je,"ScrollType",(function(){return ut})),tt.d(Je,"StaffSVGRender",(function(){return ht}));var st=tt(2),rt=tt(0),it=tt(1);const ot=[{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[0,1,0,1,0,0,1,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,0,3,0,3,0,0,3,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,0,1,0,3,0,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,0,3,0,2,0,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,3,0,0,3,0,3,0,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,2,0,0,2,0,2,0,0,3]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-7],accidental:[3,0,3,0,3,0,0,3,0,3,0,0]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[0,1,0,1,0,3,0,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,0,3,0,3,0,2,0,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,0,1,0,3,0,3,0,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,0,3,0,2,0,2,0,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,3,0,0,3,0,3,0,3,0,0]}],at=[{accidental:1,pitches:[]},{accidental:2,pitches:[70,75,68,73,66]},{accidental:1,pitches:[78,73]},{accidental:2,pitches:[70,75,68]},{accidental:1,pitches:[78,73,80,75]},{accidental:2,pitches:[70]},{accidental:2,pitches:[70,75,68,73,66,71]},{accidental:1,pitches:[78]},{accidental:2,pitches:[70,75,68,73]},{accidental:1,pitches:[78,73,80]},{accidental:2,pitches:[70,75]},{accidental:1,pitches:[78,73,80,75,70]}],lt=16;var ut;(function(pt){pt[pt.PAGE=0]="PAGE",pt[pt.NOTE=1]="NOTE",pt[pt.BAR=2]="BAR"})(ut||(ut={}));class ht{constructor(ft,xt,vt){this.handleScrollEvent=At=>{this.lastKnownScrollLeft=this.parentElement.scrollLeft,this.ticking||window.requestAnimationFrame(()=>{this.changeAndDrawSignaturesIfNeeded(this.lastKnownScrollLeft),this.ticking=!1}),this.ticking=!0},this.scoreInfo=ft,this.config={noteHeight:xt.noteHeight||6,noteSpacing:xt.noteSpacing||1,pixelsPerTimeStep:xt.pixelsPerTimeStep||30,noteRGB:xt.noteRGB||"8, 41, 64",activeNoteRGB:xt.activeNoteRGB||"240, 84, 119"},this.div=vt,this.timeSignatureNumerator=4,this.timeSignatureDenominator=4,this.key=xt.defaultKey||0,this.scrollType=xt.scrollType||ut.PAGE,this.scale=this.config.noteHeight/it.PATH_SCALE,(xt.pixelsPerTimeStep===void 0||xt.pixelsPerTimeStep<=0)&&(this.config.pixelsPerTimeStep=0,this.config.noteSpacing=st.COMPACT_SPACING*this.scale),this.clear(),this.redraw()}clear(){for(;this.div.lastChild;)this.div.removeChild(this.div.lastChild);this.div.style.overflow="visible",this.div.style.position="relative",this.overlaySVG=document.createElementNS(rt.SVGNS,"svg"),this.overlaySVG.style.position="absolute",this.div.appendChild(this.overlaySVG),this.overlayG=Object(rt.createSVGGroupChild)(this.overlaySVG,"overlay"),this.signaturesBlinking=!1,this.signaturesQuarters=0,this.parentElement=document.createElement("div"),this.parentElement.style.overflow="auto",this.div.appendChild(this.parentElement),this.ticking=!1,this.lastKnownScrollLeft=0,this.parentElement.addEventListener("scroll",this.handleScrollEvent),this.staffSVG=document.createElementNS(rt.SVGNS,"svg"),this.parentElement.appendChild(this.staffSVG),this.staffG=Object(rt.createSVGGroupChild)(this.staffSVG,"staff"),this.linesG=Object(rt.createSVGGroupChild)(this.staffSVG,"lines"),this.setStroke(this.linesG),this.staffG.appendChild(this.linesG),this.musicG=Object(rt.createSVGGroupChild)(this.staffSVG,"music"),this.setFill(this.musicG),this.setStroke(this.musicG,0),this.staffG.appendChild(this.musicG),this.signaturesG=Object(rt.createSVGGroupChild)(this.staffSVG,"signatures"),this.staffG.appendChild(this.signaturesG);let ft=0,xt=0;this.scoreInfo.notes.forEach(At=>{ft+=At.pitch,++xt});const vt=ft/xt;this.clef=vt<60?50:71,this.signaturesList=[{x:0,q:0}],this.signatureCurrent=0,this.signatureNext=0,this.changeKeySignatureIfNeeded(0),this.changeTimeSignatureIfNeeded(0),this.vStepSize=this.config.noteHeight/2,this.hStepSize=this.config.pixelsPerTimeStep,this.staffOffset=0,this.height=0,this.width=0,this.musicBlockMap=new Map,this.playingNotes=[],this.lastBar=0,this.barAccidentals={},this.lastQ=-1}isPaintingActiveNote(ft,xt){const vt=ft.start===xt.start,At=ft.start<=xt.start&&ft.start+ft.length>=xt.start+xt.length;return vt||At}redraw(ft,xt){let vt=-1;const At=this.config.pixelsPerTimeStep===0;if(ft){const Et=[];this.playingNotes.forEach(_t=>{this.isPaintingActiveNote(_t,ft)?Et.push(_t):this.highlightElement(this.getGroup(_t),!1)}),this.playingNotes=Et;const wt=this.getGroup(ft);if(wt){this.playingNotes.push(ft),this.highlightElement(wt,!0),vt=wt.getBoundingClientRect().left-this.staffSVG.getBoundingClientRect().left;const _t=ft.start,Ct=wt.getAttribute("data-is-bar-beginning");(this.scrollType!==ut.BAR||Ct)&&this.scrollIntoViewIfNeeded(xt,vt),!At&&this.signaturesBlinking&&_t>=this.signaturesQuarters&&(this.signaturesBlinking=!1,Object(rt.setFade)(this.overlayG,this.signaturesBlinking))}}else{this.setDetails();const Et=this.lastQ===-1;let wt=0,_t=0;Et?(_t=this.drawSignatures(this.overlayG,wt,!0,!0,!0),At&&(this.width=0,_t+=this.config.noteSpacing),_t+=this.drawRests(this.initialRest,wt+_t)):wt=this.width,this.musicBlockMap.forEach((St,Rt)=>{At||(wt=this.quartersToTime(Rt)*this.hStepSize),Rt>this.lastQ?(_t+=this.drawMusicBlock(St,wt+_t),this.lastQ=Rt):Rt===this.lastQ&&(_t+=this.drawRests(St,wt+_t))});const Ct=this.staffSVG.getBoundingClientRect(),Tt=this.musicG.getBoundingClientRect();if(this.updateVerticalBoundaries(Tt.top-Ct.top,Tt.bottom-Ct.top),At)this.width+=_t;else{const St=this.musicBlockMap.get(this.lastQ),Rt=this.quartersToTime(this.lastQ+St.notes[0].length);this.width=Rt*this.config.pixelsPerTimeStep}this.staffSVG.setAttributeNS(null,"width",`${this.width}`),this.redrawStaff(this.linesG,0,this.width)}return vt}drawMusicBlock(ft,xt){const vt=ft.notes[0].start;let At=this.drawBarIfNeeded(vt,xt);At+=this.drawSignaturesIfNeeded(vt,xt+At);let Et=0;for(let Ct=4;Ct>=st.MIN_RESOLUTION&&!Et;Ct/=2)Ct<=ft.notes[0].length&&(Et=Ct);if(Et===0){const Ct=ft.notes[0].length===0?"[infinite]":`${4/ft.notes[0].length}`;console.warn(" StaffRender ","background:orange; color:white",`StaffRender does not handle notes shorther than 1/${4/st.MIN_RESOLUTION}th, and this score tries to draw a 1/${Ct}th. Shortest possible note will be drawn instead.`),Et=st.MIN_RESOLUTION}const wt=it.NOTE_PATHS[Et];let _t;if(wt.stemAnchor&&(_t=Object(rt.createSVGGroupChild)(this.musicG,"stem")),ft.notes.forEach(Ct=>{const Tt=Ct.vSteps*this.vStepSize,St=2*(Ct.vSteps>0?Math.floor(Ct.vSteps/2):Math.ceil(Ct.vSteps/2)),Rt=Ct.vSteps>0?-2:2;for(let Nt=St;Math.abs(Nt)>4;Nt+=Rt)Object(rt.drawSVGPath)(this.linesG,it.extraLinePath,xt+At,Nt*this.vStepSize,this.scale,1);if(Ct.g=Ct.tiedFrom?Ct.tiedFrom.g:Object(rt.createSVGGroupChild)(this.musicG,`${Ct.start}-${Ct.pitch}`),ft.isBarBeginning&&Ct.g.setAttribute("data-is-bar-beginning","true"),Ct.tiedFrom){const Nt=xt+At-Ct.tiedFrom.xHeadRight;Object(rt.drawSVGPath)(Ct.g,it.tiePath,Ct.tiedFrom.xHeadRight,Tt,Nt/it.PATH_SCALE,this.scale*(Ct.vSteps<0?-1:1),Ct.opacity)}Object(rt.drawSVGPath)(Ct.g,wt.path,xt+At,Tt,this.scale,this.scale,Ct.opacity),Ct.xHeadRight=xt+At+wt.width*this.scale,1.5*Et<=Ct.length&&Object(rt.drawSVGPath)(Ct.g,it.dotPath,xt+At+wt.width*this.scale+this.vStepSize/2,Tt-this.vStepSize/2,this.scale,this.scale,Ct.opacity),Ct.accidental!==0&&Object(rt.drawSVGPath)(Ct.g,it.ACCIDENTAL_PATHS[Ct.accidental],xt+At,Tt,this.scale,this.scale,Ct.opacity)}),wt.stemAnchor){let Ct,Tt,St=xt+At;const Rt=wt.stemAnchor*this.scale,Nt=ft.minVStep+ft.maxVStep<0,Pt=wt.flags>2?2*(wt.flags-2):0;if(Nt?(Ct=ft.maxVStep*this.vStepSize-Rt,Tt=(ft.minVStep+7+Pt)*this.vStepSize):(St+=(wt.width-st.STEM_WIDTH)*this.scale,Ct=ft.minVStep*this.vStepSize+Rt,Tt=(ft.maxVStep-7-Pt)*this.vStepSize),Object(rt.drawSVGPath)(_t,it.stemPath,St,Ct,this.scale,(Tt-Ct)/it.PATH_SCALE),wt.flags===1)Object(rt.drawSVGPath)(_t,it.singleFlagPath,St,Tt,this.scale,this.scale*(Nt?-1:1),1);else if(wt.flags>1)for(let Bt=0;Bt<wt.flags;++Bt)Object(rt.drawSVGPath)(_t,it.multiFlagPath,St,Tt,this.scale,this.scale*(Nt?-1:1),1),Tt+=(Nt?-2:2)*this.vStepSize}return this.config.pixelsPerTimeStep===0&&(At+=wt.width*this.scale,_t&&(At+=_t.getBoundingClientRect().width),At+=this.config.noteSpacing),At+=this.drawRests(ft,xt+At)}drawBarIfNeeded(ft,xt){let vt=0;const At=this.lastBar+this.getBarLength();return ft!==0&&ft>=At&&(this.config.pixelsPerTimeStep>0?xt-=this.config.noteSpacing:vt=this.config.noteSpacing,Object(rt.drawSVGPath)(this.linesG,it.barPath,xt,0,1,this.scale),this.lastBar=At),vt}drawRests(ft,xt){let vt=0,At=ft.restToNextLength;if(At){this.config.pixelsPerTimeStep>0&&(xt+=this.quartersToTime(ft.notes[0].length)*this.hStepSize);let Et=ft.notes[0].start+ft.notes[0].length,wt=0;const _t=this.lastBar+this.getBarLength()-Et;let Ct;for(At>_t&&(wt=At-_t,At=_t),Ct=4;Ct>this.getBarLength()&&Ct>=st.MIN_RESOLUTION;Ct/=2);let Tt=Ct;for(;(At||wt)&&Tt>=st.MIN_RESOLUTION;){if(Tt<=At){vt+=this.drawBarIfNeeded(Et,xt+vt),vt+=this.drawSignaturesIfNeeded(Et,xt+vt);const St=Object(rt.drawSVGPath)(this.musicG,it.REST_PATHS[Tt],xt+vt,0,this.scale,this.scale);this.config.pixelsPerTimeStep>0?xt+=this.quartersToTime(Tt)*this.hStepSize:(vt+=St.getBoundingClientRect().width,vt+=this.config.noteSpacing),Et+=Tt,At-=Tt}if(wt&&At<=0){const St=this.getBarLength();for(wt>St?(At=St,wt-=St):(At=wt,wt=0),Ct=4;Ct>this.getBarLength()&&Ct>=st.MIN_RESOLUTION;Ct/=2);Tt=Ct}At<Tt&&(Tt/=2)}}return vt}redrawStaff(ft,xt,vt){let At=ft.querySelector('g[data-id="staff-five-lines"]');if(At)At.setAttributeNS(null,"transform",`scale(${vt/it.PATH_SCALE}, 1)`);else{At=Object(rt.createSVGGroupChild)(ft,"staff-five-lines");const Et=0;for(let wt=-4;wt<=4;wt+=2)Object(rt.drawSVGPath)(At,it.staffLinePath,xt,Et+wt*this.vStepSize,vt/it.PATH_SCALE,1)}return At}clearSignatureOverlay(){for(;this.overlayG.lastChild;)this.overlayG.removeChild(this.overlayG.lastChild)}drawSignaturesIfNeeded(ft,xt){let vt=0;const At=this.changeKeySignatureIfNeeded(ft),Et=this.changeTimeSignatureIfNeeded(ft);if(At||Et){const wt=st.COMPACT_SPACING*this.scale*(this.config.pixelsPerTimeStep>0?3:2);this.signaturesList.push({x:xt-wt,q:ft}),this.signatureNext===null&&(this.signatureNext=xt);const _t=ft>0?Object(rt.createSVGGroupChild)(this.signaturesG,"signatures"):this.overlayG;vt+=this.drawSignatures(_t,xt+vt,!1,At,Et)}return this.config.pixelsPerTimeStep===0?vt:0}drawSignatures(ft,xt,vt,At,Et){const wt=st.COMPACT_SPACING*this.scale;let _t,Ct=wt;const Tt=ft===this.overlayG||this.config.pixelsPerTimeStep>0;if(Tt){(_t=document.createElementNS(rt.SVGNS,"rect")).setAttributeNS(null,"x",`${xt}`),_t.setAttributeNS(null,"y","0"),_t.setAttributeNS(null,"width","1"),_t.setAttributeNS(null,"height","1"),_t.setAttribute("data-id","background"),ft.appendChild(_t);const Pt=document.defaultView.getComputedStyle(this.div.parentElement);_t.setAttributeNS(null,"fill",Pt.getPropertyValue("background-color"))}if(vt){const Pt=Object(rt.drawSVGPath)(ft,it.CLEF_PATHS[this.clef].path,xt+Ct,0,this.scale,this.scale);this.setFill(Pt),Ct+=3*wt}if(At){const Pt=at[this.key].accidental,Bt=this.clef===71?0:14;at[this.key].pitches.forEach(Lt=>{const zt=this.getPitchDetails(Lt).vSteps,Dt=Object(rt.drawSVGPath)(ft,it.ACCIDENTAL_PATHS[Pt],xt+Ct,(Bt+zt)*this.vStepSize,this.scale,this.scale);this.setFill(Dt),Ct+=Dt.getBoundingClientRect().width})}if(Et){const Pt=Object(rt.createSVGGroupChild)(ft,"time-key"),Bt=`${2.85*this.config.noteHeight}px`;Object(rt.drawSVGText)(Pt,`${this.timeSignatureNumerator}`,xt+Ct,-.5,Bt,!0),Object(rt.drawSVGText)(Pt,`${this.timeSignatureDenominator}`,xt+Ct,4*this.vStepSize-.5,Bt,!0),this.setFill(Pt),Ct+=Pt.getBoundingClientRect().width+wt}const St=this.redrawStaff(ft,xt,Ct);this.setStroke(St);const Rt=this.div.getBoundingClientRect(),Nt=ft.getBoundingClientRect();if(this.updateVerticalBoundaries(Nt.top-Rt.top,Nt.bottom-Rt.top),Tt&&(_t.setAttributeNS(null,"y",`${-this.staffOffset}`),_t.setAttributeNS(null,"height",`${this.height}`),_t.setAttributeNS(null,"width",`${Ct}`)),ft===this.overlayG){this.overlaySVG.setAttributeNS(null,"width",`${Ct+5}`);for(let Pt=0;Pt<5;++Pt){const Bt=Object(rt.drawSVGPath)(ft,it.stemPath,Ct+Pt,Pt*Pt-this.staffOffset,1/st.STEM_WIDTH,(this.height-2*Pt*Pt)/it.PATH_SCALE,(Pt-5)*(Pt-5)*2/it.PATH_SCALE);this.setFill(Bt)}}if(this.config.pixelsPerTimeStep>0){const Pt=this.signaturesQuarters===0;return Pt&&(this.signaturesQuarters=this.timeToQuarters(Ct/this.hStepSize)),(Pt||xt>0)&&(this.signaturesBlinking=!0,Object(rt.setFade)(ft,this.signaturesBlinking)),0}return Ct}changeKeySignatureIfNeeded(ft){if(this.scoreInfo.keySignatures){let xt=this.key;for(let vt=0;vt<this.scoreInfo.keySignatures.length&&this.scoreInfo.keySignatures[vt].start<=ft;++vt)xt=this.scoreInfo.keySignatures[vt].key;if(xt!==this.key)return this.key=xt,!0}return!1}changeTimeSignatureIfNeeded(ft){if(this.scoreInfo.timeSignatures){let xt=this.timeSignatureNumerator,vt=this.timeSignatureDenominator;for(let At=0;At<this.scoreInfo.timeSignatures.length&&this.scoreInfo.timeSignatures[At].start<=ft;++At)xt=this.scoreInfo.timeSignatures[At].numerator,vt=this.scoreInfo.timeSignatures[At].denominator;if(xt!==this.timeSignatureNumerator||vt!==this.timeSignatureDenominator)return this.timeSignatureNumerator=xt,this.timeSignatureDenominator=vt,!0}return!1}changeAndDrawSignaturesIfNeeded(ft){let xt;if(ft<this.signatureCurrent||this.signatureNext!==null&&this.signatureNext<=ft){xt=this.signaturesList[0].q,this.signatureNext=null;for(let vt=0;vt<this.signaturesList.length;++vt){if(ft<this.signaturesList[vt].x){this.signatureNext=this.signaturesList[vt].x;break}this.signatureCurrent=this.signaturesList[vt].x,xt=this.signaturesList[vt].q}}if(xt!==void 0){const vt=this.key,At=this.timeSignatureNumerator,Et=this.timeSignatureDenominator;this.changeKeySignatureIfNeeded(xt),this.changeTimeSignatureIfNeeded(xt),this.clearSignatureOverlay(),this.drawSignatures(this.overlayG,0,!0,!0,!0),this.key=vt,this.timeSignatureNumerator=At,this.timeSignatureDenominator=Et}this.config.pixelsPerTimeStep>0&&ft===0&&(this.signatureNext=0,this.signaturesBlinking=!0,Object(rt.setFade)(this.overlayG,this.signaturesBlinking))}getBarLength(){return 4*this.timeSignatureNumerator/this.timeSignatureDenominator}scrollIntoViewIfNeeded(ft,xt){if(ft)if(this.scrollType===ut.PAGE){const vt=this.parentElement.getBoundingClientRect().width;xt>this.parentElement.scrollLeft+vt&&(this.parentElement.scrollLeft=xt-20)}else{const vt=this.parentElement.getBoundingClientRect().width;this.parentElement.scrollLeft=xt-.5*vt}}updateVerticalBoundaries(ft,xt){let vt=0;if(ft<0){this.staffOffset-=ft;const At=`translate(0, ${this.staffOffset})`;this.overlayG.setAttributeNS(null,"transform",At),this.staffG.setAttributeNS(null,"transform",At),vt=this.height-ft}if((vt=Math.max(vt,xt-ft))>this.height){this.height=vt,this.overlaySVG.setAttributeNS(null,"height",`${this.height}`),this.staffSVG.setAttributeNS(null,"height",`${this.height}`);const At=this.div.querySelectorAll('rect[data-id="background"]');for(let Et=0;Et<At.length;++Et){const wt=At[Et];wt.setAttributeNS(null,"y",`${-this.staffOffset}`),wt.setAttributeNS(null,"height",`${this.height}`)}}}setFill(ft,xt=!1){ft.setAttributeNS(null,"fill",this.getColor(xt))}setStroke(ft,xt=st.LINE_STROKE,vt=!1){ft.setAttributeNS(null,"stroke",this.getColor(vt)),ft.setAttributeNS(null,"stroke-width",`${xt}`)}getColor(ft){return`rgb(${ft?this.config.activeNoteRGB:this.config.noteRGB})`}getOpacity(ft){return ft?ft/127*.8+.2:1}getGroup(ft){const xt=ft.start,vt=ft.pitch;return this.staffSVG.querySelector(`g[data-id="${xt}-${vt}"]`)}highlightElement(ft,xt){ft.setAttribute("fill",this.getColor(xt)),ft.setAttribute("stroke",this.getColor(xt))}getBarBeginnings(){const ft=new Set;let xt=0;this.scoreInfo.notes.forEach(Et=>{Et.start+Et.length>xt&&(xt=Et.start+Et.length)});const vt=this.scoreInfo.timeSignatures?this.scoreInfo.timeSignatures.slice(0):[{start:0,numerator:4,denominator:4}];vt.sort((Et,wt)=>Et.start-wt.start);let At=0;for(let Et=0;Et<vt.length;++Et){const wt=Et===vt.length-1?xt:vt[Et].start,_t=4*vt[Et].numerator/vt[Et].denominator;for(;At<wt;At+=_t)ft.add(At)}return ft}quartersToTime(ft){return ft/this.scoreInfo.tempos[0].qpm*60}timeToQuarters(ft){return ft*this.scoreInfo.tempos[0].qpm/60}setDetails(){let ft=new Map;const xt=this.getBarBeginnings(),vt=new Set(xt);this.scoreInfo.notes.slice().sort((Tt,St)=>Tt.start-St.start).forEach(Tt=>{const St=this.getQNote(Tt);vt.add(St.start),vt.add(St.start+St.length),ft.has(St.start)?ft.get(St.start).push(St):ft.set(St.start,[St])}),Array.from(vt).sort((Tt,St)=>Tt-St).forEach(Tt=>{const St=[];ft.forEach(Rt=>{Rt.forEach(Nt=>{const Pt=this.splitQNote(Nt,Tt);Pt&&St.push(Pt)})}),St.forEach(Rt=>{ft.has(Rt.start)?ft.get(Rt.start).push(Rt):ft.set(Rt.start,[Rt])})}),ft=new Map(Array.from(ft).sort((Tt,St)=>Tt[0]-St[0]));const At=this.key;let Et=null,wt=0;const _t=xt[Symbol.iterator]();let Ct=_t.next();ft.forEach((Tt,St)=>{const Rt={maxVStep:Number.MAX_SAFE_INTEGER,minVStep:Number.MIN_SAFE_INTEGER,restToNextLength:0,isBarBeginning:!1,notes:[]};this.changeKeySignatureIfNeeded(St);const Nt=Ct.value+this.getBarLength();!Ct.done&&St>=Nt&&(Ct=_t.next(),this.barAccidentals={},Rt.isBarBeginning=!0),Tt.forEach(Pt=>{this.analyzePitch(Pt,St),Rt.minVStep=Math.max(Pt.vSteps,Rt.minVStep),Rt.maxVStep=Math.min(Pt.vSteps,Rt.maxVStep),Rt.notes.push(Pt)}),Et&&(Et.restToNextLength=St-wt),this.musicBlockMap.set(St,Rt),Et=Rt,wt=St+Rt.notes[0].length}),this.initialRest={maxVStep:0,minVStep:0,restToNextLength:this.musicBlockMap.values().next().value.notes[0].start,isBarBeginning:!0,notes:[{start:0,length:0,vSteps:0,accidental:0,opacity:0,pitch:0,xHeadRight:0}]},this.key=At}getQNote(ft){return{start:ft.start,length:ft.length,vSteps:0,accidental:0,opacity:this.getOpacity(ft.intensity),pitch:ft.pitch,xHeadRight:0}}splitQNote(ft,xt){const vt=ft.start+ft.length-xt;return xt>ft.start&&vt>0?(ft.length-=vt,{start:xt,length:vt,vSteps:ft.vSteps,accidental:ft.accidental,opacity:ft.opacity,pitch:ft.pitch,xHeadRight:0,tiedFrom:ft}):null}analyzePitch(ft,xt){const vt=this.getPitchDetails(ft.pitch);vt.vSteps in this.barAccidentals?vt.accidental===this.barAccidentals[vt.vSteps]?vt.accidental=0:(this.barAccidentals[vt.vSteps]===3?vt.accidental=vt.keyAccidental:vt.accidental===0&&(vt.accidental=3),this.barAccidentals[vt.vSteps]=vt.accidental):(ft.tiedFrom&&(vt.accidental=0),this.barAccidentals[vt.vSteps]=vt.accidental),ft.vSteps=vt.vSteps,ft.accidental=vt.accidental}getPitchDetails(ft){const xt=ft-60,vt=Math.floor(xt/12),At=xt-12*vt,Et=ot[this.key].steps[At],wt=this.clef===71?6:-6,_t=at[this.key].accidental===1?69+(At+3)%12:64+(At+8)%12;return{vSteps:wt-7*vt+Et,accidental:ot[this.key].accidental[At],keyAccidental:at[this.key].pitches.indexOf(_t)>-1?at[this.key].accidental:0}}}},function(Ye,Je,tt){tt.r(Je);var st=tt(3);tt.d(Je,"MAX_QUARTER_DIVISION",(function(){return st.MAX_QUARTER_DIVISION})),tt.d(Je,"ScrollType",(function(){return st.ScrollType})),tt.d(Je,"StaffSVGRender",(function(){return st.StaffSVGRender}))}])}))})(es6);var es6Exports=es6.exports;const MIN_NOTE_LENGTH=1;class BaseVisualizer{constructor(Ke,Ye={}){const Je=isQuantizedSequence(Ke),tt=Ke.tempos&&Ke.tempos.length>0?Ke.tempos[0].qpm:void 0;this.noteSequence=Je?unquantizeSequence(Ke,tt):Ke;const st=30;this.config={noteHeight:Ye.noteHeight||6,noteSpacing:Ye.noteSpacing||1,pixelsPerTimeStep:Ye.pixelsPerTimeStep||st,noteRGB:Ye.noteRGB||"8, 41, 64",activeNoteRGB:Ye.activeNoteRGB||"240, 84, 119",minPitch:Ye.minPitch,maxPitch:Ye.maxPitch};const rt=this.getSize();this.width=rt.width,this.height=rt.height}updateMinMaxPitches(Ke=!1){if(!(this.config.minPitch&&this.config.maxPitch)){this.config.minPitch===void 0&&(this.config.minPitch=MAX_MIDI_PITCH),this.config.maxPitch===void 0&&(this.config.maxPitch=MIN_MIDI_PITCH);for(const Ye of this.noteSequence.notes)this.config.minPitch=Math.min(Ye.pitch,this.config.minPitch),this.config.maxPitch=Math.max(Ye.pitch,this.config.maxPitch);Ke||(this.config.minPitch-=2,this.config.maxPitch+=2)}}getSize(){this.updateMinMaxPitches();const Ke=(this.config.maxPitch-this.config.minPitch)*this.config.noteHeight,Ye=this.noteSequence.totalTime;if(!Ye)throw new Error("The sequence you are using with the visualizer does not have a totalQuantizedSteps or totalTime field set, so the visualizer can't be horizontally sized correctly.");return{width:Ye*this.config.pixelsPerTimeStep,height:Ke}}getNotePosition(Ke,Ye){const Je=this.getNoteEndTime(Ke)-this.getNoteStartTime(Ke),tt=this.getNoteStartTime(Ke)*this.config.pixelsPerTimeStep,st=Math.max(this.config.pixelsPerTimeStep*Je-this.config.noteSpacing,MIN_NOTE_LENGTH),rt=this.height-(Ke.pitch-this.config.minPitch)*this.config.noteHeight;return{x:tt,y:rt,w:st,h:this.config.noteHeight}}scrollIntoViewIfNeeded(Ke,Ye){if(Ke&&this.parentElement){const Je=this.parentElement.getBoundingClientRect().width;Ye>this.parentElement.scrollLeft+Je&&(this.parentElement.scrollLeft=Ye-20)}}getNoteStartTime(Ke){return Math.round(Ke.startTime*1e8)/1e8}getNoteEndTime(Ke){return Math.round(Ke.endTime*1e8)/1e8}isPaintingActiveNote(Ke,Ye){const Je=this.getNoteStartTime(Ke)===this.getNoteStartTime(Ye),tt=this.getNoteStartTime(Ke)<=this.getNoteStartTime(Ye)&&this.getNoteEndTime(Ke)>=this.getNoteEndTime(Ye);return Je||tt}}class BaseSVGVisualizer extends BaseVisualizer{constructor(Ke,Ye={}){super(Ke,Ye),this.drawn=!1}redraw(Ke,Ye){if(this.drawn||this.draw(),!Ke)return null;this.unfillActiveRect(this.svg);let Je;for(let tt=0;tt<this.noteSequence.notes.length;tt++){const st=this.noteSequence.notes[tt];if(!(Ke&&this.isPaintingActiveNote(st,Ke)))continue;const it=this.svg.querySelector(`rect[data-index="${tt}"]`);this.fillActiveRect(it,st),st===Ke&&(Je=parseFloat(it.getAttribute("x")))}return this.scrollIntoViewIfNeeded(Ye,Je),Je}fillActiveRect(Ke,Ye){Ke.setAttribute("fill",this.getNoteFillColor(Ye,!0)),Ke.classList.add("active")}unfillActiveRect(Ke){const Ye=Ke.querySelectorAll("rect.active");for(let Je=0;Je<Ye.length;++Je){const tt=Ye[Je],st=this.getNoteFillColor(this.noteSequence.notes[parseInt(tt.getAttribute("data-index"),10)],!1);tt.setAttribute("fill",st),tt.classList.remove("active")}}draw(){for(let Ke=0;Ke<this.noteSequence.notes.length;Ke++){const Ye=this.noteSequence.notes[Ke],Je=this.getNotePosition(Ye,Ke),tt=this.getNoteFillColor(Ye,!1),st=[["index",Ke],["instrument",Ye.instrument],["program",Ye.program],["isDrum",Ye.isDrum===!0],["pitch",Ye.pitch]],rt=[["--midi-velocity",String(Ye.velocity!==void 0?Ye.velocity:127)]];this.drawNote(Je.x,Je.y,Je.w,Je.h,tt,st,rt)}this.drawn=!0}getNoteFillColor(Ke,Ye){const tt=Ke.velocity?Ke.velocity/100+.2:1;return`rgba(${Ye?this.config.activeNoteRGB:this.config.noteRGB},
  ${tt})`}drawNote(Ke,Ye,Je,tt,st,rt,it){if(!this.svg)return;const ot=document.createElementNS("http://www.w3.org/2000/svg","rect");ot.classList.add("note"),ot.setAttribute("fill",st),ot.setAttribute("x",`${Math.round(Ke)}`),ot.setAttribute("y",`${Math.round(Ye)}`),ot.setAttribute("width",`${Math.round(Je)}`),ot.setAttribute("height",`${Math.round(tt)}`),rt.forEach(([at,lt])=>{lt!==void 0&&(ot.dataset[at]=`${lt}`)}),it.forEach(([at,lt])=>{ot.style.setProperty(at,lt)}),this.svg.appendChild(ot)}clear(){this.svg.innerHTML="",this.drawn=!1}clearActiveNotes(){this.unfillActiveRect(this.svg)}}class PianoRollSVGVisualizer extends BaseSVGVisualizer{constructor(Ke,Ye,Je={}){if(super(Ke,Je),!(Ye instanceof SVGSVGElement))throw new Error("This visualizer requires an <svg> element to display the visualization");this.svg=Ye,this.parentElement=Ye.parentElement;const tt=this.getSize();this.width=tt.width,this.height=tt.height,this.svg.style.width=`${this.width}px`,this.svg.style.height=`${this.height}px`,this.clear(),this.draw()}}class WaterfallSVGVisualizer extends BaseSVGVisualizer{constructor(Ke,Ye,Je={}){if(super(Ke,Je),this.NOTES_PER_OCTAVE=12,this.WHITE_NOTES_PER_OCTAVE=7,this.LOW_C=24,this.firstDrawnOctave=0,this.lastDrawnOctave=6,!(Ye instanceof HTMLDivElement))throw new Error("This visualizer requires a <div> element to display the visualization");this.config.whiteNoteWidth=Je.whiteNoteWidth||20,this.config.blackNoteWidth=Je.blackNoteWidth||this.config.whiteNoteWidth*2/3,this.config.whiteNoteHeight=Je.whiteNoteHeight||70,this.config.blackNoteHeight=Je.blackNoteHeight||140/3,this.config.showOnlyOctavesUsed=Je.showOnlyOctavesUsed,this.setupDOM(Ye);const tt=this.getSize();this.width=tt.width,this.height=tt.height,this.svg.style.width=`${this.width}px`,this.svg.style.height=`${this.height}px`,this.svgPiano.style.width=`${this.width}px`,this.svgPiano.style.height=`${this.config.whiteNoteHeight}px`,this.parentElement.style.width=`${this.width+this.config.whiteNoteWidth}px`,this.parentElement.scrollTop=this.parentElement.scrollHeight,this.clear(),this.drawPiano(),this.draw()}setupDOM(Ke){this.parentElement=document.createElement("div"),this.parentElement.classList.add("waterfall-notes-container");const Ye=Math.max(Ke.getBoundingClientRect().height,200);this.parentElement.style.paddingTop=`${Ye-this.config.whiteNoteHeight}px`,this.parentElement.style.height=`${Ye-this.config.whiteNoteHeight}px`,this.parentElement.style.boxSizing="border-box",this.parentElement.style.overflowX="hidden",this.parentElement.style.overflowY="auto",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgPiano=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.classList.add("waterfall-notes"),this.svgPiano.classList.add("waterfall-piano"),this.parentElement.appendChild(this.svg),Ke.innerHTML="",Ke.appendChild(this.parentElement),Ke.appendChild(this.svgPiano)}redraw(Ke,Ye){if(this.drawn||this.draw(),!Ke)return null;this.clearActiveNotes(),this.parentElement.style.paddingTop=this.parentElement.style.height;for(let Je=0;Je<this.noteSequence.notes.length;Je++){const tt=this.noteSequence.notes[Je];if(!(Ke&&this.isPaintingActiveNote(tt,Ke)))continue;const rt=this.svg.querySelector(`rect[data-index="${Je}"]`);this.fillActiveRect(rt,tt);const it=this.svgPiano.querySelector(`rect[data-pitch="${tt.pitch}"]`);if(this.fillActiveRect(it,tt),tt===Ke){const ot=parseFloat(rt.getAttribute("y")),at=parseFloat(rt.getAttribute("height"));return ot<this.parentElement.scrollTop-at&&(this.parentElement.scrollTop=ot+at),ot}}return null}getSize(){this.updateMinMaxPitches(!0);let Ke=52;if(this.config.showOnlyOctavesUsed){let st=!1,rt=!1;for(let it=1;it<7;it++){const ot=this.LOW_C+this.NOTES_PER_OCTAVE*it;!st&&ot>this.config.minPitch&&(this.firstDrawnOctave=it-1,st=!0),!rt&&ot>this.config.maxPitch&&(this.lastDrawnOctave=it-1,rt=!0)}Ke=(this.lastDrawnOctave-this.firstDrawnOctave+1)*this.WHITE_NOTES_PER_OCTAVE}const Ye=Ke*this.config.whiteNoteWidth,Je=this.noteSequence.totalTime;if(!Je)throw new Error("The sequence you are using with the visualizer does not have a totalQuantizedSteps or totalTime field set, so the visualizer can't be horizontally sized correctly.");const tt=Math.max(Je*this.config.pixelsPerTimeStep,MIN_NOTE_LENGTH);return{width:Ye,height:tt}}getNotePosition(Ke,Ye){const Je=this.svgPiano.querySelector(`rect[data-pitch="${Ke.pitch}"]`);if(!Je)return null;const tt=this.getNoteEndTime(Ke)-this.getNoteStartTime(Ke),st=Number(Je.getAttribute("x")),rt=Number(Je.getAttribute("width")),it=Math.max(this.config.pixelsPerTimeStep*tt-this.config.noteSpacing,MIN_NOTE_LENGTH),ot=this.height-this.getNoteStartTime(Ke)*this.config.pixelsPerTimeStep-it;return{x:st,y:ot,w:rt,h:it}}drawPiano(){this.svgPiano.innerHTML="";const Ke=this.config.whiteNoteWidth-this.config.blackNoteWidth/2,Ye=[1,3,6,8,10];let Je=0,tt=0;this.config.showOnlyOctavesUsed?tt=this.firstDrawnOctave*this.NOTES_PER_OCTAVE+this.LOW_C:(tt=this.LOW_C-3,this.drawWhiteKey(tt,Je),this.drawWhiteKey(tt+2,this.config.whiteNoteWidth),tt+=3,Je=2*this.config.whiteNoteWidth);for(let st=this.firstDrawnOctave;st<=this.lastDrawnOctave;st++)for(let rt=0;rt<this.NOTES_PER_OCTAVE;rt++)Ye.indexOf(rt)===-1&&(this.drawWhiteKey(tt,Je),Je+=this.config.whiteNoteWidth),tt++;this.config.showOnlyOctavesUsed?(tt=this.firstDrawnOctave*this.NOTES_PER_OCTAVE+this.LOW_C,Je=-this.config.whiteNoteWidth):(this.drawWhiteKey(tt,Je),tt=this.LOW_C-3,this.drawBlackKey(tt+1,Ke),tt+=3,Je=this.config.whiteNoteWidth);for(let st=this.firstDrawnOctave;st<=this.lastDrawnOctave;st++)for(let rt=0;rt<this.NOTES_PER_OCTAVE;rt++)Ye.indexOf(rt)!==-1?this.drawBlackKey(tt,Je+Ke):Je+=this.config.whiteNoteWidth,tt++}drawWhiteKey(Ke,Ye){const Je=document.createElementNS("http://www.w3.org/2000/svg","rect");return Je.dataset.pitch=String(Ke),Je.setAttribute("x",String(Ye)),Je.setAttribute("y","0"),Je.setAttribute("width",String(this.config.whiteNoteWidth)),Je.setAttribute("height",String(this.config.whiteNoteHeight)),Je.setAttribute("fill","white"),Je.setAttribute("original-fill","white"),Je.setAttribute("stroke","black"),Je.setAttribute("stroke-width","3px"),Je.classList.add("white"),this.svgPiano.appendChild(Je),Je}drawBlackKey(Ke,Ye){const Je=document.createElementNS("http://www.w3.org/2000/svg","rect");return Je.dataset.pitch=String(Ke),Je.setAttribute("x",String(Ye)),Je.setAttribute("y","0"),Je.setAttribute("width",String(this.config.blackNoteWidth)),Je.setAttribute("height",String(this.config.blackNoteHeight)),Je.setAttribute("fill","black"),Je.setAttribute("original-fill","black"),Je.setAttribute("stroke","black"),Je.setAttribute("stroke-width","3px"),Je.classList.add("black"),this.svgPiano.appendChild(Je),Je}clearActiveNotes(){super.unfillActiveRect(this.svg);const Ke=this.svgPiano.querySelectorAll("rect.active");for(let Ye=0;Ye<Ke.length;++Ye){const Je=Ke[Ye];Je.setAttribute("fill",Je.getAttribute("original-fill")),Je.classList.remove("active")}}}var ScrollType;(function(Xe){Xe[Xe.PAGE=0]="PAGE",Xe[Xe.NOTE=1]="NOTE",Xe[Xe.BAR=2]="BAR"})(ScrollType||(ScrollType={}));class StaffSVGVisualizer extends BaseVisualizer{constructor(Ke,Ye,Je={}){super(Ke,Je),(Je.pixelsPerTimeStep===void 0||Je.pixelsPerTimeStep<=0)&&(this.config.pixelsPerTimeStep=0),this.instruments=Je.instruments||[],this.render=new es6Exports.StaffSVGRender(this.getScoreInfo(Ke),{noteHeight:this.config.noteHeight,noteSpacing:this.config.noteSpacing,pixelsPerTimeStep:this.config.pixelsPerTimeStep,noteRGB:this.config.noteRGB,activeNoteRGB:this.config.activeNoteRGB,defaultKey:Je.defaultKey||0,scrollType:Je.scrollType||ScrollType.PAGE},Ye),this.drawnNotes=Ke.notes.length,this.clear(),this.redraw()}clear(){this.render.clear()}redraw(Ke,Ye){this.drawnNotes!==this.noteSequence.notes.length&&(this.render.scoreInfo=this.getScoreInfo(this.noteSequence));const Je=Ke?this.getNoteInfo(Ke):void 0;return this.render.redraw(Je,Ye)}isNoteInInstruments(Ke){return Ke.instrument===void 0||this.instruments.length===0?!0:this.instruments.indexOf(Ke.instrument)>=0}timeToQuarters(Ke){const Ye=Ke*this.noteSequence.tempos[0].qpm/60;return Math.round(Ye*16)/16}getNoteInfo(Ke){const Ye=this.timeToQuarters(Ke.startTime),Je=this.timeToQuarters(Ke.endTime);return{start:Ye,length:Je-Ye,pitch:Ke.pitch,intensity:Ke.velocity}}getScoreInfo(Ke){const Ye=[];return Ke.notes.forEach(Je=>{this.isNoteInInstruments(Je)&&Ye.push(this.getNoteInfo(Je))}),{notes:Ye,tempos:Ke.tempos?Ke.tempos.map(Je=>({start:this.timeToQuarters(Je.time),qpm:Je.qpm})):[],keySignatures:Ke.keySignatures?Ke.keySignatures.map(Je=>({start:this.timeToQuarters(Je.time),key:Je.key})):[],timeSignatures:Ke.timeSignatures?Ke.timeSignatures.map(Je=>({start:this.timeToQuarters(Je.time),numerator:Je.numerator,denominator:Je.denominator})):[]}}clearActiveNotes(){this.redraw()}}/**
 * html-midi-player@1.5.0
 * https://github.com/cifkao/html-midi-player.git
 * @author Ondřej Cífka (@cifkao)
 * @license BSD-2-Clause
 */var playIcon=`<svg width="24" height="24" version="1.1" viewBox="0 0 6.35 6.35" xmlns="http://www.w3.org/2000/svg">
 <path d="m4.4979 3.175-2.1167 1.5875v-3.175z" stroke-width=".70201"/>
</svg>
`,pauseIcon=`<svg width="24" height="24" version="1.1" viewBox="0 0 6.35 6.35" xmlns="http://www.w3.org/2000/svg">
 <path d="m1.8521 1.5875v3.175h0.92604v-3.175zm1.7198 0v3.175h0.92604v-3.175z" stroke-width=".24153"/>
</svg>
`,errorIcon=`<svg width="24" height="24" version="1.1" viewBox="0 0 6.35 6.35" xmlns="http://www.w3.org/2000/svg">
 <path transform="scale(.26458)" d="m12 3.5a8.4993 8.4993 0 0 0-8.5 8.5 8.4993 8.4993 0 0 0 8.5 8.5 8.4993 8.4993 0 0 0 8.5-8.5 8.4993 8.4993 0 0 0-8.5-8.5zm-1.4062 3.5h3v6h-3v-6zm0 8h3v2h-3v-2z"/>
</svg>
`,controlsCSS=`:host {
  display: inline-block;
  width: 300px;
  margin: 3px;
  vertical-align: bottom;
  font-family: sans-serif;
  font-size: 14px;
}

.controls {
  width: inherit;
  height: inherit;
  box-sizing: border-box;
  display: flex;
  flex-direction: row;
  position: relative;
  overflow: hidden;
  align-items: center;
  border-radius: 100px;
  background: #f2f5f6;
  padding: 0 0.25em;
  user-select: none;
}
.controls > * {
  margin: 0.8em 0.45em;
}
.controls input, .controls button {
  cursor: pointer;
}
.controls input:disabled, .controls button:disabled {
  cursor: inherit;
}
.controls button {
  text-align: center;
  background: rgba(204, 204, 204, 0);
  border: none;
  width: 32px;
  height: 32px;
  border-radius: 100%;
  transition: background-color 0.25s ease 0s;
  padding: 0;
}
.controls button:not(:disabled):hover {
  background: rgba(204, 204, 204, 0.3);
}
.controls button:not(:disabled):active {
  background: rgba(204, 204, 204, 0.6);
}
.controls button .icon {
  display: none;
}
.controls button .icon, .controls button .icon svg {
  vertical-align: middle;
}
.controls button .icon svg {
  fill: currentColor;
}
.controls .seek-bar {
  flex: 1;
  min-width: 0;
  margin-right: 1.1em;
  background: transparent;
}
.controls .seek-bar::-moz-range-track {
  background-color: #555;
}
.controls.stopped .play-icon, .controls.playing .stop-icon, .controls.error .error-icon {
  display: inherit;
}
.controls.frozen > div, .controls > button:disabled .icon {
  opacity: 0.5;
}
.controls .overlay {
  z-index: 0;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  margin: 0;
  box-sizing: border-box;
  display: none;
  opacity: 1;
}
.controls.loading .loading-overlay {
  display: block;
  background: linear-gradient(110deg, rgba(146, 146, 146, 0) 5%, rgba(146, 146, 146, 0.5333333333) 25%, rgba(146, 146, 146, 0) 45%);
  background-size: 250% 100%;
  background-repeat: repeat-y;
  animation: shimmer 1.5s linear infinite;
}

@keyframes shimmer {
  0% {
    background-position: 125% 0;
  }
  100% {
    background-position: -200% 0;
  }
}`,visualizerCSS=`:host {
  display: block;
}

::slotted(.piano-roll-visualizer) {
  overflow-x: auto;
}`;const controlsTemplate=document.createElement("template");controlsTemplate.innerHTML=`
<style>
${controlsCSS}
</style>
<div class="controls stopped frozen" part="control-panel" role="region" aria-label="Player controls">
  <button class="play" part="play-button" aria-label="Play" disabled>
    <span class="icon play-icon" aria-hidden="true">${playIcon}</span>
    <span class="icon stop-icon" aria-hidden="true">${pauseIcon}</span>
    <span class="icon error-icon" aria-hidden="true">${errorIcon}</span>
  </button>
  <div part="time">
    <span class="current-time" part="current-time" aria-label="Elapsed time">0:00</span> / <span class="total-time" part="total-time" aria-label="Total time">0:00</span>
  </div>
  <input type="range" min="0" max="0" value="0" step="any" class="seek-bar" part="seek-bar" aria-label="Playback position" disabled>
  <div class="overlay loading-overlay" part="loading-overlay"></div>
</div>
`;const visualizerTemplate=document.createElement("template");visualizerTemplate.innerHTML=`
<style>
${visualizerCSS}
</style>
<slot>
</slot>
`;function formatTime(Xe){const Ke=Xe<0;Xe=Math.floor(Math.abs(Xe||0));const Ye=Xe%60,Je=(Xe-Ye)/60,tt=(Xe-Ye-60*Je)/3600,st=Ye>9?`${Ye}`:`0${Ye}`,rt=Je>9||!tt?`${Je}:`:`0${Je}:`,it=tt?`${tt}:`:"";return(Ke?"-":"")+it+rt+st}const VISUALIZER_TYPES=["piano-roll","waterfall","staff"];class VisualizerElement extends HTMLElement{constructor(){super(...arguments),this.domInitialized=!1,this.ns=null,this._config={}}static get observedAttributes(){return["src","type"]}connectedCallback(){this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(visualizerTemplate.content.cloneNode(!0)),!this.domInitialized&&(this.domInitialized=!0,this.wrapper=document.createElement("div"),this.appendChild(this.wrapper),this.initVisualizerNow())}attributeChangedCallback(Ke,Ye,Je){(Ke==="src"||Ke==="type")&&this.initVisualizer()}initVisualizer(){this.initTimeout==null&&(this.initTimeout=window.setTimeout(()=>this.initVisualizerNow()))}async initVisualizerNow(){if(this.initTimeout=null,!!this.domInitialized&&(this.src&&(this.ns=null,this.ns=await urlToNoteSequence(this.src)),this.wrapper.innerHTML="",!!this.ns)){if(this.type==="piano-roll"){this.wrapper.classList.add("piano-roll-visualizer");const Ke=document.createElementNS("http://www.w3.org/2000/svg","svg");this.wrapper.appendChild(Ke),this.visualizer=new PianoRollSVGVisualizer(this.ns,Ke,this._config)}else if(this.type==="waterfall")this.wrapper.classList.add("waterfall-visualizer"),this.visualizer=new WaterfallSVGVisualizer(this.ns,this.wrapper,this._config);else if(this.type==="staff"){this.wrapper.classList.add("staff-visualizer");const Ke=document.createElement("div");this.wrapper.appendChild(Ke),this.visualizer=new StaffSVGVisualizer(this.ns,Ke,this._config)}}}reload(){this.initVisualizerNow()}redraw(Ke){this.visualizer&&this.visualizer.redraw(Ke,Ke!=null)}clearActiveNotes(){this.visualizer&&this.visualizer.clearActiveNotes()}get noteSequence(){return this.ns}set noteSequence(Ke){this.ns!=Ke&&(this.ns=Ke,this.removeAttribute("src"),this.initVisualizer())}get src(){return this.getAttribute("src")}set src(Ke){this.ns=null,this.setOrRemoveAttribute("src",Ke),this.initVisualizer()}get type(){let Ke=this.getAttribute("type");return VISUALIZER_TYPES.indexOf(Ke)<0&&(Ke="piano-roll"),Ke}set type(Ke){if(Ke!=null&&VISUALIZER_TYPES.indexOf(Ke)<0)throw new Error(`Unknown visualizer type ${Ke}. Allowed values: ${VISUALIZER_TYPES.join(", ")}`);this.setOrRemoveAttribute("type",Ke)}get config(){return this._config}set config(Ke){this._config=Ke,this.initVisualizer()}setOrRemoveAttribute(Ke,Ye){Ye==null?this.removeAttribute(Ke):this.setAttribute(Ke,Ye)}}const VISUALIZER_EVENTS=["start","stop","note"],DEFAULT_SOUNDFONT="https://storage.googleapis.com/magentadata/js/soundfonts/sgm_plus";let playingPlayer=null;class PlayerElement extends HTMLElement{constructor(){super(),this.domInitialized=!1,this.needInitNs=!1,this.visualizerListeners=new Map,this.ns=null,this._playing=!1,this.seeking=!1,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(controlsTemplate.content.cloneNode(!0)),this.controlPanel=this.shadowRoot.querySelector(".controls"),this.playButton=this.controlPanel.querySelector(".play"),this.currentTimeLabel=this.controlPanel.querySelector(".current-time"),this.totalTimeLabel=this.controlPanel.querySelector(".total-time"),this.seekBar=this.controlPanel.querySelector(".seek-bar")}static get observedAttributes(){return["sound-font","src","visualizer"]}connectedCallback(){this.domInitialized||(this.domInitialized=!0,this.playButton.addEventListener("click",()=>{this.player.isPlaying()?this.stop():this.start()}),this.seekBar.addEventListener("input",()=>{this.seeking=!0,this.player&&this.player.getPlayState()==="started"&&this.player.pause()}),this.seekBar.addEventListener("change",()=>{const Ke=this.currentTime;this.displayCurrentTime(Ke),this.player&&this.player.isPlaying()&&(this.player.seekTo(Ke),this.player.getPlayState()==="paused"&&this.player.resume()),this.seeking=!1}),this.initPlayerNow())}attributeChangedCallback(Ke,Ye,Je){if(this.hasAttribute(Ke)||(Je=null),Ke==="sound-font"||Ke==="src")this.initPlayer();else if(Ke==="visualizer"){const tt=()=>{this.setVisualizerSelector(Je)};document.readyState==="loading"?window.addEventListener("DOMContentLoaded",tt):tt()}}initPlayer(Ke=!0){this.needInitNs=this.needInitNs||Ke,this.initTimeout==null&&(this.stop(),this.setLoading(),this.initTimeout=window.setTimeout(()=>this.initPlayerNow(this.needInitNs)))}async initPlayerNow(Ke=!0){if(this.initTimeout=null,this.needInitNs=!1,!!this.domInitialized)try{let Ye=null;if(Ke&&(this.src&&(this.ns=null,this.ns=await urlToNoteSequence(this.src)),this.currentTime=0,this.ns||this.setError("No content loaded")),Ye=this.ns,Ye)this.seekBar.max=String(Ye.totalTime),this.totalTimeLabel.textContent=formatTime(Ye.totalTime);else{this.seekBar.max="0",this.totalTimeLabel.textContent=formatTime(0);return}let Je=this.soundFont;const tt={run:st=>this.ns===Ye&&this.noteCallback(st),stop:()=>{}};if(Je===null?this.player=new Player(!1,tt):(Je===""&&(Je=DEFAULT_SOUNDFONT),this.player=new SoundFontPlayer(Je,void 0,void 0,void 0,tt),await this.player.loadSamples(Ye)),this.ns!==Ye)return;this.setLoaded(),this.dispatchEvent(new CustomEvent("load"))}catch(Ye){throw this.setError(String(Ye)),Ye}}reload(){this.initPlayerNow()}start(){this._start()}_start(Ke=!1){(async()=>{if(this.player)if(this.player.getPlayState()=="stopped"){playingPlayer&&playingPlayer.playing&&!(playingPlayer==this&&Ke)&&playingPlayer.stop(),playingPlayer=this,this._playing=!0;let Ye=this.currentTime;this.ns.notes.filter(Je=>Je.startTime>Ye).length==0&&(Ye=0),this.currentTime=Ye,this.controlPanel.classList.remove("stopped"),this.controlPanel.classList.add("playing"),this.playButton.setAttribute("aria-label","Stop");try{for(const tt of this.visualizerListeners.keys())tt.noteSequence!=this.ns&&(tt.noteSequence=this.ns,tt.reload());const Je=this.player.start(this.ns,void 0,Ye);Ke?this.dispatchEvent(new CustomEvent("loop")):this.dispatchEvent(new CustomEvent("start")),await Je,this.handleStop(!0)}catch(Je){throw this.handleStop(),Je}}else this.player.getPlayState()=="paused"&&this.player.resume()})()}stop(){this.player&&this.player.isPlaying()&&this.player.stop(),this.handleStop(!1)}addVisualizer(Ke){const Ye={start:()=>{Ke.noteSequence=this.noteSequence},stop:()=>{Ke.clearActiveNotes()},note:Je=>{Ke.redraw(Je.detail.note)}};for(const Je of VISUALIZER_EVENTS)this.addEventListener(Je,Ye[Je]);this.visualizerListeners.set(Ke,Ye)}removeVisualizer(Ke){const Ye=this.visualizerListeners.get(Ke);for(const Je of VISUALIZER_EVENTS)this.removeEventListener(Je,Ye[Je]);this.visualizerListeners.delete(Ke)}noteCallback(Ke){this.playing&&(this.dispatchEvent(new CustomEvent("note",{detail:{note:Ke}})),!this.seeking&&(this.seekBar.value=String(Ke.startTime),this.displayCurrentTime(Ke.startTime)))}handleStop(Ke=!1){if(Ke){if(this.loop){this.currentTime=0,this._start(!0);return}this.currentTime=this.duration}this.controlPanel.classList.remove("playing"),this.controlPanel.classList.add("stopped"),this.playButton.setAttribute("aria-label","Play"),this._playing&&(this._playing=!1,this.dispatchEvent(new CustomEvent("stop",{detail:{finished:Ke}})))}setVisualizerSelector(Ke){for(const Ye of this.visualizerListeners.values())for(const Je of VISUALIZER_EVENTS)this.removeEventListener(Je,Ye[Je]);if(this.visualizerListeners.clear(),Ke!=null)for(const Ye of document.querySelectorAll(Ke)){if(!(Ye instanceof VisualizerElement)){console.warn(`Selector ${Ke} matched non-visualizer element`,Ye);continue}this.addVisualizer(Ye)}}setLoading(){this.playButton.disabled=!0,this.seekBar.disabled=!0,this.controlPanel.classList.remove("error"),this.controlPanel.classList.add("loading","frozen"),this.controlPanel.removeAttribute("title")}setLoaded(){this.controlPanel.classList.remove("loading","frozen"),this.playButton.disabled=!1,this.seekBar.disabled=!1}setError(Ke){this.playButton.disabled=!0,this.seekBar.disabled=!0,this.controlPanel.classList.remove("loading","stopped","playing"),this.controlPanel.classList.add("error","frozen"),this.controlPanel.title=Ke}get noteSequence(){return this.ns}set noteSequence(Ke){this.ns!=Ke&&(this.ns=Ke,this.removeAttribute("src"),this.initPlayer())}get src(){return this.getAttribute("src")}set src(Ke){this.ns=null,this.setOrRemoveAttribute("src",Ke),this.initPlayer()}get soundFont(){return this.getAttribute("sound-font")}set soundFont(Ke){this.setOrRemoveAttribute("sound-font",Ke)}get loop(){return this.getAttribute("loop")!=null}set loop(Ke){this.setOrRemoveAttribute("loop",Ke?"":null)}get currentTime(){return parseFloat(this.seekBar.value)}set currentTime(Ke){this.seekBar.value=String(Ke),this.displayCurrentTime(Ke),this.player&&this.player.isPlaying()&&this.player.seekTo(Ke)}displayCurrentTime(Ke){this.currentTimeLabel.textContent=formatTime(Ke),this.seekBar.setAttribute("aria-valuetext",`Elapsed time: ${formatTime(Ke)}`)}get duration(){return parseFloat(this.seekBar.max)}get playing(){return this._playing}setOrRemoveAttribute(Ke,Ye){Ye==null?this.removeAttribute(Ke):this.setAttribute(Ke,Ye)}}window.customElements.define("midi-player",PlayerElement);window.customElements.define("midi-visualizer",VisualizerElement);const feed_container$1="_feed_container_1bc7r_216",container$j="_container_1bc7r_217",player_container="_player_container_1bc7r_223",volume_slider="_volume_slider_1bc7r_238",volume_container="_volume_container_1bc7r_270",button="_button_1bc7r_312",playerButton="_playerButton_1bc7r_321",styles$L={feed_container:feed_container$1,container:container$j,player_container,volume_slider,volume_container,button,playerButton};/*!
 * Compressor.js v1.1.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-10-05T02:32:40.212Z
 */function ownKeys$1(Xe,Ke){var Ye=Object.keys(Xe);if(Object.getOwnPropertySymbols){var Je=Object.getOwnPropertySymbols(Xe);Ke&&(Je=Je.filter(function(tt){return Object.getOwnPropertyDescriptor(Xe,tt).enumerable})),Ye.push.apply(Ye,Je)}return Ye}function _objectSpread2$1(Xe){for(var Ke=1;Ke<arguments.length;Ke++){var Ye=arguments[Ke]!=null?arguments[Ke]:{};Ke%2?ownKeys$1(Object(Ye),!0).forEach(function(Je){_defineProperty$1(Xe,Je,Ye[Je])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Xe,Object.getOwnPropertyDescriptors(Ye)):ownKeys$1(Object(Ye)).forEach(function(Je){Object.defineProperty(Xe,Je,Object.getOwnPropertyDescriptor(Ye,Je))})}return Xe}function _classCallCheck$1(Xe,Ke){if(!(Xe instanceof Ke))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(Xe,Ke){for(var Ye=0;Ye<Ke.length;Ye++){var Je=Ke[Ye];Je.enumerable=Je.enumerable||!1,Je.configurable=!0,"value"in Je&&(Je.writable=!0),Object.defineProperty(Xe,Je.key,Je)}}function _createClass$1(Xe,Ke,Ye){return Ke&&_defineProperties$1(Xe.prototype,Ke),Ye&&_defineProperties$1(Xe,Ye),Xe}function _defineProperty$1(Xe,Ke,Ye){return Ke in Xe?Object.defineProperty(Xe,Ke,{value:Ye,enumerable:!0,configurable:!0,writable:!0}):Xe[Ke]=Ye,Xe}function _extends$1(){return _extends$1=Object.assign||function(Xe){for(var Ke=1;Ke<arguments.length;Ke++){var Ye=arguments[Ke];for(var Je in Ye)Object.prototype.hasOwnProperty.call(Ye,Je)&&(Xe[Je]=Ye[Je])}return Xe},_extends$1.apply(this,arguments)}var canvasToBlob={exports:{}};(function(Xe){typeof window>"u"||(function(Ke){var Ye=Ke.HTMLCanvasElement&&Ke.HTMLCanvasElement.prototype,Je=Ke.Blob&&(function(){try{return!!new Blob}catch{return!1}})(),tt=Je&&Ke.Uint8Array&&(function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}})(),st=Ke.BlobBuilder||Ke.WebKitBlobBuilder||Ke.MozBlobBuilder||Ke.MSBlobBuilder,rt=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,it=(Je||st)&&Ke.atob&&Ke.ArrayBuffer&&Ke.Uint8Array&&function(ot){var at,lt,ut,ht,pt,ft,xt,vt,At;if(at=ot.match(rt),!at)throw new Error("invalid data URI");for(lt=at[2]?at[1]:"text/plain"+(at[3]||";charset=US-ASCII"),ut=!!at[4],ht=ot.slice(at[0].length),ut?pt=atob(ht):pt=decodeURIComponent(ht),ft=new ArrayBuffer(pt.length),xt=new Uint8Array(ft),vt=0;vt<pt.length;vt+=1)xt[vt]=pt.charCodeAt(vt);return Je?new Blob([tt?xt:ft],{type:lt}):(At=new st,At.append(ft),At.getBlob(lt))};Ke.HTMLCanvasElement&&!Ye.toBlob&&(Ye.mozGetAsFile?Ye.toBlob=function(ot,at,lt){var ut=this;setTimeout(function(){lt&&Ye.toDataURL&&it?ot(it(ut.toDataURL(at,lt))):ot(ut.mozGetAsFile("blob",at))})}:Ye.toDataURL&&it&&(Ye.msToBlob?Ye.toBlob=function(ot,at,lt){var ut=this;setTimeout(function(){(at&&at!=="image/png"||lt)&&Ye.toDataURL&&it?ot(it(ut.toDataURL(at,lt))):ot(ut.msToBlob(at))})}:Ye.toBlob=function(ot,at,lt){var ut=this;setTimeout(function(){ot(it(ut.toDataURL(at,lt)))})})),Xe.exports?Xe.exports=it:Ke.dataURLtoBlob=it})(window)})(canvasToBlob);var toBlob=canvasToBlob.exports,isBlob=function Xe(Ke){return typeof Blob>"u"?!1:Ke instanceof Blob||Object.prototype.toString.call(Ke)==="[object Blob]"},DEFAULTS={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},IS_BROWSER=typeof window<"u"&&typeof window.document<"u",WINDOW=IS_BROWSER?window:{},isPositiveNumber=function Xe(Ke){return Ke>0&&Ke<1/0},slice$1=Array.prototype.slice;function toArray(Xe){return Array.from?Array.from(Xe):slice$1.call(Xe)}var REGEXP_IMAGE_TYPE=/^image\/.+$/;function isImageType(Xe){return REGEXP_IMAGE_TYPE.test(Xe)}function imageTypeToExtension(Xe){var Ke=isImageType(Xe)?Xe.substr(6):"";return Ke==="jpeg"&&(Ke="jpg"),".".concat(Ke)}var fromCharCode=String.fromCharCode;function getStringFromCharCode(Xe,Ke,Ye){var Je="",tt;for(Ye+=Ke,tt=Ke;tt<Ye;tt+=1)Je+=fromCharCode(Xe.getUint8(tt));return Je}var btoa$1=WINDOW.btoa;function arrayBufferToDataURL(Xe,Ke){for(var Ye=[],Je=8192,tt=new Uint8Array(Xe);tt.length>0;)Ye.push(fromCharCode.apply(null,toArray(tt.subarray(0,Je)))),tt=tt.subarray(Je);return"data:".concat(Ke,";base64,").concat(btoa$1(Ye.join("")))}function resetAndGetOrientation(Xe){var Ke=new DataView(Xe),Ye;try{var Je,tt,st;if(Ke.getUint8(0)===255&&Ke.getUint8(1)===216)for(var rt=Ke.byteLength,it=2;it+1<rt;){if(Ke.getUint8(it)===255&&Ke.getUint8(it+1)===225){tt=it;break}it+=1}if(tt){var ot=tt+4,at=tt+10;if(getStringFromCharCode(Ke,ot,4)==="Exif"){var lt=Ke.getUint16(at);if(Je=lt===18761,(Je||lt===19789)&&Ke.getUint16(at+2,Je)===42){var ut=Ke.getUint32(at+4,Je);ut>=8&&(st=at+ut)}}}if(st){var ht=Ke.getUint16(st,Je),pt,ft;for(ft=0;ft<ht;ft+=1)if(pt=st+ft*12+2,Ke.getUint16(pt,Je)===274){pt+=8,Ye=Ke.getUint16(pt,Je),Ke.setUint16(pt,1,Je);break}}}catch{Ye=1}return Ye}function parseOrientation(Xe){var Ke=0,Ye=1,Je=1;switch(Xe){case 2:Ye=-1;break;case 3:Ke=-180;break;case 4:Je=-1;break;case 5:Ke=90,Je=-1;break;case 6:Ke=90;break;case 7:Ke=90,Ye=-1;break;case 8:Ke=-90;break}return{rotate:Ke,scaleX:Ye,scaleY:Je}}var REGEXP_DECIMALS=/\.\d*(?:0|9){12}\d*$/;function normalizeDecimalNumber(Xe){var Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return REGEXP_DECIMALS.test(Xe)?Math.round(Xe*Ke)/Ke:Xe}function getAdjustedSizes(Xe){var Ke=Xe.aspectRatio,Ye=Xe.height,Je=Xe.width,tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",st=isPositiveNumber(Je),rt=isPositiveNumber(Ye);if(st&&rt){var it=Ye*Ke;(tt==="contain"||tt==="none")&&it>Je||tt==="cover"&&it<Je?Ye=Je/Ke:Je=Ye*Ke}else st?Ye=Je/Ke:rt&&(Je=Ye*Ke);return{width:Je,height:Ye}}var ArrayBuffer$1=WINDOW.ArrayBuffer,FileReader$1=WINDOW.FileReader,URL$1=WINDOW.URL||WINDOW.webkitURL,REGEXP_EXTENSION=/\.\w+$/,AnotherCompressor=WINDOW.Compressor,Compressor=(function(){function Xe(Ke,Ye){_classCallCheck$1(this,Xe),this.file=Ke,this.image=new Image,this.options=_objectSpread2$1(_objectSpread2$1({},DEFAULTS),Ye),this.aborted=!1,this.result=null,this.init()}return _createClass$1(Xe,[{key:"init",value:function(){var Ye=this,Je=this.file,tt=this.options;if(!isBlob(Je)){this.fail(new Error("The first argument must be a File or Blob object."));return}var st=Je.type;if(!isImageType(st)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!URL$1||!FileReader$1){this.fail(new Error("The current browser does not support image compression."));return}if(ArrayBuffer$1||(tt.checkOrientation=!1),URL$1&&!tt.checkOrientation)this.load({url:URL$1.createObjectURL(Je)});else{var rt=new FileReader$1,it=tt.checkOrientation&&st==="image/jpeg";this.reader=rt,rt.onload=function(ot){var at=ot.target,lt=at.result,ut={};if(it){var ht=resetAndGetOrientation(lt);ht>1||!URL$1?(ut.url=arrayBufferToDataURL(lt,st),ht>1&&_extends$1(ut,parseOrientation(ht))):ut.url=URL$1.createObjectURL(Je)}else ut.url=lt;Ye.load(ut)},rt.onabort=function(){Ye.fail(new Error("Aborted to read the image with FileReader."))},rt.onerror=function(){Ye.fail(new Error("Failed to read the image with FileReader."))},rt.onloadend=function(){Ye.reader=null},it?rt.readAsArrayBuffer(Je):rt.readAsDataURL(Je)}}},{key:"load",value:function(Ye){var Je=this,tt=this.file,st=this.image;st.onload=function(){Je.draw(_objectSpread2$1(_objectSpread2$1({},Ye),{},{naturalWidth:st.naturalWidth,naturalHeight:st.naturalHeight}))},st.onabort=function(){Je.fail(new Error("Aborted to load the image."))},st.onerror=function(){Je.fail(new Error("Failed to load the image."))},WINDOW.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent)&&(st.crossOrigin="anonymous"),st.alt=tt.name,st.src=Ye.url}},{key:"draw",value:function(Ye){var Je=this,tt=Ye.naturalWidth,st=Ye.naturalHeight,rt=Ye.rotate,it=rt===void 0?0:rt,ot=Ye.scaleX,at=ot===void 0?1:ot,lt=Ye.scaleY,ut=lt===void 0?1:lt,ht=this.file,pt=this.image,ft=this.options,xt=document.createElement("canvas"),vt=xt.getContext("2d"),At=Math.abs(it)%180===90,Et=(ft.resize==="contain"||ft.resize==="cover")&&isPositiveNumber(ft.width)&&isPositiveNumber(ft.height),wt=Math.max(ft.maxWidth,0)||1/0,_t=Math.max(ft.maxHeight,0)||1/0,Ct=Math.max(ft.minWidth,0)||0,Tt=Math.max(ft.minHeight,0)||0,St=tt/st,Rt=ft.width,Nt=ft.height;if(At){var Pt=[_t,wt];wt=Pt[0],_t=Pt[1];var Bt=[Tt,Ct];Ct=Bt[0],Tt=Bt[1];var Lt=[Nt,Rt];Rt=Lt[0],Nt=Lt[1]}Et&&(St=Rt/Nt);var zt=getAdjustedSizes({aspectRatio:St,width:wt,height:_t},"contain");wt=zt.width,_t=zt.height;var Dt=getAdjustedSizes({aspectRatio:St,width:Ct,height:Tt},"cover");if(Ct=Dt.width,Tt=Dt.height,Et){var Vt=getAdjustedSizes({aspectRatio:St,width:Rt,height:Nt},ft.resize);Rt=Vt.width,Nt=Vt.height}else{var Gt=getAdjustedSizes({aspectRatio:St,width:Rt,height:Nt}),Qt=Gt.width;Rt=Qt===void 0?tt:Qt;var jt=Gt.height;Nt=jt===void 0?st:jt}Rt=Math.floor(normalizeDecimalNumber(Math.min(Math.max(Rt,Ct),wt))),Nt=Math.floor(normalizeDecimalNumber(Math.min(Math.max(Nt,Tt),_t)));var Ht=-Rt/2,Yt=-Nt/2,Jt=Rt,Zt=Nt,nn=[];if(Et){var cn=0,an=0,mn=tt,dn=st,fn=getAdjustedSizes({aspectRatio:St,width:tt,height:st},{contain:"cover",cover:"contain"}[ft.resize]);mn=fn.width,dn=fn.height,cn=(tt-mn)/2,an=(st-dn)/2,nn.push(cn,an,mn,dn)}if(nn.push(Ht,Yt,Jt,Zt),At){var Sn=[Nt,Rt];Rt=Sn[0],Nt=Sn[1]}xt.width=Rt,xt.height=Nt,isImageType(ft.mimeType)||(ft.mimeType=ht.type);var Tn="transparent";if(ht.size>ft.convertSize&&ft.convertTypes.indexOf(ft.mimeType)>=0&&(ft.mimeType="image/jpeg"),ft.mimeType==="image/jpeg"&&(Tn="#fff"),vt.fillStyle=Tn,vt.fillRect(0,0,Rt,Nt),ft.beforeDraw&&ft.beforeDraw.call(this,vt,xt),!this.aborted&&(vt.save(),vt.translate(Rt/2,Nt/2),vt.rotate(it*Math.PI/180),vt.scale(at,ut),vt.drawImage.apply(vt,[pt].concat(nn)),vt.restore(),ft.drew&&ft.drew.call(this,vt,xt),!this.aborted)){var Nn=function(_n){Je.aborted||Je.done({naturalWidth:tt,naturalHeight:st,result:_n})};xt.toBlob?xt.toBlob(Nn,ft.mimeType,ft.quality):Nn(toBlob(xt.toDataURL(ft.mimeType,ft.quality)))}}},{key:"done",value:function(Ye){var Je=Ye.naturalWidth,tt=Ye.naturalHeight,st=Ye.result,rt=this.file,it=this.image,ot=this.options;if(URL$1&&!ot.checkOrientation&&URL$1.revokeObjectURL(it.src),st)if(ot.strict&&st.size>rt.size&&ot.mimeType===rt.type&&!(ot.width>Je||ot.height>tt||ot.minWidth>Je||ot.minHeight>tt||ot.maxWidth<Je||ot.maxHeight<tt))st=rt;else{var at=new Date;st.lastModified=at.getTime(),st.lastModifiedDate=at,st.name=rt.name,st.name&&st.type!==rt.type&&(st.name=st.name.replace(REGEXP_EXTENSION,imageTypeToExtension(st.type)))}else st=rt;this.result=st,ot.success&&ot.success.call(this,st)}},{key:"fail",value:function(Ye){var Je=this.options;if(Je.error)Je.error.call(this,Ye);else throw Ye}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=AnotherCompressor,Xe}},{key:"setDefaults",value:function(Ye){_extends$1(DEFAULTS,Ye)}}]),Xe})();const getMimeType=Xe=>new Promise(Ke=>{const Ye=new FileReader;Ye.onloadend=function(Je){if(Je.target.readyState===FileReader.DONE){const tt=new Uint8Array(Je.target.result),st=[];tt.forEach(ot=>{st.push(ot.toString(16))});const rt=st.join("").toUpperCase();let it;switch(rt){case"7BA2020":it=MIMETYPE.GLTF;break;case"676C5446":it=MIMETYPE.GLB;break;default:it="Unknown MimeType"}Ke(it)}},Ye.onerror=()=>Ke("Unknown MimeType"),Ye.readAsArrayBuffer(Xe.slice(0,4))}),extensionFromMimetype=Xe=>{switch(Xe){case MIMETYPE.JPEG:return"jpg";case MIMETYPE.PNG:return"png";case MIMETYPE.GIF:return"gif";default:return"jpg"}},removeExtension=Xe=>Xe.split(".").slice(0,-1).join("."),getImageDimensions=async Xe=>await new Promise((Ke,Ye)=>{if(Xe){const Je=new Image;Je.src=Xe.reader,Je.onload=function(){Ke({imageWidth:Je.width,imageHeight:Je.height})},Je.onerror=tt=>{Ke({imageWidth:0,imageHeight:0})};return}Ke({imageWidth:0,imageHeight:0})}),generateCompressedImage=async(Xe,Ke)=>{if(!Xe.file)return;const Ye=await compressImage(Xe.file,Ke),Je=Ye.type,tt=await Ye.arrayBuffer(),st=await blobToDataURL(Ye);return{mimeType:Je,buffer:tt,reader:st}},blobToDataURL=async Xe=>new Promise((Ke,Ye)=>{const Je=new FileReader;Je.onerror=Ye,Je.onload=tt=>Ke(Je.result),Je.readAsDataURL(Xe)}),compressImage=(Xe,Ke)=>new Promise((Ye,Je)=>{new Compressor(Xe,{...Ke,success(tt){Ye(tt)},error(tt){Je(tt)}})}),generateCoverAndThumbnail=async Xe=>{if(Xe.mimeType===MIMETYPE.GIF)return{cover:Xe,thumbnail:Xe};console.debug("Generating cover");const Ke=await generateCompressedImage(Xe,COVER_COMPRESSOR_OPTIONS);console.debug("Generating thumbnail");const Ye=await generateCompressedImage(Xe,THUMBNAIL_COMPRESSOR_OPTIONS);return{cover:Ke,thumbnail:Ye}},generateTypedArtCoverImage=async(Xe,Ke,Ye,Je)=>{if(!Xe||Xe.trim().length===0)throw new Error("Input text must not be empty");Ye=Ye||1024;const tt=(_t,Ct)=>{const Tt=document.createElement("canvas");Tt.width=_t,Tt.height=Ct;const St=Tt.getContext("2d");if(!St)throw new Error("Could not create canvas context");return St},st=Ke?"Iosevka":"Source Sans Pro",rt=.75,it=16;let ot=Math.max(it,Ye*rt);const at=`${ot}px ${st}`,lt=tt(Ye,Ye);lt.font=at,lt.filter="grayscale(100%)",lt.fillStyle="transparent",lt.fillRect(0,0,Ye,Ye),lt.fillStyle="white";let ut=Xe.split(`
`).filter((_t,Ct,Tt)=>_t.trim()!==""||Ct===Tt.length-1||Tt[Ct+1].trim()!=="");const ht=50,pt=Ye-ht*2,ft=Ye-ht*2,xt=ut.reduce((_t,Ct)=>lt.measureText(Ct).width>lt.measureText(_t).width?Ct:_t,"");let vt=lt.measureText(")").actualBoundingBoxAscent+lt.measureText(")").actualBoundingBoxDescent+5,At=lt.measureText(xt).width;for(;(ut.length*vt>ft||At>pt)&&(ot-=1,lt.font=`${ot}px ${st}`,!(ot<=it));)At=lt.measureText(xt).width,vt=lt.measureText(")").actualBoundingBoxAscent+lt.measureText(")").actualBoundingBoxDescent+5;At>pt&&(ut=[Xe.split(`
`)[0].substring(0,Math.floor(pt/ot)-3)+"..."]),vt=lt.measureText(")").actualBoundingBoxAscent+lt.measureText(")").actualBoundingBoxDescent+5;const Et=ut.length*vt,wt=(Ye-Et)/2;return lt.imageSmoothingEnabled=!0,lt.imageSmoothingQuality="high",ut.forEach((_t,Ct)=>{let Tt=ht;lt.fillText(_t,Tt,wt+(Ct+1)*vt)}),new Promise((_t,Ct)=>{lt.canvas.toBlob(Tt=>{if(!Tt){Ct(new Error("Failed to generate image"));return}const St=new File([Tt],"Generated Cover.png",{type:"image/png"});_t(St)},"image/png")})},generateMidiCover=async(Xe,Ke)=>new Promise((Ye,Je)=>{var pt;const rt=document.createElement("canvas");rt.width=1024,rt.height=1024;const it=rt.getContext("2d");if(!it){Je(new Error("Could not create canvas context"));return}it.clearRect(0,0,rt.width,rt.height);const ot=Ke.tracks,at=lodashExports.truncate(Xe||((pt=Ke==null?void 0:Ke.tracks)==null?void 0:pt[0].name)||"Midi Track",{length:50});it.strokeStyle="white",it.lineWidth=5,it.strokeRect(0,0,rt.width,rt.height);const lt=rt.width-60,ht=(rt.height-60)/128;it.font="40px Arial",it.fillStyle="white",it.textAlign="center",it.fillText(at,rt.width/2,70),it.fillText("(MIDI)",rt.width/2,120),ot.forEach((ft,xt)=>{const vt=ft.notes,At=vt.reduce((wt,_t)=>Math.max(wt,_t.time+_t.duration),0),Et=.5+xt/ot.length*.5;it.fillStyle=`rgba(255, 255, 255, ${Et})`,vt.forEach(wt=>{const _t=30+wt.time*lt/At,Ct=rt.height-30-wt.midi*ht,Tt=wt.duration*lt/At;it.fillRect(_t,Ct,Tt,5)})}),rt.toBlob(ft=>{if(!ft){Je(new Error("Failed to generate image"));return}const xt=new File([ft],"Generated_MIDI_Cover.png",{type:"image/png"});Ye(xt)},"image/png")}),convertFileToFileForm=async Xe=>{const Ke=Xe.type===""?await getMimeType(Xe):Xe.type,Ye=Buffer.from(await Xe.arrayBuffer()),Je=Xe.name+".png";let tt=new FileReader;const st=new Blob([Ye],{type:Ke});tt=await blobToDataURL(st);const rt={mimeType:Ke,fileName:Je+".png",fileSize:Xe.size};return{title:Je,mimeType:Ke,file:Xe,buffer:Ye,reader:tt,format:rt}},processAudioForVisualizer=Xe=>{const Ke=Xe.split(",")[1]||Xe,Ye=atob(Ke),Je=new ArrayBuffer(Ye.length),tt=new Uint8Array(Je);for(let st=0;st<Ye.length;st++)tt[st]=Ye.charCodeAt(st);return new Blob([Je],{type:"audio/mpeg"})};async function processMidiData(Xe,Ke){try{const Ye=await new Midi.Midi.fromUrl(Xe),Je=parseInt(Ke)/100;Ye.tracks.forEach(rt=>{rt.notes.forEach(it=>{it.velocity*=Je})});const tt=Ye.toArray(),st=new Blob([tt],{type:"audio/midi"});return URL.createObjectURL(st)}catch(Ye){throw console.error("Failed to modify MIDI data:",Ye),Ye}}const processMidiCover=async Xe=>{const Ke=new Midi.Midi(Xe.artifact.buffer);let Ye=await generateMidiCover(Xe.title,Ke);return Xe.cover=await convertFileToFileForm(Ye),Xe};var PitchClass;(function(Xe){Xe[Xe.None=0]="None",Xe[Xe.C=1]="C",Xe[Xe.Cs=2]="Cs",Xe[Xe.D=3]="D",Xe[Xe.Eb=4]="Eb",Xe[Xe.E=5]="E",Xe[Xe.F=6]="F",Xe[Xe.Fs=7]="Fs",Xe[Xe.G=8]="G",Xe[Xe.Ab=9]="Ab",Xe[Xe.A=10]="A",Xe[Xe.Bb=11]="Bb",Xe[Xe.B=12]="B"})(PitchClass||(PitchClass={}));var ChordFamily;(function(Xe){Xe[Xe.None=0]="None",Xe[Xe.Maj=1]="Maj",Xe[Xe.Min=2]="Min",Xe[Xe.Aug=3]="Aug",Xe[Xe.Dim=4]="Dim",Xe[Xe.Seven=5]="Seven",Xe[Xe.Maj7=6]="Maj7",Xe[Xe.Min7=7]="Min7",Xe[Xe.Min7b5=8]="Min7b5"})(ChordFamily||(ChordFamily={}));function FFT(Xe){if(this.size=Xe|0,this.size<=1||(this.size&this.size-1)!==0)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=Xe<<1;for(var Ke=new Array(this.size*2),Ye=0;Ye<Ke.length;Ye+=2){const ot=Math.PI*Ye/this.size;Ke[Ye]=Math.cos(ot),Ke[Ye+1]=-Math.sin(ot)}this.table=Ke;for(var Je=0,tt=1;this.size>tt;tt<<=1)Je++;this._width=Je%2===0?Je-1:Je,this._bitrev=new Array(1<<this._width);for(var st=0;st<this._bitrev.length;st++){this._bitrev[st]=0;for(var rt=0;rt<this._width;rt+=2){var it=this._width-rt-2;this._bitrev[st]|=(st>>>rt&3)<<it}}this._out=null,this._data=null,this._inv=0}FFT.prototype.fromComplexArray=function Xe(Ke,Ye){for(var Je=Ye||new Array(Ke.length>>>1),tt=0;tt<Ke.length;tt+=2)Je[tt>>>1]=Ke[tt];return Je};FFT.prototype.createComplexArray=function Xe(){const Ke=new Array(this._csize);for(var Ye=0;Ye<Ke.length;Ye++)Ke[Ye]=0;return Ke};FFT.prototype.toComplexArray=function Xe(Ke,Ye){for(var Je=Ye||this.createComplexArray(),tt=0;tt<Je.length;tt+=2)Je[tt]=Ke[tt>>>1],Je[tt+1]=0;return Je};FFT.prototype.completeSpectrum=function Xe(Ke){for(var Ye=this._csize,Je=Ye>>>1,tt=2;tt<Je;tt+=2)Ke[Ye-tt]=Ke[tt],Ke[Ye-tt+1]=-Ke[tt+1]};FFT.prototype.transform=function Xe(Ke,Ye){if(Ke===Ye)throw new Error("Input and output buffers must be different");this._out=Ke,this._data=Ye,this._inv=0,this._transform4(),this._out=null,this._data=null};FFT.prototype.realTransform=function Xe(Ke,Ye){if(Ke===Ye)throw new Error("Input and output buffers must be different");this._out=Ke,this._data=Ye,this._inv=0,this._realTransform4(),this._out=null,this._data=null};FFT.prototype.inverseTransform=function Xe(Ke,Ye){if(Ke===Ye)throw new Error("Input and output buffers must be different");this._out=Ke,this._data=Ye,this._inv=1,this._transform4();for(var Je=0;Je<Ke.length;Je++)Ke[Je]/=this.size;this._out=null,this._data=null};FFT.prototype._transform4=function Xe(){var Ke=this._out,Ye=this._csize,Je=this._width,tt=1<<Je,st=Ye/tt<<1,rt,it,ot=this._bitrev;if(st===4)for(rt=0,it=0;rt<Ye;rt+=st,it++){const xt=ot[it];this._singleTransform2(rt,xt,tt)}else for(rt=0,it=0;rt<Ye;rt+=st,it++){const xt=ot[it];this._singleTransform4(rt,xt,tt)}var at=this._inv?-1:1,lt=this.table;for(tt>>=2;tt>=2;tt>>=2){st=Ye/tt<<1;var ut=st>>>2;for(rt=0;rt<Ye;rt+=st)for(var ht=rt+ut,pt=rt,ft=0;pt<ht;pt+=2,ft+=tt){const xt=pt,vt=xt+ut,At=vt+ut,Et=At+ut,wt=Ke[xt],_t=Ke[xt+1],Ct=Ke[vt],Tt=Ke[vt+1],St=Ke[At],Rt=Ke[At+1],Nt=Ke[Et],Pt=Ke[Et+1],Bt=wt,Lt=_t,zt=lt[ft],Dt=at*lt[ft+1],Vt=Ct*zt-Tt*Dt,Gt=Ct*Dt+Tt*zt,Qt=lt[2*ft],jt=at*lt[2*ft+1],Ht=St*Qt-Rt*jt,Yt=St*jt+Rt*Qt,Jt=lt[3*ft],Zt=at*lt[3*ft+1],nn=Nt*Jt-Pt*Zt,cn=Nt*Zt+Pt*Jt,an=Bt+Ht,mn=Lt+Yt,dn=Bt-Ht,fn=Lt-Yt,Sn=Vt+nn,Tn=Gt+cn,Nn=at*(Vt-nn),gn=at*(Gt-cn),_n=an+Sn,kn=mn+Tn,Wt=an-Sn,sn=mn-Tn,hn=dn+gn,En=fn-Nn,An=dn-gn,wn=fn+Nn;Ke[xt]=_n,Ke[xt+1]=kn,Ke[vt]=hn,Ke[vt+1]=En,Ke[At]=Wt,Ke[At+1]=sn,Ke[Et]=An,Ke[Et+1]=wn}}};FFT.prototype._singleTransform2=function Xe(Ke,Ye,Je){const tt=this._out,st=this._data,rt=st[Ye],it=st[Ye+1],ot=st[Ye+Je],at=st[Ye+Je+1],lt=rt+ot,ut=it+at,ht=rt-ot,pt=it-at;tt[Ke]=lt,tt[Ke+1]=ut,tt[Ke+2]=ht,tt[Ke+3]=pt};FFT.prototype._singleTransform4=function Xe(Ke,Ye,Je){const tt=this._out,st=this._data,rt=this._inv?-1:1,it=Je*2,ot=Je*3,at=st[Ye],lt=st[Ye+1],ut=st[Ye+Je],ht=st[Ye+Je+1],pt=st[Ye+it],ft=st[Ye+it+1],xt=st[Ye+ot],vt=st[Ye+ot+1],At=at+pt,Et=lt+ft,wt=at-pt,_t=lt-ft,Ct=ut+xt,Tt=ht+vt,St=rt*(ut-xt),Rt=rt*(ht-vt),Nt=At+Ct,Pt=Et+Tt,Bt=wt+Rt,Lt=_t-St,zt=At-Ct,Dt=Et-Tt,Vt=wt-Rt,Gt=_t+St;tt[Ke]=Nt,tt[Ke+1]=Pt,tt[Ke+2]=Bt,tt[Ke+3]=Lt,tt[Ke+4]=zt,tt[Ke+5]=Dt,tt[Ke+6]=Vt,tt[Ke+7]=Gt};FFT.prototype._realTransform4=function Xe(){var Ke=this._out,Ye=this._csize,Je=this._width,tt=1<<Je,st=Ye/tt<<1,rt,it,ot=this._bitrev;if(st===4)for(rt=0,it=0;rt<Ye;rt+=st,it++){const _s=ot[it];this._singleRealTransform2(rt,_s>>>1,tt>>>1)}else for(rt=0,it=0;rt<Ye;rt+=st,it++){const _s=ot[it];this._singleRealTransform4(rt,_s>>>1,tt>>>1)}var at=this._inv?-1:1,lt=this.table;for(tt>>=2;tt>=2;tt>>=2){st=Ye/tt<<1;var ut=st>>>1,ht=ut>>>1,pt=ht>>>1;for(rt=0;rt<Ye;rt+=st)for(var ft=0,xt=0;ft<=pt;ft+=2,xt+=tt){var vt=rt+ft,At=vt+ht,Et=At+ht,wt=Et+ht,_t=Ke[vt],Ct=Ke[vt+1],Tt=Ke[At],St=Ke[At+1],Rt=Ke[Et],Nt=Ke[Et+1],Pt=Ke[wt],Bt=Ke[wt+1],Lt=_t,zt=Ct,Dt=lt[xt],Vt=at*lt[xt+1],Gt=Tt*Dt-St*Vt,Qt=Tt*Vt+St*Dt,jt=lt[2*xt],Ht=at*lt[2*xt+1],Yt=Rt*jt-Nt*Ht,Jt=Rt*Ht+Nt*jt,Zt=lt[3*xt],nn=at*lt[3*xt+1],cn=Pt*Zt-Bt*nn,an=Pt*nn+Bt*Zt,mn=Lt+Yt,dn=zt+Jt,fn=Lt-Yt,Sn=zt-Jt,Tn=Gt+cn,Nn=Qt+an,gn=at*(Gt-cn),_n=at*(Qt-an),kn=mn+Tn,Wt=dn+Nn,sn=fn+_n,hn=Sn-gn;if(Ke[vt]=kn,Ke[vt+1]=Wt,Ke[At]=sn,Ke[At+1]=hn,ft===0){var En=mn-Tn,An=dn-Nn;Ke[Et]=En,Ke[Et+1]=An;continue}if(ft!==pt){var wn=fn,Fn=-Sn,Hn=mn,Yn=-dn,Un=-at*_n,Kn=-at*gn,hs=-at*Nn,zn=-at*Tn,es=wn+Un,bn=Fn+Kn,pn=Hn+zn,Ln=Yn-hs,Mn=rt+ht-ft,ls=rt+ut-ft;Ke[Mn]=es,Ke[Mn+1]=bn,Ke[ls]=pn,Ke[ls+1]=Ln}}}};FFT.prototype._singleRealTransform2=function Xe(Ke,Ye,Je){const tt=this._out,st=this._data,rt=st[Ye],it=st[Ye+Je],ot=rt+it,at=rt-it;tt[Ke]=ot,tt[Ke+1]=0,tt[Ke+2]=at,tt[Ke+3]=0};FFT.prototype._singleRealTransform4=function Xe(Ke,Ye,Je){const tt=this._out,st=this._data,rt=this._inv?-1:1,it=Je*2,ot=Je*3,at=st[Ye],lt=st[Ye+Je],ut=st[Ye+it],ht=st[Ye+ot],pt=at+ut,ft=at-ut,xt=lt+ht,vt=rt*(lt-ht),At=pt+xt,Et=ft,wt=-vt,_t=pt-xt,Ct=ft,Tt=vt;tt[Ke]=At,tt[Ke+1]=0,tt[Ke+2]=Et,tt[Ke+3]=wt,tt[Ke+4]=_t,tt[Ke+5]=0,tt[Ke+6]=Ct,tt[Ke+7]=Tt};var ndarrayOps={};function unique_pred(Xe,Ke){for(var Ye=1,Je=Xe.length,tt=Xe[0],st=Xe[0],rt=1;rt<Je;++rt)if(st=tt,tt=Xe[rt],Ke(tt,st)){if(rt===Ye){Ye++;continue}Xe[Ye++]=tt}return Xe.length=Ye,Xe}function unique_eq(Xe){for(var Ke=1,Ye=Xe.length,Je=Xe[0],tt=Xe[0],st=1;st<Ye;++st,tt=Je)if(tt=Je,Je=Xe[st],Je!==tt){if(st===Ke){Ke++;continue}Xe[Ke++]=Je}return Xe.length=Ke,Xe}function unique(Xe,Ke,Ye){return Xe.length===0?Xe:Ke?(Ye||Xe.sort(Ke),unique_pred(Xe,Ke)):(Ye||Xe.sort(),unique_eq(Xe))}var uniq$4=unique,uniq$3=uniq$4;function innerFill(Xe,Ke,Ye){var Je=Xe.length,tt=Ke.arrayArgs.length,st=Ke.indexArgs.length>0,rt=[],it=[],ot=0,at=0,lt,ut;for(lt=0;lt<Je;++lt)it.push(["i",lt,"=0"].join(""));for(ut=0;ut<tt;++ut)for(lt=0;lt<Je;++lt)at=ot,ot=Xe[lt],lt===0?it.push(["d",ut,"s",lt,"=t",ut,"p",ot].join("")):it.push(["d",ut,"s",lt,"=(t",ut,"p",ot,"-s",at,"*t",ut,"p",at,")"].join(""));for(it.length>0&&rt.push("var "+it.join(",")),lt=Je-1;lt>=0;--lt)ot=Xe[lt],rt.push(["for(i",lt,"=0;i",lt,"<s",ot,";++i",lt,"){"].join(""));for(rt.push(Ye),lt=0;lt<Je;++lt){for(at=ot,ot=Xe[lt],ut=0;ut<tt;++ut)rt.push(["p",ut,"+=d",ut,"s",lt].join(""));st&&(lt>0&&rt.push(["index[",at,"]-=s",at].join("")),rt.push(["++index[",ot,"]"].join(""))),rt.push("}")}return rt.join(`
`)}function outerFill(Xe,Ke,Ye,Je){for(var tt=Ke.length,st=Ye.arrayArgs.length,rt=Ye.blockSize,it=Ye.indexArgs.length>0,ot=[],at=0;at<st;++at)ot.push(["var offset",at,"=p",at].join(""));for(var at=Xe;at<tt;++at)ot.push(["for(var j"+at+"=SS[",Ke[at],"]|0;j",at,">0;){"].join("")),ot.push(["if(j",at,"<",rt,"){"].join("")),ot.push(["s",Ke[at],"=j",at].join("")),ot.push(["j",at,"=0"].join("")),ot.push(["}else{s",Ke[at],"=",rt].join("")),ot.push(["j",at,"-=",rt,"}"].join("")),it&&ot.push(["index[",Ke[at],"]=j",at].join(""));for(var at=0;at<st;++at){for(var lt=["offset"+at],ut=Xe;ut<tt;++ut)lt.push(["j",ut,"*t",at,"p",Ke[ut]].join(""));ot.push(["p",at,"=(",lt.join("+"),")"].join(""))}ot.push(innerFill(Ke,Ye,Je));for(var at=Xe;at<tt;++at)ot.push("}");return ot.join(`
`)}function countMatches(Xe){for(var Ke=0,Ye=Xe[0].length;Ke<Ye;){for(var Je=1;Je<Xe.length;++Je)if(Xe[Je][Ke]!==Xe[0][Ke])return Ke;++Ke}return Ke}function processBlock(Xe,Ke,Ye){for(var Je=Xe.body,tt=[],st=[],rt=0;rt<Xe.args.length;++rt){var it=Xe.args[rt];if(!(it.count<=0)){var ot=new RegExp(it.name,"g"),at="",lt=Ke.arrayArgs.indexOf(rt);switch(Ke.argTypes[rt]){case"offset":var ut=Ke.offsetArgIndex.indexOf(rt),ht=Ke.offsetArgs[ut];lt=ht.array,at="+q"+ut;case"array":at="p"+lt+at;var pt="l"+rt,ft="a"+lt;if(Ke.arrayBlockIndices[lt]===0)it.count===1?Ye[lt]==="generic"?it.lvalue?(tt.push(["var ",pt,"=",ft,".get(",at,")"].join("")),Je=Je.replace(ot,pt),st.push([ft,".set(",at,",",pt,")"].join(""))):Je=Je.replace(ot,[ft,".get(",at,")"].join("")):Je=Je.replace(ot,[ft,"[",at,"]"].join("")):Ye[lt]==="generic"?(tt.push(["var ",pt,"=",ft,".get(",at,")"].join("")),Je=Je.replace(ot,pt),it.lvalue&&st.push([ft,".set(",at,",",pt,")"].join(""))):(tt.push(["var ",pt,"=",ft,"[",at,"]"].join("")),Je=Je.replace(ot,pt),it.lvalue&&st.push([ft,"[",at,"]=",pt].join("")));else{for(var xt=[it.name],vt=[at],At=0;At<Math.abs(Ke.arrayBlockIndices[lt]);At++)xt.push("\\s*\\[([^\\]]+)\\]"),vt.push("$"+(At+1)+"*t"+lt+"b"+At);if(ot=new RegExp(xt.join(""),"g"),at=vt.join("+"),Ye[lt]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");Je=Je.replace(ot,[ft,"[",at,"]"].join(""))}break;case"scalar":Je=Je.replace(ot,"Y"+Ke.scalarArgs.indexOf(rt));break;case"index":Je=Je.replace(ot,"index");break;case"shape":Je=Je.replace(ot,"shape");break}}}return[tt.join(`
`),Je,st.join(`
`)].join(`
`).trim()}function typeSummary(Xe){for(var Ke=new Array(Xe.length),Ye=!0,Je=0;Je<Xe.length;++Je){var tt=Xe[Je],st=tt.match(/\d+/);st?st=st[0]:st="",tt.charAt(0)===0?Ke[Je]="u"+tt.charAt(1)+st:Ke[Je]=tt.charAt(0)+st,Je>0&&(Ye=Ye&&Ke[Je]===Ke[Je-1])}return Ye?Ke[0]:Ke.join("")}function generateCWiseOp(Xe,Ke){for(var Ye=Ke[1].length-Math.abs(Xe.arrayBlockIndices[0])|0,Je=new Array(Xe.arrayArgs.length),tt=new Array(Xe.arrayArgs.length),st=0;st<Xe.arrayArgs.length;++st)tt[st]=Ke[2*st],Je[st]=Ke[2*st+1];for(var rt=[],it=[],ot=[],at=[],lt=[],st=0;st<Xe.arrayArgs.length;++st){Xe.arrayBlockIndices[st]<0?(ot.push(0),at.push(Ye),rt.push(Ye),it.push(Ye+Xe.arrayBlockIndices[st])):(ot.push(Xe.arrayBlockIndices[st]),at.push(Xe.arrayBlockIndices[st]+Ye),rt.push(0),it.push(Xe.arrayBlockIndices[st]));for(var ut=[],ht=0;ht<Je[st].length;ht++)ot[st]<=Je[st][ht]&&Je[st][ht]<at[st]&&ut.push(Je[st][ht]-ot[st]);lt.push(ut)}for(var pt=["SS"],ft=["'use strict'"],xt=[],ht=0;ht<Ye;++ht)xt.push(["s",ht,"=SS[",ht,"]"].join(""));for(var st=0;st<Xe.arrayArgs.length;++st){pt.push("a"+st),pt.push("t"+st),pt.push("p"+st);for(var ht=0;ht<Ye;++ht)xt.push(["t",st,"p",ht,"=t",st,"[",ot[st]+ht,"]"].join(""));for(var ht=0;ht<Math.abs(Xe.arrayBlockIndices[st]);++ht)xt.push(["t",st,"b",ht,"=t",st,"[",rt[st]+ht,"]"].join(""))}for(var st=0;st<Xe.scalarArgs.length;++st)pt.push("Y"+st);if(Xe.shapeArgs.length>0&&xt.push("shape=SS.slice(0)"),Xe.indexArgs.length>0){for(var vt=new Array(Ye),st=0;st<Ye;++st)vt[st]="0";xt.push(["index=[",vt.join(","),"]"].join(""))}for(var st=0;st<Xe.offsetArgs.length;++st){for(var At=Xe.offsetArgs[st],Et=[],ht=0;ht<At.offset.length;++ht)At.offset[ht]!==0&&(At.offset[ht]===1?Et.push(["t",At.array,"p",ht].join("")):Et.push([At.offset[ht],"*t",At.array,"p",ht].join("")));Et.length===0?xt.push("q"+st+"=0"):xt.push(["q",st,"=",Et.join("+")].join(""))}var wt=uniq$3([].concat(Xe.pre.thisVars).concat(Xe.body.thisVars).concat(Xe.post.thisVars));xt=xt.concat(wt),xt.length>0&&ft.push("var "+xt.join(","));for(var st=0;st<Xe.arrayArgs.length;++st)ft.push("p"+st+"|=0");Xe.pre.body.length>3&&ft.push(processBlock(Xe.pre,Xe,tt));var _t=processBlock(Xe.body,Xe,tt),Ct=countMatches(lt);Ct<Ye?ft.push(outerFill(Ct,lt[0],Xe,_t)):ft.push(innerFill(lt[0],Xe,_t)),Xe.post.body.length>3&&ft.push(processBlock(Xe.post,Xe,tt)),Xe.debug&&console.log("-----Generated cwise routine for ",Ke,`:
`+ft.join(`
`)+`
----------`);var Tt=[Xe.funcName||"unnamed","_cwise_loop_",Je[0].join("s"),"m",Ct,typeSummary(tt)].join(""),St=new Function(["function ",Tt,"(",pt.join(","),"){",ft.join(`
`),"} return ",Tt].join(""));return St()}var compile$3=generateCWiseOp,compile$2=compile$3;function createThunk$1(Xe){var Ke=["'use strict'","var CACHED={}"],Ye=[],Je=Xe.funcName+"_cwise_thunk";Ke.push(["return function ",Je,"(",Xe.shimArgs.join(","),"){"].join(""));for(var tt=[],st=[],rt=[["array",Xe.arrayArgs[0],".shape.slice(",Math.max(0,Xe.arrayBlockIndices[0]),Xe.arrayBlockIndices[0]<0?","+Xe.arrayBlockIndices[0]+")":")"].join("")],it=[],ot=[],at=0;at<Xe.arrayArgs.length;++at){var lt=Xe.arrayArgs[at];Ye.push(["t",lt,"=array",lt,".dtype,","r",lt,"=array",lt,".order"].join("")),tt.push("t"+lt),tt.push("r"+lt),st.push("t"+lt),st.push("r"+lt+".join()"),rt.push("array"+lt+".data"),rt.push("array"+lt+".stride"),rt.push("array"+lt+".offset|0"),at>0&&(it.push("array"+Xe.arrayArgs[0]+".shape.length===array"+lt+".shape.length+"+(Math.abs(Xe.arrayBlockIndices[0])-Math.abs(Xe.arrayBlockIndices[at]))),ot.push("array"+Xe.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,Xe.arrayBlockIndices[0])+"]===array"+lt+".shape[shapeIndex+"+Math.max(0,Xe.arrayBlockIndices[at])+"]"))}Xe.arrayArgs.length>1&&(Ke.push("if (!("+it.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),Ke.push("for(var shapeIndex=array"+Xe.arrayArgs[0]+".shape.length-"+Math.abs(Xe.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),Ke.push("if (!("+ot.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),Ke.push("}"));for(var at=0;at<Xe.scalarArgs.length;++at)rt.push("scalar"+Xe.scalarArgs[at]);Ye.push(["type=[",st.join(","),"].join()"].join("")),Ye.push("proc=CACHED[type]"),Ke.push("var "+Ye.join(",")),Ke.push(["if(!proc){","CACHED[type]=proc=compile([",tt.join(","),"])}","return proc(",rt.join(","),")}"].join("")),Xe.debug&&console.log(`-----Generated thunk:
`+Ke.join(`
`)+`
----------`);var ut=new Function("compile",Ke.join(`
`));return ut(compile$2.bind(void 0,Xe))}var thunk=createThunk$1,createThunk=thunk;function Procedure(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function compileCwise(Xe){var Ke=new Procedure;Ke.pre=Xe.pre,Ke.body=Xe.body,Ke.post=Xe.post;var Ye=Xe.args.slice(0);Ke.argTypes=Ye;for(var Je=0;Je<Ye.length;++Je){var tt=Ye[Je];if(tt==="array"||typeof tt=="object"&&tt.blockIndices){if(Ke.argTypes[Je]="array",Ke.arrayArgs.push(Je),Ke.arrayBlockIndices.push(tt.blockIndices?tt.blockIndices:0),Ke.shimArgs.push("array"+Je),Je<Ke.pre.args.length&&Ke.pre.args[Je].count>0)throw new Error("cwise: pre() block may not reference array args");if(Je<Ke.post.args.length&&Ke.post.args[Je].count>0)throw new Error("cwise: post() block may not reference array args")}else if(tt==="scalar")Ke.scalarArgs.push(Je),Ke.shimArgs.push("scalar"+Je);else if(tt==="index"){if(Ke.indexArgs.push(Je),Je<Ke.pre.args.length&&Ke.pre.args[Je].count>0)throw new Error("cwise: pre() block may not reference array index");if(Je<Ke.body.args.length&&Ke.body.args[Je].lvalue)throw new Error("cwise: body() block may not write to array index");if(Je<Ke.post.args.length&&Ke.post.args[Je].count>0)throw new Error("cwise: post() block may not reference array index")}else if(tt==="shape"){if(Ke.shapeArgs.push(Je),Je<Ke.pre.args.length&&Ke.pre.args[Je].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(Je<Ke.body.args.length&&Ke.body.args[Je].lvalue)throw new Error("cwise: body() block may not write to array shape");if(Je<Ke.post.args.length&&Ke.post.args[Je].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof tt=="object"&&tt.offset)Ke.argTypes[Je]="offset",Ke.offsetArgs.push({array:tt.array,offset:tt.offset}),Ke.offsetArgIndex.push(Je);else throw new Error("cwise: Unknown argument type "+Ye[Je])}if(Ke.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(Ke.pre.args.length>Ye.length)throw new Error("cwise: Too many arguments in pre() block");if(Ke.body.args.length>Ye.length)throw new Error("cwise: Too many arguments in body() block");if(Ke.post.args.length>Ye.length)throw new Error("cwise: Too many arguments in post() block");return Ke.debug=!!Xe.printCode||!!Xe.debug,Ke.funcName=Xe.funcName||"cwise",Ke.blockSize=Xe.blockSize||64,createThunk(Ke)}var compiler=compileCwise;(function(Xe){var Ke=compiler,Ye={body:"",args:[],thisVars:[],localVars:[]};function Je(ht){if(!ht)return Ye;for(var pt=0;pt<ht.args.length;++pt){var ft=ht.args[pt];pt===0?ht.args[pt]={name:ft,lvalue:!0,rvalue:!!ht.rvalue,count:ht.count||1}:ht.args[pt]={name:ft,lvalue:!1,rvalue:!0,count:1}}return ht.thisVars||(ht.thisVars=[]),ht.localVars||(ht.localVars=[]),ht}function tt(ht){return Ke({args:ht.args,pre:Je(ht.pre),body:Je(ht.body),post:Je(ht.proc),funcName:ht.funcName})}function st(ht){for(var pt=[],ft=0;ft<ht.args.length;++ft)pt.push("a"+ft);var xt=new Function("P",["return function ",ht.funcName,"_ndarrayops(",pt.join(","),") {P(",pt.join(","),");return a0}"].join(""));return xt(tt(ht))}var rt={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var ht in rt){var pt=rt[ht];Xe[ht]=st({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+pt+"c"},funcName:ht}),Xe[ht+"eq"]=st({args:["array","array"],body:{args:["a","b"],body:"a"+pt+"=b"},funcName:ht+"eq"}),Xe[ht+"s"]=st({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+pt+"s"},funcName:ht+"s"}),Xe[ht+"seq"]=st({args:["array","scalar"],body:{args:["a","s"],body:"a"+pt+"=s"},funcName:ht+"seq"})}})();var it={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var ht in it){var pt=it[ht];Xe[ht]=st({args:["array","array"],body:{args:["a","b"],body:"a="+pt+"b"},funcName:ht}),Xe[ht+"eq"]=st({args:["array"],body:{args:["a"],body:"a="+pt+"a"},funcName:ht+"eq"})}})();var ot={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var ht in ot){var pt=ot[ht];Xe[ht]=st({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+pt+"c"},funcName:ht}),Xe[ht+"s"]=st({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+pt+"s"},funcName:ht+"s"}),Xe[ht+"eq"]=st({args:["array","array"],body:{args:["a","b"],body:"a=a"+pt+"b"},funcName:ht+"eq"}),Xe[ht+"seq"]=st({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+pt+"s"},funcName:ht+"seq"})}})();var at=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var ht=0;ht<at.length;++ht){var pt=at[ht];Xe[pt]=st({args:["array","array"],pre:{args:[],body:"this_f=Math."+pt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:pt}),Xe[pt+"eq"]=st({args:["array"],pre:{args:[],body:"this_f=Math."+pt,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},funcName:pt+"eq"})}})();var lt=["max","min","atan2","pow"];(function(){for(var ht=0;ht<lt.length;++ht){var pt=lt[ht];Xe[pt]=st({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+pt,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:pt}),Xe[pt+"s"]=st({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+pt,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:pt+"s"}),Xe[pt+"eq"]=st({args:["array","array"],pre:{args:[],body:"this_f=Math."+pt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},funcName:pt+"eq"}),Xe[pt+"seq"]=st({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+pt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},funcName:pt+"seq"})}})();var ut=["atan2","pow"];(function(){for(var ht=0;ht<ut.length;++ht){var pt=ut[ht];Xe[pt+"op"]=st({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+pt,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:pt+"op"}),Xe[pt+"ops"]=st({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+pt,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:pt+"ops"}),Xe[pt+"opeq"]=st({args:["array","array"],pre:{args:[],body:"this_f=Math."+pt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},funcName:pt+"opeq"}),Xe[pt+"opseq"]=st({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+pt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},funcName:pt+"opseq"})}})(),Xe.any=Ke({args:["array"],pre:Ye,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),Xe.all=Ke({args:["array"],pre:Ye,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),Xe.sum=Ke({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),Xe.prod=Ke({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),Xe.norm2squared=Ke({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),Xe.norm2=Ke({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),Xe.norminf=Ke({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),Xe.norm1=Ke({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),Xe.sup=Ke({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),Xe.inf=Ke({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),Xe.argmin=Ke({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),Xe.argmax=Ke({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),Xe.random=st({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),Xe.assign=st({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),Xe.assigns=st({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),Xe.equals=Ke({args:["array","array"],pre:Ye,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(ndarrayOps);var twiddle={},INT_BITS=32;twiddle.INT_BITS=INT_BITS;twiddle.INT_MAX=2147483647;twiddle.INT_MIN=-1<<INT_BITS-1;twiddle.sign=function(Xe){return(Xe>0)-(Xe<0)};twiddle.abs=function(Xe){var Ke=Xe>>INT_BITS-1;return(Xe^Ke)-Ke};twiddle.min=function(Xe,Ke){return Ke^(Xe^Ke)&-(Xe<Ke)};twiddle.max=function(Xe,Ke){return Xe^(Xe^Ke)&-(Xe<Ke)};twiddle.isPow2=function(Xe){return!(Xe&Xe-1)&&!!Xe};twiddle.log2=function(Xe){var Ke,Ye;return Ke=(Xe>65535)<<4,Xe>>>=Ke,Ye=(Xe>255)<<3,Xe>>>=Ye,Ke|=Ye,Ye=(Xe>15)<<2,Xe>>>=Ye,Ke|=Ye,Ye=(Xe>3)<<1,Xe>>>=Ye,Ke|=Ye,Ke|Xe>>1};twiddle.log10=function(Xe){return Xe>=1e9?9:Xe>=1e8?8:Xe>=1e7?7:Xe>=1e6?6:Xe>=1e5?5:Xe>=1e4?4:Xe>=1e3?3:Xe>=100?2:Xe>=10?1:0};twiddle.popCount=function(Xe){return Xe=Xe-(Xe>>>1&1431655765),Xe=(Xe&858993459)+(Xe>>>2&858993459),(Xe+(Xe>>>4)&252645135)*16843009>>>24};function countTrailingZeros(Xe){var Ke=32;return Xe&=-Xe,Xe&&Ke--,Xe&65535&&(Ke-=16),Xe&16711935&&(Ke-=8),Xe&252645135&&(Ke-=4),Xe&858993459&&(Ke-=2),Xe&1431655765&&(Ke-=1),Ke}twiddle.countTrailingZeros=countTrailingZeros;twiddle.nextPow2=function(Xe){return Xe+=Xe===0,--Xe,Xe|=Xe>>>1,Xe|=Xe>>>2,Xe|=Xe>>>4,Xe|=Xe>>>8,Xe|=Xe>>>16,Xe+1};twiddle.prevPow2=function(Xe){return Xe|=Xe>>>1,Xe|=Xe>>>2,Xe|=Xe>>>4,Xe|=Xe>>>8,Xe|=Xe>>>16,Xe-(Xe>>>1)};twiddle.parity=function(Xe){return Xe^=Xe>>>16,Xe^=Xe>>>8,Xe^=Xe>>>4,Xe&=15,27030>>>Xe&1};var REVERSE_TABLE=new Array(256);(function(Xe){for(var Ke=0;Ke<256;++Ke){var Ye=Ke,Je=Ke,tt=7;for(Ye>>>=1;Ye;Ye>>>=1)Je<<=1,Je|=Ye&1,--tt;Xe[Ke]=Je<<tt&255}})(REVERSE_TABLE);twiddle.reverse=function(Xe){return REVERSE_TABLE[Xe&255]<<24|REVERSE_TABLE[Xe>>>8&255]<<16|REVERSE_TABLE[Xe>>>16&255]<<8|REVERSE_TABLE[Xe>>>24&255]};twiddle.interleave2=function(Xe,Ke){return Xe&=65535,Xe=(Xe|Xe<<8)&16711935,Xe=(Xe|Xe<<4)&252645135,Xe=(Xe|Xe<<2)&858993459,Xe=(Xe|Xe<<1)&1431655765,Ke&=65535,Ke=(Ke|Ke<<8)&16711935,Ke=(Ke|Ke<<4)&252645135,Ke=(Ke|Ke<<2)&858993459,Ke=(Ke|Ke<<1)&1431655765,Xe|Ke<<1};twiddle.deinterleave2=function(Xe,Ke){return Xe=Xe>>>Ke&1431655765,Xe=(Xe|Xe>>>1)&858993459,Xe=(Xe|Xe>>>2)&252645135,Xe=(Xe|Xe>>>4)&16711935,Xe=(Xe|Xe>>>16)&65535,Xe<<16>>16};twiddle.interleave3=function(Xe,Ke,Ye){return Xe&=1023,Xe=(Xe|Xe<<16)&4278190335,Xe=(Xe|Xe<<8)&251719695,Xe=(Xe|Xe<<4)&3272356035,Xe=(Xe|Xe<<2)&1227133513,Ke&=1023,Ke=(Ke|Ke<<16)&4278190335,Ke=(Ke|Ke<<8)&251719695,Ke=(Ke|Ke<<4)&3272356035,Ke=(Ke|Ke<<2)&1227133513,Xe|=Ke<<1,Ye&=1023,Ye=(Ye|Ye<<16)&4278190335,Ye=(Ye|Ye<<8)&251719695,Ye=(Ye|Ye<<4)&3272356035,Ye=(Ye|Ye<<2)&1227133513,Xe|Ye<<2};twiddle.deinterleave3=function(Xe,Ke){return Xe=Xe>>>Ke&1227133513,Xe=(Xe|Xe>>>2)&3272356035,Xe=(Xe|Xe>>>4)&251719695,Xe=(Xe|Xe>>>8)&4278190335,Xe=(Xe|Xe>>>16)&1023,Xe<<22>>22};twiddle.nextCombination=function(Xe){var Ke=Xe|Xe-1;return Ke+1|(~Ke&-~Ke)-1>>>countTrailingZeros(Xe)+1};function dupe_array(Xe,Ke,Ye){var Je=Xe[Ye]|0;if(Je<=0)return[];var tt=new Array(Je),st;if(Ye===Xe.length-1)for(st=0;st<Je;++st)tt[st]=Ke;else for(st=0;st<Je;++st)tt[st]=dupe_array(Xe,Ke,Ye+1);return tt}function dupe_number(Xe,Ke){var Ye,Je;for(Ye=new Array(Xe),Je=0;Je<Xe;++Je)Ye[Je]=Ke;return Ye}function dupe(Xe,Ke){switch(typeof Ke>"u"&&(Ke=0),typeof Xe){case"number":if(Xe>0)return dupe_number(Xe|0,Ke);break;case"object":if(typeof Xe.length=="number")return dupe_array(Xe,Ke,0);break}return[]}var dup$1=dupe,dup=dup$1;buffer$2.Buffer;globalThis.__TYPEDARRAY_POOL||(globalThis.__TYPEDARRAY_POOL={UINT8:dup([32,0]),UINT16:dup([32,0]),UINT32:dup([32,0]),BIGUINT64:dup([32,0]),INT8:dup([32,0]),INT16:dup([32,0]),INT32:dup([32,0]),BIGINT64:dup([32,0]),FLOAT:dup([32,0]),DOUBLE:dup([32,0]),DATA:dup([32,0]),UINT8C:dup([32,0]),BUFFER:dup([32,0])});var POOL=globalThis.__TYPEDARRAY_POOL;POOL.UINT8C||(POOL.UINT8C=dup([32,0]));POOL.BIGUINT64||(POOL.BIGUINT64=dup([32,0]));POOL.BIGINT64||(POOL.BIGINT64=dup([32,0]));POOL.BUFFER||(POOL.BUFFER=dup([32,0]));POOL.DATA;POOL.BUFFER;var fftMatrix={exports:{}},bits=twiddle;function fft(Xe,Ke,Ye,Je,tt,st,rt){Xe|=0,Ke|=0,Ye|=0,tt|=0,st|=0,bits.isPow2(Ye)?fftRadix2(Xe,Ke,Ye,Je,tt,st):fftBluestein(Xe,Ke,Ye,Je,tt,st,rt)}fftMatrix.exports=fft;function scratchMemory(Xe){return bits.isPow2(Xe)?0:2*Xe+4*bits.nextPow2(2*Xe+1)}fftMatrix.exports.scratchMemory=scratchMemory;function fftRadix2(Xe,Ke,Ye,Je,tt,st){Xe|=0,Ke|=0,Ye|=0,tt|=0,st|=0;var rt,it,ot,at,lt,ut,ht,pt,ft,xt,vt,At,Et,wt,_t,Ct,Tt,St,Rt,Nt,Pt,Bt,Lt,zt,Dt;for(rt=Ye,it=bits.log2(rt),St=0;St<Ke;++St){for(ht=rt>>1,lt=0,ot=0;ot<rt-1;ot++){for(ot<lt&&(Et=Je[tt+ot],Je[tt+ot]=Je[tt+lt],Je[tt+lt]=Et,Et=Je[st+ot],Je[st+ot]=Je[st+lt],Je[st+lt]=Et),ut=ht;ut<=lt;)lt-=ut,ut>>=1;lt+=ut}for(vt=-1,At=0,xt=1,pt=0;pt<it;pt++){for(ft=xt,xt<<=1,Ct=1,Tt=0,lt=0;lt<ft;lt++){for(ot=lt;ot<rt;ot+=xt)at=ot+ft,Rt=Je[tt+at],Nt=Je[st+at],Pt=Je[tt+ot],Bt=Je[st+ot],Lt=Ct*(Rt+Nt),zt=Rt*(Tt-Ct),Dt=Nt*(Ct+Tt),wt=Lt-Dt,_t=Lt+zt,Je[tt+at]=Pt-wt,Je[st+at]=Bt-_t,Je[tt+ot]+=wt,Je[st+ot]+=_t;Lt=vt*(Ct+Tt),zt=Ct*(At-vt),Dt=Tt*(vt+At),Ct=Lt-Dt,Tt=Lt+zt}At=Math.sqrt((1-vt)/2),Xe<0&&(At=-At),vt=Math.sqrt((1+vt)/2)}if(Xe<0){var Vt=1/rt;for(ot=0;ot<rt;ot++)Je[tt+ot]*=Vt,Je[st+ot]*=Vt}tt+=Ye,st+=Ye}}function fftBluestein(Xe,Ke,Ye,Je,tt,st,rt){Xe|=0,Ke|=0,Ye|=0,tt|=0,st|=0,rt|=0;var it=bits.nextPow2(2*Ye+1),ot=rt,at=ot+Ye,lt=at+Ye,ut=lt+it,ht=ut+it,pt=ht+it,ft=-Xe*Math.PI/Ye,xt,vt,At,Et,wt,_t,Ct,Tt,St;for(St=0;St<Ye;++St)vt=ft*(St*St%(Ye*2)),Et=Math.cos(vt),wt=Math.sin(vt),Je[ht+(it-St)]=Je[ht+St]=Je[ot+St]=Et,Je[pt+(it-St)]=Je[pt+St]=Je[at+St]=wt;for(St=Ye;St<=it-Ye;++St)Je[ht+St]=0;for(St=Ye;St<=it-Ye;++St)Je[pt+St]=0;for(fftRadix2(1,1,it,Je,ht,pt),Xe<0?ft=1/Ye:ft=1,xt=0;xt<Ke;++xt){for(St=0;St<Ye;++St)vt=Je[tt+St],At=Je[st+St],Et=Je[ot+St],wt=-Je[at+St],_t=Et*(vt+At),Ct=vt*(wt-Et),Tt=At*(Et+wt),Je[lt+St]=_t-Tt,Je[ut+St]=_t+Ct;for(St=Ye;St<it;++St)Je[lt+St]=0;for(St=Ye;St<it;++St)Je[ut+St]=0;for(fftRadix2(1,1,it,Je,lt,ut),St=0;St<it;++St)vt=Je[lt+St],At=Je[ut+St],Et=Je[ht+St],wt=Je[pt+St],_t=Et*(vt+At),Ct=vt*(wt-Et),Tt=At*(Et+wt),Je[lt+St]=_t-Tt,Je[ut+St]=_t+Ct;for(fftRadix2(-1,1,it,Je,lt,ut),St=0;St<Ye;++St)vt=Je[lt+St],At=Je[ut+St],Et=Je[ot+St],wt=-Je[at+St],_t=Et*(vt+At),Ct=vt*(wt-Et),Tt=At*(Et+wt),Je[tt+St]=ft*(_t-Tt),Je[st+St]=ft*(_t+Ct);tt+=Ye,st+=Ye}}var esprima$1={};(function(Xe){(function(Ke,Ye){Ye(Xe)})(commonjsGlobal,function(Ke){var Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht,pt,ft,xt,vt,At,Et,wt;Ye={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},Je={},Je[Ye.BooleanLiteral]="Boolean",Je[Ye.EOF]="<end>",Je[Ye.Identifier]="Identifier",Je[Ye.Keyword]="Keyword",Je[Ye.NullLiteral]="Null",Je[Ye.NumericLiteral]="Numeric",Je[Ye.Punctuator]="Punctuator",Je[Ye.StringLiteral]="String",Je[Ye.RegularExpression]="RegularExpression",tt=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],st={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},rt={Data:1,Get:2,Set:4},it={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},ot={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function _t(kt,Ut){if(!kt)throw new Error("ASSERT: "+Ut)}function Ct(kt){return kt>=48&&kt<=57}function Tt(kt){return"0123456789abcdefABCDEF".indexOf(kt)>=0}function St(kt){return"01234567".indexOf(kt)>=0}function Rt(kt){return kt===32||kt===9||kt===11||kt===12||kt===160||kt>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(kt)>=0}function Nt(kt){return kt===10||kt===13||kt===8232||kt===8233}function Pt(kt){return kt===36||kt===95||kt>=65&&kt<=90||kt>=97&&kt<=122||kt===92||kt>=128&&ot.NonAsciiIdentifierStart.test(String.fromCharCode(kt))}function Bt(kt){return kt===36||kt===95||kt>=65&&kt<=90||kt>=97&&kt<=122||kt>=48&&kt<=57||kt===92||kt>=128&&ot.NonAsciiIdentifierPart.test(String.fromCharCode(kt))}function Lt(kt){switch(kt){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function zt(kt){switch(kt){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function Dt(kt){return kt==="eval"||kt==="arguments"}function Vt(kt){if(ut&&zt(kt))return!0;switch(kt.length){case 2:return kt==="if"||kt==="in"||kt==="do";case 3:return kt==="var"||kt==="for"||kt==="new"||kt==="try"||kt==="let";case 4:return kt==="this"||kt==="else"||kt==="case"||kt==="void"||kt==="with"||kt==="enum";case 5:return kt==="while"||kt==="break"||kt==="catch"||kt==="throw"||kt==="const"||kt==="yield"||kt==="class"||kt==="super";case 6:return kt==="return"||kt==="typeof"||kt==="delete"||kt==="switch"||kt==="export"||kt==="import";case 7:return kt==="default"||kt==="finally"||kt==="extends";case 8:return kt==="function"||kt==="continue"||kt==="debugger";case 10:return kt==="instanceof";default:return!1}}function Gt(kt,Ut,tn,xn,Rn){var jn;_t(typeof tn=="number","Comment must have valid position"),!(Et.lastCommentStart>=tn)&&(Et.lastCommentStart=tn,jn={type:kt,value:Ut},wt.range&&(jn.range=[tn,xn]),wt.loc&&(jn.loc=Rn),wt.comments.push(jn),wt.attachComment&&(wt.leadingComments.push(jn),wt.trailingComments.push(jn)))}function Qt(kt){var Ut,tn,xn,Rn;for(Ut=ht-kt,tn={start:{line:pt,column:ht-ft-kt}};ht<xt;)if(xn=lt.charCodeAt(ht),++ht,Nt(xn)){wt.comments&&(Rn=lt.slice(Ut+kt,ht-1),tn.end={line:pt,column:ht-ft-1},Gt("Line",Rn,Ut,ht-1,tn)),xn===13&&lt.charCodeAt(ht)===10&&++ht,++pt,ft=ht;return}wt.comments&&(Rn=lt.slice(Ut+kt,ht),tn.end={line:pt,column:ht-ft},Gt("Line",Rn,Ut,ht,tn))}function jt(){var kt,Ut,tn,xn;for(wt.comments&&(kt=ht-2,Ut={start:{line:pt,column:ht-ft-2}});ht<xt;)if(tn=lt.charCodeAt(ht),Nt(tn))tn===13&&lt.charCodeAt(ht+1)===10&&++ht,++pt,++ht,ft=ht,ht>=xt&&Un({},it.UnexpectedToken,"ILLEGAL");else if(tn===42){if(lt.charCodeAt(ht+1)===47){++ht,++ht,wt.comments&&(xn=lt.slice(kt+2,ht-2),Ut.end={line:pt,column:ht-ft},Gt("Block",xn,kt,ht,Ut));return}++ht}else++ht;Un({},it.UnexpectedToken,"ILLEGAL")}function Ht(){var kt,Ut;for(Ut=ht===0;ht<xt;)if(kt=lt.charCodeAt(ht),Rt(kt))++ht;else if(Nt(kt))++ht,kt===13&&lt.charCodeAt(ht)===10&&++ht,++pt,ft=ht,Ut=!0;else if(kt===47)if(kt=lt.charCodeAt(ht+1),kt===47)++ht,++ht,Qt(2),Ut=!0;else if(kt===42)++ht,++ht,jt();else break;else if(Ut&&kt===45)if(lt.charCodeAt(ht+1)===45&&lt.charCodeAt(ht+2)===62)ht+=3,Qt(3);else break;else if(kt===60)if(lt.slice(ht+1,ht+4)==="!--")++ht,++ht,++ht,++ht,Qt(4);else break;else break}function Yt(kt){var Ut,tn,xn,Rn=0;for(tn=kt==="u"?4:2,Ut=0;Ut<tn;++Ut)if(ht<xt&&Tt(lt[ht]))xn=lt[ht++],Rn=Rn*16+"0123456789abcdef".indexOf(xn.toLowerCase());else return"";return String.fromCharCode(Rn)}function Jt(){var kt,Ut;for(kt=lt.charCodeAt(ht++),Ut=String.fromCharCode(kt),kt===92&&(lt.charCodeAt(ht)!==117&&Un({},it.UnexpectedToken,"ILLEGAL"),++ht,kt=Yt("u"),(!kt||kt==="\\"||!Pt(kt.charCodeAt(0)))&&Un({},it.UnexpectedToken,"ILLEGAL"),Ut=kt);ht<xt&&(kt=lt.charCodeAt(ht),!!Bt(kt));)++ht,Ut+=String.fromCharCode(kt),kt===92&&(Ut=Ut.substr(0,Ut.length-1),lt.charCodeAt(ht)!==117&&Un({},it.UnexpectedToken,"ILLEGAL"),++ht,kt=Yt("u"),(!kt||kt==="\\"||!Bt(kt.charCodeAt(0)))&&Un({},it.UnexpectedToken,"ILLEGAL"),Ut+=kt);return Ut}function Zt(){var kt,Ut;for(kt=ht++;ht<xt;){if(Ut=lt.charCodeAt(ht),Ut===92)return ht=kt,Jt();if(Bt(Ut))++ht;else break}return lt.slice(kt,ht)}function nn(){var kt,Ut,tn;return kt=ht,Ut=lt.charCodeAt(ht)===92?Jt():Zt(),Ut.length===1?tn=Ye.Identifier:Vt(Ut)?tn=Ye.Keyword:Ut==="null"?tn=Ye.NullLiteral:Ut==="true"||Ut==="false"?tn=Ye.BooleanLiteral:tn=Ye.Identifier,{type:tn,value:Ut,lineNumber:pt,lineStart:ft,start:kt,end:ht}}function cn(){var kt=ht,Ut=lt.charCodeAt(ht),tn,xn=lt[ht],Rn,jn,rs;switch(Ut){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ht,wt.tokenize&&(Ut===40?wt.openParenToken=wt.tokens.length:Ut===123&&(wt.openCurlyToken=wt.tokens.length)),{type:Ye.Punctuator,value:String.fromCharCode(Ut),lineNumber:pt,lineStart:ft,start:kt,end:ht};default:if(tn=lt.charCodeAt(ht+1),tn===61)switch(Ut){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ht+=2,{type:Ye.Punctuator,value:String.fromCharCode(Ut)+String.fromCharCode(tn),lineNumber:pt,lineStart:ft,start:kt,end:ht};case 33:case 61:return ht+=2,lt.charCodeAt(ht)===61&&++ht,{type:Ye.Punctuator,value:lt.slice(kt,ht),lineNumber:pt,lineStart:ft,start:kt,end:ht}}}if(rs=lt.substr(ht,4),rs===">>>=")return ht+=4,{type:Ye.Punctuator,value:rs,lineNumber:pt,lineStart:ft,start:kt,end:ht};if(jn=rs.substr(0,3),jn===">>>"||jn==="<<="||jn===">>=")return ht+=3,{type:Ye.Punctuator,value:jn,lineNumber:pt,lineStart:ft,start:kt,end:ht};if(Rn=jn.substr(0,2),xn===Rn[1]&&"+-<>&|".indexOf(xn)>=0||Rn==="=>")return ht+=2,{type:Ye.Punctuator,value:Rn,lineNumber:pt,lineStart:ft,start:kt,end:ht};if("<>=!+-*%&|^/".indexOf(xn)>=0)return++ht,{type:Ye.Punctuator,value:xn,lineNumber:pt,lineStart:ft,start:kt,end:ht};Un({},it.UnexpectedToken,"ILLEGAL")}function an(kt){for(var Ut="";ht<xt&&Tt(lt[ht]);)Ut+=lt[ht++];return Ut.length===0&&Un({},it.UnexpectedToken,"ILLEGAL"),Pt(lt.charCodeAt(ht))&&Un({},it.UnexpectedToken,"ILLEGAL"),{type:Ye.NumericLiteral,value:parseInt("0x"+Ut,16),lineNumber:pt,lineStart:ft,start:kt,end:ht}}function mn(kt){for(var Ut="0"+lt[ht++];ht<xt&&St(lt[ht]);)Ut+=lt[ht++];return(Pt(lt.charCodeAt(ht))||Ct(lt.charCodeAt(ht)))&&Un({},it.UnexpectedToken,"ILLEGAL"),{type:Ye.NumericLiteral,value:parseInt(Ut,8),octal:!0,lineNumber:pt,lineStart:ft,start:kt,end:ht}}function dn(){var kt,Ut;for(kt=ht+1;kt<xt;++kt){if(Ut=lt[kt],Ut==="8"||Ut==="9")return!1;if(!St(Ut))return!0}return!0}function fn(){var kt,Ut,tn;if(tn=lt[ht],_t(Ct(tn.charCodeAt(0))||tn===".","Numeric literal must start with a decimal digit or a decimal point"),Ut=ht,kt="",tn!=="."){if(kt=lt[ht++],tn=lt[ht],kt==="0"){if(tn==="x"||tn==="X")return++ht,an(Ut);if(St(tn)&&dn())return mn(Ut)}for(;Ct(lt.charCodeAt(ht));)kt+=lt[ht++];tn=lt[ht]}if(tn==="."){for(kt+=lt[ht++];Ct(lt.charCodeAt(ht));)kt+=lt[ht++];tn=lt[ht]}if(tn==="e"||tn==="E")if(kt+=lt[ht++],tn=lt[ht],(tn==="+"||tn==="-")&&(kt+=lt[ht++]),Ct(lt.charCodeAt(ht)))for(;Ct(lt.charCodeAt(ht));)kt+=lt[ht++];else Un({},it.UnexpectedToken,"ILLEGAL");return Pt(lt.charCodeAt(ht))&&Un({},it.UnexpectedToken,"ILLEGAL"),{type:Ye.NumericLiteral,value:parseFloat(kt),lineNumber:pt,lineStart:ft,start:Ut,end:ht}}function Sn(){var kt="",Ut,tn,xn,Rn,jn,rs,fs=!1,$s,Ds;for($s=pt,Ds=ft,Ut=lt[ht],_t(Ut==="'"||Ut==='"',"String literal must starts with a quote"),tn=ht,++ht;ht<xt;)if(xn=lt[ht++],xn===Ut){Ut="";break}else if(xn==="\\")if(xn=lt[ht++],!xn||!Nt(xn.charCodeAt(0)))switch(xn){case"u":case"x":rs=ht,jn=Yt(xn),jn?kt+=jn:(ht=rs,kt+=xn);break;case"n":kt+=`
`;break;case"r":kt+="\r";break;case"t":kt+="	";break;case"b":kt+="\b";break;case"f":kt+="\f";break;case"v":kt+="\v";break;default:St(xn)?(Rn="01234567".indexOf(xn),Rn!==0&&(fs=!0),ht<xt&&St(lt[ht])&&(fs=!0,Rn=Rn*8+"01234567".indexOf(lt[ht++]),"0123".indexOf(xn)>=0&&ht<xt&&St(lt[ht])&&(Rn=Rn*8+"01234567".indexOf(lt[ht++]))),kt+=String.fromCharCode(Rn)):kt+=xn;break}else++pt,xn==="\r"&&lt[ht]===`
`&&++ht,ft=ht;else{if(Nt(xn.charCodeAt(0)))break;kt+=xn}return Ut!==""&&Un({},it.UnexpectedToken,"ILLEGAL"),{type:Ye.StringLiteral,value:kt,octal:fs,startLineNumber:$s,startLineStart:Ds,lineNumber:pt,lineStart:ft,start:tn,end:ht}}function Tn(kt,Ut){var tn;try{tn=new RegExp(kt,Ut)}catch{Un({},it.InvalidRegExp)}return tn}function Nn(){var kt,Ut,tn,xn,Rn;for(kt=lt[ht],_t(kt==="/","Regular expression literal must start with a slash"),Ut=lt[ht++],tn=!1,xn=!1;ht<xt;)if(kt=lt[ht++],Ut+=kt,kt==="\\")kt=lt[ht++],Nt(kt.charCodeAt(0))&&Un({},it.UnterminatedRegExp),Ut+=kt;else if(Nt(kt.charCodeAt(0)))Un({},it.UnterminatedRegExp);else if(tn)kt==="]"&&(tn=!1);else if(kt==="/"){xn=!0;break}else kt==="["&&(tn=!0);return xn||Un({},it.UnterminatedRegExp),Rn=Ut.substr(1,Ut.length-2),{value:Rn,literal:Ut}}function gn(){var kt,Ut,tn,xn;for(Ut="",tn="";ht<xt&&(kt=lt[ht],!!Bt(kt.charCodeAt(0)));)if(++ht,kt==="\\"&&ht<xt)if(kt=lt[ht],kt==="u"){if(++ht,xn=ht,kt=Yt("u"),kt)for(tn+=kt,Ut+="\\u";xn<ht;++xn)Ut+=lt[xn];else ht=xn,tn+="u",Ut+="\\u";Kn({},it.UnexpectedToken,"ILLEGAL")}else Ut+="\\",Kn({},it.UnexpectedToken,"ILLEGAL");else tn+=kt,Ut+=kt;return{value:tn,literal:Ut}}function _n(){var kt,Ut,tn,xn;return At=null,Ht(),kt=ht,Ut=Nn(),tn=gn(),xn=Tn(Ut.value,tn.value),wt.tokenize?{type:Ye.RegularExpression,value:xn,lineNumber:pt,lineStart:ft,start:kt,end:ht}:{literal:Ut.literal+tn.literal,value:xn,start:kt,end:ht}}function kn(){var kt,Ut,tn,xn;return Ht(),kt=ht,Ut={start:{line:pt,column:ht-ft}},tn=_n(),Ut.end={line:pt,column:ht-ft},wt.tokenize||(wt.tokens.length>0&&(xn=wt.tokens[wt.tokens.length-1],xn.range[0]===kt&&xn.type==="Punctuator"&&(xn.value==="/"||xn.value==="/=")&&wt.tokens.pop()),wt.tokens.push({type:"RegularExpression",value:tn.literal,range:[kt,ht],loc:Ut})),tn}function Wt(kt){return kt.type===Ye.Identifier||kt.type===Ye.Keyword||kt.type===Ye.BooleanLiteral||kt.type===Ye.NullLiteral}function sn(){var kt,Ut;if(kt=wt.tokens[wt.tokens.length-1],!kt)return kn();if(kt.type==="Punctuator"){if(kt.value==="]")return cn();if(kt.value===")")return Ut=wt.tokens[wt.openParenToken-1],Ut&&Ut.type==="Keyword"&&(Ut.value==="if"||Ut.value==="while"||Ut.value==="for"||Ut.value==="with")?kn():cn();if(kt.value==="}"){if(wt.tokens[wt.openCurlyToken-3]&&wt.tokens[wt.openCurlyToken-3].type==="Keyword"){if(Ut=wt.tokens[wt.openCurlyToken-4],!Ut)return cn()}else if(wt.tokens[wt.openCurlyToken-4]&&wt.tokens[wt.openCurlyToken-4].type==="Keyword"){if(Ut=wt.tokens[wt.openCurlyToken-5],!Ut)return kn()}else return cn();return tt.indexOf(Ut.value)>=0?cn():kn()}return kn()}return kt.type==="Keyword"&&kt.value!=="this"?kn():cn()}function hn(){var kt;return Ht(),ht>=xt?{type:Ye.EOF,lineNumber:pt,lineStart:ft,start:ht,end:ht}:(kt=lt.charCodeAt(ht),Pt(kt)?nn():kt===40||kt===41||kt===59?cn():kt===39||kt===34?Sn():kt===46?Ct(lt.charCodeAt(ht+1))?fn():cn():Ct(kt)?fn():wt.tokenize&&kt===47?sn():cn())}function En(){var kt,Ut,tn;return Ht(),kt={start:{line:pt,column:ht-ft}},Ut=hn(),kt.end={line:pt,column:ht-ft},Ut.type!==Ye.EOF&&(tn=lt.slice(Ut.start,Ut.end),wt.tokens.push({type:Je[Ut.type],value:tn,range:[Ut.start,Ut.end],loc:kt})),Ut}function An(){var kt;return kt=At,ht=kt.end,pt=kt.lineNumber,ft=kt.lineStart,At=typeof wt.tokens<"u"?En():hn(),ht=kt.end,pt=kt.lineNumber,ft=kt.lineStart,kt}function wn(){var kt,Ut,tn;kt=ht,Ut=pt,tn=ft,At=typeof wt.tokens<"u"?En():hn(),ht=kt,pt=Ut,ft=tn}function Fn(kt,Ut){this.line=kt,this.column=Ut}function Hn(kt,Ut,tn,xn){this.start=new Fn(kt,Ut),this.end=new Fn(tn,xn)}at={name:"SyntaxTree",processComment:function(kt){var Ut,tn;if(!(kt.type===st.Program&&kt.body.length>0)){for(wt.trailingComments.length>0?wt.trailingComments[0].range[0]>=kt.range[1]?(tn=wt.trailingComments,wt.trailingComments=[]):wt.trailingComments.length=0:wt.bottomRightStack.length>0&&wt.bottomRightStack[wt.bottomRightStack.length-1].trailingComments&&wt.bottomRightStack[wt.bottomRightStack.length-1].trailingComments[0].range[0]>=kt.range[1]&&(tn=wt.bottomRightStack[wt.bottomRightStack.length-1].trailingComments,delete wt.bottomRightStack[wt.bottomRightStack.length-1].trailingComments);wt.bottomRightStack.length>0&&wt.bottomRightStack[wt.bottomRightStack.length-1].range[0]>=kt.range[0];)Ut=wt.bottomRightStack.pop();Ut?Ut.leadingComments&&Ut.leadingComments[Ut.leadingComments.length-1].range[1]<=kt.range[0]&&(kt.leadingComments=Ut.leadingComments,delete Ut.leadingComments):wt.leadingComments.length>0&&wt.leadingComments[wt.leadingComments.length-1].range[1]<=kt.range[0]&&(kt.leadingComments=wt.leadingComments,wt.leadingComments=[]),tn&&(kt.trailingComments=tn),wt.bottomRightStack.push(kt)}},markEnd:function(kt,Ut){return wt.range&&(kt.range=[Ut.start,ht]),wt.loc&&(kt.loc=new Hn(Ut.startLineNumber===void 0?Ut.lineNumber:Ut.startLineNumber,Ut.start-(Ut.startLineStart===void 0?Ut.lineStart:Ut.startLineStart),pt,ht-ft),this.postProcess(kt)),wt.attachComment&&this.processComment(kt),kt},postProcess:function(kt){return wt.source&&(kt.loc.source=wt.source),kt},createArrayExpression:function(kt){return{type:st.ArrayExpression,elements:kt}},createAssignmentExpression:function(kt,Ut,tn){return{type:st.AssignmentExpression,operator:kt,left:Ut,right:tn}},createBinaryExpression:function(kt,Ut,tn){var xn=kt==="||"||kt==="&&"?st.LogicalExpression:st.BinaryExpression;return{type:xn,operator:kt,left:Ut,right:tn}},createBlockStatement:function(kt){return{type:st.BlockStatement,body:kt}},createBreakStatement:function(kt){return{type:st.BreakStatement,label:kt}},createCallExpression:function(kt,Ut){return{type:st.CallExpression,callee:kt,arguments:Ut}},createCatchClause:function(kt,Ut){return{type:st.CatchClause,param:kt,body:Ut}},createConditionalExpression:function(kt,Ut,tn){return{type:st.ConditionalExpression,test:kt,consequent:Ut,alternate:tn}},createContinueStatement:function(kt){return{type:st.ContinueStatement,label:kt}},createDebuggerStatement:function(){return{type:st.DebuggerStatement}},createDoWhileStatement:function(kt,Ut){return{type:st.DoWhileStatement,body:kt,test:Ut}},createEmptyStatement:function(){return{type:st.EmptyStatement}},createExpressionStatement:function(kt){return{type:st.ExpressionStatement,expression:kt}},createForStatement:function(kt,Ut,tn,xn){return{type:st.ForStatement,init:kt,test:Ut,update:tn,body:xn}},createForInStatement:function(kt,Ut,tn){return{type:st.ForInStatement,left:kt,right:Ut,body:tn,each:!1}},createFunctionDeclaration:function(kt,Ut,tn,xn){return{type:st.FunctionDeclaration,id:kt,params:Ut,defaults:tn,body:xn,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(kt,Ut,tn,xn){return{type:st.FunctionExpression,id:kt,params:Ut,defaults:tn,body:xn,rest:null,generator:!1,expression:!1}},createIdentifier:function(kt){return{type:st.Identifier,name:kt}},createIfStatement:function(kt,Ut,tn){return{type:st.IfStatement,test:kt,consequent:Ut,alternate:tn}},createLabeledStatement:function(kt,Ut){return{type:st.LabeledStatement,label:kt,body:Ut}},createLiteral:function(kt){return{type:st.Literal,value:kt.value,raw:lt.slice(kt.start,kt.end)}},createMemberExpression:function(kt,Ut,tn){return{type:st.MemberExpression,computed:kt==="[",object:Ut,property:tn}},createNewExpression:function(kt,Ut){return{type:st.NewExpression,callee:kt,arguments:Ut}},createObjectExpression:function(kt){return{type:st.ObjectExpression,properties:kt}},createPostfixExpression:function(kt,Ut){return{type:st.UpdateExpression,operator:kt,argument:Ut,prefix:!1}},createProgram:function(kt){return{type:st.Program,body:kt}},createProperty:function(kt,Ut,tn){return{type:st.Property,key:Ut,value:tn,kind:kt}},createReturnStatement:function(kt){return{type:st.ReturnStatement,argument:kt}},createSequenceExpression:function(kt){return{type:st.SequenceExpression,expressions:kt}},createSwitchCase:function(kt,Ut){return{type:st.SwitchCase,test:kt,consequent:Ut}},createSwitchStatement:function(kt,Ut){return{type:st.SwitchStatement,discriminant:kt,cases:Ut}},createThisExpression:function(){return{type:st.ThisExpression}},createThrowStatement:function(kt){return{type:st.ThrowStatement,argument:kt}},createTryStatement:function(kt,Ut,tn,xn){return{type:st.TryStatement,block:kt,guardedHandlers:Ut,handlers:tn,finalizer:xn}},createUnaryExpression:function(kt,Ut){return kt==="++"||kt==="--"?{type:st.UpdateExpression,operator:kt,argument:Ut,prefix:!0}:{type:st.UnaryExpression,operator:kt,argument:Ut,prefix:!0}},createVariableDeclaration:function(kt,Ut){return{type:st.VariableDeclaration,declarations:kt,kind:Ut}},createVariableDeclarator:function(kt,Ut){return{type:st.VariableDeclarator,id:kt,init:Ut}},createWhileStatement:function(kt,Ut){return{type:st.WhileStatement,test:kt,body:Ut}},createWithStatement:function(kt,Ut){return{type:st.WithStatement,object:kt,body:Ut}}};function Yn(){var kt,Ut,tn,xn;return kt=ht,Ut=pt,tn=ft,Ht(),xn=pt!==Ut,ht=kt,pt=Ut,ft=tn,xn}function Un(kt,Ut){var tn,xn=Array.prototype.slice.call(arguments,2),Rn=Ut.replace(/%(\d)/g,function(jn,rs){return _t(rs<xn.length,"Message reference must be in range"),xn[rs]});throw typeof kt.lineNumber=="number"?(tn=new Error("Line "+kt.lineNumber+": "+Rn),tn.index=kt.start,tn.lineNumber=kt.lineNumber,tn.column=kt.start-ft+1):(tn=new Error("Line "+pt+": "+Rn),tn.index=ht,tn.lineNumber=pt,tn.column=ht-ft+1),tn.description=Rn,tn}function Kn(){try{Un.apply(null,arguments)}catch(kt){if(wt.errors)wt.errors.push(kt);else throw kt}}function hs(kt){if(kt.type===Ye.EOF&&Un(kt,it.UnexpectedEOS),kt.type===Ye.NumericLiteral&&Un(kt,it.UnexpectedNumber),kt.type===Ye.StringLiteral&&Un(kt,it.UnexpectedString),kt.type===Ye.Identifier&&Un(kt,it.UnexpectedIdentifier),kt.type===Ye.Keyword){if(Lt(kt.value))Un(kt,it.UnexpectedReserved);else if(ut&&zt(kt.value)){Kn(kt,it.StrictReservedWord);return}Un(kt,it.UnexpectedToken,kt.value)}Un(kt,it.UnexpectedToken,kt.value)}function zn(kt){var Ut=An();(Ut.type!==Ye.Punctuator||Ut.value!==kt)&&hs(Ut)}function es(kt){var Ut=An();(Ut.type!==Ye.Keyword||Ut.value!==kt)&&hs(Ut)}function bn(kt){return At.type===Ye.Punctuator&&At.value===kt}function pn(kt){return At.type===Ye.Keyword&&At.value===kt}function Ln(){var kt;return At.type!==Ye.Punctuator?!1:(kt=At.value,kt==="="||kt==="*="||kt==="/="||kt==="%="||kt==="+="||kt==="-="||kt==="<<="||kt===">>="||kt===">>>="||kt==="&="||kt==="^="||kt==="|=")}function Mn(){var kt,Ut=ht,tn=pt,xn=ft,Rn=At;if(lt.charCodeAt(ht)===59||bn(";")){An();return}if(kt=pt,Ht(),pt!==kt){ht=Ut,pt=tn,ft=xn,At=Rn;return}At.type!==Ye.EOF&&!bn("}")&&hs(At)}function ls(kt){return kt.type===st.Identifier||kt.type===st.MemberExpression}function _s(){var kt=[],Ut;for(Ut=At,zn("[");!bn("]");)bn(",")?(An(),kt.push(null)):(kt.push(Ws()),bn("]")||zn(","));return An(),vt.markEnd(vt.createArrayExpression(kt),Ut)}function as(kt,Ut){var tn,xn,Rn;return tn=ut,Rn=At,xn=Ci(),Ut&&ut&&Dt(kt[0].name)&&Kn(Ut,it.StrictParamName),ut=tn,vt.markEnd(vt.createFunctionExpression(null,kt,[],xn),Rn)}function In(){var kt,Ut;return Ut=At,kt=An(),kt.type===Ye.StringLiteral||kt.type===Ye.NumericLiteral?(ut&&kt.octal&&Kn(kt,it.StrictOctalLiteral),vt.markEnd(vt.createLiteral(kt),Ut)):vt.markEnd(vt.createIdentifier(kt.value),Ut)}function Pn(){var kt,Ut,tn,xn,Rn,jn;if(kt=At,jn=At,kt.type===Ye.Identifier)return tn=In(),kt.value==="get"&&!bn(":")?(Ut=In(),zn("("),zn(")"),xn=as([]),vt.markEnd(vt.createProperty("get",Ut,xn),jn)):kt.value==="set"&&!bn(":")?(Ut=In(),zn("("),kt=At,kt.type!==Ye.Identifier?(zn(")"),Kn(kt,it.UnexpectedToken,kt.value),xn=as([])):(Rn=[Er()],zn(")"),xn=as(Rn,kt)),vt.markEnd(vt.createProperty("set",Ut,xn),jn)):(zn(":"),xn=Ws(),vt.markEnd(vt.createProperty("init",tn,xn),jn));if(kt.type===Ye.EOF||kt.type===Ye.Punctuator)hs(kt);else return Ut=In(),zn(":"),xn=Ws(),vt.markEnd(vt.createProperty("init",Ut,xn),jn)}function qn(){var kt=[],Ut,tn,xn,Rn,jn={},rs=String,fs;for(fs=At,zn("{");!bn("}");)Ut=Pn(),Ut.key.type===st.Identifier?tn=Ut.key.name:tn=rs(Ut.key.value),Rn=Ut.kind==="init"?rt.Data:Ut.kind==="get"?rt.Get:rt.Set,xn="$"+tn,Object.prototype.hasOwnProperty.call(jn,xn)?(jn[xn]===rt.Data?ut&&Rn===rt.Data?Kn({},it.StrictDuplicateProperty):Rn!==rt.Data&&Kn({},it.AccessorDataProperty):Rn===rt.Data?Kn({},it.AccessorDataProperty):jn[xn]&Rn&&Kn({},it.AccessorGetSet),jn[xn]|=Rn):jn[xn]=Rn,kt.push(Ut),bn("}")||zn(",");return zn("}"),vt.markEnd(vt.createObjectExpression(kt),fs)}function Wn(){var kt;return zn("("),kt=Ms(),zn(")"),kt}function ts(){var kt,Ut,tn,xn;if(bn("("))return Wn();if(bn("["))return _s();if(bn("{"))return qn();if(kt=At.type,xn=At,kt===Ye.Identifier)tn=vt.createIdentifier(An().value);else if(kt===Ye.StringLiteral||kt===Ye.NumericLiteral)ut&&At.octal&&Kn(At,it.StrictOctalLiteral),tn=vt.createLiteral(An());else if(kt===Ye.Keyword){if(pn("function"))return Zi();pn("this")?(An(),tn=vt.createThisExpression()):hs(An())}else kt===Ye.BooleanLiteral?(Ut=An(),Ut.value=Ut.value==="true",tn=vt.createLiteral(Ut)):kt===Ye.NullLiteral?(Ut=An(),Ut.value=null,tn=vt.createLiteral(Ut)):bn("/")||bn("/=")?(typeof wt.tokens<"u"?tn=vt.createLiteral(kn()):tn=vt.createLiteral(_n()),wn()):hs(An());return vt.markEnd(tn,xn)}function us(){var kt=[];if(zn("("),!bn(")"))for(;ht<xt&&(kt.push(Ws()),!bn(")"));)zn(",");return zn(")"),kt}function xs(){var kt,Ut;return Ut=At,kt=An(),Wt(kt)||hs(kt),vt.markEnd(vt.createIdentifier(kt.value),Ut)}function vs(){return zn("."),xs()}function gs(){var kt;return zn("["),kt=Ms(),zn("]"),kt}function Ss(){var kt,Ut,tn;return tn=At,es("new"),kt=Is(),Ut=bn("(")?us():[],vt.markEnd(vt.createNewExpression(kt,Ut),tn)}function Es(){var kt,Ut,tn,xn,Rn=Et.allowIn;for(xn=At,Et.allowIn=!0,kt=pn("new")?Ss():ts();;){if(bn("."))tn=vs(),kt=vt.createMemberExpression(".",kt,tn);else if(bn("("))Ut=us(),kt=vt.createCallExpression(kt,Ut);else if(bn("["))tn=gs(),kt=vt.createMemberExpression("[",kt,tn);else break;vt.markEnd(kt,xn)}return Et.allowIn=Rn,kt}function Is(){var kt,Ut,tn;for(_t(Et.allowIn,"callee of new expression always allow in keyword."),tn=At,kt=pn("new")?Ss():ts();bn(".")||bn("[");)bn("[")?(Ut=gs(),kt=vt.createMemberExpression("[",kt,Ut)):(Ut=vs(),kt=vt.createMemberExpression(".",kt,Ut)),vt.markEnd(kt,tn);return kt}function qs(){var kt,Ut,tn=At;return kt=Es(),At.type===Ye.Punctuator&&(bn("++")||bn("--"))&&!Yn()&&(ut&&kt.type===st.Identifier&&Dt(kt.name)&&Kn({},it.StrictLHSPostfix),ls(kt)||Kn({},it.InvalidLHSInAssignment),Ut=An(),kt=vt.markEnd(vt.createPostfixExpression(Ut.value,kt),tn)),kt}function Vs(){var kt,Ut,tn;return At.type!==Ye.Punctuator&&At.type!==Ye.Keyword?Ut=qs():bn("++")||bn("--")?(tn=At,kt=An(),Ut=Vs(),ut&&Ut.type===st.Identifier&&Dt(Ut.name)&&Kn({},it.StrictLHSPrefix),ls(Ut)||Kn({},it.InvalidLHSInAssignment),Ut=vt.createUnaryExpression(kt.value,Ut),Ut=vt.markEnd(Ut,tn)):bn("+")||bn("-")||bn("~")||bn("!")?(tn=At,kt=An(),Ut=Vs(),Ut=vt.createUnaryExpression(kt.value,Ut),Ut=vt.markEnd(Ut,tn)):pn("delete")||pn("void")||pn("typeof")?(tn=At,kt=An(),Ut=Vs(),Ut=vt.createUnaryExpression(kt.value,Ut),Ut=vt.markEnd(Ut,tn),ut&&Ut.operator==="delete"&&Ut.argument.type===st.Identifier&&Kn({},it.StrictDelete)):Ut=qs(),Ut}function Sr(kt,Ut){var tn=0;if(kt.type!==Ye.Punctuator&&kt.type!==Ye.Keyword)return 0;switch(kt.value){case"||":tn=1;break;case"&&":tn=2;break;case"|":tn=3;break;case"^":tn=4;break;case"&":tn=5;break;case"==":case"!=":case"===":case"!==":tn=6;break;case"<":case">":case"<=":case">=":case"instanceof":tn=7;break;case"in":tn=Ut?7:0;break;case"<<":case">>":case">>>":tn=8;break;case"+":case"-":tn=9;break;case"*":case"/":case"%":tn=11;break}return tn}function Pr(){var kt,Ut,tn,xn,Rn,jn,rs,fs,$s,Ds;if(kt=At,$s=Vs(),xn=At,Rn=Sr(xn,Et.allowIn),Rn===0)return $s;for(xn.prec=Rn,An(),Ut=[kt,At],rs=Vs(),jn=[$s,xn,rs];(Rn=Sr(At,Et.allowIn))>0;){for(;jn.length>2&&Rn<=jn[jn.length-2].prec;)rs=jn.pop(),fs=jn.pop().value,$s=jn.pop(),tn=vt.createBinaryExpression(fs,$s,rs),Ut.pop(),kt=Ut[Ut.length-1],vt.markEnd(tn,kt),jn.push(tn);xn=An(),xn.prec=Rn,jn.push(xn),Ut.push(At),tn=Vs(),jn.push(tn)}for(Ds=jn.length-1,tn=jn[Ds],Ut.pop();Ds>1;)tn=vt.createBinaryExpression(jn[Ds-1].value,jn[Ds-2],tn),Ds-=2,kt=Ut.pop(),vt.markEnd(tn,kt);return tn}function ri(){var kt,Ut,tn,xn,Rn;return Rn=At,kt=Pr(),bn("?")&&(An(),Ut=Et.allowIn,Et.allowIn=!0,tn=Ws(),Et.allowIn=Ut,zn(":"),xn=Ws(),kt=vt.createConditionalExpression(kt,tn,xn),vt.markEnd(kt,Rn)),kt}function Ws(){var kt,Ut,tn,xn,Rn;return kt=At,Rn=At,xn=Ut=ri(),Ln()&&(ls(Ut)||Kn({},it.InvalidLHSInAssignment),ut&&Ut.type===st.Identifier&&Dt(Ut.name)&&Kn(kt,it.StrictLHSAssignment),kt=An(),tn=Ws(),xn=vt.markEnd(vt.createAssignmentExpression(kt.value,Ut,tn),Rn)),xn}function Ms(){var kt,Ut=At;if(kt=Ws(),bn(",")){for(kt=vt.createSequenceExpression([kt]);ht<xt&&bn(",");)An(),kt.expressions.push(Ws());vt.markEnd(kt,Ut)}return kt}function Vo(){for(var kt=[],Ut;ht<xt&&!(bn("}")||(Ut=Br(),typeof Ut>"u"));)kt.push(Ut);return kt}function ii(){var kt,Ut;return Ut=At,zn("{"),kt=Vo(),zn("}"),vt.markEnd(vt.createBlockStatement(kt),Ut)}function Er(){var kt,Ut;return Ut=At,kt=An(),kt.type!==Ye.Identifier&&hs(kt),vt.markEnd(vt.createIdentifier(kt.value),Ut)}function Uo(kt){var Ut=null,tn,xn;return xn=At,tn=Er(),ut&&Dt(tn.name)&&Kn({},it.StrictVarName),kt==="const"?(zn("="),Ut=Ws()):bn("=")&&(An(),Ut=Ws()),vt.markEnd(vt.createVariableDeclarator(tn,Ut),xn)}function wi(kt){var Ut=[];do{if(Ut.push(Uo(kt)),!bn(","))break;An()}while(ht<xt);return Ut}function Go(){var kt;return es("var"),kt=wi(),Mn(),vt.createVariableDeclaration(kt,"var")}function qo(kt){var Ut,tn;return tn=At,es(kt),Ut=wi(kt),Mn(),vt.markEnd(vt.createVariableDeclaration(Ut,kt),tn)}function Qi(){return zn(";"),vt.createEmptyStatement()}function Wo(){var kt=Ms();return Mn(),vt.createExpressionStatement(kt)}function Ho(){var kt,Ut,tn;return es("if"),zn("("),kt=Ms(),zn(")"),Ut=ar(),pn("else")?(An(),tn=ar()):tn=null,vt.createIfStatement(kt,Ut,tn)}function Qo(){var kt,Ut,tn;return es("do"),tn=Et.inIteration,Et.inIteration=!0,kt=ar(),Et.inIteration=tn,es("while"),zn("("),Ut=Ms(),zn(")"),bn(";")&&An(),vt.createDoWhileStatement(kt,Ut)}function Ko(){var kt,Ut,tn;return es("while"),zn("("),kt=Ms(),zn(")"),tn=Et.inIteration,Et.inIteration=!0,Ut=ar(),Et.inIteration=tn,vt.createWhileStatement(kt,Ut)}function Yo(){var kt,Ut,tn;return tn=At,kt=An(),Ut=wi(),vt.markEnd(vt.createVariableDeclaration(Ut,kt.value),tn)}function Xo(){var kt,Ut,tn,xn,Rn,jn,rs,fs=Et.allowIn;return kt=Ut=tn=null,es("for"),zn("("),bn(";")?An():(pn("var")||pn("let")?(Et.allowIn=!1,kt=Yo(),Et.allowIn=fs,kt.declarations.length===1&&pn("in")&&(An(),xn=kt,Rn=Ms(),kt=null)):(Et.allowIn=!1,kt=Ms(),Et.allowIn=fs,pn("in")&&(ls(kt)||Kn({},it.InvalidLHSInForIn),An(),xn=kt,Rn=Ms(),kt=null)),typeof xn>"u"&&zn(";")),typeof xn>"u"&&(bn(";")||(Ut=Ms()),zn(";"),bn(")")||(tn=Ms())),zn(")"),rs=Et.inIteration,Et.inIteration=!0,jn=ar(),Et.inIteration=rs,typeof xn>"u"?vt.createForStatement(kt,Ut,tn,jn):vt.createForInStatement(xn,Rn,jn)}function oi(){var kt=null,Ut;return es("continue"),lt.charCodeAt(ht)===59?(An(),Et.inIteration||Un({},it.IllegalContinue),vt.createContinueStatement(null)):Yn()?(Et.inIteration||Un({},it.IllegalContinue),vt.createContinueStatement(null)):(At.type===Ye.Identifier&&(kt=Er(),Ut="$"+kt.name,Object.prototype.hasOwnProperty.call(Et.labelSet,Ut)||Un({},it.UnknownLabel,kt.name)),Mn(),kt===null&&!Et.inIteration&&Un({},it.IllegalContinue),vt.createContinueStatement(kt))}function Jo(){var kt=null,Ut;return es("break"),lt.charCodeAt(ht)===59?(An(),Et.inIteration||Et.inSwitch||Un({},it.IllegalBreak),vt.createBreakStatement(null)):Yn()?(Et.inIteration||Et.inSwitch||Un({},it.IllegalBreak),vt.createBreakStatement(null)):(At.type===Ye.Identifier&&(kt=Er(),Ut="$"+kt.name,Object.prototype.hasOwnProperty.call(Et.labelSet,Ut)||Un({},it.UnknownLabel,kt.name)),Mn(),kt===null&&!(Et.inIteration||Et.inSwitch)&&Un({},it.IllegalBreak),vt.createBreakStatement(kt))}function ai(){var kt=null;return es("return"),Et.inFunctionBody||Kn({},it.IllegalReturn),lt.charCodeAt(ht)===32&&Pt(lt.charCodeAt(ht+1))?(kt=Ms(),Mn(),vt.createReturnStatement(kt)):Yn()?vt.createReturnStatement(null):(bn(";")||!bn("}")&&At.type!==Ye.EOF&&(kt=Ms()),Mn(),vt.createReturnStatement(kt))}function Zo(){var kt,Ut;return ut&&(Ht(),Kn({},it.StrictModeWith)),es("with"),zn("("),kt=Ms(),zn(")"),Ut=ar(),vt.createWithStatement(kt,Ut)}function ea(){var kt,Ut=[],tn,xn;for(xn=At,pn("default")?(An(),kt=null):(es("case"),kt=Ms()),zn(":");ht<xt&&!(bn("}")||pn("default")||pn("case"));)tn=ar(),Ut.push(tn);return vt.markEnd(vt.createSwitchCase(kt,Ut),xn)}function ta(){var kt,Ut,tn,xn,Rn;if(es("switch"),zn("("),kt=Ms(),zn(")"),zn("{"),Ut=[],bn("}"))return An(),vt.createSwitchStatement(kt,Ut);for(xn=Et.inSwitch,Et.inSwitch=!0,Rn=!1;ht<xt&&!bn("}");)tn=ea(),tn.test===null&&(Rn&&Un({},it.MultipleDefaultsInSwitch),Rn=!0),Ut.push(tn);return Et.inSwitch=xn,zn("}"),vt.createSwitchStatement(kt,Ut)}function Ki(){var kt;return es("throw"),Yn()&&Un({},it.NewlineAfterThrow),kt=Ms(),Mn(),vt.createThrowStatement(kt)}function Yi(){var kt,Ut,tn;return tn=At,es("catch"),zn("("),bn(")")&&hs(At),kt=Er(),ut&&Dt(kt.name)&&Kn({},it.StrictCatchVariable),zn(")"),Ut=ii(),vt.markEnd(vt.createCatchClause(kt,Ut),tn)}function Xi(){var kt,Ut=[],tn=null;return es("try"),kt=ii(),pn("catch")&&Ut.push(Yi()),pn("finally")&&(An(),tn=ii()),Ut.length===0&&!tn&&Un({},it.NoCatchOrFinally),vt.createTryStatement(kt,[],Ut,tn)}function na(){return es("debugger"),Mn(),vt.createDebuggerStatement()}function ar(){var kt=At.type,Ut,tn,xn,Rn;if(kt===Ye.EOF&&hs(At),kt===Ye.Punctuator&&At.value==="{")return ii();if(Rn=At,kt===Ye.Punctuator)switch(At.value){case";":return vt.markEnd(Qi(),Rn);case"(":return vt.markEnd(Wo(),Rn)}if(kt===Ye.Keyword)switch(At.value){case"break":return vt.markEnd(Jo(),Rn);case"continue":return vt.markEnd(oi(),Rn);case"debugger":return vt.markEnd(na(),Rn);case"do":return vt.markEnd(Qo(),Rn);case"for":return vt.markEnd(Xo(),Rn);case"function":return vt.markEnd(_i(),Rn);case"if":return vt.markEnd(Ho(),Rn);case"return":return vt.markEnd(ai(),Rn);case"switch":return vt.markEnd(ta(),Rn);case"throw":return vt.markEnd(Ki(),Rn);case"try":return vt.markEnd(Xi(),Rn);case"var":return vt.markEnd(Go(),Rn);case"while":return vt.markEnd(Ko(),Rn);case"with":return vt.markEnd(Zo(),Rn)}return Ut=Ms(),Ut.type===st.Identifier&&bn(":")?(An(),xn="$"+Ut.name,Object.prototype.hasOwnProperty.call(Et.labelSet,xn)&&Un({},it.Redeclaration,"Label",Ut.name),Et.labelSet[xn]=!0,tn=ar(),delete Et.labelSet[xn],vt.markEnd(vt.createLabeledStatement(Ut,tn),Rn)):(Mn(),vt.markEnd(vt.createExpressionStatement(Ut),Rn))}function Ci(){var kt,Ut=[],tn,xn,Rn,jn,rs,fs,$s,Ds;for(Ds=At,zn("{");ht<xt&&!(At.type!==Ye.StringLiteral||(tn=At,kt=Br(),Ut.push(kt),kt.expression.type!==st.Literal));)xn=lt.slice(tn.start+1,tn.end-1),xn==="use strict"?(ut=!0,Rn&&Kn(Rn,it.StrictOctalLiteral)):!Rn&&tn.octal&&(Rn=tn);for(jn=Et.labelSet,rs=Et.inIteration,fs=Et.inSwitch,$s=Et.inFunctionBody,Et.labelSet={},Et.inIteration=!1,Et.inSwitch=!1,Et.inFunctionBody=!0;ht<xt&&!(bn("}")||(kt=Br(),typeof kt>"u"));)Ut.push(kt);return zn("}"),Et.labelSet=jn,Et.inIteration=rs,Et.inSwitch=fs,Et.inFunctionBody=$s,vt.markEnd(vt.createBlockStatement(Ut),Ds)}function Ji(kt){var Ut,tn=[],xn,Rn,jn,rs,fs;if(zn("("),!bn(")"))for(jn={};ht<xt&&(xn=At,Ut=Er(),rs="$"+xn.value,ut?(Dt(xn.value)&&(Rn=xn,fs=it.StrictParamName),Object.prototype.hasOwnProperty.call(jn,rs)&&(Rn=xn,fs=it.StrictParamDupe)):kt||(Dt(xn.value)?(kt=xn,fs=it.StrictParamName):zt(xn.value)?(kt=xn,fs=it.StrictReservedWord):Object.prototype.hasOwnProperty.call(jn,rs)&&(kt=xn,fs=it.StrictParamDupe)),tn.push(Ut),jn[rs]=!0,!bn(")"));)zn(",");return zn(")"),{params:tn,stricted:Rn,firstRestricted:kt,message:fs}}function _i(){var kt,Ut=[],tn,xn,Rn,jn,rs,fs,$s,Ds;return Ds=At,es("function"),xn=At,kt=Er(),ut?Dt(xn.value)&&Kn(xn,it.StrictFunctionName):Dt(xn.value)?(rs=xn,fs=it.StrictFunctionName):zt(xn.value)&&(rs=xn,fs=it.StrictReservedWord),jn=Ji(rs),Ut=jn.params,Rn=jn.stricted,rs=jn.firstRestricted,jn.message&&(fs=jn.message),$s=ut,tn=Ci(),ut&&rs&&Un(rs,fs),ut&&Rn&&Kn(Rn,fs),ut=$s,vt.markEnd(vt.createFunctionDeclaration(kt,Ut,[],tn),Ds)}function Zi(){var kt,Ut=null,tn,xn,Rn,jn,rs=[],fs,$s,Ds;return Ds=At,es("function"),bn("(")||(kt=At,Ut=Er(),ut?Dt(kt.value)&&Kn(kt,it.StrictFunctionName):Dt(kt.value)?(xn=kt,Rn=it.StrictFunctionName):zt(kt.value)&&(xn=kt,Rn=it.StrictReservedWord)),jn=Ji(xn),rs=jn.params,tn=jn.stricted,xn=jn.firstRestricted,jn.message&&(Rn=jn.message),$s=ut,fs=Ci(),ut&&xn&&Un(xn,Rn),ut&&tn&&Kn(tn,Rn),ut=$s,vt.markEnd(vt.createFunctionExpression(Ut,rs,[],fs),Ds)}function Br(){if(At.type===Ye.Keyword)switch(At.value){case"const":case"let":return qo(At.value);case"function":return _i();default:return ar()}if(At.type!==Ye.EOF)return ar()}function $i(){for(var kt,Ut=[],tn,xn,Rn;ht<xt&&(tn=At,!(tn.type!==Ye.StringLiteral||(kt=Br(),Ut.push(kt),kt.expression.type!==st.Literal)));)xn=lt.slice(tn.start+1,tn.end-1),xn==="use strict"?(ut=!0,Rn&&Kn(Rn,it.StrictOctalLiteral)):!Rn&&tn.octal&&(Rn=tn);for(;ht<xt&&(kt=Br(),!(typeof kt>"u"));)Ut.push(kt);return Ut}function sa(){var kt,Ut;return Ht(),wn(),Ut=At,ut=!1,kt=$i(),vt.markEnd(vt.createProgram(kt),Ut)}function Ri(){var kt,Ut,tn,xn=[];for(kt=0;kt<wt.tokens.length;++kt)Ut=wt.tokens[kt],tn={type:Ut.type,value:Ut.value},wt.range&&(tn.range=Ut.range),wt.loc&&(tn.loc=Ut.loc),xn.push(tn);wt.tokens=xn}function ci(kt,Ut){var tn,xn,Rn;tn=String,typeof kt!="string"&&!(kt instanceof String)&&(kt=tn(kt)),vt=at,lt=kt,ht=0,pt=lt.length>0?1:0,ft=0,xt=lt.length,At=null,Et={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},wt={},Ut=Ut||{},Ut.tokens=!0,wt.tokens=[],wt.tokenize=!0,wt.openParenToken=-1,wt.openCurlyToken=-1,wt.range=typeof Ut.range=="boolean"&&Ut.range,wt.loc=typeof Ut.loc=="boolean"&&Ut.loc,typeof Ut.comment=="boolean"&&Ut.comment&&(wt.comments=[]),typeof Ut.tolerant=="boolean"&&Ut.tolerant&&(wt.errors=[]);try{if(wn(),At.type===Ye.EOF)return wt.tokens;for(xn=An();At.type!==Ye.EOF;)try{xn=An()}catch(jn){if(xn=At,wt.errors){wt.errors.push(jn);break}else throw jn}Ri(),Rn=wt.tokens,typeof wt.comments<"u"&&(Rn.comments=wt.comments),typeof wt.errors<"u"&&(Rn.errors=wt.errors)}catch(jn){throw jn}finally{wt={}}return Rn}function eo(kt,Ut){var tn,xn;xn=String,typeof kt!="string"&&!(kt instanceof String)&&(kt=xn(kt)),vt=at,lt=kt,ht=0,pt=lt.length>0?1:0,ft=0,xt=lt.length,At=null,Et={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},wt={},typeof Ut<"u"&&(wt.range=typeof Ut.range=="boolean"&&Ut.range,wt.loc=typeof Ut.loc=="boolean"&&Ut.loc,wt.attachComment=typeof Ut.attachComment=="boolean"&&Ut.attachComment,wt.loc&&Ut.source!==null&&Ut.source!==void 0&&(wt.source=xn(Ut.source)),typeof Ut.tokens=="boolean"&&Ut.tokens&&(wt.tokens=[]),typeof Ut.comment=="boolean"&&Ut.comment&&(wt.comments=[]),typeof Ut.tolerant=="boolean"&&Ut.tolerant&&(wt.errors=[]),wt.attachComment&&(wt.range=!0,wt.comments=[],wt.bottomRightStack=[],wt.trailingComments=[],wt.leadingComments=[]));try{tn=sa(),typeof wt.comments<"u"&&(tn.comments=wt.comments),typeof wt.tokens<"u"&&(Ri(),tn.tokens=wt.tokens),typeof wt.errors<"u"&&(tn.errors=wt.errors)}catch(Rn){throw Rn}finally{wt={}}return tn}Ke.version="1.2.5",Ke.tokenize=ci,Ke.parse=eo,Ke.Syntax=(function(){var kt,Ut={};typeof Object.create=="function"&&(Ut=Object.create(null));for(kt in st)st.hasOwnProperty(kt)&&(Ut[kt]=st[kt]);return typeof Object.freeze=="function"&&Object.freeze(Ut),Ut})()})})(esprima$1);var esprima=esprima$1,uniq$2=uniq$4,PREFIX_COUNTER=0;function CompiledArgument(Xe,Ke,Ye){this.name=Xe,this.lvalue=Ke,this.rvalue=Ye,this.count=0}function CompiledRoutine(Xe,Ke,Ye,Je){this.body=Xe,this.args=Ke,this.thisVars=Ye,this.localVars=Je}function isGlobal(Xe){if(Xe==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?Xe in window:typeof globalThis<"u"?Xe in globalThis:typeof self<"u"?Xe in self:!1}function getArgNames(Xe){for(var Ke=Xe.body[0].expression.callee.params,Ye=new Array(Ke.length),Je=0;Je<Ke.length;++Je)Ye[Je]=Ke[Je].name;return Ye}function preprocess(Xe){for(var Ke=["(",Xe,")()"].join(""),Ye=esprima.parse(Ke,{range:!0}),Je="_inline_"+PREFIX_COUNTER+++"_",tt=getArgNames(Ye),st=new Array(tt.length),rt=0;rt<tt.length;++rt)st[rt]=new CompiledArgument([Je,"arg",rt,"_"].join(""),!1,!1);for(var it=new Array(Ke.length),rt=0,ot=Ke.length;rt<ot;++rt)it[rt]=Ke.charAt(rt);var at=[],lt=[];function ut(_t){var Ct=Je+_t.replace(/\_/g,"__");return at.push(Ct),Ct}function ht(_t){var Ct="this_"+_t.replace(/\_/g,"__");return lt.push(Ct),Ct}function pt(_t,Ct){for(var Tt=_t.range[0],St=_t.range[1],Rt=Tt+1;Rt<St;++Rt)it[Rt]="";it[Tt]=Ct}function ft(_t){return"'"+_t.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function xt(_t){return it.slice(_t.range[0],_t.range[1]).join("")}var vt=1,At=2;function Et(_t){return _t.parent.type==="AssignmentExpression"&&_t.parent.left===_t?_t.parent.operator==="="?vt:vt|At:_t.parent.type==="UpdateExpression"?vt|At:At}(function _t(Ct,Tt){if(Ct.parent=Tt,Ct.type==="MemberExpression")Ct.computed?(_t(Ct.object,Ct),_t(Ct.property,Ct)):Ct.object.type==="ThisExpression"?pt(Ct,ht(Ct.property.name)):_t(Ct.object,Ct);else{if(Ct.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(Ct.type==="Identifier"){var St=Ct.name,Rt=tt.indexOf(St);if(Rt>=0){var Nt=st[Rt],Pt=Et(Ct);Pt&vt&&(Nt.lvalue=!0),Pt&At&&(Nt.rvalue=!0),++Nt.count,pt(Ct,Nt.name)}else isGlobal(St)||pt(Ct,ut(St))}else if(Ct.type==="Literal")typeof Ct.value=="string"&&pt(Ct,ft(Ct.value));else{if(Ct.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var Bt=Object.keys(Ct),Lt=0,zt=Bt.length;Lt<zt;++Lt)if(Bt[Lt]!=="parent"){var Dt=Ct[Bt[Lt]];if(Dt)if(Dt instanceof Array)for(var Vt=0;Vt<Dt.length;++Vt)Dt[Vt]&&typeof Dt[Vt].type=="string"&&_t(Dt[Vt],Ct);else typeof Dt.type=="string"&&_t(Dt,Ct)}}}})(Ye.body[0].expression.callee.body,void 0),uniq$2(at),uniq$2(lt);var wt=new CompiledRoutine(xt(Ye.body[0].expression.callee.body),st,lt,at);return wt}var cwiseParser=preprocess,parse$2=cwiseParser,compile$1=compiler,REQUIRED_FIELDS=["args","body"],OPTIONAL_FIELDS=["pre","post","printCode","funcName","blockSize"];function createCWise(Xe){for(var Ke in Xe)REQUIRED_FIELDS.indexOf(Ke)<0&&OPTIONAL_FIELDS.indexOf(Ke)<0&&console.warn("cwise: Unknown argument '"+Ke+"' passed to expression compiler");for(var Ye=0;Ye<REQUIRED_FIELDS.length;++Ye)if(!Xe[REQUIRED_FIELDS[Ye]])throw new Error("cwise: Missing argument: "+REQUIRED_FIELDS[Ye]);return compile$1({args:Xe.args,pre:parse$2(Xe.pre||function(){}),body:parse$2(Xe.body),post:parse$2(Xe.post||function(){}),debug:!!Xe.printCode,funcName:Xe.funcName||Xe.body.name||"cwise",blockSize:Xe.blockSize||64})}var cwiseEsprima=createCWise,cwise=cwiseEsprima;cwise({args:["array","array","scalar","scalar","scalar"],body:function Xe(Ke,Ye,Je,tt,st){}});const SAMPLE_RATE=16e3;getOfflineAudioContext(SAMPLE_RATE);const MidiComponent=({artifactUri:Xe,displayUri:Ke,previewUri:Ye,displayView:Je,nft:tt})=>{const[st,rt]=reactExports.useState(Ye||Xe),[it,ot]=reactExports.useState(100),[at,lt]=reactExports.useState(!1),[ut,ht]=reactExports.useState(!1),pt=reactExports.useRef(),ft=()=>{lt(!at)};reactExports.useEffect(()=>{pt.current&&(at?pt.current.start():pt.current.stop())},[at]),reactExports.useEffect(()=>{(Ye||Xe)&&processMidiData(Ye||Xe,it).then(vt=>{rt(vt)}).catch(vt=>{console.error("Error processing MIDI:",vt)})},[Ye,Xe,it]);const xt=reactExports.useCallback(vt=>{ot(vt.target.value)},[]);return reactExports.useEffect(()=>{pt.current&&(pt.current.addEventListener("start",()=>{ht(!0)}),pt.current.addEventListener("stop",()=>{ht(!1)}))},[pt.current]),Je?jsxRuntimeExports.jsxs("div",{className:styles$L.container,children:[jsxRuntimeExports.jsx("img",{src:Ke,alt:"cover for midi nft"}),jsxRuntimeExports.jsx("i",{children:"Please manually stop midi player before navigating out of this page."}),jsxRuntimeExports.jsxs("div",{className:styles$L.player_container,children:[jsxRuntimeExports.jsx("midi-player",{id:"midi-player",ref:pt,src:st}),jsxRuntimeExports.jsxs("div",{className:styles$L.volume_container,children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"black",class:"w-6 h-6",children:jsxRuntimeExports.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})}),jsxRuntimeExports.jsx("input",{onInput:xt,disabled:ut,type:"range",min:"1",max:"100",value:it,className:styles$L.volume_slider,id:"volume-slider"})]})]})]}):jsxRuntimeExports.jsxs("div",{className:styles$L.feed_container,children:[jsxRuntimeExports.jsx(Button,{to:`${PATH.OBJKT}/${tt.token_id}`,children:jsxRuntimeExports.jsx("img",{alt:`cover for midi object ${tt.token_id}`,src:Ke})}),jsxRuntimeExports.jsx(Button,{className:styles$L.button,onClick:ft,children:at?jsxRuntimeExports.jsxs("div",{className:styles$L.playerButton,children:[jsxRuntimeExports.jsx(SvgPause,{fill:"var(--gray-10)",width:64,height:64}),jsxRuntimeExports.jsx("i",{children:"Please manually stop midi player before navigating away from this page."})]}):jsxRuntimeExports.jsx(SvgPlay,{fill:"var(--gray-10)",width:64,height:64})}),jsxRuntimeExports.jsx("div",{id:"feed-player",style:{display:"none"},children:jsxRuntimeExports.jsx("midi-player",{id:"midi-player",ref:pt,src:st})})]})},container$i="_container_c9n77_1",preview="_preview_c9n77_18",styles$K={container:container$i,preview},TXT=({artifactUri:Xe,displayUri:Ke,displayView:Ye,previewUri:Je,nft:tt})=>{const[st,rt]=React.useState(""),[it,ot]=React.useState(!1),at=reactExports.useRef();return React.useEffect(()=>{var ut;if(Xe?axios.get(Xe).then(ht=>{rt(ht.data)}):Ke&&((async()=>{await fetch(Ke).then(ht=>{if(!ht.ok)throw new Error("Error reading blob");return ht.text()}).then(ht=>{rt(ht)}).catch(ht=>{console.error("Error fetching the file:",ht)})})(),ot(tt.is_mono_type)),tt!=null&&tt.tags&&((ut=tt==null?void 0:tt.tags)==null?void 0:ut.length)>0){let ht=tt.tags.map(pt=>pt.tag.toLowerCase());(ht.includes("monospace")||ht.includes("mono"))&&ot(!0)}},[Xe,Je,Ye,Ke,tt]),jsxRuntimeExports.jsx("div",{ref:at,className:styles$K.container,children:jsxRuntimeExports.jsx("div",{className:styles$K.preview,children:!Ye&&Je?jsxRuntimeExports.jsx("img",{alt:`Text NFT thumbnail for ${tt.token_id}`,src:Je}):jsxRuntimeExports.jsx("pre",{style:{fontFamily:it?"Iosevka, monospace":"Source Sans Pro, sans-serif",overflowY:"auto"},children:st})})})},RenderMediaType=({nft:Xe,previewUri:Ke,previewDisplayUri:Ye,displayView:Je,details:tt})=>{const st=reactExports.useMemo(()=>Xe.artifact_uri?HashToURL(Xe.artifact_uri,"CDN",{size:"raw"}):"",[Xe]);if(!Xe)throw Error("No OBJKT to render");if(Xe.metadata_status==="unprocessed")throw Error(`The OBJKT #${Xe.token_id} is being processed`,{cause:"Processing Metadata"});const rt=reactExports.useMemo(()=>{var at;return!!(!Xe.display_uri&&((at=Xe.mime_type)!=null&&at.startsWith("video")))},[Xe]),it=reactExports.useMemo(()=>{var at;if(Ye)return Ye;if(Xe.display_uri)return HashToURL(Xe.display_uri,"CDN",{size:"raw"});if((at=Xe.mime_type)!=null&&at.startsWith("video"))return HashToURL(Xe.artifact_uri,"CDN",{size:"raw"})},[Xe,Ye]),ot=reactExports.useMemo(()=>{switch(Xe.mime_type){case MIMETYPE.BMP:case MIMETYPE.GIF:case MIMETYPE.JPEG:case MIMETYPE.PNG:case MIMETYPE.TIFF:case MIMETYPE.WEBP:return jsxRuntimeExports.jsx(ImageComponent,{artifactUri:st,displayUri:it,displayView:Je,previewUri:Ke,nft:Xe});case MIMETYPE.SVG:return jsxRuntimeExports.jsx(VectorComponent,{artifactUri:st,displayUri:it,displayView:Je,previewUri:Ke,nft:Xe});case MIMETYPE.DIRECTORY:case MIMETYPE.ZIP:case MIMETYPE.ZIP1:case MIMETYPE.ZIP2:return jsxRuntimeExports.jsx(HTMLComponent,{artifactUri:st,displayUri:it,displayView:Je,previewUri:Ke,nft:Xe});case MIMETYPE.MP4:case MIMETYPE.OGV:case MIMETYPE.QUICKTIME:case MIMETYPE.WEBM:return jsxRuntimeExports.jsx(VideoComponent,{artifactUri:st,displayUri:it,displayView:Je,previewUri:Ke,nft:Xe,forceVideo:rt});case MIMETYPE.GLB:case MIMETYPE.GLTF:return jsxRuntimeExports.jsx(GLBComponent,{artifactUri:st,displayUri:it,displayView:Je,previewUri:Ke,nft:Xe});case MIMETYPE.MP3:case MIMETYPE.OGG:case MIMETYPE.OGA:case MIMETYPE.FLAC:case MIMETYPE.WAV:case MIMETYPE.XWAV:return jsxRuntimeExports.jsx(AudioComponent,{artifactUri:st,displayUri:it,displayView:Je,previewUri:Ke,nft:Xe});case MIMETYPE.PDF:return jsxRuntimeExports.jsx(PdfComponent,{artifactUri:st,displayUri:it,displayView:Je,previewUri:Ke,nft:Xe});case MIMETYPE.MD:return jsxRuntimeExports.jsx(MD,{artifactUri:st,displayUri:it,displayView:Je,previewUri:Ke,nft:Xe});case MIMETYPE.MIDI:case MIMETYPE.MID:return jsxRuntimeExports.jsx(MidiComponent,{artifactUri:st,displayUri:it,displayView:Je,previewUri:Ke,nft:Xe});case MIMETYPE.TXT:return jsxRuntimeExports.jsx(TXT,{artifactUri:st,displayUri:Ke,displayView:Je,previewUri:it,nft:Xe});default:return jsxRuntimeExports.jsx(UnknownComponent,{mimeType:Xe.mime_type})}},[Xe.mime_type]);if(Xe.metadata_status==="error"){const at=Error(`The OBJKT #${Xe.token_id} failed to index, 
      if this persists for more than a day please log an issue.`,{cause:"Metadata Error"});return console.error(at),null}return jsxRuntimeExports.jsxs(Container$1,{displayView:Je,nft:Xe,children:[tt,ot]})},hover_details="_hover_details_1v35r_216",container$h="_container_1v35r_290",token_infos_container="_token_infos_container_1v35r_298",blur="_blur_1v35r_306",photo_protect="_photo_protect_1v35r_310",masonry="_masonry_1v35r_318",styles$J={hover_details,container:container$h,token_infos_container,blur,photo_protect,masonry},info_variants={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},TokenHover=({nft:Xe,visible:Ke})=>jsxRuntimeExports.jsx(AnimatePresence,{children:Ke&&jsxRuntimeExports.jsxs(motion.div,{...info_variants,className:styles$J.hover_details,children:[jsxRuntimeExports.jsxs("h3",{children:["#",Xe.token_id]}),jsxRuntimeExports.jsx("h4",{children:Xe.name}),jsxRuntimeExports.jsx("p",{children:Xe.description})]})}),FeedItem=({nft:Xe})=>{var ot;const[Ke,Ye]=useLocalSettings(at=>[at.nsfwFriendly,at.photosensitiveFriendly],shallow),Je=useLocalSettings(at=>at.zen),tt=useLocalSettings(at=>at.viewMode),[st,rt]=reactExports.useState(!1),it=classNames$1({[styles$J.container]:!0,[styles$J.blur]:Xe.isNSFW&&!Ke,[styles$J.photo_protect]:Xe.isPhotosensitive&&!Ye,[styles$J.masonry]:tt==="masonry"});return jsxRuntimeExports.jsxs("div",{onMouseOver:()=>rt(!0),onFocus:()=>rt(!0),onMouseOut:()=>rt(!1),onBlur:()=>rt(!1),className:it,children:[(ot=Xe.mime_type)!=null&&ot.startsWith("audio")?jsxRuntimeExports.jsx(RenderMediaType,{details:jsxRuntimeExports.jsx(TokenHover,{nft:Xe,visible:st&&!Je}),nft:Xe}):jsxRuntimeExports.jsx(Link,{"aria-label":`OBJKT ${Xe.token_id}`,to:`${PATH.OBJKT}/${Xe.token_id}`,children:jsxRuntimeExports.jsx(RenderMediaType,{details:jsxRuntimeExports.jsx(TokenHover,{nft:Xe,visible:st&&!Je}),nft:Xe})}),!Je&&jsxRuntimeExports.jsx("div",{className:styles$J.token_infos_container,children:jsxRuntimeExports.jsx(ItemInfoCompact,{nft:Xe})})]})};class InfiniteScroll extends reactExports.Component{constructor(Ke){super(Ke),this.scrollListener=this.scrollListener.bind(this),this.eventListenerOptions=this.eventListenerOptions.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this)}componentDidMount(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}componentDidUpdate(){if(this.props.isReverse&&this.loadMore){const Ke=this.getParentElement(this.scrollComponent);Ke.scrollTop=Ke.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}componentWillUnmount(){this.detachScrollListener(),this.detachMousewheelListener()}isPassiveSupported(){let Ke=!1;const Ye={get passive(){Ke=!0}};try{document.addEventListener("test",null,Ye),document.removeEventListener("test",null,Ye)}catch{}return Ke}eventListenerOptions(){let Ke=this.props.useCapture;return this.isPassiveSupported()?Ke={useCapture:this.props.useCapture,passive:!0}:Ke={passive:!1},Ke}setDefaultLoader(Ke){this.defaultLoader=Ke}detachMousewheelListener(){let Ke=window;this.props.useWindow===!1&&(Ke=this.scrollComponent.parentNode),Ke.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}detachScrollListener(){let Ke=window;this.props.useWindow===!1&&(Ke=this.getParentElement(this.scrollComponent)),Ke.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),Ke.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}getParentElement(Ke){const Ye=this.props.getScrollParent&&this.props.getScrollParent();return Ye??(Ke&&Ke.parentNode)}filterProps(Ke){return Ke}attachScrollListener(){const Ke=this.getParentElement(this.scrollComponent);if(!this.props.hasMore||!Ke)return;let Ye=window;this.props.useWindow===!1&&(Ye=Ke),Ye.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),Ye.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),Ye.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}mousewheelListener(Ke){Ke.deltaY===1&&!this.isPassiveSupported()&&Ke.preventDefault()}scrollListener(){const Ke=this.scrollComponent,Ye=window,Je=this.getParentElement(Ke);let tt;if(this.props.useWindow){const st=document.documentElement||document.body.parentNode||document.body,rt=Ye.pageYOffset!==void 0?Ye.pageYOffset:st.scrollTop;this.props.isReverse?tt=rt:tt=this.calculateOffset(Ke,rt)}else this.props.isReverse?tt=Je.scrollTop:tt=Ke.scrollHeight-Je.scrollTop-Je.clientHeight;tt<Number(this.props.threshold)&&Ke&&Ke.offsetParent!==null&&(this.detachScrollListener(),this.beforeScrollHeight=Je.scrollHeight,this.beforeScrollTop=Je.scrollTop,typeof this.props.loadMore=="function"&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}calculateOffset(Ke,Ye){return Ke?this.calculateTopPosition(Ke)+(Ke.offsetHeight-Ye-window.innerHeight):0}calculateTopPosition(Ke){return Ke?Ke.offsetTop+this.calculateTopPosition(Ke.offsetParent):0}render(){const Ke=this.filterProps(this.props),{children:Ye,element:Je,hasMore:tt,initialLoad:st,isReverse:rt,loader:it,loadMore:ot,pageStart:at,ref:lt,threshold:ut,useCapture:ht,useWindow:pt,getScrollParent:ft,...xt}=Ke;xt.ref=At=>{this.scrollComponent=At,lt&&lt(At)};const vt=[Ye];return tt&&(it?rt?vt.unshift(it):vt.push(it):this.defaultLoader&&(rt?vt.unshift(this.defaultLoader):vt.push(this.defaultLoader))),React.createElement(Je,xt,vt)}}Hi(InfiniteScroll,"propTypes",{children:PropTypes.node.isRequired,element:PropTypes.node,hasMore:PropTypes.bool,initialLoad:PropTypes.bool,isReverse:PropTypes.bool,loader:PropTypes.node,loadMore:PropTypes.func.isRequired,pageStart:PropTypes.number,ref:PropTypes.func,getScrollParent:PropTypes.func,threshold:PropTypes.number,useCapture:PropTypes.bool,useWindow:PropTypes.bool}),Hi(InfiniteScroll,"defaultProps",{element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null});function laggy(Xe){return(Ke,Ye,Je)=>{const tt=reactExports.useRef(),st=Xe(Ke,Ye,Je);reactExports.useEffect(()=>{st.data!==void 0&&(tt.current=st.data)},[st.data]);const rt=reactExports.useCallback(()=>{tt.current=void 0},[]),it=st.data===void 0?tt.current:st.data,ot=st.data===void 0&&tt.current!==void 0;return Object.assign({},st,{data:it,isLagging:ot,resetLaggy:rt})}}const toolbar="_toolbar_7x5s1_216",feeds_area="_feeds_area_7x5s1_251",feeds_button="_feeds_button_7x5s1_263",separator$1="_separator_7x5s1_283",feeds_dropdown="_feeds_dropdown_7x5s1_288",view_mode_area="_view_mode_area_7x5s1_292",subtitle="_subtitle_7x5s1_327",styles$I={toolbar,feeds_area,feeds_button,separator:separator$1,feeds_dropdown,view_mode_area,subtitle},addBodyClass=Xe=>document.body.classList.add(Xe),removeBodyClass=Xe=>document.body.classList.remove(Xe);function useBodyClass(Xe){reactExports.useEffect(()=>(Xe instanceof Array?Xe.map(addBodyClass):addBodyClass(Xe),()=>{Xe instanceof Array?Xe.map(removeBodyClass):removeBodyClass(Xe)}),[Xe])}const dropdown_container="_dropdown_container_1x8nz_216",vertical="_vertical_1x8nz_237",header_button="_header_button_1x8nz_241",menu_left="_menu_left_1x8nz_254",header_button_open="_header_button_open_1x8nz_260",header_button_toggled="_header_button_toggled_1x8nz_273",left$1="_left_1x8nz_281",styles$H={dropdown_container,vertical,header_button,menu_left,header_button_open,header_button_toggled,left:left$1},useClickOutside=(Xe,Ke,Ye=!1)=>{const Je=tt=>{Xe.current&&!Xe.current.contains(tt.target)&&(Ye&&Xe.current.parentElement.contains(tt.target)||Ke())};reactExports.useEffect(()=>(document.addEventListener("mousedown",Je),()=>{document.removeEventListener("mousedown",Je)}),[])};/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */var twemoji=(function(){var Xe={base:"https://twemoji.maxcdn.com/v/14.0.2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:Et,toCodePoint:Tt},onerror:function(){this.parentNode&&this.parentNode.replaceChild(ot(this.alt,!1),this)},parse:wt,replace:_t,test:Ct},Ke={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},Ye=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef0-\udef6]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedd-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude74\ude78-\ude7c\ude80-\ude86\ude90-\udeac\udeb0-\udeba\udec0-\udec2\uded0-\uded9\udee0-\udee7]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,Je=/\uFE0F/g,tt="‍",st=/[&<>'"]/g,rt=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,it=String.fromCharCode;return Xe;function ot(St,Rt){return document.createTextNode(Rt?St.replace(Je,""):St)}function at(St){return St.replace(st,xt)}function lt(St,Rt){return"".concat(Rt.base,Rt.size,"/",St,Rt.ext)}function ut(St,Rt){for(var Nt=St.childNodes,Pt=Nt.length,Bt,Lt;Pt--;)Bt=Nt[Pt],Lt=Bt.nodeType,Lt===3?Rt.push(Bt):Lt===1&&!("ownerSVGElement"in Bt)&&!rt.test(Bt.nodeName.toLowerCase())&&ut(Bt,Rt);return Rt}function ht(St){return Tt(St.indexOf(tt)<0?St.replace(Je,""):St)}function pt(St,Rt){for(var Nt=ut(St,[]),Pt=Nt.length,Bt,Lt,zt,Dt,Vt,Gt,Qt,jt,Ht,Yt,Jt,Zt,nn;Pt--;){for(zt=!1,Dt=document.createDocumentFragment(),Vt=Nt[Pt],Gt=Vt.nodeValue,jt=0;Qt=Ye.exec(Gt);){if(Ht=Qt.index,Ht!==jt&&Dt.appendChild(ot(Gt.slice(jt,Ht),!0)),Jt=Qt[0],Zt=ht(Jt),jt=Ht+Jt.length,nn=Rt.callback(Zt,Rt),Zt&&nn){Yt=new Image,Yt.onerror=Rt.onerror,Yt.setAttribute("draggable","false"),Bt=Rt.attributes(Jt,Zt);for(Lt in Bt)Bt.hasOwnProperty(Lt)&&Lt.indexOf("on")!==0&&!Yt.hasAttribute(Lt)&&Yt.setAttribute(Lt,Bt[Lt]);Yt.className=Rt.className,Yt.alt=Jt,Yt.src=nn,zt=!0,Dt.appendChild(Yt)}Yt||Dt.appendChild(ot(Jt,!1)),Yt=null}zt&&(jt<Gt.length&&Dt.appendChild(ot(Gt.slice(jt),!0)),Vt.parentNode.replaceChild(Dt,Vt))}return St}function ft(St,Rt){return _t(St,function(Nt){var Pt=Nt,Bt=ht(Nt),Lt=Rt.callback(Bt,Rt),zt,Dt;if(Bt&&Lt){Pt="<img ".concat('class="',Rt.className,'" ','draggable="false" ','alt="',Nt,'"',' src="',Lt,'"'),zt=Rt.attributes(Nt,Bt);for(Dt in zt)zt.hasOwnProperty(Dt)&&Dt.indexOf("on")!==0&&Pt.indexOf(" "+Dt+"=")===-1&&(Pt=Pt.concat(" ",Dt,'="',at(zt[Dt]),'"'));Pt=Pt.concat("/>")}return Pt})}function xt(St){return Ke[St]}function vt(){return null}function At(St){return typeof St=="number"?St+"x"+St:St}function Et(St){var Rt=typeof St=="string"?parseInt(St,16):St;return Rt<65536?it(Rt):(Rt-=65536,it(55296+(Rt>>10),56320+(Rt&1023)))}function wt(St,Rt){return(!Rt||typeof Rt=="function")&&(Rt={callback:Rt}),(typeof St=="string"?ft:pt)(St,{callback:Rt.callback||lt,attributes:typeof Rt.attributes=="function"?Rt.attributes:vt,base:typeof Rt.base=="string"?Rt.base:Xe.base,ext:Rt.ext||Xe.ext,size:Rt.folder||At(Rt.size||Xe.size),className:Rt.className||Xe.className,onerror:Rt.onerror||Xe.onerror})}function _t(St,Rt){return String(St).replace(Ye,Rt)}function Ct(St){Ye.lastIndex=0;var Rt=Ye.test(St);return Ye.lastIndex=0,Rt}function Tt(St,Rt){for(var Nt=[],Pt=0,Bt=0,Lt=0;Lt<St.length;)Pt=St.charCodeAt(Lt++),Bt?(Nt.push((65536+(Bt-55296<<10)+(Pt-56320)).toString(16)),Bt=0):55296<=Pt&&Pt<=56319?Bt=Pt:Nt.push(Pt.toString(16));return Nt.join(Rt||"-")}})();function useTwemoji(){reactExports.useEffect(()=>{twemoji.parse(document.body,{folder:"svg",ext:".svg",base:"https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/"})},[])}function DropDown({children:Xe,setOpen:Ke,vertical:Ye,menuID:Je,left:tt}){useBodyClass("overlay");const st=reactExports.useRef(null);useTwemoji(),useClickOutside(st,()=>{Ke(!1)},!0);const rt=classNames$1({[styles$H.dropdown_container]:!0,[styles$H.vertical]:Ye,[styles$H.left]:tt});return jsxRuntimeExports.jsx(motion.div,{className:rt,initial:"hidden",animate:"show",variants:containerMenu,id:Je||"dropdown",ref:st,children:jsxRuntimeExports.jsx(AnimatePresence,{children:Xe})})}const DropDown$1=reactExports.memo(DropDown);function DropdownButton({menuID:Xe,direction:Ke="right",label:Ye,alt:Je,icon:tt,toggled:st,children:rt,onClick:it,className:ot}){const[at,lt]=reactExports.useState(!1);useTwemoji();const ut=()=>{lt(!at)},ht=classNames$1({[styles$H.header_button]:!0,[styles$H.header_button_open]:at,[styles$H.header_button_toggled]:st}),pt=classNames$1({[styles$H.menu_left]:Ke==="left"}),ft={};return Ke==="left"&&(ft.left=!0),jsxRuntimeExports.jsxs(motion.div,{className:`${ot||""} ${pt}`,children:[jsxRuntimeExports.jsx(Button,{alt:Je,className:ht,"data-toggle":Xe,onClick:()=>{ut(),it&&it()},children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Ye,tt]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:rt&&at&&React.cloneElement(rt,{setOpen:lt,...ft})})]})}const DropdownButton$1=reactExports.memo(DropdownButton),locationMap=new Map([["---sort_feeds","Sort Feeds"],["/feed/sales","Recent Sales"],["/feed/random","Random"],["/feed/newobjkts","New OBJKTs"],["/feed/friends","Friends"],["---fund_feeds","Event Feeds"],["/feed/art4artists","Art4Artists"],["/feed/tez4pal","🇵🇸 Tez4Pal"],["/feed/morocco-quake-aid","🇲🇦 Quake Aid"],["/feed/quake-aid","🇹🇷🇸🇾 Quake Aid"],["/feed/ukraine","🇺🇦 Ukraine"],["/feed/pakistan","🇵🇰 Pakistan"],["/feed/iran","🇮🇷 Iran"],["/feed/tezospride","🏳️‍🌈 Tezospride"],["---mime_feeds","By Format"],["/feed/image","Image"],["/feed/video","Video"],["/feed/audio","Audio"],["/feed/glb","3D"],["/feed/html-svg","HTML & SVG"],["/feed/gif","GIF"],["/feed/pdf","PDF"],["/feed/md","Markdown"],["/feed/txt","Text"],["/feed/midi","Midi"]]),locationNeedSync=["/feed/friends"],FeedToolbar=({feeds_menu:Xe=!1})=>{const[Ke,Ye,Je]=useLocalSettings(it=>[it.viewMode,it.setViewMode,it.startFeed],shallow),tt=useLocation(),st=locationMap.get("/"+tt.pathname.split("/").slice(1,3).join("/"))||Je||DEFAULT_START_FEED,rt=useNavigate();return useUserStore(it=>[it.address],shallow),jsxRuntimeExports.jsxs(motion.div,{className:styles$I.toolbar,children:[Xe&&jsxRuntimeExports.jsx("div",{className:styles$I.feeds_area,children:jsxRuntimeExports.jsx(DropdownButton$1,{alt:"feeds selection dropdown",menuID:"feeds",icon:jsxRuntimeExports.jsx(SvgChevron,{}),label:st,className:styles$I.feeds_dropdown,children:jsxRuntimeExports.jsx(DropDown$1,{menuID:"feeds",children:jsxRuntimeExports.jsx("div",{className:styles$I.feeds_button,children:[...locationMap.keys()].map(it=>it.startsWith("-")?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Line,{className:styles$I.separator},it),jsxRuntimeExports.jsx("span",{className:styles$I.subtitle,children:locationMap.get(it)})]}):locationNeedSync.includes(it)?jsxRuntimeExports.jsx(Button,{onClick:()=>{rt("/sync",{state:`${it}`})},children:locationMap.get(it)},it):jsxRuntimeExports.jsx(Button,{to:it,children:locationMap.get(it)},it))})})})}),jsxRuntimeExports.jsxs("div",{className:styles$I.view_mode_area,children:[jsxRuntimeExports.jsx(IconToggle,{alt:"single view mode",toggled:Ke==="single",onClick:()=>{Ye("single")},icon:jsxRuntimeExports.jsx(SvgSingleView,{})}),jsxRuntimeExports.jsx(IconToggle,{alt:"masonry view mode",toggled:Ke==="masonry",onClick:()=>Ye("masonry"),icon:jsxRuntimeExports.jsx(SvgMasonry,{})})]})]})},single_view="_single_view_96p3b_216",load_container="_load_container_96p3b_222",feed_container="_feed_container_96p3b_231",infinite_scroll="_infinite_scroll_96p3b_251",empty_section="_empty_section_96p3b_256",styles$G={single_view,load_container,feed_container,infinite_scroll,empty_section};function useFirstMountState(){var Xe=reactExports.useRef(!0);return Xe.current?(Xe.current=!1,!0):Xe.current}var useUpdateEffect=function(Xe,Ke){var Ye=useFirstMountState();reactExports.useEffect(function(){if(!Ye)return Xe()},Ke)};function on(Xe){for(var Ke=[],Ye=1;Ye<arguments.length;Ye++)Ke[Ye-1]=arguments[Ye];Xe&&Xe.addEventListener&&Xe.addEventListener.apply(Xe,Ke)}function off(Xe){for(var Ke=[],Ye=1;Ye<arguments.length;Ye++)Ke[Ye-1]=arguments[Ye];Xe&&Xe.removeEventListener&&Xe.removeEventListener.apply(Xe,Ke)}var isBrowser$1=typeof window<"u",toggleSelection=function(){var Xe=document.getSelection();if(!Xe.rangeCount)return function(){};for(var Ke=document.activeElement,Ye=[],Je=0;Je<Xe.rangeCount;Je++)Ye.push(Xe.getRangeAt(Je));switch(Ke.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":Ke.blur();break;default:Ke=null;break}return Xe.removeAllRanges(),function(){Xe.type==="Caret"&&Xe.removeAllRanges(),Xe.rangeCount||Ye.forEach(function(tt){Xe.addRange(tt)}),Ke&&Ke.focus()}},deselectCurrent=toggleSelection,clipboardToIE11Formatting={"text/plain":"Text","text/html":"Url",default:"Text"},defaultMessage="Copy to clipboard: #{key}, Enter";function format(Xe){var Ke=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return Xe.replace(/#{\s*key\s*}/g,Ke)}function copy$1(Xe,Ke){var Ye,Je,tt,st,rt,it,ot=!1;Ke||(Ke={}),Ye=Ke.debug||!1;try{tt=deselectCurrent(),st=document.createRange(),rt=document.getSelection(),it=document.createElement("span"),it.textContent=Xe,it.ariaHidden="true",it.style.all="unset",it.style.position="fixed",it.style.top=0,it.style.clip="rect(0, 0, 0, 0)",it.style.whiteSpace="pre",it.style.webkitUserSelect="text",it.style.MozUserSelect="text",it.style.msUserSelect="text",it.style.userSelect="text",it.addEventListener("copy",function(lt){if(lt.stopPropagation(),Ke.format)if(lt.preventDefault(),typeof lt.clipboardData>"u"){Ye&&console.warn("unable to use e.clipboardData"),Ye&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var ut=clipboardToIE11Formatting[Ke.format]||clipboardToIE11Formatting.default;window.clipboardData.setData(ut,Xe)}else lt.clipboardData.clearData(),lt.clipboardData.setData(Ke.format,Xe);Ke.onCopy&&(lt.preventDefault(),Ke.onCopy(lt.clipboardData))}),document.body.appendChild(it),st.selectNodeContents(it),rt.addRange(st);var at=document.execCommand("copy");if(!at)throw new Error("copy command was unsuccessful");ot=!0}catch(lt){Ye&&console.error("unable to copy using execCommand: ",lt),Ye&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(Ke.format||"text",Xe),Ke.onCopy&&Ke.onCopy(window.clipboardData),ot=!0}catch(ut){Ye&&console.error("unable to copy using clipboardData: ",ut),Ye&&console.error("falling back to prompt"),Je=format("message"in Ke?Ke.message:defaultMessage),window.prompt(Je,Xe)}}finally{rt&&(typeof rt.removeRange=="function"?rt.removeRange(st):rt.removeAllRanges()),it&&document.body.removeChild(it),tt()}return ot}var copyToClipboard=copy$1;const r$1=getDefaultExportFromCjs(copyToClipboard);var useEffectOnce=function(Xe){reactExports.useEffect(Xe,[])},getInitialState=function(Xe,Ke){return isBrowser$1?window.matchMedia(Xe).matches:!1},useMedia=function(Xe,Ke){var Ye=reactExports.useState(getInitialState(Xe)),Je=Ye[0],tt=Ye[1];return reactExports.useEffect(function(){var st=!0,rt=window.matchMedia(Xe),it=function(){st&&tt(!!rt.matches)};return rt.addListener(it),tt(rt.matches),function(){st=!1,rt.removeListener(it)}},[Xe]),Je},useMount=function(Xe){useEffectOnce(function(){Xe()})},useUnmount=function(Xe){var Ke=reactExports.useRef(Xe);Ke.current=Xe,useEffectOnce(function(){return function(){return Ke.current()}})},useRafState=function(Xe){var Ke=reactExports.useRef(0),Ye=reactExports.useState(Xe),Je=Ye[0],tt=Ye[1],st=reactExports.useCallback(function(rt){cancelAnimationFrame(Ke.current),Ke.current=requestAnimationFrame(function(){tt(rt)})},[]);return useUnmount(function(){cancelAnimationFrame(Ke.current)}),[Je,st]},useWindowScroll=function(){var Xe=useRafState(function(){return{x:isBrowser$1?window.pageXOffset:0,y:isBrowser$1?window.pageYOffset:0}}),Ke=Xe[0],Ye=Xe[1];return reactExports.useEffect(function(){var Je=function(){Ye(function(tt){var st=window.pageXOffset,rt=window.pageYOffset;return tt.x!==st||tt.y!==rt?{x:st,y:rt}:tt})};return Je(),on(window,"scroll",Je,{capture:!1,passive:!0}),function(){off(window,"scroll",Je)}},[]),Ke};const useKeyboard=(Xe,Ke,Ye)=>{const[Je,tt]=reactExports.useState([!1,null]),[st,rt]=reactExports.useState(null);return useMount(()=>{__vitePreload(()=>import("./keyboard-CqA7Zne8.js").then(it=>it.k),__vite__mapDeps([0,1])).then(it=>rt(it.default||it))}),reactExports.useEffect(()=>{if(!st)return;const it=at=>tt([!0,at]),ot=at=>tt([!1,at]);return st.bind(Xe,it,ot,!0),()=>{st.unbind(Xe,it,ot)}},[Xe,st]),useUpdateEffect(()=>{!Je[0]&&Ye||Je[0]&&Ke&&Ke()},[Je[0]]),Je};function SingleView({tokens:Xe}){return jsxRuntimeExports.jsx("div",{className:`${styles$G.single_view} no-fool`,children:Xe.map(Ke=>jsxRuntimeExports.jsx(FeedItem,{nft:Ke},Ke.token_id))})}function MasonryView({tokens:Xe}){return jsxRuntimeExports.jsx(ResponsiveMasonry,{children:Xe.map(Ke=>jsxRuntimeExports.jsx(FeedItem,{nft:Ke},Ke.key||Ke.token_id))})}function TokenCollection({query:Xe,label:Ke,namespace:Ye,showRestricted:Je=!1,overrideProtections:tt=!1,feeds_menu:st=!1,disable:rt=!1,variables:it={},swrParams:ot=[],itemsPerLoad:at=40,maxItems:lt=2e3,resultsPath:ut="tokens",tokenPath:ht="",keyPath:pt="token_id",emptyMessage:ft="no results",postProcessTokens:xt=At=>At,extractTokensFromResponse:vt=(At,{postProcessTokens:Et,resultsPath:wt,tokenPath:_t,keyPath:Ct})=>Et(get$5(At,wt).map(Tt=>({..._t?get$5(Tt,_t):Tt,key:get$5(Tt,Ct)})))}){const[At]=useUserStore(Gt=>[Gt.address]),[Et,wt]=useSearchParams(),{walletBlockMap:_t,nsfwMap:Ct,photosensitiveMap:Tt,objktBlockMap:St}=useSettings(),[Rt,Nt,Pt]=useLocalSettings(Gt=>[Gt.viewMode,Gt.toggleViewMode,Gt.toggleZen],shallow);useKeyboard("v",Nt),useKeyboard("z",Pt);const Bt=Et.get(Ye)?parseInt(Et.get(Ye),10):at,{data:Lt,error:zt}=useSWR(rt?null:[Ye,...ot],async Gt=>typeof Xe=="string"?distExports.request("https://teztok.teia.rocks/v1/graphql",Xe,{...it,...lt?{limit:lt}:{}}):Xe,{revalidateIfStale:!1,revalidateOnFocus:!1,use:[laggy]});if(zt)return jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsx("pre",{children:JSON.stringify(zt,null,2)})});if(!Lt)return jsxRuntimeExports.jsxs("div",{className:styles$G.feed_container,children:[jsxRuntimeExports.jsx(FeedToolbar,{feeds_menu:st}),jsxRuntimeExports.jsx("div",{className:styles$G.load_container,children:jsxRuntimeExports.jsx(Loading,{message:`Loading ${Ke||Ye}`})})]});if(_t===void 0)throw new Error("Please try again in a few minutes.",{cause:"Could not retrieve the ban list"});const Dt=vt(Lt,{postProcessTokens:xt,resultsPath:ut,tokenPath:ht,keyPath:pt}).filter(Gt=>Je?!0:_t.get(Gt.artist_address)!==1&&St.get(Gt.id)!==1).map(Gt=>{var Qt,jt,Ht;return{...Gt,isNSFW:!tt&&(Ct.get(Gt.token_id)===1||((Qt=Gt.teia_meta)==null?void 0:Qt.content_rating)===METADATA_CONTENT_RATING_MATURE),isPhotosensitive:!tt&&(Tt.get(Gt.token_id)===1||((Ht=(jt=Gt.teia_meta)==null?void 0:jt.accessibility)==null?void 0:Ht.hazards.includes(METADATA_ACCESSIBILITY_HAZARDS_PHOTOSENS))),isModerated:(Tt.get(Gt.token_id)===1||Ct.get(Gt.token_id)===1)&&Gt.artist_address===At}});if(!Dt.length)return jsxRuntimeExports.jsxs("div",{className:styles$G.feed_container,children:[jsxRuntimeExports.jsx(FeedToolbar,{feeds_menu:st}),jsxRuntimeExports.jsx("div",{className:styles$G.empty_section,children:jsxRuntimeExports.jsx("h1",{children:ft})})]});const Vt=Dt.slice(0,Bt);return jsxRuntimeExports.jsxs("div",{className:`${styles$G.feed_container} no-fool`,children:[jsxRuntimeExports.jsx(FeedToolbar,{feeds_menu:st}),jsxRuntimeExports.jsx(IconCache.Provider,{value:{},children:jsxRuntimeExports.jsx(InfiniteScroll,{className:`${styles$G.infinite_scroll} no-fool`,loadMore:()=>{wt({...Object.fromEntries(Et),[Ye]:Bt+at},{preventScrollReset:!0})},hasMore:Bt<Dt.length,children:Rt==="single"?jsxRuntimeExports.jsx(SingleView,{tokens:Vt}):jsxRuntimeExports.jsx(MasonryView,{tokens:Vt})})})]})}function TagFeed({tag:Xe,...Ke}){return jsxRuntimeExports.jsx(TokenCollection,{feeds_menu:!0,label:Xe,variables:{tag:Xe},swrParams:[Xe],maxItems:600,query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query getObjktsByTag($tag: String!, $limit: Int!) {
          tokens(
            where: {
              tags: { tag: { _eq: $tag } },
              editions: { _neq: 0 },
              fa2_address: { _eq: "${HEN_CONTRACT_FA2}" },
              metadata_status: { _eq: "processed" }
            }
            order_by: { minted_at: desc }
            limit: $limit
          ) {
            ...baseTokenFields
          }
        }
      `,...Ke})}const Tags$1=()=>{const{tag:Xe}=useParams();return jsxRuntimeExports.jsx(Page,{feed:!0,title:`Tag ${Xe}`,children:jsxRuntimeExports.jsx(TagFeed,{tag:Xe,namespace:`tag_${Xe}`})})},about="_about_f3kt5_221",styles$F={about},ReactComponent$4=function(Xe){return Object.keys(Xe).forEach(function(Ye){Xe[Ye]}),React.createElement("div",null,React.createElement("h1",null,"Teia is"),React.createElement("p",null,"... a collaborative artwork made of artworks, a place for ideas and creative works."),React.createElement("p",null,"... a non-profit, open-source online platform for trading digital assets as OBJKT NFTs."),React.createElement("p",null,"... a collective, aligning under the values of sustainability, accessibility, and equity."),React.createElement("p",null,"... owned and maintained by its community, built and improved by its participants."),React.createElement("p",null,"... an infinite work in progress."),React.createElement("hr",null),React.createElement("p",null,React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#core-values"},"Core Values")),React.createElement("p",null,React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#code-of-conduct"},"Code of Conduct")),React.createElement("p",null,React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#terms-and-conditions"},"Terms and Conditions")),React.createElement("p",null,React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#content-moderation"},"Account Restrictions/Content Moderation")),React.createElement("hr",null),React.createElement("h2",null,"Links"),React.createElement("p",null,"Documentation: ",React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki"},"wiki.teia.art")),React.createElement("p",null,"Blog: ",React.createElement("a",{href:"https://blog.teia.art"},"blog.teia.art")),React.createElement("p",null,"Announcements and Updates: ",React.createElement("a",{href:"https://twitter.com/TeiaCommunity"},"Twitter")),React.createElement("p",null,"Join the community: ",React.createElement("a",{href:"https://discord.com/invite/7pZrPCcgnG"},"discord")),React.createElement("p",null,"Report Harassment or Scams via the ",React.createElement("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLSeuBmNJjTiROSbHXXiQ5e-ia6fFywHKZ7Dj4-7sZtyltGY3yA/viewform"},"Report Form")),React.createElement("p",null,"Report Bugs via a ",React.createElement("a",{href:"https://github.com/teia-community/teia-ui/issues"},"Github issue")),React.createElement("p",null,"DAO Agora/Forum: ",React.createElement("a",{href:"https://discourse.teia.art/"},"discourse.teia.art")),React.createElement("p",null,"Code: ",React.createElement("a",{href:"https://github.com/teia-community"},"Teia Github")),React.createElement("p",null,"Community Curation: ",React.createElement("a",{href:"https://twitter.com/TeiaCommunity"},"@TeiaArt")),React.createElement("hr",null),React.createElement("h2",null,"Imprint"),React.createElement("p",null,React.createElement("strong",null,"Teia DAO LLC")),React.createElement("p",null,"Mail: info@teia.art"),React.createElement("p",null,"Principals office address: PO Box 852, Long Island Rd Majuro, Marshall Islands MH 96960"),React.createElement("p",null,"Registration Number: 10020-23 (Registrated via ",React.createElement("a",{href:"https://www.midao.org/"},"MIDAO Directory Services"),")"),React.createElement("hr",null),React.createElement("h2",null,"Tech Specs"),React.createElement("p",null,"The Teia Marketplace Interface and marketplace contract are ",React.createElement("a",{href:"https://github.com/teia-community/teia-ui"},"code forks")," based on the open source Tezos NFT marketplace ",React.createElement("a",{href:"https://github.com/hicetnunc2000"},"hic et nunc")," that have been and will be further developed and maintained by the Teia community."),React.createElement("p",null,"The ",React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Marketplace-Fees"},"marketplace fees")," are set to 2.5%."),React.createElement("hr",null),React.createElement("h2",null,"Smart Contracts:"),React.createElement("p",null,React.createElement("strong",null,"FA2 Token Contract:")," ",React.createElement("a",{href:"https://tzstats.com/KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton"},"KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton")," by ",React.createElement("a",{href:"https://github.com/hicetnunc2000/objkt-swap"},"hicetnunclab2000")),React.createElement("p",null,React.createElement("strong",null,"Minting Contract:")," ",React.createElement("a",{href:"https://tzkt.io/KT1Hkg5qeNhfwpKW4fXvq7HGZB9z2EnmCCA9/operations/"},"KT1Hkg5qeNhfwpKW4fXvq7HGZB9z2EnmCCA9")," by ",React.createElement("a",{href:"https://github.com/hicetnunc2000/objkt-swap"},"hicetnunclab2000")),React.createElement("p",null,React.createElement("strong",null,"Marketplace Contract:")," ",React.createElement("a",{href:"https://tzkt.io/KT1PHubm9HtyQEJ4BBpMTVomq6mhbfNZ9z5w/operations/"},"KT1PHubm9HtyQEJ4BBpMTVomq6mhbfNZ9z5w")," by ",React.createElement("a",{href:"https://github.com/teia-community/teia-smart-contracts/blob/main/python/contracts/teiaMarketplace_v1.py"},"Teia community")," - audited by ",React.createElement("a",{href:"https://github.com/InferenceAG/ReportPublications/blob/master/Inference%20AG%20-%20Teia%20community%20-%20marketplace%20%26%20multisig%20-%20v1.0.pdf"},"Inference AG")),React.createElement("p",null,React.createElement("strong",null,"Marketplace Contract Admin:")," ",React.createElement("a",{href:"https://tzkt.io/KT1PKBTVmdxfgkFvSeNUQacYiEFsPBw16B4P/operations/"},"KT1PKBTVmdxfgkFvSeNUQacYiEFsPBw16B4P")," - ",React.createElement("a",{href:"https://multisign.onrender.com/"},"multisig contract")," developed by the Teia Community"),React.createElement("hr",null),React.createElement("p",null,"All code and contracts above have been ",React.createElement("a",{href:"https://github.com/teia-community/teia-ui/blob/main/LICENSE"},"released under the MIT license.")),React.createElement("hr",null))};function About(){return jsxRuntimeExports.jsx(Page,{title:"about",children:jsxRuntimeExports.jsx("div",{className:styles$F.about,children:jsxRuntimeExports.jsx(ReactComponent$4,{})})})}function useClipboard(Xe,Ke){var Ye=reactExports.useState(!1),Je=Ye[0],tt=Ye[1],st=Ke&&Ke.successDuration;return reactExports.useEffect(function(){if(Je&&st){var rt=setTimeout(function(){tt(!1)},st);return function(){clearTimeout(rt)}}},[Je,st]),[Je,function(){var rt=r$1(Xe);tt(rt)}]}const identicon$2="_identicon_1g3ye_216",smol="_smol_1g3ye_229",styles$E={identicon:identicon$2,smol},alphabet58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",base58=base(alphabet58),s=64;function bound(Xe,Ke){return Math.abs((Ke-Xe)%Ke)}function corner({x:Xe,y:Ke}){const tt=s-13,st=s*2-26;return Xe+Ke<13||Xe+Ke>st||Xe>tt&&Ke<13||Ke>tt&&Xe<13}function newPath(Xe){return Xe.substr(-2)!=="M "}function dummyAddress(){const Xe=[{tag:0,curve:0,prefix:"tz1"},{tag:0,curve:1,prefix:"tz2"},{tag:0,curve:2,prefix:"tz3"},{tag:1,prefix:"KT1"}],Ke=Xe[Math.floor(Math.random()*Xe.length)],Ye=window.crypto.getRandomValues(new Uint8Array(20)),Je=new Uint8Array(22);Je[0]=Ke.tag,Ke.tag===0&&Ke.curve&&(Je[1]=Ke.curve),Je.set(Ye,Ke.tag===0?2:1),Ke.tag===1&&(Je[21]=0);const tt=base58.encode(Je);return Ke.prefix+tt}function avatar(Xe){Xe=Xe||dummyAddress();const Ke=base58.decode(Xe.trim().substr(3)),Ye=buffer$2.Buffer.from(Ke).toString("hex"),Je=Ye.split("").reduce((ot,at)=>ot+parseInt(at,16),0),tt=Ye.split("").slice(-5).reduce((ot,at)=>ot+parseInt(at,16),0),st=[];for(let ot=0;ot<Ye.length-2;ot++){const at=parseInt(`${Ye[ot]}${Ye[ot+1]}${Ye[ot+2]}`,16)+Je,lt=bound(Math.round((at||s/2)/s),s),ut=bound(Math.round(at/(lt||s/2)),s);st.push({x:lt,y:ut,n:at})}let rt="M ",it=!1;for(let ot=0;ot<st.length;ot++){const at=st[ot];if(newPath(rt))if(corner(at)&&at.n%2===0&&(at.x+at.y)%7<2){const lt=at.x%5+at.y%7;rt+=`
          M ${bound(at.x+s/10,s)-lt}, ${bound(at.y+s/10,s)}
          a ${lt},${lt} 0 1,0 ${lt*2},0
          a ${lt},${lt} 0 1,0 -${lt*2},0
        `,it=!0}else if(at.n%7===3){const lt=at.x%5+at.y%7;rt+=`
          M ${bound(at.x+s/10,s)-lt}, ${bound(at.y+s/10,s)}
          a ${lt},${lt} 0 1,0 ${lt*2},0
          a ${lt},${lt} 0 1,0 -${lt*2},0
        `,it=!0}else at.n%2===0&&at.x%5<3?(rt+=` M ${at.x},${at.y}`,rt+=` L ${at.x},${at.y}`,it=!1):at.n%2===1?(rt+=` M ${at.x},${at.y}`,rt+=` L ${at.y},${at.x}`,it=!1):(rt+=` M ${at.x},${at.y}`,rt+=` L ${at.x},${at.y}`,it=!1,ot<st.length-2&&(rt+=` ${st[ot+1].x},${st[ot+1].y}`,rt+=` ${st[ot+2].x},${st[ot+2].y}`));else it?(rt+=` M ${at.x},${at.y}`,rt+=` L ${at.x},${at.y}`,it=!1):(rt+=` ${at.x},${at.y}`,it=!1)}return[rt,tt]}const identicons=[(Xe,Ke,Ye)=>jsxRuntimeExports.jsx("svg",{className:Ye,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{id:"path",d:`${Xe}`})}),(Xe,Ke,Ye)=>jsxRuntimeExports.jsxs("svg",{className:Ye,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("filter",{id:`filter${Ke}`,x:"0%",y:"0%",width:"100%",height:"100%",filterUnits:"objectBoundingBox",primitiveUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("feMorphology",{operator:"erode",radius:"3 1",x:"0%",y:"0%",width:"100%",height:"100%",in:"SourceGraphic",result:"morphology"})}),jsxRuntimeExports.jsx("path",{id:"path",d:`${Xe}`,style:{filter:`url(#filter${Ke})`}})]}),(Xe,Ke,Ye)=>jsxRuntimeExports.jsxs("svg",{className:Ye,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsxs("filter",{id:`filter${Ke}`,children:[jsxRuntimeExports.jsx("feTurbulence",{type:"turbulence",baseFrequency:"0.005",numOctaves:"4",result:"turbulence"}),jsxRuntimeExports.jsx("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"30",xChannelSelector:"R",yChannelSelector:"G"}),jsxRuntimeExports.jsx("feMorphology",{operator:"dilate",radius:"0.5"}),jsxRuntimeExports.jsx("feMorphology",{operator:"erode",radius:"0.5"})]}),jsxRuntimeExports.jsx("path",{id:"path",d:`${Xe}`,style:{filter:`url(#filter${Ke})`}})]}),(Xe,Ke,Ye)=>jsxRuntimeExports.jsxs("svg",{className:Ye,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsxs("filter",{id:`filter${Ke}`,children:[jsxRuntimeExports.jsx("feTurbulence",{type:"turbulence",baseFrequency:"0.005",numOctaves:"4",result:"turbulence"}),jsxRuntimeExports.jsx("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"50",xChannelSelector:"R",yChannelSelector:"G"}),jsxRuntimeExports.jsx("feMorphology",{operator:"erode",radius:"0.5"})]}),jsxRuntimeExports.jsx("path",{id:"path",d:`${Xe}`,style:{filter:`url(#filter${Ke})`}})]}),(Xe,Ke,Ye)=>jsxRuntimeExports.jsxs("svg",{className:Ye,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsxs("filter",{id:`filter${Ke}`,children:[jsxRuntimeExports.jsx("feTurbulence",{type:"turbulence",baseFrequency:"0.5 0",numOctaves:"1",result:"turbulence"}),jsxRuntimeExports.jsx("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"10",xChannelSelector:"R",yChannelSelector:"G"})]}),jsxRuntimeExports.jsx("path",{id:"path",d:`${Xe}`,style:{filter:`url(#filter${Ke})`}})]}),(Xe,Ke,Ye)=>jsxRuntimeExports.jsxs("svg",{className:Ye,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsxs("filter",{id:`filter${Ke}`,children:[jsxRuntimeExports.jsx("feTurbulence",{type:"turbulence",baseFrequency:"0.05 0.5",numOctaves:"1",result:"turbulence"}),jsxRuntimeExports.jsx("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"10",xChannelSelector:"R",yChannelSelector:"G"})]}),jsxRuntimeExports.jsx("path",{id:"path",d:`${Xe}`,style:{filter:`url(#filter${Ke})`}})]}),(Xe,Ke,Ye)=>jsxRuntimeExports.jsxs("svg",{className:Ye,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("filter",{id:`filter${Ke}`,children:jsxRuntimeExports.jsx("feMorphology",{operator:"erode",radius:"1"})}),jsxRuntimeExports.jsx("path",{id:"path",d:`${Xe}`,style:{filter:`url(#filter${Ke})`}})]}),(Xe,Ke,Ye)=>jsxRuntimeExports.jsxs("svg",{className:Ye,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("filter",{id:`filter${Ke}`,children:jsxRuntimeExports.jsx("feMorphology",{operator:"dilate",radius:"1.2"})}),jsxRuntimeExports.jsx("path",{id:"path",d:`${Xe}`,style:{filter:`url(#filter${Ke})`}})]}),(Xe,Ke,Ye)=>jsxRuntimeExports.jsxs("svg",{className:Ye,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsxs("filter",{id:`filter${Ke}`,x:"0",y:"0",width:"100%",height:"100%",children:[jsxRuntimeExports.jsx("feTile",{in:"SourceGraphic",x:"16",y:"16",width:"98",height:"98"}),jsxRuntimeExports.jsx("feTile",{})]}),jsxRuntimeExports.jsx("path",{id:"path",d:`${Xe}`,style:{filter:`url(#filter${Ke})`}})]}),(Xe,Ke,Ye)=>jsxRuntimeExports.jsxs("svg",{className:Ye,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsxs("filter",{id:`filter${Ke}`,children:[jsxRuntimeExports.jsx("feTurbulence",{type:"turbulence",baseFrequency:"0.05",numOctaves:"2",result:"turbulence"}),jsxRuntimeExports.jsx("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]}),jsxRuntimeExports.jsx("path",{id:"path",d:`${Xe}`,style:{filter:`url(#filter${Ke})`}})]})],Identicon=({address:Xe="",logo:Ke,className:Ye})=>{const Je=reactExports.useMemo(()=>{if(Ke)return Ke.startsWith("ipfs://")?HashToURL(Ke,"CDN",{size:"raw"}):Ke},[Ke]),[tt,st]=reactExports.useState(!1),[rt,it]=reactExports.useState(!1),ot=classNames$1(styles$E.identicon,Ye,rt?styles$E.smol:""),at=({target:pt})=>{const ft=pt.naturalWidth,xt=pt.naturalHeight;ft+xt<256&&it(!0)};if(Je)return tt?jsxRuntimeExports.jsx("video",{className:ot,"aria-label":"identicon",src:Je}):jsxRuntimeExports.jsx(buildExports.LazyLoadImage,{className:ot,src:Je,alt:"identicon",onLoad:at,onError:pt=>{console.error(pt),st(!0)}});const[lt,ut]=avatar(Xe);return identicons[ut%identicons.length](lt,Xe,ot)},Identicon$1=reactExports.memo(Identicon);function reorderBigmapData(Xe,Ke,Ye=!1){const Je=Xe?{}:void 0;return Xe==null||Xe.forEach(tt=>Je[Ke?tt.key[Ke]:tt.key]=Ye?bytes2Char(tt.value):tt.value),Je}function useBalance(Xe){const{data:Ke,mutate:Ye}=useSWR(`/v1/accounts/${Xe}/balance`,getTzktData);return[Ke?Ke/1e6:0,Ye]}function useDaoTokenBalance(Xe){const Ke={"token.contract":DAO_TOKEN_CONTRACT,"token.tokenId":"0",account:Xe,select:"balance"},{data:Ye,mutate:Je}=useSWR(Xe?["/v1/tokens/balances",Ke]:null,getTzktData);return[Ye!=null&&Ye[0]?parseInt(Ye[0])/DAO_TOKEN_DECIMALS:0,Je]}function useStorage(Xe){const{data:Ke,mutate:Ye}=useSWR(Xe?`/v1/contracts/${Xe}/storage`:null,getTzktData);return[Ke,Ye]}function useDaoGovernanceParameters(Xe){const Ke={limit:1e4,active:!0,select:"key,value"},{data:Ye,mutate:Je}=useSWR(Xe!=null&&Xe.governance_parameters?[`/v1/bigmaps/${Xe.governance_parameters}/keys`,Ke]:null,getTzktData);return[reorderBigmapData(Ye),Je]}function useDaoProposals(Xe){const Ke={limit:1e4,active:!0,select:"key,value"},{data:Ye,mutate:Je}=useSWR(Xe!=null&&Xe.proposals?[`/v1/bigmaps/${Xe.proposals}/keys`,Ke]:null,getTzktData);return[reorderBigmapData(Ye),Je]}function useDaoRepresentatives(Xe){const{data:Ke,mutate:Ye}=useSWR(Xe!=null&&Xe.representatives?`/v1/contracts/${Xe.representatives}/storage`:null,getTzktData);return[Ke!=null&&Ke.representatives?Object.fromEntries(Object.entries(Ke.representatives).sort(([,tt],[,st])=>tt<st?-1:tt>st?1:0)):void 0,Ye]}function useDaoUserVotes(Xe,Ke){const Ye={"key.address":Xe,limit:1e4,active:!0,select:"key,value"},{data:Je,mutate:tt}=useSWR(Xe&&(Ke!=null&&Ke.token_votes)?[`/v1/bigmaps/${Ke.token_votes}/keys`,Ye]:null,getTzktData);return[reorderBigmapData(Je,"nat"),tt]}function useDaoCommunityVotes(Xe,Ke){const Ye={"key.string":Xe,limit:1e4,active:!0,select:"key,value"},{data:Je,mutate:tt}=useSWR(Xe&&(Ke!=null&&Ke.representatives_votes)?[`/v1/bigmaps/${Ke.representatives_votes}/keys`,Ye]:null,getTzktData);return[reorderBigmapData(Je,"nat"),tt]}function useAliases(Xe){(Xe==null?void 0:Xe.length)===1&&Xe.push(Xe[0]);const Ke={"key.in":Xe==null?void 0:Xe.join(","),limit:1e4,active:!0,select:"key,value"},{data:Ye,mutate:Je}=useSWR((Xe==null?void 0:Xe.length)>0?["/v1/bigmaps/3919/keys",Ke]:null,getTzktData);return[reorderBigmapData(Ye,void 0,!0),Je]}function useDaoUsersAliases(Xe,Ke,Ye){const Je=new Set;return Xe&&Je.add(Xe),Ke&&Object.keys(Ke).forEach(tt=>Je.add(tt)),Ye&&Object.values(Ye).forEach(tt=>{Je.add(tt.issuer),tt.kind.transfer_mutez?tt.kind.transfer_mutez.forEach(st=>Je.add(st.destination)):tt.kind.transfer_token&&tt.kind.transfer_token.distribution.forEach(st=>Je.add(st.destination))}),useAliases(Array.from(Je))}function useDaoMemberCount(Xe){const Ke={"token.contract":DAO_TOKEN_CONTRACT,"token.tokenId":"0","balance.gt":Xe*DAO_TOKEN_DECIMALS},{data:Ye,mutate:Je}=useSWR(["/v1/tokens/balances/count",Ke],getTzktData);return[Ye?parseInt(Ye):0,Je]}function usePolls(Xe){const Ke={limit:1e4,active:!0,select:"key,value"},{data:Ye,mutate:Je}=useSWR(Xe!=null&&Xe.polls?[`/v1/bigmaps/${Xe.polls}/keys`,Ke]:null,getTzktData);return[reorderBigmapData(Ye),Je]}function useUserPollVotes(Xe,Ke){const Ye={"key.address":Xe,limit:1e4,active:!0,select:"key,value"},{data:Je,mutate:tt}=useSWR(Xe&&(Ke!=null&&Ke.votes)?[`/v1/bigmaps/${Ke.votes}/keys`,Ye]:null,getTzktData);return[reorderBigmapData(Je,"nat"),tt]}function usePollsUsersAliases(Xe,Ke){const Ye=new Set;return Xe&&Ye.add(Xe),Ke&&Object.values(Ke).forEach(Je=>{Ye.add(Je.issuer)}),useAliases(Array.from(Ye))}function useObjkt(Xe){const{data:Ke,mutate:Ye}=useSWR(Xe?["/poll/objkt/",Xe]:null,async(Je,tt)=>fetchObjktDetails(tt),{revalidateIfStale:!1,revalidateOnFocus:!1});return[Ke,Ye]}const fetchTokenMetadataForCopyrightSearch=async(Xe,Ke)=>{var st,rt,it,ot;if(Xe===HEN_CONTRACT_FA2)try{const at=await fetchObjktDetails(Ke.toString());if(console.log("swr result ",at),at){let lt=[];return(st=at.artist_profile)!=null&&st.is_split&&((it=(rt=at.artist_profile)==null?void 0:rt.split_contract)!=null&&it.shareholders)?lt=at.artist_profile.split_contract.shareholders.map(ut=>ut.shareholder_address):lt=[at.artist_address],{contract:{address:at.fa2_address},tokenId:at.token_id,metadata:{name:at.name,description:at.description,displayUri:at.display_uri,thumbnailUri:at.thumbnail_uri,artifactUri:at.artifact_uri,mimeType:at.mime_type,creators:lt,decimals:"0",royalties:at.royalties,editions:at.editions,mintedAt:at.minted_at,tags:((ot=at.tags)==null?void 0:ot.map(ut=>ut.tag))||[],artist_profile:at.artist_profile,teia_meta:at.teia_meta,rights:at.rights,right_uri:at.right_uri}}}}catch(at){console.log("Error fetching from TEIA GraphQL, falling back to TzKT:",at)}const Ye=`https://api.tzkt.io/v1/tokens?contract=${Xe}&tokenId=${Ke}`,Je=await fetch(Ye);if(!Je.ok)throw new Error("Failed to fetch metadata");return(await Je.json())[0]};async function fetchUserCopyrights(Xe){if(!Xe)return[];const Ke=`https://api.tzkt.io/v1/contracts/${COPYRIGHT_CONTRACT}/bigmaps/copyrights/keys?key.address=${Xe}&limit=100&active=true`;try{const Ye=await fetch(Ke);if(!Ye.ok)throw new Error(`TzKT API error: ${Ye.statusText}`);return await Ye.json()}catch(Ye){return console.error("Failed to fetch user copyrights:",Ye),[]}}async function fetchAllCopyrights(){const Xe=`https://api.tzkt.io/v1/contracts/${COPYRIGHT_CONTRACT}/bigmaps/copyrights/keys?limit=100&active=true`;try{const Ke=await fetch(Xe);if(!Ke.ok)throw new Error(`TzKT API error: ${Ke.statusText}`);return await Ke.json()}catch(Ke){return console.error("Failed to fetch all copyrights:",Ke),[]}}async function fetchProposals(){const Xe=`https://api.tzkt.io/v1/contracts/${COPYRIGHT_CONTRACT}/bigmaps/proposals/keys?limit=100&active=true`;try{const Ke=await fetch(Xe);if(!Ke.ok)throw new Error(`TzKT API error: ${Ke.statusText}`);return await Ke.json()}catch(Ke){return console.error("Failed to fetch proposals:",Ke),[]}}async function fetchAllVotes(){const Xe=`https://api.tzkt.io/v1/contracts/${COPYRIGHT_CONTRACT}/bigmaps/votes/keys?limit=500&active=true`;try{const Ke=await fetch(Xe);if(!Ke.ok)throw new Error(`TzKT API error: ${Ke.statusText}`);return await Ke.json()}catch(Ke){return console.error("Failed to fetch votes:",Ke),[]}}async function fetchExpirationTime(){const Xe=`https://api.tzkt.io/v1/contracts/${DAO_TREASURY_CONTRACT}/storage?path=expiration_time`;try{const Ke=await fetch(Xe);if(!Ke.ok)throw new Error(`TzKT API error: ${Ke.statusText}`);const Ye=await Ke.json();return parseInt(Ye)}catch(Ke){return console.error("Failed to fetch expiration_time:",Ke),0}}async function fetchAgreementText(){const Xe=`https://api.tzkt.io/v1/contracts/${COPYRIGHT_CONTRACT}/storage?path=agreement_text`;try{const Ke=await fetch(Xe);if(!Ke.ok)throw new Error(`TzKT API error: ${Ke.statusText}`);return await Ke.json()}catch(Ke){return console.error("Failed to fetch expiration_time:",Ke),0}}const identicon$1="_identicon_1j1cd_216",square="_square_1j1cd_221",profile="_profile_1j1cd_233",info$2="_info_1j1cd_240",user$1="_user_1j1cd_243",user_pfp="_user_pfp_1j1cd_259",socials="_socials_1j1cd_267",menu$1="_menu_1j1cd_278",container$g="_container_1j1cd_291",tag$1="_tag_1j1cd_376",top="_top_1j1cd_393",restricted$1="_restricted_1j1cd_448",tools="_tools_1j1cd_465",styles$D={identicon:identicon$1,square,profile,info:info$2,user:user$1,user_pfp,socials,menu:menu$1,container:container$g,tag:tag$1,top,restricted:restricted$1,tools};async function reverseRecord(Xe){var Ye,Je,tt,st;const Ke=await axios.post("https://api.tezos.domains/graphql",{query:"query reverseRecord($address: String!) { reverseRecord(address: $address) { domain { name }}}",variables:{address:Xe}},{headers:{"Content-Type":"application/json"}});return((st=(tt=(Je=(Ye=Ke==null?void 0:Ke.data)==null?void 0:Ye.data)==null?void 0:Je.reverseRecord)==null?void 0:tt.domain)==null?void 0:st.name)||""}function Profile({user:Xe}){var lt,ut,ht,pt,ft,xt,vt,At,Et,wt,_t,Ct,Tt,St,Rt,Nt,Pt,Bt,Lt,zt,Dt,Vt,Gt,Qt,jt,Ht,Yt,Jt,Zt,nn,cn,an,mn,dn,fn,Sn,Tn,Nn,gn,_n,kn,Wt,sn,hn,En,An,wn,Fn,Hn,Yn,Un,Kn,hs,zn,es,bn,pn,Ln,Mn,ls,_s,as,In,Pn,qn,Wn,ts,us,xs,vs,gs,Ss,Es,Is;const[Ke,Ye]=useClipboard((ut=(lt=Xe.extras)==null?void 0:lt.profile)==null?void 0:ut.discord),[Je,tt]=useClipboard(Xe.address,{successDuration:2500}),[st]=useDaoTokenBalance(Xe.address),rt=useDisplayStore(qs=>qs.coreParticipants),[it,ot]=reactExports.useState(""),at=reactExports.useCallback(()=>{reverseRecord(Xe.address).then(qs=>{ot(qs)})},[Xe.address]);return reactExports.useEffect(()=>{at()},[at]),jsxRuntimeExports.jsx("div",{className:styles$D.container,children:jsxRuntimeExports.jsxs("div",{className:styles$D.profile,children:[jsxRuntimeExports.jsx("div",{className:styles$D.user_pfp,children:jsxRuntimeExports.jsx(Identicon$1,{className:styles$D.identicon,address:Xe.address,logo:Xe.identicon})}),jsxRuntimeExports.jsxs("div",{className:styles$D.info,children:[jsxRuntimeExports.jsx("p",{className:styles$D.user,children:Xe.subjkt||Xe.alias}),Xe.description&&jsxRuntimeExports.jsx("p",{children:Xe.description}),rt&&rt.length>0&&jsxRuntimeExports.jsx(ParticipantList$1,{title:!1,participants:rt}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"1em",alignItems:"center"},children:[jsxRuntimeExports.jsx(Button,{href:`https://tzkt.io/${Xe.address}`,children:it||walletPreview(Xe.address)}),jsxRuntimeExports.jsx(Button,{className:styles$D.square,onClick:tt}),Je&&"Copied!"]}),st>=0&&jsxRuntimeExports.jsxs("p",{children:[Math.round(st*10)/10," ",jsxRuntimeExports.jsx("a",{href:"dao",children:"TEIA"})]}),jsxRuntimeExports.jsxs("div",{className:styles$D.socials,children:[((pt=(ht=Xe.extras)==null?void 0:ht.profile)==null?void 0:pt.twitter)&&jsxRuntimeExports.jsx(Button,{alt:`User profile on Twitter (@${(xt=(ft=Xe.extras)==null?void 0:ft.profile)==null?void 0:xt.twitter})`,href:`https://twitter.com/${(At=(vt=Xe.extras)==null?void 0:vt.profile)==null?void 0:At.twitter}`,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsxRuntimeExports.jsx("path",{d:"M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"})})}),((wt=(Et=Xe.extras)==null?void 0:Et.profile)==null?void 0:wt.discord)&&jsxRuntimeExports.jsx(Button,{alt:`User profile on Discord, click to copy (${(Ct=(_t=Xe.extras)==null?void 0:_t.profile)==null?void 0:Ct.discord})`,onClick:Ye,children:jsxRuntimeExports.jsx("span",{className:styles$D.top,"data-position":"top","data-tooltip":Ke?"Copied":(St=(Tt=Xe.extras)==null?void 0:Tt.profile)==null?void 0:St.discord,style:{marginRight:"10px"},children:jsxRuntimeExports.jsx("svg",{width:"20",height:"15",viewBox:"0 0 20 15",xmlns:"http://www.w3.org/2000/svg",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsxRuntimeExports.jsx("path",{d:"M16.9308 1.24342C15.6561 0.667894 14.2892 0.243873 12.8599 0.00101874C12.8339 -0.00366827 12.8079 0.00804483 12.7945 0.0314716C12.6187 0.339138 12.4239 0.740513 12.2876 1.05599C10.7503 0.829542 9.22099 0.829542 7.71527 1.05599C7.57887 0.733501 7.37707 0.339138 7.20048 0.0314716C7.18707 0.00882646 7.16107 -0.00288664 7.13504 0.00101874C5.70659 0.243097 4.33963 0.667118 3.06411 1.24342C3.05307 1.2481 3.04361 1.25592 3.03732 1.26606C0.444493 5.07759 -0.265792 8.79544 0.0826501 12.4672C0.0842267 12.4852 0.0944749 12.5023 0.108665 12.5133C1.81934 13.7494 3.47642 14.4998 5.10273 14.9973C5.12876 15.0051 5.15634 14.9957 5.1729 14.9746C5.55761 14.4577 5.90054 13.9126 6.19456 13.3394C6.21192 13.3059 6.19535 13.266 6.15989 13.2528C5.61594 13.0497 5.098 12.8022 4.59977 12.5211C4.56037 12.4984 4.55721 12.443 4.59347 12.4164C4.69831 12.3391 4.80318 12.2587 4.9033 12.1775C4.92141 12.1626 4.94665 12.1595 4.96794 12.1689C8.24107 13.6393 11.7846 13.6393 15.0191 12.1689C15.0404 12.1587 15.0657 12.1619 15.0846 12.1767C15.1847 12.2579 15.2895 12.3391 15.3952 12.4164C15.4314 12.443 15.4291 12.4984 15.3897 12.5211C14.8914 12.8076 14.3735 13.0497 13.8288 13.252C13.7933 13.2653 13.7775 13.3059 13.7949 13.3394C14.0952 13.9118 14.4381 14.4569 14.8157 14.9738C14.8315 14.9957 14.8599 15.0051 14.8859 14.9973C16.5201 14.4998 18.1772 13.7494 19.8879 12.5133C19.9028 12.5023 19.9123 12.4859 19.9139 12.468C20.3309 8.22302 19.2154 4.53566 16.9568 1.26684C16.9513 1.25592 16.9419 1.2481 16.9308 1.24342ZM6.68335 10.2315C5.69792 10.2315 4.88594 9.34128 4.88594 8.24802C4.88594 7.15476 5.68217 6.26456 6.68335 6.26456C7.69239 6.26456 8.49651 7.16258 8.48073 8.24802C8.48073 9.34128 7.68451 10.2315 6.68335 10.2315ZM13.329 10.2315C12.3435 10.2315 11.5316 9.34128 11.5316 8.24802C11.5316 7.15476 12.3278 6.26456 13.329 6.26456C14.338 6.26456 15.1421 7.16258 15.1264 8.24802C15.1264 9.34128 14.338 10.2315 13.329 10.2315Z"})})})}),((Nt=(Rt=Xe.extras)==null?void 0:Rt.profile)==null?void 0:Nt.github)&&jsxRuntimeExports.jsx(Button,{alt:`User profile on Github (@${(Bt=(Pt=Xe.extras)==null?void 0:Pt.profile)==null?void 0:Bt.github})`,href:`https://github.com/${(zt=(Lt=Xe.extras)==null?void 0:Lt.profile)==null?void 0:zt.github}`,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsxRuntimeExports.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})})}),((Vt=(Dt=Xe.extras)==null?void 0:Dt.profile)==null?void 0:Vt.gitlab)&&jsxRuntimeExports.jsx(Button,{alt:`User profile on gitlab (@${(Qt=(Gt=Xe.extras)==null?void 0:Gt.profile)==null?void 0:Qt.gitlab})`,href:`https://gitlab.com/${(Ht=(jt=Xe.extras)==null?void 0:jt.profile)==null?void 0:Ht.gitlab}`,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsxRuntimeExports.jsx("path",{d:"m21.94 13.11-1.05-3.22c0-.03-.01-.06-.02-.09l-2.11-6.48a.859.859 0 0 0-.8-.57c-.36 0-.68.25-.79.58l-2 6.17H8.84L6.83 3.33a.851.851 0 0 0-.79-.58c-.37 0-.69.25-.8.58L3.13 9.82v.01l-1.07 3.28c-.16.5.01 1.04.44 1.34l9.22 6.71c.17.12.39.12.56-.01l9.22-6.7c.43-.3.6-.84.44-1.34M8.15 10.45l2.57 7.91-6.17-7.91m8.73 7.92 2.47-7.59.1-.33h3.61l-5.59 7.16m4.1-13.67 1.81 5.56h-3.62m-1.3.95-1.79 5.51L12 19.24l-2.86-8.79M6.03 3.94 7.84 9.5H4.23m-1.18 4.19c-.09-.07-.13-.19-.09-.29l.79-2.43 5.82 7.45m11.38-4.73-6.51 4.73.02-.03 5.79-7.42.79 2.43c.04.1 0 .22-.09.29"})})}),((Jt=(Yt=Xe.extras)==null?void 0:Yt.profile)==null?void 0:Jt.site)&&jsxRuntimeExports.jsx(Button,{alt:`User web site ${(nn=(Zt=Xe.extras)==null?void 0:Zt.profile)==null?void 0:nn.site}`,href:`${(an=(cn=Xe.extras)==null?void 0:cn.profile)==null?void 0:an.site}`,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 24 24",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsxRuntimeExports.jsx("path",{d:"M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2 0-.68.06-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.923 7.923 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8.008 8.008 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.65 15.65 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z"})})}),((dn=(mn=Xe.extras)==null?void 0:mn.profile)==null?void 0:dn.email)&&jsxRuntimeExports.jsx(Button,{alt:`User email address ${(Sn=(fn=Xe.extras)==null?void 0:fn.profile)==null?void 0:Sn.email}`,href:`mailto: ${(Nn=(Tn=Xe.extras)==null?void 0:Tn.profile)==null?void 0:Nn.email}`,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 -2.5 20 20",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsxRuntimeExports.jsx("path",{d:"m18 2.291-8 7.027-8-7.037V2h16v.291ZM2 13V4.945l8 7.035 8-7.027V13H2Zm-2 2h20V0H0v15Z"})})}),((_n=(gn=Xe.extras)==null?void 0:gn.profile)==null?void 0:_n.reddit)&&jsxRuntimeExports.jsx(Button,{alt:`User reddit account (${(Wt=(kn=Xe.extras)==null?void 0:kn.profile)==null?void 0:Wt.reddit})`,href:`https://www.reddit.com/${(hn=(sn=Xe.extras)==null?void 0:sn.profile)==null?void 0:hn.reddit}`,children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 279.748 279.748",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:[jsxRuntimeExports.jsx("path",{d:"M279.748 133.142c0-19.299-15.701-35-35-35-10.768 0-20.674 4.812-27.279 13.064-18.532-8.431-39.663-13.626-62.015-15.271l19.206-60.692 42.895 9.294c3.285 12.782 14.901 22.258 28.693 22.258 16.336 0 29.627-13.29 29.627-29.626 0-16.336-13.291-29.627-29.627-29.627-11.801 0-21.999 6.941-26.759 16.95l-49.497-10.725a10.002 10.002 0 0 0-11.651 6.756L134.636 95.43c-26.164.638-50.988 6.053-72.356 15.775-6.606-8.251-16.512-13.063-27.28-13.063-19.299 0-35 15.701-35 35 0 9.373 3.683 18.173 10.222 24.709-3.9 8.37-5.875 17.076-5.875 25.936 0 24.048 14.396 46.492 40.538 63.199 25.447 16.264 59.183 25.221 94.989 25.221 35.808 0 69.542-8.957 94.989-25.221 26.142-16.707 40.538-39.151 40.538-63.199 0-8.859-1.975-17.565-5.875-25.936 6.539-6.537 10.222-15.336 10.222-24.709zM15.369 145.139c-2.212-3.59-3.369-7.688-3.369-11.997 0-12.682 10.317-23 23-23 5.444 0 10.558 1.851 14.649 5.258-14.622 8.302-26.132 18.289-34.28 29.739zm52.671 20.266c0-13.785 11.215-25 25-25s25 11.215 25 25-11.215 25-25 25-25-11.215-25-25zm123.119 57.054c-9.745 10.637-29.396 17.244-51.285 17.244-21.888 0-41.539-6.607-51.284-17.244a9.937 9.937 0 0 1-2.617-7.192 9.933 9.933 0 0 1 3.235-6.937 9.974 9.974 0 0 1 6.754-2.627c2.797 0 5.484 1.183 7.373 3.244 5.803 6.333 20.827 10.756 36.539 10.756s30.737-4.423 36.539-10.756a10.022 10.022 0 0 1 7.374-3.244c2.508 0 4.906.933 6.755 2.627a9.928 9.928 0 0 1 3.234 6.937 9.933 9.933 0 0 1-2.617 7.192zm-4.451-32.054c-13.785 0-25-11.215-25-25s11.215-25 25-25 25 11.215 25 25-11.215 25-25 25zm77.671-45.266c-8.147-11.45-19.657-21.436-34.28-29.739 4.092-3.408 9.205-5.258 14.649-5.258 12.683 0 23 10.318 23 23 0 4.309-1.157 8.407-3.369 11.997z"})," "]})}),((An=(En=Xe.extras)==null?void 0:En.profile)==null?void 0:An.mailchain)&&jsxRuntimeExports.jsx(Button,{alt:`User mailchain address (${(Fn=(wn=Xe.extras)==null?void 0:wn.profile)==null?void 0:Fn.mailchain})`,href:`https://app.mailchain.com/mailto:${(Yn=(Hn=Xe.extras)==null?void 0:Hn.profile)==null?void 0:Yn.mailchain}@tezos.mailchain.com`,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsxRuntimeExports.jsx("path",{d:"M7.879 6.894a.985.985 0 0 0-.984.985v8.242c0 .543.44.984.984.984h8.242a.985.985 0 0 0 .984-.984V7.88a.985.985 0 0 0-.984-.985zM16.12 18.65H7.88a2.529 2.529 0 0 1-2.527-2.528V7.88a2.529 2.529 0 0 1 2.527-2.527h8.242a2.529 2.529 0 0 1 2.527 2.527v8.242a2.529 2.529 0 0 1-2.527 2.528zm.125-15.106a.878.878 0 0 0-.621.258l-1.7 1.7a.878.878 0 0 0 0 1.246l3.329 3.328a.878.878 0 0 0 1.246 0l1.7-1.7a.878.878 0 0 0 0-1.246L16.87 3.801a.887.887 0 0 0-.625-.258Zm1.633 8.332a2.424 2.424 0 0 1-1.715-.707l-3.332-3.332a2.407 2.407 0 0 1-.707-1.714c0-.649.25-1.258.707-1.715l1.7-1.7a2.407 2.407 0 0 1 1.714-.706c.649 0 1.258.25 1.715.707l3.332 3.332c.457.457.707 1.066.707 1.714 0 .649-.25 1.258-.707 1.715l-1.7 1.7a2.424 2.424 0 0 1-1.714.706zM7.754 3.543a.887.887 0 0 0-.625.258L3.8 7.13a.878.878 0 0 0 0 1.246l1.699 1.7a.878.878 0 0 0 1.246 0l3.328-3.328a.882.882 0 0 0 0-1.246L8.375 3.8a.878.878 0 0 0-.621-.258ZM6.12 11.876c-.648 0-1.258-.25-1.715-.707L2.707 9.47A2.407 2.407 0 0 1 2 7.754c0-.648.25-1.257.707-1.714L6.04 2.708A2.407 2.407 0 0 1 7.754 2c.648 0 1.258.25 1.715.707l1.699 1.699a2.428 2.428 0 0 1 0 3.43l-3.332 3.332a2.407 2.407 0 0 1-1.715.707Zm0 1.794a.878.878 0 0 0-.621.257l-1.7 1.7a.878.878 0 0 0 0 1.246L7.13 20.2a.878.878 0 0 0 1.246 0l1.7-1.7a.878.878 0 0 0 0-1.246l-3.329-3.328a.887.887 0 0 0-.625-.258ZM7.754 22a2.424 2.424 0 0 1-1.715-.708l-3.332-3.332A2.407 2.407 0 0 1 2 16.247c0-.649.25-1.258.707-1.715l1.7-1.7a2.407 2.407 0 0 1 1.714-.706c.649 0 1.258.25 1.715.707l3.332 3.332a2.4 2.4 0 0 1 .707 1.714c0 .649-.25 1.258-.707 1.715l-1.7 1.7A2.424 2.424 0 0 1 7.755 22Zm10.125-8.332a.88.88 0 0 0-.625.257l-3.328 3.328a.882.882 0 0 0 0 1.247l1.699 1.699a.878.878 0 0 0 1.246 0l3.328-3.328a.878.878 0 0 0 0-1.246l-1.699-1.7a.878.878 0 0 0-.621-.257ZM16.246 22a2.424 2.424 0 0 1-1.715-.708l-1.699-1.699a2.428 2.428 0 0 1 0-3.43l3.332-3.331a2.4 2.4 0 0 1 1.715-.707c.648 0 1.258.25 1.715.707l1.695 1.699c.457.457.71 1.066.71 1.715 0 .648-.253 1.257-.706 1.714l-3.332 3.332a2.424 2.424 0 0 1-1.715.707z"})})}),((Kn=(Un=Xe.extras)==null?void 0:Un.profile)==null?void 0:Kn.telegram)&&jsxRuntimeExports.jsx(Button,{alt:`User telegram account (${(zn=(hs=Xe.extras)==null?void 0:hs.profile)==null?void 0:zn.telegram})`,href:`https://t.me/${(bn=(es=Xe.extras)==null?void 0:es.profile)==null?void 0:bn.telegram}`,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsxRuntimeExports.jsx("path",{d:"m9.78 18.65.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42Z"})})}),((Ln=(pn=Xe.extras)==null?void 0:pn.profile)==null?void 0:Ln.facebook)&&jsxRuntimeExports.jsx(Button,{alt:`User facebook account (${(ls=(Mn=Xe.extras)==null?void 0:Mn.profile)==null?void 0:ls.facebook})`,href:`https://www.facebook.com/${(as=(_s=Xe.extras)==null?void 0:_s.profile)==null?void 0:as.facebook}`,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsxRuntimeExports.jsx("path",{d:"M12 2.04c-5.5 0-10 4.49-10 10.02 0 5 3.66 9.15 8.44 9.9v-7H7.9v-2.9h2.54V9.85c0-2.51 1.49-3.89 3.78-3.89 1.09 0 2.23.19 2.23.19v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.88h2.78l-.45 2.9h-2.33v7a10 10 0 0 0 8.44-9.9c0-5.53-4.5-10.02-10-10.02Z"})})}),((Pn=(In=Xe.extras)==null?void 0:In.profile)==null?void 0:Pn.instagram)&&jsxRuntimeExports.jsx(Button,{alt:`User instagram account (${(Wn=(qn=Xe.extras)==null?void 0:qn.profile)==null?void 0:Wn.instagram})`,href:`https://www.instagram.com/${(us=(ts=Xe.extras)==null?void 0:ts.profile)==null?void 0:us.instagram}`,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsxRuntimeExports.jsx("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3Z"})})}),((vs=(xs=Xe.extras)==null?void 0:xs.profile)==null?void 0:vs.dns)&&jsxRuntimeExports.jsx(Button,{alt:`User DNS Profile (${(Ss=(gs=Xe.extras)==null?void 0:gs.profile)==null?void 0:Ss.dns})`,href:`http://${(Is=(Es=Xe.extras)==null?void 0:Es.profile)==null?void 0:Is.dns}`,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsxRuntimeExports.jsx("path",{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"})})})]})]})]})})}const container$f="_container_314o8_216",tab="_tab_314o8_220",active$1="_active_314o8_223",tabs$1="_tabs_314o8_229",line$2="_line_314o8_247",styles$C={container:container$f,tab,active:active$1,tabs:tabs$1,line:line$2},Tabs=({tabs:Xe,className:Ke,filter:Ye})=>{const Je=reactExports.useMemo(()=>Ye?Xe.map(Ye).filter(tt=>tt!==null):Xe,[Xe,Ye]);return jsxRuntimeExports.jsxs("div",{className:`${styles$C.container} ${Ke||""}`,children:[jsxRuntimeExports.jsx("div",{className:styles$C.tabs,children:Je.map((tt,st)=>tt?jsxRuntimeExports.jsx(Button,{alt:`tab_${tt.title}`,preventScrollReset:!0,className:styles$C.tab,activeClass:styles$C.active,disabled:tt.disabled,to:tt==null?void 0:tt.to,children:tt.title},tt.title):null)}),jsxRuntimeExports.jsx(Line,{className:styles$C.line})]})},check_container="_check_container_1047g_216",checkmark="_checkmark_1047g_233",container$e="_container_1047g_261",small="_small_1047g_309",styles$B={check_container,checkmark,container:container$e,small},Checkbox=reactExports.forwardRef(({name:Xe,label:Ke,alt:Ye,initial:Je,onCheck:tt=()=>null,onBlur:st=()=>null,onWheel:rt=()=>null,title:it="",disabled:ot,checked:at,autoFocus:lt=!1,className:ut,small:ht},pt)=>{const[ft,xt]=useControlled(at,Je),vt=reactExports.useCallback(Et=>{if(ot)return;const wt=Et.target.checked;xt(wt),tt==null||tt(wt)},[ft,ot]),At=classNames$1({[styles$B.check_container]:!0,[styles$B.small]:ht});return jsxRuntimeExports.jsxs("label",{title:it,className:`${At} ${ut||""}`,children:[Ke,jsxRuntimeExports.jsx("input",{ref:pt,"aria-label":Ye||Xe,defaultChecked:Je,type:"checkbox",name:Xe,onChange:vt,onBlur:st,onWheel:rt,checked:at,"aria-checked":ft,disabled:ot}),jsxRuntimeExports.jsx("span",{className:styles$B.checkmark})]})}),Checkbox$1=reactExports.memo(Checkbox),box="_box_1czlq_1",buttons$1="_buttons_1czlq_17",styles$A={box,buttons:buttons$1},Warning=({onInteract:Xe})=>{const[Ke,Ye]=reactExports.useState(!1),{setNsfwFriendly:Je,setPhotosensitiveFriendly:tt}=useLocalSettings(ot=>[ot.setNsfwFriendly,ot.setPhotosensitiveFriendly]),st=ot=>{Xe(ot)},rt=()=>{Ke&&(console.log("disabling protections for good"),Je(!0),tt(!0)),st(!0)},it=()=>{st(!1)};return jsxRuntimeExports.jsxs("div",{className:styles$A.box,children:[jsxRuntimeExports.jsx("h1",{children:"Override Mode"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"The override mode momentarily removes visual protections (NSFW and Flashing content)"}),jsxRuntimeExports.jsx("p",{children:"By clicking enable, those filters will be removed only for this profile"}),jsxRuntimeExports.jsx("p",{children:'You can tick the "Remember my choice" checkbox to make it effective across teia.'}),jsxRuntimeExports.jsxs("p",{children:["If you ever need to change these, head to the local",jsxRuntimeExports.jsx(Button,{inline:!0,strong:!0,to:"/settings",children:"settings"})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$A.buttons,children:[jsxRuntimeExports.jsx(Button,{onClick:it,"data-id":"skip",shadow_box:!0,children:"Skip"}),jsxRuntimeExports.jsx(Button,{onClick:rt,"data-id":"enable",shadow_box:!0,children:"Enable"})]}),jsxRuntimeExports.jsx(Checkbox$1,{checked:Ke,onCheck:Ye,label:"Remember my choice"})]})};async function fetchUserInfo(Xe,Ke="user_address"){let Ye=await getUser(Xe,Ke);if(!Ye&&Ke!=="user_address")throw new Error(`SUBJKT ${Xe} is not registered`,{cause:"User not found"});if(!Ye&&validateAddress(Xe)===ValidationResult.VALID&&(Ye={user_address:Xe}),!(Ye!=null&&Ye.user_address))throw new Error(`Invalid or missing Tz address: ${Xe}`,{cause:"Address not found"});const Je=await GetUserMetadata(Ye.user_address);console.log(Je);const tt=Je?{...Je}:{};return tt.address=Ye.user_address,get$5(Ye,"metadata.data.description")&&(tt.description=get$5(Ye,"metadata.data.description")),get$5(Ye,"metadata.data.identicon")&&(tt.identicon=get$5(Ye,"metadata.data.identicon")),Ye.name&&(tt.subjkt=Ye.name),tt}const useDisplayStore=create$2(subscribeWithSelector((Xe,Ke)=>({coreParticipants:void 0})));function Display(){const{address:Xe,name:Ke}=useParams(),{walletBlockMap:Ye,underReviewMap:Je}=useSettings(),[tt,st]=reactExports.useState(),[rt,it]=reactExports.useState(),[ot,at]=reactExports.useState();let[lt]=useSearchParams();const{nsfwFriendly:ut,photosensitiveFriendly:ht}=useLocalSettings(wt=>[wt.nsfwFriendly,wt.photosensitiveFriendly]);reactExports.useLayoutEffect(()=>{lt.get("yolo")!==null&&(!ut||!ht)&&st(!0),it(lt.get("show")!==null)},[]);const[pt]=reactExports.useState(!1),{data:ft,error:xt}=useSWR(["/user",Xe||Ke],(wt,_t)=>fetchUserInfo(_t,Xe?"user_address":"name"),{revalidateIfStale:!1,revalidateOnFocus:!1}),vt=reactExports.useMemo(()=>ft!=null&&ft.address?Ye.get(ft.address)===1:!1,[ft==null?void 0:ft.address,Ye]),At=reactExports.useMemo(()=>ft!=null&&ft.address?Je.get(ft.address)===1:!1,[ft==null?void 0:ft.address,Je]);if(xt)throw xt;if(!ft)return jsxRuntimeExports.jsx(Page,{title:"loading",children:jsxRuntimeExports.jsx(Loading,{message:"Getting user profile"})});const Et=[{title:"Creations",to:""},{title:"Collection",to:"collection"},{title:"Curation",to:"curation"},{title:"Collabs",to:"collabs"},{title:"Copyrights",to:"copyrights"}];return jsxRuntimeExports.jsx(Page,{feed:!0,title:ft.alias,children:tt?jsxRuntimeExports.jsx(Warning,{onInteract:wt=>{at(wt),st(!1)}}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Profile,{user:ft}),ft.address.substr(0,2)!=="KT"&&jsxRuntimeExports.jsx("div",{className:styles$D.menu,children:jsxRuntimeExports.jsx(Tabs,{tabs:Et})}),(vt||At)&&jsxRuntimeExports.jsxs("div",{className:styles$D.restricted,children:[jsxRuntimeExports.jsxs("h1",{children:[At?"Under review":"Restricted"," account",rt?"(bypassed)":""]}),jsxRuntimeExports.jsxs("p",{children:["Contact the Teia moderators on",jsxRuntimeExports.jsx(Button,{small:!0,inline:!0,href:"https://discord.gg/TKeybhYhNe",children:"Discord"}),"to resolve the status."]}),jsxRuntimeExports.jsxs("p",{children:["See the",jsxRuntimeExports.jsx(Button,{inline:!0,small:!0,href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#3-terms-and-conditions---account-restrictions",children:"Teia Terms and Conditions"})]})]}),jsxRuntimeExports.jsx(Outlet,{context:{showRestricted:rt,overrideProtections:ot,showFilters:pt,address:ft.address}})]})})}const CollabDisplay=()=>{const{id:Xe,name:Ke}=useParams(),{data:Ye,error:Je}=useSWR(!Xe||!Ke?["/contract",Xe,Ke]:null,async()=>{const ot=await fetchCollabCreations(Ke||Xe,Ke?"subjkt":"address");if(!ot.split_contracts.length)throw new Error("unknown split contract");return{tokens:ot.tokens,split_contract:ot.split_contracts[0]}},{revalidateIfStale:!1,revalidateOnFocus:!1});if(reactExports.useEffect(()=>{useDisplayStore.setState({coreParticipants:get$5(Ye==null?void 0:Ye.split_contract,"shareholders",[]).filter(({holder_type:ot})=>ot===CollaboratorType.CORE_PARTICIPANT)})},[Ye==null?void 0:Ye.split_contract]),Je)return jsxRuntimeExports.jsx("pre",{children:JSON.stringify(Je,null,2)});if(!Ye)return jsxRuntimeExports.jsx(Loading,{message:"Collab contract"});const{split_contract:tt,tokens:st}=Ye,rt=tt==null?void 0:tt.contract_address;return Xe&&["KT1CSfR6kx3uwDEXpwuCPnqp3MhpzfPmnLKj","KT1XhXv6jBpkahnvrtdiSi8foWXneWEjcz6F"].indexOf(Xe)>-1?jsxRuntimeExports.jsx(Navigate,{to:`${PATH.ISSUER}/${Xe}`,replace:!0}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(TokenCollection,{namespace:"collab-tokens",emptyMessage:"This collab has no OBJKT creations to display",swrParams:[rt],query:{tokens:st}})})},validAddress=Xe=>Xe.length?["tz","KT"].includes(Xe.substr(0,2))&&Xe.length===36:!1,extractAddress=Xe=>{let Ke;return Ke=/^.*(tz[\w\d]{34}).*$/i.exec(Xe.trim()),Ke?Ke[1]:(Ke=/^.*(kt[\w\d]{34}).*$/i.exec(Xe.trim()),Ke?Ke[1]:!1)},groupShareTotal=Xe=>Xe.reduce((Ke,Ye)=>(Ye.shares||0)+Ke,0),TipSelector=({onSelect:Xe})=>jsxRuntimeExports.jsx("div",{className:collabStyles.tipSelect,children:tipOptions.map(Ke=>jsxRuntimeExports.jsxs("button",{onClick:()=>Xe(Ke),children:[Ke,isNaN(Ke)?"":"%"]},`btn-${Ke}`))}),BeneficiaryRow=({beneficiary:Xe,onUpdate:Ke,onAdd:Ye,onRemove:Je,onPasteMulti:tt,onSelectPercentage:st,minimalView:rt})=>{const[it,ot]=reactExports.useState(),[at,lt]=reactExports.useState(Xe.address),[ut,ht]=reactExports.useState(Xe.shares);reactExports.useEffect(()=>{const{address:Et,shares:wt}=Xe;!it&&Et&&GetUserMetadata(Et).then(({data:_t})=>ot(_t)),it&&!Et&&ot(),lt(Et),ht(wt)},[Xe,it]);const pt=(Et,wt)=>{if(wt.replace(/\r/g,"").split(/\n/).length>1)tt(wt);else{const Ct={...Xe,[Et]:isNaN(wt)?wt:Number(wt)};Ke(Ct)}},ft=classNames$1(styles$B.container,collabStyles.input),xt=Et=>{Et.keyCode===13&&Ye&&Ye(Xe)},At=(it?it.alias:null)||`${at?"":"(tz... or KT...)"}`;return rt?jsxRuntimeExports.jsxs("tr",{className:collabStyles.row,children:[jsxRuntimeExports.jsx("td",{className:collabStyles.addressCell,children:at}),jsxRuntimeExports.jsxs("td",{className:collabStyles.sharesCell,children:[Xe.share,"%"]})]}):jsxRuntimeExports.jsxs("tr",{className:collabStyles.row,children:[jsxRuntimeExports.jsx("td",{className:collabStyles.addressCell,children:jsxRuntimeExports.jsx("div",{className:ft,children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("p",{children:"Address"}),jsxRuntimeExports.jsx("textarea",{rows:1,value:at||"",className:collabStyles.textInput,placeholder:At,onChange:Et=>pt("address",Et.target.value)})]})})}),jsxRuntimeExports.jsx("td",{className:collabStyles.sharesCell,children:jsxRuntimeExports.jsxs("div",{className:ft,children:[jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("p",{children:"Shares"}),jsxRuntimeExports.jsx("input",{type:"number",placeholder:"(proportional)",value:ut||"",onKeyDown:xt,onChange:Et=>pt("shares",Et.target.value)})]}),!ut&&st&&jsxRuntimeExports.jsx(TipSelector,{onSelect:st})]})}),jsxRuntimeExports.jsx("td",{className:collabStyles.actionCell,children:jsxRuntimeExports.jsx(Button,{onClick:Je,children:jsxRuntimeExports.jsx(Secondary$1,{children:jsxRuntimeExports.jsx(SvgClose,{})})})})]})},ProjectList=({beneficiaries:Xe,onSelect:Ke})=>{const[Ye,Je]=reactExports.useState(!1),tt=Xe.map(at=>at.address),st=Xe.filter(at=>at.address&&at.shares),rt=ossProjects.filter(at=>!tt.includes(at.address)),it=classNames$1(collabStyles.btn,{[collabStyles.muted]:Ye||rt.length<ossProjects.length||st.length>0,[collabStyles.absolute]:Ye}),ot=(at,lt)=>{Ke(at,lt),Je(!1)};return rt.length>0?jsxRuntimeExports.jsxs("div",{className:Ye?collabStyles.projectList:null,children:[jsxRuntimeExports.jsx("button",{className:it,onClick:()=>Je(!Ye),children:jsxRuntimeExports.jsx(Secondary$1,{children:Ye?"Close":"Choose from popular projects"})}),Ye&&jsxRuntimeExports.jsx("ul",{className:collabStyles.list,children:rt.map(at=>{const{name:lt,address:ut}=at;return jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{className:collabStyles.btn,onClick:()=>ot(ut,lt),children:lt})},ut)})})]}):null},AddCollaboratorsButton=({collaborators:Xe,onClick:Ke,threshold:Ye=2})=>{const Je=Xe.filter(tt=>!!tt.shares&&validAddress(tt.address));return jsxRuntimeExports.jsx("div",{className:collabStyles.mt3,children:jsxRuntimeExports.jsx(Button,{onClick:Ke,disabled:Je.length<Ye,className:collabStyles.btnSecondary,shadow_box:!0,children:Je.length===0?"Skip":"Next"})})},AddCollaboratorsButton$1=reactExports.memo(AddCollaboratorsButton),BeneficiariesUI=({beneficiaries:Xe,setBeneficiaries:Ke,onSelectPercentage:Ye,totalParticipants:Je,onComplete:tt})=>{const[st,rt]=reactExports.useState(""),it=(vt,At)=>{typeof vt=="object"&&(vt="");const Et=Xe.filter(_t=>_t.address),wt={...collaboratorTemplate,address:vt||"",name:At};Ke([...Et,wt])},ot=vt=>{Ye(vt,0);const At=[...Xe];At.splice(vt,1),Ke(At)},at=(vt,At)=>{const Et=[...Xe];Et[vt]={...At,share:At.percentage},Ke([...Et])};if(st.length){const vt=Xe.filter(Ct=>Ct.address).map(Ct=>Ct.address),Et=st.replace(/\r/g,"").split(/\n/).map(Ct=>extractAddress(Ct)).filter(Ct=>Ct),_t=vt.concat(Et).map(Ct=>({...collaboratorTemplate,address:Ct}));Ke(_t),rt("")}const lt=classNames$1(collabStyles.mt3,{[collabStyles.mb1]:Xe.length===0,[collabStyles.mb2]:Xe.length>0}),ut=classNames$1(collabStyles.muted,{[collabStyles.mb1]:Xe.length===0,[collabStyles.mb2]:Xe.length>0}),ht=Xe.filter(vt=>vt.address&&vt.shares),pt=Xe[Xe.length-1],ft=pt?!pt.address:!0,xt=Je===Xe.length;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{className:lt,children:jsxRuntimeExports.jsx("strong",{children:"Beneficiaries"})}),Xe.length===0&&jsxRuntimeExports.jsx("p",{className:ut,children:"Do you want to include anyone that wasn’t a collaborator, eg. the team who made the collab contract ;)"}),Xe.length===0&&jsxRuntimeExports.jsx("button",{className:collabStyles.btn,onClick:it,children:jsxRuntimeExports.jsx(Secondary$1,{children:"Add address manually"})}),Xe.length>0&&jsxRuntimeExports.jsxs("table",{className:collabStyles.table,children:[jsxRuntimeExports.jsx("tbody",{children:Xe.map((vt,At)=>jsxRuntimeExports.jsx(BeneficiaryRow,{beneficiary:vt,onUpdate:Et=>at(At,Et),onRemove:()=>ot(At),onAdd:it,onPasteMulti:rt,onSelectPercentage:xt?null:Et=>Ye(At,Et)},`beneficiary-${At}`))}),Xe.filter(vt=>vt.address).length>0&&jsxRuntimeExports.jsx("tfoot",{children:jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("button",{className:collabStyles.btn,onClick:()=>it(),disabled:ft,children:"Add another beneficiary"})})})})]}),jsxRuntimeExports.jsx(ProjectList,{beneficiaries:Xe,onSelect:it}),ht.length>0&&Je>=2&&jsxRuntimeExports.jsx(AddCollaboratorsButton$1,{threshold:1,collaborators:Xe,onClick:tt}),(ht.length===0||Je<2)&&jsxRuntimeExports.jsxs("div",{className:collabStyles.mt2,children:[Je>=2&&jsxRuntimeExports.jsx(Button,{shadow_box:!0,onClick:tt,children:"Skip"}),Je<2&&jsxRuntimeExports.jsx("p",{className:collabStyles.muted,children:"You need to have at least two participants to create a collaborative contract"})]})]})},CollaboratorRow=({collaborator:Xe,onUpdate:Ke,onAdd:Ye,onRemove:Je,onPasteMulti:tt,minimalView:st,onEdit:rt})=>{const[it,ot]=reactExports.useState(),[at,lt]=reactExports.useState(Xe.address),[ut,ht]=reactExports.useState(Xe.shares),pt=reactExports.useRef();reactExports.useEffect(()=>{const{address:wt,shares:_t}=Xe;lt(wt),ht(_t)},[Xe]),reactExports.useEffect(()=>{const wt=validAddress(at);wt&&!ut&&pt.current&&pt.current.focus(),wt?(console.debug("valid address, checking meta",it,at),(!it||it&&it.tzprofile!==at)&&GetUserMetadata(at).then(({data:_t})=>{console.debug("Data from user meta query",_t),ot(_t)})):ot()},[at,ut,it]);const ft=(wt,_t)=>{if(_t.replace(/\r/g,"").split(/\n/).length>1)tt(_t);else{const Tt={...Xe,[wt]:isNaN(_t)?_t:Number(_t)};Ke(Tt)}},xt=classNames$1(styles$B.container,collabStyles.input),vt=wt=>{wt.keyCode===13&&Ye&&Ye(Xe)},At=it?it.alias:null,Et=At||`${at?"":"(tz... or KT...)"}`;return st?jsxRuntimeExports.jsxs("tr",{className:collabStyles.row,onClick:rt,children:[jsxRuntimeExports.jsxs("td",{className:collabStyles.cellWithPadding,children:[At&&jsxRuntimeExports.jsx("p",{children:At}),jsxRuntimeExports.jsx("span",{children:at})]}),jsxRuntimeExports.jsxs("td",{className:collabStyles.cellWithPadding,children:[Xe.shares," Shares"]})]}):jsxRuntimeExports.jsxs("tr",{className:collabStyles.row,children:[jsxRuntimeExports.jsx("td",{className:collabStyles.addressCell,children:jsxRuntimeExports.jsx("div",{className:xt,children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("p",{children:"Address"}),jsxRuntimeExports.jsx("textarea",{rows:1,className:collabStyles.textInput,onChange:wt=>ft("address",wt.target.value),placeholder:Et,value:at||""})]})})}),jsxRuntimeExports.jsx("td",{className:collabStyles.sharesCell,children:jsxRuntimeExports.jsx("div",{className:xt,children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("p",{children:"Shares"}),jsxRuntimeExports.jsx("input",{ref:pt,type:"number",onChange:wt=>ft("shares",wt.target.value),onKeyDown:vt,placeholder:"(proportional)",label:"shares",value:ut||""})]})})}),Je&&jsxRuntimeExports.jsx("td",{className:collabStyles.actionCell,children:jsxRuntimeExports.jsx(Button,{onClick:Je,children:jsxRuntimeExports.jsx(Secondary$1,{children:jsxRuntimeExports.jsx(SvgClose,{})})})})]})},CollaboratorTable=({collaborators:Xe,setCollaborators:Ke,availableShares:Ye,minimalView:Je,onEdit:tt})=>{const[st,rt]=reactExports.useState(""),[it,ot]=reactExports.useState(!1),at=()=>{Ke([...Xe,{...collaboratorTemplate}]),Je&&tt()},lt=ft=>{const xt=[...Xe];xt.splice(ft,1),Ke(xt)},ut=(ft,xt)=>{const vt=[...Xe];vt.length>1&&vt.some((At,Et)=>At.address===xt.address&&Et!==ft)?console.debug("Address exists"):vt[ft]=xt,Ke(vt)};reactExports.useEffect(()=>{if(st.length){const ft=Xe.filter(_t=>_t.address).map(_t=>_t.address),vt=st.replace(/\r/g,"").split(/\n/).map(_t=>extractAddress(_t)).filter(_t=>!!_t&&ft.indexOf(_t)===-1),At=ft.concat(vt),Et=Math.floor(100/At.length),wt=At.map(_t=>({address:_t,shares:Et}));ot(!0),Ke(wt),rt("")}Xe.length===0&&(it||Ke([{...collaboratorTemplate}]))},[st,Xe,Ke,it,ot]);const ht=Xe[Xe.length-1],pt=ht?!ht.address:!0;return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("table",{className:collabStyles.table,children:[jsxRuntimeExports.jsx("tbody",{children:Xe.map((ft,xt)=>jsxRuntimeExports.jsx(CollaboratorRow,{collaborator:ft,availableShares:Ye,onUpdate:vt=>ut(xt,vt),onRemove:()=>lt(xt),onAdd:at,onEdit:tt,onPasteMulti:rt,minimalView:Je},`collaborator-${xt}`))}),Xe.filter(ft=>ft.address).length>0&&jsxRuntimeExports.jsx("tfoot",{children:jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:Je?2:3,children:jsxRuntimeExports.jsx("button",{className:collabStyles.btn,onClick:()=>at(),disabled:pt,children:"Add another collaborator"})})})})]})})},ReviewStage=({collaborators:Xe,beneficiaries:Ke,onEdit:Ye})=>{const Je=groupShareTotal(Xe)+groupShareTotal(Ke),tt=Xe.length,st=Ke.length,rt=useCollabStore(ot=>ot.originateProxy),it=async()=>{const ot={},at=Xe.filter(ht=>ht.shares).map(ht=>({...ht,role:"collaborator"})),lt=Ke.filter(ht=>ht.shares).map(ht=>({...ht,role:"benefactor"})),ut=at.concat(lt);Object.values(ut).forEach(ht=>ot[ht.address]={share:parseFloat(Math.floor(ht.shares*1e3)),isCore:ht.role==="collaborator"}),await rt(ot)};return jsxRuntimeExports.jsxs(Container$3,{children:[jsxRuntimeExports.jsx("h1",{className:collabStyles.mb1,children:jsxRuntimeExports.jsx("strong",{children:"Review & Create"})}),jsxRuntimeExports.jsxs("p",{className:collabStyles.descriptive,children:["You have a total of ",Je," shares divided between ",tt+st," ","addresses. Percentages may not total 100% due to rounding."]}),jsxRuntimeExports.jsx("h2",{className:collabStyles.mt3,children:"Collaborators"}),Xe.length>0&&jsxRuntimeExports.jsxs("table",{className:collabStyles.reviewTable,children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Address"}),jsxRuntimeExports.jsx("th",{children:"Shares"}),jsxRuntimeExports.jsx("th",{style:{textAlign:"right"},children:"%"})]})}),jsxRuntimeExports.jsx("tbody",{children:Xe.map(ot=>{const{address:at,shares:lt,name:ut}=ot,ht=(lt/Je*100).toFixed(2);return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsxs("td",{className:collabStyles.cellWithPadding,children:[ut&&jsxRuntimeExports.jsx("p",{className:collabStyles.muted,children:ut}),at]}),jsxRuntimeExports.jsx("td",{className:collabStyles.cellWithPadding,children:lt}),jsxRuntimeExports.jsx("td",{className:collabStyles.cellWithPadding,style:{textAlign:"right"},children:ht})]},at)})})]}),Xe.length===0&&jsxRuntimeExports.jsx("p",{className:collabStyles.muted,children:"No core collaborators"}),Ke.length>0&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{className:collabStyles.mt3,children:"Beneficiaries"}),jsxRuntimeExports.jsxs("table",{className:collabStyles.reviewTable,children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Address"}),jsxRuntimeExports.jsx("th",{children:"Shares"}),jsxRuntimeExports.jsx("th",{style:{textAlign:"right"},children:"%"})]})}),jsxRuntimeExports.jsx("tbody",{children:Ke.map(ot=>{const{address:at,shares:lt,name:ut}=ot,ht=(lt/Je*100).toFixed(2);return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsxs("td",{className:collabStyles.cellWithPadding,children:[ut&&jsxRuntimeExports.jsx("p",{className:collabStyles.muted,children:ut}),at]}),jsxRuntimeExports.jsx("td",{className:collabStyles.cellWithPadding,children:lt}),jsxRuntimeExports.jsx("td",{className:collabStyles.cellWithPadding,style:{textAlign:"right"},children:ht})]},at)})})]})]}),jsxRuntimeExports.jsx("div",{className:collabStyles.mt3,children:jsxRuntimeExports.jsx(Button,{shadow_box:!0,onClick:()=>it(),children:"Create collaborative contract"})}),jsxRuntimeExports.jsx("button",{className:collabStyles.btn,onClick:Ye,children:"< Go back"})]})},mb1="_mb1_3qkq2_216",mb2="_mb2_3qkq2_224",muted="_muted_3qkq2_240",tabs="_tabs_3qkq2_249",styles$z={mb1,mb2,muted,tabs},CreateCollaboration=()=>{const Xe=useUserStore(Et=>Et.address),[Ke,Ye]=reactExports.useState(!0),[Je,tt]=reactExports.useState([]),[st,rt]=reactExports.useState([]),[it,ot]=reactExports.useState(!1),[at,lt]=reactExports.useState(!1),ut=groupShareTotal(Je)+groupShareTotal(st),ht=Je.filter(Et=>!!Et.shares&&validAddress(Et.address));reactExports.useEffect(()=>{st.length===0&&ot(!1)},[at,st.length]),reactExports.useEffect(()=>{!Ke&&!it&&ot(!0),ht.length===0&&tt([])},[Ke,it,ht.length]);const pt=(Et,wt)=>{const _t=st[Et],Ct=[...st];console.debug("_calculateShares",Et,wt),Ct[Et]={..._t,shares:Math.ceil(ut*wt/100)};const Tt=ut-groupShareTotal(Ct),St=Je.map(Rt=>{const Nt=Rt.shares/groupShareTotal(Je),Pt=Math.floor(Nt*Tt*100)/100;return{...Rt,shares:Pt}});rt(Ct),tt(St)},ft=ht.length+st.length,xt=classNames$1(styles$z.mb2,styles$z.muted),vt=!Ke&&(it||at),At=Ke||ht.length>0;return Xe?at?jsxRuntimeExports.jsx(ReviewStage,{collaborators:ht,beneficiaries:st,onEdit:()=>lt(!1)}):jsxRuntimeExports.jsxs(Container$3,{children:[jsxRuntimeExports.jsx("h1",{className:At?styles$z.mb1:styles$z.mb2,children:jsxRuntimeExports.jsx("strong",{children:"Core collaborators"})}),At&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{className:xt,children:"Note: shares don’t have to add up to 100% - splits are calculated as proportions of the total shares."}),jsxRuntimeExports.jsx("p",{className:xt,children:"You can paste multiple addresses to get an auto split"})]}),At&&jsxRuntimeExports.jsx(CollaboratorTable,{collaborators:Ke?Je:ht,setCollaborators:tt,minimalView:vt,onEdit:()=>Ye(!0)}),!At&&jsxRuntimeExports.jsx("p",{className:styles$z.muted,children:jsxRuntimeExports.jsx(Button,{onClick:()=>Ye(!0),children:jsxRuntimeExports.jsx(Secondary$1,{children:"No core collaborators - click to add"})})}),!vt&&jsxRuntimeExports.jsx(AddCollaboratorsButton$1,{threshold:0,collaborators:Je,onClick:()=>Ye(!1)}),it&&jsxRuntimeExports.jsx(BeneficiariesUI,{totalParticipants:ft,totalShares:ut,beneficiaries:st,setBeneficiaries:rt,minimalView:at,onComplete:()=>lt(!0),onSelectPercentage:(Et,wt)=>pt(Et,wt)})]}):jsxRuntimeExports.jsx(Container$3,{children:"Please sync your wallet to create a collaboration"})},CountdownTimer=({endDate:Xe,onComplete:Ke})=>{const Ye=()=>{const rt=Math.abs(Xe-new Date);return Math.floor(rt/1e3%60)},[Je,tt]=reactExports.useState(Ye());return reactExports.useEffect(()=>{const st=setTimeout(()=>{const rt=Ye();tt(rt)},1e3);return()=>clearTimeout(st)}),reactExports.useEffect(()=>{Je<=0&&Ke()},[Je]),Je>0?`${Je}s`:"checking..."},CollabParticipantInfo=({collabData:Xe,expanded:Ke=!1})=>{const[Ye,Je]=useUserStore(vt=>[vt.proxyAddress,vt.address]),{administrator_address:tt,contract_address:st,contract_profile:rt,shareholders:it}=Xe,ot=Je===tt,at=it.filter(({holder_type:vt})=>vt===CollaboratorType.CORE_PARTICIPANT),lt=it.filter(({holder_type:vt})=>vt===CollaboratorType.BENEFACTOR),ut=classNames$1(collabStyles.flex,collabStyles.flexBetween,collabStyles.alignStart,collabStyles.mb2,{[collabStyles.border]:st===Ye}),ht=classNames$1(collabStyles.flex,collabStyles.flexBetween,collabStyles.alignStart,collabStyles.fullWidth),pt=get$5(rt,"name"),ft=pt||st,xt=pt?`/collab/${pt}`:`${PATH.COLLAB}/${st}`;return jsxRuntimeExports.jsx("li",{className:ut,children:jsxRuntimeExports.jsxs("div",{className:collabStyles.fullWidth,children:[jsxRuntimeExports.jsxs("div",{className:ht,children:[ft&&jsxRuntimeExports.jsx("h3",{children:jsxRuntimeExports.jsx("strong",{children:jsxRuntimeExports.jsx(Link,{to:xt,children:ft})})}),st!==Ye&&ot&&jsxRuntimeExports.jsx(Button,{shadow_box:!0,onClick:()=>useUserStore.setState({proxyAddress:st,proxyName:pt}),children:"sign in"}),st===Ye&&ot&&jsxRuntimeExports.jsx(Button,{shadow_box:!0,onClick:()=>useUserStore.setState({proxyAddress:void 0,proxyName:void 0}),children:"sign out"})]}),!pt&&ot&&jsxRuntimeExports.jsxs("p",{children:["to set the name of this collab,"," ",st!==Ye?"sign in and":""," visit"," ",jsxRuntimeExports.jsx(Link,{to:"/subjkt",style:{textDecoration:"underline"},children:"settings"})]}),Ke&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:collabStyles.infoLabel,children:"address:"}),jsxRuntimeExports.jsx(Link,{className:collabStyles.link,to:`${PATH.ISSUER}/${st}`,children:st})]})," ",at.length>0&&jsxRuntimeExports.jsx(ParticipantList$1,{title:"participants",participants:at}),lt.length>0&&jsxRuntimeExports.jsx(ParticipantList$1,{title:"beneficiaries",participants:lt})]})]})},st)},CollabList=({description:Xe,collabs:Ke})=>{const[Ye,Je]=reactExports.useState(!1),tt=classNames$1(collabStyles.flex,collabStyles.flexBetween),st=classNames$1(collabStyles.borderBottom,collabStyles.mb3);return jsxRuntimeExports.jsxs("div",{className:st,children:[jsxRuntimeExports.jsxs("div",{className:tt,children:[Xe&&jsxRuntimeExports.jsx("p",{className:collabStyles.mb1,children:Xe}),jsxRuntimeExports.jsx("div",{className:collabStyles.mb2,children:jsxRuntimeExports.jsx(Button,{shadow_box:!0,onClick:()=>Je(!Ye),children:Ye?"less detail":"more detail"})})]}),jsxRuntimeExports.jsx("ul",{children:Ke.map(rt=>jsxRuntimeExports.jsx(CollabParticipantInfo,{collabData:rt,expanded:Ye},rt.contract_address))})]})},CollabContractsOverview=({showAdminOnly:Xe=!1})=>{const Ke=useUserStore(ft=>ft.address),[Ye,Je,tt]=useCollabStore(ft=>[ft.originatedContract,ft.originationOpHash,ft.findOriginatedContractFromOpHash],shallow),[st,rt]=reactExports.useState([]),[it,ot]=reactExports.useState(!0),[at,lt]=reactExports.useState(30),[ut,ht]=reactExports.useState();reactExports.useEffect(()=>{if(!(Je&&!ut))return;const ft=new Date;ft.setTime(ft.getTime()+at*1e3),ht(ft)},[Je,ut,at]),reactExports.useEffect(()=>{Ke&&(ot(!0),console.debug("Now checking for available collabs"),fetchGraphQL(getCollabsForAddress,"GetCollabs",{address:Ke}).then(({data:ft})=>{if(ot(!1),!ft)return;const xt=ft.split_contracts||[],vt=xt.filter(wt=>wt.administrator_address===Ke),At=xt.filter(wt=>wt.administrator_address!==Ke),Et=Xe?xt.filter(wt=>wt.administrator_address===Ke):[...vt,...At];rt(Et)}))},[Ke,Ye,Xe]);const pt=()=>{tt(Je),lt(10)};return jsxRuntimeExports.jsxs(Container$3,{children:[Je&&ut&&jsxRuntimeExports.jsxs("p",{className:collabStyles.mb3,children:["Collab contract creation in progress..."," ",jsxRuntimeExports.jsx(CountdownTimer,{endDate:ut,onComplete:pt})]}),Ye&&jsxRuntimeExports.jsxs("div",{className:collabStyles.mb3,children:[jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("strong",{children:"Collaborative contract created successfully!"})}),jsxRuntimeExports.jsxs("p",{children:["Address: ",Ye.address]})]}),st.length>0&&jsxRuntimeExports.jsx(CollabList,{description:Xe?"you can mint with these collab contracts:":"you are part of these collab contracts:",collabs:st}),st.length===0&&!Je&&jsxRuntimeExports.jsx("p",{children:it?"Looking for collabs...":"You are not a manager of any collaborations at the moment"})]})},TABS$5=[{title:"Manage",to:""},{title:"Create",to:"create"}],Collaborate=()=>{const Xe=useNavigate();return reactExports.useEffect(()=>{const Ke=Je=>{console.debug({originationOpHash:Je}),Je&&Xe("/")};return useCollabStore.subscribe(Je=>Je.originationOpHash,Ke)},[]),jsxRuntimeExports.jsxs(Page,{title:"proxy",children:[jsxRuntimeExports.jsx(Tabs,{className:styles$z.tabs,tabs:TABS$5}),jsxRuntimeExports.jsx(Outlet,{})]})};function Input$1({type:Xe="text",placeholder:Ke="placeholder",name:Ye,min:Je,max:tt,maxlength:st=500,label:rt,onChange:it=At=>null,onBlur:ot=()=>null,disabled:at,value:lt,children:ut,defaultValue:ht,pattern:pt,onKeyDown:ft,className:xt},vt){const[At,Et]=useControlled(lt,ht),wt=reactExports.useCallback(_t=>{it(_t);const Ct=_t.target;if(Ct){const Tt=Xe==="number"?isNaN(Ct.valueAsNumber)?Ct.value:Ct.valueAsNumber:Ct.value;Et(Tt),it(Tt)}},[Et,it,Xe]);return jsxRuntimeExports.jsxs("div",{className:`${styles$B.container} ${xt||""}`,children:[jsxRuntimeExports.jsxs("label",{htmlFor:Ye||rt||"",children:[jsxRuntimeExports.jsx("p",{children:rt||Ye||""}),jsxRuntimeExports.jsx("input",{type:Xe,ref:vt,placeholder:Ke,name:Ye||rt||"",min:Je,max:tt,maxLength:st,defaultValue:ht,value:At||"",onChange:wt,onBlur:ot,pattern:pt,onWheel:_t=>_t.target.blur(),onKeyDown:ft,autoComplete:"off"})]}),ut]})}const Input$2=reactExports.memo(React.forwardRef(Input$1)),Textarea=reactExports.forwardRef(({type:Xe="text",placeholder:Ke="placeholder",name:Ye="input-name-not-set",min:Je,max:tt,children:st,maxlength:rt=5e4,label:it,onChange:ot=()=>null,onBlur:at=()=>null,disabled:lt,value:ut,className:ht},pt)=>jsxRuntimeExports.jsxs("div",{className:`${styles$B.container} ${ht||""}`,children:[jsxRuntimeExports.jsxs("label",{htmlFor:Ye,children:[jsxRuntimeExports.jsx("p",{children:it}),jsxRuntimeExports.jsx("textarea",{ref:pt,type:Xe,placeholder:Ke,name:Ye,min:Je,max:tt,maxLength:rt,value:ut,onChange:ot,onBlur:at,disabled:lt})]}),st]})),Textarea$1=reactExports.memo(Textarea);function SimpleInput({type:Xe,label:Ke,min:Ye,max:Je,step:tt,minlength:st,maxlength:rt,placeholder:it,value:ot,onChange:at,pattern:lt,className:ut,children:ht}){const pt=ft=>{var xt;return at(Xe==="file"?(xt=ft.target.files)==null?void 0:xt[0]:ft.target.value)};return jsxRuntimeExports.jsxs("div",{className:`${styles$B.container} ${ut??""}`,children:[jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("p",{children:Ke}),jsxRuntimeExports.jsx("input",{type:Xe,min:Ye,max:Je,step:tt,minLength:st,maxLength:rt,placeholder:it,value:ot,onChange:pt,pattern:lt,autoComplete:"off"})]}),ht]})}function TransferFields({labels:Xe,placeholders:Ke,transfers:Ye,onChange:Je,className:tt,step:st,children:rt}){const it=(at,lt,ut)=>{const ht=Ye.map(pt=>({...pt}));ht[at][lt]=ut,Je(ht)},ot=(at,lt)=>{at.preventDefault();const ut=Ye.map(ht=>({...ht}));lt?ut.push({amount:"",destination:""}):ut.length>1&&ut.pop(),Je(ut)};return jsxRuntimeExports.jsxs("div",{children:[Ye.map((at,lt)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(SimpleInput,{type:"number",label:`${Xe.amount} (${lt+1})`,placeholder:(Ke==null?void 0:Ke.amount)??"0",min:"0",step:st,value:at.amount,onChange:ut=>it(lt,"amount",ut),className:tt,children:rt}),jsxRuntimeExports.jsx(SimpleInput,{type:"text",label:`${Xe.destination} (${lt+1})`,placeholder:(Ke==null?void 0:Ke.destination)??"tz1...",minlenght:"36",maxlength:"36",value:at.destination,onChange:ut=>it(lt,"destination",ut),className:tt,children:rt})]},lt)),jsxRuntimeExports.jsx(IncrementButtons,{onClick:ot})]})}const subjkt_editor="_subjkt_editor_1l8zw_216",identicon="_identicon_1l8zw_229",title_line="_title_line_1l8zw_233",fields$1="_fields_1l8zw_239",localSettings="_localSettings_1l8zw_247",info$1="_info_1l8zw_257",styles$y={subjkt_editor,identicon,title_line,fields:fields$1,localSettings,info:info$1},container$d="_container_4ijx1_216",label$2="_label_4ijx1_233",styles$x={container:container$d,label:label$2};function _typeof(Xe){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ke){return typeof Ke}:function(Ke){return Ke&&typeof Symbol=="function"&&Ke.constructor===Symbol&&Ke!==Symbol.prototype?"symbol":typeof Ke},_typeof(Xe)}function toPrimitive(Xe,Ke){if(_typeof(Xe)!="object"||!Xe)return Xe;var Ye=Xe[Symbol.toPrimitive];if(Ye!==void 0){var Je=Ye.call(Xe,Ke);if(_typeof(Je)!="object")return Je;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ke==="string"?String:Number)(Xe)}function toPropertyKey(Xe){var Ke=toPrimitive(Xe,"string");return _typeof(Ke)=="symbol"?Ke:Ke+""}function _defineProperty(Xe,Ke,Ye){return(Ke=toPropertyKey(Ke))in Xe?Object.defineProperty(Xe,Ke,{value:Ye,enumerable:!0,configurable:!0,writable:!0}):Xe[Ke]=Ye,Xe}function ownKeys(Xe,Ke){var Ye=Object.keys(Xe);if(Object.getOwnPropertySymbols){var Je=Object.getOwnPropertySymbols(Xe);Ke&&(Je=Je.filter(function(tt){return Object.getOwnPropertyDescriptor(Xe,tt).enumerable})),Ye.push.apply(Ye,Je)}return Ye}function _objectSpread2(Xe){for(var Ke=1;Ke<arguments.length;Ke++){var Ye=arguments[Ke]!=null?arguments[Ke]:{};Ke%2?ownKeys(Object(Ye),!0).forEach(function(Je){_defineProperty(Xe,Je,Ye[Je])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Xe,Object.getOwnPropertyDescriptors(Ye)):ownKeys(Object(Ye)).forEach(function(Je){Object.defineProperty(Xe,Je,Object.getOwnPropertyDescriptor(Ye,Je))})}return Xe}function _arrayWithHoles(Xe){if(Array.isArray(Xe))return Xe}function _iterableToArrayLimit(Xe,Ke){var Ye=Xe==null?null:typeof Symbol<"u"&&Xe[Symbol.iterator]||Xe["@@iterator"];if(Ye!=null){var Je,tt,st,rt,it=[],ot=!0,at=!1;try{if(st=(Ye=Ye.call(Xe)).next,Ke===0){if(Object(Ye)!==Ye)return;ot=!1}else for(;!(ot=(Je=st.call(Ye)).done)&&(it.push(Je.value),it.length!==Ke);ot=!0);}catch(lt){at=!0,tt=lt}finally{try{if(!ot&&Ye.return!=null&&(rt=Ye.return(),Object(rt)!==rt))return}finally{if(at)throw tt}}return it}}function _arrayLikeToArray(Xe,Ke){(Ke==null||Ke>Xe.length)&&(Ke=Xe.length);for(var Ye=0,Je=Array(Ke);Ye<Ke;Ye++)Je[Ye]=Xe[Ye];return Je}function _unsupportedIterableToArray(Xe,Ke){if(Xe){if(typeof Xe=="string")return _arrayLikeToArray(Xe,Ke);var Ye={}.toString.call(Xe).slice(8,-1);return Ye==="Object"&&Xe.constructor&&(Ye=Xe.constructor.name),Ye==="Map"||Ye==="Set"?Array.from(Xe):Ye==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ye)?_arrayLikeToArray(Xe,Ke):void 0}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(Xe,Ke){return _arrayWithHoles(Xe)||_iterableToArrayLimit(Xe,Ke)||_unsupportedIterableToArray(Xe,Ke)||_nonIterableRest()}function _objectWithoutPropertiesLoose(Xe,Ke){if(Xe==null)return{};var Ye={};for(var Je in Xe)if({}.hasOwnProperty.call(Xe,Je)){if(Ke.indexOf(Je)!==-1)continue;Ye[Je]=Xe[Je]}return Ye}function _objectWithoutProperties(Xe,Ke){if(Xe==null)return{};var Ye,Je,tt=_objectWithoutPropertiesLoose(Xe,Ke);if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(Xe);for(Je=0;Je<st.length;Je++)Ye=st[Je],Ke.indexOf(Ye)===-1&&{}.propertyIsEnumerable.call(Xe,Ye)&&(tt[Ye]=Xe[Ye])}return tt}var _excluded$5=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function useStateManager(Xe){var Ke=Xe.defaultInputValue,Ye=Ke===void 0?"":Ke,Je=Xe.defaultMenuIsOpen,tt=Je===void 0?!1:Je,st=Xe.defaultValue,rt=st===void 0?null:st,it=Xe.inputValue,ot=Xe.menuIsOpen,at=Xe.onChange,lt=Xe.onInputChange,ut=Xe.onMenuClose,ht=Xe.onMenuOpen,pt=Xe.value,ft=_objectWithoutProperties(Xe,_excluded$5),xt=reactExports.useState(it!==void 0?it:Ye),vt=_slicedToArray(xt,2),At=vt[0],Et=vt[1],wt=reactExports.useState(ot!==void 0?ot:tt),_t=_slicedToArray(wt,2),Ct=_t[0],Tt=_t[1],St=reactExports.useState(pt!==void 0?pt:rt),Rt=_slicedToArray(St,2),Nt=Rt[0],Pt=Rt[1],Bt=reactExports.useCallback(function(jt,Ht){typeof at=="function"&&at(jt,Ht),Pt(jt)},[at]),Lt=reactExports.useCallback(function(jt,Ht){var Yt;typeof lt=="function"&&(Yt=lt(jt,Ht)),Et(Yt!==void 0?Yt:jt)},[lt]),zt=reactExports.useCallback(function(){typeof ht=="function"&&ht(),Tt(!0)},[ht]),Dt=reactExports.useCallback(function(){typeof ut=="function"&&ut(),Tt(!1)},[ut]),Vt=it!==void 0?it:At,Gt=ot!==void 0?ot:Ct,Qt=pt!==void 0?pt:Nt;return _objectSpread2(_objectSpread2({},ft),{},{inputValue:Vt,menuIsOpen:Gt,onChange:Bt,onInputChange:Lt,onMenuClose:Dt,onMenuOpen:zt,value:Qt})}function _extends(){return _extends=Object.assign?Object.assign.bind():function(Xe){for(var Ke=1;Ke<arguments.length;Ke++){var Ye=arguments[Ke];for(var Je in Ye)({}).hasOwnProperty.call(Ye,Je)&&(Xe[Je]=Ye[Je])}return Xe},_extends.apply(null,arguments)}function _classCallCheck(Xe,Ke){if(!(Xe instanceof Ke))throw new TypeError("Cannot call a class as a function")}function _defineProperties(Xe,Ke){for(var Ye=0;Ye<Ke.length;Ye++){var Je=Ke[Ye];Je.enumerable=Je.enumerable||!1,Je.configurable=!0,"value"in Je&&(Je.writable=!0),Object.defineProperty(Xe,toPropertyKey(Je.key),Je)}}function _createClass(Xe,Ke,Ye){return Ke&&_defineProperties(Xe.prototype,Ke),Ye&&_defineProperties(Xe,Ye),Object.defineProperty(Xe,"prototype",{writable:!1}),Xe}function _setPrototypeOf(Xe,Ke){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ye,Je){return Ye.__proto__=Je,Ye},_setPrototypeOf(Xe,Ke)}function _inherits(Xe,Ke){if(typeof Ke!="function"&&Ke!==null)throw new TypeError("Super expression must either be null or a function");Xe.prototype=Object.create(Ke&&Ke.prototype,{constructor:{value:Xe,writable:!0,configurable:!0}}),Object.defineProperty(Xe,"prototype",{writable:!1}),Ke&&_setPrototypeOf(Xe,Ke)}function _getPrototypeOf(Xe){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Ke){return Ke.__proto__||Object.getPrototypeOf(Ke)},_getPrototypeOf(Xe)}function _isNativeReflectConstruct(){try{var Xe=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!Xe})()}function _assertThisInitialized(Xe){if(Xe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Xe}function _possibleConstructorReturn(Xe,Ke){if(Ke&&(_typeof(Ke)=="object"||typeof Ke=="function"))return Ke;if(Ke!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(Xe)}function _createSuper(Xe){var Ke=_isNativeReflectConstruct();return function(){var Ye,Je=_getPrototypeOf(Xe);if(Ke){var tt=_getPrototypeOf(this).constructor;Ye=Reflect.construct(Je,arguments,tt)}else Ye=Je.apply(this,arguments);return _possibleConstructorReturn(this,Ye)}}function _arrayWithoutHoles(Xe){if(Array.isArray(Xe))return _arrayLikeToArray(Xe)}function _iterableToArray(Xe){if(typeof Symbol<"u"&&Xe[Symbol.iterator]!=null||Xe["@@iterator"]!=null)return Array.from(Xe)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray(Xe){return _arrayWithoutHoles(Xe)||_iterableToArray(Xe)||_unsupportedIterableToArray(Xe)||_nonIterableSpread()}function sheetForTag(Xe){if(Xe.sheet)return Xe.sheet;for(var Ke=0;Ke<document.styleSheets.length;Ke++)if(document.styleSheets[Ke].ownerNode===Xe)return document.styleSheets[Ke]}function createStyleElement(Xe){var Ke=document.createElement("style");return Ke.setAttribute("data-emotion",Xe.key),Xe.nonce!==void 0&&Ke.setAttribute("nonce",Xe.nonce),Ke.appendChild(document.createTextNode("")),Ke.setAttribute("data-s",""),Ke}var StyleSheet=(function(){function Xe(Ye){var Je=this;this._insertTag=function(tt){var st;Je.tags.length===0?Je.insertionPoint?st=Je.insertionPoint.nextSibling:Je.prepend?st=Je.container.firstChild:st=Je.before:st=Je.tags[Je.tags.length-1].nextSibling,Je.container.insertBefore(tt,st),Je.tags.push(tt)},this.isSpeedy=Ye.speedy===void 0?!0:Ye.speedy,this.tags=[],this.ctr=0,this.nonce=Ye.nonce,this.key=Ye.key,this.container=Ye.container,this.prepend=Ye.prepend,this.insertionPoint=Ye.insertionPoint,this.before=null}var Ke=Xe.prototype;return Ke.hydrate=function(Je){Je.forEach(this._insertTag)},Ke.insert=function(Je){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var tt=this.tags[this.tags.length-1];if(this.isSpeedy){var st=sheetForTag(tt);try{st.insertRule(Je,st.cssRules.length)}catch{}}else tt.appendChild(document.createTextNode(Je));this.ctr++},Ke.flush=function(){this.tags.forEach(function(Je){return Je.parentNode&&Je.parentNode.removeChild(Je)}),this.tags=[],this.ctr=0},Xe})(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(Xe,Ke){return charat(Xe,0)^45?(((Ke<<2^charat(Xe,0))<<2^charat(Xe,1))<<2^charat(Xe,2))<<2^charat(Xe,3):0}function trim(Xe){return Xe.trim()}function match(Xe,Ke){return(Xe=Ke.exec(Xe))?Xe[0]:Xe}function replace(Xe,Ke,Ye){return Xe.replace(Ke,Ye)}function indexof(Xe,Ke){return Xe.indexOf(Ke)}function charat(Xe,Ke){return Xe.charCodeAt(Ke)|0}function substr(Xe,Ke,Ye){return Xe.slice(Ke,Ye)}function strlen(Xe){return Xe.length}function sizeof(Xe){return Xe.length}function append(Xe,Ke){return Ke.push(Xe),Xe}function combine(Xe,Ke){return Xe.map(Ke).join("")}var line$1=1,column$1=1,length=0,position=0,character=0,characters="";function node(Xe,Ke,Ye,Je,tt,st,rt){return{value:Xe,root:Ke,parent:Ye,type:Je,props:tt,children:st,line:line$1,column:column$1,length:rt,return:""}}function copy(Xe,Ke){return assign(node("",null,null,"",null,null,0),Xe,{length:-Xe.length},Ke)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column$1--,character===10&&(column$1=1,line$1--),character}function next(){return character=position<length?charat(characters,position++):0,column$1++,character===10&&(column$1=1,line$1++),character}function peek$1(){return charat(characters,position)}function caret(){return position}function slice(Xe,Ke){return substr(characters,Xe,Ke)}function token$1(Xe){switch(Xe){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(Xe){return line$1=column$1=1,length=strlen(characters=Xe),position=0,[]}function dealloc(Xe){return characters="",Xe}function delimit(Xe){return trim(slice(position-1,delimiter(Xe===91?Xe+2:Xe===40?Xe+1:Xe)))}function whitespace(Xe){for(;(character=peek$1())&&character<33;)next();return token$1(Xe)>2||token$1(character)>3?"":" "}function escaping(Xe,Ke){for(;--Ke&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(Xe,caret()+(Ke<6&&peek$1()==32&&next()==32))}function delimiter(Xe){for(;next();)switch(character){case Xe:return position;case 34:case 39:Xe!==34&&Xe!==39&&delimiter(character);break;case 40:Xe===41&&delimiter(Xe);break;case 92:next();break}return position}function commenter(Xe,Ke){for(;next()&&Xe+character!==57;)if(Xe+character===84&&peek$1()===47)break;return"/*"+slice(Ke,position-1)+"*"+from(Xe===47?Xe:next())}function identifier(Xe){for(;!token$1(peek$1());)next();return slice(Xe,position)}function compile(Xe){return dealloc(parse$1("",null,null,null,[""],Xe=alloc(Xe),0,[0],Xe))}function parse$1(Xe,Ke,Ye,Je,tt,st,rt,it,ot){for(var at=0,lt=0,ut=rt,ht=0,pt=0,ft=0,xt=1,vt=1,At=1,Et=0,wt="",_t=tt,Ct=st,Tt=Je,St=wt;vt;)switch(ft=Et,Et=next()){case 40:if(ft!=108&&charat(St,ut-1)==58){indexof(St+=replace(delimit(Et),"&","&\f"),"&\f")!=-1&&(At=-1);break}case 34:case 39:case 91:St+=delimit(Et);break;case 9:case 10:case 13:case 32:St+=whitespace(ft);break;case 92:St+=escaping(caret()-1,7);continue;case 47:switch(peek$1()){case 42:case 47:append(comment(commenter(next(),caret()),Ke,Ye),ot);break;default:St+="/"}break;case 123*xt:it[at++]=strlen(St)*At;case 125*xt:case 59:case 0:switch(Et){case 0:case 125:vt=0;case 59+lt:pt>0&&strlen(St)-ut&&append(pt>32?declaration(St+";",Je,Ye,ut-1):declaration(replace(St," ","")+";",Je,Ye,ut-2),ot);break;case 59:St+=";";default:if(append(Tt=ruleset(St,Ke,Ye,at,lt,tt,it,wt,_t=[],Ct=[],ut),st),Et===123)if(lt===0)parse$1(St,Ke,Tt,Tt,_t,st,ut,it,Ct);else switch(ht===99&&charat(St,3)===110?100:ht){case 100:case 109:case 115:parse$1(Xe,Tt,Tt,Je&&append(ruleset(Xe,Tt,Tt,0,0,tt,it,wt,tt,_t=[],ut),Ct),tt,Ct,ut,it,Je?_t:Ct);break;default:parse$1(St,Tt,Tt,Tt,[""],Ct,0,it,Ct)}}at=lt=pt=0,xt=At=1,wt=St="",ut=rt;break;case 58:ut=1+strlen(St),pt=ft;default:if(xt<1){if(Et==123)--xt;else if(Et==125&&xt++==0&&prev()==125)continue}switch(St+=from(Et),Et*xt){case 38:At=lt>0?1:(St+="\f",-1);break;case 44:it[at++]=(strlen(St)-1)*At,At=1;break;case 64:peek$1()===45&&(St+=delimit(next())),ht=peek$1(),lt=ut=strlen(wt=St+=identifier(caret())),Et++;break;case 45:ft===45&&strlen(St)==2&&(xt=0)}}return st}function ruleset(Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt){for(var ut=tt-1,ht=tt===0?st:[""],pt=sizeof(ht),ft=0,xt=0,vt=0;ft<Je;++ft)for(var At=0,Et=substr(Xe,ut+1,ut=abs(xt=rt[ft])),wt=Xe;At<pt;++At)(wt=trim(xt>0?ht[At]+" "+Et:replace(Et,/&\f/g,ht[At])))&&(ot[vt++]=wt);return node(Xe,Ke,Ye,tt===0?RULESET:it,ot,at,lt)}function comment(Xe,Ke,Ye){return node(Xe,Ke,Ye,COMMENT,from(char()),substr(Xe,2,-2),0)}function declaration(Xe,Ke,Ye,Je){return node(Xe,Ke,Ye,DECLARATION,substr(Xe,0,Je),substr(Xe,Je+1,-1),Je)}function serialize(Xe,Ke){for(var Ye="",Je=sizeof(Xe),tt=0;tt<Je;tt++)Ye+=Ke(Xe[tt],tt,Xe,Ke)||"";return Ye}function stringify$1(Xe,Ke,Ye,Je){switch(Xe.type){case IMPORT:case DECLARATION:return Xe.return=Xe.return||Xe.value;case COMMENT:return"";case KEYFRAMES:return Xe.return=Xe.value+"{"+serialize(Xe.children,Je)+"}";case RULESET:Xe.value=Xe.props.join(",")}return strlen(Ye=serialize(Xe.children,Je))?Xe.return=Xe.value+"{"+Ye+"}":""}function middleware(Xe){var Ke=sizeof(Xe);return function(Ye,Je,tt,st){for(var rt="",it=0;it<Ke;it++)rt+=Xe[it](Ye,Je,tt,st)||"";return rt}}function rulesheet(Xe){return function(Ke){Ke.root||(Ke=Ke.return)&&Xe(Ke)}}function memoize(Xe){var Ke=Object.create(null);return function(Ye){return Ke[Ye]===void 0&&(Ke[Ye]=Xe(Ye)),Ke[Ye]}}var identifierWithPointTracking=function Xe(Ke,Ye,Je){for(var tt=0,st=0;tt=st,st=peek$1(),tt===38&&st===12&&(Ye[Je]=1),!token$1(st);)next();return slice(Ke,position)},toRules=function Xe(Ke,Ye){var Je=-1,tt=44;do switch(token$1(tt)){case 0:tt===38&&peek$1()===12&&(Ye[Je]=1),Ke[Je]+=identifierWithPointTracking(position-1,Ye,Je);break;case 2:Ke[Je]+=delimit(tt);break;case 4:if(tt===44){Ke[++Je]=peek$1()===58?"&\f":"",Ye[Je]=Ke[Je].length;break}default:Ke[Je]+=from(tt)}while(tt=next());return Ke},getRules=function Xe(Ke,Ye){return dealloc(toRules(alloc(Ke),Ye))},fixedElements=new WeakMap,compat=function Xe(Ke){if(!(Ke.type!=="rule"||!Ke.parent||Ke.length<1)){for(var Ye=Ke.value,Je=Ke.parent,tt=Ke.column===Je.column&&Ke.line===Je.line;Je.type!=="rule";)if(Je=Je.parent,!Je)return;if(!(Ke.props.length===1&&Ye.charCodeAt(0)!==58&&!fixedElements.get(Je))&&!tt){fixedElements.set(Ke,!0);for(var st=[],rt=getRules(Ye,st),it=Je.props,ot=0,at=0;ot<rt.length;ot++)for(var lt=0;lt<it.length;lt++,at++)Ke.props[at]=st[ot]?rt[ot].replace(/&\f/g,it[lt]):it[lt]+" "+rt[ot]}}},removeLabel=function Xe(Ke){if(Ke.type==="decl"){var Ye=Ke.value;Ye.charCodeAt(0)===108&&Ye.charCodeAt(2)===98&&(Ke.return="",Ke.value="")}};function prefix(Xe,Ke){switch(hash(Xe,Ke)){case 5103:return WEBKIT+"print-"+Xe+Xe;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+Xe+Xe;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+Xe+MOZ+Xe+MS+Xe+Xe;case 6828:case 4268:return WEBKIT+Xe+MS+Xe+Xe;case 6165:return WEBKIT+Xe+MS+"flex-"+Xe+Xe;case 5187:return WEBKIT+Xe+replace(Xe,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+Xe;case 5443:return WEBKIT+Xe+MS+"flex-item-"+replace(Xe,/flex-|-self/,"")+Xe;case 4675:return WEBKIT+Xe+MS+"flex-line-pack"+replace(Xe,/align-content|flex-|-self/,"")+Xe;case 5548:return WEBKIT+Xe+MS+replace(Xe,"shrink","negative")+Xe;case 5292:return WEBKIT+Xe+MS+replace(Xe,"basis","preferred-size")+Xe;case 6060:return WEBKIT+"box-"+replace(Xe,"-grow","")+WEBKIT+Xe+MS+replace(Xe,"grow","positive")+Xe;case 4554:return WEBKIT+replace(Xe,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+Xe;case 6187:return replace(replace(replace(Xe,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),Xe,"")+Xe;case 5495:case 3959:return replace(Xe,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(Xe,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+Xe+Xe;case 4095:case 3583:case 4068:case 2532:return replace(Xe,/(.+)-inline(.+)/,WEBKIT+"$1$2")+Xe;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(Xe)-1-Ke>6)switch(charat(Xe,Ke+1)){case 109:if(charat(Xe,Ke+4)!==45)break;case 102:return replace(Xe,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(Xe,Ke+3)==108?"$3":"$2-$3"))+Xe;case 115:return~indexof(Xe,"stretch")?prefix(replace(Xe,"stretch","fill-available"),Ke)+Xe:Xe}break;case 4949:if(charat(Xe,Ke+1)!==115)break;case 6444:switch(charat(Xe,strlen(Xe)-3-(~indexof(Xe,"!important")&&10))){case 107:return replace(Xe,":",":"+WEBKIT)+Xe;case 101:return replace(Xe,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(Xe,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+Xe}break;case 5936:switch(charat(Xe,Ke+11)){case 114:return WEBKIT+Xe+MS+replace(Xe,/[svh]\w+-[tblr]{2}/,"tb")+Xe;case 108:return WEBKIT+Xe+MS+replace(Xe,/[svh]\w+-[tblr]{2}/,"tb-rl")+Xe;case 45:return WEBKIT+Xe+MS+replace(Xe,/[svh]\w+-[tblr]{2}/,"lr")+Xe}return WEBKIT+Xe+MS+Xe+Xe}return Xe}var prefixer=function Xe(Ke,Ye,Je,tt){if(Ke.length>-1&&!Ke.return)switch(Ke.type){case DECLARATION:Ke.return=prefix(Ke.value,Ke.length);break;case KEYFRAMES:return serialize([copy(Ke,{value:replace(Ke.value,"@","@"+WEBKIT)})],tt);case RULESET:if(Ke.length)return combine(Ke.props,function(st){switch(match(st,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(Ke,{props:[replace(st,/:(read-\w+)/,":"+MOZ+"$1")]})],tt);case"::placeholder":return serialize([copy(Ke,{props:[replace(st,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(Ke,{props:[replace(st,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(Ke,{props:[replace(st,/:(plac\w+)/,MS+"input-$1")]})],tt)}return""})}},defaultStylisPlugins=[prefixer],createCache=function Xe(Ke){var Ye=Ke.key;if(Ye==="css"){var Je=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(Je,function(xt){var vt=xt.getAttribute("data-emotion");vt.indexOf(" ")!==-1&&(document.head.appendChild(xt),xt.setAttribute("data-s",""))})}var tt=Ke.stylisPlugins||defaultStylisPlugins,st={},rt,it=[];rt=Ke.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+Ye+' "]'),function(xt){for(var vt=xt.getAttribute("data-emotion").split(" "),At=1;At<vt.length;At++)st[vt[At]]=!0;it.push(xt)});var ot,at=[compat,removeLabel];{var lt,ut=[stringify$1,rulesheet(function(xt){lt.insert(xt)})],ht=middleware(at.concat(tt,ut)),pt=function(vt){return serialize(compile(vt),ht)};ot=function(vt,At,Et,wt){lt=Et,pt(vt?vt+"{"+At.styles+"}":At.styles),wt&&(ft.inserted[At.name]=!0)}}var ft={key:Ye,sheet:new StyleSheet({key:Ye,container:rt,nonce:Ke.nonce,speedy:Ke.speedy,prepend:Ke.prepend,insertionPoint:Ke.insertionPoint}),nonce:Ke.nonce,inserted:st,registered:{},insert:ot};return ft.sheet.hydrate(it),ft},reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=typeof Symbol=="function"&&Symbol.for,c$1=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m$1=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w$1=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(Xe){if(typeof Xe=="object"&&Xe!==null){var Ke=Xe.$$typeof;switch(Ke){case c$1:switch(Xe=Xe.type,Xe){case l:case m$1:case e:case g:case f:case p:return Xe;default:switch(Xe=Xe&&Xe.$$typeof,Xe){case k:case n:case t:case r:case h:return Xe;default:return Ke}}case d:return Ke}}}function A(Xe){return z(Xe)===m$1}reactIs_production_min.AsyncMode=l;reactIs_production_min.ConcurrentMode=m$1;reactIs_production_min.ContextConsumer=k;reactIs_production_min.ContextProvider=h;reactIs_production_min.Element=c$1;reactIs_production_min.ForwardRef=n;reactIs_production_min.Fragment=e;reactIs_production_min.Lazy=t;reactIs_production_min.Memo=r;reactIs_production_min.Portal=d;reactIs_production_min.Profiler=g;reactIs_production_min.StrictMode=f;reactIs_production_min.Suspense=p;reactIs_production_min.isAsyncMode=function(Xe){return A(Xe)||z(Xe)===l};reactIs_production_min.isConcurrentMode=A;reactIs_production_min.isContextConsumer=function(Xe){return z(Xe)===k};reactIs_production_min.isContextProvider=function(Xe){return z(Xe)===h};reactIs_production_min.isElement=function(Xe){return typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===c$1};reactIs_production_min.isForwardRef=function(Xe){return z(Xe)===n};reactIs_production_min.isFragment=function(Xe){return z(Xe)===e};reactIs_production_min.isLazy=function(Xe){return z(Xe)===t};reactIs_production_min.isMemo=function(Xe){return z(Xe)===r};reactIs_production_min.isPortal=function(Xe){return z(Xe)===d};reactIs_production_min.isProfiler=function(Xe){return z(Xe)===g};reactIs_production_min.isStrictMode=function(Xe){return z(Xe)===f};reactIs_production_min.isSuspense=function(Xe){return z(Xe)===p};reactIs_production_min.isValidElementType=function(Xe){return typeof Xe=="string"||typeof Xe=="function"||Xe===e||Xe===m$1||Xe===g||Xe===f||Xe===p||Xe===q||typeof Xe=="object"&&Xe!==null&&(Xe.$$typeof===t||Xe.$$typeof===r||Xe.$$typeof===h||Xe.$$typeof===k||Xe.$$typeof===n||Xe.$$typeof===w$1||Xe.$$typeof===x||Xe.$$typeof===y||Xe.$$typeof===v)};reactIs_production_min.typeOf=z;reactIs$1.exports=reactIs_production_min;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser=!0;function getRegisteredStyles(Xe,Ke,Ye){var Je="";return Ye.split(" ").forEach(function(tt){Xe[tt]!==void 0?Ke.push(Xe[tt]+";"):Je+=tt+" "}),Je}var registerStyles=function Xe(Ke,Ye,Je){var tt=Ke.key+"-"+Ye.name;(Je===!1||isBrowser===!1)&&Ke.registered[tt]===void 0&&(Ke.registered[tt]=Ye.styles)},insertStyles=function Xe(Ke,Ye,Je){registerStyles(Ke,Ye,Je);var tt=Ke.key+"-"+Ye.name;if(Ke.inserted[Ye.name]===void 0){var st=Ye;do Ke.insert(Ye===st?"."+tt:"",st,Ke.sheet,!0),st=st.next;while(st!==void 0)}};function murmur2(Xe){for(var Ke=0,Ye,Je=0,tt=Xe.length;tt>=4;++Je,tt-=4)Ye=Xe.charCodeAt(Je)&255|(Xe.charCodeAt(++Je)&255)<<8|(Xe.charCodeAt(++Je)&255)<<16|(Xe.charCodeAt(++Je)&255)<<24,Ye=(Ye&65535)*1540483477+((Ye>>>16)*59797<<16),Ye^=Ye>>>24,Ke=(Ye&65535)*1540483477+((Ye>>>16)*59797<<16)^(Ke&65535)*1540483477+((Ke>>>16)*59797<<16);switch(tt){case 3:Ke^=(Xe.charCodeAt(Je+2)&255)<<16;case 2:Ke^=(Xe.charCodeAt(Je+1)&255)<<8;case 1:Ke^=Xe.charCodeAt(Je)&255,Ke=(Ke&65535)*1540483477+((Ke>>>16)*59797<<16)}return Ke^=Ke>>>13,Ke=(Ke&65535)*1540483477+((Ke>>>16)*59797<<16),((Ke^Ke>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function Xe(Ke){return Ke.charCodeAt(1)===45},isProcessableValue=function Xe(Ke){return Ke!=null&&typeof Ke!="boolean"},processStyleName=memoize(function(Xe){return isCustomProperty(Xe)?Xe:Xe.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function Xe(Ke,Ye){switch(Ke){case"animation":case"animationName":if(typeof Ye=="string")return Ye.replace(animationRegex,function(Je,tt,st){return cursor={name:tt,styles:st,next:cursor},tt})}return unitlessKeys[Ke]!==1&&!isCustomProperty(Ke)&&typeof Ye=="number"&&Ye!==0?Ye+"px":Ye};function handleInterpolation(Xe,Ke,Ye){if(Ye==null)return"";if(Ye.__emotion_styles!==void 0)return Ye;switch(typeof Ye){case"boolean":return"";case"object":{if(Ye.anim===1)return cursor={name:Ye.name,styles:Ye.styles,next:cursor},Ye.name;if(Ye.styles!==void 0){var Je=Ye.next;if(Je!==void 0)for(;Je!==void 0;)cursor={name:Je.name,styles:Je.styles,next:cursor},Je=Je.next;var tt=Ye.styles+";";return tt}return createStringFromObject(Xe,Ke,Ye)}case"function":{if(Xe!==void 0){var st=cursor,rt=Ye(Xe);return cursor=st,handleInterpolation(Xe,Ke,rt)}break}}return Ye}function createStringFromObject(Xe,Ke,Ye){var Je="";if(Array.isArray(Ye))for(var tt=0;tt<Ye.length;tt++)Je+=handleInterpolation(Xe,Ke,Ye[tt])+";";else for(var st in Ye){var rt=Ye[st];if(typeof rt!="object")isProcessableValue(rt)&&(Je+=processStyleName(st)+":"+processStyleValue(st,rt)+";");else if(Array.isArray(rt)&&typeof rt[0]=="string"&&Ke==null)for(var it=0;it<rt.length;it++)isProcessableValue(rt[it])&&(Je+=processStyleName(st)+":"+processStyleValue(st,rt[it])+";");else{var ot=handleInterpolation(Xe,Ke,rt);switch(st){case"animation":case"animationName":{Je+=processStyleName(st)+":"+ot+";";break}default:Je+=st+"{"+ot+"}"}}}return Je}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function Xe(Ke,Ye,Je){if(Ke.length===1&&typeof Ke[0]=="object"&&Ke[0]!==null&&Ke[0].styles!==void 0)return Ke[0];var tt=!0,st="";cursor=void 0;var rt=Ke[0];rt==null||rt.raw===void 0?(tt=!1,st+=handleInterpolation(Je,Ye,rt)):st+=rt[0];for(var it=1;it<Ke.length;it++)st+=handleInterpolation(Je,Ye,Ke[it]),tt&&(st+=rt[it]);labelPattern.lastIndex=0;for(var ot="",at;(at=labelPattern.exec(st))!==null;)ot+="-"+at[1];var lt=murmur2(st)+ot;return{name:lt,styles:st,next:cursor}},syncFallback=function Xe(Ke){return Ke()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,hasOwnProperty$4={}.hasOwnProperty,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function Xe(Ke){return reactExports.forwardRef(function(Ye,Je){var tt=reactExports.useContext(EmotionCacheContext);return Ke(Ye,tt,Je)})},ThemeContext=reactExports.createContext({}),typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function Xe(Ke,Ye){var Je={};for(var tt in Ye)hasOwnProperty$4.call(Ye,tt)&&(Je[tt]=Ye[tt]);return Je[typePropName]=Ke,Je},Insertion=function Xe(Ke){var Ye=Ke.cache,Je=Ke.serialized,tt=Ke.isStringTag;return registerStyles(Ye,Je,tt),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(Ye,Je,tt)}),null},Emotion=withEmotionCache(function(Xe,Ke,Ye){var Je=Xe.css;typeof Je=="string"&&Ke.registered[Je]!==void 0&&(Je=Ke.registered[Je]);var tt=Xe[typePropName],st=[Je],rt="";typeof Xe.className=="string"?rt=getRegisteredStyles(Ke.registered,st,Xe.className):Xe.className!=null&&(rt=Xe.className+" ");var it=serializeStyles(st,void 0,reactExports.useContext(ThemeContext));rt+=Ke.key+"-"+it.name;var ot={};for(var at in Xe)hasOwnProperty$4.call(Xe,at)&&at!=="css"&&at!==typePropName&&(ot[at]=Xe[at]);return ot.ref=Ye,ot.className=rt,reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:Ke,serialized:it,isStringTag:typeof tt=="string"}),reactExports.createElement(tt,ot))}),jsx=function Xe(Ke,Ye){var Je=arguments;if(Ye==null||!hasOwnProperty$4.call(Ye,"css"))return reactExports.createElement.apply(void 0,Je);var tt=Je.length,st=new Array(tt);st[0]=Emotion,st[1]=createEmotionProps(Ke,Ye);for(var rt=2;rt<tt;rt++)st[rt]=Je[rt];return reactExports.createElement.apply(null,st)};function css(){for(var Xe=arguments.length,Ke=new Array(Xe),Ye=0;Ye<Xe;Ye++)Ke[Ye]=arguments[Ye];return serializeStyles(Ke)}var keyframes=function Xe(){var Ke=css.apply(void 0,arguments),Ye="animation-"+Ke.name;return{name:Ye,styles:"@keyframes "+Ye+"{"+Ke.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function _taggedTemplateLiteral(Xe,Ke){return Ke||(Ke=Xe.slice(0)),Object.freeze(Object.defineProperties(Xe,{raw:{value:Object.freeze(Ke)}}))}const min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=Xe=>({x:Xe,y:Xe});function rectToClientRect(Xe){return{...Xe,top:Xe.y,left:Xe.x,right:Xe.x+Xe.width,bottom:Xe.y+Xe.height}}function getNodeName(Xe){return isNode(Xe)?(Xe.nodeName||"").toLowerCase():"#document"}function getWindow(Xe){var Ke;return(Xe==null||(Ke=Xe.ownerDocument)==null?void 0:Ke.defaultView)||window}function getDocumentElement(Xe){var Ke;return(Ke=(isNode(Xe)?Xe.ownerDocument:Xe.document)||window.document)==null?void 0:Ke.documentElement}function isNode(Xe){return Xe instanceof Node||Xe instanceof getWindow(Xe).Node}function isElement(Xe){return Xe instanceof Element||Xe instanceof getWindow(Xe).Element}function isHTMLElement$1(Xe){return Xe instanceof HTMLElement||Xe instanceof getWindow(Xe).HTMLElement}function isShadowRoot(Xe){return typeof ShadowRoot>"u"?!1:Xe instanceof ShadowRoot||Xe instanceof getWindow(Xe).ShadowRoot}function isOverflowElement(Xe){const{overflow:Ke,overflowX:Ye,overflowY:Je,display:tt}=getComputedStyle$1(Xe);return/auto|scroll|overlay|hidden|clip/.test(Ke+Je+Ye)&&!["inline","contents"].includes(tt)}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(Xe){return["html","body","#document"].includes(getNodeName(Xe))}function getComputedStyle$1(Xe){return getWindow(Xe).getComputedStyle(Xe)}function getParentNode(Xe){if(getNodeName(Xe)==="html")return Xe;const Ke=Xe.assignedSlot||Xe.parentNode||isShadowRoot(Xe)&&Xe.host||getDocumentElement(Xe);return isShadowRoot(Ke)?Ke.host:Ke}function getNearestOverflowAncestor(Xe){const Ke=getParentNode(Xe);return isLastTraversableNode(Ke)?Xe.ownerDocument?Xe.ownerDocument.body:Xe.body:isHTMLElement$1(Ke)&&isOverflowElement(Ke)?Ke:getNearestOverflowAncestor(Ke)}function getOverflowAncestors(Xe,Ke,Ye){var Je;Ke===void 0&&(Ke=[]),Ye===void 0&&(Ye=!0);const tt=getNearestOverflowAncestor(Xe),st=tt===((Je=Xe.ownerDocument)==null?void 0:Je.body),rt=getWindow(tt);return st?Ke.concat(rt,rt.visualViewport||[],isOverflowElement(tt)?tt:[],rt.frameElement&&Ye?getOverflowAncestors(rt.frameElement):[]):Ke.concat(tt,getOverflowAncestors(tt,[],Ye))}function getCssDimensions(Xe){const Ke=getComputedStyle$1(Xe);let Ye=parseFloat(Ke.width)||0,Je=parseFloat(Ke.height)||0;const tt=isHTMLElement$1(Xe),st=tt?Xe.offsetWidth:Ye,rt=tt?Xe.offsetHeight:Je,it=round(Ye)!==st||round(Je)!==rt;return it&&(Ye=st,Je=rt),{width:Ye,height:Je,$:it}}function unwrapElement(Xe){return isElement(Xe)?Xe:Xe.contextElement}function getScale(Xe){const Ke=unwrapElement(Xe);if(!isHTMLElement$1(Ke))return createCoords(1);const Ye=Ke.getBoundingClientRect(),{width:Je,height:tt,$:st}=getCssDimensions(Ke);let rt=(st?round(Ye.width):Ye.width)/Je,it=(st?round(Ye.height):Ye.height)/tt;return(!rt||!Number.isFinite(rt))&&(rt=1),(!it||!Number.isFinite(it))&&(it=1),{x:rt,y:it}}const noOffsets=createCoords(0);function getVisualOffsets(Xe){const Ke=getWindow(Xe);return!isWebKit()||!Ke.visualViewport?noOffsets:{x:Ke.visualViewport.offsetLeft,y:Ke.visualViewport.offsetTop}}function shouldAddVisualOffsets(Xe,Ke,Ye){return!1}function getBoundingClientRect(Xe,Ke,Ye,Je){Ke===void 0&&(Ke=!1);const tt=Xe.getBoundingClientRect(),st=unwrapElement(Xe);let rt=createCoords(1);Ke&&(rt=getScale(Xe));const it=shouldAddVisualOffsets()?getVisualOffsets(st):createCoords(0);let ot=(tt.left+it.x)/rt.x,at=(tt.top+it.y)/rt.y,lt=tt.width/rt.x,ut=tt.height/rt.y;if(st){const ht=getWindow(st),pt=Je;let ft=ht.frameElement;for(;ft&&Je&&pt!==ht;){const xt=getScale(ft),vt=ft.getBoundingClientRect(),At=getComputedStyle$1(ft),Et=vt.left+(ft.clientLeft+parseFloat(At.paddingLeft))*xt.x,wt=vt.top+(ft.clientTop+parseFloat(At.paddingTop))*xt.y;ot*=xt.x,at*=xt.y,lt*=xt.x,ut*=xt.y,ot+=Et,at+=wt,ft=getWindow(ft).frameElement}}return rectToClientRect({width:lt,height:ut,x:ot,y:at})}function observeMove(Xe,Ke){let Ye=null,Je;const tt=getDocumentElement(Xe);function st(){var it;clearTimeout(Je),(it=Ye)==null||it.disconnect(),Ye=null}function rt(it,ot){it===void 0&&(it=!1),ot===void 0&&(ot=1),st();const{left:at,top:lt,width:ut,height:ht}=Xe.getBoundingClientRect();if(it||Ke(),!ut||!ht)return;const pt=floor(lt),ft=floor(tt.clientWidth-(at+ut)),xt=floor(tt.clientHeight-(lt+ht)),vt=floor(at),Et={rootMargin:-pt+"px "+-ft+"px "+-xt+"px "+-vt+"px",threshold:max(0,min(1,ot))||1};let wt=!0;function _t(Ct){const Tt=Ct[0].intersectionRatio;if(Tt!==ot){if(!wt)return rt();Tt?rt(!1,Tt):Je=setTimeout(()=>{rt(!1,1e-7)},100)}wt=!1}try{Ye=new IntersectionObserver(_t,{...Et,root:tt.ownerDocument})}catch{Ye=new IntersectionObserver(_t,Et)}Ye.observe(Xe)}return rt(!0),st}function autoUpdate(Xe,Ke,Ye,Je){Je===void 0&&(Je={});const{ancestorScroll:tt=!0,ancestorResize:st=!0,elementResize:rt=typeof ResizeObserver=="function",layoutShift:it=typeof IntersectionObserver=="function",animationFrame:ot=!1}=Je,at=unwrapElement(Xe),lt=tt||st?[...at?getOverflowAncestors(at):[],...getOverflowAncestors(Ke)]:[];lt.forEach(At=>{tt&&At.addEventListener("scroll",Ye,{passive:!0}),st&&At.addEventListener("resize",Ye)});const ut=at&&it?observeMove(at,Ye):null;let ht=-1,pt=null;rt&&(pt=new ResizeObserver(At=>{let[Et]=At;Et&&Et.target===at&&pt&&(pt.unobserve(Ke),cancelAnimationFrame(ht),ht=requestAnimationFrame(()=>{var wt;(wt=pt)==null||wt.observe(Ke)})),Ye()}),at&&!ot&&pt.observe(at),pt.observe(Ke));let ft,xt=ot?getBoundingClientRect(Xe):null;ot&&vt();function vt(){const At=getBoundingClientRect(Xe);xt&&(At.x!==xt.x||At.y!==xt.y||At.width!==xt.width||At.height!==xt.height)&&Ye(),xt=At,ft=requestAnimationFrame(vt)}return Ye(),()=>{var At;lt.forEach(Et=>{tt&&Et.removeEventListener("scroll",Ye),st&&Et.removeEventListener("resize",Ye)}),ut==null||ut(),(At=pt)==null||At.disconnect(),pt=null,ot&&cancelAnimationFrame(ft)}}var index=reactExports.useLayoutEffect,_excluded$3=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],noop$2=function Xe(){};function applyPrefixToName(Xe,Ke){return Ke?Ke[0]==="-"?Xe+Ke:Xe+"__"+Ke:Xe}function classNames(Xe,Ke){for(var Ye=arguments.length,Je=new Array(Ye>2?Ye-2:0),tt=2;tt<Ye;tt++)Je[tt-2]=arguments[tt];var st=[].concat(Je);if(Ke&&Xe)for(var rt in Ke)Ke.hasOwnProperty(rt)&&Ke[rt]&&st.push("".concat(applyPrefixToName(Xe,rt)));return st.filter(function(it){return it}).map(function(it){return String(it).trim()}).join(" ")}var cleanValue=function Xe(Ke){return isArray$7(Ke)?Ke.filter(Boolean):_typeof(Ke)==="object"&&Ke!==null?[Ke]:[]},cleanCommonProps=function Xe(Ke){Ke.className,Ke.clearValue,Ke.cx,Ke.getStyles,Ke.getClassNames,Ke.getValue,Ke.hasValue,Ke.isMulti,Ke.isRtl,Ke.options,Ke.selectOption,Ke.selectProps,Ke.setValue,Ke.theme;var Ye=_objectWithoutProperties(Ke,_excluded$3);return _objectSpread2({},Ye)},getStyleProps=function Xe(Ke,Ye,Je){var tt=Ke.cx,st=Ke.getStyles,rt=Ke.getClassNames,it=Ke.className;return{css:st(Ye,Ke),className:tt(Je??{},rt(Ye,Ke),it)}};function isDocumentElement(Xe){return[document.documentElement,document.body,window].indexOf(Xe)>-1}function normalizedHeight(Xe){return isDocumentElement(Xe)?window.innerHeight:Xe.clientHeight}function getScrollTop(Xe){return isDocumentElement(Xe)?window.pageYOffset:Xe.scrollTop}function scrollTo(Xe,Ke){if(isDocumentElement(Xe)){window.scrollTo(0,Ke);return}Xe.scrollTop=Ke}function getScrollParent(Xe){var Ke=getComputedStyle(Xe),Ye=Ke.position==="absolute",Je=/(auto|scroll)/;if(Ke.position==="fixed")return document.documentElement;for(var tt=Xe;tt=tt.parentElement;)if(Ke=getComputedStyle(tt),!(Ye&&Ke.position==="static")&&Je.test(Ke.overflow+Ke.overflowY+Ke.overflowX))return tt;return document.documentElement}function easeOutCubic(Xe,Ke,Ye,Je){return Ye*((Xe=Xe/Je-1)*Xe*Xe+1)+Ke}function animatedScrollTo(Xe,Ke){var Ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,Je=arguments.length>3&&arguments[3]!==void 0?arguments[3]:noop$2,tt=getScrollTop(Xe),st=Ke-tt,rt=10,it=0;function ot(){it+=rt;var at=easeOutCubic(it,tt,st,Ye);scrollTo(Xe,at),it<Ye?window.requestAnimationFrame(ot):Je(Xe)}ot()}function scrollIntoView(Xe,Ke){var Ye=Xe.getBoundingClientRect(),Je=Ke.getBoundingClientRect(),tt=Ke.offsetHeight/3;Je.bottom+tt>Ye.bottom?scrollTo(Xe,Math.min(Ke.offsetTop+Ke.clientHeight-Xe.offsetHeight+tt,Xe.scrollHeight)):Je.top-tt<Ye.top&&scrollTo(Xe,Math.max(Ke.offsetTop-tt,0))}function getBoundingClientObj(Xe){var Ke=Xe.getBoundingClientRect();return{bottom:Ke.bottom,height:Ke.height,left:Ke.left,right:Ke.right,top:Ke.top,width:Ke.width}}function isTouchCapable(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function isMobileDevice(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var passiveOptionAccessed=!1,options={get passive(){return passiveOptionAccessed=!0}},w=typeof window<"u"?window:{};w.addEventListener&&w.removeEventListener&&(w.addEventListener("p",noop$2,options),w.removeEventListener("p",noop$2,!1));var supportsPassiveEvents=passiveOptionAccessed;function notNullish(Xe){return Xe!=null}function isArray$7(Xe){return Array.isArray(Xe)}function valueTernary(Xe,Ke,Ye){return Xe?Ke:Ye}function singleValueAsValue(Xe){return Xe}function multiValueAsValue(Xe){return Xe}var removeProps=function Xe(Ke){for(var Ye=arguments.length,Je=new Array(Ye>1?Ye-1:0),tt=1;tt<Ye;tt++)Je[tt-1]=arguments[tt];var st=Object.entries(Ke).filter(function(rt){var it=_slicedToArray(rt,1),ot=it[0];return!Je.includes(ot)});return st.reduce(function(rt,it){var ot=_slicedToArray(it,2),at=ot[0],lt=ot[1];return rt[at]=lt,rt},{})};function getMenuPlacement(Xe){var Ke=Xe.maxHeight,Ye=Xe.menuEl,Je=Xe.minHeight,tt=Xe.placement,st=Xe.shouldScroll,rt=Xe.isFixedPosition,it=Xe.controlHeight,ot=getScrollParent(Ye),at={placement:"bottom",maxHeight:Ke};if(!Ye||!Ye.offsetParent)return at;var lt=ot.getBoundingClientRect(),ut=lt.height,ht=Ye.getBoundingClientRect(),pt=ht.bottom,ft=ht.height,xt=ht.top,vt=Ye.offsetParent.getBoundingClientRect(),At=vt.top,Et=rt?window.innerHeight:normalizedHeight(ot),wt=getScrollTop(ot),_t=parseInt(getComputedStyle(Ye).marginBottom,10),Ct=parseInt(getComputedStyle(Ye).marginTop,10),Tt=At-Ct,St=Et-xt,Rt=Tt+wt,Nt=ut-wt-xt,Pt=pt-Et+wt+_t,Bt=wt+xt-Ct,Lt=160;switch(tt){case"auto":case"bottom":if(St>=ft)return{placement:"bottom",maxHeight:Ke};if(Nt>=ft&&!rt)return st&&animatedScrollTo(ot,Pt,Lt),{placement:"bottom",maxHeight:Ke};if(!rt&&Nt>=Je||rt&&St>=Je){st&&animatedScrollTo(ot,Pt,Lt);var zt=rt?St-_t:Nt-_t;return{placement:"bottom",maxHeight:zt}}if(tt==="auto"||rt){var Dt=Ke,Vt=rt?Tt:Rt;return Vt>=Je&&(Dt=Math.min(Vt-_t-it,Ke)),{placement:"top",maxHeight:Dt}}if(tt==="bottom")return st&&scrollTo(ot,Pt),{placement:"bottom",maxHeight:Ke};break;case"top":if(Tt>=ft)return{placement:"top",maxHeight:Ke};if(Rt>=ft&&!rt)return st&&animatedScrollTo(ot,Bt,Lt),{placement:"top",maxHeight:Ke};if(!rt&&Rt>=Je||rt&&Tt>=Je){var Gt=Ke;return(!rt&&Rt>=Je||rt&&Tt>=Je)&&(Gt=rt?Tt-Ct:Rt-Ct),st&&animatedScrollTo(ot,Bt,Lt),{placement:"top",maxHeight:Gt}}return{placement:"bottom",maxHeight:Ke};default:throw new Error('Invalid placement provided "'.concat(tt,'".'))}return at}function alignToControl(Xe){var Ke={bottom:"top",top:"bottom"};return Xe?Ke[Xe]:"bottom"}var coercePlacement=function Xe(Ke){return Ke==="auto"?"bottom":Ke},menuCSS=function Xe(Ke,Ye){var Je,tt=Ke.placement,st=Ke.theme,rt=st.borderRadius,it=st.spacing,ot=st.colors;return _objectSpread2((Je={label:"menu"},_defineProperty(Je,alignToControl(tt),"100%"),_defineProperty(Je,"position","absolute"),_defineProperty(Je,"width","100%"),_defineProperty(Je,"zIndex",1),Je),Ye?{}:{backgroundColor:ot.neutral0,borderRadius:rt,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:it.menuGutter,marginTop:it.menuGutter})},PortalPlacementContext=reactExports.createContext(null),MenuPlacer=function Xe(Ke){var Ye=Ke.children,Je=Ke.minMenuHeight,tt=Ke.maxMenuHeight,st=Ke.menuPlacement,rt=Ke.menuPosition,it=Ke.menuShouldScrollIntoView,ot=Ke.theme,at=reactExports.useContext(PortalPlacementContext)||{},lt=at.setPortalPlacement,ut=reactExports.useRef(null),ht=reactExports.useState(tt),pt=_slicedToArray(ht,2),ft=pt[0],xt=pt[1],vt=reactExports.useState(null),At=_slicedToArray(vt,2),Et=At[0],wt=At[1],_t=ot.spacing.controlHeight;return index(function(){var Ct=ut.current;if(Ct){var Tt=rt==="fixed",St=it&&!Tt,Rt=getMenuPlacement({maxHeight:tt,menuEl:Ct,minHeight:Je,placement:st,shouldScroll:St,isFixedPosition:Tt,controlHeight:_t});xt(Rt.maxHeight),wt(Rt.placement),lt==null||lt(Rt.placement)}},[tt,st,rt,it,Je,lt,_t]),Ye({ref:ut,placerProps:_objectSpread2(_objectSpread2({},Ke),{},{placement:Et||coercePlacement(st),maxHeight:ft})})},Menu$1=function Xe(Ke){var Ye=Ke.children,Je=Ke.innerRef,tt=Ke.innerProps;return jsx("div",_extends({},getStyleProps(Ke,"menu",{menu:!0}),{ref:Je},tt),Ye)},menuListCSS=function Xe(Ke,Ye){var Je=Ke.maxHeight,tt=Ke.theme.spacing.baseUnit;return _objectSpread2({maxHeight:Je,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Ye?{}:{paddingBottom:tt,paddingTop:tt})},MenuList=function Xe(Ke){var Ye=Ke.children,Je=Ke.innerProps,tt=Ke.innerRef,st=Ke.isMulti;return jsx("div",_extends({},getStyleProps(Ke,"menuList",{"menu-list":!0,"menu-list--is-multi":st}),{ref:tt},Je),Ye)},noticeCSS=function Xe(Ke,Ye){var Je=Ke.theme,tt=Je.spacing.baseUnit,st=Je.colors;return _objectSpread2({textAlign:"center"},Ye?{}:{color:st.neutral40,padding:"".concat(tt*2,"px ").concat(tt*3,"px")})},noOptionsMessageCSS=noticeCSS,loadingMessageCSS=noticeCSS,NoOptionsMessage=function Xe(Ke){var Ye=Ke.children,Je=Ke.innerProps;return jsx("div",_extends({},getStyleProps(Ke,"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),Je),Ye)};NoOptionsMessage.defaultProps={children:"No options"};var LoadingMessage=function Xe(Ke){var Ye=Ke.children,Je=Ke.innerProps;return jsx("div",_extends({},getStyleProps(Ke,"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),Je),Ye)};LoadingMessage.defaultProps={children:"Loading..."};var menuPortalCSS=function Xe(Ke){var Ye=Ke.rect,Je=Ke.offset,tt=Ke.position;return{left:Ye.left,position:tt,top:Je,width:Ye.width,zIndex:1}},MenuPortal=function Xe(Ke){var Ye=Ke.appendTo,Je=Ke.children,tt=Ke.controlElement,st=Ke.innerProps,rt=Ke.menuPlacement,it=Ke.menuPosition,ot=reactExports.useRef(null),at=reactExports.useRef(null),lt=reactExports.useState(coercePlacement(rt)),ut=_slicedToArray(lt,2),ht=ut[0],pt=ut[1],ft=reactExports.useMemo(function(){return{setPortalPlacement:pt}},[]),xt=reactExports.useState(null),vt=_slicedToArray(xt,2),At=vt[0],Et=vt[1],wt=reactExports.useCallback(function(){if(tt){var St=getBoundingClientObj(tt),Rt=it==="fixed"?0:window.pageYOffset,Nt=St[ht]+Rt;(Nt!==(At==null?void 0:At.offset)||St.left!==(At==null?void 0:At.rect.left)||St.width!==(At==null?void 0:At.rect.width))&&Et({offset:Nt,rect:St})}},[tt,it,ht,At==null?void 0:At.offset,At==null?void 0:At.rect.left,At==null?void 0:At.rect.width]);index(function(){wt()},[wt]);var _t=reactExports.useCallback(function(){typeof at.current=="function"&&(at.current(),at.current=null),tt&&ot.current&&(at.current=autoUpdate(tt,ot.current,wt,{elementResize:"ResizeObserver"in window}))},[tt,wt]);index(function(){_t()},[_t]);var Ct=reactExports.useCallback(function(St){ot.current=St,_t()},[_t]);if(!Ye&&it!=="fixed"||!At)return null;var Tt=jsx("div",_extends({ref:Ct},getStyleProps(_objectSpread2(_objectSpread2({},Ke),{},{offset:At.offset,position:it,rect:At.rect}),"menuPortal",{"menu-portal":!0}),st),Je);return jsx(PortalPlacementContext.Provider,{value:ft},Ye?reactDomExports.createPortal(Tt,Ye):Tt)},containerCSS=function Xe(Ke){var Ye=Ke.isDisabled,Je=Ke.isRtl;return{label:"container",direction:Je?"rtl":void 0,pointerEvents:Ye?"none":void 0,position:"relative"}},SelectContainer=function Xe(Ke){var Ye=Ke.children,Je=Ke.innerProps,tt=Ke.isDisabled,st=Ke.isRtl;return jsx("div",_extends({},getStyleProps(Ke,"container",{"--is-disabled":tt,"--is-rtl":st}),Je),Ye)},valueContainerCSS=function Xe(Ke,Ye){var Je=Ke.theme.spacing,tt=Ke.isMulti,st=Ke.hasValue,rt=Ke.selectProps.controlShouldRenderValue;return _objectSpread2({alignItems:"center",display:tt&&st&&rt?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},Ye?{}:{padding:"".concat(Je.baseUnit/2,"px ").concat(Je.baseUnit*2,"px")})},ValueContainer=function Xe(Ke){var Ye=Ke.children,Je=Ke.innerProps,tt=Ke.isMulti,st=Ke.hasValue;return jsx("div",_extends({},getStyleProps(Ke,"valueContainer",{"value-container":!0,"value-container--is-multi":tt,"value-container--has-value":st}),Je),Ye)},indicatorsContainerCSS=function Xe(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},IndicatorsContainer=function Xe(Ke){var Ye=Ke.children,Je=Ke.innerProps;return jsx("div",_extends({},getStyleProps(Ke,"indicatorsContainer",{indicators:!0}),Je),Ye)},_templateObject,_excluded$2=["size"],_ref2$2={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Svg=function Xe(Ke){var Ye=Ke.size,Je=_objectWithoutProperties(Ke,_excluded$2);return jsx("svg",_extends({height:Ye,width:Ye,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:_ref2$2},Je))},CrossIcon=function Xe(Ke){return jsx(Svg,_extends({size:20},Ke),jsx("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},DownChevron=function Xe(Ke){return jsx(Svg,_extends({size:20},Ke),jsx("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},baseCSS=function Xe(Ke,Ye){var Je=Ke.isFocused,tt=Ke.theme,st=tt.spacing.baseUnit,rt=tt.colors;return _objectSpread2({label:"indicatorContainer",display:"flex",transition:"color 150ms"},Ye?{}:{color:Je?rt.neutral60:rt.neutral20,padding:st*2,":hover":{color:Je?rt.neutral80:rt.neutral40}})},dropdownIndicatorCSS=baseCSS,DropdownIndicator=function Xe(Ke){var Ye=Ke.children,Je=Ke.innerProps;return jsx("div",_extends({},getStyleProps(Ke,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),Je),Ye||jsx(DownChevron,null))},clearIndicatorCSS=baseCSS,ClearIndicator=function Xe(Ke){var Ye=Ke.children,Je=Ke.innerProps;return jsx("div",_extends({},getStyleProps(Ke,"clearIndicator",{indicator:!0,"clear-indicator":!0}),Je),Ye||jsx(CrossIcon,null))},indicatorSeparatorCSS=function Xe(Ke,Ye){var Je=Ke.isDisabled,tt=Ke.theme,st=tt.spacing.baseUnit,rt=tt.colors;return _objectSpread2({label:"indicatorSeparator",alignSelf:"stretch",width:1},Ye?{}:{backgroundColor:Je?rt.neutral10:rt.neutral20,marginBottom:st*2,marginTop:st*2})},IndicatorSeparator=function Xe(Ke){var Ye=Ke.innerProps;return jsx("span",_extends({},Ye,getStyleProps(Ke,"indicatorSeparator",{"indicator-separator":!0})))},loadingDotAnimations=keyframes(_templateObject||(_templateObject=_taggedTemplateLiteral([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),loadingIndicatorCSS=function Xe(Ke,Ye){var Je=Ke.isFocused,tt=Ke.size,st=Ke.theme,rt=st.colors,it=st.spacing.baseUnit;return _objectSpread2({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:tt,lineHeight:1,marginRight:tt,textAlign:"center",verticalAlign:"middle"},Ye?{}:{color:Je?rt.neutral60:rt.neutral20,padding:it*2})},LoadingDot=function Xe(Ke){var Ye=Ke.delay,Je=Ke.offset;return jsx("span",{css:css({animation:"".concat(loadingDotAnimations," 1s ease-in-out ").concat(Ye,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:Je?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},LoadingIndicator=function Xe(Ke){var Ye=Ke.innerProps,Je=Ke.isRtl;return jsx("div",_extends({},getStyleProps(Ke,"loadingIndicator",{indicator:!0,"loading-indicator":!0}),Ye),jsx(LoadingDot,{delay:0,offset:Je}),jsx(LoadingDot,{delay:160,offset:!0}),jsx(LoadingDot,{delay:320,offset:!Je}))};LoadingIndicator.defaultProps={size:4};var css$1=function Xe(Ke,Ye){var Je=Ke.isDisabled,tt=Ke.isFocused,st=Ke.theme,rt=st.colors,it=st.borderRadius,ot=st.spacing;return _objectSpread2({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:ot.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},Ye?{}:{backgroundColor:Je?rt.neutral5:rt.neutral0,borderColor:Je?rt.neutral10:tt?rt.primary:rt.neutral20,borderRadius:it,borderStyle:"solid",borderWidth:1,boxShadow:tt?"0 0 0 1px ".concat(rt.primary):void 0,"&:hover":{borderColor:tt?rt.primary:rt.neutral30}})},Control=function Xe(Ke){var Ye=Ke.children,Je=Ke.isDisabled,tt=Ke.isFocused,st=Ke.innerRef,rt=Ke.innerProps,it=Ke.menuIsOpen;return jsx("div",_extends({ref:st},getStyleProps(Ke,"control",{control:!0,"control--is-disabled":Je,"control--is-focused":tt,"control--menu-is-open":it}),rt),Ye)},_excluded$1=["data"],groupCSS=function Xe(Ke,Ye){var Je=Ke.theme.spacing;return Ye?{}:{paddingBottom:Je.baseUnit*2,paddingTop:Je.baseUnit*2}},Group=function Xe(Ke){var Ye=Ke.children,Je=Ke.cx,tt=Ke.getStyles,st=Ke.getClassNames,rt=Ke.Heading,it=Ke.headingProps,ot=Ke.innerProps,at=Ke.label,lt=Ke.theme,ut=Ke.selectProps;return jsx("div",_extends({},getStyleProps(Ke,"group",{group:!0}),ot),jsx(rt,_extends({},it,{selectProps:ut,theme:lt,getStyles:tt,getClassNames:st,cx:Je}),at),jsx("div",null,Ye))},groupHeadingCSS=function Xe(Ke,Ye){var Je=Ke.theme,tt=Je.colors,st=Je.spacing;return _objectSpread2({label:"group",cursor:"default",display:"block"},Ye?{}:{color:tt.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:st.baseUnit*3,paddingRight:st.baseUnit*3,textTransform:"uppercase"})},GroupHeading=function Xe(Ke){var Ye=cleanCommonProps(Ke);Ye.data;var Je=_objectWithoutProperties(Ye,_excluded$1);return jsx("div",_extends({},getStyleProps(Ke,"groupHeading",{"group-heading":!0}),Je))},_excluded$4=["innerRef","isDisabled","isHidden","inputClassName"],inputCSS=function Xe(Ke,Ye){var Je=Ke.isDisabled,tt=Ke.value,st=Ke.theme,rt=st.spacing,it=st.colors;return _objectSpread2(_objectSpread2({visibility:Je?"hidden":"visible",transform:tt?"translateZ(0)":""},containerStyle),Ye?{}:{margin:rt.baseUnit/2,paddingBottom:rt.baseUnit/2,paddingTop:rt.baseUnit/2,color:it.neutral80})},spacingStyle={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},containerStyle={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":_objectSpread2({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},spacingStyle)},inputStyle=function Xe(Ke){return _objectSpread2({label:"input",color:"inherit",background:0,opacity:Ke?0:1,width:"100%"},spacingStyle)},Input=function Xe(Ke){var Ye=Ke.cx,Je=Ke.value,tt=cleanCommonProps(Ke),st=tt.innerRef,rt=tt.isDisabled,it=tt.isHidden,ot=tt.inputClassName,at=_objectWithoutProperties(tt,_excluded$4);return jsx("div",_extends({},getStyleProps(Ke,"input",{"input-container":!0}),{"data-value":Je||""}),jsx("input",_extends({className:Ye({input:!0},ot),ref:st,style:inputStyle(it),disabled:rt},at)))},multiValueCSS=function Xe(Ke,Ye){var Je=Ke.theme,tt=Je.spacing,st=Je.borderRadius,rt=Je.colors;return _objectSpread2({label:"multiValue",display:"flex",minWidth:0},Ye?{}:{backgroundColor:rt.neutral10,borderRadius:st/2,margin:tt.baseUnit/2})},multiValueLabelCSS=function Xe(Ke,Ye){var Je=Ke.theme,tt=Je.borderRadius,st=Je.colors,rt=Ke.cropWithEllipsis;return _objectSpread2({overflow:"hidden",textOverflow:rt||rt===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},Ye?{}:{borderRadius:tt/2,color:st.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemoveCSS=function Xe(Ke,Ye){var Je=Ke.theme,tt=Je.spacing,st=Je.borderRadius,rt=Je.colors,it=Ke.isFocused;return _objectSpread2({alignItems:"center",display:"flex"},Ye?{}:{borderRadius:st/2,backgroundColor:it?rt.dangerLight:void 0,paddingLeft:tt.baseUnit,paddingRight:tt.baseUnit,":hover":{backgroundColor:rt.dangerLight,color:rt.danger}})},MultiValueGeneric=function Xe(Ke){var Ye=Ke.children,Je=Ke.innerProps;return jsx("div",Je,Ye)},MultiValueContainer=MultiValueGeneric,MultiValueLabel=MultiValueGeneric;function MultiValueRemove(Xe){var Ke=Xe.children,Ye=Xe.innerProps;return jsx("div",_extends({role:"button"},Ye),Ke||jsx(CrossIcon,{size:14}))}var MultiValue=function Xe(Ke){var Ye=Ke.children,Je=Ke.components,tt=Ke.data,st=Ke.innerProps,rt=Ke.isDisabled,it=Ke.removeProps,ot=Ke.selectProps,at=Je.Container,lt=Je.Label,ut=Je.Remove;return jsx(at,{data:tt,innerProps:_objectSpread2(_objectSpread2({},getStyleProps(Ke,"multiValue",{"multi-value":!0,"multi-value--is-disabled":rt})),st),selectProps:ot},jsx(lt,{data:tt,innerProps:_objectSpread2({},getStyleProps(Ke,"multiValueLabel",{"multi-value__label":!0})),selectProps:ot},Ye),jsx(ut,{data:tt,innerProps:_objectSpread2(_objectSpread2({},getStyleProps(Ke,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(Ye||"option")},it),selectProps:ot}))},optionCSS=function Xe(Ke,Ye){var Je=Ke.isDisabled,tt=Ke.isFocused,st=Ke.isSelected,rt=Ke.theme,it=rt.spacing,ot=rt.colors;return _objectSpread2({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},Ye?{}:{backgroundColor:st?ot.primary:tt?ot.primary25:"transparent",color:Je?ot.neutral20:st?ot.neutral0:"inherit",padding:"".concat(it.baseUnit*2,"px ").concat(it.baseUnit*3,"px"),":active":{backgroundColor:Je?void 0:st?ot.primary:ot.primary50}})},Option=function Xe(Ke){var Ye=Ke.children,Je=Ke.isDisabled,tt=Ke.isFocused,st=Ke.isSelected,rt=Ke.innerRef,it=Ke.innerProps;return jsx("div",_extends({},getStyleProps(Ke,"option",{option:!0,"option--is-disabled":Je,"option--is-focused":tt,"option--is-selected":st}),{ref:rt,"aria-disabled":Je},it),Ye)},placeholderCSS=function Xe(Ke,Ye){var Je=Ke.theme,tt=Je.spacing,st=Je.colors;return _objectSpread2({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},Ye?{}:{color:st.neutral50,marginLeft:tt.baseUnit/2,marginRight:tt.baseUnit/2})},Placeholder=function Xe(Ke){var Ye=Ke.children,Je=Ke.innerProps;return jsx("div",_extends({},getStyleProps(Ke,"placeholder",{placeholder:!0}),Je),Ye)},css2=function Xe(Ke,Ye){var Je=Ke.isDisabled,tt=Ke.theme,st=tt.spacing,rt=tt.colors;return _objectSpread2({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Ye?{}:{color:Je?rt.neutral40:rt.neutral80,marginLeft:st.baseUnit/2,marginRight:st.baseUnit/2})},SingleValue=function Xe(Ke){var Ye=Ke.children,Je=Ke.isDisabled,tt=Ke.innerProps;return jsx("div",_extends({},getStyleProps(Ke,"singleValue",{"single-value":!0,"single-value--is-disabled":Je}),tt),Ye)},components={ClearIndicator,Control,DropdownIndicator,DownChevron,CrossIcon,Group,GroupHeading,IndicatorsContainer,IndicatorSeparator,Input,LoadingIndicator,Menu:Menu$1,MenuList,MenuPortal,LoadingMessage,NoOptionsMessage,MultiValue,MultiValueContainer,MultiValueLabel,MultiValueRemove,Option,Placeholder,SelectContainer,SingleValue,ValueContainer},defaultComponents=function Xe(Ke){return _objectSpread2(_objectSpread2({},components),Ke.components)},safeIsNaN=Number.isNaN||function Xe(Ke){return typeof Ke=="number"&&Ke!==Ke};function isEqual(Xe,Ke){return!!(Xe===Ke||safeIsNaN(Xe)&&safeIsNaN(Ke))}function areInputsEqual(Xe,Ke){if(Xe.length!==Ke.length)return!1;for(var Ye=0;Ye<Xe.length;Ye++)if(!isEqual(Xe[Ye],Ke[Ye]))return!1;return!0}function memoizeOne(Xe,Ke){Ke===void 0&&(Ke=areInputsEqual);var Ye=null;function Je(){for(var tt=[],st=0;st<arguments.length;st++)tt[st]=arguments[st];if(Ye&&Ye.lastThis===this&&Ke(tt,Ye.lastArgs))return Ye.lastResult;var rt=Xe.apply(this,tt);return Ye={lastResult:rt,lastArgs:tt,lastThis:this},rt}return Je.clear=function(){Ye=null},Je}var _ref={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},A11yText=function Xe(Ke){return jsx("span",_extends({css:_ref},Ke))},defaultAriaLiveMessages={guidance:function Xe(Ke){var Ye=Ke.isSearchable,Je=Ke.isMulti,tt=Ke.isDisabled,st=Ke.tabSelectsValue,rt=Ke.context;switch(rt){case"menu":return"Use Up and Down to choose options".concat(tt?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(st?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(Ke["aria-label"]||"Select"," is focused ").concat(Ye?",type to refine list":"",", press Down to open the menu, ").concat(Je?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function Xe(Ke){var Ye=Ke.action,Je=Ke.label,tt=Je===void 0?"":Je,st=Ke.labels,rt=Ke.isDisabled;switch(Ye){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(tt,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(st.length>1?"s":""," ").concat(st.join(","),", selected.");case"select-option":return rt?"option ".concat(tt," is disabled. Select another option."):"option ".concat(tt,", selected.");default:return""}},onFocus:function Xe(Ke){var Ye=Ke.context,Je=Ke.focused,tt=Ke.options,st=Ke.label,rt=st===void 0?"":st,it=Ke.selectValue,ot=Ke.isDisabled,at=Ke.isSelected,lt=function(ft,xt){return ft&&ft.length?"".concat(ft.indexOf(xt)+1," of ").concat(ft.length):""};if(Ye==="value"&&it)return"value ".concat(rt," focused, ").concat(lt(it,Je),".");if(Ye==="menu"){var ut=ot?" disabled":"",ht="".concat(at?"selected":"focused").concat(ut);return"option ".concat(rt," ").concat(ht,", ").concat(lt(tt,Je),".")}return""},onFilter:function Xe(Ke){var Ye=Ke.inputValue,Je=Ke.resultsMessage;return"".concat(Je).concat(Ye?" for search term "+Ye:"",".")}},LiveRegion=function Xe(Ke){var Ye=Ke.ariaSelection,Je=Ke.focusedOption,tt=Ke.focusedValue,st=Ke.focusableOptions,rt=Ke.isFocused,it=Ke.selectValue,ot=Ke.selectProps,at=Ke.id,lt=ot.ariaLiveMessages,ut=ot.getOptionLabel,ht=ot.inputValue,pt=ot.isMulti,ft=ot.isOptionDisabled,xt=ot.isSearchable,vt=ot.menuIsOpen,At=ot.options,Et=ot.screenReaderStatus,wt=ot.tabSelectsValue,_t=ot["aria-label"],Ct=ot["aria-live"],Tt=reactExports.useMemo(function(){return _objectSpread2(_objectSpread2({},defaultAriaLiveMessages),lt||{})},[lt]),St=reactExports.useMemo(function(){var Dt="";if(Ye&&Tt.onChange){var Vt=Ye.option,Gt=Ye.options,Qt=Ye.removedValue,jt=Ye.removedValues,Ht=Ye.value,Yt=function(dn){return Array.isArray(dn)?null:dn},Jt=Qt||Vt||Yt(Ht),Zt=Jt?ut(Jt):"",nn=Gt||jt||void 0,cn=nn?nn.map(ut):[],an=_objectSpread2({isDisabled:Jt&&ft(Jt,it),label:Zt,labels:cn},Ye);Dt=Tt.onChange(an)}return Dt},[Ye,Tt,ft,it,ut]),Rt=reactExports.useMemo(function(){var Dt="",Vt=Je||tt,Gt=!!(Je&&it&&it.includes(Je));if(Vt&&Tt.onFocus){var Qt={focused:Vt,label:ut(Vt),isDisabled:ft(Vt,it),isSelected:Gt,options:st,context:Vt===Je?"menu":"value",selectValue:it};Dt=Tt.onFocus(Qt)}return Dt},[Je,tt,ut,ft,Tt,st,it]),Nt=reactExports.useMemo(function(){var Dt="";if(vt&&At.length&&Tt.onFilter){var Vt=Et({count:st.length});Dt=Tt.onFilter({inputValue:ht,resultsMessage:Vt})}return Dt},[st,ht,vt,Tt,At,Et]),Pt=reactExports.useMemo(function(){var Dt="";if(Tt.guidance){var Vt=tt?"value":vt?"menu":"input";Dt=Tt.guidance({"aria-label":_t,context:Vt,isDisabled:Je&&ft(Je,it),isMulti:pt,isSearchable:xt,tabSelectsValue:wt})}return Dt},[_t,Je,tt,pt,ft,xt,vt,Tt,it,wt]),Bt="".concat(Rt," ").concat(Nt," ").concat(Pt),Lt=jsx(reactExports.Fragment,null,jsx("span",{id:"aria-selection"},St),jsx("span",{id:"aria-context"},Bt)),zt=(Ye==null?void 0:Ye.action)==="initial-input-focus";return jsx(reactExports.Fragment,null,jsx(A11yText,{id:at},zt&&Lt),jsx(A11yText,{"aria-live":Ct,"aria-atomic":"false","aria-relevant":"additions text"},rt&&!zt&&Lt))},diacritics=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],anyDiacritic=new RegExp("["+diacritics.map(function(Xe){return Xe.letters}).join("")+"]","g"),diacriticToBase={};for(var i=0;i<diacritics.length;i++)for(var diacritic=diacritics[i],j=0;j<diacritic.letters.length;j++)diacriticToBase[diacritic.letters[j]]=diacritic.base;var stripDiacritics=function Xe(Ke){return Ke.replace(anyDiacritic,function(Ye){return diacriticToBase[Ye]})},memoizedStripDiacriticsForInput=memoizeOne(stripDiacritics),trimString=function Xe(Ke){return Ke.replace(/^\s+|\s+$/g,"")},defaultStringify=function Xe(Ke){return"".concat(Ke.label," ").concat(Ke.value)},createFilter=function Xe(Ke){return function(Ye,Je){if(Ye.data.__isNew__)return!0;var tt=_objectSpread2({ignoreCase:!0,ignoreAccents:!0,stringify:defaultStringify,trim:!0,matchFrom:"any"},Ke),st=tt.ignoreCase,rt=tt.ignoreAccents,it=tt.stringify,ot=tt.trim,at=tt.matchFrom,lt=ot?trimString(Je):Je,ut=ot?trimString(it(Ye)):it(Ye);return st&&(lt=lt.toLowerCase(),ut=ut.toLowerCase()),rt&&(lt=memoizedStripDiacriticsForInput(lt),ut=stripDiacritics(ut)),at==="start"?ut.substr(0,lt.length)===lt:ut.indexOf(lt)>-1}},_excluded=["innerRef"];function DummyInput(Xe){var Ke=Xe.innerRef,Ye=_objectWithoutProperties(Xe,_excluded),Je=removeProps(Ye,"onExited","in","enter","exit","appear");return jsx("input",_extends({ref:Ke},Je,{css:css({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var cancelScroll=function Xe(Ke){Ke.preventDefault(),Ke.stopPropagation()};function useScrollCapture(Xe){var Ke=Xe.isEnabled,Ye=Xe.onBottomArrive,Je=Xe.onBottomLeave,tt=Xe.onTopArrive,st=Xe.onTopLeave,rt=reactExports.useRef(!1),it=reactExports.useRef(!1),ot=reactExports.useRef(0),at=reactExports.useRef(null),lt=reactExports.useCallback(function(vt,At){if(at.current!==null){var Et=at.current,wt=Et.scrollTop,_t=Et.scrollHeight,Ct=Et.clientHeight,Tt=at.current,St=At>0,Rt=_t-Ct-wt,Nt=!1;Rt>At&&rt.current&&(Je&&Je(vt),rt.current=!1),St&&it.current&&(st&&st(vt),it.current=!1),St&&At>Rt?(Ye&&!rt.current&&Ye(vt),Tt.scrollTop=_t,Nt=!0,rt.current=!0):!St&&-At>wt&&(tt&&!it.current&&tt(vt),Tt.scrollTop=0,Nt=!0,it.current=!0),Nt&&cancelScroll(vt)}},[Ye,Je,tt,st]),ut=reactExports.useCallback(function(vt){lt(vt,vt.deltaY)},[lt]),ht=reactExports.useCallback(function(vt){ot.current=vt.changedTouches[0].clientY},[]),pt=reactExports.useCallback(function(vt){var At=ot.current-vt.changedTouches[0].clientY;lt(vt,At)},[lt]),ft=reactExports.useCallback(function(vt){if(vt){var At=supportsPassiveEvents?{passive:!1}:!1;vt.addEventListener("wheel",ut,At),vt.addEventListener("touchstart",ht,At),vt.addEventListener("touchmove",pt,At)}},[pt,ht,ut]),xt=reactExports.useCallback(function(vt){vt&&(vt.removeEventListener("wheel",ut,!1),vt.removeEventListener("touchstart",ht,!1),vt.removeEventListener("touchmove",pt,!1))},[pt,ht,ut]);return reactExports.useEffect(function(){if(Ke){var vt=at.current;return ft(vt),function(){xt(vt)}}},[Ke,ft,xt]),function(vt){at.current=vt}}var STYLE_KEYS=["boxSizing","height","overflow","paddingRight","position"],LOCK_STYLES={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function preventTouchMove(Xe){Xe.preventDefault()}function allowTouchMove(Xe){Xe.stopPropagation()}function preventInertiaScroll(){var Xe=this.scrollTop,Ke=this.scrollHeight,Ye=Xe+this.offsetHeight;Xe===0?this.scrollTop=1:Ye===Ke&&(this.scrollTop=Xe-1)}function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints}var canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement),activeScrollLocks=0,listenerOptions={capture:!1,passive:!1};function useScrollLock(Xe){var Ke=Xe.isEnabled,Ye=Xe.accountForScrollbars,Je=Ye===void 0?!0:Ye,tt=reactExports.useRef({}),st=reactExports.useRef(null),rt=reactExports.useCallback(function(ot){if(canUseDOM){var at=document.body,lt=at&&at.style;if(Je&&STYLE_KEYS.forEach(function(ft){var xt=lt&&lt[ft];tt.current[ft]=xt}),Je&&activeScrollLocks<1){var ut=parseInt(tt.current.paddingRight,10)||0,ht=document.body?document.body.clientWidth:0,pt=window.innerWidth-ht+ut||0;Object.keys(LOCK_STYLES).forEach(function(ft){var xt=LOCK_STYLES[ft];lt&&(lt[ft]=xt)}),lt&&(lt.paddingRight="".concat(pt,"px"))}at&&isTouchDevice()&&(at.addEventListener("touchmove",preventTouchMove,listenerOptions),ot&&(ot.addEventListener("touchstart",preventInertiaScroll,listenerOptions),ot.addEventListener("touchmove",allowTouchMove,listenerOptions))),activeScrollLocks+=1}},[Je]),it=reactExports.useCallback(function(ot){if(canUseDOM){var at=document.body,lt=at&&at.style;activeScrollLocks=Math.max(activeScrollLocks-1,0),Je&&activeScrollLocks<1&&STYLE_KEYS.forEach(function(ut){var ht=tt.current[ut];lt&&(lt[ut]=ht)}),at&&isTouchDevice()&&(at.removeEventListener("touchmove",preventTouchMove,listenerOptions),ot&&(ot.removeEventListener("touchstart",preventInertiaScroll,listenerOptions),ot.removeEventListener("touchmove",allowTouchMove,listenerOptions)))}},[Je]);return reactExports.useEffect(function(){if(Ke){var ot=st.current;return rt(ot),function(){it(ot)}}},[Ke,rt,it]),function(ot){st.current=ot}}var blurSelectInput=function Xe(){return document.activeElement&&document.activeElement.blur()},_ref2$1={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function ScrollManager(Xe){var Ke=Xe.children,Ye=Xe.lockEnabled,Je=Xe.captureEnabled,tt=Je===void 0?!0:Je,st=Xe.onBottomArrive,rt=Xe.onBottomLeave,it=Xe.onTopArrive,ot=Xe.onTopLeave,at=useScrollCapture({isEnabled:tt,onBottomArrive:st,onBottomLeave:rt,onTopArrive:it,onTopLeave:ot}),lt=useScrollLock({isEnabled:Ye}),ut=function(pt){at(pt),lt(pt)};return jsx(reactExports.Fragment,null,Ye&&jsx("div",{onClick:blurSelectInput,css:_ref2$1}),Ke(ut))}var _ref2={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},RequiredInput=function Xe(Ke){var Ye=Ke.name,Je=Ke.onFocus;return jsx("input",{required:!0,name:Ye,tabIndex:-1,onFocus:Je,css:_ref2,value:"",onChange:function(){}})},formatGroupLabel=function Xe(Ke){return Ke.label},getOptionLabel$1=function Xe(Ke){return Ke.label},getOptionValue$1=function Xe(Ke){return Ke.value},isOptionDisabled=function Xe(Ke){return!!Ke.isDisabled},defaultStyles={clearIndicator:clearIndicatorCSS,container:containerCSS,control:css$1,dropdownIndicator:dropdownIndicatorCSS,group:groupCSS,groupHeading:groupHeadingCSS,indicatorsContainer:indicatorsContainerCSS,indicatorSeparator:indicatorSeparatorCSS,input:inputCSS,loadingIndicator:loadingIndicatorCSS,loadingMessage:loadingMessageCSS,menu:menuCSS,menuList:menuListCSS,menuPortal:menuPortalCSS,multiValue:multiValueCSS,multiValueLabel:multiValueLabelCSS,multiValueRemove:multiValueRemoveCSS,noOptionsMessage:noOptionsMessageCSS,option:optionCSS,placeholder:placeholderCSS,singleValue:css2,valueContainer:valueContainerCSS},colors={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},borderRadius=4,baseUnit=4,controlHeight=38,menuGutter=baseUnit*2,spacing={baseUnit,controlHeight,menuGutter},defaultTheme={borderRadius,colors,spacing},defaultProps={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:isTouchCapable(),captureMenuScroll:!isTouchCapable(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:createFilter(),formatGroupLabel,getOptionLabel:getOptionLabel$1,getOptionValue:getOptionValue$1,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled,loadingMessage:function Xe(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!isMobileDevice(),noOptionsMessage:function Xe(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function Xe(Ke){var Ye=Ke.count;return"".concat(Ye," result").concat(Ye!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function toCategorizedOption(Xe,Ke,Ye,Je){var tt=_isOptionDisabled(Xe,Ke,Ye),st=_isOptionSelected(Xe,Ke,Ye),rt=getOptionLabel2(Xe,Ke),it=getOptionValue2(Xe,Ke);return{type:"option",data:Ke,isDisabled:tt,isSelected:st,label:rt,value:it,index:Je}}function buildCategorizedOptions(Xe,Ke){return Xe.options.map(function(Ye,Je){if("options"in Ye){var tt=Ye.options.map(function(rt,it){return toCategorizedOption(Xe,rt,Ke,it)}).filter(function(rt){return isFocusable(Xe,rt)});return tt.length>0?{type:"group",data:Ye,options:tt,index:Je}:void 0}var st=toCategorizedOption(Xe,Ye,Ke,Je);return isFocusable(Xe,st)?st:void 0}).filter(notNullish)}function buildFocusableOptionsFromCategorizedOptions(Xe){return Xe.reduce(function(Ke,Ye){return Ye.type==="group"?Ke.push.apply(Ke,_toConsumableArray(Ye.options.map(function(Je){return Je.data}))):Ke.push(Ye.data),Ke},[])}function buildFocusableOptions(Xe,Ke){return buildFocusableOptionsFromCategorizedOptions(buildCategorizedOptions(Xe,Ke))}function isFocusable(Xe,Ke){var Ye=Xe.inputValue,Je=Ye===void 0?"":Ye,tt=Ke.data,st=Ke.isSelected,rt=Ke.label,it=Ke.value;return(!shouldHideSelectedOptions(Xe)||!st)&&_filterOption(Xe,{label:rt,value:it,data:tt},Je)}function getNextFocusedValue(Xe,Ke){var Ye=Xe.focusedValue,Je=Xe.selectValue,tt=Je.indexOf(Ye);if(tt>-1){var st=Ke.indexOf(Ye);if(st>-1)return Ye;if(tt<Ke.length)return Ke[tt]}return null}function getNextFocusedOption(Xe,Ke){var Ye=Xe.focusedOption;return Ye&&Ke.indexOf(Ye)>-1?Ye:Ke[0]}var getOptionLabel2=function Xe(Ke,Ye){return Ke.getOptionLabel(Ye)},getOptionValue2=function Xe(Ke,Ye){return Ke.getOptionValue(Ye)};function _isOptionDisabled(Xe,Ke,Ye){return typeof Xe.isOptionDisabled=="function"?Xe.isOptionDisabled(Ke,Ye):!1}function _isOptionSelected(Xe,Ke,Ye){if(Ye.indexOf(Ke)>-1)return!0;if(typeof Xe.isOptionSelected=="function")return Xe.isOptionSelected(Ke,Ye);var Je=getOptionValue2(Xe,Ke);return Ye.some(function(tt){return getOptionValue2(Xe,tt)===Je})}function _filterOption(Xe,Ke,Ye){return Xe.filterOption?Xe.filterOption(Ke,Ye):!0}var shouldHideSelectedOptions=function Xe(Ke){var Ye=Ke.hideSelectedOptions,Je=Ke.isMulti;return Ye===void 0?Je:Ye},instanceId=1,Select$1=(function(Xe){_inherits(Ye,Xe);var Ke=_createSuper(Ye);function Ye(Je){var tt;if(_classCallCheck(this,Ye),tt=Ke.call(this,Je),tt.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},tt.blockOptionHover=!1,tt.isComposing=!1,tt.commonProps=void 0,tt.initialTouchX=0,tt.initialTouchY=0,tt.instancePrefix="",tt.openAfterFocus=!1,tt.scrollToFocusedOptionOnUpdate=!1,tt.userIsDragging=void 0,tt.controlRef=null,tt.getControlRef=function(it){tt.controlRef=it},tt.focusedOptionRef=null,tt.getFocusedOptionRef=function(it){tt.focusedOptionRef=it},tt.menuListRef=null,tt.getMenuListRef=function(it){tt.menuListRef=it},tt.inputRef=null,tt.getInputRef=function(it){tt.inputRef=it},tt.focus=tt.focusInput,tt.blur=tt.blurInput,tt.onChange=function(it,ot){var at=tt.props,lt=at.onChange,ut=at.name;ot.name=ut,tt.ariaOnChange(it,ot),lt(it,ot)},tt.setValue=function(it,ot,at){var lt=tt.props,ut=lt.closeMenuOnSelect,ht=lt.isMulti,pt=lt.inputValue;tt.onInputChange("",{action:"set-value",prevInputValue:pt}),ut&&(tt.setState({inputIsHiddenAfterUpdate:!ht}),tt.onMenuClose()),tt.setState({clearFocusValueOnUpdate:!0}),tt.onChange(it,{action:ot,option:at})},tt.selectOption=function(it){var ot=tt.props,at=ot.blurInputOnSelect,lt=ot.isMulti,ut=ot.name,ht=tt.state.selectValue,pt=lt&&tt.isOptionSelected(it,ht),ft=tt.isOptionDisabled(it,ht);if(pt){var xt=tt.getOptionValue(it);tt.setValue(ht.filter(function(vt){return tt.getOptionValue(vt)!==xt}),"deselect-option",it)}else if(!ft)lt?tt.setValue([].concat(_toConsumableArray(ht),[it]),"select-option",it):tt.setValue(it,"select-option");else{tt.ariaOnChange(it,{action:"select-option",option:it,name:ut});return}at&&tt.blurInput()},tt.removeValue=function(it){var ot=tt.props.isMulti,at=tt.state.selectValue,lt=tt.getOptionValue(it),ut=at.filter(function(pt){return tt.getOptionValue(pt)!==lt}),ht=valueTernary(ot,ut,ut[0]||null);tt.onChange(ht,{action:"remove-value",removedValue:it}),tt.focusInput()},tt.clearValue=function(){var it=tt.state.selectValue;tt.onChange(valueTernary(tt.props.isMulti,[],null),{action:"clear",removedValues:it})},tt.popValue=function(){var it=tt.props.isMulti,ot=tt.state.selectValue,at=ot[ot.length-1],lt=ot.slice(0,ot.length-1),ut=valueTernary(it,lt,lt[0]||null);tt.onChange(ut,{action:"pop-value",removedValue:at})},tt.getValue=function(){return tt.state.selectValue},tt.cx=function(){for(var it=arguments.length,ot=new Array(it),at=0;at<it;at++)ot[at]=arguments[at];return classNames.apply(void 0,[tt.props.classNamePrefix].concat(ot))},tt.getOptionLabel=function(it){return getOptionLabel2(tt.props,it)},tt.getOptionValue=function(it){return getOptionValue2(tt.props,it)},tt.getStyles=function(it,ot){var at=tt.props.unstyled,lt=defaultStyles[it](ot,at);lt.boxSizing="border-box";var ut=tt.props.styles[it];return ut?ut(lt,ot):lt},tt.getClassNames=function(it,ot){var at,lt;return(at=(lt=tt.props.classNames)[it])===null||at===void 0?void 0:at.call(lt,ot)},tt.getElementId=function(it){return"".concat(tt.instancePrefix,"-").concat(it)},tt.getComponents=function(){return defaultComponents(tt.props)},tt.buildCategorizedOptions=function(){return buildCategorizedOptions(tt.props,tt.state.selectValue)},tt.getCategorizedOptions=function(){return tt.props.menuIsOpen?tt.buildCategorizedOptions():[]},tt.buildFocusableOptions=function(){return buildFocusableOptionsFromCategorizedOptions(tt.buildCategorizedOptions())},tt.getFocusableOptions=function(){return tt.props.menuIsOpen?tt.buildFocusableOptions():[]},tt.ariaOnChange=function(it,ot){tt.setState({ariaSelection:_objectSpread2({value:it},ot)})},tt.onMenuMouseDown=function(it){it.button===0&&(it.stopPropagation(),it.preventDefault(),tt.focusInput())},tt.onMenuMouseMove=function(it){tt.blockOptionHover=!1},tt.onControlMouseDown=function(it){if(!it.defaultPrevented){var ot=tt.props.openMenuOnClick;tt.state.isFocused?tt.props.menuIsOpen?it.target.tagName!=="INPUT"&&it.target.tagName!=="TEXTAREA"&&tt.onMenuClose():ot&&tt.openMenu("first"):(ot&&(tt.openAfterFocus=!0),tt.focusInput()),it.target.tagName!=="INPUT"&&it.target.tagName!=="TEXTAREA"&&it.preventDefault()}},tt.onDropdownIndicatorMouseDown=function(it){if(!(it&&it.type==="mousedown"&&it.button!==0)&&!tt.props.isDisabled){var ot=tt.props,at=ot.isMulti,lt=ot.menuIsOpen;tt.focusInput(),lt?(tt.setState({inputIsHiddenAfterUpdate:!at}),tt.onMenuClose()):tt.openMenu("first"),it.preventDefault()}},tt.onClearIndicatorMouseDown=function(it){it&&it.type==="mousedown"&&it.button!==0||(tt.clearValue(),it.preventDefault(),tt.openAfterFocus=!1,it.type==="touchend"?tt.focusInput():setTimeout(function(){return tt.focusInput()}))},tt.onScroll=function(it){typeof tt.props.closeMenuOnScroll=="boolean"?it.target instanceof HTMLElement&&isDocumentElement(it.target)&&tt.props.onMenuClose():typeof tt.props.closeMenuOnScroll=="function"&&tt.props.closeMenuOnScroll(it)&&tt.props.onMenuClose()},tt.onCompositionStart=function(){tt.isComposing=!0},tt.onCompositionEnd=function(){tt.isComposing=!1},tt.onTouchStart=function(it){var ot=it.touches,at=ot&&ot.item(0);at&&(tt.initialTouchX=at.clientX,tt.initialTouchY=at.clientY,tt.userIsDragging=!1)},tt.onTouchMove=function(it){var ot=it.touches,at=ot&&ot.item(0);if(at){var lt=Math.abs(at.clientX-tt.initialTouchX),ut=Math.abs(at.clientY-tt.initialTouchY),ht=5;tt.userIsDragging=lt>ht||ut>ht}},tt.onTouchEnd=function(it){tt.userIsDragging||(tt.controlRef&&!tt.controlRef.contains(it.target)&&tt.menuListRef&&!tt.menuListRef.contains(it.target)&&tt.blurInput(),tt.initialTouchX=0,tt.initialTouchY=0)},tt.onControlTouchEnd=function(it){tt.userIsDragging||tt.onControlMouseDown(it)},tt.onClearIndicatorTouchEnd=function(it){tt.userIsDragging||tt.onClearIndicatorMouseDown(it)},tt.onDropdownIndicatorTouchEnd=function(it){tt.userIsDragging||tt.onDropdownIndicatorMouseDown(it)},tt.handleInputChange=function(it){var ot=tt.props.inputValue,at=it.currentTarget.value;tt.setState({inputIsHiddenAfterUpdate:!1}),tt.onInputChange(at,{action:"input-change",prevInputValue:ot}),tt.props.menuIsOpen||tt.onMenuOpen()},tt.onInputFocus=function(it){tt.props.onFocus&&tt.props.onFocus(it),tt.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(tt.openAfterFocus||tt.props.openMenuOnFocus)&&tt.openMenu("first"),tt.openAfterFocus=!1},tt.onInputBlur=function(it){var ot=tt.props.inputValue;if(tt.menuListRef&&tt.menuListRef.contains(document.activeElement)){tt.inputRef.focus();return}tt.props.onBlur&&tt.props.onBlur(it),tt.onInputChange("",{action:"input-blur",prevInputValue:ot}),tt.onMenuClose(),tt.setState({focusedValue:null,isFocused:!1})},tt.onOptionHover=function(it){tt.blockOptionHover||tt.state.focusedOption===it||tt.setState({focusedOption:it})},tt.shouldHideSelectedOptions=function(){return shouldHideSelectedOptions(tt.props)},tt.onValueInputFocus=function(it){it.preventDefault(),it.stopPropagation(),tt.focus()},tt.onKeyDown=function(it){var ot=tt.props,at=ot.isMulti,lt=ot.backspaceRemovesValue,ut=ot.escapeClearsValue,ht=ot.inputValue,pt=ot.isClearable,ft=ot.isDisabled,xt=ot.menuIsOpen,vt=ot.onKeyDown,At=ot.tabSelectsValue,Et=ot.openMenuOnFocus,wt=tt.state,_t=wt.focusedOption,Ct=wt.focusedValue,Tt=wt.selectValue;if(!ft&&!(typeof vt=="function"&&(vt(it),it.defaultPrevented))){switch(tt.blockOptionHover=!0,it.key){case"ArrowLeft":if(!at||ht)return;tt.focusValue("previous");break;case"ArrowRight":if(!at||ht)return;tt.focusValue("next");break;case"Delete":case"Backspace":if(ht)return;if(Ct)tt.removeValue(Ct);else{if(!lt)return;at?tt.popValue():pt&&tt.clearValue()}break;case"Tab":if(tt.isComposing||it.shiftKey||!xt||!At||!_t||Et&&tt.isOptionSelected(_t,Tt))return;tt.selectOption(_t);break;case"Enter":if(it.keyCode===229)break;if(xt){if(!_t||tt.isComposing)return;tt.selectOption(_t);break}return;case"Escape":xt?(tt.setState({inputIsHiddenAfterUpdate:!1}),tt.onInputChange("",{action:"menu-close",prevInputValue:ht}),tt.onMenuClose()):pt&&ut&&tt.clearValue();break;case" ":if(ht)return;if(!xt){tt.openMenu("first");break}if(!_t)return;tt.selectOption(_t);break;case"ArrowUp":xt?tt.focusOption("up"):tt.openMenu("last");break;case"ArrowDown":xt?tt.focusOption("down"):tt.openMenu("first");break;case"PageUp":if(!xt)return;tt.focusOption("pageup");break;case"PageDown":if(!xt)return;tt.focusOption("pagedown");break;case"Home":if(!xt)return;tt.focusOption("first");break;case"End":if(!xt)return;tt.focusOption("last");break;default:return}it.preventDefault()}},tt.instancePrefix="react-select-"+(tt.props.instanceId||++instanceId),tt.state.selectValue=cleanValue(Je.value),Je.menuIsOpen&&tt.state.selectValue.length){var st=tt.buildFocusableOptions(),rt=st.indexOf(tt.state.selectValue[0]);tt.state.focusedOption=st[rt]}return tt}return _createClass(Ye,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&scrollIntoView(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(tt){var st=this.props,rt=st.isDisabled,it=st.menuIsOpen,ot=this.state.isFocused;(ot&&!rt&&tt.isDisabled||ot&&it&&!tt.menuIsOpen)&&this.focusInput(),ot&&rt&&!tt.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!ot&&!rt&&tt.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(scrollIntoView(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(tt,st){this.props.onInputChange(tt,st)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(tt){var st=this,rt=this.state,it=rt.selectValue,ot=rt.isFocused,at=this.buildFocusableOptions(),lt=tt==="first"?0:at.length-1;if(!this.props.isMulti){var ut=at.indexOf(it[0]);ut>-1&&(lt=ut)}this.scrollToFocusedOptionOnUpdate=!(ot&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:at[lt]},function(){return st.onMenuOpen()})}},{key:"focusValue",value:function(tt){var st=this.state,rt=st.selectValue,it=st.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var ot=rt.indexOf(it);it||(ot=-1);var at=rt.length-1,lt=-1;if(rt.length){switch(tt){case"previous":ot===0?lt=0:ot===-1?lt=at:lt=ot-1;break;case"next":ot>-1&&ot<at&&(lt=ot+1);break}this.setState({inputIsHidden:lt!==-1,focusedValue:rt[lt]})}}}},{key:"focusOption",value:function(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",st=this.props.pageSize,rt=this.state.focusedOption,it=this.getFocusableOptions();if(it.length){var ot=0,at=it.indexOf(rt);rt||(at=-1),tt==="up"?ot=at>0?at-1:it.length-1:tt==="down"?ot=(at+1)%it.length:tt==="pageup"?(ot=at-st,ot<0&&(ot=0)):tt==="pagedown"?(ot=at+st,ot>it.length-1&&(ot=it.length-1)):tt==="last"&&(ot=it.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:it[ot],focusedValue:null})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(defaultTheme):_objectSpread2(_objectSpread2({},defaultTheme),this.props.theme):defaultTheme})},{key:"getCommonProps",value:function(){var tt=this.clearValue,st=this.cx,rt=this.getStyles,it=this.getClassNames,ot=this.getValue,at=this.selectOption,lt=this.setValue,ut=this.props,ht=ut.isMulti,pt=ut.isRtl,ft=ut.options,xt=this.hasValue();return{clearValue:tt,cx:st,getStyles:rt,getClassNames:it,getValue:ot,hasValue:xt,isMulti:ht,isRtl:pt,options:ft,selectOption:at,selectProps:ut,setValue:lt,theme:this.getTheme()}}},{key:"hasValue",value:function(){var tt=this.state.selectValue;return tt.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var tt=this.props,st=tt.isClearable,rt=tt.isMulti;return st===void 0?rt:st}},{key:"isOptionDisabled",value:function(tt,st){return _isOptionDisabled(this.props,tt,st)}},{key:"isOptionSelected",value:function(tt,st){return _isOptionSelected(this.props,tt,st)}},{key:"filterOption",value:function(tt,st){return _filterOption(this.props,tt,st)}},{key:"formatOptionLabel",value:function(tt,st){if(typeof this.props.formatOptionLabel=="function"){var rt=this.props.inputValue,it=this.state.selectValue;return this.props.formatOptionLabel(tt,{context:st,inputValue:rt,selectValue:it})}else return this.getOptionLabel(tt)}},{key:"formatGroupLabel",value:function(tt){return this.props.formatGroupLabel(tt)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var tt=this.props,st=tt.isDisabled,rt=tt.isSearchable,it=tt.inputId,ot=tt.inputValue,at=tt.tabIndex,lt=tt.form,ut=tt.menuIsOpen,ht=tt.required,pt=this.getComponents(),ft=pt.Input,xt=this.state,vt=xt.inputIsHidden,At=xt.ariaSelection,Et=this.commonProps,wt=it||this.getElementId("input"),_t=_objectSpread2(_objectSpread2(_objectSpread2({"aria-autocomplete":"list","aria-expanded":ut,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":ht,role:"combobox"},ut&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!rt&&{"aria-readonly":!0}),this.hasValue()?(At==null?void 0:At.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return rt?reactExports.createElement(ft,_extends({},Et,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:wt,innerRef:this.getInputRef,isDisabled:st,isHidden:vt,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:at,form:lt,type:"text",value:ot},_t)):reactExports.createElement(DummyInput,_extends({id:wt,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:noop$2,onFocus:this.onInputFocus,disabled:st,tabIndex:at,inputMode:"none",form:lt,value:""},_t))})},{key:"renderPlaceholderOrValue",value:function(){var tt=this,st=this.getComponents(),rt=st.MultiValue,it=st.MultiValueContainer,ot=st.MultiValueLabel,at=st.MultiValueRemove,lt=st.SingleValue,ut=st.Placeholder,ht=this.commonProps,pt=this.props,ft=pt.controlShouldRenderValue,xt=pt.isDisabled,vt=pt.isMulti,At=pt.inputValue,Et=pt.placeholder,wt=this.state,_t=wt.selectValue,Ct=wt.focusedValue,Tt=wt.isFocused;if(!this.hasValue()||!ft)return At?null:reactExports.createElement(ut,_extends({},ht,{key:"placeholder",isDisabled:xt,isFocused:Tt,innerProps:{id:this.getElementId("placeholder")}}),Et);if(vt)return _t.map(function(Rt,Nt){var Pt=Rt===Ct,Bt="".concat(tt.getOptionLabel(Rt),"-").concat(tt.getOptionValue(Rt));return reactExports.createElement(rt,_extends({},ht,{components:{Container:it,Label:ot,Remove:at},isFocused:Pt,isDisabled:xt,key:Bt,index:Nt,removeProps:{onClick:function(){return tt.removeValue(Rt)},onTouchEnd:function(){return tt.removeValue(Rt)},onMouseDown:function(zt){zt.preventDefault()}},data:Rt}),tt.formatOptionLabel(Rt,"value"))});if(At)return null;var St=_t[0];return reactExports.createElement(lt,_extends({},ht,{data:St,isDisabled:xt}),this.formatOptionLabel(St,"value"))}},{key:"renderClearIndicator",value:function(){var tt=this.getComponents(),st=tt.ClearIndicator,rt=this.commonProps,it=this.props,ot=it.isDisabled,at=it.isLoading,lt=this.state.isFocused;if(!this.isClearable()||!st||ot||!this.hasValue()||at)return null;var ut={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return reactExports.createElement(st,_extends({},rt,{innerProps:ut,isFocused:lt}))}},{key:"renderLoadingIndicator",value:function(){var tt=this.getComponents(),st=tt.LoadingIndicator,rt=this.commonProps,it=this.props,ot=it.isDisabled,at=it.isLoading,lt=this.state.isFocused;if(!st||!at)return null;var ut={"aria-hidden":"true"};return reactExports.createElement(st,_extends({},rt,{innerProps:ut,isDisabled:ot,isFocused:lt}))}},{key:"renderIndicatorSeparator",value:function(){var tt=this.getComponents(),st=tt.DropdownIndicator,rt=tt.IndicatorSeparator;if(!st||!rt)return null;var it=this.commonProps,ot=this.props.isDisabled,at=this.state.isFocused;return reactExports.createElement(rt,_extends({},it,{isDisabled:ot,isFocused:at}))}},{key:"renderDropdownIndicator",value:function(){var tt=this.getComponents(),st=tt.DropdownIndicator;if(!st)return null;var rt=this.commonProps,it=this.props.isDisabled,ot=this.state.isFocused,at={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return reactExports.createElement(st,_extends({},rt,{innerProps:at,isDisabled:it,isFocused:ot}))}},{key:"renderMenu",value:function(){var tt=this,st=this.getComponents(),rt=st.Group,it=st.GroupHeading,ot=st.Menu,at=st.MenuList,lt=st.MenuPortal,ut=st.LoadingMessage,ht=st.NoOptionsMessage,pt=st.Option,ft=this.commonProps,xt=this.state.focusedOption,vt=this.props,At=vt.captureMenuScroll,Et=vt.inputValue,wt=vt.isLoading,_t=vt.loadingMessage,Ct=vt.minMenuHeight,Tt=vt.maxMenuHeight,St=vt.menuIsOpen,Rt=vt.menuPlacement,Nt=vt.menuPosition,Pt=vt.menuPortalTarget,Bt=vt.menuShouldBlockScroll,Lt=vt.menuShouldScrollIntoView,zt=vt.noOptionsMessage,Dt=vt.onMenuScrollToTop,Vt=vt.onMenuScrollToBottom;if(!St)return null;var Gt=function(nn,cn){var an=nn.type,mn=nn.data,dn=nn.isDisabled,fn=nn.isSelected,Sn=nn.label,Tn=nn.value,Nn=xt===mn,gn=dn?void 0:function(){return tt.onOptionHover(mn)},_n=dn?void 0:function(){return tt.selectOption(mn)},kn="".concat(tt.getElementId("option"),"-").concat(cn),Wt={id:kn,onClick:_n,onMouseMove:gn,onMouseOver:gn,tabIndex:-1};return reactExports.createElement(pt,_extends({},ft,{innerProps:Wt,data:mn,isDisabled:dn,isSelected:fn,key:kn,label:Sn,type:an,value:Tn,isFocused:Nn,innerRef:Nn?tt.getFocusedOptionRef:void 0}),tt.formatOptionLabel(nn.data,"menu"))},Qt;if(this.hasOptions())Qt=this.getCategorizedOptions().map(function(Zt){if(Zt.type==="group"){var nn=Zt.data,cn=Zt.options,an=Zt.index,mn="".concat(tt.getElementId("group"),"-").concat(an),dn="".concat(mn,"-heading");return reactExports.createElement(rt,_extends({},ft,{key:mn,data:nn,options:cn,Heading:it,headingProps:{id:dn,data:Zt.data},label:tt.formatGroupLabel(Zt.data)}),Zt.options.map(function(fn){return Gt(fn,"".concat(an,"-").concat(fn.index))}))}else if(Zt.type==="option")return Gt(Zt,"".concat(Zt.index))});else if(wt){var jt=_t({inputValue:Et});if(jt===null)return null;Qt=reactExports.createElement(ut,ft,jt)}else{var Ht=zt({inputValue:Et});if(Ht===null)return null;Qt=reactExports.createElement(ht,ft,Ht)}var Yt={minMenuHeight:Ct,maxMenuHeight:Tt,menuPlacement:Rt,menuPosition:Nt,menuShouldScrollIntoView:Lt},Jt=reactExports.createElement(MenuPlacer,_extends({},ft,Yt),function(Zt){var nn=Zt.ref,cn=Zt.placerProps,an=cn.placement,mn=cn.maxHeight;return reactExports.createElement(ot,_extends({},ft,Yt,{innerRef:nn,innerProps:{onMouseDown:tt.onMenuMouseDown,onMouseMove:tt.onMenuMouseMove,id:tt.getElementId("listbox")},isLoading:wt,placement:an}),reactExports.createElement(ScrollManager,{captureEnabled:At,onTopArrive:Dt,onBottomArrive:Vt,lockEnabled:Bt},function(dn){return reactExports.createElement(at,_extends({},ft,{innerRef:function(Sn){tt.getMenuListRef(Sn),dn(Sn)},isLoading:wt,maxHeight:mn,focusedOption:xt}),Qt)}))});return Pt||Nt==="fixed"?reactExports.createElement(lt,_extends({},ft,{appendTo:Pt,controlElement:this.controlRef,menuPlacement:Rt,menuPosition:Nt}),Jt):Jt}},{key:"renderFormField",value:function(){var tt=this,st=this.props,rt=st.delimiter,it=st.isDisabled,ot=st.isMulti,at=st.name,lt=st.required,ut=this.state.selectValue;if(!(!at||it)){if(lt&&!this.hasValue())return reactExports.createElement(RequiredInput,{name:at,onFocus:this.onValueInputFocus});if(ot)if(rt){var ht=ut.map(function(xt){return tt.getOptionValue(xt)}).join(rt);return reactExports.createElement("input",{name:at,type:"hidden",value:ht})}else{var pt=ut.length>0?ut.map(function(xt,vt){return reactExports.createElement("input",{key:"i-".concat(vt),name:at,type:"hidden",value:tt.getOptionValue(xt)})}):reactExports.createElement("input",{name:at,type:"hidden",value:""});return reactExports.createElement("div",null,pt)}else{var ft=ut[0]?this.getOptionValue(ut[0]):"";return reactExports.createElement("input",{name:at,type:"hidden",value:ft})}}}},{key:"renderLiveRegion",value:function(){var tt=this.commonProps,st=this.state,rt=st.ariaSelection,it=st.focusedOption,ot=st.focusedValue,at=st.isFocused,lt=st.selectValue,ut=this.getFocusableOptions();return reactExports.createElement(LiveRegion,_extends({},tt,{id:this.getElementId("live-region"),ariaSelection:rt,focusedOption:it,focusedValue:ot,isFocused:at,selectValue:lt,focusableOptions:ut}))}},{key:"render",value:function(){var tt=this.getComponents(),st=tt.Control,rt=tt.IndicatorsContainer,it=tt.SelectContainer,ot=tt.ValueContainer,at=this.props,lt=at.className,ut=at.id,ht=at.isDisabled,pt=at.menuIsOpen,ft=this.state.isFocused,xt=this.commonProps=this.getCommonProps();return reactExports.createElement(it,_extends({},xt,{className:lt,innerProps:{id:ut,onKeyDown:this.onKeyDown},isDisabled:ht,isFocused:ft}),this.renderLiveRegion(),reactExports.createElement(st,_extends({},xt,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:ht,isFocused:ft,menuIsOpen:pt}),reactExports.createElement(ot,_extends({},xt,{isDisabled:ht}),this.renderPlaceholderOrValue(),this.renderInput()),reactExports.createElement(rt,_extends({},xt,{isDisabled:ht}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(tt,st){var rt=st.prevProps,it=st.clearFocusValueOnUpdate,ot=st.inputIsHiddenAfterUpdate,at=st.ariaSelection,lt=st.isFocused,ut=st.prevWasFocused,ht=tt.options,pt=tt.value,ft=tt.menuIsOpen,xt=tt.inputValue,vt=tt.isMulti,At=cleanValue(pt),Et={};if(rt&&(pt!==rt.value||ht!==rt.options||ft!==rt.menuIsOpen||xt!==rt.inputValue)){var wt=ft?buildFocusableOptions(tt,At):[],_t=it?getNextFocusedValue(st,At):null,Ct=getNextFocusedOption(st,wt);Et={selectValue:At,focusedOption:Ct,focusedValue:_t,clearFocusValueOnUpdate:!1}}var Tt=ot!=null&&tt!==rt?{inputIsHidden:ot,inputIsHiddenAfterUpdate:void 0}:{},St=at,Rt=lt&&ut;return lt&&!Rt&&(St={value:valueTernary(vt,At,At[0]||null),options:At,action:"initial-input-focus"},Rt=!ut),(at==null?void 0:at.action)==="initial-input-focus"&&(St=null),_objectSpread2(_objectSpread2(_objectSpread2({},Et),Tt),{},{prevProps:tt,ariaSelection:St,prevWasFocused:Rt})}}]),Ye})(reactExports.Component);Select$1.defaultProps=defaultProps;var StateManagedSelect=reactExports.forwardRef(function(Xe,Ke){var Ye=useStateManager(Xe);return reactExports.createElement(Select$1,_extends({ref:Ke},Ye))});const theme=Xe=>({...Xe,colors:{...Xe.colors,text:"var(--background-color)",primary:"var(--text-color)"}}),common={color:"var(--text-color)"},style={option:(Xe,{isSelected:Ke})=>({...Xe,color:Ke?"var(--background-color)":"var(--text-color)",backgroundColor:Ke?"var(--text-color)":"var(--background-color)","&:hover":{color:"var(--background-color)",backgroundColor:"var(--gray-60)"}}),dropdownIndicator:Xe=>({...Xe,...common,opacity:.6,"&:hover":{color:"var(--text-color)",opacity:.8}}),placeholder:Xe=>({...Xe,color:"var(--gray-60)"}),indicatorSeparator:Xe=>({...Xe,backgroundColor:"var(--gray-60)"}),valueContainer:Xe=>({...Xe,padding:"0px"}),input:Xe=>({...Xe,...common}),control:(Xe,{isFocused:Ke})=>({...Xe,...common,backgroundColor:"var(--background-color)",border:"none"}),menu:Xe=>({...Xe,backgroundColor:"var(--background-color)",zIndex:9999}),menuList:Xe=>({...Xe,"::-webkit-scrollbar":{width:"4px",height:"0px"},"::-webkit-scrollbar-track":{background:"var(--gray-20)"},"::-webkit-scrollbar-thumb":{background:"var(--gray-60)"},"::-webkit-scrollbar-thumb:hover":{background:"var(--gray-80)"}}),menuPortal:Xe=>({...Xe,zIndex:9999}),singleValue:Xe=>({...Xe,...common,overflow:"visible"})},Select=reactExports.forwardRef(({label:Xe,alt:Ke,value:Ye,search:Je=!1,defaultValue:tt,options:st,onChange:rt=()=>null,disabled:it,children:ot,placeholder:at,className:lt,style:ut,...ht},pt)=>{const[ft,xt]=useControlled(Ye,tt),vt=reactExports.useCallback(At=>{xt(At),rt(At)},[ft]);return jsxRuntimeExports.jsxs("label",{style:ut,className:`${styles$x.label} ${lt||""}`,children:[jsxRuntimeExports.jsx("p",{children:Xe}),jsxRuntimeExports.jsx(StateManagedSelect,{inputRef:pt,"aria-label":Ke||Xe,styles:style,theme,className:styles$x.container,classNamePrefix:"react_select",onChange:vt,options:st,disabled:it,placeholder:at,isSearchable:Je,menuPortalTarget:document.querySelector("body"),value:ft===void 0?"":ft,...ht}),ot]})}),ThemeSelection=Xe=>{const Ke=useLocalSettings(Je=>Je.theme),Ye=useLocalSettings(Je=>Je.setTheme);return jsxRuntimeExports.jsx(Select,{alt:"theme selection",value:{label:THEMES[Ke],value:Ke},onChange:Je=>Ye(Je.value,Xe.apply),options:THEME_OPTIONS,...Xe})};var Space_Separator=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,unicode={Space_Separator,ID_Start,ID_Continue},util={isSpaceSeparator(Xe){return typeof Xe=="string"&&unicode.Space_Separator.test(Xe)},isIdStartChar(Xe){return typeof Xe=="string"&&(Xe>="a"&&Xe<="z"||Xe>="A"&&Xe<="Z"||Xe==="$"||Xe==="_"||unicode.ID_Start.test(Xe))},isIdContinueChar(Xe){return typeof Xe=="string"&&(Xe>="a"&&Xe<="z"||Xe>="A"&&Xe<="Z"||Xe>="0"&&Xe<="9"||Xe==="$"||Xe==="_"||Xe==="‌"||Xe==="‍"||unicode.ID_Continue.test(Xe))},isDigit(Xe){return typeof Xe=="string"&&/[0-9]/.test(Xe)},isHexDigit(Xe){return typeof Xe=="string"&&/[0-9A-Fa-f]/.test(Xe)}};let source,parseState,stack,pos,line,column,token,key,root$5;var parse=function Xe(Ke,Ye){source=String(Ke),parseState="start",stack=[],pos=0,line=1,column=0,token=void 0,key=void 0,root$5=void 0;do token=lex(),parseStates[parseState]();while(token.type!=="eof");return typeof Ye=="function"?internalize({"":root$5},"",Ye):root$5};function internalize(Xe,Ke,Ye){const Je=Xe[Ke];if(Je!=null&&typeof Je=="object")if(Array.isArray(Je))for(let tt=0;tt<Je.length;tt++){const st=String(tt),rt=internalize(Je,st,Ye);rt===void 0?delete Je[st]:Object.defineProperty(Je,st,{value:rt,writable:!0,enumerable:!0,configurable:!0})}else for(const tt in Je){const st=internalize(Je,tt,Ye);st===void 0?delete Je[tt]:Object.defineProperty(Je,tt,{value:st,writable:!0,enumerable:!0,configurable:!0})}return Ye.call(Xe,Ke,Je)}let lexState,buffer,doubleQuote,sign,c;function lex(){for(lexState="default",buffer="",doubleQuote=!1,sign=1;;){c=peek();const Xe=lexStates[lexState]();if(Xe)return Xe}}function peek(){if(source[pos])return String.fromCodePoint(source.codePointAt(pos))}function read(){const Xe=peek();return Xe===`
`?(line++,column=0):Xe?column+=Xe.length:column++,Xe&&(pos+=Xe.length),Xe}const lexStates={default(){switch(c){case"	":case"\v":case"\f":case" ":case" ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":read();return;case"/":read(),lexState="comment";return;case void 0:return read(),newToken("eof")}if(util.isSpaceSeparator(c)){read();return}return lexStates[parseState]()},comment(){switch(c){case"*":read(),lexState="multiLineComment";return;case"/":read(),lexState="singleLineComment";return}throw invalidChar(read())},multiLineComment(){switch(c){case"*":read(),lexState="multiLineCommentAsterisk";return;case void 0:throw invalidChar(read())}read()},multiLineCommentAsterisk(){switch(c){case"*":read();return;case"/":read(),lexState="default";return;case void 0:throw invalidChar(read())}read(),lexState="multiLineComment"},singleLineComment(){switch(c){case`
`:case"\r":case"\u2028":case"\u2029":read(),lexState="default";return;case void 0:return read(),newToken("eof")}read()},value(){switch(c){case"{":case"[":return newToken("punctuator",read());case"n":return read(),literal("ull"),newToken("null",null);case"t":return read(),literal("rue"),newToken("boolean",!0);case"f":return read(),literal("alse"),newToken("boolean",!1);case"-":case"+":read()==="-"&&(sign=-1),lexState="sign";return;case".":buffer=read(),lexState="decimalPointLeading";return;case"0":buffer=read(),lexState="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":buffer=read(),lexState="decimalInteger";return;case"I":return read(),literal("nfinity"),newToken("numeric",1/0);case"N":return read(),literal("aN"),newToken("numeric",NaN);case'"':case"'":doubleQuote=read()==='"',buffer="",lexState="string";return}throw invalidChar(read())},identifierNameStartEscape(){if(c!=="u")throw invalidChar(read());read();const Xe=unicodeEscape();switch(Xe){case"$":case"_":break;default:if(!util.isIdStartChar(Xe))throw invalidIdentifier();break}buffer+=Xe,lexState="identifierName"},identifierName(){switch(c){case"$":case"_":case"‌":case"‍":buffer+=read();return;case"\\":read(),lexState="identifierNameEscape";return}if(util.isIdContinueChar(c)){buffer+=read();return}return newToken("identifier",buffer)},identifierNameEscape(){if(c!=="u")throw invalidChar(read());read();const Xe=unicodeEscape();switch(Xe){case"$":case"_":case"‌":case"‍":break;default:if(!util.isIdContinueChar(Xe))throw invalidIdentifier();break}buffer+=Xe,lexState="identifierName"},sign(){switch(c){case".":buffer=read(),lexState="decimalPointLeading";return;case"0":buffer=read(),lexState="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":buffer=read(),lexState="decimalInteger";return;case"I":return read(),literal("nfinity"),newToken("numeric",sign*(1/0));case"N":return read(),literal("aN"),newToken("numeric",NaN)}throw invalidChar(read())},zero(){switch(c){case".":buffer+=read(),lexState="decimalPoint";return;case"e":case"E":buffer+=read(),lexState="decimalExponent";return;case"x":case"X":buffer+=read(),lexState="hexadecimal";return}return newToken("numeric",sign*0)},decimalInteger(){switch(c){case".":buffer+=read(),lexState="decimalPoint";return;case"e":case"E":buffer+=read(),lexState="decimalExponent";return}if(util.isDigit(c)){buffer+=read();return}return newToken("numeric",sign*Number(buffer))},decimalPointLeading(){if(util.isDigit(c)){buffer+=read(),lexState="decimalFraction";return}throw invalidChar(read())},decimalPoint(){switch(c){case"e":case"E":buffer+=read(),lexState="decimalExponent";return}if(util.isDigit(c)){buffer+=read(),lexState="decimalFraction";return}return newToken("numeric",sign*Number(buffer))},decimalFraction(){switch(c){case"e":case"E":buffer+=read(),lexState="decimalExponent";return}if(util.isDigit(c)){buffer+=read();return}return newToken("numeric",sign*Number(buffer))},decimalExponent(){switch(c){case"+":case"-":buffer+=read(),lexState="decimalExponentSign";return}if(util.isDigit(c)){buffer+=read(),lexState="decimalExponentInteger";return}throw invalidChar(read())},decimalExponentSign(){if(util.isDigit(c)){buffer+=read(),lexState="decimalExponentInteger";return}throw invalidChar(read())},decimalExponentInteger(){if(util.isDigit(c)){buffer+=read();return}return newToken("numeric",sign*Number(buffer))},hexadecimal(){if(util.isHexDigit(c)){buffer+=read(),lexState="hexadecimalInteger";return}throw invalidChar(read())},hexadecimalInteger(){if(util.isHexDigit(c)){buffer+=read();return}return newToken("numeric",sign*Number(buffer))},string(){switch(c){case"\\":read(),buffer+=escape();return;case'"':if(doubleQuote)return read(),newToken("string",buffer);buffer+=read();return;case"'":if(!doubleQuote)return read(),newToken("string",buffer);buffer+=read();return;case`
`:case"\r":throw invalidChar(read());case"\u2028":case"\u2029":separatorChar(c);break;case void 0:throw invalidChar(read())}buffer+=read()},start(){switch(c){case"{":case"[":return newToken("punctuator",read())}lexState="value"},beforePropertyName(){switch(c){case"$":case"_":buffer=read(),lexState="identifierName";return;case"\\":read(),lexState="identifierNameStartEscape";return;case"}":return newToken("punctuator",read());case'"':case"'":doubleQuote=read()==='"',lexState="string";return}if(util.isIdStartChar(c)){buffer+=read(),lexState="identifierName";return}throw invalidChar(read())},afterPropertyName(){if(c===":")return newToken("punctuator",read());throw invalidChar(read())},beforePropertyValue(){lexState="value"},afterPropertyValue(){switch(c){case",":case"}":return newToken("punctuator",read())}throw invalidChar(read())},beforeArrayValue(){if(c==="]")return newToken("punctuator",read());lexState="value"},afterArrayValue(){switch(c){case",":case"]":return newToken("punctuator",read())}throw invalidChar(read())},end(){throw invalidChar(read())}};function newToken(Xe,Ke){return{type:Xe,value:Ke,line,column}}function literal(Xe){for(const Ke of Xe){if(peek()!==Ke)throw invalidChar(read());read()}}function escape(){switch(peek()){case"b":return read(),"\b";case"f":return read(),"\f";case"n":return read(),`
`;case"r":return read(),"\r";case"t":return read(),"	";case"v":return read(),"\v";case"0":if(read(),util.isDigit(peek()))throw invalidChar(read());return"\0";case"x":return read(),hexEscape();case"u":return read(),unicodeEscape();case`
`:case"\u2028":case"\u2029":return read(),"";case"\r":return read(),peek()===`
`&&read(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw invalidChar(read());case void 0:throw invalidChar(read())}return read()}function hexEscape(){let Xe="",Ke=peek();if(!util.isHexDigit(Ke)||(Xe+=read(),Ke=peek(),!util.isHexDigit(Ke)))throw invalidChar(read());return Xe+=read(),String.fromCodePoint(parseInt(Xe,16))}function unicodeEscape(){let Xe="",Ke=4;for(;Ke-- >0;){const Ye=peek();if(!util.isHexDigit(Ye))throw invalidChar(read());Xe+=read()}return String.fromCodePoint(parseInt(Xe,16))}const parseStates={start(){if(token.type==="eof")throw invalidEOF();push()},beforePropertyName(){switch(token.type){case"identifier":case"string":key=token.value,parseState="afterPropertyName";return;case"punctuator":pop();return;case"eof":throw invalidEOF()}},afterPropertyName(){if(token.type==="eof")throw invalidEOF();parseState="beforePropertyValue"},beforePropertyValue(){if(token.type==="eof")throw invalidEOF();push()},beforeArrayValue(){if(token.type==="eof")throw invalidEOF();if(token.type==="punctuator"&&token.value==="]"){pop();return}push()},afterPropertyValue(){if(token.type==="eof")throw invalidEOF();switch(token.value){case",":parseState="beforePropertyName";return;case"}":pop()}},afterArrayValue(){if(token.type==="eof")throw invalidEOF();switch(token.value){case",":parseState="beforeArrayValue";return;case"]":pop()}},end(){}};function push(){let Xe;switch(token.type){case"punctuator":switch(token.value){case"{":Xe={};break;case"[":Xe=[];break}break;case"null":case"boolean":case"numeric":case"string":Xe=token.value;break}if(root$5===void 0)root$5=Xe;else{const Ke=stack[stack.length-1];Array.isArray(Ke)?Ke.push(Xe):Object.defineProperty(Ke,key,{value:Xe,writable:!0,enumerable:!0,configurable:!0})}if(Xe!==null&&typeof Xe=="object")stack.push(Xe),Array.isArray(Xe)?parseState="beforeArrayValue":parseState="beforePropertyName";else{const Ke=stack[stack.length-1];Ke==null?parseState="end":Array.isArray(Ke)?parseState="afterArrayValue":parseState="afterPropertyValue"}}function pop(){stack.pop();const Xe=stack[stack.length-1];Xe==null?parseState="end":Array.isArray(Xe)?parseState="afterArrayValue":parseState="afterPropertyValue"}function invalidChar(Xe){return syntaxError(Xe===void 0?`JSON5: invalid end of input at ${line}:${column}`:`JSON5: invalid character '${formatChar(Xe)}' at ${line}:${column}`)}function invalidEOF(){return syntaxError(`JSON5: invalid end of input at ${line}:${column}`)}function invalidIdentifier(){return column-=5,syntaxError(`JSON5: invalid identifier character at ${line}:${column}`)}function separatorChar(Xe){console.warn(`JSON5: '${formatChar(Xe)}' in strings is not valid ECMAScript; consider escaping`)}function formatChar(Xe){const Ke={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(Ke[Xe])return Ke[Xe];if(Xe<" "){const Ye=Xe.charCodeAt(0).toString(16);return"\\x"+("00"+Ye).substring(Ye.length)}return Xe}function syntaxError(Xe){const Ke=new SyntaxError(Xe);return Ke.lineNumber=line,Ke.columnNumber=column,Ke}var stringify=function Xe(Ke,Ye,Je){const tt=[];let st="",rt,it,ot="",at;if(Ye!=null&&typeof Ye=="object"&&!Array.isArray(Ye)&&(Je=Ye.space,at=Ye.quote,Ye=Ye.replacer),typeof Ye=="function")it=Ye;else if(Array.isArray(Ye)){rt=[];for(const xt of Ye){let vt;typeof xt=="string"?vt=xt:(typeof xt=="number"||xt instanceof String||xt instanceof Number)&&(vt=String(xt)),vt!==void 0&&rt.indexOf(vt)<0&&rt.push(vt)}}return Je instanceof Number?Je=Number(Je):Je instanceof String&&(Je=String(Je)),typeof Je=="number"?Je>0&&(Je=Math.min(10,Math.floor(Je)),ot="          ".substr(0,Je)):typeof Je=="string"&&(ot=Je.substr(0,10)),lt("",{"":Ke});function lt(xt,vt){let At=vt[xt];switch(At!=null&&(typeof At.toJSON5=="function"?At=At.toJSON5(xt):typeof At.toJSON=="function"&&(At=At.toJSON(xt))),it&&(At=it.call(vt,xt,At)),At instanceof Number?At=Number(At):At instanceof String?At=String(At):At instanceof Boolean&&(At=At.valueOf()),At){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof At=="string")return ut(At);if(typeof At=="number")return String(At);if(typeof At=="object")return Array.isArray(At)?ft(At):ht(At)}function ut(xt){const vt={"'":.1,'"':.2},At={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let Et="";for(let _t=0;_t<xt.length;_t++){const Ct=xt[_t];switch(Ct){case"'":case'"':vt[Ct]++,Et+=Ct;continue;case"\0":if(util.isDigit(xt[_t+1])){Et+="\\x00";continue}}if(At[Ct]){Et+=At[Ct];continue}if(Ct<" "){let Tt=Ct.charCodeAt(0).toString(16);Et+="\\x"+("00"+Tt).substring(Tt.length);continue}Et+=Ct}const wt=at||Object.keys(vt).reduce((_t,Ct)=>vt[_t]<vt[Ct]?_t:Ct);return Et=Et.replace(new RegExp(wt,"g"),At[wt]),wt+Et+wt}function ht(xt){if(tt.indexOf(xt)>=0)throw TypeError("Converting circular structure to JSON5");tt.push(xt);let vt=st;st=st+ot;let At=rt||Object.keys(xt),Et=[];for(const _t of At){const Ct=lt(_t,xt);if(Ct!==void 0){let Tt=pt(_t)+":";ot!==""&&(Tt+=" "),Tt+=Ct,Et.push(Tt)}}let wt;if(Et.length===0)wt="{}";else{let _t;if(ot==="")_t=Et.join(","),wt="{"+_t+"}";else{let Ct=`,
`+st;_t=Et.join(Ct),wt=`{
`+st+_t+`,
`+vt+"}"}}return tt.pop(),st=vt,wt}function pt(xt){if(xt.length===0)return ut(xt);const vt=String.fromCodePoint(xt.codePointAt(0));if(!util.isIdStartChar(vt))return ut(xt);for(let At=vt.length;At<xt.length;At++)if(!util.isIdContinueChar(String.fromCodePoint(xt.codePointAt(At))))return ut(xt);return xt}function ft(xt){if(tt.indexOf(xt)>=0)throw TypeError("Converting circular structure to JSON5");tt.push(xt);let vt=st;st=st+ot;let At=[];for(let wt=0;wt<xt.length;wt++){const _t=lt(String(wt),xt);At.push(_t!==void 0?_t:"null")}let Et;if(At.length===0)Et="[]";else if(ot==="")Et="["+At.join(",")+"]";else{let wt=`,
`+st,_t=At.join(wt);Et=`[
`+st+_t+`,
`+vt+"]"}return tt.pop(),st=vt,Et}};const JSON5={parse,stringify};var lib=JSON5;const Settings=()=>{const[Xe,Ke]=reactExports.useState(!1);reactExports.useEffect(()=>{async function Et(){const _t=await(await fetch(`${BANNER_URL}/banner_config.json`)).text(),Ct=lib.parse(_t);Ke(Ct.enable===1)}try{Et()}catch(wt){console.error(wt)}},[]);const[Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht,pt,ft,xt,vt,At]=useLocalSettings(Et=>[Et.nsfwFriendly,Et.setNsfwFriendly,Et.photosensitiveFriendly,Et.setPhotosensitiveFriendly,Et.startFeed,Et.setStartFeed,Et.rpcNode,Et.setRpcNode,Et.customRpcNode,Et.setCustomRpcNode,Et.tilted,Et.setTilted,Et.imgproxy,Et.setImgproxy,Et.has_seen_banner,Et.setHasSeenBanner]);return jsxRuntimeExports.jsxs(Page,{children:[jsxRuntimeExports.jsxs("div",{className:styles$y.info,children:[jsxRuntimeExports.jsx("h1",{children:"Local Settings"}),jsxRuntimeExports.jsx("p",{children:"Those settings are non portable and only stored in your current browser cache."}),jsxRuntimeExports.jsx(Line,{className:styles$y.title_line})]}),jsxRuntimeExports.jsx("div",{className:styles$y.localSettings,children:jsxRuntimeExports.jsxs("div",{className:styles$y.fields,children:[jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("strong",{children:"Feed preferences"})}),jsxRuntimeExports.jsx(Checkbox$1,{alt:`click to ${Ye?"disable":"enable"} the blurring of NSFW tokens on feeds`,checked:Ye,onCheck:Je,label:"Allow NSFW on feeds"}),jsxRuntimeExports.jsx(Checkbox$1,{alt:`click to ${tt?"disable":"enable"} the blurring of photosensitive tokens on feeds`,checked:tt,onCheck:st,label:"Allow Photosensitive on feeds"}),jsxRuntimeExports.jsx(Select,{label:"Start Feed",value:{label:rt.replace(/[^\x00-\xFF]/g,""),value:rt},options:FEED_LIST.map(Et=>({label:Et.replace(/[^\x00-\xFF]/g,""),value:Et})),onChange:Et=>{it(Et.value)}}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsx(ThemeSelection,{label:"Theme"}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsx(Select,{label:"RPC Node",value:{label:ot,value:ot},options:rpc_nodes.map(Et=>({label:Et,value:Et})),onChange:Et=>{at(Et.value)}}),ot==="custom"&&jsxRuntimeExports.jsx(Input$2,{name:"custom-rpc",value:lt,onChange:ut,placeholder:"url to a RPC node",label:"Custom RPC node"}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsx(Checkbox$1,{alt:`click to ${ht?"disable":"enable"} fool around (a throwback of the 2023 april fool)`,title:`click to ${ht?"disable":"enable"} fool around (a throwback of the 2023 april fool)`,checked:ht,onCheck:pt,className:"no-fool",label:"Fool Around"}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsx(Checkbox$1,{alt:`click to ${ft?"disable":"enable"} imgproxy thumbnails. Not using imgproxy will load fullsize images from ipfs directly instead (performance penalty)`,title:`click to ${ft?"disable":"enable"} imgproxy thumbnails. Not using imgproxy will load fullsize images from ipfs directly instead (performance penalty)`,checked:ft,onCheck:xt,initial:!0,label:"Use thumbnails to increase performance"}),Xe&&jsxRuntimeExports.jsx(Checkbox$1,{alt:`click to ${At?"disable":"enable"} last event banner (this is automatically reset for you on new announcements)`,title:`click to ${At?"disable":"enable"} last event banner (this is automatically reset for you on new announcements)`,checked:vt,onCheck:At,label:"Hide banner for last announcement"})]})})]})};async function uploadFileToIPFSProxy$1(Xe,Ke="Preparing OBJKT"){const Ye=useModalStore.getState().step,Je=useModalStore.getState().show,tt=new FormData,st=mime.lookup(Xe.path);if(!st){Je("Filetype Error",`Could not determine the type from file ${Xe.path}`);return}const rt=Xe.size?` (${(Xe.size/1e6).toFixed(1)}mb)`:"";return Ye(Ke,`uploading ${Xe.path}${rt} as ${st}`),console.debug(`uploading ${Xe.path} as ${st}`),tt.append("asset",new File([Xe.blob],Xe.path,{type:st})),(await axios.post("https://ipfsproxy.teia.rocks/single",tt,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:ot=>{const at=Number(ot.loaded/ot.total*100).toFixed(1);Ye(Ke,`uploading ${Xe.path}${rt} as ${st}
## ${at}%`)}})).data.cid}async function uploadMultipleFilesToIPFSProxy(Xe){const Ke=new FormData,Ye=useModalStore.getState().step;return Ye("Preparing OBJKT","uploading multiple files"),Xe.forEach(tt=>{const st=mime.lookup(tt.path);console.debug(`uploading ${tt.path} as ${st}`),Ke.append("assets",new File([tt.blob],encodeURI(tt.path),{type:st||""}))}),(await axios.post("https://ipfsproxy.teia.rocks/multiple",Ke,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:tt=>{const st=Number(tt.loaded/tt.total*100).toFixed(1);Ye("Preparing OBJKT",`uploading multiple files
## ${st}%`)}})).data.cid}const isDoubleMint=async Xe=>{const Ke=distExports.gql`
    query uriQuery($address: String!, $ids: [String!] = "") {
      tokens(
        order_by: { minted_at: desc }
        where: {
          editions: { _gt: "0" }
          metadata_status: { _eq: "processed" }
          artifact_uri: { _in: $ids }
          artist_address: { _eq: $address }
        }
      ) {
        token_id
      }
    }
  `,{proxyAddress:Ye,address:Je}=useUserStore.getState(),{show:tt}=useModalStore.getState(),{errors:st,data:rt}=await fetchGraphQL(Ke,"uriQuery",{address:Ye||Je,ids:[Xe]});return console.debug(rt),st?(tt(`GraphQL Error: ${JSON.stringify(st)}`),!0):rt?!rt.tokens||rt.tokens.every(({editions:ot})=>ot===0)?!1:(tt(`Duplicate mint detected: [#${rt.tokens[0].token_id}](/objkt/${rt.tokens[0].token_id}) is already minted`),!0):!1},prepareFile=async({name:Xe,description:Ke,tags:Ye,address:Je,file:tt,cover:st,thumbnail:rt,rights:it,rightsUri:ot,language:at,accessibility:lt,contentRating:ut,formats:ht})=>{var Ct,Tt,St,Rt,Nt,Pt,Bt;const pt=useModalStore.getState().step,ft=useModalStore.getState().show,xt=!tt.mimeType.startsWith("image");if(!((Ct=tt.file)!=null&&Ct.name)){console.error("Incomplete item received",tt),ft("No name for file","");return}const vt=await uploadFileToIPFSProxy$1({blob:new Blob([tt.buffer]),path:tt.file.name,size:(Tt=tt.file)==null?void 0:Tt.size});pt("Preparing OBJKT",`Successfully uploaded file to IPFS: ${vt}`);const At=`ipfs://${vt}`;if(await isDoubleMint(At))throw Error("Double Mint",{cause:"You already minted the same token."});ht.length>0&&(ht[0].uri=At,console.debug("file format",ht[0]));let Et=At;if(xt&&st){const Lt=await uploadFileToIPFSProxy$1({blob:new Blob([st.buffer]),path:`cover_${st.file?st.file.name:(St=st.format)==null?void 0:St.fileName}`,size:(Rt=st.file)==null?void 0:Rt.size});if(pt("Preparing OBJKT",`Successfully uploaded cover to IPFS: ${Lt}`),console.debug(`Successfully uploaded cover to IPFS: ${Lt}`),Et=`ipfs://${Lt}`,st!=null&&st.format){const zt=JSON.parse(JSON.stringify(st.format));zt.uri=Et,zt.fileName=`cover_${zt.fileName}`,ht.push(zt),console.debug("cover format",zt)}}let wt=IPFS_DEFAULT_THUMBNAIL_URI;if(rt&&((Nt=rt.file)==null?void 0:Nt.type)==="image/gif"){if(console.debug("GIF format detected, we will use the artifact's cid as the thumbnail to avoid uploading twice"),wt=`${At}`,rt!=null&&rt.format){const Lt=JSON.parse(JSON.stringify(rt.format));Lt.uri=wt,Lt.fileName=`thumbnail_${Lt.fileName}`,ht.push(Lt),console.debug("thumbnail format",Lt)}}else if(rt){if(wt=`ipfs://${await uploadFileToIPFSProxy$1({blob:new Blob([rt.buffer]),path:`thumbnail_${rt.file?rt.file.name:(Pt=rt.format)==null?void 0:Pt.fileName}`,size:(Bt=rt.file)==null?void 0:Bt.size})}`,rt!=null&&rt.format){const zt=JSON.parse(JSON.stringify(rt.format));zt.uri=wt,zt.fileName=`thumbnail_${zt.fileName}`,ht.push(zt),console.debug("thumbnail format",zt)}}else console.debug("Using default thumbnail CID");const _t=await buildMetadataFile({name:Xe,description:Ke,tags:Ye,uri:At,address:Je,displayUri:Et,thumbnailUri:wt,rights:it,rightsUri:ot,language:at,accessibility:lt,contentRating:ut,formats:ht});return pt("Preparing OBJKT","Uploading metadata file"),console.debug("Uploading metadata file:",JSON.parse(_t)),await uploadFileToIPFSProxy$1({blob:new Blob([buffer$2.Buffer.from(_t)]),path:"metadata.json"})},prepareDirectory=async({name:Xe,description:Ke,tags:Ye,address:Je,files:tt,cover:st,thumbnail:rt,generateDisplayUri:it,rights:ot,rightsUri:at,language:lt,accessibility:ut,contentRating:ht,formats:pt})=>{var _t,Ct,Tt;const ft=useModalStore.getState().step,xt=await uploadFilesToDirectory(tt);ft("Preparing OBJKT",`Successfully uploaded directory to IPFS: ${xt.directory}`),console.debug("Successfully uploaded directory to IPFS:",xt.directory);const vt=`ipfs://${xt.directory}`;pt.length>0&&(pt[0].uri=vt,console.debug("file format",pt[0]));let At="";{const St=await uploadFileToIPFSProxy$1({blob:new Blob([st.buffer]),path:`cover_${((_t=st.format)==null?void 0:_t.fileName)||"format"}`});if(ft("Preparing OBJKT","Successfully uploaded cover to IPFS"),console.debug(`Successfully uploaded cover to IPFS: ${St}`),At=`ipfs://${St}`,st!=null&&st.format){const Rt=JSON.parse(JSON.stringify(st.format));Rt.uri=At,Rt.fileName=`cover_${Rt.fileName}`,pt.push(Rt),console.debug("cover format",Rt)}}let Et=IPFS_DEFAULT_THUMBNAIL_URI;if(rt&&(Et=`ipfs://${await uploadFileToIPFSProxy$1({blob:new Blob([rt.buffer]),path:((Ct=rt.format)==null?void 0:Ct.fileName)||rt.title||((Tt=rt.file)==null?void 0:Tt.name)||""})}`,rt!=null&&rt.format)){const Rt=JSON.parse(JSON.stringify(rt.format));Rt.uri=Et,Rt.fileName=`thumbnail_${Rt.fileName}`,pt.push(Rt),console.debug("thumbnail format",Rt)}const wt=await buildMetadataFile({name:Xe,description:Ke,tags:Ye,uri:vt,address:Je,displayUri:At,thumbnailUri:Et,rights:ot,rightsUri:at,language:lt,accessibility:ut,contentRating:ht,formats:pt});return console.debug("Uploading metadata file:",JSON.parse(wt)),await uploadFileToIPFSProxy$1({blob:new Blob([buffer$2.Buffer.from(wt)]),path:"metadata.json"})};function not_directory(Xe){return Xe.blob.type!==MIMETYPE.DIRECTORY}async function uploadFilesToDirectory(Xe){return console.debug("uploadFilesToDirectory",Xe),Xe=Xe.filter(not_directory),{directory:await uploadMultipleFilesToIPFSProxy(Xe)}}async function buildMetadataFile({name:Xe,description:Ke,tags:Ye,uri:Je,address:tt,displayUri:st="",thumbnailUri:rt=IPFS_DEFAULT_THUMBNAIL_URI,rights:it,rightsUri:ot,language:at,accessibility:lt,contentRating:ut,formats:ht}){const pt={name:Xe,description:Ke,tags:Ye?Ye.replace(/\s/g,"").split(","):[],symbol:"OBJKT",artifactUri:Je,displayUri:st,thumbnailUri:rt,creators:[tt],formats:ht,decimals:0,isBooleanAmount:!1,shouldPreferSymbol:!1,rights:it,date:new Date().toISOString(),mintingTool:"https://teia.art/mint"};if(lt&&(pt.accessibility=lt),ut&&(pt.contentRating=ut),it==="custom"&&ot){const ft=await uploadFileToIPFSProxy$1({blob:new Blob([buffer$2.Buffer.from(JSON.stringify(ot))]),path:"license.json"});pt.rightsUri=`ipfs://${ft}`}return at!=null&&(pt.language=at),JSON.stringify(pt)}const query_tz=distExports.gql`
  query addressQuery($address: String!) {
    teia_users(where: { user_address: { _eq: $address } }) {
      user_address
      name
      metadata {
        data
      }
    }
  }
`,query_name_exist=distExports.gql`
  query nameExists($name: String!) {
    teia_users(where: { name: { _eq: $name } }) {
      user_address
    }
  }
`;async function fetchTz(Xe){const{errors:Ke,data:Ye}=await fetchGraphQL(query_tz,"addressQuery",{address:Xe});return Ke&&console.error(Ke),get$5(Ye,"teia_users.0",{user_address:Xe})}const Subjkt=()=>{const[Xe,Ke]=reactExports.useState(!0),[Ye,Je]=reactExports.useState(""),[tt,st]=reactExports.useState(""),[rt,it]=reactExports.useState(""),[ot,at]=reactExports.useState(),[lt,ut]=reactExports.useState(""),ht="Editing Profile",[pt,ft,xt]=useUserStore(Ct=>[Ct.address,Ct.proxyAddress,Ct.registry]),vt=useModalStore(Ct=>Ct.show),At=ft||pt;reactExports.useEffect(()=>{(async()=>{var Tt,St;if(At){const Rt=await fetchTz(At);if(console.debug("Subjkt Infos:",Rt),Rt){const{metadata:Nt,name:Pt}=Rt;Pt&&Je(Pt),Nt&&!_$1.isEmpty(Nt==null?void 0:Nt.data)&&((Tt=Nt==null?void 0:Nt.data)!=null&&Tt.description&&st(Nt.data.description),(St=Nt==null?void 0:Nt.data)!=null&&St.identicon&&it(Nt.data.identicon))}}Ke(!1)})()},[]);const Et=async()=>{if(!Ye)return!1;const{errors:Ct,data:Tt}=await fetchGraphQL(query_name_exist,"nameExists",{name:Ye});if(Ct)return console.error(Ct),!1;if(Tt.teia_users.length===0)return!1;const St=Tt.teia_users[0];return St.user_address===pt||St.user_address===ft?!1:(console.error(`name exists and is registered to ${St.user_address}`),vt("Subjkt",`The provided name is already registered by ${St.user_address}`),!0)},wt=async()=>{if(await Et())return;let Ct=rt;const Tt=useModalStore.getState().show,St=useModalStore.getState().step;if(St(ht,"uploading SUBJKT"),ot){const[Pt]=ot;St(ht,"uploading identicon");const Bt=buffer$2.Buffer.from(await Pt.arrayBuffer());Ct=`ipfs://${await uploadFileToIPFSProxy$1({blob:new Blob([Bt]),path:Pt.name},ht)}`}const Rt=JSON.stringify({description:tt,identicon:Ct});St(ht,"uploading metadatas"),console.debug("Uploading metadatas file to IPFS",JSON.parse(Rt));const Nt=await uploadFileToIPFSProxy$1({blob:new Blob([buffer$2.Buffer.from(Rt)]),path:"profile_metadata.json"});if(Nt==null){Tt(`${ht} (Error)`,"Error uploading SUBJKT"),console.error("Error uploading metadatas file to IPFS");return}console.debug("Uploaded metadatas file to IPFS",Nt),St(ht,"Minting SUBJKT"),it(Ct),await xt(Ye,Nt)},_t=async Ct=>{if(Ct.target.files){const[Tt]=Ct.target.files;ut(URL.createObjectURL(Tt)),at(Ct.target.files)}};return!Xe&&jsxRuntimeExports.jsxs(Page,{children:[jsxRuntimeExports.jsx("h1",{children:"Subjkt Settings"}),jsxRuntimeExports.jsx(Line,{className:styles$y.title_line}),jsxRuntimeExports.jsxs("div",{className:styles$y.subjkt_editor,children:[jsxRuntimeExports.jsxs("div",{className:styles$y.fields,children:[jsxRuntimeExports.jsx(Identicon,{className:styles$y.identicon,address:pt,logo:lt||rt}),jsxRuntimeExports.jsx("input",{type:"file",onChange:_t,title:"avatar file"})]}),jsxRuntimeExports.jsxs("div",{className:styles$y.fields,children:[jsxRuntimeExports.jsx(Input$2,{name:"subjkt",value:Ye,onChange:Je,onBlur:Ct=>{/[^A-Za-z0-9-._]/.test(Ct.target.value)&&vt("Subjkt contains invalid characters. This field can only contain: letters (a-z A-Z), numbers (0-9), . (dot), - (dash), _ (underscore)")},placeholder:"can contain letters (a-z A-Z), numbers (0-9), . (dot), - (dash), _ (underscore)",label:"Username",pattern:"^[A-Za-z0-9-._]*$"}),jsxRuntimeExports.jsx(Input$2,{name:"description",value:tt,onChange:st,placeholder:"(Max length 500 characters)",label:"Description"})]})]}),jsxRuntimeExports.jsx(Button,{shadow_box:!0,onClick:wt,children:"Save Profile"}),jsxRuntimeExports.jsx("div",{style:{display:"inline"},children:jsxRuntimeExports.jsxs("p",{style:{paddingTop:"7.5px"},children:[jsxRuntimeExports.jsx("span",{children:"Link your Twitter, Discord, GitHub, and website with "}),jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx("a",{style:{fontWeight:"bold"},target:"_blank",href:"https://profiles.tzkt.io",rel:"noreferrer",children:"TzKT Profiles"})})]})})]})},container$c="_container_1nrpp_216",headline$1="_headline_1nrpp_221",loading_containter$1="_loading_containter_1nrpp_228",section$5="_section_1nrpp_235",section_title$2="_section_title_1nrpp_260",proposal="_proposal_1nrpp_264",proposal_id="_proposal_id_1nrpp_274",proposal_title="_proposal_title_1nrpp_281",proposal_information="_proposal_information_1nrpp_286",user_vote$1="_user_vote_1nrpp_297",proposal_buttons="_proposal_buttons_1nrpp_303",styles$w={container:container$c,headline:headline$1,loading_containter:loading_containter$1,section:section$5,section_title:section_title$2,proposal,proposal_id,proposal_title,proposal_information,user_vote:user_vote$1,proposal_buttons};function LoadingDaoMessage({message:Xe}){return jsxRuntimeExports.jsx("div",{className:styles$w.loading_containter,children:jsxRuntimeExports.jsx(Loading,{message:Xe??"Loading DAO information"})})}const TABS$4=[{title:"Parameters",to:""},{title:"Proposals",to:"proposals"},{title:"Submit",to:"submit",private:!0}];function DAO(){const[Xe]=useStorage(DAO_GOVERNANCE_CONTRACT),[Ke]=useDaoGovernanceParameters(Xe),[Ye]=useDaoProposals(Xe),[Je]=useDaoRepresentatives(Xe),tt=useUserStore(it=>it.address),st=Je==null?void 0:Je[tt],[rt]=useDaoTokenBalance(tt);return jsxRuntimeExports.jsx(Page,{title:"Teia DAO",children:jsxRuntimeExports.jsxs("div",{className:styles$w.container,children:[jsxRuntimeExports.jsx("h1",{className:styles$w.headline,children:"Teia DAO"}),!Ke||!Ye?jsxRuntimeExports.jsx(LoadingDaoMessage,{}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Tabs,{tabs:TABS$4,filter:it=>rt===0&&!st&&it.private?null:it}),jsxRuntimeExports.jsx(Outlet,{})]})]})})}async function downloadJsonFileFromIpfs(Xe){const Ke=await fetch(CIDToURL(Xe));return Ke.ok||console.error(`There was a problem downloading a file from ipfs with cid ${Xe}`),Ke.json()}async function uploadFileToIPFSProxy(Xe){var Je;const Ke=new FormData;Ke.append("asset",Xe);const Ye=await axios.post("https://ipfsproxy.teia.rocks/single",Ke,{headers:{"Content-Type":"multipart/form-data"}});return(Je=Ye==null?void 0:Ye.data)==null?void 0:Je.cid}const useDaoStore=create$2()(subscribeWithSelector(persist((Xe,Ke)=>({voteProposal:async(Ye,Je,tt,st)=>{const rt=useUserStore.getState().handleOp,it=useModalStore.getState().showError,ot=useModalStore.getState().step,at="Vote DAO proposal";ot(at,"Waiting for confirmation",!0);try{const lt=await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT),ut={proposal_id:Ye,vote:{[Je]:[["unit"]]},max_checkpoints:tt},ht=lt.methodsObject.token_vote(ut),pt=await rt(ht,at);return st==null||st(),pt}catch(lt){it(at,lt)}},voteProposalAsRepresentative:async(Ye,Je,tt)=>{const st=useUserStore.getState().handleOp,rt=useModalStore.getState().showError,it=useModalStore.getState().step,ot="Vote DAO proposal as representative";it(ot,"Waiting for confirmation",!0);try{const at=await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT),lt={proposal_id:Ye,vote:{[Je]:[["unit"]]}},ut=at.methodsObject.representatives_vote(lt),ht=await st(ut,ot);return tt==null||tt(),ht}catch(at){rt(ot,at)}},cancelProposal:async(Ye,Je,tt)=>{const st=useUserStore.getState().handleOp,rt=useModalStore.getState().showError,it=useModalStore.getState().step,ot="Cancel DAO proposal";it(ot,"Waiting for confirmation",!0);try{const lt=(await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT)).methods.cancel_proposal(Ye,Je),ut=await st(lt,ot);return tt==null||tt(),ut}catch(at){rt(ot,at)}},evaluateVotingResult:async(Ye,Je)=>{const tt=useUserStore.getState().handleOp,st=useModalStore.getState().showError,rt=useModalStore.getState().step,it="Evaluate DAO proposal voting result";rt(it,"Waiting for confirmation",!0);try{const at=(await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT)).methods.evaluate_voting_result(Ye),lt=await tt(at,it);return Je==null||Je(),lt}catch(ot){st(it,ot)}},executeProposal:async(Ye,Je)=>{const tt=useUserStore.getState().handleOp,st=useModalStore.getState().showError,rt=useModalStore.getState().step,it="Execute DAO proposal";rt(it,"Waiting for confirmation",!0);try{const at=(await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT)).methods.execute_proposal(Ye),lt=await tt(at,it);return Je==null||Je(),lt}catch(ot){st(it,ot)}},createProposal:async(Ye,Je,tt,st)=>{const rt=useUserStore.getState().address,it=useUserStore.getState().handleOp,ot=useModalStore.getState().show,at=useModalStore.getState().showError,lt=useModalStore.getState().step,ut="Submit DAO proposal";if(!Ye||Ye.length<10){ot(ut,"The proposal title must be at least 10 characters long");return}if(!Je){ot(ut,"The proposal description needs to be uploaded first to IPFS");return}lt(ut,"Waiting for confirmation",!0);try{const ht=await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT),pt=await Tezos.wallet.at(DAO_TOKEN_CONTRACT),ft={owner:rt,operator:DAO_GOVERNANCE_CONTRACT,token_id:0},xt={title:char2Bytes(Ye),description:char2Bytes(`ipfs://${Je}`),kind:tt};let vt=Tezos.wallet.batch();vt=vt.withContractCall(pt.methods.update_operators([{add_operator:ft}])),vt=vt.withContractCall(ht.methodsObject.create_proposal(xt)),vt=vt.withContractCall(pt.methods.update_operators([{remove_operator:ft}]));const At=await it(vt,ut);return st==null||st(),At}catch(ht){at(ut,ht)}},createTextProposal:async(Ye,Je,tt)=>{const st={text:[["unit"]]};return Ke().createProposal(Ye,Je,st,tt)},createTransferMutezProposal:async(Ye,Je,tt,st)=>{const rt=useModalStore.getState().show;for(const{destination:it}of tt){if(!(it&&validateAddress(it)===3)){rt("Submit DAO proposal",`The provided address is not a valid tezos address: ${it}`);return}const ot={transfer_mutez:tt};return Ke().createProposal(Ye,Je,ot,st)}},createTransferTokenProposal:async(Ye,Je,tt,st,rt,it)=>{const ot=useModalStore.getState().show;if(!(tt&&validateAddress(tt)===3)){ot("Submit DAO proposal",`The provided token contract address is not a valid tezos address: ${tt}`);return}for(const{destination:lt}of rt)if(!(lt&&validateAddress(lt)===3)){ot("Submit DAO proposal",`The provided address is not a valid tezos address: ${lt}`);return}const at={transfer_token:{fa2:tt,token_id:st,distribution:rt}};return Ke().createProposal(Ye,Je,at,it)},createLambdaFunctionProposal:async(Ye,Je,tt,st)=>{const rt=useModalStore.getState().show;let it;try{it=new Parser$2().parseMichelineExpression(tt)}catch{rt("Create DAO proposal","The provided lambda function Michelson code is not correct");return}const ot={lambda_function:it};return Ke().createProposal(Ye,Je,ot,st)},claimTokens:async()=>{const Ye=useUserStore.getState().address,Je=useUserStore.getState().handleOp,tt=useModalStore.getState().show,st=useModalStore.getState().showError,rt=useModalStore.getState().step,it="Claim DAO tokens";if(rt(it,"Claiming Teia DAO tokens",!0),!Ye){tt(it,"You need to sync your wallet first");return}const ot=await downloadJsonFileFromIpfs(DISTRIBUTION_MAPPING_IPFS_PATH);if(ot){if(!(Ye in ot)){tt(it,`Your wallet is not in the distribution list.
Sorry, you don't qualify to claim any tokens.`);return}}else{tt(it,"Could not download the distribution map from IPFS");return}const at=ot[Ye],lt=await downloadJsonFileFromIpfs(MERKLE_DATA_IPFS_PATHS[at]);if(!lt){tt(it,"Could not download the user Merkle proofs from IPFS");return}const ut=lt[Ye],ht=parseInt(ut.tokens)/DAO_TOKEN_DECIMALS,pt=await getClaimedDaoTokens(Ye),ft=ht-(pt||0);if(ft===0){tt(it,"Sorry, but you already claimed all your tokens");return}rt(it,`You are allowed to claim ${ft} DAO tokens`);try{const vt=(await Tezos.wallet.at(DAO_TOKEN_CLAIM_CONTRACT)).methods.claim(ut.proof,ut.leafDataPacked);return await Je(vt,it,{amount:0,storageLimit:400})}catch(xt){st(it,xt)}}}),{name:"dao",storage:createJSONStorage(()=>localStorage)}))),ipfs_link="_ipfs_link_yqy4p_1",styles$v={ipfs_link};function TeiaUserLink({address:Xe,alias:Ke,shorten:Ye,className:Je,children:tt}){return jsxRuntimeExports.jsx("a",{href:`/tz/${Xe}`,className:Je??"",children:tt??Ke??(Ye?walletPreview(Xe):Xe)})}function DefaultLink({href:Xe,className:Ke,children:Ye}){return jsxRuntimeExports.jsx("a",{href:Xe,target:"_blank",rel:"noreferrer",className:Ke??"",children:Ye??"link"})}function TzktLink({link:Xe,className:Ke,children:Ye}){return jsxRuntimeExports.jsx(DefaultLink,{href:`https://tzkt.io/${Xe}`,className:Ke,children:Ye??"TzKT link"})}function TezosAddressLink({address:Xe,alias:Ke,shorten:Ye,className:Je,children:tt}){return jsxRuntimeExports.jsx(TzktLink,{link:Xe,className:Je,children:tt??Ke??(Ye?walletPreview(Xe):Xe)})}function TokenLink({fa2:Xe,id:Ke,className:Ye,children:Je}){const tt=TOKENS.find(rt=>rt.fa2===Xe),st=tt?tt.multiasset?`${tt.name}#${Ke}`:tt.name:`token #${Ke}`;return tt!=null&&tt.website?jsxRuntimeExports.jsx(DefaultLink,{href:`${tt.website}${Ke}`,className:Ye,children:Je??st}):jsxRuntimeExports.jsx(TzktLink,{link:`${Xe}/tokens/${Ke}`,className:Ye,children:Je??st})}function IpfsLink({cid:Xe,type:Ke,className:Ye,children:Je}){return jsxRuntimeExports.jsx(DefaultLink,{href:CIDToURL(Xe,Ke??"IPFS"),className:`${styles$v.ipfs_link} ${Ye??""}`,children:Je??Xe})}function Claim(){const Xe=useDaoStore(Je=>Je.claimTokens),[Ke,Ye]=reactExports.useState(!1);return jsxRuntimeExports.jsx(Page,{title:"Claim DAO tokens",large:!0,children:jsxRuntimeExports.jsxs("div",{className:styles$w.container,children:[jsxRuntimeExports.jsxs("div",{className:styles$w.headline,children:[jsxRuntimeExports.jsx("h1",{children:"Welcome to the TEIA tokens claim page!"}),jsxRuntimeExports.jsx("p",{children:"Here you can claim your Teia DAO tokens."}),jsxRuntimeExports.jsx(SvgTeiaDao,{})]}),jsxRuntimeExports.jsxs("section",{className:styles$w.section,children:[jsxRuntimeExports.jsx("p",{children:'By owning TEIA tokens, you are part of the Teia DAO LLC and eligible to put forward and vote on DAO proposals for Teia. Teia DAO tokens, (or "TEIA tokens") are specifically designed and intended for governance purposes within the Teia DAO ecosystem.'}),jsxRuntimeExports.jsxs("p",{children:["If your Tezos wallet satisfies the conditions laid out in the"," ",jsxRuntimeExports.jsx(DefaultLink,{href:"https://blog.teia.art/blog/fact-sheet-token-drop",children:"token distribution fact sheet"})," ","you are eligible to claim your TEIA tokens during the claiming period (August 20th, 2023 to November 20th, 2023). You can find a table with all eligible Tezos addresses and the amount of tokens in this"," ",jsxRuntimeExports.jsx(DefaultLink,{href:"https://docs.google.com/spreadsheets/d/11jFANEUsvNSc9vQGD7sc46n_BOp8v0tGOLY1LG0KENk/edit?usp=sharing",children:"token distribution spreadsheet"}),"."]}),jsxRuntimeExports.jsxs("p",{children:["For any questions or assistance regarding the token claim process get in touch with the team via discord or mail at"," ",jsxRuntimeExports.jsx("a",{href:"mailto:info@teia.art",children:"info@teia.art"})]})]}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsxs("section",{className:styles$w.section,children:[jsxRuntimeExports.jsx("h1",{className:styles$w.section_title,children:"How to Claim your Tokens"}),jsxRuntimeExports.jsxs("ol",{children:[jsxRuntimeExports.jsxs("li",{counter:"1",children:[jsxRuntimeExports.jsx("b",{children:"Sync your wallet"})," with teia.art (top right corner). Please check the URL before syncing your wallet: The only official TEIA token claim page is at www.teia.art/claim"]}),jsxRuntimeExports.jsxs("li",{counter:"2",children:[jsxRuntimeExports.jsx("b",{children:"Read the legal disclaimer below."})," It outlines important information regarding the nature of TEIA tokens and your responsibilities as a token holder."]}),jsxRuntimeExports.jsxs("li",{counter:"3",children:[jsxRuntimeExports.jsx("b",{children:"Confirm you have read the disclaimer"})," by checking the box at the bottom of this page to get access to the claim button."]}),jsxRuntimeExports.jsxs("li",{counter:"4",children:[jsxRuntimeExports.jsx("b",{children:'Click on the "Claim TEIA tokens" button'})," at the bottom of this page to initiate the token claim process and confirm the operation with your wallet. Your tokens should arrive in your wallet after a few minutes."]})]}),jsxRuntimeExports.jsx("p",{children:"If you own multiple eligible wallets, unsync your wallet and repeat these steps for each of your wallets."})]}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsxs("section",{className:styles$w.section,children:[jsxRuntimeExports.jsx("h1",{className:styles$w.section_title,children:"Legal Disclaimer"}),jsxRuntimeExports.jsx("p",{children:`By claiming your Teia DAO tokens ("TEIA tokens"), you agree to be bound by the terms and conditions set forth in this disclaimer. If you do not agree with any part of this disclaimer, don't participate in the token claim process!`}),jsxRuntimeExports.jsxs("ol",{children:[jsxRuntimeExports.jsxs("li",{counter:"1",children:[jsxRuntimeExports.jsx("b",{children:"Governance only:"})," The TEIA tokens are intended solely for governance purposes within the Teia DAO ecosystem. TEIA tokens do not represent any form of investment in the Teia DAO or any associated entity. TEIA tokens are not intended to be securities or investment assets. The Teia DAO LLC does not intend to generate and distribute profits among its members. Teia does not sell TEIA tokens and does not intend to generate profit with the tokens. Claiming TEIA tokens via this claim page is free."]}),jsxRuntimeExports.jsxs("li",{counter:"2",children:[jsxRuntimeExports.jsx("b",{children:"No investment advice:"})," The information provided on this claim page, as well as any other informational materials, blog articles, or announcements published by Teia DAO LLC, are strictly for informational purposes. It does not constitute investment advice or any form of recommendation. The Teia DAO team does not endorse or recommend the purchase or sale of TEIA tokens as investment assets. The Teia DAO team makes no guarantees or representations regarding the future value, utility, or performance of TEIA tokens. The value of TEIA tokens may fluctuate, and you may experience losses if you choose to acquire or trade them. The Teia DAO team disclaims any responsibility for such losses."]}),jsxRuntimeExports.jsxs("li",{counter:"3",children:[jsxRuntimeExports.jsx("b",{children:"DAO membership:"})," By claiming and/or holding TEIA tokens, you become a member of the Teia DAO LLC. Teia does not require you to provide any personal information, as long as you hold less than 10% of tokens in circulation. Every address is limited to 400k TEIA tokens (5% of total supply) initially. This limit can be adjusted between 1% and 10% of total supply via DAO vote. If you want to stop being a Teia DAO member, you can send all your TEIA tokens to the"," ",jsxRuntimeExports.jsx(DefaultLink,{href:"https://tzkt.io/KT1J9FYz29RBQi1oGLw8uXyACrzXzV1dHuvb/operations/",children:"Teia Treasury Address"}),"."]}),jsxRuntimeExports.jsxs("li",{counter:"4",children:[jsxRuntimeExports.jsx("b",{children:"Regulatory compliance:"})," The distribution and use of TEIA tokens may be subject to various laws, regulations, and restrictions in different jurisdictions. It is your sole responsibility to ensure compliance with any applicable laws and regulations before participating in the TEIA token claim process. The Teia DAO team does not provide legal, regulatory, or tax advice."]}),jsxRuntimeExports.jsxs("li",{counter:"5",children:[jsxRuntimeExports.jsx("b",{children:"No liability:"})," To the maximum extent permitted by applicable law, the Teia DAO team, its contributors, affiliates, partners, and any other associated entities shall not be liable for any direct, indirect, incidental, consequential, or punitive damages arising out of or in connection with the TEIA tokens or your participation in the TEIA token claim process."]}),jsxRuntimeExports.jsxs("li",{counter:"6",children:[jsxRuntimeExports.jsx("b",{children:"Risk acknowledgement:"})," By participating in the TEIA token claim process, you acknowledge and assume the risks associated with blockchain technology, cryptocurrencies, and the volatility of the cryptocurrency market. You agree to hold the Teia DAO team harmless against any claims, demands, actions, or liabilities arising from your participation."]}),jsxRuntimeExports.jsxs("li",{counter:"7",children:[jsxRuntimeExports.jsx("b",{children:"Updates and amendments:"})," The Teia DAO team reserves the right to modify, update, or amend this disclaimer at any time without prior notice."]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx(Checkbox$1,{alt:`click to ${Ke?"decline":"accept"} the legal disclaimer`,checked:Ke,onCheck:Ye,label:"I have read and understood the legal disclaimer and agree to it"}),jsxRuntimeExports.jsx("i",{children:"You need to accept the disclaimer in order to access the token claim button."})]}),Ke&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsxs("section",{className:styles$w.section,children:[jsxRuntimeExports.jsx("h1",{className:styles$w.section_title,children:"Claim your TEIA tokens!"}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx(Button,{shadow_box:!0,onClick:Xe,children:"Claim TEIA tokens"})})]}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsxs("section",{className:styles$w.section,children:[jsxRuntimeExports.jsx("h1",{className:styles$w.section_title,children:"Troubleshooting"}),jsxRuntimeExports.jsx("p",{children:"Here are some of the most common solutions if the token claim process fails."}),jsxRuntimeExports.jsxs("ol",{children:[jsxRuntimeExports.jsx("li",{children:"Unsync and resync your wallet from teia.art"}),jsxRuntimeExports.jsx("li",{children:"Check if you have enough funds for the transaction in your wallet. The transaction cost for the claim process is about 0.1-0.2 tez."}),jsxRuntimeExports.jsx("li",{children:"Clear your browser cache."}),jsxRuntimeExports.jsxs("li",{children:["Switch the rpc node in the"," ",jsxRuntimeExports.jsx(DefaultLink,{href:"/settings",children:"config menu"}),", reload the page and try again."]})]})]})]})]})})}const details="_details_fqfiu_217",container$b="_container_fqfiu_228",transfers="_transfers_fqfiu_234",code="_code_fqfiu_245",styles$u={details,container:container$b,transfers,code};function Details({label:Xe,className:Ke,children:Ye}){return jsxRuntimeExports.jsxs("details",{className:`${styles$u.details} ${Ke??""}`,children:[jsxRuntimeExports.jsx("summary",{children:Xe}),jsxRuntimeExports.jsx("div",{className:styles$u.container,children:Ye})]})}function TezTansfersDetails({label:Xe,transfers:Ke,aliases:Ye,className:Je}){return jsxRuntimeExports.jsx(Details,{label:Xe,className:Je,children:jsxRuntimeExports.jsx("table",{className:styles$u.transfers,children:jsxRuntimeExports.jsx("tbody",{children:Ke.map((tt,st)=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsxs("td",{children:[tt.amount/1e6," tez"]}),jsxRuntimeExports.jsxs("td",{children:["to"," ",jsxRuntimeExports.jsx(TezosAddressLink,{address:tt.destination,alias:Ye==null?void 0:Ye[tt.destination],shorten:!0})]})]},st))})})})}function TokenTansfersDetails({label:Xe,fa2:Ke,transfers:Ye,aliases:Je,className:tt}){const st=TOKENS.find(it=>it.fa2===Ke),rt=(st==null?void 0:st.decimals)??1;return jsxRuntimeExports.jsx(Details,{label:Xe,className:tt,children:jsxRuntimeExports.jsx("table",{className:styles$u.transfers,children:jsxRuntimeExports.jsx("tbody",{children:Ye.map((it,ot)=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsxs("td",{children:[it.amount/rt," ",!st||st.multiasset?`edition${it.amount/rt===1?"":"s"}`:st.name]}),jsxRuntimeExports.jsxs("td",{children:["to"," ",jsxRuntimeExports.jsx(TezosAddressLink,{address:it.destination,alias:Je==null?void 0:Je[it.destination],shorten:!0})]})]},ot))})})})}function CodeDetails({label:Xe,code:Ke,className:Ye}){return jsxRuntimeExports.jsx(Details,{label:Xe,className:Ye,children:jsxRuntimeExports.jsx("pre",{className:styles$u.code,children:Ke})})}const votes="_votes_1pvl1_216",yes_vote="_yes_vote_1pvl1_230",no_vote="_no_vote_1pvl1_235",abstain_vote="_abstain_vote_1pvl1_240",empty_vote="_empty_vote_1pvl1_245",styles$t={votes,yes_vote,no_vote,abstain_vote,empty_vote};function Votes({votes:Xe,labels:Ke={yes:"yes",no:"no",abstain:"abs",empty:"--"},showValues:Ye,onClick:Je,className:tt}){const{yes:st,no:rt,abstain:it}=Xe,ot=Number(st)+Number(rt)+Number(it),at=lt=>{lt.preventDefault(),Je()};return jsxRuntimeExports.jsxs("button",{onClick:at,className:`${styles$t.votes} ${tt??""}`,children:[st>0&&jsxRuntimeExports.jsx("span",{className:styles$t.yes_vote,style:{width:`${100*st/ot}%`},children:Ye?Math.round(st):Ke.yes}),rt>0&&jsxRuntimeExports.jsx("span",{className:styles$t.no_vote,style:{width:`${100*rt/ot}%`},children:Ye?Math.round(rt):Ke.no}),it>0&&jsxRuntimeExports.jsx("span",{className:styles$t.abstain_vote,style:{width:`${100*it/ot}%`},children:Ye?Math.round(it):Ke.abstain}),ot===0&&jsxRuntimeExports.jsx("span",{className:styles$t.empty_vote,style:{width:"100%"},children:Ye?0:Ke.empty})]})}const getTimeAgo=Xe=>{const Ke=Math.round(new Date(Xe).getTime()/1e3),Je=Math.round(new Date().getTime()/1e3)-Ke;let tt,st;return Je/60<60?(tt="minutes",st=Math.round(Je/60),st<=1&&(tt="minute")):Je/3600<24?(tt="hours",st=Math.round(Je/3600),st<=1&&(tt="hour")):(tt="days",st=Math.round(Je/(3600*24)),st<=1&&(tt="day")),`${st} ${tt} ago`},getWordDate=Xe=>{const Ke=new Date(Xe),Ye={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};return Ke.toLocaleString("en-GB",Ye)};function parseLambda(Xe){const Ye=new Parser$2().parseJSON(JSON.parse(Xe));return emitMicheline(Ye,{indent:"    ",newline:`
`}).replace(/0x0[0123]{1}[\w\d]{42}/g,st=>`"${encodePubKey(st.slice(2))}"`).replace(/0x0[0123]{1}[\w\d]{40}/g,st=>`"${encodeKeyHash(st.slice(2))}"`)}function Proposal({proposalId:Xe}){const[Ke]=useStorage(DAO_GOVERNANCE_CONTRACT),[Ye]=useDaoGovernanceParameters(Ke),[Je,tt]=useDaoProposals(Ke),[st]=useDaoRepresentatives(Ke),rt=useUserStore(Pt=>Pt.address),it=st==null?void 0:st[rt],[ot,at]=useDaoTokenBalance(rt),[lt,ut]=useDaoUserVotes(rt,Ke),[ht,pt]=useDaoCommunityVotes(it,Ke),[ft]=useDaoUsersAliases(rt,st,Je);if(!Ye||!Je)return;const xt=Je[Xe],vt=Ye[xt.gp_index],At=ot>0,Et=ot>=vt.min_amount/DAO_TOKEN_DECIMALS,wt=parseInt(vt.vote_period),_t=parseInt(vt.wait_period),Ct=new Date(xt.timestamp);Ct.setDate(Ct.getDate()+wt);const Tt=new Date(xt.timestamp);Tt.setDate(Tt.getDate()+wt+_t);const St=new Date,Rt=St>Ct,Nt=St>Tt;return xt.id=Xe,xt.voteExpirationTime=Ct,xt.waitExpirationTime=Tt,xt.voteFinished=Rt,xt.waitFinished=Nt,jsxRuntimeExports.jsxs("div",{className:styles$w.proposal,children:[jsxRuntimeExports.jsxs("h3",{className:styles$w.proposal_title,children:[jsxRuntimeExports.jsxs(Link,{"aria-label":`Proposal ${Xe}`,to:`${PATH.PROPOSAL}/${Xe}`,className:styles$w.proposal_id,children:["#",Xe]}),bytes2Char(xt.title)]}),jsxRuntimeExports.jsxs("div",{className:styles$w.proposal_information,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ProposalDescription,{proposal:xt,aliases:ft}),jsxRuntimeExports.jsx(ProposalVotesSummary,{tokenVotes:xt.token_votes,representativesVotes:xt.representatives_votes,quorum:xt.quorum,gp:vt,showUserVotes:ot>0||it||lt&&Object.keys(lt).length>0,userCommunity:it,userVote:lt==null?void 0:lt[Xe],userCommunityVote:ht==null?void 0:ht[Xe]})]}),jsxRuntimeExports.jsx(ProposalActions,{proposalId:Xe,canVote:xt.status.open&&!Rt&&Et&&!(lt!=null&&lt[Xe]),canVoteAsRepresentative:xt.status.open&&!Rt&&it&&!(ht!=null&&ht[Xe]),canEvaluate:xt.status.open&&Rt&&At,canExecute:xt.status.approved&&Nt&&At,canCancel:(xt.status.open||xt.status.approved)&&(xt.issuer===rt||Ke.guardians===rt),callback:()=>{tt(),at(),ut(),pt()}})]})]})}function ProposalDescription({proposal:Xe,aliases:Ke}){const Ye=bytes2Char(Xe.description),Je=Ye.split("//")[1];return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{children:["Proposed by"," ",jsxRuntimeExports.jsx(TeiaUserLink,{address:Xe.issuer,alias:Ke==null?void 0:Ke[Xe.issuer],shorten:!0})," ","on ",getWordDate(Xe.timestamp),"."]}),jsxRuntimeExports.jsx("p",{children:`Status: ${Object.keys(Xe.status)[0].toUpperCase()}`}),!Xe.status.cancelled&&(Xe.voteFinished?!Xe.waitFinished&&jsxRuntimeExports.jsxs("p",{children:["Waiting period ends on ",getWordDate(Xe.waitExpirationTime),"."]}):jsxRuntimeExports.jsxs("p",{children:["Voting period ends on ",getWordDate(Xe.voteExpirationTime),"."]})),jsxRuntimeExports.jsxs("p",{children:["Description: ",Je?jsxRuntimeExports.jsx(IpfsLink,{cid:Je,children:"IPFS"}):Ye]}),jsxRuntimeExports.jsx(ProposalContent,{content:Xe.kind,aliases:Ke})]})}function ProposalContent({content:Xe,aliases:Ke}){if(Xe.text)return jsxRuntimeExports.jsx("p",{children:"Effect: Approves a text proposal."});if(Xe.transfer_mutez){const Ye=Xe.transfer_mutez,Je=Ye.reduce((tt,st)=>tt+st.amount/1e6,0);return Ye.length===1?jsxRuntimeExports.jsxs("p",{children:["Effect: Transfers ",Je," tez to"," ",jsxRuntimeExports.jsx(TezosAddressLink,{address:Ye[0].destination,alias:Ke==null?void 0:Ke[Ye[0].destination],shorten:!0}),"."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{children:["Effect: Transfers ",Je," tez."]}),jsxRuntimeExports.jsx(TezTansfersDetails,{label:"See transfer details",transfers:Ye,aliases:Ke})]})}else if(Xe.transfer_token){const Ye=Xe.transfer_token.fa2,Je=Xe.transfer_token.token_id,tt=TOKENS.find(ot=>ot.fa2===Ye),st=(tt==null?void 0:tt.decimals)??1,rt=Xe.transfer_token.distribution,it=rt.reduce((ot,at)=>ot+at.amount/st,0);return rt.length===1?jsxRuntimeExports.jsxs("p",{children:["Effect: Transfers ",it," ",(!tt||tt.multiasset)&&`edition${it===1?"":"s"} of `,jsxRuntimeExports.jsx(TokenLink,{fa2:Ye,id:Je})," to"," ",jsxRuntimeExports.jsx(TezosAddressLink,{address:rt[0].destination,alias:Ke==null?void 0:Ke[rt[0].destination],shorten:!0}),"."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{children:["Effect: Transfers ",it," ",(!tt||tt.multiasset)&&`edition${it===1?"":"s"} of `,jsxRuntimeExports.jsx(TokenLink,{fa2:Ye,id:Je}),"."]}),jsxRuntimeExports.jsx(TokenTansfersDetails,{label:"See transfer details",fa2:Ye,transfers:rt,aliases:Ke})]})}else return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{children:"Effect: Executes a lambda function."}),jsxRuntimeExports.jsx(CodeDetails,{label:"See Micheline code",code:parseLambda(Xe.lambda_function)})]})}function ProposalVotesSummary({tokenVotes:Xe,representativesVotes:Ke,quorum:Ye,gp:Je,showUserVotes:tt,userCommunity:st,userVote:rt,userCommunityVote:it}){const[ot,at]=reactExports.useState(!1),lt=Je.supermajority/100,ut=Je.vote_method.linear?DAO_TOKEN_DECIMALS:Math.pow(DAO_TOKEN_DECIMALS,.5),ht=Ke.total>0?Math.min(Je.representatives_share/Ke.total,Je.representative_max_share)/100:0,pt=Ye*ht,ft=parseInt(Xe.total)+Ke.total*pt,xt=parseInt(Xe.positive)+Ke.positive*pt,vt=parseInt(Xe.negative)+Ke.negative*pt,At=parseInt(Xe.abstain)+Ke.abstain*pt,Et=ft>Ye,wt=xt>(xt+vt)*lt,_t=Et?0:Ye-ft,Ct=wt?0:ft===0?ut:vt*lt/(1-lt)-xt;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Token votes:"}),jsxRuntimeExports.jsx(Votes,{votes:{yes:Xe.positive/ut,no:Xe.negative/ut,abstain:Xe.abstain/ut},showValues:ot,onClick:()=>at(!ot)}),jsxRuntimeExports.jsx("p",{children:"Representatives votes:"}),jsxRuntimeExports.jsx(Votes,{votes:{yes:Ke.positive*pt/ut,no:Ke.negative*pt/ut,abstain:Ke.abstain*pt/ut},showValues:ot,onClick:()=>at(!ot)}),jsxRuntimeExports.jsx("p",{children:"Combined votes:"}),jsxRuntimeExports.jsx(Votes,{votes:{yes:xt/ut,no:vt/ut,abstain:At/ut},showValues:ot,onClick:()=>at(!ot)}),jsxRuntimeExports.jsxs("p",{children:["Passes supermajority condition?"," ",wt?"Yes.":`No, ${Math.ceil(Ct/ut)} yes vote${Ct!==ut?"s":""} still missing.`]}),jsxRuntimeExports.jsxs("p",{children:["Passes minimum quorum condition?"," ",Et?"Yes.":`No, ${Math.ceil(_t/ut)} vote${_t!==ut?"s":""} still missing.`]}),tt&&jsxRuntimeExports.jsxs("p",{children:["Your votes:",jsxRuntimeExports.jsx("span",{className:styles$w.user_vote,children:jsxRuntimeExports.jsx(Votes,{votes:{yes:rt!=null&&rt.vote.yes?rt.weight/ut:0,no:rt!=null&&rt.vote.no?rt.weight/ut:0,abstain:rt!=null&&rt.vote.abstain?rt.weight/ut:0},showValues:ot,onClick:()=>at(!ot)})}),st&&jsxRuntimeExports.jsx("span",{className:styles$w.user_vote,children:jsxRuntimeExports.jsx(Votes,{votes:{yes:it!=null&&it.yes?pt/ut:0,no:it!=null&&it.no?pt/ut:0,abstain:it!=null&&it.abstain?pt/ut:0},showValues:ot,onClick:()=>at(!ot)})})]})]})}function ProposalActions({proposalId:Xe,canVote:Ke,canVoteAsRepresentative:Ye,canEvaluate:Je,canExecute:tt,canCancel:st,callback:rt}){const it=useDaoStore(ht=>ht.voteProposal),ot=useDaoStore(ht=>ht.voteProposalAsRepresentative),at=useDaoStore(ht=>ht.cancelProposal),lt=useDaoStore(ht=>ht.evaluateVotingResult),ut=useDaoStore(ht=>ht.executeProposal);if(Ke||Ye||Je||tt||st)return jsxRuntimeExports.jsxs("div",{children:[Ke&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Vote with your tokens:"}),jsxRuntimeExports.jsxs("div",{className:styles$w.proposal_buttons,children:[jsxRuntimeExports.jsx(Button,{onClick:()=>it(Xe,"yes",null,rt),shadow_box:!0,fit:!0,children:"yes"}),jsxRuntimeExports.jsx(Button,{onClick:()=>it(Xe,"no",null,rt),shadow_box:!0,fit:!0,children:"no"}),jsxRuntimeExports.jsx(Button,{onClick:()=>it(Xe,"abstain",null,rt),shadow_box:!0,fit:!0,children:"abstain"})]})]}),Ye&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Vote as representative:"}),jsxRuntimeExports.jsxs("div",{className:styles$w.proposal_buttons,children:[jsxRuntimeExports.jsx(Button,{onClick:()=>ot(Xe,"yes",rt),shadow_box:!0,fit:!0,children:"yes"}),jsxRuntimeExports.jsx(Button,{onClick:()=>ot(Xe,"no",rt),shadow_box:!0,fit:!0,children:"no"}),jsxRuntimeExports.jsx(Button,{onClick:()=>ot(Xe,"abstain",rt),shadow_box:!0,fit:!0,children:"abstain"})]})]}),Je&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Evaluate the proposal:"}),jsxRuntimeExports.jsx("div",{className:styles$w.proposal_buttons,children:jsxRuntimeExports.jsx(Button,{onClick:()=>lt(Xe,rt),shadow_box:!0,fit:!0,children:"evaluate"})})]}),tt&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Execute the proposal:"}),jsxRuntimeExports.jsx("div",{className:styles$w.proposal_buttons,children:jsxRuntimeExports.jsx(Button,{onClick:()=>ut(Xe,rt),shadow_box:!0,fit:!0,children:"execute"})})]}),st&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Cancel the proposal:"}),jsxRuntimeExports.jsx("div",{className:styles$w.proposal_buttons,children:jsxRuntimeExports.jsx(Button,{onClick:()=>at(Xe,!0,rt),shadow_box:!0,fit:!0,children:"cancel"})})]})]})}function ProposalDisplay(){const[Xe]=useStorage(DAO_GOVERNANCE_CONTRACT),[Ke]=useDaoGovernanceParameters(Xe),[Ye]=useDaoProposals(Xe),{id:Je}=useParams();return Ye&&!Ye[Je]?jsxRuntimeExports.jsx(RootErrorBoundary,{title:"Wrong DAO proposal id",msg:`The last DAO proposal id is ${Xe.counter-1}`}):jsxRuntimeExports.jsx(Page,{title:`DAO proposal #${Je}`,children:jsxRuntimeExports.jsxs("div",{className:styles$w.container,children:[jsxRuntimeExports.jsx("h1",{className:styles$w.headline,children:"DAO proposal"}),!Ke||!Ye?jsxRuntimeExports.jsx(LoadingDaoMessage,{message:"Loading proposal information"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("section",{className:styles$w.section,children:jsxRuntimeExports.jsx(Proposal,{proposalId:Je})}),jsxRuntimeExports.jsx(PaginationButtons,{path:PATH.PROPOSAL,current:parseInt(Je),min:0,max:Xe.counter-1})]})]})})}const section$4="_section_15hzx_1",section_title$1="_section_title_15hzx_11",parameters_list="_parameters_list_15hzx_15",proposal_form="_proposal_form_15hzx_19",proposal_form_fields="_proposal_form_fields_15hzx_23",proposal_form_field="_proposal_form_field_15hzx_23",styles$s={section:section$4,section_title:section_title$1,parameters_list,proposal_form,proposal_form_fields,proposal_form_field},TeiaTokenMetadata=()=>{var rt,it;const[Xe,Ke]=reactExports.useState(null),[Ye,Je]=reactExports.useState(!0),[tt,st]=reactExports.useState(null);return reactExports.useEffect(()=>{(async()=>{try{const at=await getTzktData("/v1/tokens?contract=KT1QrtA753MSv8VGxkDrKKyJniG5JtuHHbtV&tokenId=0");at&&at.length>0?Ke(at[0]):st("No token data found.")}catch(at){st("Failed to fetch token data."),console.error("Error fetching token data:",at)}finally{Je(!1)}})()},[]),Ye?jsxRuntimeExports.jsx("p",{children:"Loading token data..."}):tt?jsxRuntimeExports.jsx("p",{children:tt}):Xe?jsxRuntimeExports.jsxs("div",{className:"teia-token-metadata",children:[jsxRuntimeExports.jsxs("h2",{children:[jsxRuntimeExports.jsx("strong",{children:"Symbol:"})," ",Xe.metadata.symbol]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Token ID:"})," ",Xe.tokenId]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Token Standard:"})," ",Xe.standard]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Contract Alias:"})," ",Xe.contract.alias]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Contract Address:"})," ",Xe.contract.address]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"First Minter Alias:"})," ",((rt=Xe.firstMinter)==null?void 0:rt.alias)||"N/A"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"First Minter Address:"})," ",((it=Xe.firstMinter)==null?void 0:it.address)||"N/A"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Transfers Count:"})," ",Xe.transfersCount]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Balances Count:"})," ",Xe.balancesCount]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Holders Count:"})," ",Xe.holdersCount]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Total Minted:"})," ",(parseInt(Xe.totalMinted)/1e6).toFixed(2)," TEIA"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Total Burned:"})," ",(parseInt(Xe.totalBurned)/1e6).toFixed(2)," TEIA"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Total Supply:"})," ",(parseInt(Xe.totalSupply)/1e6).toFixed(2)," TEIA"]})]}):jsxRuntimeExports.jsx("p",{children:"No token data available."})},DonateInput=()=>{const[Xe,Ke]=reactExports.useState(""),[Ye]=useUserStore(st=>[st.donate]),Je=st=>{Ke(st.target.value)},tt=()=>{const st=parseFloat(Xe);if(isNaN(st)||st<=0){alert("Please enter a valid donation amount");return}Ye(st,DAO_TREASURY_CONTRACT)};return jsxRuntimeExports.jsxs("div",{className:styles$15.daoDonateButton,children:[jsxRuntimeExports.jsx("h4",{children:"Donate to DAO Treasury"}),jsxRuntimeExports.jsxs("p",{children:["Address: ",DAO_TREASURY_CONTRACT]}),jsxRuntimeExports.jsx("input",{type:"number",value:Xe,onChange:Je,placeholder:"Enter Number in XTZ",inputMode:"decimal",pattern:"[0-9]*",min:"0",className:styles$15.donateInput}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("input",{type:"button",value:`Donate ${Xe} XTZ`,onClick:tt,className:styles$15.donateButton})]})};function DaoParameters(){const[Xe]=useStorage(DAO_GOVERNANCE_CONTRACT),[Ke]=useDaoGovernanceParameters(Xe),[Ye]=useDaoProposals(Xe),[Je]=useDaoRepresentatives(Xe),[tt]=useDaoMemberCount(0),[st]=useBalance(DAO_TREASURY_CONTRACT),[rt]=useDaoTokenBalance(DAO_TREASURY_CONTRACT),it=useUserStore(At=>At.address),ot=Je==null?void 0:Je[it],[at]=useDaoTokenBalance(it),[lt]=useDaoUserVotes(it,Xe),[ut]=useDaoCommunityVotes(ot,Xe),[ht]=useDaoUsersAliases(it,Je,Ye);if(!Ke||!Ye||!Je)return jsxRuntimeExports.jsx(LoadingDaoMessage,{});const pt=Ke[Xe.gp_counter-1],ft=pt.vote_method.linear?DAO_TOKEN_DECIMALS:Math.pow(DAO_TOKEN_DECIMALS,.5),xt=lt?Object.keys(lt).length:0,vt=ut?Object.keys(ut).length:0;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[it&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:styles$s.section,children:[jsxRuntimeExports.jsx("h1",{className:styles$s.section_title,children:"User Information"}),jsxRuntimeExports.jsx("p",{children:"Your activities with the TEIA DAO is listed here."}),jsxRuntimeExports.jsxs("ul",{className:styles$s.parameters_list,children:[jsxRuntimeExports.jsxs("li",{children:["Address: ",jsxRuntimeExports.jsx(TeiaUserLink,{address:it,shorten:!0})]}),ot&&jsxRuntimeExports.jsxs("li",{children:["Representative for ",ot,"."]}),jsxRuntimeExports.jsxs("li",{children:["DAO Token Balance: ",Math.round(at*10)/10," TEIA"]}),jsxRuntimeExports.jsxs("li",{children:["Submitted Proposals:"," ",Object.values(Ye).reduce((At,Et)=>At+(Et.issuer===it?1:0),0)]}),jsxRuntimeExports.jsxs("li",{children:["Voted in ",xt," Proposal",xt===1?"":"s","."]}),ot&&jsxRuntimeExports.jsxs("li",{children:["Voted in ",vt," Proposal",vt===1?"":"s"," as community representative."]})]})]}),jsxRuntimeExports.jsx(Line,{})]}),jsxRuntimeExports.jsxs("section",{className:styles$s.section,children:[jsxRuntimeExports.jsx("h1",{className:styles$s.section_title,children:"DAO Information"}),jsxRuntimeExports.jsxs("p",{children:["Community-wide statistics and usage activities of the TEIA DAO. To learn more about the the ideas and philosophies behind the DAO, visit the"," ",jsxRuntimeExports.jsx("a",{href:"https://blog.teia.art/blog/dao-test-launch",target:"_blank",rel:"noopener noreferrer",children:"official blog post"})," ","after the DAO's first launch. For detailed information on governance processes, check out the"," ",jsxRuntimeExports.jsx("a",{href:"https://github.com/teia-community/teia-docs/wiki/Governance-on-Teia",target:"_blank",rel:"noopener noreferrer",children:"Governance on Teia Documentation"}),"."]}),jsxRuntimeExports.jsx("p",{children:"The information for the DAO is sourced from tzkt.io and cross-referenced with TEIA's own indexer, both pulling from Tezos' on-chain data."}),jsxRuntimeExports.jsxs("ul",{className:styles$s.parameters_list,children:[jsxRuntimeExports.jsxs("li",{children:["Members:"," ",jsxRuntimeExports.jsxs(TzktLink,{link:`${DAO_TOKEN_CONTRACT}/tokens/0/holders`,children:[tt," (Click for List of Existing Members)"]})]}),jsxRuntimeExports.jsxs("li",{children:["Total Number of Proposals: ",Object.keys(Ye).length]}),jsxRuntimeExports.jsxs("li",{children:["Open Proposals:"," ",Object.values(Ye).reduce((At,Et)=>At+(Et.status.open?1:0),0)]}),jsxRuntimeExports.jsxs("li",{children:["Executed Proposals:"," ",Object.values(Ye).reduce((At,Et)=>At+(Et.status.executed?1:0),0)]}),jsxRuntimeExports.jsxs("li",{children:["Rejected Proposals:"," ",Object.values(Ye).reduce((At,Et)=>At+(Et.status.rejected?1:0),0)]}),jsxRuntimeExports.jsxs("li",{children:["Cancelled Proposals:"," ",Object.values(Ye).reduce((At,Et)=>At+(Et.status.cancelled?1:0),0)]}),jsxRuntimeExports.jsxs("li",{children:["Treasury Balance (",DAO_TREASURY_CONTRACT,"): ",Math.round(st)," ","tez and ",Math.round(rt*10)/10," TEIA tokens"]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx(DonateInput,{destinationAddress:Xe.treasury}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx(TeiaTokenMetadata,{}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("a",{href:"https://quipuswap.com/swap/tez-KT1QrtA753MSv8VGxkDrKKyJniG5JtuHHbtV_0",target:"_blank",rel:"noreferrer",children:"Convert XTZ to TEIA on Quipuswap (Decentralized Exchange)"})})]}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsxs("section",{className:styles$s.section,children:[jsxRuntimeExports.jsx("h1",{className:styles$s.section_title,children:"Community Representatives"}),jsxRuntimeExports.jsx("p",{children:"Community Representatives are for voting members who are interested in delegating their votes to other members of the community - people may want to entrust their voting power to someone who is more active in the DAO proposal process to represent them, for example. Otherwise, the DAO defaults to direct participation based on the number of TEIA tokens each wallet holds."}),jsxRuntimeExports.jsxs("p",{children:["For more information, read the"," ",jsxRuntimeExports.jsx("a",{href:"https://github.com/teia-community/teia-docs/wiki/Governance-on-Teia",target:"_blank",rel:"noopener noreferrer",children:"Governance on Teia Documentation"})," ","for more details."]}),jsxRuntimeExports.jsx("h4",{children:"Currently Active Community Representatives"}),jsxRuntimeExports.jsx("ul",{className:styles$s.parameters_list,children:Object.entries(Je).map(([At,Et])=>jsxRuntimeExports.jsxs("li",{children:[`${Et}: `,jsxRuntimeExports.jsx(TeiaUserLink,{address:At,alias:ht==null?void 0:ht[At],shorten:!0})]},Et))})]}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsxs("section",{className:styles$s.section,children:[jsxRuntimeExports.jsx("h1",{className:styles$s.section_title,children:"Current DAO Governance Parameters"}),jsxRuntimeExports.jsx("p",{children:"How the current governance model works in terms of voting, timing, and weighting of each vote. These parameters can change at any time - however, to change these parameters it must be done so by the approval of the DAO itself."}),jsxRuntimeExports.jsxs("ul",{className:styles$s.parameters_list,children:[jsxRuntimeExports.jsxs("li",{children:["Vote Method:"," ",pt.vote_method.linear?"linear weight":"quadratic weight"]}),jsxRuntimeExports.jsxs("li",{children:["Required Quorum: ",Xe.quorum/ft," weighted votes"]}),jsxRuntimeExports.jsxs("li",{children:["Percentage for Supermajority: ",pt.supermajority,"% positive votes"]}),jsxRuntimeExports.jsxs("li",{children:["Representatives Vote Share: ",pt.representatives_share,"% of the quorum"]}),jsxRuntimeExports.jsxs("li",{children:["Representative Max Vote Share: ",pt.representative_max_share,"% of the quorum"]}),jsxRuntimeExports.jsxs("li",{children:["Proposal Voting Period: ",pt.vote_period," Days"]}),jsxRuntimeExports.jsxs("li",{children:["Proposal Waiting Period: ",pt.wait_period," Days"]}),jsxRuntimeExports.jsxs("li",{children:["Number of Tokens to Escrow to Submit a Proposal:"," ",pt.escrow_amount/DAO_TOKEN_DECIMALS," TEIA tokens"]}),jsxRuntimeExports.jsxs("li",{children:["Minimum Number of Tokens Required to Vote on a Proposal:"," ",pt.min_amount/DAO_TOKEN_DECIMALS," TEIA tokens"]})]}),jsxRuntimeExports.jsxs("p",{children:["Currently TEIA's marketplace contract is handled by"," ",jsxRuntimeExports.jsx("a",{href:"https://core-team-multisig.onrender.com/proposals",target:"_blank",children:"TEIA's Core Team Multisig"})," ",`for teia.art's day-to-day activities. TEIA token holders are legally defined as "operating members" of TEIA DAO LLC, which gives them ultimate authority over the actions and functions of the community, expressed through the voting and proposal mechanisms of the DAO itself.`]})]}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsxs("section",{className:styles$s.section,children:[jsxRuntimeExports.jsx("h1",{className:styles$s.section_title,children:"Smart Contracts"}),jsxRuntimeExports.jsx("p",{children:"The current set of smart contracts that keep the DAO running on a technical level. These contracts may be replaced or updated on occasion for adjustments or improvements, but can only be done through the approval of the DAO's proposal process."}),jsxRuntimeExports.jsxs("ul",{className:styles$s.parameters_list,children:[jsxRuntimeExports.jsxs("li",{children:["DAO Governance:"," ",jsxRuntimeExports.jsx(TezosAddressLink,{address:DAO_GOVERNANCE_CONTRACT,shorten:!0})]}),jsxRuntimeExports.jsxs("li",{children:["DAO Token: ",jsxRuntimeExports.jsx(TezosAddressLink,{address:Xe.token,shorten:!0})]}),jsxRuntimeExports.jsxs("li",{children:["DAO Treasury:"," ",jsxRuntimeExports.jsx(TezosAddressLink,{address:Xe.treasury,shorten:!0})]}),jsxRuntimeExports.jsxs("li",{children:["DAO Guardians:"," ",jsxRuntimeExports.jsx(TezosAddressLink,{address:Xe.guardians,shorten:!0})]}),jsxRuntimeExports.jsxs("li",{children:["DAO Administrator:"," ",jsxRuntimeExports.jsx(TezosAddressLink,{address:Xe.administrator,shorten:!0})]}),jsxRuntimeExports.jsxs("li",{children:["Community Representatives:"," ",jsxRuntimeExports.jsx(TezosAddressLink,{address:Xe.representatives,shorten:!0})]})]})]}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsxs("section",{className:styles$s.section,children:[jsxRuntimeExports.jsx("h1",{className:styles$s.section_title,children:"Polls"}),jsxRuntimeExports.jsx("p",{children:"TEIA's polling system is a community tool that any TEIA member can use for any purpose - it is often used for feature requests, testing interest or getting feedback for ideas (artistic or technical), measuring community sentiment around certain issues, or just for fun."}),jsxRuntimeExports.jsxs("p",{children:["TEIA's polling system can be found ",jsxRuntimeExports.jsx("a",{href:"/polls",children:"here."})," (The DAO is typically reserved for issues that affect core administration, budgeting, and existential issues that require the full participation of the community itself.)"]})]})]})}const PROPOSAL_STATUS_OPTIONS={toVote:"Proposals to vote",voted:"Already voted proposals",toEvaluate:"Proposals to evaluate",approved:"Approved proposals",toExecute:"Proposals to execute",executed:"Executed proposals",rejected:"Rejected proposals",cancelled:"Cancelled proposals"};function DaoProposals(){const[Xe,Ke]=reactExports.useState("toVote"),[Ye]=useStorage(DAO_GOVERNANCE_CONTRACT),[Je]=useDaoGovernanceParameters(Ye),[tt]=useDaoProposals(Ye),[st]=useDaoRepresentatives(Ye),rt=useUserStore(pt=>pt.address),it=st==null?void 0:st[rt],[ot]=useDaoUserVotes(rt,Ye),[at]=useDaoCommunityVotes(it,Ye);if(!Je||!tt||!st)return jsxRuntimeExports.jsx(LoadingDaoMessage,{});const lt=Object.fromEntries(Object.keys(PROPOSAL_STATUS_OPTIONS).map(pt=>[pt,[]])),ut=new Date;for(const pt of Object.keys(tt).reverse()){const ft=tt[pt],xt=Je[ft.gp_index],vt=parseInt(xt.vote_period),At=parseInt(xt.wait_period),Et=new Date(ft.timestamp);Et.setDate(Et.getDate()+vt);const wt=new Date(ft.timestamp);wt.setDate(wt.getDate()+vt+At),ft.status.open?ut>Et?lt.toEvaluate.push(pt):ot!=null&&ot[pt]?it&&!(at!=null&&at[pt])?lt.toVote.push(pt):lt.voted.push(pt):lt.toVote.push(pt):ft.status.approved?ut>wt?lt.toExecute.push(pt):lt.approved.push(pt):ft.status.executed?lt.executed.push(pt):ft.status.rejected?lt.rejected.push(pt):ft.status.cancelled&&lt.cancelled.push(pt)}const ht=Object.keys(PROPOSAL_STATUS_OPTIONS).filter(pt=>pt==="toVote"||lt[pt].length>0);return jsxRuntimeExports.jsxs("section",{className:styles$s.section,children:[jsxRuntimeExports.jsx("h1",{className:styles$s.section_title,children:"Teia DAO proposals"}),jsxRuntimeExports.jsx(Select,{alt:"proposal group selection",value:{value:Xe,label:`${PROPOSAL_STATUS_OPTIONS[Xe]} (${lt[Xe].length})`},onChange:pt=>Ke(pt.value),options:ht.map(pt=>({value:pt,label:`${PROPOSAL_STATUS_OPTIONS[pt]} (${lt[pt].length})`})),children:jsxRuntimeExports.jsx(Line,{})}),jsxRuntimeExports.jsx(ProposalGroup,{status:Xe,proposalIds:lt[Xe]})]})}function ProposalGroup({status:Xe,proposalIds:Ke}){const Ye=(()=>{switch(Xe){case"toVote":return Ke.length>0?"These proposals are still in the voting phase and you didn't vote for them yet.":"There are no new proposals to vote at the moment.";case"voted":return"These proposals are still in the voting phase, but you already voted them.";case"toEvaluate":return"The voting period for these proposals has finished. You can evaluate their result to see if they are approved or rejected.";case"approved":return"These are approved proposals that are still in the waiting phase. Once the waiting phase finishes, you will be able to execute them.";case"toExecute":return"These proposals have been approved by the DAO and can be exectuded.";case"executed":return"These proposals have been executed already.";case"rejected":return"These proposals didn't reach the required quorum and/or supermajority. As a result, they were rejected by the DAO.";case"cancelled":return"These proposals were cancelled by the proposal issuer or the DAO guardians.";default:return""}})();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{children:Ye}),Ke.length>0&&jsxRuntimeExports.jsx("ul",{children:Ke.map((Je,tt)=>jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx(Proposal,{proposalId:Je}),tt<Ke.length-1&&jsxRuntimeExports.jsx(Line,{})]},Je))})]})}const container$a="_container_lmgaj_1",ipfs_upload_button="_ipfs_upload_button_lmgaj_6",ipfs_result="_ipfs_result_lmgaj_19",allowed="_allowed_lmgaj_26",styles$r={container:container$a,ipfs_upload_button,ipfs_result,allowed},Upload=reactExports.forwardRef(({label:Xe,file:Ke,placeHolder:Ye,allowedTypes:Je,allowedTypesLabel:tt,children:st,onChange:rt=()=>null,...it},ot)=>{const{language:at}=useLanguage(),[lt,ut]=reactExports.useState(Ye),ht=async ft=>{const{files:xt}=ft.target,vt=xt[0];if(!vt){ut(Ye);return}ut(vt.name);const At=vt.type===""?await getMimeType(vt):vt.type,Et=Buffer.from(await vt.arrayBuffer()),wt=new FileReader;wt.addEventListener("load",_t=>{rt({title:lt,mimeType:At,file:vt,buffer:Et,reader:_t.target.result})}),wt.readAsDataURL(vt)},pt={type:"file",name:it.name||"file"};return Je&&(pt.accept=Je.join(",")),jsxRuntimeExports.jsxs("div",{className:styles$r.container,children:[jsxRuntimeExports.jsx("strong",{children:Xe}),jsxRuntimeExports.jsxs("label",{children:[lt,jsxRuntimeExports.jsx("input",{...pt,ref:ot,onChange:ht,...it})]}),jsxRuntimeExports.jsxs("div",{className:styles$r.allowed,children:[at.mint.supports,": ",tt]}),st]})});function IpfsUploader({label:Xe,placeholder:Ke,value:Ye,onChange:Je,className:tt,displayUploadInformation:st=!0,children:rt}){const[it,ot]=reactExports.useState(void 0),at=ht=>{ot(ht.target.files[0]),Je("")},lt=async ht=>{ht.preventDefault(),Je(await uploadFileToIpfs(it,st))},ut=async ht=>{ht.preventDefault(),ot(void 0),Je("")};return jsxRuntimeExports.jsxs("div",{className:`${styles$r.container} ${tt??""}`,children:[jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("strong",{children:Xe})}),!it&&jsxRuntimeExports.jsxs("label",{children:[Ke,jsxRuntimeExports.jsx("input",{type:"file",onChange:at})]}),it&&Ye===""&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{onClick:lt,className:styles$r.ipfs_upload_button,children:["Upload ",it.name," to IPFS"]}),jsxRuntimeExports.jsx(Button,{onClick:ut,small:!0,children:"Clear field"})]}),it&&Ye!==""&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{className:styles$r.ipfs_result,children:[jsxRuntimeExports.jsxs("span",{children:[it.name," ",jsxRuntimeExports.jsx(IpfsLink,{cid:Ye,children:"IPFS"})]}),jsxRuntimeExports.jsx(Button,{onClick:ut,small:!0,children:"Clear field"})]}),rt]})]})}async function uploadFileToIpfs(Xe,Ke){const Ye=useModalStore.getState().step,Je=useModalStore.getState().close;Ke&&Ye("IPFS upload",`Uploading ${Xe.name} to IPFS...`);const tt=await uploadFileToIPFSProxy(Xe);return Ke&&Je(),tt}const PROPOSAL_KINDS={text:"Text proposal",transferTez:"Transfer tez proposal",transferToken:"Transfer token proposal",lambdaFunction:"Lambda function proposal"};function SubmitDaoProposals(){const[Xe,Ke]=reactExports.useState("text"),[Ye]=useStorage(DAO_GOVERNANCE_CONTRACT),[Je]=useDaoGovernanceParameters(Ye),[,tt]=useDaoProposals(Ye),st=useUserStore(lt=>lt.address),[rt,it]=useDaoTokenBalance(st);if(!Je)return jsxRuntimeExports.jsx(LoadingDaoMessage,{});const at=Je[Ye.gp_counter-1].escrow_amount/DAO_TOKEN_DECIMALS;return jsxRuntimeExports.jsxs("section",{className:styles$s.section,children:[jsxRuntimeExports.jsx("h1",{className:styles$s.section_title,children:"Submit a new DAO proposal"}),rt===0?jsxRuntimeExports.jsx("p",{children:"Only DAO members can create proposals."}):rt<at?jsxRuntimeExports.jsxs("p",{children:["A minimum of ",at," TEIA tokens are needed to create proposals."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Select,{alt:"proposal form selection",value:{value:Xe,label:PROPOSAL_KINDS[Xe]},onChange:lt=>Ke(lt.value),options:Object.entries(PROPOSAL_KINDS).map(([lt,ut])=>({value:lt,label:ut})),children:jsxRuntimeExports.jsx(Line,{})}),jsxRuntimeExports.jsx(ProposalForm,{kind:Xe,callback:()=>{tt(),it()}})]})]})}function ProposalForm({kind:Xe,callback:Ke}){switch(Xe){case"text":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{children:["Use this form to create a DAO proposal for Teia. DAO proposals should primarily be used for significant decisions for the LLC and must be both practically and legally viable. For polling and smaller suggestions, please use the"," ",jsxRuntimeExports.jsx("a",{href:"https://teia.art/polls",children:"Community poll tool"})]}),jsxRuntimeExports.jsx("p",{children:"This proposal has no direct consequences on the blockchain. However, if accepted and executed, it should trigger some off-chain actions by one of the Teia DAO members (e.g. change a website UI, decide on a dog name, buy bread at the bakery). The proposal description will be stored in IPFS for archival purposes."}),jsxRuntimeExports.jsx(TextProposalForm,{callback:Ke})]});case"transferTez":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{children:"Use this form to create a proposal that, if accepted, will transfer the specified amount of XTZ from the DAO treasury to a list of Tezos addresses. The proposal description will be stored in IPFS for archival purposes."}),jsxRuntimeExports.jsx(TransferTezProposalForm,{callback:Ke})]});case"transferToken":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{children:"Use this form to create a proposal that, if accepted, it will transfer the specified amount of token editions from the DAO treasury to a list of Tezos addresses. The proposal description will be stored in IPFS for archival purposes."}),jsxRuntimeExports.jsx(TransferTokenProposalForm,{callback:Ke})]});case"lambdaFunction":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{children:"Use this form to create a proposal that, if accepted, will execute some smart contract code stored in a Michelson lambda function. The proposal description will be stored in IPFS for archival purposes."}),jsxRuntimeExports.jsx("p",{children:"This proposal could be used to administer other smart contracts of which the DAO is the administrator (e.g. to update the Teia marketplace fees), or to execute entry points from other contracts (e.g. swap or collect a token, vote in another DAO / multisig)."}),jsxRuntimeExports.jsx("p",{children:"Warning: Executing arbitrary smart contract code could compromise the DAO or have unexpected consequences. The lambda function code should have been revised by some trusted smart contract expert before the proposal is accepted and executed."}),jsxRuntimeExports.jsx(LambdaFunctionProposalForm,{callback:Ke})]});default:return}}function CommonProposalFields({title:Xe,setTitle:Ke,descriptionIpfsCid:Ye,setDescriptionIpfsCid:Je}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SimpleInput,{type:"text",label:"Proposal title",placeholder:"Write a meaningful title for your proposal here",maxlength:"500",value:Xe,onChange:Ke,className:styles$s.proposal_form_field,children:jsxRuntimeExports.jsx(Line,{})}),jsxRuntimeExports.jsx(IpfsUploader,{label:"Proposal description",placeholder:"Select the file with the proposal description",value:Ye,onChange:Je,className:styles$s.proposal_form_field,children:jsxRuntimeExports.jsx(Line,{})})]})}function TextProposalForm({callback:Xe}){const[Ke,Ye]=reactExports.useState(""),[Je,tt]=reactExports.useState(""),st=useDaoStore(it=>it.createTextProposal),rt=it=>{it.preventDefault(),st(Ke,Je,Xe)};return jsxRuntimeExports.jsxs("form",{className:styles$s.proposal_form,onSubmit:rt,children:[jsxRuntimeExports.jsx("div",{className:styles$s.proposal_form_fields,children:jsxRuntimeExports.jsx(CommonProposalFields,{title:Ke,setTitle:Ye,descriptionIpfsCid:Je,setDescriptionIpfsCid:tt})}),jsxRuntimeExports.jsx(Button,{shadow_box:!0,fit:!0,children:"Submit proposal"})]})}function TransferTezProposalForm({callback:Xe}){const[Ke,Ye]=reactExports.useState(""),[Je,tt]=reactExports.useState(""),[st,rt]=reactExports.useState([{amount:"",destination:""}]),it=useDaoStore(at=>at.createTransferMutezProposal),ot=at=>{at.preventDefault(),it(Ke,Je,st.map(lt=>({amount:lt.amount*1e6,destination:lt.destination})),Xe)};return jsxRuntimeExports.jsxs("form",{className:styles$s.proposal_form,onSubmit:ot,children:[jsxRuntimeExports.jsxs("div",{className:styles$s.proposal_form_fields,children:[jsxRuntimeExports.jsx(CommonProposalFields,{title:Ke,setTitle:Ye,descriptionIpfsCid:Je,setDescriptionIpfsCid:tt}),jsxRuntimeExports.jsx(TransferFields,{labels:{amount:"Amount to transfer in tez",destination:"Destination address"},transfers:st,onChange:rt,step:"0.000001",className:styles$s.proposal_form_field,children:jsxRuntimeExports.jsx(Line,{})})]}),jsxRuntimeExports.jsx(Button,{shadow_box:!0,fit:!0,children:"Submit proposal"})]})}function TransferTokenProposalForm({callback:Xe}){const[Ke,Ye]=reactExports.useState(""),[Je,tt]=reactExports.useState(""),[st,rt]=reactExports.useState(""),[it,ot]=reactExports.useState(""),[at,lt]=reactExports.useState([{amount:"",destination:""}]),ut=useDaoStore(pt=>pt.createTransferTokenProposal),ht=pt=>{const ft=TOKENS.find(xt=>xt.fa2===st);pt.preventDefault(),ut(Ke,Je,st,it,at.map(xt=>({amount:ft?xt.amount*ft.decimals:xt.amount,destination:xt.destination})),Xe)};return jsxRuntimeExports.jsxs("form",{className:styles$s.proposal_form,onSubmit:ht,children:[jsxRuntimeExports.jsxs("div",{className:styles$s.proposal_form_fields,children:[jsxRuntimeExports.jsx(CommonProposalFields,{title:Ke,setTitle:Ye,descriptionIpfsCid:Je,setDescriptionIpfsCid:tt}),jsxRuntimeExports.jsx(SimpleInput,{type:"text",label:"Token contract address",placeholder:"KT...",minlenght:"36",maxlength:"36",value:st,onChange:rt,className:styles$s.proposal_form_field,children:jsxRuntimeExports.jsx(Line,{})}),jsxRuntimeExports.jsx(SimpleInput,{type:"number",label:"Token id",placeholder:"0",min:"0",step:"1",value:it,onChange:ot,className:styles$s.proposal_form_field,children:jsxRuntimeExports.jsx(Line,{})}),jsxRuntimeExports.jsx(TransferFields,{labels:{amount:"Token editions",destination:"Destination address"},transfers:at,onChange:lt,step:"1",className:styles$s.proposal_form_field,children:jsxRuntimeExports.jsx(Line,{})})]}),jsxRuntimeExports.jsx(Button,{shadow_box:!0,fit:!0,children:"Submit proposal"})]})}function LambdaFunctionProposalForm({callback:Xe}){const[Ke,Ye]=reactExports.useState(""),[Je,tt]=reactExports.useState(""),[st,rt]=reactExports.useState(""),it=useDaoStore(at=>at.createLambdaFunctionProposal),ot=at=>{at.preventDefault(),it(Ke,Je,st,Xe)};return jsxRuntimeExports.jsxs("form",{className:styles$s.proposal_form,onSubmit:ot,children:[jsxRuntimeExports.jsxs("div",{className:styles$s.proposal_form_fields,children:[jsxRuntimeExports.jsx(CommonProposalFields,{title:Ke,setTitle:Ye,descriptionIpfsCid:Je,setDescriptionIpfsCid:tt}),jsxRuntimeExports.jsx(Textarea$1,{name:"lambdaFunctionCode",label:"Lambda function code in Micheline format",placeholder:"Write here the lambda function code",maxLength:"1000",value:st,onChange:at=>rt(at.target.value),className:styles$s.proposal_form_field,children:jsxRuntimeExports.jsx(Line,{})})]}),jsxRuntimeExports.jsx(Button,{shadow_box:!0,fit:!0,children:"Submit proposal"})]})}const container$9="_container_eelfx_216",headline="_headline_eelfx_221",loading_containter="_loading_containter_eelfx_225",section$3="_section_eelfx_232",poll="_poll_eelfx_242",poll_id="_poll_id_eelfx_252",poll_question="_poll_question_eelfx_259",poll_options="_poll_options_eelfx_263",poll_option="_poll_option_eelfx_263",winner_option="_winner_option_eelfx_287",poll_option_container="_poll_option_container_eelfx_295",user_vote="_user_vote_eelfx_299",poll_objkt_option="_poll_objkt_option_eelfx_303",styles$q={container:container$9,headline,loading_containter,section:section$3,poll,poll_id,poll_question,poll_options,poll_option,winner_option,poll_option_container,user_vote,poll_objkt_option};function LoadingPollsMessage({message:Xe}){return jsxRuntimeExports.jsx("div",{className:styles$q.loading_containter,children:jsxRuntimeExports.jsx(Loading,{message:Xe??"Loading polls information"})})}const TABS$3=[{title:"Polls",to:""},{title:"Create",to:"create"}];function TeiaPolls(){const[Xe]=useStorage(POLLS_CONTRACT),[Ke]=usePolls(Xe);return jsxRuntimeExports.jsx(Page,{title:"Teia Polls",children:jsxRuntimeExports.jsxs("div",{className:styles$q.container,children:[jsxRuntimeExports.jsx("h1",{className:styles$q.headline,children:"Teia Community Polls"}),Ke?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Tabs,{tabs:TABS$3}),jsxRuntimeExports.jsx(Outlet,{})]}):jsxRuntimeExports.jsx(LoadingPollsMessage,{})]})})}const usePollsStore=create$2()(subscribeWithSelector(persist((Xe,Ke)=>({votePoll:async(Ye,Je,tt,st)=>{const rt=useUserStore.getState().handleOp,it=useModalStore.getState().showError,ot=useModalStore.getState().step,at="Vote teia poll";ot(at,"Waiting for confirmation",!0);try{const lt=await Tezos.wallet.at(POLLS_CONTRACT),ut={poll_id:parseInt(Ye),option:Je,max_checkpoints:tt},ht=lt.methodsObject.vote(ut),pt=await rt(ht,at);return st==null||st(),pt}catch(lt){it(at,lt)}},createPoll:async(Ye,Je,tt,st,rt,it)=>{const ot=useUserStore.getState().handleOp,at=useModalStore.getState().show,lt=useModalStore.getState().showError,ut=useModalStore.getState().step,ht="Create teia poll";if(!Ye||Ye.length<10){at(ht,"The poll question must be at least 10 characters long");return}if(rt.length<2){at(ht,"The poll should have at least 2 options to vote");return}ut(ht,"Waiting for confirmation",!0);try{const pt=await Tezos.wallet.at(POLLS_CONTRACT),ft={question:char2Bytes(Ye),description:Je===""?char2Bytes(""):char2Bytes(`ipfs://${Je}`),options:MichelsonMap.fromLiteral(Object.fromEntries(rt.map((At,Et)=>[Et,char2Bytes(At)]))),vote_weight_method:{[tt]:[["unit"]]},vote_period:st},xt=pt.methodsObject.create_poll(ft),vt=await ot(xt,ht);return it==null||it(),vt}catch(pt){lt(ht,pt)}}}),{name:"polls",storage:createJSONStorage(()=>localStorage)})));function Poll({pollId:Xe}){var ft;const[Ke]=useStorage(POLLS_CONTRACT),[Ye,Je]=usePolls(Ke),tt=useUserStore(xt=>xt.address),[st]=useDaoTokenBalance(tt),[rt,it]=useUserPollVotes(tt,Ke),[ot]=usePollsUsersAliases(tt,Ye);if(!Ye)return;const at=Ye[Xe],lt=parseInt(at.vote_period),ut=new Date(at.timestamp);ut.setDate(ut.getDate()+lt);const pt=new Date>ut;return at.id=Xe,at.voteExpirationTime=ut,at.voteFinished=pt,jsxRuntimeExports.jsxs("div",{className:styles$q.poll,children:[jsxRuntimeExports.jsxs("h3",{className:styles$q.poll_question,children:[jsxRuntimeExports.jsxs(Link,{"aria-label":`Poll ${Xe}`,to:`${PATH.POLL}/${Xe}`,className:styles$q.poll_id,children:["#",Xe]}),bytes2Char(at.question)]}),jsxRuntimeExports.jsx(PollDescription,{poll:at,aliases:ot}),jsxRuntimeExports.jsx(PollVotesSummary,{poll:at,userVotedOption:(ft=rt==null?void 0:rt[Xe])==null?void 0:ft.option,canVote:!pt&&st>0,callback:()=>{Je(),it()}})]})}function PollDescription({poll:Xe,aliases:Ke}){const Ye=Xe.description!==""?bytes2Char(Xe.description):"",Je=Ye.split("//")[1];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{children:["Created by"," ",jsxRuntimeExports.jsx(TeiaUserLink,{address:Xe.issuer,alias:Ke==null?void 0:Ke[Xe.issuer],shorten:!0})," ","on ",getWordDate(Xe.timestamp),"."]}),!Xe.voteFinished&&jsxRuntimeExports.jsxs("p",{children:["Voting period ends on ",getWordDate(Xe.voteExpirationTime),"."]}),Ye!==""&&jsxRuntimeExports.jsxs("p",{children:["Description: ",Je?jsxRuntimeExports.jsx(IpfsLink,{cid:Je,children:"IPFS"}):Ye]}),jsxRuntimeExports.jsxs("p",{children:["Vote weight method:"," ",Object.keys(Xe.vote_weight_method)[0].toUpperCase()]})]})}function PollVotesSummary({poll:Xe,userVotedOption:Ke,canVote:Ye,callback:Je}){const[tt,st]=reactExports.useState(!1),rt=usePollsStore(ut=>ut.votePoll),it=Object.values(Xe.votes_count).map(ut=>parseInt(ut)),ot=it.reduce((ut,ht)=>ut+ht,0),at=Math.max(...it),lt=Xe.vote_weight_method.linear?DAO_TOKEN_DECIMALS:Xe.vote_weight_method.quadratic?Math.pow(DAO_TOKEN_DECIMALS,.5):1;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{children:"Options to vote:"}),jsxRuntimeExports.jsx("ul",{className:styles$q.poll_options,children:Object.entries(Xe.votes_count).map(([ut,ht])=>jsxRuntimeExports.jsxs("li",{className:`${styles$q.poll_option} ${parseInt(ht)===at&&at!==0?styles$q.winner_option:""}`,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>st(!tt),children:[Ke===ut?jsxRuntimeExports.jsxs("div",{className:styles$q.poll_option_container,children:[jsxRuntimeExports.jsx("span",{className:styles$q.user_vote}),jsxRuntimeExports.jsx(PollOption,{option:bytes2Char(Xe.options[ut])}),jsxRuntimeExports.jsx("span",{className:styles$q.user_vote,children:"✔"})]}):jsxRuntimeExports.jsx(PollOption,{option:bytes2Char(Xe.options[ut])}),jsxRuntimeExports.jsx("div",{children:tt?`${ot===0?0:Math.round(100*ht/ot)}%`:`${Math.round(ht/lt)} vote${parseInt(ht)!==lt?"s":""}`})]}),Ye&&jsxRuntimeExports.jsx(Button,{onClick:()=>rt(Xe.id,ut,null,Je),shadow_box:!0,fit:!0,children:"Select"})]},ut))})]})}function PollOption({option:Xe}){return Xe.indexOf("http")>=0?jsxRuntimeExports.jsx(DefaultLink,{href:Xe.slice(Xe.indexOf("http")),children:Xe.slice(0,Xe.indexOf("http"))||void 0}):Xe.indexOf("ipfs://")>=0?jsxRuntimeExports.jsx(IpfsLink,{cid:Xe.split("ipfs://")[1]}):Xe.indexOf("OBJKT#")===0?jsxRuntimeExports.jsx(ObjktOption,{id:Xe.split("#")[1]}):jsxRuntimeExports.jsx("span",{children:Xe})}function ObjktOption({id:Xe}){const[Ke]=useObjkt(Xe);return Ke?jsxRuntimeExports.jsxs("div",{className:styles$q.poll_objkt_option,children:[jsxRuntimeExports.jsx(RenderMediaType,{nft:Ke}),jsxRuntimeExports.jsx("span",{children:`OBJKT#${Xe}`})]}):jsxRuntimeExports.jsx("span",{children:`OBJKT#${Xe}`})}function PollDisplay(){const[Xe]=useStorage(POLLS_CONTRACT),[Ke]=usePolls(Xe),{id:Ye}=useParams();return Ke&&!Ke[Ye]?jsxRuntimeExports.jsx(RootErrorBoundary,{title:"Wrong poll id",msg:`The last Teia poll id is ${Xe.counter-1}`}):jsxRuntimeExports.jsx(Page,{title:`Teia poll #${Ye}`,children:jsxRuntimeExports.jsxs("div",{className:styles$q.container,children:[jsxRuntimeExports.jsx("h1",{className:styles$q.headline,children:"Teia poll"}),Ke?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("section",{className:styles$q.section,children:jsxRuntimeExports.jsx(Poll,{pollId:Ye})}),jsxRuntimeExports.jsx(PaginationButtons,{path:PATH.POLL,current:parseInt(Ye),min:0,max:Xe.counter-1})]}):jsxRuntimeExports.jsx(LoadingPollsMessage,{message:"Loading poll information"})]})})}const section$2="_section_1n27w_1",section_title="_section_title_1n27w_11",poll_form="_poll_form_1n27w_15",poll_form_fields="_poll_form_fields_1n27w_19",poll_form_field="_poll_form_field_1n27w_19",styles$p={section:section$2,section_title,poll_form,poll_form_fields,poll_form_field},POLL_STATUS_OPTIONS={active:"Active polls",finished:"Finished polls"};function Polls(){const[Xe,Ke]=reactExports.useState("active"),[Ye]=useStorage(POLLS_CONTRACT),[Je]=usePolls(Ye);if(!Je)return jsxRuntimeExports.jsx(LoadingPollsMessage,{});const tt=Object.fromEntries(Object.keys(POLL_STATUS_OPTIONS).map(rt=>[rt,[]])),st=new Date;for(const rt of Object.keys(Je).reverse()){const it=Je[rt],ot=parseInt(it.vote_period),at=new Date(it.timestamp);at.setDate(at.getDate()+ot),st>at?tt.finished.push(rt):tt.active.push(rt)}return jsxRuntimeExports.jsxs("section",{className:styles$p.section,children:[jsxRuntimeExports.jsx("h1",{className:styles$p.section_title,children:"Teia Polls"}),jsxRuntimeExports.jsx("p",{children:"TEIA's polling system is a community tool that any TEIA member can use for any purpose - it is often used for feature requests, testing interest or getting feedback for ideas (artistic or technical), measuring community sentiment around certain issues, or just for fun."}),jsxRuntimeExports.jsxs("p",{children:["To start or participate in a poll, the wallet sync'd must have a non-zero amount of TEIA tokens, which is a on the Tezos (XTZ) chain. If you're interested in acquiring $TEIA, you can read the guide"," ",jsxRuntimeExports.jsx("a",{href:"/dao",children:"here."})]}),jsxRuntimeExports.jsx("p",{children:"Use Teia DAO tokens to vote, only one vote per person will be counted."}),jsxRuntimeExports.jsx("p",{children:"The wallet will only be eligible to vote if it had $TEIA at the time of poll creation."}),jsxRuntimeExports.jsxs("p",{children:["To discuss the details of polls or proposals, you can use"," ",jsxRuntimeExports.jsx("a",{href:"https://discourse.teia.art/",target:"_blank",rel:"noreferrer",children:"this forum"})," ",'to start a new thread with the poll number and title as the reference. (Note that this is a third-party service and will not get recorded "officially" on-chain.)']}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("a",{href:"https://quipuswap.com/swap/tez-KT1QrtA753MSv8VGxkDrKKyJniG5JtuHHbtV_0",target:"_blank",rel:"noreferrer",children:"Convert XTZ to TEIA on Quipuswap (Decentralized Exchange)"})}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsx(Select,{alt:"poll group selection",value:{value:Xe,label:`${POLL_STATUS_OPTIONS[Xe]} (${tt[Xe].length})`},onChange:rt=>Ke(rt.value),options:Object.entries(POLL_STATUS_OPTIONS).map(([rt,it])=>({value:rt,label:`${it} (${tt[rt].length})`})),children:jsxRuntimeExports.jsx(Line,{})}),jsxRuntimeExports.jsx(PollGroup,{status:Xe,pollIds:tt[Xe]})]})}function PollGroup({status:Xe,pollIds:Ke}){const Ye=(()=>{switch(Xe){case"active":return Ke.length>0?"These polls are still active. You can modify your previous vote if you want.":"There are no active polls to vote at the moment.";case"finished":return"These polls are closed and cannot be voted anymore.";default:return""}})();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{children:Ye}),Ke.length>0&&jsxRuntimeExports.jsx("ul",{children:Ke.map((Je,tt)=>jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx(Poll,{pollId:Je}),tt<Ke.length-1&&jsxRuntimeExports.jsx(Line,{})]},Je))})]})}function CreatePolls(){const[Xe]=useStorage(POLLS_CONTRACT),[,Ke]=usePolls(Xe),Ye=useUserStore(tt=>tt.address),[Je]=useDaoTokenBalance(Ye);return jsxRuntimeExports.jsxs("section",{className:styles$p.section,children:[jsxRuntimeExports.jsx("h1",{className:styles$p.section_title,children:"Create a new poll"}),Je===0?jsxRuntimeExports.jsx("p",{children:"Only DAO members can create new polls."}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{children:"Use this form to create new Teia polls."}),jsxRuntimeExports.jsx(PollForm,{callback:Ke})]})]})}function PollForm({callback:Xe}){const[Ke,Ye]=reactExports.useState(""),[Je,tt]=reactExports.useState(""),[st,rt]=reactExports.useState("equal"),[it,ot]=reactExports.useState(""),[at,lt]=reactExports.useState(["","",""]),ut=usePollsStore(vt=>vt.createPoll),ht={equal:"Equal: one wallet, one vote",linear:"Linear: proportional to the amount of TEIA tokens",quadratic:"Quadratic: proportional to the square root of the amount of TEIA tokens"},pt=(vt,At)=>{const Et=at.slice();Et[vt]=At,lt(Et)},ft=(vt,At)=>{vt.preventDefault();const Et=at.slice();At?Et.push(""):Et.length>1&&Et.pop(),lt(Et)},xt=vt=>{vt.preventDefault();const At=at.map(Et=>Et.trim()).filter(Et=>Et!=="");ut(Ke,Je,st,it,At,Xe)};return jsxRuntimeExports.jsxs("form",{className:styles$p.poll_form,onSubmit:xt,children:[jsxRuntimeExports.jsxs("div",{className:styles$p.poll_form_fields,children:[jsxRuntimeExports.jsx(SimpleInput,{type:"text",label:"Poll question",placeholder:"Write here the question you want to ask",minlength:"10",maxlength:"500",value:Ke,onChange:Ye,className:styles$p.poll_form_field,children:jsxRuntimeExports.jsx(Line,{})}),jsxRuntimeExports.jsx(IpfsUploader,{label:"Poll description (optional)",placeholder:"Select the file with the poll description",value:Je,onChange:tt,className:styles$p.poll_form_field,children:jsxRuntimeExports.jsx(Line,{})}),jsxRuntimeExports.jsx(Select,{label:"Method to use to calculate the vote weight",alt:"Vote weight method selection",value:{value:st,label:ht[st]},onChange:vt=>rt(vt.value),options:Object.entries(ht).map(([vt,At])=>({value:vt,label:At})),children:jsxRuntimeExports.jsx(Line,{})}),jsxRuntimeExports.jsx(SimpleInput,{type:"number",label:"Poll duration in days",placeholder:"1",min:"1",max:"30",step:"1",value:it,onChange:ot,className:styles$p.poll_form_field,children:jsxRuntimeExports.jsx(Line,{})}),jsxRuntimeExports.jsxs("div",{children:[at.map((vt,At)=>jsxRuntimeExports.jsx(SimpleInput,{type:"text",label:`Option ${At+1}`,placeholder:"A possible option to vote",minLength:"1",value:vt,onChange:Et=>pt(At,Et),className:styles$p.poll_form_field,children:jsxRuntimeExports.jsx(Line,{})},At)),jsxRuntimeExports.jsx(IncrementButtons,{onClick:ft})]})]}),jsxRuntimeExports.jsx(Button,{shadow_box:!0,fit:!0,children:"Create poll"})]})}const faq__container="_faq__container_h54uh_1",faq__title="_faq__title_h54uh_36",faq__outer__container="_faq__outer__container_h54uh_42",styles$o={faq__container,faq__title,faq__outer__container},FAQ=()=>{const Xe=({text:Ke,answer:Ye})=>{const[Je,tt]=reactExports.useState(!1),st=()=>{tt(!Je)};return jsxRuntimeExports.jsxs("li",{className:styles$o.buttons,children:[jsxRuntimeExports.jsx(Button,{onClick:st,children:Ke}),Je&&jsxRuntimeExports.jsx("div",{className:styles$o.faq__answer,dangerouslySetInnerHTML:{__html:Ye}})]})};return jsxRuntimeExports.jsxs(Page,{title:"faq",large:!0,children:[jsxRuntimeExports.jsxs("div",{className:styles$o.faq__outer__container,children:[jsxRuntimeExports.jsx("h1",{className:styles$o.faq__title,children:"Getting Started with the TEIA Community"}),jsxRuntimeExports.jsxs("ul",{className:styles$o.faq__container,children:[jsxRuntimeExports.jsx(Xe,{text:"How do I Make a Wallet?",answer:`
<div class="markdown-body">
  <br />
  <p>First, you will need a Tezos wallet and Tezos funds.</p>
  <br />
  <div class="markdown-heading">
    <h2 class="heading-element">What is Tezos?</h2>
  </div>
  <p>Tezos (XTZ) is a liquid proof-of-stake cryptocurrency (LPoS). You can read more about it <a href="https://en.wikipedia.org/wiki/Tezos" rel="nofollow">on the Wikipedia Article about Tezos</a>.</p>
  <br />
  <div class="markdown-heading">
    <h2 class="heading-element">Recommended Wallet Apps</h2>
  </div>
  <ul>
    <li><a href="https://templewallet.com/" rel="nofollow">Temple wallet</a> which is a browser extension similar to Metamask, also being able to connect to Ledger devices.</li>
    <li><a href="https://wallet.kukai.app/" rel="nofollow">Kukai wallet</a>, which is a browser wallet, being possible to connect making use of Direct Auth using Twitter credentials. Kukai also works on smartphones.</li>
  </ul>
  <br />
  <div class="markdown-heading">
    <h2 class="heading-element">Where to Buy Tezos</h2>
  </div>
  <p>Minting on Teia only costs ~0.05 tezos. You can buy some tezos on an exchange site like Binance or Kraken. However, the exchange service might be limited depending on your country and location.</p>
  <br />
  <div class="markdown-heading">
    <h1 class="heading-element">The Teia Fountain</h1>
  </div>
  <br />
  <div class="markdown-heading">
    <h3 class="heading-element">⛲ Applying as an Artist</h3>
  </div>
  <p>Are you an artist who needs tez but can't get it? You can request a volunteer from the community to sponsor you in the #fountain channel on <a href="https://discord.gg/wGeXs4Z7wT" rel="nofollow">Discord</a>.</p>
  <br />
  <p>Please fill out this google form:</p>
  <ul>
    <li><a href="https://docs.google.com/forms/d/e/1FAIpQLSeT1Bm95K1ASVPMv2F0864COcKmm_-FGKortlEHMtMMLfNFZQ/viewform" rel="nofollow">https://docs.google.com/forms/d/e/1FAIpQLSeT1Bm95K1ASVPMv2F0864COcKmm_-FGKortlEHMtMMLfNFZQ/viewform</a></li>
    <li>After filling out the form, please send us a message in the #fountain channel on the Discord saying that you filled out the form.</li>
  </ul>
  <br />
  <div class="markdown-heading">
    <h3 class="heading-element">⛲ Volunteering as a Sponsor</h3>
  </div>
  <p>If you make some sales and would like to support other new artists you can send XTZ donations to the <a href="https://github.com/teia-community/teia-docs/wiki/Teia-Multisig-wallets">fountain multisig address</a> <strong>KT1EsvmkijLKPQmcJMbjDeKRXdwky1LWvwpG</strong></p>
  <br />
  <div class="markdown-heading">
    <h2 class="heading-element">Common Wallet Errors</h2>
  </div>
  <br />
  <p><strong>account doesn't exist error from tzkt.io</strong></p>
  <p>If your account on tzkt.io shows this, don't worry. It just means you don't have any transactions yet in your wallet. Once you receive some tezos it should go away.</p>
  <br />
  <p><strong>Prevalidation error in the temple wallet</strong></p>
  <p>This means you should refresh the page. Wait a couple of seconds for the transaction to go through and you will get the "applied" status.</p>
</div>
`}),jsxRuntimeExports.jsx(Xe,{text:"How do I Mint?",answer:`
<div class="markdown-body">
  <br />
  <div class="markdown-heading">
    <h3 class="heading-element"><strong>mint</strong></h3>
  </div>
  <br />
  <p>1: <em>(verb)</em> to create an OBJKT (NFT)</p>
  <br />
  <hr>
  <div class="markdown-heading">
    <h2 class="heading-element">Important Rules and Considerations</h2>
  </div>
  <p>If you mint NFTs on Teia, we expect you to respect the <a href="https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions">Core Values</a> and especially note the detail on <a href="https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#about-copyminting">copyminting</a>.</p>
  <br />
  <p><em><strong>Copyminting</strong> is the act of taking another's work and minting it as your own. It also includes the act of minting the same work twice, either on the same or separate platforms/blockchains. Your account will get restricted if you do this.</em></p>
  <br />
  <p><strong>Please note that minting the same media file twice, even accidentally, may lead to an account restriction! If you made a mistake and want to re-mint your OBJKT, make sure to burn the old one first!</strong> <a href="https://github.com/teia-community/teia-docs/wiki/How-to-burn-%F0%9F%94%A5">(How to burn)</a></p>
  <br />
  <p><strong>If your account gets restricted, check <a href="https://objkt.com/asset/KT1XcFQv9EB2hoT484Cv58S2MvyMGX4C9TJq/1" rel="nofollow">how to unrestrict</a> it.</strong></p>
  <br />
  <div class="markdown-heading">
    <h2 class="heading-element">Step-by-Step Guide</h2>
  </div>
  <p>Minting is the operation of creating an NFT - at this point, you define the quantity of the NFT and information about it such as title and description. Once created, you will choose the number you want to make available and a price - this is a Swap operation.</p>
  <br />
  <p>It might be useful to prepare a text file with all the information you will need for minting - if the minting operation is interrupted, you might lose what you typed in. OGs know from experience how frustrating it can be, especially if you wrote a classy and long description without saving a copy.</p>
  <br />
  <ol>
    <li>
      <p>You should have already created a wallet (we recommend <a href="https://templewallet.com/" rel="nofollow">Temple</a> or <a href="https://wallet.kukai.app/" rel="nofollow">Kukai</a>). The wallet needs to have enough funds to mint. Click on “Sync". Your browser will show a pop-up asking you to sync with your wallet.</p>
      <br />
      <p><img src="https://camo.githubusercontent.com/06ef047ef421441b995cefa7ab335c59ab81bea9868a2bb395c150287a21b3c5/68747470733a2f2f692e6962622e636f2f323543574c6b332f73796e632e706e67" alt="sync button"></p>
      <p><img src="https://user-images.githubusercontent.com/6487972/226333131-7487d30a-a622-4e57-b037-1d442fe2597f.jpg" alt="beacon wallet popup"></p>
    </li>
    <li>
      <p>Approve the sync with your wallet.</p>
    </li>
    <br />
    <li>
      <p>Click the "Mint" link in the hamburger drop-down menu.</p>
      <br />
      <p><img src="https://user-images.githubusercontent.com/6487972/226333939-3dc61a26-73a1-4b8a-b4b4-d164f530e719.jpg" alt="minting page white"></p>
    </li>
    <br />
    <li>
      <p>Fill out the information for your OBJKT. Because all this information is stored on the Tezos blockchain, the edition size (quantity) you set is final; you can't add (although you can reduce by burning). Title, descriptions, tags, and royalties are also final. You price the OBJKT (a Swap operation) after the minting. You can upload display images/gifs depending on the media type (e.g., for mpgs).</p>
      <p>You can also select a license (default is None (all rights reserved)) and a language.</p>
    </li>
  </ol>
  <br />
  <div class="markdown-heading">
    <h3 class="heading-element"><strong>Text Mints on Teia</strong></h3>
  </div>
  <p>The Teia NFT marketplace now supports text mints of mimetype: text/plain. This allows for stories, poems, ASCII, and similar types of text-based art. The token's content is stored in IPFS.</p>
  <br />
  <div class="markdown-heading">
    <h3 class="heading-element"><strong>How to Mint Text</strong></h3>
  </div>
  <ol>
    <li>A new field on the minting page: "This is a text mint." Check this box.</li>
    <li>The text mint input will automatically hide and replace the description box.</li>
    <li>You will see the following fields on the minting form:
      <ul>
        <li>A checkbox for "Monospace Font Required."</li>
        <li>There is a text area labeled "Typed Art Input." Depending on the monospace font required checkbox value, the text area renders the monospace (Iosevka font) or non-monospace (Source Sans Pro font).</li>
      </ul>
    </li>
    <li>As you type text into the text area, a rendered preview of that text is displayed below it.</li>
    <li>The preview page is displayed once you click the "Submit" button.</li>
  </ol>
  <br />
  <p><strong>Note:</strong> The "monospace" tag is automatically added. The cover and thumbnail images are automatically generated based on the text input and the font selected. The description will also automatically be replaced by the text mint input.</p>
  <br />
  <p>You can view an example: <a href="https://teia.art/objkt/850488" rel="nofollow">OBJKT 850488</a></p>
  <br />
  <p>Source Sans Pro was selected for text mints as it's the default font (non-mono) on Objkt.com. This ensures text is encoded correctly and displayed as intended on Objkt.com and Teia.art. Currently, it seems that Objkt.com does not provide much monospace support for text mints, and a feature request has been raised here: <a href="https://roadmap.objkt.com/b/software-feature-request/use-a-monospaced-font-for-text-tokens/" rel="nofollow">https://roadmap.objkt.com/b/software-feature-request/use-a-monospaced-font-for-text-tokens/</a></p>
  </div>
`}),jsxRuntimeExports.jsx(Xe,{text:"How do I Edit My Profile?",answer:`
<div class="markdown-body">
  <br />
  <div class="markdown-heading">
    <h2 class="heading-element">Settings &gt; Config</h2>
  </div>
  <br />
  <p>Profile information is useful in a number of ways. Most importantly, it can identify you to your potential collectors. Your profile details are saved with the Subjkt contract. The Profile page is where you update these, and it also links to the tzprofiles site so you can add that information.</p>
  <br />
  <p>To edit your profile, make sure you've synced your wallet with Teia. Click the menu icon or go to: <a href="https://www.teia.art/subjkt" rel="nofollow">https://www.teia.art/subjkt</a></p>
  <br />
  <p><img src="https://user-images.githubusercontent.com/6487972/222891286-6610bcdc-d99c-41cf-963e-c7c0c7fea7f8.jpg" alt=""></p>
  <br />
  <p>.. then click on the <strong>Profile</strong> option</p>
  <br />
  <p><img src="https://user-images.githubusercontent.com/6487972/225549393-810d6ccb-e4b2-4aba-bdca-b38ec44a1b7d.jpg" alt="full menu showing - profile highlighted"></p>
  <br />
  <p>Add a username, description, and choose an image for your profile pic. The profile pic may take a few moments to show up. Because it shows with a circular crop, you may have to adjust your initial picture and add it again.</p>
  <br />
  <p><strong>IMPORTANT</strong> <em>When configuring your username, please don't use any special characters or spaces. It's also case-sensitive, so we recommend ALL LOWERCASE.</em></p>
  <br />
  <p><img src="https://user-images.githubusercontent.com/6487972/222891328-88b309e9-d814-4d9a-8253-1f1f3a3fc3a9.jpg" alt="profile page - fields highlighted"></p>
  <br />
  <p>When you click Save Profile, your wallet will open so you can complete a transaction which saves the profile information.</p>
  <br />
  <p><img src="https://user-images.githubusercontent.com/6487972/225555404-8c9e635b-0492-4e90-bbcb-5fcc781eac4e.jpg" alt="profile and tzprofile copy"></p>
  <br />
  </div>
`}),jsxRuntimeExports.jsx(Xe,{text:"How do I Add/Change the Price of My OBJKT?",answer:`
<div class="markdown-body">
  <br />
  <h1>How to Swap 🔃</h1>
  <br />
  <p>1: <em>(noun)</em> an act, instance, or process of exchanging one thing for another</p>
  <p>2: <em>(verb)</em> to set a price for your OBJKT</p>
  <br />
  <p>If you have just minted some OBJKTs or you have unsold OBJKTs, it's time to Swap them - that means pricing some or all, for collectors to buy.</p>
  <br />            
  <p><strong>Note</strong> - you can't swap OBJKTs that are already swapped, have already been collected, or if you don't have enough tez to pay the fees. You won't see Swap, Burn, Transfer options or be able to cancel swaps if you haven't synced the account that owns them.</p>
  <br />
  <p>You don't need to swap all of the OBJKTs you own. Many artists like to keep one or two, either as 'artist proofs' or for gifting etc.</p>
  <br />
  <p>Pricing is a tricky area that can be based on how big the edition size is, how well known and liked you are for your artwork, and how well you market it. Another consideration is how much <em>you</em> want for the work, not considering collectors and the current market. Pricing consistently and with some thought will influence some collectors.</p>
  <br />
  <p>If you're considering pricing very low (0.01 tez, for example) or free, consider the fact that bots or bottom-dwelling flippers may buy many (sometimes all). When collectors view the OBJKT history, they will see the churn of low price activity that such flippers create, and it can reflect badly on how responsible collectors will view both the work and you as an artist. You can give away manually or try to regulate flipper action by swapping in blocks at different times (this also helps collectors in different time zones).</p>
  <br />
  <h3>Step-by-Step Guide</h3>
  <ol>
    <li>
      <p>Click on your OBJKT's link to see the details. If you are synced to your wallet, you should see the "Swap" option next to History. (If you don’t see these options, then you have to sync your wallet again.)</p>
    </li>
    <li>
      <p>Click on Swap.</p>
    </li>
    <li>
      <p>Input how many OBJKTs out of your edition that you want to set for sale. For example, if you have <code>10</code> and you want to keep <code>1</code> and sell <code>9</code>, then input <code>9</code>. If you want to sell all of them, input <code>10</code>.</p>
    </li>
    <li>
      <p>Input how much each edition should cost in Tezos.</p>
    </li>
    <li>
      <p>Click the "swap" button. You will be prompted to approve the transaction in your wallet app.</p>
    </li>
    <li>
      <p>The user interface will update you on the transaction, or you can check in your wallet (look at 'activity' in Temple wallet). Once the transaction approves, your OBJKT/s are for sale to collectors. Go out and tell the Twitter world...</p>
    </li>
  </ol>
  <br />
  <h3>How Can I Track What I've Sold?</h3>
  <p>You can use the tools <a href="https://www.hictory.xyz/#" rel="nofollow">hictory</a> or <a href="https://hicdex.com/sold" rel="nofollow">hicdex</a>: Just enter your wallet address and see your last sales in chronological order!</p>
  <br />
  <h3>How Can I Get Notifications for When I Sell Something?</h3>
  <p>You can use the Cryptonoises bot <a href="https://cryptonoises.com/" target="_blank" rel="nofollow">[https://cryptonoises.com/]</a> developed by Andrii Bakulin. It works with both Telegram and Discord to get a notification every time something sells.</p>
</div>
`}),jsxRuntimeExports.jsx(Xe,{text:"How do I Burn My OBJKT?",answer:`
<div class="markdown-body">
  <br />
  <p>1: <em>(verb)</em> to "delete" your OBJKT</p>
  <br />
  <p>Transactions on the blockchain are irreversible, so you can't "delete" them. The "burn" button sends the OBJKT to the <a href="https://tzkt.io/tz1burnburnburnburnburnburnburjAYjjX/operations/" rel="nofollow">burn address</a> - tz1burnburnburnburnburnburnburjAYjjX, or you can send it yourself using your wallet app. The burn address is an open address that nobody owns a key to, so objkts are never retrievable.</p>
  <p>If you are burning the objkt because you made a mistake and want to remint it, make sure there are no other owners - you can only burn those you own, so you will need to ask those collectors to burn those objkts before you can remint.</p>
  <br />
  <h3>To Burn an OBJKT:</h3>
  <ol>
    <li>
      <p>Make sure your wallet app is synced with Teia.</p>
    </li>
    <li>
      <p>Make sure you cancel the swap of the OBJKT so it can be available in your wallet when you are ready to burn it. The user interface will show you how many you have available for burning. Think very hard about how many you'll burn - you can't undo this.</p>
      <br />
      <p><img src="https://user-images.githubusercontent.com/6487972/227187937-600b66ec-627b-428f-8e47-cd8f1926c385.jpg" alt="burn screen"></p>
    </li>
    <li>
      <p>Press the burn button. Your wallet app will prompt you to confirm the transaction. Once the transaction completes, your wallet app will show the OBJKT as transferred to the burn address. The History tab will show a Burn transaction (and the fact that it is a transfer from your wallet to the burn wallet).</p>
      <br />
      <p><img src="https://user-images.githubusercontent.com/6487972/227189047-4bda94e0-352d-41c2-b8dd-fc63d730062e.jpg" alt="burning"></p>
      <p><img src="https://user-images.githubusercontent.com/6487972/227189074-9653b3cf-3264-4814-90b3-804abb0ce107.jpg" alt="burn successful"></p>
    </li>
    <li>
      <p>You can also send the OBJKT to a burn address directly from your Tezos wallet. The address is: <code>tz1burnburnburnburnburnburnburjAYjjX</code>.</p>
    </li>
  </ol>
  <br />
  <p><strong>Note:</strong> <em>If you burn all of the objkts that were minted, the objkt will disappear from your profile. If someone buys one of your editions, even if you burn the rest of them, the OBJKT won't disappear from your profile.</em></p>
</div>
`}),jsxRuntimeExports.jsx(Xe,{text:"How do I Resell an OBJKT?",answer:`
<div class="markdown-body">
  <br />
  <h2>How to Sell an OBJKT Created by Another Artist</h2>
  <p>If you've collected another artist's OBJKT, then you own the right to resell it. This is also referred to as placing your OBJKT on the secondary market. It's much the same as swapping one of your own creations, although a royalty will be paid to the artist.</p>
  <br />
  <h3>Step-by-Step Guide</h3>
  <ol>
    <li>
      <p>Make sure your wallet is synced.</p>
    </li>
    <li>
      <p>Load your account page on Teia.</p>
    </li>
    <li>
      <p>Click on "collection" and click on the OBJKT you want to resell.</p>
    </li>
    <li>
      <p>Click on the "listings" tab to see all of the owners and sellers.</p>
    </li>
    <li>
      <p>Click on "swap" and set a price for your OBJKT. Remember - if there are royalties, that percentage will go to the artist, so consider that in the pricing.</p>
    </li>
    <li>
      <p>Click on the "swap" button and confirm the transaction in your wallet app.</p>
    </li>
  </ol>
  <br />
  <p>After your swap is active, the listing will show up in the <strong>Curation</strong> tab on your profile.</p>
  <p><em>IMPORTANT: Once swapping something up for sale, it is held in the Teia escrow wallet while it is "on the market." Therefore, the OBJKT will disappear from your collections. Don't worry; it's still up for sale!</em></p>
  <hr>
  <br />
  <h3>How Can I Track What I've Sold?</h3>
  <p>You can use the tools on <a href="https://hicdex.com" rel="nofollow">hicdex.com</a> to track transaction history.</p>
  <br />
  <h3>How Can I Get Notifications When I Sell Something?</h3>
  <p>You can use the Cryptonoises Telegram bot <a href="https://cryptonoises.com/" rel="nofollow">[https://cryptonoises.com/]</a> to get a notification every time something sells. We have Andrii Bakulin to thank for this very useful tool. Support him if you are able.</p>
</div>
`}),jsxRuntimeExports.jsx(Xe,{text:"How Do I Get Started With Selling Copy and Usage Rights With TEIA?",answer:`
<div class="markdown-body">
  <br />
  <h2>TEIA's Copyright Features©️</h2>
  <p>TEIA empowers artists to attach copy and usage rights clauses to each minted OBJKT (NFT). These clauses are determined and declared by the artist at the time of minting. If you are interested in using this feature, it is essential to carefully read and understand the descriptions, explanations, and implications of each option before proceeding.</p>
  <br />
  <p>The primary purpose of this feature is to enable artists to sell usage rights for their works in a transparent, legal, and fair manner. The blockchain facilitates this process by providing clear, objective, and easily traceable documentation of the agreement and the involved parties.</p>
  <br />
  <p>Collectors may acquire these rights for purposes such as broadcasting, reproduction, merchandise sales, soundtracks, game assets, etc. TEIA DAO acts as a neutral platform that facilitates these agreements but does not intervene in or enforce the terms of the agreements. Please note that support for these clauses may vary across platforms, as the data is minted on-chain but not all platforms may choose to display or honor it.</p>
  <br />
  <p><strong>Disclaimer:</strong> TEIA is not a legal entity, organization, or institution with the authority to enforce laws or resolve disputes. The agreements attached to each mint (NFT) constitute a direct contractual relationship between the artist (licensor) and the collector (licensee). The terms of these agreements are determined at the time of minting and must be resolved through mutually agreed-upon means in the event of a dispute. Both parties are responsible for conclusively proving ownership of the relevant wallet(s) if required.</p>
  <br />
  <h3>Step-by-Step Guide</h3>
  <p>A member of the TEIA organization has minted the latest guide as an NFT here:</p>
  <br />
  <p><a href="/objkt/869379" target="_blank">©️ TEIA Copyright Registration and Licensing Guide</a></p>
  <br />
  <h3>Important Notes</h3>
  <ul>
    <li><strong>Artist Responsibility:</strong> As the artist, you are responsible for clearly defining the terms of the agreement and ensuring they align with your intentions for the work.</li>
    <li><strong>Collector Responsibility:</strong> Collectors must review and agree to the terms before purchasing the OBJKT. Failure to comply with the terms may result in legal consequences.</li>
    <li><strong>Dispute Resolution:</strong> In the event of a dispute, both parties are encouraged to resolve the matter amicably. If necessary, seek legal counsel to enforce or interpret the terms of the agreement.</li>
  </ul>
  <br />
  <p>By using TEIA's copyright features, you acknowledge and agree to these terms. TEIA provides the tools to facilitate these agreements but assumes no liability for their enforcement or interpretation.</p>
</div>
`})]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsxs("div",{className:styles$o.faq__outer__container,children:[jsxRuntimeExports.jsx("h1",{children:"GitHub Documents (Open Source)"}),jsxRuntimeExports.jsxs("ul",{className:styles$o.faq__container,children:[jsxRuntimeExports.jsx(Xe,{text:"General FAQ",answer:`
<p>For general questions, check out the <a href="https://github.com/teia-community/teia-docs/wiki/General-FAQs" target="_blank" rel="noopener noreferrer">General FAQ</a> page.</p>
`}),jsxRuntimeExports.jsx(Xe,{text:"Troubleshooting",answer:`
<p>If you're having issues, visit the <a href="https://github.com/teia-community/teia-docs/wiki/Troubleshooting" target="_blank" rel="noopener noreferrer">Troubleshooting Guide</a>.</p>
`}),jsxRuntimeExports.jsx(Xe,{text:"Useful Tools",answer:`
<p>Explore tools created by the community:</p>
<ul>
  <li><a href="https://github.com/teia-community/teia-docs/wiki/Tools-made-by-the-community" target="_blank" rel="noopener noreferrer">Tezos Toolkit</a></li>
  <li><a href="https://tezos.com/ecosystem" target="_blank" rel="noopener noreferrer">NFT Marketplaces</a></li>
</ul>
`}),jsxRuntimeExports.jsx(Xe,{text:"User Safety",answer:`
<p>Stay safe by following these tips:</p>
<ul>
  <li><strong>Never share your private key</strong>.</li>
  <li>Use trusted wallets and platforms.</li>
  <li>Enable two-factor authentication (2FA) where available.</li>
</ul>
`})]})]})]})};var ListCache$2=_ListCache;function stackClear$1(){this.__data__=new ListCache$2,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(Xe){var Ke=this.__data__,Ye=Ke.delete(Xe);return this.size=Ke.size,Ye}var _stackDelete=stackDelete$1;function stackGet$1(Xe){return this.__data__.get(Xe)}var _stackGet=stackGet$1;function stackHas$1(Xe){return this.__data__.has(Xe)}var _stackHas=stackHas$1,ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE$1=200;function stackSet$1(Xe,Ke){var Ye=this.__data__;if(Ye instanceof ListCache$1){var Je=Ye.__data__;if(!Map$2||Je.length<LARGE_ARRAY_SIZE$1-1)return Je.push([Xe,Ke]),this.size=++Ye.size,this;Ye=this.__data__=new MapCache$1(Je)}return Ye.set(Xe,Ke),this.size=Ye.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$2(Xe){var Ke=this.__data__=new ListCache(Xe);this.size=Ke.size}Stack$2.prototype.clear=stackClear;Stack$2.prototype.delete=stackDelete;Stack$2.prototype.get=stackGet;Stack$2.prototype.has=stackHas;Stack$2.prototype.set=stackSet;var _Stack=Stack$2,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(Xe){return this.__data__.set(Xe,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(Xe){return this.__data__.has(Xe)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$2(Xe){var Ke=-1,Ye=Xe==null?0:Xe.length;for(this.__data__=new MapCache;++Ke<Ye;)this.add(Xe[Ke])}SetCache$2.prototype.add=SetCache$2.prototype.push=setCacheAdd;SetCache$2.prototype.has=setCacheHas;var _SetCache=SetCache$2;function arraySome$1(Xe,Ke){for(var Ye=-1,Je=Xe==null?0:Xe.length;++Ye<Je;)if(Ke(Xe[Ye],Ye,Xe))return!0;return!1}var _arraySome=arraySome$1;function cacheHas$2(Xe,Ke){return Xe.has(Ke)}var _cacheHas=cacheHas$2,SetCache$1=_SetCache,arraySome=_arraySome,cacheHas$1=_cacheHas,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays$2(Xe,Ke,Ye,Je,tt,st){var rt=Ye&COMPARE_PARTIAL_FLAG$5,it=Xe.length,ot=Ke.length;if(it!=ot&&!(rt&&ot>it))return!1;var at=st.get(Xe),lt=st.get(Ke);if(at&&lt)return at==Ke&&lt==Xe;var ut=-1,ht=!0,pt=Ye&COMPARE_UNORDERED_FLAG$3?new SetCache$1:void 0;for(st.set(Xe,Ke),st.set(Ke,Xe);++ut<it;){var ft=Xe[ut],xt=Ke[ut];if(Je)var vt=rt?Je(xt,ft,ut,Ke,Xe,st):Je(ft,xt,ut,Xe,Ke,st);if(vt!==void 0){if(vt)continue;ht=!1;break}if(pt){if(!arraySome(Ke,function(At,Et){if(!cacheHas$1(pt,Et)&&(ft===At||tt(ft,At,Ye,Je,st)))return pt.push(Et)})){ht=!1;break}}else if(!(ft===xt||tt(ft,xt,Ye,Je,st))){ht=!1;break}}return st.delete(Xe),st.delete(Ke),ht}var _equalArrays=equalArrays$2,root$4=_root,Uint8Array$2=root$4.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(Xe){var Ke=-1,Ye=Array(Xe.size);return Xe.forEach(function(Je,tt){Ye[++Ke]=[tt,Je]}),Ye}var _mapToArray=mapToArray$1;function setToArray$3(Xe){var Ke=-1,Ye=Array(Xe.size);return Xe.forEach(function(Je){Ye[++Ke]=Je}),Ye}var _setToArray=setToArray$3,Symbol$1=_Symbol,Uint8Array$1=_Uint8Array,eq$1=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray$2=_setToArray,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$2="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(Xe,Ke,Ye,Je,tt,st,rt){switch(Ye){case dataViewTag$2:if(Xe.byteLength!=Ke.byteLength||Xe.byteOffset!=Ke.byteOffset)return!1;Xe=Xe.buffer,Ke=Ke.buffer;case arrayBufferTag$1:return!(Xe.byteLength!=Ke.byteLength||!st(new Uint8Array$1(Xe),new Uint8Array$1(Ke)));case boolTag$1:case dateTag$1:case numberTag$2:return eq$1(+Xe,+Ke);case errorTag$1:return Xe.name==Ke.name&&Xe.message==Ke.message;case regexpTag$1:case stringTag$1:return Xe==Ke+"";case mapTag$2:var it=mapToArray;case setTag$2:var ot=Je&COMPARE_PARTIAL_FLAG$4;if(it||(it=setToArray$2),Xe.size!=Ke.size&&!ot)return!1;var at=rt.get(Xe);if(at)return at==Ke;Je|=COMPARE_UNORDERED_FLAG$2,rt.set(Xe,Ke);var lt=equalArrays$1(it(Xe),it(Ke),Je,tt,st,rt);return rt.delete(Xe),lt;case symbolTag:if(symbolValueOf)return symbolValueOf.call(Xe)==symbolValueOf.call(Ke)}return!1}var _equalByTag=equalByTag$1,arrayPush=_arrayPush,isArray$6=isArray_1;function baseGetAllKeys$1(Xe,Ke,Ye){var Je=Ke(Xe);return isArray$6(Xe)?Je:arrayPush(Je,Ye(Xe))}var _baseGetAllKeys=baseGetAllKeys$1;function arrayFilter$1(Xe,Ke){for(var Ye=-1,Je=Xe==null?0:Xe.length,tt=0,st=[];++Ye<Je;){var rt=Xe[Ye];Ke(rt,Ye,Xe)&&(st[tt++]=rt)}return st}var _arrayFilter=arrayFilter$1;function stubArray$1(){return[]}var stubArray_1=stubArray$1,arrayFilter=_arrayFilter,stubArray=stubArray_1,objectProto$5=Object.prototype,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols?function(Xe){return Xe==null?[]:(Xe=Object(Xe),arrayFilter(nativeGetSymbols(Xe),function(Ke){return propertyIsEnumerable.call(Xe,Ke)}))}:stubArray,_getSymbols=getSymbols$1;function baseTimes$1(Xe,Ke){for(var Ye=-1,Je=Array(Xe);++Ye<Xe;)Je[Ye]=Ke(Ye);return Je}var _baseTimes=baseTimes$1,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$2.exports;(function(Xe,Ke){var Ye=_root,Je=stubFalse_1,tt=Ke&&!Ke.nodeType&&Ke,st=tt&&!0&&Xe&&!Xe.nodeType&&Xe,rt=st&&st.exports===tt,it=rt?Ye.Buffer:void 0,ot=it?it.isBuffer:void 0,at=ot||Je;Xe.exports=at})(isBuffer$2,isBuffer$2.exports);var isBufferExports=isBuffer$2.exports,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$3(Xe,Ke){var Ye=typeof Xe;return Ke=Ke??MAX_SAFE_INTEGER$1,!!Ke&&(Ye=="number"||Ye!="symbol"&&reIsUint.test(Xe))&&Xe>-1&&Xe%1==0&&Xe<Ke}var _isIndex=isIndex$3,MAX_SAFE_INTEGER=9007199254740991;function isLength$3(Xe){return typeof Xe=="number"&&Xe>-1&&Xe%1==0&&Xe<=MAX_SAFE_INTEGER}var isLength_1=isLength$3,baseGetTag$2=_baseGetTag,isLength$2=isLength_1,isObjectLike$2=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(Xe){return isObjectLike$2(Xe)&&isLength$2(Xe.length)&&!!typedArrayTags[baseGetTag$2(Xe)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$2(Xe){return function(Ke){return Xe(Ke)}}var _baseUnary=baseUnary$2,_nodeUtil={exports:{}};_nodeUtil.exports;(function(Xe,Ke){var Ye=_freeGlobal,Je=Ke&&!Ke.nodeType&&Ke,tt=Je&&!0&&Xe&&!Xe.nodeType&&Xe,st=tt&&tt.exports===Je,rt=st&&Ye.process,it=(function(){try{var ot=tt&&tt.require&&tt.require("util").types;return ot||rt&&rt.binding&&rt.binding("util")}catch{}})();Xe.exports=it})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary$1=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary$1(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$2,baseTimes=_baseTimes,isArguments$1=isArguments_1,isArray$5=isArray_1,isBuffer$1=isBufferExports,isIndex$2=_isIndex,isTypedArray$1=isTypedArray_1,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function arrayLikeKeys$1(Xe,Ke){var Ye=isArray$5(Xe),Je=!Ye&&isArguments$1(Xe),tt=!Ye&&!Je&&isBuffer$1(Xe),st=!Ye&&!Je&&!tt&&isTypedArray$1(Xe),rt=Ye||Je||tt||st,it=rt?baseTimes(Xe.length,String):[],ot=it.length;for(var at in Xe)(Ke||hasOwnProperty$3.call(Xe,at))&&!(rt&&(at=="length"||tt&&(at=="offset"||at=="parent")||st&&(at=="buffer"||at=="byteLength"||at=="byteOffset")||isIndex$2(at,ot)))&&it.push(at);return it}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$3=Object.prototype;function isPrototype$1(Xe){var Ke=Xe&&Xe.constructor,Ye=typeof Ke=="function"&&Ke.prototype||objectProto$3;return Xe===Ye}var _isPrototype=isPrototype$1;function overArg$1(Xe,Ke){return function(Ye){return Xe(Ke(Ye))}}var _overArg=overArg$1,overArg=_overArg,nativeKeys$1=overArg(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function baseKeys$1(Xe){if(!isPrototype(Xe))return nativeKeys(Xe);var Ke=[];for(var Ye in Object(Xe))hasOwnProperty$2.call(Xe,Ye)&&Ye!="constructor"&&Ke.push(Ye);return Ke}var _baseKeys=baseKeys$1,isFunction$1=isFunction_1,isLength$1=isLength_1;function isArrayLike$4(Xe){return Xe!=null&&isLength$1(Xe.length)&&!isFunction$1(Xe)}var isArrayLike_1=isArrayLike$4,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$3=isArrayLike_1;function keys$3(Xe){return isArrayLike$3(Xe)?arrayLikeKeys(Xe):baseKeys(Xe)}var keys_1=keys$3,baseGetAllKeys=_baseGetAllKeys,getSymbols=_getSymbols,keys$2=keys_1;function getAllKeys$1(Xe){return baseGetAllKeys(Xe,keys$2,getSymbols)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects$1(Xe,Ke,Ye,Je,tt,st){var rt=Ye&COMPARE_PARTIAL_FLAG$3,it=getAllKeys(Xe),ot=it.length,at=getAllKeys(Ke),lt=at.length;if(ot!=lt&&!rt)return!1;for(var ut=ot;ut--;){var ht=it[ut];if(!(rt?ht in Ke:hasOwnProperty$1.call(Ke,ht)))return!1}var pt=st.get(Xe),ft=st.get(Ke);if(pt&&ft)return pt==Ke&&ft==Xe;var xt=!0;st.set(Xe,Ke),st.set(Ke,Xe);for(var vt=rt;++ut<ot;){ht=it[ut];var At=Xe[ht],Et=Ke[ht];if(Je)var wt=rt?Je(Et,At,ht,Ke,Xe,st):Je(At,Et,ht,Xe,Ke,st);if(!(wt===void 0?At===Et||tt(At,Et,Ye,Je,st):wt)){xt=!1;break}vt||(vt=ht=="constructor")}if(xt&&!vt){var _t=Xe.constructor,Ct=Ke.constructor;_t!=Ct&&"constructor"in Xe&&"constructor"in Ke&&!(typeof _t=="function"&&_t instanceof _t&&typeof Ct=="function"&&Ct instanceof Ct)&&(xt=!1)}return st.delete(Xe),st.delete(Ke),xt}var _equalObjects=equalObjects$1,getNative$3=_getNative,root$3=_root,DataView$2=getNative$3(root$3,"DataView"),_DataView=DataView$2,getNative$2=_getNative,root$2=_root,Promise$2=getNative$2(root$2,"Promise"),_Promise=Promise$2,getNative$1=_getNative,root$1=_root,Set$3=getNative$1(root$1,"Set"),_Set=Set$3,getNative=_getNative,root=_root,WeakMap$2=getNative(root,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$2=_Set,WeakMap$1=_WeakMap,baseGetTag$1=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$1),getTag$1=baseGetTag$1;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$1(new Map$1)!=mapTag||Promise$1&&getTag$1(Promise$1.resolve())!=promiseTag||Set$2&&getTag$1(new Set$2)!=setTag||WeakMap$1&&getTag$1(new WeakMap$1)!=weakMapTag)&&(getTag$1=function(Xe){var Ke=baseGetTag$1(Xe),Ye=Ke==objectTag$1?Xe.constructor:void 0,Je=Ye?toSource(Ye):"";if(Je)switch(Je){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return Ke});var _getTag=getTag$1,Stack$1=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag=_getTag,isArray$4=isArray_1,isBuffer=isBufferExports,isTypedArray=isTypedArray_1,COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep$1(Xe,Ke,Ye,Je,tt,st){var rt=isArray$4(Xe),it=isArray$4(Ke),ot=rt?arrayTag:getTag(Xe),at=it?arrayTag:getTag(Ke);ot=ot==argsTag?objectTag:ot,at=at==argsTag?objectTag:at;var lt=ot==objectTag,ut=at==objectTag,ht=ot==at;if(ht&&isBuffer(Xe)){if(!isBuffer(Ke))return!1;rt=!0,lt=!1}if(ht&&!lt)return st||(st=new Stack$1),rt||isTypedArray(Xe)?equalArrays(Xe,Ke,Ye,Je,tt,st):equalByTag(Xe,Ke,ot,Ye,Je,tt,st);if(!(Ye&COMPARE_PARTIAL_FLAG$2)){var pt=lt&&hasOwnProperty.call(Xe,"__wrapped__"),ft=ut&&hasOwnProperty.call(Ke,"__wrapped__");if(pt||ft){var xt=pt?Xe.value():Xe,vt=ft?Ke.value():Ke;return st||(st=new Stack$1),tt(xt,vt,Ye,Je,st)}}return ht?(st||(st=new Stack$1),equalObjects(Xe,Ke,Ye,Je,tt,st)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike$1=isObjectLike_1;function baseIsEqual$2(Xe,Ke,Ye,Je,tt){return Xe===Ke?!0:Xe==null||Ke==null||!isObjectLike$1(Xe)&&!isObjectLike$1(Ke)?Xe!==Xe&&Ke!==Ke:baseIsEqualDeep(Xe,Ke,Ye,Je,baseIsEqual$2,tt)}var _baseIsEqual=baseIsEqual$2,Stack=_Stack,baseIsEqual$1=_baseIsEqual,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch$1(Xe,Ke,Ye,Je){var tt=Ye.length,st=tt,rt=!Je;if(Xe==null)return!st;for(Xe=Object(Xe);tt--;){var it=Ye[tt];if(rt&&it[2]?it[1]!==Xe[it[0]]:!(it[0]in Xe))return!1}for(;++tt<st;){it=Ye[tt];var ot=it[0],at=Xe[ot],lt=it[1];if(rt&&it[2]){if(at===void 0&&!(ot in Xe))return!1}else{var ut=new Stack;if(Je)var ht=Je(at,lt,ot,Xe,Ke,ut);if(!(ht===void 0?baseIsEqual$1(lt,at,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,Je,ut):ht))return!1}}return!0}var _baseIsMatch=baseIsMatch$1,isObject$3=isObject_1;function isStrictComparable$2(Xe){return Xe===Xe&&!isObject$3(Xe)}var _isStrictComparable=isStrictComparable$2,isStrictComparable$1=_isStrictComparable,keys$1=keys_1;function getMatchData$1(Xe){for(var Ke=keys$1(Xe),Ye=Ke.length;Ye--;){var Je=Ke[Ye],tt=Xe[Je];Ke[Ye]=[Je,tt,isStrictComparable$1(tt)]}return Ke}var _getMatchData=getMatchData$1;function matchesStrictComparable$2(Xe,Ke){return function(Ye){return Ye==null?!1:Ye[Xe]===Ke&&(Ke!==void 0||Xe in Object(Ye))}}var _matchesStrictComparable=matchesStrictComparable$2,baseIsMatch=_baseIsMatch,getMatchData=_getMatchData,matchesStrictComparable$1=_matchesStrictComparable;function baseMatches$1(Xe){var Ke=getMatchData(Xe);return Ke.length==1&&Ke[0][2]?matchesStrictComparable$1(Ke[0][0],Ke[0][1]):function(Ye){return Ye===Xe||baseIsMatch(Ye,Xe,Ke)}}var _baseMatches=baseMatches$1;function baseHasIn$1(Xe,Ke){return Xe!=null&&Ke in Object(Xe)}var _baseHasIn=baseHasIn$1,castPath=_castPath,isArguments=isArguments_1,isArray$3=isArray_1,isIndex$1=_isIndex,isLength=isLength_1,toKey$2=_toKey;function hasPath$1(Xe,Ke,Ye){Ke=castPath(Ke,Xe);for(var Je=-1,tt=Ke.length,st=!1;++Je<tt;){var rt=toKey$2(Ke[Je]);if(!(st=Xe!=null&&Ye(Xe,rt)))break;Xe=Xe[rt]}return st||++Je!=tt?st:(tt=Xe==null?0:Xe.length,!!tt&&isLength(tt)&&isIndex$1(rt,tt)&&(isArray$3(Xe)||isArguments(Xe)))}var _hasPath=hasPath$1,baseHasIn=_baseHasIn,hasPath=_hasPath;function hasIn$1(Xe,Ke){return Xe!=null&&hasPath(Xe,Ke,baseHasIn)}var hasIn_1=hasIn$1,baseIsEqual=_baseIsEqual,get$1=get_1,hasIn=hasIn_1,isKey$2=_isKey,isStrictComparable=_isStrictComparable,matchesStrictComparable=_matchesStrictComparable,toKey$1=_toKey,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty$1(Xe,Ke){return isKey$2(Xe)&&isStrictComparable(Ke)?matchesStrictComparable(toKey$1(Xe),Ke):function(Ye){var Je=get$1(Ye,Xe);return Je===void 0&&Je===Ke?hasIn(Ye,Xe):baseIsEqual(Ke,Je,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}var _baseMatchesProperty=baseMatchesProperty$1;function identity$2(Xe){return Xe}var identity_1=identity$2;function baseProperty$1(Xe){return function(Ke){return Ke==null?void 0:Ke[Xe]}}var _baseProperty=baseProperty$1,baseGet$2=_baseGet;function basePropertyDeep$1(Xe){return function(Ke){return baseGet$2(Ke,Xe)}}var _basePropertyDeep=basePropertyDeep$1,baseProperty=_baseProperty,basePropertyDeep=_basePropertyDeep,isKey$1=_isKey,toKey=_toKey;function property$1(Xe){return isKey$1(Xe)?baseProperty(toKey(Xe)):basePropertyDeep(Xe)}var property_1=property$1,baseMatches=_baseMatches,baseMatchesProperty=_baseMatchesProperty,identity$1=identity_1,isArray$2=isArray_1,property=property_1;function baseIteratee$2(Xe){return typeof Xe=="function"?Xe:Xe==null?identity$1:typeof Xe=="object"?isArray$2(Xe)?baseMatchesProperty(Xe[0],Xe[1]):baseMatches(Xe):property(Xe)}var _baseIteratee=baseIteratee$2;function baseFindIndex$1(Xe,Ke,Ye,Je){for(var tt=Xe.length,st=Ye+(Je?1:-1);Je?st--:++st<tt;)if(Ke(Xe[st],st,Xe))return st;return-1}var _baseFindIndex=baseFindIndex$1;function baseIsNaN$1(Xe){return Xe!==Xe}var _baseIsNaN=baseIsNaN$1;function strictIndexOf$1(Xe,Ke,Ye){for(var Je=Ye-1,tt=Xe.length;++Je<tt;)if(Xe[Je]===Ke)return Je;return-1}var _strictIndexOf=strictIndexOf$1,baseFindIndex=_baseFindIndex,baseIsNaN=_baseIsNaN,strictIndexOf=_strictIndexOf;function baseIndexOf$1(Xe,Ke,Ye){return Ke===Ke?strictIndexOf(Xe,Ke,Ye):baseFindIndex(Xe,baseIsNaN,Ye)}var _baseIndexOf=baseIndexOf$1,baseIndexOf=_baseIndexOf;function arrayIncludes$1(Xe,Ke){var Ye=Xe==null?0:Xe.length;return!!Ye&&baseIndexOf(Xe,Ke,0)>-1}var _arrayIncludes=arrayIncludes$1;function arrayIncludesWith$1(Xe,Ke,Ye){for(var Je=-1,tt=Xe==null?0:Xe.length;++Je<tt;)if(Ye(Ke,Xe[Je]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith$1;function noop$1(){}var noop_1=noop$1,Set$1=_Set,noop=noop_1,setToArray$1=_setToArray,INFINITY$1=1/0,createSet$1=Set$1&&1/setToArray$1(new Set$1([,-0]))[1]==INFINITY$1?function(Xe){return new Set$1(Xe)}:noop,_createSet=createSet$1,SetCache=_SetCache,arrayIncludes=_arrayIncludes,arrayIncludesWith=_arrayIncludesWith,cacheHas=_cacheHas,createSet=_createSet,setToArray=_setToArray,LARGE_ARRAY_SIZE=200;function baseUniq$2(Xe,Ke,Ye){var Je=-1,tt=arrayIncludes,st=Xe.length,rt=!0,it=[],ot=it;if(Ye)rt=!1,tt=arrayIncludesWith;else if(st>=LARGE_ARRAY_SIZE){var at=Ke?null:createSet(Xe);if(at)return setToArray(at);rt=!1,tt=cacheHas,ot=new SetCache}else ot=Ke?[]:it;e:for(;++Je<st;){var lt=Xe[Je],ut=Ke?Ke(lt):lt;if(lt=Ye||lt!==0?lt:0,rt&&ut===ut){for(var ht=ot.length;ht--;)if(ot[ht]===ut)continue e;Ke&&ot.push(ut),it.push(lt)}else tt(ot,ut,Ye)||(ot!==it&&ot.push(ut),it.push(lt))}return it}var _baseUniq=baseUniq$2,baseIteratee$1=_baseIteratee,baseUniq$1=_baseUniq;function uniqBy(Xe,Ke){return Xe&&Xe.length?baseUniq$1(Xe,baseIteratee$1(Ke)):[]}var uniqBy_1=uniqBy;const uniqBy$1=getDefaultExportFromCjs(uniqBy_1);function NewObjktsFeed(){return jsxRuntimeExports.jsx(TokenCollection,{feeds_menu:!0,label:"New OBJKTs",namespace:"new-objkts-feed",maxItems:600,postProcessTokens:Xe=>uniqBy$1(Xe,"artist_address"),query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query getNewObjkt($limit: Int!) {
          tokens(
            where: { editions: { _gt: "0" }, metadata_status: { _eq: "processed" }, fa2_address: { _eq: "${HEN_CONTRACT_FA2}"} }
            order_by: { minted_at: desc }
            limit: $limit

          ) {
            ...baseTokenFields
          }
        }
      `})}function MimeTypeFeed({label:Xe,namespace:Ke,mimeTypes:Ye}){return jsxRuntimeExports.jsx(TokenCollection,{feeds_menu:!0,label:Xe,namespace:Ke,maxItems:600,postProcessTokens:Je=>uniqBy$1(Je,"artist_address"),query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query getTokensByMimeTypes($limit: Int!) {
          tokens(where: { mime_type: {_in : [${Ye.map(Je=>`"${Je}"`).join(", ")}] }, editions : { _neq : 0 }, metadata_status: { _eq: "processed" }, fa2_address: { _eq: "${HEN_CONTRACT_FA2}"}}, order_by: { minted_at: desc }, limit: $limit) {
              ...baseTokenFields
          }
        }
      `})}function GlbFeed(){return jsxRuntimeExports.jsx(MimeTypeFeed,{label:"3D OBJKTs",namespace:"glb-feed",mimeTypes:["model/gltf-binary"]})}function AudioFeed(){return jsxRuntimeExports.jsx(MimeTypeFeed,{label:"Audio OBJKTs",namespace:"audio-feed",mimeTypes:["audio/ogg","audio/wav","audio/mpeg","audio/vorbis","audio/mp4"]})}function MidiFeed(){return jsxRuntimeExports.jsx(MimeTypeFeed,{label:"Midi OBJKTs",namespace:"midi-feed",mimeTypes:["audio/mid","audio/midi"]})}function VideoFeed(){return jsxRuntimeExports.jsx(MimeTypeFeed,{label:"Video OBJKTs",namespace:"video-feed",mimeTypes:["video/mp4"]})}function PdfFeed(){return jsxRuntimeExports.jsx(MimeTypeFeed,{label:"PDF OBJKTs",namespace:"pdf-feed",mimeTypes:["application/pdf"]})}function MarkdownFeed(){return jsxRuntimeExports.jsx(MimeTypeFeed,{label:"Markdown OBJKTs",namespace:"md-feed",mimeTypes:["text/markdown"]})}function TextFeed(){return jsxRuntimeExports.jsx(MimeTypeFeed,{label:"Text OBJKTs",namespace:"txt-feed",mimeTypes:["text/plain"]})}function ImageFeed(){return jsxRuntimeExports.jsx(MimeTypeFeed,{label:"Image OBJKTs",namespace:"image-feed",mimeTypes:["image/jpeg","image/png","image/jpg"]})}function HtmlSvgFeed(){return jsxRuntimeExports.jsx(MimeTypeFeed,{label:"Interactive OBJKTs (HTML or SVG)",namespace:"html-svg-feed",mimeTypes:["application/x-directory","image/svg+xml"]})}function GifFeed(){return jsxRuntimeExports.jsx(MimeTypeFeed,{label:"GIF OBJKTs",namespace:"gif-feed",mimeTypes:["image/gif"]})}function createBaseFor$1(Xe){return function(Ke,Ye,Je){for(var tt=-1,st=Object(Ke),rt=Je(Ke),it=rt.length;it--;){var ot=rt[Xe?it:++tt];if(Ye(st[ot],ot,st)===!1)break}return Ke}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$1=createBaseFor(),_baseFor=baseFor$1,baseFor=_baseFor,keys=keys_1;function baseForOwn$1(Xe,Ke){return Xe&&baseFor(Xe,Ke,keys)}var _baseForOwn=baseForOwn$1,isArrayLike$2=isArrayLike_1;function createBaseEach$1(Xe,Ke){return function(Ye,Je){if(Ye==null)return Ye;if(!isArrayLike$2(Ye))return Xe(Ye,Je);for(var tt=Ye.length,st=Ke?tt:-1,rt=Object(Ye);(Ke?st--:++st<tt)&&Je(rt[st],st,rt)!==!1;);return Ye}}var _createBaseEach=createBaseEach$1,baseForOwn=_baseForOwn,createBaseEach=_createBaseEach,baseEach$1=createBaseEach(baseForOwn),_baseEach=baseEach$1,baseEach=_baseEach,isArrayLike$1=isArrayLike_1;function baseMap$1(Xe,Ke){var Ye=-1,Je=isArrayLike$1(Xe)?Array(Xe.length):[];return baseEach(Xe,function(tt,st,rt){Je[++Ye]=Ke(tt,st,rt)}),Je}var _baseMap=baseMap$1;function baseSortBy$1(Xe,Ke){var Ye=Xe.length;for(Xe.sort(Ke);Ye--;)Xe[Ye]=Xe[Ye].value;return Xe}var _baseSortBy=baseSortBy$1,isSymbol$1=isSymbol_1;function compareAscending$1(Xe,Ke){if(Xe!==Ke){var Ye=Xe!==void 0,Je=Xe===null,tt=Xe===Xe,st=isSymbol$1(Xe),rt=Ke!==void 0,it=Ke===null,ot=Ke===Ke,at=isSymbol$1(Ke);if(!it&&!at&&!st&&Xe>Ke||st&&rt&&ot&&!it&&!at||Je&&rt&&ot||!Ye&&ot||!tt)return 1;if(!Je&&!st&&!at&&Xe<Ke||at&&Ye&&tt&&!Je&&!st||it&&Ye&&tt||!rt&&tt||!ot)return-1}return 0}var _compareAscending=compareAscending$1,compareAscending=_compareAscending;function compareMultiple$1(Xe,Ke,Ye){for(var Je=-1,tt=Xe.criteria,st=Ke.criteria,rt=tt.length,it=Ye.length;++Je<rt;){var ot=compareAscending(tt[Je],st[Je]);if(ot){if(Je>=it)return ot;var at=Ye[Je];return ot*(at=="desc"?-1:1)}}return Xe.index-Ke.index}var _compareMultiple=compareMultiple$1,arrayMap=_arrayMap,baseGet$1=_baseGet,baseIteratee=_baseIteratee,baseMap=_baseMap,baseSortBy=_baseSortBy,baseUnary=_baseUnary,compareMultiple=_compareMultiple,identity=identity_1,isArray$1=isArray_1;function baseOrderBy$1(Xe,Ke,Ye){Ke.length?Ke=arrayMap(Ke,function(st){return isArray$1(st)?function(rt){return baseGet$1(rt,st.length===1?st[0]:st)}:st}):Ke=[identity];var Je=-1;Ke=arrayMap(Ke,baseUnary(baseIteratee));var tt=baseMap(Xe,function(st,rt,it){var ot=arrayMap(Ke,function(at){return at(st)});return{criteria:ot,index:++Je,value:st}});return baseSortBy(tt,function(st,rt){return compareMultiple(st,rt,Ye)})}var _baseOrderBy=baseOrderBy$1,baseOrderBy=_baseOrderBy,isArray=isArray_1;function orderBy(Xe,Ke,Ye,Je){return Xe==null?[]:(isArray(Ke)||(Ke=Ke==null?[]:[Ke]),Ye=Je?void 0:Ye,isArray(Ye)||(Ye=Ye==null?[]:[Ye]),baseOrderBy(Xe,Ke,Ye))}var orderBy_1=orderBy;const orderBy$1=getDefaultExportFromCjs(orderBy_1),feed_info="_feed_info_djinq_238",styles$n={feed_info};function FundFeed({minShares:Xe=50,introText:Ke,infoUrl:Ye,contractAddress:Je,cause:tt,namespace:st,tags:rt=null}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:styles$n.feed_info,children:[jsxRuntimeExports.jsx("p",{children:Ke}),jsxRuntimeExports.jsxs("a",{href:Ye,target:"_blank",rel:"noreferrer",children:["More info ",jsxRuntimeExports.jsx("strong",{children:"here"})]})]}),jsxRuntimeExports.jsx(TokenCollection,{feeds_menu:!0,label:`Fundraise for ${tt}`,namespace:st,maxItems:600,extractTokensFromResponse:({tokens_by_share:it,tokens_by_tag:ot})=>orderBy$1(uniqBy$1([...flatten$4(it.map(({total_shares:at,shareholders:lt,created_tokens:ut})=>flatten$4(lt.map(ht=>{if([Je].includes(ht.shareholder_address)&&ht.shares/at*100>=Xe)return ut}).filter(ht=>ht!==void 0)))),...ot||[]].map(at=>({...at,key:at.token_id})),({key:at})=>at),["minted_at"],["desc"]),query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query GetCollabTokens($limit: Int!) {
          tokens_by_share: teia_split_contracts(limit: $limit, where: {shareholders: {shareholder_address: {_eq: "${Je}"}}}) {
            contract_profile {
              name
            }
            total_shares
            shareholders {
              shareholder_address
              shares
            }
            created_tokens(where: {editions: {_gt: "0"}, metadata_status: { _eq: "processed" }, teia_meta: { is_signed: { _eq: true }}}, order_by: { minted_at: desc }) {
              ...baseTokenFields
            }
          }
          ${rt?`
            tokens_by_tag: tokens(where: {tags: {tag: {_in: [${rt.map(it=>`"${it}"`)}]}}, editions: {_gt: "0"}, metadata_status: { _eq: "processed" },}, limit: $limit, order_by: { minted_at: desc }) {
              ...baseTokenFields
            }
          `:""}
        }
      `})]})}function IranFeed(){return jsxRuntimeExports.jsx(FundFeed,{introText:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"This feed shows OBJKTs minted with the Iran donation address as beneficiary of at least 50% of sales volume or tagged with #Tezos4Iran"}),contractAddress:IRAN_FUNDING_CONTRACT,cause:"Iran",namespace:"iran-feed",tags:["tezos4iran","#tezos4iran"],infoUrl:"https://github.com/teia-community/teia-docs/wiki/Tezos-for-Iran"})}function PakistanFeed(){return jsxRuntimeExports.jsx(FundFeed,{introText:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"This feed shows OBJKTs minted with the Pakistan donation address as beneficiary of at least 50% of sales volume."}),contractAddress:PAKISTAN_FUNDING_CONTRACT,cause:"Pakistan",namespace:"pakistan-feed",infoUrl:"https://github.com/teia-community/teia-docs/wiki/Pakistan-Fundraiser"})}function UkraineFeed(){return jsxRuntimeExports.jsx(FundFeed,{introText:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"This feed shows OBJKTs minted with the Ukraine donation address as beneficiary of at least 50% of sales volume."}),contractAddress:UKRAINE_FUNDING_CONTRACT,cause:"Ukraine",namespace:"ukraine-feed",infoUrl:"https://github.com/teia-community/teia-docs/wiki/Ukranian-Fundraising"})}function QuakeFeed(){return jsxRuntimeExports.jsx(FundFeed,{introText:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"Tezos community initiative to support those affected by the recent earthquake in Turkey and Syria. Given the events in Morocco, we are channeling our current support toward emergency relief there."}),contractAddress:QUAKE_FUNDING_CONTRACT,cause:"Morocco, Turkey and Syria Earthquakes",namespace:"quake-feed",tags:["TezQuakeAid","#TezQuakeAid"],infoUrl:"https://app.joyn.xyz/space/tezquakeaid-ec7f1f650671"})}function MoroccoQuakeFeed(){return jsxRuntimeExports.jsx(FundFeed,{introText:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"Tezos community initiative to support those affected by the recent earthquake in Morocco."}),contractAddress:MOROCCO_QUAKE_FUNDING_CONTRACT,cause:"Morocco Earthquakes",namespace:"morocco-quake-feed",tags:["TezQuakeAid","#TezQuakeAid"],infoUrl:"https://app.joyn.xyz/space/tezquakeaid-ec7f1f650671"})}function Tez4PalFeed(){return jsxRuntimeExports.jsx(FundFeed,{introText:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"The Tezos Fundraiser #Tez4Pal, supporting Gaza civilians."}),contractAddress:TEZ4PAL_FUNDING_ADDRESS,cause:"Supporting Gaza civilians",namespace:"tez4pal",tags:["Tez4Pal","#Tez4Pal","tez4pal","#tez4pal"],infoUrl:"https://twitter.com/LN0ir/status/1745946304742576400"})}function Art4ArtistsFeed(){return jsxRuntimeExports.jsx(FundFeed,{introText:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"#Art4Artists Breadfond"}),contractAddress:ART4ARTISTS_BREADFOND_CONTRACT,cause:"Art4Artists",namespace:"art4artists",tags:["Art4Artists","#Art4Artists"],infoUrl:"https://x.com/EggsUnknow/status/1848805355620602309"})}var baseUniq=_baseUniq;function uniq(Xe){return Xe&&Xe.length?baseUniq(Xe):[]}var uniq_1=uniq;const uniq$1=getDefaultExportFromCjs(uniq_1);async function fetchAllFrensAddresses(Xe){const{errors:Ke,data:Ye}=await fetchGraphQL(distExports.gql`
      query collectorGallery($address: String!) {
        holdings(
          where: {
            holder_address: { _eq: $address }
            amount: { _gt: 0 }
            token: { artist_address: { _neq: $address } }
          }
          order_by: { token_id: desc }
        ) {
          token {
            artist_address
          }
        }
      }
    `,"collectorGallery",{address:Xe});return Ke?(console.error(Ke),[]):uniq$1(Ye.holdings.map(Je=>Je.token.artist_address))}function FriendsFeed(){const Xe=useParams(),{data:Ke}=useSWR(["/feed/friends",Xe.address],async()=>fetchAllFrensAddresses(Xe.address),{revalidateIfStale:!1,revalidateOnFocus:!1});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$n.feed_info,children:jsxRuntimeExports.jsx("p",{children:"This feed shows OBJKTs of your collectors and artists you collected from."})}),jsxRuntimeExports.jsx(TokenCollection,{feeds_menu:!0,disable:!Ke,label:"Friends Feed",namespace:"friends",variables:{wallets:Ke},swrParams:[Xe.address],query:distExports.gql`
          ${BaseTokenFieldsFragment}
          query frensGallery($wallets: [String!], $limit: Int!) {
            tokens(
              where: {
                editions: { _gt: 0 }
                artist_address: { _in: $wallets }
                metadata_status: { _eq: "processed" }
              }
              order_by: { minted_at: desc }
              limit: $limit
            ) {
              ...baseTokenFields
            }
          }
        `})]})}var nativeFloor=Math.floor,nativeRandom$1=Math.random;function baseRandom$1(Xe,Ke){return Xe+nativeFloor(nativeRandom$1()*(Ke-Xe+1))}var _baseRandom=baseRandom$1,eq=eq_1,isArrayLike=isArrayLike_1,isIndex=_isIndex,isObject$2=isObject_1;function isIterateeCall$1(Xe,Ke,Ye){if(!isObject$2(Ye))return!1;var Je=typeof Ke;return(Je=="number"?isArrayLike(Ye)&&isIndex(Ke,Ye.length):Je=="string"&&Ke in Ye)?eq(Ye[Ke],Xe):!1}var _isIterateeCall=isIterateeCall$1,reWhitespace=/\s/;function trimmedEndIndex$1(Xe){for(var Ke=Xe.length;Ke--&&reWhitespace.test(Xe.charAt(Ke)););return Ke}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(Xe){return Xe&&Xe.slice(0,trimmedEndIndex(Xe)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$1=isObject_1,isSymbol=isSymbol_1,NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(Xe){if(typeof Xe=="number")return Xe;if(isSymbol(Xe))return NAN;if(isObject$1(Xe)){var Ke=typeof Xe.valueOf=="function"?Xe.valueOf():Xe;Xe=isObject$1(Ke)?Ke+"":Ke}if(typeof Xe!="string")return Xe===0?Xe:+Xe;Xe=baseTrim(Xe);var Ye=reIsBinary.test(Xe);return Ye||reIsOctal.test(Xe)?freeParseInt(Xe.slice(2),Ye?2:8):reIsBadHex.test(Xe)?NAN:+Xe}var toNumber_1=toNumber$1,toNumber=toNumber_1,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$1(Xe){if(!Xe)return Xe===0?Xe:0;if(Xe=toNumber(Xe),Xe===INFINITY||Xe===-INFINITY){var Ke=Xe<0?-1:1;return Ke*MAX_INTEGER}return Xe===Xe?Xe:0}var toFinite_1=toFinite$1,baseRandom=_baseRandom,isIterateeCall=_isIterateeCall,toFinite=toFinite_1,freeParseFloat=parseFloat,nativeMin=Math.min,nativeRandom=Math.random;function random(Xe,Ke,Ye){if(Ye&&typeof Ye!="boolean"&&isIterateeCall(Xe,Ke,Ye)&&(Ke=Ye=void 0),Ye===void 0&&(typeof Ke=="boolean"?(Ye=Ke,Ke=void 0):typeof Xe=="boolean"&&(Ye=Xe,Xe=void 0)),Xe===void 0&&Ke===void 0?(Xe=0,Ke=1):(Xe=toFinite(Xe),Ke===void 0?(Ke=Xe,Xe=0):Ke=toFinite(Ke)),Xe>Ke){var Je=Xe;Xe=Ke,Ke=Je}if(Ye||Xe%1||Ke%1){var tt=nativeRandom();return nativeMin(Xe+tt*(Ke-Xe+freeParseFloat("1e-"+((tt+"").length-1))),Ke)}return baseRandom(Xe,Ke)}var random_1=random;const random$1=getDefaultExportFromCjs(random_1);function RandomFeed({firstId:Xe=196,lastId:Ke=1592463,max:Ye=200}){const Je=reactExports.useMemo(()=>{const tt=new Set;for(;tt.size<Ye;)tt.add(`${random$1(Xe,Ke)}`);return Array.from(tt)},[Xe,Ke,Ye]);return jsxRuntimeExports.jsx(TokenCollection,{feeds_menu:!0,label:"Random",namespace:"random-feed",enableInfinityScroll:!1,variables:{tokenIds:Je},maxItems:200,query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query Objkts($tokenIds: [String!] = "", $limit: Int!) {
          tokens(where: { token_id: { _in: $tokenIds }, editions: { _neq: 0 }, fa2_address: { _eq: "${HEN_CONTRACT_FA2}" } }, limit: $limit) {
            ...baseTokenFields
          }
        }
      `})}function RecentSalesFeed(){return jsxRuntimeExports.jsx(TokenCollection,{feeds_menu:!0,label:"Recent Sales",namespace:"recent-sales-feed",resultsPath:"events",tokenPath:"token",keyPath:"token.token_id",maxItems:600,postProcessTokens:Xe=>uniqBy$1(uniqBy$1(Xe,"token_id"),"artist_address"),query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query getLatestSales($limit: Int!) {
          events(limit: $limit, order_by: [{level: desc, opid: desc}], where: {token: {metadata_status: {_eq: "processed"}}, implements: {_eq: "SALE"}, fa2_address: {_eq: "${HEN_CONTRACT_FA2}"}}) {
            type
            timestamp
            token {
              ...baseTokenFields
            }
          }
        }
      `})}function SearchFeed(){const[Xe]=useSearchParams(),Ke=Xe.get("term")||"";return jsxRuntimeExports.jsx(TagFeed,{feeds_menu:!1,label:"Search",namespace:"search-feed",tag:Ke})}const container$8="_container_dvrm0_216",subjkt_icon="_subjkt_icon_dvrm0_222",flex="_flex_dvrm0_229",description="_description_dvrm0_238",user="_user_dvrm0_243",user_box="_user_box_dvrm0_250",styles$m={container:container$8,subjkt_icon,flex,description,user,user_box};function SubjktsSearchResults(){const[Xe]=useSearchParams(),Ke=Xe.get("term")||"",{data:Ye}=useSWR(["subjkts-search",Ke],async(tt,st)=>(await fetchGraphQL(distExports.gql`
          query getSubjkts($subjkt: String!) {
            teia_users(where: { name: { _ilike: $subjkt } }) {
              user_address
              name
              metadata {
                data
              }
            }
          }
        `,"getSubjkts",{subjkt:`%${st}%`})).data,{revalidateIfStale:!1,revalidateOnFocus:!1,use:[laggy]}),Je=uniqBy$1(get$5(Ye,"teia_users")||[],({name:tt})=>tt).filter(({name:tt})=>tt);return Je.length?jsxRuntimeExports.jsx("div",{className:styles$m.container,children:Je.map(({user_address:tt,name:st,metadata:rt})=>{var it;return jsxRuntimeExports.jsxs("div",{className:styles$m.subjkt_result,children:[jsxRuntimeExports.jsxs("div",{className:styles$m.flex,children:[jsxRuntimeExports.jsxs(Link,{className:styles$m.user_box,to:`/${encodeURIComponent(st)}`,children:[rt.data&&jsxRuntimeExports.jsx(Identicon,{className:styles$m.subjkt_icon,address:tt,logo:(it=rt.data)==null?void 0:it.identicon}),jsxRuntimeExports.jsx("p",{className:styles$m.user,children:st})]})," ",jsxRuntimeExports.jsx("p",{className:styles$m.description,children:get$5(rt,"data.description")})]}),jsxRuntimeExports.jsx(Line,{},`${st}-line`)]},st)})}):null}const DefaultFeedComponent=RecentSalesFeed,feedComponentMap={"Recent Sales":RecentSalesFeed,Art4Artists:Art4ArtistsFeed,"🏳️‍🌈 Tezospride":TagFeed,"🇮🇷 Iran":IranFeed,"Quake Aid":QuakeFeed,"🇵🇰 Pakistan":PakistanFeed,"🇺🇦 Ukraine":UkraineFeed,"🇵🇸 Tez4Pal":Tez4PalFeed,Random:RandomFeed,"New OBJKTs":NewObjktsFeed,"3D":GlbFeed,Video:VideoFeed,Image:ImageFeed,Audio:AudioFeed,"HTML & SVG":HtmlSvgFeed,PDF:PdfFeed,Markdown:MarkdownFeed,GIF:GifFeed,Friends:FriendsFeed};function Home({isSearch:Xe=!1}){const Ke=useOutlet(),[Ye]=useSearchParams(),[Je,tt]=reactExports.useState(Ye.get("term")||""),st=useNavigate(),[rt]=useLocalSettings(ot=>[ot.startFeed]),it=feedComponentMap[rt]||DefaultFeedComponent;return jsxRuntimeExports.jsxs(Page,{feed:!Xe,title:"Home",children:[jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Xe&&jsxRuntimeExports.jsx(Input$2,{type:"text",name:"Enter a search term and press enter:",onChange:ot=>{tt(ot)},placeholder:"Search ↵",onKeyDown:ot=>{ot.key==="Enter"&&st({pathname:"/search",search:createSearchParams({term:Je}).toString()},{replace:!0})},value:Je})}),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Xe&&Ye.get("term")?jsxRuntimeExports.jsx(SubjktsSearchResults,{}):null}),Xe?Ye.get("term")?jsxRuntimeExports.jsx(SearchFeed,{}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):Ke||jsxRuntimeExports.jsx(it,{})]})}const defaultValuesStored={title:"",description:"",tags:"",editions:void 0,royalties:void 0,license:void 0,customLicenseData:void 0,language:void 0,nsfw:!1,photosensitive:!1,isTyped:!1},defaultValues={artifact:void 0,cover:void 0,thumbnail:void 0,getValuesStored:()=>{},updateCustomLicenseData:()=>{}},useMintStore=create$2()(subscribeWithSelector(persist((Xe,Ke)=>({...defaultValuesStored,...defaultValues,isValid:!1,updateCustomLicenseData:Ye=>{Xe(Je=>({...Je,customLicenseData:Ye}))},reset:()=>{Xe({...defaultValuesStored,...defaultValues})},getValuesStored:()=>{const Ye=Ke();return Object.fromEntries(Object.entries(Ye).filter(([Je])=>Object.keys(defaultValues).includes(Je)))},mint:async Ye=>{const{proxyAddress:Je,address:tt,sync:st,mint:rt}=useUserStore.getState(),{language:it,editions:ot,royalties:at,license:lt,customLicenseData:ut,artifact:ht,title:pt,description:ft,tags:xt,cover:vt,photosensitive:At,nsfw:Et,isMonoType:wt,reset:_t}=Ke(),Ct=useModalStore.getState().show,Tt=useModalStore.getState().step,St=useModalStore.getState().close;if(!ht||!ht.file)return;if(!tt){Tt("Sync Required","Sync your wallet"),await st(),St();return}if(!ALLOWED_MIMETYPES.includes(ht.mimeType)){Ct(`File format invalid. supported formats include: ${ALLOWED_FILETYPES_LABEL.toLocaleLowerCase()}`);return}if(vt&&!ALLOWED_COVER_MIMETYPES.includes(vt.mimeType)){Ct(`Cover file format invalid. supported formats include: ${ALLOWED_COVER_FILETYPES_LABEL.toLocaleLowerCase()}`);return}const Rt=parseInt((ht.file.size/1024/1024).toFixed(4));if(Rt>MINT_FILESIZE){Ct(`Max file size (${Rt}). Limit is currently ${MINT_FILESIZE}MB`);return}Tt("Mint","Preparing OBJKT");const Nt=Je||tt;console.debug({minterAddress:Nt});const Pt=At?{hazards:[METADATA_ACCESSIBILITY_HAZARDS_PHOTOSENS]}:null,Bt=Et?METADATA_CONTENT_RATING_MATURE:null,{imageWidth:Lt,imageHeight:zt}=await getImageDimensions(ht),Dt=[MIMETYPE.ZIP,MIMETYPE.ZIP1,MIMETYPE.ZIP2].includes(ht.mimeType),Vt=[],Gt=await generateCoverAndThumbnail(vt||ht),Qt=vt||Gt.cover,jt=Gt.thumbnail;if(ht.mimeType.indexOf("image")===0){const Jt={mimeType:ht.mimeType,fileSize:ht.file.size,fileName:ht.file.name};Lt&&zt&&(Jt.dimensions={value:`${Lt}x${zt}`,unit:"px"}),Vt.push(Jt)}else Dt?Vt.push({fileSize:ht.file.size,fileName:ht.file.name,mimeType:MIMETYPE.DIRECTORY}):Vt.push({fileSize:ht.file.size,fileName:ht.file.name,mimeType:ht.mimeType});if(ht.mimeType!==MIMETYPE.GIF){let Jt=!1;if(Qt){Jt=Qt.mimeType===MIMETYPE.GIF;const{imageWidth:Zt,imageHeight:nn}=await getImageDimensions(Qt);Qt.format={mimeType:Qt.mimeType,fileSize:Qt.buffer.byteLength,fileName:`${removeExtension(ht.file.name)}.${Jt?"gif":extensionFromMimetype(Qt.mimeType)}`,dimensions:{value:`${Zt}x${nn}`,unit:"px"}}}if(jt&&!Jt){const{imageWidth:Zt,imageHeight:nn}=await getImageDimensions(jt);jt.format={mimeType:jt.mimeType,fileSize:jt.buffer.byteLength,fileName:`${removeExtension(ht.file.name)}.${extensionFromMimetype(jt.mimeType)}`,dimensions:{value:`${Zt}x${nn}`,unit:"px"}}}}let Ht;if(Dt){const Jt=await prepareFilesFromZIP(ht.buffer);Ht=await prepareDirectory({name:pt,description:ft,tags:xt,address:Nt,files:Jt,cover:Qt,thumbnail:jt,generateDisplayUri:!0,rights:lt==null?void 0:lt.value,rightsUri:ut,language:it==null?void 0:it.value,accessibility:Pt,contentRating:Bt,formats:Vt})}else Ht=await prepareFile({name:pt,description:ft,tags:xt,address:Nt,file:ht,cover:Qt,thumbnail:jt,rights:lt==null?void 0:lt.value,rightsUri:ut,language:it==null?void 0:it.value,accessibility:Pt,contentRating:Bt,formats:Vt});console.debug("Calling mint with",{minterAddress:Nt,amount:ot,path:Ht,royalties:at});const Yt=await rt(Nt,ot,Ht,at);console.debug("success",Yt),Yt&&_t()}}),{name:"mint",storage:createJSONStorage(()=>localStorage),onRehydrateStorage:Xe=>(Ke,Ye)=>{Ye&&console.log("an error happened during hydration",Ye)},version:1,partialize:Xe=>Object.fromEntries(Object.entries(Xe).filter(([Ke])=>Object.keys(defaultValuesStored).includes(Ke)))})));var isCheckBoxInput=Xe=>Xe.type==="checkbox",isDateObject=Xe=>Xe instanceof Date,isNullOrUndefined=Xe=>Xe==null;const isObjectType=Xe=>typeof Xe=="object";var isObject=Xe=>!isNullOrUndefined(Xe)&&!Array.isArray(Xe)&&isObjectType(Xe)&&!isDateObject(Xe),getEventValue=Xe=>isObject(Xe)&&Xe.target?isCheckBoxInput(Xe.target)?Xe.target.checked:Xe.target.value:Xe,getNodeParentName=Xe=>Xe.substring(0,Xe.search(/\.\d+(\.|$)/))||Xe,isNameInFieldArray=(Xe,Ke)=>Xe.has(getNodeParentName(Ke)),compact=Xe=>Array.isArray(Xe)?Xe.filter(Boolean):[],isUndefined=Xe=>Xe===void 0,get=(Xe,Ke,Ye)=>{if(!Ke||!isObject(Xe))return Ye;const Je=compact(Ke.split(/[,[\].]+?/)).reduce((tt,st)=>isNullOrUndefined(tt)?tt:tt[st],Xe);return isUndefined(Je)||Je===Xe?isUndefined(Xe[Ke])?Ye:Xe[Ke]:Je};const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},HookFormContext=React.createContext(null),useFormContext=()=>React.useContext(HookFormContext),FormProvider=Xe=>{const{children:Ke,...Ye}=Xe;return React.createElement(HookFormContext.Provider,{value:Ye},Ke)};var getProxyFormState=(Xe,Ke,Ye,Je=!0)=>{const tt={defaultValues:Ke._defaultValues};for(const st in Xe)Object.defineProperty(tt,st,{get:()=>{const rt=st;return Ke._proxyFormState[rt]!==VALIDATION_MODE.all&&(Ke._proxyFormState[rt]=!Je||VALIDATION_MODE.all),Ye&&(Ye[rt]=!0),Xe[rt]}});return tt},isEmptyObject=Xe=>isObject(Xe)&&!Object.keys(Xe).length,shouldRenderFormState=(Xe,Ke,Ye,Je)=>{Ye(Xe);const{name:tt,...st}=Xe;return isEmptyObject(st)||Object.keys(st).length>=Object.keys(Ke).length||Object.keys(st).find(rt=>Ke[rt]===(!Je||VALIDATION_MODE.all))},convertToArrayPayload=Xe=>Array.isArray(Xe)?Xe:[Xe],shouldSubscribeByName=(Xe,Ke,Ye)=>Ye&&Ke?Xe===Ke:!Xe||!Ke||Xe===Ke||convertToArrayPayload(Xe).some(Je=>Je&&(Je.startsWith(Ke)||Ke.startsWith(Je)));function useSubscribe(Xe){const Ke=React.useRef(Xe);Ke.current=Xe,React.useEffect(()=>{const Ye=!Xe.disabled&&Ke.current.subject.subscribe({next:Ke.current.next});return()=>{Ye&&Ye.unsubscribe()}},[Xe.disabled])}function useFormState(Xe){const Ke=useFormContext(),{control:Ye=Ke.control,disabled:Je,name:tt,exact:st}=Xe||{},[rt,it]=React.useState(Ye._formState),ot=React.useRef(!0),at=React.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),lt=React.useRef(tt);return lt.current=tt,useSubscribe({disabled:Je,next:ut=>ot.current&&shouldSubscribeByName(lt.current,ut.name,st)&&shouldRenderFormState(ut,at.current,Ye._updateFormState)&&it({...Ye._formState,...ut}),subject:Ye._subjects.state}),React.useEffect(()=>{ot.current=!0;const ut=Ye._proxyFormState.isDirty&&Ye._getDirty();return ut!==Ye._formState.isDirty&&Ye._subjects.state.next({isDirty:ut}),at.current.isValid&&Ye._updateValid(!0),()=>{ot.current=!1}},[Ye]),getProxyFormState(rt,Ye,at.current,!1)}var isString=Xe=>typeof Xe=="string",generateWatchOutput=(Xe,Ke,Ye,Je,tt)=>isString(Xe)?(Je&&Ke.watch.add(Xe),get(Ye,Xe,tt)):Array.isArray(Xe)?Xe.map(st=>(Je&&Ke.watch.add(st),get(Ye,st))):(Je&&(Ke.watchAll=!0),Ye),isPlainObject=Xe=>{const Ke=Xe.constructor&&Xe.constructor.prototype;return isObject(Ke)&&Ke.hasOwnProperty("isPrototypeOf")},isWeb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cloneObject(Xe){let Ke;const Ye=Array.isArray(Xe);if(Xe instanceof Date)Ke=new Date(Xe);else if(Xe instanceof Set)Ke=new Set(Xe);else if(!(isWeb&&(Xe instanceof Blob||Xe instanceof FileList))&&(Ye||isObject(Xe)))if(Ke=Ye?[]:{},!Array.isArray(Xe)&&!isPlainObject(Xe))Ke=Xe;else for(const Je in Xe)Ke[Je]=cloneObject(Xe[Je]);else return Xe;return Ke}function useWatch(Xe){const Ke=useFormContext(),{control:Ye=Ke.control,name:Je,defaultValue:tt,disabled:st,exact:rt}=Xe||{},it=React.useRef(Je);it.current=Je,useSubscribe({disabled:st,subject:Ye._subjects.watch,next:lt=>{shouldSubscribeByName(it.current,lt.name,rt)&&at(cloneObject(generateWatchOutput(it.current,Ye._names,lt.values||Ye._formValues,!1,tt)))}});const[ot,at]=React.useState(Ye._getWatch(Je,tt));return React.useEffect(()=>Ye._removeUnmounted()),ot}function useController(Xe){const Ke=useFormContext(),{name:Ye,control:Je=Ke.control,shouldUnregister:tt}=Xe,st=isNameInFieldArray(Je._names.array,Ye),rt=useWatch({control:Je,name:Ye,defaultValue:get(Je._formValues,Ye,get(Je._defaultValues,Ye,Xe.defaultValue)),exact:!0}),it=useFormState({control:Je,name:Ye}),ot=React.useRef(Je.register(Ye,{...Xe.rules,value:rt}));return React.useEffect(()=>{const at=(lt,ut)=>{const ht=get(Je._fields,lt);ht&&(ht._f.mount=ut)};return at(Ye,!0),()=>{const lt=Je._options.shouldUnregister||tt;(st?lt&&!Je._stateFlags.action:lt)?Je.unregister(Ye):at(Ye,!1)}},[Ye,Je,st,tt]),{field:{name:Ye,value:rt,onChange:React.useCallback(at=>ot.current.onChange({target:{value:getEventValue(at),name:Ye},type:EVENTS.CHANGE}),[Ye]),onBlur:React.useCallback(()=>ot.current.onBlur({target:{value:get(Je._formValues,Ye),name:Ye},type:EVENTS.BLUR}),[Ye,Je]),ref:at=>{const lt=get(Je._fields,Ye);lt&&at&&(lt._f.ref={focus:()=>at.focus(),select:()=>at.select(),setCustomValidity:ut=>at.setCustomValidity(ut),reportValidity:()=>at.reportValidity()})}},formState:it,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!get(it.errors,Ye)},isDirty:{enumerable:!0,get:()=>!!get(it.dirtyFields,Ye)},isTouched:{enumerable:!0,get:()=>!!get(it.touchedFields,Ye)},error:{enumerable:!0,get:()=>get(it.errors,Ye)}})}}const Controller=Xe=>Xe.render(useController(Xe));var appendErrors=(Xe,Ke,Ye,Je,tt)=>Ke?{...Ye[Xe],types:{...Ye[Xe]&&Ye[Xe].types?Ye[Xe].types:{},[Je]:tt||!0}}:{},isKey=Xe=>/^\w*$/.test(Xe),stringToPath=Xe=>compact(Xe.replace(/["|']|\]/g,"").split(/\.|\[/));function set(Xe,Ke,Ye){let Je=-1;const tt=isKey(Ke)?[Ke]:stringToPath(Ke),st=tt.length,rt=st-1;for(;++Je<st;){const it=tt[Je];let ot=Ye;if(Je!==rt){const at=Xe[it];ot=isObject(at)||Array.isArray(at)?at:isNaN(+tt[Je+1])?{}:[]}Xe[it]=ot,Xe=Xe[it]}return Xe}const focusFieldBy=(Xe,Ke,Ye)=>{for(const Je of Ye||Object.keys(Xe)){const tt=get(Xe,Je);if(tt){const{_f:st,...rt}=tt;if(st&&Ke(st.name)){if(st.ref.focus){st.ref.focus();break}else if(st.refs&&st.refs[0].focus){st.refs[0].focus();break}}else isObject(rt)&&focusFieldBy(rt,Ke)}}};var getValidationModes=Xe=>({isOnSubmit:!Xe||Xe===VALIDATION_MODE.onSubmit,isOnBlur:Xe===VALIDATION_MODE.onBlur,isOnChange:Xe===VALIDATION_MODE.onChange,isOnAll:Xe===VALIDATION_MODE.all,isOnTouch:Xe===VALIDATION_MODE.onTouched}),isWatched=(Xe,Ke,Ye)=>!Ye&&(Ke.watchAll||Ke.watch.has(Xe)||[...Ke.watch].some(Je=>Xe.startsWith(Je)&&/^\.\w+/.test(Xe.slice(Je.length)))),updateFieldArrayRootError=(Xe,Ke,Ye)=>{const Je=compact(get(Xe,Ye));return set(Je,"root",Ke[Ye]),set(Xe,Ye,Je),Xe},isBoolean=Xe=>typeof Xe=="boolean",isFileInput=Xe=>Xe.type==="file",isFunction=Xe=>typeof Xe=="function",isHTMLElement=Xe=>{if(!isWeb)return!1;const Ke=Xe?Xe.ownerDocument:0;return Xe instanceof(Ke&&Ke.defaultView?Ke.defaultView.HTMLElement:HTMLElement)},isMessage=Xe=>isString(Xe)||React.isValidElement(Xe),isRadioInput=Xe=>Xe.type==="radio",isRegex=Xe=>Xe instanceof RegExp;const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=Xe=>{if(Array.isArray(Xe)){if(Xe.length>1){const Ke=Xe.filter(Ye=>Ye&&Ye.checked&&!Ye.disabled).map(Ye=>Ye.value);return{value:Ke,isValid:!!Ke.length}}return Xe[0].checked&&!Xe[0].disabled?Xe[0].attributes&&!isUndefined(Xe[0].attributes.value)?isUndefined(Xe[0].value)||Xe[0].value===""?validResult:{value:Xe[0].value,isValid:!0}:validResult:defaultResult}return defaultResult};const defaultReturn={isValid:!1,value:null};var getRadioValue=Xe=>Array.isArray(Xe)?Xe.reduce((Ke,Ye)=>Ye&&Ye.checked&&!Ye.disabled?{isValid:!0,value:Ye.value}:Ke,defaultReturn):defaultReturn;function getValidateError(Xe,Ke,Ye="validate"){if(isMessage(Xe)||Array.isArray(Xe)&&Xe.every(isMessage)||isBoolean(Xe)&&!Xe)return{type:Ye,message:isMessage(Xe)?Xe:"",ref:Ke}}var getValueAndMessage=Xe=>isObject(Xe)&&!isRegex(Xe)?Xe:{value:Xe,message:""},validateField=async(Xe,Ke,Ye,Je,tt)=>{const{ref:st,refs:rt,required:it,maxLength:ot,minLength:at,min:lt,max:ut,pattern:ht,validate:pt,name:ft,valueAsNumber:xt,mount:vt,disabled:At}=Xe._f,Et=get(Ke,ft);if(!vt||At)return{};const wt=rt?rt[0]:st,_t=Lt=>{Je&&wt.reportValidity&&(wt.setCustomValidity(isBoolean(Lt)?"":Lt||""),wt.reportValidity())},Ct={},Tt=isRadioInput(st),St=isCheckBoxInput(st),Rt=Tt||St,Nt=(xt||isFileInput(st))&&isUndefined(st.value)&&isUndefined(Et)||isHTMLElement(st)&&st.value===""||Et===""||Array.isArray(Et)&&!Et.length,Pt=appendErrors.bind(null,ft,Ye,Ct),Bt=(Lt,zt,Dt,Vt=INPUT_VALIDATION_RULES.maxLength,Gt=INPUT_VALIDATION_RULES.minLength)=>{const Qt=Lt?zt:Dt;Ct[ft]={type:Lt?Vt:Gt,message:Qt,ref:st,...Pt(Lt?Vt:Gt,Qt)}};if(tt?!Array.isArray(Et)||!Et.length:it&&(!Rt&&(Nt||isNullOrUndefined(Et))||isBoolean(Et)&&!Et||St&&!getCheckboxValue(rt).isValid||Tt&&!getRadioValue(rt).isValid)){const{value:Lt,message:zt}=isMessage(it)?{value:!!it,message:it}:getValueAndMessage(it);if(Lt&&(Ct[ft]={type:INPUT_VALIDATION_RULES.required,message:zt,ref:wt,...Pt(INPUT_VALIDATION_RULES.required,zt)},!Ye))return _t(zt),Ct}if(!Nt&&(!isNullOrUndefined(lt)||!isNullOrUndefined(ut))){let Lt,zt;const Dt=getValueAndMessage(ut),Vt=getValueAndMessage(lt);if(!isNullOrUndefined(Et)&&!isNaN(Et)){const Gt=st.valueAsNumber||Et&&+Et;isNullOrUndefined(Dt.value)||(Lt=Gt>Dt.value),isNullOrUndefined(Vt.value)||(zt=Gt<Vt.value)}else{const Gt=st.valueAsDate||new Date(Et),Qt=Yt=>new Date(new Date().toDateString()+" "+Yt),jt=st.type=="time",Ht=st.type=="week";isString(Dt.value)&&Et&&(Lt=jt?Qt(Et)>Qt(Dt.value):Ht?Et>Dt.value:Gt>new Date(Dt.value)),isString(Vt.value)&&Et&&(zt=jt?Qt(Et)<Qt(Vt.value):Ht?Et<Vt.value:Gt<new Date(Vt.value))}if((Lt||zt)&&(Bt(!!Lt,Dt.message,Vt.message,INPUT_VALIDATION_RULES.max,INPUT_VALIDATION_RULES.min),!Ye))return _t(Ct[ft].message),Ct}if((ot||at)&&!Nt&&(isString(Et)||tt&&Array.isArray(Et))){const Lt=getValueAndMessage(ot),zt=getValueAndMessage(at),Dt=!isNullOrUndefined(Lt.value)&&Et.length>Lt.value,Vt=!isNullOrUndefined(zt.value)&&Et.length<zt.value;if((Dt||Vt)&&(Bt(Dt,Lt.message,zt.message),!Ye))return _t(Ct[ft].message),Ct}if(ht&&!Nt&&isString(Et)){const{value:Lt,message:zt}=getValueAndMessage(ht);if(isRegex(Lt)&&!Et.match(Lt)&&(Ct[ft]={type:INPUT_VALIDATION_RULES.pattern,message:zt,ref:st,...Pt(INPUT_VALIDATION_RULES.pattern,zt)},!Ye))return _t(zt),Ct}if(pt){if(isFunction(pt)){const Lt=await pt(Et,Ke),zt=getValidateError(Lt,wt);if(zt&&(Ct[ft]={...zt,...Pt(INPUT_VALIDATION_RULES.validate,zt.message)},!Ye))return _t(zt.message),Ct}else if(isObject(pt)){let Lt={};for(const zt in pt){if(!isEmptyObject(Lt)&&!Ye)break;const Dt=getValidateError(await pt[zt](Et,Ke),wt,zt);Dt&&(Lt={...Dt,...Pt(zt,Dt.message)},_t(Dt.message),Ye&&(Ct[ft]=Lt))}if(!isEmptyObject(Lt)&&(Ct[ft]={ref:wt,...Lt},!Ye))return Ct}}return _t(!0),Ct};function baseGet(Xe,Ke){const Ye=Ke.slice(0,-1).length;let Je=0;for(;Je<Ye;)Xe=isUndefined(Xe)?Je++:Xe[Ke[Je++]];return Xe}function isEmptyArray(Xe){for(const Ke in Xe)if(!isUndefined(Xe[Ke]))return!1;return!0}function unset(Xe,Ke){const Ye=Array.isArray(Ke)?Ke:isKey(Ke)?[Ke]:stringToPath(Ke),Je=Ye.length===1?Xe:baseGet(Xe,Ye),tt=Ye.length-1,st=Ye[tt];return Je&&delete Je[st],tt!==0&&(isObject(Je)&&isEmptyObject(Je)||Array.isArray(Je)&&isEmptyArray(Je))&&unset(Xe,Ye.slice(0,-1)),Xe}function createSubject(){let Xe=[];return{get observers(){return Xe},next:tt=>{for(const st of Xe)st.next(tt)},subscribe:tt=>(Xe.push(tt),{unsubscribe:()=>{Xe=Xe.filter(st=>st!==tt)}}),unsubscribe:()=>{Xe=[]}}}var isPrimitive=Xe=>isNullOrUndefined(Xe)||!isObjectType(Xe);function deepEqual(Xe,Ke){if(isPrimitive(Xe)||isPrimitive(Ke))return Xe===Ke;if(isDateObject(Xe)&&isDateObject(Ke))return Xe.getTime()===Ke.getTime();const Ye=Object.keys(Xe),Je=Object.keys(Ke);if(Ye.length!==Je.length)return!1;for(const tt of Ye){const st=Xe[tt];if(!Je.includes(tt))return!1;if(tt!=="ref"){const rt=Ke[tt];if(isDateObject(st)&&isDateObject(rt)||isObject(st)&&isObject(rt)||Array.isArray(st)&&Array.isArray(rt)?!deepEqual(st,rt):st!==rt)return!1}}return!0}var isMultipleSelect=Xe=>Xe.type==="select-multiple",isRadioOrCheckbox=Xe=>isRadioInput(Xe)||isCheckBoxInput(Xe),live=Xe=>isHTMLElement(Xe)&&Xe.isConnected,objectHasFunction=Xe=>{for(const Ke in Xe)if(isFunction(Xe[Ke]))return!0;return!1};function markFieldsDirty(Xe,Ke={}){const Ye=Array.isArray(Xe);if(isObject(Xe)||Ye)for(const Je in Xe)Array.isArray(Xe[Je])||isObject(Xe[Je])&&!objectHasFunction(Xe[Je])?(Ke[Je]=Array.isArray(Xe[Je])?[]:{},markFieldsDirty(Xe[Je],Ke[Je])):isNullOrUndefined(Xe[Je])||(Ke[Je]=!0);return Ke}function getDirtyFieldsFromDefaultValues(Xe,Ke,Ye){const Je=Array.isArray(Xe);if(isObject(Xe)||Je)for(const tt in Xe)Array.isArray(Xe[tt])||isObject(Xe[tt])&&!objectHasFunction(Xe[tt])?isUndefined(Ke)||isPrimitive(Ye[tt])?Ye[tt]=Array.isArray(Xe[tt])?markFieldsDirty(Xe[tt],[]):{...markFieldsDirty(Xe[tt])}:getDirtyFieldsFromDefaultValues(Xe[tt],isNullOrUndefined(Ke)?{}:Ke[tt],Ye[tt]):deepEqual(Xe[tt],Ke[tt])?delete Ye[tt]:Ye[tt]=!0;return Ye}var getDirtyFields=(Xe,Ke)=>getDirtyFieldsFromDefaultValues(Xe,Ke,markFieldsDirty(Ke)),getFieldValueAs=(Xe,{valueAsNumber:Ke,valueAsDate:Ye,setValueAs:Je})=>isUndefined(Xe)?Xe:Ke?Xe===""?NaN:Xe&&+Xe:Ye&&isString(Xe)?new Date(Xe):Je?Je(Xe):Xe;function getFieldValue(Xe){const Ke=Xe.ref;if(!(Xe.refs?Xe.refs.every(Ye=>Ye.disabled):Ke.disabled))return isFileInput(Ke)?Ke.files:isRadioInput(Ke)?getRadioValue(Xe.refs).value:isMultipleSelect(Ke)?[...Ke.selectedOptions].map(({value:Ye})=>Ye):isCheckBoxInput(Ke)?getCheckboxValue(Xe.refs).value:getFieldValueAs(isUndefined(Ke.value)?Xe.ref.value:Ke.value,Xe)}var getResolverOptions=(Xe,Ke,Ye,Je)=>{const tt={};for(const st of Xe){const rt=get(Ke,st);rt&&set(tt,st,rt._f)}return{criteriaMode:Ye,names:[...Xe],fields:tt,shouldUseNativeValidation:Je}},getRuleValue=Xe=>isUndefined(Xe)?Xe:isRegex(Xe)?Xe.source:isObject(Xe)?isRegex(Xe.value)?Xe.value.source:Xe.value:Xe,hasValidation=Xe=>Xe.mount&&(Xe.required||Xe.min||Xe.max||Xe.maxLength||Xe.minLength||Xe.pattern||Xe.validate);function schemaErrorLookup(Xe,Ke,Ye){const Je=get(Xe,Ye);if(Je||isKey(Ye))return{error:Je,name:Ye};const tt=Ye.split(".");for(;tt.length;){const st=tt.join("."),rt=get(Ke,st),it=get(Xe,st);if(rt&&!Array.isArray(rt)&&Ye!==st)return{name:Ye};if(it&&it.type)return{name:st,error:it};tt.pop()}return{name:Ye}}var skipValidation=(Xe,Ke,Ye,Je,tt)=>tt.isOnAll?!1:!Ye&&tt.isOnTouch?!(Ke||Xe):(Ye?Je.isOnBlur:tt.isOnBlur)?!Xe:(Ye?Je.isOnChange:tt.isOnChange)?Xe:!0,unsetEmptyArray=(Xe,Ke)=>!compact(get(Xe,Ke)).length&&unset(Xe,Ke);const defaultOptions={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(Xe={},Ke){let Ye={...defaultOptions,...Xe};const Je=Xe.resetOptions&&Xe.resetOptions.keepDirtyValues;let tt={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},st={},rt=isObject(Ye.defaultValues)||isObject(Ye.values)?cloneObject(Ye.defaultValues||Ye.values)||{}:{},it=Ye.shouldUnregister?{}:cloneObject(rt),ot={action:!1,mount:!1,watch:!1},at={mount:new Set,unMount:new Set,array:new Set,watch:new Set},lt,ut=0;const ht={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},pt={watch:createSubject(),array:createSubject(),state:createSubject()},ft=getValidationModes(Ye.mode),xt=getValidationModes(Ye.reValidateMode),vt=Ye.criteriaMode===VALIDATION_MODE.all,At=Wt=>sn=>{clearTimeout(ut),ut=window.setTimeout(Wt,sn)},Et=async Wt=>{if(ht.isValid||Wt){const sn=Ye.resolver?isEmptyObject((await Nt()).errors):await Bt(st,!0);sn!==tt.isValid&&pt.state.next({isValid:sn})}},wt=Wt=>ht.isValidating&&pt.state.next({isValidating:Wt}),_t=(Wt,sn=[],hn,En,An=!0,wn=!0)=>{if(En&&hn){if(ot.action=!0,wn&&Array.isArray(get(st,Wt))){const Fn=hn(get(st,Wt),En.argA,En.argB);An&&set(st,Wt,Fn)}if(wn&&Array.isArray(get(tt.errors,Wt))){const Fn=hn(get(tt.errors,Wt),En.argA,En.argB);An&&set(tt.errors,Wt,Fn),unsetEmptyArray(tt.errors,Wt)}if(ht.touchedFields&&wn&&Array.isArray(get(tt.touchedFields,Wt))){const Fn=hn(get(tt.touchedFields,Wt),En.argA,En.argB);An&&set(tt.touchedFields,Wt,Fn)}ht.dirtyFields&&(tt.dirtyFields=getDirtyFields(rt,it)),pt.state.next({name:Wt,isDirty:zt(Wt,sn),dirtyFields:tt.dirtyFields,errors:tt.errors,isValid:tt.isValid})}else set(it,Wt,sn)},Ct=(Wt,sn)=>{set(tt.errors,Wt,sn),pt.state.next({errors:tt.errors})},Tt=(Wt,sn,hn,En)=>{const An=get(st,Wt);if(An){const wn=get(it,Wt,isUndefined(hn)?get(rt,Wt):hn);isUndefined(wn)||En&&En.defaultChecked||sn?set(it,Wt,sn?wn:getFieldValue(An._f)):Gt(Wt,wn),ot.mount&&Et()}},St=(Wt,sn,hn,En,An)=>{let wn=!1,Fn=!1;const Hn={name:Wt};if(!hn||En){ht.isDirty&&(Fn=tt.isDirty,tt.isDirty=Hn.isDirty=zt(),wn=Fn!==Hn.isDirty);const Yn=deepEqual(get(rt,Wt),sn);Fn=get(tt.dirtyFields,Wt),Yn?unset(tt.dirtyFields,Wt):set(tt.dirtyFields,Wt,!0),Hn.dirtyFields=tt.dirtyFields,wn=wn||ht.dirtyFields&&Fn!==!Yn}if(hn){const Yn=get(tt.touchedFields,Wt);Yn||(set(tt.touchedFields,Wt,hn),Hn.touchedFields=tt.touchedFields,wn=wn||ht.touchedFields&&Yn!==hn)}return wn&&An&&pt.state.next(Hn),wn?Hn:{}},Rt=(Wt,sn,hn,En)=>{const An=get(tt.errors,Wt),wn=ht.isValid&&isBoolean(sn)&&tt.isValid!==sn;if(Xe.delayError&&hn?(lt=At(()=>Ct(Wt,hn)),lt(Xe.delayError)):(clearTimeout(ut),lt=null,hn?set(tt.errors,Wt,hn):unset(tt.errors,Wt)),(hn?!deepEqual(An,hn):An)||!isEmptyObject(En)||wn){const Fn={...En,...wn&&isBoolean(sn)?{isValid:sn}:{},errors:tt.errors,name:Wt};tt={...tt,...Fn},pt.state.next(Fn)}wt(!1)},Nt=async Wt=>await Ye.resolver(it,Ye.context,getResolverOptions(Wt||at.mount,st,Ye.criteriaMode,Ye.shouldUseNativeValidation)),Pt=async Wt=>{const{errors:sn}=await Nt();if(Wt)for(const hn of Wt){const En=get(sn,hn);En?set(tt.errors,hn,En):unset(tt.errors,hn)}else tt.errors=sn;return sn},Bt=async(Wt,sn,hn={valid:!0})=>{for(const En in Wt){const An=Wt[En];if(An){const{_f:wn,...Fn}=An;if(wn){const Hn=at.array.has(wn.name),Yn=await validateField(An,it,vt,Ye.shouldUseNativeValidation,Hn);if(Yn[wn.name]&&(hn.valid=!1,sn))break;!sn&&(get(Yn,wn.name)?Hn?updateFieldArrayRootError(tt.errors,Yn,wn.name):set(tt.errors,wn.name,Yn[wn.name]):unset(tt.errors,wn.name))}Fn&&await Bt(Fn,sn,hn)}}return hn.valid},Lt=()=>{for(const Wt of at.unMount){const sn=get(st,Wt);sn&&(sn._f.refs?sn._f.refs.every(hn=>!live(hn)):!live(sn._f.ref))&&mn(Wt)}at.unMount=new Set},zt=(Wt,sn)=>(Wt&&sn&&set(it,Wt,sn),!deepEqual(Jt(),rt)),Dt=(Wt,sn,hn)=>generateWatchOutput(Wt,at,{...ot.mount?it:isUndefined(sn)?rt:isString(Wt)?{[Wt]:sn}:sn},hn,sn),Vt=Wt=>compact(get(ot.mount?it:rt,Wt,Xe.shouldUnregister?get(rt,Wt,[]):[])),Gt=(Wt,sn,hn={})=>{const En=get(st,Wt);let An=sn;if(En){const wn=En._f;wn&&(!wn.disabled&&set(it,Wt,getFieldValueAs(sn,wn)),An=isHTMLElement(wn.ref)&&isNullOrUndefined(sn)?"":sn,isMultipleSelect(wn.ref)?[...wn.ref.options].forEach(Fn=>Fn.selected=An.includes(Fn.value)):wn.refs?isCheckBoxInput(wn.ref)?wn.refs.length>1?wn.refs.forEach(Fn=>(!Fn.defaultChecked||!Fn.disabled)&&(Fn.checked=Array.isArray(An)?!!An.find(Hn=>Hn===Fn.value):An===Fn.value)):wn.refs[0]&&(wn.refs[0].checked=!!An):wn.refs.forEach(Fn=>Fn.checked=Fn.value===An):isFileInput(wn.ref)?wn.ref.value="":(wn.ref.value=An,wn.ref.type||pt.watch.next({name:Wt})))}(hn.shouldDirty||hn.shouldTouch)&&St(Wt,An,hn.shouldTouch,hn.shouldDirty,!0),hn.shouldValidate&&Yt(Wt)},Qt=(Wt,sn,hn)=>{for(const En in sn){const An=sn[En],wn=`${Wt}.${En}`,Fn=get(st,wn);(at.array.has(Wt)||!isPrimitive(An)||Fn&&!Fn._f)&&!isDateObject(An)?Qt(wn,An,hn):Gt(wn,An,hn)}},jt=(Wt,sn,hn={})=>{const En=get(st,Wt),An=at.array.has(Wt),wn=cloneObject(sn);set(it,Wt,wn),An?(pt.array.next({name:Wt,values:it}),(ht.isDirty||ht.dirtyFields)&&hn.shouldDirty&&pt.state.next({name:Wt,dirtyFields:getDirtyFields(rt,it),isDirty:zt(Wt,wn)})):En&&!En._f&&!isNullOrUndefined(wn)?Qt(Wt,wn,hn):Gt(Wt,wn,hn),isWatched(Wt,at)&&pt.state.next({}),pt.watch.next({name:Wt}),!ot.mount&&Ke()},Ht=async Wt=>{const sn=Wt.target;let hn=sn.name;const En=get(st,hn),An=()=>sn.type?getFieldValue(En._f):getEventValue(Wt);if(En){let wn,Fn;const Hn=An(),Yn=Wt.type===EVENTS.BLUR||Wt.type===EVENTS.FOCUS_OUT,Un=!hasValidation(En._f)&&!Ye.resolver&&!get(tt.errors,hn)&&!En._f.deps||skipValidation(Yn,get(tt.touchedFields,hn),tt.isSubmitted,xt,ft),Kn=isWatched(hn,at,Yn);set(it,hn,Hn),Yn?(En._f.onBlur&&En._f.onBlur(Wt),lt&&lt(0)):En._f.onChange&&En._f.onChange(Wt);const hs=St(hn,Hn,Yn,!1),zn=!isEmptyObject(hs)||Kn;if(!Yn&&pt.watch.next({name:hn,type:Wt.type}),Un)return ht.isValid&&Et(),zn&&pt.state.next({name:hn,...Kn?{}:hs});if(!Yn&&Kn&&pt.state.next({}),wt(!0),Ye.resolver){const{errors:es}=await Nt([hn]),bn=schemaErrorLookup(tt.errors,st,hn),pn=schemaErrorLookup(es,st,bn.name||hn);wn=pn.error,hn=pn.name,Fn=isEmptyObject(es)}else wn=(await validateField(En,it,vt,Ye.shouldUseNativeValidation))[hn],wn?Fn=!1:ht.isValid&&(Fn=await Bt(st,!0));En._f.deps&&Yt(En._f.deps),Rt(hn,Fn,wn,hs)}},Yt=async(Wt,sn={})=>{let hn,En;const An=convertToArrayPayload(Wt);if(wt(!0),Ye.resolver){const wn=await Pt(isUndefined(Wt)?Wt:An);hn=isEmptyObject(wn),En=Wt?!An.some(Fn=>get(wn,Fn)):hn}else Wt?(En=(await Promise.all(An.map(async wn=>{const Fn=get(st,wn);return await Bt(Fn&&Fn._f?{[wn]:Fn}:Fn)}))).every(Boolean),!(!En&&!tt.isValid)&&Et()):En=hn=await Bt(st);return pt.state.next({...!isString(Wt)||ht.isValid&&hn!==tt.isValid?{}:{name:Wt},...Ye.resolver||!Wt?{isValid:hn}:{},errors:tt.errors,isValidating:!1}),sn.shouldFocus&&!En&&focusFieldBy(st,wn=>wn&&get(tt.errors,wn),Wt?An:at.mount),En},Jt=Wt=>{const sn={...rt,...ot.mount?it:{}};return isUndefined(Wt)?sn:isString(Wt)?get(sn,Wt):Wt.map(hn=>get(sn,hn))},Zt=(Wt,sn)=>({invalid:!!get((sn||tt).errors,Wt),isDirty:!!get((sn||tt).dirtyFields,Wt),isTouched:!!get((sn||tt).touchedFields,Wt),error:get((sn||tt).errors,Wt)}),nn=Wt=>{Wt&&convertToArrayPayload(Wt).forEach(sn=>unset(tt.errors,sn)),pt.state.next({errors:Wt?tt.errors:{}})},cn=(Wt,sn,hn)=>{const En=(get(st,Wt,{_f:{}})._f||{}).ref;set(tt.errors,Wt,{...sn,ref:En}),pt.state.next({name:Wt,errors:tt.errors,isValid:!1}),hn&&hn.shouldFocus&&En&&En.focus&&En.focus()},an=(Wt,sn)=>isFunction(Wt)?pt.watch.subscribe({next:hn=>Wt(Dt(void 0,sn),hn)}):Dt(Wt,sn,!0),mn=(Wt,sn={})=>{for(const hn of Wt?convertToArrayPayload(Wt):at.mount)at.mount.delete(hn),at.array.delete(hn),get(st,hn)&&(sn.keepValue||(unset(st,hn),unset(it,hn)),!sn.keepError&&unset(tt.errors,hn),!sn.keepDirty&&unset(tt.dirtyFields,hn),!sn.keepTouched&&unset(tt.touchedFields,hn),!Ye.shouldUnregister&&!sn.keepDefaultValue&&unset(rt,hn));pt.watch.next({}),pt.state.next({...tt,...sn.keepDirty?{isDirty:zt()}:{}}),!sn.keepIsValid&&Et()},dn=(Wt,sn={})=>{let hn=get(st,Wt);const En=isBoolean(sn.disabled);return set(st,Wt,{...hn||{},_f:{...hn&&hn._f?hn._f:{ref:{name:Wt}},name:Wt,mount:!0,...sn}}),at.mount.add(Wt),hn?En&&set(it,Wt,sn.disabled?void 0:get(it,Wt,getFieldValue(hn._f))):Tt(Wt,!0,sn.value),{...En?{disabled:sn.disabled}:{},...Ye.shouldUseNativeValidation?{required:!!sn.required,min:getRuleValue(sn.min),max:getRuleValue(sn.max),minLength:getRuleValue(sn.minLength),maxLength:getRuleValue(sn.maxLength),pattern:getRuleValue(sn.pattern)}:{},name:Wt,onChange:Ht,onBlur:Ht,ref:An=>{if(An){dn(Wt,sn),hn=get(st,Wt);const wn=isUndefined(An.value)&&An.querySelectorAll&&An.querySelectorAll("input,select,textarea")[0]||An,Fn=isRadioOrCheckbox(wn),Hn=hn._f.refs||[];if(Fn?Hn.find(Yn=>Yn===wn):wn===hn._f.ref)return;set(st,Wt,{_f:{...hn._f,...Fn?{refs:[...Hn.filter(live),wn,...Array.isArray(get(rt,Wt))?[{}]:[]],ref:{type:wn.type,name:Wt}}:{ref:wn}}}),Tt(Wt,!1,void 0,wn)}else hn=get(st,Wt,{}),hn._f&&(hn._f.mount=!1),(Ye.shouldUnregister||sn.shouldUnregister)&&!(isNameInFieldArray(at.array,Wt)&&ot.action)&&at.unMount.add(Wt)}}},fn=()=>Ye.shouldFocusError&&focusFieldBy(st,Wt=>Wt&&get(tt.errors,Wt),at.mount),Sn=(Wt,sn)=>async hn=>{hn&&(hn.preventDefault&&hn.preventDefault(),hn.persist&&hn.persist());let En=cloneObject(it);if(pt.state.next({isSubmitting:!0}),Ye.resolver){const{errors:An,values:wn}=await Nt();tt.errors=An,En=wn}else await Bt(st);unset(tt.errors,"root"),isEmptyObject(tt.errors)?(pt.state.next({errors:{}}),await Wt(En,hn)):(sn&&await sn({...tt.errors},hn),fn()),pt.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(tt.errors),submitCount:tt.submitCount+1,errors:tt.errors})},Tn=(Wt,sn={})=>{get(st,Wt)&&(isUndefined(sn.defaultValue)?jt(Wt,get(rt,Wt)):(jt(Wt,sn.defaultValue),set(rt,Wt,sn.defaultValue)),sn.keepTouched||unset(tt.touchedFields,Wt),sn.keepDirty||(unset(tt.dirtyFields,Wt),tt.isDirty=sn.defaultValue?zt(Wt,get(rt,Wt)):zt()),sn.keepError||(unset(tt.errors,Wt),ht.isValid&&Et()),pt.state.next({...tt}))},Nn=(Wt,sn={})=>{const hn=Wt||rt,En=cloneObject(hn),An=Wt&&!isEmptyObject(Wt)?En:rt;if(sn.keepDefaultValues||(rt=hn),!sn.keepValues){if(sn.keepDirtyValues||Je)for(const wn of at.mount)get(tt.dirtyFields,wn)?set(An,wn,get(it,wn)):jt(wn,get(An,wn));else{if(isWeb&&isUndefined(Wt))for(const wn of at.mount){const Fn=get(st,wn);if(Fn&&Fn._f){const Hn=Array.isArray(Fn._f.refs)?Fn._f.refs[0]:Fn._f.ref;if(isHTMLElement(Hn)){const Yn=Hn.closest("form");if(Yn){Yn.reset();break}}}}st={}}it=Xe.shouldUnregister?sn.keepDefaultValues?cloneObject(rt):{}:En,pt.array.next({values:An}),pt.watch.next({values:An})}at={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!ot.mount&&Ke(),ot.mount=!ht.isValid||!!sn.keepIsValid,ot.watch=!!Xe.shouldUnregister,pt.state.next({submitCount:sn.keepSubmitCount?tt.submitCount:0,isDirty:sn.keepDirty||sn.keepDirtyValues?tt.isDirty:!!(sn.keepDefaultValues&&!deepEqual(Wt,rt)),isSubmitted:sn.keepIsSubmitted?tt.isSubmitted:!1,dirtyFields:sn.keepDirty||sn.keepDirtyValues?tt.dirtyFields:sn.keepDefaultValues&&Wt?getDirtyFields(rt,Wt):{},touchedFields:sn.keepTouched?tt.touchedFields:{},errors:sn.keepErrors?tt.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},gn=(Wt,sn)=>Nn(isFunction(Wt)?Wt(it):Wt,sn),_n=(Wt,sn={})=>{const hn=get(st,Wt),En=hn&&hn._f;if(En){const An=En.refs?En.refs[0]:En.ref;An.focus&&(An.focus(),sn.shouldSelect&&An.select())}},kn=Wt=>{tt={...tt,...Wt}};return isFunction(Ye.defaultValues)&&Ye.defaultValues().then(Wt=>{gn(Wt,Ye.resetOptions),pt.state.next({isLoading:!1})}),{control:{register:dn,unregister:mn,getFieldState:Zt,_executeSchema:Nt,_focusError:fn,_getWatch:Dt,_getDirty:zt,_updateValid:Et,_removeUnmounted:Lt,_updateFieldArray:_t,_getFieldArray:Vt,_reset:Nn,_updateFormState:kn,_subjects:pt,_proxyFormState:ht,get _fields(){return st},get _formValues(){return it},get _stateFlags(){return ot},set _stateFlags(Wt){ot=Wt},get _defaultValues(){return rt},get _names(){return at},set _names(Wt){at=Wt},get _formState(){return tt},set _formState(Wt){tt=Wt},get _options(){return Ye},set _options(Wt){Ye={...Ye,...Wt}}},trigger:Yt,register:dn,handleSubmit:Sn,watch:an,setValue:jt,getValues:Jt,reset:gn,resetField:Tn,clearErrors:nn,unregister:mn,setError:cn,setFocus:_n,getFieldState:Zt}}function useForm(Xe={}){const Ke=React.useRef(),[Ye,Je]=React.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:isFunction(Xe.defaultValues)?void 0:Xe.defaultValues});Ke.current||(Ke.current={...createFormControl(Xe,()=>Je(st=>({...st}))),formState:Ye});const tt=Ke.current.control;return tt._options=Xe,useSubscribe({subject:tt._subjects.state,next:st=>{shouldRenderFormState(st,tt._proxyFormState,tt._updateFormState,!0)&&Je({...tt._formState})}}),React.useEffect(()=>{tt._stateFlags.mount||(tt._updateValid(),tt._stateFlags.mount=!0),tt._stateFlags.watch&&(tt._stateFlags.watch=!1,tt._subjects.state.next({})),tt._removeUnmounted()}),React.useEffect(()=>{Xe.values&&!deepEqual(Xe.values,tt._defaultValues)&&tt._reset(Xe.values,tt._options.resetOptions)},[Xe.values,tt]),React.useEffect(()=>{Ye.submitCount&&tt._focusError()},[tt,Ye.submitCount]),Ke.current.formState=getProxyFormState(Ye,tt),Ke.current}const TABS$2=[{title:"Edit",to:""},{title:"Preview",to:"preview",disabled:!0},{title:"Mint",disabled:!0}];function Mint(){const Xe=useForm({defaultValues:useMintStore.getState(),mode:"onChange",reValidateMode:"onChange"}),Ke=useUserStore(ht=>ht.address),Ye=useUserStore(ht=>ht.userInfo),Je=useUserStore(ht=>ht.proxyAddress),tt=useUserStore(ht=>ht.proxyName),[st,rt]=reactExports.useState(),{isValid:it,errors:ot,isDirty:at}=useFormState({control:Xe.control}),lt=reactExports.useMemo(()=>(TABS$2[1].disabled=at||!it||Object.keys(ot).length>0,TABS$2),[it,ot,at]),ut=reactExports.useMemo(()=>tt||Je||(Ye==null?void 0:Ye.name)||Ke,[Ke,Je,tt,Ye==null?void 0:Ye.name]);return reactExports.useEffect(()=>{async function ht(){if(Ke){const pt=await useUserStore.getState().getBalance(Ke);rt(pt)}}ht()},[Ke]),jsxRuntimeExports.jsxs(Page,{title:"Mint",children:[jsxRuntimeExports.jsx("h1",{children:"MINT"}),jsxRuntimeExports.jsx(Tabs,{tabs:lt}),jsxRuntimeExports.jsx(FormProvider,{...Xe,children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"sync",children:jsxRuntimeExports.jsx(Outlet,{context:{balance:st,minterName:ut,address:Ke,artifact:Xe.watch("artifact"),isTyped:Xe.watch("isTyped"),isMonoType:Xe.watch("isMonoType"),typedinput:Xe.watch("typedinput"),license:Xe.watch("license")}})})})]})}const profile_page="_profile_page_mfw1p_231",profile_tabs="_profile_tabs_mfw1p_273",restricted="_restricted_mfw1p_501",tab_area="_tab_area_mfw1p_530",styles$l={profile_page,profile_tabs,restricted,tab_area},useObjktDisplayContext=()=>useOutletContext(),TABS$1=[{title:"Info",to:""},{title:"Listings",to:"listings"},{title:"History",to:"history"},{title:"Swap",to:"swap",private:!0,restricted:!0},{title:"Burn",to:"burn",private:!0},{title:"Transfer",to:"transfer",private:!0},{title:"Copyright",to:"copyright"}],ObjktDisplay=()=>{const{id:Xe}=useParams(),Ke=useUserStore(lt=>lt.address),Ye=useUserStore(lt=>lt.proxyAddress),{walletBlockMap:Je,nsfwMap:tt,photosensitiveMap:st,underReviewMap:rt}=useSettings(),{data:it,error:ot}=useSWR(["/token",Xe],async()=>{var lt,ut,ht;if(Xe){const pt=await fetchObjktDetails(Xe);if(!pt)throw/^\d+$/.test(Xe)?new Error(`Cannot find an OBJKT with id: ${Xe}`,{cause:"Unknown OBJKT"}):new Error(`Received a non numeric token_id: ${Xe}.
          This can happen if the requested SUBJKT is conflicting with a protected route. 
          You can still access it by its address (tz/<tz-address>)`,{cause:"Conflicting route"});const ft=tt.get(pt.token_id)===1,xt=st.get(pt.token_id)===1;return(ft||((lt=pt.teia_meta)==null?void 0:lt.content_rating)===METADATA_CONTENT_RATING_MATURE)&&(pt.isNSFW=!0),(xt||(ht=(ut=pt.teia_meta)==null?void 0:ut.accessibility)!=null&&ht.hazards.includes(METADATA_ACCESSIBILITY_HAZARDS_PHOTOSENS))&&(pt.isPhotosensitive=!0),(ft||xt)&&(pt.isModerated=!0),pt.restricted=Je.get(pt.artist_address)===1,pt.underReview=rt.get(pt.artist_address)===1,pt}},{revalidateIfStale:!1,revalidateOnFocus:!1}),at=!it&&!ot;if(at)return jsxRuntimeExports.jsx(Page,{title:"loading",children:at&&jsxRuntimeExports.jsx(Loading,{message:"Loading OBJKT"})});if(ot)throw ot;if(it)return jsxRuntimeExports.jsx(Page,{className:styles$l.profile_page,title:it==null?void 0:it.name,children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[it.restricted?jsxRuntimeExports.jsxs("div",{className:styles$l.restricted,children:["Restricted OBJKT. Contact the Teia moderators on"," ",jsxRuntimeExports.jsx("a",{href:"https://discord.gg/TKeybhYhNe",target:"_blank",rel:"noreferrer",children:"Discord"})," ","to resolve the status. See the"," ",jsxRuntimeExports.jsx("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#content-moderation",target:"_blank",rel:"noreferrer",children:"Teia Terms and Conditions"}),"."]}):null,it.underReview&&jsxRuntimeExports.jsxs("div",{className:styles$l.restricted,children:["OBJKT under review. Contact the Teia moderators on"," ",jsxRuntimeExports.jsx("a",{href:"https://discord.gg/TKeybhYhNe",target:"_blank",rel:"noreferrer",children:"Discord"})," ","to resolve the status."]}),jsxRuntimeExports.jsxs("div",{style:{position:"relative",display:"block",width:"100%"},className:"objkt-display",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(RenderMediaType,{nft:it,displayView:!0})}),jsxRuntimeExports.jsx(ItemInfo,{nft:it})]}),jsxRuntimeExports.jsx(Tabs,{tabs:TABS$1,className:styles$l.profile_tabs,filter:lt=>it!=null&&it.restricted&&lt.restricted||it!=null&&it.holdings&&lt.private&&it.holdings.map(ht=>ht.holder_address).includes(Ke||"UNSYNCED")===!1&&it.artist_address!==Ke&&it.artist_address!==Ye?null:lt}),jsxRuntimeExports.jsx("div",{className:styles$l.tab_area,children:jsxRuntimeExports.jsx(Outlet,{context:{nft:it,viewer_address:Ke}})})]})})},info_ipfs="_info_ipfs_1vvtg_231",info_attributes="_info_attributes_1vvtg_241",infos_attributes_container="_infos_attributes_container_1vvtg_270",infos_attributes_flex="_infos_attributes_flex_1vvtg_274",container$7="_container_1vvtg_280",history="_history_1vvtg_286",history__mint__op="_history__mint__op_1vvtg_298",history__labels="_history__labels_1vvtg_334",history__event__container="_history__event__container_1vvtg_348",history__event="_history__event_1vvtg_348",history__from="_history__from_1vvtg_362",history__to="_history__to_1vvtg_363",history__ed="_history__ed_1vvtg_364",history__price="_history__price_1vvtg_365",history__date="_history__date_1vvtg_366",history__royalties="_history__royalties_1vvtg_417",history__secondary="_history__secondary_1vvtg_430",history__mobile="_history__mobile_1vvtg_435",history__inner__mobile="_history__inner__mobile_1vvtg_462",history__desktop="_history__desktop_1vvtg_478",basic_infos="_basic_infos_1vvtg_487",styles$k={info_ipfs,info_attributes,infos_attributes_container,infos_attributes_flex,container:container$7,history,history__mint__op,history__labels,history__event__container,history__event,history__from,history__to,history__ed,history__price,history__date,history__royalties,history__secondary,history__mobile,history__inner__mobile,history__desktop,basic_infos},Burn=()=>{var ht,pt;const{nft:Xe}=useObjktDisplayContext(),[Ke,Ye,Je]=useUserStore(ft=>[ft.burn,ft.address,ft.proxyAddress]),[tt,st]=useModalStore(ft=>[ft.visible,ft.message]),[rt,it]=reactExports.useState(""),ot=(pt=(ht=Xe.artist_profile)==null?void 0:ht.split_contract)==null?void 0:pt.administrator_address,at=reactExports.useMemo(()=>{var ft;return(ft=Xe.holdings)==null?void 0:ft.find(xt=>xt.holder_address===Ye||xt.holder_address===Je&&Ye===ot)},[Xe,Ye,Je,ot]),lt=reactExports.useMemo(()=>(at==null?void 0:at.amount)||0,[at]),ut=()=>{if(rt===""||rt==="0"){alert("Error: No amount specified.");return}if(rt>lt){alert(`Error: You're trying to burn ${rt}, but you only own ${lt}.`);return}Ke(Xe.token_id,rt)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:tt?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{position:"absolute",left:"50%",top:"35%"},children:st}),jsxRuntimeExports.jsx(Loading,{})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsx("div",{className:styles$k.container,children:jsxRuntimeExports.jsxs("p",{children:["You own ",lt," editions of OBJKT#",Xe.id,". How many would you like to burn?"]})})}),jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsx("div",{className:styles$k.container,children:jsxRuntimeExports.jsx(Input$2,{type:"number",placeholder:"OBJKTs to burn",value:rt,onChange:it,onBlur:ft=>{parseInt(ft.target.value)>=lt&&it(lt)}})})}),jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsxs("div",{className:styles$k.container,children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px"},children:"Burning will transfer the OBJKTs from your possession to a burn address. Once in the burn address, the OBJKT can't be recovered or sold. You can only burn tokens that you own. If you have them swapped, you first need to cancel that swap before you try to burn them."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("strong",{children:"NB: This action is not reversable."})})]})}),jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsx("div",{className:styles$k.container,children:jsxRuntimeExports.jsx(Button,{shadow_box:!0,onClick:ut,fit:!0,children:"Burn"})})})]})})},container$6="_container_15s4d_216",owner="_owner_15s4d_220",styles$j={container:container$6,owner},OwnerList=({owners:Xe})=>{const Ke=Xe.filter(Ye=>Ye.holder_address!==BURN_ADDRESS);return jsxRuntimeExports.jsx("div",{className:styles$j.container,children:Ke.map(({amount:Ye,holder_address:Je,holder_profile:tt})=>jsxRuntimeExports.jsxs("div",{className:styles$j.owner,children:[Ye," ed. ",get$5(tt,"name")?jsxRuntimeExports.jsx(Button,{to:`/${encodeURIComponent(get$5(tt,"name"))}`,children:get$5(tt,"name")}):MARKETPLACE_CONTRACTS_TO_NAME[Je]?jsxRuntimeExports.jsx(Button,{to:`/tz/${Je}`,children:MARKETPLACE_CONTRACTS_TO_NAME[Je]}):jsxRuntimeExports.jsx(Button,{to:`/tz/${Je}`,children:walletPreview(Je)})]},Je))})},container$5="_container_1fuf2_216",swap="_swap_1fuf2_221",issuer="_issuer_1fuf2_232",buttons="_buttons_1fuf2_243",styles$i={container:container$5,swap,issuer,buttons};function ListingRow({nft:Xe,listing:Ke,onCollectClick:Ye,reswapPrices:Je,setReswapPrices:tt,proxyAdminAddress:st,rowId:rt}){const{walletBlockMap:it}=useSettings(),[ot,at]=useUserStore(ft=>[ft.address,ft.proxyAddress]),lt=useUserStore(ft=>ft.reswap),ut=useUserStore(ft=>ft.cancel),ht=Ke.seller_address===ot||st===ot&&Ke.seller_address===at;console.debug("isOwnSwap",ht);const pt=reactExports.useMemo(()=>Xe.restricted||it.get(Ke.seller_address)===1,[Xe.restricted,it,Ke.seller_address]);return jsxRuntimeExports.jsxs("div",{className:styles$i.swap,children:[jsxRuntimeExports.jsxs("div",{className:styles$i.issuer,children:[Ke.amount_left," ed. ",jsxRuntimeExports.jsx(Button,{alt:"seller",to:`/tz/${Ke.seller_address}`,children:get$5(Ke,"seller_profile.name")||walletPreview(Ke.seller_address)})]}),jsxRuntimeExports.jsxs("div",{className:styles$i.buttons,children:[pt&&jsxRuntimeExports.jsx(RestrictedLabel,{}),jsxRuntimeExports.jsx(MarketplaceLabel$1,{listing:Ke}),!pt&&it.get(Ke.seller_address)!==1&&!ht&&jsxRuntimeExports.jsx(Button,{alt:"collect",shadow_box:!0,onClick:()=>Ye(Ke),children:`Collect for ${Ke.price/1e6} tez`}),ht&&!pt&&(Ke.type.startsWith("TEIA")||Ke.type.startsWith("HEN"))&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$i.break}),jsxRuntimeExports.jsx("input",{value:Je[rt]||Ke.price/1e6,onChange:ft=>{const{value:xt}=ft.target;tt(vt=>({...vt,[rt]:xt}))},type:"number",placeholder:"New price",style:{width:"80px",marginRight:"5px"}}),jsxRuntimeExports.jsx(Button,{alt:"Click to reswap",className:styles$i.smol,shadow_box:!0,onClick:async()=>{const ft=Je[rt];!ft||ft<=0||await lt(Xe,ft*1e6,Ke)},children:"reswap"})]}),ht&&jsxRuntimeExports.jsx(Button,{alt:"Click to cancel swap",shadow_box:!0,onClick:()=>ut(Ke.contract_address,Ke.swap_id),className:styles$i.smol,children:"cancel"})]})]})}const Listings=({proxyAdminAddress:Xe,nft:Ke,handleCollect:Ye})=>{var rt;const[Je,tt]=reactExports.useState({}),st=(rt=Ke.listings)==null?void 0:rt.map(it=>({...it,key:it.swap_id||it.ask_id||it.offer_id}));return jsxRuntimeExports.jsxs("div",{className:styles$i.container,children:[st.map(it=>jsxRuntimeExports.jsx(ListingRow,{nft:Ke,rowId:it.key,listing:it,proxyAdminAddress:Xe,reswapPrices:Je,setReswapPrices:tt,onCollectClick:()=>{console.debug("buy",it),Ye(it)}},it.key)),jsxRuntimeExports.jsx(Line,{})]})},Collectors=()=>{var rt,it;const{nft:Xe}=useObjktDisplayContext(),[Ke,Ye,Je]=useUserStore(ot=>[ot.address,ot.sync,ot.collect]),tt=ot=>{Ke==null?Ye():Je(ot)},st=(it=(rt=Xe.artist_profile)==null?void 0:rt.split_contract)==null?void 0:it.administrator_address;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Xe.listings.length>0&&jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsx(Listings,{nft:Xe,handleCollect:tt,proxyAdminAddress:st})}),jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsx(OwnerList,{owners:Xe.holdings})})]})};var baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,numberTag="[object Number]";function isNumber(Xe){return typeof Xe=="number"||isObjectLike(Xe)&&baseGetTag(Xe)==numberTag}var isNumber_1=isNumber;const isNumber$1=getDefaultExportFromCjs(isNumber_1);function UsernameAndLink({event:Xe,attr:Ke}){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:get$5(Xe,`${Ke}_profile.name`)?jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(Button,{href:`/${encodeURIComponent(get$5(Xe,`${Ke}_profile.name`))}`,children:get$5(Xe,`${Ke}_profile.name`)})}):jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(Button,{href:`/tz/${get$5(Xe,`${Ke}_address`)}`,children:walletPreview(get$5(Xe,`${Ke}_address`))})})})}function HistoryRow({eventType:Xe,from:Ke,to:Ye,editions:Je,price:tt,timestamp:st}){return jsxRuntimeExports.jsxs("div",{className:`${styles$k.history}`,children:[jsxRuntimeExports.jsx("div",{className:styles$k.history__event__container,children:Xe}),jsxRuntimeExports.jsx("div",{className:styles$k.history__from,children:Ke?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:`${styles$k.history__mobile} ${styles$k.history__secondary}`,children:"From"}),Ke]}):null}),jsxRuntimeExports.jsx("div",{className:styles$k.history__to,children:Ye?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:`${styles$k.history__mobile} ${styles$k.history__secondary}`,children:"To"}),Ye]}):null}),jsxRuntimeExports.jsx("div",{className:`${styles$k.history__ed} ${styles$k.history__desktop}`,children:Je}),jsxRuntimeExports.jsx("div",{className:`${styles$k.history__price} ${styles$k.history__desktop}`,children:isNumber$1(tt)?`${parseFloat(tt/1e6)} tez`:null}),jsxRuntimeExports.jsx("div",{className:`${styles$k.history__date} ${styles$k.history__desktop}`,title:st,children:getTimeAgo(st)}),jsxRuntimeExports.jsxs("div",{className:styles$k.history__inner__mobile,children:[jsxRuntimeExports.jsx("div",{className:styles$k.history__date,title:st,children:getTimeAgo(st)}),jsxRuntimeExports.jsxs("div",{className:styles$k.history__ed,children:["ed. ",Je]}),jsxRuntimeExports.jsx("div",{className:styles$k.history__price,children:isNumber$1(tt)?`${parseFloat(tt/1e6)} tez`:null})]})]})}const History=()=>{const{nft:Xe}=useObjktDisplayContext();return console.debug("nft.events",Xe==null?void 0:Xe.events),jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsxs("div",{className:styles$k.history__container,children:[jsxRuntimeExports.jsxs("div",{className:styles$k.history__labels,children:[jsxRuntimeExports.jsx("div",{className:styles$k.history__event,style:{width:"calc(10% + 35px)"},children:"Event"}),jsxRuntimeExports.jsx("div",{className:styles$k.history__from,children:"From"}),jsxRuntimeExports.jsx("div",{className:styles$k.history__to,children:"To"}),jsxRuntimeExports.jsx("div",{className:styles$k.history__ed,children:"Ed."}),jsxRuntimeExports.jsx("div",{className:styles$k.history__price,children:"Price"}),jsxRuntimeExports.jsx("div",{className:styles$k.history__date,children:"Time"})]}),Xe.events.map(Ke=>Ke.implements==="SALE"?jsxRuntimeExports.jsx(HistoryRow,{eventType:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TradeIcon,{size:14}),jsxRuntimeExports.jsx("a",{href:`https://tzkt.io/${Ke.ophash}`,target:"_blank",rel:"noreferrer",children:"Trade"})]}),from:jsxRuntimeExports.jsx(UsernameAndLink,{event:Ke,attr:"seller"}),to:jsxRuntimeExports.jsx(UsernameAndLink,{event:Ke,attr:"buyer"}),editions:1,timestamp:Ke.timestamp,price:Ke.price},`t-${Ke.id}`):["OBJKT_ASK","OBJKT_ASK_V2","OBJKT_ASK_V3","OBJKT_ASK_V3_PRE","OBJKT_ASK_V3_2","TEIA_SWAP","HEN_SWAP","HEN_SWAP_V2","VERSUM_SWAP"].includes(Ke.type)?jsxRuntimeExports.jsx(HistoryRow,{eventType:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SwapIcon,{size:14}),jsxRuntimeExports.jsx("a",{href:`https://tzkt.io/${Ke.ophash}`,target:"_blank",rel:"noreferrer",children:"Swap"})]}),from:jsxRuntimeExports.jsx(UsernameAndLink,{event:Ke,attr:"seller"}),editions:Ke.amount,timestamp:Ke.timestamp,price:Ke.price},`t-${Ke.id}`):Ke.type==="FA2_TRANSFER"&&Ke.to_address!==BURN_ADDRESS&&!Ke.from_address.startsWith("KT1")&&!Ke.to_address.startsWith("KT1")?jsxRuntimeExports.jsx(HistoryRow,{eventType:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TradeIcon,{size:14}),jsxRuntimeExports.jsx("a",{href:`https://tzkt.io/${Ke.ophash}`,target:"_blank",rel:"noreferrer",children:"Transfer"})]}),from:jsxRuntimeExports.jsx(UsernameAndLink,{event:Ke,attr:"from"}),to:jsxRuntimeExports.jsx(UsernameAndLink,{event:Ke,attr:"to"}),editions:Ke.amount,timestamp:Ke.timestamp},`t-${Ke.id}`):Ke.type==="FA2_TRANSFER"&&Ke.to_address===BURN_ADDRESS?jsxRuntimeExports.jsx(HistoryRow,{eventType:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BurnIcon,{size:14}),jsxRuntimeExports.jsx("a",{href:`https://tzkt.io/${Ke.ophash}`,target:"_blank",rel:"noreferrer",children:"Burn"})]}),from:jsxRuntimeExports.jsx(UsernameAndLink,{event:Ke,attr:"from"}),to:jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(Button,{href:`/tz/${encodeURIComponent(BURN_ADDRESS)}`,children:"Burn Address"})}),editions:Ke.amount,timestamp:Ke.timestamp},`t-${Ke.id}`):Ke.type==="HEN_MINT"?jsxRuntimeExports.jsx(HistoryRow,{eventType:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MintedIcon,{size:14}),jsxRuntimeExports.jsx("div",{className:styles$k.history__mint__op,children:"Minted"})]}),editions:Ke.editions,timestamp:Ke.timestamp},`t-${Ke.id}`):null),jsxRuntimeExports.jsxs("div",{className:styles$k.history__royalties,children:[formatRoyalties(Xe)," Royalties"]})]})})},container$4="_container_gerq9_216",tag="_tag_gerq9_232",styles$h={container:container$4,tag},Tags=({tags:Xe})=>jsxRuntimeExports.jsx("div",{className:styles$h.container,children:Xe.filter(Ke=>Ke!=="").map((Ke,Ye)=>jsxRuntimeExports.jsx(Button,{to:`${PATH.TAGS}/${encodeURI(Ke)}`,children:jsxRuntimeExports.jsx("div",{className:styles$h.tag,children:Ke})},`tag${Ke}${Ye}`))}),Attribute$1=({label:Xe,value:Ke})=>jsxRuntimeExports.jsxs("div",{className:styles$k.info_attributes,children:[Xe,":",jsxRuntimeExports.jsx("p",{children:Ke})]}),Info=()=>{var rt;const{nft:Xe,viewer_address:Ke}=useObjktDisplayContext(),Ye=HashToURL(Xe.artifact_uri)+`/?creator=${Xe.artist_address}&viewer=${Ke||""}&objkt=${Xe.token_id}`,Je=Ke?`https://anaver.se/?gallery=1&loadsingle=1&singlecontract=${HEN_CONTRACT_FA2}&singletokenid=${Xe.token_id}&wallet=${Ke}&partnerPlatform=teia.art`:`https://anaver.se/?gallery=1&loadsingle=1&singlecontract=${HEN_CONTRACT_FA2}&singletokenid=${Xe.token_id}&partnerPlatform=teia.art`,tt=HashToURL(Xe.metadata_uri),st=Xe.rights==="custom"&&Xe.right_uri&&Xe.right_uri.startsWith("ipfs://")?HashToURL(Xe.right_uri):Xe.right_uri;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsxs("div",{className:styles$k.infos_container,children:[jsxRuntimeExports.jsxs("div",{className:styles$k.basic_infos,children:[jsxRuntimeExports.jsx("h1",{children:Xe.name}),jsxRuntimeExports.jsx("p",{children:Xe.description})]}),(rt=Xe.tags)!=null&&rt.length?jsxRuntimeExports.jsx(Tags,{tags:Xe.tags.map(({tag:it})=>it)}):null]})}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsxs("div",{className:styles$k.infos_attributes_container,children:[jsxRuntimeExports.jsxs("div",{className:styles$k.infos_attributes_flex,children:[jsxRuntimeExports.jsx(Attribute$1,{label:"Mimetype",value:Xe.mime_type}),Xe.language&&jsxRuntimeExports.jsx(Attribute$1,{label:"Language",value:LANGUAGES[Xe.language]}),Xe.isNSFW&&jsxRuntimeExports.jsx(Attribute$1,{label:"Content Rating",value:"NSFW (Mature)"}),Xe.isPhotosensitive&&jsxRuntimeExports.jsx(Attribute$1,{label:"Accessibility Hazards",value:"Photo Sensitive"}),Xe.isModerated&&Xe.artist_address===Ke&&jsxRuntimeExports.jsx(Attribute$1,{label:"Moderation",value:"The TEIA content moderation team has overridden the NSFW or Photosensitive attributes on this token"}),jsxRuntimeExports.jsxs("div",{className:styles$k.info_attributes,children:["Rights:",jsxRuntimeExports.jsx("p",{children:Xe.rights?Xe.rights==="custom"?jsxRuntimeExports.jsx("a",{target:"_blank",href:st,rel:"noreferrer",children:"Custom"}):LICENSE_TYPES[Xe.rights]:LICENSE_TYPES.none})]}),jsxRuntimeExports.jsxs("div",{className:styles$k.info_attributes,children:["Mint date:",jsxRuntimeExports.jsx("p",{children:getWordDate(Xe.minted_at)})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$k.info_ipfs,children:[jsxRuntimeExports.jsx("a",{target:"_blank",rel:"noreferrer",href:tt,children:"Metadata"})," // ",jsxRuntimeExports.jsx("a",{target:"_blank",rel:"noreferrer",href:Ye,children:"View on ipfs"})," // ",jsxRuntimeExports.jsx("a",{target:"_blank",rel:"noreferrer",href:Je,children:"View on anaverse"})]})]})})]})},Swap=()=>{var Ct;const{nft:Xe}=useObjktDisplayContext(),{id:Ke}=useParams(),[Ye,Je,tt]=useUserStore(Tt=>[Tt.address,Tt.proxyAddress,Tt.swap]),[st,rt,it,ot]=useModalStore(Tt=>[Tt.visible,Tt.progress,Tt.message,Tt.show]),[at,lt]=reactExports.useState(""),[ut,ht]=reactExports.useState(""),[pt,ft]=reactExports.useState("tez"),xt=Tt=>{console.debug(Tt),Tt<=.1&&ot(`Price is really low (${Tt}ꜩ), for giveaways checkout hicetdono (dono.xtz.tools)`)},vt=(Ct=Xe.artist_profile)!=null&&Ct.is_split?Xe.artist_profile.split_contract.administrator_address:null,At=reactExports.useMemo(()=>{var Tt;return(Tt=Xe.holdings)==null?void 0:Tt.find(St=>St.holder_address===Ye||St.holder_address===Je&&Ye===vt)},[Xe,Ye,Je,vt]),Et=reactExports.useMemo(()=>(At==null?void 0:At.amount)||0,[At]),wt=async()=>{if(console.debug({amount:at,price:ut}),!at){ot(`Please enter an OBJKT quantity to swap (current value: ${at})`);return}if(ut==null||ut<0){ot(`Please enter a price for the swap (current value: ${ut})`);return}console.debug(Ye,Xe.royalties_total,(ut*1e6).toFixed(0),Ke,Xe.artist_address,parseFloat(at)),console.log([Ye,Xe.royalties_total,(ut*1e6).toFixed(0),Ke,Xe.artist_address,parseFloat(at)]),pt==="tez"&&await tt(Ye,Xe.royalties_total/1e3,(ut*1e6).toFixed(0),Ke,Xe.artist_address,parseFloat(at))},_t={width:"75% !important"};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:st?jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:it}),jsxRuntimeExports.jsx(Loading,{})]})}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsx("div",{className:styles$k.container,children:jsxRuntimeExports.jsxs("p",{children:["You own ",Et," editions of OBJKT#",Ke,". How many would you like to swap?"]})})}),jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsxs("div",{className:styles$k.container,children:[jsxRuntimeExports.jsx("h4",{children:"Quantity"}),jsxRuntimeExports.jsx(Input$2,{type:"number",placeholder:"OBJKT quantity",min:1,value:at,onChange:lt,onBlur:Tt=>{parseInt(Tt.target.value)>Et&&lt(Et)},disabled:rt}),jsxRuntimeExports.jsx("div",{style:{width:"100%",display:"flex"},children:jsxRuntimeExports.jsxs("div",{style:{width:"100%"},children:[jsxRuntimeExports.jsx("h4",{children:"Price"}),jsxRuntimeExports.jsx(Input$2,{style:_t,type:"number",placeholder:"Price Per OBJKT (XTZ)",value:ut,initial:0,onChange:ht,onBlur:Tt=>{const St=parseFloat(Tt.target.value);St>1e6?ht(1e6):St<0&&ht(0),xt(St)},disabled:rt})]})}),jsxRuntimeExports.jsx(Button,{shadow_box:!0,onClick:wt,fit:!0,disabled:rt,children:"Swap"})]})}),jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsx("div",{className:styles$k.container,children:jsxRuntimeExports.jsx("p",{children:"The Teia marketplace fee is set to 2.5%. Fees get directed to the Teia DAO treasury multisig (KT1J9FYz29RBQi1oGLw8uXyACrzXzV1dHuvb)"})})})]})})},TxRow=({tx:Xe,index:Ke,onAdd:Ye,onRemove:Je})=>{const[tt,st]=reactExports.useState(""),[rt,it]=reactExports.useState(""),ot=useModalStore(ut=>ut.show),at=()=>{validateAddress(rt)?Ye({index:Ke,to_:rt,amount:parseInt(tt),token_id:Xe.token_id}):ot("Transfer",`Invalid address ${rt}`)},lt=ut=>{ut.code==="Enter"&&at()};return Xe?jsxRuntimeExports.jsxs("tr",{className:collabStyles.row,children:[jsxRuntimeExports.jsx("td",{style:{width:"200px"},children:jsxRuntimeExports.jsx(Input$2,{type:"number",name:"transfer-quantity",label:"Quantity",placeholder:"OBJKT quantity",min:1,value:tt,onChange:ut=>{typeof ut=="number"&&st(ut.toString())}})}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx(Input$2,{type:"text",label:"Recipient",placeholder:"to address (tz...)",value:rt,onChange:ut=>{typeof ut=="string"&&it(ut)},onKeyDown:lt,onBlur:at})}),Je&&jsxRuntimeExports.jsx("td",{className:collabStyles.actionCell,children:jsxRuntimeExports.jsx(Button,{alt:"Click to delete this transfer",fit:!0,onClick:()=>Je(Xe),children:jsxRuntimeExports.jsx(SvgClose,{width:16})})}),!Je&&rt&&tt&&jsxRuntimeExports.jsx("td",{className:collabStyles.actionCell,align:"center",children:jsxRuntimeExports.jsx(Button,{alt:"Add transfer to batch list",fit:!0,shadow_box:!0,onClick:at,children:"add"})})]}):null},Transfer=()=>{var vt,At,Et;const{nft:Xe}=useObjktDisplayContext(),[Ke,Ye,Je]=useUserStore(wt=>[wt.address,wt.proxyAddress,wt.transfer]),tt=Ye||Ke,st=(vt=Xe.artist_profile)!=null&&vt.is_split?(Et=(At=Xe.artist_profile)==null?void 0:At.split_contract)==null?void 0:Et.administrator_address:null,rt=reactExports.useMemo(()=>{var wt;return(wt=Xe.holdings)==null?void 0:wt.find(_t=>_t.holder_address===tt&&(Ke===tt||Ke===st))},[Xe,Ke,st,tt]),it={index:0,to_:void 0,amount:void 0,token_id:Xe.token_id},[ot,at]=reactExports.useState([{...it}]),lt=classNames$1(collabStyles.table,collabStyles.mt3,collabStyles.mb3),ut=ot.filter(wt=>(wt==null?void 0:wt.to_)&&(wt==null?void 0:wt.amount)),ht=wt=>{const _t=[...ot];_t[wt.index]=wt,at([..._t,{...it,index:_t.length}])},pt=wt=>{const _t=[...ot];delete _t[wt.index],at(_t)},ft=()=>{Je(ut)},xt=rt?rt.amount:0;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:xt===0?jsxRuntimeExports.jsx("div",{className:collabStyles.container,children:jsxRuntimeExports.jsx("p",{children:"No editions found to transfer."})}):jsxRuntimeExports.jsxs("div",{className:collabStyles.container,children:[jsxRuntimeExports.jsxs("h2",{children:["Transfer (count: ",ut.length,"/",xt,")"]}),jsxRuntimeExports.jsx("p",{children:"Add addresses below along with how many tokens you wish to send to each."}),jsxRuntimeExports.jsxs("p",{children:["You currently have ",xt," editions available."]}),jsxRuntimeExports.jsx("table",{className:lt,children:jsxRuntimeExports.jsx("tbody",{children:ot.map((wt,_t)=>jsxRuntimeExports.jsx(TxRow,{tx:wt,index:_t,onAdd:ht,onRemove:_t<ot.length-1?pt:void 0},`transfer-${_t}`))})}),jsxRuntimeExports.jsx(Button,{alt:"Click to transfer the token to the selected wallets",onClick:ft,disabled:ut.length===0,shadow_box:!0,className:collabStyles.btnSecondary,children:"send"})]})})},Copyright=()=>{const{nft:Xe,viewer_address:Ke}=useObjktDisplayContext(),[Ye,Je]=reactExports.useState(null),[tt,st]=reactExports.useState(!0),[rt,it]=reactExports.useState(!1),ot={reproduce:"Right to Reproduce",broadcast:"Right to Broadcast",publicDisplay:"Right to Public Display",createDerivativeWorks:"Right to Create Derivative Works",exclusiveRights:"Exclusive Rights",retainCreatorRights:"Retain Creator Rights Even When Exclusive",requireAttribution:"Require Attribution on Use",rightsAreTransferable:"Rights are Transferable (Secondary Sales)",releasePublicDomain:"Release to Public Domain",customUriEnabled:"Custom URI Enabled",customUri:"Custom URI (External Terms & Works Connected To This Agreement)"},at={reproduce:{true:"✅ Yes",false:"🚫 No"},broadcast:{true:"✅ Yes",false:"🚫 No"},publicDisplay:{true:"✅ Yes",false:"🚫 No"},createDerivativeWorks:{true:"✅ Yes",false:"🚫 No"},releasePublicDomain:{true:"✅ Yes",false:"🚫 No"},customUriEnabled:{true:"📝 Yes",false:"🚫 No"},retainCreatorRights:{true:"✅ Yes",false:"🚫 No"},requireAttribution:{true:"✅ Yes",false:"🚫 No"},rightsAreTransferable:{true:"✅ Yes",false:"🚫 No"}},lt={none:"🚫 None (No Exclusive Rights To Any Party)",majority:"⚖️ Majority Share (50%+ Editions Owned = Exclusive Rights)",superMajority:"⚖️ Super-Majority Share (66.667%+ Editions Owned = Exclusive Rights)"},ut=HashToURL(Xe==null?void 0:Xe.right_uri,"CDN",{size:"raw"});function ht(pt){try{return new URL(pt),!0}catch{return!1}}return reactExports.useEffect(()=>{if(!ut){st(!1);return}axios.get(ut).then(pt=>{Je(pt.data),it(!1)}).catch(pt=>{console.error("Failed to fetch data:",pt),it(!0)}).finally(()=>{st(!1)})},[ut]),tt?jsxRuntimeExports.jsx("div",{children:"Loading license information..."}):rt||!Ye&&!(Xe!=null&&Xe.rights)?jsxRuntimeExports.jsx("div",{children:"N/A or License Data Not Specified. 🚫"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[(Xe==null?void 0:Xe.rights)==="custom"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{children:"Custom License Info"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h4",{children:"URI to Agreement (Permanent)"}),jsxRuntimeExports.jsx("a",{href:ut,target:"_blank",rel:"noopener noreferrer",children:"Metadata"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h4",{children:"License Details"}),jsxRuntimeExports.jsx("ul",{children:(Ye==null?void 0:Ye.clauses)&&Object.entries(Ye==null?void 0:Ye.clauses).map(([pt,ft])=>{var At,Et;const xt=ot[pt],vt=at[pt]?at[pt][ft]:ft;if(pt==="exclusiveRights")return jsxRuntimeExports.jsxs("li",{children:["Exclusive Rights: ",lt[ft]]},pt);if(pt==="expirationDate")return jsxRuntimeExports.jsxs("li",{children:["Expiration Date:"," ",ft?new Date((At=Ye==null?void 0:Ye.clauses)==null?void 0:At.expirationDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"None"]},"expirationDate");if(pt==="customUri"){const wt=(Et=Ye==null?void 0:Ye.clauses)!=null&&Et.customUriEnabled&&ft?jsxRuntimeExports.jsx("a",{href:ft,target:"_blank",rel:"noopener noreferrer",children:ft}):"None";return jsxRuntimeExports.jsxs("li",{children:[xt,": ",wt]},pt)}return pt==="addendum"||pt==="expirationDateExists"?null:jsxRuntimeExports.jsxs("li",{children:[xt,": ",vt]},pt)})})]})}),jsxRuntimeExports.jsx(Line,{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs(Container$3,{children:[jsxRuntimeExports.jsx("h2",{children:"Custom License Agreement"}),jsxRuntimeExports.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word"},children:(Ye==null?void 0:Ye.documentText)||"No license document available."})]})]}),(Xe==null?void 0:Xe.rights)&&jsxRuntimeExports.jsxs(Container$3,{children:[jsxRuntimeExports.jsx("h3",{children:"License Information"}),jsxRuntimeExports.jsx("p",{children:Xe==null?void 0:Xe.rights}),(Xe==null?void 0:Xe.right_uri)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h4",{children:"Link to Metadata"}),jsxRuntimeExports.jsx("a",{href:ht(Xe==null?void 0:Xe.right_uri)?Xe==null?void 0:Xe.right_uri:HashToURL(Xe==null?void 0:Xe.right_uri,"CDN",{size:"raw"}),target:"_blank",rel:"noopener noreferrer",children:"Metadata Link"})]})]})]})};function FilterButton({type:Xe,children:Ke,isActive:Ye,onClick:Je}){return jsxRuntimeExports.jsx(Button,{onClick:()=>{Je(Xe)},children:jsxRuntimeExports.jsx("div",{className:styles$D.tag,style:{textDecoration:Ye?"underline":"none"},children:Ke})})}function Filters({onChange:Xe,filter:Ke,items:Ye=[]}){return jsxRuntimeExports.jsx(Container$3,{children:jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:Ye.map(({type:Je,label:tt})=>jsxRuntimeExports.jsx(FilterButton,{type:Je,onClick:Xe,isActive:Ke===Je,children:tt},Je))})})}const FILTER_ALL$1="ALL",FILTER_FOR_SALE="FOR_SALE",FILTER_NOT_FOR_SALE$1="NOT_FOR_SALE";function Collections(){const{showFilters:Xe,showRestricted:Ke,overrideProtections:Ye,address:Je}=useOutletContext(),[tt,st]=reactExports.useState(FILTER_ALL$1);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Xe&&jsxRuntimeExports.jsx(Filters,{filter:tt,onChange:st,items:[{type:FILTER_ALL$1,label:"All"},{type:FILTER_FOR_SALE,label:"For sale"},{type:FILTER_NOT_FOR_SALE$1,label:"Not for sale"}]}),jsxRuntimeExports.jsx(TokenCollection,{showRestricted:Ke,overrideProtections:Ye,label:"Artist's Collection",namespace:"collections",swrParams:[Je],variables:{address:Je},emptyMessage:"no collections",maxItems:null,postProcessTokens:rt=>tt===FILTER_FOR_SALE?rt.filter(({listing_seller_address:it})=>it===Je):tt===FILTER_NOT_FOR_SALE$1?rt.filter(({listing_seller_address:it,artist_address:ot})=>ot!==Je):rt,extractTokensFromResponse:(rt,{postProcessTokens:it})=>{const ot=rt.holdings.map(({token:ut})=>ut),at=rt.listings.map(({token:ut,seller_address:ht})=>({...ut,listing_seller_address:ht})),lt=uniqBy$1([...ot,...at],({token_id:ut})=>ut).map(ut=>({...ut,key:ut.token_id}));return it(lt)},query:distExports.gql`
          ${BaseTokenFieldsFragment}
          query collectorGallery($address: String!) {
            holdings(
              where: {
                holder_address: { _eq: $address }
                token: {
                  artist_address: { _neq: $address }
                  metadata_status: { _eq: "processed" }
                }
                amount: { _gt: "0" }
              }
              order_by: { last_received_at: desc }
            ) {
              token {
                ...baseTokenFields
              }
            }
            listings(
              where: {
                token: { artist_address: { _neq: $address } }
                seller_address: { _eq: $address }
                status: { _eq: "active" }
              }
              distinct_on: token_id
            ) {
              seller_address
              token {
                ...baseTokenFields
              }
              contract_address
              amount_left
              price
            }
          }
        `})]})}const FILTER_ALL="ALL",FILTER_PRIMARY="PRIMARY",FILTER_SECONDARY="SECONDARY",FILTER_NOT_FOR_SALE="NOT_FOR_SALE";function Creations(){const{showFilters:Xe,showRestricted:Ke,overrideProtections:Ye,address:Je}=useOutletContext(),[tt,st]=reactExports.useState(FILTER_ALL);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Xe&&jsxRuntimeExports.jsx(Filters,{filter:tt,onChange:st,items:[{type:FILTER_ALL,label:"All"},{type:FILTER_PRIMARY,label:"Primary"},{type:FILTER_SECONDARY,label:"Secondary"},{type:FILTER_NOT_FOR_SALE,label:"Not for sale"}]}),jsxRuntimeExports.jsx(TokenCollection,{showRestricted:Ke,overrideProtections:Ye,label:"Artist's Creations",namespace:"creations",swrParams:[Je],variables:{address:Je},emptyMessage:"no creations",maxItems:null,extractTokensFromResponse:rt=>{const it=rt.artist_tokens,ot=rt.artist_single_collabs.map(at=>{var lt,ut;return(lt=at==null?void 0:at.split_contract)!=null&&lt.created_tokens&&at.split_contract.shareholders.length===1?(ut=at==null?void 0:at.split_contract)==null?void 0:ut.created_tokens:[]}).flat();return lodashExports.orderBy([...it,...ot],["minted_at"]).reverse().map(at=>({...at,key:at.token_id}))},postProcessTokens:rt=>tt===FILTER_PRIMARY?rt.filter(it=>get$5(it,"lowest_price_listing.seller_address")===Je):tt===FILTER_SECONDARY?rt.filter(it=>get$5(it,"lowest_price_listing.seller_address")!==Je):tt===FILTER_NOT_FOR_SALE?rt.filter(it=>get$5(it,"lowest_price_listing")===null):rt,query:distExports.gql`
            ${BaseTokenFieldsFragment}
            query creatorGallery($address: String!) {
              artist_tokens: tokens(
                where: {
                  artist_address: { _eq: $address }
                  editions: { _gt: 0 }
                  fa2_address: { _eq: "${HEN_CONTRACT_FA2}" }
                  metadata_status: { _eq: "processed" }
                }
                order_by: { minted_at: desc }
              ) {
                ...baseTokenFields
                lowest_price_listing
              }
              artist_single_collabs: teia_shareholders(
                where: { 
                  shareholder_address: { _eq: $address}, 
                  holder_type: { _eq: "core_participant" } 
                }) {
                split_contract{
                  shareholders(where:{holder_type:{_eq:"core_participant"}}) {
                    shareholder_address
                  }
                  created_tokens(where:{editions:{_gt:"0"}, teia_meta:{is_signed:{_eq:true}}}){
                    ...baseTokenFields
                    lowest_price_listing
                  }
                }
              }
            }
          `})]})}function Collabs(){const{showRestricted:Xe,address:Ke,overrideProtections:Ye}=useOutletContext(),[Je,tt]=reactExports.useState(!1),[st,rt]=reactExports.useState(!1);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Je?jsxRuntimeExports.jsx("div",{className:styles$D.tools,children:jsxRuntimeExports.jsx(Checkbox$1,{small:!0,checked:st,onCheck:rt,label:"Include unverified OBJKTs"})}):null,jsxRuntimeExports.jsx(TokenCollection,{showRestricted:Xe,overrideProtections:Ye,label:"Artist's Collabs",namespace:"collabs",swrParams:[Ke],variables:{address:Ke},emptyMessage:"no collabs",maxItems:null,extractTokensFromResponse:it=>{const ot=it.teia_shareholders.map(at=>get$5(at,"split_contract.created_tokens",[])).flat();return tt(ot.some(at=>!get$5(at,"teia_meta.is_signed"))),orderBy$1(ot,["minted_at"]).reverse().filter(at=>st||get$5(at,"teia_meta.is_signed")).map(at=>({...at,key:at.token_id}))},query:distExports.gql`
          ${BaseTokenFieldsFragment}
          query GetCollabTokens($address: String!) {
            teia_shareholders(
              where: {
                shareholder_address: { _eq: $address }
                holder_type: { _eq: "core_participant" }
              }
            ) {
              split_contract {
                created_tokens(where: { editions: { _gt: "0" } }) {
                  ...baseTokenFields
                }
              }
            }
          }
        `})]})}function Curation(){const{showRestricted:Xe,overrideProtections:Ke,address:Ye}=useOutletContext();return jsxRuntimeExports.jsx(TokenCollection,{showRestricted:Xe,overrideProtections:Ke,label:"Artist's Curation",namespace:"curation",swrParams:[Ye],variables:{address:Ye},emptyMessage:"no curated tokens",maxItems:null,extractTokensFromResponse:Je=>Je.listings.map(({token:tt,seller_address:st})=>({...tt,listing_seller_address:st,key:tt.token_id})),query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query curatorGallery($address: String!) {
          listings(
            where: {
              token: { artist_address: { _neq: $address } }
              seller_address: { _eq: $address }
              status: { _eq: "active" }
            }
            distinct_on: token_id
          ) {
            seller_address
            token {
              ...baseTokenFields
            }
            contract_address
            amount_left
            price
          }
        }
      `})}function Sync(){const Xe=useLocation(),[Ke,Ye,Je,tt]=useUserStore(rt=>[rt.address,rt.setAccount,rt.proxyAddress,rt.sync],shallow);reactExports.useEffect(()=>{(async()=>{Ke||await tt(),await Ye()})().catch(console.error)},[Ke]);const st=rt=>{const it=Je||Ke;switch(rt){case"/tz":case"/feed/friends":return`${rt}/${it}`;case"/settings":case"/subjkt":case"/mint":case"/collaborate":return rt;default:return"/"}};return Ke?jsxRuntimeExports.jsx(Navigate,{to:st(Xe.state),replace:!0}):jsxRuntimeExports.jsxs(Page,{title:"",children:[jsxRuntimeExports.jsx(Loading,{message:"Requesting Permissions"}),jsxRuntimeExports.jsx(Button,{to:"/sync",children:"try again?"})]})}const terms="_terms_647me_221",styles$g={terms},ReactComponent$3=function(Xe){return Object.keys(Xe).forEach(function(Ye){Xe[Ye]}),React.createElement("div",null,React.createElement("h3",null,"Terms of Service for TEIA Marketplace and TEIA DAO LLC"),React.createElement("p",null,"Welcome to Teia Marketplace!"),React.createElement("p",null,"These terms and conditions outline the rules and regulations for the use of Teia’s marketplace, hosted at ",React.createElement("a",{href:"https://teia.art"},"https://teia.art"),", and operated by the nonprofit Decentralized Autonomous Organization “Teia DAO LLC's”, under Non-Profit Entities Act 2020 (P.L. 2021-29) (18 MIRC, Ch. 2), located at PO Box 852, Long Island Rd Majuro in the Republic of the Marshall Islands."),React.createElement("p",null,"By accessing this website you accept these terms and conditions. Also, by using our platform, you accept to abide by our ",React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions"},"Code of Conduct"),". Do not continue to use the Teia marketplace if you do not agree to take all of the terms and conditions stated on this page."),React.createElement("p",null,"To use our Service, you must use a third-party wallet that allows you to engage in transactions on blockchains. When you use Teia Marketplace, you acknowledge that you are subject to the terms of service and privacy policy of these wallet extensions."),React.createElement("p",null,`The following terminology applies to these Terms and Conditions, Privacy Policy, and all Agreements: "User", "You" and "Your" refers to you, the person logs on this website and compliant with the Company's terms and conditions. "The DAO", "Ourselves", "We", "Our" and "Us", refers to our Company. "Party", "Parties", or "Us", refers to both the Client and ourselves. Any use of the above terminology or other words in the singular, plural, capitalization, and/or he/she or they, are taken as interchangeable and therefore as referring to the same.`),React.createElement("h2",null,React.createElement("strong",null,"1. TEIA Marketplace")),React.createElement("p",null,React.createElement("strong",null,"1.1")," Teia marketplace provides a peer-to-peer web3 platform where users can interact with each other by transacting, selling, purchasing, and showcasing blockchain assets. 01.2.-Teia is not a broker, financial institution, or creditor, and it strictly provides a platform for trading Crypto Assets. TEIA Marketplace's focus is solely on facilitating transactions between buyers and sellers of Crypto Assets. TEIA is not a party to any agreement between buyers and sellers of Crypto Assets on the TEIA Marketplace, and any such agreement is solely between the buyer and the seller."),React.createElement("p",null,React.createElement("strong",null,"1.2")," TEIA does not have ownership, custody, or control of digital crypto assets created by our users. Creators of these digital assets are solely responsible for their content or functionality. TEIA is not responsible for any issues that may arise from the use or ownership of digital crypto assets including but not limited to their authenticity, quality, or legality."),React.createElement("h2",null,"2. License"),React.createElement("p",null,React.createElement("strong",null,"2.1")," Teia’s name is part of the intellectual property of Teia Markeptlac and its owned by TEIA or its affiliates or licensors and are protected by intellectual property laws. You may not copy, imitate, or use any TEIA’s name without our prior written permission for each use."),React.createElement("p",null,React.createElement("strong",null,"2.2")," All rights to the user content made available through Teia marketplace are retained by the user, with the exception of those required to enable the operation of our marketplace. By making your content available on Teia, you grant us a license to access, use, host, cache, store, copy, transmit, display, publish, and distribute in any media or distribution method, but solely as necessary to operate and provide services on our platform."),React.createElement("p",null,"You acknowledge and agree that these license rights are royalty-free, transferable, sub-licensable, worldwide, and irrevocable for the entire duration of your User Content being offered on the Teia platform."),React.createElement("p",null,React.createElement("strong",null,"2.3")," The content linked to or associated with any digital crypto assets displayed on TEIA Marketplace, are the property of their respective owners and are protected by intellectual property laws. You may not copy, imitate, or use any third-party intellectual property without the permission of the applicable intellectual property rights holder. Any reference to any products, services, processes, or other information by name, trademark, manufacturer, supplier, or otherwise, does not constitute or imply endorsement, sponsorship, or recommendation by TEIA Marketplace."),React.createElement("p",null,React.createElement("strong",null,"2.4 Software License:")," Teia is developed under MIT/Open Source license: Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Sofware, and to permit persons to whom the Sofware is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software."),React.createElement("p",null,"THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES, OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT, OR OTHERWISE, ARISING FROM, OUT OF, OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE"),React.createElement("h2",null,"3. Assumption of Risks and Content Liability"),React.createElement("ul",null,React.createElement("li",null,React.createElement("p",null,"By using our marketplace you acknowledge and accept the volatility of blockchain assets price. TEIA does not guarantee that purchasers of Crypto Assets will not suffer losses.")),React.createElement("li",null,React.createElement("p",null,"You are solely responsible for determining any applicable taxes for your crypto assets transactions. Neither TEIA nor any other party associated with TEIA will be responsible for determining their applicable taxes.")),React.createElement("li",null,React.createElement("p",null,"Crypto Assets are not stored, sent, or received by the TEIA Marketplace. This is because Crypto Assets only exist based on ownership records maintained on the supporting blockchain, and any transfers of Crypto Assets occur solely on the blockchain and not on the TEIA Marketplace.")),React.createElement("li",null,React.createElement("p",null,"In order to access and use Teia Marketplace, you are responsible for providing all the necessary software and equipment required for connectivity and usage of the service.")),React.createElement("li",null,React.createElement("p",null,"There are various risks involved in using cryptocurrencies, including but not limited to risks of software, hardware, internet connectivity, or unauthorized access by third parties to assets stored on your wallet. You acknowledge that TEIA will not be responsible for any communication failures, errors, or delays experienced while using Crypto Assets, regardless of the cause.")),React.createElement("li",null,React.createElement("p",null,React.createElement("strong",null,"Purchasing user-generated content has risks, including but not limited to counterfeit assets, mislabeled assets, assets with metadata decay vulnerabilities, assets with bugs, and assets that may become non-transferable. TEIA reserves the right to hide assets affected by these or other issues. Inaccessibility of assets on TEIA is not grounds for a claim against TEIA."))),React.createElement("li",null,React.createElement("p",null,"By using our Marketplace, you acknowledge and agree that you assume all risk and responsibility for any breach of license terms by purchasers of content sold on the platform. You waive and release Teia Marketplace from any claims, damages, or liability arising from such breaches or misuse."))),React.createElement("h2",null,"4. User's Rights and Obligations"),React.createElement("ul",null,React.createElement("li",null,React.createElement("p",null,"You agree not to engage in any activities that violate any laws, contracts, intellectual property rights, or other third-party rights. You acknowledge that you are solely responsible for your actions and behavior while accessing or using the platform.")),React.createElement("li",null,React.createElement("p",null,"You guarantee to abide by our Code of Conduct (",React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions"},"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions"),").")),React.createElement("li",null,React.createElement("p",null,"By purchasing a Crypto Asset through Teia Marketplace, you agree that you have conducted sufficient research and have gathered all necessary information to make an informed decision about its purchase.")),React.createElement("li",null,React.createElement("p",null,"You acknowledge and agree that you are solely responsible for verifying the authenticity, legitimacy, and identity of any Crypto Asset you purchase on Teia Marketplace. Furthermore, you understand and accept that Teia Marketplace makes no guarantees or promises regarding the identity, legitimacy, or authenticity of any Crypto Asset available on the platform.")),React.createElement("li",null,React.createElement("p",null,"When creating content through Teia Marketplace, you warrant that you own all legal rights or enough title in the intellectual property rights or you are legally authorized by the intellectual property owner of such asset.")),React.createElement("li",null,React.createElement("p",null,"The creator of each crypto asset determines the license terms applied to it. It's the users’ sole responsibility to review and understand the relevant licensing terms before making a purchase."))),React.createElement("h2",null,"5. Removal of Content From TEIA"),React.createElement("p",null,"If you find any content on our platform that is offensive for any reason, you are free to contact and inform us at any moment. We will consider requests to hide content that doesn’t follow any of our Policies, but we are not obligated to respond to you directly."),React.createElement("h2",null,"Disclaimer"),React.createElement("ul",null,React.createElement("li",null,React.createElement("p",null,"We do not guarantee that the Teia marketplace will meet your requirements, be uninterrupted, timely, secure, or error-free, or that it will be accurate, reliable, complete, or safe. We take no responsibility for any losses, damages, or claims arising from any use of crypto assets, including user errors, server failure or data loss, corrupted wallet files, unauthorized access to applications, or any unauthorized third-party activities.")),React.createElement("li",null,React.createElement("p",null,"Teia DAO LLC is not responsible for damages sustained due to vulnerability or any kind of failure, abnormal behavior of software (e.g., wallet, smart contract), blockchains, or any other features of the platform or its content.")),React.createElement("li",null,React.createElement("p",null,"We may, at our sole discretion and without prior notice, terminate your access to the Teia Marketplace for any reason or no reason at all. You acknowledge and agree that we will not be liable or obligated to you in any way in the event of such termination, and you will not be entitled to a refund of any fees paid to us, to the fullest extent allowed by applicable law.")),React.createElement("li",null,React.createElement("p",null,"We may modify or update our Marketplace and these Terms of Service at our discretion and without prior notice to you. You agree that the platform may change, evolve or be updated over time and that we may add or remove features and make changes to any aspect of Teia’s Marketplace."))),React.createElement("h2",null,"Content Warning**"),React.createElement("p",null,"The art on the Teia.art marketplace is user-created and some of it might not be suitable for all ages. If you are underaged, don’t use the platform without your legal guardians."),React.createElement("h2",null,"Jurisdiction"),React.createElement("ul",null,React.createElement("li",null,React.createElement("p",null,"These Terms shall be interpreted in accordance with the laws of the Republic of The Marshall Islands.")),React.createElement("li",null,React.createElement("p",null,"Any legal disputes that arise from or are related to these terms, including disputes regarding its validity, enforcement, modification, or termination, will be exclusively resolved in the ordinary courts of the Republic of The Marshall Islands"))))};function Terms(){return jsxRuntimeExports.jsx(Page,{title:"terms",children:jsxRuntimeExports.jsx("div",{className:styles$g.terms,children:jsxRuntimeExports.jsx(ReactComponent$3,{})})})}var client={},m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const container$3="_container_18hys_216",grid="_grid_18hys_223",fill_bg="_fill_bg_18hys_234",left="_left_18hys_240",right="_right_18hys_247",separator="_separator_18hys_257",logo="_logo_18hys_267",sync_label="_sync_label_18hys_271",styles$f={container:container$3,grid,fill_bg,left,right,separator,logo,sync_label},menu="_menu_6nzca_216",styles$e={menu},transition={duration:.5,ease:[.43,.13,.23,.96]},Menu=reactExports.memo(({isOpen:Xe=!1})=>{const Ke=Xe?"opened":"closed",Ye={closed:{rotate:0},opened:{rotate:45,translateY:3}},Je={closed:{opacity:1},opened:{opacity:0}},tt={closed:{rotate:0,translateY:0},opened:{rotate:-45,translateY:-3}},st={strokeWidth:2,vectorEffect:"non-scaling-stroke",initial:"closed",animate:Ke,transition};return jsxRuntimeExports.jsx("div",{className:styles$e.menu,children:jsxRuntimeExports.jsxs(motion.svg,{viewBox:"0 0 14 14",overflow:"visible",preserveAspectRatio:"none",children:[jsxRuntimeExports.jsx(motion.line,{x1:"2",x2:"12",y1:"4",y2:"4",variants:Ye,...st}),jsxRuntimeExports.jsx(motion.line,{x1:"2",x2:"12",y1:"7",y2:"7",variants:Je,...st}),jsxRuntimeExports.jsx(motion.line,{x1:"2",x2:"12",y1:"10",y2:"10",variants:tt,...st})]})})}),MainMenu=()=>{const[Xe,Ke,Ye,Je]=useUserStore(ot=>[ot.address,ot.proxyName,ot.proxyAddress,ot.userInfo],shallow),[tt,st]=useLocalSettings(ot=>[ot.zen,ot.setZen]),rt=Ke||(Je==null?void 0:Je.name),it=Ye||Xe;return jsxRuntimeExports.jsxs(motion.div,{className:`${styles$10.menu}`,...fadeIn(),children:[jsxRuntimeExports.jsxs("nav",{className:`${styles$10.content}`,children:[jsxRuntimeExports.jsxs("div",{className:`${styles$10.menu_left}`,children:[jsxRuntimeExports.jsx(MenuItem,{className:styles$10.menu_label,route:"search"}),jsxRuntimeExports.jsx(MenuItem,{className:styles$10.menu_label,route:"about"}),jsxRuntimeExports.jsx(MenuItem,{className:styles$10.menu_label,label:"Getting Started",route:"faq"})]}),jsxRuntimeExports.jsx(Line,{className:styles$10.line,vertical:!0}),jsxRuntimeExports.jsxs("div",{className:styles$10.menu_right,children:[jsxRuntimeExports.jsx("div",{className:styles$10.address,children:walletPreview(Xe)}),jsxRuntimeExports.jsx(MenuItem,{className:styles$10.menu_label,label:"Mint",route:"mint",need_sync:!0}),jsxRuntimeExports.jsx(MenuItem,{className:styles$10.menu_label,label:"Assets",route:`${rt||it}`||"tz",need_sync:!rt||!it}),jsxRuntimeExports.jsx(MenuItem,{className:styles$10.menu_label,need_sync:!0,route:"collaborate"}),jsxRuntimeExports.jsx(MenuItem,{className:styles$10.menu_label,label:"Profile",route:"subjkt",need_sync:!0}),jsxRuntimeExports.jsx(MenuItem,{className:styles$10.menu_label,label:"DAO Governance",route:"dao"}),jsxRuntimeExports.jsx(MenuItem,{className:styles$10.menu_label,label:"Copyright",route:"copyright",need_sync:!0}),jsxRuntimeExports.jsx(MenuItem,{className:styles$10.menu_label,label:"Polls",route:"polls"}),jsxRuntimeExports.jsxs("div",{className:styles$10.state_buttons,children:[jsxRuntimeExports.jsx(Toggle,{box:!0,label:"ZEN",onToggle:st,toggled:tt}),jsxRuntimeExports.jsx(ThemeSelection,{className:styles$10.theme_selection})]})]})]}),jsxRuntimeExports.jsx(Footer,{pin:!0})]})},bottom_banner="_bottom_banner_1bq7w_216",banner="_banner_1bq7w_232",close="_close_1bq7w_256",content="_content_1bq7w_262",styles$d={bottom_banner,banner,close,content},TopBanner=({children:Xe,color:Ke})=>{const[Ye,Je]=reactExports.useState(!0),{y:tt}=useWindowScroll();return reactExports.useEffect(()=>{Je(tt<50)},[tt]),jsxRuntimeExports.jsx(AnimatePresence,{children:Ye&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"40px",y:0},exit:{opacity:0,y:-100},className:styles$d.banner,children:Xe})})},EventBanner=()=>{const[Xe,Ke]=reactExports.useState(),[Ye,Je]=reactExports.useState(),[tt,st]=useLocalSettings(rt=>[rt.has_seen_banner,rt.setHasSeenBanner]);return reactExports.useEffect(()=>{async function rt(){const ot=await(await fetch(`${BANNER_URL}/banner_config.json`)).text(),at=lib.parse(ot);if(Je(at),at.enable<=0)return;const ut=await(await fetch(`${BANNER_URL}/banner.md`)).text();Ke(ut)}try{rt()}catch(it){console.error(it)}},[]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Xe&&!tt&&jsxRuntimeExports.jsxs(TopBanner,{color:Ye==null?void 0:Ye.color,children:[jsxRuntimeExports.jsx(Markdown,{className:styles$d.content,children:Xe}),jsxRuntimeExports.jsx(Button,{onClick:()=>{st(!0)},className:styles$d.close,children:jsxRuntimeExports.jsx(SvgClose,{fill:"var(--background-color)",width:"16"})})]})})},BottomBanner=({children:Xe=null})=>jsxRuntimeExports.jsx("div",{className:styles$d.bottom_banner,children:Xe});reactExports.memo(BottomBanner);const sample_events=[{title:"Art4Artists",icon:"🖼️ ",link:"https://x.com/EggsUnknow/status/1848805355620602309",subtitle:"Art4Artists",content:"Tezos Ecosystem #Art4Artists Breadfond"},{title:"Objkt4Objkt (4th edition)",icon:"🖼️ ",link:"https://twitter.com/kikanicolela/status/1778112619066413422",subtitle:"Objkt4Objkt",content:"Community art event to celebrate the creativity and talent in the space, in an inclusive way!"},{title:"Anaverse Integration",icon:"🖼️ ",link:"https://blog.teia.art/blog/anaverse-integration-announcement",subtitle:"new feature",content:"Teia just received a nice little new feature: 3D previews for your NFTs! This new addition allows you to experience your tokens in a immersive genertive 3D space."},{title:"Tez4Pal",icon:"🇵🇸",feed:"tez4pal",link:"https://twitter.com/LN0ir/status/1745946304742576400",subtitle:"January 20 to February 20 2024",content:"The Tezos Fundraiser  #Tez4Pal, supporting Gaza civilians, is scheduled from Jan 20 to Feb 20."},{title:"TezQuakeAid - Morocco",icon:"🇲🇦 ",feed:"morocco-quake-aid",link:"https://app.joyn.xyz/space/tezquakeaid-ec7f1f650671",subtitle:"9th September 2023 - ",content:"In September 2023, Morocco has been hit by a devastating earthquake. The TezQuateAid team launched a fundraising campaign dedicated to assisting those who have been impacted by this tragic catastrophe."},{title:"Tezos Pride",icon:"🏳️‍🌈",feed:"tezospride",link:"https://github.com/teia-community/teia-docs/wiki/Tezospride",subtitle:"throughout June and beyond every year",content:"TezosPride is a continuous event to celebrate and support the 2SLGBTQ+ community in the Tezos ecosystem. The main event spans Pride Month (June) annually."},{title:"TezQuakeAid - Turkey/Syria",icon:"🇹🇷🇸🇾 ",feed:"quake-aid",link:"https://app.joyn.xyz/space/tezquakeaid-ec7f1f650671",subtitle:"8st February 2023 - March 2023",content:"The earthquakes in Turkey and Syria in February 2023 have caused immense devastation. The Tezos community has set up donation opportunities to recognised, independent relief organisations. Donations after April 2023 will be directed towards the current flood relief event for Morocco"},{title:"Tezos for Iran",icon:"🇮🇷 ",feed:"iran",link:"https://github.com/teia-community/teia-docs/wiki/Tezos-for-Iran",subtitle:"25 October - 1st January 2022",content:"In the wake of the historic protests against the killing of young Iranian women, Teia has set up a charity fundraiser in solidarity with the protests and to raise awareness for womens rights in Iran."},{title:"Pakistan Fundraiser",icon:"🇵🇰 ",feed:"pakistan",link:"https://github.com/teia-community/teia-docs/wiki/Pakistan-Fundraiser",subtitle:"1st October - 2nd December 2022",content:"In late August, torrential monsoon triggered the biggest climate related disasters in history: a third of Pakistans landmass is submerged in water affecting tens of millions of people, washing away houses, destroying crops, hospitals, schools. To date, more than 1,500 people have lost their lives to the floods, including 552 children. Currently, 73% of the flood victims have inadequate access to necessities like food, water, medical aid, etc."},{title:"Ukraine",feed:"ukraine",icon:"🇺🇦 ",link:"https://github.com/teia-community/teia-docs/wiki/Ukranian-Fundraising",subtitle:"Mid November - Late December 2022",content:`In support for our Ukrainian friends,
brothers and sisters, [Veqtor](https://twitter.com/Veqtor/status/1497167740146266112?s=20&t=mmvu8KPxybOa0TQXX32nFw)
from [Versum](https://twitter.com/versumofficial) in conjunction with [FxHash](https://twitter.com/fx_hash_/status/1497113572085751810?s=20&t=mmvu8KPxybOa0TQXX32nFw)
set up a [shared donation contract](https://tzkt.io/KT1DWnLiUkNtAQDErXxudFEH63JC6mqg3HEx/info),
that will redirect tezos to multiple charity orgs (listed below) in support of Ukraine relief, and we want to help support this initiative.
you can find the source code on [github](https://github.com/ciphrd/public-contracts/blob/master/donations_ukraine.py)`}],event_card="_event_card_ngueb_216",event_content="_event_content_ngueb_236",event_tag_line="_event_tag_line_ngueb_237",event_icon="_event_icon_ngueb_243",styles$c={event_card,event_content,event_tag_line,event_icon},EventCard=({event:Xe})=>{const Ke={hidden:{opacity:0,x:-100,transition:{ease:"easeOut"}},show:{opacity:1,x:0,transition:{ease:"easeOut"}}};return jsxRuntimeExports.jsxs("article",{className:styles$c.event_card,children:[jsxRuntimeExports.jsx(motion.h1,{variants:Ke,children:Xe.feed?jsxRuntimeExports.jsxs(Button,{to:`/feed/${Xe.feed}`,children:[Xe.title," ",Xe.icon&&jsxRuntimeExports.jsx("span",{className:styles$c.event_icon,children:Xe.icon})]}):jsxRuntimeExports.jsxs(Button,{children:[Xe.title,Xe.icon&&jsxRuntimeExports.jsx("span",{className:styles$c.event_icon,children:Xe.icon})]})}),jsxRuntimeExports.jsx(motion.p,{variants:Ke,className:styles$c.event_tag_line,children:Xe.subtitle}),jsxRuntimeExports.jsxs(motion.div,{variants:Ke,className:styles$c.event_content,children:[jsxRuntimeExports.jsx(Markdown,{children:Xe.content}),Xe.link&&jsxRuntimeExports.jsx("a",{target:"_blank",rel:"noreferrer",href:Xe.link,children:"More info >> "})]})]})},Header=()=>{const[Xe,Ke,Ye,Je,tt,st,rt,it]=useUserStore(Bt=>[Bt.address,Bt.setAccount,Bt.proxyName,Bt.proxyAddress,Bt.userInfo,Bt.unsync,Bt.sync,Bt.resetProxy],shallow),[ot,at,lt]=useModalStore(Bt=>[Bt.collapsed,Bt.setCollapsed,Bt.toggleMenu],shallow);reactExports.useEffect(()=>{const Bt=useLocalSettings.getState().applyTheme;return useLocalSettings.subscribe(zt=>zt.theme,Bt,{fireImmediately:!0})},[]),reactExports.useEffect(()=>{const Bt=document.body.parentElement;Bt&&(Bt.style.overflowY=ot?"":"scroll",Bt.style.position=ot?"":"fixed")},[ot]);const ut=useNavigate(),ht=useLocation(),pt=useMedia("(min-width: 600px)"),[ft,xt]=reactExports.useState(),[vt,At]=reactExports.useState(),[Et,wt]=reactExports.useState("Sync"),[_t,Ct]=reactExports.useState(""),[Tt,St]=reactExports.useState("");reactExports.useEffect(()=>{Ke(),xt(Math.floor(Math.random()*150))},[]),reactExports.useEffect(()=>{At(ht.pathname==="/")},[ht.pathname]),reactExports.useEffect(()=>{const Bt=([Lt,zt,Dt,Vt])=>{if(wt(Lt?"Unsync":"Sync"),Lt&&ot){const Gt=zt?` (${Dt||walletPreview(zt)})`:"",Qt=Vt!=null&&Vt.name?`(${Vt.name})`:"";Ct(()=>walletPreview(Lt)+(Gt||Qt)),St(()=>Et.slice(Et.length-5,Et.length).split("").join(" "))}};return useUserStore.subscribe(Lt=>[Lt.address,Lt.proxyAddress,Lt.proxyName,Lt.userInfo],Bt)},[]);const Rt=(Bt,Lt)=>{at(!0),ut(Bt,{state:Lt})},Nt=()=>{if(Xe)if(ot){const Bt=Ye||(tt==null?void 0:tt.name),Lt=Je||Xe;Rt(Bt?`/${Bt}`:`${PATH.ISSUER}/${Lt}`)}else st();else rt()},Pt=classNames$1({[styles$f.grid]:!0,[styles$f.fill_bg]:!ot});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(EventBanner,{}),jsxRuntimeExports.jsx(AnimatePresence,{children:!ot&&jsxRuntimeExports.jsx(MainMenu,{})}),jsxRuntimeExports.jsxs("header",{className:`${styles$f.container}`,children:[jsxRuntimeExports.jsxs("div",{className:Pt,children:[jsxRuntimeExports.jsx("div",{className:styles$f.left,children:jsxRuntimeExports.jsx(DropdownButton$1,{alt:"events dropdown",className:styles$f.events_button,icon:jsxRuntimeExports.jsx(SvgEvents,{}),menuID:"events",label:pt?"Events":"",id:`events-${ht.pathname}`,children:jsxRuntimeExports.jsx(DropDown$1,{menuID:"events",vertical:!0,children:sample_events==null?void 0:sample_events.map(Bt=>jsxRuntimeExports.jsx(EventCard,{event:Bt},`${Bt.title} - ${Bt.subtitle}`))})})}),jsxRuntimeExports.jsx(Button,{alt:"teia logo",to:vt?null:"/",onTo:()=>{at(!0),At(vt)},onClick:()=>{xt(Math.random()*100)},children:jsxRuntimeExports.jsx(RotatingLogo$1,{seed:ft,className:styles$f.logo})}),jsxRuntimeExports.jsxs("div",{className:styles$f.right,children:[!ot&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Button,{alt:"local settings",to:"/settings",onTo:()=>at(!0),className:styles$f.config_button,children:[jsxRuntimeExports.jsx(SvgConfig,{fill:"var(--text-color)",width:16,height:16}),pt&&"Config"]})}),!ot&&Je&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Line,{className:styles$f.separator,vertical:!0}),jsxRuntimeExports.jsx(Button,{alt:"exit collab",small:!0,onClick:()=>it(),secondary:!0,children:"Exit collab"}),jsxRuntimeExports.jsx(Line,{className:styles$f.separator,vertical:!0})]}),jsxRuntimeExports.jsx(Button,{onClick:Nt,className:styles$f.sync_label,secondary:!0,alt:ot?Tt?`wallet account ending in ${Tt}`:"sync wallet":Tt?"unsync":"sync",children:!ot||!Xe?jsxRuntimeExports.jsx("span",{children:Et},"synclabel"):jsxRuntimeExports.jsx("span",{children:_t},"")}),jsxRuntimeExports.jsx(Button,{alt:`${ot?"show":"hide"} menu`,onClick:lt,secondary:!0,children:jsxRuntimeExports.jsx(Menu,{isOpen:!ot})})]})]}),jsxRuntimeExports.jsx(Line,{})]})]})};function useFool(Xe=-2,Ke=2){const[Ye]=useLocalSettings(Je=>[Je.tilted]);reactExports.useEffect(()=>{let Je=document.getElementById("page-styles");Je||(Je=document.createElement("style"),Je.setAttribute("id","page-styles"),document.head.appendChild(Je));let tt="";if(Ye){let st=0;for(;Math.abs(st)<.3;)st=Math.random()*(Ke-Xe)+Xe;tt=`*:not(.no-fool):not([id^="beacon-alert-wrapper-"]):not(main):not(body):not(html):not(#root) { transition: transform 500ms; rotate:${st}deg; }`}Je.innerHTML=tt},[Ye,Xe,Ke])}const App=()=>{const{isLoading:Xe}=useSettings();return useFool(),Xe?jsxRuntimeExports.jsx(Loading,{}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!1,jsxRuntimeExports.jsx(ScrollRestoration,{getKey:Ke=>Ke.key}),jsxRuntimeExports.jsxs(AnimatePresence,{mode:"wait",initial:!1,children:[jsxRuntimeExports.jsx(Header,{},"header"),jsxRuntimeExports.jsx(Outlet,{})]})]})};window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/);function unregister(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(Xe=>{Xe.unregister()}).catch(Xe=>{console.error(Xe.message)})}function HTMLWarning(){return jsxRuntimeExports.jsxs("div",{className:styles$P.warning,children:[jsxRuntimeExports.jsx("p",{children:"IMPORTANT: Please read the guide before minting!"}),jsxRuntimeExports.jsx(Button,{href:"https://github.com/teia-community/teia-docs/wiki/Interactive-OBJKTs",children:jsxRuntimeExports.jsx("strong",{children:"Interactive OBJKTs Guide"})})]})}const container$2="_container_1xgzz_1",field$3="_field_1xgzz_5",media="_media_1xgzz_8",info="_info_1xgzz_9",attributes="_attributes_1xgzz_17",label$1="_label_1xgzz_22",title$1="_title_1xgzz_56",styles$b={container:container$2,field:field$3,media,info,attributes,label:label$1,title:title$1};function isHTML(Xe){return Xe===MIMETYPE.ZIP||Xe===MIMETYPE.ZIP1||Xe===MIMETYPE.ZIP2}const Attribute=({title:Xe,children:Ke})=>Ke&&jsxRuntimeExports.jsxs("div",{className:styles$b.attributes,children:[jsxRuntimeExports.jsxs("strong",{children:[Xe,":"]}),Ke]}),Field=({title:Xe,value:Ke})=>Ke&&jsxRuntimeExports.jsxs("div",{className:styles$b.field,children:[jsxRuntimeExports.jsxs("strong",{children:[Xe,":"]}),jsxRuntimeExports.jsx("p",{children:Ke})]}),Preview=()=>{const[Xe,Ke,Ye,Je,tt,st,rt,it,ot,at,lt,ut,ht]=useMintStore(xt=>[xt.tags,xt.title,xt.description,xt.artifact,xt.cover,xt.license,xt.customLicenseData,xt.royalties,xt.language,xt.photosensitive,xt.nsfw,xt.editions,xt.isMonoType]),{ignoreUriMap:pt}=useSettings(),ft=Xe?Xe===""?[]:Xe.replace(/\s/g,"").split(","):[];return Je?jsxRuntimeExports.jsxs(motion.div,{className:styles$b.container,style:{width:"100%"},initial:{x:"20%"},animate:{x:0},exit:{x:"20%"},transition:{ease:"easeInOut"},children:[isHTML(Je.mimeType)&&jsxRuntimeExports.jsx(HTMLWarning,{}),jsxRuntimeExports.jsx("div",{className:styles$b.media,children:jsxRuntimeExports.jsx(RenderMediaType,{displayView:!0,nft:{mime_type:Je.mimeType,is_mono_type:!!ht},previewUri:Je.reader,previewDisplayUri:tt==null?void 0:tt.reader})}),jsxRuntimeExports.jsxs("div",{className:styles$b.info,children:[jsxRuntimeExports.jsxs("div",{className:styles$b.title,children:[jsxRuntimeExports.jsx("strong",{children:"Title:"}),Ke]}),jsxRuntimeExports.jsx(Field,{title:"Description",value:Ye}),jsxRuntimeExports.jsx(Field,{title:"License",value:st==null?void 0:st.label}),jsxRuntimeExports.jsx(Field,{title:"Language",value:ot==null?void 0:ot.label}),(at||lt)&&jsxRuntimeExports.jsxs("div",{className:styles$b.attributes,children:[jsxRuntimeExports.jsx("strong",{children:"Attributes:"}),lt&&jsxRuntimeExports.jsx("span",{className:styles$b.label,title:"This artwork is NSFW",children:"NSFW"}),at&&jsxRuntimeExports.jsx("span",{className:styles$b.label,title:"This artwork can cause seizures",children:"Photo Sensitive Seizure Warning!"})]}),jsxRuntimeExports.jsx(Attribute,{title:"Tags",children:(ft==null?void 0:ft.length)>0&&jsxRuntimeExports.jsx(Tags,{tags:ft})}),jsxRuntimeExports.jsx(Attribute,{title:"Editions",children:ut}),jsxRuntimeExports.jsxs(Attribute,{title:"Royalties",children:[it,"%"]})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>useMintStore.getState().mint(pt),shadow_box:!0,fit:!0,children:"Mint"})]}):jsxRuntimeExports.jsx(motion.div,{style:{width:"100%"},initial:{x:"20%"},animate:{x:0},exit:{x:"20%"},transition:{ease:"easeInOut"},children:jsxRuntimeExports.jsx("p",{children:"No file provided for preview"})})},text_field_error="_text_field_error_1t5ar_1",error$1="_error_1t5ar_7",field$2="_field_1t5ar_11",typed_field="_typed_field_1t5ar_15",typed_preview="_typed_preview_1t5ar_28",local_styles={text_field_error,error:error$1,field:field$2,typed_field,typed_preview,"visualizer-image-download-button":"_visualizer-image-download-button_1t5ar_51"};var oe={exports:{}},W={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ae;function pr(){if(Ae)return W;Ae=1;var Xe=React,Ke=Symbol.for("react.element"),Ye=Symbol.for("react.fragment"),Je=Object.prototype.hasOwnProperty,tt=Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,st={key:!0,ref:!0,__self:!0,__source:!0};function rt(it,ot,at){var lt,ut={},ht=null,pt=null;at!==void 0&&(ht=""+at),ot.key!==void 0&&(ht=""+ot.key),ot.ref!==void 0&&(pt=ot.ref);for(lt in ot)Je.call(ot,lt)&&!st.hasOwnProperty(lt)&&(ut[lt]=ot[lt]);if(it&&it.defaultProps)for(lt in ot=it.defaultProps,ot)ut[lt]===void 0&&(ut[lt]=ot[lt]);return{$$typeof:Ke,type:it,key:ht,ref:pt,props:ut,_owner:tt.current}}return W.Fragment=Ye,W.jsx=rt,W.jsxs=rt,W}oe.exports=pr();var Ie=oe.exports;const yr=(Xe,Ke,Ye,Je,tt)=>{const st=Xe.getChannelData(0),rt=Ye/(Je+tt),it=Math.floor(st.length/rt),ot=Ke/2;let at=[],lt=0;for(let ut=0;ut<rt;ut++){const ht=[];let pt=0;const ft=[];let xt=0;for(let Et=0;Et<it&&ut*it+Et<Xe.length;Et++){const wt=st[ut*it+Et];wt<=0&&(ht.push(wt),pt++),wt>0&&(ft.push(wt),xt++)}const vt=ht.reduce((Et,wt)=>Et+wt,0)/pt,At={max:ft.reduce((Et,wt)=>Et+wt,0)/xt,min:vt};At.max>lt&&(lt=At.max),Math.abs(At.min)>lt&&(lt=Math.abs(At.min)),at.push(At)}if(ot*.8>lt*ot){const ut=ot*.8/lt;at=at.map(ht=>({max:ht.max*ut,min:ht.min*ut}))}return at},ie=(Xe,Ke,Ye,Je,tt,st,rt,it=0,ot=1)=>{const at=Ke.height/2,lt=Ke.getContext("2d");if(!lt)return;lt.clearRect(0,0,Ke.width,Ke.height),tt!=="transparent"&&(lt.fillStyle=tt,lt.fillRect(0,0,Ke.width,Ke.height));const ut=(it||0)/ot;Xe.forEach((ht,pt)=>{const ft=pt/Xe.length,xt=ut>ft;lt.fillStyle=xt&&rt?rt:st;const vt=pt*(Ye+Je),At=at+ht.min,Et=Ye,wt=at+ht.max-At;lt.beginPath(),lt.roundRect?(lt.roundRect(vt,At,Et,wt,50),lt.fill()):lt.fillRect(vt,At,Et,wt)})},Rr=reactExports.forwardRef(({blob:Xe,width:Ke,height:Ye,barWidth:Je=2,gap:tt=1,currentTime:st,style:rt,backgroundColor:it="transparent",barColor:ot="rgb(184, 184, 184)",barPlayedColor:at="rgb(160, 198, 255)"},lt)=>{const ut=reactExports.useRef(null),[ht,pt]=reactExports.useState([]),[ft,xt]=reactExports.useState(0);return reactExports.useImperativeHandle(lt,()=>ut.current,[]),reactExports.useEffect(()=>{(async()=>{if(!ut.current)return;if(!Xe){const At=Array.from({length:100},()=>({max:0,min:0}));ie(At,ut.current,Je,tt,it,ot,at);return}const vt=await Xe.arrayBuffer();await new AudioContext().decodeAudioData(vt,At=>{if(!ut.current)return;xt(At.duration);const Et=yr(At,Ye,Ke,Je,tt);pt(Et),ie(Et,ut.current,Je,tt,it,ot,at)})})()},[Xe,ut.current]),reactExports.useEffect(()=>{ut.current&&ie(ht,ut.current,Je,tt,it,ot,at,st,ft)},[st,ft]),Ie.jsx("canvas",{ref:ut,width:Ke,height:Ye,style:{...rt}})});Rr.displayName="AudioVisualizer";const combineVisualizerWithMetadata=async(Xe,Ke)=>new Promise((Ye,Je)=>{try{const tt=document.createElement("canvas");tt.width=618,tt.height=382;const st=tt.getContext("2d");if(!st)throw new Error("Could not get canvas context");st.fillStyle="black",st.fillRect(0,0,tt.width,tt.height);const rt=Xe.querySelector("canvas"),it=Xe.querySelector("canvas:last-child");if(!rt||!it)throw new Error("Could not find canvas elements");st.drawImage(rt,0,0),st.drawImage(it,0,0),tt.toBlob(ot=>{ot?Ye(ot):Je(new Error("Failed to create blob"))},"image/png")}catch(tt){Je(tt)}}),MetadataOverlay=({title:Xe,artist:Ke,mimeType:Ye,style:Je})=>{const tt=reactExports.useRef(null);return reactExports.useEffect(()=>{const st=tt.current;if(!st)return;const rt=st.getContext("2d");rt&&(rt.clearRect(0,0,st.width,st.height),rt.fillStyle="white",rt.font="16px monospace",rt.globalAlpha=.8,rt.fillText(`Title: ${Xe}`,15,25),rt.fillText(`Wallet: ${Ke}`,15,45),rt.fillText(`${new Date().toISOString()}`,15,65),rt.fillText(`${Ye}`,15,85),rt.fillText(`Mint Contract: ${HEN_CONTRACT_FA2} (HEN/TEIA)`,15,370))},[Xe,Ke,Ye]),jsxRuntimeExports.jsx("canvas",{ref:tt,width:618,height:382,style:{...Je,pointerEvents:"none"}})},FieldError=reactExports.memo(({error:Xe,text:Ke})=>{const Ye=classNames$1({[local_styles.error]:!0,[local_styles.text_field_error]:Ke});return jsxRuntimeExports.jsx("p",{className:Ye,children:Xe})}),FormFields=({value:Xe,field:Ke,error:Ye,register:Je,control:tt})=>{const st=Ke.name,{watch:rt}=useFormContext(),[it,ot]=useUserStore(xt=>[xt.address,xt.userInfo],shallow),[at,lt]=reactExports.useState(!1),[ut,ht]=reactExports.useState(null),pt=reactExports.useRef(null),ft=(xt,vt)=>xt!=null&&xt.name?`${xt.name} (${vt})`:vt;switch(Ke.type){case"text":case"number":return jsxRuntimeExports.jsxs(Input$2,{className:local_styles.field,name:st,type:Ke.type,label:Ke.label,defaultValue:Ke.defaultValue,placeholder:Ke.placeholder,...Je(st,Ke.rules),children:[jsxRuntimeExports.jsx(Line,{}),Ye&&jsxRuntimeExports.jsx(FieldError,{text:!0,error:Ye.message})]});case"textarea":return jsxRuntimeExports.jsxs(Textarea$1,{className:local_styles.field,label:Ke.label,placeholder:Ke.placeholder,defaultValue:Ke.defaultValue,...Je(st,Ke.rules),children:[jsxRuntimeExports.jsx(Line,{}),Ye&&jsxRuntimeExports.jsx(FieldError,{text:!0,error:Ye.message})]});case"typed-textarea":return jsxRuntimeExports.jsxs(Textarea$1,{className:local_styles.typed_field,label:Ke.label,placeholder:Ke.placeholder,defaultValue:Ke.defaultValue,...Je(st,Ke.rules),children:[jsxRuntimeExports.jsx(Line,{}),Ye&&jsxRuntimeExports.jsx(FieldError,{text:!0,error:Ye.message})]});case"select":case"select-search":return jsxRuntimeExports.jsx(Controller,{control:tt,defaultValue:Ke.defaultValue,name:st,rules:Ke.rules,render:({field:{onChange:xt,value:vt,name:At,ref:Et}})=>jsxRuntimeExports.jsx(Select,{inputRef:Et,className:local_styles.field,options:Ke.options,value:vt,search:Ke.type==="select-search",label:Ke.label,placeholder:Ke.placeholder,defaultValue:Ke.defaultValue,onChange:xt})});case"checkbox":return jsxRuntimeExports.jsx(Controller,{control:tt,defaultValue:Ke.defaultValue,name:st,rules:Ke.rules,render:({field:{onChange:xt,value:vt,name:At,ref:Et}})=>jsxRuntimeExports.jsx(Checkbox$1,{ref:Et,className:local_styles.field,label:Ke.label,defaultValue:Ke.defaultValue,checked:vt,onCheck:wt=>xt(wt)})});case"file":return jsxRuntimeExports.jsx(Controller,{control:tt,defaultValue:Ke.defaultValue,name:st,rules:Ke.rules,render:({field:{onChange:xt,value:vt,name:At,ref:Et}})=>{var wt;return jsxRuntimeExports.jsx(Upload,{ref:Et,name:At,file:vt==null?void 0:vt.file,label:Ke.label,placeHolder:vt?(wt=vt==null?void 0:vt.file)==null?void 0:wt.name:Ke.placeHolder,className:local_styles.field,onChange:xt,allowedTypesLabel:ALLOWED_FILETYPES_LABEL,children:Ye&&jsxRuntimeExports.jsx(FieldError,{error:Ye.message})})}});case"cover-file":return jsxRuntimeExports.jsx(Controller,{control:tt,defaultValue:Ke.defaultValue,name:st,rules:Ke.rules,render:({field:{onChange:xt,value:vt,name:At,ref:Et}})=>{var Nt,Pt,Bt;const wt=rt(vt),_t=wt&&AUDIO_MIME_TYPES.includes((Nt=wt.artifact)==null?void 0:Nt.mimeType),Ct=()=>{var Lt;if(!at&&((Lt=wt==null?void 0:wt.artifact)!=null&&Lt.reader)){const zt=processAudioForVisualizer(wt.artifact.reader);ht(zt)}lt(!0)},Tt={position:"relative",width:"100%",maxWidth:"618px",aspectRatio:"618/382",backgroundColor:"black",overflow:"hidden"},St={position:"absolute",top:0,left:0,width:"100%",height:"100%"},Rt=async()=>{var Lt,zt;if(pt.current)try{const Dt=await combineVisualizerWithMetadata(pt.current,wt),Vt=URL.createObjectURL(Dt),Gt=document.createElement("a");Gt.href=Vt,Gt.download=`${((Lt=wt.artifact)==null?void 0:Lt.name)||"audio"}_cover.png`,document.body.appendChild(Gt),Gt.click(),document.body.removeChild(Gt),URL.revokeObjectURL(Vt);const Qt=new File([Dt],`${((zt=wt.artifact)==null?void 0:zt.name)||"audio"}_cover.png`,{type:"image/png"});xt({file:Qt})}catch(Dt){console.error("Failed to save image:",Dt)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[_t&&!at&&jsxRuntimeExports.jsx(Button,{className:local_styles["visualizer-image-download-button"],onClick:()=>Ct(),children:"Generate Audio Visualization"}),_t&&at&&jsxRuntimeExports.jsxs("div",{className:local_styles.field,children:[jsxRuntimeExports.jsx("p",{children:"Generated Image (Save and Upload Manually)"}),jsxRuntimeExports.jsx("div",{ref:pt,style:Tt,children:jsxRuntimeExports.jsxs("div",{style:St,children:[jsxRuntimeExports.jsx(Rr,{blob:ut,width:618,height:382,backgroundColor:"black",waveColor:"white",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),jsxRuntimeExports.jsx(MetadataOverlay,{title:rt("title")||"Untitled",artist:ft(ot,it),mimeType:(Pt=wt==null?void 0:wt.artifact)==null?void 0:Pt.mimeType,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1}})]})}),jsxRuntimeExports.jsx(Button,{className:local_styles["visualizer-image-download-button"],onClick:Rt,children:"Download As File"})]}),jsxRuntimeExports.jsx(Upload,{ref:Et,name:At,file:vt==null?void 0:vt.file,label:Ke.label,placeHolder:vt?(Bt=vt==null?void 0:vt.file)==null?void 0:Bt.name:Ke.placeHolder,className:local_styles.field,onChange:xt,allowedTypesLabel:ALLOWED_COVER_FILETYPES_LABEL,children:Ye&&jsxRuntimeExports.jsx(FieldError,{error:Ye.message})})]})}});default:return jsxRuntimeExports.jsxs("p",{children:["Unknown field ",Ke.label," of type ",Ke.type]})}};function Form({fields:Xe,defaultValues:Ke,children:Ye,onSubmit:Je,onReset:tt}){const{register:st,control:rt,handleSubmit:it,watch:ot,reset:at,formState:{errors:lt}}=useFormContext();return jsxRuntimeExports.jsxs("form",{style:{width:"100%"},onSubmit:it(Je),children:[Xe.map(ut=>{const ht=ut.watch?ot(ut.name):null;return jsxRuntimeExports.jsx(FormFields,{register:st,value:ht,control:rt,field:{...ut,defaultValue:Ke==null?void 0:Ke[ut.name]},error:lodashExports.get(lt,ut.name)},ut.name)}),Ye,jsxRuntimeExports.jsx(Button,{onClick:()=>{tt==null||tt(),at(Ke)},type:"button",children:"Clear Fields"}),jsxRuntimeExports.jsx(Button,{fit:!0,shadow_box:!0,disabled:Object.keys(lt).length>0,children:"Submit"})]})}const Form$1=reactExports.memo(Form),fields=[{label:"Title",type:"text",placeholder:"Max 500 characters (optional)",rules:{maxLength:{value:500,message:"Title must be 500 characters or less"}}},{label:"This is a text mint",name:"isTyped",type:"checkbox",watch:!0},{label:"Description",type:"textarea",enable_if:"showArtifact",placeholder:"Max 5000 characters (optional)",rules:{value:5e3,message:"Description must be 5000 characters or less"}},{label:"Tags",type:"text",placeholder:"Comma separated. example: illustration, digital (optional)",rules:{setValueAs:Xe=>lodashExports.join(lodashExports.uniq(Xe.split(",").map(Ke=>Ke.trim()).filter(Ke=>Ke)),",")}},{label:"Editions",type:"number",placeholder:`No. editions, 1-${MAX_EDITIONS}`,rules:{required:"You need at least 1 edition",min:{value:1,message:"You need at least 1 edition"},max:{value:MAX_EDITIONS,message:`You can only mint ${MAX_EDITIONS} editions at once.`}}},{label:"Royalties",type:"number",placeholder:`After each sale (between ${MIN_ROYALTIES}-${MAX_ROYALTIES}%)`,rules:{required:`Royalties cannot be left empty, choose a value between ${MIN_ROYALTIES}% and ${MAX_ROYALTIES}%`,min:{value:MIN_ROYALTIES,message:`Royalties must be greater than ${MIN_ROYALTIES}%`},max:{value:MAX_ROYALTIES,message:`Royalties must be less than ${MAX_ROYALTIES}%`}}},{label:"License",placeholder:"(optional)",type:"select",alt:"license selection",options:LICENSE_TYPES_OPTIONS},{label:"Custom License",name:"customLicenseData",enable_if:"useCustomLicense",type:"customCopyrightForm"},{label:"Language",placeholder:"(optional)",rules:{valueAs:Xe=>Xe.value},type:"select-search",alt:"token language",options:LANGUAGES_OPTIONS},{label:"NSFW",type:"checkbox"},{label:"Photo Sensitive Seizure Warning",name:"photosensitive",type:"checkbox"},{label:"Monospace Font Required",name:"isMonoType",type:"checkbox",enable_if:"isTyped",watch:!0},{label:"Artifact",placeHolder:"Upload OBJKT",name:"artifact",type:"file",watch:!0,enable_if:"showArtifact",rules:{required:"You did not select a valid file"}},{label:"Typed Art Input",name:"typedinput",type:"typed-textarea",watch:!0,enable_if:"isTyped",rules:{required:"Typed art mints cannot be empty."}},{label:"Cover Image",placeHolder:"Upload Cover image",name:"cover",type:"cover-file",watch:!0,enable_if:"needsCover",rules:{required:"No cover provided"}}],getFields=Xe=>{const Ke=Object.keys(Xe);return fields.map(Ye=>(Ye.name=Ye.name||lodashExports.kebabCase(Ye.label),Ye)).filter(Ye=>Ye.enable_if&&Ke.includes(Ye.enable_if)?lodashExports.get(Xe,Ye.enable_if):!0)},CollabSwitch=({address:Xe,name:Ke,className:Ye})=>{const[Je,tt]=reactExports.useState([]),[st,rt]=reactExports.useState(!1);reactExports.useEffect(()=>{fetchGraphQL(getCollabsForAddress,"GetCollabs",{address:Xe}).then(({data:ot,errors:at})=>{if(ot){const lt=ot.split_contracts;tt(lt||[])}})},[Xe]);const it=classNames$1(collabStyles.flex,collabStyles.flexBetween,Ye);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Je.length>0&&jsxRuntimeExports.jsxs("div",{className:it,children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{style:{opacity:.5},children:"minting as"})," ",Ke]}),jsxRuntimeExports.jsx(Button,{shadow_box:!0,onClick:()=>rt(!st),children:st?"Cancel":"Change"})]}),st&&jsxRuntimeExports.jsx(CollabContractsOverview,{showAdminOnly:!0})]})},fundsWarning="_fundsWarning_dq9zo_216",styles$a={fundsWarning},processTypedInput=async Xe=>{if(!Xe.typedinput)throw Error("No typedinput");const Ke=new Blob([Xe.typedinput],{type:"text/plain;charset=utf-8"}),Ye=new File([Ke],"typed.txt",{type:"text/plain",lastModified:Date.now()});Xe.artifact=await convertFileToFileForm(Ye),Xe.artifact.reader=URL.createObjectURL(Ke);const Je=await generateTypedArtCoverImage(Xe.typedinput,Xe.isMonoType===!0);Xe.cover=await convertFileToFileForm(Je);let tt=[],st=[];if(Xe.tags&&(tt=Xe.tags.split(","),st=tt.map(rt=>rt.toLowerCase())),Xe.isMonoType&&!st.includes("monospace"))tt=[...tt,"monospace"],Xe.tags=tt.join(",");else if(!Xe.isMonoType&&st.includes("monospace")){const rt=tt.filter(it=>it.toLowerCase()!=="monospace").join(",");Xe.tags=rt}return Xe.description=Xe.typedinput,Xe};function MintForm(){const{artifact:Xe,license:Ke,minterName:Ye,address:Je,balance:tt,isTyped:st,typedinput:rt,isMonoType:it}=useOutletContext(),ot=useNavigate(),[at,lt]=reactExports.useState(!1),[ut,ht]=reactExports.useState(!1),[pt,ft]=reactExports.useState(null),xt=useMintStore(wt=>wt),vt=reactExports.useMemo(()=>getFields({needsCover:at,isTyped:ut,showArtifact:!ut,useCustomLicense:(Ke==null?void 0:Ke.value)==="custom"}),[at,ut,Ke==null?void 0:Ke.value]);reactExports.useEffect(()=>{var _t;Xe&&lt(!((_t=Xe==null?void 0:Xe.mimeType)!=null&&_t.startsWith("image"))&&!AUTO_GENERATE_COVER_MIMETYPES.includes(Xe==null?void 0:Xe.mimeType)),ht(st);let wt=document.querySelector("textarea[name='typedinput']");wt&&(wt.style.fontFamily=it?"Iosevka, monospace":"Source Sans Pro, sans-serif")},[Xe,st,it,vt]),reactExports.useEffect(()=>{ut?At(rt):ft(void 0)},[ut,rt,it]);const At=async wt=>{try{const _t=await generateTypedArtCoverImage(wt,it);ft(_t)}catch(_t){console.error("Error generating cover image preview:",_t.message),ft(null)}},Et=async wt=>{var _t,Ct,Tt;try{if(!AUTO_GENERATE_COVER_MIMETYPES.includes((_t=wt.artifact)==null?void 0:_t.mimeType)&&wt.artifact){if((Ct=wt.artifact.file)!=null&&Ct.size&&((Tt=wt.artifact.file)==null?void 0:Tt.size)/1e6>2e3)throw new Error(`File too big: ${wt.artifact.file.size/1e6}mb`);const St=window.URL||window.webkitURL;wt.artifact.reader=St.createObjectURL(wt.artifact.file)}else wt.typedinput?wt=await processTypedInput(wt):(wt.artifact.mimeType==="audio/midi"||wt.artifact.mimeType==="audio/mid")&&(wt=await processMidiCover(wt));useMintStore.setState({...wt,isValid:!0}),ot("preview")}catch(St){useModalStore.getState().show(St.message)}};return jsxRuntimeExports.jsxs(motion.div,{style:{width:"100%"},initial:{x:"-20%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-20%",opacity:0},transition:{ease:"easeInOut"},children:[jsxRuntimeExports.jsx(CollabSwitch,{address:Je,name:Ye}),tt>0&&tt/1e6<.7&&jsxRuntimeExports.jsx("div",{className:styles$a.fundsWarning,children:jsxRuntimeExports.jsx("p",{children:`⚠️ You seem to be low on funds (${tt/1e6}ꜩ), mint will probably fail...`})}),jsxRuntimeExports.jsx(Form$1,{defaultValues:xt,onSubmit:Et,onReset:useMintStore.getState().reset,fields:vt,children:pt&&jsxRuntimeExports.jsx("img",{className:local_styles.typed_preview,src:URL.createObjectURL(pt),alt:"Typed Art Preview"})})]})}async function fetchList(Xe){return(await axios.get(Xe)).data.map(Ye=>Ye.toString())}const lists={"NSFW List":"https://lists.teia.art/nsfw.json","Photo Sensitive List":"https://lists.teia.art/photosensitive.json","Restricted OBJKTs (deprecated)":"https://lists.teia.art/restricted_objkt.json"};function ListsFeed(){const[Xe,Ke]=reactExports.useState(""),[Ye,Je]=reactExports.useState(""),{data:tt}=useSWR(["/feed/lists",Ye],async()=>fetchList(Ye),{revalidateIfStale:!1,revalidateOnFocus:!1});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",gap:"1em"},children:Object.keys(lists).map(st=>jsxRuntimeExports.jsx(Button,{box:!0,onClick:()=>{Je(lists[st]),Ke(lists[st])},children:st}))}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",marginTop:"25px",alignItems:"center",alignContent:"center",justifyContent:"center",width:"100%"},children:[jsxRuntimeExports.jsx(Input$2,{placeholder:"link to a json list of tokens",type:"text",value:Xe,onChange:Ke}),jsxRuntimeExports.jsx(Button,{onClick:()=>{Je(Xe)},shadow_box:!0,children:"Search"})]}),Ye&&jsxRuntimeExports.jsx(TokenCollection,{disable:!tt,label:"Lists Feed",namespace:"lists",variables:{ids:tt},swrParams:[Ye],query:distExports.gql`
            ${BaseTokenFieldsFragment}
            query fromList($ids: [String!], $limit: Int!) {
              tokens(
                where: { token_id: { _in: $ids } }
                order_by: { minted_at: desc }
                limit: $limit
              ) {
                ...baseTokenFields
              }
            }
          `})]})}const useCopyrightStore=create$2()(subscribeWithSelector(persist(Xe=>({customLicenseData:void 0,setCustomLicenseData:Ke=>{Xe({customLicenseData:Ke})},reset:()=>{Xe({customLicenseData:void 0})},submitCopyrightAgreement:async()=>{const Ke=useModalStore.getState().showError,Ye=useModalStore.getState().step,Je=useModalStore.getState().show,{customLicenseData:tt}=useCopyrightStore.getState(),st="Submit Copyright Agreement";Ye(st,"Waiting for confirmation",!0);try{const rt=(tt.tokens||[]).flatMap(ot=>{var at;return((at=ot.metadata)==null?void 0:at.creators)||[]}),it=Array.from(new Set([useUserStore.getState().address,...rt]));try{const ot=await Tezos.wallet.at(COPYRIGHT_CONTRACT),at=tt.documentText.includes("This Agreement outlines the")?tt.documentText.split("This Agreement outlines the")[0].trim():tt.documentText.slice(0,530).trim();console.log("firstParagraph",at);const lt=useUserStore.getState().handleOp,ut=await lt(ot.methodsObject.create_copyright({clauses:{addendum:tt.clauses.addendum||null,broadcast:tt.clauses.broadcast,createDerivativeWorks:tt.clauses.createDerivativeWorks,customUri:tt.clauses.customUri||null,customUriEnabled:tt.clauses.customUriEnabled,exclusiveRights:tt.clauses.exclusiveRights||null,expirationDate:tt.clauses.expirationDate||null,expirationDateExists:tt.clauses.expirationDateExists,firstParagraph:at||"",publicDisplay:tt.clauses.publicDisplay,releasePublicDomain:tt.clauses.releasePublicDomain,reproduce:tt.clauses.reproduce,requireAttribution:tt.clauses.requireAttribution,retainCreatorRights:tt.clauses.retainCreatorRights,rightsAreTransferable:tt.clauses.rightsAreTransferable},creators:Array.from(it),related_tezos_nfts:tt.tokens.filter(ht=>ht.contractAddress!=="external").map(ht=>({contract:ht.contractAddress,token_id:parseInt(ht.tokenId)})),related_external_nfts:tt.tokens.filter(ht=>ht.contractAddress==="external").map(ht=>ht.metadata.name)}),st,{amount:.1});return console.log("[DEBUG] Operation sent:",ut),Je(st,`Copyright submitted https://tzkt.io/${ut}`,!0),ut}catch(ot){console.error("[ERROR]",ot),Ke("Submit Copyright Agreement",ot)}}catch(rt){Ke(st,rt)}}}),{name:"mint-copyright",storage:createJSONStorage(()=>localStorage)}))),field$1="_field_1vh0f_11",modalInfoIcon="_modalInfoIcon_1vh0f_40",verifiedStatus="_verifiedStatus_1vh0f_61",styles$9={field:field$1,modalInfoIcon,verifiedStatus},copyrightModalText={overview:`
        <p>Copyright laws are over complex and conflicting - which is why in most cases, is handled by a case-by-case basis. In order for NFT Copyright to be admissible in courts, it's important for both Creators and Owners to understand the scope of what these Agreements can and cannot do.</p>
        <p>Copyright clauses are normally legally defined with traditional contracts and may involve agreements that specify the geographical areas, specific platforms, and duration for which the broadcasting is allowed. The "scope" of NFT mints are global contracts here are currently set to "global", "in perpetuity", and are "unlimited". They are, in essence, a "lump sum" estimation of how much the rights might be worth in total for the Work's entire life cycle. (Exclusivity is possible, and rights are also transferable based on ownership.)</p>
        <ul>
            <li><strong>Geographical Coverage:</strong> The rights are set globally, allowing for usage across all regions without any restrictions.</li>
            <li><strong>Duration of Rights:</strong> Rights are granted in perpetuity, meaning there is no expiration on the privileges and permissions granted to Owners after purchase.</li>
            <li><strong>Frequency of Rights:</strong> Rights are unlimited, not restricted by the number of broadcasts or platforms.</li>
            <li><strong>Exclusivity:</strong> Exclusive rights Agreements (privileges granted exclusive to one individual or entity and no one else), are possible using the number of Editions owned as a mechanism to facilitate these types of arrangements. (By default, all rights bestowed upon by the Creator are non-exclusive.)</li>
            <li><strong>Transferability:</strong> Rights are transferable because they are defined by the condition of ownership, allowing rights and associated privileges to be passed to others, unless stated otherwise.</li>
            <li><strong>Royalties:</strong> Royalties upon secondary sales still apply during transfers of ownership, which allows for Creators to earn "passive income", similar to deals that occur in traditional arts/entertainment industries.</li>
        </ul>
        <p>Note that some digital mediums (e.g. software, websites, video games) often fall into several categories, depending on how it's use. If you want a "permissive" contract, choose as many as applicable. If you want more granularity, think about use-cases and scope them as necessary. (e.g. for video games, reproduction rights will allow the developer to sell assets like art and music directly, whereas broadcasting rights will only allow to "use" them in-game.)
        <p>If geography, timelines (i.e. expiration dates), or frequency of usage (e.g. each Owner is only allowed to make X copies) is of importance, Creators can add those details in the Addendum sections to scope the Agreement as necessary.</p>
        <p>In all cases, the written text in this document will take precident over any data or metadata displays as the authoritative permissions for the Work, applied to both the Creator(s) and Owner(s), with the statements in the Addendums having the ability to overrule or nullify statements in the auto-generated portions of the document itself in cases of conflicts or inconsistencies. (Though it is recommended that you don't create contradictions in the document itself to avoid misunderstandings or misinterpretations.)</p>
    `,reproduce:`
        <p>This right allows the Owner of the Work to make direct copies of the work, for both commercial and non-commercial purposes.</p>
        <p>This applies to both digital and physical reproductions - prints, books and publications, merchandise, digital assets (e.g. for use in video games and software applications), educational use, and so on.</p>
        <p>For code-based works (e.g. application/x-directory), if you have your Work stored on a public repository, be careful not to create contradictions or conflicts with your licenses there and here, or it may lead to issues later that may be difficult to untangle.</p>
        <p>Reproduction rights are typically used for direct sales of the artwork, "as is". In music, record/album sales are typically done through reproduction rights, whereas the permissions to use in playback through broadcasting rights. Add more specificity to the Addendum sections if more granularity is required.</p>
        `,broadcast:`
        <p>This right allows the holder to broadcast the work to the public, across a variety of media platforms, both traditional and digital, for both commercial and non-commercial purposes.</p>
        <p>For traditional media, this includes the airing of works on television and radio, encompassing both entertainment and informational content. It also covers the broadcasting of live events such as concerts and sports.</p>
        <p>In the digital realm, the right extends to online streaming platforms, enabling the work to be shared globally. It also includes the use of social media platforms for live streaming events, sharing video clips, or hosting webinars and podcasts.</p>
        <p>Note that NFT ecosystems currently do not support tracking of plays, views, or interactions (for gaming, etc.) - yet. When these features eventually become integrated with on-chain ledgers, more options for Agreement types will open up for both Creators and Owners alike.</p>
        <p>If you're not sure how to set the initial price of license sales, it is recommended that you start low and let secondary sales determine an estimate for demand - Creators will still get paid through the royalties mechanism, which helps to mitigate some of the risk.</p>
        `,publicDisplay:`
        <p>This right allows the holder to display the work publicly, across various venues and platforms, encompassing both physical and digital displays.</p>
        <p>Physical displays can include exhibitions in art galleries, museums, or public spaces where artworks are shown to the public. It also covers the use of works in public areas like billboards, digital signage, and displays in commercial establishments like stores or restaurants.</p>
        <p>Digitally, this right extends to the display of works on websites, digital galleries, or other online platforms where the public can view them. This includes the use of images, videos, or other digital content on platforms intended for wide public reach.</p>
        <p>The public display rights are outlined in legal agreements that specify the scope of where and how the work can be displayed, and may include restrictions based on location, duration, or specific contexts. These rights are typically non-exclusive but can be negotiated depending on the creator's preferences and the nature of the display.</p>
        <p>As with other rights, the right to public display is transferable, allowing the holder to grant permissions to others under agreed terms.</p>
        <p>Note that there may be cases where reproduction and public display rights overlap - if more granularity is required, the Creator may consider specifying the scope (e.g. displays in museums are allowed, websites are not allowed) to avoid confusion.</p>
        `,createDerivativeWorks:`
        <p>This right allows the holder to make derivative works based on the original, for both commercial and non-commercial purposes. This includes modifications, adaptations, and new creations inspired by the original work and is often an Agreement between the Creator and other Creator(s) who are interested in using ideas or concepts from previously created Works.</p>
        <p>Derivative works can range from literary adaptations, such as turning a novel into a screenplay or a children's book, to artistic transformations, such as creating a sculpture based on a painting. It also includes technological adaptations like developing a video game based on a film or creating augmented reality experiences based on traditional media.</p>
        <p>In the digital domain, this right extends to remixing songs, re-editing videos for different platforms, or using existing software code to develop new applications.</p>
        <p>The agreements for derivative works specify the extent of modification allowed and may include limitations to ensure the original creator's vision and intellectual property are respected. These rights are typically negotiated on a case-by-case basis and can be exclusive or non-exclusive, depending on the agreement between the original creator and the rights holder.</p>
        <p>As with other intellectual property rights, the right to create derivative works is transferable. If the Creator wants to set limits or how their work is used by others, they may also choose to specify it in the Addendum section(s) as well.</p>
        `,exclusiveRights:`
        <p>Most Agreements will default to "No Exclusive Rights", but the Edition number system allows for Creators to create conditions with their Work that allows them to give exclusive rights to one individual or entity, if desired. (Especially if the Creator is concerned about how the Work will be used or represented by "unauthorized" dealers.)</p>
        <ul>
            <li><strong>Majority Share:</strong> Ownership of more than 50% of the editions confers exclusive rights to the owner.</li>
            <li><strong>Super-Majority Share:</strong> Ownership of 66.667% or more (approximately two-thirds) of the editions confers enhanced exclusive rights.</li>
            <li><strong>Rights Affected:</strong> The exclusive rights may include reproduction, broadcasting, public display, and creation of derivative works, depending on the percentage of ownership.</li>
            <li><strong>Transferability:</strong> These exclusive rights are transferable along with the ownership of the NFTs, which may cause certain rights and clauses to become "active". (A collector may decide to buy out the Editions from the other Owners out there, for example.) Rights, privledges, and permissions granted in this way is effective immediately after the transaction that triggered that condition to occur.</li>
            <li><strong>Retention of Creator's Rights:</strong> Despite the transfer or assignment of exclusive rights, creators may retain certain rights under specified conditions.</li>
        </ul>
        <p>Note: If you're unsure if you may or may not want the option to formulate exclusive deals for your Work, one option is to set it to majority share, then release 49% or less Editions to the public, which allows Creators to continue their sales while also keeping the option open in the future.</p>
        `,retainCreatorRights:`
        <p>This right allows Creators to retain all permissions, privledges, rights, even when exclusive rights are granted to another party. (The original definition of "selling out" actually comes from the act of Creators losing control over their own work, in exchange for money, which is something that can still happen today.)</p>
        <p>In most cases, it is recommended to keep this option checked, unless there is a specific reason to do otherwise. Some companies prefer "taking over" the management of the Work, or do partial allocations of rights (e.g. the Creator retains it for personal/educational use, whereas the company focuses on commercial, etc.) but that type of granularity is rare, especially with NFTs.</p>
        `,releasePublicDomain:`
        <p>This clause allows the work to be released to the public domain, effectively removing all copyright restrictions associated with it.</p>
        <p>By releasing the work to the public domain, the creator permits anyone to use, modify, and distribute the work without needing to seek permission or pay royalties. This can be a strategic decision for creators who wish to maximize the work's exposure and accessibility.</p>
        <p>Public domain release is often irrevocable, meaning once a work is released to the public domain, the creator cannot reclaim the rights. Therefore, it's crucial for Creators to carefully consider the implications before making such a decision, especially since it can be easily referenced on the blockchain itself. ("Announcements" made on social media or other privately-owned platforms may or may not be admissible as a declaration so it may be risky to assume so.</p>
        <p>This option can be particularly beneficial for educational, cultural, or philanthropic purposes, contributing to the broader public good by freely sharing creative works.</p>
        `,requireAttribution:`
        <p>This is simply a requirement that whenever the work is displayed in public settings (which includes broadcasts, events, social media posts, etc.) that the Owner of the work is required to give attribution to the original Creator(s) in some way, shape, or form.</p>
        <p>Many curators, content creators, and fans will do this out of courtesy to the artist, but there are times (like logos) where attribution may not be necessary, or even undesirable. Leaving this section blank leaves it up to the Owner as to what they want to do, but it's generally a good idea to make explicit what the usage rights are, if the artist has a preference for how they want their works used in public contexts.</p>
        <p>If you want more granularity in the way attributions are done, you may want to consider using the Addendum portions of the Custom License or reference Creative Commons licenses to get an idea of how these clauses are applied in practice. (Note: Once a work goes to Public Domain, attributions are no longer required.)</p>
        `,rightsAreTransferable:`
        <p>When rights are transferable, the Owner(s) of the Work are granted the ability to pass on their rights and privileges to subsequent Owners upon a sale. (i.e. "Secondary Sales") This transferability includes all forms of public display, reproduction, and sale, ensuring that rights can dynamically move within the marketplace while still respecting the original agreements set forth by the Creator(s).</p>
        <p>Transferable rights are particularly valuable in dynamic markets and industries where ownership frequently changes hands. They allow for continued use and enjoyment of the Work across different owners and contexts. However, it's important for each Owner to understand that the transfer of these rights must still adhere to the terms of the original contract, particularly concerning attribution and royalty obligations.</p>
        <p>If rights are *not* transferable, the original Owner (usually the Creator) retains exclusive control over the use of the Work, and any attempt to transfer these rights without explicit approval from the Creator is void. This setup ensures that the Creator can maintain a closer relationship with the usage of their Work, limiting the potential for unauthorized uses or dilution of the Work’s value in contexts they did not consent to.</p>
        <p>In either case, Creators and Owners should clearly understand the terms of transferability and its implications since it potentially has long-term ramifications, especially when there is no expiration date attached to each clause.</p>
        `,expirationDate:`
        <p>This is the date where all rights given to Owner(s) upon the ownership of each edition/license expires, effectively returning the privledges and rights granted through the Work back to the Creator.</p>
        <p>In professional contexts, expiration dates are typically set on a case-to-case basis (when an artist signs a "deal" with a label or company these details come into play), but if the Creator wants to create a blanket policy for their rights to be effective only during a limited time period, this option can be used to set a standard for all editions that apply to all Owners at once.</p>
    `,customUri:`
        <p>The Custom URI feature serves two important functions for creators:</p>
        
        <p><strong>1. External Reference:</strong><br>
        - Link to additional terms, restrictions, or declarations for the Work
        - Provide supplementary documentation or metadata
        - Reference creator's canonical information or portfolio</p>
        
        <p><strong>2. Retroactive Application:</strong><br>
        - Point to a previous work by the same creator
        - Apply current license terms to the referenced work
        - Must be verifiable through wallet address ownership</p>
        
        <p><strong>Important Considerations:</strong></p>
        <ul>
        <li>For standard web links (http://, https://):
          <ul>
            <li>- The URI reference is permanent, but destination content may change</li>
            <li>- Consider carefully if changeable content aligns with your intentions</li>
            <li>- Best for dynamic information that may need updates</li>
          </ul>
        </li>
        <li>For decentralized storage (ipfs://, etc.):
          <ul>
            <li>- Content is immutable and permanently stored</li>
            <li>- Ideal for fixed terms or historical references</li>
            <li>- Recommended for legal documents and permanent declarations</li>
          </ul>
        </li>
        </ul>
        
        <p><strong>Verification Requirements:</strong><br>
        When using this feature for retroactive application, creators must be able to prove ownership of both the current and referenced works through their wallet addresses. This typically requires maintaining access to both wallet addresses and being able to sign transactions or messages that verify ownership.</p>`},modalOverlay="_modalOverlay_6xe0q_216",modalContent="_modalContent_6xe0q_229",styles$8={modalOverlay,modalContent},InfoModal=({isOpen:Xe,title:Ke,content:Ye,onClose:Je})=>(reactExports.useEffect(()=>{const tt=st=>{st.target===document.getElementById("modal-overlay")&&Je()};return document.addEventListener("mousedown",tt),()=>document.removeEventListener("mousedown",tt)},[Je]),Xe?jsxRuntimeExports.jsx("div",{id:"modal-overlay",className:styles$8.modalOverlay,children:jsxRuntimeExports.jsxs("div",{className:styles$8.modalContent,children:[jsxRuntimeExports.jsx("h2",{children:Ke}),jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:Ye}})]})}):null),initialClauses={reproduce:!1,broadcast:!1,publicDisplay:!1,createDerivativeWorks:!1,exclusiveRights:"none",retainCreatorRights:!0,releasePublicDomain:!1,requireAttribution:!0,rightsAreTransferable:!0,expirationDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],expirationDateExists:!0,customUriEnabled:!1,customUri:"",addendum:""},clauseLabels={reproduce:"Right to Reproduce",broadcast:"Right to Broadcast",publicDisplay:"Right to Public Display",createDerivativeWorks:"Right to Create Derivative Works",exclusiveRights:"Exclusive Rights Based on Ownership Share",retainCreatorRights:"Creator Retains Rights Even When Exclusive",releasePublicDomain:"Release to Public Domain",requireAttribution:"Require Attribution on Use",rightsAreTransferable:"Rights are Transferable",expirationDateExists:"Clauses Have Expiration Date",expirationDate:"Date of Expiration",customUriEnabled:"Custom URI",overview:"Copyright Overview"},exclusiveRightsOptions=[{value:"none",label:" 🚫 None (No Exclusive Rights To Any Party)"},{value:"majority",label:" ⚖️ Majority Share (50%+ Editions Owned = Exclusive Rights)"},{value:"superMajority",label:" ⚖️ Super-Majority Share (66.667%+ Editions Owned = Exclusive Rights)"}],ClausesDescriptions=({clauses:Xe})=>{const Ke={reproduce:{true:"✅ Yes",false:"🚫 No"},broadcast:{true:"✅ Yes",false:"🚫 No"},publicDisplay:{true:"✅ Yes",false:"🚫 No"},createDerivativeWorks:{true:"✅ Yes",false:"🚫 No"},releasePublicDomain:{true:"✅ Yes",false:"🚫 No"},requireAttribution:{true:"✅ Yes",false:"🚫 No"},rightsAreTransferable:{true:"✅ Yes",false:"🚫 No"},expirationDateExists:{true:"✅ Yes",false:"🚫 No"},expirationDate:{null:"None",default:new Date(Xe==null?void 0:Xe.expirationDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},customUriEnabled:{true:"📝 Yes",false:"🚫 No"},retainCreatorRights:{true:"✅ Yes",false:"⚠️ No"}};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Copyright Permissions Granted on Ownership:"}),jsxRuntimeExports.jsx("ul",{children:Object.entries(Xe).map(([Ye,Je])=>{var tt,st;if(Ye==="exclusiveRights"){const rt=((tt=exclusiveRightsOptions.find(it=>(it==null?void 0:it.value)===Je))==null?void 0:tt.label)||"None";return jsxRuntimeExports.jsxs("li",{children:["Exclusive Rights: ",rt]},Ye)}else{if(Ye==="customUri"||Ye==="expirationDate")return null;if(Ye==="expirationDateExists")return jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsxs("li",{children:[clauseLabels[Ye],": ",Ke[Ye][Je]]},Ye),jsxRuntimeExports.jsxs("li",{children:[clauseLabels.expirationDate,":"," ",Xe.expirationDate?new Date(Xe.expirationDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"None"]},"expirationDate")]},Ye);if(Ye==="addendum")return jsxRuntimeExports.jsxs("li",{children:["Addendum: ",Je?"✅ Yes":"🚫 No"]},Ye);if(Ye==="customUriEnabled")return Je?jsxRuntimeExports.jsxs("li",{children:["Custom URI Enabled: ",Ke==null?void 0:Ke.customUriEnabled[!0]]},Ye):null;{const rt=((st=Ke[Ye])==null?void 0:st[Je])||"Unknown Status";return jsxRuntimeExports.jsxs("li",{children:[clauseLabels[Ye],": ",rt]},Ye)}}})}),jsxRuntimeExports.jsx("br",{})]})};function CustomCopyrightForm({onChange:Xe,value:Ke,defaultValue:Ye}){var Tn,Nn;const{watch:Je}=useFormContext(),{license:tt,minterName:st,address:rt}=useOutletContext(),[it,ot]=reactExports.useState((Ye==null?void 0:Ye.clauses)||initialClauses),[at,lt]=reactExports.useState("No Permissions Chosen"),[ut,ht]=reactExports.useState("No Permissions Chosen"),[pt,ft]=reactExports.useState(""),[xt,vt]=reactExports.useState(""),[At,Et]=reactExports.useState(""),[wt,_t]=reactExports.useState("url"),{customLicenseData:Ct}=useCopyrightStore(),[Tt,St]=reactExports.useState((Ct==null?void 0:Ct.tokens)||[]),[Rt,Nt]=reactExports.useState(null),[Pt,Bt]=reactExports.useState(null),[Lt,zt]=reactExports.useState(!1),Dt=async gn=>{gn.preventDefault(),zt(!0),Nt(null);let _n;if(wt==="url"){if(!pt||pt.trim()===""){jt("Invalid Input","The input cannot be empty."),zt(!1);return}_n=Vt(pt)}else{if(!xt||!At||xt.trim()===""||At.trim()===""){jt("Invalid Input","Both contract address and token ID are required."),zt(!1);return}if(!xt.startsWith("KT1")||xt.length!==36){jt("Invalid Contract","Please enter a valid Tezos contract address (starts with KT1)."),zt(!1);return}if(!/^\d+$/.test(At)){jt("Invalid Token ID","Token ID must be a number."),zt(!1);return}_n={contractAddress:xt,tokenId:At}}if(!_n)if(wt==="url"){Bt({contractAddress:"external",tokenId:null,metadata:{name:pt,thumbnailUri:"",creators:[rt],description:"*This is an external or custom token reference - make sure that the link is valid and will be maintained for the agreement's applicable usage and time frames."}}),zt(!1);return}else{jt("Error","Could not process the contract and token ID."),zt(!1);return}if(Tt.some(Wt=>Wt.contractAddress===_n.contractAddress&&Wt.tokenId===_n.tokenId)){jt("Duplicate Token","This token has already been added."),zt(!1);return}try{const Wt=await fetchTokenMetadataForCopyrightSearch(_n.contractAddress,_n.tokenId);if(Wt!=null&&Wt.metadata){if(!(Wt.metadata.creators||[]).includes(rt)){jt("Ownership Verification","This is not your token."),zt(!1);return}Nt({..._n,metadata:Wt.metadata})}else if(wt==="contract"){const sn={contractAddress:_n.contractAddress,tokenId:_n.tokenId,metadata:{name:`Token ${_n.tokenId}`,displayUri:"",creators:[rt],description:`Token ID: ${_n.tokenId}, Contract: ${_n.contractAddress} - Metadata could not be fetched but token will be included as Tezos verification.`}};Nt(sn)}else jt("Metadata Not Found","The search feature could not find a token related to that URL. This does not, however, mean that the work itself does not exist. Please select Contract + Token ID to enter your token details manually to ensure that the work gets properly registered.")}catch(Wt){if(console.error(Wt),wt==="contract"){const sn={contractAddress:_n.contractAddress,tokenId:_n.tokenId,metadata:{name:`Token ${_n.tokenId}`,displayUri:"",creators:[rt],description:`Token ID: ${_n.tokenId}, Contract: ${_n.contractAddress} - Metadata could not be fetched but token will be included as Tezos verification.`}};Nt(sn)}else jt("Metadata Not Found",'Could not fetch token metadata from the provided URL. Please try using the "Contract + Token ID" option instead if you know the specific contract address and token ID.')}zt(!1)},Vt=gn=>{try{const _n=gn.match(/(KT1\w+)?\/(\d+)/);if(_n)return{contractAddress:_n[1]||HEN_CONTRACT_FA2,tokenId:_n[2]}}catch(_n){console.error("Error extracting token:",_n)}return null},Gt=gn=>{ft(gn)},Qt=(gn,_n)=>{_n.preventDefault(),_n.stopPropagation();const kn=Tt.filter((sn,hn)=>hn!==gn),Wt=Yt(kn);St(kn),ht(Wt),lt(Wt),useCopyrightStore.setState(sn=>({customLicenseData:{...sn.customLicenseData,tokens:kn,clauses:it,documentText:Wt}}))},jt=(gn,_n)=>{an({isOpen:!0,title:gn,content:_n})},Ht=()=>{an({isOpen:!1,title:"",content:""})},Yt=reactExports.useCallback((gn=Tt)=>{let _n=st?`[${st}, ${rt}]`:`[${rt}]`;const kn=gn.map((An,wn)=>{const Fn=`#${wn+1}`;return An.contractAddress==="external"?`${Fn}: "${An.metadata.name}" (External Reference)`:`${Fn}: "${An.metadata.name}" (Token ID: ${An.tokenId}, Contract: ${An.contractAddress})`}).join(`
`);let Wt=1;const sn=Tt.filter(An=>An.contractAddress!==HEN_CONTRACT_FA2);let hn="";if(sn.length>0){const An=[...new Set(sn.map(wn=>wn.contractAddress))];hn=`Under various minting contracts, including but not limited to TEIA DAO LLC [${HEN_CONTRACT_FA2}] and contracts: ${An.join(", ")}`}else hn=`Under the Minting Contract managed by the TEIA DAO LLC [${HEN_CONTRACT_FA2}]`;let En=`This License Agreement ("Agreement") is granted by the creator ("Creator") identified by the wallet address ${_n} ("Wallet Address") for the following Work(s): 
    
${kn}
    
${hn}. 

This Agreement outlines the rights and obligations associated with the ownership and use of the NFT(s)' likeness(es) and any derivatives thereof ("Work").
    
“Editions” refers to the total number of authorized copies of the NFT(s) that the Creator issues at the time of minting. Each copy represents an "Edition" of the NFT, allowing multiple Owners (or one Owner holding multiple copies) to hold rights to the Work under the terms of this Agreement.`;if(En+=`

In all cases, the written text in this document will take precedence over any data or metadata displays on or off-chain as the authoritative permissions for the Work, applied to both the Creator(s) and Owner(s). Statements in the Addendums have the ability to overrule or nullify statements in the auto-generated portions of this document in cases of conflicts or inconsistencies.`,En+=`

In cases where multiple Creators or Collaborators have contributed to the creation of the Work, the rights and obligations stipulated herein apply equally to all Creators. Each Creator is entitled to the rights granted under this Agreement, and such rights are shared collectively among all Creators unless specified otherwise.`,it.releasePublicDomain?En+=`

${Wt++}. Release to Public Domain:
The Creator hereby releases all copyright and related rights, title, and interest in and to the Work into the public domain, free from any copyright restrictions. This release applies globally, allowing for the free use, reproduction, and modification of the Work without any compensation due to the Creator.`:(it.reproduce&&(En+=`

${Wt++}. Right to Reproduce:
The Creator hereby grants to each owner of the NFT ("Owner") a worldwide license to use the Work for both commercial and non-commercial reproduction purposes.`),it.broadcast&&(En+=`

${Wt++}. Right to Broadcast:
The Creator grants to each Owner a worldwide license to use the Work for broadcasting purposes for both commercial and non-commercial use.`),it.publicDisplay&&(En+=`

${Wt++}. Right to Public Display:
The Creator grants to each Owner a worldwide license to publicly display the Work, either as a physical display or as a performance for live events. This license does not permit the monetization of the Work by the Owner and requires the Owner to provide full attribution to the Creator.`),it.createDerivativeWorks&&(En+=`

${Wt++}. Right to Create Derivative Works:
The Creator grants to each Owner a worldwide license to publicly display the Work, either as a physical display or as a performance for live events. This license does not permit the monetization of the Work by the Owner and requires the Owner to provide full attribution to the Creator.`),it.requireAttribution&&(En+=`

${Wt++}. Requirement for Attribution:
The Owner(s) of the Work are required to give proper and visible attribution to the Creator(s) whenever the Work is used in public settings, broadcasts, or any other form of public display or performance.acknowledge the Creator(s) by name or wallet address, unless otherwise agreed upon in writing by all parties involved. Failure to provide such attribution constitutes a breach of this Agreement, subject to the remedies available under applicable law.`),it.rightsAreTransferable&&(it.reproduce||it.broadcast||it.publicDisplay||it.createDerivativeWorks)?En+=`

${Wt++}. Transferable Rights:
The rights granted under this Agreement to the Owner(s) of the Work are transferable. The Owner(s) may assign, transfer, or sublicense the rights to the Work, subject to maintaining proper and visible attribution to the Creator(s) whenever the Work is used in public settings, broadcasts, or any other form of public display or performance. This clause is applicable to all sales and edition numbers (unless stated otherwise), including both primary and secondary sales, promoting continuous and flexible utilization of the Work across different owners. In case of a dispute, ledger records from sales transactions will serve to confirm or deny claims as necessary. Failure to comply with attribution requirements constitutes a breach of this Agreement, subject to the remedies available under applicable law.`:!it.rightsAreTransferable&&(it.reproduce||it.broadcast||it.publicDisplay||it.createDerivativeWorks)&&(En+=`

${Wt++}. Non-Transferable Rights:
The rights granted under this Agreement to the Owner(s) of the Work are non-transferable. Any attempt to transfer, assign, or sublicense the rights without explicit written consent from the Creator(s) is void. The Owner(s) must maintain proper and visible attribution to the Creator(s) whenever the Work is used in public settings, broadcasts, or any other form of public display or performance. This clause is applicable to Primary Sales, as defined as a direct sale from the Creator(s) to the first Owner(s) of an Edition of the Work from any Marketplace Contract. Upon any Secondary Sale, the rights and privileges initially granted are nullified. In case of a dispute, ledger records from sales transactions will serve to confirm or deny claims as necessary.`)),!it.publicDisplay&&!it.reproduce&&!it.broadcast&&!it.createDerivativeWorks&&!it.releasePublicDomain&&!it.requireAttribution&&(En+=`

${Wt++}. All Rights Reserved: 
No rights are granted under this Agreement. All rights for the Work are reserved solely by the Creator.`),it.exclusiveRights==="none")En+=`

${Wt++}. Exclusive Rights:
No exclusive rights are granted under this Agreement. All rights are non-exclusive and shared among all rightful owners or licensees - or in cases of "All Rights Reserved", exclusivity is granted solely to the Creator themselves.`;else if(it.reproduce||it.broadcast||it.publicDisplay||it.createDerivativeWorks){const An=it.exclusiveRights==="majority"?"majority share (over 50%)":"super-majority share (66.667%+ or exactly 2/3rds)";En+=`

${Wt++}. Exclusive Rights:
The Creator grants exclusive rights as outlined in this Agreement to the Owner(s) holding a ${An} of the editions of the NFT at the time of its original mint. If no single party holds such a share, the rights outlined in this Agreement apply non-exclusively to all Owners. (In some cases, the Creator themselves may be the exclusive Owner.)`}if(it.exclusiveRights!=="none"&&it.retainCreatorRights&&(En+=`

${Wt++}. Retention of Creator's Rights:
Despite reaching the threshold for exclusive rights, the Creator retains certain rights as specified under this Agreement, even if exclusivity conditions are met by other Owners. The rights are then split equally between the Creator and Owner which has been granted exclusive rights over the other Owner(s) of the Work, effective immediately after the date in which the condition for exclusivity has been met.`),it.expirationDate&&it.expirationDateExists){const An=new Date(it.expirationDate).toLocaleDateString();En+=`

${Wt++}. Expiration Date:
This Agreement is effective until the date of ${An} (relative to the time of mint of the Work), after which the rights granted herein will terminate unless expressly renewed or extended in writing by the Creator. Upon expiration, all rights (including exclusive rights) returns back to the Creator's ownership and control.`}return it.customUriEnabled&&it.customUri&&(En+=`

${Wt++}. Custom URI Reference and Retroactive Application:
The Work is subject to additional terms, conditions, and declarations specified at: ${it.customUri}. These external terms are hereby incorporated by reference into this Agreement and shall be considered binding to the same extent as if they were fully set forth herein.
    
This URI may serve one or both of the following purposes:
a) External Reference: The URI may contain supplementary terms, conditions, restrictions, or declarations that apply to this Work. These additional terms shall be considered as an extension of this Agreement.
    
b) Retroactive Application: If the URI points to a previous work by the same Creator, and the Creator can conclusively demonstrate through cryptographic proof that they control both the wallet address associated with this Work and the wallet address associated with the referenced work ${_n}, then all terms, rights, and restrictions specified in this Agreement shall apply retroactively to the referenced work. Such proof must be verifiable through blockchain records or other cryptographic means that establish an undeniable connection between the Creator's wallet addresses and both works.
    
The Creator bears the burden of proving ownership of both works through wallet address verification, transaction histories, or other blockchain-based evidence. In the absence of such proof, the retroactive application shall be considered void while the external reference shall remain in effect. Any conflicts between the terms specified in the URI and this Agreement shall be resolved in favor of the more restrictive terms, unless explicitly stated otherwise in either document.`),En+=`

${Wt++}. Jurisdiction and Legal Authority:
This Agreement is subject to and shall be interpreted in accordance with the laws of the jurisdiction in which the Creator and Owner(s) are domiciled. The rights granted hereunder are subject to any applicable international, national, and local copyright and distribution laws.`,En+=`

${Wt++}. Identification and Representation:
Each Owner (including the Creator and all Collaborators) affirms that the wallet address provided is under their control or under the control of the party they legitimately represent. Each Owner accepts all responsibility for validating their ownership or representative authority of the said wallet address. It is the Owner's duty to provide satisfactory proof of ownership or authorization as may be required to establish their connection to the wallet address in question. Failure to conclusively demonstrate such ownership or authority may result in denial of access to services, rights, or privileges associated with the wallet address under this Agreement.`,En+=`

${Wt++}. Amendments and Modifications:
This Agreement may be amended or modified only by a written document signed by both the Creator and the Owner(s) holding the relevant majority or super-majority share, as applicable.`,En+=`

${Wt++}. Proof of Ownership and Responsibility:
Each individual claiming ownership ("Claimant") must conclusively prove that they are the legitimate Owner or Creator of the specified wallet address associated with this Agreement. It is the sole responsibility of the Claimant to provide irrefutable evidence supporting their claim. This proof may include, but is not limited to, cryptographic signatures, transaction histories, and other blockchain-based verifications that establish an undeniable link between the Claimant and the wallet address in question. For any references (both "verified" and external) linked through the registered work, the Registrar bears full responsibility for: (a) maintaining valid proof of ownership or proper authorization for such references; (b) ensuring the continued accessibility and accuracy of such references; and (c) providing verification of such ownership upon request. Failure to provide satisfactory evidence for either wallet ownership or external reference authorization will result in the denial of any rights, privileges, or access purportedly associated with the work under the terms of this Agreement.`,En+=`

${Wt++}. Limitation of Platform Responsibility:
This Agreement is entered into solely between the Creator and the Owner(s) of the Non-Fungible Token ("NFT") and the associated digital or physical artwork ("Work"). TEIA (teia.art), formally operating under TEIA DAO LLC, and its affiliated members, collectively referred to as "Platform," do not bear any responsibility for the enforcement, execution, or maintenance of this Agreement. The Platform serves only as a venue for the creation, display, and trading of NFTs and does not participate in any legal relationships established under this Agreement between the Creator and the Owner(s). All responsibilities related to the enforcement and adherence to the terms of this Agreement rest solely with the Creator and the Owner(s). The Platform disclaims all liability for any actions or omissions of any user related to the provisions of this Agreement.`,En+=`

${Wt++}. Perpetuity of Agreement:
Unless stated otherwise (in this Agreement itself), this Agreement remains effective in perpetuity as long as the Owner(s) can conclusively demonstrate proof of ownership of the NFT representing the Work, beyond reasonable doubt. Proof of ownership must be substantiated through reliable and verifiable means, which may include, but are not limited to, transaction records, cryptographic proofs, or any other blockchain-based evidence that unequivocally establishes ownership. This perpetual license ensures that the rights and privileges granted under this Agreement persist as long as the ownership criteria are met and validated. Expiry dates mentioned in the Agreement above will override the perpetuity of this clause on the date specified.`,En+=`

${Wt++}. Agreement Modifications:
Any modification to this Agreement's terms requires explicit consent from both the Creator(s) and current Owner(s). Such amendments shall only apply to consenting parties and shall not alter existing agreements with non-consenting Owners. The Agreement shall maintain its original terms for any Owner-Creator relationship where mutual consent to amendments is not obtained, resulting in potentially differing agreement versions existing concurrently between different Owners of the same work. Smart contract execution shall serve as conclusive evidence of acceptance of amended terms.`,it.addendum&&(En+=`

Addendum By Creator:
${st}

`,En+=`${it==null?void 0:it.addendum}`),En},[rt,it,st]),Jt=reactExports.useCallback((gn,_n)=>{let kn;gn==null?kn="":typeof gn=="object"&&"value"in gn?kn=gn.value:kn=gn,ot(_n==="customUriEnabled"?Wt=>({...Wt,customUriEnabled:kn===!0,...kn===!1&&{customUri:""}}):_n==="releasePublicDomain"&&kn===!0?{reproduce:!1,broadcast:!1,publicDisplay:!1,createDerivativeWorks:!1,exclusiveRights:"none",retainCreatorRights:!1,rightsAreTransferable:!1,expirationDateExists:!1,expirationDate:"",releasePublicDomain:!0,customUriEnabled:!1,customUri:""}:Wt=>({...Wt,[_n]:kn,..._n!=="releasePublicDomain"&&Wt.releasePublicDomain?{releasePublicDomain:!1}:null}))},[]),Zt=gn=>{var Wt,sn;let _n,kn;gn!=null&&gn.target?(_n=((Wt=gn==null?void 0:gn.target)==null?void 0:Wt.name)||"",kn=((sn=gn==null?void 0:gn.target)==null?void 0:sn.value)||""):(_n="addendum"|"",kn=gn|""),ot(hn=>({...hn,[_n]:kn||""}))};reactExports.useEffect(()=>{let gn;!(it.reproduce||it.broadcast||it.publicDisplay||it.createDerivativeWorks||it.releasePublicDomain||it.requireAttribution)&&!it.customUriEnabled?gn="No Permissions Chosen (For Addendum or Expiration Date sections to show, choose at least one option in the checkboxes above.)":gn=Yt(Tt);const kn=Yt(Tt);ht(gn),lt(gn),useCopyrightStore.setState(Wt=>({customLicenseData:{...Wt.customLicenseData,clauses:it,documentText:kn}}))},[it==null?void 0:it.reproduce,it==null?void 0:it.broadcast,it==null?void 0:it.publicDisplay,it==null?void 0:it.createDerivativeWorks,it==null?void 0:it.exclusiveRights,it==null?void 0:it.releasePublicDomain,it==null?void 0:it.requireAttribution,it==null?void 0:it.rightsAreTransferable,it==null?void 0:it.expirationDate,it==null?void 0:it.expirationDateExists,Jt,Yt,Tt]),reactExports.useEffect(()=>{Xe({clauses:it,documentText:ut,tokens:Tt}),useCopyrightStore.setState(gn=>({customLicenseData:{...gn.customLicenseData,clauses:it,documentText:ut,tokens:Tt}}))},[it,ut,Tt,Xe]);const nn=["reproduce","broadcast","publicDisplay","createDerivativeWorks","requireAttribution","rightsAreTransferable","releasePublicDomain"],[cn,an]=reactExports.useState({isOpen:!1,title:"",content:""}),mn=gn=>{jt(clauseLabels[gn],copyrightModalText[gn])},dn=(gn,_n)=>{(gn.key==="Enter"||gn.key===" ")&&(gn.preventDefault(),mn(_n))},fn=gn=>{ot(_n=>({..._n,expirationDateExists:gn}))};function Sn(gn){if(!gn)return!1;try{return new URL(gn),!0}catch{return!1}}return jsxRuntimeExports.jsxs("div",{style:{borderBottom:"1px solid var(--gray-20)"},children:[jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h3",{children:"TEIA Copyright Licensing and Registration System"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"The TEIA copyright registration system enables creators to establish binding terms (a declaration by the Creator) governing permitted and prohibited uses of their works upon sale or transfer of ownership. These terms are permanently recorded on the Tezos blockchain, creating an immutable, neutral, and transparent record."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"- Ownership of a work is determined by possession of the wallet containing the corresponding token. In disputes, wallet owners bear the burden of proving ownership in the relevant jurisdiction or before the chosen mediator."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"- The registration contract is maintained by TEIA DAO LLC, a Marshall Islands non-profit entity. While the DAO administers the registration process, enforcement remains subject to applicable local laws and jurisdictions."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:'- To gain the "☑️✅ Verified" status, the registrar must match the wallet addresses of the listed Work(s) with the original creator. For external references, the registrar assumes responsibility for maintaining and verifying ownership upon request.'}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:'"☑️TEIA Verified" indicates that both contracts for the works and registration were done on TEIA. (Most secure.)'}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:`"✅Tezos Verified" indicates that the work was created on a Tezos-compatible minting contract, but registered with TEIA's registration contract.`}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:'- People may also register works from other blockchains or digital works of any format provided that they can conclusively prove that they are the Creator(s) of said works. ("External references.")'}),jsxRuntimeExports.jsxs("div",{style:{marginTop:"1em",borderTop:"1px solid white"},children:[jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h3",{children:"📝 Clauses"}),jsxRuntimeExports.jsx("br",{}),nn.map(gn=>jsxRuntimeExports.jsxs("div",{style:{display:"flex"},children:[jsxRuntimeExports.jsx(Checkbox$1,{name:gn,label:clauseLabels[gn],checked:it[gn],onCheck:_n=>Jt(_n,gn),disabled:it.releasePublicDomain&&gn!=="releasePublicDomain"},gn),jsxRuntimeExports.jsx("span",{role:"button",tabIndex:0,className:styles$9.modalInfoIcon,onClick:()=>mn(gn),onKeyPress:_n=>dn(_n,clauseLabels[gn]),children:"(?)"})]},gn)),jsxRuntimeExports.jsxs("div",{className:"select-container",style:{marginTop:"2em"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex"},children:[jsxRuntimeExports.jsx("h4",{children:clauseLabels.exclusiveRights}),jsxRuntimeExports.jsx("span",{role:"button",tabIndex:0,className:styles$9.modalInfoIcon,onClick:()=>mn("exclusiveRights"),onKeyPress:gn=>dn(gn,clauseLabels.exclusiveRights),children:"(?)"})]}),jsxRuntimeExports.jsx(StateManagedSelect,{name:"exclusiveRights",options:exclusiveRightsOptions,value:exclusiveRightsOptions.find(gn=>gn.value===it.exclusiveRights),onChange:gn=>Jt(gn,"exclusiveRights"),placeholder:"Select Ownership Share Type",isDisabled:!Object.values(it).some(gn=>gn&&gn!=="none"),styles:style,theme,className:styles$9.container,classNamePrefix:"react_select"}),["majority","superMajority"].includes(it.exclusiveRights)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx(Checkbox$1,{name:"retainCreatorRights",label:"Creator Retains Their Rights Even When Exclusivity is Reached",checked:it.retainCreatorRights,onCheck:gn=>Jt(gn,"retainCreatorRights"),className:styles$9.field})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex"},children:[jsxRuntimeExports.jsx(Checkbox$1,{name:"expirationDateExists",label:"Add an Expiration Date to Clauses",checked:it==null?void 0:it.expirationDateExists,defaultValue:(Tn=Ye==null?void 0:Ye.clauses)==null?void 0:Tn.expirationDateExists,onCheck:fn,className:styles$9.field}),jsxRuntimeExports.jsx("span",{role:"button",tabIndex:0,className:styles$9.modalInfoIcon,onClick:()=>mn("exclusiveRights"),onKeyPress:gn=>dn(gn,clauseLabels.exclusiveRights),children:"(?)"})]}),it.expirationDateExists&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"1em"},children:[jsxRuntimeExports.jsx("h4",{children:clauseLabels.expirationDate}),jsxRuntimeExports.jsx(Input$2,{type:"date",value:(it==null?void 0:it.expirationDate)||(initialClauses==null?void 0:initialClauses.expirationDate),onChange:gn=>Jt(gn,"expirationDate"),defaultValue:initialClauses==null?void 0:initialClauses.expirationDate,className:styles$9.field})]}),it&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"1em"},children:[jsxRuntimeExports.jsx("h4",{children:"Addendum/Notes"}),jsxRuntimeExports.jsx(Textarea$1,{type:"text",name:"addendum",value:(it==null?void 0:it.addendum)||"",onChange:Zt,placeholder:"Add additional notes, clauses, restrictions, scopes, etc.",defaultValue:(Nn=Ye==null?void 0:Ye.clauses)==null?void 0:Nn.addendum,className:styles$9.field})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("div",{style:{marginTop:"1em",borderTop:"1px solid white"},children:[jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h3",{children:"🔎 Token Search"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"✅ Input the URL of an NFT minted on Tezos (XTZ) that you created to receive a verified status on registration. (The currently sync'd wallet must match the creator/author of the work for it to verified.)"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"1em",display:"flex",gap:"10px"},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{_t("url"),ft(""),vt(""),Et("")},style:{border:"1px solid #ccc",padding:"10px 15px",backgroundColor:wt==="url"?"#FFFFFF":"transparent",color:wt==="contract"?"white":"black",cursor:"pointer"},children:"URL Input"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{_t("contract"),ft(""),vt(""),Et("")},style:{border:"1px solid #ccc",padding:"10px 15px",backgroundColor:wt==="contract"?"#FFFFFF":"transparent",color:wt==="contract"?"black":"white",cursor:"pointer"},children:"Contract + Token ID"})]}),wt==="url"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h4",{children:"Enter Token URL"}),jsxRuntimeExports.jsx(Input$2,{type:"text",value:pt,onChange:Gt,placeholder:"Enter a Tezos Token URL or External URL",className:styles$9.field}),!Sn(pt)&&pt&&jsxRuntimeExports.jsx("p",{style:{color:"yellow",marginTop:"5px"},children:"⚠️ Warning: The above input does not follow a standard URL/URI scheme. (Non-standard inputs are still allowed, this is just a reminder.)"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h4",{children:"Enter Contract Address"}),jsxRuntimeExports.jsx(Input$2,{type:"text",value:xt,onChange:gn=>{var _n;return vt(((_n=gn==null?void 0:gn.target)==null?void 0:_n.value)||gn||"")},placeholder:"Enter contract address (e.g., KT1...)",className:styles$9.field}),jsxRuntimeExports.jsx("h4",{style:{marginTop:"1em"},children:"Enter Token ID"}),jsxRuntimeExports.jsx(Input$2,{type:"text",value:At,onChange:gn=>{var _n;return Et(((_n=gn==null?void 0:gn.target)==null?void 0:_n.value)||gn||"")},placeholder:"Enter token ID (e.g., 123456)",className:styles$9.field})]}),jsxRuntimeExports.jsx("button",{onClick:Dt,style:{border:"1px solid #ccc",padding:"15px",marginTop:"15px"},children:"Search Token"})]}),Lt&&jsxRuntimeExports.jsx("div",{className:"loading-spinner"}),Rt&&jsxRuntimeExports.jsxs("div",{className:"token-preview",style:{marginTop:"1em",borderTop:"1px solid white"},children:[jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h3",{children:"Token Found:"}),jsxRuntimeExports.jsxs("div",{className:"token-list",style:{display:"flex",flexWrap:"wrap",gap:"15px",marginTop:"15px"},children:[jsxRuntimeExports.jsx("img",{src:HashToURL(Rt.metadata.displayUri,"IPFS"),alt:Rt.metadata.name}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{children:["Title: ",Rt.metadata.name]}),jsxRuntimeExports.jsxs("h4",{children:["Creator(s): ",Rt.metadata.creators]}),jsxRuntimeExports.jsxs("h4",{children:["Mint Date: (?) ",Rt.metadata.mintDate]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:Rt.metadata.description})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>{const gn=[...Tt,Rt],_n=Yt(gn);St(gn),Nt(null),ft(""),vt(""),Et(""),ht(_n),lt(_n),useCopyrightStore.setState(kn=>({customLicenseData:{...kn.customLicenseData,clauses:it,documentText:_n,tokens:gn}}))},style:{border:"1px solid #ccc",padding:"15px",marginTop:"15px"},children:"➕ Add Token to Copyright Agreement"})]}),Pt&&jsxRuntimeExports.jsxs("div",{className:"token-preview",children:[jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h3",{children:"External Reference Found:"}),jsxRuntimeExports.jsx("div",{className:"token-list",style:{display:"flex",flexWrap:"wrap",gap:"15px",marginTop:"15px"},children:jsxRuntimeExports.jsxs("div",{style:{border:"1px solid #ddd",padding:"15px"},children:[jsxRuntimeExports.jsx("h4",{children:"Title/Link:"}),jsxRuntimeExports.jsx("p",{children:Pt.metadata.name}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{style:{color:"yellow"},children:Pt.metadata.description}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Type:"})," External / Manual Entry"]})]})}),jsxRuntimeExports.jsx("button",{onClick:()=>{const gn=[...Tt,Pt],_n=Yt(gn);St(gn),Bt(null),ft(""),vt(""),Et(""),ht(_n),lt(_n),useCopyrightStore.setState(kn=>({customLicenseData:{...kn.customLicenseData,clauses:it,documentText:_n,tokens:gn}}))},style:{border:"1px solid #ccc",padding:"15px",marginTop:"15px"},children:"➕ Add External Reference to Copyright Agreement"})]}),Tt.length>0&&jsxRuntimeExports.jsxs("div",{className:"token-list",style:{marginTop:"1em",borderTop:"1px solid white"},children:[jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h3",{children:"Selected Works To Apply Copyright Agreement:"}),jsxRuntimeExports.jsx("div",{className:"token-list",style:{display:"flex",flexWrap:"wrap",gap:"15px",marginTop:"15px"},children:Tt.map((gn,_n)=>jsxRuntimeExports.jsxs("div",{className:"token-preview",style:{width:"220px",border:"1px solid #ddd",padding:"10px",boxSizing:"border-box",textAlign:"center"},children:[gn.contractAddress!=="external"&&jsxRuntimeExports.jsx("img",{src:HashToURL(gn.metadata.displayUri,"IPFS"),alt:gn.metadata.name,style:{width:"100%",height:"auto",borderRadius:"4px"}}),jsxRuntimeExports.jsxs("div",{style:{marginTop:"10px"},children:[jsxRuntimeExports.jsx("h4",{style:{fontSize:"14px",margin:"6px 0",fontWeight:"600"},children:gn.metadata.name}),jsxRuntimeExports.jsx("div",{className:styles$9.verifiedStatus,children:gn.contractAddress===HEN_CONTRACT_FA2?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"☑️✅ TEIA + Tezos Verified"}):gn.contractAddress.startsWith("KT1")?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"✅ Tezos Verified"}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"⚠️ External Link"})}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("button",{onClick:kn=>Qt(_n,kn),style:{border:"1px solid #ccc",padding:"15px",marginTop:"15px"},children:"Remove"})]})]},_n))})]})]}),jsxRuntimeExports.jsxs("div",{style:{maxWidth:"100%",overflow:"auto",padding:"15px",marginTop:"1em",border:"1px solid white",whiteSpace:"pre-wrap"},children:[jsxRuntimeExports.jsx("h2",{children:"License Agreement"}),jsxRuntimeExports.jsx("pre",{style:{whiteSpace:"pre-wrap",overflowWrap:"break-word",wordWrap:"break-word"},children:at})]}),cn.isOpen&&jsxRuntimeExports.jsx(InfoModal,{isOpen:cn.isOpen,title:cn.title,content:cn.content,onClose:Ht})]})}const CopyrightFormFields=({field:Xe,control:Ke})=>jsxRuntimeExports.jsx(Controller,{control:Ke,name:"customLicenseData",defaultValue:Xe.defaultValue,render:({field:{onChange:Ye,value:Je}})=>jsxRuntimeExports.jsx(CustomCopyrightForm,{onChange:Ye,value:Je,defaultValue:Xe.defaultValue})});function CopyrightMainForm({fields:Xe,defaultValues:Ke,onSubmit:Ye}){const{control:Je,handleSubmit:tt,formState:{errors:st}}=useFormContext();return jsxRuntimeExports.jsxs("form",{style:{width:"100%"},onSubmit:tt(Ye),children:[Xe.map(rt=>jsxRuntimeExports.jsx(CopyrightFormFields,{control:Je,field:{...rt,defaultValue:Ke==null?void 0:Ke[rt.name]}},rt.name)),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx(Button,{type:"submit",fit:!0,shadow_box:!0,disabled:Object.keys(st).length>0,children:"Create Copyright"})]})}const CopyrightMainForm$1=reactExports.memo(CopyrightMainForm);function CopyrightForm(){const Xe=useNavigate(),{control:Ke}=useFormContext(),{defaultValues:Ye}=useFormState({control:Ke}),{customLicenseData:Je}=useCopyrightStore(),tt=async st=>{try{const{customLicenseData:rt}=useCopyrightStore.getState();useCopyrightStore.setState({...st,customLicenseData:{...st.customLicenseData,tokens:(rt==null?void 0:rt.tokens)||[]},isValid:!0}),Xe("copyrightpreview")}catch(rt){console.error("Copyright creation failed:",rt.message)}};return jsxRuntimeExports.jsx(motion.div,{style:{width:"100%"},initial:{x:"-20%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-20%",opacity:0},transition:{ease:"easeInOut"},children:jsxRuntimeExports.jsx(CopyrightMainForm$1,{defaultValues:{...Ye,customLicenseData:Je},onSubmit:tt,fields:[{name:"customLicenseData",defaultValue:Je||{}}]})})}const TABS=[{title:"Edit",to:""},{title:"Preview",to:"copyrightpreview",disabled:!0},{title:"Create",disabled:!0}];function CopyrightPage(){const Xe=useForm({defaultValues:useCopyrightStore.getState().customLicenseData||{},mode:"onChange",reValidateMode:"onChange"}),Ke=useUserStore(pt=>pt.address),Ye=useUserStore(pt=>pt.userInfo),Je=useUserStore(pt=>pt.proxyAddress),tt=useUserStore(pt=>pt.proxyName),{setCustomLicenseData:st}=useCopyrightStore(),[rt,it]=reactExports.useState(),{isValid:ot,errors:at,isDirty:lt}=useFormState({control:Xe.control}),ut=reactExports.useMemo(()=>{var vt;const{customLicenseData:pt}=useCopyrightStore.getState(),ft=((vt=pt==null?void 0:pt.tokens)==null?void 0:vt.length)>0,xt=(pt==null?void 0:pt.clauses)&&Object.values(pt.clauses).some(At=>At===!0||typeof At=="string"&&At!=="none"&&At!=="");return TABS[1].disabled=!ft||!xt,TABS[2].disabled=!ft||!xt||!ot||Object.keys(at).length>0,TABS[2].to="copyrightcreate",TABS},[ot,at]),ht=reactExports.useMemo(()=>tt||Je||(Ye==null?void 0:Ye.name)||Ke,[Ke,Je,tt,Ye==null?void 0:Ye.name]);return reactExports.useEffect(()=>{async function pt(){if(Ke){const ft=await useUserStore.getState().getBalance(Ke);it(ft)}}pt()},[Ke]),jsxRuntimeExports.jsxs(Page,{title:"Copyright",children:[jsxRuntimeExports.jsx("h1",{children:"Copyright"}),jsxRuntimeExports.jsx(Tabs,{tabs:ut}),jsxRuntimeExports.jsx(FormProvider,{...Xe,children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"sync",children:jsxRuntimeExports.jsx(Outlet,{context:{minterName:ht,address:Ke,license:Xe.watch("license"),setCustomLicenseData:st,HEN_CONTRACT_FA2}})})})]})}const container$1="_container_14yft_1",emptyState="_emptyState_14yft_7",previewContent="_previewContent_14yft_20",section$1="_section_14yft_26",tokenGrid$1="_tokenGrid_14yft_39",tokenCard$1="_tokenCard_14yft_45",tokenImage$1="_tokenImage_14yft_57",placeholderImage="_placeholderImage_14yft_66",tokenInfo$1="_tokenInfo_14yft_78",verificationStatus$1="_verificationStatus_14yft_88",verified$1="_verified_14yft_92",tezosVerified$1="_tezosVerified_14yft_96",external$1="_external_14yft_100",tokenDetails="_tokenDetails_14yft_105",clausesContainer="_clausesContainer_14yft_113",agreementContainer="_agreementContainer_14yft_129",agreementHeader="_agreementHeader_14yft_135",agreementText$1="_agreementText_14yft_146",actions$1="_actions_14yft_161",styles$7={container:container$1,emptyState,previewContent,section:section$1,tokenGrid:tokenGrid$1,tokenCard:tokenCard$1,tokenImage:tokenImage$1,placeholderImage,tokenInfo:tokenInfo$1,verificationStatus:verificationStatus$1,verified:verified$1,tezosVerified:tezosVerified$1,external:external$1,tokenDetails,clausesContainer,agreementContainer,agreementHeader,agreementText:agreementText$1,actions:actions$1};function CopyrightPreview(){var Ye;const Xe=useNavigate(),{customLicenseData:Ke}=useCopyrightStore();return(Ye=Ke==null?void 0:Ke.tokens)!=null&&Ye.length?jsxRuntimeExports.jsxs("div",{className:styles$7.container,children:[jsxRuntimeExports.jsx("h2",{children:"Preview Copyright Agreement"}),jsxRuntimeExports.jsxs("div",{className:styles$7.previewContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$7.section,children:[jsxRuntimeExports.jsxs("h3",{children:["Selected Works to Apply Copyright Agreement (",Ke.tokens.length,")"]}),jsxRuntimeExports.jsx("div",{className:styles$7.tokenGrid,children:Ke.tokens.map((Je,tt)=>{var st,rt,it;return jsxRuntimeExports.jsxs("div",{className:styles$7.tokenCard,children:[Je.contractAddress!=="external"&&((st=Je.metadata)!=null&&st.displayUri)?jsxRuntimeExports.jsx("img",{src:HashToURL(Je.metadata.displayUri,"IPFS"),alt:Je.metadata.name,className:styles$7.tokenImage}):Je.contractAddress!=="external"&&((rt=Je.metadata)!=null&&rt.thumbnailUri)?jsxRuntimeExports.jsx("img",{src:HashToURL(Je.metadata.thumbnailUri,"IPFS"),alt:Je.metadata.name,className:styles$7.tokenImage}):jsxRuntimeExports.jsx("div",{className:styles$7.placeholderImage,children:Je.contractAddress==="external"?"🌐":"🖼️"}),jsxRuntimeExports.jsxs("div",{className:styles$7.tokenInfo,children:[jsxRuntimeExports.jsx("h4",{children:((it=Je.metadata)==null?void 0:it.name)||`Token ${Je.tokenId}`}),jsxRuntimeExports.jsx("div",{className:styles$7.verificationStatus,children:Je.contractAddress===HEN_CONTRACT_FA2?jsxRuntimeExports.jsx("span",{className:styles$7.verified,children:"☑️✅ TEIA + Tezos Verified"}):Je.contractAddress.startsWith("KT1")?jsxRuntimeExports.jsx("span",{className:styles$7.tezosVerified,children:"✅ Tezos Verified"}):jsxRuntimeExports.jsx("span",{className:styles$7.external,children:"⚠️ External Link"})}),Je.contractAddress!=="external"&&jsxRuntimeExports.jsx("div",{className:styles$7.tokenDetails,children:jsxRuntimeExports.jsxs("small",{children:["Token ID: ",Je.tokenId]})})]})]},tt)})})]}),jsxRuntimeExports.jsxs("div",{className:styles$7.section,children:[jsxRuntimeExports.jsx("h3",{children:"Copyright Terms & Permissions"}),jsxRuntimeExports.jsx("div",{className:styles$7.clausesContainer,children:jsxRuntimeExports.jsx(ClausesDescriptions,{clauses:Ke.clauses})})]}),jsxRuntimeExports.jsxs("div",{className:styles$7.section,children:[jsxRuntimeExports.jsx("h3",{children:"Complete License Agreement"}),jsxRuntimeExports.jsxs("div",{className:styles$7.agreementContainer,children:[jsxRuntimeExports.jsx("div",{className:styles$7.agreementHeader,children:jsxRuntimeExports.jsx("p",{children:"This is the complete legal text that will be registered on the blockchain:"})}),jsxRuntimeExports.jsx("pre",{className:styles$7.agreementText,children:(Ke==null?void 0:Ke.documentText)||"No document text available."})]})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$7.actions,children:[jsxRuntimeExports.jsx(Button,{onClick:()=>Xe("/copyright"),children:"← Back to Edit"}),jsxRuntimeExports.jsx(Button,{onClick:()=>Xe("/copyright/copyrightcreate"),shadow_box:!0,children:"Proceed to Create →"})]})]}):jsxRuntimeExports.jsx("div",{className:styles$7.container,children:jsxRuntimeExports.jsxs("div",{className:styles$7.emptyState,children:[jsxRuntimeExports.jsx("h2",{children:"No Copyright Data Available"}),jsxRuntimeExports.jsx("p",{children:"Please go back to the Edit tab to create your copyright agreement."}),jsxRuntimeExports.jsx(Button,{onClick:()=>Xe("/copyright"),children:"Go to Edit Tab"})]})})}const container="_container_1d73s_1",status="_status_1d73s_7",success="_success_1d73s_12",error="_error_1d73s_17",summary="_summary_1d73s_27",section="_section_1d73s_35",tokenGrid="_tokenGrid_1d73s_46",tokenCard="_tokenCard_1d73s_52",tokenImage="_tokenImage_1d73s_60",tokenInfo="_tokenInfo_1d73s_68",verificationStatus="_verificationStatus_1d73s_74",verified="_verified_1d73s_78",tezosVerified="_tezosVerified_1d73s_81",external="_external_1d73s_84",rightsList="_rightsList_1d73s_88",addendum="_addendum_1d73s_100",actions="_actions_1d73s_108",successActions="_successActions_1d73s_115",styles$6={container,status,success,error,summary,section,tokenGrid,tokenCard,tokenImage,tokenInfo,verificationStatus,verified,tezosVerified,external,rightsList,addendum,actions,successActions};function CopyrightCreate(){var it;const Xe=useNavigate(),{customLicenseData:Ke}=useCopyrightStore();useUserStore(ot=>ot.address);const[Ye,Je]=reactExports.useState(!1),[tt,st]=reactExports.useState(null),rt=async()=>{Je(!0),st(null);try{const{submitCopyrightAgreement:ot}=useCopyrightStore.getState(),at=await ot();st(at?{type:"success",message:`Copyright agreement submitted successfully! Operation Hash: ${at}`,opHash:at}:{type:"error",message:"Failed to submit copyright agreement. Please try again."})}catch(ot){console.error("Copyright submission error:",ot),st({type:"error",message:`Error: ${ot.message||"Unknown error occurred"}`})}finally{Je(!1)}};return(it=Ke==null?void 0:Ke.tokens)!=null&&it.length?jsxRuntimeExports.jsxs("div",{className:styles$6.container,children:[jsxRuntimeExports.jsx("h2",{children:"Create Copyright Agreement"}),tt&&jsxRuntimeExports.jsxs("div",{className:`${styles$6.status} ${styles$6[tt.type]}`,children:[jsxRuntimeExports.jsx("p",{children:tt.message}),tt.opHash&&jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsxs("small",{children:["View on explorer:",jsxRuntimeExports.jsx("a",{href:`https://better-call.dev/mainnet/opg/${tt.opHash}`,target:"_blank",rel:"noopener noreferrer",children:tt.opHash})]})})]}),jsxRuntimeExports.jsxs("div",{className:styles$6.summary,children:[jsxRuntimeExports.jsx("h3",{children:"Summary"}),jsxRuntimeExports.jsxs("div",{className:styles$6.section,children:[jsxRuntimeExports.jsxs("h4",{children:["Selected Works (",Ke.tokens.length,")"]}),jsxRuntimeExports.jsx("div",{className:styles$6.tokenGrid,children:Ke.tokens.map((ot,at)=>{var lt,ut;return jsxRuntimeExports.jsxs("div",{className:styles$6.tokenCard,children:[ot.contractAddress!=="external"&&((lt=ot.metadata)==null?void 0:lt.displayUri)&&jsxRuntimeExports.jsx("img",{src:HashToURL(ot.metadata.displayUri,"IPFS"),alt:ot.metadata.name,className:styles$6.tokenImage}),jsxRuntimeExports.jsxs("div",{className:styles$6.tokenInfo,children:[jsxRuntimeExports.jsx("h5",{children:((ut=ot.metadata)==null?void 0:ut.name)||`Token ${ot.tokenId}`}),jsxRuntimeExports.jsx("div",{className:styles$6.verificationStatus,children:ot.contractAddress===HEN_CONTRACT_FA2?jsxRuntimeExports.jsx("span",{className:styles$6.verified,children:"☑️✅ TEIA + Tezos Verified"}):ot.contractAddress.startsWith("KT1")?jsxRuntimeExports.jsx("span",{className:styles$6.tezosVerified,children:"✅ Tezos Verified"}):jsxRuntimeExports.jsx("span",{className:styles$6.external,children:"⚠️ External Link"})})]})]},at)})})]}),jsxRuntimeExports.jsxs("div",{className:styles$6.section,children:[jsxRuntimeExports.jsx("h4",{children:"Rights Granted"}),jsxRuntimeExports.jsxs("ul",{className:styles$6.rightsList,children:[Ke.clauses.reproduce&&jsxRuntimeExports.jsx("li",{children:"✅ Right to Reproduce"}),Ke.clauses.broadcast&&jsxRuntimeExports.jsx("li",{children:"✅ Right to Broadcast"}),Ke.clauses.publicDisplay&&jsxRuntimeExports.jsx("li",{children:"✅ Right to Public Display"}),Ke.clauses.createDerivativeWorks&&jsxRuntimeExports.jsx("li",{children:"✅ Right to Create Derivative Works"}),Ke.clauses.requireAttribution&&jsxRuntimeExports.jsx("li",{children:"✅ Attribution Required"}),Ke.clauses.rightsAreTransferable&&jsxRuntimeExports.jsx("li",{children:"✅ Rights Are Transferable"}),Ke.clauses.releasePublicDomain&&jsxRuntimeExports.jsx("li",{children:"✅ Released to Public Domain"}),Ke.clauses.expirationDateExists&&jsxRuntimeExports.jsxs("li",{children:["⏱️ Expires on: ",Ke.clauses.expirationDate]})]})]}),Ke.clauses.addendum&&jsxRuntimeExports.jsxs("div",{className:styles$6.section,children:[jsxRuntimeExports.jsx("h4",{children:"Additional Notes"}),jsxRuntimeExports.jsx("p",{className:styles$6.addendum,children:Ke.clauses.addendum})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$6.actions,children:[jsxRuntimeExports.jsx(Button,{onClick:()=>Xe("/copyright/copyrightpreview"),disabled:Ye,children:"Back to Preview"}),jsxRuntimeExports.jsx(Button,{onClick:rt,disabled:Ye,shadow_box:!0,children:Ye?"Submitting...":"Create & Submit Copyright Agreement"})]}),(tt==null?void 0:tt.type)==="success"&&jsxRuntimeExports.jsxs("div",{className:styles$6.successActions,children:[jsxRuntimeExports.jsx(Button,{onClick:()=>Xe("/copyright"),children:"Create Another Agreement"}),jsxRuntimeExports.jsx(Button,{onClick:()=>Xe("/"),children:"Return to Home"})]})]}):jsxRuntimeExports.jsxs("div",{className:styles$6.container,children:[jsxRuntimeExports.jsx("h2",{children:"No tokens selected"}),jsxRuntimeExports.jsx("p",{children:"Please go back to the Edit tab and select tokens to create a copyright agreement."}),jsxRuntimeExports.jsx(Button,{onClick:()=>Xe("/copyright"),children:"Go to Edit Tab"})]})}const mainContainer="_mainContainer_1nsb1_1",assetContainer="_assetContainer_1nsb1_7",copyrightListItem="_copyrightListItem_1nsb1_12",agreementDetails="_agreementDetails_1nsb1_19",agreementText="_agreementText_1nsb1_25",descriptionPreview="_descriptionPreview_1nsb1_31",nftImageWrapper="_nftImageWrapper_1nsb1_41",nftContainer="_nftContainer_1nsb1_49",nftImage="_nftImage_1nsb1_41",agreement_box="_agreement_box_1nsb1_61",title="_title_1nsb1_69",agreement_text="_agreement_text_1nsb1_74",fullTextButton="_fullTextButton_1nsb1_86",header_actions="_header_actions_1nsb1_97",action_buttons="_action_buttons_1nsb1_106",print_button="_print_button_1nsb1_112",styles$5={mainContainer,assetContainer,copyrightListItem,agreementDetails,agreementText,descriptionPreview,nftImageWrapper,nftContainer,nftImage,agreement_box,title,agreement_text,fullTextButton,header_actions,action_buttons,print_button};function AgreementViewer(Xe){const[Ke,Ye]=reactExports.useState(""),[Je,tt]=reactExports.useState(""),[st,rt]=reactExports.useState(!0),{address:it}=useOutletContext(),ot=()=>{const at=document.getElementById("printable-agreement");if(!at)return;const lt=new Date,ut=lt.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),ht=lt.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),pt=window.open("","_blank");pt==null||pt.document.write(`
      <html>
        <head>
          <title>Copyright Agreement</title>
          <style>
            body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; }
            h1 { font-size: 1.5rem; margin-bottom: 1rem; }
            pre { white-space: pre-wrap; font-family: inherit; }
            .timestamp { 
              margin-bottom: 1rem;
              color: #666;
              font-size: 0.9rem;
              border-bottom: 1px solid #eee;
              padding-bottom: 0.5rem;
            }
          </style>
        </head>
        <body>
          <h1>Active Copyright Agreement</h1>
          <div class="timestamp">
            Print Date: ${ut} at ${ht}
            ${it?`<br />Printed By: ${it}`:""}
          </div>
          <pre>${at.innerText}</pre>
        </body>
      </html>
    `),pt==null||pt.document.close(),pt==null||pt.focus(),setTimeout(()=>{pt==null||pt.print(),pt==null||pt.close()},500)};return reactExports.useEffect(()=>{(async()=>{try{const lt=await fetchAgreementText();if(!lt)return;Ye(lt);const ut=HashToURL(lt,"IPFS"),ht=await fetch(ut);if(!ht.ok)throw new Error("Failed to fetch from IPFS");const pt=await ht.json();tt(pt.document_text||"[No document_text found]")}catch(lt){console.error("Error loading agreement:",lt),tt("[Error loading agreement text]")}finally{rt(!1)}})()},[]),st?jsxRuntimeExports.jsx("p",{className:styles$5.loading,children:"Loading agreement..."}):jsxRuntimeExports.jsxs("div",{className:styles$5.agreement_box,children:[jsxRuntimeExports.jsxs("div",{className:styles$5.header_actions,children:[jsxRuntimeExports.jsx("h1",{className:styles$5.title,children:"Active Copyright Agreement"}),jsxRuntimeExports.jsx("div",{className:styles$5.action_buttons,children:jsxRuntimeExports.jsx(Button,{onClick:ot,shadow_box:!0,fit:!0,className:styles$5.print_button,children:"🖨️Print"})})]}),jsxRuntimeExports.jsxs("div",{id:"printable-agreement",className:styles$5.agreement_text,children:[(Xe==null?void 0:Xe.firstParagraph)&&Xe.firstParagraph,Je]})]})}function CopyrightDisplay(){const Xe=useUserStore(ht=>ht.address),[Ke,Ye]=reactExports.useState([]),[Je,tt]=reactExports.useState(!1),[st,rt]=reactExports.useState({}),[it,ot]=reactExports.useState({}),[at,lt]=reactExports.useState({}),ut=ht=>{ot(pt=>({...pt,[ht]:!pt[ht]}))};return reactExports.useEffect(()=>{Xe&&(tt(!0),fetchUserCopyrights(Xe).then(async ht=>{const pt={},ft={};for(const xt of ht){ft[xt.id]=!1;for(const vt of xt.value.related_tezos_nfts){const At=`${vt.contract}:${vt.token_id}`;if(!pt[At])try{const Et=await fetchTokenMetadataForCopyrightSearch(vt.contract,vt.token_id);pt[At]=(Et==null?void 0:Et.metadata)||{}}catch(Et){console.warn(`Failed to fetch metadata for ${At}`,Et),pt[At]={}}}}rt(pt),Ye(ht),ot(ft),tt(!1)}))},[Xe]),jsxRuntimeExports.jsxs("div",{className:styles$5.mainContainer,children:[jsxRuntimeExports.jsx("h1",{children:"©️ Your Registered Copyrights"}),jsxRuntimeExports.jsx("br",{}),Je?jsxRuntimeExports.jsx("p",{children:"Loading..."}):Ke.length===0?jsxRuntimeExports.jsx("p",{children:"No records found."}):jsxRuntimeExports.jsx("div",{className:styles$5.assetContainer,children:Ke.map((ht,pt)=>{var At;const{value:ft}=ht,xt=ft.related_tezos_nfts,vt=ft.related_external_nfts;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("button",{className:styles$5.copyrightListItem,onClick:()=>ut(ht.id),"aria-expanded":it[ht.id],"aria-controls":`copyright-content-${ht.id}`,children:[jsxRuntimeExports.jsxs("h2",{children:["Copyright #",ht.key.nat,it[ht.id]?"▼":"▶"]}),xt.length>0&&((At=st[`${xt[0].contract}:${xt[0].token_id}`])==null?void 0:At.name)&&jsxRuntimeExports.jsx("h4",{children:st[`${xt[0].contract}:${xt[0].token_id}`].name}),jsxRuntimeExports.jsx("p",{children:ft.active?"🟢Active":"🔴Inactive"})]}),it[ht.id]&&jsxRuntimeExports.jsxs("div",{className:styles$5.agreementDetails,children:[jsxRuntimeExports.jsx("h2",{children:"Registered Works"}),jsxRuntimeExports.jsx("br",{}),xt.length>0&&jsxRuntimeExports.jsx("div",{className:styles$5.nftContainer,children:xt.map(Et=>{const wt=`${Et.contract}:${Et.token_id}`,_t=st[wt]||{},Ct=_t.thumbnailUri&&HashToURL(_t.thumbnailUri,"IPFS")||_t.displayUri&&HashToURL(_t.displayUri,"IPFS")||_t.artifactUri&&HashToURL(_t.artifactUri,"IPFS");return jsxRuntimeExports.jsxs("div",{className:styles$5.nftImageWrapper,children:[jsxRuntimeExports.jsx("img",{src:Ct,alt:_t.name||"Artwork",className:styles$5.nftImage}),jsxRuntimeExports.jsxs("div",{className:styles$5.nftDetails,children:[jsxRuntimeExports.jsx("h3",{children:_t.name||`Token #${Et.token_id}`}),jsxRuntimeExports.jsxs("p",{children:["Contract/ID: ",Et.contract," / #",Et.token_id,jsxRuntimeExports.jsx("br",{}),Et.contract===HEN_CONTRACT_FA2&&jsxRuntimeExports.jsxs("span",{className:"ml-1",children:["☑️ TEIA Verified ",jsxRuntimeExports.jsx("a",{href:`/objkt/${Et.token_id}`,target:"_blank",rel:"noreferrer",children:"[Link]"})]}),Et.contract.startsWith("KT1")&&Et.contract!=="KT1whoa"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:" (✅ Tezos Verified)"})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:styles$5.descriptionPreview,children:_t.description||"No description."})]})]},wt)})}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h3",{children:"Clauses"}),(ft==null?void 0:ft.clauses)&&jsxRuntimeExports.jsx("div",{className:"mt-3",children:jsxRuntimeExports.jsx("ul",{className:"text-sm list-disc pl-5 space-y-1",children:Object.entries(ft.clauses).map(([Et,wt])=>{if(Et==="firstParagraph")return null;let _t=Et.replace(/([A-Z])/g," $1");return _t=_t.charAt(0).toUpperCase()+_t.slice(1),Et==="customUri"&&wt?jsxRuntimeExports.jsxs("li",{children:[_t,":"," ",jsxRuntimeExports.jsx("a",{href:wt,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:wt})]},Et):jsxRuntimeExports.jsxs("li",{children:[_t,": ",typeof wt=="boolean"?wt?"✅ Yes":"❌ No":wt||"—"]},Et)})})}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h3",{children:"Agreement Details"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("div",{className:styles$5.agreementText,children:jsxRuntimeExports.jsx("p",{children:ft.clauses.firstParagraph})}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{children:["Registrar Address: ",ht.key.address]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Exclusive Rights:"})," ",ft.clauses.exclusiveRights]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Status:"})," ",ft.active?"🟢Active":"🔴Inactive"]}),vt.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("strong",{children:"External Registration Item(s):"})}),vt.map((Et,wt)=>jsxRuntimeExports.jsxs("div",{children:["⚠️ External Link:"," ",jsxRuntimeExports.jsx("a",{href:Et,target:"_blank",rel:"noopener noreferrer",children:Et})]},wt)),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"*Registration of external URLs and URIs must be proven and maintained by the registrar."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("button",{onClick:()=>lt(Et=>({...Et,[ht.id]:!Et[ht.id]})),className:styles$5.fullTextButton,children:at[ht.id]?"🚫 Hide Full Text":"🖨️ Generate Full Text"}),at[ht.id]&&jsxRuntimeExports.jsx(AgreementViewer,{firstParagraph:ft==null?void 0:ft.clauses.firstParagraph})]})]},ht.id)})})]})}const codeofconduct="_codeofconduct_1b0qk_221",styles$4={codeofconduct},ReactComponent$2=function(Xe){return Object.keys(Xe).forEach(function(Ye){Xe[Ye]}),React.createElement("div",null,React.createElement("h1",null,React.createElement("strong",null,"Code of Conduct")),React.createElement("p",null,"Teia is a community of artists, creators, and collectors from all around the world, who come together to grow and inspire others. All participants in the community are expected to act lawfully, honestly, ethically, and in the best interest of the community. All users are expected to follow the rules and guidelines laid out in this document, acting against this CoC in any of Teias spaces might result in account restrictions or bans."),React.createElement("h2",null,"1. ",React.createElement("strong",null,"Contribute and Help Improve the Community")),React.createElement("ul",null,React.createElement("li",null,"Look for ways to contribute and find positive solutions. Stay open minded and empathetic around areas of improvements. And take initiative to help out where you can."),React.createElement("li",null,"Try to share your knowledge with the community."),React.createElement("li",null,"Your participation matters. If you feel that you or the group you identify with is underrepresented or does not have a voice in the community, know that you are welcome here. Be the first to fill that gap, invite your peers, and make yourself heard."),React.createElement("li",null,"Bugs and security flaws in the platform, blockchain or smart contract should be disclosed responsibly, according to regulations and best practices regarding those procedures.")),React.createElement("h2",null,"2. ",React.createElement("strong",null,"Unacceptable Behavior")),React.createElement("p",null,"We do not condone harassment or abuse against any member in any community environment, online or offline, for any reason. This includes the usage of Teia Infrastructure and smartcontracts related to Teia. Abusive actors can get banned from any Teia related spaces."),React.createElement("p",null,"People with significant experience and/or connections within the community are expected to behave with special care with regards to their privilege. i.e. negative comments and behaviour from them towards others may carry an unintended backlash or harm."),React.createElement("h3",null,"2.1. Harassment Includes"),React.createElement("ul",null,React.createElement("li",null,"Targeting individuals in a manner that makes them feel uncomfortable, unwelcome, or afraid."),React.createElement("li",null,"offensive verbal, visual or text based comments related to gender, age, sexual orientation, disability, neurotype, health related issues, income level, mental health status, trauma, physical appearance, body size, race, ethnicity, religion."),React.createElement("li",null,"Deliberate intimidation, stalking, following, sustained disruption of conversation."),React.createElement("li",null,"Violence, threats of violence or violent language directed against another person."),React.createElement("li",null,"Posting or displaying sexually explicit or violent material outside of the context of artistic expression."),React.createElement("li",null,`Posting or threatening to post other people's personally identifying information ("doxxing").`),React.createElement("li",null,"Inappropriate photography or recording."),React.createElement("li",null,"Inappropriate physical contact, unwelcomed sexual attention or advances, inappropriate touching, groping. You should always have someone's active consent before touching them.")),React.createElement("h3",null,"2.2. Abuse Includes"),React.createElement("ul",null,React.createElement("li",null,"Using one's authority, reputation or knowledge to intimidate or threaten others."),React.createElement("li",null,"Maliciously causing someone to doubt their own perceptions, senses, or understanding with the objective to win an argument or force someone to behave the way you want.")),React.createElement("h3",null,"2.3. Other Unacceptable Behavior"),React.createElement("ul",null,React.createElement("li",null,"Impersonating others and plagiarizing"),React.createElement("li",null,"Spamming or vandalizing any of Teias spaces, online or offline, on-chain or off-chain."),React.createElement("li",null,"Scamming and social engineering."),React.createElement("li",null,"Sustained disruption of community events, including talks and presentations."),React.createElement("li",null,"Advocating for, or encouraging any of the above behavior.")),React.createElement("h2",null,"3. Consequences of Unacceptable Behavior"),React.createElement("p",null,"Unacceptable behavior from any community member, including sponsors and those with decision-making authority, will not be tolerated."),React.createElement("p",null,"Anyone asked to stop unacceptable behavior is expected to comply immediately."),React.createElement("p",null,"If a community member engages in unacceptable behavior, the community organizers may take any action they deem appropriate, up to and including a temporary ban or permanent expulsion from the platforms and spaces associated with the Teia community without warning (and without refund in the case of a paid event)."),React.createElement("p",null,"If a community manager does not actively investigate any reported and unacceptable behavior fairly, they will need to be held responsible and might be removed from their position."),React.createElement("h2",null,"4. ",React.createElement("strong",null,"Fairplay on the Marketplace")),React.createElement("ul",null,React.createElement("li",null,"Collectors should voluntarily refrain from using automated tools for collecting, from  hindering other participants from collecting and from interfering with the site and the smart contracts in any way."),React.createElement("li",null,"Collectors should voluntarily refrain from collecting excessively such as collecting large amounts of a “free” or low priced edition. Participants should apply their discretion as to what counts as “excessive”."),React.createElement("li",null,"Artists have certain moral rights to work they create. We believe Art and also NFTs are more than simple financial assets and should be treated as such. owners of tokens should refrain from using NFT mechanisms such as burning in ways that could impact the creators moral rights to their work or reputation or endager the digital artwork/concept without the creators consent."),React.createElement("li",null,"Users are expected to refrain from any market manipulation such as wash trading and conspiring to artificially increase the perceived demand or price."),React.createElement("li",null,"Users should voluntarily refrain from minting other peoples work even if consent has been given by the original creator. While there are legitimate reasons for minting pieces by other artists for them (such as gallery projects) this goes against the spirit of NFTs and has proven to be problematic for various reasons. Gallery projects are asked to mint other artists work via Teia’s collab contracts with the main creator as co-collaborator.")),React.createElement("h2",null,"5. ",React.createElement("strong",null,"Reporting Guidelines")),React.createElement("p",null,'If you are subject to or witness unacceptable behavior, or have any other concerns, please notify a community organizer as soon as possible either via the report form, the discord channel #report or a mail to "info@teia.art"',React.createElement("br",null),"For reporting copymints, please use the discord channel #report-copyminters or send a mail to “info@teia.art”. If you report accounts via mail, please make sure to include: The full longform Tezos address of the reported account, and evidence of unacceptable behavior.",React.createElement("br",null),"Community moderators are available to help those experiencing unacceptable behavior feel safe.",React.createElement("br",null),"In the context of in-person events, organizers will also provide escorts as desired by the person experiencing distress.",React.createElement("br",null),"If you feel you have been falsely or unfairly accused of violating this Code of Conduct, you should notify Teia with a concise description of your grievance via mail. Your grievance will be handled in accordance with our existing governing policies."),React.createElement("h2",null,"6. ",React.createElement("strong",null,"Content Rules and Teia Profile Restrictions")),React.createElement("p",null,"The Teia community reserves its right to moderate content and ban/restrict wallets from the marketplace to make Teia a fair and safe experience for all."),React.createElement("p",null,"The content moderation team operates on the following Terms and works voluntarily to protect TEIA collectors and artists from copyminting and other types of malicious activity."),React.createElement("p",null,"Please understand their role and that processes like this do generate mistakes. The team investigates when alerted through the #report-copyminters channel in the TEIA Discord. Please respect their work, and help them by being courteous and accurate with the information that will help your inquiry."),React.createElement("p",null,"Various other Tezos marketplaces also use the TEIA restricted list of accounts, which means that once TEIA restricts an account, other NFT marketplaces will likely follow suit. Note that other marketplaces, even those using the same minting contracts, may have different Terms and Codes of Conduct, and so account restrictions may sometimes differ between platforms that display the same works."),React.createElement("p",null,"Since TEIA is a decentralized application, restricted OBJKTs are only restricted on Teia's user interface, meaning that they are still available through APIs and on-chain data."),React.createElement("h3",null,"6.1. Types of Profile Restrictions"),React.createElement("p",null,React.createElement("strong",null,"“Restricted account”")," Accounts that TEIA restricts are labeled “restricted account,” and OBJKTs that a restricted account has minted are labeled “restricted OBJKT” in the marketplace."),React.createElement("p",null,React.createElement("strong",null,"“Account under review”")," Accounts that are marked as “under review” have been flagged for further investigation or minor misbehaviour or general red flags. Accounts under review can still trade on the Teia UI. Users whose account has been put under review are asked to come to the #report-copyminters channel on the Teia discord for clarification."),React.createElement("h3",null,"6.2. Copyright and Intellectual Property"),React.createElement("p",null,"As artists and collectors of art, we want to acknowledge and protect intellectual property as it is crucial for our integrity and work but we also acknowledge that some forms of art need to use the works of others (i.e. remixes, tributes, quotes)."),React.createElement("p",null,React.createElement("em",null,"“Artists should avoid uses of existing copyrighted material that do not generate new artistic meaning, being aware that a change of medium, without more, may not meet this standard.”"),"*"),React.createElement("p",null,React.createElement("em",null,"“The use of a preexisting work, whether in part or in whole, should be justified by the artistic objective, and artists who deliberately repurpose copyrighted works should be prepared to explain their rationales both for doing so and for the extent of their uses”"),"[*]"),React.createElement("p",null,React.createElement("em",null,"“Artists should avoid suggesting that incorporated elements are original to them, unless that suggestion is integral to the meaning of the new work.”")," [*]"),React.createElement("p",null,"We suggest not to mint content that is in the public domain or under other similar licenses that allow reselling without creative changes or using it as a way of artistic expression."),React.createElement("p",null,"While some content is free to be used and if specified in the license even commercially, there are problematic implications that come with minting unchanged content and selling it as a NFT, such as occurring double mints if multiple people mint the same public domain content (see Terms & Conditions)."),React.createElement("p",null,"When creating a tribute piece to somebody else’s work, an artist should get written permission from the creator of the original, clearly label it as a hommage and name the original creator, unless there is an articulable aesthetic basis for not doing so (i.e. pastiche / sampling / collage / satire / public domain source)."),React.createElement("p",null,"[*] taken from page 11 of the “Code of Best Practices in Fair Use for the Visual Arts” by Patricia Aufderheide and Peter Jaszi, 2015)"),React.createElement("h3",null,"6.3. Proper Content Classification"),React.createElement("p",null,React.createElement("strong",null,"NSFW content:")," explicit, overtly sexual or violent imagery or potentially disturbing (“Not safe for work”) material should always be tagged as “NSFW” in the provided check box in the minting interface. This content is not banned but will be moderated differently on the platform."),React.createElement("p",null,React.createElement("strong",null,"Photosensitive content:")," Content that contains flashing/stroboscopic animations may cause harm to users and must be tagged accordingly with the checkbox provided in the minting UI to help make Teia a safe space for its users."),React.createElement("h3",null,"6.4. Possible Reasons for an account restriction:"),React.createElement("p",null,React.createElement("strong",null,"Copyminting"),": Minting another artist(s) work without their consent. Copyminting can also include works based on another artist's work, with minimal filters or modifications applied"),React.createElement("p",null,React.createElement("strong",null,"Double minting"),": Minting the same work more than once without artistic merit or an apparent reference for prospective buyers. Of every piece of content there should be only one NFT. Doublemints on multiple marketplaces, contracts or blockchains are treated as copymints. For pieces that are double-mints on the hicetnunc minting contract, this rule is enforced for objkts minted after 01.01.2022."),React.createElement("p",null,React.createElement("strong",null,"Infringed copyright"),": The use of artists' work in part or whole in a way that is not in line with the license/copyright of said work or not defendable through artistic merit."),React.createElement("p",null,React.createElement("strong",null,"Plagiarism:")," Implying authorship of work created by others; i.e. by copying, reproducing or using other peoples work as a base without clearly citing the source and giving credit within the work itself or within the description associated with the NFT. Exceptions can be made if the artistic merit lies within the practice of repurposing content."),React.createElement("p",null,React.createElement("strong",null,"Clear association with confirmed restricted accounts"),": Ample evidence of being a person that engaged in restricted behavior. i.e. by funding (sending an account its initial funds) of restricted accounts, being funded by a restricted account or other clear evidence of association with restricted accounts."),React.createElement("p",null,React.createElement("strong",null,"Market Manipulation"),": for example buying one's own tokens to artificially increase prices (“washtrading”)."),React.createElement("p",null,React.createElement("strong",null,"Freeloading"),": abusing the services or infrastructure of Teia in ways that put the platform in danger. Ie by minting excessive amounts of tokens in short periods of time. Cases like this don't necessarily result in a ban but Teia might need to reduce the impact on its infrastructure ie:. By unpinning the content from Teia's IPFS node."),React.createElement("p",null,React.createElement("strong",null,"Illegal Content:")," Minting material that glorifies human rights violations or is solely pornographic without artistic expression or might otherwise put Teia in legal jeopardy. This applies especially but is not limited to cases of copied or slightly modified NSFW content stolen from third parties and depictions of sexualized underaged characters. NSFW material is  generally allowed if classified properly."),React.createElement("p",null,React.createElement("strong",null,"Public domain content:")," Accounts that mint public domain content or content under C00 or similar licenses without changes or adding new artistic meaning might get restricted or those tokens might get restricted from getting sold, especially if they are not clearly indicating the original author and license in the description. This is due to the complexity to verify if such NFTs are complying with the license of the original content and the copymint team having only limited resources to do that."),React.createElement("p",null,"This rule might get lifted in the future with the implementation of new systems of verification or moderation. If your artistic practice involves using public domain work without change, it might help to notify the copymint team prior to minting and discussing the individual case."),React.createElement("p",null,React.createElement("strong",null,"Missing classification of NSFW/Photosensitive content:")," Teia might restrict accounts that mint NSFW or photosensitive material without properly classifying it upon mint, the team can also classify accounts or individual pieces after the mint."),React.createElement("p",null,React.createElement("strong",null,"Exploiting the marketplace contracts:")," For example by circumventing royalties."),React.createElement("p",null,React.createElement("strong",null,"Gambling and scamming"),": selling/using NFT tokens as a tool for scamming or gambling (i.e. prize scamming)."),React.createElement("p",null,React.createElement("strong",null,"Violating the Terms of Service or Code of Conduct in other ways:")," Mainly if it is overtly abusive to another group, invokes violence, or intimidates, harasses or impersonates."),React.createElement("h3",null,"6.5. Procedure if your Teia account has been restricted"),React.createElement("p",null,"If you are banned, please don’t create new accounts to circumvent the account restriction but request for an unban first, those accounts might get automatically banned. If you want to keep on minting, please get in touch with the content moderation team first and discuss the way forward."),React.createElement("p",null,"Contesting restrictions can be made through the #report-copyminters channel in the TEIA Discord. It’s important to notice that errors are possible at this stage, and we apologize for such cases. We ask users to direct such issues exclusively through the channel."),React.createElement("p",null,"Unfortunately, the Content moderation team has to begin the process with a lack of trust, and you have to convince them that you are trustworthy. The most straightforward way to overturn a mistaken restriction is to engage with the team politely and honestly."),React.createElement("p",null,"Provide your account address and the reason for the dispute. Be prepared to show works in progress or versions of a work in question so the team can verify and determine if the restriction is mistaken. Having a well-used Twitter account, work is shown on your website, Instagram, Flickr, Tumblr, etc., that is your own will help."),React.createElement("p",null,"If the copymint team agrees that the account does not violate the TEIA CoC, the account will have its restricted or under-review status removed. It takes about 5 mins for any changes to the restricted list to go live."))};function CodeOfConduct(){return jsxRuntimeExports.jsx(Page,{title:"codeofconduct",children:jsxRuntimeExports.jsx("div",{className:styles$4.codeofconduct,children:jsxRuntimeExports.jsx(ReactComponent$2,{})})})}const corevalues="_corevalues_1d9qx_221",styles$3={corevalues},ReactComponent$1=function(Xe){return Object.keys(Xe).forEach(function(Ye){Xe[Ye]}),React.createElement("div",null,React.createElement("h1",null,"TEIA's Core Values"),React.createElement("p",null,"TEIA is an open, digital platform of ideas and works of creativity. It is an artwork made of artworks; Artists and collectors coming together as equal lovers of creativity in order to emancipate and democratize art."),React.createElement("p",null,"We want to elevate art, no matter how known or unknown the artist. We want to protect our art. We want to fill the blank canvas that is TEIA."),React.createElement("p",null,"TEIA is a self sustaining organization managed by the community for the community."),React.createElement("p",null,"TEIA is built and improved by its participants. We believe that we as a collective can be bigger than the sum of our members. We strive to improve TEIA in a decentralised manner. That means we can build and evolve everything at once, everything follows chaotic growth. This infinite process might at times look disorganized from the outside looking in, but it isn't: The community organizes itself; chaos creates beauty."),React.createElement("p",null,"We want, however, to protect and preserve the spirit of Teia. Those core values should guide our decisions moving forward in this rapidly evolving space. This manifesto, collectively written, tries to put this spirit into words."),React.createElement("h2",null,"1. ",React.createElement("strong",null,"Inclusivity")),React.createElement("h3",null,"1.1. We believe in a community for all users and all art forms:"),React.createElement("ul",null,React.createElement("li",null,"Inclusive for everyone, no matter your race, ethnicity, religion, class, culture, national background and citizenship status, sexual orientation, gender identity and expression, age, or mental or physical disability, neurotype, health related issues, income level, mental health status or trauma"),React.createElement("li",null,"Inclusive for all participants, no matter the social/economic status."),React.createElement("li",null,"inclusive for all art forms and mediums including but not limited to: digital, analog, graphics, vr, video, audio, music, fiber, physical and the ones to come.")),React.createElement("p",null,"We want to reach a parity in voice and contribution between people from all communities and sorts of privileges and locations. This needs to be reached through concrete action and leveraging power."),React.createElement("hr",null),React.createElement("h2",null,"2. ",React.createElement("strong",null,"Respect")),React.createElement("p",null,"We believe in a community that respects one another’s dignity, ideas, thoughts and art."),React.createElement("p",null,"We respect our community and value each person's contribution."),React.createElement("p",null,"We understand that this is, and always will be, a work in progress and we are empathetic and patient with this process."),React.createElement("hr",null),React.createElement("h2",null,"3. ",React.createElement("strong",null,"Community/Solidarity")),React.createElement("p",null,"We are an egalitarian community. Our community is not about rank, status, or popularity. It’s about contributing, building together, fostering connections, encouraging community interactions, providing support, and growing together."),React.createElement("p",null,"The community must ensure the freedom of the individual, but this freedom ends where it endangers the well-being of the community."),React.createElement("p",null,"We want to:"),React.createElement("ul",null,React.createElement("li",null,"Avoid displaying indications of rank, status, or popularity but are open to celebrating contributions of time and skill."),React.createElement("li",null,"Build what benefits the whole community, not just a select few with the exception of accessibility features that enable underserved members."),React.createElement("li",null,"Create systems that are inclusive to the community as a whole."),React.createElement("li",null,"Avoid systems that could be exclusive in any shape or form."),React.createElement("li",null,"Protect the community and their intellectual property from threats.")),React.createElement("hr",null),React.createElement("h2",null,"4. ",React.createElement("strong",null,"Decentralization")),React.createElement("ul",null,React.createElement("li",null,"We believe in shared ownership on the platform, no one should have exclusive rights over others."),React.createElement("li",null,"We believe in a platform that radically dismantles and democratizes the established art market and methods of distribution."),React.createElement("li",null,"Teia should remain open source. We aim to create open solutions and look for ways to limit gatekeeping and share knowledge wherever possible."),React.createElement("li",null,"We want to build a transparent platform that facilitates a rich ecosystem and integrates with the world around it. We encourage third party additions/tools for the Teia core as long they stay true to the spirit of Teia."),React.createElement("li",null,"We want to build a platform where important decisions are voted on in an open and fair process before being implemented. We want to:",React.createElement("ul",null,React.createElement("li",null,"Encourage and secure open and free discussions around community voting."),React.createElement("li",null,"Give all users fair rights in this voting process."),React.createElement("li",null,"Encourage and help all members to participate in community votes."))),React.createElement("li",null,"The community should respect and encourage all opinions, even if they are against the consensus. The individual should respect consensus reached by the community in the same way.")),React.createElement("hr",null),React.createElement("h2",null,"5. ",React.createElement("strong",null,"Simplicity and Accessibility")),React.createElement("ul",null,React.createElement("li",null,"Teia should aim to be as accessible as possible. The creation of an account should be simple and fast and possible anonymously and without providing any personal information."),React.createElement("li",null,"Teia should not store or collect personal information about its members beyond their tezos addresses and user name and optional linked accounts."),React.createElement("li",null,"We want to provide a simple and easy-to-use platform for all users, including those with accessibility needs."),React.createElement("li",null,"We want to help those without access to the platform to get the ability to participate. (i.e. via donations for people who can’t afford to mint)"),React.createElement("li",null,"We believe in providing access to useful tools for all members of the community.")),React.createElement("hr",null),React.createElement("h2",null,"6. ",React.createElement("strong",null,"Sustainability")),React.createElement("p",null,"We believe in sustainability. With technology evolving, we as a community need to evolve too and build towards a more viable future. We shall be mindful of the consequences of our actions and evaluate our decisions with that in mind, always pursuing the least destructive path."),React.createElement("p",null,"Things that may look responsible now may be problematic for us and everyone in the future. Lifecycle impacts must be considered."),React.createElement("p",null,"With that in mind, we should always be open to the possibility of changing the technological foundations of Teia in order to ensure it stays sustainable, transparent and accessible to everyone."),React.createElement("p",null,"Teia should find decentralised and long-lasting solutions for storing files associated with Tokens minted on Teia. The files need to always be accessible to the public no matter the future state of the platform."),React.createElement("hr",null),React.createElement("h2",null,"7. ",React.createElement("strong",null,"Creativity")),React.createElement("p",null,"Creativity has no borders. We want to encourage and organize events that bring the global community together and create bonds and collaborations between us and contribute to shaping the future of art as whole."),React.createElement("p",null,"We want to encourage and help the development of new forms and shapes of art through collaborations between the users."),React.createElement("p",null,"We believe in providing an open and supportive space for all artists and collectors to express themselves freely and without limitations."),React.createElement("p",null,"Creativity needs freedom, we want to make sure there are as few restrictions as possible in place to make Teia a place of creativity without limitations but also ensuring the intellectual rights of creators/artists and complying with legal requirements as well as the wellbeing of Teia's communiity."))};function CoreValues(){return jsxRuntimeExports.jsx(Page,{title:"corevalues",children:jsxRuntimeExports.jsx("div",{className:styles$3.corevalues,children:jsxRuntimeExports.jsx(ReactComponent$1,{})})})}const privacypolicy="_privacypolicy_1qglu_221",styles$2={privacypolicy},ReactComponent=function(Xe){return Object.keys(Xe).forEach(function(Ye){Xe[Ye]}),React.createElement("div",null,React.createElement("h1",null,"Privacy Policy for Teia DAO LLC"),React.createElement("p",null,"At Teia, accessible from ",React.createElement("a",{href:"https://teia.art/"},"https://teia.art/"),", one of our main priorities is the privacy of our visitors. This Privacy Policy document contains the types of information that are collected and recorded by Teia and how we use this information. This Policy applies to information we collect on the Platform and through your use of the Platform. Please, review this Policy carefully. By accessing or using the Platform, you agree to the terms of this Policy on behalf of yourself or the entity or organization that you represent. If you do not agree to any term in this Policy, you should refrain from further use of our Services."),React.createElement("p",null,"If you have additional questions or require more information about our Privacy Policy, do not hesitate to contact us."),React.createElement("h2",null,"1. User data"),React.createElement("p",null,"Teia does not store personal data of its users however, it relies on data stored on decentralized storage solutions that are available to the public via either the Tezos blockchain IPFS and/or public indexers."),React.createElement("p",null,"Teia follows a standard procedure of using log files. These files log visitors when they visit websites. All hosting companies do this and are a part of hosting services' analytics. The information collected by log files includes internet protocol (IP) addresses, browser type, Internet Service Provider (ISP), date and time stamp, referring/exit pages, and possibly the number of clicks. These are not linked to any information that is personally identifiable. The purpose of the information is for analyzing trends, administering the site, tracking users' movement on the website, and gathering demographic information. Teia does ",React.createElement("strong",null,"NOT")," use any tracking 'cookies' like Google Analytics, Facebook Pixel, etc."),React.createElement("h2",null,"2. Third-Party Privacy Policies"),React.createElement("p",null,"Teia's Privacy Policy does not apply to other service providers or websites. Thus, we are advising you to consult the respective Privacy Policies of these third-party ad servers for more detailed information. It may include their practices and instructions about how to opt-out of certain options. You can choose to disable cookies through your individual browser options. To know more detailed information about cookie management with specific web browsers, it can be found on the browsers' respective websites."),React.createElement("p",null,"We might disclose user information in response to Subpoenas or Court Orders or to Protect Rights and to Comply with Our Policies."),React.createElement("h2",null,"3. Children's Information"),React.createElement("p",null,"Another part of our priority is adding protection for children while using the internet. We encourage parents and guardians to observe, participate in, and/or monitor and guide their online activity."),React.createElement("p",null,"Teia does not knowingly collect any Personal Identifiable Information from children under the age of  If you think that your child provided this kind of information on our website, we strongly encourage you to contact us immediately and we will do our best efforts to promptly remove such information from our records."),React.createElement("h2",null,"4. Online Privacy Policy Only"),React.createElement("p",null,"This Privacy Policy applies only to our online activities and is valid for visitors to our website with regard to the information that they shared and/or collect in Teia. This policy is not applicable to any information collected offline or via channels other than this website."),React.createElement("h2",null,"5. Accessing and Correcting your Information"),React.createElement("p",null,"To request rectification or deletion of any information collected by us concerning your use of the platform, please contact ",React.createElement("strong",null,"privacy@teia.xyz")," or send a written communication to the following postal address: PO Box 852, Long Island Rd, Majuro."),React.createElement("h2",null,"6. DMCA"),React.createElement("p",null,"The Digital Millennium Copyright Act (DMCA) sets forth a notification and counter-notification process initiated by a party complaining of alleged copyright infringement on the Platform. We may share information of the notifying, counter-notifying party, and any involved third parties, such as a collector, of an allegedly infringing artwork to facilitate communication between the relevant parties for the purposes of complying with or resolving a DMCA dispute or allegation of copyright infringement. Nothing in this Policy restricts our ability to: comply with applicable law, rules, or regulations, including the DMCA; comply with a civil, criminal, or regulatory inquiry, investigation, subpoena, or lawful court order; cooperate with law enforcement agencies about conduct we reasonably and in good faith believe may violate the law; protect our rights or our property; enforce our Terms of Service; or, prevent behavior that is (or that we think may be) illegal or unethical."),React.createElement("h2",null,"7. Consent and Terms of Use."),React.createElement("p",null,"By using our website, your usage, and any privacy dispute is subject to this Policy and our Terms of Use (link to Terms of Use)."),React.createElement("p",null,"We will notify users of changes to this Privacy Policy by posting the amended terms on the Service in advance of the effective date of the changes. If you do not agree to the changes, you should discontinue your use of the Service prior to the time the modified privacy policy takes effect. If you continue using the Service after the modified privacy policy takes effect, you will be bound by the modified privacy policy."))};function PrivacyPolicy(){return jsxRuntimeExports.jsx(Page,{title:"privacypolicy",children:jsxRuntimeExports.jsx("div",{className:styles$2.privacypolicy,children:jsxRuntimeExports.jsx(ReactComponent,{})})})}const form_section="_form_section_18nqk_11",label="_label_18nqk_15",field="_field_18nqk_19",active="_active_18nqk_69",select="_select_18nqk_74",styles$1={form_section,label,field,active,select},useProposalStore=create$2(()=>({submitProposal:async(Xe,Ke)=>{const Ye=useModalStore.getState().show,Je=useModalStore.getState().step,tt=useModalStore.getState().showError,st=useUserStore.getState().handleOp,rt="Submit Proposal";Je(rt,"Waiting for confirmation...",!0);try{const it=await Tezos.wallet.at(COPYRIGHT_CONTRACT);let ot;switch(Xe){case"treasury_fee":ot=await Tezos.rpc.packData({data:{int:Ke},type:{prim:"mutez"}});break;case"treasury_address":case"multisig_address":ot=await Tezos.rpc.packData({data:{string:Ke},type:{prim:"address"}});break;case"agreement_text":case"copyright_state":ot=await Tezos.rpc.packData({data:{string:Ke},type:{prim:"string"}});break;default:throw new Error("Invalid proposal kind")}const at=await st(it.methodsObject.submit_proposal({kind:{[Xe]:null},text:ot.packed}),rt);Ye(rt,`Proposal submitted: https://tzkt.io/${at}`,!0)}catch(it){throw console.error("[Proposal Error]",it),tt(rt,it),it}},voteOnProposal:async(Xe,Ke)=>{const Ye=useModalStore.getState().show,Je=useModalStore.getState().step,tt=useModalStore.getState().showError,st=useUserStore.getState().handleOp,rt=`Vote Proposal #${Xe}`;Je(rt,"Awaiting signature...",!0);try{const it=await Tezos.wallet.at(COPYRIGHT_CONTRACT),ot=await st(it.methodsObject.vote_proposal({proposal_id:Xe,approval:Ke}),rt);Ye(rt,`Vote sent: https://tzkt.io/${ot}`,!0)}catch(it){throw console.error("[Vote Error]",it),tt(rt,it),it}},executeProposal:async Xe=>{const Ke=useModalStore.getState().show,Ye=useModalStore.getState().step,Je=useModalStore.getState().showError,tt=useUserStore.getState().handleOp,st=`Execute Proposal #${Xe}`;Ye(st,"Preparing execution...",!0);try{const rt=await Tezos.wallet.at(COPYRIGHT_CONTRACT),it=await tt(rt.methods.execute_proposal(Xe),st);Ke(st,`Proposal executed: https://tzkt.io/${it}`,!0)}catch(rt){throw console.error("[Execute Error]",rt),Je(st,rt),rt}}})),proposalKinds=[{label:"Agreement Text (IPFS or Text)",value:"agreement_text"},{label:"Treasury Fee (Mutez)",value:"treasury_fee"},{label:"Treasury Address",value:"treasury_address"},{label:"Multisig Address",value:"multisig_address"},{label:"Set Active Copyright ID",value:"copyright_state"}];function SubmitProposal(){useUserStore(lt=>lt.address);const[Xe,Ke]=reactExports.useState("agreement_text"),[Ye,Je]=reactExports.useState(""),[tt,st]=reactExports.useState(!1),[rt,it]=reactExports.useState([]),ot=useProposalStore(lt=>lt.submitProposal);reactExports.useEffect(()=>{Xe==="copyright_state"?fetchAllCopyrights().then(it):it([])},[Xe]);const at=async()=>{st(!0);try{await ot(Xe,Ye)}catch(lt){console.error(lt)}finally{st(!1)}};return jsxRuntimeExports.jsxs("div",{className:styles$1.form_section,children:[jsxRuntimeExports.jsx("h2",{className:styles$1.title,children:"Create Proposal"}),jsxRuntimeExports.jsx("p",{children:'Admin area for the copyright registration process. This uses the same multisig contract functions as "KT1J9FYz29RBQi1oGLw8uXyACrzXzV1dHuvb" in order to administer the current registration contract.'}),jsxRuntimeExports.jsxs("div",{className:styles$1.field,children:[jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("label",{className:styles$1.label,htmlFor:"kind",children:"Proposal Type"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("select",{id:"kind",className:styles$1.select,value:Xe,onChange:lt=>{Ke(lt.target.value),Je("")},children:proposalKinds.map(lt=>jsxRuntimeExports.jsx("option",{value:lt.value,children:lt.label},lt.value))}),jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.field,children:[Xe==="agreement_text"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:styles$1.label,htmlFor:"text",children:"IPFS Hash or Text"}),jsxRuntimeExports.jsx(Textarea$1,{name:"text",style:{border:"1px solid var(--text-color)"},placeholder:"e.g. ipfs://Qm... or full agreement body",value:Ye,onChange:lt=>Je(lt.target.value),rows:4})]}),Xe==="treasury_fee"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:styles$1.label,htmlFor:"text",children:"Treasury Fee (in mutez)"}),jsxRuntimeExports.jsx(Input$2,{name:"text",type:"number",placeholder:"e.g. 100000",value:Ye,onChange:lt=>Je(lt.target.value)})]}),(Xe==="treasury_address"||Xe==="multisig_address")&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:styles$1.label,htmlFor:"text",children:"Address"}),jsxRuntimeExports.jsx(Input$2,{type:"text",name:"text",placeholder:"e.g. tz1...",value:Ye,onChange:lt=>Je(lt.target.value)})]}),Xe==="copyright_state"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:styles$1.label,htmlFor:"text",children:"Select Copyright ID"}),jsxRuntimeExports.jsxs("select",{id:"text",className:styles$1.select,value:Ye,onChange:lt=>Je(lt.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"Select one..."}),rt.map(lt=>{const ut=`${lt.key.address}-${lt.key.nat}`,ht=ut;return jsxRuntimeExports.jsx("option",{value:ut,children:ht},lt.id)})]})]})]}),jsxRuntimeExports.jsx(Button,{onClick:at,disabled:tt||!Ye,shadow_box:!0,fit:!0,children:tt?"Submitting...":"Submit Proposal"})]})}function ProposalList(){const Xe=useUserStore(pt=>pt.address),Ke=useProposalStore(pt=>pt.voteOnProposal),Ye=useProposalStore(pt=>pt.executeProposal),[Je,tt]=reactExports.useState([]),[st,rt]=reactExports.useState([]),[it,ot]=reactExports.useState(!0),[at,lt]=reactExports.useState(0);reactExports.useEffect(()=>{Promise.all([fetchProposals(),Xe?fetchAllVotes():Promise.resolve([])]).then(([pt,ft])=>{tt(pt),rt(ft)}).catch(console.error).finally(()=>ot(!1))},[Xe]);const ut=pt=>{const ft=st.find(xt=>Number(xt.key.nat)===Number(pt)&&xt.key.address===Xe);return(ft==null?void 0:ft.value)??null},ht=(pt,ft)=>{const xt=new Date(pt),vt=new Date(xt.getTime()+ft*864e5),At=new Date,Et=vt.getTime()-At.getTime();if(Et<=0)return"⛔ Expired";const wt=Math.floor(Et/864e5),_t=Math.floor(Et%864e5/36e5),Ct=Math.floor(Et%36e5/6e4);return`${wt}d ${_t}h ${Ct}m`};return reactExports.useEffect(()=>{fetchExpirationTime().then(pt=>lt(Number(pt))).catch(pt=>{console.error("Failed to fetch expiration time:",pt),lt(10)})},[]),it?jsxRuntimeExports.jsx("p",{children:"Loading proposals..."}):Je.length?jsxRuntimeExports.jsxs("div",{className:styles$1.form_section,children:[jsxRuntimeExports.jsx("h2",{className:styles$1.title,children:"Active Proposals"}),jsxRuntimeExports.jsx("div",{className:styles$1.list,children:Je.map(pt=>{const ft=pt.key,xt=Object.keys(pt.value.kind)[0],vt=ut(ft),At=pt.value.positive_votes,Et=pt.value.minimum_votes,wt=At>=Et&&!pt.value.executed,_t=st.filter(Tt=>Number(Tt.key.nat)===Number(ft)&&Tt.value===!0).length,Ct=st.filter(Tt=>Number(Tt.key.nat)===Number(ft)&&Tt.value===!1).length;return jsxRuntimeExports.jsxs("div",{className:styles$1.card,children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"ID:"})," ",ft]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Kind:"})," ",xt]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Issuer:"})," ",pt.value.issuer]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Votes:"})," ✅ ",_t," / ❌ ",Ct," (Min: ",pt.value.minimum_votes,")"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Expires In:"})," ",ht(pt.value.timestamp,at)]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Status:"})," ",pt.value.executed?"✅ Executed":"⏳ Pending"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Your Vote:"})," ",vt===!0?"✅ Yes":vt===!1?"❌ No":"❓ Not Voted"]}),jsxRuntimeExports.jsxs("div",{className:styles$1.button_group,children:[jsxRuntimeExports.jsx(Button,{shadow_box:!0,fit:!0,disabled:!Xe,onClick:()=>Ke(ft,!0),className:vt===!0?styles$1.active:"",children:"✅ Vote Yes"}),jsxRuntimeExports.jsx(Button,{shadow_box:!0,fit:!0,disabled:!Xe,onClick:()=>Ke(ft,!1),className:vt===!1?styles$1.active:"",children:"❌ Vote No"})]}),wt&&jsxRuntimeExports.jsx(Button,{shadow_box:!0,fit:!0,onClick:()=>Ye(ft),children:"✅ Execute Proposal"})]},pt.id)})})]}):jsxRuntimeExports.jsx("p",{children:"No proposals found."})}const mainPage="_mainPage_zzn13_216",pageContent="_pageContent_zzn13_220",styles={mainPage,pageContent};function AdminCopyrightPage(){return jsxRuntimeExports.jsx(Page,{title:"Copyright Admin",className:styles.mainPage,children:jsxRuntimeExports.jsxs("div",{className:styles.pageContent,children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold",children:"©️ Copyright Proposals"}),jsxRuntimeExports.jsx(SubmitProposal,{}),jsxRuntimeExports.jsx(ProposalList,{})]})})}const display_routes=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(Creations,{})}),jsxRuntimeExports.jsx(Route,{exact:!0,path:"collection",element:jsxRuntimeExports.jsx(Collections,{})}),jsxRuntimeExports.jsx(Route,{exact:!0,path:"curation",element:jsxRuntimeExports.jsx(Curation,{})}),jsxRuntimeExports.jsx(Route,{exact:!0,path:"collabs",element:jsxRuntimeExports.jsx(Collabs,{})}),jsxRuntimeExports.jsx(Route,{exact:!0,path:"copyrights",element:jsxRuntimeExports.jsx(CopyrightDisplay,{})})]}),router=createBrowserRouter(createRoutesFromChildren(jsxRuntimeExports.jsxs(Route,{path:"*",errorElement:jsxRuntimeExports.jsx(RootErrorBoundary,{}),element:jsxRuntimeExports.jsx(App,{}),children:[jsxRuntimeExports.jsx(Route,{path:"/*",index:!0,element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"admincopyright",element:jsxRuntimeExports.jsx(AdminCopyrightPage,{})}),jsxRuntimeExports.jsxs(Route,{path:"feed/*",element:jsxRuntimeExports.jsx(Home,{}),children:[jsxRuntimeExports.jsx(Route,{path:"sales",element:jsxRuntimeExports.jsx(RecentSalesFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"lists",element:jsxRuntimeExports.jsx(ListsFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"tezospride",element:jsxRuntimeExports.jsx(TagFeed,{tag:"tezospride",namespace:"tezospride"})}),jsxRuntimeExports.jsx(Route,{path:"iran",element:jsxRuntimeExports.jsx(IranFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"tez4pal",element:jsxRuntimeExports.jsx(Tez4PalFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"art4artists",element:jsxRuntimeExports.jsx(Art4ArtistsFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"morocco-quake-aid",element:jsxRuntimeExports.jsx(MoroccoQuakeFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"quake-aid",element:jsxRuntimeExports.jsx(QuakeFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"iran",element:jsxRuntimeExports.jsx(IranFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"pakistan",element:jsxRuntimeExports.jsx(PakistanFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"ukraine",element:jsxRuntimeExports.jsx(UkraineFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"random",element:jsxRuntimeExports.jsx(RandomFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"newobjkts",element:jsxRuntimeExports.jsx(NewObjktsFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"glb",element:jsxRuntimeExports.jsx(GlbFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"video",element:jsxRuntimeExports.jsx(VideoFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"image",element:jsxRuntimeExports.jsx(ImageFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"audio",element:jsxRuntimeExports.jsx(AudioFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"html-svg",element:jsxRuntimeExports.jsx(HtmlSvgFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"pdf",element:jsxRuntimeExports.jsx(PdfFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"md",element:jsxRuntimeExports.jsx(MarkdownFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"txt",element:jsxRuntimeExports.jsx(TextFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"midi",element:jsxRuntimeExports.jsx(MidiFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"gif",element:jsxRuntimeExports.jsx(GifFeed,{})}),jsxRuntimeExports.jsx(Route,{path:"friends/:address",element:jsxRuntimeExports.jsx(FriendsFeed,{})})]}),jsxRuntimeExports.jsx(Route,{path:"search/*",element:jsxRuntimeExports.jsx(Home,{isSearch:!0})}),jsxRuntimeExports.jsx(Route,{path:"kt/:address",element:jsxRuntimeExports.jsx(Display,{}),children:jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(CollabDisplay,{})})}),jsxRuntimeExports.jsx(Route,{path:"collab/:name",element:jsxRuntimeExports.jsx(Display,{}),children:jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(CollabDisplay,{})})}),jsxRuntimeExports.jsx(Route,{exact:!0,path:"about",element:jsxRuntimeExports.jsx(About,{})}),jsxRuntimeExports.jsx(Route,{exact:!0,path:"terms",element:jsxRuntimeExports.jsx(Terms,{})}),jsxRuntimeExports.jsx(Route,{exact:!0,path:"faq",element:jsxRuntimeExports.jsx(FAQ,{})}),jsxRuntimeExports.jsx(Route,{exact:!0,path:"codeofconduct",element:jsxRuntimeExports.jsx(CodeOfConduct,{})}),jsxRuntimeExports.jsx(Route,{exact:!0,path:"corevalues",element:jsxRuntimeExports.jsx(CoreValues,{})}),jsxRuntimeExports.jsx(Route,{exact:!0,path:"privacypolicy",element:jsxRuntimeExports.jsx(PrivacyPolicy,{})}),jsxRuntimeExports.jsx(Route,{path:"sync",element:jsxRuntimeExports.jsx(Sync,{})}),jsxRuntimeExports.jsxs(Route,{exact:!0,path:"mint/*",element:jsxRuntimeExports.jsx(Mint,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(MintForm,{})}),jsxRuntimeExports.jsx(Route,{path:"preview",element:jsxRuntimeExports.jsx(Preview,{})})]}),jsxRuntimeExports.jsxs(Route,{exact:!0,path:"copyright/*",element:jsxRuntimeExports.jsx(CopyrightPage,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(CopyrightForm,{})}),jsxRuntimeExports.jsx(Route,{path:"copyrightpreview",element:jsxRuntimeExports.jsx(CopyrightPreview,{})}),jsxRuntimeExports.jsx(Route,{path:"copyrightcreate",element:jsxRuntimeExports.jsx(CopyrightCreate,{})})]}),jsxRuntimeExports.jsx(Route,{path:"copyrightdisplay",element:jsxRuntimeExports.jsx(CopyrightDisplay,{})}),jsxRuntimeExports.jsxs(Route,{path:"collaborate/*",element:jsxRuntimeExports.jsx(Collaborate,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(CollabContractsOverview,{})}),jsxRuntimeExports.jsx(Route,{path:"create",element:jsxRuntimeExports.jsx(CreateCollaboration,{})})]}),jsxRuntimeExports.jsxs(Route,{path:"objkt/:id/*",element:jsxRuntimeExports.jsx(ObjktDisplay,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(Info,{})}),jsxRuntimeExports.jsx(Route,{path:"listings",element:jsxRuntimeExports.jsx(Collectors,{})}),jsxRuntimeExports.jsx(Route,{path:"history",element:jsxRuntimeExports.jsx(History,{})}),jsxRuntimeExports.jsx(Route,{path:"swap",element:jsxRuntimeExports.jsx(Swap,{})}),jsxRuntimeExports.jsx(Route,{path:"burn",element:jsxRuntimeExports.jsx(Burn,{})}),jsxRuntimeExports.jsx(Route,{path:"transfer",element:jsxRuntimeExports.jsx(Transfer,{})}),jsxRuntimeExports.jsx(Route,{path:"copyright",element:jsxRuntimeExports.jsx(Copyright,{})})]}),jsxRuntimeExports.jsx(Route,{path:"subjkt/*",element:jsxRuntimeExports.jsx(Subjkt,{})}),jsxRuntimeExports.jsx(Route,{path:"settings/*",element:jsxRuntimeExports.jsx(Settings,{})}),jsxRuntimeExports.jsx(Route,{path:"claim/*",element:jsxRuntimeExports.jsx(Claim,{})}),jsxRuntimeExports.jsxs(Route,{path:"dao/*",element:jsxRuntimeExports.jsx(DAO,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(DaoParameters,{})}),jsxRuntimeExports.jsx(Route,{path:"proposals",element:jsxRuntimeExports.jsx(DaoProposals,{})}),jsxRuntimeExports.jsx(Route,{path:"submit",element:jsxRuntimeExports.jsx(SubmitDaoProposals,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(DaoParameters,{})})]}),jsxRuntimeExports.jsx(Route,{path:"proposal/:id",element:jsxRuntimeExports.jsx(ProposalDisplay,{})}),jsxRuntimeExports.jsxs(Route,{path:"polls/*",element:jsxRuntimeExports.jsx(TeiaPolls,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(Polls,{})}),jsxRuntimeExports.jsx(Route,{path:"create",element:jsxRuntimeExports.jsx(CreatePolls,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Polls,{})})]}),jsxRuntimeExports.jsx(Route,{path:"poll/:id",element:jsxRuntimeExports.jsx(PollDisplay,{})}),jsxRuntimeExports.jsx(Route,{path:"tags/:tag",element:jsxRuntimeExports.jsx(Tags$1,{})}),jsxRuntimeExports.jsx(Route,{path:"tz/:address/*",element:jsxRuntimeExports.jsx(Display,{}),children:display_routes}),jsxRuntimeExports.jsx(Route,{path:":name/*",element:jsxRuntimeExports.jsx(Display,{}),children:display_routes})]})));client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(IconCache.Provider,{value:{},children:jsxRuntimeExports.jsx(RouterProvider,{router})}));unregister();
