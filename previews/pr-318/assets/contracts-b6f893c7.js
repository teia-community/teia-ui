var pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function wi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function lm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Ks={},el={};el.byteLength=f6;el.toByteArray=l6;el.fromByteArray=p6;var si=[],hn=[],a6=typeof Uint8Array<"u"?Uint8Array:Array,Rh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var jo=0,c6=Rh.length;jo<c6;++jo)si[jo]=Rh[jo],hn[Rh.charCodeAt(jo)]=jo;hn["-".charCodeAt(0)]=62;hn["_".charCodeAt(0)]=63;function hm(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function f6(t){var e=hm(t),r=e[0],n=e[1];return(r+n)*3/4-n}function u6(t,e,r){return(e+r)*3/4-r}function l6(t){var e,r=hm(t),n=r[0],i=r[1],s=new a6(u6(t,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=hn[t.charCodeAt(c)]<<18|hn[t.charCodeAt(c+1)]<<12|hn[t.charCodeAt(c+2)]<<6|hn[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=hn[t.charCodeAt(c)]<<2|hn[t.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=hn[t.charCodeAt(c)]<<10|hn[t.charCodeAt(c+1)]<<4|hn[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function h6(t){return si[t>>18&63]+si[t>>12&63]+si[t>>6&63]+si[t&63]}function d6(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(h6(n));return i.join("")}function p6(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(d6(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(si[e>>2]+si[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(si[e>>10]+si[e>>4&63]+si[e<<2&63]+"=")),i.join("")}var gp={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */gp.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,f=-7,h=r?i-1:0,S=r?-1:1,P=t[e+h];for(h+=S,s=P&(1<<-f)-1,P>>=-f,f+=a;f>0;s=s*256+t[e+h],h+=S,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+t[e+h],h+=S,f-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(P?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(P?-1:1)*o*Math.pow(2,s-n)};gp.write=function(t,e,r,n,i,s){var o,a,c,l=s*8-i-1,f=(1<<l)-1,h=f>>1,S=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=n?0:s-1,M=n?1:-1,H=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=S/c:e+=S*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=f?(a=0,o=f):o+h>=1?(a=(e*c-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+P]=a&255,P+=M,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[r+P]=o&255,P+=M,o/=256,l-=8);t[r+P-M]|=H*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=el,r=gp,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=C,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const L=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(L,A),L.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(L){if(L>i)throw new RangeError('The value "'+L+'" is invalid for option "size"');const A=new Uint8Array(L);return Object.setPrototypeOf(A,a.prototype),A}function a(L,A,T){if(typeof L=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(L)}return c(L,A,T)}a.poolSize=8192;function c(L,A,T){if(typeof L=="string")return S(L,A);if(ArrayBuffer.isView(L))return M(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(be(L,ArrayBuffer)||L&&be(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(be(L,SharedArrayBuffer)||L&&be(L.buffer,SharedArrayBuffer)))return H(L,A,T);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=L.valueOf&&L.valueOf();if(D!=null&&D!==L)return a.from(D,A,T);const z=$(L);if(z)return z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return a.from(L[Symbol.toPrimitive]("string"),A,T);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}a.from=function(L,A,T){return c(L,A,T)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function f(L,A,T){return l(L),L<=0?o(L):A!==void 0?typeof T=="string"?o(L).fill(A,T):o(L).fill(A):o(L)}a.alloc=function(L,A,T){return f(L,A,T)};function h(L){return l(L),o(L<0?0:q(L)|0)}a.allocUnsafe=function(L){return h(L)},a.allocUnsafeSlow=function(L){return h(L)};function S(L,A){if((typeof A!="string"||A==="")&&(A="utf8"),!a.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const T=V(L,A)|0;let D=o(T);const z=D.write(L,A);return z!==T&&(D=D.slice(0,z)),D}function P(L){const A=L.length<0?0:q(L.length)|0,T=o(A);for(let D=0;D<A;D+=1)T[D]=L[D]&255;return T}function M(L){if(be(L,Uint8Array)){const A=new Uint8Array(L);return H(A.buffer,A.byteOffset,A.byteLength)}return P(L)}function H(L,A,T){if(A<0||L.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<A+(T||0))throw new RangeError('"length" is outside of buffer bounds');let D;return A===void 0&&T===void 0?D=new Uint8Array(L):T===void 0?D=new Uint8Array(L,A):D=new Uint8Array(L,A,T),Object.setPrototypeOf(D,a.prototype),D}function $(L){if(a.isBuffer(L)){const A=q(L.length)|0,T=o(A);return T.length===0||L.copy(T,0,0,A),T}if(L.length!==void 0)return typeof L.length!="number"||Pe(L.length)?o(0):P(L);if(L.type==="Buffer"&&Array.isArray(L.data))return P(L.data)}function q(L){if(L>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return L|0}function C(L){return+L!=L&&(L=0),a.alloc(+L)}a.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==a.prototype},a.compare=function(A,T){if(be(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),be(T,Uint8Array)&&(T=a.from(T,T.offset,T.byteLength)),!a.isBuffer(A)||!a.isBuffer(T))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===T)return 0;let D=A.length,z=T.length;for(let Q=0,re=Math.min(D,z);Q<re;++Q)if(A[Q]!==T[Q]){D=A[Q],z=T[Q];break}return D<z?-1:z<D?1:0},a.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(A,T){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return a.alloc(0);let D;if(T===void 0)for(T=0,D=0;D<A.length;++D)T+=A[D].length;const z=a.allocUnsafe(T);let Q=0;for(D=0;D<A.length;++D){let re=A[D];if(be(re,Uint8Array))Q+re.length>z.length?(a.isBuffer(re)||(re=a.from(re)),re.copy(z,Q)):Uint8Array.prototype.set.call(z,re,Q);else if(a.isBuffer(re))re.copy(z,Q);else throw new TypeError('"list" argument must be an Array of Buffers');Q+=re.length}return z};function V(L,A){if(a.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||be(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);const T=L.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&T===0)return 0;let z=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return T;case"utf8":case"utf-8":return Ee(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T*2;case"hex":return T>>>1;case"base64":return Re(L).length;default:if(z)return D?-1:Ee(L).length;A=(""+A).toLowerCase(),z=!0}}a.byteLength=V;function K(L,A,T){let D=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((T===void 0||T>this.length)&&(T=this.length),T<=0)||(T>>>=0,A>>>=0,T<=A))return"";for(L||(L="utf8");;)switch(L){case"hex":return w(this,A,T);case"utf8":case"utf-8":return g(this,A,T);case"ascii":return R(this,A,T);case"latin1":case"binary":return O(this,A,T);case"base64":return d(this,A,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,A,T);default:if(D)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),D=!0}}a.prototype._isBuffer=!0;function U(L,A,T){const D=L[A];L[A]=L[T],L[T]=D}a.prototype.swap16=function(){const A=this.length;if(A%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let T=0;T<A;T+=2)U(this,T,T+1);return this},a.prototype.swap32=function(){const A=this.length;if(A%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let T=0;T<A;T+=4)U(this,T,T+3),U(this,T+1,T+2);return this},a.prototype.swap64=function(){const A=this.length;if(A%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let T=0;T<A;T+=8)U(this,T,T+7),U(this,T+1,T+6),U(this,T+2,T+5),U(this,T+3,T+4);return this},a.prototype.toString=function(){const A=this.length;return A===0?"":arguments.length===0?g(this,0,A):K.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(A){if(!a.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A?!0:a.compare(this,A)===0},a.prototype.inspect=function(){let A="";const T=t.INSPECT_MAX_BYTES;return A=this.toString("hex",0,T).replace(/(.{2})/g,"$1 ").trim(),this.length>T&&(A+=" ... "),"<Buffer "+A+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(A,T,D,z,Q){if(be(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),!a.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(T===void 0&&(T=0),D===void 0&&(D=A?A.length:0),z===void 0&&(z=0),Q===void 0&&(Q=this.length),T<0||D>A.length||z<0||Q>this.length)throw new RangeError("out of range index");if(z>=Q&&T>=D)return 0;if(z>=Q)return-1;if(T>=D)return 1;if(T>>>=0,D>>>=0,z>>>=0,Q>>>=0,this===A)return 0;let re=Q-z,he=D-T;const xe=Math.min(re,he),Ae=this.slice(z,Q),Te=A.slice(T,D);for(let He=0;He<xe;++He)if(Ae[He]!==Te[He]){re=Ae[He],he=Te[He];break}return re<he?-1:he<re?1:0};function G(L,A,T,D,z){if(L.length===0)return-1;if(typeof T=="string"?(D=T,T=0):T>2147483647?T=2147483647:T<-2147483648&&(T=-2147483648),T=+T,Pe(T)&&(T=z?0:L.length-1),T<0&&(T=L.length+T),T>=L.length){if(z)return-1;T=L.length-1}else if(T<0)if(z)T=0;else return-1;if(typeof A=="string"&&(A=a.from(A,D)),a.isBuffer(A))return A.length===0?-1:y(L,A,T,D,z);if(typeof A=="number")return A=A&255,typeof Uint8Array.prototype.indexOf=="function"?z?Uint8Array.prototype.indexOf.call(L,A,T):Uint8Array.prototype.lastIndexOf.call(L,A,T):y(L,[A],T,D,z);throw new TypeError("val must be string, number or Buffer")}function y(L,A,T,D,z){let Q=1,re=L.length,he=A.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(L.length<2||A.length<2)return-1;Q=2,re/=2,he/=2,T/=2}function xe(Te,He){return Q===1?Te[He]:Te.readUInt16BE(He*Q)}let Ae;if(z){let Te=-1;for(Ae=T;Ae<re;Ae++)if(xe(L,Ae)===xe(A,Te===-1?0:Ae-Te)){if(Te===-1&&(Te=Ae),Ae-Te+1===he)return Te*Q}else Te!==-1&&(Ae-=Ae-Te),Te=-1}else for(T+he>re&&(T=re-he),Ae=T;Ae>=0;Ae--){let Te=!0;for(let He=0;He<he;He++)if(xe(L,Ae+He)!==xe(A,He)){Te=!1;break}if(Te)return Ae}return-1}a.prototype.includes=function(A,T,D){return this.indexOf(A,T,D)!==-1},a.prototype.indexOf=function(A,T,D){return G(this,A,T,D,!0)},a.prototype.lastIndexOf=function(A,T,D){return G(this,A,T,D,!1)};function _(L,A,T,D){T=Number(T)||0;const z=L.length-T;D?(D=Number(D),D>z&&(D=z)):D=z;const Q=A.length;D>Q/2&&(D=Q/2);let re;for(re=0;re<D;++re){const he=parseInt(A.substr(re*2,2),16);if(Pe(he))return re;L[T+re]=he}return re}function I(L,A,T,D){return ye(Ee(A,L.length-T),L,T,D)}function x(L,A,T,D){return ye(le(A),L,T,D)}function E(L,A,T,D){return ye(Re(A),L,T,D)}function u(L,A,T,D){return ye(we(A,L.length-T),L,T,D)}a.prototype.write=function(A,T,D,z){if(T===void 0)z="utf8",D=this.length,T=0;else if(D===void 0&&typeof T=="string")z=T,D=this.length,T=0;else if(isFinite(T))T=T>>>0,isFinite(D)?(D=D>>>0,z===void 0&&(z="utf8")):(z=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Q=this.length-T;if((D===void 0||D>Q)&&(D=Q),A.length>0&&(D<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");let re=!1;for(;;)switch(z){case"hex":return _(this,A,T,D);case"utf8":case"utf-8":return I(this,A,T,D);case"ascii":case"latin1":case"binary":return x(this,A,T,D);case"base64":return E(this,A,T,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u(this,A,T,D);default:if(re)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),re=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function d(L,A,T){return A===0&&T===L.length?e.fromByteArray(L):e.fromByteArray(L.slice(A,T))}function g(L,A,T){T=Math.min(L.length,T);const D=[];let z=A;for(;z<T;){const Q=L[z];let re=null,he=Q>239?4:Q>223?3:Q>191?2:1;if(z+he<=T){let xe,Ae,Te,He;switch(he){case 1:Q<128&&(re=Q);break;case 2:xe=L[z+1],(xe&192)===128&&(He=(Q&31)<<6|xe&63,He>127&&(re=He));break;case 3:xe=L[z+1],Ae=L[z+2],(xe&192)===128&&(Ae&192)===128&&(He=(Q&15)<<12|(xe&63)<<6|Ae&63,He>2047&&(He<55296||He>57343)&&(re=He));break;case 4:xe=L[z+1],Ae=L[z+2],Te=L[z+3],(xe&192)===128&&(Ae&192)===128&&(Te&192)===128&&(He=(Q&15)<<18|(xe&63)<<12|(Ae&63)<<6|Te&63,He>65535&&He<1114112&&(re=He))}}re===null?(re=65533,he=1):re>65535&&(re-=65536,D.push(re>>>10&1023|55296),re=56320|re&1023),D.push(re),z+=he}return p(D)}const b=4096;function p(L){const A=L.length;if(A<=b)return String.fromCharCode.apply(String,L);let T="",D=0;for(;D<A;)T+=String.fromCharCode.apply(String,L.slice(D,D+=b));return T}function R(L,A,T){let D="";T=Math.min(L.length,T);for(let z=A;z<T;++z)D+=String.fromCharCode(L[z]&127);return D}function O(L,A,T){let D="";T=Math.min(L.length,T);for(let z=A;z<T;++z)D+=String.fromCharCode(L[z]);return D}function w(L,A,T){const D=L.length;(!A||A<0)&&(A=0),(!T||T<0||T>D)&&(T=D);let z="";for(let Q=A;Q<T;++Q)z+=me[L[Q]];return z}function v(L,A,T){const D=L.slice(A,T);let z="";for(let Q=0;Q<D.length-1;Q+=2)z+=String.fromCharCode(D[Q]+D[Q+1]*256);return z}a.prototype.slice=function(A,T){const D=this.length;A=~~A,T=T===void 0?D:~~T,A<0?(A+=D,A<0&&(A=0)):A>D&&(A=D),T<0?(T+=D,T<0&&(T=0)):T>D&&(T=D),T<A&&(T=A);const z=this.subarray(A,T);return Object.setPrototypeOf(z,a.prototype),z};function N(L,A,T){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+A>T)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(A,T,D){A=A>>>0,T=T>>>0,D||N(A,T,this.length);let z=this[A],Q=1,re=0;for(;++re<T&&(Q*=256);)z+=this[A+re]*Q;return z},a.prototype.readUintBE=a.prototype.readUIntBE=function(A,T,D){A=A>>>0,T=T>>>0,D||N(A,T,this.length);let z=this[A+--T],Q=1;for(;T>0&&(Q*=256);)z+=this[A+--T]*Q;return z},a.prototype.readUint8=a.prototype.readUInt8=function(A,T){return A=A>>>0,T||N(A,1,this.length),this[A]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(A,T){return A=A>>>0,T||N(A,2,this.length),this[A]|this[A+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(A,T){return A=A>>>0,T||N(A,2,this.length),this[A]<<8|this[A+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(A,T){return A=A>>>0,T||N(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+this[A+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(A,T){return A=A>>>0,T||N(A,4,this.length),this[A]*16777216+(this[A+1]<<16|this[A+2]<<8|this[A+3])},a.prototype.readBigUInt64LE=pe(function(A){A=A>>>0,Z(A,"offset");const T=this[A],D=this[A+7];(T===void 0||D===void 0)&&fe(A,this.length-8);const z=T+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24,Q=this[++A]+this[++A]*2**8+this[++A]*2**16+D*2**24;return BigInt(z)+(BigInt(Q)<<BigInt(32))}),a.prototype.readBigUInt64BE=pe(function(A){A=A>>>0,Z(A,"offset");const T=this[A],D=this[A+7];(T===void 0||D===void 0)&&fe(A,this.length-8);const z=T*2**24+this[++A]*2**16+this[++A]*2**8+this[++A],Q=this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+D;return(BigInt(z)<<BigInt(32))+BigInt(Q)}),a.prototype.readIntLE=function(A,T,D){A=A>>>0,T=T>>>0,D||N(A,T,this.length);let z=this[A],Q=1,re=0;for(;++re<T&&(Q*=256);)z+=this[A+re]*Q;return Q*=128,z>=Q&&(z-=Math.pow(2,8*T)),z},a.prototype.readIntBE=function(A,T,D){A=A>>>0,T=T>>>0,D||N(A,T,this.length);let z=T,Q=1,re=this[A+--z];for(;z>0&&(Q*=256);)re+=this[A+--z]*Q;return Q*=128,re>=Q&&(re-=Math.pow(2,8*T)),re},a.prototype.readInt8=function(A,T){return A=A>>>0,T||N(A,1,this.length),this[A]&128?(255-this[A]+1)*-1:this[A]},a.prototype.readInt16LE=function(A,T){A=A>>>0,T||N(A,2,this.length);const D=this[A]|this[A+1]<<8;return D&32768?D|4294901760:D},a.prototype.readInt16BE=function(A,T){A=A>>>0,T||N(A,2,this.length);const D=this[A+1]|this[A]<<8;return D&32768?D|4294901760:D},a.prototype.readInt32LE=function(A,T){return A=A>>>0,T||N(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},a.prototype.readInt32BE=function(A,T){return A=A>>>0,T||N(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},a.prototype.readBigInt64LE=pe(function(A){A=A>>>0,Z(A,"offset");const T=this[A],D=this[A+7];(T===void 0||D===void 0)&&fe(A,this.length-8);const z=this[A+4]+this[A+5]*2**8+this[A+6]*2**16+(D<<24);return(BigInt(z)<<BigInt(32))+BigInt(T+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24)}),a.prototype.readBigInt64BE=pe(function(A){A=A>>>0,Z(A,"offset");const T=this[A],D=this[A+7];(T===void 0||D===void 0)&&fe(A,this.length-8);const z=(T<<24)+this[++A]*2**16+this[++A]*2**8+this[++A];return(BigInt(z)<<BigInt(32))+BigInt(this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+D)}),a.prototype.readFloatLE=function(A,T){return A=A>>>0,T||N(A,4,this.length),r.read(this,A,!0,23,4)},a.prototype.readFloatBE=function(A,T){return A=A>>>0,T||N(A,4,this.length),r.read(this,A,!1,23,4)},a.prototype.readDoubleLE=function(A,T){return A=A>>>0,T||N(A,8,this.length),r.read(this,A,!0,52,8)},a.prototype.readDoubleBE=function(A,T){return A=A>>>0,T||N(A,8,this.length),r.read(this,A,!1,52,8)};function ee(L,A,T,D,z,Q){if(!a.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>z||A<Q)throw new RangeError('"value" argument is out of bounds');if(T+D>L.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(A,T,D,z){if(A=+A,T=T>>>0,D=D>>>0,!z){const he=Math.pow(2,8*D)-1;ee(this,A,T,D,he,0)}let Q=1,re=0;for(this[T]=A&255;++re<D&&(Q*=256);)this[T+re]=A/Q&255;return T+D},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(A,T,D,z){if(A=+A,T=T>>>0,D=D>>>0,!z){const he=Math.pow(2,8*D)-1;ee(this,A,T,D,he,0)}let Q=D-1,re=1;for(this[T+Q]=A&255;--Q>=0&&(re*=256);)this[T+Q]=A/re&255;return T+D},a.prototype.writeUint8=a.prototype.writeUInt8=function(A,T,D){return A=+A,T=T>>>0,D||ee(this,A,T,1,255,0),this[T]=A&255,T+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(A,T,D){return A=+A,T=T>>>0,D||ee(this,A,T,2,65535,0),this[T]=A&255,this[T+1]=A>>>8,T+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(A,T,D){return A=+A,T=T>>>0,D||ee(this,A,T,2,65535,0),this[T]=A>>>8,this[T+1]=A&255,T+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(A,T,D){return A=+A,T=T>>>0,D||ee(this,A,T,4,4294967295,0),this[T+3]=A>>>24,this[T+2]=A>>>16,this[T+1]=A>>>8,this[T]=A&255,T+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(A,T,D){return A=+A,T=T>>>0,D||ee(this,A,T,4,4294967295,0),this[T]=A>>>24,this[T+1]=A>>>16,this[T+2]=A>>>8,this[T+3]=A&255,T+4};function Y(L,A,T,D,z){X(A,D,z,L,T,7);let Q=Number(A&BigInt(4294967295));L[T++]=Q,Q=Q>>8,L[T++]=Q,Q=Q>>8,L[T++]=Q,Q=Q>>8,L[T++]=Q;let re=Number(A>>BigInt(32)&BigInt(4294967295));return L[T++]=re,re=re>>8,L[T++]=re,re=re>>8,L[T++]=re,re=re>>8,L[T++]=re,T}function ie(L,A,T,D,z){X(A,D,z,L,T,7);let Q=Number(A&BigInt(4294967295));L[T+7]=Q,Q=Q>>8,L[T+6]=Q,Q=Q>>8,L[T+5]=Q,Q=Q>>8,L[T+4]=Q;let re=Number(A>>BigInt(32)&BigInt(4294967295));return L[T+3]=re,re=re>>8,L[T+2]=re,re=re>>8,L[T+1]=re,re=re>>8,L[T]=re,T+8}a.prototype.writeBigUInt64LE=pe(function(A,T=0){return Y(this,A,T,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=pe(function(A,T=0){return ie(this,A,T,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(A,T,D,z){if(A=+A,T=T>>>0,!z){const xe=Math.pow(2,8*D-1);ee(this,A,T,D,xe-1,-xe)}let Q=0,re=1,he=0;for(this[T]=A&255;++Q<D&&(re*=256);)A<0&&he===0&&this[T+Q-1]!==0&&(he=1),this[T+Q]=(A/re>>0)-he&255;return T+D},a.prototype.writeIntBE=function(A,T,D,z){if(A=+A,T=T>>>0,!z){const xe=Math.pow(2,8*D-1);ee(this,A,T,D,xe-1,-xe)}let Q=D-1,re=1,he=0;for(this[T+Q]=A&255;--Q>=0&&(re*=256);)A<0&&he===0&&this[T+Q+1]!==0&&(he=1),this[T+Q]=(A/re>>0)-he&255;return T+D},a.prototype.writeInt8=function(A,T,D){return A=+A,T=T>>>0,D||ee(this,A,T,1,127,-128),A<0&&(A=255+A+1),this[T]=A&255,T+1},a.prototype.writeInt16LE=function(A,T,D){return A=+A,T=T>>>0,D||ee(this,A,T,2,32767,-32768),this[T]=A&255,this[T+1]=A>>>8,T+2},a.prototype.writeInt16BE=function(A,T,D){return A=+A,T=T>>>0,D||ee(this,A,T,2,32767,-32768),this[T]=A>>>8,this[T+1]=A&255,T+2},a.prototype.writeInt32LE=function(A,T,D){return A=+A,T=T>>>0,D||ee(this,A,T,4,2147483647,-2147483648),this[T]=A&255,this[T+1]=A>>>8,this[T+2]=A>>>16,this[T+3]=A>>>24,T+4},a.prototype.writeInt32BE=function(A,T,D){return A=+A,T=T>>>0,D||ee(this,A,T,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[T]=A>>>24,this[T+1]=A>>>16,this[T+2]=A>>>8,this[T+3]=A&255,T+4},a.prototype.writeBigInt64LE=pe(function(A,T=0){return Y(this,A,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=pe(function(A,T=0){return ie(this,A,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function oe(L,A,T,D,z,Q){if(T+D>L.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("Index out of range")}function ae(L,A,T,D,z){return A=+A,T=T>>>0,z||oe(L,A,T,4),r.write(L,A,T,D,23,4),T+4}a.prototype.writeFloatLE=function(A,T,D){return ae(this,A,T,!0,D)},a.prototype.writeFloatBE=function(A,T,D){return ae(this,A,T,!1,D)};function W(L,A,T,D,z){return A=+A,T=T>>>0,z||oe(L,A,T,8),r.write(L,A,T,D,52,8),T+8}a.prototype.writeDoubleLE=function(A,T,D){return W(this,A,T,!0,D)},a.prototype.writeDoubleBE=function(A,T,D){return W(this,A,T,!1,D)},a.prototype.copy=function(A,T,D,z){if(!a.isBuffer(A))throw new TypeError("argument should be a Buffer");if(D||(D=0),!z&&z!==0&&(z=this.length),T>=A.length&&(T=A.length),T||(T=0),z>0&&z<D&&(z=D),z===D||A.length===0||this.length===0)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),A.length-T<z-D&&(z=A.length-T+D);const Q=z-D;return this===A&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(T,D,z):Uint8Array.prototype.set.call(A,this.subarray(D,z),T),Q},a.prototype.fill=function(A,T,D,z){if(typeof A=="string"){if(typeof T=="string"?(z=T,T=0,D=this.length):typeof D=="string"&&(z=D,D=this.length),z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!a.isEncoding(z))throw new TypeError("Unknown encoding: "+z);if(A.length===1){const re=A.charCodeAt(0);(z==="utf8"&&re<128||z==="latin1")&&(A=re)}}else typeof A=="number"?A=A&255:typeof A=="boolean"&&(A=Number(A));if(T<0||this.length<T||this.length<D)throw new RangeError("Out of range index");if(D<=T)return this;T=T>>>0,D=D===void 0?this.length:D>>>0,A||(A=0);let Q;if(typeof A=="number")for(Q=T;Q<D;++Q)this[Q]=A;else{const re=a.isBuffer(A)?A:a.from(A,z),he=re.length;if(he===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(Q=0;Q<D-T;++Q)this[Q+T]=re[Q%he]}return this};const F={};function k(L,A,T){F[L]=class extends T{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${L}]`,this.stack,delete this.name}get code(){return L}set code(z){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:z,writable:!0})}toString(){return`${this.name} [${L}]: ${this.message}`}}}k("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?`${L} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),k("ERR_INVALID_ARG_TYPE",function(L,A){return`The "${L}" argument must be of type number. Received type ${typeof A}`},TypeError),k("ERR_OUT_OF_RANGE",function(L,A,T){let D=`The value of "${L}" is out of range.`,z=T;return Number.isInteger(T)&&Math.abs(T)>2**32?z=m(String(T)):typeof T=="bigint"&&(z=String(T),(T>BigInt(2)**BigInt(32)||T<-(BigInt(2)**BigInt(32)))&&(z=m(z)),z+="n"),D+=` It must be ${A}. Received ${z}`,D},RangeError);function m(L){let A="",T=L.length;const D=L[0]==="-"?1:0;for(;T>=D+4;T-=3)A=`_${L.slice(T-3,T)}${A}`;return`${L.slice(0,T)}${A}`}function B(L,A,T){Z(A,"offset"),(L[A]===void 0||L[A+T]===void 0)&&fe(A,L.length-(T+1))}function X(L,A,T,D,z,Q){if(L>T||L<A){const re=typeof A=="bigint"?"n":"";let he;throw Q>3?A===0||A===BigInt(0)?he=`>= 0${re} and < 2${re} ** ${(Q+1)*8}${re}`:he=`>= -(2${re} ** ${(Q+1)*8-1}${re}) and < 2 ** ${(Q+1)*8-1}${re}`:he=`>= ${A}${re} and <= ${T}${re}`,new F.ERR_OUT_OF_RANGE("value",he,L)}B(D,z,Q)}function Z(L,A){if(typeof L!="number")throw new F.ERR_INVALID_ARG_TYPE(A,"number",L)}function fe(L,A,T){throw Math.floor(L)!==L?(Z(L,T),new F.ERR_OUT_OF_RANGE(T||"offset","an integer",L)):A<0?new F.ERR_BUFFER_OUT_OF_BOUNDS:new F.ERR_OUT_OF_RANGE(T||"offset",`>= ${T?1:0} and <= ${A}`,L)}const se=/[^+/0-9A-Za-z-_]/g;function de(L){if(L=L.split("=")[0],L=L.trim().replace(se,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function Ee(L,A){A=A||1/0;let T;const D=L.length;let z=null;const Q=[];for(let re=0;re<D;++re){if(T=L.charCodeAt(re),T>55295&&T<57344){if(!z){if(T>56319){(A-=3)>-1&&Q.push(239,191,189);continue}else if(re+1===D){(A-=3)>-1&&Q.push(239,191,189);continue}z=T;continue}if(T<56320){(A-=3)>-1&&Q.push(239,191,189),z=T;continue}T=(z-55296<<10|T-56320)+65536}else z&&(A-=3)>-1&&Q.push(239,191,189);if(z=null,T<128){if((A-=1)<0)break;Q.push(T)}else if(T<2048){if((A-=2)<0)break;Q.push(T>>6|192,T&63|128)}else if(T<65536){if((A-=3)<0)break;Q.push(T>>12|224,T>>6&63|128,T&63|128)}else if(T<1114112){if((A-=4)<0)break;Q.push(T>>18|240,T>>12&63|128,T>>6&63|128,T&63|128)}else throw new Error("Invalid code point")}return Q}function le(L){const A=[];for(let T=0;T<L.length;++T)A.push(L.charCodeAt(T)&255);return A}function we(L,A){let T,D,z;const Q=[];for(let re=0;re<L.length&&!((A-=2)<0);++re)T=L.charCodeAt(re),D=T>>8,z=T%256,Q.push(z),Q.push(D);return Q}function Re(L){return e.toByteArray(de(L))}function ye(L,A,T,D){let z;for(z=0;z<D&&!(z+T>=A.length||z>=L.length);++z)A[z+T]=L[z];return z}function be(L,A){return L instanceof A||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===A.name}function Pe(L){return L!==L}const me=function(){const L="0123456789abcdef",A=new Array(256);for(let T=0;T<16;++T){const D=T*16;for(let z=0;z<16;++z)A[D+z]=L[T]+L[z]}return A}();function pe(L){return typeof BigInt>"u"?Le:L}function Le(){throw new Error("BigInt not supported")}})(Ks);var dm={exports:{}},Kt=dm.exports={},Fn,Kn;function E0(){throw new Error("setTimeout has not been defined")}function w0(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Fn=setTimeout:Fn=E0}catch{Fn=E0}try{typeof clearTimeout=="function"?Kn=clearTimeout:Kn=w0}catch{Kn=w0}})();function pm(t){if(Fn===setTimeout)return setTimeout(t,0);if((Fn===E0||!Fn)&&setTimeout)return Fn=setTimeout,setTimeout(t,0);try{return Fn(t,0)}catch{try{return Fn.call(null,t,0)}catch{return Fn.call(this,t,0)}}}function g6(t){if(Kn===clearTimeout)return clearTimeout(t);if((Kn===w0||!Kn)&&clearTimeout)return Kn=clearTimeout,clearTimeout(t);try{return Kn(t)}catch{try{return Kn.call(null,t)}catch{return Kn.call(this,t)}}}var Wi=[],oa=!1,go,Qf=-1;function b6(){!oa||!go||(oa=!1,go.length?Wi=go.concat(Wi):Qf=-1,Wi.length&&gm())}function gm(){if(!oa){var t=pm(b6);oa=!0;for(var e=Wi.length;e;){for(go=Wi,Wi=[];++Qf<e;)go&&go[Qf].run();Qf=-1,e=Wi.length}go=null,oa=!1,g6(t)}}Kt.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Wi.push(new bm(t,e)),Wi.length===1&&!oa&&pm(gm)};function bm(t,e){this.fun=t,this.array=e}bm.prototype.run=function(){this.fun.apply(null,this.array)};Kt.title="browser";Kt.browser=!0;Kt.env={};Kt.argv=[];Kt.version="";Kt.versions={};function ls(){}Kt.on=ls;Kt.addListener=ls;Kt.once=ls;Kt.off=ls;Kt.removeListener=ls;Kt.removeAllListeners=ls;Kt.emit=ls;Kt.prependListener=ls;Kt.prependOnceListener=ls;Kt.listeners=function(t){return[]};Kt.binding=function(t){throw new Error("process.binding is not supported")};Kt.cwd=function(){return"/"};Kt.chdir=function(t){throw new Error("process.chdir is not supported")};Kt.umask=function(){return 0};var v6=dm.exports;const Th=wi(v6);function bp(t){return Object.keys(t)}var ei;(function(t){t.PENDING="pending",t.RESOLVED="resolved",t.REJECTED="rejected"})(ei||(ei={}));const K1=()=>{throw new Error("ExposedPromise not initialized yet.")};class er{constructor(){this._resolve=K1,this._reject=K1,this._status=ei.PENDING,this._promise=new Promise((e,r)=>{this._resolve=n=>{this.isSettled()||(this._promiseResult=n,e(n),this._status=ei.RESOLVED)},this._reject=n=>{this.isSettled()||(this._promiseError=n,r(n),this._status=ei.REJECTED)}})}get promise(){return this._promise}get resolve(){return this._resolve}get reject(){return this._reject}get status(){return this._status}get promiseResult(){return this._promiseResult}get promiseError(){return this._promiseError}static resolve(e){const r=new er;return r.resolve(e),r}static reject(e){const r=new er;return r.reject(e),r}isPending(){return this.status===ei.PENDING}isResolved(){return this.status===ei.RESOLVED}isRejected(){return this.status===ei.REJECTED}isSettled(){return this.isResolved()||this.isRejected()}}var oi=[],dn=[],m6=typeof Uint8Array<"u"?Uint8Array:Array,vp=!1;function vm(){vp=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)oi[e]=t[e],dn[t.charCodeAt(e)]=e;dn["-".charCodeAt(0)]=62,dn["_".charCodeAt(0)]=63}function y6(t){vp||vm();var e,r,n,i,s,o,a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=t[a-2]==="="?2:t[a-1]==="="?1:0,o=new m6(a*3/4-s),n=s>0?a-4:a;var c=0;for(e=0,r=0;e<n;e+=4,r+=3)i=dn[t.charCodeAt(e)]<<18|dn[t.charCodeAt(e+1)]<<12|dn[t.charCodeAt(e+2)]<<6|dn[t.charCodeAt(e+3)],o[c++]=i>>16&255,o[c++]=i>>8&255,o[c++]=i&255;return s===2?(i=dn[t.charCodeAt(e)]<<2|dn[t.charCodeAt(e+1)]>>4,o[c++]=i&255):s===1&&(i=dn[t.charCodeAt(e)]<<10|dn[t.charCodeAt(e+1)]<<4|dn[t.charCodeAt(e+2)]>>2,o[c++]=i>>8&255,o[c++]=i&255),o}function E6(t){return oi[t>>18&63]+oi[t>>12&63]+oi[t>>6&63]+oi[t&63]}function w6(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],i.push(E6(n));return i.join("")}function H1(t){vp||vm();for(var e,r=t.length,n=r%3,i="",s=[],o=16383,a=0,c=r-n;a<c;a+=o)s.push(w6(t,a,a+o>c?c:a+o));return n===1?(e=t[r-1],i+=oi[e>>2],i+=oi[e<<4&63],i+="=="):n===2&&(e=(t[r-2]<<8)+t[r-1],i+=oi[e>>10],i+=oi[e>>4&63],i+=oi[e<<2&63],i+="="),s.push(i),s.join("")}function tl(t,e,r,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,f=-7,h=r?i-1:0,S=r?-1:1,P=t[e+h];for(h+=S,s=P&(1<<-f)-1,P>>=-f,f+=a;f>0;s=s*256+t[e+h],h+=S,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+t[e+h],h+=S,f-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(P?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(P?-1:1)*o*Math.pow(2,s-n)}function mm(t,e,r,n,i,s){var o,a,c,l=s*8-i-1,f=(1<<l)-1,h=f>>1,S=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=n?0:s-1,M=n?1:-1,H=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=S/c:e+=S*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=f?(a=0,o=f):o+h>=1?(a=(e*c-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+P]=a&255,P+=M,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[r+P]=o&255,P+=M,o/=256,l-=8);t[r+P-M]|=H*128}var _6={}.toString,ym=Array.isArray||function(t){return _6.call(t)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var A6=50;te.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:!0;gu();function gu(){return te.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Xi(t,e){if(gu()<e)throw new RangeError("Invalid typed array length");return te.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=te.prototype):(t===null&&(t=new te(e)),t.length=e),t}function te(t,e,r){if(!te.TYPED_ARRAY_SUPPORT&&!(this instanceof te))return new te(t,e,r);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return mp(this,t)}return Em(this,t,e,r)}te.poolSize=8192;te._augment=function(t){return t.__proto__=te.prototype,t};function Em(t,e,r,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?R6(t,e,r,n):typeof e=="string"?S6(t,e,r):T6(t,e)}te.from=function(t,e,r){return Em(null,t,e,r)};te.TYPED_ARRAY_SUPPORT&&(te.prototype.__proto__=Uint8Array.prototype,te.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&te[Symbol.species]);function wm(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function x6(t,e,r,n){return wm(e),e<=0?Xi(t,e):r!==void 0?typeof n=="string"?Xi(t,e).fill(r,n):Xi(t,e).fill(r):Xi(t,e)}te.alloc=function(t,e,r){return x6(null,t,e,r)};function mp(t,e){if(wm(e),t=Xi(t,e<0?0:yp(e)|0),!te.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}te.allocUnsafe=function(t){return mp(null,t)};te.allocUnsafeSlow=function(t){return mp(null,t)};function S6(t,e,r){if((typeof r!="string"||r==="")&&(r="utf8"),!te.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=_m(e,r)|0;t=Xi(t,n);var i=t.write(e,r);return i!==n&&(t=t.slice(0,i)),t}function _0(t,e){var r=e.length<0?0:yp(e.length)|0;t=Xi(t,r);for(var n=0;n<r;n+=1)t[n]=e[n]&255;return t}function R6(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return r===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,r):e=new Uint8Array(e,r,n),te.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=te.prototype):t=_0(t,e),t}function T6(t,e){if(gi(e)){var r=yp(e.length)|0;return t=Xi(t,r),t.length===0||e.copy(t,0,0,r),t}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||$6(e.length)?Xi(t,0):_0(t,e);if(e.type==="Buffer"&&ym(e.data))return _0(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function yp(t){if(t>=gu())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+gu().toString(16)+" bytes");return t|0}te.isBuffer=z6;function gi(t){return!!(t!=null&&t._isBuffer)}te.compare=function(e,r){if(!gi(e)||!gi(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,i=r.length,s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};te.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};te.concat=function(e,r){if(!ym(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return te.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=te.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){var o=e[n];if(!gi(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,s),s+=o.length}return i};function _m(t,e){if(gi(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var r=t.length;if(r===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return bu(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Im(t).length;default:if(n)return bu(t).length;e=(""+e).toLowerCase(),n=!0}}te.byteLength=_m;function O6(t,e,r){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return U6(this,e,r);case"utf8":case"utf-8":return Sm(this,e,r);case"ascii":return k6(this,e,r);case"latin1":case"binary":return D6(this,e,r);case"base64":return C6(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F6(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}te.prototype._isBuffer=!0;function bo(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}te.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)bo(this,r,r+1);return this};te.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)bo(this,r,r+3),bo(this,r+1,r+2);return this};te.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)bo(this,r,r+7),bo(this,r+1,r+6),bo(this,r+2,r+5),bo(this,r+3,r+4);return this};te.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Sm(this,0,e):O6.apply(this,arguments)};te.prototype.equals=function(e){if(!gi(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:te.compare(this,e)===0};te.prototype.inspect=function(){var e="",r=A6;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"};te.prototype.compare=function(e,r,n,i,s){if(!gi(e))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var o=s-i,a=n-r,c=Math.min(o,a),l=this.slice(i,s),f=e.slice(r,n),h=0;h<c;++h)if(l[h]!==f[h]){o=l[h],a=f[h];break}return o<a?-1:a<o?1:0};function Am(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=te.from(e,n)),gi(e))return e.length===0?-1:j1(t,e,r,n,i);if(typeof e=="number")return e=e&255,te.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):j1(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function j1(t,e,r,n,i){var s=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function c(P,M){return s===1?P[M]:P.readUInt16BE(M*s)}var l;if(i){var f=-1;for(l=r;l<o;l++)if(c(t,l)===c(e,f===-1?0:l-f)){if(f===-1&&(f=l),l-f+1===a)return f*s}else f!==-1&&(l-=l-f),f=-1}else for(r+a>o&&(r=o-a),l=r;l>=0;l--){for(var h=!0,S=0;S<a;S++)if(c(t,l+S)!==c(e,S)){h=!1;break}if(h)return l}return-1}te.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};te.prototype.indexOf=function(e,r,n){return Am(this,e,r,n,!0)};te.prototype.lastIndexOf=function(e,r,n){return Am(this,e,r,n,!1)};function I6(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(o*2,2),16);if(isNaN(a))return o;t[r+o]=a}return o}function P6(t,e,r,n){return il(bu(e,t.length-r),t,r,n)}function xm(t,e,r,n){return il(q6(e),t,r,n)}function N6(t,e,r,n){return xm(t,e,r,n)}function L6(t,e,r,n){return il(Im(e),t,r,n)}function M6(t,e,r,n){return il(V6(e,t.length-r),t,r,n)}te.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return I6(this,e,r,n);case"utf8":case"utf-8":return P6(this,e,r,n);case"ascii":return xm(this,e,r,n);case"latin1":case"binary":return N6(this,e,r,n);case"base64":return L6(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M6(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};te.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C6(t,e,r){return e===0&&r===t.length?H1(t):H1(t.slice(e,r))}function Sm(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var s=t[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=r){var c,l,f,h;switch(a){case 1:s<128&&(o=s);break;case 2:c=t[i+1],(c&192)===128&&(h=(s&31)<<6|c&63,h>127&&(o=h));break;case 3:c=t[i+1],l=t[i+2],(c&192)===128&&(l&192)===128&&(h=(s&15)<<12|(c&63)<<6|l&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:c=t[i+1],l=t[i+2],f=t[i+3],(c&192)===128&&(l&192)===128&&(f&192)===128&&(h=(s&15)<<18|(c&63)<<12|(l&63)<<6|f&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return B6(n)}var G1=4096;function B6(t){var e=t.length;if(e<=G1)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=G1));return r}function k6(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function D6(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function U6(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=e;s<r;++s)i+=G6(t[s]);return i}function F6(t,e,r){for(var n=t.slice(e,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}te.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i;if(te.TYPED_ARRAY_SUPPORT)i=this.subarray(e,r),i.__proto__=te.prototype;else{var s=r-e;i=new te(s,void 0);for(var o=0;o<s;++o)i[o]=this[o+e]}return i};function ar(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}te.prototype.readUIntLE=function(e,r,n){e=e|0,r=r|0,n||ar(e,r,this.length);for(var i=this[e],s=1,o=0;++o<r&&(s*=256);)i+=this[e+o]*s;return i};te.prototype.readUIntBE=function(e,r,n){e=e|0,r=r|0,n||ar(e,r,this.length);for(var i=this[e+--r],s=1;r>0&&(s*=256);)i+=this[e+--r]*s;return i};te.prototype.readUInt8=function(e,r){return r||ar(e,1,this.length),this[e]};te.prototype.readUInt16LE=function(e,r){return r||ar(e,2,this.length),this[e]|this[e+1]<<8};te.prototype.readUInt16BE=function(e,r){return r||ar(e,2,this.length),this[e]<<8|this[e+1]};te.prototype.readUInt32LE=function(e,r){return r||ar(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};te.prototype.readUInt32BE=function(e,r){return r||ar(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};te.prototype.readIntLE=function(e,r,n){e=e|0,r=r|0,n||ar(e,r,this.length);for(var i=this[e],s=1,o=0;++o<r&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};te.prototype.readIntBE=function(e,r,n){e=e|0,r=r|0,n||ar(e,r,this.length);for(var i=r,s=1,o=this[e+--i];i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};te.prototype.readInt8=function(e,r){return r||ar(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};te.prototype.readInt16LE=function(e,r){r||ar(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};te.prototype.readInt16BE=function(e,r){r||ar(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};te.prototype.readInt32LE=function(e,r){return r||ar(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};te.prototype.readInt32BE=function(e,r){return r||ar(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};te.prototype.readFloatLE=function(e,r){return r||ar(e,4,this.length),tl(this,e,!0,23,4)};te.prototype.readFloatBE=function(e,r){return r||ar(e,4,this.length),tl(this,e,!1,23,4)};te.prototype.readDoubleLE=function(e,r){return r||ar(e,8,this.length),tl(this,e,!0,52,8)};te.prototype.readDoubleBE=function(e,r){return r||ar(e,8,this.length),tl(this,e,!1,52,8)};function Hr(t,e,r,n,i,s){if(!gi(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}te.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r|0,n=n|0,!i){var s=Math.pow(2,8*n)-1;Hr(this,e,r,n,s,0)}var o=1,a=0;for(this[r]=e&255;++a<n&&(o*=256);)this[r+a]=e/o&255;return r+n};te.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r|0,n=n|0,!i){var s=Math.pow(2,8*n)-1;Hr(this,e,r,n,s,0)}var o=n-1,a=1;for(this[r+o]=e&255;--o>=0&&(a*=256);)this[r+o]=e/a&255;return r+n};te.prototype.writeUInt8=function(e,r,n){return e=+e,r=r|0,n||Hr(this,e,r,1,255,0),te.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=e&255,r+1};function rl(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-r,2);i<s;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}te.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r|0,n||Hr(this,e,r,2,65535,0),te.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):rl(this,e,r,!0),r+2};te.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r|0,n||Hr(this,e,r,2,65535,0),te.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):rl(this,e,r,!1),r+2};function nl(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-r,4);i<s;++i)t[r+i]=e>>>(n?i:3-i)*8&255}te.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r|0,n||Hr(this,e,r,4,4294967295,0),te.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255):nl(this,e,r,!0),r+4};te.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r|0,n||Hr(this,e,r,4,4294967295,0),te.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):nl(this,e,r,!1),r+4};te.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r|0,!i){var s=Math.pow(2,8*n-1);Hr(this,e,r,n,s-1,-s)}var o=0,a=1,c=0;for(this[r]=e&255;++o<n&&(a*=256);)e<0&&c===0&&this[r+o-1]!==0&&(c=1),this[r+o]=(e/a>>0)-c&255;return r+n};te.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r|0,!i){var s=Math.pow(2,8*n-1);Hr(this,e,r,n,s-1,-s)}var o=n-1,a=1,c=0;for(this[r+o]=e&255;--o>=0&&(a*=256);)e<0&&c===0&&this[r+o+1]!==0&&(c=1),this[r+o]=(e/a>>0)-c&255;return r+n};te.prototype.writeInt8=function(e,r,n){return e=+e,r=r|0,n||Hr(this,e,r,1,127,-128),te.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=e&255,r+1};te.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r|0,n||Hr(this,e,r,2,32767,-32768),te.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):rl(this,e,r,!0),r+2};te.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r|0,n||Hr(this,e,r,2,32767,-32768),te.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):rl(this,e,r,!1),r+2};te.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r|0,n||Hr(this,e,r,4,2147483647,-2147483648),te.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):nl(this,e,r,!0),r+4};te.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r|0,n||Hr(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),te.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):nl(this,e,r,!1),r+4};function Rm(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Tm(t,e,r,n,i){return i||Rm(t,e,r,4),mm(t,e,r,n,23,4),r+4}te.prototype.writeFloatLE=function(e,r,n){return Tm(this,e,r,!0,n)};te.prototype.writeFloatBE=function(e,r,n){return Tm(this,e,r,!1,n)};function Om(t,e,r,n,i){return i||Rm(t,e,r,8),mm(t,e,r,n,52,8),r+8}te.prototype.writeDoubleLE=function(e,r,n){return Om(this,e,r,!0,n)};te.prototype.writeDoubleBE=function(e,r,n){return Om(this,e,r,!1,n)};te.prototype.copy=function(e,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var s=i-n,o;if(this===e&&n<r&&r<i)for(o=s-1;o>=0;--o)e[o+r]=this[o+n];else if(s<1e3||!te.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+r]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),r);return s};te.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!te.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{var a=gi(e)?e:bu(new te(e,i).toString()),c=a.length;for(o=0;o<n-r;++o)this[o+r]=a[o%c]}return this};var K6=/[^+\/0-9A-Za-z-_]/g;function H6(t){if(t=j6(t).replace(K6,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function j6(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function G6(t){return t<16?"0"+t.toString(16):t.toString(16)}function bu(t,e){e=e||1/0;for(var r,n=t.length,i=null,s=[],o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function q6(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function V6(t,e){for(var r,n,i,s=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function Im(t){return y6(H6(t))}function il(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function $6(t){return t!==t}function z6(t){return t!=null&&(!!t._isBuffer||Pm(t)||W6(t))}function Pm(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function W6(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&Pm(t.slice(0,0))}var A0={exports:{}};typeof Object.create=="function"?A0.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:A0.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var qt=A0.exports,x0={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Ks,n=r.Buffer;function i(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(o,a,c){return n(o,a,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},s.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(x0,x0.exports);var sn=x0.exports,S0={exports:{}},Ba={};function Nm(){throw new Error("setTimeout has not been defined")}function Lm(){throw new Error("clearTimeout has not been defined")}var ws=Nm,_s=Lm;typeof globalThis.setTimeout=="function"&&(ws=setTimeout);typeof globalThis.clearTimeout=="function"&&(_s=clearTimeout);function Mm(t){if(ws===setTimeout)return setTimeout(t,0);if((ws===Nm||!ws)&&setTimeout)return ws=setTimeout,setTimeout(t,0);try{return ws(t,0)}catch{try{return ws.call(null,t,0)}catch{return ws.call(this,t,0)}}}function X6(t){if(_s===clearTimeout)return clearTimeout(t);if((_s===Lm||!_s)&&clearTimeout)return _s=clearTimeout,clearTimeout(t);try{return _s(t)}catch{try{return _s.call(null,t)}catch{return _s.call(this,t)}}}var Ji=[],aa=!1,vo,Zf=-1;function J6(){!aa||!vo||(aa=!1,vo.length?Ji=vo.concat(Ji):Zf=-1,Ji.length&&Cm())}function Cm(){if(!aa){var t=Mm(J6);aa=!0;for(var e=Ji.length;e;){for(vo=Ji,Ji=[];++Zf<e;)vo&&vo[Zf].run();Zf=-1,e=Ji.length}vo=null,aa=!1,X6(t)}}function Y6(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Ji.push(new Bm(t,e)),Ji.length===1&&!aa&&Mm(Cm)}function Bm(t,e){this.fun=t,this.array=e}Bm.prototype.run=function(){this.fun.apply(null,this.array)};var Q6="browser",Z6="browser",e_=!0,t_={},r_=[],n_="",i_={},s_={},o_={};function Po(){}var a_=Po,c_=Po,f_=Po,u_=Po,l_=Po,h_=Po,d_=Po;function p_(t){throw new Error("process.binding is not supported")}function g_(){return"/"}function b_(t){throw new Error("process.chdir is not supported")}function v_(){return 0}var Qo=globalThis.performance||{},m_=Qo.now||Qo.mozNow||Qo.msNow||Qo.oNow||Qo.webkitNow||function(){return new Date().getTime()};function y_(t){var e=m_.call(Qo)*.001,r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r=r-t[0],n=n-t[1],n<0&&(r--,n+=1e9)),[r,n]}var E_=new Date;function w_(){var t=new Date,e=t-E_;return e/1e3}var tt={nextTick:Y6,title:Q6,browser:e_,env:t_,argv:r_,version:n_,versions:i_,on:a_,addListener:c_,once:f_,off:u_,removeListener:l_,removeAllListeners:h_,emit:d_,binding:p_,cwd:g_,chdir:b_,umask:v_,hrtime:y_,platform:Z6,release:s_,config:o_,uptime:w_},Ep={exports:{}},ca=typeof Reflect=="object"?Reflect:null,q1=ca&&typeof ca.apply=="function"?ca.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},eu;ca&&typeof ca.ownKeys=="function"?eu=ca.ownKeys:Object.getOwnPropertySymbols?eu=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:eu=function(e){return Object.getOwnPropertyNames(e)};function __(t){console&&console.warn&&console.warn(t)}var km=Number.isNaN||function(e){return e!==e};function yt(){yt.init.call(this)}Ep.exports=yt;Ep.exports.once=R_;yt.EventEmitter=yt;yt.prototype._events=void 0;yt.prototype._eventsCount=0;yt.prototype._maxListeners=void 0;var V1=10;function sl(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(yt,"defaultMaxListeners",{enumerable:!0,get:function(){return V1},set:function(t){if(typeof t!="number"||t<0||km(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");V1=t}});yt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};yt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||km(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Dm(t){return t._maxListeners===void 0?yt.defaultMaxListeners:t._maxListeners}yt.prototype.getMaxListeners=function(){return Dm(this)};yt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")q1(c,this,r);else for(var l=c.length,f=jm(c,l),n=0;n<l;++n)q1(f[n],this,r);return!0};function Um(t,e,r,n){var i,s,o;if(sl(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Dm(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,__(a)}return t}yt.prototype.addListener=function(e,r){return Um(this,e,r,!1)};yt.prototype.on=yt.prototype.addListener;yt.prototype.prependListener=function(e,r){return Um(this,e,r,!0)};function A_(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Fm(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=A_.bind(n);return i.listener=r,n.wrapFn=i,i}yt.prototype.once=function(e,r){return sl(r),this.on(e,Fm(this,e,r)),this};yt.prototype.prependOnceListener=function(e,r){return sl(r),this.prependListener(e,Fm(this,e,r)),this};yt.prototype.removeListener=function(e,r){var n,i,s,o,a;if(sl(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():x_(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};yt.prototype.off=yt.prototype.removeListener;yt.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Km(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?S_(i):jm(i,i.length)}yt.prototype.listeners=function(e){return Km(this,e,!0)};yt.prototype.rawListeners=function(e){return Km(this,e,!1)};yt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Hm.call(t,e)};yt.prototype.listenerCount=Hm;function Hm(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}yt.prototype.eventNames=function(){return this._eventsCount>0?eu(this._events):[]};function jm(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function x_(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function S_(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function R_(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Gm(t,e,s,{once:!0}),e!=="error"&&T_(t,i,{once:!0})})}function T_(t,e,r){typeof t.on=="function"&&Gm(t,"error",e,r)}function Gm(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var qm=Ep.exports,Vm=qm.EventEmitter,R0;typeof Object.create=="function"?R0=function(e,r){e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:R0=function(e,r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e};const $m=R0;var O_=/%[sdj%]/g;function ol(t){if(!Hc(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(fi(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,i=n.length,s=String(t).replace(O_,function(a){if(a==="%%")return"%";if(r>=i)return a;switch(a){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return a}}),o=n[r];r<i;o=n[++r])Kc(o)||!No(o)?s+=" "+o:s+=" "+fi(o);return s}function wp(t,e){if(ai(globalThis.process))return function(){return wp(t,e).apply(this,arguments)};if(Th.noDeprecation===!0)return t;var r=!1;function n(){if(!r){if(Th.throwDeprecation)throw new Error(e);Th.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}return n}var xf={},Oh;function zm(t){if(ai(Oh)&&(Oh={}.NODE_DEBUG||""),t=t.toUpperCase(),!xf[t])if(new RegExp("\\b"+t+"\\b","i").test(Oh)){var e=0;xf[t]=function(){var r=ol.apply(null,arguments);console.error("%s %d: %s",t,e,r)}}else xf[t]=function(){};return xf[t]}function fi(t,e){var r={seen:[],stylize:P_};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),al(e)?r.showHidden=e:e&&Sp(r,e),ai(r.showHidden)&&(r.showHidden=!1),ai(r.depth)&&(r.depth=2),ai(r.colors)&&(r.colors=!1),ai(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=I_),vu(r,t,r.depth)}fi.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};fi.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function I_(t,e){var r=fi.styles[e];return r?"\x1B["+fi.colors[r][0]+"m"+t+"\x1B["+fi.colors[r][1]+"m":t}function P_(t,e){return t}function N_(t){var e={};return t.forEach(function(r,n){e[r]=!0}),e}function vu(t,e,r){if(t.customInspect&&e&&Ec(e.inspect)&&e.inspect!==fi&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(r,t);return Hc(n)||(n=vu(t,n,r)),n}var i=L_(t,e);if(i)return i;var s=Object.keys(e),o=N_(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),yc(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return Ih(e);if(s.length===0){if(Ec(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(mc(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(mu(e))return t.stylize(Date.prototype.toString.call(e),"date");if(yc(e))return Ih(e)}var c="",l=!1,f=["{","}"];if(_p(e)&&(l=!0,f=["[","]"]),Ec(e)){var h=e.name?": "+e.name:"";c=" [Function"+h+"]"}if(mc(e)&&(c=" "+RegExp.prototype.toString.call(e)),mu(e)&&(c=" "+Date.prototype.toUTCString.call(e)),yc(e)&&(c=" "+Ih(e)),s.length===0&&(!l||e.length==0))return f[0]+c+f[1];if(r<0)return mc(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var S;return l?S=M_(t,e,r,o,s):S=s.map(function(P){return T0(t,e,r,o,P,l)}),t.seen.pop(),C_(S,c,f)}function L_(t,e){if(ai(e))return t.stylize("undefined","undefined");if(Hc(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(Ap(e))return t.stylize(""+e,"number");if(al(e))return t.stylize(""+e,"boolean");if(Kc(e))return t.stylize("null","null")}function Ih(t){return"["+Error.prototype.toString.call(t)+"]"}function M_(t,e,r,n,i){for(var s=[],o=0,a=e.length;o<a;++o)Zm(e,String(o))?s.push(T0(t,e,r,n,String(o),!0)):s.push("");return i.forEach(function(c){c.match(/^\d+$/)||s.push(T0(t,e,r,n,c,!0))}),s}function T0(t,e,r,n,i,s){var o,a,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?c.set?a=t.stylize("[Getter/Setter]","special"):a=t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),Zm(n,i)||(o="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(Kc(r)?a=vu(t,c.value,null):a=vu(t,c.value,r-1),a.indexOf(`
`)>-1&&(s?a=a.split(`
`).map(function(l){return"  "+l}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(l){return"   "+l}).join(`
`))):a=t.stylize("[Circular]","special")),ai(o)){if(s&&i.match(/^\d+$/))return a;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function C_(t,e,r){var n=t.reduce(function(i,s){return s.indexOf(`
`)>=0,i+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function _p(t){return Array.isArray(t)}function al(t){return typeof t=="boolean"}function Kc(t){return t===null}function Wm(t){return t==null}function Ap(t){return typeof t=="number"}function Hc(t){return typeof t=="string"}function Xm(t){return typeof t=="symbol"}function ai(t){return t===void 0}function mc(t){return No(t)&&xp(t)==="[object RegExp]"}function No(t){return typeof t=="object"&&t!==null}function mu(t){return No(t)&&xp(t)==="[object Date]"}function yc(t){return No(t)&&(xp(t)==="[object Error]"||t instanceof Error)}function Ec(t){return typeof t=="function"}function Jm(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}function Ym(t){return te.isBuffer(t)}function xp(t){return Object.prototype.toString.call(t)}function Ph(t){return t<10?"0"+t.toString(10):t.toString(10)}var B_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k_(){var t=new Date,e=[Ph(t.getHours()),Ph(t.getMinutes()),Ph(t.getSeconds())].join(":");return[t.getDate(),B_[t.getMonth()],e].join(" ")}function Qm(){console.log("%s - %s",k_(),ol.apply(null,arguments))}function Sp(t,e){if(!e||!No(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}function Zm(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const D_={inherits:$m,_extend:Sp,log:Qm,isBuffer:Ym,isPrimitive:Jm,isFunction:Ec,isError:yc,isDate:mu,isObject:No,isRegExp:mc,isUndefined:ai,isSymbol:Xm,isString:Hc,isNumber:Ap,isNullOrUndefined:Wm,isNull:Kc,isBoolean:al,isArray:_p,inspect:fi,deprecate:wp,format:ol,debuglog:zm},U_=Object.freeze(Object.defineProperty({__proto__:null,_extend:Sp,debuglog:zm,default:D_,deprecate:wp,format:ol,inherits:$m,inspect:fi,isArray:_p,isBoolean:al,isBuffer:Ym,isDate:mu,isError:yc,isFunction:Ec,isNull:Kc,isNullOrUndefined:Wm,isNumber:Ap,isObject:No,isPrimitive:Jm,isRegExp:mc,isString:Hc,isSymbol:Xm,isUndefined:ai,log:Qm},Symbol.toStringTag,{value:"Module"})),ey=lm(U_);var Nh,$1;function F_(){if($1)return Nh;$1=1;function t(S,P){var M=Object.keys(S);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(S);P&&(H=H.filter(function($){return Object.getOwnPropertyDescriptor(S,$).enumerable})),M.push.apply(M,H)}return M}function e(S){for(var P=1;P<arguments.length;P++){var M=arguments[P]!=null?arguments[P]:{};P%2?t(Object(M),!0).forEach(function(H){r(S,H,M[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(M)):t(Object(M)).forEach(function(H){Object.defineProperty(S,H,Object.getOwnPropertyDescriptor(M,H))})}return S}function r(S,P,M){return P in S?Object.defineProperty(S,P,{value:M,enumerable:!0,configurable:!0,writable:!0}):S[P]=M,S}function n(S,P){if(!(S instanceof P))throw new TypeError("Cannot call a class as a function")}function i(S,P){for(var M=0;M<P.length;M++){var H=P[M];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(S,H.key,H)}}function s(S,P,M){return P&&i(S.prototype,P),M&&i(S,M),S}var o=Ks,a=o.Buffer,c=ey,l=c.inspect,f=l&&l.custom||"inspect";function h(S,P,M){a.prototype.copy.call(S,P,M)}return Nh=function(){function S(){n(this,S),this.head=null,this.tail=null,this.length=0}return s(S,[{key:"push",value:function(M){var H={data:M,next:null};this.length>0?this.tail.next=H:this.head=H,this.tail=H,++this.length}},{key:"unshift",value:function(M){var H={data:M,next:this.head};this.length===0&&(this.tail=H),this.head=H,++this.length}},{key:"shift",value:function(){if(this.length!==0){var M=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,M}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(M){if(this.length===0)return"";for(var H=this.head,$=""+H.data;H=H.next;)$+=M+H.data;return $}},{key:"concat",value:function(M){if(this.length===0)return a.alloc(0);for(var H=a.allocUnsafe(M>>>0),$=this.head,q=0;$;)h($.data,H,q),q+=$.data.length,$=$.next;return H}},{key:"consume",value:function(M,H){var $;return M<this.head.data.length?($=this.head.data.slice(0,M),this.head.data=this.head.data.slice(M)):M===this.head.data.length?$=this.shift():$=H?this._getString(M):this._getBuffer(M),$}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(M){var H=this.head,$=1,q=H.data;for(M-=q.length;H=H.next;){var C=H.data,V=M>C.length?C.length:M;if(V===C.length?q+=C:q+=C.slice(0,M),M-=V,M===0){V===C.length?(++$,H.next?this.head=H.next:this.head=this.tail=null):(this.head=H,H.data=C.slice(V));break}++$}return this.length-=$,q}},{key:"_getBuffer",value:function(M){var H=a.allocUnsafe(M),$=this.head,q=1;for($.data.copy(H),M-=$.data.length;$=$.next;){var C=$.data,V=M>C.length?C.length:M;if(C.copy(H,H.length-M,0,V),M-=V,M===0){V===C.length?(++q,$.next?this.head=$.next:this.head=this.tail=null):(this.head=$,$.data=C.slice(V));break}++q}return this.length-=q,H}},{key:f,value:function(M,H){return l(this,e({},H,{depth:0,customInspect:!1}))}}]),S}(),Nh}function K_(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,tt.nextTick(O0,this,t)):tt.nextTick(O0,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?tt.nextTick(tu,r):(r._writableState.errorEmitted=!0,tt.nextTick(z1,r,s)):tt.nextTick(z1,r,s):e?(tt.nextTick(tu,r),e(s)):tt.nextTick(tu,r)}),this)}function z1(t,e){O0(t,e),tu(t)}function tu(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function H_(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function O0(t,e){t.emit("error",e)}function j_(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var ty={destroy:K_,undestroy:H_,errorOrDestroy:j_},Lo={};function G_(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var ry={};function yn(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}var i=function(s){G_(o,s);function o(a,c,l){return s.call(this,n(a,c,l))||this}return o}(r);i.prototype.name=r.name,i.prototype.code=t,ry[t]=i}function W1(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function q_(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function V_(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function $_(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}yn("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);yn("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&q_(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(V_(t," argument"))i="The ".concat(t," ").concat(n," ").concat(W1(e,"type"));else{var s=$_(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(W1(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);yn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");yn("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});yn("ERR_STREAM_PREMATURE_CLOSE","Premature close");yn("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});yn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");yn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");yn("ERR_STREAM_WRITE_AFTER_END","write after end");yn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);yn("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);yn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Lo.codes=ry;var z_=Lo.codes.ERR_INVALID_OPT_VALUE;function W_(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function X_(t,e,r,n){var i=W_(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new z_(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var ny={getHighWaterMark:X_},cl={},Rp=sn.Buffer,X1=Rp.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function J_(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Y_(t){var e=J_(t);if(typeof e!="string"&&(Rp.isEncoding===X1||!X1(t)))throw new Error("Unknown encoding: "+t);return e||t}cl.StringDecoder=jc;function jc(t){this.encoding=Y_(t);var e;switch(this.encoding){case"utf16le":this.text=n4,this.end=i4,e=4;break;case"utf8":this.fillLast=e4,e=4;break;case"base64":this.text=s4,this.end=o4,e=3;break;default:this.write=a4,this.end=c4;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Rp.allocUnsafe(e)}jc.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};jc.prototype.end=r4;jc.prototype.text=t4;jc.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Lh(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Q_(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Lh(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Lh(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Lh(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Z_(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,""}}function e4(t){var e=this.lastTotal-this.lastNeed,r=Z_(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function t4(t,e){var r=Q_(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function r4(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function n4(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function i4(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function s4(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function o4(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function a4(t){return t.toString(this.encoding)}function c4(t){return t&&t.length?this.write(t):""}var J1=Lo.codes.ERR_STREAM_PREMATURE_CLOSE;function f4(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function u4(){}function l4(t){return t.setHeader&&typeof t.abort=="function"}function iy(t,e,r){if(typeof e=="function")return iy(t,null,e);e||(e={}),r=f4(r||u4);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},c=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,c=!0,i||r.call(t)},f=function(M){r.call(t,M)},h=function(){var M;if(n&&!c)return(!t._readableState||!t._readableState.ended)&&(M=new J1),r.call(t,M);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(M=new J1),r.call(t,M)},S=function(){t.req.on("finish",a)};return l4(t)?(t.on("complete",a),t.on("abort",h),t.req?S():t.on("request",S)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",l),t.on("finish",a),e.error!==!1&&t.on("error",f),t.on("close",h),function(){t.removeListener("complete",a),t.removeListener("abort",h),t.removeListener("request",S),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",l),t.removeListener("error",f),t.removeListener("close",h)}}var Tp=iy,Mh,Y1;function h4(){if(Y1)return Mh;Y1=1;var t;function e(q,C,V){return C in q?Object.defineProperty(q,C,{value:V,enumerable:!0,configurable:!0,writable:!0}):q[C]=V,q}var r=Tp,n=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),l=Symbol("stream");function f(q,C){return{value:q,done:C}}function h(q){var C=q[n];if(C!==null){var V=q[l].read();V!==null&&(q[a]=null,q[n]=null,q[i]=null,C(f(V,!1)))}}function S(q){tt.nextTick(h,q)}function P(q,C){return function(V,K){q.then(function(){if(C[o]){V(f(void 0,!0));return}C[c](V,K)},K)}}var M=Object.getPrototypeOf(function(){}),H=Object.setPrototypeOf((t={get stream(){return this[l]},next:function(){var C=this,V=this[s];if(V!==null)return Promise.reject(V);if(this[o])return Promise.resolve(f(void 0,!0));if(this[l].destroyed)return new Promise(function(y,_){tt.nextTick(function(){C[s]?_(C[s]):y(f(void 0,!0))})});var K=this[a],U;if(K)U=new Promise(P(K,this));else{var G=this[l].read();if(G!==null)return Promise.resolve(f(G,!1));U=new Promise(this[c])}return this[a]=U,U}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var C=this;return new Promise(function(V,K){C[l].destroy(null,function(U){if(U){K(U);return}V(f(void 0,!0))})})}),t),M),$=function(C){var V,K=Object.create(H,(V={},e(V,l,{value:C,writable:!0}),e(V,n,{value:null,writable:!0}),e(V,i,{value:null,writable:!0}),e(V,s,{value:null,writable:!0}),e(V,o,{value:C._readableState.endEmitted,writable:!0}),e(V,c,{value:function(G,y){var _=K[l].read();_?(K[a]=null,K[n]=null,K[i]=null,G(f(_,!1))):(K[n]=G,K[i]=y)},writable:!0}),V));return K[a]=null,r(C,function(U){if(U&&U.code!=="ERR_STREAM_PREMATURE_CLOSE"){var G=K[i];G!==null&&(K[a]=null,K[n]=null,K[i]=null,G(U)),K[s]=U;return}var y=K[n];y!==null&&(K[a]=null,K[n]=null,K[i]=null,y(f(void 0,!0))),K[o]=!0}),C.on("readable",S.bind(null,K)),K};return Mh=$,Mh}var Ch,Q1;function d4(){return Q1||(Q1=1,Ch=function(){throw new Error("Readable.from is not available in the browser")}),Ch}const Op=Ba;Op.Readable=ct;ct.ReadableState=oy;qm.EventEmitter;var sy=function(e,r){return e.listeners(r).length},Gc=Vm,fl=Ks.Buffer,p4=globalThis.Uint8Array||function(){};function g4(t){return fl.from(t)}function b4(t){return fl.isBuffer(t)||t instanceof p4}var Bh=ey,Ke;Bh&&Bh.debuglog?Ke=Bh.debuglog("stream"):Ke=function(){};var v4=F_(),Ip=ty,m4=ny,y4=m4.getHighWaterMark,ul=Lo.codes,E4=ul.ERR_INVALID_ARG_TYPE,w4=ul.ERR_STREAM_PUSH_AFTER_EOF,_4=ul.ERR_METHOD_NOT_IMPLEMENTED,A4=ul.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,fa,kh,Dh;qt(ct,Gc);var wc=Ip.errorOrDestroy,Uh=["error","close","destroy","pause","resume"];function x4(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function oy(t,e,r){t=t||{},typeof r!="boolean"&&(r=e instanceof Op.Duplex),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y4(this,t,"readableHighWaterMark",r),this.buffer=new v4,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(fa||(fa=cl.StringDecoder),this.decoder=new fa(t.encoding),this.encoding=t.encoding)}function ct(t){if(!(this instanceof ct))return new ct(t);var e=this instanceof Op.Duplex;this._readableState=new oy(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Gc.call(this)}Object.defineProperty(ct.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});ct.prototype.destroy=Ip.destroy;ct.prototype._undestroy=Ip.undestroy;ct.prototype._destroy=function(t,e){e(t)};ct.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=fl.from(t,e),e=""),n=!0),ay(this,t,e,!1,n)};ct.prototype.unshift=function(t){return ay(this,t,null,!0,!1)};function ay(t,e,r,n,i){Ke("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,T4(t,s);else{var o;if(i||(o=S4(s,e)),o)wc(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==fl.prototype&&(e=g4(e)),n)s.endEmitted?wc(t,new A4):Fh(t,s,e,!0);else if(s.ended)wc(t,new w4);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?Fh(t,s,e,!1):I0(t,s)):Fh(t,s,e,!1)}else n||(s.reading=!1,I0(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function Fh(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&ll(t)),I0(t,e)}function S4(t,e){var r;return!b4(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new E4("chunk",["string","Buffer","Uint8Array"],e)),r}ct.prototype.isPaused=function(){return this._readableState.flowing===!1};ct.prototype.setEncoding=function(t){fa||(fa=cl.StringDecoder);var e=new fa(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var Z1=1073741824;function R4(t){return t>=Z1?t=Z1:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function eg(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=R4(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}ct.prototype.read=function(t){Ke("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Ke("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Kh(this):ll(this),null;if(t=eg(t,e),t===0&&e.ended)return e.length===0&&Kh(this),null;var n=e.needReadable;Ke("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Ke("length less than watermark",n)),e.ended||e.reading?(n=!1,Ke("reading or ended",n)):n&&(Ke("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=eg(r,e)));var i;return t>0?i=uy(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Kh(this)),i!==null&&this.emit("data",i),i};function T4(t,e){if(Ke("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?ll(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,cy(t)))}}function ll(t){var e=t._readableState;Ke("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Ke("emitReadable",e.flowing),e.emittedReadable=!0,tt.nextTick(cy,t))}function cy(t){var e=t._readableState;Ke("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Pp(t)}function I0(t,e){e.readingMore||(e.readingMore=!0,tt.nextTick(O4,t,e))}function O4(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(Ke("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}ct.prototype._read=function(t){wc(this,new _4("_read()"))};ct.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Ke("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==tt.stdout&&t!==tt.stderr,s=i?a:H;n.endEmitted?tt.nextTick(s):r.once("end",s),t.on("unpipe",o);function o($,q){Ke("onunpipe"),$===r&&q&&q.hasUnpiped===!1&&(q.hasUnpiped=!0,f())}function a(){Ke("onend"),t.end()}var c=I4(r);t.on("drain",c);var l=!1;function f(){Ke("cleanup"),t.removeListener("close",P),t.removeListener("finish",M),t.removeListener("drain",c),t.removeListener("error",S),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",H),r.removeListener("data",h),l=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c()}r.on("data",h);function h($){Ke("ondata");var q=t.write($);Ke("dest.write",q),q===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&ly(n.pipes,t)!==-1)&&!l&&(Ke("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function S($){Ke("onerror",$),H(),t.removeListener("error",S),sy(t,"error")===0&&wc(t,$)}x4(t,"error",S);function P(){t.removeListener("finish",M),H()}t.once("close",P);function M(){Ke("onfinish"),t.removeListener("close",P),H()}t.once("finish",M);function H(){Ke("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Ke("pipe resume"),r.resume()),t};function I4(t){return function(){var r=t._readableState;Ke("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&sy(t,"data")&&(r.flowing=!0,Pp(t))}}ct.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=ly(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};ct.prototype.on=function(t,e){var r=Gc.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Ke("on readable",n.length,n.reading),n.length?ll(this):n.reading||tt.nextTick(P4,this)),r};ct.prototype.addListener=ct.prototype.on;ct.prototype.removeListener=function(t,e){var r=Gc.prototype.removeListener.call(this,t,e);return t==="readable"&&tt.nextTick(fy,this),r};ct.prototype.removeAllListeners=function(t){var e=Gc.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&tt.nextTick(fy,this),e};function fy(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function P4(t){Ke("readable nexttick read 0"),t.read(0)}ct.prototype.resume=function(){var t=this._readableState;return t.flowing||(Ke("resume"),t.flowing=!t.readableListening,N4(this,t)),t.paused=!1,this};function N4(t,e){e.resumeScheduled||(e.resumeScheduled=!0,tt.nextTick(L4,t,e))}function L4(t,e){Ke("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Pp(t),e.flowing&&!e.reading&&t.read(0)}ct.prototype.pause=function(){return Ke("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ke("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Pp(t){var e=t._readableState;for(Ke("flow",e.flowing);e.flowing&&t.read()!==null;);}ct.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Ke("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(Ke("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<Uh.length;s++)t.on(Uh[s],this.emit.bind(this,Uh[s]));return this._read=function(o){Ke("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(ct.prototype[Symbol.asyncIterator]=function(){return kh===void 0&&(kh=h4()),kh(this)});Object.defineProperty(ct.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(ct.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(ct.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});ct._fromList=uy;Object.defineProperty(ct.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function uy(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Kh(t){var e=t._readableState;Ke("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,tt.nextTick(M4,e,t))}function M4(t,e){if(Ke("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(ct.from=function(t,e){return Dh===void 0&&(Dh=d4()),Dh(ct,t,e)});function ly(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}var C4=B4;function B4(t,e){if(Hh("noDeprecation"))return t;var r=!1;function n(){if(!r){if(Hh("throwDeprecation"))throw new Error(e);Hh("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function Hh(t){try{if(!globalThis.localStorage)return!1}catch{return!1}var e=globalThis.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}const Np=Ba;Np.Writable=kt;function hy(t){var e=this;this.next=null,this.entry=null,this.finish=function(){c5(e,t)}}kt.WritableState=qc;var k4={deprecate:C4},dy=Vm,hl=Ks.Buffer,D4=globalThis.Uint8Array||function(){};function U4(t){return hl.from(t)}function F4(t){return hl.isBuffer(t)||t instanceof D4}var Lp=ty,K4=ny,H4=K4.getHighWaterMark,Ys=Lo.codes,j4=Ys.ERR_INVALID_ARG_TYPE,G4=Ys.ERR_METHOD_NOT_IMPLEMENTED,q4=Ys.ERR_MULTIPLE_CALLBACK,V4=Ys.ERR_STREAM_CANNOT_PIPE,$4=Ys.ERR_STREAM_DESTROYED,z4=Ys.ERR_STREAM_NULL_VALUES,W4=Ys.ERR_STREAM_WRITE_AFTER_END,X4=Ys.ERR_UNKNOWN_ENCODING,pa=Lp.errorOrDestroy;qt(kt,dy);function J4(){}function qc(t,e,r){t=t||{},typeof r!="boolean"&&(r=e instanceof Np.Duplex),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=H4(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){n5(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new hy(this)}qc.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(qc.prototype,"buffer",{get:k4.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var ru;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ru=Function.prototype[Symbol.hasInstance],Object.defineProperty(kt,Symbol.hasInstance,{value:function(e){return ru.call(this,e)?!0:this!==kt?!1:e&&e._writableState instanceof qc}})):ru=function(e){return e instanceof this};function kt(t){var e=this instanceof Np.Duplex;if(!e&&!ru.call(kt,this))return new kt(t);this._writableState=new qc(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),dy.call(this)}kt.prototype.pipe=function(){pa(this,new V4)};function Y4(t,e){var r=new W4;pa(t,r),tt.nextTick(e,r)}function Q4(t,e,r,n){var i;return r===null?i=new z4:typeof r!="string"&&!e.objectMode&&(i=new j4("chunk",["string","Buffer"],r)),i?(pa(t,i),tt.nextTick(n,i),!1):!0}kt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&F4(t);return s&&!hl.isBuffer(t)&&(t=U4(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=J4),n.ending?Y4(this,r):(s||Q4(this,n,t,r))&&(n.pendingcb++,i=e5(this,n,s,t,e,r)),i};kt.prototype.cork=function(){this._writableState.corked++};kt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&py(this,t))};kt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new X4(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(kt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Z4(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=hl.from(e,r)),e}Object.defineProperty(kt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function e5(t,e,r,n,i,s){if(!r){var o=Z4(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else P0(t,e,!1,a,n,i,s);return c}function P0(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new $4("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function t5(t,e,r,n,i){--e.pendingcb,r?(tt.nextTick(i,n),tt.nextTick(Tc,t,e),t._writableState.errorEmitted=!0,pa(t,n)):(i(n),t._writableState.errorEmitted=!0,pa(t,n),Tc(t,e))}function r5(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function n5(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new q4;if(r5(r),e)t5(t,r,n,e,i);else{var s=gy(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&py(t,r),n?tt.nextTick(tg,t,r,s,i):tg(t,r,s,i)}}function tg(t,e,r,n){r||i5(t,e),e.pendingcb--,n(),Tc(t,e)}function i5(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function py(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,P0(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new hy(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback,h=e.objectMode?1:c.length;if(P0(t,e,!1,h,c,l,f),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}kt.prototype._write=function(t,e,r){r(new G4("_write()"))};kt.prototype._writev=null;kt.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||a5(this,n,r),this};Object.defineProperty(kt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function gy(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function s5(t,e){t._final(function(r){e.pendingcb--,r&&pa(t,r),e.prefinished=!0,t.emit("prefinish"),Tc(t,e)})}function o5(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,tt.nextTick(s5,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Tc(t,e){var r=gy(e);if(r&&(o5(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function a5(t,e,r){e.ending=!0,Tc(t,e),r&&(e.finished?tt.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function c5(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(kt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});kt.prototype.destroy=Lp.destroy;kt.prototype._undestroy=Lp.undestroy;kt.prototype._destroy=function(t,e){e(t)};var f5=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};const ga=Ba;ga.Duplex=bi;qt(bi,ga.Readable);for(var rg=f5(ga.Writable.prototype),jh=0;jh<rg.length;jh++){var Gh=rg[jh];bi.prototype[Gh]||(bi.prototype[Gh]=ga.Writable.prototype[Gh])}function bi(t){if(!(this instanceof bi))return new bi(t);ga.Readable.call(this,t),ga.Writable.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",u5)))}Object.defineProperty(bi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(bi.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(bi.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function u5(){this._writableState.ended||tt.nextTick(l5,this)}function l5(t){t.end()}Object.defineProperty(bi.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});const Vc=Ba;Vc.Transform=is;var dl=Lo.codes,h5=dl.ERR_METHOD_NOT_IMPLEMENTED,d5=dl.ERR_MULTIPLE_CALLBACK,p5=dl.ERR_TRANSFORM_ALREADY_TRANSFORMING,g5=dl.ERR_TRANSFORM_WITH_LENGTH_0;qt(is,Vc.Duplex);function b5(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new d5);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function is(t){if(!(this instanceof is))return new is(t);Vc.Duplex.call(this,t),this._transformState={afterTransform:b5.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",v5)}function v5(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){ng(t,e,r)}):ng(this,null,null)}is.prototype.push=function(t,e){return this._transformState.needTransform=!1,Vc.Duplex.prototype.push.call(this,t,e)};is.prototype._transform=function(t,e,r){r(new h5("_transform()"))};is.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};is.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};is.prototype._destroy=function(t,e){Vc.Duplex.prototype._destroy.call(this,t,function(r){e(r)})};function ng(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new g5;if(t._transformState.transforming)throw new p5;return t.push(null)}const by=Ba;by.PassThrough=Oc;qt(Oc,by.Transform);function Oc(t){if(!(this instanceof Oc))return new Oc(t);Transform.call(this,t)}Oc.prototype._transform=function(t,e,r){r(null,t)};var qh;function m5(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var vy=Lo.codes,y5=vy.ERR_MISSING_ARGS,E5=vy.ERR_STREAM_DESTROYED;function ig(t){if(t)throw t}function w5(t){return t.setHeader&&typeof t.abort=="function"}function _5(t,e,r,n){n=m5(n);var i=!1;t.on("close",function(){i=!0}),qh===void 0&&(qh=Tp),qh(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,w5(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new E5("pipe"))}}}function sg(t){t()}function A5(t,e){return t.pipe(e)}function x5(t){return!t.length||typeof t[t.length-1]!="function"?ig:t.pop()}function S5(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=x5(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new y5("streams");var i,s=e.map(function(o,a){var c=a<e.length-1,l=a>0;return _5(o,c,l,function(f){i||(i=f),f&&s.forEach(sg),!c&&(s.forEach(sg),n(i))})});return e.reduce(A5)}var R5=S5;(function(t,e){const r=Ba;e=t.exports=r.Readable,e.Stream=r.Readable,e.Readable=r.Readable,e.Writable=r.Writable,e.Duplex=r.Duplex,e.Transform=r.Transform,e.PassThrough=r.PassThrough,e.finished=Tp,e.pipeline=R5})(S0,S0.exports);var my=S0.exports,yu=sn.Buffer,yy=my.Transform,T5=qt;function O5(t,e){if(!yu.isBuffer(t)&&typeof t!="string")throw new TypeError(e+" must be a string or a buffer")}function Qs(t){yy.call(this),this._block=yu.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}T5(Qs,yy);Qs.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(i){n=i}r(n)};Qs.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)};Qs.prototype.update=function(t,e){if(O5(t,"Data"),this._finalized)throw new Error("Digest already called");yu.isBuffer(t)||(t=yu.from(t,e));for(var r=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)r[this._blockOffset++]=t[n++];for(var s=0,o=t.length*8;o>0;++s)this._length[s]+=o,o=this._length[s]/4294967296|0,o>0&&(this._length[s]-=4294967296*o);return this};Qs.prototype._update=function(){throw new Error("_update is not implemented")};Qs.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e};Qs.prototype._digest=function(){throw new Error("_digest is not implemented")};var Ey=Qs,I5=qt,wy=Ey,P5=sn.Buffer,N5=new Array(16);function pl(){wy.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}I5(pl,wy);pl.prototype._update=function(){for(var t=N5,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);var r=this._a,n=this._b,i=this._c,s=this._d;r=pr(r,n,i,s,t[0],3614090360,7),s=pr(s,r,n,i,t[1],3905402710,12),i=pr(i,s,r,n,t[2],606105819,17),n=pr(n,i,s,r,t[3],3250441966,22),r=pr(r,n,i,s,t[4],4118548399,7),s=pr(s,r,n,i,t[5],1200080426,12),i=pr(i,s,r,n,t[6],2821735955,17),n=pr(n,i,s,r,t[7],4249261313,22),r=pr(r,n,i,s,t[8],1770035416,7),s=pr(s,r,n,i,t[9],2336552879,12),i=pr(i,s,r,n,t[10],4294925233,17),n=pr(n,i,s,r,t[11],2304563134,22),r=pr(r,n,i,s,t[12],1804603682,7),s=pr(s,r,n,i,t[13],4254626195,12),i=pr(i,s,r,n,t[14],2792965006,17),n=pr(n,i,s,r,t[15],1236535329,22),r=gr(r,n,i,s,t[1],4129170786,5),s=gr(s,r,n,i,t[6],3225465664,9),i=gr(i,s,r,n,t[11],643717713,14),n=gr(n,i,s,r,t[0],3921069994,20),r=gr(r,n,i,s,t[5],3593408605,5),s=gr(s,r,n,i,t[10],38016083,9),i=gr(i,s,r,n,t[15],3634488961,14),n=gr(n,i,s,r,t[4],3889429448,20),r=gr(r,n,i,s,t[9],568446438,5),s=gr(s,r,n,i,t[14],3275163606,9),i=gr(i,s,r,n,t[3],4107603335,14),n=gr(n,i,s,r,t[8],1163531501,20),r=gr(r,n,i,s,t[13],2850285829,5),s=gr(s,r,n,i,t[2],4243563512,9),i=gr(i,s,r,n,t[7],1735328473,14),n=gr(n,i,s,r,t[12],2368359562,20),r=br(r,n,i,s,t[5],4294588738,4),s=br(s,r,n,i,t[8],2272392833,11),i=br(i,s,r,n,t[11],1839030562,16),n=br(n,i,s,r,t[14],4259657740,23),r=br(r,n,i,s,t[1],2763975236,4),s=br(s,r,n,i,t[4],1272893353,11),i=br(i,s,r,n,t[7],4139469664,16),n=br(n,i,s,r,t[10],3200236656,23),r=br(r,n,i,s,t[13],681279174,4),s=br(s,r,n,i,t[0],3936430074,11),i=br(i,s,r,n,t[3],3572445317,16),n=br(n,i,s,r,t[6],76029189,23),r=br(r,n,i,s,t[9],3654602809,4),s=br(s,r,n,i,t[12],3873151461,11),i=br(i,s,r,n,t[15],530742520,16),n=br(n,i,s,r,t[2],3299628645,23),r=vr(r,n,i,s,t[0],4096336452,6),s=vr(s,r,n,i,t[7],1126891415,10),i=vr(i,s,r,n,t[14],2878612391,15),n=vr(n,i,s,r,t[5],4237533241,21),r=vr(r,n,i,s,t[12],1700485571,6),s=vr(s,r,n,i,t[3],2399980690,10),i=vr(i,s,r,n,t[10],4293915773,15),n=vr(n,i,s,r,t[1],2240044497,21),r=vr(r,n,i,s,t[8],1873313359,6),s=vr(s,r,n,i,t[15],4264355552,10),i=vr(i,s,r,n,t[6],2734768916,15),n=vr(n,i,s,r,t[13],1309151649,21),r=vr(r,n,i,s,t[4],4149444226,6),s=vr(s,r,n,i,t[11],3174756917,10),i=vr(i,s,r,n,t[2],718787259,15),n=vr(n,i,s,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+s|0};pl.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=P5.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};function gl(t,e){return t<<e|t>>>32-e}function pr(t,e,r,n,i,s,o){return gl(t+(e&r|~e&n)+i+s|0,o)+e|0}function gr(t,e,r,n,i,s,o){return gl(t+(e&n|r&~n)+i+s|0,o)+e|0}function br(t,e,r,n,i,s,o){return gl(t+(e^r^n)+i+s|0,o)+e|0}function vr(t,e,r,n,i,s,o){return gl(t+(r^(e|~n))+i+s|0,o)+e|0}var L5=pl,Vh=Ks.Buffer,M5=qt,_y=Ey,C5=new Array(16),Qa=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Za=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],ec=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],tc=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],rc=[0,1518500249,1859775393,2400959708,2840853838],nc=[1352829926,1548603684,1836072691,2053994217,0];function bl(){_y.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}M5(bl,_y);bl.prototype._update=function(){for(var t=C5,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);for(var r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=this._a|0,c=this._b|0,l=this._c|0,f=this._d|0,h=this._e|0,S=0;S<80;S+=1){var P,M;S<16?(P=og(r,n,i,s,o,t[Qa[S]],rc[0],ec[S]),M=ug(a,c,l,f,h,t[Za[S]],nc[0],tc[S])):S<32?(P=ag(r,n,i,s,o,t[Qa[S]],rc[1],ec[S]),M=fg(a,c,l,f,h,t[Za[S]],nc[1],tc[S])):S<48?(P=cg(r,n,i,s,o,t[Qa[S]],rc[2],ec[S]),M=cg(a,c,l,f,h,t[Za[S]],nc[2],tc[S])):S<64?(P=fg(r,n,i,s,o,t[Qa[S]],rc[3],ec[S]),M=ag(a,c,l,f,h,t[Za[S]],nc[3],tc[S])):(P=ug(r,n,i,s,o,t[Qa[S]],rc[4],ec[S]),M=og(a,c,l,f,h,t[Za[S]],nc[4],tc[S])),r=o,o=s,s=So(i,10),i=n,n=P,a=h,h=f,f=So(l,10),l=c,c=M}var H=this._b+i+f|0;this._b=this._c+s+h|0,this._c=this._d+o+a|0,this._d=this._e+r+c|0,this._e=this._a+n+l|0,this._a=H};bl.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Vh.alloc?Vh.alloc(20):new Vh(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};function So(t,e){return t<<e|t>>>32-e}function og(t,e,r,n,i,s,o,a){return So(t+(e^r^n)+s+o|0,a)+i|0}function ag(t,e,r,n,i,s,o,a){return So(t+(e&r|~e&n)+s+o|0,a)+i|0}function cg(t,e,r,n,i,s,o,a){return So(t+((e|~r)^n)+s+o|0,a)+i|0}function fg(t,e,r,n,i,s,o,a){return So(t+(e&n|r&~n)+s+o|0,a)+i|0}function ug(t,e,r,n,i,s,o,a){return So(t+(e^(r|~n))+s+o|0,a)+i|0}var B5=bl,Ay={exports:{}},xy=sn.Buffer;function vl(t,e){this._block=xy.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}vl.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=xy.from(t,e));for(var r=this._block,n=this._blockSize,i=t.length,s=this._len,o=0;o<i;){for(var a=s%n,c=Math.min(i-o,n-a),l=0;l<c;l++)r[a+l]=t[o+l];s+=c,o+=c,s%n===0&&this._update(r)}return this._len+=i,this};vl.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s};vl.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var ka=vl,k5=qt,Sy=ka,D5=sn.Buffer,U5=[1518500249,1859775393,-1894007588,-899497514],F5=new Array(80);function $c(){this.init(),this._w=F5,Sy.call(this,64,56)}k5($c,Sy);$c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function K5(t){return t<<5|t>>>27}function H5(t){return t<<30|t>>>2}function j5(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}$c.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=e[a-3]^e[a-8]^e[a-14]^e[a-16];for(var c=0;c<80;++c){var l=~~(c/20),f=K5(r)+j5(l,n,i,s)+o+e[c]+U5[l]|0;o=s,s=i,i=H5(n),n=r,r=f}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};$c.prototype._hash=function(){var t=D5.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var G5=$c,q5=qt,Ry=ka,V5=sn.Buffer,$5=[1518500249,1859775393,-1894007588,-899497514],z5=new Array(80);function zc(){this.init(),this._w=z5,Ry.call(this,64,56)}q5(zc,Ry);zc.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function W5(t){return t<<1|t>>>31}function X5(t){return t<<5|t>>>27}function J5(t){return t<<30|t>>>2}function Y5(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}zc.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=W5(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var c=0;c<80;++c){var l=~~(c/20),f=X5(r)+Y5(l,n,i,s)+o+e[c]+$5[l]|0;o=s,s=i,i=J5(n),n=r,r=f}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};zc.prototype._hash=function(){var t=V5.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var Q5=zc,Z5=qt,Ty=ka,eA=sn.Buffer,tA=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],rA=new Array(64);function Wc(){this.init(),this._w=rA,Ty.call(this,64,56)}Z5(Wc,Ty);Wc.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function nA(t,e,r){return r^t&(e^r)}function iA(t,e,r){return t&e|r&(t|e)}function sA(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function oA(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function aA(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function cA(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}Wc.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=this._f|0,c=this._g|0,l=this._h|0,f=0;f<16;++f)e[f]=t.readInt32BE(f*4);for(;f<64;++f)e[f]=cA(e[f-2])+e[f-7]+aA(e[f-15])+e[f-16]|0;for(var h=0;h<64;++h){var S=l+oA(o)+nA(o,a,c)+tA[h]+e[h]|0,P=sA(r)+iA(r,n,i)|0;l=c,c=a,a=o,o=s+S|0,s=i,i=n,n=r,r=S+P|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0,this._f=a+this._f|0,this._g=c+this._g|0,this._h=l+this._h|0};Wc.prototype._hash=function(){var t=eA.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var Oy=Wc,fA=qt,uA=Oy,lA=ka,hA=sn.Buffer,dA=new Array(64);function ml(){this.init(),this._w=dA,lA.call(this,64,56)}fA(ml,uA);ml.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};ml.prototype._hash=function(){var t=hA.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var pA=ml,gA=qt,Iy=ka,bA=sn.Buffer,lg=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],vA=new Array(160);function Xc(){this.init(),this._w=vA,Iy.call(this,128,112)}gA(Xc,Iy);Xc.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function hg(t,e,r){return r^t&(e^r)}function dg(t,e,r){return t&e|r&(t|e)}function pg(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function gg(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function mA(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function yA(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function EA(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function wA(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function tr(t,e){return t>>>0<e>>>0?1:0}Xc.prototype._update=function(t){for(var e=this._w,r=this._ah|0,n=this._bh|0,i=this._ch|0,s=this._dh|0,o=this._eh|0,a=this._fh|0,c=this._gh|0,l=this._hh|0,f=this._al|0,h=this._bl|0,S=this._cl|0,P=this._dl|0,M=this._el|0,H=this._fl|0,$=this._gl|0,q=this._hl|0,C=0;C<32;C+=2)e[C]=t.readInt32BE(C*4),e[C+1]=t.readInt32BE(C*4+4);for(;C<160;C+=2){var V=e[C-30],K=e[C-15*2+1],U=mA(V,K),G=yA(K,V);V=e[C-2*2],K=e[C-2*2+1];var y=EA(V,K),_=wA(K,V),I=e[C-7*2],x=e[C-7*2+1],E=e[C-16*2],u=e[C-16*2+1],d=G+x|0,g=U+I+tr(d,G)|0;d=d+_|0,g=g+y+tr(d,_)|0,d=d+u|0,g=g+E+tr(d,u)|0,e[C]=g,e[C+1]=d}for(var b=0;b<160;b+=2){g=e[b],d=e[b+1];var p=dg(r,n,i),R=dg(f,h,S),O=pg(r,f),w=pg(f,r),v=gg(o,M),N=gg(M,o),ee=lg[b],Y=lg[b+1],ie=hg(o,a,c),oe=hg(M,H,$),ae=q+N|0,W=l+v+tr(ae,q)|0;ae=ae+oe|0,W=W+ie+tr(ae,oe)|0,ae=ae+Y|0,W=W+ee+tr(ae,Y)|0,ae=ae+d|0,W=W+g+tr(ae,d)|0;var F=w+R|0,k=O+p+tr(F,w)|0;l=c,q=$,c=a,$=H,a=o,H=M,M=P+ae|0,o=s+W+tr(M,P)|0,s=i,P=S,i=n,S=h,n=r,h=f,f=ae+F|0,r=W+k+tr(f,ae)|0}this._al=this._al+f|0,this._bl=this._bl+h|0,this._cl=this._cl+S|0,this._dl=this._dl+P|0,this._el=this._el+M|0,this._fl=this._fl+H|0,this._gl=this._gl+$|0,this._hl=this._hl+q|0,this._ah=this._ah+r+tr(this._al,f)|0,this._bh=this._bh+n+tr(this._bl,h)|0,this._ch=this._ch+i+tr(this._cl,S)|0,this._dh=this._dh+s+tr(this._dl,P)|0,this._eh=this._eh+o+tr(this._el,M)|0,this._fh=this._fh+a+tr(this._fl,H)|0,this._gh=this._gh+c+tr(this._gl,$)|0,this._hh=this._hh+l+tr(this._hl,q)|0};Xc.prototype._hash=function(){var t=bA.allocUnsafe(64);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var Py=Xc,_A=qt,AA=Py,xA=ka,SA=sn.Buffer,RA=new Array(160);function yl(){this.init(),this._w=RA,xA.call(this,128,112)}_A(yl,AA);yl.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};yl.prototype._hash=function(){var t=SA.allocUnsafe(48);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var TA=yl,Mo=Ay.exports=function(e){e=e.toLowerCase();var r=Mo[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};Mo.sha=G5;Mo.sha1=Q5;Mo.sha224=pA;Mo.sha256=Oy;Mo.sha384=TA;Mo.sha512=Py;var OA=Ay.exports,Ny=sn.Buffer,Ly=my.Transform,IA=cl.StringDecoder,PA=qt;function Cn(t){Ly.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}PA(Cn,Ly);Cn.prototype.update=function(t,e,r){typeof t=="string"&&(t=Ny.from(t,e));var n=this._update(t);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)};Cn.prototype.setAutoPadding=function(){};Cn.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};Cn.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};Cn.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};Cn.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){n=i}finally{r(n)}};Cn.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)};Cn.prototype._finalOrDigest=function(t){var e=this.__final()||Ny.alloc(0);return t&&(e=this._toString(e,t,!0)),e};Cn.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new IA(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n};var NA=Cn,LA=qt,MA=L5,CA=B5,BA=OA,My=NA;function El(t){My.call(this,"digest"),this._hash=t}LA(El,My);El.prototype._update=function(t){this._hash.update(t)};El.prototype._final=function(){return this._hash.digest()};var kA=function(e){return e=e.toLowerCase(),e==="md5"?new MA:e==="rmd160"||e==="ripemd160"?new CA:new El(BA(e))},Sf=sn.Buffer;function DA(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function f(P){if((Array.isArray(P)||P instanceof Uint8Array)&&(P=Sf.from(P)),!Sf.isBuffer(P))throw new TypeError("Expected Buffer");if(P.length===0)return"";for(var M=0,H=0,$=0,q=P.length;$!==q&&P[$]===0;)$++,M++;for(var C=(q-$)*l+1>>>0,V=new Uint8Array(C);$!==q;){for(var K=P[$],U=0,G=C-1;(K!==0||U<H)&&G!==-1;G--,U++)K+=256*V[G]>>>0,V[G]=K%o>>>0,K=K/o>>>0;if(K!==0)throw new Error("Non-zero carry");H=U,$++}for(var y=C-H;y!==C&&V[y]===0;)y++;for(var _=a.repeat(M);y<C;++y)_+=t.charAt(V[y]);return _}function h(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return Sf.alloc(0);for(var M=0,H=0,$=0;P[M]===a;)H++,M++;for(var q=(P.length-M)*c+1>>>0,C=new Uint8Array(q);P[M];){var V=e[P.charCodeAt(M)];if(V===255)return;for(var K=0,U=q-1;(V!==0||K<$)&&U!==-1;U--,K++)V+=o*C[U]>>>0,C[U]=V%256>>>0,V=V/256>>>0;if(V!==0)throw new Error("Non-zero carry");$=K,M++}for(var G=q-$;G!==q&&C[G]===0;)G++;var y=Sf.allocUnsafe(H+(q-G));y.fill(0,0,H);for(var _=H;G!==q;)y[_++]=C[G++];return y}function S(P){var M=h(P);if(M)return M;throw new Error("Non-base"+o+" character")}return{encode:f,decodeUnsafe:h,decode:S}}var UA=DA,FA=UA,KA="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",HA=FA(KA),$h=HA,jA=sn.Buffer,GA=function(t){function e(s){var o=t(s);return $h.encode(jA.concat([s,o],s.length+4))}function r(s){var o=s.slice(0,-4),a=s.slice(-4),c=t(o);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return o}function n(s){var o=$h.decodeUnsafe(s);if(o)return r(o)}function i(s){var o=$h.decode(s),a=r(o);if(!a)throw new Error("Invalid checksum");return a}return{encode:e,decode:i,decodeUnsafe:n}},bg=kA,qA=GA;function VA(t){var e=bg("sha256").update(t).digest();return bg("sha256").update(e).digest()}var ss=qA(VA);const Jc=wi(ss);var ba={},Cy={},Ic={},Co={},wl={},_l={};Object.defineProperty(_l,"__esModule",{value:!0});_l.BrowserRandomSource=void 0;const vg=65536;class $A{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=vg)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,vg)));return r}}_l.BrowserRandomSource=$A;function zA(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Al={},jr={};Object.defineProperty(jr,"__esModule",{value:!0});function WA(t){for(var e=0;e<t.length;e++)t[e]=0;return t}jr.wipe=WA;const XA={},JA=Object.freeze(Object.defineProperty({__proto__:null,default:XA},Symbol.toStringTag,{value:"Module"})),Mp=lm(JA);Object.defineProperty(Al,"__esModule",{value:!0});Al.NodeRandomSource=void 0;const YA=jr;class QA{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof zA<"u"){const e=Mp;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,YA.wipe)(r),n}}Al.NodeRandomSource=QA;Object.defineProperty(wl,"__esModule",{value:!0});wl.SystemRandomSource=void 0;const ZA=_l,ex=Al;class tx{constructor(){if(this.isAvailable=!1,this.name="",this._source=new ZA.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new ex.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}wl.SystemRandomSource=tx;var De={},By={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var l=a>>>16&65535,f=a&65535,h=c>>>16&65535,S=c&65535;return f*S+(l*S+f*h<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(By);Object.defineProperty(De,"__esModule",{value:!0});var ky=By;function rx(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}De.readInt16BE=rx;function nx(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}De.readUint16BE=nx;function ix(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}De.readInt16LE=ix;function sx(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}De.readUint16LE=sx;function Dy(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}De.writeUint16BE=Dy;De.writeInt16BE=Dy;function Uy(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}De.writeUint16LE=Uy;De.writeInt16LE=Uy;function N0(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}De.readInt32BE=N0;function L0(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}De.readUint32BE=L0;function M0(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}De.readInt32LE=M0;function C0(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}De.readUint32LE=C0;function Eu(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}De.writeUint32BE=Eu;De.writeInt32BE=Eu;function wu(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}De.writeUint32LE=wu;De.writeInt32LE=wu;function ox(t,e){e===void 0&&(e=0);var r=N0(t,e),n=N0(t,e+4);return r*4294967296+n-(n>>31)*4294967296}De.readInt64BE=ox;function ax(t,e){e===void 0&&(e=0);var r=L0(t,e),n=L0(t,e+4);return r*4294967296+n}De.readUint64BE=ax;function cx(t,e){e===void 0&&(e=0);var r=M0(t,e),n=M0(t,e+4);return n*4294967296+r-(r>>31)*4294967296}De.readInt64LE=cx;function fx(t,e){e===void 0&&(e=0);var r=C0(t,e),n=C0(t,e+4);return n*4294967296+r}De.readUint64LE=fx;function Fy(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Eu(t/4294967296>>>0,e,r),Eu(t>>>0,e,r+4),e}De.writeUint64BE=Fy;De.writeInt64BE=Fy;function Ky(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),wu(t>>>0,e,r),wu(t/4294967296>>>0,e,r+4),e}De.writeUint64LE=Ky;De.writeInt64LE=Ky;function ux(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}De.readUintBE=ux;function lx(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}De.readUintLE=lx;function hx(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!ky.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}De.writeUintBE=hx;function dx(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!ky.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}De.writeUintLE=dx;function px(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}De.readFloat32BE=px;function gx(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}De.readFloat32LE=gx;function bx(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}De.readFloat64BE=bx;function vx(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}De.readFloat64LE=vx;function mx(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}De.writeFloat32BE=mx;function yx(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}De.writeFloat32LE=yx;function Ex(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}De.writeFloat64BE=Ex;function wx(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}De.writeFloat64LE=wx;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=wl,r=De,n=jr;t.defaultRandomSource=new e.SystemRandomSource;function i(l,f=t.defaultRandomSource){return f.randomBytes(l)}t.randomBytes=i;function s(l=t.defaultRandomSource){const f=i(4,l),h=(0,r.readUint32LE)(f);return(0,n.wipe)(f),h}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(l,f=o,h=t.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let S="";const P=f.length,M=256-256%P;for(;l>0;){const H=i(Math.ceil(l*256/M),h);for(let $=0;$<H.length&&l>0;$++){const q=H[$];q<M&&(S+=f.charAt(q%P),l--)}(0,n.wipe)(H)}return S}t.randomString=a;function c(l,f=o,h=t.defaultRandomSource){const S=Math.ceil(l/(Math.log(f.length)/Math.LN2));return a(S,f,h)}t.randomStringForEntropy=c})(Co);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=Co,r=jr;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(K){const U=new Float64Array(16);if(K)for(let G=0;G<K.length;G++)U[G]=K[G];return U}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(K){let U=1;for(let G=0;G<16;G++){let y=K[G]+U+65535;U=Math.floor(y/65536),K[G]=y-U*65536}K[0]+=U-1+37*(U-1)}function a(K,U,G){const y=~(G-1);for(let _=0;_<16;_++){const I=y&(K[_]^U[_]);K[_]^=I,U[_]^=I}}function c(K,U){const G=n(),y=n();for(let _=0;_<16;_++)y[_]=U[_];o(y),o(y),o(y);for(let _=0;_<2;_++){G[0]=y[0]-65517;for(let x=1;x<15;x++)G[x]=y[x]-65535-(G[x-1]>>16&1),G[x-1]&=65535;G[15]=y[15]-32767-(G[14]>>16&1);const I=G[15]>>16&1;G[14]&=65535,a(y,G,1-I)}for(let _=0;_<16;_++)K[2*_]=y[_]&255,K[2*_+1]=y[_]>>8}function l(K,U){for(let G=0;G<16;G++)K[G]=U[2*G]+(U[2*G+1]<<8);K[15]&=32767}function f(K,U,G){for(let y=0;y<16;y++)K[y]=U[y]+G[y]}function h(K,U,G){for(let y=0;y<16;y++)K[y]=U[y]-G[y]}function S(K,U,G){let y,_,I=0,x=0,E=0,u=0,d=0,g=0,b=0,p=0,R=0,O=0,w=0,v=0,N=0,ee=0,Y=0,ie=0,oe=0,ae=0,W=0,F=0,k=0,m=0,B=0,X=0,Z=0,fe=0,se=0,de=0,Ee=0,le=0,we=0,Re=G[0],ye=G[1],be=G[2],Pe=G[3],me=G[4],pe=G[5],Le=G[6],L=G[7],A=G[8],T=G[9],D=G[10],z=G[11],Q=G[12],re=G[13],he=G[14],xe=G[15];y=U[0],I+=y*Re,x+=y*ye,E+=y*be,u+=y*Pe,d+=y*me,g+=y*pe,b+=y*Le,p+=y*L,R+=y*A,O+=y*T,w+=y*D,v+=y*z,N+=y*Q,ee+=y*re,Y+=y*he,ie+=y*xe,y=U[1],x+=y*Re,E+=y*ye,u+=y*be,d+=y*Pe,g+=y*me,b+=y*pe,p+=y*Le,R+=y*L,O+=y*A,w+=y*T,v+=y*D,N+=y*z,ee+=y*Q,Y+=y*re,ie+=y*he,oe+=y*xe,y=U[2],E+=y*Re,u+=y*ye,d+=y*be,g+=y*Pe,b+=y*me,p+=y*pe,R+=y*Le,O+=y*L,w+=y*A,v+=y*T,N+=y*D,ee+=y*z,Y+=y*Q,ie+=y*re,oe+=y*he,ae+=y*xe,y=U[3],u+=y*Re,d+=y*ye,g+=y*be,b+=y*Pe,p+=y*me,R+=y*pe,O+=y*Le,w+=y*L,v+=y*A,N+=y*T,ee+=y*D,Y+=y*z,ie+=y*Q,oe+=y*re,ae+=y*he,W+=y*xe,y=U[4],d+=y*Re,g+=y*ye,b+=y*be,p+=y*Pe,R+=y*me,O+=y*pe,w+=y*Le,v+=y*L,N+=y*A,ee+=y*T,Y+=y*D,ie+=y*z,oe+=y*Q,ae+=y*re,W+=y*he,F+=y*xe,y=U[5],g+=y*Re,b+=y*ye,p+=y*be,R+=y*Pe,O+=y*me,w+=y*pe,v+=y*Le,N+=y*L,ee+=y*A,Y+=y*T,ie+=y*D,oe+=y*z,ae+=y*Q,W+=y*re,F+=y*he,k+=y*xe,y=U[6],b+=y*Re,p+=y*ye,R+=y*be,O+=y*Pe,w+=y*me,v+=y*pe,N+=y*Le,ee+=y*L,Y+=y*A,ie+=y*T,oe+=y*D,ae+=y*z,W+=y*Q,F+=y*re,k+=y*he,m+=y*xe,y=U[7],p+=y*Re,R+=y*ye,O+=y*be,w+=y*Pe,v+=y*me,N+=y*pe,ee+=y*Le,Y+=y*L,ie+=y*A,oe+=y*T,ae+=y*D,W+=y*z,F+=y*Q,k+=y*re,m+=y*he,B+=y*xe,y=U[8],R+=y*Re,O+=y*ye,w+=y*be,v+=y*Pe,N+=y*me,ee+=y*pe,Y+=y*Le,ie+=y*L,oe+=y*A,ae+=y*T,W+=y*D,F+=y*z,k+=y*Q,m+=y*re,B+=y*he,X+=y*xe,y=U[9],O+=y*Re,w+=y*ye,v+=y*be,N+=y*Pe,ee+=y*me,Y+=y*pe,ie+=y*Le,oe+=y*L,ae+=y*A,W+=y*T,F+=y*D,k+=y*z,m+=y*Q,B+=y*re,X+=y*he,Z+=y*xe,y=U[10],w+=y*Re,v+=y*ye,N+=y*be,ee+=y*Pe,Y+=y*me,ie+=y*pe,oe+=y*Le,ae+=y*L,W+=y*A,F+=y*T,k+=y*D,m+=y*z,B+=y*Q,X+=y*re,Z+=y*he,fe+=y*xe,y=U[11],v+=y*Re,N+=y*ye,ee+=y*be,Y+=y*Pe,ie+=y*me,oe+=y*pe,ae+=y*Le,W+=y*L,F+=y*A,k+=y*T,m+=y*D,B+=y*z,X+=y*Q,Z+=y*re,fe+=y*he,se+=y*xe,y=U[12],N+=y*Re,ee+=y*ye,Y+=y*be,ie+=y*Pe,oe+=y*me,ae+=y*pe,W+=y*Le,F+=y*L,k+=y*A,m+=y*T,B+=y*D,X+=y*z,Z+=y*Q,fe+=y*re,se+=y*he,de+=y*xe,y=U[13],ee+=y*Re,Y+=y*ye,ie+=y*be,oe+=y*Pe,ae+=y*me,W+=y*pe,F+=y*Le,k+=y*L,m+=y*A,B+=y*T,X+=y*D,Z+=y*z,fe+=y*Q,se+=y*re,de+=y*he,Ee+=y*xe,y=U[14],Y+=y*Re,ie+=y*ye,oe+=y*be,ae+=y*Pe,W+=y*me,F+=y*pe,k+=y*Le,m+=y*L,B+=y*A,X+=y*T,Z+=y*D,fe+=y*z,se+=y*Q,de+=y*re,Ee+=y*he,le+=y*xe,y=U[15],ie+=y*Re,oe+=y*ye,ae+=y*be,W+=y*Pe,F+=y*me,k+=y*pe,m+=y*Le,B+=y*L,X+=y*A,Z+=y*T,fe+=y*D,se+=y*z,de+=y*Q,Ee+=y*re,le+=y*he,we+=y*xe,I+=38*oe,x+=38*ae,E+=38*W,u+=38*F,d+=38*k,g+=38*m,b+=38*B,p+=38*X,R+=38*Z,O+=38*fe,w+=38*se,v+=38*de,N+=38*Ee,ee+=38*le,Y+=38*we,_=1,y=I+_+65535,_=Math.floor(y/65536),I=y-_*65536,y=x+_+65535,_=Math.floor(y/65536),x=y-_*65536,y=E+_+65535,_=Math.floor(y/65536),E=y-_*65536,y=u+_+65535,_=Math.floor(y/65536),u=y-_*65536,y=d+_+65535,_=Math.floor(y/65536),d=y-_*65536,y=g+_+65535,_=Math.floor(y/65536),g=y-_*65536,y=b+_+65535,_=Math.floor(y/65536),b=y-_*65536,y=p+_+65535,_=Math.floor(y/65536),p=y-_*65536,y=R+_+65535,_=Math.floor(y/65536),R=y-_*65536,y=O+_+65535,_=Math.floor(y/65536),O=y-_*65536,y=w+_+65535,_=Math.floor(y/65536),w=y-_*65536,y=v+_+65535,_=Math.floor(y/65536),v=y-_*65536,y=N+_+65535,_=Math.floor(y/65536),N=y-_*65536,y=ee+_+65535,_=Math.floor(y/65536),ee=y-_*65536,y=Y+_+65535,_=Math.floor(y/65536),Y=y-_*65536,y=ie+_+65535,_=Math.floor(y/65536),ie=y-_*65536,I+=_-1+37*(_-1),_=1,y=I+_+65535,_=Math.floor(y/65536),I=y-_*65536,y=x+_+65535,_=Math.floor(y/65536),x=y-_*65536,y=E+_+65535,_=Math.floor(y/65536),E=y-_*65536,y=u+_+65535,_=Math.floor(y/65536),u=y-_*65536,y=d+_+65535,_=Math.floor(y/65536),d=y-_*65536,y=g+_+65535,_=Math.floor(y/65536),g=y-_*65536,y=b+_+65535,_=Math.floor(y/65536),b=y-_*65536,y=p+_+65535,_=Math.floor(y/65536),p=y-_*65536,y=R+_+65535,_=Math.floor(y/65536),R=y-_*65536,y=O+_+65535,_=Math.floor(y/65536),O=y-_*65536,y=w+_+65535,_=Math.floor(y/65536),w=y-_*65536,y=v+_+65535,_=Math.floor(y/65536),v=y-_*65536,y=N+_+65535,_=Math.floor(y/65536),N=y-_*65536,y=ee+_+65535,_=Math.floor(y/65536),ee=y-_*65536,y=Y+_+65535,_=Math.floor(y/65536),Y=y-_*65536,y=ie+_+65535,_=Math.floor(y/65536),ie=y-_*65536,I+=_-1+37*(_-1),K[0]=I,K[1]=x,K[2]=E,K[3]=u,K[4]=d,K[5]=g,K[6]=b,K[7]=p,K[8]=R,K[9]=O,K[10]=w,K[11]=v,K[12]=N,K[13]=ee,K[14]=Y,K[15]=ie}function P(K,U){S(K,U,U)}function M(K,U){const G=n();for(let y=0;y<16;y++)G[y]=U[y];for(let y=253;y>=0;y--)P(G,G),y!==2&&y!==4&&S(G,G,U);for(let y=0;y<16;y++)K[y]=G[y]}function H(K,U){const G=new Uint8Array(32),y=new Float64Array(80),_=n(),I=n(),x=n(),E=n(),u=n(),d=n();for(let R=0;R<31;R++)G[R]=K[R];G[31]=K[31]&127|64,G[0]&=248,l(y,U);for(let R=0;R<16;R++)I[R]=y[R];_[0]=E[0]=1;for(let R=254;R>=0;--R){const O=G[R>>>3]>>>(R&7)&1;a(_,I,O),a(x,E,O),f(u,_,x),h(_,_,x),f(x,I,E),h(I,I,E),P(E,u),P(d,_),S(_,x,_),S(x,I,u),f(u,_,x),h(_,_,x),P(I,_),h(x,E,d),S(_,x,s),f(_,_,E),S(x,x,_),S(_,E,d),S(E,I,y),P(I,u),a(_,I,O),a(x,E,O)}for(let R=0;R<16;R++)y[R+16]=_[R],y[R+32]=x[R],y[R+48]=I[R],y[R+64]=E[R];const g=y.subarray(32),b=y.subarray(16);M(g,g),S(b,b,g);const p=new Uint8Array(32);return c(p,b),p}t.scalarMult=H;function $(K){return H(K,i)}t.scalarMultBase=$;function q(K){if(K.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const U=new Uint8Array(K);return{publicKey:$(U),secretKey:U}}t.generateKeyPairFromSeed=q;function C(K){const U=(0,e.randomBytes)(32,K),G=q(U);return(0,r.wipe)(U),G}t.generateKeyPair=C;function V(K,U,G=!1){if(K.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(U.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const y=H(K,U);if(G){let _=0;for(let I=0;I<y.length;I++)_|=y[I];if(_===0)throw new Error("X25519: invalid shared key")}return y}t.sharedKey=V})(Ic);var Da={},xl={};Object.defineProperty(xl,"__esModule",{value:!0});var mr=De,B0=jr,_x=20;function Ax(t,e,r){for(var n=1634760805,i=r[3]<<24|r[2]<<16|r[1]<<8|r[0],s=r[7]<<24|r[6]<<16|r[5]<<8|r[4],o=r[11]<<24|r[10]<<16|r[9]<<8|r[8],a=r[15]<<24|r[14]<<16|r[13]<<8|r[12],c=857760878,l=e[3]<<24|e[2]<<16|e[1]<<8|e[0],f=e[7]<<24|e[6]<<16|e[5]<<8|e[4],h=e[11]<<24|e[10]<<16|e[9]<<8|e[8],S=e[15]<<24|e[14]<<16|e[13]<<8|e[12],P=2036477234,M=r[19]<<24|r[18]<<16|r[17]<<8|r[16],H=r[23]<<24|r[22]<<16|r[21]<<8|r[20],$=r[27]<<24|r[26]<<16|r[25]<<8|r[24],q=r[31]<<24|r[30]<<16|r[29]<<8|r[28],C=1797285236,V=n,K=i,U=s,G=o,y=a,_=c,I=l,x=f,E=h,u=S,d=P,g=M,b=H,p=$,R=q,O=C,w,v=0;v<_x;v+=2)w=V+b|0,y^=w<<7|w>>>32-7,w=y+V|0,E^=w<<9|w>>>32-9,w=E+y|0,b^=w<<13|w>>>32-13,w=b+E|0,V^=w<<18|w>>>32-18,w=_+K|0,u^=w<<7|w>>>32-7,w=u+_|0,p^=w<<9|w>>>32-9,w=p+u|0,K^=w<<13|w>>>32-13,w=K+p|0,_^=w<<18|w>>>32-18,w=d+I|0,R^=w<<7|w>>>32-7,w=R+d|0,U^=w<<9|w>>>32-9,w=U+R|0,I^=w<<13|w>>>32-13,w=I+U|0,d^=w<<18|w>>>32-18,w=O+g|0,G^=w<<7|w>>>32-7,w=G+O|0,x^=w<<9|w>>>32-9,w=x+G|0,g^=w<<13|w>>>32-13,w=g+x|0,O^=w<<18|w>>>32-18,w=V+G|0,K^=w<<7|w>>>32-7,w=K+V|0,U^=w<<9|w>>>32-9,w=U+K|0,G^=w<<13|w>>>32-13,w=G+U|0,V^=w<<18|w>>>32-18,w=_+y|0,I^=w<<7|w>>>32-7,w=I+_|0,x^=w<<9|w>>>32-9,w=x+I|0,y^=w<<13|w>>>32-13,w=y+x|0,_^=w<<18|w>>>32-18,w=d+u|0,g^=w<<7|w>>>32-7,w=g+d|0,E^=w<<9|w>>>32-9,w=E+g|0,u^=w<<13|w>>>32-13,w=u+E|0,d^=w<<18|w>>>32-18,w=O+R|0,b^=w<<7|w>>>32-7,w=b+O|0,p^=w<<9|w>>>32-9,w=p+b|0,R^=w<<13|w>>>32-13,w=R+p|0,O^=w<<18|w>>>32-18;mr.writeUint32LE(V+n|0,t,0),mr.writeUint32LE(K+i|0,t,4),mr.writeUint32LE(U+s|0,t,8),mr.writeUint32LE(G+o|0,t,12),mr.writeUint32LE(y+a|0,t,16),mr.writeUint32LE(_+c|0,t,20),mr.writeUint32LE(I+l|0,t,24),mr.writeUint32LE(x+f|0,t,28),mr.writeUint32LE(E+h|0,t,32),mr.writeUint32LE(u+S|0,t,36),mr.writeUint32LE(d+P|0,t,40),mr.writeUint32LE(g+M|0,t,44),mr.writeUint32LE(b+H|0,t,48),mr.writeUint32LE(p+$|0,t,52),mr.writeUint32LE(R+q|0,t,56),mr.writeUint32LE(O+C|0,t,60)}function Hy(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("Salsa20: key size must be 32 bytes");if(n.length<r.length)throw new Error("Salsa20: destination is shorter than source");var s,o;if(i===0){if(e.length!==8)throw new Error("Salsa20 nonce must be 8 bytes");s=new Uint8Array(16),s.set(e),o=e.length}else{if(e.length!==16)throw new Error("Salsa20 nonce with counter must be 16 bytes");s=e,o=16-i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){Ax(a,s,t);for(var l=c;l<c+64&&l<r.length;l++)n[l]=r[l]^a[l-c];Sx(s,o,s.length-o)}return B0.wipe(a),i===0&&B0.wipe(s),n}xl.streamXOR=Hy;function xx(t,e,r,n){return n===void 0&&(n=0),B0.wipe(r),Hy(t,e,r,r,n)}xl.stream=xx;function Sx(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("Salsa20: counter overflow")}Object.defineProperty(Da,"__esModule",{value:!0});var ds=De,Rx=xl,jy=jr;function Gy(t,e,r,n,i){if(i===void 0&&(i=0),i===0){if(e.length!==24)throw new Error("XSalsa20 nonce must be 24 bytes")}else if(e.length!==32)throw new Error("XSalsa20 nonce with counter must be 32 bytes");var s=qy(t,e.subarray(0,16),new Uint8Array(32)),o=Rx.streamXOR(s,e.subarray(16),r,n,i);return jy.wipe(s),o}Da.streamXOR=Gy;function Tx(t,e,r,n){return n===void 0&&(n=0),jy.wipe(r),Gy(t,e,r,r,n)}Da.stream=Tx;var Ox=20;function qy(t,e,r){for(var n=1634760805,i=t[3]<<24|t[2]<<16|t[1]<<8|t[0],s=t[7]<<24|t[6]<<16|t[5]<<8|t[4],o=t[11]<<24|t[10]<<16|t[9]<<8|t[8],a=t[15]<<24|t[14]<<16|t[13]<<8|t[12],c=857760878,l=e[3]<<24|e[2]<<16|e[1]<<8|e[0],f=e[7]<<24|e[6]<<16|e[5]<<8|e[4],h=e[11]<<24|e[10]<<16|e[9]<<8|e[8],S=e[15]<<24|e[14]<<16|e[13]<<8|e[12],P=2036477234,M=t[19]<<24|t[18]<<16|t[17]<<8|t[16],H=t[23]<<24|t[22]<<16|t[21]<<8|t[20],$=t[27]<<24|t[26]<<16|t[25]<<8|t[24],q=t[31]<<24|t[30]<<16|t[29]<<8|t[28],C=1797285236,V,K=0;K<Ox;K+=2)V=n+H|0,a^=V<<7|V>>>32-7,V=a+n|0,h^=V<<9|V>>>32-9,V=h+a|0,H^=V<<13|V>>>32-13,V=H+h|0,n^=V<<18|V>>>32-18,V=c+i|0,S^=V<<7|V>>>32-7,V=S+c|0,$^=V<<9|V>>>32-9,V=$+S|0,i^=V<<13|V>>>32-13,V=i+$|0,c^=V<<18|V>>>32-18,V=P+l|0,q^=V<<7|V>>>32-7,V=q+P|0,s^=V<<9|V>>>32-9,V=s+q|0,l^=V<<13|V>>>32-13,V=l+s|0,P^=V<<18|V>>>32-18,V=C+M|0,o^=V<<7|V>>>32-7,V=o+C|0,f^=V<<9|V>>>32-9,V=f+o|0,M^=V<<13|V>>>32-13,V=M+f|0,C^=V<<18|V>>>32-18,V=n+o|0,i^=V<<7|V>>>32-7,V=i+n|0,s^=V<<9|V>>>32-9,V=s+i|0,o^=V<<13|V>>>32-13,V=o+s|0,n^=V<<18|V>>>32-18,V=c+a|0,l^=V<<7|V>>>32-7,V=l+c|0,f^=V<<9|V>>>32-9,V=f+l|0,a^=V<<13|V>>>32-13,V=a+f|0,c^=V<<18|V>>>32-18,V=P+S|0,M^=V<<7|V>>>32-7,V=M+P|0,h^=V<<9|V>>>32-9,V=h+M|0,S^=V<<13|V>>>32-13,V=S+h|0,P^=V<<18|V>>>32-18,V=C+q|0,H^=V<<7|V>>>32-7,V=H+C|0,$^=V<<9|V>>>32-9,V=$+H|0,q^=V<<13|V>>>32-13,V=q+$|0,C^=V<<18|V>>>32-18;return ds.writeUint32LE(n,r,0),ds.writeUint32LE(c,r,4),ds.writeUint32LE(P,r,8),ds.writeUint32LE(C,r,12),ds.writeUint32LE(l,r,16),ds.writeUint32LE(f,r,20),ds.writeUint32LE(h,r,24),ds.writeUint32LE(S,r,28),r}Da.hsalsa=qy;var ns={},Vy={},Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});function Ix(t,e,r){return~(t-1)&e|t-1&r}Ua.select=Ix;function Px(t,e){return(t|0)-(e|0)-1>>>31&1}Ua.lessOrEqual=Px;function $y(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Ua.compare=$y;function Nx(t,e){return t.length===0||e.length===0?!1:$y(t,e)!==0}Ua.equal=Nx;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ua,r=jr;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var l=a[2]|a[3]<<8;this._r[1]=(c>>>13|l<<3)&8191;var f=a[4]|a[5]<<8;this._r[2]=(l>>>10|f<<6)&7939;var h=a[6]|a[7]<<8;this._r[3]=(f>>>7|h<<9)&8191;var S=a[8]|a[9]<<8;this._r[4]=(h>>>4|S<<12)&255,this._r[5]=S>>>1&8190;var P=a[10]|a[11]<<8;this._r[6]=(S>>>14|P<<2)&8191;var M=a[12]|a[13]<<8;this._r[7]=(P>>>11|M<<5)&8065;var H=a[14]|a[15]<<8;this._r[8]=(M>>>8|H<<8)&8191,this._r[9]=H>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,l){for(var f=this._fin?0:2048,h=this._h[0],S=this._h[1],P=this._h[2],M=this._h[3],H=this._h[4],$=this._h[5],q=this._h[6],C=this._h[7],V=this._h[8],K=this._h[9],U=this._r[0],G=this._r[1],y=this._r[2],_=this._r[3],I=this._r[4],x=this._r[5],E=this._r[6],u=this._r[7],d=this._r[8],g=this._r[9];l>=16;){var b=a[c+0]|a[c+1]<<8;h+=b&8191;var p=a[c+2]|a[c+3]<<8;S+=(b>>>13|p<<3)&8191;var R=a[c+4]|a[c+5]<<8;P+=(p>>>10|R<<6)&8191;var O=a[c+6]|a[c+7]<<8;M+=(R>>>7|O<<9)&8191;var w=a[c+8]|a[c+9]<<8;H+=(O>>>4|w<<12)&8191,$+=w>>>1&8191;var v=a[c+10]|a[c+11]<<8;q+=(w>>>14|v<<2)&8191;var N=a[c+12]|a[c+13]<<8;C+=(v>>>11|N<<5)&8191;var ee=a[c+14]|a[c+15]<<8;V+=(N>>>8|ee<<8)&8191,K+=ee>>>5|f;var Y=0,ie=Y;ie+=h*U,ie+=S*(5*g),ie+=P*(5*d),ie+=M*(5*u),ie+=H*(5*E),Y=ie>>>13,ie&=8191,ie+=$*(5*x),ie+=q*(5*I),ie+=C*(5*_),ie+=V*(5*y),ie+=K*(5*G),Y+=ie>>>13,ie&=8191;var oe=Y;oe+=h*G,oe+=S*U,oe+=P*(5*g),oe+=M*(5*d),oe+=H*(5*u),Y=oe>>>13,oe&=8191,oe+=$*(5*E),oe+=q*(5*x),oe+=C*(5*I),oe+=V*(5*_),oe+=K*(5*y),Y+=oe>>>13,oe&=8191;var ae=Y;ae+=h*y,ae+=S*G,ae+=P*U,ae+=M*(5*g),ae+=H*(5*d),Y=ae>>>13,ae&=8191,ae+=$*(5*u),ae+=q*(5*E),ae+=C*(5*x),ae+=V*(5*I),ae+=K*(5*_),Y+=ae>>>13,ae&=8191;var W=Y;W+=h*_,W+=S*y,W+=P*G,W+=M*U,W+=H*(5*g),Y=W>>>13,W&=8191,W+=$*(5*d),W+=q*(5*u),W+=C*(5*E),W+=V*(5*x),W+=K*(5*I),Y+=W>>>13,W&=8191;var F=Y;F+=h*I,F+=S*_,F+=P*y,F+=M*G,F+=H*U,Y=F>>>13,F&=8191,F+=$*(5*g),F+=q*(5*d),F+=C*(5*u),F+=V*(5*E),F+=K*(5*x),Y+=F>>>13,F&=8191;var k=Y;k+=h*x,k+=S*I,k+=P*_,k+=M*y,k+=H*G,Y=k>>>13,k&=8191,k+=$*U,k+=q*(5*g),k+=C*(5*d),k+=V*(5*u),k+=K*(5*E),Y+=k>>>13,k&=8191;var m=Y;m+=h*E,m+=S*x,m+=P*I,m+=M*_,m+=H*y,Y=m>>>13,m&=8191,m+=$*G,m+=q*U,m+=C*(5*g),m+=V*(5*d),m+=K*(5*u),Y+=m>>>13,m&=8191;var B=Y;B+=h*u,B+=S*E,B+=P*x,B+=M*I,B+=H*_,Y=B>>>13,B&=8191,B+=$*y,B+=q*G,B+=C*U,B+=V*(5*g),B+=K*(5*d),Y+=B>>>13,B&=8191;var X=Y;X+=h*d,X+=S*u,X+=P*E,X+=M*x,X+=H*I,Y=X>>>13,X&=8191,X+=$*_,X+=q*y,X+=C*G,X+=V*U,X+=K*(5*g),Y+=X>>>13,X&=8191;var Z=Y;Z+=h*g,Z+=S*d,Z+=P*u,Z+=M*E,Z+=H*x,Y=Z>>>13,Z&=8191,Z+=$*I,Z+=q*_,Z+=C*y,Z+=V*G,Z+=K*U,Y+=Z>>>13,Z&=8191,Y=(Y<<2)+Y|0,Y=Y+ie|0,ie=Y&8191,Y=Y>>>13,oe+=Y,h=ie,S=oe,P=ae,M=W,H=F,$=k,q=m,C=B,V=X,K=Z,c+=16,l-=16}this._h[0]=h,this._h[1]=S,this._h[2]=P,this._h[3]=M,this._h[4]=H,this._h[5]=$,this._h[6]=q,this._h[7]=C,this._h[8]=V,this._h[9]=K},o.prototype.finish=function(a,c){c===void 0&&(c=0);var l=new Uint16Array(10),f,h,S,P;if(this._leftover){for(P=this._leftover,this._buffer[P++]=1;P<16;P++)this._buffer[P]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(f=this._h[1]>>>13,this._h[1]&=8191,P=2;P<10;P++)this._h[P]+=f,f=this._h[P]>>>13,this._h[P]&=8191;for(this._h[0]+=f*5,f=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=f,f=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=f,l[0]=this._h[0]+5,f=l[0]>>>13,l[0]&=8191,P=1;P<10;P++)l[P]=this._h[P]+f,f=l[P]>>>13,l[P]&=8191;for(l[9]-=8192,h=(f^1)-1,P=0;P<10;P++)l[P]&=h;for(h=~h,P=0;P<10;P++)this._h[P]=this._h[P]&h|l[P];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,S=this._h[0]+this._pad[0],this._h[0]=S&65535,P=1;P<8;P++)S=(this._h[P]+this._pad[P]|0)+(S>>>16)|0,this._h[P]=S&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,l=a.length,f;if(this._leftover){f=16-this._leftover,f>l&&(f=l);for(var h=0;h<f;h++)this._buffer[this._leftover+h]=a[c+h];if(l-=f,c+=f,this._leftover+=f,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(f=l-l%16,this._blocks(a,c,f),c+=f,l-=f),l){for(var h=0;h<l;h++)this._buffer[this._leftover+h]=a[c+h];this._leftover+=l}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var l=c.digest();return c.clean(),l}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s})(Vy);Object.defineProperty(ns,"__esModule",{value:!0});ns.generateKey=ns.openSecretBox=ns.secretBox=void 0;const _u=Da,k0=Vy,ua=jr,Lx=Co;function Mx(t,e,r){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");const n=new Uint8Array(64),i=new Uint8Array(24+8);i.set(e),(0,_u.stream)(t,i,n,8);const s=new Uint8Array(16+r.length);for(let a=0;a<32&&a<r.length;a++)s[16+a]=r[a]^n[32+a];r.length>32&&(0,_u.streamXOR)(t,i,r.subarray(32),s.subarray(16+32),8);const o=(0,k0.oneTimeAuth)(n.subarray(0,32),s.subarray(16));for(let a=0;a<o.length;a++)s[a]=o[a];return(0,ua.wipe)(o),(0,ua.wipe)(n),(0,ua.wipe)(i),s}ns.secretBox=Mx;function Cx(t,e,r){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");if(r.length<16)throw new Error("secretBox data must be at least 16 bytes");const n=new Uint8Array(64),i=new Uint8Array(24+8);i.set(e),(0,_u.stream)(t,i,n,8);const s=(0,k0.oneTimeAuth)(n.subarray(0,32),r.subarray(16));if(!(0,k0.equal)(s,r.subarray(0,16)))return null;const o=r.subarray(16),a=new Uint8Array(o.length);for(let c=0;c<32&&c<o.length;c++)a[c]=o[c]^n[32+c];return o.length>32&&(0,_u.streamXOR)(t,i,o.subarray(32),a.subarray(32),8),(0,ua.wipe)(s),(0,ua.wipe)(n),(0,ua.wipe)(i),a}ns.openSecretBox=Cx;function Bx(t){return(0,Lx.randomBytes)(32,t)}ns.generateKey=Bx;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.openBox=t.box=t.precomputeSharedKey=t.generateKeyPair=void 0;const e=Ic,r=Da,n=ns,i=jr;var s=Ic;Object.defineProperty(t,"generateKeyPair",{enumerable:!0,get:function(){return s.generateKeyPair}});const o=new Uint8Array(16);function a(f,h){const S=(0,e.scalarMult)(h,f);return(0,r.hsalsa)(S,o,S),S}t.precomputeSharedKey=a;function c(f,h,S,P){const M=a(f,h),H=(0,n.secretBox)(M,S,P);return(0,i.wipe)(M),H}t.box=c;function l(f,h,S,P){const M=a(f,h),H=(0,n.openSecretBox)(M,S,P);return(0,i.wipe)(M),H}t.openBox=l})(Cy);(function(t){var e=pc&&pc.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=pc&&pc.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Cy,t),r(ns,t)})(ba);var Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});var mg="utf8: invalid string",Ti="utf8: invalid source encoding";function kx(t){for(var e=new Uint8Array(zy(t)),r=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=192|i>>6,e[r++]=128|i&63):i<55296?(e[r++]=224|i>>12,e[r++]=128|i>>6&63,e[r++]=128|i&63):(n++,i=(i&1023)<<10,i|=t.charCodeAt(n)&1023,i+=65536,e[r++]=240|i>>18,e[r++]=128|i>>12&63,e[r++]=128|i>>6&63,e[r++]=128|i&63)}return e}var Hs=Sl.encode=kx;function zy(t){for(var e=0,r=0;r<t.length;r++){var n=t.charCodeAt(r);if(n<128)e+=1;else if(n<2048)e+=2;else if(n<55296)e+=3;else if(n<=57343){if(r>=t.length-1)throw new Error(mg);r++,e+=4}else throw new Error(mg)}return e}Sl.encodedLength=zy;function Dx(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];if(n&128){var i=void 0;if(n<224){if(r>=t.length)throw new Error(Ti);var s=t[++r];if((s&192)!==128)throw new Error(Ti);n=(n&31)<<6|s&63,i=128}else if(n<240){if(r>=t.length-1)throw new Error(Ti);var s=t[++r],o=t[++r];if((s&192)!==128||(o&192)!==128)throw new Error(Ti);n=(n&15)<<12|(s&63)<<6|o&63,i=2048}else if(n<248){if(r>=t.length-2)throw new Error(Ti);var s=t[++r],o=t[++r],a=t[++r];if((s&192)!==128||(o&192)!==128||(a&192)!==128)throw new Error(Ti);n=(n&15)<<18|(s&63)<<12|(o&63)<<6|a&63,i=65536}else throw new Error(Ti);if(n<i||n>=55296&&n<=57343)throw new Error(Ti);if(n>=65536){if(n>1114111)throw new Error(Ti);n-=65536,e.push(String.fromCharCode(55296|n>>10)),n=56320|n&1023}}e.push(String.fromCharCode(n))}return e.join("")}Sl.decode=Dx;var vn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=De,r=jr;t.BLOCK_SIZE=128,t.DIGEST_LENGTH=64,t.KEY_LENGTH=64,t.PERSONALIZATION_LENGTH=16,t.SALT_LENGTH=16,t.MAX_LEAF_SIZE=Math.pow(2,32)-1,t.MAX_FANOUT=255,t.MAX_MAX_DEPTH=255;var n=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),i=[[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6],[22,16,24,0,10,4,30,26,20,28,6,12,14,2,18,8],[14,18,6,2,26,24,22,28,4,12,10,20,8,0,30,16],[18,0,10,14,4,8,20,30,28,2,22,24,12,16,6,26],[4,24,12,20,0,22,16,6,8,26,14,10,30,28,2,18],[24,10,2,30,28,26,8,20,0,14,12,6,18,4,16,22],[26,22,14,28,24,2,6,18,10,0,30,8,16,12,4,20],[12,30,28,18,22,6,0,16,24,4,26,14,2,8,20,10],[20,4,16,8,14,12,2,10,30,22,18,28,6,24,26,0],[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6]],s=function(){function a(c,l){if(c===void 0&&(c=64),this.digestLength=c,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(n),this._buffer=new Uint8Array(t.BLOCK_SIZE),this._bufferLength=0,this._ctr=new Uint32Array(4),this._flag=new Uint32Array(4),this._lastNode=!1,this._finished=!1,this._vtmp=new Uint32Array(32),this._mtmp=new Uint32Array(32),c<1||c>t.DIGEST_LENGTH)throw new Error("blake2b: wrong digest length");l&&this.validateConfig(l);var f=0;l&&l.key&&(f=l.key.length);var h=1,S=1;l&&l.tree&&(h=l.tree.fanout,S=l.tree.maxDepth),this._state[0]^=c|f<<8|h<<16|S<<24,l&&l.tree&&(this._state[1]^=l.tree.leafSize,this._state[2]^=l.tree.nodeOffsetLowBits,this._state[3]^=l.tree.nodeOffsetHighBits,this._state[4]^=l.tree.nodeDepth|l.tree.innerDigestLength<<8,this._lastNode=l.tree.lastNode),l&&l.salt&&(this._state[8]^=e.readUint32LE(l.salt,0),this._state[9]^=e.readUint32LE(l.salt,4),this._state[10]^=e.readUint32LE(l.salt,8),this._state[11]^=e.readUint32LE(l.salt,12)),l&&l.personalization&&(this._state[12]^=e.readUint32LE(l.personalization,0),this._state[13]^=e.readUint32LE(l.personalization,4),this._state[14]^=e.readUint32LE(l.personalization,8),this._state[15]^=e.readUint32LE(l.personalization,12)),this._initialState=new Uint32Array(this._state),l&&l.key&&f>0&&(this._paddedKey=new Uint8Array(t.BLOCK_SIZE),this._paddedKey.set(l.key),this._buffer.set(this._paddedKey),this._bufferLength=t.BLOCK_SIZE)}return a.prototype.reset=function(){return this._state.set(this._initialState),this._paddedKey?(this._buffer.set(this._paddedKey),this._bufferLength=t.BLOCK_SIZE):this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._finished=!1,this},a.prototype.validateConfig=function(c){if(c.key&&c.key.length>t.KEY_LENGTH)throw new Error("blake2b: wrong key length");if(c.salt&&c.salt.length!==t.SALT_LENGTH)throw new Error("blake2b: wrong salt length");if(c.personalization&&c.personalization.length!==t.PERSONALIZATION_LENGTH)throw new Error("blake2b: wrong personalization length");if(c.tree){if(c.tree.fanout<0||c.tree.fanout>t.MAX_FANOUT)throw new Error("blake2b: wrong tree fanout");if(c.tree.maxDepth<0||c.tree.maxDepth>t.MAX_MAX_DEPTH)throw new Error("blake2b: wrong tree depth");if(c.tree.leafSize<0||c.tree.leafSize>t.MAX_LEAF_SIZE)throw new Error("blake2b: wrong leaf size");if(c.tree.innerDigestLength<0||c.tree.innerDigestLength>t.DIGEST_LENGTH)throw new Error("blake2b: wrong tree inner digest length")}},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("blake2b: can't update because hash was finished.");var f=t.BLOCK_SIZE-this._bufferLength,h=0;if(l===0)return this;if(l>f){for(var S=0;S<f;S++)this._buffer[this._bufferLength+S]=c[h+S];this._processBlock(t.BLOCK_SIZE),h+=f,l-=f,this._bufferLength=0}for(;l>t.BLOCK_SIZE;){for(var S=0;S<t.BLOCK_SIZE;S++)this._buffer[S]=c[h+S];this._processBlock(t.BLOCK_SIZE),h+=t.BLOCK_SIZE,l-=t.BLOCK_SIZE,this._bufferLength=0}for(var S=0;S<l;S++)this._buffer[this._bufferLength+S]=c[h+S];return this._bufferLength+=l,this},a.prototype.finish=function(c){if(!this._finished){for(var l=this._bufferLength;l<t.BLOCK_SIZE;l++)this._buffer[l]=0;this._flag[0]=4294967295,this._flag[1]=4294967295,this._lastNode&&(this._flag[2]=4294967295,this._flag[3]=4294967295),this._processBlock(this._bufferLength),this._finished=!0}for(var f=this._buffer.subarray(0,64),l=0;l<16;l++)e.writeUint32LE(this._state[l],f,l*4);return c.set(f.subarray(0,c.length)),this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.clean=function(){r.wipe(this._vtmp),r.wipe(this._mtmp),r.wipe(this._state),r.wipe(this._buffer),r.wipe(this._initialState),this._paddedKey&&r.wipe(this._paddedKey),this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._lastNode=!1,this._finished=!1},a.prototype.saveState=function(){if(this._finished)throw new Error("blake2b: cannot save finished state");return{state:new Uint32Array(this._state),buffer:new Uint8Array(this._buffer),bufferLength:this._bufferLength,ctr:new Uint32Array(this._ctr),flag:new Uint32Array(this._flag),lastNode:this._lastNode,paddedKey:this._paddedKey?new Uint8Array(this._paddedKey):void 0,initialState:new Uint32Array(this._initialState)}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._buffer.set(c.buffer),this._bufferLength=c.bufferLength,this._ctr.set(c.ctr),this._flag.set(c.flag),this._lastNode=c.lastNode,this._paddedKey&&r.wipe(this._paddedKey),this._paddedKey=c.paddedKey?new Uint8Array(c.paddedKey):void 0,this._initialState.set(c.initialState),this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),r.wipe(c.buffer),r.wipe(c.initialState),c.paddedKey&&r.wipe(c.paddedKey),c.bufferLength=0,r.wipe(c.ctr),r.wipe(c.flag),c.lastNode=!1},a.prototype._G=function(c,l,f,h,S,P,M,H,$,q,C,V,K){var U=c[l],G=c[P],y=c[f],_=c[M],I=c[h],x=c[H],E=c[S],u=c[$],d=U&65535,g=U>>>16,b=G&65535,p=G>>>16;d+=y&65535,g+=y>>>16,b+=_&65535,p+=_>>>16,g+=d>>>16,b+=g>>>16,p+=b>>>16,G=b&65535|p<<16,U=d&65535|g<<16,d=U&65535,g=U>>>16,b=G&65535,p=G>>>16,d+=q&65535,g+=q>>>16,b+=C&65535,p+=C>>>16,g+=d>>>16,b+=g>>>16,p+=b>>>16,G=b&65535|p<<16,U=d&65535|g<<16,E^=U,u^=G,d=u,u=E,E=d,d=I&65535,g=I>>>16,b=x&65535,p=x>>>16,d+=E&65535,g+=E>>>16,b+=u&65535,p+=u>>>16,g+=d>>>16,b+=g>>>16,p+=b>>>16,x=b&65535|p<<16,I=d&65535|g<<16,y^=I,_^=x,d=y<<8|_>>>24,y=_<<8|y>>>24,_=d,d=U&65535,g=U>>>16,b=G&65535,p=G>>>16,d+=y&65535,g+=y>>>16,b+=_&65535,p+=_>>>16,g+=d>>>16,b+=g>>>16,p+=b>>>16,G=b&65535|p<<16,U=d&65535|g<<16,d=U&65535,g=U>>>16,b=G&65535,p=G>>>16,d+=V&65535,g+=V>>>16,b+=K&65535,p+=K>>>16,g+=d>>>16,b+=g>>>16,p+=b>>>16,G=b&65535|p<<16,U=d&65535|g<<16,E^=U,u^=G,d=E<<16|u>>>16,E=u<<16|E>>>16,u=d,d=I&65535,g=I>>>16,b=x&65535,p=x>>>16,d+=E&65535,g+=E>>>16,b+=u&65535,p+=u>>>16,g+=d>>>16,b+=g>>>16,p+=b>>>16,x=b&65535|p<<16,I=d&65535|g<<16,y^=I,_^=x,d=_<<1|y>>>31,y=y<<1|_>>>31,_=d,c[l]=U,c[P]=G,c[f]=y,c[M]=_,c[h]=I,c[H]=x,c[S]=E,c[$]=u},a.prototype._incrementCounter=function(c){for(var l=0;l<3;l++){var f=this._ctr[l]+c;if(this._ctr[l]=f>>>0,this._ctr[l]===f)return;c=1}},a.prototype._processBlock=function(c){this._incrementCounter(c);var l=this._vtmp;l.set(this._state),l.set(n,16),l[12*2+0]^=this._ctr[0],l[12*2+1]^=this._ctr[1],l[13*2+0]^=this._ctr[2],l[13*2+1]^=this._ctr[3],l[14*2+0]^=this._flag[0],l[14*2+1]^=this._flag[1],l[15*2+0]^=this._flag[2],l[15*2+1]^=this._flag[3];for(var f=this._mtmp,h=0;h<32;h++)f[h]=e.readUint32LE(this._buffer,h*4);for(var S=0;S<12;S++)this._G(l,0,8,16,24,1,9,17,25,f[i[S][0]],f[i[S][0]+1],f[i[S][1]],f[i[S][1]+1]),this._G(l,2,10,18,26,3,11,19,27,f[i[S][2]],f[i[S][2]+1],f[i[S][3]],f[i[S][3]+1]),this._G(l,4,12,20,28,5,13,21,29,f[i[S][4]],f[i[S][4]+1],f[i[S][5]],f[i[S][5]+1]),this._G(l,6,14,22,30,7,15,23,31,f[i[S][6]],f[i[S][6]+1],f[i[S][7]],f[i[S][7]+1]),this._G(l,0,10,20,30,1,11,21,31,f[i[S][8]],f[i[S][8]+1],f[i[S][9]],f[i[S][9]+1]),this._G(l,2,12,22,24,3,13,23,25,f[i[S][10]],f[i[S][10]+1],f[i[S][11]],f[i[S][11]+1]),this._G(l,4,14,16,26,5,15,17,27,f[i[S][12]],f[i[S][12]+1],f[i[S][13]],f[i[S][13]+1]),this._G(l,6,8,18,28,7,9,19,29,f[i[S][14]],f[i[S][14]+1],f[i[S][15]],f[i[S][15]+1]);for(var h=0;h<16;h++)this._state[h]^=l[h]^l[h+16]},a}();t.BLAKE2b=s;function o(a,c,l){c===void 0&&(c=t.DIGEST_LENGTH);var f=new s(c,l);f.update(a);var h=f.digest();return f.clean(),h}t.hash=o})(vn);var Xr={},Wy={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=De,r=jr;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var f=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=c[f++],l--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(f=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,f,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=c[f++],l--;return this},a.prototype.finish=function(c){if(!this._finished){var l=this._bytesHashed,f=this._bufferLength,h=l/536870912|0,S=l<<3,P=l%128<112?128:256;this._buffer[f]=128;for(var M=f+1;M<P-8;M++)this._buffer[M]=0;e.writeUint32BE(h,this._buffer,P-8),e.writeUint32BE(S,this._buffer,P-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,P),this._finished=!0}for(var M=0;M<this.digestLength/8;M++)e.writeUint32BE(this._stateHi[M],c,M*8),e.writeUint32BE(this._stateLo[M],c,M*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,l,f,h,S,P){for(var M=l[0],H=l[1],$=l[2],q=l[3],C=l[4],V=l[5],K=l[6],U=l[7],G=f[0],y=f[1],_=f[2],I=f[3],x=f[4],E=f[5],u=f[6],d=f[7],g,b,p,R,O,w,v,N;P>=128;){for(var ee=0;ee<16;ee++){var Y=8*ee+S;a[ee]=e.readUint32BE(h,Y),c[ee]=e.readUint32BE(h,Y+4)}for(var ee=0;ee<80;ee++){var ie=M,oe=H,ae=$,W=q,F=C,k=V,m=K,B=U,X=G,Z=y,fe=_,se=I,de=x,Ee=E,le=u,we=d;if(g=U,b=d,O=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=(C>>>14|x<<32-14)^(C>>>18|x<<32-18)^(x>>>41-32|C<<32-(41-32)),b=(x>>>14|C<<32-14)^(x>>>18|C<<32-18)^(C>>>41-32|x<<32-(41-32)),O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,g=C&V^~C&K,b=x&E^~x&u,O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,g=i[ee*2],b=i[ee*2+1],O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,g=a[ee%16],b=c[ee%16],O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=O>>>16,v+=w>>>16,N+=v>>>16,p=v&65535|N<<16,R=O&65535|w<<16,g=p,b=R,O=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=(M>>>28|G<<32-28)^(G>>>34-32|M<<32-(34-32))^(G>>>39-32|M<<32-(39-32)),b=(G>>>28|M<<32-28)^(M>>>34-32|G<<32-(34-32))^(M>>>39-32|G<<32-(39-32)),O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,g=M&H^M&$^H&$,b=G&y^G&_^y&_,O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=O>>>16,v+=w>>>16,N+=v>>>16,B=v&65535|N<<16,we=O&65535|w<<16,g=W,b=se,O=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=p,b=R,O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=O>>>16,v+=w>>>16,N+=v>>>16,W=v&65535|N<<16,se=O&65535|w<<16,H=ie,$=oe,q=ae,C=W,V=F,K=k,U=m,M=B,y=X,_=Z,I=fe,x=se,E=de,u=Ee,d=le,G=we,ee%16===15)for(var Y=0;Y<16;Y++)g=a[Y],b=c[Y],O=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=a[(Y+9)%16],b=c[(Y+9)%16],O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,p=a[(Y+1)%16],R=c[(Y+1)%16],g=(p>>>1|R<<32-1)^(p>>>8|R<<32-8)^p>>>7,b=(R>>>1|p<<32-1)^(R>>>8|p<<32-8)^(R>>>7|p<<32-7),O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,p=a[(Y+14)%16],R=c[(Y+14)%16],g=(p>>>19|R<<32-19)^(R>>>61-32|p<<32-(61-32))^p>>>6,b=(R>>>19|p<<32-19)^(p>>>61-32|R<<32-(61-32))^(R>>>6|p<<32-6),O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=O>>>16,v+=w>>>16,N+=v>>>16,a[Y]=v&65535|N<<16,c[Y]=O&65535|w<<16}g=M,b=G,O=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[0],b=f[0],O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=O>>>16,v+=w>>>16,N+=v>>>16,l[0]=M=v&65535|N<<16,f[0]=G=O&65535|w<<16,g=H,b=y,O=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[1],b=f[1],O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=O>>>16,v+=w>>>16,N+=v>>>16,l[1]=H=v&65535|N<<16,f[1]=y=O&65535|w<<16,g=$,b=_,O=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[2],b=f[2],O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=O>>>16,v+=w>>>16,N+=v>>>16,l[2]=$=v&65535|N<<16,f[2]=_=O&65535|w<<16,g=q,b=I,O=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[3],b=f[3],O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=O>>>16,v+=w>>>16,N+=v>>>16,l[3]=q=v&65535|N<<16,f[3]=I=O&65535|w<<16,g=C,b=x,O=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[4],b=f[4],O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=O>>>16,v+=w>>>16,N+=v>>>16,l[4]=C=v&65535|N<<16,f[4]=x=O&65535|w<<16,g=V,b=E,O=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[5],b=f[5],O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=O>>>16,v+=w>>>16,N+=v>>>16,l[5]=V=v&65535|N<<16,f[5]=E=O&65535|w<<16,g=K,b=u,O=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[6],b=f[6],O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=O>>>16,v+=w>>>16,N+=v>>>16,l[6]=K=v&65535|N<<16,f[6]=u=O&65535|w<<16,g=U,b=d,O=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[7],b=f[7],O+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=O>>>16,v+=w>>>16,N+=v>>>16,l[7]=U=v&65535|N<<16,f[7]=d=O&65535|w<<16,S+=128,P-=128}return S}function o(a){var c=new n;c.update(a);var l=c.digest();return c.clean(),l}t.hash=o})(Wy);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=Co,r=Wy,n=jr;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(W){const F=new Float64Array(16);if(W)for(let k=0;k<W.length;k++)F[k]=W[k];return F}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),S=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function P(W,F){for(let k=0;k<16;k++)W[k]=F[k]|0}function M(W){let F=1;for(let k=0;k<16;k++){let m=W[k]+F+65535;F=Math.floor(m/65536),W[k]=m-F*65536}W[0]+=F-1+37*(F-1)}function H(W,F,k){const m=~(k-1);for(let B=0;B<16;B++){const X=m&(W[B]^F[B]);W[B]^=X,F[B]^=X}}function $(W,F){const k=i(),m=i();for(let B=0;B<16;B++)m[B]=F[B];M(m),M(m),M(m);for(let B=0;B<2;B++){k[0]=m[0]-65517;for(let Z=1;Z<15;Z++)k[Z]=m[Z]-65535-(k[Z-1]>>16&1),k[Z-1]&=65535;k[15]=m[15]-32767-(k[14]>>16&1);const X=k[15]>>16&1;k[14]&=65535,H(m,k,1-X)}for(let B=0;B<16;B++)W[2*B]=m[B]&255,W[2*B+1]=m[B]>>8}function q(W,F){let k=0;for(let m=0;m<32;m++)k|=W[m]^F[m];return(1&k-1>>>8)-1}function C(W,F){const k=new Uint8Array(32),m=new Uint8Array(32);return $(k,W),$(m,F),q(k,m)}function V(W){const F=new Uint8Array(32);return $(F,W),F[0]&1}function K(W,F){for(let k=0;k<16;k++)W[k]=F[2*k]+(F[2*k+1]<<8);W[15]&=32767}function U(W,F,k){for(let m=0;m<16;m++)W[m]=F[m]+k[m]}function G(W,F,k){for(let m=0;m<16;m++)W[m]=F[m]-k[m]}function y(W,F,k){let m,B,X=0,Z=0,fe=0,se=0,de=0,Ee=0,le=0,we=0,Re=0,ye=0,be=0,Pe=0,me=0,pe=0,Le=0,L=0,A=0,T=0,D=0,z=0,Q=0,re=0,he=0,xe=0,Ae=0,Te=0,He=0,_t=0,St=0,Ho=0,It=0,je=k[0],$t=k[1],Ge=k[2],qe=k[3],zt=k[4],Ve=k[5],$e=k[6],Wt=k[7],ze=k[8],We=k[9],Xt=k[10],Xe=k[11],Je=k[12],Jt=k[13],Ye=k[14],Qe=k[15];m=F[0],X+=m*je,Z+=m*$t,fe+=m*Ge,se+=m*qe,de+=m*zt,Ee+=m*Ve,le+=m*$e,we+=m*Wt,Re+=m*ze,ye+=m*We,be+=m*Xt,Pe+=m*Xe,me+=m*Je,pe+=m*Jt,Le+=m*Ye,L+=m*Qe,m=F[1],Z+=m*je,fe+=m*$t,se+=m*Ge,de+=m*qe,Ee+=m*zt,le+=m*Ve,we+=m*$e,Re+=m*Wt,ye+=m*ze,be+=m*We,Pe+=m*Xt,me+=m*Xe,pe+=m*Je,Le+=m*Jt,L+=m*Ye,A+=m*Qe,m=F[2],fe+=m*je,se+=m*$t,de+=m*Ge,Ee+=m*qe,le+=m*zt,we+=m*Ve,Re+=m*$e,ye+=m*Wt,be+=m*ze,Pe+=m*We,me+=m*Xt,pe+=m*Xe,Le+=m*Je,L+=m*Jt,A+=m*Ye,T+=m*Qe,m=F[3],se+=m*je,de+=m*$t,Ee+=m*Ge,le+=m*qe,we+=m*zt,Re+=m*Ve,ye+=m*$e,be+=m*Wt,Pe+=m*ze,me+=m*We,pe+=m*Xt,Le+=m*Xe,L+=m*Je,A+=m*Jt,T+=m*Ye,D+=m*Qe,m=F[4],de+=m*je,Ee+=m*$t,le+=m*Ge,we+=m*qe,Re+=m*zt,ye+=m*Ve,be+=m*$e,Pe+=m*Wt,me+=m*ze,pe+=m*We,Le+=m*Xt,L+=m*Xe,A+=m*Je,T+=m*Jt,D+=m*Ye,z+=m*Qe,m=F[5],Ee+=m*je,le+=m*$t,we+=m*Ge,Re+=m*qe,ye+=m*zt,be+=m*Ve,Pe+=m*$e,me+=m*Wt,pe+=m*ze,Le+=m*We,L+=m*Xt,A+=m*Xe,T+=m*Je,D+=m*Jt,z+=m*Ye,Q+=m*Qe,m=F[6],le+=m*je,we+=m*$t,Re+=m*Ge,ye+=m*qe,be+=m*zt,Pe+=m*Ve,me+=m*$e,pe+=m*Wt,Le+=m*ze,L+=m*We,A+=m*Xt,T+=m*Xe,D+=m*Je,z+=m*Jt,Q+=m*Ye,re+=m*Qe,m=F[7],we+=m*je,Re+=m*$t,ye+=m*Ge,be+=m*qe,Pe+=m*zt,me+=m*Ve,pe+=m*$e,Le+=m*Wt,L+=m*ze,A+=m*We,T+=m*Xt,D+=m*Xe,z+=m*Je,Q+=m*Jt,re+=m*Ye,he+=m*Qe,m=F[8],Re+=m*je,ye+=m*$t,be+=m*Ge,Pe+=m*qe,me+=m*zt,pe+=m*Ve,Le+=m*$e,L+=m*Wt,A+=m*ze,T+=m*We,D+=m*Xt,z+=m*Xe,Q+=m*Je,re+=m*Jt,he+=m*Ye,xe+=m*Qe,m=F[9],ye+=m*je,be+=m*$t,Pe+=m*Ge,me+=m*qe,pe+=m*zt,Le+=m*Ve,L+=m*$e,A+=m*Wt,T+=m*ze,D+=m*We,z+=m*Xt,Q+=m*Xe,re+=m*Je,he+=m*Jt,xe+=m*Ye,Ae+=m*Qe,m=F[10],be+=m*je,Pe+=m*$t,me+=m*Ge,pe+=m*qe,Le+=m*zt,L+=m*Ve,A+=m*$e,T+=m*Wt,D+=m*ze,z+=m*We,Q+=m*Xt,re+=m*Xe,he+=m*Je,xe+=m*Jt,Ae+=m*Ye,Te+=m*Qe,m=F[11],Pe+=m*je,me+=m*$t,pe+=m*Ge,Le+=m*qe,L+=m*zt,A+=m*Ve,T+=m*$e,D+=m*Wt,z+=m*ze,Q+=m*We,re+=m*Xt,he+=m*Xe,xe+=m*Je,Ae+=m*Jt,Te+=m*Ye,He+=m*Qe,m=F[12],me+=m*je,pe+=m*$t,Le+=m*Ge,L+=m*qe,A+=m*zt,T+=m*Ve,D+=m*$e,z+=m*Wt,Q+=m*ze,re+=m*We,he+=m*Xt,xe+=m*Xe,Ae+=m*Je,Te+=m*Jt,He+=m*Ye,_t+=m*Qe,m=F[13],pe+=m*je,Le+=m*$t,L+=m*Ge,A+=m*qe,T+=m*zt,D+=m*Ve,z+=m*$e,Q+=m*Wt,re+=m*ze,he+=m*We,xe+=m*Xt,Ae+=m*Xe,Te+=m*Je,He+=m*Jt,_t+=m*Ye,St+=m*Qe,m=F[14],Le+=m*je,L+=m*$t,A+=m*Ge,T+=m*qe,D+=m*zt,z+=m*Ve,Q+=m*$e,re+=m*Wt,he+=m*ze,xe+=m*We,Ae+=m*Xt,Te+=m*Xe,He+=m*Je,_t+=m*Jt,St+=m*Ye,Ho+=m*Qe,m=F[15],L+=m*je,A+=m*$t,T+=m*Ge,D+=m*qe,z+=m*zt,Q+=m*Ve,re+=m*$e,he+=m*Wt,xe+=m*ze,Ae+=m*We,Te+=m*Xt,He+=m*Xe,_t+=m*Je,St+=m*Jt,Ho+=m*Ye,It+=m*Qe,X+=38*A,Z+=38*T,fe+=38*D,se+=38*z,de+=38*Q,Ee+=38*re,le+=38*he,we+=38*xe,Re+=38*Ae,ye+=38*Te,be+=38*He,Pe+=38*_t,me+=38*St,pe+=38*Ho,Le+=38*It,B=1,m=X+B+65535,B=Math.floor(m/65536),X=m-B*65536,m=Z+B+65535,B=Math.floor(m/65536),Z=m-B*65536,m=fe+B+65535,B=Math.floor(m/65536),fe=m-B*65536,m=se+B+65535,B=Math.floor(m/65536),se=m-B*65536,m=de+B+65535,B=Math.floor(m/65536),de=m-B*65536,m=Ee+B+65535,B=Math.floor(m/65536),Ee=m-B*65536,m=le+B+65535,B=Math.floor(m/65536),le=m-B*65536,m=we+B+65535,B=Math.floor(m/65536),we=m-B*65536,m=Re+B+65535,B=Math.floor(m/65536),Re=m-B*65536,m=ye+B+65535,B=Math.floor(m/65536),ye=m-B*65536,m=be+B+65535,B=Math.floor(m/65536),be=m-B*65536,m=Pe+B+65535,B=Math.floor(m/65536),Pe=m-B*65536,m=me+B+65535,B=Math.floor(m/65536),me=m-B*65536,m=pe+B+65535,B=Math.floor(m/65536),pe=m-B*65536,m=Le+B+65535,B=Math.floor(m/65536),Le=m-B*65536,m=L+B+65535,B=Math.floor(m/65536),L=m-B*65536,X+=B-1+37*(B-1),B=1,m=X+B+65535,B=Math.floor(m/65536),X=m-B*65536,m=Z+B+65535,B=Math.floor(m/65536),Z=m-B*65536,m=fe+B+65535,B=Math.floor(m/65536),fe=m-B*65536,m=se+B+65535,B=Math.floor(m/65536),se=m-B*65536,m=de+B+65535,B=Math.floor(m/65536),de=m-B*65536,m=Ee+B+65535,B=Math.floor(m/65536),Ee=m-B*65536,m=le+B+65535,B=Math.floor(m/65536),le=m-B*65536,m=we+B+65535,B=Math.floor(m/65536),we=m-B*65536,m=Re+B+65535,B=Math.floor(m/65536),Re=m-B*65536,m=ye+B+65535,B=Math.floor(m/65536),ye=m-B*65536,m=be+B+65535,B=Math.floor(m/65536),be=m-B*65536,m=Pe+B+65535,B=Math.floor(m/65536),Pe=m-B*65536,m=me+B+65535,B=Math.floor(m/65536),me=m-B*65536,m=pe+B+65535,B=Math.floor(m/65536),pe=m-B*65536,m=Le+B+65535,B=Math.floor(m/65536),Le=m-B*65536,m=L+B+65535,B=Math.floor(m/65536),L=m-B*65536,X+=B-1+37*(B-1),W[0]=X,W[1]=Z,W[2]=fe,W[3]=se,W[4]=de,W[5]=Ee,W[6]=le,W[7]=we,W[8]=Re,W[9]=ye,W[10]=be,W[11]=Pe,W[12]=me,W[13]=pe,W[14]=Le,W[15]=L}function _(W,F){y(W,F,F)}function I(W,F){const k=i();let m;for(m=0;m<16;m++)k[m]=F[m];for(m=253;m>=0;m--)_(k,k),m!==2&&m!==4&&y(k,k,F);for(m=0;m<16;m++)W[m]=k[m]}function x(W,F){const k=i();let m;for(m=0;m<16;m++)k[m]=F[m];for(m=250;m>=0;m--)_(k,k),m!==1&&y(k,k,F);for(m=0;m<16;m++)W[m]=k[m]}function E(W,F){const k=i(),m=i(),B=i(),X=i(),Z=i(),fe=i(),se=i(),de=i(),Ee=i();G(k,W[1],W[0]),G(Ee,F[1],F[0]),y(k,k,Ee),U(m,W[0],W[1]),U(Ee,F[0],F[1]),y(m,m,Ee),y(B,W[3],F[3]),y(B,B,l),y(X,W[2],F[2]),U(X,X,X),G(Z,m,k),G(fe,X,B),U(se,X,B),U(de,m,k),y(W[0],Z,fe),y(W[1],de,se),y(W[2],se,fe),y(W[3],Z,de)}function u(W,F,k){for(let m=0;m<4;m++)H(W[m],F[m],k)}function d(W,F){const k=i(),m=i(),B=i();I(B,F[2]),y(k,F[0],B),y(m,F[1],B),$(W,m),W[31]^=V(k)<<7}function g(W,F,k){P(W[0],o),P(W[1],a),P(W[2],a),P(W[3],o);for(let m=255;m>=0;--m){const B=k[m/8|0]>>(m&7)&1;u(W,F,B),E(F,W),E(W,W),u(W,F,B)}}function b(W,F){const k=[i(),i(),i(),i()];P(k[0],f),P(k[1],h),P(k[2],a),y(k[3],f,h),g(W,k,F)}function p(W){if(W.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const F=(0,r.hash)(W);F[0]&=248,F[31]&=127,F[31]|=64;const k=new Uint8Array(32),m=[i(),i(),i(),i()];b(m,F),d(k,m);const B=new Uint8Array(64);return B.set(W),B.set(k,32),{publicKey:k,secretKey:B}}t.generateKeyPairFromSeed=p;function R(W){const F=(0,e.randomBytes)(32,W),k=p(F);return(0,n.wipe)(F),k}t.generateKeyPair=R;function O(W){if(W.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(W.subarray(32))}t.extractPublicKeyFromSecretKey=O;const w=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function v(W,F){let k,m,B,X;for(m=63;m>=32;--m){for(k=0,B=m-32,X=m-12;B<X;++B)F[B]+=k-16*F[m]*w[B-(m-32)],k=Math.floor((F[B]+128)/256),F[B]-=k*256;F[B]+=k,F[m]=0}for(k=0,B=0;B<32;B++)F[B]+=k-(F[31]>>4)*w[B],k=F[B]>>8,F[B]&=255;for(B=0;B<32;B++)F[B]-=k*w[B];for(m=0;m<32;m++)F[m+1]+=F[m]>>8,W[m]=F[m]&255}function N(W){const F=new Float64Array(64);for(let k=0;k<64;k++)F[k]=W[k];for(let k=0;k<64;k++)W[k]=0;v(W,F)}function ee(W,F){const k=new Float64Array(64),m=[i(),i(),i(),i()],B=(0,r.hash)(W.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const X=new Uint8Array(64);X.set(B.subarray(32),32);const Z=new r.SHA512;Z.update(X.subarray(32)),Z.update(F);const fe=Z.digest();Z.clean(),N(fe),b(m,fe),d(X,m),Z.reset(),Z.update(X.subarray(0,32)),Z.update(W.subarray(32)),Z.update(F);const se=Z.digest();N(se);for(let de=0;de<32;de++)k[de]=fe[de];for(let de=0;de<32;de++)for(let Ee=0;Ee<32;Ee++)k[de+Ee]+=se[de]*B[Ee];return v(X.subarray(32),k),X}t.sign=ee;function Y(W,F){const k=i(),m=i(),B=i(),X=i(),Z=i(),fe=i(),se=i();return P(W[2],a),K(W[1],F),_(B,W[1]),y(X,B,c),G(B,B,W[2]),U(X,W[2],X),_(Z,X),_(fe,Z),y(se,fe,Z),y(k,se,B),y(k,k,X),x(k,k),y(k,k,B),y(k,k,X),y(k,k,X),y(W[0],k,X),_(m,W[0]),y(m,m,X),C(m,B)&&y(W[0],W[0],S),_(m,W[0]),y(m,m,X),C(m,B)?-1:(V(W[0])===F[31]>>7&&G(W[0],o,W[0]),y(W[3],W[0],W[1]),0)}function ie(W,F,k){const m=new Uint8Array(32),B=[i(),i(),i(),i()],X=[i(),i(),i(),i()];if(k.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(Y(X,W))return!1;const Z=new r.SHA512;Z.update(k.subarray(0,32)),Z.update(W),Z.update(F);const fe=Z.digest();return N(fe),g(B,X,fe),b(X,k.subarray(32)),E(B,X),d(m,B),!q(k,m)}t.verify=ie;function oe(W){let F=[i(),i(),i(),i()];if(Y(F,W))throw new Error("Ed25519: invalid public key");let k=i(),m=i(),B=F[1];U(k,a,B),G(m,a,B),I(m,m),y(k,k,m);let X=new Uint8Array(32);return $(X,k),X}t.convertPublicKeyToX25519=oe;function ae(W){const F=(0,r.hash)(W.subarray(0,32));F[0]&=248,F[31]&=127,F[31]|=64;const k=new Uint8Array(F.subarray(0,32));return(0,n.wipe)(F),k}t.convertSecretKeyToX25519=ae})(Xr);var Xy={};Object.defineProperty(Xy,"__esModule",{value:!0});function Ux(){for(var t=0,e=0;e<arguments.length;e++)t+=arguments[e].length;for(var r=new Uint8Array(t),n=0,e=0;e<arguments.length;e++){var i=arguments[e];r.set(i,n),n+=i.length}return r}var Fx=Xy.concat=Ux,_i=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const D0=24;function os(t){return te.from(t).toString("hex")}function Zo(t){return _i(this,void 0,void 0,function*(){return os(typeof t=="string"?vn.hash(Hs(t),32):vn.hash(t,32))})}function yg(t){return _i(this,void 0,void 0,function*(){return Xr.generateKeyPairFromSeed(vn.hash(Hs(t),32))})}function Jy(t,e){return _i(this,void 0,void 0,function*(){const r=te.from(Co.randomBytes(D0)),n=te.concat([r,te.from(ba.secretBox(e,r,te.from(t,"utf8")))]);return os(n)})}function Yy(t,e){return _i(this,void 0,void 0,function*(){const r=t.slice(0,D0),n=t.slice(D0),i=ba.openSecretBox(e,r,n);if(!i)throw new Error("Decryption failed");return te.from(i).toString("utf8")})}function Kx(t,e){return _i(this,void 0,void 0,function*(){const r=Xr.convertPublicKeyToX25519(te.from(e)),n=ba.generateKeyPair(),s=new vn.BLAKE2b(24).update(n.publicKey,32).update(r,32).digest(),o=typeof t=="string"?Hs(t):t,a=ba.box(r,n.secretKey,s,o);return os(Fx(n.publicKey,a))})}function Qy(t,e,r){return _i(this,void 0,void 0,function*(){const n=Xr.convertSecretKeyToX25519(te.from(r)),i=Xr.convertPublicKeyToX25519(te.from(e)),s=typeof t=="string"?Hs(t):t,o=s.slice(0,32),a=s.slice(32),l=new vn.BLAKE2b(24).update(o,32).update(i,32).digest(),f=ba.openBox(o,n,l,a);if(!f)throw new Error("Decryption failed");return te.from(f).toString()})}function Hx(t){return _i(this,void 0,void 0,function*(){const e={edpk:{length:54,prefix:te.from(new Uint8Array([6,161,159]))},sppk:{length:55,prefix:te.from(new Uint8Array([6,161,161]))},p2pk:{length:55,prefix:te.from(new Uint8Array([6,161,164]))}};let r,n;if(t.length===64)r=e.edpk.prefix,n=t;else{const s=Object.entries(e);for(let o=0;o<s.length;o++){const[a,c]=s[o];if(t.startsWith(a)&&t.length===c.length){r=c.prefix;const l=ss.decode(t);n=l.slice(a.length,l.length).toString("hex");break}}}if(!r||!n)throw new Error(`invalid publicKey: ${t}`);const i=vn.hash(te.from(n,"hex"),20);return ss.encode(te.concat([r,te.from(i)]))})}function Eg(t,e){return`@${t}:${e}`}const jx=t=>_i(void 0,void 0,void 0,function*(){if(t.length%2!==0)return Hs(t);let e=t;t.startsWith("0x")&&(e=t.slice(2));const r=te.from(e,"hex");return r.length===e.length/2?r:Hs(t)}),Gx=(t,e=32)=>_i(void 0,void 0,void 0,function*(){return vn.hash(t,e)}),qx=(t,e)=>_i(void 0,void 0,void 0,function*(){const r=yield jx(t),n=new Uint8Array([9,245,205,134,18]),i=yield Gx(r),s=Xr.sign(e.secretKey,i);return ss.encode(te.concat([te.from(n),te.from(s)]))});var Vx=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};function as(){return Vx(this,void 0,void 0,function*(){const t=Co.randomBytes(16);return[t.slice(0,4),t.slice(4,6),t.slice(6,8),t.slice(8,10),t.slice(10,16)].map(function(e){return te.from(e).toString("hex")}).join("-")})}const Au=24,xu=16;var Fe;(function(t){t.BlockchainRequest="blockchain_request",t.PermissionRequest="permission_request",t.SignPayloadRequest="sign_payload_request",t.OperationRequest="operation_request",t.BroadcastRequest="broadcast_request",t.BlockchainResponse="blockchain_response",t.PermissionResponse="permission_response",t.SignPayloadResponse="sign_payload_response",t.OperationResponse="operation_response",t.BroadcastResponse="broadcast_response",t.Acknowledge="acknowledge",t.Disconnect="disconnect",t.Error="error"})(Fe||(Fe={}));var Pn;(function(t){t.SIGN="sign",t.OPERATION_REQUEST="operation_request",t.ENCRYPT="encrypt",t.NOTIFICATION="notification",t.THRESHOLD="threshold"})(Pn||(Pn={}));var Lt;(function(t){t.MAINNET="mainnet",t.GHOSTNET="ghostnet",t.MONDAYNET="mondaynet",t.DAILYNET="dailynet",t.DELPHINET="delphinet",t.EDONET="edonet",t.FLORENCENET="florencenet",t.GRANADANET="granadanet",t.HANGZHOUNET="hangzhounet",t.ITHACANET="ithacanet",t.JAKARTANET="jakartanet",t.KATHMANDUNET="kathmandunet",t.LIMANET="limanet",t.MUMBAINET="mumbainet",t.CUSTOM="custom"})(Lt||(Lt={}));var wg;(function(t){t.ENDORSEMENT="endorsement",t.SEED_NONCE_REVELATION="seed_nonce_revelation",t.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",t.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",t.ACTIVATE_ACCOUNT="activate_account",t.PROPOSALS="proposals",t.BALLOT="ballot",t.REVEAL="reveal",t.TRANSACTION="transaction",t.ORIGINATION="origination",t.DELEGATION="delegation"})(wg||(wg={}));var Nn;(function(t){t.WEBSITE="website",t.EXTENSION="extension",t.P2P="p2p"})(Nn||(Nn={}));var Yi;(function(t){t.BACKGROUND="toBackground",t.PAGE="toPage",t.EXTENSION="toExtension"})(Yi||(Yi={}));var Et;(function(t){t.BROADCAST_ERROR="BROADCAST_ERROR",t.NETWORK_NOT_SUPPORTED="NETWORK_NOT_SUPPORTED",t.NO_ADDRESS_ERROR="NO_ADDRESS_ERROR",t.NO_PRIVATE_KEY_FOUND_ERROR="NO_PRIVATE_KEY_FOUND_ERROR",t.NOT_GRANTED_ERROR="NOT_GRANTED_ERROR",t.PARAMETERS_INVALID_ERROR="PARAMETERS_INVALID_ERROR",t.TOO_MANY_OPERATIONS="TOO_MANY_OPERATIONS",t.TRANSACTION_INVALID_ERROR="TRANSACTION_INVALID_ERROR",t.SIGNATURE_TYPE_NOT_SUPPORTED="SIGNATURE_TYPE_NOT_SUPPORTED",t.ABORTED_ERROR="ABORTED_ERROR",t.UNKNOWN_ERROR="UNKNOWN_ERROR"})(Et||(Et={}));var bn;(function(t){t.NOT_CONNECTED="NOT_CONNECTED",t.CONNECTING="CONNECTING",t.CONNECTED="CONNECTED"})(bn||(bn={}));var Ro;(function(t){t.CHROME_MESSAGE="chrome_message",t.POST_MESSAGE="post_message",t.LEDGER="ledger",t.P2P="p2p"})(Ro||(Ro={}));var ke;(function(t){t.TRANSPORT_P2P_PEERS_DAPP="beacon:communication-peers-dapp",t.TRANSPORT_P2P_PEERS_WALLET="beacon:communication-peers-wallet",t.TRANSPORT_POSTMESSAGE_PEERS_DAPP="beacon:postmessage-peers-dapp",t.TRANSPORT_POSTMESSAGE_PEERS_WALLET="beacon:postmessage-peers-wallet",t.ACCOUNTS="beacon:accounts",t.ACTIVE_ACCOUNT="beacon:active-account",t.PUSH_TOKENS="beacon:push-tokens",t.BEACON_SDK_SECRET_SEED="beacon:sdk-secret-seed",t.APP_METADATA_LIST="beacon:app-metadata-list",t.PERMISSION_LIST="beacon:permissions",t.BEACON_SDK_VERSION="beacon:sdk_version",t.MATRIX_PRESERVED_STATE="beacon:sdk-matrix-preserved-state",t.MATRIX_PEER_ROOM_IDS="beacon:matrix-peer-rooms",t.MATRIX_SELECTED_NODE="beacon:matrix-selected-node",t.MULTI_NODE_SETUP_DONE="beacon:multi-node-setup"})(ke||(ke={}));const zh={[ke.TRANSPORT_P2P_PEERS_DAPP]:[],[ke.TRANSPORT_P2P_PEERS_WALLET]:[],[ke.TRANSPORT_POSTMESSAGE_PEERS_DAPP]:[],[ke.TRANSPORT_POSTMESSAGE_PEERS_WALLET]:[],[ke.ACCOUNTS]:[],[ke.ACTIVE_ACCOUNT]:void 0,[ke.PUSH_TOKENS]:[],[ke.BEACON_SDK_SECRET_SEED]:void 0,[ke.APP_METADATA_LIST]:[],[ke.PERMISSION_LIST]:[],[ke.BEACON_SDK_VERSION]:void 0,[ke.MATRIX_PRESERVED_STATE]:{},[ke.MATRIX_PEER_ROOM_IDS]:{},[ke.MATRIX_SELECTED_NODE]:void 0,[ke.MULTI_NODE_SETUP_DONE]:void 0};var As;(function(t){t.RAW="raw",t.OPERATION="operation",t.MICHELINE="micheline"})(As||(As={}));var Su;(function(t){t.LIGHT="light",t.DARK="dark"})(Su||(Su={}));var U0;(function(t){t.EUROPE_EAST="europe-east",t.EUROPE_WEST="europe-west",t.NORTH_AMERICA_EAST="north-america-east",t.NORTH_AMERICA_WEST="north-america-west",t.CENTRAL_AMERICA="central-america",t.SOUTH_AMERICA="south-america",t.ASIA_EAST="asia-east",t.ASIA_WEST="asia-west",t.AFRICA="africa",t.AUSTRALIA="australia"})(U0||(U0={}));const $x="3.3.3",Zy="3",Rf=[t=>{}];let at={postMessage:(t,e)=>{console.log("GOT MOCK POST MESSAGE",t),Rf.forEach(r=>{r({data:t})})},addEventListener:(t,e)=>{Rf.push(e)},removeEventListener:(t,e)=>{Rf.splice(Rf.indexOf(r=>r===e),1)},location:{origin:"*"}};try{typeof window<"u"&&(at=window)}catch(t){console.log(`not defined: ${t}`)}var Tf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class zx{constructor(e){if(this._beaconId=new er,this._keyPair=new er,!e.name)throw new Error("Name not set");if(!e.storage)throw new Error("Storage not set");this.name=e.name,this.iconUrl=e.iconUrl,this.appUrl=e.appUrl,this.storage=e.storage,at.beaconCreatedClientInstance?console.error("[BEACON] It looks like you created multiple Beacon SDK Client instances. This can lead to problems. Only create one instance and re-use it everywhere."):at.beaconCreatedClientInstance=!0,this.initSDK().catch(console.error)}get beaconId(){return this._beaconId.promise}get keyPair(){return this._keyPair.promise}destroy(){return Tf(this,void 0,void 0,function*(){yield this.removeBeaconEntriesFromStorage(),at.beaconCreatedClientInstance=!1})}initSDK(){return Tf(this,void 0,void 0,function*(){return this.storage.set(ke.BEACON_SDK_VERSION,$x).catch(console.error),this.loadOrCreateBeaconSecret().catch(console.error),this.keyPair.then(e=>{this._beaconId.resolve(os(e.publicKey))})})}removeBeaconEntriesFromStorage(){return Tf(this,void 0,void 0,function*(){const e=Object.values(ke);yield Promise.all(e.map(r=>this.storage.delete(r)))})}loadOrCreateBeaconSecret(){return Tf(this,void 0,void 0,function*(){const e=yield this.storage.get(ke.BEACON_SDK_SECRET_SEED);if(e&&typeof e=="string")this._keyPair.resolve(yield yg(e));else{const r=yield as();yield this.storage.set(ke.BEACON_SDK_SECRET_SEED,r),this._keyPair.resolve(yield yg(r))}})}}var ic=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Cp{constructor(e,r){this.storage=e,this.storageKey=r}getAll(){return ic(this,void 0,void 0,function*(){return this.storage.get(this.storageKey)})}getOne(e){return ic(this,void 0,void 0,function*(){const r=yield this.storage.get(this.storageKey);return r.find(e)})}addOne(e,r,n=!0){return ic(this,void 0,void 0,function*(){const i=yield this.storage.get(this.storageKey);if(!i.some(r))i.push(e);else if(n)for(let s=0;s<i.length;s++)r(i[s])&&(i[s]=e);return this.storage.set(this.storageKey,i)})}remove(e){return ic(this,void 0,void 0,function*(){const r=yield this.storage.get(this.storageKey),n=r.filter(i=>!e(i));return this.storage.set(this.storageKey,n)})}removeAll(){return ic(this,void 0,void 0,function*(){return this.storage.delete(this.storageKey)})}}var Wx=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const F0=(t,e)=>Wx(void 0,void 0,void 0,function*(){const r=[t,e.type];e.name&&r.push(`name:${e.name}`),e.rpcUrl&&r.push(`rpc:${e.rpcUrl}`);const n=te.from(vn.hash(Hs(r.join("-")),10));return ss.encode(n)});var Xx=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Jx{static hasPermission(e,r,n){return Xx(this,void 0,void 0,function*(){switch(e.type){case Fe.PermissionRequest:case Fe.BroadcastRequest:return!0;case Fe.OperationRequest:{const i=yield F0(e.sourceAddress,e.network),s=yield r(i);return s?s.scopes.includes(Pn.OPERATION_REQUEST):!1}case Fe.SignPayloadRequest:{const s=(yield n()).filter(o=>o.address===e.sourceAddress);return s.length===0?!1:s.some(o=>o.scopes.includes(Pn.SIGN))}default:throw new Error("Message not handled")}})}}var no=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Yx{constructor(e){this.storageManager=new Cp(e,ke.ACCOUNTS)}getAccounts(){return no(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getAccount(e){return no(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.accountIdentifier===e)})}addAccount(e){return no(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.accountIdentifier===e.accountIdentifier)})}removeAccount(e){return no(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.accountIdentifier===e)})}removeAccounts(e){return no(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.accountIdentifier))})}removeAllAccounts(){return no(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}hasPermission(e){return no(this,void 0,void 0,function*(){return Jx.hasPermission(e,this.getAccount.bind(this),this.getAccounts.bind(this))})}}var Qx=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const va=t=>Qx(void 0,void 0,void 0,function*(){const e=te.from(vn.hash(te.from(t,"hex"),5));return ss.encode(e)});let e2=!!at.beaconSdkDebugEnabled;e2&&console.log("[BEACON]: Debug mode is ON (turned on either by the developer or a browser extension)");const Zx=()=>e2;class e8{constructor(){}debug(e,r,...n){this._log("debug",e,r,n)}log(e,r,...n){this._log("log",e,r,n)}warn(e,r,...n){this._log("warn",e,r,n)}error(e,r,...n){this._log("error",e,r,n)}_log(e,r,n,i=[]){if(!Zx())return;let s=`[BEACON] ${new Date().toISOString()} [${r}](${n})`,o=i;switch(i[0]&&typeof i[0]=="string"&&(s+=` ${i[0]}`,o=i.slice(1)),e){case"error":console.group(s),console.error(...o);break;case"warn":console.group(s),console.warn(...o);break;case"debug":console.groupCollapsed(s),console.debug(...o);break;default:console.group(s),console.log(...o)}console.groupEnd()}}class on{constructor(e){this.name=e}debug(e,...r){Of.debug(this.name,e,r)}log(e,...r){Of.log(this.name,e,r)}warn(e,...r){Of.warn(this.name,e,r)}error(e,...r){Of.error(this.name,e,r)}}let Of=new e8;var Br=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const t8=new on("Client");class r8 extends zx{constructor(e){var r;super(e),this.rateLimit=2,this.rateLimitWindowInSeconds=5,this.requestCounter=[],this._transport=new er,this.accountManager=new Yx(e.storage),this.matrixNodes=(r=e.matrixNodes)!==null&&r!==void 0?r:{},this.handleResponse=(n,i)=>{throw new Error(`not overwritten${JSON.stringify(n)} - ${JSON.stringify(i)}`)}}get transport(){return this._transport.promise}get connectionStatus(){var e,r;return(r=(e=this._transport.promiseResult)===null||e===void 0?void 0:e.connectionStatus)!==null&&r!==void 0?r:bn.NOT_CONNECTED}get ready(){return this.transport.then(()=>{})}getAccounts(){return Br(this,void 0,void 0,function*(){return this.accountManager.getAccounts()})}getAccount(e){return Br(this,void 0,void 0,function*(){return this.accountManager.getAccount(e)})}removeAccount(e){return Br(this,void 0,void 0,function*(){return this.accountManager.removeAccount(e)})}removeAllAccounts(){return Br(this,void 0,void 0,function*(){return this.accountManager.removeAllAccounts()})}addRequestAndCheckIfRateLimited(){return Br(this,void 0,void 0,function*(){const e=new Date().getTime();return this.requestCounter=this.requestCounter.filter(r=>r+this.rateLimitWindowInSeconds*1e3>e),this.requestCounter.push(e),this.requestCounter.length>this.rateLimit})}init(e){return Br(this,void 0,void 0,function*(){return this._transport.status===ei.RESOLVED?(yield this.transport).type:(yield this.setTransport(e),e.type)})}getOwnAppMetadata(){return Br(this,void 0,void 0,function*(){return{senderId:yield va(yield this.beaconId),name:this.name,icon:this.iconUrl}})}getPeers(){return Br(this,void 0,void 0,function*(){return(yield this.transport).getPeers()})}addPeer(e){return Br(this,void 0,void 0,function*(){return(yield this.transport).addPeer(e)})}destroy(){const e=Object.create(null,{destroy:{get:()=>super.destroy}});return Br(this,void 0,void 0,function*(){this._transport.status===ei.RESOLVED&&(yield(yield this.transport).disconnect()),yield e.destroy.call(this)})}setTransport(e){return Br(this,void 0,void 0,function*(){e?this._transport.isSettled()?this._transport=er.resolve(e):this._transport.resolve(e):this._transport.isSettled()&&(this._transport=new er)})}addListener(e){return Br(this,void 0,void 0,function*(){e.addListener((r,n)=>Br(this,void 0,void 0,function*(){if(typeof r=="string"){const i=yield new To().deserialize(r);this.handleResponse(i,n)}})).catch(r=>t8.error("addListener",r))})}sendDisconnectToPeer(e,r){return Br(this,void 0,void 0,function*(){const n={id:yield as(),version:e.version,senderId:yield va(yield this.beaconId),type:Fe.Disconnect},i=yield new To().serialize(n);yield(r??(yield this.transport)).send(i,e)})}}class an{constructor(e,r){this.name="BeaconError",this.title="Error",this.message=`[${e}]:${r}`,this.description=r}get fullDescription(){return{description:this.description}}static getError(e,r){switch(e){case Et.BROADCAST_ERROR:return new n8;case Et.NETWORK_NOT_SUPPORTED:return new i8;case Et.NO_ADDRESS_ERROR:return new s8;case Et.NO_PRIVATE_KEY_FOUND_ERROR:return new o8;case Et.NOT_GRANTED_ERROR:return new a8;case Et.PARAMETERS_INVALID_ERROR:return new c8;case Et.TOO_MANY_OPERATIONS:return new f8;case Et.TRANSACTION_INVALID_ERROR:return new u8(r);case Et.SIGNATURE_TYPE_NOT_SUPPORTED:return new b8;case Et.ABORTED_ERROR:return new d8;case Et.UNKNOWN_ERROR:return new t2}}}class n8 extends an{constructor(){super(Et.BROADCAST_ERROR,"The transaction could not be broadcast to the network. Please try again."),this.name="BroadcastBeaconError",this.title="Broadcast Error"}}class i8 extends an{constructor(){super(Et.NETWORK_NOT_SUPPORTED,"The wallet does not support this network. Please select another one."),this.name="NetworkNotSupportedBeaconError",this.title="Network Error"}}class s8 extends an{constructor(){super(Et.NO_ADDRESS_ERROR,"The wallet does not have an account set up. Please make sure to set up your wallet and try again."),this.name="NoAddressBeaconError",this.title="No Address"}}class o8 extends an{constructor(){super(Et.NO_PRIVATE_KEY_FOUND_ERROR,"The account you are trying to interact with is not available. Please make sure to add the account to your wallet and try again."),this.name="NoPrivateKeyBeaconError",this.title="Account Not Found"}}class a8 extends an{constructor(){super(Et.NOT_GRANTED_ERROR,"You do not have the necessary permissions to perform this action. Please initiate another permission request and give the necessary permissions."),this.name="NotGrantedBeaconError",this.title="Permission Not Granted"}}class c8 extends an{constructor(){super(Et.PARAMETERS_INVALID_ERROR,"Some of the parameters you provided are invalid and the request could not be completed. Please check your inputs and try again."),this.name="ParametersInvalidBeaconError",this.title="Parameters Invalid"}}class f8 extends an{constructor(){super(Et.TOO_MANY_OPERATIONS,"The request contains too many transactions. Please include fewer operations and try again."),this.name="TooManyOperationsBeaconError",this.title="Too Many Operations"}}class u8 extends an{constructor(e){super(Et.TRANSACTION_INVALID_ERROR,"The transaction is invalid and the node did not accept it."),this.data=e,this.name="TransactionInvalidBeaconError",this.title="Transaction Invalid",this.data=e}get fullDescription(){return{description:this.description,data:JSON.stringify(this.data,void 0,2)}}}class t2 extends an{constructor(){super(Et.UNKNOWN_ERROR,"An unknown error occured. Please try again or report it to a developer."),this.name="UnknownBeaconError",this.title="Error"}}var _n=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Oi=new on("Transport");class r2{constructor(e,r,n){this.type=Ro.POST_MESSAGE,this._isConnected=bn.NOT_CONNECTED,this.listeners=[],this.name=e,this.client=r,this.peerManager=n}get connectionStatus(){return this._isConnected}static isAvailable(){return _n(this,void 0,void 0,function*(){return Promise.resolve(!1)})}connect(){return _n(this,void 0,void 0,function*(){Oi.log("connect"),this._isConnected=bn.CONNECTED})}disconnect(){return _n(this,void 0,void 0,function*(){Oi.log("disconnect"),this._isConnected=bn.NOT_CONNECTED})}send(e,r){return _n(this,void 0,void 0,function*(){if(r)return this.client.sendMessage(e,r);{const i=(yield this.getPeers()).map(s=>this.client.sendMessage(e,s));return(yield Promise.all(i))[0]}})}addListener(e){return _n(this,void 0,void 0,function*(){Oi.debug("addListener"),this.listeners.push(e)})}removeListener(e){return _n(this,void 0,void 0,function*(){Oi.log("removeListener"),this.listeners=this.listeners.filter(r=>r!==e)})}getPeers(){return _n(this,void 0,void 0,function*(){return this.peerManager.getPeers()})}addPeer(e,r=!0){return _n(this,void 0,void 0,function*(){Oi.log("addPeer","adding peer",e),yield this.peerManager.addPeer(e),yield this.listen(e.publicKey)})}removePeer(e){return _n(this,void 0,void 0,function*(){Oi.log("removePeer","removing peer",e),yield this.peerManager.removePeer(e.publicKey),this.client&&(yield this.client.unsubscribeFromEncryptedMessage(e.publicKey))})}removeAllPeers(){return _n(this,void 0,void 0,function*(){Oi.log("removeAllPeers"),yield this.peerManager.removeAllPeers(),this.client&&(yield this.client.unsubscribeFromEncryptedMessages())})}notifyListeners(e,r){return _n(this,void 0,void 0,function*(){this.listeners.length===0?Oi.warn("notifyListeners","0 listeners notified!",this):Oi.log("notifyListeners",`Notifying ${this.listeners.length} listeners`,this),this.listeners.forEach(n=>{n(e,r)})})}}globalThis&&globalThis.__awaiter;var If=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class l8{constructor(e){this.prefix=e}static isSupported(){return If(this,void 0,void 0,function*(){return Promise.resolve(typeof window<"u"&&!!window.localStorage)})}get(e){return If(this,void 0,void 0,function*(){const r=localStorage.getItem(this.getPrefixedKey(e));if(r)try{return JSON.parse(r)}catch{return r}else return typeof zh[e]=="object"?JSON.parse(JSON.stringify(zh[e])):zh[e]})}set(e,r){return If(this,void 0,void 0,function*(){return typeof r=="string"?localStorage.setItem(this.getPrefixedKey(e),r):localStorage.setItem(this.getPrefixedKey(e),JSON.stringify(r))})}delete(e){return If(this,void 0,void 0,function*(){return Promise.resolve(localStorage.removeItem(this.getPrefixedKey(e)))})}getPrefixedKey(e){return this.prefix?`${this.prefix}-${e}`:e}}globalThis&&globalThis.__awaiter;var _g=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class To{serialize(e){return _g(this,void 0,void 0,function*(){const r=JSON.stringify(e);return ss.encode(te.from(r))})}deserialize(e){return _g(this,void 0,void 0,function*(){if(typeof e!="string")throw new Error("Encoded payload needs to be a string");return JSON.parse(ss.decode(e).toString())})}}var Go=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class h8{constructor(e){this.storageManager=new Cp(e,ke.APP_METADATA_LIST)}getAppMetadataList(){return Go(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getAppMetadata(e){return Go(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.senderId===e)})}addAppMetadata(e){return Go(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.senderId===e.senderId)})}removeAppMetadata(e){return Go(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.senderId===e)})}removeAppMetadatas(e){return Go(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.senderId))})}removeAllAppMetadata(){return Go(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}}globalThis&&globalThis.__awaiter;class d8 extends an{constructor(){super(Et.ABORTED_ERROR,"The action was aborted by the user."),this.name="UnknownBeaconError",this.title="Aborted"}}var io=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Ru{constructor(e,r){this.storageManager=new Cp(e,r)}hasPeer(e){return io(this,void 0,void 0,function*(){return!!(yield this.getPeer(e))})}getPeers(){return io(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getPeer(e){return io(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.publicKey===e)})}addPeer(e){return io(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.publicKey===e.publicKey)})}removePeer(e){return io(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.publicKey===e)})}removePeers(e){return io(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.publicKey))})}removeAllPeers(){return io(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}}var Wh={},Xh={},Ag;function p8(){return Ag||(Ag=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.X25519Session=t.SECRET_SEED_LENGTH=t.SAVED_STATE_LENGTH=t.ACCEPT_MESSAGE_LENGTH=t.OFFER_MESSAGE_LENGTH=void 0;const e=Co,r=jr,n=Ic,i=n2();t.OFFER_MESSAGE_LENGTH=n.PUBLIC_KEY_LENGTH,t.ACCEPT_MESSAGE_LENGTH=n.PUBLIC_KEY_LENGTH,t.SAVED_STATE_LENGTH=n.SECRET_KEY_LENGTH,t.SECRET_SEED_LENGTH=n.SECRET_KEY_LENGTH;class s{constructor(a,c){this.offerMessageLength=t.OFFER_MESSAGE_LENGTH,this.acceptMessageLength=t.ACCEPT_MESSAGE_LENGTH,this.sharedKeyLength=n.SHARED_KEY_LENGTH,this.savedStateLength=t.SAVED_STATE_LENGTH,this._seed=a||(0,e.randomBytes)(n.SECRET_KEY_LENGTH,c)}saveState(){return new Uint8Array(this._seed)}restoreState(a){return this._seed=new Uint8Array(a),this}clean(){this._seed&&(0,r.wipe)(this._seed),this._keyPair&&((0,r.wipe)(this._keyPair.secretKey),(0,r.wipe)(this._keyPair.publicKey)),this._sharedKey&&(0,r.wipe)(this._sharedKey),this._sessionKeys&&((0,r.wipe)(this._sessionKeys.receive),(0,r.wipe)(this._sessionKeys.send))}offer(){return this._keyPair=(0,n.generateKeyPairFromSeed)(this._seed),new Uint8Array(this._keyPair.publicKey)}accept(a){if(this._keyPair)throw new Error("X25519Session: accept shouldn't be called by offering party");if(a.length!==this.offerMessageLength)throw new Error("X25519Session: incorrect offer message length");if(this._sharedKey)throw new Error("X25519Session: accept was already called");const c=(0,n.generateKeyPairFromSeed)(this._seed);return this._sharedKey=(0,n.sharedKey)(c.secretKey,a),this._sessionKeys=(0,i.clientSessionKeysFromSharedKey)(this._sharedKey,c.publicKey,a),(0,r.wipe)(c.secretKey),c.publicKey}finish(a){if(a.length!==this.acceptMessageLength)throw new Error("X25519Session: incorrect accept message length");if(!this._keyPair)throw new Error("X25519Session: no offer state");if(this._sharedKey)throw new Error("X25519Session: finish was already called");return this._sharedKey=(0,n.sharedKey)(this._keyPair.secretKey,a),this._sessionKeys=(0,i.serverSessionKeysFromSharedKey)(this._sharedKey,this._keyPair.publicKey,a),this}getSharedKey(){if(!this._sharedKey)throw new Error("X25519Session: no shared key established");return new Uint8Array(this._sharedKey)}getSessionKeys(){if(!this._sessionKeys)throw new Error("X25519Session: no shared key established");return{receive:new Uint8Array(this._sessionKeys.receive),send:new Uint8Array(this._sessionKeys.send)}}}t.X25519Session=s}(Xh)),Xh}var xg;function n2(){return xg||(xg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.clientSessionKeys=t.serverSessionKeys=t.clientSessionKeysFromSharedKey=t.serverSessionKeysFromSharedKey=t.X25519Session=void 0;const e=vn,r=Ic;var n=p8();Object.defineProperty(t,"X25519Session",{enumerable:!0,get:function(){return n.X25519Session}});const i=32;function s(l,f,h,S=e.BLAKE2b){const P=new S;if(P.digestLength!==i*2)throw new Error("X25519: incorrect digest length");const M=P.update(l).update(h).update(f).digest();return{send:M.subarray(0,i),receive:M.subarray(i)}}t.serverSessionKeysFromSharedKey=s;function o(l,f,h,S=e.BLAKE2b){const P=new S;if(P.digestLength!==i*2)throw new Error("X25519: incorrect digest length");const M=P.update(l).update(f).update(h).digest();return{receive:M.subarray(0,i),send:M.subarray(i)}}t.clientSessionKeysFromSharedKey=o;function a(l,f,h=e.BLAKE2b){const S=(0,r.sharedKey)(l.secretKey,f);return s(S,l.publicKey,f,h)}t.serverSessionKeys=a;function c(l,f,h=e.BLAKE2b){const S=(0,r.sharedKey)(l.secretKey,f);return o(S,l.publicKey,f,h)}t.clientSessionKeys=c}(Wh)),Wh}var Sg=n2(),sc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class i2{constructor(e){this.keyPair=e}getPublicKey(){return sc(this,void 0,void 0,function*(){return os(this.keyPair.publicKey)})}getPublicKeyHash(){return sc(this,void 0,void 0,function*(){return Zo(this.keyPair.publicKey)})}createCryptoBoxServer(e,r){return sc(this,void 0,void 0,function*(){return Sg.serverSessionKeys({publicKey:Xr.convertPublicKeyToX25519(r.publicKey),secretKey:Xr.convertSecretKeyToX25519(r.secretKey)},Xr.convertPublicKeyToX25519(te.from(e,"hex")))})}createCryptoBoxClient(e,r){return sc(this,void 0,void 0,function*(){return Sg.clientSessionKeys({publicKey:Xr.convertPublicKeyToX25519(r.publicKey),secretKey:Xr.convertSecretKeyToX25519(r.secretKey)},Xr.convertPublicKeyToX25519(te.from(e,"hex")))})}encryptMessageAsymmetric(e,r){return sc(this,void 0,void 0,function*(){return Kx(r,te.from(e,"hex"))})}}var so=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class g8 extends i2{constructor(e,r){super(r),this.name=e,this.init().catch(console.error)}start(){return so(this,void 0,void 0,function*(){yield Promise.resolve()})}getPairingRequestInfo(){return so(this,void 0,void 0,function*(){return{id:yield as(),type:"postmessage-pairing-request",name:this.name,version:Zy,publicKey:yield this.getPublicKey()}})}getPairingResponseInfo(e){return so(this,void 0,void 0,function*(){return{id:e.id,type:"postmessage-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey()}})}unsubscribeFromEncryptedMessage(e){return so(this,void 0,void 0,function*(){this.activeListeners.get(e)&&this.activeListeners.delete(e)})}unsubscribeFromEncryptedMessages(){return so(this,void 0,void 0,function*(){this.activeListeners.clear()})}decryptMessage(e,r){return so(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxServer(e,this.keyPair),i=te.from(r,"hex");if(i.length>=Au+xu)try{return yield Yy(i,n.receive)}catch{}throw new Error("Could not decrypt message")})}encryptMessage(e,r){return so(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxClient(e,this.keyPair);return Jy(r,n.send)})}}class b8 extends an{constructor(){super(Et.SIGNATURE_TYPE_NOT_SUPPORTED,"The wallet is not able to sign payloads of this type."),this.name="SignatureTypeNotSupportedBeaconError",this.title="Signature Type Not Supported"}}var Bp={exports:{}},s2=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},v8=s2,Bo=Object.prototype.toString;function kp(t){return Bo.call(t)==="[object Array]"}function K0(t){return typeof t>"u"}function m8(t){return t!==null&&!K0(t)&&t.constructor!==null&&!K0(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function y8(t){return Bo.call(t)==="[object ArrayBuffer]"}function E8(t){return typeof FormData<"u"&&t instanceof FormData}function w8(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function _8(t){return typeof t=="string"}function A8(t){return typeof t=="number"}function o2(t){return t!==null&&typeof t=="object"}function nu(t){if(Bo.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function x8(t){return Bo.call(t)==="[object Date]"}function S8(t){return Bo.call(t)==="[object File]"}function R8(t){return Bo.call(t)==="[object Blob]"}function a2(t){return Bo.call(t)==="[object Function]"}function T8(t){return o2(t)&&a2(t.pipe)}function O8(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function I8(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function P8(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Dp(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),kp(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function H0(){var t={};function e(i,s){nu(t[s])&&nu(i)?t[s]=H0(t[s],i):nu(i)?t[s]=H0({},i):kp(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)Dp(arguments[r],e);return t}function N8(t,e,r){return Dp(e,function(i,s){r&&typeof i=="function"?t[s]=v8(i,r):t[s]=i}),t}function L8(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var cn={isArray:kp,isArrayBuffer:y8,isBuffer:m8,isFormData:E8,isArrayBufferView:w8,isString:_8,isNumber:A8,isObject:o2,isPlainObject:nu,isUndefined:K0,isDate:x8,isFile:S8,isBlob:R8,isFunction:a2,isStream:T8,isURLSearchParams:O8,isStandardBrowserEnv:P8,forEach:Dp,merge:H0,extend:N8,trim:I8,stripBOM:L8},qo=cn;function Rg(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var c2=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(qo.isURLSearchParams(r))i=r.toString();else{var s=[];qo.forEach(r,function(c,l){c===null||typeof c>"u"||(qo.isArray(c)?l=l+"[]":c=[c],qo.forEach(c,function(h){qo.isDate(h)?h=h.toISOString():qo.isObject(h)&&(h=JSON.stringify(h)),s.push(Rg(l)+"="+Rg(h))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},M8=cn;function Rl(){this.handlers=[]}Rl.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Rl.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Rl.prototype.forEach=function(e){M8.forEach(this.handlers,function(n){n!==null&&e(n)})};var C8=Rl,B8=cn,k8=function(e,r){B8.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},f2=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Jh,Tg;function u2(){if(Tg)return Jh;Tg=1;var t=f2;return Jh=function(r,n,i,s,o){var a=new Error(r);return t(a,n,i,s,o)},Jh}var Yh,Og;function D8(){if(Og)return Yh;Og=1;var t=u2();return Yh=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Yh}var Qh,Ig;function U8(){if(Ig)return Qh;Ig=1;var t=cn;return Qh=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(a)&&l.push("domain="+a),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Qh}var Zh,Pg;function F8(){return Pg||(Pg=1,Zh=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),Zh}var ed,Ng;function K8(){return Ng||(Ng=1,ed=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),ed}var td,Lg;function H8(){if(Lg)return td;Lg=1;var t=F8(),e=K8();return td=function(n,i){return n&&!t(i)?e(n,i):i},td}var rd,Mg;function j8(){if(Mg)return rd;Mg=1;var t=cn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return rd=function(n){var i={},s,o,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=t.trim(l.substr(0,a)).toLowerCase(),o=t.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},rd}var nd,Cg;function G8(){if(Cg)return nd;Cg=1;var t=cn;return nd=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var c=t.isString(a)?s(a):a;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),nd}var id,Bg;function Tl(){if(Bg)return id;Bg=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,id=t,id}var sd,kg;function Dg(){if(kg)return sd;kg=1;var t=cn,e=D8(),r=U8(),n=c2,i=H8(),s=j8(),o=G8(),a=u2(),c=Ol(),l=Tl();return sd=function(h){return new Promise(function(P,M){var H=h.data,$=h.headers,q=h.responseType,C;function V(){h.cancelToken&&h.cancelToken.unsubscribe(C),h.signal&&h.signal.removeEventListener("abort",C)}t.isFormData(H)&&delete $["Content-Type"];var K=new XMLHttpRequest;if(h.auth){var U=h.auth.username||"",G=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";$.Authorization="Basic "+btoa(U+":"+G)}var y=i(h.baseURL,h.url);K.open(h.method.toUpperCase(),n(y,h.params,h.paramsSerializer),!0),K.timeout=h.timeout;function _(){if(K){var x="getAllResponseHeaders"in K?s(K.getAllResponseHeaders()):null,E=!q||q==="text"||q==="json"?K.responseText:K.response,u={data:E,status:K.status,statusText:K.statusText,headers:x,config:h,request:K};e(function(g){P(g),V()},function(g){M(g),V()},u),K=null}}if("onloadend"in K?K.onloadend=_:K.onreadystatechange=function(){!K||K.readyState!==4||K.status===0&&!(K.responseURL&&K.responseURL.indexOf("file:")===0)||setTimeout(_)},K.onabort=function(){K&&(M(a("Request aborted",h,"ECONNABORTED",K)),K=null)},K.onerror=function(){M(a("Network Error",h,null,K)),K=null},K.ontimeout=function(){var E=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",u=h.transitional||c.transitional;h.timeoutErrorMessage&&(E=h.timeoutErrorMessage),M(a(E,h,u.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",K)),K=null},t.isStandardBrowserEnv()){var I=(h.withCredentials||o(y))&&h.xsrfCookieName?r.read(h.xsrfCookieName):void 0;I&&($[h.xsrfHeaderName]=I)}"setRequestHeader"in K&&t.forEach($,function(E,u){typeof H>"u"&&u.toLowerCase()==="content-type"?delete $[u]:K.setRequestHeader(u,E)}),t.isUndefined(h.withCredentials)||(K.withCredentials=!!h.withCredentials),q&&q!=="json"&&(K.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&K.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&K.upload&&K.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(C=function(x){K&&(M(!x||x&&x.type?new l("canceled"):x),K.abort(),K=null)},h.cancelToken&&h.cancelToken.subscribe(C),h.signal&&(h.signal.aborted?C():h.signal.addEventListener("abort",C))),H||(H=null),K.send(H)})},sd}var od,Ug;function Ol(){if(Ug)return od;Ug=1;var t=cn,e=k8,r=f2,n={"Content-Type":"application/x-www-form-urlencoded"};function i(c,l){!t.isUndefined(c)&&t.isUndefined(c["Content-Type"])&&(c["Content-Type"]=l)}function s(){var c;return(typeof XMLHttpRequest<"u"||typeof tt<"u"&&Object.prototype.toString.call(tt)==="[object process]")&&(c=Dg()),c}function o(c,l,f){if(t.isString(c))try{return(l||JSON.parse)(c),t.trim(c)}catch(h){if(h.name!=="SyntaxError")throw h}return(f||JSON.stringify)(c)}var a={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:s(),transformRequest:[function(l,f){return e(f,"Accept"),e(f,"Content-Type"),t.isFormData(l)||t.isArrayBuffer(l)||t.isBuffer(l)||t.isStream(l)||t.isFile(l)||t.isBlob(l)?l:t.isArrayBufferView(l)?l.buffer:t.isURLSearchParams(l)?(i(f,"application/x-www-form-urlencoded;charset=utf-8"),l.toString()):t.isObject(l)||f&&f["Content-Type"]==="application/json"?(i(f,"application/json"),o(l)):l}],transformResponse:[function(l){var f=this.transitional||a.transitional,h=f&&f.silentJSONParsing,S=f&&f.forcedJSONParsing,P=!h&&this.responseType==="json";if(P||S&&t.isString(l)&&l.length)try{return JSON.parse(l)}catch(M){if(P)throw M.name==="SyntaxError"?r(M,this,"E_JSON_PARSE"):M}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(l){a.headers[l]={}}),t.forEach(["post","put","patch"],function(l){a.headers[l]=t.merge(n)}),od=a,od}var q8=cn,V8=Ol(),$8=function(e,r,n){var i=this||V8;return q8.forEach(n,function(o){e=o.call(i,e,r)}),e},ad,Fg;function l2(){return Fg||(Fg=1,ad=function(e){return!!(e&&e.__CANCEL__)}),ad}var Kg=cn,cd=$8,z8=l2(),W8=Ol(),X8=Tl();function fd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new X8("canceled")}var J8=function(e){fd(e),e.headers=e.headers||{},e.data=cd.call(e,e.data,e.headers,e.transformRequest),e.headers=Kg.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Kg.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||W8.adapter;return r(e).then(function(i){return fd(e),i.data=cd.call(e,i.data,i.headers,e.transformResponse),i},function(i){return z8(i)||(fd(e),i&&i.response&&(i.response.data=cd.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},qr=cn,h2=function(e,r){r=r||{};var n={};function i(f,h){return qr.isPlainObject(f)&&qr.isPlainObject(h)?qr.merge(f,h):qr.isPlainObject(h)?qr.merge({},h):qr.isArray(h)?h.slice():h}function s(f){if(qr.isUndefined(r[f])){if(!qr.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!qr.isUndefined(r[f]))return i(void 0,r[f])}function a(f){if(qr.isUndefined(r[f])){if(!qr.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function c(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return qr.forEach(Object.keys(e).concat(Object.keys(r)),function(h){var S=l[h]||s,P=S(h);qr.isUndefined(P)&&S!==c||(n[h]=P)}),n},ud,Hg;function d2(){return Hg||(Hg=1,ud={version:"0.24.0"}),ud}var Y8=d2().version,Up={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Up[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var jg={};Up.transitional=function(e,r,n){function i(s,o){return"[Axios v"+Y8+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!jg[o]&&(jg[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function Q8(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var Z8={assertOptions:Q8,validators:Up},p2=cn,eS=c2,Gg=C8,qg=J8,Il=h2,g2=Z8,Vo=g2.validators;function Yc(t){this.defaults=t,this.interceptors={request:new Gg,response:new Gg}}Yc.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Il(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&g2.assertOptions(r,{silentJSONParsing:Vo.transitional(Vo.boolean),forcedJSONParsing:Vo.transitional(Vo.boolean),clarifyTimeoutError:Vo.transitional(Vo.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(e)===!1||(i=i&&S.synchronous,n.unshift(S.fulfilled,S.rejected))});var s=[];this.interceptors.response.forEach(function(S){s.push(S.fulfilled,S.rejected)});var o;if(!i){var a=[qg,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(s),o=Promise.resolve(e);a.length;)o=o.then(a.shift(),a.shift());return o}for(var c=e;n.length;){var l=n.shift(),f=n.shift();try{c=l(c)}catch(h){f(h);break}}try{o=qg(c)}catch(h){return Promise.reject(h)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};Yc.prototype.getUri=function(e){return e=Il(this.defaults,e),eS(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};p2.forEach(["delete","get","head","options"],function(e){Yc.prototype[e]=function(r,n){return this.request(Il(n||{},{method:e,url:r,data:(n||{}).data}))}});p2.forEach(["post","put","patch"],function(e){Yc.prototype[e]=function(r,n,i){return this.request(Il(i||{},{method:e,url:r,data:n}))}});var tS=Yc,ld,Vg;function rS(){if(Vg)return ld;Vg=1;var t=Tl();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(c){i.subscribe(c),o=c}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},ld=e,ld}var hd,$g;function nS(){return $g||($g=1,hd=function(e){return function(n){return e.apply(null,n)}}),hd}var dd,zg;function iS(){return zg||(zg=1,dd=function(e){return typeof e=="object"&&e.isAxiosError===!0}),dd}var Wg=cn,sS=s2,iu=tS,oS=h2,aS=Ol();function b2(t){var e=new iu(t),r=sS(iu.prototype.request,e);return Wg.extend(r,iu.prototype,e),Wg.extend(r,e),r.create=function(i){return b2(oS(t,i))},r}var Ai=b2(aS);Ai.Axios=iu;Ai.Cancel=Tl();Ai.CancelToken=rS();Ai.isCancel=l2();Ai.VERSION=d2().version;Ai.all=function(e){return Promise.all(e)};Ai.spread=nS();Ai.isAxiosError=iS();Bp.exports=Ai;Bp.exports.default=Ai;var cS=Bp.exports,fS=cS;const j0=wi(fS);var Tu;(function(t){t.TEXT="m.text"})(Tu||(Tu={}));class Fp{constructor(e,r,n,i){this.type=e,this.sender=r,this.content=n,this.timestamp=i}static from(e){if(hS(e))return new Fp(e.content.msgtype,e.sender,e.content.body,e.origin_server_ts)}}const uS=t=>t.type==="m.room.create"&&t.content instanceof Object&&"creator"in t.content,lS=t=>t.type==="m.room.member"&&t.content instanceof Object&&"membership"in t.content&&t.content.membership==="join",v2=t=>t.type==="m.room.message",hS=t=>v2(t)&&t.content instanceof Object&&"msgtype"in t.content&&t.content.msgtype===Tu.TEXT;var xr;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JOINED=1]="JOINED",t[t.INVITED=2]="INVITED",t[t.LEFT=3]="LEFT"})(xr||(xr={}));class Ut{constructor(e,r=xr.UNKNOWN,n=[],i=[]){this.id=e,this.status=r,this.members=n,this.messages=i}static fromSync(e){var r,n,i;if(!e)return[];function s(o,a){return Object.entries(o).map(([c,l])=>a(c,l))}return[...s((r=e.join)!==null&&r!==void 0?r:{},Ut.fromJoined),...s((n=e.invite)!==null&&n!==void 0?n:{},Ut.fromInvited),...s((i=e.leave)!==null&&i!==void 0?i:{},Ut.fromLeft)]}static from(e,r){return typeof e=="string"?new Ut(e,r||xr.UNKNOWN):r!==void 0?new Ut(e.id,r,e.members,e.messages):e}static merge(e,r){return!r||r.id!==e.id?Ut.from(e):new Ut(e.id,e.status,[...r.members,...e.members].filter((n,i,s)=>s.indexOf(n)===i),[...r.messages,...e.messages])}static fromJoined(e,r){const n=[...r.state.events,...r.timeline.events],i=Ut.getMembersFromEvents(n),s=Ut.getMessagesFromEvents(n);return new Ut(e,xr.JOINED,i,s)}static fromInvited(e,r){const n=Ut.getMembersFromEvents(r.invite_state.events);return new Ut(e,xr.INVITED,n)}static fromLeft(e,r){const n=[...r.state.events,...r.timeline.events],i=Ut.getMembersFromEvents(n),s=Ut.getMessagesFromEvents(n);return new Ut(e,xr.LEFT,i,s)}static getMembersFromEvents(e){return Ut.getUniqueEvents(e.filter(r=>uS(r)||lS(r))).map(r=>r.sender).filter((r,n,i)=>i.indexOf(r)===n)}static getMessagesFromEvents(e){return Ut.getUniqueEvents(e.filter(v2)).map(r=>Fp.from(r)).filter(Boolean)}static getUniqueEvents(e){const r={},n=[];return e.forEach((i,s)=>{const o=i.event_id;(o===void 0||!(o in r))&&(o!==void 0&&(r[o]=s),n.push(i))}),n}}var Pf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Xg=["syncToken","rooms"];class dS{constructor(e){this.storage=e,this.state={isRunning:!1,userId:void 0,deviceId:void 0,txnNo:0,accessToken:void 0,syncToken:void 0,pollingTimeout:void 0,pollingRetries:0,rooms:{}},this.onStateChangedListeners=new Map,this.waitReadyPromise=new Promise((r,n)=>Pf(this,void 0,void 0,function*(){try{yield this.initFromStorage(),r()}catch(i){n(i)}}))}get(e){return this.state[e]}getRoom(e){const r=Ut.from(e,xr.UNKNOWN);return this.state.rooms[r.id]||r}update(e){return Pf(this,void 0,void 0,function*(){yield this.waitReady();const r=Object.assign({},this.state);this.setState(e),this.updateStorage(e),this.notifyListeners(r,this.state,e)})}onStateChanged(e,...r){r.length>0?r.forEach(n=>{this.onStateChangedListeners.set(n,e)}):this.onStateChangedListeners.set("all",e)}waitReady(){return Pf(this,void 0,void 0,function*(){return this.waitReadyPromise})}initFromStorage(){return Pf(this,void 0,void 0,function*(){const e=yield this.storage.get(ke.MATRIX_PRESERVED_STATE);this.setState(e)})}prepareData(e){const n=["rooms"].some(i=>e[i]!==void 0)?JSON.parse(JSON.stringify(e)):e;return Object.values(n.rooms||{}).forEach(i=>{i.messages=[]}),n}updateStorage(e){if(Object.entries(e).filter(([n,i])=>Xg.includes(n)&&!!i).length>0){const n={};Xg.forEach(i=>{n[i]=this.state[i]}),this.storage.set(ke.MATRIX_PRESERVED_STATE,this.prepareData(n))}}setState(e){this.state={isRunning:e.isRunning||this.state.isRunning,userId:e.userId||this.state.userId,deviceId:e.deviceId||this.state.deviceId,txnNo:e.txnNo||this.state.txnNo,accessToken:e.accessToken||this.state.accessToken,syncToken:e.syncToken||this.state.syncToken,pollingTimeout:e.pollingTimeout||this.state.pollingTimeout,pollingRetries:e.pollingRetries||this.state.pollingRetries,rooms:this.mergeRooms(this.state.rooms,e.rooms)}}mergeRooms(e,r){if(!r)return e;const n=Array.isArray(r)?r:Object.values(r),i=Object.assign({},e);return n.forEach(s=>{i[s.id]=Ut.merge(s,e[s.id])}),i}notifyListeners(e,r,n){const i=this.onStateChangedListeners.get("all");i&&i(e,r,n),bp(n).filter(s=>n[s]!==void 0).forEach(s=>{const o=this.onStateChangedListeners.get(s);o&&o(e,r,n)})}}var oc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const pS=new on("MatrixHttpClient"),gS="/_matrix/client/r0";class bS{constructor(e){this.baseUrl=e,this.cancelTokenSource=j0.CancelToken.source()}get(e,r,n){return oc(this,void 0,void 0,function*(){return this.send("GET",e,n,r)})}post(e,r,n,i){return oc(this,void 0,void 0,function*(){return this.send("POST",e,n,i,r)})}put(e,r,n,i){return oc(this,void 0,void 0,function*(){return this.send("PUT",e,n,i,r)})}cancelAllRequests(){return oc(this,void 0,void 0,function*(){return this.cancelTokenSource.cancel("Manually cancelled")})}send(e,r,n,i,s){return oc(this,void 0,void 0,function*(){const o=n?this.getHeaders(n):void 0,a=i?this.getParams(i):void 0;let c;try{c=yield j0.request({method:e,url:r,baseURL:this.apiUrl(gS),headers:o,data:s,params:a,cancelToken:this.cancelTokenSource.token})}catch(l){const f=l;throw pS.error("send",f.code,f.message,f.response.data),l.response.data}return c.data})}getHeaders(e){const r={},n=[];if(e.accessToken&&n.push(["Authorization",`Bearer ${e.accessToken}`]),n.length!==0){for(const[i,s]of n)r[i]=s;return r}}getParams(e){if(!e)return;const r=Object.assign(e,{});return bp(r).forEach(n=>r[n]===void 0&&delete r[n]),r}apiUrl(...e){const r=this.baseUrl.endsWith("/")?this.baseUrl.substr(0,this.baseUrl.length-1):this.baseUrl,n=e.map(i=>i.startsWith("/")?i.substr(1):i);return[r,...n].join("/")}}var Nf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class vS{constructor(e){this.httpClient=e}createRoom(e,r={}){return Nf(this,void 0,void 0,function*(){return this.httpClient.post("/createRoom",r,{accessToken:e})})}inviteToRoom(e,r,n){return Nf(this,void 0,void 0,function*(){return n.status!==xr.JOINED&&n.status!==xr.UNKNOWN?Promise.reject(`User is not a member of room ${n.id}.`):this.httpClient.post(`/rooms/${encodeURIComponent(n.id)}/invite`,{user_id:r},{accessToken:e})})}joinRoom(e,r){return Nf(this,void 0,void 0,function*(){return r.status===xr.JOINED?Promise.resolve({room_id:r.id}):this.httpClient.post(`/rooms/${encodeURIComponent(r.id)}/join`,{},{accessToken:e})})}getJoinedRooms(e){return Nf(this,void 0,void 0,function*(){return this.httpClient.get("/joined_rooms",void 0,{accessToken:e})})}}var mS=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class yS{constructor(e){this.httpClient=e}login(e,r,n){return mS(this,void 0,void 0,function*(){return this.httpClient.post("/login",{type:"m.login.password",identifier:{type:"m.id.user",user:e},password:r,device_id:n})})}}var pd=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class ES{constructor(e){this.httpClient=e,this.cachedPromises=new Map}sync(e,r){return pd(this,void 0,void 0,function*(){return this.withCache("sync",()=>this.httpClient.get("/sync",{timeout:r?r.pollingTimeout:void 0,since:r?r.syncToken:void 0},{accessToken:e}))})}sendMessage(e,r,n,i){return pd(this,void 0,void 0,function*(){return new Promise((s,o)=>this.scheduleEvent({accessToken:e,roomId:r,type:"m.room.message",content:n,txnId:i,onSuccess:s,onError:o}))})}scheduleEvent(e){this.sendEvent(e)}sendEvent(e){return pd(this,void 0,void 0,function*(){const{roomId:r,type:n,txnId:i,content:s,accessToken:o}=e;try{const a=yield this.httpClient.put(`/rooms/${encodeURIComponent(r)}/send/${n}/${encodeURIComponent(i)}`,s,{accessToken:o});e.onSuccess(a)}catch(a){e.onError(a)}})}withCache(e,r){let n=this.cachedPromises.get(e);return n||(n=r().finally(()=>{this.cachedPromises.delete(e)}),this.cachedPromises.set(e,n)),n}}class wS{constructor(){this.events={}}on(e,r){return typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(r),()=>this.removeListener(e,r)}removeListener(e,r){if(typeof this.events[e]!="object")return;if(!r){this.events[e]=[];return}const n=this.events[e].indexOf(r);n>-1&&this.events[e].splice(n,1)}removeAllListeners(){Object.keys(this.events).forEach(e=>this.events[e].splice(0,this.events[e].length))}emit(e,...r){typeof this.events[e]=="object"&&[...this.events[e]].forEach(n=>n.apply(this,r))}once(e,r){const n=this.on(e,(...i)=>{n(),r.apply(this,i)});return n}}var zr;(function(t){t.INVITE="invite",t.MESSAGE="message"})(zr||(zr={}));class _S extends wS{constructor(){super(...arguments),this.eventEmitProviders=new Map([[zr.INVITE,()=>[this.isInvite,this.emitInvite.bind(this)]],[zr.MESSAGE,()=>[this.isMessage,this.emitMessage.bind(this)]]])}onStateChanged(e,r,n){for(const i of bp(zr))this.emitIfEvent(zr[i],n)}emitIfEvent(e,r){const n=this.eventEmitProviders.get(e);if(n){const[i,s]=n();i(r)&&s(e,r)}}emitClientEvent(e,r,n){this.emit(e,{type:e,content:r,timestamp:n})}isInvite(e){return e.rooms?e.rooms.some(r=>r.status===xr.INVITED):!1}emitInvite(e,r){r.rooms.filter(n=>n.status===xr.INVITED).map(n=>[n.id,n.members]).forEach(([n,i])=>{this.emitClientEvent(e,{roomId:n,members:i})})}isMessage(e){return e.rooms?e.rooms.some(r=>r.messages.length>0):!1}emitMessage(e,r){r.rooms.filter(n=>n.messages.length>0).map(n=>n.messages.map(i=>[n.id,i,i.timestamp])).reduce((n,i)=>n.concat(i),[]).forEach(([n,i,s])=>{this.emitClientEvent(e,{roomId:n,message:i},s)})}}var Pt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const gd=new on("MatrixClient"),AS=3,xS=5e3;class Kp{constructor(e,r,n,i,s,o){this.store=e,this.eventEmitter=r,this.userService=n,this.roomService=i,this.eventService=s,this.httpClient=o,this.isActive=!0,this._isReady=new er,this.store.onStateChanged((a,c,l)=>{this.eventEmitter.onStateChanged(a,c,l)},"rooms")}static create(e){const r=new dS(e.storage),n=new _S,i=new bS(e.baseUrl),s=new yS(i),o=new vS(i),a=new ES(i);return new Kp(r,n,s,o,a,i)}get joinedRooms(){return new Promise(e=>Pt(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===xr.JOINED))}))}get invitedRooms(){return new Promise(e=>Pt(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===xr.INVITED))}))}get leftRooms(){return new Promise(e=>Pt(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===xr.LEFT))}))}start(e){return Pt(this,void 0,void 0,function*(){const r=yield this.userService.login(e.id,e.password,e.deviceId);yield this.store.update({accessToken:r.access_token});const n=new Promise((i,s)=>Pt(this,void 0,void 0,function*(){yield this.poll(0,o=>Pt(this,void 0,void 0,function*(){this.store.get("isRunning")||i(),yield this.store.update({isRunning:!0,syncToken:o.next_batch,pollingTimeout:3e4,pollingRetries:0,rooms:Ut.fromSync(o.rooms)})}),o=>Pt(this,void 0,void 0,function*(){this.store.get("isRunning")||s(o),yield this.store.update({isRunning:!1,pollingRetries:this.store.get("pollingRetries")+1})}))}));return n.then(()=>{this._isReady.resolve()}).catch(console.error),n})}isConnected(){return Pt(this,void 0,void 0,function*(){return this._isReady.promise})}stop(){return Pt(this,void 0,void 0,function*(){return gd.log("MATRIX CLIENT STOPPED"),this.isActive=!1,this._isReady=new er,this.httpClient.cancelAllRequests()})}subscribe(e,r){this.eventEmitter.on(e,r)}unsubscribe(e,r){r&&this.eventEmitter.removeListener(e,r)}unsubscribeAll(e){this.eventEmitter.removeListener(e)}getRoomById(e){return Pt(this,void 0,void 0,function*(){return yield this.isConnected(),this.store.getRoom(e)})}createTrustedPrivateRoom(...e){return Pt(this,void 0,void 0,function*(){return yield this.isConnected(),this.requiresAuthorization("createRoom",r=>Pt(this,void 0,void 0,function*(){return(yield this.roomService.createRoom(r,{room_version:"5",invite:e,preset:"public_chat",is_direct:!0})).room_id}))})}inviteToRooms(e,...r){return Pt(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("invite",n=>Promise.all(r.map(i=>{const s=this.store.getRoom(i);this.roomService.inviteToRoom(n,e,s).catch(o=>gd.warn("inviteToRooms",o))})))})}joinRooms(...e){return Pt(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("join",r=>Promise.all(e.map(n=>{const i=this.store.getRoom(n);return this.roomService.joinRoom(r,i)})))})}sendTextMessage(e,r){return Pt(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("send",n=>Pt(this,void 0,void 0,function*(){const i=yield this.createTxnId();return this.eventService.sendMessage(n,e,{msgtype:"m.text",body:r},i)}))})}poll(e,r,n){return Pt(this,void 0,void 0,function*(){const i=this.store,s=this.sync.bind(this),o=(a,c)=>Pt(this,void 0,void 0,function*(){let l=0;try{const f=yield s();r(f)}catch(f){n(f),l=i.get("pollingRetries"),this.isActive&&gd.log(`Retry syncing... ${l} retries so far`)}finally{this.isActive?setTimeout(()=>Pt(this,void 0,void 0,function*(){yield o(a,c)}),l>AS?xS+e:e):c(new Error("Syncing stopped manually."))}});return new Promise(o)})}sync(){return Pt(this,void 0,void 0,function*(){return this.requiresAuthorization("sync",e=>Pt(this,void 0,void 0,function*(){return this.eventService.sync(e,{pollingTimeout:this.store.get("pollingTimeout"),syncToken:this.store.get("syncToken")})}))})}requiresAuthorization(e,r){return Pt(this,void 0,void 0,function*(){const n=this.store.get("accessToken");return n?r(n):Promise.reject(`${e} requires authorization but no access token has been provided.`)})}createTxnId(){return Pt(this,void 0,void 0,function*(){const e=new Date().getTime(),r=this.store.get("txnNo");return yield this.store.update({txnNo:r+1}),`m${e}.${r}`})}}var it=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Oe=new on("P2PCommunicationClient"),Jg={[U0.EUROPE_WEST]:["beacon-node-1.diamond.papers.tech","beacon-node-1.sky.papers.tech","beacon-node-2.sky.papers.tech","beacon-node-1.hope.papers.tech","beacon-node-1.hope-2.papers.tech","beacon-node-1.hope-3.papers.tech","beacon-node-1.hope-4.papers.tech","beacon-node-1.hope-5.papers.tech"]};class SS extends i2{constructor(e,r,n,i,s,o,a){super(r),this.name=e,this.replicationCount=n,this.storage=i,this.iconUrl=o,this.appUrl=a,this.client=new er,this.activeListeners=new Map,this.ignoredRooms=[],this.loginCounter=0,Oe.log("constructor","P2PCommunicationClient created"),this.ENABLED_RELAY_SERVERS=Jg,s&&(this.ENABLED_RELAY_SERVERS=Object.assign(Object.assign({},Jg),s))}getPairingRequestInfo(){return it(this,void 0,void 0,function*(){const e={id:yield as(),type:"p2p-pairing-request",name:this.name,version:Zy,publicKey:yield this.getPublicKey(),relayServer:(yield this.getRelayServer()).server};return this.iconUrl&&(e.icon=this.iconUrl),this.appUrl&&(e.appUrl=this.appUrl),e})}getPairingResponseInfo(e){return it(this,void 0,void 0,function*(){const r={id:e.id,type:"p2p-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey(),relayServer:(yield this.getRelayServer()).server};return this.iconUrl&&(r.icon=this.iconUrl),this.appUrl&&(r.appUrl=this.appUrl),r})}findBestRegion(){return it(this,void 0,void 0,function*(){if(this.selectedRegion)return this.selectedRegion;const e=Object.keys(this.ENABLED_RELAY_SERVERS),r=[];e.forEach(i=>{var s;const o=(s=this.ENABLED_RELAY_SERVERS[i])!==null&&s!==void 0?s:[],a=Math.floor(Math.random()*o.length);r.push(this.getBeaconInfo(o[a]).then(c=>({region:i,server:o[a],response:c})).catch(c=>new Promise((l,f)=>{setTimeout(()=>f(c),2e3)})))});const n=yield Promise.race(r);return this.selectedRegion=n.region,n.region})}getRelayServer(){return it(this,void 0,void 0,function*(){if(this.relayServer){const s=yield this.relayServer.promise;if(Date.now()-s.localTimestamp<60*1e3)return{server:s.server,timestamp:s.timestamp};const o=yield this.getBeaconInfo(s.server);return this.relayServer.resolve({server:s.server,timestamp:o.timestamp,localTimestamp:new Date().getTime()}),{server:s.server,timestamp:o.timestamp}}else this.relayServer=new er;const e=yield this.storage.get(ke.MATRIX_SELECTED_NODE);if(e&&e.length>0){const s=yield this.getBeaconInfo(e);return this.relayServer.resolve({server:e,timestamp:s.timestamp,localTimestamp:new Date().getTime()}),{server:e,timestamp:s.timestamp}}const r=yield this.findBestRegion(),n=this.ENABLED_RELAY_SERVERS[r];if(!n)throw new Error(`No servers found for region ${r}`);const i=[...n];for(;i.length>0;){const s=Math.floor(Math.random()*i.length),o=i[s];try{const a=yield this.getBeaconInfo(o);return this.storage.set(ke.MATRIX_SELECTED_NODE,o).catch(c=>Oe.log(c)),this.relayServer.resolve({server:o,timestamp:a.timestamp,localTimestamp:new Date().getTime()}),{server:o,timestamp:a.timestamp}}catch{Oe.log(`Ignoring server "${o}", trying another one...`),i.splice(s,1)}}throw this.relayServer.reject("No matrix server reachable!"),new Error("No matrix server reachable!")})}getBeaconInfo(e){return it(this,void 0,void 0,function*(){return j0.get(`https://${e}/_synapse/client/beacon/info`).then(r=>({region:r.data.region,known_servers:r.data.known_servers,timestamp:Math.floor(r.data.timestamp)}))})}tryJoinRooms(e,r=1){return it(this,void 0,void 0,function*(){try{yield(yield this.client.promise).joinRooms(e)}catch(n){r<=10&&n.errcode==="M_FORBIDDEN"?(Oe.log("Retrying to join...",n),setTimeout(()=>it(this,void 0,void 0,function*(){yield this.tryJoinRooms(e,r+1)}),200)):Oe.log(`Failed to join after ${r} tries.`,n)}})}start(){var e,r;return it(this,void 0,void 0,function*(){Oe.log("start","starting client"),Oe.log("start","connecting to server");const n=yield this.getRelayServer(),i=Kp.create({baseUrl:`https://${n.server}`,storage:this.storage});if(this.initialListener=f=>it(this,void 0,void 0,function*(){this.initialEvent&&this.initialEvent.timestamp&&f&&f.timestamp?this.initialEvent.timestamp<f.timestamp&&(this.initialEvent=f):this.initialEvent=f}),i.subscribe(zr.MESSAGE,this.initialListener),i.subscribe(zr.INVITE,f=>it(this,void 0,void 0,function*(){let h;f.content.members.length===1&&(h=f.content.members[0]),yield this.tryJoinRooms(f.content.roomId),h&&(yield this.updateRelayServer(h),yield this.updatePeerRoom(h,f.content.roomId))})),!n.timestamp)throw new Error("No timestamp received from relay server");const s=Math.floor(n.timestamp),o=`login:${Math.floor(s/(5*60))}`;Oe.log("start",`login ${o}, ${yield this.getPublicKeyHash()} on ${n.server}`);const a=vn.hash(Hs(o),32),c=(e=this.keyPair.secretKey)!==null&&e!==void 0?e:this.keyPair.privateKey,l=Xr.sign(c,a);try{yield i.start({id:yield this.getPublicKeyHash(),password:`ed:${os(l)}:${yield this.getPublicKey()}`,deviceId:os(this.keyPair.publicKey)})}catch{if(Oe.error("start","Could not log in, retrying"),yield this.reset(),!this.selectedRegion)throw new Error("No region selected.");if(this.loginCounter<=((r=this.ENABLED_RELAY_SERVERS[this.selectedRegion])!==null&&r!==void 0?r:[]).length){this.loginCounter++,this.start();return}else throw Oe.error("start","Tried to log in to every known beacon node, but no login was successful."),new Error("Could not connect to any beacon nodes. Try again later.")}Oe.log("start","login successful, client is ready"),this.client.resolve(i)})}stop(){return it(this,void 0,void 0,function*(){Oe.log("stop","stopping client"),this.client.isResolved()&&(yield(yield this.client.promise).stop().catch(e=>Oe.error(e))),yield this.reset()})}reset(){return it(this,void 0,void 0,function*(){Oe.log("reset","resetting connection"),yield this.storage.delete(ke.MATRIX_PEER_ROOM_IDS).catch(e=>Oe.log(e)),yield this.storage.delete(ke.MATRIX_PRESERVED_STATE).catch(e=>Oe.log(e)),yield this.storage.delete(ke.MATRIX_SELECTED_NODE).catch(e=>Oe.log(e)),this.relayServer=void 0,this.client=new er,this.initialEvent=void 0,this.initialListener=void 0})}listenForEncryptedMessage(e,r){return it(this,void 0,void 0,function*(){if(this.activeListeners.has(e))return;Oe.log("listenForEncryptedMessage",`start listening for encrypted messages from publicKey ${e}`);const n=yield this.createCryptoBoxServer(e,this.keyPair),i=a=>it(this,void 0,void 0,function*(){if(this.isTextMessage(a.content)&&(yield this.isSender(a,e))){let c;yield this.updateRelayServer(a.content.message.sender),yield this.updatePeerRoom(a.content.message.sender,a.content.roomId);try{c=te.from(a.content.message.content,"hex")}catch{}if(c&&c.length>=Au+xu)try{const l=yield Yy(c,n.receive);Oe.log("listenForEncryptedMessage",`received a message from ${e}`,l),r(l)}catch{}}});this.activeListeners.set(e,i),(yield this.client.promise).subscribe(zr.MESSAGE,i);const s=this.initialEvent;s&&s.timestamp&&new Date().getTime()-s.timestamp<5*60*1e3?(Oe.log("listenForEncryptedMessage","Handling previous event"),yield i(s)):Oe.log("listenForEncryptedMessage","No previous event found");const o=this.initialListener;o&&(yield this.client.promise).unsubscribe(zr.MESSAGE,o),this.initialListener=void 0,this.initialEvent=void 0})}unsubscribeFromEncryptedMessage(e){return it(this,void 0,void 0,function*(){const r=this.activeListeners.get(e);r&&((yield this.client.promise).unsubscribe(zr.MESSAGE,r),this.activeListeners.delete(e))})}unsubscribeFromEncryptedMessages(){return it(this,void 0,void 0,function*(){(yield this.client.promise).unsubscribeAll(zr.MESSAGE),this.activeListeners.clear()})}sendMessage(e,r){return it(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxClient(r.publicKey,this.keyPair),i=yield Zo(te.from(r.publicKey,"hex")),s=Eg(i,r.relayServer),o=yield this.getRelevantRoom(s);yield this.waitForJoin(o);const a=yield Jy(e,n.send);Oe.log("sendMessage","sending encrypted message",r.publicKey,o,e),(yield this.client.promise).sendTextMessage(o,a).catch(c=>it(this,void 0,void 0,function*(){if(c.errcode==="M_FORBIDDEN"){Oe.log("sendMessage","M_FORBIDDEN",o,c),yield this.deleteRoomIdFromRooms(o);const l=yield this.getRelevantRoom(s);Oe.log("sendMessage","Old room deleted, new room created",l),(yield this.client.promise).sendTextMessage(l,a).catch(f=>it(this,void 0,void 0,function*(){Oe.log("sendMessage","inner error",l,f)}))}else Oe.log("sendMessage","unexpected error",c)}))})}updatePeerRoom(e,r){return it(this,void 0,void 0,function*(){Oe.log("updatePeerRoom",e,r);const n=e.split(":");if(n.length<2||!n[0].startsWith("@"))throw new Error("Invalid sender");const i=yield this.storage.get(ke.MATRIX_PEER_ROOM_IDS),s=i[e];s===r&&Oe.debug("updatePeerRoom","rooms are the same, not updating"),Oe.debug("updatePeerRoom","current room",s,"new room",r),s&&s[1]&&(Oe.log("updatePeerRoom",`adding room "${s[1]}" to ignored array`),this.ignoredRooms.push(s[1])),i[e]=r,yield this.storage.set(ke.MATRIX_PEER_ROOM_IDS,i)})}deleteRoomIdFromRooms(e){return it(this,void 0,void 0,function*(){const r=yield this.storage.get(ke.MATRIX_PEER_ROOM_IDS),n=Object.entries(r).filter(i=>i[1]!==e).reduce((i,s)=>Object.assign(Object.assign({},i),{[s[0]]:s[1]}),{});yield this.storage.set(ke.MATRIX_PEER_ROOM_IDS,n),this.ignoredRooms.push(e)})}listenForChannelOpening(e){return it(this,void 0,void 0,function*(){Oe.debug("listenForChannelOpening"),(yield this.client.promise).subscribe(zr.MESSAGE,r=>it(this,void 0,void 0,function*(){if(this.isTextMessage(r.content)&&(yield this.isChannelOpenMessage(r.content))){Oe.log("listenForChannelOpening","channel opening received, trying to decrypt",JSON.stringify(r)),yield this.updateRelayServer(r.content.message.sender),yield this.updatePeerRoom(r.content.message.sender,r.content.roomId);const n=r.content.message.content.split(":"),i=te.from(n[n.length-1],"hex");if(i.length>=Au+xu)try{const s=JSON.parse(yield Qy(i,this.keyPair.publicKey,this.keyPair.secretKey));Oe.log("listenForChannelOpening","channel opening received and decrypted",JSON.stringify(s)),e(Object.assign(Object.assign({},s),{senderId:yield va(s.publicKey)}))}catch{}}}))})}waitForJoin(e,r=0){return it(this,void 0,void 0,function*(){const n=yield(yield this.client.promise).getRoomById(e);if(Oe.log("waitForJoin",`Currently ${n.members.length} members, we need at least 2`),!(n.members.length>=2||n.members.length===0)){if(r<=200)return Oe.log(`Waiting for join... Try: ${r}`),new Promise(i=>{setTimeout(()=>it(this,void 0,void 0,function*(){i(this.waitForJoin(e,r+1))}),100*(r>50?10:1))});throw new Error(`No one joined after ${r} tries.`)}})}sendPairingResponse(e){return it(this,void 0,void 0,function*(){Oe.log("sendPairingResponse");const r=yield Zo(te.from(e.publicKey,"hex")),n=Eg(r,e.relayServer),i=yield(yield this.client.promise).createTrustedPrivateRoom(n);Oe.debug("sendPairingResponse",`Connecting to room "${i}"`),yield this.updatePeerRoom(n,i),yield this.waitForJoin(i),Oe.debug("sendPairingResponse","Successfully joined room.");const s=typeof e.version>"u"?yield this.getPublicKey():JSON.stringify(yield this.getPairingResponseInfo(e));Oe.debug("sendPairingResponse","Sending pairing response",s);const o=yield this.encryptMessageAsymmetric(e.publicKey,s),a=["@channel-open",n,o].join(":");(yield this.client.promise).sendTextMessage(i,a).catch(c=>it(this,void 0,void 0,function*(){if(c.errcode==="M_FORBIDDEN"){Oe.log("sendPairingResponse","M_FORBIDDEN",i,c),yield this.deleteRoomIdFromRooms(i);const l=yield this.getRelevantRoom(n);Oe.log("sendPairingResponse","Old room deleted, new room created",l),(yield this.client.promise).sendTextMessage(l,a).catch(f=>it(this,void 0,void 0,function*(){Oe.log("sendPairingResponse","inner error",l,f)}))}else Oe.log("sendPairingResponse","unexpected error",c)}))})}isTextMessage(e){return e.message.type===Tu.TEXT}updateRelayServer(e){return it(this,void 0,void 0,function*(){Oe.log("updateRelayServer",e);const r=e.split(":");if(r.length<2||!r[0].startsWith("@"))throw new Error("Invalid sender");const n=r.shift(),i=r.join(":"),s=localStorage.getItem("beacon:communication-peers-dapp")?new Ru(this.storage,ke.TRANSPORT_P2P_PEERS_DAPP):new Ru(this.storage,ke.TRANSPORT_P2P_PEERS_WALLET),a=(yield s.getPeers()).map(c=>it(this,void 0,void 0,function*(){`@${yield Zo(te.from(c.publicKey,"hex"))}`===n&&c.relayServer!==i&&(c.relayServer=i,yield s.addPeer(c))}));yield Promise.all(a)})}isChannelOpenMessage(e){return it(this,void 0,void 0,function*(){return e.message.content.startsWith(`@channel-open:@${yield Zo(te.from(yield this.getPublicKey(),"hex"))}`)})}isSender(e,r){return it(this,void 0,void 0,function*(){return e.content.message.sender.startsWith(`@${yield Zo(te.from(r,"hex"))}`)})}getRelevantRoom(e){return it(this,void 0,void 0,function*(){const r=yield this.storage.get(ke.MATRIX_PEER_ROOM_IDS);let n=r[e];if(!n){Oe.log("getRelevantRoom",`No room found for peer ${e}, checking joined ones.`);const i=yield this.getRelevantJoinedRoom(e);n=i.id,r[e]=i.id,yield this.storage.set(ke.MATRIX_PEER_ROOM_IDS,r)}return Oe.log("getRelevantRoom",`Using room ${n}`),n})}getRelevantJoinedRoom(e){return it(this,void 0,void 0,function*(){const r=yield(yield this.client.promise).joinedRooms;Oe.log("checking joined rooms",r,e);const n=r.filter(s=>!this.ignoredRooms.some(o=>s.id===o)).filter(s=>s.members.some(o=>o===e));let i;if(n.length===0||this.ignoredRooms.length>0){Oe.log("getRelevantJoinedRoom","no relevant rooms found, creating new one");const s=yield(yield this.client.promise).createTrustedPrivateRoom(e);i=yield(yield this.client.promise).getRoomById(s),Oe.log("getRelevantJoinedRoom",`waiting for other party to join room: ${i.id}`),yield this.waitForJoin(s),Oe.log("getRelevantJoinedRoom",`new room created and peer invited: ${i.id}`)}else i=n[0],Oe.log("getRelevantJoinedRoom",`channel already open, reusing room ${i.id}`);return i})}}var oo=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const bd=new on("P2PTransport");class RS extends r2{constructor(e,r,n,i,s,o,a){super(e,new SS(e,r,1,n,i,o,a),new Ru(n,s)),this.type=Ro.P2P}static isAvailable(){return oo(this,void 0,void 0,function*(){return Promise.resolve(!0)})}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return oo(this,void 0,void 0,function*(){if(this._isConnected!==bn.NOT_CONNECTED)return;bd.log("connect"),this._isConnected=bn.CONNECTING,yield this.client.start();const r=yield this.getPeers();if(r.length>0){bd.log("connect",`connecting to ${r.length} peers`);const n=r.map(i=>oo(this,void 0,void 0,function*(){return this.listen(i.publicKey)}));Promise.all(n).catch(i=>bd.error("connect",i))}return yield this.startOpenChannelListener(),e.connect.call(this)})}disconnect(){const e=Object.create(null,{disconnect:{get:()=>super.disconnect}});return oo(this,void 0,void 0,function*(){return yield this.client.stop(),e.disconnect.call(this)})}startOpenChannelListener(){return oo(this,void 0,void 0,function*(){})}getPairingRequestInfo(){return oo(this,void 0,void 0,function*(){return this.client.getPairingRequestInfo()})}listen(e){return oo(this,void 0,void 0,function*(){yield this.client.listenForEncryptedMessage(e,r=>{const n={origin:Nn.P2P,id:e};this.notifyListeners(r,n).catch(i=>{throw i})}).catch(r=>{throw r})})}}var Ii=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class TS extends g8{constructor(){super(...arguments),this.activeListeners=new Map}init(){return Ii(this,void 0,void 0,function*(){this.subscribeToMessages().catch(console.error)})}listenForEncryptedMessage(e,r){return Ii(this,void 0,void 0,function*(){if(this.activeListeners.has(e))return;const n=(i,s)=>Ii(this,void 0,void 0,function*(){try{const o=yield this.decryptMessage(e,i.encryptedPayload);r(o,s)}catch{}});this.activeListeners.set(e,n)})}sendMessage(e,r){return Ii(this,void 0,void 0,function*(){const n=yield this.encryptMessage(r.publicKey,e),i=r==null?void 0:r.extensionId,s={target:Yi.EXTENSION,encryptedPayload:n,targetId:i};at.postMessage(s,at.location.origin)})}listenForChannelOpening(e){return Ii(this,void 0,void 0,function*(){const r=n=>Ii(this,void 0,void 0,function*(){var i,s;if(n.source!==at||n.origin!==at.location.origin)return;const o=(i=n==null?void 0:n.data)===null||i===void 0?void 0:i.message;if(o&&o.target===Yi.PAGE&&(yield this.isChannelOpenMessage(o))){const a=te.from(o.payload,"hex");if(a.length>=Au+xu)try{const c=JSON.parse(yield Qy(a,this.keyPair.publicKey,this.keyPair.secretKey));e(Object.assign(Object.assign({},c),{senderId:yield va(c.publicKey),extensionId:(s=n==null?void 0:n.data)===null||s===void 0?void 0:s.sender.id}))}catch{}}});at.addEventListener("message",r)})}sendPairingRequest(e){return Ii(this,void 0,void 0,function*(){const r={target:Yi.EXTENSION,payload:yield new To().serialize(yield this.getPairingRequestInfo()),targetId:e};at.postMessage(r,at.location.origin)})}isChannelOpenMessage(e){return Ii(this,void 0,void 0,function*(){return typeof e=="object"&&e.hasOwnProperty("payload")})}subscribeToMessages(){return Ii(this,void 0,void 0,function*(){at.addEventListener("message",e=>{if(!(e.source!==at||e.origin!==at.location.origin)&&typeof e=="object"&&e){const r=e.data;r.message&&r.message.target===Yi.PAGE&&this.activeListeners.forEach(n=>{n(r.message,{origin:Nn.EXTENSION,id:r.sender.id||""})})}})})}}var ao=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const ac=new on("PostMessageTransport");let Yg=!1,cc,ti;const OS=t=>{ti||(ti=[]),ti.some(e=>e.id===t.id)||(ti.push(t),at.postMessage("extensionsUpdated",at.location.origin))};class Qc extends r2{constructor(e,r,n,i){super(e,new TS(e,r),new Ru(n,i)),this.type=Ro.POST_MESSAGE}static isAvailable(){return ao(this,void 0,void 0,function*(){return new Promise(e=>{const r=i=>{const s=i.data;s&&s.payload==="pong"&&(e(!0),at.removeEventListener("message",r))};at.addEventListener("message",r);const n={target:Yi.EXTENSION,payload:"ping"};at.postMessage(n,at.location.origin)})})}static getAvailableExtensions(){return ao(this,void 0,void 0,function*(){return cc||ti||(ti=[],cc=new Promise(e=>{Qc.listenForExtensions(),setTimeout(()=>{e(ti??[])},1e3)}).finally(()=>{cc=void 0}),cc)})}static listenForExtensions(){if(Yg)return;const e=n=>{if(n.source!==at||n.origin!==at.location.origin)return;const i=n.data,s=i.sender;i&&i.payload==="pong"&&s&&(ac.log("getAvailableExtensions",`extension "${s.name}" is available`,s),OS(s))};at.addEventListener("message",e);const r={target:Yi.EXTENSION,payload:"ping"};at.postMessage(r,at.location.origin),Yg=!0}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return ao(this,void 0,void 0,function*(){if(ac.log("connect"),this._isConnected!==bn.NOT_CONNECTED)return;this._isConnected=bn.CONNECTING;const r=yield this.getPeers();if(r.length>0){ac.log("connect",`connecting to ${r.length} peers`);const n=r.map(i=>ao(this,void 0,void 0,function*(){return this.listen(i.publicKey)}));Promise.all(n).catch(i=>ac.error("connect",i))}yield this.startOpenChannelListener(),yield e.connect.call(this)})}startOpenChannelListener(){return ao(this,void 0,void 0,function*(){})}getPairingRequestInfo(){return ao(this,void 0,void 0,function*(){return this.client.getPairingRequestInfo()})}listen(e){return ao(this,void 0,void 0,function*(){ac.log("listen",e),yield this.client.listenForEncryptedMessage(e,(r,n)=>{const i={origin:Nn.EXTENSION,id:n.id};this.notifyListeners(r,i).catch(s=>{throw s})}).catch(r=>{throw r})})}}const Qg={default:{css:`:host {
  --animation-duration: 300ms;
  all: initial;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

.beacon-modal__wrapper {
  position: relative;
  top: 0;
  display: inline-block;
  z-index: 2147483000;
  max-width: 500px;
  width: 80%;
  padding: 24px;
}


.theme__light .beacon-modal__base,
.theme__light .beacon-modal__close__wrapper {
  background: #fff;
}

.theme__dark .beacon-modal__base,
.theme__dark .beacon-modal__close__wrapper {
  background: #27334c;
}

.beacon-modal__base,
.beacon-modal__close__wrapper {
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);
}

.beacon-modal__base {
  margin: 0 auto;
  border-radius: 32px;
  overflow: hidden;
}

.beacon-modal__header {
  padding: 16px 0;
  width: 100%;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
}

.beacon-modal__headerLogo {
  width: 100%;
  max-width: 320px;
  margin: 20px auto;
  height: 100%;
}

a,
button {
  cursor: pointer;
}

.beacon-modal__close__wrapper {
  position: absolute;
  top: 44px;
  right: 24px;
  z-index: 10000;
  cursor: pointer;
  border-radius: 100%;
}

.beacon-modal__close__icon {
  width: 16px;
  height: 16px;
  position: relative;
  top: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
  margin: 8px;
}

.beacon-modal__close__line1 {
  position: absolute;
  width: 90%;
}

.beacon-modal__close__line2 {
  position: absolute;
  width: 90%;
  transform: rotate(90deg);
}

.theme__light .beacon-modal__close__line2,
.theme__light .beacon-modal__close__line1 {
  border: 1px solid #000;
}

.theme__dark .beacon-modal__close__line2,
.theme__dark .beacon-modal__close__line1 {
  border: 1px solid #fff;
}

.beacon-alert__base {
  position: fixed;
  overflow-y: scroll;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2147482999;
  background-color: rgb(17 17 17 / 0.84);
  text-align: center;
  -ms-overflow-style: none;
  scrollbar-width: none;
  font-family: Roboto, Helvetica, sans-serif;
}

.beacon-alert__base::-webkit-scrollbar {
  display: none;
}

.beacon-alert__title {
  text-align: center;
}

.beacon-alert__text,
.beacon-alert__title {
  margin: 0 auto;
  padding: 0 0 24px;
}

.margin__bottom {
  margin-bottom: 16px;
}

.beacon-alert__title {
  font-size: 18px;
}

.theme__light .beacon-alert__title {
  color: #3b3d40;
}

.theme__dark .beacon-alert__title,
.theme__dark .beacon-alert__text {
  color: #7c99d6;
}

.beacon-alert__text {
  color: #000;
  font-size: 14px;
}

.beacon-modal__button,
.beacon-modal__button--outline {
  height: 36px;
  font-size: 14px;
  letter-spacing: 0.84px;
  margin-bottom: 4px;
  margin-inline-end: 2px;
  margin-inline-start: 2px;
  margin-left: 2px;
  margin-right: 2px;
  margin-top: 4px;
  padding-inline-end: 15.4px;
  padding-inline-start: 15.4px;
  padding-left: 15.4px;
  padding-right: 15.4px;
  overflow-wrap: break-word;
  pointer-events: auto;
  text-align: center;
  border-radius: 4px;
  border: 2px solid #3880ff;
}

.beacon-modal__button {
  background: #3880ff;
  color: #fff;
}

.beacon-modal__button--outline {
  background: #fff;
  color: #444444;
  border: 1px solid #444444;
}

.beacon-alert__image {
  width: 200px;
  height: 200px;
  box-sizing: border-box;
  box-shadow: 0 10px 20px 0 rgba(17, 17, 17, 0.12);
  border: 1px solid rgba(17, 17, 17, 0.04);
  border-radius: 16px;
}
.connect__btn {
  margin: 24px 0;
  width: 100%;
}

#beacon-modal__content {
  padding: 24px;
}

#beacon-switch {
  margin-top: 24px;
}

#beacon-title {
  margin: 0 0 24px;
}

a {
  text-decoration: none;
}

pre {
  white-space: pre-wrap; /* css-3 */
  white-space: -moz-pre-wrap; /* Mozilla, since 1999 */
  white-space: -pre-wrap; /* Opera 4-6 */
  white-space: -o-pre-wrap; /* Opera 7 */
  word-wrap: break-word; /* Internet Explorer 5.5+ */
  padding: 16px;
  background: #ececec;
  line-height: 1.25rem;
}
`},pair:{css:`#beacon-main-text {
  display: initial;
}
.beacon-selection__container {
  padding: 16px 16px 0;
}
.beacon-selection__list {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  text-decoration: none;
  padding-bottom: 12px;
  align-items: center;
}
.beacon-list__title {
  text-align: left;
  font-size: 12px;
}
.beacon-list__wrapper:nth-child(-n + 3) {
  padding: 0 0 1rem;
}
.theme__light .beacon-list__title {
  color: #7c828b;
}
.theme__dark .beacon-list__title,
.theme__dark #beacon--disclaimer {
  color: #7c99d6;
}

.beacon-selection__name {
  font-size: 1rem;
  font-weight: 600;
  text-align: left;
}
.theme__light .beacon-selection__name,
.theme__light .beacon--selection__name__lg {
  color: #3b3d40;
}
.theme__dark .beacon-selection__name,
.theme__dark .beacon--selection__name__lg {
  color: #6183ff;
}
.beacon-selection__img {
  width: 48px;
  height: 48px;
  box-shadow: 0 4px 12px 0 rgba(17, 17, 17, 0.24);
  border-radius: 16px;
  background-color: #fff;
}
.beacon--selection__name__lg {
  font-size: 1.5rem;
  font-weight: 600;
  text-align: center;
  padding: 1rem 0;
}
.beacon--selected__container {
  padding: 2rem 0 0;
}
#beacon--qr__copy__container {
  height: 0;
}
#beacon--qr__copy {
  display: none;
  position: relative;
  margin-top: auto;
  margin-left: auto;
  margin-right: auto;
}
#beacon--qr__container {
  margin-left: auto;
  margin-right: auto;
}
#beacon--qr__container:hover #beacon--qr__copy {
  display: block;
}

.disabled p {
  text-align: left;
  margin: 0;
  font-size: 10px;
  font-weight: 300;
  opacity: 0.48;
}

#beacon--disclaimer {
  text-align: left;
  padding-top: 24px;
  font-size: 0.875rem;
}
.progress-line,
.progress-line:before {
  height: 3px;
  width: -webkit-fill-available;
  margin-left: -24px;
  margin-right: -24px;
}
.progress-line {
  background-color: #a7c4f7;
  display: -webkit-flex;
  display: flex;
}
.progress-line:before {
  background-color: #3880ff;
  content: '';
  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
@-webkit-keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
@keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
`}},Ou=(t,e)=>e.test(t.navigator.userAgent),IS=(t,e)=>t.matchMedia(e).matches,G0=t=>IS(t,"(any-pointer:coarse)"),PS=t=>!!(Ou(t,/iPad/i)||Ou(t,/Macintosh/i)&&G0(t)),m2=t=>Ou(t,/iPhone|iPod/i)||PS(t),y2=t=>Ou(t,/android|sink/i);var E2={exports:{}};(function(t,e){var r=function(){var n=function(U,G){var y=236,_=17,I=U,x=s[G],E=null,u=0,d=null,g=[],b={},p=function(F,k){u=I*4+17,E=function(m){for(var B=new Array(m),X=0;X<m;X+=1){B[X]=new Array(m);for(var Z=0;Z<m;Z+=1)B[X][Z]=null}return B}(u),R(0,0),R(u-7,0),R(0,u-7),v(),w(),ee(F,k),I>=7&&N(F),d==null&&(d=oe(I,x,g)),Y(d,k)},R=function(F,k){for(var m=-1;m<=7;m+=1)if(!(F+m<=-1||u<=F+m))for(var B=-1;B<=7;B+=1)k+B<=-1||u<=k+B||(0<=m&&m<=6&&(B==0||B==6)||0<=B&&B<=6&&(m==0||m==6)||2<=m&&m<=4&&2<=B&&B<=4?E[F+m][k+B]=!0:E[F+m][k+B]=!1)},O=function(){for(var F=0,k=0,m=0;m<8;m+=1){p(!0,m);var B=a.getLostPoint(b);(m==0||F>B)&&(F=B,k=m)}return k},w=function(){for(var F=8;F<u-8;F+=1)E[F][6]==null&&(E[F][6]=F%2==0);for(var k=8;k<u-8;k+=1)E[6][k]==null&&(E[6][k]=k%2==0)},v=function(){for(var F=a.getPatternPosition(I),k=0;k<F.length;k+=1)for(var m=0;m<F.length;m+=1){var B=F[k],X=F[m];if(E[B][X]==null)for(var Z=-2;Z<=2;Z+=1)for(var fe=-2;fe<=2;fe+=1)Z==-2||Z==2||fe==-2||fe==2||Z==0&&fe==0?E[B+Z][X+fe]=!0:E[B+Z][X+fe]=!1}},N=function(F){for(var k=a.getBCHTypeNumber(I),m=0;m<18;m+=1){var B=!F&&(k>>m&1)==1;E[Math.floor(m/3)][m%3+u-8-3]=B}for(var m=0;m<18;m+=1){var B=!F&&(k>>m&1)==1;E[m%3+u-8-3][Math.floor(m/3)]=B}},ee=function(F,k){for(var m=x<<3|k,B=a.getBCHTypeInfo(m),X=0;X<15;X+=1){var Z=!F&&(B>>X&1)==1;X<6?E[X][8]=Z:X<8?E[X+1][8]=Z:E[u-15+X][8]=Z}for(var X=0;X<15;X+=1){var Z=!F&&(B>>X&1)==1;X<8?E[8][u-X-1]=Z:X<9?E[8][15-X-1+1]=Z:E[8][15-X-1]=Z}E[u-8][8]=!F},Y=function(F,k){for(var m=-1,B=u-1,X=7,Z=0,fe=a.getMaskFunction(k),se=u-1;se>0;se-=2)for(se==6&&(se-=1);;){for(var de=0;de<2;de+=1)if(E[B][se-de]==null){var Ee=!1;Z<F.length&&(Ee=(F[Z]>>>X&1)==1);var le=fe(B,se-de);le&&(Ee=!Ee),E[B][se-de]=Ee,X-=1,X==-1&&(Z+=1,X=7)}if(B+=m,B<0||u<=B){B-=m,m=-m;break}}},ie=function(F,k){for(var m=0,B=0,X=0,Z=new Array(k.length),fe=new Array(k.length),se=0;se<k.length;se+=1){var de=k[se].dataCount,Ee=k[se].totalCount-de;B=Math.max(B,de),X=Math.max(X,Ee),Z[se]=new Array(de);for(var le=0;le<Z[se].length;le+=1)Z[se][le]=255&F.getBuffer()[le+m];m+=de;var we=a.getErrorCorrectPolynomial(Ee),Re=l(Z[se],we.getLength()-1),ye=Re.mod(we);fe[se]=new Array(we.getLength()-1);for(var le=0;le<fe[se].length;le+=1){var be=le+ye.getLength()-fe[se].length;fe[se][le]=be>=0?ye.getAt(be):0}}for(var Pe=0,le=0;le<k.length;le+=1)Pe+=k[le].totalCount;for(var me=new Array(Pe),pe=0,le=0;le<B;le+=1)for(var se=0;se<k.length;se+=1)le<Z[se].length&&(me[pe]=Z[se][le],pe+=1);for(var le=0;le<X;le+=1)for(var se=0;se<k.length;se+=1)le<fe[se].length&&(me[pe]=fe[se][le],pe+=1);return me},oe=function(F,k,m){for(var B=f.getRSBlocks(F,k),X=h(),Z=0;Z<m.length;Z+=1){var fe=m[Z];X.put(fe.getMode(),4),X.put(fe.getLength(),a.getLengthInBits(fe.getMode(),F)),fe.write(X)}for(var se=0,Z=0;Z<B.length;Z+=1)se+=B[Z].dataCount;if(X.getLengthInBits()>se*8)throw"code length overflow. ("+X.getLengthInBits()+">"+se*8+")";for(X.getLengthInBits()+4<=se*8&&X.put(0,4);X.getLengthInBits()%8!=0;)X.putBit(!1);for(;!(X.getLengthInBits()>=se*8||(X.put(y,8),X.getLengthInBits()>=se*8));)X.put(_,8);return ie(X,B)};b.addData=function(F,k){k=k||"Byte";var m=null;switch(k){case"Numeric":m=S(F);break;case"Alphanumeric":m=P(F);break;case"Byte":m=M(F);break;case"Kanji":m=H(F);break;default:throw"mode:"+k}g.push(m),d=null},b.isDark=function(F,k){if(F<0||u<=F||k<0||u<=k)throw F+","+k;return E[F][k]},b.getModuleCount=function(){return u},b.make=function(){if(I<1){for(var F=1;F<40;F++){for(var k=f.getRSBlocks(F,x),m=h(),B=0;B<g.length;B++){var X=g[B];m.put(X.getMode(),4),m.put(X.getLength(),a.getLengthInBits(X.getMode(),F)),X.write(m)}for(var Z=0,B=0;B<k.length;B++)Z+=k[B].dataCount;if(m.getLengthInBits()<=Z*8)break}I=F}p(!1,O())},b.createTableTag=function(F,k){F=F||2,k=typeof k>"u"?F*4:k;var m="";m+='<table style="',m+=" border-width: 0px; border-style: none;",m+=" border-collapse: collapse;",m+=" padding: 0px; margin: "+k+"px;",m+='">',m+="<tbody>";for(var B=0;B<b.getModuleCount();B+=1){m+="<tr>";for(var X=0;X<b.getModuleCount();X+=1)m+='<td style="',m+=" border-width: 0px; border-style: none;",m+=" border-collapse: collapse;",m+=" padding: 0px; margin: 0px;",m+=" width: "+F+"px;",m+=" height: "+F+"px;",m+=" background-color: ",m+=b.isDark(B,X)?"#000000":"#ffffff",m+=";",m+='"/>';m+="</tr>"}return m+="</tbody>",m+="</table>",m},b.createSvgTag=function(F,k,m,B){var X={};typeof arguments[0]=="object"&&(X=arguments[0],F=X.cellSize,k=X.margin,m=X.alt,B=X.title),F=F||2,k=typeof k>"u"?F*4:k,m=typeof m=="string"?{text:m}:m||{},m.text=m.text||null,m.id=m.text?m.id||"qrcode-description":null,B=typeof B=="string"?{text:B}:B||{},B.text=B.text||null,B.id=B.text?B.id||"qrcode-title":null;var Z=b.getModuleCount()*F+k*2,fe,se,de,Ee,le="",we;for(we="l"+F+",0 0,"+F+" -"+F+",0 0,-"+F+"z ",le+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',le+=X.scalable?"":' width="'+Z+'px" height="'+Z+'px"',le+=' viewBox="0 0 '+Z+" "+Z+'" ',le+=' preserveAspectRatio="xMinYMin meet"',le+=B.text||m.text?' role="img" aria-labelledby="'+ae([B.id,m.id].join(" ").trim())+'"':"",le+=">",le+=B.text?'<title id="'+ae(B.id)+'">'+ae(B.text)+"</title>":"",le+=m.text?'<description id="'+ae(m.id)+'">'+ae(m.text)+"</description>":"",le+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',le+='<path d="',de=0;de<b.getModuleCount();de+=1)for(Ee=de*F+k,fe=0;fe<b.getModuleCount();fe+=1)b.isDark(de,fe)&&(se=fe*F+k,le+="M"+se+","+Ee+we);return le+='" stroke="transparent" fill="black"/>',le+="</svg>",le},b.createDataURL=function(F,k){F=F||2,k=typeof k>"u"?F*4:k;var m=b.getModuleCount()*F+k*2,B=k,X=m-k;return K(m,m,function(Z,fe){if(B<=Z&&Z<X&&B<=fe&&fe<X){var se=Math.floor((Z-B)/F),de=Math.floor((fe-B)/F);return b.isDark(de,se)?0:1}else return 1})},b.createImgTag=function(F,k,m){F=F||2,k=typeof k>"u"?F*4:k;var B=b.getModuleCount()*F+k*2,X="";return X+="<img",X+=' src="',X+=b.createDataURL(F,k),X+='"',X+=' width="',X+=B,X+='"',X+=' height="',X+=B,X+='"',m&&(X+=' alt="',X+=ae(m),X+='"'),X+="/>",X};var ae=function(F){for(var k="",m=0;m<F.length;m+=1){var B=F.charAt(m);switch(B){case"<":k+="&lt;";break;case">":k+="&gt;";break;case"&":k+="&amp;";break;case'"':k+="&quot;";break;default:k+=B;break}}return k},W=function(F){var k=1;F=typeof F>"u"?k*2:F;var m=b.getModuleCount()*k+F*2,B=F,X=m-F,Z,fe,se,de,Ee,le={"":""," ":""," ":"","  ":" "},we={"":""," ":""," ":" ","  ":" "},Re="";for(Z=0;Z<m;Z+=2){for(se=Math.floor((Z-B)/k),de=Math.floor((Z+1-B)/k),fe=0;fe<m;fe+=1)Ee="",B<=fe&&fe<X&&B<=Z&&Z<X&&b.isDark(se,Math.floor((fe-B)/k))&&(Ee=" "),B<=fe&&fe<X&&B<=Z+1&&Z+1<X&&b.isDark(de,Math.floor((fe-B)/k))?Ee+=" ":Ee+="",Re+=F<1&&Z+1>=X?we[Ee]:le[Ee];Re+=`
`}return m%2&&F>0?Re.substring(0,Re.length-m-1)+Array(m+1).join(""):Re.substring(0,Re.length-1)};return b.createASCII=function(F,k){if(F=F||1,F<2)return W(k);F-=1,k=typeof k>"u"?F*2:k;var m=b.getModuleCount()*F+k*2,B=k,X=m-k,Z,fe,se,de,Ee=Array(F+1).join(""),le=Array(F+1).join("  "),we="",Re="";for(Z=0;Z<m;Z+=1){for(se=Math.floor((Z-B)/F),Re="",fe=0;fe<m;fe+=1)de=1,B<=fe&&fe<X&&B<=Z&&Z<X&&b.isDark(se,Math.floor((fe-B)/F))&&(de=0),Re+=de?Ee:le;for(se=0;se<F;se+=1)we+=Re+`
`}return we.substring(0,we.length-1)},b.renderTo2dContext=function(F,k){k=k||2;for(var m=b.getModuleCount(),B=0;B<m;B++)for(var X=0;X<m;X++)F.fillStyle=b.isDark(B,X)?"black":"white",F.fillRect(B*k,X*k,k,k)},b};n.stringToBytesFuncs={default:function(U){for(var G=[],y=0;y<U.length;y+=1){var _=U.charCodeAt(y);G.push(_&255)}return G}},n.stringToBytes=n.stringToBytesFuncs.default,n.createStringToBytes=function(U,G){var y=function(){for(var I=C(U),x=function(){var w=I.read();if(w==-1)throw"eof";return w},E=0,u={};;){var d=I.read();if(d==-1)break;var g=x(),b=x(),p=x(),R=String.fromCharCode(d<<8|g),O=b<<8|p;u[R]=O,E+=1}if(E!=G)throw E+" != "+G;return u}(),_="?".charCodeAt(0);return function(I){for(var x=[],E=0;E<I.length;E+=1){var u=I.charCodeAt(E);if(u<128)x.push(u);else{var d=y[I.charAt(E)];typeof d=="number"?(d&255)==d?x.push(d):(x.push(d>>>8),x.push(d&255)):x.push(_)}}return x}};var i={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},s={L:1,M:0,Q:3,H:2},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a=function(){var U=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G=1335,y=7973,_=21522,I={},x=function(E){for(var u=0;E!=0;)u+=1,E>>>=1;return u};return I.getBCHTypeInfo=function(E){for(var u=E<<10;x(u)-x(G)>=0;)u^=G<<x(u)-x(G);return(E<<10|u)^_},I.getBCHTypeNumber=function(E){for(var u=E<<12;x(u)-x(y)>=0;)u^=y<<x(u)-x(y);return E<<12|u},I.getPatternPosition=function(E){return U[E-1]},I.getMaskFunction=function(E){switch(E){case o.PATTERN000:return function(u,d){return(u+d)%2==0};case o.PATTERN001:return function(u,d){return u%2==0};case o.PATTERN010:return function(u,d){return d%3==0};case o.PATTERN011:return function(u,d){return(u+d)%3==0};case o.PATTERN100:return function(u,d){return(Math.floor(u/2)+Math.floor(d/3))%2==0};case o.PATTERN101:return function(u,d){return u*d%2+u*d%3==0};case o.PATTERN110:return function(u,d){return(u*d%2+u*d%3)%2==0};case o.PATTERN111:return function(u,d){return(u*d%3+(u+d)%2)%2==0};default:throw"bad maskPattern:"+E}},I.getErrorCorrectPolynomial=function(E){for(var u=l([1],0),d=0;d<E;d+=1)u=u.multiply(l([1,c.gexp(d)],0));return u},I.getLengthInBits=function(E,u){if(1<=u&&u<10)switch(E){case i.MODE_NUMBER:return 10;case i.MODE_ALPHA_NUM:return 9;case i.MODE_8BIT_BYTE:return 8;case i.MODE_KANJI:return 8;default:throw"mode:"+E}else if(u<27)switch(E){case i.MODE_NUMBER:return 12;case i.MODE_ALPHA_NUM:return 11;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 10;default:throw"mode:"+E}else if(u<41)switch(E){case i.MODE_NUMBER:return 14;case i.MODE_ALPHA_NUM:return 13;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 12;default:throw"mode:"+E}else throw"type:"+u},I.getLostPoint=function(E){for(var u=E.getModuleCount(),d=0,g=0;g<u;g+=1)for(var b=0;b<u;b+=1){for(var p=0,R=E.isDark(g,b),O=-1;O<=1;O+=1)if(!(g+O<0||u<=g+O))for(var w=-1;w<=1;w+=1)b+w<0||u<=b+w||O==0&&w==0||R==E.isDark(g+O,b+w)&&(p+=1);p>5&&(d+=3+p-5)}for(var g=0;g<u-1;g+=1)for(var b=0;b<u-1;b+=1){var v=0;E.isDark(g,b)&&(v+=1),E.isDark(g+1,b)&&(v+=1),E.isDark(g,b+1)&&(v+=1),E.isDark(g+1,b+1)&&(v+=1),(v==0||v==4)&&(d+=3)}for(var g=0;g<u;g+=1)for(var b=0;b<u-6;b+=1)E.isDark(g,b)&&!E.isDark(g,b+1)&&E.isDark(g,b+2)&&E.isDark(g,b+3)&&E.isDark(g,b+4)&&!E.isDark(g,b+5)&&E.isDark(g,b+6)&&(d+=40);for(var b=0;b<u;b+=1)for(var g=0;g<u-6;g+=1)E.isDark(g,b)&&!E.isDark(g+1,b)&&E.isDark(g+2,b)&&E.isDark(g+3,b)&&E.isDark(g+4,b)&&!E.isDark(g+5,b)&&E.isDark(g+6,b)&&(d+=40);for(var N=0,b=0;b<u;b+=1)for(var g=0;g<u;g+=1)E.isDark(g,b)&&(N+=1);var ee=Math.abs(100*N/u/u-50)/5;return d+=ee*10,d},I}(),c=function(){for(var U=new Array(256),G=new Array(256),y=0;y<8;y+=1)U[y]=1<<y;for(var y=8;y<256;y+=1)U[y]=U[y-4]^U[y-5]^U[y-6]^U[y-8];for(var y=0;y<255;y+=1)G[U[y]]=y;var _={};return _.glog=function(I){if(I<1)throw"glog("+I+")";return G[I]},_.gexp=function(I){for(;I<0;)I+=255;for(;I>=256;)I-=255;return U[I]},_}();function l(U,G){if(typeof U.length>"u")throw U.length+"/"+G;var y=function(){for(var I=0;I<U.length&&U[I]==0;)I+=1;for(var x=new Array(U.length-I+G),E=0;E<U.length-I;E+=1)x[E]=U[E+I];return x}(),_={};return _.getAt=function(I){return y[I]},_.getLength=function(){return y.length},_.multiply=function(I){for(var x=new Array(_.getLength()+I.getLength()-1),E=0;E<_.getLength();E+=1)for(var u=0;u<I.getLength();u+=1)x[E+u]^=c.gexp(c.glog(_.getAt(E))+c.glog(I.getAt(u)));return l(x,0)},_.mod=function(I){if(_.getLength()-I.getLength()<0)return _;for(var x=c.glog(_.getAt(0))-c.glog(I.getAt(0)),E=new Array(_.getLength()),u=0;u<_.getLength();u+=1)E[u]=_.getAt(u);for(var u=0;u<I.getLength();u+=1)E[u]^=c.gexp(c.glog(I.getAt(u))+x);return l(E,0).mod(I)},_}var f=function(){var U=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],G=function(I,x){var E={};return E.totalCount=I,E.dataCount=x,E},y={},_=function(I,x){switch(x){case s.L:return U[(I-1)*4+0];case s.M:return U[(I-1)*4+1];case s.Q:return U[(I-1)*4+2];case s.H:return U[(I-1)*4+3];default:return}};return y.getRSBlocks=function(I,x){var E=_(I,x);if(typeof E>"u")throw"bad rs block @ typeNumber:"+I+"/errorCorrectionLevel:"+x;for(var u=E.length/3,d=[],g=0;g<u;g+=1)for(var b=E[g*3+0],p=E[g*3+1],R=E[g*3+2],O=0;O<b;O+=1)d.push(G(p,R));return d},y}(),h=function(){var U=[],G=0,y={};return y.getBuffer=function(){return U},y.getAt=function(_){var I=Math.floor(_/8);return(U[I]>>>7-_%8&1)==1},y.put=function(_,I){for(var x=0;x<I;x+=1)y.putBit((_>>>I-x-1&1)==1)},y.getLengthInBits=function(){return G},y.putBit=function(_){var I=Math.floor(G/8);U.length<=I&&U.push(0),_&&(U[I]|=128>>>G%8),G+=1},y},S=function(U){var G=i.MODE_NUMBER,y=U,_={};_.getMode=function(){return G},_.getLength=function(E){return y.length},_.write=function(E){for(var u=y,d=0;d+2<u.length;)E.put(I(u.substring(d,d+3)),10),d+=3;d<u.length&&(u.length-d==1?E.put(I(u.substring(d,d+1)),4):u.length-d==2&&E.put(I(u.substring(d,d+2)),7))};var I=function(E){for(var u=0,d=0;d<E.length;d+=1)u=u*10+x(E.charAt(d));return u},x=function(E){if("0"<=E&&E<="9")return E.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+E};return _},P=function(U){var G=i.MODE_ALPHA_NUM,y=U,_={};_.getMode=function(){return G},_.getLength=function(x){return y.length},_.write=function(x){for(var E=y,u=0;u+1<E.length;)x.put(I(E.charAt(u))*45+I(E.charAt(u+1)),11),u+=2;u<E.length&&x.put(I(E.charAt(u)),6)};var I=function(x){if("0"<=x&&x<="9")return x.charCodeAt(0)-"0".charCodeAt(0);if("A"<=x&&x<="Z")return x.charCodeAt(0)-"A".charCodeAt(0)+10;switch(x){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+x}};return _},M=function(U){var G=i.MODE_8BIT_BYTE,y=n.stringToBytes(U),_={};return _.getMode=function(){return G},_.getLength=function(I){return y.length},_.write=function(I){for(var x=0;x<y.length;x+=1)I.put(y[x],8)},_},H=function(U){var G=i.MODE_KANJI,y=n.stringToBytesFuncs.SJIS;if(!y)throw"sjis not supported.";(function(x,E){var u=y(x);if(u.length!=2||(u[0]<<8|u[1])!=E)throw"sjis not supported."})("",38726);var _=y(U),I={};return I.getMode=function(){return G},I.getLength=function(x){return~~(_.length/2)},I.write=function(x){for(var E=_,u=0;u+1<E.length;){var d=(255&E[u])<<8|255&E[u+1];if(33088<=d&&d<=40956)d-=33088;else if(57408<=d&&d<=60351)d-=49472;else throw"illegal char at "+(u+1)+"/"+d;d=(d>>>8&255)*192+(d&255),x.put(d,13),u+=2}if(u<E.length)throw"illegal char at "+(u+1)},I},$=function(){var U=[],G={};return G.writeByte=function(y){U.push(y&255)},G.writeShort=function(y){G.writeByte(y),G.writeByte(y>>>8)},G.writeBytes=function(y,_,I){_=_||0,I=I||y.length;for(var x=0;x<I;x+=1)G.writeByte(y[x+_])},G.writeString=function(y){for(var _=0;_<y.length;_+=1)G.writeByte(y.charCodeAt(_))},G.toByteArray=function(){return U},G.toString=function(){var y="";y+="[";for(var _=0;_<U.length;_+=1)_>0&&(y+=","),y+=U[_];return y+="]",y},G},q=function(){var U=0,G=0,y=0,_="",I={},x=function(u){_+=String.fromCharCode(E(u&63))},E=function(u){if(!(u<0)){if(u<26)return 65+u;if(u<52)return 97+(u-26);if(u<62)return 48+(u-52);if(u==62)return 43;if(u==63)return 47}throw"n:"+u};return I.writeByte=function(u){for(U=U<<8|u&255,G+=8,y+=1;G>=6;)x(U>>>G-6),G-=6},I.flush=function(){if(G>0&&(x(U<<6-G),U=0,G=0),y%3!=0)for(var u=3-y%3,d=0;d<u;d+=1)_+="="},I.toString=function(){return _},I},C=function(U){var G=U,y=0,_=0,I=0,x={};x.read=function(){for(;I<8;){if(y>=G.length){if(I==0)return-1;throw"unexpected end of file./"+I}var u=G.charAt(y);if(y+=1,u=="=")return I=0,-1;if(u.match(/^\s$/))continue;_=_<<6|E(u.charCodeAt(0)),I+=6}var d=_>>>I-8&255;return I-=8,d};var E=function(u){if(65<=u&&u<=90)return u-65;if(97<=u&&u<=122)return u-97+26;if(48<=u&&u<=57)return u-48+52;if(u==43)return 62;if(u==47)return 63;throw"c:"+u};return x},V=function(U,G){var y=U,_=G,I=new Array(U*G),x={};x.setPixel=function(g,b,p){I[b*y+g]=p},x.write=function(g){g.writeString("GIF87a"),g.writeShort(y),g.writeShort(_),g.writeByte(128),g.writeByte(0),g.writeByte(0),g.writeByte(0),g.writeByte(0),g.writeByte(0),g.writeByte(255),g.writeByte(255),g.writeByte(255),g.writeString(","),g.writeShort(0),g.writeShort(0),g.writeShort(y),g.writeShort(_),g.writeByte(0);var b=2,p=u(b);g.writeByte(b);for(var R=0;p.length-R>255;)g.writeByte(255),g.writeBytes(p,R,255),R+=255;g.writeByte(p.length-R),g.writeBytes(p,R,p.length-R),g.writeByte(0),g.writeString(";")};var E=function(g){var b=g,p=0,R=0,O={};return O.write=function(w,v){if(w>>>v)throw"length over";for(;p+v>=8;)b.writeByte(255&(w<<p|R)),v-=8-p,w>>>=8-p,R=0,p=0;R=w<<p|R,p=p+v},O.flush=function(){p>0&&b.writeByte(R)},O},u=function(g){for(var b=1<<g,p=(1<<g)+1,R=g+1,O=d(),w=0;w<b;w+=1)O.add(String.fromCharCode(w));O.add(String.fromCharCode(b)),O.add(String.fromCharCode(p));var v=$(),N=E(v);N.write(b,R);var ee=0,Y=String.fromCharCode(I[ee]);for(ee+=1;ee<I.length;){var ie=String.fromCharCode(I[ee]);ee+=1,O.contains(Y+ie)?Y=Y+ie:(N.write(O.indexOf(Y),R),O.size()<4095&&(O.size()==1<<R&&(R+=1),O.add(Y+ie)),Y=ie)}return N.write(O.indexOf(Y),R),N.write(p,R),N.flush(),v.toByteArray()},d=function(){var g={},b=0,p={};return p.add=function(R){if(p.contains(R))throw"dup key:"+R;g[R]=b,b+=1},p.size=function(){return b},p.indexOf=function(R){return g[R]},p.contains=function(R){return typeof g[R]<"u"},p};return x},K=function(U,G,y){for(var _=V(U,G),I=0;I<G;I+=1)for(var x=0;x<U;x+=1)_.setPixel(x,I,y(x,I));var E=$();_.write(E);for(var u=q(),d=E.toByteArray(),g=0;g<d.length;g+=1)u.writeByte(d[g]);return u.flush(),"data:image/gif;base64,"+u};return n}();(function(){r.stringToBytesFuncs["UTF-8"]=function(n){function i(s){for(var o=[],a=0;a<s.length;a++){var c=s.charCodeAt(a);c<128?o.push(c):c<2048?o.push(192|c>>6,128|c&63):c<55296||c>=57344?o.push(224|c>>12,128|c>>6&63,128|c&63):(a++,c=65536+((c&1023)<<10|s.charCodeAt(a)&1023),o.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63))}return o}return i(n)}})(),function(n){t.exports=n()}(function(){return r})})(E2);var NS=E2.exports;const LS=wi(NS),MS=new on("QR"),CS=(t,e)=>{const i=LS(0,"L");t.length>500&&MS.warn("getQrData",'The size of the payload in the QR code is quite long and some devices might not be able to scan it anymore. To reduce the QR size, try using a shorter "name", "appUrl" and "iconUrl"');try{if(i.addData(t),i.make(),e==="svg")return i.createSvgTag();if(e==="ascii"){const s=i.getModuleCount(),o="\x1B[40m  \x1B[0m",a="\x1B[47m  \x1B[0m",c=new Array(s+3).join(a),l=new Array(s+3).join(o);let f="";f+=`${l}
`,f+=`${c}
`;for(let h=0;h<s;h++){f+=a;for(let S=0;S<s;S++)f+=i.isDark(h,S)?o:a;f+=`${a}
`}return f+=c,f+=l,f}else return i.createDataURL()}catch(s){throw console.error("error",s),s}},gc=(t,e)=>`${t}?type=tzip10&data=${e}`,BS=[{key:"spire_chrome",id:"gpfndedineagiepkpinficbcbbgjoenn",name:"Spire",shortName:"Spire",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAIIElEQVR4Ae3Ba5BeZWEA4Oc9u9kkJGHZkIQkLhQziQmVBpJwOTDg7saKEIQwnYq2/WWnUjuxHTOOgbYq77ZqSVGrtZliae2P/gE74zQIodoZEmwrR6pQlTYJ0DWNuWAChBBIyN7exsGZL2e/3Xy3Xf3RPI+zzvr/LfgFyGMKCMPHX/JT7eec75RUxJD8nAVTKI/JKe1YjquxEsuwCHOPH/phm9ER5yy8fAQv4yCeww/wHezGcBGDqRJMgTymaejD+3AjFhvHC09+SRodtijfaAIH8CgexI4ihiGTLJhEeUzn4Q58CG9Vw7MP/po0OmL5b2xVhx/hPny5iOGoSRJMgjymmfgwNmGeOowOnfD0F5eQRq36yIBs2ix1OoR7saWI4YQWBS3IYwrowxasMLGEo3gK/4UfDXz9d+ce+t79HydZsPp3PrPk1vtfxBK8HatxLoKJ7cQGbC9i0KygSXlM0/EpbESbagl78QAewneLGAZVbMTnvWkT7vUzeUwduBK34b24CEG1YXwOdxcxnNSEoAl5TAvwAPpUS3gS9+CRIoYh43sYN3vTNtxsHHlMHViHu3AVgmqP4f1FDIc1KGhQHtMSPIIVqu3GXXioiGHUxGZhAAu86UUswTETyGPKsB6bsUy1nXhPEcOABgQNyGNagn/BEmXD+BI+WcTwmtquxJPKrsUTashjmo0/we+jXdkA3lXEMKBOQZ3ymBbgcaxQdgQfKGLYqn6bsFnZH+HP1CmP6TZ8BV3KdqKniOGwOrSpQx7TdGzFFcr24sYihsc15hNYqmwU/6BO+3b07+rujd/EOnSqmI813b3xwX07+kfUkKkhjyngU+hVthfvLmL4vsbMwRrVrkCnBhQxPI0b8GNla9Gfx6SWTG192KjsCG4tYtilcZdinmpdWKlBRQy7sB5HlH0UfWrInEEe00xsQZuKYXygiOH7mvOrJtarCUUMT+O3MayiHVvymGY6g8yZfRgrlP1lEcNWzesxsT5NKmL4J2xRdgk2OIPMBPKYunCnst24W/POxWoTW43zNO8TeF7Zx/KYOk0gM7EP4nwVCXcVMbymeavQZWKdWKVJRQzHsAlJxQLcYQKZceQxTcPvKfs2HtKatWrr1ZqteFLZh/KY2o0jM761uFhFwr1FDKNa06O2Pi0oYhjFPUgqlqDXODJj5DE55XZl/4ttWtOFy9V2OeZqzTbsVXa7cWSqteNGZQ8UMQxpzRXoVNscrNGCIoZB/KOydXlMbcbIVFuOxSoSvq51PerXo3VbkVS8BcuNkal2jbKj+K7WBPSq31oErfkPvKrsamNkql2q7HtFDINaMxeXqd9KnK8FRQwn8bSylcbIVFum7L+17irMVr9ZuFLrnlG21BiZ0+QxBSxWNqB1PRrXq3V7lC3OYwpOkykL6FJ2WGsCejVuLYLWHFI2F8FpMtVmKntda+Zjpca9HfO1ZlBZZozM1LsaMzVuJq42xTLVTiibpTU9mterNR3KRo2RKUs4omy+5mVYq3l9yDRvgbKXkZwmc5oihoQDypZo3gW4RPMuwQWad7GyA0UMyWky1Z5T9sual2OG5s1ArnmXKnveGJlqzyhbk8fUoTl9WterCXlM07FK2Q+Mkan2hLJOXKFxbejVuj60adyVOFfZd4yRqbYbB1QE3KJxC7Fc65ZjocatR1CxH7uNkak2jH9W9v48pmkacy06tK4D12pAHlMH3qtsWxHDiDEyYxQxOOWryn4J6zTmnSZPn8bcjIuUfdU4MuN7DHtUBHwsjylTnzZcb/L0oE0d8pgy3ImgYgA7jCMzjiKGIfy1smtxq/osxttMnrdhsfqsx1XK7itiGDaOzMTux0sqAu7JY5qttneg3eRpx3VqyGOagz9HUHEIf2MCmQkUMRzBZmXL0a+2PpNvrdr+FEuV3VvEcNQEMmf2V9il7A/ymNabWDuuM/muR7sJ5DHdhg3KdmKLM8icQRHDCWzAiIp2/H0e02XGdyGWmnxL0W0ceUyr8BW0qxjGhiKGE84gU9t2/IWyLjyUx7RCtR60mXxtuM4YeUwrsBVdyj6H7WrI1FDEkPBxbFd2Eb6Rx3SZsl5T551Ok8e0Ct/Ehcoew91FDGppU4d9O/pHunvjo7gF81R04n3dvXH3vh39uzANmzHX1JiN+zCax3QbvoYLlO3Ee4oYXlWHNnXat6P/9e7e+ChuQZeKmfj17t7YdeTZh38ydOzgnQimxnmzFq/52pqPHrgTn8UsZQO4qYhhvzq1acC+Hf1Hunvjw3g35qnIcI00+puvPPvIDFMnXNjX/1uzFq3pQaZsJ24qYhjQgEyDihgG0IPtxji299/mmGKv7nl8jmqPoaeIYUCDMk0oYjiEm/BZjDgljQw6tvffTbVjP/62NDLoZ4axGeuKGA5rQqZJRQwnsQk3YNcbL/+Pk6/sMdVOvrLHyVf2OGUnbsBdRQwnNSmYBHlMM/d/69Mb9//rZzaNDh3vNIWy9hlHu3s+uXnx9X/4hSKGE1oUTKKLb/ri/ENP/d2GwVf33zF84qVFJlH7jK4XOjq7vyylLccPPXPYJAmmwII1H+x44+Xn140Onbj9jRd33zj8xpEuTWibcd6R6Z0XfaN9ZteDM+Yu23boqb8dNMmCKfSWd/yx0eGT04ZeO3j56wefytPwyV8ZOv7israO2RekkcFFieCUQAptHQdHBl/7ybRz5j0X2qf/cNai1cW02Qv/M2ufMbT/W582VYJfgEXXfCQMHXshS2nET4XQZtqchaMHn/hCctZZZ/08/R8wPGmSSU1PIgAAAABJRU5ErkJggg==",link:"https://spirewallet.com/"},{key:"temple_chrome",id:"ookjlbkiijinhpmnjffcofjonbfbgaoc",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAGbElEQVR4Ae3B32/ddR3H8efr/f1+z2m7dT1n3Vp+De22EsxmxARvCNDGhBvDj3/AaxdMJEpIUAOJxl8IXJnFGyNX3i3BiEG9ELIqZNSLmRBYYD+7CS3tuv5Y23N6es7n87Zd2uULxAXDt2cmnseDjo6Ojo6Ojo6Ojo7/S6Jgje/sGdTdu1+2ewZvwwQSMsAEJjCBBCYwwAQSMoEJDDCBBCYwgQmJN3XLH79JwUSBGt/dO4jzmqrlQ/bQEJhAQgaYwAQmkMAEBphAQiYwgQEmkMAEJjAhsYxU1eArLQpkFKTx5MAg0mskOuTLTVgLFErsBO6lYEZRTN8i0SESgQmfq1M4MUrBUoqS6E2xTgIBc6twWy8bfLkJszWukfgUgZMj1okN6iujQ3vYNAI8R4FSCiLTCaQGoozA51cRmxotwvFLEBxChOAQHYJDiHhwCA7RIUQIDsEBRweqZF/qBxPr7vfLj6Xa+4cWBUkpSOkXU/W1Z28fRzwIgloTmgFKKezuJnn4IAiQQIDENQIkJECsEwgQ+L+WCK9fxCeX0Z29rNsJ3Au8RUFSipTYGOJBNkj4QgMNpEjAQA+YwAQSmMAAE0jIBCYwwAQS2ttD+NM5/PQc3NnLNWIUeIuCGEVKdJxEkBgkgoUGn8uuMvSWiKeukDNCgYwiJTpBYg0SQSL8aoP/RnhtApyPSY98leTRg+Tc71ceSymIUaDSDy/WSTROIkgMVlvQinwW8Z3LhGPv49Mr5OmWHejOXeTsBN1LQYyimY0pMZQIJYKlBp+FBnaAwE/P8xmMUpCUginVceBZJAiR8Oo5MKHUIDVIDUoJ9pUBdFeVLRroQdUu4pk5bHQfG/zSVcKJD1EpgVICpQSVzCmnH1CQlKKZTiA1CLEcT07jy2uQJZAaZAalBB2s4HN1RJU83bUbPzMPDgioduFTy1BOoZxAOXVKdiR78tzvKIhRsOyJM3VCHI/jU/jCKh9jQkN9qDuDpTVYDeTZcBVfWsOnV9ig3hKqdLHJcT+SPXnuNxQoZRuEv33wbVbW9pEZeTZcfZSe7HFCxB18ro56etmi4d0g8LPz6NadbEge+uJL4ZWzx3DmSj+Y+AcFS9kGXS+vvgu8C5G8tRcH52jFx3Fng8/W0R29bNFAD6p0Ec8sYA/sY4P27aqUfj75F7aJ0U7BTxLiVYJDK+IzK3yShqv4uXlyRuLkw8Y2Mdqo9PSFFi1/g1aE4LDYgFqLPBuu4str+MwKm/qBw2wTo91CHCM4tCK0HJ9ZIU8HqyDhZxfIGWWbGO3WiscJEYJDiPjUCnna240qZeK5eXJG2CZGu0U/SStepRUhOD65xCfpYBU/v8B10oh/9IixDYw2K/1ssuXB3/AQ8VbE51dhpUmeHajgy018psamfuAw28C4GVpxjOAQIgTHJ5fI04EqkvDzC+SMsg1SbgL1ZL32tVtAYoN2d5OnPd2oUsbPL8B9t7NpBPgVBTParPG9vU95rfmMbutFBypouAr93XyMQPsrxAsL5Iz49KNGwYw2ajw1+BSpvUBm+EyNG9GBCiw38cs1rhH9wGEKZrTJ2vdv/bIye0FZgjLDZ2vciPZXQODnF7hOjFIwo11SO02W1MkMsgTmV7kR9XejvjJ+YZGcEQpmtEnppx82yOwEpQQyw+stWAvciPZXiBOL4GwZ8cuPGQVKaadSMob4OhJEJ/z+DHSlKDPoLZE8cAd0p2zRUAXeuQyzNRjsYV0/cBh4m4IYbaTMjitLkMBPzRLfu4KfmiVOLEK9hV+pk6ehPpCIE4vkjFIgo51SGwfq8Z/T+GKDa7pTbKgP3PGZGnnq70Z9ZfzCIteJEQqU0EY/+fNceOb2cNpn66+T6FUSe9UO7XkQKBMc1gI2XAUJJJDwj1bwS4sk990BEkgDP3r67hd//Pz7TgFS2qz80uIxctbu4RFC/Abu+HyAWgt2ZmzRUB/x1Cx+pY729rCuH3QYeJsCGDdbM4zRjNCM0Az41DJ5+kIfSPjEIjmjFCTlZmvG47iDA9EJf72ITk5DapAIMoNEhPEpfLoGBkg9FCTlZmvFkx79Ku67fHIZ5huQGaSGMoMdGSTCP1omzNbAdBT4JQUxbrLSc1MtmuENv7QEM3U+pRGgGdl0FHiifPSKU5CU/wE+ufI8l2t/JzH+I2eW6L8t/3rO6ejo6Ojo6Ojo6Ojo+Jz+DTK0Yr9D+W0JAAAAAElFTkSuQmCC",link:"https://templewallet.com/"}],kS=[{key:"infinity_wallet",name:"Infinity Wallet",shortName:"Infinity Wallet",color:"rgb(52, 147, 218)",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANkUlEQVR4AeXBf5DfdZ0f8Mfr/fl+d5NsdvODIBBJgkIi/iJwAkHUO+/wR394P7wbZ27sdari+Ud7106n7T/tzP5va2c602nnxrmj1Ws7vd5YqjhOiygWT9FDJeGHEqVAAgiEsEKy2c3ufr+fZ2NGcsAJJIF/zn08ynNs23Vd4ZfxMfwytqLzN9sYj+E2/Cd87eEffiV+pvzMtl3XnYM/wm+j+cXU4/P4xMM//MphJ3RO2LbrunNwM65D+cVVeCPet+Gc13/uyFMPLnTbdl3nhD/FdVaP87Frwzmv/x8N78YHrT6/iV9r+Bia1adwfcMvW73e1bDV6nVeQ7N6tWaVa1a5ZpVrVrlmlRtIvDrCeEzrnNSP6QZeFeMxrVHFeExrVHk1DOKVin7degu/8h7HL7vCeOMmEt3cYWu/d4d1f3GrWl52VqosXv0OC3uuNTrvAuk63dEjJu+719StN+ueOkyVV6Iu3PmrI3TORh/HL3+bZ/7e9fqJSRLPU6U7dtTGP/kPJh74EVVOSxhvOdfcJ/6J0XkX0Peep0qlN/2FPzf11Ztp5SyNu5nNr5tFc6bSW7zqHZ75+5+gmkpUqFChQiUymHD8yrebOPCA7vCTKC9ndO555v7pv9LPbFR9VKhQoUIlhOVL30o3MLH/+1Q5C+lmNl80i+ZMJI5fea1nPny9QoUKFSpUqFCh4oRy/Io9Jg4+oDt8iPKixueeZ+4P/6UMJ1WoaipUqFChQoXqY+XiNzAcmNh/L1XOULrpTRfNojld6S295Urz1/2O4cEnDA48YfD4nDa/KJNDhkMSgiCIE8rxK642PPig7qlDKC803nyOp3//X2hHlgx+fNjwoccMHnpcm1/Uz0zRGkEQBH2svH6XDIcm9t9DNWcg3czmHbNoTkd6S7v3mP/Ah9XK2ElVatxrRxZMHHhce/qIbJqmNRUqVKhQytLlewwPPqB76hDlr4zHjnz0Hxuft5XhgNZoTSXaT46a2H+QCTIzoxIVKlSoPkav28XEpIn77qaV05RuZvNFs2heTt9buuIaRz78CQYDGQ4YDhgMGAwYDrVjc2Zu/I/WfvOrlnbvYXINQRDESUtXXGPi4Qd1Tx2iyklV5n/9d+k6uo6JIa1J69Ro2fqvfNa6275kvGmL0dYdJARB0MfKRTtZs9bEfXfTmtOQbmbTjlk0LyWxdPkeR3/3E2o8dlLXGA6ZGMpwaDD3uOkbP00/VqMVa757u6W3XMWatSpUqFChwtLl1xg88qDu8BMkfmr5rVfKuhnlhCoZDrWVJTP//d9rx47Qmsl7vicbNhlv3aESFSpUqD5G2y+RNWtN7L+LKi8j3fSmHbNoXkx6y5dfY/5DH1fjsQoVKlTQmsGhR8185t8xHjlltGLNnd+y/KZfYnKdChUqVKjE8u49Bo88aOmKay1e+2vWfenPLV9+raqmlDZ/xIY//qR25CdOqTLx/TtlZpPx1h2qjwoVKlQfo+2XyJp1hj+8hyovId30xu2zaH6exPLuPeZ/5+P0IQiCOGnwyAEzf/JvWFnxQrWybHLvty2/6ZdkzRRBEARh+bKrjS7aqS0uWvvVm6y54zbdk4+bvPsO6z//X9TCvL+uTPxgr356o/HWHfQIgqCP0faLGUwa3n8PyotIN71pxyyaF0os797j2G9fr/qoUKFChcLwkQNmbvgUoxUvpkYrJvd928qll7NmSoUKFSpUqFCJNbd/WY1GBo89rHviUfrei6oycd8+Wb/ReOsO1UeFChXa0op+81ZZP2P4/+6lys+RbnrT9lk0z5VYvuwaC7/1MZWoUKFChQqDRw+Y/s+fYrTi5dRo2eRd37byhstZO6VChQoVKmidNd/4385IMdy/T9Zv1F+wQyUq1GisFo5rC8eNtl8iMxsN77+b8kLppjdun0VzSqxceoWFD/4+CUEQBKH78QHrP/Nv1WjF6arRiom7/9LKzstk7XqCIAhaZ/Jbt6jRyJkpw/379NMbjc/fwXisLS5pC0tqcYmuM7r4jTIYGj7wfZTnSIuIiIjo101b+PWPqr5XfVQf1Uf1UX0MHn3I+s98itGyiIiIiIiIiIiIiIgIi/Mm7turQvVRfVQf1Udp+rVTIiIiIiIiIiIiIiIiIlKsvemzJr97m7a4ohaW1MKSduw4VWo8tvz29xtt3ykiIiKiCYIgsbznPXRD+tCHPvShj+7HB0x99lOsrBAEQRAEQRAEQRBGF11q6R1/lxQpevShDz1ZN0MQBEEQBEEQBEEQJ5Q1X/ysie99XS0uaYtL6vgya9bQh/HY0js/wHhMEIQBcUo/Ntp5uRr3nq+0QwdN/em/Zjx2tgYP/sD0J/+hzJyj33COftMWmdms33guw6H25KOIs1Zl8qt/pvYs6s+/VNatpZoax0+NX3uJTEyq0YpnDTzXYChTG1Uff6XUM4dNffaT9L1XpEqtLKunHtOeeswpCelpnVesNRPf/oKVK4eW3vVuNe6d0jqZ2aTmDnnWIIlTEnov0Bvuf1DGI5RXReKkKqdUI/GqSIwuupBuQO85In0k8ayB5xqtaEeelpnNntUOPcXktJV3/p7hN/4biVdq+X2/J5NrtacPq6Nz6ukn1ZE57egcK8tUOWvpLX/g4/odl6o+nme0oh39iecaEKdU6e7fZ3T5uz2rzR2RiQnZcLHl915v4st/TOJsZc16o7e8k35s7IQqFFV+auLWPzO481bKmUss/+3rjXa9jXHvhbqD+1lepHWe1QRBnFCG3/myGo1UH21pRSVMTDAc6re9wdJv/AHVCIIgCIIgCIIgCEItLajlZdVH9VHjXo3HajQyuH+vwZ23OikIgiAIgiAIgiCx/P6PGu96mxr3qo/qo/qoPioMv3kT1REEoUVEREQ4Omd4y39VKbUyYmKC4ZDhkMFALnyD5d/4R9JKREREREREREREREREREYr2uKC6qP6qD6qj+ojW7brZ84RERERERERERERERERsfy+j+p3XanGveqj+qg+qo9KGd7+RfXYAyIiIiK69TMXzqI5pbQnH1aL87LtzSyvMDnJ5ASDjkSmt8j5r9f98Dskzkii33W1rJ0mCIKgm9Dvukp7YK86vuB0jd77Ef3Oq0hPEARxQtN952aD22+iygukWz/z2lk0z1WlPfGQOj4v297MxJDBQIUKlTCzRc6/WLv/DhKnL3LRZUxvUaFChQoVdEPZdZX24F61dMzLGb3nI/qdV6m+V6FChQpVzeC7NxvcfiNVfo40L6ZKu/c23R3/SwYTqqd6qqd6ahzZutPo7/wB1byUbH+z/tJrZf1mEjX/tArVUz3VUz3VUz2G64x+65/LhnO9qDC+7iNy8ZVq3Kue6qme6ilN992bdd+8kWpeTDc1vXUWzc9V6skD6tgzctFl9CEIgmD9OXLBxepHd5B4nsGE8W/+M/3u98q2N+vf+qvq6Sfohiwd191yg+zcQzWCIAi6oX7n1erBvRw/5vlifN1H5eK30YcgCOKEpu39svat/0k1LyHd1MxrZ9G8mCr15AE1/zQ7dqu+V6FChUpYfw7nX6Lu/0undAP93/pDtmxTiQqVyIVv1P2fP9Luv0MtHlUP7WPnNaqaChUqVKg2kJ171IN71dKCkxK59sNs302iUKhQoTRt3y3atz5H67yMdFPTW2fRvKRSTx5Q83Ns360SFSpUqIT1m+X8nepHt9M6rv4HTG2hj6qmqlSowYT6wW2sLPmpWpxXD+3jkj2qOhUqVKhQbcCua9RDe1l4ht0f5DWXqpWRGo0Y9ypRSlVTd92ifetztM5pSDc1vXUWzcupUocPMj/H9t0kBEEQTG3i4rdrEztUt4Zxr/ow7lG0xuJRdeeXUJ5Vx+fVQ/vk4j1U56QgCKqTS9+lzn2L6tep0YjRWK2MGI3VaKT6qHu/qt1xI61zmtKtm75gFs3pqOKpg+ronNq2W/VRoUKFCoZr5DXnMe7V4qJaXmbcqz4o9X9v4Nicv2ZpXh3cp15/tapOhQoVKlQws1E2bKCPWllRKyPSq8GQ+/+CfTfRmjOQbmr91lk0p6146mHm59h2GUEQBHFCsX5KNm+WDRuYmmLNJLfdwI/vQ/m5jh/j4F287kragBRBEATVmFonGzbIxk3MbOCBb3DnF6jmDKWbmr5gFs2ZqGLuEebn1IWXqUSFChUqVKhQSiV87dM8+n2qvKSleR6+W110pWoDFSpUqFChQoVC3XsL372Ras5Cuqn1F8yiOWPFTx7hJ4+prW9W1VSoUKFCpVg6Jl/7NI/vRzktS8c4uFdd8CY1MaUSFSpUqFDB3pvkri+hOUvpptafP4vmbB15nB99g36sJtZRA0YrcuQJ9t8m3/wMRw85Y8sL/OjrcuxpJtapbkjfy7GnOfA9+eZneORuqrwCqS3nXzFC5xULfU/rEPqe1nlV9GOqUUU/phpVXgXjgcSrphqJk6qReFVUc1JCNSclXg3NKjeQWM0GsboNiNVsIFa1AenRWZ36QXgM261Oh7q1615zJS6zOn2p4QbE6hPc0HArPm/1+SJu6RYXDlm77jVfwftxvtXhLnxo7vA9xzonLC4cWli77jWfwy68AeUXU/BFfGju8D2HnFCeY/OWtxSuw8fwLpyH5m+2HofwddyAW+YO3xM/8/8BSHXLEHo7BSYAAAAASUVORK5CYII=",deepLink:"infinity://"},{key:"galleon_desktop",name:"Galleon",shortName:"Galleon",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAN6ElEQVR4Ad3BC3SW9X3A8e/v/7yX3IAQCLdwhyCKGlARRBRorbdZaWu1lx27Xlydp+txW1vtXLs2nh0723o6e13VdhU7dahzFdGCchOEAAICohAScg/kfnnzXvI+z/P/7U0lPVlGIIE31O3zEYaZqoI2OerlTLfqzzJGJnmJ7rxAOJiFVZP0bTJkJKJOoEGUanGkFMdvhxGICMNNSDNVhY62IBnBpSpcD+5SVRagZINyRiIKUilGSnDZJMZ5lYycWhFhOAhpoloBfv6Vat0vqdXbUB1DOohYEXbiOE+JJJ/GjO0QEdJFOEdquyQRdz8WDsj9av1FDCeRTjHBXx1vbPnhpIJd9SJ3cK6Es6SqqI0tU899BOtfzvkkEhcn9KgY7yFxciOcA+EsWK87Dxv7kfr2TkD4UxFTK478tQRG/U5EOBvCEKgqfjK2QrR7FaqT+YAQE3wiltR7c0aMijFEDoOkWoF6oW/gJ54EcvkgUXtZKCC3fLf4W+uKH3yonSFwGAS11vG73V9i7TcBwweR6gTr+5/+bvHfbC5+8JF6BsnhDDQRDagXexrkc3zACeSgwU8X33//tuLvPVzNIDichlrfqO3+jar/Gf7vCKsjnywu/vbrxQ8+VM8ZOAxAVfGT7Q+j/j0MM5vsRpwAaRS2vr+y+MFvvVD84PfaOQ3DAGyy689F9RsMIzfSRndLA1UvPkW6CYy3rn0x2R3P4jQMp6Be9wVY95cMM7ezDT/RRe3a1cSO15B26hcFSD6qqgzE0I/aSMB6sadAszlPrO9R/uSPGQ5qvbvUi6xkAIZ+1NevonYh51nr/t207HmT4aC+9zP14yM4BUMf6sfHqe99hz+R8qd+hnoeaadaoL77gOpq+jOcpKokE7EHUB3FeeDFuvBiXfQVb6in9vfPMxzUevdGI9dNoh/DSWqTEwKOfJnzpOLZx/DicfqrfvEp3K5O0k41MyvD+bqq0pehl9/1V6hmch50lr1L/WsvcSpeLErVC79hOKj1v4StG0UfhhS10YBauYvzQK1P6eM/BFUGUv/6SySajpN2qiPVjvgsfRhS1Pc+jGoB50Ht2tVEq49xOup5VD73a4aD+v6dqkovo6rg2ds4DxJNJ6h6/jcMRuO214nVVZN2yiKiHZM5ydDUKCp6M+fB0V//CD/ZzWCoKlX/+STpp0aN3sRJhrwRc1AKGGZNJZtofXsnQ9G0YyPxEzWknWNWqCo9jNrkYlCGkxfrouzJnzBUqkrNmv8g3VTtYminhwEpYphVPPsYyfZWzkbD1nW4kQ7SS6fjB3JJMVh7AcOo8+gh6l9fw9myrsuJTWtJK1VRnzmkGIWpDBP1fUof/yGoci6Ob3wZVEknC1NJMaDjGSY1Lz9DtKaCcxVvqKf93X2kk7H+eFIMMJJhEG+oo+qFVaTL8U1rSSdfdQQpBtUQw+DoE49g3STp0rxrK148Sro4jgmRYgBLmjW88Xva3tlLOlk3SVPJJtJGxJJiEBMjjdxIO+VP/Zzh0LjtddLFT7oxUgxoK2lUvupnuF2dDIf29/aT7GglHZxQqJUUA1LHIFlrUQbWdmA3Ddte438TQAABBBAQ+hAGRZWW3dtIB1XqSQkI5phil3AG1lruL/457ZEY//T3dzE+P4/+wmPGMf87P+Z/EFKEPxAQThIwoRA9ir79I1BlMMKjx3LuBEHKSQlgvEP4nFYy6fL14l+wbssuetz02fv4yuc/zp133EAoGKCXk5FFtPYYg9Xd2kCPcN54BkVh5OyLOGdCVIKRSlICSOgtSDKQxuZ27v2HR9l76Ci9ovEE3//FM6x6fh1f/PTNfPKjy8jOyiQ0egxNJZtpKtnCcJj9hXsxwSBDYa3ltS17eOfdMv72nk9hjCFlHzLBJyUgSd2pjrioBuln85v7eOCfH6elrZNTOdHUykM/+S3/8thzXL98ITcsX8hVf/lNUEvTzq2k0+zP30vB9R9nMKxV9h8qY/2W3bz82nYaW9rpUd/QwsP/eA/BYHibiNAjQDQRkVGh7ar+Mk5qaGrl+z99hpc37GAwYt3d/Ne6bfxu3TYcY5hXOJWrE1nMz4iRDi9E80luOMYFFauZUjCO/DG55ORk4WDw1CcSidLY0k5VbQOHj1ax/1AZXfEE/b28sYSW9ghfu/v29ZwkpNhE+9+p+o80NrXx62de4ZkXXyfhuvQwIiiKtSACRgQFVJXTcUS5e0wr8zPjnItn23PZGMmhPxFSBFRRhkJa4k2HJ9ZVH3NJCZCy6ulnV+8+WPf998pqnDmzp3PNVQvooVZRAd9TMsLg++C6EAg6gI+Ig7VKIGA4VlVHWUUNyvt8FX7Zksfn89qYGkpyNkrcsTiXXc0NpIhQXllLWUUNiKBKijJUin2+rvqYy0kBepi5tT4n1o8ckXPTpq07sYAqgyICapUZUydx3bLFiCrGMRyrqqO0vIpfteQhDJ1y0pad/IEqs2ZM5vrlV4EqIhBLJDlaXkV9YzOO46CqnEnCDf4bfQgnTbtk5U3BUPIV0kGVGVMLuGDWNKwq8USCnXvfIel6pI0qmeEQhbOmM3H8GHzf8j5FRFCrBEMhPN9HfZduV/HV7nzj1R2LKys300s4KTD/MpnmjNsryHzOgghY35I/ZjSTC8YzJncUoVCIZLKb7KxsFl5xCQcOHKa5rR0siAHHOPjWJxwOknQ9GpvbqKiqIxKNImI4WyKCquK7HggEwyFCJkA4y3xiz8YXX6QPoY+pl3/01hDe7xgEVSU/L5eLLyok6Bh6iDE0t7RRU3eC5tZOPM8lEAzSQ1XpTwQEwfU8Ao7D+Pw8ZkwrYGRODmotCBw6coza442ICOfG7Kn0Wei9vVbpI0AfsUT1S8HgxI3iyIc4BccYFi6Yx6gR2YDQ3NLG9p37SHo+p+IEAqgqA1EFRXEcBwVONLVyoqmVXgJ87o5b6IrGiMYSHK2opryiBkQYIk3GE1/z3t2g9CP0M6Xo2gvDgex9QJgeqswtnMGMKZPwrWXX3ndoj3QhAoKgpKiipN81VxbR1NbJ4aMVqCqFM6cyZ8YURAxbS/bSGY0xGKr+qvLwlL9gx6/oT+jv9tuZVRa7LxDg4aWLFpCdmUEymcQ4BmsVARQLOCjvM6KoVUSEHj5wtKySmvoGEGGoFLhpxVW8d7SSqtrj9DU2L5eii+bQnXQZNSKbg++VU11/nIEI1HZ1ZRcdP/J8K6cgnMLd93zFXLH42nVHSyuv64onKK+qpbyiBjEGVeVMHCMUzpzOtMnjQZWE67HzrYMkkknOJOA4rLxxGZve3ENrewd9BRyHlTcu5/mXNyACqHLpRYVcueASXt24jboTTfTj+9Z+pGLfuk0MQBjAvKU35yei/i4xZjrnKBwKseSKS8nMCHO4rJJj1XWcSu7IHK67djFr1m2h23XpS4DbbrmONes20+169LrmyiKq6hoZm5dLwYSxbN25j/bOLnq4ycR9Eqn4QWVlJQMRTmPCrI9cnJMbeAMYTTqoMrdwJrOnFVBaUU3psWp6zZ09nakFE1i/pYT+FFh54wq2vLmTjkiMXpdfOpdorJvDZRX0EOCaxZeRGQ6xedvbj3eM9b5c+8oaTsfhNLrajjVOnFH4hu9zBxAmRQRUwXoWtRaL4DgGYRBEaG5tp7SimrGjc7l64Xyam9tZumgB8XiCHXsO0J8RuO3mFWx+8y06IlF6zb+oEAEOHi6nr6ra4zQ2Na1+4tEHvvjIfd9QzkAYhE996atXjcoZvTZgzGirihEwThAERC1J1wUMxoAxhtb2CAcOHSHpeigDK5iQzyf+7MOsWr2GjkiU/jJCIT56wzJe3bCNrlicXpfOLSQUNLx18Aj9+RL87fjM6BdKtm7wGARhkBbfcvvFTfWda0TMdE5DVckbNZKii+cQCgYQMZRVVFNWWYuI0CM7K4PlS66gsamV3fsPAUJ/UyaO4/KiC1mzfiu+tfS6/JILAGXPwVL6s+r+oK3KfrOtZaNlkIQhmHHhsnwysp52DNcxWKoUzpzKzOlTCAUcfN+SSCTZsmMPvlr6U4VrFy3A8z127DlIX1cvLKKto4t3S8vpJxpL2rtDGa3/Xrl7N0MhDFHBkmtNOJH5dSPmQSDMIMyYMomL5syksyvKm7vexqpyKuPGjmbpwgVs27WPxpY2eglw04eXcuhIOVW1x+lL0d3GDd159MBLRzgLwtm4/XYmVMcvzEqYn5qA+yFOIRQMsGRhEVkZGVTU1PFeaQWIcCrhYJAVS6+kIxJh++4DiPBHeaNGsGLpItZv3k4kGuOPNNDRnbTFMXPiJy0H9nicJeEc5M6YQzB/zq0jfa9YkPkoFM0rZNL4fJKux/bd+4l3dzOQjFCIa6+6DBQ273iLpOvxR6osvryIzIwQm7a/RR/xOP5j3SbwUPPuVxo5R0IaBJYslWmJSTd+8uZFX92xd//19Q1NDgNRZea0ycydPZ3uZJI3Svbheh59TRw3lsWXXULJ3gMcb2zhfVLneYEnWqIj/jWyIHmC554jHYR0Gnkr4yc0TM4MmDska9StjsoSgaAIzJs7m4IJ+QhCeVUtpeVVIEJf2VkZLF+ykKamVnbtP0RKXbdNvOIkEi90BXI2NB98zSPNhGGSPXEiubnTRnzuMx9bNH3yxCtWPbN2XkNL50zEFACjQTMBA7jhcCiy8sblDR0dsepX168/4pnAft/rLIn62aXthzcr/1/kXng15OQzadZCcifPkbyCQpORP5fr77qLd8rKgHmcb/8N3VaULP16cD8AAAAASUVORK5CYII=",deepLink:"galleon://"},{key:"umami_desktop",name:"Umami",shortName:"Umami",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANSklEQVR4Ae3BC1RVZaLA8f+39z4HgQXiJBmgLWpEHRXFQhHMiJGsMTR5zJjL8Iosb2KOaRpZ4gulScXedWOIAequtGmC1mAjjSmWYyRpoGiTiEp6xgxWJ5QAOY/9XbhLW3DcoFQ+6/fjF7/4eRN0k5TSExgLhAD9AA+urCbgOFAB7BBCNNINgoskpQwBFgFxgDtXp2agAMgUQlRwEQQXIKXsCawHkgClsrKSwsJCSktLqampobGxESklV4IQAk9PTwIDAwkPDyc2Npbg4GBa6UAusFAIcYouCLogpRwIFAFBu3fvJjU1lZKSEtooioKfnx9eXl4IIbgSpJQ0NDTw1Vdfoes6baKioli7di2hoaG0OgRMFEIcpBOCTkgpBwIfSin7rFq1ivT0dHRdJyYmhuTkZKKiovD29uZqcPr0aUpKSsjJyWHTpk0oisKyZctYunQpQoivgTuFEFUYEBiQUvYEPpVSBs2aNYucnByCgoLIy8sjIiKCq9nHH3/MjBkzOHToEMnJyWRnZyOEOASMFEKcwoWCsfVA0KpVq8jJyWHMmDGUlZURERHB1S4iIoKysjLGjBlDTk4Oq1atolUQsB4DCi6klCFA0u7du0lPTycoKIhNmzbh4+PDtcLHx4dNmzYRFBREeno6u3fvplWSlDIEFxrnWwQoqamp6LpOXl4ePj4+uNKrPkP/9J/Ib2tR+g9Hvfe/kKe/wfF6BkhJByYz6p1xKIPDwHYGe/YS0HXOIxSUXwejjn8QVA2kxP7nJ8F2BkNCIHrdiDJyPMqA22jPx8eHvLw87rjjDlJTU9m2bZsCLAIepB2NdqSUnkBcZWUlJSUlTJw4kYiICDqwncH+0qM4PyrkHOfWtxCBQ1AG3Y785iv08u24cn6wEXP6X1EGhyF6B+DYsA4jzg/A+VEBpvkvIfrcjHbfTOx56ei7P6BTbz+POnYypj8+C+YenBMREUFMTAxFRUVUVlYSHBwcJ6X0FEI0cpZCR2MB98LCQtokJyfjyrE5D+dHhXQgdeyvPAYOO6Y5mQjPnpzHYcP+9Ezkfw6jTXkUbfJsOqP/+1Na5v8Wx9+zEH63YE57A/O6f6COmQSaCSPOHe9if3EBrpKTk2lTWFhIK3dgLO0odBRCq9LSUhRFISoqClfqyPFgMuNKHvsCx4ZMhG8A2py1GJGnrdhWPICsPY42Yzna7+fTqeZGHH9ZQcu8u3DueBfl18MwPZaFW045ptlrUEKjwcOL9pw73kWv+oz2oqKiUBSF0tJSzgqhHY2O+tGqpqYGPz8/vL296cBhR/jfinZ/Co6/PY8rR+HLKCGRqGMmIf/9KY5Nr+FK1lmwpcVjXvkW2rTHEb39sWcvAYcdI/I/h7GvT8Hxv39CvScRNTIe9d7pqPdOB92JtFSjWw4h6yxw2oowmWnP29sbPz8/jh49yln9aEejIw9aNTY24uXlhStHfjrq5Dlof5iP8+Mi5IkjdKDr2J+ZgzmzGC1pObrlEHrFh7iStcexPXE/piX5qPckIvoNwL4+BfnNV3RGfn0Mx+sZON74E8qAESghd6EMDkPcOgT15oF0xcvLi8bGRs7yoB0FA1JKhBC4kk3fYc9aDOYemOY9B4qKK/ltLfanZ4LDjjk1G+XWoRiR9XXYlsThLHkbZXAY5ue2ot5xPxckdfSDe3C8tR7b8j/QkjiElsQh2B4dj23lVPQDn+BKCIGUEiMK3aSX/RNnydsog0ai/f4RjOiHKrA/MwfcPDAt34DoNwBDtjPYn5+H/cUFCM2EadGrmNNeR/jdQnfIBiv6kUr08u04S/5Kdyj8APbsJciTNWhTHkUJHoMR565i7C8vRHj/CvOqvyECB9MZ59aNtDzyW/TPtqGE3o3bi9sx/fdTiBv86DYp6Q6FH6KpAXvmbHA6MC16FeHbFyPObW9hf2khwvtXuGUUoAwJpzOy9ji29GnYn5qBPPkl6oQk3LI+wTT/RZRBoVwqCj+QXr0X+6tPIHr2xrwkHzy8MOLcuhF7ZgqYe2BesRE1eipdcZa9T8u8KOzPzkVaqlHvSsD8dBFur+xEe/AJlEEjQdXonKA7NDqh6zrnUVTac27dgOgXhDY5BfPjr2FbnQh2G66cHxch67/G9HgOprnPoAy8HXt2GtjOYEh34vzwHZwfvoMyZDRq9FTUsN+hJcyDhHnQ3IheXYF+ZD/ScghZZ0HW10HjacTNA3Gl6zqd0ehEfX09rsSNfXHleH01orc/6h33Y1r4P9jXPQROB670z8uwLfodptQ/o949DeU3o7A/90f06r10RT/wCfqBT7CbUlGGjUEdEYUyZDTK4NEowWO4GPX19ZhMJoxodKK2tpa6ujp8fX05R42IwbEhE3Qn39N17M/NQ3h4oY6eAItexb4+BRx2XMk6C7YnJqM9+DjapNmY17yHY1M2jo3rofk7umRvQd+zDX3PNv6fmztKv4EI/1sRvv7Q0xfR60bUsZNpr66ujtraWgICAjCi0AkpJcXFxbQnAvqjTU7hPA4btqdnopeXoIbfh/nJfOjhgSGHDUfeKmxpsciTR9Hun43by/9CvXsaqBoXraUZvboC50cFON55CcdfliOPHsBVcXExUko6o9CFrKwsXGmJT6JNfQxMbnRga8H21Aycpf9AuS0K8+oChG8AndE/L6Nl/jgcbzyFcPfE9HAmbi99hBo9FUxmusXkhjb1MbTEJ3GVlZVFVzS6sHPnTgoKCoiLi+N7QqBNeRT13uno5R8iv/0akHzvzHe0UfoPx+3lf+Hc/QGy9hhISWf0w/tQhkYg/G7BNPcZtAefQN+1GdnUQNcEoteNKCPuQvTsjauCggJ27txJVzQuYPbs2dx2220EBgbSnujZG/WueLpk7oEaEUN3CR9f1Hum82PU1NQwe/ZsLkThAurq6oiOjqa6upprRXV1NdHR0dTV1XFOjx49MKJwEQ4fPszIkSPJzc1F13WuVrquk5uby6hRozh8+DDtBQQEYETjItXX1zNz5kzWrFlDUlIS48aNY8CAAXh5eSGE4EqQUtLQ0EBVVRVbt24lNzeXgwcPYuT222/HiEY3HTx4kMWLF3O5nDhxAqvVytChQ/kxYmJiMKLwMzBo0CAiIyMxovAzsHr1ahRFwYjCdW7KlCnEx8fz+eefY0ThOjZ69GhycnI4deoUKSkpGNG4Tt13331s2LABk8lEfHw8R44cwYjGdcbX15f09HQeeughmpqaiI+P5/3336d///4Y0bgO3HDDDYwePZrY2FgeeOABPD09qaioIDExkf3799Omb9++GNG4AqKjo0lJSSEkJAR3d3e60qdPH3x9fTlx4gRGPD098fb25pyqqioyMzPJzc3F4XBwTmhoKEY0LiMhBC+88AJz586lzZdffonVaqUrVquVzkgpsVgsWCwWysvL2bJlC7t27UJKiauJEydiROMyWrBgAXPnzmXPnj0kJSVRWVnJ5TB06FDGjh2LEY3LxN3dnbS0NE6ePMn48eOxWq1cLhkZGQghMKJwmYSFhdGrVy9yc3OxWq34+/uzb98+9u3bh7+/P5dKYmIikyZNYu/evRhRuEz69OlDm5qaGtpER0cTHBxMcHAw0dHRXAqRkZFkZWVhtVqZM2cORjQuE4vFQptBgwbRpqioiM2bN9OmqKiIn1pCQgL5+fkIIUhISODYsWMY0TAghOCnVlZWxsmTJ0lKSuLZZ5/l+PHjTJgwgZ9aQEAAGRkZTJ8+nYaGBhISEigpKaFfv34Y0eioiVaenp781Ox2O4sXLyYvL4/t27fz8MMPs2XLFpxOJz+GEIK+ffsSFhZGXFwccXFxuLm5sWvXLqZPn05VVRVtPDw8OKuJdjQ6Ok6rwMBAvvjiC35q+fn53HTTTWRkZLB582ZaWlpobm7mx/Dw8MBsNnPOvn37WLduHW+++Sa6rnNOYGAgZ1loR6OjClqFh4dTXFzMpbBmzRree+89Zs2axYgRI3B3d6crw4cPx+FwcODAAVxJKWlubsZisVBeXs6WLVvYu3cvRsLDwzmrgnY0OtoBNMfGxrovX76cS2X//v088sgjXIwTJ05gtVoZOXIkP0ZsbCytmoEdtKPQjhCiESgIDg4mKiqK60VkZCTDhg2j1btCiO9oR+F8mYC+du1aVFXlWqeqKmvXrqWVBDJxoeBCCFEB5IaGhrJs2TKudWlpaYwaNYpW+UKIz3ChYGwhcGjp0qUkJydzrUpKSmLZsmW0OgwswICCASHEKWCiEOLr7OxsVq5ciaqqXCtUVWX58uW89tprKIpSC8QIIeoxoNKJlStXfrNixYoiIcQ9kZGRN0yYMIHq6mpqamq4nBYuXEhzczOvvPIKFyMyMpKNGzcybdo0hBCHgfFCiC/ohOACpJQ9gfVAEqBUVlZSWFhIaWkpR48epampCSkll8qePXuor69n3LhxuBJC4OHhQWBgIOHh4cTGxjJs2DBaSSAfWCCEqKcLgoskpRwBLAJiAXeuTs3Au0CmEOIzLoKgm6SUnsCdwHCgH+DBldUEWIAKYIcQ4jt+8YtfXKz/A/OhBgM5KLZoAAAAAElFTkSuQmCC",deepLink:"umami://"},{key:"atomex_desktop",name:"Atomex Wallet",shortName:"Atomex",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE6UlEQVR4AeXBe0xVdQDA8e/53XNFQFJ5e0NAAUXeMQHJByo+cM6Z+WrO0h66uelEatl0U9egnDa1rczN1eq/Mg39I8WQphYOo4z54K0Cgl6eQy6IXO49J/2DZk3k4r0c2c7nI6mPoGMCnRPonEDnBDon0DmBzgl0TqBzAp0T6JxA5wQ6J9A5gc7JvCD1ZgslpWasNoXJE7yJjvDjRZDRWGt7NzsPnCfv4k1UlX/FTPJj//Z0osJ90ZJAQ5YuK6u35nLmwk1Ulf+4XtnMii0nuFHVgpYEGjr4zWWqatroT9eDXj7cV4CqohmBRux2lR/zyhnI9cpmSqub0YpAI+aWTjo6e3BE5e02tCLQiFEWOMpoNKAVgUb8fTwJCvRiIJIkkTAlAK0INPTeqgQGsmhWGEGBXmhFoKF1y+JYPCec/kSEepOTlYaWZDQkhMQXuxaSHGvi6LES6s0dPDbay40VGVPY9nYyXp4j0JKMhn46W46/jyfrl8exbnkcza0PsNnsBPiOwmCQeBEEGjl/uZb39xZQeKWexyTA38cDU4AXBoPEr0U1HPr2D7Qm0ECD2UJmdj7R4b5krk/iacpvtvL5d8XUmzvQkmCIWXvtbNqdh6KqfPXxItxGyDzN6wsikSSJY2fK0JJgiOUcLuRqRRMHd85n/LiX6E+gnydpycEcP1OOoqhoReBCPVY795o66bHa6GNXVLZvnEZ6aigDWb04ioZGC7/9eQetyLhA3d37fHLkEgWXarD22jHKgtkpIezYNJ3sbWk4Kj01FN+xHuT+UkFacjBakHFSxa1WVm3Npb3jIX16bQr5hbcpKmng+0PLiJnkhyOMsmDf9rnIBoFWBE5QVcj69BztHQ95GkuXlczsfBRFxVHpqaGkJQfTR1FUhpKME65VNHG9splnqapto/jaPVLiTTjC2mvnh59Lyc2vpLSqmZ5eOwE+nsxMGs+7KxOInOiDK8k4oaq2DUdU17aREm9iIHV377Nh52nKb7XypHvNnRw7XcaJsxVkvZPM5rVTcRUZJ3i4G3GEx0gjF4vrOHWukplTg5mVNB7vMe48qbW9mzcyT9LQaKE/drvC/qNFGIRg05pEXEHGCUmxJoyyoNem0B+DkEhJMHG1vImLxXc4nleOEBLxkf7MTglhydwIwoLHknO4kIZGC4747OsiFsyYQFjwWJxl2PMIz8nD3UhHl5UrN8z0Z+3SWJbOm0R4iDcbViUwf8ZETH6jqLvbwclzVZRVtzBnWggf7C1AUVUcoSgqSBJzpoXgLBknfbQxlbb2bk6cLef/lsyNYNfmGfSRJImYCD9iIvzY/OZU7lt6UBSVS3/XY7MrDEbhX/W4goyTZFlwYMc8Vi+O4vSFaszNXfj7eJAxK4zpiUE8y2gvNx5rbOlisBpbOnEFGRdJiTeREm/ieXi4GxksT3cjriAYBmIn+zNYsZP9cQXBMBAV7suUMF8GY3lGJK4gGAYkYPeWmQgh4YhXE4PImDkRVxAME6mvvExO1mwMBolniY7w48s9C5EkCVeQGUbWLIkmIsSb7MO/U1LWyJM8PYy89VosW9cl4z5SxlVkhpmkuHGcOrKSmvp2blS10N1jY5z/KBKjA3F3k3E1mWEqNGgMoUFjGGoCnRPonEDnBDon0DmBzgl0TqBzAp0T6JxA5wQ6J9A5gc79A200jdqC2KUJAAAAAElFTkSuQmCC",deepLink:"atomex://"}],DS=[{key:"kukai_web",name:"Kukai Wallet",shortName:"Kukai",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAHNklEQVR4Ae3BbWyUhQEA4Ofevg0f7d0RsAllEJSpQVy1K3SQIQro2HRoVIymS/Zj6w8xfk6NWzRzoJkO48d0MUaTZv6yMRFNxM2EIX4wIthSUJERgrCmjHZWCXdXapsWbgk/iLbvlXuPsgHjeZx11ln/1xJiaGjMV+NazMU0lDs1DKADm7GmuSnRqUgJRWhozF+AR7EMoVPbIFbjoeamxOeOI+E4Ghrzy/EMxjq99OGe5qbEi0ZQZgQNjfk/4HGETj8hltbUrRi3fevKdQooU0BDY345Hnf6u6ymbkXX9q0rt4gQiNDQmL8Azzhz/LGhMf9dEQLRHsVYZ46x+L0IgSEaGvPVWObMs6yhMV9tiNBw1yJ0EiQSVJ1D9WQmTmDsGEf19XPgIJ1ddH9JPu9kCHEtXvINoeHmGkXl5cyppb6Oiy8iWWlE2Rw7dtLSRus2BgaMprl4yTeEhptmFIwfz9VXsWQxyUpFSyWZV8+8enI9rF3P2+vo7TUaphkiNFy5IowZwyWzSCbZ287edsdcMZ+Gm0glnZBkJcuu40eLeOU1PtjomPOmM+Ncsjk+/Yy+fsUoN0SoBOfP4L7bSacds6mFtev56Y+ZXWtUpZIs/wX13+cva/nJlfxgtmMyGZ56nt17xBaKacwY7ruddNq3zKtnXr2TanYts2sNk05z3+3c8yD9/WIJxXTJLNJpJ+RQL51dZHOOSiWpnkzFeCVLp7lkFi1bxRKKadw4Jen+inc30NrGvv0iTZ3CnDoWLaBqktjGjRNbKKb2DrH0HOLV13lvA4ePGNG+/ezbz5q/snABt9xIZYWitXeILRBTewd/36QoO3fxwMO88z6Hjyja4SO88z4PPMzOXYqycTPtHWILlODFP/PxdiPa8jGPPc3BjJIdzPDY02z52Ii2fcoLTUoSKMHhw3T8S0E7d/HsCwwOOmGDgzz7Ajt3KWjffo4cUZJACcrLWThfpJ5DPPcig4NGzeAgz71IzyGRLv8h5eVKEijBnFoqK0V69XUOZhQlnSKVVJSDGV59XaRUkjm1ShIqQX2dSN1f8d4GI0qnuGEp8+pJJR2VzbGphTfeIpNV0HsbuO4aqiYZpr6OD1vEFogpkeB7s0R6dwOHjyjo/BmsWsmSxaSSjkklWbKYVSs5f4aCDh/h3Q0iXXwRiYTYAjFVnUNlhUitbQpKp7j/TlJJBaWS3H8n6ZSCWttESlZSdY7YAjFVTxbpUC/79ivohqWkko4rleSGpQrat59DvSJVTxZbIKaJE0Tq7DKiefWKNq/eiDq7RJo4QWyBmMaOESmbU1AqSSqpaKkkqaSCsjmRxo4RW+C/IJFwygrE1NcvUiqpoEyWbE7RsjmyOQWlkiL19YstENOBgyJVTzaiTS2KtqnFiKoni3TgoNgCMXV2iVQxnqlTFPTGW2Rzjiub4423FDR1ChXjRersElsgpu4v6Tkk0pw6BWWyPPknsjkFZbI8+ScyWQXNqRMp10P3l2ILxJTPs32HSIsWUBYoaPcefv071q4nm3NMNsfa9fxmBbv3KKgsYNECkT77B/m82EIlaGljXr1hqiaxcAHvvK+gTJaXX+HlV0glHZXNKcrCBVRNEqmlTUkCJWjdRk+PSLfcyIS0omRzZHOKMiHNLTeKlM3Ruk1JAiUYGOC9jSJVVnDXrYShUROG3HUrlRUifbCRgQElCZSgLGDqFAXNvJC7byMMnbAw5O7bmHmhgqZ+hyBQkkAJljdSW2NEsy/lwXuZkFayCWkevJfZlxpRbQ23NSpJIKbp05g/V1FmXsgTj3DlFZQFilYWcOUVPPEIMy9UlPlzmT5NbKGYpk8TS2UFjT/numt4dwOtbezbL9LUKcypY9ECqiaJbfo02jvEEorp66+VpGoSN1/PzddzqJfOLrI5R6WSVE+mYrwT8vXXYgvF9MkOMhnSaSWrGM/5M4yqTIZPdogtEFN/P089TybjWz7awiNPsGWbk2bLNh55go+2+JZMhqeep79fbKES7N7Drx6k5mJSSfb8k73tjtq5i8vn87ObSCWNimyOV17jg42O2rmL86Yz41yyOT79jL5+JQkNN6AIff20tIn0wUZat3L1VSxZTLJSSXI9rF3P2+vo7fUte9vZ2y6uAUOEhuswCnp7Wf0mb77NnFrq65g1k1TSiLI5duykpY3WbQwMGE0dhggNtxm/NEoGBviwhQ9bSCSoOofqyUycwNgxjurr58BBOrvo/pJ83smy2RCh4dbgeYRGWT7PF9180e1/YRBrDBEYorkp0YnVzjyrm5sSnYYIRPst+pw5+vCQCGUibN+68kBN3YqvsNSZ4Y7mpsTfRChTwPatK1tr6laMw2VOb6uamxKrFFBmBNu3rlxXU7fi37gKodNLH+5obkqsMoKEIjQ05i/Ao1iG0KltEKvxUHNT4nPHkRBDQ2O+GtdiLqah3KlhAB3YjDXNTYlOZ5111llF+A8aUDCF69BprwAAAABJRU5ErkJggg==",links:{mainnet:"https://wallet.kukai.app",ghostnet:"https://ghostnet.kukai.app",mondaynet:"https://dailynet.kukai.app",delphinet:"https://testnet.kukai.app",edonet:"https://edonet.kukai.app",florencenet:"https://florencenet.kukai.app",granadanet:"https://granadanet.kukai.app",hangzhounet:"https://hangzhounet.kukai.app",ithacanet:"https://ithacanet.kukai.app",jakartanet:"https://jakartanet.kukai.app",kathmandunet:"https://kathmandunet.kukai.app",limanet:"https://limanet.kukai.app",mumbainet:"https://mumbainet.kukai.app"}}],US=[{key:"airgap_ios",name:"AirGap Wallet",shortName:"AirGap",color:"rgb(4, 235, 204)",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAJ60lEQVR4AeXBe2xdd2HA8e/vd865N9f34ce1r+36GcexnTRpmj4S2gbSkbYq64BVTKggJsYfLWxisEkriG4sgECjmjZRVIQ2dTw0aYitaFC2wUYofajQNU3S5uE4sWM7tuPY8eP6Xt/nOfec3zYhT4dbP37XsdM//PkI9b/YwiRbnGSLk2xxki1OssVJ3gYFz6VcpuTwdpDcQLN2gT86/Su6jz1Lua5jz/LoG69wrZjnRjK5AYqeyzdGBvjyxTdYcGzqrCDlbM/lH8Yu8uzVUf6iZx+f3L6boJRsNpNNpIDR1DzfuHSOv50YQkfKsXn83HG+OTLAl/pu45GW7Ugh2Cwmm0ABY+kkZ2aukioWyDg2awlKA3BYMpxb5CMnX+TJodMc7d3Pw83tCAQbzWQDeUoxkpqnf26adLFAJf6gfSd/PXSGcmfSSX7v+PPsidXy2e69fLBlO5aQbBSTDZB1bC4tzDKYnKNQcliPr+6+g72xWv78/AnG81nKnU0n+f2TL/G58yd4rKOXj7XvpGVbFdfLZJ0Kbonx9AKXU/Ncy2VQrEywNgF8pHUHH2ju5OmRfp4cOsO8XaTcRD7LXw6c5IsXTvFb9c18qKWL9ze3U2cFWQ+TCqTtIpOLKSYyKa7lMiilWE3QMNkVT5APh2F6DB0hw+Dx7r18vLOPp4bP8bVL/SSdIuVcpTg2M8mxmUk+8abkcH0T72tq57cTrXSFo+gy0XRiaoKB+WvoCFsB+uIJumvqMaXk9XyGSsVMi8/33MqfdN3M341e4Knhc1wp5FiOozyOzUxybGaSTwFHe2/laO9+dJhoyjo2qxFAUyTGztp6WiPVCCHYCFHT4s+69/Dprt384Opl/v7yAC/OTqFY2Wgugy4TTbZbYjl126roqK6lM1ZLlRVAh6JylpQ80rKdR1q2M5Jb5HsTw3x/coQz6STl5uwiukw02Z6LX1u0htsaW4gEgqwlKA38sq5D1i0RNkzWY3tVlCd69vFEzz4uZlL86dnX+Mm1CZYknSK6JJocz8MvURUhEgiiY3e0Gj/b8/jjM6+SdUtcr55INXfXJfBLlRx0mWgquS5+ppTo2huroy9SzUAmxZLvjA3yTxOXiBgWHgrFrzUGQxyqS/BYRy8HahvQETUt/NKOjS6JppLy8DOlRJcAntx9B+Vsz2PeKbLg2KQcm5RjczGT4ltjg9z18r/x2JuvUPRc1hI1LfwypRK6JJpKnoefISWVeG9TO1/edRu6FPDM5Yt88PVf4CnFaqoME7+sW0KXRIOrFOUMIanUEzv38cMDR+iNVKPrx1PjPD1yntVUGQZ+Rc/FUwodJho85VFOCsF6vK+pnfc2tXM6PU//4gK25yEAKQSuUrw0N8V3x4fwlGLJXw2e5g87+7CkZDlBw6Bc0fMIGQZrMdGglKKcFIL1EsC+WB37YnWU+2hbN7dXx/nkmVdZMl3M88vkNQ7Hm1hOQBiUs5VLCIO1SDQo3kog2Cwf7+yjxgrgd35xgZWYUlDO9RQ6JBqU4i2EYNMYQrBNGviVlGIlEkE5D4UOiQYheAvF5jk2M8lUMY9fZ1WEzWCiQSAop5SiUlm3xJxdRKFYjuN5PD97lc/1v45flWHyrngTK3GVopwhBDpMNEghKOcphQ7b83jm8gWeGbvIm6kkCkWlHuvsJWZarMRRHuUsIdFhokEKQTlXeaxlPJ/ld1/7OadSc6zXzdEavtS7n9UUXJdyQcNAh4kGKQRSCDylWFLyPFaTdGyO/PKnDGXTrNedNfX88MARIqbFarJuCb+AlFhCosNEkyUNim6JJY7rsprP9h9nKJtmPfZEa/lEZy+PdvZiCcla0o6NX9S00GWiKWgYFN0SS4quy0qmi3m+Oz6EX40V4It9+7mnrhFDCJZjCEFzsIp4IEgl5pwifnVWEF0mmoKmBXaRJYWSw0qOzUzieB5+zx24j0PxRjbDVCGPXyK4DV0STVWmhV/GKbKS4dwifr2Rag7FG9ksl3KL+LWGwuiSaIoFt+E3X8izEonAz/E8NtOJhVn8+iI16JJoioeq8Ms5NuligeX0RqrxG84t8tzUGJvh7GKSyUIOvwO19egy0ZSoiiCFwFOKJZfTC+xtaKLc/Q03UWWY5NwSSx55/QU+veNm3lHbgCEESwJC0hOpprMqwnr885UR/ILS4J11jegy0WRJg8ZwlKuZNEsuLcyyp74RIQR+1VaAT3Xt5quDp1lS8FyeHDzNSvZXx/nKrtt4MNGKLsfz+PbYIH73NdxExLTQJalAV3UdflnHZjSdZDlHe2/l7roEuk6l5njo1Z/xlYtvousfJ4a4Usjh99G2biohqUB7rJaQaeF3euYqrvIoF5QG//GOB3i4uQNdCvj8wEn+ZXKUtWTdEl+48AZ+baEw729upxKSCkgh2BVP4Jexi5ydmWI5MdPiB3e+m5/e9QAfuKmTpmAIwdoeP3ecklKs5gsDp5jIZ/H7TPdeLCGphEmFeuoauDA/Q9axWdI/N01LtJr6UJjlPNDQwgMNLfwfxW+at4t8pv843x4bZMlYPsMr89McjjexnBdmp/ja8Dn8usMxHu3opVKSChlCcntTK36eUrw8MUy+5LAWAQhAAAKIB4J885a7qbEC+J1NJ1nOeD7Lh068gKsUfl/fe5CAlFRKsg5t0Ro6qmvxyzkOvxi7hO26VCogJY3BEH5516XcvF3koVd/xnQxj9/H2nfyYKKV9ZCs08GmdqKBIH7JQo7nxwYpuiU22oxd4P5f/SdnF5P47YrW8NSeg6yXZJ0sw+Bw2w4saeA3l8/xXyMXWbSLVEJRRvD/LmRSHHr53zmVmsOvzgryr3e+m4hpsV6S61Ad3Mbhti4MIfFL2wV+MjzAaCqJPoWf4Ne+d2WYgy/9mMFsGr+wYfKjg/fRE6nmephcp8ZwlHvbd/Di+CVKnscSx3N55coIl9Pz3N7YSiQQpBKXcxkefu3n/GhqjHIR0+K5A0e4py7B9TLZAE3hKEc6dvLi+DCFkoPfxGKKyUyaHTVx+uIJYoFtLEcpfsPTI+dZTlMwxHMH7+OOmno2gskGqQ+Fec/2Xl6eGGE2n8XPU4rB5CyDyVkaw1HuuqmDsBWgUnfVJvj+HffSGgqzUSQbqMoKcH9nD7c0NCOFYDnT2UVOTE1QiYCUHO29lRcOvYfWUJiNZLLBpBDsbWimI1bLyekrXMmkKJe2C+h6MNHK39x8J7uiNWwGk00SC27j3vYdzOaz9M9OM5FJoZRChyEEDzW28Xj3Hu6pa2QzmWyy+lCYd7V1kS85jKaSjKbmUSjKmVJyS6yWD7fu4MMtXbSGwtwIJjdIyLTYFU+wK57AVR7l/vudv0PEtLjRJG8DQ0jKRUyLt4Nki5NscZItTrLFSba4/wG5rKPEn6lO8wAAAABJRU5ErkJggg==",universalLink:"https://wallet.airgap.it",deepLink:"airgap-wallet://"},{key:"naan_ios",name:"naan - your portal to web3 ",shortName:"naan",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACDklEQVR4Ae3BMWgTcRTA4d97/aNBI2SpOKmbgjrUBNvBQbsJOggd2sG14NCILg52sEPr3ExZnVwLTgUJggq2TUAwiJNkkapEdAjUoeR5NuAtSe3JUXt5fp9YsWSkZ0Ea9YdErFjaAnIMdlsa9erixOeCmH7j37ilOKc4pzinOKc4pzinOBfY3QdgnZ7rQJ4ho+yuJo36jDTqM8AnhpDinOKc4pzinOJcIHs6XewmAyhcA7nHHgWyZ3t+7fgzBlga/3KaBALZM/Jool0i0sU2H7we/Uhkabx9UQQ1654igUD2HDOzDXbYIjDPDntlRg6EJBTnFOcC6TpnxdI0PSNkQCBdU8AUGaI4pzinOKc4pzinOKc4F4A5BnvHb7YAUiA9L/nF2ALm+BsidWJ3gUAissF/zolRfgycZP+tCJVlIlbLV4EzpGNdJjv3iVjtaAXkAoOtBuAScJb91yRWBEqk4wexMeAyg7UU5xTnFOcU5xTnFOcCB9820KanAORIUeDga8pkZ4yI1fJPgGlSpDinOKc4pzinOBdITKpgX+lLRsFmyZBAcstC5T19GHfOA7NkiOJcIDFrGOUu8Fyo3CBilJ8CV8CUjAkkd4SeHLEckCeDFOcCw+ew1fIn6DnEHwSGz1Vgkz1SnFOcU5xTnFOcU5xTnAvAKtAkubfEXgDfSUTeEKsBLfprEVsDAump/wQutXPS0gaA0QAAAABJRU5ErkJggg==",universalLink:"https://www.naan.app/",deepLink:"naan://"},{key:"altme_wallet",name:"Altme Wallet",shortName:"Altme",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAF7klEQVR4AeXBW5DVdQEA4O/3O/+zexYWlEWQe6W4hhJQDBdRCRaMFMfrjICAyjg+ODXm9NDlofGp0pp8sRqnxqeaQqbsMo1O4ziJ17QAwWuikxaKQiIBC8tyzvk1gzM0O8vZ5dz25XxfWCslLSxqcVGLi1pc1OKiFhe1uKjFRS0uanFRi8uMsJCn2EHWQdt0lDj+b8r95I6SikZUZiQVGH8xV9/J3B7GTiCVOfghO57gsQc58AaOGzGZkdJO91Xc/VPOnkgIThk9likzWbSaH93Ku0+jaEREIyFSmMpdDzDuXEIwSAhMmM5Xfkw8y4iJRkKBlbfQNdmwps1iwXXIGxFRswVCgRW3EoJhhcCXNlEebUREzZbjomWcO8MZu3ARUy8mZJouarKUsWIDIThjuYxl60mjNV3UTJGubuZdgaAql15L+3hETRU1USpw6Q10dKpa12TmrSJ0aKqoibLxLF2rJgErbya1a6qoSeIouuczdabaBC6Yz9TZhDZNEzVJMWPlJmLOIKlM7yHee5P33qT3ECkZpK3AF2+iFDRNpglCxvjzmLvUIB/v43f388Lj9O5z0qgJLL6C67/OuHOdEgKXXMsj36fvPU2RaYJUYPE1jDrLAB++y/fWs28n4Rip5KTDe3l8Nzu38u1fMek8p3RNYe4qXvwF6YSGi5qgnGfFRkJwSqnIT+5m33YcIZX8XwlH2L+TB75KueSUGLniNk5kmiJqtDwXLWHSpw2w+2+8vhXHVJT62P00rz1rgAsXMX0echouarByoOc2Ys4A25+jLRlWVmbnswbI2li6jtCp4aJGCoyZxoIrCcEAR3sJwfDK9B02yLK1xDGIGipqpAJL1lAYbZCJEyiXDC9H12RSMsDZ5/D5KwkdGipqpLPoudlpLbqKcgeiygKlHItXE4JBVq6n3KGhogYJBboXMuMipzVxBl++E2OcXiCMZdXXmHyewQKzFjFpJiGvYaIGKXfQs4EYnVYIrPsGX7ydNJ7QTsgRcoQCzuHyW1j/LRXl21m2jnKmYTKNkDF2Cl9YYUjtHdxxH0uu5i8Ps/cVEibPZvkaZl9OLlNRCFxyLb+/l+N9SOqWaYQCC6+hc5xh5TLmLGfOckpFJ+UyZ2zCdD63kr//GkV1ixogFOhZQ3BmUiIlQiREUkJyRmJkxW2UcxoiU6fQxswFzJiFYFjlEm/v5K+P8v52Yp4Z81lyDdO6CdGwZl3C1IXsfQ4ldcnUqYiejeTyhvXRHh76Jtv+RCwRfGL7o/zhPi7fyMZ76BxnSO0dXHYDW3YQjqhLVKexU5i/ihAMae873HMdO35DPIxeUi+pF0dIH/PUz/juag5+YFhLbyI/Ud2iOoQCC66nc5wh/Xc/P1jPgVfRj2SwhGO8s537N3DsiCF1TWLuUmKnukR1OJFn1a2EoKJSkYe+wwcvkfoM7zhvPs+WeymXVBQDq27neE5dolrlOX8Bn5qjopTY9hgv/hJHnbFwlD//nLd2IDm9wKxFTL6AkKlZVKsxrNhECCrqP8aWewl9qneYzT+kWFRRLmP5BlK7mkW1yNFxDotXqygldj3Jnl0oqVo6xhvP8NZLKgqBpTeSdSKoSVSLAguvpvNslSWe3EIsqlk6yNYthjR+CnNXIqcmUQ3CKJatMaSD+3n1GdIJtTvOtsfoPaSiEOnZhIKaRFUKbUy7mPPnEYLTSoltT9B3ACW1K3FoD7ueMqTZS5jQjZyqRVUqB+YtJ8sb0tMPE4+qW+jlqc2G1NbBZy8j5FUtqlJCrt2Q/vkyu18g9atfkZf/yJ5/IKkoC0iqFlUplnj+txzcR0oGSIn9/+LBO0gHkDRE6RgP3sXHH5KSAVLio/fZuZVUVLWwVkqqlTFxNpetY2q3k0pF3n6J5zdz6F0UNVaerm4W38hn5hBzJOx5nWc2859XUFa1TC2K7NvFI69RzDkpJHIJ/Uga7wQHXuPR3ZRyJJ/ISiiirCaZWpXRT2YEJfST0zhRi4taXNTiohYXtbioxUUtLmpxUYuLWtz/AIepoFxQZk61AAAAAElFTkSuQmCC",universalLink:"https://app.altme.io/app/download"},{key:"autonomy-app",name:"Autonomy: Digital Art Wallet",shortName:"Autonomy",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADS0lEQVR4AeXBXWiVZQAA4Gcvh+lYP4xGBBsc7Wal2UyWQ9gWSAYzhSgcgtBUSCwKMfulS2+iG7vJlUGJSzHBqwSLZhAYKgmZNac3tQNbizpTapPJYTun6zGDL/e+dPE9T53aYE2OBTkX5FyQc0HOBTkX5FyQc0HOBTlXkMLpy5TKoireR2+72ApSODjEqR9EtekxetvFFuRckHNBzgU5F6QwUxHdTEUKQWyzc1wqie5Sidk5sQWxHTvH5LToJqc5fl5sQUzXJth3TDJ7j3JtQkxBDLNzfPYdXfspT0mmPEXXfo6cZXZODAVZnf6Rg2csMFPhUonJabfV3caWtRSbCUEm1SqlMie/59ur5ilP0f8Rrx5ldZGGegu89CS9j8qiIKvSJKd+kFlDPYd30dfpjr3yFCcusP0QMxXzTE5zZthtPb1aVkEqh3fR12nR+jo5vEsqQQpPPERfp2j6Ouluk0KQwnOPi27LWikEKRSbRVdslkKQwo2bortxUwpBCmeGRTc0LIUghc8vcHVCNCO/ceKCFIIUKrM8c4Cx6xZt7DrPvk9lVgoFqVyboP0d3tzElrUUmwl1MqnWGP2Tkxd59wuuT0ulTm2wZjFmKlz8lQ+GOHGemvT6Onl5Ax3Laai3GAWL1VBPdxvdbfS2s/MQ1ZokQh2fvEB/t1iCmPq72LdRMq9tpL9bTEFsb29mSUF0Swq8tVlsQWxNjaxZJro1y2hqFFuQQlOj6JoapRCkMFoW3WhZCkFsV8YZGRfdyDjDY2ILYqpW2TNITXw17D1KtSqmIJapW2wbYGhYMl//zLYPmb4lloKsSmV+GrPATIWLv3DkLL//ZYE6PNzCsmZCkEm1ymiZkXFq5jt+jm+G2d5Dx3Ia6i2wqpVisywKsjp9mRc/9Z9seIQD21jZ6o5cGWfPIEPD5vnjb9475V8N7GD3elkEqWxdx5evs7LVHVvRwldvsHWdVIIU7r+Hj3cSgkULgUM7eeBeKQQpbO/hrqWiuXspz3dJIUihY7noOh6UQpBCQ73oGuqlEORckHNBzgU5V5BVTxsDO2SyqlV0q1oZ2CGTnjZZFWS1ooUVLf43xWZ2rxdbkHNBzgU5F+RckHNBzgU5F+RckHP/AKis3ntPQOcLAAAAAElFTkSuQmCC",universalLink:"https://autonomy.io/apps/tezos",deepLink:"autonomy-tezos://"},{key:"temple_ios",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAIAElEQVR4AeXB3W9b9RnA8e/znHOcOGliO3aiUkLfCyNDLdIkShtKIu2GiwlVbNP2d3C7m11Mu9jlNG2X7AJpm5i0MSGtEpu0ZKhMoxUVsJVBm5emaUtI7DiB+Pjl93uGXRzaDBGGT10kfz4CGD1M6XFKj1N6nNLjlB6n9Dilxyk9LiRBx8cizn7nARChRQAREED4hIAAAiJCiwAiIIAILQKIgHCbCAgg8KtfL7KyWiUpIQk5MRpy7uwQheceQIZSoAICqCAqIAIKiIAKCKACIqACAqICKiACCoiACoiAAipcXdjixd9fJylKAk6Mhpz7boaRwQBWt9jJjN0JX8Bomz6dJ0lKh06MhZz7fpaRwQBUsLUKX4mxO4OpyQJJUjo09VCKkYEAVCBQKMZ8FSLsTuDIwUHG96VJSkiHZpbqEAiI0GQ1B1t12JOipdLA1ipsEz4htAi3CRhNAsJnhNsCRR8fAwMEpifzvPjSdZIQ0qG3P6xTqsFIWkBosWKM7EnRUnP4vyyAN3AG3sAZeA/OwBt4A2eYN3AG3sAZeAPvkbFBZHwIGR2gafp0gRdfuk4SQjrkDV5brvHsI2laRGA9hv3DtGT60FMPghmfy/hixRj/zofY3DoyNkDT1GSepIQkYPZajWcfHQABRLD1KsJn5NE8IgIKiIAKCKACIqACAqICKiACCohApYG/eAt7rwgn94HAkUODjO9Lc/1GhU4pCZhZqEEgoAoqUHdQabDN+D8Z2wYjJNePv7xGmwDTkwWSoCTg7Q9qlKpAIBAIqGLlmG3C7oTbzADhTvLICNQ9rFVom57MkwQlAd7g79eqEAioQCBQrrHN+FL8Wyu4VxfZKTh7jOhn05BP0zY1WSAJSkJm52NQgUBBBdussk3YnYfGC+9gl1f5Mo4eGmR8X5pOKQmZmY8hEFCBQKDhoepoMXanIAeG8XPr4DxfxLht+qkCnQpJyNs3apRiIzeotHjD/3kOUgEEAoFAoBAI9AXot/YiuX7upA+P4K6UsMUN5GiWJlvdwr9xE8IAIkUihVCxSHGlmE6FJMQbvDZf5dnjg+ANf2kF26xCoBApEiqECn0BcjQHqxXI9bPNQI7lQMC/XyQ4mqVJ9qTw7xYhpUgqwFIhpJTnXynxm9l1OqUkaOZqBQz8GzexYkyL8JlAkENZJBVgxZid5FAGUgH2folt/SEyNgAIIBjw/Mtr/GJ2nSSEJOiv727x5qvLUIohUAiA0CDw9KeFb0zkoC/AnEG5CnUPqYA2CRU9lMXPl8EZhELTan4Py//5CCLHC29V+OU/NklKSIL+dbPKE6/wKc+dBlPKyiklcgZmYGDFGNk7SIvQIsdycLWELW4gR7I0/TPo5+wLq9wLSpd8XPNcWIzBeXAGzmOrW2wzWuRYDkTwV0q0nTk5gqpwLyhdNHOlAs7AGTiDlS3aRGjRAxlIKXalRFsuE3FiYph7Qemi2asVcB6cB2dYMYa6o8n4VKTowSy2UAZntE2fznMvKF10frFKrebBeXAenMdWtthJjmWxuseWNmibOpXnXlC6aKtuXFiqgjNwBg2PffAxLcY2OZIDAX+lRNuZkyOoCklTumx2PsacYc5jzrAbH7GTHsggqQCbW6ctl404MTFM0pQum1mogfPgDLxhqxWoOu4SCnIwgy2UwXnapk7nSZrSZa8v16jVPDgPzkPDYzc/AuEOghzJQt1jS5u0TZ/OkzSly7bqxoUbNXAGzsB5bHmTnfRIFlSwuXXazjyZR1VIUkiXjaaV0eMFgskxEAEB6QvBAGGb7B+GSPFz6+i3D9CUy0ScmBjmzXfKJEXpotG0cu57WR5OeSSfRgpppDAAmT4Q7hYqciCDLW6AN9qmJvMkSemS0QHl3A9yPLY3wkoxeGM3cjgLDYdd36Rt+nSBJCldoALnfjjCY3tTECkiYMWYuxj/Qw9nQQSbW6ftzJMjqApJUbrAG6T6FIkUCRVCxVYr7EYeGoJI8fNl2nLZFMcnhkmK0iWzS3UIFcIAQoVSzK5CRfZnsKUNcAZCy/RknqQoXTJzrQaRQqQQKbZRBW9sEz6XHs5A3WPLm7RNTRZISkiXzM7HECqIgADlKo2fX4RIIQogHRJMjqMTee4kh7Lwt2vYQhk5kAGBp5/Moyp4b3RK6ZJbm473Sg6JFDZq+H+vYeUqtlGDrTqST2NrW+wk40MQBfiFMggtI7mI498cJglKF83Mx1gpxl/6ALzRJKEih7MQCFaMsZrjLqEi+4expU1wRpMB05MFkhAAP6ZL1jcbVK6WuVgyLm7AxXXj8ZMFgv4QvIEzNJ9GhlMgAiIgAuUqNreOPpxDMv2IQFwzfveHZToV0kXnF6ucp83T9PgTDU7tD8AbGNitj5EHh7iTHMzArGALZWR/hqanT+VRFbw3OqHcZzPvV6DuoeGh4fA3NtlJxocgUmxxg7aRbMTxiWE6pdxnM3MxNBw0PDQ8rGxh1QZ3CQR5aAh/fRO80Tb1VIFOhdxnry9VqVU9kQBmsFGj/qNZCBVCRUKFVAD9AThP/afnIVRKVWPmj2U6pdxnW3XjwlIVGh5KMbZQhqqDqoOqw6oOnIe4AXUPdU9xo8EzL61z6VadTilfAzMLVSjG2HwZvLGT1R3W8DQVY+OZlze49GGDJIR8Dfz2ckz9lgcMFFAPaqAeVEAFVECFPy3WeWvNkZSQr4HLJcdPSnzKAKNblB6n9Dilxyk9TulxSo9TepzS4/4Lz8MqhS9ENeQAAAAASUVORK5CYII=",universalLink:"https://templewallet.com",deepLink:"temple://"},{key:"atomex_ios",name:"Atomex Wallet",shortName:"Atomex",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFIUlEQVR4AeXBfWyMdwDA8e/ze55r6dbW6Ol71cvKVekQZmyGMVtWzMu6YoRI9oeXTWJsppMzr40lnXbxNjYEwZiXKVWtlqMlq5eWVus1nWp7Srz2mHP3LP1DIovq1Z1Hk+fzkQwBJhUdE+icQOcEOifQOYHOCXROoHMCnRPonEDnBDon0DmBzgl0TuEVaRUeSo9unfEyGCgquUDBmXOoaE9BY8YWzUldModhcQORJIknThUW8+XXiRScLUFLsuxjNKMRfz9fstM20KdXdyRJ4mnBgUZGjYxjf5YF6/UbaEWgoTkzJ2OKaktdfF9/jVVL5yNJEloRaESWZcYmDKM+XTpHExvTAa0INBIaHEgzf19cEd2hHVoRaOSR3Y6rHj2yoxWBRqqs1ZRdvUZ9VFXl75OFaEWgoaXL11GfHXsOUHa1Aq0INLRszSa27UqnLufOX2LKjLloSZZ9jGY0oqoqO/Yc4Oat25ii2tDM349at+/cZdW6LYyf9C23bt9FS5IhwKSikTHxQ6iyVpN1KA9JkghsGYDBoFBReR2Hw8GrINDIoA/eY03qQvr36UktVVWpslZztbwSh8PBxwPfJ3HGJLQm0EBEeAhrlyVRcKaEeUuW8SydoqNI/GYSkRGhaEnwknl7e7F5TTJCSCRMnMbDh//yLBu37sapqowbNQwtCV6yxeYZdI2NYcLkWVwpK6cu1yqtZBw8wriEYQgh0IrAg7y9vQgLCaJJE2+eUGSZHxYkszcjh/qs3bidiLBgBrzfC60oeECbyHAWzplO3KB+eHkZsNsfk551mFlzf2LqzB9xVVrGIazVNxkdP5iM7CNoQZZ9jGbc0NH0Jof3bqJrbEdkWaaWLAvat2vNmPghZObkUmWtxhVOp5PSC1coOFvCpSv/oAWBGyRJ4rdfFtH8DX+exd/Pl7XLk5CFwFV7M3LIOHiEJ4QQvEwKbuga25EunaN5HlNUW3q93RVLXj6u8PIyMGHMSEZ/FkdsjIkm3l5UVF0nMyeXlJXrOVt8Hk9ScIMpqi2uMEW1xZKXT33aRIazbX0qMaYonhYWEsT40cP5In4oc5NSSfp5FZ6i4IYamw1X3LfZGNi3NwkjPiHzUC4Hso9y4+YtnmYMaE7Gjt+JCAuhLooiM2/2NJxOJ0tSVuMJCm44euwkdrsdg8FAXRwOB5bcfLp1iWFAv96MTfgUh8PJidNn2Z9lYevOfZReuEySeQYRYSG4wvzdV+zem0XpxSu4S5Z9jGZeUI3tAf5+vrzTvQt1+XXdVjb/mUbJ+cukrFjHX+nZlFdU0ToynISRccTGdCA98zCrUxcghMAVsiyolZ5lwV0Kbkqcn0xAi+aM/Xwo//fHzn1MT1zME06nyqnCYk4VFrM4eSXN/P2QZZm+7/ZAURQaon+fnniCgpvs9sdMnDKLtRu3M3zwh4QGB1JprWZnWibZlmM8z+07d6kVEtSShgoOaoknKHiIJS8fS14+L+J+jY2Gqqmx4QmCRuBkQRENdaKgCE8QNAKFRaUUFpXSEBu27MITBI2AqqpMn70Ih8OJK7Itx9mZloknyLKP0UwjUHb1Gtbr1Xw0oA9CCOpy+sw5RoydjM32AE+QZR+jmUbiZEExOZbjRLdvR2hIIE+7d7+GlBXrmTj1e+7cvYenSIYAk0oj1K5NK97qZKJp0yaUX6vieP5pbA8e4mkKjdTFy2VcvFzGyybQOYHOCXROoHMCnRPonEDnBDon0DmBzgl0TqBzAp0T6Nx/Vg+o6CnFmfYAAAAASUVORK5CYII=",universalLink:"https://atomex.me",deepLink:"atomex://"},{key:"umami_ios",name:"Umami Mobile",shortName:"Umami Mobile",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANSklEQVR4Ae3BC1RVZaLA8f+39z4HgQXiJBmgLWpEHRXFQhHMiJGsMTR5zJjL8Iosb2KOaRpZ4gulScXedWOIAequtGmC1mAjjSmWYyRpoGiTiEp6xgxWJ5QAOY/9XbhLW3DcoFQ+6/fjF7/4eRN0k5TSExgLhAD9AA+urCbgOFAB7BBCNNINgoskpQwBFgFxgDtXp2agAMgUQlRwEQQXIKXsCawHkgClsrKSwsJCSktLqampobGxESklV4IQAk9PTwIDAwkPDyc2Npbg4GBa6UAusFAIcYouCLogpRwIFAFBu3fvJjU1lZKSEtooioKfnx9eXl4IIbgSpJQ0NDTw1Vdfoes6baKioli7di2hoaG0OgRMFEIcpBOCTkgpBwIfSin7rFq1ivT0dHRdJyYmhuTkZKKiovD29uZqcPr0aUpKSsjJyWHTpk0oisKyZctYunQpQoivgTuFEFUYEBiQUvYEPpVSBs2aNYucnByCgoLIy8sjIiKCq9nHH3/MjBkzOHToEMnJyWRnZyOEOASMFEKcwoWCsfVA0KpVq8jJyWHMmDGUlZURERHB1S4iIoKysjLGjBlDTk4Oq1atolUQsB4DCi6klCFA0u7du0lPTycoKIhNmzbh4+PDtcLHx4dNmzYRFBREeno6u3fvplWSlDIEFxrnWwQoqamp6LpOXl4ePj4+uNKrPkP/9J/Ib2tR+g9Hvfe/kKe/wfF6BkhJByYz6p1xKIPDwHYGe/YS0HXOIxSUXwejjn8QVA2kxP7nJ8F2BkNCIHrdiDJyPMqA22jPx8eHvLw87rjjDlJTU9m2bZsCLAIepB2NdqSUnkBcZWUlJSUlTJw4kYiICDqwncH+0qM4PyrkHOfWtxCBQ1AG3Y785iv08u24cn6wEXP6X1EGhyF6B+DYsA4jzg/A+VEBpvkvIfrcjHbfTOx56ei7P6BTbz+POnYypj8+C+YenBMREUFMTAxFRUVUVlYSHBwcJ6X0FEI0cpZCR2MB98LCQtokJyfjyrE5D+dHhXQgdeyvPAYOO6Y5mQjPnpzHYcP+9Ezkfw6jTXkUbfJsOqP/+1Na5v8Wx9+zEH63YE57A/O6f6COmQSaCSPOHe9if3EBrpKTk2lTWFhIK3dgLO0odBRCq9LSUhRFISoqClfqyPFgMuNKHvsCx4ZMhG8A2py1GJGnrdhWPICsPY42Yzna7+fTqeZGHH9ZQcu8u3DueBfl18MwPZaFW045ptlrUEKjwcOL9pw73kWv+oz2oqKiUBSF0tJSzgqhHY2O+tGqpqYGPz8/vL296cBhR/jfinZ/Co6/PY8rR+HLKCGRqGMmIf/9KY5Nr+FK1lmwpcVjXvkW2rTHEb39sWcvAYcdI/I/h7GvT8Hxv39CvScRNTIe9d7pqPdOB92JtFSjWw4h6yxw2oowmWnP29sbPz8/jh49yln9aEejIw9aNTY24uXlhStHfjrq5Dlof5iP8+Mi5IkjdKDr2J+ZgzmzGC1pObrlEHrFh7iStcexPXE/piX5qPckIvoNwL4+BfnNV3RGfn0Mx+sZON74E8qAESghd6EMDkPcOgT15oF0xcvLi8bGRs7yoB0FA1JKhBC4kk3fYc9aDOYemOY9B4qKK/ltLfanZ4LDjjk1G+XWoRiR9XXYlsThLHkbZXAY5ue2ot5xPxckdfSDe3C8tR7b8j/QkjiElsQh2B4dj23lVPQDn+BKCIGUEiMK3aSX/RNnydsog0ai/f4RjOiHKrA/MwfcPDAt34DoNwBDtjPYn5+H/cUFCM2EadGrmNNeR/jdQnfIBiv6kUr08u04S/5Kdyj8APbsJciTNWhTHkUJHoMR565i7C8vRHj/CvOqvyECB9MZ59aNtDzyW/TPtqGE3o3bi9sx/fdTiBv86DYp6Q6FH6KpAXvmbHA6MC16FeHbFyPObW9hf2khwvtXuGUUoAwJpzOy9ji29GnYn5qBPPkl6oQk3LI+wTT/RZRBoVwqCj+QXr0X+6tPIHr2xrwkHzy8MOLcuhF7ZgqYe2BesRE1eipdcZa9T8u8KOzPzkVaqlHvSsD8dBFur+xEe/AJlEEjQdXonKA7NDqh6zrnUVTac27dgOgXhDY5BfPjr2FbnQh2G66cHxch67/G9HgOprnPoAy8HXt2GtjOYEh34vzwHZwfvoMyZDRq9FTUsN+hJcyDhHnQ3IheXYF+ZD/ScghZZ0HW10HjacTNA3Gl6zqd0ehEfX09rsSNfXHleH01orc/6h33Y1r4P9jXPQROB670z8uwLfodptQ/o949DeU3o7A/90f06r10RT/wCfqBT7CbUlGGjUEdEYUyZDTK4NEowWO4GPX19ZhMJoxodKK2tpa6ujp8fX05R42IwbEhE3Qn39N17M/NQ3h4oY6eAItexb4+BRx2XMk6C7YnJqM9+DjapNmY17yHY1M2jo3rofk7umRvQd+zDX3PNv6fmztKv4EI/1sRvv7Q0xfR60bUsZNpr66ujtraWgICAjCi0AkpJcXFxbQnAvqjTU7hPA4btqdnopeXoIbfh/nJfOjhgSGHDUfeKmxpsciTR9Hun43by/9CvXsaqBoXraUZvboC50cFON55CcdfliOPHsBVcXExUko6o9CFrKwsXGmJT6JNfQxMbnRga8H21Aycpf9AuS0K8+oChG8AndE/L6Nl/jgcbzyFcPfE9HAmbi99hBo9FUxmusXkhjb1MbTEJ3GVlZVFVzS6sHPnTgoKCoiLi+N7QqBNeRT13uno5R8iv/0akHzvzHe0UfoPx+3lf+Hc/QGy9hhISWf0w/tQhkYg/G7BNPcZtAefQN+1GdnUQNcEoteNKCPuQvTsjauCggJ27txJVzQuYPbs2dx2220EBgbSnujZG/WueLpk7oEaEUN3CR9f1Hum82PU1NQwe/ZsLkThAurq6oiOjqa6upprRXV1NdHR0dTV1XFOjx49MKJwEQ4fPszIkSPJzc1F13WuVrquk5uby6hRozh8+DDtBQQEYETjItXX1zNz5kzWrFlDUlIS48aNY8CAAXh5eSGE4EqQUtLQ0EBVVRVbt24lNzeXgwcPYuT222/HiEY3HTx4kMWLF3O5nDhxAqvVytChQ/kxYmJiMKLwMzBo0CAiIyMxovAzsHr1ahRFwYjCdW7KlCnEx8fz+eefY0ThOjZ69GhycnI4deoUKSkpGNG4Tt13331s2LABk8lEfHw8R44cwYjGdcbX15f09HQeeughmpqaiI+P5/3336d///4Y0bgO3HDDDYwePZrY2FgeeOABPD09qaioIDExkf3799Omb9++GNG4AqKjo0lJSSEkJAR3d3e60qdPH3x9fTlx4gRGPD098fb25pyqqioyMzPJzc3F4XBwTmhoKEY0LiMhBC+88AJz586lzZdffonVaqUrVquVzkgpsVgsWCwWysvL2bJlC7t27UJKiauJEydiROMyWrBgAXPnzmXPnj0kJSVRWVnJ5TB06FDGjh2LEY3LxN3dnbS0NE6ePMn48eOxWq1cLhkZGQghMKJwmYSFhdGrVy9yc3OxWq34+/uzb98+9u3bh7+/P5dKYmIikyZNYu/evRhRuEz69OlDm5qaGtpER0cTHBxMcHAw0dHRXAqRkZFkZWVhtVqZM2cORjQuE4vFQptBgwbRpqioiM2bN9OmqKiIn1pCQgL5+fkIIUhISODYsWMY0TAghOCnVlZWxsmTJ0lKSuLZZ5/l+PHjTJgwgZ9aQEAAGRkZTJ8+nYaGBhISEigpKaFfv34Y0eioiVaenp781Ox2O4sXLyYvL4/t27fz8MMPs2XLFpxOJz+GEIK+ffsSFhZGXFwccXFxuLm5sWvXLqZPn05VVRVtPDw8OKuJdjQ6Ok6rwMBAvvjiC35q+fn53HTTTWRkZLB582ZaWlpobm7mx/Dw8MBsNnPOvn37WLduHW+++Sa6rnNOYGAgZ1loR6OjClqFh4dTXFzMpbBmzRree+89Zs2axYgRI3B3d6crw4cPx+FwcODAAVxJKWlubsZisVBeXs6WLVvYu3cvRsLDwzmrgnY0OtoBNMfGxrovX76cS2X//v088sgjXIwTJ05gtVoZOXIkP0ZsbCytmoEdtKPQjhCiESgIDg4mKiqK60VkZCTDhg2j1btCiO9oR+F8mYC+du1aVFXlWqeqKmvXrqWVBDJxoeBCCFEB5IaGhrJs2TKudWlpaYwaNYpW+UKIz3ChYGwhcGjp0qUkJydzrUpKSmLZsmW0OgwswICCASHEKWCiEOLr7OxsVq5ciaqqXCtUVWX58uW89tprKIpSC8QIIeoxoNKJlStXfrNixYoiIcQ9kZGRN0yYMIHq6mpqamq4nBYuXEhzczOvvPIKFyMyMpKNGzcybdo0hBCHgfFCiC/ohOACpJQ9gfVAEqBUVlZSWFhIaWkpR48epampCSkll8qePXuor69n3LhxuBJC4OHhQWBgIOHh4cTGxjJs2DBaSSAfWCCEqKcLgoskpRwBLAJiAXeuTs3Au0CmEOIzLoKgm6SUnsCdwHCgH+DBldUEWIAKYIcQ4jt+8YtfXKz/A/OhBgM5KLZoAAAAAElFTkSuQmCC",deepLink:"umami://",universalLink:"https://umamiwallet.com/"}];var An=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let w2=kS,_2=BS,A2=DS,x2=US;const Iu=()=>w2,FS=t=>{w2=t},_c=()=>_2,KS=t=>{_2=t},q0=()=>A2,HS=t=>{A2=t},Ac=()=>x2,jS=t=>{x2=t},$o=new To,vd=["ookjlbkiijinhpmnjffcofjonbfbgaoc","gpfndedineagiepkpinficbcbbgjoenn"];var xs;(function(t){t[t.DESKTOP=0]="DESKTOP",t[t.IOS=1]="IOS",t[t.ANDROID=2]="ANDROID"})(xs||(xs={}));var wr;(function(t){t.IOS="ios",t.ANDROID="android",t.EXTENSION="extension",t.DESKTOP="desktop",t.WEB="web"})(wr||(wr={}));class Mi{static getPlatfrom(){return An(this,void 0,void 0,function*(){return y2(window)?xs.ANDROID:m2(window)?xs.IOS:xs.DESKTOP})}static getPairingInfo(e,r,n,i){return An(this,void 0,void 0,function*(){const s=i??(yield Mi.getPlatfrom()),o=e.p2pSyncCode,a=e.postmessageSyncCode,c=e.preferredNetwork;switch(s){case xs.DESKTOP:return Mi.getDesktopPairingAlert(o,r,a,n,c);case xs.IOS:return Mi.getIOSPairingAlert(o,r,c);case xs.ANDROID:return Mi.getAndroidPairingAlert(o,r,c);default:throw new Error("platform unknown")}})}static getDesktopPairingAlert(e,r,n,i,s){return An(this,void 0,void 0,function*(){const o=yield Qc.getAvailableExtensions();o.forEach(c=>{const l=vd.indexOf(c.id);l>=0&&vd.splice(l,1)});const a=[];return _c().length>0&&a.push({title:"Browser Extensions",type:wr.EXTENSION,wallets:[...o.map(c=>{var l,f,h,S,P;const M=_c().find(H=>H.id===c.id);return{key:(l=M==null?void 0:M.key)!==null&&l!==void 0?l:c.id,name:(f=c.name)!==null&&f!==void 0?f:M==null?void 0:M.name,logo:(h=c.iconUrl)!==null&&h!==void 0?h:M==null?void 0:M.logo,shortName:(S=c.shortName)!==null&&S!==void 0?S:M==null?void 0:M.shortName,color:(P=c.color)!==null&&P!==void 0?P:M==null?void 0:M.color,enabled:!0,clicked:!1,clickHandler(){return An(this,void 0,void 0,function*(){if(!this.clicked){if(this.clicked=!0,n){const H=yield $o.serialize(yield n()),$={target:Yi.EXTENSION,payload:H,targetId:c.id};at.postMessage($,at.location.origin)}r(wr.EXTENSION,this)}})}}}),..._c().filter(c=>vd.some(l=>l===c.id)).map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!1,clickHandler:()=>{window.open(c.link,"_blank")}}))].sort((c,l)=>c.key.localeCompare(l.key))}),Iu().length>0&&a.push({title:"Desktop & Web Wallets",type:wr.DESKTOP,wallets:[...Iu().map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!0,clicked:!1,clickHandler(){return An(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const l=yield $o.serialize(yield e()),f=gc(c.deepLink,l);window.open(f,"_blank"),r(wr.DESKTOP,this,!0)})}})),...yield Mi.getWebList(e,r,s)].sort((c,l)=>c.key.localeCompare(l.key))}),Ac().length>0&&a.push({title:"Mobile Wallets",type:wr.IOS,wallets:[...Ac().map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!0,clicked:!1,clickHandler(){return An(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const l=yield $o.serialize(yield e());i(l),r(wr.IOS,this,!0)})}}))].sort((c,l)=>c.key.localeCompare(l.key))}),{walletLists:a,buttons:[]}})}static getIOSPairingAlert(e,r,n){return An(this,void 0,void 0,function*(){return{walletLists:[{title:"Mobile Wallets",type:wr.IOS,wallets:Ac().map(i=>({key:i.key,name:i.name,shortName:i.shortName,color:i.color,logo:i.logo,enabled:!0,clicked:!1,clickHandler(){var s;return An(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const o=yield $o.serialize(yield e()),a=gc((s=i.deepLink)!==null&&s!==void 0?s:i.universalLink,o),c=document.createElement("a");c.setAttribute("href",a),c.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})),r(wr.IOS,this,!0)})}})).sort((i,s)=>i.key.localeCompare(s.key))},{title:"Web Wallets",type:wr.WEB,wallets:[...yield Mi.getWebList(e,r,n)].sort((i,s)=>i.key.localeCompare(s.key))}],buttons:[]}})}static getAndroidPairingAlert(e,r,n){return An(this,void 0,void 0,function*(){return{walletLists:[{title:"Web Wallets",type:wr.WEB,wallets:[...yield Mi.getWebList(e,r,n)].sort((i,s)=>i.key.localeCompare(s.key))}],buttons:[{title:"Mobile Wallets",text:"Connect Wallet",clickHandler:()=>An(this,void 0,void 0,function*(){const i=yield $o.serialize(yield e()),s=gc("tezos://",i);window.open(s,"_blank"),r(wr.ANDROID)})}]}})}static getWebList(e,r,n){return An(this,void 0,void 0,function*(){return q0().map(i=>({key:i.key,name:i.name,shortName:i.shortName,color:i.color,logo:i.logo,enabled:!0,clicked:!1,clickHandler(){if(this.clicked)return;this.clicked=!0;const s=window.open("","_blank");e().then(o=>$o.serialize(o)).then(o=>{var a;const c=gc((a=i.links[n])!==null&&a!==void 0?a:i.links[Lt.MAINNET],o);s?s.location.href=c:window.open(c,"_blank"),r(wr.WEB,this,!0)}).catch(o=>{console.error(o)})}})).sort((i,s)=>i.key.localeCompare(s.key))})}}const ge=(t,e,r,n)=>{const i=document.createElement(t);return e.length>0&&i.classList.add(...e.filter(s=>!!s).map(s=>wo(s))),r.forEach(s=>{i.setAttribute(wo(s[0]),wo(s[1]))}),typeof n=="object"&&Array.isArray(n)?n.filter(s=>!!s).forEach(s=>{i.appendChild(s)}):typeof n=="string"&&(i.innerText=n),i},Eo=(t,e,r)=>{const n=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.length>0&&n.classList.add(...t.filter(i=>!!i)),e.forEach(i=>{n.setAttribute(wo(i[0]),wo(i[1]))}),typeof r=="object"&&Array.isArray(r)&&r.filter(i=>!!i).forEach(i=>{n.appendChild(i)}),n},gn=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","path");return t.forEach(r=>{e.setAttribute(wo(r[0]),wo(r[1]))}),e},GS=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","g");return t.filter(r=>!!r).forEach(r=>{e.appendChild(r)}),e},qS=()=>Eo(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[gn([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])]),wo=t=>{const e=document.createElement("div");return e.innerText=t,e.innerHTML},Zg=t=>{t.innerHTML=""};var xn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const eb=new on("Alert"),tb=new To,VS=(t,e,r)=>xn(void 0,void 0,void 0,function*(){const n=()=>xn(void 0,void 0,void 0,function*(){return Mi.getPairingInfo(r,(_,I,x)=>xn(void 0,void 0,void 0,function*(){x||(yield Pl())}),()=>xn(void 0,void 0,void 0,function*(){y()}))}),i=yield n(),s=e.getElementById("pairing-container");if(!s)throw new Error("container not found");const o=document.createElement("span");s.appendChild(o),i.buttons.forEach(_=>xn(void 0,void 0,void 0,function*(){const I=yield as(),x=ge("div",["beacon-list__title"],[],_.title),E=ge("button",["beacon-modal__button","connect__btn"],[],_.text),u=document.createElement("a");u.id=`button_${I}`,u.appendChild(x),u.appendChild(E),o.appendChild(u);const d=e.getElementById(u.id);d&&d.addEventListener("click",()=>xn(void 0,void 0,void 0,function*(){_.clickHandler()}))}));const a=(_,I,x)=>{const E=`Open in ${x.name}`,u=x.key,d=x.logo?ge("div",[],[],[ge("img",["beacon-selection__img"],[["src",x.logo]],"")]):Eo(["beacon-selection__img","svg-inline--fa","fa-wallet","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","wallet"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"],["style","enable-background:new 0 0 512 512;"],["xml:space","preserve"]],[gn([["d","M376.2,181H152.9c-5.2,0-9.4-4.2-9.4-9.4s4.2-9.4,9.4-9.4h225c5.2,0,9.4-4.2,9.4-9.4c0-15.5-12.6-28.1-28.1-28.1H143.5c-20.7,0-37.5,16.8-37.5,37.5v187.5c0,20.7,16.8,37.5,37.5,37.5h232.7c16.4,0,29.8-12.6,29.8-28.1v-150C406,193.6,392.7,181,376.2,181z M349.8,302.9c-10.4,0-18.8-8.4-18.8-18.8s8.4-18.8,18.8-18.8s18.8,8.4,18.8,18.8S360.1,302.9,349.8,302.9z"]])]),g=ge("div",["beacon-selection__name"],[],[ge("span",[],[],x.name),x.enabled?void 0:ge("p",[],[],"Not installed")]),b=ge("a",["beacon-selection__list",x.enabled?"":"disabled"],[["tabindex","0"],["id",`wallet_${u}`],["alt",E],["target","_blank"]],[g,d]),p=document.createElement("span");p.appendChild(b),_.appendChild(p);const R=e.getElementById(`wallet_${u}`),O=w=>xn(void 0,void 0,void 0,function*(){if(w&&w.key!=="Enter")return;x.clickHandler();const v=e.getElementById("beacon-modal__content");v&&I!==wr.EXTENSION&&I!==wr.IOS&&(Zg(v),v.appendChild(ge("p",["beacon-alert__title"],[],"Establishing Connection..")),v.appendChild(ge("div",["progress-line"],[["id","beacon-toast-loader"]],"")),v.appendChild(ge("div",["beacon--selected__container"],[],[...x.logo?[ge("img",["beacon-selection__img"],[["src",x.logo]],""),ge("img",["beacon--selection__name__lg"],[],x.name)]:[]])))});R&&(R.addEventListener("click",()=>O()),R.addEventListener("keydown",O))},c=document.createElement("span");s.appendChild(c);const l=_=>{Zg(c),_.forEach(I=>{const x=document.createElement("div");x.classList.add("beacon-list__wrapper"),c.appendChild(x),x.appendChild(ge("div",["beacon-list__title"],[],I.title));const E=document.createElement("span");x.appendChild(E),I.wallets.forEach(u=>xn(void 0,void 0,void 0,function*(){a(E,I.type,u)}))})};l(i.walletLists);const f=_=>xn(void 0,void 0,void 0,function*(){if(_.data==="extensionsUpdated"){const I=yield n();l(I.walletLists)}});let h;h=_=>{_.data===`closeAlert-${t}`&&(at.removeEventListener("message",f),at.removeEventListener("message",h))},at.addEventListener("message",f),at.addEventListener("message",h);const S=e.getElementById("beacon--qr__container"),P=e.getElementById("beacon--qr__copy"),M=e.getElementById("beacon-title"),H=y2(window)?"android":m2(window)?"ios":"desktop",$=e.getElementById("beacon-main-text"),q=e.getElementById("pairing-container"),C=e.getElementById("beacon--switch__container"),V=()=>xn(void 0,void 0,void 0,function*(){const _=r?yield tb.serialize(yield r.p2pSyncCode()):"";navigator.clipboard.writeText(_).then(()=>{P&&(P.innerText="Copied"),eb.log("Copying to clipboard was successful!")},I=>{eb.error("Could not copy text to clipboard: ",I)})});let K=!1;const U=_=>xn(void 0,void 0,void 0,function*(){const I=e.getElementById("beacon-switch");if(I&&(I.innerText=_==="none"?"Pair wallet on same device":"Pair wallet on another device"),$&&q&&C&&P&&S&&M)switch($.style.display="none",M.style.textAlign="center",q.style.display="none",C.style.display="initial",_){case"ios":q.style.display="initial";break;case"android":q.style.display="initial";break;case"desktop":q.style.display="initial",M.style.textAlign="left",$.style.display="none",C.style.display="initial";break;default:if(!K){K=!0;const x=yield tb.serialize(yield r.p2pSyncCode()),E=gc("tezos://",x),d=CS(E,"svg").replace("<svg",'<svg class="beacon-alert__image"');S.insertAdjacentHTML("afterbegin",d),P&&P.addEventListener("click",V),S&&S.addEventListener("click",V)}$.style.display="initial"}});let G=!1;const y=()=>{U(G?"none":H),G=!G};y();{const _=e.getElementById("beacon-switch");_&&_.addEventListener("click",y)}});let S2=Su.LIGHT;const rb=t=>{S2=t},Hp=()=>S2,$S=t=>ge("div",["beacon-toast__base","animated","fadeIn"],[["id","beacon-toast"]],[ge("div",["beacon-toast__content"],[],[ge("span",[],[["id","beacon-text"]],[ge("p",[],[["id","beacon-text-content"]],t),ge("a",["beacon-toast__wallet__link"],[["id","beacon-open-wallet"]],[ge("span",[],[],"Open"),Eo(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[gn([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])])])]),Eo(["beacon-toast__more","svg-inline--fa","fa-angle-down","fa-w-10"],[["id","beacon-toast-button-expand"],["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","angle-down"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[gn([["fill","currentColor"],["d","M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"]])]),Eo(["beacon-toast__more","svg-inline--fa","fa-times","fa-w-10"],[["id","beacon-toast-button-close"],["aria-hidden","true"],["focusable","false"],["data-prefix","fal"],["data-icon","times"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[gn([["fill","currentColor"],["d","M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"]])])]),ge("div",["progress-line"],[["id","beacon-toast-loader"]],""),ge("hr",["hide"],[["id","beacon-toast-loader-placeholder"]],""),ge("div",["beacon-toast__more--action"],[["id","beacon-toast-list"]],"")]),zS=()=>ge("a",[],[["href","https://walletbeacon.io"],["target","_blank"]],[document.createTextNode("powered by"),Eo([],[["id","f63e95a9-fd19-4487-bc1a-09eb2f066704"],["data-name","Guides"],["xmlns","http://www.w3.org/2000/svg"],["width","65"],["height","65"],["viewBox","0 0 65 65"]],[ge("title",[],[],"beacon_logo"),gn([["fill","currentColor"],["d","M59.66,29.52v1.06c0,.37-.18,9.07-4.11,15.88S44.16,57.75,43.84,57.93l-.91.54-1.61-.93-9.19-5.3a14.68,14.68,0,0,1-1.63-1.06h0a14.09,14.09,0,0,1-1.29-1,17.63,17.63,0,0,1-2.56-2.7,18.58,18.58,0,0,1-2.56-4.51,21.53,21.53,0,0,1-1.5-9,6.21,6.21,0,0,1,2.93-.73c.25,0,.49,0,.74,0a18.29,18.29,0,0,0,1,7.93,15.06,15.06,0,0,0,6.67,8l8.93,5.16c.2-.13.43-.3.68-.48,2.26-1.6,6.42-4.92,8.86-9.13C55.12,39.94,55.8,34,56,31.57l-3.79-2.19a23,23,0,0,0,.6-3.83Z"]]),gn([["fill","currentColor"],["d","M49.22,11.43V23.89c0,.65,0,1.3-.1,1.94v0c-.06.55-.13,1.1-.24,1.63A18,18,0,0,1,47.82,31a19.11,19.11,0,0,1-2.62,4.49,21.37,21.37,0,0,1-7.07,5.8,6.08,6.08,0,0,1-2.42-2.84A18.1,18.1,0,0,0,42,33.7h0a15.12,15.12,0,0,0,3.58-9.81V13.6c-.21-.11-.47-.21-.74-.35-2.52-1.16-7.47-3.1-12.36-3.1-5.42,0-11,2.4-13.08,3.45V18a22.54,22.54,0,0,0-3.63,1.38V11.43l.92-.52c.33-.18,8-4.38,15.79-4.38s15.48,4.2,15.8,4.38Z"]]),gn([["fill","currentColor"],["d","M18,26.4,9,31.55q0,.35.06.78a31.63,31.63,0,0,0,3.49,12.28c2.71,4.71,7.55,8.3,9.53,9.64l3.79-2.19a23.33,23.33,0,0,0,3,2.44l-6.88,4-.92-.54c-.31-.18-7.75-4.69-11.68-11.5S5.36,30.92,5.35,30.56V29.49L7,28.55l9.17-5.29c.57-.32,1.14-.61,1.72-.87a13.46,13.46,0,0,1,1.55-.61A17.52,17.52,0,0,1,23,20.91a19.2,19.2,0,0,1,5.19,0,21.49,21.49,0,0,1,8.55,3.24,6.29,6.29,0,0,1-1.25,3.51,17.9,17.9,0,0,0-7.3-3.06A15.14,15.14,0,0,0,18,26.4Z"]])]),document.createTextNode("Beacon")]),R2=(t,e,r,n)=>ge("div",["beacon-alert__base","animated","fadeIn"],[["id",`beacon-alert-modal-${t}`]],[ge("div",["beacon-modal__wrapper"],[],[ge("div",["beacon-modal__header"],[],[Eo([],[["xmlns","http://www.w3.org/2000/svg"],["id","Guides"],["x","0"],["y","0"],["version","1.1"],["viewBox","0 0 179.2 43"],["xml:space","preserve"],["width","140"],["height","40"]],[ge("style",[],[],`.st0 {
                    fill: #3880ff;
                  }
                  .st1 {
                    fill: #fff;
                  }`),gn([["d","M45 19v.9c0 .3-.2 7.5-3.4 13.2-3.3 5.6-9.4 9.3-9.7 9.5l-.8.4-1.3-.8-7.6-4.4c-.5-.3-.9-.6-1.4-.9-.4-.3-.7-.5-1.1-.8-.8-.7-1.5-1.4-2.1-2.2-.9-1.1-1.6-2.4-2.1-3.7-.9-2.3-1.3-4.8-1.2-7.5.8-.4 1.6-.6 2.4-.6h.6c-.2 2.4.1 4.6.8 6.6 1 2.8 2.9 5.1 5.5 6.6l7.4 4.3c.2-.1.4-.2.6-.4 1.9-1.3 5.3-4.1 7.3-7.6 2.2-3.9 2.8-8.9 3-10.8L38.8 19c.3-1 .4-2.1.5-3.2L45 19z"],["class","st0"]]),gn([["d","M36.3 4.1v10.3c0 .5 0 1.1-.1 1.6s-.1.9-.2 1.3c-.2 1-.5 2-.9 3-.5 1.3-1.3 2.6-2.2 3.7-1.5 1.9-3.5 3.6-5.9 4.8-.9-.6-1.6-1.3-2-2.4 2.1-1 3.9-2.3 5.2-4 1.9-2.3 3-5.1 3-8.1V5.9l-.6-.3c-2-1-6.1-2.6-10.1-2.6-4.5 0-9.1 2-10.9 2.9v3.6c-1 .3-2 .7-3 1.1V4.1l.8-.4C9.7 3.5 16 0 22.5 0s12.8 3.5 13.1 3.6l.7.5z"],["class","st0"]]),gn([["d","M10.5 16.5l-7.4 4.3v.7c.2 2.1.9 6.5 2.9 10 2.2 3.9 6.2 6.9 7.9 8l3.1-1.8c.8.7 1.6 1.4 2.5 2L13.8 43l-.8-.5c-.3-.2-6.4-3.9-9.7-9.5C.1 27.4 0 20.2 0 19.9V19l1.3-.8L9 13.9c.5-.3.9-.5 1.4-.7.4-.2.8-.4 1.3-.5 1-.4 2-.6 3-.7 1.4-.2 2.9-.2 4.3 0 2.4.3 4.8 1.2 7.1 2.7 0 1-.4 2-1 2.9-1.9-1.3-4-2.2-6-2.5-3.1-.6-6-.1-8.6 1.4z"],["class","st0"]]),GS([gn([["d","M73.9 23c.9 1 1.3 2.3 1.3 3.7 0 1.9-.6 3.4-1.9 4.5-1.3 1.1-3.1 1.7-5.5 1.7h-8.6v-23h8.4c2.3 0 4.1.5 5.3 1.5 1.2 1 1.8 2.4 1.8 4.2 0 1.5-.4 2.7-1.2 3.6-.8.9-1.8 1.5-3.1 1.8 1.5.3 2.6 1 3.5 2zm-11.7-3h5c1.5 0 2.6-.3 3.4-1 .8-.7 1.2-1.6 1.2-2.8 0-1.2-.4-2.1-1.1-2.8-.8-.7-1.9-1-3.5-1h-4.8V20zm8.7 9.4c.9-.7 1.3-1.7 1.3-3s-.4-2.3-1.3-3c-.9-.7-2.1-1.1-3.7-1.1h-5v8.2h5c1.6-.1 2.8-.4 3.7-1.1zM95.3 24.6H81c.1 2.1.6 3.6 1.7 4.6s2.4 1.5 4 1.5c1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.7 1.8-2.9h3.2c-.2 1.2-.7 2.4-1.5 3.3-.8 1-1.7 1.7-2.9 2.3-1.2.5-2.6.8-4.1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 1.7 0 3.3.4 4.6 1.1 1.3.7 2.3 1.7 3 3 .7 1.2 1 2.6 1 4.1.1.7 0 1.2-.1 1.7zm-3.5-4.8c-.5-.9-1.2-1.6-2.1-2-.9-.4-1.8-.7-2.8-.7-1.6 0-3 .5-4.1 1.5-1.1 1-1.7 2.5-1.8 4.5h11.5c0-1.3-.2-2.4-.7-3.3zM111.2 16c1.2.9 2.1 2 2.5 3.5V15h3v18h-3v-4.6c-.5 1.5-1.3 2.6-2.5 3.5-1.2.9-2.7 1.3-4.4 1.3-1.6 0-3-.4-4.3-1.1-1.2-.7-2.2-1.8-2.9-3.2-.7-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.7-1.4 1.7-2.5 2.9-3.2 1.2-.7 2.7-1.1 4.3-1.1 1.7-.1 3.1.4 4.4 1.2zm-8 3.1c-1.1 1.2-1.7 2.8-1.7 4.8 0 2.1.5 3.7 1.7 4.8 1.1 1.2 2.6 1.8 4.4 1.8 1.2 0 2.2-.3 3.2-.8.9-.5 1.7-1.3 2.2-2.3.5-1 .8-2.1.8-3.5 0-1.3-.3-2.5-.8-3.5s-1.2-1.8-2.2-2.3c-.9-.5-2-.8-3.2-.8-1.9.1-3.3.7-4.4 1.8zM135 16.6c1.5 1.2 2.4 2.9 2.8 4.9h-3.1c-.2-1.3-.8-2.3-1.8-3-1-.7-2.2-1.1-3.6-1.1-1 0-2 .2-2.9.7-.9.5-1.6 1.2-2.1 2.2-.5 1-.8 2.2-.8 3.7s.3 2.7.8 3.7 1.2 1.7 2.1 2.2c.9.5 1.8.7 2.9.7 1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.8 1.8-3h3.1c-.3 2.1-1.3 3.7-2.8 4.9-1.5 1.2-3.4 1.8-5.7 1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 2.3-.1 4.2.6 5.7 1.8zM154.5 15.9c1.4.7 2.4 1.8 3.2 3.2.8 1.4 1.2 3 1.2 4.9 0 1.9-.4 3.5-1.2 4.9-.8 1.4-1.8 2.4-3.2 3.2-1.4.7-2.9 1.1-4.6 1.1-1.7 0-3.3-.4-4.6-1.1-1.4-.7-2.4-1.8-3.2-3.2-.8-1.4-1.2-3-1.2-4.9 0-1.9.4-3.5 1.2-4.9.8-1.4 1.9-2.5 3.2-3.2 1.4-.7 2.9-1.1 4.6-1.1 1.7-.1 3.2.3 4.6 1.1zm-7.6 2.2c-.9.5-1.6 1.2-2.2 2.2-.6 1-.8 2.2-.8 3.7 0 1.4.3 2.7.8 3.6.6 1 1.3 1.7 2.2 2.2.9.5 1.9.7 3 .7s2.1-.2 3-.7c.9-.5 1.6-1.2 2.2-2.2.6-1 .8-2.2.8-3.6 0-1.5-.3-2.7-.8-3.7-.6-1-1.3-1.7-2.2-2.2-.9-.5-1.9-.7-3-.7s-2.1.2-3 .7zM177.3 16.7c1.3 1.3 1.9 3.3 1.9 5.8v10.4h-3V22.8c0-1.8-.5-3.2-1.4-4.1-.9-1-2.2-1.4-3.7-1.4-1.6 0-2.9.5-3.9 1.6s-1.5 2.6-1.5 4.6V33h-3V15h3v4.3c.5-1.5 1.3-2.6 2.4-3.4 1.2-.8 2.5-1.2 4-1.2 2.2 0 3.9.6 5.2 2z"],["class","st1"]])])]),ge("div",["beacon-modal__close__wrapper"],[["id",`beacon-alert-${t}-close`]],[ge("div",["beacon-modal__close__icon"],[],[ge("div",["beacon-modal__close__line1"],[],[]),ge("div",["beacon-modal__close__line2"],[],[])])])]),ge("div",["beacon-modal__base"],[],[ge("div",[],[["id","beacon-modal__content"]],[ge("div",[],[],[ge("p",["beacon-alert__title"],[],e),...n,ge("div",["beacon-action__container"],[],r)])])])])]),WS=(t,e,r,n)=>R2(t,e,r,[ge("div",["beacon-alert__text"],[["id","beacon-main-text"]],n)]),XS=(t,e,r,n)=>R2(t,e,r,[ge("span",[],[["id","pairing-container"]],""),ge("div",["beacon-alert__text"],[["id","beacon-main-text"]],[ge("p",["beacon-list__title"],[["id","beacon-title"]],[document.createTextNode("Scan QR code with a Beacon-compatible wallet."),ge("a",[],[["href","https://docs.walletbeacon.io/supported-wallets"],["target","_blank"]],"Learn more"),...n])]),ge("div",[],[["id","beacon--switch__container"]],[ge("button",["beacon-modal__button--outline"],[["id","beacon-switch"]],"")]),ge("div",[],[["id","beacon--disclaimer"]],"")]);var Ci=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let V0,Os;typeof window<"u"&&typeof window.document<"u"&&(Os=window.document);const $0={},JS=t=>typeof t=="string"?ge("div",[],[["id","beacon--qr__container"]],[ge("div",[],[["id","beacon--qr__copy__container"]],[ge("button",["beacon-modal__button--outline"],[["id","beacon--qr__copy"]],"Copy")])]):ge("span",[],[],""),YS=(t,e,r,n,i)=>{const s=r,o=n.map((f,h)=>ge("button",[`beacon-modal__button${f.style==="outline"?"--outline":""}`],[["id",`beacon-alert-${t}-${h}`]],f.text));let a=Qg.default.css;i&&(a+=Qg.pair.css);const c=ge("span",[],[],s),l=i?XS(t,[c],o,[e]):WS(t,[c],o,[e]);return{style:a,html:l}},su=t=>(at.postMessage(`closeAlert-${t}`),new Promise(e=>{var r;const n=Os.getElementById(`beacon-alert-wrapper-${t}`);if(!n)return e();const i=(r=n.shadowRoot)===null||r===void 0?void 0:r.getElementById(`beacon-alert-modal-${t}`);if(i){const o=$0[t];o&&(clearTimeout(o),$0[t]=void 0),i.className=i.className.replace("fadeIn","fadeOut"),window.setTimeout(()=>{const a=n.parentNode;a&&a.removeChild(n),V0&&V0.focus(),e()},300)}else e()})),Pl=()=>Ci(void 0,void 0,void 0,function*(){return new Promise(t=>Ci(void 0,void 0,void 0,function*(){const e=Os.querySelectorAll('[id^="beacon-alert-wrapper-"]');if(e.length>0){const r=[];e.forEach(n=>Ci(void 0,void 0,void 0,function*(){r.push(n.id.split("-")[3])})),yield Promise.all(r.map(su)),t()}else t()}))}),Fa=t=>Ci(void 0,void 0,void 0,function*(){var e,r;const n=t.body,i=t.data,s=t.title,o=t.timer,a=t.pairingPayload,c=t.disclaimerText,l=t.closeButtonCallback;yield Pl();const f=(yield as()).split("-").join(""),h=Os.createElement("div");h.setAttribute("id",`beacon-alert-wrapper-${f}`);const S=h.attachShadow({mode:"open"}),P=Os.createElement("div");P.setAttribute("tabindex","0"),S.appendChild(P);const M=[...(r=(e=t.buttons)===null||e===void 0?void 0:e.map(_=>{var I,x;return{text:_.text,actionCallback:(I=_.actionCallback)!==null&&I!==void 0?I:()=>Promise.resolve(),style:(x=_.style)!==null&&x!==void 0?x:"outline"}}))!==null&&r!==void 0?r:[]];let H=a?JS(n):ge("span",[],[],n??"");i&&(H=ge("span",[],[],[H,ge("pre",[],[["style","text-align: left"]],i)]));const{style:$,html:q}=YS(f,H,s,M,!!(a!=null&&a.p2pSyncCode));P.appendChild(q);const C=Os.createElement("style");C.textContent=$,S.appendChild(C),o&&($0[f]=window.setTimeout(()=>Ci(void 0,void 0,void 0,function*(){yield su(f)}),o)),Os.body.prepend(h);const V=S.getElementById(`beacon-alert-${f}-close`),K=()=>Ci(void 0,void 0,void 0,function*(){l&&l(),yield su(f)});if(c){const _=S.getElementById("beacon--disclaimer");_&&(_.innerText=c)}const U=Hp(),G=S.getElementById(`beacon-alert-modal-${f}`);G&&(G.classList.add(`theme__${U}`),G.addEventListener("click",K));const y=S.querySelectorAll(".beacon-modal__wrapper");return y.length>0&&y[0].addEventListener("click",_=>{_.stopPropagation()}),V0=Os.activeElement,P.focus(),M.forEach((_,I)=>{const x=S.getElementById(`beacon-alert-${f}-${I}`);x&&x.addEventListener("click",()=>Ci(void 0,void 0,void 0,function*(){yield su(f),_.actionCallback&&(yield _.actionCallback())}))}),V&&V.addEventListener("click",()=>Ci(void 0,void 0,void 0,function*(){yield K()})),window.addEventListener("keydown",_=>Ci(void 0,void 0,void 0,function*(){_.key==="Escape"&&(yield K())})),a&&(yield VS(f,S,a)),f}),QS={default:{css:`:host {
  --animation-duration: 300ms;
  all: initial;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

.beacon-toast__base {
  position: fixed;
  top: 16px;
  right: 16px;
  z-index: 2147483000;
  margin: 0 auto;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);
  flex-direction: column;
}
@media (max-width: 576px) {
  .beacon-toast__base {
    top: 8px;
    right: 8px;
    left: 8px;
  }
  .beacon-toast__wallet__outer {
    flex-wrap: wrap;
  }
  .beacon-toast__wallet__link {
    display: flex;
    margin-left: 12px !important;
  }
}

.theme__light.beacon-toast__base {
  background: #fff;
}

.theme__dark.beacon-toast__base {
  background: #27334c;
}

.theme__dark p {
  color: #6183ff;
}

a {
  text-decoration: none;
  color: #3880ff;
}

a svg {
  width: 12px;
  margin-left: 2px;
}

a:visited {
  color: #3880ff;
}

hr {
  height: 1px;
  color: rgba(0, 0, 0, 0.12);
  background-color: rgba(0, 0, 0, 0.12);
  border: none;
  width: 100%;
  margin: 0;
  display: none;
}

.show {
  display: block !important;
}

.hide {
  display: none !important;
}

#beacon-toast-list {
  display: none;
}

.beacon-toast__upside_down {
  transform: rotate(180deg);
}

.beacon-toast__content {
  justify-content: space-between;
  min-height: 56px;
  height: 0;
}

.beacon-toast__action__item,
.beacon-toast__powered a,
.beacon-toast__wallet__container,
#beacon-text,
.beacon-toast__action__item p,
.beacon-toast__wallet__outer {
  align-items: center;
}

.beacon-toast__content,
.beacon-toast__base,
.beacon-toast__action__item,
.beacon-toast__powered a,
#beacon-text,
.beacon-toast__wallet__container,
.beacon-toast__wallet__outer {
  display: flex;
}

.beacon-toast__content,
.beacon-toast__action__item,
.beacon-toast__powered a {
  padding: 0 16px;
  font-family: Roboto, Helvetica, sans-serif;
}

#beacon-text strong {
  display: contents;
}
.beacon-toast__wallet__link {
  margin-left: 8px;
}
.beacon-toast__wallet__link svg {
  margin-left: 4px;
}
.beacon-toast__powered a {
  margin: 4px 0 12px;
  font-size: 12px;
  opacity: 0.64;
}

.beacon-toast__powered svg {
  width: 20px;
  height: 20px;
  margin: 0 2px 0 4px;
}

.beacon-toast__action__item {
  font-size: 14px;
  max-width: 40ch;
}

.beacon-toast__action__item p {
  margin-right: 8px;
}

.beacon-toast__action__item__subtitle,
.beacon-toast__powered a {
  min-width: 88px;
  color: rgba(0, 0, 0, 0.54);
}

.theme__dark .beacon-toast__powered a {
  color: #7c99d6;
}

.beacon-toast__content__img {
  width: 24px;
  height: 24px;
  margin-right: 4px;
  image-rendering: -moz-crisp-edges; /* Firefox */
  image-rendering: -o-crisp-edges; /* Opera */
  image-rendering: -webkit-optimize-contrast; /* Webkit (non-standard naming) */
  image-rendering: crisp-edges;
  -ms-interpolation-mode: nearest-neighbor; /* IE (non-standard property) */
}

.beacon-toast__more {
  width: 14px;
  transition: transform 0.5s;
}

a,
.beacon-toast__more {
  cursor: pointer;
}

a:hover {
  opacity: 0.64;
}

.theme__dark .beacon-toast__more {
  color: #7c99d6;
}

.beacon-toast__more--action {
  margin: 8px 0;
}

#beacon-text {
  padding-right: 24px;
}

#beacon-text-content {
  display: flex;
  align-items: center;
}

.progress-line,
.progress-line:before {
  height: 3px;
  width: 100%;
  margin: 0;
}
.progress-line {
  background-color: #a7c4f7;
  display: -webkit-flex;
  display: flex;
}
.progress-line:before {
  background-color: #3880ff;
  content: '';
  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
@-webkit-keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
@keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
`}};var Nr=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let Ln;typeof window<"u"&&typeof window.document<"u"&&(Ln=window.document);const T2=5*1e3;let xc,Pu,Lr;const ZS=t=>Nr(void 0,void 0,void 0,function*(){const{text:e,isBold:r,actionText:n,actionLogo:i,actionCallback:s}=t,o=yield as(),a=Ln.createElement("div");a.classList.add("beacon-toast__action__item"),z0(a);const c=l=>ge("strong",[],[],l);if(s){e.length>0&&a.appendChild(ge("p",[],[],e));const l=ge("span",[],[],[ge("span",[],[],n),i&&i==="external"?qS():void 0]);a.appendChild(ge("p",[],[],[ge("a",[],[["id",o]],[r?c([l]):l])]))}else if(n){e.length>0&&a.appendChild(ge("p",["beacon-toast__action__item__subtitle"],[],e));const l=ge("span",[],[],n);a.appendChild(ge("p",[],[],[r?c([l]):l]))}else{const l=ge("p",[],[],e);a.appendChild(r?c([l]):l)}return s&&a.addEventListener("click",s),a}),z0=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)},O2=t=>{var e,r;const n=(e=Lr==null?void 0:Lr.walletInfo)===null||e===void 0?void 0:e.icon,i=(r=Lr==null?void 0:Lr.walletInfo)===null||r===void 0?void 0:r.name;let s;const o=ge("strong",[],[],i??"Wallet");n?s=ge("span",["beacon-toast__wallet__container"],[],[ge("img",["beacon-toast__content__img"],[["src",n]],""),o]):s=o;const a=t.split("{{wallet}}");if(a.length===1)return[ge("span",[],[],t)];{const c=[];for(let l=0;l<a.length;l++)c.push(ge("span",[],[],a[l])),l<a.length-1&&c.push(s);return c}},eR=t=>{const e=t.body,r=O2(e),n=ge("span",["beacon-toast__wallet__outer"],[],r),i=$S([n]);return{style:QS.default.css,html:i}},Rr=()=>new Promise(t=>{var e;Lr=void 0;const r=Ln.getElementById("beacon-toast-wrapper");if(!r)return t();const n=(e=r.shadowRoot)===null||e===void 0?void 0:e.getElementById("beacon-toast");n?(xc&&(clearTimeout(xc),xc=void 0),n.className=n.className.replace("fadeIn","fadeOut"),window.setTimeout(()=>{const s=r.parentNode;s&&s.removeChild(r),t()},300)):t()}),md=(t,e,r)=>{const n=t.getElementById(e);return n&&n.addEventListener("click",()=>Nr(void 0,void 0,void 0,function*(){yield r(n)})),n},jp=(t,e)=>{const r=t.getElementById(e);r&&(r.classList.remove("hide"),r.classList.add("show"))},Gp=(t,e)=>{const r=t.getElementById(e);r&&(r.classList.add("hide"),r.classList.remove("show"))},tR=t=>{Gp(t,"beacon-toast-loader"),jp(t,"beacon-toast-loader-placeholder")},rR=t=>{jp(t,"beacon-toast-button-expand"),Gp(t,"beacon-toast-button-close")},I2=t=>{jp(t,"beacon-toast-button-close"),Gp(t,"beacon-toast-button-expand")},P2=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.remove("beacon-toast__upside_down"),r.classList.add("hide"),r.classList.remove("show"))},N2=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.add("beacon-toast__upside_down"),r.classList.remove("hide"),r.classList.add("show"))},W0=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.contains("beacon-toast__upside_down")?P2(t):N2(t))},L2=(t,e,r)=>Nr(void 0,void 0,void 0,function*(){const n=e.actions;if(n&&n.length>0){const i=n.map(a=>Nr(void 0,void 0,void 0,function*(){return ZS(a)}));(yield Promise.all(i)).forEach(a=>r.appendChild(a));const o=Ln.createElement("small");o.classList.add("beacon-toast__powered"),o.appendChild(zS()),r.appendChild(o),rR(t)}else I2(t),P2(t)}),nb=t=>Nr(void 0,void 0,void 0,function*(){Lr=t;const e=t.timer,r=Ln.createElement("div");r.setAttribute("id","beacon-toast-wrapper");const n=r.attachShadow({mode:"open"}),i=Ln.createElement("div"),{style:s,html:o}=eR(t);i.appendChild(o);const a=Ln.createElement("style");a.textContent=s,n.appendChild(i),n.appendChild(a),e&&(xc=window.setTimeout(()=>Nr(void 0,void 0,void 0,function*(){yield Rr()}),e)),Ln.body.prepend(r);const c=Hp(),l=n.getElementById("beacon-toast");l&&l.classList.add(`theme__${c}`);const f=n.getElementById("beacon-toast-list");f&&(yield L2(n,t,f));const h=n.getElementById("beacon-open-wallet");h&&(t.openWalletAction?h.addEventListener("click",()=>{t.openWalletAction&&t.openWalletAction()}):h.classList.add("hide")),Lr.state==="loading"&&(Pu=window.setTimeout(()=>Nr(void 0,void 0,void 0,function*(){const P=n.getElementById("beacon-toast-button-expand");P&&!P.classList.contains("beacon-toast__upside_down")&&W0(n)}),T2)),md(n,"beacon-toast-button-done",()=>Nr(void 0,void 0,void 0,function*(){yield Rr()}));const S=md(n,"beacon-toast-button-close",()=>Nr(void 0,void 0,void 0,function*(){yield Rr()}));S&&Lr.state==="loading"&&S.classList.add("hide"),md(n,"beacon-toast-button-expand",()=>Nr(void 0,void 0,void 0,function*(){W0(n)}))}),nR=t=>Nr(void 0,void 0,void 0,function*(){Lr=Object.assign(Object.assign({},Lr),t);const e=t.timer,r=Ln.getElementById("beacon-toast-wrapper");if(!r)return;const n=r.shadowRoot;if(!n)return;const i=n.getElementById("beacon-toast-list");i&&(z0(i),yield L2(n,t,i)),Lr.state==="loading"&&(Pu=window.setTimeout(()=>Nr(void 0,void 0,void 0,function*(){const c=n.getElementById("beacon-toast-button-expand");c&&!c.classList.contains("beacon-toast__upside_down")&&W0(n)}),T2));const s=n.getElementById("beacon-text-content");s&&(z0(s),s.appendChild(ge("span",["beacon-toast__wallet__outer"],[],O2(t.body))));const o=n.getElementById("beacon-open-wallet");o&&(t.openWalletAction?(o.classList.remove("hide"),o.addEventListener("click",()=>{t.openWalletAction&&t.openWalletAction()})):o.classList.add("hide")),e&&(xc=window.setTimeout(()=>Nr(void 0,void 0,void 0,function*(){yield Rr()}),e));const a=n.getElementById("beacon-toast-button-done");a&&a.addEventListener("click",()=>Nr(void 0,void 0,void 0,function*(){yield Rr()}))}),Zs=t=>Nr(void 0,void 0,void 0,function*(){var e;if(Pu&&clearTimeout(Pu),Ln.getElementById("beacon-toast-wrapper")?t.forceNew?(yield Rr(),yield nb(t)):yield nR(t):yield nb(t),Lr&&Lr.state==="finished"){const n=(e=Ln.getElementById("beacon-toast-wrapper"))===null||e===void 0?void 0:e.shadowRoot;n&&(tR(n),I2(n),N2(n))}});var qp={exports:{}},M2=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},iR=M2,Vp=Object.prototype.toString,$p=function(t){return function(e){var r=Vp.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function ko(t){return t=t.toLowerCase(),function(r){return $p(r)===t}}function zp(t){return Array.isArray(t)}function Nu(t){return typeof t>"u"}function sR(t){return t!==null&&!Nu(t)&&t.constructor!==null&&!Nu(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var C2=ko("ArrayBuffer");function oR(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&C2(t.buffer),e}function aR(t){return typeof t=="string"}function cR(t){return typeof t=="number"}function B2(t){return t!==null&&typeof t=="object"}function ou(t){if($p(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var fR=ko("Date"),uR=ko("File"),lR=ko("Blob"),hR=ko("FileList");function Wp(t){return Vp.call(t)==="[object Function]"}function dR(t){return B2(t)&&Wp(t.pipe)}function pR(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||Vp.call(t)===e||Wp(t.toString)&&t.toString()===e)}var gR=ko("URLSearchParams");function bR(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function vR(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Xp(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),zp(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function X0(){var t={};function e(i,s){ou(t[s])&&ou(i)?t[s]=X0(t[s],i):ou(i)?t[s]=X0({},i):zp(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)Xp(arguments[r],e);return t}function mR(t,e,r){return Xp(e,function(i,s){r&&typeof i=="function"?t[s]=iR(i,r):t[s]=i}),t}function yR(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function ER(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function wR(t,e,r){var n,i,s,o={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)s=n[i],o[s]||(e[s]=t[s],o[s]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function _R(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function AR(t){if(!t)return null;var e=t.length;if(Nu(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var xR=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),hr={isArray:zp,isArrayBuffer:C2,isBuffer:sR,isFormData:pR,isArrayBufferView:oR,isString:aR,isNumber:cR,isObject:B2,isPlainObject:ou,isUndefined:Nu,isDate:fR,isFile:uR,isBlob:lR,isFunction:Wp,isStream:dR,isURLSearchParams:gR,isStandardBrowserEnv:vR,forEach:Xp,merge:X0,extend:mR,trim:bR,stripBOM:yR,inherits:ER,toFlatObject:wR,kindOf:$p,kindOfTest:ko,endsWith:_R,toArray:AR,isTypedArray:xR,isFileList:hR},zo=hr;function ib(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Jp=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(zo.isURLSearchParams(r))i=r.toString();else{var s=[];zo.forEach(r,function(c,l){c===null||typeof c>"u"||(zo.isArray(c)?l=l+"[]":c=[c],zo.forEach(c,function(h){zo.isDate(h)?h=h.toISOString():zo.isObject(h)&&(h=JSON.stringify(h)),s.push(ib(l)+"="+ib(h))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e};const JC=wi(Jp);var SR=hr;function Nl(){this.handlers=[]}Nl.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Nl.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Nl.prototype.forEach=function(e){SR.forEach(this.handlers,function(n){n!==null&&e(n)})};var RR=Nl,TR=hr,OR=function(e,r){TR.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},k2=hr;function ma(t,e,r,n,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}k2.inherits(ma,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var D2=ma.prototype,U2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){U2[t]={value:t}});Object.defineProperties(ma,U2);Object.defineProperty(D2,"isAxiosError",{value:!0});ma.from=function(t,e,r,n,i,s){var o=Object.create(D2);return k2.toFlatObject(t,o,function(c){return c!==Error.prototype}),ma.call(o,t.message,e,r,n,i),o.name=t.name,s&&Object.assign(o,s),o};var Ka=ma,F2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Sn=hr;function IR(t,e){e=e||new FormData;var r=[];function n(s){return s===null?"":Sn.isDate(s)?s.toISOString():Sn.isArrayBuffer(s)||Sn.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):te.from(s):s}function i(s,o){if(Sn.isPlainObject(s)||Sn.isArray(s)){if(r.indexOf(s)!==-1)throw Error("Circular reference detected in "+o);r.push(s),Sn.forEach(s,function(c,l){if(!Sn.isUndefined(c)){var f=o?o+"."+l:l,h;if(c&&!o&&typeof c=="object"){if(Sn.endsWith(l,"{}"))c=JSON.stringify(c);else if(Sn.endsWith(l,"[]")&&(h=Sn.toArray(c))){h.forEach(function(S){!Sn.isUndefined(S)&&e.append(f,n(S))});return}}i(c,f)}}),r.pop()}else e.append(o,n(s))}return i(t),e}var K2=IR,yd,sb;function PR(){if(sb)return yd;sb=1;var t=Ka;return yd=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(new t("Request failed with status code "+i.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},yd}var Ed,ob;function NR(){if(ob)return Ed;ob=1;var t=hr;return Ed=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(a)&&l.push("domain="+a),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Ed}var LR=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},MR=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},CR=LR,BR=MR,Yp=function(e,r){return e&&!CR(r)?BR(e,r):r};const YC=wi(Yp);var wd,ab;function kR(){if(ab)return wd;ab=1;var t=hr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return wd=function(n){var i={},s,o,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=t.trim(l.substr(0,a)).toLowerCase(),o=t.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},wd}var _d,cb;function DR(){if(cb)return _d;cb=1;var t=hr;return _d=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var c=t.isString(a)?s(a):a;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),_d}var Ad,fb;function Ll(){if(fb)return Ad;fb=1;var t=Ka,e=hr;function r(n){t.call(this,n??"canceled",t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),Ad=r,Ad}var xd,ub;function UR(){return ub||(ub=1,xd=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),xd}var Sd,lb;function hb(){if(lb)return Sd;lb=1;var t=hr,e=PR(),r=NR(),n=Jp,i=Yp,s=kR(),o=DR(),a=F2,c=Ka,l=Ll(),f=UR();return Sd=function(S){return new Promise(function(M,H){var $=S.data,q=S.headers,C=S.responseType,V;function K(){S.cancelToken&&S.cancelToken.unsubscribe(V),S.signal&&S.signal.removeEventListener("abort",V)}t.isFormData($)&&t.isStandardBrowserEnv()&&delete q["Content-Type"];var U=new XMLHttpRequest;if(S.auth){var G=S.auth.username||"",y=S.auth.password?unescape(encodeURIComponent(S.auth.password)):"";q.Authorization="Basic "+btoa(G+":"+y)}var _=i(S.baseURL,S.url);U.open(S.method.toUpperCase(),n(_,S.params,S.paramsSerializer),!0),U.timeout=S.timeout;function I(){if(U){var u="getAllResponseHeaders"in U?s(U.getAllResponseHeaders()):null,d=!C||C==="text"||C==="json"?U.responseText:U.response,g={data:d,status:U.status,statusText:U.statusText,headers:u,config:S,request:U};e(function(p){M(p),K()},function(p){H(p),K()},g),U=null}}if("onloadend"in U?U.onloadend=I:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(I)},U.onabort=function(){U&&(H(new c("Request aborted",c.ECONNABORTED,S,U)),U=null)},U.onerror=function(){H(new c("Network Error",c.ERR_NETWORK,S,U,U)),U=null},U.ontimeout=function(){var d=S.timeout?"timeout of "+S.timeout+"ms exceeded":"timeout exceeded",g=S.transitional||a;S.timeoutErrorMessage&&(d=S.timeoutErrorMessage),H(new c(d,g.clarifyTimeoutError?c.ETIMEDOUT:c.ECONNABORTED,S,U)),U=null},t.isStandardBrowserEnv()){var x=(S.withCredentials||o(_))&&S.xsrfCookieName?r.read(S.xsrfCookieName):void 0;x&&(q[S.xsrfHeaderName]=x)}"setRequestHeader"in U&&t.forEach(q,function(d,g){typeof $>"u"&&g.toLowerCase()==="content-type"?delete q[g]:U.setRequestHeader(g,d)}),t.isUndefined(S.withCredentials)||(U.withCredentials=!!S.withCredentials),C&&C!=="json"&&(U.responseType=S.responseType),typeof S.onDownloadProgress=="function"&&U.addEventListener("progress",S.onDownloadProgress),typeof S.onUploadProgress=="function"&&U.upload&&U.upload.addEventListener("progress",S.onUploadProgress),(S.cancelToken||S.signal)&&(V=function(u){U&&(H(!u||u&&u.type?new l:u),U.abort(),U=null)},S.cancelToken&&S.cancelToken.subscribe(V),S.signal&&(S.signal.aborted?V():S.signal.addEventListener("abort",V))),$||($=null);var E=f(_);if(E&&["http","https","file"].indexOf(E)===-1){H(new c("Unsupported protocol "+E+":",c.ERR_BAD_REQUEST,S));return}U.send($)})},Sd}var Rd,db;function FR(){return db||(db=1,Rd=null),Rd}var nr=hr,pb=OR,gb=Ka,KR=F2,HR=K2,jR={"Content-Type":"application/x-www-form-urlencoded"};function bb(t,e){!nr.isUndefined(t)&&nr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function GR(){var t;return(typeof XMLHttpRequest<"u"||typeof tt<"u"&&Object.prototype.toString.call(tt)==="[object process]")&&(t=hb()),t}function qR(t,e,r){if(nr.isString(t))try{return(e||JSON.parse)(t),nr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Ml={transitional:KR,adapter:GR(),transformRequest:[function(e,r){if(pb(r,"Accept"),pb(r,"Content-Type"),nr.isFormData(e)||nr.isArrayBuffer(e)||nr.isBuffer(e)||nr.isStream(e)||nr.isFile(e)||nr.isBlob(e))return e;if(nr.isArrayBufferView(e))return e.buffer;if(nr.isURLSearchParams(e))return bb(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=nr.isObject(e),i=r&&r["Content-Type"],s;if((s=nr.isFileList(e))||n&&i==="multipart/form-data"){var o=this.env&&this.env.FormData;return HR(s?{"files[]":e}:e,o&&new o)}else if(n||i==="application/json")return bb(r,"application/json"),qR(e);return e}],transformResponse:[function(e){var r=this.transitional||Ml.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&nr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?gb.from(o,gb.ERR_BAD_RESPONSE,this,null,this.response):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:FR()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};nr.forEach(["delete","get","head"],function(e){Ml.headers[e]={}});nr.forEach(["post","put","patch"],function(e){Ml.headers[e]=nr.merge(jR)});var Qp=Ml,VR=hr,$R=Qp,zR=function(e,r,n){var i=this||$R;return VR.forEach(n,function(o){e=o.call(i,e,r)}),e},Td,vb;function H2(){return vb||(vb=1,Td=function(e){return!!(e&&e.__CANCEL__)}),Td}var mb=hr,Od=zR,WR=H2(),XR=Qp,JR=Ll();function Id(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new JR}var YR=function(e){Id(e),e.headers=e.headers||{},e.data=Od.call(e,e.data,e.headers,e.transformRequest),e.headers=mb.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),mb.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||XR.adapter;return r(e).then(function(i){return Id(e),i.data=Od.call(e,i.data,i.headers,e.transformResponse),i},function(i){return WR(i)||(Id(e),i&&i.response&&(i.response.data=Od.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Vr=hr,j2=function(e,r){r=r||{};var n={};function i(f,h){return Vr.isPlainObject(f)&&Vr.isPlainObject(h)?Vr.merge(f,h):Vr.isPlainObject(h)?Vr.merge({},h):Vr.isArray(h)?h.slice():h}function s(f){if(Vr.isUndefined(r[f])){if(!Vr.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!Vr.isUndefined(r[f]))return i(void 0,r[f])}function a(f){if(Vr.isUndefined(r[f])){if(!Vr.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function c(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Vr.forEach(Object.keys(e).concat(Object.keys(r)),function(h){var S=l[h]||s,P=S(h);Vr.isUndefined(P)&&S!==c||(n[h]=P)}),n},Pd,yb;function G2(){return yb||(yb=1,Pd={version:"0.27.2"}),Pd}var QR=G2().version,Ss=Ka,Zp={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Zp[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Eb={};Zp.transitional=function(e,r,n){function i(s,o){return"[Axios v"+QR+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Ss(i(o," has been removed"+(r?" in "+r:"")),Ss.ERR_DEPRECATED);return r&&!Eb[o]&&(Eb[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function ZR(t,e,r){if(typeof t!="object")throw new Ss("options must be an object",Ss.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new Ss("option "+s+" must be "+c,Ss.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ss("Unknown option "+s,Ss.ERR_BAD_OPTION)}}var eT={assertOptions:ZR,validators:Zp},q2=hr,tT=Jp,wb=RR,_b=YR,Cl=j2,rT=Yp,V2=eT,Wo=V2.validators;function ya(t){this.defaults=t,this.interceptors={request:new wb,response:new wb}}ya.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Cl(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&V2.assertOptions(n,{silentJSONParsing:Wo.transitional(Wo.boolean),forcedJSONParsing:Wo.transitional(Wo.boolean),clarifyTimeoutError:Wo.transitional(Wo.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(r)===!1||(s=s&&P.synchronous,i.unshift(P.fulfilled,P.rejected))});var o=[];this.interceptors.response.forEach(function(P){o.push(P.fulfilled,P.rejected)});var a;if(!s){var c=[_b,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(o),a=Promise.resolve(r);c.length;)a=a.then(c.shift(),c.shift());return a}for(var l=r;i.length;){var f=i.shift(),h=i.shift();try{l=f(l)}catch(S){h(S);break}}try{a=_b(l)}catch(S){return Promise.reject(S)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};ya.prototype.getUri=function(e){e=Cl(this.defaults,e);var r=rT(e.baseURL,e.url);return tT(r,e.params,e.paramsSerializer)};q2.forEach(["delete","get","head","options"],function(e){ya.prototype[e]=function(r,n){return this.request(Cl(n||{},{method:e,url:r,data:(n||{}).data}))}});q2.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(Cl(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ya.prototype[e]=r(),ya.prototype[e+"Form"]=r(!0)});var nT=ya,Nd,Ab;function iT(){if(Ab)return Nd;Ab=1;var t=Ll();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(c){i.subscribe(c),o=c}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Nd=e,Nd}var Ld,xb;function sT(){return xb||(xb=1,Ld=function(e){return function(n){return e.apply(null,n)}}),Ld}var Md,Sb;function oT(){if(Sb)return Md;Sb=1;var t=hr;return Md=function(r){return t.isObject(r)&&r.isAxiosError===!0},Md}var Rb=hr,aT=M2,au=nT,cT=j2,fT=Qp;function $2(t){var e=new au(t),r=aT(au.prototype.request,e);return Rb.extend(r,au.prototype,e),Rb.extend(r,e),r.create=function(i){return $2(cT(t,i))},r}var Ur=$2(fT);Ur.Axios=au;Ur.CanceledError=Ll();Ur.CancelToken=iT();Ur.isCancel=H2();Ur.VERSION=G2().version;Ur.toFormData=K2;Ur.AxiosError=Ka;Ur.Cancel=Ur.CanceledError;Ur.all=function(e){return Promise.all(e)};Ur.spread=sT();Ur.isAxiosError=oT();qp.exports=Ur;qp.exports.default=Ur;var uT=qp.exports,lT=uT;const hT=wi(lT),Bl=t=>t.length>=12?`${t.substr(0,5)}...${t.substr(-5)}`:t;var At=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Pc=new on("BeaconEvents"),Zc=5*1e3;var ue;(function(t){t.PERMISSION_REQUEST_SENT="PERMISSION_REQUEST_SENT",t.PERMISSION_REQUEST_SUCCESS="PERMISSION_REQUEST_SUCCESS",t.PERMISSION_REQUEST_ERROR="PERMISSION_REQUEST_ERROR",t.OPERATION_REQUEST_SENT="OPERATION_REQUEST_SENT",t.OPERATION_REQUEST_SUCCESS="OPERATION_REQUEST_SUCCESS",t.OPERATION_REQUEST_ERROR="OPERATION_REQUEST_ERROR",t.SIGN_REQUEST_SENT="SIGN_REQUEST_SENT",t.SIGN_REQUEST_SUCCESS="SIGN_REQUEST_SUCCESS",t.SIGN_REQUEST_ERROR="SIGN_REQUEST_ERROR",t.BROADCAST_REQUEST_SENT="BROADCAST_REQUEST_SENT",t.BROADCAST_REQUEST_SUCCESS="BROADCAST_REQUEST_SUCCESS",t.BROADCAST_REQUEST_ERROR="BROADCAST_REQUEST_ERROR",t.ACKNOWLEDGE_RECEIVED="ACKNOWLEDGE_RECEIVED",t.LOCAL_RATE_LIMIT_REACHED="LOCAL_RATE_LIMIT_REACHED",t.NO_PERMISSIONS="NO_PERMISSIONS",t.ACTIVE_ACCOUNT_SET="ACTIVE_ACCOUNT_SET",t.ACTIVE_TRANSPORT_SET="ACTIVE_TRANSPORT_SET",t.SHOW_PREPARE="SHOW_PREPARE",t.HIDE_UI="HIDE_UI",t.PAIR_INIT="PAIR_INIT",t.PAIR_SUCCESS="PAIR_SUCCESS",t.CHANNEL_CLOSED="CHANNEL_CLOSED",t.INTERNAL_ERROR="INTERNAL_ERROR",t.UNKNOWN="UNKNOWN"})(ue||(ue={}));const Lf=t=>At(void 0,void 0,void 0,function*(){let e;const r=[];if(t.walletInfo.deeplink&&(t.walletInfo.type==="web"||t.walletInfo.type==="mobile"&&G0(window)||t.walletInfo.type==="desktop"&&!G0(window))){const n=t.walletInfo.deeplink;e=()=>At(void 0,void 0,void 0,function*(){const i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("target","_blank"),i.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))})}r.push({text:"No answer from your wallet received yet. Please make sure the wallet is open.",isBold:!0}),r.push({text:"Did you make a mistake?",actionText:"Cancel Request",actionCallback:()=>At(void 0,void 0,void 0,function*(){yield Rr()})}),r.push({text:"Wallet not receiving request?",actionText:"Reset Connection",actionCallback:()=>At(void 0,void 0,void 0,function*(){yield Rr();const n=t.extraInfo.resetCallback;n&&(Pc.log("showSentToast","resetCallback invoked"),yield n())})}),Zs({body:"Request sent to {{wallet}}",walletInfo:t.walletInfo,state:"loading",actions:r,openWalletAction:e}).catch(n=>console.error(n))}),dT=t=>At(void 0,void 0,void 0,function*(){Zs({body:"Awaiting confirmation in {{wallet}}",state:"acknowledge",walletInfo:t.walletInfo}).catch(e=>console.error(e))}),pT=t=>At(void 0,void 0,void 0,function*(){const e=t.walletInfo?"Preparing Request for {{wallet}}...":"Preparing Request...";Zs({body:e,state:"prepare",walletInfo:t.walletInfo}).catch(r=>console.error(r))}),gT=t=>At(void 0,void 0,void 0,function*(){t?(t.includes("alert")&&Pl(),t.includes("toast")&&Rr()):Rr()}),bT=()=>At(void 0,void 0,void 0,function*(){yield Fa({title:"No Permission",body:"Please allow the wallet to handle this type of request."})}),Mf=(t,e)=>At(void 0,void 0,void 0,function*(){var r,n,i,s,o,a;const c=t.errorResponse.errorType?an.getError(t.errorResponse.errorType,t.errorResponse.errorData):new t2,l=[{text:c.title,isBold:!0}];if(t.errorResponse.errorType===Et.TRANSACTION_INVALID_ERROR&&t.errorResponse.errorData){const f=t.errorResponse.errorData,h=t.errorMessages;let S=!1;if(!((r=f[0])===null||r===void 0)&&r.contract_handle&&h&&(h!=null&&h[f[0].contract_handle])){const P=(s=(i=(n=f[1])===null||n===void 0?void 0:n.with)===null||i===void 0?void 0:i.int)!==null&&s!==void 0?s:(a=(o=f[1])===null||o===void 0?void 0:o.with)===null||a===void 0?void 0:a.string,M=h==null?void 0:h[f[0].contract_handle];P&&(M!=null&&M[P])&&(l.push({text:M==null?void 0:M[P],isBold:!0}),S=!0)}S||l.push({text:c.description}),l.push({text:"",actionText:"Show Details",actionCallback:()=>At(void 0,void 0,void 0,function*(){yield Rr(),yield Fa({title:c.title,body:c.fullDescription.description,data:c.fullDescription.data,buttons:e})})})}yield Zs({body:"{{wallet}} has returned an error",timer:t.errorResponse.errorType===Et.ABORTED_ERROR?Zc:void 0,state:"finished",walletInfo:t.walletInfo,actions:l})}),vT=()=>At(void 0,void 0,void 0,function*(){Fa({title:"Error",body:"Rate limit reached. Please slow down",buttons:[{text:"Done",style:"outline"}],timer:3e3}).catch(t=>console.error(t))}),mT=()=>At(void 0,void 0,void 0,function*(){yield Pl()}),yT=()=>At(void 0,void 0,void 0,function*(){yield Fa({title:"Channel closed",body:"Your peer has closed the connection.",buttons:[{text:"Done",style:"outline"}],timer:1500})}),ET=t=>At(void 0,void 0,void 0,function*(){var e;const r=[...(e=t.buttons)!==null&&e!==void 0?e:[]];r.push({text:"Done",style:"outline"});const n={title:"Internal Error",body:t.text,buttons:r};yield Fa(n)}),wT=t=>At(void 0,void 0,void 0,function*(){const e={title:"Choose your preferred wallet",body:"<p></p>",pairingPayload:{p2pSyncCode:t.p2pPeerInfo,postmessageSyncCode:t.postmessagePeerInfo,preferredNetwork:t.preferredNetwork},closeButtonCallback:t.abortedHandler,disclaimerText:t.disclaimerText};yield Fa(e)}),_T=t=>At(void 0,void 0,void 0,function*(){const{output:e}=t;yield Zs({body:"{{wallet}} has granted permission",timer:Zc,walletInfo:t.walletInfo,state:"finished",actions:[{text:"Address",actionText:Bl(e.address),isBold:!0},{text:"Network",actionText:`${e.network.type}`},{text:"Permissions",actionText:e.scopes.join(", ")}]})}),AT=t=>At(void 0,void 0,void 0,function*(){const{account:e,output:r,blockExplorer:n}=t;yield Zs({body:"{{wallet}} successfully submitted operation",timer:Zc,state:"finished",walletInfo:t.walletInfo,actions:[{text:Bl(r.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>At(void 0,void 0,void 0,function*(){const i=yield n.getTransactionLink(r.transactionHash,e.network);window.open(i,"_blank"),yield Rr()})}]})}),xT=t=>At(void 0,void 0,void 0,function*(){const e=t.output;yield Zs({body:"{{wallet}} successfully signed payload",timer:Zc,state:"finished",walletInfo:t.walletInfo,actions:[{text:`Signature: ${Bl(e.signature)}`,actionText:"Copy to clipboard",actionCallback:()=>At(void 0,void 0,void 0,function*(){navigator.clipboard.writeText(e.signature).then(()=>{Pc.log("showSignSuccessAlert","Copying to clipboard was successful!")},r=>{Pc.error("showSignSuccessAlert","Could not copy text to clipboard: ",r)}),yield Rr()})}]})}),ST=t=>At(void 0,void 0,void 0,function*(){const{network:e,output:r,blockExplorer:n}=t;yield Zs({body:"{{wallet}} successfully injected operation",timer:Zc,state:"finished",walletInfo:t.walletInfo,actions:[{text:Bl(r.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>At(void 0,void 0,void 0,function*(){const i=yield n.getTransactionLink(r.transactionHash,e);window.open(i,"_blank"),yield Rr()})}]})}),Cd=()=>()=>At(void 0,void 0,void 0,function*(){}),Rt={[ue.PERMISSION_REQUEST_SENT]:Lf,[ue.PERMISSION_REQUEST_SUCCESS]:_T,[ue.PERMISSION_REQUEST_ERROR]:Mf,[ue.OPERATION_REQUEST_SENT]:Lf,[ue.OPERATION_REQUEST_SUCCESS]:AT,[ue.OPERATION_REQUEST_ERROR]:Mf,[ue.SIGN_REQUEST_SENT]:Lf,[ue.SIGN_REQUEST_SUCCESS]:xT,[ue.SIGN_REQUEST_ERROR]:Mf,[ue.BROADCAST_REQUEST_SENT]:Lf,[ue.BROADCAST_REQUEST_SUCCESS]:ST,[ue.BROADCAST_REQUEST_ERROR]:Mf,[ue.ACKNOWLEDGE_RECEIVED]:dT,[ue.LOCAL_RATE_LIMIT_REACHED]:vT,[ue.NO_PERMISSIONS]:bT,[ue.ACTIVE_ACCOUNT_SET]:Cd(),[ue.ACTIVE_TRANSPORT_SET]:Cd(),[ue.SHOW_PREPARE]:pT,[ue.HIDE_UI]:gT,[ue.PAIR_INIT]:wT,[ue.PAIR_SUCCESS]:mT,[ue.CHANNEL_CLOSED]:yT,[ue.INTERNAL_ERROR]:ET,[ue.UNKNOWN]:Cd()};class Tb{constructor(e={},r){this.callbackMap={[ue.PERMISSION_REQUEST_SENT]:[Rt.PERMISSION_REQUEST_SENT],[ue.PERMISSION_REQUEST_SUCCESS]:[Rt.PERMISSION_REQUEST_SUCCESS],[ue.PERMISSION_REQUEST_ERROR]:[Rt.PERMISSION_REQUEST_ERROR],[ue.OPERATION_REQUEST_SENT]:[Rt.OPERATION_REQUEST_SENT],[ue.OPERATION_REQUEST_SUCCESS]:[Rt.OPERATION_REQUEST_SUCCESS],[ue.OPERATION_REQUEST_ERROR]:[Rt.OPERATION_REQUEST_ERROR],[ue.SIGN_REQUEST_SENT]:[Rt.SIGN_REQUEST_SENT],[ue.SIGN_REQUEST_SUCCESS]:[Rt.SIGN_REQUEST_SUCCESS],[ue.SIGN_REQUEST_ERROR]:[Rt.SIGN_REQUEST_ERROR],[ue.BROADCAST_REQUEST_SENT]:[Rt.BROADCAST_REQUEST_SENT],[ue.BROADCAST_REQUEST_SUCCESS]:[Rt.BROADCAST_REQUEST_SUCCESS],[ue.BROADCAST_REQUEST_ERROR]:[Rt.BROADCAST_REQUEST_ERROR],[ue.ACKNOWLEDGE_RECEIVED]:[Rt.ACKNOWLEDGE_RECEIVED],[ue.LOCAL_RATE_LIMIT_REACHED]:[Rt.LOCAL_RATE_LIMIT_REACHED],[ue.NO_PERMISSIONS]:[Rt.NO_PERMISSIONS],[ue.ACTIVE_ACCOUNT_SET]:[Rt.ACTIVE_ACCOUNT_SET],[ue.ACTIVE_TRANSPORT_SET]:[Rt.ACTIVE_TRANSPORT_SET],[ue.SHOW_PREPARE]:[Rt.SHOW_PREPARE],[ue.HIDE_UI]:[Rt.HIDE_UI],[ue.PAIR_INIT]:[Rt.PAIR_INIT],[ue.PAIR_SUCCESS]:[Rt.PAIR_SUCCESS],[ue.CHANNEL_CLOSED]:[Rt.CHANNEL_CLOSED],[ue.INTERNAL_ERROR]:[Rt.INTERNAL_ERROR],[ue.UNKNOWN]:[Rt.UNKNOWN]},r&&this.setAllHandlers(),this.overrideDefaults(e)}on(e,r){return At(this,void 0,void 0,function*(){const n=this.callbackMap[e]||[];n.push(r),this.callbackMap[e]=n})}emit(e,r,n){return At(this,void 0,void 0,function*(){const i=this.callbackMap[e];i&&i.length>0&&i.forEach(s=>At(this,void 0,void 0,function*(){try{yield s(r,n)}catch(o){Pc.error(`error handling event ${e}`,o)}}))})}overrideDefaults(e){Object.keys(e).forEach(r=>{const n=r,i=e[n];i&&(this.callbackMap[n]=[i.handler])})}setAllHandlers(e){Object.keys(this.callbackMap).forEach(r=>{const n=r;this.callbackMap[n]=[],e?this.callbackMap[n].push(e):this.callbackMap[n].push((...i)=>{Pc.log(r,...i)})})}}const Cf={[Fe.BlockchainRequest]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[Fe.BlockchainResponse]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[Fe.PermissionRequest]:{sent:ue.PERMISSION_REQUEST_SENT,success:ue.PERMISSION_REQUEST_SUCCESS,error:ue.PERMISSION_REQUEST_ERROR},[Fe.PermissionResponse]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[Fe.OperationRequest]:{sent:ue.OPERATION_REQUEST_SENT,success:ue.OPERATION_REQUEST_SUCCESS,error:ue.OPERATION_REQUEST_ERROR},[Fe.OperationResponse]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[Fe.SignPayloadRequest]:{sent:ue.SIGN_REQUEST_SENT,success:ue.SIGN_REQUEST_SUCCESS,error:ue.SIGN_REQUEST_ERROR},[Fe.SignPayloadResponse]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[Fe.BroadcastRequest]:{sent:ue.BROADCAST_REQUEST_SENT,success:ue.BROADCAST_REQUEST_SUCCESS,error:ue.BROADCAST_REQUEST_ERROR},[Fe.BroadcastResponse]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[Fe.Acknowledge]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[Fe.Disconnect]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[Fe.Error]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN}};var RT=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class TT{constructor(e){this.rpcUrls=e}getLinkForNetwork(e){return RT(this,void 0,void 0,function*(){return this.rpcUrls[e.type]})}}var Ob=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class OT extends TT{constructor(e={[Lt.MAINNET]:"https://tzkt.io",[Lt.GHOSTNET]:"https://ghostnet.tzkt.io",[Lt.MONDAYNET]:"https://mondaynet.tzkt.io",[Lt.DAILYNET]:"https://dailynet.tzkt.io",[Lt.DELPHINET]:"https://delphinet.tzkt.io",[Lt.EDONET]:"https://edonet.tzkt.io",[Lt.FLORENCENET]:"https://florencenet.tzkt.io",[Lt.GRANADANET]:"https://granadanet.tzkt.io",[Lt.HANGZHOUNET]:"https://hangzhounet.tzkt.io",[Lt.ITHACANET]:"https://ithacanet.tzkt.io",[Lt.JAKARTANET]:"https://jakartanet.tzkt.io",[Lt.KATHMANDUNET]:"https://kathmandunet.tzkt.io",[Lt.LIMANET]:"https://limanet.tzkt.io",[Lt.MUMBAINET]:"https://mumbainet.tzkt.io",[Lt.CUSTOM]:"https://mumbainet.tzkt.io"}){super(e),this.rpcUrls=e}getAddressLink(e,r){return Ob(this,void 0,void 0,function*(){return`${yield this.getLinkForNetwork(r)}/${e}`})}getTransactionLink(e,r){return Ob(this,void 0,void 0,function*(){return`${yield this.getLinkForNetwork(r)}/${e}`})}}var Bf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Bd=new on("DappPostMessageTransport");class IT extends Qc{constructor(e,r,n){super(e,r,n,ke.TRANSPORT_POSTMESSAGE_PEERS_DAPP)}startOpenChannelListener(){return Bf(this,void 0,void 0,function*(){return this.client.listenForChannelOpening(e=>Bf(this,void 0,void 0,function*(){Bd.log("connect","received PostMessagePairingResponse",e),yield this.addPeer(e),this._isConnected=bn.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))})}listenForNewPeer(e){return Bf(this,void 0,void 0,function*(){Bd.log("listenForNewPeer"),this.newPeerListener=e})}stopListeningForNewPeers(){return Bf(this,void 0,void 0,function*(){Bd.log("stopListeningForNewPeers"),this.newPeerListener=void 0})}}var kf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const kd=new on("DappP2PTransport");class PT extends RS{constructor(e,r,n,i,s,o){super(e,r,n,i,ke.TRANSPORT_P2P_PEERS_DAPP,s,o)}startOpenChannelListener(){return kf(this,void 0,void 0,function*(){return this.client.listenForChannelOpening(e=>kf(this,void 0,void 0,function*(){kd.log("listenForNewPeer","new publicKey",e.publicKey),yield this.addPeer(e),this._isConnected=bn.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))})}listenForNewPeer(e){return kf(this,void 0,void 0,function*(){kd.log("listenForNewPeer"),this.newPeerListener=e})}stopListeningForNewPeers(){return kf(this,void 0,void 0,function*(){kd.log("stopListeningForNewPeers"),this.newPeerListener=void 0})}}var Ie=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Dt=new on("DAppClient");class NT extends r8{constructor(e){var r,n,i,s,o;super(Object.assign({storage:e&&e.storage?e.storage:new l8},e)),this.events=new Tb,this.openRequests=new Map,this._activeAccount=new er,this._activePeer=new er,this.blockchains=new Map,this.events=new Tb(e.eventHandlers,(r=e.disableDefaultEvents)!==null&&r!==void 0?r:!1),this.blockExplorer=(n=e.blockExplorer)!==null&&n!==void 0?n:new OT,this.preferredNetwork=(i=e.preferredNetwork)!==null&&i!==void 0?i:Lt.MAINNET,rb((s=e.colorMode)!==null&&s!==void 0?s:Su.LIGHT),this.disclaimerText=e.disclaimerText,this.errorMessages=(o=e.errorMessages)!==null&&o!==void 0?o:{},this.appMetadataManager=new h8(this.storage),this.activeAccountLoaded=this.storage.get(ke.ACTIVE_ACCOUNT).then(a=>Ie(this,void 0,void 0,function*(){a?yield this.setActiveAccount(yield this.accountManager.getAccount(a)):yield this.setActiveAccount(void 0)})).catch(a=>Ie(this,void 0,void 0,function*(){yield this.setActiveAccount(void 0),console.error(a)})),this.handleResponse=(a,c)=>Ie(this,void 0,void 0,function*(){var l,f;const h=this.openRequests.get(a.id);if(Dt.log("handleResponse","Received message",a,c),a.version==="3"){const S=a;if(h&&S.message.type===Fe.Acknowledge)Dt.log(`acknowledge message received for ${a.id}`),console.timeLog(a.id,"acknowledge"),this.events.emit(ue.ACKNOWLEDGE_RECEIVED,{message:S.message,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(h){const P=S.message.blockchainData.appMetadata;S.message.type===Fe.PermissionResponse&&P&&(yield this.appMetadataManager.addAppMetadata(P)),console.timeLog(S.id,"response"),console.timeEnd(S.id),S.message.type===Fe.Error?h.reject(S.message):h.resolve({message:a,connectionInfo:c}),this.openRequests.delete(S.id)}else if(S.message.type===Fe.Disconnect){const P=c.origin===Nn.P2P?this.p2pTransport:(l=this.postMessageTransport)!==null&&l!==void 0?l:yield this.transport;if(P){const H=(yield P.getPeers()).find($=>$.senderId===a.senderId);H?(yield P.removePeer(H),yield this.removeAccountsForPeers([H]),yield this.events.emit(ue.CHANNEL_CLOSED)):Dt.error("handleDisconnect","cannot find peer for sender ID",a.senderId)}}else Dt.error("handleResponse","no request found for id ",a.id,a)}else{const S=a;if(h&&S.type===Fe.Acknowledge)Dt.log(`acknowledge message received for ${a.id}`),console.timeLog(a.id,"acknowledge"),this.events.emit(ue.ACKNOWLEDGE_RECEIVED,{message:S,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(h)S.type===Fe.PermissionResponse&&S.appMetadata&&(yield this.appMetadataManager.addAppMetadata(S.appMetadata)),console.timeLog(S.id,"response"),console.timeEnd(S.id),S.type===Fe.Error||a.errorType?h.reject(S):h.resolve({message:a,connectionInfo:c}),this.openRequests.delete(S.id);else if(S.type===Fe.Disconnect||a.typedMessage.type===Fe.Disconnect){const P=c.origin===Nn.P2P?this.p2pTransport:(f=this.postMessageTransport)!==null&&f!==void 0?f:yield this.transport;if(P){const H=(yield P.getPeers()).find($=>$.senderId===a.senderId);H?(yield P.removePeer(H),yield this.removeAccountsForPeers([H]),yield this.events.emit(ue.CHANNEL_CLOSED)):Dt.error("handleDisconnect","cannot find peer for sender ID",a.senderId)}}else Dt.error("handleResponse","no request found for id ",a.id,a)}})}initInternalTransports(){return Ie(this,void 0,void 0,function*(){const e=yield this.keyPair;this.postMessageTransport||this.p2pTransport||(this.postMessageTransport=new IT(this.name,e,this.storage),yield this.addListener(this.postMessageTransport),this.p2pTransport=new PT(this.name,e,this.storage,this.matrixNodes,this.iconUrl,this.appUrl),yield this.addListener(this.p2pTransport))})}init(e){const r=Object.create(null,{init:{get:()=>super.init}});return Ie(this,void 0,void 0,function*(){if(this._initPromise)return this._initPromise;try{yield this.activeAccountLoaded}catch{}return this._initPromise=new Promise(n=>Ie(this,void 0,void 0,function*(){if(e)yield this.addListener(e),n(yield r.init.call(this,e));else if(this._transport.isSettled())yield(yield this.transport).connect(),n(yield r.init.call(this,yield this.transport));else{const i=yield this.getActiveAccount(),s=()=>{this.postMessageTransport&&this.postMessageTransport.stopListeningForNewPeers().catch(console.error),this.p2pTransport&&this.p2pTransport.stopListeningForNewPeers().catch(console.error)};if(yield this.initInternalTransports(),!this.postMessageTransport||!this.p2pTransport)return;if(this.postMessageTransport.connect().then().catch(console.error),i&&i.origin){const o=i.origin.type;o===Nn.EXTENSION?n(yield r.init.call(this,this.postMessageTransport)):o===Nn.P2P&&n(yield r.init.call(this,this.p2pTransport))}else{const o=this.p2pTransport,a=this.postMessageTransport;a.listenForNewPeer(c=>{Dt.log("init","postmessage transport peer connected",c),this.events.emit(ue.PAIR_SUCCESS,c).catch(l=>console.warn(l)),this.setActivePeer(c).catch(console.error),this.setTransport(this.postMessageTransport).catch(console.error),s(),n(Ro.POST_MESSAGE)}).catch(console.error),o.listenForNewPeer(c=>{Dt.log("init","p2p transport peer connected",c),this.events.emit(ue.PAIR_SUCCESS,c).catch(l=>console.warn(l)),this.setActivePeer(c).catch(console.error),this.setTransport(this.p2pTransport).catch(console.error),s(),n(Ro.P2P)}).catch(console.error),Qc.getAvailableExtensions().then(()=>Ie(this,void 0,void 0,function*(){this.events.emit(ue.PAIR_INIT,{p2pPeerInfo:()=>(o.connect().then().catch(console.error),o.getPairingRequestInfo()),postmessagePeerInfo:()=>a.getPairingRequestInfo(),preferredNetwork:this.preferredNetwork,abortedHandler:()=>{console.log("ABORTED"),this._initPromise=void 0},disclaimerText:this.disclaimerText}).catch(c=>console.warn(c))})).catch(c=>{this._initPromise=void 0,console.error(c)})}}})),this._initPromise})}getActiveAccount(){return Ie(this,void 0,void 0,function*(){return this._activeAccount.promise})}setActiveAccount(e){return Ie(this,void 0,void 0,function*(){if(this._activeAccount.isSettled()?this._activeAccount=er.resolve(e):this._activeAccount.resolve(e),e){const r=e.origin.type;yield this.initInternalTransports(),r===Nn.EXTENSION?yield this.setTransport(this.postMessageTransport):r===Nn.P2P&&(yield this.setTransport(this.p2pTransport));const n=yield this.getPeer(e);yield this.setActivePeer(n)}else yield this.setActivePeer(void 0),yield this.setTransport(void 0);yield this.storage.set(ke.ACTIVE_ACCOUNT,e?e.accountIdentifier:void 0),yield this.events.emit(ue.ACTIVE_ACCOUNT_SET,e)})}clearActiveAccount(){return this.setActiveAccount()}setColorMode(e){return Ie(this,void 0,void 0,function*(){return rb(e)})}getColorMode(){return Ie(this,void 0,void 0,function*(){return Hp()})}getAppMetadata(){return Ie(this,void 0,void 0,function*(){return this.getOwnAppMetadata()})}showPrepare(){return Ie(this,void 0,void 0,function*(){const e=yield(()=>Ie(this,void 0,void 0,function*(){try{return yield this.getWalletInfo()}catch{return}}))();yield this.events.emit(ue.SHOW_PREPARE,{walletInfo:e})})}hideUI(e){return Ie(this,void 0,void 0,function*(){yield this.events.emit(ue.HIDE_UI,e)})}removeAccount(e){const r=Object.create(null,{removeAccount:{get:()=>super.removeAccount}});return Ie(this,void 0,void 0,function*(){const n=r.removeAccount.call(this,e),i=yield this.getActiveAccount();return i&&i.accountIdentifier===e&&(yield this.setActiveAccount(void 0)),n})}removeAllAccounts(){const e=Object.create(null,{removeAllAccounts:{get:()=>super.removeAllAccounts}});return Ie(this,void 0,void 0,function*(){yield e.removeAllAccounts.call(this),yield this.setActiveAccount(void 0)})}removePeer(e,r=!1){return Ie(this,void 0,void 0,function*(){const n=yield this.transport,i=n.removePeer(e);return yield this.removeAccountsForPeers([e]),r&&(yield this.sendDisconnectToPeer(e,n)),i})}removeAllPeers(e=!1){return Ie(this,void 0,void 0,function*(){const r=yield this.transport,n=yield r.getPeers(),i=r.removeAllPeers();if(yield this.removeAccountsForPeers(n),e){const s=n.map(o=>this.sendDisconnectToPeer(o,r));yield Promise.all(s)}return i})}subscribeToEvent(e,r){return Ie(this,void 0,void 0,function*(){yield this.events.on(e,r)})}checkPermissions(e){return Ie(this,void 0,void 0,function*(){if(e===Fe.PermissionRequest)return!0;const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account set!");const n=r.scopes;switch(e){case Fe.OperationRequest:return n.includes(Pn.OPERATION_REQUEST);case Fe.SignPayloadRequest:return n.includes(Pn.SIGN);case Fe.BroadcastRequest:return!0;default:return!1}})}sendNotification(e,r,n,i){var s,o,a;return Ie(this,void 0,void 0,function*(){const c=yield this.getActiveAccount();if(!c||c&&!c.scopes.includes(Pn.NOTIFICATION)&&!c.notification)throw new Error("notification permissions not given");if(!(!((s=c.notification)===null||s===void 0)&&s.token))throw new Error("No AccessToken");const l=(o=c.notification)===null||o===void 0?void 0:o.apiUrl;if(!l)throw new Error("No Push URL set");return this.sendNotificationWithAccessToken({url:l,recipient:c.address,title:e,body:r,payload:n,protocolIdentifier:i,accessToken:(a=c.notification)===null||a===void 0?void 0:a.token})})}addBlockchain(e){this.blockchains.set(e.identifier,e),e.getWalletLists().then(r=>{FS(r.desktopList),KS(r.extensionList),HS(r.webList),jS(r.iOSList)})}removeBlockchain(e){this.blockchains.delete(e)}permissionRequest(e){return Ie(this,void 0,void 0,function*(){console.log("PERMISSION REQUEST");const r=this.blockchains.get(e.blockchainIdentifier);if(!r)throw new Error(`Blockchain "${e.blockchainIdentifier}" not supported by dAppClient`);const n=Object.assign(Object.assign({},e),{type:Fe.PermissionRequest,blockchainData:Object.assign(Object.assign({},e.blockchainData),{appMetadata:yield this.getOwnAppMetadata()})});console.log("REQUESTION PERMIMISSION V3","xxx",n);const{message:i,connectionInfo:s}=yield this.makeRequestV3(n).catch(c=>Ie(this,void 0,void 0,function*(){throw new Error("TODO")}));console.log("RESPONSE V3",i,s);const o=yield r.getAccountInfosFromPermissionResponse(i.message),a={accountIdentifier:o[0].accountId,senderId:i.senderId,origin:{type:s.origin,id:s.id},address:o[0].address,publicKey:o[0].publicKey,scopes:i.message.blockchainData.scopes,connectedAt:new Date().getTime(),chainData:i.message.blockchainData};return yield this.accountManager.addAccount(a),yield this.setActiveAccount(a),yield r.handleResponse({request:n,account:a,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),yield this.notifySuccess(n,{account:a,output:{address:o[0].address,network:{type:Lt.MAINNET},scopes:[Pn.OPERATION_REQUEST]},blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i.message})}request(e){return Ie(this,void 0,void 0,function*(){console.log("REQUEST",e);const r=this.blockchains.get(e.blockchainIdentifier);if(!r)throw new Error(`Blockchain "${r}" not supported by dAppClient`);yield r.validateRequest(e);const n=yield this.getActiveAccount();if(!n)throw yield this.sendInternalError("No active account!");const i=Object.assign(Object.assign({},e),{type:Fe.BlockchainRequest,accountId:n.accountIdentifier}),{message:s,connectionInfo:o}=yield this.makeRequestV3(i).catch(a=>Ie(this,void 0,void 0,function*(){throw console.error(a),new Error("TODO")}));return yield r.handleResponse({request:i,account:n,output:s,blockExplorer:this.blockExplorer,connectionContext:o,walletInfo:yield this.getWalletInfo()}),s.message})}requestPermissions(e){return Ie(this,void 0,void 0,function*(){const r={appMetadata:yield this.getOwnAppMetadata(),type:Fe.PermissionRequest,network:e&&e.network?e.network:{type:Lt.MAINNET},scopes:e&&e.scopes?e.scopes:[Pn.OPERATION_REQUEST,Pn.SIGN]},{message:n,connectionInfo:i}=yield this.makeRequest(r).catch(l=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(r,l)})),s=n.publicKey||n.pubkey||n.pubKey,o=yield Hx(s),a={accountIdentifier:yield F0(o,n.network),senderId:n.senderId,origin:{type:i.origin,id:i.id},address:o,publicKey:s,network:n.network,scopes:n.scopes,threshold:n.threshold,notification:n.notification,connectedAt:new Date().getTime()};yield this.accountManager.addAccount(a),yield this.setActiveAccount(a);const c=Object.assign(Object.assign({},n),{address:o,accountInfo:a});return yield this.notifySuccess(r,{account:a,output:c,blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:yield this.getWalletInfo()}),c})}requestSignPayload(e){return Ie(this,void 0,void 0,function*(){if(!e.payload)throw yield this.sendInternalError("Payload must be provided");const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account!");const n=e.payload;if(typeof n!="string")throw new Error("Payload must be a string");const i=(()=>{switch(e.signingType){case As.OPERATION:if(!n.startsWith("03"))throw new Error('When using signing type "OPERATION", the payload must start with prefix "03"');return As.OPERATION;case As.MICHELINE:if(!n.startsWith("05"))throw new Error('When using signing type "MICHELINE", the payload must start with prefix "05"');return As.MICHELINE;case As.RAW:default:return As.RAW}})(),s={type:Fe.SignPayloadRequest,signingType:i,payload:n,sourceAddress:e.sourceAddress||r.address},{message:o,connectionInfo:a}=yield this.makeRequest(s).catch(c=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(s,c)}));return yield this.notifySuccess(s,{account:r,output:o,connectionContext:a,walletInfo:yield this.getWalletInfo()}),o})}requestOperation(e){return Ie(this,void 0,void 0,function*(){if(!e.operationDetails)throw yield this.sendInternalError("Operation details must be provided");const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account!");const n={type:Fe.OperationRequest,network:r.network||{type:Lt.MAINNET},operationDetails:e.operationDetails,sourceAddress:r.address||""},{message:i,connectionInfo:s}=yield this.makeRequest(n).catch(o=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(n,o)}));return yield this.notifySuccess(n,{account:r,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i})}requestBroadcast(e){return Ie(this,void 0,void 0,function*(){if(!e.signedTransaction)throw yield this.sendInternalError("Signed transaction must be provided");const r=e.network||{type:Lt.MAINNET},n={type:Fe.BroadcastRequest,network:r,signedTransaction:e.signedTransaction},{message:i,connectionInfo:s}=yield this.makeRequest(n).catch(o=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(n,o)}));return yield this.notifySuccess(n,{network:r,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i})}setActivePeer(e){return Ie(this,void 0,void 0,function*(){this._activePeer.isSettled()?this._activePeer=er.resolve(e):this._activePeer.resolve(e),e&&(yield this.initInternalTransports(),e.type==="postmessage-pairing-response"?yield this.setTransport(this.postMessageTransport):e.type==="p2p-pairing-response"&&(yield this.setTransport(this.p2pTransport)))})}setTransport(e){const r=Object.create(null,{setTransport:{get:()=>super.setTransport}});return Ie(this,void 0,void 0,function*(){e||(this._initPromise=void 0);const n=r.setTransport.call(this,e);return yield this.events.emit(ue.ACTIVE_TRANSPORT_SET,e),n})}sendInternalError(e){return Ie(this,void 0,void 0,function*(){throw yield this.events.emit(ue.INTERNAL_ERROR,{text:e}),new Error(e)})}removeAccountsForPeers(e){return Ie(this,void 0,void 0,function*(){const r=yield this.accountManager.getAccounts(),n=e.map(a=>a.senderId),s=r.filter(a=>n.includes(a.senderId)).map(a=>a.accountIdentifier);yield this.accountManager.removeAccounts(s);const o=yield this.getActiveAccount();o&&s.includes(o.accountIdentifier)&&(yield this.setActiveAccount(void 0))})}handleRequestError(e,r){return Ie(this,void 0,void 0,function*(){if(Dt.error("handleRequestError","error response",r),r.errorType){const n=[];if(r.errorType===Et.NO_PRIVATE_KEY_FOUND_ERROR){const o=()=>Ie(this,void 0,void 0,function*(){const a=e;let c;if(a.sourceAddress&&a.network){const l=yield F0(a.sourceAddress,a.network);c=yield this.getAccount(l),c&&(yield this.removeAccount(c.accountIdentifier))}});n.push({text:"Remove account",actionCallback:o})}const i=yield this.getPeer(),s=yield this.getActiveAccount();throw e.type===Fe.PermissionRequest&&(yield this.getActiveAccount())===void 0&&(this._initPromise=void 0,this.postMessageTransport=void 0,this.p2pTransport=void 0,yield this.setTransport(),yield this.setActivePeer()),this.events.emit(Cf[e.type].error,{errorResponse:r,walletInfo:yield this.getWalletInfo(i,s),errorMessages:this.errorMessages},n).catch(o=>Dt.error("handleRequestError",o)),an.getError(r.errorType,r.errorData)}throw r})}notifySuccess(e,r){return Ie(this,void 0,void 0,function*(){this.events.emit(Cf[e.type].success,r).catch(n=>console.warn(n))})}getWalletInfo(e,r){var n,i;return Ie(this,void 0,void 0,function*(){const s=r||(yield this.getActiveAccount()),o=e||(yield this.getPeer(s));let a;s&&(a=yield this.appMetadataManager.getAppMetadata(s.senderId));const c=o;a||(a={name:c.name,icon:c.icon});const l=(S,P)=>S&&P?S.toLowerCase()===P.toLowerCase():!1;let f,h;if(Ac().find(S=>l(S.name,a==null?void 0:a.name))?(f=Ac().find(S=>l(S.name,a==null?void 0:a.name)),h="mobile"):q0().find(S=>l(S.name,a==null?void 0:a.name))?(f=q0().find(S=>l(S.name,a==null?void 0:a.name)),h="web"):Iu().find(S=>l(S.name,a==null?void 0:a.name))?(f=Iu().find(S=>l(S.name,a==null?void 0:a.name)),h="desktop"):_c().find(S=>l(S.name,a==null?void 0:a.name))&&(f=_c().find(S=>l(S.name,a==null?void 0:a.name)),h="extension"),f){let S;return f.hasOwnProperty("links")?S=f.links[(n=s==null?void 0:s.network.type)!==null&&n!==void 0?n:this.preferredNetwork]:f.hasOwnProperty("deepLink")&&(S=f.deepLink),{name:a.name,icon:(i=a.icon)!==null&&i!==void 0?i:f.logo,deeplink:S,type:h}}return a})}getPeer(e){var r,n,i,s;return Ie(this,void 0,void 0,function*(){let o;if(e){Dt.log("getPeer","We have an account",e);const a=(n=yield(r=this.postMessageTransport)===null||r===void 0?void 0:r.getPeers())!==null&&n!==void 0?n:[],c=(s=yield(i=this.p2pTransport)===null||i===void 0?void 0:i.getPeers())!==null&&s!==void 0?s:[],l=[...a,...c];Dt.log("getPeer","Found peers",l,e),o=l.find(f=>f.senderId===e.senderId),o||(o=l.find(f=>f.extensionId===e.origin.id))}else o=yield this._activePeer.promise,Dt.log("getPeer","Active peer",o);if(!o)throw new Error("No matching peer found.");return o})}makeRequest(e){var r;return Ie(this,void 0,void 0,function*(){const n=yield as();if(console.time(n),Dt.log("makeRequest","starting"),yield this.init(),console.timeLog(n,"init done"),Dt.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(ue.LOCAL_RATE_LIMIT_REACHED).catch(f=>console.warn(f)),new Error("rate limit reached");if(!(yield this.checkPermissions(e.type)))throw this.events.emit(ue.NO_PERMISSIONS).catch(f=>console.warn(f)),new Error("No permissions to send this request to wallet!");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const i=Object.assign({id:n,version:"2",senderId:yield va(yield this.beaconId)},e),s=new er;this.addOpenRequest(i.id,s);const o=yield new To().serialize(i),a=yield this.getActiveAccount(),c=yield this.getPeer(a),l=yield this.getWalletInfo(c,a);Dt.log("makeRequest","sending message",i),console.timeLog(n,"sending");try{yield(yield this.transport).send(o,c)}catch(f){throw this.events.emit(ue.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>Ie(this,void 0,void 0,function*(){yield Rr(),this.disconnect()})}]}),console.timeLog(n,"send error"),f}return console.timeLog(n,"sent"),this.events.emit(Cf[e.type].sent,{walletInfo:Object.assign(Object.assign({},l),{name:(r=l.name)!==null&&r!==void 0?r:"Wallet"}),extraInfo:{resetCallback:()=>Ie(this,void 0,void 0,function*(){this.disconnect()})}}).catch(f=>console.warn(f)),s.promise})}makeRequestV3(e){var r;return Ie(this,void 0,void 0,function*(){const n=yield as();if(console.time(n),Dt.log("makeRequest","starting"),yield this.init(),console.timeLog(n,"init done"),Dt.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(ue.LOCAL_RATE_LIMIT_REACHED).catch(h=>console.warn(h)),new Error("rate limit reached");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const i={id:n,version:"3",senderId:yield va(yield this.beaconId),message:e},s=new er;this.addOpenRequest(i.id,s);const o=yield new To().serialize(i),a=yield this.getActiveAccount(),c=yield this.getPeer(a),l=yield this.getWalletInfo(c,a);Dt.log("makeRequest","sending message",i),console.timeLog(n,"sending");try{yield(yield this.transport).send(o,c)}catch(h){throw this.events.emit(ue.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>Ie(this,void 0,void 0,function*(){yield Rr(),this.disconnect()})}]}),console.timeLog(n,"send error"),h}console.timeLog(n,"sent");const f=e.type;return this.events.emit(Cf[f].sent,{walletInfo:Object.assign(Object.assign({},l),{name:(r=l.name)!==null&&r!==void 0?r:"Wallet"}),extraInfo:{resetCallback:()=>Ie(this,void 0,void 0,function*(){this.disconnect()})}}).catch(h=>console.warn(h)),s.promise})}disconnect(){return Ie(this,void 0,void 0,function*(){this.postMessageTransport=void 0,this.p2pTransport=void 0,yield Promise.all([this.clearActiveAccount(),(yield this.transport).disconnect()])})}addOpenRequest(e,r){Dt.log("addOpenRequest",this.name,`adding request ${e} and waiting for answer`),this.openRequests.set(e,r)}sendNotificationWithAccessToken(e){return Ie(this,void 0,void 0,function*(){const{url:r,recipient:n,title:i,body:s,payload:o,protocolIdentifier:a,accessToken:c}=e,l=new Date().toISOString(),f=yield this.keyPair,h=f.publicKey,S=te.from(new Uint8Array([13,15,37,217])),P=ss.encode(te.concat([S,te.from(h)])),M=["Tezos Signed Message: ",n,i,s,l,o].join(" "),H=os(M),$="0501"+H.length.toString(16).padStart(8,"0")+H,q=yield qx($,{secretKey:te.from(f.secretKey)});return(yield hT.post(`${r}/send`,{recipient:n,title:i,body:s,timestamp:l,payload:o,accessToken:c,protocolIdentifier:a,sender:{name:this.name,publicKey:P,signature:q}})).data})}}let ps;const LT=(t,e)=>(ps&&e&&(ps.disconnect(),ps=void 0),ps||(ps||(ps=new NT(t)),ps)),MT="modulepreload",CT=function(t){return"/teia-ui/previews/pr-318/"+t},Ib={},BT=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=CT(s),s in Ib)return;Ib[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let f=i.length-1;f>=0;f--){const h=i[f];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":MT,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((f,h)=>{l.addEventListener("load",f),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var e1={exports:{}},z2=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},kT=z2,eo=Object.prototype.toString;function t1(t){return Array.isArray(t)}function J0(t){return typeof t>"u"}function DT(t){return t!==null&&!J0(t)&&t.constructor!==null&&!J0(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function W2(t){return eo.call(t)==="[object ArrayBuffer]"}function UT(t){return eo.call(t)==="[object FormData]"}function FT(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&W2(t.buffer),e}function KT(t){return typeof t=="string"}function HT(t){return typeof t=="number"}function X2(t){return t!==null&&typeof t=="object"}function cu(t){if(eo.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function jT(t){return eo.call(t)==="[object Date]"}function GT(t){return eo.call(t)==="[object File]"}function qT(t){return eo.call(t)==="[object Blob]"}function J2(t){return eo.call(t)==="[object Function]"}function VT(t){return X2(t)&&J2(t.pipe)}function $T(t){return eo.call(t)==="[object URLSearchParams]"}function zT(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function WT(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function r1(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),t1(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Y0(){var t={};function e(i,s){cu(t[s])&&cu(i)?t[s]=Y0(t[s],i):cu(i)?t[s]=Y0({},i):t1(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)r1(arguments[r],e);return t}function XT(t,e,r){return r1(e,function(i,s){r&&typeof i=="function"?t[s]=kT(i,r):t[s]=i}),t}function JT(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Gr={isArray:t1,isArrayBuffer:W2,isBuffer:DT,isFormData:UT,isArrayBufferView:FT,isString:KT,isNumber:HT,isObject:X2,isPlainObject:cu,isUndefined:J0,isDate:jT,isFile:GT,isBlob:qT,isFunction:J2,isStream:VT,isURLSearchParams:$T,isStandardBrowserEnv:WT,forEach:r1,merge:Y0,extend:XT,trim:zT,stripBOM:JT},Xo=Gr;function Pb(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Y2=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Xo.isURLSearchParams(r))i=r.toString();else{var s=[];Xo.forEach(r,function(c,l){c===null||typeof c>"u"||(Xo.isArray(c)?l=l+"[]":c=[c],Xo.forEach(c,function(h){Xo.isDate(h)?h=h.toISOString():Xo.isObject(h)&&(h=JSON.stringify(h)),s.push(Pb(l)+"="+Pb(h))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},YT=Gr;function kl(){this.handlers=[]}kl.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};kl.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};kl.prototype.forEach=function(e){YT.forEach(this.handlers,function(n){n!==null&&e(n)})};var QT=kl,ZT=Gr,e9=function(e,r){ZT.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},Q2=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Z2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Dd,Nb;function eE(){if(Nb)return Dd;Nb=1;var t=Q2;return Dd=function(r,n,i,s,o){var a=new Error(r);return t(a,n,i,s,o)},Dd}var Ud,Lb;function t9(){if(Lb)return Ud;Lb=1;var t=eE();return Ud=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Ud}var Fd,Mb;function r9(){if(Mb)return Fd;Mb=1;var t=Gr;return Fd=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(a)&&l.push("domain="+a),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Fd}var Kd,Cb;function n9(){return Cb||(Cb=1,Kd=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Kd}var Hd,Bb;function i9(){return Bb||(Bb=1,Hd=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Hd}var jd,kb;function s9(){if(kb)return jd;kb=1;var t=n9(),e=i9();return jd=function(n,i){return n&&!t(i)?e(n,i):i},jd}var Gd,Db;function o9(){if(Db)return Gd;Db=1;var t=Gr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Gd=function(n){var i={},s,o,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=t.trim(l.substr(0,a)).toLowerCase(),o=t.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},Gd}var qd,Ub;function a9(){if(Ub)return qd;Ub=1;var t=Gr;return qd=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var c=t.isString(a)?s(a):a;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),qd}var Vd,Fb;function Dl(){if(Fb)return Vd;Fb=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Vd=t,Vd}var $d,Kb;function Hb(){if(Kb)return $d;Kb=1;var t=Gr,e=t9(),r=r9(),n=Y2,i=s9(),s=o9(),o=a9(),a=eE(),c=Z2,l=Dl();return $d=function(h){return new Promise(function(P,M){var H=h.data,$=h.headers,q=h.responseType,C;function V(){h.cancelToken&&h.cancelToken.unsubscribe(C),h.signal&&h.signal.removeEventListener("abort",C)}t.isFormData(H)&&delete $["Content-Type"];var K=new XMLHttpRequest;if(h.auth){var U=h.auth.username||"",G=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";$.Authorization="Basic "+btoa(U+":"+G)}var y=i(h.baseURL,h.url);K.open(h.method.toUpperCase(),n(y,h.params,h.paramsSerializer),!0),K.timeout=h.timeout;function _(){if(K){var x="getAllResponseHeaders"in K?s(K.getAllResponseHeaders()):null,E=!q||q==="text"||q==="json"?K.responseText:K.response,u={data:E,status:K.status,statusText:K.statusText,headers:x,config:h,request:K};e(function(g){P(g),V()},function(g){M(g),V()},u),K=null}}if("onloadend"in K?K.onloadend=_:K.onreadystatechange=function(){!K||K.readyState!==4||K.status===0&&!(K.responseURL&&K.responseURL.indexOf("file:")===0)||setTimeout(_)},K.onabort=function(){K&&(M(a("Request aborted",h,"ECONNABORTED",K)),K=null)},K.onerror=function(){M(a("Network Error",h,null,K)),K=null},K.ontimeout=function(){var E=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",u=h.transitional||c;h.timeoutErrorMessage&&(E=h.timeoutErrorMessage),M(a(E,h,u.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",K)),K=null},t.isStandardBrowserEnv()){var I=(h.withCredentials||o(y))&&h.xsrfCookieName?r.read(h.xsrfCookieName):void 0;I&&($[h.xsrfHeaderName]=I)}"setRequestHeader"in K&&t.forEach($,function(E,u){typeof H>"u"&&u.toLowerCase()==="content-type"?delete $[u]:K.setRequestHeader(u,E)}),t.isUndefined(h.withCredentials)||(K.withCredentials=!!h.withCredentials),q&&q!=="json"&&(K.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&K.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&K.upload&&K.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(C=function(x){K&&(M(!x||x&&x.type?new l("canceled"):x),K.abort(),K=null)},h.cancelToken&&h.cancelToken.subscribe(C),h.signal&&(h.signal.aborted?C():h.signal.addEventListener("abort",C))),H||(H=null),K.send(H)})},$d}var lr=Gr,jb=e9,c9=Q2,f9=Z2,u9={"Content-Type":"application/x-www-form-urlencoded"};function Gb(t,e){!lr.isUndefined(t)&&lr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function l9(){var t;return(typeof XMLHttpRequest<"u"||typeof tt<"u"&&Object.prototype.toString.call(tt)==="[object process]")&&(t=Hb()),t}function h9(t,e,r){if(lr.isString(t))try{return(e||JSON.parse)(t),lr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Ul={transitional:f9,adapter:l9(),transformRequest:[function(e,r){return jb(r,"Accept"),jb(r,"Content-Type"),lr.isFormData(e)||lr.isArrayBuffer(e)||lr.isBuffer(e)||lr.isStream(e)||lr.isFile(e)||lr.isBlob(e)?e:lr.isArrayBufferView(e)?e.buffer:lr.isURLSearchParams(e)?(Gb(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):lr.isObject(e)||r&&r["Content-Type"]==="application/json"?(Gb(r,"application/json"),h9(e)):e}],transformResponse:[function(e){var r=this.transitional||Ul.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&lr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?c9(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};lr.forEach(["delete","get","head"],function(e){Ul.headers[e]={}});lr.forEach(["post","put","patch"],function(e){Ul.headers[e]=lr.merge(u9)});var n1=Ul,d9=Gr,p9=n1,g9=function(e,r,n){var i=this||p9;return d9.forEach(n,function(o){e=o.call(i,e,r)}),e},zd,qb;function tE(){return qb||(qb=1,zd=function(e){return!!(e&&e.__CANCEL__)}),zd}var Vb=Gr,Wd=g9,b9=tE(),v9=n1,m9=Dl();function Xd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new m9("canceled")}var y9=function(e){Xd(e),e.headers=e.headers||{},e.data=Wd.call(e,e.data,e.headers,e.transformRequest),e.headers=Vb.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Vb.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||v9.adapter;return r(e).then(function(i){return Xd(e),i.data=Wd.call(e,i.data,i.headers,e.transformResponse),i},function(i){return b9(i)||(Xd(e),i&&i.response&&(i.response.data=Wd.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},$r=Gr,rE=function(e,r){r=r||{};var n={};function i(f,h){return $r.isPlainObject(f)&&$r.isPlainObject(h)?$r.merge(f,h):$r.isPlainObject(h)?$r.merge({},h):$r.isArray(h)?h.slice():h}function s(f){if($r.isUndefined(r[f])){if(!$r.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!$r.isUndefined(r[f]))return i(void 0,r[f])}function a(f){if($r.isUndefined(r[f])){if(!$r.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function c(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return $r.forEach(Object.keys(e).concat(Object.keys(r)),function(h){var S=l[h]||s,P=S(h);$r.isUndefined(P)&&S!==c||(n[h]=P)}),n},Jd,$b;function nE(){return $b||($b=1,Jd={version:"0.26.1"}),Jd}var E9=nE().version,i1={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){i1[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var zb={};i1.transitional=function(e,r,n){function i(s,o){return"[Axios v"+E9+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!zb[o]&&(zb[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function w9(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var _9={assertOptions:w9,validators:i1},iE=Gr,A9=Y2,Wb=QT,Xb=y9,Fl=rE,sE=_9,Jo=sE.validators;function ef(t){this.defaults=t,this.interceptors={request:new Wb,response:new Wb}}ef.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Fl(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&sE.assertOptions(n,{silentJSONParsing:Jo.transitional(Jo.boolean),forcedJSONParsing:Jo.transitional(Jo.boolean),clarifyTimeoutError:Jo.transitional(Jo.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(r)===!1||(s=s&&P.synchronous,i.unshift(P.fulfilled,P.rejected))});var o=[];this.interceptors.response.forEach(function(P){o.push(P.fulfilled,P.rejected)});var a;if(!s){var c=[Xb,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(o),a=Promise.resolve(r);c.length;)a=a.then(c.shift(),c.shift());return a}for(var l=r;i.length;){var f=i.shift(),h=i.shift();try{l=f(l)}catch(S){h(S);break}}try{a=Xb(l)}catch(S){return Promise.reject(S)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};ef.prototype.getUri=function(e){return e=Fl(this.defaults,e),A9(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};iE.forEach(["delete","get","head","options"],function(e){ef.prototype[e]=function(r,n){return this.request(Fl(n||{},{method:e,url:r,data:(n||{}).data}))}});iE.forEach(["post","put","patch"],function(e){ef.prototype[e]=function(r,n,i){return this.request(Fl(i||{},{method:e,url:r,data:n}))}});var x9=ef,Yd,Jb;function S9(){if(Jb)return Yd;Jb=1;var t=Dl();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(c){i.subscribe(c),o=c}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Yd=e,Yd}var Qd,Yb;function R9(){return Yb||(Yb=1,Qd=function(e){return function(n){return e.apply(null,n)}}),Qd}var Zd,Qb;function T9(){if(Qb)return Zd;Qb=1;var t=Gr;return Zd=function(r){return t.isObject(r)&&r.isAxiosError===!0},Zd}var Zb=Gr,O9=z2,fu=x9,I9=rE,P9=n1;function oE(t){var e=new fu(t),r=O9(fu.prototype.request,e);return Zb.extend(r,fu.prototype,e),Zb.extend(r,e),r.create=function(i){return oE(I9(t,i))},r}var xi=oE(P9);xi.Axios=fu;xi.Cancel=Dl();xi.CancelToken=S9();xi.isCancel=tE();xi.VERSION=nE().version;xi.all=function(e){return Promise.all(e)};xi.spread=R9();xi.isAxiosError=T9();e1.exports=xi;e1.exports.default=xi;var N9=e1.exports,L9=N9;const ev=wi(L9);function M9(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}var Nc;(function(t){t[t.CONTINUE=100]="CONTINUE",t[t.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",t[t.PROCESSING=102]="PROCESSING",t[t.OK=200]="OK",t[t.CREATED=201]="CREATED",t[t.ACCEPTED=202]="ACCEPTED",t[t.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",t[t.NO_CONTENT=204]="NO_CONTENT",t[t.RESET_CONTENT=205]="RESET_CONTENT",t[t.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",t[t.MULTI_STATUS=207]="MULTI_STATUS",t[t.ALREADY_REPORTED=208]="ALREADY_REPORTED",t[t.IM_USED=226]="IM_USED",t[t.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",t[t.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",t[t.FOUND=302]="FOUND",t[t.SEE_OTHER=303]="SEE_OTHER",t[t.NOT_MODIFIED=304]="NOT_MODIFIED",t[t.USE_PROXY=305]="USE_PROXY",t[t.SWITCH_PROXY=306]="SWITCH_PROXY",t[t.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",t[t.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",t[t.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",t[t.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",t[t.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",t[t.CONFLICT=409]="CONFLICT",t[t.GONE=410]="GONE",t[t.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",t[t.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",t[t.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",t[t.URI_TOO_LONG=414]="URI_TOO_LONG",t[t.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",t[t.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",t[t.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",t[t.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",t[t.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",t[t.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",t[t.LOCKED=423]="LOCKED",t[t.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",t[t.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",t[t.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",t[t.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",t[t.BAD_GATEWAY=502]="BAD_GATEWAY",t[t.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",t[t.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",t[t.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",t[t.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",t[t.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",t[t.LOOP_DETECTED=508]="LOOP_DETECTED",t[t.NOT_EXTENDED=510]="NOT_EXTENDED",t[t.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"})(Nc||(Nc={}));const aE=typeof tt<"u"&&tt.versions!=null&&tt.versions.node!=null,tv=aE?void 0:BT(()=>import("./index-553d6bec.js"),[]).then(t=>t.default).catch(()=>{});var Lu;(function(t){t.TEXT="text",t.JSON="json"})(Lu||(Lu={}));class Ha extends Error{constructor(e,r,n,i,s){super(e),this.message=e,this.status=r,this.statusText=n,this.body=i,this.url=s,this.name="HttpResponse"}}class C9 extends Error{constructor(e){super(e),this.message=e,this.name="HttpRequestFailed"}}class B9{constructor(e=3e4){this.timeout=e}serialize(e){if(!e)return"";const r=[];for(const i in e)if(e.hasOwnProperty(i)&&typeof e[i]<"u"){const s=typeof e[i].toJSON=="function"?e[i].toJSON():e[i];if(s===null){r.push(encodeURIComponent(i));continue}if(Array.isArray(s)){s.forEach(o=>{r.push(encodeURIComponent(i)+"="+encodeURIComponent(o))});continue}r.push(encodeURIComponent(i)+"="+encodeURIComponent(s))}const n=r.join("&");return n?`?${n}`:""}createRequest({url:e,method:r,timeout:n=this.timeout,query:i,headers:s={},json:o=!0},a){return M9(this,void 0,void 0,function*(){let c,l;s["Content-Type"]||(s["Content-Type"]="application/json"),o?c=Lu.JSON:(c=Lu.TEXT,l=[f=>f]);try{const f=tv&&(yield tv);return(yield ev.request({url:e+this.serialize(i),method:r??"GET",headers:s,responseType:c,transformResponse:l,timeout:n,data:a,adapter:f})).data}catch(f){if(ev.isAxiosError(f)&&f.response||!aE&&f.response){let h;throw typeof f.response.data=="object"?h=JSON.stringify(f.response.data):h=f.response.data,new Ha(`Http error response: (${f.response.status}) ${h}`,f.response.status,f.response.statusText,h,e+this.serialize(i))}else throw new C9(`${r} ${e+this.serialize(i)} ${String(f)}`)}})}}var k9=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,e0=Math.ceil,Bn=Math.floor,kr="[BigNumber Error] ",rv=kr+"Number primitive has more than 15 significant digits: ",Rn=1e14,Me=14,t0=9007199254740991,r0=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],gs=1e7,rr=1e9;function cE(t){var e,r,n,i=C.prototype={constructor:C,toString:null,valueOf:null},s=new C(1),o=20,a=4,c=-7,l=21,f=-1e7,h=1e7,S=!1,P=1,M=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},$="0123456789abcdefghijklmnopqrstuvwxyz",q=!0;function C(_,I){var x,E,u,d,g,b,p,R,O=this;if(!(O instanceof C))return new C(_,I);if(I==null){if(_&&_._isBigNumber===!0){O.s=_.s,!_.c||_.e>h?O.c=O.e=null:_.e<f?O.c=[O.e=0]:(O.e=_.e,O.c=_.c.slice());return}if((b=typeof _=="number")&&_*0==0){if(O.s=1/_<0?(_=-_,-1):1,_===~~_){for(d=0,g=_;g>=10;g/=10,d++);d>h?O.c=O.e=null:(O.e=d,O.c=[_]);return}R=String(_)}else{if(!k9.test(R=String(_)))return n(O,R,b);O.s=R.charCodeAt(0)==45?(R=R.slice(1),-1):1}(d=R.indexOf("."))>-1&&(R=R.replace(".","")),(g=R.search(/e/i))>0?(d<0&&(d=g),d+=+R.slice(g+1),R=R.substring(0,g)):d<0&&(d=R.length)}else{if(Nt(I,2,$.length,"Base"),I==10&&q)return O=new C(_),G(O,o+O.e+1,a);if(R=String(_),b=typeof _=="number"){if(_*0!=0)return n(O,R,b,I);if(O.s=1/_<0?(R=R.slice(1),-1):1,C.DEBUG&&R.replace(/^0\.0*|\./,"").length>15)throw Error(rv+_)}else O.s=R.charCodeAt(0)===45?(R=R.slice(1),-1):1;for(x=$.slice(0,I),d=g=0,p=R.length;g<p;g++)if(x.indexOf(E=R.charAt(g))<0){if(E=="."){if(g>d){d=p;continue}}else if(!u&&(R==R.toUpperCase()&&(R=R.toLowerCase())||R==R.toLowerCase()&&(R=R.toUpperCase()))){u=!0,g=-1,d=0;continue}return n(O,String(_),b,I)}b=!1,R=r(R,I,10,O.s),(d=R.indexOf("."))>-1?R=R.replace(".",""):d=R.length}for(g=0;R.charCodeAt(g)===48;g++);for(p=R.length;R.charCodeAt(--p)===48;);if(R=R.slice(g,++p)){if(p-=g,b&&C.DEBUG&&p>15&&(_>t0||_!==Bn(_)))throw Error(rv+O.s*_);if((d=d-g-1)>h)O.c=O.e=null;else if(d<f)O.c=[O.e=0];else{if(O.e=d,O.c=[],g=(d+1)%Me,d<0&&(g+=Me),g<p){for(g&&O.c.push(+R.slice(0,g)),p-=Me;g<p;)O.c.push(+R.slice(g,g+=Me));g=Me-(R=R.slice(g)).length}else g-=p;for(;g--;R+="0");O.c.push(+R)}}else O.c=[O.e=0]}C.clone=cE,C.ROUND_UP=0,C.ROUND_DOWN=1,C.ROUND_CEIL=2,C.ROUND_FLOOR=3,C.ROUND_HALF_UP=4,C.ROUND_HALF_DOWN=5,C.ROUND_HALF_EVEN=6,C.ROUND_HALF_CEIL=7,C.ROUND_HALF_FLOOR=8,C.EUCLID=9,C.config=C.set=function(_){var I,x;if(_!=null)if(typeof _=="object"){if(_.hasOwnProperty(I="DECIMAL_PLACES")&&(x=_[I],Nt(x,0,rr,I),o=x),_.hasOwnProperty(I="ROUNDING_MODE")&&(x=_[I],Nt(x,0,8,I),a=x),_.hasOwnProperty(I="EXPONENTIAL_AT")&&(x=_[I],x&&x.pop?(Nt(x[0],-rr,0,I),Nt(x[1],0,rr,I),c=x[0],l=x[1]):(Nt(x,-rr,rr,I),c=-(l=x<0?-x:x))),_.hasOwnProperty(I="RANGE"))if(x=_[I],x&&x.pop)Nt(x[0],-rr,-1,I),Nt(x[1],1,rr,I),f=x[0],h=x[1];else if(Nt(x,-rr,rr,I),x)f=-(h=x<0?-x:x);else throw Error(kr+I+" cannot be zero: "+x);if(_.hasOwnProperty(I="CRYPTO"))if(x=_[I],x===!!x)if(x)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))S=x;else throw S=!x,Error(kr+"crypto unavailable");else S=x;else throw Error(kr+I+" not true or false: "+x);if(_.hasOwnProperty(I="MODULO_MODE")&&(x=_[I],Nt(x,0,9,I),P=x),_.hasOwnProperty(I="POW_PRECISION")&&(x=_[I],Nt(x,0,rr,I),M=x),_.hasOwnProperty(I="FORMAT"))if(x=_[I],typeof x=="object")H=x;else throw Error(kr+I+" not an object: "+x);if(_.hasOwnProperty(I="ALPHABET"))if(x=_[I],typeof x=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(x))q=x.slice(0,10)=="0123456789",$=x;else throw Error(kr+I+" invalid: "+x)}else throw Error(kr+"Object expected: "+_);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[c,l],RANGE:[f,h],CRYPTO:S,MODULO_MODE:P,POW_PRECISION:M,FORMAT:H,ALPHABET:$}},C.isBigNumber=function(_){if(!_||_._isBigNumber!==!0)return!1;if(!C.DEBUG)return!0;var I,x,E=_.c,u=_.e,d=_.s;e:if({}.toString.call(E)=="[object Array]"){if((d===1||d===-1)&&u>=-rr&&u<=rr&&u===Bn(u)){if(E[0]===0){if(u===0&&E.length===1)return!0;break e}if(I=(u+1)%Me,I<1&&(I+=Me),String(E[0]).length==I){for(I=0;I<E.length;I++)if(x=E[I],x<0||x>=Rn||x!==Bn(x))break e;if(x!==0)return!0}}}else if(E===null&&u===null&&(d===null||d===1||d===-1))return!0;throw Error(kr+"Invalid BigNumber: "+_)},C.maximum=C.max=function(){return K(arguments,i.lt)},C.minimum=C.min=function(){return K(arguments,i.gt)},C.random=function(){var _=9007199254740992,I=Math.random()*_&2097151?function(){return Bn(Math.random()*_)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(x){var E,u,d,g,b,p=0,R=[],O=new C(s);if(x==null?x=o:Nt(x,0,rr),g=e0(x/Me),S)if(crypto.getRandomValues){for(E=crypto.getRandomValues(new Uint32Array(g*=2));p<g;)b=E[p]*131072+(E[p+1]>>>11),b>=9e15?(u=crypto.getRandomValues(new Uint32Array(2)),E[p]=u[0],E[p+1]=u[1]):(R.push(b%1e14),p+=2);p=g/2}else if(crypto.randomBytes){for(E=crypto.randomBytes(g*=7);p<g;)b=(E[p]&31)*281474976710656+E[p+1]*1099511627776+E[p+2]*4294967296+E[p+3]*16777216+(E[p+4]<<16)+(E[p+5]<<8)+E[p+6],b>=9e15?crypto.randomBytes(7).copy(E,p):(R.push(b%1e14),p+=7);p=g/7}else throw S=!1,Error(kr+"crypto unavailable");if(!S)for(;p<g;)b=I(),b<9e15&&(R[p++]=b%1e14);for(g=R[--p],x%=Me,g&&x&&(b=r0[Me-x],R[p]=Bn(g/b)*b);R[p]===0;R.pop(),p--);if(p<0)R=[d=0];else{for(d=-1;R[0]===0;R.splice(0,1),d-=Me);for(p=1,b=R[0];b>=10;b/=10,p++);p<Me&&(d-=Me-p)}return O.e=d,O.c=R,O}}(),C.sum=function(){for(var _=1,I=arguments,x=new C(I[0]);_<I.length;)x=x.plus(I[_++]);return x},r=function(){var _="0123456789";function I(x,E,u,d){for(var g,b=[0],p,R=0,O=x.length;R<O;){for(p=b.length;p--;b[p]*=E);for(b[0]+=d.indexOf(x.charAt(R++)),g=0;g<b.length;g++)b[g]>u-1&&(b[g+1]==null&&(b[g+1]=0),b[g+1]+=b[g]/u|0,b[g]%=u)}return b.reverse()}return function(x,E,u,d,g){var b,p,R,O,w,v,N,ee,Y=x.indexOf("."),ie=o,oe=a;for(Y>=0&&(O=M,M=0,x=x.replace(".",""),ee=new C(E),v=ee.pow(x.length-Y),M=O,ee.c=I(Pi(un(v.c),v.e,"0"),10,u,_),ee.e=ee.c.length),N=I(x,E,u,g?(b=$,_):(b=_,$)),R=O=N.length;N[--O]==0;N.pop());if(!N[0])return b.charAt(0);if(Y<0?--R:(v.c=N,v.e=R,v.s=d,v=e(v,ee,ie,oe,u),N=v.c,w=v.r,R=v.e),p=R+ie+1,Y=N[p],O=u/2,w=w||p<0||N[p+1]!=null,w=oe<4?(Y!=null||w)&&(oe==0||oe==(v.s<0?3:2)):Y>O||Y==O&&(oe==4||w||oe==6&&N[p-1]&1||oe==(v.s<0?8:7)),p<1||!N[0])x=w?Pi(b.charAt(1),-ie,b.charAt(0)):b.charAt(0);else{if(N.length=p,w)for(--u;++N[--p]>u;)N[p]=0,p||(++R,N=[1].concat(N));for(O=N.length;!N[--O];);for(Y=0,x="";Y<=O;x+=b.charAt(N[Y++]));x=Pi(x,R,b.charAt(0))}return x}}(),e=function(){function _(E,u,d){var g,b,p,R,O=0,w=E.length,v=u%gs,N=u/gs|0;for(E=E.slice();w--;)p=E[w]%gs,R=E[w]/gs|0,g=N*p+R*v,b=v*p+g%gs*gs+O,O=(b/d|0)+(g/gs|0)+N*R,E[w]=b%d;return O&&(E=[O].concat(E)),E}function I(E,u,d,g){var b,p;if(d!=g)p=d>g?1:-1;else for(b=p=0;b<d;b++)if(E[b]!=u[b]){p=E[b]>u[b]?1:-1;break}return p}function x(E,u,d,g){for(var b=0;d--;)E[d]-=b,b=E[d]<u[d]?1:0,E[d]=b*g+E[d]-u[d];for(;!E[0]&&E.length>1;E.splice(0,1));}return function(E,u,d,g,b){var p,R,O,w,v,N,ee,Y,ie,oe,ae,W,F,k,m,B,X,Z=E.s==u.s?1:-1,fe=E.c,se=u.c;if(!fe||!fe[0]||!se||!se[0])return new C(!E.s||!u.s||(fe?se&&fe[0]==se[0]:!se)?NaN:fe&&fe[0]==0||!se?Z*0:Z/0);for(Y=new C(Z),ie=Y.c=[],R=E.e-u.e,Z=d+R+1,b||(b=Rn,R=ln(E.e/Me)-ln(u.e/Me),Z=Z/Me|0),O=0;se[O]==(fe[O]||0);O++);if(se[O]>(fe[O]||0)&&R--,Z<0)ie.push(1),w=!0;else{for(k=fe.length,B=se.length,O=0,Z+=2,v=Bn(b/(se[0]+1)),v>1&&(se=_(se,v,b),fe=_(fe,v,b),B=se.length,k=fe.length),F=B,oe=fe.slice(0,B),ae=oe.length;ae<B;oe[ae++]=0);X=se.slice(),X=[0].concat(X),m=se[0],se[1]>=b/2&&m++;do{if(v=0,p=I(se,oe,B,ae),p<0){if(W=oe[0],B!=ae&&(W=W*b+(oe[1]||0)),v=Bn(W/m),v>1)for(v>=b&&(v=b-1),N=_(se,v,b),ee=N.length,ae=oe.length;I(N,oe,ee,ae)==1;)v--,x(N,B<ee?X:se,ee,b),ee=N.length,p=1;else v==0&&(p=v=1),N=se.slice(),ee=N.length;if(ee<ae&&(N=[0].concat(N)),x(oe,N,ae,b),ae=oe.length,p==-1)for(;I(se,oe,B,ae)<1;)v++,x(oe,B<ae?X:se,ae,b),ae=oe.length}else p===0&&(v++,oe=[0]);ie[O++]=v,oe[0]?oe[ae++]=fe[F]||0:(oe=[fe[F]],ae=1)}while((F++<k||oe[0]!=null)&&Z--);w=oe[0]!=null,ie[0]||ie.splice(0,1)}if(b==Rn){for(O=1,Z=ie[0];Z>=10;Z/=10,O++);G(Y,d+(Y.e=O+R*Me-1)+1,g,w)}else Y.e=R,Y.r=+w;return Y}}();function V(_,I,x,E){var u,d,g,b,p;if(x==null?x=a:Nt(x,0,8),!_.c)return _.toString();if(u=_.c[0],g=_.e,I==null)p=un(_.c),p=E==1||E==2&&(g<=c||g>=l)?Uf(p,g):Pi(p,g,"0");else if(_=G(new C(_),I,x),d=_.e,p=un(_.c),b=p.length,E==1||E==2&&(I<=d||d<=c)){for(;b<I;p+="0",b++);p=Uf(p,d)}else if(I-=g,p=Pi(p,d,"0"),d+1>b){if(--I>0)for(p+=".";I--;p+="0");}else if(I+=d-b,I>0)for(d+1==b&&(p+=".");I--;p+="0");return _.s<0&&u?"-"+p:p}function K(_,I){for(var x,E=1,u=new C(_[0]);E<_.length;E++)if(x=new C(_[E]),x.s)I.call(u,x)&&(u=x);else{u=x;break}return u}function U(_,I,x){for(var E=1,u=I.length;!I[--u];I.pop());for(u=I[0];u>=10;u/=10,E++);return(x=E+x*Me-1)>h?_.c=_.e=null:x<f?_.c=[_.e=0]:(_.e=x,_.c=I),_}n=function(){var _=/^(-?)0([xbo])(?=\w[\w.]*$)/i,I=/^([^.]+)\.$/,x=/^\.([^.]+)$/,E=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(d,g,b,p){var R,O=b?g:g.replace(u,"");if(E.test(O))d.s=isNaN(O)?null:O<0?-1:1;else{if(!b&&(O=O.replace(_,function(w,v,N){return R=(N=N.toLowerCase())=="x"?16:N=="b"?2:8,!p||p==R?v:w}),p&&(R=p,O=O.replace(I,"$1").replace(x,"0.$1")),g!=O))return new C(O,R);if(C.DEBUG)throw Error(kr+"Not a"+(p?" base "+p:"")+" number: "+g);d.s=null}d.c=d.e=null}}();function G(_,I,x,E){var u,d,g,b,p,R,O,w=_.c,v=r0;if(w){e:{for(u=1,b=w[0];b>=10;b/=10,u++);if(d=I-u,d<0)d+=Me,g=I,p=w[R=0],O=p/v[u-g-1]%10|0;else if(R=e0((d+1)/Me),R>=w.length)if(E){for(;w.length<=R;w.push(0));p=O=0,u=1,d%=Me,g=d-Me+1}else break e;else{for(p=b=w[R],u=1;b>=10;b/=10,u++);d%=Me,g=d-Me+u,O=g<0?0:p/v[u-g-1]%10|0}if(E=E||I<0||w[R+1]!=null||(g<0?p:p%v[u-g-1]),E=x<4?(O||E)&&(x==0||x==(_.s<0?3:2)):O>5||O==5&&(x==4||E||x==6&&(d>0?g>0?p/v[u-g]:0:w[R-1])%10&1||x==(_.s<0?8:7)),I<1||!w[0])return w.length=0,E?(I-=_.e+1,w[0]=v[(Me-I%Me)%Me],_.e=-I||0):w[0]=_.e=0,_;if(d==0?(w.length=R,b=1,R--):(w.length=R+1,b=v[Me-d],w[R]=g>0?Bn(p/v[u-g]%v[g])*b:0),E)for(;;)if(R==0){for(d=1,g=w[0];g>=10;g/=10,d++);for(g=w[0]+=b,b=1;g>=10;g/=10,b++);d!=b&&(_.e++,w[0]==Rn&&(w[0]=1));break}else{if(w[R]+=b,w[R]!=Rn)break;w[R--]=0,b=1}for(d=w.length;w[--d]===0;w.pop());}_.e>h?_.c=_.e=null:_.e<f&&(_.c=[_.e=0])}return _}function y(_){var I,x=_.e;return x===null?_.toString():(I=un(_.c),I=x<=c||x>=l?Uf(I,x):Pi(I,x,"0"),_.s<0?"-"+I:I)}return i.absoluteValue=i.abs=function(){var _=new C(this);return _.s<0&&(_.s=1),_},i.comparedTo=function(_,I){return Yo(this,new C(_,I))},i.decimalPlaces=i.dp=function(_,I){var x,E,u,d=this;if(_!=null)return Nt(_,0,rr),I==null?I=a:Nt(I,0,8),G(new C(d),_+d.e+1,I);if(!(x=d.c))return null;if(E=((u=x.length-1)-ln(this.e/Me))*Me,u=x[u])for(;u%10==0;u/=10,E--);return E<0&&(E=0),E},i.dividedBy=i.div=function(_,I){return e(this,new C(_,I),o,a)},i.dividedToIntegerBy=i.idiv=function(_,I){return e(this,new C(_,I),0,1)},i.exponentiatedBy=i.pow=function(_,I){var x,E,u,d,g,b,p,R,O,w=this;if(_=new C(_),_.c&&!_.isInteger())throw Error(kr+"Exponent not an integer: "+y(_));if(I!=null&&(I=new C(I)),b=_.e>14,!w.c||!w.c[0]||w.c[0]==1&&!w.e&&w.c.length==1||!_.c||!_.c[0])return O=new C(Math.pow(+y(w),b?_.s*(2-Df(_)):+y(_))),I?O.mod(I):O;if(p=_.s<0,I){if(I.c?!I.c[0]:!I.s)return new C(NaN);E=!p&&w.isInteger()&&I.isInteger(),E&&(w=w.mod(I))}else{if(_.e>9&&(w.e>0||w.e<-1||(w.e==0?w.c[0]>1||b&&w.c[1]>=24e7:w.c[0]<8e13||b&&w.c[0]<=9999975e7)))return d=w.s<0&&Df(_)?-0:0,w.e>-1&&(d=1/d),new C(p?1/d:d);M&&(d=e0(M/Me+2))}for(b?(x=new C(.5),p&&(_.s=1),R=Df(_)):(u=Math.abs(+y(_)),R=u%2),O=new C(s);;){if(R){if(O=O.times(w),!O.c)break;d?O.c.length>d&&(O.c.length=d):E&&(O=O.mod(I))}if(u){if(u=Bn(u/2),u===0)break;R=u%2}else if(_=_.times(x),G(_,_.e+1,1),_.e>14)R=Df(_);else{if(u=+y(_),u===0)break;R=u%2}w=w.times(w),d?w.c&&w.c.length>d&&(w.c.length=d):E&&(w=w.mod(I))}return E?O:(p&&(O=s.div(O)),I?O.mod(I):d?G(O,M,a,g):O)},i.integerValue=function(_){var I=new C(this);return _==null?_=a:Nt(_,0,8),G(I,I.e+1,_)},i.isEqualTo=i.eq=function(_,I){return Yo(this,new C(_,I))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(_,I){return Yo(this,new C(_,I))>0},i.isGreaterThanOrEqualTo=i.gte=function(_,I){return(I=Yo(this,new C(_,I)))===1||I===0},i.isInteger=function(){return!!this.c&&ln(this.e/Me)>this.c.length-2},i.isLessThan=i.lt=function(_,I){return Yo(this,new C(_,I))<0},i.isLessThanOrEqualTo=i.lte=function(_,I){return(I=Yo(this,new C(_,I)))===-1||I===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(_,I){var x,E,u,d,g=this,b=g.s;if(_=new C(_,I),I=_.s,!b||!I)return new C(NaN);if(b!=I)return _.s=-I,g.plus(_);var p=g.e/Me,R=_.e/Me,O=g.c,w=_.c;if(!p||!R){if(!O||!w)return O?(_.s=-I,_):new C(w?g:NaN);if(!O[0]||!w[0])return w[0]?(_.s=-I,_):new C(O[0]?g:a==3?-0:0)}if(p=ln(p),R=ln(R),O=O.slice(),b=p-R){for((d=b<0)?(b=-b,u=O):(R=p,u=w),u.reverse(),I=b;I--;u.push(0));u.reverse()}else for(E=(d=(b=O.length)<(I=w.length))?b:I,b=I=0;I<E;I++)if(O[I]!=w[I]){d=O[I]<w[I];break}if(d&&(u=O,O=w,w=u,_.s=-_.s),I=(E=w.length)-(x=O.length),I>0)for(;I--;O[x++]=0);for(I=Rn-1;E>b;){if(O[--E]<w[E]){for(x=E;x&&!O[--x];O[x]=I);--O[x],O[E]+=Rn}O[E]-=w[E]}for(;O[0]==0;O.splice(0,1),--R);return O[0]?U(_,O,R):(_.s=a==3?-1:1,_.c=[_.e=0],_)},i.modulo=i.mod=function(_,I){var x,E,u=this;return _=new C(_,I),!u.c||!_.s||_.c&&!_.c[0]?new C(NaN):!_.c||u.c&&!u.c[0]?new C(u):(P==9?(E=_.s,_.s=1,x=e(u,_,0,3),_.s=E,x.s*=E):x=e(u,_,0,P),_=u.minus(x.times(_)),!_.c[0]&&P==1&&(_.s=u.s),_)},i.multipliedBy=i.times=function(_,I){var x,E,u,d,g,b,p,R,O,w,v,N,ee,Y,ie,oe=this,ae=oe.c,W=(_=new C(_,I)).c;if(!ae||!W||!ae[0]||!W[0])return!oe.s||!_.s||ae&&!ae[0]&&!W||W&&!W[0]&&!ae?_.c=_.e=_.s=null:(_.s*=oe.s,!ae||!W?_.c=_.e=null:(_.c=[0],_.e=0)),_;for(E=ln(oe.e/Me)+ln(_.e/Me),_.s*=oe.s,p=ae.length,w=W.length,p<w&&(ee=ae,ae=W,W=ee,u=p,p=w,w=u),u=p+w,ee=[];u--;ee.push(0));for(Y=Rn,ie=gs,u=w;--u>=0;){for(x=0,v=W[u]%ie,N=W[u]/ie|0,g=p,d=u+g;d>u;)R=ae[--g]%ie,O=ae[g]/ie|0,b=N*R+O*v,R=v*R+b%ie*ie+ee[d]+x,x=(R/Y|0)+(b/ie|0)+N*O,ee[d--]=R%Y;ee[d]=x}return x?++E:ee.splice(0,1),U(_,ee,E)},i.negated=function(){var _=new C(this);return _.s=-_.s||null,_},i.plus=function(_,I){var x,E=this,u=E.s;if(_=new C(_,I),I=_.s,!u||!I)return new C(NaN);if(u!=I)return _.s=-I,E.minus(_);var d=E.e/Me,g=_.e/Me,b=E.c,p=_.c;if(!d||!g){if(!b||!p)return new C(u/0);if(!b[0]||!p[0])return p[0]?_:new C(b[0]?E:u*0)}if(d=ln(d),g=ln(g),b=b.slice(),u=d-g){for(u>0?(g=d,x=p):(u=-u,x=b),x.reverse();u--;x.push(0));x.reverse()}for(u=b.length,I=p.length,u-I<0&&(x=p,p=b,b=x,I=u),u=0;I;)u=(b[--I]=b[I]+p[I]+u)/Rn|0,b[I]=Rn===b[I]?0:b[I]%Rn;return u&&(b=[u].concat(b),++g),U(_,b,g)},i.precision=i.sd=function(_,I){var x,E,u,d=this;if(_!=null&&_!==!!_)return Nt(_,1,rr),I==null?I=a:Nt(I,0,8),G(new C(d),_,I);if(!(x=d.c))return null;if(u=x.length-1,E=u*Me+1,u=x[u]){for(;u%10==0;u/=10,E--);for(u=x[0];u>=10;u/=10,E++);}return _&&d.e+1>E&&(E=d.e+1),E},i.shiftedBy=function(_){return Nt(_,-t0,t0),this.times("1e"+_)},i.squareRoot=i.sqrt=function(){var _,I,x,E,u,d=this,g=d.c,b=d.s,p=d.e,R=o+4,O=new C("0.5");if(b!==1||!g||!g[0])return new C(!b||b<0&&(!g||g[0])?NaN:g?d:1/0);if(b=Math.sqrt(+y(d)),b==0||b==1/0?(I=un(g),(I.length+p)%2==0&&(I+="0"),b=Math.sqrt(+I),p=ln((p+1)/2)-(p<0||p%2),b==1/0?I="5e"+p:(I=b.toExponential(),I=I.slice(0,I.indexOf("e")+1)+p),x=new C(I)):x=new C(b+""),x.c[0]){for(p=x.e,b=p+R,b<3&&(b=0);;)if(u=x,x=O.times(u.plus(e(d,u,R,1))),un(u.c).slice(0,b)===(I=un(x.c)).slice(0,b))if(x.e<p&&--b,I=I.slice(b-3,b+1),I=="9999"||!E&&I=="4999"){if(!E&&(G(u,u.e+o+2,0),u.times(u).eq(d))){x=u;break}R+=4,b+=4,E=1}else{(!+I||!+I.slice(1)&&I.charAt(0)=="5")&&(G(x,x.e+o+2,1),_=!x.times(x).eq(d));break}}return G(x,x.e+o+1,a,_)},i.toExponential=function(_,I){return _!=null&&(Nt(_,0,rr),_++),V(this,_,I,1)},i.toFixed=function(_,I){return _!=null&&(Nt(_,0,rr),_=_+this.e+1),V(this,_,I)},i.toFormat=function(_,I,x){var E,u=this;if(x==null)_!=null&&I&&typeof I=="object"?(x=I,I=null):_&&typeof _=="object"?(x=_,_=I=null):x=H;else if(typeof x!="object")throw Error(kr+"Argument not an object: "+x);if(E=u.toFixed(_,I),u.c){var d,g=E.split("."),b=+x.groupSize,p=+x.secondaryGroupSize,R=x.groupSeparator||"",O=g[0],w=g[1],v=u.s<0,N=v?O.slice(1):O,ee=N.length;if(p&&(d=b,b=p,p=d,ee-=d),b>0&&ee>0){for(d=ee%b||b,O=N.substr(0,d);d<ee;d+=b)O+=R+N.substr(d,b);p>0&&(O+=R+N.slice(d)),v&&(O="-"+O)}E=w?O+(x.decimalSeparator||"")+((p=+x.fractionGroupSize)?w.replace(new RegExp("\\d{"+p+"}\\B","g"),"$&"+(x.fractionGroupSeparator||"")):w):O}return(x.prefix||"")+E+(x.suffix||"")},i.toFraction=function(_){var I,x,E,u,d,g,b,p,R,O,w,v,N=this,ee=N.c;if(_!=null&&(b=new C(_),!b.isInteger()&&(b.c||b.s!==1)||b.lt(s)))throw Error(kr+"Argument "+(b.isInteger()?"out of range: ":"not an integer: ")+y(b));if(!ee)return new C(N);for(I=new C(s),R=x=new C(s),E=p=new C(s),v=un(ee),d=I.e=v.length-N.e-1,I.c[0]=r0[(g=d%Me)<0?Me+g:g],_=!_||b.comparedTo(I)>0?d>0?I:R:b,g=h,h=1/0,b=new C(v),p.c[0]=0;O=e(b,I,0,1),u=x.plus(O.times(E)),u.comparedTo(_)!=1;)x=E,E=u,R=p.plus(O.times(u=R)),p=u,I=b.minus(O.times(u=I)),b=u;return u=e(_.minus(x),E,0,1),p=p.plus(u.times(R)),x=x.plus(u.times(E)),p.s=R.s=N.s,d=d*2,w=e(R,E,d,a).minus(N).abs().comparedTo(e(p,x,d,a).minus(N).abs())<1?[R,E]:[p,x],h=g,w},i.toNumber=function(){return+y(this)},i.toPrecision=function(_,I){return _!=null&&Nt(_,1,rr),V(this,_,I,2)},i.toString=function(_){var I,x=this,E=x.s,u=x.e;return u===null?E?(I="Infinity",E<0&&(I="-"+I)):I="NaN":(_==null?I=u<=c||u>=l?Uf(un(x.c),u):Pi(un(x.c),u,"0"):_===10&&q?(x=G(new C(x),o+u+1,a),I=Pi(un(x.c),x.e,"0")):(Nt(_,2,$.length,"Base"),I=r(Pi(un(x.c),u,"0"),10,_,E,!0)),E<0&&x.c[0]&&(I="-"+I)),I},i.valueOf=i.toJSON=function(){return y(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&C.set(t),C}function ln(t){var e=t|0;return t>0||t===e?e:e-1}function un(t){for(var e,r,n=1,i=t.length,s=t[0]+"";n<i;){for(e=t[n++]+"",r=Me-e.length;r--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Yo(t,e){var r,n,i=t.c,s=e.c,o=t.s,a=e.s,c=t.e,l=e.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==l,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>l^r?1:-1;for(a=(c=i.length)<(l=s.length)?c:l,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==l?0:c>l^r?1:-1}function Nt(t,e,r,n){if(t<e||t>r||t!==Bn(t))throw Error(kr+(n||"Argument")+(typeof t=="number"?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function Df(t){var e=t.c.length-1;return ln(t.e/Me)==e&&t.c[e]%2!=0}function Uf(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function Pi(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(n=t.length,++e>n){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}var ve=cE();const D9="Input must be an string, Buffer or Uint8Array";function U9(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(D9);return e}function F9(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function Ff(t){return(4294967296+t).toString(16).substring(1)}function K9(t,e,r){let n=`
`+t+" = ";for(let i=0;i<e.length;i+=2){if(r===32)n+=Ff(e[i]).toUpperCase(),n+=" ",n+=Ff(e[i+1]).toUpperCase();else if(r===64)n+=Ff(e[i+1]).toUpperCase(),n+=Ff(e[i]).toUpperCase();else throw new Error("Invalid size "+r);i%6===4?n+=`
`+new Array(t.length+4).join(" "):i<e.length-2&&(n+=" ")}console.log(n)}function H9(t,e,r){let n=new Date().getTime();const i=new Uint8Array(e);for(let o=0;o<e;o++)i[o]=o%256;const s=new Date().getTime();console.log("Generated random input in "+(s-n)+"ms"),n=s;for(let o=0;o<r;o++){const a=t(i),c=new Date().getTime(),l=c-n;n=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var fE={normalizeInput:U9,toHex:F9,debugPrint:K9,testSpeed:H9};const uu=fE;function Kf(t,e,r){const n=t[e]+t[r];let i=t[e+1]+t[r+1];n>=4294967296&&i++,t[e]=n,t[e+1]=i}function nv(t,e,r,n){let i=t[e]+r;r<0&&(i+=4294967296);let s=t[e+1]+n;i>=4294967296&&s++,t[e]=i,t[e+1]=s}function uE(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function bs(t,e,r,n,i,s){const o=bc[i],a=bc[i+1],c=bc[s],l=bc[s+1];Kf(Be,t,e),nv(Be,t,o,a);let f=Be[n]^Be[t],h=Be[n+1]^Be[t+1];Be[n]=h,Be[n+1]=f,Kf(Be,r,n),f=Be[e]^Be[r],h=Be[e+1]^Be[r+1],Be[e]=f>>>24^h<<8,Be[e+1]=h>>>24^f<<8,Kf(Be,t,e),nv(Be,t,c,l),f=Be[n]^Be[t],h=Be[n+1]^Be[t+1],Be[n]=f>>>16^h<<16,Be[n+1]=h>>>16^f<<16,Kf(Be,r,n),f=Be[e]^Be[r],h=Be[e+1]^Be[r+1],Be[e]=h>>>31^f<<1,Be[e+1]=f>>>31^h<<1}const lE=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),j9=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],yr=new Uint8Array(j9.map(function(t){return t*2})),Be=new Uint32Array(32),bc=new Uint32Array(32);function hE(t,e){let r=0;for(r=0;r<16;r++)Be[r]=t.h[r],Be[r+16]=lE[r];for(Be[24]=Be[24]^t.t,Be[25]=Be[25]^t.t/4294967296,e&&(Be[28]=~Be[28],Be[29]=~Be[29]),r=0;r<32;r++)bc[r]=uE(t.b,4*r);for(r=0;r<12;r++)bs(0,8,16,24,yr[r*16+0],yr[r*16+1]),bs(2,10,18,26,yr[r*16+2],yr[r*16+3]),bs(4,12,20,28,yr[r*16+4],yr[r*16+5]),bs(6,14,22,30,yr[r*16+6],yr[r*16+7]),bs(0,10,20,30,yr[r*16+8],yr[r*16+9]),bs(2,12,22,24,yr[r*16+10],yr[r*16+11]),bs(4,14,16,26,yr[r*16+12],yr[r*16+13]),bs(6,8,18,28,yr[r*16+14],yr[r*16+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^Be[r]^Be[r+16]}const vs=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function dE(t,e,r,n){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&r.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(n&&n.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};vs.fill(0),vs[0]=t,e&&(vs[1]=e.length),vs[2]=1,vs[3]=1,r&&vs.set(r,32),n&&vs.set(n,48);for(let s=0;s<16;s++)i.h[s]=lE[s]^uE(vs,s*4);return e&&(s1(i,e),i.c=128),i}function s1(t,e){for(let r=0;r<e.length;r++)t.c===128&&(t.t+=t.c,hE(t,!1),t.c=0),t.b[t.c++]=e[r]}function pE(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;hE(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3);return e}function gE(t,e,r,n,i){r=r||64,t=uu.normalizeInput(t),n&&(n=uu.normalizeInput(n)),i&&(i=uu.normalizeInput(i));const s=dE(r,e,n,i);return s1(s,t),pE(s)}function G9(t,e,r,n,i){const s=gE(t,e,r,n,i);return uu.toHex(s)}var q9={blake2b:gE,blake2bHex:G9,blake2bInit:dE,blake2bUpdate:s1,blake2bFinal:pE};const bE=fE;function V9(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function ms(t,e,r,n,i,s){lt[t]=lt[t]+lt[e]+i,lt[n]=Hf(lt[n]^lt[t],16),lt[r]=lt[r]+lt[n],lt[e]=Hf(lt[e]^lt[r],12),lt[t]=lt[t]+lt[e]+s,lt[n]=Hf(lt[n]^lt[t],8),lt[r]=lt[r]+lt[n],lt[e]=Hf(lt[e]^lt[r],7)}function Hf(t,e){return t>>>e^t<<32-e}const vE=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Er=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),lt=new Uint32Array(16),fr=new Uint32Array(16);function mE(t,e){let r=0;for(r=0;r<8;r++)lt[r]=t.h[r],lt[r+8]=vE[r];for(lt[12]^=t.t,lt[13]^=t.t/4294967296,e&&(lt[14]=~lt[14]),r=0;r<16;r++)fr[r]=V9(t.b,4*r);for(r=0;r<10;r++)ms(0,4,8,12,fr[Er[r*16+0]],fr[Er[r*16+1]]),ms(1,5,9,13,fr[Er[r*16+2]],fr[Er[r*16+3]]),ms(2,6,10,14,fr[Er[r*16+4]],fr[Er[r*16+5]]),ms(3,7,11,15,fr[Er[r*16+6]],fr[Er[r*16+7]]),ms(0,5,10,15,fr[Er[r*16+8]],fr[Er[r*16+9]]),ms(1,6,11,12,fr[Er[r*16+10]],fr[Er[r*16+11]]),ms(2,7,8,13,fr[Er[r*16+12]],fr[Er[r*16+13]]),ms(3,4,9,14,fr[Er[r*16+14]],fr[Er[r*16+15]]);for(r=0;r<8;r++)t.h[r]^=lt[r]^lt[r+8]}function yE(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const r=e?e.length:0;if(e&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");const n={h:new Uint32Array(vE),b:new Uint8Array(64),c:0,t:0,outlen:t};return n.h[0]^=16842752^r<<8^t,r>0&&(o1(n,e),n.c=64),n}function o1(t,e){for(let r=0;r<e.length;r++)t.c===64&&(t.t+=t.c,mE(t,!1),t.c=0),t.b[t.c++]=e[r]}function EE(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;mE(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3)&255;return e}function wE(t,e,r){r=r||32,t=bE.normalizeInput(t);const n=yE(r,e);return o1(n,t),EE(n)}function $9(t,e,r){const n=wE(t,e,r);return bE.toHex(n)}var z9={blake2s:wE,blake2sHex:$9,blake2sInit:yE,blake2sUpdate:o1,blake2sFinal:EE};const fc=q9,uc=z9;var W9={blake2b:fc.blake2b,blake2bHex:fc.blake2bHex,blake2bInit:fc.blake2bInit,blake2bUpdate:fc.blake2bUpdate,blake2bFinal:fc.blake2bFinal,blake2s:uc.blake2s,blake2sHex:uc.blake2sHex,blake2sInit:uc.blake2sInit,blake2sUpdate:uc.blake2sUpdate,blake2sFinal:uc.blake2sFinal};const X9=wi(W9);var J9={};const Y9="elliptic",Q9="6.5.4",Z9="EC cryptography",e7="lib/elliptic.js",t7=["lib"],r7={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},n7={type:"git",url:"git@github.com:indutny/elliptic"},i7=["EC","Elliptic","curve","Cryptography"],s7="Fedor Indutny <fedor@indutny.com>",o7="MIT",a7={url:"https://github.com/indutny/elliptic/issues"},c7="https://github.com/indutny/elliptic",f7={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},u7={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},l7={name:Y9,version:Q9,description:Z9,main:e7,files:t7,scripts:r7,repository:n7,keywords:i7,author:s7,license:o7,bugs:a7,homepage:c7,devDependencies:f7,dependencies:u7};var fn={},a1={exports:{}};a1.exports;(function(t){(function(e,r){function n(E,u){if(!E)throw new Error(u||"Assertion failed")}function i(E,u){E.super_=u;var d=function(){};d.prototype=u.prototype,E.prototype=new d,E.prototype.constructor=E}function s(E,u,d){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((u==="le"||u==="be")&&(d=u,u=10),this._init(E||0,u||10,d||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Mp.Buffer}catch{}s.isBN=function(u){return u instanceof s?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===s.wordSize&&Array.isArray(u.words)},s.max=function(u,d){return u.cmp(d)>0?u:d},s.min=function(u,d){return u.cmp(d)<0?u:d},s.prototype._init=function(u,d,g){if(typeof u=="number")return this._initNumber(u,d,g);if(typeof u=="object")return this._initArray(u,d,g);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),u=u.toString().replace(/\s+/g,"");var b=0;u[0]==="-"&&(b++,this.negative=1),b<u.length&&(d===16?this._parseHex(u,b,g):(this._parseBase(u,d,b),g==="le"&&this._initArray(this.toArray(),d,g)))},s.prototype._initNumber=function(u,d,g){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(n(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),d,g)},s.prototype._initArray=function(u,d,g){if(n(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var p,R,O=0;if(g==="be")for(b=u.length-1,p=0;b>=0;b-=3)R=u[b]|u[b-1]<<8|u[b-2]<<16,this.words[p]|=R<<O&67108863,this.words[p+1]=R>>>26-O&67108863,O+=24,O>=26&&(O-=26,p++);else if(g==="le")for(b=0,p=0;b<u.length;b+=3)R=u[b]|u[b+1]<<8|u[b+2]<<16,this.words[p]|=R<<O&67108863,this.words[p+1]=R>>>26-O&67108863,O+=24,O>=26&&(O-=26,p++);return this.strip()};function a(E,u){var d=E.charCodeAt(u);return d>=65&&d<=70?d-55:d>=97&&d<=102?d-87:d-48&15}function c(E,u,d){var g=a(E,d);return d-1>=u&&(g|=a(E,d-1)<<4),g}s.prototype._parseHex=function(u,d,g){this.length=Math.ceil((u.length-d)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var p=0,R=0,O;if(g==="be")for(b=u.length-1;b>=d;b-=2)O=c(u,d,b)<<p,this.words[R]|=O&67108863,p>=18?(p-=18,R+=1,this.words[R]|=O>>>26):p+=8;else{var w=u.length-d;for(b=w%2===0?d+1:d;b<u.length;b+=2)O=c(u,d,b)<<p,this.words[R]|=O&67108863,p>=18?(p-=18,R+=1,this.words[R]|=O>>>26):p+=8}this.strip()};function l(E,u,d,g){for(var b=0,p=Math.min(E.length,d),R=u;R<p;R++){var O=E.charCodeAt(R)-48;b*=g,O>=49?b+=O-49+10:O>=17?b+=O-17+10:b+=O}return b}s.prototype._parseBase=function(u,d,g){this.words=[0],this.length=1;for(var b=0,p=1;p<=67108863;p*=d)b++;b--,p=p/d|0;for(var R=u.length-g,O=R%b,w=Math.min(R,R-O)+g,v=0,N=g;N<w;N+=b)v=l(u,N,N+b,d),this.imuln(p),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(O!==0){var ee=1;for(v=l(u,N,u.length,d),N=0;N<O;N++)ee*=d;this.imuln(ee),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this.strip()},s.prototype.copy=function(u){u.words=new Array(this.length);for(var d=0;d<this.length;d++)u.words[d]=this.words[d];u.length=this.length,u.negative=this.negative,u.red=this.red},s.prototype.clone=function(){var u=new s(null);return this.copy(u),u},s.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(u,d){u=u||10,d=d|0||1;var g;if(u===16||u==="hex"){g="";for(var b=0,p=0,R=0;R<this.length;R++){var O=this.words[R],w=((O<<b|p)&16777215).toString(16);p=O>>>24-b&16777215,p!==0||R!==this.length-1?g=f[6-w.length]+w+g:g=w+g,b+=2,b>=26&&(b-=26,R--)}for(p!==0&&(g=p.toString(16)+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(u===(u|0)&&u>=2&&u<=36){var v=h[u],N=S[u];g="";var ee=this.clone();for(ee.negative=0;!ee.isZero();){var Y=ee.modn(N).toString(u);ee=ee.idivn(N),ee.isZero()?g=Y+g:g=f[v-Y.length]+Y+g}for(this.isZero()&&(g="0"+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(u,d){return n(typeof o<"u"),this.toArrayLike(o,u,d)},s.prototype.toArray=function(u,d){return this.toArrayLike(Array,u,d)},s.prototype.toArrayLike=function(u,d,g){var b=this.byteLength(),p=g||Math.max(1,b);n(b<=p,"byte array longer than desired length"),n(p>0,"Requested array length <= 0"),this.strip();var R=d==="le",O=new u(p),w,v,N=this.clone();if(R){for(v=0;!N.isZero();v++)w=N.andln(255),N.iushrn(8),O[v]=w;for(;v<p;v++)O[v]=0}else{for(v=0;v<p-b;v++)O[v]=0;for(v=0;!N.isZero();v++)w=N.andln(255),N.iushrn(8),O[p-v-1]=w}return O},Math.clz32?s.prototype._countBits=function(u){return 32-Math.clz32(u)}:s.prototype._countBits=function(u){var d=u,g=0;return d>=4096&&(g+=13,d>>>=13),d>=64&&(g+=7,d>>>=7),d>=8&&(g+=4,d>>>=4),d>=2&&(g+=2,d>>>=2),g+d},s.prototype._zeroBits=function(u){if(u===0)return 26;var d=u,g=0;return d&8191||(g+=13,d>>>=13),d&127||(g+=7,d>>>=7),d&15||(g+=4,d>>>=4),d&3||(g+=2,d>>>=2),d&1||g++,g},s.prototype.bitLength=function(){var u=this.words[this.length-1],d=this._countBits(u);return(this.length-1)*26+d};function P(E){for(var u=new Array(E.bitLength()),d=0;d<u.length;d++){var g=d/26|0,b=d%26;u[d]=(E.words[g]&1<<b)>>>b}return u}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,d=0;d<this.length;d++){var g=this._zeroBits(this.words[d]);if(u+=g,g!==26)break}return u},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},s.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var d=0;d<u.length;d++)this.words[d]=this.words[d]|u.words[d];return this.strip()},s.prototype.ior=function(u){return n((this.negative|u.negative)===0),this.iuor(u)},s.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},s.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},s.prototype.iuand=function(u){var d;this.length>u.length?d=u:d=this;for(var g=0;g<d.length;g++)this.words[g]=this.words[g]&u.words[g];return this.length=d.length,this.strip()},s.prototype.iand=function(u){return n((this.negative|u.negative)===0),this.iuand(u)},s.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},s.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},s.prototype.iuxor=function(u){var d,g;this.length>u.length?(d=this,g=u):(d=u,g=this);for(var b=0;b<g.length;b++)this.words[b]=d.words[b]^g.words[b];if(this!==d)for(;b<d.length;b++)this.words[b]=d.words[b];return this.length=d.length,this.strip()},s.prototype.ixor=function(u){return n((this.negative|u.negative)===0),this.iuxor(u)},s.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},s.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},s.prototype.inotn=function(u){n(typeof u=="number"&&u>=0);var d=Math.ceil(u/26)|0,g=u%26;this._expand(d),g>0&&d--;for(var b=0;b<d;b++)this.words[b]=~this.words[b]&67108863;return g>0&&(this.words[b]=~this.words[b]&67108863>>26-g),this.strip()},s.prototype.notn=function(u){return this.clone().inotn(u)},s.prototype.setn=function(u,d){n(typeof u=="number"&&u>=0);var g=u/26|0,b=u%26;return this._expand(g+1),d?this.words[g]=this.words[g]|1<<b:this.words[g]=this.words[g]&~(1<<b),this.strip()},s.prototype.iadd=function(u){var d;if(this.negative!==0&&u.negative===0)return this.negative=0,d=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,d=this.isub(u),u.negative=1,d._normSign();var g,b;this.length>u.length?(g=this,b=u):(g=u,b=this);for(var p=0,R=0;R<b.length;R++)d=(g.words[R]|0)+(b.words[R]|0)+p,this.words[R]=d&67108863,p=d>>>26;for(;p!==0&&R<g.length;R++)d=(g.words[R]|0)+p,this.words[R]=d&67108863,p=d>>>26;if(this.length=g.length,p!==0)this.words[this.length]=p,this.length++;else if(g!==this)for(;R<g.length;R++)this.words[R]=g.words[R];return this},s.prototype.add=function(u){var d;return u.negative!==0&&this.negative===0?(u.negative=0,d=this.sub(u),u.negative^=1,d):u.negative===0&&this.negative!==0?(this.negative=0,d=u.sub(this),this.negative=1,d):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},s.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var d=this.iadd(u);return u.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var g=this.cmp(u);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var b,p;g>0?(b=this,p=u):(b=u,p=this);for(var R=0,O=0;O<p.length;O++)d=(b.words[O]|0)-(p.words[O]|0)+R,R=d>>26,this.words[O]=d&67108863;for(;R!==0&&O<b.length;O++)d=(b.words[O]|0)+R,R=d>>26,this.words[O]=d&67108863;if(R===0&&O<b.length&&b!==this)for(;O<b.length;O++)this.words[O]=b.words[O];return this.length=Math.max(this.length,O),b!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(u){return this.clone().isub(u)};function M(E,u,d){d.negative=u.negative^E.negative;var g=E.length+u.length|0;d.length=g,g=g-1|0;var b=E.words[0]|0,p=u.words[0]|0,R=b*p,O=R&67108863,w=R/67108864|0;d.words[0]=O;for(var v=1;v<g;v++){for(var N=w>>>26,ee=w&67108863,Y=Math.min(v,u.length-1),ie=Math.max(0,v-E.length+1);ie<=Y;ie++){var oe=v-ie|0;b=E.words[oe]|0,p=u.words[ie]|0,R=b*p+ee,N+=R/67108864|0,ee=R&67108863}d.words[v]=ee|0,w=N|0}return w!==0?d.words[v]=w|0:d.length--,d.strip()}var H=function(u,d,g){var b=u.words,p=d.words,R=g.words,O=0,w,v,N,ee=b[0]|0,Y=ee&8191,ie=ee>>>13,oe=b[1]|0,ae=oe&8191,W=oe>>>13,F=b[2]|0,k=F&8191,m=F>>>13,B=b[3]|0,X=B&8191,Z=B>>>13,fe=b[4]|0,se=fe&8191,de=fe>>>13,Ee=b[5]|0,le=Ee&8191,we=Ee>>>13,Re=b[6]|0,ye=Re&8191,be=Re>>>13,Pe=b[7]|0,me=Pe&8191,pe=Pe>>>13,Le=b[8]|0,L=Le&8191,A=Le>>>13,T=b[9]|0,D=T&8191,z=T>>>13,Q=p[0]|0,re=Q&8191,he=Q>>>13,xe=p[1]|0,Ae=xe&8191,Te=xe>>>13,He=p[2]|0,_t=He&8191,St=He>>>13,Ho=p[3]|0,It=Ho&8191,je=Ho>>>13,$t=p[4]|0,Ge=$t&8191,qe=$t>>>13,zt=p[5]|0,Ve=zt&8191,$e=zt>>>13,Wt=p[6]|0,ze=Wt&8191,We=Wt>>>13,Xt=p[7]|0,Xe=Xt&8191,Je=Xt>>>13,Jt=p[8]|0,Ye=Jt&8191,Qe=Jt>>>13,F1=p[9]|0,Ht=F1&8191,jt=F1>>>13;g.negative=u.negative^d.negative,g.length=19,w=Math.imul(Y,re),v=Math.imul(Y,he),v=v+Math.imul(ie,re)|0,N=Math.imul(ie,he);var ah=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(ah>>>26)|0,ah&=67108863,w=Math.imul(ae,re),v=Math.imul(ae,he),v=v+Math.imul(W,re)|0,N=Math.imul(W,he),w=w+Math.imul(Y,Ae)|0,v=v+Math.imul(Y,Te)|0,v=v+Math.imul(ie,Ae)|0,N=N+Math.imul(ie,Te)|0;var ch=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(ch>>>26)|0,ch&=67108863,w=Math.imul(k,re),v=Math.imul(k,he),v=v+Math.imul(m,re)|0,N=Math.imul(m,he),w=w+Math.imul(ae,Ae)|0,v=v+Math.imul(ae,Te)|0,v=v+Math.imul(W,Ae)|0,N=N+Math.imul(W,Te)|0,w=w+Math.imul(Y,_t)|0,v=v+Math.imul(Y,St)|0,v=v+Math.imul(ie,_t)|0,N=N+Math.imul(ie,St)|0;var fh=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(fh>>>26)|0,fh&=67108863,w=Math.imul(X,re),v=Math.imul(X,he),v=v+Math.imul(Z,re)|0,N=Math.imul(Z,he),w=w+Math.imul(k,Ae)|0,v=v+Math.imul(k,Te)|0,v=v+Math.imul(m,Ae)|0,N=N+Math.imul(m,Te)|0,w=w+Math.imul(ae,_t)|0,v=v+Math.imul(ae,St)|0,v=v+Math.imul(W,_t)|0,N=N+Math.imul(W,St)|0,w=w+Math.imul(Y,It)|0,v=v+Math.imul(Y,je)|0,v=v+Math.imul(ie,It)|0,N=N+Math.imul(ie,je)|0;var uh=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(uh>>>26)|0,uh&=67108863,w=Math.imul(se,re),v=Math.imul(se,he),v=v+Math.imul(de,re)|0,N=Math.imul(de,he),w=w+Math.imul(X,Ae)|0,v=v+Math.imul(X,Te)|0,v=v+Math.imul(Z,Ae)|0,N=N+Math.imul(Z,Te)|0,w=w+Math.imul(k,_t)|0,v=v+Math.imul(k,St)|0,v=v+Math.imul(m,_t)|0,N=N+Math.imul(m,St)|0,w=w+Math.imul(ae,It)|0,v=v+Math.imul(ae,je)|0,v=v+Math.imul(W,It)|0,N=N+Math.imul(W,je)|0,w=w+Math.imul(Y,Ge)|0,v=v+Math.imul(Y,qe)|0,v=v+Math.imul(ie,Ge)|0,N=N+Math.imul(ie,qe)|0;var lh=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(lh>>>26)|0,lh&=67108863,w=Math.imul(le,re),v=Math.imul(le,he),v=v+Math.imul(we,re)|0,N=Math.imul(we,he),w=w+Math.imul(se,Ae)|0,v=v+Math.imul(se,Te)|0,v=v+Math.imul(de,Ae)|0,N=N+Math.imul(de,Te)|0,w=w+Math.imul(X,_t)|0,v=v+Math.imul(X,St)|0,v=v+Math.imul(Z,_t)|0,N=N+Math.imul(Z,St)|0,w=w+Math.imul(k,It)|0,v=v+Math.imul(k,je)|0,v=v+Math.imul(m,It)|0,N=N+Math.imul(m,je)|0,w=w+Math.imul(ae,Ge)|0,v=v+Math.imul(ae,qe)|0,v=v+Math.imul(W,Ge)|0,N=N+Math.imul(W,qe)|0,w=w+Math.imul(Y,Ve)|0,v=v+Math.imul(Y,$e)|0,v=v+Math.imul(ie,Ve)|0,N=N+Math.imul(ie,$e)|0;var hh=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(hh>>>26)|0,hh&=67108863,w=Math.imul(ye,re),v=Math.imul(ye,he),v=v+Math.imul(be,re)|0,N=Math.imul(be,he),w=w+Math.imul(le,Ae)|0,v=v+Math.imul(le,Te)|0,v=v+Math.imul(we,Ae)|0,N=N+Math.imul(we,Te)|0,w=w+Math.imul(se,_t)|0,v=v+Math.imul(se,St)|0,v=v+Math.imul(de,_t)|0,N=N+Math.imul(de,St)|0,w=w+Math.imul(X,It)|0,v=v+Math.imul(X,je)|0,v=v+Math.imul(Z,It)|0,N=N+Math.imul(Z,je)|0,w=w+Math.imul(k,Ge)|0,v=v+Math.imul(k,qe)|0,v=v+Math.imul(m,Ge)|0,N=N+Math.imul(m,qe)|0,w=w+Math.imul(ae,Ve)|0,v=v+Math.imul(ae,$e)|0,v=v+Math.imul(W,Ve)|0,N=N+Math.imul(W,$e)|0,w=w+Math.imul(Y,ze)|0,v=v+Math.imul(Y,We)|0,v=v+Math.imul(ie,ze)|0,N=N+Math.imul(ie,We)|0;var dh=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(dh>>>26)|0,dh&=67108863,w=Math.imul(me,re),v=Math.imul(me,he),v=v+Math.imul(pe,re)|0,N=Math.imul(pe,he),w=w+Math.imul(ye,Ae)|0,v=v+Math.imul(ye,Te)|0,v=v+Math.imul(be,Ae)|0,N=N+Math.imul(be,Te)|0,w=w+Math.imul(le,_t)|0,v=v+Math.imul(le,St)|0,v=v+Math.imul(we,_t)|0,N=N+Math.imul(we,St)|0,w=w+Math.imul(se,It)|0,v=v+Math.imul(se,je)|0,v=v+Math.imul(de,It)|0,N=N+Math.imul(de,je)|0,w=w+Math.imul(X,Ge)|0,v=v+Math.imul(X,qe)|0,v=v+Math.imul(Z,Ge)|0,N=N+Math.imul(Z,qe)|0,w=w+Math.imul(k,Ve)|0,v=v+Math.imul(k,$e)|0,v=v+Math.imul(m,Ve)|0,N=N+Math.imul(m,$e)|0,w=w+Math.imul(ae,ze)|0,v=v+Math.imul(ae,We)|0,v=v+Math.imul(W,ze)|0,N=N+Math.imul(W,We)|0,w=w+Math.imul(Y,Xe)|0,v=v+Math.imul(Y,Je)|0,v=v+Math.imul(ie,Xe)|0,N=N+Math.imul(ie,Je)|0;var ph=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(ph>>>26)|0,ph&=67108863,w=Math.imul(L,re),v=Math.imul(L,he),v=v+Math.imul(A,re)|0,N=Math.imul(A,he),w=w+Math.imul(me,Ae)|0,v=v+Math.imul(me,Te)|0,v=v+Math.imul(pe,Ae)|0,N=N+Math.imul(pe,Te)|0,w=w+Math.imul(ye,_t)|0,v=v+Math.imul(ye,St)|0,v=v+Math.imul(be,_t)|0,N=N+Math.imul(be,St)|0,w=w+Math.imul(le,It)|0,v=v+Math.imul(le,je)|0,v=v+Math.imul(we,It)|0,N=N+Math.imul(we,je)|0,w=w+Math.imul(se,Ge)|0,v=v+Math.imul(se,qe)|0,v=v+Math.imul(de,Ge)|0,N=N+Math.imul(de,qe)|0,w=w+Math.imul(X,Ve)|0,v=v+Math.imul(X,$e)|0,v=v+Math.imul(Z,Ve)|0,N=N+Math.imul(Z,$e)|0,w=w+Math.imul(k,ze)|0,v=v+Math.imul(k,We)|0,v=v+Math.imul(m,ze)|0,N=N+Math.imul(m,We)|0,w=w+Math.imul(ae,Xe)|0,v=v+Math.imul(ae,Je)|0,v=v+Math.imul(W,Xe)|0,N=N+Math.imul(W,Je)|0,w=w+Math.imul(Y,Ye)|0,v=v+Math.imul(Y,Qe)|0,v=v+Math.imul(ie,Ye)|0,N=N+Math.imul(ie,Qe)|0;var gh=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(gh>>>26)|0,gh&=67108863,w=Math.imul(D,re),v=Math.imul(D,he),v=v+Math.imul(z,re)|0,N=Math.imul(z,he),w=w+Math.imul(L,Ae)|0,v=v+Math.imul(L,Te)|0,v=v+Math.imul(A,Ae)|0,N=N+Math.imul(A,Te)|0,w=w+Math.imul(me,_t)|0,v=v+Math.imul(me,St)|0,v=v+Math.imul(pe,_t)|0,N=N+Math.imul(pe,St)|0,w=w+Math.imul(ye,It)|0,v=v+Math.imul(ye,je)|0,v=v+Math.imul(be,It)|0,N=N+Math.imul(be,je)|0,w=w+Math.imul(le,Ge)|0,v=v+Math.imul(le,qe)|0,v=v+Math.imul(we,Ge)|0,N=N+Math.imul(we,qe)|0,w=w+Math.imul(se,Ve)|0,v=v+Math.imul(se,$e)|0,v=v+Math.imul(de,Ve)|0,N=N+Math.imul(de,$e)|0,w=w+Math.imul(X,ze)|0,v=v+Math.imul(X,We)|0,v=v+Math.imul(Z,ze)|0,N=N+Math.imul(Z,We)|0,w=w+Math.imul(k,Xe)|0,v=v+Math.imul(k,Je)|0,v=v+Math.imul(m,Xe)|0,N=N+Math.imul(m,Je)|0,w=w+Math.imul(ae,Ye)|0,v=v+Math.imul(ae,Qe)|0,v=v+Math.imul(W,Ye)|0,N=N+Math.imul(W,Qe)|0,w=w+Math.imul(Y,Ht)|0,v=v+Math.imul(Y,jt)|0,v=v+Math.imul(ie,Ht)|0,N=N+Math.imul(ie,jt)|0;var bh=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(bh>>>26)|0,bh&=67108863,w=Math.imul(D,Ae),v=Math.imul(D,Te),v=v+Math.imul(z,Ae)|0,N=Math.imul(z,Te),w=w+Math.imul(L,_t)|0,v=v+Math.imul(L,St)|0,v=v+Math.imul(A,_t)|0,N=N+Math.imul(A,St)|0,w=w+Math.imul(me,It)|0,v=v+Math.imul(me,je)|0,v=v+Math.imul(pe,It)|0,N=N+Math.imul(pe,je)|0,w=w+Math.imul(ye,Ge)|0,v=v+Math.imul(ye,qe)|0,v=v+Math.imul(be,Ge)|0,N=N+Math.imul(be,qe)|0,w=w+Math.imul(le,Ve)|0,v=v+Math.imul(le,$e)|0,v=v+Math.imul(we,Ve)|0,N=N+Math.imul(we,$e)|0,w=w+Math.imul(se,ze)|0,v=v+Math.imul(se,We)|0,v=v+Math.imul(de,ze)|0,N=N+Math.imul(de,We)|0,w=w+Math.imul(X,Xe)|0,v=v+Math.imul(X,Je)|0,v=v+Math.imul(Z,Xe)|0,N=N+Math.imul(Z,Je)|0,w=w+Math.imul(k,Ye)|0,v=v+Math.imul(k,Qe)|0,v=v+Math.imul(m,Ye)|0,N=N+Math.imul(m,Qe)|0,w=w+Math.imul(ae,Ht)|0,v=v+Math.imul(ae,jt)|0,v=v+Math.imul(W,Ht)|0,N=N+Math.imul(W,jt)|0;var vh=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(vh>>>26)|0,vh&=67108863,w=Math.imul(D,_t),v=Math.imul(D,St),v=v+Math.imul(z,_t)|0,N=Math.imul(z,St),w=w+Math.imul(L,It)|0,v=v+Math.imul(L,je)|0,v=v+Math.imul(A,It)|0,N=N+Math.imul(A,je)|0,w=w+Math.imul(me,Ge)|0,v=v+Math.imul(me,qe)|0,v=v+Math.imul(pe,Ge)|0,N=N+Math.imul(pe,qe)|0,w=w+Math.imul(ye,Ve)|0,v=v+Math.imul(ye,$e)|0,v=v+Math.imul(be,Ve)|0,N=N+Math.imul(be,$e)|0,w=w+Math.imul(le,ze)|0,v=v+Math.imul(le,We)|0,v=v+Math.imul(we,ze)|0,N=N+Math.imul(we,We)|0,w=w+Math.imul(se,Xe)|0,v=v+Math.imul(se,Je)|0,v=v+Math.imul(de,Xe)|0,N=N+Math.imul(de,Je)|0,w=w+Math.imul(X,Ye)|0,v=v+Math.imul(X,Qe)|0,v=v+Math.imul(Z,Ye)|0,N=N+Math.imul(Z,Qe)|0,w=w+Math.imul(k,Ht)|0,v=v+Math.imul(k,jt)|0,v=v+Math.imul(m,Ht)|0,N=N+Math.imul(m,jt)|0;var mh=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(mh>>>26)|0,mh&=67108863,w=Math.imul(D,It),v=Math.imul(D,je),v=v+Math.imul(z,It)|0,N=Math.imul(z,je),w=w+Math.imul(L,Ge)|0,v=v+Math.imul(L,qe)|0,v=v+Math.imul(A,Ge)|0,N=N+Math.imul(A,qe)|0,w=w+Math.imul(me,Ve)|0,v=v+Math.imul(me,$e)|0,v=v+Math.imul(pe,Ve)|0,N=N+Math.imul(pe,$e)|0,w=w+Math.imul(ye,ze)|0,v=v+Math.imul(ye,We)|0,v=v+Math.imul(be,ze)|0,N=N+Math.imul(be,We)|0,w=w+Math.imul(le,Xe)|0,v=v+Math.imul(le,Je)|0,v=v+Math.imul(we,Xe)|0,N=N+Math.imul(we,Je)|0,w=w+Math.imul(se,Ye)|0,v=v+Math.imul(se,Qe)|0,v=v+Math.imul(de,Ye)|0,N=N+Math.imul(de,Qe)|0,w=w+Math.imul(X,Ht)|0,v=v+Math.imul(X,jt)|0,v=v+Math.imul(Z,Ht)|0,N=N+Math.imul(Z,jt)|0;var yh=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(yh>>>26)|0,yh&=67108863,w=Math.imul(D,Ge),v=Math.imul(D,qe),v=v+Math.imul(z,Ge)|0,N=Math.imul(z,qe),w=w+Math.imul(L,Ve)|0,v=v+Math.imul(L,$e)|0,v=v+Math.imul(A,Ve)|0,N=N+Math.imul(A,$e)|0,w=w+Math.imul(me,ze)|0,v=v+Math.imul(me,We)|0,v=v+Math.imul(pe,ze)|0,N=N+Math.imul(pe,We)|0,w=w+Math.imul(ye,Xe)|0,v=v+Math.imul(ye,Je)|0,v=v+Math.imul(be,Xe)|0,N=N+Math.imul(be,Je)|0,w=w+Math.imul(le,Ye)|0,v=v+Math.imul(le,Qe)|0,v=v+Math.imul(we,Ye)|0,N=N+Math.imul(we,Qe)|0,w=w+Math.imul(se,Ht)|0,v=v+Math.imul(se,jt)|0,v=v+Math.imul(de,Ht)|0,N=N+Math.imul(de,jt)|0;var Eh=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(Eh>>>26)|0,Eh&=67108863,w=Math.imul(D,Ve),v=Math.imul(D,$e),v=v+Math.imul(z,Ve)|0,N=Math.imul(z,$e),w=w+Math.imul(L,ze)|0,v=v+Math.imul(L,We)|0,v=v+Math.imul(A,ze)|0,N=N+Math.imul(A,We)|0,w=w+Math.imul(me,Xe)|0,v=v+Math.imul(me,Je)|0,v=v+Math.imul(pe,Xe)|0,N=N+Math.imul(pe,Je)|0,w=w+Math.imul(ye,Ye)|0,v=v+Math.imul(ye,Qe)|0,v=v+Math.imul(be,Ye)|0,N=N+Math.imul(be,Qe)|0,w=w+Math.imul(le,Ht)|0,v=v+Math.imul(le,jt)|0,v=v+Math.imul(we,Ht)|0,N=N+Math.imul(we,jt)|0;var wh=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(wh>>>26)|0,wh&=67108863,w=Math.imul(D,ze),v=Math.imul(D,We),v=v+Math.imul(z,ze)|0,N=Math.imul(z,We),w=w+Math.imul(L,Xe)|0,v=v+Math.imul(L,Je)|0,v=v+Math.imul(A,Xe)|0,N=N+Math.imul(A,Je)|0,w=w+Math.imul(me,Ye)|0,v=v+Math.imul(me,Qe)|0,v=v+Math.imul(pe,Ye)|0,N=N+Math.imul(pe,Qe)|0,w=w+Math.imul(ye,Ht)|0,v=v+Math.imul(ye,jt)|0,v=v+Math.imul(be,Ht)|0,N=N+Math.imul(be,jt)|0;var _h=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(_h>>>26)|0,_h&=67108863,w=Math.imul(D,Xe),v=Math.imul(D,Je),v=v+Math.imul(z,Xe)|0,N=Math.imul(z,Je),w=w+Math.imul(L,Ye)|0,v=v+Math.imul(L,Qe)|0,v=v+Math.imul(A,Ye)|0,N=N+Math.imul(A,Qe)|0,w=w+Math.imul(me,Ht)|0,v=v+Math.imul(me,jt)|0,v=v+Math.imul(pe,Ht)|0,N=N+Math.imul(pe,jt)|0;var Ah=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(Ah>>>26)|0,Ah&=67108863,w=Math.imul(D,Ye),v=Math.imul(D,Qe),v=v+Math.imul(z,Ye)|0,N=Math.imul(z,Qe),w=w+Math.imul(L,Ht)|0,v=v+Math.imul(L,jt)|0,v=v+Math.imul(A,Ht)|0,N=N+Math.imul(A,jt)|0;var xh=(O+w|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(xh>>>26)|0,xh&=67108863,w=Math.imul(D,Ht),v=Math.imul(D,jt),v=v+Math.imul(z,Ht)|0,N=Math.imul(z,jt);var Sh=(O+w|0)+((v&8191)<<13)|0;return O=(N+(v>>>13)|0)+(Sh>>>26)|0,Sh&=67108863,R[0]=ah,R[1]=ch,R[2]=fh,R[3]=uh,R[4]=lh,R[5]=hh,R[6]=dh,R[7]=ph,R[8]=gh,R[9]=bh,R[10]=vh,R[11]=mh,R[12]=yh,R[13]=Eh,R[14]=wh,R[15]=_h,R[16]=Ah,R[17]=xh,R[18]=Sh,O!==0&&(R[19]=O,g.length++),g};Math.imul||(H=M);function $(E,u,d){d.negative=u.negative^E.negative,d.length=E.length+u.length;for(var g=0,b=0,p=0;p<d.length-1;p++){var R=b;b=0;for(var O=g&67108863,w=Math.min(p,u.length-1),v=Math.max(0,p-E.length+1);v<=w;v++){var N=p-v,ee=E.words[N]|0,Y=u.words[v]|0,ie=ee*Y,oe=ie&67108863;R=R+(ie/67108864|0)|0,oe=oe+O|0,O=oe&67108863,R=R+(oe>>>26)|0,b+=R>>>26,R&=67108863}d.words[p]=O,g=R,R=b}return g!==0?d.words[p]=g:d.length--,d.strip()}function q(E,u,d){var g=new C;return g.mulp(E,u,d)}s.prototype.mulTo=function(u,d){var g,b=this.length+u.length;return this.length===10&&u.length===10?g=H(this,u,d):b<63?g=M(this,u,d):b<1024?g=$(this,u,d):g=q(this,u,d),g};function C(E,u){this.x=E,this.y=u}C.prototype.makeRBT=function(u){for(var d=new Array(u),g=s.prototype._countBits(u)-1,b=0;b<u;b++)d[b]=this.revBin(b,g,u);return d},C.prototype.revBin=function(u,d,g){if(u===0||u===g-1)return u;for(var b=0,p=0;p<d;p++)b|=(u&1)<<d-p-1,u>>=1;return b},C.prototype.permute=function(u,d,g,b,p,R){for(var O=0;O<R;O++)b[O]=d[u[O]],p[O]=g[u[O]]},C.prototype.transform=function(u,d,g,b,p,R){this.permute(R,u,d,g,b,p);for(var O=1;O<p;O<<=1)for(var w=O<<1,v=Math.cos(2*Math.PI/w),N=Math.sin(2*Math.PI/w),ee=0;ee<p;ee+=w)for(var Y=v,ie=N,oe=0;oe<O;oe++){var ae=g[ee+oe],W=b[ee+oe],F=g[ee+oe+O],k=b[ee+oe+O],m=Y*F-ie*k;k=Y*k+ie*F,F=m,g[ee+oe]=ae+F,b[ee+oe]=W+k,g[ee+oe+O]=ae-F,b[ee+oe+O]=W-k,oe!==w&&(m=v*Y-N*ie,ie=v*ie+N*Y,Y=m)}},C.prototype.guessLen13b=function(u,d){var g=Math.max(d,u)|1,b=g&1,p=0;for(g=g/2|0;g;g=g>>>1)p++;return 1<<p+1+b},C.prototype.conjugate=function(u,d,g){if(!(g<=1))for(var b=0;b<g/2;b++){var p=u[b];u[b]=u[g-b-1],u[g-b-1]=p,p=d[b],d[b]=-d[g-b-1],d[g-b-1]=-p}},C.prototype.normalize13b=function(u,d){for(var g=0,b=0;b<d/2;b++){var p=Math.round(u[2*b+1]/d)*8192+Math.round(u[2*b]/d)+g;u[b]=p&67108863,p<67108864?g=0:g=p/67108864|0}return u},C.prototype.convert13b=function(u,d,g,b){for(var p=0,R=0;R<d;R++)p=p+(u[R]|0),g[2*R]=p&8191,p=p>>>13,g[2*R+1]=p&8191,p=p>>>13;for(R=2*d;R<b;++R)g[R]=0;n(p===0),n((p&-8192)===0)},C.prototype.stub=function(u){for(var d=new Array(u),g=0;g<u;g++)d[g]=0;return d},C.prototype.mulp=function(u,d,g){var b=2*this.guessLen13b(u.length,d.length),p=this.makeRBT(b),R=this.stub(b),O=new Array(b),w=new Array(b),v=new Array(b),N=new Array(b),ee=new Array(b),Y=new Array(b),ie=g.words;ie.length=b,this.convert13b(u.words,u.length,O,b),this.convert13b(d.words,d.length,N,b),this.transform(O,R,w,v,b,p),this.transform(N,R,ee,Y,b,p);for(var oe=0;oe<b;oe++){var ae=w[oe]*ee[oe]-v[oe]*Y[oe];v[oe]=w[oe]*Y[oe]+v[oe]*ee[oe],w[oe]=ae}return this.conjugate(w,v,b),this.transform(w,v,ie,R,b,p),this.conjugate(ie,R,b),this.normalize13b(ie,b),g.negative=u.negative^d.negative,g.length=u.length+d.length,g.strip()},s.prototype.mul=function(u){var d=new s(null);return d.words=new Array(this.length+u.length),this.mulTo(u,d)},s.prototype.mulf=function(u){var d=new s(null);return d.words=new Array(this.length+u.length),q(this,u,d)},s.prototype.imul=function(u){return this.clone().mulTo(u,this)},s.prototype.imuln=function(u){n(typeof u=="number"),n(u<67108864);for(var d=0,g=0;g<this.length;g++){var b=(this.words[g]|0)*u,p=(b&67108863)+(d&67108863);d>>=26,d+=b/67108864|0,d+=p>>>26,this.words[g]=p&67108863}return d!==0&&(this.words[g]=d,this.length++),this},s.prototype.muln=function(u){return this.clone().imuln(u)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(u){var d=P(u);if(d.length===0)return new s(1);for(var g=this,b=0;b<d.length&&d[b]===0;b++,g=g.sqr());if(++b<d.length)for(var p=g.sqr();b<d.length;b++,p=p.sqr())d[b]!==0&&(g=g.mul(p));return g},s.prototype.iushln=function(u){n(typeof u=="number"&&u>=0);var d=u%26,g=(u-d)/26,b=67108863>>>26-d<<26-d,p;if(d!==0){var R=0;for(p=0;p<this.length;p++){var O=this.words[p]&b,w=(this.words[p]|0)-O<<d;this.words[p]=w|R,R=O>>>26-d}R&&(this.words[p]=R,this.length++)}if(g!==0){for(p=this.length-1;p>=0;p--)this.words[p+g]=this.words[p];for(p=0;p<g;p++)this.words[p]=0;this.length+=g}return this.strip()},s.prototype.ishln=function(u){return n(this.negative===0),this.iushln(u)},s.prototype.iushrn=function(u,d,g){n(typeof u=="number"&&u>=0);var b;d?b=(d-d%26)/26:b=0;var p=u%26,R=Math.min((u-p)/26,this.length),O=67108863^67108863>>>p<<p,w=g;if(b-=R,b=Math.max(0,b),w){for(var v=0;v<R;v++)w.words[v]=this.words[v];w.length=R}if(R!==0)if(this.length>R)for(this.length-=R,v=0;v<this.length;v++)this.words[v]=this.words[v+R];else this.words[0]=0,this.length=1;var N=0;for(v=this.length-1;v>=0&&(N!==0||v>=b);v--){var ee=this.words[v]|0;this.words[v]=N<<26-p|ee>>>p,N=ee&O}return w&&N!==0&&(w.words[w.length++]=N),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(u,d,g){return n(this.negative===0),this.iushrn(u,d,g)},s.prototype.shln=function(u){return this.clone().ishln(u)},s.prototype.ushln=function(u){return this.clone().iushln(u)},s.prototype.shrn=function(u){return this.clone().ishrn(u)},s.prototype.ushrn=function(u){return this.clone().iushrn(u)},s.prototype.testn=function(u){n(typeof u=="number"&&u>=0);var d=u%26,g=(u-d)/26,b=1<<d;if(this.length<=g)return!1;var p=this.words[g];return!!(p&b)},s.prototype.imaskn=function(u){n(typeof u=="number"&&u>=0);var d=u%26,g=(u-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(d!==0&&g++,this.length=Math.min(g,this.length),d!==0){var b=67108863^67108863>>>d<<d;this.words[this.length-1]&=b}return this.strip()},s.prototype.maskn=function(u){return this.clone().imaskn(u)},s.prototype.iaddn=function(u){return n(typeof u=="number"),n(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},s.prototype._iaddn=function(u){this.words[0]+=u;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},s.prototype.isubn=function(u){if(n(typeof u=="number"),n(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this.strip()},s.prototype.addn=function(u){return this.clone().iaddn(u)},s.prototype.subn=function(u){return this.clone().isubn(u)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(u,d,g){var b=u.length+g,p;this._expand(b);var R,O=0;for(p=0;p<u.length;p++){R=(this.words[p+g]|0)+O;var w=(u.words[p]|0)*d;R-=w&67108863,O=(R>>26)-(w/67108864|0),this.words[p+g]=R&67108863}for(;p<this.length-g;p++)R=(this.words[p+g]|0)+O,O=R>>26,this.words[p+g]=R&67108863;if(O===0)return this.strip();for(n(O===-1),O=0,p=0;p<this.length;p++)R=-(this.words[p]|0)+O,O=R>>26,this.words[p]=R&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(u,d){var g=this.length-u.length,b=this.clone(),p=u,R=p.words[p.length-1]|0,O=this._countBits(R);g=26-O,g!==0&&(p=p.ushln(g),b.iushln(g),R=p.words[p.length-1]|0);var w=b.length-p.length,v;if(d!=="mod"){v=new s(null),v.length=w+1,v.words=new Array(v.length);for(var N=0;N<v.length;N++)v.words[N]=0}var ee=b.clone()._ishlnsubmul(p,1,w);ee.negative===0&&(b=ee,v&&(v.words[w]=1));for(var Y=w-1;Y>=0;Y--){var ie=(b.words[p.length+Y]|0)*67108864+(b.words[p.length+Y-1]|0);for(ie=Math.min(ie/R|0,67108863),b._ishlnsubmul(p,ie,Y);b.negative!==0;)ie--,b.negative=0,b._ishlnsubmul(p,1,Y),b.isZero()||(b.negative^=1);v&&(v.words[Y]=ie)}return v&&v.strip(),b.strip(),d!=="div"&&g!==0&&b.iushrn(g),{div:v||null,mod:b}},s.prototype.divmod=function(u,d,g){if(n(!u.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var b,p,R;return this.negative!==0&&u.negative===0?(R=this.neg().divmod(u,d),d!=="mod"&&(b=R.div.neg()),d!=="div"&&(p=R.mod.neg(),g&&p.negative!==0&&p.iadd(u)),{div:b,mod:p}):this.negative===0&&u.negative!==0?(R=this.divmod(u.neg(),d),d!=="mod"&&(b=R.div.neg()),{div:b,mod:R.mod}):this.negative&u.negative?(R=this.neg().divmod(u.neg(),d),d!=="div"&&(p=R.mod.neg(),g&&p.negative!==0&&p.isub(u)),{div:R.div,mod:p}):u.length>this.length||this.cmp(u)<0?{div:new s(0),mod:this}:u.length===1?d==="div"?{div:this.divn(u.words[0]),mod:null}:d==="mod"?{div:null,mod:new s(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new s(this.modn(u.words[0]))}:this._wordDiv(u,d)},s.prototype.div=function(u){return this.divmod(u,"div",!1).div},s.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},s.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},s.prototype.divRound=function(u){var d=this.divmod(u);if(d.mod.isZero())return d.div;var g=d.div.negative!==0?d.mod.isub(u):d.mod,b=u.ushrn(1),p=u.andln(1),R=g.cmp(b);return R<0||p===1&&R===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},s.prototype.modn=function(u){n(u<=67108863);for(var d=(1<<26)%u,g=0,b=this.length-1;b>=0;b--)g=(d*g+(this.words[b]|0))%u;return g},s.prototype.idivn=function(u){n(u<=67108863);for(var d=0,g=this.length-1;g>=0;g--){var b=(this.words[g]|0)+d*67108864;this.words[g]=b/u|0,d=b%u}return this.strip()},s.prototype.divn=function(u){return this.clone().idivn(u)},s.prototype.egcd=function(u){n(u.negative===0),n(!u.isZero());var d=this,g=u.clone();d.negative!==0?d=d.umod(u):d=d.clone();for(var b=new s(1),p=new s(0),R=new s(0),O=new s(1),w=0;d.isEven()&&g.isEven();)d.iushrn(1),g.iushrn(1),++w;for(var v=g.clone(),N=d.clone();!d.isZero();){for(var ee=0,Y=1;!(d.words[0]&Y)&&ee<26;++ee,Y<<=1);if(ee>0)for(d.iushrn(ee);ee-- >0;)(b.isOdd()||p.isOdd())&&(b.iadd(v),p.isub(N)),b.iushrn(1),p.iushrn(1);for(var ie=0,oe=1;!(g.words[0]&oe)&&ie<26;++ie,oe<<=1);if(ie>0)for(g.iushrn(ie);ie-- >0;)(R.isOdd()||O.isOdd())&&(R.iadd(v),O.isub(N)),R.iushrn(1),O.iushrn(1);d.cmp(g)>=0?(d.isub(g),b.isub(R),p.isub(O)):(g.isub(d),R.isub(b),O.isub(p))}return{a:R,b:O,gcd:g.iushln(w)}},s.prototype._invmp=function(u){n(u.negative===0),n(!u.isZero());var d=this,g=u.clone();d.negative!==0?d=d.umod(u):d=d.clone();for(var b=new s(1),p=new s(0),R=g.clone();d.cmpn(1)>0&&g.cmpn(1)>0;){for(var O=0,w=1;!(d.words[0]&w)&&O<26;++O,w<<=1);if(O>0)for(d.iushrn(O);O-- >0;)b.isOdd()&&b.iadd(R),b.iushrn(1);for(var v=0,N=1;!(g.words[0]&N)&&v<26;++v,N<<=1);if(v>0)for(g.iushrn(v);v-- >0;)p.isOdd()&&p.iadd(R),p.iushrn(1);d.cmp(g)>=0?(d.isub(g),b.isub(p)):(g.isub(d),p.isub(b))}var ee;return d.cmpn(1)===0?ee=b:ee=p,ee.cmpn(0)<0&&ee.iadd(u),ee},s.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var d=this.clone(),g=u.clone();d.negative=0,g.negative=0;for(var b=0;d.isEven()&&g.isEven();b++)d.iushrn(1),g.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;g.isEven();)g.iushrn(1);var p=d.cmp(g);if(p<0){var R=d;d=g,g=R}else if(p===0||g.cmpn(1)===0)break;d.isub(g)}while(!0);return g.iushln(b)},s.prototype.invm=function(u){return this.egcd(u).a.umod(u)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(u){return this.words[0]&u},s.prototype.bincn=function(u){n(typeof u=="number");var d=u%26,g=(u-d)/26,b=1<<d;if(this.length<=g)return this._expand(g+1),this.words[g]|=b,this;for(var p=b,R=g;p!==0&&R<this.length;R++){var O=this.words[R]|0;O+=p,p=O>>>26,O&=67108863,this.words[R]=O}return p!==0&&(this.words[R]=p,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(u){var d=u<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this.strip();var g;if(this.length>1)g=1;else{d&&(u=-u),n(u<=67108863,"Number is too big");var b=this.words[0]|0;g=b===u?0:b<u?-1:1}return this.negative!==0?-g|0:g},s.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var d=this.ucmp(u);return this.negative!==0?-d|0:d},s.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var d=0,g=this.length-1;g>=0;g--){var b=this.words[g]|0,p=u.words[g]|0;if(b!==p){b<p?d=-1:b>p&&(d=1);break}}return d},s.prototype.gtn=function(u){return this.cmpn(u)===1},s.prototype.gt=function(u){return this.cmp(u)===1},s.prototype.gten=function(u){return this.cmpn(u)>=0},s.prototype.gte=function(u){return this.cmp(u)>=0},s.prototype.ltn=function(u){return this.cmpn(u)===-1},s.prototype.lt=function(u){return this.cmp(u)===-1},s.prototype.lten=function(u){return this.cmpn(u)<=0},s.prototype.lte=function(u){return this.cmp(u)<=0},s.prototype.eqn=function(u){return this.cmpn(u)===0},s.prototype.eq=function(u){return this.cmp(u)===0},s.red=function(u){return new I(u)},s.prototype.toRed=function(u){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(u){return this.red=u,this},s.prototype.forceRed=function(u){return n(!this.red,"Already a number in reduction context"),this._forceRed(u)},s.prototype.redAdd=function(u){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},s.prototype.redIAdd=function(u){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},s.prototype.redSub=function(u){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},s.prototype.redISub=function(u){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},s.prototype.redShl=function(u){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},s.prototype.redMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},s.prototype.redIMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(u){return n(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var V={k256:null,p224:null,p192:null,p25519:null};function K(E,u){this.name=E,this.p=new s(u,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var u=new s(null);return u.words=new Array(Math.ceil(this.n/13)),u},K.prototype.ireduce=function(u){var d=u,g;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),g=d.bitLength();while(g>this.n);var b=g<this.n?-1:d.ucmp(this.p);return b===0?(d.words[0]=0,d.length=1):b>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},K.prototype.split=function(u,d){u.iushrn(this.n,0,d)},K.prototype.imulK=function(u){return u.imul(this.k)};function U(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(U,K),U.prototype.split=function(u,d){for(var g=4194303,b=Math.min(u.length,9),p=0;p<b;p++)d.words[p]=u.words[p];if(d.length=b,u.length<=9){u.words[0]=0,u.length=1;return}var R=u.words[9];for(d.words[d.length++]=R&g,p=10;p<u.length;p++){var O=u.words[p]|0;u.words[p-10]=(O&g)<<4|R>>>22,R=O}R>>>=22,u.words[p-10]=R,R===0&&u.length>10?u.length-=10:u.length-=9},U.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var d=0,g=0;g<u.length;g++){var b=u.words[g]|0;d+=b*977,u.words[g]=d&67108863,d=b*64+(d/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function G(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(G,K);function y(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(y,K);function _(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(_,K),_.prototype.imulK=function(u){for(var d=0,g=0;g<u.length;g++){var b=(u.words[g]|0)*19+d,p=b&67108863;b>>>=26,u.words[g]=p,d=b}return d!==0&&(u.words[u.length++]=d),u},s._prime=function(u){if(V[u])return V[u];var d;if(u==="k256")d=new U;else if(u==="p224")d=new G;else if(u==="p192")d=new y;else if(u==="p25519")d=new _;else throw new Error("Unknown prime "+u);return V[u]=d,d};function I(E){if(typeof E=="string"){var u=s._prime(E);this.m=u.p,this.prime=u}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}I.prototype._verify1=function(u){n(u.negative===0,"red works only with positives"),n(u.red,"red works only with red numbers")},I.prototype._verify2=function(u,d){n((u.negative|d.negative)===0,"red works only with positives"),n(u.red&&u.red===d.red,"red works only with red numbers")},I.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},I.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},I.prototype.add=function(u,d){this._verify2(u,d);var g=u.add(d);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},I.prototype.iadd=function(u,d){this._verify2(u,d);var g=u.iadd(d);return g.cmp(this.m)>=0&&g.isub(this.m),g},I.prototype.sub=function(u,d){this._verify2(u,d);var g=u.sub(d);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},I.prototype.isub=function(u,d){this._verify2(u,d);var g=u.isub(d);return g.cmpn(0)<0&&g.iadd(this.m),g},I.prototype.shl=function(u,d){return this._verify1(u),this.imod(u.ushln(d))},I.prototype.imul=function(u,d){return this._verify2(u,d),this.imod(u.imul(d))},I.prototype.mul=function(u,d){return this._verify2(u,d),this.imod(u.mul(d))},I.prototype.isqr=function(u){return this.imul(u,u.clone())},I.prototype.sqr=function(u){return this.mul(u,u)},I.prototype.sqrt=function(u){if(u.isZero())return u.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var g=this.m.add(new s(1)).iushrn(2);return this.pow(u,g)}for(var b=this.m.subn(1),p=0;!b.isZero()&&b.andln(1)===0;)p++,b.iushrn(1);n(!b.isZero());var R=new s(1).toRed(this),O=R.redNeg(),w=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new s(2*v*v).toRed(this);this.pow(v,w).cmp(O)!==0;)v.redIAdd(O);for(var N=this.pow(v,b),ee=this.pow(u,b.addn(1).iushrn(1)),Y=this.pow(u,b),ie=p;Y.cmp(R)!==0;){for(var oe=Y,ae=0;oe.cmp(R)!==0;ae++)oe=oe.redSqr();n(ae<ie);var W=this.pow(N,new s(1).iushln(ie-ae-1));ee=ee.redMul(W),N=W.redSqr(),Y=Y.redMul(N),ie=ae}return ee},I.prototype.invm=function(u){var d=u._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},I.prototype.pow=function(u,d){if(d.isZero())return new s(1).toRed(this);if(d.cmpn(1)===0)return u.clone();var g=4,b=new Array(1<<g);b[0]=new s(1).toRed(this),b[1]=u;for(var p=2;p<b.length;p++)b[p]=this.mul(b[p-1],u);var R=b[0],O=0,w=0,v=d.bitLength()%26;for(v===0&&(v=26),p=d.length-1;p>=0;p--){for(var N=d.words[p],ee=v-1;ee>=0;ee--){var Y=N>>ee&1;if(R!==b[0]&&(R=this.sqr(R)),Y===0&&O===0){w=0;continue}O<<=1,O|=Y,w++,!(w!==g&&(p!==0||ee!==0))&&(R=this.mul(R,b[O]),w=0,O=0)}v=26}return R},I.prototype.convertTo=function(u){var d=u.umod(this.m);return d===u?d.clone():d},I.prototype.convertFrom=function(u){var d=u.clone();return d.red=null,d},s.mont=function(u){return new x(u)};function x(E){I.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(x,I),x.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},x.prototype.convertFrom=function(u){var d=this.imod(u.mul(this.rinv));return d.red=null,d},x.prototype.imul=function(u,d){if(u.isZero()||d.isZero())return u.words[0]=0,u.length=1,u;var g=u.imul(d),b=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=g.isub(b).iushrn(this.shift),R=p;return p.cmp(this.m)>=0?R=p.isub(this.m):p.cmpn(0)<0&&(R=p.iadd(this.m)),R._forceRed(this)},x.prototype.mul=function(u,d){if(u.isZero()||d.isZero())return new s(0)._forceRed(this);var g=u.mul(d),b=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=g.isub(b).iushrn(this.shift),R=p;return p.cmp(this.m)>=0?R=p.isub(this.m):p.cmpn(0)<0&&(R=p.iadd(this.m)),R._forceRed(this)},x.prototype.invm=function(u){var d=this.imod(u._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(t,pc)})(a1);var hs=a1.exports,Do=_E;function _E(t,e){if(!t)throw new Error(e||"Assertion failed")}_E.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var c1={};(function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var c=0;c<s.length;c++)a[c]=s[c]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var c=0;c<s.length;c+=2)a.push(parseInt(s[c]+s[c+1],16))}else for(var c=0;c<s.length;c++){var l=s.charCodeAt(c),f=l>>8,h=l&255;f?a.push(f,h):a.push(h)}return a}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var o="",a=0;a<s.length;a++)o+=n(s[a].toString(16));return o}e.toHex=i,e.encode=function(o,a){return a==="hex"?i(o):o}})(c1);(function(t){var e=t,r=hs,n=Do,i=c1;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(f,h,S){var P=new Array(Math.max(f.bitLength(),S)+1);P.fill(0);for(var M=1<<h+1,H=f.clone(),$=0;$<P.length;$++){var q,C=H.andln(M-1);H.isOdd()?(C>(M>>1)-1?q=(M>>1)-C:q=C,H.isubn(q)):q=0,P[$]=q,H.iushrn(1)}return P}e.getNAF=s;function o(f,h){var S=[[],[]];f=f.clone(),h=h.clone();for(var P=0,M=0,H;f.cmpn(-P)>0||h.cmpn(-M)>0;){var $=f.andln(3)+P&3,q=h.andln(3)+M&3;$===3&&($=-1),q===3&&(q=-1);var C;$&1?(H=f.andln(7)+P&7,(H===3||H===5)&&q===2?C=-$:C=$):C=0,S[0].push(C);var V;q&1?(H=h.andln(7)+M&7,(H===3||H===5)&&$===2?V=-q:V=q):V=0,S[1].push(V),2*P===C+1&&(P=1-P),2*M===V+1&&(M=1-M),f.iushrn(1),h.iushrn(1)}return S}e.getJSF=o;function a(f,h,S){var P="_"+h;f.prototype[h]=function(){return this[P]!==void 0?this[P]:this[P]=S.call(this)}}e.cachedProperty=a;function c(f){return typeof f=="string"?e.toArray(f,"hex"):f}e.parseBytes=c;function l(f){return new r(f,"hex","le")}e.intFromLE=l})(fn);var f1={exports:{}},n0;f1.exports=function(e){return n0||(n0=new Bs(null)),n0.generate(e)};function Bs(t){this.rand=t}f1.exports.Rand=Bs;Bs.prototype.generate=function(e){return this._rand(e)};Bs.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Bs.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?Bs.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(Bs.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var iv=Mp;if(typeof iv.randomBytes!="function")throw new Error("Not supported");Bs.prototype._rand=function(e){return iv.randomBytes(e)}}catch{}var AE=f1.exports,u1={},co=hs,tf=fn,Mu=tf.getNAF,h7=tf.getJSF,Cu=tf.assert;function to(t,e){this.type=t,this.p=new co(e.p,16),this.red=e.prime?co.red(e.prime):co.mont(this.p),this.zero=new co(0).toRed(this.red),this.one=new co(1).toRed(this.red),this.two=new co(2).toRed(this.red),this.n=e.n&&new co(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Kl=to;to.prototype.point=function(){throw new Error("Not implemented")};to.prototype.validate=function(){throw new Error("Not implemented")};to.prototype._fixedNafMul=function(e,r){Cu(e.precomputed);var n=e._getDoubles(),i=Mu(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var l=a+n.step-1;l>=a;l--)c=(c<<1)+i[l];o.push(c)}for(var f=this.jpoint(null,null,null),h=this.jpoint(null,null,null),S=s;S>0;S--){for(a=0;a<o.length;a++)c=o[a],c===S?h=h.mixedAdd(n.points[a]):c===-S&&(h=h.mixedAdd(n.points[a].neg()));f=f.add(h)}return f.toP()};to.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Mu(r,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var f=o[c];Cu(f!==0),e.type==="affine"?f>0?a=a.mixedAdd(s[f-1>>1]):a=a.mixedAdd(s[-f-1>>1].neg()):f>0?a=a.add(s[f-1>>1]):a=a.add(s[-f-1>>1].neg())}return e.type==="affine"?a.toP():a};to.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,f,h,S;for(f=0;f<i;f++){S=r[f];var P=S._getNAFPoints(e);o[f]=P.wnd,a[f]=P.points}for(f=i-1;f>=1;f-=2){var M=f-1,H=f;if(o[M]!==1||o[H]!==1){c[M]=Mu(n[M],o[M],this._bitLength),c[H]=Mu(n[H],o[H],this._bitLength),l=Math.max(c[M].length,l),l=Math.max(c[H].length,l);continue}var $=[r[M],null,null,r[H]];r[M].y.cmp(r[H].y)===0?($[1]=r[M].add(r[H]),$[2]=r[M].toJ().mixedAdd(r[H].neg())):r[M].y.cmp(r[H].y.redNeg())===0?($[1]=r[M].toJ().mixedAdd(r[H]),$[2]=r[M].add(r[H].neg())):($[1]=r[M].toJ().mixedAdd(r[H]),$[2]=r[M].toJ().mixedAdd(r[H].neg()));var q=[-3,-1,-5,-7,0,7,5,1,3],C=h7(n[M],n[H]);for(l=Math.max(C[0].length,l),c[M]=new Array(l),c[H]=new Array(l),h=0;h<l;h++){var V=C[0][h]|0,K=C[1][h]|0;c[M][h]=q[(V+1)*3+(K+1)],c[H][h]=0,a[M]=$}}var U=this.jpoint(null,null,null),G=this._wnafT4;for(f=l;f>=0;f--){for(var y=0;f>=0;){var _=!0;for(h=0;h<i;h++)G[h]=c[h][f]|0,G[h]!==0&&(_=!1);if(!_)break;y++,f--}if(f>=0&&y++,U=U.dblp(y),f<0)break;for(h=0;h<i;h++){var I=G[h];I!==0&&(I>0?S=a[h][I-1>>1]:I<0&&(S=a[h][-I-1>>1].neg()),S.type==="affine"?U=U.mixedAdd(S):U=U.add(S))}}for(f=0;f<i;f++)a[f]=null;return s?U:U.toP()};function En(t,e){this.curve=t,this.type=e,this.precomputed=null}to.BasePoint=En;En.prototype.eq=function(){throw new Error("Not implemented")};En.prototype.validate=function(){return this.curve.validate(this)};to.prototype.decodePoint=function(e,r){e=tf.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Cu(e[e.length-1]%2===0):e[0]===7&&Cu(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};En.prototype.encodeCompressed=function(e){return this.encode(e,!0)};En.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};En.prototype.encode=function(e,r){return tf.encode(this._encode(r),e)};En.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};En.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};En.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};En.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};En.prototype._getBeta=function(){return null};En.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var d7=fn,Ct=hs,l1=qt,ja=Kl,p7=d7.assert;function wn(t){ja.call(this,"short",t),this.a=new Ct(t.a,16).toRed(this.red),this.b=new Ct(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}l1(wn,ja);var g7=wn;wn.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Ct(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Ct(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],p7(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Ct(a.a,16),b:new Ct(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};wn.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Ct.mont(e),n=new Ct(2).toRed(r).redInvm(),i=n.redNeg(),s=new Ct(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};wn.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new Ct(1),o=new Ct(0),a=new Ct(0),c=new Ct(1),l,f,h,S,P,M,H,$=0,q,C;n.cmpn(0)!==0;){var V=i.div(n);q=i.sub(V.mul(n)),C=a.sub(V.mul(s));var K=c.sub(V.mul(o));if(!h&&q.cmp(r)<0)l=H.neg(),f=s,h=q.neg(),S=C;else if(h&&++$===2)break;H=q,i=n,n=q,a=s,s=C,c=o,o=K}P=q.neg(),M=C;var U=h.sqr().add(S.sqr()),G=P.sqr().add(M.sqr());return G.cmp(U)>=0&&(P=l,M=f),h.negative&&(h=h.neg(),S=S.neg()),P.negative&&(P=P.neg(),M=M.neg()),[{a:h,b:S},{a:P,b:M}]};wn.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),l=s.mul(n.b),f=o.mul(i.b),h=e.sub(a).sub(c),S=l.add(f).neg();return{k1:h,k2:S}};wn.prototype.pointFromX=function(e,r){e=new Ct(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};wn.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};wn.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=c,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var f=this._wnafMulAdd(1,i,s,o*2,n),h=0;h<o*2;h++)i[h]=null,s[h]=null;return f};function cr(t,e,r,n){ja.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ct(e,16),this.y=new Ct(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}l1(cr,ja.BasePoint);wn.prototype.point=function(e,r,n){return new cr(this,e,r,n)};wn.prototype.pointFromJSON=function(e,r){return cr.fromJSON(this,e,r)};cr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};cr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};cr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};cr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};cr.prototype.isInfinity=function(){return this.inf};cr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};cr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};cr.prototype.getX=function(){return this.x.fromRed()};cr.prototype.getY=function(){return this.y.fromRed()};cr.prototype.mul=function(e){return e=new Ct(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};cr.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};cr.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};cr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};cr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};cr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function dr(t,e,r,n){ja.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ct(0)):(this.x=new Ct(e,16),this.y=new Ct(r,16),this.z=new Ct(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}l1(dr,ja.BasePoint);wn.prototype.jpoint=function(e,r,n){return new dr(this,e,r,n)};dr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};dr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};dr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=c.redSqr(),h=f.redMul(c),S=i.redMul(f),P=l.redSqr().redIAdd(h).redISub(S).redISub(S),M=l.redMul(S.redISub(P)).redISub(o.redMul(h)),H=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(P,M,H)};dr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),f=l.redMul(a),h=n.redMul(l),S=c.redSqr().redIAdd(f).redISub(h).redISub(h),P=c.redMul(h.redISub(S)).redISub(s.redMul(f)),M=this.z.redMul(a);return this.curve.jpoint(S,P,M)};dr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),f=a.redAdd(a);for(r=0;r<e;r++){var h=o.redSqr(),S=f.redSqr(),P=S.redSqr(),M=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(l)),H=o.redMul(S),$=M.redSqr().redISub(H.redAdd(H)),q=H.redISub($),C=M.redMul(q);C=C.redIAdd(C).redISub(P);var V=f.redMul(c);r+1<e&&(l=l.redMul(P)),o=$,c=V,f=C}return this.curve.jpoint(o,f.redMul(s),c)};dr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};dr.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),l=c.redSqr().redISub(a).redISub(a),f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),e=l,r=c.redMul(a.redISub(l)).redISub(f),n=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),S=this.y.redSqr(),P=S.redSqr(),M=this.x.redAdd(S).redSqr().redISub(h).redISub(P);M=M.redIAdd(M);var H=h.redAdd(h).redIAdd(h),$=H.redSqr(),q=P.redIAdd(P);q=q.redIAdd(q),q=q.redIAdd(q),e=$.redISub(M).redISub(M),r=H.redMul(M.redISub(e)).redISub(q),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};dr.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),r=c.redMul(a.redISub(l)).redISub(f),n=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),S=this.y.redSqr(),P=this.x.redMul(S),M=this.x.redSub(h).redMul(this.x.redAdd(h));M=M.redAdd(M).redIAdd(M);var H=P.redIAdd(P);H=H.redIAdd(H);var $=H.redAdd(H);e=M.redSqr().redISub($),n=this.y.redAdd(this.z).redSqr().redISub(S).redISub(h);var q=S.redSqr();q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q),r=M.redMul(H.redISub(e)).redISub(q)}return this.curve.jpoint(e,r,n)};dr.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var f=l.redMul(a),h=c.redSqr().redISub(f.redAdd(f)),S=f.redISub(h),P=a.redSqr();P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var M=c.redMul(S).redISub(P),H=n.redAdd(n).redMul(i);return this.curve.jpoint(h,M,H)};dr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var f=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),h=r.redMul(f);h=h.redIAdd(h),h=h.redIAdd(h);var S=this.x.redMul(c).redISub(h);S=S.redIAdd(S),S=S.redIAdd(S);var P=this.y.redMul(f.redMul(l.redISub(f)).redISub(a.redMul(c)));P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var M=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(S,P,M)};dr.prototype.mul=function(e,r){return e=new Ct(e,r),this.curve._wnafMul(this,e)};dr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};dr.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};dr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};dr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var ta=hs,xE=qt,Hl=Kl,b7=fn;function Ga(t){Hl.call(this,"mont",t),this.a=new ta(t.a,16).toRed(this.red),this.b=new ta(t.b,16).toRed(this.red),this.i4=new ta(4).toRed(this.red).redInvm(),this.two=new ta(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}xE(Ga,Hl);var v7=Ga;Ga.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function sr(t,e,r){Hl.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new ta(e,16),this.z=new ta(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}xE(sr,Hl.BasePoint);Ga.prototype.decodePoint=function(e,r){return this.point(b7.toArray(e,r),1)};Ga.prototype.point=function(e,r){return new sr(this,e,r)};Ga.prototype.pointFromJSON=function(e){return sr.fromJSON(this,e)};sr.prototype.precompute=function(){};sr.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};sr.fromJSON=function(e,r){return new sr(e,r[0],r[1]||e.one)};sr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};sr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};sr.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),o=r.redMul(i),a=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};sr.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};sr.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(n),c=s.redMul(i),l=r.z.redMul(a.redAdd(c).redSqr()),f=r.x.redMul(a.redISub(c).redSqr());return this.curve.point(l,f)};sr.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};sr.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};sr.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};sr.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};sr.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};sr.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var m7=fn,Qi=hs,SE=qt,jl=Kl,y7=m7.assert;function Si(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,jl.call(this,"edwards",t),this.a=new Qi(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Qi(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Qi(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),y7(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}SE(Si,jl);var E7=Si;Si.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Si.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Si.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};Si.prototype.pointFromX=function(e,r){e=new Qi(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var c=a.fromRed().isOdd();return(r&&!c||!r&&c)&&(a=a.redNeg()),this.point(e,a)};Si.prototype.pointFromY=function(e,r){e=new Qi(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)};Si.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function xt(t,e,r,n,i){jl.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Qi(e,16),this.y=new Qi(r,16),this.z=n?new Qi(n,16):this.curve.one,this.t=i&&new Qi(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}SE(xt,jl.BasePoint);Si.prototype.pointFromJSON=function(e){return xt.fromJSON(this,e)};Si.prototype.point=function(e,r,n,i){return new xt(this,e,r,n,i)};xt.fromJSON=function(e,r){return new xt(e,r[0],r[1],r[2])};xt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};xt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};xt.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=i.redAdd(r),a=o.redSub(n),c=i.redSub(r),l=s.redMul(a),f=o.redMul(c),h=s.redMul(c),S=a.redMul(o);return this.curve.point(l,f,S,h)};xt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,o,a,c,l;if(this.curve.twisted){a=this.curve._mulA(r);var f=a.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(f.redSub(this.curve.two)),s=f.redMul(a.redSub(n)),o=f.redSqr().redSub(f).redSub(f)):(c=this.z.redSqr(),l=f.redSub(c).redISub(c),i=e.redSub(r).redISub(n).redMul(l),s=f.redMul(a.redSub(n)),o=f.redMul(l))}else a=r.redAdd(n),c=this.curve._mulC(this.z).redSqr(),l=a.redSub(c).redSub(c),i=this.curve._mulC(e.redISub(a)).redMul(l),s=this.curve._mulC(a).redMul(r.redISub(n)),o=a.redMul(l);return this.curve.point(i,s,o)};xt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};xt.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(r),a=s.redSub(i),c=s.redAdd(i),l=n.redAdd(r),f=o.redMul(a),h=c.redMul(l),S=o.redMul(l),P=a.redMul(c);return this.curve.point(f,h,P,S)};xt.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),a=n.redSub(o),c=n.redAdd(o),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),f=r.redMul(a).redMul(l),h,S;return this.curve.twisted?(h=r.redMul(c).redMul(s.redSub(this.curve._mulA(i))),S=a.redMul(c)):(h=r.redMul(c).redMul(s.redSub(i)),S=this.curve._mulC(a).redMul(c)),this.curve.point(f,h,S)};xt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};xt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};xt.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};xt.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};xt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};xt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};xt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};xt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};xt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};xt.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};xt.prototype.toP=xt.prototype.normalize;xt.prototype.mixedAdd=xt.prototype.add;(function(t){var e=t;e.base=Kl,e.short=g7,e.mont=v7,e.edwards=E7})(u1);var Gl={},ql={},rt={},w7=Do,_7=qt;rt.inherits=_7;function A7(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function x7(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):A7(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}rt.toArray=x7;function S7(t){for(var e="",r=0;r<t.length;r++)e+=TE(t[r].toString(16));return e}rt.toHex=S7;function RE(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}rt.htonl=RE;function R7(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=RE(i)),r+=OE(i.toString(16))}return r}rt.toHex32=R7;function TE(t){return t.length===1?"0"+t:t}rt.zero2=TE;function OE(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}rt.zero8=OE;function T7(t,e,r,n){var i=r-e;w7(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var c;n==="big"?c=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:c=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=c>>>0}return s}rt.join32=T7;function O7(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}rt.split32=O7;function I7(t,e){return t>>>e|t<<32-e}rt.rotr32=I7;function P7(t,e){return t<<e|t>>>32-e}rt.rotl32=P7;function N7(t,e){return t+e>>>0}rt.sum32=N7;function L7(t,e,r){return t+e+r>>>0}rt.sum32_3=L7;function M7(t,e,r,n){return t+e+r+n>>>0}rt.sum32_4=M7;function C7(t,e,r,n,i){return t+e+r+n+i>>>0}rt.sum32_5=C7;function B7(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o}rt.sum64=B7;function k7(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}rt.sum64_hi=k7;function D7(t,e,r,n){var i=e+n;return i>>>0}rt.sum64_lo=D7;function U7(t,e,r,n,i,s,o,a){var c=0,l=e;l=l+n>>>0,c+=l<e?1:0,l=l+s>>>0,c+=l<s?1:0,l=l+a>>>0,c+=l<a?1:0;var f=t+r+i+o+c;return f>>>0}rt.sum64_4_hi=U7;function F7(t,e,r,n,i,s,o,a){var c=e+n+s+a;return c>>>0}rt.sum64_4_lo=F7;function K7(t,e,r,n,i,s,o,a,c,l){var f=0,h=e;h=h+n>>>0,f+=h<e?1:0,h=h+s>>>0,f+=h<s?1:0,h=h+a>>>0,f+=h<a?1:0,h=h+l>>>0,f+=h<l?1:0;var S=t+r+i+o+c+f;return S>>>0}rt.sum64_5_hi=K7;function H7(t,e,r,n,i,s,o,a,c,l){var f=e+n+s+a+l;return f>>>0}rt.sum64_5_lo=H7;function j7(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}rt.rotr64_hi=j7;function G7(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}rt.rotr64_lo=G7;function q7(t,e,r){return t>>>r}rt.shr64_hi=q7;function V7(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}rt.shr64_lo=V7;var qa={},sv=rt,$7=Do;function Vl(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}qa.BlockHash=Vl;Vl.prototype.update=function(e,r){if(e=sv.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=sv.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};Vl.prototype.digest=function(e){return this.update(this._pad()),$7(this.pending===null),this._digest(e)};Vl.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var Va={},Ri={},z7=rt,ui=z7.rotr32;function W7(t,e,r,n){if(t===0)return IE(e,r,n);if(t===1||t===3)return NE(e,r,n);if(t===2)return PE(e,r,n)}Ri.ft_1=W7;function IE(t,e,r){return t&e^~t&r}Ri.ch32=IE;function PE(t,e,r){return t&e^t&r^e&r}Ri.maj32=PE;function NE(t,e,r){return t^e^r}Ri.p32=NE;function X7(t){return ui(t,2)^ui(t,13)^ui(t,22)}Ri.s0_256=X7;function J7(t){return ui(t,6)^ui(t,11)^ui(t,25)}Ri.s1_256=J7;function Y7(t){return ui(t,7)^ui(t,18)^t>>>3}Ri.g0_256=Y7;function Q7(t){return ui(t,17)^ui(t,19)^t>>>10}Ri.g1_256=Q7;var Ea=rt,Z7=qa,eO=Ri,i0=Ea.rotl32,lc=Ea.sum32,tO=Ea.sum32_5,rO=eO.ft_1,LE=Z7.BlockHash,nO=[1518500249,1859775393,2400959708,3395469782];function vi(){if(!(this instanceof vi))return new vi;LE.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Ea.inherits(vi,LE);var iO=vi;vi.blockSize=512;vi.outSize=160;vi.hmacStrength=80;vi.padLength=64;vi.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=i0(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4];for(i=0;i<n.length;i++){var f=~~(i/20),h=tO(i0(s,5),rO(f,o,a,c),l,n[i],nO[f]);l=c,c=a,a=i0(o,30),o=s,s=h}this.h[0]=lc(this.h[0],s),this.h[1]=lc(this.h[1],o),this.h[2]=lc(this.h[2],a),this.h[3]=lc(this.h[3],c),this.h[4]=lc(this.h[4],l)};vi.prototype._digest=function(e){return e==="hex"?Ea.toHex32(this.h,"big"):Ea.split32(this.h,"big")};var wa=rt,sO=qa,$a=Ri,oO=Do,Tn=wa.sum32,aO=wa.sum32_4,cO=wa.sum32_5,fO=$a.ch32,uO=$a.maj32,lO=$a.s0_256,hO=$a.s1_256,dO=$a.g0_256,pO=$a.g1_256,ME=sO.BlockHash,gO=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function mi(){if(!(this instanceof mi))return new mi;ME.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=gO,this.W=new Array(64)}wa.inherits(mi,ME);var CE=mi;mi.blockSize=512;mi.outSize=256;mi.hmacStrength=192;mi.padLength=64;mi.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=aO(pO(n[i-2]),n[i-7],dO(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4],f=this.h[5],h=this.h[6],S=this.h[7];for(oO(this.k.length===n.length),i=0;i<n.length;i++){var P=cO(S,hO(l),fO(l,f,h),this.k[i],n[i]),M=Tn(lO(s),uO(s,o,a));S=h,h=f,f=l,l=Tn(c,P),c=a,a=o,o=s,s=Tn(P,M)}this.h[0]=Tn(this.h[0],s),this.h[1]=Tn(this.h[1],o),this.h[2]=Tn(this.h[2],a),this.h[3]=Tn(this.h[3],c),this.h[4]=Tn(this.h[4],l),this.h[5]=Tn(this.h[5],f),this.h[6]=Tn(this.h[6],h),this.h[7]=Tn(this.h[7],S)};mi.prototype._digest=function(e){return e==="hex"?wa.toHex32(this.h,"big"):wa.split32(this.h,"big")};var Q0=rt,BE=CE;function cs(){if(!(this instanceof cs))return new cs;BE.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Q0.inherits(cs,BE);var bO=cs;cs.blockSize=512;cs.outSize=224;cs.hmacStrength=192;cs.padLength=64;cs.prototype._digest=function(e){return e==="hex"?Q0.toHex32(this.h.slice(0,7),"big"):Q0.split32(this.h.slice(0,7),"big")};var Fr=rt,vO=qa,mO=Do,li=Fr.rotr64_hi,hi=Fr.rotr64_lo,kE=Fr.shr64_hi,DE=Fr.shr64_lo,ys=Fr.sum64,s0=Fr.sum64_hi,o0=Fr.sum64_lo,yO=Fr.sum64_4_hi,EO=Fr.sum64_4_lo,wO=Fr.sum64_5_hi,_O=Fr.sum64_5_lo,UE=vO.BlockHash,AO=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Mn(){if(!(this instanceof Mn))return new Mn;UE.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=AO,this.W=new Array(160)}Fr.inherits(Mn,UE);var FE=Mn;Mn.blockSize=1024;Mn.outSize=512;Mn.hmacStrength=192;Mn.padLength=128;Mn.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=CO(n[i-4],n[i-3]),o=BO(n[i-4],n[i-3]),a=n[i-14],c=n[i-13],l=LO(n[i-30],n[i-29]),f=MO(n[i-30],n[i-29]),h=n[i-32],S=n[i-31];n[i]=yO(s,o,a,c,l,f,h,S),n[i+1]=EO(s,o,a,c,l,f,h,S)}};Mn.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],l=this.h[5],f=this.h[6],h=this.h[7],S=this.h[8],P=this.h[9],M=this.h[10],H=this.h[11],$=this.h[12],q=this.h[13],C=this.h[14],V=this.h[15];mO(this.k.length===n.length);for(var K=0;K<n.length;K+=2){var U=C,G=V,y=PO(S,P),_=NO(S,P),I=xO(S,P,M,H,$),x=SO(S,P,M,H,$,q),E=this.k[K],u=this.k[K+1],d=n[K],g=n[K+1],b=wO(U,G,y,_,I,x,E,u,d,g),p=_O(U,G,y,_,I,x,E,u,d,g);U=OO(i,s),G=IO(i,s),y=RO(i,s,o,a,c),_=TO(i,s,o,a,c,l);var R=s0(U,G,y,_),O=o0(U,G,y,_);C=$,V=q,$=M,q=H,M=S,H=P,S=s0(f,h,b,p),P=o0(h,h,b,p),f=c,h=l,c=o,l=a,o=i,a=s,i=s0(b,p,R,O),s=o0(b,p,R,O)}ys(this.h,0,i,s),ys(this.h,2,o,a),ys(this.h,4,c,l),ys(this.h,6,f,h),ys(this.h,8,S,P),ys(this.h,10,M,H),ys(this.h,12,$,q),ys(this.h,14,C,V)};Mn.prototype._digest=function(e){return e==="hex"?Fr.toHex32(this.h,"big"):Fr.split32(this.h,"big")};function xO(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function SO(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function RO(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function TO(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function OO(t,e){var r=li(t,e,28),n=li(e,t,2),i=li(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function IO(t,e){var r=hi(t,e,28),n=hi(e,t,2),i=hi(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function PO(t,e){var r=li(t,e,14),n=li(t,e,18),i=li(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function NO(t,e){var r=hi(t,e,14),n=hi(t,e,18),i=hi(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function LO(t,e){var r=li(t,e,1),n=li(t,e,8),i=kE(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function MO(t,e){var r=hi(t,e,1),n=hi(t,e,8),i=DE(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function CO(t,e){var r=li(t,e,19),n=li(e,t,29),i=kE(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function BO(t,e){var r=hi(t,e,19),n=hi(e,t,29),i=DE(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var Z0=rt,KE=FE;function fs(){if(!(this instanceof fs))return new fs;KE.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Z0.inherits(fs,KE);var kO=fs;fs.blockSize=1024;fs.outSize=384;fs.hmacStrength=192;fs.padLength=128;fs.prototype._digest=function(e){return e==="hex"?Z0.toHex32(this.h.slice(0,12),"big"):Z0.split32(this.h.slice(0,12),"big")};Va.sha1=iO;Va.sha224=bO;Va.sha256=CE;Va.sha384=kO;Va.sha512=FE;var HE={},Oo=rt,DO=qa,jf=Oo.rotl32,ov=Oo.sum32,hc=Oo.sum32_3,av=Oo.sum32_4,jE=DO.BlockHash;function yi(){if(!(this instanceof yi))return new yi;jE.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Oo.inherits(yi,jE);HE.ripemd160=yi;yi.blockSize=512;yi.outSize=160;yi.hmacStrength=192;yi.padLength=64;yi.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=n,l=i,f=s,h=o,S=a,P=0;P<80;P++){var M=ov(jf(av(n,cv(P,i,s,o),e[KO[P]+r],UO(P)),jO[P]),a);n=a,a=o,o=jf(s,10),s=i,i=M,M=ov(jf(av(c,cv(79-P,l,f,h),e[HO[P]+r],FO(P)),GO[P]),S),c=S,S=h,h=jf(f,10),f=l,l=M}M=hc(this.h[1],s,h),this.h[1]=hc(this.h[2],o,S),this.h[2]=hc(this.h[3],a,c),this.h[3]=hc(this.h[4],n,l),this.h[4]=hc(this.h[0],i,f),this.h[0]=M};yi.prototype._digest=function(e){return e==="hex"?Oo.toHex32(this.h,"little"):Oo.split32(this.h,"little")};function cv(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function UO(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function FO(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var KO=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],HO=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],jO=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],GO=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],qO=rt,VO=Do;function _a(t,e,r){if(!(this instanceof _a))return new _a(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(qO.toArray(e,r))}var $O=_a;_a.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),VO(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};_a.prototype.update=function(e,r){return this.inner.update(e,r),this};_a.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=rt,e.common=qa,e.sha=Va,e.ripemd=HE,e.hmac=$O,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(ql);var a0,fv;function zO(){return fv||(fv=1,a0={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),a0}(function(t){var e=t,r=ql,n=u1,i=fn,s=i.assert;function o(l){l.type==="short"?this.curve=new n.short(l):l.type==="edwards"?this.curve=new n.edwards(l):this.curve=new n.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function a(l,f){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var h=new o(f);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:h}),h}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=zO()}catch{c=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})})(Gl);var WO=ql,_o=c1,GE=Do;function js(t){if(!(this instanceof js))return new js(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=_o.toArray(t.entropy,t.entropyEnc||"hex"),r=_o.toArray(t.nonce,t.nonceEnc||"hex"),n=_o.toArray(t.pers,t.persEnc||"hex");GE(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var XO=js;js.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};js.prototype._hmac=function(){return new WO.hmac(this.hash,this.K)};js.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};js.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=_o.toArray(e,r),n=_o.toArray(n,i),GE(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};js.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=_o.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,_o.encode(o,r)};var JO=hs,YO=fn,ep=YO.assert;function Tr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var QO=Tr;Tr.fromPublic=function(e,r,n){return r instanceof Tr?r:new Tr(e,{pub:r,pubEnc:n})};Tr.fromPrivate=function(e,r,n){return r instanceof Tr?r:new Tr(e,{priv:r,privEnc:n})};Tr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Tr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Tr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Tr.prototype._importPrivate=function(e,r){this.priv=new JO(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Tr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?ep(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&ep(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Tr.prototype.derive=function(e){return e.validate()||ep(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Tr.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Tr.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Tr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Bu=hs,h1=fn,ZO=h1.assert;function $l(t,e){if(t instanceof $l)return t;this._importDER(t,e)||(ZO(t.r&&t.s,"Signature without r or s"),this.r=new Bu(t.r,16),this.s=new Bu(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var eI=$l;function tI(){this.place=0}function c0(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function uv(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}$l.prototype._importDER=function(e,r){e=h1.toArray(e,r);var n=new tI;if(e[n.place++]!==48)return!1;var i=c0(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=c0(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=c0(e,n);if(a===!1||e.length!==a+n.place)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Bu(o),this.s=new Bu(c),this.recoveryParam=null,!0};function f0(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}$l.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=uv(r),n=uv(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];f0(i,r.length),i=i.concat(r),i.push(2),f0(i,n.length);var s=i.concat(n),o=[48];return f0(o,s.length),o=o.concat(s),h1.encode(o,e)};var Ao=hs,qE=XO,rI=fn,u0=Gl,nI=AE,VE=rI.assert,d1=QO,zl=eI;function mn(t){if(!(this instanceof mn))return new mn(t);typeof t=="string"&&(VE(Object.prototype.hasOwnProperty.call(u0,t),"Unknown curve "+t),t=u0[t]),t instanceof u0.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var iI=mn;mn.prototype.keyPair=function(e){return new d1(this,e)};mn.prototype.keyFromPrivate=function(e,r){return d1.fromPrivate(this,e,r)};mn.prototype.keyFromPublic=function(e,r){return d1.fromPublic(this,e,r)};mn.prototype.genKeyPair=function(e){e||(e={});for(var r=new qE({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||nI(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Ao(2));;){var s=new Ao(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};mn.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};mn.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new Ao(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),c=new qE({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new Ao(1)),f=0;;f++){var h=i.k?i.k(f):new Ao(c.generate(this.n.byteLength()));if(h=this._truncateToN(h,!0),!(h.cmpn(1)<=0||h.cmp(l)>=0)){var S=this.g.mul(h);if(!S.isInfinity()){var P=S.getX(),M=P.umod(this.n);if(M.cmpn(0)!==0){var H=h.invm(this.n).mul(M.mul(r.getPrivate()).iadd(e));if(H=H.umod(this.n),H.cmpn(0)!==0){var $=(S.getY().isOdd()?1:0)|(P.cmp(M)!==0?2:0);return i.canonical&&H.cmp(this.nh)>0&&(H=this.n.sub(H),$^=1),new zl({r:M,s:H,recoveryParam:$})}}}}}};mn.prototype.verify=function(e,r,n,i){e=this._truncateToN(new Ao(e,16)),n=this.keyFromPublic(n,i),r=new zl(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),c=a.mul(e).umod(this.n),l=a.mul(s).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(c,n.getPublic(),l),f.isInfinity()?!1:f.eqXToP(s)):(f=this.g.mulAdd(c,n.getPublic(),l),f.isInfinity()?!1:f.getX().umod(this.n).cmp(s)===0)};mn.prototype.recoverPubKey=function(t,e,r,n){VE((3&r)===r,"The recovery param is more than two bits"),e=new zl(e,n);var i=this.n,s=new Ao(t),o=e.r,a=e.s,c=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var f=e.r.invm(i),h=i.sub(s).mul(f).umod(i),S=a.mul(f).umod(i);return this.g.mulAdd(h,o,S)};mn.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new zl(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var rf=fn,$E=rf.assert,lv=rf.parseBytes,za=rf.cachedProperty;function ir(t,e){this.eddsa=t,this._secret=lv(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=lv(e.pub)}ir.fromPublic=function(e,r){return r instanceof ir?r:new ir(e,{pub:r})};ir.fromSecret=function(e,r){return r instanceof ir?r:new ir(e,{secret:r})};ir.prototype.secret=function(){return this._secret};za(ir,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});za(ir,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});za(ir,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});za(ir,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});za(ir,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});za(ir,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});ir.prototype.sign=function(e){return $E(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};ir.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};ir.prototype.getSecret=function(e){return $E(this._secret,"KeyPair is public only"),rf.encode(this.secret(),e)};ir.prototype.getPublic=function(e){return rf.encode(this.pubBytes(),e)};var sI=ir,oI=hs,Wl=fn,aI=Wl.assert,Xl=Wl.cachedProperty,cI=Wl.parseBytes;function Uo(t,e){this.eddsa=t,typeof e!="object"&&(e=cI(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),aI(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof oI&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Xl(Uo,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Xl(Uo,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Xl(Uo,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Xl(Uo,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Uo.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Uo.prototype.toHex=function(){return Wl.encode(this.toBytes(),"hex").toUpperCase()};var fI=Uo,uI=ql,lI=Gl,Aa=fn,hI=Aa.assert,zE=Aa.parseBytes,WE=sI,hv=fI;function Kr(t){if(hI(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Kr))return new Kr(t);t=lI[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=uI.sha512}var dI=Kr;Kr.prototype.sign=function(e,r){e=zE(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),o=this.encodePoint(s),a=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),c=i.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:o})};Kr.prototype.verify=function(e,r,n){e=zE(e),r=this.makeSignature(r);var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(i.pub().mul(s));return a.eq(o)};Kr.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return Aa.intFromLE(e.digest()).umod(this.curve.n)};Kr.prototype.keyFromPublic=function(e){return WE.fromPublic(this,e)};Kr.prototype.keyFromSecret=function(e){return WE.fromSecret(this,e)};Kr.prototype.makeSignature=function(e){return e instanceof hv?e:new hv(this,e)};Kr.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};Kr.prototype.decodePoint=function(e){e=Aa.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,s=Aa.intFromLE(n);return this.curve.pointFromY(s,i)};Kr.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Kr.prototype.decodeInt=function(e){return Aa.intFromLE(e)};Kr.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=l7.version,e.utils=fn,e.rand=AE,e.curve=u1,e.curves=Gl,e.ec=iI,e.eddsa=dI})(J9);var ne;(function(t){t.TZ1="tz1",t.TZ2="tz2",t.TZ3="tz3",t.TZ4="tz4",t.KT="KT",t.KT1="KT1",t.EDSK2="edsk2",t.SPSK="spsk",t.P2SK="p2sk",t.EDPK="edpk",t.SPPK="sppk",t.P2PK="p2pk",t.BLPK="BLpk",t.EDESK="edesk",t.SPESK="spesk",t.P2ESK="p2esk",t.EDSK="edsk",t.EDSIG="edsig",t.SPSIG="spsig",t.P2SIG="p2sig",t.SIG="sig",t.NET="Net",t.NCE="nce",t.B="B",t.O="o",t.LO="Lo",t.LLO="LLo",t.P="P",t.CO="Co",t.ID="id",t.EXPR="expr",t.TZ="TZ",t.VH="vh",t.SASK="sask",t.ZET1="zet1",t.TXR1="txr1",t.TXI="txi",t.TXM="txm",t.TXC="txc",t.TXMR="txmr",t.TXRL="txM",t.TXW="txw"})(ne||(ne={}));const Sr={[ne.TZ1]:new Uint8Array([6,161,159]),[ne.TZ2]:new Uint8Array([6,161,161]),[ne.TZ3]:new Uint8Array([6,161,164]),[ne.TZ4]:new Uint8Array([6,161,166]),[ne.KT]:new Uint8Array([2,90,121]),[ne.KT1]:new Uint8Array([2,90,121]),[ne.EDSK]:new Uint8Array([43,246,78,7]),[ne.EDSK2]:new Uint8Array([13,15,58,7]),[ne.SPSK]:new Uint8Array([17,162,224,201]),[ne.P2SK]:new Uint8Array([16,81,238,189]),[ne.EDPK]:new Uint8Array([13,15,37,217]),[ne.SPPK]:new Uint8Array([3,254,226,86]),[ne.P2PK]:new Uint8Array([3,178,139,127]),[ne.BLPK]:new Uint8Array([6,149,135,204]),[ne.EDESK]:new Uint8Array([7,90,60,179,41]),[ne.SPESK]:new Uint8Array([9,237,241,174,150]),[ne.P2ESK]:new Uint8Array([9,48,57,115,171]),[ne.EDSIG]:new Uint8Array([9,245,205,134,18]),[ne.SPSIG]:new Uint8Array([13,115,101,19,63]),[ne.P2SIG]:new Uint8Array([54,240,44,52]),[ne.SIG]:new Uint8Array([4,130,43]),[ne.NET]:new Uint8Array([87,82,0]),[ne.NCE]:new Uint8Array([69,220,169]),[ne.B]:new Uint8Array([1,52]),[ne.O]:new Uint8Array([5,116]),[ne.LO]:new Uint8Array([133,233]),[ne.LLO]:new Uint8Array([29,159,109]),[ne.P]:new Uint8Array([2,170]),[ne.CO]:new Uint8Array([79,179]),[ne.ID]:new Uint8Array([153,103]),[ne.EXPR]:new Uint8Array([13,44,64,27]),[ne.TZ]:new Uint8Array([2,90,121]),[ne.VH]:new Uint8Array([1,106,242]),[ne.SASK]:new Uint8Array([11,237,20,92]),[ne.ZET1]:new Uint8Array([18,71,40,223]),[ne.TXR1]:new Uint8Array([1,128,120,31]),[ne.TXI]:new Uint8Array([79,148,196]),[ne.TXM]:new Uint8Array([79,149,30]),[ne.TXC]:new Uint8Array([79,148,17]),[ne.TXMR]:new Uint8Array([18,7,206,87]),[ne.TXRL]:new Uint8Array([79,146,82]),[ne.TXW]:new Uint8Array([79,150,72])},XE={[ne.TZ1]:20,[ne.TZ2]:20,[ne.TZ3]:20,[ne.TZ4]:20,[ne.KT]:20,[ne.KT1]:20,[ne.EDPK]:32,[ne.SPPK]:33,[ne.P2PK]:33,[ne.BLPK]:48,[ne.EDSIG]:64,[ne.SPSIG]:64,[ne.P2SIG]:64,[ne.SIG]:64,[ne.NET]:4,[ne.B]:32,[ne.P]:32,[ne.O]:32,[ne.VH]:32,[ne.SASK]:169,[ne.ZET1]:43,[ne.TXR1]:20,[ne.TXI]:32,[ne.TXM]:32,[ne.TXC]:32,[ne.TXMR]:32,[ne.TXRL]:32,[ne.TXW]:32};class JE extends Error{constructor(e,r){super(),this.publicKey=e,this.name="InvalidPublicKeyError";const n=`The public key '${e}' is invalid.`;this.message=r?`${n} ${r}`:n}}class Zi extends Error{constructor(e){super(`The contract address '${e}' is invalid`),this.contractAddress=e,this.name="InvalidContractAddressError"}}class wt extends Error{constructor(e,r){super(),this.address=e,this.name="InvalidAddressError";const n=`The address '${e}' is invalid.`;this.message=r?`${n} ${r}`:n}}class pI extends Error{constructor(e){super(`The chain id '${e}' is invalid`),this.chainId=e,this.name="InvalidChainIdError"}}class p1 extends Error{constructor(e){super(`The public key hash '${e}' is invalid`),this.keyHash=e,this.name="InvalidKeyHashError"}}class YE extends Error{constructor(e){super(`The operation hash '${e}' is invalid`),this.operationHash=e,this.name="InvalidOperationHashError"}}class us extends Error{constructor(e){super(`The operation kind '${e}' is unsupported`),this.operationKind=e,this.name="InvalidOperationKindError"}}class g1 extends Error{constructor(e){super(e),this.message=e,this.name="DeprecationError"}}class gI extends Error{constructor(e,r){super(`Unable to convert ${e} to a ${r}`),this.value=e,this.desiredType=r,this.name="ValueConversionError"}}var _e;(function(t){t[t.NO_PREFIX_MATCHED=0]="NO_PREFIX_MATCHED",t[t.INVALID_CHECKSUM=1]="INVALID_CHECKSUM",t[t.INVALID_LENGTH=2]="INVALID_LENGTH",t[t.VALID=3]="VALID"})(_e||(_e={}));function bI(t){return typeof t!="string"?!1:t in Sr}function ro(t,e){const r=new RegExp(`^(${e.join("|")})`).exec(t);if(!r||r.length===0)return _e.NO_PREFIX_MATCHED;const n=r[0];if(!bI(n))return _e.NO_PREFIX_MATCHED;const i=/^(KT1\w{33})(%(.*))?/.exec(t);i&&(t=i[1]);let s=Jc.decodeUnsafe(t);return s?(s=s.slice(Sr[n].length),s.length!==XE[n]?_e.INVALID_LENGTH:_e.VALID):_e.INVALID_CHECKSUM}const QE=[ne.TZ1,ne.TZ2,ne.TZ3,ne.TZ4],ZE=[ne.KT1,ne.TXR1],vI=[ne.EDSIG,ne.P2SIG,ne.SPSIG,ne.SIG],mI=[ne.EDPK,ne.SPPK,ne.P2PK,ne.BLPK],yI=[ne.O];ne.P;const EI=[ne.B];function vt(t){return ro(t,[...QE,...ZE])}function ew(t){return ro(t,[ne.NET])}function es(t){return ro(t,ZE)}function b1(t){return ro(t,QE)}function wI(t){return ro(t,vI)}function _I(t){return ro(t,mI)}function tw(t){return ro(t,yI)}function AI(t){return ro(t,EI)}const xI=6,SI=3;function dv(t){switch(t){case"tz":return xI;case"mtz":return SI;case"mutez":default:return 0}}function v1(t="mutez",e="mutez",r){const n=new ve(r);return n.isNaN()?r:n.multipliedBy(Math.pow(10,dv(t))).dividedBy(Math.pow(10,dv(e)))}function RI(t){const e=X9.blake2b(PI(t),void 0,32);return Ds(e,Sr.expr)}function Ds(t,e){const r=typeof t=="string"?Uint8Array.from(Ks.Buffer.from(t,"hex")):t,n=new Uint8Array(e.length+r.length);return n.set(e),n.set(r,e.length),Jc.encode(Ks.Buffer.from(n.buffer))}const rw=(t,e)=>Jc.decode(t).slice(e.length);function TI(t){const e=Jc.decode(t),r={[Sr.tz1.toString()]:"0000",[Sr.tz2.toString()]:"0001",[Sr.tz3.toString()]:"0002"},n={[Sr.txr1.toString()]:"02"},i=r[new Uint8Array(e.slice(0,3)).toString()],s=n[new Uint8Array(e.slice(0,4)).toString()];if(i){const o=Sc(e.slice(3));return i+o}else if(s){const o=Sc(e.slice(4));return s+o+"00"}else return"01"+Sc(e.slice(3,42))+"00"}function OI(t){const e=Jc.decode(t);return Sc(e.slice(3,42))}function tp(t){if(t.substring(0,2)==="00"){const e={"0000":Sr.tz1,"0001":Sr.tz2,"0002":Sr.tz3};return Ds(t.substring(4),e[t.substring(0,4)])}else if(t.substring(0,2)==="02")return Ds(t.substring(2,t.length-2),Sr.txr1);return Ds(t.substring(2,42),Sr.KT)}function pv(t){return Ds(t,Sr.tz4)}function II(t){if(t[0]==="0"){const e={"00":new Uint8Array([13,15,37,217]),"01":new Uint8Array([3,254,226,86]),"02":new Uint8Array([3,178,139,127])};return Ds(t.substring(2),e[t.substring(0,2)])}}function gv(t){if(t[0]==="0"){const e={"00":new Uint8Array([6,161,159]),"01":new Uint8Array([6,161,161]),"02":new Uint8Array([6,161,164])};return Ds(t.substring(2),e[t.substring(0,2)])}}const PI=t=>{const e=t.match(/[\da-f]{2}/gi);if(e)return new Uint8Array(e.map(r=>parseInt(r,16)));throw new gI(t,"Uint8Array")},Sc=t=>{const e=new Uint8Array(t),r=[];return e.forEach(n=>{const s=`00${n.toString(16)}`.slice(-2);r.push(s)}),r.join("")};function bv(t){return t.startsWith("0x")?t.slice(2):t}function Gf(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Ne(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}const NI="main",Ce={block:"head"};var vv;(function(t){t.GET_BAKING_RIGHTS="getBakingRights",t.GET_BALLOTS="getBallots",t.GET_BALLOT_LIST="getBallotList",t.GET_BIG_MAP_KEY="getBigMapKey",t.GET_BIG_MAP_EXPR="getBigMapExpr",t.GET_BLOCK_HASH="getBlockHash",t.GET_BLOCK="getBlock",t.GET_BLOCK_HEADER="getBlockHeader",t.GET_BLOCK_METADATA="getBlockMetadata",t.GET_BALANCE="getBalance",t.GET_CHAIN_ID="getChainId",t.GET_CONSTANTS="getConstants",t.GET_CONTRACT="getContract",t.GET_CURRENT_PERIOD="getCurrentPeriod",t.GET_CURRENT_PROPOSAL="getCurrentProposal",t.GET_CURRENT_QUORUM="getCurrentQuorum",t.GET_DELEGATE="getDelegate",t.GET_DELEGATES="getDelegates",t.GET_VOTING_INFO="getVotingInfo",t.GET_ENDORSING_RIGHTS="getEndorsingRights",t.GET_ENTRYPOINTS="getEntrypoints",t.GET_LIVE_BLOCKS="getLiveBlocks",t.GET_MANAGER_KEY="getManagerKey",t.GET_NORMALIZED_SCRIPT="getNormalizedScript",t.GET_PROPOSALS="getProposals",t.GET_PROTOCOLS="getProtocols",t.GET_SAPLING_DIFF_BY_CONTRACT="getSaplingDiffByContract",t.GET_SAPLING_DIFF_BY_ID="getSaplingDiffById",t.GET_SCRIPT="getScript",t.GET_STORAGE="getStorage",t.GET_SUCCESSOR_PERIOD="getSuccessorPeriod",t.GET_TX_ROLLUP_INBOX="getTxRollupInbox",t.GET_TX_ROLLUP_STATE="getTxRollupState",t.GET_VOTES_LISTINGS="getVotesListings",t.PACK_DATA="packData",t.GET_STORAGE_USED_SPACE="getStorageUsedSpace",t.GET_STORAGE_PAID_SPACE="getStoragePaidSpace"})(vv||(vv={}));function vc(t,e){const r=Array.isArray(t);typeof e>"u"&&(e=Object.keys(t));const n=r?[]:{};return e.forEach(i=>{const s=t[i];let o;if(!(typeof s>"u")){if(Array.isArray(s)){o=vc(s),n[i]=o;return}o=new ve(s),n[i]=o}}),n}var mv;(function(t){t.TOO_LARGE="too large"})(mv||(mv={}));var yv;(function(t){t.BAKING_REWARDS="baking rewards",t.REWARDS="rewards",t.FEES="fees",t.DEPOSITS="deposits",t.LEGACY_REWARDS="legacy_rewards",t.LEGACY_FEES="legacy_fees",t.LEGACY_DEPOSITS="legacy_deposits",t.BLOCK_FEES="block fees",t.NONCE_REVELATION_REWARDS="nonce revelation rewards",t.DOUBLE_SIGNING_EVIDENCE_REWARDS="double signing evidence rewards",t.ENDORSING_REWARDS="endorsing rewards",t.BAKING_BONUSES="baking bonuses",t.STORAGE_FEES="storage fees",t.PUNISHMENTS="punishments",t.LOST_ENDORSING_REWARDS="lost endorsing rewards",t.SUBSIDY="subsidy",t.BURNED="burned",t.COMMITMENT="commitment",t.BOOTSTRAP="bootstrap",t.INVOICE="invoice",t.MINTED="minted",t.TX_ROLLUP_REJECTION_REWARDS="tx_rollup_rejection_rewards",t.TX_ROLLUP_REJECTION_PUNISHMENTS="tx_rollup_rejection_punishments",t.BONDS="bonds"})(yv||(yv={}));var ce;(function(t){t.ORIGINATION="origination",t.DELEGATION="delegation",t.REVEAL="reveal",t.TRANSACTION="transaction",t.ACTIVATION="activate_account",t.ENDORSEMENT="endorsement",t.PREENDORSEMENT="preendorsement",t.SET_DEPOSITS_LIMIT="set_deposits_limit",t.DOUBLE_PREENDORSEMENT_EVIDENCE="double_preendorsement_evidence",t.ENDORSEMENT_WITH_SLOT="endorsement_with_slot",t.SEED_NONCE_REVELATION="seed_nonce_revelation",t.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",t.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",t.PROPOSALS="proposals",t.BALLOT="ballot",t.FAILING_NOOP="failing_noop",t.REGISTER_GLOBAL_CONSTANT="register_global_constant",t.TX_ROLLUP_ORIGINATION="tx_rollup_origination",t.TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",t.TX_ROLLUP_COMMIT="tx_rollup_commit",t.TX_ROLLUP_RETURN_BOND="tx_rollup_return_bond",t.TX_ROLLUP_FINALIZE_COMMITMENT="tx_rollup_finalize_commitment",t.TX_ROLLUP_REMOVE_COMMITMENT="tx_rollup_remove_commitment",t.TX_ROLLUP_REJECTION="tx_rollup_rejection",t.TX_ROLLUP_DISPATCH_TICKETS="tx_rollup_dispatch_tickets",t.TRANSFER_TICKET="transfer_ticket",t.INCREASE_PAID_STORAGE="increase_paid_storage",t.UPDATE_CONSENSUS_KEY="update_consensus_key",t.DRAIN_DELEGATE="drain_delegate",t.VDF_REVELATION="vdf_revelation",t.EVENT="event",t.TICKET_UPDATES="ticket_updates"})(ce||(ce={}));class lu{constructor(e,r=NI,n=new B9){this.url=e,this.chain=r,this.httpBackend=n}createURL(e){return`${this.url.replace(/\/+$/g,"")}${e}`}validateAddress(e){if(vt(e)!==_e.VALID)throw new wt(e)}validateContract(e){if(es(e)!==_e.VALID)throw new wt(e)}getBlockHash({block:e}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/hash`),method:"GET"})})}getLiveBlocks({block:e}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/live_blocks`),method:"GET"})})}getBalance(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/balance`),method:"GET"});return new ve(n)})}getStorage(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage`),method:"GET"})})}getScript(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/script`),method:"GET"})})}getNormalizedScript(e,r={unparsing_mode:"Readable"},{block:n}=Ce){return Ne(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${e}/script/normalized`),method:"POST"},r)})}getContract(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}`),method:"GET"});return Object.assign(Object.assign({},n),{balance:new ve(n.balance)})})}getManagerKey(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return this.validateAddress(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/manager_key`),method:"GET"})})}getDelegate(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){this.validateAddress(e);let n;try{n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/delegate`),method:"GET"})}catch(i){if(i instanceof Ha&&i.status===Nc.NOT_FOUND)n=null;else throw i}return n})}getBigMapKey(e,r,{block:n}=Ce){return Ne(this,void 0,void 0,function*(){return this.validateAddress(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${e}/big_map_get`),method:"POST"},r)})}getBigMapExpr(e,r,{block:n}=Ce){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/big_maps/${e}/${r}`),method:"GET"})})}getDelegates(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/delegates/${e}`),method:"GET"}),i=vc(n,["balance","full_balance","current_frozen_deposits","frozen_deposits","frozen_balance","frozen_deposits_limit","staking_balance","delegated_balance","voting_power"]);return Object.assign(Object.assign(Object.assign({},n),i),{frozen_balance_by_cycle:n.frozen_balance_by_cycle?n.frozen_balance_by_cycle.map(s=>{var{deposit:o,deposits:a,fees:c,rewards:l}=s,f=Gf(s,["deposit","deposits","fees","rewards"]);const h=vc({deposit:o,deposits:a,fees:c,rewards:l},["deposit","deposits","fees","rewards"]);return Object.assign(Object.assign({},f),{deposit:h.deposit,deposits:h.deposits,fees:h.fees,rewards:h.rewards})}):void 0})})}getVotingInfo(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return this.validateAddress(e),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/delegates/${e}/voting_info`),method:"GET"})})}getConstants({block:e}=Ce){return Ne(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/context/constants`),method:"GET"}),n=vc(r,["time_between_blocks","hard_gas_limit_per_operation","hard_gas_limit_per_block","proof_of_work_threshold","tokens_per_roll","seed_nonce_revelation_tip","block_security_deposit","endorsement_security_deposit","block_reward","endorsement_reward","cost_per_byte","hard_storage_limit_per_operation","test_chain_duration","baking_reward_per_endorsement","delay_per_missing_endorsement","minimal_block_delay","liquidity_baking_subsidy","cache_layout","baking_reward_fixed_portion","baking_reward_bonus_per_slot","endorsing_reward_per_slot","double_baking_punishment","delay_increment_per_round","tx_rollup_commitment_bond","vdf_difficulty","sc_rollup_stake_amount","minimal_stake"]);return Object.assign(Object.assign({},r),n)})}getBlock({block:e}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}`),method:"GET"})})}getBlockHeader({block:e}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/header`),method:"GET"})})}getBlockMetadata({block:e}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/metadata`),method:"GET"})})}getBakingRights(e={},{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/baking_rights`),method:"GET",query:e})})}getEndorsingRights(e={},{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/endorsing_rights`),method:"GET",query:e})})}getBallotList({block:e}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/ballot_list`),method:"GET"})})}getBallots({block:e}=Ce){return Ne(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/ballots`),method:"GET"});return vc(r,["yay","nay","pass"])})}getCurrentProposal({block:e}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_proposal`),method:"GET"})})}getCurrentQuorum({block:e}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_quorum`),method:"GET"})})}getVotesListings({block:e}=Ce){return Ne(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/listings`),method:"GET"});return r.map(n=>(n.voting_power&&(n.voting_power=new ve(n.voting_power)),n)),r})}getProposals({block:e}=Ce){return Ne(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/proposals`),method:"GET"});return r.map(n=>n[1]=new ve(n[1])),r})}forgeOperations(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/forge/operations`),method:"POST"},e)})}injectOperation(e){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/injection/operation"),method:"POST"},e)})}preapplyOperations(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/preapply/operations`),method:"POST"},e)})}getEntrypoints(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return this.validateContract(e),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/entrypoints`),method:"GET"})})}runOperation(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_operation`),method:"POST"},e)})}runCode(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_code`),method:"POST"},e)})}runScriptView(e,{block:r}=Ce){var{unparsing_mode:n="Readable"}=e,i=Gf(e,["unparsing_mode"]);return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_script_view`),method:"POST"},Object.assign({unparsing_mode:n},i))})}runView(e,{block:r}=Ce){var{unparsing_mode:n="Readable"}=e,i=Gf(e,["unparsing_mode"]);return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_view`),method:"POST"},Object.assign({unparsing_mode:n},i))})}getChainId(){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/chain_id`),method:"GET"})})}packData(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/pack_data`),method:"POST"},e),{gas:i}=n,s=Gf(n,["gas"]);let o=i;const a=new ve(i||"");return a.isNaN()||(o=a),Object.assign({gas:o},s)})}getRpcUrl(){return this.url}getCurrentPeriod({block:e}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_period`),method:"GET"})})}getSuccessorPeriod({block:e}=Ce){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/successor_period`),method:"GET"})})}getSaplingDiffById(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/sapling/${e}/get_diff`),method:"GET"})})}getSaplingDiffByContract(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/single_sapling_get_diff`),method:"GET"})})}getProtocols({block:e}=Ce){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/protocols`),method:"GET"})})}getTxRollupState(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/tx_rollup/${e}/state`),method:"GET"})})}getTxRollupInbox(e,r,{block:n}=Ce){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/tx_rollup/${e}/inbox/${r}`),method:"GET"})})}getStorageUsedSpace(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage/used_space`),method:"GET"})})}getStoragePaidSpace(e,{block:r}=Ce){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage/paid_space`),method:"GET"})})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rp=function(t,e){return rp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},rp(t,e)};function nt(t,e){rp(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function ku(t){return typeof t=="function"}var Ev=!1,ri={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;""+e.stack}Ev=t},get useDeprecatedSynchronousErrorHandling(){return Ev}};function ra(t){setTimeout(function(){throw t},0)}var Du={closed:!0,next:function(t){},error:function(t){if(ri.useDeprecatedSynchronousErrorHandling)throw t;ra(t)},complete:function(){}},m1=function(){return Array.isArray||function(t){return t&&typeof t.length=="number"}}();function nw(t){return t!==null&&typeof t=="object"}var LI=function(){function t(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t}(),hu=LI,nn=function(){function t(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,n=r._parentOrParents,i=r._ctorUnsubscribe,s=r._unsubscribe,o=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(n!==null)for(var a=0;a<n.length;++a){var c=n[a];c.remove(this)}if(ku(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(h){e=h instanceof hu?wv(h.errors):[h]}}if(m1(o))for(var a=-1,l=o.length;++a<l;){var f=o[a];if(nw(f))try{f.unsubscribe()}catch(S){e=e||[],S instanceof hu?e=e.concat(wv(S.errors)):e.push(S)}}if(e)throw new hu(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||typeof r.unsubscribe!="function")return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;r=new t,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(i===null)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return r;var s=this._subscriptions;return s===null?this._subscriptions=[r]:s.push(r),r},t.prototype.remove=function(e){var r=this._subscriptions;if(r){var n=r.indexOf(e);n!==-1&&r.splice(n,1)}},t.EMPTY=function(e){return e.closed=!0,e}(new t),t}();function wv(t){return t.reduce(function(e,r){return e.concat(r instanceof hu?r.errors:r)},[])}var Uu=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Ft=function(t){nt(e,t);function e(r,n,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=Du;break;case 1:if(!r){s.destination=Du;break}if(typeof r=="object"){r instanceof e?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new _v(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new _v(s,r,n,i);break}return s}return e.prototype[Uu]=function(){return this},e.create=function(r,n,i){var s=new e(r,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},e}(nn),_v=function(t){nt(e,t);function e(r,n,i,s){var o=t.call(this)||this;o._parentSubscriber=r;var a,c=o;return ku(n)?a=n:n&&(a=n.next,i=n.error,s=n.complete,n!==Du&&(c=Object.create(n),ku(c.unsubscribe)&&o.add(c.unsubscribe.bind(c)),c.unsubscribe=o.unsubscribe.bind(o))),o._context=c,o._next=a,o._error=i,o._complete=s,o}return e.prototype.next=function(r){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!ri.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,r):this.__tryOrSetError(n,this._next,r)&&this.unsubscribe()}},e.prototype.error=function(r){if(!this.isStopped){var n=this._parentSubscriber,i=ri.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,r),this.unsubscribe()):(this.__tryOrSetError(n,this._error,r),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=r,n.syncErrorThrown=!0):ra(r),this.unsubscribe();else{if(this.unsubscribe(),i)throw r;ra(r)}}},e.prototype.complete=function(){var r=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return r._complete.call(r._context)};!ri.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(r,n){try{r.call(this._context,n)}catch(i){if(this.unsubscribe(),ri.useDeprecatedSynchronousErrorHandling)throw i;ra(i)}},e.prototype.__tryOrSetError=function(r,n,i){if(!ri.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(s){return ri.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=s,r.syncErrorThrown=!0,!0):(ra(s),!0)}return!1},e.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},e}(Ft);function MI(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;n&&n instanceof Ft?t=n:t=null}return!0}function CI(t,e,r){if(t){if(t instanceof Ft)return t;if(t[Uu])return t[Uu]()}return!t&&!e&&!r?new Ft(Du):new Ft(t,e,r)}var nf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function y1(t){return t}function BI(t){return t.length===0?y1:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var Mt=function(){function t(e){this._isScalar=!1,e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this.operator,s=CI(e,r,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||ri.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),ri.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){ri.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=r),MI(e)?e.error(r):console.warn(r)}},t.prototype.forEach=function(e,r){var n=this;return r=Av(r),new r(function(i,s){var o;o=n.subscribe(function(a){try{e(a)}catch(c){s(c),o&&o.unsubscribe()}},s,i)})},t.prototype._subscribe=function(e){var r=this.source;return r&&r.subscribe(e)},t.prototype[nf]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length===0?this:BI(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=Av(e),new e(function(n,i){var s;r.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},t.create=function(e){return new t(e)},t}();function Av(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var kI=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),uo=kI,iw=function(t){nt(e,t);function e(r,n){var i=t.call(this)||this;return i.subject=r,i.subscriber=n,i.closed=!1,i}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var r=this.subject,n=r.observers;if(this.subject=null,!(!n||n.length===0||r.isStopped||r.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},e}(nn),sw=function(t){nt(e,t);function e(r){var n=t.call(this,r)||this;return n.destination=r,n}return e}(Ft),xa=function(t){nt(e,t);function e(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype[Uu]=function(){return new sw(this)},e.prototype.lift=function(r){var n=new xv(this,this);return n.operator=r,n},e.prototype.next=function(r){if(this.closed)throw new uo;if(!this.isStopped)for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].next(r)},e.prototype.error=function(r){if(this.closed)throw new uo;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].error(r);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new uo;this.isStopped=!0;for(var r=this.observers,n=r.length,i=r.slice(),s=0;s<n;s++)i[s].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(r){if(this.closed)throw new uo;return t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){if(this.closed)throw new uo;return this.hasError?(r.error(this.thrownError),nn.EMPTY):this.isStopped?(r.complete(),nn.EMPTY):(this.observers.push(r),new iw(this,r))},e.prototype.asObservable=function(){var r=new Mt;return r.source=this,r},e.create=function(r,n){return new xv(r,n)},e}(Mt),xv=function(t){nt(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n=this.destination;n&&n.next&&n.next(r)},e.prototype.error=function(r){var n=this.destination;n&&n.error&&this.destination.error(r)},e.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},e.prototype._subscribe=function(r){var n=this.source;return n?this.source.subscribe(r):nn.EMPTY},e}(xa);function Lc(){return function(e){return e.lift(new DI(e))}}var DI=function(){function t(e){this.connectable=e}return t.prototype.call=function(e,r){var n=this.connectable;n._refCount++;var i=new UI(e,n),s=r.subscribe(i);return i.closed||(i.connection=n.connect()),s},t}(),UI=function(t){nt(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._unsubscribe=function(){var r=this.connectable;if(!r){this.connection=null;return}this.connectable=null;var n=r._refCount;if(n<=0){this.connection=null;return}if(r._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,s=r._connection;this.connection=null,s&&(!i||s===i)&&s.unsubscribe()},e}(Ft),FI=function(t){nt(e,t);function e(r,n){var i=t.call(this)||this;return i.source=r,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return e.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},e.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var r=this._connection;return r||(this._isComplete=!1,r=this._connection=new nn,r.add(this.source.subscribe(new HI(this.getSubject(),this))),r.closed&&(this._connection=null,r=nn.EMPTY)),r},e.prototype.refCount=function(){return Lc()(this)},e}(Mt),KI=function(){var t=FI.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),HI=function(t){nt(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._error=function(r){this._unsubscribe(),t.prototype._error.call(this,r)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var r=this.connectable;if(r){this.connectable=null;var n=r._connection;r._refCount=0,r._subject=null,r._connection=null,n&&n.unsubscribe()}},e}(sw),Jl=function(t){nt(e,t);function e(r){var n=t.call(this)||this;return n._value=r,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(r){var n=t.prototype._subscribe.call(this,r);return n&&!n.closed&&r.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new uo;return this._value},e.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},e}(xa),jI=function(t){nt(e,t);function e(r,n){return t.call(this)||this}return e.prototype.schedule=function(r,n){return this},e}(nn),ow=function(t){nt(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(s,this.id,n),this},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),setInterval(r.flush.bind(r,this),i)},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return n;clearInterval(n)},e.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,n){var i=!1,s=void 0;try{this.work(r)}catch(o){i=!0,s=!!o&&o||new Error(o)}if(i)return this.unsubscribe(),s},e.prototype._unsubscribe=function(){var r=this.id,n=this.scheduler,i=n.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,s!==-1&&i.splice(s,1),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null},e}(jI),GI=function(t){nt(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?t.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},e.prototype.execute=function(r,n){return n>0||this.closed?t.prototype.execute.call(this,r,n):this._execute(r,n)},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?t.prototype.requestAsyncId.call(this,r,n,i):r.flush(this)},e}(ow),Sv=function(){function t(e,r){r===void 0&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),new this.SchedulerAction(this,e).schedule(n,r)},t.now=function(){return Date.now()},t}(),aw=function(t){nt(e,t);function e(r,n){n===void 0&&(n=Sv.now);var i=t.call(this,r,function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return e.prototype.schedule=function(r,n,i){return n===void 0&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(r){var n=this.actions;if(this.active){n.push(r);return}var i;this.active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this.active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},e}(Sv),qI=function(t){nt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(aw),VI=new qI(GI),$I=VI,cw=new Mt(function(t){return t.complete()});function E1(t){return t?zI(t):cw}function zI(t){return new Mt(function(e){return t.schedule(function(){return e.complete()})})}function Mc(t){return t&&typeof t.schedule=="function"}var fw=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()}};function w1(t,e){return new Mt(function(r){var n=new nn,i=0;return n.add(e.schedule(function(){if(i===t.length){r.complete();return}r.next(t[i++]),r.closed||n.add(this.schedule())})),n})}function uw(t,e){return e?w1(t,e):new Mt(fw(t))}function Wa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return Mc(r)?(t.pop(),w1(t,r)):uw(t)}function _1(t,e){return e?new Mt(function(r){return e.schedule(WI,0,{error:t,subscriber:r})}):new Mt(function(r){return r.error(t)})}function WI(t){var e=t.error,r=t.subscriber;r.error(e)}var l0=function(){function t(e,r,n){this.kind=e,this.value=r,this.error=n,this.hasValue=e==="N"}return t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},t.prototype.do=function(e,r,n){var i=this.kind;switch(i){case"N":return e&&e(this.value);case"E":return r&&r(this.error);case"C":return n&&n()}},t.prototype.accept=function(e,r,n){return e&&typeof e.next=="function"?this.observe(e):this.do(e,r,n)},t.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return Wa(this.value);case"E":return _1(this.error);case"C":return E1()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return typeof e<"u"?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),XI=function(t){nt(e,t);function e(r,n,i){i===void 0&&(i=0);var s=t.call(this,r)||this;return s.scheduler=n,s.delay=i,s}return e.dispatch=function(r){var n=r.notification,i=r.destination;n.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(r){var n=this.destination;n.add(this.scheduler.schedule(e.dispatch,this.delay,new JI(r,this.destination)))},e.prototype._next=function(r){this.scheduleMessage(l0.createNext(r))},e.prototype._error=function(r){this.scheduleMessage(l0.createError(r)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(l0.createComplete()),this.unsubscribe()},e}(Ft),JI=function(){function t(e,r){this.notification=e,this.destination=r}return t}(),Cc=function(t){nt(e,t);function e(r,n,i){r===void 0&&(r=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var s=t.call(this)||this;return s.scheduler=i,s._events=[],s._infiniteTimeWindow=!1,s._bufferSize=r<1?1:r,s._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(s._infiniteTimeWindow=!0,s.next=s.nextInfiniteTimeWindow):s.next=s.nextTimeWindow,s}return e.prototype.nextInfiniteTimeWindow=function(r){if(!this.isStopped){var n=this._events;n.push(r),n.length>this._bufferSize&&n.shift()}t.prototype.next.call(this,r)},e.prototype.nextTimeWindow=function(r){this.isStopped||(this._events.push(new YI(this._getNow(),r)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,r)},e.prototype._subscribe=function(r){var n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,o=i.length,a;if(this.closed)throw new uo;if(this.isStopped||this.hasError?a=nn.EMPTY:(this.observers.push(r),a=new iw(this,r)),s&&r.add(r=new XI(r,s)),n)for(var c=0;c<o&&!r.closed;c++)r.next(i[c]);else for(var c=0;c<o&&!r.closed;c++)r.next(i[c].value);return this.hasError?r.error(this.thrownError):this.isStopped&&r.complete(),a},e.prototype._getNow=function(){return(this.scheduler||$I).now()},e.prototype._trimBufferThenGetEvents=function(){for(var r=this._getNow(),n=this._bufferSize,i=this._windowTime,s=this._events,o=s.length,a=0;a<o&&!(r-s[a].time<i);)a++;return o>n&&(a=Math.max(a,o-n)),a>0&&s.splice(0,a),s},e}(xa),YI=function(){function t(e,r){this.time=e,this.value=r}return t}(),QI=new aw(ow),lw=QI;function Li(){}var ZI=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),eP=ZI,tP=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),hw=tP;function xo(t,e){return function(n){if(typeof t!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new rP(t,e))}}var rP=function(){function t(e,r){this.project=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new nP(e,this.project,this.thisArg))},t}(),nP=function(t){nt(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.project=n,s.count=0,s.thisArg=i||s,s}return e.prototype._next=function(r){var n;try{n=this.project.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(Ft),iP=function(t){nt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r,n,i,s,o){this.destination.next(n)},e.prototype.notifyError=function(r,n){this.destination.error(r)},e.prototype.notifyComplete=function(r){this.destination.complete()},e}(Ft),sP=function(t){nt(e,t);function e(r,n,i){var s=t.call(this)||this;return s.parent=r,s.outerValue=n,s.outerIndex=i,s.index=0,s}return e.prototype._next=function(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this.index++,this)},e.prototype._error=function(r){this.parent.notifyError(r,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(Ft),oP=function(t){return function(e){return t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,ra),e}};function aP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Yl=aP(),cP=function(t){return function(e){var r=t[Yl]();do{var n=void 0;try{n=r.next()}catch(i){return e.error(i),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}while(!0);return typeof r.return=="function"&&e.add(function(){r.return&&r.return()}),e}},fP=function(t){return function(e){var r=t[nf]();if(typeof r.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(e)}},dw=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function pw(t){return!!t&&typeof t.subscribe!="function"&&typeof t.then=="function"}var A1=function(t){if(t&&typeof t[nf]=="function")return fP(t);if(dw(t))return fw(t);if(pw(t))return oP(t);if(t&&typeof t[Yl]=="function")return cP(t);var e=nw(t)?"an invalid object":"'"+t+"'",r="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(r)};function uP(t,e,r,n,i){if(i===void 0&&(i=new sP(t,r,n)),!i.closed)return e instanceof Mt?e.subscribe(i):A1(e)(i)}var Rv={};function Tv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=void 0,n=void 0;return Mc(t[t.length-1])&&(n=t.pop()),typeof t[t.length-1]=="function"&&(r=t.pop()),t.length===1&&m1(t[0])&&(t=t[0]),uw(t,n).lift(new lP(r))}var lP=function(){function t(e){this.resultSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new hP(e,this.resultSelector))},t}(),hP=function(t){nt(e,t);function e(r,n){var i=t.call(this,r)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return e.prototype._next=function(r){this.values.push(Rv),this.observables.push(r)},e.prototype._complete=function(){var r=this.observables,n=r.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var i=0;i<n;i++){var s=r[i];this.add(uP(this,s,void 0,i))}}},e.prototype.notifyComplete=function(r){(this.active-=1)===0&&this.destination.complete()},e.prototype.notifyNext=function(r,n,i){var s=this.values,o=s[i],a=this.toRespond?o===Rv?--this.toRespond:this.toRespond:0;s[i]=n,a===0&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))},e.prototype._tryResultSelector=function(r){var n;try{n=this.resultSelector.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(iP);function dP(t,e){return new Mt(function(r){var n=new nn;return n.add(e.schedule(function(){var i=t[nf]();n.add(i.subscribe({next:function(s){n.add(e.schedule(function(){return r.next(s)}))},error:function(s){n.add(e.schedule(function(){return r.error(s)}))},complete:function(){n.add(e.schedule(function(){return r.complete()}))}}))})),n})}function pP(t,e){return new Mt(function(r){var n=new nn;return n.add(e.schedule(function(){return t.then(function(i){n.add(e.schedule(function(){r.next(i),n.add(e.schedule(function(){return r.complete()}))}))},function(i){n.add(e.schedule(function(){return r.error(i)}))})})),n})}function gP(t,e){if(!t)throw new Error("Iterable cannot be null");return new Mt(function(r){var n=new nn,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(e.schedule(function(){i=t[Yl](),n.add(e.schedule(function(){if(!r.closed){var s,o;try{var a=i.next();s=a.value,o=a.done}catch(c){r.error(c);return}o?r.complete():(r.next(s),this.schedule())}}))})),n})}function bP(t){return t&&typeof t[nf]=="function"}function vP(t){return t&&typeof t[Yl]=="function"}function mP(t,e){if(t!=null){if(bP(t))return dP(t,e);if(pw(t))return pP(t,e);if(dw(t))return w1(t,e);if(vP(t)||typeof t=="string")return gP(t,e)}throw new TypeError((t!==null&&typeof t||t)+" is not observable")}function Fo(t,e){return e?mP(t,e):t instanceof Mt?t:new Mt(A1(t))}var sf=function(t){nt(e,t);function e(r){var n=t.call(this)||this;return n.parent=r,n}return e.prototype._next=function(r){this.parent.notifyNext(r)},e.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(Ft),of=function(t){nt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyError=function(r){this.destination.error(r)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(Ft);function af(t,e){if(!e.closed){if(t instanceof Mt)return t.subscribe(e);var r;try{r=A1(t)(e)}catch(n){e.error(n)}return r}}function Ql(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),typeof e=="function"?function(n){return n.pipe(Ql(function(i,s){return Fo(t(i,s)).pipe(xo(function(o,a){return e(i,o,s,a)}))},r))}:(typeof e=="number"&&(r=e),function(n){return n.lift(new yP(t,r))})}var yP=function(){function t(e,r){r===void 0&&(r=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=r}return t.prototype.call=function(e,r){return r.subscribe(new EP(e,this.project,this.concurrent))},t}(),EP=function(t){nt(e,t);function e(r,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var s=t.call(this,r)||this;return s.project=n,s.concurrent=i,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return e.prototype._next=function(r){this.active<this.concurrent?this._tryNext(r):this.buffer.push(r)},e.prototype._tryNext=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this.active++,this._innerSub(n)},e.prototype._innerSub=function(r){var n=new sf(this),i=this.destination;i.add(n);var s=af(r,n);s!==n&&i.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(of);function wP(t){return t===void 0&&(t=Number.POSITIVE_INFINITY),Ql(y1,t)}function _P(){return wP(1)}function Fu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return _P()(Wa.apply(void 0,t))}function gw(t){return new Mt(function(e){var r;try{r=t()}catch(i){e.error(i);return}var n=r?Fo(r):E1();return n.subscribe(e)})}function Ov(t){return!m1(t)&&t-parseFloat(t)+1>=0}var AP=new Mt(Li);function Ku(t,e){return function(n){return n.lift(new xP(t,e))}}var xP=function(){function t(e,r){this.predicate=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new SP(e,this.predicate,this.thisArg))},t}(),SP=function(t){nt(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.thisArg=i,s.count=0,s}return e.prototype._next=function(r){var n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(r)},e}(Ft);function x1(t,e,r){return t===void 0&&(t=0),new Mt(function(n){e===void 0&&(e=t,t=0);var i=0,s=t;if(r)return r.schedule(RP,0,{index:i,count:e,start:t,subscriber:n});do{if(i++>=e){n.complete();break}if(n.next(s++),n.closed)break}while(!0)})}function RP(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;if(r>=n){i.complete();return}i.next(e),!i.closed&&(t.index=r+1,t.start=e+1,this.schedule(t))}function Iv(t,e,r){t===void 0&&(t=0);var n=-1;return Ov(e)?n=Number(e)<1&&1||Number(e):Mc(e)&&(r=e),Mc(r)||(r=lw),new Mt(function(i){var s=Ov(t)?t:+t-r.now();return r.schedule(TP,s,{index:0,period:n,subscriber:i})})}function TP(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(r===-1)return n.complete();t.index=e+1,this.schedule(t,r)}}function S1(t){return function(r){var n=new OP(t),i=r.lift(n);return n.caught=i}}var OP=function(){function t(e){this.selector=e}return t.prototype.call=function(e,r){return r.subscribe(new IP(e,this.selector,this.caught))},t}(),IP=function(t){nt(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.selector=n,s.caught=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=void 0;try{n=this.selector(r,this.caught)}catch(o){t.prototype.error.call(this,o);return}this._unsubscribeAndRecycle();var i=new sf(this);this.add(i);var s=af(n,i);s!==i&&this.add(s)}},e}(of);function cf(t,e){return Ql(t,e,1)}function PP(t){return t===void 0&&(t=null),function(e){return e.lift(new NP(t))}}var NP=function(){function t(e){this.defaultValue=e}return t.prototype.call=function(e,r){return r.subscribe(new LP(e,this.defaultValue))},t}(),LP=function(t){nt(e,t);function e(r,n){var i=t.call(this,r)||this;return i.defaultValue=n,i.isEmpty=!0,i}return e.prototype._next=function(r){this.isEmpty=!1,this.destination.next(r)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(Ft);function MP(t){return t instanceof Date&&!isNaN(+t)}function bw(t,e){return function(r){return r.lift(new CP(t,e))}}var CP=function(){function t(e,r){this.compare=e,this.keySelector=r}return t.prototype.call=function(e,r){return r.subscribe(new BP(e,this.compare,this.keySelector))},t}(),BP=function(t){nt(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.keySelector=i,s.hasKey=!1,typeof n=="function"&&(s.compare=n),s}return e.prototype.compare=function(r,n){return r===n},e.prototype._next=function(r){var n;try{var i=this.keySelector;n=i?i(r):r}catch(a){return this.destination.error(a)}var s=!1;if(this.hasKey)try{var o=this.compare;s=o(this.key,n)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=n,this.destination.next(r))},e}(Ft);function kP(t,e){return bw(function(r,n){return e?e(r[t],n[t]):r[t]===n[t]})}function DP(t){return t===void 0&&(t=KP),function(e){return e.lift(new UP(t))}}var UP=function(){function t(e){this.errorFactory=e}return t.prototype.call=function(e,r){return r.subscribe(new FP(e,this.errorFactory))},t}(),FP=function(t){nt(e,t);function e(r,n){var i=t.call(this,r)||this;return i.errorFactory=n,i.hasValue=!1,i}return e.prototype._next=function(r){this.hasValue=!0,this.destination.next(r)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var r=void 0;try{r=this.errorFactory()}catch(n){r=n}this.destination.error(r)},e}(Ft);function KP(){return new hw}function HP(t){return function(e){return t===0?E1():e.lift(new jP(t))}}var jP=function(){function t(e){if(this.total=e,this.total<0)throw new eP}return t.prototype.call=function(e,r){return r.subscribe(new GP(e,this.total))},t}(),GP=function(t){nt(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(r){var n=this.total,i=++this.count;i<=n&&(this.destination.next(r),i===n&&(this.destination.complete(),this.unsubscribe()))},e}(Ft);function vw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return Fu(r,Wa.apply(void 0,t))}}function qi(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?Ku(function(i,s){return t(i,s,n)}):y1,HP(1),r?PP(e):DP(function(){return new hw}))}}function np(t,e){return function(n){var i;if(typeof t=="function"?i=t:i=function(){return t},typeof e=="function")return n.lift(new qP(i,e));var s=Object.create(n,KI);return s.source=n,s.subjectFactory=i,s}}var qP=function(){function t(e,r){this.subjectFactory=e,this.selector=r}return t.prototype.call=function(e,r){var n=this.selector,i=this.subjectFactory(),s=n(i).subscribe(e);return s.add(r.subscribe(i)),s},t}();function Pv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;if(r===0)throw new Error("list of properties cannot be empty.");return function(n){return xo(VP(t,r))(n)}}function VP(t,e){var r=function(n){for(var i=n,s=0;s<e;s++){var o=i!=null?i[t[s]]:void 0;if(o!==void 0)i=o;else return}return i};return r}function $P(t){return t?np(function(){return new xa},t):np(new xa)}function ip(t,e,r,n){r&&typeof r!="function"&&(n=r);var i=typeof r=="function"?r:void 0,s=new Cc(t,e,n);return function(o){return np(function(){return s},i)(o)}}function mw(t){return t===void 0&&(t=-1),function(e){return e.lift(new zP(t,e))}}var zP=function(){function t(e,r){this.count=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new WP(e,this.count,this.source))},t}(),WP=function(t){nt(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.count=n,s.source=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=this,i=n.source,s=n.count;if(s===0)return t.prototype.error.call(this,r);s>-1&&(this.count=s-1),i.subscribe(this._unsubscribeAndRecycle())}},e}(Ft);function Nv(t,e,r){var n;return t&&typeof t=="object"?n=t:n={bufferSize:t,windowTime:e,refCount:!1,scheduler:r},function(i){return i.lift(XP(n))}}function XP(t){var e=t.bufferSize,r=e===void 0?Number.POSITIVE_INFINITY:e,n=t.windowTime,i=n===void 0?Number.POSITIVE_INFINITY:n,s=t.refCount,o=t.scheduler,a,c=0,l,f=!1,h=!1;return function(P){c++;var M;!a||f?(f=!1,a=new Cc(r,i,o),M=a.subscribe(this),l=P.subscribe({next:function(H){a.next(H)},error:function(H){f=!0,a.error(H)},complete:function(){h=!0,l=void 0,a.complete()}}),h&&(l=void 0)):M=a.subscribe(this),this.add(function(){c--,M.unsubscribe(),M=void 0,l&&!h&&s&&c===0&&(l.unsubscribe(),l=void 0,a=void 0)})}}function JP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return Mc(r)?(t.pop(),function(n){return Fu(t,n,r)}):function(n){return Fu(t,n)}}function ci(t,e){return typeof e=="function"?function(r){return r.pipe(ci(function(n,i){return Fo(t(n,i)).pipe(xo(function(s,o){return e(n,s,i,o)}))}))}:function(r){return r.lift(new YP(t))}}var YP=function(){function t(e){this.project=e}return t.prototype.call=function(e,r){return r.subscribe(new QP(e,this.project))},t}(),QP=function(t){nt(e,t);function e(r,n){var i=t.call(this,r)||this;return i.project=n,i.index=0,i}return e.prototype._next=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this._innerSub(n)},e.prototype._innerSub=function(r){var n=this.innerSubscription;n&&n.unsubscribe();var i=new sf(this),s=this.destination;s.add(i),this.innerSubscription=af(r,i),this.innerSubscription!==i&&s.add(this.innerSubscription)},e.prototype._complete=function(){var r=this.innerSubscription;(!r||r.closed)&&t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(r){this.destination.next(r)},e}(of);function ZP(t){return function(e){return e.lift(new eN(t))}}var eN=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){var n=new tN(e),i=af(this.notifier,new sf(n));return i&&!n.seenValue?(n.add(i),r.subscribe(n)):n},t}(),tN=function(t){nt(e,t);function e(r){var n=t.call(this,r)||this;return n.seenValue=!1,n}return e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(of);function rN(t,e){return e===void 0&&(e=!1),function(r){return r.lift(new nN(t,e))}}var nN=function(){function t(e,r){this.predicate=e,this.inclusive=r}return t.prototype.call=function(e,r){return r.subscribe(new iN(e,this.predicate,this.inclusive))},t}(),iN=function(t){nt(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.inclusive=i,s.index=0,s}return e.prototype._next=function(r){var n=this.destination,i;try{i=this.predicate(r,this.index++)}catch(s){n.error(s);return}this.nextOrComplete(r,i)},e.prototype.nextOrComplete=function(r,n){var i=this.destination;n?i.next(r):(this.inclusive&&i.next(r),i.complete())},e}(Ft);function Hu(t,e,r){return function(i){return i.lift(new sN(t,e,r))}}var sN=function(){function t(e,r,n){this.nextOrObserver=e,this.error=r,this.complete=n}return t.prototype.call=function(e,r){return r.subscribe(new oN(e,this.nextOrObserver,this.error,this.complete))},t}(),oN=function(t){nt(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o._tapNext=Li,o._tapError=Li,o._tapComplete=Li,o._tapError=i||Li,o._tapComplete=s||Li,ku(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||Li,o._tapError=n.error||Li,o._tapComplete=n.complete||Li),o}return e.prototype._next=function(r){try{this._tapNext.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.next(r)},e.prototype._error=function(r){try{this._tapError.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.error(r)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(r){this.destination.error(r);return}return this.destination.complete()},e}(Ft);function yw(t,e,r){return r===void 0&&(r=lw),function(n){var i=MP(t),s=i?+t-r.now():Math.abs(t);return n.lift(new aN(s,i,e,r))}}var aN=function(){function t(e,r,n,i){this.waitFor=e,this.absoluteTimeout=r,this.withObservable=n,this.scheduler=i}return t.prototype.call=function(e,r){return r.subscribe(new cN(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),cN=function(t){nt(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.absoluteTimeout=n,a.waitFor=i,a.withObservable=s,a.scheduler=o,a.scheduleTimeout(),a}return e.dispatchTimeout=function(r){var n=r.withObservable;r._unsubscribeAndRecycle(),r.add(af(n,new sf(r)))},e.prototype.scheduleTimeout=function(){var r=this.action;r?this.action=r.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(r){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,r)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(of),fN=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(s){return function(o){return function(a,c){var l={key:a,value:o[a]},f={key:c,value:o[c]};return s(l,f)}}}(e.cmp),i=[];return function s(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var a,c;if(Array.isArray(o)){for(c="[",a=0;a<o.length;a++)a&&(c+=","),c+=s(o[a])||"null";return c+"]"}if(o===null)return"null";if(i.indexOf(o)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var l=i.push(o)-1,f=Object.keys(o).sort(n&&n(o));for(c="",a=0;a<f.length;a++){var h=f[a],S=s(o[h]);S&&(c&&(c+=","),c+=JSON.stringify(h)+":"+S)}return i.splice(l,1),"{"+c+"}"}}(t)};const uN=wi(fN);var Ew;class lN extends Error{constructor(e){super(`The map type '${e}' is invalid`),this.mapType=e,this.name="InvalidMapTypeError"}}const ww=Symbol.for("taquito-michelson-map-type-symbol"),hN=t=>"args"in t&&Array.isArray(t.args)&&t.args.length===2;class Lv extends Error{constructor(e,r,n){super(`${n} not compliant with underlying michelson type`),this.value=e,this.type=r,this.name="MapTypecheckError"}}class Yr{constructor(e){this.valueMap=new Map,this.keyMap=new Map,this[Ew]=!0,e&&this.setType(e)}static isMichelsonMap(e){return e&&e[ww]===!0}setType(e){if(!hN(e))throw new lN(e.toString());this.keySchema=new Qr(e.args[0]),this.valueSchema=new Qr(e.args[1])}removeType(){this.keySchema=void 0,this.valueSchema=void 0}static fromLiteral(e,r){const n=new Yr(r);return Object.keys(e).forEach(i=>{n.set(i,e[i])}),n}typecheckKey(e){return this.keySchema?this.keySchema.Typecheck(e):!0}typecheckValue(e){return this.valueSchema?this.valueSchema.Typecheck(e):!0}assertTypecheckValue(e){if(!this.typecheckValue(e))throw new Lv(e,this.valueSchema,"value")}assertTypecheckKey(e){if(!this.typecheckKey(e))throw new Lv(e,this.keySchema,"key")}serializeDeterministically(e){return uN(e)}*keys(){for(const[e]of this.entries())yield e}*values(){for(const[,e]of this.entries())yield e}*entries(){for(const e of this.valueMap.keys())yield[this.keyMap.get(e),this.valueMap.get(e)]}get(e){this.assertTypecheckKey(e);const r=this.serializeDeterministically(e);return this.valueMap.get(r)}set(e,r){this.assertTypecheckKey(e),this.assertTypecheckValue(r);const n=this.serializeDeterministically(e);this.keyMap.set(n,e),this.valueMap.set(n,r)}delete(e){this.assertTypecheckKey(e),this.keyMap.delete(this.serializeDeterministically(e)),this.valueMap.delete(this.serializeDeterministically(e))}has(e){this.assertTypecheckKey(e);const r=this.serializeDeterministically(e);return this.keyMap.has(r)&&this.valueMap.has(r)}clear(){this.keyMap.clear(),this.valueMap.clear()}get size(){return this.keyMap.size}forEach(e){for(const[r,n]of this.entries())e(n,r,this)}}Ew=ww;class mt extends Error{constructor(e,r,n){super(),this.value=e,this.token=r,this.name="ValidationError";const i=this.token.annot(),s=i?`[${i}] `:"";this.message=`${s}${n}`}}class Vt{constructor(e,r,n){this.val=e,this.idx=r,this.fac=n,this.createToken=this.fac}typeWithoutAnnotations(){const e=n=>{if(typeof n=="object"){if(Array.isArray(n))return n.map(o=>e(o));const i=n;return i.args?{prim:i.prim,args:i.args.map(s=>e(s))}:{prim:i.prim}}return n};return(n=>n.args?{prim:n.prim,args:n.args.map(i=>e(i))}:{prim:n.prim})(this.val)}annot(){return(Array.isArray(this.val.annots)&&this.val.annots.length>0?this.val.annots[0]:String(this.idx)).replace(/(%|:)(_Liq_entry_)?/,"")}hasAnnotations(){return Array.isArray(this.val.annots)&&this.val.annots.length}get tokenVal(){return this.val}ExtractSignature(){return[[this.ExtractSchema()]]}}class Bt extends Vt{compare(e,r){return e===r?0:e<r?-1:1}}class Mv extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="BigMapValidationError"}}class Jr extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}ExtractSchema(){return{big_map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:Jr.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}isValid(e){return Yr.isMichelsonMap(e)?null:new Mv(e,this,"Value must be a MichelsonMap")}objLitToMichelsonMap(e){return e instanceof Yr?e:typeof e=="object"?Object.keys(e).length===0?new Yr:Yr.fromLiteral(e):e}Encode(e){const r=this.objLitToMichelsonMap(e.pop()),n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((i,s)=>this.KeySchema.compare(i,s)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(r.get(i))]}))}EncodeObject(e,r){const n=this.objLitToMichelsonMap(e),i=this.isValid(n);if(i)throw i;return r&&r[Jr.prim]?r[Jr.prim](n,this.val):Array.from(n.keys()).sort((s,o)=>this.KeySchema.compare(s,o)).map(s=>({prim:"Elt",args:[this.KeySchema.EncodeObject(s),this.ValueSchema.EncodeObject(n.get(s))]}))}Execute(e,r){if(r&&r[Jr.prim])return r[Jr.prim](e,this.val);if(Array.isArray(e)){const n=new Yr(this.val);return e.forEach(i=>{n.set(this.KeySchema.ToKey(i.args[0]),this.ValueSchema.Execute(i.args[1]))}),n}else{if("int"in e)return e.int;throw new Mv(e,this,`Big map is expecting either an array (Athens) or an object with an int property (Babylon). Got ${JSON.stringify(e)}`)}}findAndReturnTokens(e,r){return Jr.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),this.ValueSchema.findAndReturnTokens(e,r),r}}Jr.prim="big_map";class dN extends Error{constructor(e){super(e),this.message=e,this.name="OrTokenDecodingError"}}class st extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){const r=e[e.length-1],n=this.createToken(this.val.args[0],this.idx);let i=1;n instanceof st&&(i=Object.keys(n.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+i);if(String(n.annot())===String(r)&&!(n instanceof st))return e.pop(),{prim:"Left",args:[n.Encode(e)]};if(String(s.annot())===String(r)&&!(s instanceof st))return e.pop(),{prim:"Right",args:[s.Encode(e)]};if(n instanceof st){const o=n.Encode(e);if(o)return{prim:"Left",args:[o]}}if(s instanceof st){const o=s.Encode(e);if(o)return{prim:"Right",args:[o]}}return null}ExtractSignature(){const e=this.createToken(this.val.args[0],this.idx);let r=1;e instanceof st&&(r=Object.keys(e.ExtractSchema()).length);const n=this.createToken(this.val.args[1],this.idx+r),i=[];if(e instanceof st)i.push(...e.ExtractSignature());else for(const s of e.ExtractSignature())i.push([e.annot(),...s]);if(n instanceof st)i.push(...n.ExtractSignature());else for(const s of n.ExtractSignature())i.push([n.annot(),...s]);return i}EncodeObject(e,r){const n=Object.keys(e)[0],i=this.createToken(this.val.args[0],this.idx);let s=1;i instanceof st&&(s=Object.keys(i.ExtractSchema()).length);const o=this.createToken(this.val.args[1],this.idx+s);if(String(i.annot())===String(n)&&!(i instanceof st))return{prim:"Left",args:[i.EncodeObject(e[n],r)]};if(String(o.annot())===String(n)&&!(o instanceof st))return{prim:"Right",args:[o.EncodeObject(e[n],r)]};if(i instanceof st){const a=i.EncodeObject(e,r);if(a)return{prim:"Left",args:[a]}}if(o instanceof st){const a=o.EncodeObject(e,r);if(a)return{prim:"Right",args:[a]}}return null}Execute(e,r){const n=this.createToken(this.val.args[0],this.idx);let i=1;n instanceof st&&(i=Object.keys(n.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+i);if(e.prim==="Right")return s instanceof st?s.Execute(e.args[0],r):{[s.annot()]:s.Execute(e.args[0],r)};if(e.prim==="Left")return n instanceof st?n.Execute(e.args[0],r):{[n.annot()]:n.Execute(e.args[0],r)};throw new dN(`Was expecting Left or Right prim but got: ${e.prim}`)}traversal(e,r,n){const i=this.createToken(this.val.args[0],this.idx);let s=1,o;i instanceof st&&!i.hasAnnotations()?(o=e(i),s=Object.keys(i.ExtractSchema()).length):o={[i.annot()]:e(i)};const a=this.createToken(this.val.args[1],this.idx+s);let c;return a instanceof st&&!a.hasAnnotations()?c=r(a):c={[a.annot()]:r(a)},n(o,c)}ExtractSchema(){return this.traversal(e=>e.ExtractSchema(),e=>e.ExtractSchema(),(e,r)=>Object.assign(Object.assign({},e),r))}generateSchema(){return{__michelsonType:st.prim,schema:this.traversal(e=>e instanceof st&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),e=>e instanceof st&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),(e,r)=>Object.assign(Object.assign({},e),r))}}findToken(e){const r=this.createToken(this.val.args[0],this.idx);let n=1;r instanceof st&&(n=Object.keys(r.ExtractSchema()).length);const i=this.createToken(this.val.args[1],this.idx+n);if(String(r.annot())===String(e)&&!(r instanceof st)&&r instanceof Bt)return r;if(String(i.annot())===String(e)&&!(i instanceof st)&&i instanceof Bt)return i;if(r instanceof st){const s=r.findToken(e);if(s)return s}if(i instanceof st){const s=i.findToken(e);if(s)return s}return null}compare(e,r){const n=Object.keys(e)[0],i=Object.keys(r)[0];if(n===i){const s=this.findToken(n);if(s instanceof Bt)return s.compare(e[n],r[n])}else{const s=JSON.stringify(this.EncodeObject(e)),o=JSON.stringify(this.EncodeObject(r));return s<o?-1:1}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,r){return st.prim===e&&r.push(this),this.traversal(n=>n.findAndReturnTokens(e,r),n=>n.findAndReturnTokens(e,r),(n,i)=>Object.assign(Object.assign({},n),i)),r}}st.prim="or";class pN extends Error{constructor(e){super(e),this.message=e,this.name="TokenArgumentValidationError"}}class gN extends Error{constructor(e,r){super(`Tokens ${e} and ${r} are not comparable`),this.val1=e,this.val2=r,this.name="TokenComparisonError"}}function sp(t,e=Gt.prim){if(Array.isArray(t))return sp({prim:e,args:t},e);if(t.args===void 0)throw new pN("Encountered an invalid PairToken with no arguments, a pair must have two or more arguments");return t.args.length>2?[t.args[0],{prim:e,args:t.args.slice(1)}]:[t.args[0],t.args[1]]}class Gt extends Bt{constructor(e,r,n){super(Array.isArray(e)?{prim:Gt.prim,args:e}:e.prim?e:{prim:Gt.prim,args:e},r,n)}args(){return sp(this.val)}tokens(){let e=0;return this.args().map(r=>{const n=this.createToken(r,this.idx+e);return n instanceof Gt?e+=Object.keys(n.ExtractSchema()).length:e++,n})}Encode(e){return{prim:"Pair",args:this.tokens().map(r=>r.Encode(e))}}ExtractSignature(){const e=this.args(),r=this.createToken(e[0],this.idx);let n=1;r instanceof st&&(n=Object.keys(r.ExtractSchema()).length);const i=this.createToken(e[1],this.idx+n),s=[];for(const o of r.ExtractSignature())for(const a of i.ExtractSignature())s.push([...o,...a]);return s}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}ToKey(e){return this.Execute(e)}EncodeObject(e,r){const[n,i]=this.tokens();let s;n instanceof Gt&&!n.hasAnnotations()?s=e:s=e[n.annot()];let o;return i instanceof Gt&&!i.hasAnnotations()?o=e:o=e[i.annot()],{prim:"Pair",args:[n.EncodeObject(s,r),i.EncodeObject(o,r)]}}traversal(e,r){const n=this.args(),i=this.createToken(n[0],this.idx);let s=1,o;i instanceof Gt&&(s=Object.keys(i.ExtractSchema()).length),i instanceof Gt&&!i.hasAnnotations()?o=e(i):o={[i.annot()]:e(i)};const a=this.createToken(n[1],this.idx+s);let c;return a instanceof Gt&&!a.hasAnnotations()?c=r(a):c={[a.annot()]:r(a)},Object.assign(Object.assign({},o),c)}Execute(e,r){const n=sp(e,"Pair");return this.traversal(i=>i.Execute(n[0],r),i=>i.Execute(n[1],r))}ExtractSchema(){return this.traversal(e=>e.ExtractSchema(),e=>e.ExtractSchema())}generateSchema(){return{__michelsonType:Gt.prim,schema:this.traversal(e=>e instanceof Gt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),e=>e instanceof Gt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema())}}compare(e,r){const[n,i]=this.tokens(),s=(o,a)=>o instanceof Gt&&!o.hasAnnotations()?a:a[o.annot()];if(n instanceof Bt&&i instanceof Bt){const o=n.compare(s(n,e),s(n,r));return o===0?i.compare(s(i,e),s(i,r)):o}throw new gN(e,r)}findAndReturnTokens(e,r){return Gt.prim===e&&r.push(this),this.tokens().map(n=>n.findAndReturnTokens(e,r)),r}}Gt.prim="pair";class Cv extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="NatValidationError"}}class Hn extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new ve(e[Object.keys(e)[0]])}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:new ve(r).toFixed()}}isValid(e){const r=new ve(e);return r.isNaN()?new Cv(e,this,`Value is not a number: ${e}`):r.isNegative()?new Cv(e,this,`Value cannot be negative: ${e}`):null}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Hn.prim]?r[Hn.prim](e):{int:new ve(e).toFixed()}}ExtractSchema(){return Hn.prim}generateSchema(){return{__michelsonType:Hn.prim,schema:Hn.prim}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:Hn.prim}}}ToKey({int:e}){return new ve(e)}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return Hn.prim===e&&r.push(this),r}}Hn.prim="nat";class jn extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e[Object.keys(e)[0]]}ExtractSchema(){return jn.prim}generateSchema(){return{__michelsonType:jn.prim,schema:jn.prim}}Encode(e){return{string:e.pop()}}EncodeObject(e,r){return r&&r[jn.prim]?r[jn.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:jn.prim}}}findAndReturnTokens(e,r){return jn.prim===e&&r.push(this),r}}jn.prim="string";class h0 extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="AddressValidationError"}}class Bi extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:TI(e)},type:{prim:"bytes"}}}isValid(e){return vt(e)!==_e.VALID?new h0(e,this,`Address is not valid: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Bi.prim]?r[Bi.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new h0(e,this,`cannot be missing both string and bytes: ${e}`);return tp(e.bytes)}ExtractSchema(){return Bi.prim}generateSchema(){return{__michelsonType:Bi.prim,schema:Bi.prim}}ToKey({bytes:e,string:r}){if(r)return r;if(!e)throw new h0({bytes:e,string:r},this,`cannot be missing both string and bytes ${{string:r,bytes:e}}`);return tp(e)}compare(e,r){const n=o=>o.startsWith("tz"),i=n(e),s=n(r);return i&&!s?-1:s&&!i?1:super.compare(e,r)}findAndReturnTokens(e,r){return Bi.prim===e&&r.push(this),r}}Bi.prim="address";class bN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="MapValidationError"}}class ks extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(e){return Yr.isMichelsonMap(e)?null:new bN(e,this,"Value must be a MichelsonMap")}Execute(e,r){const n=new Yr(this.val);return e.forEach(i=>{n.set(this.KeySchema.ToKey(i.args[0]),this.ValueSchema.Execute(i.args[1],r))}),n}objLitToMichelsonMap(e){return e instanceof Yr?e:typeof e=="object"?Object.keys(e).length===0?new Yr:Yr.fromLiteral(e):e}Encode(e){const r=this.objLitToMichelsonMap(e.pop()),n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((i,s)=>this.KeySchema.compare(i,s)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(r.get(i))]}))}EncodeObject(e,r){const n=this.objLitToMichelsonMap(e),i=this.isValid(n);if(i)throw i;return r&&r[ks.prim]?r[ks.prim](n):Array.from(n.keys()).sort((s,o)=>this.KeySchema.compare(s,o)).map(s=>({prim:"Elt",args:[this.KeySchema.EncodeObject(s),this.ValueSchema.EncodeObject(n.get(s))]}))}ExtractSchema(){return{map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:ks.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}findAndReturnTokens(e,r){return ks.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),this.ValueSchema.findAndReturnTokens(e,r),r}}ks.prim="map";class Gn extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return String(e.prim).toLowerCase()==="true"}Encode(e){return{prim:e.pop()?"True":"False"}}EncodeObject(e,r){return r&&r[Gn.prim]?r[Gn.prim](e):{prim:e?"True":"False"}}ExtractSchema(){return Gn.prim}generateSchema(){return{__michelsonType:Gn.prim,schema:Gn.prim}}ToBigMapKey(e){return{key:this.EncodeObject(e),type:{prim:Gn.prim}}}ToKey(e){return this.EncodeObject(e)}compare(e,r){return e&&r||!e&&!r?0:e?1:-1}findAndReturnTokens(e,r){return Gn.prim===e&&r.push(this),r}}Gn.prim="bool";class qf extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="TxRollupL2AddressValidationError"}}class ki extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:OI(e)},type:{prim:"bytes"}}}isValid(e){if(vt(e)!==_e.VALID)throw new qf(e,this,`tx_rollup_l2_address is not valid: ${e}`);return null}Encode(e){const r=e.pop();if(!r)throw new qf(r,this,`arg missing to encode: this -> "${r}"`);return this.isValid(r),{string:r}}EncodeObject(e,r){return this.isValid(e),r&&r[ki.prim]?r[ki.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new qf(e,this,`value cannot be missing string and byte value. must have one ${JSON.stringify(e)}`);return pv(e.bytes)}ExtractSchema(){return ki.prim}generateSchema(){return{__michelsonType:ki.prim,schema:ki.prim}}ToKey({bytes:e,string:r}){if(r)return r;if(!e)throw new qf(e,this,`value cannot be missing string and byte value. must have one: bytes = ${e}`);return pv(e)}findAndReturnTokens(e,r){return ki.prim===e&&r.push(this),r}}ki.prim="tx_rollup_l2_address";class Bv extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ContractValidationError"}}class Dr extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return vt(e)!==_e.VALID?new Bv(e,this,"Contract address is not valid"):null}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new Bv(e,this,"must contain bytes or string");return tp(e.bytes)}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Dr.prim]?r[Dr.prim](e):{string:e}}ExtractSchema(){return Dr.prim}generateSchema(){const e=this.createToken(this.val.args[0],0);return{__michelsonType:Dr.prim,schema:{parameter:this.val.args[0]?e.generateSchema():{}}}}findAndReturnTokens(e,r){return Dr.prim===e&&r.push(this),r}}Dr.prim="contract";class vN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ListValidationError"}}class Is extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueSchema(){return this.createToken(this.val.args[0],this.idx)}isValid(e){return Array.isArray(e)?null:new vN(e,this,"Value must be an array")}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;const i=this.createToken(this.val.args[0],0);return r.reduce((s,o)=>[...s,i.EncodeObject(o)],[])}Execute(e,r){const n=this.createToken(this.val.args[0],0),i=this.isValid(e);if(i)throw i;return e.reduce((s,o)=>[...s,n.Execute(o,r)],[])}EncodeObject(e,r){const n=this.createToken(this.val.args[0],0),i=this.isValid(e);if(i)throw i;return r&&r[Is.prim]?r[Is.prim](e):e.reduce((s,o)=>[...s,n.EncodeObject(o)],[])}ExtractSchema(){return{[Is.prim]:this.valueSchema.ExtractSchema()}}generateSchema(){return{__michelsonType:Is.prim,schema:this.valueSchema.generateSchema()}}findAndReturnTokens(e,r){return Is.prim===e&&r.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,r),r}}Is.prim="list";class mN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="MutezValidationError"}}class qn extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new ve(e[Object.keys(e)[0]])}ExtractSchema(){return qn.prim}generateSchema(){return{__michelsonType:qn.prim,schema:qn.prim}}isValid(e){return new ve(e).isNaN()?new mN(e,this,`Value is not a number: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:String(r).toString()}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[qn.prim]?r[qn.prim](e):{int:String(e).toString()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:qn.prim}}}ToKey({int:e}){return e}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return qn.prim===e&&r.push(this),r}}qn.prim="mutez";class yN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="BytesValidationError"}}class Vn extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:e},type:{prim:Vn.prim}}}isValid(e){return typeof e=="string"&&/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new yN(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?te.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=bv(this.convertUint8ArrayToHexString(r));const n=this.isValid(r);if(n)throw n;return{bytes:String(r).toString()}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e),typeof e=="string"&&(e=bv(e));const n=this.isValid(e);if(n)throw n;return r&&r[Vn.prim]?r[Vn.prim](e):{bytes:String(e).toString()}}Execute(e){return e.bytes}ExtractSchema(){return Vn.prim}generateSchema(){return{__michelsonType:Vn.prim,schema:Vn.prim}}ToKey({bytes:e,string:r}){return r||e}findAndReturnTokens(e,r){return Vn.prim===e&&r.push(this),r}}Vn.prim="bytes";class Sa extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}subToken(){return this.createToken(this.val.args[0],this.idx)}schema(){return this.createToken(this.val.args[0],0)}annot(){return Array.isArray(this.val.annots)?super.annot():this.createToken(this.val.args[0],this.idx).annot()}Encode(e){const r=e;return r==null?{prim:"None"}:Array.isArray(r)&&(r[r.length-1]===void 0||r[r.length-1]===null)?(r.pop(),{prim:"None"}):{prim:"Some",args:[this.schema().Encode(e)]}}EncodeObject(e,r){const n=e;return n==null?{prim:"None"}:{prim:"Some",args:[this.schema().EncodeObject(n,r)]}}Execute(e,r){return e.prim==="None"?null:this.schema().Execute(e.args[0],r)}ExtractSchema(){return this.schema().ExtractSchema()}generateSchema(){return{__michelsonType:Sa.prim,schema:this.schema().generateSchema()}}ExtractSignature(){return[...this.schema().ExtractSignature(),[]]}get KeySchema(){return this.schema()}compare(e,r){if(e){if(!r)return 1}else return-1;return this.KeySchema.compare(e,r)}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,r){return Sa.prim===e&&r.push(this),this.subToken().findAndReturnTokens(e,r),r}}Sa.prim="option";class $n extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){if(e.string&&/^\d+$/.test(e.string))return new Date(Number(e.string)*1e3).toISOString();if(e.string)return new Date(e.string).toISOString();if(e.int)return new Date(Number(e.int)*1e3).toISOString()}Encode(e){const r=e.pop();return typeof r=="number"?{int:String(r)}:{string:r}}EncodeObject(e,r){return r&&r[$n.prim]?r[$n.prim](e):typeof e=="number"?{int:String(e)}:{string:e}}ExtractSchema(){return $n.prim}generateSchema(){return{__michelsonType:$n.prim,schema:$n.prim}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:$n.prim}}}findAndReturnTokens(e,r){return $n.prim===e&&r.push(this),r}}$n.prim="timestamp";class EN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="IntValidationError"}}class Ar extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new ve(e[Object.keys(e)[0]])}ExtractSchema(){return Ar.prim}generateSchema(){return{__michelsonType:Ar.prim,schema:Ar.prim}}isValid(e){return new ve(e).isNaN()?new EN(e,this,`Value is not a number: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:new ve(r).toFixed()}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Ar.prim]?r[Ar.prim](e):{int:new ve(e).toFixed()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:Ar.prim}}}ToKey({int:e}){return e}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return Ar.prim===e&&r.push(this),r}}Ar.prim="int";class zn extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){return e.pop(),{prim:"Unit"}}EncodeObject(e,r){return r&&r[zn.prim]?r[zn.prim](e):{prim:"Unit"}}Execute(e){return Gv}ExtractSchema(){return zn.prim}generateSchema(){return{__michelsonType:zn.prim,schema:zn.prim}}compare(e,r){return 0}ToKey(e){return Gv}ToBigMapKey(e){return{key:{prim:"Unit"},type:{prim:zn.prim}}}findAndReturnTokens(e,r){return zn.prim===e&&r.push(this),r}}zn.prim="unit";const wN=4;class _N extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="KeyValidationError"}}class Wn extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:II(e.bytes)}isValid(e){return _I(e)!==_e.VALID?new _N(e,this,"Key is not valid"):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Wn.prim]?r[Wn.prim](e):{string:e}}ExtractSchema(){return Wn.prim}generateSchema(){return{__michelsonType:Wn.prim,schema:Wn.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:Wn.prim}}}compare(e,r){const n=this.getPrefix(e),i=this.getPrefix(r);if(n===ne.EDPK&&i!==ne.EDPK)return-1;if(n===ne.SPPK&&i!==ne.SPPK)return i===ne.EDPK?1:-1;if(n===ne.P2PK){if(i!==ne.P2PK)return 1;const s=this.getP256PublicKeyComparableBytes(e),o=this.getP256PublicKeyComparableBytes(r);return te.compare(s,o)}return super.compare(e,r)}getPrefix(e){return e.substring(0,wN)}getP256PublicKeyComparableBytes(e){return rw(e,Sr[ne.P2PK]).slice(1)}findAndReturnTokens(e,r){return Wn.prim===e&&r.push(this),r}}Wn.prim="key";class AN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="KeyHashValidationError"}}class Xn extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:gv(e.bytes)}isValid(e){return b1(e)!==_e.VALID?new AN(e,this,`KeyHash is not valid: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Xn.prim]?r[Xn.prim](e):{string:e}}ExtractSchema(){return Xn.prim}generateSchema(){return{__michelsonType:Xn.prim,schema:Xn.prim}}ToKey({string:e,bytes:r}){return e||gv(r)}ToBigMapKey(e){return{key:{string:e},type:{prim:Xn.prim}}}findAndReturnTokens(e,r){return Xn.prim===e&&r.push(this),r}}Xn.prim="key_hash";class xN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SignatureValidationError"}}class Jn extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:e.bytes}isValid(e){return wI(e)!==_e.VALID?new xN(e,this,"Signature is not valid"):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Jn.prim]?r[Jn.prim](e):{string:e}}ExtractSchema(){return Jn.prim}generateSchema(){return{__michelsonType:Jn.prim,schema:Jn.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:Jn.prim}}}findAndReturnTokens(e,r){return Jn.prim===e&&r.push(this),r}}Jn.prim="signature";class Ps extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get paramSchema(){return this.createToken(this.val.args[0],this.idx)}get returnSchema(){return this.createToken(this.val.args[1],this.idx+1)}Execute(e){return e.string?e.string:e}Encode(e){return e.pop()}EncodeObject(e,r){return r&&r[Ps.prim]?r[Ps.prim](e):e}ExtractSchema(){return{[Ps.prim]:{parameters:this.paramSchema.ExtractSchema(),returns:this.returnSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:Ps.prim,schema:{parameters:this.paramSchema.generateSchema(),returns:this.returnSchema.generateSchema()}}}findAndReturnTokens(e,r){return Ps.prim===e&&r.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,r),this.createToken(this.val.args[1],this.idx).findAndReturnTokens(e,r),r}}Ps.prim="lambda";class Di extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string}Encode(...e){return{string:e.pop()}}EncodeObject(e,r){return r&&r[Di.prim]?r[Di.prim](e):{string:e}}ExtractSchema(){return Di.prim}generateSchema(){return{__michelsonType:Di.prim,schema:Di.prim}}findAndReturnTokens(e,r){return Di.prim===e&&r.push(this),r}}Di.prim="operation";class SN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SetValidationError"}}class Ns extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(e){return Array.isArray(e)?null:new SN(e,this,"Value must be an array")}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return r.sort((i,s)=>this.KeySchema.compare(i,s)).reduce((i,s)=>[...i,this.KeySchema.EncodeObject(s)],[])}Execute(e,r){return e.reduce((n,i)=>[...n,this.KeySchema.Execute(i,r)],[])}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Ns.prim]?r[Ns.prim](e):e.sort((i,s)=>this.KeySchema.compare(i,s)).reduce((i,s)=>[...i,this.KeySchema.EncodeObject(s)],[])}ExtractSchema(){return Ns.prim}generateSchema(){return{__michelsonType:Ns.prim,schema:this.KeySchema.generateSchema()}}findAndReturnTokens(e,r){return Ns.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),r}}Ns.prim="set";class RN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChainIDValidationError"}}class Yn extends Bt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return ew(e)!==_e.VALID?new RN(e,this,"ChainID is not valid"):null}Execute(e){return e[Object.keys(e)[0]]}ExtractSchema(){return Yn.prim}generateSchema(){return{__michelsonType:Yn.prim,schema:Yn.prim}}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Yn.prim]?r[Yn.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Yn.prim}}}findAndReturnTokens(e,r){return Yn.prim===e&&r.push(this),r}}Yn.prim="chain_id";class kv extends Error{constructor(){super("Tickets cannot be sent to the blockchain; they are created on-chain"),this.name="TicketEncodeError"}}const TN={prim:"contract"},ON={prim:"int"};class ni extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new kv}EncodeObject(e,r){if(r&&r[ni.prim])return r[ni.prim](e,this.val);throw new kv}Execute(e,r){if(r&&r[ni.prim])return r[ni.prim](e,this.val);const n=this.createToken(TN,this.idx),i=this.valueToken,s=this.createToken(ON,this.idx);return e.args[2]===void 0&&e.args[1].args!==void 0?{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1].args[0],r),amount:s.Execute(e.args[1].args[1],r)}:{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1],r),amount:s.Execute(e.args[2],r)}}ExtractSchema(){return{ticketer:Dr.prim,value:this.valueToken.ExtractSchema(),amount:Ar.prim}}generateSchema(){return{__michelsonType:ni.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:Dr.prim,schema:Dr.prim},amount:{__michelsonType:Ar.prim,schema:Ar.prim}}}}findAndReturnTokens(e,r){return ni.prim===e&&r.push(this),this.valueToken.findAndReturnTokens(e,r),r}}ni.prim="ticket";class Dv extends Error{constructor(){super("Ticket_deprecated cannot be sent to the blockchain; they are created on-chain"),this.name="TicketDeprecatedEncodeError"}}const IN={prim:"contract"},PN={prim:"int"};class ii extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new Dv}EncodeObject(e,r){if(r&&r[ii.prim])return r[ii.prim](e,this.val);throw new Dv}Execute(e,r){if(r&&r[ii.prim])return r[ii.prim](e,this.val);const n=this.createToken(IN,this.idx),i=this.valueToken,s=this.createToken(PN,this.idx);return e.args[2]===void 0&&e.args[1].args!==void 0?{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1].args[0],r),amount:s.Execute(e.args[1].args[1],r)}:{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1],r),amount:s.Execute(e.args[2],r)}}ExtractSchema(){return{ticketer:Dr.prim,value:this.valueToken.ExtractSchema(),amount:Ar.prim}}generateSchema(){return{__michelsonType:ii.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:Dr.prim,schema:Dr.prim},amount:{__michelsonType:Ar.prim,schema:Ar.prim}}}}findAndReturnTokens(e,r){return ii.prim===e&&r.push(this),this.valueToken.findAndReturnTokens(e,r),r}}ii.prim="ticket_deprecated";class d0 extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="NeverTokenError"}}class Ui extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){const r=e.pop();throw new d0(r,this,"Assigning a value to the type never is forbidden.")}EncodeObject(e,r){if(r&&r[Ui.prim])return r[Ui.prim](e);throw new d0(e,this,"Assigning a value to the type never is forbidden.")}Execute(e){throw new d0(e,this,"There is no literal value for the type never.")}ExtractSchema(){return Ui.prim}generateSchema(){return{__michelsonType:Ui.prim,schema:Ui.prim}}findAndReturnTokens(e,r){return Ui.prim===e&&r.push(this),r}}Ui.prim="never";class p0 extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingStateValidationError"}}class Qn extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return typeof e=="object"&&Object.keys(e).length===0}Execute(e,r){if(r&&r[Qn.prim])return r[Qn.prim](e,this.val);if("int"in e)return e.int;throw new p0(e,this,`Sapling state is expecting an object with an int property. Got ${JSON.stringify(e)}`)}Encode(e){const r=e.pop();if(this.isValid(r))return[];throw new p0(r,this,`Invalid sapling_state. Received: ${r} while expecting: {}`)}EncodeObject(e,r){if(r&&r[Qn.prim])return r[Qn.prim](e);if(this.isValid(e))return[];throw new p0(e,this,`Invalid sapling_state. Received: ${e} while expecting: {}`)}ExtractSchema(){return{[Qn.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:Qn.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return Qn.prim===e&&r.push(this),r}}Qn.prim="sapling_state";class Uv extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingTransactionValidationError"}}class Ls extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){throw new Uv(e,this,"There is no literal value for the sapling_transaction type.")}validateBytes(e){const r=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(r&&r[2].length%2===0)return r[2];throw new Uv(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?te.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),{bytes:String(r).toString()}}EncodeObject(e,r){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),r&&r[Ls.prim]?r[Ls.prim](e):{bytes:String(e).toString()}}ExtractSchema(){return{[Ls.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:Ls.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return Ls.prim===e&&r.push(this),r}}Ls.prim="sapling_transaction";class Fv extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingTransactionDeprecatedValidationError"}}class Ms extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){throw new Fv(e,this,"There is no literal value for the sapling_transaction_deprecated type.")}validateBytes(e){const r=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(r&&r[2].length%2===0)return r[2];throw new Fv(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?te.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),{bytes:String(r).toString()}}EncodeObject(e,r){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),r&&r[Ms.prim]?r[Ms.prim](e):{bytes:String(e).toString()}}ExtractSchema(){return{[Ms.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:Ms.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return Ms.prim===e&&r.push(this),r}}Ms.prim="sapling_transaction_deprecated";class NN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381frValidationError"}}class Fi extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new NN(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?te.from(e).toString("hex"):e}Encode(e){let r=e.pop();if(typeof r=="number")return{int:r.toString()};{r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}}EncodeObject(e,r){if(r&&r[Fi.prim])return r[Fi.prim](e);if(typeof e=="number")return{int:e.toString()};{e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return{bytes:e}}}Execute(e){return e.bytes}ExtractSchema(){return Fi.prim}generateSchema(){return{__michelsonType:Fi.prim,schema:Fi.prim}}findAndReturnTokens(e,r){return Fi.prim===e&&r.push(this),r}}Fi.prim="bls12_381_fr";class LN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381g1ValidationError"}}class Ki extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new LN(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?te.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Ki.prim]?r[Ki.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Ki.prim}generateSchema(){return{__michelsonType:Ki.prim,schema:Ki.prim}}findAndReturnTokens(e,r){return Ki.prim===e&&r.push(this),r}}Ki.prim="bls12_381_g1";class MN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381g2ValidationError"}}class Hi extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new MN(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?te.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Hi.prim]?r[Hi.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Hi.prim}generateSchema(){return{__michelsonType:Hi.prim,schema:Hi.prim}}findAndReturnTokens(e,r){return Hi.prim===e&&r.push(this),r}}Hi.prim="bls12_381_g2";class CN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChestValidationError"}}class ji extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new CN(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?te.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[ji.prim]?r[ji.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return ji.prim}generateSchema(){return{__michelsonType:ji.prim,schema:ji.prim}}findAndReturnTokens(e,r){return ji.prim===e&&r.push(this),r}}ji.prim="chest";class BN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChestKeyValidationError"}}class Gi extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new BN(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?te.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Gi.prim]?r[Gi.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Gi.prim}generateSchema(){return{__michelsonType:Gi.prim,schema:Gi.prim}}findAndReturnTokens(e,r){return Gi.prim===e&&r.push(this),r}}Gi.prim="chest_key";class Kv extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="GlobalConstantEncodingError"}}class kN extends mt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="GlobalConstantDecodingError"}}class Zn extends Vt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e,r){if(r&&r[Zn.prim])return r[Zn.prim](e,this.val);throw new kN(e,this,`Unable to decode a value represented by a globalThis constants. Please provide an expanded script to the Michelson-Encoder or semantics for the decoding. The following globalThis constant hash was encountered: ${this.val.args[0].string}.`)}Encode(e){throw new Kv(e,this,`Unable to encode a script containing globalThis constants. Please provide an expanded script to the Michelson-Encoder. The following globalThis constant hash was encountered: ${this.val.args[0].string}.`)}EncodeObject(e,r){if(r&&r[Zn.prim])return r[Zn.prim](e);throw new Kv(e,this,`Unable to encode a script containing globalThis constants. Please provide an expanded script to the Michelson-Encoder. The following globalThis constant hash was encountered: ${this.val.args[0].string}.`)}ExtractSchema(){return Zn.prim}generateSchema(){return{__michelsonType:Zn.prim,schema:{hash:this.val.args[0].string}}}findAndReturnTokens(e,r){return Zn.prim===e&&r.push(this),r}}Zn.prim="constant";const DN=[Gt,Hn,jn,Jr,Bi,ki,ks,Gn,st,Dr,Is,qn,Vn,Sa,$n,Ar,zn,Wn,Xn,Jn,Ps,Di,Ns,Yn,ni,ii,Ui,Qn,Ls,Ms,Fi,Ki,Hi,ji,Gi,Zn];class UN extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="Invalid token error"}}function Io(t,e){if(Array.isArray(t))return new Gt(t,e,Io);const r=DN.find(n=>n.prim===t.prim);if(!r)throw new UN("Malformed data expected a value with a valid prim property",t);return new r(t,e,Io)}class FN extends Error{constructor(e,r){super(`Unable to encode the parameter of the view: ${e}.`),this.smartContractViewName=e,this.originalError=r,this.name="ViewEncodingError"}}class Hv extends Error{constructor(e){super(e),this.message=e,this.name="InvalidScriptError"}}class _w extends Error{constructor(e){super("Invalid RPC response passed as argument(s)"),this.script=e,this.name="InvalidRpcResponseError"}}class jv extends Error{constructor(e,r,n){super(`
      ${e}. Error encountered when trying to encode arguments: 

      [${r}]
    `),this.message=e,this.args=r,this.originalError=n,this.name="ParameterEncodingError"}}class Vf extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBigMapSchema"}}class KN extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBigMapDiff"}}class HN extends Error{constructor(e,r){super(`Unable to encode ${e}. ${r}`),this.obj=e,this.details=r,this.name="BigMapEncodingError"}}class jN extends Error{constructor(e,r){super(`Unable to encode ${e}. ${r}`),this.obj=e,this.details=r,this.name="StorageEncodingError"}}class GN extends Error{constructor(e){super(e),this.message=e,this.name="MissingArgumentError"}}var Aw;const xw=Symbol.for("taquito-schema-type-symbol");function Bc(t,e=Gt.prim){var r,n;if(Array.isArray(t))return Bc({prim:e,args:t},e);const i=t;return i.prim===e&&i.args&&i.args.length>2?Object.assign(Object.assign({},i),{args:[(r=i.args)===null||r===void 0?void 0:r[0],{prim:e,args:(n=i.args)===null||n===void 0?void 0:n.slice(1)}]}):i}function Sw(t,e){const r=Bc(t),n=Bc(e);return r.prim===n.prim&&(r.args===void 0&&n.args===void 0||r.args!==void 0&&n.args!==void 0&&r.args.length===n.args.length&&r.args.every((i,s)=>{var o,a;return Sw(i,(a=(o=n.args)===null||o===void 0?void 0:o[s])!==null&&a!==void 0?a:{})}))&&(r.annots===void 0&&n.annots===void 0||r.annots!==void 0&&n.annots!==void 0&&r.annots.length===n.annots.length&&r.annots.every((i,s)=>{var o;return i===((o=n.annots)===null||o===void 0?void 0:o[s])}))}class Qr{constructor(e){if(this.val=e,this[Aw]=!0,this.root=Io(e,0),this.root instanceof Jr)this.bigMap=this.root;else if(this.isExpressionExtended(e)&&e.prim==="pair"){const r=e.args[0];this.isExpressionExtended(r)&&r.prim==="big_map"&&(this.bigMap=new Jr(r,0,Io))}}static isSchema(e){return e&&e[xw]===!0}static fromRPCResponse(e){const r=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.find(n=>{if(Array.isArray(n))this.fromRPCResponse({script:{code:n,storage:e.script.storage}});else{const i=n;return i.prim?i.prim==="storage":!1}});if(!r||!Array.isArray(r.args))throw new _w(e.script);return new Qr(r.args[0])}isExpressionExtended(e){return"prim"in e&&Array.isArray(e.args)}removeTopLevelAnnotation(e){return(this.root instanceof Gt||this.root instanceof st)&&this.root.hasAnnotations()&&typeof e=="object"&&Object.keys(e).length===1?e[Object.keys(e)[0]]:e}Execute(e,r){const n=this.root.Execute(e,r);return this.removeTopLevelAnnotation(n)}Typecheck(e){if(this.root instanceof Jr&&Number.isInteger(Number(e))||this.root instanceof ni&&e.ticketer&&e.value&&e.amount||this.root instanceof ii&&e.ticketer&&e.value&&e.amount||this.root instanceof ks&&this.root.ValueSchema instanceof Jr)return!0;try{return this.root.EncodeObject(e),!0}catch{return!1}}ExecuteOnBigMapDiff(e,r){if(!this.bigMap)throw new Vf("Big map schema is undefined");if(!Array.isArray(e))throw new KN("Big map diff must be an array");const n=e.map(({key:i,value:s})=>({args:[i,s]}));return this.bigMap.Execute(n,r)}ExecuteOnBigMapValue(e,r){if(!this.bigMap)throw new Vf("No big map schema");return this.bigMap.ValueSchema.Execute(e,r)}EncodeBigMapKey(e){if(!this.bigMap)throw new Vf("Big map schema is undefined");try{return this.bigMap.KeySchema.ToBigMapKey(e)}catch(r){throw new HN("big map key",r)}}Encode(e,r){try{return this.root.EncodeObject(e,r)}catch(n){throw n instanceof mt?n:new jN("storage object",n)}}ExtractSchema(){return this.removeTopLevelAnnotation(this.root.ExtractSchema())}generateSchema(){return this.removeTopLevelAnnotation(this.root.generateSchema())}ComputeState(e,r){if(!this.bigMap)throw new Vf("Big map schema is undefined");const n=e.reduce((i,s)=>Object.assign(Object.assign({},i),this.ExecuteOnBigMapDiff(s.contents[0].metadata.operation_result.big_map_diff)),{});return Object.assign(Object.assign({},this.Execute(r)),{[this.bigMap.annot()]:n})}FindFirstInTopLevelPair(e,r){return this.findValue(this.root.val,e,r)}findValue(e,r,n){if(Sw(n,e))return r;if(Array.isArray(e)||e.prim==="pair"){const i=Bc(e),s=Bc(r,"Pair");if(i.args===void 0||s.args===void 0)throw new GN("Tokens have no arguments");if(i.args[0])return this.findValue(i.args[0],s.args[0],n)||this.findValue(i.args[1],s.args[1],n)}}findToken(e){const r=[];return this.root.findAndReturnTokens(e,r)}}Aw=xw;class na{constructor(e){this.root=Io(e,0)}static fromRPCResponse(e){const r=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.find(n=>n.prim==="parameter");if(!r||!Array.isArray(r.args))throw new _w(e.script);return new na(r.args[0])}get isMultipleEntryPoint(){return this.root instanceof st||this.root instanceof Sa&&this.root.subToken()instanceof st}get hasAnnotation(){return this.isMultipleEntryPoint?Object.keys(this.ExtractSchema())[0]!=="0":!0}Execute(e,r){return this.root.Execute(e,r)}Encode(...e){try{return this.root.Encode(e.reverse())}catch(r){throw r instanceof mt?r:new jv("Unable to encode parameter",e.toString(),r)}}EncodeObject(e,r){try{return this.root.EncodeObject(e,r)}catch(n){throw n instanceof mt?n:new jv("Unable to encode parameter object",e,n)}}ExtractSchema(){return this.root.ExtractSchema()}generateSchema(){return this.root.generateSchema()}ExtractSignatures(){return this.root.ExtractSignature()}}class R1{constructor(e){if(e.length!==4||!("string"in e[0]))throw new Hv(`Invalid on-chain view: ${JSON.stringify(e)}`);this.viewName=e[0].string,this.viewArgsType=e[1],this.viewReturnType=e[2],this.instructions=e[3],this.rootArgsType=Io(this.viewArgsType,0),this.rootReturnType=Io(this.viewReturnType,0)}static fromRPCResponse(e){const r=[],n=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.filter(i=>i.prim==="view");return n&&n.forEach(i=>{if(!i.args||i.args.length!==4)throw new Hv(`Invalid on-chain view found in the script: ${JSON.stringify(i)}`);r.push(new R1(i.args))}),r}encodeViewArgs(e){try{return this.rootArgsType.EncodeObject(e)}catch(r){throw new FN(this.viewName,r)}}decodeViewResult(e,r){return this.rootReturnType.Execute(e,r)}extractArgsSchema(){return this.rootArgsType.ExtractSchema()}extractResultSchema(){return this.rootReturnType.ExtractSchema()}}const Gv=Symbol(),Ir=Symbol("source_reference");class lo extends Error{constructor(e,r,n){super(n),this.src=e,this.idx=r,Object.setPrototypeOf(this,lo.prototype)}}var Mr;(function(t){t[t.Comment=0]="Comment",t[t.Number=1]="Number",t[t.String=2]="String",t[t.Bytes=3]="Bytes",t[t.Ident=4]="Ident"})(Mr||(Mr={}));const qN=new RegExp("\\s"),VN=new RegExp("[:@%_A-Za-z]"),$N=new RegExp("[@%_\\.A-Za-z0-9]"),qv=new RegExp("[0-9]"),zN=new RegExp("[0-9a-fA-F]");function*g0(t,e=!1){let r=0;for(;r<t.length;){for(;r<t.length&&qN.test(t[r]);)r++;if(r===t.length)return;const n=t[r],i=r;if(VN.test(n)){for(r++;r<t.length&&$N.test(t[r]);)r++;yield{t:Mr.Ident,v:t.slice(i,r),first:i,last:r}}else if(t.length-r>1&&t.substr(r,2)==="0x"){for(r+=2;r<t.length&&zN.test(t[r]);)r++;if(r-i&1)throw new lo(t,r,"Bytes literal length is expected to be power of two");yield{t:Mr.Bytes,v:t.slice(i,r),first:i,last:r}}else if(qv.test(n)||n==="-"){n==="-"&&r++;const s=r;for(;r<t.length&&qv.test(t[r]);)r++;if(s===r)throw new lo(t,r,"Number literal is too short");yield{t:Mr.Number,v:t.slice(i,r),first:i,last:r}}else if(n==='"'){r++;let s=!1;for(;r<t.length&&(s||t[r]!=='"');r++)!s&&t[r]==="\\"?s=!0:s=!1;if(r===t.length)throw new lo(t,r,"Unterminated string literal");r++,yield{t:Mr.String,v:t.slice(i,r),first:i,last:r}}else if(n==="#"){for(r++;r<t.length&&t[r]!==`
`;)r++;e&&(yield{t:Mr.Comment,v:t.slice(i,r),first:i,last:r})}else if(t.length-r>1&&t.substr(r,2)==="/*"){for(r+=2;r<t.length&&!(t.length-r>1&&t.substr(r,2)==="*/");)r++;if(r===t.length)throw new lo(t,r,"Unterminated C style comment");r+=2,e&&(yield{t:Mr.Comment,v:t.slice(i,r),first:i,last:r})}else if(n==="("||n===")"||n==="{"||n==="}"||n===";")r++,yield{t:n,v:n,first:i,last:r};else throw new lo(t,r,`Invalid character at offset ${r}: \`${n}'`)}}const $f=Symbol("ref_contract");var ts;(function(t){t.Ps9mPmXa="Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P",t.PtCJ7pwo="PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY",t.PsYLVpVv="PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt",t.PsddFKi3="PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP",t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdoTez="PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLoren="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANAD="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangzH="PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakarta="PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(ts||(ts={}));const Rw=ts.Psithaca2,Vv={Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P:0,PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY:1,PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt:2,PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP:3,Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd:4,PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU:5,PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS:5,PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb:6,PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo:7,PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq:8,PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA:8,PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i:9,PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV:10,PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r:11,PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx:11,PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP:12,Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A:12,PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw:13,PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY:13,PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg:14,PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW:15,ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK:16};function ia(t,e){return Vv[t]<Vv[e]}class Zr extends Error{constructor(e,r){super(r),this.prim=e,Object.setPrototypeOf(this,Zr.prototype)}}function Tt(t,e){var r,n;if(e===0&&t.args===void 0||((r=t.args)===null||r===void 0?void 0:r.length)===e)return!0;throw new Zr(t,`macro ${t.prim} expects ${e} arguments, was given ${(n=t.args)===null||n===void 0?void 0:n.length}`)}function dc(t){if(t.annots===void 0)return!0;throw new Zr(t,`unexpected annotation on macro ${t.prim}: ${t.annots}`)}function $v(t,e){if("int"in e)return!0;throw new Zr(t,`macro ${t.prim} expects int argument`)}function Rc(t,e,r,n){let i=0,s=0;const o=[null,null];let a;if(i===e.length)throw new Zr(t,`unexpected end: ${t.prim}`);let c=e[i++];switch(c){case"P":{const{r:f,n:h,an:S}=Rc(t,e.slice(i),r.slice(s),n);a=f,i+=h,s+=S;break}case"A":s!==r.length&&(o[0]=r[s++]);break;default:throw new Zr(t,`${t.prim}: unexpected character: ${c}`)}let l;if(i===e.length)throw new Zr(t,`unexpected end: ${t.prim}`);switch(c=e[i++],c){case"P":{const{r:f,n:h,an:S}=Rc(t,e.slice(i),r.slice(s),n);l=f.map(([P,M])=>[P+1,M]),i+=h,s+=S;break}case"I":s!==r.length&&(o[1]=r[s++]);break;default:throw new Zr(t,`${t.prim}: unexpected character: ${c}`)}return{r:n(a,l,[0,o]),n:i,an:s}}function ju(t,e,r,n){const i=e[0];switch(i){case"A":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CAR",annots:["@%%"]},ju(t,e.slice(1),[],n)]]},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%@","%@",...r]}]:n.a;case"D":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CDR",annots:["@%%"]},ju(t,e.slice(1),[],n)]]},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%@",...r]}]:n.d;default:throw new Zr(t,`${t.prim}: unexpected character: ${i}`)}}function WN(t,e){let r=t.length;for(;r>0&&t[r-1]===e;)r--;return t.slice(0,r)}function b0(t){const e=[],r=[];if(t!==void 0)for(const n of t)(n.length!==0&&n[0]==="%"?e:r).push(n);return{fields:e,rest:r}}function Yt({prim:t,annots:e,args:r}){return Object.assign(Object.assign({prim:t},e&&{annots:e}),r&&{args:r})}const XN=/^P[PAI]{3,}R$/,JN=/^UNP[PAI]{2,}R$/,YN=/^C[AD]{2,}R$/,QN=/^SET_C[AD]+R$/,ZN=/^MAP_C[AD]+R$/,eL=/^DI{2,}P$/,tL=/^DU+P$/;function rL(t,e){const r=(e==null?void 0:e.protocol)||Rw;function n(i){return i!==void 0?[{prim:"RENAME",annots:i}]:[]}switch(t.prim){case"CMPEQ":case"CMPNEQ":case"CMPLT":case"CMPGT":case"CMPLE":case"CMPGE":if(Tt(t,0))return[{prim:"COMPARE"},Yt({prim:t.prim.slice(3),annots:t.annots})];break;case"IFEQ":case"IFNEQ":case"IFLT":case"IFGT":case"IFLE":case"IFGE":if(Tt(t,2))return[{prim:t.prim.slice(2)},Yt({prim:"IF",annots:t.annots,args:t.args})];break;case"IFCMPEQ":case"IFCMPNEQ":case"IFCMPLT":case"IFCMPGT":case"IFCMPLE":case"IFCMPGE":if(Tt(t,2))return[{prim:"COMPARE"},{prim:t.prim.slice(5)},Yt({prim:"IF",annots:t.annots,args:t.args})];break;case"FAIL":if(Tt(t,0)&&dc(t))return[{prim:"UNIT"},{prim:"FAILWITH"}];break;case"ASSERT":if(Tt(t,0)&&dc(t))return[{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_EQ":case"ASSERT_NEQ":case"ASSERT_LT":case"ASSERT_GT":case"ASSERT_LE":case"ASSERT_GE":if(Tt(t,0)&&dc(t))return[{prim:t.prim.slice(7)},{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_CMPEQ":case"ASSERT_CMPNEQ":case"ASSERT_CMPLT":case"ASSERT_CMPGT":case"ASSERT_CMPLE":case"ASSERT_CMPGE":if(Tt(t,0)&&dc(t))return[[{prim:"COMPARE"},{prim:t.prim.slice(10)}],{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_NONE":if(Tt(t,0)&&dc(t))return[{prim:"IF_NONE",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_SOME":if(Tt(t,0))return[{prim:"IF_NONE",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],n(t.annots)]}];break;case"ASSERT_LEFT":if(Tt(t,0))return[{prim:"IF_LEFT",args:[n(t.annots),[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_RIGHT":if(Tt(t,0))return[{prim:"IF_LEFT",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],n(t.annots)]}];break;case"IF_SOME":if(Tt(t,2))return[Yt({prim:"IF_NONE",annots:t.annots,args:[t.args[1],t.args[0]]})];break;case"IF_RIGHT":if(Tt(t,2))return[Yt({prim:"IF_LEFT",annots:t.annots,args:[t.args[1],t.args[0]]})];break;case"CAR":case"CDR":if(t.args!==void 0){if(Tt(t,1)&&$v(t,t.args[0])){const i=parseInt(t.args[0].int,10);return Yt({prim:"GET",args:[{int:t.prim==="CAR"?String(i*2+1):String(i*2)}],annots:t.annots})}}else return t}if(XN.test(t.prim)&&Tt(t,0)){const{fields:i,rest:s}=b0(t.annots),{r:o}=Rc(t,t.prim.slice(1),i,(a,c,l)=>[...a||[],...c||[],l]);return o.map(([a,c],l)=>{const f=[...WN(c,null).map(S=>S===null?"%":S),...a===0&&l===o.length-1?s:[]],h=Yt({prim:"PAIR",annots:f.length!==0?f:void 0});return a===0?h:{prim:"DIP",args:a===1?[[h]]:[{int:String(a)},[h]]}})}if(JN.test(t.prim))if(ia(r,ts.PtEdo2Zk)&&Tt(t,0)){const{r:i}=Rc(t,t.prim.slice(3),t.annots||[],(s,o,a)=>[a,...o||[],...s||[]]);return i.map(([s,o])=>{const a=[{prim:"DUP"},Yt({prim:"CAR",annots:o[0]!==null?[o[0]]:void 0}),{prim:"DIP",args:[[Yt({prim:"CDR",annots:o[1]!==null?[o[1]]:void 0})]]}];return s===0?a:{prim:"DIP",args:s===1?[[a]]:[{int:String(s)},[a]]}})}else{if(t.prim==="UNPAIR")return t;if(Tt(t,0)){const{r:i}=Rc(t,t.prim.slice(3),[],(s,o,a)=>[a,...o||[],...s||[]]);return i.map(([s])=>{const o=Yt({prim:"UNPAIR"});return s===0?o:{prim:"DIP",args:s===1?[[o]]:[{int:String(s)},[o]]}})}}if(YN.test(t.prim)&&Tt(t,0)){const i=[...t.prim.slice(1,t.prim.length-1)];return i.map((s,o)=>{const a=o===i.length-1?t.annots:void 0;switch(s){case"A":return Yt({prim:"CAR",annots:a});case"D":return Yt({prim:"CDR",annots:a});default:throw new Zr(t,`unexpected character: ${s}`)}})}if(QN.test(t.prim)&&Tt(t,0)){const{fields:i,rest:s}=b0(t.annots);if(i.length>1)throw new Zr(t,`unexpected annotation on macro ${t.prim}: ${i}`);const o=i.length!==0?{a:[{prim:"DUP"},{prim:"CAR",annots:i},{prim:"DROP"},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:[i[0],"%@"]}],d:[{prim:"DUP"},{prim:"CDR",annots:i},{prim:"DROP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",i[0]]}]}:{a:[{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%","%@"]}],d:[{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%"]}]};return ju(t,t.prim.slice(5,t.prim.length-1),s,o)}if(ZN.test(t.prim)&&Tt(t,1)){const{fields:i}=b0(t.annots);if(i.length>1)throw new Zr(t,`unexpected annotation on macro ${t.prim}: ${i}`);const s={a:[{prim:"DUP"},{prim:"CDR",annots:["@%%"]},{prim:"DIP",args:[[Yt({prim:"CAR",annots:i.length!==0?["@"+i[0].slice(1)]:void 0}),t.args[0]]]},{prim:"SWAP"},{prim:"PAIR",annots:[i.length!==0?i[0]:"%","%@"]}],d:[{prim:"DUP"},Yt({prim:"CDR",annots:i.length!==0?["@"+i[0].slice(1)]:void 0}),t.args[0],{prim:"SWAP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",i.length!==0?i[0]:"%"]}]};return ju(t,t.prim.slice(5,t.prim.length-1),[],s)}if(eL.test(t.prim)&&Tt(t,1)){let i=0;for(;t.prim[1+i]==="I";)i++;return Yt({prim:"DIP",args:[{int:String(i)},t.args[0]]})}if(tL.test(t.prim)){let i=0;for(;t.prim[1+i]==="U";)i++;if(ia(r,ts.PtEdo2Zk)){if(i===1){if(t.args===void 0)return t;Tt(t,1)&&$v(t,t.args[0])&&(i=parseInt(t.args[0].int,10))}else Tt(t,0);return i===1?[Yt({prim:"DUP",annots:t.annots})]:i===2?[{prim:"DIP",args:[[Yt({prim:"DUP",annots:t.annots})]]},{prim:"SWAP"}]:[{prim:"DIP",args:[{int:String(i-1)},[Yt({prim:"DUP",annots:t.annots})]]},{prim:"DIG",args:[{int:String(i)}]}]}else{if(i===1)return t;if(Tt(t,0))return Yt({prim:"DUP",args:[{int:String(i)}],annots:t.annots})}}return t}function nL(t,e){return t.args!==void 0&&t.args.length===1&&"string"in t.args[0]&&t.args[0].string in e?e[t.args[0].string]:t}class la extends Error{constructor(e,r){super(r),this.token=e,Object.setPrototypeOf(this,la.prototype)}}class Dn extends Error{constructor(e,r){super(r),this.node=e,Object.setPrototypeOf(this,Dn.prototype)}}const v0=new la(null,"Unexpected EOF");function zv(t){return t.t===Mr.Ident&&(t.v[0]==="@"||t.v[0]==="%"||t.v[0]===":")}const iL=new RegExp("^-?[0-9]+$"),sL=new RegExp("^([0-9a-fA-F]{2})*$");class mo{constructor(e){this.opt=e}expand(e){var r,n,i;if(((r=this.opt)===null||r===void 0?void 0:r.expandGlobalConstant)!==void 0&&e.prim==="constant"){const s=nL(e,this.opt.expandGlobalConstant);return s!==e&&(s[Ir]=Object.assign(Object.assign({},e[Ir]||{first:0,last:0}),{globalConstant:e})),s}if(((n=this.opt)===null||n===void 0?void 0:n.expandMacros)===void 0||!((i=this.opt)===null||i===void 0)&&i.expandMacros){const s=rL(e,this.opt);return s!==e&&(s[Ir]=Object.assign(Object.assign({},e[Ir]||{first:0,last:0}),{macro:e})),s}else return e}parseListExpr(e,r){var n;const i={first:r.first,last:r.last},s=r.t==="(";let o;if(s){if(o=e.next(),o.done)throw v0;i.last=o.value.last}else o={value:r};if(o.value.t!==Mr.Ident)throw new la(o.value,`not an identifier: ${o.value.v}`);const a={prim:o.value.v,[Ir]:i};for(;;){const c=e.next();if(c.done){if(s)throw v0;break}else if(c.value.t===")"){if(!s)throw new la(c.value,"unexpected closing bracket");i.last=c.value.last;break}else if(zv(c.value))a.annots=a.annots||[],a.annots.push(c.value.v),i.last=c.value.last;else{a.args=a.args||[];const l=this.parseExpr(e,c.value);i.last=((n=l[Ir])===null||n===void 0?void 0:n.last)||i.last,a.args.push(l)}}return this.expand(a)}parseArgs(e,r){var n;const i={first:r.first,last:r.last},s={prim:r.v,[Ir]:i};for(;;){const o=e.next();if(o.done||o.value.t==="}"||o.value.t===";")return[s,o];if(zv(o.value))i.last=o.value.last,s.annots=s.annots||[],s.annots.push(o.value.v);else{const a=this.parseExpr(e,o.value);i.last=((n=a[Ir])===null||n===void 0?void 0:n.last)||i.last,s.args=s.args||[],s.args.push(a)}}}parseSequenceExpr(e,r){var n,i;const s={first:r.first,last:r.last},o=[];o[Ir]=s;const a=r.t==="{";let c=r.t==="{"?null:{value:r};for(;;){if(c===null&&(c=e.next(),c.done||(s.last=c.value.last)),c.done){if(a)throw v0;return o}if(c.value.t==="}"){if(a)return o;throw new la(c.value,"unexpected closing bracket")}else if(c.value.t===Mr.Ident){const[l,f]=this.parseArgs(e,c.value);s.last=((n=l[Ir])===null||n===void 0?void 0:n.last)||s.last,o.push(this.expand(l)),c=f}else{const l=this.parseExpr(e,c.value);s.last=((i=l[Ir])===null||i===void 0?void 0:i.last)||s.last,o.push(l),c=null}c===null&&(c=e.next(),c.done||(s.last=c.value.last)),!c.done&&c.value.t===";"&&(c=null)}}parseExpr(e,r){switch(r.t){case Mr.Ident:return this.expand({prim:r.v,[Ir]:{first:r.first,last:r.last}});case Mr.Number:return{int:r.v,[Ir]:{first:r.first,last:r.last}};case Mr.String:return{string:JSON.parse(r.v),[Ir]:{first:r.first,last:r.last}};case Mr.Bytes:return{bytes:r.v.slice(2),[Ir]:{first:r.first,last:r.last}};case"{":return this.parseSequenceExpr(e,r);default:return this.parseListExpr(e,r)}}parseSequence(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=g0(e),n=r.next();return n.done?null:this.parseSequenceExpr(r,n.value)}parseList(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=g0(e),n=r.next();return n.done?null:this.parseListExpr(r,n.value)}parseMichelineExpression(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=g0(e),n=r.next();return n.done?null:this.parseExpr(r,n.value)}parseScript(e){return this.parseSequence(e)}parseData(e){return this.parseList(e)}parseJSON(e){if(typeof e!="object")throw new TypeError(`object type was expected, got ${typeof e} instead`);if(Array.isArray(e)){const r=[];for(const n of e){if(n===null||typeof n!="object")throw new Dn(n,`unexpected sequence element: ${n}`);r.push(this.parseJSON(n))}return r}else if("prim"in e){const r=e;if(typeof r.prim=="string"&&(r.annots===void 0||Array.isArray(r.annots))&&(r.args===void 0||Array.isArray(r.args))){const n={prim:r.prim};if(r.annots!==void 0){for(const i of r.annots)if(typeof i!="string")throw new Dn(i,`string expected: ${i}`);n.annots=r.annots}if(r.args!==void 0){n.args=[];for(const i of r.args){if(i===null||typeof i!="object")throw new Dn(i,`unexpected argument: ${i}`);n.args.push(this.parseJSON(i))}}return this.expand(n)}throw new Dn(e,`malformed prim expression: ${e}`)}else if("string"in e){if(typeof e.string=="string")return{string:e.string};throw new Dn(e,`malformed string literal: ${e}`)}else if("int"in e){if(typeof e.int=="string"&&iL.test(e.int))return{int:e.int};throw new Dn(e,`malformed int literal: ${e}`)}else if("bytes"in e){if(typeof e.bytes=="string"&&sL.test(e.bytes))return{bytes:e.bytes};throw new Dn(e,`malformed bytes literal: ${e}`)}else throw new Dn(e,`unexpected object: ${e}`)}}const oL=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],aL=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];class op extends Error{constructor(e){super(e),this.message=e,this.name="Base58DecodingError"}}class cL extends Error{constructor(e){super(e),this.message=e,this.name="InvalidMessageError"}}function Wv(t){const e=(t.length+9)%64,r=e===0?0:64-e;if(t.length>268435455)throw new cL(`SHA-256 -- message length is too big: ${t.length}`);const n=t.length<<3,i=[...t,128,...new Array(r).fill(0),0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255];function s(f,h){return f>>>h|f<<32-h}const o=[...oL],a=new Array(64),c=new Array(8);for(let f=0;f<i.length;f+=64){let h=f,S=0;for(;S<16;)a[S]=i[h]<<24|i[h+1]<<16|i[h+2]<<8|i[h+3],h+=4,S++;for(;S<64;){const P=s(a[S-15],7)^s(a[S-15],18)^a[S-15]>>>3,M=s(a[S-2],17)^s(a[S-2],19)^a[S-2]>>>10;a[S]=(M|0)+a[S-7]+P+a[S-16]|0,S++}for(let P=0;P<8;P++)c[P]=o[P];for(let P=0;P<64;P++){const M=s(c[0],2)^s(c[0],13)^s(c[0],22),H=s(c[4],6)^s(c[4],11)^s(c[4],25),$=c[7]+H+(c[4]&c[5]^~c[4]&c[6])+aL[P]+a[P]|0,q=M+(c[0]&c[1]^c[0]&c[2]^c[1]&c[2])|0;c[7]=c[6],c[6]=c[5],c[5]=c[4],c[4]=c[3]+$|0,c[3]=c[2],c[2]=c[1],c[1]=c[0],c[0]=$+q|0}for(let P=0;P<8;P++)o[P]=o[P]+c[P]|0}const l=[];for(const f of o)l.push(f>>24&255),l.push(f>>16&255),l.push(f>>8&255),l.push(f&255);return l}const m0=[0,1,2,3,4,5,6,7,8,-1,-1,-1,-1,-1,-1,-1,9,10,11,12,13,14,15,16,-1,17,18,19,20,21,-1,22,23,24,25,26,27,28,29,30,31,32,-1,-1,-1,-1,-1,-1,33,34,35,36,37,38,39,40,41,42,43,-1,44,45,46,47,48,49,50,51,52,53,54,55,56,57];function Xv(t,e){const r=t.charCodeAt(e)-49;if(r>=m0.length||m0[r]===-1)throw new op(`Unexpected character at position ${e}: ${t[e]}`);return m0[r]}function fL(t){const e=[];let r=0;for(;r<t.length&&Xv(t,r)===0;)r++;let n=r;for(;r<t.length;){let i=Xv(t,r++),s=0;for(;i!==0||s<e.length;){const o=(e[s]||0)*58+i;e[s++]=o%256,i=Math.floor(o/256)}}for(;n-- >0;)e.push(0);return e.reverse()}function Tw(t){const e=fL(t);if(e.length<4)throw new op(`Data is too short ${e.length}`);const r=e.slice(0,e.length-4),n=e.slice(e.length-4),i=Wv(Wv(r));if(n[0]!==i[0]||n[1]!==i[1]||n[2]!==i[2]||n[3]!==i[3])throw new op("Invalid checksum");return r}class uL extends Error{constructor(e){super(e),this.message=e,this.name="InvalidContractError"}}class lL extends Error{constructor(e){super(e),this.message=e,this.name="InvalidTypeExpressionError"}}class hL extends Error{constructor(e){super(e),this.message=e,this.name="InvalidDataExpressionError"}}class dL extends Error{constructor(e){super(`Contract has no entrypoint named: '${e}'`),this.entrypoint=e,this.name="InvalidEntrypointError"}}class pL extends Error{constructor(e){super(e),this.message=e,this.name="LongIntegerError"}}class gL extends Error{constructor(e){super(`Unable to parse hex byte: ${e}`),this.hexByte=e,this.name="HexParseError"}}class en extends Error{constructor(e,r){super(r),this.val=e,Object.setPrototypeOf(this,en.prototype)}}class Se extends en{constructor(e,r,n){super(e,n),r!==void 0&&(this.data=r),Object.setPrototypeOf(this,Se.prototype)}}class Ow{constructor(e){if(this.neg=!1,this.buf=[],e!==void 0)if(typeof e=="string")for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);if(r===0&&n===45)this.neg=!0;else{if(n<48||n>57)throw new pL(`unexpected character in integer constant: ${e[r]}`);this.append(n-48)}}else e<0?(this.neg=!0,this.append(-e)):this.append(e)}append(e){let r=0;for(;e!==0||r<this.buf.length;){const n=(this.buf[r]||0)*10+e;this.buf[r++]=n%256,e=Math.floor(n/256)}}cmp(e){if(this.neg!==e.neg)return(e.neg?1:0)-(this.neg?1:0);{let r=0;if(this.buf.length!==e.buf.length)r=this.buf.length<e.buf.length?-1:1;else if(this.buf.length!==0){let n=e.buf.length-1;for(;n>=0&&this.buf[n]===e.buf[n];)n--;r=n<0?0:this.buf[n]<e.buf[n]?-1:1}return this.neg?r===0?0:-r:r}}get sign(){return this.buf.length===0?0:this.neg?-1:1}}function ha(t){const e=[];for(let r=0;r<t.length;r+=2){const n=parseInt(t.slice(r,r+2),16);if(Number.isNaN(n))return null;e.push(n)}return e}function ap(t){try{return new Ow(t),!0}catch{return!1}}function Iw(t){try{return new Ow(t).sign>=0}catch{return!1}}const bL=/^(@%|@%%|%@|[@:%]([_0-9a-zA-Z][_0-9a-zA-Z.%@]*)?)$/;function Ra(t,e){if(Array.isArray(t))return{};let r,n,i;if(t.annots!==void 0){for(const s of t.annots)if(s.length!==0){if(!bL.test(s)||!(e!=null&&e.specialVar)&&(s==="@%"||s==="@%%")||!(e!=null&&e.specialFields)&&s==="%@")throw new en(t,`${t.prim}: unexpected annotation: ${s}`);switch(s[0]){case"%":(e!=null&&e.emptyFields||s.length>1)&&(r=r||[],r.push(s));break;case":":s.length>1&&(n=n||[],n.push(s));break;case"@":(e!=null&&e.emptyVar||s.length>1)&&(i=i||[],i.push(s));break}}}return{f:r,t:n,v:i}}const vL={BlockHash:[32,[1,52]],OperationHash:[32,[5,116]],OperationListHash:[32,[133,233]],OperationListListHash:[32,[29,159,109]],ProtocolHash:[32,[2,170]],ContextHash:[32,[79,199]],ED25519PublicKeyHash:[20,[6,161,159]],SECP256K1PublicKeyHash:[20,[6,161,161]],P256PublicKeyHash:[20,[6,161,164]],ContractHash:[20,[2,90,121]],CryptoboxPublicKeyHash:[16,[153,103]],ED25519Seed:[32,[13,15,58,7]],ED25519PublicKey:[32,[13,15,37,217]],SECP256K1SecretKey:[32,[17,162,224,201]],P256SecretKey:[32,[16,81,238,189]],ED25519EncryptedSeed:[56,[7,90,60,179,41]],SECP256K1EncryptedSecretKey:[56,[9,237,241,174,150]],P256EncryptedSecretKey:[56,[9,48,57,115,171]],SECP256K1PublicKey:[33,[3,254,226,86]],P256PublicKey:[33,[3,178,139,127]],SECP256K1Scalar:[33,[38,248,136]],SECP256K1Element:[33,[5,92,0]],ED25519SecretKey:[64,[43,246,78,7]],ED25519Signature:[64,[9,245,205,134,18]],SECP256K1Signature:[64,[13,115,101,19,63]],P256Signature:[64,[54,240,44,52]],GenericSignature:[64,[4,130,43]],ChainID:[4,[87,82,0]],RollupAddress:[20,[1,128,120,31]],TxRollupL2Address:[20,[6,161,166]]};function Vi(t,...e){const r=Tw(t);for(const n of e){const[i,s]=vL[n];if(r.length===i+s.length){let o=0;for(;o<s.length&&r[o]===s[o];)o++;if(o===s.length)return[n,r.slice(s.length)]}}return null}function Wr(t,e){const r=e,n=Array.isArray(r)?r:r.args;return n.length===2?t==="pair"?{prim:"pair",args:n}:{prim:"Pair",args:n}:Object.assign(Object.assign({},Array.isArray(r)?{prim:t}:r),{args:[n[0],{prim:t,args:n.slice(1)}]})}function $i(t){return Array.isArray(t)||t.prim==="pair"}function Pw(t){return Array.isArray(t)||"prim"in t&&t.prim==="Pair"}const mL=/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])[T ]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|[+-]([01][0-9]|2[0-3]):([0-5][0-9]))$/;function Nw(t){if("string"in t){if(Iw(t.string))return new Date(parseInt(t.string,10));if(mL.test(t.string)){const e=new Date(t.string);if(!Number.isNaN(e.valueOf))return e}}else if(ap(t.int))return new Date(parseInt(t.int,10));return null}function yL(t){const e=[];for(let r=0;r<t.length;r+=2){const n=t.slice(r,r+2),i=parseInt(n,16);if(Number.isNaN(i))throw new gL(n);e.push(i)}return e}function ea(t){return t.map(e=>(e>>4&15).toString(16)+(e&15).toString(16)).join("")}const EL=31,Lw={ABS:!0,ADD:!0,ADDRESS:!0,AMOUNT:!0,AND:!0,APPLY:!0,BALANCE:!0,BLAKE2B:!0,CAR:!0,CDR:!0,CHAIN_ID:!0,CHECK_SIGNATURE:!0,COMPARE:!0,CONCAT:!0,CONS:!0,EDIV:!0,EQ:!0,EXEC:!0,FAILWITH:!0,GE:!0,GET_AND_UPDATE:!0,GT:!0,HASH_KEY:!0,IMPLICIT_ACCOUNT:!0,INT:!0,ISNAT:!0,JOIN_TICKETS:!0,KECCAK:!0,LE:!0,LEVEL:!0,LSL:!0,LSR:!0,LT:!0,MEM:!0,MUL:!0,NEG:!0,NEQ:!0,NEVER:!0,NOT:!0,NOW:!0,OR:!0,PACK:!0,PAIRING_CHECK:!0,READ_TICKET:!0,SAPLING_VERIFY_UPDATE:!0,SELF:!0,SELF_ADDRESS:!0,SENDER:!0,SET_DELEGATE:!0,SHA256:!0,SHA3:!0,SHA512:!0,SIZE:!0,SLICE:!0,SOME:!0,SOURCE:!0,SPLIT_TICKET:!0,SUB:!0,SWAP:!0,TICKET:!0,TICKET_DEPRECATED:!0,TOTAL_VOTING_POWER:!0,TRANSFER_TOKENS:!0,UNIT:!0,VOTING_POWER:!0,XOR:!0,RENAME:!0,OPEN_CHEST:!0,SUB_MUTEZ:!0,MIN_BLOCK_TIME:!0},Mw=Object.assign({},Lw,{CONTRACT:!0,CREATE_CONTRACT:!0,DIG:!0,DIP:!0,DROP:!0,DUG:!0,DUP:!0,EMIT:!0,EMPTY_BIG_MAP:!0,EMPTY_MAP:!0,EMPTY_SET:!0,GET:!0,IF:!0,IF_CONS:!0,IF_LEFT:!0,IF_NONE:!0,ITER:!0,LAMBDA:!0,LAMBDA_REC:!0,LEFT:!0,LOOP:!0,LOOP_LEFT:!0,MAP:!0,NIL:!0,NONE:!0,PAIR:!0,PUSH:!0,RIGHT:!0,SAPLING_EMPTY_STATE:!0,UNPACK:!0,UNPAIR:!0,UPDATE:!0,CAST:!0,VIEW:!0}),Cw={unit:!0,never:!0,bool:!0,int:!0,nat:!0,string:!0,chain_id:!0,bytes:!0,mutez:!0,key_hash:!0,key:!0,signature:!0,timestamp:!0,address:!0,tx_rollup_l2_address:!0},Xa=Object.assign({},Cw,{or:!0,pair:!0,set:!0,big_map:!0,contract:!0,lambda:!0,list:!0,map:!0,operation:!0,option:!0,bls12_381_g1:!0,bls12_381_g2:!0,bls12_381_fr:!0,sapling_transaction:!0,sapling_transaction_deprecated:!0,sapling_state:!0,ticket:!0,chest_key:!0,chest:!0});class gt extends en{constructor(e,r){super(e,r),this.val=e,Object.setPrototypeOf(this,gt.prototype)}}function Ei(t){return"prim"in t}function wL(t){return Array.isArray(t)||"prim"in t}function Bw(t){if(Ei(t))return!0;throw new gt(t,"prim expression expected")}function Cs(t){if(Array.isArray(t))return!0;throw new gt(t,"sequence expression expected")}function _r(t){if(wL(t))return!0;throw new gt(t,"prim or sequence expression expected")}function y0(t){if(t.int[0]==="-")throw new gt(t,"natural number expected")}function du(t){if("int"in t)return!0;throw new gt(t,"int literal expected")}function kw(t){if("string"in t)return!0;throw new gt(t,"string literal expected")}function ot(t,e){var r;if(e===0&&t.args===void 0||((r=t.args)===null||r===void 0?void 0:r.length)===e)return!0;throw new gt(t,`${e} arguments expected`)}function pn(t){var e,r;if(Array.isArray(t)){for(const n of t){if(!Array.isArray(n)&&!Ei(n))throw new gt(t,"sequence or prim expected");pn(n)}return!0}if(Bw(t)){if(Object.prototype.hasOwnProperty.call(Lw,t.prim))return ot(t,0),!0;switch(t.prim){case"DROP":case"PAIR":case"UNPAIR":case"DUP":case"UPDATE":case"GET":t.args!==void 0&&ot(t,1)&&du(t.args[0])&&y0(t.args[0]);break;case"DIG":case"DUG":case"SAPLING_EMPTY_STATE":ot(t,1)&&du(t.args[0])&&y0(t.args[0]);break;case"NONE":case"LEFT":case"RIGHT":case"NIL":case"CAST":ot(t,1)&&zi(t.args[0]);break;case"UNPACK":ot(t,1)&&T1(t.args[0]);break;case"CONTRACT":ot(t,1)&&Zl(t.args[0]);break;case"IF_NONE":case"IF_LEFT":case"IF_CONS":case"IF":ot(t,2)&&(Cs(t.args[0])&&pn(t.args[0]),Cs(t.args[1])&&pn(t.args[1]));break;case"MAP":case"ITER":case"LOOP":case"LOOP_LEFT":ot(t,1)&&pn(t.args[0]);break;case"CREATE_CONTRACT":ot(t,1)&&Uw(t.args[0]);break;case"DIP":if(((e=t.args)===null||e===void 0?void 0:e.length)===2)du(t.args[0])&&y0(t.args[0]),Cs(t.args[1])&&pn(t.args[1]);else if(((r=t.args)===null||r===void 0?void 0:r.length)===1)Cs(t.args[0])&&pn(t.args[0]);else throw new gt(t,"1 or 2 arguments expected");break;case"PUSH":ot(t,2)&&(Ta(t.args[0]),ho(t.args[1]));break;case"EMPTY_SET":ot(t,1)&&rs(t.args[0]);break;case"EMPTY_MAP":ot(t,2)&&(rs(t.args[0]),zi(t.args[1]));break;case"EMPTY_BIG_MAP":ot(t,2)&&(rs(t.args[0]),eh(t.args[1]));break;case"LAMBDA_REC":case"LAMBDA":ot(t,3)&&(zi(t.args[0]),zi(t.args[1]),Cs(t.args[2])&&pn(t.args[2]));break;case"VIEW":ot(t,2)&&(kw(t.args[0])&&Dw(t.args[0]),zi(t.args[1])&&Ta(t.args[1]));break;case"EMIT":t.args&&t.args.length>0?ot(t,1):ot(t,0);break;default:throw new gt(t,"instruction expected")}}return!0}function rs(t){if(_r(t)){if(Array.isArray(t)||t.prim==="pair"||t.prim==="or"||t.prim==="option")Ko(t,e=>rs(e));else if(!Object.prototype.hasOwnProperty.call(Cw,t.prim))throw new gt(t,`${t.prim}: type is not comparable`)}return!0}function T1(t){if(_r(t)&&Ei(t)){if(!Object.prototype.hasOwnProperty.call(Xa,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state"||t.prim==="ticket")throw new gt(t,`${t.prim}: type can't be used inside PACK/UNPACK instructions`);Ko(t,e=>T1(e))}return!0}function Ta(t){if(_r(t)&&Ei(t)){if(!Object.prototype.hasOwnProperty.call(Xa,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state"||t.prim==="ticket"||t.prim==="contract")throw new gt(t,`${t.prim}: type can't be pushed`);Ko(t,e=>Ta(e))}return!0}function O1(t){if(_r(t)&&Ei(t)){if(!Object.prototype.hasOwnProperty.call(Xa,t.prim)||t.prim==="operation"||t.prim==="contract")throw new gt(t,`${t.prim}: type can't be used as part of a storage`);Ko(t,e=>O1(e))}return!0}function Zl(t){if(_r(t)&&Ei(t)){if(!Object.prototype.hasOwnProperty.call(Xa,t.prim)||t.prim==="operation")throw new gt(t,`${t.prim}: type can't be used as part of a parameter`);Ko(t,e=>Zl(e))}return!0}function eh(t){if(_r(t)&&Ei(t)){if(!Object.prototype.hasOwnProperty.call(Xa,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state")throw new gt(t,`${t.prim}: type can't be used inside a big_map`);Ko(t,e=>eh(e))}return!0}const _L=new RegExp("^[a-zA-Z0-9_.%@]*$");function Dw(t){if(t.string.length>EL)throw new gt(t,`view name too long: ${t.string}`);if(!_L.test(t.string))throw new gt(t,`invalid character(s) in view name: ${t.string}`)}function zi(t){if(_r(t)&&Ei(t)){if(!Object.prototype.hasOwnProperty.call(Xa,t.prim))throw new gt(t,"type expected");Ko(t,e=>zi(e))}return!0}function Ko(t,e){if(Array.isArray(t)||t.prim==="pair"){const r=Array.isArray(t)?t:t.args;if(r===void 0||r.length<2)throw new gt(t,"at least 2 arguments expected");return r.forEach(n=>{_r(n)&&e(n)}),!0}switch(t.prim){case"option":case"list":ot(t,1)&&_r(t.args[0])&&e(t.args[0]);break;case"contract":ot(t,1)&&Zl(t.args[0]);break;case"or":ot(t,2)&&_r(t.args[0])&&_r(t.args[1])&&(e(t.args[0]),e(t.args[1]));break;case"lambda":ot(t,2)&&(zi(t.args[0]),zi(t.args[1]));break;case"set":ot(t,1)&&rs(t.args[0]);break;case"map":ot(t,2)&&_r(t.args[0])&&_r(t.args[1])&&(rs(t.args[0]),e(t.args[1]));break;case"big_map":ot(t,2)&&_r(t.args[0])&&_r(t.args[1])&&(rs(t.args[0]),eh(t.args[1]),e(t.args[1]));break;case"ticket":ot(t,1)&&_r(t.args[0])&&rs(t.args[0]);break;case"sapling_state":case"sapling_transaction":ot(t,1)&&du(t.args[0]);break;default:ot(t,0)}return!0}function ho(t){if("int"in t||"string"in t||"bytes"in t)return!0;if(Array.isArray(t)){let e=0;for(const r of t)Ei(r)&&r.prim==="Elt"?(ot(r,2)&&(ho(r.args[0]),ho(r.args[1])),e++):ho(r);if(e!==0&&e!==t.length)throw new gt(t,"data entries and map elements can't be intermixed");return!0}if(Ei(t))switch(t.prim){case"Unit":case"True":case"False":case"None":ot(t,0);break;case"Pair":if(t.args===void 0||t.args.length<2)throw new gt(t,"at least 2 arguments expected");for(const e of t.args)ho(e);break;case"Left":case"Right":case"Some":ot(t,1)&&ho(t.args[0]);break;case"Lambda_rec":t.args&&pn(t.args);break;default:if(Object.prototype.hasOwnProperty.call(Mw,t.prim))pn(t);else throw new gt(t,"data entry or instruction expected")}else throw new gt(t,"data entry expected");return!0}function Uw(t){if(Cs(t)){const e={},r={};for(const n of t)if(Bw(n)){if(n.prim!=="view"){if(n.prim in e)throw new gt(t,`duplicate contract section: ${n.prim}`);e[n.prim]=!0}switch(n.prim){case"code":ot(n,1)&&Cs(n.args[0])&&pn(n.args[0]);break;case"parameter":if(ot(n,1)&&Zl(n.args[0]),n.annots)throw new gt(n,"Annotation must be part of the parameter type");break;case"storage":ot(n,1)&&O1(n.args[0]);break;case"view":if(ot(n,4)){if(kw(n.args[0])){const i=n.args[0];if(i.string in r)throw new gt(t,`duplicate view name: ${i.string}`);r[i.string]=!0,Dw(i)}Ta(n.args[1]),Ta(n.args[2]),Cs(n.args[3])&&pn(n.args[3])}break;default:throw new gt(t,`unexpected contract section: ${n.prim}`)}}}return!0}function Fw(t){return Object.prototype.hasOwnProperty.call(Mw,t.prim)}function cp(t){if(!Array.isArray(t))return!1;for(const e of t)if("prim"in e){if(Fw(e))throw new en(t,`Instruction outside of a lambda: ${JSON.stringify(t)}`);if(e.prim==="Elt")throw new en(t,`Elt item outside of a map literal: ${JSON.stringify(t)}`)}return!0}function AL(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}const xL=["parameter","storage","code","False","Elt","Left","None","Pair","Right","Some","True","Unit","PACK","UNPACK","BLAKE2B","SHA256","SHA512","ABS","ADD","AMOUNT","AND","BALANCE","CAR","CDR","CHECK_SIGNATURE","COMPARE","CONCAT","CONS","CREATE_ACCOUNT","CREATE_CONTRACT","IMPLICIT_ACCOUNT","DIP","DROP","DUP","EDIV","EMPTY_MAP","EMPTY_SET","EQ","EXEC","FAILWITH","GE","GET","GT","HASH_KEY","IF","IF_CONS","IF_LEFT","IF_NONE","INT","LAMBDA","LE","LEFT","LOOP","LSL","LSR","LT","MAP","MEM","MUL","NEG","NEQ","NIL","NONE","NOT","NOW","OR","PAIR","PUSH","RIGHT","SIZE","SOME","SOURCE","SENDER","SELF","STEPS_TO_QUOTA","SUB","SWAP","TRANSFER_TOKENS","SET_DELEGATE","UNIT","UPDATE","XOR","ITER","LOOP_LEFT","ADDRESS","CONTRACT","ISNAT","CAST","RENAME","bool","contract","int","key","key_hash","lambda","list","map","big_map","nat","option","or","pair","set","signature","string","bytes","mutez","timestamp","unit","operation","address","SLICE","DIG","DUG","EMPTY_BIG_MAP","APPLY","chain_id","CHAIN_ID","LEVEL","SELF_ADDRESS","never","NEVER","UNPAIR","VOTING_POWER","TOTAL_VOTING_POWER","KECCAK","SHA3","PAIRING_CHECK","bls12_381_g1","bls12_381_g2","bls12_381_fr","sapling_state","sapling_transaction_deprecated","SAPLING_EMPTY_STATE","SAPLING_VERIFY_UPDATE","ticket","TICKET_DEPRECATED","READ_TICKET","SPLIT_TICKET","JOIN_TICKETS","GET_AND_UPDATE","chest","chest_key","OPEN_CHEST","VIEW","view","constant","SUB_MUTEZ","tx_rollup_l2_address","MIN_BLOCK_TIME","sapling_transaction","EMIT","Lambda_rec","LAMBDA_REC","TICKET"],SL=Object.assign({},...xL.map((t,e)=>({[t]:e})));var Rs;(function(t){t[t.Int=0]="Int",t[t.String=1]="String",t[t.Sequence=2]="Sequence",t[t.Prim0=3]="Prim0",t[t.Prim0Annot=4]="Prim0Annot",t[t.Prim1=5]="Prim1",t[t.Prim1Annot=6]="Prim1Annot",t[t.Prim2=7]="Prim2",t[t.Prim2Annot=8]="Prim2Annot",t[t.Prim=9]="Prim",t[t.Bytes=10]="Bytes"})(Rs||(Rs={}));class da{constructor(){this.buffer=[]}get length(){return this.buffer.length}writeBytes(e){this.buffer.push(...e.map(r=>r&255))}writeUint8(e){const r=e|0;this.buffer.push(r&255)}writeUint16(e){const r=e|0;this.buffer.push(r>>8&255),this.buffer.push(r&255)}writeUint32(e){const r=e|0;this.buffer.push(r>>24&255),this.buffer.push(r>>16&255),this.buffer.push(r>>8&255),this.buffer.push(r&255)}writeInt8(e){this.writeUint8(e)}writeInt16(e){this.writeUint16(e)}writeInt32(e){this.writeUint32(e)}}const Es=new Error("bounds out of range");class Oa{constructor(e,r=0,n=e.length){this.buffer=e,this.idx=r,this.cap=n}get length(){return this.cap-this.idx}readBytes(e){if(this.cap-this.idx<e)throw Es;const r=this.buffer.slice(this.idx,this.idx+e);return this.idx+=e,r}reader(e){if(this.cap-this.idx<e)throw Es;const r=new Oa(this.buffer,this.idx,this.idx+e);return this.idx+=e,r}copy(){return new Oa(this.buffer,this.idx,this.cap)}readUint8(){if(this.cap-this.idx<1)throw Es;return this.buffer[this.idx++]>>>0}readUint16(){if(this.cap-this.idx<2)throw Es;const e=this.buffer[this.idx++],r=this.buffer[this.idx++];return(e<<8|r)>>>0}readUint32(){if(this.cap-this.idx<4)throw Es;const e=this.buffer[this.idx++],r=this.buffer[this.idx++],n=this.buffer[this.idx++],i=this.buffer[this.idx++];return(e<<24|r<<16|n<<8|i)>>>0}readInt8(){if(this.cap-this.idx<1)throw Es;return this.buffer[this.idx++]<<24>>24}readInt16(){if(this.cap-this.idx<2)throw Es;const e=this.buffer[this.idx++],r=this.buffer[this.idx++];return(e<<8|r)<<16>>16}readInt32(){if(this.cap-this.idx<4)throw Es;const e=this.buffer[this.idx++],r=this.buffer[this.idx++],n=this.buffer[this.idx++],i=this.buffer[this.idx++];return e<<24|r<<16|n<<8|i}}var Ia;(function(t){t[t.Implicit=0]="Implicit",t[t.Originated=1]="Originated"})(Ia||(Ia={}));var Us;(function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1",t[t.P256=2]="P256"})(Us||(Us={}));function Kw(t){let e;const r=t.readUint8();switch(r){case Us.ED25519:e="ED25519PublicKeyHash";break;case Us.SECP256K1:e="SECP256K1PublicKeyHash";break;case Us.P256:e="P256PublicKeyHash";break;default:throw new Error(`unknown public key hash tag: ${r}`)}return{type:e,hash:t.readBytes(20)}}function RL(t){let e;const r=t.readUint8();switch(r){case Ia.Implicit:e=Kw(t);break;case Ia.Originated:e={type:"ContractHash",hash:t.readBytes(20)},t.readBytes(1);break;default:throw new Error(`unknown address tag: ${r}`)}if(t.length!==0){const n=new TextDecoder;e.entryPoint=n.decode(new Uint8Array(t.readBytes(t.length)))}return e}function Hw(t,e){let r;switch(t.type){case"ED25519PublicKeyHash":r=Us.ED25519;break;case"SECP256K1PublicKeyHash":r=Us.SECP256K1;break;case"P256PublicKeyHash":r=Us.P256;break;default:throw new Error(`unexpected address type: ${t.type}`)}e.writeUint8(r),e.writeBytes(Array.from(t.hash))}function TL(t,e){if(t.type==="ContractHash"?(e.writeUint8(Ia.Originated),e.writeBytes(Array.from(t.hash)),e.writeUint8(0)):(e.writeUint8(Ia.Implicit),Hw(t,e)),t.entryPoint!==void 0&&t.entryPoint!==""&&t.entryPoint!=="default"){const n=new TextEncoder().encode(t.entryPoint);e.writeBytes(Array.from(n))}}var Fs;(function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1",t[t.P256=2]="P256"})(Fs||(Fs={}));function OL(t){let e,r;const n=t.readUint8();switch(n){case Fs.ED25519:r="ED25519PublicKey",e=32;break;case Fs.SECP256K1:r="SECP256K1PublicKey",e=33;break;case Fs.P256:r="P256PublicKey",e=33;break;default:throw new Error(`unknown public key tag: ${n}`)}return{type:r,publicKey:t.readBytes(e)}}function IL(t,e){let r;switch(t.type){case"ED25519PublicKey":r=Fs.ED25519;break;case"SECP256K1PublicKey":r=Fs.SECP256K1;break;case"P256PublicKey":r=Fs.P256;break;default:throw new Error(`unexpected public key type: ${t.type}`)}e.writeUint8(r),e.writeBytes(Array.from(t.publicKey))}function pu(t,e,r){var n,i;const[s,o]=r(t);if(Array.isArray(s)){const l=new da;for(const f of s){const h=o.next();if(h.done)throw new Error("REPORT ME: iterator is done");pu(f,l,h.value)}e.writeUint8(Rs.Sequence),e.writeUint32(l.length),e.writeBytes(l.buffer);return}if("string"in s){const f=new TextEncoder().encode(s.string);e.writeUint8(Rs.String),e.writeUint32(f.length),e.writeBytes(Array.from(f));return}if("int"in s){e.writeUint8(Rs.Int);let l=BigInt(s.int);const f=l<0;f&&(l=-l);let h=0;do{const S=BigInt(h===0?6:7);let P=l&(BigInt(1)<<S)-BigInt(1);l>>=S,l&&(P|=BigInt(128)),h===0&&f&&(P|=BigInt(64)),e.writeUint8(Number(P)),h++}while(l);return}if("bytes"in s){const l=yL(s.bytes);e.writeUint8(Rs.Bytes),e.writeUint32(l.length),e.writeBytes(l);return}const a=SL[s.prim];if(a===void 0)throw new TypeError(`Can't encode primary: ${s.prim}`);const c=(((n=s.args)===null||n===void 0?void 0:n.length)||0)<3?Rs.Prim0+(((i=s.args)===null||i===void 0?void 0:i.length)||0)*2+(s.annots===void 0||s.annots.length===0?0:1):Rs.Prim;if(e.writeUint8(c),e.writeUint8(a),s.args!==void 0)if(s.args.length<3)for(const l of s.args){const f=o.next();if(f.done)throw new Error("REPORT ME: iterator is done");pu(l,e,f.value)}else{const l=new da;for(const f of s.args){const h=o.next();if(h.done)throw new Error("REPORT ME: iterator is done");pu(f,l,h.value)}e.writeUint32(l.length),e.writeBytes(l.buffer)}if(s.annots!==void 0&&s.annots.length!==0){const f=new TextEncoder().encode(s.annots.join(" "));e.writeUint32(f.length),e.writeBytes(Array.from(f))}else s.args!==void 0&&s.args.length>=3&&e.writeUint32(0)}const PL=t=>"prim"in t&&(t.prim==="Left"||t.prim==="Right"),NL=t=>"prim"in t&&(t.prim==="Some"||t.prim==="None"),po=t=>{if($i(t))return e=>{if(!Pw(e))throw new Se(t,e,`pair expected: ${JSON.stringify(e)}`);cp(e);const r=Wr("pair",t);return[Wr("Pair",e),function*(){for(const i of r.args)yield po(i)}()]};switch(t.prim){case"or":return e=>{if(!PL(e))throw new Se(t,e,`or expected: ${JSON.stringify(e)}`);return[e,function*(){yield po(t.args[e.prim==="Left"?0:1])}()]};case"option":return e=>{if(!NL(e))throw new Se(t,e,`option expected: ${JSON.stringify(e)}`);return[e,function*(){e.prim==="Some"&&(yield po(t.args[0]))}()]};case"list":case"set":return e=>{if(!Array.isArray(e))throw new Se(t,e,`${t.prim} expected: ${JSON.stringify(e)}`);return[e,function*(){for(const r of e)yield po(t.args[0])}()]};case"map":return e=>{if(!Array.isArray(e))throw new Se(t,e,`map expected: ${JSON.stringify(e)}`);return[e,function*(){for(const r of e)yield n=>{if(!("prim"in n)||n.prim!=="Elt")throw new Se(t,n,`map element expected: ${JSON.stringify(n)}`);return[n,function*(){for(const i of t.args)yield po(i)}()]}}()]};case"chain_id":return e=>{if(!("bytes"in e)&&!("string"in e))throw new Se(t,e,`chain id expected: ${JSON.stringify(e)}`);let r;if("string"in e){const n=Vi(e.string,"ChainID");if(n===null)throw new Se(t,e,`chain id base58 expected: ${e.string}`);r={bytes:ea(n[1])}}else r=e;return[r,[][Symbol.iterator]()]};case"signature":return e=>{if(!("bytes"in e)&&!("string"in e))throw new Se(t,e,`signature expected: ${JSON.stringify(e)}`);let r;if("string"in e){const n=Vi(e.string,"ED25519Signature","SECP256K1Signature","P256Signature","GenericSignature");if(n===null)throw new Se(t,e,`signature base58 expected: ${e.string}`);r={bytes:ea(n[1])}}else r=e;return[r,[][Symbol.iterator]()]};case"key_hash":return e=>{if(!("bytes"in e)&&!("string"in e))throw new Se(t,e,`key hash expected: ${JSON.stringify(e)}`);let r;if("string"in e){const n=Vi(e.string,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash");if(n===null)throw new Se(t,e,`key hash base58 expected: ${e.string}`);const i=new da;Hw({type:n[0],hash:n[1]},i),r={bytes:ea(i.buffer)}}else r=e;return[r,[][Symbol.iterator]()]};case"key":return e=>{if(!("bytes"in e)&&!("string"in e))throw new Se(t,e,`public key expected: ${JSON.stringify(e)}`);let r;if("string"in e){const n=Vi(e.string,"ED25519PublicKey","SECP256K1PublicKey","P256PublicKey");if(n===null)throw new Se(t,e,`public key base58 expected: ${e.string}`);const i=new da;IL({type:n[0],publicKey:n[1]},i),r={bytes:ea(i.buffer)}}else r=e;return[r,[][Symbol.iterator]()]};case"address":return e=>{if(!("bytes"in e)&&!("string"in e))throw new Se(t,e,`address expected: ${JSON.stringify(e)}`);let r;if("string"in e){const n=e.string.split("%"),i=Vi(n[0],"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash","ContractHash");if(i===null)throw new Se(t,e,`address base58 expected: ${e.string}`);const s=new da;TL({type:i[0],hash:i[1],entryPoint:n.length>1?n[1]:void 0},s),r={bytes:ea(s.buffer)}}else r=e;return[r,[][Symbol.iterator]()]};case"timestamp":return e=>{if(!("string"in e)&&!("int"in e))throw new Se(t,e,`timestamp expected: ${JSON.stringify(e)}`);let r;if("string"in e){const n=Nw(e);if(n===null)throw new Se(t,e,`can't parse date: ${e.string}`);r={int:String(Math.floor(n.getTime()/1e3))}}else r=e;return[r,[][Symbol.iterator]()]};default:return Gu}},LL=t=>"prim"in t&&t.prim==="PUSH",Gu=t=>LL(t)?(pn(t),[t,function*(){yield Gu,yield po(t.args[0])}()]):[t,function*(){for(;;)yield Gu}()];function ML(t,e){const r=new da;return r.writeUint8(5),pu(t,r,e!==void 0?po(e):Gu),r.buffer}function CL(t,e){return{bytes:ea(ML(t,e))}}function BL(t){const e=ha(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new Oa(new Uint8Array(e));return RL(r)}function kL(t){const e=ha(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new Oa(new Uint8Array(e));return Kw(r)}function DL(t){const e=ha(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new Oa(new Uint8Array(e));return OL(r)}class Ue extends en{constructor(e,r,n){super(e,n),this.stackState=r,Object.setPrototypeOf(this,Ue.prototype)}}function bt(t){return Array.isArray(t)?"pair":t.prim}function qu(t){return"prim"in t?t.args:t}function In(t,e,r=!1){if(bt(t)!==bt(e))throw new Se(t,void 0,`types mismatch: ${bt(t)} != ${bt(e)}`);const n=[Ra(t),Ra(e)];if(n[0].t&&n[1].t&&n[0].t[0]!==n[1].t[0])throw new Se(t,void 0,`${bt(t)}: type names mismatch: ${n[0].t[0]} != ${n[1].t[0]}`);if(r&&n[0].f&&n[1].f&&n[0].f[0]!==n[1].f[0])throw new Se(t,void 0,`${bt(t)}: field names mismatch: ${n[0].f[0]} != ${n[1].f}`);if($i(t)){const i=Wr("pair",t),s=Wr("pair",e);In(i.args[0],s.args[0],!0),In(i.args[1],s.args[1],!0);return}switch(t.prim){case"option":case"list":case"contract":case"set":case"ticket":In(t.args[0],e.args[0]);break;case"or":In(t.args[0],e.args[0],!0),In(t.args[1],e.args[1],!0);break;case"lambda":case"map":case"big_map":In(t.args[0],e.args[0]),In(t.args[1],e.args[1]);break;case"sapling_state":case"sapling_transaction":if(parseInt(t.args[0].int,10)!==parseInt(e.args[0].int,10))throw new Se(t,void 0,`${bt(t)}: type argument mismatch: ${t.args[0].int} != ${e.args[0].int}`)}}function jw(t,e){if(t.length!==e.length)throw new Se(t,void 0,`stack length mismatch: ${t.length} != ${e.length}`);for(let r=0;r<t.length;r++)In(t[r],e[r])}function Ot(t,e=!1){var r,n,i;if(!Array.isArray(t)){const s=Ra(t);if((((r=s.t)===null||r===void 0?void 0:r.length)||0)>1)throw new Se(t,void 0,`${t.prim}: at most one type annotation allowed: ${t.annots}`);if(e){if((((n=s.f)===null||n===void 0?void 0:n.length)||0)>1)throw new Se(t,void 0,`${t.prim}: at most one field annotation allowed: ${t.annots}`)}else if((((i=s.f)===null||i===void 0?void 0:i.length)||0)>0)throw new Se(t,void 0,`${t.prim}: field annotations aren't allowed: ${t.annots}`)}if($i(t)){const s=qu(t);for(const o of s)Ot(o,!0);return}switch(t.prim){case"option":case"list":case"contract":case"set":Ot(t.args[0]);break;case"or":for(const s of t.args)Ot(s,!0);break;case"lambda":case"map":case"big_map":Ot(t.args[0]),Ot(t.args[1])}}function Gw(t){if(!Array.isArray(t))return!1;for(const e of t)if(!(Array.isArray(e)&&Gw(e)||"prim"in e&&Fw(e)))return!1;return!0}function On(t,e,r){if($i(e)){if(Pw(t)){cp(t);const n=Wr("Pair",t),i=Wr("pair",e);On(n.args[0],i.args[0],r),On(n.args[1],i.args[1],r);return}throw new Se(e,t,`pair expected: ${JSON.stringify(t)}`)}switch(e.prim){case"int":if("int"in t&&ap(t.int))return;throw new Se(e,t,`integer value expected: ${JSON.stringify(t)}`);case"nat":case"mutez":if("int"in t&&Iw(t.int))return;throw new Se(e,t,`natural value expected: ${JSON.stringify(t)}`);case"string":if("string"in t)return;throw new Se(e,t,`string value expected: ${JSON.stringify(t)}`);case"bytes":case"bls12_381_g1":case"bls12_381_g2":if("bytes"in t&&ha(t.bytes)!==null)return;throw new Se(e,t,`bytes value expected: ${JSON.stringify(t)}`);case"bool":if("prim"in t&&(t.prim==="True"||t.prim==="False"))return;throw new Se(e,t,`boolean value expected: ${JSON.stringify(t)}`);case"key_hash":if("string"in t&&Vi(t.string,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash")!==null)return;if("bytes"in t)try{kL(t);return}catch{}throw new Se(e,t,`key hash expected: ${JSON.stringify(t)}`);case"timestamp":if(("string"in t||"int"in t)&&Nw(t)!==null)return;throw new Se(e,t,`timestamp expected: ${JSON.stringify(t)}`);case"address":if("string"in t){let n=t.string;const i=t.string.indexOf("%");if(i>=0&&(n=t.string.slice(0,i)),Vi(n,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash","ContractHash","TxRollupL2Address","RollupAddress")!==null)return}else if("bytes"in t)try{BL(t);return}catch{}throw new Se(e,t,`address expected: ${JSON.stringify(t)}`);case"key":if("string"in t&&Vi(t.string,"ED25519PublicKey","SECP256K1PublicKey","P256PublicKey")!==null)return;if("bytes"in t)try{DL(t);return}catch{}throw new Se(e,t,`public key expected: ${JSON.stringify(t)}`);case"unit":if("prim"in t&&t.prim==="Unit")return;throw new Se(e,t,`unit value expected: ${JSON.stringify(t)}`);case"signature":if("bytes"in t||"string"in t&&Vi(t.string,"ED25519Signature","SECP256K1Signature","P256Signature","GenericSignature")!==null)return;throw new Se(e,t,`signature expected: ${JSON.stringify(t)}`);case"chain_id":if(("bytes"in t||"string"in t)&&("string"in t?Tw(t.string):ha(t.bytes))!==null)return;throw new Se(e,t,`chain id expected: ${JSON.stringify(t)}`);case"option":if("prim"in t){if(t.prim==="None")return;if(t.prim==="Some"){On(t.args[0],e.args[0],r);return}}throw new Se(e,t,`option expected: ${JSON.stringify(t)}`);case"list":case"set":if(cp(t)){for(const n of t)On(n,e.args[0],r);return}throw new Se(e,t,`${e.prim} expected: ${JSON.stringify(t)}`);case"or":if("prim"in t){if(t.prim==="Left"){On(t.args[0],e.args[0],r);return}else if(t.prim==="Right"){On(t.args[0],e.args[1],r);return}}throw new Se(e,t,`union (or) expected: ${JSON.stringify(t)}`);case"lambda":if(Gw(t)){const n=Qt(t,[e.args[0]],r);if("failed"in n)throw new Se(e,t,`function is failed with error type: ${n.failed}`);if(n.length!==1)throw new Se(e,t,"function must return a value");In(e.args[1],n[0]);return}throw new Se(e,t,`function expected: ${JSON.stringify(t)}`);case"map":case"big_map":if(Array.isArray(t)){for(const n of t){if(!("prim"in n)||n.prim!=="Elt")throw new Se(e,t,`map elements expected: ${JSON.stringify(t)}`);On(n.args[0],e.args[0],r),On(n.args[1],e.args[1],r)}return}throw new Se(e,t,`${e.prim} expected: ${JSON.stringify(t)}`);case"bls12_381_fr":if("int"in t&&ap(t.int)||"bytes"in t&&ha(t.bytes)!==null)return;throw new Se(e,t,`BLS12-381 element expected: ${JSON.stringify(t)}`);case"sapling_state":if(Array.isArray(t))return;throw new Se(e,t,`sapling state expected: ${JSON.stringify(t)}`);case"ticket":On(t,{prim:"pair",args:[{prim:"address"},e.args[0],{prim:"nat"}]},r);return;default:throw new Se(e,t,`type ${bt(e)} don't have Michelson literal representation`)}}function UL(t,e,r){let n=e,i=e,s=0;for(const o of t){const a=Qt(o,i,r);if(n=a,"failed"in a)break;i=a,s++}if("failed"in n&&n.level==0&&(!("prim"in n.failed)||n.failed.prim!=="never")&&s!==t.length-1)throw new Ue(t,n,"FAIL must appear in a tail position");if((r==null?void 0:r.traceCallback)!==void 0){const o={op:t,in:e,out:n};r.traceCallback(o)}return"failed"in n?{failed:n.failed,level:n.level+1}:n}function Qt(t,e,r){const n=(r==null?void 0:r.protocol)||Rw;if(Array.isArray(t))return UL(t,e,r);const i=t;function s(x,...E){if(e.length<E.length+x)throw new Ue(i,e,`${i.prim}: stack must have at least ${E.length} element(s)`);let u=x;for(const d of E){if(d!==null&&d.length!==0){let g=0;for(;g<d.length&&d[g]!==bt(e[u]);)g++;if(g===d.length)throw new Ue(i,e,`${i.prim}: stack type mismatch: [${u}] expected to be ${d}, got ${bt(e[u])} instead`)}u++}return e.slice(x,E.length+x)}function o(x){return(...E)=>{try{return x(...E)}catch(u){throw u instanceof en?new Ue(i,e,u.message):u}}}function a(x){return E=>{try{return x(E)}catch(u){throw u instanceof en?new Ue(i,e,u.message):u}}}const c=o(Ra),l=o(jw),f=o(In),h=a(rs),S=a(T1),P=a(O1),M=a(Ta),H=a(eh);function $(x,E){const u=c(i,Object.assign(Object.assign({},E),{emptyFields:x.f!==void 0&&x.f>1,emptyVar:x.v!==void 0&&x.v>1})),d=(g,b,p)=>{if(g&&g.length>(b||0))throw new Ue(i,e,`${i.prim}: at most ${b||0} ${p} annotations allowed`)};return d(u.f,x.f,"field"),d(u.t,x.t,"type"),d(u.v,x.v,"variable"),u}function q(x,E){const u=x,d=Array.isArray(u)?{prim:"pair",args:u}:u,g=c(d),b=E.v!==void 0||E.t!==void 0||E.f!==void 0?[...(E.v===null?g.v:E.v)||[],...(E.t===null?g.t:E.t)||[],...(E.f===null?g.f:E.f)||[]]:void 0,p=AL(d,["annots"]);return Object.assign(Object.assign({},p),b&&b.length!==0&&{annots:b})}function C(x,E){const u=$({v:1});return q(x,{v:u.v!==void 0?u.v:E!==void 0?[E]:null,t:null})}function V(x,E,u,d,g){var b,p,R,O;const w=(b=c(E).f)===null||b===void 0?void 0:b[0],v=(p=u.f)===null||p===void 0?void 0:p[d];if(v!==void 0&&v!=="%"&&w!==void 0&&v!==w)throw new Ue(i,e,`${i.prim}: field names doesn't match: ${v} !== ${w}`);const N=(R=u.v)===null||R===void 0?void 0:R[d],ee=(O=c(x).v)===null||O===void 0?void 0:O[0];return q(E,{t:null,v:N?N==="@%"?w?["@"+w.slice(1)]:void 0:N==="@%%"?ee?["@"+ee.slice(1)+"."+(w?w.slice(1):g)]:w?["@"+w.slice(1)]:void 0:[N]:null})}function K(x,E,u=E){const d=Wr("pair",x);if(u===1)return[d.args[0]];if(u===2)return d.args;const g=d.args[1];if($i(g))return[d.args[0],...K(g,E,u-1)];throw new Ue(i,e,`${i.prim}: at least ${E} fields are expected`)}function U(x,E,u=E){if(u===0)return x;const d=Wr("pair",x);if(u===1)return d.args[0];const g=d.args[1];if($i(g))return U(g,E,u-2);if(u===2)return g;throw new Ue(i,e,`${i.prim}: at least ${E+1} fields are expected`)}function G(x,E,u,d=u){if(d===0)return E;const g=Wr("pair",x);if(d===1)return Object.assign(Object.assign({},g),{args:[E,g.args[1]]});const b=g.args[1];if($i(b))return Object.assign(Object.assign({},g),{args:[g.args[0],G(b,E,u,d-2)]});if(d===2)return Object.assign(Object.assign({},g),{args:[g.args[0],E]});throw new Ue(i,e,`${i.prim}: at least ${u+1} fields are expected`)}const y=(x,E)=>["@"+(x.v?x.v[0].slice(1)+".":"")+E];function _(x,E){return"failed"in x||"failed"in E?"failed"in x?E:x:(l(x,E),x)}const I=(x=>{var E,u,d,g,b;switch(x.prim){case"DUP":{const p=x.args?parseInt(x.args[0].int,10):1;if(p===0)throw new Ue(x,e,"DUP 0 is forbidden");const R=s(p-1,null)[0];if(bt(R)==="ticket")throw new Ue(x,e,"ticket can't be DUPed");return[R,...e]}case"SWAP":{const p=s(0,null,null);return $({}),[p[1],p[0],...e.slice(2)]}case"SOME":return[q({prim:"option",args:[s(0,null)[0]]},$({t:1,v:1})),...e.slice(1)];case"UNIT":return[q({prim:"unit"},$({v:1,t:1})),...e];case"PAIR":{const p=x.args?parseInt(x.args[0].int,10):2;if(p<2)throw new Ue(x,e,`PAIR ${p} is forbidden`);const R=s(0,...new Array(p).fill(null)),O=$({f:p,t:1,v:1},{specialFields:!0}),w=N=>{const ee=N.lastIndexOf(".");return N.slice(ee>0?ee+1:1)},v=R.map((N,ee)=>{var Y;const ie=c(N),oe=O.f&&O.f.length>ee&&O.f[ee]!=="%"?O.f[ee]==="%@"?ie.v?["%"+w(((Y=ie.v)===null||Y===void 0?void 0:Y[0])||"")]:void 0:[O.f[ee]]:void 0;return q(N,{v:null,t:null,f:oe})});return[q({prim:"pair",args:v},{t:O.t,v:O.v}),...e.slice(p)]}case"UNPAIR":{const p=x.args?parseInt(x.args[0].int,10):2;if(p<2)throw new Ue(x,e,`UNPAIR ${p} is forbidden`);const R=s(0,["pair"])[0],O=$({f:2,v:2},{specialVar:!0});return[...K(R,p).map((v,N)=>V(R,v,O,N,N===0?"car":"cdr")),...e.slice(1)]}case"CAR":case"CDR":{const p=Wr("pair",s(0,["pair"])[0]),R=p.args[x.prim==="CAR"?0:1],O=$({f:1,v:1},{specialVar:!0});return[V(p,R,O,0,x.prim.toLocaleLowerCase()),...e.slice(1)]}case"CONS":{const p=s(0,null,["list"]);return f(p[0],p[1].args[0]),[C({prim:"list",args:[p[1].args[0]]}),...e.slice(2)]}case"SIZE":return s(0,["string","list","set","map","bytes"]),[C({prim:"nat"}),...e.slice(1)];case"MEM":{const p=s(0,null,["set","map","big_map"]);return h(p[0]),f(p[0],p[1].args[0]),[C({prim:"bool"}),...e.slice(2)]}case"GET":if(x.args){const p=parseInt(x.args[0].int,10),R=s(0,["pair"])[0];return[C(U(R,p)),...e.slice(1)]}else{const p=s(0,null,["map","big_map"]);return h(p[0]),f(p[0],p[1].args[0]),[C({prim:"option",args:[p[1].args[1]]}),...e.slice(2)]}case"UPDATE":if(x.args){const p=parseInt(x.args[0].int,10),R=s(0,null,["pair"]);return[C(G(R[1],R[0],p)),...e.slice(2)]}else{const p=s(0,null,["bool","option"]);if(h(p[0]),p[1].prim==="bool"){const O=s(2,["set"]);return f(p[0],O[0].args[0]),[C({prim:"set",args:[q(p[0],{t:null})]}),...e.slice(3)]}const R=s(2,["map","big_map"]);return f(p[0],R[0].args[0]),R[0].prim==="map"?[C({prim:"map",args:[q(p[0],{t:null}),q(p[1].args[0],{t:null})]}),...e.slice(3)]:(H(p[1].args[0]),[C({prim:"big_map",args:[q(p[0],{t:null}),q(p[1].args[0],{t:null})]}),...e.slice(3)])}case"GET_AND_UPDATE":{const p=$({v:2}),R=s(0,null,["option"],["map","big_map"]);h(R[0]),f(R[0],R[2].args[0]),f(R[1].args[0],R[2].args[1]);const O=(E=p.v)===null||E===void 0?void 0:E.map(w=>w!=="@"?[w]:void 0);return R[2].prim==="map"?[q({prim:"option",args:[R[2].args[1]]},{v:O==null?void 0:O[0]}),q({prim:"map",args:[q(R[0],{t:null}),q(R[1].args[0],{t:null})]},{v:O==null?void 0:O[1]}),...e.slice(3)]:(H(R[1].args[0]),[q({prim:"option",args:[R[2].args[1]]},{v:O==null?void 0:O[0]}),q({prim:"big_map",args:[q(R[0],{t:null}),q(R[1].args[0],{t:null})]},{v:O==null?void 0:O[1]}),...e.slice(3)])}case"EXEC":{const p=s(0,null,["lambda"]);return f(p[0],p[1].args[0]),[C(p[1].args[1]),...e.slice(2)]}case"APPLY":{const p=s(0,null,["lambda"]);if(P(p[0]),M(p[0]),!$i(p[1].args[0]))throw new Ue(x,e,`${x.prim}: function's argument must be a pair: ${bt(p[1].args[0])}`);const R=p[1].args[0];return f(p[0],qu(R)[0]),[C({prim:"lambda",args:[qu(R)[1],p[1].args[1]]}),...e.slice(2)]}case"FAILWITH":{const p=s(0,null)[0];return ia(n,ts.PtEdo2Zk)||S(p),{failed:p,level:0}}case"NEVER":return s(0,["never"]),{failed:{prim:"never"},level:0};case"RENAME":return[C(s(0,null)[0]),...e.slice(1)];case"CONCAT":{const p=s(0,["string","list","bytes"]);if(p[0].prim==="list"){if(bt(p[0].args[0])!=="string"&&bt(p[0].args[0])!=="bytes")throw new Ue(x,e,`${x.prim}: can't concatenate list of ${bt(p[0].args[0])}'s`);return[C(p[0].args[0]),...e.slice(1)]}const R=s(1,["string","bytes"]);if(p[0].prim!==R[0].prim)throw new Ue(x,e,`${x.prim}: can't concatenate ${p[0].prim} with ${R[0].prim}`);return[C(R[0]),...e.slice(2)]}case"SLICE":return[C({prim:"option",args:[s(0,["nat"],["nat"],["string","bytes"])[2]]},"@slice"),...e.slice(3)];case"PACK":{const p=s(0,null)[0];return S(p),[C({prim:"bytes"},"@packed"),...e.slice(1)]}case"ADD":{const p=s(0,["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(p[0].prim==="nat"&&p[1].prim==="int"||p[0].prim==="int"&&p[1].prim==="nat")return[C({prim:"int"}),...e.slice(2)];if(p[0].prim==="int"&&p[1].prim==="timestamp"||p[0].prim==="timestamp"&&p[1].prim==="int")return[C({prim:"timestamp"}),...e.slice(2)];if((p[0].prim==="int"||p[0].prim==="nat"||p[0].prim==="mutez"||p[0].prim==="bls12_381_g1"||p[0].prim==="bls12_381_g2"||p[0].prim==="bls12_381_fr")&&p[0].prim===p[1].prim)return[C(p[0]),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't add ${p[0].prim} to ${p[1].prim}`)}case"SUB":{const p=ia(n,ts.PsiThaCa)?s(0,["nat","int","timestamp","mutez"],["nat","int","timestamp","mutez"]):s(0,["nat","int","timestamp"],["nat","int","timestamp"]);if((p[0].prim==="nat"||p[0].prim==="int")&&(p[1].prim==="nat"||p[1].prim==="int")||p[0].prim==="timestamp"&&p[1].prim==="timestamp")return[C({prim:"int"}),...e.slice(2)];if(p[0].prim==="timestamp"&&p[1].prim==="int")return[C({prim:"timestamp"}),...e.slice(2)];if(p[0].prim==="mutez"&&p[1].prim==="mutez")return[C({prim:"mutez"}),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't subtract ${p[0].prim} from ${p[1].prim}`)}case"SUB_MUTEZ":return s(0,["mutez"],["mutez"]),[C({prim:"option",args:[{prim:"mutez"}]}),...e.slice(2)];case"MUL":{const p=s(0,["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(p[0].prim==="nat"&&p[1].prim==="int"||p[0].prim==="int"&&p[1].prim==="nat")return[C({prim:"int"}),...e.slice(2)];if(p[0].prim==="nat"&&p[1].prim==="mutez"||p[0].prim==="mutez"&&p[1].prim==="nat")return[C({prim:"mutez"}),...e.slice(2)];if((p[0].prim==="bls12_381_g1"||p[0].prim==="bls12_381_g2"||p[0].prim==="bls12_381_fr")&&p[1].prim==="bls12_381_fr"||(p[0].prim==="nat"||p[0].prim==="int")&&p[0].prim===p[1].prim)return[C(p[0]),...e.slice(2)];if((p[0].prim==="nat"||p[0].prim==="int")&&p[1].prim==="bls12_381_fr"||(p[1].prim==="nat"||p[1].prim==="int")&&p[0].prim==="bls12_381_fr")return[C({prim:"bls12_381_fr"}),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't multiply ${p[0].prim} by ${p[1].prim}`)}case"EDIV":{const p=(O,w)=>({prim:"option",args:[{prim:"pair",args:[{prim:O},{prim:w}]}]}),R=s(0,["nat","int","mutez"],["nat","int","mutez"]);if(R[0].prim==="nat"&&R[1].prim==="nat")return[C(p("nat","nat")),...e.slice(2)];if((R[0].prim==="nat"||R[0].prim==="int")&&(R[1].prim==="nat"||R[1].prim==="int"))return[C(p("int","nat")),...e.slice(2)];if(R[0].prim==="mutez"&&R[1].prim==="nat")return[C(p("mutez","mutez")),...e.slice(2)];if(R[0].prim==="mutez"&&R[1].prim==="mutez")return[C(p("nat","mutez")),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't euclideally divide ${R[0].prim} by ${R[1].prim}`)}case"ABS":return s(0,["int"]),[C({prim:"nat"}),...e.slice(1)];case"ISNAT":return s(0,["int"]),[C({prim:"option",args:[{prim:"nat"}]}),...e.slice(1)];case"INT":return s(0,["nat","bls12_381_fr"]),[C({prim:"int"}),...e.slice(1)];case"NEG":{const p=s(0,["nat","int","bls12_381_g1","bls12_381_g2","bls12_381_fr"])[0];return p.prim==="nat"||p.prim==="int"?[C({prim:"int"}),...e.slice(1)]:[C(p),...e.slice(1)]}case"LSL":case"LSR":return s(0,["nat"],["nat"]),[C({prim:"nat"}),...e.slice(2)];case"OR":case"XOR":{const p=s(0,["nat","bool"],["nat","bool"]);if(p[0].prim!==p[1].prim)throw new Ue(x,e,`${x.prim}: both arguments must be of the same type: ${p[0].prim}, ${p[1].prim}`);return[C(p[1]),...e.slice(2)]}case"AND":{const p=s(0,["nat","bool","int"],["nat","bool"]);if((p[0].prim!=="int"||p[1].prim!=="nat")&&p[0].prim!==p[1].prim)throw new Ue(x,e,`${x.prim}: both arguments must be of the same type: ${p[0].prim}, ${p[1].prim}`);return[C(p[1]),...e.slice(2)]}case"NOT":return s(0,["nat","bool","int"])[0].prim==="bool"?[C({prim:"bool"}),...e.slice(1)]:[C({prim:"int"}),...e.slice(1)];case"COMPARE":{const p=s(0,null,null);return h(p[0]),h(p[1]),[C({prim:"int"}),...e.slice(2)]}case"EQ":case"NEQ":case"LT":case"GT":case"LE":case"GE":return s(0,["int"]),[C({prim:"bool"}),...e.slice(1)];case"SELF":{if((r==null?void 0:r.contract)===void 0)throw new Ue(x,e,`${x.prim}: contract required`);const p=$({f:1,v:1}),R=fp(r.contract,(u=p.f)===null||u===void 0?void 0:u[0]);if(R===null)throw new Ue(x,e,`${x.prim}: contract has no entrypoint ${R}`);return[q({prim:"contract",args:[R]},{v:p.v?p.v:["@self"]}),...e]}case"TRANSFER_TOKENS":{const p=s(0,null,["mutez"],["contract"]);return f(p[0],p[2].args[0]),[C({prim:"operation"}),...e.slice(3)]}case"SET_DELEGATE":{const p=s(0,["option"])[0];if(bt(p.args[0])!=="key_hash")throw new Ue(x,e,`${x.prim}: key hash expected: ${bt(p.args[0])}`);return[C({prim:"operation"}),...e.slice(1)]}case"IMPLICIT_ACCOUNT":return s(0,["key_hash"]),[C({prim:"contract",args:[{prim:"unit"}]}),...e.slice(1)];case"NOW":return[C({prim:"timestamp"},"@now"),...e];case"AMOUNT":return[C({prim:"mutez"},"@amount"),...e];case"BALANCE":return[C({prim:"mutez"},"@balance"),...e];case"CHECK_SIGNATURE":return s(0,["key"],["signature"],["bytes"]),[C({prim:"bool"}),...e.slice(3)];case"BLAKE2B":case"SHA256":case"SHA512":case"KECCAK":case"SHA3":return s(0,["bytes"]),[C({prim:"bytes"}),...e.slice(1)];case"HASH_KEY":return s(0,["key"]),[C({prim:"key_hash"}),...e.slice(1)];case"SOURCE":return[C({prim:"address"},"@source"),...e];case"SENDER":return[C({prim:"address"},"@sender"),...e];case"ADDRESS":{const p=s(0,["contract"])[0],R=$({v:1});return[q({prim:"address",[$f]:p},{v:R.v?R.v:y(c(p),"address")}),...e.slice(1)]}case"SELF_ADDRESS":{const p={prim:"address"};return(r==null?void 0:r.contract)!==void 0&&(p[$f]={prim:"contract",args:[di(r.contract,"parameter").args[0]]}),[C(p,"@address"),...e]}case"CHAIN_ID":return[C({prim:"chain_id"}),...e];case"DROP":{$({});const p=x.args!==void 0?parseInt(x.args[0].int,10):1;return s(p-1,null),e.slice(p)}case"DIG":{$({});const p=parseInt(x.args[0].int,10);return[s(p,null)[0],...e.slice(0,p),...e.slice(p+1)]}case"DUG":{$({});const p=parseInt(x.args[0].int,10);return[...e.slice(1,p+1),s(0,null)[0],...e.slice(p+1)]}case"NONE":return Ot(x.args[0]),[q({prim:"option",args:[x.args[0]]},$({t:1,v:1})),...e];case"LEFT":case"RIGHT":{const p=s(0,null)[0],R=$({f:2,t:1,v:1},{specialFields:!0}),O=c(p),w=[q(p,{t:null,v:null,f:R.f&&R.f.length>0&&R.f[0]!=="%"?R.f[0]==="%@"?O.v?["%"+O.v[0].slice(1)]:void 0:R.f:void 0}),q(x.args[0],{t:null,f:R.f&&R.f.length>1&&R.f[1]!=="%"?R.f:void 0})];return[q({prim:"or",args:x.prim==="LEFT"?w:[w[1],w[0]]},{t:R.t,v:R.v}),...e.slice(1)]}case"NIL":return Ot(x.args[0]),[q({prim:"list",args:[x.args[0]]},$({t:1,v:1})),...e];case"UNPACK":return s(0,["bytes"]),Ot(x.args[0]),[C({prim:"option",args:[x.args[0]]},"@unpacked"),...e.slice(1)];case"CONTRACT":{const p=s(0,["address"])[0];Ot(x.args[0]);const R=$({v:1,f:1}),O=p[$f];if(O!==void 0){const w=fp(O,(d=R.f)===null||d===void 0?void 0:d[0]);if(w===null)throw new Ue(x,e,`${x.prim}: contract has no entrypoint ${w}`);f(w,x.args[0])}return[q({prim:"option",args:[{prim:"contract",args:[x.args[0]]}]},{v:R.v?R.v:y(c(p),"contract")}),...e.slice(1)]}case"CAST":{$({});const p=s(0,null)[0];return Ot(x.args[0]),f(x.args[0],p),[x.args[0],...e.slice(1)]}case"IF_NONE":{$({});const p=s(0,["option"])[0],R=e.slice(1),O=Qt(x.args[0],R,r),w=Qt(x.args[1],[q(p.args[0],{t:null,v:y(c(p),"some")}),...R],r);return _(O,w)}case"IF_LEFT":{$({});const p=s(0,["or"])[0],R=c(p),O=c(p.args[0]),w=c(p.args[1]),v=e.slice(1),N=Qt(x.args[0],[q(p.args[0],{t:null,v:y(R,O.f?O.f[0].slice(1):"left")}),...v],r),ee=Qt(x.args[1],[q(p.args[1],{t:null,v:y(R,w.f?w.f[0].slice(1):"right")}),...v],r);return _(N,ee)}case"IF_CONS":{$({});const p=s(0,["list"])[0],R=c(p),O=e.slice(1),w=Qt(x.args[0],[q(p.args[0],{t:null,v:y(R,"hd")}),q(p,{t:null,v:y(R,"tl")}),...O],r),v=Qt(x.args[1],O,r);return _(w,v)}case"IF":{$({}),s(0,["bool"]);const p=e.slice(1),R=Qt(x.args[0],p,r),O=Qt(x.args[1],p,r);return _(R,O)}case"MAP":{const p=s(0,["list","map","option"])[0],R=e.slice(1),O=p.prim==="map"?{prim:"pair",args:p.args}:p.args[0],w=Qt(x.args[0],[q(O,{t:null,v:y(c(p),"elt")}),...R],r);if("failed"in w){if(!("prim"in w.failed)||w.failed.prim!=="never")throw new Ue(x,e,`${x.prim}: FAIL is not allowed in MAP`);return{failed:w.failed,level:w.level+1}}if(w.length<1)throw new Ue(x,e,`${x.prim}: function must return a value`);return l(w.slice(1),R),p.prim==="list"?[C({prim:"list",args:[w[0]]}),...R]:p.prim==="map"?[C({prim:"map",args:[p.args[0],w[0]]}),...R]:[C({prim:"option",args:[w[0]]}),...R]}case"ITER":{$({});const p=s(0,["set","list","map"])[0],R=e.slice(1),O=p.prim==="map"?{prim:"pair",args:p.args}:p.args[0],w=Qt(x.args[0],[q(O,{t:null,v:y(c(p),"elt")}),...R],r);return"failed"in w?{failed:w.failed,level:w.level+1}:(l(w,R),R)}case"LOOP":{$({}),s(0,["bool"]);const p=e.slice(1),R=Qt(x.args[0],p,r);return"failed"in R?{failed:R.failed,level:R.level+1}:(l(R,[{prim:"bool"},...p]),p)}case"LOOP_LEFT":{$({});const p=s(0,["or"])[0],R=e.slice(1),O=Qt(x.args[0],[q(p.args[0],{t:null,v:y(c(p),"left")}),...R],r);return"failed"in O?{failed:O.failed,level:O.level+1}:(l(O,[p,...R]),[q(p.args[1],{t:null,v:$({v:1}).v}),...R])}case"DIP":{$({});const p=x.args.length===2?parseInt(x.args[0].int,10):1;s(p-1,null);const R=e.slice(0,p),O=e.slice(p),w=x.args.length===2?Qt(x.args[1],O,r):Qt(x.args[0],O,r);return"failed"in w?{failed:w.failed,level:w.level+1}:[...R,...w]}case"CREATE_CONTRACT":{const p=$({v:2}),R=s(0,["option"],["mutez"],null);if(bt(R[0].args[0])!=="key_hash")throw new Ue(x,e,`${x.prim}: key hash expected: ${bt(R[0].args[0])}`);P(R[2])&&(Vw(x.args[0]),In(di(x.args[0],"storage").args[0],R[2]));const O=(g=p.v)===null||g===void 0?void 0:g.map(w=>w!=="@"?[w]:void 0);return[q({prim:"operation"},{v:O==null?void 0:O[0]}),q({prim:"address",[$f]:{prim:"contract",args:[di(x.args[0],"parameter").args[0]]}},{v:O==null?void 0:O[1]}),...e.slice(3)]}case"PUSH":return Ot(x.args[0]),On(x.args[1],x.args[0],Object.assign(Object.assign({},r),{contract:void 0})),[C(x.args[0]),...e];case"EMPTY_SET":return Ot(x.args[0]),h(x.args[0]),[q({prim:"set",args:x.args},$({t:1,v:1})),...e];case"EMPTY_MAP":return Ot(x.args[0]),h(x.args[0]),Ot(x.args[1]),[q({prim:"map",args:x.args},$({t:1,v:1})),...e];case"EMPTY_BIG_MAP":return Ot(x.args[0]),h(x.args[0]),Ot(x.args[1]),H(x.args[0]),[q({prim:"big_map",args:x.args},$({t:1,v:1})),...e];case"LAMBDA_REC":case"LAMBDA":{Ot(x.args[0]),Ot(x.args[1]);const p=[x.args[0]];x.prim==="LAMBDA_REC"&&p.push({prim:"lambda",args:[x.args[0],x.args[1]]});const R=Qt(x.args[2],p,Object.assign(Object.assign({},r),{contract:void 0}));if("failed"in R)return{failed:R.failed,level:R.level+1};if(R.length!==1)throw new Ue(x,e,`${x.prim}: function must return a value`);return f(x.args[1],R[0]),[C({prim:"lambda",args:[x.args[0],x.args[1]]}),...e]}case"LEVEL":return[C({prim:"nat"},"@level"),...e];case"TOTAL_VOTING_POWER":return[C({prim:"nat"}),...e];case"VOTING_POWER":return s(0,["key_hash"]),[C({prim:"nat"}),...e.slice(1)];case"TICKET":{const p=s(0,null,["nat"])[0];return h(p),ia(n,ts.PtLimaPtL)?[q({prim:"ticket",args:[p]},$({t:1,v:1})),...e.slice(2)]:[C({prim:"option",args:[q({prim:"ticket",args:[p]},$({t:1,v:1}))]}),...e.slice(2)]}case"JOIN_TICKETS":{const p=Wr("pair",s(0,["pair"])[0]);if(bt(p.args[0])!=="ticket")throw new Ue(x,e,`${x.prim}: ticket expected: ${bt(p.args[0])}`);return f(p.args[0],p.args[1]),[C({prim:"option",args:[q(p.args[0],{t:null})]}),...e.slice(1)]}case"SPLIT_TICKET":{const p=s(0,["ticket"],["pair"]),R=Wr("pair",p[1]);if(bt(R.args[0])!=="nat")throw new Ue(x,e,`${x.prim}: nat expected: ${bt(R.args[0])}`);return f(R.args[0],R.args[1]),[C({prim:"option",args:[{prim:"pair",args:[q(p[0],{t:null}),q(p[0],{t:null})]}]}),...e.slice(2)]}case"READ_TICKET":{const p=$({v:2}),R=s(0,["ticket"])[0],O=(b=p.v)===null||b===void 0?void 0:b.map(w=>w!=="@"?[w]:void 0);return[q({prim:"pair",args:[{prim:"address"},q(R.args[0],{t:null}),{prim:"nat"}]},{v:O==null?void 0:O[0]}),q(R,{v:O==null?void 0:O[1],t:null}),...e.slice(1)]}case"PAIRING_CHECK":{const p=s(0,["list"])[0].args[0];if(!$i(p))throw new Ue(x,e,`${x.prim}: pair expected: ${bt(p)}`);const R=Wr("pair",p);if(bt(R.args[0])!=="bls12_381_g1")throw new Ue(x,e,`${x.prim}: bls12_381_g1 expected: ${bt(R.args[0])}`);if(bt(R.args[1])!=="bls12_381_g2")throw new Ue(x,e,`${x.prim}: bls12_381_g2 expected: ${bt(R.args[1])}`);return[C({prim:"bool"}),...e.slice(1)]}case"SAPLING_EMPTY_STATE":return[q({prim:"sapling_state",args:[x.args[0]]},$({v:1,t:1})),...e];case"SAPLING_VERIFY_UPDATE":{const p=s(0,["sapling_transaction"],["sapling_state"]);if(parseInt(p[0].args[0].int,10)!==parseInt(p[1].args[0].int,10))throw new Ue(x,e,`${x.prim}: sapling memo size mismatch: ${p[0].args[0].int} != ${p[1].args[0].int}`);return ia(n,ts.PtJakarta)?[C({prim:"option",args:[{prim:"pair",args:[{prim:"int"},q(p[1],{t:null})]}]}),...e.slice(2)]:[C({prim:"option",args:[{prim:"pair",args:[{prim:"bytes"},{prim:"pair",args:[{prim:"int"},q(p[1],{t:null})]}]}]}),...e.slice(2)]}case"OPEN_CHEST":return s(0,["chest_key"],["chest"],["nat"]),[C({prim:"or",args:[{prim:"bytes"},{prim:"bool"}]}),...e.slice(3)];case"VIEW":{const p=s(0,null,["address"]);return M(p[0]),[C({prim:"option",args:[x.args[1]]}),...e.slice(2)]}case"MIN_BLOCK_TIME":return[C({prim:"nat"}),...e];case"EMIT":{const p=$({f:1,t:1});if(x.args){const R=s(0,null);return f(R[0],x.args[0]),[q({prim:"operation"},p),...e.slice(1)]}return[q({prim:"operation"},p),...e.slice(1)]}default:throw new en(x,`unexpected instruction: ${x.prim}`)}})(i);if((r==null?void 0:r.traceCallback)!==void 0){const x={op:i,in:e,out:I};r.traceCallback(x)}return I}function di(t,e){for(const r of t)if(r.prim===e)return r;throw new en(t,`missing contract section: ${e}`)}function FL(t){const e={};for(const r of t)r.prim==="view"&&(e[r.args[0].string]=r);return e}function qw(t){if(Array.isArray(t)){for(const e of t)if("prim"in e&&(e.prim==="parameter"||e.prim==="storage"||e.prim==="code"))return!0}return!1}function fp(t,e){e=e||"%default";const r=Vu(t).find(n=>n[0]===e);return r!==void 0?r[1]:e==="%default"?qw(t)?di(t,"parameter").args[0]:t:null}function KL(t){return Array.isArray(t)||t.prim==="or"}function Vu(t){if(qw(t)){const e=di(t,"parameter"),r=Vu(e.args[0]),n=Ra(e);return n.f?[[n.f[0],e.args[0]],...r]:r}if(KL(t)){const e=qu(t),r=n=>{const i=Ra(e[n]);if(bt(e[n])==="or"){const s=Vu(e[n]);return i.f?[[i.f[0],e[n]],...s]:s}return i.f?[[i.f[0],e[n]]]:[]};return[...r(0),...r(1)]}return[]}function Vw(t,e){const r=(c,l,f,h)=>{Ot(c,!0),Ot(l);const S={prim:"pair",args:[Object.assign(Object.assign({},c),{annots:["@parameter"]}),Object.assign(Object.assign({},l),{annots:["@storage"]})]},P=Qt(h,[S],Object.assign(Object.assign({},e),{contract:t}));if("failed"in P)return P;try{jw(P,[f])}catch(M){throw M instanceof en?new Ue(h,P,M.message):M}return P},n=di(t,"parameter").args[0],i=di(t,"storage").args[0],s=di(t,"code").args[0],a=r(n,i,{prim:"pair",args:[{prim:"list",args:[{prim:"operation"}]},i]},s);for(const c of Object.values(FL(t)))r(c.args[1],i,c.args[2],c.args[3]);return a}function $w(t,e,r){Ot(e),On(t,e,r||null)}function HL(t,e,r){for(const n of e)Ot(n);if((r==null?void 0:r.contract)!==void 0)for(const n of["parameter","storage"]){const i=di(r.contract,n).args[0];Ot(i)}return Qt(t,e,r||null)}function jL(t,e,r){try{return $w(t,e,r),!0}catch{return!1}}class I1{constructor(e,r){this.contract=e,this.ctx=Object.assign({contract:e},r),this.output=Vw(e,this.ctx)}static parse(e,r){const n=new mo(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new uL("empty contract");if(Uw(i))return new I1(i,r)}static parseTypeExpression(e,r){const n=new mo(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new lL("empty type expression");if(zi(i))return Ot(i),i}static parseDataExpression(e,r){const n=new mo(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new hL("empty data expression");if(ho(i))return i;throw void 0}section(e){return di(this.contract,e)}entryPoints(){return Vu(this.contract)}entryPoint(e){return fp(this.contract,e)}assertDataValid(e,r){$w(e,r,this.ctx)}isDataValid(e,r){return jL(e,r,this.ctx)}assertParameterValid(e,r){const n=this.entryPoint(e||void 0);if(n===null)throw new dL(e==null?void 0:e.toString());this.assertDataValid(r,n)}isParameterValid(e,r){try{return this.assertParameterValid(e,r),!0}catch{return!1}}functionType(e,r){return HL(e,r,this.ctx)}}new I1([{prim:"parameter",args:[{prim:"unit"}]},{prim:"storage",args:[{prim:"unit"}]},{prim:"code",args:[[{prim:"CAR"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PAIR"}]]}]);const $u=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),ht=(t,e=8)=>t.toString(16).padStart(e,"0"),ff=31;var j;(function(t){t.SECRET="secret",t.RAW="raw",t.TZ1="tz1",t.BRANCH="branch",t.ZARITH="zarith",t.PUBLIC_KEY="public_key",t.PKH="pkh",t.DELEGATE="delegate",t.SCRIPT="script",t.BALLOT_STATEMENT="ballotStmt",t.PROPOSAL="proposal",t.PROPOSAL_ARR="proposalArr",t.INT32="int32",t.INT16="int16",t.PARAMETERS="parameters",t.ADDRESS="address",t.SMART_CONTRACT_ADDRESS="smart_contract_address",t.VALUE="value",t.MANAGER="manager",t.BLOCK_PAYLOAD_HASH="blockPayloadHash",t.ENTRYPOINT="entrypoint",t.OPERATION="operation",t.OP_ACTIVATE_ACCOUNT="activate_account",t.OP_DELEGATION="delegation",t.OP_TRANSACTION="transaction",t.OP_ORIGINATION="origination",t.OP_BALLOT="ballot",t.OP_ENDORSEMENT="endorsement",t.OP_SEED_NONCE_REVELATION="seed_nonce_revelation",t.OP_REVEAL="reveal",t.OP_PROPOSALS="proposals",t.OP_REGISTER_GLOBAL_CONSTANT="register_global_constant",t.OP_TRANSFER_TICKET="transfer_ticket",t.OP_TX_ROLLUP_ORIGINATION="tx_rollup_origination",t.OP_TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",t.BURN_LIMIT="burn_limit",t.TX_ROLLUP_ORIGINATION_PARAM="tx_rollup_origination_param",t.TX_ROLLUP_ID="tx_rollup_id",t.TX_ROLLUP_BATCH_CONTENT="tx_rollup_batch_content",t.OP_INCREASE_PAID_STORAGE="increase_paid_storage",t.OP_UPDATE_CONSENSUS_KEY="update_consensus_key",t.OP_DRAIN_DELEGATE="drain_delegate"})(j||(j={}));const Un={"00":"parameter","01":"storage","02":"code","03":"False","04":"Elt","05":"Left","06":"None","07":"Pair","08":"Right","09":"Some","0a":"True","0b":"Unit","0c":"PACK","0d":"UNPACK","0e":"BLAKE2B","0f":"SHA256",10:"SHA512",11:"ABS",12:"ADD",13:"AMOUNT",14:"AND",15:"BALANCE",16:"CAR",17:"CDR",18:"CHECK_SIGNATURE",19:"COMPARE","1a":"CONCAT","1b":"CONS","1c":"CREATE_ACCOUNT","1d":"CREATE_CONTRACT","1e":"IMPLICIT_ACCOUNT","1f":"DIP",20:"DROP",21:"DUP",22:"EDIV",23:"EMPTY_MAP",24:"EMPTY_SET",25:"EQ",26:"EXEC",27:"FAILWITH",28:"GE",29:"GET","2a":"GT","2b":"HASH_KEY","2c":"IF","2d":"IF_CONS","2e":"IF_LEFT","2f":"IF_NONE",30:"INT",31:"LAMBDA",32:"LE",33:"LEFT",34:"LOOP",35:"LSL",36:"LSR",37:"LT",38:"MAP",39:"MEM","3a":"MUL","3b":"NEG","3c":"NEQ","3d":"NIL","3e":"NONE","3f":"NOT",40:"NOW",41:"OR",42:"PAIR",43:"PUSH",44:"RIGHT",45:"SIZE",46:"SOME",47:"SOURCE",48:"SENDER",49:"SELF","4a":"STEPS_TO_QUOTA","4b":"SUB","4c":"SWAP","4d":"TRANSFER_TOKENS","4e":"SET_DELEGATE","4f":"UNIT",50:"UPDATE",51:"XOR",52:"ITER",53:"LOOP_LEFT",54:"ADDRESS",55:"CONTRACT",56:"ISNAT",57:"CAST",58:"RENAME",59:"bool","5a":"contract","5b":"int","5c":"key","5d":"key_hash","5e":"lambda","5f":"list",60:"map",61:"big_map",62:"nat",63:"option",64:"or",65:"pair",66:"set",67:"signature",68:"string",69:"bytes","6a":"mutez","6b":"timestamp","6c":"unit","6d":"operation","6e":"address","6f":"SLICE",70:"DIG",71:"DUG",72:"EMPTY_BIG_MAP",73:"APPLY",74:"chain_id",75:"CHAIN_ID",76:"LEVEL",77:"SELF_ADDRESS",78:"never",79:"NEVER","7a":"UNPAIR","7b":"VOTING_POWER","7c":"TOTAL_VOTING_POWER","7d":"KECCAK","7e":"SHA3","7f":"PAIRING_CHECK",80:"bls12_381_g1",81:"bls12_381_g2",82:"bls12_381_fr",83:"sapling_state",84:"sapling_transaction_deprecated",85:"SAPLING_EMPTY_STATE",86:"SAPLING_VERIFY_UPDATE",87:"ticket",88:"TICKET_DEPRECATED",89:"READ_TICKET","8a":"SPLIT_TICKET","8b":"JOIN_TICKETS","8c":"GET_AND_UPDATE","8d":"chest","8e":"chest_key","8f":"OPEN_CHEST",90:"VIEW",91:"view",92:"constant",93:"SUB_MUTEZ",94:"tx_rollup_l2_address",95:"MIN_BLOCK_TIME",96:"sapling_transaction",97:"EMIT",98:"Lambda_rec",99:"LAMBDA_REC","9a":"TICKET"},GL=(()=>{const t={};return Object.keys(Un).forEach(e=>{t[Un[e]]=e}),t})(),up={4:"activate_account",107:"reveal",110:"delegation",108:"transaction",109:"origination",6:"ballot",21:"endorsement",1:"seed_nonce_revelation",5:"proposals",111:"register_global_constant",150:"tx_rollup_origination",151:"tx_rollup_submit_batch",158:"transfer_ticket",113:"increase_paid_storage",114:"update_consensus_key",9:"drain_delegate"},Jv=(()=>{const t={};return Object.keys(up).forEach(e=>{const r=typeof e=="string"?parseInt(e,10):e;t[up[r]]=ht(r,2)}),t})(),zu={"00":"default","01":"root","02":"do","03":"set_delegate","04":"remove_delegate","05":"deposit"},Yv=(()=>{const t={};return Object.keys(zu).forEach(e=>{t[zu[e]]=e}),t})();class qL extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBlockHashError"}}class Qv extends Error{constructor(e){super(e),this.message=e,this.name="InvalidOperationSchemaError"}}class th extends Error{constructor(e){super(`Oversized entrypoint: ${e}. The maximum length of entrypoint is ${ff}`),this.entrypoint=e,this.name="OversizedEntryPointError"}}class VL extends Error{constructor(e){super(`The ballot value '${e}' is invalid`),this.ballotValue=e,this.name="InvalidBallotValueError"}}class $L extends Error{constructor(e){super(`Failed to decode ballot value ${e}`),this.ballotValue=e,this.name="DecodeBallotValueError"}}class zw extends Error{constructor(e){super(`The hex string '${e}' is invalid`),this.hexString=e,this.name="InvalidHexStringError"}}class Ww extends Error{constructor(e){super(`Failed to encode michelson value '${e}'`),this.value=e,this.name="UnexpectedMichelsonValueError"}}class Xw extends Error{constructor(e){super(e),this.message=e,this.name="OperationDecodingError"}}class zL extends Error{constructor(e){super(e),this.message=e,this.name="OperationEncodingError"}}class WL extends Error{constructor(e){super(`The operation '${e}' is unsupported`),this.op=e,this.name="UnsupportedOperationError"}}class Or{constructor(e,r=0){this.arr=e,this.offset=r}static fromHexString(e){const r=e.toLowerCase();if(/^(([a-f]|\d){2})*$/.test(r)){const n=new Uint8Array((r.match(/([a-z]|\d){2}/g)||[]).map(i=>parseInt(i,16)));return new Or(n)}else throw new zw(r)}consume(e){const r=this.arr.subarray(this.offset,this.offset+e);return this.offset+=e,r}get(e){return this.arr[this.offset+e]}length(){return this.arr.length-this.offset}}const Jw=t=>"prim"in t,Yw=t=>"bytes"in t&&typeof t.bytes=="string",Qw=t=>"string"in t&&typeof t.string=="string",Zw=t=>"int"in t&&typeof t.int=="string",XL=t=>{const e=Gs(t.code),r=Gs(t.storage);return`${ht(e.length/2,8)}${e}${ht(r.length/2,8)}${r}`},JL=t=>{const e=or(t),r=or(t);return{code:qs(new Or(e)),storage:qs(new Or(r))}},Gs=t=>{if(Array.isArray(t)){const e=t.map(n=>Gs(n)).join(""),r=e.length/2;return`02${ht(r)}${e}`}else{if(Jw(t))return YL(t);if(Yw(t))return e3(t);if(Qw(t))return r3(t);if(Zw(t))return i3(t)}throw new Ww(JSON.stringify(t))},qs=t=>{const e=t.consume(1);switch(e[0]){case 10:return t3(t);case 1:return n3(t);case 0:return s3(t);case 2:{const r=new Or(or(t)),n=[];for(;r.length()>0;)n.push(qs(r));return n}default:return QL(t,e)}},or=(t,e=4)=>{const r=t.consume(e),n=parseInt(te.from(r).toString("hex"),16);return t.consume(n)},e3=t=>{if(!/^([A-Fa-f0-9]{2})*$/.test(t.bytes))throw new zw(t.bytes);const e=t.bytes.length/2;return`0a${ht(e)}${t.bytes}`},t3=t=>{const e=or(t);return{bytes:te.from(e).toString("hex")}},r3=t=>{const e=te.from(t.string,"utf8").toString("hex"),r=e.length/2;return`01${ht(r)}${e}`},n3=t=>{const e=or(t);return{string:te.from(e).toString("utf8")}},i3=({int:t})=>{const e=new ve(t,10),r=e.toString(2)[0]==="-"?"1":"0",n=e.toString(2).replace(/-/g,""),i=n.length<=6?6:(n.length-6)%7?n.length+7-(n.length-6)%7:n.length,o=n.padStart(i,"0").match(/\d{6,7}/g).reverse();return o[0]=r+o[0],`00${o.map((c,l)=>parseInt((l===o.length-1?"0":"1")+c,2).toString(16).padStart(2,"0")).join("")}`},s3=t=>{let e=t.consume(1)[0];const r=[],n=128;for(;e&n;)r.push(e),e=t.consume(1)[0];r.push(e);const i=!!(64&r[0]);r[0]=r[0]&127;const s=r.map((a,c)=>a.toString(2).slice(c===0?-6:-7).padStart(c===0?6:7,"0")).reverse();let o=new ve(s.join(""),2);return i&&(o=o.times(-1)),{int:o.toFixed()}},YL=t=>{const e=+Array.isArray(t.annots),r=Array.isArray(t.args)?t.args.length:0,n=ht(Math.min(2*r+e+3,9),2),i=GL[t.prim];let s=(t.args||[]).map(a=>Gs(a)).join("");const o=Array.isArray(t.annots)?o3(t.annots):"";return(t.prim==="LAMBDA"||t.prim==="LAMBDA_REC")&&r&&(s=ht(s.length/2)+s+ht(0)),(t.prim==="pair"||t.prim==="Pair")&&r>2&&(s=o===""?ht(s.length/2)+s+ht(0):ht(s.length/2)+s),t.prim==="view"&&t.args&&(s=ht(s.length/2)+s+ht(0)),`${n}${i}${s}${o}`},QL=(t,e)=>{const r=(e[0]-3)%2===1;let n=Math.floor((e[0]-3)/2);const i=t.consume(1)[0].toString(16).padStart(2,"0"),s={prim:Un[i]};if((Un[i]==="LAMBDA"||Un[i]==="LAMBDA_REC")&&t.consume(4),Un[i]==="view")return n!=0?ZL(t,s):s;let o,a;(Un[i]==="pair"||Un[i]==="Pair")&&n>2&&(o=eM(t),n=0,a=Wu(t));const c=new Array(n).fill(0).map(()=>qs(t));return(Un[i]==="LAMBDA"||Un[i]==="LAMBDA_REC")&&t.consume(4),o?s.args=o:c.length&&(s.args=c),a&&a[0]!==""?s.annots=a:r&&(s.annots=Wu(t)),s},ZL=(t,e)=>(t.consume(4),e.args=new Array(4).fill(0).map(()=>qs(t)),t.consume(4),e),eM=t=>{const e=new Or(or(t)),r=[];for(;e.length()>0;)r.push(qs(e));return r},o3=t=>{const e=t.map(n=>te.from(n,"utf8").toString("hex")).join("20"),r=e.length/2;return`${ht(r)}${e}`},Wu=t=>{const e=t.consume(4),r=parseInt(te.from(e).toString("hex"),16),n=t.consume(r);return te.from(n).toString("hex").split("20").map(s=>te.from(s,"hex").toString("utf8"))},tn=t=>e=>Sc(te.from(rw(e,Sr[t]))),rn=t=>e=>{const r=e.consume(XE[t]);return Ds(r,Sr[t])},a3=rn(ne.TZ1),c3=rn(ne.B),rh=t=>{const e=t.consume(1);if(e[0]===0)return rn(ne.TZ1)(t);if(e[0]===1)return rn(ne.TZ2)(t);if(e[0]===2)return rn(ne.TZ3)(t)},f3=tn(ne.B),u3=tn(ne.TZ1),Zv=t=>t?"ff":"00",P1=t=>tn(ne.P)(t),N1=t=>rn(ne.P)(t),l3=t=>{const e=[];for(t.consume(4);t.length()>0;)e.push(N1(t));return e},h3=t=>ht(32*t.length)+t.map(e=>P1(e)).join(""),d3=t=>{switch(t){case"yay":return"00";case"nay":return"01";case"pass":return"02";default:throw new VL(t)}},p3=t=>{const e=t.consume(1);switch(e[0]){case 0:return"yay";case 1:return"nay";case 2:return"pass";default:throw new $L(e[0].toString())}},g3=t=>t?Zv(!0)+nh(t):Zv(!1),b3=t=>{const e=parseInt(String(t),10),r=[];for(let n=0;n<4;n++){const i=(4-(n+1))*8;r.push((e&255<<i)>>i)}return te.from(r).toString("hex")},v3=t=>{const e=t.consume(4);let r=0;for(let n=0;n<e.length;n++)r=r|e[n]<<(e.length-(n+1))*8;return r},m3=t=>{const e=parseInt(String(t),10),r=[];for(let n=0;n<2;n++){const i=(2-(n+1))*8;r.push((e&255<<i)>>i)}return te.from(r).toString("hex")},y3=t=>{const e=t.consume(2);let r=0;for(let n=0;n<e.length;n++)r=r|e[n]<<(e.length-(n+1))*8;return r},tM=t=>t.consume(1)[0]===255,E3=t=>{if(tM(t))return rh(t)},nh=t=>{switch(t.substr(0,3)){case ne.TZ1:return"00"+tn(ne.TZ1)(t);case ne.TZ2:return"01"+tn(ne.TZ2)(t);case ne.TZ3:return"02"+tn(ne.TZ3)(t);default:throw new p1(t)}},w3=t=>{switch(t.substr(0,4)){case ne.EDPK:return"00"+tn(ne.EDPK)(t);case ne.SPPK:return"01"+tn(ne.SPPK)(t);case ne.P2PK:return"02"+tn(ne.P2PK)(t);default:throw new JE(t)}},_3=t=>{switch(t.substr(0,3)){case ne.TZ1:case ne.TZ2:case ne.TZ3:return"00"+nh(t);case ne.KT1:return"01"+tn(ne.KT1)(t)+"00";default:throw new wt(t)}},A3=t=>{if(t.substring(0,3)===ne.KT1)return"01"+tn(ne.KT1)(t)+"00";throw new Zi(t)},x3=t=>{switch(t.consume(1)[0]){case 0:return rn(ne.EDPK)(t);case 1:return rn(ne.SPPK)(t);case 2:return rn(ne.P2PK)(t);default:throw new JE(t.toString())}},S3=t=>{switch(t.consume(1)[0]){case 0:return rh(t);case 1:{const r=rn(ne.KT1)(t);return t.consume(1),r}default:throw new wt(t.toString())}},R3=t=>{if(t.consume(1)[0]===1){const r=rn(ne.KT1)(t);return t.consume(1),r}throw new Zi(t.toString())},L1=t=>{const e=[];let r=new ve(t,10);if(r.isNaN())throw new TypeError(`Invalid zarith number ${t}`);for(;;)if(r.lt(128)){r.lt(16)&&e.push("0"),e.push(r.toString(16));break}else{let n=r.mod(128);r=r.minus(n),r=r.dividedBy(128),n=n.plus(128),e.push(n.toString(16))}return e.join("")},M1=t=>{let e=0;for(;e<t.length()&&t.get(e)&128;)e+=1;let r=new ve(0);for(let n=e;n>=0;n-=1){const i=t.get(n)&127;r=r.multipliedBy(128),r=r.plus(i)}return t.consume(e+1),new ve(r).toString()},rM=t=>{const e=ht(t.consume(1)[0],2);if(e in zu)return zu[e];{const r=or(t,1),n=te.from(r).toString("utf8");if(n.length>ff)throw new th(n);return n}},nM=t=>{if(t.consume(1)[0]!==0){const r=rM(t),n=or(t),i=qs(new Or(n));return{entrypoint:r,value:i}}},iM=t=>{if(t in Yv)return`${Yv[t]}`;if(t.length>ff)throw new th(t);return`ff${Gs({string:t}).slice(8)}`},sM=t=>{if(!t||t.entrypoint==="default"&&"prim"in t.value&&t.value.prim==="Unit")return"00";const e=iM(t.entrypoint),r=Gs(t.value),n=(r.length/2).toString(16).padStart(8,"0");return`ff${e}${n}${r}`},oM=t=>{const e=Gs(t);return`${ht(e.length/2)}${e}`},aM=t=>{const e=or(t);return qs(new Or(e))},T3=tn(ne.VH),O3=rn(ne.VH),cM=t=>`${Gs({string:t}).slice(2)}`,I3=t=>{const e=or(t);return te.from(e).toString("utf8")},P3=t=>"",N3=t=>({}),L3=tn(ne.TXR1),M3=rn(ne.TXR1),C3=t=>`${ht(t.length/2)}${t}`,B3=t=>{const e=or(t);return te.from(e).toString("hex")},k3=t=>t?`ff${L1(t)}`:"00",D3=t=>{const e=t.consume(1);if(te.from(e).toString("hex")!=="00")return M1(t)},ih={branch:j.BRANCH,contents:[j.OPERATION]},uf={pkh:j.TZ1,secret:j.SECRET},lf={source:j.PKH,fee:j.ZARITH,counter:j.ZARITH,gas_limit:j.ZARITH,storage_limit:j.ZARITH,public_key:j.PUBLIC_KEY},hf={source:j.PKH,fee:j.ZARITH,counter:j.ZARITH,gas_limit:j.ZARITH,storage_limit:j.ZARITH,delegate:j.DELEGATE},df={source:j.PKH,fee:j.ZARITH,counter:j.ZARITH,gas_limit:j.ZARITH,storage_limit:j.ZARITH,amount:j.ZARITH,destination:j.ADDRESS,parameters:j.PARAMETERS},pf={source:j.PKH,fee:j.ZARITH,counter:j.ZARITH,gas_limit:j.ZARITH,storage_limit:j.ZARITH,balance:j.ZARITH,delegate:j.DELEGATE,script:j.SCRIPT},gf={source:j.PKH,period:j.INT32,proposal:j.PROPOSAL,ballot:j.BALLOT_STATEMENT},bf={slot:j.INT16,level:j.INT32,round:j.INT32,block_payload_hash:j.BLOCK_PAYLOAD_HASH},vf={level:j.INT32,nonce:j.RAW},mf={source:j.PKH,period:j.INT32,proposals:j.PROPOSAL_ARR},yf={source:j.PKH,fee:j.ZARITH,counter:j.ZARITH,gas_limit:j.ZARITH,storage_limit:j.ZARITH,value:j.VALUE},Ef={source:j.PKH,fee:j.ZARITH,counter:j.ZARITH,gas_limit:j.ZARITH,storage_limit:j.ZARITH,ticket_contents:j.VALUE,ticket_ty:j.VALUE,ticket_ticketer:j.ADDRESS,ticket_amount:j.ZARITH,destination:j.ADDRESS,entrypoint:j.ENTRYPOINT},wf={source:j.PKH,fee:j.ZARITH,counter:j.ZARITH,gas_limit:j.ZARITH,storage_limit:j.ZARITH,tx_rollup_origination:j.TX_ROLLUP_ORIGINATION_PARAM},_f={source:j.PKH,fee:j.ZARITH,counter:j.ZARITH,gas_limit:j.ZARITH,storage_limit:j.ZARITH,rollup:j.TX_ROLLUP_ID,content:j.TX_ROLLUP_BATCH_CONTENT,burn_limit:j.BURN_LIMIT},Af={source:j.PKH,fee:j.ZARITH,counter:j.ZARITH,gas_limit:j.ZARITH,storage_limit:j.ZARITH,amount:j.ZARITH,destination:j.SMART_CONTRACT_ADDRESS},C1={source:j.PKH,fee:j.ZARITH,counter:j.ZARITH,gas_limit:j.ZARITH,storage_limit:j.ZARITH,pk:j.PUBLIC_KEY},B1={consensus_key:j.PKH,delegate:j.PKH,destination:j.PKH},U3=t=>e=>{if(!(e.kind in t)||!(e.kind in Jv))throw new us(e.kind);return Jv[e.kind]+t[e.kind](e)},F3=t=>e=>{const r=e.consume(1),n=up[r[0]];if(n===void 0)throw new WL(r[0].toString());const i=t[n](e);if(typeof i!="object")throw new Xw("Decoded invalid operation");return Object.assign({kind:n},i)},dt=t=>e=>r=>Object.keys(e).reduce((i,s)=>{const o=e[s];if(r&&Array.isArray(o)){const a=t[o[0]],c=r[s];if(!Array.isArray(c))throw new zL(`Expected value to be Array ${JSON.stringify(c)}`);return i+c.reduce((l,f)=>l+a(f),"")}else{const a=t[o];return i+a(r[s])}},""),pt=t=>e=>r=>Object.keys(e).reduce((i,s)=>{const o=e[s];if(Array.isArray(o)){const a=t[o[0]],c=[],l=r.length();for(;r.length()>0;)if(c.push(a(r)),l===r.length())throw new Xw("Unable to decode value");return Object.assign(Object.assign({},i),{[s]:c})}else{const a=t[o],c=a(r);return typeof c<"u"?Object.assign(Object.assign({},i),{[s]:c}):Object.assign({},i)}},{}),Ze={[j.SECRET]:t=>$u(t.consume(20)),[j.RAW]:t=>$u(t.consume(32)),[j.TZ1]:a3,[j.BRANCH]:c3,[j.ZARITH]:M1,[j.PUBLIC_KEY]:x3,[j.PKH]:rh,[j.DELEGATE]:E3,[j.INT32]:v3,[j.SCRIPT]:JL,[j.BALLOT_STATEMENT]:p3,[j.PROPOSAL]:N1,[j.PROPOSAL_ARR]:l3,[j.PARAMETERS]:nM,[j.ADDRESS]:S3,[j.SMART_CONTRACT_ADDRESS]:R3,[j.VALUE]:aM,[j.INT16]:y3,[j.BLOCK_PAYLOAD_HASH]:O3,[j.ENTRYPOINT]:I3,[j.TX_ROLLUP_ORIGINATION_PARAM]:N3,[j.TX_ROLLUP_ID]:M3,[j.TX_ROLLUP_BATCH_CONTENT]:B3,[j.BURN_LIMIT]:D3};Ze[j.OPERATION]=F3(Ze);Ze[j.OP_ACTIVATE_ACCOUNT]=t=>pt(Ze)(uf)(t);Ze[j.OP_DELEGATION]=t=>pt(Ze)(hf)(t);Ze[j.OP_TRANSACTION]=t=>pt(Ze)(df)(t);Ze[j.OP_ORIGINATION]=t=>pt(Ze)(pf)(t);Ze[j.OP_BALLOT]=t=>pt(Ze)(gf)(t);Ze[j.OP_ENDORSEMENT]=t=>pt(Ze)(bf)(t);Ze[j.OP_SEED_NONCE_REVELATION]=t=>pt(Ze)(vf)(t);Ze[j.OP_PROPOSALS]=t=>pt(Ze)(mf)(t);Ze[j.OP_REVEAL]=t=>pt(Ze)(lf)(t);Ze[j.OP_REGISTER_GLOBAL_CONSTANT]=t=>pt(Ze)(yf)(t);Ze[j.OP_TRANSFER_TICKET]=t=>pt(Ze)(Ef)(t);Ze[j.OP_TX_ROLLUP_ORIGINATION]=t=>pt(Ze)(wf)(t);Ze[j.OP_TX_ROLLUP_SUBMIT_BATCH]=t=>pt(Ze)(_f)(t);Ze[j.OP_INCREASE_PAID_STORAGE]=t=>pt(Ze)(Af)(t);Ze[j.OP_UPDATE_CONSENSUS_KEY]=t=>pt(Ze)(C1)(t);Ze[j.OP_DRAIN_DELEGATE]=t=>pt(Ze)(B1)(t);Ze[j.MANAGER]=pt(Ze)(ih);const et={[j.SECRET]:t=>t,[j.RAW]:t=>t,[j.TZ1]:u3,[j.BRANCH]:f3,[j.ZARITH]:L1,[j.PUBLIC_KEY]:w3,[j.PKH]:nh,[j.DELEGATE]:g3,[j.SCRIPT]:XL,[j.BALLOT_STATEMENT]:d3,[j.PROPOSAL]:P1,[j.PROPOSAL_ARR]:h3,[j.INT32]:b3,[j.PARAMETERS]:sM,[j.ADDRESS]:_3,[j.SMART_CONTRACT_ADDRESS]:A3,[j.VALUE]:oM,[j.INT16]:m3,[j.BLOCK_PAYLOAD_HASH]:T3,[j.ENTRYPOINT]:cM,[j.TX_ROLLUP_ORIGINATION_PARAM]:P3,[j.TX_ROLLUP_ID]:L3,[j.TX_ROLLUP_BATCH_CONTENT]:C3,[j.BURN_LIMIT]:k3};et[j.OPERATION]=U3(et);et[j.OP_ACTIVATE_ACCOUNT]=t=>dt(et)(uf)(t);et[j.OP_DELEGATION]=t=>dt(et)(hf)(t);et[j.OP_TRANSACTION]=t=>dt(et)(df)(t);et[j.OP_ORIGINATION]=t=>dt(et)(pf)(t);et[j.OP_BALLOT]=t=>dt(et)(gf)(t);et[j.OP_ENDORSEMENT]=t=>dt(et)(bf)(t);et[j.OP_SEED_NONCE_REVELATION]=t=>dt(et)(vf)(t);et[j.OP_PROPOSALS]=t=>dt(et)(mf)(t);et[j.OP_REVEAL]=t=>dt(et)(lf)(t);et[j.OP_REGISTER_GLOBAL_CONSTANT]=t=>dt(et)(yf)(t);et[j.OP_TRANSFER_TICKET]=t=>dt(et)(Ef)(t);et[j.OP_TX_ROLLUP_ORIGINATION]=t=>dt(et)(wf)(t);et[j.OP_TX_ROLLUP_SUBMIT_BATCH]=t=>dt(et)(_f)(t);et[j.OP_INCREASE_PAID_STORAGE]=t=>dt(et)(Af)(t);et[j.OP_UPDATE_CONSENSUS_KEY]=t=>dt(et)(C1)(t);et[j.OP_DRAIN_DELEGATE]=t=>dt(et)(B1)(t);et[j.MANAGER]=dt(et)(ih);const K3={activate_account:uf,reveal:lf,delegation:hf,transaction:df,origination:pf,ballot:gf,endorsement:bf,seed_nonce_revelation:vf,proposals:mf,register_global_constant:yf,transfer_ticket:Ef,tx_rollup_origination:wf,tx_rollup_submit_batch:_f,increase_paid_storage:Af,update_consensus_key:C1,drain_delegate:B1},fM=(t,e)=>e.filter(r=>!t.includes(r)),uM=(t,e)=>t.filter(r=>r!==e),lM=t=>Object.keys(K3).includes(t),hM=t=>{const e=t.kind,r=Object.keys(t),n=uM(r,"kind"),i=Object.keys(K3[e]);return fM(n,i)};var Xu;(function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(Xu||(Xu={}));const em={Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd:4,PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU:5,PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS:5,PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb:6,PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo:7,PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA:8,PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i:9,PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV:10,PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx:11,Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A:12,PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY:13,PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg:14,PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW:15,ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK:16};function dM(t,e){return em[t]<em[e]}const Ts={"00":"parameter","01":"storage","02":"code","03":"False","04":"Elt","05":"Left","06":"None","07":"Pair","08":"Right","09":"Some","0a":"True","0b":"Unit","0c":"PACK","0d":"UNPACK","0e":"BLAKE2B","0f":"SHA256",10:"SHA512",11:"ABS",12:"ADD",13:"AMOUNT",14:"AND",15:"BALANCE",16:"CAR",17:"CDR",18:"CHECK_SIGNATURE",19:"COMPARE","1a":"CONCAT","1b":"CONS","1c":"CREATE_ACCOUNT","1d":"CREATE_CONTRACT","1e":"IMPLICIT_ACCOUNT","1f":"DIP",20:"DROP",21:"DUP",22:"EDIV",23:"EMPTY_MAP",24:"EMPTY_SET",25:"EQ",26:"EXEC",27:"FAILWITH",28:"GE",29:"GET","2a":"GT","2b":"HASH_KEY","2c":"IF","2d":"IF_CONS","2e":"IF_LEFT","2f":"IF_NONE",30:"INT",31:"LAMBDA",32:"LE",33:"LEFT",34:"LOOP",35:"LSL",36:"LSR",37:"LT",38:"MAP",39:"MEM","3a":"MUL","3b":"NEG","3c":"NEQ","3d":"NIL","3e":"NONE","3f":"NOT",40:"NOW",41:"OR",42:"PAIR",43:"PUSH",44:"RIGHT",45:"SIZE",46:"SOME",47:"SOURCE",48:"SENDER",49:"SELF","4a":"STEPS_TO_QUOTA","4b":"SUB","4c":"SWAP","4d":"TRANSFER_TOKENS","4e":"SET_DELEGATE","4f":"UNIT",50:"UPDATE",51:"XOR",52:"ITER",53:"LOOP_LEFT",54:"ADDRESS",55:"CONTRACT",56:"ISNAT",57:"CAST",58:"RENAME",59:"bool","5a":"contract","5b":"int","5c":"key","5d":"key_hash","5e":"lambda","5f":"list",60:"map",61:"big_map",62:"nat",63:"option",64:"or",65:"pair",66:"set",67:"signature",68:"string",69:"bytes","6a":"mutez","6b":"timestamp","6c":"unit","6d":"operation","6e":"address","6f":"SLICE",70:"DIG",71:"DUG",72:"EMPTY_BIG_MAP",73:"APPLY",74:"chain_id",75:"CHAIN_ID",76:"LEVEL",77:"SELF_ADDRESS",78:"never",79:"NEVER","7a":"UNPAIR","7b":"VOTING_POWER","7c":"TOTAL_VOTING_POWER","7d":"KECCAK","7e":"SHA3","7f":"PAIRING_CHECK",80:"bls12_381_g1",81:"bls12_381_g2",82:"bls12_381_fr",83:"sapling_state",84:"sapling_transaction_deprecated",85:"SAPLING_EMPTY_STATE",86:"SAPLING_VERIFY_UPDATE",87:"ticket",88:"TICKET",89:"READ_TICKET","8a":"SPLIT_TICKET","8b":"JOIN_TICKETS","8c":"GET_AND_UPDATE","8d":"chest","8e":"chest_key","8f":"OPEN_CHEST",90:"VIEW",91:"view",92:"constant",93:"SUB_MUTEZ",94:"tx_rollup_l2_address",95:"MIN_BLOCK_TIME",96:"sapling_transaction",97:"EMIT"},pM=(()=>{const t={};return Object.keys(Ts).forEach(e=>{t[Ts[e]]=e}),t})(),Ju={"00":"default","01":"root","02":"do","03":"set_delegate","04":"remove_delegate"},tm=(()=>{const t={};return Object.keys(Ju).forEach(e=>{t[Ju[e]]=e}),t})(),gM=t=>{const e=Vs(t.code),r=Vs(t.storage);return`${ht(e.length/2,8)}${e}${ht(r.length/2,8)}${r}`},bM=t=>{const e=or(t),r=or(t);return{code:$s(new Or(e)),storage:$s(new Or(r))}},Vs=t=>{if(Array.isArray(t)){const e=t.map(n=>Vs(n)).join(""),r=e.length/2;return`02${ht(r)}${e}`}else{if(Jw(t))return vM(t);if(Yw(t))return e3(t);if(Qw(t))return r3(t);if(Zw(t))return i3(t)}throw new Ww(JSON.stringify(t))},$s=t=>{const e=t.consume(1);switch(e[0]){case 10:return t3(t);case 1:return n3(t);case 0:return s3(t);case 2:{const r=new Or(or(t)),n=[];for(;r.length()>0;)n.push($s(r));return n}default:return mM(t,e)}},vM=t=>{const e=+Array.isArray(t.annots),r=Array.isArray(t.args)?t.args.length:0,n=ht(Math.min(2*r+e+3,9),2),i=pM[t.prim];let s=(t.args||[]).map(a=>Vs(a)).join("");const o=Array.isArray(t.annots)?o3(t.annots):"";return t.prim==="LAMBDA"&&r&&(s=ht(s.length/2)+s+ht(0)),(t.prim==="pair"||t.prim==="Pair")&&r>2&&(s=o===""?ht(s.length/2)+s+ht(0):ht(s.length/2)+s),t.prim==="view"&&t.args&&(s=ht(s.length/2)+s+ht(0)),`${n}${i}${s}${o}`},mM=(t,e)=>{const r=(e[0]-3)%2===1;let n=Math.floor((e[0]-3)/2);const i=t.consume(1)[0].toString(16).padStart(2,"0"),s={prim:Ts[i]};if(Ts[i]==="LAMBDA"&&t.consume(4),Ts[i]==="view")return n!=0?yM(t,s):s;let o,a;(Ts[i]==="pair"||Ts[i]==="Pair")&&n>2&&(o=EM(t),n=0,a=Wu(t));const c=new Array(n).fill(0).map(()=>$s(t));return Ts[i]==="LAMBDA"&&t.consume(4),o?s.args=o:c.length&&(s.args=c),a&&a[0]!==""?s.annots=a:r&&(s.annots=Wu(t)),s},yM=(t,e)=>(t.consume(4),e.args=new Array(4).fill(0).map(()=>$s(t)),t.consume(4),e),EM=t=>{const e=new Or(or(t)),r=[];for(;e.length()>0;)r.push($s(e));return r},wM=t=>{if(t.consume(1)[0]!==0){const r=AM(t),n=or(t),i=$s(new Or(n));return{entrypoint:r,value:i}}},_M=t=>{if(t in tm)return`${tm[t]}`;if(t.length>ff)throw new th(t);return`ff${Vs({string:t}).slice(8)}`},AM=t=>{const e=ht(t.consume(1)[0],2);if(e in Ju)return Ju[e];{const r=or(t,1),n=te.from(r).toString("utf8");if(n.length>ff)throw new th(n);return n}},xM=t=>{if(!t||t.entrypoint==="default"&&"prim"in t.value&&t.value.prim==="Unit")return"00";const e=_M(t.entrypoint),r=Vs(t.value),n=(r.length/2).toString(16).padStart(8,"0");return`ff${e}${n}${r}`},SM=t=>{const e=Vs(t);return`${ht(e.length/2)}${e}`},RM=t=>{const e=or(t);return $s(new Or(e))},TM=t=>`${Vs({string:t}).slice(2)}`,ft={[j.SECRET]:t=>$u(t.consume(20)),[j.RAW]:t=>$u(t.consume(32)),[j.TZ1]:a3,[j.BRANCH]:c3,[j.ZARITH]:M1,[j.PUBLIC_KEY]:x3,[j.PKH]:rh,[j.DELEGATE]:E3,[j.INT32]:v3,[j.SCRIPT]:bM,[j.BALLOT_STATEMENT]:p3,[j.PROPOSAL]:N1,[j.PROPOSAL_ARR]:l3,[j.PARAMETERS]:wM,[j.ADDRESS]:S3,[j.SMART_CONTRACT_ADDRESS]:R3,[j.VALUE]:RM,[j.INT16]:y3,[j.BLOCK_PAYLOAD_HASH]:O3,[j.ENTRYPOINT]:I3,[j.TX_ROLLUP_ORIGINATION_PARAM]:N3,[j.TX_ROLLUP_ID]:M3,[j.TX_ROLLUP_BATCH_CONTENT]:B3,[j.BURN_LIMIT]:D3};ft[j.OPERATION]=F3(ft);ft[j.OP_ACTIVATE_ACCOUNT]=t=>pt(ft)(uf)(t);ft[j.OP_DELEGATION]=t=>pt(ft)(hf)(t);ft[j.OP_TRANSACTION]=t=>pt(ft)(df)(t);ft[j.OP_ORIGINATION]=t=>pt(ft)(pf)(t);ft[j.OP_BALLOT]=t=>pt(ft)(gf)(t);ft[j.OP_ENDORSEMENT]=t=>pt(ft)(bf)(t);ft[j.OP_SEED_NONCE_REVELATION]=t=>pt(ft)(vf)(t);ft[j.OP_PROPOSALS]=t=>pt(ft)(mf)(t);ft[j.OP_REVEAL]=t=>pt(ft)(lf)(t);ft[j.OP_REGISTER_GLOBAL_CONSTANT]=t=>pt(ft)(yf)(t);ft[j.OP_TRANSFER_TICKET]=t=>pt(ft)(Ef)(t);ft[j.OP_TX_ROLLUP_ORIGINATION]=t=>pt(ft)(wf)(t);ft[j.OP_TX_ROLLUP_SUBMIT_BATCH]=t=>pt(ft)(_f)(t);ft[j.OP_INCREASE_PAID_STORAGE]=t=>pt(ft)(Af)(t);ft[j.MANAGER]=pt(ft)(ih);const ut={[j.SECRET]:t=>t,[j.RAW]:t=>t,[j.TZ1]:u3,[j.BRANCH]:f3,[j.ZARITH]:L1,[j.PUBLIC_KEY]:w3,[j.PKH]:nh,[j.DELEGATE]:g3,[j.SCRIPT]:gM,[j.BALLOT_STATEMENT]:d3,[j.PROPOSAL]:P1,[j.PROPOSAL_ARR]:h3,[j.INT32]:b3,[j.PARAMETERS]:xM,[j.ADDRESS]:_3,[j.SMART_CONTRACT_ADDRESS]:A3,[j.VALUE]:SM,[j.INT16]:m3,[j.BLOCK_PAYLOAD_HASH]:T3,[j.ENTRYPOINT]:TM,[j.TX_ROLLUP_ORIGINATION_PARAM]:P3,[j.TX_ROLLUP_ID]:L3,[j.TX_ROLLUP_BATCH_CONTENT]:C3,[j.BURN_LIMIT]:k3};ut[j.OPERATION]=U3(ut);ut[j.OP_ACTIVATE_ACCOUNT]=t=>dt(ut)(uf)(t);ut[j.OP_DELEGATION]=t=>dt(ut)(hf)(t);ut[j.OP_TRANSACTION]=t=>dt(ut)(df)(t);ut[j.OP_ORIGINATION]=t=>dt(ut)(pf)(t);ut[j.OP_BALLOT]=t=>dt(ut)(gf)(t);ut[j.OP_ENDORSEMENT]=t=>dt(ut)(bf)(t);ut[j.OP_SEED_NONCE_REVELATION]=t=>dt(ut)(vf)(t);ut[j.OP_PROPOSALS]=t=>dt(ut)(mf)(t);ut[j.OP_REVEAL]=t=>dt(ut)(lf)(t);ut[j.OP_REGISTER_GLOBAL_CONSTANT]=t=>dt(ut)(yf)(t);ut[j.OP_TRANSFER_TICKET]=t=>dt(ut)(Ef)(t);ut[j.OP_TX_ROLLUP_ORIGINATION]=t=>dt(ut)(wf)(t);ut[j.OP_TX_ROLLUP_SUBMIT_BATCH]=t=>dt(ut)(_f)(t);ut[j.OP_INCREASE_PAID_STORAGE]=t=>dt(ut)(Af)(t);ut[j.MANAGER]=dt(ut)(ih);const H3=Xu.PtLimaPtL;function OM(t,e){return e===Xu.PtKathman||dM(e,H3)?{encoder:ut[t],decoder:r=>{const n=Or.fromHexString(r);return ft[t](n)}}:{encoder:et[t],decoder:r=>{const n=Or.fromHexString(r);return Ze[t](n)}}}class j3{constructor(e=H3){this.protocolHash=e,this.codec=OM(j.MANAGER,this.protocolHash)}forge(e){if(AI(e.branch)!==_e.VALID)throw new qL(`The block hash ${e.branch} is invalid`);for(const n of e.contents){if(!lM(n.kind))throw new us(n.kind);const i=hM(n);if(i.length===1){if(n.kind==="delegation"&&i[0]==="delegate")continue;if(n.kind==="origination"&&i[0]==="delegate")continue;if(n.kind==="transaction"&&i[0]==="parameters")continue;if(n.kind==="tx_rollup_submit_batch"&&i[0]==="burn_limit")continue;throw new Qv(`Missing properties: ${i.join(", ").toString()}`)}else if(i.length>1)throw new Qv(`Missing properties: ${i.join(", ").toString()}`)}const r=this.codec.encoder(e).toLowerCase();return Promise.resolve(r)}parse(e){return Promise.resolve(this.codec.decoder(e))}}new j3;function kn(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function J(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function zf(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function IM(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function PM(t,e){const r=JSON.parse(t.body);if(r[0]&&r[0].kind&&r[0].msg){const n=JSON.stringify({kind:r[0].kind,id:r[0].id,msg:r[0].msg.replace(e,"")});return new Ha(`Http error response: (${t.status}) ${n}`,t.status,t.statusText,n,t.url)}else return t}class NM{constructor(e){this.context=e}inject(e){return J(this,void 0,void 0,function*(){let r;try{r=yield this.context.rpc.injectOperation(e)}catch(n){const i=". You may want to use --replace to provide adequate fee and replace it";throw n instanceof Ha&&n.message.includes(i)?PM(n,i):n}return r})}}class Wf extends Error{constructor(){super("No signer has been configured. Please configure one by calling setProvider({signer}) on your TezosToolkit instance."),this.name="UnconfiguredSignerError"}}class lp{publicKey(){return J(this,void 0,void 0,function*(){throw new Wf})}publicKeyHash(){return J(this,void 0,void 0,function*(){throw new Wf})}secretKey(){return J(this,void 0,void 0,function*(){throw new Wf})}sign(e,r){return J(this,void 0,void 0,function*(){throw new Wf})}}function G3(t){return new Mt(e=>(t.on("data",r=>{e.next(r)}),t.on("error",r=>{e.error(r)}),t.on("close",()=>{e.complete()}),()=>{t.close()}))}var zs;(function(t){t[t.DELEGATION=10600]="DELEGATION",t[t.ORIGINATION=10600]="ORIGINATION",t[t.TRANSFER=10600]="TRANSFER",t[t.REVEAL=1100]="REVEAL"})(zs||(zs={}));var Ws;(function(t){t[t.DELEGATION=1257]="DELEGATION",t[t.ORIGINATION=1e4]="ORIGINATION",t[t.TRANSFER=1e4]="TRANSFER",t[t.REVEAL=374]="REVEAL"})(Ws||(Ws={}));var Xs;(function(t){t[t.DELEGATION=0]="DELEGATION",t[t.ORIGINATION=257]="ORIGINATION",t[t.TRANSFER=257]="TRANSFER",t[t.REVEAL=0]="REVEAL"})(Xs||(Xs={}));const LM=250;var Zt;(function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(Zt||(Zt={}));Zt.Pt24m4xi,Zt.PsBABY5H,Zt.PsBabyM1,Zt.PsCARTHA,Zt.PsDELPH1,Zt.PtEdo2Zk,Zt.PsFLorena,Zt.PtGRANADs,Zt.PtHangz2,Zt.PsiThaCa,Zt.Psithaca2,Zt.PtJakart2,Zt.PtKathman,Zt.PtLimaPtL,Zt.ProtoALpha;var rm;(function(t){t.MAINNET="NetXdQprcVkpaWU",t.CARTHAGENET="NetXjD3HPJJjmcd",t.DELPHINET="NetXm8tYqnMWky1",t.EDONET="NetXSgo1ZT2DRUG",t.FLORENCENET="NetXxkAx4woPLyu",t.GRANADANET="NetXz969SFaFn8k",t.HANGZHOUNET="NetXZSsxBpMQeAT",t.ITHACANET="NetXbhmtAbMukLc",t.ITHACANET2="NetXnHfVqm9iesp",t.JAKARTANET2="NetXLH1uAxK7CCh",t.KATHMANDUNET="NetXazhm4yetmff",t.LIMANET="NetXizpkH94bocH"})(rm||(rm={}));class q3 extends Error{constructor(e,r,n){super(`${e} Received ${n.length} arguments while expecting one of the following signatures (${JSON.stringify(r)})`),this.smartContractMethodName=e,this.sigs=r,this.args=n,this.name="Invalid parameters error"}}class MM extends Error{constructor(e){super(`Since Babylon delegation source can no longer be a contract address ${e}. Please use the smart contract abstraction to set your delegate.`),this.source=e,this.name="Invalid delegation source error"}}class Yu extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="InvalidCodeParameter"}}class V3 extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="InvalidInitParameter"}}class CM extends Error{constructor(e,r,n,i){super(`Unable to encode the parameter of the view: ${e}. Received ${n} as parameter while expecting one of the following signatures (${JSON.stringify(r)})`),this.smartContractViewName=e,this.sigs=r,this.args=n,this.originalError=i,this.name="Invalid view parameters error",this.cause=i}}class BM extends Error{constructor(e,r,n,i){super(e),this.message=e,this.viewName=r,this.failWith=n,this.originalError=i,this.name="ViewSimulationError"}}const kM=t=>{if(DM(t.body)){const e=JSON.parse(t.body);if(Array.isArray(e)&&"with"in e[e.length-1])return e[e.length-1].with}},DM=t=>{try{JSON.parse(t)}catch{return!1}return!0};class nm extends Error{constructor(e){super(`${e} Please configure the context of the view execution in the executeView method.`),this.info=e,this.name="InvalidViewSimulationContext"}}class $3 extends Error{constructor(e){super(e),this.message=e,this.name="RevealOperationError"}}class UM extends Error{constructor(e){super(e),this.message=e,this.name="OriginationParameterError"}}class FM extends Error{constructor(e){super(e),this.message=e,this.name="IntegerError"}}const Pa=({code:t,init:e,balance:r="0",delegate:n,storage:i,fee:s=Ws.ORIGINATION,gasLimit:o=zs.ORIGINATION,storageLimit:a=Xs.ORIGINATION,mutez:c=!1})=>J(void 0,void 0,void 0,function*(){if(i!==void 0&&e!==void 0)throw new UM("Storage and Init cannot be set a the same time. Please either use storage or init but not both.");if(!Array.isArray(t))throw new Yu("Wrong code parameter type, expected an array",t);let l;if(i!==void 0){const S=t.find(M=>"prim"in M&&M.prim==="storage");if((S==null?void 0:S.args)===void 0)throw new Yu("The storage section is missing from the script",t);l=new Qr(S.args[0]).Encode(i)}else if(e!==void 0&&typeof e=="object")l=e;else throw new V3("Wrong init parameter type, expected JSON Michelson",e);const f={code:t,storage:l};if(isNaN(Number(r)))throw new FM(`Unexpected Invalid Integer ${r}`);const h={kind:ce.ORIGINATION,fee:s,gas_limit:o,storage_limit:a,balance:c?r.toString():v1("tz","mutez",r).toString(),script:f};return n&&(h.delegate=n),h}),Na=({to:t,amount:e,parameter:r,fee:n=Ws.TRANSFER,gasLimit:i=zs.TRANSFER,storageLimit:s=Xs.TRANSFER,mutez:o=!1})=>J(void 0,void 0,void 0,function*(){return{kind:ce.TRANSACTION,fee:n,gas_limit:i,storage_limit:s,amount:o?e.toString():v1("tz","mutez",e).toString(),destination:t,parameters:r}}),La=({delegate:t,source:e,fee:r=Ws.DELEGATION,gasLimit:n=zs.DELEGATION,storageLimit:i=Xs.DELEGATION})=>J(void 0,void 0,void 0,function*(){return{kind:ce.DELEGATION,source:e,fee:r,gas_limit:n,storage_limit:i,delegate:t}}),z3=({fee:t=Ws.DELEGATION,gasLimit:e=zs.DELEGATION,storageLimit:r=Xs.DELEGATION},n)=>J(void 0,void 0,void 0,function*(){return{kind:ce.DELEGATION,fee:t,gas_limit:e,storage_limit:r,delegate:n}}),Js=({fee:t=Ws.REVEAL,gasLimit:e=zs.REVEAL,storageLimit:r=Xs.REVEAL},n,i)=>J(void 0,void 0,void 0,function*(){return{kind:ce.REVEAL,fee:t,public_key:i,source:n,gas_limit:e,storage_limit:r}}),kc=({value:t,source:e,fee:r,gasLimit:n,storageLimit:i})=>J(void 0,void 0,void 0,function*(){return{kind:ce.REGISTER_GLOBAL_CONSTANT,value:t,fee:r,gas_limit:n,storage_limit:i,source:e}}),Dc=({source:t,fee:e,gasLimit:r,storageLimit:n})=>J(void 0,void 0,void 0,function*(){return{kind:ce.TX_ROLLUP_ORIGINATION,fee:e,gas_limit:r,storage_limit:n,source:t,tx_rollup_origination:{}}}),Uc=({content:t,rollup:e,source:r,fee:n,gasLimit:i,storageLimit:s})=>J(void 0,void 0,void 0,function*(){return{kind:ce.TX_ROLLUP_SUBMIT_BATCH,fee:n,gas_limit:i,storage_limit:s,source:r,content:t,rollup:e}}),Fc=({ticketContents:t,ticketTy:e,ticketTicketer:r,ticketAmount:n,destination:i,entrypoint:s,source:o,fee:a,gasLimit:c,storageLimit:l})=>J(void 0,void 0,void 0,function*(){return{kind:ce.TRANSFER_TICKET,fee:a,gas_limit:c,storage_limit:l,source:o,ticket_contents:t,ticket_ty:e,ticket_ticketer:r,ticket_amount:n,destination:i,entrypoint:s}}),Ma=({source:t,fee:e,gasLimit:r,storageLimit:n,amount:i,destination:s})=>J(void 0,void 0,void 0,function*(){return{kind:ce.INCREASE_PAID_STORAGE,source:t,fee:e,gas_limit:r,storage_limit:n,amount:i,destination:s}}),W3=({consensus_key:t,delegate:e,destination:r})=>J(void 0,void 0,void 0,function*(){return{kind:ce.DRAIN_DELEGATE,consensus_key:t,delegate:e,destination:r}}),X3=({source:t,proposal:e,ballot:r})=>J(void 0,void 0,void 0,function*(){return{kind:ce.BALLOT,source:t,proposal:e,ballot:r}}),J3=({source:t,proposals:e})=>J(void 0,void 0,void 0,function*(){return{kind:ce.PROPOSALS,source:t,proposals:e}}),k1=({source:t,fee:e,gasLimit:r,storageLimit:n,pk:i})=>J(void 0,void 0,void 0,function*(){return{kind:ce.UPDATE_CONSENSUS_KEY,source:t,fee:e,gas_limit:r,storage_limit:n,pk:i}}),Xf=(t,e)=>Object.assign(Object.assign({},t),{kind:e}),im=(t,e)=>{if(Array.isArray(t)){const r=t.find(n=>n.kind===e);if(r&&KM(r,e))return r}},KM=(t,e)=>t.kind===e,hp=t=>["transaction","delegation","origination","reveal","register_global_constant","increase_paid_storage","tx_rollup_origination","tx_rollup_submit_batch","transfer_ticket","update_consensus_key"].indexOf(t.kind)!==-1,Qu=t=>["transaction","delegation","origination","register_global_constant","increase_paid_storage","tx_rollup_origination","tx_rollup_submit_batch","transfer_ticket","update_consensus_key"].indexOf(t.kind)!==-1,D1=t=>"metadata"in t,Ja=t=>D1(t)&&"operation_result"in t.metadata,HM=t=>D1(t)&&"internal_operation_results"in t.metadata,jM=t=>"with"in t;class Y3 extends Error{constructor(e,r){super(),this.errors=e,this.errorDetails=r,this.name="TezosOperationError";const n=e[e.length-1];this.id=n.id,this.kind=n.kind,this.message=`(${this.kind}) ${this.id}`,jM(n)&&(n.with.string?this.message=n.with.string:n.with.int?this.message=n.with.int:this.message=JSON.stringify(n.with))}}class GM extends Error{constructor(e){super("Preapply returned an unexpected result"),this.result=e,this.name="TezosPreapplyFailureError"}}const pi=t=>{const e=Array.isArray(t)?t:[t],r=[];for(let n=0;n<e.length;n++)for(let i=0;i<e[n].contents.length;i++){const s=e[n].contents[i];Ja(s)&&(r.push(Object.assign({fee:s.fee},s.metadata.operation_result)),Array.isArray(s.metadata.internal_operation_results)&&s.metadata.internal_operation_results.forEach(o=>r.push(o.result)))}return r},Ca=(t,e="failed")=>{const r=Array.isArray(t)?t:[t];let n=[];for(let i=0;i<r.length;i++)for(let s=0;s<r[i].contents.length;s++){const o=r[i].contents[s];if(D1(o)&&(Ja(o)&&o.metadata.operation_result.status===e&&(n=n.concat(o.metadata.operation_result.errors||[])),HM(o)&&Array.isArray(o.metadata.internal_operation_results)))for(const a of o.metadata.internal_operation_results)"result"in a&&a.result.status===e&&(n=n.concat(a.result.errors||[]))}return n};class qM extends Error{constructor(e){super(e),this.message=e,this.name="OriginationOperationError"}}class Q3 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidConfirmationCountError"}}class VM extends Error{constructor(e){super(e),this.message=e,this.name="ConfirmationUndefinedError"}}class $M extends Error{constructor(e){super(e),this.message=e,this.name="InvalidFilterExpressionError"}}class yo extends Error{constructor(e){super(e),this.message=e,this.name="RPCResponseError"}}class Cr{constructor(e,r,n,i){if(this.hash=e,this.raw=r,this.results=n,this.context=i,this._pollingConfig$=new Cc(1),this.currentHead$=this._pollingConfig$.pipe(ci(s=>new Jl(s).pipe(yw(s.timeout*1e3,_1(new Error("Confirmation polling timed out"))))),ci(()=>gw(()=>G3(this.context.stream.subscribeBlock("head"))).pipe(ci(s=>{var o,a;const c=(a=(o=this.lastHead)===null||o===void 0?void 0:o.header.level)!==null&&a!==void 0?a:s.header.level-1;return x1(c+1,s.header.level-c-1).pipe(cf(l=>this.context.readProvider.getBlock(l)),vw(s))}),Hu(s=>this.lastHead=s))),Nv({refCount:!0})),this.confirmed$=this.currentHead$.pipe(xo(s=>{for(let o=3;o>=0;o--)s.operations[o].forEach(a=>{a.hash===this.hash&&(this._foundAt=s.header.level)});if(s.header.level-this._foundAt>=0)return this._foundAt}),Ku(s=>s!==void 0),qi(),Nv()),this._foundAt=Number.POSITIVE_INFINITY,tw(this.hash)!==_e.VALID)throw new YE(this.hash);this.confirmed$.pipe(qi(),S1(()=>Wa(cw))).subscribe()}get includedInBlock(){return this._foundAt}get revealOperation(){return Array.isArray(this.results)&&this.results.find(e=>e.kind==="reveal")}get revealStatus(){return this.revealOperation?this.revealOperation.metadata.operation_result.status:"unknown"}get status(){return this.results.map(e=>Ja(e)?e.metadata.operation_result.status:"unknown")[0]||"unknown"}confirmation(e,r){return J(this,void 0,void 0,function*(){if(typeof e<"u"&&e<1)throw new Q3("Confirmation count must be at least 1");const{defaultConfirmationCount:n,confirmationPollingTimeoutSecond:i}=this.context.config;this._pollingConfig$.next({timeout:r||i});const s=e!==void 0?e:n;return new Promise((o,a)=>{this.confirmed$.pipe(ci(()=>this.currentHead$),Ku(c=>c.header.level-this._foundAt>=s-1),qi()).subscribe(c=>{o(this._foundAt+(s-1))},a)})})}}class zM extends Cr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}getOriginatedContractAddresses(){const e=this.results.filter(n=>n.kind==="origination");let r=[];for(const n of e)n.metadata.operation_result.originated_contracts&&(r=[...r,...n.metadata.operation_result.originated_contracts]);return r}get status(){return this.results.filter(e=>Z3.indexOf(e.kind)!==-1).map(e=>Ja(e)?e.metadata.operation_result.status:"unknown")[0]||"unknown"}get fee(){return this.sumProp(this.params,"fee")}get gasLimit(){return this.sumProp(this.params,"gas_limit")}get storageLimit(){return this.sumProp(this.params,"storage_limit")}get consumedGas(){return ve.config({DECIMAL_PLACES:0,ROUNDING_MODE:ve.ROUND_UP}),new ve(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(pi({contents:this.results}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(pi({contents:this.results}),"paid_storage_size_diff"))}get errors(){return Ca({contents:this.results})}}class sh{constructor(e){this.context=e}get rpc(){return this.context.rpc}get signer(){return this.context.signer}isRevealOpNeeded(e,r){return J(this,void 0,void 0,function*(){return!(!(yield this.isAccountRevealRequired(r))||!this.isRevealRequiredForOpType(e))})}isAccountRevealRequired(e){return J(this,void 0,void 0,function*(){return!(yield this.context.readProvider.isAccountRevealed(e,"head"))})}isRevealRequiredForOpType(e){let r=!1;for(const n of e)Qu(n)&&(r=!0);return r}prepareOperation({operation:e,source:r},n){return J(this,void 0,void 0,function*(){const i={};let s=[];const o=this.context.readProvider.getBlockHash("head~2"),a=this.context.readProvider.getNextProtocol("head");Array.isArray(e)?s=[...e]:s=[e];const c=n||(yield this.signer.publicKeyHash());let l=Promise.resolve(void 0),f=Promise.resolve(void 0);s.find(K=>J(this,void 0,void 0,function*(){if(K.kind==="ballot"||K.kind==="proposals")try{f=this.rpc.getCurrentPeriod()}catch(U){throw new yo(`Failed to get the current voting period index: ${JSON.stringify(U)}`)}}));for(let K=0;K<s.length;K++)if(Qu(s[K])||s[K].kind==="reveal"){l=this.context.readProvider.getCounter(c,"head");break}const[h,S,P,M]=yield Promise.all([o,a,l,f]),H=parseInt(P||"0",10);(!i[c]||i[c]<H)&&(i[c]=H);const $=K=>({counter:`${++i[c]}`,fee:typeof K.fee>"u"?"0":`${K.fee}`,gas_limit:typeof K.gas_limit>"u"?"0":`${K.gas_limit}`,storage_limit:typeof K.storage_limit>"u"?"0":`${K.storage_limit}`}),q=K=>({source:typeof K.source>"u"?r||c:K.source}),V=(K=>K.map(U=>{switch(U.kind){case ce.ACTIVATION:case ce.DRAIN_DELEGATE:return Object.assign({},U);case ce.ORIGINATION:return Object.assign(Object.assign(Object.assign(Object.assign({},U),{balance:typeof U.balance<"u"?`${U.balance}`:"0"}),q(U)),$(U));case ce.TRANSACTION:{const G=Object.assign(Object.assign(Object.assign(Object.assign({},U),{amount:typeof U.amount<"u"?`${U.amount}`:"0"}),q(U)),$(U));if(G.source.toLowerCase().startsWith("kt1"))throw new g1(`KT1 addresses are not supported as source since ${Zt.PsBabyM1}`);return G}case ce.REVEAL:case ce.DELEGATION:case ce.REGISTER_GLOBAL_CONSTANT:case ce.TX_ROLLUP_ORIGINATION:case ce.TX_ROLLUP_SUBMIT_BATCH:case ce.UPDATE_CONSENSUS_KEY:return Object.assign(Object.assign(Object.assign({},U),q(U)),$(U));case ce.TRANSFER_TICKET:return Object.assign(Object.assign(Object.assign(Object.assign({},U),{ticket_amount:`${U.ticket_amount}`}),q(U)),$(U));case ce.INCREASE_PAID_STORAGE:return Object.assign(Object.assign(Object.assign(Object.assign({},U),{amount:`${U.amount}`}),q(U)),$(U));case ce.BALLOT:if(M===void 0)throw new yo("Failed to get the current voting period index");return Object.assign(Object.assign({},U),{period:M==null?void 0:M.voting_period.index});case ce.PROPOSALS:if(M===void 0)throw new yo("Failed to get the current voting period index");return Object.assign(Object.assign({},U),{period:M==null?void 0:M.voting_period.index});default:throw new us(U.kind)}}))(s);return{opOb:{branch:h,contents:V,protocol:S},counter:H}})}forge({opOb:{branch:e,contents:r,protocol:n},counter:i}){return J(this,void 0,void 0,function*(){return{opbytes:yield this.context.forger.forge({branch:e,contents:r}),opOb:{branch:e,contents:r,protocol:n},counter:i}})}simulate(e){return J(this,void 0,void 0,function*(){return{opResponse:yield this.rpc.runOperation(e),op:e,context:this.context.clone()}})}estimate(e,r){var{fee:n,gasLimit:i,storageLimit:s}=e,o=kn(e,["fee","gasLimit","storageLimit"]);return J(this,void 0,void 0,function*(){let a=n,c=i,l=s;if(n===void 0||i===void 0||s===void 0){const f=yield r(Object.assign({fee:n,gasLimit:i,storageLimit:s},o));a===void 0&&(a=f.suggestedFeeMutez),c===void 0&&(c=f.gasLimit),l===void 0&&(l=f.storageLimit)}return{fee:a,gasLimit:c,storageLimit:l}})}signAndInject(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.sign(e.opbytes,new Uint8Array([3]));e.opbytes=r.sbytes,e.opOb.signature=r.prefixSig;const n=[],i=yield this.rpc.preapplyOperations([e.opOb]);if(!Array.isArray(i))throw new GM(i);for(let o=0;o<i.length;o++)for(let a=0;a<i[o].contents.length;a++)n.push(i[o].contents[a]);const s=Ca(i);if(s.length)throw new Y3(s,"Error occurred during validation simulation of operation");return{hash:yield this.context.injector.inject(e.opbytes),forgedBytes:e,opResponse:n,context:this.context.clone()}})}}const Z3=[ce.ACTIVATION,ce.ORIGINATION,ce.TRANSACTION,ce.DELEGATION];class U1 extends sh{constructor(e,r){super(e),this.estimator=r,this.operations=[]}withTransfer(e){if(vt(e.to)!==_e.VALID)throw new wt(e.to);return this.operations.push(Object.assign({kind:ce.TRANSACTION},e)),this}withTransferTicket(e){if(es(e.destination)!==_e.VALID)throw new Zi(e.destination);return this.operations.push(Object.assign({kind:ce.TRANSFER_TICKET},e)),this}withContractCall(e,r={}){return this.withTransfer(e.toTransferParams(r))}withDelegation(e){if(e.source&&vt(e.source)!==_e.VALID)throw new wt(e.source);if(e.delegate&&vt(e.delegate)!==_e.VALID)throw new wt(e.delegate);return this.operations.push(Object.assign({kind:ce.DELEGATION},e)),this}withActivation({pkh:e,secret:r}){if(b1(e)!==_e.VALID)throw new p1(e);return this.operations.push({kind:ce.ACTIVATION,pkh:e,secret:r}),this}withOrigination(e){return this.operations.push(Object.assign({kind:ce.ORIGINATION},e)),this}withRegisterGlobalConstant(e){return this.operations.push(Object.assign({kind:ce.REGISTER_GLOBAL_CONSTANT},e)),this}withIncreasePaidStorage(e){return this.operations.push(Object.assign({kind:ce.INCREASE_PAID_STORAGE},e)),this}withTxRollupOrigination(e){return this.operations.push(Object.assign({kind:ce.TX_ROLLUP_ORIGINATION},e)),this}withTxRollupSubmitBatch(e){return this.operations.push(Object.assign({kind:ce.TX_ROLLUP_SUBMIT_BATCH},e)),this}getRPCOp(e){return J(this,void 0,void 0,function*(){switch(e.kind){case ce.TRANSACTION:return Na(Object.assign({},e));case ce.ORIGINATION:return Pa(yield this.context.parser.prepareCodeOrigination(Object.assign({},e)));case ce.DELEGATION:return La(Object.assign({},e));case ce.ACTIVATION:return Object.assign({},e);case ce.REGISTER_GLOBAL_CONSTANT:return kc(Object.assign({},e));case ce.INCREASE_PAID_STORAGE:return Ma(Object.assign({},e));case ce.TX_ROLLUP_ORIGINATION:return Dc(Object.assign({},e));case ce.TX_ROLLUP_SUBMIT_BATCH:return Uc(Object.assign({},e));case ce.TRANSFER_TICKET:return Fc(Object.assign({},e));default:throw new us(e.kind)}})}with(e){for(const r of e)switch(r.kind){case ce.TRANSACTION:this.withTransfer(r);break;case ce.ORIGINATION:this.withOrigination(r);break;case ce.DELEGATION:this.withDelegation(r);break;case ce.ACTIVATION:this.withActivation(r);break;case ce.REGISTER_GLOBAL_CONSTANT:this.withRegisterGlobalConstant(r);break;case ce.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(r);break;case ce.TX_ROLLUP_ORIGINATION:this.withTxRollupOrigination(r);break;case ce.TX_ROLLUP_SUBMIT_BATCH:this.withTxRollupSubmitBatch(r);break;case ce.TRANSFER_TICKET:this.withTransferTicket(r);break;default:throw new us(r.kind)}return this}toPrepare(){return J(this,void 0,void 0,function*(){const e=yield this.signer.publicKeyHash(),r=yield this.signer.publicKey(),n=yield this.estimator.batch(this.operations),i=yield this.isRevealOpNeeded(this.operations,e);let s=i?1:0;const o=[];for(const a of this.operations){if(hp(a)){const c=yield this.estimate(a,()=>J(this,void 0,void 0,function*(){return n[s]}));o.push(yield this.getRPCOp(Object.assign(Object.assign({},a),c)))}else o.push(Object.assign({},a));s++}if(i){const a={kind:ce.REVEAL},c=yield this.estimate(a,()=>J(this,void 0,void 0,function*(){return n[0]}));o.unshift(yield Js(Object.assign({},c),e,r))}return o})}send(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.signer.publicKey(),i=yield this.estimator.batch(this.operations),s=yield this.isRevealOpNeeded(this.operations,r);let o=s?1:0;const a=[];for(const H of this.operations){if(hp(H)){const $=yield this.estimate(H,()=>J(this,void 0,void 0,function*(){return i[o]}));a.push(yield this.getRPCOp(Object.assign(Object.assign({},H),$)))}else a.push(Object.assign({},H));o++}if(s){const H={kind:ce.REVEAL},$=yield this.estimate(H,()=>J(this,void 0,void 0,function*(){return i[0]}));a.unshift(yield Js(Object.assign({},$),r,n))}const c=e&&e.source||r,l=yield this.prepareOperation({operation:a,source:c}),f=yield this.forge(l),{hash:h,context:S,forgedBytes:P,opResponse:M}=yield this.signAndInject(f);return new zM(h,a,c,P,M,S)})}}class WM{constructor(e,r){this.context=e,this.estimator=r}batch(e){const r=new U1(this.context,this.estimator);return Array.isArray(e)&&r.with(e),r}}const XM=(t,{ALLOCATION_BURN:e,ORIGINATION_BURN:r}={ALLOCATION_BURN:257,ORIGINATION_BURN:257})=>{ve.config({DECIMAL_PLACES:0,ROUNDING_MODE:ve.ROUND_UP});const n=pi({contents:t});let i=new ve(0),s=new ve(0),o=new ve(0),a=new ve(0),c=new ve(0),l=new ve(0);return n.forEach(f=>{o=o.plus(f.fee||0),a=a.plus(Array.isArray(f.originated_contracts)?f.originated_contracts.length*r:0),c=c.plus("allocated_destination_contract"in f?e:0),i=i.plus(f.consumed_milligas||0),l=l.plus("paid_storage_size_diff"in f&&Number(f.paid_storage_size_diff)||0)}),s=s.plus(c).plus(a).plus(l),{totalFee:o,totalMilliGas:i,totalGas:i.dividedBy(1e3),totalStorage:s,totalAllocationBurn:c,totalOriginationBurn:a,totalPaidStorageDiff:l,totalStorageBurn:new ve(s.multipliedBy(LM))}},JM=60;class Ya{constructor(e,r,n){if(this.opHash=e,this.context=r,this._newHead$=n,this._operationResult=new Cc(1),this._includedInBlock=new Cc(1),this._included=!1,this.newHead$=this._newHead$.pipe(ci(i=>{var s,o;const a=(o=(s=this.lastHead)===null||s===void 0?void 0:s.header.level)!==null&&o!==void 0?o:i.header.level-1;return x1(a+1,i.header.level-a-1).pipe(cf(c=>this.context.readProvider.getBlock(c)),vw(i))}),Hu(i=>this.lastHead=i),ip(1),Lc()),this.confirmed$=this.newHead$.pipe(xo(i=>{for(const s of i.operations)for(const o of s)if(o.hash===this.opHash)return this._included=!0,this._includedInBlock.next(i),this._operationResult.next(o.contents),i}),Ku(i=>typeof i<"u"),qi(),ip(1),Lc()),tw(this.opHash)!==_e.VALID)throw new YE(this.opHash);this.confirmed$.pipe(qi(),S1(()=>Wa(void 0))).subscribe()}operationResults(){return J(this,void 0,void 0,function*(){return this._operationResult.pipe(qi()).toPromise()})}receipt(){return J(this,void 0,void 0,function*(){return XM(yield this.operationResults())})}getCurrentConfirmation(){return J(this,void 0,void 0,function*(){return this._included?Tv([this._includedInBlock,Fo(this.context.readProvider.getBlock("head"))]).pipe(xo(([e,r])=>r.header.level-e.header.level+1),qi()).toPromise():0})}isInCurrentBranch(e="head"){return J(this,void 0,void 0,function*(){if(!this._included)return!0;const r=yield this.context.readProvider.getBlockLevel(e),n=yield this._includedInBlock.pipe(qi()).toPromise(),i=r-n.header.level;if(i<=0)return!0;const s=Math.min(n.header.level+i,n.header.level+JM);return new Set(yield this.context.readProvider.getLiveBlocks(s)).has(n.hash)})}confirmationObservable(e){if(typeof e<"u"&&e<1)throw new Q3("Confirmation count must be at least 1");const{defaultConfirmationCount:r}=this.context.config,n=e!==void 0?e:r;if(n===void 0)throw new VM("Default confirmation count can not be undefined!");return Tv([this._includedInBlock,this.newHead$]).pipe(bw(([,i],[,s])=>i.hash===s.hash),xo(([i,s])=>({block:s,expectedConfirmation:n,currentConfirmation:s.header.level-i.header.level+1,completed:s.header.level-i.header.level>=n-1,isInCurrentBranch:()=>this.isInCurrentBranch(s.hash)})),rN(({completed:i})=>!i,!0))}confirmation(e){return this.confirmationObservable(e).toPromise()}}class YM extends Ya{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r,this.getOriginatedContractAddresses=()=>J(this,void 0,void 0,function*(){const s=(yield this.operationResults()).filter(a=>a.kind==="origination");let o=[];for(const a of s)a.metadata.operation_result.originated_contracts&&(o=[...o,...a.metadata.operation_result.originated_contracts]);return o})}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ce.REVEAL)})}status(){return J(this,void 0,void 0,function*(){return this._included?(yield this.operationResults()).filter(r=>Z3.indexOf(r.kind)!==-1).map(r=>Ja(r)?r.metadata.operation_result.status:"unknown")[0]||"unknown":"pending"})}}class QM extends Ya{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ce.REVEAL)})}delegationOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ce.DELEGATION)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.delegationOperation();return e?e.metadata.operation_result.status:"unknown"})}}class ZM extends Ya{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ce.REVEAL)})}increasePaidStorageOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ce.INCREASE_PAID_STORAGE)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.increasePaidStorageOperation();return e?e.metadata.operation_result.status:"unknown"})}}class eC extends Ya{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}originationOperation(){return J(this,void 0,void 0,function*(){const e=yield this.operationResults();return im(e,ce.ORIGINATION)})}revealOperation(){return J(this,void 0,void 0,function*(){const e=yield this.operationResults();return im(e,ce.REVEAL)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.originationOperation();return e?e.metadata.operation_result.status:"unknown"})}contract(){return J(this,void 0,void 0,function*(){const e=yield this.originationOperation(),r=((e==null?void 0:e.metadata.operation_result.originated_contracts)||[])[0];return this.context.wallet.at(r)})}}class tC extends Ya{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ce.REVEAL)})}transactionOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ce.TRANSACTION)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.transactionOperation();return e?e.metadata.operation_result.status:"unknown"})}}function rC(t){return function(r){return new Jl(null).pipe(yw(t,_1(new Error("Confirmation polling timed out"))),Ql(()=>r))}}const nC=(t,e,r)=>t.pipe(rC(e.config.confirmationPollingTimeoutSecond*1e3),ip(1),Lc());class iC{constructor(e){this.context=e,this.sharedHeadObs=gw(()=>G3(this.context.stream.subscribeBlock("head")))}createNewHeadObservable(){return J(this,void 0,void 0,function*(){return nC(this.sharedHeadObs,this.context)})}createPastBlockWalker(e,r=1){return Fo(this.context.readProvider.getBlock(e)).pipe(ci(n=>r===1?Wa(n):x1(n.header.level,r-1).pipe(JP(n),cf(i=>J(this,void 0,void 0,function*(){return this.context.readProvider.getBlock(typeof i=="number"?i:i.header.level)})))))}createHeadObservableFromConfig({blockIdentifier:e}){return J(this,void 0,void 0,function*(){const r=[];return e&&r.push(this.createPastBlockWalker(e)),r.push(yield this.createNewHeadObservable()),Fu(...r)})}createOperation(e,r={}){return J(this,void 0,void 0,function*(){return new Ya(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createBatchOperation(e,r={}){return J(this,void 0,void 0,function*(){return new YM(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createTransactionOperation(e,r={}){return J(this,void 0,void 0,function*(){return new tC(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createDelegationOperation(e,r={}){return J(this,void 0,void 0,function*(){return new QM(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createOriginationOperation(e,r={}){return J(this,void 0,void 0,function*(){return new eC(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createIncreasePaidStorageOperation(e,r={}){return J(this,void 0,void 0,function*(){return new ZM(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}}class sC extends sh{constructor(e){super(e)}getBalance(e){return J(this,void 0,void 0,function*(){if(vt(e)!==_e.VALID)throw new wt(e);return this.context.readProvider.getBalance(e,"head")})}getDelegate(e){return J(this,void 0,void 0,function*(){if(vt(e)!==_e.VALID)throw new wt(e);return this.context.readProvider.getDelegate(e,"head")})}activate(e,r){return J(this,void 0,void 0,function*(){if(b1(e)!==_e.VALID)throw new p1(e);const n={kind:ce.ACTIVATION,pkh:e,secret:r},i=yield this.prepareOperation({operation:[n],source:e}),s=yield this.forge(i),o=`${s.opbytes}00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`;return new Cr(yield this.rpc.injectOperation(o),Object.assign(Object.assign({},s),{opbytes:o}),[],this.context.clone())})}}const Jf=100,oC=1,aC=.1,sm=100;class Pr{constructor(e,r,n,i,s=Jf){this._milligasLimit=e,this._storageLimit=r,this.opSize=n,this.minimalFeePerStorageByteMutez=i,this.baseFeeMutez=s}get burnFeeMutez(){return this.roundUp(Number(this.storageLimit)*Number(this.minimalFeePerStorageByteMutez))}get storageLimit(){const e=Math.max(Number(this._storageLimit),0);return e>0?e:0}get gasLimit(){return this.roundUp(Number(this._milligasLimit)/1e3+sm)}get operationFeeMutez(){return(Number(this._milligasLimit)/1e3+sm)*aC+Number(this.opSize)*oC}roundUp(e){return Math.ceil(Number(e))}get minimalFeeMutez(){return this.roundUp(Jf+this.operationFeeMutez)}get suggestedFeeMutez(){return this.roundUp(this.operationFeeMutez+Jf*2)}get usingBaseFeeMutez(){return Math.max(Number(this.baseFeeMutez),Jf)+this.roundUp(this.operationFeeMutez)}get totalCost(){return this.minimalFeeMutez+this.burnFeeMutez}get consumedMilligas(){return Number(this._milligasLimit)}static createEstimateInstanceFromProperties(e){let r=0,n=0,i=0,s=0,o;return e.forEach(a=>{r+=a.milligasLimit,n+=a.storageLimit,i+=a.opSize,s=Math.max(a.minimalFeePerStorageByteMutez,s),a.baseFeeMutez&&(o=o?o+a.baseFeeMutez:a.baseFeeMutez)}),new Pr(r,n,i,s,o)}static createArrayEstimateInstancesFromProperties(e){return e.map(r=>new Pr(r.milligasLimit,r.storageLimit,r.opSize,r.minimalFeePerStorageByteMutez,r.baseFeeMutez))}}class om extends Error{constructor(){super("Unable to estimate the reveal operation, the public key is unknown"),this.name="Reveal Estimate Error"}}const ur=(t,e)=>({fee:typeof t.fee>"u"?e.fee:t.fee,gasLimit:typeof t.gasLimit>"u"?e.gasLimit:t.gasLimit,storageLimit:typeof t.storageLimit>"u"?e.storageLimit:t.storageLimit}),cC="edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg";class fC extends sh{constructor(){super(...arguments),this.ALLOCATION_STORAGE=257,this.ORIGINATION_STORAGE=257,this.OP_SIZE_REVEAL=128}getKeys(){return J(this,void 0,void 0,function*(){const e=this.context.isAnySignerConfigured();return{publicKeyHash:e?yield this.signer.publicKeyHash():yield this.context.walletProvider.getPKH(),publicKey:e?yield this.signer.publicKey():void 0}})}getAccountLimits(e,r,n){return J(this,void 0,void 0,function*(){const i=yield this.context.readProvider.getBalance(e,"head"),{hard_gas_limit_per_operation:s,hard_gas_limit_per_block:o,hard_storage_limit_per_operation:a,cost_per_byte:c}=r;return{fee:0,gasLimit:n?Math.floor(this.ajustGasForBatchOperation(o,s,n).toNumber()):s.toNumber(),storageLimit:Math.floor(ve.min(i.dividedBy(c),a).toNumber())}})}ajustGasForBatchOperation(e,r,n){return ve.min(r,e.div(n+1))}getEstimationPropertiesFromOperationContent(e,r,n,i){const s=pi({contents:[e]});let o=0,a=0;return s.forEach(c=>{a+="originated_contracts"in c&&typeof c.originated_contracts<"u"?c.originated_contracts.length*this.ORIGINATION_STORAGE:0,a+="allocated_destination_contract"in c?this.ALLOCATION_STORAGE:0,o+=Number(c.consumed_milligas)||0,a+="paid_storage_size_diff"in c&&Number(c.paid_storage_size_diff)||0,a+="storage_size"in c&&"global_address"in c&&Number(c.storage_size)||0,a+="originated_rollup"in c?i:0}),hp(e)?{milligasLimit:o||0,storageLimit:Number(a||0),opSize:r,minimalFeePerStorageByteMutez:n.toNumber()}:{milligasLimit:0,storageLimit:0,opSize:r,minimalFeePerStorageByteMutez:n.toNumber(),baseFeeMutez:0}}prepareEstimate(e,r,n){return J(this,void 0,void 0,function*(){const i=yield this.prepareOperation(e,n),{opbytes:s,opOb:{branch:o,contents:a}}=yield this.forge(i),c={operation:{branch:o,contents:a,signature:cC},chain_id:yield this.context.readProvider.getChainId()},{opResponse:l}=yield this.simulate(c),{cost_per_byte:f,tx_rollup_origination_size:h}=r,S=[...Ca(l,"backtracked"),...Ca(l)];if(S.length)throw new Y3(S,"Error occurred during estimation");let P=1;return Array.isArray(e.operation)&&e.operation.length>1&&(P=l.contents[0].kind==="reveal"?e.operation.length-1:e.operation.length),l.contents.map(M=>this.getEstimationPropertiesFromOperationContent(M,M.kind==="reveal"?this.OP_SIZE_REVEAL/2:s.length/2/P,f,h??0))})}originate(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=kn(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){const{publicKeyHash:o}=yield this.getKeys(),a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Pa(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},s),ur({fee:r,storageLimit:n,gasLimit:i},c)))),f=yield this.isRevealOpNeeded([l],o),h=f?yield this.addRevealOp([l],o):l,S=yield this.prepareEstimate({operation:h,source:o},a,o);return f&&S.shift(),Pr.createEstimateInstanceFromProperties(S)})}transfer(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=kn(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){if(vt(s.to)!==_e.VALID)throw new wt(s.to);if(s.source&&vt(s.source)!==_e.VALID)throw new wt(s.source);const o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Na(Object.assign(Object.assign({},s),ur({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),h=f?yield this.addRevealOp([l],o):l,S=yield this.prepareEstimate({operation:h,source:o},a,o);return f&&S.shift(),Pr.createEstimateInstanceFromProperties(S)})}transferTicket(e){var r,{fee:n,storageLimit:i,gasLimit:s}=e,o=kn(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){if(es(o.destination)!==_e.VALID)throw new Zi(o.destination);if(o.source&&vt(o.source)!==_e.VALID)throw new wt((r=o.source)!==null&&r!==void 0?r:"");const a=(yield this.getKeys()).publicKeyHash,c=yield this.context.readProvider.getProtocolConstants("head"),l=yield this.getAccountLimits(a,c),f=yield Fc(Object.assign(Object.assign({},o),ur({fee:n,storageLimit:i,gasLimit:s},l))),h=yield this.isRevealOpNeeded([f],a),S=h?yield this.addRevealOp([f],a):f,P=yield this.prepareEstimate({operation:S,source:a},c,a);return h&&P.shift(),Pr.createEstimateInstanceFromProperties(P)})}setDelegate(e){var{fee:r,gasLimit:n,storageLimit:i}=e,s=kn(e,["fee","gasLimit","storageLimit"]);return J(this,void 0,void 0,function*(){if(s.source&&vt(s.source)!==_e.VALID)throw new wt(s.source);if(s.delegate&&vt(s.delegate)!==_e.VALID)throw new wt(s.delegate);const o=(yield this.getKeys()).publicKeyHash,a=s.source||o,c=yield this.context.readProvider.getProtocolConstants("head"),l=yield this.getAccountLimits(a,c),f=yield La(Object.assign(Object.assign({},s),ur({fee:r,storageLimit:i,gasLimit:n},l))),h=yield this.isRevealOpNeeded([f],o),S=h?yield this.addRevealOp([f],o):f,P=yield this.prepareEstimate({operation:S,source:o},c,o);return h&&P.shift(),Pr.createEstimateInstanceFromProperties(P)})}batch(e){return J(this,void 0,void 0,function*(){const{publicKeyHash:r}=yield this.getKeys();let n=[];const i=yield this.context.readProvider.getProtocolConstants("head"),s=yield this.getAccountLimits(r,i,e.length);for(const c of e)switch(c.kind){case ce.TRANSACTION:n.push(yield Na(Object.assign(Object.assign({},c),ur(c,s))));break;case ce.ORIGINATION:n.push(yield Pa(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},c),ur(c,s)))));break;case ce.DELEGATION:n.push(yield La(Object.assign(Object.assign({},c),ur(c,s))));break;case ce.ACTIVATION:n.push(Object.assign(Object.assign({},c),s));break;case ce.REGISTER_GLOBAL_CONSTANT:n.push(yield kc(Object.assign(Object.assign({},c),ur(c,s))));break;case ce.TX_ROLLUP_ORIGINATION:n.push(yield Dc(Object.assign(Object.assign({},c),ur(c,s))));break;case ce.TX_ROLLUP_SUBMIT_BATCH:n.push(yield Uc(Object.assign(Object.assign({},c),ur(c,s))));break;case ce.TRANSFER_TICKET:n.push(yield Fc(Object.assign(Object.assign({},c),ur(c,s))));break;case ce.INCREASE_PAID_STORAGE:n.push(yield Ma(Object.assign(Object.assign({},c),ur(c,s))));break;default:throw new us(e.kind)}n=(yield this.isRevealOpNeeded(n,r))?yield this.addRevealOp(n,r):n;const a=yield this.prepareEstimate({operation:n,source:r},i,r);return Pr.createArrayEstimateInstancesFromProperties(a)})}registerDelegate(e){return J(this,void 0,void 0,function*(){const r=(yield this.getKeys()).publicKeyHash,n=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.getAccountLimits(r,n),s=yield z3(Object.assign(Object.assign({},e),i),r),o=yield this.isRevealOpNeeded([s],r),a=o?yield this.addRevealOp([s],r):s,c=yield this.prepareEstimate({operation:a,source:r},n,r);return o&&c.shift(),Pr.createEstimateInstanceFromProperties(c)})}reveal(e){return J(this,void 0,void 0,function*(){const{publicKeyHash:r,publicKey:n}=yield this.getKeys();if(!n)throw new om;if(yield this.isAccountRevealRequired(r)){const i=yield this.context.readProvider.getProtocolConstants("head"),s=yield this.getAccountLimits(r,i),o=yield Js(Object.assign(Object.assign({},e),s),r,n),a=yield this.prepareEstimate({operation:o,source:r},i,r);return Pr.createEstimateInstanceFromProperties(a)}})}registerGlobalConstant(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=kn(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){const o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield kc(Object.assign(Object.assign({},s),ur({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),h=f?yield this.addRevealOp([l],o):l,S=yield this.prepareEstimate({operation:h,source:o},a,o);return f&&S.shift(),Pr.createEstimateInstanceFromProperties(S)})}increasePaidStorage(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=kn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Ma(Object.assign(Object.assign({},s),ur({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),h=f?yield this.addRevealOp([l],o):l,S=yield this.prepareEstimate({operation:h,source:o},a,o);return f&&S.shift(),Pr.createEstimateInstanceFromProperties(S)})}txRollupOriginate(e){return J(this,void 0,void 0,function*(){e=e||{};const{fee:r,storageLimit:n,gasLimit:i}=e,s=kn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Dc(Object.assign(Object.assign({},s),ur({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),h=f?yield this.addRevealOp([l],o):l,S=yield this.prepareEstimate({operation:h,source:o},a,o);return f&&S.shift(),Pr.createEstimateInstanceFromProperties(S)})}txRollupSubmitBatch(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=kn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Uc(Object.assign(Object.assign({},s),ur({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),h=f?yield this.addRevealOp([l],o):l,S=yield this.prepareEstimate({operation:h,source:o},a,o);return f&&S.shift(),Pr.createEstimateInstanceFromProperties(S)})}updateConsensusKey(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=kn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield k1(Object.assign(Object.assign({},s),ur({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),h=f?yield this.addRevealOp([l],o):l,S=yield this.prepareEstimate({operation:h,source:o},a,o);return f&&S.shift(),Pr.createEstimateInstanceFromProperties(S)})}addRevealOp(e,r){return J(this,void 0,void 0,function*(){const{publicKey:n}=yield this.getKeys();if(!n)throw new om;return e.unshift(yield Js(Object.assign({fee:Ws.REVEAL,gasLimit:zs.REVEAL,storageLimit:Xs.REVEAL}),r,yield this.signer.publicKey())),e})}}class am extends Cr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="delegation"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get delegate(){return this.params.delegate}get isRegisterOperation(){return this.delegate===this.source}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return ve.config({DECIMAL_PLACES:0,ROUNDING_MODE:ve.ROUND_UP}),this.consumedMilliGas?new ve(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class uC extends Cr{constructor(e,r,n,i,s,o){super(e,n,i,s),this.params=r,this.contractProvider=o;const a=this.operationResults&&this.operationResults.originated_contracts;Array.isArray(a)&&(this.contractAddress=a[0])}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="origination"),r=e&&Ja(e)&&e.metadata.operation_result;return r||void 0}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return ve.config({DECIMAL_PLACES:0,ROUNDING_MODE:ve.ROUND_UP}),this.consumedMilliGas?new ve(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get storageDiff(){const e=this.operationResults&&this.operationResults.paid_storage_size_diff;return e||void 0}get storageSize(){const e=this.operationResults&&this.operationResults.storage_size;return e||void 0}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}contract(e,r){return J(this,void 0,void 0,function*(){if(!this.contractAddress)throw new qM("No contract was originated in this operation");return yield this.confirmation(e,r),this.contractProvider.at(this.contractAddress)})}}class lC extends Cr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n,this.globalConstantHash=this.operationResults&&this.operationResults.global_address}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="register_global_constant"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get registeredExpression(){return this.params.value}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return ve.config({DECIMAL_PLACES:0,ROUNDING_MODE:ve.ROUND_UP}),this.consumedMilliGas?new ve(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class hC extends Cr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(r=>r.kind==="reveal");return e?[e]:[]}get status(){const r=this.operationResults[0];return r?r.metadata.operation_result.status:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get publicKey(){return this.params.public_key}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}get consumedGas(){return ve.config({DECIMAL_PLACES:0,ROUNDING_MODE:ve.ROUND_UP}),new ve(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(pi({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(pi({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(pi({contents:this.operationResults}),"storage_size"))}get errors(){return Ca({contents:this.operationResults})}}class dC extends Cr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(r=>r.kind==="transaction");return e?[e]:[]}get status(){const r=this.operationResults[0];return r?r.metadata.operation_result.status:"unknown"}get amount(){return new ve(this.params.amount)}get destination(){return this.params.destination}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}get consumedGas(){return ve.config({DECIMAL_PLACES:0,ROUNDING_MODE:ve.ROUND_UP}),new ve(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(pi({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(pi({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(pi({contents:this.operationResults}),"storage_size"))}get errors(){return Ca({contents:this.operationResults})}}class pC{constructor(e,r,n,i,s,o=!0,a=!1){this.provider=e,this.address=r,this.parameterSchema=n,this.name=i,this.args=s,this.isMultipleEntrypoint=o,this.isAnonymous=a}validateArgs(e,r,n){const i=r.ExtractSignatures();if(!i.find(s=>s.length===e.length))throw new q3(n,i,e)}get schema(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()}getSignature(){if(this.isAnonymous){const e=this.parameterSchema.ExtractSignatures().find(r=>r[0]===this.name);if(e)return e.shift(),e}else{const e=this.parameterSchema.ExtractSignatures();return e.length==1?e[0]:e}}send(e={}){return this.provider instanceof oh?this.provider.transfer(this.toTransferParams(e)).send():this.provider.transfer(this.toTransferParams(e))}toTransferParams({fee:e,gasLimit:r,storageLimit:n,source:i,amount:s=0,mutez:o=!1}={}){return{to:this.address,amount:s,fee:e,mutez:o,source:i,gasLimit:r,storageLimit:n,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:sa,value:this.isAnonymous?this.parameterSchema.Encode(this.name,...this.args):this.parameterSchema.Encode(...this.args)}}}}class gC{constructor(e,r){this.id=e,this.provider=r}getSaplingDiff(e){return J(this,void 0,void 0,function*(){return this.provider.getSaplingDiffByID(this.id.toString(),e)})}getId(){return this.id.toString()}}class bC{constructor(e,r){this.walletProvider=e,this.context=r,this.operations=[]}withTransfer(e){if(vt(e.to)!==_e.VALID)throw new wt(e.to);return this.operations.push(Object.assign({kind:ce.TRANSACTION},e)),this}withContractCall(e,r={}){return this.withTransfer(e.toTransferParams(r))}withDelegation(e){if(e.delegate&&vt(e.delegate)!==_e.VALID)throw new wt(e.delegate);return this.operations.push(Object.assign({kind:ce.DELEGATION},e)),this}withOrigination(e){return this.operations.push(Object.assign({kind:ce.ORIGINATION},e)),this}withIncreasePaidStorage(e){if(vt(e.destination)!==_e.VALID)throw new wt(e.destination);return this.operations.push(Object.assign({kind:ce.INCREASE_PAID_STORAGE},e)),this}mapOperation(e){return J(this,void 0,void 0,function*(){switch(e.kind){case ce.TRANSACTION:return this.walletProvider.mapTransferParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e}));case ce.ORIGINATION:return this.walletProvider.mapOriginateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return this.context.parser.prepareCodeOrigination(Object.assign({},e))}));case ce.DELEGATION:return this.walletProvider.mapDelegateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e}));case ce.INCREASE_PAID_STORAGE:return this.walletProvider.mapIncreasePaidStorageWalletParams(()=>J(this,void 0,void 0,function*(){return e}));default:throw new us(e.kind)}})}with(e){for(const r of e)switch(r.kind){case ce.TRANSACTION:this.withTransfer(r);break;case ce.ORIGINATION:this.withOrigination(r);break;case ce.DELEGATION:this.withDelegation(r);break;case ce.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(r);break;default:throw new us(r.kind)}return this}send(){return J(this,void 0,void 0,function*(){const e=[];for(const n of this.operations)e.push(yield this.mapOperation(n));const r=yield this.walletProvider.sendOperations(e);return this.context.operationFactory.createBatchOperation(r)})}}class oh{constructor(e){this.context=e,this.walletCommand=r=>({send:r})}get walletProvider(){return this.context.walletProvider}pkh({forceRefetch:e}={}){return J(this,void 0,void 0,function*(){return(!this._pkh||e)&&(this._pkh=yield this.walletProvider.getPKH()),this._pkh})}originate(e){return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapOriginateParamsToWalletParams(()=>this.context.parser.prepareCodeOrigination(Object.assign({},e))),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createOriginationOperation(n)}))}setDelegate(e){if(e.delegate&&vt(e.delegate)!==_e.VALID)throw new wt(e.delegate);return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createDelegationOperation(n)}))}registerDelegate(){return this.walletCommand(()=>J(this,void 0,void 0,function*(){const e=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return{delegate:yield this.pkh()}})),r=yield this.walletProvider.sendOperations([e]);return this.context.operationFactory.createDelegationOperation(r)}))}transfer(e){if(vt(e.to)!==_e.VALID)throw new wt(e.to);return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapTransferParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createTransactionOperation(n)}))}increasePaidStorage(e){if(vt(e.destination)!==_e.VALID)throw new wt(e.destination);return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapIncreasePaidStorageWalletParams(()=>J(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createIncreasePaidStorageOperation(n)}))}batch(e){const r=new bC(this.walletProvider,this.context);return Array.isArray(e)&&r.with(e),r}at(e,r=n=>n){return J(this,void 0,void 0,function*(){if(es(e)!==_e.VALID)throw new Zi(e);const n=this.context.withExtensions().rpc,i=this.context.withExtensions().readProvider,s=yield i.getScript(e,"head"),o=yield i.getEntrypoints(e),a=new t6(e,s,this,this.context.contract,o,n,i);return r(a,this.context)})}}class e6{constructor(e){this.context=e}getPKH(){return J(this,void 0,void 0,function*(){return this.context.signer.publicKeyHash()})}mapTransferParamsToWalletParams(e){return J(this,void 0,void 0,function*(){return Xf(yield e(),ce.TRANSACTION)})}mapOriginateParamsToWalletParams(e){return J(this,void 0,void 0,function*(){return Xf(yield e(),ce.ORIGINATION)})}mapDelegateParamsToWalletParams(e){return J(this,void 0,void 0,function*(){return Xf(yield e(),ce.DELEGATION)})}mapIncreasePaidStorageWalletParams(e){return J(this,void 0,void 0,function*(){return Xf(yield e(),ce.INCREASE_PAID_STORAGE)})}sendOperations(e){return J(this,void 0,void 0,function*(){return(yield this.context.batch.batch(e).send()).hash})}}class vC{constructor(e,r,n,i,s="unit",o=!0,a=!1){this.provider=e,this.address=r,this.parameterSchema=n,this.name=i,this.args=s,this.isMultipleEntrypoint=o,this.isAnonymous=a}getSignature(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()}send(e={}){return this.provider instanceof oh?this.provider.transfer(this.toTransferParams(e)).send():this.provider.transfer(this.toTransferParams(e))}toTransferParams({fee:e,gasLimit:r,storageLimit:n,source:i,amount:s=0,mutez:o=!1}={}){return{to:this.address,amount:s,fee:e,mutez:o,source:i,gasLimit:r,storageLimit:n,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:sa,value:this.isAnonymous?this.parameterSchema.EncodeObject({[this.name]:this.args}):this.parameterSchema.EncodeObject(this.args)}}}}class mC{constructor(e,r,n,i,s,o="Unit"){this._rpc=e,this._readProvider=r,this._contractAddress=n,this._smartContractViewSchema=i,this._contractStorageType=s,this._args=o}getSignature(){return{parameter:this._smartContractViewSchema.extractArgsSchema(),result:this._smartContractViewSchema.extractResultSchema()}}executeView(e){return J(this,void 0,void 0,function*(){this.verifyContextExecution(e);const r=yield this._readProvider.getChainId(),n=this.transformArgsToMichelson(),i={contract:this._contractAddress,view:this._smartContractViewSchema.viewName,input:n,chain_id:r,source:e.viewCaller};return e.source&&(i.payer=e.source),this.executeViewAndDecodeResult(i)})}verifyContextExecution(e){if(e.source&&vt(e.source)!==_e.VALID)throw new nm(`The source account who initialized the view execution is invalid: ${e.source}.`);if(!e.viewCaller||vt(e.viewCaller)!==_e.VALID)throw new nm(`The contract which is the caller of view is invalid: ${e.viewCaller}.`)}transformArgsToMichelson(){try{return this._smartContractViewSchema.encodeViewArgs(this._args)}catch(e){throw new CM(this._smartContractViewSchema.viewName,this.getSignature(),this._args,e)}}adaptViewCodeToContext(e,r,n){const i={BALANCE:[{prim:"PUSH",args:[{prim:"mutez"},{int:n}]}],SENDER:[{prim:"PUSH",args:[{prim:"address"},{string:r}]}],SELF_ADDRESS:[{prim:"PUSH",args:[{prim:"address"},{string:this._contractAddress}]}],AMOUNT:[{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]}]};return e.forEach((s,o)=>{s.prim in i&&(e[o]=Object(i)[s.prim]),s.args&&s.args.length!==0?this.adaptViewCodeToContext(s.args,r,n):Array.isArray(s)&&this.adaptViewCodeToContext(s,r,n)}),e}executeViewAndDecodeResult(e){return J(this,void 0,void 0,function*(){let r;try{r=(yield this._rpc.runScriptView(e)).data}catch(n){const i=kM(n);throw i?new BM(`The simulation of the on-chain view named ${this._smartContractViewSchema.viewName} failed with: ${JSON.stringify(i)}`,this._smartContractViewSchema.viewName,i,n):n}return this._smartContractViewSchema.decodeViewResult(r)})}}class yC{constructor(e,r){this.provider=e,this.contractAddress=r}createContractMethodFlatParams(e,r,n,i=!0,s=!1){return new pC(this.provider,this.contractAddress,e,r,n,i,s)}createContractMethodObjectParam(e,r,n,i=!0,s=!1){return new vC(this.provider,this.contractAddress,e,r,n,i,s)}createContractViewObjectParam(e,r,n,i,s){return new mC(e,r,this.contractAddress,n,i,s)}}const sa="default";class EC{constructor(e,r,n,i,s,o,a){this.currentContract=e,this.name=r,this.callbackParametersSchema=n,this.parameterSchema=i,this.args=s,this.rpc=o,this.readProvider=a}read(e){return J(this,void 0,void 0,function*(){if(es(e??"")==_e.VALID)throw new g1("Since version 12, the lambda view no longer depends on a lambda contract. The read method no longer accepts a contract address as a parameter.");if(e&&ew(e)!==_e.VALID)throw new pI(e);const r=this.parameterSchema.Encode(...this.args),n=yield this.rpc.runView({contract:this.currentContract.address,entrypoint:this.name,input:r,chain_id:e||(yield this.readProvider.getChainId())});return this.callbackParametersSchema.Execute(n.data)})}}const wC=(t,e,r)=>{const n=e.ExtractSignatures();if(!n.find(i=>i.length===t.length))throw new q3(r,n,t)},_C=t=>{let e=!1;if("prim"in t&&t.prim==="pair"&&t.args){const r=t.args[t.args.length-1];"prim"in r&&r.prim==="contract"&&(e=!0)}return e};class t6{constructor(e,r,n,i,s,o,a){this.address=e,this.script=r,this.storageProvider=i,this.entrypoints=s,this.rpc=o,this.readProvider=a,this.methods={},this.methodsObject={},this.views={},this.contractViews={},this.contractMethodFactory=new yC(n,e),this.schema=Qr.fromRPCResponse({script:this.script}),this.parameterSchema=na.fromRPCResponse({script:this.script}),this.viewSchema=R1.fromRPCResponse({script:this.script}),this.viewSchema.length!==0&&this._initializeOnChainViews(this,o,this.readProvider,this.viewSchema),this._initializeMethods(this,this.entrypoints.entrypoints,this.rpc,this.readProvider)}_initializeMethods(e,r,n,i){const s=this.parameterSchema,o=Object.keys(r);if(s.isMultipleEntryPoint)o.forEach(c=>{const l=new na(r[c]);if(this.methods[c]=function(...f){return e.contractMethodFactory.createContractMethodFlatParams(l,c,f)},this.methodsObject[c]=function(f){return e.contractMethodFactory.createContractMethodObjectParam(l,c,f)},_C(r[c])){const f=function(...h){const S=r[c].args[0],P=new na(S),M=r[c].args[1].args[0],H=new na(M);return wC(h,P,c),new EC(e,c,H,P,h,n,i)};this.views[c]=f}}),Object.keys(s.ExtractSchema()).filter(c=>Object.keys(r).indexOf(c)===-1).forEach(c=>{this.methods[c]=function(...l){return e.contractMethodFactory.createContractMethodFlatParams(s,c,l,!1,!0)},this.methodsObject[c]=function(l){return e.contractMethodFactory.createContractMethodObjectParam(s,c,l,!1,!0)}});else{const a=this.parameterSchema;this.methods[sa]=function(...c){return e.contractMethodFactory.createContractMethodFlatParams(a,sa,c,!1)},this.methodsObject[sa]=function(c){return e.contractMethodFactory.createContractMethodObjectParam(a,sa,c,!1)}}}_initializeOnChainViews(e,r,n,i){const s=this.schema.val;i.forEach(o=>{this.contractViews[o.viewName]=function(a){return e.contractMethodFactory.createContractViewObjectParam(r,n,o,s,a)}})}storage(){return this.storageProvider.getStorage(this.address,this.schema)}bigMap(e){return this.storageProvider.getBigMapKey(this.address,e,this.schema)}}class AC{constructor(e,r,n){this.id=e,this.schema=r,this.provider=n}get(e,r){return J(this,void 0,void 0,function*(){try{return yield this.provider.getBigMapKeyByID(this.id.toString(),e,this.schema,r)}catch(n){if(n instanceof Ha&&n.status===Nc.NOT_FOUND)return;throw n}})}getMultipleValues(e,r,n=5){return J(this,void 0,void 0,function*(){return this.provider.getBigMapKeysByID(this.id.toString(),e,this.schema,r,n)})}toJSON(){return this.id.toString()}toString(){return this.id.toString()}}const cm=t=>({big_map:(e,r)=>{if(!e||!("int"in e)||e.int===void 0)return{};{const n=new Qr(r);return new AC(new ve(e.int),n,t)}},sapling_state:e=>!e||!("int"in e)||e.int===void 0?{}:new gC(new ve(e.int),t)});class xC extends Cr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n,this.originatedRollup=this.operationResults&&this.operationResults.originated_rollup}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="tx_rollup_origination"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return ve.config({DECIMAL_PLACES:0,ROUNDING_MODE:ve.ROUND_UP}),this.consumedMilliGas?new ve(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class SC extends Cr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="tx_rollup_submit_batch"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get content(){return this.params.content}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return ve.config({DECIMAL_PLACES:0,ROUNDING_MODE:ve.ROUND_UP}),this.consumedMilliGas?new ve(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class RC extends Cr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const r=Array.isArray(this.results)&&this.results.find(n=>n.kind==="ballot");return r||void 0}get period(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.period}get proposal(){return this.params.proposal}get ballot(){return this.params.ballot}}class TC extends Cr{constructor(e,r,n,i,s){super(e,n,i,s),this.params=r}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="drain_delegate"),r=e&&e.metadata&&e.metadata.balance_updates;return r||void 0}get consensusKey(){return this.params.consensus_key}get delegate(){return this.params.delegate}get destination(){return this.params.destination}}class OC extends Cr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind===ce.TRANSFER_TICKET),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return ve.config({DECIMAL_PLACES:0,ROUNDING_MODE:ve.ROUND_UP}),this.consumedMilliGas?new ve(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class IC extends Cr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="increase_paid_storage"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get amount(){return this.params.amount}get destination(){return this.params.destination}}class PC extends Cr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const r=Array.isArray(this.results)&&this.results.find(n=>n.kind==="proposals");return r||void 0}get proposals(){return this.params.proposals}get period(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.period}}class NC extends Cr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="update_consensus_key"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get pk(){return this.params.pk}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class LC extends sh{constructor(e,r){super(e),this.estimator=r,this.contractProviderTypeSymbol=Symbol.for("taquito-contract-provider-type-symbol")}getStorage(e,r){return J(this,void 0,void 0,function*(){if(es(e)!==_e.VALID)throw new Zi(e);const n=yield this.context.readProvider.getScript(e,"head");r||(r=n);let i;return Qr.isSchema(r)?i=r:i=Qr.fromRPCResponse({script:r}),i.Execute(n.storage,cm(this))})}getBigMapKey(e,r,n){return J(this,void 0,void 0,function*(){if(es(e)!==_e.VALID)throw new Zi(e);n||(n=(yield this.rpc.getContract(e)).script);let i;Qr.isSchema(n)?i=n:i=Qr.fromRPCResponse({script:n});const s=i.EncodeBigMapKey(r),o=yield this.rpc.getBigMapKey(e,s);return i.ExecuteOnBigMapValue(o)})}getBigMapKeyByID(e,r,n,i){return J(this,void 0,void 0,function*(){const{key:s,type:o}=n.EncodeBigMapKey(r),{packed:a}=yield this.context.packer.packData({data:s,type:o}),c=RI(a),l=i?yield this.context.readProvider.getBigMapValue({id:e.toString(),expr:c},i):yield this.context.readProvider.getBigMapValue({id:e.toString(),expr:c},"head");return n.ExecuteOnBigMapValue(l,cm(this))})}getBigMapKeysByID(e,r,n,i,s=5){return J(this,void 0,void 0,function*(){const o=yield this.getBlockForRequest(r,i),a=new Yr;let c=0,l=[];for(;c<r.length;){const h=r.slice(c,c+s).map(S=>this.getBigMapValueOrUndefined(S,e,n,o));l=[...l,...yield Promise.all(h)],c+=s}for(let f=0;f<l.length;f++)a.set(r[f],l[f]);return a})}getBlockForRequest(e,r){return J(this,void 0,void 0,function*(){return e.length===1||typeof r<"u"?r:yield this.context.readProvider.getBlockLevel("head")})}getBigMapValueOrUndefined(e,r,n,i){return J(this,void 0,void 0,function*(){try{return yield this.getBigMapKeyByID(r,e,n,i)}catch(s){if(s instanceof Ha&&s.status===Nc.NOT_FOUND)return;throw s}})}getSaplingDiffByID(e,r){return J(this,void 0,void 0,function*(){return r?yield this.context.readProvider.getSaplingDiffById({id:e.toString()},r):yield this.context.readProvider.getSaplingDiffById({id:e.toString()},"head")})}addRevealOperationIfNeeded(e,r){return J(this,void 0,void 0,function*(){if(Qu(e)){const n=[e],i=yield this.signer.publicKey(),s=yield this.estimator.reveal();if(s){const o={kind:ce.REVEAL},a=yield this.estimate(o,()=>J(this,void 0,void 0,function*(){return s}));return n.unshift(yield Js(Object.assign({},a),r,i)),n}}return e})}originate(e){return J(this,void 0,void 0,function*(){const r=yield this.estimate(e,this.estimator.originate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield Pa(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},e),r))),s=yield this.addRevealOperationIfNeeded(i,n),o=yield this.prepareOperation({operation:s,source:n}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:h}=yield this.signAndInject(a);return new uC(c,i,f,h,l,this)})}setDelegate(e){return J(this,void 0,void 0,function*(){if(e.source&&vt(e.source)!==_e.VALID)throw new wt(e.source);if(e.delegate&&vt(e.delegate)!==_e.VALID)throw new wt(e.delegate);if(/kt1/i.test(e.source))throw new MM(e.source);const r=yield this.estimate(e,this.estimator.setDelegate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield La(Object.assign(Object.assign({},e),r)),s=e.source||n,o=yield this.addRevealOperationIfNeeded(i,n),a=yield this.prepareOperation({operation:o,source:s}),c=yield this.forge(a),{hash:l,context:f,forgedBytes:h,opResponse:S}=yield this.signAndInject(c);return new am(l,i,s,h,S,f)})}registerDelegate(e){return J(this,void 0,void 0,function*(){const r=yield this.estimate(e,this.estimator.registerDelegate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield z3(Object.assign(Object.assign({},e),r),n),s=yield this.addRevealOperationIfNeeded(i,n),o=yield this.prepareOperation({operation:s}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:h}=yield this.signAndInject(a);return new am(c,i,n,f,h,l)})}transfer(e){return J(this,void 0,void 0,function*(){if(vt(e.to)!==_e.VALID)throw new wt(e.to);if(e.source&&vt(e.source)!==_e.VALID)throw new wt(e.source);const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.transfer.bind(this.estimator)),i=yield Na(Object.assign(Object.assign({},e),n)),s=e.source||r,o=yield this.addRevealOperationIfNeeded(i,r),a=yield this.prepareOperation({operation:o,source:e.source}),c=yield this.forge(a),{hash:l,context:f,forgedBytes:h,opResponse:S}=yield this.signAndInject(c);return new dC(l,i,s,h,S,f)})}transferTicket(e){var r;return J(this,void 0,void 0,function*(){if(es(e.destination)!==_e.VALID)throw new Zi(e.destination);if(e.source&&vt(e.source)!==_e.VALID)throw new wt(e.source);const n=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.transferTicket.bind(this.estimator)),s=yield Fc(Object.assign(Object.assign({},e),i)),o=(r=e.source)!==null&&r!==void 0?r:n,a=yield this.addRevealOperationIfNeeded(s,n),c=yield this.prepareOperation({operation:a,source:e.source}),l=yield this.forge(c),{hash:f,context:h,forgedBytes:S,opResponse:P}=yield this.signAndInject(l);return new OC(f,s,o,S,P,h)})}reveal(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimator.reveal(e);if(n){const i=yield this.estimate(e,()=>J(this,void 0,void 0,function*(){return n})),s=yield Js(Object.assign({},i),r,yield this.signer.publicKey()),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:h}=yield this.signAndInject(a);return new hC(c,s,r,f,h,l)}else throw new $3(`The publicKeyHash '${r}' has already been revealed.`)})}registerGlobalConstant(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.registerGlobalConstant.bind(this.estimator)),i=yield kc(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:h}=yield this.signAndInject(a);return new lC(c,i,r,f,h,l)})}increasePaidStorage(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.increasePaidStorage.bind(this.estimator)),i=yield Ma(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:h}=yield this.signAndInject(a);return new IC(c,i,r,f,h,l)})}drainDelegate(e){return J(this,void 0,void 0,function*(){const r=yield W3(Object.assign({},e)),n=yield this.prepareOperation({operation:r}),i=yield this.forge(n),{hash:s,context:o,forgedBytes:a,opResponse:c}=yield this.signAndInject(i);return new TC(s,r,a,c,o)})}txRollupOriginate(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e||{},this.estimator.txRollupOriginate.bind(this.estimator)),i=yield Dc(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:h}=yield this.signAndInject(a);return new xC(c,i,r,f,h,l)})}txRollupSubmitBatch(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.txRollupSubmitBatch.bind(this.estimator)),i=yield Uc(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:h}=yield this.signAndInject(a);return new SC(c,i,r,f,h,l)})}ballot(e){var r;return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash();if(e.source&&vt(e.source)!==_e.VALID)throw new wt(e.source);const i=(r=e.source)!==null&&r!==void 0?r:n,s=yield X3(Object.assign(Object.assign({},e),{source:i})),o=yield this.prepareOperation({operation:s,source:i}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:h}=yield this.signAndInject(a);return new RC(c,s,n,f,h,l)})}proposals(e){var r;return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash();if(e.source&&vt(e.source)!==_e.VALID)throw new wt(e.source);const i=(r=e.source)!==null&&r!==void 0?r:n,s=yield J3(Object.assign(Object.assign({},e),{source:i})),o=yield this.prepareOperation({operation:s,source:i}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:h}=yield this.signAndInject(a);return new PC(c,s,n,f,h,l)})}updateConsensusKey(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.updateConsensusKey.bind(this.estimator)),i=yield k1(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:e.source}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:h}=yield this.signAndInject(a);return new NC(c,i,r,f,h,l)})}at(e,r=n=>n){return J(this,void 0,void 0,function*(){if(es(e)!==_e.VALID)throw new Zi(e);const n=this.context.withExtensions().rpc,i=this.context.withExtensions().readProvider,s=yield i.getScript(e,"head"),o=yield i.getEntrypoints(e),a=new t6(e,s,this,this,o,n,i);return r(a,this.context)})}batch(e){const r=new U1(this.context,this.estimator);return Array.isArray(e)&&r.with(e),r}}class r6{constructor(e){this.context=e}getNextProto(){return J(this,void 0,void 0,function*(){if(!this.context.proto){const e=yield this.context.readProvider.getNextProtocol("head");this.context.proto=e}return this.context.proto})}parseScript(e){return J(this,void 0,void 0,function*(){return new mo({protocol:yield this.getNextProto()}).parseScript(e)})}parseMichelineExpression(e){return J(this,void 0,void 0,function*(){return new mo({protocol:yield this.getNextProto()}).parseMichelineExpression(e)})}parseJSON(e){return J(this,void 0,void 0,function*(){return new mo({protocol:yield this.getNextProto()}).parseJSON(e)})}prepareCodeOrigination(e){return J(this,void 0,void 0,function*(){const r=e;if(r.code=yield this.formatCodeParam(e.code),e.init)r.init=yield this.formatInitParam(e.init);else if(e.storage){const n=r.code.find(o=>"prim"in o&&o.prim==="storage");if(!(n!=null&&n.args))throw new Yu("The storage section is missing from the script",e.code);const i=new Qr(n.args[0]),s=yield this.findGlobalConstantsHashAndValue(i);if(Object.keys(s).length!==0){const a=new mo({expandGlobalConstant:s}).parseJSON(n.args[0]),c=new Qr(a);r.init=c.Encode(e.storage)}else r.init=i.Encode(e.storage);delete r.storage}return r})}formatCodeParam(e){return J(this,void 0,void 0,function*(){let r;if(typeof e=="string"){const n=yield this.parseScript(e);if(n===null)throw new Yu("Invalid code parameter",e);r=n}else{const n=yield this.parseJSON(e),i=["parameter","storage","code"];r=n.sort((s,o)=>i.indexOf(s.prim)-i.indexOf(o.prim))}return r})}formatInitParam(e){return J(this,void 0,void 0,function*(){let r;if(typeof e=="string"){const n=yield this.parseMichelineExpression(e);if(n===null)throw new V3("Invalid init parameter",e);r=n}else r=yield this.parseJSON(e);return r})}findGlobalConstantsHashAndValue(e){return J(this,void 0,void 0,function*(){const r=e.findToken("constant"),n={};if(r.length!==0)for(const i of r){const s=i.tokenVal.args;if(s){const o=s[0];if(o.string){const a=o.string,c=yield this.context.globalConstantsProvider.getGlobalConstantByHash(a);Object.assign(n,{[a]:c})}}}return n})}}class n6{constructor(e){this.context=e}packData(e){return J(this,void 0,void 0,function*(){return this.context.rpc.packData(e)})}}class MC extends Error{constructor(){super("No globalThis constants provider has been configured. Please configure one by calling setGlobalConstantsProvider({globalConstantsProvider}) on your TezosToolkit instance."),this.name="UnconfiguredGlobalConstantsProviderError"}}class i6{getGlobalConstantByHash(e){return J(this,void 0,void 0,function*(){throw new MC})}}class s6{constructor(e){this.rpc=e}getBalance(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getBalance(e,{block:String(r)})})}getDelegate(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getDelegate(e,{block:String(r)})})}getNextProtocol(e){return J(this,void 0,void 0,function*(){return(yield this.rpc.getProtocols({block:String(e)})).next_protocol})}getProtocolConstants(e){return J(this,void 0,void 0,function*(){const{time_between_blocks:r,minimal_block_delay:n,hard_gas_limit_per_operation:i,hard_gas_limit_per_block:s,hard_storage_limit_per_operation:o,cost_per_byte:a,tx_rollup_origination_size:c}=yield this.rpc.getConstants({block:String(e)});return{time_between_blocks:r,minimal_block_delay:n,hard_gas_limit_per_operation:i,hard_gas_limit_per_block:s,hard_storage_limit_per_operation:o,cost_per_byte:a,tx_rollup_origination_size:c}})}getScript(e,r){return J(this,void 0,void 0,function*(){const{script:n}=yield this.rpc.getContract(e,{block:String(r)});return n})}getStorage(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getStorage(e,{block:String(r)})})}getBlockHash(e){return J(this,void 0,void 0,function*(){const{hash:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getBlockLevel(e){return J(this,void 0,void 0,function*(){const{level:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getCounter(e,r){return J(this,void 0,void 0,function*(){const{counter:n}=yield this.rpc.getContract(e,{block:String(r)});return n||"0"})}getBlockTimestamp(e){return J(this,void 0,void 0,function*(){const{timestamp:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getBigMapValue(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getBigMapExpr(e.id,e.expr,{block:String(r)})})}getSaplingDiffById(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getSaplingDiffById(e.id,{block:String(r)})})}getSaplingDiffByContract(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getSaplingDiffByContract(e,{block:String(r)})})}getEntrypoints(e){return J(this,void 0,void 0,function*(){return this.rpc.getEntrypoints(e)})}getChainId(){return J(this,void 0,void 0,function*(){return this.rpc.getChainId()})}isAccountRevealed(e,r){return J(this,void 0,void 0,function*(){const n=yield this.rpc.getManagerKey(e,{block:String(r)});return n&&typeof n=="object"?!!n.key:!!n})}getBlock(e){return J(this,void 0,void 0,function*(){return this.rpc.getBlock({block:String(e)})})}getLiveBlocks(e){return this.rpc.getLiveBlocks({block:String(e)})}}const CC=(t,e)=>t.hash===e.opHash,BC=(t,e)=>{switch(t.kind){case"endorsement":return"metadata"in t&&t.metadata.delegate===e.source;case"activate_account":return"metadata"in t&&t.pkh===e.source;default:return"source"in t&&t.source===e.source}},kC=(t,e)=>"kind"in t&&t.kind===e.kind,DC=(t,e)=>{switch(t.kind){case"delegation":return t.delegate===e.destination;case"origination":if("metadata"in t&&"operation_result"in t.metadata&&"originated_contracts"in t.metadata.operation_result&&Array.isArray(t.metadata.operation_result.originated_contracts))return t.metadata.operation_result.originated_contracts.some(r=>r===e.destination);break;case"transaction":return t.destination===e.destination;default:return!1}},UC=(t,e,r)=>t.kind==="event"?e&&r?t.source===e&&t.tag===r:e&&!r?t.source===e:r?t.tag===r:!0:!1,FC=(t,e)=>"opHash"in e?CC(t,e):"source"in e?BC(t,e):"kind"in e?kC(t,e):"destination"in e?DC(t,e):!1,KC=(t,e)=>{if(Array.isArray(e.and))return e.and.every(r=>dp(t,r));if(Array.isArray(e.or))return e.or.some(r=>dp(t,r));throw new $M("Filter expression must contain either and/or property")},dp=(t,e)=>{const r=[];return Array.isArray(e)?r.push(...e):r.push(e),r.every(n=>"and"in n||"or"in n?KC(t,n):FC(t,n))};class fm extends Error{constructor(e){super(e),this.message=e,this.name="UnsupportedEventError"}}class Yf{constructor(e,r=!1,n=mw()){this.shouldRetry=r,this.operatorFunction=n,this.errorListeners=[],this.messageListeners=[],this.closeListeners=[],this.completed$=new xa,e.pipe(ZP(this.completed$),Hu(i=>{this.call(this.messageListeners,i)},i=>{this.call(this.errorListeners,i)},()=>{this.call(this.closeListeners)}),this.shouldRetry?n:Hu(),S1(()=>AP)).subscribe()}call(e,r){for(const n of e)try{n(r)}catch(i){console.error(i)}}remove(e,r){const n=e.indexOf(r);n!==-1&&e.splice(n,1)}on(e,r){switch(e){case"data":this.messageListeners.push(r);break;case"error":this.errorListeners.push(r);break;case"close":this.closeListeners.push(r);break;default:throw new fm(`Trying to register on an unsupported event: ${e}`)}}off(e,r){switch(e){case"data":this.remove(this.messageListeners,r);break;case"error":this.remove(this.errorListeners,r);break;case"close":this.remove(this.closeListeners,r);break;default:throw new fm(`Trying to unregister on an unsupported event: ${e}`)}}close(){this.completed$.next()}}const HC={shouldObservableSubscriptionRetry:!1,observableSubscriptionRetryFunction:mw()},jC=t=>Fo(t.rpc.getBlock()).pipe(qi()),GC=t=>cf(e=>new Mt(r=>{for(const n of e.operations)for(const i of n)for(const s of i.contents)dp(Object.assign({hash:i.hash},s),t)&&r.next(Object.assign({hash:i.hash},s));r.complete()})),qC=t=>cf(e=>new Mt(r=>{for(const n of e.operations)for(const i of n)for(const s of i.contents){const a=s.metadata.internal_operation_results;if(a)for(const c of a)UC(c,t==null?void 0:t.address,t==null?void 0:t.tag)&&r.next(Object.assign({opHash:i.hash,blockHash:e.hash,level:e.header.level},c))}r.complete()}));class pp{constructor(e,r={}){this.context=e,this._config$=new Jl(Object.assign(Object.assign({},HC),r)),this.timer$=this._config$.pipe(Pv("pollingIntervalMilliseconds"),ci(n=>n?Iv(0,n):Fo(this.getConfirmationPollingInterval()).pipe(ci(i=>Iv(0,i))))),this.newBlock$=this.timer$.pipe(ci(()=>jC(this.context)),kP("hash"),$P(),Lc())}get config(){return this._config$.getValue()}getConfirmationPollingInterval(){return J(this,void 0,void 0,function*(){if(!this.config.pollingIntervalMilliseconds)try{const n=yield this.context.readProvider.getProtocolConstants("head"),s=(n.minimal_block_delay?n.minimal_block_delay.multipliedBy(1e3):n.time_between_blocks?n.time_between_blocks[0].multipliedBy(1e3):new ve(5e3)).dividedBy(3);this.config.pollingIntervalMilliseconds=s.toNumber()===0?1e3:s.toNumber()}catch{return 5e3}return this.config.pollingIntervalMilliseconds})}subscribeBlock(e){return new Yf(this.newBlock$,this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribe(e){return new Yf(this.newBlock$.pipe(Pv("hash")),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeOperation(e){return new Yf(this.newBlock$.pipe(GC(e)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeEvent(e){return new Yf(this.newBlock$.pipe(qC(e)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}}class o6{constructor(e){this.context=e}getNextProto(){return J(this,void 0,void 0,function*(){if(!this.context.proto){const e=yield this.context.readProvider.getNextProtocol("head");this.context.proto=e}return this.context.proto})}forge({branch:e,contents:r}){return J(this,void 0,void 0,function*(){return new j3(yield this.getNextProto()).forge({branch:e,contents:r})})}}var fo;class VC{constructor(e){this.context=e,fo.set(this,void 0),IM(this,fo,{})}get rpc(){return this.context.rpc}get signer(){return this.context.signer}get estimate(){return this.context.estimate}get parser(){return this.context.parser}getPkh(){return J(this,void 0,void 0,function*(){return yield this.context.signer.publicKeyHash()})}getBlockHash(){return J(this,void 0,void 0,function*(){return this.context.readProvider.getBlockHash("head~2")})}getProtocolHash(){return J(this,void 0,void 0,function*(){return this.context.readProvider.getNextProtocol("head")})}getHeadCounter(e){var r;return J(this,void 0,void 0,function*(){return(r=this.context.readProvider.getCounter(e,"head"))!==null&&r!==void 0?r:"0"})}getFee(e,r,n){return(!zf(this,fo)[r]||zf(this,fo)[r]<n)&&(zf(this,fo)[r]=n),{counter:`${++zf(this,fo)[r]}`,fee:typeof e.fee>"u"?"0":`${e.fee}`,gas_limit:typeof e.gas_limit>"u"?"0":`${e.gas_limit}`,storage_limit:typeof e.storage_limit>"u"?"0":`${e.storage_limit}`}}getSource(e,r,n){return{source:typeof e.source>"u"?n||r:e.source}}buildEstimates(e){return{fee:e.suggestedFeeMutez,gasLimit:e.gasLimit,storageLimit:e.storageLimit}}addRevealOperationIfNeeded(e,r){return J(this,void 0,void 0,function*(){if(Qu(e)){const n=[e],i=yield this.signer.publicKey(),s=yield this.estimate.reveal();if(s){const o=this.buildEstimates(s);return n.unshift(yield Js(Object.assign({},o),r,i)),n}}return e})}convertIntoArray(e){return Array.isArray(e)?[...e]:[e]}constructOpContents(e,r,n,i,s){return e.map(o=>{switch(o.kind){case ce.ACTIVATION:case ce.DRAIN_DELEGATE:return Object.assign({},o);case ce.ORIGINATION:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{balance:typeof o.balance<"u"?`${o.balance}`:"0"}),this.getSource(o,n,i)),this.getFee(o,n,r));case ce.TRANSACTION:{const a=Object.assign(Object.assign(Object.assign(Object.assign({},o),{amount:typeof o.amount<"u"?`${o.amount}`:"0"}),this.getSource(o,n,i)),this.getFee(o,n,r));if(a.source.toLowerCase().startsWith("kt1"))throw new g1(`KT1 addresses are not supported as source since ${Zt.PsBabyM1}`);return a}case ce.REVEAL:case ce.DELEGATION:case ce.REGISTER_GLOBAL_CONSTANT:case ce.TX_ROLLUP_ORIGINATION:case ce.TX_ROLLUP_SUBMIT_BATCH:case ce.UPDATE_CONSENSUS_KEY:return Object.assign(Object.assign(Object.assign({},o),this.getSource(o,n,i)),this.getFee(o,n,r));case ce.TRANSFER_TICKET:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{ticket_amount:`${o.ticket_amount}`}),this.getSource(o,n,i)),this.getFee(o,n,r));case ce.INCREASE_PAID_STORAGE:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{amount:`${o.amount}`}),this.getSource(o,n,i)),this.getFee(o,n,r));case ce.BALLOT:if(s===void 0)throw new yo("Failed to get the current voting period index");return Object.assign(Object.assign({},o),{period:s==null?void 0:s.voting_period.index});case ce.PROPOSALS:if(s===void 0)throw new yo("Failed to get the current voting period index");return Object.assign(Object.assign({},o),{period:s==null?void 0:s.voting_period.index});default:throw new us(o.kind)}})}reveal(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate.reveal(e);if(n){const i=this.buildEstimates(n),s=yield Js(Object.assign({},i),r,yield this.signer.publicKey()),o=this.convertIntoArray(s),a=yield this.getBlockHash(),c=yield this.getProtocolHash(),l=parseInt(yield this.getHeadCounter(r),10),f=this.constructOpContents(o,l,r);return{opOb:{branch:a,contents:f,protocol:c},counter:l}}else throw new $3(`The publicKeyHash '${r}' has already been revealed.`)})}originate(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.originate(e),s=this.buildEstimates(i),o=yield Pa(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},e),s))),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),h=parseInt(yield this.getHeadCounter(n),10),S=this.constructOpContents(c,h,n,r);return{opOb:{branch:l,contents:S,protocol:f},counter:h}})}transaction(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.transfer(e),s=this.buildEstimates(i),o=yield Na(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),h=parseInt(yield this.getHeadCounter(n),10),S=this.constructOpContents(c,h,n,r);return{opOb:{branch:l,contents:S,protocol:f},counter:h}})}delegation(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.setDelegate(e),s=this.buildEstimates(i),o=yield La(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),h=parseInt(yield this.getHeadCounter(n),10),S=this.constructOpContents(c,h,n,r);return{opOb:{branch:l,contents:S,protocol:f},counter:h}})}registerGlobalConstant(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.registerGlobalConstant(e),s=this.buildEstimates(i),o=yield kc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),h=parseInt(yield this.getHeadCounter(n),10),S=this.constructOpContents(c,h,n,r);return{opOb:{branch:l,contents:S,protocol:f},counter:h}})}txRollupOrigination(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.txRollupOriginate(e),s=this.buildEstimates(i),o=yield Dc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),h=parseInt(yield this.getHeadCounter(n),10),S=this.constructOpContents(c,h,n,r);return{opOb:{branch:l,contents:S,protocol:f},counter:h}})}txRollupSubmitBatch(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.txRollupSubmitBatch(e),s=this.buildEstimates(i),o=yield Uc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),h=parseInt(yield this.getHeadCounter(n),10),S=this.constructOpContents(c,h,n,r);return{opOb:{branch:l,contents:S,protocol:f},counter:h}})}updateConsensusKey(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.updateConsensusKey(e),s=this.buildEstimates(i),o=yield k1(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),h=parseInt(yield this.getHeadCounter(n),10),S=this.constructOpContents(c,h,n,r);return{opOb:{branch:l,contents:S,protocol:f},counter:h}})}increasePaidStorage(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.increasePaidStorage(e),s=this.buildEstimates(i),o=yield Ma(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),h=parseInt(yield this.getHeadCounter(n),10),S=this.constructOpContents(c,h,n,r);return{opOb:{branch:l,contents:S,protocol:f},counter:h}})}ballot(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield X3(Object.assign({},e)),i=this.convertIntoArray(n),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10);let c;try{c=yield this.rpc.getCurrentPeriod()}catch{throw new yo("Failed to get the current voting period index")}const l=this.constructOpContents(i,a,r,void 0,c);return{opOb:{branch:s,contents:l,protocol:o},counter:a}})}proposals(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield J3(Object.assign({},e)),i=this.convertIntoArray(n),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10);let c;try{c=yield this.rpc.getCurrentPeriod()}catch{throw new yo("Failed to get the current voting period index")}const l=this.constructOpContents(i,a,r,void 0,c);return{opOb:{branch:s,contents:l,protocol:o},counter:a}})}drainDelegate(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield W3(Object.assign({},e)),s=this.convertIntoArray(i),o=yield this.getBlockHash(),a=yield this.getProtocolHash(),c=parseInt(yield this.getHeadCounter(n),10),l=this.constructOpContents(s,c,n,r);return{opOb:{branch:o,contents:l,protocol:a},counter:c}})}transferTicket(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.transferTicket(e),s=this.buildEstimates(i),o=yield Fc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),h=parseInt(yield this.getHeadCounter(n),10),S=this.constructOpContents(c,h,n,r);return{opOb:{branch:l,contents:S,protocol:f},counter:h}})}batch(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=new U1(this.context,this.estimate);Array.isArray(e)&&n.with(e);const i=yield n.toPrepare(),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10),c=this.constructOpContents(i,a,r);return{opOb:{branch:s,contents:c,protocol:o},counter:a}})}contractCall(e){var r,n,i;return J(this,void 0,void 0,function*(){const s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=yield this.signer.publicKeyHash(),c=parseInt(yield this.getHeadCounter(a),10),l=e.toTransferParams(),f=yield this.estimate.transfer(l),h=[{kind:ce.TRANSACTION,fee:(r=l.fee)!==null&&r!==void 0?r:f.suggestedFeeMutez,gas_limit:(n=l.gasLimit)!==null&&n!==void 0?n:f.gasLimit,storage_limit:(i=l.storageLimit)!==null&&i!==void 0?i:f.storageLimit,amount:String(l.amount),destination:l.to}],S=this.constructOpContents(h,c,a);return{opOb:{branch:s,contents:S,protocol:o},counter:c}})}}fo=new WeakMap;const $C={defaultConfirmationCount:1,confirmationPollingTimeoutSecond:180};class Zu{constructor(e,r=new lp,n,i=new Jl(Object.assign({},$C)),s,o,a,c,l,f,h,S){this._rpc=e,this._signer=r,this._proto=n,this._config=i,this.providerDecorator=[],this.tz=new sC(this),this.estimate=new fC(this),this.contract=new LC(this,this.estimate),this.prepare=new VC(this),this.batch=new WM(this,this.estimate),this.wallet=new oh(this),this.withExtensions=()=>{let P=this.clone();return this.providerDecorator.forEach(M=>{P=M(P)}),P},typeof this._rpc=="string"?this._rpcClient=new lu(this._rpc):this._rpcClient=this._rpc,this._forger=s||new o6(this),this._injector=o||new NM(this),this.operationFactory=new iC(this),this._walletProvider=c||new e6(this),this._parser=l||new r6(this),this._packer=a||new n6(this),this._globalConstantsProvider=f||new i6,this._readProvider=h||new s6(this._rpcClient),this._stream=S||new pp(this)}get config(){return this._config.getValue()}set config(e){this._config.next(Object.assign({},e))}setPartialConfig(e){this._config.next(Object.assign(Object.assign({},this._config.getValue()),e))}get rpc(){return this._rpcClient}set rpc(e){this._rpcClient=e}get injector(){return this._injector}set injector(e){this._injector=e}get forger(){return this._forger}set forger(e){this._forger=e}get signer(){return this._signer}set signer(e){this._signer=e}get walletProvider(){return this._walletProvider}set walletProvider(e){this._walletProvider=e}set proto(e){this._proto=e}get proto(){return this._proto}get parser(){return this._parser}set parser(e){this._parser=e}get packer(){return this._packer}set packer(e){this._packer=e}get globalConstantsProvider(){return this._globalConstantsProvider}set globalConstantsProvider(e){this._globalConstantsProvider=e}get readProvider(){return this._readProvider}set readProvider(e){this._readProvider=e}get stream(){return this._stream}set stream(e){this._stream=e}isAnyProtocolActive(e=[]){return J(this,void 0,void 0,function*(){if(this._proto)return e.includes(this._proto);{const r=yield this.readProvider.getNextProtocol("head");return e.includes(r)}})}isAnySignerConfigured(){return!(this.signer instanceof lp)}clone(){return new Zu(this.rpc,this.signer,this.proto,this._config,this.forger,this._injector,this.packer,this._walletProvider,this._parser,this._globalConstantsProvider,this._readProvider,this._stream)}registerProviderDecorator(e){this.providerDecorator.push(e)}}const zC={commitHash:"178bea7c6a3b3c58f23163fcc72e28aa5f08702a",version:"15.1.0"};class QC{packData(e){return J(this,void 0,void 0,function*(){const{bytes:r}=CL(e.data,e.type);return{packed:r}})}}class ZC{constructor(e){this._rpc=e,this._options={},this.format=v1,typeof this._rpc=="string"?this._rpcClient=new lu(this._rpc):this._rpcClient=this._rpc,this._context=new Zu(e),this._wallet=new oh(this._context),this.setProvider({rpc:this._rpcClient}),this.batch=this._context.batch.batch.bind(this._context.batch)}setProvider({rpc:e,stream:r,signer:n,protocol:i,config:s,forger:o,wallet:a,packer:c,globalConstantsProvider:l,readProvider:f,parserProvider:h}){this.setRpcProvider(e),this.setStreamProvider(r),this.setSignerProvider(n),this.setForgerProvider(o),this.setWalletProvider(a),this.setPackerProvider(c),this.setGlobalConstantsProvider(l),this.setReadProvider(f),this.setParserProvider(h),this._context.proto=i,s&&this._context.setPartialConfig(s)}setSignerProvider(e){!this._options.signer&&typeof e>"u"?(this._context.signer=new lp,this._options.signer=e):typeof e<"u"&&(this._context.signer=e,this._options.signer=e)}setRpcProvider(e){typeof e=="string"?this._rpcClient=new lu(e):e===void 0||(this._rpcClient=e),this._options.rpc=this._rpcClient,this._context.rpc=this._rpcClient}setForgerProvider(e){if(typeof e<"u")this._options.forger=e,this._context.forger=e;else if(this._options.forger===void 0){const r=this.getFactory(o6)();this._options.forger=r,this._context.forger=r}}setStreamProvider(e){if(typeof e=="string"){const r=new pp(new Zu(new lu(e)));this._options.stream=r,this._context.stream=r}else if(typeof e<"u")this._options.stream=e,this._context.stream=e;else if(this._options.stream===void 0){const r=this.getFactory(pp)();this._options.stream=r,this._context.stream=r}}setWalletProvider(e){if(!this._options.wallet&&typeof e>"u"){const r=this.getFactory(e6)();this._options.wallet=r,this._context.walletProvider=r}else typeof e<"u"&&(this._options.wallet=e,this._context.walletProvider=e)}setPackerProvider(e){if(!this._options.packer&&typeof e>"u"){const r=this.getFactory(n6)();this._context.packer=r,this._options.packer=r}else typeof e<"u"&&(this._context.packer=e,this._options.packer=e)}setGlobalConstantsProvider(e){if(!this._options.globalConstantsProvider&&typeof e>"u"){const r=new i6;this._context.globalConstantsProvider=r,this._options.globalConstantsProvider=r}else typeof e<"u"&&(this._context.globalConstantsProvider=e,this._options.globalConstantsProvider=e)}setReadProvider(e){const r=e||new s6(this._context.rpc);this._options.readProvider=r,this._context.readProvider=r}setParserProvider(e){if(!this._options.parserProvider&&typeof e>"u"){const r=new r6(this._context);this._context.parser=r,this._options.parserProvider=r}else typeof e<"u"&&(this._context.parser=e,this._options.parserProvider=e)}get tz(){return this._context.tz}get contract(){return this._context.contract}get prepare(){return this._context.prepare}get wallet(){return this._wallet}get operation(){return this._context.operationFactory}get estimate(){return this._context.estimate}get stream(){return this._context.stream}get rpc(){return this._context.rpc}get signer(){return this._context.signer}get globalConstants(){return this._context.globalConstantsProvider}addExtension(e){Array.isArray(e)?e.forEach(r=>r.configureContext(this._context)):e.configureContext(this._context)}getFactory(e){return(...r)=>new e(this._context,...r)}getVersionInfo(){return zC}}function Ni(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(h){o(h)}}function c(f){try{l(n.throw(f))}catch(h){o(h)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}class um extends Error{constructor(){super("You need to initialize BeaconWallet by calling beaconWallet.requestPermissions first"),this.name="BeaconWalletNotInitialized"}}class WC extends Error{constructor(e){super(`Required permissions scopes were not granted: ${e.join(",")}`),this.requiredScopes=e,this.name="MissingRequiredScopes"}}class eB{constructor(e){this.client=LT(e)}validateRequiredScopesOrFail(e,r){const n=new Set(r);for(const i of e)n.has(i)&&n.delete(i);if(n.size>0)throw new WC(Array.from(n))}requestPermissions(e){return Ni(this,void 0,void 0,function*(){yield this.client.requestPermissions(e)})}getPKH(){return Ni(this,void 0,void 0,function*(){const e=yield this.client.getActiveAccount();if(!e)throw new um;return e.address})}mapTransferParamsToWalletParams(e){return Ni(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield Na(this.formatParameters(r)))})}mapIncreasePaidStorageWalletParams(e){return Ni(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield Ma(this.formatParameters(r)))})}mapOriginateParamsToWalletParams(e){return Ni(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield Pa(this.formatParameters(r)))})}mapDelegateParamsToWalletParams(e){return Ni(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield La(this.formatParameters(r)))})}formatParameters(e){return e.fee&&(e.fee=e.fee.toString()),e.storageLimit&&(e.storageLimit=e.storageLimit.toString()),e.gasLimit&&(e.gasLimit=e.gasLimit.toString()),e}removeDefaultParams(e,r){return e.fee||delete r.fee,e.storageLimit||delete r.storage_limit,e.gasLimit||delete r.gas_limit,r}sendOperations(e){return Ni(this,void 0,void 0,function*(){const r=yield this.client.getActiveAccount();if(!r)throw new um;const n=r.scopes;this.validateRequiredScopesOrFail(n,[Pn.OPERATION_REQUEST]);const{transactionHash:i}=yield this.client.requestOperation({operationDetails:e});return i})}disconnect(){return Ni(this,void 0,void 0,function*(){yield this.client.destroy()})}clearActiveAccount(){return Ni(this,void 0,void 0,function*(){yield this.client.setActiveAccount()})}}export{te as B,QC as M,Lt as N,ce as O,c8 as P,Qr as S,ZC as T,_e as V,BT as _,Ks as a,tt as b,zA as c,pc as d,hT as e,mo as f,wi as g,eB as h,lm as i,Yr as j,PR as k,YC as l,JC as m,Th as p,Mp as r,hr as u,vt as v};
