var Cn=Object.defineProperty;var xn=(d,i,j)=>i in d?Cn(d,i,{enumerable:!0,configurable:!0,writable:!0,value:j}):d[i]=j;var ft=(d,i,j)=>(xn(d,typeof i!="symbol"?i+"":i,j),j),Bt=(d,i,j)=>{if(!i.has(d))throw TypeError("Cannot "+j)};var ge=(d,i,j)=>(Bt(d,i,"read from private field"),j?j.call(d):i.get(d)),We=(d,i,j)=>{if(i.has(d))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(d):i.set(d,j)},Je=(d,i,j,e)=>(Bt(d,i,"write to private field"),e?e.call(d,j):i.set(d,j),j);var Wt=(d,i,j,e)=>({set _(a){Je(d,i,a,j)},get _(){return ge(d,i,e)}}),Ge=(d,i,j)=>(Bt(d,i,"access private method"),j);import{g as getDefaultExportFromCjs,b as browser$1,B as Buffer,c as commonjsRequire,r as require$$5}from"./contracts-7e9d86bb.js";function _mergeNamespaces(d,i){for(var j=0;j<i.length;j++){const e=i[j];if(typeof e!="string"&&!Array.isArray(e)){for(const a in e)if(a!=="default"&&!(a in d)){const oe=Object.getOwnPropertyDescriptor(e,a);oe&&Object.defineProperty(d,a,oe.get?oe:{enumerable:!0,get:()=>e[a]})}}}return Object.freeze(Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}))}var react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=Symbol.for("react.element"),n=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z=Symbol.iterator;function A(d){return d===null||typeof d!="object"?null:(d=z&&d[z]||d["@@iterator"],typeof d=="function"?d:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function E(d,i,j){this.props=d,this.context=i,this.refs=D,this.updater=j||B}E.prototype.isReactComponent={};E.prototype.setState=function(d,i){if(typeof d!="object"&&typeof d!="function"&&d!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,d,i,"setState")};E.prototype.forceUpdate=function(d){this.updater.enqueueForceUpdate(this,d,"forceUpdate")};function F(){}F.prototype=E.prototype;function G(d,i,j){this.props=d,this.context=i,this.refs=D,this.updater=j||B}var H=G.prototype=new F;H.constructor=G;C(H,E.prototype);H.isPureReactComponent=!0;var I=Array.isArray,J=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function M(d,i,j){var e,a={},oe=null,he=null;if(i!=null)for(e in i.ref!==void 0&&(he=i.ref),i.key!==void 0&&(oe=""+i.key),i)J.call(i,e)&&!L.hasOwnProperty(e)&&(a[e]=i[e]);var ie=arguments.length-2;if(ie===1)a.children=j;else if(1<ie){for(var ee=Array(ie),k=0;k<ie;k++)ee[k]=arguments[k+2];a.children=ee}if(d&&d.defaultProps)for(e in ie=d.defaultProps,ie)a[e]===void 0&&(a[e]=ie[e]);return{$$typeof:l,type:d,key:oe,ref:he,props:a,_owner:K.current}}function N(d,i){return{$$typeof:l,type:d.type,key:i,ref:d.ref,props:d.props,_owner:d._owner}}function O(d){return typeof d=="object"&&d!==null&&d.$$typeof===l}function escape$1(d){var i={"=":"=0",":":"=2"};return"$"+d.replace(/[=:]/g,function(j){return i[j]})}var P=/\/+/g;function Q(d,i){return typeof d=="object"&&d!==null&&d.key!=null?escape$1(""+d.key):i.toString(36)}function R(d,i,j,e,a){var oe=typeof d;(oe==="undefined"||oe==="boolean")&&(d=null);var he=!1;if(d===null)he=!0;else switch(oe){case"string":case"number":he=!0;break;case"object":switch(d.$$typeof){case l:case n:he=!0}}if(he)return he=d,a=a(he),d=e===""?"."+Q(he,0):e,I(a)?(j="",d!=null&&(j=d.replace(P,"$&/")+"/"),R(a,i,j,"",function(k){return k})):a!=null&&(O(a)&&(a=N(a,j+(!a.key||he&&he.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+d)),i.push(a)),1;if(he=0,e=e===""?".":e+":",I(d))for(var ie=0;ie<d.length;ie++){oe=d[ie];var ee=e+Q(oe,ie);he+=R(oe,i,j,ee,a)}else if(ee=A(d),typeof ee=="function")for(d=ee.call(d),ie=0;!(oe=d.next()).done;)oe=oe.value,ee=e+Q(oe,ie++),he+=R(oe,i,j,ee,a);else if(oe==="object")throw i=String(d),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return he}function S(d,i,j){if(d==null)return d;var e=[],a=0;return R(d,e,"","",function(oe){return i.call(j,oe,a++)}),e}function T(d){if(d._status===-1){var i=d._result;i=i(),i.then(function(j){(d._status===0||d._status===-1)&&(d._status=1,d._result=j)},function(j){(d._status===0||d._status===-1)&&(d._status=2,d._result=j)}),d._status===-1&&(d._status=0,d._result=i)}if(d._status===1)return d._result.default;throw d._result}var U={current:null},V={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};react_production_min.Children={map:S,forEach:function(d,i,j){S(d,function(){i.apply(this,arguments)},j)},count:function(d){var i=0;return S(d,function(){i++}),i},toArray:function(d){return S(d,function(i){return i})||[]},only:function(d){if(!O(d))throw Error("React.Children.only expected to receive a single React element child.");return d}};react_production_min.Component=E;react_production_min.Fragment=p;react_production_min.Profiler=r$1;react_production_min.PureComponent=G;react_production_min.StrictMode=q;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W;react_production_min.cloneElement=function(d,i,j){if(d==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+d+".");var e=C({},d.props),a=d.key,oe=d.ref,he=d._owner;if(i!=null){if(i.ref!==void 0&&(oe=i.ref,he=K.current),i.key!==void 0&&(a=""+i.key),d.type&&d.type.defaultProps)var ie=d.type.defaultProps;for(ee in i)J.call(i,ee)&&!L.hasOwnProperty(ee)&&(e[ee]=i[ee]===void 0&&ie!==void 0?ie[ee]:i[ee])}var ee=arguments.length-2;if(ee===1)e.children=j;else if(1<ee){ie=Array(ee);for(var k=0;k<ee;k++)ie[k]=arguments[k+2];e.children=ie}return{$$typeof:l,type:d.type,key:a,ref:oe,props:e,_owner:he}};react_production_min.createContext=function(d){return d={$$typeof:u,_currentValue:d,_currentValue2:d,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},d.Provider={$$typeof:t,_context:d},d.Consumer=d};react_production_min.createElement=M;react_production_min.createFactory=function(d){var i=M.bind(null,d);return i.type=d,i};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(d){return{$$typeof:v,render:d}};react_production_min.isValidElement=O;react_production_min.lazy=function(d){return{$$typeof:y,_payload:{_status:-1,_result:d},_init:T}};react_production_min.memo=function(d,i){return{$$typeof:x,type:d,compare:i===void 0?null:i}};react_production_min.startTransition=function(d){var i=V.transition;V.transition={};try{d()}finally{V.transition=i}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(d,i){return U.current.useCallback(d,i)};react_production_min.useContext=function(d){return U.current.useContext(d)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(d){return U.current.useDeferredValue(d)};react_production_min.useEffect=function(d,i){return U.current.useEffect(d,i)};react_production_min.useId=function(){return U.current.useId()};react_production_min.useImperativeHandle=function(d,i,j){return U.current.useImperativeHandle(d,i,j)};react_production_min.useInsertionEffect=function(d,i){return U.current.useInsertionEffect(d,i)};react_production_min.useLayoutEffect=function(d,i){return U.current.useLayoutEffect(d,i)};react_production_min.useMemo=function(d,i){return U.current.useMemo(d,i)};react_production_min.useReducer=function(d,i,j){return U.current.useReducer(d,i,j)};react_production_min.useRef=function(d){return U.current.useRef(d)};react_production_min.useState=function(d){return U.current.useState(d)};react_production_min.useSyncExternalStore=function(d,i,j){return U.current.useSyncExternalStore(d,i,j)};react_production_min.useTransition=function(){return U.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var pdf={exports:{}};(function(module,exports){(function(i,j){module.exports=j()})(globalThis,()=>(()=>{var __webpack_modules__=[,(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.VerbosityLevel=i.Util=i.UnknownErrorException=i.UnexpectedResponseException=i.UNSUPPORTED_FEATURES=i.TextRenderingMode=i.StreamType=i.RenderingIntentFlag=i.PermissionFlag=i.PasswordResponses=i.PasswordException=i.PageActionEventType=i.OPS=i.MissingPDFException=i.LINE_FACTOR=i.LINE_DESCENT_FACTOR=i.InvalidPDFException=i.ImageKind=i.IDENTITY_MATRIX=i.FormatError=i.FontType=i.FeatureTest=i.FONT_IDENTITY_MATRIX=i.DocumentActionEventType=i.CMapCompressionType=i.BaseException=i.AnnotationType=i.AnnotationStateModelType=i.AnnotationReviewState=i.AnnotationReplyType=i.AnnotationMode=i.AnnotationMarkedState=i.AnnotationFlag=i.AnnotationFieldFlag=i.AnnotationEditorType=i.AnnotationEditorPrefix=i.AnnotationEditorParamsType=i.AnnotationBorderStyleType=i.AnnotationActionEventType=i.AbortException=void 0,i.arrayByteLength=je,i.arraysToBytes=ze,i.assert=$,i.bytesToString=me,i.createPromiseCapability=Ye,i.createValidAbsoluteUrl=de,i.escapeString=ot,i.getModificationDate=Be,i.getVerbosityLevel=Ne,i.info=He,i.isArrayBuffer=pt,i.isArrayEqual=Dt,i.isAscii=dt,i.objectFromMap=Le,i.objectSize=qe,i.setVerbosityLevel=ke,i.shadow=be,i.string32=De,i.stringToBytes=Ee,i.stringToPDFString=it,i.stringToUTF16BEString=ht,i.stringToUTF8String=Ct,i.unreachable=Se,i.utf8StringToString=st,i.warn=Ze,j(2);const e=[1,0,0,1,0,0];i.IDENTITY_MATRIX=e;const a=[.001,0,0,.001,0,0];i.FONT_IDENTITY_MATRIX=a;const oe=1.35;i.LINE_FACTOR=oe;const he=.35;i.LINE_DESCENT_FACTOR=he;const ie={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};i.RenderingIntentFlag=ie;const ee={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};i.AnnotationMode=ee;const k="pdfjs_internal_editor_";i.AnnotationEditorPrefix=k;const ue={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};i.AnnotationEditorType=ue;const ye={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};i.AnnotationEditorParamsType=ye;const le={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};i.PermissionFlag=le;const se={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};i.TextRenderingMode=se;const _={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};i.ImageKind=_;const s={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};i.AnnotationType=s;const c={MARKED:"Marked",REVIEW:"Review"};i.AnnotationStateModelType=c;const g={MARKED:"Marked",UNMARKED:"Unmarked"};i.AnnotationMarkedState=g;const ne={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};i.AnnotationReviewState=ne;const re={GROUP:"Group",REPLY:"R"};i.AnnotationReplyType=re;const m={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};i.AnnotationFlag=m;const o={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};i.AnnotationFieldFlag=o;const h={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};i.AnnotationBorderStyleType=h;const Y={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};i.AnnotationActionEventType=Y;const fe={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};i.DocumentActionEventType=fe;const ae={O:"PageOpen",C:"PageClose"};i.PageActionEventType=ae;const Z={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};i.StreamType=Z;const pe={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};i.FontType=pe;const Ie={ERRORS:0,WARNINGS:1,INFOS:5};i.VerbosityLevel=Ie;const Ue={NONE:0,BINARY:1,STREAM:2};i.CMapCompressionType=Ue;const Me={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};i.OPS=Me;const Fe={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};i.UNSUPPORTED_FEATURES=Fe;const Pe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};i.PasswordResponses=Pe;let xe=Ie.WARNINGS;function ke(Oe){Number.isInteger(Oe)&&(xe=Oe)}function Ne(){return xe}function He(Oe){xe>=Ie.INFOS&&console.log(`Info: ${Oe}`)}function Ze(Oe){xe>=Ie.WARNINGS&&console.log(`Warning: ${Oe}`)}function Se(Oe){throw new Error(Oe)}function $(Oe,Te){Oe||Se(Te)}function b(Oe){if(!Oe)return!1;switch(Oe.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function de(Oe,Te=null,Ce=null){if(!Oe)return null;try{if(Ce&&typeof Oe=="string"){if(Ce.addDefaultProtocol&&Oe.startsWith("www.")){const Qe=Oe.match(/\./g);Qe&&Qe.length>=2&&(Oe=`http://${Oe}`)}if(Ce.tryConvertEncoding)try{Oe=Ct(Oe)}catch{}}const Ke=Te?new URL(Oe,Te):new URL(Oe);if(b(Ke))return Ke}catch{}return null}function be(Oe,Te,Ce){return Object.defineProperty(Oe,Te,{value:Ce,enumerable:!0,configurable:!0,writable:!1}),Ce}const ve=function(){function Te(Ce,Ke){this.constructor===Te&&Se("Cannot initialize BaseException."),this.message=Ce,this.name=Ke}return Te.prototype=new Error,Te.constructor=Te,Te}();i.BaseException=ve;class Ae extends ve{constructor(Te,Ce){super(Te,"PasswordException"),this.code=Ce}}i.PasswordException=Ae;class we extends ve{constructor(Te,Ce){super(Te,"UnknownErrorException"),this.details=Ce}}i.UnknownErrorException=we;class Re extends ve{constructor(Te){super(Te,"InvalidPDFException")}}i.InvalidPDFException=Re;class f extends ve{constructor(Te){super(Te,"MissingPDFException")}}i.MissingPDFException=f;class X extends ve{constructor(Te,Ce){super(Te,"UnexpectedResponseException"),this.status=Ce}}i.UnexpectedResponseException=X;class te extends ve{constructor(Te){super(Te,"FormatError")}}i.FormatError=te;class ce extends ve{constructor(Te){super(Te,"AbortException")}}i.AbortException=ce;function me(Oe){(typeof Oe!="object"||Oe===null||Oe.length===void 0)&&Se("Invalid argument for bytesToString");const Te=Oe.length,Ce=8192;if(Te<Ce)return String.fromCharCode.apply(null,Oe);const Ke=[];for(let Qe=0;Qe<Te;Qe+=Ce){const tt=Math.min(Qe+Ce,Te),rt=Oe.subarray(Qe,tt);Ke.push(String.fromCharCode.apply(null,rt))}return Ke.join("")}function Ee(Oe){typeof Oe!="string"&&Se("Invalid argument for stringToBytes");const Te=Oe.length,Ce=new Uint8Array(Te);for(let Ke=0;Ke<Te;++Ke)Ce[Ke]=Oe.charCodeAt(Ke)&255;return Ce}function je(Oe){if(Oe.length!==void 0)return Oe.length;if(Oe.byteLength!==void 0)return Oe.byteLength;Se("Invalid argument for arrayByteLength")}function ze(Oe){const Te=Oe.length;if(Te===1&&Oe[0]instanceof Uint8Array)return Oe[0];let Ce=0;for(let tt=0;tt<Te;tt++)Ce+=je(Oe[tt]);let Ke=0;const Qe=new Uint8Array(Ce);for(let tt=0;tt<Te;tt++){let rt=Oe[tt];rt instanceof Uint8Array||(typeof rt=="string"?rt=Ee(rt):rt=new Uint8Array(rt));const lt=rt.byteLength;Qe.set(rt,Ke),Ke+=lt}return Qe}function De(Oe){return String.fromCharCode(Oe>>24&255,Oe>>16&255,Oe>>8&255,Oe&255)}function qe(Oe){return Object.keys(Oe).length}function Le(Oe){const Te=Object.create(null);for(const[Ce,Ke]of Oe)Te[Ce]=Ke;return Te}function $e(){const Oe=new Uint8Array(4);return Oe[0]=1,new Uint32Array(Oe.buffer,0,1)[0]===1}function Xe(){try{return new Function(""),!0}catch{return!1}}class _e{static get isLittleEndian(){return be(this,"isLittleEndian",$e())}static get isEvalSupported(){return be(this,"isEvalSupported",Xe())}static get isOffscreenCanvasSupported(){return be(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}i.FeatureTest=_e;const Ve=[...Array(256).keys()].map(Oe=>Oe.toString(16).padStart(2,"0"));class et{static makeHexColor(Te,Ce,Ke){return`#${Ve[Te]}${Ve[Ce]}${Ve[Ke]}`}static scaleMinMax(Te,Ce){let Ke;Te[0]?(Te[0]<0&&(Ke=Ce[0],Ce[0]=Ce[1],Ce[1]=Ke),Ce[0]*=Te[0],Ce[1]*=Te[0],Te[3]<0&&(Ke=Ce[2],Ce[2]=Ce[3],Ce[3]=Ke),Ce[2]*=Te[3],Ce[3]*=Te[3]):(Ke=Ce[0],Ce[0]=Ce[2],Ce[2]=Ke,Ke=Ce[1],Ce[1]=Ce[3],Ce[3]=Ke,Te[1]<0&&(Ke=Ce[2],Ce[2]=Ce[3],Ce[3]=Ke),Ce[2]*=Te[1],Ce[3]*=Te[1],Te[2]<0&&(Ke=Ce[0],Ce[0]=Ce[1],Ce[1]=Ke),Ce[0]*=Te[2],Ce[1]*=Te[2]),Ce[0]+=Te[4],Ce[1]+=Te[4],Ce[2]+=Te[5],Ce[3]+=Te[5]}static transform(Te,Ce){return[Te[0]*Ce[0]+Te[2]*Ce[1],Te[1]*Ce[0]+Te[3]*Ce[1],Te[0]*Ce[2]+Te[2]*Ce[3],Te[1]*Ce[2]+Te[3]*Ce[3],Te[0]*Ce[4]+Te[2]*Ce[5]+Te[4],Te[1]*Ce[4]+Te[3]*Ce[5]+Te[5]]}static applyTransform(Te,Ce){const Ke=Te[0]*Ce[0]+Te[1]*Ce[2]+Ce[4],Qe=Te[0]*Ce[1]+Te[1]*Ce[3]+Ce[5];return[Ke,Qe]}static applyInverseTransform(Te,Ce){const Ke=Ce[0]*Ce[3]-Ce[1]*Ce[2],Qe=(Te[0]*Ce[3]-Te[1]*Ce[2]+Ce[2]*Ce[5]-Ce[4]*Ce[3])/Ke,tt=(-Te[0]*Ce[1]+Te[1]*Ce[0]+Ce[4]*Ce[1]-Ce[5]*Ce[0])/Ke;return[Qe,tt]}static getAxialAlignedBoundingBox(Te,Ce){const Ke=et.applyTransform(Te,Ce),Qe=et.applyTransform(Te.slice(2,4),Ce),tt=et.applyTransform([Te[0],Te[3]],Ce),rt=et.applyTransform([Te[2],Te[1]],Ce);return[Math.min(Ke[0],Qe[0],tt[0],rt[0]),Math.min(Ke[1],Qe[1],tt[1],rt[1]),Math.max(Ke[0],Qe[0],tt[0],rt[0]),Math.max(Ke[1],Qe[1],tt[1],rt[1])]}static inverseTransform(Te){const Ce=Te[0]*Te[3]-Te[1]*Te[2];return[Te[3]/Ce,-Te[1]/Ce,-Te[2]/Ce,Te[0]/Ce,(Te[2]*Te[5]-Te[4]*Te[3])/Ce,(Te[4]*Te[1]-Te[5]*Te[0])/Ce]}static apply3dTransform(Te,Ce){return[Te[0]*Ce[0]+Te[1]*Ce[1]+Te[2]*Ce[2],Te[3]*Ce[0]+Te[4]*Ce[1]+Te[5]*Ce[2],Te[6]*Ce[0]+Te[7]*Ce[1]+Te[8]*Ce[2]]}static singularValueDecompose2dScale(Te){const Ce=[Te[0],Te[2],Te[1],Te[3]],Ke=Te[0]*Ce[0]+Te[1]*Ce[2],Qe=Te[0]*Ce[1]+Te[1]*Ce[3],tt=Te[2]*Ce[0]+Te[3]*Ce[2],rt=Te[2]*Ce[1]+Te[3]*Ce[3],lt=(Ke+rt)/2,gt=Math.sqrt((Ke+rt)**2-4*(Ke*rt-tt*Qe))/2,ut=lt+gt||1,at=lt-gt||1;return[Math.sqrt(ut),Math.sqrt(at)]}static normalizeRect(Te){const Ce=Te.slice(0);return Te[0]>Te[2]&&(Ce[0]=Te[2],Ce[2]=Te[0]),Te[1]>Te[3]&&(Ce[1]=Te[3],Ce[3]=Te[1]),Ce}static intersect(Te,Ce){const Ke=Math.max(Math.min(Te[0],Te[2]),Math.min(Ce[0],Ce[2])),Qe=Math.min(Math.max(Te[0],Te[2]),Math.max(Ce[0],Ce[2]));if(Ke>Qe)return null;const tt=Math.max(Math.min(Te[1],Te[3]),Math.min(Ce[1],Ce[3])),rt=Math.min(Math.max(Te[1],Te[3]),Math.max(Ce[1],Ce[3]));return tt>rt?null:[Ke,tt,Qe,rt]}static bezierBoundingBox(Te,Ce,Ke,Qe,tt,rt,lt,gt){const ut=[],at=[[],[]];let yt,mt,vt,ct,_t,St,xt,wt;for(let Rt=0;Rt<2;++Rt){if(Rt===0?(mt=6*Te-12*Ke+6*tt,yt=-3*Te+9*Ke-9*tt+3*lt,vt=3*Ke-3*Te):(mt=6*Ce-12*Qe+6*rt,yt=-3*Ce+9*Qe-9*rt+3*gt,vt=3*Qe-3*Ce),Math.abs(yt)<1e-12){if(Math.abs(mt)<1e-12)continue;ct=-vt/mt,0<ct&&ct<1&&ut.push(ct);continue}xt=mt*mt-4*vt*yt,wt=Math.sqrt(xt),!(xt<0)&&(_t=(-mt+wt)/(2*yt),0<_t&&_t<1&&ut.push(_t),St=(-mt-wt)/(2*yt),0<St&&St<1&&ut.push(St))}let Pt=ut.length,bt;const Et=Pt;for(;Pt--;)ct=ut[Pt],bt=1-ct,at[0][Pt]=bt*bt*bt*Te+3*bt*bt*ct*Ke+3*bt*ct*ct*tt+ct*ct*ct*lt,at[1][Pt]=bt*bt*bt*Ce+3*bt*bt*ct*Qe+3*bt*ct*ct*rt+ct*ct*ct*gt;return at[0][Et]=Te,at[1][Et]=Ce,at[0][Et+1]=lt,at[1][Et+1]=gt,at[0].length=at[1].length=Et+2,[Math.min(...at[0]),Math.min(...at[1]),Math.max(...at[0]),Math.max(...at[1])]}}i.Util=et;const nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function it(Oe){if(Oe[0]>="ï"){let Ce;if(Oe[0]==="þ"&&Oe[1]==="ÿ"?Ce="utf-16be":Oe[0]==="ÿ"&&Oe[1]==="þ"?Ce="utf-16le":Oe[0]==="ï"&&Oe[1]==="»"&&Oe[2]==="¿"&&(Ce="utf-8"),Ce)try{const Ke=new TextDecoder(Ce,{fatal:!0}),Qe=Ee(Oe);return Ke.decode(Qe)}catch(Ke){Ze(`stringToPDFString: "${Ke}".`)}}const Te=[];for(let Ce=0,Ke=Oe.length;Ce<Ke;Ce++){const Qe=nt[Oe.charCodeAt(Ce)];Te.push(Qe?String.fromCharCode(Qe):Oe.charAt(Ce))}return Te.join("")}function ot(Oe){return Oe.replace(/([()\\\n\r])/g,Te=>Te===`
`?"\\n":Te==="\r"?"\\r":`\\${Te}`)}function dt(Oe){return/^[\x00-\x7F]*$/.test(Oe)}function ht(Oe){const Te=["þÿ"];for(let Ce=0,Ke=Oe.length;Ce<Ke;Ce++){const Qe=Oe.charCodeAt(Ce);Te.push(String.fromCharCode(Qe>>8&255),String.fromCharCode(Qe&255))}return Te.join("")}function Ct(Oe){return decodeURIComponent(escape(Oe))}function st(Oe){return unescape(encodeURIComponent(Oe))}function pt(Oe){return typeof Oe=="object"&&Oe!==null&&Oe.byteLength!==void 0}function Dt(Oe,Te){if(Oe.length!==Te.length)return!1;for(let Ce=0,Ke=Oe.length;Ce<Ke;Ce++)if(Oe[Ce]!==Te[Ce])return!1;return!0}function Be(Oe=new Date){return[Oe.getUTCFullYear().toString(),(Oe.getUTCMonth()+1).toString().padStart(2,"0"),Oe.getUTCDate().toString().padStart(2,"0"),Oe.getUTCHours().toString().padStart(2,"0"),Oe.getUTCMinutes().toString().padStart(2,"0"),Oe.getUTCSeconds().toString().padStart(2,"0")].join("")}function Ye(){const Oe=Object.create(null);let Te=!1;return Object.defineProperty(Oe,"settled",{get(){return Te}}),Oe.promise=new Promise(function(Ce,Ke){Oe.resolve=function(Qe){Te=!0,Ce(Qe)},Oe.reject=function(Qe){Te=!0,Ke(Qe)}}),Oe}},(d,i,j)=>{j(3)},(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isNodeJS=void 0;const j=typeof browser$1=="object"&&browser$1+""=="[object process]"&&!browser$1.versions.nw&&!(browser$1.versions.electron&&browser$1.type&&browser$1.type!=="browser");i.isNodeJS=j},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var d,j,e,a,oe,he,ie,ee,k,qt,ye,le;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:_,NodeCMapReaderFactory:s,NodeStandardFontDataFactory:c}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=_,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=s,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=c}let createPDFNetworkStream;function setPDFNetworkStreamFactory(_){createPDFNetworkStream=_}function getDocument(_){const s=new PDFDocumentLoadingTask;let c;if(typeof _=="string"||_ instanceof URL)c={url:_};else if((0,_util.isArrayBuffer)(_))c={data:_};else if(_ instanceof PDFDataRangeTransport)c={range:_};else{if(typeof _!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!_.url&&!_.data&&!_.range)throw new Error("Invalid parameter object: need either .data, .range or .url");c=_}const g=Object.create(null);let ne=null,re=null;for(const o in c){const h=c[o];switch(o){case"url":if(typeof window<"u")try{g[o]=new URL(h,window.location).href;continue}catch(Y){(0,_util.warn)(`Cannot create valid URL: "${Y}".`)}else if(typeof h=="string"||h instanceof URL){g[o]=h.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":ne=h;continue;case"worker":re=h;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&h instanceof Buffer)g[o]=new Uint8Array(h);else{if(h instanceof Uint8Array)break;if(typeof h=="string")g[o]=(0,_util.stringToBytes)(h);else if(typeof h=="object"&&h!==null&&!isNaN(h.length))g[o]=new Uint8Array(h);else if((0,_util.isArrayBuffer)(h))g[o]=new Uint8Array(h);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}g[o]=h}if(g.CMapReaderFactory=g.CMapReaderFactory||DefaultCMapReaderFactory,g.StandardFontDataFactory=g.StandardFontDataFactory||DefaultStandardFontDataFactory,g.ignoreErrors=g.stopAtErrors!==!0,g.fontExtraProperties=g.fontExtraProperties===!0,g.pdfBug=g.pdfBug===!0,g.enableXfa=g.enableXfa===!0,(!Number.isInteger(g.rangeChunkSize)||g.rangeChunkSize<1)&&(g.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof g.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(g.docBaseUrl))&&(g.docBaseUrl=null),(!Number.isInteger(g.maxImageSize)||g.maxImageSize<-1)&&(g.maxImageSize=-1),typeof g.cMapUrl!="string"&&(g.cMapUrl=null),typeof g.standardFontDataUrl!="string"&&(g.standardFontDataUrl=null),typeof g.useWorkerFetch!="boolean"&&(g.useWorkerFetch=g.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&g.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof g.isEvalSupported!="boolean"&&(g.isEvalSupported=!0),typeof g.disableFontFace!="boolean"&&(g.disableFontFace=_is_node.isNodeJS),typeof g.useSystemFonts!="boolean"&&(g.useSystemFonts=!_is_node.isNodeJS&&!g.disableFontFace),(typeof g.ownerDocument!="object"||g.ownerDocument===null)&&(g.ownerDocument=globalThis.document),typeof g.disableRange!="boolean"&&(g.disableRange=!1),typeof g.disableStream!="boolean"&&(g.disableStream=!1),typeof g.disableAutoFetch!="boolean"&&(g.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(g.verbosity),!re){const o={verbosity:g.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};re=o.port?PDFWorker.fromPort(o):new PDFWorker(o),s._worker=re}const m=s.docId;return re.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");const o=_fetchDocument(re,g,ne,m),h=new Promise(function(Y){let fe;ne?fe=new _transport_stream.PDFDataTransportStream({length:g.length,initialData:g.initialData,progressiveDone:g.progressiveDone,contentDispositionFilename:g.contentDispositionFilename,disableRange:g.disableRange,disableStream:g.disableStream},ne):g.data||(fe=createPDFNetworkStream({url:g.url,length:g.length,httpHeaders:g.httpHeaders,withCredentials:g.withCredentials,rangeChunkSize:g.rangeChunkSize,disableRange:g.disableRange,disableStream:g.disableStream})),Y(fe)});return Promise.all([o,h]).then(function([Y,fe]){if(s.destroyed)throw new Error("Loading aborted");const ae=new _message_handler.MessageHandler(m,Y,re.port),Z=new WorkerTransport(ae,s,fe,g);s._transport=Z,ae.send("Ready",null)})}).catch(s._capability.reject),s}async function _fetchDocument(_,s,c,g){if(_.destroyed)throw new Error("Worker was destroyed");c&&(s.length=c.length,s.initialData=c.initialData,s.progressiveDone=c.progressiveDone,s.contentDispositionFilename=c.contentDispositionFilename);const ne=await _.messageHandler.sendWithPromise("GetDocRequest",{docId:g,apiVersion:"2.16.105",source:{data:s.data,url:s.url,password:s.password,disableAutoFetch:s.disableAutoFetch,rangeChunkSize:s.rangeChunkSize,length:s.length},maxImageSize:s.maxImageSize,disableFontFace:s.disableFontFace,docBaseUrl:s.docBaseUrl,ignoreErrors:s.ignoreErrors,isEvalSupported:s.isEvalSupported,fontExtraProperties:s.fontExtraProperties,enableXfa:s.enableXfa,useSystemFonts:s.useSystemFonts,cMapUrl:s.useWorkerFetch?s.cMapUrl:null,standardFontDataUrl:s.useWorkerFetch?s.standardFontDataUrl:null});if(s.data&&(s.data=null),_.destroyed)throw new Error("Worker was destroyed");return ne}const i=class i{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${Wt(i,d)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var s;this.destroyed=!0,await((s=this._transport)==null?void 0:s.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};d=new WeakMap,We(i,d,0);let PDFDocumentLoadingTask=i;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(s,c,g=!1,ne=null){this.length=s,this.initialData=c,this.progressiveDone=g,this.contentDispositionFilename=ne,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,c){for(const g of this._rangeListeners)g(s,c)}onDataProgress(s,c){this._readyCapability.promise.then(()=>{for(const g of this._progressListeners)g(s,c)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const c of this._progressiveReadListeners)c(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,c){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(s,c){this._pdfInfo=s,this._transport=c,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(s){return this._transport.getPage(s)}getPageIndex(s){return this._transport.getPageIndex(s)}getDestinations(){return this._transport.getDestinations()}getDestination(s){return this._transport.getDestination(s)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(s=!1){return this._transport.startCleanup(s||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(s,c,g,ne,re=!1){this._pageIndex=s,this._pageInfo=c,this._ownerDocument=ne,this._transport=g,this._stats=re?new _display_utils.StatTimer:null,this._pdfBug=re,this.commonObjs=g.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:s,rotation:c=this.rotate,offsetX:g=0,offsetY:ne=0,dontFlip:re=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:s,rotation:c,offsetX:g,offsetY:ne,dontFlip:re})}getAnnotations({intent:s="display"}={}){const c=this._transport.getRenderingIntent(s);let g=this._annotationPromises.get(c.cacheKey);return g||(g=this._transport.getAnnotations(this._pageIndex,c.renderingIntent),this._annotationPromises.set(c.cacheKey,g),g=g.then(ne=>{for(const re of ne)re.titleObj!==void 0&&Object.defineProperty(re,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),re.titleObj.str}}),re.contentsObj!==void 0&&Object.defineProperty(re,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),re.contentsObj.str}});return ne})),g}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var s;return((s=this._transport._htmlForXfa)==null?void 0:s.children[this._pageIndex])||null}render({canvasContext:s,viewport:c,intent:g="display",annotationMode:ne=_util.AnnotationMode.ENABLE,transform:re=null,imageLayer:m=null,canvasFactory:o=null,background:h=null,optionalContentConfigPromise:Y=null,annotationCanvasMap:fe=null,pageColors:ae=null,printAnnotationStorage:Z=null}){var ke,Ne;((ke=arguments[0])==null?void 0:ke.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&ne===_util.AnnotationMode.ENABLE&&(ne=_util.AnnotationMode.ENABLE_FORMS)),((Ne=arguments[0])==null?void 0:Ne.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&ne===_util.AnnotationMode.ENABLE&&(ne=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const pe=this._transport.getRenderingIntent(g,ne,Z);this.pendingCleanup=!1,Y||(Y=this._transport.getOptionalContentConfig());let Ie=this._intentStates.get(pe.cacheKey);Ie||(Ie=Object.create(null),this._intentStates.set(pe.cacheKey,Ie)),Ie.streamReaderCancelTimeout&&(clearTimeout(Ie.streamReaderCancelTimeout),Ie.streamReaderCancelTimeout=null);const Ue=o||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),Me=!!(pe.renderingIntent&_util.RenderingIntentFlag.PRINT);Ie.displayReadyCapability||(Ie.displayReadyCapability=(0,_util.createPromiseCapability)(),Ie.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(pe));const Fe=He=>{Ie.renderTasks.delete(Pe),(this.cleanupAfterRender||Me)&&(this.pendingCleanup=!0),this._tryCleanup(),He?(Pe.capability.reject(He),this._abortOperatorList({intentState:Ie,reason:He instanceof Error?He:new Error(He)})):Pe.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},Pe=new InternalRenderTask({callback:Fe,params:{canvasContext:s,viewport:c,transform:re,imageLayer:m,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:fe,operatorList:Ie.operatorList,pageIndex:this._pageIndex,canvasFactory:Ue,useRequestAnimationFrame:!Me,pdfBug:this._pdfBug,pageColors:ae});(Ie.renderTasks||(Ie.renderTasks=new Set)).add(Pe);const xe=Pe.task;return Promise.all([Ie.displayReadyCapability.promise,Y]).then(([He,Ze])=>{if(this.pendingCleanup){Fe();return}this._stats&&this._stats.time("Rendering"),Pe.initializeGraphics({transparency:He,optionalContentConfig:Ze}),Pe.operatorListChanged()}).catch(Fe),xe}getOperatorList({intent:s="display",annotationMode:c=_util.AnnotationMode.ENABLE,printAnnotationStorage:g=null}={}){function ne(){m.operatorList.lastChunk&&(m.opListReadCapability.resolve(m.operatorList),m.renderTasks.delete(o))}const re=this._transport.getRenderingIntent(s,c,g,!0);let m=this._intentStates.get(re.cacheKey);m||(m=Object.create(null),this._intentStates.set(re.cacheKey,m));let o;return m.opListReadCapability||(o=Object.create(null),o.operatorListChanged=ne,m.opListReadCapability=(0,_util.createPromiseCapability)(),(m.renderTasks||(m.renderTasks=new Set)).add(o),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(re)),m.opListReadCapability.promise}streamTextContent({disableCombineTextItems:s=!1,includeMarkedContent:c=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:s!==!0,includeMarkedContent:c===!0},{highWaterMark:100,size(ne){return ne.items.length}})}getTextContent(s={}){if(this._transport._htmlForXfa)return this.getXfa().then(g=>_xfa_text.XfaText.textContent(g));const c=this.streamTextContent(s);return new Promise(function(g,ne){function re(){m.read().then(function({value:h,done:Y}){if(Y){g(o);return}Object.assign(o.styles,h.styles),o.items.push(...h.items),re()},ne)}const m=c.getReader(),o={items:[],styles:Object.create(null)};re()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const s=[];for(const c of this._intentStates.values())if(this._abortOperatorList({intentState:c,reason:new Error("Page was destroyed."),force:!0}),!c.opListReadCapability)for(const g of c.renderTasks)s.push(g.completed),g.cancel();this.objs.clear();for(const c of this._bitmaps)c.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(s)}cleanup(s=!1){return this.pendingCleanup=!0,this._tryCleanup(s)}_tryCleanup(s=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:c,operatorList:g}of this._intentStates.values())if(c.size>0||!g.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,s&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const c of this._bitmaps)c.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(s,c){const g=this._intentStates.get(c);g&&(this._stats&&this._stats.timeEnd("Page Request"),g.displayReadyCapability&&g.displayReadyCapability.resolve(s))}_renderPageChunk(s,c){for(let g=0,ne=s.length;g<ne;g++)c.operatorList.fnArray.push(s.fnArray[g]),c.operatorList.argsArray.push(s.argsArray[g]);c.operatorList.lastChunk=s.lastChunk,c.operatorList.separateAnnots=s.separateAnnots;for(const g of c.renderTasks)g.operatorListChanged();s.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:s,cacheKey:c,annotationStorageMap:g}){const re=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:c,annotationStorage:g}).getReader(),m=this._intentStates.get(c);m.streamReader=re;const o=()=>{re.read().then(({value:h,done:Y})=>{if(Y){m.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,m),o())},h=>{if(m.streamReader=null,!this._transport.destroyed){if(m.operatorList){m.operatorList.lastChunk=!0;for(const Y of m.renderTasks)Y.operatorListChanged();this._tryCleanup()}if(m.displayReadyCapability)m.displayReadyCapability.reject(h);else if(m.opListReadCapability)m.opListReadCapability.reject(h);else throw h}})};o()}_abortOperatorList({intentState:s,reason:c,force:g=!1}){if(s.streamReader){if(!g){if(s.renderTasks.size>0)return;if(c instanceof _display_utils.RenderingCancelledException){s.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:s,reason:c,force:!0}),s.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(s.streamReader.cancel(new _util.AbortException(c.message)).catch(()=>{}),s.streamReader=null,!this._transport.destroyed){for(const[ne,re]of this._intentStates)if(re===s){this._intentStates.delete(ne);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(s,c){const g={data:structuredClone(s,c)};this._deferred.then(()=>{for(const ne of this._listeners)ne.call(this,g)})}addEventListener(s,c){this._listeners.push(c)}removeEventListener(s,c){const g=this._listeners.indexOf(c);this._listeners.splice(g,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const _=(j=document==null?void 0:document.currentScript)==null?void 0:j.src;_&&(PDFWorkerUtil.fallbackWorkerSrc=_.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(_,s){let c;try{if(c=new URL(_),!c.origin||c.origin==="null")return!1}catch{return!1}const g=new URL(s,c);return c.origin===g.origin},PDFWorkerUtil.createCDNWrapper=function(_){const s=`importScripts("${_}");`;return URL.createObjectURL(new Blob([s]))}}const _PDFWorker=class _PDFWorker{constructor({name:_=null,port:s=null,verbosity:c=(0,_util.getVerbosityLevel)()}={}){if(s&&ge(_PDFWorker,e).has(s))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=_,this.destroyed=!1,this.verbosity=c,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,s){ge(_PDFWorker,e).set(s,this),this._initializeFromPort(s);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(_){this._port=_,this._messageHandler=new _message_handler.MessageHandler("main","worker",_),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:_}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,_)||(_=PDFWorkerUtil.createCDNWrapper(new URL(_,window.location).href));const s=new Worker(_),c=new _message_handler.MessageHandler("main","worker",s),g=()=>{s.removeEventListener("error",ne),c.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},ne=()=>{this._webWorker||g()};s.addEventListener("error",ne),c.on("test",m=>{if(s.removeEventListener("error",ne),this.destroyed){g();return}m?(this._messageHandler=c,this._port=s,this._webWorker=s,this._readyCapability.resolve(),c.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),c.destroy(),s.terminate())}),c.on("ready",m=>{if(s.removeEventListener("error",ne),this.destroyed){g();return}try{re()}catch{this._setupFakeWorker()}});const re=()=>{const m=new Uint8Array;c.send("test",m,[m.buffer])};re();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(_=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new LoopbackPort;this._port=s;const c=`fake${PDFWorkerUtil.fakeWorkerId++}`,g=new _message_handler.MessageHandler(c+"_worker",c,s);_.setup(g,s);const ne=new _message_handler.MessageHandler(c,c+"_worker",s);this._messageHandler=ne,this._readyCapability.resolve(),ne.send("configure",{verbosity:this.verbosity})}).catch(_=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${_.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),ge(_PDFWorker,e).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(_){if(!(_!=null&&_.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ge(this,e).has(_.port)?ge(this,e).get(_.port):new _PDFWorker(_)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var _;try{return((_=globalThis.pdfjsWorker)==null?void 0:_.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};e=new WeakMap,We(_PDFWorker,e,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(s,c,g,ne){We(this,a,null);We(this,oe,new Map);We(this,he,new Map);We(this,ie,null);this.messageHandler=s,this.loadingTask=c,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:c.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:ne.ownerDocument,styleElement:ne.styleElement}),this._params=ne,ne.useWorkerFetch||(this.CMapReaderFactory=new ne.CMapReaderFactory({baseUrl:ne.cMapUrl,isCompressed:ne.cMapPacked}),this.StandardFontDataFactory=new ne.StandardFontDataFactory({baseUrl:ne.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=g,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return ge(this,a)}getRenderingIntent(s,c=_util.AnnotationMode.ENABLE,g=null,ne=!1){let re=_util.RenderingIntentFlag.DISPLAY,m=null;switch(s){case"any":re=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":re=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${s}`)}switch(c){case _util.AnnotationMode.DISABLE:re+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:re+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:re+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,m=(re&_util.RenderingIntentFlag.PRINT&&g instanceof _annotation_storage.PrintAnnotationStorage?g:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${c}`)}return ne&&(re+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:re,cacheKey:`${re}_${_annotation_storage.AnnotationStorage.getHash(m)}`,annotationStorageMap:m}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const s=[];for(const g of ge(this,oe).values())s.push(g._destroy());ge(this,oe).clear(),ge(this,he).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const c=this.messageHandler.sendWithPromise("Terminate",null);return s.push(c),Promise.all(s).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Je(this,ie,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:s,loadingTask:c}=this;s.on("GetReader",(g,ne)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=re=>{this._lastProgress={loaded:re.loaded,total:re.total}},ne.onPull=()=>{this._fullReader.read().then(function({value:re,done:m}){if(m){ne.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(re),"GetReader - expected an ArrayBuffer."),ne.enqueue(new Uint8Array(re),1,[re])}).catch(re=>{ne.error(re)})},ne.onCancel=re=>{this._fullReader.cancel(re),ne.ready.catch(m=>{if(!this.destroyed)throw m})}}),s.on("ReaderHeadersReady",g=>{const ne=(0,_util.createPromiseCapability)(),re=this._fullReader;return re.headersReady.then(()=>{var m;(!re.isStreamingSupported||!re.isRangeSupported)&&(this._lastProgress&&((m=c.onProgress)==null||m.call(c,this._lastProgress)),re.onProgress=o=>{var h;(h=c.onProgress)==null||h.call(c,{loaded:o.loaded,total:o.total})}),ne.resolve({isStreamingSupported:re.isStreamingSupported,isRangeSupported:re.isRangeSupported,contentLength:re.contentLength})},ne.reject),ne.promise}),s.on("GetRangeReader",(g,ne)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const re=this._networkStream.getRangeReader(g.begin,g.end);if(!re){ne.close();return}ne.onPull=()=>{re.read().then(function({value:m,done:o}){if(o){ne.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(m),"GetRangeReader - expected an ArrayBuffer."),ne.enqueue(new Uint8Array(m),1,[m])}).catch(m=>{ne.error(m)})},ne.onCancel=m=>{re.cancel(m),ne.ready.catch(o=>{if(!this.destroyed)throw o})}}),s.on("GetDoc",({pdfInfo:g})=>{this._numPages=g.numPages,this._htmlForXfa=g.htmlForXfa,delete g.htmlForXfa,c._capability.resolve(new PDFDocumentProxy(g,this))}),s.on("DocException",function(g){let ne;switch(g.name){case"PasswordException":ne=new _util.PasswordException(g.message,g.code);break;case"InvalidPDFException":ne=new _util.InvalidPDFException(g.message);break;case"MissingPDFException":ne=new _util.MissingPDFException(g.message);break;case"UnexpectedResponseException":ne=new _util.UnexpectedResponseException(g.message,g.status);break;case"UnknownErrorException":ne=new _util.UnknownErrorException(g.message,g.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}c._capability.reject(ne)}),s.on("PasswordRequest",g=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),c.onPassword){const ne=re=>{re instanceof Error?this._passwordCapability.reject(re):this._passwordCapability.resolve({password:re})};try{c.onPassword(ne,g.code)}catch(re){this._passwordCapability.reject(re)}}else this._passwordCapability.reject(new _util.PasswordException(g.message,g.code));return this._passwordCapability.promise}),s.on("DataLoaded",g=>{var ne;(ne=c.onProgress)==null||ne.call(c,{loaded:g.length,total:g.length}),this.downloadInfoCapability.resolve(g)}),s.on("StartRenderPage",g=>{if(this.destroyed)return;ge(this,oe).get(g.pageIndex)._startRenderPage(g.transparency,g.cacheKey)}),s.on("commonobj",([g,ne,re])=>{var m;if(!this.destroyed&&!this.commonObjs.has(g))switch(ne){case"Font":const o=this._params;if("error"in re){const fe=re.error;(0,_util.warn)(`Error during font loading: ${fe}`),this.commonObjs.resolve(g,fe);break}let h=null;o.pdfBug&&((m=globalThis.FontInspector)!=null&&m.enabled)&&(h={registerFont(fe,ae){globalThis.FontInspector.fontAdded(fe,ae)}});const Y=new _font_loader.FontFaceObject(re,{isEvalSupported:o.isEvalSupported,disableFontFace:o.disableFontFace,ignoreErrors:o.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:h});this.fontLoader.bind(Y).catch(fe=>s.sendWithPromise("FontFallback",{id:g})).finally(()=>{!o.fontExtraProperties&&Y.data&&(Y.data=null),this.commonObjs.resolve(g,Y)});break;case"FontPath":case"Image":this.commonObjs.resolve(g,re);break;default:throw new Error(`Got unknown common object type ${ne}`)}}),s.on("obj",([g,ne,re,m])=>{var h;if(this.destroyed)return;const o=ge(this,oe).get(ne);if(!o.objs.has(g))switch(re){case"Image":o.objs.resolve(g,m);const Y=8e6;if(m){let fe;if(m.bitmap){const{bitmap:ae,width:Z,height:pe}=m;fe=Z*pe*4,o._bitmaps.add(ae)}else fe=((h=m.data)==null?void 0:h.length)||0;fe>Y&&(o.cleanupAfterRender=!0)}break;case"Pattern":o.objs.resolve(g,m);break;default:throw new Error(`Got unknown object type ${re}`)}}),s.on("DocProgress",g=>{var ne;this.destroyed||(ne=c.onProgress)==null||ne.call(c,{loaded:g.loaded,total:g.total})}),s.on("DocStats",g=>{this.destroyed||Je(this,a,Object.freeze({streamTypes:Object.freeze(g.streamTypes),fontTypes:Object.freeze(g.fontTypes)}))}),s.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),s.on("FetchBuiltInCMap",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(g):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),s.on("FetchStandardFontData",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(g):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:s}){var c,g;this.destroyed||(g=(c=this.loadingTask).onUnsupportedFeature)==null||g.call(c,s)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(s){if(!Number.isInteger(s)||s<=0||s>this._numPages)return Promise.reject(new Error("Invalid page request."));const c=s-1,g=ge(this,he).get(c);if(g)return g;const ne=this.messageHandler.sendWithPromise("GetPage",{pageIndex:c}).then(re=>{if(this.destroyed)throw new Error("Transport destroyed");const m=new PDFPageProxy(c,re,this,this._params.ownerDocument,this._params.pdfBug);return ge(this,oe).set(c,m),m});return ge(this,he).set(c,ne),ne}getPageIndex(s){return typeof s!="object"||s===null||!Number.isInteger(s.num)||s.num<0||!Number.isInteger(s.gen)||s.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:s.num,gen:s.gen})}getAnnotations(s,c){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:s,intent:c})}saveDocument(){var s;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((s=this._fullReader)==null?void 0:s.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(s){return typeof s!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:s})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(s){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:s})}getStructTree(s){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:s})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(s=>new _optional_content_config.OptionalContentConfig(s))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return ge(this,ie)||Je(this,ie,this.messageHandler.sendWithPromise("GetMetadata",null).then(s=>{var c,g;return{info:s[0],metadata:s[1]?new _metadata.Metadata(s[1]):null,contentDispositionFilename:((c=this._fullReader)==null?void 0:c.filename)??null,contentLength:((g=this._fullReader)==null?void 0:g.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(s=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const c of ge(this,oe).values())if(!c.cleanup())throw new Error(`startCleanup: Page ${c.pageNumber} is currently rendering.`);this.commonObjs.clear(),s||this.fontLoader.clear(),Je(this,ie,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const s=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:s.disableAutoFetch,enableXfa:s.enableXfa})}}a=new WeakMap,oe=new WeakMap,he=new WeakMap,ie=new WeakMap;class PDFObjects{constructor(){We(this,k);We(this,ee,Object.create(null))}get(s,c=null){if(c){const ne=Ge(this,k,qt).call(this,s);return ne.capability.promise.then(()=>c(ne.data)),null}const g=ge(this,ee)[s];if(!(g!=null&&g.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${s}.`);return g.data}has(s){const c=ge(this,ee)[s];return(c==null?void 0:c.capability.settled)||!1}resolve(s,c=null){const g=Ge(this,k,qt).call(this,s);g.data=c,g.capability.resolve()}clear(){Je(this,ee,Object.create(null))}}ee=new WeakMap,k=new WeakSet,qt=function(s){const c=ge(this,ee)[s];return c||(ge(this,ee)[s]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(s){We(this,ye,null);Je(this,ye,s),this.onContinue=null}get promise(){return ge(this,ye).capability.promise}cancel(){ge(this,ye).cancel()}get separateAnnots(){const{separateAnnots:s}=ge(this,ye).operatorList;if(!s)return!1;const{annotationCanvasMap:c}=ge(this,ye);return s.form||s.canvas&&(c==null?void 0:c.size)>0}}ye=new WeakMap,exports.RenderTask=RenderTask;const se=class se{constructor({callback:s,params:c,objs:g,commonObjs:ne,annotationCanvasMap:re,operatorList:m,pageIndex:o,canvasFactory:h,useRequestAnimationFrame:Y=!1,pdfBug:fe=!1,pageColors:ae=null}){this.callback=s,this.params=c,this.objs=g,this.commonObjs=ne,this.annotationCanvasMap=re,this.operatorListIdx=null,this.operatorList=m,this._pageIndex=o,this.canvasFactory=h,this._pdfBug=fe,this.pageColors=ae,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Y===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=c.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:s=!1,optionalContentConfig:c}){var h;if(this.cancelled)return;if(this._canvas){if(ge(se,le).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ge(se,le).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:g,viewport:ne,transform:re,imageLayer:m,background:o}=this.params;this.gfx=new _canvas.CanvasGraphics(g,this.commonObjs,this.objs,this.canvasFactory,m,c,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:re,viewport:ne,transparency:s,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(s=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&ge(se,le).delete(this._canvas),this.callback(s||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&ge(se,le).delete(this._canvas),this.callback())))}};le=new WeakMap,We(se,le,new WeakSet);let InternalRenderTask=se;const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(d,i,j)=>{var ee,an,ue;Object.defineProperty(i,"__esModule",{value:!0}),i.PrintAnnotationStorage=i.AnnotationStorage=void 0;var e=j(1),a=j(6),oe=j(10);class he{constructor(){We(this,ee);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(le,se){const _=this._storage.get(le);return _===void 0?se:Object.assign(se,_)}getRawValue(le){return this._storage.get(le)}remove(le){if(this._storage.delete(le),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const se of this._storage.values())if(se instanceof a.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(le,se){const _=this._storage.get(le);let s=!1;if(_!==void 0)for(const[c,g]of Object.entries(se))_[c]!==g&&(s=!0,_[c]=g);else s=!0,this._storage.set(le,se);s&&Ge(this,ee,an).call(this),se instanceof a.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(se.constructor._type)}has(le){return this._storage.has(le)}getAll(){return this._storage.size>0?(0,e.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ie(this)}get serializable(){if(this._storage.size===0)return null;const le=new Map;for(const[se,_]of this._storage){const s=_ instanceof a.AnnotationEditor?_.serialize():_;s&&le.set(se,s)}return le}static getHash(le){if(!le)return"";const se=new oe.MurmurHash3_64;for(const[_,s]of le)se.update(`${_}:${JSON.stringify(s)}`);return se.hexdigest()}}ee=new WeakSet,an=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},i.AnnotationStorage=he;class ie extends he{constructor(se){super();We(this,ue,null);Je(this,ue,structuredClone(se.serializable))}get print(){(0,e.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return ge(this,ue)}}ue=new WeakMap,i.PrintAnnotationStorage=ie},(d,i,j)=>{var he,ie,ee,k,ue,ye;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditor=void 0;var e=j(7),a=j(1);const le=class le{constructor(_){We(this,he,this.focusin.bind(this));We(this,ie,this.focusout.bind(this));We(this,ee,!1);We(this,k,!1);We(this,ue,!1);We(this,ye,le._zIndex++);this.constructor===le&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=_.parent,this.id=_.id,this.width=this.height=null,this.pageIndex=_.parent.pageIndex,this.name=_.name,this.div=null;const[s,c]=this.parent.viewportBaseDimensions;this.x=_.x/s,this.y=_.y/c,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=ge(this,ye)}focusin(_){ge(this,ee)?Je(this,ee,!1):this.parent.setSelected(this)}focusout(_){if(!this.isAttachedToDOM)return;const s=_.relatedTarget;s!=null&&s.closest(`#${this.id}`)||(_.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(_){const s=this.parent.div.getBoundingClientRect();this.startX=_.clientX-s.x,this.startY=_.clientY-s.y,_.dataTransfer.setData("text/plain",this.id),_.dataTransfer.effectAllowed="move"}setAt(_,s,c,g){const[ne,re]=this.parent.viewportBaseDimensions;[c,g]=this.screenToPageTranslation(c,g),this.x=(_+c)/ne,this.y=(s+g)/re,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(_,s){const[c,g]=this.parent.viewportBaseDimensions;[_,s]=this.screenToPageTranslation(_,s),this.x+=_/c,this.y+=s/g,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(_,s){const{rotation:c}=this.parent.viewport;switch(c){case 90:return[s,-_];case 180:return[-_,-s];case 270:return[-s,_];default:return[_,s]}}setDims(_,s){const[c,g]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*_/c}%`,this.div.style.height=`${100*s/g}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",ge(this,he)),this.div.addEventListener("focusout",ge(this,ie));const[_,s]=this.getInitialTranslation();return this.translate(_,s),(0,e.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(_){const s=e.KeyboardManager.platform.isMac;if(_.button!==0||_.ctrlKey&&s){_.preventDefault();return}_.ctrlKey&&!s||_.shiftKey||_.metaKey&&s?this.parent.toggleSelected(this):this.parent.setSelected(this),Je(this,ee,!0)}getRect(_,s){const[c,g]=this.parent.viewportBaseDimensions,[ne,re]=this.parent.pageDimensions,m=ne*_/c,o=re*s/g,h=this.x*ne,Y=this.y*re,fe=this.width*ne,ae=this.height*re;switch(this.rotation){case 0:return[h+m,re-Y-o-ae,h+m+fe,re-Y-o];case 90:return[h+o,re-Y+m,h+o+ae,re-Y+m+fe];case 180:return[h-m-fe,re-Y+o,h-m,re-Y+o+ae];case 270:return[h-o-ae,re-Y-m-fe,h-o,re-Y-m];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(_,s){const[c,g,ne,re]=_,m=ne-c,o=re-g;switch(this.rotation){case 0:return[c,s-re,m,o];case 90:return[c,s-g,o,m];case 180:return[ne,s-g,m,o];case 270:return[ne,s-re,o,m];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Je(this,ue,!0)}disableEditMode(){Je(this,ue,!1)}isInEditMode(){return ge(this,ue)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var _;(_=this.div)==null||_.addEventListener("focusin",ge(this,he))}serialize(){(0,a.unreachable)("An editor must be serializable")}static deserialize(_,s){const c=new this.prototype.constructor({parent:s,id:s.getNextId()});c.rotation=_.rotation;const[g,ne]=s.pageDimensions,[re,m,o,h]=c.getRectInCurrentCoords(_.rect,ne);return c.x=re/g,c.y=m/ne,c.width=o/g,c.height=h/ne,c}remove(){this.div.removeEventListener("focusin",ge(this,he)),this.div.removeEventListener("focusout",ge(this,ie)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var _;(_=this.div)==null||_.classList.add("selectedEditor")}unselect(){var _;(_=this.div)==null||_.classList.remove("selectedEditor")}updateParams(_,s){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return ge(this,k)}set isEditing(_){Je(this,k,_),_?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};he=new WeakMap,ie=new WeakMap,ee=new WeakMap,k=new WeakMap,ue=new WeakMap,ye=new WeakMap,ft(le,"_colorManager",new e.ColorManager),ft(le,"_zIndex",1);let oe=le;i.AnnotationEditor=oe},(d,i,j)=>{var se,_,s,c,g,ne,on,o,Y,fe,ae,Z,pe,Ie,Ue,Me,Fe,Pe,xe,ke,Ne,He,Ze,Se,$,b,ln,be,$t,Ae,At,Re,Ot,X,cn,ce,un,Ee,Ht,ze,Mt,qe,It;Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardManager=i.CommandManager=i.ColorManager=i.AnnotationEditorUIManager=void 0,i.bindEvents=oe,i.opacityToHex=he;var e=j(1),a=j(8);function oe(Xe,_e,Ve){for(const et of Ve)_e.addEventListener(et,Xe[et].bind(Xe))}function he(Xe){return Math.round(Math.min(255,Math.max(1,255*Xe))).toString(16).padStart(2,"0")}class ie{constructor(){We(this,se,0)}getId(){return`${e.AnnotationEditorPrefix}${Wt(this,se)._++}`}}se=new WeakMap;class ee{constructor(_e=128){We(this,_,[]);We(this,s,!1);We(this,c,void 0);We(this,g,-1);Je(this,c,_e)}add({cmd:_e,undo:Ve,mustExec:et,type:nt=NaN,overwriteIfSameType:it=!1,keepUndo:ot=!1}){if(et&&_e(),ge(this,s))return;const dt={cmd:_e,undo:Ve,type:nt};if(ge(this,g)===-1){ge(this,_).length>0&&(ge(this,_).length=0),Je(this,g,0),ge(this,_).push(dt);return}if(it&&ge(this,_)[ge(this,g)].type===nt){ot&&(dt.undo=ge(this,_)[ge(this,g)].undo),ge(this,_)[ge(this,g)]=dt;return}const ht=ge(this,g)+1;ht===ge(this,c)?ge(this,_).splice(0,1):(Je(this,g,ht),ht<ge(this,_).length&&ge(this,_).splice(ht)),ge(this,_).push(dt)}undo(){ge(this,g)!==-1&&(Je(this,s,!0),ge(this,_)[ge(this,g)].undo(),Je(this,s,!1),Je(this,g,ge(this,g)-1))}redo(){ge(this,g)<ge(this,_).length-1&&(Je(this,g,ge(this,g)+1),Je(this,s,!0),ge(this,_)[ge(this,g)].cmd(),Je(this,s,!1))}hasSomethingToUndo(){return ge(this,g)!==-1}hasSomethingToRedo(){return ge(this,g)<ge(this,_).length-1}destroy(){Je(this,_,null)}}_=new WeakMap,s=new WeakMap,c=new WeakMap,g=new WeakMap,i.CommandManager=ee;const m=class m{constructor(_e){We(this,ne);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const Ve=m.platform.isMac;for(const[et,nt]of _e)for(const it of et){const ot=it.startsWith("mac+");Ve&&ot?(this.callbacks.set(it.slice(4),nt),this.allKeys.add(it.split("+").at(-1))):!Ve&&!ot&&(this.callbacks.set(it,nt),this.allKeys.add(it.split("+").at(-1)))}}static get platform(){const _e=typeof navigator<"u"?navigator.platform:"";return(0,e.shadow)(this,"platform",{isWin:_e.includes("Win"),isMac:_e.includes("Mac")})}exec(_e,Ve){if(!this.allKeys.has(Ve.key))return;const et=this.callbacks.get(Ge(this,ne,on).call(this,Ve));et&&(et.bind(_e)(),Ve.stopPropagation(),Ve.preventDefault())}};ne=new WeakSet,on=function(_e){_e.altKey&&this.buffer.push("alt"),_e.ctrlKey&&this.buffer.push("ctrl"),_e.metaKey&&this.buffer.push("meta"),_e.shiftKey&&this.buffer.push("shift"),this.buffer.push(_e.key);const Ve=this.buffer.join("+");return this.buffer.length=0,Ve};let k=m;i.KeyboardManager=k;class ue{constructor(){We(this,o,null)}copy(_e){_e&&(Array.isArray(_e)?Je(this,o,_e.map(Ve=>Ve.serialize())):Je(this,o,[_e.serialize()]),Je(this,o,ge(this,o).filter(Ve=>!!Ve)),ge(this,o).length===0&&Je(this,o,null))}paste(){return ge(this,o)}isEmpty(){return ge(this,o)===null}destroy(){Je(this,o,null)}}o=new WeakMap;const h=class h{get _colors(){const _e=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(_e),(0,e.shadow)(this,"_colors",_e)}convert(_e){const Ve=(0,a.getRGB)(_e);if(!window.matchMedia("(forced-colors: active)").matches)return Ve;for(const[et,nt]of this._colors)if(nt.every((it,ot)=>it===Ve[ot]))return h._colorsMapping.get(et);return Ve}getHexCode(_e){const Ve=this._colors.get(_e);return Ve?e.Util.makeHexColor(...Ve):_e}};ft(h,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ye=h;i.ColorManager=ye;const $e=class $e{constructor(_e,Ve){We(this,b);We(this,be);We(this,Ae);We(this,Re);We(this,X);We(this,ce);We(this,Ee);We(this,ze);We(this,qe);We(this,Y,null);We(this,fe,new Map);We(this,ae,new Map);We(this,Z,new ue);We(this,pe,new ee);We(this,Ie,0);We(this,Ue,null);We(this,Me,null);We(this,Fe,new ie);We(this,Pe,!1);We(this,xe,e.AnnotationEditorType.NONE);We(this,ke,new Set);We(this,Ne,this.keydown.bind(this));We(this,He,this.onEditingAction.bind(this));We(this,Ze,this.onPageChanging.bind(this));We(this,Se,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});We(this,$,null);Je(this,$,_e),Je(this,Me,Ve),ge(this,Me)._on("editingaction",ge(this,He)),ge(this,Me)._on("pagechanging",ge(this,Ze))}destroy(){Ge(this,be,$t).call(this),ge(this,Me)._off("editingaction",ge(this,He)),ge(this,Me)._off("pagechanging",ge(this,Ze));for(const _e of ge(this,ae).values())_e.destroy();ge(this,ae).clear(),ge(this,fe).clear(),Je(this,Y,null),ge(this,ke).clear(),ge(this,Z).destroy(),ge(this,pe).destroy()}onPageChanging({pageNumber:_e}){Je(this,Ie,_e-1)}focusMainContainer(){ge(this,$).focus()}keydown(_e){var Ve;(Ve=this.getActive())!=null&&Ve.shouldGetKeyboardEvents()||$e._keyboardManager.exec(this,_e)}onEditingAction(_e){["undo","redo","cut","copy","paste","delete","selectAll"].includes(_e.name)&&this[_e.name]()}setEditingState(_e){_e?(Ge(this,b,ln).call(this),Ge(this,Ae,At).call(this,{isEditing:ge(this,xe)!==e.AnnotationEditorType.NONE,isEmpty:Ge(this,ze,Mt).call(this),hasSomethingToUndo:ge(this,pe).hasSomethingToUndo(),hasSomethingToRedo:ge(this,pe).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:ge(this,Z).isEmpty()})):(Ge(this,be,$t).call(this),Ge(this,Ae,At).call(this,{isEditing:!1}))}registerEditorTypes(_e){Je(this,Ue,_e);for(const Ve of ge(this,Ue))Ge(this,Re,Ot).call(this,Ve.defaultPropertiesToUpdate)}getId(){return ge(this,Fe).getId()}addLayer(_e){ge(this,ae).set(_e.pageIndex,_e),ge(this,Pe)?_e.enable():_e.disable()}removeLayer(_e){ge(this,ae).delete(_e.pageIndex)}updateMode(_e){if(Je(this,xe,_e),_e===e.AnnotationEditorType.NONE)this.setEditingState(!1),Ge(this,ce,un).call(this);else{this.setEditingState(!0),Ge(this,X,cn).call(this);for(const Ve of ge(this,ae).values())Ve.updateMode(_e)}}updateToolbar(_e){_e!==ge(this,xe)&&ge(this,Me).dispatch("switchannotationeditormode",{source:this,mode:_e})}updateParams(_e,Ve){for(const et of ge(this,ke))et.updateParams(_e,Ve);for(const et of ge(this,Ue))et.updateDefaultParams(_e,Ve)}getEditors(_e){const Ve=[];for(const et of ge(this,fe).values())et.pageIndex===_e&&Ve.push(et);return Ve}getEditor(_e){return ge(this,fe).get(_e)}addEditor(_e){ge(this,fe).set(_e.id,_e)}removeEditor(_e){ge(this,fe).delete(_e.id),this.unselect(_e)}setActiveEditor(_e){ge(this,Y)!==_e&&(Je(this,Y,_e),_e&&Ge(this,Re,Ot).call(this,_e.propertiesToUpdate))}toggleSelected(_e){if(ge(this,ke).has(_e)){ge(this,ke).delete(_e),_e.unselect(),Ge(this,Ae,At).call(this,{hasSelectedEditor:this.hasSelection});return}ge(this,ke).add(_e),_e.select(),Ge(this,Re,Ot).call(this,_e.propertiesToUpdate),Ge(this,Ae,At).call(this,{hasSelectedEditor:!0})}setSelected(_e){for(const Ve of ge(this,ke))Ve!==_e&&Ve.unselect();ge(this,ke).clear(),ge(this,ke).add(_e),_e.select(),Ge(this,Re,Ot).call(this,_e.propertiesToUpdate),Ge(this,Ae,At).call(this,{hasSelectedEditor:!0})}isSelected(_e){return ge(this,ke).has(_e)}unselect(_e){_e.unselect(),ge(this,ke).delete(_e),Ge(this,Ae,At).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return ge(this,ke).size!==0}undo(){ge(this,pe).undo(),Ge(this,Ae,At).call(this,{hasSomethingToUndo:ge(this,pe).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Ge(this,ze,Mt).call(this)})}redo(){ge(this,pe).redo(),Ge(this,Ae,At).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:ge(this,pe).hasSomethingToRedo(),isEmpty:Ge(this,ze,Mt).call(this)})}addCommands(_e){ge(this,pe).add(_e),Ge(this,Ae,At).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Ge(this,ze,Mt).call(this)})}delete(){if(ge(this,Y)&&ge(this,Y).commitOrRemove(),!this.hasSelection)return;const _e=[...ge(this,ke)],Ve=()=>{for(const nt of _e)nt.remove()},et=()=>{for(const nt of _e)Ge(this,Ee,Ht).call(this,nt)};this.addCommands({cmd:Ve,undo:et,mustExec:!0})}copy(){if(ge(this,Y)&&ge(this,Y).commitOrRemove(),this.hasSelection){const _e=[];for(const Ve of ge(this,ke))Ve.isEmpty()||_e.push(Ve);if(_e.length===0)return;ge(this,Z).copy(_e),Ge(this,Ae,At).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(ge(this,Z).isEmpty())return;this.unselectAll();const _e=ge(this,ae).get(ge(this,Ie)),Ve=ge(this,Z).paste().map(it=>_e.deserialize(it)),et=()=>{for(const it of Ve)Ge(this,Ee,Ht).call(this,it);Ge(this,qe,It).call(this,Ve)},nt=()=>{for(const it of Ve)it.remove()};this.addCommands({cmd:et,undo:nt,mustExec:!0})}selectAll(){for(const _e of ge(this,ke))_e.commit();Ge(this,qe,It).call(this,ge(this,fe).values())}unselectAll(){if(ge(this,Y)){ge(this,Y).commitOrRemove();return}if(Ge(this,qe,It).size!==0){for(const _e of ge(this,ke))_e.unselect();ge(this,ke).clear(),Ge(this,Ae,At).call(this,{hasSelectedEditor:!1})}}isActive(_e){return ge(this,Y)===_e}getActive(){return ge(this,Y)}getMode(){return ge(this,xe)}};Y=new WeakMap,fe=new WeakMap,ae=new WeakMap,Z=new WeakMap,pe=new WeakMap,Ie=new WeakMap,Ue=new WeakMap,Me=new WeakMap,Fe=new WeakMap,Pe=new WeakMap,xe=new WeakMap,ke=new WeakMap,Ne=new WeakMap,He=new WeakMap,Ze=new WeakMap,Se=new WeakMap,$=new WeakMap,b=new WeakSet,ln=function(){ge(this,$).addEventListener("keydown",ge(this,Ne))},be=new WeakSet,$t=function(){ge(this,$).removeEventListener("keydown",ge(this,Ne))},Ae=new WeakSet,At=function(_e){Object.entries(_e).some(([et,nt])=>ge(this,Se)[et]!==nt)&&ge(this,Me).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(ge(this,Se),_e)})},Re=new WeakSet,Ot=function(_e){ge(this,Me).dispatch("annotationeditorparamschanged",{source:this,details:_e})},X=new WeakSet,cn=function(){if(!ge(this,Pe)){Je(this,Pe,!0);for(const _e of ge(this,ae).values())_e.enable()}},ce=new WeakSet,un=function(){if(this.unselectAll(),ge(this,Pe)){Je(this,Pe,!1);for(const _e of ge(this,ae).values())_e.disable()}},Ee=new WeakSet,Ht=function(_e){const Ve=ge(this,ae).get(_e.pageIndex);Ve?Ve.addOrRebuild(_e):this.addEditor(_e)},ze=new WeakSet,Mt=function(){if(ge(this,fe).size===0)return!0;if(ge(this,fe).size===1)for(const _e of ge(this,fe).values())return _e.isEmpty();return!1},qe=new WeakSet,It=function(_e){ge(this,ke).clear();for(const Ve of _e)Ve.isEmpty()||(ge(this,ke).add(Ve),Ve.select());Ge(this,Ae,At).call(this,{hasSelectedEditor:!0})},ft($e,"_keyboardManager",new k([[["ctrl+a","mac+meta+a"],$e.prototype.selectAll],[["ctrl+c","mac+meta+c"],$e.prototype.copy],[["ctrl+v","mac+meta+v"],$e.prototype.paste],[["ctrl+x","mac+meta+x"],$e.prototype.cut],[["ctrl+z","mac+meta+z"],$e.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],$e.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],$e.prototype.delete],[["Escape","mac+Escape"],$e.prototype.unselectAll]]));let le=$e;i.AnnotationEditorUIManager=le},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.StatTimer=i.RenderingCancelledException=i.PixelsPerInch=i.PageViewport=i.PDFDateString=i.DOMStandardFontDataFactory=i.DOMSVGFactory=i.DOMCanvasFactory=i.DOMCMapReaderFactory=i.AnnotationPrefix=void 0,i.deprecated=h,i.getColorValues=pe,i.getCurrentTransform=Ie,i.getCurrentTransformInverse=Ue,i.getFilenameFromUrl=g,i.getPdfFilenameFromUrl=ne,i.getRGB=Z,i.getXfaPageViewport=ae,i.isDataScheme=s,i.isPdfFile=c,i.isValidFetchUrl=m,i.loadScript=o;var e=j(9),a=j(1);const oe="http://www.w3.org/2000/svg",he="pdfjs_internal_id_";i.AnnotationPrefix=he;const Me=class Me{};ft(Me,"CSS",96),ft(Me,"PDF",72),ft(Me,"PDF_TO_CSS_UNITS",Me.CSS/Me.PDF);let ie=Me;i.PixelsPerInch=ie;class ee extends e.BaseCanvasFactory{constructor({ownerDocument:Pe=globalThis.document}={}){super(),this._document=Pe}_createCanvas(Pe,xe){const ke=this._document.createElement("canvas");return ke.width=Pe,ke.height=xe,ke}}i.DOMCanvasFactory=ee;async function k(Fe,Pe=!1){if(m(Fe,document.baseURI)){const xe=await fetch(Fe);if(!xe.ok)throw new Error(xe.statusText);return Pe?new Uint8Array(await xe.arrayBuffer()):(0,a.stringToBytes)(await xe.text())}return new Promise((xe,ke)=>{const Ne=new XMLHttpRequest;Ne.open("GET",Fe,!0),Pe&&(Ne.responseType="arraybuffer"),Ne.onreadystatechange=()=>{if(Ne.readyState===XMLHttpRequest.DONE){if(Ne.status===200||Ne.status===0){let He;if(Pe&&Ne.response?He=new Uint8Array(Ne.response):!Pe&&Ne.responseText&&(He=(0,a.stringToBytes)(Ne.responseText)),He){xe(He);return}}ke(new Error(Ne.statusText))}},Ne.send(null)})}class ue extends e.BaseCMapReaderFactory{_fetchData(Pe,xe){return k(Pe,this.isCompressed).then(ke=>({cMapData:ke,compressionType:xe}))}}i.DOMCMapReaderFactory=ue;class ye extends e.BaseStandardFontDataFactory{_fetchData(Pe){return k(Pe,!0)}}i.DOMStandardFontDataFactory=ye;class le extends e.BaseSVGFactory{_createSVG(Pe){return document.createElementNS(oe,Pe)}}i.DOMSVGFactory=le;class se{constructor({viewBox:Pe,scale:xe,rotation:ke,offsetX:Ne=0,offsetY:He=0,dontFlip:Ze=!1}){this.viewBox=Pe,this.scale=xe,this.rotation=ke,this.offsetX=Ne,this.offsetY=He;const Se=(Pe[2]+Pe[0])/2,$=(Pe[3]+Pe[1])/2;let b,de,be,ve;switch(ke%=360,ke<0&&(ke+=360),ke){case 180:b=-1,de=0,be=0,ve=1;break;case 90:b=0,de=1,be=1,ve=0;break;case 270:b=0,de=-1,be=-1,ve=0;break;case 0:b=1,de=0,be=0,ve=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ze&&(be=-be,ve=-ve);let Ae,we,Re,f;b===0?(Ae=Math.abs($-Pe[1])*xe+Ne,we=Math.abs(Se-Pe[0])*xe+He,Re=Math.abs(Pe[3]-Pe[1])*xe,f=Math.abs(Pe[2]-Pe[0])*xe):(Ae=Math.abs(Se-Pe[0])*xe+Ne,we=Math.abs($-Pe[1])*xe+He,Re=Math.abs(Pe[2]-Pe[0])*xe,f=Math.abs(Pe[3]-Pe[1])*xe),this.transform=[b*xe,de*xe,be*xe,ve*xe,Ae-b*xe*Se-be*xe*$,we-de*xe*Se-ve*xe*$],this.width=Re,this.height=f}clone({scale:Pe=this.scale,rotation:xe=this.rotation,offsetX:ke=this.offsetX,offsetY:Ne=this.offsetY,dontFlip:He=!1}={}){return new se({viewBox:this.viewBox.slice(),scale:Pe,rotation:xe,offsetX:ke,offsetY:Ne,dontFlip:He})}convertToViewportPoint(Pe,xe){return a.Util.applyTransform([Pe,xe],this.transform)}convertToViewportRectangle(Pe){const xe=a.Util.applyTransform([Pe[0],Pe[1]],this.transform),ke=a.Util.applyTransform([Pe[2],Pe[3]],this.transform);return[xe[0],xe[1],ke[0],ke[1]]}convertToPdfPoint(Pe,xe){return a.Util.applyInverseTransform([Pe,xe],this.transform)}}i.PageViewport=se;class _ extends a.BaseException{constructor(Pe,xe){super(Pe,"RenderingCancelledException"),this.type=xe}}i.RenderingCancelledException=_;function s(Fe){const Pe=Fe.length;let xe=0;for(;xe<Pe&&Fe[xe].trim()==="";)xe++;return Fe.substring(xe,xe+5).toLowerCase()==="data:"}function c(Fe){return typeof Fe=="string"&&/\.pdf$/i.test(Fe)}function g(Fe){const Pe=Fe.indexOf("#"),xe=Fe.indexOf("?"),ke=Math.min(Pe>0?Pe:Fe.length,xe>0?xe:Fe.length);return Fe.substring(Fe.lastIndexOf("/",ke)+1,ke)}function ne(Fe,Pe="document.pdf"){if(typeof Fe!="string")return Pe;if(s(Fe))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Pe;const xe=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ke=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Ne=xe.exec(Fe);let He=ke.exec(Ne[1])||ke.exec(Ne[2])||ke.exec(Ne[3]);if(He&&(He=He[0],He.includes("%")))try{He=ke.exec(decodeURIComponent(He))[0]}catch{}return He||Pe}class re{constructor(){this.started=Object.create(null),this.times=[]}time(Pe){Pe in this.started&&(0,a.warn)(`Timer is already running for ${Pe}`),this.started[Pe]=Date.now()}timeEnd(Pe){Pe in this.started||(0,a.warn)(`Timer has not been started for ${Pe}`),this.times.push({name:Pe,start:this.started[Pe],end:Date.now()}),delete this.started[Pe]}toString(){const Pe=[];let xe=0;for(const ke of this.times){const Ne=ke.name;Ne.length>xe&&(xe=Ne.length)}for(const ke of this.times){const Ne=ke.end-ke.start;Pe.push(`${ke.name.padEnd(xe)} ${Ne}ms
`)}return Pe.join("")}}i.StatTimer=re;function m(Fe,Pe){try{const{protocol:xe}=Pe?new URL(Fe,Pe):new URL(Fe);return xe==="http:"||xe==="https:"}catch{return!1}}function o(Fe,Pe=!1){return new Promise((xe,ke)=>{const Ne=document.createElement("script");Ne.src=Fe,Ne.onload=function(He){Pe&&Ne.remove(),xe(He)},Ne.onerror=function(){ke(new Error(`Cannot load script at: ${Ne.src}`))},(document.head||document.documentElement).append(Ne)})}function h(Fe){console.log("Deprecated API usage: "+Fe)}let Y;class fe{static toDateObject(Pe){if(!Pe||typeof Pe!="string")return null;Y||(Y=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const xe=Y.exec(Pe);if(!xe)return null;const ke=parseInt(xe[1],10);let Ne=parseInt(xe[2],10);Ne=Ne>=1&&Ne<=12?Ne-1:0;let He=parseInt(xe[3],10);He=He>=1&&He<=31?He:1;let Ze=parseInt(xe[4],10);Ze=Ze>=0&&Ze<=23?Ze:0;let Se=parseInt(xe[5],10);Se=Se>=0&&Se<=59?Se:0;let $=parseInt(xe[6],10);$=$>=0&&$<=59?$:0;const b=xe[7]||"Z";let de=parseInt(xe[8],10);de=de>=0&&de<=23?de:0;let be=parseInt(xe[9],10)||0;return be=be>=0&&be<=59?be:0,b==="-"?(Ze+=de,Se+=be):b==="+"&&(Ze-=de,Se-=be),new Date(Date.UTC(ke,Ne,He,Ze,Se,$))}}i.PDFDateString=fe;function ae(Fe,{scale:Pe=1,rotation:xe=0}){const{width:ke,height:Ne}=Fe.attributes.style,He=[0,0,parseInt(ke),parseInt(Ne)];return new se({viewBox:He,scale:Pe,rotation:xe})}function Z(Fe){if(Fe.startsWith("#")){const Pe=parseInt(Fe.slice(1),16);return[(Pe&16711680)>>16,(Pe&65280)>>8,Pe&255]}return Fe.startsWith("rgb(")?Fe.slice(4,-1).split(",").map(Pe=>parseInt(Pe)):Fe.startsWith("rgba(")?Fe.slice(5,-1).split(",").map(Pe=>parseInt(Pe)).slice(0,3):((0,a.warn)(`Not a valid color format: "${Fe}"`),[0,0,0])}function pe(Fe){const Pe=document.createElement("span");Pe.style.visibility="hidden",document.body.append(Pe);for(const xe of Fe.keys()){Pe.style.color=xe;const ke=window.getComputedStyle(Pe).color;Fe.set(xe,Z(ke))}Pe.remove()}function Ie(Fe){const{a:Pe,b:xe,c:ke,d:Ne,e:He,f:Ze}=Fe.getTransform();return[Pe,xe,ke,Ne,He,Ze]}function Ue(Fe){const{a:Pe,b:xe,c:ke,d:Ne,e:He,f:Ze}=Fe.getTransform().invertSelf();return[Pe,xe,ke,Ne,He,Ze]}},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseStandardFontDataFactory=i.BaseSVGFactory=i.BaseCanvasFactory=i.BaseCMapReaderFactory=void 0;var e=j(1);class a{constructor(){this.constructor===a&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(k,ue){if(k<=0||ue<=0)throw new Error("Invalid canvas size");const ye=this._createCanvas(k,ue);return{canvas:ye,context:ye.getContext("2d")}}reset(k,ue,ye){if(!k.canvas)throw new Error("Canvas is not specified");if(ue<=0||ye<=0)throw new Error("Invalid canvas size");k.canvas.width=ue,k.canvas.height=ye}destroy(k){if(!k.canvas)throw new Error("Canvas is not specified");k.canvas.width=0,k.canvas.height=0,k.canvas=null,k.context=null}_createCanvas(k,ue){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}i.BaseCanvasFactory=a;class oe{constructor({baseUrl:k=null,isCompressed:ue=!1}){this.constructor===oe&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=k,this.isCompressed=ue}async fetch({name:k}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!k)throw new Error("CMap name must be specified.");const ue=this.baseUrl+k+(this.isCompressed?".bcmap":""),ye=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return this._fetchData(ue,ye).catch(le=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${ue}`)})}_fetchData(k,ue){(0,e.unreachable)("Abstract method `_fetchData` called.")}}i.BaseCMapReaderFactory=oe;class he{constructor({baseUrl:k=null}){this.constructor===he&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=k}async fetch({filename:k}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!k)throw new Error("Font filename must be specified.");const ue=`${this.baseUrl}${k}`;return this._fetchData(ue).catch(ye=>{throw new Error(`Unable to load font data at: ${ue}`)})}_fetchData(k){(0,e.unreachable)("Abstract method `_fetchData` called.")}}i.BaseStandardFontDataFactory=he;class ie{constructor(){this.constructor===ie&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(k,ue,ye=!1){if(k<=0||ue<=0)throw new Error("Invalid SVG dimensions");const le=this._createSVG("svg:svg");return le.setAttribute("version","1.1"),ye||(le.setAttribute("width",`${k}px`),le.setAttribute("height",`${ue}px`)),le.setAttribute("preserveAspectRatio","none"),le.setAttribute("viewBox",`0 0 ${k} ${ue}`),le}createElement(k){if(typeof k!="string")throw new Error("Invalid SVG element type");return this._createSVG(k)}_createSVG(k){(0,e.unreachable)("Abstract method `_createSVG` called.")}}i.BaseSVGFactory=ie},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MurmurHash3_64=void 0;var e=j(1);const a=3285377520,oe=4294901760,he=65535;class ie{constructor(k){this.h1=k?k&4294967295:a,this.h2=k?k&4294967295:a}update(k){let ue,ye;if(typeof k=="string"){ue=new Uint8Array(k.length*2),ye=0;for(let Y=0,fe=k.length;Y<fe;Y++){const ae=k.charCodeAt(Y);ae<=255?ue[ye++]=ae:(ue[ye++]=ae>>>8,ue[ye++]=ae&255)}}else if((0,e.isArrayBuffer)(k))ue=k.slice(),ye=ue.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const le=ye>>2,se=ye-le*4,_=new Uint32Array(ue.buffer,0,le);let s=0,c=0,g=this.h1,ne=this.h2;const re=3432918353,m=461845907,o=re&he,h=m&he;for(let Y=0;Y<le;Y++)Y&1?(s=_[Y],s=s*re&oe|s*o&he,s=s<<15|s>>>17,s=s*m&oe|s*h&he,g^=s,g=g<<13|g>>>19,g=g*5+3864292196):(c=_[Y],c=c*re&oe|c*o&he,c=c<<15|c>>>17,c=c*m&oe|c*h&he,ne^=c,ne=ne<<13|ne>>>19,ne=ne*5+3864292196);switch(s=0,se){case 3:s^=ue[le*4+2]<<16;case 2:s^=ue[le*4+1]<<8;case 1:s^=ue[le*4],s=s*re&oe|s*o&he,s=s<<15|s>>>17,s=s*m&oe|s*h&he,le&1?g^=s:ne^=s}this.h1=g,this.h2=ne}hexdigest(){let k=this.h1,ue=this.h2;k^=ue>>>1,k=k*3981806797&oe|k*36045&he,ue=ue*4283543511&oe|((ue<<16|k>>>16)*2950163797&oe)>>>16,k^=ue>>>1,k=k*444984403&oe|k*60499&he,ue=ue*3301882366&oe|((ue<<16|k>>>16)*3120437893&oe)>>>16,k^=ue>>>1;const ye=(k>>>0).toString(16),le=(ue>>>0).toString(16);return ye.padStart(8,"0")+le.padStart(8,"0")}}i.MurmurHash3_64=ie},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FontLoader=i.FontFaceObject=void 0;var e=j(1);class a{constructor({docId:ee,onUnsupportedFeature:k,ownerDocument:ue=globalThis.document,styleElement:ye=null}){this.constructor===a&&(0,e.unreachable)("Cannot initialize BaseFontLoader."),this.docId=ee,this._onUnsupportedFeature=k,this._document=ue,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(ee){this.nativeFontFaces.push(ee),this._document.fonts.add(ee)}insertRule(ee){let k=this.styleElement;k||(k=this.styleElement=this._document.createElement("style"),k.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(k));const ue=k.sheet;ue.insertRule(ee,ue.cssRules.length)}clear(){for(const ee of this.nativeFontFaces)this._document.fonts.delete(ee);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(ee){if(ee.attached||ee.missingFile)return;if(ee.attached=!0,this.isFontLoadingAPISupported){const ue=ee.createNativeFontFace();if(ue){this.addNativeFontFace(ue);try{await ue.loaded}catch(ye){throw this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,e.warn)(`Failed to load font '${ue.family}': '${ye}'.`),ee.disableFontFace=!0,ye}}return}const k=ee.createFontFaceRule();if(k){if(this.insertRule(k),this.isSyncFontLoadingSupported)return;await new Promise(ue=>{const ye=this._queueLoadingCallback(ue);this._prepareFontLoadEvent([k],[ee],ye)})}}_queueLoadingCallback(ee){(0,e.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var k;const ee=!!((k=this._document)!=null&&k.fonts);return(0,e.shadow)(this,"isFontLoadingAPISupported",ee)}get isSyncFontLoadingSupported(){(0,e.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,e.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(ee,k,ue){(0,e.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let oe;i.FontLoader=oe,i.FontLoader=oe=class extends a{constructor(ee){super(ee),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let ee=!1;if(typeof navigator>"u")ee=!0;else{const k=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(k==null?void 0:k[1])>=14&&(ee=!0)}return(0,e.shadow)(this,"isSyncFontLoadingSupported",ee)}_queueLoadingCallback(ee){function k(){for((0,e.assert)(!ye.done,"completeRequest() cannot be called twice."),ye.done=!0;ue.requests.length>0&&ue.requests[0].done;){const le=ue.requests.shift();setTimeout(le.callback,0)}}const ue=this.loadingContext,ye={id:`pdfjs-font-loading-${ue.nextRequestId++}`,done:!1,complete:k,callback:ee};return ue.requests.push(ye),ye}get _loadTestFont(){const ee=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,e.shadow)(this,"_loadTestFont",ee())}_prepareFontLoadEvent(ee,k,ue){function ye(Ue,Me){return Ue.charCodeAt(Me)<<24|Ue.charCodeAt(Me+1)<<16|Ue.charCodeAt(Me+2)<<8|Ue.charCodeAt(Me+3)&255}function le(Ue,Me,Fe,Pe){const xe=Ue.substring(0,Me),ke=Ue.substring(Me+Fe);return xe+Pe+ke}let se,_;const s=this._document.createElement("canvas");s.width=1,s.height=1;const c=s.getContext("2d");let g=0;function ne(Ue,Me){if(g++,g>30){(0,e.warn)("Load test font never loaded."),Me();return}if(c.font="30px "+Ue,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){Me();return}setTimeout(ne.bind(null,Ue,Me))}const re=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=le(m,976,re.length,re);const h=16,Y=1482184792;let fe=ye(m,h);for(se=0,_=re.length-3;se<_;se+=4)fe=fe-Y+ye(re,se)|0;se<re.length&&(fe=fe-Y+ye(re+"XXX",se)|0),m=le(m,h,4,(0,e.string32)(fe));const ae=`url(data:font/opentype;base64,${btoa(m)});`,Z=`@font-face {font-family:"${re}";src:${ae}}`;this.insertRule(Z);const pe=[];for(const Ue of k)pe.push(Ue.loadedName);pe.push(re);const Ie=this._document.createElement("div");Ie.style.visibility="hidden",Ie.style.width=Ie.style.height="10px",Ie.style.position="absolute",Ie.style.top=Ie.style.left="0px";for(const Ue of pe){const Me=this._document.createElement("span");Me.textContent="Hi",Me.style.fontFamily=Ue,Ie.append(Me)}this._document.body.append(Ie),ne(re,()=>{Ie.remove(),ue.complete()})}};class he{constructor(ee,{isEvalSupported:k=!0,disableFontFace:ue=!1,ignoreErrors:ye=!1,onUnsupportedFeature:le,fontRegistry:se=null}){this.compiledGlyphs=Object.create(null);for(const _ in ee)this[_]=ee[_];this.isEvalSupported=k!==!1,this.disableFontFace=ue===!0,this.ignoreErrors=ye===!0,this._onUnsupportedFeature=le,this.fontRegistry=se}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let ee;if(!this.cssFontInfo)ee=new FontFace(this.loadedName,this.data,{});else{const k={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(k.style=`oblique ${this.cssFontInfo.italicAngle}deg`),ee=new FontFace(this.cssFontInfo.fontFamily,this.data,k)}return this.fontRegistry&&this.fontRegistry.registerFont(this),ee}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const ee=(0,e.bytesToString)(this.data),k=`url(data:${this.mimetype};base64,${btoa(ee)});`;let ue;if(!this.cssFontInfo)ue=`@font-face {font-family:"${this.loadedName}";src:${k}}`;else{let ye=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ye+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),ue=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ye}src:${k}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,k),ue}getPathGenerator(ee,k){if(this.compiledGlyphs[k]!==void 0)return this.compiledGlyphs[k];let ue;try{ue=ee.get(this.loadedName+"_path_"+k)}catch(ye){if(!this.ignoreErrors)throw ye;return this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,e.warn)(`getPathGenerator - ignoring character: "${ye}".`),this.compiledGlyphs[k]=function(le,se){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const ye=[];for(const le of ue){const se=le.args!==void 0?le.args.join(","):"";ye.push("c.",le.cmd,"(",se,`);
`)}return this.compiledGlyphs[k]=new Function("c","size",ye.join(""))}return this.compiledGlyphs[k]=function(ye,le){for(const se of ue)se.cmd==="scale"&&(se.args=[le,-le]),ye[se.cmd].apply(ye,se.args)}}}i.FontFaceObject=he},(d,i,j)=>{var Ne,Gt;Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasGraphics=void 0;var e=j(8),a=j(1),oe=j(13),he=j(14),ie=j(3);const ee=16,k=100,ue=4096,ye=15,le=10,se=ie.isNodeJS&&typeof Path2D>"u"?-1:1e3,_=16;function s(Se,$){if(Se._removeMirroring)throw new Error("Context is already forwarding operations.");Se.__originalSave=Se.save,Se.__originalRestore=Se.restore,Se.__originalRotate=Se.rotate,Se.__originalScale=Se.scale,Se.__originalTranslate=Se.translate,Se.__originalTransform=Se.transform,Se.__originalSetTransform=Se.setTransform,Se.__originalResetTransform=Se.resetTransform,Se.__originalClip=Se.clip,Se.__originalMoveTo=Se.moveTo,Se.__originalLineTo=Se.lineTo,Se.__originalBezierCurveTo=Se.bezierCurveTo,Se.__originalRect=Se.rect,Se.__originalClosePath=Se.closePath,Se.__originalBeginPath=Se.beginPath,Se._removeMirroring=()=>{Se.save=Se.__originalSave,Se.restore=Se.__originalRestore,Se.rotate=Se.__originalRotate,Se.scale=Se.__originalScale,Se.translate=Se.__originalTranslate,Se.transform=Se.__originalTransform,Se.setTransform=Se.__originalSetTransform,Se.resetTransform=Se.__originalResetTransform,Se.clip=Se.__originalClip,Se.moveTo=Se.__originalMoveTo,Se.lineTo=Se.__originalLineTo,Se.bezierCurveTo=Se.__originalBezierCurveTo,Se.rect=Se.__originalRect,Se.closePath=Se.__originalClosePath,Se.beginPath=Se.__originalBeginPath,delete Se._removeMirroring},Se.save=function(){$.save(),this.__originalSave()},Se.restore=function(){$.restore(),this.__originalRestore()},Se.translate=function(de,be){$.translate(de,be),this.__originalTranslate(de,be)},Se.scale=function(de,be){$.scale(de,be),this.__originalScale(de,be)},Se.transform=function(de,be,ve,Ae,we,Re){$.transform(de,be,ve,Ae,we,Re),this.__originalTransform(de,be,ve,Ae,we,Re)},Se.setTransform=function(de,be,ve,Ae,we,Re){$.setTransform(de,be,ve,Ae,we,Re),this.__originalSetTransform(de,be,ve,Ae,we,Re)},Se.resetTransform=function(){$.resetTransform(),this.__originalResetTransform()},Se.rotate=function(de){$.rotate(de),this.__originalRotate(de)},Se.clip=function(de){$.clip(de),this.__originalClip(de)},Se.moveTo=function(b,de){$.moveTo(b,de),this.__originalMoveTo(b,de)},Se.lineTo=function(b,de){$.lineTo(b,de),this.__originalLineTo(b,de)},Se.bezierCurveTo=function(b,de,be,ve,Ae,we){$.bezierCurveTo(b,de,be,ve,Ae,we),this.__originalBezierCurveTo(b,de,be,ve,Ae,we)},Se.rect=function(b,de,be,ve){$.rect(b,de,be,ve),this.__originalRect(b,de,be,ve)},Se.closePath=function(){$.closePath(),this.__originalClosePath()},Se.beginPath=function(){$.beginPath(),this.__originalBeginPath()}}class c{constructor($){this.canvasFactory=$,this.cache=Object.create(null)}getCanvas($,b,de){let be;return this.cache[$]!==void 0?(be=this.cache[$],this.canvasFactory.reset(be,b,de)):(be=this.canvasFactory.create(b,de),this.cache[$]=be),be}delete($){delete this.cache[$]}clear(){for(const $ in this.cache){const b=this.cache[$];this.canvasFactory.destroy(b),delete this.cache[$]}}}function g(Se,$,b,de,be,ve,Ae,we,Re,f){const[X,te,ce,me,Ee,je]=(0,e.getCurrentTransform)(Se);if(te===0&&ce===0){const qe=Ae*X+Ee,Le=Math.round(qe),$e=we*me+je,Xe=Math.round($e),_e=(Ae+Re)*X+Ee,Ve=Math.abs(Math.round(_e)-Le)||1,et=(we+f)*me+je,nt=Math.abs(Math.round(et)-Xe)||1;return Se.setTransform(Math.sign(X),0,0,Math.sign(me),Le,Xe),Se.drawImage($,b,de,be,ve,0,0,Ve,nt),Se.setTransform(X,te,ce,me,Ee,je),[Ve,nt]}if(X===0&&me===0){const qe=we*ce+Ee,Le=Math.round(qe),$e=Ae*te+je,Xe=Math.round($e),_e=(we+f)*ce+Ee,Ve=Math.abs(Math.round(_e)-Le)||1,et=(Ae+Re)*te+je,nt=Math.abs(Math.round(et)-Xe)||1;return Se.setTransform(0,Math.sign(te),Math.sign(ce),0,Le,Xe),Se.drawImage($,b,de,be,ve,0,0,nt,Ve),Se.setTransform(X,te,ce,me,Ee,je),[nt,Ve]}Se.drawImage($,b,de,be,ve,Ae,we,Re,f);const ze=Math.hypot(X,te),De=Math.hypot(ce,me);return[ze*Re,De*f]}function ne(Se){const{width:$,height:b}=Se;if($>se||b>se)return null;const de=1e3,be=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),ve=$+1;let Ae=new Uint8Array(ve*(b+1)),we,Re,f;const X=$+7&-8;let te=new Uint8Array(X*b),ce=0;for(const De of Se.data){let qe=128;for(;qe>0;)te[ce++]=De&qe?0:255,qe>>=1}let me=0;for(ce=0,te[ce]!==0&&(Ae[0]=1,++me),Re=1;Re<$;Re++)te[ce]!==te[ce+1]&&(Ae[Re]=te[ce]?2:1,++me),ce++;for(te[ce]!==0&&(Ae[Re]=2,++me),we=1;we<b;we++){ce=we*X,f=we*ve,te[ce-X]!==te[ce]&&(Ae[f]=te[ce]?1:8,++me);let De=(te[ce]?4:0)+(te[ce-X]?8:0);for(Re=1;Re<$;Re++)De=(De>>2)+(te[ce+1]?4:0)+(te[ce-X+1]?8:0),be[De]&&(Ae[f+Re]=be[De],++me),ce++;if(te[ce-X]!==te[ce]&&(Ae[f+Re]=te[ce]?2:4,++me),me>de)return null}for(ce=X*(b-1),f=we*ve,te[ce]!==0&&(Ae[f]=8,++me),Re=1;Re<$;Re++)te[ce]!==te[ce+1]&&(Ae[f+Re]=te[ce]?4:8,++me),ce++;if(te[ce]!==0&&(Ae[f+Re]=4,++me),me>de)return null;const Ee=new Int32Array([0,ve,-1,0,-ve,0,0,0,1]),je=new Path2D;for(we=0;me&&we<=b;we++){let De=we*ve;const qe=De+$;for(;De<qe&&!Ae[De];)De++;if(De===qe)continue;je.moveTo(De%ve,we);const Le=De;let $e=Ae[De];do{const Xe=Ee[$e];do De+=Xe;while(!Ae[De]);const _e=Ae[De];_e!==5&&_e!==10?($e=_e,Ae[De]=0):($e=_e&51*$e>>4,Ae[De]&=$e>>2|$e<<2),je.lineTo(De%ve,De/ve|0),Ae[De]||--me}while(Le!==De);--we}return te=null,Ae=null,function(De){De.save(),De.scale(1/$,-1/b),De.translate(0,-b),De.fill(je),De.beginPath(),De.restore()}}class re{constructor($,b){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,$,b])}clone(){const $=Object.create(this);return $.clipBox=this.clipBox.slice(),$}setCurrentPoint($,b){this.x=$,this.y=b}updatePathMinMax($,b,de){[b,de]=a.Util.applyTransform([b,de],$),this.minX=Math.min(this.minX,b),this.minY=Math.min(this.minY,de),this.maxX=Math.max(this.maxX,b),this.maxY=Math.max(this.maxY,de)}updateRectMinMax($,b){const de=a.Util.applyTransform(b,$),be=a.Util.applyTransform(b.slice(2),$);this.minX=Math.min(this.minX,de[0],be[0]),this.minY=Math.min(this.minY,de[1],be[1]),this.maxX=Math.max(this.maxX,de[0],be[0]),this.maxY=Math.max(this.maxY,de[1],be[1])}updateScalingPathMinMax($,b){a.Util.scaleMinMax($,b),this.minX=Math.min(this.minX,b[0]),this.maxX=Math.max(this.maxX,b[1]),this.minY=Math.min(this.minY,b[2]),this.maxY=Math.max(this.maxY,b[3])}updateCurvePathMinMax($,b,de,be,ve,Ae,we,Re,f,X){const te=a.Util.bezierBoundingBox(b,de,be,ve,Ae,we,Re,f);if(X){X[0]=Math.min(X[0],te[0],te[2]),X[1]=Math.max(X[1],te[0],te[2]),X[2]=Math.min(X[2],te[1],te[3]),X[3]=Math.max(X[3],te[1],te[3]);return}this.updateRectMinMax($,te)}getPathBoundingBox($=oe.PathType.FILL,b=null){const de=[this.minX,this.minY,this.maxX,this.maxY];if($===oe.PathType.STROKE){b||(0,a.unreachable)("Stroke bounding box must include transform.");const be=a.Util.singularValueDecompose2dScale(b),ve=be[0]*this.lineWidth/2,Ae=be[1]*this.lineWidth/2;de[0]-=ve,de[1]-=Ae,de[2]+=ve,de[3]+=Ae}return de}updateClipFromPath(){const $=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox($||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox($){this.clipBox=$,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox($=oe.PathType.FILL,b=null){return a.Util.intersect(this.clipBox,this.getPathBoundingBox($,b))}}function m(Se,$,b=null){if(typeof ImageData<"u"&&$ instanceof ImageData){Se.putImageData($,0,0);return}const de=$.height,be=$.width,ve=de%_,Ae=(de-ve)/_,we=ve===0?Ae:Ae+1,Re=Se.createImageData(be,_);let f=0,X;const te=$.data,ce=Re.data;let me,Ee,je,ze,De,qe,Le,$e;if(b)switch(b.length){case 1:De=b[0],qe=b[0],Le=b[0],$e=b[0];break;case 4:De=b[0],qe=b[1],Le=b[2],$e=b[3];break}if($.kind===a.ImageKind.GRAYSCALE_1BPP){const Xe=te.byteLength,_e=new Uint32Array(ce.buffer,0,ce.byteLength>>2),Ve=_e.length,et=be+7>>3;let nt=4294967295,it=a.FeatureTest.isLittleEndian?4278190080:255;for($e&&$e[0]===255&&$e[255]===0&&([nt,it]=[it,nt]),me=0;me<we;me++){for(je=me<Ae?_:ve,X=0,Ee=0;Ee<je;Ee++){const ot=Xe-f;let dt=0;const ht=ot>et?be:ot*8-7,Ct=ht&-8;let st=0,pt=0;for(;dt<Ct;dt+=8)pt=te[f++],_e[X++]=pt&128?nt:it,_e[X++]=pt&64?nt:it,_e[X++]=pt&32?nt:it,_e[X++]=pt&16?nt:it,_e[X++]=pt&8?nt:it,_e[X++]=pt&4?nt:it,_e[X++]=pt&2?nt:it,_e[X++]=pt&1?nt:it;for(;dt<ht;dt++)st===0&&(pt=te[f++],st=128),_e[X++]=pt&st?nt:it,st>>=1}for(;X<Ve;)_e[X++]=0;Se.putImageData(Re,0,me*_)}}else if($.kind===a.ImageKind.RGBA_32BPP){const Xe=!!(De||qe||Le);for(Ee=0,ze=be*_*4,me=0;me<Ae;me++){if(ce.set(te.subarray(f,f+ze)),f+=ze,Xe)for(let _e=0;_e<ze;_e+=4)De&&(ce[_e+0]=De[ce[_e+0]]),qe&&(ce[_e+1]=qe[ce[_e+1]]),Le&&(ce[_e+2]=Le[ce[_e+2]]);Se.putImageData(Re,0,Ee),Ee+=_}if(me<we){if(ze=be*ve*4,ce.set(te.subarray(f,f+ze)),Xe)for(let _e=0;_e<ze;_e+=4)De&&(ce[_e+0]=De[ce[_e+0]]),qe&&(ce[_e+1]=qe[ce[_e+1]]),Le&&(ce[_e+2]=Le[ce[_e+2]]);Se.putImageData(Re,0,Ee)}}else if($.kind===a.ImageKind.RGB_24BPP){const Xe=!!(De||qe||Le);for(je=_,ze=be*je,me=0;me<we;me++){for(me>=Ae&&(je=ve,ze=be*je),X=0,Ee=ze;Ee--;)ce[X++]=te[f++],ce[X++]=te[f++],ce[X++]=te[f++],ce[X++]=255;if(Xe)for(let _e=0;_e<X;_e+=4)De&&(ce[_e+0]=De[ce[_e+0]]),qe&&(ce[_e+1]=qe[ce[_e+1]]),Le&&(ce[_e+2]=Le[ce[_e+2]]);Se.putImageData(Re,0,me*_)}}else throw new Error(`bad image kind: ${$.kind}`)}function o(Se,$){if($.bitmap){Se.drawImage($.bitmap,0,0);return}const b=$.height,de=$.width,be=b%_,ve=(b-be)/_,Ae=be===0?ve:ve+1,we=Se.createImageData(de,_);let Re=0;const f=$.data,X=we.data;for(let te=0;te<Ae;te++){const ce=te<ve?_:be;({srcPos:Re}=(0,he.applyMaskImageData)({src:f,srcPos:Re,dest:X,width:de,height:ce})),Se.putImageData(we,0,te*_)}}function h(Se,$){const b=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let de=0,be=b.length;de<be;de++){const ve=b[de];Se[ve]!==void 0&&($[ve]=Se[ve])}Se.setLineDash!==void 0&&($.setLineDash(Se.getLineDash()),$.lineDashOffset=Se.lineDashOffset)}function Y(Se,$){Se.strokeStyle=Se.fillStyle=$||"#000000",Se.fillRule="nonzero",Se.globalAlpha=1,Se.lineWidth=1,Se.lineCap="butt",Se.lineJoin="miter",Se.miterLimit=10,Se.globalCompositeOperation="source-over",Se.font="10px sans-serif",Se.setLineDash!==void 0&&(Se.setLineDash([]),Se.lineDashOffset=0)}function fe(Se,$,b,de){const be=Se.length;for(let ve=3;ve<be;ve+=4){const Ae=Se[ve];if(Ae===0)Se[ve-3]=$,Se[ve-2]=b,Se[ve-1]=de;else if(Ae<255){const we=255-Ae;Se[ve-3]=Se[ve-3]*Ae+$*we>>8,Se[ve-2]=Se[ve-2]*Ae+b*we>>8,Se[ve-1]=Se[ve-1]*Ae+de*we>>8}}}function ae(Se,$,b){const de=Se.length,be=1/255;for(let ve=3;ve<de;ve+=4){const Ae=b?b[Se[ve]]:Se[ve];$[ve]=$[ve]*Ae*be|0}}function Z(Se,$,b){const de=Se.length;for(let be=3;be<de;be+=4){const ve=Se[be-3]*77+Se[be-2]*152+Se[be-1]*28;$[be]=b?$[be]*b[ve>>8]>>8:$[be]*ve>>16}}function pe(Se,$,b,de,be,ve,Ae,we,Re,f,X){const te=!!ve,ce=te?ve[0]:0,me=te?ve[1]:0,Ee=te?ve[2]:0;let je;be==="Luminosity"?je=Z:je=ae;const De=Math.min(de,Math.ceil(1048576/b));for(let qe=0;qe<de;qe+=De){const Le=Math.min(De,de-qe),$e=Se.getImageData(we-f,qe+(Re-X),b,Le),Xe=$.getImageData(we,qe+Re,b,Le);te&&fe($e.data,ce,me,Ee),je($e.data,Xe.data,Ae),$.putImageData(Xe,we,qe+Re)}}function Ie(Se,$,b,de){const be=de[0],ve=de[1],Ae=de[2]-be,we=de[3]-ve;Ae===0||we===0||(pe($.context,b,Ae,we,$.subtype,$.backdrop,$.transferMap,be,ve,$.offsetX,$.offsetY),Se.save(),Se.globalAlpha=1,Se.globalCompositeOperation="source-over",Se.setTransform(1,0,0,1,0,0),Se.drawImage(b.canvas,0,0),Se.restore())}function Ue(Se,$){const b=a.Util.singularValueDecompose2dScale(Se);b[0]=Math.fround(b[0]),b[1]=Math.fround(b[1]);const de=Math.fround((globalThis.devicePixelRatio||1)*e.PixelsPerInch.PDF_TO_CSS_UNITS);return $!==void 0?$:b[0]<=de||b[1]<=de}const Me=["butt","round","square"],Fe=["miter","round","bevel"],Pe={},xe={},Ze=class Ze{constructor($,b,de,be,ve,Ae,we,Re){We(this,Ne);this.ctx=$,this.current=new re(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=b,this.objs=de,this.canvasFactory=be,this.imageLayer=ve,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=Ae,this.cachedCanvases=new c(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=we,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(Re==null?void 0:Re.background)||null,this.foregroundColor=(Re==null?void 0:Re.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject($,b=null){return typeof $=="string"?$.startsWith("g_")?this.commonObjs.get($):this.objs.get($):b}beginDrawing({transform:$,viewport:b,transparency:de=!1,background:be=null}){const ve=this.ctx.canvas.width,Ae=this.ctx.canvas.height,we=be||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const Re=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const f=this.backgroundColor=this.ctx.fillStyle;let X=!0,te=we;if(this.ctx.fillStyle=we,te=this.ctx.fillStyle,X=typeof te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(te),Re==="#000000"&&f==="#ffffff"||Re===f||!X)this.foregroundColor=this.backgroundColor=null;else{const[ce,me,Ee]=(0,e.getRGB)(te),je=De=>(De/=255,De<=.03928?De/12.92:((De+.055)/1.055)**2.4),ze=Math.round(.2126*je(ce)+.7152*je(me)+.0722*je(Ee));this.selectColor=(De,qe,Le)=>{const $e=.2126*je(De)+.7152*je(qe)+.0722*je(Le);return Math.round($e)===ze?f:Re}}}if(this.ctx.fillStyle=this.backgroundColor||we,this.ctx.fillRect(0,0,ve,Ae),this.ctx.restore(),de){const Re=this.cachedCanvases.getCanvas("transparent",ve,Ae);this.compositeCtx=this.ctx,this.transparentCanvas=Re.canvas,this.ctx=Re.context,this.ctx.save(),this.ctx.transform(...(0,e.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Y(this.ctx,this.foregroundColor),$&&(this.ctx.transform(...$),this.outputScaleX=$[0],this.outputScaleY=$[0]),this.ctx.transform(...b.transform),this.viewportScale=b.scale,this.baseTransform=(0,e.getCurrentTransform)(this.ctx),this.imageLayer&&((0,e.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList($,b,de,be){const ve=$.argsArray,Ae=$.fnArray;let we=b||0;const Re=ve.length;if(Re===we)return we;const f=Re-we>le&&typeof de=="function",X=f?Date.now()+ye:0;let te=0;const ce=this.commonObjs,me=this.objs;let Ee;for(;;){if(be!==void 0&&we===be.nextBreakPoint)return be.breakIt(we,de),we;if(Ee=Ae[we],Ee!==a.OPS.dependency)this[Ee].apply(this,ve[we]);else for(const je of ve[we]){const ze=je.startsWith("g_")?ce:me;if(!ze.has(je))return ze.get(je,de),we}if(we++,we===Re)return we;if(f&&++te>le){if(Date.now()>X)return de(),we;te=0}}}endDrawing(){Ge(this,Ne,Gt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const $ of this._cachedBitmapsMap.values()){for(const b of $.values())typeof HTMLCanvasElement<"u"&&b instanceof HTMLCanvasElement&&(b.width=b.height=0);$.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage($,b){const de=$.width,be=$.height;let ve=Math.max(Math.hypot(b[0],b[1]),1),Ae=Math.max(Math.hypot(b[2],b[3]),1),we=de,Re=be,f="prescale1",X,te;for(;ve>2&&we>1||Ae>2&&Re>1;){let ce=we,me=Re;ve>2&&we>1&&(ce=Math.ceil(we/2),ve/=we/ce),Ae>2&&Re>1&&(me=Math.ceil(Re/2),Ae/=Re/me),X=this.cachedCanvases.getCanvas(f,ce,me),te=X.context,te.clearRect(0,0,ce,me),te.drawImage($,0,0,we,Re,0,0,ce,me),$=X.canvas,we=ce,Re=me,f=f==="prescale1"?"prescale2":"prescale1"}return{img:$,paintWidth:we,paintHeight:Re}}_createMaskCanvas($){const b=this.ctx,{width:de,height:be}=$,ve=this.current.fillColor,Ae=this.current.patternFill,we=(0,e.getCurrentTransform)(b);let Re,f,X,te;if(($.bitmap||$.data)&&$.count>1){const Ve=$.bitmap||$.data.buffer,et=we.slice(0,4);f=JSON.stringify(Ae?et:[et,ve]),Re=this._cachedBitmapsMap.get(Ve),Re||(Re=new Map,this._cachedBitmapsMap.set(Ve,Re));const nt=Re.get(f);if(nt&&!Ae){const it=Math.round(Math.min(we[0],we[2])+we[4]),ot=Math.round(Math.min(we[1],we[3])+we[5]);return{canvas:nt,offsetX:it,offsetY:ot}}X=nt}X||(te=this.cachedCanvases.getCanvas("maskCanvas",de,be),o(te.context,$));let ce=a.Util.transform(we,[1/de,0,0,-1/be,0,0]);ce=a.Util.transform(ce,[1,0,0,1,0,-be]);const me=a.Util.applyTransform([0,0],ce),Ee=a.Util.applyTransform([de,be],ce),je=a.Util.normalizeRect([me[0],me[1],Ee[0],Ee[1]]),ze=Math.round(je[2]-je[0])||1,De=Math.round(je[3]-je[1])||1,qe=this.cachedCanvases.getCanvas("fillCanvas",ze,De),Le=qe.context,$e=Math.min(me[0],Ee[0]),Xe=Math.min(me[1],Ee[1]);Le.translate(-$e,-Xe),Le.transform(...ce),X||(X=this._scaleImage(te.canvas,(0,e.getCurrentTransformInverse)(Le)),X=X.img,Re&&Ae&&Re.set(f,X)),Le.imageSmoothingEnabled=Ue((0,e.getCurrentTransform)(Le),$.interpolate),g(Le,X,0,0,X.width,X.height,0,0,de,be),Le.globalCompositeOperation="source-in";const _e=a.Util.transform((0,e.getCurrentTransformInverse)(Le),[1,0,0,1,-$e,-Xe]);return Le.fillStyle=Ae?ve.getPattern(b,this,_e,oe.PathType.FILL):ve,Le.fillRect(0,0,de,be),Re&&!Ae&&(this.cachedCanvases.delete("fillCanvas"),Re.set(f,qe.canvas)),{canvas:qe.canvas,offsetX:Math.round($e),offsetY:Math.round(Xe)}}setLineWidth($){$!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=$,this.ctx.lineWidth=$}setLineCap($){this.ctx.lineCap=Me[$]}setLineJoin($){this.ctx.lineJoin=Fe[$]}setMiterLimit($){this.ctx.miterLimit=$}setDash($,b){const de=this.ctx;de.setLineDash!==void 0&&(de.setLineDash($),de.lineDashOffset=b)}setRenderingIntent($){}setFlatness($){}setGState($){for(let b=0,de=$.length;b<de;b++){const be=$[b],ve=be[0],Ae=be[1];switch(ve){case"LW":this.setLineWidth(Ae);break;case"LC":this.setLineCap(Ae);break;case"LJ":this.setLineJoin(Ae);break;case"ML":this.setMiterLimit(Ae);break;case"D":this.setDash(Ae[0],Ae[1]);break;case"RI":this.setRenderingIntent(Ae);break;case"FL":this.setFlatness(Ae);break;case"Font":this.setFont(Ae[0],Ae[1]);break;case"CA":this.current.strokeAlpha=be[1];break;case"ca":this.current.fillAlpha=be[1],this.ctx.globalAlpha=be[1];break;case"BM":this.ctx.globalCompositeOperation=Ae;break;case"SMask":this.current.activeSMask=Ae?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=Ae}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const $=this.inSMaskMode;this.current.activeSMask&&!$?this.beginSMaskMode():!this.current.activeSMask&&$&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const $=this.ctx.canvas.width,b=this.ctx.canvas.height,de="smaskGroupAt"+this.groupLevel,be=this.cachedCanvases.getCanvas(de,$,b);this.suspendedCtx=this.ctx,this.ctx=be.context;const ve=this.ctx;ve.setTransform(...(0,e.getCurrentTransform)(this.suspendedCtx)),h(this.suspendedCtx,ve),s(ve,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),h(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose($){if(!this.current.activeSMask)return;$?($[0]=Math.floor($[0]),$[1]=Math.floor($[1]),$[2]=Math.ceil($[2]),$[3]=Math.ceil($[3])):$=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const b=this.current.activeSMask,de=this.suspendedCtx;Ie(de,b,this.ctx,$),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(h(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const $=this.current;this.stateStack.push($),this.current=$.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),h(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform($,b,de,be,ve,Ae){this.ctx.transform($,b,de,be,ve,Ae),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath($,b,de){const be=this.ctx,ve=this.current;let Ae=ve.x,we=ve.y,Re,f;const X=(0,e.getCurrentTransform)(be),te=X[0]===0&&X[3]===0||X[1]===0&&X[2]===0,ce=te?de.slice(0):null;for(let me=0,Ee=0,je=$.length;me<je;me++)switch($[me]|0){case a.OPS.rectangle:Ae=b[Ee++],we=b[Ee++];const ze=b[Ee++],De=b[Ee++],qe=Ae+ze,Le=we+De;be.moveTo(Ae,we),ze===0||De===0?be.lineTo(qe,Le):(be.lineTo(qe,we),be.lineTo(qe,Le),be.lineTo(Ae,Le)),te||ve.updateRectMinMax(X,[Ae,we,qe,Le]),be.closePath();break;case a.OPS.moveTo:Ae=b[Ee++],we=b[Ee++],be.moveTo(Ae,we),te||ve.updatePathMinMax(X,Ae,we);break;case a.OPS.lineTo:Ae=b[Ee++],we=b[Ee++],be.lineTo(Ae,we),te||ve.updatePathMinMax(X,Ae,we);break;case a.OPS.curveTo:Re=Ae,f=we,Ae=b[Ee+4],we=b[Ee+5],be.bezierCurveTo(b[Ee],b[Ee+1],b[Ee+2],b[Ee+3],Ae,we),ve.updateCurvePathMinMax(X,Re,f,b[Ee],b[Ee+1],b[Ee+2],b[Ee+3],Ae,we,ce),Ee+=6;break;case a.OPS.curveTo2:Re=Ae,f=we,be.bezierCurveTo(Ae,we,b[Ee],b[Ee+1],b[Ee+2],b[Ee+3]),ve.updateCurvePathMinMax(X,Re,f,Ae,we,b[Ee],b[Ee+1],b[Ee+2],b[Ee+3],ce),Ae=b[Ee+2],we=b[Ee+3],Ee+=4;break;case a.OPS.curveTo3:Re=Ae,f=we,Ae=b[Ee+2],we=b[Ee+3],be.bezierCurveTo(b[Ee],b[Ee+1],Ae,we,Ae,we),ve.updateCurvePathMinMax(X,Re,f,b[Ee],b[Ee+1],Ae,we,Ae,we,ce),Ee+=4;break;case a.OPS.closePath:be.closePath();break}te&&ve.updateScalingPathMinMax(X,ce),ve.setCurrentPoint(Ae,we)}closePath(){this.ctx.closePath()}stroke($){$=typeof $<"u"?$:!0;const b=this.ctx,de=this.current.strokeColor;b.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof de=="object"&&(de!=null&&de.getPattern)?(b.save(),b.strokeStyle=de.getPattern(b,this,(0,e.getCurrentTransformInverse)(b),oe.PathType.STROKE),this.rescaleAndStroke(!1),b.restore()):this.rescaleAndStroke(!0)),$&&this.consumePath(this.current.getClippedPathBoundingBox()),b.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill($){$=typeof $<"u"?$:!0;const b=this.ctx,de=this.current.fillColor,be=this.current.patternFill;let ve=!1;be&&(b.save(),b.fillStyle=de.getPattern(b,this,(0,e.getCurrentTransformInverse)(b),oe.PathType.FILL),ve=!0);const Ae=this.current.getClippedPathBoundingBox();this.contentVisible&&Ae!==null&&(this.pendingEOFill?(b.fill("evenodd"),this.pendingEOFill=!1):b.fill()),ve&&b.restore(),$&&this.consumePath(Ae)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Pe}eoClip(){this.pendingClip=xe}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const $=this.pendingTextPaths,b=this.ctx;if($===void 0){b.beginPath();return}b.save(),b.beginPath();for(const de of $)b.setTransform(...de.transform),b.translate(de.x,de.y),de.addToPath(b,de.fontSize);b.restore(),b.clip(),b.beginPath(),delete this.pendingTextPaths}setCharSpacing($){this.current.charSpacing=$}setWordSpacing($){this.current.wordSpacing=$}setHScale($){this.current.textHScale=$/100}setLeading($){this.current.leading=-$}setFont($,b){const de=this.commonObjs.get($),be=this.current;if(!de)throw new Error(`Can't find font for ${$}`);if(be.fontMatrix=de.fontMatrix||a.FONT_IDENTITY_MATRIX,(be.fontMatrix[0]===0||be.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+$),b<0?(b=-b,be.fontDirection=-1):be.fontDirection=1,this.current.font=de,this.current.fontSize=b,de.isType3Font)return;const ve=de.loadedName||"sans-serif";let Ae="normal";de.black?Ae="900":de.bold&&(Ae="bold");const we=de.italic?"italic":"normal",Re=`"${ve}", ${de.fallbackName}`;let f=b;b<ee?f=ee:b>k&&(f=k),this.current.fontSizeScale=b/f,this.ctx.font=`${we} ${Ae} ${f}px ${Re}`}setTextRenderingMode($){this.current.textRenderingMode=$}setTextRise($){this.current.textRise=$}moveText($,b){this.current.x=this.current.lineX+=$,this.current.y=this.current.lineY+=b}setLeadingMoveText($,b){this.setLeading(-b),this.moveText($,b)}setTextMatrix($,b,de,be,ve,Ae){this.current.textMatrix=[$,b,de,be,ve,Ae],this.current.textMatrixScale=Math.hypot($,b),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar($,b,de,be){const ve=this.ctx,Ae=this.current,we=Ae.font,Re=Ae.textRenderingMode,f=Ae.fontSize/Ae.fontSizeScale,X=Re&a.TextRenderingMode.FILL_STROKE_MASK,te=!!(Re&a.TextRenderingMode.ADD_TO_PATH_FLAG),ce=Ae.patternFill&&!we.missingFile;let me;(we.disableFontFace||te||ce)&&(me=we.getPathGenerator(this.commonObjs,$)),we.disableFontFace||ce?(ve.save(),ve.translate(b,de),ve.beginPath(),me(ve,f),be&&ve.setTransform(...be),(X===a.TextRenderingMode.FILL||X===a.TextRenderingMode.FILL_STROKE)&&ve.fill(),(X===a.TextRenderingMode.STROKE||X===a.TextRenderingMode.FILL_STROKE)&&ve.stroke(),ve.restore()):((X===a.TextRenderingMode.FILL||X===a.TextRenderingMode.FILL_STROKE)&&ve.fillText($,b,de),(X===a.TextRenderingMode.STROKE||X===a.TextRenderingMode.FILL_STROKE)&&ve.strokeText($,b,de)),te&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,e.getCurrentTransform)(ve),x:b,y:de,fontSize:f,addToPath:me})}get isFontSubpixelAAEnabled(){const{context:$}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);$.scale(1.5,1),$.fillText("I",0,10);const b=$.getImageData(0,0,10,10).data;let de=!1;for(let be=3;be<b.length;be+=4)if(b[be]>0&&b[be]<255){de=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",de)}showText($){const b=this.current,de=b.font;if(de.isType3Font)return this.showType3Text($);const be=b.fontSize;if(be===0)return;const ve=this.ctx,Ae=b.fontSizeScale,we=b.charSpacing,Re=b.wordSpacing,f=b.fontDirection,X=b.textHScale*f,te=$.length,ce=de.vertical,me=ce?1:-1,Ee=de.defaultVMetrics,je=be*b.fontMatrix[0],ze=b.textRenderingMode===a.TextRenderingMode.FILL&&!de.disableFontFace&&!b.patternFill;ve.save(),ve.transform(...b.textMatrix),ve.translate(b.x,b.y+b.textRise),f>0?ve.scale(X,-1):ve.scale(X,1);let De;if(b.patternFill){ve.save();const _e=b.fillColor.getPattern(ve,this,(0,e.getCurrentTransformInverse)(ve),oe.PathType.FILL);De=(0,e.getCurrentTransform)(ve),ve.restore(),ve.fillStyle=_e}let qe=b.lineWidth;const Le=b.textMatrixScale;if(Le===0||qe===0){const _e=b.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(_e===a.TextRenderingMode.STROKE||_e===a.TextRenderingMode.FILL_STROKE)&&(qe=this.getSinglePixelWidth())}else qe/=Le;Ae!==1&&(ve.scale(Ae,Ae),qe/=Ae),ve.lineWidth=qe;let $e=0,Xe;for(Xe=0;Xe<te;++Xe){const _e=$[Xe];if(typeof _e=="number"){$e+=me*_e*be/1e3;continue}let Ve=!1;const et=(_e.isSpace?Re:0)+we,nt=_e.fontChar,it=_e.accent;let ot,dt,ht=_e.width;if(ce){const st=_e.vmetric||Ee,pt=-(_e.vmetric?st[1]:ht*.5)*je,Dt=st[2]*je;ht=st?-st[0]:ht,ot=pt/Ae,dt=($e+Dt)/Ae}else ot=$e/Ae,dt=0;if(de.remeasure&&ht>0){const st=ve.measureText(nt).width*1e3/be*Ae;if(ht<st&&this.isFontSubpixelAAEnabled){const pt=ht/st;Ve=!0,ve.save(),ve.scale(pt,1),ot/=pt}else ht!==st&&(ot+=(ht-st)/2e3*be/Ae)}if(this.contentVisible&&(_e.isInFont||de.missingFile)){if(ze&&!it)ve.fillText(nt,ot,dt);else if(this.paintChar(nt,ot,dt,De),it){const st=ot+be*it.offset.x/Ae,pt=dt-be*it.offset.y/Ae;this.paintChar(it.fontChar,st,pt,De)}}let Ct;ce?Ct=ht*je-et*f:Ct=ht*je+et*f,$e+=Ct,Ve&&ve.restore()}ce?b.y-=$e:b.x+=$e*X,ve.restore(),this.compose()}showType3Text($){const b=this.ctx,de=this.current,be=de.font,ve=de.fontSize,Ae=de.fontDirection,we=be.vertical?1:-1,Re=de.charSpacing,f=de.wordSpacing,X=de.textHScale*Ae,te=de.fontMatrix||a.FONT_IDENTITY_MATRIX,ce=$.length,me=de.textRenderingMode===a.TextRenderingMode.INVISIBLE;let Ee,je,ze,De;if(!(me||ve===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,b.save(),b.transform(...de.textMatrix),b.translate(de.x,de.y),b.scale(X,Ae),Ee=0;Ee<ce;++Ee){if(je=$[Ee],typeof je=="number"){De=we*je*ve/1e3,this.ctx.translate(De,0),de.x+=De*X;continue}const qe=(je.isSpace?f:0)+Re,Le=be.charProcOperatorList[je.operatorListId];if(!Le){(0,a.warn)(`Type3 character "${je.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=je,this.save(),b.scale(ve,ve),b.transform(...te),this.executeOperatorList(Le),this.restore()),ze=a.Util.applyTransform([je.width,0],te)[0]*ve+qe,b.translate(ze,0),de.x+=ze*X}b.restore(),this.processingType3=null}}setCharWidth($,b){}setCharWidthAndBounds($,b,de,be,ve,Ae){this.ctx.rect(de,be,ve-de,Ae-be),this.ctx.clip(),this.endPath()}getColorN_Pattern($){let b;if($[0]==="TilingPattern"){const de=$[1],be=this.baseTransform||(0,e.getCurrentTransform)(this.ctx),ve={createCanvasGraphics:Ae=>new Ze(Ae,this.commonObjs,this.objs,this.canvasFactory)};b=new oe.TilingPattern($,de,this.ctx,ve,be)}else b=this._getPattern($[1],$[2]);return b}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor($,b,de){var ve;const be=((ve=this.selectColor)==null?void 0:ve.call(this,$,b,de))||a.Util.makeHexColor($,b,de);this.ctx.strokeStyle=be,this.current.strokeColor=be}setFillRGBColor($,b,de){var ve;const be=((ve=this.selectColor)==null?void 0:ve.call(this,$,b,de))||a.Util.makeHexColor($,b,de);this.ctx.fillStyle=be,this.current.fillColor=be,this.current.patternFill=!1}_getPattern($,b=null){let de;return this.cachedPatterns.has($)?de=this.cachedPatterns.get($):(de=(0,oe.getShadingPattern)(this.objs.get($)),this.cachedPatterns.set($,de)),b&&(de.matrix=b),de}shadingFill($){if(!this.contentVisible)return;const b=this.ctx;this.save();const de=this._getPattern($);b.fillStyle=de.getPattern(b,this,(0,e.getCurrentTransformInverse)(b),oe.PathType.SHADING);const be=(0,e.getCurrentTransformInverse)(b);if(be){const ve=b.canvas,Ae=ve.width,we=ve.height,Re=a.Util.applyTransform([0,0],be),f=a.Util.applyTransform([0,we],be),X=a.Util.applyTransform([Ae,0],be),te=a.Util.applyTransform([Ae,we],be),ce=Math.min(Re[0],f[0],X[0],te[0]),me=Math.min(Re[1],f[1],X[1],te[1]),Ee=Math.max(Re[0],f[0],X[0],te[0]),je=Math.max(Re[1],f[1],X[1],te[1]);this.ctx.fillRect(ce,me,Ee-ce,je-me)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin($,b){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray($)&&$.length===6&&this.transform(...$),this.baseTransform=(0,e.getCurrentTransform)(this.ctx),b)){const de=b[2]-b[0],be=b[3]-b[1];this.ctx.rect(b[0],b[1],de,be),this.current.updateRectMinMax((0,e.getCurrentTransform)(this.ctx),b),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup($){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const b=this.ctx;$.isolated||(0,a.info)("TODO: Support non-isolated groups."),$.knockout&&(0,a.warn)("Knockout groups not supported.");const de=(0,e.getCurrentTransform)(b);if($.matrix&&b.transform(...$.matrix),!$.bbox)throw new Error("Bounding box is required.");let be=a.Util.getAxialAlignedBoundingBox($.bbox,(0,e.getCurrentTransform)(b));const ve=[0,0,b.canvas.width,b.canvas.height];be=a.Util.intersect(be,ve)||[0,0,0,0];const Ae=Math.floor(be[0]),we=Math.floor(be[1]);let Re=Math.max(Math.ceil(be[2])-Ae,1),f=Math.max(Math.ceil(be[3])-we,1),X=1,te=1;Re>ue&&(X=Re/ue,Re=ue),f>ue&&(te=f/ue,f=ue),this.current.startNewPathAndClipBox([0,0,Re,f]);let ce="groupAt"+this.groupLevel;$.smask&&(ce+="_smask_"+this.smaskCounter++%2);const me=this.cachedCanvases.getCanvas(ce,Re,f),Ee=me.context;Ee.scale(1/X,1/te),Ee.translate(-Ae,-we),Ee.transform(...de),$.smask?this.smaskStack.push({canvas:me.canvas,context:Ee,offsetX:Ae,offsetY:we,scaleX:X,scaleY:te,subtype:$.smask.subtype,backdrop:$.smask.backdrop,transferMap:$.smask.transferMap||null,startTransformInverse:null}):(b.setTransform(1,0,0,1,0,0),b.translate(Ae,we),b.scale(X,te),b.save()),h(b,Ee),this.ctx=Ee,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(b),this.groupLevel++}endGroup($){if(!this.contentVisible)return;this.groupLevel--;const b=this.ctx,de=this.groupStack.pop();if(this.ctx=de,this.ctx.imageSmoothingEnabled=!1,$.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const be=(0,e.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...be);const ve=a.Util.getAxialAlignedBoundingBox([0,0,b.canvas.width,b.canvas.height],be);this.ctx.drawImage(b.canvas,0,0),this.ctx.restore(),this.compose(ve)}}beginAnnotation($,b,de,be,ve){if(Ge(this,Ne,Gt).call(this),Y(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(b)&&b.length===4){const Ae=b[2]-b[0],we=b[3]-b[1];if(ve&&this.annotationCanvasMap){de=de.slice(),de[4]-=b[0],de[5]-=b[1],b=b.slice(),b[0]=b[1]=0,b[2]=Ae,b[3]=we;const[Re,f]=a.Util.singularValueDecompose2dScale((0,e.getCurrentTransform)(this.ctx)),{viewportScale:X}=this,te=Math.ceil(Ae*this.outputScaleX*X),ce=Math.ceil(we*this.outputScaleY*X);this.annotationCanvas=this.canvasFactory.create(te,ce);const{canvas:me,context:Ee}=this.annotationCanvas;this.annotationCanvasMap.set($,me),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Ee,this.ctx.setTransform(Re,0,0,-f,0,we*f),Y(this.ctx,this.foregroundColor)}else Y(this.ctx,this.foregroundColor),this.ctx.rect(b[0],b[1],Ae,we),this.ctx.clip(),this.endPath()}this.current=new re(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...de),this.transform(...be)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject($){if(!this.contentVisible)return;const b=$.count;$=this.getObject($.data,$),$.count=b;const de=this.ctx,be=this.processingType3;if(be&&(be.compiled===void 0&&(be.compiled=ne($)),be.compiled)){be.compiled(de);return}const ve=this._createMaskCanvas($),Ae=ve.canvas;de.save(),de.setTransform(1,0,0,1,0,0),de.drawImage(Ae,ve.offsetX,ve.offsetY),de.restore(),this.compose()}paintImageMaskXObjectRepeat($,b,de=0,be=0,ve,Ae){if(!this.contentVisible)return;$=this.getObject($.data,$);const we=this.ctx;we.save();const Re=(0,e.getCurrentTransform)(we);we.transform(b,de,be,ve,0,0);const f=this._createMaskCanvas($);we.setTransform(1,0,0,1,0,0);for(let X=0,te=Ae.length;X<te;X+=2){const ce=a.Util.transform(Re,[b,de,be,ve,Ae[X],Ae[X+1]]),[me,Ee]=a.Util.applyTransform([0,0],ce);we.drawImage(f.canvas,me,Ee)}we.restore(),this.compose()}paintImageMaskXObjectGroup($){if(!this.contentVisible)return;const b=this.ctx,de=this.current.fillColor,be=this.current.patternFill;for(const ve of $){const{data:Ae,width:we,height:Re,transform:f}=ve,X=this.cachedCanvases.getCanvas("maskCanvas",we,Re),te=X.context;te.save();const ce=this.getObject(Ae,ve);o(te,ce),te.globalCompositeOperation="source-in",te.fillStyle=be?de.getPattern(te,this,(0,e.getCurrentTransformInverse)(b),oe.PathType.FILL):de,te.fillRect(0,0,we,Re),te.restore(),b.save(),b.transform(...f),b.scale(1,-1),g(b,X.canvas,0,0,we,Re,0,-1,1,1),b.restore()}this.compose()}paintImageXObject($){if(!this.contentVisible)return;const b=this.getObject($);if(!b){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(b)}paintImageXObjectRepeat($,b,de,be){if(!this.contentVisible)return;const ve=this.getObject($);if(!ve){(0,a.warn)("Dependent image isn't ready yet");return}const Ae=ve.width,we=ve.height,Re=[];for(let f=0,X=be.length;f<X;f+=2)Re.push({transform:[b,0,0,de,be[f],be[f+1]],x:0,y:0,w:Ae,h:we});this.paintInlineImageXObjectGroup(ve,Re)}paintInlineImageXObject($){if(!this.contentVisible)return;const b=$.width,de=$.height,be=this.ctx;this.save(),be.scale(1/b,-1/de);let ve;if(typeof HTMLElement=="function"&&$ instanceof HTMLElement||!$.data)ve=$;else{const f=this.cachedCanvases.getCanvas("inlineImage",b,de),X=f.context;m(X,$,this.current.transferMaps),ve=f.canvas}const Ae=this._scaleImage(ve,(0,e.getCurrentTransformInverse)(be));be.imageSmoothingEnabled=Ue((0,e.getCurrentTransform)(be),$.interpolate);const[we,Re]=g(be,Ae.img,0,0,Ae.paintWidth,Ae.paintHeight,0,-de,b,de);if(this.imageLayer){const[f,X]=a.Util.applyTransform([0,-de],(0,e.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:$,left:f,top:X,width:we,height:Re})}this.compose(),this.restore()}paintInlineImageXObjectGroup($,b){if(!this.contentVisible)return;const de=this.ctx,be=$.width,ve=$.height,Ae=this.cachedCanvases.getCanvas("inlineImage",be,ve),we=Ae.context;m(we,$,this.current.transferMaps);for(const Re of b){if(de.save(),de.transform(...Re.transform),de.scale(1,-1),g(de,Ae.canvas,Re.x,Re.y,Re.w,Re.h,0,-1,1,1),this.imageLayer){const[f,X]=a.Util.applyTransform([Re.x,Re.y],(0,e.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:$,left:f,top:X,width:be,height:ve})}de.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint($){}markPointProps($,b){}beginMarkedContent($){this.markedContentStack.push({visible:!0})}beginMarkedContentProps($,b){$==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(b)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath($){const b=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose($);const de=this.ctx;this.pendingClip&&(b||(this.pendingClip===xe?de.clip("evenodd"):de.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),de.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const $=(0,e.getCurrentTransform)(this.ctx);if($[1]===0&&$[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs($[0]),Math.abs($[3]));else{const b=Math.abs($[0]*$[3]-$[2]*$[1]),de=Math.hypot($[0],$[2]),be=Math.hypot($[1],$[3]);this._cachedGetSinglePixelWidth=Math.max(de,be)/b}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:$}=this.current,b=(0,e.getCurrentTransform)(this.ctx);let de,be;if(b[1]===0&&b[2]===0){const ve=Math.abs(b[0]),Ae=Math.abs(b[3]);if($===0)de=1/ve,be=1/Ae;else{const we=ve*$,Re=Ae*$;de=we<1?1/we:1,be=Re<1?1/Re:1}}else{const ve=Math.abs(b[0]*b[3]-b[2]*b[1]),Ae=Math.hypot(b[0],b[1]),we=Math.hypot(b[2],b[3]);if($===0)de=we/ve,be=Ae/ve;else{const Re=$*ve;de=we>Re?we/Re:1,be=Ae>Re?Ae/Re:1}}this._cachedScaleForStroking=[de,be]}return this._cachedScaleForStroking}rescaleAndStroke($){const{ctx:b}=this,{lineWidth:de}=this.current,[be,ve]=this.getScaleForStroking();if(b.lineWidth=de||1,be===1&&ve===1){b.stroke();return}let Ae,we,Re;$&&(Ae=(0,e.getCurrentTransform)(b),we=b.getLineDash().slice(),Re=b.lineDashOffset),b.scale(be,ve);const f=Math.max(be,ve);b.setLineDash(b.getLineDash().map(X=>X/f)),b.lineDashOffset/=f,b.stroke(),$&&(b.setTransform(...Ae),b.setLineDash(we),b.lineDashOffset=Re)}isContentVisible(){for(let $=this.markedContentStack.length-1;$>=0;$--)if(!this.markedContentStack[$].visible)return!1;return!0}};Ne=new WeakSet,Gt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)};let ke=Ze;i.CanvasGraphics=ke;for(const Se in a.OPS)ke.prototype[Se]!==void 0&&(ke.prototype[a.OPS[Se]]=ke.prototype[Se])},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TilingPattern=i.PathType=void 0,i.getShadingPattern=_;var e=j(1),a=j(8),oe=j(3);const he={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};i.PathType=he;function ie(g,ne){if(!ne||oe.isNodeJS)return;const re=ne[2]-ne[0],m=ne[3]-ne[1],o=new Path2D;o.rect(ne[0],ne[1],re,m),g.clip(o)}class ee{constructor(){this.constructor===ee&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class k extends ee{constructor(ne){super(),this._type=ne[1],this._bbox=ne[2],this._colorStops=ne[3],this._p0=ne[4],this._p1=ne[5],this._r0=ne[6],this._r1=ne[7],this.matrix=null}_createGradient(ne){let re;this._type==="axial"?re=ne.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(re=ne.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const m of this._colorStops)re.addColorStop(m[0],m[1]);return re}getPattern(ne,re,m,o){let h;if(o===he.STROKE||o===he.FILL){const Y=re.current.getClippedPathBoundingBox(o,(0,a.getCurrentTransform)(ne))||[0,0,0,0],fe=Math.ceil(Y[2]-Y[0])||1,ae=Math.ceil(Y[3]-Y[1])||1,Z=re.cachedCanvases.getCanvas("pattern",fe,ae,!0),pe=Z.context;pe.clearRect(0,0,pe.canvas.width,pe.canvas.height),pe.beginPath(),pe.rect(0,0,pe.canvas.width,pe.canvas.height),pe.translate(-Y[0],-Y[1]),m=e.Util.transform(m,[1,0,0,1,Y[0],Y[1]]),pe.transform(...re.baseTransform),this.matrix&&pe.transform(...this.matrix),ie(pe,this._bbox),pe.fillStyle=this._createGradient(pe),pe.fill(),h=ne.createPattern(Z.canvas,"no-repeat");const Ie=new DOMMatrix(m);try{h.setTransform(Ie)}catch(Ue){(0,e.warn)(`RadialAxialShadingPattern.getPattern: "${Ue==null?void 0:Ue.message}".`)}}else ie(ne,this._bbox),h=this._createGradient(ne);return h}}function ue(g,ne,re,m,o,h,Y,fe){const ae=ne.coords,Z=ne.colors,pe=g.data,Ie=g.width*4;let Ue;ae[re+1]>ae[m+1]&&(Ue=re,re=m,m=Ue,Ue=h,h=Y,Y=Ue),ae[m+1]>ae[o+1]&&(Ue=m,m=o,o=Ue,Ue=Y,Y=fe,fe=Ue),ae[re+1]>ae[m+1]&&(Ue=re,re=m,m=Ue,Ue=h,h=Y,Y=Ue);const Me=(ae[re]+ne.offsetX)*ne.scaleX,Fe=(ae[re+1]+ne.offsetY)*ne.scaleY,Pe=(ae[m]+ne.offsetX)*ne.scaleX,xe=(ae[m+1]+ne.offsetY)*ne.scaleY,ke=(ae[o]+ne.offsetX)*ne.scaleX,Ne=(ae[o+1]+ne.offsetY)*ne.scaleY;if(Fe>=Ne)return;const He=Z[h],Ze=Z[h+1],Se=Z[h+2],$=Z[Y],b=Z[Y+1],de=Z[Y+2],be=Z[fe],ve=Z[fe+1],Ae=Z[fe+2],we=Math.round(Fe),Re=Math.round(Ne);let f,X,te,ce,me,Ee,je,ze;for(let De=we;De<=Re;De++){if(De<xe){let _e;De<Fe?_e=0:_e=(Fe-De)/(Fe-xe),f=Me-(Me-Pe)*_e,X=He-(He-$)*_e,te=Ze-(Ze-b)*_e,ce=Se-(Se-de)*_e}else{let _e;De>Ne?_e=1:xe===Ne?_e=0:_e=(xe-De)/(xe-Ne),f=Pe-(Pe-ke)*_e,X=$-($-be)*_e,te=b-(b-ve)*_e,ce=de-(de-Ae)*_e}let qe;De<Fe?qe=0:De>Ne?qe=1:qe=(Fe-De)/(Fe-Ne),me=Me-(Me-ke)*qe,Ee=He-(He-be)*qe,je=Ze-(Ze-ve)*qe,ze=Se-(Se-Ae)*qe;const Le=Math.round(Math.min(f,me)),$e=Math.round(Math.max(f,me));let Xe=Ie*De+Le*4;for(let _e=Le;_e<=$e;_e++)qe=(f-_e)/(f-me),qe<0?qe=0:qe>1&&(qe=1),pe[Xe++]=X-(X-Ee)*qe|0,pe[Xe++]=te-(te-je)*qe|0,pe[Xe++]=ce-(ce-ze)*qe|0,pe[Xe++]=255}}function ye(g,ne,re){const m=ne.coords,o=ne.colors;let h,Y;switch(ne.type){case"lattice":const fe=ne.verticesPerRow,ae=Math.floor(m.length/fe)-1,Z=fe-1;for(h=0;h<ae;h++){let pe=h*fe;for(let Ie=0;Ie<Z;Ie++,pe++)ue(g,re,m[pe],m[pe+1],m[pe+fe],o[pe],o[pe+1],o[pe+fe]),ue(g,re,m[pe+fe+1],m[pe+1],m[pe+fe],o[pe+fe+1],o[pe+1],o[pe+fe])}break;case"triangles":for(h=0,Y=m.length;h<Y;h+=3)ue(g,re,m[h],m[h+1],m[h+2],o[h],o[h+1],o[h+2]);break;default:throw new Error("illegal figure")}}class le extends ee{constructor(ne){super(),this._coords=ne[2],this._colors=ne[3],this._figures=ne[4],this._bounds=ne[5],this._bbox=ne[7],this._background=ne[8],this.matrix=null}_createMeshCanvas(ne,re,m){const fe=Math.floor(this._bounds[0]),ae=Math.floor(this._bounds[1]),Z=Math.ceil(this._bounds[2])-fe,pe=Math.ceil(this._bounds[3])-ae,Ie=Math.min(Math.ceil(Math.abs(Z*ne[0]*1.1)),3e3),Ue=Math.min(Math.ceil(Math.abs(pe*ne[1]*1.1)),3e3),Me=Z/Ie,Fe=pe/Ue,Pe={coords:this._coords,colors:this._colors,offsetX:-fe,offsetY:-ae,scaleX:1/Me,scaleY:1/Fe},xe=Ie+2*2,ke=Ue+2*2,Ne=m.getCanvas("mesh",xe,ke,!1),He=Ne.context,Ze=He.createImageData(Ie,Ue);if(re){const $=Ze.data;for(let b=0,de=$.length;b<de;b+=4)$[b]=re[0],$[b+1]=re[1],$[b+2]=re[2],$[b+3]=255}for(const $ of this._figures)ye(Ze,$,Pe);return He.putImageData(Ze,2,2),{canvas:Ne.canvas,offsetX:fe-2*Me,offsetY:ae-2*Fe,scaleX:Me,scaleY:Fe}}getPattern(ne,re,m,o){ie(ne,this._bbox);let h;if(o===he.SHADING)h=e.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(ne));else if(h=e.Util.singularValueDecompose2dScale(re.baseTransform),this.matrix){const fe=e.Util.singularValueDecompose2dScale(this.matrix);h=[h[0]*fe[0],h[1]*fe[1]]}const Y=this._createMeshCanvas(h,o===he.SHADING?null:this._background,re.cachedCanvases);return o!==he.SHADING&&(ne.setTransform(...re.baseTransform),this.matrix&&ne.transform(...this.matrix)),ne.translate(Y.offsetX,Y.offsetY),ne.scale(Y.scaleX,Y.scaleY),ne.createPattern(Y.canvas,"no-repeat")}}class se extends ee{getPattern(){return"hotpink"}}function _(g){switch(g[0]){case"RadialAxial":return new k(g);case"Mesh":return new le(g);case"Dummy":return new se}throw new Error(`Unknown IR type: ${g[0]}`)}const s={COLORED:1,UNCOLORED:2};class c{static get MAX_PATTERN_SIZE(){return(0,e.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(ne,re,m,o,h){this.operatorList=ne[2],this.matrix=ne[3]||[1,0,0,1,0,0],this.bbox=ne[4],this.xstep=ne[5],this.ystep=ne[6],this.paintType=ne[7],this.tilingType=ne[8],this.color=re,this.ctx=m,this.canvasGraphicsFactory=o,this.baseTransform=h}createPatternCanvas(ne){const re=this.operatorList,m=this.bbox,o=this.xstep,h=this.ystep,Y=this.paintType,fe=this.tilingType,ae=this.color,Z=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+fe);const pe=m[0],Ie=m[1],Ue=m[2],Me=m[3],Fe=e.Util.singularValueDecompose2dScale(this.matrix),Pe=e.Util.singularValueDecompose2dScale(this.baseTransform),xe=[Fe[0]*Pe[0],Fe[1]*Pe[1]],ke=this.getSizeAndScale(o,this.ctx.canvas.width,xe[0]),Ne=this.getSizeAndScale(h,this.ctx.canvas.height,xe[1]),He=ne.cachedCanvases.getCanvas("pattern",ke.size,Ne.size,!0),Ze=He.context,Se=Z.createCanvasGraphics(Ze);Se.groupLevel=ne.groupLevel,this.setFillAndStrokeStyleToContext(Se,Y,ae);let $=pe,b=Ie,de=Ue,be=Me;return pe<0&&($=0,de+=Math.abs(pe)),Ie<0&&(b=0,be+=Math.abs(Ie)),Ze.translate(-(ke.scale*$),-(Ne.scale*b)),Se.transform(ke.scale,0,0,Ne.scale,0,0),Ze.save(),this.clipBbox(Se,$,b,de,be),Se.baseTransform=(0,a.getCurrentTransform)(Se.ctx),Se.executeOperatorList(re),Se.endDrawing(),{canvas:He.canvas,scaleX:ke.scale,scaleY:Ne.scale,offsetX:$,offsetY:b}}getSizeAndScale(ne,re,m){ne=Math.abs(ne);const o=Math.max(c.MAX_PATTERN_SIZE,re);let h=Math.ceil(ne*m);return h>=o?h=o:m=h/ne,{scale:m,size:h}}clipBbox(ne,re,m,o,h){const Y=o-re,fe=h-m;ne.ctx.rect(re,m,Y,fe),ne.current.updateRectMinMax((0,a.getCurrentTransform)(ne.ctx),[re,m,o,h]),ne.clip(),ne.endPath()}setFillAndStrokeStyleToContext(ne,re,m){const o=ne.ctx,h=ne.current;switch(re){case s.COLORED:const Y=this.ctx;o.fillStyle=Y.fillStyle,o.strokeStyle=Y.strokeStyle,h.fillColor=Y.fillStyle,h.strokeColor=Y.strokeStyle;break;case s.UNCOLORED:const fe=e.Util.makeHexColor(m[0],m[1],m[2]);o.fillStyle=fe,o.strokeStyle=fe,h.fillColor=fe,h.strokeColor=fe;break;default:throw new e.FormatError(`Unsupported paint type: ${re}`)}}getPattern(ne,re,m,o){let h=m;o!==he.SHADING&&(h=e.Util.transform(h,re.baseTransform),this.matrix&&(h=e.Util.transform(h,this.matrix)));const Y=this.createPatternCanvas(re);let fe=new DOMMatrix(h);fe=fe.translate(Y.offsetX,Y.offsetY),fe=fe.scale(1/Y.scaleX,1/Y.scaleY);const ae=ne.createPattern(Y.canvas,"repeat");try{ae.setTransform(fe)}catch(Z){(0,e.warn)(`TilingPattern.getPattern: "${Z==null?void 0:Z.message}".`)}return ae}}i.TilingPattern=c},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.applyMaskImageData=a;var e=j(1);function a({src:oe,srcPos:he=0,dest:ie,destPos:ee=0,width:k,height:ue,inverseDecode:ye=!1}){const le=e.FeatureTest.isLittleEndian?4278190080:255,[se,_]=ye?[0,le]:[le,0],s=k>>3,c=k&7,g=oe.length;ie=new Uint32Array(ie.buffer);for(let ne=0;ne<ue;ne++){for(const m=he+s;he<m;he++){const o=he<g?oe[he]:255;ie[ee++]=o&128?_:se,ie[ee++]=o&64?_:se,ie[ee++]=o&32?_:se,ie[ee++]=o&16?_:se,ie[ee++]=o&8?_:se,ie[ee++]=o&4?_:se,ie[ee++]=o&2?_:se,ie[ee++]=o&1?_:se}if(c===0)continue;const re=he<g?oe[he++]:255;for(let m=0;m<c;m++)ie[ee++]=re&1<<7-m?_:se}return{srcPos:he,destPos:ee}}},(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlobalWorkerOptions=void 0;const j=Object.create(null);i.GlobalWorkerOptions=j,j.workerPort=j.workerPort===void 0?null:j.workerPort,j.workerSrc=j.workerSrc===void 0?"":j.workerSrc},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MessageHandler=void 0;var e=j(1);const a={UNKNOWN:0,DATA:1,ERROR:2},oe={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function he(ee){switch(ee instanceof Error||typeof ee=="object"&&ee!==null||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ee.name){case"AbortException":return new e.AbortException(ee.message);case"MissingPDFException":return new e.MissingPDFException(ee.message);case"PasswordException":return new e.PasswordException(ee.message,ee.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(ee.message,ee.status);case"UnknownErrorException":return new e.UnknownErrorException(ee.message,ee.details);default:return new e.UnknownErrorException(ee.message,ee.toString())}}class ie{constructor(k,ue,ye){this.sourceName=k,this.targetName=ue,this.comObj=ye,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=le=>{const se=le.data;if(se.targetName!==this.sourceName)return;if(se.stream){this._processStreamMessage(se);return}if(se.callback){const s=se.callbackId,c=this.callbackCapabilities[s];if(!c)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],se.callback===a.DATA)c.resolve(se.data);else if(se.callback===a.ERROR)c.reject(he(se.reason));else throw new Error("Unexpected callback case");return}const _=this.actionHandler[se.action];if(!_)throw new Error(`Unknown action from worker: ${se.action}`);if(se.callbackId){const s=this.sourceName,c=se.sourceName;new Promise(function(g){g(_(se.data))}).then(function(g){ye.postMessage({sourceName:s,targetName:c,callback:a.DATA,callbackId:se.callbackId,data:g})},function(g){ye.postMessage({sourceName:s,targetName:c,callback:a.ERROR,callbackId:se.callbackId,reason:he(g)})});return}if(se.streamId){this._createStreamSink(se);return}_(se.data)},ye.addEventListener("message",this._onComObjOnMessage)}on(k,ue){const ye=this.actionHandler;if(ye[k])throw new Error(`There is already an actionName called "${k}"`);ye[k]=ue}send(k,ue,ye){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:k,data:ue},ye)}sendWithPromise(k,ue,ye){const le=this.callbackId++,se=(0,e.createPromiseCapability)();this.callbackCapabilities[le]=se;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:k,callbackId:le,data:ue},ye)}catch(_){se.reject(_)}return se.promise}sendWithStream(k,ue,ye,le){const se=this.streamId++,_=this.sourceName,s=this.targetName,c=this.comObj;return new ReadableStream({start:g=>{const ne=(0,e.createPromiseCapability)();return this.streamControllers[se]={controller:g,startCall:ne,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:_,targetName:s,action:k,streamId:se,data:ue,desiredSize:g.desiredSize},le),ne.promise},pull:g=>{const ne=(0,e.createPromiseCapability)();return this.streamControllers[se].pullCall=ne,c.postMessage({sourceName:_,targetName:s,stream:oe.PULL,streamId:se,desiredSize:g.desiredSize}),ne.promise},cancel:g=>{(0,e.assert)(g instanceof Error,"cancel must have a valid reason");const ne=(0,e.createPromiseCapability)();return this.streamControllers[se].cancelCall=ne,this.streamControllers[se].isClosed=!0,c.postMessage({sourceName:_,targetName:s,stream:oe.CANCEL,streamId:se,reason:he(g)}),ne.promise}},ye)}_createStreamSink(k){const ue=k.streamId,ye=this.sourceName,le=k.sourceName,se=this.comObj,_=this,s=this.actionHandler[k.action],c={enqueue(g,ne=1,re){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=ne,m>0&&this.desiredSize<=0&&(this.sinkCapability=(0,e.createPromiseCapability)(),this.ready=this.sinkCapability.promise),se.postMessage({sourceName:ye,targetName:le,stream:oe.ENQUEUE,streamId:ue,chunk:g},re)},close(){this.isCancelled||(this.isCancelled=!0,se.postMessage({sourceName:ye,targetName:le,stream:oe.CLOSE,streamId:ue}),delete _.streamSinks[ue])},error(g){(0,e.assert)(g instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,se.postMessage({sourceName:ye,targetName:le,stream:oe.ERROR,streamId:ue,reason:he(g)}))},sinkCapability:(0,e.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:k.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[ue]=c,new Promise(function(g){g(s(k.data,c))}).then(function(){se.postMessage({sourceName:ye,targetName:le,stream:oe.START_COMPLETE,streamId:ue,success:!0})},function(g){se.postMessage({sourceName:ye,targetName:le,stream:oe.START_COMPLETE,streamId:ue,reason:he(g)})})}_processStreamMessage(k){const ue=k.streamId,ye=this.sourceName,le=k.sourceName,se=this.comObj,_=this.streamControllers[ue],s=this.streamSinks[ue];switch(k.stream){case oe.START_COMPLETE:k.success?_.startCall.resolve():_.startCall.reject(he(k.reason));break;case oe.PULL_COMPLETE:k.success?_.pullCall.resolve():_.pullCall.reject(he(k.reason));break;case oe.PULL:if(!s){se.postMessage({sourceName:ye,targetName:le,stream:oe.PULL_COMPLETE,streamId:ue,success:!0});break}s.desiredSize<=0&&k.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=k.desiredSize,new Promise(function(c){c(s.onPull&&s.onPull())}).then(function(){se.postMessage({sourceName:ye,targetName:le,stream:oe.PULL_COMPLETE,streamId:ue,success:!0})},function(c){se.postMessage({sourceName:ye,targetName:le,stream:oe.PULL_COMPLETE,streamId:ue,reason:he(c)})});break;case oe.ENQUEUE:if((0,e.assert)(_,"enqueue should have stream controller"),_.isClosed)break;_.controller.enqueue(k.chunk);break;case oe.CLOSE:if((0,e.assert)(_,"close should have stream controller"),_.isClosed)break;_.isClosed=!0,_.controller.close(),this._deleteStreamController(_,ue);break;case oe.ERROR:(0,e.assert)(_,"error should have stream controller"),_.controller.error(he(k.reason)),this._deleteStreamController(_,ue);break;case oe.CANCEL_COMPLETE:k.success?_.cancelCall.resolve():_.cancelCall.reject(he(k.reason)),this._deleteStreamController(_,ue);break;case oe.CANCEL:if(!s)break;new Promise(function(c){c(s.onCancel&&s.onCancel(he(k.reason)))}).then(function(){se.postMessage({sourceName:ye,targetName:le,stream:oe.CANCEL_COMPLETE,streamId:ue,success:!0})},function(c){se.postMessage({sourceName:ye,targetName:le,stream:oe.CANCEL_COMPLETE,streamId:ue,reason:he(c)})}),s.sinkCapability.reject(he(k.reason)),s.isCancelled=!0,delete this.streamSinks[ue];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(k,ue){await Promise.allSettled([k.startCall&&k.startCall.promise,k.pullCall&&k.pullCall.promise,k.cancelCall&&k.cancelCall.promise]),delete this.streamControllers[ue]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}i.MessageHandler=ie},(d,i,j)=>{var oe,he;Object.defineProperty(i,"__esModule",{value:!0}),i.Metadata=void 0;var e=j(1);class a{constructor({parsedData:ee,rawData:k}){We(this,oe,void 0);We(this,he,void 0);Je(this,oe,ee),Je(this,he,k)}getRaw(){return ge(this,he)}get(ee){return ge(this,oe).get(ee)??null}getAll(){return(0,e.objectFromMap)(ge(this,oe))}has(ee){return ge(this,oe).has(ee)}}oe=new WeakMap,he=new WeakMap,i.Metadata=a},(d,i,j)=>{var ie,ee,k,ue,ye,le,zt;Object.defineProperty(i,"__esModule",{value:!0}),i.OptionalContentConfig=void 0;var e=j(1);const a=Symbol("INTERNAL");class oe{constructor(s,c){We(this,ie,!0);this.name=s,this.intent=c}get visible(){return ge(this,ie)}_setVisible(s,c){s!==a&&(0,e.unreachable)("Internal method `_setVisible` called."),Je(this,ie,c)}}ie=new WeakMap;class he{constructor(s){We(this,le);We(this,ee,!0);We(this,k,new Map);We(this,ue,null);We(this,ye,null);if(this.name=null,this.creator=null,s!==null){this.name=s.name,this.creator=s.creator,Je(this,ye,s.order);for(const c of s.groups)ge(this,k).set(c.id,new oe(c.name,c.intent));if(s.baseState==="OFF")for(const c of ge(this,k).values())c._setVisible(a,!1);for(const c of s.on)ge(this,k).get(c)._setVisible(a,!0);for(const c of s.off)ge(this,k).get(c)._setVisible(a,!1);Je(this,ue,new Map);for(const[c,g]of ge(this,k))ge(this,ue).set(c,g.visible)}}isVisible(s){if(ge(this,k).size===0)return!0;if(!s)return(0,e.warn)("Optional content group not defined."),!0;if(s.type==="OCG")return ge(this,k).has(s.id)?ge(this,k).get(s.id).visible:((0,e.warn)(`Optional content group not found: ${s.id}`),!0);if(s.type==="OCMD"){if(s.expression)return Ge(this,le,zt).call(this,s.expression);if(!s.policy||s.policy==="AnyOn"){for(const c of s.ids){if(!ge(this,k).has(c))return(0,e.warn)(`Optional content group not found: ${c}`),!0;if(ge(this,k).get(c).visible)return!0}return!1}else if(s.policy==="AllOn"){for(const c of s.ids){if(!ge(this,k).has(c))return(0,e.warn)(`Optional content group not found: ${c}`),!0;if(!ge(this,k).get(c).visible)return!1}return!0}else if(s.policy==="AnyOff"){for(const c of s.ids){if(!ge(this,k).has(c))return(0,e.warn)(`Optional content group not found: ${c}`),!0;if(!ge(this,k).get(c).visible)return!0}return!1}else if(s.policy==="AllOff"){for(const c of s.ids){if(!ge(this,k).has(c))return(0,e.warn)(`Optional content group not found: ${c}`),!0;if(ge(this,k).get(c).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${s.policy}.`),!0}return(0,e.warn)(`Unknown group type ${s.type}.`),!0}setVisibility(s,c=!0){if(!ge(this,k).has(s)){(0,e.warn)(`Optional content group not found: ${s}`);return}ge(this,k).get(s)._setVisible(a,!!c),Je(this,ee,null)}get hasInitialVisibility(){if(ge(this,ee)!==null)return ge(this,ee);for(const[s,c]of ge(this,k)){const g=ge(this,ue).get(s);if(c.visible!==g)return Je(this,ee,!1)}return Je(this,ee,!0)}getOrder(){return ge(this,k).size?ge(this,ye)?ge(this,ye).slice():[...ge(this,k).keys()]:null}getGroups(){return ge(this,k).size>0?(0,e.objectFromMap)(ge(this,k)):null}getGroup(s){return ge(this,k).get(s)||null}}ee=new WeakMap,k=new WeakMap,ue=new WeakMap,ye=new WeakMap,le=new WeakSet,zt=function(s){const c=s.length;if(c<2)return!0;const g=s[0];for(let ne=1;ne<c;ne++){const re=s[ne];let m;if(Array.isArray(re))m=Ge(this,le,zt).call(this,re);else if(ge(this,k).has(re))m=ge(this,k).get(re).visible;else return(0,e.warn)(`Optional content group not found: ${re}`),!0;switch(g){case"And":if(!m)return!1;break;case"Or":if(m)return!0;break;case"Not":return!m;default:return!0}}return g==="And"},i.OptionalContentConfig=he},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFDataTransportStream=void 0;var e=j(1),a=j(8);class oe{constructor(k,ue){(0,e.assert)(ue,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=k.progressiveDone||!1,this._contentDispositionFilename=k.contentDispositionFilename||null;const ye=k.initialData;if((ye==null?void 0:ye.length)>0){const le=new Uint8Array(ye).buffer;this._queuedChunks.push(le)}this._pdfDataRangeTransport=ue,this._isStreamingSupported=!k.disableStream,this._isRangeSupported=!k.disableRange,this._contentLength=k.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((le,se)=>{this._onReceiveData({begin:le,chunk:se})}),this._pdfDataRangeTransport.addProgressListener((le,se)=>{this._onProgress({loaded:le,total:se})}),this._pdfDataRangeTransport.addProgressiveReadListener(le=>{this._onReceiveData({chunk:le})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(k){const ue=new Uint8Array(k.chunk).buffer;if(k.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(ue):this._queuedChunks.push(ue);else{const ye=this._rangeReaders.some(function(le){return le._begin!==k.begin?!1:(le._enqueue(ue),!0)});(0,e.assert)(ye,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var k;return((k=this._fullRequestReader)==null?void 0:k._loaded)??0}_onProgress(k){if(k.total===void 0){const ue=this._rangeReaders[0];ue!=null&&ue.onProgress&&ue.onProgress({loaded:k.loaded})}else{const ue=this._fullRequestReader;ue!=null&&ue.onProgress&&ue.onProgress({loaded:k.loaded,total:k.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(k){const ue=this._rangeReaders.indexOf(k);ue>=0&&this._rangeReaders.splice(ue,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const k=this._queuedChunks;return this._queuedChunks=null,new he(this,k,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(k,ue){if(ue<=this._progressiveDataLength)return null;const ye=new ie(this,k,ue);return this._pdfDataRangeTransport.requestDataRange(k,ue),this._rangeReaders.push(ye),ye}cancelAllRequests(k){this._fullRequestReader&&this._fullRequestReader.cancel(k);for(const ue of this._rangeReaders.slice(0))ue.cancel(k);this._pdfDataRangeTransport.abort()}}i.PDFDataTransportStream=oe;class he{constructor(k,ue,ye=!1,le=null){this._stream=k,this._done=ye||!1,this._filename=(0,a.isPdfFile)(le)?le:null,this._queuedChunks=ue||[],this._loaded=0;for(const se of this._queuedChunks)this._loaded+=se.byteLength;this._requests=[],this._headersReady=Promise.resolve(),k._fullRequestReader=this,this.onProgress=null}_enqueue(k){this._done||(this._requests.length>0?this._requests.shift().resolve({value:k,done:!1}):this._queuedChunks.push(k),this._loaded+=k.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const k=(0,e.createPromiseCapability)();return this._requests.push(k),k.promise}cancel(k){this._done=!0;for(const ue of this._requests)ue.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ie{constructor(k,ue,ye){this._stream=k,this._begin=ue,this._end=ye,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(k){if(!this._done){if(this._requests.length===0)this._queuedChunk=k;else{this._requests.shift().resolve({value:k,done:!1});for(const ye of this._requests)ye.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const ue=this._queuedChunk;return this._queuedChunk=null,{value:ue,done:!1}}if(this._done)return{value:void 0,done:!0};const k=(0,e.createPromiseCapability)();return this._requests.push(k),k.promise}cancel(k){this._done=!0;for(const ue of this._requests)ue.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaText=void 0;class j{static textContent(a){const oe=[],he={items:oe,styles:Object.create(null)};function ie(ee){var ye;if(!ee)return;let k=null;const ue=ee.name;if(ue==="#text")k=ee.value;else if(j.shouldBuildText(ue))(ye=ee==null?void 0:ee.attributes)!=null&&ye.textContent?k=ee.attributes.textContent:ee.value&&(k=ee.value);else return;if(k!==null&&oe.push({str:k}),!!ee.children)for(const le of ee.children)ie(le)}return ie(a),he}static shouldBuildText(a){return!(a==="textarea"||a==="input"||a==="option"||a==="select")}}i.XfaText=j},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NodeStandardFontDataFactory=i.NodeCanvasFactory=i.NodeCMapReaderFactory=void 0;var e=j(9);const a=function(ee){return new Promise((k,ue)=>{require$$5.readFile(ee,(le,se)=>{if(le||!se){ue(new Error(le));return}k(new Uint8Array(se))})})};class oe extends e.BaseCanvasFactory{_createCanvas(k,ue){return require$$5.createCanvas(k,ue)}}i.NodeCanvasFactory=oe;class he extends e.BaseCMapReaderFactory{_fetchData(k,ue){return a(k).then(ye=>({cMapData:ye,compressionType:ue}))}}i.NodeCMapReaderFactory=he;class ie extends e.BaseStandardFontDataFactory{_fetchData(k){return a(k)}}i.NodeStandardFontDataFactory=ie},(d,i,j)=>{var ee,k,ue,ye,le,se,_,s,c,Vt,ne,hn,m,Xt,h,dn;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditorLayer=void 0;var e=j(7),a=j(1),oe=j(23),he=j(24);const fe=class fe{constructor(Z){We(this,c);We(this,ne);We(this,m);We(this,h);We(this,ee,void 0);We(this,k,!1);We(this,ue,this.pointerup.bind(this));We(this,ye,this.pointerdown.bind(this));We(this,le,new Map);We(this,se,!1);We(this,_,!1);We(this,s,void 0);fe._initialized||(fe._initialized=!0,oe.FreeTextEditor.initialize(Z.l10n),he.InkEditor.initialize(Z.l10n),Z.uiManager.registerEditorTypes([oe.FreeTextEditor,he.InkEditor])),Je(this,s,Z.uiManager),this.annotationStorage=Z.annotationStorage,this.pageIndex=Z.pageIndex,this.div=Z.div,Je(this,ee,Z.accessibilityManager),ge(this,s).addLayer(this)}updateToolbar(Z){ge(this,s).updateToolbar(Z)}updateMode(Z=ge(this,s).getMode()){Ge(this,h,dn).call(this),Z===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),ge(this,s).unselectAll()}addInkEditorIfNeeded(Z){if(!Z&&ge(this,s).getMode()!==a.AnnotationEditorType.INK)return;if(!Z){for(const Ie of ge(this,le).values())if(Ie.isEmpty()){Ie.setInBackground();return}}Ge(this,m,Xt).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(Z){ge(this,s).setEditingState(Z)}addCommands(Z){ge(this,s).addCommands(Z)}enable(){this.div.style.pointerEvents="auto";for(const Z of ge(this,le).values())Z.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const Z of ge(this,le).values())Z.disableEditing()}setActiveEditor(Z){ge(this,s).getActive()!==Z&&ge(this,s).setActiveEditor(Z)}enableClick(){this.div.addEventListener("pointerdown",ge(this,ye)),this.div.addEventListener("pointerup",ge(this,ue))}disableClick(){this.div.removeEventListener("pointerdown",ge(this,ye)),this.div.removeEventListener("pointerup",ge(this,ue))}attach(Z){ge(this,le).set(Z.id,Z)}detach(Z){var pe;ge(this,le).delete(Z.id),(pe=ge(this,ee))==null||pe.removePointerInTextLayer(Z.contentDiv)}remove(Z){ge(this,s).removeEditor(Z),this.detach(Z),this.annotationStorage.remove(Z.id),Z.div.style.display="none",setTimeout(()=>{Z.div.style.display="",Z.div.remove(),Z.isAttachedToDOM=!1,document.activeElement===document.body&&ge(this,s).focusMainContainer()},0),ge(this,_)||this.addInkEditorIfNeeded(!1)}add(Z){if(Ge(this,c,Vt).call(this,Z),ge(this,s).addEditor(Z),this.attach(Z),!Z.isAttachedToDOM){const pe=Z.render();this.div.append(pe),Z.isAttachedToDOM=!0}this.moveEditorInDOM(Z),Z.onceAdded(),this.addToAnnotationStorage(Z)}moveEditorInDOM(Z){var pe;(pe=ge(this,ee))==null||pe.moveElementInDOM(this.div,Z.div,Z.contentDiv,!0)}addToAnnotationStorage(Z){!Z.isEmpty()&&!this.annotationStorage.has(Z.id)&&this.annotationStorage.setValue(Z.id,Z)}addOrRebuild(Z){Z.needsToBeRebuilt()?Z.rebuild():this.add(Z)}addANewEditor(Z){const pe=()=>{this.addOrRebuild(Z)},Ie=()=>{Z.remove()};this.addCommands({cmd:pe,undo:Ie,mustExec:!0})}addUndoableEditor(Z){const pe=()=>{this.addOrRebuild(Z)},Ie=()=>{Z.remove()};this.addCommands({cmd:pe,undo:Ie,mustExec:!1})}getNextId(){return ge(this,s).getId()}deserialize(Z){switch(Z.annotationType){case a.AnnotationEditorType.FREETEXT:return oe.FreeTextEditor.deserialize(Z,this);case a.AnnotationEditorType.INK:return he.InkEditor.deserialize(Z,this)}return null}setSelected(Z){ge(this,s).setSelected(Z)}toggleSelected(Z){ge(this,s).toggleSelected(Z)}isSelected(Z){return ge(this,s).isSelected(Z)}unselect(Z){ge(this,s).unselect(Z)}pointerup(Z){const pe=e.KeyboardManager.platform.isMac;if(!(Z.button!==0||Z.ctrlKey&&pe)&&Z.target===this.div&&ge(this,se)){if(Je(this,se,!1),!ge(this,k)){Je(this,k,!0);return}Ge(this,m,Xt).call(this,Z)}}pointerdown(Z){const pe=e.KeyboardManager.platform.isMac;if(Z.button!==0||Z.ctrlKey&&pe||Z.target!==this.div)return;Je(this,se,!0);const Ie=ge(this,s).getActive();Je(this,k,!Ie||Ie.isEmpty())}drop(Z){const pe=Z.dataTransfer.getData("text/plain"),Ie=ge(this,s).getEditor(pe);if(!Ie)return;Z.preventDefault(),Z.dataTransfer.dropEffect="move",Ge(this,c,Vt).call(this,Ie);const Ue=this.div.getBoundingClientRect(),Me=Z.clientX-Ue.x,Fe=Z.clientY-Ue.y;Ie.translate(Me-Ie.startX,Fe-Ie.startY),this.moveEditorInDOM(Ie),Ie.div.focus()}dragover(Z){Z.preventDefault()}destroy(){var Z,pe;((Z=ge(this,s).getActive())==null?void 0:Z.parent)===this&&ge(this,s).setActiveEditor(null);for(const Ie of ge(this,le).values())(pe=ge(this,ee))==null||pe.removePointerInTextLayer(Ie.contentDiv),Ie.isAttachedToDOM=!1,Ie.div.remove(),Ie.parent=null;this.div=null,ge(this,le).clear(),ge(this,s).removeLayer(this)}render(Z){this.viewport=Z.viewport,(0,e.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const pe of ge(this,s).getEditors(this.pageIndex))this.add(pe);this.updateMode()}update(Z){this.viewport=Z.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[Z,pe,Ie,Ue]=this.viewport.viewBox,Me=Ie-Z,Fe=Ue-pe;return[Me,Fe]}get viewportBaseDimensions(){const{width:Z,height:pe,rotation:Ie}=this.viewport;return Ie%180===0?[Z,pe]:[pe,Z]}setDimensions(){const{width:Z,height:pe,rotation:Ie}=this.viewport,Ue=Ie%180!==0,Me=Math.floor(Z)+"px",Fe=Math.floor(pe)+"px";this.div.style.width=Ue?Fe:Me,this.div.style.height=Ue?Me:Fe,this.div.setAttribute("data-main-rotation",Ie)}};ee=new WeakMap,k=new WeakMap,ue=new WeakMap,ye=new WeakMap,le=new WeakMap,se=new WeakMap,_=new WeakMap,s=new WeakMap,c=new WeakSet,Vt=function(Z){var pe;Z.parent!==this&&(this.attach(Z),Z.pageIndex=this.pageIndex,(pe=Z.parent)==null||pe.detach(Z),Z.parent=this,Z.div&&Z.isAttachedToDOM&&(Z.div.remove(),this.div.append(Z.div)))},ne=new WeakSet,hn=function(Z){switch(ge(this,s).getMode()){case a.AnnotationEditorType.FREETEXT:return new oe.FreeTextEditor(Z);case a.AnnotationEditorType.INK:return new he.InkEditor(Z)}return null},m=new WeakSet,Xt=function(Z){const pe=this.getNextId(),Ie=Ge(this,ne,hn).call(this,{parent:this,id:pe,x:Z.offsetX,y:Z.offsetY});return Ie&&this.add(Ie),Ie},h=new WeakSet,dn=function(){Je(this,_,!0);for(const Z of ge(this,le).values())Z.isEmpty()&&Z.remove();Je(this,_,!1)},ft(fe,"_initialized",!1);let ie=fe;i.AnnotationEditorLayer=ie},(d,i,j)=>{var ie,ee,k,ue,ye,le,se,_,fn,c,pn,ne,gn,m,Yt;Object.defineProperty(i,"__esModule",{value:!0}),i.FreeTextEditor=void 0;var e=j(1),a=j(7),oe=j(6);const h=class h extends oe.AnnotationEditor{constructor(ae){super({...ae,name:"freeTextEditor"});We(this,_);We(this,c);We(this,ne);We(this,m);We(this,ie,this.editorDivBlur.bind(this));We(this,ee,this.editorDivFocus.bind(this));We(this,k,this.editorDivKeydown.bind(this));We(this,ue,void 0);We(this,ye,"");We(this,le,!1);We(this,se,void 0);Je(this,ue,ae.color||h._defaultColor||oe.AnnotationEditor._defaultLineColor),Je(this,se,ae.fontSize||h._defaultFontSize)}static initialize(ae){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(pe=>[pe,ae.get(pe)]));const Z=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Z.getPropertyValue("--freetext-padding"))}static updateDefaultParams(ae,Z){switch(ae){case e.AnnotationEditorParamsType.FREETEXT_SIZE:h._defaultFontSize=Z;break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:h._defaultColor=Z;break}}updateParams(ae,Z){switch(ae){case e.AnnotationEditorParamsType.FREETEXT_SIZE:Ge(this,_,fn).call(this,Z);break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:Ge(this,c,pn).call(this,Z);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,h._defaultFontSize],[e.AnnotationEditorParamsType.FREETEXT_COLOR,h._defaultColor||oe.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,ge(this,se)],[e.AnnotationEditorParamsType.FREETEXT_COLOR,ge(this,ue)]]}getInitialTranslation(){return[-h._internalPadding*this.parent.scaleFactor,-(h._internalPadding+ge(this,se))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(e.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",ge(this,k)),this.editorDiv.addEventListener("focus",ge(this,ee)),this.editorDiv.addEventListener("blur",ge(this,ie)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",ge(this,k)),this.editorDiv.removeEventListener("focus",ge(this,ee)),this.editorDiv.removeEventListener("blur",ge(this,ie)),this.div.focus(),this.isEditing=!1)}focusin(ae){super.focusin(ae),ae.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),ge(this,le)||(Je(this,le,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),Je(this,ye,Ge(this,ne,gn).call(this).trimEnd()),Ge(this,m,Yt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(ae){this.enableEditMode(),this.editorDiv.focus()}keydown(ae){ae.target===this.div&&ae.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(ae){h._keyboardManager.exec(this,ae)}editorDivFocus(ae){this.isEditing=!0}editorDivBlur(ae){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let ae,Z;this.width&&(ae=this.x,Z=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),h._l10nPromise.get("editor_free_text_aria_label").then(Ie=>{var Ue;return(Ue=this.editorDiv)==null?void 0:Ue.setAttribute("aria-label",Ie)}),h._l10nPromise.get("free_text_default_content").then(Ie=>{var Ue;return(Ue=this.editorDiv)==null?void 0:Ue.setAttribute("default-content",Ie)}),this.editorDiv.contentEditable=!0;const{style:pe}=this.editorDiv;if(pe.fontSize=`calc(${ge(this,se)}px * var(--scale-factor))`,pe.color=ge(this,ue),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Ie,Ue]=this.parent.viewportBaseDimensions;this.setAt(ae*Ie,Z*Ue,this.width*Ie,this.height*Ue);for(const Me of ge(this,ye).split(`
`)){const Fe=document.createElement("div");Fe.append(Me?document.createTextNode(Me):document.createElement("br")),this.editorDiv.append(Fe)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(ae,Z){const pe=super.deserialize(ae,Z);return Je(pe,se,ae.fontSize),Je(pe,ue,e.Util.makeHexColor(...ae.color)),Je(pe,ye,ae.value),pe}serialize(){if(this.isEmpty())return null;const ae=h._internalPadding*this.parent.scaleFactor,Z=this.getRect(ae,ae),pe=oe.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:e.AnnotationEditorType.FREETEXT,color:pe,fontSize:ge(this,se),value:ge(this,ye),pageIndex:this.parent.pageIndex,rect:Z,rotation:this.rotation}}};ie=new WeakMap,ee=new WeakMap,k=new WeakMap,ue=new WeakMap,ye=new WeakMap,le=new WeakMap,se=new WeakMap,_=new WeakSet,fn=function(ae){const Z=Ie=>{this.editorDiv.style.fontSize=`calc(${Ie}px * var(--scale-factor))`,this.translate(0,-(Ie-ge(this,se))*this.parent.scaleFactor),Je(this,se,Ie),Ge(this,m,Yt).call(this)},pe=ge(this,se);this.parent.addCommands({cmd:()=>{Z(ae)},undo:()=>{Z(pe)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},c=new WeakSet,pn=function(ae){const Z=ge(this,ue);this.parent.addCommands({cmd:()=>{Je(this,ue,ae),this.editorDiv.style.color=ae},undo:()=>{Je(this,ue,Z),this.editorDiv.style.color=Z},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ne=new WeakSet,gn=function(){const ae=this.editorDiv.getElementsByTagName("div");if(ae.length===0)return this.editorDiv.innerText;const Z=[];for(let pe=0,Ie=ae.length;pe<Ie;pe++){const Me=ae[pe].firstChild;(Me==null?void 0:Me.nodeName)==="#text"?Z.push(Me.data):Z.push("")}return Z.join(`
`)},m=new WeakSet,Yt=function(){const[ae,Z]=this.parent.viewportBaseDimensions,pe=this.div.getBoundingClientRect();this.width=pe.width/ae,this.height=pe.height/Z},ft(h,"_freeTextDefaultContent",""),ft(h,"_l10nPromise"),ft(h,"_internalPadding",0),ft(h,"_defaultColor",null),ft(h,"_defaultFontSize",10),ft(h,"_keyboardManager",new a.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],h.prototype.commitOrRemove]])),ft(h,"_type","freetext");let he=h;i.FreeTextEditor=he},(d,i,j)=>{var k,ue,ye,le,se,_,s,c,g,ne,re,m,o,h,Y,mn,ae,yn,pe,_n,Ue,bn,Fe,Kt,xe,vn,Ne,An,Ze,Sn,$,Tt,de,Jt,ve,Lt,we,Nt,f,kt,te,Qt,me,jt,je,Zt,De,En,Le,Pn,Xe,Tn,Ve,en,nt,Ut,ot,Ft,ht,tn;Object.defineProperty(i,"__esModule",{value:!0}),i.InkEditor=void 0,Object.defineProperty(i,"fitCurve",{enumerable:!0,get:function(){return oe.fitCurve}});var e=j(1),a=j(6),oe=j(25),he=j(7);const ie=16,st=class st extends a.AnnotationEditor{constructor(Be){super({...Be,name:"inkEditor"});We(this,Y);We(this,ae);We(this,pe);We(this,Ue);We(this,Fe);We(this,xe);We(this,Ne);We(this,Ze);We(this,$);We(this,de);We(this,ve);We(this,we);We(this,f);We(this,te);We(this,me);We(this,De);We(this,Le);We(this,Xe);We(this,Ve);We(this,nt);We(this,ot);We(this,ht);We(this,k,0);We(this,ue,0);We(this,ye,0);We(this,le,this.canvasPointermove.bind(this));We(this,se,this.canvasPointerleave.bind(this));We(this,_,this.canvasPointerup.bind(this));We(this,s,this.canvasPointerdown.bind(this));We(this,c,!1);We(this,g,!1);We(this,ne,null);We(this,re,null);We(this,m,0);We(this,o,0);We(this,h,null);this.color=Be.color||null,this.thickness=Be.thickness||null,this.opacity=Be.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(Be){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(Ye=>[Ye,Be.get(Ye)]))}static updateDefaultParams(Be,Ye){switch(Be){case e.AnnotationEditorParamsType.INK_THICKNESS:st._defaultThickness=Ye;break;case e.AnnotationEditorParamsType.INK_COLOR:st._defaultColor=Ye;break;case e.AnnotationEditorParamsType.INK_OPACITY:st._defaultOpacity=Ye/100;break}}updateParams(Be,Ye){switch(Be){case e.AnnotationEditorParamsType.INK_THICKNESS:Ge(this,Y,mn).call(this,Ye);break;case e.AnnotationEditorParamsType.INK_COLOR:Ge(this,ae,yn).call(this,Ye);break;case e.AnnotationEditorParamsType.INK_OPACITY:Ge(this,pe,_n).call(this,Ye);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,st._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,st._defaultColor||a.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(st._defaultOpacity*100)]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||st._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,this.color||st._defaultColor||a.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??st._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(Ge(this,ve,Lt).call(this),Ge(this,we,Nt).call(this)),this.isAttachedToDOM||(this.parent.add(this),Ge(this,f,kt).call(this)),Ge(this,ot,Ft).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,ge(this,re).disconnect(),Je(this,re,null),super.remove())}enableEditMode(){ge(this,c)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",ge(this,s)),this.canvas.addEventListener("pointerup",ge(this,_)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",ge(this,s)),this.canvas.removeEventListener("pointerup",ge(this,_)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){ge(this,c)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Je(this,c,!0),this.div.classList.add("disabled"),Ge(this,ot,Ft).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(Be){super.focusin(Be),this.enableEditMode()}canvasPointerdown(Be){Be.button!==0||!this.isInEditMode()||ge(this,c)||(this.setInForeground(),Be.type!=="mouse"&&this.div.focus(),Be.stopPropagation(),this.canvas.addEventListener("pointerleave",ge(this,se)),this.canvas.addEventListener("pointermove",ge(this,le)),Ge(this,xe,vn).call(this,Be.offsetX,Be.offsetY))}canvasPointermove(Be){Be.stopPropagation(),Ge(this,Ne,An).call(this,Be.offsetX,Be.offsetY)}canvasPointerup(Be){Be.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(Be.stopPropagation(),Ge(this,de,Jt).call(this,Be),this.setInBackground())}canvasPointerleave(Be){Ge(this,de,Jt).call(this,Be),this.setInBackground()}render(){if(this.div)return this.div;let Be,Ye;this.width&&(Be=this.x,Ye=this.y),super.render(),st._l10nPromise.get("editor_ink_aria_label").then(Qe=>{var tt;return(tt=this.div)==null?void 0:tt.setAttribute("aria-label",Qe)});const[Oe,Te,Ce,Ke]=Ge(this,Ue,bn).call(this);if(this.setAt(Oe,Te,0,0),this.setDims(Ce,Ke),Ge(this,ve,Lt).call(this),this.width){const[Qe,tt]=this.parent.viewportBaseDimensions;this.setAt(Be*Qe,Ye*tt,this.width*Qe,this.height*tt),Je(this,g,!0),Ge(this,f,kt).call(this),this.setDims(this.width*Qe,this.height*tt),Ge(this,$,Tt).call(this),Ge(this,ht,tn).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Ge(this,we,Nt).call(this),this.div}setDimensions(Be,Ye){const Oe=Math.round(Be),Te=Math.round(Ye);if(ge(this,m)===Oe&&ge(this,o)===Te)return;Je(this,m,Oe),Je(this,o,Te),this.canvas.style.visibility="hidden",ge(this,k)&&Math.abs(ge(this,k)-Be/Ye)>.01&&(Ye=Math.ceil(Be/ge(this,k)),this.setDims(Be,Ye));const[Ce,Ke]=this.parent.viewportBaseDimensions;this.width=Be/Ce,this.height=Ye/Ke,ge(this,c)&&Ge(this,te,Qt).call(this,Be,Ye),Ge(this,f,kt).call(this),Ge(this,$,Tt).call(this),this.canvas.style.visibility="visible"}static deserialize(Be,Ye){var gt,ut;const Oe=super.deserialize(Be,Ye);Oe.thickness=Be.thickness,Oe.color=e.Util.makeHexColor(...Be.color),Oe.opacity=Be.opacity;const[Te,Ce]=Ye.pageDimensions,Ke=Oe.width*Te,Qe=Oe.height*Ce,tt=Ye.scaleFactor,rt=Be.thickness/2;Je(Oe,k,Ke/Qe),Je(Oe,c,!0),Je(Oe,m,Math.round(Ke)),Je(Oe,o,Math.round(Qe));for(const{bezier:at}of Be.paths){const yt=[];Oe.paths.push(yt);let mt=tt*(at[0]-rt),vt=tt*(Qe-at[1]-rt);for(let _t=2,St=at.length;_t<St;_t+=6){const xt=tt*(at[_t]-rt),wt=tt*(Qe-at[_t+1]-rt),Pt=tt*(at[_t+2]-rt),bt=tt*(Qe-at[_t+3]-rt),Et=tt*(at[_t+4]-rt),Rt=tt*(Qe-at[_t+5]-rt);yt.push([[mt,vt],[xt,wt],[Pt,bt],[Et,Rt]]),mt=Et,vt=Rt}const ct=Ge(this,je,Zt).call(this,yt);Oe.bezierPath2D.push(ct)}const lt=Ge(gt=Oe,Ve,en).call(gt);return Je(Oe,ye,Math.max(ie,lt[2]-lt[0])),Je(Oe,ue,Math.max(ie,lt[3]-lt[1])),Ge(ut=Oe,te,Qt).call(ut,Ke,Qe),Oe}serialize(){if(this.isEmpty())return null;const Be=this.getRect(0,0),Ye=this.rotation%180===0?Be[3]-Be[1]:Be[2]-Be[0],Oe=a.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:e.AnnotationEditorType.INK,color:Oe,thickness:this.thickness,opacity:this.opacity,paths:Ge(this,De,En).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,Ye),pageIndex:this.parent.pageIndex,rect:Be,rotation:this.rotation}}};k=new WeakMap,ue=new WeakMap,ye=new WeakMap,le=new WeakMap,se=new WeakMap,_=new WeakMap,s=new WeakMap,c=new WeakMap,g=new WeakMap,ne=new WeakMap,re=new WeakMap,m=new WeakMap,o=new WeakMap,h=new WeakMap,Y=new WeakSet,mn=function(Be){const Ye=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=Be,Ge(this,ot,Ft).call(this)},undo:()=>{this.thickness=Ye,Ge(this,ot,Ft).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},ae=new WeakSet,yn=function(Be){const Ye=this.color;this.parent.addCommands({cmd:()=>{this.color=Be,Ge(this,$,Tt).call(this)},undo:()=>{this.color=Ye,Ge(this,$,Tt).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},pe=new WeakSet,_n=function(Be){Be/=100;const Ye=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=Be,Ge(this,$,Tt).call(this)},undo:()=>{this.opacity=Ye,Ge(this,$,Tt).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Ue=new WeakSet,bn=function(){const{width:Be,height:Ye,rotation:Oe}=this.parent.viewport;switch(Oe){case 90:return[0,Be,Be,Ye];case 180:return[Be,Ye,Be,Ye];case 270:return[Ye,0,Be,Ye];default:return[0,0,Be,Ye]}},Fe=new WeakSet,Kt=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,he.opacityToHex)(this.opacity)}`},xe=new WeakSet,vn=function(Be,Ye){this.isEditing=!0,ge(this,g)||(Je(this,g,!0),Ge(this,f,kt).call(this),this.thickness||(this.thickness=st._defaultThickness),this.color||(this.color=st._defaultColor||a.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=st._defaultOpacity)),this.currentPath.push([Be,Ye]),Je(this,ne,null),Ge(this,Fe,Kt).call(this),this.ctx.beginPath(),this.ctx.moveTo(Be,Ye),Je(this,h,()=>{ge(this,h)&&(ge(this,ne)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):Ge(this,$,Tt).call(this),this.ctx.lineTo(...ge(this,ne)),Je(this,ne,null),this.ctx.stroke()),window.requestAnimationFrame(ge(this,h)))}),window.requestAnimationFrame(ge(this,h))},Ne=new WeakSet,An=function(Be,Ye){const[Oe,Te]=this.currentPath.at(-1);Be===Oe&&Ye===Te||(this.currentPath.push([Be,Ye]),Je(this,ne,[Be,Ye]))},Ze=new WeakSet,Sn=function(Be,Ye){var rt;this.ctx.closePath(),Je(this,h,null),Be=Math.min(Math.max(Be,0),this.canvas.width),Ye=Math.min(Math.max(Ye,0),this.canvas.height);const[Oe,Te]=this.currentPath.at(-1);(Be!==Oe||Ye!==Te)&&this.currentPath.push([Be,Ye]);let Ce;if(this.currentPath.length!==1)Ce=(0,oe.fitCurve)(this.currentPath,30,null);else{const lt=[Be,Ye];Ce=[[lt,lt.slice(),lt.slice(),lt]]}const Ke=Ge(rt=st,je,Zt).call(rt,Ce);this.currentPath.length=0;const Qe=()=>{this.paths.push(Ce),this.bezierPath2D.push(Ke),this.rebuild()},tt=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Ge(this,ve,Lt).call(this),Ge(this,we,Nt).call(this)),Ge(this,ot,Ft).call(this))};this.parent.addCommands({cmd:Qe,undo:tt,mustExec:!0})},$=new WeakSet,Tt=function(){if(this.isEmpty()){Ge(this,me,jt).call(this);return}Ge(this,Fe,Kt).call(this);const{canvas:Be,ctx:Ye}=this;Ye.setTransform(1,0,0,1,0,0),Ye.clearRect(0,0,Be.width,Be.height),Ge(this,me,jt).call(this);for(const Oe of this.bezierPath2D)Ye.stroke(Oe)},de=new WeakSet,Jt=function(Be){Ge(this,Ze,Sn).call(this,Be.offsetX,Be.offsetY),this.canvas.removeEventListener("pointerleave",ge(this,se)),this.canvas.removeEventListener("pointermove",ge(this,le)),this.parent.addToAnnotationStorage(this)},ve=new WeakSet,Lt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",st._l10nPromise.get("editor_ink_canvas_aria_label").then(Be=>{var Ye;return(Ye=this.canvas)==null?void 0:Ye.setAttribute("aria-label",Be)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},we=new WeakSet,Nt=function(){Je(this,re,new ResizeObserver(Be=>{const Ye=Be[0].contentRect;Ye.width&&Ye.height&&this.setDimensions(Ye.width,Ye.height)})),ge(this,re).observe(this.div)},f=new WeakSet,kt=function(){if(!ge(this,g))return;const[Be,Ye]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*Be),this.canvas.height=Math.ceil(this.height*Ye),Ge(this,me,jt).call(this)},te=new WeakSet,Qt=function(Be,Ye){const Oe=Ge(this,nt,Ut).call(this),Te=(Be-Oe)/ge(this,ye),Ce=(Ye-Oe)/ge(this,ue);this.scaleFactor=Math.min(Te,Ce)},me=new WeakSet,jt=function(){const Be=Ge(this,nt,Ut).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Be,this.translationY*this.scaleFactor+Be)},je=new WeakSet,Zt=function(Be){const Ye=new Path2D;for(let Oe=0,Te=Be.length;Oe<Te;Oe++){const[Ce,Ke,Qe,tt]=Be[Oe];Oe===0&&Ye.moveTo(...Ce),Ye.bezierCurveTo(Ke[0],Ke[1],Qe[0],Qe[1],tt[0],tt[1])}return Ye},De=new WeakSet,En=function(Be,Ye,Oe,Te){const Ke=[],Qe=this.thickness/2;let tt,rt;for(const lt of this.paths){tt=[],rt=[];for(let gt=0,ut=lt.length;gt<ut;gt++){const[at,yt,mt,vt]=lt[gt],ct=Be*(at[0]+Ye)+Qe,_t=Te-Be*(at[1]+Oe)-Qe,St=Be*(yt[0]+Ye)+Qe,xt=Te-Be*(yt[1]+Oe)-Qe,wt=Be*(mt[0]+Ye)+Qe,Pt=Te-Be*(mt[1]+Oe)-Qe,bt=Be*(vt[0]+Ye)+Qe,Et=Te-Be*(vt[1]+Oe)-Qe;gt===0&&(tt.push(ct,_t),rt.push(ct,_t)),tt.push(St,xt,wt,Pt,bt,Et),Ge(this,Le,Pn).call(this,ct,_t,St,xt,wt,Pt,bt,Et,4,rt)}Ke.push({bezier:tt,points:rt})}return Ke},Le=new WeakSet,Pn=function(Be,Ye,Oe,Te,Ce,Ke,Qe,tt,rt,lt){if(Ge(this,Xe,Tn).call(this,Be,Ye,Oe,Te,Ce,Ke,Qe,tt)){lt.push(Qe,tt);return}for(let gt=1;gt<rt-1;gt++){const ut=gt/rt,at=1-ut;let yt=ut*Be+at*Oe,mt=ut*Ye+at*Te,vt=ut*Oe+at*Ce,ct=ut*Te+at*Ke;const _t=ut*Ce+at*Qe,St=ut*Ke+at*tt;yt=ut*yt+at*vt,mt=ut*mt+at*ct,vt=ut*vt+at*_t,ct=ut*ct+at*St,yt=ut*yt+at*vt,mt=ut*mt+at*ct,lt.push(yt,mt)}lt.push(Qe,tt)},Xe=new WeakSet,Tn=function(Be,Ye,Oe,Te,Ce,Ke,Qe,tt){const lt=(3*Oe-2*Be-Qe)**2,gt=(3*Te-2*Ye-tt)**2,ut=(3*Ce-Be-2*Qe)**2,at=(3*Ke-Ye-2*tt)**2;return Math.max(lt,ut)+Math.max(gt,at)<=10},Ve=new WeakSet,en=function(){let Be=1/0,Ye=-1/0,Oe=1/0,Te=-1/0;for(const Ce of this.paths)for(const[Ke,Qe,tt,rt]of Ce){const lt=e.Util.bezierBoundingBox(...Ke,...Qe,...tt,...rt);Be=Math.min(Be,lt[0]),Oe=Math.min(Oe,lt[1]),Ye=Math.max(Ye,lt[2]),Te=Math.max(Te,lt[3])}return[Be,Oe,Ye,Te]},nt=new WeakSet,Ut=function(){return ge(this,c)?Math.ceil(this.thickness*this.parent.scaleFactor):0},ot=new WeakSet,Ft=function(Be=!1){if(this.isEmpty())return;if(!ge(this,c)){Ge(this,$,Tt).call(this);return}const Ye=Ge(this,Ve,en).call(this),Oe=Ge(this,nt,Ut).call(this);Je(this,ye,Math.max(ie,Ye[2]-Ye[0])),Je(this,ue,Math.max(ie,Ye[3]-Ye[1]));const Te=Math.ceil(Oe+ge(this,ye)*this.scaleFactor),Ce=Math.ceil(Oe+ge(this,ue)*this.scaleFactor),[Ke,Qe]=this.parent.viewportBaseDimensions;this.width=Te/Ke,this.height=Ce/Qe,Je(this,k,Te/Ce),Ge(this,ht,tn).call(this);const tt=this.translationX,rt=this.translationY;this.translationX=-Ye[0],this.translationY=-Ye[1],Ge(this,f,kt).call(this),Ge(this,$,Tt).call(this),Je(this,m,Te),Je(this,o,Ce),this.setDims(Te,Ce);const lt=Be?Oe/this.scaleFactor/2:0;this.translate(tt-this.translationX-lt,rt-this.translationY-lt)},ht=new WeakSet,tn=function(){const{style:Be}=this.div;ge(this,k)>=1?(Be.minHeight=`${ie}px`,Be.minWidth=`${Math.round(ge(this,k)*ie)}px`):(Be.minWidth=`${ie}px`,Be.minHeight=`${Math.round(ie/ge(this,k))}px`)},We(st,je),ft(st,"_defaultColor",null),ft(st,"_defaultOpacity",1),ft(st,"_defaultThickness",1),ft(st,"_l10nPromise"),ft(st,"_type","ink");let ee=st;i.InkEditor=ee},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.fitCurve=void 0;const e=j(26);i.fitCurve=e},d=>{function i(_,s,c){if(!Array.isArray(_))throw new TypeError("First argument should be an array");if(_.forEach(m=>{if(!Array.isArray(m)||m.some(o=>typeof o!="number")||m.length!==_[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),_=_.filter((m,o)=>o===0||!m.every((h,Y)=>h===_[o-1][Y])),_.length<2)return[];const g=_.length,ne=ye(_[1],_[0]),re=ye(_[g-2],_[g-1]);return j(_,ne,re,s,c)}function j(_,s,c,g,ne){var m,o,h,Y,fe,ae,Z,pe,Ie,Ue,Me,Fe,Pe;if(_.length===2)return Fe=le.vectorLen(le.subtract(_[0],_[1]))/3,m=[_[0],le.addArrays(_[0],le.mulItems(s,Fe)),le.addArrays(_[1],le.mulItems(c,Fe)),_[1]],[m];if(o=ie(_),[m,Y,ae]=e(_,o,o,s,c,ne),Y===0||Y<g)return[m];if(Y<g*g)for(h=o,fe=Y,Z=ae,Pe=0;Pe<20;Pe++){if(h=oe(m,_,h),[m,Y,ae]=e(_,o,h,s,c,ne),Y<g)return[m];if(ae===Z){let xe=Y/fe;if(xe>.9999&&xe<1.0001)break}fe=Y,Z=ae}return Me=[],pe=le.subtract(_[ae-1],_[ae+1]),pe.every(xe=>xe===0)&&(pe=le.subtract(_[ae-1],_[ae]),[pe[0],pe[1]]=[-pe[1],pe[0]]),Ie=le.normalize(pe),Ue=le.mulItems(Ie,-1),Me=Me.concat(j(_.slice(0,ae+1),s,Ie,g,ne)),Me=Me.concat(j(_.slice(ae),Ue,c,g,ne)),Me}function e(_,s,c,g,ne,re){var m,o,h;return m=a(_,c,g,ne),[o,h]=ee(_,m,s),re&&re({bez:m,points:_,params:s,maxErr:o,maxPoint:h}),[m,o,h]}function a(_,s,c,g){var ne,re,m,o,h,Y,fe,ae,Z,pe,Ie,Ue,Me,Fe,Pe,xe,ke,Ne=_[0],He=_[_.length-1];for(ne=[Ne,null,null,He],re=le.zeros_Xx2x2(s.length),Me=0,Fe=s.length;Me<Fe;Me++)xe=s[Me],ke=1-xe,m=re[Me],m[0]=le.mulItems(c,3*xe*(ke*ke)),m[1]=le.mulItems(g,3*ke*(xe*xe));for(o=[[0,0],[0,0]],h=[0,0],Me=0,Fe=_.length;Me<Fe;Me++)xe=s[Me],m=re[Me],o[0][0]+=le.dot(m[0],m[0]),o[0][1]+=le.dot(m[0],m[1]),o[1][0]+=le.dot(m[0],m[1]),o[1][1]+=le.dot(m[1],m[1]),Pe=le.subtract(_[Me],se.q([Ne,Ne,He,He],xe)),h[0]+=le.dot(m[0],Pe),h[1]+=le.dot(m[1],Pe);return Y=o[0][0]*o[1][1]-o[1][0]*o[0][1],fe=o[0][0]*h[1]-o[1][0]*h[0],ae=h[0]*o[1][1]-h[1]*o[0][1],Z=Y===0?0:ae/Y,pe=Y===0?0:fe/Y,Ue=le.vectorLen(le.subtract(Ne,He)),Ie=1e-6*Ue,Z<Ie||pe<Ie?(ne[1]=le.addArrays(Ne,le.mulItems(c,Ue/3)),ne[2]=le.addArrays(He,le.mulItems(g,Ue/3))):(ne[1]=le.addArrays(Ne,le.mulItems(c,Z)),ne[2]=le.addArrays(He,le.mulItems(g,pe))),ne}function oe(_,s,c){return c.map((g,ne)=>he(_,s[ne],g))}function he(_,s,c){var g=le.subtract(se.q(_,c),s),ne=se.qprime(_,c),re=le.mulMatrix(g,ne),m=le.sum(le.squareItems(ne))+2*le.mulMatrix(g,se.qprimeprime(_,c));return m===0?c:c-re/m}function ie(_){var s=[],c,g,ne;return _.forEach((re,m)=>{c=m?g+le.vectorLen(le.subtract(re,ne)):0,s.push(c),g=c,ne=re}),s=s.map(re=>re/g),s}function ee(_,s,c){var g,ne,re,m,o,h,Y,fe;ne=0,re=Math.floor(_.length/2);const ae=k(s,10);for(o=0,h=_.length;o<h;o++)Y=_[o],fe=ue(s,c[o],ae,10),m=le.subtract(se.q(s,fe),Y),g=m[0]*m[0]+m[1]*m[1],g>ne&&(ne=g,re=o);return[ne,re]}var k=function(_,s){for(var c,g=[0],ne=_[0],re=0,m=1;m<=s;m++)c=se.q(_,m/s),re+=le.vectorLen(le.subtract(c,ne)),g.push(re),ne=c;return g=g.map(o=>o/re),g};function ue(_,s,c,g){if(s<0)return 0;if(s>1)return 1;for(var ne,re,m,o,h,Y=1;Y<=g;Y++)if(s<=c[Y]){o=(Y-1)/g,m=Y/g,re=c[Y-1],ne=c[Y],h=(s-re)/(ne-re)*(m-o)+o;break}return h}function ye(_,s){return le.normalize(le.subtract(_,s))}class le{static zeros_Xx2x2(s){for(var c=[];s--;)c.push([0,0]);return c}static mulItems(s,c){return s.map(g=>g*c)}static mulMatrix(s,c){return s.reduce((g,ne,re)=>g+ne*c[re],0)}static subtract(s,c){return s.map((g,ne)=>g-c[ne])}static addArrays(s,c){return s.map((g,ne)=>g+c[ne])}static addItems(s,c){return s.map(g=>g+c)}static sum(s){return s.reduce((c,g)=>c+g)}static dot(s,c){return le.mulMatrix(s,c)}static vectorLen(s){return Math.hypot(...s)}static divItems(s,c){return s.map(g=>g/c)}static squareItems(s){return s.map(c=>c*c)}static normalize(s){return this.divItems(s,this.vectorLen(s))}}class se{static q(s,c){var g=1-c,ne=le.mulItems(s[0],g*g*g),re=le.mulItems(s[1],3*g*g*c),m=le.mulItems(s[2],3*g*c*c),o=le.mulItems(s[3],c*c*c);return le.addArrays(le.addArrays(ne,re),le.addArrays(m,o))}static qprime(s,c){var g=1-c,ne=le.mulItems(le.subtract(s[1],s[0]),3*g*g),re=le.mulItems(le.subtract(s[2],s[1]),6*g*c),m=le.mulItems(le.subtract(s[3],s[2]),3*c*c);return le.addArrays(le.addArrays(ne,re),m)}static qprimeprime(s,c){return le.addArrays(le.mulItems(le.addArrays(le.subtract(s[2],le.mulItems(s[1],2)),s[0]),6*(1-c)),le.mulItems(le.addArrays(le.subtract(s[3],le.mulItems(s[2],2)),s[1]),6*c))}}d.exports=i,d.exports.fitCubic=j,d.exports.createTangent=ye},(d,i,j)=>{var $,nn,de,rn,ve,sn;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationLayer=void 0;var e=j(1),a=j(8),oe=j(5),he=j(28),ie=j(29);const ee=1e3,k=9,ue=new WeakSet;function ye(Re){return{width:Re[2]-Re[0],height:Re[3]-Re[1]}}class le{static create(f){switch(f.data.annotationType){case e.AnnotationType.LINK:return new _(f);case e.AnnotationType.TEXT:return new s(f);case e.AnnotationType.WIDGET:switch(f.data.fieldType){case"Tx":return new g(f);case"Btn":return f.data.radioButton?new re(f):f.data.checkBox?new ne(f):new m(f);case"Ch":return new o(f)}return new c(f);case e.AnnotationType.POPUP:return new h(f);case e.AnnotationType.FREETEXT:return new fe(f);case e.AnnotationType.LINE:return new ae(f);case e.AnnotationType.SQUARE:return new Z(f);case e.AnnotationType.CIRCLE:return new pe(f);case e.AnnotationType.POLYLINE:return new Ie(f);case e.AnnotationType.CARET:return new Me(f);case e.AnnotationType.INK:return new Fe(f);case e.AnnotationType.POLYGON:return new Ue(f);case e.AnnotationType.HIGHLIGHT:return new Pe(f);case e.AnnotationType.UNDERLINE:return new xe(f);case e.AnnotationType.SQUIGGLY:return new ke(f);case e.AnnotationType.STRIKEOUT:return new Ne(f);case e.AnnotationType.STAMP:return new He(f);case e.AnnotationType.FILEATTACHMENT:return new Ze(f);default:return new se(f)}}}class se{constructor(f,{isRenderable:X=!1,ignoreBorder:te=!1,createQuadrilaterals:ce=!1}={}){this.isRenderable=X,this.data=f.data,this.layer=f.layer,this.page=f.page,this.viewport=f.viewport,this.linkService=f.linkService,this.downloadManager=f.downloadManager,this.imageResourcesPath=f.imageResourcesPath,this.renderForms=f.renderForms,this.svgFactory=f.svgFactory,this.annotationStorage=f.annotationStorage,this.enableScripting=f.enableScripting,this.hasJSActions=f.hasJSActions,this._fieldObjects=f.fieldObjects,this._mouseState=f.mouseState,X&&(this.container=this._createContainer(te)),ce&&(this.quadrilaterals=this._createQuadrilaterals(te))}_createContainer(f=!1){const X=this.data,te=this.page,ce=this.viewport,me=document.createElement("section"),{width:Ee,height:je}=ye(X.rect),[ze,De,qe,Le]=ce.viewBox,$e=qe-ze,Xe=Le-De;me.setAttribute("data-annotation-id",X.id);const _e=e.Util.normalizeRect([X.rect[0],te.view[3]-X.rect[1]+te.view[1],X.rect[2],te.view[3]-X.rect[3]+te.view[1]]);if(!f&&X.borderStyle.width>0){me.style.borderWidth=`${X.borderStyle.width}px`;const et=X.borderStyle.horizontalCornerRadius,nt=X.borderStyle.verticalCornerRadius;if(et>0||nt>0){const ot=`calc(${et}px * var(--scale-factor)) / calc(${nt}px * var(--scale-factor))`;me.style.borderRadius=ot}else if(this instanceof re){const ot=`calc(${Ee}px * var(--scale-factor)) / calc(${je}px * var(--scale-factor))`;me.style.borderRadius=ot}switch(X.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:me.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:me.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:me.style.borderBottomStyle="solid";break}const it=X.borderColor||null;it?me.style.borderColor=e.Util.makeHexColor(it[0]|0,it[1]|0,it[2]|0):me.style.borderWidth=0}me.style.left=`${100*(_e[0]-ze)/$e}%`,me.style.top=`${100*(_e[1]-De)/Xe}%`;const{rotation:Ve}=X;return X.hasOwnCanvas||Ve===0?(me.style.width=`${100*Ee/$e}%`,me.style.height=`${100*je/Xe}%`):this.setRotation(Ve,me),me}setRotation(f,X=this.container){const[te,ce,me,Ee]=this.viewport.viewBox,je=me-te,ze=Ee-ce,{width:De,height:qe}=ye(this.data.rect);let Le,$e;f%180===0?(Le=100*De/je,$e=100*qe/ze):(Le=100*qe/je,$e=100*De/ze),X.style.width=`${Le}%`,X.style.height=`${$e}%`,X.setAttribute("data-main-rotation",(360-f)%360)}get _commonActions(){const f=(X,te,ce)=>{const me=ce.detail[X];ce.target.style[te]=he.ColorConverters[`${me[0]}_HTML`](me.slice(1))};return(0,e.shadow)(this,"_commonActions",{display:X=>{const te=X.detail.display%2===1;this.container.style.visibility=te?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:te,print:X.detail.display===0||X.detail.display===3})},print:X=>{this.annotationStorage.setValue(this.data.id,{print:X.detail.print})},hidden:X=>{this.container.style.visibility=X.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:X.detail.hidden})},focus:X=>{setTimeout(()=>X.target.focus({preventScroll:!1}),0)},userName:X=>{X.target.title=X.detail.userName},readonly:X=>{X.detail.readonly?X.target.setAttribute("readonly",""):X.target.removeAttribute("readonly")},required:X=>{this._setRequired(X.target,X.detail.required)},bgColor:X=>{f("bgColor","backgroundColor",X)},fillColor:X=>{f("fillColor","backgroundColor",X)},fgColor:X=>{f("fgColor","color",X)},textColor:X=>{f("textColor","color",X)},borderColor:X=>{f("borderColor","borderColor",X)},strokeColor:X=>{f("strokeColor","borderColor",X)},rotation:X=>{const te=X.detail.rotation;this.setRotation(te),this.annotationStorage.setValue(this.data.id,{rotation:te})}})}_dispatchEventFromSandbox(f,X){const te=this._commonActions;for(const ce of Object.keys(X.detail)){const me=f[ce]||te[ce];me&&me(X)}}_setDefaultPropertiesFromJS(f){if(!this.enableScripting)return;const X=this.annotationStorage.getRawValue(this.data.id);if(!X)return;const te=this._commonActions;for(const[ce,me]of Object.entries(X)){const Ee=te[ce];if(Ee){const je={detail:{[ce]:me},target:f};Ee(je),delete X[ce]}}}_createQuadrilaterals(f=!1){if(!this.data.quadPoints)return null;const X=[],te=this.data.rect;for(const ce of this.data.quadPoints)this.data.rect=[ce[2].x,ce[2].y,ce[1].x,ce[1].y],X.push(this._createContainer(f));return this.data.rect=te,X}_createPopup(f,X){let te=this.container;this.quadrilaterals&&(f=f||this.quadrilaterals,te=this.quadrilaterals[0]),f||(f=document.createElement("div"),f.className="popupTriggerArea",te.append(f));const me=new Y({container:te,trigger:f,color:X.color,titleObj:X.titleObj,modificationDate:X.modificationDate,contentsObj:X.contentsObj,richText:X.richText,hideWrapper:!0}).render();me.style.left="100%",te.append(me)}_renderQuadrilaterals(f){for(const X of this.quadrilaterals)X.className=f;return this.quadrilaterals}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(f,X=null){const te=[];if(this._fieldObjects){const ce=this._fieldObjects[f];if(ce)for(const{page:me,id:Ee,exportValues:je}of ce){if(me===-1||Ee===X)continue;const ze=typeof je=="string"?je:null,De=document.querySelector(`[data-element-id="${Ee}"]`);if(De&&!ue.has(De)){(0,e.warn)(`_getElementsByName - element not allowed: ${Ee}`);continue}te.push({id:Ee,exportValue:ze,domElement:De})}return te}for(const ce of document.getElementsByName(f)){const{id:me,exportValue:Ee}=ce;me!==X&&ue.has(ce)&&te.push({id:me,exportValue:Ee,domElement:ce})}return te}static get platform(){const f=typeof navigator<"u"?navigator.platform:"";return(0,e.shadow)(this,"platform",{isWin:f.includes("Win"),isMac:f.includes("Mac")})}}class _ extends se{constructor(f,X=null){super(f,{isRenderable:!0,ignoreBorder:!!(X!=null&&X.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=f.data.isTooltipOnly}render(){const{data:f,linkService:X}=this,te=document.createElement("a");te.setAttribute("data-element-id",f.id);let ce=!1;return f.url?(X.addLinkAttributes(te,f.url,f.newWindow),ce=!0):f.action?(this._bindNamedAction(te,f.action),ce=!0):f.dest?(this._bindLink(te,f.dest),ce=!0):(f.actions&&(f.actions.Action||f.actions["Mouse Up"]||f.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(te,f),ce=!0),f.resetForm?(this._bindResetFormAction(te,f.resetForm),ce=!0):this.isTooltipOnly&&!ce&&(this._bindLink(te,""),ce=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((me,Ee)=>{const je=Ee===0?te:te.cloneNode();return me.append(je),me}):(this.container.className="linkAnnotation",ce&&this.container.append(te),this.container)}_bindLink(f,X){f.href=this.linkService.getDestinationHash(X),f.onclick=()=>(X&&this.linkService.goToDestination(X),!1),(X||X==="")&&(f.className="internalLink")}_bindNamedAction(f,X){f.href=this.linkService.getAnchorUrl(""),f.onclick=()=>(this.linkService.executeNamedAction(X),!1),f.className="internalLink"}_bindJSAction(f,X){f.href=this.linkService.getAnchorUrl("");const te=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ce of Object.keys(X.actions)){const me=te.get(ce);me&&(f[me]=()=>{var Ee;return(Ee=this.linkService.eventBus)==null||Ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X.id,name:ce}}),!1})}f.onclick||(f.onclick=()=>!1),f.className="internalLink"}_bindResetFormAction(f,X){const te=f.onclick;if(te||(f.href=this.linkService.getAnchorUrl("")),f.className="internalLink",!this._fieldObjects){(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),te||(f.onclick=()=>!1);return}f.onclick=()=>{var qe;te&&te();const{fields:ce,refs:me,include:Ee}=X,je=[];if(ce.length!==0||me.length!==0){const Le=new Set(me);for(const $e of ce){const Xe=this._fieldObjects[$e]||[];for(const{id:_e}of Xe)Le.add(_e)}for(const $e of Object.values(this._fieldObjects))for(const Xe of $e)Le.has(Xe.id)===Ee&&je.push(Xe)}else for(const Le of Object.values(this._fieldObjects))je.push(...Le);const ze=this.annotationStorage,De=[];for(const Le of je){const{id:$e}=Le;switch(De.push($e),Le.type){case"text":{const _e=Le.defaultValue||"";ze.setValue($e,{value:_e});break}case"checkbox":case"radiobutton":{const _e=Le.defaultValue===Le.exportValues;ze.setValue($e,{value:_e});break}case"combobox":case"listbox":{const _e=Le.defaultValue||"";ze.setValue($e,{value:_e});break}default:continue}const Xe=document.querySelector(`[data-element-id="${$e}"]`);if(Xe){if(!ue.has(Xe)){(0,e.warn)(`_bindResetFormAction - element not allowed: ${$e}`);continue}}else continue;Xe.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((qe=this.linkService.eventBus)==null||qe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:De,name:"ResetForm"}})),!1}}}class s extends se{constructor(f){var te,ce,me;const X=!!(f.data.hasPopup||(te=f.data.titleObj)!=null&&te.str||(ce=f.data.contentsObj)!=null&&ce.str||(me=f.data.richText)!=null&&me.str);super(f,{isRenderable:X})}render(){this.container.className="textAnnotation";const f=document.createElement("img");return f.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",f.alt="[{{type}} Annotation]",f.dataset.l10nId="text_annotation_type",f.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(f,this.data),this.container.append(f),this.container}}class c extends se{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(f){const{isWin:X,isMac:te}=se.platform;return X&&f.ctrlKey||te&&f.metaKey}_setEventListener(f,X,te,ce){X.includes("mouse")?f.addEventListener(X,me=>{var Ee;(Ee=this.linkService.eventBus)==null||Ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:te,value:ce(me),shift:me.shiftKey,modifier:this._getKeyModifier(me)}})}):f.addEventListener(X,me=>{var Ee;(Ee=this.linkService.eventBus)==null||Ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:te,value:ce(me)}})})}_setEventListeners(f,X,te){var ce;for(const[me,Ee]of X)(Ee==="Action"||(ce=this.data.actions)!=null&&ce[Ee])&&this._setEventListener(f,me,Ee,te)}_setBackgroundColor(f){const X=this.data.backgroundColor||null;f.style.backgroundColor=X===null?"transparent":e.Util.makeHexColor(X[0],X[1],X[2])}_setTextStyle(f){const X=["left","center","right"],{fontColor:te}=this.data.defaultAppearanceData,ce=this.data.defaultAppearanceData.fontSize||k,me=f.style;let Ee;if(this.data.multiLine){const je=Math.abs(this.data.rect[3]-this.data.rect[1]),ze=Math.round(je/(e.LINE_FACTOR*ce))||1,De=je/ze;Ee=Math.min(ce,Math.round(De/e.LINE_FACTOR))}else{const je=Math.abs(this.data.rect[3]-this.data.rect[1]);Ee=Math.min(ce,Math.round(je/e.LINE_FACTOR))}me.fontSize=`calc(${Ee}px * var(--scale-factor))`,me.color=e.Util.makeHexColor(te[0],te[1],te[2]),this.data.textAlignment!==null&&(me.textAlign=X[this.data.textAlignment])}_setRequired(f,X){X?f.setAttribute("required",!0):f.removeAttribute("required"),f.setAttribute("aria-required",X)}}class g extends c{constructor(f){const X=f.renderForms||!f.data.hasAppearance&&!!f.data.fieldValue;super(f,{isRenderable:X})}setPropertyOnSiblings(f,X,te,ce){const me=this.annotationStorage;for(const Ee of this._getElementsByName(f.name,f.id))Ee.domElement&&(Ee.domElement[X]=te),me.setValue(Ee.id,{[ce]:te})}render(){var ce;const f=this.annotationStorage,X=this.data.id;this.container.className="textWidgetAnnotation";let te=null;if(this.renderForms){const me=f.getValue(X,{value:this.data.fieldValue});let Ee=me.formattedValue||me.value||"";const je=f.getValue(X,{charLimit:this.data.maxLen}).charLimit;je&&Ee.length>je&&(Ee=Ee.slice(0,je));const ze={userValue:Ee,formattedValue:null,valueOnFocus:""};this.data.multiLine?(te=document.createElement("textarea"),te.textContent=Ee,this.data.doNotScroll&&(te.style.overflowY="hidden")):(te=document.createElement("input"),te.type="text",te.setAttribute("value",Ee),this.data.doNotScroll&&(te.style.overflowX="hidden")),ue.add(te),te.setAttribute("data-element-id",X),te.disabled=this.data.readOnly,te.name=this.data.fieldName,te.tabIndex=ee,this._setRequired(te,this.data.required),je&&(te.maxLength=je),te.addEventListener("input",qe=>{f.setValue(X,{value:qe.target.value}),this.setPropertyOnSiblings(te,"value",qe.target.value,"value")}),te.addEventListener("resetform",qe=>{const Le=this.data.defaultFieldValue??"";te.value=ze.userValue=Le,ze.formattedValue=null});let De=qe=>{const{formattedValue:Le}=ze;Le!=null&&(qe.target.value=Le),qe.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){te.addEventListener("focus",Le=>{ze.userValue&&(Le.target.value=ze.userValue),ze.valueOnFocus=Le.target.value}),te.addEventListener("updatefromsandbox",Le=>{const $e={value(Xe){ze.userValue=Xe.detail.value??"",f.setValue(X,{value:ze.userValue.toString()}),Xe.target.value=ze.userValue},formattedValue(Xe){const{formattedValue:_e}=Xe.detail;ze.formattedValue=_e,_e!=null&&Xe.target!==document.activeElement&&(Xe.target.value=_e),f.setValue(X,{formattedValue:_e})},selRange(Xe){Xe.target.setSelectionRange(...Xe.detail.selRange)},charLimit:Xe=>{var nt;const{charLimit:_e}=Xe.detail,{target:Ve}=Xe;if(_e===0){Ve.removeAttribute("maxLength");return}Ve.setAttribute("maxLength",_e);let et=ze.userValue;!et||et.length<=_e||(et=et.slice(0,_e),Ve.value=ze.userValue=et,f.setValue(X,{value:et}),(nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X,name:"Keystroke",value:et,willCommit:!0,commitKey:1,selStart:Ve.selectionStart,selEnd:Ve.selectionEnd}}))}};this._dispatchEventFromSandbox($e,Le)}),te.addEventListener("keydown",Le=>{var _e;let $e=-1;if(Le.key==="Escape"?$e=0:Le.key==="Enter"?$e=2:Le.key==="Tab"&&($e=3),$e===-1)return;const{value:Xe}=Le.target;ze.valueOnFocus!==Xe&&(ze.userValue=Xe,(_e=this.linkService.eventBus)==null||_e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X,name:"Keystroke",value:Xe,willCommit:!0,commitKey:$e,selStart:Le.target.selectionStart,selEnd:Le.target.selectionEnd}}))});const qe=De;De=null,te.addEventListener("blur",Le=>{var Xe;const{value:$e}=Le.target;ze.userValue=$e,this._mouseState.isDown&&ze.valueOnFocus!==$e&&((Xe=this.linkService.eventBus)==null||Xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X,name:"Keystroke",value:$e,willCommit:!0,commitKey:1,selStart:Le.target.selectionStart,selEnd:Le.target.selectionEnd}})),qe(Le)}),(ce=this.data.actions)!=null&&ce.Keystroke&&te.addEventListener("beforeinput",Le=>{var ot;const{data:$e,target:Xe}=Le,{value:_e,selectionStart:Ve,selectionEnd:et}=Xe;let nt=Ve,it=et;switch(Le.inputType){case"deleteWordBackward":{const dt=_e.substring(0,Ve).match(/\w*[^\w]*$/);dt&&(nt-=dt[0].length);break}case"deleteWordForward":{const dt=_e.substring(Ve).match(/^[^\w]*\w*/);dt&&(it+=dt[0].length);break}case"deleteContentBackward":Ve===et&&(nt-=1);break;case"deleteContentForward":Ve===et&&(it+=1);break}Le.preventDefault(),(ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X,name:"Keystroke",value:_e,change:$e||"",willCommit:!1,selStart:nt,selEnd:it}})}),this._setEventListeners(te,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Le=>Le.target.value)}if(De&&te.addEventListener("blur",De),this.data.comb){const Le=(this.data.rect[2]-this.data.rect[0])/je;te.classList.add("comb"),te.style.letterSpacing=`calc(${Le}px * var(--scale-factor) - 1ch)`}}else te=document.createElement("div"),te.textContent=this.data.fieldValue,te.style.verticalAlign="middle",te.style.display="table-cell";return this._setTextStyle(te),this._setBackgroundColor(te),this._setDefaultPropertiesFromJS(te),this.container.append(te),this.container}}class ne extends c{constructor(f){super(f,{isRenderable:f.renderForms})}render(){const f=this.annotationStorage,X=this.data,te=X.id;let ce=f.getValue(te,{value:X.exportValue===X.fieldValue}).value;typeof ce=="string"&&(ce=ce!=="Off",f.setValue(te,{value:ce})),this.container.className="buttonWidgetAnnotation checkBox";const me=document.createElement("input");return ue.add(me),me.setAttribute("data-element-id",te),me.disabled=X.readOnly,this._setRequired(me,this.data.required),me.type="checkbox",me.name=X.fieldName,ce&&me.setAttribute("checked",!0),me.setAttribute("exportValue",X.exportValue),me.tabIndex=ee,me.addEventListener("change",Ee=>{const{name:je,checked:ze}=Ee.target;for(const De of this._getElementsByName(je,te)){const qe=ze&&De.exportValue===X.exportValue;De.domElement&&(De.domElement.checked=qe),f.setValue(De.id,{value:qe})}f.setValue(te,{value:ze})}),me.addEventListener("resetform",Ee=>{const je=X.defaultFieldValue||"Off";Ee.target.checked=je===X.exportValue}),this.enableScripting&&this.hasJSActions&&(me.addEventListener("updatefromsandbox",Ee=>{const je={value(ze){ze.target.checked=ze.detail.value!=="Off",f.setValue(te,{value:ze.target.checked})}};this._dispatchEventFromSandbox(je,Ee)}),this._setEventListeners(me,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ee=>Ee.target.checked)),this._setBackgroundColor(me),this._setDefaultPropertiesFromJS(me),this.container.append(me),this.container}}class re extends c{constructor(f){super(f,{isRenderable:f.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const f=this.annotationStorage,X=this.data,te=X.id;let ce=f.getValue(te,{value:X.fieldValue===X.buttonValue}).value;typeof ce=="string"&&(ce=ce!==X.buttonValue,f.setValue(te,{value:ce}));const me=document.createElement("input");if(ue.add(me),me.setAttribute("data-element-id",te),me.disabled=X.readOnly,this._setRequired(me,this.data.required),me.type="radio",me.name=X.fieldName,ce&&me.setAttribute("checked",!0),me.tabIndex=ee,me.addEventListener("change",Ee=>{const{name:je,checked:ze}=Ee.target;for(const De of this._getElementsByName(je,te))f.setValue(De.id,{value:!1});f.setValue(te,{value:ze})}),me.addEventListener("resetform",Ee=>{const je=X.defaultFieldValue;Ee.target.checked=je!=null&&je===X.buttonValue}),this.enableScripting&&this.hasJSActions){const Ee=X.buttonValue;me.addEventListener("updatefromsandbox",je=>{const ze={value:De=>{const qe=Ee===De.detail.value;for(const Le of this._getElementsByName(De.target.name)){const $e=qe&&Le.id===te;Le.domElement&&(Le.domElement.checked=$e),f.setValue(Le.id,{value:$e})}}};this._dispatchEventFromSandbox(ze,je)}),this._setEventListeners(me,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],je=>je.target.checked)}return this._setBackgroundColor(me),this._setDefaultPropertiesFromJS(me),this.container.append(me),this.container}}class m extends _{constructor(f){super(f,{ignoreBorder:f.data.hasAppearance})}render(){const f=super.render();f.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(f.title=this.data.alternativeText);const X=f.lastChild;return this.enableScripting&&this.hasJSActions&&X&&(this._setDefaultPropertiesFromJS(X),X.addEventListener("updatefromsandbox",te=>{this._dispatchEventFromSandbox({},te)})),f}}class o extends c{constructor(f){super(f,{isRenderable:f.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const f=this.annotationStorage,X=this.data.id,te=f.getValue(X,{value:this.data.fieldValue}),ce=document.createElement("select");ue.add(ce),ce.setAttribute("data-element-id",X),ce.disabled=this.data.readOnly,this._setRequired(ce,this.data.required),ce.name=this.data.fieldName,ce.tabIndex=ee;let me=this.data.combo&&this.data.options.length>0;this.data.combo||(ce.size=this.data.options.length,this.data.multiSelect&&(ce.multiple=!0)),ce.addEventListener("resetform",De=>{const qe=this.data.defaultFieldValue;for(const Le of ce.options)Le.selected=Le.value===qe});for(const De of this.data.options){const qe=document.createElement("option");qe.textContent=De.displayValue,qe.value=De.exportValue,te.value.includes(De.exportValue)&&(qe.setAttribute("selected",!0),me=!1),ce.append(qe)}let Ee=null;if(me){const De=document.createElement("option");De.value=" ",De.setAttribute("hidden",!0),De.setAttribute("selected",!0),ce.prepend(De),Ee=()=>{De.remove(),ce.removeEventListener("input",Ee),Ee=null},ce.addEventListener("input",Ee)}const je=(De,qe)=>{const Le=qe?"value":"textContent",$e=De.target.options;return De.target.multiple?Array.prototype.filter.call($e,Xe=>Xe.selected).map(Xe=>Xe[Le]):$e.selectedIndex===-1?null:$e[$e.selectedIndex][Le]},ze=De=>{const qe=De.target.options;return Array.prototype.map.call(qe,Le=>({displayValue:Le.textContent,exportValue:Le.value}))};return this.enableScripting&&this.hasJSActions?(ce.addEventListener("updatefromsandbox",De=>{const qe={value(Le){Ee==null||Ee();const $e=Le.detail.value,Xe=new Set(Array.isArray($e)?$e:[$e]);for(const _e of ce.options)_e.selected=Xe.has(_e.value);f.setValue(X,{value:je(Le,!0)})},multipleSelection(Le){ce.multiple=!0},remove(Le){const $e=ce.options,Xe=Le.detail.remove;$e[Xe].selected=!1,ce.remove(Xe),$e.length>0&&Array.prototype.findIndex.call($e,Ve=>Ve.selected)===-1&&($e[0].selected=!0),f.setValue(X,{value:je(Le,!0),items:ze(Le)})},clear(Le){for(;ce.length!==0;)ce.remove(0);f.setValue(X,{value:null,items:[]})},insert(Le){const{index:$e,displayValue:Xe,exportValue:_e}=Le.detail.insert,Ve=ce.children[$e],et=document.createElement("option");et.textContent=Xe,et.value=_e,Ve?Ve.before(et):ce.append(et),f.setValue(X,{value:je(Le,!0),items:ze(Le)})},items(Le){const{items:$e}=Le.detail;for(;ce.length!==0;)ce.remove(0);for(const Xe of $e){const{displayValue:_e,exportValue:Ve}=Xe,et=document.createElement("option");et.textContent=_e,et.value=Ve,ce.append(et)}ce.options.length>0&&(ce.options[0].selected=!0),f.setValue(X,{value:je(Le,!0),items:ze(Le)})},indices(Le){const $e=new Set(Le.detail.indices);for(const Xe of Le.target.options)Xe.selected=$e.has(Xe.index);f.setValue(X,{value:je(Le,!0)})},editable(Le){Le.target.disabled=!Le.detail.editable}};this._dispatchEventFromSandbox(qe,De)}),ce.addEventListener("input",De=>{var $e;const qe=je(De,!0),Le=je(De,!1);f.setValue(X,{value:qe}),($e=this.linkService.eventBus)==null||$e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X,name:"Keystroke",value:Le,changeEx:qe,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(ce,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],De=>De.target.checked)):ce.addEventListener("input",function(De){f.setValue(X,{value:je(De,!0)})}),this.data.combo&&this._setTextStyle(ce),this._setBackgroundColor(ce),this._setDefaultPropertiesFromJS(ce),this.container.append(ce),this.container}}class h extends se{constructor(f){var te,ce,me;const X=!!((te=f.data.titleObj)!=null&&te.str||(ce=f.data.contentsObj)!=null&&ce.str||(me=f.data.richText)!=null&&me.str);super(f,{isRenderable:X})}render(){const f=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",f.includes(this.data.parentType))return this.container;const X=`[data-annotation-id="${this.data.parentId}"]`,te=this.layer.querySelectorAll(X);if(te.length===0)return this.container;const ce=new Y({container:this.container,trigger:Array.from(te),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),me=this.page,Ee=e.Util.normalizeRect([this.data.parentRect[0],me.view[3]-this.data.parentRect[1]+me.view[1],this.data.parentRect[2],me.view[3]-this.data.parentRect[3]+me.view[1]]),je=Ee[0]+this.data.parentRect[2]-this.data.parentRect[0],ze=Ee[1],[De,qe,Le,$e]=this.viewport.viewBox,Xe=Le-De,_e=$e-qe;return this.container.style.left=`${100*(je-De)/Xe}%`,this.container.style.top=`${100*(ze-qe)/_e}%`,this.container.append(ce.render()),this.container}}class Y{constructor(f){this.container=f.container,this.trigger=f.trigger,this.color=f.color,this.titleObj=f.titleObj,this.modificationDate=f.modificationDate,this.contentsObj=f.contentsObj,this.richText=f.richText,this.hideWrapper=f.hideWrapper||!1,this.pinned=!1}render(){var je,ze;const X=document.createElement("div");X.className="popupWrapper",this.hideElement=this.hideWrapper?X:this.container,this.hideElement.hidden=!0;const te=document.createElement("div");te.className="popup";const ce=this.color;if(ce){const De=.7*(255-ce[0])+ce[0],qe=.7*(255-ce[1])+ce[1],Le=.7*(255-ce[2])+ce[2];te.style.backgroundColor=e.Util.makeHexColor(De|0,qe|0,Le|0)}const me=document.createElement("h1");me.dir=this.titleObj.dir,me.textContent=this.titleObj.str,te.append(me);const Ee=a.PDFDateString.toDateObject(this.modificationDate);if(Ee){const De=document.createElement("span");De.className="popupDate",De.textContent="{{date}}, {{time}}",De.dataset.l10nId="annotation_date_string",De.dataset.l10nArgs=JSON.stringify({date:Ee.toLocaleDateString(),time:Ee.toLocaleTimeString()}),te.append(De)}if((je=this.richText)!=null&&je.str&&(!((ze=this.contentsObj)!=null&&ze.str)||this.contentsObj.str===this.richText.str))ie.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:te}),te.lastChild.className="richText popupContent";else{const De=this._formatContents(this.contentsObj);te.append(De)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const De of this.trigger)De.addEventListener("click",this._toggle.bind(this)),De.addEventListener("mouseover",this._show.bind(this,!1)),De.addEventListener("mouseout",this._hide.bind(this,!1));return te.addEventListener("click",this._hide.bind(this,!0)),X.append(te),X}_formatContents({str:f,dir:X}){const te=document.createElement("p");te.className="popupContent",te.dir=X;const ce=f.split(/(?:\r\n?|\n)/);for(let me=0,Ee=ce.length;me<Ee;++me){const je=ce[me];te.append(document.createTextNode(je)),me<Ee-1&&te.append(document.createElement("br"))}return te}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(f=!1){f&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(f=!0){f&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class fe extends se{constructor(f){var te,ce,me;const X=!!(f.data.hasPopup||(te=f.data.titleObj)!=null&&te.str||(ce=f.data.contentsObj)!=null&&ce.str||(me=f.data.richText)!=null&&me.str);super(f,{isRenderable:X,ignoreBorder:!0}),this.textContent=f.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const f=document.createElement("div");f.className="annotationTextContent",f.setAttribute("role","comment");for(const X of this.textContent){const te=document.createElement("span");te.textContent=X,f.append(te)}this.container.append(f)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ae extends se{constructor(f){var te,ce,me;const X=!!(f.data.hasPopup||(te=f.data.titleObj)!=null&&te.str||(ce=f.data.contentsObj)!=null&&ce.str||(me=f.data.richText)!=null&&me.str);super(f,{isRenderable:X,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const f=this.data,{width:X,height:te}=ye(f.rect),ce=this.svgFactory.create(X,te,!0),me=this.svgFactory.createElement("svg:line");return me.setAttribute("x1",f.rect[2]-f.lineCoordinates[0]),me.setAttribute("y1",f.rect[3]-f.lineCoordinates[1]),me.setAttribute("x2",f.rect[2]-f.lineCoordinates[2]),me.setAttribute("y2",f.rect[3]-f.lineCoordinates[3]),me.setAttribute("stroke-width",f.borderStyle.width||1),me.setAttribute("stroke","transparent"),me.setAttribute("fill","transparent"),ce.append(me),this.container.append(ce),this._createPopup(me,f),this.container}}class Z extends se{constructor(f){var te,ce,me;const X=!!(f.data.hasPopup||(te=f.data.titleObj)!=null&&te.str||(ce=f.data.contentsObj)!=null&&ce.str||(me=f.data.richText)!=null&&me.str);super(f,{isRenderable:X,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const f=this.data,{width:X,height:te}=ye(f.rect),ce=this.svgFactory.create(X,te,!0),me=f.borderStyle.width,Ee=this.svgFactory.createElement("svg:rect");return Ee.setAttribute("x",me/2),Ee.setAttribute("y",me/2),Ee.setAttribute("width",X-me),Ee.setAttribute("height",te-me),Ee.setAttribute("stroke-width",me||1),Ee.setAttribute("stroke","transparent"),Ee.setAttribute("fill","transparent"),ce.append(Ee),this.container.append(ce),this._createPopup(Ee,f),this.container}}class pe extends se{constructor(f){var te,ce,me;const X=!!(f.data.hasPopup||(te=f.data.titleObj)!=null&&te.str||(ce=f.data.contentsObj)!=null&&ce.str||(me=f.data.richText)!=null&&me.str);super(f,{isRenderable:X,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const f=this.data,{width:X,height:te}=ye(f.rect),ce=this.svgFactory.create(X,te,!0),me=f.borderStyle.width,Ee=this.svgFactory.createElement("svg:ellipse");return Ee.setAttribute("cx",X/2),Ee.setAttribute("cy",te/2),Ee.setAttribute("rx",X/2-me/2),Ee.setAttribute("ry",te/2-me/2),Ee.setAttribute("stroke-width",me||1),Ee.setAttribute("stroke","transparent"),Ee.setAttribute("fill","transparent"),ce.append(Ee),this.container.append(ce),this._createPopup(Ee,f),this.container}}class Ie extends se{constructor(f){var te,ce,me;const X=!!(f.data.hasPopup||(te=f.data.titleObj)!=null&&te.str||(ce=f.data.contentsObj)!=null&&ce.str||(me=f.data.richText)!=null&&me.str);super(f,{isRenderable:X,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const f=this.data,{width:X,height:te}=ye(f.rect),ce=this.svgFactory.create(X,te,!0);let me=[];for(const je of f.vertices){const ze=je.x-f.rect[0],De=f.rect[3]-je.y;me.push(ze+","+De)}me=me.join(" ");const Ee=this.svgFactory.createElement(this.svgElementName);return Ee.setAttribute("points",me),Ee.setAttribute("stroke-width",f.borderStyle.width||1),Ee.setAttribute("stroke","transparent"),Ee.setAttribute("fill","transparent"),ce.append(Ee),this.container.append(ce),this._createPopup(Ee,f),this.container}}class Ue extends Ie{constructor(f){super(f),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Me extends se{constructor(f){var te,ce,me;const X=!!(f.data.hasPopup||(te=f.data.titleObj)!=null&&te.str||(ce=f.data.contentsObj)!=null&&ce.str||(me=f.data.richText)!=null&&me.str);super(f,{isRenderable:X,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Fe extends se{constructor(f){var te,ce,me;const X=!!(f.data.hasPopup||(te=f.data.titleObj)!=null&&te.str||(ce=f.data.contentsObj)!=null&&ce.str||(me=f.data.richText)!=null&&me.str);super(f,{isRenderable:X,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const f=this.data,{width:X,height:te}=ye(f.rect),ce=this.svgFactory.create(X,te,!0);for(const me of f.inkLists){let Ee=[];for(const ze of me){const De=ze.x-f.rect[0],qe=f.rect[3]-ze.y;Ee.push(`${De},${qe}`)}Ee=Ee.join(" ");const je=this.svgFactory.createElement(this.svgElementName);je.setAttribute("points",Ee),je.setAttribute("stroke-width",f.borderStyle.width||1),je.setAttribute("stroke","transparent"),je.setAttribute("fill","transparent"),this._createPopup(je,f),ce.append(je)}return this.container.append(ce),this.container}}class Pe extends se{constructor(f){var te,ce,me;const X=!!(f.data.hasPopup||(te=f.data.titleObj)!=null&&te.str||(ce=f.data.contentsObj)!=null&&ce.str||(me=f.data.richText)!=null&&me.str);super(f,{isRenderable:X,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class xe extends se{constructor(f){var te,ce,me;const X=!!(f.data.hasPopup||(te=f.data.titleObj)!=null&&te.str||(ce=f.data.contentsObj)!=null&&ce.str||(me=f.data.richText)!=null&&me.str);super(f,{isRenderable:X,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class ke extends se{constructor(f){var te,ce,me;const X=!!(f.data.hasPopup||(te=f.data.titleObj)!=null&&te.str||(ce=f.data.contentsObj)!=null&&ce.str||(me=f.data.richText)!=null&&me.str);super(f,{isRenderable:X,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class Ne extends se{constructor(f){var te,ce,me;const X=!!(f.data.hasPopup||(te=f.data.titleObj)!=null&&te.str||(ce=f.data.contentsObj)!=null&&ce.str||(me=f.data.richText)!=null&&me.str);super(f,{isRenderable:X,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class He extends se{constructor(f){var te,ce,me;const X=!!(f.data.hasPopup||(te=f.data.titleObj)!=null&&te.str||(ce=f.data.contentsObj)!=null&&ce.str||(me=f.data.richText)!=null&&me.str);super(f,{isRenderable:X,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Ze extends se{constructor(f){var ce;super(f,{isRenderable:!0});const{filename:X,content:te}=this.data.file;this.filename=(0,a.getFilenameFromUrl)(X),this.content=te,(ce=this.linkService.eventBus)==null||ce.dispatch("fileattachmentannotation",{source:this,filename:X,content:te})}render(){var X,te;this.container.className="fileAttachmentAnnotation";const f=document.createElement("div");return f.className="popupTriggerArea",f.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((X=this.data.titleObj)!=null&&X.str||(te=this.data.contentsObj)!=null&&te.str||this.data.richText)&&this._createPopup(f,this.data),this.container.append(f),this.container}_download(){var f;(f=this.downloadManager)==null||f.openOrDownloadData(this.container,this.content,this.filename)}}const we=class we{static render(f){var je,ze;const{annotations:X,div:te,viewport:ce,accessibilityManager:me}=f;Ge(this,de,rn).call(this,te,ce);let Ee=0;for(const De of X){if(De.annotationType!==e.AnnotationType.POPUP){const{width:Le,height:$e}=ye(De.rect);if(Le<=0||$e<=0)continue}const qe=le.create({data:De,layer:te,page:f.page,viewport:ce,linkService:f.linkService,downloadManager:f.downloadManager,imageResourcesPath:f.imageResourcesPath||"",renderForms:f.renderForms!==!1,svgFactory:new a.DOMSVGFactory,annotationStorage:f.annotationStorage||new oe.AnnotationStorage,enableScripting:f.enableScripting,hasJSActions:f.hasJSActions,fieldObjects:f.fieldObjects,mouseState:f.mouseState||{isDown:!1}});if(qe.isRenderable){const Le=qe.render();if(De.hidden&&(Le.style.visibility="hidden"),Array.isArray(Le))for(const $e of Le)$e.style.zIndex=Ee++,Ge(je=we,$,nn).call(je,$e,De.id,te,me);else Le.style.zIndex=Ee++,qe instanceof h?te.prepend(Le):Ge(ze=we,$,nn).call(ze,Le,De.id,te,me)}}Ge(this,ve,sn).call(this,te,f.annotationCanvasMap)}static update(f){const{annotationCanvasMap:X,div:te,viewport:ce}=f;Ge(this,de,rn).call(this,te,ce),Ge(this,ve,sn).call(this,te,X),te.hidden=!1}};$=new WeakSet,nn=function(f,X,te,ce){const me=f.firstChild||f;me.id=`${a.AnnotationPrefix}${X}`,te.append(f),ce==null||ce.moveElementInDOM(te,f,me,!1)},de=new WeakSet,rn=function(f,{width:X,height:te,rotation:ce}){const{style:me}=f,Ee=ce%180!==0,je=Math.floor(X)+"px",ze=Math.floor(te)+"px";me.width=Ee?ze:je,me.height=Ee?je:ze,f.setAttribute("data-main-rotation",ce)},ve=new WeakSet,sn=function(f,X){if(X){for(const[te,ce]of X){const me=f.querySelector(`[data-annotation-id="${te}"]`);if(!me)continue;const{firstChild:Ee}=me;Ee?Ee.nodeName==="CANVAS"?Ee.replaceWith(ce):Ee.before(ce):me.append(ce)}X.clear()}},We(we,$),We(we,de),We(we,ve);let Se=we;i.AnnotationLayer=Se},(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorConverters=void 0;function j(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}class e{static CMYK_G([oe,he,ie,ee]){return["G",1-Math.min(1,.3*oe+.59*ie+.11*he+ee)]}static G_CMYK([oe]){return["CMYK",0,0,0,1-oe]}static G_RGB([oe]){return["RGB",oe,oe,oe]}static G_HTML([oe]){const he=j(oe);return`#${he}${he}${he}`}static RGB_G([oe,he,ie]){return["G",.3*oe+.59*he+.11*ie]}static RGB_HTML([oe,he,ie]){const ee=j(oe),k=j(he),ue=j(ie);return`#${ee}${k}${ue}`}static T_HTML(){return"#00000000"}static CMYK_RGB([oe,he,ie,ee]){return["RGB",1-Math.min(1,oe+ee),1-Math.min(1,ie+ee),1-Math.min(1,he+ee)]}static CMYK_HTML(oe){const he=this.CMYK_RGB(oe).slice(1);return this.RGB_HTML(he)}static RGB_CMYK([oe,he,ie]){const ee=1-oe,k=1-he,ue=1-ie,ye=Math.min(ee,k,ue);return["CMYK",ee,k,ue,ye]}}i.ColorConverters=e},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaLayer=void 0;var e=j(20);class a{static setupStorage(he,ie,ee,k,ue){const ye=k.getValue(ie,{value:null});switch(ee.name){case"textarea":if(ye.value!==null&&(he.textContent=ye.value),ue==="print")break;he.addEventListener("input",le=>{k.setValue(ie,{value:le.target.value})});break;case"input":if(ee.attributes.type==="radio"||ee.attributes.type==="checkbox"){if(ye.value===ee.attributes.xfaOn?he.setAttribute("checked",!0):ye.value===ee.attributes.xfaOff&&he.removeAttribute("checked"),ue==="print")break;he.addEventListener("change",le=>{k.setValue(ie,{value:le.target.checked?le.target.getAttribute("xfaOn"):le.target.getAttribute("xfaOff")})})}else{if(ye.value!==null&&he.setAttribute("value",ye.value),ue==="print")break;he.addEventListener("input",le=>{k.setValue(ie,{value:le.target.value})})}break;case"select":if(ye.value!==null)for(const le of ee.children)le.attributes.value===ye.value&&(le.attributes.selected=!0);he.addEventListener("input",le=>{const se=le.target.options,_=se.selectedIndex===-1?"":se[se.selectedIndex].value;k.setValue(ie,{value:_})});break}}static setAttributes({html:he,element:ie,storage:ee=null,intent:k,linkService:ue}){const{attributes:ye}=ie,le=he instanceof HTMLAnchorElement;ye.type==="radio"&&(ye.name=`${ye.name}-${k}`);for(const[se,_]of Object.entries(ye))if(_!=null)switch(se){case"class":_.length&&he.setAttribute(se,_.join(" "));break;case"dataId":break;case"id":he.setAttribute("data-element-id",_);break;case"style":Object.assign(he.style,_);break;case"textContent":he.textContent=_;break;default:(!le||se!=="href"&&se!=="newWindow")&&he.setAttribute(se,_)}le&&ue.addLinkAttributes(he,ye.href,ye.newWindow),ee&&ye.dataId&&this.setupStorage(he,ye.dataId,ie,ee)}static render(he){var s;const ie=he.annotationStorage,ee=he.linkService,k=he.xfaHtml,ue=he.intent||"display",ye=document.createElement(k.name);k.attributes&&this.setAttributes({html:ye,element:k,intent:ue,linkService:ee});const le=[[k,-1,ye]],se=he.div;if(se.append(ye),he.viewport){const c=`matrix(${he.viewport.transform.join(",")})`;se.style.transform=c}ue!=="richText"&&se.setAttribute("class","xfaLayer xfaFont");const _=[];for(;le.length>0;){const[c,g,ne]=le.at(-1);if(g+1===c.children.length){le.pop();continue}const re=c.children[++le.at(-1)[1]];if(re===null)continue;const{name:m}=re;if(m==="#text"){const h=document.createTextNode(re.value);_.push(h),ne.append(h);continue}let o;if((s=re==null?void 0:re.attributes)!=null&&s.xmlns?o=document.createElementNS(re.attributes.xmlns,m):o=document.createElement(m),ne.append(o),re.attributes&&this.setAttributes({html:o,element:re,storage:ie,intent:ue,linkService:ee}),re.children&&re.children.length>0)le.push([re,-1,o]);else if(re.value){const h=document.createTextNode(re.value);e.XfaText.shouldBuildText(m)&&_.push(h),o.append(h)}}for(const c of se.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))c.setAttribute("readOnly",!0);return{textDivs:_}}static update(he){const ie=`matrix(${he.viewport.transform.join(",")})`;he.div.style.transform=ie,he.div.hidden=!1}}i.XfaLayer=a},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextLayerRenderTask=void 0,i.renderTextLayer=ne;var e=j(1),a=j(8);const oe=1e5,he=30,ie=.8,ee=new Map,k=/^\s+$/g;function ue(re,m){const o=ee.get(re);if(o)return o;m.save(),m.font=`${he}px ${re}`;const h=m.measureText("");let Y=h.fontBoundingBoxAscent,fe=Math.abs(h.fontBoundingBoxDescent);if(Y){m.restore();const Z=Y/(Y+fe);return ee.set(re,Z),Z}m.strokeStyle="red",m.clearRect(0,0,he,he),m.strokeText("g",0,0);let ae=m.getImageData(0,0,he,he).data;fe=0;for(let Z=ae.length-1-3;Z>=0;Z-=4)if(ae[Z]>0){fe=Math.ceil(Z/4/he);break}m.clearRect(0,0,he,he),m.strokeText("A",0,he),ae=m.getImageData(0,0,he,he).data,Y=0;for(let Z=0,pe=ae.length;Z<pe;Z+=4)if(ae[Z]>0){Y=he-Math.floor(Z/4/he);break}if(m.restore(),Y){const Z=Y/(Y+fe);return ee.set(re,Z),Z}return ee.set(re,ie),ie}function ye(re,m,o,h){const Y=document.createElement("span"),fe=re._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:m.str!=="",hasEOL:m.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:m.str!=="",hasEOL:m.hasEOL,fontSize:0};re._textDivs.push(Y);const ae=e.Util.transform(re._viewport.transform,m.transform);let Z=Math.atan2(ae[1],ae[0]);const pe=o[m.fontName];pe.vertical&&(Z+=Math.PI/2);const Ie=Math.hypot(ae[2],ae[3]),Ue=Ie*ue(pe.fontFamily,h);let Me,Fe;Z===0?(Me=ae[4],Fe=ae[5]-Ue):(Me=ae[4]+Ue*Math.sin(Z),Fe=ae[5]-Ue*Math.cos(Z)),Y.style.left=`${Me}px`,Y.style.top=`${Fe}px`,Y.style.fontSize=`${Ie}px`,Y.style.fontFamily=pe.fontFamily,fe.fontSize=Ie,Y.setAttribute("role","presentation"),Y.textContent=m.str,Y.dir=m.dir,re._fontInspectorEnabled&&(Y.dataset.fontName=m.fontName),Z!==0&&(fe.angle=Z*(180/Math.PI));let Pe=!1;if(m.str.length>1||re._enhanceTextSelection&&k.test(m.str))Pe=!0;else if(m.str!==" "&&m.transform[0]!==m.transform[3]){const xe=Math.abs(m.transform[0]),ke=Math.abs(m.transform[3]);xe!==ke&&Math.max(xe,ke)/Math.min(xe,ke)>1.5&&(Pe=!0)}if(Pe&&(pe.vertical?fe.canvasWidth=m.height*re._viewport.scale:fe.canvasWidth=m.width*re._viewport.scale),re._textDivProperties.set(Y,fe),re._textContentStream&&re._layoutText(Y),re._enhanceTextSelection&&fe.hasText){let xe=1,ke=0;Z!==0&&(xe=Math.cos(Z),ke=Math.sin(Z));const Ne=(pe.vertical?m.height:m.width)*re._viewport.scale,He=Ie;let Ze,Se;Z!==0?(Ze=[xe,ke,-ke,xe,Me,Fe],Se=e.Util.getAxialAlignedBoundingBox([0,0,Ne,He],Ze)):Se=[Me,Fe,Me+Ne,Fe+He],re._bounds.push({left:Se[0],top:Se[1],right:Se[2],bottom:Se[3],div:Y,size:[Ne,He],m:Ze})}}function le(re){if(re._canceled)return;const m=re._textDivs,o=re._capability,h=m.length;if(h>oe){re._renderingDone=!0,o.resolve();return}if(!re._textContentStream)for(let Y=0;Y<h;Y++)re._layoutText(m[Y]);re._renderingDone=!0,o.resolve()}function se(re,m,o){let h=0;for(let Y=0;Y<o;Y++){const fe=re[m++];fe>0&&(h=h?Math.min(fe,h):fe)}return h}function _(re){const m=re._bounds,o=re._viewport,h=s(o.width,o.height,m);for(let Y=0;Y<h.length;Y++){const fe=m[Y].div,ae=re._textDivProperties.get(fe);if(ae.angle===0){ae.paddingLeft=m[Y].left-h[Y].left,ae.paddingTop=m[Y].top-h[Y].top,ae.paddingRight=h[Y].right-m[Y].right,ae.paddingBottom=h[Y].bottom-m[Y].bottom,re._textDivProperties.set(fe,ae);continue}const Z=h[Y],pe=m[Y],Ie=pe.m,Ue=Ie[0],Me=Ie[1],Fe=[[0,0],[0,pe.size[1]],[pe.size[0],0],pe.size],Pe=new Float64Array(64);for(let ke=0,Ne=Fe.length;ke<Ne;ke++){const He=e.Util.applyTransform(Fe[ke],Ie);Pe[ke+0]=Ue&&(Z.left-He[0])/Ue,Pe[ke+4]=Me&&(Z.top-He[1])/Me,Pe[ke+8]=Ue&&(Z.right-He[0])/Ue,Pe[ke+12]=Me&&(Z.bottom-He[1])/Me,Pe[ke+16]=Me&&(Z.left-He[0])/-Me,Pe[ke+20]=Ue&&(Z.top-He[1])/Ue,Pe[ke+24]=Me&&(Z.right-He[0])/-Me,Pe[ke+28]=Ue&&(Z.bottom-He[1])/Ue,Pe[ke+32]=Ue&&(Z.left-He[0])/-Ue,Pe[ke+36]=Me&&(Z.top-He[1])/-Me,Pe[ke+40]=Ue&&(Z.right-He[0])/-Ue,Pe[ke+44]=Me&&(Z.bottom-He[1])/-Me,Pe[ke+48]=Me&&(Z.left-He[0])/Me,Pe[ke+52]=Ue&&(Z.top-He[1])/-Ue,Pe[ke+56]=Me&&(Z.right-He[0])/Me,Pe[ke+60]=Ue&&(Z.bottom-He[1])/-Ue}const xe=1+Math.min(Math.abs(Ue),Math.abs(Me));ae.paddingLeft=se(Pe,32,16)/xe,ae.paddingTop=se(Pe,48,16)/xe,ae.paddingRight=se(Pe,0,16)/xe,ae.paddingBottom=se(Pe,16,16)/xe,re._textDivProperties.set(fe,ae)}}function s(re,m,o){const h=o.map(function(fe,ae){return{x1:fe.left,y1:fe.top,x2:fe.right,y2:fe.bottom,index:ae,x1New:void 0,x2New:void 0}});c(re,h);const Y=new Array(o.length);for(const fe of h){const ae=fe.index;Y[ae]={left:fe.x1New,top:0,right:fe.x2New,bottom:0}}o.map(function(fe,ae){const Z=Y[ae],pe=h[ae];pe.x1=fe.top,pe.y1=re-Z.right,pe.x2=fe.bottom,pe.y2=re-Z.left,pe.index=ae,pe.x1New=void 0,pe.x2New=void 0}),c(m,h);for(const fe of h){const ae=fe.index;Y[ae].top=fe.x1New,Y[ae].bottom=fe.x2New}return Y}function c(re,m){m.sort(function(Y,fe){return Y.x1-fe.x1||Y.index-fe.index});const h=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const Y of m){let fe=0;for(;fe<h.length&&h[fe].end<=Y.y1;)fe++;let ae=h.length-1;for(;ae>=0&&h[ae].start>=Y.y2;)ae--;let Z,pe,Ie,Ue,Me=-1/0;for(Ie=fe;Ie<=ae;Ie++){Z=h[Ie],pe=Z.boundary;let xe;pe.x2>Y.x1?xe=pe.index>Y.index?pe.x1New:Y.x1:pe.x2New===void 0?xe=(pe.x2+Y.x1)/2:xe=pe.x2New,xe>Me&&(Me=xe)}for(Y.x1New=Me,Ie=fe;Ie<=ae;Ie++)Z=h[Ie],pe=Z.boundary,pe.x2New===void 0?pe.x2>Y.x1?pe.index>Y.index&&(pe.x2New=pe.x2):pe.x2New=Me:pe.x2New>Me&&(pe.x2New=Math.max(Me,pe.x2));const Fe=[];let Pe=null;for(Ie=fe;Ie<=ae;Ie++){Z=h[Ie],pe=Z.boundary;const xe=pe.x2>Y.x2?pe:Y;Pe===xe?Fe.at(-1).end=Z.end:(Fe.push({start:Z.start,end:Z.end,boundary:xe}),Pe=xe)}for(h[fe].start<Y.y1&&(Fe[0].start=Y.y1,Fe.unshift({start:h[fe].start,end:Y.y1,boundary:h[fe].boundary})),Y.y2<h[ae].end&&(Fe.at(-1).end=Y.y2,Fe.push({start:Y.y2,end:h[ae].end,boundary:h[ae].boundary})),Ie=fe;Ie<=ae;Ie++){if(Z=h[Ie],pe=Z.boundary,pe.x2New!==void 0)continue;let xe=!1;for(Ue=fe-1;!xe&&Ue>=0&&h[Ue].start>=pe.y1;Ue--)xe=h[Ue].boundary===pe;for(Ue=ae+1;!xe&&Ue<h.length&&h[Ue].end<=pe.y2;Ue++)xe=h[Ue].boundary===pe;for(Ue=0;!xe&&Ue<Fe.length;Ue++)xe=Fe[Ue].boundary===pe;xe||(pe.x2New=Me)}Array.prototype.splice.apply(h,[fe,ae-fe+1,...Fe])}for(const Y of h){const fe=Y.boundary;fe.x2New===void 0&&(fe.x2New=Math.max(re,fe.x2))}}class g{constructor({textContent:m,textContentStream:o,container:h,viewport:Y,textDivs:fe,textContentItemsStr:ae,enhanceTextSelection:Z}){var pe;Z&&(0,a.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=m,this._textContentStream=o,this._container=h,this._document=h.ownerDocument,this._viewport=Y,this._textDivs=fe||[],this._textContentItemsStr=ae||[],this._enhanceTextSelection=!!Z,this._fontInspectorEnabled=!!((pe=globalThis.FontInspector)!=null&&pe.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,e.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(m,o){for(let h=0,Y=m.length;h<Y;h++){if(m[h].str===void 0){if(m[h].type==="beginMarkedContentProps"||m[h].type==="beginMarkedContent"){const fe=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),m[h].id!==null&&this._container.setAttribute("id",`${m[h].id}`),fe.append(this._container)}else m[h].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(m[h].str),ye(this,m[h],o,this._layoutTextCtx)}}_layoutText(m){const o=this._textDivProperties.get(m);let h="";if(o.canvasWidth!==0&&o.hasText){const{fontFamily:Y}=m.style,{fontSize:fe}=o;(fe!==this._layoutTextLastFontSize||Y!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${fe*this._devicePixelRatio}px ${Y}`,this._layoutTextLastFontSize=fe,this._layoutTextLastFontFamily=Y);const{width:ae}=this._layoutTextCtx.measureText(m.textContent);if(ae>0){const Z=this._devicePixelRatio*o.canvasWidth/ae;this._enhanceTextSelection&&(o.scale=Z),h=`scaleX(${Z})`}}if(o.angle!==0&&(h=`rotate(${o.angle}deg) ${h}`),h.length>0&&(this._enhanceTextSelection&&(o.originalTransform=h),m.style.transform=h),o.hasText&&this._container.append(m),o.hasEOL){const Y=document.createElement("br");Y.setAttribute("role","presentation"),this._container.append(Y)}}_render(m=0){const o=(0,e.createPromiseCapability)();let h=Object.create(null);const Y=this._document.createElement("canvas");if(Y.height=Y.width=he,this._layoutTextCtx=Y.getContext("2d",{alpha:!1}),this._textContent){const fe=this._textContent.items,ae=this._textContent.styles;this._processItems(fe,ae),o.resolve()}else if(this._textContentStream){const fe=()=>{this._reader.read().then(({value:ae,done:Z})=>{if(Z){o.resolve();return}Object.assign(h,ae.styles),this._processItems(ae.items,h),fe()},o.reject)};this._reader=this._textContentStream.getReader(),fe()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');o.promise.then(()=>{h=null,m?this._renderTimer=setTimeout(()=>{le(this),this._renderTimer=null},m):le(this)},this._capability.reject)}expandTextDivs(m=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(_(this),this._bounds=null);const o=[],h=[];for(let Y=0,fe=this._textDivs.length;Y<fe;Y++){const ae=this._textDivs[Y],Z=this._textDivProperties.get(ae);Z.hasText&&(m?(o.length=0,h.length=0,Z.originalTransform&&o.push(Z.originalTransform),Z.paddingTop>0?(h.push(`${Z.paddingTop}px`),o.push(`translateY(${-Z.paddingTop}px)`)):h.push(0),Z.paddingRight>0?h.push(`${Z.paddingRight/Z.scale}px`):h.push(0),Z.paddingBottom>0?h.push(`${Z.paddingBottom}px`):h.push(0),Z.paddingLeft>0?(h.push(`${Z.paddingLeft/Z.scale}px`),o.push(`translateX(${-Z.paddingLeft/Z.scale}px)`)):h.push(0),ae.style.padding=h.join(" "),o.length&&(ae.style.transform=o.join(" "))):(ae.style.padding=null,ae.style.transform=Z.originalTransform))}}}i.TextLayerRenderTask=g;function ne(re){const m=new g({textContent:re.textContent,textContentStream:re.textContentStream,container:re.container,viewport:re.viewport,textDivs:re.textDivs,textContentItemsStr:re.textContentItemsStr,enhanceTextSelection:re.enhanceTextSelection});return m._render(re.timeout),m}},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SVGGraphics=void 0;var e=j(8),a=j(1),oe=j(3);let he=class{constructor(){(0,a.unreachable)("Not implemented: SVGGraphics")}};i.SVGGraphics=he;{let s=function(o){let h=[];const Y=[];for(const fe of o){if(fe.fn==="save"){h.push({fnId:92,fn:"group",items:[]}),Y.push(h),h=h.at(-1).items;continue}fe.fn==="restore"?h=Y.pop():h.push(fe)}return h},c=function(o){if(Number.isInteger(o))return o.toString();const h=o.toFixed(10);let Y=h.length-1;if(h[Y]!=="0")return h;do Y--;while(h[Y]==="0");return h.substring(0,h[Y]==="."?Y:Y+1)},g=function(o){if(o[4]===0&&o[5]===0){if(o[1]===0&&o[2]===0)return o[0]===1&&o[3]===1?"":`scale(${c(o[0])} ${c(o[3])})`;if(o[0]===o[3]&&o[1]===-o[2]){const h=Math.acos(o[0])*180/Math.PI;return`rotate(${c(h)})`}}else if(o[0]===1&&o[1]===0&&o[2]===0&&o[3]===1)return`translate(${c(o[4])} ${c(o[5])})`;return`matrix(${c(o[0])} ${c(o[1])} ${c(o[2])} ${c(o[3])} ${c(o[4])} ${c(o[5])})`};const ie={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},ee="http://www.w3.org/XML/1998/namespace",k="http://www.w3.org/1999/xlink",ue=["butt","round","square"],ye=["miter","round","bevel"],le=function(o,h="",Y=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!Y)return URL.createObjectURL(new Blob([o],{type:h}));const fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let ae=`data:${h};base64,`;for(let Z=0,pe=o.length;Z<pe;Z+=3){const Ie=o[Z]&255,Ue=o[Z+1]&255,Me=o[Z+2]&255,Fe=Ie>>2,Pe=(Ie&3)<<4|Ue>>4,xe=Z+1<pe?(Ue&15)<<2|Me>>6:64,ke=Z+2<pe?Me&63:64;ae+=fe[Fe]+fe[Pe]+fe[xe]+fe[ke]}return ae},se=function(){const o=new Uint8Array([137,80,78,71,13,10,26,10]),h=12,Y=new Int32Array(256);for(let Me=0;Me<256;Me++){let Fe=Me;for(let Pe=0;Pe<8;Pe++)Fe&1?Fe=3988292384^Fe>>1&2147483647:Fe=Fe>>1&2147483647;Y[Me]=Fe}function fe(Me,Fe,Pe){let xe=-1;for(let ke=Fe;ke<Pe;ke++){const Ne=(xe^Me[ke])&255,He=Y[Ne];xe=xe>>>8^He}return xe^-1}function ae(Me,Fe,Pe,xe){let ke=xe;const Ne=Fe.length;Pe[ke]=Ne>>24&255,Pe[ke+1]=Ne>>16&255,Pe[ke+2]=Ne>>8&255,Pe[ke+3]=Ne&255,ke+=4,Pe[ke]=Me.charCodeAt(0)&255,Pe[ke+1]=Me.charCodeAt(1)&255,Pe[ke+2]=Me.charCodeAt(2)&255,Pe[ke+3]=Me.charCodeAt(3)&255,ke+=4,Pe.set(Fe,ke),ke+=Fe.length;const He=fe(Pe,xe+4,ke);Pe[ke]=He>>24&255,Pe[ke+1]=He>>16&255,Pe[ke+2]=He>>8&255,Pe[ke+3]=He&255}function Z(Me,Fe,Pe){let xe=1,ke=0;for(let Ne=Fe;Ne<Pe;++Ne)xe=(xe+(Me[Ne]&255))%65521,ke=(ke+xe)%65521;return ke<<16|xe}function pe(Me){if(!oe.isNodeJS)return Ie(Me);try{let Fe;parseInt(browser$1.versions.node)>=8?Fe=Me:Fe=Buffer.from(Me);const Pe=require$$5.deflateSync(Fe,{level:9});return Pe instanceof Uint8Array?Pe:new Uint8Array(Pe)}catch(Fe){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Fe)}return Ie(Me)}function Ie(Me){let Fe=Me.length;const Pe=65535,xe=Math.ceil(Fe/Pe),ke=new Uint8Array(2+Fe+xe*5+4);let Ne=0;ke[Ne++]=120,ke[Ne++]=156;let He=0;for(;Fe>Pe;)ke[Ne++]=0,ke[Ne++]=255,ke[Ne++]=255,ke[Ne++]=0,ke[Ne++]=0,ke.set(Me.subarray(He,He+Pe),Ne),Ne+=Pe,He+=Pe,Fe-=Pe;ke[Ne++]=1,ke[Ne++]=Fe&255,ke[Ne++]=Fe>>8&255,ke[Ne++]=~Fe&65535&255,ke[Ne++]=(~Fe&65535)>>8&255,ke.set(Me.subarray(He),Ne),Ne+=Me.length-He;const Ze=Z(Me,0,Me.length);return ke[Ne++]=Ze>>24&255,ke[Ne++]=Ze>>16&255,ke[Ne++]=Ze>>8&255,ke[Ne++]=Ze&255,ke}function Ue(Me,Fe,Pe,xe){const ke=Me.width,Ne=Me.height;let He,Ze,Se;const $=Me.data;switch(Fe){case a.ImageKind.GRAYSCALE_1BPP:Ze=0,He=1,Se=ke+7>>3;break;case a.ImageKind.RGB_24BPP:Ze=2,He=8,Se=ke*3;break;case a.ImageKind.RGBA_32BPP:Ze=6,He=8,Se=ke*4;break;default:throw new Error("invalid format")}const b=new Uint8Array((1+Se)*Ne);let de=0,be=0;for(let X=0;X<Ne;++X)b[de++]=0,b.set($.subarray(be,be+Se),de),be+=Se,de+=Se;if(Fe===a.ImageKind.GRAYSCALE_1BPP&&xe){de=0;for(let X=0;X<Ne;X++){de++;for(let te=0;te<Se;te++)b[de++]^=255}}const ve=new Uint8Array([ke>>24&255,ke>>16&255,ke>>8&255,ke&255,Ne>>24&255,Ne>>16&255,Ne>>8&255,Ne&255,He,Ze,0,0,0]),Ae=pe(b),we=o.length+h*3+ve.length+Ae.length,Re=new Uint8Array(we);let f=0;return Re.set(o,f),f+=o.length,ae("IHDR",ve,Re,f),f+=h+ve.length,ae("IDATA",Ae,Re,f),f+=h+Ae.length,ae("IEND",new Uint8Array(0),Re,f),le(Re,"image/png",Pe)}return function(Fe,Pe,xe){const ke=Fe.kind===void 0?a.ImageKind.GRAYSCALE_1BPP:Fe.kind;return Ue(Fe,ke,Pe,xe)}}();class _{constructor(){this.fontSizeScale=1,this.fontWeight=ie.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=ie.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(h,Y){this.x=h,this.y=Y}}let ne=0,re=0,m=0;i.SVGGraphics=he=class{constructor(o,h,Y=!1){(0,e.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new e.DOMSVGFactory,this.current=new _,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=h,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Y,this._operatorIdMapping=[];for(const fe in a.OPS)this._operatorIdMapping[a.OPS[fe]]=fe}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const h=o.fnArray,Y=o.argsArray;for(let fe=0,ae=h.length;fe<ae;fe++)if(h[fe]===a.OPS.dependency)for(const Z of Y[fe]){const pe=Z.startsWith("g_")?this.commonObjs:this.objs,Ie=new Promise(Ue=>{pe.get(Z,Ue)});this.current.dependencies.push(Ie)}return Promise.all(this.current.dependencies)}transform(o,h,Y,fe,ae,Z){const pe=[o,h,Y,fe,ae,Z];this.transformMatrix=a.Util.transform(this.transformMatrix,pe),this.tgrp=null}getSVG(o,h){this.viewport=h;const Y=this._initialize(h);return this.loadDependencies(o).then(()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),Y))}convertOpList(o){const h=this._operatorIdMapping,Y=o.argsArray,fe=o.fnArray,ae=[];for(let Z=0,pe=fe.length;Z<pe;Z++){const Ie=fe[Z];ae.push({fnId:Ie,fn:h[Ie],args:Y[Z]})}return s(ae)}executeOpTree(o){for(const h of o){const Y=h.fn,fe=h.fnId,ae=h.args;switch(fe|0){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(ae);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(ae[0],ae[1]);break;case a.OPS.setFont:this.setFont(ae);break;case a.OPS.showText:this.showText(ae[0]);break;case a.OPS.showSpacedText:this.showText(ae[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(ae[0],ae[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(ae[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(ae[0]);break;case a.OPS.setHScale:this.setHScale(ae[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5]);break;case a.OPS.setTextRise:this.setTextRise(ae[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(ae[0]);break;case a.OPS.setLineWidth:this.setLineWidth(ae[0]);break;case a.OPS.setLineJoin:this.setLineJoin(ae[0]);break;case a.OPS.setLineCap:this.setLineCap(ae[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(ae[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(ae[0],ae[1],ae[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(ae[0],ae[1],ae[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(ae);break;case a.OPS.setFillColorN:this.setFillColorN(ae);break;case a.OPS.shadingFill:this.shadingFill(ae[0]);break;case a.OPS.setDash:this.setDash(ae[0],ae[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(ae[0]);break;case a.OPS.setFlatness:this.setFlatness(ae[0]);break;case a.OPS.setGState:this.setGState(ae[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(ae[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(ae[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(ae[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(ae[0],ae[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5]);break;case a.OPS.constructPath:this.constructPath(ae[0],ae[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(h.items);break;default:(0,a.warn)(`Unimplemented operator ${Y}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,h,Y,fe,ae,Z){const pe=this.current;pe.textMatrix=pe.lineMatrix=[o,h,Y,fe,ae,Z],pe.textMatrixScale=Math.hypot(o,h),pe.x=pe.lineX=0,pe.y=pe.lineY=0,pe.xcoords=[],pe.ycoords=[],pe.tspan=this.svgFactory.createElement("svg:tspan"),pe.tspan.setAttributeNS(null,"font-family",pe.fontFamily),pe.tspan.setAttributeNS(null,"font-size",`${c(pe.fontSize)}px`),pe.tspan.setAttributeNS(null,"y",c(-pe.y)),pe.txtElement=this.svgFactory.createElement("svg:text"),pe.txtElement.append(pe.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=a.IDENTITY_MATRIX,o.lineMatrix=a.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,h){const Y=this.current;Y.x=Y.lineX+=o,Y.y=Y.lineY+=h,Y.xcoords=[],Y.ycoords=[],Y.tspan=this.svgFactory.createElement("svg:tspan"),Y.tspan.setAttributeNS(null,"font-family",Y.fontFamily),Y.tspan.setAttributeNS(null,"font-size",`${c(Y.fontSize)}px`),Y.tspan.setAttributeNS(null,"y",c(-Y.y))}showText(o){const h=this.current,Y=h.font,fe=h.fontSize;if(fe===0)return;const ae=h.fontSizeScale,Z=h.charSpacing,pe=h.wordSpacing,Ie=h.fontDirection,Ue=h.textHScale*Ie,Me=Y.vertical,Fe=Me?1:-1,Pe=Y.defaultVMetrics,xe=fe*h.fontMatrix[0];let ke=0;for(const Ze of o){if(Ze===null){ke+=Ie*pe;continue}else if(typeof Ze=="number"){ke+=Fe*Ze*fe/1e3;continue}const Se=(Ze.isSpace?pe:0)+Z,$=Ze.fontChar;let b,de,be=Ze.width;if(Me){let Ae;const we=Ze.vmetric||Pe;Ae=Ze.vmetric?we[1]:be*.5,Ae=-Ae*xe;const Re=we[2]*xe;be=we?-we[0]:be,b=Ae/ae,de=(ke+Re)/ae}else b=ke/ae,de=0;(Ze.isInFont||Y.missingFile)&&(h.xcoords.push(h.x+b),Me&&h.ycoords.push(-h.y+de),h.tspan.textContent+=$);let ve;Me?ve=be*xe-Se*Ie:ve=be*xe+Se*Ie,ke+=ve}h.tspan.setAttributeNS(null,"x",h.xcoords.map(c).join(" ")),Me?h.tspan.setAttributeNS(null,"y",h.ycoords.map(c).join(" ")):h.tspan.setAttributeNS(null,"y",c(-h.y)),Me?h.y-=ke:h.x+=ke*Ue,h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size",`${c(h.fontSize)}px`),h.fontStyle!==ie.fontStyle&&h.tspan.setAttributeNS(null,"font-style",h.fontStyle),h.fontWeight!==ie.fontWeight&&h.tspan.setAttributeNS(null,"font-weight",h.fontWeight);const Ne=h.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(Ne===a.TextRenderingMode.FILL||Ne===a.TextRenderingMode.FILL_STROKE?(h.fillColor!==ie.fillColor&&h.tspan.setAttributeNS(null,"fill",h.fillColor),h.fillAlpha<1&&h.tspan.setAttributeNS(null,"fill-opacity",h.fillAlpha)):h.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?h.tspan.setAttributeNS(null,"fill","transparent"):h.tspan.setAttributeNS(null,"fill","none"),Ne===a.TextRenderingMode.STROKE||Ne===a.TextRenderingMode.FILL_STROKE){const Ze=1/(h.textMatrixScale||1);this._setStrokeAttributes(h.tspan,Ze)}let He=h.textMatrix;h.textRise!==0&&(He=He.slice(),He[5]+=h.textRise),h.txtElement.setAttributeNS(null,"transform",`${g(He)} scale(${c(Ue)}, -1)`),h.txtElement.setAttributeNS(ee,"xml:space","preserve"),h.txtElement.append(h.tspan),h.txtgrp.append(h.txtElement),this._ensureTransformGroup().append(h.txtElement)}setLeadingMoveText(o,h){this.setLeading(-h),this.moveText(o,h)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const h=le(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${h}); }
`}setFont(o){const h=this.current,Y=this.commonObjs.get(o[0]);let fe=o[1];h.font=Y,this.embedFonts&&!Y.missingFile&&!this.embeddedFonts[Y.loadedName]&&(this.addFontStyle(Y),this.embeddedFonts[Y.loadedName]=Y),h.fontMatrix=Y.fontMatrix||a.FONT_IDENTITY_MATRIX;let ae="normal";Y.black?ae="900":Y.bold&&(ae="bold");const Z=Y.italic?"italic":"normal";fe<0?(fe=-fe,h.fontDirection=-1):h.fontDirection=1,h.fontSize=fe,h.fontFamily=Y.loadedName,h.fontWeight=ae,h.fontStyle=Z,h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"y",c(-h.y)),h.xcoords=[],h.ycoords=[]}endText(){var h;const o=this.current;o.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&((h=o.txtElement)!=null&&h.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=ue[o]}setLineJoin(o){this.current.lineJoin=ye[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,h,Y){this.current.strokeColor=a.Util.makeHexColor(o,h,Y)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,h,Y){this.current.fillColor=a.Util.makeHexColor(o,h,Y),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const h=this.viewport.width,Y=this.viewport.height,fe=a.Util.inverseTransform(this.transformMatrix),ae=a.Util.applyTransform([0,0],fe),Z=a.Util.applyTransform([0,Y],fe),pe=a.Util.applyTransform([h,0],fe),Ie=a.Util.applyTransform([h,Y],fe),Ue=Math.min(ae[0],Z[0],pe[0],Ie[0]),Me=Math.min(ae[1],Z[1],pe[1],Ie[1]),Fe=Math.max(ae[0],Z[0],pe[0],Ie[0]),Pe=Math.max(ae[1],Z[1],pe[1],Ie[1]),xe=this.svgFactory.createElement("svg:rect");xe.setAttributeNS(null,"x",Ue),xe.setAttributeNS(null,"y",Me),xe.setAttributeNS(null,"width",Fe-Ue),xe.setAttributeNS(null,"height",Pe-Me),xe.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&xe.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(xe)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const h=o[1],Y=o[2],fe=o[3]||a.IDENTITY_MATRIX,[ae,Z,pe,Ie]=o[4],Ue=o[5],Me=o[6],Fe=o[7],Pe=`shading${m++}`,[xe,ke,Ne,He]=a.Util.normalizeRect([...a.Util.applyTransform([ae,Z],fe),...a.Util.applyTransform([pe,Ie],fe)]),[Ze,Se]=a.Util.singularValueDecompose2dScale(fe),$=Ue*Ze,b=Me*Se,de=this.svgFactory.createElement("svg:pattern");de.setAttributeNS(null,"id",Pe),de.setAttributeNS(null,"patternUnits","userSpaceOnUse"),de.setAttributeNS(null,"width",$),de.setAttributeNS(null,"height",b),de.setAttributeNS(null,"x",`${xe}`),de.setAttributeNS(null,"y",`${ke}`);const be=this.svg,ve=this.transformMatrix,Ae=this.current.fillColor,we=this.current.strokeColor,Re=this.svgFactory.create(Ne-xe,He-ke);if(this.svg=Re,this.transformMatrix=fe,Fe===2){const f=a.Util.makeHexColor(...h);this.current.fillColor=f,this.current.strokeColor=f}return this.executeOpTree(this.convertOpList(Y)),this.svg=be,this.transformMatrix=ve,this.current.fillColor=Ae,this.current.strokeColor=we,de.append(Re.childNodes[0]),this.defs.append(de),`url(#${Pe})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const h=`shading${m++}`,Y=o[3];let fe;switch(o[1]){case"axial":const ae=o[4],Z=o[5];fe=this.svgFactory.createElement("svg:linearGradient"),fe.setAttributeNS(null,"id",h),fe.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),fe.setAttributeNS(null,"x1",ae[0]),fe.setAttributeNS(null,"y1",ae[1]),fe.setAttributeNS(null,"x2",Z[0]),fe.setAttributeNS(null,"y2",Z[1]);break;case"radial":const pe=o[4],Ie=o[5],Ue=o[6],Me=o[7];fe=this.svgFactory.createElement("svg:radialGradient"),fe.setAttributeNS(null,"id",h),fe.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),fe.setAttributeNS(null,"cx",Ie[0]),fe.setAttributeNS(null,"cy",Ie[1]),fe.setAttributeNS(null,"r",Me),fe.setAttributeNS(null,"fx",pe[0]),fe.setAttributeNS(null,"fy",pe[1]),fe.setAttributeNS(null,"fr",Ue);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const ae of Y){const Z=this.svgFactory.createElement("svg:stop");Z.setAttributeNS(null,"offset",ae[0]),Z.setAttributeNS(null,"stop-color",ae[1]),fe.append(Z)}return this.defs.append(fe),`url(#${h})`;case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,h){this.current.dashArray=o,this.current.dashPhase=h}constructPath(o,h){const Y=this.current;let fe=Y.x,ae=Y.y,Z=[],pe=0;for(const Ie of o)switch(Ie|0){case a.OPS.rectangle:fe=h[pe++],ae=h[pe++];const Ue=h[pe++],Me=h[pe++],Fe=fe+Ue,Pe=ae+Me;Z.push("M",c(fe),c(ae),"L",c(Fe),c(ae),"L",c(Fe),c(Pe),"L",c(fe),c(Pe),"Z");break;case a.OPS.moveTo:fe=h[pe++],ae=h[pe++],Z.push("M",c(fe),c(ae));break;case a.OPS.lineTo:fe=h[pe++],ae=h[pe++],Z.push("L",c(fe),c(ae));break;case a.OPS.curveTo:fe=h[pe+4],ae=h[pe+5],Z.push("C",c(h[pe]),c(h[pe+1]),c(h[pe+2]),c(h[pe+3]),c(fe),c(ae)),pe+=6;break;case a.OPS.curveTo2:Z.push("C",c(fe),c(ae),c(h[pe]),c(h[pe+1]),c(h[pe+2]),c(h[pe+3])),fe=h[pe+2],ae=h[pe+3],pe+=4;break;case a.OPS.curveTo3:fe=h[pe+2],ae=h[pe+3],Z.push("C",c(h[pe]),c(h[pe+1]),c(fe),c(ae),c(fe),c(ae)),pe+=4;break;case a.OPS.closePath:Z.push("Z");break}Z=Z.join(" "),Y.path&&o.length>0&&o[0]!==a.OPS.rectangle&&o[0]!==a.OPS.moveTo?Z=Y.path.getAttributeNS(null,"d")+Z:(Y.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Y.path)),Y.path.setAttributeNS(null,"d",Z),Y.path.setAttributeNS(null,"fill","none"),Y.element=Y.path,Y.setCurrentPoint(fe,ae)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const h=`clippath${ne++}`,Y=this.svgFactory.createElement("svg:clipPath");Y.setAttributeNS(null,"id",h),Y.setAttributeNS(null,"transform",g(this.transformMatrix));const fe=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?fe.setAttributeNS(null,"clip-rule","evenodd"):fe.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Y.append(fe),this.defs.append(Y),o.activeClipUrl){o.clipGroup=null;for(const ae of this.extraStack)ae.clipGroup=null;Y.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${h})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const h=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",h)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[h,Y]of o)switch(h){case"LW":this.setLineWidth(Y);break;case"LC":this.setLineCap(Y);break;case"LJ":this.setLineJoin(Y);break;case"ML":this.setMiterLimit(Y);break;case"D":this.setDash(Y[0],Y[1]);break;case"RI":this.setRenderingIntent(Y);break;case"FL":this.setFlatness(Y);break;case"Font":this.setFont(Y);break;case"CA":this.setStrokeAlpha(Y);break;case"ca":this.setFillAlpha(Y);break;default:(0,a.warn)(`Unimplemented graphic state operator ${h}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,h=1){const Y=this.current;let fe=Y.dashArray;h!==1&&fe.length>0&&(fe=fe.map(function(ae){return h*ae})),o.setAttributeNS(null,"stroke",Y.strokeColor),o.setAttributeNS(null,"stroke-opacity",Y.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",c(Y.miterLimit)),o.setAttributeNS(null,"stroke-linecap",Y.lineCap),o.setAttributeNS(null,"stroke-linejoin",Y.lineJoin),o.setAttributeNS(null,"stroke-width",c(h*Y.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",fe.map(c).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",c(h*Y.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const h=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!h){(0,a.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(h)}paintInlineImageXObject(o,h){const Y=o.width,fe=o.height,ae=se(o,this.forceDataSchema,!!h),Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x","0"),Z.setAttributeNS(null,"y","0"),Z.setAttributeNS(null,"width",c(Y)),Z.setAttributeNS(null,"height",c(fe)),this.current.element=Z,this.clip("nonzero");const pe=this.svgFactory.createElement("svg:image");pe.setAttributeNS(k,"xlink:href",ae),pe.setAttributeNS(null,"x","0"),pe.setAttributeNS(null,"y",c(-fe)),pe.setAttributeNS(null,"width",c(Y)+"px"),pe.setAttributeNS(null,"height",c(fe)+"px"),pe.setAttributeNS(null,"transform",`scale(${c(1/Y)} ${c(-1/fe)})`),h?h.append(pe):this._ensureTransformGroup().append(pe)}paintImageMaskXObject(o){const h=this.current,Y=o.width,fe=o.height,ae=h.fillColor;h.maskId=`mask${re++}`;const Z=this.svgFactory.createElement("svg:mask");Z.setAttributeNS(null,"id",h.maskId);const pe=this.svgFactory.createElement("svg:rect");pe.setAttributeNS(null,"x","0"),pe.setAttributeNS(null,"y","0"),pe.setAttributeNS(null,"width",c(Y)),pe.setAttributeNS(null,"height",c(fe)),pe.setAttributeNS(null,"fill",ae),pe.setAttributeNS(null,"mask",`url(#${h.maskId})`),this.defs.append(Z),this._ensureTransformGroup().append(pe),this.paintInlineImageXObject(o,Z)}paintFormXObjectBegin(o,h){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),h){const Y=h[2]-h[0],fe=h[3]-h[1],ae=this.svgFactory.createElement("svg:rect");ae.setAttributeNS(null,"x",h[0]),ae.setAttributeNS(null,"y",h[1]),ae.setAttributeNS(null,"width",c(Y)),ae.setAttributeNS(null,"height",c(fe)),this.current.element=ae,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const h=this.svgFactory.create(o.width,o.height),Y=this.svgFactory.createElement("svg:defs");h.append(Y),this.defs=Y;const fe=this.svgFactory.createElement("svg:g");return fe.setAttributeNS(null,"transform",g(o.transform)),h.append(fe),this.svg=fe,h}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",g(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNodeStream=void 0;var e=j(1),a=j(33);const oe=require$$5,he=require$$5,ie=require$$5,ee=require$$5,k=/^file:\/\/\/[a-zA-Z]:\//;function ue(re){const m=ee.parse(re);return m.protocol==="file:"||m.host?m:/^[a-z]:[/\\]/i.test(re)?ee.parse(`file:///${re}`):(m.host||(m.protocol="file:"),m)}class ye{constructor(m){this.source=m,this.url=ue(m.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&m.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var m;return((m=this._fullRequestReader)==null?void 0:m._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new g(this):new s(this),this._fullRequestReader}getRangeReader(m,o){if(o<=this._progressiveDataLength)return null;const h=this.isFsUrl?new ne(this,m,o):new c(this,m,o);return this._rangeRequestReaders.push(h),h}cancelAllRequests(m){this._fullRequestReader&&this._fullRequestReader.cancel(m);for(const o of this._rangeRequestReaders.slice(0))o.cancel(m)}}i.PDFNodeStream=ye;class le{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null;const o=m.source;this._contentLength=o.length,this._loaded=0,this._filename=null,this._disableRange=o.disableRange||!1,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)(),this._headersCapability=(0,e.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=(0,e.createPromiseCapability)(),this.read()):(this._loaded+=m.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",o=>{this._error(o)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class se{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)();const o=m.source;this._isStreamingSupported=!o.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=(0,e.createPromiseCapability)(),this.read()):(this._loaded+=m.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",o=>{this._error(o)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function _(re,m){return{protocol:re.protocol,auth:re.auth,host:re.hostname,port:re.port,path:re.path,method:"GET",headers:m}}class s extends le{constructor(m){super(m);const o=h=>{if(h.statusCode===404){const Z=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Z,this._headersCapability.reject(Z);return}this._headersCapability.resolve(),this._setReadableStream(h);const Y=Z=>this._readableStream.headers[Z.toLowerCase()],{allowRangeRequests:fe,suggestedLength:ae}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:Y,isHttp:m.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=fe,this._contentLength=ae||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(Y)};this._request=null,this._url.protocol==="http:"?this._request=he.request(_(this._url,m.httpHeaders),o):this._request=ie.request(_(this._url,m.httpHeaders),o),this._request.on("error",h=>{this._storedError=h,this._headersCapability.reject(h)}),this._request.end()}}class c extends se{constructor(m,o,h){super(m),this._httpHeaders={};for(const fe in m.httpHeaders){const ae=m.httpHeaders[fe];typeof ae>"u"||(this._httpHeaders[fe]=ae)}this._httpHeaders.Range=`bytes=${o}-${h-1}`;const Y=fe=>{if(fe.statusCode===404){const ae=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ae;return}this._setReadableStream(fe)};this._request=null,this._url.protocol==="http:"?this._request=he.request(_(this._url,this._httpHeaders),Y):this._request=ie.request(_(this._url,this._httpHeaders),Y),this._request.on("error",fe=>{this._storedError=fe}),this._request.end()}}class g extends le{constructor(m){super(m);let o=decodeURIComponent(this._url.path);k.test(this._url.href)&&(o=o.replace(/^\//,"")),oe.lstat(o,(h,Y)=>{if(h){h.code==="ENOENT"&&(h=new e.MissingPDFException(`Missing PDF "${o}".`)),this._storedError=h,this._headersCapability.reject(h);return}this._contentLength=Y.size,this._setReadableStream(oe.createReadStream(o)),this._headersCapability.resolve()})}}class ne extends se{constructor(m,o,h){super(m);let Y=decodeURIComponent(this._url.path);k.test(this._url.href)&&(Y=Y.replace(/^\//,"")),this._setReadableStream(oe.createReadStream(Y,{start:o,end:h-1}))}}},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createResponseStatusError=ee,i.extractFilenameFromHeader=ie,i.validateRangeRequestCapabilities=he,i.validateResponseStatus=k;var e=j(1),a=j(34),oe=j(8);function he({getResponseHeader:ue,isHttp:ye,rangeChunkSize:le,disableRange:se}){const _={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(ue("Content-Length"),10);return!Number.isInteger(s)||(_.suggestedLength=s,s<=2*le)||se||!ye||ue("Accept-Ranges")!=="bytes"||(ue("Content-Encoding")||"identity")!=="identity"||(_.allowRangeRequests=!0),_}function ie(ue){const ye=ue("Content-Disposition");if(ye){let le=(0,a.getFilenameFromContentDispositionHeader)(ye);if(le.includes("%"))try{le=decodeURIComponent(le)}catch{}if((0,oe.isPdfFile)(le))return le}return null}function ee(ue,ye){return ue===404||ue===0&&ye.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+ye+'".'):new e.UnexpectedResponseException(`Unexpected server response (${ue}) while retrieving PDF "${ye}".`,ue)}function k(ue){return ue===200||ue===206}},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getFilenameFromContentDispositionHeader=a;var e=j(1);function a(oe){let he=!0,ie=ee("filename\\*","i").exec(oe);if(ie){ie=ie[1];let s=le(ie);return s=unescape(s),s=se(s),s=_(s),ue(s)}if(ie=ye(oe),ie){const s=_(ie);return ue(s)}if(ie=ee("filename","i").exec(oe),ie){ie=ie[1];let s=le(ie);return s=_(s),ue(s)}function ee(s,c){return new RegExp("(?:^|;)\\s*"+s+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',c)}function k(s,c){if(s){if(!/^[\x00-\xFF]+$/.test(c))return c;try{const g=new TextDecoder(s,{fatal:!0}),ne=(0,e.stringToBytes)(c);c=g.decode(ne),he=!1}catch{}}return c}function ue(s){return he&&/[\x80-\xff]/.test(s)&&(s=k("utf-8",s),he&&(s=k("iso-8859-1",s))),s}function ye(s){const c=[];let g;const ne=ee("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=ne.exec(s))!==null;){let[,m,o,h]=g;if(m=parseInt(m,10),m in c){if(m===0)break;continue}c[m]=[o,h]}const re=[];for(let m=0;m<c.length&&m in c;++m){let[o,h]=c[m];h=le(h),o&&(h=unescape(h),m===0&&(h=se(h))),re.push(h)}return re.join("")}function le(s){if(s.startsWith('"')){const c=s.slice(1).split('\\"');for(let g=0;g<c.length;++g){const ne=c[g].indexOf('"');ne!==-1&&(c[g]=c[g].slice(0,ne),c.length=g+1),c[g]=c[g].replace(/\\(.)/g,"$1")}s=c.join('"')}return s}function se(s){const c=s.indexOf("'");if(c===-1)return s;const g=s.slice(0,c),re=s.slice(c+1).replace(/^[^']*'/,"");return k(g,re)}function _(s){return!s.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(s)?s:s.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(c,g,ne,re){if(ne==="q"||ne==="Q")return re=re.replace(/_/g," "),re=re.replace(/=([0-9a-fA-F]{2})/g,function(m,o){return String.fromCharCode(parseInt(o,16))}),k(g,re);try{re=atob(re)}catch{}return k(g,re)})}return""}},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNetworkStream=void 0;var e=j(1),a=j(33);const oe=200,he=206;function ie(le){const se=le.response;return typeof se!="string"?se:(0,e.stringToBytes)(se).buffer}class ee{constructor(se,_={}){this.url=se,this.isHttp=/^https?:/i.test(se),this.httpHeaders=this.isHttp&&_.httpHeaders||Object.create(null),this.withCredentials=_.withCredentials||!1,this.getXhr=_.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(se,_,s){const c={begin:se,end:_};for(const g in s)c[g]=s[g];return this.request(c)}requestFull(se){return this.request(se)}request(se){const _=this.getXhr(),s=this.currXhrId++,c=this.pendingRequests[s]={xhr:_};_.open("GET",this.url),_.withCredentials=this.withCredentials;for(const g in this.httpHeaders){const ne=this.httpHeaders[g];typeof ne>"u"||_.setRequestHeader(g,ne)}return this.isHttp&&"begin"in se&&"end"in se?(_.setRequestHeader("Range",`bytes=${se.begin}-${se.end-1}`),c.expectedStatus=he):c.expectedStatus=oe,_.responseType="arraybuffer",se.onError&&(_.onerror=function(g){se.onError(_.status)}),_.onreadystatechange=this.onStateChange.bind(this,s),_.onprogress=this.onProgress.bind(this,s),c.onHeadersReceived=se.onHeadersReceived,c.onDone=se.onDone,c.onError=se.onError,c.onProgress=se.onProgress,_.send(null),s}onProgress(se,_){var c;const s=this.pendingRequests[se];s&&((c=s.onProgress)==null||c.call(s,_))}onStateChange(se,_){var m,o,h;const s=this.pendingRequests[se];if(!s)return;const c=s.xhr;if(c.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),c.readyState!==4||!(se in this.pendingRequests))return;if(delete this.pendingRequests[se],c.status===0&&this.isHttp){(m=s.onError)==null||m.call(s,c.status);return}const g=c.status||oe;if(!(g===oe&&s.expectedStatus===he)&&g!==s.expectedStatus){(o=s.onError)==null||o.call(s,c.status);return}const re=ie(c);if(g===he){const Y=c.getResponseHeader("Content-Range"),fe=/bytes (\d+)-(\d+)\/(\d+)/.exec(Y);s.onDone({begin:parseInt(fe[1],10),chunk:re})}else re?s.onDone({begin:0,chunk:re}):(h=s.onError)==null||h.call(s,c.status)}getRequestXhr(se){return this.pendingRequests[se].xhr}isPendingRequest(se){return se in this.pendingRequests}abortRequest(se){const _=this.pendingRequests[se].xhr;delete this.pendingRequests[se],_.abort()}}class k{constructor(se){this._source=se,this._manager=new ee(se.url,{httpHeaders:se.httpHeaders,withCredentials:se.withCredentials}),this._rangeChunkSize=se.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(se){const _=this._rangeRequestReaders.indexOf(se);_>=0&&this._rangeRequestReaders.splice(_,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new ue(this._manager,this._source),this._fullRequestReader}getRangeReader(se,_){const s=new ye(this._manager,se,_);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(se){var _;(_=this._fullRequestReader)==null||_.cancel(se);for(const s of this._rangeRequestReaders.slice(0))s.cancel(se)}}i.PDFNetworkStream=k;class ue{constructor(se,_){this._manager=se;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=_.url,this._fullRequestId=se.requestFull(s),this._headersReceivedCapability=(0,e.createPromiseCapability)(),this._disableRange=_.disableRange||!1,this._contentLength=_.length,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const se=this._fullRequestId,_=this._manager.getRequestXhr(se),s=ne=>_.getResponseHeader(ne),{allowRangeRequests:c,suggestedLength:g}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});c&&(this._isRangeSupported=!0),this._contentLength=g||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(s),this._isRangeSupported&&this._manager.abortRequest(se),this._headersReceivedCapability.resolve()}_onDone(se){if(se&&(this._requests.length>0?this._requests.shift().resolve({value:se.chunk,done:!1}):this._cachedChunks.push(se.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(se){this._storedError=(0,a.createResponseStatusError)(se,this._url),this._headersReceivedCapability.reject(this._storedError);for(const _ of this._requests)_.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(se){var _;(_=this.onProgress)==null||_.call(this,{loaded:se.loaded,total:se.lengthComputable?se.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const se=(0,e.createPromiseCapability)();return this._requests.push(se),se.promise}cancel(se){this._done=!0,this._headersReceivedCapability.reject(se);for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ye{constructor(se,_,s){this._manager=se;const c={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=se.url,this._requestId=se.requestRange(_,s,c),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var se;(se=this.onClosed)==null||se.call(this,this)}_onDone(se){const _=se.chunk;this._requests.length>0?this._requests.shift().resolve({value:_,done:!1}):this._queuedChunk=_,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(se){this._storedError=(0,a.createResponseStatusError)(se,this._url);for(const _ of this._requests)_.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(se){var _;this.isStreamingSupported||(_=this.onProgress)==null||_.call(this,{loaded:se.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const _=this._queuedChunk;return this._queuedChunk=null,{value:_,done:!1}}if(this._done)return{value:void 0,done:!0};const se=(0,e.createPromiseCapability)();return this._requests.push(se),se.promise}cancel(se){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(d,i,j)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFFetchStream=void 0;var e=j(1),a=j(33);function oe(ue,ye,le){return{method:"GET",headers:ue,signal:le.signal,mode:"cors",credentials:ye?"include":"same-origin",redirect:"follow"}}function he(ue){const ye=new Headers;for(const le in ue){const se=ue[le];typeof se>"u"||ye.append(le,se)}return ye}class ie{constructor(ye){this.source=ye,this.isHttp=/^https?:/i.test(ye.url),this.httpHeaders=this.isHttp&&ye.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var ye;return((ye=this._fullRequestReader)==null?void 0:ye._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ee(this),this._fullRequestReader}getRangeReader(ye,le){if(le<=this._progressiveDataLength)return null;const se=new k(this,ye,le);return this._rangeRequestReaders.push(se),se}cancelAllRequests(ye){this._fullRequestReader&&this._fullRequestReader.cancel(ye);for(const le of this._rangeRequestReaders.slice(0))le.cancel(ye)}}i.PDFFetchStream=ie;class ee{constructor(ye){this._stream=ye,this._reader=null,this._loaded=0,this._filename=null;const le=ye.source;this._withCredentials=le.withCredentials||!1,this._contentLength=le.length,this._headersCapability=(0,e.createPromiseCapability)(),this._disableRange=le.disableRange||!1,this._rangeChunkSize=le.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!le.disableStream,this._isRangeSupported=!le.disableRange,this._headers=he(this._stream.httpHeaders);const se=le.url;fetch(se,oe(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,a.validateResponseStatus)(_.status))throw(0,a.createResponseStatusError)(_.status,se);this._reader=_.body.getReader(),this._headersCapability.resolve();const s=ne=>_.headers.get(ne),{allowRangeRequests:c,suggestedLength:g}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=g||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:ye,done:le}=await this._reader.read();return le?{value:ye,done:le}:(this._loaded+=ye.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(ye).buffer,done:!1})}cancel(ye){this._reader&&this._reader.cancel(ye),this._abortController.abort()}}class k{constructor(ye,le,se){this._stream=ye,this._reader=null,this._loaded=0;const _=ye.source;this._withCredentials=_.withCredentials||!1,this._readCapability=(0,e.createPromiseCapability)(),this._isStreamingSupported=!_.disableStream,this._abortController=new AbortController,this._headers=he(this._stream.httpHeaders),this._headers.append("Range",`bytes=${le}-${se-1}`);const s=_.url;fetch(s,oe(this._headers,this._withCredentials,this._abortController)).then(c=>{if(!(0,a.validateResponseStatus)(c.status))throw(0,a.createResponseStatusError)(c.status,s);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:ye,done:le}=await this._reader.read();return le?{value:ye,done:le}:(this._loaded+=ye.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(ye).buffer,done:!1})}cancel(ye){this._reader&&this._reader.cancel(ye),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(d){var i=__webpack_module_cache__[d];if(i!==void 0)return i.exports;var j=__webpack_module_cache__[d]={exports:{}};return __webpack_modules__[d](j,j.exports,__w_pdfjs_require__),j.exports}var __webpack_exports__={};return(()=>{var d=__webpack_exports__;Object.defineProperty(d,"__esModule",{value:!0}),Object.defineProperty(d,"AnnotationEditorLayer",{enumerable:!0,get:function(){return a.AnnotationEditorLayer}}),Object.defineProperty(d,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return i.AnnotationEditorParamsType}}),Object.defineProperty(d,"AnnotationEditorType",{enumerable:!0,get:function(){return i.AnnotationEditorType}}),Object.defineProperty(d,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return oe.AnnotationEditorUIManager}}),Object.defineProperty(d,"AnnotationLayer",{enumerable:!0,get:function(){return he.AnnotationLayer}}),Object.defineProperty(d,"AnnotationMode",{enumerable:!0,get:function(){return i.AnnotationMode}}),Object.defineProperty(d,"CMapCompressionType",{enumerable:!0,get:function(){return i.CMapCompressionType}}),Object.defineProperty(d,"GlobalWorkerOptions",{enumerable:!0,get:function(){return ie.GlobalWorkerOptions}}),Object.defineProperty(d,"InvalidPDFException",{enumerable:!0,get:function(){return i.InvalidPDFException}}),Object.defineProperty(d,"LoopbackPort",{enumerable:!0,get:function(){return j.LoopbackPort}}),Object.defineProperty(d,"MissingPDFException",{enumerable:!0,get:function(){return i.MissingPDFException}}),Object.defineProperty(d,"OPS",{enumerable:!0,get:function(){return i.OPS}}),Object.defineProperty(d,"PDFDataRangeTransport",{enumerable:!0,get:function(){return j.PDFDataRangeTransport}}),Object.defineProperty(d,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(d,"PDFWorker",{enumerable:!0,get:function(){return j.PDFWorker}}),Object.defineProperty(d,"PasswordResponses",{enumerable:!0,get:function(){return i.PasswordResponses}}),Object.defineProperty(d,"PermissionFlag",{enumerable:!0,get:function(){return i.PermissionFlag}}),Object.defineProperty(d,"PixelsPerInch",{enumerable:!0,get:function(){return e.PixelsPerInch}}),Object.defineProperty(d,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(d,"SVGGraphics",{enumerable:!0,get:function(){return ue.SVGGraphics}}),Object.defineProperty(d,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return i.UNSUPPORTED_FEATURES}}),Object.defineProperty(d,"UnexpectedResponseException",{enumerable:!0,get:function(){return i.UnexpectedResponseException}}),Object.defineProperty(d,"Util",{enumerable:!0,get:function(){return i.Util}}),Object.defineProperty(d,"VerbosityLevel",{enumerable:!0,get:function(){return i.VerbosityLevel}}),Object.defineProperty(d,"XfaLayer",{enumerable:!0,get:function(){return ye.XfaLayer}}),Object.defineProperty(d,"build",{enumerable:!0,get:function(){return j.build}}),Object.defineProperty(d,"createPromiseCapability",{enumerable:!0,get:function(){return i.createPromiseCapability}}),Object.defineProperty(d,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return i.createValidAbsoluteUrl}}),Object.defineProperty(d,"getDocument",{enumerable:!0,get:function(){return j.getDocument}}),Object.defineProperty(d,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(d,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(d,"getXfaPageViewport",{enumerable:!0,get:function(){return e.getXfaPageViewport}}),Object.defineProperty(d,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(d,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(d,"renderTextLayer",{enumerable:!0,get:function(){return k.renderTextLayer}}),Object.defineProperty(d,"shadow",{enumerable:!0,get:function(){return i.shadow}}),Object.defineProperty(d,"version",{enumerable:!0,get:function(){return j.version}});var i=__w_pdfjs_require__(1),j=__w_pdfjs_require__(4),e=__w_pdfjs_require__(8),a=__w_pdfjs_require__(22),oe=__w_pdfjs_require__(7),he=__w_pdfjs_require__(27),ie=__w_pdfjs_require__(15),ee=__w_pdfjs_require__(3),k=__w_pdfjs_require__(30),ue=__w_pdfjs_require__(31),ye=__w_pdfjs_require__(29);if(ee.isNodeJS){const{PDFNodeStream:le}=__w_pdfjs_require__(32);(0,j.setPDFNetworkStreamFactory)(se=>new le(se))}else{const{PDFNetworkStream:le}=__w_pdfjs_require__(35),{PDFFetchStream:se}=__w_pdfjs_require__(36);(0,j.setPDFNetworkStreamFactory)(_=>(0,e.isValidFetchUrl)(_.url)?new se(_):new le(_))}})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;function _extends(){return _extends=Object.assign?Object.assign.bind():function(d){for(var i=1;i<arguments.length;i++){var j=arguments[i];for(var e in j)Object.prototype.hasOwnProperty.call(j,e)&&(d[e]=j[e])}return d},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(d,i){if(d==null)return{};var j={},e=Object.keys(d),a,oe;for(oe=0;oe<e.length;oe++)a=e[oe],!(i.indexOf(a)>=0)&&(j[a]=d[a]);return j}function _objectWithoutProperties(d,i){if(d==null)return{};var j=_objectWithoutPropertiesLoose(d,i),e,a;if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(d);for(a=0;a<oe.length;a++)e=oe[a],!(i.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(d,e)&&(j[e]=d[e])}return j}function _typeof(d){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(d)}function _classCallCheck(d,i){if(!(d instanceof i))throw new TypeError("Cannot call a class as a function")}function _toPrimitive(d,i){if(_typeof(d)!=="object"||d===null)return d;var j=d[Symbol.toPrimitive];if(j!==void 0){var e=j.call(d,i||"default");if(_typeof(e)!=="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(d)}function _toPropertyKey(d){var i=_toPrimitive(d,"string");return _typeof(i)==="symbol"?i:String(i)}function _defineProperties(d,i){for(var j=0;j<i.length;j++){var e=i[j];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(d,_toPropertyKey(e.key),e)}}function _createClass(d,i,j){return i&&_defineProperties(d.prototype,i),j&&_defineProperties(d,j),Object.defineProperty(d,"prototype",{writable:!1}),d}function _assertThisInitialized(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function _setPrototypeOf(d,i){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,a){return e.__proto__=a,e},_setPrototypeOf(d,i)}function _inherits(d,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(i&&i.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),Object.defineProperty(d,"prototype",{writable:!1}),i&&_setPrototypeOf(d,i)}function _possibleConstructorReturn(d,i){if(i&&(_typeof(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(d)}function _getPrototypeOf(d){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(j){return j.__proto__||Object.getPrototypeOf(j)},_getPrototypeOf(d)}function _defineProperty(d,i,j){return i=_toPropertyKey(i),i in d?Object.defineProperty(d,i,{value:j,enumerable:!0,configurable:!0,writable:!0}):d[i]=j,d}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function d(e,a,oe,he,ie,ee){if(ee!==ReactPropTypesSecret){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}d.isRequired=d;function i(){return d}var j={array:d,bigint:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:i,element:d,elementType:d,instanceOf:i,node:d,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return j.PropTypes=j,j};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=globalThis&&globalThis.__spreadArray||function(d,i,j){if(j||arguments.length===2)for(var e=0,a=i.length,oe;e<a;e++)(oe||!(e in i))&&(oe||(oe=Array.prototype.slice.call(i,0,e)),oe[e]=i[e]);return d.concat(oe||Array.prototype.slice.call(i))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],focusEvents=["onFocus","onBlur"],formEvents=["onChange","onInput","onInvalid","onReset","onSubmit"],genericEvents=["onError","onLoad"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],uiEvents=["onScroll"],wheelEvents=["onWheel"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],imageEvents=["onLoad","onError"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),keyboardEvents,!0),focusEvents,!0),formEvents,!0),genericEvents,!0),mouseEvents,!0),pointerEvents,!0),selectionEvents,!0),touchEvents,!0),uiEvents,!0),wheelEvents,!0),mediaEvents,!0),imageEvents,!0),animationEvents,!0),transitionEvents,!0),otherEvents,!0);function makeEventProps(d,i){var j={};return allEvents.forEach(function(e){var a=d[e];if(a){if(!i){j[e]=a;return}j[e]=function(oe){return a(oe,i(e))}}}),j}function makeCancellablePromise(d){var i=!1,j=new Promise(function(e,a){d.then(function(oe){return!i&&e(oe)}).catch(function(oe){return!i&&a(oe)})});return{promise:j,cancel:function(){i=!0}}}function r(d){var i,j,e="";if(typeof d=="string"||typeof d=="number")e+=d;else if(typeof d=="object")if(Array.isArray(d))for(i=0;i<d.length;i++)d[i]&&(j=r(d[i]))&&(e&&(e+=" "),e+=j);else for(i in d)d[i]&&(e&&(e+=" "),e+=i);return e}function clsx(){for(var d,i,j=0,e="";j<arguments.length;)(d=arguments[j++])&&(i=r(d))&&(e&&(e+=" "),e+=i);return e}var isProduction$1=!0,prefix="Invariant failed";function invariant(d,i){if(!d){if(isProduction$1)throw new Error(prefix);var j=typeof i=="function"?i():i,e=j?"".concat(prefix,": ").concat(j):prefix;throw new Error(e)}}var isProduction=!0;function warning(d,i){if(!isProduction){if(d)return;var j="Warning: "+i;typeof console<"u"&&console.warn(j);try{throw Error(j)}catch{}}}const DocumentContext=reactExports.createContext(null);function Message(d){var i=d.children,j=d.type;return React.createElement("div",{className:"react-pdf__message react-pdf__message--".concat(j)},i)}Message.propTypes={children:PropTypes.node,type:PropTypes.oneOf(["error","loading","no-data"]).isRequired};var DEFAULT_LINK_REL="noopener noreferrer nofollow",LinkService=function(){function d(){_classCallCheck(this,d),this.externalLinkTarget=null,this.externalLinkRel=null}return _createClass(d,[{key:"setDocument",value:function(j){this.pdfDocument=j}},{key:"setViewer",value:function(j){this.pdfViewer=j}},{key:"setExternalLinkRel",value:function(j){this.externalLinkRel=j}},{key:"setExternalLinkTarget",value:function(j){this.externalLinkTarget=j}},{key:"setHistory",value:function(){}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(j){this.pdfViewer.currentPageNumber=j}},{key:"rotation",get:function(){return 0},set:function(j){}},{key:"goToDestination",value:function(j){var e=this;new Promise(function(a){typeof j=="string"?e.pdfDocument.getDestination(j).then(a):Array.isArray(j)?a(j):j.then(a)}).then(function(a){invariant(Array.isArray(a),'"'.concat(a,'" is not a valid destination array.'));var oe=a[0];new Promise(function(he){oe instanceof Object?e.pdfDocument.getPageIndex(oe).then(function(ie){he(ie)}).catch(function(){invariant(!1,'"'.concat(oe,'" is not a valid page reference.'))}):typeof oe=="number"?he(oe):invariant(!1,'"'.concat(oe,'" is not a valid destination reference.'))}).then(function(he){var ie=he+1;invariant(ie>=1&&ie<=e.pagesCount,'"'.concat(ie,'" is not a valid page number.')),e.pdfViewer.scrollPageIntoView({dest:j,pageIndex:he,pageNumber:ie})})})}},{key:"navigateTo",value:function(j){this.goToDestination(j)}},{key:"goToPage",value:function(){}},{key:"addLinkAttributes",value:function(j,e,a){j.href=e,j.rel=this.externalLinkRel||DEFAULT_LINK_REL,j.target=a?"_blank":this.externalLinkTarget||""}},{key:"getDestinationHash",value:function(){return"#"}},{key:"getAnchorUrl",value:function(){return"#"}},{key:"setHash",value:function(){}},{key:"executeNamedAction",value:function(){}},{key:"cachePageRef",value:function(){}},{key:"isPageVisible",value:function(){return!0}},{key:"isPageCached",value:function(){return!0}}]),d}(),PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function _arrayWithHoles(d){if(Array.isArray(d))return d}function _iterableToArrayLimit(d,i){var j=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(j!=null){var e,a,oe,he,ie=[],ee=!0,k=!1;try{if(oe=(j=j.call(d)).next,i===0){if(Object(j)!==j)return;ee=!1}else for(;!(ee=(e=oe.call(j)).done)&&(ie.push(e.value),ie.length!==i);ee=!0);}catch(ue){k=!0,a=ue}finally{try{if(!ee&&j.return!=null&&(he=j.return(),Object(he)!==he))return}finally{if(k)throw a}}return ie}}function _arrayLikeToArray(d,i){(i==null||i>d.length)&&(i=d.length);for(var j=0,e=new Array(i);j<i;j++)e[j]=d[j];return e}function _unsupportedIterableToArray(d,i){if(d){if(typeof d=="string")return _arrayLikeToArray(d,i);var j=Object.prototype.toString.call(d).slice(8,-1);if(j==="Object"&&d.constructor&&(j=d.constructor.name),j==="Map"||j==="Set")return Array.from(d);if(j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return _arrayLikeToArray(d,i)}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(d,i){return _arrayWithHoles(d)||_iterableToArrayLimit(d,i)||_unsupportedIterableToArray(d,i)||_nonIterableRest()}var isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(d){return typeof d<"u"}function isProvided(d){return isDefined(d)&&d!==null}function isString(d){return typeof d=="string"}function isArrayBuffer(d){return d instanceof ArrayBuffer}function isBlob(d){return invariant(isBrowser,"isBlob can only be used in a browser environment"),d instanceof Blob}function isFile$1(d){return invariant(isBrowser,"isFile can only be used in a browser environment"),d instanceof File}function isDataURI(d){return isString(d)&&/^data:/.test(d)}function dataURItoByteString(d){invariant(isDataURI(d),"Invalid data URI.");var i=d.split(","),j=_slicedToArray(i,2),e=j[0],a=j[1],oe=e.split(";");return oe.indexOf("base64")!==-1?atob(a):unescape(a)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}var allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(allowFileAccessFromFilesTip))}function displayWorkerWarning(){warning(!isLocalFileSystem,"Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ".concat(allowFileAccessFromFilesTip))}function cancelRunningTask(d){d&&d.cancel&&d.cancel()}function makePageCallback(d,i){return Object.defineProperty(d,"width",{get:function(){return this.view[2]*i},configurable:!0}),Object.defineProperty(d,"height",{get:function(){return this.view[3]*i},configurable:!0}),Object.defineProperty(d,"originalWidth",{get:function(){return this.view[2]},configurable:!0}),Object.defineProperty(d,"originalHeight",{get:function(){return this.view[3]},configurable:!0}),d}function isCancelException(d){return d.name==="RenderingCancelledException"}function loadFromFile(d){return new Promise(function(i,j){var e=new FileReader;return e.onload=function(){return i(new Uint8Array(e.result))},e.onerror=function(a){switch(a.target.error.code){case a.target.error.NOT_FOUND_ERR:return j(new Error("Error while reading a file: File not found."));case a.target.error.NOT_READABLE_ERR:return j(new Error("Error while reading a file: File not readable."));case a.target.error.SECURITY_ERR:return j(new Error("Error while reading a file: Security error."));case a.target.error.ABORT_ERR:return j(new Error("Error while reading a file: Aborted."));default:return j(new Error("Error while reading a file."))}},e.readAsArrayBuffer(d),null})}function _arrayWithoutHoles(d){if(Array.isArray(d))return _arrayLikeToArray(d)}function _iterableToArray(d){if(typeof Symbol<"u"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray(d){return _arrayWithoutHoles(d)||_iterableToArray(d)||_unsupportedIterableToArray(d)||_nonIterableSpread()}var eventProps=function(){var d={};return[].concat(_toConsumableArray(mouseEvents),_toConsumableArray(touchEvents),_toConsumableArray(keyboardEvents)).forEach(function(i){d[i]=PropTypes.func}),d}(),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),httpHeaders:PropTypes.object,range:PropTypes.object,url:PropTypes.string,withCredentials:PropTypes.bool})];typeof File<"u"&&fileTypes.push(PropTypes.instanceOf(File));typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));var isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes),isLinkService=PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);var isPage=PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired}),isPageIndex=function d(i,j,e){var a=i[j],oe=i.pageNumber,he=i.pdf;if(!isDefined(he))return null;if(isDefined(a)){if(typeof a!="number")return new Error("`".concat(j,"` of type `").concat(_typeof(a),"` supplied to `").concat(e,"`, expected `number`."));if(a<0)return new Error("Expected `".concat(j,"` to be greater or equal to 0."));var ie=he.numPages;if(a+1>ie)return new Error("Expected `".concat(j,"` to be less or equal to ").concat(ie-1,"."))}else if(!isDefined(oe))return new Error("`".concat(j,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(e,"`."));return null},isPageNumber=function d(i,j,e){var a=i[j],oe=i.pageIndex,he=i.pdf;if(!isDefined(he))return null;if(isDefined(a)){if(typeof a!="number")return new Error("`".concat(j,"` of type `").concat(_typeof(a),"` supplied to `").concat(e,"`, expected `number`."));if(a<1)return new Error("Expected `".concat(j,"` to be greater or equal to 1."));var ie=he.numPages;if(a>ie)return new Error("Expected `".concat(j,"` to be less or equal to ").concat(ie,"."))}else if(!isDefined(oe))return new Error("`".concat(j,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(e,"`."));return null},isPdf=PropTypes.oneOfType([PropTypes.shape({getDestination:PropTypes.func.isRequired,getOutline:PropTypes.func.isRequired,getPage:PropTypes.func.isRequired,numPages:PropTypes.number.isRequired}),PropTypes.bool]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.shape({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]),_excluded=["url"];function ownKeys$3(d,i){var j=Object.keys(d);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(d);i&&(e=e.filter(function(a){return Object.getOwnPropertyDescriptor(d,a).enumerable})),j.push.apply(j,e)}return j}function _objectSpread$3(d){for(var i=1;i<arguments.length;i++){var j=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$3(Object(j),!0).forEach(function(e){_defineProperty(d,e,j[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(j)):ownKeys$3(Object(j)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(j,e))})}return d}function _createSuper$5(d){var i=_isNativeReflectConstruct$5();return function(){var e=_getPrototypeOf(d),a;if(i){var oe=_getPrototypeOf(this).constructor;a=Reflect.construct(e,arguments,oe)}else a=e.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PDFDataRangeTransport=pdfExports.PDFDataRangeTransport,Document=function(d){_inherits(j,d);var i=_createSuper$5(j);function j(){var e;_classCallCheck(this,j);for(var a=arguments.length,oe=new Array(a),he=0;he<a;he++)oe[he]=arguments[he];return e=i.call.apply(i,[this].concat(oe)),_defineProperty(_assertThisInitialized(e),"state",{pdf:null}),_defineProperty(_assertThisInitialized(e),"viewer",{scrollPageIntoView:function(ee){var k=ee.dest,ue=ee.pageIndex,ye=ee.pageNumber,le=e.props.onItemClick;if(le){le({dest:k,pageIndex:ue,pageNumber:ye});return}var se=e.pages[ue];if(se){se.scrollIntoView();return}warning(!1,"An internal link leading to page ".concat(ye," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}}),_defineProperty(_assertThisInitialized(e),"linkService",new LinkService),_defineProperty(_assertThisInitialized(e),"loadDocument",function(){cancelRunningTask(e.runningTask),e.loadingTask&&e.loadingTask.destroy();var ie=makeCancellablePromise(e.findDocumentSource());e.runningTask=ie,ie.promise.then(function(ee){if(e.onSourceSuccess(),!!ee){e.setState(function(_){return _.pdf?{pdf:null}:null});var k=e.props,ue=k.options,ye=k.onLoadProgress,le=k.onPassword,se=pdfExports.getDocument(_objectSpread$3(_objectSpread$3({},ee),ue));se.onPassword=le,ye&&(se.onProgress=ye),e.loadingTask=se,se.promise.then(function(_){e.setState(function(s){return s.pdf&&s.pdf.fingerprint===_.fingerprint?null:{pdf:_}},e.onLoadSuccess)}).catch(function(_){e.onLoadError(_)})}}).catch(function(ee){e.onSourceError(ee)})}),_defineProperty(_assertThisInitialized(e),"setupLinkService",function(){var ie=e.props,ee=ie.externalLinkRel,k=ie.externalLinkTarget;e.linkService.setViewer(e.viewer),e.linkService.setExternalLinkRel(ee),e.linkService.setExternalLinkTarget(k)}),_defineProperty(_assertThisInitialized(e),"onSourceSuccess",function(){var ie=e.props.onSourceSuccess;ie&&ie()}),_defineProperty(_assertThisInitialized(e),"onSourceError",function(ie){warning(ie);var ee=e.props.onSourceError;ee&&ee(ie)}),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var ie=e.props.onLoadSuccess,ee=e.state.pdf;ie&&ie(ee),e.pages=new Array(ee.numPages),e.linkService.setDocument(ee)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(ie){e.setState({pdf:!1}),warning(ie);var ee=e.props.onLoadError;ee&&ee(ie)}),_defineProperty(_assertThisInitialized(e),"findDocumentSource",function(){return new Promise(function(ie){var ee=e.props.file;if(ee||ie(null),typeof ee=="string"){if(isDataURI(ee)){var k=dataURItoByteString(ee);ie({data:k})}displayCORSWarning(),ie({url:ee})}if(ee instanceof PDFDataRangeTransport&&ie({range:ee}),isArrayBuffer(ee)&&ie({data:ee}),isBrowser&&(isBlob(ee)||isFile$1(ee))){loadFromFile(ee).then(function(se){ie({data:se})});return}if(invariant(_typeof(ee)==="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(ee.url||ee.data||ee.range,"Invalid parameter object: need either .data, .range or .url"),typeof ee.url=="string"){if(isDataURI(ee.url)){var ue=ee.url,ye=_objectWithoutProperties(ee,_excluded),le=dataURItoByteString(ue);ie(_objectSpread$3({data:le},ye))}displayCORSWarning()}ie(ee)})}),_defineProperty(_assertThisInitialized(e),"registerPage",function(ie,ee){e.pages[ie]=ee}),_defineProperty(_assertThisInitialized(e),"unregisterPage",function(ie){delete e.pages[ie]}),e}return _createClass(j,[{key:"componentDidMount",value:function(){this.loadDocument(),this.setupLinkService()}},{key:"componentDidUpdate",value:function(a){var oe=this.props.file;oe!==a.file&&this.loadDocument()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask),this.loadingTask&&this.loadingTask.destroy()}},{key:"childContext",get:function(){var a=this.linkService,oe=this.registerPage,he=this.unregisterPage,ie=this.props,ee=ie.imageResourcesPath,k=ie.renderMode,ue=ie.rotate,ye=this.state.pdf;return{imageResourcesPath:ee,linkService:a,pdf:ye,registerPage:oe,renderMode:k,rotate:ue,unregisterPage:he}}},{key:"eventProps",get:function(){var a=this;return makeEventProps(this.props,function(){return a.state.pdf})}},{key:"renderChildren",value:function(){var a=this.props.children;return React.createElement(DocumentContext.Provider,{value:this.childContext},a)}},{key:"renderContent",value:function(){var a=this.props.file,oe=this.state.pdf;if(!a){var he=this.props.noData;return React.createElement(Message,{type:"no-data"},typeof he=="function"?he():he)}if(oe===null){var ie=this.props.loading;return React.createElement(Message,{type:"loading"},typeof ie=="function"?ie():ie)}if(oe===!1){var ee=this.props.error;return React.createElement(Message,{type:"error"},typeof ee=="function"?ee():ee)}return this.renderChildren()}},{key:"render",value:function(){var a=this.props,oe=a.className,he=a.inputRef;return React.createElement("div",_extends({className:clsx("react-pdf__Document",oe),ref:he},this.eventProps),this.renderContent())}}]),j}(reactExports.PureComponent);Document.defaultProps={error:"Failed to load PDF file.",loading:"Loading PDF…",noData:"No PDF file specified.",onPassword:function d(i,j){switch(j){case PasswordResponses.NEED_PASSWORD:{var e=prompt("Enter the password to open this PDF file.");i(e);break}case PasswordResponses.INCORRECT_PASSWORD:{var a=prompt("Invalid password. Please try again.");i(a);break}}}};var isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=_objectSpread$3(_objectSpread$3({},eventProps),{},{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.string,file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,rotate:PropTypes.number});var isDestination=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.any)]);PropTypes.shape({dest:isDestination,items:PropTypes.arrayOf(PropTypes.shape({dest:isDestination,title:PropTypes.string})),title:PropTypes.string}).isRequired,PropTypes.func,isPdf.isRequired;function ownKeys$2(d,i){var j=Object.keys(d);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(d);i&&(e=e.filter(function(a){return Object.getOwnPropertyDescriptor(d,a).enumerable})),j.push.apply(j,e)}return j}function _objectSpread$2(d){for(var i=1;i<arguments.length;i++){var j=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$2(Object(j),!0).forEach(function(e){_defineProperty(d,e,j[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(j)):ownKeys$2(Object(j)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(j,e))})}return d}_objectSpread$2({className:isClassName,inputRef:isRef,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,pdf:isPdf},eventProps);function mergeRefs(){for(var d=[],i=0;i<arguments.length;i++)d[i]=arguments[i];var j=d.filter(Boolean);if(j.length<=1){var e=j[0];return e||null}return function(oe){j.forEach(function(he){typeof he=="function"?he(oe):he&&(he.current=oe)})}}const PageContext=reactExports.createContext(null);function _createSuper$4(d){var i=_isNativeReflectConstruct$4();return function(){var e=_getPrototypeOf(d),a;if(i){var oe=_getPrototypeOf(this).constructor;a=Reflect.construct(e,arguments,oe)}else a=e.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ANNOTATION_MODE=pdfExports.AnnotationMode,PageCanvasInternal=function(d){_inherits(j,d);var i=_createSuper$4(j);function j(){var e;_classCallCheck(this,j);for(var a=arguments.length,oe=new Array(a),he=0;he<a;he++)oe[he]=arguments[he];return e=i.call.apply(i,[this].concat(oe)),_defineProperty(_assertThisInitialized(e),"canvasElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){e.renderer=null;var ie=e.props,ee=ie.onRenderSuccess,k=ie.page,ue=ie.scale;ee&&ee(makePageCallback(k,ue))}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(ie){if(!isCancelException(ie)){warning(ie);var ee=e.props.onRenderError;ee&&ee(ie)}}),_defineProperty(_assertThisInitialized(e),"drawPageOnCanvas",function(){var ie=e.canvasElement.current;if(!ie)return null;var ee=_assertThisInitialized(e),k=ee.renderViewport,ue=ee.viewport,ye=e.props,le=ye.canvasBackground,se=ye.page,_=ye.renderForms;ie.width=k.width,ie.height=k.height,ie.style.width="".concat(Math.floor(ue.width),"px"),ie.style.height="".concat(Math.floor(ue.height),"px");var s={annotationMode:_?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,get canvasContext(){return ie.getContext("2d",{alpha:!1})},viewport:k};le&&(s.background=le),e.cancelRenderingTask();var c=se.render(s);return e.renderer=c,c.promise.then(e.onRenderSuccess).catch(e.onRenderError)}),e}return _createClass(j,[{key:"componentDidMount",value:function(){this.drawPageOnCanvas()}},{key:"componentDidUpdate",value:function(a){var oe=this.props,he=oe.canvasBackground,ie=oe.devicePixelRatio,ee=oe.page,k=oe.renderForms;(he!==a.canvasBackground||ie!==a.devicePixelRatio||k!==a.renderForms)&&(ee.cleanup(),this.drawPageOnCanvas())}},{key:"componentWillUnmount",value:function(){this.cancelRenderingTask();var a=this.canvasElement.current;a&&(a.width=0,a.height=0)}},{key:"cancelRenderingTask",value:function(){this.renderer&&(this.renderer.cancel(),this.renderer=null)}},{key:"devicePixelRatio",get:function(){var a=this.props.devicePixelRatio;return a||getDevicePixelRatio()}},{key:"renderViewport",get:function(){var a=this.devicePixelRatio,oe=this.props,he=oe.page,ie=oe.rotate,ee=oe.scale;return he.getViewport({scale:ee*a,rotation:ie})}},{key:"viewport",get:function(){var a=this.props,oe=a.page,he=a.rotate,ie=a.scale;return oe.getViewport({scale:ie,rotation:he})}},{key:"render",value:function(){var a=this.props.canvasRef;return React.createElement("canvas",{className:"react-pdf__Page__canvas",dir:"ltr",ref:mergeRefs(a,this.canvasElement),style:{display:"block",userSelect:"none"}})}}]),j}(reactExports.PureComponent);PageCanvasInternal.propTypes={canvasBackground:PropTypes.string,canvasRef:isRef,devicePixelRatio:PropTypes.number,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,page:isPage.isRequired,renderForms:PropTypes.bool,rotate:isRotate,scale:PropTypes.number.isRequired};function PageCanvas(d){return React.createElement(PageContext.Consumer,null,function(i){return React.createElement(PageCanvasInternal,_extends({},i,d))})}function _createSuper$3(d){var i=_isNativeReflectConstruct$3();return function(){var e=_getPrototypeOf(d),a;if(i){var oe=_getPrototypeOf(this).constructor;a=Reflect.construct(e,arguments,oe)}else a=e.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PageSVGInternal=function(d){_inherits(j,d);var i=_createSuper$3(j);function j(){var e;_classCallCheck(this,j);for(var a=arguments.length,oe=new Array(a),he=0;he<a;he++)oe[he]=arguments[he];return e=i.call.apply(i,[this].concat(oe)),_defineProperty(_assertThisInitialized(e),"state",{svg:null}),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){e.renderer=null;var ie=e.props,ee=ie.onRenderSuccess,k=ie.page,ue=ie.scale;ee&&ee(makePageCallback(k,ue))}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(ie){if(!isCancelException(ie)){warning(ie);var ee=e.props.onRenderError;ee&&ee(ie)}}),_defineProperty(_assertThisInitialized(e),"renderSVG",function(){var ie=e.props.page;return e.renderer=ie.getOperatorList(),e.renderer.then(function(ee){var k=new pdfExports.SVGGraphics(ie.commonObjs,ie.objs);e.renderer=k.getSVG(ee,e.viewport).then(function(ue){e.setState({svg:ue},e.onRenderSuccess)}).catch(e.onRenderError)}).catch(e.onRenderError)}),_defineProperty(_assertThisInitialized(e),"drawPageOnContainer",function(ie){var ee=e.state.svg;if(!(!ie||!ee)){ie.firstElementChild||ie.appendChild(ee);var k=e.viewport,ue=k.width,ye=k.height;ee.setAttribute("width",ue),ee.setAttribute("height",ye)}}),e}return _createClass(j,[{key:"componentDidMount",value:function(){this.renderSVG()}},{key:"viewport",get:function(){var a=this.props,oe=a.page,he=a.rotate,ie=a.scale;return oe.getViewport({scale:ie,rotation:he})}},{key:"render",value:function(){var a=this,oe=this.viewport,he=oe.width,ie=oe.height;return React.createElement("div",{className:"react-pdf__Page__svg",ref:function(k){return a.drawPageOnContainer(k)},style:{display:"block",backgroundColor:"white",overflow:"hidden",width:he,height:ie,userSelect:"none"}})}}]),j}(reactExports.PureComponent);PageSVGInternal.propTypes={onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,page:isPage.isRequired,rotate:isRotate,scale:PropTypes.number.isRequired};function PageSVG(d){return React.createElement(PageContext.Consumer,null,function(i){return React.createElement(PageSVGInternal,_extends({},i,d))})}function ownKeys$1(d,i){var j=Object.keys(d);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(d);i&&(e=e.filter(function(a){return Object.getOwnPropertyDescriptor(d,a).enumerable})),j.push.apply(j,e)}return j}function _objectSpread$1(d){for(var i=1;i<arguments.length;i++){var j=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$1(Object(j),!0).forEach(function(e){_defineProperty(d,e,j[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(j)):ownKeys$1(Object(j)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(j,e))})}return d}function _createSuper$2(d){var i=_isNativeReflectConstruct$2();return function(){var e=_getPrototypeOf(d),a;if(i){var oe=_getPrototypeOf(this).constructor;a=Reflect.construct(e,arguments,oe)}else a=e.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var TextLayerInternal=function(d){_inherits(j,d);var i=_createSuper$2(j);function j(){var e;_classCallCheck(this,j);for(var a=arguments.length,oe=new Array(a),he=0;he<a;he++)oe[he]=arguments[he];return e=i.call.apply(i,[this].concat(oe)),_defineProperty(_assertThisInitialized(e),"state",{textContent:null}),_defineProperty(_assertThisInitialized(e),"layerElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"endElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"loadTextContent",function(){var ie=e.props.page,ee=makeCancellablePromise(ie.getTextContent());e.runningTask=ee,ee.promise.then(function(k){e.setState({textContent:k},e.onLoadSuccess)}).catch(function(k){e.onLoadError(k)})}),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var ie=e.props.onGetTextSuccess,ee=e.state.textContent;ie&&ie(ee)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(ie){e.setState({textItems:!1}),warning(ie);var ee=e.props.onGetTextError;ee&&ee(ie)}),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){var ie=e.props.onRenderTextLayerSuccess;ie&&ie()}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(ie){warning(ie);var ee=e.props.onRenderTextLayerError;ee&&ee(ie)}),_defineProperty(_assertThisInitialized(e),"onMouseDown",function(){var ie=e.endElement.current;ie&&ie.classList.add("active")}),_defineProperty(_assertThisInitialized(e),"onMouseUp",function(){var ie=e.endElement.current;ie&&ie.classList.remove("active")}),e}return _createClass(j,[{key:"componentDidMount",value:function(){var a=this.props.page;invariant(a,"Attempted to load page text content, but no page was specified."),warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),this.loadTextContent()}},{key:"componentDidUpdate",value:function(a){var oe=this.props.page;a.page&&oe!==a.page&&this.loadTextContent()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"viewport",get:function(){var a=this.props,oe=a.page,he=a.rotate,ie=a.scale;return oe.getViewport({scale:ie,rotation:he})}},{key:"unrotatedViewport",get:function(){var a=this.props,oe=a.page,he=a.scale;return oe.getViewport({scale:he})}},{key:"rotate",get:function(){var a=this.props,oe=a.page,he=a.rotate;return he-oe.rotate}},{key:"renderTextLayer",value:function(){var a=this,oe=this.state.textContent;if(!oe)return null;var he=this.layerElement.current,ie=this.viewport,ee=this.props,k=ee.customTextRenderer,ue=ee.pageIndex,ye=ee.pageNumber;cancelRunningTask(this.runningTask),he.innerHTML="";var le={container:he,textContent:oe,viewport:ie},se=pdfExports.renderTextLayer(le);this.runningTask=se,se.promise.then(function(){var _=document.createElement("div");if(_.className="endOfContent",he.append(_),a.endElement.current=_,k){var s=0;oe.items.forEach(function(c,g){var ne=a.layerElement.current.children[s],re=k(_objectSpread$1({pageIndex:ue,pageNumber:ye,itemIndex:g},c));ne.innerHTML=re,s+=c.str&&c.hasEOL?2:1})}a.onRenderSuccess()}).catch(function(_){a.onRenderError(_)})}},{key:"render",value:function(){return React.createElement("div",{className:"react-pdf__Page__textContent textLayer",onMouseUp:this.onMouseUp,onMouseDown:this.onMouseDown,ref:this.layerElement},this.renderTextLayer())}}]),j}(reactExports.PureComponent);TextLayerInternal.propTypes={customTextRenderer:PropTypes.func,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,page:isPage.isRequired,pageIndex:PropTypes.number.isRequired,pageNumber:PropTypes.number.isRequired,rotate:isRotate,scale:PropTypes.number};function TextLayer(d){return React.createElement(PageContext.Consumer,null,function(i){return React.createElement(TextLayerInternal,_extends({},i,d))})}function _createSuper$1(d){var i=_isNativeReflectConstruct$1();return function(){var e=_getPrototypeOf(d),a;if(i){var oe=_getPrototypeOf(this).constructor;a=Reflect.construct(e,arguments,oe)}else a=e.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var AnnotationLayerInternal=function(d){_inherits(j,d);var i=_createSuper$1(j);function j(){var e;_classCallCheck(this,j);for(var a=arguments.length,oe=new Array(a),he=0;he<a;he++)oe[he]=arguments[he];return e=i.call.apply(i,[this].concat(oe)),_defineProperty(_assertThisInitialized(e),"state",{annotations:null}),_defineProperty(_assertThisInitialized(e),"layerElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"loadAnnotations",function(){var ie=e.props.page,ee=makeCancellablePromise(ie.getAnnotations());e.runningTask=ee,ee.promise.then(function(k){e.setState({annotations:k},e.onLoadSuccess)}).catch(function(k){e.onLoadError(k)})}),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var ie=e.props.onGetAnnotationsSuccess,ee=e.state.annotations;ie&&ie(ee)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(ie){e.setState({annotations:!1}),warning(ie);var ee=e.props.onGetAnnotationsError;ee&&ee(ie)}),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){var ie=e.props.onRenderAnnotationLayerSuccess;ie&&ie()}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(ie){warning(ie);var ee=e.props.onRenderAnnotationLayerError;ee&&ee(ie)}),e}return _createClass(j,[{key:"componentDidMount",value:function(){var a=this.props.page;invariant(a,"Attempted to load page annotations, but no page was specified."),warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),this.loadAnnotations()}},{key:"componentDidUpdate",value:function(a){var oe=this.props,he=oe.page,ie=oe.renderForms;(a.page&&he!==a.page||ie!==a.renderForms)&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"viewport",get:function(){var a=this.props,oe=a.page,he=a.rotate,ie=a.scale;return oe.getViewport({scale:ie,rotation:he})}},{key:"renderAnnotationLayer",value:function(){var a=this.state.annotations;if(a){var oe=this.props,he=oe.imageResourcesPath,ie=oe.linkService,ee=oe.page,k=oe.renderForms,ue=this.viewport.clone({dontFlip:!0}),ye={annotations:a,div:this.layerElement.current,imageResourcesPath:he,linkService:ie,page:ee,renderForms:k,viewport:ue};this.layerElement.current.innerHTML="";try{pdfExports.AnnotationLayer.render(ye),this.onRenderSuccess()}catch(le){this.onRenderError(le)}}}},{key:"render",value:function(){return React.createElement("div",{className:"react-pdf__Page__annotations annotationLayer",ref:this.layerElement},this.renderAnnotationLayer())}}]),j}(reactExports.PureComponent);AnnotationLayerInternal.propTypes={imageResourcesPath:PropTypes.string,linkService:isLinkService.isRequired,onGetAnnotationsError:PropTypes.func,onGetAnnotationsSuccess:PropTypes.func,onRenderAnnotationLayerError:PropTypes.func,onRenderAnnotationLayerSuccess:PropTypes.func,page:isPage,renderForms:PropTypes.bool,rotate:isRotate,scale:PropTypes.number};var AnnotationLayer=function d(i){return React.createElement(DocumentContext.Consumer,null,function(j){return React.createElement(PageContext.Consumer,null,function(e){return React.createElement(AnnotationLayerInternal,_extends({},j,e,i))})})};function ownKeys(d,i){var j=Object.keys(d);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(d);i&&(e=e.filter(function(a){return Object.getOwnPropertyDescriptor(d,a).enumerable})),j.push.apply(j,e)}return j}function _objectSpread(d){for(var i=1;i<arguments.length;i++){var j=arguments[i]!=null?arguments[i]:{};i%2?ownKeys(Object(j),!0).forEach(function(e){_defineProperty(d,e,j[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(j)):ownKeys(Object(j)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(j,e))})}return d}function _createSuper(d){var i=_isNativeReflectConstruct();return function(){var e=_getPrototypeOf(d),a;if(i){var oe=_getPrototypeOf(this).constructor;a=Reflect.construct(e,arguments,oe)}else a=e.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var defaultScale=1,PageInternal=function(d){_inherits(j,d);var i=_createSuper(j);function j(){var e;_classCallCheck(this,j);for(var a=arguments.length,oe=new Array(a),he=0;he<a;he++)oe[he]=arguments[he];return e=i.call.apply(i,[this].concat(oe)),_defineProperty(_assertThisInitialized(e),"state",{page:null}),_defineProperty(_assertThisInitialized(e),"pageElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var ie=e.props,ee=ie.onLoadSuccess,k=ie.registerPage,ue=e.state.page;ee&&ee(makePageCallback(ue,e.scale)),k&&k(e.pageIndex,e.pageElement.current)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(ie){e.setState({page:!1}),warning(ie);var ee=e.props.onLoadError;ee&&ee(ie)}),_defineProperty(_assertThisInitialized(e),"loadPage",function(){var ie=e.props.pdf,ee=e.getPageNumber();if(ee){e.setState(function(ue){return ue.page?{page:null}:null});var k=makeCancellablePromise(ie.getPage(ee));e.runningTask=k,k.promise.then(function(ue){e.setState({page:ue},e.onLoadSuccess)}).catch(function(ue){e.onLoadError(ue)})}}),e}return _createClass(j,[{key:"componentDidMount",value:function(){var a=this.props.pdf;invariant(a,"Attempted to load a page, but no document was specified."),this.loadPage()}},{key:"componentDidUpdate",value:function(a){var oe=this.props.pdf;if(a.pdf&&oe!==a.pdf||this.getPageNumber()!==this.getPageNumber(a)){var he=this.props.unregisterPage;he&&he(this.getPageIndex(a)),this.loadPage()}}},{key:"componentWillUnmount",value:function(){var a=this.props.unregisterPage;a&&a(this.pageIndex),cancelRunningTask(this.runningTask)}},{key:"childContext",get:function(){var a=this.pageIndex,oe=this.pageNumber,he=this.state.page;if(!he)return{};var ie=this.props,ee=ie.canvasBackground,k=ie.customTextRenderer,ue=ie.devicePixelRatio,ye=ie.onGetAnnotationsError,le=ie.onGetAnnotationsSuccess,se=ie.onGetTextError,_=ie.onGetTextSuccess,s=ie.onRenderAnnotationLayerError,c=ie.onRenderAnnotationLayerSuccess,g=ie.onRenderError,ne=ie.onRenderSuccess,re=ie.onRenderTextLayerError,m=ie.onRenderTextLayerSuccess,o=ie.renderForms,h=ie.renderInteractiveForms;return{canvasBackground:ee,customTextRenderer:k,devicePixelRatio:ue,onGetAnnotationsError:ye,onGetAnnotationsSuccess:le,onGetTextError:se,onGetTextSuccess:_,onRenderAnnotationLayerError:s,onRenderAnnotationLayerSuccess:c,onRenderError:g,onRenderSuccess:ne,onRenderTextLayerError:re,onRenderTextLayerSuccess:m,page:he,pageIndex:a,pageNumber:oe,renderForms:o??h,rotate:this.rotate,scale:this.scale}}},{key:"getPageIndex",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return isProvided(a.pageNumber)?a.pageNumber-1:isProvided(a.pageIndex)?a.pageIndex:null}},{key:"getPageNumber",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return isProvided(a.pageNumber)?a.pageNumber:isProvided(a.pageIndex)?a.pageIndex+1:null}},{key:"pageIndex",get:function(){return this.getPageIndex()}},{key:"pageNumber",get:function(){return this.getPageNumber()}},{key:"rotate",get:function(){var a=this.props.rotate;if(isProvided(a))return a;var oe=this.state.page;return oe?oe.rotate:null}},{key:"scale",get:function(){var a=this.state.page;if(!a)return null;var oe=this.props,he=oe.scale,ie=oe.width,ee=oe.height,k=this.rotate,ue=1,ye=he===null?defaultScale:he;if(ie||ee){var le=a.getViewport({scale:1,rotation:k});ue=ie?ie/le.width:ee/le.height}return ye*ue}},{key:"eventProps",get:function(){var a=this;return makeEventProps(this.props,function(){var oe=a.state.page;return oe&&makePageCallback(oe,a.scale)})}},{key:"pageKey",get:function(){return"".concat(this.pageIndex,"@").concat(this.scale,"/").concat(this.rotate)}},{key:"pageKeyNoScale",get:function(){return"".concat(this.pageIndex,"/").concat(this.rotate)}},{key:"renderMainLayer",value:function(){var a=this.props,oe=a.canvasRef,he=a.renderMode;switch(he){case"none":return null;case"svg":return React.createElement(PageSVG,{key:"".concat(this.pageKeyNoScale,"_svg")});case"canvas":default:return React.createElement(PageCanvas,{key:"".concat(this.pageKey,"_canvas"),canvasRef:oe})}}},{key:"renderTextLayer",value:function(){var a=this.props.renderTextLayer;return a?React.createElement(TextLayer,{key:"".concat(this.pageKey,"_text")}):null}},{key:"renderAnnotationLayer",value:function(){var a=this.props.renderAnnotationLayer;return a?React.createElement(AnnotationLayer,{key:"".concat(this.pageKey,"_annotations")}):null}},{key:"renderChildren",value:function(){var a=this.props.children;return React.createElement(PageContext.Provider,{value:this.childContext},this.renderMainLayer(),this.renderTextLayer(),this.renderAnnotationLayer(),a)}},{key:"renderContent",value:function(){var a=this.pageNumber,oe=this.props.pdf,he=this.state.page;if(!a){var ie=this.props.noData;return React.createElement(Message,{type:"no-data"},typeof ie=="function"?ie():ie)}if(oe===null||he===null){var ee=this.props.loading;return React.createElement(Message,{type:"loading"},typeof ee=="function"?ee():ee)}if(oe===!1||he===!1){var k=this.props.error;return React.createElement(Message,{type:"error"},typeof k=="function"?k():k)}return this.renderChildren()}},{key:"render",value:function(){var a=this.pageNumber,oe=this.props,he=oe.className,ie=oe.inputRef;return React.createElement("div",_extends({className:clsx("react-pdf__Page",he),"data-page-number":a,ref:mergeRefs(ie,this.pageElement),style:{position:"relative",minWidth:"min-content",minHeight:"min-content"}},this.eventProps),this.renderContent())}}]),j}(reactExports.PureComponent);PageInternal.defaultProps={error:"Failed to load the page.",loading:"Loading page…",noData:"No page specified.",renderAnnotationLayer:!0,renderMode:"canvas",renderTextLayer:!0,scale:defaultScale};var isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);PageInternal.propTypes=_objectSpread(_objectSpread({},eventProps),{},{canvasBackground:PropTypes.string,children:PropTypes.node,className:isClassName,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,registerPage:PropTypes.func,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderInteractiveForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,unregisterPage:PropTypes.func,width:PropTypes.number});function Page(d,i){return React.createElement(DocumentContext.Consumer,null,function(j){return React.createElement(PageInternal,_extends({ref:i},j,d))})}const Page$1=React.forwardRef(Page);export{Document as D,Page$1 as P,React$1 as R,_defineProperty as _,React as a,PropTypes as b,_objectWithoutProperties as c,displayWorkerWarning as d,_slicedToArray as e,_getPrototypeOf as f,_possibleConstructorReturn as g,_typeof as h,_extends as i,_inherits as j,_classCallCheck as k,_toConsumableArray as l,_createClass as m,pdfExports as p,reactExports as r};
