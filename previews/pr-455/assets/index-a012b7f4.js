var Gg=Object.defineProperty;var qg=(re,ee,ne)=>ee in re?Gg(re,ee,{enumerable:!0,configurable:!0,writable:!0,value:ne}):re[ee]=ne;var cc=(re,ee,ne)=>(qg(re,typeof ee!="symbol"?ee+"":ee,ne),ne);import{a as buffer$2,p as process$1,P as ParametersInvalidBeaconError,d as commonjsGlobal,g as getDefaultExportFromCjs,e as axios,M as MichelCodecPacker,S as Schema,O as OpKind,f as Parser$2,T as TezosToolkit,h as BeaconWallet,N as NetworkType,i as BeaconEvent,j as MichelsonMap,k as getAugmentedNamespace,B as Buffer$2,b as browser$1$1,l as require$$1$1,r as require$$0$1,_ as __awaiter$1,m as __decorate$8,n as base,o as bytes2Char,v as validateAddress,V as ValidationResult,q as char2Bytes,s as emitMicheline,t as encodePubKey,u as encodeKeyHash}from"./contracts-deb3232b.js";import{r as reactExports,a as React,d as displayWorkerWarning,p as pdfExports,D as Document$1,P as Page$1,b as PropTypes,_ as _defineProperty$2,c as _objectWithoutProperties$1,e as _slicedToArray,f as _getPrototypeOf,g as _possibleConstructorReturn,R as React$1,h as _typeof,i as _extends$2,j as _inherits,k as _classCallCheck$1,l as _toConsumableArray,m as _createClass$1}from"./pdf-af010b77.js";import{c as classNames$1,N as NavLink,m as motion,a as create$2,A as AnimatePresence,u as useRouteError,i as isRouteErrorResponse,L as Link,b as useParams,r as reactDomExports,d as useLocation,e as useNavigate,f as useSearchParams,O as Outlet,g as Navigate,h as useOutlet,j as createSearchParams,k as useOutletContext,S as ScrollRestoration,l as createBrowserRouter,n as createRoutesFromChildren,R as RouterProvider,o as Route}from"./ui-6698abaf.js";import{L as Loader,F as FileLoader,B as BufferGeometry,a as BufferAttribute,T as TrianglesDrawMode,b as TriangleFanDrawMode,c as TriangleStripDrawMode,d as LoaderUtils,C as Color,S as SpotLight,P as PointLight,D as DirectionalLight,M as MeshBasicMaterial,s as sRGBEncoding,e as MeshPhysicalMaterial,V as Vector2,f as Matrix4,g as Vector3,I as InstancedMesh,O as Object3D,h as TextureLoader,i as ImageBitmapLoader,j as InterleavedBuffer,k as LinearFilter,l as LinearMipmapLinearFilter,R as RepeatWrapping,m as PointsMaterial,n as Material$1,o as LineBasicMaterial,p as MeshStandardMaterial,q as DoubleSide,r as PropertyBinding,t as SkinnedMesh,u as Mesh,v as LineSegments,w as Line$1,x as LineLoop,y as Points,G as Group$1,z as PerspectiveCamera,A as MathUtils,E as OrthographicCamera,H as Skeleton,J as InterpolateLinear,K as AnimationClip,N as Bone,Q as Quaternion,U as NearestFilter,W as NearestMipmapNearestFilter,X as LinearMipmapNearestFilter,Y as NearestMipmapLinearFilter,Z as ClampToEdgeWrapping,_ as MirroredRepeatWrapping,$ as InterpolateDiscrete,a0 as FrontSide,a1 as InterleavedBufferAttribute,a2 as Texture$1,a3 as VectorKeyframeTrack,a4 as QuaternionKeyframeTrack,a5 as NumberKeyframeTrack,a6 as Box3,a7 as Sphere,a8 as Interpolant,a9 as CompressedArrayTexture,aa as UnsignedByteType,ab as CompressedTexture,ac as LinearEncoding,ad as RGBAFormat,ae as RGBA_ASTC_4x4_Format,af as RGBA_BPTC_Format,ag as RGBA_ETC2_EAC_Format,ah as RGBA_PVRTC_4BPPV1_Format,ai as RGBA_S3TC_DXT5_Format,aj as RGB_ETC1_Format,ak as RGB_ETC2_Format,al as RGB_PVRTC_4BPPV1_Format,am as RGB_S3TC_DXT1_Format,an as FloatType,ao as HalfFloatType,ap as DataTexture,aq as Data3DTexture,ar as RGFormat,as as RedFormat,at as EventDispatcher,au as Source$2,av as Scene,aw as LightProbe,ax as WebGLCubeRenderTarget,ay as Float32BufferAttribute,az as PlaneGeometry,aA as Spherical,aB as Matrix3,aC as Euler,aD as ShaderMaterial,aE as WebGLRenderTarget,aF as DataTextureLoader,aG as DataUtils,aH as BoxGeometry,aI as BackSide,aJ as EquirectangularReflectionMapping,aK as CubeCamera,aL as NoToneMapping,aM as NoBlending,aN as WebGLRenderer,aO as ACESFilmicToneMapping,aP as VideoTexture,aQ as CanvasTexture,aR as Triangle,aS as MeshDepthMaterial,aT as Raycaster,aU as AnimationMixer,aV as LoopPingPong,aW as LoopRepeat,aX as LoopOnce}from"./three-c1875886.js";(function(){const ee=document.createElement("link").relList;if(ee&&ee.supports&&ee.supports("modulepreload"))return;for(const ce of document.querySelectorAll('link[rel="modulepreload"]'))ae(ce);new MutationObserver(ce=>{for(const le of ce)if(le.type==="childList")for(const ue of le.addedNodes)ue.tagName==="LINK"&&ue.rel==="modulepreload"&&ae(ue)}).observe(document,{childList:!0,subtree:!0});function ne(ce){const le={};return ce.integrity&&(le.integrity=ce.integrity),ce.referrerPolicy&&(le.referrerPolicy=ce.referrerPolicy),ce.crossOrigin==="use-credentials"?le.credentials="include":ce.crossOrigin==="anonymous"?le.credentials="omit":le.credentials="same-origin",le}function ae(ce){if(ce.ep)return;ce.ep=!0;const le=ne(ce);fetch(ce.href,le)}})();globalThis.Buffer=buffer$2.Buffer;globalThis.process=process$1;typeof process>"u"&&(globalThis.process={});process.hrtime||(process.hrtime=function(re){var ee=performance.now()*.001,ne=Math.floor(ee),ae=Math.floor(ee%1*1e9);return re&&(ne=ne-re[0],ae=ae-re[1],ae<0&&(ne--,ae+=1e9)),[ne,ae]});var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$3=Symbol.for("react.element"),l$5=Symbol.for("react.fragment"),m$5=Object.prototype.hasOwnProperty,n$8=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$5={key:!0,ref:!0,__self:!0,__source:!0};function q$2(re,ee,ne){var ae,ce={},le=null,ue=null;ne!==void 0&&(le=""+ne),ee.key!==void 0&&(le=""+ee.key),ee.ref!==void 0&&(ue=ee.ref);for(ae in ee)m$5.call(ee,ae)&&!p$5.hasOwnProperty(ae)&&(ce[ae]=ee[ae]);if(re&&re.defaultProps)for(ae in ee=re.defaultProps,ee)ce[ae]===void 0&&(ce[ae]=ee[ae]);return{$$typeof:k$3,type:re,key:le,ref:ue,props:ce,_owner:n$8.current}}reactJsxRuntime_production_min.Fragment=l$5;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;const Fragment=jsxRuntimeExports.Fragment,jsx$1=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs,container$D="_container_12gil_216",msg_box="_msg_box_12gil_217",styles$13={container:container$D,msg_box},loader$1="_loader_158c3_216",container$C="_container_158c3_223",circle="_circle_158c3_230",message$1="_message_158c3_241",flicker="_flicker_158c3_1",styles$12={loader:loader$1,container:container$C,circle,message:message$1,flicker},Loading=({message:re})=>jsx$1("div",{className:styles$12.container,children:jsxs("div",{className:styles$12.loader,children:[jsx$1("div",{className:styles$12.circle}),re&&jsx$1("p",{className:styles$12.message,children:re})]})}),strong$1="_strong_1uioe_216",container$B="_container_1uioe_220",inline$2="_inline_1uioe_240",fit$1="_fit_1uioe_244",small$3="_small_1uioe_247",disabled$3="_disabled_1uioe_250",full$1="_full_1uioe_255",primary$1="_primary_1uioe_268",selected$4="_selected_1uioe_272",active$2="_active_1uioe_272",menu$4="_menu_1uioe_276",secondary$2="_secondary_1uioe_292",box$2="_box_1uioe_307",shadow_box$1="_shadow_box_1uioe_336",left$3="_left_1uioe_353",button_theme$1="_button_theme_1uioe_357",pagination_button$1="_pagination_button_1uioe_368",daoDonateButton$1="_daoDonateButton_1uioe_376",donateInput$1="_donateInput_1uioe_397",donateButton$1="_donateButton_1uioe_414",styles$11={strong:strong$1,container:container$B,inline:inline$2,fit:fit$1,small:small$3,disabled:disabled$3,full:full$1,primary:primary$1,selected:selected$4,active:active$2,menu:menu$4,secondary:secondary$2,box:box$2,shadow_box:shadow_box$1,left:left$3,button_theme:button_theme$1,pagination_button:pagination_button$1,daoDonateButton:daoDonateButton$1,donateInput:donateInput$1,donateButton:donateButton$1},Button=({to:re,href:ee,onClick:ne,onTo:ae,children:ce,className:le,style:ue,alt:he,disabled:fe,selected:me,fit:ge,full:ve,box:ye,strong:be,shadow_box:Ee,secondary:Ce,small:Se,inline:Te,activeClass:ke,...Ne})=>{const De=`${classNames$1({[styles$11.container]:!0,[styles$11.disabled]:fe,[styles$11.fit]:ge,[styles$11.full]:ve,[styles$11.small]:Se,[styles$11.strong]:be,[styles$11.inline]:Te,[styles$11.selected]:me,[styles$11.primary]:!Ce})} ${le||""}`;return ye?ce=jsx$1("div",{className:styles$11.box,children:ce}):Ee&&(ce=jsx$1("div",{className:styles$11.shadow_box,children:ce})),re!=null?jsx$1(NavLink,{"aria-label":he,to:re,onClick:ae,className:({isActive:Oe})=>Oe?`${styles$11.active} ${De} ${ke||""}`:De,...Ne,end:!0,children:ce}):ee!=null?jsx$1(motion.a,{style:ue,href:ee,target:"_blank",rel:"noopener noreferrer",className:De,"aria-label":he,...Ne,children:ce}):jsx$1(motion.button,{style:ue,"aria-label":he,onClick:ne,className:De,...Ne,children:ce})},Secondary=({children:re,selected:ee,label:ne=""})=>{const ae=classNames$1({[styles$11.secondary]:!0,[styles$11.selected]:ee});return jsx$1("div",{className:ae,role:"button","aria-label":ne,children:re})},Secondary$1=reactExports.memo(Secondary);function IncrementButtons({onClick:re}){return jsxs("div",{children:[jsx$1(Button,{shadow_box:!0,inline:!0,onClick:ee=>re(ee,!0),children:"+"}),jsx$1(Button,{shadow_box:!0,inline:!0,onClick:ee=>re(ee,!1),children:"-"})]})}function PaginationButtons({path:re,current:ee,min:ne,max:ae}){return jsxs("div",{children:[jsx$1(Button,{to:`${re}/${Math.max(ne,ee-1)}`,className:styles$11.pagination_button,shadow_box:!0,children:ee>ne?"❰":"|"})," ",jsx$1(Button,{to:`${re}/${Math.min(ee+1,ae)}`,className:styles$11.pagination_button,shadow_box:!0,children:ee<ae?"❱":"|"})]})}const fadeIn=()=>({initial:{opacity:0,transition:{duration:.2,ease:"easeOut"}},animate:{opacity:1,transition:{duration:.2,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.2,ease:"easeInOut"}}}),containerMenu={hidden:{border:0,y:-25,opacity:0,transition:{ease:"easeOut",duration:.2,staggerChildren:.02,staggerDirection:-1}},show:{border:"1px",y:0,opacity:1,transition:{ease:"easeOut",staggerChildren:.04}}},containerVariants={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.333}},exit:{opacity:0,transition:{ease:"easeInOut"}}},container$A="_container_jg3vp_1",content$5="_content_jg3vp_13",message="_message_jg3vp_21",buttons$7="_buttons_jg3vp_33",loader="_loader_jg3vp_39",styles$10={container:container$A,content:content$5,message,buttons:buttons$7,loader};function n$7(){return n$7=Object.assign||function(re){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee];for(var ae in ne)Object.prototype.hasOwnProperty.call(ne,ae)&&(re[ae]=ne[ae])}return re},n$7.apply(this,arguments)}const e$5=["children","options"],r$5=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","className","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((re,ee)=>(re[ee.toLowerCase()]=ee,re),{for:"htmlFor"}),o$5={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},c$5=["style","script"],a$3=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,u$1=/mailto:/i,_$2=/\n{2,}$/,i$5=/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/,s$5=/^ *> ?/gm,l$4=/^ {2,}\n/,f$2=/^(?:( *[-*_]) *){3,}(?:\n *)+\n/,d$3=/^\s*(`{3,}|~{3,}) *(\S+)?([^\n]*?)?\n([\s\S]+?)\s*\1 *(?:\n *)*\n?/,p$4=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,g$3=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,m$4=/^(?:\n *)*\n/,y$2=/\r\n?/g,h$3=/^\[\^([^\]]+)](:.*)\n/,k$2=/^\[\^([^\]]+)]/,x$5=/\f/g,b$3=/^\s*?\[(x|\s)\]/,v$2=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,S$2=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,$$1=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?([^>]*)\/{0}>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1)[\s\S])*?)<\/\1>\n*/i,w$2=/&([a-zA-Z]+);/g,z$2=/^<!--[\s\S]*?(?:-->)/,E$1=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,A$3=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,L=/^\{.*\}$/,R$1=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,I$2=/^<([^ >]+@[^ >]+)>/,M$2=/^<([^ >]+:\/[^ >]+)>/,O=/-([a-z])?/gi,B$1=/^(.*\|?.*)\n *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*)\n?/,T$1=/^\[([^\]]*)\]:\s+(\S+)\s*("([^"]*)")?/,j$1=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,C$2=/^\[([^\]]*)\] ?\[([^\]]*)\]/,Z$1=/(\[|\])/g,D=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,N$1=/\t/g,F=/^ *\| */,P$1=/(^ *\||\| *$)/g,G=/ *$/,H$1=/^ *:-+: *$/,q$1=/^ *:-+ *$/,U=/^ *-+: *$/,V$1=/^([*_])\1((?:\[.*?\][([].*?[)\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~+.*?~+|.)*?)\1\1(?!\1)/,W$1=/^([*_])((?:\[.*?\][([].*?[)\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~+.*?~+|.)*?)\1(?!\1|\w)/,Q$1=/^~~((?:\[.*?\]|<.*?>(?:.*?<.*?>)?|`.*?`|.)*?)~~/,X=/^\\([^0-9A-Za-z\s])/,J=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,K=/^\n+/,Y=/^([ \t]*)/,tt=/\\([^0-9A-Z\s])/gi,nt$1=/ *\n+$/,et$2=/(?:^|\n)( *)$/,rt="(?:\\d+\\.)",ot="(?:[*+-])";function ct$1(re){return"( *)("+(re===1?rt:ot)+") +"}const at=ct$1(1),ut=ct$1(2);function _t(re){return new RegExp("^"+(re===1?at:ut))}const it=_t(1),st=_t(2);function lt(re){return new RegExp("^"+(re===1?at:ut)+"[^\\n]*(?:\\n(?!\\1"+(re===1?rt:ot)+" )[^\\n]*)*(\\n|$)","gm")}const ft=lt(1),dt$1=lt(2);function pt(re){const ee=re===1?rt:ot;return new RegExp("^( *)("+ee+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+ee+" (?!"+ee+" ))\\n*|\\s*\\n*$)")}const gt$1=pt(1),mt=pt(2);function yt$1(re,ee){const ne=ee===1,ae=ne?gt$1:mt,ce=ne?ft:dt$1,le=ne?it:st;return{t(ue,he,fe){const me=et$2.exec(fe);return me&&(he.o||!he.u&&!he._)?ae.exec(ue=me[1]+ue):null},i:Ht.HIGH,l(ue,he,fe){const me=ne?+ue[2]:void 0,ge=ue[0].replace(_$2,`
`).match(ce);let ve=!1;return{p:ge.map(function(ye,be){const Ee=le.exec(ye)[0].length,Ce=new RegExp("^ {1,"+Ee+"}","gm"),Se=ye.replace(Ce,"").replace(le,""),Te=be===ge.length-1,ke=Se.indexOf(`

`)!==-1||Te&&ve;ve=ke;const Ne=fe.u,Fe=fe.o;let De;fe.o=!0,ke?(fe.u=!1,De=Se.replace(nt$1,`

`)):(fe.u=!0,De=Se.replace(nt$1,""));const Oe=he(De,fe);return fe.u=Ne,fe.o=Fe,Oe}),g:ne,m:me}},h:(ue,he,fe)=>re(ue.g?"ol":"ul",{key:fe.k,start:ue.m},ue.p.map(function(me,ge){return re("li",{key:ge},he(me,fe))}))}}const ht="(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*",kt=`\\s*<?((?:[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*`,xt=new RegExp("^\\[("+ht+")\\]\\("+kt+"\\)"),bt=new RegExp("^!\\[("+ht+")\\]\\("+kt+"\\)"),vt=[i$5,d$3,p$4,v$2,S$2,z$2,B$1,ft,gt$1,dt$1,mt],St=[...vt,/^[^\n]+(?:  \n|\n{2,})/,$$1,A$3];function $t$1(re){return re.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function wt(re){return U.test(re)?"right":H$1.test(re)?"center":q$1.test(re)?"left":null}function zt(re,ee,ne){const ae=ne.v;ne.v=!0;const ce=ee(re.trim(),ne);ne.v=ae;let le=[[]];return ce.forEach(function(ue,he){ue.type==="tableSeparator"?he!==0&&he!==ce.length-1&&le.push([]):(ue.type!=="text"||ce[he+1]!=null&&ce[he+1].type!=="tableSeparator"||(ue.S=ue.S.replace(G,"")),le[le.length-1].push(ue))}),le}function Et(re,ee,ne){ne.u=!0;const ae=zt(re[1],ee,ne),ce=re[2].replace(P$1,"").split("|").map(wt),le=function(ue,he,fe){return ue.trim().split(`
`).map(function(me){return zt(me,he,fe)})}(re[3],ee,ne);return ne.u=!1,{$:ce,A:le,L:ae,type:"table"}}function At(re,ee){return re.$[ee]==null?{}:{textAlign:re.$[ee]}}function Lt(re){return function(ee,ne){return ne.u?re.exec(ee):null}}function Rt(re){return function(ee,ne){return ne.u||ne._?re.exec(ee):null}}function It(re){return function(ee,ne){return ne.u||ne._?null:re.exec(ee)}}function Mt(re){return function(ee){return re.exec(ee)}}function Ot$1(re,ee,ne){if(ee.u||ee._||ne&&!ne.endsWith(`
`))return null;let ae="";re.split(`
`).every(le=>!vt.some(ue=>ue.test(le))&&(ae+=le+`
`,le.trim()));const ce=ae.trimEnd();return ce==""?null:[ae,ce]}function Bt(re){try{if(decodeURIComponent(re).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data):/i))return null}catch{return null}return re}function Tt(re){return re.replace(tt,"$1")}function jt(re,ee,ne){const ae=ne.u||!1,ce=ne._||!1;ne.u=!0,ne._=!0;const le=re(ee,ne);return ne.u=ae,ne._=ce,le}function Ct(re,ee,ne){const ae=ne.u||!1,ce=ne._||!1;ne.u=!1,ne._=!0;const le=re(ee,ne);return ne.u=ae,ne._=ce,le}function Zt(re,ee,ne){return ne.u=!1,re(ee+`

`,ne)}const Dt=(re,ee,ne)=>({S:jt(ee,re[1],ne)});function Nt(){return{}}function Ft$1(){return null}function Pt(...re){return re.filter(Boolean).join(" ")}function Gt(re,ee,ne){let ae=re;const ce=ee.split(".");for(;ce.length&&(ae=ae[ce[0]],ae!==void 0);)ce.shift();return ae||ne}var Ht;function qt(re,ee={}){ee.overrides=ee.overrides||{},ee.slugify=ee.slugify||$t$1,ee.namedCodesToUnicode=ee.namedCodesToUnicode?n$7({},o$5,ee.namedCodesToUnicode):o$5;const ne=ee.createElement||reactExports.createElement;function ae(be,Ee,...Ce){const Se=Gt(ee.overrides,`${be}.props`,{});return ne(function(Te,ke){const Ne=Gt(ke,Te);return Ne?typeof Ne=="function"||typeof Ne=="object"&&"render"in Ne?Ne:Gt(ke,`${Te}.component`,Te):Te}(be,ee.overrides),n$7({},Ee,Se,{className:Pt(Ee==null?void 0:Ee.className,Se.className)||void 0}),...Ce)}function ce(be){let Ee=!1;ee.forceInline?Ee=!0:ee.forceBlock||(Ee=D.test(be)===!1);const Ce=ge(me(Ee?be:`${be.trimEnd().replace(K,"")}

`,{u:Ee}));for(;typeof Ce[Ce.length-1]=="string"&&!Ce[Ce.length-1].trim();)Ce.pop();if(ee.wrapper===null)return Ce;const Se=ee.wrapper||(Ee?"span":"div");let Te;if(Ce.length>1||ee.forceWrapper)Te=Ce;else{if(Ce.length===1)return Te=Ce[0],typeof Te=="string"?ae("span",{key:"outer"},Te):Te;Te=null}return reactExports.createElement(Se,{key:"outer"},Te)}function le(be){const Ee=be.match(a$3);return Ee?Ee.reduce(function(Ce,Se,Te){const ke=Se.indexOf("=");if(ke!==-1){const Ne=function(Re){return Re.indexOf("-")!==-1&&Re.match(E$1)===null&&(Re=Re.replace(O,function(Be,Le){return Le.toUpperCase()})),Re}(Se.slice(0,ke)).trim(),Fe=function(Re){const Be=Re[0];return(Be==='"'||Be==="'")&&Re.length>=2&&Re[Re.length-1]===Be?Re.slice(1,-1):Re}(Se.slice(ke+1).trim()),De=r$5[Ne]||Ne,Oe=Ce[De]=function(Re,Be){return Re==="style"?Be.split(/;\s?/).reduce(function(Le,je){const Ge=je.slice(0,je.indexOf(":"));return Le[Ge.replace(/(-[a-z])/g,qe=>qe[1].toUpperCase())]=je.slice(Ge.length+1).trim(),Le},{}):Re==="href"?Bt(Be):(Be.match(L)&&(Be=Be.slice(1,Be.length-1)),Be==="true"||Be!=="false"&&Be)}(Ne,Fe);typeof Oe=="string"&&($$1.test(Oe)||A$3.test(Oe))&&(Ce[De]=reactExports.cloneElement(ce(Oe.trim()),{key:Te}))}else Se!=="style"&&(Ce[r$5[Se]||Se]=!0);return Ce},{}):void 0}const ue=[],he={},fe={blockQuote:{t:It(i$5),i:Ht.HIGH,l:(be,Ee,Ce)=>({S:Ee(be[0].replace(s$5,""),Ce)}),h:(be,Ee,Ce)=>ae("blockquote",{key:Ce.k},Ee(be.S,Ce))},breakLine:{t:Mt(l$4),i:Ht.HIGH,l:Nt,h:(be,Ee,Ce)=>ae("br",{key:Ce.k})},breakThematic:{t:It(f$2),i:Ht.HIGH,l:Nt,h:(be,Ee,Ce)=>ae("hr",{key:Ce.k})},codeBlock:{t:It(p$4),i:Ht.MAX,l:be=>({S:be[0].replace(/^ {4}/gm,"").replace(/\n+$/,""),R:void 0}),h:(be,Ee,Ce)=>ae("pre",{key:Ce.k},ae("code",n$7({},be.I,{className:be.R?`lang-${be.R}`:""}),be.S))},codeFenced:{t:It(d$3),i:Ht.MAX,l:be=>({I:le(be[3]||""),S:be[4],R:be[2]||void 0,type:"codeBlock"})},codeInline:{t:Rt(g$3),i:Ht.LOW,l:be=>({S:be[2]}),h:(be,Ee,Ce)=>ae("code",{key:Ce.k},be.S)},footnote:{t:It(h$3),i:Ht.MAX,l:be=>(ue.push({M:be[2],O:be[1]}),{}),h:Ft$1},footnoteReference:{t:Lt(k$2),i:Ht.HIGH,l:be=>({S:be[1],B:`#${ee.slugify(be[1])}`}),h:(be,Ee,Ce)=>ae("a",{key:Ce.k,href:Bt(be.B)},ae("sup",{key:Ce.k},be.S))},gfmTask:{t:Lt(b$3),i:Ht.HIGH,l:be=>({T:be[1].toLowerCase()==="x"}),h:(be,Ee,Ce)=>ae("input",{checked:be.T,key:Ce.k,readOnly:!0,type:"checkbox"})},heading:{t:It(v$2),i:Ht.HIGH,l:(be,Ee,Ce)=>({S:jt(Ee,be[2],Ce),j:ee.slugify(be[2]),C:be[1].length}),h:(be,Ee,Ce)=>ae(`h${be.C}`,{id:be.j,key:Ce.k},Ee(be.S,Ce))},headingSetext:{t:It(S$2),i:Ht.MAX,l:(be,Ee,Ce)=>({S:jt(Ee,be[1],Ce),C:be[2]==="="?1:2,type:"heading"})},htmlComment:{t:Mt(z$2),i:Ht.HIGH,l:()=>({}),h:Ft$1},image:{t:Rt(bt),i:Ht.HIGH,l:be=>({Z:be[1],B:Tt(be[2]),D:be[3]}),h:(be,Ee,Ce)=>ae("img",{key:Ce.k,alt:be.Z||void 0,title:be.D||void 0,src:Bt(be.B)})},link:{t:Lt(xt),i:Ht.LOW,l:(be,Ee,Ce)=>({S:Ct(Ee,be[1],Ce),B:Tt(be[2]),D:be[3]}),h:(be,Ee,Ce)=>ae("a",{key:Ce.k,href:Bt(be.B),title:be.D},Ee(be.S,Ce))},linkAngleBraceStyleDetector:{t:Lt(M$2),i:Ht.MAX,l:be=>({S:[{S:be[1],type:"text"}],B:be[1],type:"link"})},linkBareUrlDetector:{t:(be,Ee)=>Ee.N?null:Lt(R$1)(be,Ee),i:Ht.MAX,l:be=>({S:[{S:be[1],type:"text"}],B:be[1],D:void 0,type:"link"})},linkMailtoDetector:{t:Lt(I$2),i:Ht.MAX,l(be){let Ee=be[1],Ce=be[1];return u$1.test(Ce)||(Ce="mailto:"+Ce),{S:[{S:Ee.replace("mailto:",""),type:"text"}],B:Ce,type:"link"}}},orderedList:yt$1(ae,1),unorderedList:yt$1(ae,2),newlineCoalescer:{t:It(m$4),i:Ht.LOW,l:Nt,h:()=>`
`},paragraph:{t:Ot$1,i:Ht.LOW,l:Dt,h:(be,Ee,Ce)=>ae("p",{key:Ce.k},Ee(be.S,Ce))},ref:{t:Lt(T$1),i:Ht.MAX,l:be=>(he[be[1]]={B:be[2],D:be[4]},{}),h:Ft$1},refImage:{t:Rt(j$1),i:Ht.MAX,l:be=>({Z:be[1]||void 0,F:be[2]}),h:(be,Ee,Ce)=>ae("img",{key:Ce.k,alt:be.Z,src:Bt(he[be.F].B),title:he[be.F].D})},refLink:{t:Lt(C$2),i:Ht.MAX,l:(be,Ee,Ce)=>({S:Ee(be[1],Ce),P:Ee(be[0].replace(Z$1,"\\$1"),Ce),F:be[2]}),h:(be,Ee,Ce)=>he[be.F]?ae("a",{key:Ce.k,href:Bt(he[be.F].B),title:he[be.F].D},Ee(be.S,Ce)):ae("span",{key:Ce.k},Ee(be.P,Ce))},table:{t:It(B$1),i:Ht.HIGH,l:Et,h:(be,Ee,Ce)=>ae("table",{key:Ce.k},ae("thead",null,ae("tr",null,be.L.map(function(Se,Te){return ae("th",{key:Te,style:At(be,Te)},Ee(Se,Ce))}))),ae("tbody",null,be.A.map(function(Se,Te){return ae("tr",{key:Te},Se.map(function(ke,Ne){return ae("td",{key:Ne,style:At(be,Ne)},Ee(ke,Ce))}))})))},tableSeparator:{t:function(be,Ee){return Ee.v?F.exec(be):null},i:Ht.HIGH,l:function(){return{type:"tableSeparator"}},h:()=>" | "},text:{t:Mt(J),i:Ht.MIN,l:be=>({S:be[0].replace(w$2,(Ee,Ce)=>ee.namedCodesToUnicode[Ce]?ee.namedCodesToUnicode[Ce]:Ee)}),h:be=>be.S},textBolded:{t:Rt(V$1),i:Ht.MED,l:(be,Ee,Ce)=>({S:Ee(be[2],Ce)}),h:(be,Ee,Ce)=>ae("strong",{key:Ce.k},Ee(be.S,Ce))},textEmphasized:{t:Rt(W$1),i:Ht.LOW,l:(be,Ee,Ce)=>({S:Ee(be[2],Ce)}),h:(be,Ee,Ce)=>ae("em",{key:Ce.k},Ee(be.S,Ce))},textEscaped:{t:Rt(X),i:Ht.HIGH,l:be=>({S:be[1],type:"text"})},textStrikethroughed:{t:Rt(Q$1),i:Ht.LOW,l:Dt,h:(be,Ee,Ce)=>ae("del",{key:Ce.k},Ee(be.S,Ce))}};ee.disableParsingRawHTML!==!0&&(fe.htmlBlock={t:Mt($$1),i:Ht.HIGH,l(be,Ee,Ce){const[,Se]=be[3].match(Y),Te=new RegExp(`^${Se}`,"gm"),ke=be[3].replace(Te,""),Ne=(Fe=ke,St.some(Be=>Be.test(Fe))?Zt:jt);var Fe;const De=be[1].toLowerCase(),Oe=c$5.indexOf(De)!==-1;Ce.N=Ce.N||De==="a";const Re=Oe?be[3]:Ne(Ee,ke,Ce);return Ce.N=!1,{I:le(be[2]),S:Re,G:Oe,H:Oe?De:be[1]}},h:(be,Ee,Ce)=>ae(be.H,n$7({key:Ce.k},be.I),be.G?be.S:Ee(be.S,Ce))},fe.htmlSelfClosing={t:Mt(A$3),i:Ht.HIGH,l:be=>({I:le(be[2]||""),H:be[1]}),h:(be,Ee,Ce)=>ae(be.H,n$7({},be.I,{key:Ce.k}))});const me=function(be){let Ee=Object.keys(be);function Ce(Se,Te){let ke=[],Ne="";for(;Se;){let Fe=0;for(;Fe<Ee.length;){const De=Ee[Fe],Oe=be[De],Re=Oe.t(Se,Te,Ne);if(Re){const Be=Re[0];Se=Se.substring(Be.length);const Le=Oe.l(Re,Ce,Te);Le.type==null&&(Le.type=De),ke.push(Le),Ne=Be;break}Fe++}}return ke}return Ee.sort(function(Se,Te){let ke=be[Se].i,Ne=be[Te].i;return ke!==Ne?ke-Ne:Se<Te?-1:1}),function(Se,Te){return Ce(function(ke){return ke.replace(y$2,`
`).replace(x$5,"").replace(N$1,"    ")}(Se),Te)}}(fe),ge=(ve=function(be){return function(Ee,Ce,Se){return be[Ee.type].h(Ee,Ce,Se)}}(fe),function be(Ee,Ce={}){if(Array.isArray(Ee)){const Se=Ce.k,Te=[];let ke=!1;for(let Ne=0;Ne<Ee.length;Ne++){Ce.k=Ne;const Fe=be(Ee[Ne],Ce),De=typeof Fe=="string";De&&ke?Te[Te.length-1]+=Fe:Fe!==null&&Te.push(Fe),ke=De}return Ce.k=Se,Te}return ve(Ee,be,Ce)});var ve;const ye=ce(re);return ue.length?ae("div",null,ye,ae("footer",{key:"footer"},ue.map(function(be){return ae("div",{id:ee.slugify(be.O),key:be.O},be.O,ge(me(be.M,{u:!0})))}))):ye}(function(re){re[re.MAX=0]="MAX",re[re.HIGH=1]="HIGH",re[re.MED=2]="MED",re[re.LOW=3]="LOW",re[re.MIN=4]="MIN"})(Ht||(Ht={}));const Markdown$1=re=>{let{children:ee,options:ne}=re,ae=function(ce,le){if(ce==null)return{};var ue,he,fe={},me=Object.keys(ce);for(he=0;he<me.length;he++)le.indexOf(ue=me[he])>=0||(fe[ue]=ce[ue]);return fe}(re,e$5);return reactExports.cloneElement(qt(ee,ne),ae)},content$4="_content_1qqc3_216",styles$$={content:content$4},LinkRenderer=re=>jsx$1("a",{href:re.href,target:"_blank",rel:"noreferrer",children:re.children}),Markdown=({children:re,className:ee})=>jsx$1(Markdown$1,{options:{forceBlock:!0,overrides:{a:{component:LinkRenderer},hr:{props:{className:styles$$.spacer}}}},className:`${ee||""} ${styles$$.content}`,children:re}),subscribeWithSelectorImpl=re=>(ee,ne,ae)=>{const ce=ae.subscribe;return ae.subscribe=(ue,he,fe)=>{let me=ue;if(he){const ge=(fe==null?void 0:fe.equalityFn)||Object.is;let ve=ue(ae.getState());me=ye=>{const be=ue(ye);if(!ge(ve,be)){const Ee=ve;he(ve=be,Ee)}},fe!=null&&fe.fireImmediately&&he(ve,ve)}return ce(me)},re(ee,ne,ae)},subscribeWithSelector=subscribeWithSelectorImpl;function createJSONStorage(re){let ee;try{ee=re()}catch{return}return{getItem:ae=>{var ce;const le=he=>he===null?null:JSON.parse(he),ue=(ce=ee.getItem(ae))!=null?ce:null;return ue instanceof Promise?ue.then(le):le(ue)},setItem:(ae,ce)=>ee.setItem(ae,JSON.stringify(ce)),removeItem:ae=>ee.removeItem(ae)}}const toThenable=re=>ee=>{try{const ne=re(ee);return ne instanceof Promise?ne:{then(ae){return toThenable(ae)(ne)},catch(ae){return this}}}catch(ne){return{then(ae){return this},catch(ae){return toThenable(ae)(ne)}}}},oldImpl=(re,ee)=>(ne,ae,ce)=>{let le={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:Se=>Se,version:0,merge:(Se,Te)=>({...Te,...Se}),...ee},ue=!1;const he=new Set,fe=new Set;let me;try{me=le.getStorage()}catch{}if(!me)return re((...Se)=>{console.warn(`[zustand persist middleware] Unable to update item '${le.name}', the given storage is currently unavailable.`),ne(...Se)},ae,ce);const ge=toThenable(le.serialize),ve=()=>{const Se=le.partialize({...ae()});let Te;const ke=ge({state:Se,version:le.version}).then(Ne=>me.setItem(le.name,Ne)).catch(Ne=>{Te=Ne});if(Te)throw Te;return ke},ye=ce.setState;ce.setState=(Se,Te)=>{ye(Se,Te),ve()};const be=re((...Se)=>{ne(...Se),ve()},ae,ce);let Ee;const Ce=()=>{var Se;if(!me)return;ue=!1,he.forEach(ke=>ke(ae()));const Te=((Se=le.onRehydrateStorage)==null?void 0:Se.call(le,ae()))||void 0;return toThenable(me.getItem.bind(me))(le.name).then(ke=>{if(ke)return le.deserialize(ke)}).then(ke=>{if(ke)if(typeof ke.version=="number"&&ke.version!==le.version){if(le.migrate)return le.migrate(ke.state,ke.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return ke.state}).then(ke=>{var Ne;return Ee=le.merge(ke,(Ne=ae())!=null?Ne:be),ne(Ee,!0),ve()}).then(()=>{Te==null||Te(Ee,void 0),ue=!0,fe.forEach(ke=>ke(Ee))}).catch(ke=>{Te==null||Te(void 0,ke)})};return ce.persist={setOptions:Se=>{le={...le,...Se},Se.getStorage&&(me=Se.getStorage())},clearStorage:()=>{me==null||me.removeItem(le.name)},getOptions:()=>le,rehydrate:()=>Ce(),hasHydrated:()=>ue,onHydrate:Se=>(he.add(Se),()=>{he.delete(Se)}),onFinishHydration:Se=>(fe.add(Se),()=>{fe.delete(Se)})},Ce(),Ee||be},newImpl=(re,ee)=>(ne,ae,ce)=>{let le={storage:createJSONStorage(()=>localStorage),partialize:Ce=>Ce,version:0,merge:(Ce,Se)=>({...Se,...Ce}),...ee},ue=!1;const he=new Set,fe=new Set;let me=le.storage;if(!me)return re((...Ce)=>{console.warn(`[zustand persist middleware] Unable to update item '${le.name}', the given storage is currently unavailable.`),ne(...Ce)},ae,ce);const ge=()=>{const Ce=le.partialize({...ae()});return me.setItem(le.name,{state:Ce,version:le.version})},ve=ce.setState;ce.setState=(Ce,Se)=>{ve(Ce,Se),ge()};const ye=re((...Ce)=>{ne(...Ce),ge()},ae,ce);let be;const Ee=()=>{var Ce;if(!me)return;ue=!1,he.forEach(Te=>Te(ae()));const Se=((Ce=le.onRehydrateStorage)==null?void 0:Ce.call(le,ae()))||void 0;return toThenable(me.getItem.bind(me))(le.name).then(Te=>{if(Te)if(typeof Te.version=="number"&&Te.version!==le.version){if(le.migrate)return le.migrate(Te.state,Te.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return Te.state}).then(Te=>{var ke;return be=le.merge(Te,(ke=ae())!=null?ke:ye),ne(be,!0),ge()}).then(()=>{Se==null||Se(be,void 0),ue=!0,fe.forEach(Te=>Te(be))}).catch(Te=>{Se==null||Se(void 0,Te)})};return ce.persist={setOptions:Ce=>{le={...le,...Ce},Ce.storage&&(me=Ce.storage)},clearStorage:()=>{me==null||me.removeItem(le.name)},getOptions:()=>le,rehydrate:()=>Ee(),hasHydrated:()=>ue,onHydrate:Ce=>(he.add(Ce),()=>{he.delete(Ce)}),onFinishHydration:Ce=>(fe.add(Ce),()=>{fe.delete(Ce)})},Ee(),be||ye},persistImpl=(re,ee)=>{var ne;return"getStorage"in ee||"serialize"in ee||"deserialize"in ee?(((ne={VITE_TEIA_REPORT:"https://lists.teia.art",VITE_LOGOS:"https://lists.teia.art/teia-logos/dist",VITE_TEIA_GRAPHQL_API:"https://teztok.teia.rocks/v1/graphql",VITE_TEZOSDOMAINS_GRAPHQL_API:"https://api.tezos.domains/graphql",VITE_TZKT_API:"https://api.tzkt.io",VITE_TZPROFILES_GRAPHQL_API:"https://indexer.tzprofiles.com/v1/graphql",VITE_IMGPROXY:"https://imgproxy.teia.rocks",VITE_IPFS_UPLOAD_PROXY:"https://ipfsproxy.teia.rocks",VITE_IPFS_DEFAULT_GATEWAY:"CDN",VITE_TEZOS_RPC:"https://mainnet.teia.rocks",BASE_URL:"/teia-ui/previews/pr-455/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})==null?void 0:ne.MODE)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),oldImpl(re,ee)):newImpl(re,ee)},persist=persistImpl,useModalStore=create$2()(subscribeWithSelector((re,ee)=>({collapsed:!0,visible:!1,message:"",progress:!1,confirm:!0,confirmCallback:()=>ee().close(),show:(ne,ae)=>{re({message:`# ${ne}
${ae||""}`,progress:!1,visible:!0,confirm:!0,confirmCallback:()=>{re({visible:!1})}})},showError(ne,ae){const ce=ee().show;console.error(ae),ae instanceof Error&&ce(`${ne} (Error)`,ae.message),ae instanceof ParametersInvalidBeaconError&&ce(`${ne} (${ae.title})`,ae.description)},setCollapsed:ne=>re({collapsed:ne}),toggleMenu:()=>re({collapsed:!ee().collapsed}),step:(ne,ae,ce)=>{ce&&window.scrollTo(0,0),re({progress:!0,visible:!0,confirm:!1,message:`# ${ne}
${ae}`})},close:()=>{re({visible:!1,progress:!1})}}))),FeedbackComponent=()=>{const[re,ee,ne,ae,ce]=useModalStore(le=>[le.visible,le.message,le.progress,le.confirm,le.confirmCallback]);return jsx$1(AnimatePresence,{children:re&&jsx$1(motion.div,{className:styles$10.container,...fadeIn(),children:jsxs("div",{className:styles$10.content,children:[jsx$1(Markdown,{className:styles$10.message,children:ee}),jsx$1("div",{className:styles$10.loader,children:ne&&jsx$1(Loading,{})}),ae&&jsx$1("div",{className:styles$10.buttons,children:jsx$1(Button,{shadow_box:!0,onClick:()=>ce(),children:"close"})})]})})})},container$z="_container_1y6ng_216",content$3="_content_1y6ng_227",feed$1="_feed_1y6ng_235",styles$_={container:container$z,content:content$3,feed:feed$1};function useTitle(re){reactExports.useEffect(()=>{document.title=re?`${re} - teia`:"teia"},[re])}const footer={mint:"This open-source, experimental dApp is developed and maintained by the Teia Community and powered by the Tezos blockchain.",warning:"use it consciously. visit artists profiles. be careful with copy minters."},mint={supports:"Supports"},about$1={paragraphs:["a collaborative artwork made of artworks, a place for ideas and creative works.","a non-profit, open-source online platform for trading digital assets as OBJKT NFTs.","a collective, aligning under the values of sustainability, accessibility, and equity.","owned and maintained by its community, built and improved by its participants.","Teia is and always will be a work-in-progress.","If you're having trouble with the website, please report an %ISSUE%"]},en={footer,mint,about:about$1};function useLanguage(){return{language:en}}const container$y="_container_mbqkd_216",pinned="_pinned_mbqkd_226",content$2="_content_mbqkd_231",minimal$2="_minimal_mbqkd_256",logo$2="_logo_mbqkd_259",menus="_menus_mbqkd_263",menu_left$2="_menu_left_mbqkd_271",menu_right$1="_menu_right_mbqkd_278",menu_label_row="_menu_label_row_mbqkd_285",address$2="_address_mbqkd_292",copyright="_copyright_mbqkd_313",menuitems="_menuitems_mbqkd_318",state_buttons$1="_state_buttons_mbqkd_322",styles$Z={container:container$y,pinned,content:content$2,minimal:minimal$2,logo:logo$2,menus,menu_left:menu_left$2,menu_right:menu_right$1,menu_label_row,address:address$2,copyright,menuitems,state_buttons:state_buttons$1},walletPreview=re=>{try{return`${re.slice(0,5)}...${re.slice(re.length-5,re.length)}`}catch{return""}},capitalizeFirstLetter=re=>re[0].toUpperCase()+re.slice(1),theme_selection="_theme_selection_8hh8c_216",menu$3="_menu_8hh8c_220",content$1="_content_8hh8c_237",menu_label="_menu_label_8hh8c_248",address$1="_address_8hh8c_261",menu_left$1="_menu_left_8hh8c_267",menu_right="_menu_right_8hh8c_268",disabled$2="_disabled_8hh8c_299",state_buttons="_state_buttons_8hh8c_303",line$4="_line_8hh8c_312",styles$Y={theme_selection,menu:menu$3,content:content$1,menu_label,address:address$1,menu_left:menu_left$1,menu_right,disabled:disabled$2,state_buttons,line:line$4};var lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */lodash.exports;(function(re,ee){(function(){var ne,ae="4.17.21",ce=200,le="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ue="Expected a function",he="Invalid `variable` option passed into `_.template`",fe="__lodash_hash_undefined__",me=500,ge="__lodash_placeholder__",ve=1,ye=2,be=4,Ee=1,Ce=2,Se=1,Te=2,ke=4,Ne=8,Fe=16,De=32,Oe=64,Re=128,Be=256,Le=512,je=30,Ge="...",qe=800,Ue=16,ze=1,He=2,Ye=3,Xe=1/0,We=9007199254740991,Ze=17976931348623157e292,Vt=0/0,Qt=4294967295,Yt=Qt-1,Jt=Qt>>>1,rn=[["ary",Re],["bind",Se],["bindKey",Te],["curry",Ne],["curryRight",Fe],["flip",Le],["partial",De],["partialRight",Oe],["rearg",Be]],nn="[object Arguments]",fn="[object Array]",an="[object AsyncFunction]",un="[object Boolean]",bn="[object Date]",En="[object DOMException]",$n="[object Error]",On="[object Function]",zn="[object GeneratorFunction]",Rn="[object Map]",Ut="[object Number]",tn="[object Null]",dn="[object Object]",xn="[object Promise]",An="[object Proxy]",vn="[object RegExp]",Nn="[object Set]",Gn="[object String]",Wn="[object Symbol]",Vn="[object Undefined]",Hn="[object WeakMap]",hs="[object WeakSet]",Pn="[object ArrayBuffer]",Jn="[object DataView]",gn="[object Float32Array]",cn="[object Float64Array]",Fn="[object Int8Array]",In="[object Int16Array]",cs="[object Int32Array]",Ss="[object Uint8Array]",os="[object Uint8ClampedArray]",_n="[object Uint16Array]",kn="[object Uint32Array]",jn=/\b__p \+= '';/g,Un=/\b(__p \+=) '' \+/g,es=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ds=/&(?:amp|lt|gt|quot|#39);/g,As=/[&<>"']/g,vs=RegExp(ds.source),fs=RegExp(As.source),Ts=/<%-([\s\S]+?)%>/g,Es=/<%([\s\S]+?)%>/g,Is=/<%=([\s\S]+?)%>/g,hr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ls=/^\w*$/,Cr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fr=/[\\^$.*+?()[\]{}|]/g,ti=RegExp(Fr.source),js=/^\s+/,Fs=/\s/,Po=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ni=/\{\n\/\* \[wrapped with (.+)\] \*/,vr=/,? & /,Lo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,yi=/[()=,{}\[\]\/\s]/,zo=/\\(\\)?/g,Vo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gi=/\w*$/,jo=/^[-+]0x[0-9a-f]+$/i,Uo=/^0b[01]+$/i,Go=/^\[object .+?Constructor\]$/,qo=/^0o[0-7]+$/i,Ho=/^(?:0|[1-9]\d*)$/,Wo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,si=/($^)/,Qo=/['\n\r\u2028\u2029\\]/g,ri="\\ud800-\\udfff",Ko="\\u0300-\\u036f",Yo="\\ufe20-\\ufe2f",Xo="\\u20d0-\\u20ff",qi=Ko+Yo+Xo,Hi="\\u2700-\\u27bf",Wi="a-z\\xdf-\\xf6\\xf8-\\xff",Jo="\\xac\\xb1\\xd7\\xf7",nr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xi="\\u2000-\\u206f",Qi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bi="A-Z\\xc0-\\xd6\\xd8-\\xde",Ki="\\ufe0e\\ufe0f",Or=Jo+nr+xi+Qi,Ci="['’]",Zo="["+ri+"]",_i="["+Or+"]",ii="["+qi+"]",Yi="\\d+",Pe="["+Hi+"]",Qe="["+Wi+"]",Kt="[^"+ri+Or+Yi+Hi+Wi+bi+"]",hn="\\ud83c[\\udffb-\\udfff]",wn="(?:"+ii+"|"+hn+")",Mn="[^"+ri+"]",ts="(?:\\ud83c[\\udde6-\\uddff]){2}",ls="[\\ud800-\\udbff][\\udc00-\\udfff]",Cs="["+bi+"]",ks="\\u200d",gc="(?:"+Qe+"|"+Kt+")",Ou="(?:"+Cs+"|"+Kt+")",Ac="(?:"+Ci+"(?:d|ll|m|re|s|t|ve))?",vc="(?:"+Ci+"(?:D|LL|M|RE|S|T|VE))?",yc=wn+"?",xc="["+Ki+"]?",Mu="(?:"+ks+"(?:"+[Mn,ts,ls].join("|")+")"+xc+yc+")*",Bu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",bc=xc+yc+Mu,Lu="(?:"+[Pe,ts,ls].join("|")+")"+bc,zu="(?:"+[Mn+ii+"?",ii,ts,ls,Zo].join("|")+")",Vu=RegExp(Ci,"g"),ju=RegExp(ii,"g"),ea=RegExp(hn+"(?="+hn+")|"+zu+bc,"g"),Uu=RegExp([Cs+"?"+Qe+"+"+Ac+"(?="+[_i,Cs,"$"].join("|")+")",Ou+"+"+vc+"(?="+[_i,Cs+gc,"$"].join("|")+")",Cs+"?"+gc+"+"+Ac,Cs+"+"+vc,Pu,Bu,Yi,Lu].join("|"),"g"),Gu=RegExp("["+ks+ri+qi+Ki+"]"),qu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Hu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wu=-1,bs={};bs[gn]=bs[cn]=bs[Fn]=bs[In]=bs[cs]=bs[Ss]=bs[os]=bs[_n]=bs[kn]=!0,bs[nn]=bs[fn]=bs[Pn]=bs[un]=bs[Jn]=bs[bn]=bs[$n]=bs[On]=bs[Rn]=bs[Ut]=bs[dn]=bs[vn]=bs[Nn]=bs[Gn]=bs[Hn]=!1;var xs={};xs[nn]=xs[fn]=xs[Pn]=xs[Jn]=xs[un]=xs[bn]=xs[gn]=xs[cn]=xs[Fn]=xs[In]=xs[cs]=xs[Rn]=xs[Ut]=xs[dn]=xs[vn]=xs[Nn]=xs[Gn]=xs[Wn]=xs[Ss]=xs[os]=xs[_n]=xs[kn]=!0,xs[$n]=xs[On]=xs[Hn]=!1;var Qu={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ku={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Yu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Xu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ju=parseFloat,Zu=parseInt,Ec=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,ed=typeof self=="object"&&self&&self.Object===Object&&self,Bs=Ec||ed||Function("return this")(),ta=ee&&!ee.nodeType&&ee,Hr=ta&&!0&&re&&!re.nodeType&&re,Cc=Hr&&Hr.exports===ta,na=Cc&&Ec.process,rr=function(){try{var pn=Hr&&Hr.require&&Hr.require("util").types;return pn||na&&na.binding&&na.binding("util")}catch{}}(),wc=rr&&rr.isArrayBuffer,Sc=rr&&rr.isDate,Tc=rr&&rr.isMap,$c=rr&&rr.isRegExp,Ic=rr&&rr.isSet,kc=rr&&rr.isTypedArray;function Ys(pn,Cn,yn){switch(yn.length){case 0:return pn.call(Cn);case 1:return pn.call(Cn,yn[0]);case 2:return pn.call(Cn,yn[0],yn[1]);case 3:return pn.call(Cn,yn[0],yn[1],yn[2])}return pn.apply(Cn,yn)}function nd(pn,Cn,yn,Ln){for(var Xn=-1,ps=pn==null?0:pn.length;++Xn<ps;){var Rs=pn[Xn];Cn(Ln,Rs,yn(Rs),pn)}return Ln}function ir(pn,Cn){for(var yn=-1,Ln=pn==null?0:pn.length;++yn<Ln&&Cn(pn[yn],yn,pn)!==!1;);return pn}function sd(pn,Cn){for(var yn=pn==null?0:pn.length;yn--&&Cn(pn[yn],yn,pn)!==!1;);return pn}function Nc(pn,Cn){for(var yn=-1,Ln=pn==null?0:pn.length;++yn<Ln;)if(!Cn(pn[yn],yn,pn))return!1;return!0}function Mr(pn,Cn){for(var yn=-1,Ln=pn==null?0:pn.length,Xn=0,ps=[];++yn<Ln;){var Rs=pn[yn];Cn(Rs,yn,pn)&&(ps[Xn++]=Rs)}return ps}function Xi(pn,Cn){var yn=pn==null?0:pn.length;return!!yn&&oi(pn,Cn,0)>-1}function sa(pn,Cn,yn){for(var Ln=-1,Xn=pn==null?0:pn.length;++Ln<Xn;)if(yn(Cn,pn[Ln]))return!0;return!1}function _s(pn,Cn){for(var yn=-1,Ln=pn==null?0:pn.length,Xn=Array(Ln);++yn<Ln;)Xn[yn]=Cn(pn[yn],yn,pn);return Xn}function Br(pn,Cn){for(var yn=-1,Ln=Cn.length,Xn=pn.length;++yn<Ln;)pn[Xn+yn]=Cn[yn];return pn}function ra(pn,Cn,yn,Ln){var Xn=-1,ps=pn==null?0:pn.length;for(Ln&&ps&&(yn=pn[++Xn]);++Xn<ps;)yn=Cn(yn,pn[Xn],Xn,pn);return yn}function rd(pn,Cn,yn,Ln){var Xn=pn==null?0:pn.length;for(Ln&&Xn&&(yn=pn[--Xn]);Xn--;)yn=Cn(yn,pn[Xn],Xn,pn);return yn}function ia(pn,Cn){for(var yn=-1,Ln=pn==null?0:pn.length;++yn<Ln;)if(Cn(pn[yn],yn,pn))return!0;return!1}var id=oa("length");function od(pn){return pn.split("")}function ad(pn){return pn.match(Lo)||[]}function Dc(pn,Cn,yn){var Ln;return yn(pn,function(Xn,ps,Rs){if(Cn(Xn,ps,Rs))return Ln=ps,!1}),Ln}function Ji(pn,Cn,yn,Ln){for(var Xn=pn.length,ps=yn+(Ln?1:-1);Ln?ps--:++ps<Xn;)if(Cn(pn[ps],ps,pn))return ps;return-1}function oi(pn,Cn,yn){return Cn===Cn?xd(pn,Cn,yn):Ji(pn,Fc,yn)}function cd(pn,Cn,yn,Ln){for(var Xn=yn-1,ps=pn.length;++Xn<ps;)if(Ln(pn[Xn],Cn))return Xn;return-1}function Fc(pn){return pn!==pn}function Rc(pn,Cn){var yn=pn==null?0:pn.length;return yn?ca(pn,Cn)/yn:Vt}function oa(pn){return function(Cn){return Cn==null?ne:Cn[pn]}}function aa(pn){return function(Cn){return pn==null?ne:pn[Cn]}}function Oc(pn,Cn,yn,Ln,Xn){return Xn(pn,function(ps,Rs,ys){yn=Ln?(Ln=!1,ps):Cn(yn,ps,Rs,ys)}),yn}function ld(pn,Cn){var yn=pn.length;for(pn.sort(Cn);yn--;)pn[yn]=pn[yn].value;return pn}function ca(pn,Cn){for(var yn,Ln=-1,Xn=pn.length;++Ln<Xn;){var ps=Cn(pn[Ln]);ps!==ne&&(yn=yn===ne?ps:yn+ps)}return yn}function la(pn,Cn){for(var yn=-1,Ln=Array(pn);++yn<pn;)Ln[yn]=Cn(yn);return Ln}function ud(pn,Cn){return _s(Cn,function(yn){return[yn,pn[yn]]})}function Mc(pn){return pn&&pn.slice(0,zc(pn)+1).replace(js,"")}function Xs(pn){return function(Cn){return pn(Cn)}}function ua(pn,Cn){return _s(Cn,function(yn){return pn[yn]})}function wi(pn,Cn){return pn.has(Cn)}function Bc(pn,Cn){for(var yn=-1,Ln=pn.length;++yn<Ln&&oi(Cn,pn[yn],0)>-1;);return yn}function Pc(pn,Cn){for(var yn=pn.length;yn--&&oi(Cn,pn[yn],0)>-1;);return yn}function dd(pn,Cn){for(var yn=pn.length,Ln=0;yn--;)pn[yn]===Cn&&++Ln;return Ln}var hd=aa(Qu),pd=aa(Ku);function md(pn){return"\\"+Xu[pn]}function gd(pn,Cn){return pn==null?ne:pn[Cn]}function ai(pn){return Gu.test(pn)}function Ad(pn){return qu.test(pn)}function vd(pn){for(var Cn,yn=[];!(Cn=pn.next()).done;)yn.push(Cn.value);return yn}function da(pn){var Cn=-1,yn=Array(pn.size);return pn.forEach(function(Ln,Xn){yn[++Cn]=[Xn,Ln]}),yn}function Lc(pn,Cn){return function(yn){return pn(Cn(yn))}}function Pr(pn,Cn){for(var yn=-1,Ln=pn.length,Xn=0,ps=[];++yn<Ln;){var Rs=pn[yn];(Rs===Cn||Rs===ge)&&(pn[yn]=ge,ps[Xn++]=yn)}return ps}function Zi(pn){var Cn=-1,yn=Array(pn.size);return pn.forEach(function(Ln){yn[++Cn]=Ln}),yn}function yd(pn){var Cn=-1,yn=Array(pn.size);return pn.forEach(function(Ln){yn[++Cn]=[Ln,Ln]}),yn}function xd(pn,Cn,yn){for(var Ln=yn-1,Xn=pn.length;++Ln<Xn;)if(pn[Ln]===Cn)return Ln;return-1}function bd(pn,Cn,yn){for(var Ln=yn+1;Ln--;)if(pn[Ln]===Cn)return Ln;return Ln}function ci(pn){return ai(pn)?Cd(pn):id(pn)}function fr(pn){return ai(pn)?wd(pn):od(pn)}function zc(pn){for(var Cn=pn.length;Cn--&&Fs.test(pn.charAt(Cn)););return Cn}var Ed=aa(Yu);function Cd(pn){for(var Cn=ea.lastIndex=0;ea.test(pn);)++Cn;return Cn}function wd(pn){return pn.match(ea)||[]}function Sd(pn){return pn.match(Uu)||[]}var Td=function pn(Cn){Cn=Cn==null?Bs:li.defaults(Bs.Object(),Cn,li.pick(Bs,Hu));var yn=Cn.Array,Ln=Cn.Date,Xn=Cn.Error,ps=Cn.Function,Rs=Cn.Math,ys=Cn.Object,ha=Cn.RegExp,$d=Cn.String,or=Cn.TypeError,eo=yn.prototype,Id=ps.prototype,ui=ys.prototype,to=Cn["__core-js_shared__"],no=Id.toString,gs=ui.hasOwnProperty,kd=0,Vc=function(){var we=/[^.]+$/.exec(to&&to.keys&&to.keys.IE_PROTO||"");return we?"Symbol(src)_1."+we:""}(),so=ui.toString,Nd=no.call(ys),Dd=Bs._,Fd=ha("^"+no.call(gs).replace(Fr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ro=Cc?Cn.Buffer:ne,Lr=Cn.Symbol,io=Cn.Uint8Array,jc=ro?ro.allocUnsafe:ne,oo=Lc(ys.getPrototypeOf,ys),Uc=ys.create,Gc=ui.propertyIsEnumerable,ao=eo.splice,qc=Lr?Lr.isConcatSpreadable:ne,$i=Lr?Lr.iterator:ne,Wr=Lr?Lr.toStringTag:ne,co=function(){try{var we=Jr(ys,"defineProperty");return we({},"",{}),we}catch{}}(),Rd=Cn.clearTimeout!==Bs.clearTimeout&&Cn.clearTimeout,Od=Ln&&Ln.now!==Bs.Date.now&&Ln.now,Md=Cn.setTimeout!==Bs.setTimeout&&Cn.setTimeout,lo=Rs.ceil,uo=Rs.floor,pa=ys.getOwnPropertySymbols,Bd=ro?ro.isBuffer:ne,Hc=Cn.isFinite,Pd=eo.join,Ld=Lc(ys.keys,ys),Os=Rs.max,zs=Rs.min,zd=Ln.now,Vd=Cn.parseInt,Wc=Rs.random,jd=eo.reverse,fa=Jr(Cn,"DataView"),ki=Jr(Cn,"Map"),ma=Jr(Cn,"Promise"),di=Jr(Cn,"Set"),Ni=Jr(Cn,"WeakMap"),Di=Jr(ys,"create"),ho=Ni&&new Ni,hi={},Ud=Zr(fa),Gd=Zr(ki),qd=Zr(ma),Hd=Zr(di),Wd=Zr(Ni),po=Lr?Lr.prototype:ne,Fi=po?po.valueOf:ne,Qc=po?po.toString:ne;function Je(we){if($s(we)&&!Zn(we)&&!(we instanceof as)){if(we instanceof ar)return we;if(gs.call(we,"__wrapped__"))return Xl(we)}return new ar(we)}var pi=function(){function we(){}return function($e){if(!ws($e))return{};if(Uc)return Uc($e);we.prototype=$e;var Me=new we;return we.prototype=ne,Me}}();function fo(){}function ar(we,$e){this.__wrapped__=we,this.__actions__=[],this.__chain__=!!$e,this.__index__=0,this.__values__=ne}Je.templateSettings={escape:Ts,evaluate:Es,interpolate:Is,variable:"",imports:{_:Je}},Je.prototype=fo.prototype,Je.prototype.constructor=Je,ar.prototype=pi(fo.prototype),ar.prototype.constructor=ar;function as(we){this.__wrapped__=we,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Qt,this.__views__=[]}function Qd(){var we=new as(this.__wrapped__);return we.__actions__=Hs(this.__actions__),we.__dir__=this.__dir__,we.__filtered__=this.__filtered__,we.__iteratees__=Hs(this.__iteratees__),we.__takeCount__=this.__takeCount__,we.__views__=Hs(this.__views__),we}function Kd(){if(this.__filtered__){var we=new as(this);we.__dir__=-1,we.__filtered__=!0}else we=this.clone(),we.__dir__*=-1;return we}function Yd(){var we=this.__wrapped__.value(),$e=this.__dir__,Me=Zn(we),Ve=$e<0,Ke=Me?we.length:0,Wt=dp(0,Ke,this.__views__),Xt=Wt.start,sn=Wt.end,mn=sn-Xt,Sn=Ve?sn:Xt-1,Tn=this.__iteratees__,Dn=Tn.length,Bn=0,qn=zs(mn,this.__takeCount__);if(!Me||!Ve&&Ke==mn&&qn==mn)return yl(we,this.__actions__);var Kn=[];e:for(;mn--&&Bn<qn;){Sn+=$e;for(var ss=-1,Yn=we[Sn];++ss<Dn;){var is=Tn[ss],us=is.iteratee,er=is.type,qs=us(Yn);if(er==He)Yn=qs;else if(!qs){if(er==ze)continue e;break e}}Kn[Bn++]=Yn}return Kn}as.prototype=pi(fo.prototype),as.prototype.constructor=as;function Qr(we){var $e=-1,Me=we==null?0:we.length;for(this.clear();++$e<Me;){var Ve=we[$e];this.set(Ve[0],Ve[1])}}function Xd(){this.__data__=Di?Di(null):{},this.size=0}function Jd(we){var $e=this.has(we)&&delete this.__data__[we];return this.size-=$e?1:0,$e}function Zd(we){var $e=this.__data__;if(Di){var Me=$e[we];return Me===fe?ne:Me}return gs.call($e,we)?$e[we]:ne}function eh(we){var $e=this.__data__;return Di?$e[we]!==ne:gs.call($e,we)}function th(we,$e){var Me=this.__data__;return this.size+=this.has(we)?0:1,Me[we]=Di&&$e===ne?fe:$e,this}Qr.prototype.clear=Xd,Qr.prototype.delete=Jd,Qr.prototype.get=Zd,Qr.prototype.has=eh,Qr.prototype.set=th;function _r(we){var $e=-1,Me=we==null?0:we.length;for(this.clear();++$e<Me;){var Ve=we[$e];this.set(Ve[0],Ve[1])}}function nh(){this.__data__=[],this.size=0}function sh(we){var $e=this.__data__,Me=mo($e,we);if(Me<0)return!1;var Ve=$e.length-1;return Me==Ve?$e.pop():ao.call($e,Me,1),--this.size,!0}function rh(we){var $e=this.__data__,Me=mo($e,we);return Me<0?ne:$e[Me][1]}function ih(we){return mo(this.__data__,we)>-1}function oh(we,$e){var Me=this.__data__,Ve=mo(Me,we);return Ve<0?(++this.size,Me.push([we,$e])):Me[Ve][1]=$e,this}_r.prototype.clear=nh,_r.prototype.delete=sh,_r.prototype.get=rh,_r.prototype.has=ih,_r.prototype.set=oh;function wr(we){var $e=-1,Me=we==null?0:we.length;for(this.clear();++$e<Me;){var Ve=we[$e];this.set(Ve[0],Ve[1])}}function ah(){this.size=0,this.__data__={hash:new Qr,map:new(ki||_r),string:new Qr}}function ch(we){var $e=$o(this,we).delete(we);return this.size-=$e?1:0,$e}function lh(we){return $o(this,we).get(we)}function uh(we){return $o(this,we).has(we)}function dh(we,$e){var Me=$o(this,we),Ve=Me.size;return Me.set(we,$e),this.size+=Me.size==Ve?0:1,this}wr.prototype.clear=ah,wr.prototype.delete=ch,wr.prototype.get=lh,wr.prototype.has=uh,wr.prototype.set=dh;function Kr(we){var $e=-1,Me=we==null?0:we.length;for(this.__data__=new wr;++$e<Me;)this.add(we[$e])}function hh(we){return this.__data__.set(we,fe),this}function ph(we){return this.__data__.has(we)}Kr.prototype.add=Kr.prototype.push=hh,Kr.prototype.has=ph;function mr(we){var $e=this.__data__=new _r(we);this.size=$e.size}function fh(){this.__data__=new _r,this.size=0}function mh(we){var $e=this.__data__,Me=$e.delete(we);return this.size=$e.size,Me}function gh(we){return this.__data__.get(we)}function Ah(we){return this.__data__.has(we)}function vh(we,$e){var Me=this.__data__;if(Me instanceof _r){var Ve=Me.__data__;if(!ki||Ve.length<ce-1)return Ve.push([we,$e]),this.size=++Me.size,this;Me=this.__data__=new wr(Ve)}return Me.set(we,$e),this.size=Me.size,this}mr.prototype.clear=fh,mr.prototype.delete=mh,mr.prototype.get=gh,mr.prototype.has=Ah,mr.prototype.set=vh;function Kc(we,$e){var Me=Zn(we),Ve=!Me&&ei(we),Ke=!Me&&!Ve&&Gr(we),Wt=!Me&&!Ve&&!Ke&&Ai(we),Xt=Me||Ve||Ke||Wt,sn=Xt?la(we.length,$d):[],mn=sn.length;for(var Sn in we)($e||gs.call(we,Sn))&&!(Xt&&(Sn=="length"||Ke&&(Sn=="offset"||Sn=="parent")||Wt&&(Sn=="buffer"||Sn=="byteLength"||Sn=="byteOffset")||Ir(Sn,mn)))&&sn.push(Sn);return sn}function Yc(we){var $e=we.length;return $e?we[Ta(0,$e-1)]:ne}function yh(we,$e){return Io(Hs(we),Yr($e,0,we.length))}function xh(we){return Io(Hs(we))}function ga(we,$e,Me){(Me!==ne&&!gr(we[$e],Me)||Me===ne&&!($e in we))&&Sr(we,$e,Me)}function Ri(we,$e,Me){var Ve=we[$e];(!(gs.call(we,$e)&&gr(Ve,Me))||Me===ne&&!($e in we))&&Sr(we,$e,Me)}function mo(we,$e){for(var Me=we.length;Me--;)if(gr(we[Me][0],$e))return Me;return-1}function bh(we,$e,Me,Ve){return zr(we,function(Ke,Wt,Xt){$e(Ve,Ke,Me(Ke),Xt)}),Ve}function Xc(we,$e){return we&&br($e,Ms($e),we)}function Eh(we,$e){return we&&br($e,Qs($e),we)}function Sr(we,$e,Me){$e=="__proto__"&&co?co(we,$e,{configurable:!0,enumerable:!0,value:Me,writable:!0}):we[$e]=Me}function Aa(we,$e){for(var Me=-1,Ve=$e.length,Ke=yn(Ve),Wt=we==null;++Me<Ve;)Ke[Me]=Wt?ne:Ja(we,$e[Me]);return Ke}function Yr(we,$e,Me){return we===we&&(Me!==ne&&(we=we<=Me?we:Me),$e!==ne&&(we=we>=$e?we:$e)),we}function cr(we,$e,Me,Ve,Ke,Wt){var Xt,sn=$e&ve,mn=$e&ye,Sn=$e&be;if(Me&&(Xt=Ke?Me(we,Ve,Ke,Wt):Me(we)),Xt!==ne)return Xt;if(!ws(we))return we;var Tn=Zn(we);if(Tn){if(Xt=pp(we),!sn)return Hs(we,Xt)}else{var Dn=Vs(we),Bn=Dn==On||Dn==zn;if(Gr(we))return El(we,sn);if(Dn==dn||Dn==nn||Bn&&!Ke){if(Xt=mn||Bn?{}:jl(we),!sn)return mn?tp(we,Eh(Xt,we)):ep(we,Xc(Xt,we))}else{if(!xs[Dn])return Ke?we:{};Xt=fp(we,Dn,sn)}}Wt||(Wt=new mr);var qn=Wt.get(we);if(qn)return qn;Wt.set(we,Xt),Au(we)?we.forEach(function(Yn){Xt.add(cr(Yn,$e,Me,Yn,we,Wt))}):mu(we)&&we.forEach(function(Yn,is){Xt.set(is,cr(Yn,$e,Me,is,we,Wt))});var Kn=Sn?mn?Pa:Ba:mn?Qs:Ms,ss=Tn?ne:Kn(we);return ir(ss||we,function(Yn,is){ss&&(is=Yn,Yn=we[is]),Ri(Xt,is,cr(Yn,$e,Me,is,we,Wt))}),Xt}function Ch(we){var $e=Ms(we);return function(Me){return Jc(Me,we,$e)}}function Jc(we,$e,Me){var Ve=Me.length;if(we==null)return!Ve;for(we=ys(we);Ve--;){var Ke=Me[Ve],Wt=$e[Ke],Xt=we[Ke];if(Xt===ne&&!(Ke in we)||!Wt(Xt))return!1}return!0}function Zc(we,$e,Me){if(typeof we!="function")throw new or(ue);return ji(function(){we.apply(ne,Me)},$e)}function Oi(we,$e,Me,Ve){var Ke=-1,Wt=Xi,Xt=!0,sn=we.length,mn=[],Sn=$e.length;if(!sn)return mn;Me&&($e=_s($e,Xs(Me))),Ve?(Wt=sa,Xt=!1):$e.length>=ce&&(Wt=wi,Xt=!1,$e=new Kr($e));e:for(;++Ke<sn;){var Tn=we[Ke],Dn=Me==null?Tn:Me(Tn);if(Tn=Ve||Tn!==0?Tn:0,Xt&&Dn===Dn){for(var Bn=Sn;Bn--;)if($e[Bn]===Dn)continue e;mn.push(Tn)}else Wt($e,Dn,Ve)||mn.push(Tn)}return mn}var zr=$l(xr),el=$l(ya,!0);function wh(we,$e){var Me=!0;return zr(we,function(Ve,Ke,Wt){return Me=!!$e(Ve,Ke,Wt),Me}),Me}function go(we,$e,Me){for(var Ve=-1,Ke=we.length;++Ve<Ke;){var Wt=we[Ve],Xt=$e(Wt);if(Xt!=null&&(sn===ne?Xt===Xt&&!Zs(Xt):Me(Xt,sn)))var sn=Xt,mn=Wt}return mn}function Sh(we,$e,Me,Ve){var Ke=we.length;for(Me=ns(Me),Me<0&&(Me=-Me>Ke?0:Ke+Me),Ve=Ve===ne||Ve>Ke?Ke:ns(Ve),Ve<0&&(Ve+=Ke),Ve=Me>Ve?0:yu(Ve);Me<Ve;)we[Me++]=$e;return we}function tl(we,$e){var Me=[];return zr(we,function(Ve,Ke,Wt){$e(Ve,Ke,Wt)&&Me.push(Ve)}),Me}function Ps(we,$e,Me,Ve,Ke){var Wt=-1,Xt=we.length;for(Me||(Me=gp),Ke||(Ke=[]);++Wt<Xt;){var sn=we[Wt];$e>0&&Me(sn)?$e>1?Ps(sn,$e-1,Me,Ve,Ke):Br(Ke,sn):Ve||(Ke[Ke.length]=sn)}return Ke}var va=Il(),nl=Il(!0);function xr(we,$e){return we&&va(we,$e,Ms)}function ya(we,$e){return we&&nl(we,$e,Ms)}function Ao(we,$e){return Mr($e,function(Me){return kr(we[Me])})}function Xr(we,$e){$e=jr($e,we);for(var Me=0,Ve=$e.length;we!=null&&Me<Ve;)we=we[Er($e[Me++])];return Me&&Me==Ve?we:ne}function sl(we,$e,Me){var Ve=$e(we);return Zn(we)?Ve:Br(Ve,Me(we))}function Us(we){return we==null?we===ne?Vn:tn:Wr&&Wr in ys(we)?up(we):Cp(we)}function xa(we,$e){return we>$e}function Th(we,$e){return we!=null&&gs.call(we,$e)}function $h(we,$e){return we!=null&&$e in ys(we)}function Ih(we,$e,Me){return we>=zs($e,Me)&&we<Os($e,Me)}function ba(we,$e,Me){for(var Ve=Me?sa:Xi,Ke=we[0].length,Wt=we.length,Xt=Wt,sn=yn(Wt),mn=1/0,Sn=[];Xt--;){var Tn=we[Xt];Xt&&$e&&(Tn=_s(Tn,Xs($e))),mn=zs(Tn.length,mn),sn[Xt]=!Me&&($e||Ke>=120&&Tn.length>=120)?new Kr(Xt&&Tn):ne}Tn=we[0];var Dn=-1,Bn=sn[0];e:for(;++Dn<Ke&&Sn.length<mn;){var qn=Tn[Dn],Kn=$e?$e(qn):qn;if(qn=Me||qn!==0?qn:0,!(Bn?wi(Bn,Kn):Ve(Sn,Kn,Me))){for(Xt=Wt;--Xt;){var ss=sn[Xt];if(!(ss?wi(ss,Kn):Ve(we[Xt],Kn,Me)))continue e}Bn&&Bn.push(Kn),Sn.push(qn)}}return Sn}function kh(we,$e,Me,Ve){return xr(we,function(Ke,Wt,Xt){$e(Ve,Me(Ke),Wt,Xt)}),Ve}function Mi(we,$e,Me){$e=jr($e,we),we=Hl(we,$e);var Ve=we==null?we:we[Er(ur($e))];return Ve==null?ne:Ys(Ve,we,Me)}function rl(we){return $s(we)&&Us(we)==nn}function Nh(we){return $s(we)&&Us(we)==Pn}function Dh(we){return $s(we)&&Us(we)==bn}function Bi(we,$e,Me,Ve,Ke){return we===$e?!0:we==null||$e==null||!$s(we)&&!$s($e)?we!==we&&$e!==$e:Fh(we,$e,Me,Ve,Bi,Ke)}function Fh(we,$e,Me,Ve,Ke,Wt){var Xt=Zn(we),sn=Zn($e),mn=Xt?fn:Vs(we),Sn=sn?fn:Vs($e);mn=mn==nn?dn:mn,Sn=Sn==nn?dn:Sn;var Tn=mn==dn,Dn=Sn==dn,Bn=mn==Sn;if(Bn&&Gr(we)){if(!Gr($e))return!1;Xt=!0,Tn=!1}if(Bn&&!Tn)return Wt||(Wt=new mr),Xt||Ai(we)?Ll(we,$e,Me,Ve,Ke,Wt):cp(we,$e,mn,Me,Ve,Ke,Wt);if(!(Me&Ee)){var qn=Tn&&gs.call(we,"__wrapped__"),Kn=Dn&&gs.call($e,"__wrapped__");if(qn||Kn){var ss=qn?we.value():we,Yn=Kn?$e.value():$e;return Wt||(Wt=new mr),Ke(ss,Yn,Me,Ve,Wt)}}return Bn?(Wt||(Wt=new mr),lp(we,$e,Me,Ve,Ke,Wt)):!1}function Rh(we){return $s(we)&&Vs(we)==Rn}function Ea(we,$e,Me,Ve){var Ke=Me.length,Wt=Ke,Xt=!Ve;if(we==null)return!Wt;for(we=ys(we);Ke--;){var sn=Me[Ke];if(Xt&&sn[2]?sn[1]!==we[sn[0]]:!(sn[0]in we))return!1}for(;++Ke<Wt;){sn=Me[Ke];var mn=sn[0],Sn=we[mn],Tn=sn[1];if(Xt&&sn[2]){if(Sn===ne&&!(mn in we))return!1}else{var Dn=new mr;if(Ve)var Bn=Ve(Sn,Tn,mn,we,$e,Dn);if(!(Bn===ne?Bi(Tn,Sn,Ee|Ce,Ve,Dn):Bn))return!1}}return!0}function il(we){if(!ws(we)||vp(we))return!1;var $e=kr(we)?Fd:Go;return $e.test(Zr(we))}function Oh(we){return $s(we)&&Us(we)==vn}function Mh(we){return $s(we)&&Vs(we)==Nn}function Bh(we){return $s(we)&&Oo(we.length)&&!!bs[Us(we)]}function ol(we){return typeof we=="function"?we:we==null?Ks:typeof we=="object"?Zn(we)?ll(we[0],we[1]):cl(we):ku(we)}function Ca(we){if(!Vi(we))return Ld(we);var $e=[];for(var Me in ys(we))gs.call(we,Me)&&Me!="constructor"&&$e.push(Me);return $e}function Ph(we){if(!ws(we))return Ep(we);var $e=Vi(we),Me=[];for(var Ve in we)Ve=="constructor"&&($e||!gs.call(we,Ve))||Me.push(Ve);return Me}function wa(we,$e){return we<$e}function al(we,$e){var Me=-1,Ve=Ws(we)?yn(we.length):[];return zr(we,function(Ke,Wt,Xt){Ve[++Me]=$e(Ke,Wt,Xt)}),Ve}function cl(we){var $e=za(we);return $e.length==1&&$e[0][2]?Gl($e[0][0],$e[0][1]):function(Me){return Me===we||Ea(Me,we,$e)}}function ll(we,$e){return ja(we)&&Ul($e)?Gl(Er(we),$e):function(Me){var Ve=Ja(Me,we);return Ve===ne&&Ve===$e?Za(Me,we):Bi($e,Ve,Ee|Ce)}}function vo(we,$e,Me,Ve,Ke){we!==$e&&va($e,function(Wt,Xt){if(Ke||(Ke=new mr),ws(Wt))Lh(we,$e,Xt,Me,vo,Ve,Ke);else{var sn=Ve?Ve(Ga(we,Xt),Wt,Xt+"",we,$e,Ke):ne;sn===ne&&(sn=Wt),ga(we,Xt,sn)}},Qs)}function Lh(we,$e,Me,Ve,Ke,Wt,Xt){var sn=Ga(we,Me),mn=Ga($e,Me),Sn=Xt.get(mn);if(Sn){ga(we,Me,Sn);return}var Tn=Wt?Wt(sn,mn,Me+"",we,$e,Xt):ne,Dn=Tn===ne;if(Dn){var Bn=Zn(mn),qn=!Bn&&Gr(mn),Kn=!Bn&&!qn&&Ai(mn);Tn=mn,Bn||qn||Kn?Zn(sn)?Tn=sn:Ns(sn)?Tn=Hs(sn):qn?(Dn=!1,Tn=El(mn,!0)):Kn?(Dn=!1,Tn=Cl(mn,!0)):Tn=[]:Ui(mn)||ei(mn)?(Tn=sn,ei(sn)?Tn=xu(sn):(!ws(sn)||kr(sn))&&(Tn=jl(mn))):Dn=!1}Dn&&(Xt.set(mn,Tn),Ke(Tn,mn,Ve,Wt,Xt),Xt.delete(mn)),ga(we,Me,Tn)}function ul(we,$e){var Me=we.length;if(Me)return $e+=$e<0?Me:0,Ir($e,Me)?we[$e]:ne}function dl(we,$e,Me){$e.length?$e=_s($e,function(Wt){return Zn(Wt)?function(Xt){return Xr(Xt,Wt.length===1?Wt[0]:Wt)}:Wt}):$e=[Ks];var Ve=-1;$e=_s($e,Xs(Qn()));var Ke=al(we,function(Wt,Xt,sn){var mn=_s($e,function(Sn){return Sn(Wt)});return{criteria:mn,index:++Ve,value:Wt}});return ld(Ke,function(Wt,Xt){return Zh(Wt,Xt,Me)})}function Vh(we,$e){return hl(we,$e,function(Me,Ve){return Za(we,Ve)})}function hl(we,$e,Me){for(var Ve=-1,Ke=$e.length,Wt={};++Ve<Ke;){var Xt=$e[Ve],sn=Xr(we,Xt);Me(sn,Xt)&&Li(Wt,jr(Xt,we),sn)}return Wt}function jh(we){return function($e){return Xr($e,we)}}function Sa(we,$e,Me,Ve){var Ke=Ve?cd:oi,Wt=-1,Xt=$e.length,sn=we;for(we===$e&&($e=Hs($e)),Me&&(sn=_s(we,Xs(Me)));++Wt<Xt;)for(var mn=0,Sn=$e[Wt],Tn=Me?Me(Sn):Sn;(mn=Ke(sn,Tn,mn,Ve))>-1;)sn!==we&&ao.call(sn,mn,1),ao.call(we,mn,1);return we}function pl(we,$e){for(var Me=we?$e.length:0,Ve=Me-1;Me--;){var Ke=$e[Me];if(Me==Ve||Ke!==Wt){var Wt=Ke;Ir(Ke)?ao.call(we,Ke,1):ka(we,Ke)}}return we}function Ta(we,$e){return we+uo(Wc()*($e-we+1))}function Uh(we,$e,Me,Ve){for(var Ke=-1,Wt=Os(lo(($e-we)/(Me||1)),0),Xt=yn(Wt);Wt--;)Xt[Ve?Wt:++Ke]=we,we+=Me;return Xt}function $a(we,$e){var Me="";if(!we||$e<1||$e>We)return Me;do $e%2&&(Me+=we),$e=uo($e/2),$e&&(we+=we);while($e);return Me}function rs(we,$e){return qa(ql(we,$e,Ks),we+"")}function Gh(we){return Yc(vi(we))}function qh(we,$e){var Me=vi(we);return Io(Me,Yr($e,0,Me.length))}function Li(we,$e,Me,Ve){if(!ws(we))return we;$e=jr($e,we);for(var Ke=-1,Wt=$e.length,Xt=Wt-1,sn=we;sn!=null&&++Ke<Wt;){var mn=Er($e[Ke]),Sn=Me;if(mn==="__proto__"||mn==="constructor"||mn==="prototype")return we;if(Ke!=Xt){var Tn=sn[mn];Sn=Ve?Ve(Tn,mn,sn):ne,Sn===ne&&(Sn=ws(Tn)?Tn:Ir($e[Ke+1])?[]:{})}Ri(sn,mn,Sn),sn=sn[mn]}return we}var ml=ho?function(we,$e){return ho.set(we,$e),we}:Ks,Hh=co?function(we,$e){return co(we,"toString",{configurable:!0,enumerable:!1,value:nc($e),writable:!0})}:Ks;function Wh(we){return Io(vi(we))}function lr(we,$e,Me){var Ve=-1,Ke=we.length;$e<0&&($e=-$e>Ke?0:Ke+$e),Me=Me>Ke?Ke:Me,Me<0&&(Me+=Ke),Ke=$e>Me?0:Me-$e>>>0,$e>>>=0;for(var Wt=yn(Ke);++Ve<Ke;)Wt[Ve]=we[Ve+$e];return Wt}function Qh(we,$e){var Me;return zr(we,function(Ve,Ke,Wt){return Me=$e(Ve,Ke,Wt),!Me}),!!Me}function yo(we,$e,Me){var Ve=0,Ke=we==null?Ve:we.length;if(typeof $e=="number"&&$e===$e&&Ke<=Jt){for(;Ve<Ke;){var Wt=Ve+Ke>>>1,Xt=we[Wt];Xt!==null&&!Zs(Xt)&&(Me?Xt<=$e:Xt<$e)?Ve=Wt+1:Ke=Wt}return Ke}return Ia(we,$e,Ks,Me)}function Ia(we,$e,Me,Ve){var Ke=0,Wt=we==null?0:we.length;if(Wt===0)return 0;$e=Me($e);for(var Xt=$e!==$e,sn=$e===null,mn=Zs($e),Sn=$e===ne;Ke<Wt;){var Tn=uo((Ke+Wt)/2),Dn=Me(we[Tn]),Bn=Dn!==ne,qn=Dn===null,Kn=Dn===Dn,ss=Zs(Dn);if(Xt)var Yn=Ve||Kn;else Sn?Yn=Kn&&(Ve||Bn):sn?Yn=Kn&&Bn&&(Ve||!qn):mn?Yn=Kn&&Bn&&!qn&&(Ve||!ss):qn||ss?Yn=!1:Yn=Ve?Dn<=$e:Dn<$e;Yn?Ke=Tn+1:Wt=Tn}return zs(Wt,Yt)}function gl(we,$e){for(var Me=-1,Ve=we.length,Ke=0,Wt=[];++Me<Ve;){var Xt=we[Me],sn=$e?$e(Xt):Xt;if(!Me||!gr(sn,mn)){var mn=sn;Wt[Ke++]=Xt===0?0:Xt}}return Wt}function Al(we){return typeof we=="number"?we:Zs(we)?Vt:+we}function Js(we){if(typeof we=="string")return we;if(Zn(we))return _s(we,Js)+"";if(Zs(we))return Qc?Qc.call(we):"";var $e=we+"";return $e=="0"&&1/we==-Xe?"-0":$e}function Vr(we,$e,Me){var Ve=-1,Ke=Xi,Wt=we.length,Xt=!0,sn=[],mn=sn;if(Me)Xt=!1,Ke=sa;else if(Wt>=ce){var Sn=$e?null:ip(we);if(Sn)return Zi(Sn);Xt=!1,Ke=wi,mn=new Kr}else mn=$e?[]:sn;e:for(;++Ve<Wt;){var Tn=we[Ve],Dn=$e?$e(Tn):Tn;if(Tn=Me||Tn!==0?Tn:0,Xt&&Dn===Dn){for(var Bn=mn.length;Bn--;)if(mn[Bn]===Dn)continue e;$e&&mn.push(Dn),sn.push(Tn)}else Ke(mn,Dn,Me)||(mn!==sn&&mn.push(Dn),sn.push(Tn))}return sn}function ka(we,$e){return $e=jr($e,we),we=Hl(we,$e),we==null||delete we[Er(ur($e))]}function vl(we,$e,Me,Ve){return Li(we,$e,Me(Xr(we,$e)),Ve)}function xo(we,$e,Me,Ve){for(var Ke=we.length,Wt=Ve?Ke:-1;(Ve?Wt--:++Wt<Ke)&&$e(we[Wt],Wt,we););return Me?lr(we,Ve?0:Wt,Ve?Wt+1:Ke):lr(we,Ve?Wt+1:0,Ve?Ke:Wt)}function yl(we,$e){var Me=we;return Me instanceof as&&(Me=Me.value()),ra($e,function(Ve,Ke){return Ke.func.apply(Ke.thisArg,Br([Ve],Ke.args))},Me)}function Na(we,$e,Me){var Ve=we.length;if(Ve<2)return Ve?Vr(we[0]):[];for(var Ke=-1,Wt=yn(Ve);++Ke<Ve;)for(var Xt=we[Ke],sn=-1;++sn<Ve;)sn!=Ke&&(Wt[Ke]=Oi(Wt[Ke]||Xt,we[sn],$e,Me));return Vr(Ps(Wt,1),$e,Me)}function xl(we,$e,Me){for(var Ve=-1,Ke=we.length,Wt=$e.length,Xt={};++Ve<Ke;){var sn=Ve<Wt?$e[Ve]:ne;Me(Xt,we[Ve],sn)}return Xt}function Da(we){return Ns(we)?we:[]}function Fa(we){return typeof we=="function"?we:Ks}function jr(we,$e){return Zn(we)?we:ja(we,$e)?[we]:Yl(ms(we))}var Kh=rs;function Ur(we,$e,Me){var Ve=we.length;return Me=Me===ne?Ve:Me,!$e&&Me>=Ve?we:lr(we,$e,Me)}var bl=Rd||function(we){return Bs.clearTimeout(we)};function El(we,$e){if($e)return we.slice();var Me=we.length,Ve=jc?jc(Me):new we.constructor(Me);return we.copy(Ve),Ve}function Ra(we){var $e=new we.constructor(we.byteLength);return new io($e).set(new io(we)),$e}function Yh(we,$e){var Me=$e?Ra(we.buffer):we.buffer;return new we.constructor(Me,we.byteOffset,we.byteLength)}function Xh(we){var $e=new we.constructor(we.source,Gi.exec(we));return $e.lastIndex=we.lastIndex,$e}function Jh(we){return Fi?ys(Fi.call(we)):{}}function Cl(we,$e){var Me=$e?Ra(we.buffer):we.buffer;return new we.constructor(Me,we.byteOffset,we.length)}function wl(we,$e){if(we!==$e){var Me=we!==ne,Ve=we===null,Ke=we===we,Wt=Zs(we),Xt=$e!==ne,sn=$e===null,mn=$e===$e,Sn=Zs($e);if(!sn&&!Sn&&!Wt&&we>$e||Wt&&Xt&&mn&&!sn&&!Sn||Ve&&Xt&&mn||!Me&&mn||!Ke)return 1;if(!Ve&&!Wt&&!Sn&&we<$e||Sn&&Me&&Ke&&!Ve&&!Wt||sn&&Me&&Ke||!Xt&&Ke||!mn)return-1}return 0}function Zh(we,$e,Me){for(var Ve=-1,Ke=we.criteria,Wt=$e.criteria,Xt=Ke.length,sn=Me.length;++Ve<Xt;){var mn=wl(Ke[Ve],Wt[Ve]);if(mn){if(Ve>=sn)return mn;var Sn=Me[Ve];return mn*(Sn=="desc"?-1:1)}}return we.index-$e.index}function Sl(we,$e,Me,Ve){for(var Ke=-1,Wt=we.length,Xt=Me.length,sn=-1,mn=$e.length,Sn=Os(Wt-Xt,0),Tn=yn(mn+Sn),Dn=!Ve;++sn<mn;)Tn[sn]=$e[sn];for(;++Ke<Xt;)(Dn||Ke<Wt)&&(Tn[Me[Ke]]=we[Ke]);for(;Sn--;)Tn[sn++]=we[Ke++];return Tn}function Tl(we,$e,Me,Ve){for(var Ke=-1,Wt=we.length,Xt=-1,sn=Me.length,mn=-1,Sn=$e.length,Tn=Os(Wt-sn,0),Dn=yn(Tn+Sn),Bn=!Ve;++Ke<Tn;)Dn[Ke]=we[Ke];for(var qn=Ke;++mn<Sn;)Dn[qn+mn]=$e[mn];for(;++Xt<sn;)(Bn||Ke<Wt)&&(Dn[qn+Me[Xt]]=we[Ke++]);return Dn}function Hs(we,$e){var Me=-1,Ve=we.length;for($e||($e=yn(Ve));++Me<Ve;)$e[Me]=we[Me];return $e}function br(we,$e,Me,Ve){var Ke=!Me;Me||(Me={});for(var Wt=-1,Xt=$e.length;++Wt<Xt;){var sn=$e[Wt],mn=Ve?Ve(Me[sn],we[sn],sn,Me,we):ne;mn===ne&&(mn=we[sn]),Ke?Sr(Me,sn,mn):Ri(Me,sn,mn)}return Me}function ep(we,$e){return br(we,Va(we),$e)}function tp(we,$e){return br(we,zl(we),$e)}function bo(we,$e){return function(Me,Ve){var Ke=Zn(Me)?nd:bh,Wt=$e?$e():{};return Ke(Me,we,Qn(Ve,2),Wt)}}function fi(we){return rs(function($e,Me){var Ve=-1,Ke=Me.length,Wt=Ke>1?Me[Ke-1]:ne,Xt=Ke>2?Me[2]:ne;for(Wt=we.length>3&&typeof Wt=="function"?(Ke--,Wt):ne,Xt&&Gs(Me[0],Me[1],Xt)&&(Wt=Ke<3?ne:Wt,Ke=1),$e=ys($e);++Ve<Ke;){var sn=Me[Ve];sn&&we($e,sn,Ve,Wt)}return $e})}function $l(we,$e){return function(Me,Ve){if(Me==null)return Me;if(!Ws(Me))return we(Me,Ve);for(var Ke=Me.length,Wt=$e?Ke:-1,Xt=ys(Me);($e?Wt--:++Wt<Ke)&&Ve(Xt[Wt],Wt,Xt)!==!1;);return Me}}function Il(we){return function($e,Me,Ve){for(var Ke=-1,Wt=ys($e),Xt=Ve($e),sn=Xt.length;sn--;){var mn=Xt[we?sn:++Ke];if(Me(Wt[mn],mn,Wt)===!1)break}return $e}}function np(we,$e,Me){var Ve=$e&Se,Ke=zi(we);function Wt(){var Xt=this&&this!==Bs&&this instanceof Wt?Ke:we;return Xt.apply(Ve?Me:this,arguments)}return Wt}function kl(we){return function($e){$e=ms($e);var Me=ai($e)?fr($e):ne,Ve=Me?Me[0]:$e.charAt(0),Ke=Me?Ur(Me,1).join(""):$e.slice(1);return Ve[we]()+Ke}}function mi(we){return function($e){return ra($u(Tu($e).replace(Vu,"")),we,"")}}function zi(we){return function(){var $e=arguments;switch($e.length){case 0:return new we;case 1:return new we($e[0]);case 2:return new we($e[0],$e[1]);case 3:return new we($e[0],$e[1],$e[2]);case 4:return new we($e[0],$e[1],$e[2],$e[3]);case 5:return new we($e[0],$e[1],$e[2],$e[3],$e[4]);case 6:return new we($e[0],$e[1],$e[2],$e[3],$e[4],$e[5]);case 7:return new we($e[0],$e[1],$e[2],$e[3],$e[4],$e[5],$e[6])}var Me=pi(we.prototype),Ve=we.apply(Me,$e);return ws(Ve)?Ve:Me}}function sp(we,$e,Me){var Ve=zi(we);function Ke(){for(var Wt=arguments.length,Xt=yn(Wt),sn=Wt,mn=gi(Ke);sn--;)Xt[sn]=arguments[sn];var Sn=Wt<3&&Xt[0]!==mn&&Xt[Wt-1]!==mn?[]:Pr(Xt,mn);if(Wt-=Sn.length,Wt<Me)return Ol(we,$e,Eo,Ke.placeholder,ne,Xt,Sn,ne,ne,Me-Wt);var Tn=this&&this!==Bs&&this instanceof Ke?Ve:we;return Ys(Tn,this,Xt)}return Ke}function Nl(we){return function($e,Me,Ve){var Ke=ys($e);if(!Ws($e)){var Wt=Qn(Me,3);$e=Ms($e),Me=function(sn){return Wt(Ke[sn],sn,Ke)}}var Xt=we($e,Me,Ve);return Xt>-1?Ke[Wt?$e[Xt]:Xt]:ne}}function Dl(we){return $r(function($e){var Me=$e.length,Ve=Me,Ke=ar.prototype.thru;for(we&&$e.reverse();Ve--;){var Wt=$e[Ve];if(typeof Wt!="function")throw new or(ue);if(Ke&&!Xt&&To(Wt)=="wrapper")var Xt=new ar([],!0)}for(Ve=Xt?Ve:Me;++Ve<Me;){Wt=$e[Ve];var sn=To(Wt),mn=sn=="wrapper"?La(Wt):ne;mn&&Ua(mn[0])&&mn[1]==(Re|Ne|De|Be)&&!mn[4].length&&mn[9]==1?Xt=Xt[To(mn[0])].apply(Xt,mn[3]):Xt=Wt.length==1&&Ua(Wt)?Xt[sn]():Xt.thru(Wt)}return function(){var Sn=arguments,Tn=Sn[0];if(Xt&&Sn.length==1&&Zn(Tn))return Xt.plant(Tn).value();for(var Dn=0,Bn=Me?$e[Dn].apply(this,Sn):Tn;++Dn<Me;)Bn=$e[Dn].call(this,Bn);return Bn}})}function Eo(we,$e,Me,Ve,Ke,Wt,Xt,sn,mn,Sn){var Tn=$e&Re,Dn=$e&Se,Bn=$e&Te,qn=$e&(Ne|Fe),Kn=$e&Le,ss=Bn?ne:zi(we);function Yn(){for(var is=arguments.length,us=yn(is),er=is;er--;)us[er]=arguments[er];if(qn)var qs=gi(Yn),tr=dd(us,qs);if(Ve&&(us=Sl(us,Ve,Ke,qn)),Wt&&(us=Tl(us,Wt,Xt,qn)),is-=tr,qn&&is<Sn){var Ds=Pr(us,qs);return Ol(we,$e,Eo,Yn.placeholder,Me,us,Ds,sn,mn,Sn-is)}var Ar=Dn?Me:this,Dr=Bn?Ar[we]:we;return is=us.length,sn?us=_p(us,sn):Kn&&is>1&&us.reverse(),Tn&&mn<is&&(us.length=mn),this&&this!==Bs&&this instanceof Yn&&(Dr=ss||zi(Dr)),Dr.apply(Ar,us)}return Yn}function Fl(we,$e){return function(Me,Ve){return kh(Me,we,$e(Ve),{})}}function Co(we,$e){return function(Me,Ve){var Ke;if(Me===ne&&Ve===ne)return $e;if(Me!==ne&&(Ke=Me),Ve!==ne){if(Ke===ne)return Ve;typeof Me=="string"||typeof Ve=="string"?(Me=Js(Me),Ve=Js(Ve)):(Me=Al(Me),Ve=Al(Ve)),Ke=we(Me,Ve)}return Ke}}function Oa(we){return $r(function($e){return $e=_s($e,Xs(Qn())),rs(function(Me){var Ve=this;return we($e,function(Ke){return Ys(Ke,Ve,Me)})})})}function wo(we,$e){$e=$e===ne?" ":Js($e);var Me=$e.length;if(Me<2)return Me?$a($e,we):$e;var Ve=$a($e,lo(we/ci($e)));return ai($e)?Ur(fr(Ve),0,we).join(""):Ve.slice(0,we)}function rp(we,$e,Me,Ve){var Ke=$e&Se,Wt=zi(we);function Xt(){for(var sn=-1,mn=arguments.length,Sn=-1,Tn=Ve.length,Dn=yn(Tn+mn),Bn=this&&this!==Bs&&this instanceof Xt?Wt:we;++Sn<Tn;)Dn[Sn]=Ve[Sn];for(;mn--;)Dn[Sn++]=arguments[++sn];return Ys(Bn,Ke?Me:this,Dn)}return Xt}function Rl(we){return function($e,Me,Ve){return Ve&&typeof Ve!="number"&&Gs($e,Me,Ve)&&(Me=Ve=ne),$e=Nr($e),Me===ne?(Me=$e,$e=0):Me=Nr(Me),Ve=Ve===ne?$e<Me?1:-1:Nr(Ve),Uh($e,Me,Ve,we)}}function So(we){return function($e,Me){return typeof $e=="string"&&typeof Me=="string"||($e=dr($e),Me=dr(Me)),we($e,Me)}}function Ol(we,$e,Me,Ve,Ke,Wt,Xt,sn,mn,Sn){var Tn=$e&Ne,Dn=Tn?Xt:ne,Bn=Tn?ne:Xt,qn=Tn?Wt:ne,Kn=Tn?ne:Wt;$e|=Tn?De:Oe,$e&=~(Tn?Oe:De),$e&ke||($e&=~(Se|Te));var ss=[we,$e,Ke,qn,Dn,Kn,Bn,sn,mn,Sn],Yn=Me.apply(ne,ss);return Ua(we)&&Wl(Yn,ss),Yn.placeholder=Ve,Ql(Yn,we,$e)}function Ma(we){var $e=Rs[we];return function(Me,Ve){if(Me=dr(Me),Ve=Ve==null?0:zs(ns(Ve),292),Ve&&Hc(Me)){var Ke=(ms(Me)+"e").split("e"),Wt=$e(Ke[0]+"e"+(+Ke[1]+Ve));return Ke=(ms(Wt)+"e").split("e"),+(Ke[0]+"e"+(+Ke[1]-Ve))}return $e(Me)}}var ip=di&&1/Zi(new di([,-0]))[1]==Xe?function(we){return new di(we)}:ic;function Ml(we){return function($e){var Me=Vs($e);return Me==Rn?da($e):Me==Nn?yd($e):ud($e,we($e))}}function Tr(we,$e,Me,Ve,Ke,Wt,Xt,sn){var mn=$e&Te;if(!mn&&typeof we!="function")throw new or(ue);var Sn=Ve?Ve.length:0;if(Sn||($e&=~(De|Oe),Ve=Ke=ne),Xt=Xt===ne?Xt:Os(ns(Xt),0),sn=sn===ne?sn:ns(sn),Sn-=Ke?Ke.length:0,$e&Oe){var Tn=Ve,Dn=Ke;Ve=Ke=ne}var Bn=mn?ne:La(we),qn=[we,$e,Me,Ve,Ke,Tn,Dn,Wt,Xt,sn];if(Bn&&bp(qn,Bn),we=qn[0],$e=qn[1],Me=qn[2],Ve=qn[3],Ke=qn[4],sn=qn[9]=qn[9]===ne?mn?0:we.length:Os(qn[9]-Sn,0),!sn&&$e&(Ne|Fe)&&($e&=~(Ne|Fe)),!$e||$e==Se)var Kn=np(we,$e,Me);else $e==Ne||$e==Fe?Kn=sp(we,$e,sn):($e==De||$e==(Se|De))&&!Ke.length?Kn=rp(we,$e,Me,Ve):Kn=Eo.apply(ne,qn);var ss=Bn?ml:Wl;return Ql(ss(Kn,qn),we,$e)}function Bl(we,$e,Me,Ve){return we===ne||gr(we,ui[Me])&&!gs.call(Ve,Me)?$e:we}function Pl(we,$e,Me,Ve,Ke,Wt){return ws(we)&&ws($e)&&(Wt.set($e,we),vo(we,$e,ne,Pl,Wt),Wt.delete($e)),we}function ap(we){return Ui(we)?ne:we}function Ll(we,$e,Me,Ve,Ke,Wt){var Xt=Me&Ee,sn=we.length,mn=$e.length;if(sn!=mn&&!(Xt&&mn>sn))return!1;var Sn=Wt.get(we),Tn=Wt.get($e);if(Sn&&Tn)return Sn==$e&&Tn==we;var Dn=-1,Bn=!0,qn=Me&Ce?new Kr:ne;for(Wt.set(we,$e),Wt.set($e,we);++Dn<sn;){var Kn=we[Dn],ss=$e[Dn];if(Ve)var Yn=Xt?Ve(ss,Kn,Dn,$e,we,Wt):Ve(Kn,ss,Dn,we,$e,Wt);if(Yn!==ne){if(Yn)continue;Bn=!1;break}if(qn){if(!ia($e,function(is,us){if(!wi(qn,us)&&(Kn===is||Ke(Kn,is,Me,Ve,Wt)))return qn.push(us)})){Bn=!1;break}}else if(!(Kn===ss||Ke(Kn,ss,Me,Ve,Wt))){Bn=!1;break}}return Wt.delete(we),Wt.delete($e),Bn}function cp(we,$e,Me,Ve,Ke,Wt,Xt){switch(Me){case Jn:if(we.byteLength!=$e.byteLength||we.byteOffset!=$e.byteOffset)return!1;we=we.buffer,$e=$e.buffer;case Pn:return!(we.byteLength!=$e.byteLength||!Wt(new io(we),new io($e)));case un:case bn:case Ut:return gr(+we,+$e);case $n:return we.name==$e.name&&we.message==$e.message;case vn:case Gn:return we==$e+"";case Rn:var sn=da;case Nn:var mn=Ve&Ee;if(sn||(sn=Zi),we.size!=$e.size&&!mn)return!1;var Sn=Xt.get(we);if(Sn)return Sn==$e;Ve|=Ce,Xt.set(we,$e);var Tn=Ll(sn(we),sn($e),Ve,Ke,Wt,Xt);return Xt.delete(we),Tn;case Wn:if(Fi)return Fi.call(we)==Fi.call($e)}return!1}function lp(we,$e,Me,Ve,Ke,Wt){var Xt=Me&Ee,sn=Ba(we),mn=sn.length,Sn=Ba($e),Tn=Sn.length;if(mn!=Tn&&!Xt)return!1;for(var Dn=mn;Dn--;){var Bn=sn[Dn];if(!(Xt?Bn in $e:gs.call($e,Bn)))return!1}var qn=Wt.get(we),Kn=Wt.get($e);if(qn&&Kn)return qn==$e&&Kn==we;var ss=!0;Wt.set(we,$e),Wt.set($e,we);for(var Yn=Xt;++Dn<mn;){Bn=sn[Dn];var is=we[Bn],us=$e[Bn];if(Ve)var er=Xt?Ve(us,is,Bn,$e,we,Wt):Ve(is,us,Bn,we,$e,Wt);if(!(er===ne?is===us||Ke(is,us,Me,Ve,Wt):er)){ss=!1;break}Yn||(Yn=Bn=="constructor")}if(ss&&!Yn){var qs=we.constructor,tr=$e.constructor;qs!=tr&&"constructor"in we&&"constructor"in $e&&!(typeof qs=="function"&&qs instanceof qs&&typeof tr=="function"&&tr instanceof tr)&&(ss=!1)}return Wt.delete(we),Wt.delete($e),ss}function $r(we){return qa(ql(we,ne,eu),we+"")}function Ba(we){return sl(we,Ms,Va)}function Pa(we){return sl(we,Qs,zl)}var La=ho?function(we){return ho.get(we)}:ic;function To(we){for(var $e=we.name+"",Me=hi[$e],Ve=gs.call(hi,$e)?Me.length:0;Ve--;){var Ke=Me[Ve],Wt=Ke.func;if(Wt==null||Wt==we)return Ke.name}return $e}function gi(we){var $e=gs.call(Je,"placeholder")?Je:we;return $e.placeholder}function Qn(){var we=Je.iteratee||sc;return we=we===sc?ol:we,arguments.length?we(arguments[0],arguments[1]):we}function $o(we,$e){var Me=we.__data__;return Ap($e)?Me[typeof $e=="string"?"string":"hash"]:Me.map}function za(we){for(var $e=Ms(we),Me=$e.length;Me--;){var Ve=$e[Me],Ke=we[Ve];$e[Me]=[Ve,Ke,Ul(Ke)]}return $e}function Jr(we,$e){var Me=gd(we,$e);return il(Me)?Me:ne}function up(we){var $e=gs.call(we,Wr),Me=we[Wr];try{we[Wr]=ne;var Ve=!0}catch{}var Ke=so.call(we);return Ve&&($e?we[Wr]=Me:delete we[Wr]),Ke}var Va=pa?function(we){return we==null?[]:(we=ys(we),Mr(pa(we),function($e){return Gc.call(we,$e)}))}:oc,zl=pa?function(we){for(var $e=[];we;)Br($e,Va(we)),we=oo(we);return $e}:oc,Vs=Us;(fa&&Vs(new fa(new ArrayBuffer(1)))!=Jn||ki&&Vs(new ki)!=Rn||ma&&Vs(ma.resolve())!=xn||di&&Vs(new di)!=Nn||Ni&&Vs(new Ni)!=Hn)&&(Vs=function(we){var $e=Us(we),Me=$e==dn?we.constructor:ne,Ve=Me?Zr(Me):"";if(Ve)switch(Ve){case Ud:return Jn;case Gd:return Rn;case qd:return xn;case Hd:return Nn;case Wd:return Hn}return $e});function dp(we,$e,Me){for(var Ve=-1,Ke=Me.length;++Ve<Ke;){var Wt=Me[Ve],Xt=Wt.size;switch(Wt.type){case"drop":we+=Xt;break;case"dropRight":$e-=Xt;break;case"take":$e=zs($e,we+Xt);break;case"takeRight":we=Os(we,$e-Xt);break}}return{start:we,end:$e}}function hp(we){var $e=we.match(ni);return $e?$e[1].split(vr):[]}function Vl(we,$e,Me){$e=jr($e,we);for(var Ve=-1,Ke=$e.length,Wt=!1;++Ve<Ke;){var Xt=Er($e[Ve]);if(!(Wt=we!=null&&Me(we,Xt)))break;we=we[Xt]}return Wt||++Ve!=Ke?Wt:(Ke=we==null?0:we.length,!!Ke&&Oo(Ke)&&Ir(Xt,Ke)&&(Zn(we)||ei(we)))}function pp(we){var $e=we.length,Me=new we.constructor($e);return $e&&typeof we[0]=="string"&&gs.call(we,"index")&&(Me.index=we.index,Me.input=we.input),Me}function jl(we){return typeof we.constructor=="function"&&!Vi(we)?pi(oo(we)):{}}function fp(we,$e,Me){var Ve=we.constructor;switch($e){case Pn:return Ra(we);case un:case bn:return new Ve(+we);case Jn:return Yh(we,Me);case gn:case cn:case Fn:case In:case cs:case Ss:case os:case _n:case kn:return Cl(we,Me);case Rn:return new Ve;case Ut:case Gn:return new Ve(we);case vn:return Xh(we);case Nn:return new Ve;case Wn:return Jh(we)}}function mp(we,$e){var Me=$e.length;if(!Me)return we;var Ve=Me-1;return $e[Ve]=(Me>1?"& ":"")+$e[Ve],$e=$e.join(Me>2?", ":" "),we.replace(Po,`{
/* [wrapped with `+$e+`] */
`)}function gp(we){return Zn(we)||ei(we)||!!(qc&&we&&we[qc])}function Ir(we,$e){var Me=typeof we;return $e=$e??We,!!$e&&(Me=="number"||Me!="symbol"&&Ho.test(we))&&we>-1&&we%1==0&&we<$e}function Gs(we,$e,Me){if(!ws(Me))return!1;var Ve=typeof $e;return(Ve=="number"?Ws(Me)&&Ir($e,Me.length):Ve=="string"&&$e in Me)?gr(Me[$e],we):!1}function ja(we,$e){if(Zn(we))return!1;var Me=typeof we;return Me=="number"||Me=="symbol"||Me=="boolean"||we==null||Zs(we)?!0:Ls.test(we)||!hr.test(we)||$e!=null&&we in ys($e)}function Ap(we){var $e=typeof we;return $e=="string"||$e=="number"||$e=="symbol"||$e=="boolean"?we!=="__proto__":we===null}function Ua(we){var $e=To(we),Me=Je[$e];if(typeof Me!="function"||!($e in as.prototype))return!1;if(we===Me)return!0;var Ve=La(Me);return!!Ve&&we===Ve[0]}function vp(we){return!!Vc&&Vc in we}var yp=to?kr:ac;function Vi(we){var $e=we&&we.constructor,Me=typeof $e=="function"&&$e.prototype||ui;return we===Me}function Ul(we){return we===we&&!ws(we)}function Gl(we,$e){return function(Me){return Me==null?!1:Me[we]===$e&&($e!==ne||we in ys(Me))}}function xp(we){var $e=Fo(we,function(Ve){return Me.size===me&&Me.clear(),Ve}),Me=$e.cache;return $e}function bp(we,$e){var Me=we[1],Ve=$e[1],Ke=Me|Ve,Wt=Ke<(Se|Te|Re),Xt=Ve==Re&&Me==Ne||Ve==Re&&Me==Be&&we[7].length<=$e[8]||Ve==(Re|Be)&&$e[7].length<=$e[8]&&Me==Ne;if(!(Wt||Xt))return we;Ve&Se&&(we[2]=$e[2],Ke|=Me&Se?0:ke);var sn=$e[3];if(sn){var mn=we[3];we[3]=mn?Sl(mn,sn,$e[4]):sn,we[4]=mn?Pr(we[3],ge):$e[4]}return sn=$e[5],sn&&(mn=we[5],we[5]=mn?Tl(mn,sn,$e[6]):sn,we[6]=mn?Pr(we[5],ge):$e[6]),sn=$e[7],sn&&(we[7]=sn),Ve&Re&&(we[8]=we[8]==null?$e[8]:zs(we[8],$e[8])),we[9]==null&&(we[9]=$e[9]),we[0]=$e[0],we[1]=Ke,we}function Ep(we){var $e=[];if(we!=null)for(var Me in ys(we))$e.push(Me);return $e}function Cp(we){return so.call(we)}function ql(we,$e,Me){return $e=Os($e===ne?we.length-1:$e,0),function(){for(var Ve=arguments,Ke=-1,Wt=Os(Ve.length-$e,0),Xt=yn(Wt);++Ke<Wt;)Xt[Ke]=Ve[$e+Ke];Ke=-1;for(var sn=yn($e+1);++Ke<$e;)sn[Ke]=Ve[Ke];return sn[$e]=Me(Xt),Ys(we,this,sn)}}function Hl(we,$e){return $e.length<2?we:Xr(we,lr($e,0,-1))}function _p(we,$e){for(var Me=we.length,Ve=zs($e.length,Me),Ke=Hs(we);Ve--;){var Wt=$e[Ve];we[Ve]=Ir(Wt,Me)?Ke[Wt]:ne}return we}function Ga(we,$e){if(!($e==="constructor"&&typeof we[$e]=="function")&&$e!="__proto__")return we[$e]}var Wl=Kl(ml),ji=Md||function(we,$e){return Bs.setTimeout(we,$e)},qa=Kl(Hh);function Ql(we,$e,Me){var Ve=$e+"";return qa(we,mp(Ve,wp(hp(Ve),Me)))}function Kl(we){var $e=0,Me=0;return function(){var Ve=zd(),Ke=Ue-(Ve-Me);if(Me=Ve,Ke>0){if(++$e>=qe)return arguments[0]}else $e=0;return we.apply(ne,arguments)}}function Io(we,$e){var Me=-1,Ve=we.length,Ke=Ve-1;for($e=$e===ne?Ve:$e;++Me<$e;){var Wt=Ta(Me,Ke),Xt=we[Wt];we[Wt]=we[Me],we[Me]=Xt}return we.length=$e,we}var Yl=xp(function(we){var $e=[];return we.charCodeAt(0)===46&&$e.push(""),we.replace(Cr,function(Me,Ve,Ke,Wt){$e.push(Ke?Wt.replace(zo,"$1"):Ve||Me)}),$e});function Er(we){if(typeof we=="string"||Zs(we))return we;var $e=we+"";return $e=="0"&&1/we==-Xe?"-0":$e}function Zr(we){if(we!=null){try{return no.call(we)}catch{}try{return we+""}catch{}}return""}function wp(we,$e){return ir(rn,function(Me){var Ve="_."+Me[0];$e&Me[1]&&!Xi(we,Ve)&&we.push(Ve)}),we.sort()}function Xl(we){if(we instanceof as)return we.clone();var $e=new ar(we.__wrapped__,we.__chain__);return $e.__actions__=Hs(we.__actions__),$e.__index__=we.__index__,$e.__values__=we.__values__,$e}function Sp(we,$e,Me){(Me?Gs(we,$e,Me):$e===ne)?$e=1:$e=Os(ns($e),0);var Ve=we==null?0:we.length;if(!Ve||$e<1)return[];for(var Ke=0,Wt=0,Xt=yn(lo(Ve/$e));Ke<Ve;)Xt[Wt++]=lr(we,Ke,Ke+=$e);return Xt}function Tp(we){for(var $e=-1,Me=we==null?0:we.length,Ve=0,Ke=[];++$e<Me;){var Wt=we[$e];Wt&&(Ke[Ve++]=Wt)}return Ke}function $p(){var we=arguments.length;if(!we)return[];for(var $e=yn(we-1),Me=arguments[0],Ve=we;Ve--;)$e[Ve-1]=arguments[Ve];return Br(Zn(Me)?Hs(Me):[Me],Ps($e,1))}var Ip=rs(function(we,$e){return Ns(we)?Oi(we,Ps($e,1,Ns,!0)):[]}),kp=rs(function(we,$e){var Me=ur($e);return Ns(Me)&&(Me=ne),Ns(we)?Oi(we,Ps($e,1,Ns,!0),Qn(Me,2)):[]}),Np=rs(function(we,$e){var Me=ur($e);return Ns(Me)&&(Me=ne),Ns(we)?Oi(we,Ps($e,1,Ns,!0),ne,Me):[]});function Dp(we,$e,Me){var Ve=we==null?0:we.length;return Ve?($e=Me||$e===ne?1:ns($e),lr(we,$e<0?0:$e,Ve)):[]}function Fp(we,$e,Me){var Ve=we==null?0:we.length;return Ve?($e=Me||$e===ne?1:ns($e),$e=Ve-$e,lr(we,0,$e<0?0:$e)):[]}function Rp(we,$e){return we&&we.length?xo(we,Qn($e,3),!0,!0):[]}function Mp(we,$e){return we&&we.length?xo(we,Qn($e,3),!0):[]}function Bp(we,$e,Me,Ve){var Ke=we==null?0:we.length;return Ke?(Me&&typeof Me!="number"&&Gs(we,$e,Me)&&(Me=0,Ve=Ke),Sh(we,$e,Me,Ve)):[]}function Jl(we,$e,Me){var Ve=we==null?0:we.length;if(!Ve)return-1;var Ke=Me==null?0:ns(Me);return Ke<0&&(Ke=Os(Ve+Ke,0)),Ji(we,Qn($e,3),Ke)}function Zl(we,$e,Me){var Ve=we==null?0:we.length;if(!Ve)return-1;var Ke=Ve-1;return Me!==ne&&(Ke=ns(Me),Ke=Me<0?Os(Ve+Ke,0):zs(Ke,Ve-1)),Ji(we,Qn($e,3),Ke,!0)}function eu(we){var $e=we==null?0:we.length;return $e?Ps(we,1):[]}function Pp(we){var $e=we==null?0:we.length;return $e?Ps(we,Xe):[]}function Lp(we,$e){var Me=we==null?0:we.length;return Me?($e=$e===ne?1:ns($e),Ps(we,$e)):[]}function zp(we){for(var $e=-1,Me=we==null?0:we.length,Ve={};++$e<Me;){var Ke=we[$e];Ve[Ke[0]]=Ke[1]}return Ve}function tu(we){return we&&we.length?we[0]:ne}function Vp(we,$e,Me){var Ve=we==null?0:we.length;if(!Ve)return-1;var Ke=Me==null?0:ns(Me);return Ke<0&&(Ke=Os(Ve+Ke,0)),oi(we,$e,Ke)}function jp(we){var $e=we==null?0:we.length;return $e?lr(we,0,-1):[]}var Up=rs(function(we){var $e=_s(we,Da);return $e.length&&$e[0]===we[0]?ba($e):[]}),Gp=rs(function(we){var $e=ur(we),Me=_s(we,Da);return $e===ur(Me)?$e=ne:Me.pop(),Me.length&&Me[0]===we[0]?ba(Me,Qn($e,2)):[]}),qp=rs(function(we){var $e=ur(we),Me=_s(we,Da);return $e=typeof $e=="function"?$e:ne,$e&&Me.pop(),Me.length&&Me[0]===we[0]?ba(Me,ne,$e):[]});function Hp(we,$e){return we==null?"":Pd.call(we,$e)}function ur(we){var $e=we==null?0:we.length;return $e?we[$e-1]:ne}function Wp(we,$e,Me){var Ve=we==null?0:we.length;if(!Ve)return-1;var Ke=Ve;return Me!==ne&&(Ke=ns(Me),Ke=Ke<0?Os(Ve+Ke,0):zs(Ke,Ve-1)),$e===$e?bd(we,$e,Ke):Ji(we,Fc,Ke,!0)}function Qp(we,$e){return we&&we.length?ul(we,ns($e)):ne}var Kp=rs(nu);function nu(we,$e){return we&&we.length&&$e&&$e.length?Sa(we,$e):we}function Yp(we,$e,Me){return we&&we.length&&$e&&$e.length?Sa(we,$e,Qn(Me,2)):we}function Xp(we,$e,Me){return we&&we.length&&$e&&$e.length?Sa(we,$e,ne,Me):we}var Jp=$r(function(we,$e){var Me=we==null?0:we.length,Ve=Aa(we,$e);return pl(we,_s($e,function(Ke){return Ir(Ke,Me)?+Ke:Ke}).sort(wl)),Ve});function Zp(we,$e){var Me=[];if(!(we&&we.length))return Me;var Ve=-1,Ke=[],Wt=we.length;for($e=Qn($e,3);++Ve<Wt;){var Xt=we[Ve];$e(Xt,Ve,we)&&(Me.push(Xt),Ke.push(Ve))}return pl(we,Ke),Me}function Ha(we){return we==null?we:jd.call(we)}function ef(we,$e,Me){var Ve=we==null?0:we.length;return Ve?(Me&&typeof Me!="number"&&Gs(we,$e,Me)?($e=0,Me=Ve):($e=$e==null?0:ns($e),Me=Me===ne?Ve:ns(Me)),lr(we,$e,Me)):[]}function tf(we,$e){return yo(we,$e)}function nf(we,$e,Me){return Ia(we,$e,Qn(Me,2))}function sf(we,$e){var Me=we==null?0:we.length;if(Me){var Ve=yo(we,$e);if(Ve<Me&&gr(we[Ve],$e))return Ve}return-1}function rf(we,$e){return yo(we,$e,!0)}function of(we,$e,Me){return Ia(we,$e,Qn(Me,2),!0)}function af(we,$e){var Me=we==null?0:we.length;if(Me){var Ve=yo(we,$e,!0)-1;if(gr(we[Ve],$e))return Ve}return-1}function cf(we){return we&&we.length?gl(we):[]}function lf(we,$e){return we&&we.length?gl(we,Qn($e,2)):[]}function uf(we){var $e=we==null?0:we.length;return $e?lr(we,1,$e):[]}function df(we,$e,Me){return we&&we.length?($e=Me||$e===ne?1:ns($e),lr(we,0,$e<0?0:$e)):[]}function hf(we,$e,Me){var Ve=we==null?0:we.length;return Ve?($e=Me||$e===ne?1:ns($e),$e=Ve-$e,lr(we,$e<0?0:$e,Ve)):[]}function pf(we,$e){return we&&we.length?xo(we,Qn($e,3),!1,!0):[]}function ff(we,$e){return we&&we.length?xo(we,Qn($e,3)):[]}var mf=rs(function(we){return Vr(Ps(we,1,Ns,!0))}),gf=rs(function(we){var $e=ur(we);return Ns($e)&&($e=ne),Vr(Ps(we,1,Ns,!0),Qn($e,2))}),Af=rs(function(we){var $e=ur(we);return $e=typeof $e=="function"?$e:ne,Vr(Ps(we,1,Ns,!0),ne,$e)});function vf(we){return we&&we.length?Vr(we):[]}function yf(we,$e){return we&&we.length?Vr(we,Qn($e,2)):[]}function xf(we,$e){return $e=typeof $e=="function"?$e:ne,we&&we.length?Vr(we,ne,$e):[]}function Wa(we){if(!(we&&we.length))return[];var $e=0;return we=Mr(we,function(Me){if(Ns(Me))return $e=Os(Me.length,$e),!0}),la($e,function(Me){return _s(we,oa(Me))})}function su(we,$e){if(!(we&&we.length))return[];var Me=Wa(we);return $e==null?Me:_s(Me,function(Ve){return Ys($e,ne,Ve)})}var bf=rs(function(we,$e){return Ns(we)?Oi(we,$e):[]}),Ef=rs(function(we){return Na(Mr(we,Ns))}),Cf=rs(function(we){var $e=ur(we);return Ns($e)&&($e=ne),Na(Mr(we,Ns),Qn($e,2))}),wf=rs(function(we){var $e=ur(we);return $e=typeof $e=="function"?$e:ne,Na(Mr(we,Ns),ne,$e)}),Sf=rs(Wa);function Tf(we,$e){return xl(we||[],$e||[],Ri)}function $f(we,$e){return xl(we||[],$e||[],Li)}var If=rs(function(we){var $e=we.length,Me=$e>1?we[$e-1]:ne;return Me=typeof Me=="function"?(we.pop(),Me):ne,su(we,Me)});function ru(we){var $e=Je(we);return $e.__chain__=!0,$e}function kf(we,$e){return $e(we),we}function ko(we,$e){return $e(we)}var Nf=$r(function(we){var $e=we.length,Me=$e?we[0]:0,Ve=this.__wrapped__,Ke=function(Wt){return Aa(Wt,we)};return $e>1||this.__actions__.length||!(Ve instanceof as)||!Ir(Me)?this.thru(Ke):(Ve=Ve.slice(Me,+Me+($e?1:0)),Ve.__actions__.push({func:ko,args:[Ke],thisArg:ne}),new ar(Ve,this.__chain__).thru(function(Wt){return $e&&!Wt.length&&Wt.push(ne),Wt}))});function Df(){return ru(this)}function Ff(){return new ar(this.value(),this.__chain__)}function Rf(){this.__values__===ne&&(this.__values__=vu(this.value()));var we=this.__index__>=this.__values__.length,$e=we?ne:this.__values__[this.__index__++];return{done:we,value:$e}}function Of(){return this}function Mf(we){for(var $e,Me=this;Me instanceof fo;){var Ve=Xl(Me);Ve.__index__=0,Ve.__values__=ne,$e?Ke.__wrapped__=Ve:$e=Ve;var Ke=Ve;Me=Me.__wrapped__}return Ke.__wrapped__=we,$e}function Bf(){var we=this.__wrapped__;if(we instanceof as){var $e=we;return this.__actions__.length&&($e=new as(this)),$e=$e.reverse(),$e.__actions__.push({func:ko,args:[Ha],thisArg:ne}),new ar($e,this.__chain__)}return this.thru(Ha)}function Pf(){return yl(this.__wrapped__,this.__actions__)}var Lf=bo(function(we,$e,Me){gs.call(we,Me)?++we[Me]:Sr(we,Me,1)});function zf(we,$e,Me){var Ve=Zn(we)?Nc:wh;return Me&&Gs(we,$e,Me)&&($e=ne),Ve(we,Qn($e,3))}function Vf(we,$e){var Me=Zn(we)?Mr:tl;return Me(we,Qn($e,3))}var jf=Nl(Jl),Uf=Nl(Zl);function Gf(we,$e){return Ps(No(we,$e),1)}function qf(we,$e){return Ps(No(we,$e),Xe)}function Hf(we,$e,Me){return Me=Me===ne?1:ns(Me),Ps(No(we,$e),Me)}function iu(we,$e){var Me=Zn(we)?ir:zr;return Me(we,Qn($e,3))}function ou(we,$e){var Me=Zn(we)?sd:el;return Me(we,Qn($e,3))}var Wf=bo(function(we,$e,Me){gs.call(we,Me)?we[Me].push($e):Sr(we,Me,[$e])});function Qf(we,$e,Me,Ve){we=Ws(we)?we:vi(we),Me=Me&&!Ve?ns(Me):0;var Ke=we.length;return Me<0&&(Me=Os(Ke+Me,0)),Mo(we)?Me<=Ke&&we.indexOf($e,Me)>-1:!!Ke&&oi(we,$e,Me)>-1}var Kf=rs(function(we,$e,Me){var Ve=-1,Ke=typeof $e=="function",Wt=Ws(we)?yn(we.length):[];return zr(we,function(Xt){Wt[++Ve]=Ke?Ys($e,Xt,Me):Mi(Xt,$e,Me)}),Wt}),Yf=bo(function(we,$e,Me){Sr(we,Me,$e)});function No(we,$e){var Me=Zn(we)?_s:al;return Me(we,Qn($e,3))}function Xf(we,$e,Me,Ve){return we==null?[]:(Zn($e)||($e=$e==null?[]:[$e]),Me=Ve?ne:Me,Zn(Me)||(Me=Me==null?[]:[Me]),dl(we,$e,Me))}var Jf=bo(function(we,$e,Me){we[Me?0:1].push($e)},function(){return[[],[]]});function Zf(we,$e,Me){var Ve=Zn(we)?ra:Oc,Ke=arguments.length<3;return Ve(we,Qn($e,4),Me,Ke,zr)}function em(we,$e,Me){var Ve=Zn(we)?rd:Oc,Ke=arguments.length<3;return Ve(we,Qn($e,4),Me,Ke,el)}function tm(we,$e){var Me=Zn(we)?Mr:tl;return Me(we,Ro(Qn($e,3)))}function nm(we){var $e=Zn(we)?Yc:Gh;return $e(we)}function sm(we,$e,Me){(Me?Gs(we,$e,Me):$e===ne)?$e=1:$e=ns($e);var Ve=Zn(we)?yh:qh;return Ve(we,$e)}function rm(we){var $e=Zn(we)?xh:Wh;return $e(we)}function im(we){if(we==null)return 0;if(Ws(we))return Mo(we)?ci(we):we.length;var $e=Vs(we);return $e==Rn||$e==Nn?we.size:Ca(we).length}function om(we,$e,Me){var Ve=Zn(we)?ia:Qh;return Me&&Gs(we,$e,Me)&&($e=ne),Ve(we,Qn($e,3))}var am=rs(function(we,$e){if(we==null)return[];var Me=$e.length;return Me>1&&Gs(we,$e[0],$e[1])?$e=[]:Me>2&&Gs($e[0],$e[1],$e[2])&&($e=[$e[0]]),dl(we,Ps($e,1),[])}),Do=Od||function(){return Bs.Date.now()};function cm(we,$e){if(typeof $e!="function")throw new or(ue);return we=ns(we),function(){if(--we<1)return $e.apply(this,arguments)}}function au(we,$e,Me){return $e=Me?ne:$e,$e=we&&$e==null?we.length:$e,Tr(we,Re,ne,ne,ne,ne,$e)}function cu(we,$e){var Me;if(typeof $e!="function")throw new or(ue);return we=ns(we),function(){return--we>0&&(Me=$e.apply(this,arguments)),we<=1&&($e=ne),Me}}var Qa=rs(function(we,$e,Me){var Ve=Se;if(Me.length){var Ke=Pr(Me,gi(Qa));Ve|=De}return Tr(we,Ve,$e,Me,Ke)}),lu=rs(function(we,$e,Me){var Ve=Se|Te;if(Me.length){var Ke=Pr(Me,gi(lu));Ve|=De}return Tr($e,Ve,we,Me,Ke)});function uu(we,$e,Me){$e=Me?ne:$e;var Ve=Tr(we,Ne,ne,ne,ne,ne,ne,$e);return Ve.placeholder=uu.placeholder,Ve}function du(we,$e,Me){$e=Me?ne:$e;var Ve=Tr(we,Fe,ne,ne,ne,ne,ne,$e);return Ve.placeholder=du.placeholder,Ve}function hu(we,$e,Me){var Ve,Ke,Wt,Xt,sn,mn,Sn=0,Tn=!1,Dn=!1,Bn=!0;if(typeof we!="function")throw new or(ue);$e=dr($e)||0,ws(Me)&&(Tn=!!Me.leading,Dn="maxWait"in Me,Wt=Dn?Os(dr(Me.maxWait)||0,$e):Wt,Bn="trailing"in Me?!!Me.trailing:Bn);function qn(Ds){var Ar=Ve,Dr=Ke;return Ve=Ke=ne,Sn=Ds,Xt=we.apply(Dr,Ar),Xt}function Kn(Ds){return Sn=Ds,sn=ji(is,$e),Tn?qn(Ds):Xt}function ss(Ds){var Ar=Ds-mn,Dr=Ds-Sn,Nu=$e-Ar;return Dn?zs(Nu,Wt-Dr):Nu}function Yn(Ds){var Ar=Ds-mn,Dr=Ds-Sn;return mn===ne||Ar>=$e||Ar<0||Dn&&Dr>=Wt}function is(){var Ds=Do();if(Yn(Ds))return us(Ds);sn=ji(is,ss(Ds))}function us(Ds){return sn=ne,Bn&&Ve?qn(Ds):(Ve=Ke=ne,Xt)}function er(){sn!==ne&&bl(sn),Sn=0,Ve=mn=Ke=sn=ne}function qs(){return sn===ne?Xt:us(Do())}function tr(){var Ds=Do(),Ar=Yn(Ds);if(Ve=arguments,Ke=this,mn=Ds,Ar){if(sn===ne)return Kn(mn);if(Dn)return bl(sn),sn=ji(is,$e),qn(mn)}return sn===ne&&(sn=ji(is,$e)),Xt}return tr.cancel=er,tr.flush=qs,tr}var lm=rs(function(we,$e){return Zc(we,1,$e)}),um=rs(function(we,$e,Me){return Zc(we,dr($e)||0,Me)});function dm(we){return Tr(we,Le)}function Fo(we,$e){if(typeof we!="function"||$e!=null&&typeof $e!="function")throw new or(ue);var Me=function(){var Ve=arguments,Ke=$e?$e.apply(this,Ve):Ve[0],Wt=Me.cache;if(Wt.has(Ke))return Wt.get(Ke);var Xt=we.apply(this,Ve);return Me.cache=Wt.set(Ke,Xt)||Wt,Xt};return Me.cache=new(Fo.Cache||wr),Me}Fo.Cache=wr;function Ro(we){if(typeof we!="function")throw new or(ue);return function(){var $e=arguments;switch($e.length){case 0:return!we.call(this);case 1:return!we.call(this,$e[0]);case 2:return!we.call(this,$e[0],$e[1]);case 3:return!we.call(this,$e[0],$e[1],$e[2])}return!we.apply(this,$e)}}function hm(we){return cu(2,we)}var pm=Kh(function(we,$e){$e=$e.length==1&&Zn($e[0])?_s($e[0],Xs(Qn())):_s(Ps($e,1),Xs(Qn()));var Me=$e.length;return rs(function(Ve){for(var Ke=-1,Wt=zs(Ve.length,Me);++Ke<Wt;)Ve[Ke]=$e[Ke].call(this,Ve[Ke]);return Ys(we,this,Ve)})}),Ka=rs(function(we,$e){var Me=Pr($e,gi(Ka));return Tr(we,De,ne,$e,Me)}),pu=rs(function(we,$e){var Me=Pr($e,gi(pu));return Tr(we,Oe,ne,$e,Me)}),fm=$r(function(we,$e){return Tr(we,Be,ne,ne,ne,$e)});function mm(we,$e){if(typeof we!="function")throw new or(ue);return $e=$e===ne?$e:ns($e),rs(we,$e)}function gm(we,$e){if(typeof we!="function")throw new or(ue);return $e=$e==null?0:Os(ns($e),0),rs(function(Me){var Ve=Me[$e],Ke=Ur(Me,0,$e);return Ve&&Br(Ke,Ve),Ys(we,this,Ke)})}function Am(we,$e,Me){var Ve=!0,Ke=!0;if(typeof we!="function")throw new or(ue);return ws(Me)&&(Ve="leading"in Me?!!Me.leading:Ve,Ke="trailing"in Me?!!Me.trailing:Ke),hu(we,$e,{leading:Ve,maxWait:$e,trailing:Ke})}function vm(we){return au(we,1)}function ym(we,$e){return Ka(Fa($e),we)}function xm(){if(!arguments.length)return[];var we=arguments[0];return Zn(we)?we:[we]}function bm(we){return cr(we,be)}function Em(we,$e){return $e=typeof $e=="function"?$e:ne,cr(we,be,$e)}function Cm(we){return cr(we,ve|be)}function wm(we,$e){return $e=typeof $e=="function"?$e:ne,cr(we,ve|be,$e)}function Sm(we,$e){return $e==null||Jc(we,$e,Ms($e))}function gr(we,$e){return we===$e||we!==we&&$e!==$e}var Tm=So(xa),$m=So(function(we,$e){return we>=$e}),ei=rl(function(){return arguments}())?rl:function(we){return $s(we)&&gs.call(we,"callee")&&!Gc.call(we,"callee")},Zn=yn.isArray,Im=wc?Xs(wc):Nh;function Ws(we){return we!=null&&Oo(we.length)&&!kr(we)}function Ns(we){return $s(we)&&Ws(we)}function km(we){return we===!0||we===!1||$s(we)&&Us(we)==un}var Gr=Bd||ac,Nm=Sc?Xs(Sc):Dh;function Dm(we){return $s(we)&&we.nodeType===1&&!Ui(we)}function Fm(we){if(we==null)return!0;if(Ws(we)&&(Zn(we)||typeof we=="string"||typeof we.splice=="function"||Gr(we)||Ai(we)||ei(we)))return!we.length;var $e=Vs(we);if($e==Rn||$e==Nn)return!we.size;if(Vi(we))return!Ca(we).length;for(var Me in we)if(gs.call(we,Me))return!1;return!0}function Rm(we,$e){return Bi(we,$e)}function Om(we,$e,Me){Me=typeof Me=="function"?Me:ne;var Ve=Me?Me(we,$e):ne;return Ve===ne?Bi(we,$e,ne,Me):!!Ve}function Ya(we){if(!$s(we))return!1;var $e=Us(we);return $e==$n||$e==En||typeof we.message=="string"&&typeof we.name=="string"&&!Ui(we)}function Mm(we){return typeof we=="number"&&Hc(we)}function kr(we){if(!ws(we))return!1;var $e=Us(we);return $e==On||$e==zn||$e==an||$e==An}function fu(we){return typeof we=="number"&&we==ns(we)}function Oo(we){return typeof we=="number"&&we>-1&&we%1==0&&we<=We}function ws(we){var $e=typeof we;return we!=null&&($e=="object"||$e=="function")}function $s(we){return we!=null&&typeof we=="object"}var mu=Tc?Xs(Tc):Rh;function Bm(we,$e){return we===$e||Ea(we,$e,za($e))}function Pm(we,$e,Me){return Me=typeof Me=="function"?Me:ne,Ea(we,$e,za($e),Me)}function Lm(we){return gu(we)&&we!=+we}function zm(we){if(yp(we))throw new Xn(le);return il(we)}function Vm(we){return we===null}function jm(we){return we==null}function gu(we){return typeof we=="number"||$s(we)&&Us(we)==Ut}function Ui(we){if(!$s(we)||Us(we)!=dn)return!1;var $e=oo(we);if($e===null)return!0;var Me=gs.call($e,"constructor")&&$e.constructor;return typeof Me=="function"&&Me instanceof Me&&no.call(Me)==Nd}var Xa=$c?Xs($c):Oh;function Um(we){return fu(we)&&we>=-We&&we<=We}var Au=Ic?Xs(Ic):Mh;function Mo(we){return typeof we=="string"||!Zn(we)&&$s(we)&&Us(we)==Gn}function Zs(we){return typeof we=="symbol"||$s(we)&&Us(we)==Wn}var Ai=kc?Xs(kc):Bh;function Gm(we){return we===ne}function qm(we){return $s(we)&&Vs(we)==Hn}function Hm(we){return $s(we)&&Us(we)==hs}var Wm=So(wa),Qm=So(function(we,$e){return we<=$e});function vu(we){if(!we)return[];if(Ws(we))return Mo(we)?fr(we):Hs(we);if($i&&we[$i])return vd(we[$i]());var $e=Vs(we),Me=$e==Rn?da:$e==Nn?Zi:vi;return Me(we)}function Nr(we){if(!we)return we===0?we:0;if(we=dr(we),we===Xe||we===-Xe){var $e=we<0?-1:1;return $e*Ze}return we===we?we:0}function ns(we){var $e=Nr(we),Me=$e%1;return $e===$e?Me?$e-Me:$e:0}function yu(we){return we?Yr(ns(we),0,Qt):0}function dr(we){if(typeof we=="number")return we;if(Zs(we))return Vt;if(ws(we)){var $e=typeof we.valueOf=="function"?we.valueOf():we;we=ws($e)?$e+"":$e}if(typeof we!="string")return we===0?we:+we;we=Mc(we);var Me=Uo.test(we);return Me||qo.test(we)?Zu(we.slice(2),Me?2:8):jo.test(we)?Vt:+we}function xu(we){return br(we,Qs(we))}function Km(we){return we?Yr(ns(we),-We,We):we===0?we:0}function ms(we){return we==null?"":Js(we)}var Ym=fi(function(we,$e){if(Vi($e)||Ws($e)){br($e,Ms($e),we);return}for(var Me in $e)gs.call($e,Me)&&Ri(we,Me,$e[Me])}),bu=fi(function(we,$e){br($e,Qs($e),we)}),Bo=fi(function(we,$e,Me,Ve){br($e,Qs($e),we,Ve)}),Xm=fi(function(we,$e,Me,Ve){br($e,Ms($e),we,Ve)}),Jm=$r(Aa);function Zm(we,$e){var Me=pi(we);return $e==null?Me:Xc(Me,$e)}var e1=rs(function(we,$e){we=ys(we);var Me=-1,Ve=$e.length,Ke=Ve>2?$e[2]:ne;for(Ke&&Gs($e[0],$e[1],Ke)&&(Ve=1);++Me<Ve;)for(var Wt=$e[Me],Xt=Qs(Wt),sn=-1,mn=Xt.length;++sn<mn;){var Sn=Xt[sn],Tn=we[Sn];(Tn===ne||gr(Tn,ui[Sn])&&!gs.call(we,Sn))&&(we[Sn]=Wt[Sn])}return we}),t1=rs(function(we){return we.push(ne,Pl),Ys(Eu,ne,we)});function n1(we,$e){return Dc(we,Qn($e,3),xr)}function s1(we,$e){return Dc(we,Qn($e,3),ya)}function r1(we,$e){return we==null?we:va(we,Qn($e,3),Qs)}function i1(we,$e){return we==null?we:nl(we,Qn($e,3),Qs)}function o1(we,$e){return we&&xr(we,Qn($e,3))}function c1(we,$e){return we&&ya(we,Qn($e,3))}function l1(we){return we==null?[]:Ao(we,Ms(we))}function u1(we){return we==null?[]:Ao(we,Qs(we))}function Ja(we,$e,Me){var Ve=we==null?ne:Xr(we,$e);return Ve===ne?Me:Ve}function d1(we,$e){return we!=null&&Vl(we,$e,Th)}function Za(we,$e){return we!=null&&Vl(we,$e,$h)}var h1=Fl(function(we,$e,Me){$e!=null&&typeof $e.toString!="function"&&($e=so.call($e)),we[$e]=Me},nc(Ks)),p1=Fl(function(we,$e,Me){$e!=null&&typeof $e.toString!="function"&&($e=so.call($e)),gs.call(we,$e)?we[$e].push(Me):we[$e]=[Me]},Qn),f1=rs(Mi);function Ms(we){return Ws(we)?Kc(we):Ca(we)}function Qs(we){return Ws(we)?Kc(we,!0):Ph(we)}function m1(we,$e){var Me={};return $e=Qn($e,3),xr(we,function(Ve,Ke,Wt){Sr(Me,$e(Ve,Ke,Wt),Ve)}),Me}function g1(we,$e){var Me={};return $e=Qn($e,3),xr(we,function(Ve,Ke,Wt){Sr(Me,Ke,$e(Ve,Ke,Wt))}),Me}var A1=fi(function(we,$e,Me){vo(we,$e,Me)}),Eu=fi(function(we,$e,Me,Ve){vo(we,$e,Me,Ve)}),v1=$r(function(we,$e){var Me={};if(we==null)return Me;var Ve=!1;$e=_s($e,function(Wt){return Wt=jr(Wt,we),Ve||(Ve=Wt.length>1),Wt}),br(we,Pa(we),Me),Ve&&(Me=cr(Me,ve|ye|be,ap));for(var Ke=$e.length;Ke--;)ka(Me,$e[Ke]);return Me});function y1(we,$e){return Cu(we,Ro(Qn($e)))}var x1=$r(function(we,$e){return we==null?{}:Vh(we,$e)});function Cu(we,$e){if(we==null)return{};var Me=_s(Pa(we),function(Ve){return[Ve]});return $e=Qn($e),hl(we,Me,function(Ve,Ke){return $e(Ve,Ke[0])})}function b1(we,$e,Me){$e=jr($e,we);var Ve=-1,Ke=$e.length;for(Ke||(Ke=1,we=ne);++Ve<Ke;){var Wt=we==null?ne:we[Er($e[Ve])];Wt===ne&&(Ve=Ke,Wt=Me),we=kr(Wt)?Wt.call(we):Wt}return we}function E1(we,$e,Me){return we==null?we:Li(we,$e,Me)}function C1(we,$e,Me,Ve){return Ve=typeof Ve=="function"?Ve:ne,we==null?we:Li(we,$e,Me,Ve)}var _u=Ml(Ms),wu=Ml(Qs);function _1(we,$e,Me){var Ve=Zn(we),Ke=Ve||Gr(we)||Ai(we);if($e=Qn($e,4),Me==null){var Wt=we&&we.constructor;Ke?Me=Ve?new Wt:[]:ws(we)?Me=kr(Wt)?pi(oo(we)):{}:Me={}}return(Ke?ir:xr)(we,function(Xt,sn,mn){return $e(Me,Xt,sn,mn)}),Me}function w1(we,$e){return we==null?!0:ka(we,$e)}function S1(we,$e,Me){return we==null?we:vl(we,$e,Fa(Me))}function T1(we,$e,Me,Ve){return Ve=typeof Ve=="function"?Ve:ne,we==null?we:vl(we,$e,Fa(Me),Ve)}function vi(we){return we==null?[]:ua(we,Ms(we))}function $1(we){return we==null?[]:ua(we,Qs(we))}function I1(we,$e,Me){return Me===ne&&(Me=$e,$e=ne),Me!==ne&&(Me=dr(Me),Me=Me===Me?Me:0),$e!==ne&&($e=dr($e),$e=$e===$e?$e:0),Yr(dr(we),$e,Me)}function k1(we,$e,Me){return $e=Nr($e),Me===ne?(Me=$e,$e=0):Me=Nr(Me),we=dr(we),Ih(we,$e,Me)}function N1(we,$e,Me){if(Me&&typeof Me!="boolean"&&Gs(we,$e,Me)&&($e=Me=ne),Me===ne&&(typeof $e=="boolean"?(Me=$e,$e=ne):typeof we=="boolean"&&(Me=we,we=ne)),we===ne&&$e===ne?(we=0,$e=1):(we=Nr(we),$e===ne?($e=we,we=0):$e=Nr($e)),we>$e){var Ve=we;we=$e,$e=Ve}if(Me||we%1||$e%1){var Ke=Wc();return zs(we+Ke*($e-we+Ju("1e-"+((Ke+"").length-1))),$e)}return Ta(we,$e)}var D1=mi(function(we,$e,Me){return $e=$e.toLowerCase(),we+(Me?Su($e):$e)});function Su(we){return tc(ms(we).toLowerCase())}function Tu(we){return we=ms(we),we&&we.replace(Wo,hd).replace(ju,"")}function F1(we,$e,Me){we=ms(we),$e=Js($e);var Ve=we.length;Me=Me===ne?Ve:Yr(ns(Me),0,Ve);var Ke=Me;return Me-=$e.length,Me>=0&&we.slice(Me,Ke)==$e}function R1(we){return we=ms(we),we&&fs.test(we)?we.replace(As,pd):we}function O1(we){return we=ms(we),we&&ti.test(we)?we.replace(Fr,"\\$&"):we}var M1=mi(function(we,$e,Me){return we+(Me?"-":"")+$e.toLowerCase()}),B1=mi(function(we,$e,Me){return we+(Me?" ":"")+$e.toLowerCase()}),P1=kl("toLowerCase");function L1(we,$e,Me){we=ms(we),$e=ns($e);var Ve=$e?ci(we):0;if(!$e||Ve>=$e)return we;var Ke=($e-Ve)/2;return wo(uo(Ke),Me)+we+wo(lo(Ke),Me)}function z1(we,$e,Me){we=ms(we),$e=ns($e);var Ve=$e?ci(we):0;return $e&&Ve<$e?we+wo($e-Ve,Me):we}function V1(we,$e,Me){we=ms(we),$e=ns($e);var Ve=$e?ci(we):0;return $e&&Ve<$e?wo($e-Ve,Me)+we:we}function j1(we,$e,Me){return Me||$e==null?$e=0:$e&&($e=+$e),Vd(ms(we).replace(js,""),$e||0)}function U1(we,$e,Me){return(Me?Gs(we,$e,Me):$e===ne)?$e=1:$e=ns($e),$a(ms(we),$e)}function G1(){var we=arguments,$e=ms(we[0]);return we.length<3?$e:$e.replace(we[1],we[2])}var q1=mi(function(we,$e,Me){return we+(Me?"_":"")+$e.toLowerCase()});function H1(we,$e,Me){return Me&&typeof Me!="number"&&Gs(we,$e,Me)&&($e=Me=ne),Me=Me===ne?Qt:Me>>>0,Me?(we=ms(we),we&&(typeof $e=="string"||$e!=null&&!Xa($e))&&($e=Js($e),!$e&&ai(we))?Ur(fr(we),0,Me):we.split($e,Me)):[]}var W1=mi(function(we,$e,Me){return we+(Me?" ":"")+tc($e)});function Q1(we,$e,Me){return we=ms(we),Me=Me==null?0:Yr(ns(Me),0,we.length),$e=Js($e),we.slice(Me,Me+$e.length)==$e}function K1(we,$e,Me){var Ve=Je.templateSettings;Me&&Gs(we,$e,Me)&&($e=ne),we=ms(we),$e=Bo({},$e,Ve,Bl);var Ke=Bo({},$e.imports,Ve.imports,Bl),Wt=Ms(Ke),Xt=ua(Ke,Wt),sn,mn,Sn=0,Tn=$e.interpolate||si,Dn="__p += '",Bn=ha(($e.escape||si).source+"|"+Tn.source+"|"+(Tn===Is?Vo:si).source+"|"+($e.evaluate||si).source+"|$","g"),qn="//# sourceURL="+(gs.call($e,"sourceURL")?($e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wu+"]")+`
`;we.replace(Bn,function(Yn,is,us,er,qs,tr){return us||(us=er),Dn+=we.slice(Sn,tr).replace(Qo,md),is&&(sn=!0,Dn+=`' +
__e(`+is+`) +
'`),qs&&(mn=!0,Dn+=`';
`+qs+`;
__p += '`),us&&(Dn+=`' +
((__t = (`+us+`)) == null ? '' : __t) +
'`),Sn=tr+Yn.length,Yn}),Dn+=`';
`;var Kn=gs.call($e,"variable")&&$e.variable;if(!Kn)Dn=`with (obj) {
`+Dn+`
}
`;else if(yi.test(Kn))throw new Xn(he);Dn=(mn?Dn.replace(jn,""):Dn).replace(Un,"$1").replace(es,"$1;"),Dn="function("+(Kn||"obj")+`) {
`+(Kn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(sn?", __e = _.escape":"")+(mn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Dn+`return __p
}`;var ss=Iu(function(){return ps(Wt,qn+"return "+Dn).apply(ne,Xt)});if(ss.source=Dn,Ya(ss))throw ss;return ss}function Y1(we){return ms(we).toLowerCase()}function X1(we){return ms(we).toUpperCase()}function J1(we,$e,Me){if(we=ms(we),we&&(Me||$e===ne))return Mc(we);if(!we||!($e=Js($e)))return we;var Ve=fr(we),Ke=fr($e),Wt=Bc(Ve,Ke),Xt=Pc(Ve,Ke)+1;return Ur(Ve,Wt,Xt).join("")}function Z1(we,$e,Me){if(we=ms(we),we&&(Me||$e===ne))return we.slice(0,zc(we)+1);if(!we||!($e=Js($e)))return we;var Ve=fr(we),Ke=Pc(Ve,fr($e))+1;return Ur(Ve,0,Ke).join("")}function eg(we,$e,Me){if(we=ms(we),we&&(Me||$e===ne))return we.replace(js,"");if(!we||!($e=Js($e)))return we;var Ve=fr(we),Ke=Bc(Ve,fr($e));return Ur(Ve,Ke).join("")}function tg(we,$e){var Me=je,Ve=Ge;if(ws($e)){var Ke="separator"in $e?$e.separator:Ke;Me="length"in $e?ns($e.length):Me,Ve="omission"in $e?Js($e.omission):Ve}we=ms(we);var Wt=we.length;if(ai(we)){var Xt=fr(we);Wt=Xt.length}if(Me>=Wt)return we;var sn=Me-ci(Ve);if(sn<1)return Ve;var mn=Xt?Ur(Xt,0,sn).join(""):we.slice(0,sn);if(Ke===ne)return mn+Ve;if(Xt&&(sn+=mn.length-sn),Xa(Ke)){if(we.slice(sn).search(Ke)){var Sn,Tn=mn;for(Ke.global||(Ke=ha(Ke.source,ms(Gi.exec(Ke))+"g")),Ke.lastIndex=0;Sn=Ke.exec(Tn);)var Dn=Sn.index;mn=mn.slice(0,Dn===ne?sn:Dn)}}else if(we.indexOf(Js(Ke),sn)!=sn){var Bn=mn.lastIndexOf(Ke);Bn>-1&&(mn=mn.slice(0,Bn))}return mn+Ve}function ng(we){return we=ms(we),we&&vs.test(we)?we.replace(ds,Ed):we}var sg=mi(function(we,$e,Me){return we+(Me?" ":"")+$e.toUpperCase()}),tc=kl("toUpperCase");function $u(we,$e,Me){return we=ms(we),$e=Me?ne:$e,$e===ne?Ad(we)?Sd(we):ad(we):we.match($e)||[]}var Iu=rs(function(we,$e){try{return Ys(we,ne,$e)}catch(Me){return Ya(Me)?Me:new Xn(Me)}}),rg=$r(function(we,$e){return ir($e,function(Me){Me=Er(Me),Sr(we,Me,Qa(we[Me],we))}),we});function ig(we){var $e=we==null?0:we.length,Me=Qn();return we=$e?_s(we,function(Ve){if(typeof Ve[1]!="function")throw new or(ue);return[Me(Ve[0]),Ve[1]]}):[],rs(function(Ve){for(var Ke=-1;++Ke<$e;){var Wt=we[Ke];if(Ys(Wt[0],this,Ve))return Ys(Wt[1],this,Ve)}})}function og(we){return Ch(cr(we,ve))}function nc(we){return function(){return we}}function ag(we,$e){return we==null||we!==we?$e:we}var cg=Dl(),lg=Dl(!0);function Ks(we){return we}function sc(we){return ol(typeof we=="function"?we:cr(we,ve))}function ug(we){return cl(cr(we,ve))}function dg(we,$e){return ll(we,cr($e,ve))}var hg=rs(function(we,$e){return function(Me){return Mi(Me,we,$e)}}),pg=rs(function(we,$e){return function(Me){return Mi(we,Me,$e)}});function rc(we,$e,Me){var Ve=Ms($e),Ke=Ao($e,Ve);Me==null&&!(ws($e)&&(Ke.length||!Ve.length))&&(Me=$e,$e=we,we=this,Ke=Ao($e,Ms($e)));var Wt=!(ws(Me)&&"chain"in Me)||!!Me.chain,Xt=kr(we);return ir(Ke,function(sn){var mn=$e[sn];we[sn]=mn,Xt&&(we.prototype[sn]=function(){var Sn=this.__chain__;if(Wt||Sn){var Tn=we(this.__wrapped__),Dn=Tn.__actions__=Hs(this.__actions__);return Dn.push({func:mn,args:arguments,thisArg:we}),Tn.__chain__=Sn,Tn}return mn.apply(we,Br([this.value()],arguments))})}),we}function fg(){return Bs._===this&&(Bs._=Dd),this}function ic(){}function mg(we){return we=ns(we),rs(function($e){return ul($e,we)})}var gg=Oa(_s),Ag=Oa(Nc),vg=Oa(ia);function ku(we){return ja(we)?oa(Er(we)):jh(we)}function yg(we){return function($e){return we==null?ne:Xr(we,$e)}}var xg=Rl(),bg=Rl(!0);function oc(){return[]}function ac(){return!1}function Eg(){return{}}function Cg(){return""}function wg(){return!0}function Sg(we,$e){if(we=ns(we),we<1||we>We)return[];var Me=Qt,Ve=zs(we,Qt);$e=Qn($e),we-=Qt;for(var Ke=la(Ve,$e);++Me<we;)$e(Me);return Ke}function Tg(we){return Zn(we)?_s(we,Er):Zs(we)?[we]:Hs(Yl(ms(we)))}function $g(we){var $e=++kd;return ms(we)+$e}var Ig=Co(function(we,$e){return we+$e},0),kg=Ma("ceil"),Ng=Co(function(we,$e){return we/$e},1),Dg=Ma("floor");function Fg(we){return we&&we.length?go(we,Ks,xa):ne}function Rg(we,$e){return we&&we.length?go(we,Qn($e,2),xa):ne}function Og(we){return Rc(we,Ks)}function Mg(we,$e){return Rc(we,Qn($e,2))}function Bg(we){return we&&we.length?go(we,Ks,wa):ne}function Pg(we,$e){return we&&we.length?go(we,Qn($e,2),wa):ne}var Lg=Co(function(we,$e){return we*$e},1),zg=Ma("round"),Vg=Co(function(we,$e){return we-$e},0);function jg(we){return we&&we.length?ca(we,Ks):0}function Ug(we,$e){return we&&we.length?ca(we,Qn($e,2)):0}return Je.after=cm,Je.ary=au,Je.assign=Ym,Je.assignIn=bu,Je.assignInWith=Bo,Je.assignWith=Xm,Je.at=Jm,Je.before=cu,Je.bind=Qa,Je.bindAll=rg,Je.bindKey=lu,Je.castArray=xm,Je.chain=ru,Je.chunk=Sp,Je.compact=Tp,Je.concat=$p,Je.cond=ig,Je.conforms=og,Je.constant=nc,Je.countBy=Lf,Je.create=Zm,Je.curry=uu,Je.curryRight=du,Je.debounce=hu,Je.defaults=e1,Je.defaultsDeep=t1,Je.defer=lm,Je.delay=um,Je.difference=Ip,Je.differenceBy=kp,Je.differenceWith=Np,Je.drop=Dp,Je.dropRight=Fp,Je.dropRightWhile=Rp,Je.dropWhile=Mp,Je.fill=Bp,Je.filter=Vf,Je.flatMap=Gf,Je.flatMapDeep=qf,Je.flatMapDepth=Hf,Je.flatten=eu,Je.flattenDeep=Pp,Je.flattenDepth=Lp,Je.flip=dm,Je.flow=cg,Je.flowRight=lg,Je.fromPairs=zp,Je.functions=l1,Je.functionsIn=u1,Je.groupBy=Wf,Je.initial=jp,Je.intersection=Up,Je.intersectionBy=Gp,Je.intersectionWith=qp,Je.invert=h1,Je.invertBy=p1,Je.invokeMap=Kf,Je.iteratee=sc,Je.keyBy=Yf,Je.keys=Ms,Je.keysIn=Qs,Je.map=No,Je.mapKeys=m1,Je.mapValues=g1,Je.matches=ug,Je.matchesProperty=dg,Je.memoize=Fo,Je.merge=A1,Je.mergeWith=Eu,Je.method=hg,Je.methodOf=pg,Je.mixin=rc,Je.negate=Ro,Je.nthArg=mg,Je.omit=v1,Je.omitBy=y1,Je.once=hm,Je.orderBy=Xf,Je.over=gg,Je.overArgs=pm,Je.overEvery=Ag,Je.overSome=vg,Je.partial=Ka,Je.partialRight=pu,Je.partition=Jf,Je.pick=x1,Je.pickBy=Cu,Je.property=ku,Je.propertyOf=yg,Je.pull=Kp,Je.pullAll=nu,Je.pullAllBy=Yp,Je.pullAllWith=Xp,Je.pullAt=Jp,Je.range=xg,Je.rangeRight=bg,Je.rearg=fm,Je.reject=tm,Je.remove=Zp,Je.rest=mm,Je.reverse=Ha,Je.sampleSize=sm,Je.set=E1,Je.setWith=C1,Je.shuffle=rm,Je.slice=ef,Je.sortBy=am,Je.sortedUniq=cf,Je.sortedUniqBy=lf,Je.split=H1,Je.spread=gm,Je.tail=uf,Je.take=df,Je.takeRight=hf,Je.takeRightWhile=pf,Je.takeWhile=ff,Je.tap=kf,Je.throttle=Am,Je.thru=ko,Je.toArray=vu,Je.toPairs=_u,Je.toPairsIn=wu,Je.toPath=Tg,Je.toPlainObject=xu,Je.transform=_1,Je.unary=vm,Je.union=mf,Je.unionBy=gf,Je.unionWith=Af,Je.uniq=vf,Je.uniqBy=yf,Je.uniqWith=xf,Je.unset=w1,Je.unzip=Wa,Je.unzipWith=su,Je.update=S1,Je.updateWith=T1,Je.values=vi,Je.valuesIn=$1,Je.without=bf,Je.words=$u,Je.wrap=ym,Je.xor=Ef,Je.xorBy=Cf,Je.xorWith=wf,Je.zip=Sf,Je.zipObject=Tf,Je.zipObjectDeep=$f,Je.zipWith=If,Je.entries=_u,Je.entriesIn=wu,Je.extend=bu,Je.extendWith=Bo,rc(Je,Je),Je.add=Ig,Je.attempt=Iu,Je.camelCase=D1,Je.capitalize=Su,Je.ceil=kg,Je.clamp=I1,Je.clone=bm,Je.cloneDeep=Cm,Je.cloneDeepWith=wm,Je.cloneWith=Em,Je.conformsTo=Sm,Je.deburr=Tu,Je.defaultTo=ag,Je.divide=Ng,Je.endsWith=F1,Je.eq=gr,Je.escape=R1,Je.escapeRegExp=O1,Je.every=zf,Je.find=jf,Je.findIndex=Jl,Je.findKey=n1,Je.findLast=Uf,Je.findLastIndex=Zl,Je.findLastKey=s1,Je.floor=Dg,Je.forEach=iu,Je.forEachRight=ou,Je.forIn=r1,Je.forInRight=i1,Je.forOwn=o1,Je.forOwnRight=c1,Je.get=Ja,Je.gt=Tm,Je.gte=$m,Je.has=d1,Je.hasIn=Za,Je.head=tu,Je.identity=Ks,Je.includes=Qf,Je.indexOf=Vp,Je.inRange=k1,Je.invoke=f1,Je.isArguments=ei,Je.isArray=Zn,Je.isArrayBuffer=Im,Je.isArrayLike=Ws,Je.isArrayLikeObject=Ns,Je.isBoolean=km,Je.isBuffer=Gr,Je.isDate=Nm,Je.isElement=Dm,Je.isEmpty=Fm,Je.isEqual=Rm,Je.isEqualWith=Om,Je.isError=Ya,Je.isFinite=Mm,Je.isFunction=kr,Je.isInteger=fu,Je.isLength=Oo,Je.isMap=mu,Je.isMatch=Bm,Je.isMatchWith=Pm,Je.isNaN=Lm,Je.isNative=zm,Je.isNil=jm,Je.isNull=Vm,Je.isNumber=gu,Je.isObject=ws,Je.isObjectLike=$s,Je.isPlainObject=Ui,Je.isRegExp=Xa,Je.isSafeInteger=Um,Je.isSet=Au,Je.isString=Mo,Je.isSymbol=Zs,Je.isTypedArray=Ai,Je.isUndefined=Gm,Je.isWeakMap=qm,Je.isWeakSet=Hm,Je.join=Hp,Je.kebabCase=M1,Je.last=ur,Je.lastIndexOf=Wp,Je.lowerCase=B1,Je.lowerFirst=P1,Je.lt=Wm,Je.lte=Qm,Je.max=Fg,Je.maxBy=Rg,Je.mean=Og,Je.meanBy=Mg,Je.min=Bg,Je.minBy=Pg,Je.stubArray=oc,Je.stubFalse=ac,Je.stubObject=Eg,Je.stubString=Cg,Je.stubTrue=wg,Je.multiply=Lg,Je.nth=Qp,Je.noConflict=fg,Je.noop=ic,Je.now=Do,Je.pad=L1,Je.padEnd=z1,Je.padStart=V1,Je.parseInt=j1,Je.random=N1,Je.reduce=Zf,Je.reduceRight=em,Je.repeat=U1,Je.replace=G1,Je.result=b1,Je.round=zg,Je.runInContext=pn,Je.sample=nm,Je.size=im,Je.snakeCase=q1,Je.some=om,Je.sortedIndex=tf,Je.sortedIndexBy=nf,Je.sortedIndexOf=sf,Je.sortedLastIndex=rf,Je.sortedLastIndexBy=of,Je.sortedLastIndexOf=af,Je.startCase=W1,Je.startsWith=Q1,Je.subtract=Vg,Je.sum=jg,Je.sumBy=Ug,Je.template=K1,Je.times=Sg,Je.toFinite=Nr,Je.toInteger=ns,Je.toLength=yu,Je.toLower=Y1,Je.toNumber=dr,Je.toSafeInteger=Km,Je.toString=ms,Je.toUpper=X1,Je.trim=J1,Je.trimEnd=Z1,Je.trimStart=eg,Je.truncate=tg,Je.unescape=ng,Je.uniqueId=$g,Je.upperCase=sg,Je.upperFirst=tc,Je.each=iu,Je.eachRight=ou,Je.first=tu,rc(Je,function(){var we={};return xr(Je,function($e,Me){gs.call(Je.prototype,Me)||(we[Me]=$e)}),we}(),{chain:!1}),Je.VERSION=ae,ir(["bind","bindKey","curry","curryRight","partial","partialRight"],function(we){Je[we].placeholder=Je}),ir(["drop","take"],function(we,$e){as.prototype[we]=function(Me){Me=Me===ne?1:Os(ns(Me),0);var Ve=this.__filtered__&&!$e?new as(this):this.clone();return Ve.__filtered__?Ve.__takeCount__=zs(Me,Ve.__takeCount__):Ve.__views__.push({size:zs(Me,Qt),type:we+(Ve.__dir__<0?"Right":"")}),Ve},as.prototype[we+"Right"]=function(Me){return this.reverse()[we](Me).reverse()}}),ir(["filter","map","takeWhile"],function(we,$e){var Me=$e+1,Ve=Me==ze||Me==Ye;as.prototype[we]=function(Ke){var Wt=this.clone();return Wt.__iteratees__.push({iteratee:Qn(Ke,3),type:Me}),Wt.__filtered__=Wt.__filtered__||Ve,Wt}}),ir(["head","last"],function(we,$e){var Me="take"+($e?"Right":"");as.prototype[we]=function(){return this[Me](1).value()[0]}}),ir(["initial","tail"],function(we,$e){var Me="drop"+($e?"":"Right");as.prototype[we]=function(){return this.__filtered__?new as(this):this[Me](1)}}),as.prototype.compact=function(){return this.filter(Ks)},as.prototype.find=function(we){return this.filter(we).head()},as.prototype.findLast=function(we){return this.reverse().find(we)},as.prototype.invokeMap=rs(function(we,$e){return typeof we=="function"?new as(this):this.map(function(Me){return Mi(Me,we,$e)})}),as.prototype.reject=function(we){return this.filter(Ro(Qn(we)))},as.prototype.slice=function(we,$e){we=ns(we);var Me=this;return Me.__filtered__&&(we>0||$e<0)?new as(Me):(we<0?Me=Me.takeRight(-we):we&&(Me=Me.drop(we)),$e!==ne&&($e=ns($e),Me=$e<0?Me.dropRight(-$e):Me.take($e-we)),Me)},as.prototype.takeRightWhile=function(we){return this.reverse().takeWhile(we).reverse()},as.prototype.toArray=function(){return this.take(Qt)},xr(as.prototype,function(we,$e){var Me=/^(?:filter|find|map|reject)|While$/.test($e),Ve=/^(?:head|last)$/.test($e),Ke=Je[Ve?"take"+($e=="last"?"Right":""):$e],Wt=Ve||/^find/.test($e);Ke&&(Je.prototype[$e]=function(){var Xt=this.__wrapped__,sn=Ve?[1]:arguments,mn=Xt instanceof as,Sn=sn[0],Tn=mn||Zn(Xt),Dn=function(is){var us=Ke.apply(Je,Br([is],sn));return Ve&&Bn?us[0]:us};Tn&&Me&&typeof Sn=="function"&&Sn.length!=1&&(mn=Tn=!1);var Bn=this.__chain__,qn=!!this.__actions__.length,Kn=Wt&&!Bn,ss=mn&&!qn;if(!Wt&&Tn){Xt=ss?Xt:new as(this);var Yn=we.apply(Xt,sn);return Yn.__actions__.push({func:ko,args:[Dn],thisArg:ne}),new ar(Yn,Bn)}return Kn&&ss?we.apply(this,sn):(Yn=this.thru(Dn),Kn?Ve?Yn.value()[0]:Yn.value():Yn)})}),ir(["pop","push","shift","sort","splice","unshift"],function(we){var $e=eo[we],Me=/^(?:push|sort|unshift)$/.test(we)?"tap":"thru",Ve=/^(?:pop|shift)$/.test(we);Je.prototype[we]=function(){var Ke=arguments;if(Ve&&!this.__chain__){var Wt=this.value();return $e.apply(Zn(Wt)?Wt:[],Ke)}return this[Me](function(Xt){return $e.apply(Zn(Xt)?Xt:[],Ke)})}}),xr(as.prototype,function(we,$e){var Me=Je[$e];if(Me){var Ve=Me.name+"";gs.call(hi,Ve)||(hi[Ve]=[]),hi[Ve].push({name:$e,func:Me})}}),hi[Eo(ne,Te).name]=[{name:"wrapper",func:ne}],as.prototype.clone=Qd,as.prototype.reverse=Kd,as.prototype.value=Yd,Je.prototype.at=Nf,Je.prototype.chain=Df,Je.prototype.commit=Ff,Je.prototype.next=Rf,Je.prototype.plant=Mf,Je.prototype.reverse=Bf,Je.prototype.toJSON=Je.prototype.valueOf=Je.prototype.value=Pf,Je.prototype.first=Je.prototype.head,$i&&(Je.prototype[$i]=Of),Je},li=Td();Hr?((Hr.exports=li)._=li,ta._=li):Bs._=li}).call(commonjsGlobal)})(lodash,lodash.exports);var lodashExports=lodash.exports;const _$1=getDefaultExportFromCjs(lodashExports),flipObject=re=>Object.fromEntries(Object.entries(re).map(ee=>ee.reverse()));function randomSeed(re){let ee=Math.sin(re)*1e4;return ee-=Math.floor(ee)}const CIDToURL=(re,ee="CDN",ne)=>{if(re==null)return"";switch(ee!=="CDN"&&!lodashExports.isEmpty(ne)&&console.warn("Using options for IPFS Gateways does nothing"),ee){case"CDN":return`https://cache.teia.rocks/ipfs/${re}`;case"CLOUDFLARE":return`https://cloudflare-ipfs.com/ipfs/${re}`;case"PINATA":return`https://gateway.pinata.cloud/ipfs/${re}`;case"IPFS":return`https://ipfs.io/ipfs/${re}`;case"DWEB":return`http://dweb.link/ipfs/${re}`;case"NFTSTORAGE":return`https://nftstorage.link/ipfs/${re}`;default:return console.error("please specify type"),re}},HashToURL=(re,ee="CDN",ne={size:"raw"})=>{if(re==null)return"";const ae=re.split("ipfs://")[1];return CIDToURL(ae,ee,ne)};function formatRoyalties(re){const ee=lodashExports.get(re,"royalty_receivers.0.royalties");return lodashExports.isNumber(ee)?`${ee/1e4}%`:"-"}const BANNER_URL="https://lists.teia.art/teia-status",PATH={FEED:"/",ISSUER:"/tz",COLLAB:"/kt",ABOUT:"/about",FAQ:"/faq",CLAIM:"/claim",DAO:"/dao",PROPOSAL:"/proposal",POLLS:"/polls",POLL:"/poll",SYNC:"/sync",MINT:"/mint",OBJKT:"/objkt",TAGS:"/tags"},MINT_FILESIZE=2e3,MIMETYPE={BMP:"image/bmp",FLAC:"audio/flac",GIF:"image/gif",GLB:"model/gltf-binary",GLTF:"model/gltf+json",DIRECTORY:"application/x-directory",JPEG:"image/jpeg",MD:"text/markdown",MIDI:"audio/midi",MID:"audio/mid",MP3:"audio/mpeg",MP4:"video/mp4",OGG:"audio/ogg",OGV:"video/ogg",PDF:"application/pdf",PNG:"image/png",QUICKTIME:"video/quicktime",SVG:"image/svg+xml",TIFF:"image/tiff",WAV:"audio/wav",WEBM:"video/webm",WEBP:"image/webp",XWAV:"audio/x-wav",ZIP:"application/zip",ZIP1:"application/x-zip-compressed",ZIP2:"multipart/x-zip",TXT:"text/plain"},AUDIO_MIME_TYPES=["audio/mpeg","audio/wav","audio/flac","audio/x-flac","audio/ogg"],ALLOWED_MIMETYPES=Object.keys(MIMETYPE).map(re=>MIMETYPE[re]).filter(re=>re!==MIMETYPE.GLTF||re!==MIMETYPE.TXT),ALLOWED_FILETYPES_LABEL=Object.entries(MIMETYPE).filter(re=>ALLOWED_MIMETYPES.includes(re[1])).filter(re=>!["ZIP1","ZIP2","OGV","BMP","TIFF","XWAV","QUICKTIME","WEBP","TXT"].includes(re[0])).map(re=>re[0]==="ZIP"?"HTML (ZIP ARCHIVE)":re[0]).join(", "),FEED_LIST=["Recent Sales","Random","New OBJKTs","Friends","Quake Aid","🇵🇸 Tez4Pal","🇺🇦 Ukraine","🇵🇰 Pakistan","🇮🇷 Iran","🏳️‍🌈 Tezospride","Art4Artists","Image","Video","Audio","3D","HTML & SVG","GIF","PDF","Markdown"],DEFAULT_START_FEED="Recent Sales",ALLOWED_COVER_MIMETYPES=[MIMETYPE.JPEG,MIMETYPE.PNG,MIMETYPE.GIF],AUTO_GENERATE_COVER_MIMETYPES=["text/plain","audio/midi","audio/mid"],ALLOWED_COVER_FILETYPES_LABEL="jpeg, png, gif",MAX_EDITIONS=1e4,MIN_ROYALTIES=10,MAX_ROYALTIES=25,IPFS_DEFAULT_THUMBNAIL_URI="ipfs://QmNrhZHUaEqxhyLfqoq1mtHSipkWHeT31LNHb1QEbDHgnc",MARKETPLACE_CONTRACT_V1="KT1Hkg5qeNhfwpKW4fXvq7HGZB9z2EnmCCA9",MARKETPLACE_CONTRACT_V2="KT1HbQepzV1nVGg8QVznG7z4RcHseD5kwqBn",MARKETPLACE_CONTRACT_TEIA="KT1PHubm9HtyQEJ4BBpMTVomq6mhbfNZ9z5w",MARKETPLACE_CONTRACT_OBJKTCOM_V1="KT1FvqJwEDWb1Gwc55Jd1jjTHRVWbYKUUpyq",MARKETPLACE_CONTRACT_OBJKTCOM_V4="KT1WvzYHCNBvDSdwafTHv7nJ1dWmZ8GCYuuC",MARKETPLACE_CONTRACTS_FROM_NAME={"HEN v1 Marketplace":MARKETPLACE_CONTRACT_V1,"HEN v2 Marketplace":MARKETPLACE_CONTRACT_V2,"Teia Marketplace":MARKETPLACE_CONTRACT_TEIA,"OBJKT v1 Marketplace":MARKETPLACE_CONTRACT_OBJKTCOM_V1,"OBJKT v4 Marketplace":MARKETPLACE_CONTRACT_OBJKTCOM_V4,"Crunchy Burner":"KT1CZMurPAjSfZqcn6LBUNUhG4byE6AJgDT6"},MARKETPLACE_CONTRACTS_TO_NAME=flipObject(MARKETPLACE_CONTRACTS_FROM_NAME),HEN_CONTRACT_FA2="KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",ART4ARTISTS_BREADFOND_CONTRACT="KT1LgnHXu8NVa674xJhSFhnKjrn7v2ZMsu2a",TEZ4PAL_FUNDING_ADDRESS="tz2TfuukrHVoeUqFvcRViPJ2VqL7nEQi7xgW",UKRAINE_FUNDING_CONTRACT="KT1DWnLiUkNtAQDErXxudFEH63JC6mqg3HEx",PAKISTAN_FUNDING_CONTRACT="KT1Jpf2TAcZS7QfBraQMBeCxjFhH6kAdDL4z",IRAN_FUNDING_CONTRACT="KT1KYfj97fpdomqyKsZSBdSVvh9afh93b4Ge",QUAKE_FUNDING_CONTRACT="KT1X1jyohFrZyDYWvCPXw9KvWxk2VDwxyg2g",MOROCCO_QUAKE_FUNDING_CONTRACT="KT1RwXEP8Sj1UQDHPG4oEjRohBdzG2R7FCpA",POLLS_CONTRACT="KT1SUExZfkmxf2fafrVgYjZGEKDete2siWoU",DAO_GOVERNANCE_CONTRACT="KT1GHX73W5BcjbYRSZSrUJcnZE3Uw92VYF66",DAO_TREASURY_CONTRACT="KT1J9FYz29RBQi1oGLw8uXyACrzXzV1dHuvb",DAO_TOKEN_CONTRACT="KT1QrtA753MSv8VGxkDrKKyJniG5JtuHHbtV",DAO_TOKEN_CLAIM_CONTRACT="KT1NrfV4e2qWqFrnrKyPTJth5wq2KP9VyBei",DISTRIBUTION_MAPPING_IPFS_PATH="QmbRmck8A5sBYQC7WEuK8dApnGQGXBhyPEgQpLm8ftfAtL",MERKLE_DATA_IPFS_PATHS={0:"QmUETPfQaoE2mTzBUMbXGk4VgJUqvitwmti2iuk7p1KUPa",1:"Qme3evVseBhLhoK4iefXiSHnr2wegGVnPccCYKQWqrDuPy",2:"QmdGaYaM1gdqqVVaApmwxdg5Mu5Ckkh9hdDSfnC6nP6G14",3:"QmZQzGdwZgMa8aNwhyFiLy2rKHmyvfFpi6pYfdE3t7wHTV",4:"QmbB2LyNoVEy6jZTZ66GZL4ousBxGA1EeiEV5vCWyH2Wkq",5:"QmPi7kuiRLD2rV854AV8gfMYchQhamxcp4X16phnyzdPLR",6:"QmdrhhjL2R49SYdwdPF3eEVU1GHDSdJ4Ykya3jvt7TdRTu",7:"QmXiD3T5erwNAZ5yFYpz3AA2h6FXfPMt7XzKCDrKwJSMDX",8:"QmW4jpn5EnjQx6aCbSAodEhh6BW2UqvZSGvubu2tv4UWCn"},CLAIMED_DAO_TOKENS_BIGMAP_ID="518731",DAO_TOKEN_DECIMALS=1e6,TOKENS=[{name:"TEIA",fa2:"KT1QrtA753MSv8VGxkDrKKyJniG5JtuHHbtV",multiasset:!1,decimals:DAO_TOKEN_DECIMALS,website:void 0},{name:"OBJKT",fa2:"KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",multiasset:!0,decimals:1,website:"https://teia.art/objkt/"},{name:"hDAO",fa2:"KT1AFA2mwNUMNd4SsujE1YYp29vd8BZejyKW",multiasset:!1,decimals:1e6,website:void 0}],SUBJKT_CONTRACT="KT1My1wDZHDGweCrJnQJi3wcFaS67iksirvj",PROXY_FACTORY_CONTRACT="KT1DoyD6kr8yLK8mRBFusyKYJUk2ZxNHKP1N",SIGNING_CONTRACT="KT1BcLnWRziLDNJNRn3phAANKrEBiXhytsMY",SWAP_TYPE_TEIA="TEIA",SWAP_TYPE_HEN="HEN",MAIN_MARKETPLACE_CONTRACT=MARKETPLACE_CONTRACT_TEIA,MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE=SWAP_TYPE_TEIA,BURN_ADDRESS="tz1burnburnburnburnburnburnburjAYjjX",COVER_COMPRESSOR_OPTIONS={quality:.85,maxWidth:1024,maxHeight:1024},THUMBNAIL_COMPRESSOR_OPTIONS={quality:.85,maxWidth:350,maxHeight:350},LICENSE_TYPES={none:"None (All rights reserved)","cc-by-4.0":"CC-BY-4.0 (Attribution)","cc-by-sa-4.0":"CC BY-SA 4.0 (Attribution ShareAlike)","cc-by-nd-4.0":"CC BY-ND 4.0 (Attribution-NoDerivs)","cc-by-nc-4.0":"CC BY-NC 4.0 (Attribution-NonCommercial)","cc-by-nc-sa-4.0":"CC BY-NC-SA 4.0 (Attribution-NonCommercial-ShareAlike)","cc-by-nc-nd-4.0":"CC BY-NC-ND 4.0 (Attribution-NonCommercial-NoDerivs)",custom:"Custom License"},LICENSE_TYPES_OPTIONS=Object.keys(LICENSE_TYPES).map(re=>({label:LICENSE_TYPES[re],value:re})),THEMES={dark:"Dark",light:"Light",kawaii:"Kawaii",aqua:"Aqua",coffee:"Coffee",midnight:"Midnight",grass:"Grass"},THEME_OPTIONS=Object.keys(THEMES).map(re=>({label:THEMES[re],value:re})),LANGUAGES={none:"None",af:"Afrikaans (Afrikaans)",sq:"Albanian (shqipe)",gsw:"Alsatian (Elsässisch)",am:"Amharic (አማርኛ)",ar:"Arabic (العربية)",hy:"Armenian (Հայերեն)",as:"Assamese (অসমীয়া)",az:"Azeri (Azərbaycan­ılı)",ba:"Bashkir (Башҡорт)",eu:"Basque (euskara)",be:"Belarusian (беларуская)",bn:"Bengali (বাংলা)",bs:"Bosnian (bosanski)/босански",br:"Breton (brezhoneg)",bg:"Bulgarian (български)",my:"Burmese (Myanmar)",ca:"Catalan (català)",zh:"Chinese (中文)",co:"Corsican (Corsu)",hr:"Croatian (hrvatski)",cs:"Czech (čeština)",da:"Danish (dansk)",prs:"Dari (درى)",dv:"Divehi (ދިވެހިބަސް)",nl:"Dutch (Nederlands)",en:"English (English)",et:"Estonian (eesti)",fo:"Faroese (føroyskt)",fil:"Filipino (Filipino)",fi:"Finnish (suomi)",fr:"French (français)",fy:"Frisian (Frysk)",gl:"Galician (galego)",ka:"Georgian (ქართული)",de:"German (Deutsch)",el:"Greek (ελληνικά)",kl:"Greenlandic (kalaallisut)",gu:"Gujarati (ગુજરાતી)",ha:"Hausa (Hausa)",he:"Hebrew (עברית)",hi:"Hindi (हिंदी)",hu:"Hungarian (magyar)",is:"Icelandic (íslenska)",ig:"Igbo (Igbo)",id:"Indonesian (Bahasa Indonesia)",iu:"Inuktitut (Inuktitut /ᐃᓄᒃᑎᑐᑦ (ᑲᓇᑕ))",ga:"Irish (Gaeilge)",it:"Italian (italiano)",ja:"Japanese (日本語)",quc:"K'iche (K'iche)",kn:"Kannada (ಕನ್ನಡ)",kk:"Kazakh (Қазащb)",km:"Khmer (ខ្មែរ)",rw:"Kinyarwanda (Kinyarwanda)",sw:"Kiswahili (Kiswahili)",kok:"Konkani (कोंकणी)",ko:"Korean (한국어)",ky:"Kyrgyz (Кыргыз)",lo:"Lao (ລາວ)",lv:"Latvian (latviešu)",lt:"Lithuanian (lietuvių)",dsb:"Lower Sorbian (dolnoserbšćina)",lb:"Luxembourgish (Lëtzebuergesch)",mk:"Macedonian (македонски јазик)",ms:"Malay (Bahasa Malaysia)",ml:"Malayalam (മലയാളം)",mt:"Maltese (Malti)",mi:"Maori (Reo Māori)",arn:"Mapudungun (Mapudungun)",mr:"Marathi (मराठी)",moh:"Mohawk (Kanien'kéha)",mn:"Mongolian (Монгол хэл/ᠮᠤᠨᠭᠭᠤᠯ ᠬᠡᠯᠡ)",ne:"Nepali (नेपाली (नेपाल))",nb:"Norwegian 'Bokmål' (norsk 'bokmål')",no:"Norwegian (norsk)",nn:"Norwegian Nynorsk (norsk (nynorsk))",oc:"Occitan (Occitan)",or:"Oriya (ଓଡ଼ିଆ)",ps:"Pashto (پښتو)",fa:"Persian (فارسى)",pl:"Polish (polski)",pt:"Portuguese (Português)",pa:"Punjabi (ਪੰਜਾਬੀ)",quz:"Quechua (runasimi)",ro:"Romanian (română)",rm:"Romansh (Rumantsch)",ru:"Russian (русский)",smn:"Sami Inari (sämikielâ)",smj:"Sami Lule (julevusámegiella)",se:"Sami Northern (davvisámegiella)",sms:"Sami Skolt (sääm´ǩiõll)",sma:"Sami Southern (åarjelsaemiengiel)e",sa:"Sanskrit (संस्कृत)",gd:"Scottish Gaelic (Gàidhlig)",sr:"Serbian (srpski/српски)",nso:"Sesotho (Sesotho sa Leboa)",tn:"Setswana (Setswana)",si:"Sinhala (සිංහ)",sk:"Slovak (slovenčina)",sl:"Slovenian (slovenski)",es:"Spanish (español)",sv:"Swedish (svenska)",syr:"Syriac (ܣܘܪܝܝܐ)",tg:"Tajik (Тоҷикӣ)",tzm:"Tamazight (Tamazight)",ta:"Tamil (தமிழ்)",tt:"Tatar (Татар)",te:"Telugu (తెలుగు)",th:"Thai (ไทย)",bo:"Tibetan (བོད་ཡིག)",tr:"Turkish (Türkçe)",tk:"Turkmen (türkmençe)",uk:"Ukrainian (українська)",hsb:"Upper (Sorbian) hornjoserbšćina",ur:"Urdu (اُردو)",ug:"Uyghur (ئۇيغۇرچە)",uz:"Uzbek (U'zbek/Ўзбек)",vi:"Vietnamese (Tiếng Việt)",cy:"Welsh (Cymraeg)",wo:"Wolof (Wolof)",sah:"Yakut (саха)",ii:"Yi (ꆈꌠꁱꂷ)",yo:"Yoruba (Yoruba)",xh:"isiXhosa (isiXhosa)",zu:"isiZulu (isiZulu)"},LANGUAGES_OPTIONS=Object.keys(LANGUAGES).map(re=>({label:LANGUAGES[re],value:re})),METADATA_CONTENT_RATING_MATURE="mature",METADATA_ACCESSIBILITY_HAZARDS_PHOTOSENS="flashing",CollaboratorType={ADMIN:"admin",CREATOR:"creator",BENEFICIARY:"benefactor",CORE_PARTICIPANT:"core_participant"},ossProjects=[{name:"Art4Artists Breadfond",address:"KT1LgnHXu8NVa674xJhSFhnKjrn7v2ZMsu2a"},{name:"Tez4Pal Fundraiser",address:"tz2TfuukrHVoeUqFvcRViPJ2VqL7nEQi7xgW"},{name:"TezQuakeAid Morocco Fundraiser",address:"KT1RwXEP8Sj1UQDHPG4oEjRohBdzG2R7FCpA"},{name:"TezQuakeAid Turkey/Syria Fundraiser",address:"KT1X1jyohFrZyDYWvCPXw9KvWxk2VDwxyg2g"},{name:"Tezos4Iran Fundraiser",address:"KT1KYfj97fpdomqyKsZSBdSVvh9afh93b4Ge"},{name:"SavePakistan Fundraiser",address:"KT1Jpf2TAcZS7QfBraQMBeCxjFhH6kAdDL4z"},{name:"Ukraine Relief Fundraiser",address:"KT1DWnLiUkNtAQDErXxudFEH63JC6mqg3HEx"},{name:"Teia Fountain Donations",address:"KT1EsvmkijLKPQmcJMbjDeKRXdwky1LWvwpG"},{name:"Community Representation/Equity Donations (Multisig)",address:"KT1TGJGjh9oMntcny4J7eVn1NDPgCXimHqss"},{name:"WG3.2 (collab contract dev team)",address:"KT1BBYzfuYjgRdeHJ79vG3fZd8cHW9ueCEcN"},{name:"Processing",address:"tz1aPHze1U5BEEKrGYt3dvY6aAQEeiWm8jjK"},{name:"three.js",address:"tz1ZUohCAkGjp7vPjQcC4VWcpgYZR1t3Si5C"}],collaboratorTemplate={address:"",tezAddress:"",shares:void 0},tipOptions=[1,5,10],createProxySchema=`
(map address (pair (bool %isCore) (nat %share))))
`,teiaSwapSchema=`
(pair (address %marketplaceAddress)
  (pair %params (address %fa2)
    (pair (nat %objkt_id)
      (pair (nat %objkt_amount)
        (pair (mutez %xtz_per_objkt)
          (pair (nat %royalties) (address %creator)))))))
`,teiaCancelSwapSchema=`
(pair (address %marketplaceAddress) (nat %swap_id))
`,rpc_nodes=["https://mainnet.api.tez.ie","https://mainnet.smartpy.io","https://rpc.tzbeta.net","https://mainnet.tezos.marigold.dev","https://rpc.tzkt.io/mainnet","https://mainnet.teia.rocks","https://teia.art/rpc","custom"],defaultValues$1={viewMode:"single",nsfwFriendly:!1,photosensitiveFriendly:!1,startFeed:DEFAULT_START_FEED,zen:!1,theme:"dark",themeDark:"dark",themeLight:"light",rpcNode:rpc_nodes[5],customRpcNode:"",tilted:!1,imgproxy:!0,has_seen_banner:!1},useLocalSettings=create$2()(subscribeWithSelector(persist((re,ee)=>({...defaultValues$1,setHasSeenBanner:ne=>re({has_seen_banner:ne}),setTilted:ne=>re({tilted:ne}),setImgproxy:ne=>re({imgproxy:ne}),toggleViewMode:()=>re(ne=>({viewMode:ne.viewMode==="single"?"masonry":"single"})),toggleZen:()=>re(ne=>({zen:!ne.zen})),setZen:ne=>re({zen:ne}),toggleTheme:()=>re(ne=>({theme:ne.theme===ne.themeDark?ne.themeLight:ne.themeDark})),setViewMode:ne=>re({viewMode:ne}),setTheme:(ne,ae)=>{re({theme:ne}),ae&&ee().applyTheme(ne)},applyTheme:ne=>{document.documentElement.setAttribute("data-theme",ne)},getRpcNode:()=>{const ne=ee().rpcNode;return ne==="custom"&&ee().customRpcNode||ne},setCustomRpcNode:ne=>{ne&&(ne.startsWith("http")||(ne=`https://${ne}`),re({customRpcNode:ne}))},setRpcNode:async ne=>{re({rpcNode:ne})},setNsfwFriendly:ne=>re({nsfwFriendly:ne}),setPhotosensitiveFriendly:ne=>re({photosensitiveFriendly:ne}),setStartFeed:ne=>re({startFeed:ne})}),{name:"settings",storage:createJSONStorage(()=>localStorage),version:2,partialize:re=>Object.fromEntries(Object.entries(re).filter(([ee])=>Object.keys(defaultValues$1).includes(ee))),onRehydrateStorage:re=>(ee,ne)=>{ne&&console.error("an error happened during hydration",ne)},migrate:(re,ee)=>(console.debug("migrating settings from version",ee),re.has_seen_banner=!1,re)}))),BaseTokenFieldsFragment=`
fragment baseTokenFields on tokens {
  artifact_uri
  display_uri
  thumbnail_uri
  metadata_uri

  artist_address
  artist_profile {
    name
    is_split
  }
  description
  editions
  fa2_address
  listings(where: {status: {_eq: "active"}}, order_by: {price: asc}) {
    amount
    amount_left
    contract_address
    price
    status
    type
  }
  mime_type
  minted_at
  metadata_status
  name
  price
  
  royalties
  royalties_total
 
  royalty_receivers {
    receiver_address
    royalties
  }
  teia_meta {
    accessibility
    content_rating
    is_signed
    preview_uri
  }

  tags {
    tag
  }
  
  token_id
}
`;async function fetchGraphQL(re,ee,ne){return await(await fetch("https://teztok.teia.rocks/v1/graphql",{method:"POST",body:JSON.stringify({query:re,variables:ne,operationName:ee})})).json()}const getCollabsForAddress=`query GetCollabs($address: String!) {
  split_contracts: teia_split_contracts(where: {_or: [{administrator_address: {_eq: $address}}, {shareholders: {shareholder_address: {_eq: $address}}}]}) {
    contract_address
    contract_profile {
      name
      metadata {
        data
      }
    }
    administrator_address
    shareholders {
      shareholder_address
      shareholder_profile {
        name
      }
      shares
      holder_type
    }
  }
}`,query_objkt=`
${BaseTokenFieldsFragment}
query objkt($id: String!) {
  tokens_by_pk(fa2_address: "${HEN_CONTRACT_FA2}", token_id: $id) {
    ...baseTokenFields
    artist_profile {
      name
      is_split
      split_contract {
        administrator_address
        shareholders {
          shareholder_address
          shareholder_profile {
            user_address
            name
          }
          holder_type
          shares
        }
      }
    }
    signatures {
      shareholder_address
    }
    rights
    right_uri
    listings(where: {status: {_eq: "active"}}, order_by: {price: asc}) {
      type
      contract_address
      amount
      amount_left
      swap_id
      ask_id
      offer_id
      price
      start_price
      end_price
      seller_address
      seller_profile {
        name
      }
      status
    }
    holdings(where: {amount: {_gt: "0"}}) {
      holder_address
      amount
      holder_profile {
        name
      }
    }
    tags {
      tag
    }
    events(where: { _or: [{ implements: {_eq: "SALE"} }, { type: {_in: ["HEN_MINT", "TEIA_SWAP", "HEN_SWAP", "HEN_SWAP_V2", "VERSUM_SWAP", "FA2_TRANSFER", "OBJKT_ASK", "OBJKT_ASK_V2", "OBJKT_ASK_V3", "OBJKT_ASK_V3_PRE", "OBJKT_ASK_V3_2"]} }]}, order_by: [{level: desc}, {opid: desc}]) {
      timestamp
      implements
      ophash
      id
      type
      price
      amount
      editions
      seller_address
      seller_profile {
        name
      }
      buyer_address
      buyer_profile {
        name
      }
      from_address
      from_profile {
        name
      }
      to_address
      to_profile {
        name
      }
    }
  }
}
`;async function getUser(re,ee="user_address"){var ae;const{data:ne}=await fetchGraphQL(`
  query addressQuery($addressOrName: String!) {
    teia_users(where: { ${ee}: {_eq: $addressOrName}}) {
      user_address
      name
      metadata {
        data
      }
    }
  }
  `,"addressQuery",{addressOrName:re});return(ae=ne==null?void 0:ne.teia_users)!=null&&ae.length?ne.teia_users[0]:null}async function fetchCollabCreations(re,ee="address"){const{data:ne}=await fetchGraphQL(`
    ${BaseTokenFieldsFragment}
    query GetCollabCreations($addressOrSubjkt: String!) {
      tokens(where: {${ee==="address"?"artist_address: {_eq: $addressOrSubjkt}":"artist_profile: {name: {_eq: $addressOrSubjkt }}"}, editions: {_gt: "0"}}, order_by: {token_id: desc}) {
        ...baseTokenFields
        tags {
          tag
        }
      }
      split_contracts: teia_split_contracts(where: {${ee==="address"?"contract_address: {_eq: $addressOrSubjkt}":"contract_profile: {name: {_eq: $addressOrSubjkt}}"}}) {
        administrator_address
        shareholders {
          shareholder_address
          shareholder_profile {
            name
          }
          holder_type
        }
        contract_address
        contract_profile {
          name
          metadata {
            data
          }
        }
      }
    }`,"GetCollabCreations",{addressOrSubjkt:re});return ne}async function fetchObjktDetails(re){const{data:ee}=await fetchGraphQL(query_objkt,"objkt",{id:re});return ee.tokens_by_pk}const GetUserMetadata=async re=>await getTzktData(`/v1/accounts/${re}/metadata`);async function getTzktData(re,ee={},ne=!1){const ae="https://api.tzkt.io"+re,ce=await axios.get(ae,{params:ee}).catch(le=>console.log(`The following TzKT query returned an error: ${ae}`,le));return ne&&console.log(`Executed TzKT query: ${ae}`),ce==null?void 0:ce.data}async function getClaimedDaoTokens(re){const ee=await getTzktData(`/v1/bigmaps/${CLAIMED_DAO_TOKENS_BIGMAP_ID}/keys/${re}`);return ee!=null&&ee.value?parseInt(ee.value)/DAO_TOKEN_DECIMALS:0}const teiaSwapLambda=[{prim:"CDR"},{prim:"UNPACK",args:[{prim:"pair",args:[{prim:"address",annots:["%marketplaceAddress"]},{prim:"pair",args:[{prim:"address",annots:["%fa2"]},{prim:"pair",args:[{prim:"nat",annots:["%objkt_id"]},{prim:"pair",args:[{prim:"nat",annots:["%objkt_amount"]},{prim:"pair",args:[{prim:"mutez",annots:["%xtz_per_objkt"]},{prim:"pair",args:[{prim:"nat",annots:["%royalties"]},{prim:"address",annots:["%creator"]}]}]}]}]}],annots:["%params"]}]}]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Unpack failed"}]},{prim:"FAILWITH"}],[]]},{prim:"DUP"},{prim:"CAR"},{prim:"CONTRACT",args:[{prim:"pair",args:[{prim:"address",annots:["%fa2"]},{prim:"pair",args:[{prim:"nat",annots:["%objkt_id"]},{prim:"pair",args:[{prim:"nat",annots:["%objkt_amount"]},{prim:"pair",args:[{prim:"mutez",annots:["%xtz_per_objkt"]},{prim:"pair",args:[{prim:"nat",annots:["%royalties"]},{prim:"address",annots:["%creator"]}]}]}]}]}]}],annots:["%swap"]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Marketplace V3 is not found"}]},{prim:"FAILWITH"}],[]]},{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]},{prim:"DIG",args:[{int:"2"}]},{prim:"CDR"},{prim:"TRANSFER_TOKENS"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"SWAP"},{prim:"CONS"}],Packer$1=new MichelCodecPacker,packData=(re,ee)=>{const ae=new Parser$2().parseData(ee);if(ae)return{data:new Schema(ae).Encode(re),type:ae};throw Error("Cannot pack data",{cause:"invalid schema"})};function createAddOperatorCall(re,ee,ne,ae){return{kind:OpKind.TRANSACTION,...re.methods.update_operators([{add_operator:{operator:ae,token_id:parseFloat(ee),owner:ne}}]).toTransferParams({amount:0,mutez:!0,storageLimit:175})}}function createRemoveOperatorCall(re,ee,ne,ae){return{kind:OpKind.TRANSACTION,...re.methods.update_operators([{remove_operator:{operator:ae,token_id:parseFloat(ee),owner:ne}}]).toTransferParams({amount:0,mutez:!0,storageLimit:175})}}function createSwapCall(re,ee,ne,ae,ce,le,ue,he,fe=MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE){if(fe===SWAP_TYPE_TEIA)return{kind:OpKind.TRANSACTION,...re.methods.swap(ee,parseFloat(ne),ce,le,ue,he).toTransferParams({amount:0,mutez:!0,storageLimit:300})};if(fe===SWAP_TYPE_HEN)return{kind:OpKind.TRANSACTION,...re.methods.swap(he,ce,ne,ue,le).toTransferParams({amount:0,mutez:!0,storageLimit:300})};throw Error("Invalid Swap Type",{cause:"Requested swap is neither a Teia or HEN swap"})}function createSwapCalls(re,ee,ne,ae,ce,le,ue,he,fe,me,ge=MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE){return[createAddOperatorCall(re,ce,le,ae),createSwapCall(ee,ne,ce,le,ue,he,fe,me,ge),createRemoveOperatorCall(re,ce,le,ae)]}async function createLambdaSwapCall(re,ee,ne,ae,ce,le,ue,he,fe){const me={marketplaceAddress:ee,params:{fa2:ne,objkt_id:parseFloat(ae),objkt_amount:le,royalties:he,xtz_per_objkt:ue,creator:fe}},ge=packData(me,teiaSwapSchema),{packed:ve}=await Packer$1.packData(ge);return{kind:OpKind.TRANSACTION,...re.methods.execute(teiaSwapLambda,ve).toTransferParams({amount:0,mutez:!0,storageLimit:300})}}const teiaCancelSwapLambda=[{prim:"CDR"},{prim:"UNPACK",args:[{prim:"pair",args:[{prim:"address",annots:["%marketplaceAddress"]},{prim:"nat",annots:["%swap_id"]}]}]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Unpack failed"}]},{prim:"FAILWITH"}],[]]},{prim:"DUP"},{prim:"CAR"},{prim:"CONTRACT",args:[{prim:"nat"}],annots:["%cancel_swap"]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Marketplace V3 is not found"}]},{prim:"FAILWITH"}],[]]},{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]},{prim:"DIG",args:[{int:"2"}]},{prim:"CDR"},{prim:"TRANSFER_TOKENS"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"SWAP"},{prim:"CONS"}],Tezos=new TezosToolkit(useLocalSettings.getState().getRpcNode()),Packer=new MichelCodecPacker,wallet=new BeaconWallet({name:"teia.art",appUrl:"https://teia.art",iconUrl:"https://teia.art/icons/android-chrome-512x512.png",preferredNetwork:NetworkType.MAINNET});Tezos.setWalletProvider(wallet);let current;wallet.client.subscribeToEvent(BeaconEvent.ACTIVE_ACCOUNT_SET,async re=>{console.log(`${BeaconEvent.ACTIVE_ACCOUNT_SET} triggered: `,re==null?void 0:re.address),re&&(current=re.address)});const useUserStore=create$2()(subscribeWithSelector(persist((re,ee)=>({address:void 0,proxyAddress:void 0,proxyName:void 0,subjktInfo:void 0,handleOp:async(ne,ae,ce)=>{const le=useModalStore.getState().step,ue=useModalStore.getState().show,he=useModalStore.getState().showError,fe=setTimeout(()=>{ue(ae,"Something seems to hang, did you abort the transaction?")},15e3),me=await ne.send(ce);clearTimeout(fe);try{le(ae,`Awaiting for confirmation of the [operation](https://tzkt.io/${me.opHash})
              *closing this dialog has no effect on the transaction*`),useModalStore.setState({confirm:!0});const ge=await me.confirmation();return ue(ge.completed?`${ae} Successful`:`${ae} Error`,`[see on tzkt.io](https://tzkt.io/${me.opHash})`),me.opHash}catch(ge){he("Transfer",ge)}},sync:async ne=>{const ae={type:NetworkType.MAINNET,rpcUrl:(ne==null?void 0:ne.rpcNode)||useLocalSettings.getState().getRpcNode()};await wallet.client.requestPermissions({network:ae});const ce=await getUser(current);return console.log("getting user info",ce),re({address:current,userInfo:await getUser(current)}),current},unsync:async()=>{await wallet.client.clearActiveAccount(),re({address:void 0,userInfo:void 0,proxyAddress:void 0,proxyName:void 0})},setAccount:async()=>{const ne=Tezos!==void 0?await wallet.client.getActiveAccount():void 0;ne!=null&&ne.address&&re({userInfo:await getUser(ne.address,"user_address"),address:ne.address})},getBalance:async ne=>{if(ne)return(await Tezos.tz.getBalance(ne)).toNumber();const ae=ee().address,ce=ee().proxyAddress;return ae?(await Tezos.tz.getBalance(ce||ae)).toNumber():-1},resetProxy:()=>re({proxyAddress:void 0,proxyName:void 0}),registry:async(ne,ae)=>{const ce=ee().handleOp,le=ee().proxyAddress||SUBJKT_CONTRACT,he=(await Tezos.wallet.at(le)).methods.registry(`ipfs://${ae}`.split("").reduce((fe,me)=>fe+=me.charCodeAt(0).toString(16).padStart(2,"0"),""),ne.split("").reduce((fe,me)=>fe+=me.charCodeAt(0).toString(16).padStart(2,"0"),""));return await ce(he,"Editing Profile",{amount:0})},swap:async(ne,ae,ce,le,ue,he)=>{const{proxyAddress:fe,handleOp:me}=ee(),ge=useModalStore.getState().showError,ve=useModalStore.getState().step;if(ve("Swap","Preparing swap",!0),fe){const Se=await Tezos.wallet.at(fe),Te=await createLambdaSwapCall(Se,MAIN_MARKETPLACE_CONTRACT,HEN_CONTRACT_FA2,le,fe,he,ce,ae,ue),ke=[createAddOperatorCall(Se,le,fe,MAIN_MARKETPLACE_CONTRACT),Te,createRemoveOperatorCall(Se,le,fe,MAIN_MARKETPLACE_CONTRACT)],Ne=Tezos.wallet.batch(ke);return await me(Ne,"Swap")}const ye=HEN_CONTRACT_FA2,[be,Ee]=await Promise.all([Tezos.wallet.at(ye),Tezos.wallet.at(MAIN_MARKETPLACE_CONTRACT)]),Ce=createSwapCalls(be,Ee,ye,MAIN_MARKETPLACE_CONTRACT,le,ne,he,ce,ae,ue,MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE);try{const Se=Tezos.wallet.batch(Ce);return await me(Se,"Swap")}catch(Se){ge("Swap",Se)}},burn:async(ne,ae)=>{const{proxyAddress:ce,handleOp:le}=ee(),ue=useModalStore.getState().step;ue("Burn",`Burning ${ae} edition of OBJKT #${ne}`,!0);const he=await wallet.client.getActiveAccount(),fe=ce||HEN_CONTRACT_FA2,me=ce||(he==null?void 0:he.address);console.debug("Using",fe,"for burn");const ve=(await Tezos.wallet.at(fe)).methods.transfer([{from_:me,txs:[{to_:BURN_ADDRESS,token_id:parseInt(ne),amount:ae}]}]);return await le(ve,"Burn")},transfer:async ne=>{const ae=ee().handleOp,ce=useModalStore.getState().showError,le=useModalStore.getState().step;le("Transferring tokens","Waiting for confirmation",!0);const{proxyAddress:ue,address:he}=ee(),fe=ue||HEN_CONTRACT_FA2;try{const ge=(await Tezos.wallet.at(fe)).methods.transfer([{from_:ue||he,txs:ne}]);return await ae(ge,"Transfer")}catch(me){ce("Transfer",me)}},donate:async(ne,ae)=>{const ce=ee().handleOp,le=useModalStore.getState().showError,ue=useModalStore.getState().show;(isNaN(ne)||ne<=0)&&ue("Invalid amount","Please enter a valid donation amount");try{await ee().sync();const he=[{to:ae,amount:ne,kind:OpKind.TRANSACTION}];return await ce(Tezos.wallet.batch(he),"Donate")}catch(he){le("Donate",he)}},collect:async ne=>{const ae=ee().handleOp,ce=useModalStore.getState().show,le=useModalStore.getState().showError;let ue;try{if(["HEN_SWAP_V2","TEIA_SWAP"].includes(ne.type)?ue=(await Tezos.wallet.at(ne.contract_address)).methods.collect(parseInt(ne.swap_id)):["OBJKT_ASK","OBJKT_ASK_V2"].includes(ne.type)?ue=(await Tezos.wallet.at(ne.contract_address)).methods.fulfill_ask(ne.ask_id):["OBJKT_ASK_V3","OBJKT_ASK_V3_PRE","OBJKT_ASK_V3_2"].includes(ne.type)?ue=(await Tezos.wallet.at(ne.contract_address)).methods.fulfill_ask(ne.ask_id,1,null,null,MichelsonMap.fromLiteral({})):["VERSUM_SWAP"].includes(ne.type)&&(ue=(await Tezos.wallet.at(ne.contract_address)).methods.collect_swap("1",ne.swap_id)),ue)return await ae(ue,"Collect",{amount:parseInt(ne.price),mutez:!0,storageLimit:350});ce("Collect Error","unsupported listing")}catch(he){le("Collect",he)}},cancelV1:async ne=>await Tezos.wallet.at(MARKETPLACE_CONTRACT_V1).then(ae=>ae.methods.cancel_swap(parseFloat(ne)).send({amount:0,storageLimit:310})).catch(ae=>ae),cancel:async(ne,ae)=>{const{proxyAddress:ce,handleOp:le}=ee(),ue=useModalStore.getState().step;if(ue("Cancel Swap","Waiting for wallet",!0),ce&&ne===MARKETPLACE_CONTRACT_TEIA){const ve=packData({marketplaceAddress:ne,swap_id:ae},teiaCancelSwapSchema),{packed:ye}=await Packer.packData(ve),Ee=(await Tezos.wallet.at(ce)).methods.execute(teiaCancelSwapLambda,ye);return le(Ee,"Cancel Swap",{amount:0,storageLimit:310})}const me=(await Tezos.wallet.at(ce||ne)).methods.cancel_swap(ae);return le(me,"Cancel Swap",{amount:0,storageLimit:310})},reswap:async(ne,ae,ce)=>{const{proxyAddress:le,handleOp:ue}=ee(),he=useModalStore.getState().step,fe=useModalStore.getState().showError,me=useModalStore.getState().show;he("Reswapping",`reswapping ${ne.token_id} for ${ae/1e6}tz`,!0),console.debug({nft:ne,price:ae,swap:ce});const ge=ne.token_id,ve=ne.artist_address,ye=ce.seller_address;if(le){me("Reswap","reswapping is not yet supported in collab mode");return}const[be,Ee,Ce]=await Promise.all([Tezos.wallet.at(HEN_CONTRACT_FA2),Tezos.wallet.at(ce.contract_address),Tezos.wallet.at(MAIN_MARKETPLACE_CONTRACT)]),Se=Ee,Te=[{kind:OpKind.TRANSACTION,...Se.methods.cancel_swap(ce.swap_id).toTransferParams({amount:0,mutez:!0,storageLimit:310})},...createSwapCalls(be,Ce,HEN_CONTRACT_FA2,MAIN_MARKETPLACE_CONTRACT,ge,ye,ce.amount_left,ae,ne.royalties_total/1e3,ve,MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE)];console.debug(Te);try{const ke=Tezos.wallet.batch(Te);return await ue(ke,"Reswap")}catch(ke){fe("Reswap",ke)}},mint:async(ne,ae,ce,le)=>{const ue=ee().handleOp,he=useModalStore.getState().step,{proxyAddress:fe}=ee();console.debug("CID",ce),he("Mint","minting OBJKT",!0);const ge=(await Tezos.wallet.at(fe||MARKETPLACE_CONTRACT_V1)).methods.mint_OBJKT(ne,ae,`ipfs://${ce}`.split("").reduce((ve,ye)=>ve+=ye.charCodeAt(0).toString(16).padStart(2,"0"),""),le*10);return await ue(ge,"Mint",{amount:0,storageLimit:310})}}),{name:"user",storage:createJSONStorage(()=>localStorage)}))),MenuItem=({label:re,route:ee,need_sync:ne,className:ae})=>{re=re||capitalizeFirstLetter(ee);const ce=useUserStore(ue=>ue.address),le=useModalStore(ue=>ue.setCollapsed);return jsx$1(Button,{className:`${ne&&!ce?styles$Y.disabled:""} ${ae||""} `,to:ne?"/sync":`/${ee}`,state:ne?`/${ee}`:null,onTo:()=>le(!0),children:re})},base_toggle="_base_toggle_17ekr_216",box_toggle="_box_toggle_17ekr_225",toggled="_toggled_17ekr_236",minimal_toggle="_minimal_toggle_17ekr_241",styles$X={base_toggle,box_toggle,toggled,minimal_toggle},useControlled=(re,ee)=>{const ne=reactExports.useRef(!1);ne.current=re!==void 0;const[ae,ce]=reactExports.useState(ee),le=ne.current?re:ae,ue=reactExports.useCallback(he=>{ne.current||ce(he)},[ne]);return[le,ue,ne.current]},Toggle=({label:re,initial:ee,toggled:ne,style:ae={},alt:ce,box:le,onToggle:ue,className:he})=>{const[fe,me]=useControlled(ne,ee),ge=reactExports.useCallback(ye=>{const{checked:be}=ye.target;me(be),ue==null||ue(be)},[me,ue]),ve=classNames$1({[styles$X.base_toggle]:!0,[styles$X.box_toggle]:le,[styles$X.toggled]:fe,className:he});return jsxs("label",{style:ae,className:ve,children:[jsx$1("input",{defaultChecked:ee,checked:ne,"aria-label":ce||(typeof re=="string"?re:"icon-toggle"),"aria-checked":fe,type:"checkbox",onChange:ge}),re]})},IconToggle=({icon:re,toggled:ee,alt:ne,onClick:ae})=>{const ce=classNames$1({[styles$X.base_toggle]:!0,[styles$X.minimal_toggle]:!0,[styles$X.toggled]:ee});return jsx$1(Button,{onClick:ae,alt:ne,className:ce,children:re})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __awaiter(re,ee,ne,ae){function ce(le){return le instanceof ne?le:new ne(function(ue){ue(le)})}return new(ne||(ne=Promise))(function(le,ue){function he(ge){try{me(ae.next(ge))}catch(ve){ue(ve)}}function fe(ge){try{me(ae.throw(ge))}catch(ve){ue(ve)}}function me(ge){ge.done?le(ge.value):ce(ge.value).then(he,fe)}me((ae=ae.apply(re,ee||[])).next())})}function __generator(re,ee){var ne={label:0,sent:function(){if(le[0]&1)throw le[1];return le[1]},trys:[],ops:[]},ae,ce,le,ue;return ue={next:he(0),throw:he(1),return:he(2)},typeof Symbol=="function"&&(ue[Symbol.iterator]=function(){return this}),ue;function he(me){return function(ge){return fe([me,ge])}}function fe(me){if(ae)throw new TypeError("Generator is already executing.");for(;ne;)try{if(ae=1,ce&&(le=me[0]&2?ce.return:me[0]?ce.throw||((le=ce.return)&&le.call(ce),0):ce.next)&&!(le=le.call(ce,me[1])).done)return le;switch(ce=0,le&&(me=[me[0]&2,le.value]),me[0]){case 0:case 1:le=me;break;case 4:return ne.label++,{value:me[1],done:!1};case 5:ne.label++,ce=me[1],me=[0];continue;case 7:me=ne.ops.pop(),ne.trys.pop();continue;default:if(le=ne.trys,!(le=le.length>0&&le[le.length-1])&&(me[0]===6||me[0]===2)){ne=0;continue}if(me[0]===3&&(!le||me[1]>le[0]&&me[1]<le[3])){ne.label=me[1];break}if(me[0]===6&&ne.label<le[1]){ne.label=le[1],le=me;break}if(le&&ne.label<le[2]){ne.label=le[2],ne.ops.push(me);break}le[2]&&ne.ops.pop(),ne.trys.pop();continue}me=ee.call(re,ne)}catch(ge){me=[6,ge],ce=0}finally{ae=le=0}if(me[0]&5)throw me[1];return{value:me[0]?me[1]:void 0,done:!0}}}var noop$4=function(){},UNDEFINED=noop$4(),OBJECT=Object,isUndefined$1=function(re){return re===UNDEFINED},isFunction$6=function(re){return typeof re=="function"},mergeObjects=function(re,ee){return OBJECT.assign({},re,ee)},STR_UNDEFINED="undefined",hasWindow=function(){return typeof window!=STR_UNDEFINED},hasDocument=function(){return typeof document!=STR_UNDEFINED},hasRequestAnimationFrame=function(){return hasWindow()&&typeof window.requestAnimationFrame!=STR_UNDEFINED},table$1=new WeakMap,counter=0,stableHash=function(re){var ee=typeof re,ne=re&&re.constructor,ae=ne==Date,ce,le;if(OBJECT(re)===re&&!ae&&ne!=RegExp){if(ce=table$1.get(re),ce)return ce;if(ce=++counter+"~",table$1.set(re,ce),ne==Array){for(ce="@",le=0;le<re.length;le++)ce+=stableHash(re[le])+",";table$1.set(re,ce)}if(ne==OBJECT){ce="#";for(var ue=OBJECT.keys(re).sort();!isUndefined$1(le=ue.pop());)isUndefined$1(re[le])||(ce+=le+":"+stableHash(re[le])+",");table$1.set(re,ce)}}else ce=ae?re.toJSON():ee=="symbol"?re.toString():ee=="string"?JSON.stringify(re):""+re;return ce},online=!0,isOnline=function(){return online},hasWin=hasWindow(),hasDoc=hasDocument(),onWindowEvent=hasWin&&window.addEventListener?window.addEventListener.bind(window):noop$4,onDocumentEvent=hasDoc?document.addEventListener.bind(document):noop$4,offWindowEvent=hasWin&&window.removeEventListener?window.removeEventListener.bind(window):noop$4,offDocumentEvent=hasDoc?document.removeEventListener.bind(document):noop$4,isVisible=function(){var re=hasDoc&&document.visibilityState;return isUndefined$1(re)||re!=="hidden"},initFocus=function(re){return onDocumentEvent("visibilitychange",re),onWindowEvent("focus",re),function(){offDocumentEvent("visibilitychange",re),offWindowEvent("focus",re)}},initReconnect=function(re){var ee=function(){online=!0,re()},ne=function(){online=!1};return onWindowEvent("online",ee),onWindowEvent("offline",ne),function(){offWindowEvent("online",ee),offWindowEvent("offline",ne)}},preset={isOnline,isVisible},defaultConfigOptions={initFocus,initReconnect},IS_SERVER=!hasWindow()||"Deno"in window,rAF=function(re){return hasRequestAnimationFrame()?window.requestAnimationFrame(re):setTimeout(re,1)},useIsomorphicLayoutEffect=IS_SERVER?reactExports.useEffect:reactExports.useLayoutEffect,navigatorConnection=typeof navigator<"u"&&navigator.connection,slowConnection=!IS_SERVER&&navigatorConnection&&(["slow-2g","2g"].includes(navigatorConnection.effectiveType)||navigatorConnection.saveData),serialize$1=function(re){if(isFunction$6(re))try{re=re()}catch{re=""}var ee=[].concat(re);re=typeof re=="string"?re:(Array.isArray(re)?re.length:re)?stableHash(re):"";var ne=re?"$swr$"+re:"";return[re,ee,ne]},SWRGlobalState=new WeakMap,FOCUS_EVENT=0,RECONNECT_EVENT=1,MUTATE_EVENT=2,broadcastState=function(re,ee,ne,ae,ce,le,ue){ue===void 0&&(ue=!0);var he=SWRGlobalState.get(re),fe=he[0],me=he[1],ge=he[3],ve=fe[ee],ye=me[ee];if(ue&&ye)for(var be=0;be<ye.length;++be)ye[be](ne,ae,ce);return le&&(delete ge[ee],ve&&ve[0])?ve[0](MUTATE_EVENT).then(function(){return re.get(ee)}):re.get(ee)},__timestamp=0,getTimestamp=function(){return++__timestamp},internalMutate=function(){for(var re=[],ee=0;ee<arguments.length;ee++)re[ee]=arguments[ee];return __awaiter(void 0,void 0,void 0,function(){var ne,ae,ce,le,ue,he,fe,me,ge,ve,ye,be,Ee,Ce,Se,Te,ke,Ne,Fe,De,Oe;return __generator(this,function(Re){switch(Re.label){case 0:if(ne=re[0],ae=re[1],ce=re[2],le=re[3],ue=typeof le=="boolean"?{revalidate:le}:le||{},he=isUndefined$1(ue.populateCache)?!0:ue.populateCache,fe=ue.revalidate!==!1,me=ue.rollbackOnError!==!1,ge=ue.optimisticData,ve=serialize$1(ae),ye=ve[0],be=ve[2],!ye)return[2];if(Ee=SWRGlobalState.get(ne),Ce=Ee[2],re.length<3)return[2,broadcastState(ne,ye,ne.get(ye),UNDEFINED,UNDEFINED,fe,!0)];if(Se=ce,ke=getTimestamp(),Ce[ye]=[ke,0],Ne=!isUndefined$1(ge),Fe=ne.get(ye),Ne&&(De=isFunction$6(ge)?ge(Fe):ge,ne.set(ye,De),broadcastState(ne,ye,De)),isFunction$6(Se))try{Se=Se(ne.get(ye))}catch(Be){Te=Be}return Se&&isFunction$6(Se.then)?[4,Se.catch(function(Be){Te=Be})]:[3,2];case 1:if(Se=Re.sent(),ke!==Ce[ye][0]){if(Te)throw Te;return[2,Se]}else Te&&Ne&&me&&(he=!0,Se=Fe,ne.set(ye,Fe));Re.label=2;case 2:return he&&(Te||(isFunction$6(he)&&(Se=he(Se,Fe)),ne.set(ye,Se)),ne.set(be,mergeObjects(ne.get(be),{error:Te}))),Ce[ye][1]=getTimestamp(),[4,broadcastState(ne,ye,Se,Te,UNDEFINED,fe,!!he)];case 3:if(Oe=Re.sent(),Te)throw Te;return[2,he?Oe:Se]}})})},revalidateAllKeys=function(re,ee){for(var ne in re)re[ne][0]&&re[ne][0](ee)},initCache=function(re,ee){if(!SWRGlobalState.has(re)){var ne=mergeObjects(defaultConfigOptions,ee),ae={},ce=internalMutate.bind(UNDEFINED,re),le=noop$4;if(SWRGlobalState.set(re,[ae,{},{},{},ce]),!IS_SERVER){var ue=ne.initFocus(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,ae,FOCUS_EVENT))),he=ne.initReconnect(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,ae,RECONNECT_EVENT)));le=function(){ue&&ue(),he&&he(),SWRGlobalState.delete(re)}}return[re,ce,le]}return[re,SWRGlobalState.get(re)[4]]},onErrorRetry=function(re,ee,ne,ae,ce){var le=ne.errorRetryCount,ue=ce.retryCount,he=~~((Math.random()+.5)*(1<<(ue<8?ue:8)))*ne.errorRetryInterval;!isUndefined$1(le)&&ue>le||setTimeout(ae,he,ce)},_a$b=initCache(new Map),cache$2=_a$b[0],mutate=_a$b[1],defaultConfig=mergeObjects({onLoadingSlow:noop$4,onSuccess:noop$4,onError:noop$4,onErrorRetry,onDiscarded:noop$4,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:slowConnection?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:slowConnection?5e3:3e3,compare:function(re,ee){return stableHash(re)==stableHash(ee)},isPaused:function(){return!1},cache:cache$2,mutate,fallback:{}},preset),mergeConfigs=function(re,ee){var ne=mergeObjects(re,ee);if(ee){var ae=re.use,ce=re.fallback,le=ee.use,ue=ee.fallback;ae&&le&&(ne.use=ae.concat(le)),ce&&ue&&(ne.fallback=mergeObjects(ce,ue))}return ne},SWRConfigContext=reactExports.createContext({}),useStateWithDeps=function(re,ee){var ne=reactExports.useState({})[1],ae=reactExports.useRef(re),ce=reactExports.useRef({data:!1,error:!1,isValidating:!1}),le=reactExports.useCallback(function(ue){var he=!1,fe=ae.current;for(var me in ue){var ge=me;fe[ge]!==ue[ge]&&(fe[ge]=ue[ge],ce.current[ge]&&(he=!0))}he&&!ee.current&&ne({})},[]);return useIsomorphicLayoutEffect(function(){ae.current=re}),[ae,ce.current,le]},normalize=function(re){return isFunction$6(re[1])?[re[0],re[1],re[2]||{}]:[re[0],null,(re[1]===null?re[2]:re[1])||{}]},useSWRConfig=function(){return mergeObjects(defaultConfig,reactExports.useContext(SWRConfigContext))},withArgs=function(re){return function(){for(var ne=[],ae=0;ae<arguments.length;ae++)ne[ae]=arguments[ae];var ce=useSWRConfig(),le=normalize(ne),ue=le[0],he=le[1],fe=le[2],me=mergeConfigs(ce,fe),ge=re,ve=me.use;if(ve)for(var ye=ve.length;ye-- >0;)ge=ve[ye](ge);return ge(ue,he||me.fetcher,me)}},subscribeCallback=function(re,ee,ne){var ae=ee[re]||(ee[re]=[]);return ae.push(ne),function(){var ce=ae.indexOf(ne);ce>=0&&(ae[ce]=ae[ae.length-1],ae.pop())}},WITH_DEDUPE={dedupe:!0},useSWRHandler=function(re,ee,ne){var ae=ne.cache,ce=ne.compare,le=ne.fallbackData,ue=ne.suspense,he=ne.revalidateOnMount,fe=ne.refreshInterval,me=ne.refreshWhenHidden,ge=ne.refreshWhenOffline,ve=SWRGlobalState.get(ae),ye=ve[0],be=ve[1],Ee=ve[2],Ce=ve[3],Se=serialize$1(re),Te=Se[0],ke=Se[1],Ne=Se[2],Fe=reactExports.useRef(!1),De=reactExports.useRef(!1),Oe=reactExports.useRef(Te),Re=reactExports.useRef(ee),Be=reactExports.useRef(ne),Le=function(){return Be.current},je=function(){return Le().isVisible()&&Le().isOnline()},Ge=function(an){return ae.set(Ne,mergeObjects(ae.get(Ne),an))},qe=ae.get(Te),Ue=isUndefined$1(le)?ne.fallback[Te]:le,ze=isUndefined$1(qe)?Ue:qe,He=ae.get(Ne)||{},Ye=He.error,Xe=!Fe.current,We=function(){return Xe&&!isUndefined$1(he)?he:Le().isPaused()?!1:ue?isUndefined$1(ze)?!1:ne.revalidateIfStale:isUndefined$1(ze)||ne.revalidateIfStale},Ze=function(){return!Te||!ee?!1:He.isValidating?!0:Xe&&We()},Vt=Ze(),Qt=useStateWithDeps({data:ze,error:Ye,isValidating:Vt},De),Yt=Qt[0],Jt=Qt[1],rn=Qt[2],nn=reactExports.useCallback(function(an){return __awaiter(void 0,void 0,void 0,function(){var un,bn,En,$n,On,zn,Rn,Ut,tn,dn,xn,An,vn;return __generator(this,function(Nn){switch(Nn.label){case 0:if(un=Re.current,!Te||!un||De.current||Le().isPaused())return[2,!1];$n=!0,On=an||{},zn=!Ce[Te]||!On.dedupe,Rn=function(){return!De.current&&Te===Oe.current&&Fe.current},Ut=function(){var Gn=Ce[Te];Gn&&Gn[1]===En&&delete Ce[Te]},tn={isValidating:!1},dn=function(){Ge({isValidating:!1}),Rn()&&rn(tn)},Ge({isValidating:!0}),rn({isValidating:!0}),Nn.label=1;case 1:return Nn.trys.push([1,3,,4]),zn&&(broadcastState(ae,Te,Yt.current.data,Yt.current.error,!0),ne.loadingTimeout&&!ae.get(Te)&&setTimeout(function(){$n&&Rn()&&Le().onLoadingSlow(Te,ne)},ne.loadingTimeout),Ce[Te]=[un.apply(void 0,ke),getTimestamp()]),vn=Ce[Te],bn=vn[0],En=vn[1],[4,bn];case 2:return bn=Nn.sent(),zn&&setTimeout(Ut,ne.dedupingInterval),!Ce[Te]||Ce[Te][1]!==En?(zn&&Rn()&&Le().onDiscarded(Te),[2,!1]):(Ge({error:UNDEFINED}),tn.error=UNDEFINED,xn=Ee[Te],!isUndefined$1(xn)&&(En<=xn[0]||En<=xn[1]||xn[1]===0)?(dn(),zn&&Rn()&&Le().onDiscarded(Te),[2,!1]):(ce(Yt.current.data,bn)?tn.data=Yt.current.data:tn.data=bn,ce(ae.get(Te),bn)||ae.set(Te,bn),zn&&Rn()&&Le().onSuccess(bn,Te,ne),[3,4]));case 3:return An=Nn.sent(),Ut(),Le().isPaused()||(Ge({error:An}),tn.error=An,zn&&Rn()&&(Le().onError(An,Te,ne),(typeof ne.shouldRetryOnError=="boolean"&&ne.shouldRetryOnError||isFunction$6(ne.shouldRetryOnError)&&ne.shouldRetryOnError(An))&&je()&&Le().onErrorRetry(An,Te,ne,nn,{retryCount:(On.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return $n=!1,dn(),Rn()&&zn&&broadcastState(ae,Te,tn.data,tn.error,!1),[2,!0]}})})},[Te]),fn=reactExports.useCallback(internalMutate.bind(UNDEFINED,ae,function(){return Oe.current}),[]);if(useIsomorphicLayoutEffect(function(){Re.current=ee,Be.current=ne}),useIsomorphicLayoutEffect(function(){if(Te){var an=Te!==Oe.current,un=nn.bind(UNDEFINED,WITH_DEDUPE),bn=function(Rn,Ut,tn){rn(mergeObjects({error:Ut,isValidating:tn},ce(Yt.current.data,Rn)?UNDEFINED:{data:Rn}))},En=0,$n=function(Rn){if(Rn==FOCUS_EVENT){var Ut=Date.now();Le().revalidateOnFocus&&Ut>En&&je()&&(En=Ut+Le().focusThrottleInterval,un())}else if(Rn==RECONNECT_EVENT)Le().revalidateOnReconnect&&je()&&un();else if(Rn==MUTATE_EVENT)return nn()},On=subscribeCallback(Te,be,bn),zn=subscribeCallback(Te,ye,$n);return De.current=!1,Oe.current=Te,Fe.current=!0,an&&rn({data:ze,error:Ye,isValidating:Vt}),We()&&(isUndefined$1(ze)||IS_SERVER?un():rAF(un)),function(){De.current=!0,On(),zn()}}},[Te,nn]),useIsomorphicLayoutEffect(function(){var an;function un(){var En=isFunction$6(fe)?fe(ze):fe;En&&an!==-1&&(an=setTimeout(bn,En))}function bn(){!Yt.current.error&&(me||Le().isVisible())&&(ge||Le().isOnline())?nn(WITH_DEDUPE).then(un):un()}return un(),function(){an&&(clearTimeout(an),an=-1)}},[fe,me,ge,nn]),reactExports.useDebugValue(ze),ue&&isUndefined$1(ze)&&Te)throw Re.current=ee,Be.current=ne,De.current=!1,isUndefined$1(Ye)?nn(WITH_DEDUPE):Ye;return{mutate:fn,get data(){return Jt.data=!0,ze},get error(){return Jt.error=!0,Ye},get isValidating(){return Jt.isValidating=!0,Vt}}},useSWR=withArgs(useSWRHandler);function arrayPush$2(re,ee){for(var ne=-1,ae=ee.length,ce=re.length;++ne<ae;)re[ce+ne]=ee[ne];return re}var _arrayPush=arrayPush$2,freeGlobal$1=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$6=root$8.Symbol,_Symbol=Symbol$6,Symbol$5=_Symbol,objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty,nativeObjectToString$1=objectProto$b.toString,symToStringTag$1=Symbol$5?Symbol$5.toStringTag:void 0;function getRawTag$1(re){var ee=hasOwnProperty$9.call(re,symToStringTag$1),ne=re[symToStringTag$1];try{re[symToStringTag$1]=void 0;var ae=!0}catch{}var ce=nativeObjectToString$1.call(re);return ae&&(ee?re[symToStringTag$1]=ne:delete re[symToStringTag$1]),ce}var _getRawTag=getRawTag$1,objectProto$a=Object.prototype,nativeObjectToString=objectProto$a.toString;function objectToString$1(re){return nativeObjectToString.call(re)}var _objectToString=objectToString$1,Symbol$4=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$4?Symbol$4.toStringTag:void 0;function baseGetTag$6(re){return re==null?re===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(re)?getRawTag(re):objectToString(re)}var _baseGetTag=baseGetTag$6;function isObjectLike$7(re){return re!=null&&typeof re=="object"}var isObjectLike_1=isObjectLike$7,baseGetTag$5=_baseGetTag,isObjectLike$6=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(re){return isObjectLike$6(re)&&baseGetTag$5(re)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$5=isObjectLike_1,objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty,propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable,isArguments$3=baseIsArguments(function(){return arguments}())?baseIsArguments:function(re){return isObjectLike$5(re)&&hasOwnProperty$8.call(re,"callee")&&!propertyIsEnumerable$1.call(re,"callee")},isArguments_1=isArguments$3,isArray$d=Array.isArray,isArray_1=isArray$d,Symbol$3=_Symbol,isArguments$2=isArguments_1,isArray$c=isArray_1,spreadableSymbol=Symbol$3?Symbol$3.isConcatSpreadable:void 0;function isFlattenable$1(re){return isArray$c(re)||isArguments$2(re)||!!(spreadableSymbol&&re&&re[spreadableSymbol])}var _isFlattenable=isFlattenable$1,arrayPush$1=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$1(re,ee,ne,ae,ce){var le=-1,ue=re.length;for(ne||(ne=isFlattenable),ce||(ce=[]);++le<ue;){var he=re[le];ee>0&&ne(he)?ee>1?baseFlatten$1(he,ee-1,ne,ae,ce):arrayPush$1(ce,he):ae||(ce[ce.length]=he)}return ce}var _baseFlatten=baseFlatten$1,baseFlatten=_baseFlatten;function flatten$3(re){var ee=re==null?0:re.length;return ee?baseFlatten(re,1):[]}var flatten_1=flatten$3;const flatten$4=getDefaultExportFromCjs(flatten_1);function shuffleLogos(re){const ee=[...re];let ne=ee.length,ae,ce;const le=new Date(Date.now());let ue=(Date.UTC(le.getFullYear(),le.getMonth(),le.getDate())-Date.UTC(le.getFullYear(),0,0))/24/60/60/1e3;const he=()=>{const fe=Math.sin(ue++)*1e4;return fe-Math.floor(fe)};for(;ne!==0;)ce=Math.floor(he()*ne),ne--,ae=ee[ne],ee[ne]=ee[ce],ee[ce]=ae;return ee}function filterWalletBlockList(re,ee){const ne=flatten$4(ee),ae=flatten$4(re).filter(ce=>!ne.includes(ce));return mapFromList(ae)}const mapFromList=re=>{const ee=new Map;return re.forEach(ne=>{ee.set(ne,1)}),ee},report_url=re=>`https://lists.teia.art/${re}`;async function fetchSettings(){const[re,ee,ne,ae,ce,le,ue,he,fe,me]=await Promise.all([axios.get(report_url("restricted_objkt.json")),axios.get("https://lists.teia.art/teia-logos/dist/logos.json"),axios.get("https://lists.teia.art/teia-logos/dist/logos_pride.json"),axios.get(report_url("restricted.json")),axios.get(report_url("permitted.json")),axios.get(report_url("nsfw.json")),axios.get(report_url("photosensitive.json")),axios.get(report_url("under_review.json")),axios.get(report_url("ignore_uri.json")),axios.get(report_url("fund_feed_ignored_addresses.json"))]),ve=[ee,ne].flatMap(Ne=>Ne.data.logos.map(Fe=>({name:Fe,themable:Ne.data.themable,collection:Ne.data.collection}))),ye=mapFromList(re.data.map(Ne=>Ne.toString())),be=mapFromList(le.data.map(Ne=>Ne.toString())),Ee=mapFromList(ue.data.map(Ne=>Ne.toString())),Ce=mapFromList(he.data),Se=mapFromList(fe.data),Te=mapFromList(me.data),ke=filterWalletBlockList([ae.data],[ce.data]);return{logos:shuffleLogos(ve),walletBlockMap:ke,nsfwMap:be,photosensitiveMap:Ee,underReviewMap:Ce,ignoreUriMap:Se,objktBlockMap:ye,feedIgnoreUriMap:Te}}function useSettings(){const{data:re,error:ee,isValidating:ne}=useSWR("/settings",fetchSettings,{revalidateIfStale:!1,revalidateOnFocus:!1});return{...re||{},error:ee,isLoading:ne}}const logo$1="_logo_159i4_216",container$x="_container_159i4_231",beta="_beta_159i4_236",styles$W={logo:logo$1,container:container$x,beta},SvgAcidmanhattan01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M241.9 5.7H0v90.7h83.1v181.4h90.8V96.4H257V5.7h-7.6zm347.7 0H347.7v90.7h257V5.7h-7.5zm181.4 0h-75.6v272.1h90.7V5.7h-7.5zm355.3 0H876.9v272.1h90.7V96.4h75.5v181.4h90.8V5.7zM589.6 187.1H347.7v90.7h257v-90.7h-7.5z"})),SvgAcidmanhattan02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M247.1 10.9H0v87.2h87.2v174.5h87.2V98.1h87.3V10.9h-7.3zm348.9 0H348.9v87.2h261.6V10.9h-7.2zm174.4 0h-72.6v261.7H785V10.9h-7.3zm356.2 0H872.1v262.5h87.6V229h87.6v43.8h87.6v-262h-8.3zm-80 94.5v36.5h-87.2V98.1h87.6v7.3zM596 185.3H348.9v87.3h261.6v-87.3h-7.2z"})),SvgAfrizalRizki01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M410 170.1h56.7v56.7H410zM466.7 0v56.7h113.4V0h-56.7zm56.7 170.1h56.7v-56.7H466.7v56.7zm0 113.4h56.7v-56.7H466.7v56.7zM636.7 56.7v226.8h56.7V0h-56.7zm113.4 0h56.7v56.7h-56.7zM806.8 0h56.7v56.7h-56.7zm56.7 56.7h56.7v56.7h-56.7zm-679.9 0h56.7v56.7h-56.7zM240.3 0H297v56.7h-56.7zM297 113.4v170.1h56.7V56.7H297zM410.4 0h-56.7v56.7H410v56.7h56.7V56.7h-56.3zm339.7 170.1v113.4h56.7v-85.1h56.7v85.1h56.7V139.8H750.1z"})),SvgAlterebro01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M268.4 2.9H0v92.6h185.1v185.1h92.6V2.9h-4.6zm347.1 0H347.1v277.7h277.7V188H439.7V95.5h185.1V2.9h-4.6zm162 0h-83.3v277.7h92.6V2.9h-4.7zm351.7 0h-273v277.7h92.5V95.5h92.6v185.1h92.6V2.9z"})),SvgAlterebro02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M597.9 0H0v79.7h606.8V0h-4.4zm101.9 0h-70.9v79.7h79.8V0h-4.5zm429.6 0H730.8v79.7h403.1V0zM172.7 101.9h-70.8v181.6h79.7V101.9h-4.4zm425.2 0H203.7v79.7h403.1v-79.7h-4.4zm101.9 0h-70.9v181.6h79.8V101.9h-4.5zm425.2 0H730.8v181.6h79.7V181.6h243.6v101.9h79.8V101.9h-4.5zM597.9 203.7H203.7v79.8h403.1v-79.8h-4.4z"})),SvgAlterebro03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M372 62H221.5v53.2h106.3v106.3h53.1V62h-4.4zm212.6 0H434.1v53.2h159.4V62h-4.4zm106.3 0h-44.2v159.5h53.1V62h-4.4zM908 62H753v159.5h53.1V115.2h53.2v106.3h53.1V62zM584.6 168.3H434.1v53.2h159.4v-53.2h-4.4z"})),SvgAnnekatrinenderlein01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"m208 114-15-8V42l8 4 27 14 18 10v16l-3-2-35-18v8l19 10 19 10v16l-2-1a4531 4531 0 0 1-36-18v7l15 8 16 9-15 8-16-9Zm91-3-22-11V78l18-9 18-10 32 17 32 17-8 4-8 4-10-5-11-6-6 3-12 7-7 3 11 5 10 6-16 8-21-11Zm13-22 12-7-6-3-5-3-12 6-13 7 11 6 13-6Z"}),reactExports.createElement("path",{d:"M255 86V65l-7-4-6-3 7-4 7-4 7 4 6 3v42l-7 4-7 4V86ZM147 50l-8-4 19-11 19-10-9-5c-8-4-9-4-8-5l7-4 7-3 24 12 27 14 3 2-8 3-8 4-10-6-9-4-20 10-20 10-6-3Z"}))),SvgBurkabayram01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{d:"M173 65V7h166v116H173V65Zm153 0V19H185l-1 44 1 46v3l70-1h71V65Z"}),reactExports.createElement("path",{d:"M191 74V43h26l25 1v41l-19 1-19 1v5h39v12h-52V74Zm38-9v-8h-25v15h25v-7Zm20 29V83h12v21h-12V94Zm18-10V63h40v-5l-20-1h-19V44l26-1h25v61h-52V84Zm40 0v-8h-26v16h26v-8Zm-58-15v-6h12v13h-12v-7Z"}),reactExports.createElement("path",{d:"M249 48V38h-58V25h128v13h-58v19h-12v-9Z"})),SvgCarolyn01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"m187.55 68.08 68.444-64.483H187.55V68.08zm68.444 56.323h34.228L255.994 3.597l-34.216 120.806h34.216zM324.45 3.597h-68.456L324.45 68.08V3.597z"})),SvgCryptemes01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",xmlSpace:"preserve",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M501 59.7H376.8c-2.8 0-5.2 2.3-5.2 5.2v53.5c0 2.8 2.3 5.2 5.2 5.2s5.2-2.3 5.2-5.2V70h51.8v143.4h-33.4c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h77.2c2.8 0 5.2-2.3 5.2-5.2s-2.3-5.2-5.2-5.2h-33.4V70H496v48.4c0 2.8 2.3 5.2 5.2 5.2s5.2-2.3 5.2-5.2V64.9c-.2-2.9-2.6-5.2-5.4-5.2zM839.3 70c2.8 0 5.2-2.3 5.2-5.2 0-2.8-2.3-5.2-5.2-5.2h-98.1c-2.8 0-5.2 2.3-5.2 5.2 0 2.8 2.3 5.2 5.2 5.2h43.9v143.4h-43.9c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h98.1c2.8 0 5.2-2.3 5.2-5.2s-2.3-5.2-5.2-5.2h-43.9V70h43.9zm-162.8 94.8c-2.8 0-5.2 2.3-5.2 5.2v43.4H578V144h43.9v19.4c0 2.8 2.3 5.2 5.2 5.2 2.8 0 5.2-2.3 5.2-5.2v-24c0-.2.1-.4.1-.6s0-.4-.1-.6v-24c0-2.8-2.3-5.2-5.2-5.2-2.8 0-5.2 2.3-5.2 5.2v19.5H578V70h85.8v32.5c0 2.8 2.3 5.2 5.2 5.2 2.8 0 5.2-2.3 5.2-5.2V64.9c0-2.8-2.3-5.2-5.2-5.2H547c-2.8 0-5.2 2.3-5.2 5.2 0 2.8 2.3 5.2 5.2 5.2h20.7v143.4H547c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h129.5c2.8 0 5.2-2.3 5.2-5.2V170c-.1-2.9-2.4-5.2-5.2-5.2zm375.2 48.6h-12L978.6 62.9c-.8-1.9-2.7-3.2-4.8-3.2h-58.7c-2.8 0-5.2 2.3-5.2 5.2 0 2.8 2.3 5.2 5.2 5.2h41.8l-58.2 143.4h-14.1c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h54c2.8 0 5.2-2.3 5.2-5.2s-2.3-5.2-5.2-5.2h-28.7l18.8-46.3h81.2l18.8 46.3h-30.9c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h53.9c2.8 0 5.2-2.3 5.2-5.2s-2.3-5.3-5.2-5.3zm-118.9-56.6L968 70h2.3l35.2 86.7h-72.7zm-616.4-15.1c0-33.1-16.5-62.4-41.8-80l20.8-33.1c.1-.2.2-.5.3-.7 0-.1.1-.2.1-.2.8-2.3 0-4.9-2.1-6.2C271.3 7.4 245.3 0 218.7 0c-18.7 0-36.5 3.6-52.8 10.2-.1 0-.3.1-.4.1-.1 0-.2.1-.2.1C113.5 31.6 77 82.5 77 141.7c0 51 27.1 95.9 67.7 120.8.1.1.3.2.4.3.2.1.5.3.7.4 21.3 12.8 46.2 20.2 72.9 20.2 27 0 53.3-7.6 76-22.1 2.1-1.3 2.9-3.9 2.1-6.1v-.1l-.3-.6c-.1-.1-.1-.2-.2-.3l-20.9-33.1c24.8-17.6 41-46.6 41-79.4zm-10.5-5.1H269c-2.6-25.5-24.2-45.4-50.3-45.4-4.2 0-8.3.5-12.2 1.5l-14.6-34c8.6-2.8 17.6-4.2 26.8-4.2 46.4-.1 84.5 36.3 87.2 82.1zm-137.5 10.3c1.5 14.5 9.2 27.3 20.3 35.5l-19.3 31.3c-21.6-14.8-36.2-39.1-37.9-66.9h36.9zm29.2 40.8c6.4 3 13.6 4.6 21.1 4.6 8.2 0 16-2 22.8-5.5l19.7 31.2c-12.6 7-27.1 11.1-42.5 11.1-14.6 0-28.4-3.6-40.5-10l19.4-31.4zm21.1-5.7c-22.2 0-40.3-18.1-40.3-40.3s18.1-40.3 40.3-40.3 40.3 18.1 40.3 40.3-18.1 40.3-40.3 40.3zm65.1-154.4-18 28.7c-14-7.7-30.1-12.2-47.1-12.2-10.6 0-21 1.7-30.9 5L174.4 18c13.8-5 28.8-7.7 44.3-7.7 22.9 0 45.3 6 65.1 17.3zM87.3 141.7c0-53.3 31.9-99.3 77.5-119.9l31.9 74.3c-15.5 7.5-26.6 22.6-28.4 40.4h-42.2c-2.8 0-5.2 2.3-5.2 5.2 0 33.6 17 63.2 42.9 80.8l-17.7 28.7c-35.4-23.5-58.8-63.8-58.8-109.5zm197.4 113.7c-20 11.6-42.7 17.8-66 17.8-23.1 0-44.8-6-63.7-16.5l17.7-28.8c13.7 7.3 29.3 11.5 45.9 11.5 17.4 0 33.8-4.6 48-12.6l18.1 28.6zm-14.8-42.9-19.7-31.2c10.4-8.3 17.4-20.5 18.8-34.4h36.9c-1.6 26.9-15.4 50.6-36 65.6z"})),SvgDjkero01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"m231.62 57.401-18.431 18.431V97.72l28.038-28.057L253.488 57.4 216.99 20.883l-3.801-3.8V38.95l3.8 3.801 14.63 14.65zm-63.754 0v17.17h19.004V18.248L147.717 57.4h20.15z"}),reactExports.createElement("path",{d:"M208.185 57.401h20.15L216.99 46.037l-3.801-3.8-21.888-21.87-2.12-2.12v56.324h19.004v-17.17zm2.674 42.84V84.35l-17.705 17.723 18.85 18.87.727.707 4.125-4.125 19.806-19.806 12.835-12.835V64.678l-38.638 38.638v-3.075zm16.349-93.892-10.715 10.734 10.715 10.733V6.35zm4.202 113.736 15.165-15.184H231.41v15.184zm20.398-56.305v.02l.019-.02h-.02zm0 20.608h20.589L251.807 63.8v20.59zm26.128-75.537h-.02l-18.965 18.965h37.931L277.916 8.851h.02zM258.95 67.658l20.379 20.36v-57.89h-20.38v37.53zm62.57-39.842L300.91 7.227H279.56l20.608 20.59h21.353zm12.165 12.167-10.695-10.696-10.677 10.696-30.597 30.597h21.372l19.902-19.902 19.901 19.902h21.391l-30.597-30.597z"}),reactExports.createElement("path",{d:"m322.99 53.963-9.816 9.817h19.634l-9.817-9.817z"}))),SvgImnot01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M267 121V87c-2-2-7-2-8 0v33c2 3 6 3 8 1Z"}),reactExports.createElement("path",{d:"M303 107c3-3 2-5-8-15l-9-10 4-8 5-8 11-2c9 0 10-1 12-2 2-2 2-3 1-4 0-2-2-3-3-3l-7-8-11-18-7-11-7-2-10-3-11-4c-8-4-11-4-12 0-1 2-1 3 1 5 2 1 25 10 28 10 2 0 2 3 0 4l-6 8-8 13-4 6-19-19c-15-15-19-18-21-18-3 0-28 37-28 41 1 2 1 3 4 3 2 0 3 0 13-16l12-17 7 7 7 7-3 3c-5 6-11 14-11 16s4 4 6 4l8-9 6-8c1 0 13 12 13 14l-19 24-10 15 2 3c2 1 3 1 5-1l24-28c4-6 6-7 7-5l8 9 16 18c9 10 12 11 14 9Zm-27-36-2-4 4-1 5 1-3 7-4-3Zm-4-15 1-2 8-12 8-11 7 10a466 466 0 0 0 7 14l-11 2c-20 1-20 1-20-1Z"}))),SvgSantiagoItzcoatl01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M1129.4 0H0v282.2h1127V0h2.4zm0 8.9v268.9H4.4V4.4h1118.2v4.5z"}),reactExports.createElement("path",{d:"M1009.8 13.3h-899v260.1h902v-260h-4.4 1.4zm0 22.1v158.8h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v-163h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v4.4zm0 181.6v48.4H119.6V22.2h52.8v4.4H168V31h-4.4v4.4h-4.4v4.4H155v4.4h-4.4v4.4h-4.4V93h70.4v145.2h44v-4.4h4.4v-4.4h4.4V225h4.4v-4.4h4.4V217h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v101.2h184.8v-4.4h4.4v-4.4h4.4v-4.4h4.4V221h4.4v-4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v57.2h-35.2v44H727v-4.4h4.4v-4.4h4.4v-4.4h4.4V221h4.4v-4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v61.6h44v-4.4h4.4V230h4.4v-4.4h4.4v-4.4h4.4V217h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h30.8v74.8h44v-4.4h4.4V230h4.4v-4.4h4.4v-4.4h4.4V217h4.4v-4.4h4.4v4.4zM1001 26.6h-4.4V31h-4.4v4.4h-4.4v4.4h-4.4v4.4H979v4.4H810.6v-4.4h4.4v-4.4h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h167.2v4.4zM890.3 168.3v4.4h-4.4v4.4h-4.4v4.4H877v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H855v4.4h-4.4v4.4H846v4.4h-4.4v4.4h-4.4V164h57.2v4.4h-4.1zm-252.5-35.4v4.4h-4.4v4.4H629v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H607v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H585v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H563v4.4h-4.4v4.4h-4.4v4.4h-4.4v-21.5h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V133h4.4v-4.4h4.4V124h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V102h4.4v22h-4.4v4.4h-4.4v4.4h-4.4zm-287.9 0v4.4h-4.4v4.4H341v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H319v4.4h-4.4v4.4H310v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H288v4.4h-4.4v4.4H279v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4V93h74.8v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V71h4.4v-4.4h4.4v57.2h-4.4v4.4h-4.4v4.4h-3.9zm429.6 39.8h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H753v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H731v-17.6h4.4v-4.4h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v17.6h-4.4v4.4H784v4.4h-4.4v4.5zM637.8 97.4v4.4h-4.4v4.4H629v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H607v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H585v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H563v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H417.8v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164H519v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V133h4.4v-4.4h4.4V124h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V102h4.4v-4.4h4.4V93h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V71h4.4v-4.4h4.4V93h26.4v4.4h-4.4zm-106.3 0h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-92.4V115h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V93h92.4v4.4zm-110.7 0v4.4h-4.4v4.4H412v4.4h-4.4V93h17.6v4.4h-4.4zm4.4 70.9h-4.4v4.4h-4.4v4.4H412v4.4h-4.4v-17.6h17.6v4.4zM708.7 186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V133h4.4v-4.4h4.4V124h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V124h-4.4v4.4H784v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H762v4.4h-4.4v4.4H753v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H731v4.4h-4.4v4.4h-4.4v4.4h-17.6V190h4.4v-4zM939 97.4v22h-88.4V115h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V93h66v4.4zm-101.9 8.9V93h17.6v4.4h-4.4v4.4H846v4.4h-4.4v4.4h-4.4v-4.3zm-17.7-79.7H815V31h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H793v39.8h-4.4V93H784v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H762v4.4h-4.4v4.4H753v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H731v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H709v4.4h-4.4v4.4h-4.4v4.4h-4.4V93H731v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V71h4.4v-4.4h4.4V62h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h22v4.4zm-35.4 0h-4.4V31h-4.4v4.4h-4.4v4.4h-4.4v4.4H762v4.4h-4.4V53H753v4.4h-4.4V62h-4.4v4.4h-4.4v4.4h-4.4v4.4H731v-22h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h22v4.4zm-35.5 0h-4.4V31h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-92.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h92.4v4.4zm-110.7 0h-4.4V31H629v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4V53H607v4.4h-4.4V62h-4.4v4.4h-4.4v4.4h-4.4v4.4H585v4.4h-4.4V84h-4.4v4.4h-4.4V93h-4.4v4.4H563v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H541v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H519v4.4h-4.4v-17.6h4.4V124h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V102h4.4v-4.4h4.4V93h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V71h4.4v-4.4h4.4V62h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h17.6v4.4zm-35.4 0H598V31h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H576V53h-4.4v4.4h-4.4V62h-4.4v4.4h-4.4v4.4H554v4.4h-4.4V57.6h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h17.6v4.4zm-35.5 0h-4.4V31h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H382.1v-4.4h4.4v-4.4h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h162.8v4.4zm-181.6 0h-4.4V31h-4.4v4.4H372v4.4h-4.4v4.4h-4.4v4.4h-4.4V53h-4.4v4.4H350V62h-4.4v4.4H341v4.4h-4.4v4.4h-4.4V57.6h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4H385v4.4zm-35.4 0h-4.4V31H341v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H164v-4.4h4.4v-4.4h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h162.8v4.4z"})),SvgSantiagoItzcoatl02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M236.8 19.7H1v243.8h244.2V20.2h-8.4zm-18.5 37v174.8H33.4V52.4h184.2v4.3zm314.4-37H297v243.8h243.8V20.2h-8.1zm-18.4 37v174.8H329.4V52.4h184v4.3zm314.4-37H593v243.8h243.8V20.2h-8.1zm-18.5 37v174.8H625.4V52.4h184v4.3zm319-37H888.8v243.8h243.8V20.2h-3.4zm-23.1 37v174.8H921.2V52.4h184v4.3z"}),reactExports.createElement("path",{d:"M186 70.6H56.5v32.3h50.8V126H84.2v32.4h23.1v50.9h32.4v-50.9h27.8V126h-27.8v-23.1h55.5V70.6h-4.6zm295.9 0H352.4v138h138v-27h-54.6v-23.2h27.6V126h-27.6v-23H491V70.8h-9.1zm-78.6 37V126h-18.5v-23h18.4v4.6zm-18.5 69.3v-18.5h18.4v23h-18.4v-4.5zm393-106.3H648.3v32.3h50.9V126h-23.1v32.4h23.1v23.1h-50.9v27.8h138.8v-27.8h-55.5v-23.1h27.7V126h-27.7v-23.1h55.5V70.6h-4.7zm295.9 0H944.4v138h32.2v-50.2H995V186h32.2v-27.6h23V209h32.2V70.8h-8.7zm-23.1 37V126h-23v-23h23v4.6zm-74 13.8V103H995v23h-18.4v-4.6z"})),SvgKlausJoerres01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M252.5 0H0v283.5h261.3V0h-4.4zm345.4 0H345.5v93h261.3V0h-4.4zm531.5 0h-434v283.5H784V93h84.1v190.5h88.6V93h88.6v190.5h88.6V0zM597.9 190.5H345.5v93h261.3v-93h-4.4z"})),SvgSpencerLinkous03=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M274.6 46.5H0v93h93V237h97.5v-97.5h93v-93H279zm473.9 0h-88.6V237h97.5V46.5H753zm-190.4 93H376.5V237h190.4v-97.5h-4.4zm571.3 0h-88.6v-93h-97.4v93h-93V237h283.5v-97.5z"})),SvgMaes02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M45.07 121.74c-2.59-3.99-3.19-10.77-3.19-37.88v-32.9H29.92c-10.17 0-12.16-.6-14.15-4.38a84.87 84.87 0 0 0-6.98-10.17c-6.38-7.57-6.98-27.9-1-31.3 2.6-1.2 46.45-2 128.59-2h124.4l2.6 7.39c2.39 7.57 1 38.07-2 41.06-.8.8-39.27 1.2-85.53 1l-84.13-.6-.4 30.9-.6 30.7-6.97 2c-3.79 1-9.77 3.99-13.36 6.58-8.77 6.38-20.93 6.38-25.32-.4Z"}),reactExports.createElement("path",{d:"M168.48 123.33c-10.17-.6-14.56-1.59-16.35-3.98-3.19-4.19-3.59-40.67-.6-43.66 1.4-1.4 24.13-1.8 66.79-1.2l64.8 1v-34.1c0-30.5.39-34.28 3.58-35.88 1.8-1 11.36-2.4 21.13-3.19 24.92-1.8 25.12-1.6 25.12 29.1 0 12.97.4 23.53.8 23.53 1 0 66.99-34.49 87.12-45.45 11.76-6.58 17.15-8.37 24.52-8.37 5.19 0 10.57 1.2 11.77 2.59 7.97 8.37 13.95 18.74 14.95 25.91 1 7.78 14.55 31.9 30.7 54.03 5.78 7.98 7.18 16.55 3.59 23.33-3.99 7.17-21.93 15.75-32.9 15.75-11.36-.2-9.17 2.19-30.9-31.9-7.97-12.56-14.75-23.33-15.15-23.73-.6-.6-12.96 5.59-69.58 34.7-11.96 6.17-23.32 12.35-24.92 13.95-1.8 1.6-4.38 2.99-5.78 2.99-1.4 0-3.79 1.4-5.38 2.99-2.6 2.6-12.96 2.99-71.18 2.6-37.48-.2-74.36-.6-82.13-1Z"}))),SvgMumuthestan02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{d:"M313.58 102.25V83.47h39.38v37.55h-39.38v-18.77Zm-265.31-.61V82.86H10.72V43.5h37.55V7.75h38.77V43.5h36.35v39.36H87.03v37.56H48.27v-18.78Zm114.49-.91V81.05h112.06v39.37H162.76v-19.69Zm227.33 18.97c.12-.43 8.84-25.33 19.38-55.31 10.48-29.99 19.26-55 19.5-55.55.43-1.03 1.76-1.09 16.6-1.09h16.12l19.99 55.55a7897.4 7897.4 0 0 1 20.17 56.27c.18.73-3.21.85-20.78.73l-21.02-.18-6.48-18.78c-7.7-22.3-7.27-21.14-7.7-20.72-.18.18-3.38 9.15-7.08 19.93L432 120.12l-21.13.18c-16.78.12-21.02 0-20.78-.6ZM162.76 27.14V7.75h112.06v38.77H162.76V27.14Zm150.82-.91V8.36h39.38V44.1h-39.38V26.23Z"})),SvgMumuthestan03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("g",null,reactExports.createElement("path",{fill:"currentColor",d:"M34.86 64.27V2.05h66.83v9.22h9.99v9.99h9.2v9.2h10v10h9.21v86.01H34.86V64.26Zm96.01 19.2v-33.8h-9.99v57.6H54.07V21.26h38.4v-9.98H44.08v106h86.8v-33.8Zm-19.2 9.6v-5h-9.98v-9.21h9.99V49.67H92.46v-19.2H63.28v19.2h9.99v9.99h-9.99v19.2h9.99v9.22h-9.99v9.99h48.4v-5Zm9.22-57.6v-5h-9.21v-9.21h-10v19.2h19.2v-5Z"}),reactExports.createElement("path",{fill:"currentColor",d:"M73.27 73.87v-5h28.42v9.99H73.27v-5Zm9.21-19.21v-4.99h-9.21v-9.22h9.21v9.22h9.99v9.99h-9.99v-5Zm134.42 67.21v-4.6h-9.22v-19.2h9.21V59.65h-19.2v-9.99h29.2v-19.2h9.21v-19.2h9.99v19.2h-9.99v19.2h19.2v9.99h-28.42v38.4h-9.99v19.2h29.2v9.22h-29.2v-4.6Zm67.6 0v-4.6h-10v-10h-9.21v-19.2h9.21v-19.2h9.99v-9.21h9.2v-9.99h29.2v9.99h9.21v19.2h-9.21v9.22h-48.4v19.2h10v9.98h28.41v-9.99h9.99v10h-9.99v9.21h-28.4v-4.6Zm38.4-52.61v-9.6h-29.2v9.21h-9.2v9.99h38.4v-9.6Zm19.2 52.61v-4.6h19.2v-19.2h9.22v-29.2h9.99v-9.21h-29.2v-9.99h38.4v19.2h-9.2v29.2h-10v19.2h19.2v9.21H342.1v-4.6Zm76.8 0v-4.6h-9.98v-29.2h9.99v-9.21h38.4v-9.99h9.21v-9.21h-38.4v9.21h-9.21v-9.21h9.21v-9.99h38.4v9.99h10v9.21h-10v29.2h-9.2v19.2h19.2v9.21h-19.2v-9.22h-10v9.22h-28.41v-4.6Zm28.43-14.2v-9.6h9.99v-10H418.9v29.2h28.42v-9.6ZM380.5 25.86v-4.6h19.2v9.2h-19.2v-4.6Z"}))),SvgMumuthestan04=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M327.695 6.908h-143.39v114.184h143.01v-2.283.241V6.92h.38v-.012zM193.96 112.162V16.588h123.776v95.46h-8.222.267-115.784v.114h-.037z"}),reactExports.createElement("path",{d:"M261.975 45.515h8.73V35.86h-9.643v9.655h.914-.001zm19.31 0h8.729V35.86h-9.654v9.655h.926zM214.184 74.01H299.2V55.17h-9.186v9.186h-28.952V55.17h-9.655v9.186h-28.495V35.86h-9.655v38.15h.926v.001zm17.457 9.655h-8.728v9.642h9.655v-9.642h-.927zm18.841 0h-8.729v9.642h9.655v-9.642h-.926z"}))),SvgNatived01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("style",{type:"text/css"},`
		.st0 {
			fill: var(--gray-50);
		}

		.st2 {
			fill: "currentColor"
		}
	`),reactExports.createElement("path",{d:"M235.6 35H21.8v214.6h229.4V35h-15.6zm7.4 22.1v177.6h-7.4v7.4h-199v-7.4h-7.4V49.4h7.4V42h199.8v7.4h7.4v7.7zM522.8 35H309.2v214.6h229.4V35h-15.8zm7.3 22.1v177.6h-7.4v7.4H324v-7.4h-7.4V49.4h7.4V42h199.8v7.4h7.4v7.7zM809.9 35H596v214.6h229.4V35h-15.5zm7.4 22.1v177.6h-7.4v7.4H610.8v-7.4h-7.4V49.4h7.4V42h199.8v7.4h7.4v7.7zM1104.4 35h-221v214.6h229.4V35h-8.4zm0 22.1v177.6h-7.4v7.4H898.2v-7.4h-7.4V49.4h7.4V42H1098v7.4h7.4v7.7z",className:"st0"}),reactExports.createElement("path",{d:"M508 57.1h-7.3v169.3h7.3V219h7.4v-7.3H508V71.8h7.4v-7.4H508zm117.8 29.4v117.8h7.4V79.1h-7.4zm162 0v117.8h7.4V79.1h-7.4zM220.9 204.3V79.1h-7.4v132.6H58.9V79.1h-7.4v132.6h-7.3v7.3h7.3v7.4h7.4V219h154.6v7.4h7.4V219h7.3v-7.3h-7.3zm684.7 7.4h7.4v7.4h-7.4zm162 0H920.3v7.3H1075v-7.3zm14.7 0h7.4v7.4h-7.4zM913 219h7.4v7.4H913z",className:"st0"}),reactExports.createElement("path",{d:"M1075 219h7.4v7.4h-7.4z",className:"st0"}),reactExports.createElement("path",{d:"M257.7 12.9H0v258.9h273.4v-259h-15.7zm7.4 22.1v222h-7.4v7.4H14.4V257h-7V27.6h7.4v-7.4h243.8v7.4h7.4V35zm279.7-22.1H287v258.9h273.8v-259h-16zm7.4 22.1v222h-7.4v7.4h-243V257h-7.4V27.6h7.4v-7.4H546v7.4h7.4V35zM832 12.9H574.2v258.9H848v-259h-16zm7.3 22.1v222H832v7.4H589V257h-7.4V27.6h7.4v-7.4h244.2v7.4h7.4V35zm287.2-22.1H861.2v258.9H1135v-259h-8.5zm0 22.1v222h-7.4v7.4H876V257h-7.4V27.6h7.4v-7.4h244.2v7.4h7.4V35z",className:"st2"}),reactExports.createElement("path",{d:"M220.9 57.1h-7.4v7.3H58.9v-7.3h-7.4v7.3h-7.3v7.4h7.3v7.3h7.4v-7.3h73.6v29.4h-7.3v7.4h7.3v14.7h-7.3v7.4h7.3v22.1h-7.3v7.3h7.3v22.1h-7.3v7.4h7.3v22.1h7.4v-29.5h7.4v-7.3h-7.4v-14.8h7.4v-7.3h-7.4v-14.7h7.4v-7.4h-7.4v-29.5h7.4v-7.3h-7.4V71.8h73.6v7.3h7.4v-7.3h7.3v-7.4h-7.3zm574.3 0h-7.4v7.3H633.2v-7.3h-7.4v7.3h-7.3v7.4h7.3v7.3h7.4v-7.3h73.6v29.4h-7.3v7.4h7.3v14.7h-7.3v7.4h7.3v22.1h-7.3v7.3h7.3v22.1h-7.3v7.4h7.3v22.1h-73.6v-7.4h-7.4v7.4h-7.3v7.3h7.3v7.4h7.4V219h154.6v7.4h7.4V219h7.3v-7.3h-7.3v-7.4h-7.4v7.4h-73.6v-29.5h7.3v-7.3h-7.3v-14.8h7.3v-7.3h-7.3v-14.7h7.3v-7.4h-7.3v-29.5h7.3v-7.3h-7.3V71.8h73.6v7.3h7.4v-7.3h7.3v-7.4h-7.3zm287.1 0h-7.4v7.4h-37v-7.4h-7.4v7.4h-29.6v-7.4H994v7.4h-29.6v-7.4H957v7.4h-37v-7.4h-7v7.4h-7.4v7.4h7.4v29.6h-7.4v7.4h7.4v14.8h-7.4v7.4h7.4v22.2h-7.4v7.4h7.4v22.2h-7.4v7.4h7.4v29.6h7.4v-37.7h7.4v-7.4h-7.4V160h7.4v-7.4h-7.4v-14.8h155.4v14.8h-7.4v7.4h7.4v22.2h-7.4v7.4h7.4v29.6h7.4v-37h7.4v-7.4h-7.4V160h7.4v-7.4h-7.4v-14.8h7.4v-7.4h-7.4v-29.2h7.4v-7.4h-7.4V71.6h7.4v-7.4h-7.4v-7.1zm-7.3 22v22.2h-7.4v7.4h7.4v22.2H920v-29.7h7.4v-7.4H920V71.6h44.4V79h7.4v-7.4h14.8V79h7.4v-7.4h7.4V79h7.4v-7.4h14.8V79h7.4v-7.4h44.4v7.5zM485.9 64.4H346v-7.3h-7.3v7.3h-7.4v7.4h7.4v29.4h-7.4v7.4h7.4v14.7h-7.4v7.4h7.4v22.1h-7.4v7.3h7.4v22.1h-7.4v7.4h7.4v22.1h-7.4v7.3h7.4v7.4h7.3V219h154.7v-7.3H346v-29.5h7.4v-7.3H346v-14.8h7.4v-7.3H346v-14.7h22.1v7.3h7.4v-7.3h29.4v7.3h7.4v-7.3h36.8v7.3h7.4v-7.3h44.2v-7.4h-51.6v-7.4h-7.3v7.4h-22.1v-7.4h-7.4v7.4h-29.4v-7.4h-7.4v7.4H346v-29.5h7.4v-7.3H346V71.8h154.7v-7.4h-7.4z",className:"st2"})),SvgNorulesjustfeels07=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{fill:"currentColor",d:"m155.28 1-27.94.62-27.04.6V127.8l26.85-.62 27.1-.6.62-62.8.4-62.8Zm136.58.21-61.56.4-61.77.63-.62 28.12-.6 27.94h124.55V1.2Zm12.23 2.03V64.4c0 33.64.41 61.16 1.03 61.16.6 0 28.74-13.87 62.58-30.8L429.47 64l-60.13-30.37C336.3 17.11 307.98 3.45 306.76 3.45l-2.67-.21ZM167.51 70.53v55.04h124.35V70.53H167.51Z"})),Svg111V1Ab01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M669.7 0h-280v35h285V0h-5zm0 10v20h-275V5h275v5zm0 114.4H391.2v34.7h283.5v-34.7zM326.6 0H48.1v34.8h124.4v248.7h34.7V34.8h124.4V0zm343.1 248.6h-280v35h285v-35h-5zm0 10v20h-275v-25h275v5zM764.2 0h-29.8v283.5h34.8V0z"}),reactExports.createElement("path",{d:"M734.4 0h34.8v283.5h-34.8zm118.5 283.5 97.2-203.4 97.2 203.4h38.5L969.4 39.7 950.6.4l-.2-.4-.3.1-.3-.1-.2.4-18.8 39.3-116.4 243.8z"})),Svg111V1Ab02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M41.6 0h283.2v32H41.6zm342.6 32h283.2v32H384.2zm0 188.2h283.2v32H384.2z"}),reactExports.createElement("path",{d:"M199.216.28v283.2h-32V.28zM760.519.276v283.2h-32V.276z"}),reactExports.createElement("circle",{cx:418.6,cy:141.8,r:29.1}),reactExports.createElement("path",{d:"m980.6 39.5-5.1-10h-25.7l-5.1 10L833 261.1h35.8l93.8-186 93.9 186h35.8z"})),SvgOviy01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M857 0H272.4v283.5h221.4V217h-155v-39.8h155v-70.9h-155V66.4H795v39.9H640v177.2h70.9V177.2H795v106.3h66.5V0z"}),reactExports.createElement("path",{d:"M591.3 106.3h-57.6v177.2h66.4V106.3h-4.4z"})),SvgOviy02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M363.2 0H199.3v66.4H248v217.1h70.9V66.4H372V0h-4.4zm225.9 0h-176v282.2h184.8V217H479.1v-31h118.8V0h-8.8zm-57.6 70.9V115h-52.8V66.6h52.8v4.3zM699.8 0h-62v66.4h70.9V0h-4.5zm230.3 0H748.6v66.4h118.8v31H748.6v184.8h184.8V0h-3.3zm-62 172.7v44H815v-48.3h52.8v4.3zM699.8 97.4h-62v186.1h70.9V97.4h-4.5z"})),SvgPilhei01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{fill:"currentColor",d:"M129.24 121.84c-4.26-4.26-4.42-7.7-.5-17.02.99-2.3 2.46-5.9 3.44-8.19a62.6 62.6 0 0 1 3.28-7.36c13.42-25.37 22.42-44.03 22.42-46.65 0-1.8.66-3.28 1.48-3.28 2.13 0 6.7-9.49 6.7-13.58 0-2.3-.65-2.78-2.78-1.97-1.63.82-7.69 1.8-13.58 2.46-5.9.65-13.26 1.8-16.53 2.3-5.24 1.14-6.55.65-10.97-3.94-6.55-6.38-7.37-14.56-1.47-14.9 1.96-.16 6.87-.48 10.96-.65 4.1-.16 18.5-1.3 31.92-2.62 13.59-1.14 30.77-2.29 38.47-2.29 12.93 0 13.91.17 13.42 3.28-1.3 9.33-4.91 11.95-16.7 12.76-8.34.66-12.6 3.6-13.9 9.66-.66 2.95-2.96 8.19-5.08 11.46-2.13 3.44-3.93 6.87-3.93 7.7 0 .97-1.8 4.9-4.1 9-2.28 4.09-4.08 8.5-4.08 9.82 0 1.47-.66 2.61-1.48 2.61-1.63 0-16.37 29.8-24.88 50.42-2.78 6.38-6.38 6.71-12.11.98ZM261 118.57c0-1.48 2.62-8.19 5.9-14.73 3.27-6.72 6.05-13.75 6.22-16.05.32-2.12 2.13-6.05 3.93-8.83 1.96-2.62 3.6-5.4 3.6-5.9 0-1.47 10.3-24.39 22.42-49.27 6.88-14.24 9.5-16.04 18.5-11.94 6.22 2.61 6.22 6.22 0 15.55-2.62 3.92-4.91 8.34-4.91 9.65 0 1.15-.5 2.3-1.31 2.3-.66 0-2.13 2.45-3.28 5.4-4.9 11.78-20.62 43.2-24.06 47.8-1.96 2.77-4.09 7.03-4.75 9.48-.65 2.79-3.27 5.9-6.54 7.86-3.11 1.8-6.06 4.26-6.55 5.57a3.94 3.94 0 0 1-3.44 2.45c-1.3 0-2.45.82-2.45 1.64 0 .98-.66 1.64-1.64 1.64-.82 0-1.64-1.15-1.64-2.62Zm120.15-.33c-.98-.66-2.62-4.58-3.6-8.84-3.44-14.08-5.08-21.77-5.57-25.86-.33-2.46-1.63-4.26-3.6-4.58-3.27-.66-13.1 1.8-21.6 5.4a64.48 64.48 0 0 1-11.3 3.43c-6.22 1.15-17.68 11.3-23.4 20.63-3.12 5.4-6.06 6.71-9.83 4.75a41.2 41.2 0 0 0-5.56-2.46c-1.64-.49-2.95-1.8-2.95-2.95 0-1.14 8.51-13.42 18.82-27.33 10.32-13.75 20.14-27.83 21.61-31.1 1.47-3.27 5.57-10.15 9-15.22 3.44-5.08 6.22-10.32 6.22-11.62 0-1.31 1.15-3.28 2.46-4.42 1.3-1.15 2.45-3.44 2.45-5.08 0-2.45 1.15-3.1 5.4-3.1 2.79 0 6.55.97 8.03 2.28 2.94 2.13 7.85 22.26 7.85 32.25 0 3.27 1.15 8.67 2.46 11.95l2.45 5.89h10.48c7.2 0 10.97.82 12.44 2.46 3.6 4.25.65 7.36-6.88 7.36-12.1 0-12.93 2.46-8.02 22.92.99 4.09 2.3 10.14 2.95 13.58.82 5.4.5 6.06-2.62 6.06-1.96 0-3.44.98-3.44 2.45 0 2.62-1.47 3.11-4.25 1.15Zm-24.4-49.1 8.2-2.95.48-8.84c.33-5.9-.32-10.15-1.8-12.11-2.29-3.11-2.45-3.11-7.36.49-5.73 3.93-14.24 20.13-12.77 23.9 1.15 3.1 3.27 3.1 13.26-.5Zm-171.69 44.84c-.5-2.29-.5-5.4 0-7.03 1.3-3.93 3.92-10.48 5.89-14.08.82-1.64.98-3.77.33-4.75-.66-.82-.33-2.13.49-2.78 2.12-1.31 10.3-16.04 10.3-18.5 0-1.14 6.06-14.24 13.6-29.46l13.42-27.33 22.58-.17c19.48 0 22.6.33 23.58 2.62 1.3 3.6-3.6 7.2-10.15 7.2-2.79 0-5.73.66-6.55 1.31-.98.66-4.58 2.3-8.19 3.44-9 3.1-15.55 10.64-15.55 18.17 0 1.64-1.14 3.76-2.45 4.9-4.91 4.1-2.62 5.25 7.86 4.26 11.45-1.14 14.73.17 13.91 5.73-.5 3.44-1.8 4.1-12.77 6.06-18.99 3.27-21.77 5.07-27.33 17.02-2.79 5.57-5.57 12.12-6.22 14.24-1.15 3.77-.99 3.93 5.73 2.95 3.92-.5 7.53-1.47 8.02-2.3.49-.65 4.74-1.47 9.16-1.47 4.59-.16 12.44-.81 17.68-1.47 8.51-1.14 9.33-.98 9.33 1.8-.16 5.73-3.93 8.35-13.1 9.5-21.44 2.78-41.73 7.69-46.8 11.62-5.08 3.93-11.63 3.1-12.78-1.48Z"})),SvgHermanPretorius01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M217 28.8H0v115.1h115.2v110.8h110.7V28.8h-4.4zm567 0H682.1v225.9h110.7V28.8h-4.4zm345.4 0h-110.7v115.1H908v110.8h225.9V28.8zM558.1 143.9H451.8V28.8H341v225.9h225.9V143.9h-4.4z"})),SvgQizzio02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M562.8 0H413.2v62h-30.8v158.6h30.8v61.6h158.4v-29.6H444v-31h30.8v-62h61.6V124h-61.6V62H444V31h127.6V0h-8.8zM443.2 97.4v26.4h-30.8V93h30.8v4.4zm0 66.5v26.4h-30.8v-30.7h30.8v4.3zm-62-137.3V0H97.8v31h61.6v62H221v127.6h-30.2v61.6h30.8v-29.6h35.2v30.8h30.8v-61.8h-30.4V93h61.6V31h61.6v-4.4zm-93 8.8V62h-31V31H288v4.4zm-97.5 22.2V31h30.8v31h-30.7v-4.4zm567 31V0H603.4v93H665v127.6h-30.8v61.6H665v-29.6h30.8v30.8h30.8v-61.8h-30.8V93h61.6v-4.4zm-124-31V31h30.8v31h-30.8v-4.4zm62 0V31h30.8v31h-30.7v-4.4zm279 194.9h-26.5V0h-62v31H917v62h-97.2V31H855V0h-66.2v251.4h-31v30.8h61.6v-91.6h96.8V283h61.6v-30.4h-3.1zm-155-97.5v-31h35.2v35.2h-35.1V155zm66.4 0v-31h30.8v35.2h-30.7V155z"})),SvgRodicqart01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M255.1 9.4H0v56.7h264.6V9.4h-4.8zm302.4 0H378v18.9h-18.9v18.9h-18.9v18.9h226.7V9.4h-4.7zm207.9 0h-66.2v56.7h75.6V9.4h-4.7zm363.7 56.7H1115V47.2h-18.9V28.3h-18.9V9.4H926v18.9h-18.9v18.9h-18.9v18.9h-18.9V274h75.6V85h18.9V66.1h75.6V85h18.9v189h75.6V66.1zm-968.5 56.7H94.5V274h75.6V122.8h-4.7zm604.8 0h-66.2V274h75.6V122.8h-4.7z"}),reactExports.createElement("path",{d:"M1029.9 122.8h-66.1v37.8h75.6v-37.8h-4.8zm-472.4 94.5H415.7v-18.9h-18.8v-18.9H378v-18.9h132.2v-37.8H302.4v75.6h18.9v18.9h18.9v18.9h18.9v18.9H378V274h188.9v-56.7h-4.7z"})),SvgKerimSafa01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M372.358 9.081H264.146V24.75h-15.792V9.08H138.1v31.335h15.667V24.832h15.75v47.002h15.668V24.832h47.002v15.667h-31.001v15.667h31.334v15.668h-31.334V87.5h31.334v15.667h-15.667v15.667h31.334V40.582h15.667v78.337h31.335v-15.293h-15.292V56.333h47.001V72h15.668V24.832h15.667v15.667H373.9V9.165h-1.542V9.08zm-45.272 17.71v13.708h-47.19V24.832h47.002v1.958h.188z"})),Svg33301=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M468.5 0H192.1v90.6H282v192.9h96.6V90.6h89.9zm191.6 0v283.5h96.6V0h-96.6zm48.3 84C686.6 84 669 66.3 669 44.6c0-21.8 17.6-39.4 39.4-39.4 21.8 0 39.4 17.6 39.4 39.4 0 21.7-17.7 39.4-39.4 39.4z",className:"st0"}),reactExports.createElement("path",{d:"M580.1 235.9c-44.7 0-49.3-31.7-49.3-31.7h98.5c0-74.2-47-108.1-96.8-108.1s-104.7 22.6-104.7 96.2 64 91.2 64 91.2h88.3c24.3 0 49.3-31.7 49.3-31.7V215c0-.1-13.6 20.9-49.3 20.9zm-32.8-94c12.1 0 22 13.8 22.6 31.2h-45.2c.5-17.4 10.4-31.2 22.6-31.2zm334.9-48c-47.5 0-93.5 23.2-93.5 23.2v59.5s12-19.1 52.1-19.1C881 157.5 881 187 881 187s-11.5-4.2-31.3-4.2c-31.3 0-66.4 18.2-66.4 55.2 0 37.1 28.2 45.5 28.2 45.5h46c14.7 0 23.6-14.6 23.6-14.6v14.6h95.4V161.9c0-45.6-46.8-68-94.3-68zm-1.1 144.2c-2.8 6.3-9 9.6-16.3 9.6-9.9 0-19.9-7-19.9-16.9s10-16.9 19.9-16.9c7.3 0 13.6 3.4 16.3 9.6v14.6z",className:"st0"})),SvgVarda01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M242.883 4.05H196.05v16.855h16.855v33.721h16.866v-33.72h16.855V4.05H242.883zm71.185 0h-48.705v16.855h50.587V4.05h-1.882zm-1.872 33.72h-46.833v16.856h50.587V37.771h-3.754zm-86.168 26.225h-13.123V80.86h16.866V63.995H226.028zm86.168 9.368H282.23V90.23h16.855v33.721h16.866V73.363h-3.754zM226.028 90.23h-13.123v33.721h16.866V90.23H226.028zm52.447 0h-13.112v33.721h16.866V90.23h-3.754z"})),SvgVarda02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M573.6 0h-22.2v26.6h31V0H578zM516 26.6h-75.3v115.1h-57.6v26.6h57.6v88.6h57.6v-31h-31v-57.6h31v-26.6h-31V57.6h31v84.1h26.6V26.6h-4.5zm168.3 0H640v31h26.6v57.6H640v26.5h26.6v84.2H640v-84.2h-31v115.2h84.2V141.7h57.5v-26.5h-57.5V26.6h-4.5zm-425.2 31h-17.7v26.6H268V57.6h-4.5zm314.5 0h-22.2v168.3h31V57.6H578z"}),reactExports.createElement("path",{d:"M631.2 57.6H609v26.6h31V57.6h-4.4zM888 199.3h-22.1v26.6h26.6v-26.6zm-380.9 26.6h17.8v-26.6h-26.6v26.6h4.4zm349.9 0h-48.7V0H693.2v26.6h88.5v199.3h-57.5v57.6h26.5v-26.6h115.2v-31h-4.4zm-425.2 31h-75.3V57.6h53.2V0h-26.6v26.6H268v31h57.5v225.9h115.2v-26.6h-4.4zm141.8 0h-22.2v26.6h31v-26.6H578z"})),SvgSimoneVirgini01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M403.1 0H270.2v163.9h13.3V155h8.8v-13.3h13.3v-13.3h-13.3v-93h13.3V22.1h13.3v13.3h8.9v128.5h-8.9v13.3h-13.3v13.3h13.3v8.8h8.9v62h-8.9v8.9h-13.3v13.3h70.9v-13.3h-13.3v-8.9h-8.9v-62h8.9v-8.8h13.3v-13.3h-13.3v-13.3h-8.9V35.4h8.9V22.1h13.3v13.3h13.3v93h-13.3v13.3h13.3V155h8.8v8.9h13.3V0h-4.4zm256.8 88.6v-4.4h-35.4V22.1h13.3v-8.8h13.3V0h-75.3v13.3h13.3v8.8h13.3v62.1h-35.5V93h8.9v13.3h13.3v13.3h13.3v44.3h-13.3v8.8h-13.3v17.8h13.3v8.8h13.3v62h-13.3v8.9h-13.3v13.3h75.3v-13.3h-13.3v-8.9h-13.3v-62h13.3v-8.8h13.3v-17.8h-13.3v-8.8h-13.3v-44.3h13.3v-13.3h13.3V93h8.8z"}),reactExports.createElement("path",{d:"M558.1 248h-4.4v13.2h-83.6V248h-8.8v-48.6h8.8v-8.8h61.6v-13.4h8.8V164h13.2v-44.4h-13.2v-13.2h-8.8V93h-61.6v-8.8h-8.8V35.6h8.8V22.2h70.4v13.2h13.2v13.2h13.2V0H426.1v13.2h8.8V269h-8.8v13.2h140.8V248h-8.8zm-26.6-93h-13.2v8.8h-48.4V155h-8.8v-26.4h8.8v-9h48.4v8.8h13.2V155zm327.8 115.2h-8.8v-8.8h-13.3v-26.6h-8.8v-44.2H815V164h13.2v-9h8.8v-26.4h-8.8v-9H815V48.8h13.2V22.2h8.8v-8.8h13.2V0H673.8v13.2H687V22h8.8v26.6H709v70.8h-13.2v8.8H687v26.4h8.8v8.8H709v26.4h-13.2v44H687v26.4h-13.2v8.8h-13.2v13.2h61.6v-12H709V248h13.2v-35.4h8.8v-13.2h61.6v13.2h8.8v35.2h13.2v22h-13.2V283H863v-12.8h-3.7zM801.7 35.4h-8.8v128h-13.3v13.2h-35.4v-13.2H731V35.6h-8.8V22.2h79.2v13.2z"})),SvgChristianWaadt02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",stroke:"null",shapeRendering:"crispEdges",style:{vectorEffect:"non-scaling-stroke"},viewBox:"0 0 512 128",...re},reactExports.createElement("path",{d:"M277.873 5.233h-14.679v117.534h18.349V5.233h-3.67zM138.3 18.087v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37H145.638zm95.515 0H153v18.37h18.348v73.456h18.37V36.457h55.107v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.669v-18.37h-3.67zm29.398 0v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37h-3.67zm78.97 0h-71.652V36.54h55.357v18.453H299.89v55.356H373.7V18.046h-2.156v.041zM355.02 75.02v16.607H318.28V73.174h36.905v1.845h-.166z"}),reactExports.createElement("path",{d:"M195.232 54.805v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.69v-18.37h-3.69zm38.583 0h-33.068v18.37h36.738v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.669v-18.37h-3.67zm29.398 0v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37h-3.67zm-97.34 36.739v18.369h3.669v-18.37h-3.67zm7.339 0v18.369h3.69v-18.37h-3.69zm38.583 0h-33.068v18.369h36.738v-18.37h-3.67zm7.34 0v18.369h3.67v-18.37h-3.67zm7.34 0v18.369h3.669v-18.37h-3.67zm29.398 0v18.369h3.67v-18.37h-3.67zm7.34 0v18.369h3.67v-18.37h-3.67z"})),SvgChristianWaadt03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M581.1 113.4h-102v56.7h113.3v-56.7h-5.6zm0 113.4h-102v56.7h113.3v-56.7h-5.6z"}),reactExports.createElement("path",{d:"m989.3 277.8-17-17-5.7-5.7-11.3-11.3-5.7-5.7-11.3-11.3-5.7-5.7-5.7-5.7-11.3-11.3-5.7-5.7-17-17-5.7-5.7-17-17-39.6-39.6-17.1-17.1-39.6-39.6-22.7-22.7-17-17L711.5 0H138.9l283.5 283.5v-85.1L280.6 56.7h396.9L688.8 68l11.4 11.4 5.6 5.6 11.4 11.4 11.3 11.3 17 17 11.4 11.4 5.6 5.6 5.7 5.7 5.7 5.7 11.3 11.3 5.7 5.7 17 17 11.3 11.3 28.4 28.4H705.8V113.4h-56.7v170.1H995z"})),SvgWans01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M138.9 123.67c-4.22-.82-6.47-1.9-8.7-4.17a13.62 13.62 0 0 1-3.49-5.85c-.95-3.05-1.12-4.3-1.09-9.12 0-4.49.11-5.76.93-10.61.62-3.7 1.47-7.4 2.72-12.11.95-3.49.98-3.65 1.39-4.9.24-.68.81-2.5 1.3-4.08a95.3 95.3 0 0 1 2.18-6.67c.14-.3.55-1.47.93-2.59.81-2.5 2.01-5.93 2.34-6.67l.54-1.5c.2-.51.44-1.2.55-1.5l.78-2.09c.33-.87.82-2.28 1.15-3.13l.79-2.12.54-1.5c.2-.51.44-1.2.55-1.5.1-.3.46-1.22.76-2.04l1-2.72c1.97-5.2 3.19-9.88 3.49-13.42.1-1.17.05-1.3-.52-1.44a241 241 0 0 0-11.67 0c-6.08.08-16 .25-22.1.33-13.64.19-14.38.08-17.34-2.61a7.16 7.16 0 0 1-2.45-5.72c-.03-1.74.08-2.23.7-3.27 2.26-3.86 6.4-5.47 14.92-5.85l9.12-.4c28.8-1.34 48.47-1.8 89.27-2.16 30-.24 58.44-.16 142.5.5 55.93.43 56.6.46 60.96 1.82 4.38 1.38 6.59 4.51 5.72 8.13-1.7 7-10.37 9.45-30.22 8.58-10.94-.5-73.54-1.23-123.97-1.47-40.56-.2-93.28.54-94.83 1.28a1.6 1.6 0 0 0-.85 1.14c-.1.46-.35 1.5-.52 2.31-.19.82-.43 1.8-.57 2.18l-.54 1.9c-.65 2.32-.82 2.9-3.13 9.8A251.61 251.61 0 0 1 158.09 52c-.24.6-1.44 3.95-2.07 5.86-.21.68-.51 1.47-.65 1.77-.24.57-1.41 3.83-2.07 5.85-.22.68-.52 1.47-.65 1.77-.3.62-4.82 14.34-5.66 17.14-2.4 7.9-3.57 13.89-3.6 18.32 0 2.02 0 2.02 1.72 1.83a51.7 51.7 0 0 0 5.77-.96l2.59-.57c.81-.16 1.8-.4 2.17-.52l1.9-.54c5.67-1.6 11.47-4.08 14.7-6.26 3.35-2.29 6.81-6.67 6.81-8.68 0-.3.1-1.12.27-1.85.14-.71.38-2.24.55-3.35.54-3.65 1.33-7.95 1.82-9.8.76-2.89.84-3.13 1.03-3.68.85-2.42 3.16-6.88 4.03-7.8.17-.2.76-.9 1.31-1.59a41.41 41.41 0 0 1 10.04-8.65 46.5 46.5 0 0 1 14.97-5.55c2.37-.47 10.56-.44 12.52.02 3.98.96 6.1 1.85 8.3 3.52 6.9 5.2 5.75 14.4-3.2 25.63-2.13 2.67-10.24 10.73-13.53 13.45l-3.27 2.72c-.82.68-5.3 4.06-7.13 5.34-1.85 1.28-1.74 1.68.4 1.5a97.54 97.54 0 0 0 9.72-1.5c.52-.14 1.58-.38 2.32-.57 1.5-.36 5.85-1.75 6.94-2.2a69.64 69.64 0 0 0 9.58-4.6c.38-.3.79-.53.87-.53.25 0 4.06-2.55 5.47-3.64 6.7-5.23 11.81-11.1 15-17.2a109.1 109.1 0 0 1 5.9-10.32c3.43-5.17 6.73-8.41 10.18-9.99a7.77 7.77 0 0 1 4.09-.84 9.3 9.3 0 0 1 2.85.27c.36.16 1.1.52 1.7.76a8.92 8.92 0 0 1 4.78 5.8c.66 2.8-.62 6.83-4.1 12.7-.9 1.56-2.78 4.23-8.14 11.58-6.27 8.57-8.33 12.16-9.42 16.27-.87 3.27-.2 3.54 3.15 1.31l1.64-1.14c.21-.2 1.14-.93 2.04-1.64a174.6 174.6 0 0 0 6.94-5.93l2.72-2.45 5.3-4.9c5.07-4.74 6.43-5.99 8.86-8.06 1.11-.98 2.1-1.82 2.17-1.9.08-.08.93-.82 1.9-1.63a173.66 173.66 0 0 1 9-7.27c9.3-7.05 17.27-11.35 24.65-13.31 1.96-.5 5.9-.76 8.33-.55 1.52.17 2.2.36 2.7.8 1.9 1.68 2.96 4.51 2.96 7.89 0 3.8-.93 5.22-5.44 8.33a43.56 43.56 0 0 1-7.49 4.1l-2.45 1.1c-.6.27-1.58.67-2.18.92a67.32 67.32 0 0 0-12.17 6.34c-5.57 4-11.56 11.16-12.98 15.57-1.28 3.95 1.2 7.35 5.34 7.38 2.78 0 7.6-1.96 10.4-4.22 5.36-4.33 9.77-9.96 14.29-18.21 1.96-3.57 4.24-6.23 6.75-7.9 2.64-1.76 4.9-1.87 6.53-.32 1.88 1.77 3.78 5.66 5.06 10.37.9 3.24 1.52 4.98 2.26 6.01 2.48 3.62 8.25 5.28 22.02 6.37 2.01.17 4.79.41 6.18.55 1.36.16 4.54.27 7.07.27 6.62 0 9.8-.73 12.69-2.86 2.42-1.85 5.42-3.13 7.21-3.13 3.3 0 6.53 3.02 7.81 7.27 1.53 5-1.8 10.34-8.84 14.13a34.1 34.1 0 0 1-7.35 2.8l-2.59.57c-7.6 1.63-12.87 1.77-20.82.52a60.22 60.22 0 0 1-5.36-1.1 107.9 107.9 0 0 1-17.91-6.5c-1.2-.51-2.78-1.25-7.46-3.5-1.58-.74-2.01-.74-3.07.18a143.8 143.8 0 0 1-13.07 9.18c-4.33 2.53-10.97 5.33-14.5 6.1-6.16 1.3-9.62 1.16-15.38-.6-1.88-.6-6.13-2.97-8.3-4.66a53.36 53.36 0 0 1-7.03-7.02c-.33-.44-.7-.77-.9-.77-.16 0-1.22.66-2.34 1.45-8 5.69-15.21 9.44-21.31 11.1-.79.22-2.67.38-4.5.38-2.96-.02-3.23-.05-4.94-.9-2.89-1.38-5.1-4.32-6.18-8.21-.55-1.94-.82-2.45-1.17-2.45a25 25 0 0 0-3.35 1.47 122.4 122.4 0 0 1-4.27 2.04c-.74.32-1.88.84-2.59 1.14l-2.53 1.12-2.67 1.2c-.79.35-1.5.65-1.55.65-.08 0-.74.24-1.44.57a72.35 72.35 0 0 1-11.22 3.86c-.98.25-2.45.58-3.26.8-2.07.48-10.54.46-12.66-.03a41.24 41.24 0 0 1-11.84-4.77c-1.52-.92-1.99-1.09-3.24-1.06-.81.03-1.74.16-2.04.3a58.52 58.52 0 0 0-4.93 2.5 60.82 60.82 0 0 1-5.98 3l-2.73 1.2c-.73.35-2.4 1-3.67 1.5-1.28.48-2.56 1-2.86 1.14-.92.38-6.48 2.2-7.48 2.45-.52.1-1.45.35-2.05.51-4.43 1.2-11.2 1.85-13.88 1.31Zm59.42-45.32c.9-.57 9.94-7.3 10.45-7.76.2-.19.8-.68 1.36-1.08.55-.41 1.15-.9 1.37-1.1.19-.18.78-.7 1.3-1.1 1.72-1.4 4.9-4.64 4.9-5.02 0-.57-1.39-.4-3.3.36-4.95 2.01-6.66 3.07-10.06 6.4-5.64 5.5-9.56 11.53-6.02 9.3Z"}),reactExports.createElement("path",{d:"M284.66 44.14c-3.24-.76-4.66-1.74-6.5-4.52a16.4 16.4 0 0 1-1.91-3.62c-.41-1-.38-4.16.05-5.36.87-2.48 2.91-4.6 5.72-5.96 2.47-1.17 3.32-1.4 5.69-1.4 2.4 0 3.8.53 5.3 1.91.98.93 2.54 3.08 2.54 3.52 0 .16.1.51.24.78.82 1.47 1.09 5.23.54 7.24-.7 2.59-1.27 3.65-2.83 5.2-2.12 2.13-5.52 2.97-8.84 2.2Z"}))),SvgYazid01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M255.994 18.436 189.55 124.754h132.9L255.994 18.436zm-41.76 93.027 41.772-66.445 41.772 66.445h-83.544zM189.55 3.246h132.9v13.291h-132.9V3.247z"})),SvgActiveprinciple01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{d:"M4 9.215h113.54v48.74H91.66v-23.05H75.04v58.19h42.51v25.69H4v-25.69h42.69v-58.19H29.88v23.05H4V9.215zm168.88 25.69-10.01 10.2v5.29h42.51v27.2h-42.51v15.49h84.82v25.69H134.16v-74.04l35.33-35.52h78.21v25.69h-74.82zm204.97-25.69v25.69h-42.32v58.19h42.32v25.69H264.31v-25.69h42.51v-58.19h-42.51V9.215h113.54zm51.94 0h42.88L508 44.735v74.05h-28.71v-42.32h-39.48v-26.07h39.48v-5.29l-10.2-10.2h-35.7l-10.2 10.2v73.68h-28.72v-74.05l35.32-35.52z"})),SvgActiveprinciple02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M106.324 104.855c-2.636-2.637-4.018-6.152-4.018-9.789V55.778L89.129 45.735c-3.388-2.637-5.394-6.777-5.394-11.043 0-7.535 6.273-13.68 13.807-13.68h67.4c7.406 0 13.558 6.152 13.558 13.68 0 4.394-2.133 8.533-4.77 10.546l-13.686 10.54v39.288c0 3.643-1.503 7.152-4.14 9.789-2.509 2.509-6.024 4.019-9.667 4.019h-30.252c-3.636-.007-7.151-1.51-9.66-4.02zm39.913.624a9.95 9.95 0 0 0 7.279-3.14 10.356 10.356 0 0 0 3.012-7.28V54.02l15.062-11.546c2.134-1.63 3.516-5.018 3.516-7.91 0-5.018-4.643-10.164-10.165-10.164H97.535c-5.521 0-10.419 4.515-10.419 10.292 0 3.14 1.51 6.272 4.14 8.285l14.438 11.043v41.046c0 2.764 1.127 5.394 3.012 7.28 2.006 2.006 4.643 3.14 7.28 3.14l30.25-.007zm-37.028-10.42V52.384l-15.94-12.17c-1.63-1.255-2.637-3.388-2.637-5.394a6.885 6.885 0 0 1 6.904-6.904h67.278c3.643 0 6.776 2.382 6.776 7.152 0 1.51-.376 3.14-1.382 3.891L153.14 52.39v42.676c0 3.764-3.14 6.904-6.903 6.904h-30.252c-3.763-.007-6.776-3.14-6.776-6.91zm37.028 3.516c1.885 0 3.388-1.63 3.388-3.515V50.632l17.443-13.304c1.007-.751 1.127-1.63 1.127-2.509 0-2.006-1.51-3.516-3.515-3.516H97.536c-2.134 0-3.516 2.134-3.516 3.516 0 1.006.503 2.006 1.382 2.637l17.195 13.176v44.434c0 1.886 1.51 3.516 3.388 3.516h30.252v-.007zm-30.252-49.58-18.45-14.183h67.151l-18.45 14.183V95.06h-30.25V48.995zm26.736 42.676V48.995c0-1.127.503-2.133 1.382-2.764l11.801-8.03h-49.459l11.674 8.03c.879.63 1.382 1.63 1.382 2.764v42.676h23.22zm44.809 13.184c-2.508-2.637-4.018-6.152-4.018-9.789V34.82c0-3.643 1.382-7.28 4.019-9.789 2.636-2.509 6.152-4.018 9.788-4.018h60.503c7.03 0 13.559 6.152 13.559 13.68 0 3.26-1.007 6.655-3.261 9.037l-11.298 11.418c2.637 2.51 4.14 6.025 4.14 9.668s-1.383 7.28-4.14 9.916L267.368 85.4c2.637 2.636 4.02 6.152 4.02 9.788 0 1.758-.377 3.516-1.007 5.146-2.006 5.146-7.152 8.534-12.801 8.534h-60.247c-3.657 0-7.293-1.376-9.802-4.012zm70.037.624c4.139 0 8.03-2.51 9.54-6.4.503-1.255.751-2.637.751-4.02 0-2.636-.879-5.273-2.885-7.279l-13.055-13.056 2.509-2.381c2.006-2.006 3.26-4.77 3.14-7.535-.128-4.018-1.758-5.897-5.65-9.667l13.68-13.808c1.63-1.63 2.382-4.394 2.382-6.527 0-5.395-4.14-10.42-10.164-10.42h-60.502c-2.765 0-5.274 1.255-7.28 3.14s-3.14 4.515-3.14 7.28v60.247c0 2.764 1.255 5.273 3.14 7.28s4.515 3.139 7.28 3.139l60.254.007zm-67.151-10.42V34.813c0-3.891 3.012-6.903 6.903-6.903h60.248c3.763 0 6.903 2.885 6.903 6.903a6.93 6.93 0 0 1-2.006 4.898L246.9 55.275l5.019 4.643c1.382 1.254 2.133 3.012 2.133 4.897 0 1.885-.751 3.764-2.006 5.019l-5.018 4.897 15.437 15.438c1.382 1.382 2.006 3.14 2.006 4.897 0 4.14-3.26 6.904-6.903 6.904H197.32c-3.891-.007-6.903-3.02-6.903-6.91zm67.15 3.516c1.383 0 2.765-.751 3.261-2.133.128-.376.248-.88.248-1.255 0-.879-.375-1.758-1.006-2.51l-17.947-17.946 7.407-7.28c.752-.75 1.127-1.63 1.127-2.508 0-1.007-.503-1.886-1.127-2.51l-7.534-7.03L260.069 37.2c.63-.631 1.006-1.51 1.006-2.382 0-1.885-1.63-3.516-3.515-3.516h-60.247c-1.886 0-3.516 1.63-3.516 3.516v60.247c0 1.885 1.63 3.516 3.516 3.516h60.254v-.007zM197.32 34.812h60.248l-20.584 20.584 10.164 9.54-9.916 9.788 20.336 20.336H197.32V34.812zm53.216 56.86-15.692-14.56c-.63-.623-1.006-1.502-1.006-2.508a3.4 3.4 0 0 1 1.006-2.382l7.28-7.152-7.535-7.031c-.63-.63-1.006-1.63-1.006-2.51s.248-1.884 1.006-2.508l15.94-14.814h-49.827v53.471l49.834-.007zm29.874 13.183c-2.508-2.637-4.018-6.152-4.018-9.789V34.82c0-3.643 1.382-7.28 4.019-9.789s6.152-4.018 9.788-4.018h30.124c3.643 0 7.28 1.382 9.789 4.018s4.018 6.153 4.018 9.789v60.247c0 3.643-1.382 7.28-4.018 9.789-2.637 2.509-6.153 4.019-9.789 4.019h-30.124c-3.643-.007-7.279-1.383-9.788-4.02zm40.04.624c2.765 0 5.274-1.255 7.28-3.14 2.006-1.885 3.012-4.522 3.012-7.28V34.813c0-2.764-1.127-5.273-3.012-7.28s-4.522-3.139-7.28-3.139h-30.123c-2.764 0-5.273 1.255-7.28 3.14a9.976 9.976 0 0 0-3.14 7.28V95.06c0 2.764 1.255 5.273 3.14 7.279s4.522 3.14 7.28 3.14h30.124zm-37.154-10.42V34.813c0-3.891 3.012-6.903 6.903-6.903h30.124a6.885 6.885 0 0 1 6.904 6.903V95.06a6.885 6.885 0 0 1-6.904 6.903h-30.124c-3.89 0-6.903-3.012-6.903-6.903zm37.155 3.516c1.885 0 3.388-1.63 3.388-3.515V34.812c0-1.885-1.51-3.515-3.388-3.515h-30.124c-1.885 0-3.516 1.63-3.516 3.515V95.06c0 1.885 1.63 3.515 3.516 3.515h30.124zm-30.252-63.763h30.124V95.06h-30.124V34.812zm26.736 56.86V38.2h-23.348v53.471h23.348zm25.602 10.674c-1.382-2.261-2.134-4.77-2.134-7.407 0-2.006.503-4.14 1.382-6.025L371.91 26.91c2.382-4.77 7.152-7.783 12.425-7.783s10.044 3.013 12.425 7.783l30.124 62.005c1.006 2.006 1.382 4.019 1.382 6.152 0 2.51-.63 5.019-2.006 7.28-2.51 4.018-7.031 6.527-11.801 6.527H354.21c-4.77-.006-9.164-2.515-11.673-6.527zm71.92 3.012c3.644 0 6.904-1.758 8.79-4.898 1.006-1.63 1.63-3.515 1.63-5.521 0-1.51-.376-3.013-1.127-4.522l-30.124-62.005c-1.758-3.516-5.273-5.777-9.285-5.777-3.891 0-7.534 2.261-9.286 5.777l-30.123 62.005c-.752 1.51-1.127 3.012-1.127 4.522 0 2.006.624 3.891 1.63 5.521 1.885 3.14 5.146 4.898 8.789 4.898h60.234zm-66.144-6.655a6.733 6.733 0 0 1-1.006-3.516c0-1.127.248-2.26.751-3.26l30.124-62.006c1.127-2.381 3.515-3.89 6.152-3.89s5.018 1.509 6.152 3.89l30.251 62.005c.504 1.007.631 2.006.631 3.013 0 1.382-.255 2.636-1.006 3.764a7.01 7.01 0 0 1-5.898 3.26h-60.247a7.013 7.013 0 0 1-5.904-3.26zm66.145-.249c1.254 0 2.381-.63 3.012-1.63.376-.503.503-1.127.503-1.758a3.9 3.9 0 0 0-.375-1.63l-30.124-62.005c-.503-1.127-1.758-1.885-3.14-1.885-1.254 0-2.637.751-3.14 1.885l-30.123 62.005c-.249.503-.249 1.006-.249 1.51 0 .623.128 1.254.504 1.885.63 1.006 1.63 1.63 2.884 1.63l60.248-.007zm-30.124-65.4 30.124 61.878H354.21l30.124-61.878zm24.602 58.497-24.602-50.707-24.602 50.707h49.204z"})),SvgActiveprinciple03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M185.987 23.31c0 .25-.25.881-.63 1.382-.5 1.26-.75 2.89-1.13 4.28-1.01 4.532-5.541 3.651-7.173 5.792v2.01c.38.501 1.26.752 1.89 1.26-.5.502-1.38 1.382-2.14 1.64-1.89.501-5.791 1.382-6.542 1.382-4.03 0-4.152-3.021-4.911-3.021-.38 0-2.52-.25-4.03-.25-.63 0-1.382.13-1.511.25 0 3.02-.38 5.282-1.64 8.812-.63 1.76-.88 3.271-.88 4.782 0 2.64 1.01 4.03.88 7.042-.25.76-.751 10.064-.751 13.715 0 1.13.13 2.261.25 3.65.13 5.913-1.64 9.063-1.26 15.105.13.5.88 1.01 1.01 1.51.13.25.13.38.13 1.13 0 1.762-.63 3.401-.63 5.162-.13 1.13-.13 2.261-1.01 3.271-.501 0-1.26.25-1.89.76-.25-.25-.63-.25-.88-.5v.129c0 .63 1.89 2.52 1.51 2.891-1.26 3.521-2.771 2.77-4.031 6.292-1.64 1.64-2.14 2.14-2.52 2.77-.76.63-5.032 1.51-7.173 1.51-1.01 0-1.89.13-2.77.13-1.89 0-3.021-.76-3.772-2.64-.25-.752-.13-2.771-.5-4.282-.13-1.38-.63-3.02-1.131-3.771-.63-1.381-1.01-2.77-1.01-4.402 0-2.641.76-5.161.88-7.423 0-.5-.63-1.26-.63-1.76.25-3.15.38-5.283.38-6.793 0-1.01 0-1.26-.13-1.76-.5-2.892-1.26-8.562-2.52-11.454-.25-.5-.129-1.01.501-1.26v-.13c0-1.51 1.51-2.39 1.01-3.65-.25.25-2.641 1.51-2.641 2.01 0-.88 2.64-3.02 2.52-4.03 0-.13-.13-.25-.25-.13 0-.5-.25-1.38-.751-2.52.25-2.77 2.77-8.812 2.64-11.574-.25-.25-.5-.25-1.26 0-.25-3.4-.379-5.912-.5-6.421l.13-1.51c-.38-.25-.63-.38-.88-.63 0 .129-.13.129-.13.129-.38 0-.38-4.402-.76-3.02 0-.501-.25-.881-.5-.881-.76 0-2.14 1.89-2.892 1.89-.25 0-.38-.25-.38-1.01l-.63.25c-.38.25-.75.38-1.26.38-1.64 0-3.9-1.01-5.282-1.01-1.26 0-2.77-.25-3.521-.63.13 0 1.89.25 2.14 0-.5-.38-1.38-.5-2.39-.5-3.772-.38-7.173-4.402-7.803-9.183-.25-.25-.25-.25-.88-.25-.5 0-.5.5-1.13.63-1.382.38-2.012 2.89-2.642 3.771-.25-1.26-.63-3.521-.63-4.531.13-2.14.5-3.021 1.64-3.901 0 .13.25.25.38.25.5-.38.88-1.13 1.26-1.64l-.75-1.38c-.502.379-.881 1.009-.881 1.51v-.13c0-.5.38-1.26.88-1.76-.25-.25-.25-.38-.25-1.01.13-3.401 2.52-1.89 6.162-4.402.63-.5 3.522-1.381 4.531-1.381.501 0 6.543 1.26 7.173 1.51 2.64-1.38 6.292-2.01 11.453-2.01 4.151 0 8.553.379 12.333.379 7.173 0 14.846-3.142 23.407-3.142 1.26 0 2.262 0 3.651.25.13-.25.5-.5.751-.38 2.14.631 3.271 2.521 4.911 3.902 2.39 1.89 4.402 5.032 6.922 8.053l-.25.25c.112.12.613.242 1.113.242zm-80.785 3.272c-1.38.25-2.261 2.77-2.64 3.4.759-1.26 2.01-2.64 2.64-3.4zm-2.261 1.39c.25-.501.25-1.131.38-1.64-.63 2.52-.38 1.38-.38 1.64zm1.001-2.65c.25.25.5.63.88.63l.13-.38c-.25 0-.751-.12-1.01-.25zm.63 4.28c.13-.129.5-.25.63-.25 0 .25-.63.5-.63.25zM127.1 68.235c0 .25.25.76.13.88h-.63c.25 0 .5-.5.5-.88zm2.52 10.444c0 .13.25.88.25 1.38-.25 0-.63-.5-1.38-1.51-.251.5-.251 1.01-.76 1.51v-1.13c0 .13.13.25.25.63v-.25c0-1.01-1.01-2.261-.13-3.142h.13c.63 0 1.13 1.26.75 2.011.26.25.64.5.89.5zm-1.14-18.876h.501l-.13 1.51c-.5.501-.88.63-1.01.13 0-.13-.129-.25-.129-.38.018-.38.268-.76.769-1.26zm.89 2.641v.25c0 .501-.25 1.131-.501 1.381 0 .38-.25.63-.63.38a.97.97 0 0 1 .13-1.26c.742-.872.871-1.001 1-.75zm-1.01 10.953h.5l.13 1.13h-.751c-.259-.25-.259-1.01.12-1.13zm.88-12.204.38-.751h.38l-.38.88-.38-.13zm0 3.012h1.26c0 .25-.38.76-.38 1.01 0-.25-.129-.63-.38-.88-.37 0-.5 0-.5-.13zm.25 10.573c.751.88.88 2.77 1.26 4.401-.25-1.13-1.01-2.01-1.13-3.4-.13.13-.25.5-.25.88 0-.241-.13-1.881.12-1.881zm0-15.855c.13-.13.25-.38.25-.5 0 .5-.63.75-.25.5zm0-.88c0-.13 0 0 .38-.881 0 .13 0 .25.13.25-.13.13-.26.38-.51.63zm.38-.881c.25-.88 1.64-3.65 1.64-3.901.12.38-.51 1.89-1.64 3.901zm.121-13.214c.38-.25.5-.25.63-.13.13.38-.371.38-.63.13zm.38 49.585.38.129-.38.63-.38-.13.38-.63zm1.76-49.706h-.5l-.13 2.52h.501l.13-2.52zm42.913-31.339-1.01-.25v.38l.88.25.13-.38zm88.759 85.195c-.13 3.4.25 4.652-1.01 5.161-1.51.63-3.4.25-5.282.25-3.9 0-3.27.76-6.162 1.01-1.76.25-4.781.88-6.792 1.26l-8.813 1.51c-.25.13-.25-.379-.75-.379.38.13-.38-.13-.76-.13-.88.38-1.64.13-2.39.13l-.63.5c.379.13.88.251 1.63.251-.13.13-.88.5-1.26.63.5.25 1.13.5 1.761.5.25 0 1.38.13 2.39.13.76.13 1.26 0 1.89 0 .501 0 9.184-.88 9.693-.88.501 0 .63.63 1.26.63h.13c.25-.38 1.26 0 .88-.63.13 0 .38.25 2.262.25v-.5l4.91-.38c-.88.13-1.76.38-2.26 1.01h-1.382l.13.25c1.26 0 2.52.25 3.521.38-1.38 0-2.39.13-3.4.25 0-.13 0-.13.13-.13-1.64-.25-3.902.13-7.044 1.01.88.13 1.632.25 2.262.25 2.14 0 4.781-.38 8.182-.759-3.522.63-9.063 1.51-9.693 1.51-.5 0-.88-.5-1.26-.5-.5 0-3.142.88-4.652 1.13-1.38.13-3.271.13-4.652.38-1.51.13-3.02.38-4.402.751-7.932 2.011-16.735 2.77-24.287 4.782-.88.13-2.891.38-3.651.38-2.52 0-2.14.38-6.542-1.26-.63-.13-1.89-1.131-3.4-2.642-3.022-2.52-5.162-6.542-5.162-10.193 0-2.261.63-5.411 1.26-6.421.38-7.172 3.271-17.366 3.901-24.037 0-.76 1.01-5.792 1.01-6.292 0-1.26-2.011-3.271-2.52-4.281-.63-1.01-1.13-3.02-1.13-4.782 0-4.652 3.65-7.301 3.65-8.933l-.25-4.401c-.13-.88-.5-2.011-1.13-2.892-.251 0-.752.25-1.01.501.25-.38.25-.88 0-1.51-.38-.13-.63-.63-.76-.88-.63-.881-.751-2.012-1.26-2.642-2.641-4.151-2.391-3.65-2.391-5.282 0-2.01.75-3.521 3.772-7.552.63-.76 2.14-1.51 2.89-2.261.881-.88-.129-2.641 2.262-3.522 3.651-2.01 7.673-3.521 11.704-4.652.25 0 .5-1.51 2.52-.75 3.15.38 4.03.5 6.042.5 7.422 0 13.964-1.26 29.949-1.26 7.422 0 12.454 1.51 13.844 4.151.5 1.26 1.13 3.772 1.13 4.911 0 6.163-8.933 4.03-9.942 6.922 0 .25.5.5.88 1.01V31c-1.26.38-2.77 1.01-4.152 1.762-.129 0-.5-.25-.63-.13-.63.38-1.38.38-1.76 0-1.51.38-3.021 1.13-4.532.88-.38 0-12.583 2.011-12.963 2.011-.63 0-1.76.13-2.641.13.38 0 .76-.13 1.13-.5h-.129c-.5.129-.63-.13-.88-.38-.88.25-2.011.759-2.641.759-.13 0-.501-.63-1.381-.38.76.5 1.13.5.63 1.64-.13.13-.25.25-.13.38 1.51-.38 3.651-.38 6.042-.76.13-.13-.25-.38-.76-.38.13 0 8.554-1.38 11.833-1.38.63 0 1.131.13 1.26.25.88 0 2.641-.5 3.272-.5.5 0 1.01.63 1.38.759-1.51.88-15.224 2.77-16.735 3.02v.501c-1.38.63-2.64 1.131-3.772 1.761h-1.63c-.501 0-.881.13-1.64.38.63.13 1.26.13 1.89.13-.501 0-1.01.379-3.272.379l.25.63c.13 0 .63-.25 1.131-.25-.88.63-1.89 1.01-1.76 2.14-.76.13-2.641.25-3.15 1.381-.13 0-.13.13 0 .25.759-.129 2.39-.25 3.771-.25.5 0 1.26-.5 1.89-.63 1.26-.38 4.911-.76 9.693-1.01-1.76.5-4.402 1.13-5.282 1.26-.5 0-1.381.38-2.011.63v.13c.13 0 .25.13.25.13.38 0 .75-.25 1.13-.25l.38.129c-.76.129-1.38 0-2.01 1.01.25.25.5.38 1.26.63 1.64.25 7.672-.25 11.323-.25 1.76 0 2.011 0 2.391.129.63.76 2.011 1.64 2.891 2.26.38.251 1.89 4.031 1.89 4.653 0 3.271-2.52 6.162-5.79 6.672-.251 0-.63.25-1.131.25-.63.25-1.381 1.13-1.64 1.76.25.13.25.25.38.25.88 0 2.01-2.01 3.141-2.01.5 0 1.26.38 1.89.63.25.13.38.76.13 1.13.63.501-5.541 2.262-5.032 2.771-.38.38-.25 1.26-.76 1.76-.38.38-1.26.501-1.51 1.26l-1.381-.25c0 .13-.13-.25.75 1.382-.63.38-1.639 1.64-2.77 1.76-1.26.13-2.52.13-3.65.13-4.402 0-4.782-1.01-8.183.88-2.14.76-4.53 1.51-4.151 3.142.25.76 0 3.15 1.76 3.15.63 0 8.053-.13 12.714-.38 1.76-.13 3.4-.38 5.032-.38 3.4 0 4.91-.5 6.041 0 .63.25.25 1.51-1.26 1.761-4.28.76-9.062 1.89-11.453 2.011-1.38 0-2.891.38-4.652.63-.25.25-.63.38-1.01.38-.63 0-1.38-.25-2.14-.13h-.13c-.5 0-.76-1.38-1.01-.759-2.26.88-2.52.25-3.52 1.26.25.5.129.63.379.76 1.26-.38 2.52-.63 3.27-.63 0 .129.13.25.13.5l.501 1.13c-.13-.129-.25-.25-.38-.25l-.13-.38v.251l-.129.13c-.38-.38-.76-.501-1.38-.501-.63 0-1.64.76-1.64 1.38-.501 0-.76 0-1.01.13.38.25.38.38.63.5 1.38.13 2.64.251 3.27.13l.251-.25c.38 0 .5 2.39 1.13 2.261l.251.25c3.901-.63 7.423-1.38 10.694-2.26-.38.129-1.01.63-1.51.759-1.01.25-2.642.38-3.651 1.26h-.13l.5.13c.501 0 1.26-.25 1.64-.63l22.398-.76c.5 0 2.39.5 2.891.5.63 0 .63-1.26 1.89-.5 1.26.13 1.76 1.01 3.021 1.51.5.5 1.13 1.381 2.011 1.89.76 1.26 3.142.501 3.142 3.021.38.88.76 2.14 1.01 2.641.785 1.468-1.226 1.347-1.356 1.597zM220.02 84.59l.25.38-.13.13c-.129.129-.129-.13-.25-.63.13 0 .13 0 .13.12zm.25.38.13.25c-.13 0-.13-.12-.13-.25zm.121-.121c.13.13.25.25.25.38l-.25-.38zm.25.371.13.38v.38l-.38-.76h.25zm0 0c.25 0 .5-.13.63 0v.38l-.13.38c.01.12-.24-.25-.5-.76zm1.64-.5c.25 0 .751-.13 1.13 0l-.5.25c-.25-.121-.38-.25-.63-.25zm2.011-1.26h-1.38v-.38h1.38v.38zm0 1.13-.63-.25.13-.38.63.25-.13.38zm2.02 3.65-2.52.38v.25l2.52-.379v-.25zm-1.51-5.03v-.38l1.01.25v.38l-1.01-.25zm7.293 3.02h-.13.13zm1.01-20.766 3.4.76c-.13-.76-.13-.13.38-1.26-1.64.25-2.78.25-3.78.5zm3.141 1.51h-.88c-.63 0-1.01 0-1.26.13.25.13.38.13 1.01.13.38-.01.759-.13 1.13-.26zm-1.252 19.006v-.38l1.89-.25v.38l-1.89.25zm2.391-.88c1.13 0 2.641-.251 3.772-.251-.76.13-1.76.38-2.641.38-.38-.009-.76-.009-1.13-.13zm3.142-4.411c.38 0 .76.13.88.25-.5.009-1.13-.25-.88-.25zm.38 28.818.76.25.129-.38-.88-.25-.01.38zm.5-29.19 2.391.251v.25l-2.39-.13v-.37zm2.77.372.251-.5.38.129-.38.38h-.25v-.01zm.752-.622h1.64v.38h-1.64v-.38zm.509 29.06h1.13v-.38h-1.13v.38zm2.132-77.004.38.25.5-.75-.38-.251-.5.75zm5.29 76.754h.501-.5zm6.413-2.01c-.88 0-1.76 0-2.52.129 1.13-.25 2.39-.13 3.142-.13h-.622zm1.14-80.536c.88.501 1.51 1.131 2.14 1.761-.38.38-.88.63-1.26.63-1.381 0-3.15-1.38-2.641-2.01l1.76-.38zm19.427 73.234c-.38-1.26.38 4.53-.501 4.03-2.14-1.01-2.641-1.89-2.641-3.9 0-.38.38-2.141.88-2.892.63.38 1.131.76 1.26.5-1.13-1.38-3.02-2.14-3.02-4.151 0-.76 1.13-1.381 1.13-2.011 0-1.01-1.13-3.4-1.76-3.901-1.01-1.01-1.01 2.14-1.01 2.77 0 1.26 2.261 5.912 2.14 8.683-.38 1.13-3.771-4.782-3.771-9.693 0-4.652 1.38-3.771 1.38-6.292l.501-27.938c.13-6.041-5.412-38.131 10.573-42.282 2.891-.38 3.02.5 3.65.63 3.401 1.01 5.412 0 8.053 0 6.793 0 7.173 11.453 7.173 15.855 0 2.14.76 6.162-.63 7.802-2.14 2.261-3.021 5.411-3.021 11.453l-.38 9.693c0 8.682 1.64 15.354 1.64 17.115v8.682c0 1.89 1.89 4.281 1.89 8.812 0 .76-.25 2.641-.25 11.574 0 7.423-4.03 12.205-9.693 12.205-6.671-.01-12.083-7.682-13.593-16.744zm21.637-53.978c0-1.51 1.01-3.4 2.011-2.52.25.63.38 1.01.38 1.76s-.88 4.031-1.51 3.522c-.501-.25-.88-2.132-.88-2.762zm1.89 10.564.25-.75c.501-1.01 1.131 1.51.76 2.14-.25 0-.38 1.51-1.01.38-.12-.51 0-1.26 0-1.77zm.501 5.662c-.38-1.38.38-1.01.76-.13.5.88 1.63 1.01 1.63 2.012 0 1.89-1.38 1.89-1.76 1.38-.371-.742-.25-2.502-.63-3.262zm93.965 54.997c.25-1.382 1.26-.881 2.14-2.262.13-.13.13-.25.13-.38 0-1.01-2.391-1.26-2.892-1.76-.5-.38-.76-1.761-1.26-2.52-.63-1.01-2.52-2.521-3.02-2.521-.501-.13 0 .13-.501.13-.63-.13-1.89-1.64-2.14-2.391-2.892-4.532-7.933-13.344-8.433-13.465-.5 0 0 .25-.63.13-.38 0-5.162-2.011-7.932-3.02-1.01-.38-1.89-.13-2.891-.251-.13.13 4.151 1.01 3.27 1.76-.129.13-.38.25-.63.13-1.01-.5-3.02-1.26-3.52-1.26a29.203 29.203 0 0 0-4.653-.38c-3.141 0-5.411.5-7.552 1.76-1.01.63 1.01 1.64 3.651 1.761.25.25-.38.751-.76.88-.759-.129-1.64.13-2.14 0-.25-.129.38-.379.25-.63-.13-.129-.25-.129-.38 0-.38.251-.25.881-.63 1.131s-.88.38-1.38.38c-.63-.13.5-.38-.13-.5h-.38c-.5 0-1.13-3.401-1.64-3.021-.25.13-.25 1.01-1.13 1.51-.25.25.25 0 .63 0 .25.13-.13.5-.63.76-1.631.38-1.13 0-2.261.38-.38 0 .25-.38.129-.63l-.88-.13c-.25.13.25.63 0 .76-1.01.759-2.77 1.01-4.152 1.51v.13c2.011-.251 4.152-.76 6.422-1.26-2.262.5-6.793 2.14-7.302 2.14-.5-.13.13-.5-.38-.5-.5-.13-3.65 1.13-5.541 1.51-1.51.5-4.911.25-5.412 1.89-1.76 7.051-4.151 11.574-6.792 12.713-.38.25-1.26 1.89-2.011 2.77-.63.76-2.261 2.011-3.4 2.642-1.382.759-4.782 1.26-6.793 1.13-4.402-.63-6.672-3.4-6.672-7.802 0-3.15-3.65 4.781 4.402-9.442.38-.76.63-1.51.63-2.391s-.25-1.76-.13-2.261c.501-2.641 1.64-5.412 2.642-8.053 4.401-11.954 6.421-15.605 9.813-23.528 1.01-2.261 2.52-5.411 3.271-7.802.13-.38 1.01-1.01 1.13-1.381 1.511-3.271 3.142-6.542 4.402-9.563.38-.88 1.51-2.641 2.14-3.901 3.902-7.803 7.052-14.845 12.585-20.887.63-.76 2.261-1.51 3.27-1.51 0 .129.13.25.251.129.63-.76 1.01-2.011 1.64-2.77.63-.76 1.51-1.64 2.261-2.642.25-.38.25-1.01 0-1.01-.38.881-1.01 1.511-1.76 1.761-.38.13.5-.63.5-1.13 0-.13-.13-.25-.25-.25-.38 0-.88.25-1.01-.13s1.381-1.51 2.77-2.011c.38-.13.881-.5 1.382-1.01.129-.13 0-.5.129-.63 3.15-1.13 4.531-1.76 6.292-1.76.76 0 1.51.129 2.39.25.501.13 3.272 2.64 3.902 2.77.5.13.13-.25.63-.13.25 0 1.64 2.262 1.64 2.771.63 2.52-.63 4.911-1.01 7.302-.13.63-1.64 2.011-1.76 2.52 0 .5.63 1.26.63 1.76-.251 1.762.25 3.652 1.51 5.412 1.38 2.011 3.65 4.402 5.411 6.543 3.4 4.28 6.422 8.812 9.313 13.084 2.891 4.531 4.782 9.434 6.672 13.085.13.25.5.129.76.25.25.13-.38.25-.251.5 0 1.26.75 2.262 1.51 2.14.13 0-.63-.759-.38-1.38.13-.25.88-.25.88-.13.13.25.13.501.13 1.51v1.762c0 1.01 0 1.26.13 1.64s1.01 4.652 1.51 5.16c.38.251.76 1.131 1.13 1.89.13.251.13.752.38.631.501-.13.13-1.01.63-1.01.63.38.13 5.032 1.511 5.282 1.64.76 3.901 8.182 5.912 12.204v-.13c0-.25-.13-.63-.13-1.009 0-.5.251-.88.63-1.01 1.261-.25 1.64 3.271 1.132 3.772-.25.25-.63-1.01-1.26-.5-.25.25-.38.75-.38 1.26 0 .63.25 1.76 1.13 4.15.13.38.13 0 .38-.129.5-.129-.13-1.13.13-1.26.25-.13.5-.25.76.13.25.38.5 1.38.5 1.89-.13 1.13-.5.25-1.761 1.51-.38.501-.63 1.131-.76 1.89-.129 1.131-.5 2.262-.88 3.772v.25c0 .76 1.89.88 2.52 1.64 1.381 1.64 1.26 2.262 1.131 3.401-.13.5-.5 3.02-1.13 4.151-1.01 1.51-3.522 2.892-4.653 2.52-.38-.25.13-1.26-.25-1.38-.13 0-.25-.13-.38 0-.5.5-.38 1.76-1.01 1.51-2.26-.656-5.411-.405-5.031-3.297zm-48.195-46.936c.88 0 2.77-.38 3.27-.76 3.522-.88 9.434-2.14 14.095-3.02.13 0 .38-.13.38-.25 0-.25-1.01-1.131-.76-1.131h.38c1.51 0 1.01.75 1.64.63.13 0 .25-.38.25-.5 0-.501-.5-1.26-.38-1.64.13-.88.25-1.381.13-1.89 0-.38-.25-.76-.13-.88.38-.38 1.761-.251 1.51-.76-.75-1.51-2.14-2.391-3.02-3.272-.25-.25-.25-.5-.13-.63l.25-.25c.38-.25.63.25 1.01.38.501 0 2.012 5.282 3.272 4.03 1.26-1.13-1.26-3.52-2.14-4.53-.251-.38-.76-.38-.881-.501-1.01-1.51-1.76-3.4-2.891-4.402-1.51-1.89-5.032-4.782-6.042-4.911-.63 0-1.76.25-2.14.75 0 .13 0 .63-.13.76-.25.25-.76.13-1.01.38-1.01 1.89-2.891 4.03-3.27 5.161-1.261 3.651-3.773 10.064-3.773 10.323-.88 1.89-.5 3.901-.76 5.912.13.63.76 1.01 1.01 1.01h.26v-.009zm-1.01-50.594.13-1.01c.129-.88 1.38-2.52 2.52-3.141.5-.13 1.38-.76 1.51-.501l-.5.88c-.251.25-.63.63-.76 1.01-.25.38-.13 1.13-.38 1.64-.38.5-.76 1.381-1.64 1.64-.25.112-.621-.518-.88-.518zm4.781-3.392.38-.75.25.129-.38.76-.25-.139zm4.41-4.151c-.25.13-.129.5.13.63.242.12.5-.88-.13-.63zm1.511-.13v-.38l-.5.13-.13.38.63-.13zm3.901 83.936c2.14 0-.5.76-3.141.88-1.27.25 1.501-.88 3.141-.88zm.88-35.361c-.25-.13-.38-1.13-.129-1.13.38-.13 1.26-.251 1.64-.251.5.13 1.381 1.13 1.64 2.01a1 1 0 0 1-.25.63c-.64-.129-1.77-.759-2.9-1.26zm1.252 34.98v-.379l.76.13v.38l-.76-.13zm1.14-.12v-.25h.63l-.13.38-.5-.13zm.75-37.63h.13c.5 0 1.01.759.76 1.26-.13.38-1.14-1.26-.89-1.26zm2.77 5.54c-.129-.13-.25 0-.379 0 0 .38-.25 1.01 0 1.26l.38.13c0-.51.25-1.269 0-1.39zm1.01 31.46h-.129c0-.13 2.77 0 2.892-.5.129-.251.25-.251.5-.251.5 0 1.76.38 2.52.88.13.13-.5.38-.5.63-.13.25.88.38.63.38-1.89-.388-3.78-.638-5.912-1.14zm39.004.88c.13-.13.25-.13.38 0 0 .25.129.5-.13.76-.13.13-.25 0-.38 0-.12-.26-.12-.51.13-.76z"})),SvgActiveprinciple04=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M193.066 29.207h-14.002c-2.596 0-3.614 2.743-3.614 5.199v6.496c0 2.743-1.732 3.178-3.9 2.02l-11.408-6.496c-1.157-.723-2.307-.862-2.307-3.178v-1.733c0-1.733-1.01-2.308-2.456-2.308h-15.44c-2.743 0-4.189-1.445-4.189-4.188v-7.367c0-2.595 1.298-4.188 4.041-4.188h53.563c2.89 0 4.188 1.445 4.188 4.188v7.367c0 2.883-1.872 4.188-4.476 4.188zm-35.371 48.94V51.29c0-3.9 2.168-5.486 5.773-3.465l7.942 4.475c1.733 1.01 4.04 2.743 4.04 5.051v13.28c0 2.89-1.157 4.189-3.613 5.634l-8.377 5.05c-3.597 2.169-5.765.436-5.765-3.17zm13.862 36.381c2.456 0 4.041-1.445 4.041-4.04l-.148-18.914c0-4.04-2.168-5.338-5.633-3.178l-8.804 5.346c-2.308 1.445-3.318 2.595-3.318 5.338l.147 11.547c0 2.743 1.733 3.901 4.328 3.901h9.387zm40.711-84.311c-2.596-1.585-3.901-3.03-3.901-5.486v-7.366c0-2.596 1.733-3.901 4.04-3.901h43.454c2.168 0 3.9 1.733 3.9 3.9v7.795c0 2.308-1.732 4.04-3.9 4.04h-21.797c-4.911 0-6.784 1.446-8.081 5.051-.863 2.308-2.456 2.89-5.199 1.158l-8.517-5.19zm-3.894 54.573V43.932c0-1.88.863-3.03 2.456-3.03 1.158 0 2.02.575 3.318 1.298l7.942 4.91c2.595 1.586 4.04 2.456 4.04 4.912 0 2.308 1.01 2.89 4.328 2.89h14.586c2.743 0 4.04 1.298 4.04 4.041l.148 6.931c0 2.891-1.445 4.041-4.188 4.041h-14.725c-3.466 0-4.189 1.585-4.189 5.346 0 3.753-1.297 4.764-3.613 6.209l-8.369 5.183c-1.298.723-2.456 1.298-3.318 1.298-1.593 0-2.456-1.01-2.456-3.17zm25.698 14.003h21.796a3.884 3.884 0 0 1 3.901 3.9v7.795c0 2.307-1.733 4.04-3.9 4.04h-43.454c-2.308 0-4.04-1.733-4.04-4.04v-6.349c0-2.456 1.297-3.9 3.9-5.486l8.517-5.199c2.455-1.445 4.328-1.157 5.198 1.158 1.298 3.598 3.17 4.18 8.082 4.18zm60.222-81.428v6.496c0 3.318-1.01 4.476-3.318 5.921l-8.804 5.486c-3.466 2.168-5.634 1.01-5.634-3.178V17.365a3.884 3.884 0 0 1 3.9-3.901h9.815c2.308 0 4.04 1.733 4.04 3.9zm-5.774 63.96c3.606 2.168 5.774.435 5.774-3.179v-32.48c0-3.902-2.168-5.634-5.774-3.466l-8.951 5.486c-2.168 1.297-3.031 2.595-3.031 4.91V70.5c0 2.89 1.158 4.188 3.606 5.634l8.376 5.19zm5.774 29.302c0 2.168-1.733 3.901-4.04 3.901h-9.823a3.884 3.884 0 0 1-3.9-3.9V91.425c0-4.188 2.167-5.346 5.633-3.178l8.804 5.486c2.308 1.446 3.318 2.596 3.318 5.921l.008 10.972zm14.313-2.02 4.328-20.359c.87-4.328 1.881-6.06 5.199-8.081l10.972-6.497c3.9-2.307 5.634-2.89 9.1-2.89h6.348c3.03 0 4.763-1.88 4.328-5.051l-3.318-22.667c-.435-2.595 0-3.753 2.596-5.198l6.783-3.754c3.03-1.732 5.051-1.297 5.774 2.168l9.962 48.365c.722 3.465-1.585 4.475-3.03 4.475-2.456 0-13.864-4.328-22.38-4.328h-7.359c-5.05 0-7.071 1.446-7.941 5.774l-3.606 19.776c-.575 2.89-2.168 4.188-5.486 4.188H312.5c-3.753 0-4.763-2.02-3.893-5.92zm8.804-45.046 10.972-46.484c.288-1.297 2.168-3.613 4.911-3.613h18.191c2.891 0 4.189 1.298 4.189 3.9v2.169c0 2.89-1.158 4.188-3.606 5.486l-8.229 4.328c-2.743 1.445-3.466 3.466-4.04 6.209L335.897 52.3c-1.586 6.644-1.298 6.784-5.774 9.527l-8.081 5.051c-3.474 2.168-5.502.435-4.632-3.318zm39.848 46.779-1.733-9.814c-.435-2.743 1.01-4.189 4.188-3.466l10.11 2.455c3.178.723 4.763 1.733 5.338 4.911l1.01 6.21c.436 2.89-1.01 3.9-3.465 3.9h-9.814c-3.179-.008-5.059-.73-5.634-4.196z"})),SvgActiveprinciple05=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M131.96 114.562V28.269c0-3.503 1.885-5.396 5.396-5.396h14.83c3.503 0 5.396 1.885 5.396 5.396v2.563h21.442c1.215 0 2.02.813 2.02 2.02v4.047c0 1.215-.814 2.019-2.02 2.019h-21.45v70.248c0 1.751.947 2.698 2.698 2.698h2.698c1.751 0 2.698-.947 2.698-2.698V80.443c0-3.502 1.885-5.396 5.396-5.396h14.83c3.503 0 5.396 1.886 5.396 5.396v34.11c0 3.503-1.885 5.397-5.396 5.397h-48.546c-3.503 0-5.388-1.886-5.388-5.388zm68.757 0V36.354c0-3.502 1.885-5.396 5.396-5.396h53.934c3.502 0 5.396 1.885 5.396 5.396V69.66c0 3.502-1.885 5.396-5.396 5.396h-33.708v39.506c0 3.502-1.885 5.396-5.396 5.396h-14.83c-3.511-.008-5.396-1.894-5.396-5.396zm39.104-47.6V41.75c0-1.751-.947-2.698-2.698-2.698h-8.086c-1.751 0-2.698.947-2.698 2.698v25.212h13.482zm0 47.6v-23.46c0-3.503 1.885-5.397 5.395-5.397h14.831c3.502 0 5.396 1.886 5.396 5.396v23.461c0 3.502-1.885 5.396-5.396 5.396h-14.83c-3.511-.008-5.396-1.894-5.396-5.396zm43.142-106.52h14.83c3.503 0 5.397 1.885 5.397 5.396v4.047c0 3.502-1.886 5.396-5.396 5.396h-14.831c-3.502 0-5.396-1.885-5.396-5.396v-4.047c0-3.51 1.885-5.396 5.396-5.396zm0 22.925h14.83c3.503 0 5.397 1.885 5.397 5.395v78.2c0 3.502-1.886 5.396-5.396 5.396h-14.831c-3.502 0-5.396-1.885-5.396-5.396V36.354c0-3.502 1.885-5.387 5.396-5.387zm32.359 83.595V80.443c0-3.502 1.885-5.396 5.396-5.396h33.708V41.75c0-1.751-.947-2.698-2.698-2.698h-5.396c-1.751 0-2.698.947-2.698 2.698v14.428c0 3.503-1.885 5.396-5.396 5.396h-14.83c-3.503 0-5.396-1.885-5.396-5.396V36.354c0-3.502 1.885-5.396 5.396-5.396h51.236c3.502 0 5.396 1.885 5.396 5.396v78.2c0 3.502-1.885 5.396-5.396 5.396h-14.83c-3.503 0-5.396-1.886-5.396-5.396V83.14h-10.784c-1.751 0-2.698.947-2.698 2.698v28.723c0 3.502-1.885 5.396-5.396 5.396h-14.83c-3.503-.008-5.388-1.894-5.388-5.396z"})),SvgActiveprinciple06=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{d:"M144.624 108.848h-34.23c0-3.36-.17-6.71 0-10.24 0-1.85 1.51-11.07-2.18-11.24-5.7 0-11.58 0-17.11.17-6.54.17-12.92.5-19.3.67-7.89.5-15.94 1.17-23.83 1.17 0-3.02.34-5.87.34-8.72.17-4.7 0-9.06-.34-13.76 0-1.68.17-3.02.17-4.7 0-4.03 0-8.22-.17-12.58 0-2.52-2.01-13.93 2.68-13.09 2.85.67 5.87.34 9.06.34 2.52 0 5.03-.17 7.89 0 1.01 0 2.35.5 3.52.5 2.18 0 4.87-.67 6.88 0 4.36 1.51 9.06-.17 13.09 1.17 4.19 1.34 8.05 0 12.08.84.84.17 1.68-.5 2.68-.84 0-2.52-.34-5.2 0-7.89.5-4.19 1.01-9.56 1.01-13.76 0-2.52 0-5.03.17-7.72 2.18 0 4.36-.17 6.54 0 4.03.17 8.05.67 12.08.84 2.68.17 5.54-.34 8.05.17 4.03.84 7.72.67 11.58.5.5 0 1.34.84 1.51 1.51.17 2.35.17 4.53.17 6.88.17 2.68.34 5.54.17 8.22 0 2.01-1.01 3.86-.67 5.54 1.01 2.85-.34 5.54 0 8.22.17 1.17-.17 2.52-.17 3.69.17 1.85.17 3.86.17 5.7 0 3.86-.5 7.72-.5 11.41 0 1.51.34 3.02.17 4.53 0 1.68-.84 3.19.34 4.7l.17.67c-2.01 1.85-.17 4.19-.5 6.38-.84 3.19-.84 6.38-.5 9.56 0 1.17-.67 2.52.17 4.19.5.84-.34 2.85-.5 4.36-.17 1.34-.34 2.85-.34 4.36v7.38c-.02.36-.19.7-.35.87zm119.96-25.84c-.33 2.01-1.01 4.2-1.34 6.21-.17 1.68 0 3.19 0 4.7-.17 1.85-.5 3.52-.67 5.2 0 .17.17 7.72-.34 11.91-.17 1.85-.17 4.36-.17 6.54-.17 0-.33.17-.33.17-5.54-.5-11.07-.84-16.61-1.17l-11.24-.5c-4.03 0-8.22-.67-12.08-.5-12.25.34-24.5.84-36.91 1.01-5.03 0-10.23.34-15.44.5-6.38 0-2.52-11.41-2.52-15.77 0-4.7-.67-9.4-.67-14.09 0-1.34-.5-2.52-.5-4.03 0-2.18.34-4.03.17-6.04 0-1.34.5-4.7.34-6.04 0 0 .5-6.04.34-6.04 0-4.19 0-8.39.17-12.58.17-4.03.67-8.22 1.01-12.08.5-4.36-1.01-9.4 0-13.76.67-2.68-.34-5.87-.5-8.89 0-2.35.34-4.7.5-7.21h24.5c.84 5.03.5 8.56.5 13.26 0 2.18.5 4.03.67 6.04-.17.5-.67 10.91-.84 14.77 0 1.01-.84 2.01-.84 3.19.17 1.51.34 3.19.84 4.87 0 .34 1.17-.17 1.85-.17 1.85 0 6.71-1.85 8.05-2.01.17-1.51.33-3.19.33-4.87-.33-1.51.67-7.72 1.01-9.56 2.85-1.51 6.88-.5 10.07-1.17 1.68-.34 3.36 0 5.54.17-.34 2.18-.5 4.36-.67 6.38-.17 1.34.33 2.35.17 3.69-.33 4.53-.67 11.24-.84 11.91l.17 3.19c-.17.5 0 1.17.34 1.51.17.17.84.17 1.17 0 5.2-2.35 10.4-5.03 16.95-4.53 0-3.69-.17-7.21 0-10.74.17-1.85 1.01-3.69 1.01-5.54.17-1.68 0-4.03 0-5.37 0-4.03.67-7.05.34-10.91-.34-3.02-.5-6.21-.67-9.23-.17-.84 0-1.68.17-2.68 8.56-.17 17.45-1.01 26.34.17-.34 2.85-.5 5.37-.67 7.89-.67-1.85.84 13.42.84 16.44 0 1.01.5 4.19.17 5.03 0 2.35.17 6.21.17 6.88.5 3.19.5 5.87.5 9.06.17 4.53.17 9.23.34 13.76 0 2.85-.5 5.7-.67 8.39-.21.79.12 1.8-.05 2.64zm-71.14-53.02v-.17.17zm76.01 64.59c2.52-4.19 5.71-8.72 8.05-12.92 2.52-4.03 4.53-8.39 6.88-12.25 4.53-8.05 9.56-16.11 14.09-24.16 2.52-4.19 4.53-8.89 7.05-13.09 1.85-3.36 4.53-6.54 6.54-9.9 1.85-3.02 3.52-6.21 5.2-9.4.5-.84.67-1.51 2.35-.5 3.86 2.35 8.05 4.03 11.91 6.21 6.21 3.19 12.08 6.71 18.12 10.07 2.01 1.34 4.19 2.52 6.21 3.86 1.01.67 1.68 1.68.84 3.19-4.36 7.05-8.22 14.26-12.42 21.81-2.68 4.36-5.37 8.56-8.05 13.09-3.19 6.21-6.71 12.75-10.24 18.96-2.18 4.03-4.7 8.05-6.88 12.08l-9.06 15.77c-13.57-7.55-27-15.1-40.59-22.82zm85.91 24.33c.17-3.69.5-7.05.84-10.57-.17.17-.33.17-.5.17 2.68-7.38 2.18-16.11 3.52-23.99.67-4.03 1.01-8.05 1.51-12.08.34-1.85-.17-6.21.84-7.72 1.34-8.39 1.68-16.78 3.19-25 1.51-7.89 3.02-15.44 3.86-23.49 25-2.85 50-5.54 75-5.54 1.85 8.39 3.86 16.61 5.7 25 1.68 7.72 3.19 15.6 4.87 23.49.17 1.01.17 2.18.33 3.19 0 .67.34 1.17.5 1.68 1.34 2.85 1.01 7.21 1.85 10.4.84 3.52.67 7.89 2.35 11.24.34 1.68.5 3.52.84 5.37 1.01 4.03 2.52 7.55 2.01 11.75 1.51 1.68 4.03 8.73.84 10.07-3.19 1.34-6.88 1.01-10.4 1.34-7.72.67-17.11 3.36-24.83 2.68-5.2-.5-5.87-7.21-8.05-11.75-.84-1.51-10.4-1.01-12.25-1.17-4.87-.67-14.43-3.86-18.96-.84-3.52 2.52-5.7 11.75-6.54 15.77h-26.52z"})),SvgBentameleon01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 1",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M98.428 58.82c-1.528.606-2.935.938-4.092 1.662-4.643 2.906-9.111 6.093-13.826 8.874-5.916 3.489-11.806 7.138-18.082 9.877-6.342 2.767-11.084.445-14.594-5.59-4.022-6.916-3.914-14.238-2.543-21.72 1.19-6.49 2.18-13.106 6.702-18.37 2.094-2.438 4.547-4.574 6.836-6.847l.664.396c.238 1.807.638 3.608.687 5.421.158 5.736-.193 11.313-1.697 17.027-1.304 4.954-.498 10.465-.433 15.727.006.456 1.562 1.388 2.2 1.244 1.653-.371 3.299-1.05 4.765-1.91 6.74-3.952 13.45-7.96 20.11-12.044 4.2-2.576 8.323-5.279 12.397-8.047.507-.345.667-1.425.697-2.176.09-2.214.032-4.435.032-6.652l1.065-.438c1.015 1.034 2.218 1.945 3.006 3.127 1.55 2.322 1.596 2.31 4.176.942 9.818-5.207 19.626-10.433 29.553-15.43 4.332-2.18 7.8-1.612 10.422 1.146 2.06 2.168 2.54 4.918 2.501 7.79-.01.833-.001 1.668-.001 2.791 3.414-1.541 6.548-3.117 9.805-4.387a154.007 154.007 0 0 1 11.983-4.125c1.375-.408 2.98-.064 4.478-.064.114.323.229.646.342.97-1.219.975-2.372 2.048-3.669 2.911-8.21 5.467-16.452 10.887-24.687 16.319-2.302 1.519-4.025 3.329-4.362 6.284-.09.796-1.585 2.184-2.155 2.058-4.272-.942-5.975 2.66-8.81 4.201l.106.82c1.664 0 3.333.092 4.99-.016 6.276-.41 12.55-.85 18.818-1.348 3.706-.295 6.671 1.154 7.766 3.956 1.173 3.002.066 6.098-3.046 8.298-2.427 1.715-4.83 3.484-7.376 5.014-4.618 2.775-7.377 7.133-10.13 11.449-2.898 4.544-2.35 9.416-.324 14.094 1.122 2.59 3.422 3.832 6.376 4.098 6.068.543 11.947-.56 17.707-2.068 9.143-2.394 17.298-6.93 24.15-13.285 3.126-2.9 5.573-6.78 7.49-10.624 2.702-5.425-.555-11.297-6.428-12.859-2.347-.623-4.613-1.553-6.97-2.113-1.788-.424-1.964-1.377-1.696-2.907.973-5.563 6.64-9.355 12.495-8.235 1.452.278 2.867.742 4.481 1.168 0-3.653.26-7.266-.06-10.83-.501-5.594.317-11.013 1.695-16.366.232-.902 1.708-2.17 2.475-2.084.901.1 2.231 1.403 2.38 2.339.888 5.587 1.453 11.222 2.199 16.833.346 2.603.856 5.186 1.293 7.777.49 2.897.93 5.804 1.482 8.69.858 4.491 1.571 9.026 2.748 13.438 1.562 5.85 3.37 11.645 5.34 17.374 1.473 4.284 3.594 8.257 8.123 10.45-.881-6.693-.354-13.221 1.111-19.69.354-1.558-.222-2.532-1.699-3.105-1.68-.652-3.318-1.42-5.012-2.033-1.876-.678-2.239-2.17-1.954-3.767.309-1.732 1.856-1.597 3.2-1.508 1.873.122 3.742.291 5.875.46.49-3.006 1.05-5.879 1.411-8.777 1.12-8.996 2.25-17.994 3.19-27.01.361-3.468.133-6.993.35-10.48.089-1.441.412-2.958 1.019-4.263 1.824-3.92 6.26-4.826 9.238-1.74 1.502 1.559 2.905 3.587 3.424 5.633 3.04 11.978 8.622 22.441 17.936 30.803 4.072 3.657 8.17 7.293 12.398 10.77.884.728 2.477 1.18 3.593.973 9.092-1.691 18.192-3.383 27.2-5.456 5.793-1.332 11.484-3.163 17.135-5.025 11.305-3.73 22.528-7.703 33.828-11.447 10.115-3.35 20.163-7.003 30.47-9.651 10.842-2.787 21.805-5.426 33.123-5.753 9.708-.28 19.23.715 27.857 5.489 10.266 5.68 15.804 14.365 15.885 26.18.015 2.226.002 4.453.002 6.515-3.98-4.475-7.971-8.75-11.723-13.22-6.915-8.238-15.935-11.305-26.48-11.368-13.339-.079-26.234 2.5-39.015 5.839-5.221 1.363-10.36 3.047-15.503 4.687-11.486 3.662-22.953 7.382-34.423 11.093-6.774 2.19-13.503 4.521-20.32 6.573-3.75 1.13-7.63 1.845-11.464 2.689-4.56 1.003-9.132 1.941-13.978 2.967 1.393.922 2.651 1.938 4.062 2.659 8.56 4.377 17.391 7.888 27.116 8.935 2.212.237 4.513 1.404 6.372 2.703 3.495 2.44 3.139 6.483-.468 8.84-2.649 1.73-5.582 1.998-8.608 1.617-8.984-1.13-17.526-3.822-25.407-8.14-6.782-3.718-13.174-8.127-19.848-12.046-1.504-.882-3.49-1.448-5.22-1.378-6.671.269-13.326 1.084-19.998 1.244-4.605.111-9.228-.521-13.844-.82-.925-.06-1.85-.112-2.874-.174-.856 4.867-1.705 9.578-2.507 14.3-.453 2.676-.806 5.37-1.257 8.048-.097.576-.415 1.118-.652 1.667-.323.756-.936 1.497-.954 2.255-.08 3.34-2.954 5.992-6.363 5.736-2.931-.218-5.143-1.696-7.089-3.751-4.199-4.434-7.244-9.551-9.393-15.217-.27-.711-.604-1.398-.912-2.106-3.163 2.805-6.029 5.782-9.329 8.172-4.855 3.516-9.985 6.666-15.066 9.87-2.57 1.621-5.219 2.966-8.46 3.19-1.52.105-2.844 1.937-4.43 2.371-3.164.87-6.44 1.365-9.685 1.925-6.538 1.126-13.082 1.083-19.246-1.489-5.92-2.47-9.657-7.282-11.233-13.295-.841-3.206-.823-6.823-.35-10.136 1.064-7.434 3.104-14.61 9.216-20.788-2.51-.113-4.246-.283-5.977-.253-5.016.09-9.681-.783-13.621-4.17-4.013-3.447-4.276-6.934-.764-10.846 5.528-6.156 11.964-11.219 19.09-15.42 1.928-1.136 2.857-2.448 2.448-4.731-.235-1.317-.043-2.708-.043-4.313-4.469 2.55-8.562 4.78-12.549 7.184-6.373 3.843-12.66 7.827-19.021 11.689-1.49.903-1.78 1.82-1.476 3.613 1.464 8.647 2.609 17.346 3.958 26.014.75 4.825 1.679 9.622 2.529 14.432.013.075.056.145.075.22 1 4.104-.497 7.529-3.606 8.253-2.845.663-6.8-2.309-7.306-5.941-1.133-8.148-2.172-16.316-2.929-24.505-.413-4.475-.159-9.008-.24-13.515-.012-.67-.21-1.34-.374-2.311h.005zm144.933-9.307c-1.559 7.927-3.116 15.854-4.792 24.382 8.263-.267 16.071-.521 24.47-.794-6.674-8.292-14.665-14.5-19.678-23.59v.002z"}),reactExports.createElement("path",{d:"M202.708 8.169c4.256.027 8.365 4.315 8.387 8.747.017 3.638-3.45 7.072-7.064 7-4.224-.085-9.461-4.885-9.435-8.649.026-3.894 3.722-7.127 8.112-7.098z"}))),SvgFakeart01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M44.592 9.85H16.068v19.256c0 4.36 3.554 7.914 7.914 7.914s7.914-3.555 7.914-7.914V25.72h12.696v84.516c0 4.359 3.555 7.914 7.914 7.914s7.914-3.555 7.914-7.914V25.678h12.696v3.386c0 4.359 3.555 7.914 7.915 7.914 4.359 0 7.914-3.555 7.914-7.914V9.85H44.592zm171.697 15.828c4.36 0 7.914-3.555 7.914-7.914s-3.555-7.914-7.914-7.914h-63.482v108.258h63.482c4.36 0 7.914-3.555 7.914-7.914s-3.555-7.914-7.914-7.914h-47.654V71.893h22.811c4.36 0 7.915-3.555 7.915-7.914 0-4.36-3.555-7.914-7.915-7.914h-22.81V25.678h47.653zm136.486 0c4.359 0 7.914-3.555 7.914-7.914s-3.555-7.914-7.914-7.914h-58.192c-4.359 0-7.914 3.555-7.914 7.914s3.555 7.914 7.914 7.914h21.203v76.602h-21.203c-4.359 0-7.914 3.554-7.914 7.914s3.555 7.914 7.914 7.914h58.192c4.359 0 7.914-3.555 7.914-7.914s-3.555-7.914-7.914-7.914h-21.203V25.678h21.203zm142.834 82.272-6.645-22.133v-.043l-21.033-70.253v-.042c-.043-.17-.127-.339-.17-.508-.042-.085-.042-.17-.084-.254-.043-.085-.085-.212-.127-.296a5.757 5.757 0 0 0-1.016-1.608s0-.043-.042-.043c-.127-.127-.212-.254-.339-.38a.743.743 0 0 1-.17-.212c-.084-.085-.168-.127-.253-.212-.127-.085-.212-.211-.339-.296l-.084-.085a6.999 6.999 0 0 0-1.524-.93c-.127-.043-.254-.128-.38-.17-.085-.042-.128-.042-.212-.085-.17-.084-.339-.127-.55-.211h-.043c-.042 0-.127-.043-.169-.043-.17-.042-.38-.084-.55-.127-.085 0-.212-.042-.296-.042-.17-.042-.297-.042-.466-.085-.127 0-.254 0-.38-.042h-1.186c-.17 0-.338.042-.508.085-.084 0-.169.042-.254.042-.211.042-.38.085-.592.127-.042 0-.127.042-.17.042h-.042c-.211.043-.38.127-.592.212-.043.042-.127.042-.17.085a1.976 1.976 0 0 0-.423.211c-.508.254-.973.55-1.439.889-.042.042-.084.042-.127.085-.127.084-.211.211-.338.296-.085.084-.17.17-.254.211-.042.043-.127.127-.17.212a2.738 2.738 0 0 0-.338.38l-.042.043c-.381.508-.72 1.058-1.016 1.65-.042.085-.085.212-.127.297-.042.085-.042.17-.085.254-.084.17-.127.339-.169.508v.042l-21.034 70.253v.085l-6.602 22.092c-1.27 4.19 1.143 8.59 5.333 9.86.762.212 1.523.339 2.285.339 3.428 0 6.56-2.2 7.576-5.629l4.909-16.42h30.387l4.909 16.42c1.016 3.428 4.19 5.629 7.575 5.629.762 0 1.524-.127 2.286-.339 4.147-1.27 6.517-5.67 5.29-9.86zm-35.296-27.72H449.86l10.453-34.83 10.453 34.83h-10.453z"})),SvgHeracles01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M325.757 62.199c3.089-5.395 8.111-13.246 11.088-18.418 2.307-4.093 6.028-6.064 10.046-3.572 4.874 3.051.93 6.437-1.042 9.265-4.8 6.772-18.194 24.333-18.194 24.333s.26 7.367 3.832 11.311c4.54 4.986 9.376 0 13.47-2.977 1.04-.78 1.785-1.6 2.715-2.567a39.6 39.6 0 0 0 2.344-2.641c1.303-1.638 2.568-2.903 4.502-1.414 2.344 1.748.075 4.316-.893 6.139-2.902 5.618-6.548 10.753-11.422 14.92-7.888 6.66-13.171 5.32-17.078-4.242-.93-2.344-2.381-7.255-3.423-10.157-4.39 6.51-5.916 9.487-9.45 12.576-5.693 5.06-11.944 9.487-19.534 6.436-7.367-2.976-7.479-10.901-7.479-17.598 0-12.986 4.205-24.631 12.092-34.938 4.316-5.618 9.6-10.38 17.488-8.743 7.59 1.6 8.408 8.52 10.008 14.548.335 1.525.335 2.38.93 7.739zm-5.432 5.32c-.93-5.804-1.153-7.33-2.418-10.567-3.386-8.446-8.297-9.19-15.292-3.423-7.218 5.954-11.609 21.73-8.67 30.473 2.233 6.623 6.065 7.516 12.093 5.172 6.623-2.568 14.399-14.623 14.287-21.655z"}),reactExports.createElement("path",{stroke:"#000",strokeMiterlimit:10,strokeWidth:.75,d:"M225.522 116.67c-10.232-.484-18.008-5.88-20.278-13.693-2.344-8.148.484-15.106 7.665-19.384.967-.596 2.158-1.042 2.828-1.526.297-.223.446-.67.26-1.005-.335-.855-1.042-2.492-1.6-3.757-4.278-10.046-.446-18.083 9.823-21.543 10.641-3.572 21.059.781 24.11 10.195.707 2.12 1.674 4.8-.67 6.25-2.381 1.489-4.353-.558-5.841-2.27-4.279-4.873-9.6-5.952-15.664-4.353-3.87 1.005-5.619 3.833-5.246 7.74.297 3.832 2.306 6.362 6.51 6.51.596.038 1.154 0 1.712.038 4.279.298 8.781.26 11.05 4.948.67 1.34.522 3.014-.706 3.907-3.907 3.014-8.26 1.972-12.316.484-4.762-1.749-9.376-3.61-13.32 1.116-2.232 2.679-2.046 5.879-.41 8.818 2.94 5.209 7.666 7.702 13.581 7.18 2.79-.222 5.507-1.599 8.26-2.231 2.01-.447 4.093-.447 5.247 1.748s0 3.907-1.452 5.284c-3.98 4.018-9.264 5.171-13.543 5.543z",className:"st0"}),reactExports.createElement("path",{d:"M233.708 45.381c-3.647-.037-4.019-2.344-2.902-4.614 4.241-8.966 8.632-17.933 13.245-26.751 1.228-2.27 3.832-3.647 6.66-2.195s3.237 4.427 1.935 6.622c-5.358 8.707-11.162 17.19-16.855 25.636-.483.744-1.45.967-2.083 1.302zm-18.715-7.069c-5.619.186-14.92-.335-33.859 1.228-22.026 1.86-25.3 15.7-24.593 28.016.148 2.493 3.72 2.903 4.39.484 2.865-10.604 8.893-16.594 25.375-17.078.67-.037 1.154.707.819 1.302-7.516 14.548-15.516 40.556-15.516 40.556-2.492 6.139 3.163 7.888 11.162 4.986 6.214-2.233 10.94-6.437 14.586-11.535 2.232-3.125-.745-6.808-4.242-5.246-2.084.93-4.093 1.749-5.655 2.27-.782.26-1.563-.484-1.34-1.302l8.632-28.426c.447-1.489 1.786-2.456 3.386-2.419l17.078.521c3.46 0 6.288-2.456 6.288-7.07 0-3.571-2.977-6.436-6.511-6.287z"}),reactExports.createElement("circle",{cx:258.971,cy:39.093,r:8.632}),reactExports.createElement("circle",{cx:282.374,cy:39.093,r:8.632}),reactExports.createElement("path",{stroke:"#000",strokeMiterlimit:10,d:"M269.315 56.246c-2.79-.856-5.767.706-6.623 3.497l-2.01 6.511-1.971 6.437-1.898 6.437c-.595 2.158-1.228 4.316-1.786 6.474-1.19 4.316-2.27 8.669-3.311 13.022-.26 1.116-.521 2.195-.744 3.312-.26 1.116-.484 2.195-.707 3.31-.484 2.196-.893 4.429-1.34 6.698-.26 1.414.186 2.94 1.414 3.907 1.712 1.414 4.279 1.19 5.693-.558l.335-.41c.744-.632 1.413-1.339 2.083-2.046.67-.707 1.302-1.451 1.972-2.195 1.265-1.488 2.419-3.014 3.61-4.54l3.422-4.539c1.154-1.488 2.233-2.976 3.237-4.316l.15-.223c.78-1.004.966-2.418.334-3.683-.856-1.712-2.94-2.382-4.65-1.526-1.117.558-2.01 1.563-2.903 2.195-.781.596-2.79 2.419-3.758 3.312.819-3.163 1.712-6.325 2.753-9.45 1.34-4.13 2.828-8.186 4.465-12.242a170.49 170.49 0 0 1 2.567-5.99c.447-.967.893-1.972 1.377-2.94l.707-1.45c.223-.484.52-.968.707-1.414v-.038c.149-.26.26-.595.335-.892a5.279 5.279 0 0 0-3.46-6.66z",className:"st1"}))),SvgHoroMox01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M245.989 35.521h-18.488v19.941h18.488v37.017h19.982V55.462h18.488V35.521h-18.488z"}),reactExports.createElement("path",{d:"M256 6.78c-31.567 0-57.2 25.673-57.2 57.24 0 31.567 25.673 57.2 57.2 57.2s57.2-25.673 57.2-57.2c0-31.567-25.673-57.24-57.2-57.24zm0 108.99c-28.54 0-51.79-23.21-51.79-51.79 0-28.54 23.21-51.75 51.79-51.75s51.75 23.21 51.75 51.79c0 28.54-23.21 51.75-51.75 51.75z"}))),SvgHoroMox03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M236.122 7.25H199.25v39.755h36.872v73.745h39.756V47.005h36.872V7.25h-76.628z"})),SvgIcecreamgreezer01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"m409.65 121.291-.325-113.038c0-1.422-.488-1.87-1.057-1.87h-61.882c-.569 0-1.057.488-1.057 1.87l-1.95 113.038c0-.203.488.285 1.057.285h14.586a1.05 1.05 0 0 0 1.057-1.057V91.102c0-.61.487-1.057 1.056-1.057h30.8a1.05 1.05 0 0 1 1.056 1.057v29.417c0 .61.487 1.057 1.097 1.057h14.465c.61 0 1.097-.488 1.097-.285zm-49.53-52.375V43.643c0-.61.487-1.056 1.056-1.056h30.799c.61 0 1.056.488 1.056 1.056v25.273a1.05 1.05 0 0 1-1.056 1.057h-30.799c-.569.04-1.056-.447-1.056-1.057zm-94.957-26.004h12.636c.61 0 1.056.488 1.056 1.056v42.014a1.05 1.05 0 0 1-1.056 1.056h-15.074a1.05 1.05 0 0 0-1.057 1.057v32.384a1.05 1.05 0 0 0 1.057 1.056h64.93a1.05 1.05 0 0 0 1.056-1.056V88.095a1.05 1.05 0 0 0-1.056-1.057h-14.75a1.05 1.05 0 0 1-1.056-1.056V43.968c0-.61.487-1.056 1.056-1.056h14.709a1.05 1.05 0 0 0 1.056-1.056V7.44a1.05 1.05 0 0 0-1.056-1.056h-62.451a1.05 1.05 0 0 0-1.057 1.056v34.375c0 .61.447 1.097 1.057 1.097zM183.37 7.4l-4.51 113.038a1.07 1.07 0 0 0 1.057 1.138h64.767a1.05 1.05 0 0 0 1.056-1.057v-18.325a1.05 1.05 0 0 0-1.056-1.056h-29.336c-.61 0-1.097-.488-1.057-1.097l.57-25.233c0-.569.487-1.056 1.056-1.056h30.392a1.05 1.05 0 0 0 1.057-1.057V54.33a1.05 1.05 0 0 0-1.057-1.057h-29.905c-.61 0-1.097-.487-1.056-1.097l.528-23.85c0-.57.487-1.057 1.056-1.057h31.206a1.05 1.05 0 0 0 1.056-1.057V7.44a1.05 1.05 0 0 0-1.056-1.056h-63.671c-.569 0-1.056.447-1.097 1.016zm-79.964 33.684 12.556.243c.61 0 1.097.529 1.056 1.138l-4.429 78.014a1.069 1.069 0 0 0 1.057 1.137h35.268a1.05 1.05 0 0 0 1.057-1.056l1.91-78.136c0-.568.487-1.056 1.056-1.056h16.537a1.05 1.05 0 0 0 1.057-1.056V7.44a1.05 1.05 0 0 0-1.057-1.056h-65.296a1.05 1.05 0 0 0-1.056 1.056l-.772 32.546a1.11 1.11 0 0 0 1.056 1.098z"})),SvgJeanSaucisse01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M257.748 21.861h-7.846v91.433h-6.749V37.107h-7.846v84.074h7.846v-.04h6.749v.04h7.846V60.158h24.027l16.669 61.226 8.05-.284-27.036-99.239h-21.71zm0 30.45V29.709h15.734l6.138 22.604h-21.872z"}),reactExports.createElement("path",{fill:"#FFF",d:"m298.281 121.628-.04-.162-16.628-61.105H257.95v60.983h-8.25v-.041h-6.302v.04h-8.253v-84.44h8.253v76.147h6.302V21.658h29.921l.041.163 27.117 99.523-8.497.284zm-40.777-61.673h24.393l16.669 61.226 7.643-.285-26.914-98.831h-29.19v91.432h-7.155V37.31h-7.44v83.668h7.44v-.04h7.155v.04h7.44V59.955h-.04zm22.36-7.44h-22.36v-23.01h16.059l6.301 23.01zm-21.913-.407h21.426l-6.058-22.197h-15.368v22.197z",className:"st0"}),reactExports.createElement("path",{d:"M317.633 105.488 290.679 6.575h-63.137l11.708 22.726 7.684-14.88h37.768l26.914 98.873 2.155 7.846h7.561l.163.041v-.04l.203-.732 1.952-7.156 13.538-49.64-7.562-2.073-11.993 43.948zM239.21 21.251l-5.651-10.976h11.302L239.21 21.25z"}),reactExports.createElement("path",{fill:"#FFF",d:"m321.617 121.425-.366-.081h-7.684l-2.195-8.01-26.873-98.71h-37.484l-7.805 15.124-12.034-23.376H290.8l.04.162 26.751 98.182 11.83-43.379 7.969 2.155-.04.203-15.734 57.73zm-7.725-.488h7.44l15.571-57.16-7.196-1.952-12.115 44.436-27.076-99.483h-62.65l11.384 22.076 7.562-14.636h38.053l.04.163 28.988 106.556zM239.21 21.7l-5.977-11.628h11.993L239.21 21.7zm-5.326-11.221 5.326 10.367 5.325-10.367h-10.651z",className:"st0"}),reactExports.createElement("path",{d:"M197.294 21.861v30.451h-15.001V14.096h-7.847v38.216h-7.602v7.846h7.602v61.023h7.847v-.041h46.062v-7.846h-46.062V60.158h15.001v30.491h31.061v-7.846h-23.214V60.158h23.214v-7.846h-23.214V29.708h23.214v-7.847h-23.214z"}),reactExports.createElement("path",{fill:"#FFF",d:"M182.496 121.384h-8.253V60.402H166.6v-8.253h7.643V13.893h8.253v38.256h14.595V21.658h31.467v8.253h-23.214v22.197h23.214v8.253h-23.214V82.56h23.214v8.253h-31.467V60.32h-14.554v52.688h46.062v8.253h-46.103v.122zm-7.846-.406h7.44v-.04h46.061v-7.44H182.09V59.954h15.408v30.491h30.653v-7.44h-23.213v-23.05h23.213v-7.44h-23.213v-23.01h23.213v-7.44h-30.653v30.49H182.13V14.3h-7.44v38.257h-7.643v7.44h7.643v60.982h-.04z",className:"st0"}),reactExports.createElement("path",{d:"m345.115 65.647-3.008-11.465-3.049-11.465-8.416 8.375-8.375 8.334 11.424 3.09z"}),reactExports.createElement("path",{fill:"#FFF",d:"m345.4 65.931-23.54-6.383 17.32-17.197 6.22 23.58zm-22.726-6.586 22.197 6.017-5.894-22.238-16.303 16.221z",className:"st0"}))),SvgJudoKazate01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M147.257 12.605h25.453v102.789h-25.453zm153.767 0h25.453v102.789h-25.453z"}),reactExports.createElement("path",{strokeWidth:.363,d:"M172.79 12.612v25.453H70V12.612zm115.51.005V38.07H185.512V12.617zm.011 38.661v25.453H185.522V51.278zm.011 38.662v25.452H185.533V89.939zM121.956 45.428l17.997 17.998-51.941 51.941L70.014 97.37zm242.792 69.967h-25.452V12.605h25.452z"}),reactExports.createElement("path",{strokeWidth:.363,d:"M442 12.613v25.452H339.21V12.613zm-.006 84.769-17.998 17.997-51.941-51.941 17.997-17.998z"}))),SvgJulioGlatt01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null","data-name":"Layer 1"},reactExports.createElement("path",{fill:"none",stroke:"#000",strokeMiterlimit:10,strokeWidth:7,d:"m256.24 119.306-40.779-11.562V95.082l-19.791-6.188V23.35l61.606-14.655 59.054 14.671V88.99l-19.791 5.438v13.795l-40.284 11.068-.016.016zm-30.971-18.977 31.018 8.787 30.444-8.373V86.95l19.791-5.438V31.02l-49.294-12.249-51.734 12.312V81.67l19.79 6.188v12.455l-.015.016z",className:"cls-1"}),reactExports.createElement("path",{d:"M229.559 68.465V51.003h-4.832v-1.93h11.817v1.93h-4.832v17.462h-2.17.017zm16.952.208c-.51 0-1.02-.048-1.547-.128-.526-.096-1.004-.24-1.483-.478s-.893-.527-1.26-.877c-.383-.367-.686-.782-.925-1.244s-.398-.957-.494-1.468a8.378 8.378 0 0 1-.144-1.562v-2.632c0-.51.048-1.02.128-1.547.08-.526.255-1.004.494-1.467.24-.462.543-.877.925-1.244.383-.367.798-.67 1.26-.893s.941-.383 1.467-.478c.51-.08 1.037-.128 1.547-.128s1.02.048 1.547.128 1.005.239 1.467.478c.463.223.877.526 1.26.893s.686.782.925 1.244c.24.463.399.941.495 1.467s.127 1.037.127 1.547v2.297h-9.409v.335c0 .334.032.67.08 1.004.048.335.143.654.287.957s.335.574.574.83c.24.255.494.462.797.605.287.144.606.256.941.32.335.063.67.095 1.005.095.383 0 .765-.032 1.132-.08a3.76 3.76 0 0 0 1.069-.319c.335-.16.638-.382.877-.685s.383-.638.414-1.021h2.185a4.164 4.164 0 0 1-.303 1.26c-.16.399-.398.765-.67 1.1-.287.32-.606.606-.972.83s-.766.414-1.18.542c-.415.127-.83.223-1.26.27s-.861.065-1.308.065l-.048-.016zm-3.668-8.038h7.224V60.3c0-.335-.031-.67-.08-.989s-.143-.638-.286-.956c-.144-.303-.32-.59-.543-.83s-.478-.446-.781-.606c-.303-.16-.606-.27-.94-.335s-.655-.111-.99-.111-.67.032-.988.111-.638.192-.941.335c-.303.16-.558.367-.782.606-.223.24-.398.527-.542.83-.144.303-.24.621-.287.956s-.08.654-.08.99v.334h.016zm14.146 7.83V66.52h4.433v-9.84h-4.003v-1.93h6.172v11.77h4.003v1.945h-10.605zm5.294-16.027c-.223 0-.446-.032-.653-.096a1.344 1.344 0 0 1-.894-.893c-.063-.207-.095-.43-.095-.654s.032-.446.095-.654c.064-.207.176-.398.335-.558.16-.16.335-.27.559-.335s.43-.111.653-.111.447.032.654.111.399.192.558.335c.16.16.272.335.335.558.064.208.112.431.112.654s-.032.447-.112.654-.191.399-.335.558c-.16.16-.334.271-.558.335-.207.064-.43.096-.654.096zm14.529 16.235a8.74 8.74 0 0 1-1.117-.08 4.302 4.302 0 0 1-1.1-.287 4.005 4.005 0 0 1-.973-.574 3.37 3.37 0 0 1-.75-.83 3.03 3.03 0 0 1-.43-1.02 4.486 4.486 0 0 1-.128-1.132c0-.495.08-.973.24-1.436s.398-.877.733-1.228.718-.638 1.148-.86c.431-.224.878-.4 1.356-.527.478-.128.957-.223 1.435-.271s.957-.064 1.436-.064h2.854V59.31a3.08 3.08 0 0 0-.111-.845 2.377 2.377 0 0 0-.335-.765 2.314 2.314 0 0 0-.59-.59 3.696 3.696 0 0 0-.75-.383c-.271-.096-.542-.144-.813-.192a7.507 7.507 0 0 0-.845-.047c-.383 0-.766.032-1.149.095a3.789 3.789 0 0 0-1.084.367 2.339 2.339 0 0 0-.845.782 1.93 1.93 0 0 0-.335 1.084h-2.185c0-.447.08-.861.223-1.292s.367-.797.638-1.148.59-.638.957-.877.765-.447 1.18-.574c.415-.144.845-.24 1.276-.287.446-.048.877-.08 1.324-.08.478 0 .94.032 1.403.096.462.063.909.175 1.34.35.43.16.829.4 1.212.67.382.287.701.622.956 1.005.272.383.447.813.559 1.26.111.462.16.925.16 1.403v9.154h-2.186V66.12a4.25 4.25 0 0 1-.797 1.148 4.649 4.649 0 0 1-1.148.846 4.76 4.76 0 0 1-1.34.462 8.35 8.35 0 0 1-1.403.128l-.016-.032zm.813-1.93c.319 0 .638-.032.957-.08.319-.048.622-.127.925-.239s.574-.255.845-.446c.271-.192.494-.415.67-.686s.319-.558.383-.877.111-.638.111-.941v-1.18h-2.854c-.287 0-.574 0-.877.031-.303.016-.59.064-.878.112a8.265 8.265 0 0 0-.845.223c-.287.08-.542.208-.797.383-.24.176-.447.383-.574.654s-.208.542-.208.813c0 .367.096.718.287 1.021.192.319.447.574.75.75s.638.303 1.005.366c.366.064.717.096 1.1.096z"}))),SvgJulioGlatt02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{"data-name":"Layer 1"},reactExports.createElement("rect",{width:61.68,height:47.89,x:90.865,y:61.12,rx:4.01,ry:4.01}),reactExports.createElement("rect",{width:43.87,height:41.92,x:46.995,y:18.98,rx:4.01,ry:4.01}),reactExports.createElement("path",{d:"M429.995 60.75a4.01 4.01 0 0 1-4.01-4.01V46.33h-3.74v-.12h-37.9v.12h-3.74v10.41a4.01 4.01 0 0 1-4.01 4.01h-37.35v.08h-156.91a4.01 4.01 0 0 1-4.01-4.01V22.99a4.01 4.01 0 0 0-4.01-4.01h-17.77a4.01 4.01 0 0 0-4.01 4.01V56.9a4.01 4.01 0 0 0 4.01 4.01h17.41a4.01 4.01 0 0 1 4.01 4.01v40.09a4.01 4.01 0 0 0 4.01 4.01h157.57v-.08h37.62a4.01 4.01 0 0 0 4.01-4.01V92.28a4.01 4.01 0 0 1 4.01-4.01h33.88a4.01 4.01 0 0 1 4.01 4.01v12.65a4.01 4.01 0 0 0 4.01 4.01h33.91a4.01 4.01 0 0 0 4.01-4.01V64.78a4.01 4.01 0 0 0-4.01-4.01h-30.99l-.01-.02z"}))),SvgJulioGlatt03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"m313.102 30.014.223 27.651L340.82 30.17l-27.718-.156zM238.996 64.4a2.813 2.813 0 0 0-.467-.711 2.356 2.356 0 0 0-.667-.523 3.48 3.48 0 0 0-.8-.3c-.278-.055-.567-.089-.856-.089s-.566.034-.855.09a2.69 2.69 0 0 0-.8.3 2.355 2.355 0 0 0-.667.522 3.026 3.026 0 0 0-.467.711c-.122.267-.2.534-.245.823a5.408 5.408 0 0 0-.066.844v.3h6.212v-.3a5.34 5.34 0 0 0-.066-.844 3.67 3.67 0 0 0-.245-.823h-.011zm24.15 3.412a4.01 4.01 0 0 0-.745.1 13.83 13.83 0 0 0-.722.189 2.566 2.566 0 0 0-.678.333c-.211.145-.378.334-.5.556s-.178.467-.178.7c0 .323.078.611.245.89.166.277.378.488.644.644.267.156.556.267.867.322a5.33 5.33 0 0 0 1.756.011c.278-.044.534-.11.79-.2.255-.089.5-.222.722-.389s.422-.366.578-.589c.155-.222.266-.478.333-.744a4.03 4.03 0 0 0 .089-.812v-1.022h-2.445c-.245 0-.49 0-.745.022l-.01-.011zm28.351 18.627V30.014H262.89V8.398l-57.602-.445-34.108 34.064v21.616h28.607v56.414h78.963l34.352-33.62h-21.616l.011.012zm-43.01-29.096c.056-.178.145-.345.29-.478.132-.133.3-.233.477-.289.178-.056.367-.089.567-.089s.389.033.567.089c.177.056.344.156.477.289.134.133.234.3.3.478s.09.367.09.567-.034.389-.09.566-.155.345-.3.478c-.133.134-.3.234-.477.278-.178.056-.367.078-.567.078s-.39-.022-.567-.078a1.154 1.154 0 0 1-.478-.278c-.133-.133-.233-.3-.289-.478s-.078-.366-.078-.566.023-.39.078-.567zm-20.805.744h-4.145v15.015h-1.856V58.087h-4.146v-1.655h10.158v1.655h-.01zm13.515 9.958h-8.091v.29c0 .288.022.577.066.866.045.29.134.556.245.823s.289.5.489.71.433.39.678.523c.244.134.522.223.8.278.289.056.578.078.867.078.333 0 .656-.022.978-.067.322-.044.622-.133.922-.267.3-.133.545-.333.756-.589.211-.255.333-.555.367-.878h1.878a3.993 3.993 0 0 1-.256 1.09 3.426 3.426 0 0 1-.578.944c-.244.278-.522.523-.833.712s-.656.355-1.011.466a5.265 5.265 0 0 1-1.09.223c-.366.033-.744.055-1.122.055a7.67 7.67 0 0 1-1.323-.11 4.574 4.574 0 0 1-2.356-1.168c-.322-.311-.589-.667-.789-1.067s-.344-.822-.433-1.256a6.693 6.693 0 0 1-.122-1.333V66.1c0-.434.033-.878.11-1.323a4.279 4.279 0 0 1 1.213-2.323c.321-.322.688-.578 1.077-.767s.811-.333 1.256-.41.89-.112 1.323-.112.877.033 1.322.111a4.387 4.387 0 0 1 2.334 1.178 4.28 4.28 0 0 1 1.211 2.323c.078.445.111.89.111 1.323v1.978-.034zm13.17 5.057h-9.114v-1.678h3.812v-8.458h-3.445V61.31h5.301v10.114h3.445v1.678zm13.858 0h-1.878v-2.045c-.167.367-.4.69-.69.99-.3.3-.622.533-.988.722a4.25 4.25 0 0 1-1.145.4 6.3 6.3 0 0 1-1.211.111c-.323 0-.634-.022-.967-.067a4.725 4.725 0 0 1-.945-.244c-.3-.122-.578-.29-.834-.49s-.477-.444-.644-.71a2.755 2.755 0 0 1-.378-.89 4.126 4.126 0 0 1-.111-.978c0-.422.067-.833.2-1.233.133-.4.344-.756.633-1.056s.612-.545.99-.734a5.918 5.918 0 0 1 1.166-.455c.412-.111.823-.19 1.234-.222s.823-.056 1.234-.056h2.445v-.911c0-.245-.034-.49-.09-.723a1.746 1.746 0 0 0-.3-.655 2.243 2.243 0 0 0-1.155-.834 3.037 3.037 0 0 0-.7-.156 5.362 5.362 0 0 0-.723-.044c-.333 0-.666.022-.989.078a2.916 2.916 0 0 0-.933.322 1.89 1.89 0 0 0-.723.667c-.189.289-.278.6-.278.933h-1.878c0-.377.067-.744.19-1.11a3.57 3.57 0 0 1 .544-.99c.233-.289.511-.545.822-.756s.656-.378 1.012-.5c.355-.122.722-.2 1.1-.244a9.695 9.695 0 0 1 2.345.01c.4.056.789.156 1.156.29.366.144.722.333 1.044.578s.6.533.823.866c.222.334.389.7.478 1.09s.133.789.133 1.2v7.868l.011-.022z","data-name":"Layer 1"})),SvgJulioGlatt04=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null","data-name":"Layer 1"},reactExports.createElement("path",{d:"M337.094 11.522v16.56a2.943 2.943 0 0 0-.177.188c-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.234.211-.334.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.111.1-.222.211-.322.322-.122.1-.234.211-.333.334-.112.1-.223.21-.323.322-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.11.1-.222.21-.322.322-.122.1-.233.21-.333.333-.111.1-.222.211-.322.322-.122.1-.233.211-.333.333-.123.1-.222.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.222.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333a3.346 3.346 0 0 0-1.022 1.6c-.155.388-.244.81-.244 1.243v26.2a1.43 1.43 0 0 0-.178.19c-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.067.055-.122.11-.189.177h-73.536V63.567a3.328 3.328 0 0 0-3.332-3.332h-25.257V43.687a1.43 1.43 0 0 0 .178-.19c.122-.1.233-.21.333-.332.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333a1.43 1.43 0 0 0 .189-.178h131.046m3.332-3.332H204.338v.333h-.334v.334h-.333v.333h-.333v.333h-.333V10h-.333v.333h-.334v.334h-.333V11h-.333v.333h-.333v.333h-.333V12h-.334v.334h-.333v.333h-.333V13h-.333v.333h-.333v.333h-.334V14h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334V63.59h28.589v56.377h78.912v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-27.91h.111v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333V8.19l.022.144z"}),reactExports.createElement("path",{d:"M341.315 8.034h-78.768v21.602h28.589v56.377h21.591V29.636h28.588V8.034zm-118.163 62.63V55.659h-4.142v-1.655h10.151v1.655h-4.143v15.005h-1.865zm14.572.178c-.444 0-.877-.034-1.322-.111a4.57 4.57 0 0 1-2.354-1.167c-.322-.31-.589-.666-.789-1.066s-.344-.822-.433-1.255a6.689 6.689 0 0 1-.122-1.333v-2.265c0-.434.033-.878.111-1.322.078-.444.211-.866.422-1.255.2-.389.467-.744.789-1.066.322-.322.688-.578 1.077-.767s.81-.333 1.255-.41.889-.112 1.322-.112.877.034 1.321.111.867.211 1.255.411c.39.2.756.456 1.078.767a4.278 4.278 0 0 1 1.21 2.32c.078.445.111.89.111 1.323v1.977h-8.085v.288c0 .29.022.578.067.867.044.288.133.555.244.822s.289.5.489.71.433.39.677.522c.244.134.522.222.8.278.289.056.577.078.866.078.333 0 .655-.022.977-.067a3.37 3.37 0 0 0 .922-.266c.3-.134.545-.334.756-.59.21-.255.333-.554.366-.877h1.877a3.99 3.99 0 0 1-.255 1.089 3.424 3.424 0 0 1-.578.944c-.244.278-.522.522-.833.71s-.655.356-1.01.467a5.261 5.261 0 0 1-1.089.222c-.367.034-.744.056-1.122.056v-.033zm-3.154-6.909h6.208v-.3a5.3 5.3 0 0 0-.066-.844 3.668 3.668 0 0 0-.245-.822 2.812 2.812 0 0 0-.466-.71 2.354 2.354 0 0 0-.666-.522 3.477 3.477 0 0 0-.8-.3c-.278-.056-.566-.09-.855-.09s-.567.034-.855.09a2.689 2.689 0 0 0-.8.3 2.354 2.354 0 0 0-.667.522 3.024 3.024 0 0 0-.466.71 3.05 3.05 0 0 0-.244.822 5.404 5.404 0 0 0-.067.844v.3h-.011zm12.15 6.731v-1.677h3.81v-8.452h-3.443V58.88h5.298v10.107h3.443v1.677h-9.108zm4.554-13.783c-.2 0-.389-.023-.566-.078a1.153 1.153 0 0 1-.478-.278c-.133-.133-.233-.3-.289-.477s-.077-.367-.077-.567.022-.388.077-.566.145-.344.29-.478c.132-.133.299-.233.477-.289.177-.055.366-.088.566-.088s.389.033.567.088c.177.056.344.156.477.29.133.133.233.3.3.477s.089.366.089.566-.033.389-.089.567-.155.344-.3.477c-.133.134-.3.234-.477.278a1.888 1.888 0 0 1-.567.078zm12.484 13.961c-.322 0-.633-.023-.966-.067a4.724 4.724 0 0 1-.944-.244c-.3-.123-.578-.29-.833-.489s-.478-.444-.645-.71a2.753 2.753 0 0 1-.377-.89 4.123 4.123 0 0 1-.111-.977c0-.422.066-.833.2-1.233.133-.4.344-.755.633-1.055s.61-.544.988-.733a5.915 5.915 0 0 1 1.166-.455c.411-.111.822-.189 1.233-.222s.822-.056 1.233-.056h2.443v-.91c0-.245-.033-.49-.088-.722-.056-.245-.156-.456-.3-.656s-.311-.366-.511-.51a2.19 2.19 0 0 0-.644-.323 3.035 3.035 0 0 0-.7-.155 5.358 5.358 0 0 0-.722-.045c-.333 0-.666.023-.988.078a2.914 2.914 0 0 0-.933.322 1.89 1.89 0 0 0-.722.667c-.19.288-.278.6-.278.933h-1.877c0-.378.067-.745.189-1.111.133-.367.31-.689.544-.989.233-.288.511-.544.822-.755s.655-.377 1.01-.5a5.26 5.26 0 0 1 1.1-.244 9.687 9.687 0 0 1 2.344.011c.4.056.788.156 1.155.289.366.144.722.333 1.044.577s.6.534.822.867c.222.333.388.7.477 1.088s.134.789.134 1.2v7.863h-1.877v-2.043c-.167.366-.4.688-.69.988-.299.3-.621.533-.988.722a4.248 4.248 0 0 1-1.144.4c-.4.078-.8.11-1.21.11l.01-.021zm.7-1.655a4.99 4.99 0 0 0 1.599-.267c.255-.089.5-.222.722-.389s.422-.366.577-.588c.156-.222.267-.478.334-.744.055-.267.089-.545.089-.811v-1.022h-2.444c-.244 0-.489 0-.744.022s-.511.045-.744.1c-.245.056-.489.122-.722.19a2.564 2.564 0 0 0-.678.332c-.21.145-.377.333-.5.556s-.177.466-.177.7c0 .321.078.61.244.888.167.277.378.489.644.644.267.156.556.267.867.322.31.056.622.078.944.078l-.011-.011z"}))),SvgJulioGlatt05=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M179.572 61.676h60.179v65.132h-60.179zM114.135 1.192h65.132v60.179h-65.132zM305.984 29.06a3.818 3.818 0 0 0-.648-1.002 3.37 3.37 0 0 0-.934-.727 4.73 4.73 0 0 0-1.13-.413c-.393-.088-.786-.127-1.19-.127s-.795.039-1.188.127-.767.226-1.13.413-.668.433-.934.727a3.818 3.818 0 0 0-.648 1.003 4.782 4.782 0 0 0-.354 1.14 7.977 7.977 0 0 0-.098 1.189v.412h8.706v-.412c0-.403-.03-.796-.098-1.19a3.935 3.935 0 0 0-.354-1.14zM240.056 1.193v60.18h157.809V1.191H240.056zm79.214 17.973c.079-.255.206-.481.393-.668a1.74 1.74 0 0 1 .668-.413c.256-.088.521-.128.796-.128s.54.04.796.128c.256.089.472.226.668.413.187.187.325.413.413.668.089.256.128.52.128.796s-.04.54-.128.796a1.816 1.816 0 0 1-.413.668 1.493 1.493 0 0 1-.668.393c-.255.079-.52.108-.796.108s-.54-.039-.796-.108a1.65 1.65 0 0 1-.668-.393 1.493 1.493 0 0 1-.393-.668c-.079-.255-.108-.52-.108-.796s.04-.54.108-.796zm-29.136 1.052h-5.818v21.029h-2.604v-21.03h-5.818v-2.319h14.23v2.32h.01zM309.06 34.16h-11.34v.413c0 .402.03.805.098 1.208.059.403.177.786.354 1.14.167.364.393.698.678 1.003.285.304.6.55.953.727.354.177.727.304 1.13.383.403.079.806.108 1.209.108.462 0 .924-.03 1.366-.098a4.313 4.313 0 0 0 1.287-.383c.413-.187.767-.462 1.061-.826s.462-.776.511-1.238h2.634a5.005 5.005 0 0 1-.364 1.523 4.987 4.987 0 0 1-.805 1.317c-.334.393-.728.727-1.18 1.002s-.913.492-1.415.649a7.362 7.362 0 0 1-1.523.314c-.52.05-1.041.079-1.572.079-.61 0-1.238-.05-1.857-.157a6.49 6.49 0 0 1-1.779-.57c-.56-.276-1.071-.63-1.523-1.062s-.826-.933-1.11-1.493a6.315 6.315 0 0 1-.6-1.76 9.88 9.88 0 0 1-.177-1.876V31.39c0-.61.05-1.239.157-1.858a6.092 6.092 0 0 1 .59-1.759 5.853 5.853 0 0 1 1.11-1.493c.452-.442.954-.806 1.514-1.081s1.14-.462 1.759-.57c.629-.108 1.248-.157 1.857-.157s1.228.049 1.857.157a6.256 6.256 0 0 1 1.76.57c.55.275 1.05.639 1.513 1.08.452.443.825.944 1.11 1.494.285.55.481 1.14.59 1.76.108.628.157 1.247.157 1.857v2.761l-.01.01zm18.455 7.085H314.75v-2.349h5.336v-11.85h-4.825v-2.32h7.429v14.17h4.825v2.349zm19.408 0h-2.634v-2.86c-.236.511-.56.973-.973 1.386a5.578 5.578 0 0 1-1.385 1.012 5.861 5.861 0 0 1-1.602.56c-.56.108-1.13.157-1.7.157-.442 0-.894-.029-1.346-.098a5.121 5.121 0 0 1-1.317-.354c-.423-.167-.816-.393-1.18-.678s-.658-.619-.903-1.002a3.819 3.819 0 0 1-.521-1.238 5.768 5.768 0 0 1-.158-1.366c0-.59.099-1.17.285-1.73.187-.56.492-1.051.895-1.474.403-.422.864-.766 1.385-1.031s1.062-.482 1.641-.64a9.548 9.548 0 0 1 1.73-.314 20.62 20.62 0 0 1 1.73-.078h3.429V30.23c0-.334-.04-.678-.128-1.012a3.02 3.02 0 0 0-.413-.924 2.926 2.926 0 0 0-.717-.717 3.744 3.744 0 0 0-.904-.462 5.49 5.49 0 0 0-.983-.226 8.867 8.867 0 0 0-2.397.05 4.467 4.467 0 0 0-1.307.441 2.72 2.72 0 0 0-1.013.934 2.318 2.318 0 0 0-.393 1.307h-2.633c0-.53.088-1.052.265-1.553.177-.51.433-.973.767-1.385a4.975 4.975 0 0 1 1.16-1.062c.441-.294.913-.53 1.414-.697a8.177 8.177 0 0 1 1.543-.354c.53-.069 1.061-.098 1.592-.098.57 0 1.14.039 1.7.108.56.078 1.1.216 1.622.412a6.66 6.66 0 0 1 1.464.806c.452.344.845.737 1.16 1.209.314.462.54.973.667 1.523s.187 1.11.187 1.68v11.026l-.03.01zm-7.115-7.4a6.16 6.16 0 0 0-1.051.148c-.334.078-.678.167-1.013.265a3.425 3.425 0 0 0-.953.462c-.295.206-.53.462-.697.776a2.093 2.093 0 0 0-.256.983c0 .442.118.855.354 1.238s.53.688.904.904a3.32 3.32 0 0 0 1.209.442c.432.079.874.109 1.316.109.384 0 .767-.03 1.14-.099a6.139 6.139 0 0 0 1.11-.285c.364-.127.698-.304 1.013-.54s.59-.511.806-.826a2.89 2.89 0 0 0 .462-1.051c.088-.383.127-.767.127-1.14v-1.425h-3.43c-.343 0-.687.01-1.05.03l.01.01z","data-name":"Layer 1"})),SvgJulioGlatt06=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null","data-name":"Layer 1"},reactExports.createElement("path",{d:"M321.526 13.743v65.611h-50.341l-1.758 1.44-28.676 23.52L244.331 87l1.577-7.635h-55.434V13.743h131.052m6.354-6.353H184.12v78.318h53.995l-7.212 34.902 42.559-34.902h54.418V7.39z"}),reactExports.createElement("path",{d:"M226.583 58.197V38.512h-5.443V36.34h13.321v2.17h-5.442v19.686h-2.436zm19.124.233c-.572 0-1.154-.053-1.736-.148-.583-.096-1.144-.276-1.663-.54s-.995-.593-1.43-.996c-.423-.402-.773-.868-1.037-1.397s-.456-1.08-.561-1.652-.16-1.165-.16-1.758v-2.976c0-.572.054-1.154.149-1.736a5.623 5.623 0 0 1 .55-1.652 5.334 5.334 0 0 1 1.038-1.398c.424-.413.9-.752 1.409-1.006s1.07-.434 1.652-.54 1.164-.148 1.736-.148 1.154.053 1.737.148 1.133.275 1.652.54c.519.254.985.593 1.408 1.006.424.413.773.879 1.038 1.398.265.519.455 1.07.55 1.652.096.582.149 1.164.149 1.736v2.584h-10.621v.381c0 .381.032.752.085 1.133.063.381.169.73.328 1.07.159.339.37.646.635.932s.561.519.89.688c.328.17.677.286 1.059.36.37.074.751.106 1.133.106.434 0 .857-.032 1.28-.085.414-.063.816-.18 1.208-.36s.72-.434.995-.773c.276-.339.435-.72.477-1.154h2.467a5.033 5.033 0 0 1-.339 1.43 4.65 4.65 0 0 1-.762 1.238 4.631 4.631 0 0 1-1.101.932 6.02 6.02 0 0 1-1.324.614 7.297 7.297 0 0 1-1.43.297c-.487.053-.974.074-1.471.074h.01zm-4.13-9.075h8.154v-.392c0-.37-.032-.752-.085-1.112a4.294 4.294 0 0 0-.328-1.07 3.472 3.472 0 0 0-.614-.931 3.13 3.13 0 0 0-.879-.688 4.25 4.25 0 0 0-1.059-.392c-.37-.074-.741-.117-1.112-.117s-.752.043-1.112.117c-.37.085-.72.212-1.059.392a2.95 2.95 0 0 0-.878.688 3.948 3.948 0 0 0-.615.932c-.158.35-.264.71-.328 1.07s-.085.74-.085 1.111v.392zm15.937 8.842v-2.202h4.998V44.897h-4.521v-2.17h6.957v13.268h4.522v2.202h-11.956zm5.983-18.086c-.254 0-.508-.032-.741-.106-.233-.074-.445-.19-.625-.37s-.307-.393-.37-.626-.106-.487-.106-.74.031-.51.106-.742.19-.445.37-.625.381-.307.625-.381c.244-.085.487-.117.741-.117s.508.043.741.117.445.212.625.381c.18.18.307.392.381.625.085.233.117.487.117.741s-.042.508-.117.741a1.66 1.66 0 0 1-.38.625c-.18.18-.393.297-.626.37s-.487.107-.74.107zm16.382 18.319c-.413 0-.837-.032-1.26-.085a5.632 5.632 0 0 1-1.24-.328c-.391-.159-.762-.37-1.1-.635s-.615-.583-.848-.932a3.536 3.536 0 0 1-.487-1.165 5.658 5.658 0 0 1-.148-1.281c0-.55.085-1.091.265-1.62.18-.53.455-.985.836-1.388.37-.402.805-.72 1.292-.963a8.384 8.384 0 0 1 1.536-.593c.54-.149 1.07-.244 1.62-.297s1.09-.074 1.62-.074h3.208v-1.186a4.19 4.19 0 0 0-.116-.953 2.642 2.642 0 0 0-1.059-1.525 3.377 3.377 0 0 0-.847-.434 5.297 5.297 0 0 0-.921-.212 7.508 7.508 0 0 0-2.245.042c-.424.075-.837.212-1.218.414s-.71.497-.953.879a2.22 2.22 0 0 0-.37 1.217h-2.468c0-.497.085-.984.254-1.461a4.4 4.4 0 0 1 .71-1.292c.307-.381.667-.72 1.09-.995a5.715 5.715 0 0 1 1.324-.657 7.293 7.293 0 0 1 1.44-.328c.498-.064.996-.085 1.483-.085.54 0 1.07.032 1.588.106.53.064 1.027.201 1.514.381.487.19.943.445 1.366.763.424.317.784.699 1.08 1.133.297.434.509.91.625 1.43.117.518.18 1.037.18 1.577v10.325h-2.467v-2.68a4.34 4.34 0 0 1-.91 1.292 4.91 4.91 0 0 1-1.293.953 5.388 5.388 0 0 1-1.503.52 8.958 8.958 0 0 1-1.589.148l.01-.011zm.921-2.17c.36 0 .71-.033 1.07-.085.36-.064.71-.149 1.037-.265.34-.117.657-.286.953-.508s.551-.477.763-.774.35-.624.434-.984c.074-.36.116-.71.116-1.07V51.24h-3.208c-.318 0-.646 0-.985.032s-.667.063-.985.137-.635.16-.953.254a3.153 3.153 0 0 0-.89.435c-.275.19-.497.434-.656.73a1.92 1.92 0 0 0-.233.922c0 .413.106.804.329 1.164.222.36.497.636.847.848.35.211.72.349 1.133.413.402.074.815.105 1.239.105l-.01-.02z"}))),SvgLukaPiskore01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M52.05 14.024h22.555v12.663H52.05zm32.304 0h46.621v12.663H84.354zm93.854 0h73.781v12.663h-73.781zm0 87.307h73.781v12.663h-73.781zm0-43.672h73.781v12.663h-73.781z"}),reactExports.createElement("path",{strokeWidth:.36,d:"M97.043 13.997v99.97H84.38v-99.97zm227.676.035v99.97h-12.663v-99.97z"}),reactExports.createElement("path",{d:"m404.551 20.643-35.361 93.171.503.179h12.987l28.67-75.507zm17.447-6.619h-13.562l37.952 99.969h13.562z"}))),SvgLululi02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M105.027 33.423H36.524c-3.834 0-6.99-3.115-6.99-6.99s3.156-6.99 6.99-6.99h68.503c3.875 0 6.99 3.156 6.99 6.99s-3.115 6.99-6.99 6.99zm120.829 0h-63.75c-3.874 0-6.99-3.155-6.99-6.99s3.156-6.99 6.99-6.99h63.75c3.875 0 6.99 3.156 6.99 6.99s-3.115 6.99-6.99 6.99zm0 75.134h-63.75c-3.874 0-6.99-3.156-6.99-6.99s3.156-6.99 6.99-6.99h63.75c3.875 0 6.99 3.155 6.99 6.99s-3.115 6.99-6.99 6.99zm0-37.547h-63.75c-3.874 0-6.99-3.155-6.99-6.99s3.156-6.99 6.99-6.99h63.75c3.875 0 6.99 3.155 6.99 6.99s-3.115 6.99-6.99 6.99z"}),reactExports.createElement("path",{d:"M70.796 108.557c-3.875 0-6.99-3.156-6.99-6.99V26.433c0-3.874 3.155-6.99 6.99-6.99s6.99 3.156 6.99 6.99v75.134a6.972 6.972 0 0 1-6.99 6.99zm247.09-3.315c-3.874 0-6.99-3.156-6.99-6.99V29.788c0-3.874 3.155-6.99 6.99-6.99 3.875 0 6.99 3.156 6.99 6.99v68.464c.04 3.834-3.115 6.99-6.99 6.99zm157.577 3.315h-68.862a6.951 6.951 0 0 1-5.952-3.315 6.975 6.975 0 0 1-.32-6.79l34.432-69.462a6.96 6.96 0 0 1 6.27-3.875c2.677 0 5.114 1.518 6.272 3.875l34.431 69.461a6.97 6.97 0 0 1-.32 6.79 7.001 7.001 0 0 1-5.95 3.316zm-57.598-13.98h46.254l-23.127-46.654-23.127 46.654z"}),reactExports.createElement("path",{d:"M338.377 108.557h-40.942c-3.874 0-6.99-3.156-6.99-6.99 0-3.875 3.155-6.99 6.99-6.99h40.982c3.875 0 6.99 3.155 6.99 6.99 0 3.874-3.155 6.99-7.03 6.99zm0-71.778h-40.942c-3.874 0-6.99-3.156-6.99-6.99 0-3.875 3.155-6.99 6.99-6.99h40.982c3.875 0 6.99 3.155 6.99 6.99 0 3.834-3.155 6.99-7.03 6.99z"}))),SvgMaes01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M289.2995 85.096c10.8352-6.7622 19.7724-11.4285 25.8227-22.2638 14.9875-26.8905 40.2567-39.8612 70.5085-43.8552 3.5985-.4746 7.988-1.3841 9.4116 4.2708.7514 2.9263 4.1127 1.7795 6.3668 2.254 20.0096 3.9941 29.7772 16.3716 27.6813 36.5395-.7118 6.7622 3.6777 5.0617 6.6831 5.1013 6.169.079 9.9258 1.74 9.4908 8.779-.2768 4.6662-1.74 7.4343-6.8808 7.4343-4.2709 0-8.5022.1187-12.773.2373-7.3949.1977-13.287 7.7508-12.259 15.6598.7119 5.5758-7.197 12.4566-11.7052 9.372-4.3104-2.9658-6.4458-.8699-9.5303.87-21.8287 12.338-44.053 14.7503-66.7912 2.4123-5.734-3.0845-10.9144-7.0785-13.3266-13.1289-2.1354-5.3385-4.6268-5.4176-8.5417-2.3727-4.943 3.8359-11.468 5.8527-14.2361 12.2194-1.1864 2.689-3.7172 2.689-6.2086 2.8077-31.3195 1.5027-62.5994 3.915-93.9585 3.7567-12.6148-.0395-14.3943-1.5027-13.4848-14.2757.87-12.6543.5932-25.2691 1.0677-37.8839.1978-5.5758-1.6608-7.2367-7.2762-7.0785a863.8271 863.8271 0 0 1-42.9457 0c-5.5758-.1582-7.3553 1.4631-7.3158 7.0785.0791 14.1175-.6722 28.2746-.7909 42.4316-.0395 5.5363-2.0168 8.2253-7.988 8.344-5.9713.1186-8.0276-2.4518-8.265-8.0276-.593-14.157-.3558-28.2746.5537-42.3921.3164-5.1408-.7909-7.553-6.8808-7.3949-7.553.1582-15.1456-1.305-22.7383-1.6609-5.5362-.2372-6.2876-3.4799-6.2876-7.8694s.9095-7.4344 6.248-8.1462c7.9882-1.0282 15.7785 1.1468 23.6874 1.0282 46.8211-.6328 93.7213 1.2654 140.5028-2.4518 6.604-.5141 12.4962-.0791 11.7053 9.0953-.356 4.3104-1.8982 6.3667-6.525 6.8808-13.9197 1.5027-27.8 3.8358-41.7988 3.0845-9.0162-.4745-6.5644 5.299-7.0785 9.9653-.6327 6.0899 2.7681 5.813 7.3158 5.4572 6.6435-.4746 13.4057.0395 20.0888-.2768 5.734-.2768 7.3948 2.7681 7.7507 7.6717.3955 5.0617-1.305 7.7508-6.8017 8.5021-7.3158 1.0282-14.592.9886-21.8683.6327-4.5476-.2372-6.5249 1.1864-6.8412 5.9318-.3955 5.8526 3.5986 4.5476 6.604 4.4685 22.501-.7513 45.002-1.819 67.5425-2.4122 4.7059-.1186 4.3104-2.5309 4.6268-5.6945 1.6213-15.3038.6723-30.6472.5536-45.9906-.0395-5.6945 1.0677-9.8071 7.474-9.8862 6.4853-.1186 9.9257 2.7286 9.649 9.9653-.5537 13.0893-.2373 26.2182-.2373 40.8102zm66.3166 28.2745c11.0726-.435 20.8006-2.8077 29.54-7.988 3.4404-2.0169 10.163-2.5705 7.553-9.0954-2.4517-6.0899-4.0335-13.287-13.6033-13.0893-16.9648.3559-33.9295.6327-50.9338-.87-4.7454-.3955-9.4907 3.4008-11.8634 7.3553-1.819 3.0845 1.6213 6.7622 3.9545 9.3721 9.6093 10.7167 22.5405 13.5244 35.353 14.3153zm25.8624-80.276c6.6435 4.864 1.305 10.3607 1.74 15.3038.5931 6.5645 5.2594 15.0666 11.7447 17.1625 7.6717 2.4518 16.767.7118 25.2296.435.7119-.0396 1.7005-2.3332 1.9773-3.6777 1.1863-6.6435 1.0677-13.0102-3.124-18.942-6.9204-9.807-23.1733-14.592-37.5676-10.2816zm-60.029 32.0708c16.6483-10.677 31.2403-20.0492 45.8324-29.4213-18.863 2.8077-34.9577 9.8467-45.8325 29.4213zm31.2403 1.1073h19.021c-3.7171-10.1235-8.423-10.163-19.021 0z"}),reactExports.createElement("path",{d:"M280.2832 28.3491c-4.6267-2.2145-11.6657-2.4913-10.163-10.163 1.0677-5.4177 2.254-11.7844 10.9144-9.8862 5.5758 1.2259 10.5585 3.2822 9.4907 9.649-.8304 5.0221-2.5308 10.9143-10.242 10.4002z"}))),SvgMaliciousSheep01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M301.113 11.5507h-90.2643c-.5378 0-.9987-.461-.9987-.9987s.461-.9986 1.037-.9986h90.2643c.5378 0 .9987.4609.9987.9986s-.461.9987-1.037.9987zm-25.274 16.9006h-39.5627c-.5377 0-.9987-.461-.9987-.9987 0-.5378.461-.9987.9987-.9987h39.601c.5378 0 .9987.461.9987.9987 0 .5377-.461.9987-1.037.9987zm0 16.8237h-39.5627c-.5377 0-.9987-.461-.9987-.9987 0-.5377.461-.9987.9987-.9987h39.601c.5378 0 .9987.461.9987.9987 0 .5377-.461.9987-1.037.9987zm0 16.8237h-39.5627c-.5377 0-.9987-.461-.9987-.9987 0-.5377.461-.9987.9987-.9987h39.601c.5378 0 .9987.461.9987.9987 0 .5378-.461.9987-1.037.9987zm-1.4212 37.9878h-36.7203c-.5378 0-.9987-.461-.9987-.9987s.461-.9987.9987-.9987h36.7203c.5377 0 .9986.461.9986.9987s-.4225.9987-.9986.9987z"}),reactExports.createElement("path",{d:"M256.0576 100.0865c-.5377 0-.9986-.461-.9986-.9987v-88.459c0-.5377.4609-.9986.9986-.9986s.9987.4609.9987.9986v88.459c0 .5762-.4225.9987-.9987.9987z"}),reactExports.createElement("path",{d:"M290.0123 118.4466c-.2688 0-.5761-.1152-.7682-.3457l-33.9547-39.9467c-.3457-.4225-.3073-1.037.1152-1.4212.4225-.3457 1.0371-.3073 1.4212.1153l33.9547 39.9467c.3457.4225.3073 1.037-.1152 1.4212a1.043 1.043 0 0 1-.653.2304z"}),reactExports.createElement("path",{d:"M222.1413 118.4466a1.043 1.043 0 0 1-.653-.2304c-.4225-.3457-.4609-.9987-.1152-1.4212l33.9547-39.9467c.3457-.4225.9987-.461 1.4212-.1153s.461.9987.1152 1.4212l-33.9547 39.9467c-.2304.2305-.4993.3457-.7682.3457z"}))),SvgMarkKnol01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M246.2306 24.7784h-97.9813v19.6212h19.5797v78.4016h19.6211V44.3996h19.5797v78.4016h39.2008v-19.6211H226.651V83.6004h19.5796V63.9792H226.651V44.3996h39.2008V24.7784zm19.6212 39.2008v58.822h19.5796V44.3996h-19.5796zm9.7483-39.2008h.083c5.3927 0 9.7483-4.3556 9.7483-9.7483v-.083c0-5.3927-4.3556-9.7483-9.7483-9.7483h-.083c-5.3927 0-9.7483 4.3556-9.7483 9.7483v.083c0 5.3927 4.3556 9.7483 9.7483 9.7483zm68.7363 0h-58.905v19.5797h19.5797v78.4017h19.5797V83.6003h19.5797v39.1594H363.75V44.3166c.083-10.7854-8.6698-19.5382-19.4137-19.5382zm-.1245 39.2009h-19.5796V44.3996h19.5796v19.5797z"})),SvgMarquesa01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M114.55 56.1406h15.7188v15.7188H114.55zm15.7188 47.1564h15.7188v15.7188h-15.7188zm0-62.8752h15.7188v15.7188h-15.7188zm15.7189 62.8752h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7189h15.7188v15.7188h-15.7188zm15.7188 78.5941h15.7188v15.7188h-15.7188zm0-62.8752h15.7188v15.7188h-15.7188zm15.7188 15.7188h15.7188v15.7188h-15.7188zm15.68 47.1564h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188z"}),reactExports.createElement("path",{d:"M193.1053 56.1406h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm15.7188 62.8752h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm0-15.7189h15.7188v15.7188h-15.7188zm15.7188 78.5941h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm15.7189 15.7188h15.7188v15.7188h-15.7188zm15.7188 47.1564h15.7188v15.7188h-15.7188zm0-62.8752h15.7188v15.7188h-15.7188zm15.7188 62.8752h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-31.4377h15.7188v15.7188h-15.7188zm15.7189 94.3129h15.7188v15.7188h-15.7188zm0-62.8752h15.7188v15.7188h-15.7188zm15.7188 15.7188h15.7188v15.7188h-15.7188zm15.7188 47.1564h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm15.7188 31.4376h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm0-15.7189h15.7188v15.7188h-15.7188zm15.7188 78.5941h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm15.7189 62.8752h15.7188v15.7188h-15.7188zm0-47.1564h15.7188v15.7188h-15.7188zm15.7188-15.7188H397.45v15.7188h-15.7188z"}))),SvgMarquesa02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M141.1043 5.4565H24.1v58.5848h58.5021v58.5022h58.5849V5.5392h-.0827v-.0827zm16.9925.0827v117.0043h117.1696v-20.6308c-2.77 5.3334-8.3515 8.9717-14.7599 8.9717-9.1784 0-16.6204-7.442-16.6204-16.6204s7.442-16.6204 16.6204-16.6204c6.4084 0 11.9899 3.6383 14.76 8.9717V55.4831c-4.1345 10.9149-14.6773 18.6462-27.0392 18.6462-15.959 0-28.8997-12.9407-28.8997-28.8996s12.9408-28.8996 28.8997-28.8996c12.362 0 22.9047 7.7313 27.0391 18.6462V5.5393H158.0967l.0001-.0001zm134.7823 0h58.5848v117.0043h-58.5848V5.5392zm129.6556 0-65.3653 117.0043H487.9L422.5347 5.5392zm0 109.893c-16.7858 0-30.388-13.6022-30.388-30.388s13.6022-30.388 30.388-30.388 30.388 13.6022 30.388 30.388-13.5609 30.388-30.388 30.388z"})),SvgMerchantCoppola01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M82.8133 119.9192h23.1495v5.6462H82.8133zm0-11.6833h23.1495v5.6462H82.8133zm0-41.2608h23.1495v5.6462H82.8133zm0-11.6399h23.1495v5.6462H82.8133zm0-41.2607h23.1495v5.6462H82.8133zm0-11.6399h23.1495v5.6462H82.8133zM52.15 14.0745h23.1495v5.6462H52.15zm0-11.6399h23.1495v5.6462H52.15zm61.3266 11.6399h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm98.3309 11.6399h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm30.6633 11.6399h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0 117.4846h23.1495v5.6462h-23.1495zm0-11.6833h23.1495v5.6462h-23.1495zm-61.3266 11.6833h23.1495v5.6462h-23.1495zm0-11.6833h23.1495v5.6462h-23.1495zm0-41.2608h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0-41.2607h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm128.4297 117.4846h23.1495v5.6462h-23.1495zm0-11.6833h23.1495v5.6462h-23.1495zm0-41.2608h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0-41.2607h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm96.4633 64.5405h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0-41.2607h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zM211.8075 66.9751h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0 64.584h23.1495v5.6462h-23.1495zm0-11.6833h23.1495v5.6462h-23.1495zm224.893 11.6833H459.85v5.6462h-23.1495zm0-11.6833H459.85v5.6462h-23.1495zm-61.3265 11.6833h23.1495v5.6462H375.374zm0-11.6833h23.1495v5.6462H375.374zm61.3265-41.2608H459.85v5.6462h-23.1495zm0-11.6399H459.85v5.6462h-23.1495zM375.374 66.9751h23.1495v5.6462H375.374zm0-11.6399h23.1495v5.6462H375.374z"})),SvgMerchantCoppola02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M207.7674 11.8539c.4564-.2662.6085-.8366.3423-1.293-.2662-.4563-.8366-.6084-1.293-.3422L81.5926 83.3834c-.4563.2662-.6084.8366-.3422 1.293.1901.3042.4943.4563.7985.4563.1521 0 .3043-.038.4564-.1141l80.618-47.078-25.06 78.7548c-.1521.4944.114 1.0268.6085 1.1789.076.038.19.038.2661.038.3803 0 .7606-.2662.8747-.6465l25.6685-80.7322 42.2864-24.6797z"}),reactExports.createElement("path",{d:"M310.8978 16.7974c-.4183-.3042-.9888-.1901-1.293.2282l-57.8397 84.2307-39.9667-6.7309-9.545-23.501 54.3032-8.1378c.4944-.076.8746-.5704.7986-1.0647-.076-.4944-.5704-.8747-1.0648-.7986l-54.7594 8.2139-15.8955-39.1682 87.8053-11.5984c.4943-.076.8746-.5324.7986-1.0648-.076-.4943-.5324-.8746-1.0648-.7985l-90.163 11.9025 26.6192 65.6353-27.3797-4.6013c-.4944-.076-.9888.2662-1.0648.7606-.076.4943.2662.9887.7605 1.0647l28.4826 4.7915 7.6435 18.8616c.152.3802.4943.5704.8746.5704.114 0 .2282-.038.3423-.076.4943-.1902.7225-.7226.5323-1.217l-7.2252-17.7968 37.9894 6.3886-6.6548 9.697c-.3042.4183-.1901.9887.2282 1.293.152.114.3422.152.5323.152.3043 0 .6085-.152.7606-.4182l7.1491-10.3815 56.5088 9.5068h.152c.4564 0 .8367-.3042.9127-.7605.076-.4944-.2662-.9887-.7605-1.0648l-55.6721-9.3928 57.4213-83.432c.2662-.4184.1522-1.0268-.2661-1.293zM430.57 111.2195l-41.4879-38.2556 39.4344-13.0814c.4944-.1521.7606-.6845.6085-1.1789-.1521-.4943-.6845-.7605-1.1789-.6084L387.523 71.5189l-59.1707-54.5314v96.2094c0 .5324.4183.9507.9507.9507s.9507-.4183.9507-.9507v-20.687l56.813-18.8615 42.2484 38.978c.3803.3423.9887.3423 1.331-.038.3422-.4182.3042-1.0267-.076-1.369zm-100.3543-20.725V21.2466l55.2538 50.9567-55.2538 18.2912z"}))),SvgMightymoss01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M188.0409 9.6174h81.9575v23.7013h-81.9575zm0 42.4936h81.9575v23.7013h-81.9575zm0 42.4936h81.9575v23.7013h-81.9575zm-77.432-84.9872H81.5v23.7013h29.1089v85.0256h23.7397V33.3187h29.1089V9.6174h-29.1089zm189.227 0h23.7013v108.7269h-23.7013zm122.3034 0h-59.2916c-4.6406 0-8.3607 3.7584-8.3607 8.3606v100.4047h23.7014V89.5421h28.6103v28.8405H430.5V17.978c0-4.6022-3.7201-8.3606-8.3607-8.3606zm-43.951 57.911V31.6312h28.6104v35.8972h-28.6103z"})),SvgMiusoph01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M137.75 8.4509h29.6654v6.9363H137.75zm121.2871 0h26.9222v6.9363h-26.9222zm30.214 0h29.6262v6.9363h-29.6262zm35.7395 0h46.0068v6.9363h-46.0068zm0 52.0418h46.0068v6.9363h-46.0068zm-65.9535 52.0417h26.9222v6.9363h-26.9222zm30.214 0h29.6262v6.9363h-29.6262zM170.7072 8.4509h33.4274v6.9363h-33.4274zm39.2664 0h43.1853v6.9363h-43.1853zm0 52.0418h43.1853v6.9363h-43.1853zm0 52.0417h43.1853v6.9363h-43.1853zm-42.5583-97.1472h3.2526v104.1619h-3.2526zm118.5831 0h3.2526v97.1472h-3.2526zm35.7004.0392h3.2526v104.0835h-3.2526zm49.2986 0h3.2526v104.0835h-3.2526zm-164.2764-.0392h3.2526v97.1472h-3.2526z"})),SvgMiusoph02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M201.35 20.5131v7.2376h3.8028V13.2755H201.35zm23.6346 14.5161h-3.7619v7.2376h3.7619v7.2376h-3.7619v7.2376h3.7619v7.2375h-3.7619v7.2377h3.7619v7.2785h-3.7619v7.2375h3.7619v7.2377h-3.7619v7.2376h3.7619v7.2375h-3.7619v7.2377h3.7619v7.2784h3.8029v-7.2784h3.8028v-7.2377h-3.8028v-7.2375h3.8028v-7.2376h-3.8028v-7.2377h3.8028v-7.2375h-3.8028v-7.2785h3.8028v-7.2377h-3.8028V56.742h3.8028v-7.2376h-3.8028v-7.2376h3.8028v-7.2376h-3.8028v-7.2785h-3.8029zm21.3039 36.188v-7.2377h-3.8028V49.5044h-3.7619v14.4751h-3.8028v7.2377h3.8028v7.2785h3.7619v-7.2785zm-3.8028 7.2785v7.2375h7.6056v-7.2375h-3.8028zm17.0104-7.2785h-3.7619v7.2785h7.5648v-7.2785zm11.4084 7.2785h3.762v-7.2785h-7.5648v7.2785zm-3.8028-21.3039v6.7877h-3.8027v-6.7877h-7.5648v7.2375h7.5648v6.7879h3.8027v-6.7879h7.5648v-7.2375h-3.762zm-7.6056-29.4411h-3.7619v7.2785h7.5648v-7.2785zm11.4084 7.2785h3.762v-7.2785h-7.5648v7.2785zm-11.4084-21.7537h-3.7619v7.2376h7.5648v-7.2376zm7.6056 0v7.2376h7.5648v-7.2376h-3.762zm43.4257 14.4752V20.513h-3.8029v-7.2376h-3.8028V6.0379h-3.8028v7.2376h-3.8028V6.0379h-3.8028v7.2376h-3.8028V6.0379h-3.8028v7.2376h-3.8028v7.2376h-3.6802v7.2376h3.8028v7.2376h-3.8028v7.2376h3.8028v7.2376h-3.8028v7.2785h3.8028v7.2376h-3.8028v7.2376h3.8028v7.2376h-3.8028v7.2376h3.8028V92.93h-3.8028v7.2376h3.8028v7.9327h-3.8028v7.2376h3.8028v6.5834h7.6057v-7.2377h-3.8029v-6.5833h3.8029v-7.2376h-3.8029V78.4956h3.8029v7.2377h3.8028v-7.2377h3.8028v7.2377h3.8028v-7.2377h3.8028v21.7129h-3.8028v7.2375h3.8028v7.2377h-3.8028v7.2375h7.6056v-7.2375h3.8028v-7.2377h-3.8028v-7.2375h3.8028v-7.2377h-3.8028v-7.2375h3.8028v-7.2377h-3.8028v-7.2375h3.8028v-7.2377h-3.8028V56.742h3.8028v-7.2376h-3.8028v-7.2376h3.8028v-7.2376h-3.8028v-7.2785h3.6802zm-7.5648 7.2785h-3.8028v7.2376h3.8028v7.2376h-3.8028v7.2376h3.8028v14.4752h-3.8028v-7.2376h-3.8028v7.2376h-3.8028v-7.2376h-3.8028v7.2376h-3.8028V56.742h3.8028v-7.2376h-3.8028v-7.2376h3.8028v-7.2376h-3.8028V20.513h3.8028v7.2376h3.8028V20.513h3.8028v7.2376h3.8028V20.513h3.8028v14.5161zm-43.4665 50.704h-3.7619v7.2377h7.5648v-7.2377zm11.4084 7.2377h3.762v-7.2377h-7.5648v7.2377zm-11.4084 7.2376h-3.7619v7.2375h7.5648v-7.2375zm11.4084 7.2375h3.762v-7.2375h-7.5648v7.2375zm-24.616 14.5161h3.8028v-7.2784h-7.6056v7.2784zm6.1336-101.449v-7.2376h-3.8028v14.4752h3.8028zm-3.8028 14.5161h3.8028v7.2376h-3.8028z"}),reactExports.createElement("path",{d:"M242.4857 42.2668h6.1336v7.2376h-6.1336zm6.1336 7.2376h3.8028v7.2376h-3.8028zm1.4721 21.7128h3.8028v7.2376h-3.8028zm0 14.516h3.8028v7.2376h-3.8028zm-11.3676 7.2377v7.2376h-3.8028v7.2375h3.8028v7.2377h3.7619v-7.2377h3.8028v-7.2375h-3.8028V85.7332h-3.7619zm11.3676 14.4751h3.8028v7.2376h-3.8028zm-14.6797-86.9329v7.2376h3.8028V13.2755h2.8215v14.4752h3.7619V13.2755h2.6987V6.0379h-19.7091v7.2376h-3.8029V6.0379h-19.7091v7.2376h2.6988v14.4752h3.8027V13.2755h2.8215v14.4752h3.7619V13.2755h2.8623v14.4752h3.7619v-7.2376h3.8029v7.2376h3.8028V13.2755h2.8214zm27.8872-14.4752h3.8028v7.2376h-3.8028zm0 14.4752h3.8028v7.2376h-3.8028zm0 14.5161h3.8028v7.2376h-3.8028zm0 14.4752h3.8028v7.2376h-3.8028zm0 28.9912h3.8028v7.2376h-3.8028zm0 14.4752h3.8028v7.2376h-3.8028zm.0001 21.3039h-7.5648v7.2376h7.5648v-6.8286h3.8027v6.8286h7.5648v-7.2376h-7.5648v-6.8287h-3.8027z"}))),SvgQizzio01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M55.075 55.2705h94.0255V66.399H55.075z"}),reactExports.createElement("path",{strokeWidth:.3544,d:"M107.65 55.2698v52.5947H96.5215V55.2698zm124.3123-31.9277v89.2055h-7.3009V23.3421z"}),reactExports.createElement("path",{d:"M149.1005 55.4832h7.9742c0 3.0125 3.296 7.3009 6.8756 7.3009 3.5796 0 6.8756-2.41 6.8756-5.4226 0-2.658-2.3745-4.9263-5.5997-5.3161l-3.7922-.071v-7.159l3.7922-.071c3.1897-.3543 5.5997-2.658 5.5997-5.387 0-2.977-3.296-5.387-6.8756-5.387-3.5795 0-6.8756 4.6428-6.8756 7.6198h-7.9742c0-6.911 6.4148-14.8498 14.8498-14.8498 8.3642 0 15.5942 5.6706 15.5942 12.5816 0 3.5087-1.7012 6.7338-4.5365 9.002 2.8353 2.2683 4.5365 5.4935 4.5365 8.9667 0 6.982-7.23 12.5816-15.5942 12.5816-8.435.0709-14.8498-7.4072-14.8498-14.3891zm124.3277 53.6225c-.319 0-.638-.1063-.886-.3544-.4962-.4962-.4962-1.2759 0-1.772l91.1193-91.1548c.4962-.4962 1.2759-.4962 1.772 0 .4963.4961.4963 1.2758 0 1.772l-91.1192 91.1548c-.2481.248-.5671.3544-.886.3544z"}),reactExports.createElement("path",{d:"M455.6669 109.1057c-.319 0-.638-.1063-.886-.3544L363.6615 17.632c-.4962-.4962-.4962-1.276 0-1.7721.4962-.4962 1.2759-.4962 1.772 0l91.1194 91.1193c.4962.4962.4962 1.276 0 1.772-.248.2482-.567.3545-.886.3545z"}))),SvgRkhairunnas01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M145.8704 8.9204h-83.892C47.4848 8.9204 35.75 20.655 35.75 35.1488V46.767h83.892c14.4936 0 26.2284-11.7348 26.2284-26.2284V8.9204z"}),reactExports.createElement("path",{d:"M109.6947 92.8512v-46.123H98.0765c-14.4937 0-26.2285 11.7347-26.2285 26.2283v46.1231h11.6183c14.4936 0 26.2284-11.7347 26.2284-26.2284zM247.1703 8.9204h-83.9308v11.6182c0 14.4936 11.7347 26.2284 26.2284 26.2284h83.892V35.1488c0-14.4937-11.7348-26.2284-26.1895-26.2284zm100.0565 83.892V8.9204h-11.6182c-14.4547 0-26.1895 11.7347-26.1895 26.2284v83.892h11.6182c14.4547 0 26.1895-11.7348 26.1895-26.2284zm71.9242 0V8.9204h-11.6183c-14.4936 0-26.2284 11.7347-26.2284 26.2284v83.892h11.6571c14.4548 0 26.1895-11.7348 26.1895-26.2284zm55.099 26.2284v-83.892c0-14.4937-11.7348-26.2284-26.2284-26.2284h-11.6182v83.892c0 14.4936 11.7348 26.2284 26.2284 26.2284H474.25zM273.3599 81.233h-83.892c-14.4937 0-26.2285 11.7348-26.2285 26.2284v11.6182h83.892c14.4937 0 26.2285-11.7347 26.2285-26.2284V81.233z"}))),SvgSantiagoItzcoatl03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M63.39 57.1554h82.6357V39.1163H66.3098L159.265 8.7579V25.397h82.4357l21.9989 31.2384c.12.2.36.28.56.28v.24h63.0367v-.24c.16 0 .32-.04.44-.16l38.198-31.3984v.04H448.57V7.358H159.625c-.12-.04-.2-.04-.32 0h-.04L63.83 38.4763c-.28.08-.48.36-.48.64v18.039h.04zM365.9743 8.9179V23.637l-38.638 31.7584V40.6762c.16 0 .32-.04.44-.16l38.198-31.5983zm-1.92-.2-36.718 30.4384v-.04h-62.8367l-21.279-30.3984h120.8338zM263.7397 40.3962c.12.2.36.28.56.28v14.3593l-21.839-30.9585c-.12-.2-.36-.28-.56-.28V9.1979l21.8389 31.1983z"}),reactExports.createElement("path",{d:"M159.265 27.8769h18.0791v8.7596H159.265zm206.7093 0h18.0791v8.7596h-18.0791zm64.5566 0H448.61v8.7596h-18.0791zm-125.6734 72.2762V59.6352h-18.0791v38.638l-21.6389-30.2784c-.16-.2-.4-.32-.64-.28h-17.3589c-.36 0-.68.32-.68.68v1.2399l-21.159-29.9984c-.1199-.2-.3599-.28-.5599-.28v-.24H159.265v18.079h65.4766V41.1962l21.7189 30.7984v.76c0 .3599.32.6799.68.6799h17.279c.36 0 .68-.32.68-.68v-2.4798l21.159 29.5984c.1199.2.3599.28.5599.28h18.039zm-41.118-28.1185h-15.879v-2.9599h15.879v2.9599z"}),reactExports.createElement("path",{d:"M384.0134 87.7138V59.6352h-18.0791c-.12 0-.24.04-.36.12l-39.358 30.0385-.04.04-.04.04-.04.04-.04.04s-.04.04-.04.08c0 0 0 .04-.04.04 0 .04 0 .04-.04.08v12.4793h-61.4368l-21.9988-31.2384c-.12-.2-.36-.28-.56-.28v-.24H159.265v17.8391c-.08.2-.04.48.12.64l25.1587 29.9584h-70.8363v-58.237h45.5576v7.3197h18.079v-8.7596h-18.079v.08h-45.5576v-.08h-18.079v61.0369h249.3469c.16 0 .32-.04.44-.16l38.438-31.5984h.2v-.16c.28-.24.32-.68.08-.96-.04-.04-.08-.08-.12-.08zm-120.2738 16.1991c.12.2.36.28.56.28v14.5993l-22.3989-31.7584V72.9145l21.8389 30.9984zm-77.396 15.3992c0-.04-.04-.04-.04-.08L160.825 88.9137h80.7158l21.439 30.3984h-76.636zm140.9927-16.6791V90.7136l38.638-29.4785v26.3187c-.16 0-.32.04-.44.16l-38.198 31.3983V102.633zm17.3991 16.6791h-15.4792l36.958-30.3984h15.4793l-36.9581 30.3984zM448.61 87.9938V58.9953h-18.079v.6h-.04l-39.038 32.1183c-.16.12-.24.32-.24.52v27.7985c0 .08 0 .12.04.16v.04c0 .04.04.08.04.12v.04l.12.12s.04 0 .04.04c.04.04.08.04.12.08h.04c.04 0 .08.04.12.04h18.279c.16 0 .32-.04.44-.16l37.958-31.8384c.2-.16.24-.44.2-.68zm-55.997 4.5597 37.918-31.1984v25.8787l-37.918 31.3584V92.5535zm17.119 26.7586h-15.9192l37.5981-31.0784h15.3592l-37.038 31.0784z"}),reactExports.createElement("path",{d:"M325.9764 86.4338v.04c0 .04 0 .04.04.08 0 .04 0 .04.04.04l.04.04c0 .04.04.04.04.08l.04.04.08.08.04.04c.04 0 .04.04.08.04 0 0 .04 0 .04.04.04 0 .08.04.12.04h.2c.08 0 .12 0 .2-.04h.04c.08-.04.12-.04.16-.08l38.918-29.7184H448.65v-18.039h-82.5957c-.16 0-.36.04-.52.16l-39.318 33.1982c-.16.12-.24.32-.24.52v13.4393zm39.9979-45.7576v14.7992c-.04.04-.08.04-.12.08l-38.478 29.3985V73.2745l38.598-32.5983z"}))),SvgSantiagoItzcoatl04=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M376.0022 48.8862c-.7688 0-1.3978-.629-1.3978-1.3979v-.0349c0-.7688.629-1.3978 1.3978-1.3978.7688 0 1.3978.629 1.3978 1.3978v.035c0 .7687-.629 1.3978-1.3978 1.3978zm0 33.0582c-.7688 0-1.3978-.629-1.3978-1.3978v-.0699c0-.7688.629-1.3629 1.3978-1.3629.7688 0 1.3978.629 1.3978 1.3979v.035c0 .7687-.629 1.3977-1.3978 1.3977zM261.731 113.535h-46.7218c-17.7173 0-32.2196-14.048-32.9884-31.5906h-46.023c-.7688 0-1.3978-.629-1.3978-1.3978V47.4534c0-.7688.629-1.3978 1.3978-1.3978h46.023c.7688-17.5426 15.271-31.5906 32.9884-31.5906h46.7218c.7688 0 1.3978.629 1.3978 1.3978 0 .7688-.629 1.3978-1.3978 1.3978-16.1797 0-29.4589 12.79-30.1927 28.795h45.324c.7688 0 1.3979.629 1.3979 1.3978v33.1281c0 .7688-.629 1.3978-1.3979 1.3978h-45.324c.7688 16.005 14.013 28.795 30.1927 28.795.7688 0 1.3978.629 1.3978 1.3978s-.629 1.3629-1.3978 1.3629zM137.3956 79.1488h45.988c.7688 0 1.3979.629 1.3979 1.3978.035 16.634 13.5937 30.1927 30.2276 30.1927h33.4776c-11.6018-5.102-19.744-16.7038-19.779-30.1927 0-.3844.1398-.7339.4193-.9785.2447-.2446.629-.4193.9785-.4193h45.359V48.8163h-45.359c-.3844 0-.7338-.1398-.9785-.4194-.2446-.2446-.4193-.629-.4193-.9785.035-13.4539 8.1772-25.0557 19.779-30.1578h-33.4776c-16.634 0-30.2276 13.5588-30.2276 30.1928 0 .7688-.629 1.3978-1.3979 1.3978h-45.988v30.2976z"}),reactExports.createElement("path",{d:"M308.4878 113.535H261.731c-18.1715 0-32.9883-14.7819-33.0233-32.9534 0-.3845.1398-.7339.4194-.9785.2446-.2446.629-.4194.9784-.4194h46.7219c.7688 0 1.3978.629 1.3978 1.3978 0 10.938 5.9757 21.072 15.5856 26.3838 4.473 2.481 9.54 3.809 14.677 3.809.7688 0 1.3979.629 1.3979 1.3978s-.629 1.3629-1.3979 1.3629zm-76.9495-31.5906c.7688 16.005 14.013 28.795 30.1927 28.795h33.4776c-.9435-.4194-1.852-.8737-2.7607-1.363-10.0642-5.5912-16.4592-16.0049-16.9834-27.432h-43.9262zm45.324-33.1281h-46.7568c-.3844 0-.7338-.1398-.9784-.4194-.2447-.2446-.4194-.629-.4194-.9784.035-18.1716 14.8518-32.9535 33.0233-32.9535h46.7219c.7688 0 1.3978.629 1.3978 1.3979s-.629 1.3978-1.3978 1.3978c-5.137 0-10.204 1.3279-14.677 3.809-9.575 5.3466-15.5507 15.4458-15.5856 26.3837.0349.7688-.5592 1.3629-1.328 1.3629zm-45.324-2.7607h43.9612c.4892-11.4271 6.9191-21.8408 16.9834-27.432.9086-.4893 1.8172-.9436 2.7607-1.363H261.766c-16.2146 0-29.459 12.79-30.2277 28.795z"}),reactExports.createElement("path",{d:"M344.3767 113.535h-35.8889c-5.5912 0-11.1475-1.4328-16.005-4.1585-10.4835-5.8359-16.9833-16.8786-17.0183-28.8299V47.4184c.035-11.9512 6.5348-22.994 17.0184-28.7949 4.8574-2.7257 10.4137-4.1585 16.005-4.1585h35.8888c5.5912 0 11.1475 1.4328 16.005 4.1585 10.4486 5.801 16.9833 16.8437 17.0183 28.8299v33.1281c0 .2097-.035.4194-.1398.629-.035.07-.0699.1398-.1048.1748-.2447.3494-.664.594-1.1532.594h-64.2295v5.766c0 2.9005 2.3763 5.2768 5.2767 5.2768h55.7727c.4893 0 .9086.2446 1.1882.664.2446.4193.2795.9085.0699 1.3628-3.0053 6.1154-7.723 11.1126-13.6636 14.3975-4.8924 2.6558-10.4487 4.0886-16.04 4.0886zm-35.8889-96.2743c-5.137 0-10.204 1.3279-14.677 3.809-9.575 5.3466-15.5506 15.4458-15.5856 26.3837v33.0932c0 10.9379 5.9757 21.072 15.5856 26.3837 4.473 2.4811 9.54 3.809 14.677 3.809h35.8889c5.137 0 10.204-1.3279 14.677-3.809 4.7875-2.6558 8.7014-6.4998 11.462-11.1825h-53.4663c-4.438 0-8.0374-3.5994-8.0374-8.0374v-7.1638c0-.7688.629-1.3978 1.3978-1.3978h64.2295V47.4185c-.035-10.938-5.9756-21.072-15.5856-26.3838-4.473-2.481-9.54-3.774-14.677-3.774h-35.8889zm34.3163 31.5556H310.375c-.7688 0-1.3978-.629-1.3978-1.3978v-7.1289c0-4.438 3.5993-8.0374 8.0374-8.0374h19.115c4.4381 0 8.0375 3.5994 8.0375 8.0374v7.1638c.035.7688-.594 1.3629-1.3629 1.3629zm-31.0314-2.7607h29.6336v-5.766c0-2.9005-2.3763-5.2767-5.2767-5.2767h-19.1151c-2.9005 0-5.2767 2.3762-5.2767 5.2767v5.766h.035z"}),reactExports.createElement("path",{d:"M310.3749 81.8745h-33.5475c-.7688 0-1.3978-.629-1.3978-1.3978V47.4534c0-.7688.629-1.3978 1.3978-1.3978h33.5475c.7688 0 1.3978.629 1.3978 1.3978v33.0583c0 .7688-.629 1.3628-1.3978 1.3628zm-32.1497-2.7607h30.7519V48.8163h-30.7519v30.2975z"}))),SvgSomfay03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M188.2668 10.3093h-81.7132c-1.4168 0-2.5835-1.1667-2.5835-2.5835v-.2083c0-1.4168 1.1667-2.5835 2.5835-2.5835h81.7132c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c.0416 1.4585-1.125 2.6252-2.5835 2.6252zm0 8.0421h-81.7132c-1.4168 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1667-2.5835 2.5835-2.5835h81.7132c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c.0416 1.4168-1.125 2.5835-2.5835 2.5835zm0 8.0422h-81.7132c-1.4168 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1667-2.5835 2.5835-2.5835h81.7132c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4167-1.125 2.5835-2.5835 2.5835zm110.6316-16.0843h-23.543c-1.4168 0-2.5836-1.1667-2.5836-2.5835v-.2083c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4585-1.1668 2.6252-2.5835 2.6252zm0 8.0421h-23.543c-1.4168 0-2.5836-1.1667-2.5836-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 16.1259h-30.7102c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h30.7102c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5834-2.5835 2.5834zm97.1308 0h-23.3764c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5834-2.5835 2.5834zm0 8.0422h-65.1706c-1.4167 0-2.5834-1.1668-2.5834-2.5835v-.1667c0-1.4167 1.1667-2.5835 2.5835-2.5835h65.1705c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm0 8.0421h-69.0041c-1.4168 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1667-2.5835 2.5835-2.5835h69.0041c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1666c.0417 1.4168-1.125 2.5835-2.5835 2.5835zm0 8.0839h-23.3764c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm0 8.0421h-23.3764c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c.0417 1.4168-1.125 2.5835-2.5835 2.5835zm0 8.0422h-23.3764c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm0 8.0838h-23.3764c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm0 8.0422h-23.3764c-1.4167 0-2.5835-1.1668-2.5835-2.5836v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c.0417 1.4168-1.125 2.5835-2.5835 2.5835zm9.4172 8.042h-32.7936c-1.4167 0-2.5835-1.1667-2.5835-2.5834v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h32.7936c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1667 2.5835-2.5835 2.5835zm0 8.0422h-32.7936c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h32.7936c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1667 2.5835-2.5835 2.5835zm0 8.0838h-32.7936c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5834 2.5835-2.5834h32.7936c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1667 2.5835-2.5835 2.5835zm-57.0867-56.3783h-23.3764c-1.4168 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1667-2.5835 2.5835-2.5835h23.3764c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm-1.5001 8.0421h-23.3764c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.3764c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm-.4584 8.0422h-24.0014c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h24.0014c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm-1.0834 8.0838h-24.0014c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h24.0014c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4167-1.1667 2.5835-2.5835 2.5835zm-.4167 8.0422h-24.0014c-1.4167 0-2.5835-1.1668-2.5835-2.5836v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h24.0015c1.4167 0 2.5834 1.1668 2.5834 2.5835v.1667c0 1.4168-1.1667 2.5835-2.5834 2.5835zm15.0843 8.042h-39.0857c-1.4167 0-2.5835-1.1667-2.5835-2.5834v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h39.0857c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-36.9606c-1.4167 0-2.5834-1.1667-2.5834-2.5835v-.1667c0-1.4167 1.1667-2.5835 2.5835-2.5835h36.9605c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0838h-31.1269c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5834 2.5835-2.5834h31.1269c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1668 2.5835-2.5835 2.5835zm1.6251-80.5465h-25.1682c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h25.1682c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5834-2.5835 2.5834zm-62.7121 8.0422h-30.7102c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h30.7102c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0421h-30.7102c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h30.7102c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0839h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0421h-23.543c-1.4168 0-2.5836-1.1667-2.5836-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0838h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5836v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm7.5838 8.042H275.397c-1.4167 0-2.5835-1.1667-2.5835-2.5834v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h31.0852c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-28.6684c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h28.6684c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0838H281.189c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5834 2.5835-2.5834h25.2932c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1668 2.5835-2.5835 2.5835zm-145.467-88.5886h-27.2517c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4168-1.1251 2.5835-2.5835 2.5835zm0 8.0421h-27.2517c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5834-2.5835 2.5834zm0 8.0422h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5835-2.5835 2.5835zm0 8.0421h-27.2517c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c.0416 1.4168-1.1251 2.5835-2.5835 2.5835zm0 8.0839h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5835-2.5835 2.5835zm0 8.0421h-27.2517c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4168-1.1251 2.5835-2.5835 2.5835zm0 8.0422h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5835-2.5835 2.5835zm0 8.0838h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5835-2.5835 2.5835zm0 8.0422h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5836v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4168-1.1251 2.5835-2.5835 2.5835zm10.5423 8.042h-37.0023c-1.4167 0-2.5834-1.1667-2.5834-2.5834v-.1667c0-1.4168 1.1667-2.5835 2.5834-2.5835h37.0023c1.4167 0 2.5834 1.1667 2.5834 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5834 2.5835zm0 8.0422h-35.5438c-1.4168 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1667-2.5835 2.5835-2.5835h35.5438c1.4167 0 2.5834 1.1668 2.5834 2.5835v.1667c.0417 1.4168-1.125 2.5835-2.5834 2.5835zm0 8.0838h-31.2936c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5834 2.5835-2.5834h31.2936c1.4167 0 2.5834 1.1667 2.5834 2.5835v.1666c.0417 1.4168-1.125 2.5835-2.5834 2.5835zm76.3379-80.5465h-49.0446c-1.1251 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9167-2.0418 2.0418-2.0418h49.0446c1.125 0 2.0417.9168 2.0417 2.0418v1.3334c0 1.1251-.9167 2.0418-2.0417 2.0418zm5.8753 8.0422h-62.587c-1.1251 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9167-2.0418 2.0417-2.0418h62.5871c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c-.0417 1.125-.9167 2.0418-2.0418 2.0418zm0 8.0421h-66.2123c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9168-2.0418 2.0418-2.0418h66.2123c1.125 0 2.0418.9168 2.0418 2.0418v1.3334c-.0417 1.1668-.9167 2.0418-2.0418 2.0418zm-41.8775 8.0839h-26.335c-1.125 0-2.0417-.9168-2.0417-2.0418v-1.3334c0-1.1251.9167-2.0418 2.0418-2.0418h26.3349c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c0 1.125-.9167 2.0418-2.0418 2.0418zm40.5024-.6251h-19.6261c-1.1251 0-2.0418-.9167-2.0418-2.0418v-.125c0-1.125.9167-2.0418 2.0418-2.0418h19.6261c1.125 0 2.0418.9167 2.0418 2.0418v.125c0 1.1668-.9167 2.0418-2.0418 2.0418zm-42.3776 8.6672h-24.4597c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9167-2.0418 2.0418-2.0418h24.4598c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c0 1.125-.9167 2.0418-2.0418 2.0418zm40.0442 0h-18.7928c-1.1251 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9167-2.0418 2.0418-2.0418h18.7928c1.125 0 2.0417.9167 2.0417 2.0418v1.3334c0 1.125-.9167 2.0418-2.0418 2.0418zM210.018 82.772h-24.4597c-1.125 0-2.0418-.9168-2.0418-2.0418v-1.3334c0-1.1251.9167-2.0418 2.0418-2.0418h24.4598c1.125 0 2.0418.9167 2.0418 2.0417v1.3335c0 1.1667-.9167 2.0418-2.0418 2.0418zm36.1273 0h-26.2516c-1.125 0-2.0418-.9168-2.0418-2.0418v-1.3334c0-1.1251.9167-2.0418 2.0418-2.0418h26.2516c1.125 0 2.0417.9167 2.0417 2.0417v1.3335c0 1.1667-.9167 2.0418-2.0417 2.0418zm-5.5837 8.0838h-55.0033c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.1251.9167-2.0418 2.0418-2.0418h55.0033c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c0 1.125-.9168 2.0418-2.0418 2.0418zm-29.5435 8.0422h-25.4598c-1.125 0-2.0418-.9168-2.0418-2.0419v-1.3334c0-1.125.9167-2.0418 2.0418-2.0418h25.4598c1.1251 0 2.0418.9167 2.0418 2.0418v1.3334c0 1.125-.9167 2.0418-2.0418 2.0418zm37.0023 8.042h-60.087c-1.125 0-2.0417-.9167-2.0417-2.0417v-1.3334c0-1.1251.9167-2.0418 2.0417-2.0418h60.087c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c-.0417 1.125-.9168 2.0418-2.0418 2.0418zm0 8.0422h-56.8368c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9168-2.0418 2.0418-2.0418h56.8368c1.125 0 2.0417.9167 2.0417 2.0418v1.3334c-.0416 1.1668-.9167 2.0418-2.0417 2.0418zm0 8.0838h-49.128c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9168-2.0418 2.0418-2.0418h49.128c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c-.0417 1.1251-.9168 2.0418-2.0418 2.0418z"})),SvgSpencerLinkous01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 1",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:5,d:"M14.16 10.2598h107.4803m-53.7439 0h0v107.4804m107.4804 0H282.857M175.384 10.2597h107.4804m53.7439 107.4804h0V10.2597m53.7438 107.4804h0L444.096 10.2597l53.744 107.4805H390.3597",className:"cls-1"})),SvgSpencerLinkous02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M267.8165 10.5529v29.5973h-91.6069V10.5529h91.6069m1.955-1.955h-95.5168v33.5072h95.4776V8.598h.0391zm-1.955 79.2911v29.5972h-91.6069V87.889h91.6069m1.955-1.9549h-95.5168v33.5071h95.4776v-33.507h.0391zm60.4065-75.3812v106.9333h-29.5973V10.553h29.5973m1.955-1.955h-33.5072v110.8432h33.5071V8.598zm-188.6876 1.9549v29.5973h-31.0048v77.336H82.8433V40.1501H51.8776V10.553h91.5678m1.9549-1.955H49.9227v33.5072h31.0048v77.336h33.507v-77.336h31.0049V8.598h-.0391zm307.8195 110.8431h-92.1152c-.3519 0-.6256-.1564-.821-.4692-.1564-.2736-.1955-.6255-.0391-.9383l38.5507-77.297c.1564-.3128.5083-.5474.8602-.5474s.7037.1955.8601.5474l7.5069 15.0528a1.0953 1.0953 0 0 1 0 .8602l-22.1687 44.4154h75.2248c.3128 0 .6256.1564.821.4301.1956.2737.1956.6256.0392.9384l-7.8587 16.4603c-.1564.3127-.5083.5473-.8602.5473zm-90.5513-1.9158h89.9257l6.9595-14.5445h-75.2248c-.3519 0-.6256-.1564-.821-.4692-.1564-.2736-.1955-.6255-.0392-.9383l22.6379-45.393-6.4121-12.9023-37.026 74.2473z"}),reactExports.createElement("path",{d:"M461.0785 102.9808H384.329c-.3519 0-.6256-.1564-.821-.4692-.1565-.2737-.1956-.6255-.0392-.9383l8.2106-16.4603c.1564-.3128.5083-.5474.8602-.5474h42.7343L398.4824 9.9664c-.1564-.3128-.1173-.6647.0391-.9384.1564-.2737.4692-.4691.821-.4691h15.6784c.352 0 .7038.1954.8602.5473l46.0967 92.467c.1564.3129.1173.6648-.0391.9384-.1955.2737-.5083.4692-.8602.4692zm-75.1857-1.9158h73.6609l-45.1583-90.5512h-13.528l36.7913 74.5992c.1564.3128.1173.6647-.039.9383-.1565.2737-.4692.4692-.8211.4692H393.126l-7.2332 14.5445z"}),reactExports.createElement("path",{d:"M361.1046 119.4411c-.391 0-.7037-.2346-.8601-.5473l-7.8588-16.4994a1.0953 1.0953 0 0 1 0-.8602l46.0967-92.3889c.1564-.3127.5083-.5473.8602-.5473s.7038.1955.8602.5473l37.456 76.0068c.1563.3128.1172.6647-.0391.9383-.1955.2737-.5083.4692-.8211.4301l-15.0919-.1955c-.3519 0-.7037-.1955-.8601-.5473L399.6554 43.317l-37.6906 75.5767c-.1564.3127-.4692.5473-.8602.5473zm-6.803-17.4377 6.8421 14.2708 37.6906-75.5376c.1564-.3128.5083-.5474.8602-.5474s.7037.1955.8601.5474l21.7777 43.6726 12.9415.1955-35.9312-72.8789-45.041 90.2776z"}))),SvgSpencerLinkous04=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M168.9861 5.0551h101.5474v35.6372H168.9861zm0 82.2526h101.5474v35.6372H168.9861zM301.2638 5.0551h35.6372v117.8898h-35.6372zm-162.9664 0H36.75v35.6372h32.9343v82.2526h35.6372V40.6923h32.9759z"}),reactExports.createElement("path",{fill:"none",d:"M417.1992 56.6189 402.0627 86.975h30.2729z",className:"st0"}),reactExports.createElement("path",{d:"m409.0072 40.235-8.6078 17.2987-32.6432 65.4112h99.385l8.1088-16.9246h-83.001c-.1664 0-.3327-.0831-.4575-.2495-.0831-.1663-.1247-.3326-.0415-.499l8.9404-17.9641 15.885-31.8115-7.5682-15.2612z"}),reactExports.createElement("path",{d:"M393.1222 104.9807H475.25L425.4328 5.0551h-15.9266l40.5441 82.211c0 .0416.0416.0831.0416.1247v.2911c0 .0416 0 .0416-.0416.0832-.0832.1247-.2495.2079-.4158.2495h-48.0708l-8.4415 16.9661zm8.4415-16.9245-8.4415 16.9245 8.4415-16.9245z"}),reactExports.createElement("path",{d:"m448.7196 86.975-22.7463-46.158L408.633 5.7206l-49.734 99.7177 8.0256 16.7998 41.6253-83.417c.0831-.1662.291-.291.4574-.291s.3742.1247.4574.291l23.9106 47.946 15.3444.208zM408.6329 5.7205l17.3404 35.0966z"}))),SvgSpencerLinkous05=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M148.1698 8.5686H59.5433c-6.0676 0-11 4.9324-11 11 0 6.1068 4.9324 11.0392 11.0391 11.0392h88.6265c6.1068 0 11.0392-4.9324 11.0392-11.0392-.0392-6.0676-4.9716-11-11.0783-11zm128.2813 0h-88.6265c-6.1067 0-11.0391 4.9324-11.0391 11.0392 0 6.1067 4.9324 11.0391 11.0391 11.0391h88.6265c6.1068 0 11.0392-4.9324 11.0392-11.0391 0-6.1068-4.9324-11.0392-11.0392-11.0392zm0 44.0784h-88.6265c-6.1067 0-11.0391 4.9324-11.0391 11.0391 0 6.1068 4.9324 11.0392 11.0391 11.0392h88.6265c6.1068 0 11.0392-4.9324 11.0392-11.0392 0-6.1068-4.9324-11.0391-11.0392-11.0391zm77.5874 55.8221v-89.331c0-6.1069-4.9324-10.6478-11.0392-10.6478-6.1068 0-11.0392 4.541-11.0392 10.6477v89.292c0 6.1068 4.9324 11.0391 11.0392 11.0391 6.1068 0 11.0392-4.9323 11.0392-11zm62.9075 4.7367 45.2528-88.3133c2.7793-5.4022.822-12.3702-4.5801-15.1495-5.4021-2.936-12.2527-.3523-15.032 5.089l-45.2528 88.3133c-2.7794 5.4021-.6263 12.4484 4.7758 15.2278 5.4413 2.7793 12.057.2348 14.8363-5.1673z"})),SvgTamasAntal01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M308.0824 36.8185c-.7879-1.5343-2.4051-2.3222-4.0223-2.1978h-.0415c-.1244 0-.2488.0415-.3732.0415-.0414 0-.083 0-.083.0415-.0828.0414-.2072.0414-.2902.083-.0414 0-.083.0414-.1244.0414-.083.0414-.1658.0414-.2488.083-.0414.0414-.1244.0414-.1658.0828-.083.0415-.1244.0415-.2074.083l-15.011 7.9616-14.472 7.6714c-.0414.0414-.1243.083-.1658.083-.0414.0414-.1244.0828-.1658.0828-.083.0415-.1244.083-.2074.166-.0414.0414-.083.0414-.1244.0828-.083.083-.1658.1244-.2073.2074l-.083.0829-.2487.2488-.0415.0415c-.083.0829-.1659.2073-.2073.2902-.8294 1.244-.9952 2.8612-.2488 4.2711v.0415c1.2025 2.3636 1.783 4.9346 1.783 7.6299 0 4.271-1.5757 8.3763-4.437 11.5278-1.5342 1.7001-1.4098 4.3125.2903 5.8468.788.705 1.7831 1.0781 2.7783 1.0781 1.1196 0 2.2392-.456 3.0686-1.3684 4.271-4.6857 6.5932-10.7399 6.5932-17.0843 0-2.6539-.4147-5.2248-1.2025-7.7128l7.2567-3.8565c1.3684 3.6906 2.0319 7.547 2.0319 11.5693 0 4.0637-.705 8.0031-2.1149 11.7766-.7878 2.1148.2903 4.5199 2.4051 5.3077.4976.166.9538.2488 1.4514.2488 1.6586 0 3.2344-1.0366 3.8564-2.6953 1.7416-4.6858 2.6539-9.6203 2.6539-14.6793 0-5.3077-1.0367-10.574-2.9442-15.4256l7.7958-4.1467c2.6124 6.1785 3.9393 12.7303 3.9393 19.5723 0 16.421-8.003 31.8466-21.4383 41.3425-1.866 1.327-2.3222 3.8979-.9952 5.7639.7878 1.1196 2.0733 1.7416 3.3588 1.7416.8293 0 1.6587-.2488 2.3636-.7464 15.633-11.0302 24.963-28.9853 24.963-48.06-.0829-9.3716-2.405-18.7846-6.7176-27.1194zm-37.4031 75.5111c-3.4418 1.0367-7.008 1.7002-10.6155 2.0319V89.0667c.9952-.1659 1.9904-.3732 2.9856-.6635 2.1977-.622 3.4417-2.9441 2.8197-5.1004-.622-2.1977-2.9441-3.4417-5.1004-2.8197-3.11.9122-6.5103.9122-9.5788 0-2.1978-.622-4.4785.622-5.1005 2.8197-.622 2.1978.622 4.4784 2.8198 5.1004.9952.2903 1.949.4976 2.9856.6635v25.2948c-3.6905-.2903-7.3396-.9952-10.9058-2.1148-2.1563-.6635-4.4784.539-5.1833 2.6953-.6635 2.1563.539 4.4785 2.6953 5.1834 5.6395 1.7416 11.5278 2.6539 17.4576 2.6539 5.8468 0 11.6107-.8708 17.1672-2.5295 2.1978-.6635 3.4003-2.9856 2.7368-5.1419-.7049-2.1977-3.027-3.4417-5.1833-2.7783zM222.163 26.4103c8.252-7.4226 18.6601-11.8595 29.6074-12.7718v25.2948c-.9952.1659-1.9904.3732-2.9856.6635-2.1978.622-3.4418 2.9441-2.8198 5.1004.539 1.8245 2.1563 2.9856 3.9394 2.9856.3732 0 .7878-.0415 1.161-.1659 3.11-.9123 6.5103-.9123 9.5789 0 2.1977.622 4.4784-.622 5.1004-2.8197.622-2.1978-.622-4.4785-2.8198-5.1005-.9537-.2902-1.9489-.4975-2.9856-.6634V13.6385c10.9888.9123 21.3555 5.3492 29.6074 12.7718.7878.705 1.783 1.0367 2.7368 1.0367 1.1196 0 2.2392-.4562 3.0685-1.3684 1.5343-1.7002 1.3684-4.3126-.3317-5.8469-10.6155-9.6618-24.5484-15.011-39.1032-15.011-14.5134 0-28.4463 5.3492-39.2692 15.0525-1.7 1.5343-1.8245 4.1467-.3317 5.8468 1.5758 1.6587 4.1882 1.783 5.8468.2903z"}),reactExports.createElement("circle",{cx:486.4639,cy:-139.1956,r:26.3,transform:"matrix(.40932 -.06643 .06643 .40932 66.0468 153.269)"}),reactExports.createElement("path",{d:"M243.6843 81.8515c1.6173-1.6172 1.6173-4.2296 0-5.8469-1.6172-1.6172-4.2296-1.6172-5.8468 0l-8.4178 8.4593c-4.5198-5.8468-6.9664-12.9791-6.9664-20.4846 0-3.9394.705-7.8787 2.0319-11.5278l10.5326 5.598c.622.3317 1.2854.4976 1.949.4976 1.4927 0 2.9026-.7879 3.649-2.1977 1.0781-2.032.2903-4.52-1.7001-5.598l-29.1098-15.4257-.3732-.2074c-1.949-1.0366-4.354-.3317-5.4736 1.4929l-.0415.0414C199.5221 45.029 197.2 54.442 197.2 63.9793c0 15.633 6.0542 30.3537 17.0843 41.4253.788.8294 1.866 1.2026 2.9442 1.2026.9123 0 1.866-.3317 2.6124-.9123.083-.083.2073-.1659.2903-.2488l12.0254-12.0254 11.5277-11.5692zm-34.3345-37.4446 7.7958 4.1467c-1.949 4.893-2.9442 10.1594-2.9442 15.4257 0 9.7032 3.2759 18.9088 9.3715 26.3314l-6.22 6.22c-7.7128-9.0812-11.901-20.526-11.901-32.5514-.0415-6.7177 1.327-13.3938 3.8979-19.5724z"}))),SvgThequrator01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M223.2474 42.9233h31.025v10.8752h-31.025zm0 30.0811h31.025v10.8752h-31.025zm-27.742-30.0811h-12.9271v10.8341h12.9271v30.1222h10.8342V53.7574h12.9271V42.9233h-12.9271zm65.9077 0h10.8752v40.9563h-10.8752zm46.0861 0h-27.9471v40.9563h10.8752V73.0044h17.113v10.8752h10.8751V42.9233h-10.9162zm-17.113 19.206v-8.3719h17.113v8.3718h-17.113z"}),reactExports.createElement("path",{strokeWidth:.4104,d:"m151.2491 65.0586 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zm14.5705.0035 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zm165.7939.0021 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zm14.5705.0035 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zM243.2284 27.686l7.2836-7.2837 7.2836 7.2836-7.2836 7.2836zm.0036-14.5706 7.2835-7.2836 7.2836 7.2836-7.2836 7.2836zm.0143 101.7684 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zm-.0255-14.5995 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836z"}),reactExports.createElement("path",{d:"M292.6433 104.0294h10.3006V114.33h-10.3006zm-10.3006-10.3006h10.3006v10.3006h-10.3006zm-89.3816 10.3006h10.3006V114.33h-10.3006zm10.3006-10.3006h10.3006v10.3006h-10.3006zm79.081-70.2988h10.3006v10.3006h-10.3006zm10.3006-10.3006h10.3006V23.43h-10.3006zm-99.6822 0h10.3006V23.43h-10.3006zM203.2617 23.43h10.3006v10.3006h-10.3006z"}))),SvgTofudog01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null",strokeWidth:.3507},reactExports.createElement("path",{d:"M129.0495 24.2257c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9258 4.4544 9.9258 9.926c0 5.5065-4.4544 9.9258-9.9259 9.9258s-9.9259-4.4193-9.9259-9.9259zm19.8872.0007c0-5.5066 4.4544-9.926 9.926-9.926s9.9259 4.4545 9.9259 9.926c0 5.5066-4.4544 9.926-9.926 9.926s-9.9259-4.4194-9.9259-9.926zm19.8867.0002c0-5.5066 4.4544-9.9259 9.926-9.9259s9.961 4.4544 9.961 9.926c0 5.5065-4.4545 9.9258-9.926 9.9258s-9.961-4.4193-9.961-9.9259zm35.214-.0008c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.926 4.4544 9.926 9.926c0 5.5066-4.4545 9.9259-9.926 9.9259s-9.926-4.4193-9.926-9.926zm19.8871.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.4715.0351-9.926-4.4193-9.926-9.9259zm19.8873-.0002c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9258 4.4544 9.9258 9.926c0 5.5065-4.4543 9.9258-9.9259 9.9258s-9.9259-4.4193-9.9259-9.9259zm39.7734.0003c0-5.5066 4.4543-9.926 9.9259-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926 0 5.5066-4.4544 9.9259-9.926 9.9259-5.4715.035-9.9258-4.4193-9.9258-9.926zm39.7744-.0007c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.5066.0351-9.926-4.4193-9.926-9.9259z"}),reactExports.createElement("path",{d:"M343.2111 24.2264c0-5.5066 4.4544-9.9259 9.926-9.9259 5.5065 0 9.9258 4.4544 9.9258 9.926 0 5.5065-4.4543 9.9258-9.9259 9.9258-5.4715.0351-9.9259-4.4193-9.9259-9.9259zm19.8869-.0004c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9258-9.926 9.9258s-9.9259-4.4193-9.9259-9.9259zM148.9368 44.1134c0-5.5066 4.4544-9.926 9.926-9.926s9.9258 4.4545 9.9258 9.926-4.4543 9.926-9.9259 9.926-9.9259-4.4194-9.9259-9.926zm55.1007-.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.9259 4.4544 9.9259 9.926-4.4544 9.9259-9.926 9.9259-9.9258-4.4194-9.9258-9.926zm79.5478.0007c0-5.5066 4.4543-9.926 9.9259-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926s-4.4544 9.9259-9.926 9.9259c-5.4715.035-9.9258-4.4193-9.9258-9.926zm39.774-.0007c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926s-4.4545 9.9258-9.926 9.9258c-5.5066.0351-9.926-4.4193-9.926-9.9259zm39.7387.0004c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926-4.4544 9.9258-9.926 9.9258-9.9259-4.4193-9.9259-9.9259zM148.937 64.0004c0-5.5066 4.4543-9.926 9.9258-9.926s9.926 4.4545 9.926 9.926c0 5.5066-4.4544 9.926-9.926 9.926s-9.9259-4.4194-9.9259-9.926zm55.1006-.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9259-9.926 9.9259s-9.9258-4.4194-9.9258-9.926zm19.8871.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.4715.0351-9.926-4.4193-9.926-9.9259zm19.8873-.0002c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9258 4.4544 9.9258 9.926c0 5.5065-4.4544 9.9258-9.9259 9.9258s-9.9259-4.4193-9.9259-9.9259zm39.7733-.0007c0-5.5067 4.4544-9.926 9.926-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926 0 5.5066-4.4544 9.9259-9.926 9.9259-5.4715.035-9.9259-4.4193-9.9259-9.926zm39.774.0003c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.5066.0351-9.926-4.4193-9.926-9.9259z"}),reactExports.createElement("path",{d:"M343.2111 63.9994c0-5.5066 4.4544-9.9259 9.926-9.9259 5.5065 0 9.9258 4.4544 9.9258 9.926 0 5.5065-4.4544 9.9258-9.9259 9.9258-5.4715.0351-9.9259-4.4193-9.9259-9.9259zm19.8869.0008c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9258-9.926 9.9258s-9.9259-4.4193-9.9259-9.9259zM148.937 83.8874c0-5.5066 4.4544-9.926 9.926-9.926s9.9258 4.4545 9.9258 9.926c0 5.5066-4.4543 9.926-9.9259 9.926s-9.9259-4.4194-9.9259-9.926zm55.1007-.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9259-9.926 9.9259s-9.9258-4.4194-9.9258-9.926zm79.5478-.0003c0-5.5066 4.4543-9.926 9.9259-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926 0 5.5066-4.4544 9.9259-9.926 9.9259-5.4715.035-9.9258-4.4193-9.9258-9.926zm39.7738.0003c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.5066.0351-9.926-4.4193-9.926-9.9259zm39.7387.0004c0-5.5066 4.4545-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9258-9.926 9.9258s-9.9258-4.4193-9.9258-9.9259zm-214.1609 19.8862c0-5.5066 4.4544-9.926 9.926-9.926s9.9258 4.4545 9.9258 9.926-4.4543 9.926-9.9259 9.926-9.9259-4.4194-9.9259-9.926zm55.1007.0004c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.9259 4.4544 9.9259 9.926-4.4544 9.9259-9.926 9.9259-9.9258-4.4194-9.9258-9.926zm19.8871-.0004c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926s-4.4545 9.9258-9.926 9.9258c-5.4715.0351-9.926-4.4193-9.926-9.9259zm19.8863.0008c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9258 4.4544 9.9258 9.926-4.4544 9.9258-9.9259 9.9258-9.9259-4.4193-9.9259-9.9259zm39.7742-.0007c0-5.5066 4.4544-9.926 9.926-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926s-4.4544 9.9259-9.926 9.9259c-5.4715.035-9.9259-4.4193-9.9259-9.926zm39.7739.0003c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926s-4.4545 9.9258-9.926 9.9258c-5.5066.0351-9.926-4.4193-9.926-9.9259zm39.7387-.0006c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926-4.4544 9.9258-9.926 9.9258-9.9259-4.4193-9.9259-9.9259z"}))),SvgTofudog02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M400.4148 42.4695c1.947-3.3212 1.947-7.444 0-10.7653-1.9469-3.3212-5.4971-5.3826-9.2764-5.3826-3.8938 0-7.444-2.0614-9.2765-5.3826-1.9469-3.3212-5.4971-5.3827-9.2764-5.3827-3.8939 0-7.444 2.0615-9.2765 5.3827-1.9469 3.3212-5.4971 5.3826-9.2764 5.3826-3.8939 0-7.444 2.0614-9.2765 5.3826-1.9469 3.3212-1.9469 7.444 0 10.7653 1.947 3.3212 1.947 7.444 0 10.7652-1.9469 3.3212-1.9469 7.4441 0 10.7653 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 5.4972 5.3827 9.2765 5.3827 3.8938 0 7.444-2.0615 9.2764-5.3827 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.444 0-10.7653 1.947-3.3212 5.4972-5.3826 9.2765-5.3826 3.8938 0 7.444 2.0614 9.2764 5.3826 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 5.4972 5.3827 9.2765 5.3827 3.8938 0 7.444-2.0615 9.2764-5.3827 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.444 0-10.7653 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.4441 0-10.7653 1.947-3.3212 1.947-7.444 0-10.7653-1.9469-3.3212-1.9469-7.444 0-10.7652zM363.08 53.2347c-1.947-3.3212-1.947-7.444 0-10.7652 1.9469-3.3212 5.4971-5.3826 9.2764-5.3826 3.8939 0 7.444 2.0614 9.2765 5.3826 1.9469 3.3212 1.9469 7.444 0 10.7652-1.947 3.3212-5.4972 5.3827-9.2765 5.3827s-7.3295-2.0615-9.2764-5.3827zm-47.642-23.1338a9.6229 9.6229 0 0 0 0-9.62c-1.7179-3.0922-4.9246-4.9246-8.3603-4.9246-3.4357 0-6.6424 1.8324-8.3602 4.81a9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.6201 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.6201 9.6229 9.6229 0 0 0 0 9.62c1.7178 2.9776 4.9245 4.81 8.3602 4.81 3.4357 0 6.6424-1.8324 8.3603-4.81a9.6229 9.6229 0 0 0 0-9.62 9.6229 9.6229 0 0 1 0-9.62 9.6229 9.6229 0 0 0 0-9.62 9.6229 9.6229 0 0 1 0-9.62 9.6229 9.6229 0 0 0 0-9.62 9.6229 9.6229 0 0 1 0-9.6201 9.6229 9.6229 0 0 0 0-9.62c-1.7179-2.8631-1.7179-6.5279 0-9.5055zm-62.5302 58.0637c-1.7178 2.9776-4.9245 4.81-8.3602 4.81-3.4357 0-6.6424-1.8324-8.3603-4.81a9.6229 9.6229 0 0 1 0-9.62c1.7179-2.9777 4.9246-4.81 8.3603-4.81 3.4357 0 6.6424-1.8324 8.3602-4.81a9.6229 9.6229 0 0 0 0-9.62c-1.7178-2.9777-4.9245-4.8101-8.3602-4.8101-3.4357 0-6.6424-1.8324-8.3603-4.81a9.6229 9.6229 0 0 1 0-9.62c1.7179-2.9777 4.9246-4.81 8.3603-4.81 3.4357 0 6.6424 1.8323 8.3602 4.81 1.718 2.9776 4.9246 4.81 8.3603 4.81 3.4357 0 6.6424-1.8324 8.3603-4.81a9.6229 9.6229 0 0 0 0-9.62c-1.7179-2.9777-4.9246-4.81-8.3603-4.81-3.4357 0-6.6424-1.8324-8.3603-4.81-1.7178-2.9777-4.9245-4.81-8.3602-4.81-3.4357 0-6.6424 1.8323-8.3603 4.81-1.7178 2.9776-4.9245 4.81-8.3602 4.81-3.4358 0-6.6424 1.8323-8.3603 4.81a9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62c1.7179 2.9777 4.9245 4.8101 8.3603 4.8101 3.4357 0 6.6424 1.8324 8.3602 4.81 1.7179 2.9776 4.9246 4.81 8.3603 4.81 3.4357 0 6.6424-1.8324 8.3602-4.81 1.718-2.9776 4.9246-4.81 8.3603-4.81 3.4357 0 6.6424-1.8324 8.3603-4.81a9.6229 9.6229 0 0 0 0-9.62c-1.7179-2.9777-4.9246-4.81-8.3603-4.81-3.4357-.1146-6.6424 1.8323-8.3603 4.81zm-57.6056-61.843c-3.8938 0-7.444-2.0614-9.2764-5.3826-1.947-3.3212-5.4972-5.3827-9.2765-5.3827-3.8938 0-7.444 2.0615-9.2764 5.3827-1.947 3.3212-5.4972 5.3826-9.2765 5.3826-3.8938 0-7.444-2.0614-9.2764-5.3826-2.0614-3.3212-5.6117-5.3827-9.5055-5.3827-3.8938 0-7.444 2.0615-9.2765 5.3827-1.9469 3.3212-5.4971 5.3826-9.2764 5.3826-3.8938 0-7.444 2.0614-9.2765 5.3826-1.9469 3.3212-1.9469 7.444 0 10.7653 1.947 3.3212 5.4972 5.3826 9.2765 5.3826 3.8938 0 7.444-2.0614 9.2764-5.3826 1.947-3.3212 5.4972-5.3826 9.2765-5.3826 3.8938 0 7.444 2.0614 9.2764 5.3826 1.947 3.3212 1.947 7.444 0 10.7652-1.9469 3.3212-1.9469 7.4441 0 10.7653 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 5.4972 5.3827 9.2765 5.3827 3.8938 0 7.444-2.0615 9.2764-5.3827 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.444 0-10.7653 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.4441 0-10.7653 1.947-3.3212 1.947-7.444 0-10.7653-1.9469-3.3212-1.9469-7.444 0-10.7652 1.947-3.3212 5.4972-5.3826 9.2765-5.3826 3.8938 0 7.444 2.0614 9.2764 5.3826 1.947 3.3212 5.4972 5.3826 9.2765 5.3826 3.8938 0 7.444-2.0614 9.2764-5.3826 1.947-3.3212 1.947-7.444 0-10.7653-1.6033-3.3212-5.1535-5.3826-9.0474-5.3826z"})),SvgTxchiDu01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"#FFF",strokeMiterlimit:10},reactExports.createElement("path",{d:"m312.0294 39.7987-31.828-31.8681c-.4405-.4404-1.041-.6806-1.6815-.6806h-45.0397c-.6406 0-1.2411.2402-1.6815.6806l-31.868 31.868c-.4405.4405-.6807 1.041-.6807 1.6816v45.0396c0 .6406.2402 1.2411.6806 1.6815l31.868 31.8681c.4405.4404 1.041.6806 1.6816.6806h45.0396c.6406 0 1.2411-.2402 1.6815-.6806l31.8681-31.868c.4404-.4405.6806-1.041.6806-1.6816V41.4802c0-.6406-.2802-1.2411-.7206-1.6815zm-4.0036 45.7603-30.4668 30.4668h-43.118L203.9742 85.559V42.441l30.4668-30.4668h43.118l30.4668 30.4668v43.118z",className:"st0"}),reactExports.createElement("path",{d:"M295.775 46.5246 273.4755 24.225c-.04-.04-.08-.04-.08-.0801-.0801-.08-.1602-.1602-.2803-.2002-.08-.08-.2002-.1201-.3203-.1601-.04 0-.08-.04-.08-.04-.1602-.0401-.2803-.1202-.4405-.1202h-.1601c-.08 0-.2002-.04-.2802-.04-.0801 0-.1602 0-.2403.04-.08 0-.1601 0-.2402.04-.08 0-.12.04-.2001.04-.0801.0401-.1602.0401-.2403.0802-.08.04-.12.08-.2001.12-.0801.0401-.1602.0801-.2002.1202-.1201.08-.2402.2002-.3603.2802-.04.04-.04.0801-.0801.1201-.08.0801-.1601.1602-.2002.2403-.08.12-.1201.2001-.1601.3202 0 .04-.04.04-.04.0801l-11.0898 26.7436h-5.0445l-9.7285-23.5008h19.417c1.3212 0 2.3621-1.0409 2.3621-2.362s-1.0409-2.3621-2.362-2.3621H240.166c-.08 0-.2001 0-.2802.04-.1601.04-.2803.0801-.4004.1201h-.04s-.04 0-.04.04c-.1201.0401-.2402.1202-.3604.2003-.08.04-.1601.12-.2402.2001-.04.04-.08.04-.12.0801l-16.2144 16.2143a2.3439 2.3439 0 0 0 0 3.323c.4805.4403 1.081.6805 1.6815.6805s1.201-.2402 1.6815-.6806l13.732-13.732 9.7287 23.5006-3.5632 3.5632-12.1307-4.9644c-.04 0-.08-.04-.12-.04-.1202-.04-.2003-.0801-.3204-.0801-.12-.04-.2001-.04-.3202-.04h-.1602c-.12 0-.2802 0-.4003.04-.1602.04-.2803.08-.4004.1201-.04 0-.04 0-.08.04-.0801.04-.2002.0801-.2803.1602-.04.04-.08.04-.1201.08-.08.0401-.1201.1202-.2002.1602-.04.04-.1201.08-.1601.1201-.0801.08-.1201.1601-.2002.2402-.04.04-.08.08-.08.1201-.0801.1201-.1602.2803-.2403.4004 0 .04 0 .08-.04.08l-.1201.3604c-.04.12-.04.2402-.04.3603v19.4171c0 .6406.2401 1.241.6805 1.6815l12.531 12.531-4.2036 10.089-19.1369-19.137v-30.627c0-1.3211-1.041-2.362-2.362-2.362s-2.3622 1.0409-2.3622 2.362V79.834c0 .6405.2403 1.241.6806 1.6815l22.3397 22.3396.08.0801c.0802.08.1602.1602.2803.2402.0801.0801.2002.1201.3203.1602.04 0 .08.04.08.04l.3604.1201c.04 0 .04 0 .08.04h.0802c.12 0 .2402.0401.3603.0401.12 0 .2802 0 .4003-.04.04 0 .08 0 .1201-.04.0801-.0401.2002-.0401.2803-.0801.04 0 .08-.04.12-.04.1202-.0401.2403-.1202.3604-.2003.1201-.08.2402-.1601.3203-.2802 0 0 .04 0 .04-.04l.04-.0401c.0801-.08.1602-.1601.2003-.2803l.08-.08c.08-.1201.1201-.2402.2002-.3603l6.1254-14.813 4.9243-11.9306h5.0445l9.7286 23.5007h-3.243c-1.321 0-2.362 1.041-2.362 2.362s1.041 2.3622 2.362 2.3622h6.766c.1602 0 .3203 0 .4404-.04.3203-.0801.6006-.2003.8408-.3604.08-.08.1601-.1201.2402-.2002.04-.04.08-.04.1201-.08l4.7642-4.7642a2.3439 2.3439 0 0 0 0-3.323 2.3439 2.3439 0 0 0-3.323 0l-2.282 2.282-9.7285-23.5007 3.5631-3.5631 26.7836 11.0898c.2803.12.6006.1601.9208.1601.9209 0 1.8016-.5605 2.162-1.4413.4804-1.201-.0801-2.6023-1.2812-3.0827l-26.7836-11.0898V61.618l26.7436-11.0898c.04 0 .08-.04.12-.04.1202-.04.2003-.08.2803-.1602.0801-.08.2002-.16.2803-.2402l.08-.08c.1202-.1201.2002-.2402.2803-.3604.04-.04.08-.12.08-.16l.1202-.2403c.04-.08.04-.1601.08-.2402 0-.08.04-.1201.04-.2002 0-.08 0-.1201.0401-.2002 0-.08.04-.1601.04-.2402 0-.08 0-.1601-.04-.2402 0-.08 0-.1601-.04-.2002-.04-.1601-.08-.3203-.1201-.4404 0-.04-.04-.08-.04-.08-.0401-.1201-.0801-.2002-.1602-.3203-.08-.08-.1201-.1602-.2002-.2402.2002-.2402.1602-.2803.1201-.3203zm-29.3058 10.5693-3.5631-3.5631 9.7286-23.5007 17.3352 17.3352-23.5007 9.7286zm-7.3665 14.4527h-6.2455l-4.4439-4.4439v-6.2455l4.444-4.4439h6.2454l4.444 4.444v6.2454l-4.444 4.444zm-24.0612 1.121v-14.813l8.6877 3.6032v6.6458c0 .6406.2402 1.2411.6806 1.6815l4.6841 4.6841-3.6031 8.6877-10.4493-10.4893z",className:"st0"}),reactExports.createElement("circle",{cx:797.1289,cy:-60.4278,r:9,className:"st0",transform:"matrix(.15321 -.36989 .36989 .15321 156.199 368.1)"}))),SvgViscous01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M224.8418 33.1511h-13.7144c-19.592 0-35.5063 15.9143-35.5063 35.5063v39.2184c0 2.681 2.1655 4.8465 4.8465 4.8465s4.8464-2.1655 4.8464-4.8465V68.6574c0-14.23 11.5834-25.8477 25.8477-25.8477h13.7145c2.681 0 4.8464-2.1655 4.8464-4.8465s-2.2342-4.812-4.8808-4.812zm0-17.8734h-88.6454c-2.681 0-4.8464 2.1655-4.8464 4.8465s2.1654 4.8464 4.8464 4.8464h88.6454c2.681 0 4.8464-2.1654 4.8464-4.8464s-2.1998-4.8465-4.8464-4.8465zm65.3412 0h-43.3431c-2.681 0-4.8465 2.1655-4.8465 4.8465s2.1655 4.8464 4.8465 4.8464h43.343c2.681 0 4.8465-2.1654 4.8465-4.8464s-2.1998-4.8465-4.8465-4.8465zm-13.8863 27.532h13.8519c2.681 0 4.8464-2.1655 4.8464-4.8465s-2.1654-4.812-4.812-4.812h-13.852c-18.9046 0-34.3032 15.3986-34.3032 34.3032v40.4214c0 2.681 2.1654 4.8465 4.8464 4.8465h43.3431c2.681 0 4.8465-2.1654 4.8465-4.8465s-2.1655-4.8464-4.8465-4.8464h-38.4966v-35.575c-.0344-13.577 10.999-24.6447 24.576-24.6447zm34.8532-27.532c-2.681 0-4.8465 2.1655-4.8465 4.8465v87.7516c0 2.681 2.1654 4.8465 4.8464 4.8465s4.8465-2.1655 4.8465-4.8465V20.1242c0-2.681-2.1654-4.8465-4.8464-4.8465zm66.2004 20.8982c-.0687-.1719-.1375-.3437-.2406-.5156-5.7401-12.0302-18.0453-20.3826-32.2753-20.3826H331.12c-2.681 0-4.8465 2.1654-4.8465 4.8465v87.7516c0 2.681 2.1655 4.8465 4.8465 4.8465s4.8464-2.1655 4.8464-4.8465V24.9362h8.9024c7.4587 0 14.1956 3.1623 18.9733 8.1806h-14.9174c-2.681 0-4.8465 2.1654-4.8465 4.8464s2.1655 4.8465 4.8465 4.8465h20.692a26.0956 26.0956 0 0 1 1.3404 8.2492v56.817c0 2.681 2.1655 4.8464 4.8465 4.8464s4.8464-2.1655 4.8464-4.8465V51.059c-.0343-5.3276-1.203-10.346-3.2997-14.883z"})),SvgWans02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M164.7912 16.3016c0-2.9157-2.355-5.2707-5.2707-5.2707h-24.4473v-.0748H88.4588v.0748H63.9743c-2.9157 0-5.2708 2.355-5.2708 5.2707v36.1102c0 2.9158 2.355 5.2708 5.2708 5.2708H87.3c.6355 0 1.1215.486 1.1215 1.1214v52.9692c0 2.9157 2.355 5.2707 5.2707 5.2707h36.1103c2.9157 0 5.2707-2.355 5.2707-5.2707V58.804c0-.6355.486-1.1214 1.1214-1.1214h23.3259c2.9157 0 5.2708-2.355 5.2708-5.2708V16.3016zm127.2455 95.4716V16.2268c0-2.9158 2.355-5.2708 5.2708-5.2708h36.1102c2.9158 0 5.2708 2.355 5.2708 5.2708v95.5463c0 2.9157-2.355 5.2707-5.2708 5.2707h-36.1102c-2.9157 0-5.2707-2.355-5.2707-5.2707zm-15.8496-54.0906h-95.5463c-2.9157 0-5.2707-2.355-5.2707-5.2708V16.3016c0-2.9157 2.355-5.2707 5.2707-5.2707h95.5463c2.9158 0 5.2708 2.355 5.2708 5.2707v36.1102c0 2.9158-2.355 5.2708-5.2708 5.2708zm0 59.3239h-95.5463c-2.9157 0-5.2707-2.355-5.2707-5.2707V75.6255c0-2.9157 2.355-5.2707 5.2707-5.2707h95.5463c2.9158 0 5.2708 2.355 5.2708 5.2707v36.1103c0 2.9157-2.355 5.2707-5.2708 5.2707zM399.059 13.8718l-51.1374 100.7797c-.5607 1.084.2243 2.3924 1.4579 2.3924h102.2749c1.2336 0 2.0186-1.3083 1.4578-2.3924L401.9749 13.8718c-.5981-1.1962-2.3176-1.1962-2.9157 0z"})),SvgZootghost01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M441.6742 117.9702H490.9l-57.886-84.4048h-50.6346l-46.491 70.8139V33.5654H289.19v65.2615h-79.5154V82.7497h72.347v-18.066h-72.347V51.59h57.803V33.5654H21.1v21.008h47.4855v63.3968h46.6982V54.5733h47.6927v63.397h210.9501l7.3756-13.591h52.9965l7.3756 13.591zM391.6196 85.526l16.2843-29.9581 16.2015 29.9581h-32.4858z"}),reactExports.createElement("ellipse",{cx:68.2955,cy:33.5653,fill:"#FFF",className:"st0",rx:21.1323,ry:22.7483}),reactExports.createElement("path",{d:"M68.2955 11.6872c11.229 0 20.3035 9.8203 20.3035 21.9196s-9.0744 21.9196-20.3036 21.9196c-11.229 0-20.3035-9.8203-20.3035-21.9196s9.0744-21.9196 20.3036-21.9196m0-1.6574c-12.0993 0-21.961 10.5661-21.961 23.577s9.8617 23.577 21.961 23.577 21.961-10.5661 21.961-23.577-9.8618-23.577-21.961-23.577z"}),reactExports.createElement("ellipse",{cx:74.6766,cy:33.5653,rx:10.1932,ry:10.6905}),reactExports.createElement("ellipse",{cx:115.4909,cy:33.5653,fill:"#FFF",className:"st0",rx:21.1323,ry:22.7483}),reactExports.createElement("path",{d:"M115.491 11.6872c11.229 0 20.3035 9.8203 20.3035 21.9196s-9.0745 21.9196-20.3036 21.9196-20.3036-9.8203-20.3036-21.9196 9.0745-21.9196 20.3036-21.9196m0-1.6574c-12.0993 0-21.961 10.5661-21.961 23.577s9.8617 23.577 21.961 23.577 21.961-10.5661 21.961-23.577-9.8617-23.577-21.961-23.577z"}),reactExports.createElement("ellipse",{cx:109.1098,cy:33.5653,rx:10.1932,ry:10.6905}),reactExports.createElement("ellipse",{cx:384.2441,cy:33.5653,fill:"#FFF",className:"st0",rx:21.1323,ry:22.7483}),reactExports.createElement("path",{d:"M384.244 11.6872c11.2292 0 20.3036 9.8203 20.3036 21.9196s-9.0744 21.9196-20.3035 21.9196c-11.2292 0-20.3036-9.8203-20.3036-21.9196s9.1159-21.9196 20.3036-21.9196m0-1.6574c-12.0993 0-21.961 10.5661-21.961 23.577s9.8617 23.577 21.961 23.577c12.0992 0 21.961-10.5661 21.961-23.577s-9.8203-23.577-21.961-23.577z"}),reactExports.createElement("ellipse",{cx:390.6252,cy:33.5653,rx:10.1932,ry:10.6905}),reactExports.createElement("ellipse",{cx:431.481,cy:33.5653,fill:"#FFF",className:"st0",rx:21.1323,ry:22.7483}),reactExports.createElement("path",{d:"M431.481 11.6872c11.229 0 20.3035 9.8203 20.3035 21.9196s-9.0744 21.9196-20.3035 21.9196c-11.2292 0-20.3036-9.8203-20.3036-21.9196s9.0744-21.9196 20.3036-21.9196m0-1.6574c-12.0993 0-21.961 10.5661-21.961 23.577s9.8617 23.577 21.961 23.577c12.0992 0 21.961-10.5661 21.961-23.577s-9.8618-23.577-21.961-23.577z"}),reactExports.createElement("ellipse",{cx:425.0584,cy:33.5653,rx:10.1932,ry:10.6905}),reactExports.createElement("path",{fill:"#FFF",d:"M232.2987 85.8574c-6.0911 0-11.0634-5.428-11.0634-12.0993s4.9723-12.0992 11.0634-12.0992c6.091 0 11.0633 5.428 11.0633 12.0992s-4.9308 12.0993-11.0633 12.0993z",className:"st0"}),reactExports.createElement("path",{d:"M232.2987 62.529c5.6352 0 10.2346 5.0552 10.2346 11.2706S237.934 85.07 232.2987 85.07s-10.2347-5.0551-10.2347-11.2705 4.5994-11.2706 10.2347-11.2706m0-1.6574c-6.5469 0-11.8921 5.801-11.8921 12.928s5.3452 12.928 11.892 12.928c6.547 0 11.8922-5.801 11.8922-12.928s-5.3038-12.928-11.8921-12.928z"}),reactExports.createElement("ellipse",{cx:232.2987,cy:73.7582,rx:5.3452,ry:5.8839}),reactExports.createElement("path",{fill:"#FFF",d:"M256.2486 85.8574c-6.091 0-11.0634-5.428-11.0634-12.0993s4.9723-12.0992 11.0634-12.0992c6.091 0 11.0634 5.428 11.0634 12.0992s-4.9723 12.0993-11.0634 12.0993z",className:"st0"}),reactExports.createElement("path",{d:"M256.2486 62.529c5.6353 0 10.2347 5.0552 10.2347 11.2706S261.8839 85.07 256.2486 85.07s-10.2346-5.055-10.2346-11.2704 4.558-11.2706 10.2347-11.2706m0-1.6574c-6.5469 0-11.892 5.801-11.892 12.928s5.3451 12.928 11.892 12.928 11.8921-5.801 11.8921-12.928-5.3452-12.928-11.892-12.928z"}),reactExports.createElement("ellipse",{cx:256.2486,cy:73.7582,rx:5.3452,ry:5.8839}),reactExports.createElement("ellipse",{cx:302.7397,cy:32.6538,fill:"#FFF",className:"st0",rx:9.406,ry:8.9087}),reactExports.createElement("path",{d:"M302.7397 24.5738c4.7237 0 8.5772 3.6049 8.5772 8.08s-3.8121 8.08-8.5772 8.08-8.5773-3.605-8.5773-8.08 3.8536-8.08 8.5773-8.08m0-1.6575c-5.6353 0-10.2347 4.3508-10.2347 9.7374s4.5994 9.7375 10.2347 9.7375 10.2346-4.3508 10.2346-9.7374-4.5994-9.7375-10.2346-9.7375z"}),reactExports.createElement("ellipse",{cx:302.7397,cy:32.6538,rx:4.4751,ry:4.2265}),reactExports.createElement("ellipse",{cx:322.7532,cy:32.6538,fill:"#FFF",className:"st0",rx:9.406,ry:8.9087}),reactExports.createElement("path",{d:"M322.7532 24.5738c4.7237 0 8.5772 3.6049 8.5772 8.08s-3.812 8.08-8.5772 8.08-8.5772-3.605-8.5772-8.08 3.8535-8.08 8.5772-8.08m0-1.6575c-5.6353 0-10.2347 4.3508-10.2347 9.7374s4.5994 9.7375 10.2347 9.7375 10.2347-4.3508 10.2347-9.7374-4.5994-9.7375-10.2347-9.7375z"}),reactExports.createElement("ellipse",{cx:322.7532,cy:32.6538,rx:4.4751,ry:4.2265}))),SvgHanneMaes01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 80.43442 33.86671",...re},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M-87.89572 152.05557q.55291-.5529 2.24847-1.25324 1.69557-.73721 4.16519-1.51127 2.50649-.77406 5.56588-1.54812 3.09624-.81093 6.37679-1.43755 3.28055-.66348 6.5611-1.1058 3.3174-.47918 6.22935-.62662 2.94881-.14744 5.30786.0737 2.3959.22116 3.83345.9215.70034.33174.81092 1.40069.11058 1.06894-.25802 2.24846-.3686 1.14266-1.17952 2.13789-.77406.99522-1.80615 1.17952-.7372.14744-1.87986 0-1.1058-.1843-2.94881-.3686-1.843-.1843-4.60751-.22116-2.72765-.0737-6.67168.29488 1.14266.9215 1.54812 1.76928.1843.44233.11058 1.95359-.03686 1.4744-.29488 3.50171-.22116 1.99044-.5529 4.20205-.33174 2.17475-.70034 4.09147-.33174 1.87987-.66348 3.13311-.29488 1.2901-.44232 1.40068-.22117.1843-.77407.22116-.51604.0737-1.17952-.0369-.62662-.11058-1.25324-.44232-.58976-.33174-.9215-.9215-.1843-.29488-.33175-1.40068-.14744-1.06895-.25802-2.61707-.11058-1.58498-.1843-3.46485-.07372-1.87986-.07372-3.79659t.03686-3.68601q.03686-1.80614.14744-3.16997-2.87509.40546-6.30308 1.1058-3.39112.66349-7.44573 1.62185-.62662.14744-1.21638-.22116-.58976-.3686-.99523-.95836-.3686-.62663-.44232-1.29011-.0369-.70034.44232-1.17952zm48.39732 6.96656q.25802-.14744.70034-.11058.47918.0369.9215.29488.47918.22116.81093.62662.33174.40546.33174.95836 0 .92151-.88465 2.28533-.84778 1.36382-2.35904 2.65393-1.4744 1.25324-3.53857 2.17474-2.06417.88464-4.42321.88464-1.54813 0-3.02253-.44232-1.4744-.44232-2.61707-1.2901-1.1058-.84778-1.80614-2.06417-.66349-1.25324-.66349-2.87508 0-1.54813.5529-2.72765.5529-1.21638 1.43755-2.02731.9215-.84778 2.06417-1.32696 1.14266-.47918 2.35904-.58976 1.14267-.11058 2.2116.11058 1.10581.22116 1.99045.70034.88465.44232 1.51127 1.14266.62662.70035.81092 1.58499.25802 1.21638-.25802 2.24846-.47918 1.03209-1.51127 1.62185-.99522.58976-2.3959.58976-1.40069 0-2.91195-.88464.47918.81092 1.43754 1.25324.95837.44232 2.10103.44232 1.17952 0 2.3959-.47918 1.25325-.47918 2.3222-1.51126.44231-.44232.77405-.92151.33175-.47918.58977-.9215.29488-.47918.5529-.84778.25802-.3686.51604-.5529zm-9.17817.0369q-.33174-.3686-.77406-.33174-.40546.0369-.70034.33174-.25802.25802-.29488.66348 0 .40546.40546.77406.40546.33174.77406.29488.40546-.0369.62662-.29488.25803-.25802.25803-.66348.03686-.40546-.29489-.77406zm10.2471-3.42803q.29489-.14744.81093-.14744.5529 0 1.1058.14744.5529.11058.99522.33174.47918.22116.62662.51604.14745.29488 0 .84778-.11057.5529-.25802 1.25325-.14744.70034-.25802 1.4744-.07372.7372.14744 1.43754.14744.58977.5529.95837.44233.33174.95837.47918.51604.11058 1.06894 0 .58976-.11058 1.06894-.47918.47918-.3686.77407-.88465.29488-.5529.47918-1.03208.1843-.51604.3686-.9215.1843-.40546.44232-.58976.25802-.14744.70034-.0737.44232.0369.88464.29488.44233.22116.77407.62662.3686.40546.40546.9215.07372.51604-.33174 1.54813-.3686 1.03208-1.14267 2.17474-.77406 1.14267-1.91672 2.21161-1.14267 1.03208-2.5802 1.62184-1.51127.58976-2.8751.40546-1.36382-.1843-2.43276-.9215-1.06895-.7372-1.73243-1.91672-.66348-1.21639-.77406-2.65393-.11058-1.43754.11058-2.72765.22116-1.32696.5529-2.35904.3686-1.03209.77406-1.69557.40546-.66348.70034-.84778zm6.30308-4.64437q0 1.4744-1.03208 2.50648-1.03208 1.03209-2.50649 1.03209-1.4744 0-2.50648-1.03209-1.03209-1.03208-1.03209-2.50648 0-1.47441 1.03209-2.50649 1.03208-1.03208 2.50648-1.03208 1.4744 0 2.50649 1.03208 1.03208 1.03208 1.03208 2.50649zm7.9249 4.46007q2.61706-.11058 4.0546 1.54812.40546-.66348.81093-.9215.33174-.14744.84778-.14744.5529 0 1.1058.14744.5529.11058.99522.33174.44232.22116.58976.51604.14745.29488 0 .77406-.11058.47919-.25802 1.10581-.14744.58976-.25802 1.2901-.07372.70034.14744 1.40068.14744.58977.51605.95837.40546.33174.88464.47918.47918.11058.99522 0 .5529-.11058 1.03208-.47918.47918-.3686.77407-.88465.29488-.5529.47918-1.03208.1843-.51604.3686-.9215.1843-.40546.44232-.58976.25802-.14744.70034-.0737.44232.0369.88464.29488.44232.22116.77406.62662.33174.40546.40547.9215.03686.51604-.3686 1.54813-.40547 1.03208-1.21639 2.17474-.81092 1.14267-1.99044 2.21161-1.17953 1.03208-2.61707 1.62184-2.10103.84779-3.7966.22116-1.69556-.66348-2.61706-2.17474-.84778 1.03208-1.91672 1.62184-1.06895.58976-2.17475.66348-1.21638.11058-2.32219-.25802-1.1058-.3686-1.95358-1.14266-.81092-.77406-1.2901-1.95359-.47919-1.17952-.44233-2.72764 0-1.54813.5529-2.83823.5529-1.2901 1.43755-2.21161.9215-.95836 2.06417-1.4744 1.14266-.5529 2.35904-.62662zm2.72764 6.04505q.07372-.66348-.07372-1.1058-.11058-.47918-.3686-.77406-.25802-.29488-.58976-.44232-.29489-.14744-.62663-.1843-.47918-.0369-.88464.14744-.3686.1843-.62662.5529-.25802.33174-.40546.77406-.14744.44232-.11058.88464.07372.88465.5529 1.54813.47918.66348 1.2901.58976.81093-.0737 1.2901-.58976.47919-.5529.5529-1.40069z",transform:"translate(88.34068 -144.51399)"}),reactExports.createElement("path",{d:"M-51.86699 177.02183q2.28283.0725 5.45827.26163 3.17367.22592 6.43057.41893 3.3366.23374 6.43058.41894 3.17543.18909 5.3768.25773 2.20313.0318 3.12926-.55116.92614-.58295.80026-1.36393-.1241-.8178-1.22934-1.60883-1.02378-.78712-2.88516-1.13466-1.21317-.24266-3.411-.38491-2.11638-.13832-4.72684-.18968-2.52723-.0843-5.3024-.10655-2.69369-.0184-5.14651.0485-2.3696.034-4.25039.0915-1.79932.0614-2.62105.16958-1.14936.12942-1.82933.68727-.5985.56175-.5488 1.22838.13293.63371 1.16906 1.1631 1.03612.5294 3.15602.59411z",transform:"translate(88.34068 -144.51399)"})));var fnv1a={exports:{}};(function(re,ee){Object.defineProperty(ee,"__esModule",{value:!0}),ne.BASE=2166136261;function ne(ae,ce=ne.BASE){const le=ae.length;for(let ue=0;ue<le;ue++)ce^=ae.charCodeAt(ue),ce+=(ce<<1)+(ce<<4)+(ce<<7)+(ce<<8)+(ce<<24);return ce>>>0}ee.default=ne,re.exports=ne})(fnv1a,fnv1a.exports);var fnv1aExports=fnv1a.exports;const hash$1=getDefaultExportFromCjs(fnv1aExports),IconCache=React.createContext({}),useIconCache=()=>React.useContext(IconCache),withIcon=(re,ee)=>{const ne=ae=>{const{size:ce=30,viewBox:le=ee}=ae,ue=useIconCache(),he=ue[re];let fe;return he||(fe="icon-"+hash$1(re).toString(16),ue[re]=fe),jsx$1("svg",{viewBox:`0 0 ${le||ce} ${le||ce}`,width:ce,height:ce,fill:"none",dangerouslySetInnerHTML:{__html:he?`<use href="#${he}" />`:`<g id="${fe}">${re}</g>`}})};return reactExports.memo(ne)},IndexerStatus=`
<circle cx="15" cy="15" r="10" fill="#E81224" stroke="none" />
`;withIcon(IndexerStatus);const BurnIcon=withIcon(`<svg>
  <path d="M9.66 2.67c-.13.6-.26 1.2-.15 1.76.08.39.29.78.84 1.1l.16-.38.24-.64.63.34.25.16a7.07 7.07 0 0 1 2.14 2.12c1 1.55 1.53 3.83-.12 6.79a.62.62 0 0 1-.8.24.54.54 0 0 1-.26-.75c1.45-2.6.95-4.48.15-5.7-.4-.64-.9-1.12-1.3-1.44l-.1-.08a3.2 3.2 0 0 1-.07.13c-.06.1-.17.26-.33.38l-.27.2-.32-.13C9.08 6.28 8.5 5.5 8.33 4.63a3.83 3.83 0 0 1-.02-1.26 3.79 3.79 0 0 0-2.3 2.15 5.48 5.48 0 0 0 .14 3.8l.45 1.27-1.3-.6a4.84 4.84 0 0 1-1.6-1.43 8.76 8.76 0 0 1-.4-.54 3.2 3.2 0 0 0-.73 2.77c.2 1.09.86 2.04 1.32 2.5.22.22.2.57-.04.78-.24.2-.62.2-.85-.03a6.26 6.26 0 0 1-1.61-3.06 4.37 4.37 0 0 1 1.65-4.32l.67-.57.3.8c.03.09.24.46.56.89-.1-.9-.01-1.8.32-2.64.57-1.46 1.86-2.62 4.04-3.12l.93-.22-.2.87Z"/>
</svg>`,16),GenerativeIcon=withIcon(`
  <circle cx="15" cy="15" r="14.25" fill="var(--text-color)" stroke="var(--background-color)"/>
  <path fill="var(--background-color)" d="m10.6 13.34-3.3 1.7v.06l3.3 1.7v.92h-.15l-4.24-2.3v-.7l4.24-2.3h.14v.92Zm6.18-3.98h1l-4.15 11.51h-1l4.15-11.5Zm2.85 3.06 4.24 2.3v.7l-4.24 2.3h-.14v-.92l3.3-1.7v-.06l-3.3-1.7v-.92h.14Z"/>
  <path fill="var(--background-color)" d="m10.6 13.34.18.35.21-.11v-.24h-.4Zm-3.3 1.7-.2-.36-.2.12v.24h.4Zm0 .06h-.4v.24l.2.12.2-.36Zm3.3 1.7h.4v-.24l-.22-.11-.19.35Zm0 .92v.4h.4v-.4h-.4Zm-.15 0-.2.35.1.05h.1v-.4Zm-4.24-2.3h-.4v.24l.21.12.2-.36Zm0-.7-.19-.36-.2.12v.24h.4Zm4.24-2.3v-.4h-.1l-.1.05.2.35Zm.14 0h.4v-.4h-.4v.4Zm-.18.56-3.3 1.7.37.72 3.3-1.7-.37-.72Zm-3.52 2.06v.06h.8v-.06h-.8Zm.22.42 3.3 1.7.37-.71-3.3-1.7-.37.7Zm3.08 1.34v.92h.8v-.92h-.8Zm.4.52h-.14v.8h.14v-.8Zm.05.04L6.4 15.07l-.38.7 4.24 2.3.38-.7ZM6.6 15.42v-.7h-.8v.7h.8Zm-.2-.35 4.23-2.3-.38-.7-4.24 2.3.38.7Zm4.04-2.25h.14v-.8h-.14v.8Zm-.26-.4v.92h.8v-.92h-.8Zm6.59-3.06v-.4h-.28l-.1.27.38.13Zm1 0 .38.14.2-.54h-.58v.4Zm-4.15 11.51v.4h.28l.1-.26-.38-.14Zm-1 0-.38-.13-.2.53h.57v-.4Zm4.15-11.1h1v-.8h-1v.8Zm.63-.54-4.15 11.5.75.28L18.16 9.5l-.75-.27Zm-3.78 11.24h-1v.8h1v-.8Zm-.63.54L17.15 9.5l-.75-.27-4.15 11.5.75.28Zm6.63-8.59.19-.35-.09-.05h-.1v.4Zm4.24 2.3h.4v-.24l-.21-.12-.2.36Zm0 .7.19.36.2-.12v-.24h-.4Zm-4.24 2.3v.4h.1l.09-.05-.19-.35Zm-.14 0h-.4v.4h.4v-.4Zm0-.92-.19-.35-.21.11v.24h.4Zm3.3-1.7.2.36.2-.12v-.24h-.4Zm0-.06h.4v-.24l-.2-.12-.2.36Zm-3.3-1.7h-.4v.24l.21.11.19-.35Zm0-.92v-.4h-.4v.4h.4Zm-.05.36 4.24 2.29.38-.7-4.24-2.3-.38.7Zm4.03 1.94v.7h.8v-.7h-.8Zm.2.35-4.23 2.3.38.7 4.24-2.3-.38-.7Zm-4.04 2.25h-.14v.8h.14v-.8Zm.26.4v-.92h-.8v.92h.8Zm-.22-.56 3.31-1.7-.36-.72-3.32 1.7.37.72Zm3.53-2.06v-.06h-.8v.06h.8Zm-.22-.42-3.31-1.7-.37.71 3.32 1.7.36-.7Zm-3.1-1.34v-.92h-.8v.92h.8Zm-.4-.52h.15v-.8h-.14v.8Z"/>
`),SwapIcon=withIcon(`
<path d="M1.97 1.97a.56.56 0 0 1 .44-.16l5.5.36c.14 0 .27.06.37.16l5.63 5.63c.4.4.4 1.06 0 1.46l-4.49 4.5c-.4.4-1.05.4-1.46 0L2.33 8.27a.56.56 0 0 1-.16-.36L1.8 2.4a.56.56 0 0 1 .16-.44Zm1.3 5.66 5.42 5.42 4.36-4.36-5.41-5.42-4.67-.3.3 4.66Z"/>
`,16),TezosIcon=withIcon(`<path 
      fill="var(--text-color)" 
      d="M9.23 11.96a4.18 4.18 0 0 0 1.12-.16v.9a3.75 3.75 0 0 1-1.36.23c-.63 0-1.12-.16-1.47-.49-.34-.34-.51-.91-.51-1.72V6.57H6v-.56l1.06-.44L7.48 4h.69v1.64h7.57v.8l-3.15 3.35c1.21.06 2.09.36 2.62.89.53.52.79 1.23.79 2.12a3.3 3.3 0 0 1-.41 1.67c-.27.49-.67.86-1.2 1.13-.51.28-1.14.4-1.87.4-.95 0-1.78-.16-2.5-.47v-1.08a5.53 5.53 0 0 0 2.43.56c.8 0 1.39-.21 1.78-.64.39-.42.58-.96.58-1.61 0-.65-.22-1.15-.65-1.5-.43-.37-1.15-.55-2.14-.55h-.8v-.88l3.05-3.26h-6.1v4.1c0 .86.35 1.29 1.06 1.29Z" 
      />`,16),MintedIcon=withIcon(`
<path d="M7 2.63a1.07 1.07 0 0 1 2.03 0l1.01 3.12h3.28c1.03 0 1.46 1.32.63 1.93l-2.66 1.93 1.02 3.11c.32.99-.81 1.8-1.65 1.2l-2.65-1.93-2.65 1.93c-.84.6-1.96-.21-1.65-1.2l1.02-3.11-2.65-1.93c-.84-.6-.41-1.93.62-1.93h3.28L7 2.63Zm1.01.4-1 3.07c-.14.44-.55.74-1.01.74H2.77l2.61 1.9c.38.27.53.75.39 1.19l-1 3.07 2.61-1.9c.38-.27.88-.27 1.26 0l2.6 1.9-.99-3.07a1.1 1.1 0 0 1 .39-1.2l2.6-1.89h-3.22c-.46 0-.87-.3-1.01-.74L8 3.03Z"/>
`,16),TradeIcon=withIcon(`
<path d="M2.95 8.39v2.5c0 .34-.25.61-.56.61-.3 0-.56-.27-.56-.6V6.94c0-.34.25-.6.56-.6h3.67c.3 0 .56.26.56.6 0 .33-.25.6-.56.6H3.75l5.33 5.75c.22.24.22.62 0 .86a.53.53 0 0 1-.8 0L2.96 8.39Zm9.55 1.26-.02-.03-6.02-6.5a.64.64 0 0 1 0-.85.53.53 0 0 1 .79 0l6 6.48V6.29c0-.33.25-.6.56-.6.31 0 .56.27.56.6v3.96c0 .33-.25.6-.56.6h-3.67c-.3 0-.56-.27-.56-.6 0-.33.25-.6.56-.6h2.36Z"/>
`,16),VideoIcon=withIcon(`<g transform="translate(-240.658 -193.721)"><circle cx="252.673" cy="205.713" r="8.119" fill="var(--text-color)"/><path fill="var(--background-color)" d="M252.658 195.721c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10Zm0 18c-4.41 0-8-3.59-8-8a8 8 0 0 1 3.558-6.65 7.954 7.954 0 0 1 4.442-1.35c4.41 0 8 3.59 8 8s-3.59 8-8 8Zm-2-3.5 6-4.5-6-4.5v9Z" paint-order="fill"/></g> 
`,24),SvgConfig=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",...re},reactExports.createElement("path",{fill:"current",fillRule:"evenodd",d:"M9.6 4a.6.6 0 0 0-1.2 0v.4H1a.6.6 0 0 0 0 1.2h7.4V6a.6.6 0 0 0 1.2 0V4Zm4 0v.4H15a.6.6 0 1 1 0 1.2h-1.4V6a.6.6 0 0 1-1.2 0v-.94a.6.6 0 0 1 0-.12V4a.6.6 0 1 1 1.2 0Zm-4 5.4V9a.6.6 0 0 0-1.2 0v.94a.6.6 0 0 0 0 .12V11a.6.6 0 1 0 1.2 0v-.4H15a.6.6 0 1 0 0-1.2H9.6ZM1 9.4a.6.6 0 0 0 0 1.2h3.4v.4a.6.6 0 1 0 1.2 0V9a.6.6 0 0 0-1.2 0v.4H1Z",clipRule:"evenodd"})),SvgChevron=re=>reactExports.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...re},reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.42583 11.4258C8.19151 11.6601 7.81161 11.6601 7.5773 11.4258L2.5773 6.42583C2.34298 6.19151 2.34298 5.81161 2.5773 5.5773C2.81161 5.34298 3.19151 5.34298 3.42583 5.5773L8.00156 10.153L12.5773 5.5773C12.8116 5.34298 13.1915 5.34298 13.4258 5.5773C13.6601 5.81161 13.6601 6.19151 13.4258 6.42583L8.42583 11.4258Z",fill:"current"})),SvgEvents=re=>reactExports.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...re},reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.39844 2.99844C1.39844 2.11478 2.11478 1.39844 2.99844 1.39844H12.9984C13.8821 1.39844 14.5984 2.11478 14.5984 2.99844V5.99844C14.5984 6.88209 13.8821 7.59844 12.9984 7.59844H2.99844C2.11478 7.59844 1.39844 6.88209 1.39844 5.99844V2.99844ZM2.99844 2.59844C2.77752 2.59844 2.59844 2.77752 2.59844 2.99844V5.99844C2.59844 6.21935 2.77752 6.39844 2.99844 6.39844H12.9984C13.2194 6.39844 13.3984 6.21935 13.3984 5.99844V2.99844C13.3984 2.77752 13.2194 2.59844 12.9984 2.59844H2.99844ZM1.39844 9.99844C1.39844 9.66707 1.66707 9.39844 1.99844 9.39844L13.9984 9.39844C14.3298 9.39844 14.5984 9.66707 14.5984 9.99844C14.5984 10.3298 14.3298 10.5984 13.9984 10.5984L1.99844 10.5984C1.66707 10.5984 1.39844 10.3298 1.39844 9.99844ZM1.99844 12.3984C1.66707 12.3984 1.39844 12.6671 1.39844 12.9984C1.39844 13.3298 1.66707 13.5984 1.99844 13.5984L13.9984 13.5984C14.3298 13.5984 14.5984 13.3298 14.5984 12.9984C14.5984 12.6671 14.3298 12.3984 13.9984 12.3984L1.99844 12.3984Z",fill:"current"})),SvgMasonry=re=>reactExports.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...re},reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.99844 0.398438C1.11478 0.398438 0.398438 1.11478 0.398438 1.99844V6.99844C0.398438 7.88209 1.11478 8.59844 1.99844 8.59844H7.99844C8.88209 8.59844 9.59844 7.88209 9.59844 6.99844V1.99844C9.59844 1.11478 8.88209 0.398438 7.99844 0.398438H1.99844ZM1.59844 1.99844C1.59844 1.77752 1.77752 1.59844 1.99844 1.59844H7.99844C8.21935 1.59844 8.39844 1.77752 8.39844 1.99844V6.99844C8.39844 7.21935 8.21935 7.39844 7.99844 7.39844H1.99844C1.77752 7.39844 1.59844 7.21935 1.59844 6.99844V1.99844ZM12.9984 0.398438C12.1148 0.398438 11.3984 1.11478 11.3984 1.99844V6.99844C11.3984 7.88209 12.1148 8.59844 12.9984 8.59844H13.9984C14.8821 8.59844 15.5984 7.88209 15.5984 6.99844V1.99844C15.5984 1.11478 14.8821 0.398438 13.9984 0.398438H12.9984ZM12.5984 1.99844C12.5984 1.77752 12.7775 1.59844 12.9984 1.59844H13.9984C14.2194 1.59844 14.3984 1.77752 14.3984 1.99844V6.99844C14.3984 7.21935 14.2194 7.39844 13.9984 7.39844H12.9984C12.7775 7.39844 12.5984 7.21935 12.5984 6.99844V1.99844ZM0.398438 11.9984C0.398438 11.1148 1.11478 10.3984 1.99844 10.3984H3.99844C4.88209 10.3984 5.59844 11.1148 5.59844 11.9984V13.9984C5.59844 14.8821 4.88209 15.5984 3.99844 15.5984H1.99844C1.11478 15.5984 0.398438 14.8821 0.398438 13.9984V11.9984ZM1.99844 11.5984C1.77752 11.5984 1.59844 11.7775 1.59844 11.9984V13.9984C1.59844 14.2194 1.77752 14.3984 1.99844 14.3984H3.99844C4.21935 14.3984 4.39844 14.2194 4.39844 13.9984V11.9984C4.39844 11.7775 4.21935 11.5984 3.99844 11.5984H1.99844ZM8.99844 10.3984C8.11478 10.3984 7.39844 11.1148 7.39844 11.9984V13.9984C7.39844 14.8821 8.11478 15.5984 8.99844 15.5984H13.9984C14.8821 15.5984 15.5984 14.8821 15.5984 13.9984V11.9984C15.5984 11.1148 14.8821 10.3984 13.9984 10.3984H8.99844ZM8.59844 11.9984C8.59844 11.7775 8.77752 11.5984 8.99844 11.5984H13.9984C14.2194 11.5984 14.3984 11.7775 14.3984 11.9984V13.9984C14.3984 14.2194 14.2194 14.3984 13.9984 14.3984H8.99844C8.77752 14.3984 8.59844 14.2194 8.59844 13.9984V11.9984Z",fill:"current"})),SvgSingleView=re=>reactExports.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...re},reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.398438 1.99844C0.398438 1.11478 1.11478 0.398438 1.99844 0.398438H13.9984C14.8821 0.398438 15.5984 1.11478 15.5984 1.99844V13.9984C15.5984 14.8821 14.8821 15.5984 13.9984 15.5984H1.99844C1.11478 15.5984 0.398438 14.8821 0.398438 13.9984V1.99844ZM1.99844 1.59844C1.77752 1.59844 1.59844 1.77752 1.59844 1.99844V13.9984C1.59844 14.2194 1.77752 14.3984 1.99844 14.3984H13.9984C14.2194 14.3984 14.3984 14.2194 14.3984 13.9984V1.99844C14.3984 1.77752 14.2194 1.59844 13.9984 1.59844H1.99844Z",fill:"current"})),SvgPlay=re=>reactExports.createElement("svg",{viewBox:"0 0 24 24",...re},reactExports.createElement("path",{fill:"current",d:"M3.9 18.9V5.1c0-1.6 1.7-2.6 3-1.8l12 6.9c1.4.8 1.4 2.9 0 3.7l-12 6.9c-1.3.7-3-.3-3-1.9z"})),SvgPause=re=>reactExports.createElement("svg",{viewBox:"0 0 32 32",...re},reactExports.createElement("path",{fill:"current",d:"M20 4h8v24h-8zM4 4h8v24H4z"})),SvgClose=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 145.2 145.2",...re},reactExports.createElement("path",{fill:"current",d:"M145.2 15.7 129.8.3l-57.1 57-57-57L.3 15.7l57 57-57 57.1 15.4 15.4 57-57 57.1 57 15.4-15.4-57-57.1z"})),SvgFullscreenEnter=re=>reactExports.createElement("svg",{viewBox:"0 0 14 14",...re},reactExports.createElement("path",{fill:"current",d:"M0 11h3v3h2V9H0v2Zm3-8H0v2h5V0H3v3Zm6 11h2v-3h3V9H9v5Zm2-11V0H9v5h5V3h-3Z"})),SvgFullscreenExit=re=>reactExports.createElement("svg",{viewBox:"0 0 14 14",...re},reactExports.createElement("path",{fill:"current",d:"M2 9H0v5h5v-2H2V9ZM0 5h2V2h3V0H0v5Zm12 7H9v2h5V9h-2v3ZM9 0v2h3v3h2V0H9Z"})),SvgEnterAnav=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:64,...re},reactExports.createElement("path",{d:"M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480h80q0 115 72.5 203T418-166l-58-58 56-56L598-98q-29 10-58.5 14T480-80Zm20-280v-240h120q17 0 28.5 11.5T660-560v160q0 17-11.5 28.5T620-360H500Zm-200 0v-60h100v-40h-60v-40h60v-40H300v-60h120q17 0 28.5 11.5T460-560v160q0 17-11.5 28.5T420-360H300Zm260-60h40v-120h-40v120Zm240-60q0-115-72.5-203T542-794l58 58-56 56-182-182q29-10 58.5-14t59.5-4q83 0 156 31.5T763-763q54 54 85.5 127T880-480h-80Z"})),SvgTeiaDao=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:280,height:128,...re},reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"null",d:"M72.825 8.864H15.5V61.29h57.325v57.847h53.47l-.001-57.847H264.5V8.864H126.294V61.29H72.825V8.864zm113.268 20.73v13.56h2.862v-13.56h3.62v-2.386h-10.102v2.386h3.62zm13.626-2.386v15.946h9.408v-2.386h-6.547V36.06h5.116v-2.387h-5.116v-4.079h6.547v-2.386h-9.408zm17.073 15.946v-2.386h2.927V29.594h-2.927v-2.386h8.714v2.386h-2.926v11.174h2.926v2.386h-8.714zm16.054-1.518-.369 1.518h2.949l.715-3.254h3.641l.715 3.254h2.95l-3.838-15.946h-3.295l-1.28 5.315-2.188 9.113zm5.354-9.113 1.084 4.99h-2.645l1.084-4.99a7.677 7.677 0 0 0 .108-.564l.13-.564a7.677 7.677 0 0 1 .109.564l.13.564z",clipRule:"evenodd"})),RotatingLogoSVG=[SvgAcidmanhattan01,SvgAcidmanhattan02,SvgAfrizalRizki01,SvgAlterebro01,SvgAlterebro02,SvgAlterebro03,SvgAnnekatrinenderlein01,SvgBurkabayram01,SvgCarolyn01,SvgCryptemes01,SvgDjkero01,SvgImnot01,SvgSantiagoItzcoatl01,SvgSantiagoItzcoatl02,SvgKlausJoerres01,SvgSpencerLinkous03,SvgMaes02,SvgMumuthestan02,SvgMumuthestan03,SvgMumuthestan04,SvgNatived01,SvgNorulesjustfeels07,Svg111V1Ab01,Svg111V1Ab02,SvgOviy01,SvgOviy02,SvgPilhei01,SvgHermanPretorius01,SvgQizzio02,SvgRodicqart01,SvgKerimSafa01,Svg33301,SvgVarda01,SvgVarda02,SvgSimoneVirgini01,SvgChristianWaadt02,SvgChristianWaadt03,SvgWans01,SvgYazid01,SvgActiveprinciple01,SvgActiveprinciple02,SvgActiveprinciple03,SvgActiveprinciple04,SvgActiveprinciple05,SvgActiveprinciple06,SvgBentameleon01,SvgFakeart01,SvgHeracles01,SvgHoroMox01,SvgHoroMox03,SvgIcecreamgreezer01,SvgJeanSaucisse01,SvgJudoKazate01,SvgJulioGlatt01,SvgJulioGlatt02,SvgJulioGlatt03,SvgJulioGlatt04,SvgJulioGlatt05,SvgJulioGlatt06,SvgLukaPiskore01,SvgLululi02,SvgMaes01,SvgMaliciousSheep01,SvgMarkKnol01,SvgMarquesa01,SvgMarquesa02,SvgMerchantCoppola01,SvgMerchantCoppola02,SvgMightymoss01,SvgMiusoph01,SvgMiusoph02,SvgQizzio01,SvgRkhairunnas01,SvgSantiagoItzcoatl03,SvgSantiagoItzcoatl04,SvgSomfay03,SvgSpencerLinkous01,SvgSpencerLinkous02,SvgSpencerLinkous04,SvgSpencerLinkous05,SvgTamasAntal01,SvgThequrator01,SvgTofudog01,SvgTofudog02,SvgTxchiDu01,SvgViscous01,SvgWans02,SvgZootghost01,SvgHanneMaes01],RotatingLogo=({className:re,seed:ee=1})=>{const ne=reactExports.useMemo(()=>RotatingLogoSVG[Math.floor(randomSeed(ee)*RotatingLogoSVG.length)],[ee]);return jsx$1("div",{className:styles$W.container,children:jsx$1(ne,{fill:"var(--text-color)",width:"132px"})})},RotatingLogo$1=reactExports.memo(RotatingLogo),horizontal="_horizontal_qh7uj_1",vertical$1="_vertical_qh7uj_7",styles$V={horizontal,vertical:vertical$1},Line=({vertical:re,className:ee,style:ne})=>{const ae=classNames$1({[styles$V.vertical]:re,[styles$V.horizontal]:!re});return jsx$1("hr",{style:ne,className:`${ee||""} ${ae} `})};function shallow(re,ee){if(Object.is(re,ee))return!0;if(typeof re!="object"||re===null||typeof ee!="object"||ee===null)return!1;if(re instanceof Map&&ee instanceof Map){if(re.size!==ee.size)return!1;for(const[ae,ce]of re)if(!Object.is(ce,ee.get(ae)))return!1;return!0}if(re instanceof Set&&ee instanceof Set){if(re.size!==ee.size)return!1;for(const ae of re)if(!ee.has(ae))return!1;return!0}const ne=Object.keys(re);if(ne.length!==Object.keys(ee).length)return!1;for(let ae=0;ae<ne.length;ae++)if(!Object.prototype.hasOwnProperty.call(ee,ne[ae])||!Object.is(re[ne[ae]],ee[ne[ae]]))return!1;return!0}const Footer=({menu:re,pin:ee})=>{const{language:ne}=useLanguage();useUserStore(ve=>ve.address);const[ae,ce]=reactExports.useState(3);useLocalSettings(ve=>[ve.zen,ve.setZen],shallow);const[le,ue]=useLocalSettings(ve=>[ve.theme,ve.toggleTheme],shallow),{logos:he}=useSettings(),fe=()=>({initial:{opacity:0,y:100,transition:{duration:.2,ease:"easeOut"}},animate:{opacity:1,y:0,transition:{duration:.2,ease:"easeOut"}},exit:{opacity:0,y:100,transition:{duration:.2,ease:"easeInOut"}}}),me=classNames$1({[styles$Z.container]:!0,[styles$Z.pinned]:ee}),ge=classNames$1({[styles$Z.content]:!0,[styles$Z.minimal]:!re});return jsxs(motion.div,{...fe(),className:me,children:[jsx$1(Line,{}),jsxs(motion.footer,{...fe(),className:ge,children:[jsxs("div",{className:styles$Z.logo,children:["Teia DAO LLC.",re&&jsx$1(Fragment,{children:jsx$1(Button,{alt:"teia rotating logo",onClick:()=>ce(Math.random()*100),children:jsx$1(RotatingLogo,{theme:le,logos:he,seed:ae})})}),jsx$1("a",{href:"https://tzkt.io/",children:"Powered by TzKT API"})]}),jsxs("div",{className:styles$Z.copyright,children:[jsx$1("div",{children:ne.footer.mint}),jsxs("div",{className:styles$Z.menuitems,children:[jsx$1(MenuItem,{className:styles$Z.menu_label_row,route:"about"}),jsx$1(MenuItem,{className:styles$Z.menu_label_row,label:"F.A.Q",route:"faq"}),jsx$1(MenuItem,{className:styles$Z.menu_label_row,label:"Core Values",route:"corevalues"}),jsx$1(MenuItem,{className:styles$Z.menu_label_row,label:"Code of Conduct",route:"codeofconduct"}),jsx$1(MenuItem,{className:styles$Z.menu_label_row,label:"Terms and Conditions",route:"terms"}),jsx$1(MenuItem,{className:styles$Z.menu_label_row,label:"Privacy Policy",route:"privacypolicy"})]})]}),re&&jsxs(Fragment,{children:[jsx$1("div",{className:styles$Z.menus,children:jsx$1(Line,{vertical:!0})}),!1]}),!1]})]})},Page=({title:re,children:ee,feed:ne,className:ae})=>{const ce=classNames$1({[styles$_.container]:!0,[styles$_.feed]:ne});return useTitle(re),jsxs(Fragment,{children:[jsx$1(FeedbackComponent,{}),jsx$1(motion.main,{initial:"hidden",animate:"visible",exit:"exit",variants:containerVariants,className:`${ce} ${ae||""}`,children:jsx$1(motion.div,{className:`${styles$_.content} no-fool`,children:ee})}),jsx$1(AnimatePresence,{children:jsx$1(Footer,{menu:!0})})]})},container$w="_container_1doqe_216",large$1="_large_1doqe_224",xlarge="_xlarge_1doqe_229",styles$U={container:container$w,large:large$1,xlarge},Container$2=({children:re=null,large:ee=!1,xlarge:ne=!1})=>{const ae=classNames$1({[styles$U.container]:!0,[styles$U.large]:ee,[styles$U.xlarge]:ne});return jsx$1("div",{className:ae,children:re})},Container$3=reactExports.memo(Container$2),status_to_string={404:"This page doesn't exist!",401:"You aren't authorized to see this",503:"Looks like our API is down",418:"🫖",default:"Something went wrong"};function RootErrorBoundary({title:re,msg:ee}){const ne=useRouteError();let ae="";return isRouteErrorResponse(ne)&&(ae=lodashExports.get(status_to_string,ne.status)),ae||(ae=status_to_string.default),jsx$1(Page,{title:"Error",children:jsxs("div",{className:styles$13.container,children:[jsxs("div",{className:styles$13.msg_box,children:[jsx$1("h1",{children:re||(ne==null?void 0:ne.cause)||ae}),jsx$1("p",{children:(ne==null?void 0:ne.message)||ee})]}),jsx$1(Button,{href:"https://github.com/teia-community/teia-ui/issues",children:jsx$1("strong",{children:"Report Issue"})}),jsx$1(Button,{to:"/",children:"Go back home"})]})})}var dist={},browserPonyfill={exports:{}};(function(re,ee){var ne=function(){function ce(){this.fetch=!1,this.DOMException=globalThis.DOMException}return ce.prototype=globalThis,new ce}();(function(ce){(function(le){var ue={searchParams:"URLSearchParams"in ce,iterable:"Symbol"in ce&&"iterator"in Symbol,blob:"FileReader"in ce&&"Blob"in ce&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in ce,arrayBuffer:"ArrayBuffer"in ce};function he(Ue){return Ue&&DataView.prototype.isPrototypeOf(Ue)}if(ue.arrayBuffer)var fe=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],me=ArrayBuffer.isView||function(Ue){return Ue&&fe.indexOf(Object.prototype.toString.call(Ue))>-1};function ge(Ue){if(typeof Ue!="string"&&(Ue=String(Ue)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(Ue))throw new TypeError("Invalid character in header field name");return Ue.toLowerCase()}function ve(Ue){return typeof Ue!="string"&&(Ue=String(Ue)),Ue}function ye(Ue){var ze={next:function(){var He=Ue.shift();return{done:He===void 0,value:He}}};return ue.iterable&&(ze[Symbol.iterator]=function(){return ze}),ze}function be(Ue){this.map={},Ue instanceof be?Ue.forEach(function(ze,He){this.append(He,ze)},this):Array.isArray(Ue)?Ue.forEach(function(ze){this.append(ze[0],ze[1])},this):Ue&&Object.getOwnPropertyNames(Ue).forEach(function(ze){this.append(ze,Ue[ze])},this)}be.prototype.append=function(Ue,ze){Ue=ge(Ue),ze=ve(ze);var He=this.map[Ue];this.map[Ue]=He?He+", "+ze:ze},be.prototype.delete=function(Ue){delete this.map[ge(Ue)]},be.prototype.get=function(Ue){return Ue=ge(Ue),this.has(Ue)?this.map[Ue]:null},be.prototype.has=function(Ue){return this.map.hasOwnProperty(ge(Ue))},be.prototype.set=function(Ue,ze){this.map[ge(Ue)]=ve(ze)},be.prototype.forEach=function(Ue,ze){for(var He in this.map)this.map.hasOwnProperty(He)&&Ue.call(ze,this.map[He],He,this)},be.prototype.keys=function(){var Ue=[];return this.forEach(function(ze,He){Ue.push(He)}),ye(Ue)},be.prototype.values=function(){var Ue=[];return this.forEach(function(ze){Ue.push(ze)}),ye(Ue)},be.prototype.entries=function(){var Ue=[];return this.forEach(function(ze,He){Ue.push([He,ze])}),ye(Ue)},ue.iterable&&(be.prototype[Symbol.iterator]=be.prototype.entries);function Ee(Ue){if(Ue.bodyUsed)return Promise.reject(new TypeError("Already read"));Ue.bodyUsed=!0}function Ce(Ue){return new Promise(function(ze,He){Ue.onload=function(){ze(Ue.result)},Ue.onerror=function(){He(Ue.error)}})}function Se(Ue){var ze=new FileReader,He=Ce(ze);return ze.readAsArrayBuffer(Ue),He}function Te(Ue){var ze=new FileReader,He=Ce(ze);return ze.readAsText(Ue),He}function ke(Ue){for(var ze=new Uint8Array(Ue),He=new Array(ze.length),Ye=0;Ye<ze.length;Ye++)He[Ye]=String.fromCharCode(ze[Ye]);return He.join("")}function Ne(Ue){if(Ue.slice)return Ue.slice(0);var ze=new Uint8Array(Ue.byteLength);return ze.set(new Uint8Array(Ue)),ze.buffer}function Fe(){return this.bodyUsed=!1,this._initBody=function(Ue){this._bodyInit=Ue,Ue?typeof Ue=="string"?this._bodyText=Ue:ue.blob&&Blob.prototype.isPrototypeOf(Ue)?this._bodyBlob=Ue:ue.formData&&FormData.prototype.isPrototypeOf(Ue)?this._bodyFormData=Ue:ue.searchParams&&URLSearchParams.prototype.isPrototypeOf(Ue)?this._bodyText=Ue.toString():ue.arrayBuffer&&ue.blob&&he(Ue)?(this._bodyArrayBuffer=Ne(Ue.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):ue.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(Ue)||me(Ue))?this._bodyArrayBuffer=Ne(Ue):this._bodyText=Ue=Object.prototype.toString.call(Ue):this._bodyText="",this.headers.get("content-type")||(typeof Ue=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):ue.searchParams&&URLSearchParams.prototype.isPrototypeOf(Ue)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},ue.blob&&(this.blob=function(){var Ue=Ee(this);if(Ue)return Ue;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Ee(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Se)}),this.text=function(){var Ue=Ee(this);if(Ue)return Ue;if(this._bodyBlob)return Te(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(ke(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},ue.formData&&(this.formData=function(){return this.text().then(Be)}),this.json=function(){return this.text().then(JSON.parse)},this}var De=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Oe(Ue){var ze=Ue.toUpperCase();return De.indexOf(ze)>-1?ze:Ue}function Re(Ue,ze){ze=ze||{};var He=ze.body;if(Ue instanceof Re){if(Ue.bodyUsed)throw new TypeError("Already read");this.url=Ue.url,this.credentials=Ue.credentials,ze.headers||(this.headers=new be(Ue.headers)),this.method=Ue.method,this.mode=Ue.mode,this.signal=Ue.signal,!He&&Ue._bodyInit!=null&&(He=Ue._bodyInit,Ue.bodyUsed=!0)}else this.url=String(Ue);if(this.credentials=ze.credentials||this.credentials||"same-origin",(ze.headers||!this.headers)&&(this.headers=new be(ze.headers)),this.method=Oe(ze.method||this.method||"GET"),this.mode=ze.mode||this.mode||null,this.signal=ze.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&He)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(He)}Re.prototype.clone=function(){return new Re(this,{body:this._bodyInit})};function Be(Ue){var ze=new FormData;return Ue.trim().split("&").forEach(function(He){if(He){var Ye=He.split("="),Xe=Ye.shift().replace(/\+/g," "),We=Ye.join("=").replace(/\+/g," ");ze.append(decodeURIComponent(Xe),decodeURIComponent(We))}}),ze}function Le(Ue){var ze=new be,He=Ue.replace(/\r?\n[\t ]+/g," ");return He.split(/\r?\n/).forEach(function(Ye){var Xe=Ye.split(":"),We=Xe.shift().trim();if(We){var Ze=Xe.join(":").trim();ze.append(We,Ze)}}),ze}Fe.call(Re.prototype);function je(Ue,ze){ze||(ze={}),this.type="default",this.status=ze.status===void 0?200:ze.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in ze?ze.statusText:"OK",this.headers=new be(ze.headers),this.url=ze.url||"",this._initBody(Ue)}Fe.call(je.prototype),je.prototype.clone=function(){return new je(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new be(this.headers),url:this.url})},je.error=function(){var Ue=new je(null,{status:0,statusText:""});return Ue.type="error",Ue};var Ge=[301,302,303,307,308];je.redirect=function(Ue,ze){if(Ge.indexOf(ze)===-1)throw new RangeError("Invalid status code");return new je(null,{status:ze,headers:{location:Ue}})},le.DOMException=ce.DOMException;try{new le.DOMException}catch{le.DOMException=function(ze,He){this.message=ze,this.name=He;var Ye=Error(ze);this.stack=Ye.stack},le.DOMException.prototype=Object.create(Error.prototype),le.DOMException.prototype.constructor=le.DOMException}function qe(Ue,ze){return new Promise(function(He,Ye){var Xe=new Re(Ue,ze);if(Xe.signal&&Xe.signal.aborted)return Ye(new le.DOMException("Aborted","AbortError"));var We=new XMLHttpRequest;function Ze(){We.abort()}We.onload=function(){var Vt={status:We.status,statusText:We.statusText,headers:Le(We.getAllResponseHeaders()||"")};Vt.url="responseURL"in We?We.responseURL:Vt.headers.get("X-Request-URL");var Qt="response"in We?We.response:We.responseText;He(new je(Qt,Vt))},We.onerror=function(){Ye(new TypeError("Network request failed"))},We.ontimeout=function(){Ye(new TypeError("Network request failed"))},We.onabort=function(){Ye(new le.DOMException("Aborted","AbortError"))},We.open(Xe.method,Xe.url,!0),Xe.credentials==="include"?We.withCredentials=!0:Xe.credentials==="omit"&&(We.withCredentials=!1),"responseType"in We&&ue.blob&&(We.responseType="blob"),Xe.headers.forEach(function(Vt,Qt){We.setRequestHeader(Qt,Vt)}),Xe.signal&&(Xe.signal.addEventListener("abort",Ze),We.onreadystatechange=function(){We.readyState===4&&Xe.signal.removeEventListener("abort",Ze)}),We.send(typeof Xe._bodyInit>"u"?null:Xe._bodyInit)})}return qe.polyfill=!0,ce.fetch||(ce.fetch=qe,ce.Headers=be,ce.Request=Re,ce.Response=je),le.Headers=be,le.Request=Re,le.Response=je,le.fetch=qe,Object.defineProperty(le,"__esModule",{value:!0}),le})({})})(ne),ne.fetch.ponyfill=!0,delete ne.fetch.polyfill;var ae=ne;ee=ae.fetch,ee.default=ae.fetch,ee.fetch=ae.fetch,ee.Headers=ae.Headers,ee.Request=ae.Request,ee.Response=ae.Response,re.exports=ee})(browserPonyfill,browserPonyfill.exports);var browserPonyfillExports=browserPonyfill.exports;function isObjectLike$4(re){return typeof re=="object"&&re!==null}function invariant(re,ee){if(!!!re)throw new Error(ee??"Unexpected invariant triggered.")}const LineRegExp=/\r\n|[\n\r]/g;function getLocation(re,ee){let ne=0,ae=1;for(const ce of re.body.matchAll(LineRegExp)){if(typeof ce.index=="number"||invariant(!1),ce.index>=ee)break;ne=ce.index+ce[0].length,ae+=1}return{line:ae,column:ee+1-ne}}function printLocation(re){return printSourceLocation(re.source,getLocation(re.source,re.start))}function printSourceLocation(re,ee){const ne=re.locationOffset.column-1,ae="".padStart(ne)+re.body,ce=ee.line-1,le=re.locationOffset.line-1,ue=ee.line+le,he=ee.line===1?ne:0,fe=ee.column+he,me=`${re.name}:${ue}:${fe}
`,ge=ae.split(/\r\n|[\n\r]/g),ve=ge[ce];if(ve.length>120){const ye=Math.floor(fe/80),be=fe%80,Ee=[];for(let Ce=0;Ce<ve.length;Ce+=80)Ee.push(ve.slice(Ce,Ce+80));return me+printPrefixedLines([[`${ue} |`,Ee[0]],...Ee.slice(1,ye+1).map(Ce=>["|",Ce]),["|","^".padStart(be)],["|",Ee[ye+1]]])}return me+printPrefixedLines([[`${ue-1} |`,ge[ce-1]],[`${ue} |`,ve],["|","^".padStart(fe)],[`${ue+1} |`,ge[ce+1]]])}function printPrefixedLines(re){const ee=re.filter(([ae,ce])=>ce!==void 0),ne=Math.max(...ee.map(([ae])=>ae.length));return ee.map(([ae,ce])=>ae.padStart(ne)+(ce?" "+ce:"")).join(`
`)}function toNormalizedOptions(re){const ee=re[0];return ee==null||"kind"in ee||"length"in ee?{nodes:ee,source:re[1],positions:re[2],path:re[3],originalError:re[4],extensions:re[5]}:ee}class GraphQLError extends Error{constructor(ee,...ne){var ae,ce,le;const{nodes:ue,source:he,positions:fe,path:me,originalError:ge,extensions:ve}=toNormalizedOptions(ne);super(ee),this.name="GraphQLError",this.path=me??void 0,this.originalError=ge??void 0,this.nodes=undefinedIfEmpty(Array.isArray(ue)?ue:ue?[ue]:void 0);const ye=undefinedIfEmpty((ae=this.nodes)===null||ae===void 0?void 0:ae.map(Ee=>Ee.loc).filter(Ee=>Ee!=null));this.source=he??(ye==null||(ce=ye[0])===null||ce===void 0?void 0:ce.source),this.positions=fe??(ye==null?void 0:ye.map(Ee=>Ee.start)),this.locations=fe&&he?fe.map(Ee=>getLocation(he,Ee)):ye==null?void 0:ye.map(Ee=>getLocation(Ee.source,Ee.start));const be=isObjectLike$4(ge==null?void 0:ge.extensions)?ge==null?void 0:ge.extensions:void 0;this.extensions=(le=ve??be)!==null&&le!==void 0?le:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),ge!=null&&ge.stack?Object.defineProperty(this,"stack",{value:ge.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,GraphQLError):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let ee=this.message;if(this.nodes)for(const ne of this.nodes)ne.loc&&(ee+=`

`+printLocation(ne.loc));else if(this.source&&this.locations)for(const ne of this.locations)ee+=`

`+printSourceLocation(this.source,ne);return ee}toJSON(){const ee={message:this.message};return this.locations!=null&&(ee.locations=this.locations),this.path!=null&&(ee.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(ee.extensions=this.extensions),ee}}function undefinedIfEmpty(re){return re===void 0||re.length===0?void 0:re}function syntaxError$1(re,ee,ne){return new GraphQLError(`Syntax Error: ${ne}`,{source:re,positions:[ee]})}class Location{constructor(ee,ne,ae){this.start=ee.start,this.end=ne.end,this.startToken=ee,this.endToken=ne,this.source=ae}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class Token{constructor(ee,ne,ae,ce,le,ue){this.kind=ee,this.start=ne,this.end=ae,this.line=ce,this.column=le,this.value=ue,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const QueryDocumentKeys={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},kindValues=new Set(Object.keys(QueryDocumentKeys));function isNode$2(re){const ee=re==null?void 0:re.kind;return typeof ee=="string"&&kindValues.has(ee)}var OperationTypeNode;(function(re){re.QUERY="query",re.MUTATION="mutation",re.SUBSCRIPTION="subscription"})(OperationTypeNode||(OperationTypeNode={}));var DirectiveLocation;(function(re){re.QUERY="QUERY",re.MUTATION="MUTATION",re.SUBSCRIPTION="SUBSCRIPTION",re.FIELD="FIELD",re.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",re.FRAGMENT_SPREAD="FRAGMENT_SPREAD",re.INLINE_FRAGMENT="INLINE_FRAGMENT",re.VARIABLE_DEFINITION="VARIABLE_DEFINITION",re.SCHEMA="SCHEMA",re.SCALAR="SCALAR",re.OBJECT="OBJECT",re.FIELD_DEFINITION="FIELD_DEFINITION",re.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",re.INTERFACE="INTERFACE",re.UNION="UNION",re.ENUM="ENUM",re.ENUM_VALUE="ENUM_VALUE",re.INPUT_OBJECT="INPUT_OBJECT",re.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(DirectiveLocation||(DirectiveLocation={}));var Kind;(function(re){re.NAME="Name",re.DOCUMENT="Document",re.OPERATION_DEFINITION="OperationDefinition",re.VARIABLE_DEFINITION="VariableDefinition",re.SELECTION_SET="SelectionSet",re.FIELD="Field",re.ARGUMENT="Argument",re.FRAGMENT_SPREAD="FragmentSpread",re.INLINE_FRAGMENT="InlineFragment",re.FRAGMENT_DEFINITION="FragmentDefinition",re.VARIABLE="Variable",re.INT="IntValue",re.FLOAT="FloatValue",re.STRING="StringValue",re.BOOLEAN="BooleanValue",re.NULL="NullValue",re.ENUM="EnumValue",re.LIST="ListValue",re.OBJECT="ObjectValue",re.OBJECT_FIELD="ObjectField",re.DIRECTIVE="Directive",re.NAMED_TYPE="NamedType",re.LIST_TYPE="ListType",re.NON_NULL_TYPE="NonNullType",re.SCHEMA_DEFINITION="SchemaDefinition",re.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",re.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",re.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",re.FIELD_DEFINITION="FieldDefinition",re.INPUT_VALUE_DEFINITION="InputValueDefinition",re.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",re.UNION_TYPE_DEFINITION="UnionTypeDefinition",re.ENUM_TYPE_DEFINITION="EnumTypeDefinition",re.ENUM_VALUE_DEFINITION="EnumValueDefinition",re.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",re.DIRECTIVE_DEFINITION="DirectiveDefinition",re.SCHEMA_EXTENSION="SchemaExtension",re.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",re.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",re.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",re.UNION_TYPE_EXTENSION="UnionTypeExtension",re.ENUM_TYPE_EXTENSION="EnumTypeExtension",re.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(Kind||(Kind={}));function isWhiteSpace(re){return re===9||re===32}function isDigit(re){return re>=48&&re<=57}function isLetter(re){return re>=97&&re<=122||re>=65&&re<=90}function isNameStart(re){return isLetter(re)||re===95}function isNameContinue(re){return isLetter(re)||isDigit(re)||re===95}function dedentBlockStringLines(re){var ee;let ne=Number.MAX_SAFE_INTEGER,ae=null,ce=-1;for(let ue=0;ue<re.length;++ue){var le;const he=re[ue],fe=leadingWhitespace(he);fe!==he.length&&(ae=(le=ae)!==null&&le!==void 0?le:ue,ce=ue,ue!==0&&fe<ne&&(ne=fe))}return re.map((ue,he)=>he===0?ue:ue.slice(ne)).slice((ee=ae)!==null&&ee!==void 0?ee:0,ce+1)}function leadingWhitespace(re){let ee=0;for(;ee<re.length&&isWhiteSpace(re.charCodeAt(ee));)++ee;return ee}function printBlockString(re,ee){const ne=re.replace(/"""/g,'\\"""'),ae=ne.split(/\r\n|[\n\r]/g),ce=ae.length===1,le=ae.length>1&&ae.slice(1).every(be=>be.length===0||isWhiteSpace(be.charCodeAt(0))),ue=ne.endsWith('\\"""'),he=re.endsWith('"')&&!ue,fe=re.endsWith("\\"),me=he||fe,ge=!(ee!=null&&ee.minimize)&&(!ce||re.length>70||me||le||ue);let ve="";const ye=ce&&isWhiteSpace(re.charCodeAt(0));return(ge&&!ye||le)&&(ve+=`
`),ve+=ne,(ge||me)&&(ve+=`
`),'"""'+ve+'"""'}var TokenKind;(function(re){re.SOF="<SOF>",re.EOF="<EOF>",re.BANG="!",re.DOLLAR="$",re.AMP="&",re.PAREN_L="(",re.PAREN_R=")",re.SPREAD="...",re.COLON=":",re.EQUALS="=",re.AT="@",re.BRACKET_L="[",re.BRACKET_R="]",re.BRACE_L="{",re.PIPE="|",re.BRACE_R="}",re.NAME="Name",re.INT="Int",re.FLOAT="Float",re.STRING="String",re.BLOCK_STRING="BlockString",re.COMMENT="Comment"})(TokenKind||(TokenKind={}));class Lexer{constructor(ee){const ne=new Token(TokenKind.SOF,0,0,0,0);this.source=ee,this.lastToken=ne,this.token=ne,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let ee=this.token;if(ee.kind!==TokenKind.EOF)do if(ee.next)ee=ee.next;else{const ne=readNextToken(this,ee.end);ee.next=ne,ne.prev=ee,ee=ne}while(ee.kind===TokenKind.COMMENT);return ee}}function isPunctuatorTokenKind(re){return re===TokenKind.BANG||re===TokenKind.DOLLAR||re===TokenKind.AMP||re===TokenKind.PAREN_L||re===TokenKind.PAREN_R||re===TokenKind.SPREAD||re===TokenKind.COLON||re===TokenKind.EQUALS||re===TokenKind.AT||re===TokenKind.BRACKET_L||re===TokenKind.BRACKET_R||re===TokenKind.BRACE_L||re===TokenKind.PIPE||re===TokenKind.BRACE_R}function isUnicodeScalarValue(re){return re>=0&&re<=55295||re>=57344&&re<=1114111}function isSupplementaryCodePoint(re,ee){return isLeadingSurrogate(re.charCodeAt(ee))&&isTrailingSurrogate(re.charCodeAt(ee+1))}function isLeadingSurrogate(re){return re>=55296&&re<=56319}function isTrailingSurrogate(re){return re>=56320&&re<=57343}function printCodePointAt(re,ee){const ne=re.source.body.codePointAt(ee);if(ne===void 0)return TokenKind.EOF;if(ne>=32&&ne<=126){const ae=String.fromCodePoint(ne);return ae==='"'?`'"'`:`"${ae}"`}return"U+"+ne.toString(16).toUpperCase().padStart(4,"0")}function createToken(re,ee,ne,ae,ce){const le=re.line,ue=1+ne-re.lineStart;return new Token(ee,ne,ae,le,ue,ce)}function readNextToken(re,ee){const ne=re.source.body,ae=ne.length;let ce=ee;for(;ce<ae;){const le=ne.charCodeAt(ce);switch(le){case 65279:case 9:case 32:case 44:++ce;continue;case 10:++ce,++re.line,re.lineStart=ce;continue;case 13:ne.charCodeAt(ce+1)===10?ce+=2:++ce,++re.line,re.lineStart=ce;continue;case 35:return readComment(re,ce);case 33:return createToken(re,TokenKind.BANG,ce,ce+1);case 36:return createToken(re,TokenKind.DOLLAR,ce,ce+1);case 38:return createToken(re,TokenKind.AMP,ce,ce+1);case 40:return createToken(re,TokenKind.PAREN_L,ce,ce+1);case 41:return createToken(re,TokenKind.PAREN_R,ce,ce+1);case 46:if(ne.charCodeAt(ce+1)===46&&ne.charCodeAt(ce+2)===46)return createToken(re,TokenKind.SPREAD,ce,ce+3);break;case 58:return createToken(re,TokenKind.COLON,ce,ce+1);case 61:return createToken(re,TokenKind.EQUALS,ce,ce+1);case 64:return createToken(re,TokenKind.AT,ce,ce+1);case 91:return createToken(re,TokenKind.BRACKET_L,ce,ce+1);case 93:return createToken(re,TokenKind.BRACKET_R,ce,ce+1);case 123:return createToken(re,TokenKind.BRACE_L,ce,ce+1);case 124:return createToken(re,TokenKind.PIPE,ce,ce+1);case 125:return createToken(re,TokenKind.BRACE_R,ce,ce+1);case 34:return ne.charCodeAt(ce+1)===34&&ne.charCodeAt(ce+2)===34?readBlockString(re,ce):readString(re,ce)}if(isDigit(le)||le===45)return readNumber(re,ce,le);if(isNameStart(le))return readName(re,ce);throw syntaxError$1(re.source,ce,le===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:isUnicodeScalarValue(le)||isSupplementaryCodePoint(ne,ce)?`Unexpected character: ${printCodePointAt(re,ce)}.`:`Invalid character: ${printCodePointAt(re,ce)}.`)}return createToken(re,TokenKind.EOF,ae,ae)}function readComment(re,ee){const ne=re.source.body,ae=ne.length;let ce=ee+1;for(;ce<ae;){const le=ne.charCodeAt(ce);if(le===10||le===13)break;if(isUnicodeScalarValue(le))++ce;else if(isSupplementaryCodePoint(ne,ce))ce+=2;else break}return createToken(re,TokenKind.COMMENT,ee,ce,ne.slice(ee+1,ce))}function readNumber(re,ee,ne){const ae=re.source.body;let ce=ee,le=ne,ue=!1;if(le===45&&(le=ae.charCodeAt(++ce)),le===48){if(le=ae.charCodeAt(++ce),isDigit(le))throw syntaxError$1(re.source,ce,`Invalid number, unexpected digit after 0: ${printCodePointAt(re,ce)}.`)}else ce=readDigits(re,ce,le),le=ae.charCodeAt(ce);if(le===46&&(ue=!0,le=ae.charCodeAt(++ce),ce=readDigits(re,ce,le),le=ae.charCodeAt(ce)),(le===69||le===101)&&(ue=!0,le=ae.charCodeAt(++ce),(le===43||le===45)&&(le=ae.charCodeAt(++ce)),ce=readDigits(re,ce,le),le=ae.charCodeAt(ce)),le===46||isNameStart(le))throw syntaxError$1(re.source,ce,`Invalid number, expected digit but got: ${printCodePointAt(re,ce)}.`);return createToken(re,ue?TokenKind.FLOAT:TokenKind.INT,ee,ce,ae.slice(ee,ce))}function readDigits(re,ee,ne){if(!isDigit(ne))throw syntaxError$1(re.source,ee,`Invalid number, expected digit but got: ${printCodePointAt(re,ee)}.`);const ae=re.source.body;let ce=ee+1;for(;isDigit(ae.charCodeAt(ce));)++ce;return ce}function readString(re,ee){const ne=re.source.body,ae=ne.length;let ce=ee+1,le=ce,ue="";for(;ce<ae;){const he=ne.charCodeAt(ce);if(he===34)return ue+=ne.slice(le,ce),createToken(re,TokenKind.STRING,ee,ce+1,ue);if(he===92){ue+=ne.slice(le,ce);const fe=ne.charCodeAt(ce+1)===117?ne.charCodeAt(ce+2)===123?readEscapedUnicodeVariableWidth(re,ce):readEscapedUnicodeFixedWidth(re,ce):readEscapedCharacter(re,ce);ue+=fe.value,ce+=fe.size,le=ce;continue}if(he===10||he===13)break;if(isUnicodeScalarValue(he))++ce;else if(isSupplementaryCodePoint(ne,ce))ce+=2;else throw syntaxError$1(re.source,ce,`Invalid character within String: ${printCodePointAt(re,ce)}.`)}throw syntaxError$1(re.source,ce,"Unterminated string.")}function readEscapedUnicodeVariableWidth(re,ee){const ne=re.source.body;let ae=0,ce=3;for(;ce<12;){const le=ne.charCodeAt(ee+ce++);if(le===125){if(ce<5||!isUnicodeScalarValue(ae))break;return{value:String.fromCodePoint(ae),size:ce}}if(ae=ae<<4|readHexDigit(le),ae<0)break}throw syntaxError$1(re.source,ee,`Invalid Unicode escape sequence: "${ne.slice(ee,ee+ce)}".`)}function readEscapedUnicodeFixedWidth(re,ee){const ne=re.source.body,ae=read16BitHexCode(ne,ee+2);if(isUnicodeScalarValue(ae))return{value:String.fromCodePoint(ae),size:6};if(isLeadingSurrogate(ae)&&ne.charCodeAt(ee+6)===92&&ne.charCodeAt(ee+7)===117){const ce=read16BitHexCode(ne,ee+8);if(isTrailingSurrogate(ce))return{value:String.fromCodePoint(ae,ce),size:12}}throw syntaxError$1(re.source,ee,`Invalid Unicode escape sequence: "${ne.slice(ee,ee+6)}".`)}function read16BitHexCode(re,ee){return readHexDigit(re.charCodeAt(ee))<<12|readHexDigit(re.charCodeAt(ee+1))<<8|readHexDigit(re.charCodeAt(ee+2))<<4|readHexDigit(re.charCodeAt(ee+3))}function readHexDigit(re){return re>=48&&re<=57?re-48:re>=65&&re<=70?re-55:re>=97&&re<=102?re-87:-1}function readEscapedCharacter(re,ee){const ne=re.source.body;switch(ne.charCodeAt(ee+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw syntaxError$1(re.source,ee,`Invalid character escape sequence: "${ne.slice(ee,ee+2)}".`)}function readBlockString(re,ee){const ne=re.source.body,ae=ne.length;let ce=re.lineStart,le=ee+3,ue=le,he="";const fe=[];for(;le<ae;){const me=ne.charCodeAt(le);if(me===34&&ne.charCodeAt(le+1)===34&&ne.charCodeAt(le+2)===34){he+=ne.slice(ue,le),fe.push(he);const ge=createToken(re,TokenKind.BLOCK_STRING,ee,le+3,dedentBlockStringLines(fe).join(`
`));return re.line+=fe.length-1,re.lineStart=ce,ge}if(me===92&&ne.charCodeAt(le+1)===34&&ne.charCodeAt(le+2)===34&&ne.charCodeAt(le+3)===34){he+=ne.slice(ue,le),ue=le+1,le+=4;continue}if(me===10||me===13){he+=ne.slice(ue,le),fe.push(he),me===13&&ne.charCodeAt(le+1)===10?le+=2:++le,he="",ue=le,ce=le;continue}if(isUnicodeScalarValue(me))++le;else if(isSupplementaryCodePoint(ne,le))le+=2;else throw syntaxError$1(re.source,le,`Invalid character within String: ${printCodePointAt(re,le)}.`)}throw syntaxError$1(re.source,le,"Unterminated string.")}function readName(re,ee){const ne=re.source.body,ae=ne.length;let ce=ee+1;for(;ce<ae;){const le=ne.charCodeAt(ce);if(isNameContinue(le))++ce;else break}return createToken(re,TokenKind.NAME,ee,ce,ne.slice(ee,ce))}function devAssert(re,ee){if(!!!re)throw new Error(ee)}const MAX_ARRAY_LENGTH=10,MAX_RECURSIVE_DEPTH=2;function inspect(re){return formatValue(re,[])}function formatValue(re,ee){switch(typeof re){case"string":return JSON.stringify(re);case"function":return re.name?`[function ${re.name}]`:"[function]";case"object":return formatObjectValue(re,ee);default:return String(re)}}function formatObjectValue(re,ee){if(re===null)return"null";if(ee.includes(re))return"[Circular]";const ne=[...ee,re];if(isJSONable(re)){const ae=re.toJSON();if(ae!==re)return typeof ae=="string"?ae:formatValue(ae,ne)}else if(Array.isArray(re))return formatArray(re,ne);return formatObject(re,ne)}function isJSONable(re){return typeof re.toJSON=="function"}function formatObject(re,ee){const ne=Object.entries(re);return ne.length===0?"{}":ee.length>MAX_RECURSIVE_DEPTH?"["+getObjectTag(re)+"]":"{ "+ne.map(([ce,le])=>ce+": "+formatValue(le,ee)).join(", ")+" }"}function formatArray(re,ee){if(re.length===0)return"[]";if(ee.length>MAX_RECURSIVE_DEPTH)return"[Array]";const ne=Math.min(MAX_ARRAY_LENGTH,re.length),ae=re.length-ne,ce=[];for(let le=0;le<ne;++le)ce.push(formatValue(re[le],ee));return ae===1?ce.push("... 1 more item"):ae>1&&ce.push(`... ${ae} more items`),"["+ce.join(", ")+"]"}function getObjectTag(re){const ee=Object.prototype.toString.call(re).replace(/^\[object /,"").replace(/]$/,"");if(ee==="Object"&&typeof re.constructor=="function"){const ne=re.constructor.name;if(typeof ne=="string"&&ne!=="")return ne}return ee}const instanceOf=function(ee,ne){return ee instanceof ne};let Source$1=class{constructor(ee,ne="GraphQL request",ae={line:1,column:1}){typeof ee=="string"||devAssert(!1,`Body must be a string. Received: ${inspect(ee)}.`),this.body=ee,this.name=ne,this.locationOffset=ae,this.locationOffset.line>0||devAssert(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||devAssert(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}};function isSource(re){return instanceOf(re,Source$1)}function parse$3(re,ee){return new Parser$1(re,ee).parseDocument()}function parseValue$1(re,ee){const ne=new Parser$1(re,ee);ne.expectToken(TokenKind.SOF);const ae=ne.parseValueLiteral(!1);return ne.expectToken(TokenKind.EOF),ae}function parseConstValue(re,ee){const ne=new Parser$1(re,ee);ne.expectToken(TokenKind.SOF);const ae=ne.parseConstValueLiteral();return ne.expectToken(TokenKind.EOF),ae}function parseType(re,ee){const ne=new Parser$1(re,ee);ne.expectToken(TokenKind.SOF);const ae=ne.parseTypeReference();return ne.expectToken(TokenKind.EOF),ae}let Parser$1=class{constructor(ee,ne={}){const ae=isSource(ee)?ee:new Source$1(ee);this._lexer=new Lexer(ae),this._options=ne,this._tokenCounter=0}parseName(){const ee=this.expectToken(TokenKind.NAME);return this.node(ee,{kind:Kind.NAME,value:ee.value})}parseDocument(){return this.node(this._lexer.token,{kind:Kind.DOCUMENT,definitions:this.many(TokenKind.SOF,this.parseDefinition,TokenKind.EOF)})}parseDefinition(){if(this.peek(TokenKind.BRACE_L))return this.parseOperationDefinition();const ee=this.peekDescription(),ne=ee?this._lexer.lookahead():this._lexer.token;if(ne.kind===TokenKind.NAME){switch(ne.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(ee)throw syntaxError$1(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(ne.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(ne)}parseOperationDefinition(){const ee=this._lexer.token;if(this.peek(TokenKind.BRACE_L))return this.node(ee,{kind:Kind.OPERATION_DEFINITION,operation:OperationTypeNode.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const ne=this.parseOperationType();let ae;return this.peek(TokenKind.NAME)&&(ae=this.parseName()),this.node(ee,{kind:Kind.OPERATION_DEFINITION,operation:ne,name:ae,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const ee=this.expectToken(TokenKind.NAME);switch(ee.value){case"query":return OperationTypeNode.QUERY;case"mutation":return OperationTypeNode.MUTATION;case"subscription":return OperationTypeNode.SUBSCRIPTION}throw this.unexpected(ee)}parseVariableDefinitions(){return this.optionalMany(TokenKind.PAREN_L,this.parseVariableDefinition,TokenKind.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:Kind.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(TokenKind.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(TokenKind.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const ee=this._lexer.token;return this.expectToken(TokenKind.DOLLAR),this.node(ee,{kind:Kind.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:Kind.SELECTION_SET,selections:this.many(TokenKind.BRACE_L,this.parseSelection,TokenKind.BRACE_R)})}parseSelection(){return this.peek(TokenKind.SPREAD)?this.parseFragment():this.parseField()}parseField(){const ee=this._lexer.token,ne=this.parseName();let ae,ce;return this.expectOptionalToken(TokenKind.COLON)?(ae=ne,ce=this.parseName()):ce=ne,this.node(ee,{kind:Kind.FIELD,alias:ae,name:ce,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(TokenKind.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(ee){const ne=ee?this.parseConstArgument:this.parseArgument;return this.optionalMany(TokenKind.PAREN_L,ne,TokenKind.PAREN_R)}parseArgument(ee=!1){const ne=this._lexer.token,ae=this.parseName();return this.expectToken(TokenKind.COLON),this.node(ne,{kind:Kind.ARGUMENT,name:ae,value:this.parseValueLiteral(ee)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const ee=this._lexer.token;this.expectToken(TokenKind.SPREAD);const ne=this.expectOptionalKeyword("on");return!ne&&this.peek(TokenKind.NAME)?this.node(ee,{kind:Kind.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(ee,{kind:Kind.INLINE_FRAGMENT,typeCondition:ne?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const ee=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(ee,{kind:Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(ee,{kind:Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(ee){const ne=this._lexer.token;switch(ne.kind){case TokenKind.BRACKET_L:return this.parseList(ee);case TokenKind.BRACE_L:return this.parseObject(ee);case TokenKind.INT:return this.advanceLexer(),this.node(ne,{kind:Kind.INT,value:ne.value});case TokenKind.FLOAT:return this.advanceLexer(),this.node(ne,{kind:Kind.FLOAT,value:ne.value});case TokenKind.STRING:case TokenKind.BLOCK_STRING:return this.parseStringLiteral();case TokenKind.NAME:switch(this.advanceLexer(),ne.value){case"true":return this.node(ne,{kind:Kind.BOOLEAN,value:!0});case"false":return this.node(ne,{kind:Kind.BOOLEAN,value:!1});case"null":return this.node(ne,{kind:Kind.NULL});default:return this.node(ne,{kind:Kind.ENUM,value:ne.value})}case TokenKind.DOLLAR:if(ee)if(this.expectToken(TokenKind.DOLLAR),this._lexer.token.kind===TokenKind.NAME){const ae=this._lexer.token.value;throw syntaxError$1(this._lexer.source,ne.start,`Unexpected variable "$${ae}" in constant value.`)}else throw this.unexpected(ne);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const ee=this._lexer.token;return this.advanceLexer(),this.node(ee,{kind:Kind.STRING,value:ee.value,block:ee.kind===TokenKind.BLOCK_STRING})}parseList(ee){const ne=()=>this.parseValueLiteral(ee);return this.node(this._lexer.token,{kind:Kind.LIST,values:this.any(TokenKind.BRACKET_L,ne,TokenKind.BRACKET_R)})}parseObject(ee){const ne=()=>this.parseObjectField(ee);return this.node(this._lexer.token,{kind:Kind.OBJECT,fields:this.any(TokenKind.BRACE_L,ne,TokenKind.BRACE_R)})}parseObjectField(ee){const ne=this._lexer.token,ae=this.parseName();return this.expectToken(TokenKind.COLON),this.node(ne,{kind:Kind.OBJECT_FIELD,name:ae,value:this.parseValueLiteral(ee)})}parseDirectives(ee){const ne=[];for(;this.peek(TokenKind.AT);)ne.push(this.parseDirective(ee));return ne}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(ee){const ne=this._lexer.token;return this.expectToken(TokenKind.AT),this.node(ne,{kind:Kind.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(ee)})}parseTypeReference(){const ee=this._lexer.token;let ne;if(this.expectOptionalToken(TokenKind.BRACKET_L)){const ae=this.parseTypeReference();this.expectToken(TokenKind.BRACKET_R),ne=this.node(ee,{kind:Kind.LIST_TYPE,type:ae})}else ne=this.parseNamedType();return this.expectOptionalToken(TokenKind.BANG)?this.node(ee,{kind:Kind.NON_NULL_TYPE,type:ne}):ne}parseNamedType(){return this.node(this._lexer.token,{kind:Kind.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(TokenKind.STRING)||this.peek(TokenKind.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("schema");const ae=this.parseConstDirectives(),ce=this.many(TokenKind.BRACE_L,this.parseOperationTypeDefinition,TokenKind.BRACE_R);return this.node(ee,{kind:Kind.SCHEMA_DEFINITION,description:ne,directives:ae,operationTypes:ce})}parseOperationTypeDefinition(){const ee=this._lexer.token,ne=this.parseOperationType();this.expectToken(TokenKind.COLON);const ae=this.parseNamedType();return this.node(ee,{kind:Kind.OPERATION_TYPE_DEFINITION,operation:ne,type:ae})}parseScalarTypeDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("scalar");const ae=this.parseName(),ce=this.parseConstDirectives();return this.node(ee,{kind:Kind.SCALAR_TYPE_DEFINITION,description:ne,name:ae,directives:ce})}parseObjectTypeDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("type");const ae=this.parseName(),ce=this.parseImplementsInterfaces(),le=this.parseConstDirectives(),ue=this.parseFieldsDefinition();return this.node(ee,{kind:Kind.OBJECT_TYPE_DEFINITION,description:ne,name:ae,interfaces:ce,directives:le,fields:ue})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(TokenKind.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(TokenKind.BRACE_L,this.parseFieldDefinition,TokenKind.BRACE_R)}parseFieldDefinition(){const ee=this._lexer.token,ne=this.parseDescription(),ae=this.parseName(),ce=this.parseArgumentDefs();this.expectToken(TokenKind.COLON);const le=this.parseTypeReference(),ue=this.parseConstDirectives();return this.node(ee,{kind:Kind.FIELD_DEFINITION,description:ne,name:ae,arguments:ce,type:le,directives:ue})}parseArgumentDefs(){return this.optionalMany(TokenKind.PAREN_L,this.parseInputValueDef,TokenKind.PAREN_R)}parseInputValueDef(){const ee=this._lexer.token,ne=this.parseDescription(),ae=this.parseName();this.expectToken(TokenKind.COLON);const ce=this.parseTypeReference();let le;this.expectOptionalToken(TokenKind.EQUALS)&&(le=this.parseConstValueLiteral());const ue=this.parseConstDirectives();return this.node(ee,{kind:Kind.INPUT_VALUE_DEFINITION,description:ne,name:ae,type:ce,defaultValue:le,directives:ue})}parseInterfaceTypeDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("interface");const ae=this.parseName(),ce=this.parseImplementsInterfaces(),le=this.parseConstDirectives(),ue=this.parseFieldsDefinition();return this.node(ee,{kind:Kind.INTERFACE_TYPE_DEFINITION,description:ne,name:ae,interfaces:ce,directives:le,fields:ue})}parseUnionTypeDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("union");const ae=this.parseName(),ce=this.parseConstDirectives(),le=this.parseUnionMemberTypes();return this.node(ee,{kind:Kind.UNION_TYPE_DEFINITION,description:ne,name:ae,directives:ce,types:le})}parseUnionMemberTypes(){return this.expectOptionalToken(TokenKind.EQUALS)?this.delimitedMany(TokenKind.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("enum");const ae=this.parseName(),ce=this.parseConstDirectives(),le=this.parseEnumValuesDefinition();return this.node(ee,{kind:Kind.ENUM_TYPE_DEFINITION,description:ne,name:ae,directives:ce,values:le})}parseEnumValuesDefinition(){return this.optionalMany(TokenKind.BRACE_L,this.parseEnumValueDefinition,TokenKind.BRACE_R)}parseEnumValueDefinition(){const ee=this._lexer.token,ne=this.parseDescription(),ae=this.parseEnumValueName(),ce=this.parseConstDirectives();return this.node(ee,{kind:Kind.ENUM_VALUE_DEFINITION,description:ne,name:ae,directives:ce})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw syntaxError$1(this._lexer.source,this._lexer.token.start,`${getTokenDesc(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("input");const ae=this.parseName(),ce=this.parseConstDirectives(),le=this.parseInputFieldsDefinition();return this.node(ee,{kind:Kind.INPUT_OBJECT_TYPE_DEFINITION,description:ne,name:ae,directives:ce,fields:le})}parseInputFieldsDefinition(){return this.optionalMany(TokenKind.BRACE_L,this.parseInputValueDef,TokenKind.BRACE_R)}parseTypeSystemExtension(){const ee=this._lexer.lookahead();if(ee.kind===TokenKind.NAME)switch(ee.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(ee)}parseSchemaExtension(){const ee=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const ne=this.parseConstDirectives(),ae=this.optionalMany(TokenKind.BRACE_L,this.parseOperationTypeDefinition,TokenKind.BRACE_R);if(ne.length===0&&ae.length===0)throw this.unexpected();return this.node(ee,{kind:Kind.SCHEMA_EXTENSION,directives:ne,operationTypes:ae})}parseScalarTypeExtension(){const ee=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const ne=this.parseName(),ae=this.parseConstDirectives();if(ae.length===0)throw this.unexpected();return this.node(ee,{kind:Kind.SCALAR_TYPE_EXTENSION,name:ne,directives:ae})}parseObjectTypeExtension(){const ee=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const ne=this.parseName(),ae=this.parseImplementsInterfaces(),ce=this.parseConstDirectives(),le=this.parseFieldsDefinition();if(ae.length===0&&ce.length===0&&le.length===0)throw this.unexpected();return this.node(ee,{kind:Kind.OBJECT_TYPE_EXTENSION,name:ne,interfaces:ae,directives:ce,fields:le})}parseInterfaceTypeExtension(){const ee=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const ne=this.parseName(),ae=this.parseImplementsInterfaces(),ce=this.parseConstDirectives(),le=this.parseFieldsDefinition();if(ae.length===0&&ce.length===0&&le.length===0)throw this.unexpected();return this.node(ee,{kind:Kind.INTERFACE_TYPE_EXTENSION,name:ne,interfaces:ae,directives:ce,fields:le})}parseUnionTypeExtension(){const ee=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const ne=this.parseName(),ae=this.parseConstDirectives(),ce=this.parseUnionMemberTypes();if(ae.length===0&&ce.length===0)throw this.unexpected();return this.node(ee,{kind:Kind.UNION_TYPE_EXTENSION,name:ne,directives:ae,types:ce})}parseEnumTypeExtension(){const ee=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const ne=this.parseName(),ae=this.parseConstDirectives(),ce=this.parseEnumValuesDefinition();if(ae.length===0&&ce.length===0)throw this.unexpected();return this.node(ee,{kind:Kind.ENUM_TYPE_EXTENSION,name:ne,directives:ae,values:ce})}parseInputObjectTypeExtension(){const ee=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const ne=this.parseName(),ae=this.parseConstDirectives(),ce=this.parseInputFieldsDefinition();if(ae.length===0&&ce.length===0)throw this.unexpected();return this.node(ee,{kind:Kind.INPUT_OBJECT_TYPE_EXTENSION,name:ne,directives:ae,fields:ce})}parseDirectiveDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("directive"),this.expectToken(TokenKind.AT);const ae=this.parseName(),ce=this.parseArgumentDefs(),le=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const ue=this.parseDirectiveLocations();return this.node(ee,{kind:Kind.DIRECTIVE_DEFINITION,description:ne,name:ae,arguments:ce,repeatable:le,locations:ue})}parseDirectiveLocations(){return this.delimitedMany(TokenKind.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const ee=this._lexer.token,ne=this.parseName();if(Object.prototype.hasOwnProperty.call(DirectiveLocation,ne.value))return ne;throw this.unexpected(ee)}node(ee,ne){return this._options.noLocation!==!0&&(ne.loc=new Location(ee,this._lexer.lastToken,this._lexer.source)),ne}peek(ee){return this._lexer.token.kind===ee}expectToken(ee){const ne=this._lexer.token;if(ne.kind===ee)return this.advanceLexer(),ne;throw syntaxError$1(this._lexer.source,ne.start,`Expected ${getTokenKindDesc(ee)}, found ${getTokenDesc(ne)}.`)}expectOptionalToken(ee){return this._lexer.token.kind===ee?(this.advanceLexer(),!0):!1}expectKeyword(ee){const ne=this._lexer.token;if(ne.kind===TokenKind.NAME&&ne.value===ee)this.advanceLexer();else throw syntaxError$1(this._lexer.source,ne.start,`Expected "${ee}", found ${getTokenDesc(ne)}.`)}expectOptionalKeyword(ee){const ne=this._lexer.token;return ne.kind===TokenKind.NAME&&ne.value===ee?(this.advanceLexer(),!0):!1}unexpected(ee){const ne=ee??this._lexer.token;return syntaxError$1(this._lexer.source,ne.start,`Unexpected ${getTokenDesc(ne)}.`)}any(ee,ne,ae){this.expectToken(ee);const ce=[];for(;!this.expectOptionalToken(ae);)ce.push(ne.call(this));return ce}optionalMany(ee,ne,ae){if(this.expectOptionalToken(ee)){const ce=[];do ce.push(ne.call(this));while(!this.expectOptionalToken(ae));return ce}return[]}many(ee,ne,ae){this.expectToken(ee);const ce=[];do ce.push(ne.call(this));while(!this.expectOptionalToken(ae));return ce}delimitedMany(ee,ne){this.expectOptionalToken(ee);const ae=[];do ae.push(ne.call(this));while(this.expectOptionalToken(ee));return ae}advanceLexer(){const{maxTokens:ee}=this._options,ne=this._lexer.advance();if(ee!==void 0&&ne.kind!==TokenKind.EOF&&(++this._tokenCounter,this._tokenCounter>ee))throw syntaxError$1(this._lexer.source,ne.start,`Document contains more that ${ee} tokens. Parsing aborted.`)}};function getTokenDesc(re){const ee=re.value;return getTokenKindDesc(re.kind)+(ee!=null?` "${ee}"`:"")}function getTokenKindDesc(re){return isPunctuatorTokenKind(re)?`"${re}"`:re}const parser=Object.freeze(Object.defineProperty({__proto__:null,Parser:Parser$1,parse:parse$3,parseConstValue,parseType,parseValue:parseValue$1},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(parser);function printString(re){return`"${re.replace(escapedRegExp,escapedReplacer)}"`}const escapedRegExp=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function escapedReplacer(re){return escapeSequences[re.charCodeAt(0)]}const escapeSequences=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],BREAK=Object.freeze({});function visit(re,ee,ne=QueryDocumentKeys){const ae=new Map;for(const Te of Object.values(Kind))ae.set(Te,getEnterLeaveForKind(ee,Te));let ce,le=Array.isArray(re),ue=[re],he=-1,fe=[],me=re,ge,ve;const ye=[],be=[];do{he++;const Te=he===ue.length,ke=Te&&fe.length!==0;if(Te){if(ge=be.length===0?void 0:ye[ye.length-1],me=ve,ve=be.pop(),ke)if(le){me=me.slice();let Fe=0;for(const[De,Oe]of fe){const Re=De-Fe;Oe===null?(me.splice(Re,1),Fe++):me[Re]=Oe}}else{me=Object.defineProperties({},Object.getOwnPropertyDescriptors(me));for(const[Fe,De]of fe)me[Fe]=De}he=ce.index,ue=ce.keys,fe=ce.edits,le=ce.inArray,ce=ce.prev}else if(ve){if(ge=le?he:ue[he],me=ve[ge],me==null)continue;ye.push(ge)}let Ne;if(!Array.isArray(me)){var Ee,Ce;isNode$2(me)||devAssert(!1,`Invalid AST Node: ${inspect(me)}.`);const Fe=Te?(Ee=ae.get(me.kind))===null||Ee===void 0?void 0:Ee.leave:(Ce=ae.get(me.kind))===null||Ce===void 0?void 0:Ce.enter;if(Ne=Fe==null?void 0:Fe.call(ee,me,ge,ve,ye,be),Ne===BREAK)break;if(Ne===!1){if(!Te){ye.pop();continue}}else if(Ne!==void 0&&(fe.push([ge,Ne]),!Te))if(isNode$2(Ne))me=Ne;else{ye.pop();continue}}if(Ne===void 0&&ke&&fe.push([ge,me]),Te)ye.pop();else{var Se;ce={inArray:le,index:he,keys:ue,edits:fe,prev:ce},le=Array.isArray(me),ue=le?me:(Se=ne[me.kind])!==null&&Se!==void 0?Se:[],he=-1,fe=[],ve&&be.push(ve),ve=me}}while(ce!==void 0);return fe.length!==0?fe[fe.length-1][1]:re}function getEnterLeaveForKind(re,ee){const ne=re[ee];return typeof ne=="object"?ne:typeof ne=="function"?{enter:ne,leave:void 0}:{enter:re.enter,leave:re.leave}}function print$1(re){return visit(re,printDocASTReducer)}const MAX_LINE_LENGTH=80,printDocASTReducer={Name:{leave:re=>re.value},Variable:{leave:re=>"$"+re.name},Document:{leave:re=>join(re.definitions,`

`)},OperationDefinition:{leave(re){const ee=wrap("(",join(re.variableDefinitions,", "),")"),ne=join([re.operation,join([re.name,ee]),join(re.directives," ")]," ");return(ne==="query"?"":ne+" ")+re.selectionSet}},VariableDefinition:{leave:({variable:re,type:ee,defaultValue:ne,directives:ae})=>re+": "+ee+wrap(" = ",ne)+wrap(" ",join(ae," "))},SelectionSet:{leave:({selections:re})=>block(re)},Field:{leave({alias:re,name:ee,arguments:ne,directives:ae,selectionSet:ce}){const le=wrap("",re,": ")+ee;let ue=le+wrap("(",join(ne,", "),")");return ue.length>MAX_LINE_LENGTH&&(ue=le+wrap(`(
`,indent(join(ne,`
`)),`
)`)),join([ue,join(ae," "),ce]," ")}},Argument:{leave:({name:re,value:ee})=>re+": "+ee},FragmentSpread:{leave:({name:re,directives:ee})=>"..."+re+wrap(" ",join(ee," "))},InlineFragment:{leave:({typeCondition:re,directives:ee,selectionSet:ne})=>join(["...",wrap("on ",re),join(ee," "),ne]," ")},FragmentDefinition:{leave:({name:re,typeCondition:ee,variableDefinitions:ne,directives:ae,selectionSet:ce})=>`fragment ${re}${wrap("(",join(ne,", "),")")} on ${ee} ${wrap("",join(ae," ")," ")}`+ce},IntValue:{leave:({value:re})=>re},FloatValue:{leave:({value:re})=>re},StringValue:{leave:({value:re,block:ee})=>ee?printBlockString(re):printString(re)},BooleanValue:{leave:({value:re})=>re?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:re})=>re},ListValue:{leave:({values:re})=>"["+join(re,", ")+"]"},ObjectValue:{leave:({fields:re})=>"{"+join(re,", ")+"}"},ObjectField:{leave:({name:re,value:ee})=>re+": "+ee},Directive:{leave:({name:re,arguments:ee})=>"@"+re+wrap("(",join(ee,", "),")")},NamedType:{leave:({name:re})=>re},ListType:{leave:({type:re})=>"["+re+"]"},NonNullType:{leave:({type:re})=>re+"!"},SchemaDefinition:{leave:({description:re,directives:ee,operationTypes:ne})=>wrap("",re,`
`)+join(["schema",join(ee," "),block(ne)]," ")},OperationTypeDefinition:{leave:({operation:re,type:ee})=>re+": "+ee},ScalarTypeDefinition:{leave:({description:re,name:ee,directives:ne})=>wrap("",re,`
`)+join(["scalar",ee,join(ne," ")]," ")},ObjectTypeDefinition:{leave:({description:re,name:ee,interfaces:ne,directives:ae,fields:ce})=>wrap("",re,`
`)+join(["type",ee,wrap("implements ",join(ne," & ")),join(ae," "),block(ce)]," ")},FieldDefinition:{leave:({description:re,name:ee,arguments:ne,type:ae,directives:ce})=>wrap("",re,`
`)+ee+(hasMultilineItems(ne)?wrap(`(
`,indent(join(ne,`
`)),`
)`):wrap("(",join(ne,", "),")"))+": "+ae+wrap(" ",join(ce," "))},InputValueDefinition:{leave:({description:re,name:ee,type:ne,defaultValue:ae,directives:ce})=>wrap("",re,`
`)+join([ee+": "+ne,wrap("= ",ae),join(ce," ")]," ")},InterfaceTypeDefinition:{leave:({description:re,name:ee,interfaces:ne,directives:ae,fields:ce})=>wrap("",re,`
`)+join(["interface",ee,wrap("implements ",join(ne," & ")),join(ae," "),block(ce)]," ")},UnionTypeDefinition:{leave:({description:re,name:ee,directives:ne,types:ae})=>wrap("",re,`
`)+join(["union",ee,join(ne," "),wrap("= ",join(ae," | "))]," ")},EnumTypeDefinition:{leave:({description:re,name:ee,directives:ne,values:ae})=>wrap("",re,`
`)+join(["enum",ee,join(ne," "),block(ae)]," ")},EnumValueDefinition:{leave:({description:re,name:ee,directives:ne})=>wrap("",re,`
`)+join([ee,join(ne," ")]," ")},InputObjectTypeDefinition:{leave:({description:re,name:ee,directives:ne,fields:ae})=>wrap("",re,`
`)+join(["input",ee,join(ne," "),block(ae)]," ")},DirectiveDefinition:{leave:({description:re,name:ee,arguments:ne,repeatable:ae,locations:ce})=>wrap("",re,`
`)+"directive @"+ee+(hasMultilineItems(ne)?wrap(`(
`,indent(join(ne,`
`)),`
)`):wrap("(",join(ne,", "),")"))+(ae?" repeatable":"")+" on "+join(ce," | ")},SchemaExtension:{leave:({directives:re,operationTypes:ee})=>join(["extend schema",join(re," "),block(ee)]," ")},ScalarTypeExtension:{leave:({name:re,directives:ee})=>join(["extend scalar",re,join(ee," ")]," ")},ObjectTypeExtension:{leave:({name:re,interfaces:ee,directives:ne,fields:ae})=>join(["extend type",re,wrap("implements ",join(ee," & ")),join(ne," "),block(ae)]," ")},InterfaceTypeExtension:{leave:({name:re,interfaces:ee,directives:ne,fields:ae})=>join(["extend interface",re,wrap("implements ",join(ee," & ")),join(ne," "),block(ae)]," ")},UnionTypeExtension:{leave:({name:re,directives:ee,types:ne})=>join(["extend union",re,join(ee," "),wrap("= ",join(ne," | "))]," ")},EnumTypeExtension:{leave:({name:re,directives:ee,values:ne})=>join(["extend enum",re,join(ee," "),block(ne)]," ")},InputObjectTypeExtension:{leave:({name:re,directives:ee,fields:ne})=>join(["extend input",re,join(ee," "),block(ne)]," ")}};function join(re,ee=""){var ne;return(ne=re==null?void 0:re.filter(ae=>ae).join(ee))!==null&&ne!==void 0?ne:""}function block(re){return wrap(`{
`,indent(join(re,`
`)),`
}`)}function wrap(re,ee,ne=""){return ee!=null&&ee!==""?re+ee+ne:""}function indent(re){return wrap("  ",re.replace(/\n/g,`
  `))}function hasMultilineItems(re){var ee;return(ee=re==null?void 0:re.some(ne=>ne.includes(`
`)))!==null&&ee!==void 0?ee:!1}const printer=Object.freeze(Object.defineProperty({__proto__:null,print:print$1},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(printer);var createRequestBody$1={},_public={},ReactNativeFile$1=function(ee){var ne=ee.uri,ae=ee.name,ce=ee.type;this.uri=ne,this.name=ae,this.type=ce},ReactNativeFile=ReactNativeFile$1,isExtractableFile=function(ee){return typeof File<"u"&&ee instanceof File||typeof Blob<"u"&&ee instanceof Blob||ee instanceof ReactNativeFile},defaultIsExtractableFile=isExtractableFile,extractFiles=function re(ee,ne,ae){ne===void 0&&(ne=""),ae===void 0&&(ae=defaultIsExtractableFile);var ce,le=new Map;function ue(ge,ve){var ye=le.get(ve);ye?ye.push.apply(ye,ge):le.set(ve,ge)}if(ae(ee))ce=null,ue([ne],ee);else{var he=ne?ne+".":"";if(typeof FileList<"u"&&ee instanceof FileList)ce=Array.prototype.map.call(ee,function(ge,ve){return ue([""+he+ve],ge),null});else if(Array.isArray(ee))ce=ee.map(function(ge,ve){var ye=re(ge,""+he+ve,ae);return ye.files.forEach(ue),ye.clone});else if(ee&&ee.constructor===Object){ce={};for(var fe in ee){var me=re(ee[fe],""+he+fe,ae);me.files.forEach(ue),ce[fe]=me.clone}}else ce=ee}return{clone:ce,files:le}};_public.ReactNativeFile=ReactNativeFile$1;_public.extractFiles=extractFiles;_public.isExtractableFile=isExtractableFile;var browser$1=typeof self=="object"?self.FormData:window.FormData,defaultJsonSerializer={};Object.defineProperty(defaultJsonSerializer,"__esModule",{value:!0});defaultJsonSerializer.defaultJsonSerializer=void 0;defaultJsonSerializer.defaultJsonSerializer={parse:JSON.parse,stringify:JSON.stringify};var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(re){return re&&re.__esModule?re:{default:re}};Object.defineProperty(createRequestBody$1,"__esModule",{value:!0});var extract_files_1=_public,form_data_1=__importDefault(browser$1),defaultJsonSerializer_1=defaultJsonSerializer,isExtractableFileEnhanced=function(re){return extract_files_1.isExtractableFile(re)||re!==null&&typeof re=="object"&&typeof re.pipe=="function"};function createRequestBody(re,ee,ne,ae){ae===void 0&&(ae=defaultJsonSerializer_1.defaultJsonSerializer);var ce=extract_files_1.extractFiles({query:re,variables:ee,operationName:ne},"",isExtractableFileEnhanced),le=ce.clone,ue=ce.files;if(ue.size===0){if(!Array.isArray(re))return ae.stringify(le);if(typeof ee<"u"&&!Array.isArray(ee))throw new Error("Cannot create request body with given variable type, array expected");var he=re.reduce(function(ye,be,Ee){return ye.push({query:be,variables:ee?ee[Ee]:void 0}),ye},[]);return ae.stringify(he)}var fe=typeof FormData>"u"?form_data_1.default:FormData,me=new fe;me.append("operations",ae.stringify(le));var ge={},ve=0;return ue.forEach(function(ye){ge[++ve]=ye}),me.append("map",ae.stringify(ge)),ve=0,ue.forEach(function(ye,be){me.append(""+ ++ve,be)}),me}createRequestBody$1.default=createRequestBody;var parseArgs={};Object.defineProperty(parseArgs,"__esModule",{value:!0});parseArgs.parseBatchRequestsExtendedArgs=parseArgs.parseRawRequestExtendedArgs=parseArgs.parseRequestExtendedArgs=parseArgs.parseBatchRequestArgs=parseArgs.parseRawRequestArgs=parseArgs.parseRequestArgs=void 0;function parseRequestArgs(re,ee,ne){return re.document?re:{document:re,variables:ee,requestHeaders:ne,signal:void 0}}parseArgs.parseRequestArgs=parseRequestArgs;function parseRawRequestArgs(re,ee,ne){return re.query?re:{query:re,variables:ee,requestHeaders:ne,signal:void 0}}parseArgs.parseRawRequestArgs=parseRawRequestArgs;function parseBatchRequestArgs(re,ee){return re.documents?re:{documents:re,requestHeaders:ee,signal:void 0}}parseArgs.parseBatchRequestArgs=parseBatchRequestArgs;function parseRequestExtendedArgs(re,ee,ne,ae){return re.document?re:{url:re,document:ee,variables:ne,requestHeaders:ae,signal:void 0}}parseArgs.parseRequestExtendedArgs=parseRequestExtendedArgs;function parseRawRequestExtendedArgs(re,ee,ne,ae){return re.query?re:{url:re,query:ee,variables:ne,requestHeaders:ae,signal:void 0}}parseArgs.parseRawRequestExtendedArgs=parseRawRequestExtendedArgs;function parseBatchRequestsExtendedArgs(re,ee,ne){return re.documents?re:{url:re,documents:ee,requestHeaders:ne,signal:void 0}}parseArgs.parseBatchRequestsExtendedArgs=parseBatchRequestsExtendedArgs;var types={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var re=function(ee,ne){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,ce){ae.__proto__=ce}||function(ae,ce){for(var le in ce)Object.prototype.hasOwnProperty.call(ce,le)&&(ae[le]=ce[le])},re(ee,ne)};return function(ee,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Class extends value "+String(ne)+" is not a constructor or null");re(ee,ne);function ae(){this.constructor=ee}ee.prototype=ne===null?Object.create(ne):(ae.prototype=ne.prototype,new ae)}}();Object.defineProperty(types,"__esModule",{value:!0});types.ClientError=void 0;var ClientError=function(re){__extends(ee,re);function ee(ne,ae){var ce=this,le=ee.extractMessage(ne)+": "+JSON.stringify({response:ne,request:ae});return ce=re.call(this,le)||this,Object.setPrototypeOf(ce,ee.prototype),ce.response=ne,ce.request=ae,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(ce,ee),ce}return ee.extractMessage=function(ne){try{return ne.errors[0].message}catch{return"GraphQL Error (Code: "+ne.status+")"}},ee}(Error);types.ClientError=ClientError;var graphqlWs={},hasRequiredGraphqlWs;function requireGraphqlWs(){if(hasRequiredGraphqlWs)return graphqlWs;hasRequiredGraphqlWs=1;var re=commonjsGlobal&&commonjsGlobal.__assign||function(){return re=Object.assign||function(De){for(var Oe,Re=1,Be=arguments.length;Re<Be;Re++){Oe=arguments[Re];for(var Le in Oe)Object.prototype.hasOwnProperty.call(Oe,Le)&&(De[Le]=Oe[Le])}return De},re.apply(this,arguments)},ee=commonjsGlobal&&commonjsGlobal.__awaiter||function(De,Oe,Re,Be){function Le(je){return je instanceof Re?je:new Re(function(Ge){Ge(je)})}return new(Re||(Re=Promise))(function(je,Ge){function qe(He){try{ze(Be.next(He))}catch(Ye){Ge(Ye)}}function Ue(He){try{ze(Be.throw(He))}catch(Ye){Ge(Ye)}}function ze(He){He.done?je(He.value):Le(He.value).then(qe,Ue)}ze((Be=Be.apply(De,Oe||[])).next())})},ne=commonjsGlobal&&commonjsGlobal.__generator||function(De,Oe){var Re={label:0,sent:function(){if(je[0]&1)throw je[1];return je[1]},trys:[],ops:[]},Be,Le,je,Ge;return Ge={next:qe(0),throw:qe(1),return:qe(2)},typeof Symbol=="function"&&(Ge[Symbol.iterator]=function(){return this}),Ge;function qe(ze){return function(He){return Ue([ze,He])}}function Ue(ze){if(Be)throw new TypeError("Generator is already executing.");for(;Re;)try{if(Be=1,Le&&(je=ze[0]&2?Le.return:ze[0]?Le.throw||((je=Le.return)&&je.call(Le),0):Le.next)&&!(je=je.call(Le,ze[1])).done)return je;switch(Le=0,je&&(ze=[ze[0]&2,je.value]),ze[0]){case 0:case 1:je=ze;break;case 4:return Re.label++,{value:ze[1],done:!1};case 5:Re.label++,Le=ze[1],ze=[0];continue;case 7:ze=Re.ops.pop(),Re.trys.pop();continue;default:if(je=Re.trys,!(je=je.length>0&&je[je.length-1])&&(ze[0]===6||ze[0]===2)){Re=0;continue}if(ze[0]===3&&(!je||ze[1]>je[0]&&ze[1]<je[3])){Re.label=ze[1];break}if(ze[0]===6&&Re.label<je[1]){Re.label=je[1],je=ze;break}if(je&&Re.label<je[2]){Re.label=je[2],Re.ops.push(ze);break}je[2]&&Re.ops.pop(),Re.trys.pop();continue}ze=Oe.call(De,Re)}catch(He){ze=[6,He],Le=0}finally{Be=je=0}if(ze[0]&5)throw ze[1];return{value:ze[0]?ze[1]:void 0,done:!0}}};Object.defineProperty(graphqlWs,"__esModule",{value:!0}),graphqlWs.GraphQLWebSocketClient=void 0;var ae=types,ce=requireDist(),le="connection_init",ue="connection_ack",he="ping",fe="pong",me="subscribe",ge="next",ve="error",ye="complete",be=function(){function De(Oe,Re,Be){this._type=Oe,this._payload=Re,this._id=Be}return Object.defineProperty(De.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"payload",{get:function(){return this._payload},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"text",{get:function(){var Oe={type:this.type};return this.id!=null&&this.id!=null&&(Oe.id=this.id),this.payload!=null&&this.payload!=null&&(Oe.payload=this.payload),JSON.stringify(Oe)},enumerable:!1,configurable:!0}),De.parse=function(Oe,Re){var Be=JSON.parse(Oe),Le=Be.type,je=Be.payload,Ge=Be.id;return new De(Le,Re(je),Ge)},De}(),Ee=function(){function De(Oe,Re){var Be=this,Le=Re.onInit,je=Re.onAcknowledged,Ge=Re.onPing,qe=Re.onPong;this.socketState={acknowledged:!1,lastRequestId:0,subscriptions:{}},this.socket=Oe,Oe.onopen=function(Ue){return ee(Be,void 0,void 0,function(){var ze,He,Ye,Xe;return ne(this,function(We){switch(We.label){case 0:return this.socketState.acknowledged=!1,this.socketState.subscriptions={},He=(ze=Oe).send,Ye=Se,Le?[4,Le()]:[3,2];case 1:return Xe=We.sent(),[3,3];case 2:Xe=null,We.label=3;case 3:return He.apply(ze,[Ye.apply(void 0,[Xe]).text]),[2]}})})},Oe.onclose=function(Ue){Be.socketState.acknowledged=!1,Be.socketState.subscriptions={}},Oe.onerror=function(Ue){console.error(Ue)},Oe.onmessage=function(Ue){try{var ze=Ce(Ue.data);switch(ze.type){case ue:{Be.socketState.acknowledged?console.warn("Duplicate CONNECTION_ACK message ignored"):(Be.socketState.acknowledged=!0,je&&je(ze.payload));return}case he:{Ge?Ge(ze.payload).then(function(Ze){return Oe.send(ke(Ze).text)}):Oe.send(ke(null).text);return}case fe:{qe&&qe(ze.payload);return}}if(!Be.socketState.acknowledged||ze.id===void 0||ze.id===null||!Be.socketState.subscriptions[ze.id])return;var He=Be.socketState.subscriptions[ze.id],Ye=He.query,Xe=He.variables,We=He.subscriber;switch(ze.type){case ge:{!ze.payload.errors&&ze.payload.data&&We.next&&We.next(ze.payload.data),ze.payload.errors&&We.error&&We.error(new ae.ClientError(re(re({},ze.payload),{status:200}),{query:Ye,variables:Xe}));return}case ve:{We.error&&We.error(new ae.ClientError({errors:ze.payload,status:200},{query:Ye,variables:Xe}));return}case ye:{We.complete&&We.complete(),delete Be.socketState.subscriptions[ze.id];return}}}catch(Ze){console.error(Ze),Oe.close(1006)}Oe.close(4400,"Unknown graphql-ws message.")}}return De.prototype.makeSubscribe=function(Oe,Re,Be,Le){var je=this,Ge=(this.socketState.lastRequestId++).toString();return this.socketState.subscriptions[Ge]={query:Oe,variables:Be,subscriber:Le},this.socket.send(Ne(Ge,{query:Oe,operationName:Re,variables:Be}).text),function(){je.socket.send(Fe(Ge).text),delete je.socketState.subscriptions[Ge]}},De.prototype.rawRequest=function(Oe,Re){var Be=this;return new Promise(function(Le,je){var Ge;Be.rawSubscribe(Oe,{next:function(qe,Ue){return Ge={data:qe,extensions:Ue}},error:je,complete:function(){return Le(Ge)}},Re)})},De.prototype.request=function(Oe,Re){var Be=this;return new Promise(function(Le,je){var Ge;Be.subscribe(Oe,{next:function(qe){return Ge=qe},error:je,complete:function(){return Le(Ge)}},Re)})},De.prototype.subscribe=function(Oe,Re,Be){var Le=ce.resolveRequestDocument(Oe),je=Le.query,Ge=Le.operationName;return this.makeSubscribe(je,Ge,Be,Re)},De.prototype.rawSubscribe=function(Oe,Re,Be){return this.makeSubscribe(Oe,void 0,Be,Re)},De.prototype.ping=function(Oe){this.socket.send(Te(Oe).text)},De.prototype.close=function(){this.socket.close(1e3)},De.PROTOCOL="graphql-transport-ws",De}();graphqlWs.GraphQLWebSocketClient=Ee;function Ce(De,Oe){Oe===void 0&&(Oe=function(Be){return Be});var Re=be.parse(De,Oe);return Re}function Se(De){return new be(le,De)}function Te(De){return new be(he,De,void 0)}function ke(De){return new be(fe,De,void 0)}function Ne(De,Oe){return new be(me,Oe,De)}function Fe(De){return new be(ye,void 0,De)}return graphqlWs}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(re){var ee=commonjsGlobal&&commonjsGlobal.__assign||function(){return ee=Object.assign||function(We){for(var Ze,Vt=1,Qt=arguments.length;Vt<Qt;Vt++){Ze=arguments[Vt];for(var Yt in Ze)Object.prototype.hasOwnProperty.call(Ze,Yt)&&(We[Yt]=Ze[Yt])}return We},ee.apply(this,arguments)},ne=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(We,Ze,Vt,Qt){Qt===void 0&&(Qt=Vt),Object.defineProperty(We,Qt,{enumerable:!0,get:function(){return Ze[Vt]}})}:function(We,Ze,Vt,Qt){Qt===void 0&&(Qt=Vt),We[Qt]=Ze[Vt]}),ae=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(We,Ze){Object.defineProperty(We,"default",{enumerable:!0,value:Ze})}:function(We,Ze){We.default=Ze}),ce=commonjsGlobal&&commonjsGlobal.__importStar||function(We){if(We&&We.__esModule)return We;var Ze={};if(We!=null)for(var Vt in We)Vt!=="default"&&Object.prototype.hasOwnProperty.call(We,Vt)&&ne(Ze,We,Vt);return ae(Ze,We),Ze},le=commonjsGlobal&&commonjsGlobal.__awaiter||function(We,Ze,Vt,Qt){function Yt(Jt){return Jt instanceof Vt?Jt:new Vt(function(rn){rn(Jt)})}return new(Vt||(Vt=Promise))(function(Jt,rn){function nn(un){try{an(Qt.next(un))}catch(bn){rn(bn)}}function fn(un){try{an(Qt.throw(un))}catch(bn){rn(bn)}}function an(un){un.done?Jt(un.value):Yt(un.value).then(nn,fn)}an((Qt=Qt.apply(We,Ze||[])).next())})},ue=commonjsGlobal&&commonjsGlobal.__generator||function(We,Ze){var Vt={label:0,sent:function(){if(Jt[0]&1)throw Jt[1];return Jt[1]},trys:[],ops:[]},Qt,Yt,Jt,rn;return rn={next:nn(0),throw:nn(1),return:nn(2)},typeof Symbol=="function"&&(rn[Symbol.iterator]=function(){return this}),rn;function nn(an){return function(un){return fn([an,un])}}function fn(an){if(Qt)throw new TypeError("Generator is already executing.");for(;Vt;)try{if(Qt=1,Yt&&(Jt=an[0]&2?Yt.return:an[0]?Yt.throw||((Jt=Yt.return)&&Jt.call(Yt),0):Yt.next)&&!(Jt=Jt.call(Yt,an[1])).done)return Jt;switch(Yt=0,Jt&&(an=[an[0]&2,Jt.value]),an[0]){case 0:case 1:Jt=an;break;case 4:return Vt.label++,{value:an[1],done:!1};case 5:Vt.label++,Yt=an[1],an=[0];continue;case 7:an=Vt.ops.pop(),Vt.trys.pop();continue;default:if(Jt=Vt.trys,!(Jt=Jt.length>0&&Jt[Jt.length-1])&&(an[0]===6||an[0]===2)){Vt=0;continue}if(an[0]===3&&(!Jt||an[1]>Jt[0]&&an[1]<Jt[3])){Vt.label=an[1];break}if(an[0]===6&&Vt.label<Jt[1]){Vt.label=Jt[1],Jt=an;break}if(Jt&&Vt.label<Jt[2]){Vt.label=Jt[2],Vt.ops.push(an);break}Jt[2]&&Vt.ops.pop(),Vt.trys.pop();continue}an=Ze.call(We,Vt)}catch(un){an=[6,un],Yt=0}finally{Qt=Jt=0}if(an[0]&5)throw an[1];return{value:an[0]?an[1]:void 0,done:!0}}},he=commonjsGlobal&&commonjsGlobal.__rest||function(We,Ze){var Vt={};for(var Qt in We)Object.prototype.hasOwnProperty.call(We,Qt)&&Ze.indexOf(Qt)<0&&(Vt[Qt]=We[Qt]);if(We!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Yt=0,Qt=Object.getOwnPropertySymbols(We);Yt<Qt.length;Yt++)Ze.indexOf(Qt[Yt])<0&&Object.prototype.propertyIsEnumerable.call(We,Qt[Yt])&&(Vt[Qt[Yt]]=We[Qt[Yt]]);return Vt},fe=commonjsGlobal&&commonjsGlobal.__importDefault||function(We){return We&&We.__esModule?We:{default:We}};Object.defineProperty(re,"__esModule",{value:!0}),re.GraphQLWebSocketClient=re.gql=re.resolveRequestDocument=re.batchRequests=re.request=re.rawRequest=re.GraphQLClient=re.ClientError=void 0;var me=ce(browserPonyfillExports),ge=me,ve=require$$1,ye=require$$2$1,be=fe(createRequestBody$1),Ee=defaultJsonSerializer,Ce=parseArgs,Se=types;Object.defineProperty(re,"ClientError",{enumerable:!0,get:function(){return Se.ClientError}});var Te=function(We){var Ze={};return We&&(typeof Headers<"u"&&We instanceof Headers||We instanceof ge.Headers?Ze=Ye(We):Array.isArray(We)?We.forEach(function(Vt){var Qt=Vt[0],Yt=Vt[1];Ze[Qt]=Yt}):Ze=We),Ze},ke=function(We){return We.replace(/([\s,]|#[^\n\r]+)+/g," ").trim()},Ne=function(We){var Ze=We.query,Vt=We.variables,Qt=We.operationName,Yt=We.jsonSerializer;if(!Array.isArray(Ze)){var Jt=["query="+encodeURIComponent(ke(Ze))];return Vt&&Jt.push("variables="+encodeURIComponent(Yt.stringify(Vt))),Qt&&Jt.push("operationName="+encodeURIComponent(Qt)),Jt.join("&")}if(typeof Vt<"u"&&!Array.isArray(Vt))throw new Error("Cannot create query with given variable type, array expected");var rn=Ze.reduce(function(nn,fn,an){return nn.push({query:ke(fn),variables:Vt?Yt.stringify(Vt[an]):void 0}),nn},[]);return"query="+encodeURIComponent(Yt.stringify(rn))},Fe=function(We){var Ze=We.url,Vt=We.query,Qt=We.variables,Yt=We.operationName,Jt=We.headers,rn=We.fetch,nn=We.fetchOptions;return le(void 0,void 0,void 0,function(){var fn;return ue(this,function(an){switch(an.label){case 0:return fn=be.default(Vt,Qt,Yt,nn.jsonSerializer),[4,rn(Ze,ee({method:"POST",headers:ee(ee({},typeof fn=="string"?{"Content-Type":"application/json"}:{}),Jt),body:fn},nn))];case 1:return[2,an.sent()]}})})},De=function(We){var Ze=We.url,Vt=We.query,Qt=We.variables,Yt=We.operationName,Jt=We.headers,rn=We.fetch,nn=We.fetchOptions;return le(void 0,void 0,void 0,function(){var fn;return ue(this,function(an){switch(an.label){case 0:return fn=Ne({query:Vt,variables:Qt,operationName:Yt,jsonSerializer:nn.jsonSerializer}),[4,rn(Ze+"?"+fn,ee({method:"GET",headers:Jt},nn))];case 1:return[2,an.sent()]}})})},Oe=function(){function We(Ze,Vt){this.url=Ze,this.options=Vt||{}}return We.prototype.rawRequest=function(Ze,Vt,Qt){return le(this,void 0,void 0,function(){var Yt,Jt,rn,nn,fn,an,un,bn,En,$n;return ue(this,function(On){return Yt=Ce.parseRawRequestArgs(Ze,Vt,Qt),Jt=this.options,rn=Jt.headers,nn=Jt.fetch,fn=nn===void 0?me.default:nn,an=Jt.method,un=an===void 0?"POST":an,bn=he(Jt,["headers","fetch","method"]),En=this.url,Yt.signal!==void 0&&(bn.signal=Yt.signal),$n=Ue(Yt.query).operationName,[2,Re({url:En,query:Yt.query,variables:Yt.variables,headers:ee(ee({},Te(ze(rn))),Te(Yt.requestHeaders)),operationName:$n,fetch:fn,method:un,fetchOptions:bn})]})})},We.prototype.request=function(Ze,Vt,Qt){return le(this,void 0,void 0,function(){var Yt,Jt,rn,nn,fn,an,un,bn,En,$n,On,zn,Rn;return ue(this,function(Ut){switch(Ut.label){case 0:return Yt=Ce.parseRequestArgs(Ze,Vt,Qt),Jt=this.options,rn=Jt.headers,nn=Jt.fetch,fn=nn===void 0?me.default:nn,an=Jt.method,un=an===void 0?"POST":an,bn=he(Jt,["headers","fetch","method"]),En=this.url,Yt.signal!==void 0&&(bn.signal=Yt.signal),$n=Ue(Yt.document),On=$n.query,zn=$n.operationName,[4,Re({url:En,query:On,variables:Yt.variables,headers:ee(ee({},Te(ze(rn))),Te(Yt.requestHeaders)),operationName:zn,fetch:fn,method:un,fetchOptions:bn})];case 1:return Rn=Ut.sent().data,[2,Rn]}})})},We.prototype.batchRequests=function(Ze,Vt){return le(this,void 0,void 0,function(){var Qt,Yt,Jt,rn,nn,fn,an,un,bn,En,$n,On;return ue(this,function(zn){switch(zn.label){case 0:return Qt=Ce.parseBatchRequestArgs(Ze,Vt),Yt=this.options,Jt=Yt.headers,rn=Yt.fetch,nn=rn===void 0?me.default:rn,fn=Yt.method,an=fn===void 0?"POST":fn,un=he(Yt,["headers","fetch","method"]),bn=this.url,Qt.signal!==void 0&&(un.signal=Qt.signal),En=Qt.documents.map(function(Rn){var Ut=Rn.document;return Ue(Ut).query}),$n=Qt.documents.map(function(Rn){var Ut=Rn.variables;return Ut}),[4,Re({url:bn,query:En,variables:$n,headers:ee(ee({},Te(ze(Jt))),Te(Qt.requestHeaders)),operationName:void 0,fetch:nn,method:an,fetchOptions:un})];case 1:return On=zn.sent().data,[2,On]}})})},We.prototype.setHeaders=function(Ze){return this.options.headers=Ze,this},We.prototype.setHeader=function(Ze,Vt){var Qt,Yt=this.options.headers;return Yt?Yt[Ze]=Vt:this.options.headers=(Qt={},Qt[Ze]=Vt,Qt),this},We.prototype.setEndpoint=function(Ze){return this.url=Ze,this},We}();re.GraphQLClient=Oe;function Re(We){var Ze=We.url,Vt=We.query,Qt=We.variables,Yt=We.headers,Jt=We.operationName,rn=We.fetch,nn=We.method,fn=nn===void 0?"POST":nn,an=We.fetchOptions;return le(this,void 0,void 0,function(){var un,bn,En,$n,On,zn,Rn,Ut,tn,dn,xn;return ue(this,function(An){switch(An.label){case 0:return un=fn.toUpperCase()==="POST"?Fe:De,bn=Array.isArray(Vt),[4,un({url:Ze,query:Vt,variables:Qt,operationName:Jt,headers:Yt,fetch:rn,fetchOptions:an})];case 1:return En=An.sent(),[4,Ge(En,an.jsonSerializer)];case 2:if($n=An.sent(),On=bn&&Array.isArray($n)?!$n.some(function(vn){var Nn=vn.data;return!Nn}):!!$n.data,zn=!$n.errors||an.errorPolicy==="all"||an.errorPolicy==="ignore",En.ok&&zn&&On)return Rn=En.headers,Ut=En.status,$n.errors,tn=he($n,["errors"]),dn=an.errorPolicy==="ignore"?tn:$n,[2,ee(ee({},bn?{data:dn}:dn),{headers:Rn,status:Ut})];throw xn=typeof $n=="string"?{error:$n}:$n,new Se.ClientError(ee(ee({},xn),{status:En.status,headers:En.headers}),{query:Vt,variables:Qt})}})})}function Be(We,Ze,Vt,Qt){return le(this,void 0,void 0,function(){var Yt,Jt;return ue(this,function(rn){return Yt=Ce.parseRawRequestExtendedArgs(We,Ze,Vt,Qt),Jt=new Oe(Yt.url),[2,Jt.rawRequest(ee({},Yt))]})})}re.rawRequest=Be;function Le(We,Ze,Vt,Qt){return le(this,void 0,void 0,function(){var Yt,Jt;return ue(this,function(rn){return Yt=Ce.parseRequestExtendedArgs(We,Ze,Vt,Qt),Jt=new Oe(Yt.url),[2,Jt.request(ee({},Yt))]})})}re.request=Le;function je(We,Ze,Vt){return le(this,void 0,void 0,function(){var Qt,Yt;return ue(this,function(Jt){return Qt=Ce.parseBatchRequestsExtendedArgs(We,Ze,Vt),Yt=new Oe(Qt.url),[2,Yt.batchRequests(ee({},Qt))]})})}re.batchRequests=je,re.default=Le;function Ge(We,Ze){return Ze===void 0&&(Ze=Ee.defaultJsonSerializer),le(this,void 0,void 0,function(){var Vt,Qt,Yt;return ue(this,function(Jt){switch(Jt.label){case 0:return We.headers.forEach(function(rn,nn){nn.toLowerCase()==="content-type"&&(Vt=rn)}),Vt&&Vt.toLowerCase().startsWith("application/json")?(Yt=(Qt=Ze).parse,[4,We.text()]):[3,2];case 1:return[2,Yt.apply(Qt,[Jt.sent()])];case 2:return[2,We.text()]}})})}function qe(We){var Ze,Vt=void 0,Qt=We.definitions.filter(function(Yt){return Yt.kind==="OperationDefinition"});return Qt.length===1&&(Vt=(Ze=Qt[0].name)===null||Ze===void 0?void 0:Ze.value),Vt}function Ue(We){if(typeof We=="string"){var Ze=void 0;try{var Vt=ve.parse(We);Ze=qe(Vt)}catch{}return{query:We,operationName:Ze}}var Qt=qe(We);return{query:ye.print(We),operationName:Qt}}re.resolveRequestDocument=Ue;function ze(We){return typeof We=="function"?We():We}function He(We){for(var Ze=[],Vt=1;Vt<arguments.length;Vt++)Ze[Vt-1]=arguments[Vt];return We.reduce(function(Qt,Yt,Jt){return""+Qt+Yt+(Jt in Ze?Ze[Jt]:"")},"")}re.gql=He;function Ye(We){var Ze={};return We.forEach(function(Vt,Qt){Ze[Qt]=Vt}),Ze}var Xe=requireGraphqlWs();Object.defineProperty(re,"GraphQLWebSocketClient",{enumerable:!0,get:function(){return Xe.GraphQLWebSocketClient}})}(dist)),dist}var distExports=requireDist(),baseGetTag$4=_baseGetTag,isObjectLike$3=isObjectLike_1,symbolTag$1="[object Symbol]";function isSymbol$5(re){return typeof re=="symbol"||isObjectLike$3(re)&&baseGetTag$4(re)==symbolTag$1}var isSymbol_1=isSymbol$5,isArray$b=isArray_1,isSymbol$4=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$4(re,ee){if(isArray$b(re))return!1;var ne=typeof re;return ne=="number"||ne=="symbol"||ne=="boolean"||re==null||isSymbol$4(re)?!0:reIsPlainProp.test(re)||!reIsDeepProp.test(re)||ee!=null&&re in Object(ee)}var _isKey=isKey$4;function isObject$7(re){var ee=typeof re;return re!=null&&(ee=="object"||ee=="function")}var isObject_1=isObject$7,baseGetTag$3=_baseGetTag,isObject$6=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$5(re){if(!isObject$6(re))return!1;var ee=baseGetTag$3(re);return ee==funcTag$1||ee==genTag||ee==asyncTag||ee==proxyTag}var isFunction_1=isFunction$5,root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var re=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return re?"Symbol(src)_1."+re:""}();function isMasked$1(re){return!!maskSrcKey&&maskSrcKey in re}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$2(re){if(re!=null){try{return funcToString$1.call(re)}catch{}try{return re+""}catch{}}return""}var _toSource=toSource$2,isFunction$4=isFunction_1,isMasked=_isMasked,isObject$5=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$8=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$8.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(re){if(!isObject$5(re)||isMasked(re))return!1;var ee=isFunction$4(re)?reIsNative:reIsHostCtor;return ee.test(toSource$1(re))}var _baseIsNative=baseIsNative$1;function getValue$1(re,ee){return re==null?void 0:re[ee]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$6(re,ee){var ne=getValue(re,ee);return baseIsNative(ne)?ne:void 0}var _getNative=getNative$6,getNative$5=_getNative,nativeCreate$4=getNative$5(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(re){var ee=this.has(re)&&delete this.__data__[re];return this.size-=ee?1:0,ee}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function hashGet$1(re){var ee=this.__data__;if(nativeCreate$2){var ne=ee[re];return ne===HASH_UNDEFINED$2?void 0:ne}return hasOwnProperty$6.call(ee,re)?ee[re]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function hashHas$1(re){var ee=this.__data__;return nativeCreate$1?ee[re]!==void 0:hasOwnProperty$5.call(ee,re)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(re,ee){var ne=this.__data__;return this.size+=this.has(re)?0:1,ne[re]=nativeCreate&&ee===void 0?HASH_UNDEFINED$1:ee,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(re){var ee=-1,ne=re==null?0:re.length;for(this.clear();++ee<ne;){var ae=re[ee];this.set(ae[0],ae[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$3(re,ee){return re===ee||re!==re&&ee!==ee}var eq_1=eq$3,eq$2=eq_1;function assocIndexOf$4(re,ee){for(var ne=re.length;ne--;)if(eq$2(re[ne][0],ee))return ne;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(re){var ee=this.__data__,ne=assocIndexOf$3(ee,re);if(ne<0)return!1;var ae=ee.length-1;return ne==ae?ee.pop():splice.call(ee,ne,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(re){var ee=this.__data__,ne=assocIndexOf$2(ee,re);return ne<0?void 0:ee[ne][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(re){return assocIndexOf$1(this.__data__,re)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(re,ee){var ne=this.__data__,ae=assocIndexOf(ne,re);return ae<0?(++this.size,ne.push([re,ee])):ne[ae][1]=ee,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(re){var ee=-1,ne=re==null?0:re.length;for(this.clear();++ee<ne;){var ae=re[ee];this.set(ae[0],ae[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,getNative$4=_getNative,root$6=_root,Map$4=getNative$4(root$6,"Map"),_Map=Map$4,Hash=_Hash,ListCache$3=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$3),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(re){var ee=typeof re;return ee=="string"||ee=="number"||ee=="symbol"||ee=="boolean"?re!=="__proto__":re===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(re,ee){var ne=re.__data__;return isKeyable(ee)?ne[typeof ee=="string"?"string":"hash"]:ne.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(re){var ee=getMapData$3(this,re).delete(re);return this.size-=ee?1:0,ee}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(re){return getMapData$2(this,re).get(re)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(re){return getMapData$1(this,re).has(re)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(re,ee){var ne=getMapData(this,re),ae=ne.size;return ne.set(re,ee),this.size+=ne.size==ae?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(re){var ee=-1,ne=re==null?0:re.length;for(this.clear();++ee<ne;){var ae=re[ee];this.set(ae[0],ae[1])}}MapCache$3.prototype.clear=mapCacheClear;MapCache$3.prototype.delete=mapCacheDelete;MapCache$3.prototype.get=mapCacheGet;MapCache$3.prototype.has=mapCacheHas;MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3,MapCache$2=_MapCache,FUNC_ERROR_TEXT="Expected a function";function memoize$2(re,ee){if(typeof re!="function"||ee!=null&&typeof ee!="function")throw new TypeError(FUNC_ERROR_TEXT);var ne=function(){var ae=arguments,ce=ee?ee.apply(this,ae):ae[0],le=ne.cache;if(le.has(ce))return le.get(ce);var ue=re.apply(this,ae);return ne.cache=le.set(ce,ue)||le,ue};return ne.cache=new(memoize$2.Cache||MapCache$2),ne}memoize$2.Cache=MapCache$2;var memoize_1=memoize$2,memoize$1=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(re){var ee=memoize$1(re,function(ae){return ne.size===MAX_MEMOIZE_SIZE&&ne.clear(),ae}),ne=ee.cache;return ee}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath$2=memoizeCapped(function(re){var ee=[];return re.charCodeAt(0)===46&&ee.push(""),re.replace(rePropName,function(ne,ae,ce,le){ee.push(ce?le.replace(reEscapeChar,"$1"):ae||ne)}),ee}),_stringToPath=stringToPath$2;function arrayMap$2(re,ee){for(var ne=-1,ae=re==null?0:re.length,ce=Array(ae);++ne<ae;)ce[ne]=ee(re[ne],ne,re);return ce}var _arrayMap=arrayMap$2,Symbol$2=_Symbol,arrayMap$1=_arrayMap,isArray$a=isArray_1,isSymbol$3=isSymbol_1,INFINITY$3=1/0,symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString$1(re){if(typeof re=="string")return re;if(isArray$a(re))return arrayMap$1(re,baseToString$1)+"";if(isSymbol$3(re))return symbolToString?symbolToString.call(re):"";var ee=re+"";return ee=="0"&&1/re==-INFINITY$3?"-0":ee}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$1(re){return re==null?"":baseToString(re)}var toString_1=toString$1,isArray$9=isArray_1,isKey$3=_isKey,stringToPath$1=_stringToPath,toString=toString_1;function castPath$2(re,ee){return isArray$9(re)?re:isKey$3(re,ee)?[re]:stringToPath$1(toString(re))}var _castPath=castPath$2,isSymbol$2=isSymbol_1,INFINITY$2=1/0;function toKey$4(re){if(typeof re=="string"||isSymbol$2(re))return re;var ee=re+"";return ee=="0"&&1/re==-INFINITY$2?"-0":ee}var _toKey=toKey$4,castPath$1=_castPath,toKey$3=_toKey;function baseGet$4(re,ee){ee=castPath$1(ee,re);for(var ne=0,ae=ee.length;re!=null&&ne<ae;)re=re[toKey$3(ee[ne++])];return ne&&ne==ae?re:void 0}var _baseGet=baseGet$4,baseGet$3=_baseGet;function get$4(re,ee,ne){var ae=re==null?void 0:baseGet$3(re,ee);return ae===void 0?ne:ae}var get_1=get$4;const get$5=getDefaultExportFromCjs(get_1);function _objectWithoutProperties(re,ee){if(re==null)return{};var ne=_objectWithoutPropertiesLoose(re,ee),ae,ce;if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(re);for(ce=0;ce<le.length;ce++)ae=le[ce],!(ee.indexOf(ae)>=0)&&Object.prototype.propertyIsEnumerable.call(re,ae)&&(ne[ae]=re[ae])}return ne}function _objectWithoutPropertiesLoose(re,ee){if(re==null)return{};var ne={},ae=Object.keys(re),ce,le;for(le=0;le<ae.length;le++)ce=ae[le],!(ee.indexOf(ce)>=0)&&(ne[ce]=re[ce]);return ne}function _extends$1(){return _extends$1=Object.assign||function(re){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee];for(var ae in ne)Object.prototype.hasOwnProperty.call(ne,ae)&&(re[ae]=ne[ae])}return re},_extends$1.apply(this,arguments)}function ownKeys$2(re,ee){var ne=Object.keys(re);if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(re);ee&&(ae=ae.filter(function(ce){return Object.getOwnPropertyDescriptor(re,ce).enumerable})),ne.push.apply(ne,ae)}return ne}function _objectSpread(re){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee]!=null?arguments[ee]:{};ee%2?ownKeys$2(Object(ne),!0).forEach(function(ae){_defineProperty$1(re,ae,ne[ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(re,Object.getOwnPropertyDescriptors(ne)):ownKeys$2(Object(ne)).forEach(function(ae){Object.defineProperty(re,ae,Object.getOwnPropertyDescriptor(ne,ae))})}return re}function _defineProperty$1(re,ee,ne){return ee in re?Object.defineProperty(re,ee,{value:ne,enumerable:!0,configurable:!0,writable:!0}):re[ee]=ne,re}const defaultProps$1={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},DEFAULT_COLUMNS=2;class Masonry extends React.Component{constructor(ee){super(ee),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this);let ne;this.props.breakpointCols&&this.props.breakpointCols.default?ne=this.props.breakpointCols.default:ne=parseInt(this.props.breakpointCols)||DEFAULT_COLUMNS,this.state={columnCount:ne}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){const ee=window&&window.innerWidth||1/0;let ne=this.props.breakpointCols;typeof ne!="object"&&(ne={default:parseInt(ne)||DEFAULT_COLUMNS});let ae=1/0,ce=ne.default||DEFAULT_COLUMNS;for(let le in ne){const ue=parseInt(le);ue>0&&ee<=ue&&ue<ae&&(ae=ue,ce=ne[le])}ce=Math.max(1,parseInt(ce)||1),this.state.columnCount!==ce&&this.setState({columnCount:ce})}itemsInColumns(){const ee=this.state.columnCount,ne=new Array(ee),ae=React.Children.toArray(this.props.children);for(let ce=0;ce<ae.length;ce++){const le=ce%ee;ne[le]||(ne[le]=[]),ne[le].push(ae[ce])}return ne}renderColumns(){const{column:ee,columnAttrs:ne={},columnClassName:ae}=this.props,ce=this.itemsInColumns(),le=`${100/ce.length}%`;let ue=ae;ue&&typeof ue!="string"&&(this.logDeprecated('The property "columnClassName" requires a string'),typeof ue>"u"&&(ue="my-masonry-grid_column"));const he=_objectSpread(_objectSpread(_objectSpread({},ee),ne),{},{style:_objectSpread(_objectSpread({},ne.style),{},{width:le}),className:ue});return ce.map((fe,me)=>React.createElement("div",_extends$1({},he,{key:me}),fe))}logDeprecated(ee){console.error("[Masonry]",ee)}render(){const ee=this.props,{children:ne,breakpointCols:ae,columnClassName:ce,columnAttrs:le,column:ue,className:he}=ee,fe=_objectWithoutProperties(ee,["children","breakpointCols","columnClassName","columnAttrs","column","className"]);let me=he;return typeof he!="string"&&(this.logDeprecated('The property "className" requires a string'),typeof he>"u"&&(me="my-masonry-grid")),React.createElement("div",_extends$1({},fe,{className:me}),this.renderColumns())}}Masonry.defaultProps=defaultProps$1;const grid$1="_grid_gxg6m_1",column$2="_column_gxg6m_12",styles$T={grid:grid$1,column:column$2},ResponsiveMasonry=({children:re})=>{const ee=()=>globalThis.innerWidth>1170?4:globalThis.innerWidth>744?3:globalThis.innerWidth>320?2:1,[ne,ae]=reactExports.useState(ee());return reactExports.useEffect(()=>{const ce=()=>{ae(ee())};return globalThis.addEventListener("resize",ce),()=>globalThis.removeEventListener("resize",ce)},[]),jsx$1(Masonry,{breakpointCols:ne,className:`${styles$T.grid} no-fool`,columnClassName:styles$T.column,children:re})},compact_container="_compact_container_145qs_216",artist="_artist_145qs_228",hide="_hide_145qs_234",price_box="_price_box_145qs_238",container$v="_container_145qs_246",spread="_spread_145qs_258",spread__inner="_spread__inner_145qs_271",editions="_editions_145qs_285",edition="_edition_145qs_285",inline$1="_inline_145qs_296",issuer$1="_issuer_145qs_302",top$1="_top_145qs_312",objkt_label="_objkt_label_145qs_369",objkt_details_container="_objkt_details_container_145qs_379",objkt_label_container="_objkt_label_container_145qs_383",collab_verification_title="_collab_verification_title_145qs_387",collab_verification_symbol="_collab_verification_symbol_145qs_393",main_swap="_main_swap_145qs_397",infos_left="_infos_left_145qs_406",infos_right="_infos_right_145qs_407",styles$S={compact_container,artist,hide,price_box,container:container$v,spread,spread__inner,editions,edition,inline:inline$1,issuer:issuer$1,top:top$1,objkt_label,objkt_details_container,objkt_label_container,collab_verification_title,collab_verification_symbol,main_swap,infos_left,infos_right},container$u="_container_2afg7_216",input="_input_2afg7_222",link="_link_2afg7_228",textarea="_textarea_2afg7_239",table="_table_2afg7_251",reviewTable="_reviewTable_2afg7_252",row="_row_2afg7_253",borderBottom="_borderBottom_2afg7_272",addressCell="_addressCell_2afg7_276",cellWithPadding="_cellWithPadding_2afg7_282",sharesCell="_sharesCell_2afg7_287",actionCell="_actionCell_2afg7_294",absolute="_absolute_2afg7_311",alignRight="_alignRight_2afg7_318",projectList="_projectList_2afg7_323",mt1$1="_mt1_2afg7_330",mb1$1="_mb1_2afg7_334",pt1="_pt1_2afg7_338",pb1="_pb1_2afg7_342",mt2$1="_mt2_2afg7_346",mb2$1="_mb2_2afg7_350",pt2="_pt2_2afg7_354",pb2="_pb2_2afg7_358",mt3$1="_mt3_2afg7_362",mb3$1="_mb3_2afg7_366",pt3="_pt3_2afg7_370",pb3="_pb3_2afg7_374",mt4="_mt4_2afg7_378",mb4="_mb4_2afg7_382",pt4="_pt4_2afg7_386",pb4="_pb4_2afg7_390",checkbox="_checkbox_2afg7_394",list="_list_2afg7_399",check="_check_2afg7_394",flex$2="_flex_2afg7_412",flexBetween="_flexBetween_2afg7_416",alignStart="_alignStart_2afg7_421",tipSelect="_tipSelect_2afg7_425",btn="_btn_2afg7_438",disabled$1="_disabled_2afg7_449",selected$3="_selected_2afg7_455",muted$1="_muted_2afg7_460",border$1="_border_2afg7_272",pb="_pb_2afg7_342",mb="_mb_2afg7_334",secondary$1="_secondary_2afg7_481",textInput="_textInput_2afg7_489",relative="_relative_2afg7_516",collabInfo="_collabInfo_2afg7_524",descriptive="_descriptive_2afg7_537",collabTable="_collabTable_2afg7_543",infoLabel="_infoLabel_2afg7_556",fullWidth="_fullWidth_2afg7_562",qr$1="_qr_2afg7_566",upload_container="_upload_container_2afg7_575",allowed$1="_allowed_2afg7_590",collabStyles={container:container$u,input,link,textarea,table,reviewTable,row,borderBottom,addressCell,cellWithPadding,sharesCell,actionCell,absolute,alignRight,projectList,mt1:mt1$1,mb1:mb1$1,pt1,pb1,mt2:mt2$1,mb2:mb2$1,pt2,pb2,mt3:mt3$1,mb3:mb3$1,pt3,pb3,mt4,mb4,pt4,pb4,checkbox,list,check,flex:flex$2,flexBetween,alignStart,tipSelect,btn,disabled:disabled$1,selected:selected$3,muted:muted$1,border:border$1,pb,mb,secondary:secondary$1,textInput,relative,collabInfo,descriptive,collabTable,infoLabel,fullWidth,qr:qr$1,upload_container,allowed:allowed$1},useCollabStore=create$2()(subscribeWithSelector(persist((re,ee)=>({originatedContract:void 0,findOriginatedContractFromOpHash:async ne=>{const ae=useModalStore.getState().step,ce=useModalStore.getState().close,le=useModalStore.getState().show;ae("Originating Contract","Checking network for collab contract"),axios.get(`https://api.tzkt.io/v1/operations/originations/${ne}`).then(ue=>{const{data:he}=ue;if(console.log("response from originations call",he[0]),he[0]){console.log("There is correct data",he[0]);const{originatedContract:fe}=he[0];re({originatedContract:fe,originationOpHash:void 0}),console.log("Saved state originatedContract",fe),ae("Originating Contract","Collaborative contract created successfully"),setTimeout(()=>{ce()},2500)}else console.log("missing data"),le("Originating Contract (Error)","Sorry, there was possibly an error creating the collaborative contract - please check tzkt.io for your wallet address");setTimeout(()=>{ce()},2e3)})},sign:async ne=>{const ae=useUserStore.getState().handleOp,ce=useModalStore.getState().step;ce("Signing OBJKT","Waiting for wallet",!0);const ue=(await Tezos.wallet.at(SIGNING_CONTRACT)).methods.sign(ne);return await ae(ue,"Signing OBJKT",{amount:0,storageLimit:310})},originateProxy:async ne=>{const ae=useModalStore.getState().step,ce=useUserStore.getState().handleOp;console.log("originateProxy",ne),re({originationOpHash:void 0,originatedProxy:void 0}),ae("Originate","creating collaborative contract");const le=MichelsonMap.fromLiteral(ne),ue=packData(le,createProxySchema),{packed:he}=await Packer$1.packData(ue),me=(await Tezos.wallet.at(PROXY_FACTORY_CONTRACT)).methods.create_proxy(he,"hic_proxy"),ge=await ce(me,"Originate",{amount:0});re({originationOpHash:ge})}}),{name:"collab",storage:createJSONStorage(()=>localStorage)}))),SigningUI=({id:re,hasSigned:ee})=>{const ne=useCollabStore(ce=>ce.sign),ae=()=>{ne(re).then(ce=>console.log(ce))};return ee?jsx$1("p",{children:"You have signed this work"}):jsx$1("div",{className:collabStyles.border,children:jsxs("div",{className:collabStyles.flexBetween,children:[jsx$1("p",{children:"You are a core participant in this work but you haven’t signed it yet"}),jsx$1(Button,{shadow_box:!0,onClick:ae,children:"sign work now"})]})})},SigningSummary=({coreParticipants:re,signatures:ee})=>jsxs("div",{children:[jsx$1("h2",{className:collabStyles.mb1,children:jsx$1("strong",{children:"Signing status"})}),jsx$1("ul",{className:collabStyles.list,children:re.map(ne=>{const ae=ee.some(({shareholder_address:ce})=>ne.shareholder_address===ce);return jsxs("li",{children:[jsxs("a",{href:`/tz/${ne.shareholder_address}`,children:[get$5(ne,"shareholder_profile.name")||walletPreview(ne.shareholder_address),":"," "]}),ae?"✓":"❌"]},ne.shareholder_address)})})]}),swapLabel$1="_swapLabel_1umiv_216",teiaLabel="_teiaLabel_1umiv_232",styles$R={swapLabel:swapLabel$1,teiaLabel},ListingLabel=({children:re,className:ee,label:ne,alt:ae,tooltip:ce})=>jsx$1("div",{className:`${styles$R.swapLabel} ${ee||""}`,title:ce||ae,"aria-label":ae,children:ne}),TeiaLabel=()=>jsx$1(ListingLabel,{label:"TEIA",className:styles$R.teiaLabel,alt:"buy this listing and support teia"}),HENLabel=()=>jsx$1(ListingLabel,{label:"H=N",alt:"this listing is through the original HEN contract"}),OBJKTLabel=()=>jsx$1(ListingLabel,{label:"Objkt.com",alt:"This swap is through OBJKT.com"}),RestrictedLabel=()=>jsx$1(ListingLabel,{label:"Restricted",alt:"This swap is made by a restricted wallet."}),VersumLabel=()=>jsx$1(ListingLabel,{label:"Versum.xyz",alt:"This swap is through versum.xyz"}),MarketplaceLabel=({listing:re})=>re.type.startsWith("TEIA")?jsx$1(TeiaLabel,{}):re.type.startsWith("HEN")?jsx$1(HENLabel,{}):re.type.startsWith("OBJKT")?jsx$1(OBJKTLabel,{}):re.type.startsWith("VERSUM")?jsx$1(VersumLabel,{}):(console.error("Could not resolve the proper label for this listing",re),null),MarketplaceLabel$1=reactExports.memo(MarketplaceLabel),CheapestButton=({listing:re})=>{const[ee,ne,ae]=useUserStore(ce=>[ce.address,ce.sync,ce.collect]);return re?jsxs("div",{className:styles$S.main_swap,children:[jsx$1(MarketplaceLabel$1,{listing:re}),jsxs(Button,{onClick:()=>{ee==null?ne():ae(re)},full:!0,shadow_box:!0,children:["Collect for ",Number(re.price)/1e6," tez"]})]}):jsx$1(Button,{shadow_box:!0,full:!0,children:"Not for sale"})},CollabParticipant=({participant:re})=>{const ee=get$5(re,"shareholder_profile.name")?get$5(re,"shareholder_profile.name"):re.shareholder_address;return ee&&jsx$1(Link,{className:collabStyles.link,to:`${PATH.ISSUER}/${re.shareholder_address}`,children:ee})},ParticipantList=({title:re,participants:ee})=>jsx$1("div",{children:jsxs("div",{className:collabStyles.flex,children:[re&&jsx$1("p",{className:collabStyles.infoLabel,children:jsxs("span",{children:[re,":"]})}),jsx$1("div",{children:ee.map((ne,ae)=>[ae>0&&ae<ee.length-1&&", ",ae>0&&ae===ee.length-1&&", ",jsx$1(CollabParticipant,{participant:ne},ne.shareholder_address)])})]})}),ParticipantList$1=reactExports.memo(ParticipantList),CollabIssuerInfo=({creator:re})=>{const{name:ee,user_address:ne}=re,[ae,ce]=reactExports.useState(!1),le=get$5(re,"split_contract.shareholders",[]).filter(he=>he.holder_type===CollaboratorType.CORE_PARTICIPANT),ue=ee?`/collab/${ee}`:`${PATH.COLLAB}/${ne}`;return jsxs("div",{onMouseOver:()=>ce(!0),onFocus:()=>ce(!0),onMouseOut:()=>ce(!1),onBlur:()=>ce(!1),children:[jsx$1(Button,{className:collabStyles.issuerBtn,to:ue,children:ee===""?walletPreview(ne):ee}),ae&&jsx$1("div",{className:collabStyles.collabInfo,children:jsx$1(ParticipantList$1,{title:!1,participants:le})})]})},Editions=({prefix:re,nft:ee,className:ne})=>{const{walletBlockMap:ae,isLoading:ce}=useSettings(),ue=reactExports.useMemo(()=>{var he;if(!ce)return lodashExports.sum((he=ee.listings)==null?void 0:he.filter(fe=>ae.get(fe.seller_address)!==1).map(({amount_left:fe})=>fe))},[ce,ee.listings,ae])||"X";return jsx$1("div",{className:ne,children:jsx$1("p",{children:re?jsxs("span",{children:["Editions:",jsxs("span",{children:[ue,"/",ee.editions]})]}):jsxs("span",{children:[ue,"/",ee.editions]})})})},Editions$1=reactExports.memo(Editions),ItemInfo=({nft:re})=>{var Se,Te,ke,Ne;const ee=useUserStore(Fe=>Fe.address),{walletBlockMap:ne}=useSettings(),[ae,ce]=reactExports.useState(!1),le=ne.get(re.artist_address)===1,ue=re.listings.find(Fe=>ne.get(Fe.seller_address)!==1),he=get$5(re,"teia_meta.is_signed"),fe=get$5(re,"artist_profile.is_split"),me=fe&&he?"✓ ":"⚠️",ge=fe&&he?"VERIFIED":"UNVERIFIED",ve=((Te=(Se=re==null?void 0:re.artist_profile)==null?void 0:Se.split_contract)==null?void 0:Te.shareholders)||[],ye=fe?ve.some(({shareholder_address:Fe,holder_type:De})=>ee===Fe&&De===CollaboratorType.CORE_PARTICIPANT):!1,be=re.signatures.find(Fe=>Fe.shareholder_address===ee),Ee=fe?ve.filter(Fe=>Fe.holder_type===CollaboratorType.CORE_PARTICIPANT):null,Ce=classNames$1(collabStyles.flexBetween,collabStyles.alignStart);return jsxs(Fragment,{children:[fe&&ye&&!be&&jsx$1(SigningUI,{id:re.token_id,hasSigned:!1}),jsx$1("div",{className:styles$S.container,children:jsxs("div",{className:styles$S.edition,children:[jsx$1("div",{className:collabStyles.relative,children:jsx$1("div",{className:styles$S.inline,children:fe?jsx$1(CollabIssuerInfo,{creator:re.artist_profile}):jsx$1(Button,{to:(ke=re.artist_profile)!=null&&ke.name?encodeURI(`/${re.artist_profile.name}`):`${PATH.ISSUER}/${re.artist_address}`,children:(Ne=re.artist_profile)!=null&&Ne.name?re.artist_profile.name:walletPreview(re.artist_address)})})}),jsx$1(Editions$1,{prefix:"Editions:",nft:re})]})}),!le&&jsxs("div",{className:`${styles$S.spread} ${styles$S.objkt_details_container}`,children:[jsxs("div",{className:styles$S.objkt_label_container,children:[jsxs("p",{className:styles$S.objkt_label,children:["OBJKT#",re.token_id]}),fe&&jsxs("div",{className:collabStyles.relative,children:[jsxs("div",{className:styles$S.collab_verification_title,children:[jsx$1("span",{className:styles$S.collab_verification_symbol,children:me}),jsx$1(Button,{onClick:()=>ce(!ae),children:ge})]}),ae&&jsx$1("div",{className:collabStyles.collabInfo,children:jsxs("div",{className:Ce,children:[jsx$1(SigningSummary,{coreParticipants:Ee,signatures:re.signatures}),jsx$1(Button,{onClick:()=>ce(!1),children:jsx$1(Secondary$1,{children:"close"})})]})})]})]}),jsx$1(CheapestButton,{listing:ue})]})]})},Price=({price:re})=>jsxs("div",{className:styles$S.price_box,children:[re,jsx$1(TezosIcon,{size:16})]}),ItemInfoCompact=({nft:re})=>{var le,ue;const[ee,ne]=useLocalSettings(he=>[he.zen,he.viewMode]),ae=useParams(),ce=ee?null:lodashExports.isNumber(re.price)?(Number(re.price)/1e6).toString():"X";return jsxs("div",{className:`${styles$S.compact_container} ${styles$S.masonry}`,children:[(ne==="single"||ae.id&&ae["*"]==="")&&jsxs(Button,{alt:`Go to OBJKT ${re.token_id}`,to:`${PATH.OBJKT}/${re.token_id}`,children:["#",re.token_id]}),jsx$1(Button,{className:styles$S.artist,activeClass:styles$S.hide,alt:`Go to artist page of token #${re.token_id}`,to:(le=re.artist_profile)!=null&&le.name?encodeURI(`/${re.artist_profile.name}`):`/tz/${re.artist_address}`,children:(ue=re.artist_profile)!=null&&ue.name?re.artist_profile.name:walletPreview(re.artist_address)}),jsx$1(Editions$1,{className:styles$S.editions,nft:re}),jsx$1(Price,{price:ce})]})},viewer="_viewer_15is3_1",container$t="_container_15is3_13",arButton="_arButton_15is3_34",styles$Q={viewer,container:container$t,arButton};var build={exports:{}};(()=>{var re={296:(ce,le,ue)=>{var he=/^\s+|\s+$/g,fe=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ge=/^0o[0-7]+$/i,ve=parseInt,ye=typeof ue.g=="object"&&ue.g&&ue.g.Object===Object&&ue.g,be=typeof self=="object"&&self&&self.Object===Object&&self,Ee=ye||be||Function("return this")(),Ce=Object.prototype.toString,Se=Math.max,Te=Math.min,ke=function(){return Ee.Date.now()};function Ne(De){var Oe=typeof De;return!!De&&(Oe=="object"||Oe=="function")}function Fe(De){if(typeof De=="number")return De;if(function(Be){return typeof Be=="symbol"||function(Le){return!!Le&&typeof Le=="object"}(Be)&&Ce.call(Be)=="[object Symbol]"}(De))return NaN;if(Ne(De)){var Oe=typeof De.valueOf=="function"?De.valueOf():De;De=Ne(Oe)?Oe+"":Oe}if(typeof De!="string")return De===0?De:+De;De=De.replace(he,"");var Re=me.test(De);return Re||ge.test(De)?ve(De.slice(2),Re?2:8):fe.test(De)?NaN:+De}ce.exports=function(De,Oe,Re){var Be,Le,je,Ge,qe,Ue,ze=0,He=!1,Ye=!1,Xe=!0;if(typeof De!="function")throw new TypeError("Expected a function");function We(rn){var nn=Be,fn=Le;return Be=Le=void 0,ze=rn,Ge=De.apply(fn,nn)}function Ze(rn){return ze=rn,qe=setTimeout(Qt,Oe),He?We(rn):Ge}function Vt(rn){var nn=rn-Ue;return Ue===void 0||nn>=Oe||nn<0||Ye&&rn-ze>=je}function Qt(){var rn=ke();if(Vt(rn))return Yt(rn);qe=setTimeout(Qt,function(nn){var fn=Oe-(nn-Ue);return Ye?Te(fn,je-(nn-ze)):fn}(rn))}function Yt(rn){return qe=void 0,Xe&&Be?We(rn):(Be=Le=void 0,Ge)}function Jt(){var rn=ke(),nn=Vt(rn);if(Be=arguments,Le=this,Ue=rn,nn){if(qe===void 0)return Ze(Ue);if(Ye)return qe=setTimeout(Qt,Oe),We(Ue)}return qe===void 0&&(qe=setTimeout(Qt,Oe)),Ge}return Oe=Fe(Oe)||0,Ne(Re)&&(He=!!Re.leading,je=(Ye="maxWait"in Re)?Se(Fe(Re.maxWait)||0,Oe):je,Xe="trailing"in Re?!!Re.trailing:Xe),Jt.cancel=function(){qe!==void 0&&clearTimeout(qe),ze=0,Be=Ue=Le=qe=void 0},Jt.flush=function(){return qe===void 0?Ge:Yt(ke())},Jt}},96:(ce,le,ue)=>{var he="Expected a function",fe=/^\s+|\s+$/g,me=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ve=/^0o[0-7]+$/i,ye=parseInt,be=typeof ue.g=="object"&&ue.g&&ue.g.Object===Object&&ue.g,Ee=typeof self=="object"&&self&&self.Object===Object&&self,Ce=be||Ee||Function("return this")(),Se=Object.prototype.toString,Te=Math.max,ke=Math.min,Ne=function(){return Ce.Date.now()};function Fe(Oe){var Re=typeof Oe;return!!Oe&&(Re=="object"||Re=="function")}function De(Oe){if(typeof Oe=="number")return Oe;if(function(Le){return typeof Le=="symbol"||function(je){return!!je&&typeof je=="object"}(Le)&&Se.call(Le)=="[object Symbol]"}(Oe))return NaN;if(Fe(Oe)){var Re=typeof Oe.valueOf=="function"?Oe.valueOf():Oe;Oe=Fe(Re)?Re+"":Re}if(typeof Oe!="string")return Oe===0?Oe:+Oe;Oe=Oe.replace(fe,"");var Be=ge.test(Oe);return Be||ve.test(Oe)?ye(Oe.slice(2),Be?2:8):me.test(Oe)?NaN:+Oe}ce.exports=function(Oe,Re,Be){var Le=!0,je=!0;if(typeof Oe!="function")throw new TypeError(he);return Fe(Be)&&(Le="leading"in Be?!!Be.leading:Le,je="trailing"in Be?!!Be.trailing:je),function(Ge,qe,Ue){var ze,He,Ye,Xe,We,Ze,Vt=0,Qt=!1,Yt=!1,Jt=!0;if(typeof Ge!="function")throw new TypeError(he);function rn(En){var $n=ze,On=He;return ze=He=void 0,Vt=En,Xe=Ge.apply(On,$n)}function nn(En){return Vt=En,We=setTimeout(an,qe),Qt?rn(En):Xe}function fn(En){var $n=En-Ze;return Ze===void 0||$n>=qe||$n<0||Yt&&En-Vt>=Ye}function an(){var En=Ne();if(fn(En))return un(En);We=setTimeout(an,function($n){var On=qe-($n-Ze);return Yt?ke(On,Ye-($n-Vt)):On}(En))}function un(En){return We=void 0,Jt&&ze?rn(En):(ze=He=void 0,Xe)}function bn(){var En=Ne(),$n=fn(En);if(ze=arguments,He=this,Ze=En,$n){if(We===void 0)return nn(Ze);if(Yt)return We=setTimeout(an,qe),rn(Ze)}return We===void 0&&(We=setTimeout(an,qe)),Xe}return qe=De(qe)||0,Fe(Ue)&&(Qt=!!Ue.leading,Ye=(Yt="maxWait"in Ue)?Te(De(Ue.maxWait)||0,qe):Ye,Jt="trailing"in Ue?!!Ue.trailing:Jt),bn.cancel=function(){We!==void 0&&clearTimeout(We),Vt=0,ze=Ze=He=We=void 0},bn.flush=function(){return We===void 0?Xe:un(Ne())},bn}(Oe,Re,{leading:Le,maxWait:Re,trailing:je})}},703:(ce,le,ue)=>{var he=ue(414);function fe(){}function me(){}me.resetWarningCache=fe,ce.exports=function(){function ge(be,Ee,Ce,Se,Te,ke){if(ke!==he){var Ne=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Ne.name="Invariant Violation",Ne}}function ve(){return ge}ge.isRequired=ge;var ye={array:ge,bool:ge,func:ge,number:ge,object:ge,string:ge,symbol:ge,any:ge,arrayOf:ve,element:ge,elementType:ge,instanceOf:ve,node:ge,objectOf:ve,oneOf:ve,oneOfType:ve,shape:ve,exact:ve,checkPropTypes:me,resetWarningCache:fe};return ye.PropTypes=ye,ye}},697:(ce,le,ue)=>{ce.exports=ue(703)()},414:ce=>{ce.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},ee={};function ne(ce){var le=ee[ce];if(le!==void 0)return le.exports;var ue=ee[ce]={exports:{}};return re[ce](ue,ue.exports,ne),ue.exports}ne.n=ce=>{var le=ce&&ce.__esModule?()=>ce.default:()=>ce;return ne.d(le,{a:le}),le},ne.d=(ce,le)=>{for(var ue in le)ne.o(le,ue)&&!ne.o(ce,ue)&&Object.defineProperty(ce,ue,{enumerable:!0,get:le[ue]})},ne.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),ne.o=(ce,le)=>Object.prototype.hasOwnProperty.call(ce,le),ne.r=ce=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ce,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ce,"__esModule",{value:!0})};var ae={};(()=>{ne.r(ae),ne.d(ae,{LazyLoadComponent:()=>tn,LazyLoadImage:()=>Jn,trackWindowScroll:()=>Qt});const ce=reactExports;var le=ne.n(ce),ue=ne(697);const he=reactDomExports;var fe=ne.n(he);function me(){return typeof window<"u"&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}function ge(gn){return(ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(cn){return typeof cn}:function(cn){return cn&&typeof Symbol=="function"&&cn.constructor===Symbol&&cn!==Symbol.prototype?"symbol":typeof cn})(gn)}function ve(gn,cn){var Fn=Object.keys(gn);if(Object.getOwnPropertySymbols){var In=Object.getOwnPropertySymbols(gn);cn&&(In=In.filter(function(cs){return Object.getOwnPropertyDescriptor(gn,cs).enumerable})),Fn.push.apply(Fn,In)}return Fn}function ye(gn,cn,Fn){return cn in gn?Object.defineProperty(gn,cn,{value:Fn,enumerable:!0,configurable:!0,writable:!0}):gn[cn]=Fn,gn}function be(gn,cn){for(var Fn=0;Fn<cn.length;Fn++){var In=cn[Fn];In.enumerable=In.enumerable||!1,In.configurable=!0,"value"in In&&(In.writable=!0),Object.defineProperty(gn,In.key,In)}}function Ee(gn,cn){return(Ee=Object.setPrototypeOf||function(Fn,In){return Fn.__proto__=In,Fn})(gn,cn)}function Ce(gn,cn){if(cn&&(ge(cn)==="object"||typeof cn=="function"))return cn;if(cn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Fn){if(Fn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Fn}(gn)}function Se(gn){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(cn){return cn.__proto__||Object.getPrototypeOf(cn)})(gn)}var Te=function(gn){gn.forEach(function(cn){cn.isIntersecting&&cn.target.onVisible()})},ke={},Ne=function(gn){(function(_n,kn){if(typeof kn!="function"&&kn!==null)throw new TypeError("Super expression must either be null or a function");_n.prototype=Object.create(kn&&kn.prototype,{constructor:{value:_n,writable:!0,configurable:!0}}),kn&&Ee(_n,kn)})(os,gn);var cn,Fn,In,cs,Ss=(In=os,cs=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _n,kn=Se(In);if(cs){var jn=Se(this).constructor;_n=Reflect.construct(kn,arguments,jn)}else _n=kn.apply(this,arguments);return Ce(this,_n)});function os(_n){var kn;if(function(Un,es){if(!(Un instanceof es))throw new TypeError("Cannot call a class as a function")}(this,os),(kn=Ss.call(this,_n)).supportsObserver=!_n.scrollPosition&&_n.useIntersectionObserver&&me(),kn.supportsObserver){var jn=_n.threshold;kn.observer=function(Un){return ke[Un]=ke[Un]||new IntersectionObserver(Te,{rootMargin:Un+"px"}),ke[Un]}(jn)}return kn}return cn=os,(Fn=[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.placeholder&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var _n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollPosition,kn=this.placeholder.getBoundingClientRect(),jn=fe().findDOMNode(this.placeholder).style,Un={left:parseInt(jn.getPropertyValue("margin-left"),10)||0,top:parseInt(jn.getPropertyValue("margin-top"),10)||0};return{bottom:_n.y+kn.bottom+Un.top,left:_n.x+kn.left+Un.left,right:_n.x+kn.right+Un.left,top:_n.y+kn.top+Un.top}}},{key:"isPlaceholderInViewport",value:function(){if(typeof window>"u"||!this.placeholder)return!1;var _n=this.props,kn=_n.scrollPosition,jn=_n.threshold,Un=this.getPlaceholderBoundingBox(kn),es=kn.y+window.innerHeight,ds=kn.x,As=kn.x+window.innerWidth,vs=kn.y;return vs-jn<=Un.bottom&&es+jn>=Un.top&&ds-jn<=Un.right&&As+jn>=Un.left}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var _n=this,kn=this.props,jn=kn.className,Un=kn.height,es=kn.placeholder,ds=kn.style,As=kn.width;if(es&&typeof es.type!="function")return le().cloneElement(es,{ref:function(fs){return _n.placeholder=fs}});var vs=function(fs){for(var Ts=1;Ts<arguments.length;Ts++){var Es=arguments[Ts]!=null?arguments[Ts]:{};Ts%2?ve(Object(Es),!0).forEach(function(Is){ye(fs,Is,Es[Is])}):Object.getOwnPropertyDescriptors?Object.defineProperties(fs,Object.getOwnPropertyDescriptors(Es)):ve(Object(Es)).forEach(function(Is){Object.defineProperty(fs,Is,Object.getOwnPropertyDescriptor(Es,Is))})}return fs}({display:"inline-block"},ds);return As!==void 0&&(vs.width=As),Un!==void 0&&(vs.height=Un),le().createElement("span",{className:jn,ref:function(fs){return _n.placeholder=fs},style:vs},es)}}])&&be(cn.prototype,Fn),os}(le().Component);Ne.propTypes={onVisible:ue.PropTypes.func.isRequired,className:ue.PropTypes.string,height:ue.PropTypes.oneOfType([ue.PropTypes.number,ue.PropTypes.string]),placeholder:ue.PropTypes.element,threshold:ue.PropTypes.number,useIntersectionObserver:ue.PropTypes.bool,scrollPosition:ue.PropTypes.shape({x:ue.PropTypes.number.isRequired,y:ue.PropTypes.number.isRequired}),width:ue.PropTypes.oneOfType([ue.PropTypes.number,ue.PropTypes.string])},Ne.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0};const Fe=Ne;var De=ne(296),Oe=ne.n(De),Re=ne(96),Be=ne.n(Re),Le=function(gn){var cn=getComputedStyle(gn,null);return cn.getPropertyValue("overflow")+cn.getPropertyValue("overflow-y")+cn.getPropertyValue("overflow-x")};const je=function(gn){if(!(gn instanceof HTMLElement))return window;for(var cn=gn;cn&&cn instanceof HTMLElement;){if(/(scroll|auto)/.test(Le(cn)))return cn;cn=cn.parentNode}return window};function Ge(gn){return(Ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(cn){return typeof cn}:function(cn){return cn&&typeof Symbol=="function"&&cn.constructor===Symbol&&cn!==Symbol.prototype?"symbol":typeof cn})(gn)}var qe=["delayMethod","delayTime"];function Ue(){return(Ue=Object.assign||function(gn){for(var cn=1;cn<arguments.length;cn++){var Fn=arguments[cn];for(var In in Fn)Object.prototype.hasOwnProperty.call(Fn,In)&&(gn[In]=Fn[In])}return gn}).apply(this,arguments)}function ze(gn,cn){for(var Fn=0;Fn<cn.length;Fn++){var In=cn[Fn];In.enumerable=In.enumerable||!1,In.configurable=!0,"value"in In&&(In.writable=!0),Object.defineProperty(gn,In.key,In)}}function He(gn,cn){return(He=Object.setPrototypeOf||function(Fn,In){return Fn.__proto__=In,Fn})(gn,cn)}function Ye(gn,cn){if(cn&&(Ge(cn)==="object"||typeof cn=="function"))return cn;if(cn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xe(gn)}function Xe(gn){if(gn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return gn}function We(gn){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(cn){return cn.__proto__||Object.getPrototypeOf(cn)})(gn)}var Ze=function(){return typeof window>"u"?0:window.scrollX||window.pageXOffset},Vt=function(){return typeof window>"u"?0:window.scrollY||window.pageYOffset};const Qt=function(gn){var cn=function(Fn){(function(jn,Un){if(typeof Un!="function"&&Un!==null)throw new TypeError("Super expression must either be null or a function");jn.prototype=Object.create(Un&&Un.prototype,{constructor:{value:jn,writable:!0,configurable:!0}}),Un&&He(jn,Un)})(kn,Fn);var In,cs,Ss,os,_n=(Ss=kn,os=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var jn,Un=We(Ss);if(os){var es=We(this).constructor;jn=Reflect.construct(Un,arguments,es)}else jn=Un.apply(this,arguments);return Ye(this,jn)});function kn(jn){var Un;if(function(ds,As){if(!(ds instanceof As))throw new TypeError("Cannot call a class as a function")}(this,kn),(Un=_n.call(this,jn)).useIntersectionObserver=jn.useIntersectionObserver&&me(),Un.useIntersectionObserver)return Ye(Un);var es=Un.onChangeScroll.bind(Xe(Un));return jn.delayMethod==="debounce"?Un.delayedScroll=Oe()(es,jn.delayTime):jn.delayMethod==="throttle"&&(Un.delayedScroll=Be()(es,jn.delayTime)),Un.state={scrollPosition:{x:Ze(),y:Vt()}},Un.baseComponentRef=le().createRef(),Un}return In=kn,(cs=[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){typeof window>"u"||this.useIntersectionObserver||je(fe().findDOMNode(this.baseComponentRef.current))!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement=je(fe().findDOMNode(this.baseComponentRef.current)),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:Ze(),y:Vt()}})}},{key:"render",value:function(){var jn=this.props,Un=(jn.delayMethod,jn.delayTime,function(ds,As){if(ds==null)return{};var vs,fs,Ts=function(Is,hr){if(Is==null)return{};var Ls,Cr,Fr={},ti=Object.keys(Is);for(Cr=0;Cr<ti.length;Cr++)Ls=ti[Cr],hr.indexOf(Ls)>=0||(Fr[Ls]=Is[Ls]);return Fr}(ds,As);if(Object.getOwnPropertySymbols){var Es=Object.getOwnPropertySymbols(ds);for(fs=0;fs<Es.length;fs++)vs=Es[fs],As.indexOf(vs)>=0||Object.prototype.propertyIsEnumerable.call(ds,vs)&&(Ts[vs]=ds[vs])}return Ts}(jn,qe)),es=this.useIntersectionObserver?null:this.state.scrollPosition;return le().createElement(gn,Ue({forwardRef:this.baseComponentRef,scrollPosition:es},Un))}}])&&ze(In.prototype,cs),kn}(le().Component);return cn.propTypes={delayMethod:ue.PropTypes.oneOf(["debounce","throttle"]),delayTime:ue.PropTypes.number,useIntersectionObserver:ue.PropTypes.bool},cn.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},cn};function Yt(gn){return(Yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(cn){return typeof cn}:function(cn){return cn&&typeof Symbol=="function"&&cn.constructor===Symbol&&cn!==Symbol.prototype?"symbol":typeof cn})(gn)}function Jt(gn,cn){for(var Fn=0;Fn<cn.length;Fn++){var In=cn[Fn];In.enumerable=In.enumerable||!1,In.configurable=!0,"value"in In&&(In.writable=!0),Object.defineProperty(gn,In.key,In)}}function rn(gn,cn){return(rn=Object.setPrototypeOf||function(Fn,In){return Fn.__proto__=In,Fn})(gn,cn)}function nn(gn,cn){if(cn&&(Yt(cn)==="object"||typeof cn=="function"))return cn;if(cn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Fn){if(Fn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Fn}(gn)}function fn(gn){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(cn){return cn.__proto__||Object.getPrototypeOf(cn)})(gn)}var an=function(gn){(function(_n,kn){if(typeof kn!="function"&&kn!==null)throw new TypeError("Super expression must either be null or a function");_n.prototype=Object.create(kn&&kn.prototype,{constructor:{value:_n,writable:!0,configurable:!0}}),kn&&rn(_n,kn)})(os,gn);var cn,Fn,In,cs,Ss=(In=os,cs=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _n,kn=fn(In);if(cs){var jn=fn(this).constructor;_n=Reflect.construct(kn,arguments,jn)}else _n=kn.apply(this,arguments);return nn(this,_n)});function os(_n){return function(kn,jn){if(!(kn instanceof jn))throw new TypeError("Cannot call a class as a function")}(this,os),Ss.call(this,_n)}return cn=os,(Fn=[{key:"render",value:function(){return le().createElement(Fe,this.props)}}])&&Jt(cn.prototype,Fn),os}(le().Component);const un=Qt(an);function bn(gn){return(bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(cn){return typeof cn}:function(cn){return cn&&typeof Symbol=="function"&&cn.constructor===Symbol&&cn!==Symbol.prototype?"symbol":typeof cn})(gn)}function En(gn,cn){for(var Fn=0;Fn<cn.length;Fn++){var In=cn[Fn];In.enumerable=In.enumerable||!1,In.configurable=!0,"value"in In&&(In.writable=!0),Object.defineProperty(gn,In.key,In)}}function $n(gn,cn){return($n=Object.setPrototypeOf||function(Fn,In){return Fn.__proto__=In,Fn})(gn,cn)}function On(gn,cn){if(cn&&(bn(cn)==="object"||typeof cn=="function"))return cn;if(cn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zn(gn)}function zn(gn){if(gn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return gn}function Rn(gn){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(cn){return cn.__proto__||Object.getPrototypeOf(cn)})(gn)}var Ut=function(gn){(function(_n,kn){if(typeof kn!="function"&&kn!==null)throw new TypeError("Super expression must either be null or a function");_n.prototype=Object.create(kn&&kn.prototype,{constructor:{value:_n,writable:!0,configurable:!0}}),kn&&$n(_n,kn)})(os,gn);var cn,Fn,In,cs,Ss=(In=os,cs=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _n,kn=Rn(In);if(cs){var jn=Rn(this).constructor;_n=Reflect.construct(kn,arguments,jn)}else _n=kn.apply(this,arguments);return On(this,_n)});function os(_n){var kn;(function(As,vs){if(!(As instanceof vs))throw new TypeError("Cannot call a class as a function")})(this,os),kn=Ss.call(this,_n);var jn=_n.afterLoad,Un=_n.beforeLoad,es=_n.scrollPosition,ds=_n.visibleByDefault;return kn.state={visible:ds},ds&&(Un(),jn()),kn.onVisible=kn.onVisible.bind(zn(kn)),kn.isScrollTracked=!!(es&&Number.isFinite(es.x)&&es.x>=0&&Number.isFinite(es.y)&&es.y>=0),kn}return cn=os,(Fn=[{key:"componentDidUpdate",value:function(_n,kn){kn.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var _n=this.props,kn=_n.className,jn=_n.delayMethod,Un=_n.delayTime,es=_n.height,ds=_n.placeholder,As=_n.scrollPosition,vs=_n.style,fs=_n.threshold,Ts=_n.useIntersectionObserver,Es=_n.width;return this.isScrollTracked||Ts&&me()?le().createElement(Fe,{className:kn,height:es,onVisible:this.onVisible,placeholder:ds,scrollPosition:As,style:vs,threshold:fs,useIntersectionObserver:Ts,width:Es}):le().createElement(un,{className:kn,delayMethod:jn,delayTime:Un,height:es,onVisible:this.onVisible,placeholder:ds,style:vs,threshold:fs,width:Es})}}])&&En(cn.prototype,Fn),os}(le().Component);Ut.propTypes={afterLoad:ue.PropTypes.func,beforeLoad:ue.PropTypes.func,useIntersectionObserver:ue.PropTypes.bool,visibleByDefault:ue.PropTypes.bool},Ut.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1};const tn=Ut;function dn(gn){return(dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(cn){return typeof cn}:function(cn){return cn&&typeof Symbol=="function"&&cn.constructor===Symbol&&cn!==Symbol.prototype?"symbol":typeof cn})(gn)}var xn=["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"];function An(gn,cn){var Fn=Object.keys(gn);if(Object.getOwnPropertySymbols){var In=Object.getOwnPropertySymbols(gn);cn&&(In=In.filter(function(cs){return Object.getOwnPropertyDescriptor(gn,cs).enumerable})),Fn.push.apply(Fn,In)}return Fn}function vn(gn){for(var cn=1;cn<arguments.length;cn++){var Fn=arguments[cn]!=null?arguments[cn]:{};cn%2?An(Object(Fn),!0).forEach(function(In){Nn(gn,In,Fn[In])}):Object.getOwnPropertyDescriptors?Object.defineProperties(gn,Object.getOwnPropertyDescriptors(Fn)):An(Object(Fn)).forEach(function(In){Object.defineProperty(gn,In,Object.getOwnPropertyDescriptor(Fn,In))})}return gn}function Nn(gn,cn,Fn){return cn in gn?Object.defineProperty(gn,cn,{value:Fn,enumerable:!0,configurable:!0,writable:!0}):gn[cn]=Fn,gn}function Gn(){return(Gn=Object.assign||function(gn){for(var cn=1;cn<arguments.length;cn++){var Fn=arguments[cn];for(var In in Fn)Object.prototype.hasOwnProperty.call(Fn,In)&&(gn[In]=Fn[In])}return gn}).apply(this,arguments)}function Wn(gn,cn){for(var Fn=0;Fn<cn.length;Fn++){var In=cn[Fn];In.enumerable=In.enumerable||!1,In.configurable=!0,"value"in In&&(In.writable=!0),Object.defineProperty(gn,In.key,In)}}function Vn(gn,cn){return(Vn=Object.setPrototypeOf||function(Fn,In){return Fn.__proto__=In,Fn})(gn,cn)}function Hn(gn,cn){if(cn&&(dn(cn)==="object"||typeof cn=="function"))return cn;if(cn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Fn){if(Fn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Fn}(gn)}function hs(gn){return(hs=Object.setPrototypeOf?Object.getPrototypeOf:function(cn){return cn.__proto__||Object.getPrototypeOf(cn)})(gn)}var Pn=function(gn){(function(_n,kn){if(typeof kn!="function"&&kn!==null)throw new TypeError("Super expression must either be null or a function");_n.prototype=Object.create(kn&&kn.prototype,{constructor:{value:_n,writable:!0,configurable:!0}}),kn&&Vn(_n,kn)})(os,gn);var cn,Fn,In,cs,Ss=(In=os,cs=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _n,kn=hs(In);if(cs){var jn=hs(this).constructor;_n=Reflect.construct(kn,arguments,jn)}else _n=kn.apply(this,arguments);return Hn(this,_n)});function os(_n){var kn;return function(jn,Un){if(!(jn instanceof Un))throw new TypeError("Cannot call a class as a function")}(this,os),(kn=Ss.call(this,_n)).state={loaded:!1},kn}return cn=os,(Fn=[{key:"onImageLoad",value:function(){var _n=this;return this.state.loaded?null:function(){_n.props.afterLoad(),_n.setState({loaded:!0})}}},{key:"getImg",value:function(){var _n=this.props,kn=(_n.afterLoad,_n.beforeLoad,_n.delayMethod,_n.delayTime,_n.effect,_n.placeholder,_n.placeholderSrc,_n.scrollPosition,_n.threshold,_n.useIntersectionObserver,_n.visibleByDefault,_n.wrapperClassName,_n.wrapperProps,function(jn,Un){if(jn==null)return{};var es,ds,As=function(fs,Ts){if(fs==null)return{};var Es,Is,hr={},Ls=Object.keys(fs);for(Is=0;Is<Ls.length;Is++)Es=Ls[Is],Ts.indexOf(Es)>=0||(hr[Es]=fs[Es]);return hr}(jn,Un);if(Object.getOwnPropertySymbols){var vs=Object.getOwnPropertySymbols(jn);for(ds=0;ds<vs.length;ds++)es=vs[ds],Un.indexOf(es)>=0||Object.prototype.propertyIsEnumerable.call(jn,es)&&(As[es]=jn[es])}return As}(_n,xn));return le().createElement("img",Gn({onLoad:this.onImageLoad()},kn))}},{key:"getLazyLoadImage",value:function(){var _n=this.props,kn=_n.beforeLoad,jn=_n.className,Un=_n.delayMethod,es=_n.delayTime,ds=_n.height,As=_n.placeholder,vs=_n.scrollPosition,fs=_n.style,Ts=_n.threshold,Es=_n.useIntersectionObserver,Is=_n.visibleByDefault,hr=_n.width;return le().createElement(tn,{beforeLoad:kn,className:jn,delayMethod:Un,delayTime:es,height:ds,placeholder:As,scrollPosition:vs,style:fs,threshold:Ts,useIntersectionObserver:Es,visibleByDefault:Is,width:hr},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(_n){var kn=this.props,jn=kn.effect,Un=kn.height,es=kn.placeholderSrc,ds=kn.width,As=kn.wrapperClassName,vs=kn.wrapperProps,fs=this.state.loaded,Ts=fs?" lazy-load-image-loaded":"",Es=fs||!es?{}:{backgroundImage:"url(".concat(es,")"),backgroundSize:"100% 100%"};return le().createElement("span",Gn({className:As+" lazy-load-image-background "+jn+Ts,style:vn(vn({},Es),{},{color:"transparent",display:"inline-block",height:Un,width:ds})},vs),_n)}},{key:"render",value:function(){var _n=this.props,kn=_n.effect,jn=_n.placeholderSrc,Un=_n.visibleByDefault,es=_n.wrapperClassName,ds=_n.wrapperProps,As=this.getLazyLoadImage();return(kn||jn)&&!Un||es||ds?this.getWrappedLazyLoadImage(As):As}}])&&Wn(cn.prototype,Fn),os}(le().Component);Pn.propTypes={afterLoad:ue.PropTypes.func,beforeLoad:ue.PropTypes.func,delayMethod:ue.PropTypes.string,delayTime:ue.PropTypes.number,effect:ue.PropTypes.string,placeholderSrc:ue.PropTypes.string,threshold:ue.PropTypes.number,useIntersectionObserver:ue.PropTypes.bool,visibleByDefault:ue.PropTypes.bool,wrapperClassName:ue.PropTypes.string,wrapperProps:ue.PropTypes.object},Pn.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""};const Jn=Pn})(),build.exports=ae})();var buildExports=build.exports;const style$4="_style_1avr2_216",container$s="_container_1avr2_226",image="_image_1avr2_226",smol$1="_smol_1avr2_234",styles$P={style:style$4,container:container$s,image,smol:smol$1},ImageComponent=({artifactUri:re,displayUri:ee,previewUri:ne,displayView:ae,nft:ce})=>{var ve;const[le,ue]=reactExports.useState(!1),he=useLocalSettings(ye=>ye.imgproxy);let fe;ne?fe=ne:ae?fe=re:he&&((ve=ce==null?void 0:ce.teia_meta)!=null&&ve.preview_uri)?fe=`https://imgproxy.teia.rocks${ce.teia_meta.preview_uri}`:fe=ee;const me=ye=>{console.error(ye)},ge=({target:ye})=>{const be=ye.naturalWidth,Ee=ye.naturalHeight;be+Ee<256&&ue(!0)};return ae?jsx$1(Fragment,{children:jsx$1(buildExports.LazyLoadImage,{className:`${styles$P.style} ${le?styles$P.smol:""}`,src:fe,width:600,alt:`object ${ce.token_id} image`,onLoad:ge,onError:me})}):jsx$1("div",{className:styles$P.container,children:jsx$1(buildExports.LazyLoadImage,{className:`${styles$P.image} ${le?styles$P.smol:""}`,src:fe,width:600,onLoad:ge,alt:`object ${ce.token_id} image`,onError:me})})};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const i$4=(re,ee)=>ee.kind==="method"&&ee.descriptor&&!("value"in ee.descriptor)?{...ee,finisher(ne){ne.createProperty(ee.key,re)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:ee.key,initializer(){typeof ee.initializer=="function"&&(this[ee.key]=ee.initializer.call(this))},finisher(ne){ne.createProperty(ee.key,re)}};function e$4(re){return(ee,ne)=>ne!==void 0?((ae,ce,le)=>{ce.constructor.createProperty(le,ae)})(re,ee,ne):i$4(re,ee)}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var n$6;((n$6=window.HTMLSlotElement)===null||n$6===void 0?void 0:n$6.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t$3=window,e$3=t$3.ShadowRoot&&(t$3.ShadyCSS===void 0||t$3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$4=Symbol(),n$5=new WeakMap;let o$4=class{constructor(ee,ne,ae){if(this._$cssResult$=!0,ae!==s$4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=ee,this.t=ne}get styleSheet(){let ee=this.o;const ne=this.t;if(e$3&&ee===void 0){const ae=ne!==void 0&&ne.length===1;ae&&(ee=n$5.get(ne)),ee===void 0&&((this.o=ee=new CSSStyleSheet).replaceSync(this.cssText),ae&&n$5.set(ne,ee))}return ee}toString(){return this.cssText}};const r$4=re=>new o$4(typeof re=="string"?re:re+"",void 0,s$4),S$1=(re,ee)=>{e$3?re.adoptedStyleSheets=ee.map(ne=>ne instanceof CSSStyleSheet?ne:ne.styleSheet):ee.forEach(ne=>{const ae=document.createElement("style"),ce=t$3.litNonce;ce!==void 0&&ae.setAttribute("nonce",ce),ae.textContent=ne.cssText,re.appendChild(ae)})},c$4=e$3?re=>re:re=>re instanceof CSSStyleSheet?(ee=>{let ne="";for(const ae of ee.cssRules)ne+=ae.cssText;return r$4(ne)})(re):re;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var s$3;const e$2=window,r$3=e$2.trustedTypes,h$2=r$3?r$3.emptyScript:"",o$3=e$2.reactiveElementPolyfillSupport,n$4={toAttribute(re,ee){switch(ee){case Boolean:re=re?h$2:null;break;case Object:case Array:re=re==null?re:JSON.stringify(re)}return re},fromAttribute(re,ee){let ne=re;switch(ee){case Boolean:ne=re!==null;break;case Number:ne=re===null?null:Number(re);break;case Object:case Array:try{ne=JSON.parse(re)}catch{ne=null}}return ne}},a$2=(re,ee)=>ee!==re&&(ee==ee||re==re),l$3={attribute:!0,type:String,converter:n$4,reflect:!1,hasChanged:a$2};let d$2=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(ee){var ne;this.finalize(),((ne=this.h)!==null&&ne!==void 0?ne:this.h=[]).push(ee)}static get observedAttributes(){this.finalize();const ee=[];return this.elementProperties.forEach((ne,ae)=>{const ce=this._$Ep(ae,ne);ce!==void 0&&(this._$Ev.set(ce,ae),ee.push(ce))}),ee}static createProperty(ee,ne=l$3){if(ne.state&&(ne.attribute=!1),this.finalize(),this.elementProperties.set(ee,ne),!ne.noAccessor&&!this.prototype.hasOwnProperty(ee)){const ae=typeof ee=="symbol"?Symbol():"__"+ee,ce=this.getPropertyDescriptor(ee,ae,ne);ce!==void 0&&Object.defineProperty(this.prototype,ee,ce)}}static getPropertyDescriptor(ee,ne,ae){return{get(){return this[ne]},set(ce){const le=this[ee];this[ne]=ce,this.requestUpdate(ee,le,ae)},configurable:!0,enumerable:!0}}static getPropertyOptions(ee){return this.elementProperties.get(ee)||l$3}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const ee=Object.getPrototypeOf(this);if(ee.finalize(),ee.h!==void 0&&(this.h=[...ee.h]),this.elementProperties=new Map(ee.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const ne=this.properties,ae=[...Object.getOwnPropertyNames(ne),...Object.getOwnPropertySymbols(ne)];for(const ce of ae)this.createProperty(ce,ne[ce])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(ee){const ne=[];if(Array.isArray(ee)){const ae=new Set(ee.flat(1/0).reverse());for(const ce of ae)ne.unshift(c$4(ce))}else ee!==void 0&&ne.push(c$4(ee));return ne}static _$Ep(ee,ne){const ae=ne.attribute;return ae===!1?void 0:typeof ae=="string"?ae:typeof ee=="string"?ee.toLowerCase():void 0}u(){var ee;this._$E_=new Promise(ne=>this.enableUpdating=ne),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(ee=this.constructor.h)===null||ee===void 0||ee.forEach(ne=>ne(this))}addController(ee){var ne,ae;((ne=this._$ES)!==null&&ne!==void 0?ne:this._$ES=[]).push(ee),this.renderRoot!==void 0&&this.isConnected&&((ae=ee.hostConnected)===null||ae===void 0||ae.call(ee))}removeController(ee){var ne;(ne=this._$ES)===null||ne===void 0||ne.splice(this._$ES.indexOf(ee)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((ee,ne)=>{this.hasOwnProperty(ne)&&(this._$Ei.set(ne,this[ne]),delete this[ne])})}createRenderRoot(){var ee;const ne=(ee=this.shadowRoot)!==null&&ee!==void 0?ee:this.attachShadow(this.constructor.shadowRootOptions);return S$1(ne,this.constructor.elementStyles),ne}connectedCallback(){var ee;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(ee=this._$ES)===null||ee===void 0||ee.forEach(ne=>{var ae;return(ae=ne.hostConnected)===null||ae===void 0?void 0:ae.call(ne)})}enableUpdating(ee){}disconnectedCallback(){var ee;(ee=this._$ES)===null||ee===void 0||ee.forEach(ne=>{var ae;return(ae=ne.hostDisconnected)===null||ae===void 0?void 0:ae.call(ne)})}attributeChangedCallback(ee,ne,ae){this._$AK(ee,ae)}_$EO(ee,ne,ae=l$3){var ce;const le=this.constructor._$Ep(ee,ae);if(le!==void 0&&ae.reflect===!0){const ue=(((ce=ae.converter)===null||ce===void 0?void 0:ce.toAttribute)!==void 0?ae.converter:n$4).toAttribute(ne,ae.type);this._$El=ee,ue==null?this.removeAttribute(le):this.setAttribute(le,ue),this._$El=null}}_$AK(ee,ne){var ae;const ce=this.constructor,le=ce._$Ev.get(ee);if(le!==void 0&&this._$El!==le){const ue=ce.getPropertyOptions(le),he=typeof ue.converter=="function"?{fromAttribute:ue.converter}:((ae=ue.converter)===null||ae===void 0?void 0:ae.fromAttribute)!==void 0?ue.converter:n$4;this._$El=le,this[le]=he.fromAttribute(ne,ue.type),this._$El=null}}requestUpdate(ee,ne,ae){let ce=!0;ee!==void 0&&(((ae=ae||this.constructor.getPropertyOptions(ee)).hasChanged||a$2)(this[ee],ne)?(this._$AL.has(ee)||this._$AL.set(ee,ne),ae.reflect===!0&&this._$El!==ee&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(ee,ae))):ce=!1),!this.isUpdatePending&&ce&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(ne){Promise.reject(ne)}const ee=this.scheduleUpdate();return ee!=null&&await ee,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var ee;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((ce,le)=>this[le]=ce),this._$Ei=void 0);let ne=!1;const ae=this._$AL;try{ne=this.shouldUpdate(ae),ne?(this.willUpdate(ae),(ee=this._$ES)===null||ee===void 0||ee.forEach(ce=>{var le;return(le=ce.hostUpdate)===null||le===void 0?void 0:le.call(ce)}),this.update(ae)):this._$Ek()}catch(ce){throw ne=!1,this._$Ek(),ce}ne&&this._$AE(ae)}willUpdate(ee){}_$AE(ee){var ne;(ne=this._$ES)===null||ne===void 0||ne.forEach(ae=>{var ce;return(ce=ae.hostUpdated)===null||ce===void 0?void 0:ce.call(ae)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(ee)),this.updated(ee)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(ee){return!0}update(ee){this._$EC!==void 0&&(this._$EC.forEach((ne,ae)=>this._$EO(ae,this[ae],ne)),this._$EC=void 0),this._$Ek()}updated(ee){}firstUpdated(ee){}};d$2.finalized=!0,d$2.elementProperties=new Map,d$2.elementStyles=[],d$2.shadowRootOptions={mode:"open"},o$3==null||o$3({ReactiveElement:d$2}),((s$3=e$2.reactiveElementVersions)!==null&&s$3!==void 0?s$3:e$2.reactiveElementVersions=[]).push("1.6.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var t$2;const i$3=window,s$2=i$3.trustedTypes,e$1=s$2?s$2.createPolicy("lit-html",{createHTML:re=>re}):void 0,o$2=`lit$${(Math.random()+"").slice(9)}$`,n$3="?"+o$2,l$2=`<${n$3}>`,h$1=document,r$2=(re="")=>h$1.createComment(re),d$1=re=>re===null||typeof re!="object"&&typeof re!="function",u=Array.isArray,c$3=re=>u(re)||typeof(re==null?void 0:re[Symbol.iterator])=="function",v$1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,a$1=/-->/g,f$1=/>/g,_=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),m$3=/'/g,p$3=/"/g,$=/^(?:script|style|textarea|title)$/i,g$2=re=>(ee,...ne)=>({_$litType$:re,strings:ee,values:ne}),y$1=g$2(1),x$4=Symbol.for("lit-noChange"),b$2=Symbol.for("lit-nothing"),T=new WeakMap,A$2=h$1.createTreeWalker(h$1,129,null,!1),E=(re,ee)=>{const ne=re.length-1,ae=[];let ce,le=ee===2?"<svg>":"",ue=v$1;for(let fe=0;fe<ne;fe++){const me=re[fe];let ge,ve,ye=-1,be=0;for(;be<me.length&&(ue.lastIndex=be,ve=ue.exec(me),ve!==null);)be=ue.lastIndex,ue===v$1?ve[1]==="!--"?ue=a$1:ve[1]!==void 0?ue=f$1:ve[2]!==void 0?($.test(ve[2])&&(ce=RegExp("</"+ve[2],"g")),ue=_):ve[3]!==void 0&&(ue=_):ue===_?ve[0]===">"?(ue=ce??v$1,ye=-1):ve[1]===void 0?ye=-2:(ye=ue.lastIndex-ve[2].length,ge=ve[1],ue=ve[3]===void 0?_:ve[3]==='"'?p$3:m$3):ue===p$3||ue===m$3?ue=_:ue===a$1||ue===f$1?ue=v$1:(ue=_,ce=void 0);const Ee=ue===_&&re[fe+1].startsWith("/>")?" ":"";le+=ue===v$1?me+l$2:ye>=0?(ae.push(ge),me.slice(0,ye)+"$lit$"+me.slice(ye)+o$2+Ee):me+o$2+(ye===-2?(ae.push(void 0),fe):Ee)}const he=le+(re[ne]||"<?>")+(ee===2?"</svg>":"");if(!Array.isArray(re)||!re.hasOwnProperty("raw"))throw Error("invalid template strings array");return[e$1!==void 0?e$1.createHTML(he):he,ae]};let C$1=class Du{constructor({strings:ee,_$litType$:ne},ae){let ce;this.parts=[];let le=0,ue=0;const he=ee.length-1,fe=this.parts,[me,ge]=E(ee,ne);if(this.el=Du.createElement(me,ae),A$2.currentNode=this.el.content,ne===2){const ve=this.el.content,ye=ve.firstChild;ye.remove(),ve.append(...ye.childNodes)}for(;(ce=A$2.nextNode())!==null&&fe.length<he;){if(ce.nodeType===1){if(ce.hasAttributes()){const ve=[];for(const ye of ce.getAttributeNames())if(ye.endsWith("$lit$")||ye.startsWith(o$2)){const be=ge[ue++];if(ve.push(ye),be!==void 0){const Ee=ce.getAttribute(be.toLowerCase()+"$lit$").split(o$2),Ce=/([.?@])?(.*)/.exec(be);fe.push({type:1,index:le,name:Ce[2],strings:Ee,ctor:Ce[1]==="."?M$1:Ce[1]==="?"?k$1:Ce[1]==="@"?H:S})}else fe.push({type:6,index:le})}for(const ye of ve)ce.removeAttribute(ye)}if($.test(ce.tagName)){const ve=ce.textContent.split(o$2),ye=ve.length-1;if(ye>0){ce.textContent=s$2?s$2.emptyScript:"";for(let be=0;be<ye;be++)ce.append(ve[be],r$2()),A$2.nextNode(),fe.push({type:2,index:++le});ce.append(ve[ye],r$2())}}}else if(ce.nodeType===8)if(ce.data===n$3)fe.push({type:2,index:le});else{let ve=-1;for(;(ve=ce.data.indexOf(o$2,ve+1))!==-1;)fe.push({type:7,index:le}),ve+=o$2.length-1}le++}}static createElement(ee,ne){const ae=h$1.createElement("template");return ae.innerHTML=ee,ae}};function P(re,ee,ne=re,ae){var ce,le,ue,he;if(ee===x$4)return ee;let fe=ae!==void 0?(ce=ne._$Co)===null||ce===void 0?void 0:ce[ae]:ne._$Cl;const me=d$1(ee)?void 0:ee._$litDirective$;return(fe==null?void 0:fe.constructor)!==me&&((le=fe==null?void 0:fe._$AO)===null||le===void 0||le.call(fe,!1),me===void 0?fe=void 0:(fe=new me(re),fe._$AT(re,ne,ae)),ae!==void 0?((ue=(he=ne)._$Co)!==null&&ue!==void 0?ue:he._$Co=[])[ae]=fe:ne._$Cl=fe),fe!==void 0&&(ee=P(re,fe._$AS(re,ee.values),fe,ae)),ee}class V{constructor(ee,ne){this.u=[],this._$AN=void 0,this._$AD=ee,this._$AM=ne}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(ee){var ne;const{el:{content:ae},parts:ce}=this._$AD,le=((ne=ee==null?void 0:ee.creationScope)!==null&&ne!==void 0?ne:h$1).importNode(ae,!0);A$2.currentNode=le;let ue=A$2.nextNode(),he=0,fe=0,me=ce[0];for(;me!==void 0;){if(he===me.index){let ge;me.type===2?ge=new N(ue,ue.nextSibling,this,ee):me.type===1?ge=new me.ctor(ue,me.name,me.strings,this,ee):me.type===6&&(ge=new I$1(ue,this,ee)),this.u.push(ge),me=ce[++fe]}he!==(me==null?void 0:me.index)&&(ue=A$2.nextNode(),he++)}return le}p(ee){let ne=0;for(const ae of this.u)ae!==void 0&&(ae.strings!==void 0?(ae._$AI(ee,ae,ne),ne+=ae.strings.length-2):ae._$AI(ee[ne])),ne++}}class N{constructor(ee,ne,ae,ce){var le;this.type=2,this._$AH=b$2,this._$AN=void 0,this._$AA=ee,this._$AB=ne,this._$AM=ae,this.options=ce,this._$Cm=(le=ce==null?void 0:ce.isConnected)===null||le===void 0||le}get _$AU(){var ee,ne;return(ne=(ee=this._$AM)===null||ee===void 0?void 0:ee._$AU)!==null&&ne!==void 0?ne:this._$Cm}get parentNode(){let ee=this._$AA.parentNode;const ne=this._$AM;return ne!==void 0&&ee.nodeType===11&&(ee=ne.parentNode),ee}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(ee,ne=this){ee=P(this,ee,ne),d$1(ee)?ee===b$2||ee==null||ee===""?(this._$AH!==b$2&&this._$AR(),this._$AH=b$2):ee!==this._$AH&&ee!==x$4&&this.g(ee):ee._$litType$!==void 0?this.$(ee):ee.nodeType!==void 0?this.T(ee):c$3(ee)?this.k(ee):this.g(ee)}O(ee,ne=this._$AB){return this._$AA.parentNode.insertBefore(ee,ne)}T(ee){this._$AH!==ee&&(this._$AR(),this._$AH=this.O(ee))}g(ee){this._$AH!==b$2&&d$1(this._$AH)?this._$AA.nextSibling.data=ee:this.T(h$1.createTextNode(ee)),this._$AH=ee}$(ee){var ne;const{values:ae,_$litType$:ce}=ee,le=typeof ce=="number"?this._$AC(ee):(ce.el===void 0&&(ce.el=C$1.createElement(ce.h,this.options)),ce);if(((ne=this._$AH)===null||ne===void 0?void 0:ne._$AD)===le)this._$AH.p(ae);else{const ue=new V(le,this),he=ue.v(this.options);ue.p(ae),this.T(he),this._$AH=ue}}_$AC(ee){let ne=T.get(ee.strings);return ne===void 0&&T.set(ee.strings,ne=new C$1(ee)),ne}k(ee){u(this._$AH)||(this._$AH=[],this._$AR());const ne=this._$AH;let ae,ce=0;for(const le of ee)ce===ne.length?ne.push(ae=new N(this.O(r$2()),this.O(r$2()),this,this.options)):ae=ne[ce],ae._$AI(le),ce++;ce<ne.length&&(this._$AR(ae&&ae._$AB.nextSibling,ce),ne.length=ce)}_$AR(ee=this._$AA.nextSibling,ne){var ae;for((ae=this._$AP)===null||ae===void 0||ae.call(this,!1,!0,ne);ee&&ee!==this._$AB;){const ce=ee.nextSibling;ee.remove(),ee=ce}}setConnected(ee){var ne;this._$AM===void 0&&(this._$Cm=ee,(ne=this._$AP)===null||ne===void 0||ne.call(this,ee))}}class S{constructor(ee,ne,ae,ce,le){this.type=1,this._$AH=b$2,this._$AN=void 0,this.element=ee,this.name=ne,this._$AM=ce,this.options=le,ae.length>2||ae[0]!==""||ae[1]!==""?(this._$AH=Array(ae.length-1).fill(new String),this.strings=ae):this._$AH=b$2}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(ee,ne=this,ae,ce){const le=this.strings;let ue=!1;if(le===void 0)ee=P(this,ee,ne,0),ue=!d$1(ee)||ee!==this._$AH&&ee!==x$4,ue&&(this._$AH=ee);else{const he=ee;let fe,me;for(ee=le[0],fe=0;fe<le.length-1;fe++)me=P(this,he[ae+fe],ne,fe),me===x$4&&(me=this._$AH[fe]),ue||(ue=!d$1(me)||me!==this._$AH[fe]),me===b$2?ee=b$2:ee!==b$2&&(ee+=(me??"")+le[fe+1]),this._$AH[fe]=me}ue&&!ce&&this.j(ee)}j(ee){ee===b$2?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,ee??"")}}let M$1=class extends S{constructor(){super(...arguments),this.type=3}j(ee){this.element[this.name]=ee===b$2?void 0:ee}};const R=s$2?s$2.emptyScript:"";let k$1=class extends S{constructor(){super(...arguments),this.type=4}j(ee){ee&&ee!==b$2?this.element.setAttribute(this.name,R):this.element.removeAttribute(this.name)}};class H extends S{constructor(ee,ne,ae,ce,le){super(ee,ne,ae,ce,le),this.type=5}_$AI(ee,ne=this){var ae;if((ee=(ae=P(this,ee,ne,0))!==null&&ae!==void 0?ae:b$2)===x$4)return;const ce=this._$AH,le=ee===b$2&&ce!==b$2||ee.capture!==ce.capture||ee.once!==ce.once||ee.passive!==ce.passive,ue=ee!==b$2&&(ce===b$2||le);le&&this.element.removeEventListener(this.name,this,ce),ue&&this.element.addEventListener(this.name,this,ee),this._$AH=ee}handleEvent(ee){var ne,ae;typeof this._$AH=="function"?this._$AH.call((ae=(ne=this.options)===null||ne===void 0?void 0:ne.host)!==null&&ae!==void 0?ae:this.element,ee):this._$AH.handleEvent(ee)}}let I$1=class{constructor(ee,ne,ae){this.element=ee,this.type=6,this._$AN=void 0,this._$AM=ne,this.options=ae}get _$AU(){return this._$AM._$AU}_$AI(ee){P(this,ee)}};const z$1=i$3.litHtmlPolyfillSupport;z$1==null||z$1(C$1,N),((t$2=i$3.litHtmlVersions)!==null&&t$2!==void 0?t$2:i$3.litHtmlVersions=[]).push("2.6.1");const Z=(re,ee,ne)=>{var ae,ce;const le=(ae=ne==null?void 0:ne.renderBefore)!==null&&ae!==void 0?ae:ee;let ue=le._$litPart$;if(ue===void 0){const he=(ce=ne==null?void 0:ne.renderBefore)!==null&&ce!==void 0?ce:null;le._$litPart$=ue=new N(ee.insertBefore(r$2(),he),he,void 0,ne??{})}return ue._$AI(re),ue};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var l$1,o$1;let s$1=class extends d$2{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var ee,ne;const ae=super.createRenderRoot();return(ee=(ne=this.renderOptions).renderBefore)!==null&&ee!==void 0||(ne.renderBefore=ae.firstChild),ae}update(ee){const ne=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(ee),this._$Do=Z(ne,this.renderRoot,this.renderOptions)}connectedCallback(){var ee;super.connectedCallback(),(ee=this._$Do)===null||ee===void 0||ee.setConnected(!0)}disconnectedCallback(){var ee;super.disconnectedCallback(),(ee=this._$Do)===null||ee===void 0||ee.setConnected(!1)}render(){return x$4}};s$1.finalized=!0,s$1._$litElement$=!0,(l$1=globalThis.litElementHydrateSupport)===null||l$1===void 0||l$1.call(globalThis,{LitElement:s$1});const n$2=globalThis.litElementPolyfillSupport;n$2==null||n$2({LitElement:s$1});((o$1=globalThis.litElementVersions)!==null&&o$1!==void 0?o$1:globalThis.litElementVersions=[]).push("3.2.2");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HAS_WEBXR_DEVICE_API=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,HAS_WEBXR_HIT_TEST_API=HAS_WEBXR_DEVICE_API&&self.XRSession.prototype.requestHitTestSource!=null,HAS_RESIZE_OBSERVER=self.ResizeObserver!=null,HAS_INTERSECTION_OBSERVER=self.IntersectionObserver!=null,IS_WEBXR_AR_CANDIDATE=HAS_WEBXR_HIT_TEST_API;(()=>{const re=navigator.userAgent||navigator.vendor||self.opera;let ee=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(re)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(re.substr(0,4)))&&(ee=!0),ee})();const IS_ANDROID=/android/i.test(navigator.userAgent),IS_IOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,IS_FIREFOX=/firefox/i.test(navigator.userAgent),IS_OCULUS=/OculusBrowser/.test(navigator.userAgent),IS_SCENEVIEWER_CANDIDATE=IS_ANDROID&&!IS_FIREFOX&&!IS_OCULUS,IS_WKWEBVIEW=!!(window.webkit&&window.webkit.messageHandlers),IS_AR_QUICKLOOK_CANDIDATE=(()=>{if(IS_IOS){if(IS_WKWEBVIEW)return!!/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent);{const re=document.createElement("a");return!!(re.relList&&re.relList.supports&&re.relList.supports("ar"))}}else return!1})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const deserializeUrl=re=>re&&re!=="null"?toFullUrl(re):null,assertIsArCandidate=()=>{if(IS_WEBXR_AR_CANDIDATE)return;const re=[];throw HAS_WEBXR_DEVICE_API||re.push("WebXR Device API"),HAS_WEBXR_HIT_TEST_API||re.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${re.join(", ")}`)},toFullUrl=re=>new URL(re,window.location.toString()).toString(),throttle=(re,ee)=>{let ne=null;const ae=(...ce)=>{ne==null&&(re(...ce),ne=self.setTimeout(()=>ne=null,ee))};return ae.flush=()=>{ne!=null&&(self.clearTimeout(ne),ne=null)},ae},debounce$1=(re,ee)=>{let ne=null;return(...ae)=>{ne!=null&&self.clearTimeout(ne),ne=self.setTimeout(()=>{ne=null,re(...ae)},ee)}},clamp$2=(re,ee,ne)=>Math.max(ee,Math.min(ne,re)),CAPPED_DEVICE_PIXEL_RATIO=1,resolveDpr=(()=>{const re=(()=>{var ee;if(!((ee=document.documentElement.getAttribute("itemtype"))===null||ee===void 0)&&ee.includes("schema.org/SearchResultsPage"))return!0;const ne=document.head!=null?Array.from(document.head.querySelectorAll("meta")):[];for(const ae of ne)if(ae.name==="viewport")return!0;return!1})();return re||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),()=>re?window.devicePixelRatio:CAPPED_DEVICE_PIXEL_RATIO})(),isDebugMode=(()=>{const re="model-viewer-debug-mode",ee=new RegExp(`[?&]${re}(&|$)`);return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(ee)})(),timePasses=(re=0)=>new Promise(ee=>setTimeout(ee,re)),waitForEvent=(re,ee,ne=null)=>new Promise(ae=>{function ce(le){(!ne||ne(le))&&(ae(le),re.removeEventListener(ee,ce))}re.addEventListener(ee,ce)});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$7=globalThis&&globalThis.__decorate||function(re,ee,ne,ae){var ce=arguments.length,le=ce<3?ee:ae===null?ae=Object.getOwnPropertyDescriptor(ee,ne):ae,ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")le=Reflect.decorate(re,ee,ne,ae);else for(var he=re.length-1;he>=0;he--)(ue=re[he])&&(le=(ce<3?ue(le):ce>3?ue(ee,ne,le):ue(ee,ne))||le);return ce>3&&le&&Object.defineProperty(ee,ne,le),le};const BASE_OPACITY=.5,DEFAULT_SHADOW_INTENSITY=0,DEFAULT_SHADOW_SOFTNESS=1,DEFAULT_EXPOSURE=1,$currentEnvironmentMap=Symbol("currentEnvironmentMap"),$currentBackground=Symbol("currentBackground"),$updateEnvironment=Symbol("updateEnvironment"),$cancelEnvironmentUpdate=Symbol("cancelEnvironmentUpdate"),EnvironmentMixin=re=>{var ee,ne,ae;class ce extends re{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=DEFAULT_SHADOW_INTENSITY,this.shadowSoftness=DEFAULT_SHADOW_SOFTNESS,this.exposure=DEFAULT_EXPOSURE,this[ee]=null,this[ne]=null,this[ae]=null}updated(ue){super.updated(ue),ue.has("shadowIntensity")&&(this[$scene].setShadowIntensity(this.shadowIntensity*BASE_OPACITY),this[$needsRender]()),ue.has("shadowSoftness")&&(this[$scene].setShadowSoftness(this.shadowSoftness),this[$needsRender]()),ue.has("exposure")&&(this[$scene].exposure=this.exposure,this[$needsRender]()),(ue.has("environmentImage")||ue.has("skyboxImage"))&&this[$shouldAttemptPreload]()&&this[$updateEnvironment]()}hasBakedShadow(){return this[$scene].bakedShadows.size>0}async[(ee=$currentEnvironmentMap,ne=$currentBackground,ae=$cancelEnvironmentUpdate,$updateEnvironment)](){const{skyboxImage:ue,environmentImage:he}=this;this[$cancelEnvironmentUpdate]!=null&&(this[$cancelEnvironmentUpdate](),this[$cancelEnvironmentUpdate]=null);const{textureUtils:fe}=this[$renderer];if(fe==null)return;const me=this[$progressTracker].beginActivity();try{const{environmentMap:ge,skybox:ve}=await fe.generateEnvironmentMapAndSkybox(deserializeUrl(ue),he,ye=>me(clamp$2(ye,0,1)));this[$currentEnvironmentMap]!==ge&&(this[$currentEnvironmentMap]=ge,this.dispatchEvent(new CustomEvent("environment-change"))),ve!=null?this[$currentBackground]=ve.name===ge.name?ge:ve:this[$currentBackground]=null,this[$scene].setEnvironmentAndSkybox(this[$currentEnvironmentMap],this[$currentBackground]),this[$scene].dispatchEvent({type:"envmap-update"})}catch(ge){if(ge instanceof Error)throw this[$scene].setEnvironmentAndSkybox(null,null),ge}finally{me(1)}}}return __decorate$7([e$4({type:String,attribute:"environment-image"})],ce.prototype,"environmentImage",void 0),__decorate$7([e$4({type:String,attribute:"skybox-image"})],ce.prototype,"skyboxImage",void 0),__decorate$7([e$4({type:Number,attribute:"shadow-intensity"})],ce.prototype,"shadowIntensity",void 0),__decorate$7([e$4({type:Number,attribute:"shadow-softness"})],ce.prototype,"shadowSoftness",void 0),__decorate$7([e$4({type:Number})],ce.prototype,"exposure",void 0),ce};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CloseIcon=y$1`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ControlsPrompt=y$1`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ARGlyph=y$1`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const templateResult=y$1`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

/* NOTE: This rule set is our integration surface area with the
 * :focus-visible polyfill.
 *
 * @see https://github.com/WICG/focus-visible/pull/196 */
:host([data-js-focus-visible]:focus:not(.focus-visible)),
:host([data-js-focus-visible]) :focus:not(.focus-visible) {
  outline: none;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          aria-label="View in your space">
        ${ARGlyph}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${ControlsPrompt}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${CloseIcon}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,makeTemplate=re=>{Z(templateResult,re)},_taskCache$1=new WeakMap;class DRACOLoader extends Loader{constructor(ee){super(ee),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(ee){return this.decoderPath=ee,this}setDecoderConfig(ee){return this.decoderConfig=ee,this}setWorkerLimit(ee){return this.workerLimit=ee,this}load(ee,ne,ae,ce){const le=new FileLoader(this.manager);le.setPath(this.path),le.setResponseType("arraybuffer"),le.setRequestHeader(this.requestHeader),le.setWithCredentials(this.withCredentials),le.load(ee,ue=>{this.decodeDracoFile(ue,ne).catch(ce)},ae,ce)}decodeDracoFile(ee,ne,ae,ce){const le={attributeIDs:ae||this.defaultAttributeIDs,attributeTypes:ce||this.defaultAttributeTypes,useUniqueIDs:!!ae};return this.decodeGeometry(ee,le).then(ne)}decodeGeometry(ee,ne){const ae=JSON.stringify(ne);if(_taskCache$1.has(ee)){const fe=_taskCache$1.get(ee);if(fe.key===ae)return fe.promise;if(ee.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let ce;const le=this.workerNextTaskID++,ue=ee.byteLength,he=this._getWorker(le,ue).then(fe=>(ce=fe,new Promise((me,ge)=>{ce._callbacks[le]={resolve:me,reject:ge},ce.postMessage({type:"decode",id:le,taskConfig:ne,buffer:ee},[ee])}))).then(fe=>this._createGeometry(fe.geometry));return he.catch(()=>!0).then(()=>{ce&&le&&this._releaseTask(ce,le)}),_taskCache$1.set(ee,{key:ae,promise:he}),he}_createGeometry(ee){const ne=new BufferGeometry;ee.index&&ne.setIndex(new BufferAttribute(ee.index.array,1));for(let ae=0;ae<ee.attributes.length;ae++){const ce=ee.attributes[ae],le=ce.name,ue=ce.array,he=ce.itemSize;ne.setAttribute(le,new BufferAttribute(ue,he))}return ne}_loadLibrary(ee,ne){const ae=new FileLoader(this.manager);return ae.setPath(this.decoderPath),ae.setResponseType(ne),ae.setWithCredentials(this.withCredentials),new Promise((ce,le)=>{ae.load(ee,ce,void 0,le)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const ee=typeof WebAssembly!="object"||this.decoderConfig.type==="js",ne=[];return ee?ne.push(this._loadLibrary("draco_decoder.js","text")):(ne.push(this._loadLibrary("draco_wasm_wrapper.js","text")),ne.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(ne).then(ae=>{const ce=ae[0];ee||(this.decoderConfig.wasmBinary=ae[1]);const le=DRACOWorker.toString(),ue=["/* draco decoder */",ce,"","/* worker */",le.substring(le.indexOf("{")+1,le.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([ue]))}),this.decoderPending}_getWorker(ee,ne){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const ce=new Worker(this.workerSourceURL);ce._callbacks={},ce._taskCosts={},ce._taskLoad=0,ce.postMessage({type:"init",decoderConfig:this.decoderConfig}),ce.onmessage=function(le){const ue=le.data;switch(ue.type){case"decode":ce._callbacks[ue.id].resolve(ue);break;case"error":ce._callbacks[ue.id].reject(ue);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+ue.type+'"')}},this.workerPool.push(ce)}else this.workerPool.sort(function(ce,le){return ce._taskLoad>le._taskLoad?-1:1});const ae=this.workerPool[this.workerPool.length-1];return ae._taskCosts[ee]=ne,ae._taskLoad+=ne,ae})}_releaseTask(ee,ne){ee._taskLoad-=ee._taskCosts[ne],delete ee._callbacks[ne],delete ee._taskCosts[ne]}debug(){console.log("Task load: ",this.workerPool.map(ee=>ee._taskLoad))}dispose(){for(let ee=0;ee<this.workerPool.length;++ee)this.workerPool[ee].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function DRACOWorker(){let re,ee;onmessage=function(ue){const he=ue.data;switch(he.type){case"init":re=he.decoderConfig,ee=new Promise(function(ge){re.onModuleLoaded=function(ve){ge({draco:ve})},DracoDecoderModule(re)});break;case"decode":const fe=he.buffer,me=he.taskConfig;ee.then(ge=>{const ve=ge.draco,ye=new ve.Decoder,be=new ve.DecoderBuffer;be.Init(new Int8Array(fe),fe.byteLength);try{const Ee=ne(ve,ye,be,me),Ce=Ee.attributes.map(Se=>Se.array.buffer);Ee.index&&Ce.push(Ee.index.array.buffer),self.postMessage({type:"decode",id:he.id,geometry:Ee},Ce)}catch(Ee){console.error(Ee),self.postMessage({type:"error",id:he.id,error:Ee.message})}finally{ve.destroy(be),ve.destroy(ye)}});break}};function ne(ue,he,fe,me){const ge=me.attributeIDs,ve=me.attributeTypes;let ye,be;const Ee=he.GetEncodedGeometryType(fe);if(Ee===ue.TRIANGULAR_MESH)ye=new ue.Mesh,be=he.DecodeBufferToMesh(fe,ye);else if(Ee===ue.POINT_CLOUD)ye=new ue.PointCloud,be=he.DecodeBufferToPointCloud(fe,ye);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!be.ok()||ye.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+be.error_msg());const Ce={index:null,attributes:[]};for(const Se in ge){const Te=self[ve[Se]];let ke,Ne;if(me.useUniqueIDs)Ne=ge[Se],ke=he.GetAttributeByUniqueId(ye,Ne);else{if(Ne=he.GetAttributeId(ye,ue[ge[Se]]),Ne===-1)continue;ke=he.GetAttribute(ye,Ne)}Ce.attributes.push(ce(ue,he,ye,Se,Te,ke))}return Ee===ue.TRIANGULAR_MESH&&(Ce.index=ae(ue,he,ye)),ue.destroy(ye),Ce}function ae(ue,he,fe){const ge=fe.num_faces()*3,ve=ge*4,ye=ue._malloc(ve);he.GetTrianglesUInt32Array(fe,ve,ye);const be=new Uint32Array(ue.HEAPF32.buffer,ye,ge).slice();return ue._free(ye),{array:be,itemSize:1}}function ce(ue,he,fe,me,ge,ve){const ye=ve.num_components(),Ee=fe.num_points()*ye,Ce=Ee*ge.BYTES_PER_ELEMENT,Se=le(ue,ge),Te=ue._malloc(Ce);he.GetAttributeDataArrayForAllPoints(fe,ve,Se,Ce,Te);const ke=new ge(ue.HEAPF32.buffer,Te,Ee).slice();return ue._free(Te),{name:me,array:ke,itemSize:ye}}function le(ue,he){switch(he){case Float32Array:return ue.DT_FLOAT32;case Int8Array:return ue.DT_INT8;case Int16Array:return ue.DT_INT16;case Int32Array:return ue.DT_INT32;case Uint8Array:return ue.DT_UINT8;case Uint16Array:return ue.DT_UINT16;case Uint32Array:return ue.DT_UINT32}}}function toTrianglesDrawMode(re,ee){if(ee===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),re;if(ee===TriangleFanDrawMode||ee===TriangleStripDrawMode){let ne=re.getIndex();if(ne===null){const ue=[],he=re.getAttribute("position");if(he!==void 0){for(let fe=0;fe<he.count;fe++)ue.push(fe);re.setIndex(ue),ne=re.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),re}const ae=ne.count-2,ce=[];if(ee===TriangleFanDrawMode)for(let ue=1;ue<=ae;ue++)ce.push(ne.getX(0)),ce.push(ne.getX(ue)),ce.push(ne.getX(ue+1));else for(let ue=0;ue<ae;ue++)ue%2===0?(ce.push(ne.getX(ue)),ce.push(ne.getX(ue+1)),ce.push(ne.getX(ue+2))):(ce.push(ne.getX(ue+2)),ce.push(ne.getX(ue+1)),ce.push(ne.getX(ue)));ce.length/3!==ae&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const le=re.clone();return le.setIndex(ce),le.clearGroups(),le}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",ee),re}class GLTFLoader extends Loader{constructor(ee){super(ee),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(ne){return new GLTFMaterialsClearcoatExtension$1(ne)}),this.register(function(ne){return new GLTFTextureBasisUExtension(ne)}),this.register(function(ne){return new GLTFTextureWebPExtension(ne)}),this.register(function(ne){return new GLTFMaterialsSheenExtension(ne)}),this.register(function(ne){return new GLTFMaterialsTransmissionExtension$1(ne)}),this.register(function(ne){return new GLTFMaterialsVolumeExtension$1(ne)}),this.register(function(ne){return new GLTFMaterialsIorExtension$1(ne)}),this.register(function(ne){return new GLTFMaterialsEmissiveStrengthExtension(ne)}),this.register(function(ne){return new GLTFMaterialsSpecularExtension$1(ne)}),this.register(function(ne){return new GLTFMaterialsIridescenceExtension$1(ne)}),this.register(function(ne){return new GLTFLightsExtension(ne)}),this.register(function(ne){return new GLTFMeshoptCompression(ne)}),this.register(function(ne){return new GLTFMeshGpuInstancing(ne)})}load(ee,ne,ae,ce){const le=this;let ue;this.resourcePath!==""?ue=this.resourcePath:this.path!==""?ue=this.path:ue=LoaderUtils.extractUrlBase(ee),this.manager.itemStart(ee);const he=function(me){ce?ce(me):console.error(me),le.manager.itemError(ee),le.manager.itemEnd(ee)},fe=new FileLoader(this.manager);fe.setPath(this.path),fe.setResponseType("arraybuffer"),fe.setRequestHeader(this.requestHeader),fe.setWithCredentials(this.withCredentials),fe.load(ee,function(me){try{le.parse(me,ue,function(ge){ne(ge),le.manager.itemEnd(ee)},he)}catch(ge){he(ge)}},ae,he)}setDRACOLoader(ee){return this.dracoLoader=ee,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(ee){return this.ktx2Loader=ee,this}setMeshoptDecoder(ee){return this.meshoptDecoder=ee,this}register(ee){return this.pluginCallbacks.indexOf(ee)===-1&&this.pluginCallbacks.push(ee),this}unregister(ee){return this.pluginCallbacks.indexOf(ee)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(ee),1),this}parse(ee,ne,ae,ce){let le;const ue={},he={},fe=new TextDecoder;if(typeof ee=="string")le=JSON.parse(ee);else if(ee instanceof ArrayBuffer)if(fe.decode(new Uint8Array(ee,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{ue[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(ee)}catch(ve){ce&&ce(ve);return}le=JSON.parse(ue[EXTENSIONS.KHR_BINARY_GLTF].content)}else le=JSON.parse(fe.decode(ee));else le=ee;if(le.asset===void 0||le.asset.version[0]<2){ce&&ce(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const me=new GLTFParser(le,{path:ne||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});me.fileLoader.setRequestHeader(this.requestHeader);for(let ge=0;ge<this.pluginCallbacks.length;ge++){const ve=this.pluginCallbacks[ge](me);he[ve.name]=ve,ue[ve.name]=!0}if(le.extensionsUsed)for(let ge=0;ge<le.extensionsUsed.length;++ge){const ve=le.extensionsUsed[ge],ye=le.extensionsRequired||[];switch(ve){case EXTENSIONS.KHR_MATERIALS_UNLIT:ue[ve]=new GLTFMaterialsUnlitExtension$1;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:ue[ve]=new GLTFDracoMeshCompressionExtension(le,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:ue[ve]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:ue[ve]=new GLTFMeshQuantizationExtension;break;default:ye.indexOf(ve)>=0&&he[ve]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+ve+'".')}}me.setExtensions(ue),me.setPlugins(he),me.parse(ae,ce)}parseAsync(ee,ne){const ae=this;return new Promise(function(ce,le){ae.parse(ee,ne,ce,le)})}}function GLTFRegistry(){let re={};return{get:function(ee){return re[ee]},add:function(ee,ne){re[ee]=ne},remove:function(ee){delete re[ee]},removeAll:function(){re={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const ee=this.parser,ne=this.parser.json.nodes||[];for(let ae=0,ce=ne.length;ae<ce;ae++){const le=ne[ae];le.extensions&&le.extensions[this.name]&&le.extensions[this.name].light!==void 0&&ee._addNodeRef(this.cache,le.extensions[this.name].light)}}_loadLight(ee){const ne=this.parser,ae="light:"+ee;let ce=ne.cache.get(ae);if(ce)return ce;const le=ne.json,fe=((le.extensions&&le.extensions[this.name]||{}).lights||[])[ee];let me;const ge=new Color(16777215);fe.color!==void 0&&ge.fromArray(fe.color);const ve=fe.range!==void 0?fe.range:0;switch(fe.type){case"directional":me=new DirectionalLight(ge),me.target.position.set(0,0,-1),me.add(me.target);break;case"point":me=new PointLight(ge),me.distance=ve;break;case"spot":me=new SpotLight(ge),me.distance=ve,fe.spot=fe.spot||{},fe.spot.innerConeAngle=fe.spot.innerConeAngle!==void 0?fe.spot.innerConeAngle:0,fe.spot.outerConeAngle=fe.spot.outerConeAngle!==void 0?fe.spot.outerConeAngle:Math.PI/4,me.angle=fe.spot.outerConeAngle,me.penumbra=1-fe.spot.innerConeAngle/fe.spot.outerConeAngle,me.target.position.set(0,0,-1),me.add(me.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+fe.type)}return me.position.set(0,0,0),me.decay=2,assignExtrasToUserData(me,fe),fe.intensity!==void 0&&(me.intensity=fe.intensity),me.name=ne.createUniqueName(fe.name||"light_"+ee),ce=Promise.resolve(me),ne.cache.add(ae,ce),ce}getDependency(ee,ne){if(ee==="light")return this._loadLight(ne)}createNodeAttachment(ee){const ne=this,ae=this.parser,le=ae.json.nodes[ee],he=(le.extensions&&le.extensions[this.name]||{}).light;return he===void 0?null:this._loadLight(he).then(function(fe){return ae._getNodeRef(ne.cache,he,fe)})}}let GLTFMaterialsUnlitExtension$1=class{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(ee,ne,ae){const ce=[];ee.color=new Color(1,1,1),ee.opacity=1;const le=ne.pbrMetallicRoughness;if(le){if(Array.isArray(le.baseColorFactor)){const ue=le.baseColorFactor;ee.color.fromArray(ue),ee.opacity=ue[3]}le.baseColorTexture!==void 0&&ce.push(ae.assignTexture(ee,"map",le.baseColorTexture,sRGBEncoding))}return Promise.all(ce)}};class GLTFMaterialsEmissiveStrengthExtension{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(ee,ne){const ce=this.parser.json.materials[ee];if(!ce.extensions||!ce.extensions[this.name])return Promise.resolve();const le=ce.extensions[this.name].emissiveStrength;return le!==void 0&&(ne.emissiveIntensity=le),Promise.resolve()}}let GLTFMaterialsClearcoatExtension$1=class{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(ee){const ae=this.parser.json.materials[ee];return!ae.extensions||!ae.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(ee,ne){const ae=this.parser,ce=ae.json.materials[ee];if(!ce.extensions||!ce.extensions[this.name])return Promise.resolve();const le=[],ue=ce.extensions[this.name];if(ue.clearcoatFactor!==void 0&&(ne.clearcoat=ue.clearcoatFactor),ue.clearcoatTexture!==void 0&&le.push(ae.assignTexture(ne,"clearcoatMap",ue.clearcoatTexture)),ue.clearcoatRoughnessFactor!==void 0&&(ne.clearcoatRoughness=ue.clearcoatRoughnessFactor),ue.clearcoatRoughnessTexture!==void 0&&le.push(ae.assignTexture(ne,"clearcoatRoughnessMap",ue.clearcoatRoughnessTexture)),ue.clearcoatNormalTexture!==void 0&&(le.push(ae.assignTexture(ne,"clearcoatNormalMap",ue.clearcoatNormalTexture)),ue.clearcoatNormalTexture.scale!==void 0)){const he=ue.clearcoatNormalTexture.scale;ne.clearcoatNormalScale=new Vector2(he,he)}return Promise.all(le)}},GLTFMaterialsIridescenceExtension$1=class{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(ee){const ae=this.parser.json.materials[ee];return!ae.extensions||!ae.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(ee,ne){const ae=this.parser,ce=ae.json.materials[ee];if(!ce.extensions||!ce.extensions[this.name])return Promise.resolve();const le=[],ue=ce.extensions[this.name];return ue.iridescenceFactor!==void 0&&(ne.iridescence=ue.iridescenceFactor),ue.iridescenceTexture!==void 0&&le.push(ae.assignTexture(ne,"iridescenceMap",ue.iridescenceTexture)),ue.iridescenceIor!==void 0&&(ne.iridescenceIOR=ue.iridescenceIor),ne.iridescenceThicknessRange===void 0&&(ne.iridescenceThicknessRange=[100,400]),ue.iridescenceThicknessMinimum!==void 0&&(ne.iridescenceThicknessRange[0]=ue.iridescenceThicknessMinimum),ue.iridescenceThicknessMaximum!==void 0&&(ne.iridescenceThicknessRange[1]=ue.iridescenceThicknessMaximum),ue.iridescenceThicknessTexture!==void 0&&le.push(ae.assignTexture(ne,"iridescenceThicknessMap",ue.iridescenceThicknessTexture)),Promise.all(le)}};class GLTFMaterialsSheenExtension{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(ee){const ae=this.parser.json.materials[ee];return!ae.extensions||!ae.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(ee,ne){const ae=this.parser,ce=ae.json.materials[ee];if(!ce.extensions||!ce.extensions[this.name])return Promise.resolve();const le=[];ne.sheenColor=new Color(0,0,0),ne.sheenRoughness=0,ne.sheen=1;const ue=ce.extensions[this.name];return ue.sheenColorFactor!==void 0&&ne.sheenColor.fromArray(ue.sheenColorFactor),ue.sheenRoughnessFactor!==void 0&&(ne.sheenRoughness=ue.sheenRoughnessFactor),ue.sheenColorTexture!==void 0&&le.push(ae.assignTexture(ne,"sheenColorMap",ue.sheenColorTexture,sRGBEncoding)),ue.sheenRoughnessTexture!==void 0&&le.push(ae.assignTexture(ne,"sheenRoughnessMap",ue.sheenRoughnessTexture)),Promise.all(le)}}let GLTFMaterialsTransmissionExtension$1=class{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(ee){const ae=this.parser.json.materials[ee];return!ae.extensions||!ae.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(ee,ne){const ae=this.parser,ce=ae.json.materials[ee];if(!ce.extensions||!ce.extensions[this.name])return Promise.resolve();const le=[],ue=ce.extensions[this.name];return ue.transmissionFactor!==void 0&&(ne.transmission=ue.transmissionFactor),ue.transmissionTexture!==void 0&&le.push(ae.assignTexture(ne,"transmissionMap",ue.transmissionTexture)),Promise.all(le)}},GLTFMaterialsVolumeExtension$1=class{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(ee){const ae=this.parser.json.materials[ee];return!ae.extensions||!ae.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(ee,ne){const ae=this.parser,ce=ae.json.materials[ee];if(!ce.extensions||!ce.extensions[this.name])return Promise.resolve();const le=[],ue=ce.extensions[this.name];ne.thickness=ue.thicknessFactor!==void 0?ue.thicknessFactor:0,ue.thicknessTexture!==void 0&&le.push(ae.assignTexture(ne,"thicknessMap",ue.thicknessTexture)),ne.attenuationDistance=ue.attenuationDistance||1/0;const he=ue.attenuationColor||[1,1,1];return ne.attenuationColor=new Color(he[0],he[1],he[2]),Promise.all(le)}},GLTFMaterialsIorExtension$1=class{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(ee){const ae=this.parser.json.materials[ee];return!ae.extensions||!ae.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(ee,ne){const ce=this.parser.json.materials[ee];if(!ce.extensions||!ce.extensions[this.name])return Promise.resolve();const le=ce.extensions[this.name];return ne.ior=le.ior!==void 0?le.ior:1.5,Promise.resolve()}},GLTFMaterialsSpecularExtension$1=class{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(ee){const ae=this.parser.json.materials[ee];return!ae.extensions||!ae.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(ee,ne){const ae=this.parser,ce=ae.json.materials[ee];if(!ce.extensions||!ce.extensions[this.name])return Promise.resolve();const le=[],ue=ce.extensions[this.name];ne.specularIntensity=ue.specularFactor!==void 0?ue.specularFactor:1,ue.specularTexture!==void 0&&le.push(ae.assignTexture(ne,"specularIntensityMap",ue.specularTexture));const he=ue.specularColorFactor||[1,1,1];return ne.specularColor=new Color(he[0],he[1],he[2]),ue.specularColorTexture!==void 0&&le.push(ae.assignTexture(ne,"specularColorMap",ue.specularColorTexture,sRGBEncoding)),Promise.all(le)}};class GLTFTextureBasisUExtension{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(ee){const ne=this.parser,ae=ne.json,ce=ae.textures[ee];if(!ce.extensions||!ce.extensions[this.name])return null;const le=ce.extensions[this.name],ue=ne.options.ktx2Loader;if(!ue){if(ae.extensionsRequired&&ae.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return ne.loadTextureImage(ee,le.source,ue)}}class GLTFTextureWebPExtension{constructor(ee){this.parser=ee,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(ee){const ne=this.name,ae=this.parser,ce=ae.json,le=ce.textures[ee];if(!le.extensions||!le.extensions[ne])return null;const ue=le.extensions[ne],he=ce.images[ue.source];let fe=ae.textureLoader;if(he.uri){const me=ae.options.manager.getHandler(he.uri);me!==null&&(fe=me)}return this.detectSupport().then(function(me){if(me)return ae.loadTextureImage(ee,ue.source,fe);if(ce.extensionsRequired&&ce.extensionsRequired.indexOf(ne)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return ae.loadTexture(ee)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(ee){const ne=new Image;ne.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",ne.onload=ne.onerror=function(){ee(ne.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(ee){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=ee}loadBufferView(ee){const ne=this.parser.json,ae=ne.bufferViews[ee];if(ae.extensions&&ae.extensions[this.name]){const ce=ae.extensions[this.name],le=this.parser.getDependency("buffer",ce.buffer),ue=this.parser.options.meshoptDecoder;if(!ue||!ue.supported){if(ne.extensionsRequired&&ne.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return le.then(function(he){const fe=ce.byteOffset||0,me=ce.byteLength||0,ge=ce.count,ve=ce.byteStride,ye=new Uint8Array(he,fe,me);return ue.decodeGltfBufferAsync?ue.decodeGltfBufferAsync(ge,ve,ye,ce.mode,ce.filter).then(function(be){return be.buffer}):ue.ready.then(function(){const be=new ArrayBuffer(ge*ve);return ue.decodeGltfBuffer(new Uint8Array(be),ge,ve,ye,ce.mode,ce.filter),be})})}else return null}}class GLTFMeshGpuInstancing{constructor(ee){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=ee}createNodeMesh(ee){const ne=this.parser.json,ae=ne.nodes[ee];if(!ae.extensions||!ae.extensions[this.name]||ae.mesh===void 0)return null;const ce=ne.meshes[ae.mesh];for(const me of ce.primitives)if(me.mode!==WEBGL_CONSTANTS$1.TRIANGLES&&me.mode!==WEBGL_CONSTANTS$1.TRIANGLE_STRIP&&me.mode!==WEBGL_CONSTANTS$1.TRIANGLE_FAN&&me.mode!==void 0)return null;const ue=ae.extensions[this.name].attributes,he=[],fe={};for(const me in ue)he.push(this.parser.getDependency("accessor",ue[me]).then(ge=>(fe[me]=ge,fe[me])));return he.length<1?null:(he.push(this.parser.createNodeMesh(ee)),Promise.all(he).then(me=>{const ge=me.pop(),ve=ge.isGroup?ge.children:[ge],ye=me[0].count,be=[];for(const Ee of ve){const Ce=new Matrix4,Se=new Vector3,Te=new Quaternion,ke=new Vector3(1,1,1),Ne=new InstancedMesh(Ee.geometry,Ee.material,ye);for(let Fe=0;Fe<ye;Fe++)fe.TRANSLATION&&Se.fromBufferAttribute(fe.TRANSLATION,Fe),fe.ROTATION&&Te.fromBufferAttribute(fe.ROTATION,Fe),fe.SCALE&&ke.fromBufferAttribute(fe.SCALE,Fe),Ne.setMatrixAt(Fe,Ce.compose(Se,Te,ke));for(const Fe in fe)Fe!=="TRANSLATION"&&Fe!=="ROTATION"&&Fe!=="SCALE"&&Ee.geometry.setAttribute(Fe,fe[Fe]);Object3D.prototype.copy.call(Ne,Ee),Ne.frustumCulled=!1,this.parser.assignFinalMaterial(Ne),be.push(Ne)}return ge.isGroup?(ge.clear(),ge.add(...be),ge):be[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(ee){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const ne=new DataView(ee,0,BINARY_EXTENSION_HEADER_LENGTH),ae=new TextDecoder;if(this.header={magic:ae.decode(new Uint8Array(ee.slice(0,4))),version:ne.getUint32(4,!0),length:ne.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const ce=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,le=new DataView(ee,BINARY_EXTENSION_HEADER_LENGTH);let ue=0;for(;ue<ce;){const he=le.getUint32(ue,!0);ue+=4;const fe=le.getUint32(ue,!0);if(ue+=4,fe===BINARY_EXTENSION_CHUNK_TYPES.JSON){const me=new Uint8Array(ee,BINARY_EXTENSION_HEADER_LENGTH+ue,he);this.content=ae.decode(me)}else if(fe===BINARY_EXTENSION_CHUNK_TYPES.BIN){const me=BINARY_EXTENSION_HEADER_LENGTH+ue;this.body=ee.slice(me,me+he)}ue+=he}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(ee,ne){if(!ne)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=ee,this.dracoLoader=ne,this.dracoLoader.preload()}decodePrimitive(ee,ne){const ae=this.json,ce=this.dracoLoader,le=ee.extensions[this.name].bufferView,ue=ee.extensions[this.name].attributes,he={},fe={},me={};for(const ge in ue){const ve=ATTRIBUTES[ge]||ge.toLowerCase();he[ve]=ue[ge]}for(const ge in ee.attributes){const ve=ATTRIBUTES[ge]||ge.toLowerCase();if(ue[ge]!==void 0){const ye=ae.accessors[ee.attributes[ge]],be=WEBGL_COMPONENT_TYPES[ye.componentType];me[ve]=be.name,fe[ve]=ye.normalized===!0}}return ne.getDependency("bufferView",le).then(function(ge){return new Promise(function(ve){ce.decodeDracoFile(ge,function(ye){for(const be in ye.attributes){const Ee=ye.attributes[be],Ce=fe[be];Ce!==void 0&&(Ee.normalized=Ce)}ve(ye)},he,me)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(ee,ne){return ne.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),ne.offset===void 0&&ne.rotation===void 0&&ne.scale===void 0||(ee=ee.clone(),ne.offset!==void 0&&ee.offset.fromArray(ne.offset),ne.rotation!==void 0&&(ee.rotation=ne.rotation),ne.scale!==void 0&&ee.repeat.fromArray(ne.scale),ee.needsUpdate=!0),ee}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(ee,ne,ae,ce){super(ee,ne,ae,ce)}copySampleValue_(ee){const ne=this.resultBuffer,ae=this.sampleValues,ce=this.valueSize,le=ee*ce*3+ce;for(let ue=0;ue!==ce;ue++)ne[ue]=ae[le+ue];return ne}interpolate_(ee,ne,ae,ce){const le=this.resultBuffer,ue=this.sampleValues,he=this.valueSize,fe=he*2,me=he*3,ge=ce-ne,ve=(ae-ne)/ge,ye=ve*ve,be=ye*ve,Ee=ee*me,Ce=Ee-me,Se=-2*be+3*ye,Te=be-ye,ke=1-Se,Ne=Te-ye+ve;for(let Fe=0;Fe!==he;Fe++){const De=ue[Ce+Fe+he],Oe=ue[Ce+Fe+fe]*ge,Re=ue[Ee+Fe+he],Be=ue[Ee+Fe]*ge;le[Fe]=ke*De+Ne*Oe+Se*Re+Te*Be}return le}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(ee,ne,ae,ce){const le=super.interpolate_(ee,ne,ae,ce);return _q.fromArray(le).normalize().toArray(le),le}}const WEBGL_CONSTANTS$1={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES$1={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(re){return re.DefaultMaterial===void 0&&(re.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),re.DefaultMaterial}function addUnknownExtensionsToUserData(re,ee,ne){for(const ae in ne.extensions)re[ae]===void 0&&(ee.userData.gltfExtensions=ee.userData.gltfExtensions||{},ee.userData.gltfExtensions[ae]=ne.extensions[ae])}function assignExtrasToUserData(re,ee){ee.extras!==void 0&&(typeof ee.extras=="object"?Object.assign(re.userData,ee.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+ee.extras))}function addMorphTargets(re,ee,ne){let ae=!1,ce=!1,le=!1;for(let me=0,ge=ee.length;me<ge;me++){const ve=ee[me];if(ve.POSITION!==void 0&&(ae=!0),ve.NORMAL!==void 0&&(ce=!0),ve.COLOR_0!==void 0&&(le=!0),ae&&ce&&le)break}if(!ae&&!ce&&!le)return Promise.resolve(re);const ue=[],he=[],fe=[];for(let me=0,ge=ee.length;me<ge;me++){const ve=ee[me];if(ae){const ye=ve.POSITION!==void 0?ne.getDependency("accessor",ve.POSITION):re.attributes.position;ue.push(ye)}if(ce){const ye=ve.NORMAL!==void 0?ne.getDependency("accessor",ve.NORMAL):re.attributes.normal;he.push(ye)}if(le){const ye=ve.COLOR_0!==void 0?ne.getDependency("accessor",ve.COLOR_0):re.attributes.color;fe.push(ye)}}return Promise.all([Promise.all(ue),Promise.all(he),Promise.all(fe)]).then(function(me){const ge=me[0],ve=me[1],ye=me[2];return ae&&(re.morphAttributes.position=ge),ce&&(re.morphAttributes.normal=ve),le&&(re.morphAttributes.color=ye),re.morphTargetsRelative=!0,re})}function updateMorphTargets(re,ee){if(re.updateMorphTargets(),ee.weights!==void 0)for(let ne=0,ae=ee.weights.length;ne<ae;ne++)re.morphTargetInfluences[ne]=ee.weights[ne];if(ee.extras&&Array.isArray(ee.extras.targetNames)){const ne=ee.extras.targetNames;if(re.morphTargetInfluences.length===ne.length){re.morphTargetDictionary={};for(let ae=0,ce=ne.length;ae<ce;ae++)re.morphTargetDictionary[ne[ae]]=ae}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(re){const ee=re.extensions&&re.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];let ne;return ee?ne="draco:"+ee.bufferView+":"+ee.indices+":"+createAttributesKey(ee.attributes):ne=re.indices+":"+createAttributesKey(re.attributes)+":"+re.mode,ne}function createAttributesKey(re){let ee="";const ne=Object.keys(re).sort();for(let ae=0,ce=ne.length;ae<ce;ae++)ee+=ne[ae]+":"+re[ne[ae]]+";";return ee}function getNormalizedComponentScale(re){switch(re){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(re){return re.search(/\.jpe?g($|\?)/i)>0||re.search(/^data\:image\/jpeg/)===0?"image/jpeg":re.search(/\.webp($|\?)/i)>0||re.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(ee={},ne={}){this.json=ee,this.extensions={},this.plugins={},this.options=ne,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let ae=!1,ce=!1,le=-1;typeof navigator<"u"&&(ae=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,ce=navigator.userAgent.indexOf("Firefox")>-1,le=ce?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||ae||ce&&le<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(ee){this.extensions=ee}setPlugins(ee){this.plugins=ee}parse(ee,ne){const ae=this,ce=this.json,le=this.extensions;this.cache.removeAll(),this._invokeAll(function(ue){return ue._markDefs&&ue._markDefs()}),Promise.all(this._invokeAll(function(ue){return ue.beforeRoot&&ue.beforeRoot()})).then(function(){return Promise.all([ae.getDependencies("scene"),ae.getDependencies("animation"),ae.getDependencies("camera")])}).then(function(ue){const he={scene:ue[0][ce.scene||0],scenes:ue[0],animations:ue[1],cameras:ue[2],asset:ce.asset,parser:ae,userData:{}};addUnknownExtensionsToUserData(le,he,ce),assignExtrasToUserData(he,ce),Promise.all(ae._invokeAll(function(fe){return fe.afterRoot&&fe.afterRoot(he)})).then(function(){ee(he)})}).catch(ne)}_markDefs(){const ee=this.json.nodes||[],ne=this.json.skins||[],ae=this.json.meshes||[];for(let ce=0,le=ne.length;ce<le;ce++){const ue=ne[ce].joints;for(let he=0,fe=ue.length;he<fe;he++)ee[ue[he]].isBone=!0}for(let ce=0,le=ee.length;ce<le;ce++){const ue=ee[ce];ue.mesh!==void 0&&(this._addNodeRef(this.meshCache,ue.mesh),ue.skin!==void 0&&(ae[ue.mesh].isSkinnedMesh=!0)),ue.camera!==void 0&&this._addNodeRef(this.cameraCache,ue.camera)}}_addNodeRef(ee,ne){ne!==void 0&&(ee.refs[ne]===void 0&&(ee.refs[ne]=ee.uses[ne]=0),ee.refs[ne]++)}_getNodeRef(ee,ne,ae){if(ee.refs[ne]<=1)return ae;const ce=ae.clone(),le=(ue,he)=>{const fe=this.associations.get(ue);fe!=null&&this.associations.set(he,fe);for(const[me,ge]of ue.children.entries())le(ge,he.children[me])};return le(ae,ce),ce.name+="_instance_"+ee.uses[ne]++,ce}_invokeOne(ee){const ne=Object.values(this.plugins);ne.push(this);for(let ae=0;ae<ne.length;ae++){const ce=ee(ne[ae]);if(ce)return ce}return null}_invokeAll(ee){const ne=Object.values(this.plugins);ne.unshift(this);const ae=[];for(let ce=0;ce<ne.length;ce++){const le=ee(ne[ce]);le&&ae.push(le)}return ae}getDependency(ee,ne){const ae=ee+":"+ne;let ce=this.cache.get(ae);if(!ce){switch(ee){case"scene":ce=this.loadScene(ne);break;case"node":ce=this._invokeOne(function(le){return le.loadNode&&le.loadNode(ne)});break;case"mesh":ce=this._invokeOne(function(le){return le.loadMesh&&le.loadMesh(ne)});break;case"accessor":ce=this.loadAccessor(ne);break;case"bufferView":ce=this._invokeOne(function(le){return le.loadBufferView&&le.loadBufferView(ne)});break;case"buffer":ce=this.loadBuffer(ne);break;case"material":ce=this._invokeOne(function(le){return le.loadMaterial&&le.loadMaterial(ne)});break;case"texture":ce=this._invokeOne(function(le){return le.loadTexture&&le.loadTexture(ne)});break;case"skin":ce=this.loadSkin(ne);break;case"animation":ce=this._invokeOne(function(le){return le.loadAnimation&&le.loadAnimation(ne)});break;case"camera":ce=this.loadCamera(ne);break;default:if(ce=this._invokeOne(function(le){return le!=this&&le.getDependency&&le.getDependency(ee,ne)}),!ce)throw new Error("Unknown type: "+ee);break}this.cache.add(ae,ce)}return ce}getDependencies(ee){let ne=this.cache.get(ee);if(!ne){const ae=this,ce=this.json[ee+(ee==="mesh"?"es":"s")]||[];ne=Promise.all(ce.map(function(le,ue){return ae.getDependency(ee,ue)})),this.cache.add(ee,ne)}return ne}loadBuffer(ee){const ne=this.json.buffers[ee],ae=this.fileLoader;if(ne.type&&ne.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+ne.type+" buffer type is not supported.");if(ne.uri===void 0&&ee===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const ce=this.options;return new Promise(function(le,ue){ae.load(LoaderUtils.resolveURL(ne.uri,ce.path),le,void 0,function(){ue(new Error('THREE.GLTFLoader: Failed to load buffer "'+ne.uri+'".'))})})}loadBufferView(ee){const ne=this.json.bufferViews[ee];return this.getDependency("buffer",ne.buffer).then(function(ae){const ce=ne.byteLength||0,le=ne.byteOffset||0;return ae.slice(le,le+ce)})}loadAccessor(ee){const ne=this,ae=this.json,ce=this.json.accessors[ee];if(ce.bufferView===void 0&&ce.sparse===void 0){const ue=WEBGL_TYPE_SIZES[ce.type],he=WEBGL_COMPONENT_TYPES[ce.componentType],fe=ce.normalized===!0,me=new he(ce.count*ue);return Promise.resolve(new BufferAttribute(me,ue,fe))}const le=[];return ce.bufferView!==void 0?le.push(this.getDependency("bufferView",ce.bufferView)):le.push(null),ce.sparse!==void 0&&(le.push(this.getDependency("bufferView",ce.sparse.indices.bufferView)),le.push(this.getDependency("bufferView",ce.sparse.values.bufferView))),Promise.all(le).then(function(ue){const he=ue[0],fe=WEBGL_TYPE_SIZES[ce.type],me=WEBGL_COMPONENT_TYPES[ce.componentType],ge=me.BYTES_PER_ELEMENT,ve=ge*fe,ye=ce.byteOffset||0,be=ce.bufferView!==void 0?ae.bufferViews[ce.bufferView].byteStride:void 0,Ee=ce.normalized===!0;let Ce,Se;if(be&&be!==ve){const Te=Math.floor(ye/be),ke="InterleavedBuffer:"+ce.bufferView+":"+ce.componentType+":"+Te+":"+ce.count;let Ne=ne.cache.get(ke);Ne||(Ce=new me(he,Te*be,ce.count*be/ge),Ne=new InterleavedBuffer(Ce,be/ge),ne.cache.add(ke,Ne)),Se=new InterleavedBufferAttribute(Ne,fe,ye%be/ge,Ee)}else he===null?Ce=new me(ce.count*fe):Ce=new me(he,ye,ce.count*fe),Se=new BufferAttribute(Ce,fe,Ee);if(ce.sparse!==void 0){const Te=WEBGL_TYPE_SIZES.SCALAR,ke=WEBGL_COMPONENT_TYPES[ce.sparse.indices.componentType],Ne=ce.sparse.indices.byteOffset||0,Fe=ce.sparse.values.byteOffset||0,De=new ke(ue[1],Ne,ce.sparse.count*Te),Oe=new me(ue[2],Fe,ce.sparse.count*fe);he!==null&&(Se=new BufferAttribute(Se.array.slice(),Se.itemSize,Se.normalized));for(let Re=0,Be=De.length;Re<Be;Re++){const Le=De[Re];if(Se.setX(Le,Oe[Re*fe]),fe>=2&&Se.setY(Le,Oe[Re*fe+1]),fe>=3&&Se.setZ(Le,Oe[Re*fe+2]),fe>=4&&Se.setW(Le,Oe[Re*fe+3]),fe>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Se})}loadTexture(ee){const ne=this.json,ae=this.options,le=ne.textures[ee].source,ue=ne.images[le];let he=this.textureLoader;if(ue.uri){const fe=ae.manager.getHandler(ue.uri);fe!==null&&(he=fe)}return this.loadTextureImage(ee,le,he)}loadTextureImage(ee,ne,ae){const ce=this,le=this.json,ue=le.textures[ee],he=le.images[ne],fe=(he.uri||he.bufferView)+":"+ue.sampler;if(this.textureCache[fe])return this.textureCache[fe];const me=this.loadImageSource(ne,ae).then(function(ge){ge.flipY=!1,ge.name=ue.name||he.name||"";const ye=(le.samplers||{})[ue.sampler]||{};return ge.magFilter=WEBGL_FILTERS[ye.magFilter]||LinearFilter,ge.minFilter=WEBGL_FILTERS[ye.minFilter]||LinearMipmapLinearFilter,ge.wrapS=WEBGL_WRAPPINGS[ye.wrapS]||RepeatWrapping,ge.wrapT=WEBGL_WRAPPINGS[ye.wrapT]||RepeatWrapping,ce.associations.set(ge,{textures:ee}),ge}).catch(function(){return null});return this.textureCache[fe]=me,me}loadImageSource(ee,ne){const ae=this,ce=this.json,le=this.options;if(this.sourceCache[ee]!==void 0)return this.sourceCache[ee].then(ve=>ve.clone());const ue=ce.images[ee],he=self.URL||self.webkitURL;let fe=ue.uri||"",me=!1;if(ue.bufferView!==void 0)fe=ae.getDependency("bufferView",ue.bufferView).then(function(ve){me=!0;const ye=new Blob([ve],{type:ue.mimeType});return fe=he.createObjectURL(ye),fe});else if(ue.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+ee+" is missing URI and bufferView");const ge=Promise.resolve(fe).then(function(ve){return new Promise(function(ye,be){let Ee=ye;ne.isImageBitmapLoader===!0&&(Ee=function(Ce){const Se=new Texture$1(Ce);Se.needsUpdate=!0,ye(Se)}),ne.load(LoaderUtils.resolveURL(ve,le.path),Ee,void 0,be)})}).then(function(ve){return me===!0&&he.revokeObjectURL(fe),ve.userData.mimeType=ue.mimeType||getImageURIMimeType(ue.uri),ve}).catch(function(ve){throw console.error("THREE.GLTFLoader: Couldn't load texture",fe),ve});return this.sourceCache[ee]=ge,ge}assignTexture(ee,ne,ae,ce){const le=this;return this.getDependency("texture",ae.index).then(function(ue){if(!ue)return null;if(ae.texCoord!==void 0&&ae.texCoord!=0&&!(ne==="aoMap"&&ae.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+ae.texCoord+" for texture "+ne+" not yet supported."),le.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const he=ae.extensions!==void 0?ae.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(he){const fe=le.associations.get(ue);ue=le.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(ue,he),le.associations.set(ue,fe)}}return ce!==void 0&&(ue.encoding=ce),ee[ne]=ue,ue})}assignFinalMaterial(ee){const ne=ee.geometry;let ae=ee.material;const ce=ne.attributes.tangent===void 0,le=ne.attributes.color!==void 0,ue=ne.attributes.normal===void 0;if(ee.isPoints){const he="PointsMaterial:"+ae.uuid;let fe=this.cache.get(he);fe||(fe=new PointsMaterial,Material$1.prototype.copy.call(fe,ae),fe.color.copy(ae.color),fe.map=ae.map,fe.sizeAttenuation=!1,this.cache.add(he,fe)),ae=fe}else if(ee.isLine){const he="LineBasicMaterial:"+ae.uuid;let fe=this.cache.get(he);fe||(fe=new LineBasicMaterial,Material$1.prototype.copy.call(fe,ae),fe.color.copy(ae.color),this.cache.add(he,fe)),ae=fe}if(ce||le||ue){let he="ClonedMaterial:"+ae.uuid+":";ce&&(he+="derivative-tangents:"),le&&(he+="vertex-colors:"),ue&&(he+="flat-shading:");let fe=this.cache.get(he);fe||(fe=ae.clone(),le&&(fe.vertexColors=!0),ue&&(fe.flatShading=!0),ce&&(fe.normalScale&&(fe.normalScale.y*=-1),fe.clearcoatNormalScale&&(fe.clearcoatNormalScale.y*=-1)),this.cache.add(he,fe),this.associations.set(fe,this.associations.get(ae))),ae=fe}ae.aoMap&&ne.attributes.uv2===void 0&&ne.attributes.uv!==void 0&&ne.setAttribute("uv2",ne.attributes.uv),ee.material=ae}getMaterialType(){return MeshStandardMaterial}loadMaterial(ee){const ne=this,ae=this.json,ce=this.extensions,le=ae.materials[ee];let ue;const he={},fe=le.extensions||{},me=[];if(fe[EXTENSIONS.KHR_MATERIALS_UNLIT]){const ve=ce[EXTENSIONS.KHR_MATERIALS_UNLIT];ue=ve.getMaterialType(),me.push(ve.extendParams(he,le,ne))}else{const ve=le.pbrMetallicRoughness||{};if(he.color=new Color(1,1,1),he.opacity=1,Array.isArray(ve.baseColorFactor)){const ye=ve.baseColorFactor;he.color.fromArray(ye),he.opacity=ye[3]}ve.baseColorTexture!==void 0&&me.push(ne.assignTexture(he,"map",ve.baseColorTexture,sRGBEncoding)),he.metalness=ve.metallicFactor!==void 0?ve.metallicFactor:1,he.roughness=ve.roughnessFactor!==void 0?ve.roughnessFactor:1,ve.metallicRoughnessTexture!==void 0&&(me.push(ne.assignTexture(he,"metalnessMap",ve.metallicRoughnessTexture)),me.push(ne.assignTexture(he,"roughnessMap",ve.metallicRoughnessTexture))),ue=this._invokeOne(function(ye){return ye.getMaterialType&&ye.getMaterialType(ee)}),me.push(Promise.all(this._invokeAll(function(ye){return ye.extendMaterialParams&&ye.extendMaterialParams(ee,he)})))}le.doubleSided===!0&&(he.side=DoubleSide);const ge=le.alphaMode||ALPHA_MODES.OPAQUE;if(ge===ALPHA_MODES.BLEND?(he.transparent=!0,he.depthWrite=!1):(he.transparent=!1,ge===ALPHA_MODES.MASK&&(he.alphaTest=le.alphaCutoff!==void 0?le.alphaCutoff:.5)),le.normalTexture!==void 0&&ue!==MeshBasicMaterial&&(me.push(ne.assignTexture(he,"normalMap",le.normalTexture)),he.normalScale=new Vector2(1,1),le.normalTexture.scale!==void 0)){const ve=le.normalTexture.scale;he.normalScale.set(ve,ve)}return le.occlusionTexture!==void 0&&ue!==MeshBasicMaterial&&(me.push(ne.assignTexture(he,"aoMap",le.occlusionTexture)),le.occlusionTexture.strength!==void 0&&(he.aoMapIntensity=le.occlusionTexture.strength)),le.emissiveFactor!==void 0&&ue!==MeshBasicMaterial&&(he.emissive=new Color().fromArray(le.emissiveFactor)),le.emissiveTexture!==void 0&&ue!==MeshBasicMaterial&&me.push(ne.assignTexture(he,"emissiveMap",le.emissiveTexture,sRGBEncoding)),Promise.all(me).then(function(){const ve=new ue(he);return le.name&&(ve.name=le.name),assignExtrasToUserData(ve,le),ne.associations.set(ve,{materials:ee}),le.extensions&&addUnknownExtensionsToUserData(ce,ve,le),ve})}createUniqueName(ee){const ne=PropertyBinding.sanitizeNodeName(ee||"");let ae=ne;for(let ce=1;this.nodeNamesUsed[ae];++ce)ae=ne+"_"+ce;return this.nodeNamesUsed[ae]=!0,ae}loadGeometries(ee){const ne=this,ae=this.extensions,ce=this.primitiveCache;function le(he){return ae[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(he,ne).then(function(fe){return addPrimitiveAttributes(fe,he,ne)})}const ue=[];for(let he=0,fe=ee.length;he<fe;he++){const me=ee[he],ge=createPrimitiveKey(me),ve=ce[ge];if(ve)ue.push(ve.promise);else{let ye;me.extensions&&me.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?ye=le(me):ye=addPrimitiveAttributes(new BufferGeometry,me,ne),ce[ge]={primitive:me,promise:ye},ue.push(ye)}}return Promise.all(ue)}loadMesh(ee){const ne=this,ae=this.json,ce=this.extensions,le=ae.meshes[ee],ue=le.primitives,he=[];for(let fe=0,me=ue.length;fe<me;fe++){const ge=ue[fe].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",ue[fe].material);he.push(ge)}return he.push(ne.loadGeometries(ue)),Promise.all(he).then(function(fe){const me=fe.slice(0,fe.length-1),ge=fe[fe.length-1],ve=[];for(let be=0,Ee=ge.length;be<Ee;be++){const Ce=ge[be],Se=ue[be];let Te;const ke=me[be];if(Se.mode===WEBGL_CONSTANTS$1.TRIANGLES||Se.mode===WEBGL_CONSTANTS$1.TRIANGLE_STRIP||Se.mode===WEBGL_CONSTANTS$1.TRIANGLE_FAN||Se.mode===void 0)Te=le.isSkinnedMesh===!0?new SkinnedMesh(Ce,ke):new Mesh(Ce,ke),Te.isSkinnedMesh===!0&&!Te.geometry.attributes.skinWeight.normalized&&Te.normalizeSkinWeights(),Se.mode===WEBGL_CONSTANTS$1.TRIANGLE_STRIP?Te.geometry=toTrianglesDrawMode(Te.geometry,TriangleStripDrawMode):Se.mode===WEBGL_CONSTANTS$1.TRIANGLE_FAN&&(Te.geometry=toTrianglesDrawMode(Te.geometry,TriangleFanDrawMode));else if(Se.mode===WEBGL_CONSTANTS$1.LINES)Te=new LineSegments(Ce,ke);else if(Se.mode===WEBGL_CONSTANTS$1.LINE_STRIP)Te=new Line$1(Ce,ke);else if(Se.mode===WEBGL_CONSTANTS$1.LINE_LOOP)Te=new LineLoop(Ce,ke);else if(Se.mode===WEBGL_CONSTANTS$1.POINTS)Te=new Points(Ce,ke);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Se.mode);Object.keys(Te.geometry.morphAttributes).length>0&&updateMorphTargets(Te,le),Te.name=ne.createUniqueName(le.name||"mesh_"+ee),assignExtrasToUserData(Te,le),Se.extensions&&addUnknownExtensionsToUserData(ce,Te,Se),ne.assignFinalMaterial(Te),ve.push(Te)}for(let be=0,Ee=ve.length;be<Ee;be++)ne.associations.set(ve[be],{meshes:ee,primitives:be});if(ve.length===1)return ve[0];const ye=new Group$1;ne.associations.set(ye,{meshes:ee});for(let be=0,Ee=ve.length;be<Ee;be++)ye.add(ve[be]);return ye})}loadCamera(ee){let ne;const ae=this.json.cameras[ee],ce=ae[ae.type];if(!ce){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return ae.type==="perspective"?ne=new PerspectiveCamera(MathUtils.radToDeg(ce.yfov),ce.aspectRatio||1,ce.znear||1,ce.zfar||2e6):ae.type==="orthographic"&&(ne=new OrthographicCamera(-ce.xmag,ce.xmag,ce.ymag,-ce.ymag,ce.znear,ce.zfar)),ae.name&&(ne.name=this.createUniqueName(ae.name)),assignExtrasToUserData(ne,ae),Promise.resolve(ne)}loadSkin(ee){const ne=this.json.skins[ee],ae=[];for(let ce=0,le=ne.joints.length;ce<le;ce++)ae.push(this.getDependency("node",ne.joints[ce]));return ne.inverseBindMatrices!==void 0?ae.push(this.getDependency("accessor",ne.inverseBindMatrices)):ae.push(null),Promise.all(ae).then(function(ce){const le=ce.pop(),ue=ce,he=[],fe=[];for(let me=0,ge=ue.length;me<ge;me++){const ve=ue[me];if(ve){he.push(ve);const ye=new Matrix4;le!==null&&ye.fromArray(le.array,me*16),fe.push(ye)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',ne.joints[me])}return new Skeleton(he,fe)})}loadAnimation(ee){const ae=this.json.animations[ee],ce=[],le=[],ue=[],he=[],fe=[];for(let me=0,ge=ae.channels.length;me<ge;me++){const ve=ae.channels[me],ye=ae.samplers[ve.sampler],be=ve.target,Ee=be.node,Ce=ae.parameters!==void 0?ae.parameters[ye.input]:ye.input,Se=ae.parameters!==void 0?ae.parameters[ye.output]:ye.output;ce.push(this.getDependency("node",Ee)),le.push(this.getDependency("accessor",Ce)),ue.push(this.getDependency("accessor",Se)),he.push(ye),fe.push(be)}return Promise.all([Promise.all(ce),Promise.all(le),Promise.all(ue),Promise.all(he),Promise.all(fe)]).then(function(me){const ge=me[0],ve=me[1],ye=me[2],be=me[3],Ee=me[4],Ce=[];for(let Te=0,ke=ge.length;Te<ke;Te++){const Ne=ge[Te],Fe=ve[Te],De=ye[Te],Oe=be[Te],Re=Ee[Te];if(Ne===void 0)continue;Ne.updateMatrix();let Be;switch(PATH_PROPERTIES$1[Re.path]){case PATH_PROPERTIES$1.weights:Be=NumberKeyframeTrack;break;case PATH_PROPERTIES$1.rotation:Be=QuaternionKeyframeTrack;break;case PATH_PROPERTIES$1.position:case PATH_PROPERTIES$1.scale:default:Be=VectorKeyframeTrack;break}const Le=Ne.name?Ne.name:Ne.uuid,je=Oe.interpolation!==void 0?INTERPOLATION[Oe.interpolation]:InterpolateLinear,Ge=[];PATH_PROPERTIES$1[Re.path]===PATH_PROPERTIES$1.weights?Ne.traverse(function(Ue){Ue.morphTargetInfluences&&Ge.push(Ue.name?Ue.name:Ue.uuid)}):Ge.push(Le);let qe=De.array;if(De.normalized){const Ue=getNormalizedComponentScale(qe.constructor),ze=new Float32Array(qe.length);for(let He=0,Ye=qe.length;He<Ye;He++)ze[He]=qe[He]*Ue;qe=ze}for(let Ue=0,ze=Ge.length;Ue<ze;Ue++){const He=new Be(Ge[Ue]+"."+PATH_PROPERTIES$1[Re.path],Fe.array,qe,je);Oe.interpolation==="CUBICSPLINE"&&(He.createInterpolant=function(Xe){const We=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new We(this.times,this.values,this.getValueSize()/3,Xe)},He.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Ce.push(He)}}const Se=ae.name?ae.name:"animation_"+ee;return new AnimationClip(Se,void 0,Ce)})}createNodeMesh(ee){const ne=this.json,ae=this,ce=ne.nodes[ee];return ce.mesh===void 0?null:ae.getDependency("mesh",ce.mesh).then(function(le){const ue=ae._getNodeRef(ae.meshCache,ce.mesh,le);return ce.weights!==void 0&&ue.traverse(function(he){if(he.isMesh)for(let fe=0,me=ce.weights.length;fe<me;fe++)he.morphTargetInfluences[fe]=ce.weights[fe]}),ue})}loadNode(ee){const ne=this.json,ae=this.extensions,ce=this,le=ne.nodes[ee],ue=le.name?ce.createUniqueName(le.name):"";return function(){const he=[],fe=ce._invokeOne(function(ye){return ye.createNodeMesh&&ye.createNodeMesh(ee)});fe&&he.push(fe),le.camera!==void 0&&he.push(ce.getDependency("camera",le.camera).then(function(ye){return ce._getNodeRef(ce.cameraCache,le.camera,ye)})),ce._invokeAll(function(ye){return ye.createNodeAttachment&&ye.createNodeAttachment(ee)}).forEach(function(ye){he.push(ye)});const me=[],ge=le.children||[];for(let ye=0,be=ge.length;ye<be;ye++)me.push(ce.getDependency("node",ge[ye]));const ve=le.skin===void 0?Promise.resolve(null):ce.getDependency("skin",le.skin);return Promise.all([Promise.all(he),Promise.all(me),ve])}().then(function(he){const fe=he[0],me=he[1],ge=he[2];let ve;if(le.isBone===!0?ve=new Bone:fe.length>1?ve=new Group$1:fe.length===1?ve=fe[0]:ve=new Object3D,ve!==fe[0])for(let ye=0,be=fe.length;ye<be;ye++)ve.add(fe[ye]);if(le.name&&(ve.userData.name=le.name,ve.name=ue),assignExtrasToUserData(ve,le),le.extensions&&addUnknownExtensionsToUserData(ae,ve,le),le.matrix!==void 0){const ye=new Matrix4;ye.fromArray(le.matrix),ve.applyMatrix4(ye)}else le.translation!==void 0&&ve.position.fromArray(le.translation),le.rotation!==void 0&&ve.quaternion.fromArray(le.rotation),le.scale!==void 0&&ve.scale.fromArray(le.scale);ce.associations.has(ve)||ce.associations.set(ve,{}),ce.associations.get(ve).nodes=ee,ge!==null&&ve.traverse(function(ye){ye.isSkinnedMesh&&ye.bind(ge,_identityMatrix)});for(let ye=0,be=me.length;ye<be;ye++)ve.add(me[ye]);return ve})}loadScene(ee){const ne=this.extensions,ae=this.json.scenes[ee],ce=this,le=new Group$1;ae.name&&(le.name=ce.createUniqueName(ae.name)),assignExtrasToUserData(le,ae),ae.extensions&&addUnknownExtensionsToUserData(ne,le,ae);const ue=ae.nodes||[],he=[];for(let fe=0,me=ue.length;fe<me;fe++)he.push(ce.getDependency("node",ue[fe]));return Promise.all(he).then(function(fe){for(let ge=0,ve=fe.length;ge<ve;ge++)le.add(fe[ge]);const me=ge=>{const ve=new Map;for(const[ye,be]of ce.associations)(ye instanceof Material$1||ye instanceof Texture$1)&&ve.set(ye,be);return ge.traverse(ye=>{const be=ce.associations.get(ye);be!=null&&ve.set(ye,be)}),ve};return ce.associations=me(le),le})}}function computeBounds(re,ee,ne){const ae=ee.attributes,ce=new Box3;if(ae.POSITION!==void 0){const he=ne.json.accessors[ae.POSITION],fe=he.min,me=he.max;if(fe!==void 0&&me!==void 0){if(ce.set(new Vector3(fe[0],fe[1],fe[2]),new Vector3(me[0],me[1],me[2])),he.normalized){const ge=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[he.componentType]);ce.min.multiplyScalar(ge),ce.max.multiplyScalar(ge)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const le=ee.targets;if(le!==void 0){const he=new Vector3,fe=new Vector3;for(let me=0,ge=le.length;me<ge;me++){const ve=le[me];if(ve.POSITION!==void 0){const ye=ne.json.accessors[ve.POSITION],be=ye.min,Ee=ye.max;if(be!==void 0&&Ee!==void 0){if(fe.setX(Math.max(Math.abs(be[0]),Math.abs(Ee[0]))),fe.setY(Math.max(Math.abs(be[1]),Math.abs(Ee[1]))),fe.setZ(Math.max(Math.abs(be[2]),Math.abs(Ee[2]))),ye.normalized){const Ce=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[ye.componentType]);fe.multiplyScalar(Ce)}he.max(fe)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}ce.expandByVector(he)}re.boundingBox=ce;const ue=new Sphere;ce.getCenter(ue.center),ue.radius=ce.min.distanceTo(ce.max)/2,re.boundingSphere=ue}function addPrimitiveAttributes(re,ee,ne){const ae=ee.attributes,ce=[];function le(ue,he){return ne.getDependency("accessor",ue).then(function(fe){re.setAttribute(he,fe)})}for(const ue in ae){const he=ATTRIBUTES[ue]||ue.toLowerCase();he in re.attributes||ce.push(le(ae[ue],he))}if(ee.indices!==void 0&&!re.index){const ue=ne.getDependency("accessor",ee.indices).then(function(he){re.setIndex(he)});ce.push(ue)}return assignExtrasToUserData(re,ee),computeBounds(re,ee,ne),Promise.all(ce).then(function(){return ee.targets!==void 0?addMorphTargets(re,ee.targets,ne):re})}class WorkerPool{constructor(ee=4){this.pool=ee,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(ee){if(!this.workers[ee]){const ne=this.workerCreator();ne.addEventListener("message",this._onMessage.bind(this,ee)),this.workers[ee]=ne}}_getIdleWorker(){for(let ee=0;ee<this.pool;ee++)if(!(this.workerStatus&1<<ee))return ee;return-1}_onMessage(ee,ne){const ae=this.workersResolve[ee];if(ae&&ae(ne),this.queue.length){const{resolve:ce,msg:le,transfer:ue}=this.queue.shift();this.workersResolve[ee]=ce,this.workers[ee].postMessage(le,ue)}else this.workerStatus^=1<<ee}setWorkerCreator(ee){this.workerCreator=ee}setWorkerLimit(ee){this.pool=ee}postMessage(ee,ne){return new Promise(ae=>{const ce=this._getIdleWorker();ce!==-1?(this._initWorker(ce),this.workerStatus|=1<<ce,this.workersResolve[ce]=ae,this.workers[ce].postMessage(ee,ne)):this.queue.push({resolve:ae,msg:ee,transfer:ne})})}dispose(){this.workers.forEach(ee=>ee.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const t$1=0,n$1=2,p$2=1,x$3=2,nt=0,ct=9,gt=15,yt=16,dt=22,Ot=37,Ft=43,$t=76,se=83,pe=97,xe=100,de=103,Ae$1=109;class Si{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Ii{constructor(ee,ne,ae,ce){this._dataView=new DataView(ee.buffer,ee.byteOffset+ne,ae),this._littleEndian=ce,this._offset=0}_nextUint8(){const ee=this._dataView.getUint8(this._offset);return this._offset+=1,ee}_nextUint16(){const ee=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,ee}_nextUint32(){const ee=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,ee}_nextUint64(){const ee=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,ee}_nextInt32(){const ee=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,ee}_skip(ee){return this._offset+=ee,this}_scan(ee,ne=0){const ae=this._offset;let ce=0;for(;this._dataView.getUint8(this._offset)!==ne&&ce<ee;)ce++,this._offset++;return ce<ee&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+ae,ce)}}const Ti=[171,75,84,88,32,50,48,187,13,10,26,10];function Ei(re){return typeof TextDecoder<"u"?new TextDecoder().decode(re):Buffer$2.from(re).toString("utf8")}function Pi(re){const ee=new Uint8Array(re.buffer,re.byteOffset,Ti.length);if(ee[0]!==Ti[0]||ee[1]!==Ti[1]||ee[2]!==Ti[2]||ee[3]!==Ti[3]||ee[4]!==Ti[4]||ee[5]!==Ti[5]||ee[6]!==Ti[6]||ee[7]!==Ti[7]||ee[8]!==Ti[8]||ee[9]!==Ti[9]||ee[10]!==Ti[10]||ee[11]!==Ti[11])throw new Error("Missing KTX 2.0 identifier.");const ne=new Si,ae=17*Uint32Array.BYTES_PER_ELEMENT,ce=new Ii(re,Ti.length,ae,!0);ne.vkFormat=ce._nextUint32(),ne.typeSize=ce._nextUint32(),ne.pixelWidth=ce._nextUint32(),ne.pixelHeight=ce._nextUint32(),ne.pixelDepth=ce._nextUint32(),ne.layerCount=ce._nextUint32(),ne.faceCount=ce._nextUint32();const le=ce._nextUint32();ne.supercompressionScheme=ce._nextUint32();const ue=ce._nextUint32(),he=ce._nextUint32(),fe=ce._nextUint32(),me=ce._nextUint32(),ge=ce._nextUint64(),ve=ce._nextUint64(),ye=new Ii(re,Ti.length+ae,3*le*8,!0);for(let Xe=0;Xe<le;Xe++)ne.levels.push({levelData:new Uint8Array(re.buffer,re.byteOffset+ye._nextUint64(),ye._nextUint64()),uncompressedByteLength:ye._nextUint64()});const be=new Ii(re,ue,he,!0),Ee={vendorId:be._skip(4)._nextUint16(),descriptorType:be._nextUint16(),versionNumber:be._nextUint16(),descriptorBlockSize:be._nextUint16(),colorModel:be._nextUint8(),colorPrimaries:be._nextUint8(),transferFunction:be._nextUint8(),flags:be._nextUint8(),texelBlockDimension:[be._nextUint8(),be._nextUint8(),be._nextUint8(),be._nextUint8()],bytesPlane:[be._nextUint8(),be._nextUint8(),be._nextUint8(),be._nextUint8(),be._nextUint8(),be._nextUint8(),be._nextUint8(),be._nextUint8()],samples:[]},Ce=(Ee.descriptorBlockSize/4-6)/4;for(let Xe=0;Xe<Ce;Xe++){const We={bitOffset:be._nextUint16(),bitLength:be._nextUint8(),channelType:be._nextUint8(),samplePosition:[be._nextUint8(),be._nextUint8(),be._nextUint8(),be._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&We.channelType?(We.sampleLower=be._nextInt32(),We.sampleUpper=be._nextInt32()):(We.sampleLower=be._nextUint32(),We.sampleUpper=be._nextUint32()),Ee.samples[Xe]=We}ne.dataFormatDescriptor.length=0,ne.dataFormatDescriptor.push(Ee);const Se=new Ii(re,fe,me,!0);for(;Se._offset<me;){const Xe=Se._nextUint32(),We=Se._scan(Xe),Ze=Ei(We),Vt=Se._scan(Xe-We.byteLength);ne.keyValue[Ze]=Ze.match(/^ktx/i)?Ei(Vt):Vt,Se._offset%4&&Se._skip(4-Se._offset%4)}if(ve<=0)return ne;const Te=new Ii(re,ge,ve,!0),ke=Te._nextUint16(),Ne=Te._nextUint16(),Fe=Te._nextUint32(),De=Te._nextUint32(),Oe=Te._nextUint32(),Re=Te._nextUint32(),Be=[];for(let Xe=0;Xe<le;Xe++)Be.push({imageFlags:Te._nextUint32(),rgbSliceByteOffset:Te._nextUint32(),rgbSliceByteLength:Te._nextUint32(),alphaSliceByteOffset:Te._nextUint32(),alphaSliceByteLength:Te._nextUint32()});const Le=ge+Te._offset,je=Le+Fe,Ge=je+De,qe=Ge+Oe,Ue=new Uint8Array(re.buffer,re.byteOffset+Le,Fe),ze=new Uint8Array(re.buffer,re.byteOffset+je,De),He=new Uint8Array(re.buffer,re.byteOffset+Ge,Oe),Ye=new Uint8Array(re.buffer,re.byteOffset+qe,Re);return ne.globalData={endpointCount:ke,selectorCount:Ne,imageDescs:Be,endpointsData:Ue,selectorsData:ze,tablesData:He,extendedData:Ye},ne}let A$1,I,B;const g$1={env:{emscripten_notify_memory_growth:function(re){B=new Uint8Array(I.exports.memory.buffer)}}};class Q{init(){return A$1||(A$1=typeof fetch<"u"?fetch("data:application/wasm;base64,"+C).then(ee=>ee.arrayBuffer()).then(ee=>WebAssembly.instantiate(ee,g$1)).then(this._init):WebAssembly.instantiate(Buffer$2.from(C,"base64"),g$1).then(this._init),A$1)}_init(ee){I=ee.instance,g$1.env.emscripten_notify_memory_growth(0)}decode(ee,ne=0){if(!I)throw new Error("ZSTDDecoder: Await .init() before decoding.");const ae=ee.byteLength,ce=I.exports.malloc(ae);B.set(ee,ce),ne=ne||Number(I.exports.ZSTD_findDecompressedSize(ce,ae));const le=I.exports.malloc(ne),ue=I.exports.ZSTD_decompress(le,ne,ce,ae),he=B.slice(le,le+ue);return I.exports.free(ce),I.exports.free(le),he}}const C="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",_taskCache=new WeakMap;let _activeLoaders=0,_zstd;class KTX2Loader extends Loader{constructor(ee){super(ee),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new WorkerPool,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(ee){return this.transcoderPath=ee,this}setWorkerLimit(ee){return this.workerPool.setWorkerLimit(ee),this}detectSupport(ee){return this.workerConfig={astcSupported:ee.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:ee.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:ee.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:ee.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:ee.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:ee.extensions.has("WEBGL_compressed_texture_pvrtc")||ee.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},ee.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const ee=new FileLoader(this.manager);ee.setPath(this.transcoderPath),ee.setWithCredentials(this.withCredentials);const ne=ee.loadAsync("basis_transcoder.js"),ae=new FileLoader(this.manager);ae.setPath(this.transcoderPath),ae.setResponseType("arraybuffer"),ae.setWithCredentials(this.withCredentials);const ce=ae.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([ne,ce]).then(([le,ue])=>{const he=KTX2Loader.BasisWorker.toString(),fe=["/* constants */","let _EngineFormat = "+JSON.stringify(KTX2Loader.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(KTX2Loader.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(KTX2Loader.BasisFormat),"/* basis_transcoder.js */",le,"/* worker */",he.substring(he.indexOf("{")+1,he.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([fe])),this.transcoderBinary=ue,this.workerPool.setWorkerCreator(()=>{const me=new Worker(this.workerSourceURL),ge=this.transcoderBinary.slice(0);return me.postMessage({type:"init",config:this.workerConfig,transcoderBinary:ge},[ge]),me})}),_activeLoaders>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),_activeLoaders++}return this.transcoderPending}load(ee,ne,ae,ce){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const le=new FileLoader(this.manager);le.setResponseType("arraybuffer"),le.setWithCredentials(this.withCredentials),le.load(ee,ue=>{if(_taskCache.has(ue))return _taskCache.get(ue).promise.then(ne).catch(ce);this._createTexture(ue).then(he=>ne?ne(he):null).catch(ce)},ae,ce)}_createTextureFrom(ee,ne){const{mipmaps:ae,width:ce,height:le,format:ue,type:he,error:fe,dfdTransferFn:me,dfdFlags:ge}=ee;if(he==="error")return Promise.reject(fe);const ve=ne.layerCount>1?new CompressedArrayTexture(ae,ce,le,ne.layerCount,ue,UnsignedByteType):new CompressedTexture(ae,ce,le,ue,UnsignedByteType);return ve.minFilter=ae.length===1?LinearFilter:LinearMipmapLinearFilter,ve.magFilter=LinearFilter,ve.generateMipmaps=!1,ve.needsUpdate=!0,ve.encoding=me===x$3?sRGBEncoding:LinearEncoding,ve.premultiplyAlpha=!!(ge&p$2),ve}async _createTexture(ee,ne={}){const ae=Pi(new Uint8Array(ee));if(ae.vkFormat!==nt)return createDataTexture(ae);const ce=ne,le=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:ee,taskConfig:ce},[ee])).then(ue=>this._createTextureFrom(ue.data,ae));return _taskCache.set(ee,{promise:le}),le}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),_activeLoaders--,this}}KTX2Loader.BasisFormat={ETC1S:0,UASTC_4x4:1};KTX2Loader.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16};KTX2Loader.EngineFormat={RGBAFormat,RGBA_ASTC_4x4_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format};KTX2Loader.BasisWorker=function(){let re,ee,ne;const ae=_EngineFormat,ce=_TranscoderFormat,le=_BasisFormat;self.addEventListener("message",function(Ee){const Ce=Ee.data;switch(Ce.type){case"init":re=Ce.config,ue(Ce.transcoderBinary);break;case"transcode":ee.then(()=>{try{const{width:Se,height:Te,hasAlpha:ke,mipmaps:Ne,format:Fe,dfdTransferFn:De,dfdFlags:Oe}=he(Ce.buffer),Re=[];for(let Be=0;Be<Ne.length;++Be)Re.push(Ne[Be].data.buffer);self.postMessage({type:"transcode",id:Ce.id,width:Se,height:Te,hasAlpha:ke,mipmaps:Ne,format:Fe,dfdTransferFn:De,dfdFlags:Oe},Re)}catch(Se){console.error(Se),self.postMessage({type:"error",id:Ce.id,error:Se.message})}});break}});function ue(Ee){ee=new Promise(Ce=>{ne={wasmBinary:Ee,onRuntimeInitialized:Ce},BASIS(ne)}).then(()=>{ne.initializeBasis(),ne.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function he(Ee){const Ce=new ne.KTX2File(new Uint8Array(Ee));function Se(){Ce.close(),Ce.delete()}if(!Ce.isValid())throw Se(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const Te=Ce.isUASTC()?le.UASTC_4x4:le.ETC1S,ke=Ce.getWidth(),Ne=Ce.getHeight(),Fe=Ce.getLayers()||1,De=Ce.getLevels(),Oe=Ce.getHasAlpha(),Re=Ce.getDFDTransferFunc(),Be=Ce.getDFDFlags(),{transcoderFormat:Le,engineFormat:je}=ve(Te,ke,Ne,Oe);if(!ke||!Ne||!De)throw Se(),new Error("THREE.KTX2Loader:	Invalid texture");if(!Ce.startTranscoding())throw Se(),new Error("THREE.KTX2Loader: .startTranscoding failed");const Ge=[];for(let qe=0;qe<De;qe++){const Ue=[];let ze,He;for(let Ye=0;Ye<Fe;Ye++){const Xe=Ce.getImageLevelInfo(qe,Ye,0);ze=Xe.origWidth,He=Xe.origHeight;const We=new Uint8Array(Ce.getImageTranscodedSizeInBytes(qe,Ye,0,Le));if(!Ce.transcodeImage(We,qe,Ye,0,Le,0,-1,-1))throw Se(),new Error("THREE.KTX2Loader: .transcodeImage failed.");Ue.push(We)}Ge.push({data:be(Ue),width:ze,height:He})}return Se(),{width:ke,height:Ne,hasAlpha:Oe,mipmaps:Ge,format:je,dfdTransferFn:Re,dfdFlags:Be}}const fe=[{if:"astcSupported",basisFormat:[le.UASTC_4x4],transcoderFormat:[ce.ASTC_4x4,ce.ASTC_4x4],engineFormat:[ae.RGBA_ASTC_4x4_Format,ae.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[le.ETC1S,le.UASTC_4x4],transcoderFormat:[ce.BC7_M5,ce.BC7_M5],engineFormat:[ae.RGBA_BPTC_Format,ae.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[le.ETC1S,le.UASTC_4x4],transcoderFormat:[ce.BC1,ce.BC3],engineFormat:[ae.RGB_S3TC_DXT1_Format,ae.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[le.ETC1S,le.UASTC_4x4],transcoderFormat:[ce.ETC1,ce.ETC2],engineFormat:[ae.RGB_ETC2_Format,ae.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[le.ETC1S,le.UASTC_4x4],transcoderFormat:[ce.ETC1],engineFormat:[ae.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[le.ETC1S,le.UASTC_4x4],transcoderFormat:[ce.PVRTC1_4_RGB,ce.PVRTC1_4_RGBA],engineFormat:[ae.RGB_PVRTC_4BPPV1_Format,ae.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],me=fe.sort(function(Ee,Ce){return Ee.priorityETC1S-Ce.priorityETC1S}),ge=fe.sort(function(Ee,Ce){return Ee.priorityUASTC-Ce.priorityUASTC});function ve(Ee,Ce,Se,Te){let ke,Ne;const Fe=Ee===le.ETC1S?me:ge;for(let De=0;De<Fe.length;De++){const Oe=Fe[De];if(re[Oe.if]&&Oe.basisFormat.includes(Ee)&&!(Te&&Oe.transcoderFormat.length<2)&&!(Oe.needsPowerOfTwo&&!(ye(Ce)&&ye(Se))))return ke=Oe.transcoderFormat[Te?1:0],Ne=Oe.engineFormat[Te?1:0],{transcoderFormat:ke,engineFormat:Ne}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),ke=ce.RGBA32,Ne=ae.RGBAFormat,{transcoderFormat:ke,engineFormat:Ne}}function ye(Ee){return Ee<=2?!0:(Ee&Ee-1)===0&&Ee!==0}function be(Ee){let Ce=0;for(const ke of Ee)Ce+=ke.byteLength;const Se=new Uint8Array(Ce);let Te=0;for(const ke of Ee)Se.set(ke,Te),Te+=ke.byteLength;return Se}};const FORMAT_MAP={[Ae$1]:RGBAFormat,[pe]:RGBAFormat,[Ot]:RGBAFormat,[Ft]:RGBAFormat,[de]:RGFormat,[se]:RGFormat,[yt]:RGFormat,[dt]:RGFormat,[xe]:RedFormat,[$t]:RedFormat,[gt]:RedFormat,[ct]:RedFormat},TYPE_MAP={[Ae$1]:FloatType,[pe]:HalfFloatType,[Ot]:UnsignedByteType,[Ft]:UnsignedByteType,[de]:FloatType,[se]:HalfFloatType,[yt]:UnsignedByteType,[dt]:UnsignedByteType,[xe]:FloatType,[$t]:HalfFloatType,[gt]:UnsignedByteType,[ct]:UnsignedByteType},ENCODING_MAP={[Ft]:sRGBEncoding,[dt]:sRGBEncoding,[gt]:sRGBEncoding};async function createDataTexture(re){const{vkFormat:ee,pixelWidth:ne,pixelHeight:ae,pixelDepth:ce}=re;if(FORMAT_MAP[ee]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const le=re.levels[0];let ue,he;if(re.supercompressionScheme===t$1)ue=le.levelData;else if(re.supercompressionScheme===n$1)_zstd||(_zstd=new Promise(async me=>{const ge=new Q;await ge.init(),me(ge)})),ue=(await _zstd).decode(le.levelData,le.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");TYPE_MAP[ee]===FloatType?he=new Float32Array(ue.buffer,ue.byteOffset,ue.byteLength/Float32Array.BYTES_PER_ELEMENT):TYPE_MAP[ee]===HalfFloatType?he=new Uint16Array(ue.buffer,ue.byteOffset,ue.byteLength/Uint16Array.BYTES_PER_ELEMENT):he=ue;const fe=ce===0?new DataTexture(he,ne,ae):new Data3DTexture(he,ne,ae,ce);return fe.type=TYPE_MAP[ee],fe.format=FORMAT_MAP[ee],fe.encoding=ENCODING_MAP[ee]||LinearEncoding,fe.needsUpdate=!0,Promise.resolve(fe)}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$a,_b$9;const $retainerCount=Symbol("retainerCount"),$recentlyUsed=Symbol("recentlyUsed"),$evict=Symbol("evict"),$evictionThreshold=Symbol("evictionThreshold"),$cache=Symbol("cache");class CacheEvictionPolicy{constructor(ee,ne=5){this[_a$a]=new Map,this[_b$9]=[],this[$cache]=ee,this[$evictionThreshold]=ne}set evictionThreshold(ee){this[$evictionThreshold]=ee,this[$evict]()}get evictionThreshold(){return this[$evictionThreshold]}get cache(){return this[$cache]}retainerCount(ee){return this[$retainerCount].get(ee)||0}reset(){this[$retainerCount].clear(),this[$recentlyUsed]=[]}retain(ee){this[$retainerCount].has(ee)||this[$retainerCount].set(ee,0),this[$retainerCount].set(ee,this[$retainerCount].get(ee)+1);const ne=this[$recentlyUsed].indexOf(ee);ne!==-1&&this[$recentlyUsed].splice(ne,1),this[$recentlyUsed].unshift(ee),this[$evict]()}release(ee){this[$retainerCount].has(ee)&&this[$retainerCount].set(ee,Math.max(this[$retainerCount].get(ee)-1,0)),this[$evict]()}[(_a$a=$retainerCount,_b$9=$recentlyUsed,$evict)](){if(!(this[$recentlyUsed].length<this[$evictionThreshold]))for(let ee=this[$recentlyUsed].length-1;ee>=this[$evictionThreshold];--ee){const ne=this[$recentlyUsed][ee];this[$retainerCount].get(ne)===0&&(this[$cache].delete(ne),this[$recentlyUsed].splice(ee,1))}}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ensureUniqueNames=re=>{const ee=[],ne=new Set;for(const ae of re){let ce=ae,le=0;for(;ne.has(ce);)ce=ae+"."+ ++le;ne.add(ce),ee.push(ce)}return ee},mappingsArrayToTable=re=>{const ee=new Map;for(const ne of re.mappings)for(const ae of ne.variants)ee.set(ae,{material:null,gltfMaterialIndex:ne.material});return ee};class GLTFMaterialsVariantsExtension{constructor(ee){this.parser=ee,this.name="KHR_materials_variants"}afterRoot(ee){const ne=this.parser,ae=ne.json;if(ae.extensions===void 0||ae.extensions[this.name]===void 0)return null;const le=ae.extensions[this.name].variants||[],ue=ensureUniqueNames(le.map(he=>he.name));for(const he of ee.scenes)he.traverse(fe=>{const me=fe;if(!me.isMesh)return;const ge=ne.associations.get(me);if(ge==null||ge.meshes==null||ge.primitives==null)return;const Ee=ae.meshes[ge.meshes].primitives[ge.primitives].extensions;!Ee||!Ee[this.name]||(me.userData.variantMaterials=mappingsArrayToTable(Ee[this.name]))});return ee.userData.variants=ue,Promise.resolve()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$9,_b$8;Texture$1.DEFAULT_ANISOTROPY=4;const loadWithLoader=(re,ee,ne=()=>{})=>{const ae=ce=>{const le=ce.loaded/ce.total;ne(Math.max(0,Math.min(1,isFinite(le)?le:1)))};return new Promise((ce,le)=>{ee.load(re,ce,ae,le)})},fetchScript=re=>new Promise((ee,ne)=>{const ae=document.createElement("script");document.body.appendChild(ae),ae.onload=ee,ae.onerror=ne,ae.async=!0,ae.src=re}),cache$1=new Map,preloaded=new Map;let dracoDecoderLocation;const dracoLoader=new DRACOLoader;let ktx2TranscoderLocation;const ktx2Loader=new KTX2Loader;let meshoptDecoderLocation,meshoptDecoder;const $loader=Symbol("loader"),$evictionPolicy=Symbol("evictionPolicy"),$GLTFInstance=Symbol("GLTFInstance");class CachingGLTFLoader extends EventDispatcher{constructor(ee){super(),this[_b$8]=new GLTFLoader().register(ne=>new GLTFMaterialsVariantsExtension(ne)),this[$GLTFInstance]=ee,this[$loader].setDRACOLoader(dracoLoader),this[$loader].setKTX2Loader(ktx2Loader)}static setDRACODecoderLocation(ee){dracoDecoderLocation=ee,dracoLoader.setDecoderPath(ee)}static getDRACODecoderLocation(){return dracoDecoderLocation}static setKTX2TranscoderLocation(ee){ktx2TranscoderLocation=ee,ktx2Loader.setTranscoderPath(ee)}static getKTX2TranscoderLocation(){return ktx2TranscoderLocation}static setMeshoptDecoderLocation(ee){meshoptDecoderLocation!==ee&&(meshoptDecoderLocation=ee,meshoptDecoder=fetchScript(ee).then(()=>MeshoptDecoder.ready).then(()=>MeshoptDecoder))}static getMeshoptDecoderLocation(){return meshoptDecoderLocation}static initializeKTX2Loader(ee){ktx2Loader.detectSupport(ee)}static get cache(){return cache$1}static clearCache(){cache$1.forEach((ee,ne)=>{this.delete(ne)}),this[$evictionPolicy].reset()}static has(ee){return cache$1.has(ee)}static async delete(ee){if(!this.has(ee))return;const ne=cache$1.get(ee);preloaded.delete(ee),cache$1.delete(ee),(await ne).dispose()}static hasFinishedLoading(ee){return!!preloaded.get(ee)}get[(_a$9=$evictionPolicy,_b$8=$loader,$evictionPolicy)](){return this.constructor[$evictionPolicy]}async preload(ee,ne,ae=()=>{}){if(this[$loader].setWithCredentials(CachingGLTFLoader.withCredentials),this.dispatchEvent({type:"preload",element:ne,src:ee}),!cache$1.has(ee)){meshoptDecoder!=null&&this[$loader].setMeshoptDecoder(await meshoptDecoder);const ce=loadWithLoader(ee,this[$loader],he=>{ae(he*.8)}),le=this[$GLTFInstance],ue=ce.then(he=>le.prepare(he)).then(he=>(ae(.9),new le(he))).catch(he=>(console.error(he),new le));cache$1.set(ee,ue)}await cache$1.get(ee),preloaded.set(ee,!0),ae&&ae(1)}async load(ee,ne,ae=()=>{}){await this.preload(ee,ne,ae);const le=await(await cache$1.get(ee)).clone();return this[$evictionPolicy].retain(ee),le.dispose=()=>{this[$evictionPolicy].release(ee)},le}}CachingGLTFLoader[_a$9]=new CacheEvictionPolicy(CachingGLTFLoader);class CSS2DObject extends Object3D{constructor(ee=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=ee,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(ne){ne.element instanceof Element&&ne.element.parentNode!==null&&ne.element.parentNode.removeChild(ne.element)})})}copy(ee,ne){return super.copy(ee,ne),this.element=ee.element.cloneNode(!0),this}}const _vector=new Vector3,_viewMatrix=new Matrix4,_viewProjectionMatrix=new Matrix4,_a$8=new Vector3,_b$7=new Vector3;class CSS2DRenderer{constructor(ee={}){const ne=this;let ae,ce,le,ue;const he={objects:new WeakMap},fe=ee.element!==void 0?ee.element:document.createElement("div");fe.style.overflow="hidden",this.domElement=fe,this.getSize=function(){return{width:ae,height:ce}},this.render=function(be,Ee){be.matrixWorldAutoUpdate===!0&&be.updateMatrixWorld(),Ee.parent===null&&Ee.matrixWorldAutoUpdate===!0&&Ee.updateMatrixWorld(),_viewMatrix.copy(Ee.matrixWorldInverse),_viewProjectionMatrix.multiplyMatrices(Ee.projectionMatrix,_viewMatrix),me(be,be,Ee),ye(be)},this.setSize=function(be,Ee){ae=be,ce=Ee,le=ae/2,ue=ce/2,fe.style.width=be+"px",fe.style.height=Ee+"px"};function me(be,Ee,Ce){if(be.isCSS2DObject){_vector.setFromMatrixPosition(be.matrixWorld),_vector.applyMatrix4(_viewProjectionMatrix);const Se=be.visible===!0&&_vector.z>=-1&&_vector.z<=1&&be.layers.test(Ce.layers)===!0;if(be.element.style.display=Se===!0?"":"none",Se===!0){be.onBeforeRender(ne,Ee,Ce);const ke=be.element;ke.style.transform="translate(-50%,-50%) translate("+(_vector.x*le+le)+"px,"+(-_vector.y*ue+ue)+"px)",ke.parentNode!==fe&&fe.appendChild(ke),be.onAfterRender(ne,Ee,Ce)}const Te={distanceToCameraSquared:ge(Ce,be)};he.objects.set(be,Te)}for(let Se=0,Te=be.children.length;Se<Te;Se++)me(be.children[Se],Ee,Ce)}function ge(be,Ee){return _a$8.setFromMatrixPosition(be.matrixWorld),_b$7.setFromMatrixPosition(Ee.matrixWorld),_a$8.distanceToSquared(_b$7)}function ve(be){const Ee=[];return be.traverse(function(Ce){Ce.isCSS2DObject&&Ee.push(Ce)}),Ee}function ye(be){const Ee=ve(be).sort(function(Se,Te){if(Se.renderOrder!==Te.renderOrder)return Te.renderOrder-Se.renderOrder;const ke=he.objects.get(Se).distanceToCameraSquared,Ne=he.objects.get(Te).distanceToCameraSquared;return ke-Ne}),Ce=Ee.length;for(let Se=0,Te=Ee.length;Se<Te;Se++)Ee[Se].element.style.zIndex=Ce-Se}}}function reduceVertices(re,ee,ne){let ae=ne;const ce=new Vector3;return re.updateWorldMatrix(!0,!0),re.traverseVisible(le=>{const{geometry:ue}=le;if(ue!==void 0){const{position:he}=ue.attributes;if(he!==void 0)for(let fe=0,me=he.count;fe<me;fe++)le.isMesh?le.getVertexPosition(fe,ce):ce.fromBufferAttribute(he,fe),le.isSkinnedMesh||ce.applyMatrix4(le.matrixWorld),ae=ee(ae,ce)}}),ae}class GLTFExporter{constructor(){this.pluginCallbacks=[],this.register(function(ee){return new GLTFLightExtension(ee)}),this.register(function(ee){return new GLTFMaterialsUnlitExtension(ee)}),this.register(function(ee){return new GLTFMaterialsTransmissionExtension(ee)}),this.register(function(ee){return new GLTFMaterialsVolumeExtension(ee)}),this.register(function(ee){return new GLTFMaterialsIorExtension(ee)}),this.register(function(ee){return new GLTFMaterialsSpecularExtension(ee)}),this.register(function(ee){return new GLTFMaterialsClearcoatExtension(ee)}),this.register(function(ee){return new GLTFMaterialsIridescenceExtension(ee)})}register(ee){return this.pluginCallbacks.indexOf(ee)===-1&&this.pluginCallbacks.push(ee),this}unregister(ee){return this.pluginCallbacks.indexOf(ee)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(ee),1),this}parse(ee,ne,ae,ce){const le=new GLTFWriter,ue=[];for(let he=0,fe=this.pluginCallbacks.length;he<fe;he++)ue.push(this.pluginCallbacks[he](le));le.setPlugins(ue),le.write(ee,ne,ce).catch(ae)}parseAsync(ee,ne){const ae=this;return new Promise(function(ce,le){ae.parse(ee,ce,le,ne)})}}const WEBGL_CONSTANTS={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},THREE_TO_WEBGL={};THREE_TO_WEBGL[NearestFilter]=WEBGL_CONSTANTS.NEAREST;THREE_TO_WEBGL[NearestMipmapNearestFilter]=WEBGL_CONSTANTS.NEAREST_MIPMAP_NEAREST;THREE_TO_WEBGL[NearestMipmapLinearFilter]=WEBGL_CONSTANTS.NEAREST_MIPMAP_LINEAR;THREE_TO_WEBGL[LinearFilter]=WEBGL_CONSTANTS.LINEAR;THREE_TO_WEBGL[LinearMipmapNearestFilter]=WEBGL_CONSTANTS.LINEAR_MIPMAP_NEAREST;THREE_TO_WEBGL[LinearMipmapLinearFilter]=WEBGL_CONSTANTS.LINEAR_MIPMAP_LINEAR;THREE_TO_WEBGL[ClampToEdgeWrapping]=WEBGL_CONSTANTS.CLAMP_TO_EDGE;THREE_TO_WEBGL[RepeatWrapping]=WEBGL_CONSTANTS.REPEAT;THREE_TO_WEBGL[MirroredRepeatWrapping]=WEBGL_CONSTANTS.MIRRORED_REPEAT;const PATH_PROPERTIES={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},DEFAULT_SPECULAR_COLOR=new Color,GLB_HEADER_BYTES=12,GLB_HEADER_MAGIC=1179937895,GLB_VERSION=2,GLB_CHUNK_PREFIX_BYTES=8,GLB_CHUNK_TYPE_JSON=1313821514,GLB_CHUNK_TYPE_BIN=5130562;function equalArray(re,ee){return re.length===ee.length&&re.every(function(ne,ae){return ne===ee[ae]})}function stringToArrayBuffer(re){return new TextEncoder().encode(re).buffer}function isIdentityMatrix(re){return equalArray(re.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function getMinMax(re,ee,ne){const ae={min:new Array(re.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(re.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let ce=ee;ce<ee+ne;ce++)for(let le=0;le<re.itemSize;le++){let ue;re.itemSize>4?ue=re.array[ce*re.itemSize+le]:(le===0?ue=re.getX(ce):le===1?ue=re.getY(ce):le===2?ue=re.getZ(ce):le===3&&(ue=re.getW(ce)),re.normalized===!0&&(ue=MathUtils.normalize(ue,re.array))),ae.min[le]=Math.min(ae.min[le],ue),ae.max[le]=Math.max(ae.max[le],ue)}return ae}function getPaddedBufferSize(re){return Math.ceil(re/4)*4}function getPaddedArrayBuffer(re,ee=0){const ne=getPaddedBufferSize(re.byteLength);if(ne!==re.byteLength){const ae=new Uint8Array(ne);if(ae.set(new Uint8Array(re)),ee!==0)for(let ce=re.byteLength;ce<ne;ce++)ae[ce]=ee;return ae.buffer}return re}function getCanvas(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function getToBlobPromise(re,ee){if(re.toBlob!==void 0)return new Promise(ae=>re.toBlob(ae,ee));let ne;return ee==="image/jpeg"?ne=.92:ee==="image/webp"&&(ne=.8),re.convertToBlob({type:ee,quality:ne})}class GLTFWriter{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(ee){this.plugins=ee}async write(ee,ne,ae={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},ae),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(ee),await Promise.all(this.pending);const ce=this,le=ce.buffers,ue=ce.json;ae=ce.options;const he=ce.extensionsUsed,fe=new Blob(le,{type:"application/octet-stream"}),me=Object.keys(he);if(me.length>0&&(ue.extensionsUsed=me),ue.buffers&&ue.buffers.length>0&&(ue.buffers[0].byteLength=fe.size),ae.binary===!0){const ge=new FileReader;ge.readAsArrayBuffer(fe),ge.onloadend=function(){const ve=getPaddedArrayBuffer(ge.result),ye=new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));ye.setUint32(0,ve.byteLength,!0),ye.setUint32(4,GLB_CHUNK_TYPE_BIN,!0);const be=getPaddedArrayBuffer(stringToArrayBuffer(JSON.stringify(ue)),32),Ee=new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));Ee.setUint32(0,be.byteLength,!0),Ee.setUint32(4,GLB_CHUNK_TYPE_JSON,!0);const Ce=new ArrayBuffer(GLB_HEADER_BYTES),Se=new DataView(Ce);Se.setUint32(0,GLB_HEADER_MAGIC,!0),Se.setUint32(4,GLB_VERSION,!0);const Te=GLB_HEADER_BYTES+Ee.byteLength+be.byteLength+ye.byteLength+ve.byteLength;Se.setUint32(8,Te,!0);const ke=new Blob([Ce,Ee,be,ye,ve],{type:"application/octet-stream"}),Ne=new FileReader;Ne.readAsArrayBuffer(ke),Ne.onloadend=function(){ne(Ne.result)}}}else if(ue.buffers&&ue.buffers.length>0){const ge=new FileReader;ge.readAsDataURL(fe),ge.onloadend=function(){const ve=ge.result;ue.buffers[0].uri=ve,ne(ue)}}else ne(ue)}serializeUserData(ee,ne){if(Object.keys(ee.userData).length===0)return;const ae=this.options,ce=this.extensionsUsed;try{const le=JSON.parse(JSON.stringify(ee.userData));if(ae.includeCustomExtensions&&le.gltfExtensions){ne.extensions===void 0&&(ne.extensions={});for(const ue in le.gltfExtensions)ne.extensions[ue]=le.gltfExtensions[ue],ce[ue]=!0;delete le.gltfExtensions}Object.keys(le).length>0&&(ne.extras=le)}catch(le){console.warn("THREE.GLTFExporter: userData of '"+ee.name+"' won't be serialized because of JSON.stringify error - "+le.message)}}getUID(ee,ne=!1){if(this.uids.has(ee)===!1){const ce=new Map;ce.set(!0,this.uid++),ce.set(!1,this.uid++),this.uids.set(ee,ce)}return this.uids.get(ee).get(ne)}isNormalizedNormalAttribute(ee){if(this.cache.attributesNormalized.has(ee))return!1;const ae=new Vector3;for(let ce=0,le=ee.count;ce<le;ce++)if(Math.abs(ae.fromBufferAttribute(ee,ce).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(ee){const ne=this.cache;if(ne.attributesNormalized.has(ee))return ne.attributesNormalized.get(ee);const ae=ee.clone(),ce=new Vector3;for(let le=0,ue=ae.count;le<ue;le++)ce.fromBufferAttribute(ae,le),ce.x===0&&ce.y===0&&ce.z===0?ce.setX(1):ce.normalize(),ae.setXYZ(le,ce.x,ce.y,ce.z);return ne.attributesNormalized.set(ee,ae),ae}applyTextureTransform(ee,ne){let ae=!1;const ce={};(ne.offset.x!==0||ne.offset.y!==0)&&(ce.offset=ne.offset.toArray(),ae=!0),ne.rotation!==0&&(ce.rotation=ne.rotation,ae=!0),(ne.repeat.x!==1||ne.repeat.y!==1)&&(ce.scale=ne.repeat.toArray(),ae=!0),ae&&(ee.extensions=ee.extensions||{},ee.extensions.KHR_texture_transform=ce,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(ee,ne){if(ee===ne)return ee;function ae(be){return be.encoding===sRGBEncoding?function(Ce){return Ce<.04045?Ce*.0773993808:Math.pow(Ce*.9478672986+.0521327014,2.4)}:function(Ce){return Ce}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const ce=ee?ee.image:null,le=ne?ne.image:null,ue=Math.max(ce?ce.width:0,le?le.width:0),he=Math.max(ce?ce.height:0,le?le.height:0),fe=getCanvas();fe.width=ue,fe.height=he;const me=fe.getContext("2d");me.fillStyle="#00ffff",me.fillRect(0,0,ue,he);const ge=me.getImageData(0,0,ue,he);if(ce){me.drawImage(ce,0,0,ue,he);const be=ae(ee),Ee=me.getImageData(0,0,ue,he).data;for(let Ce=2;Ce<Ee.length;Ce+=4)ge.data[Ce]=be(Ee[Ce]/256)*256}if(le){me.drawImage(le,0,0,ue,he);const be=ae(ne),Ee=me.getImageData(0,0,ue,he).data;for(let Ce=1;Ce<Ee.length;Ce+=4)ge.data[Ce]=be(Ee[Ce]/256)*256}me.putImageData(ge,0,0);const ye=(ee||ne).clone();return ye.source=new Source$2(fe),ye.encoding=LinearEncoding,ye}processBuffer(ee){const ne=this.json,ae=this.buffers;return ne.buffers||(ne.buffers=[{byteLength:0}]),ae.push(ee),0}processBufferView(ee,ne,ae,ce,le){const ue=this.json;ue.bufferViews||(ue.bufferViews=[]);let he;ne===WEBGL_CONSTANTS.UNSIGNED_BYTE?he=1:ne===WEBGL_CONSTANTS.UNSIGNED_SHORT?he=2:he=4;const fe=getPaddedBufferSize(ce*ee.itemSize*he),me=new DataView(new ArrayBuffer(fe));let ge=0;for(let be=ae;be<ae+ce;be++)for(let Ee=0;Ee<ee.itemSize;Ee++){let Ce;ee.itemSize>4?Ce=ee.array[be*ee.itemSize+Ee]:(Ee===0?Ce=ee.getX(be):Ee===1?Ce=ee.getY(be):Ee===2?Ce=ee.getZ(be):Ee===3&&(Ce=ee.getW(be)),ee.normalized===!0&&(Ce=MathUtils.normalize(Ce,ee.array))),ne===WEBGL_CONSTANTS.FLOAT?me.setFloat32(ge,Ce,!0):ne===WEBGL_CONSTANTS.UNSIGNED_INT?me.setUint32(ge,Ce,!0):ne===WEBGL_CONSTANTS.UNSIGNED_SHORT?me.setUint16(ge,Ce,!0):ne===WEBGL_CONSTANTS.UNSIGNED_BYTE&&me.setUint8(ge,Ce),ge+=he}const ve={buffer:this.processBuffer(me.buffer),byteOffset:this.byteOffset,byteLength:fe};return le!==void 0&&(ve.target=le),le===WEBGL_CONSTANTS.ARRAY_BUFFER&&(ve.byteStride=ee.itemSize*he),this.byteOffset+=fe,ue.bufferViews.push(ve),{id:ue.bufferViews.length-1,byteLength:0}}processBufferViewImage(ee){const ne=this,ae=ne.json;return ae.bufferViews||(ae.bufferViews=[]),new Promise(function(ce){const le=new FileReader;le.readAsArrayBuffer(ee),le.onloadend=function(){const ue=getPaddedArrayBuffer(le.result),he={buffer:ne.processBuffer(ue),byteOffset:ne.byteOffset,byteLength:ue.byteLength};ne.byteOffset+=ue.byteLength,ce(ae.bufferViews.push(he)-1)}})}processAccessor(ee,ne,ae,ce){const le=this.json,ue={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};let he;if(ee.array.constructor===Float32Array)he=WEBGL_CONSTANTS.FLOAT;else if(ee.array.constructor===Uint32Array)he=WEBGL_CONSTANTS.UNSIGNED_INT;else if(ee.array.constructor===Uint16Array)he=WEBGL_CONSTANTS.UNSIGNED_SHORT;else if(ee.array.constructor===Uint8Array)he=WEBGL_CONSTANTS.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(ae===void 0&&(ae=0),ce===void 0&&(ce=ee.count),ce===0)return null;const fe=getMinMax(ee,ae,ce);let me;ne!==void 0&&(me=ee===ne.index?WEBGL_CONSTANTS.ELEMENT_ARRAY_BUFFER:WEBGL_CONSTANTS.ARRAY_BUFFER);const ge=this.processBufferView(ee,he,ae,ce,me),ve={bufferView:ge.id,byteOffset:ge.byteOffset,componentType:he,count:ce,max:fe.max,min:fe.min,type:ue[ee.itemSize]};return ee.normalized===!0&&(ve.normalized=!0),le.accessors||(le.accessors=[]),le.accessors.push(ve)-1}processImage(ee,ne,ae,ce="image/png"){if(ee!==null){const le=this,ue=le.cache,he=le.json,fe=le.options,me=le.pending;ue.images.has(ee)||ue.images.set(ee,{});const ge=ue.images.get(ee),ve=ce+":flipY/"+ae.toString();if(ge[ve]!==void 0)return ge[ve];he.images||(he.images=[]);const ye={mimeType:ce},be=getCanvas();be.width=Math.min(ee.width,fe.maxTextureSize),be.height=Math.min(ee.height,fe.maxTextureSize);const Ee=be.getContext("2d");if(ae===!0&&(Ee.translate(0,be.height),Ee.scale(1,-1)),ee.data!==void 0){ne!==RGBAFormat&&console.error("GLTFExporter: Only RGBAFormat is supported."),(ee.width>fe.maxTextureSize||ee.height>fe.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",ee);const Se=new Uint8ClampedArray(ee.height*ee.width*4);for(let Te=0;Te<Se.length;Te+=4)Se[Te+0]=ee.data[Te+0],Se[Te+1]=ee.data[Te+1],Se[Te+2]=ee.data[Te+2],Se[Te+3]=ee.data[Te+3];Ee.putImageData(new ImageData(Se,ee.width,ee.height),0,0)}else Ee.drawImage(ee,0,0,be.width,be.height);fe.binary===!0?me.push(getToBlobPromise(be,ce).then(Se=>le.processBufferViewImage(Se)).then(Se=>{ye.bufferView=Se})):be.toDataURL!==void 0?ye.uri=be.toDataURL(ce):me.push(getToBlobPromise(be,ce).then(Se=>new FileReader().readAsDataURL(Se)).then(Se=>{ye.uri=Se}));const Ce=he.images.push(ye)-1;return ge[ve]=Ce,Ce}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(ee){const ne=this.json;ne.samplers||(ne.samplers=[]);const ae={magFilter:THREE_TO_WEBGL[ee.magFilter],minFilter:THREE_TO_WEBGL[ee.minFilter],wrapS:THREE_TO_WEBGL[ee.wrapS],wrapT:THREE_TO_WEBGL[ee.wrapT]};return ne.samplers.push(ae)-1}processTexture(ee){const ne=this.cache,ae=this.json;if(ne.textures.has(ee))return ne.textures.get(ee);ae.textures||(ae.textures=[]);let ce=ee.userData.mimeType;ce==="image/webp"&&(ce="image/png");const le={sampler:this.processSampler(ee),source:this.processImage(ee.image,ee.format,ee.flipY,ce)};ee.name&&(le.name=ee.name),this._invokeAll(function(he){he.writeTexture&&he.writeTexture(ee,le)});const ue=ae.textures.push(le)-1;return ne.textures.set(ee,ue),ue}processMaterial(ee){const ne=this.cache,ae=this.json;if(ne.materials.has(ee))return ne.materials.get(ee);if(ee.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;ae.materials||(ae.materials=[]);const ce={pbrMetallicRoughness:{}};ee.isMeshStandardMaterial!==!0&&ee.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const le=ee.color.toArray().concat([ee.opacity]);if(equalArray(le,[1,1,1,1])||(ce.pbrMetallicRoughness.baseColorFactor=le),ee.isMeshStandardMaterial?(ce.pbrMetallicRoughness.metallicFactor=ee.metalness,ce.pbrMetallicRoughness.roughnessFactor=ee.roughness):(ce.pbrMetallicRoughness.metallicFactor=.5,ce.pbrMetallicRoughness.roughnessFactor=.5),ee.metalnessMap||ee.roughnessMap){const he=this.buildMetalRoughTexture(ee.metalnessMap,ee.roughnessMap),fe={index:this.processTexture(he)};this.applyTextureTransform(fe,he),ce.pbrMetallicRoughness.metallicRoughnessTexture=fe}if(ee.map){const he={index:this.processTexture(ee.map)};this.applyTextureTransform(he,ee.map),ce.pbrMetallicRoughness.baseColorTexture=he}if(ee.emissive){const he=ee.emissive.clone().multiplyScalar(ee.emissiveIntensity),fe=Math.max(he.r,he.g,he.b);if(fe>1&&(he.multiplyScalar(1/fe),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),fe>0&&(ce.emissiveFactor=he.toArray()),ee.emissiveMap){const me={index:this.processTexture(ee.emissiveMap)};this.applyTextureTransform(me,ee.emissiveMap),ce.emissiveTexture=me}}if(ee.normalMap){const he={index:this.processTexture(ee.normalMap)};ee.normalScale&&ee.normalScale.x!==1&&(he.scale=ee.normalScale.x),this.applyTextureTransform(he,ee.normalMap),ce.normalTexture=he}if(ee.aoMap){const he={index:this.processTexture(ee.aoMap),texCoord:1};ee.aoMapIntensity!==1&&(he.strength=ee.aoMapIntensity),this.applyTextureTransform(he,ee.aoMap),ce.occlusionTexture=he}ee.transparent?ce.alphaMode="BLEND":ee.alphaTest>0&&(ce.alphaMode="MASK",ce.alphaCutoff=ee.alphaTest),ee.side===DoubleSide&&(ce.doubleSided=!0),ee.name!==""&&(ce.name=ee.name),this.serializeUserData(ee,ce),this._invokeAll(function(he){he.writeMaterial&&he.writeMaterial(ee,ce)});const ue=ae.materials.push(ce)-1;return ne.materials.set(ee,ue),ue}processMesh(ee){const ne=this.cache,ae=this.json,ce=[ee.geometry.uuid];if(Array.isArray(ee.material))for(let Ne=0,Fe=ee.material.length;Ne<Fe;Ne++)ce.push(ee.material[Ne].uuid);else ce.push(ee.material.uuid);const le=ce.join(":");if(ne.meshes.has(le))return ne.meshes.get(le);const ue=ee.geometry;let he;ee.isLineSegments?he=WEBGL_CONSTANTS.LINES:ee.isLineLoop?he=WEBGL_CONSTANTS.LINE_LOOP:ee.isLine?he=WEBGL_CONSTANTS.LINE_STRIP:ee.isPoints?he=WEBGL_CONSTANTS.POINTS:he=ee.material.wireframe?WEBGL_CONSTANTS.LINES:WEBGL_CONSTANTS.TRIANGLES;const fe={},me={},ge=[],ve=[],ye={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},be=ue.getAttribute("normal");be!==void 0&&!this.isNormalizedNormalAttribute(be)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),ue.setAttribute("normal",this.createNormalizedNormalAttribute(be)));let Ee=null;for(let Ne in ue.attributes){if(Ne.slice(0,5)==="morph")continue;const Fe=ue.attributes[Ne];if(Ne=ye[Ne]||Ne.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(Ne)||(Ne="_"+Ne),ne.attributes.has(this.getUID(Fe))){me[Ne]=ne.attributes.get(this.getUID(Fe));continue}Ee=null;const Oe=Fe.array;Ne==="JOINTS_0"&&!(Oe instanceof Uint16Array)&&!(Oe instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),Ee=new BufferAttribute(new Uint16Array(Oe),Fe.itemSize,Fe.normalized));const Re=this.processAccessor(Ee||Fe,ue);Re!==null&&(me[Ne]=Re,ne.attributes.set(this.getUID(Fe),Re))}if(be!==void 0&&ue.setAttribute("normal",be),Object.keys(me).length===0)return null;if(ee.morphTargetInfluences!==void 0&&ee.morphTargetInfluences.length>0){const Ne=[],Fe=[],De={};if(ee.morphTargetDictionary!==void 0)for(const Oe in ee.morphTargetDictionary)De[ee.morphTargetDictionary[Oe]]=Oe;for(let Oe=0;Oe<ee.morphTargetInfluences.length;++Oe){const Re={};let Be=!1;for(const Le in ue.morphAttributes){if(Le!=="position"&&Le!=="normal"){Be||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),Be=!0);continue}const je=ue.morphAttributes[Le][Oe],Ge=Le.toUpperCase(),qe=ue.attributes[Le];if(ne.attributes.has(this.getUID(je,!0))){Re[Ge]=ne.attributes.get(this.getUID(je,!0));continue}const Ue=je.clone();if(!ue.morphTargetsRelative)for(let ze=0,He=je.count;ze<He;ze++)for(let Ye=0;Ye<je.itemSize;Ye++)Ye===0&&Ue.setX(ze,je.getX(ze)-qe.getX(ze)),Ye===1&&Ue.setY(ze,je.getY(ze)-qe.getY(ze)),Ye===2&&Ue.setZ(ze,je.getZ(ze)-qe.getZ(ze)),Ye===3&&Ue.setW(ze,je.getW(ze)-qe.getW(ze));Re[Ge]=this.processAccessor(Ue,ue),ne.attributes.set(this.getUID(qe,!0),Re[Ge])}ve.push(Re),Ne.push(ee.morphTargetInfluences[Oe]),ee.morphTargetDictionary!==void 0&&Fe.push(De[Oe])}fe.weights=Ne,Fe.length>0&&(fe.extras={},fe.extras.targetNames=Fe)}const Ce=Array.isArray(ee.material);if(Ce&&ue.groups.length===0)return null;const Se=Ce?ee.material:[ee.material],Te=Ce?ue.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let Ne=0,Fe=Te.length;Ne<Fe;Ne++){const De={mode:he,attributes:me};if(this.serializeUserData(ue,De),ve.length>0&&(De.targets=ve),ue.index!==null){let Re=this.getUID(ue.index);(Te[Ne].start!==void 0||Te[Ne].count!==void 0)&&(Re+=":"+Te[Ne].start+":"+Te[Ne].count),ne.attributes.has(Re)?De.indices=ne.attributes.get(Re):(De.indices=this.processAccessor(ue.index,ue,Te[Ne].start,Te[Ne].count),ne.attributes.set(Re,De.indices)),De.indices===null&&delete De.indices}const Oe=this.processMaterial(Se[Te[Ne].materialIndex]);Oe!==null&&(De.material=Oe),ge.push(De)}fe.primitives=ge,ae.meshes||(ae.meshes=[]),this._invokeAll(function(Ne){Ne.writeMesh&&Ne.writeMesh(ee,fe)});const ke=ae.meshes.push(fe)-1;return ne.meshes.set(le,ke),ke}processCamera(ee){const ne=this.json;ne.cameras||(ne.cameras=[]);const ae=ee.isOrthographicCamera,ce={type:ae?"orthographic":"perspective"};return ae?ce.orthographic={xmag:ee.right*2,ymag:ee.top*2,zfar:ee.far<=0?.001:ee.far,znear:ee.near<0?0:ee.near}:ce.perspective={aspectRatio:ee.aspect,yfov:MathUtils.degToRad(ee.fov),zfar:ee.far<=0?.001:ee.far,znear:ee.near<0?0:ee.near},ee.name!==""&&(ce.name=ee.type),ne.cameras.push(ce)-1}processAnimation(ee,ne){const ae=this.json,ce=this.nodeMap;ae.animations||(ae.animations=[]),ee=GLTFExporter.Utils.mergeMorphTargetTracks(ee.clone(),ne);const le=ee.tracks,ue=[],he=[];for(let fe=0;fe<le.length;++fe){const me=le[fe],ge=PropertyBinding.parseTrackName(me.name);let ve=PropertyBinding.findNode(ne,ge.nodeName);const ye=PATH_PROPERTIES[ge.propertyName];if(ge.objectName==="bones"&&(ve.isSkinnedMesh===!0?ve=ve.skeleton.getBoneByName(ge.objectIndex):ve=void 0),!ve||!ye)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',me.name),null;const be=1;let Ee=me.values.length/me.times.length;ye===PATH_PROPERTIES.morphTargetInfluences&&(Ee/=ve.morphTargetInfluences.length);let Ce;me.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(Ce="CUBICSPLINE",Ee/=3):me.getInterpolation()===InterpolateDiscrete?Ce="STEP":Ce="LINEAR",he.push({input:this.processAccessor(new BufferAttribute(me.times,be)),output:this.processAccessor(new BufferAttribute(me.values,Ee)),interpolation:Ce}),ue.push({sampler:he.length-1,target:{node:ce.get(ve),path:ye}})}return ae.animations.push({name:ee.name||"clip_"+ae.animations.length,samplers:he,channels:ue}),ae.animations.length-1}processSkin(ee){const ne=this.json,ae=this.nodeMap,ce=ne.nodes[ae.get(ee)],le=ee.skeleton;if(le===void 0)return null;const ue=ee.skeleton.bones[0];if(ue===void 0)return null;const he=[],fe=new Float32Array(le.bones.length*16),me=new Matrix4;for(let ve=0;ve<le.bones.length;++ve)he.push(ae.get(le.bones[ve])),me.copy(le.boneInverses[ve]),me.multiply(ee.bindMatrix).toArray(fe,ve*16);return ne.skins===void 0&&(ne.skins=[]),ne.skins.push({inverseBindMatrices:this.processAccessor(new BufferAttribute(fe,16)),joints:he,skeleton:ae.get(ue)}),ce.skin=ne.skins.length-1}processNode(ee){const ne=this.json,ae=this.options,ce=this.nodeMap;ne.nodes||(ne.nodes=[]);const le={};if(ae.trs){const he=ee.quaternion.toArray(),fe=ee.position.toArray(),me=ee.scale.toArray();equalArray(he,[0,0,0,1])||(le.rotation=he),equalArray(fe,[0,0,0])||(le.translation=fe),equalArray(me,[1,1,1])||(le.scale=me)}else ee.matrixAutoUpdate&&ee.updateMatrix(),isIdentityMatrix(ee.matrix)===!1&&(le.matrix=ee.matrix.elements);if(ee.name!==""&&(le.name=String(ee.name)),this.serializeUserData(ee,le),ee.isMesh||ee.isLine||ee.isPoints){const he=this.processMesh(ee);he!==null&&(le.mesh=he)}else ee.isCamera&&(le.camera=this.processCamera(ee));if(ee.isSkinnedMesh&&this.skins.push(ee),ee.children.length>0){const he=[];for(let fe=0,me=ee.children.length;fe<me;fe++){const ge=ee.children[fe];if(ge.visible||ae.onlyVisible===!1){const ve=this.processNode(ge);ve!==null&&he.push(ve)}}he.length>0&&(le.children=he)}this._invokeAll(function(he){he.writeNode&&he.writeNode(ee,le)});const ue=ne.nodes.push(le)-1;return ce.set(ee,ue),ue}processScene(ee){const ne=this.json,ae=this.options;ne.scenes||(ne.scenes=[],ne.scene=0);const ce={};ee.name!==""&&(ce.name=ee.name),ne.scenes.push(ce);const le=[];for(let ue=0,he=ee.children.length;ue<he;ue++){const fe=ee.children[ue];if(fe.visible||ae.onlyVisible===!1){const me=this.processNode(fe);me!==null&&le.push(me)}}le.length>0&&(ce.nodes=le),this.serializeUserData(ee,ce)}processObjects(ee){const ne=new Scene;ne.name="AuxScene";for(let ae=0;ae<ee.length;ae++)ne.children.push(ee[ae]);this.processScene(ne)}processInput(ee){const ne=this.options;ee=ee instanceof Array?ee:[ee],this._invokeAll(function(ce){ce.beforeParse&&ce.beforeParse(ee)});const ae=[];for(let ce=0;ce<ee.length;ce++)ee[ce]instanceof Scene?this.processScene(ee[ce]):ae.push(ee[ce]);ae.length>0&&this.processObjects(ae);for(let ce=0;ce<this.skins.length;++ce)this.processSkin(this.skins[ce]);for(let ce=0;ce<ne.animations.length;++ce)this.processAnimation(ne.animations[ce],ee[0]);this._invokeAll(function(ce){ce.afterParse&&ce.afterParse(ee)})}_invokeAll(ee){for(let ne=0,ae=this.plugins.length;ne<ae;ne++)ee(this.plugins[ne])}}class GLTFLightExtension{constructor(ee){this.writer=ee,this.name="KHR_lights_punctual"}writeNode(ee,ne){if(!ee.isLight)return;if(!ee.isDirectionalLight&&!ee.isPointLight&&!ee.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",ee);return}const ae=this.writer,ce=ae.json,le=ae.extensionsUsed,ue={};ee.name&&(ue.name=ee.name),ue.color=ee.color.toArray(),ue.intensity=ee.intensity,ee.isDirectionalLight?ue.type="directional":ee.isPointLight?(ue.type="point",ee.distance>0&&(ue.range=ee.distance)):ee.isSpotLight&&(ue.type="spot",ee.distance>0&&(ue.range=ee.distance),ue.spot={},ue.spot.innerConeAngle=(ee.penumbra-1)*ee.angle*-1,ue.spot.outerConeAngle=ee.angle),ee.decay!==void 0&&ee.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),ee.target&&(ee.target.parent!==ee||ee.target.position.x!==0||ee.target.position.y!==0||ee.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),le[this.name]||(ce.extensions=ce.extensions||{},ce.extensions[this.name]={lights:[]},le[this.name]=!0);const he=ce.extensions[this.name].lights;he.push(ue),ne.extensions=ne.extensions||{},ne.extensions[this.name]={light:he.length-1}}}class GLTFMaterialsUnlitExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_unlit"}writeMaterial(ee,ne){if(!ee.isMeshBasicMaterial)return;const ce=this.writer.extensionsUsed;ne.extensions=ne.extensions||{},ne.extensions[this.name]={},ce[this.name]=!0,ne.pbrMetallicRoughness.metallicFactor=0,ne.pbrMetallicRoughness.roughnessFactor=.9}}class GLTFMaterialsClearcoatExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_clearcoat"}writeMaterial(ee,ne){if(!ee.isMeshPhysicalMaterial||ee.clearcoat===0)return;const ae=this.writer,ce=ae.extensionsUsed,le={};if(le.clearcoatFactor=ee.clearcoat,ee.clearcoatMap){const ue={index:ae.processTexture(ee.clearcoatMap)};ae.applyTextureTransform(ue,ee.clearcoatMap),le.clearcoatTexture=ue}if(le.clearcoatRoughnessFactor=ee.clearcoatRoughness,ee.clearcoatRoughnessMap){const ue={index:ae.processTexture(ee.clearcoatRoughnessMap)};ae.applyTextureTransform(ue,ee.clearcoatRoughnessMap),le.clearcoatRoughnessTexture=ue}if(ee.clearcoatNormalMap){const ue={index:ae.processTexture(ee.clearcoatNormalMap)};ae.applyTextureTransform(ue,ee.clearcoatNormalMap),le.clearcoatNormalTexture=ue}ne.extensions=ne.extensions||{},ne.extensions[this.name]=le,ce[this.name]=!0}}class GLTFMaterialsIridescenceExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_iridescence"}writeMaterial(ee,ne){if(!ee.isMeshPhysicalMaterial||ee.iridescence===0)return;const ae=this.writer,ce=ae.extensionsUsed,le={};if(le.iridescenceFactor=ee.iridescence,ee.iridescenceMap){const ue={index:ae.processTexture(ee.iridescenceMap)};ae.applyTextureTransform(ue,ee.iridescenceMap),le.iridescenceTexture=ue}if(le.iridescenceIor=ee.iridescenceIOR,le.iridescenceThicknessMinimum=ee.iridescenceThicknessRange[0],le.iridescenceThicknessMaximum=ee.iridescenceThicknessRange[1],ee.iridescenceThicknessMap){const ue={index:ae.processTexture(ee.iridescenceThicknessMap)};ae.applyTextureTransform(ue,ee.iridescenceThicknessMap),le.iridescenceThicknessTexture=ue}ne.extensions=ne.extensions||{},ne.extensions[this.name]=le,ce[this.name]=!0}}class GLTFMaterialsTransmissionExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_transmission"}writeMaterial(ee,ne){if(!ee.isMeshPhysicalMaterial||ee.transmission===0)return;const ae=this.writer,ce=ae.extensionsUsed,le={};if(le.transmissionFactor=ee.transmission,ee.transmissionMap){const ue={index:ae.processTexture(ee.transmissionMap)};ae.applyTextureTransform(ue,ee.transmissionMap),le.transmissionTexture=ue}ne.extensions=ne.extensions||{},ne.extensions[this.name]=le,ce[this.name]=!0}}class GLTFMaterialsVolumeExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_volume"}writeMaterial(ee,ne){if(!ee.isMeshPhysicalMaterial||ee.transmission===0)return;const ae=this.writer,ce=ae.extensionsUsed,le={};if(le.thicknessFactor=ee.thickness,ee.thicknessMap){const ue={index:ae.processTexture(ee.thicknessMap)};ae.applyTextureTransform(ue,ee.thicknessMap),le.thicknessTexture=ue}le.attenuationDistance=ee.attenuationDistance,le.attenuationColor=ee.attenuationColor.toArray(),ne.extensions=ne.extensions||{},ne.extensions[this.name]=le,ce[this.name]=!0}}class GLTFMaterialsIorExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_ior"}writeMaterial(ee,ne){if(!ee.isMeshPhysicalMaterial||ee.ior===1.5)return;const ce=this.writer.extensionsUsed,le={};le.ior=ee.ior,ne.extensions=ne.extensions||{},ne.extensions[this.name]=le,ce[this.name]=!0}}class GLTFMaterialsSpecularExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_specular"}writeMaterial(ee,ne){if(!ee.isMeshPhysicalMaterial||ee.specularIntensity===1&&ee.specularColor.equals(DEFAULT_SPECULAR_COLOR)&&!ee.specularIntensityMap&&!ee.specularColorTexture)return;const ae=this.writer,ce=ae.extensionsUsed,le={};if(ee.specularIntensityMap){const ue={index:ae.processTexture(ee.specularIntensityMap)};ae.applyTextureTransform(ue,ee.specularIntensityMap),le.specularTexture=ue}if(ee.specularColorMap){const ue={index:ae.processTexture(ee.specularColorMap)};ae.applyTextureTransform(ue,ee.specularColorMap),le.specularColorTexture=ue}le.specularFactor=ee.specularIntensity,le.specularColorFactor=ee.specularColor.toArray(),ne.extensions=ne.extensions||{},ne.extensions[this.name]=le,ce[this.name]=!0}}GLTFExporter.Utils={insertKeyframe:function(re,ee){const ae=re.getValueSize(),ce=new re.TimeBufferType(re.times.length+1),le=new re.ValueBufferType(re.values.length+ae),ue=re.createInterpolant(new re.ValueBufferType(ae));let he;if(re.times.length===0){ce[0]=ee;for(let fe=0;fe<ae;fe++)le[fe]=0;he=0}else if(ee<re.times[0]){if(Math.abs(re.times[0]-ee)<.001)return 0;ce[0]=ee,ce.set(re.times,1),le.set(ue.evaluate(ee),0),le.set(re.values,ae),he=0}else if(ee>re.times[re.times.length-1]){if(Math.abs(re.times[re.times.length-1]-ee)<.001)return re.times.length-1;ce[ce.length-1]=ee,ce.set(re.times,0),le.set(re.values,0),le.set(ue.evaluate(ee),re.values.length),he=ce.length-1}else for(let fe=0;fe<re.times.length;fe++){if(Math.abs(re.times[fe]-ee)<.001)return fe;if(re.times[fe]<ee&&re.times[fe+1]>ee){ce.set(re.times.slice(0,fe+1),0),ce[fe+1]=ee,ce.set(re.times.slice(fe+1),fe+2),le.set(re.values.slice(0,(fe+1)*ae),0),le.set(ue.evaluate(ee),(fe+1)*ae),le.set(re.values.slice((fe+1)*ae),(fe+2)*ae),he=fe+1;break}}return re.times=ce,re.values=le,he},mergeMorphTargetTracks:function(re,ee){const ne=[],ae={},ce=re.tracks;for(let le=0;le<ce.length;++le){let ue=ce[le];const he=PropertyBinding.parseTrackName(ue.name),fe=PropertyBinding.findNode(ee,he.nodeName);if(he.propertyName!=="morphTargetInfluences"||he.propertyIndex===void 0){ne.push(ue);continue}if(ue.createInterpolant!==ue.InterpolantFactoryMethodDiscrete&&ue.createInterpolant!==ue.InterpolantFactoryMethodLinear){if(ue.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),ue=ue.clone(),ue.setInterpolation(InterpolateLinear)}const me=fe.morphTargetInfluences.length,ge=fe.morphTargetDictionary[he.propertyIndex];if(ge===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+he.propertyIndex);let ve;if(ae[fe.uuid]===void 0){ve=ue.clone();const be=new ve.ValueBufferType(me*ve.times.length);for(let Ee=0;Ee<ve.times.length;Ee++)be[Ee*me+ge]=ve.values[Ee];ve.name=(he.nodeName||"")+".morphTargetInfluences",ve.values=be,ae[fe.uuid]=ve,ne.push(ve);continue}const ye=ue.createInterpolant(new ue.ValueBufferType(1));ve=ae[fe.uuid];for(let be=0;be<ve.times.length;be++)ve.values[be*me+ge]=ye.evaluate(ve.times[be]);for(let be=0;be<ue.times.length;be++){const Ee=this.insertKeyframe(ve,ue.times[be]);ve.values[Ee*me+ge]=ue.values[be]}}return re.tracks=ne,re}};/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const compatibleObject=re=>re.material!==void 0&&re.userData&&re.userData.variantMaterials&&!!Array.from(re.userData.variantMaterials.values()).filter(ee=>compatibleMaterial(ee.material)),compatibleMaterial=re=>re&&re.isMaterial&&!Array.isArray(re);class GLTFExporterMaterialsVariantsExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(ee){const ne=new Set;for(const ae of ee)ae.traverse(ce=>{if(!compatibleObject(ce))return;const le=ce.userData.variantMaterials,ue=ce.userData.variantData;for(const[he,fe]of ue){const me=le.get(fe.index);me&&compatibleMaterial(me.material)&&ne.add(he)}});ne.forEach(ae=>this.variantNames.push(ae))}writeMesh(ee,ne){if(!compatibleObject(ee))return;const ae=ee.userData,ce=ae.variantMaterials,le=ae.variantData,ue=new Map,he=new Map,fe=Array.from(le.values()).sort((ve,ye)=>ve.index-ye.index);for(const[ve,ye]of fe.entries())he.set(ye.index,ve);for(const ve of le.values()){const ye=ce.get(ve.index);if(!ye||!compatibleMaterial(ye.material))continue;const be=this.writer.processMaterial(ye.material);ue.has(be)||ue.set(be,{material:be,variants:[]}),ue.get(be).variants.push(he.get(ve.index))}const me=Array.from(ue.values()).map(ve=>ve.variants.sort((ye,be)=>ye-be)&&ve).sort((ve,ye)=>ve.material-ye.material);if(me.length===0)return;const ge=compatibleMaterial(ae.originalMaterial)?this.writer.processMaterial(ae.originalMaterial):-1;for(const ve of ne.primitives)ge>=0&&(ve.material=ge),ve.extensions=ve.extensions||{},ve.extensions[this.name]={mappings:me}}afterParse(){if(this.variantNames.length===0)return;const ee=this.writer.json;ee.extensions=ee.extensions||{};const ne=this.variantNames.map(ae=>({name:ae}));ee.extensions[this.name]={variants:ne},this.writer.extensionsUsed[this.name]=!0}}class SessionLightProbe{constructor(ee,ne,ae,ce,le){this.xrLight=ee,this.renderer=ne,this.lightProbe=ae,this.xrWebGLBinding=null,this.estimationStartCallback=le,this.frameCallback=this.onXRFrame.bind(this);const ue=ne.xr.getSession();if(ce&&"XRWebGLBinding"in window){const he=new WebGLCubeRenderTarget(16);ee.environment=he.texture;const fe=ne.getContext();switch(ue.preferredReflectionFormat){case"srgba8":fe.getExtension("EXT_sRGB");break;case"rgba16f":fe.getExtension("OES_texture_half_float");break}this.xrWebGLBinding=new XRWebGLBinding(ue,fe),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}ue.requestAnimationFrame(this.frameCallback)}updateReflection(){const ee=this.renderer.properties.get(this.xrLight.environment);if(ee){const ne=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);ne&&(ee.__webglTexture=ne,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(ee,ne){if(!this.xrLight)return;ne.session.requestAnimationFrame(this.frameCallback);const ce=ne.getLightEstimate(this.lightProbe);if(ce){this.xrLight.lightProbe.sh.fromArray(ce.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const le=Math.max(1,Math.max(ce.primaryLightIntensity.x,Math.max(ce.primaryLightIntensity.y,ce.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(ce.primaryLightIntensity.x/le,ce.primaryLightIntensity.y/le,ce.primaryLightIntensity.z/le),this.xrLight.directionalLight.intensity=le,this.xrLight.directionalLight.position.copy(ce.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class XREstimatedLight extends Group$1{constructor(ee,ne=!0){super(),this.lightProbe=new LightProbe,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new DirectionalLight,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let ae=null,ce=!1;ee.xr.addEventListener("sessionstart",()=>{const le=ee.xr.getSession();"requestLightProbe"in le&&le.requestLightProbe({reflectionFormat:le.preferredReflectionFormat}).then(ue=>{ae=new SessionLightProbe(this,ee,ue,ne,()=>{ce=!0,this.dispatchEvent({type:"estimationstart"})})})}),ee.xr.addEventListener("sessionend",()=>{ae&&(ae.dispose(),ae=null),ce&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{ae&&(ae.dispose(),ae=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SETTLING_TIME=1e4,MIN_DECAY_MILLISECONDS=.001,DECAY_MILLISECONDS=50;class Damper{constructor(ee=DECAY_MILLISECONDS){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(ee)}setDecayTime(ee){this.naturalFrequency=1/Math.max(MIN_DECAY_MILLISECONDS,ee)}update(ee,ne,ae,ce){const le=2e-4*this.naturalFrequency;if(ee==null||ce===0||ee===ne&&this.velocity===0)return ne;if(ae<0)return ee;const ue=ee-ne,he=this.velocity+this.naturalFrequency*ue,fe=ue+ae*he,me=Math.exp(-this.naturalFrequency*ae),ge=(he-this.naturalFrequency*fe)*me,ve=-this.naturalFrequency*(ge+he*me);return Math.abs(ge)<le*Math.abs(ce)&&ve*ue>=0?(this.velocity=0,ne):(this.velocity=ge,ne+fe*me)}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RADIUS=.2,LINE_WIDTH=.03,MAX_OPACITY=.75,SEGMENTS=12,DELTA_PHI=Math.PI/(2*SEGMENTS),vector2$1=new Vector2,addCorner=(re,ee,ne)=>{let ae=ee>0?ne>0?0:-Math.PI/2:ne>0?Math.PI/2:Math.PI;for(let ce=0;ce<=SEGMENTS;++ce)re.push(ee+(RADIUS-LINE_WIDTH)*Math.cos(ae),ne+(RADIUS-LINE_WIDTH)*Math.sin(ae),0,ee+RADIUS*Math.cos(ae),ne+RADIUS*Math.sin(ae),0),ae+=DELTA_PHI};class PlacementBox extends Mesh{constructor(ee,ne){const ae=new BufferGeometry,ce=[],le=[],{size:ue,boundingBox:he}=ee,fe=ue.x/2,me=(ne==="back"?ue.y:ue.z)/2;addCorner(le,fe,me),addCorner(le,-fe,me),addCorner(le,-fe,-me),addCorner(le,fe,-me);const ge=le.length/3;for(let be=0;be<ge-2;be+=2)ce.push(be,be+1,be+3,be,be+3,be+2);const ve=ge-2;ce.push(ve,ve+1,1,ve,1,0),ae.setAttribute("position",new Float32BufferAttribute(le,3)),ae.setIndex(ce),super(ae),this.side=ne;const ye=this.material;switch(ye.side=DoubleSide,ye.transparent=!0,ye.opacity=0,this.goalOpacity=0,this.opacityDamper=new Damper,this.hitPlane=new Mesh(new PlaneGeometry(2*(fe+RADIUS),2*(me+RADIUS))),this.hitPlane.visible=!1,this.hitPlane.material.side=DoubleSide,this.add(this.hitPlane),he.getCenter(this.position),ne){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=he.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=he.min.z,this.position.z=this.shadowHeight}ee.target.add(this),this.offsetHeight=0}getHit(ee,ne,ae){vector2$1.set(ne,-ae),this.hitPlane.visible=!0;const ce=ee.positionAndNormalFromPoint(vector2$1,this.hitPlane);return this.hitPlane.visible=!1,ce==null?null:ce.position}getExpandedHit(ee,ne,ae){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const ce=this.getHit(ee,ne,ae);return this.hitPlane.scale.set(1,1,1),ce}set offsetHeight(ee){ee-=.001,this.side==="back"?this.position.z=this.shadowHeight+ee:this.position.y=this.shadowHeight+ee}get offsetHeight(){return this.side==="back"?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(ee){this.goalOpacity=ee?MAX_OPACITY:0}updateOpacity(ee){const ne=this.material;ne.opacity=this.opacityDamper.update(ne.opacity,this.goalOpacity,ee,1),this.visible=ne.opacity>0}dispose(){var ee;const{geometry:ne,material:ae}=this.hitPlane;ne.dispose(),ae.dispose(),this.geometry.dispose(),this.material.dispose(),(ee=this.parent)===null||ee===void 0||ee.remove(this)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const numberNode=(re,ee)=>({type:"number",number:re,unit:ee}),parseExpressions=(()=>{const re={};return ne=>{const ae=ne;if(ae in re)return re[ae];const ce=[];let le=0;for(;ne;){if(++le>1e3){ne="";break}const ue=parseExpression(ne),he=ue.nodes[0];if(he==null||he.terms.length===0)break;ce.push(he),ne=ue.remainingInput}return re[ae]=ce}})(),parseExpression=(()=>{const re=/^(\-\-|[a-z\u0240-\uffff])/i,ee=/^([\*\+\/]|[\-]\s)/i,ne=/^[\),]/,ae="(",ce="#";return le=>{const ue=[];for(;le.length&&(le=le.trim(),!ne.test(le));)if(le[0]===ae){const{nodes:he,remainingInput:fe}=parseFunctionArguments(le);le=fe,ue.push({type:"function",name:{type:"ident",value:"calc"},arguments:he})}else if(re.test(le)){const he=parseIdent(le),fe=he.nodes[0];if(le=he.remainingInput,le[0]===ae){const{nodes:me,remainingInput:ge}=parseFunctionArguments(le);ue.push({type:"function",name:fe,arguments:me}),le=ge}else ue.push(fe)}else if(ee.test(le))ue.push({type:"operator",value:le[0]}),le=le.slice(1);else{const{nodes:he,remainingInput:fe}=le[0]===ce?parseHex(le):parseNumber(le);if(he.length===0)break;ue.push(he[0]),le=fe}return{nodes:[{type:"expression",terms:ue}],remainingInput:le}}})(),parseIdent=(()=>{const re=/[^a-z0-9_\-\u0240-\uffff]/i;return ee=>{const ne=ee.match(re),ae=ne==null?ee:ee.substr(0,ne.index),ce=ne==null?"":ee.substr(ne.index);return{nodes:[{type:"ident",value:ae}],remainingInput:ce}}})(),parseNumber=(()=>{const re=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,ee=/^[a-z%]+/i,ne=/^(m|mm|cm|rad|deg|[%])$/;return ae=>{const ce=ae.match(re),le=ce==null?"0":ce[0];ae=le==null?ae:ae.slice(le.length);const ue=ae.match(ee);let he=ue!=null&&ue[0]!==""?ue[0]:null;const fe=ue==null?ae:ae.slice(he.length);return he!=null&&!ne.test(he)&&(he=null),{nodes:[{type:"number",number:parseFloat(le)||0,unit:he}],remainingInput:fe}}})(),parseHex=(()=>{const re=/^[a-f0-9]*/i;return ee=>{ee=ee.slice(1).trim();const ne=ee.match(re);return{nodes:ne==null?[]:[{type:"hex",value:ne[0]}],remainingInput:ne==null?ee:ee.slice(ne[0].length)}}})(),parseFunctionArguments=re=>{const ee=[];for(re=re.slice(1).trim();re.length;){const ne=parseExpression(re);if(ee.push(ne.nodes[0]),re=ne.remainingInput.trim(),re[0]===",")re=re.slice(1).trim();else if(re[0]===")"){re=re.slice(1);break}}return{nodes:ee,remainingInput:re}},$visitedTypes=Symbol("visitedTypes");class ASTWalker{constructor(ee){this[$visitedTypes]=ee}walk(ee,ne){const ae=ee.slice();for(;ae.length;){const ce=ae.shift();switch(this[$visitedTypes].indexOf(ce.type)>-1&&ne(ce),ce.type){case"expression":ae.unshift(...ce.terms);break;case"function":ae.unshift(ce.name,...ce.arguments);break}}}}const ZERO=Object.freeze({type:"number",number:0,unit:null});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const degreesToRadians=(re,ee=0)=>{let{number:ne,unit:ae}=re;if(!isFinite(ne))ne=ee,ae="rad";else if(re.unit==="rad"||re.unit==null)return re;return{type:"number",number:(ae==="deg"&&ne!=null?ne:0)*Math.PI/180,unit:"rad"}},lengthToBaseMeters=(re,ee=0)=>{let{number:ne,unit:ae}=re;if(!isFinite(ne))ne=ee,ae="m";else if(re.unit==="m")return re;let ce;switch(ae){default:ce=1;break;case"cm":ce=1/100;break;case"mm":ce=1/1e3;break}return{type:"number",number:ce*ne,unit:"m"}},normalizeUnit=(()=>{const re=ne=>ne,ee={rad:re,deg:degreesToRadians,m:re,mm:lengthToBaseMeters,cm:lengthToBaseMeters};return(ne,ae=ZERO)=>{isFinite(ne.number)||(ne.number=ae.number,ne.unit=ae.unit);const{unit:ce}=ne;if(ce==null)return ne;const le=ee[ce];return le==null?ae:le(ne)}})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$7,_b$6,_c$4;const $evaluate=Symbol("evaluate"),$lastValue=Symbol("lastValue");class Evaluator{constructor(){this[_a$7]=null}static evaluatableFor(ee,ne=ZERO){if(ee instanceof Evaluator)return ee;if(ee.type==="number")return ee.unit==="%"?new PercentageEvaluator(ee,ne):ee;switch(ee.name.value){case"calc":return new CalcEvaluator(ee,ne);case"env":return new EnvEvaluator(ee)}return ZERO}static evaluate(ee){return ee instanceof Evaluator?ee.evaluate():ee}static isConstant(ee){return ee instanceof Evaluator?ee.isConstant:!0}static applyIntrinsics(ee,ne){const{basis:ae,keywords:ce}=ne,{auto:le}=ce;return ae.map((ue,he)=>{const fe=le[he]==null?ue:le[he];let me=ee[he]?ee[he]:fe;if(me.type==="ident"){const ge=me.value;ge in ce&&(me=ce[ge][he])}return(me==null||me.type==="ident")&&(me=fe),me.unit==="%"?numberNode(me.number/100*ue.number,ue.unit):(me=normalizeUnit(me,ue),me.unit!==ue.unit?ue:me)})}get isConstant(){return!1}evaluate(){return(!this.isConstant||this[$lastValue]==null)&&(this[$lastValue]=this[$evaluate]()),this[$lastValue]}}_a$7=$lastValue;const $percentage=Symbol("percentage"),$basis=Symbol("basis");class PercentageEvaluator extends Evaluator{constructor(ee,ne){super(),this[$percentage]=ee,this[$basis]=ne}get isConstant(){return!0}[$evaluate](){return numberNode(this[$percentage].number/100*this[$basis].number,this[$basis].unit)}}const $identNode=Symbol("identNode");class EnvEvaluator extends Evaluator{constructor(ee){super(),this[_b$6]=null;const ne=ee.arguments.length?ee.arguments[0].terms[0]:null;ne!=null&&ne.type==="ident"&&(this[$identNode]=ne)}get isConstant(){return!1}[(_b$6=$identNode,$evaluate)](){if(this[$identNode]!=null)switch(this[$identNode].value){case"window-scroll-y":const ee=window.pageYOffset,ne=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);return{type:"number",number:ee/(ne-window.innerHeight)||0,unit:null}}return ZERO}}const IS_MULTIPLICATION_RE=/[\*\/]/,$evaluator=Symbol("evaluator");class CalcEvaluator extends Evaluator{constructor(ee,ne=ZERO){if(super(),this[_c$4]=null,ee.arguments.length!==1)return;const ae=ee.arguments[0].terms.slice(),ce=[];for(;ae.length;){const le=ae.shift();if(ce.length>0){const ue=ce[ce.length-1];if(ue.type==="operator"&&IS_MULTIPLICATION_RE.test(ue.value)){const he=ce.pop(),fe=ce.pop();if(fe==null)return;ce.push(new OperatorEvaluator(he,Evaluator.evaluatableFor(fe,ne),Evaluator.evaluatableFor(le,ne)));continue}}ce.push(le.type==="operator"?le:Evaluator.evaluatableFor(le,ne))}for(;ce.length>2;){const[le,ue,he]=ce.splice(0,3);if(ue.type!=="operator")return;ce.unshift(new OperatorEvaluator(ue,Evaluator.evaluatableFor(le,ne),Evaluator.evaluatableFor(he,ne)))}ce.length===1&&(this[$evaluator]=ce[0])}get isConstant(){return this[$evaluator]==null||Evaluator.isConstant(this[$evaluator])}[(_c$4=$evaluator,$evaluate)](){return this[$evaluator]!=null?Evaluator.evaluate(this[$evaluator]):ZERO}}const $operator=Symbol("operator"),$left=Symbol("left"),$right=Symbol("right");class OperatorEvaluator extends Evaluator{constructor(ee,ne,ae){super(),this[$operator]=ee,this[$left]=ne,this[$right]=ae}get isConstant(){return Evaluator.isConstant(this[$left])&&Evaluator.isConstant(this[$right])}[$evaluate](){const ee=normalizeUnit(Evaluator.evaluate(this[$left])),ne=normalizeUnit(Evaluator.evaluate(this[$right])),{number:ae,unit:ce}=ee,{number:le,unit:ue}=ne;if(ue!=null&&ce!=null&&ue!=ce)return ZERO;const he=ce||ue;let fe;switch(this[$operator].value){case"+":fe=ae+le;break;case"-":fe=ae-le;break;case"/":fe=ae/le;break;case"*":fe=ae*le;break;default:return ZERO}return{type:"number",number:fe,unit:he}}}const $evaluatables=Symbol("evaluatables"),$intrinsics=Symbol("intrinsics");class StyleEvaluator extends Evaluator{constructor(ee,ne){super(),this[$intrinsics]=ne;const ae=ee[0],ce=ae!=null?ae.terms:[];this[$evaluatables]=ne.basis.map((le,ue)=>{const he=ce[ue];return he==null?{type:"ident",value:"auto"}:he.type==="ident"?he:Evaluator.evaluatableFor(he,le)})}get isConstant(){for(const ee of this[$evaluatables])if(!Evaluator.isConstant(ee))return!1;return!0}[$evaluate](){const ee=this[$evaluatables].map(ne=>Evaluator.evaluate(ne));return Evaluator.applyIntrinsics(ee,this[$intrinsics]).map(ne=>ne.number)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$6,_b$5,_c$3,_d$2;const $instances=Symbol("instances"),$activateListener=Symbol("activateListener"),$deactivateListener=Symbol("deactivateListener"),$notifyInstances=Symbol("notifyInstances"),$notify=Symbol("notify"),$scrollCallback=Symbol("callback");class ScrollObserver{constructor(ee){this[$scrollCallback]=ee}static[$notifyInstances](){for(const ee of ScrollObserver[$instances])ee[$notify]()}static[(_a$6=$instances,$activateListener)](){window.addEventListener("scroll",this[$notifyInstances],{passive:!0})}static[$deactivateListener](){window.removeEventListener("scroll",this[$notifyInstances])}observe(){ScrollObserver[$instances].size===0&&ScrollObserver[$activateListener](),ScrollObserver[$instances].add(this)}disconnect(){ScrollObserver[$instances].delete(this),ScrollObserver[$instances].size===0&&ScrollObserver[$deactivateListener]()}[$notify](){this[$scrollCallback]()}}ScrollObserver[_a$6]=new Set;const $computeStyleCallback=Symbol("computeStyleCallback"),$astWalker=Symbol("astWalker"),$dependencies=Symbol("dependencies"),$onScroll=Symbol("onScroll");class StyleEffector{constructor(ee){this[_b$5]={},this[_c$3]=new ASTWalker(["function"]),this[_d$2]=()=>{this[$computeStyleCallback]({relatedState:"window-scroll"})},this[$computeStyleCallback]=ee}observeEffectsFor(ee){const ne={},ae=this[$dependencies];this[$astWalker].walk(ee,ce=>{const{name:le}=ce,he=ce.arguments[0].terms[0];if(!(le.value!=="env"||he==null||he.type!=="ident"))switch(he.value){case"window-scroll-y":if(ne["window-scroll"]==null){const fe="window-scroll"in ae?ae["window-scroll"]:new ScrollObserver(this[$onScroll]);fe.observe(),delete ae["window-scroll"],ne["window-scroll"]=fe}break}});for(const ce in ae)ae[ce].disconnect();this[$dependencies]=ne}dispose(){for(const ee in this[$dependencies])this[$dependencies][ee].disconnect()}}_b$5=$dependencies,_c$3=$astWalker,_d$2=$onScroll;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const style$3=re=>{const ee=re.observeEffects||!1,ne=re.intrinsics instanceof Function?re.intrinsics:()=>re.intrinsics;return(ae,ce)=>{const le=ae.updated,ue=ae.connectedCallback,he=ae.disconnectedCallback,fe=Symbol(`${ce}StyleEffector`),me=Symbol(`${ce}StyleEvaluator`),ge=Symbol(`${ce}UpdateEvaluator`),ve=Symbol(`${ce}EvaluateAndSync`);Object.defineProperties(ae,{[fe]:{value:null,writable:!0},[me]:{value:null,writable:!0},[ge]:{value:function(){const ye=parseExpressions(this[ce]);this[me]=new StyleEvaluator(ye,ne(this)),this[fe]==null&&ee&&(this[fe]=new StyleEffector(()=>this[ve]())),this[fe]!=null&&this[fe].observeEffectsFor(ye)}},[ve]:{value:function(){if(this[me]==null)return;const ye=this[me].evaluate();this[re.updateHandler](ye)}},updated:{value:function(ye){ye.has(ce)&&(this[ge](),this[ve]()),le.call(this,ye)}},connectedCallback:{value:function(){ue.call(this),this.requestUpdate(ce,this[ce])}},disconnectedCallback:{value:function(){he.call(this),this[fe]!=null&&(this[fe].dispose(),this[fe]=null)}}})}};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const easeInOutQuad=re=>re<.5?2*re*re:-1+(4-2*re)*re,interpolate=(re,ee,ne=easeInOutQuad)=>ae=>re+(ee-re)*ne(ae),sequence=(re,ee)=>{const ne=ce=>le=>ce+=le,ae=ee.map(ne(0));return ce=>{ce=clamp$2(ce,0,1),ce*=ae[ae.length-1];const le=ae.findIndex(fe=>fe>=ce),ue=le<1?0:ae[le-1],he=ae[le];return re[le]((ce-ue)/(he-ue))}},timeline=re=>{const ee=[],ne=[];let ae=re.initialValue;for(let ce=0;ce<re.keyframes.length;++ce){const le=re.keyframes[ce],{value:ue,frames:he}=le,fe=le.ease||easeInOutQuad,me=interpolate(ae,ue,fe);ee.push(me),ne.push(he),ae=ue}return sequence(ee,ne)};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$6=globalThis&&globalThis.__decorate||function(re,ee,ne,ae){var ce=arguments.length,le=ce<3?ee:ae===null?ae=Object.getOwnPropertyDescriptor(ee,ne):ae,ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")le=Reflect.decorate(re,ee,ne,ae);else for(var he=re.length-1;he>=0;he--)(ue=re[he])&&(le=(ce<3?ue(le):ce>3?ue(ee,ne,le):ue(ee,ne))||le);return ce>3&&le&&Object.defineProperty(ee,ne,le),le};const PROMPT_ANIMATION_TIME=5e3,wiggle=timeline({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),fade=timeline({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),DEFAULT_FOV_DEG=30,DEFAULT_MIN_FOV_DEG=12,DEFAULT_CAMERA_ORBIT="0deg 75deg 105%",DEFAULT_CAMERA_TARGET="auto auto auto",DEFAULT_FIELD_OF_VIEW="auto",MINIMUM_RADIUS_RATIO=2.2,AZIMUTHAL_QUADRANT_LABELS=["front","right","back","left"],POLAR_TRIENT_LABELS=["upper-","","lower-"],DEFAULT_INTERACTION_PROMPT_THRESHOLD=3e3,INTERACTION_PROMPT=". Use mouse, touch or arrow keys to move.",InteractionPromptStrategy={AUTO:"auto",NONE:"none"},InteractionPromptStyle={BASIC:"basic",WIGGLE:"wiggle"},TouchAction={PAN_Y:"pan-y",PAN_X:"pan-x",NONE:"none"},fieldOfViewIntrinsics=()=>({basis:[degreesToRadians(numberNode(DEFAULT_FOV_DEG,"deg"))],keywords:{auto:[null]}}),minFieldOfViewIntrinsics=()=>({basis:[degreesToRadians(numberNode(DEFAULT_MIN_FOV_DEG,"deg"))],keywords:{auto:[null]}}),cameraOrbitIntrinsics=(()=>{const re=parseExpressions(DEFAULT_CAMERA_ORBIT)[0].terms,ee=normalizeUnit(re[0]),ne=normalizeUnit(re[1]);return ae=>{const ce=ae[$scene].idealCameraDistance();return{basis:[ee,ne,numberNode(ce,"m")],keywords:{auto:[null,null,numberNode(105,"%")]}}}})(),minCameraOrbitIntrinsics=re=>{const ee=MINIMUM_RADIUS_RATIO*re[$scene].boundingSphere.radius;return{basis:[numberNode(-1/0,"rad"),numberNode(Math.PI/8,"rad"),numberNode(ee,"m")],keywords:{auto:[null,null,null]}}},maxCameraOrbitIntrinsics=re=>{const ee=cameraOrbitIntrinsics(re),ae=new StyleEvaluator([],ee).evaluate()[2];return{basis:[numberNode(1/0,"rad"),numberNode(Math.PI-Math.PI/8,"rad"),numberNode(ae,"m")],keywords:{auto:[null,null,null]}}},cameraTargetIntrinsics=re=>{const ee=re[$scene].boundingBox.getCenter(new Vector3);return{basis:[numberNode(ee.x,"m"),numberNode(ee.y,"m"),numberNode(ee.z,"m")],keywords:{auto:[null,null,null]}}},HALF_PI=Math.PI/2,THIRD_PI=Math.PI/3,QUARTER_PI=HALF_PI/2,TAU=2*Math.PI,$controls=Symbol("controls"),$panElement=Symbol("panElement"),$promptElement=Symbol("promptElement"),$promptAnimatedContainer=Symbol("promptAnimatedContainer"),$fingerAnimatedContainers=Symbol("fingerAnimatedContainers"),$deferInteractionPrompt=Symbol("deferInteractionPrompt"),$updateAria=Symbol("updateAria"),$updateCameraForRadius=Symbol("updateCameraForRadius"),$cancelPrompts=Symbol("cancelPrompts"),$onChange=Symbol("onChange"),$onPointerChange=Symbol("onPointerChange"),$waitingToPromptUser=Symbol("waitingToPromptUser"),$userHasInteracted=Symbol("userHasInteracted"),$promptElementVisibleTime=Symbol("promptElementVisibleTime"),$lastPromptOffset=Symbol("lastPromptOffset"),$cancellationSource=Symbol("cancellationSource"),$lastSpherical=Symbol("lastSpherical"),$jumpCamera=Symbol("jumpCamera"),$initialized=Symbol("initialized"),$maintainThetaPhi=Symbol("maintainThetaPhi"),$syncCameraOrbit=Symbol("syncCameraOrbit"),$syncFieldOfView=Symbol("syncFieldOfView"),$syncCameraTarget=Symbol("syncCameraTarget"),$syncMinCameraOrbit=Symbol("syncMinCameraOrbit"),$syncMaxCameraOrbit=Symbol("syncMaxCameraOrbit"),$syncMinFieldOfView=Symbol("syncMinFieldOfView"),$syncMaxFieldOfView=Symbol("syncMaxFieldOfView"),ControlsMixin=re=>{var ee,ne,ae,ce,le,ue,he,fe,me,ge,ve,ye,be,Ee,Ce,Se,Te;class ke extends re{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=DEFAULT_CAMERA_ORBIT,this.cameraTarget=DEFAULT_CAMERA_TARGET,this.fieldOfView=DEFAULT_FIELD_OF_VIEW,this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=DEFAULT_INTERACTION_PROMPT_THRESHOLD,this.interactionPrompt=InteractionPromptStrategy.AUTO,this.interactionPromptStyle=InteractionPromptStyle.WIGGLE,this.orbitSensitivity=1,this.touchAction=TouchAction.NONE,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=DECAY_MILLISECONDS,this[ee]=this.shadowRoot.querySelector(".interaction-prompt"),this[ne]=this.shadowRoot.querySelector("#prompt"),this[ae]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[ce]=this.shadowRoot.querySelector(".pan-target"),this[le]=0,this[ue]=1/0,this[he]=!1,this[fe]=!1,this[me]=ChangeSource.AUTOMATIC,this[ge]=new SmoothControls(this[$scene].camera,this[$userInputElement],this[$scene]),this[ve]=new Spherical,this[ye]=!1,this[be]=!1,this[Ee]=!1,this[Ce]=()=>{const Fe=this[$controls].changeSource;this[$cancellationSource]=Fe,Fe===ChangeSource.USER_INTERACTION&&(this[$userHasInteracted]=!0,this[$deferInteractionPrompt]())},this[Se]=()=>{this[$updateAria](),this[$needsRender]();const Fe=this[$controls].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:Fe}}))},this[Te]=Fe=>{Fe.type==="pointer-change-start"?this[$container].classList.add("pointer-tumbling"):this[$container].classList.remove("pointer-tumbling")}}get inputSensitivity(){return this[$controls].inputSensitivity}set inputSensitivity(Fe){this[$controls].inputSensitivity=Fe}getCameraOrbit(){const{theta:Fe,phi:De,radius:Oe}=this[$lastSpherical];return{theta:Fe,phi:De,radius:Oe,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return toVector3D(this[$renderer].isPresenting?this[$renderer].arRenderer.target:this[$scene].getTarget())}getFieldOfView(){return this[$controls].getFieldOfView()}getMinimumFieldOfView(){return this[$controls].options.minimumFieldOfView}getMaximumFieldOfView(){return this[$controls].options.maximumFieldOfView}getIdealAspect(){return this[$scene].idealAspect}jumpCameraToGoal(){this[$jumpCamera]=!0,this.requestUpdate($jumpCamera,!1)}resetInteractionPrompt(){this[$lastPromptOffset]=0,this[$promptElementVisibleTime]=1/0,this[$userHasInteracted]=!1,this[$waitingToPromptUser]=this.interactionPrompt===InteractionPromptStrategy.AUTO&&this.cameraControls}zoom(Fe){const De=new WheelEvent("wheel",{deltaY:-30*Fe});this[$userInputElement].dispatchEvent(De)}connectedCallback(){super.connectedCallback(),this[$controls].addEventListener("user-interaction",this[$cancelPrompts]),this[$controls].addEventListener("pointer-change-start",this[$onPointerChange]),this[$controls].addEventListener("pointer-change-end",this[$onPointerChange])}disconnectedCallback(){super.disconnectedCallback(),this[$controls].removeEventListener("user-interaction",this[$cancelPrompts]),this[$controls].removeEventListener("pointer-change-start",this[$onPointerChange]),this[$controls].removeEventListener("pointer-change-end",this[$onPointerChange])}updated(Fe){super.updated(Fe);const De=this[$controls],Oe=this[$scene];if(Fe.has("cameraControls")&&(this.cameraControls?(De.enableInteraction(),this.interactionPrompt===InteractionPromptStrategy.AUTO&&(this[$waitingToPromptUser]=!0)):(De.disableInteraction(),this[$deferInteractionPrompt]()),this[$userInputElement].setAttribute("aria-label",this[$ariaLabel])),Fe.has("disableZoom")&&(De.disableZoom=this.disableZoom),Fe.has("disablePan")&&(De.enablePan=!this.disablePan),Fe.has("disableTap")&&(De.enableTap=!this.disableTap),(Fe.has("interactionPrompt")||Fe.has("cameraControls")||Fe.has("src"))&&(this.interactionPrompt===InteractionPromptStrategy.AUTO&&this.cameraControls&&!this[$userHasInteracted]?this[$waitingToPromptUser]=!0:this[$deferInteractionPrompt]()),Fe.has("interactionPromptStyle")&&(this[$promptAnimatedContainer].style.opacity=this.interactionPromptStyle==InteractionPromptStyle.BASIC?"1":"0"),Fe.has("touchAction")){const Re=this.touchAction;De.applyOptions({touchAction:Re}),De.updateTouchActionStyle()}Fe.has("orbitSensitivity")&&(De.orbitSensitivity=this.orbitSensitivity),Fe.has("interpolationDecay")&&(De.setDamperDecayTime(this.interpolationDecay),Oe.setTargetDamperDecayTime(this.interpolationDecay)),this[$jumpCamera]===!0&&Promise.resolve().then(()=>{De.jumpToGoal(),Oe.jumpToGoal(),this[$onChange](),this[$jumpCamera]=!1})}async updateFraming(){const Fe=this[$scene],De=Fe.adjustedFoV(Fe.framedFoVDeg);await Fe.updateFraming();const Oe=Fe.adjustedFoV(Fe.framedFoVDeg),Re=this[$controls].getFieldOfView()/De;this[$controls].setFieldOfView(Oe*Re),this[$maintainThetaPhi]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(Fe,De,Oe){const Re=this[$userInputElement],Be=this[$fingerAnimatedContainers];if(Be[0].style.opacity==="1"){console.warn("interact() failed because an existing interaction is running.");return}const Le=new Array;Le.push({x:timeline(De.x),y:timeline(De.y)});const je=[{x:Le[0].x(0),y:Le[0].y(0)}];Oe!=null&&(Le.push({x:timeline(Oe.x),y:timeline(Oe.y)}),je.push({x:Le[1].x(0),y:Le[1].y(0)}));let Ge=performance.now();const{width:qe,height:Ue}=this[$scene],ze=Xe=>{for(const[We,Ze]of je.entries()){const{style:Vt}=Be[We];Vt.transform=`translateX(${qe*Ze.x}px) translateY(${Ue*Ze.y}px)`,Xe==="pointerdown"?Vt.opacity="1":Xe==="pointerup"&&(Vt.opacity="0");const Qt={pointerId:We-5678,pointerType:"touch",target:Re,clientX:qe*Ze.x,clientY:Ue*Ze.y,altKey:!0};Re.dispatchEvent(new PointerEvent(Xe,Qt))}},He=()=>{const Xe=this[$cancellationSource];if(Xe!==ChangeSource.AUTOMATIC||!Re.isConnected){for(const Ze of this[$fingerAnimatedContainers])Ze.style.opacity="0";ze("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:Xe}})),document.removeEventListener("visibilitychange",Ye);return}const We=Math.min(1,(performance.now()-Ge)/Fe);for(const[Ze,Vt]of je.entries())Vt.x=Le[Ze].x(We),Vt.y=Le[Ze].y(We);ze("pointermove"),We<1?requestAnimationFrame(He):(ze("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:ChangeSource.AUTOMATIC}})),document.removeEventListener("visibilitychange",Ye))},Ye=()=>{let Xe=0;document.visibilityState==="hidden"?Xe=performance.now()-Ge:Ge=performance.now()-Xe};document.addEventListener("visibilitychange",Ye),ze("pointerdown"),this[$cancellationSource]=ChangeSource.AUTOMATIC,requestAnimationFrame(He)}[(ee=$promptElement,ne=$promptAnimatedContainer,ae=$fingerAnimatedContainers,ce=$panElement,le=$lastPromptOffset,ue=$promptElementVisibleTime,he=$userHasInteracted,fe=$waitingToPromptUser,me=$cancellationSource,ge=$controls,ve=$lastSpherical,ye=$jumpCamera,be=$initialized,Ee=$maintainThetaPhi,$syncFieldOfView)](Fe){const De=this[$controls],Oe=this[$scene];Oe.framedFoVDeg=Fe[0]*180/Math.PI,De.changeSource=ChangeSource.NONE,De.setFieldOfView(Oe.adjustedFoV(Oe.framedFoVDeg)),this[$cancelPrompts]()}[$syncCameraOrbit](Fe){const De=this[$controls];if(this[$maintainThetaPhi]){const{theta:Oe,phi:Re}=this.getCameraOrbit();Fe[0]=Oe,Fe[1]=Re,this[$maintainThetaPhi]=!1}De.changeSource=ChangeSource.NONE,De.setOrbit(Fe[0],Fe[1],Fe[2]),this[$cancelPrompts]()}[$syncMinCameraOrbit](Fe){this[$controls].applyOptions({minimumAzimuthalAngle:Fe[0],minimumPolarAngle:Fe[1],minimumRadius:Fe[2]}),this.jumpCameraToGoal()}[$syncMaxCameraOrbit](Fe){this[$controls].applyOptions({maximumAzimuthalAngle:Fe[0],maximumPolarAngle:Fe[1],maximumRadius:Fe[2]}),this[$updateCameraForRadius](Fe[2]),this.jumpCameraToGoal()}[$syncMinFieldOfView](Fe){this[$controls].applyOptions({minimumFieldOfView:Fe[0]*180/Math.PI}),this.jumpCameraToGoal()}[$syncMaxFieldOfView](Fe){const De=this[$scene].adjustedFoV(Fe[0]*180/Math.PI);this[$controls].applyOptions({maximumFieldOfView:De}),this.jumpCameraToGoal()}[$syncCameraTarget](Fe){const[De,Oe,Re]=Fe;this[$renderer].arRenderer.isPresenting||this[$scene].setTarget(De,Oe,Re),this[$controls].changeSource=ChangeSource.NONE,this[$renderer].arRenderer.updateTarget(),this[$cancelPrompts]()}[$tick](Fe,De){if(super[$tick](Fe,De),this[$renderer].isPresenting||!this[$getModelIsVisible]())return;const Oe=this[$controls],Re=this[$scene],Be=performance.now();if(this[$waitingToPromptUser]&&this.loaded&&Be>this[$loadedTime]+this.interactionPromptThreshold&&(this[$waitingToPromptUser]=!1,this[$promptElementVisibleTime]=Be,this[$promptElement].classList.add("visible")),isFinite(this[$promptElementVisibleTime])&&this.interactionPromptStyle===InteractionPromptStyle.WIGGLE){const Ge=(Be-this[$promptElementVisibleTime])/PROMPT_ANIMATION_TIME%1,qe=wiggle(Ge),Ue=fade(Ge);if(this[$promptAnimatedContainer].style.opacity=`${Ue}`,qe!==this[$lastPromptOffset]){const ze=qe*Re.width*.05,He=(qe-this[$lastPromptOffset])*Math.PI/16;this[$promptAnimatedContainer].style.transform=`translateX(${ze}px)`,Oe.changeSource=ChangeSource.AUTOMATIC,Oe.adjustOrbit(He,0,0),this[$lastPromptOffset]=qe}}const Le=Oe.update(Fe,De),je=Re.updateTarget(De);(Le||je)&&this[$onChange]()}[$deferInteractionPrompt](){this[$waitingToPromptUser]=!1,this[$promptElement].classList.remove("visible"),this[$promptElementVisibleTime]=1/0}[$updateCameraForRadius](Fe){const De=Math.max(this[$scene].boundingSphere.radius,Fe),Oe=0,Re=2*De;this[$controls].updateNearFar(Oe,Re)}[$updateAria](){const{theta:Fe,phi:De}=this[$controls].getCameraSpherical(this[$lastSpherical]),Oe=(4+Math.floor((Fe%TAU+QUARTER_PI)/HALF_PI))%4,Re=Math.floor(De/THIRD_PI),Be=AZIMUTHAL_QUADRANT_LABELS[Oe],Le=POLAR_TRIENT_LABELS[Re];this[$updateStatus](`View from stage ${Le}${Be}`)}get[$ariaLabel](){return super[$ariaLabel]+(this.cameraControls?INTERACTION_PROMPT:"")}async[$onResize](Fe){const De=this[$controls],Oe=this[$scene],Re=Oe.adjustedFoV(Oe.framedFoVDeg);super[$onResize](Fe);const Be=Oe.adjustedFoV(Oe.framedFoVDeg)/Re,Le=De.getFieldOfView()*(isFinite(Be)?Be:1);De.updateAspect(this[$scene].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[$controls].setFieldOfView(Le),this.jumpCameraToGoal()}[$onModelLoad](){super[$onModelLoad](),this[$initialized]?this[$maintainThetaPhi]=!0:this[$initialized]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}}return Ce=$cancelPrompts,Se=$onChange,Te=$onPointerChange,__decorate$6([e$4({type:Boolean,attribute:"camera-controls"})],ke.prototype,"cameraControls",void 0),__decorate$6([style$3({intrinsics:cameraOrbitIntrinsics,observeEffects:!0,updateHandler:$syncCameraOrbit}),e$4({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],ke.prototype,"cameraOrbit",void 0),__decorate$6([style$3({intrinsics:cameraTargetIntrinsics,observeEffects:!0,updateHandler:$syncCameraTarget}),e$4({type:String,attribute:"camera-target",hasChanged:()=>!0})],ke.prototype,"cameraTarget",void 0),__decorate$6([style$3({intrinsics:fieldOfViewIntrinsics,observeEffects:!0,updateHandler:$syncFieldOfView}),e$4({type:String,attribute:"field-of-view",hasChanged:()=>!0})],ke.prototype,"fieldOfView",void 0),__decorate$6([style$3({intrinsics:minCameraOrbitIntrinsics,updateHandler:$syncMinCameraOrbit}),e$4({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],ke.prototype,"minCameraOrbit",void 0),__decorate$6([style$3({intrinsics:maxCameraOrbitIntrinsics,updateHandler:$syncMaxCameraOrbit}),e$4({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],ke.prototype,"maxCameraOrbit",void 0),__decorate$6([style$3({intrinsics:minFieldOfViewIntrinsics,updateHandler:$syncMinFieldOfView}),e$4({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],ke.prototype,"minFieldOfView",void 0),__decorate$6([style$3({intrinsics:fieldOfViewIntrinsics,updateHandler:$syncMaxFieldOfView}),e$4({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],ke.prototype,"maxFieldOfView",void 0),__decorate$6([e$4({type:Number,attribute:"interaction-prompt-threshold"})],ke.prototype,"interactionPromptThreshold",void 0),__decorate$6([e$4({type:String,attribute:"interaction-prompt"})],ke.prototype,"interactionPrompt",void 0),__decorate$6([e$4({type:String,attribute:"interaction-prompt-style"})],ke.prototype,"interactionPromptStyle",void 0),__decorate$6([e$4({type:Number,attribute:"orbit-sensitivity"})],ke.prototype,"orbitSensitivity",void 0),__decorate$6([e$4({type:String,attribute:"touch-action"})],ke.prototype,"touchAction",void 0),__decorate$6([e$4({type:Boolean,attribute:"disable-zoom"})],ke.prototype,"disableZoom",void 0),__decorate$6([e$4({type:Boolean,attribute:"disable-pan"})],ke.prototype,"disablePan",void 0),__decorate$6([e$4({type:Boolean,attribute:"disable-tap"})],ke.prototype,"disableTap",void 0),__decorate$6([e$4({type:Number,attribute:"interpolation-decay"})],ke.prototype,"interpolationDecay",void 0),ke};/* @license
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PAN_SENSITIVITY=.018,TAP_DISTANCE=2,TAP_MS=300,vector2=new Vector2,vector3$2=new Vector3,DEFAULT_OPTIONS$k=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),KEYBOARD_ORBIT_INCREMENT=Math.PI/8,ZOOM_SENSITIVITY=.04,PAN_KEY_INCREMENT=10,ChangeSource={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class SmoothControls extends EventDispatcher{constructor(ee,ne,ae){super(),this.camera=ee,this.element=ne,this.scene=ae,this.orbitSensitivity=1,this.inputSensitivity=1,this.changeSource=ChangeSource.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new Matrix3,this.panPerPixel=0,this.spherical=new Spherical,this.goalSpherical=new Spherical,this.thetaDamper=new Damper,this.phiDamper=new Damper,this.radiusDamper=new Damper,this.logFov=Math.log(DEFAULT_OPTIONS$k.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new Damper,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=ce=>{if(this.enablePan)ce.preventDefault();else for(const le of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:le.id})))},this.touchModeZoom=(ce,le)=>{if(!this._disableZoom){const ue=this.twoTouchDistance(this.pointers[0],this.pointers[1]),he=ZOOM_SENSITIVITY*(this.lastSeparation-ue)*50/this.scene.height;this.lastSeparation=ue,this.userAdjustOrbit(0,0,he)}this.panPerPixel>0&&this.movePan(ce,le)},this.disableScroll=ce=>{ce.preventDefault()},this.touchModeRotate=(ce,le)=>{const{touchAction:ue}=this._options;if(!this.touchDecided&&ue!=="none"){this.touchDecided=!0;const he=Math.abs(ce),fe=Math.abs(le);if(this.changeSource===ChangeSource.USER_INTERACTION&&(ue==="pan-y"&&fe>he||ue==="pan-x"&&he>fe)){this.touchMode=null;return}else this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(ce,le)},this.onPointerDown=ce=>{if(this.pointers.length>2)return;const{element:le}=this;this.pointers.length===0&&(le.addEventListener("pointermove",this.onPointerMove),le.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=ce.clientX,this.startPointerPosition.clientY=ce.clientY,this.startTime=performance.now());try{le.setPointerCapture(ce.pointerId)}catch{}this.pointers.push({clientX:ce.clientX,clientY:ce.clientY,id:ce.pointerId}),this.isUserPointing=!1,ce.pointerType==="touch"?(this.changeSource=ce.altKey?ChangeSource.AUTOMATIC:ChangeSource.USER_INTERACTION,this.onTouchChange(ce)):(this.changeSource=ChangeSource.USER_INTERACTION,this.onMouseDown(ce)),this.changeSource===ChangeSource.USER_INTERACTION&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=ce=>{const le=this.pointers.find(me=>me.id===ce.pointerId);if(le==null)return;const ue=this.pointers.length,he=(ce.clientX-le.clientX)/ue,fe=(ce.clientY-le.clientY)/ue;he===0&&fe===0||(le.clientX=ce.clientX,le.clientY=ce.clientY,ce.pointerType==="touch"?(this.changeSource=ce.altKey?ChangeSource.AUTOMATIC:ChangeSource.USER_INTERACTION,this.touchMode!==null&&this.touchMode(he,fe)):(this.changeSource=ChangeSource.USER_INTERACTION,this.panPerPixel>0?this.movePan(he,fe):this.handleSinglePointerMove(he,fe)))},this.onPointerUp=ce=>{const{element:le}=this,ue=this.pointers.findIndex(he=>he.id===ce.pointerId);ue!==-1&&this.pointers.splice(ue,1),this.panPerPixel>0&&!ce.altKey&&this.resetRadius(),this.pointers.length===0?(le.removeEventListener("pointermove",this.onPointerMove),le.removeEventListener("pointerup",this.onPointerUp),le.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(ce)):this.touchMode!==null&&this.onTouchChange(ce),this.scene.element[$panElement].style.opacity=0,le.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=ce=>{this.changeSource=ChangeSource.USER_INTERACTION;const le=ce.deltaY*(ce.deltaMode==1?18:1)*ZOOM_SENSITIVITY/30;this.userAdjustOrbit(0,0,le),ce.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=ce=>{const{changeSource:le}=this;this.changeSource=ChangeSource.USER_INTERACTION,(ce.shiftKey&&this.enablePan?this.panKeyCodeHandler(ce):this.orbitZoomKeyCodeHandler(ce))?(ce.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=le},this._options=Object.assign({},DEFAULT_OPTIONS$k),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(this._interactionEnabled===!1){const{element:ee}=this;ee.addEventListener("pointerdown",this.onPointerDown),ee.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||ee.addEventListener("wheel",this.onWheel),ee.addEventListener("keydown",this.onKeyDown),ee.addEventListener("touchmove",()=>{},{passive:!1}),ee.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(this._interactionEnabled===!0){const{element:ee}=this;ee.removeEventListener("pointerdown",this.onPointerDown),ee.removeEventListener("pointermove",this.onPointerMove),ee.removeEventListener("pointerup",this.onPointerUp),ee.removeEventListener("pointercancel",this.onPointerUp),ee.removeEventListener("wheel",this.onWheel),ee.removeEventListener("keydown",this.onKeyDown),ee.removeEventListener("contextmenu",this.onContext),ee.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(ee){this._disableZoom!=ee&&(this._disableZoom=ee,ee===!0?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(ee=new Spherical){return ee.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(ee){Object.assign(this._options,ee),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(ee,ne){this.camera.far=ne===0?2:ne,this.camera.near=Math.max(ee,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(ee){this.camera.aspect=ee,this.camera.updateProjectionMatrix()}setOrbit(ee=this.goalSpherical.theta,ne=this.goalSpherical.phi,ae=this.goalSpherical.radius){const{minimumAzimuthalAngle:ce,maximumAzimuthalAngle:le,minimumPolarAngle:ue,maximumPolarAngle:he,minimumRadius:fe,maximumRadius:me}=this._options,{theta:ge,phi:ve,radius:ye}=this.goalSpherical,be=clamp$2(ee,ce,le);!isFinite(ce)&&!isFinite(le)&&(this.spherical.theta=this.wrapAngle(this.spherical.theta-be)+be);const Ee=clamp$2(ne,ue,he),Ce=clamp$2(ae,fe,me);return be===ge&&Ee===ve&&Ce===ye||!isFinite(be)||!isFinite(Ee)||!isFinite(Ce)?!1:(this.goalSpherical.theta=be,this.goalSpherical.phi=Ee,this.goalSpherical.radius=Ce,this.goalSpherical.makeSafe(),!0)}setRadius(ee){this.goalSpherical.radius=ee,this.setOrbit()}setFieldOfView(ee){const{minimumFieldOfView:ne,maximumFieldOfView:ae}=this._options;ee=clamp$2(ee,ne,ae),this.goalLogFov=Math.log(ee)}setDamperDecayTime(ee){this.thetaDamper.setDecayTime(ee),this.phiDamper.setDecayTime(ee),this.radiusDamper.setDecayTime(ee),this.fovDamper.setDecayTime(ee)}adjustOrbit(ee,ne,ae){const{theta:ce,phi:le,radius:ue}=this.goalSpherical,{minimumRadius:he,maximumRadius:fe,minimumFieldOfView:me,maximumFieldOfView:ge}=this._options,ve=this.spherical.theta-ce,ye=Math.PI-.001,be=ce-clamp$2(ee,-ye-ve,ye-ve),Ee=le-ne,Ce=ae===0?0:((ae>0?fe:he)-ue)/(Math.log(ae>0?ge:me)-this.goalLogFov),Se=ue+ae*(isFinite(Ce)?Ce:(fe-he)*2);if(this.setOrbit(be,Ee,Se),ae!==0){const Te=this.goalLogFov+ae;this.setFieldOfView(Math.exp(Te))}}jumpToGoal(){this.update(0,SETTLING_TIME)}update(ee,ne){if(this.isStationary())return!1;const{maximumPolarAngle:ae,maximumRadius:ce}=this._options,le=this.spherical.theta-this.goalSpherical.theta;return Math.abs(le)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=Math.sign(le)*2*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,ne,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,ne,ae),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,ne,ce),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,ne,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:ee}=this.element;if(this._interactionEnabled){const{touchAction:ne}=this._options;this._disableZoom&&ne!=="none"?ee.touchAction="manipulation":ee.touchAction=ne}else ee.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new Euler(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(ee,ne,ae){this.adjustOrbit(ee*this.orbitSensitivity*this.inputSensitivity,ne*this.orbitSensitivity*this.inputSensitivity,ae*this.inputSensitivity)}wrapAngle(ee){const ne=(ee+Math.PI)/(2*Math.PI);return(ne-Math.floor(ne))*2*Math.PI-Math.PI}pixelLengthToSphericalAngle(ee){return 2*Math.PI*ee/this.scene.height}twoTouchDistance(ee,ne){const{clientX:ae,clientY:ce}=ee,{clientX:le,clientY:ue}=ne,he=le-ae,fe=ue-ce;return Math.sqrt(he*he+fe*fe)}handleSinglePointerMove(ee,ne){const ae=this.pixelLengthToSphericalAngle(ee),ce=this.pixelLengthToSphericalAngle(ne);this.isUserPointing===!1&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(ae,ce,0)}initializePan(){const{theta:ee,phi:ne}=this.spherical,ae=ee-this.scene.yaw;this.panPerPixel=PAN_SENSITIVITY/this.scene.height,this.panProjection.set(-Math.cos(ae),-Math.cos(ne)*Math.sin(ae),0,0,Math.sin(ne),0,Math.sin(ae),-Math.cos(ne)*Math.cos(ae),0)}movePan(ee,ne){const{scene:ae}=this,ce=vector3$2.set(ee,ne,0).multiplyScalar(this.inputSensitivity),le=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;ce.multiplyScalar(le);const ue=ae.getTarget();ue.add(ce.applyMatrix3(this.panProjection)),ae.boundingSphere.clampPoint(ue,ue),ae.setTarget(ue.x,ue.y,ue.z)}recenter(ee){if(performance.now()>this.startTime+TAP_MS||Math.abs(ee.clientX-this.startPointerPosition.clientX)>TAP_DISTANCE||Math.abs(ee.clientY-this.startPointerPosition.clientY)>TAP_DISTANCE)return;const{scene:ne}=this,ae=ne.positionAndNormalFromPoint(ne.getNDC(ee.clientX,ee.clientY));if(ae==null){const{cameraTarget:ce}=ne.element;ne.element.cameraTarget="",ne.element.cameraTarget=ce,this.userAdjustOrbit(0,0,1)}else ne.target.worldToLocal(ae.position),ne.setTarget(ae.position.x,ae.position.y,ae.position.z)}resetRadius(){const{scene:ee}=this,ne=ee.positionAndNormalFromPoint(vector2.set(0,0));if(ne==null)return;ee.target.worldToLocal(ne.position);const ae=ee.getTarget(),{theta:ce,phi:le}=this.spherical,ue=ce-ee.yaw,he=vector3$2.set(Math.sin(le)*Math.sin(ue),Math.cos(le),Math.sin(le)*Math.cos(ue)),fe=he.dot(ne.position.sub(ae));ae.add(he.multiplyScalar(fe)),ee.setTarget(ae.x,ae.y,ae.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-fe)}onTouchChange(ee){if(this.pointers.length===1)this.touchMode=this.touchModeRotate;else{if(this._disableZoom){this.touchMode=null,this.element.removeEventListener("touchmove",this.disableScroll);return}this.touchMode=this.touchDecided&&this.touchMode===null?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&this.touchMode!=null&&(this.initializePan(),ee.altKey||(this.scene.element[$panElement].style.opacity=1))}}onMouseDown(ee){this.panPerPixel=0,this.enablePan&&(ee.button===2||ee.ctrlKey||ee.metaKey||ee.shiftKey)&&(this.initializePan(),this.scene.element[$panElement].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(ee){let ne=!0;switch(ee.key){case"PageUp":this.userAdjustOrbit(0,0,ZOOM_SENSITIVITY);break;case"PageDown":this.userAdjustOrbit(0,0,-1*ZOOM_SENSITIVITY);break;case"ArrowUp":this.userAdjustOrbit(0,-KEYBOARD_ORBIT_INCREMENT,0);break;case"ArrowDown":this.userAdjustOrbit(0,KEYBOARD_ORBIT_INCREMENT,0);break;case"ArrowLeft":this.userAdjustOrbit(-KEYBOARD_ORBIT_INCREMENT,0,0);break;case"ArrowRight":this.userAdjustOrbit(KEYBOARD_ORBIT_INCREMENT,0,0);break;default:ne=!1;break}return ne}panKeyCodeHandler(ee){this.initializePan();let ne=!0;switch(ee.key){case"ArrowUp":this.movePan(0,-1*PAN_KEY_INCREMENT);break;case"ArrowDown":this.movePan(0,PAN_KEY_INCREMENT);break;case"ArrowLeft":this.movePan(-1*PAN_KEY_INCREMENT,0);break;case"ArrowRight":this.movePan(PAN_KEY_INCREMENT,0);break;default:ne=!1;break}return ne}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INIT_FRAMES=30,AR_SHADOW_INTENSITY=.8,ROTATION_RATE=1.5,HIT_ANGLE_DEG=20,SCALE_SNAP_HIGH=1.3,SCALE_SNAP_LOW=1/SCALE_SNAP_HIGH,MIN_VIEWPORT_SCALE=.25,MAX_DISTANCE=10,ARStatus={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},ARTracking={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},vector3$1=new Vector3,matrix4=new Matrix4,hitPosition=new Vector3,camera=new PerspectiveCamera(45,1,.1,100);class ARRenderer extends EventDispatcher{constructor(ee){super(),this.renderer=ee,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new Vector3,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new Vector3,this.firstRatio=0,this.lastAngle=0,this.goalPosition=new Vector3,this.goalYaw=0,this.goalScale=1,this.xDamper=new Damper,this.yDamper=new Damper,this.zDamper=new Damper,this.yawDamper=new Damper,this.scaleDamper=new Damper,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onUpdateScene=()=>{this.placementBox!=null&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new PlacementBox(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=ne=>{const ae=this.transientHitTestSource;if(ae==null)return;const ce=this.frame.getHitTestResultsForTransientInput(ae),le=this.presentedScene,ue=this.placementBox;if(ce.length===1){this.inputSource=ne.inputSource;const{axes:he}=this.inputSource.gamepad,fe=ue.getHit(this.presentedScene,he[0],he[1]);ue.show=!0,fe!=null?(this.isTranslating=!0,this.lastDragPosition.copy(fe)):this.placeOnWall===!1&&(this.isRotating=!0,this.lastAngle=he[0]*ROTATION_RATE)}else if(ce.length===2){ue.show=!0,this.isTwoFingering=!0;const{separation:he}=this.fingerPolar(ce);this.firstRatio=he/le.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=ee.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){assertIsArCandidate();const ee=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(ee),this.threeRenderer.xr.cameraAutoUpdate=!1,ee}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return assertIsArCandidate(),await navigator.xr.isSessionSupported("immersive-ar")}catch(ee){return console.warn("Request to present in WebXR denied:"),console.warn(ee),console.warn("Falling back to next ar-mode"),!1}}async present(ee,ne=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");let ae=new Promise((me,ge)=>{requestAnimationFrame(()=>me())});ee.setHotspotsVisibility(!1),ee.queueRender(),await ae,this._presentedScene=ee,this.overlay=ee.element.shadowRoot.querySelector("div.default"),ne===!0&&(this.xrLight=new XREstimatedLight(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||this.xrLight==null)return;const me=this.presentedScene;me.add(this.xrLight),me.environment=this.xrLight.environment}));const ce=await this.resolveARSession();ce.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});const le=ee.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");le.classList.add("enabled"),le.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=le;const ue=await ce.requestReferenceSpace("viewer");this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=ee.yaw,this.goalYaw=ee.yaw,this.goalScale=1,ee.background=null,this.oldShadowIntensity=ee.shadowIntensity,ee.setShadowIntensity(.01),this.oldTarget.copy(ee.getTarget()),ee.element.addEventListener("load",this.onUpdateScene);const he=HIT_ANGLE_DEG*Math.PI/180,fe=this.placeOnWall===!0?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(he),z:-Math.cos(he)});ce.requestHitTestSource({space:ue,offsetRay:fe}).then(me=>{this.initialHitSource=me}),this.currentSession=ce,this.placementBox=new PlacementBox(ee,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:ARStatus.SESSION_STARTED})}async stopPresenting(){if(!this.isPresenting)return;const ee=new Promise(ne=>{this.resolveCleanup=ne});try{await this.currentSession.end(),await ee}catch(ne){console.warn("Error while trying to end WebXR AR session"),console.warn(ne),this.postSessionCleanup()}}get isPresenting(){return this.presentedScene!=null}get target(){return this.oldTarget}updateTarget(){const ee=this.presentedScene;if(ee!=null){const ne=ee.getTarget();this.oldTarget.copy(ne),this.placeOnWall?ne.z=ee.boundingBox.min.z:ne.y=ee.boundingBox.min.y,ee.setTarget(ne.x,ne.y,ne.z)}}postSessionCleanup(){const ee=this.currentSession;ee!=null&&(ee.removeEventListener("selectstart",this.onSelectStart),ee.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const ne=this.presentedScene;if(this._presentedScene=null,ne!=null){const{element:ue}=ne;this.xrLight!=null&&(ne.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),ne.position.set(0,0,0),ne.scale.set(1,1,1),ne.setShadowOffset(0);const he=this.turntableRotation;he!=null&&(ne.yaw=he);const fe=this.oldShadowIntensity;fe!=null&&ne.setShadowIntensity(fe),ne.setEnvironmentAndSkybox(ue[$currentEnvironmentMap],ue[$currentBackground]);const me=this.oldTarget;ne.setTarget(me.x,me.y,me.z),ne.xrCamera=null,ne.element.removeEventListener("load",this.onUpdateScene),ne.orientHotspots(0),ue.requestUpdate("cameraTarget"),ue.requestUpdate("maxCameraOrbit"),ue[$onResize](ue.getBoundingClientRect()),requestAnimationFrame(()=>{ne.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:ChangeSource.NONE}}))})}this.renderer.height=0;const ae=this.exitWebXRButtonContainer;ae!=null&&(ae.classList.remove("enabled"),ae.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const ce=this.transientHitTestSource;ce!=null&&(ce.cancel(),this.transientHitTestSource=null);const le=this.initialHitSource;le!=null&&(le.cancel(),this.initialHitSource=null),this.placementBox!=null&&(this.placementBox.dispose(),this.placementBox=null),this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,this.resolveCleanup!=null&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:ARStatus.NOT_PRESENTING})}updateView(ee){const ne=this.presentedScene,ae=this.threeRenderer.xr;ae.updateCamera(camera),ne.xrCamera=ae.getCamera();const{elements:ce}=ne.getCamera().matrixWorld;if(ne.orientHotspots(Math.atan2(ce[1],ce[5])),this.initialized||(this.placeInitially(),this.initialized=!0),ee.requestViewportScale&&ee.recommendedViewportScale){const ue=ee.recommendedViewportScale;ee.requestViewportScale(Math.max(ue,MIN_VIEWPORT_SCALE))}const le=ae.getBaseLayer();if(le!=null){const ue=le instanceof XRWebGLLayer?le.getViewport(ee):ae.getBinding().getViewSubImage(le,ee).viewport;this.threeRenderer.setViewport(ue.x,ue.y,ue.width,ue.height)}}placeInitially(){const ee=this.presentedScene,{position:ne,element:ae}=ee,ce=ee.getCamera(),{width:le,height:ue}=this.overlay.getBoundingClientRect();ee.setSize(le,ue),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert();const{theta:he,radius:fe}=ae.getCameraOrbit(),me=ce.getWorldDirection(vector3$1);ee.yaw=Math.atan2(-me.x,-me.z)-he,this.goalYaw=ee.yaw,ne.copy(ce.position).add(me.multiplyScalar(fe)),this.updateTarget();const ge=ee.getTarget();ne.add(ge).sub(this.oldTarget),this.goalPosition.copy(ne),ee.setHotspotsVisibility(!0);const{session:ve}=this.frame;ve.addEventListener("selectstart",this.onSelectStart),ve.addEventListener("selectend",this.onSelectEnd),ve.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(ye=>{this.transientHitTestSource=ye})}getTouchLocation(){const{axes:ee}=this.inputSource.gamepad;let ne=this.placementBox.getExpandedHit(this.presentedScene,ee[0],ee[1]);return ne!=null&&(vector3$1.copy(ne).sub(this.presentedScene.getCamera().position),vector3$1.length()>MAX_DISTANCE)?null:ne}getHitPoint(ee){const ne=this.threeRenderer.xr.getReferenceSpace(),ae=ee.getPose(ne);if(ae==null)return null;const ce=matrix4.fromArray(ae.transform.matrix);return this.placeOnWall===!0&&(this.goalYaw=Math.atan2(ce.elements[4],ce.elements[6])),ce.elements[5]>.75!==this.placeOnWall?hitPosition.setFromMatrixPosition(ce):null}moveToFloor(ee){const ne=this.initialHitSource;if(ne==null)return;const ae=ee.getHitTestResults(ne);if(ae.length==0)return;const ce=ae[0],le=this.getHitPoint(ce);le!=null&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(le):this.goalPosition.y=le.y),ne.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:ARStatus.OBJECT_PLACED}))}fingerPolar(ee){const ne=ee[0].inputSource.gamepad.axes,ae=ee[1].inputSource.gamepad.axes,ce=ae[0]-ne[0],le=ae[1]-ne[1],ue=Math.atan2(le,ce);let he=this.lastAngle-ue;return he>Math.PI?he-=2*Math.PI:he<-Math.PI&&(he+=2*Math.PI),this.lastAngle=ue,{separation:Math.sqrt(ce*ce+le*le),deltaYaw:he}}processInput(ee){const ne=this.transientHitTestSource;if(ne==null||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const ae=ee.getHitTestResultsForTransientInput(ne),ce=this.presentedScene,le=ce.scale.x;if(this.isTwoFingering){if(ae.length<2)this.isTwoFingering=!1;else{const{separation:ue,deltaYaw:he}=this.fingerPolar(ae);if(this.placeOnWall===!1&&(this.goalYaw+=he),ce.canScale){const fe=ue/this.firstRatio;this.goalScale=fe<SCALE_SNAP_HIGH&&fe>SCALE_SNAP_LOW?1:fe}}return}else if(ae.length===2){this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:ue}=this.fingerPolar(ae);this.firstRatio=ue/le;return}if(this.isRotating){const ue=this.inputSource.gamepad.axes[0]*ROTATION_RATE;this.goalYaw+=ue-this.lastAngle,this.lastAngle=ue}else this.isTranslating&&ae.forEach(ue=>{if(ue.inputSource!==this.inputSource)return;let he=null;if(ue.results.length>0&&(he=this.getHitPoint(ue.results[0])),he==null&&(he=this.getTouchLocation()),he!=null){if(this.goalPosition.sub(this.lastDragPosition),this.placeOnWall===!1){const fe=he.y-this.lastDragPosition.y;if(fe<0){this.placementBox.offsetHeight=fe/le,this.presentedScene.setShadowOffset(fe);const me=vector3$1.copy(ce.getCamera().position),ge=-fe/(me.y-he.y);me.multiplyScalar(ge),he.multiplyScalar(1-ge).add(me)}}this.goalPosition.add(he),this.lastDragPosition.copy(he)}})}moveScene(ee){const ne=this.presentedScene,{position:ae,yaw:ce}=ne,le=ne.boundingSphere.radius,ue=this.goalPosition,he=ne.scale.x,fe=this.placementBox;let me=ChangeSource.NONE;if(!ue.equals(ae)||this.goalScale!==he){me=ChangeSource.USER_INTERACTION;let{x:ge,y:ve,z:ye}=ae;ge=this.xDamper.update(ge,ue.x,ee,le),ve=this.yDamper.update(ve,ue.y,ee,le),ye=this.zDamper.update(ye,ue.z,ee,le),ae.set(ge,ve,ye);const be=this.scaleDamper.update(he,this.goalScale,ee,1);if(ne.scale.set(be,be,be),!this.isTranslating){const Ee=ue.y-ve;this.placementComplete&&this.placeOnWall===!1?(fe.offsetHeight=Ee/be,ne.setShadowOffset(Ee)):Ee===0&&(this.placementComplete=!0,fe.show=!1,ne.setShadowIntensity(AR_SHADOW_INTENSITY))}}fe.updateOpacity(ee),ne.updateTarget(ee),ne.yaw=this.yawDamper.update(ce,this.goalYaw,ee,Math.PI),ne.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:me}}))}onWebXRFrame(ee,ne){this.frame=ne,++this.frames;const ae=this.threeRenderer.xr.getReferenceSpace(),ce=ne.getViewerPose(ae);ce==null&&this.tracking===!0&&this.frames>INIT_FRAMES&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:ARTracking.NOT_TRACKING}));const le=this.presentedScene;if(ce==null||le==null||!le.element.loaded){this.threeRenderer.clear();return}this.tracking===!1&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:ARTracking.TRACKING}));let ue=!0;for(const he of ce.views){if(this.updateView(he),ue){this.moveToFloor(ne),this.processInput(ne);const fe=ee-this.lastTick;this.moveScene(fe),this.renderer.preRender(le,ee,fe),this.lastTick=ee,le.renderShadow(this.threeRenderer)}this.threeRenderer.render(le,le.getCamera()),ue=!1}}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Debugger{constructor(ee){ee.threeRenderer.debug={checkShaderErrors:!0},Promise.resolve().then(()=>{self.dispatchEvent(new CustomEvent("model-viewer-renderer-debug",{detail:{renderer:ee,THREE:{ShaderMaterial,Texture:Texture$1,Mesh,Scene,PlaneGeometry,OrthographicCamera,WebGLRenderTarget}}}))})}addScene(ee){self.dispatchEvent(new CustomEvent("model-viewer-scene-added-debug",{detail:{scene:ee}}))}removeScene(ee){self.dispatchEvent(new CustomEvent("model-viewer-scene-removed-debug",{detail:{scene:ee}}))}}function clone$2(re){const ee=new Map,ne=new Map,ae=re.clone();return parallelTraverse(re,ae,function(ce,le){ee.set(le,ce),ne.set(ce,le)}),ae.traverse(function(ce){if(!ce.isSkinnedMesh)return;const le=ce,ue=ee.get(ce),he=ue.skeleton.bones;le.skeleton=ue.skeleton.clone(),le.bindMatrix.copy(ue.bindMatrix),le.skeleton.bones=he.map(function(fe){return ne.get(fe)}),le.bind(le.skeleton,le.bindMatrix)}),ae}function parallelTraverse(re,ee,ne){ne(re,ee);for(let ae=0;ae<re.children.length;ae++)parallelTraverse(re.children[ae],ee.children[ae],ne)}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $prepared=Symbol("prepared"),$prepare=Symbol("prepare"),$preparedGLTF=Symbol("preparedGLTF"),$clone=Symbol("clone");class GLTFInstance{constructor(ee){this[$preparedGLTF]=ee}static prepare(ee){if(ee.scene==null)throw new Error("Model does not have a scene");if(ee[$prepared])return ee;const ne=this[$prepare](ee);return ne[$prepared]=!0,ne}static[$prepare](ee){const{scene:ne}=ee,ae=[ne];return Object.assign(Object.assign({},ee),{scene:ne,scenes:ae})}get parser(){return this[$preparedGLTF].parser}get animations(){return this[$preparedGLTF].animations}get scene(){return this[$preparedGLTF].scene}get scenes(){return this[$preparedGLTF].scenes}get cameras(){return this[$preparedGLTF].cameras}get asset(){return this[$preparedGLTF].asset}get userData(){return this[$preparedGLTF].userData}clone(){const ee=this.constructor,ne=this[$clone]();return new ee(ne)}dispose(){this.scenes.forEach(ee=>{ee.traverse(ne=>{if(!ne.isMesh)return;const ae=ne;(Array.isArray(ae.material)?ae.material:[ae.material]).forEach(le=>{for(const ue in le){const he=le[ue];if(he instanceof Texture$1){const fe=he.source.data;fe.close!=null&&fe.close(),he.dispose()}}le.dispose()}),ae.geometry.dispose()})})}[$clone](){const ee=this[$preparedGLTF],ne=clone$2(this.scene);cloneVariantMaterials(ne,this.scene);const ae=[ne],ce=ee.userData?Object.assign({},ee.userData):{};return Object.assign(Object.assign({},ee),{scene:ne,scenes:ae,userData:ce})}}const cloneVariantMaterials=(re,ee)=>{traversePair(re,ee,(ne,ae)=>{ae.userData.variantMaterials!==void 0&&(ne.userData.variantMaterials=new Map(ae.userData.variantMaterials)),ae.userData.variantData!==void 0&&(ne.userData.variantData=ae.userData.variantData),ae.userData.originalMaterial!==void 0&&(ne.userData.originalMaterial=ae.userData.originalMaterial)})},traversePair=(re,ee,ne)=>{ne(re,ee);for(let ae=0;ae<re.children.length;ae++)traversePair(re.children[ae],ee.children[ae],ne)},$threeGLTF=Symbol("threeGLTF"),$gltf=Symbol("gltf"),$gltfElementMap=Symbol("gltfElementMap"),$threeObjectMap=Symbol("threeObjectMap"),$parallelTraverseThreeScene=Symbol("parallelTraverseThreeScene"),$correlateOriginalThreeGLTF=Symbol("correlateOriginalThreeGLTF"),$correlateCloneThreeGLTF=Symbol("correlateCloneThreeGLTF");class CorrelatedSceneGraph{constructor(ee,ne,ae,ce){this[$threeGLTF]=ee,this[$gltf]=ne,this[$gltfElementMap]=ce,this[$threeObjectMap]=ae}static from(ee,ne){return ne!=null?this[$correlateCloneThreeGLTF](ee,ne):this[$correlateOriginalThreeGLTF](ee)}static[$correlateOriginalThreeGLTF](ee){const ne=ee.parser.json,ae=ee.parser.associations,ce=new Map,le={name:"Default"},ue={type:"materials",index:-1};for(const he of ae.keys())he instanceof Material$1&&ae.get(he)==null&&(ue.index<0&&(ne.materials==null&&(ne.materials=[]),ue.index=ne.materials.length,ne.materials.push(le)),he.name=le.name,ae.set(he,{materials:ue.index}));for(const[he,fe]of ae){if(fe){const me=he;me.userData=me.userData||{},me.userData.associations=fe}for(const me in fe)if(me!=null&&me!=="primitives"){const ge=me,ye=(ne[ge]||[])[fe[ge]];if(ye==null)continue;let be=ce.get(ye);be==null&&(be=new Set,ce.set(ye,be)),be.add(he)}}return new CorrelatedSceneGraph(ee,ne,ae,ce)}static[$correlateCloneThreeGLTF](ee,ne){const ae=ne.threeGLTF,ce=ne.gltf,le=JSON.parse(JSON.stringify(ce)),ue=new Map,he=new Map;for(let fe=0;fe<ae.scenes.length;fe++)this[$parallelTraverseThreeScene](ae.scenes[fe],ee.scenes[fe],(me,ge)=>{const ve=ne.threeObjectMap.get(me);if(ve!=null){for(const ye in ve)if(ye!=null&&ye!=="primitives"){const be=ye,Ee=ve[be],Ce=le[be][Ee],Se=ue.get(ge)||{};Se[be]=Ee,ue.set(ge,Se);const Te=he.get(Ce)||new Set;Te.add(ge),he.set(Ce,Te)}}});return new CorrelatedSceneGraph(ee,le,ue,he)}static[$parallelTraverseThreeScene](ee,ne,ae){const ce=ue=>ue.isMesh,le=(ue,he)=>{if(ae(ue,he),ue.isObject3D){if(ce(ue))if(Array.isArray(ue.material))for(let fe=0;fe<ue.material.length;++fe)le(ue.material[fe],he.material[fe]);else le(ue.material,he.material);for(let fe=0;fe<ue.children.length;++fe)le(ue.children[fe],he.children[fe])}};le(ee,ne)}get threeGLTF(){return this[$threeGLTF]}get gltf(){return this[$gltf]}get gltfElementMap(){return this[$gltfElementMap]}get threeObjectMap(){return this[$threeObjectMap]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $correlatedSceneGraph$1=Symbol("correlatedSceneGraph");class ModelViewerGLTFInstance extends GLTFInstance{static[$prepare](ee){const ne=super[$prepare](ee);ne[$correlatedSceneGraph$1]==null&&(ne[$correlatedSceneGraph$1]=CorrelatedSceneGraph.from(ne));const{scene:ae}=ne,ce=new Sphere(void 0,1/0);return ae.traverse(le=>{le.renderOrder=1e3,le.frustumCulled=!1,le.name||(le.name=le.uuid);const ue=le;if(ue.isMesh){const{geometry:he}=ue;ue.castShadow=!0,ue.isSkinnedMesh&&(he.boundingSphere=ce,he.boundingBox=null);const fe=ue.material;if(fe.isMeshBasicMaterial===!0&&(fe.toneMapped=!1),fe.shadowSide=FrontSide,fe.aoMap){const{gltf:me,threeObjectMap:ge}=ne[$correlatedSceneGraph$1],ve=ge.get(fe);if(me.materials!=null&&ve!=null&&ve.materials!=null){const ye=me.materials[ve.materials];ye.occlusionTexture&&ye.occlusionTexture.texCoord===0&&he.attributes.uv!=null&&he.setAttribute("uv2",he.attributes.uv)}}}}),ne}get correlatedSceneGraph(){return this[$preparedGLTF][$correlatedSceneGraph$1]}[$clone](){const ee=super[$clone](),ne=new Map;return ee.scene.traverse(ae=>{if(ae.isMesh){const ce=ae,le=ce.material;if(le!=null){if(ne.has(le.uuid)){ce.material=ne.get(le.uuid);return}ce.material=le.clone(),ne.set(le.uuid,ce.material)}}}),ee[$correlatedSceneGraph$1]=CorrelatedSceneGraph.from(ee,this.correlatedSceneGraph),ee}}const scriptRel="modulepreload",assetsURL=function(re){return"/teia-ui/previews/pr-455/"+re},seen={},__vitePreload=function(ee,ne,ae){if(!ne||ne.length===0)return ee();const ce=document.getElementsByTagName("link");return Promise.all(ne.map(le=>{if(le=assetsURL(le),le in seen)return;seen[le]=!0;const ue=le.endsWith(".css"),he=ue?'[rel="stylesheet"]':"";if(!!ae)for(let ge=ce.length-1;ge>=0;ge--){const ve=ce[ge];if(ve.href===le&&(!ue||ve.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${le}"]${he}`))return;const me=document.createElement("link");if(me.rel=ue?"stylesheet":scriptRel,ue||(me.as="script",me.crossOrigin=""),me.href=le,document.head.appendChild(me),ue)return new Promise((ge,ve)=>{me.addEventListener("load",ge),me.addEventListener("error",()=>ve(new Error(`Unable to preload CSS for ${le}`)))})})).then(()=>ee()).catch(le=>{const ue=new Event("vite:preloadError",{cancelable:!0});if(ue.payload=le,window.dispatchEvent(ue),!ue.defaultPrevented)throw le})};class RGBELoader extends DataTextureLoader{constructor(ee){super(ee),this.type=HalfFloatType}parse(ee){const he=function(Ne,Fe){switch(Ne){case 1:console.error("THREE.RGBELoader Read Error: "+(Fe||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(Fe||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(Fe||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(Fe||""))}return-1},ve=`
`,ye=function(Ne,Fe,De){Fe=Fe||1024;let Re=Ne.pos,Be=-1,Le=0,je="",Ge=String.fromCharCode.apply(null,new Uint16Array(Ne.subarray(Re,Re+128)));for(;0>(Be=Ge.indexOf(ve))&&Le<Fe&&Re<Ne.byteLength;)je+=Ge,Le+=Ge.length,Re+=128,Ge+=String.fromCharCode.apply(null,new Uint16Array(Ne.subarray(Re,Re+128)));return-1<Be?(De!==!1&&(Ne.pos+=Le+Be+1),je+Ge.slice(0,Be)):!1},be=function(Ne){const Fe=/^#\?(\S+)/,De=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Oe=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Re=/^\s*FORMAT=(\S+)\s*$/,Be=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Le={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let je,Ge;if(Ne.pos>=Ne.byteLength||!(je=ye(Ne)))return he(1,"no header found");if(!(Ge=je.match(Fe)))return he(3,"bad initial token");for(Le.valid|=1,Le.programtype=Ge[1],Le.string+=je+`
`;je=ye(Ne),je!==!1;){if(Le.string+=je+`
`,je.charAt(0)==="#"){Le.comments+=je+`
`;continue}if((Ge=je.match(De))&&(Le.gamma=parseFloat(Ge[1])),(Ge=je.match(Oe))&&(Le.exposure=parseFloat(Ge[1])),(Ge=je.match(Re))&&(Le.valid|=2,Le.format=Ge[1]),(Ge=je.match(Be))&&(Le.valid|=4,Le.height=parseInt(Ge[1],10),Le.width=parseInt(Ge[2],10)),Le.valid&2&&Le.valid&4)break}return Le.valid&2?Le.valid&4?Le:he(3,"missing image size specifier"):he(3,"missing format specifier")},Ee=function(Ne,Fe,De){const Oe=Fe;if(Oe<8||Oe>32767||Ne[0]!==2||Ne[1]!==2||Ne[2]&128)return new Uint8Array(Ne);if(Oe!==(Ne[2]<<8|Ne[3]))return he(3,"wrong scanline width");const Re=new Uint8Array(4*Fe*De);if(!Re.length)return he(4,"unable to allocate buffer space");let Be=0,Le=0;const je=4*Oe,Ge=new Uint8Array(4),qe=new Uint8Array(je);let Ue=De;for(;Ue>0&&Le<Ne.byteLength;){if(Le+4>Ne.byteLength)return he(1);if(Ge[0]=Ne[Le++],Ge[1]=Ne[Le++],Ge[2]=Ne[Le++],Ge[3]=Ne[Le++],Ge[0]!=2||Ge[1]!=2||(Ge[2]<<8|Ge[3])!=Oe)return he(3,"bad rgbe scanline format");let ze=0,He;for(;ze<je&&Le<Ne.byteLength;){He=Ne[Le++];const Xe=He>128;if(Xe&&(He-=128),He===0||ze+He>je)return he(3,"bad scanline data");if(Xe){const We=Ne[Le++];for(let Ze=0;Ze<He;Ze++)qe[ze++]=We}else qe.set(Ne.subarray(Le,Le+He),ze),ze+=He,Le+=He}const Ye=Oe;for(let Xe=0;Xe<Ye;Xe++){let We=0;Re[Be]=qe[Xe+We],We+=Oe,Re[Be+1]=qe[Xe+We],We+=Oe,Re[Be+2]=qe[Xe+We],We+=Oe,Re[Be+3]=qe[Xe+We],Be+=4}Ue--}return Re},Ce=function(Ne,Fe,De,Oe){const Re=Ne[Fe+3],Be=Math.pow(2,Re-128)/255;De[Oe+0]=Ne[Fe+0]*Be,De[Oe+1]=Ne[Fe+1]*Be,De[Oe+2]=Ne[Fe+2]*Be,De[Oe+3]=1},Se=function(Ne,Fe,De,Oe){const Re=Ne[Fe+3],Be=Math.pow(2,Re-128)/255;De[Oe+0]=DataUtils.toHalfFloat(Math.min(Ne[Fe+0]*Be,65504)),De[Oe+1]=DataUtils.toHalfFloat(Math.min(Ne[Fe+1]*Be,65504)),De[Oe+2]=DataUtils.toHalfFloat(Math.min(Ne[Fe+2]*Be,65504)),De[Oe+3]=DataUtils.toHalfFloat(1)},Te=new Uint8Array(ee);Te.pos=0;const ke=be(Te);if(ke!==-1){const Ne=ke.width,Fe=ke.height,De=Ee(Te.subarray(Te.pos),Ne,Fe);if(De!==-1){let Oe,Re,Be;switch(this.type){case FloatType:Be=De.length/4;const Le=new Float32Array(Be*4);for(let Ge=0;Ge<Be;Ge++)Ce(De,Ge*4,Le,Ge*4);Oe=Le,Re=FloatType;break;case HalfFloatType:Be=De.length/4;const je=new Uint16Array(Be*4);for(let Ge=0;Ge<Be;Ge++)Se(De,Ge*4,je,Ge*4);Oe=je,Re=HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:Ne,height:Fe,data:Oe,header:ke.string,gamma:ke.gamma,exposure:ke.exposure,type:Re}}}return null}setDataType(ee){return this.type=ee,this}load(ee,ne,ae,ce){function le(ue,he){switch(ue.type){case FloatType:case HalfFloatType:ue.encoding=LinearEncoding,ue.minFilter=LinearFilter,ue.magFilter=LinearFilter,ue.generateMipmaps=!1,ue.flipY=!0;break}ne&&ne(ue,he)}return super.load(ee,le,ae,ce)}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EnvironmentScene extends Scene{constructor(){super(),this.position.y=-3.5;const ee=new BoxGeometry;ee.deleteAttribute("uv");const ne=new MeshStandardMaterial({metalness:0,side:BackSide}),ae=new MeshStandardMaterial({metalness:0}),ce=new PointLight(16777215,500,28,2);ce.position.set(.418,16.199,.3),this.add(ce);const le=new Mesh(ee,ne);le.position.set(-.757,13.219,.717),le.scale.set(31.713,28.305,28.591),this.add(le);const ue=new Mesh(ee,ae);ue.position.set(-10.906,2.009,1.846),ue.rotation.set(0,-.195,0),ue.scale.set(2.328,7.905,4.651),this.add(ue);const he=new Mesh(ee,ae);he.position.set(-5.607,-.754,-.758),he.rotation.set(0,.994,0),he.scale.set(1.97,1.534,3.955),this.add(he);const fe=new Mesh(ee,ae);fe.position.set(6.167,.857,7.803),fe.rotation.set(0,.561,0),fe.scale.set(3.927,6.285,3.687),this.add(fe);const me=new Mesh(ee,ae);me.position.set(-2.017,.018,6.124),me.rotation.set(0,.333,0),me.scale.set(2.002,4.566,2.064),this.add(me);const ge=new Mesh(ee,ae);ge.position.set(2.291,-.756,-2.621),ge.rotation.set(0,-.286,0),ge.scale.set(1.546,1.552,1.496),this.add(ge);const ve=new Mesh(ee,ae);ve.position.set(-2.193,-.369,-5.547),ve.rotation.set(0,.516,0),ve.scale.set(3.875,3.487,2.986),this.add(ve);const ye=new Mesh(ee,this.createAreaLightMaterial(50));ye.position.set(-16.116,14.37,8.208),ye.scale.set(.1,2.428,2.739),this.add(ye);const be=new Mesh(ee,this.createAreaLightMaterial(50));be.position.set(-16.109,18.021,-8.207),be.scale.set(.1,2.425,2.751),this.add(be);const Ee=new Mesh(ee,this.createAreaLightMaterial(17));Ee.position.set(14.904,12.198,-1.832),Ee.scale.set(.15,4.265,6.331),this.add(Ee);const Ce=new Mesh(ee,this.createAreaLightMaterial(43));Ce.position.set(-.462,8.89,14.52),Ce.scale.set(4.38,5.441,.088),this.add(Ce);const Se=new Mesh(ee,this.createAreaLightMaterial(20));Se.position.set(3.235,11.486,-12.541),Se.scale.set(2.5,2,.1),this.add(Se);const Te=new Mesh(ee,this.createAreaLightMaterial(100));Te.position.set(0,20,0),Te.scale.set(1,.1,1),this.add(Te)}createAreaLightMaterial(ee){const ne=new MeshBasicMaterial;return ne.color.setScalar(ee),ne}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EnvironmentSceneAlt extends Scene{constructor(){super(),this.position.y=-3.5;const ee=new BoxGeometry;ee.deleteAttribute("uv");const ne=new MeshStandardMaterial({metalness:0,side:BackSide}),ae=new MeshStandardMaterial({metalness:0}),ce=new PointLight(16777215,400,28,2);ce.position.set(.5,14,.5),this.add(ce);const le=new Mesh(ee,ne);le.position.set(0,13.2,0),le.scale.set(31.5,28.5,31.5),this.add(le);const ue=new Mesh(ee,ae);ue.position.set(-10.906,-1,1.846),ue.rotation.set(0,-.195,0),ue.scale.set(2.328,7.905,4.651),this.add(ue);const he=new Mesh(ee,ae);he.position.set(-5.607,-.754,-.758),he.rotation.set(0,.994,0),he.scale.set(1.97,1.534,3.955),this.add(he);const fe=new Mesh(ee,ae);fe.position.set(6.167,-.16,7.803),fe.rotation.set(0,.561,0),fe.scale.set(3.927,6.285,3.687),this.add(fe);const me=new Mesh(ee,ae);me.position.set(-2.017,.018,6.124),me.rotation.set(0,.333,0),me.scale.set(2.002,4.566,2.064),this.add(me);const ge=new Mesh(ee,ae);ge.position.set(2.291,-.756,-2.621),ge.rotation.set(0,-.286,0),ge.scale.set(1.546,1.552,1.496),this.add(ge);const ve=new Mesh(ee,ae);ve.position.set(-2.193,-.369,-5.547),ve.rotation.set(0,.516,0),ve.scale.set(3.875,3.487,2.986),this.add(ve);const ye=new Mesh(ee,this.createAreaLightMaterial(80));ye.position.set(-14,10,8),ye.scale.set(.1,2.5,2.5),this.add(ye);const be=new Mesh(ee,this.createAreaLightMaterial(80));be.position.set(-14,14,-4),be.scale.set(.1,2.5,2.5),this.add(be);const Ee=new Mesh(ee,this.createAreaLightMaterial(23));Ee.position.set(14,12,0),Ee.scale.set(.1,5,5),this.add(Ee);const Ce=new Mesh(ee,this.createAreaLightMaterial(16));Ce.position.set(0,9,14),Ce.scale.set(5,5,.1),this.add(Ce);const Se=new Mesh(ee,this.createAreaLightMaterial(80));Se.position.set(7,8,-14),Se.scale.set(2.5,2.5,.1),this.add(Se);const Te=new Mesh(ee,this.createAreaLightMaterial(80));Te.position.set(-7,16,-14),Te.scale.set(2.5,2.5,.1),this.add(Te);const ke=new Mesh(ee,this.createAreaLightMaterial(1));ke.position.set(0,20,0),ke.scale.set(.1,.1,.1),this.add(ke)}createAreaLightMaterial(ee){const ne=new MeshBasicMaterial;return ne.color.setScalar(ee),ne}}const GENERATED_SIGMA=.04,MAX_SAMPLES=20,HDR_FILE_RE=/\.hdr(\.js)?$/;class TextureUtils extends EventDispatcher{constructor(ee){super(),this.threeRenderer=ee,this.lottieLoaderUrl="",this.withCredentials=!1,this._ldrLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}get ldrLoader(){return this._ldrLoader==null&&(this._ldrLoader=new TextureLoader),this._ldrLoader.setWithCredentials(this.withCredentials),this._ldrLoader}get hdrLoader(){return this._hdrLoader==null&&(this._hdrLoader=new RGBELoader,this._hdrLoader.setDataType(HalfFloatType)),this._hdrLoader.setWithCredentials(this.withCredentials),this._hdrLoader}async getLottieLoader(){if(this._lottieLoader==null){const{LottieLoader:ee}=await __vitePreload(()=>import(this.lottieLoaderUrl),[]);this._lottieLoader=new ee}return this._lottieLoader.setWithCredentials(this.withCredentials),this._lottieLoader}async loadImage(ee){const ne=await new Promise((ae,ce)=>this.ldrLoader.load(ee,ae,()=>{},ce));return ne.name=ee,ne.flipY=!1,ne}async loadLottie(ee,ne){const ae=await this.getLottieLoader();ae.setQuality(ne);const ce=await new Promise((le,ue)=>ae.load(ee,le,()=>{},ue));return ce.name=ee,ce}async loadEquirect(ee,ne=()=>{}){try{const ae=HDR_FILE_RE.test(ee),ce=ae?this.hdrLoader:this.ldrLoader,le=await new Promise((ue,he)=>ce.load(ee,ue,fe=>{ne(fe.loaded/fe.total*.9)},he));return ne(1),le.name=ee,le.mapping=EquirectangularReflectionMapping,ae||(le.encoding=sRGBEncoding),le}finally{ne&&ne(1)}}async generateEnvironmentMapAndSkybox(ee=null,ne=null,ae=()=>{}){const ce=ne!=="legacy";(ne==="legacy"||ne==="neutral")&&(ne=null),ne=deserializeUrl(ne);let le=Promise.resolve(null),ue;ee&&(le=this.loadEquirectFromUrl(ee,ae)),ne?ue=this.loadEquirectFromUrl(ne,ae):ee?ue=this.loadEquirectFromUrl(ee,ae):ue=ce?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[he,fe]=await Promise.all([ue,le]);if(he==null)throw new Error("Failed to load environment map.");return{environmentMap:he,skybox:fe}}async loadEquirectFromUrl(ee,ne){if(!this.skyboxCache.has(ee)){const ae=this.loadEquirect(ee,ne);this.skyboxCache.set(ee,ae)}return this.skyboxCache.get(ee)}async GenerateEnvironmentMap(ee,ne){await timePasses();const ae=this.threeRenderer,ce=new WebGLCubeRenderTarget(256,{generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,encoding:LinearEncoding,depthBuffer:!0}),le=new CubeCamera(.1,100,ce),ue=le.renderTarget.texture;ue.name=ne;const he=ae.outputEncoding,fe=ae.toneMapping;return ae.toneMapping=NoToneMapping,ae.outputEncoding=LinearEncoding,le.update(ae,ee),this.blurCubemap(ce,GENERATED_SIGMA),ae.toneMapping=fe,ae.outputEncoding=he,ue}async loadGeneratedEnvironmentMap(){return this.generatedEnvironmentMap==null&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new EnvironmentScene,"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return this.generatedEnvironmentMapAlt==null&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new EnvironmentSceneAlt,"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(ee,ne){if(this.blurMaterial==null){this.blurMaterial=this.getBlurShader(MAX_SAMPLES);const ce=new BoxGeometry,le=new Mesh(ce,this.blurMaterial);this.blurScene=new Scene,this.blurScene.add(le)}const ae=ee.clone();this.halfblur(ee,ae,ne,"latitudinal"),this.halfblur(ae,ee,ne,"longitudinal")}halfblur(ee,ne,ae,ce){const ue=ee.width,he=isFinite(ae)?Math.PI/(2*ue):2*Math.PI/(2*MAX_SAMPLES-1),fe=ae/he,me=isFinite(ae)?1+Math.floor(3*fe):MAX_SAMPLES;me>MAX_SAMPLES&&console.warn(`sigmaRadians, ${ae}, is too large and will clip, as it requested ${me} samples when the maximum is set to ${MAX_SAMPLES}`);const ge=[];let ve=0;for(let Ee=0;Ee<MAX_SAMPLES;++Ee){const Ce=Ee/fe,Se=Math.exp(-Ce*Ce/2);ge.push(Se),Ee==0?ve+=Se:Ee<me&&(ve+=2*Se)}for(let Ee=0;Ee<ge.length;Ee++)ge[Ee]=ge[Ee]/ve;const ye=this.blurMaterial.uniforms;ye.envMap.value=ee.texture,ye.samples.value=me,ye.weights.value=ge,ye.latitudinal.value=ce==="latitudinal",ye.dTheta.value=he,new CubeCamera(.1,100,ne).update(this.threeRenderer,this.blurScene)}getBlurShader(ee){const ne=new Float32Array(ee),ae=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:ee},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:ne},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:ae}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:NoBlending,depthTest:!1,depthWrite:!1,side:BackSide})}async dispose(){for(const[,ee]of this.skyboxCache)(await ee).dispose();this.generatedEnvironmentMap!=null&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),this.generatedEnvironmentMapAlt!=null&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),this.blurMaterial!=null&&this.blurMaterial.dispose()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DURATION_DECAY=.2,LOW_FRAME_DURATION_MS=40,HIGH_FRAME_DURATION_MS=60,MAX_AVG_CHANGE_MS=5,SCALE_STEPS=[1,.79,.62,.5,.4,.31,.25],DEFAULT_LAST_STEP=3,DEFAULT_POWER_PREFERENCE="high-performance";class Renderer extends EventDispatcher{constructor(ee){super(),this.loader=new CachingGLTFLoader(ModelViewerGLTFInstance),this.width=0,this.height=0,this.dpr=1,this.debugger=null,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=DEFAULT_LAST_STEP,this.avgFrameDuration=(HIGH_FRAME_DURATION_MS+LOW_FRAME_DURATION_MS)/2,this.onWebGLContextLost=ne=>{this.dispatchEvent({type:"contextlost",sourceEvent:ne})},this.onWebGLContextRestored=()=>{var ne;(ne=this.textureUtils)===null||ne===void 0||ne.dispose(),this.textureUtils=new TextureUtils(this.threeRenderer);for(const ae of this.scenes)ae.element[$updateEnvironment]()},this.dpr=resolveDpr(),this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new WebGLRenderer({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:ee.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.outputEncoding=sRGBEncoding,this.threeRenderer.physicallyCorrectLights=!0,this.threeRenderer.setPixelRatio(1),this.debugger=ee.debug?new Debugger(this):null,this.threeRenderer.debug={checkShaderErrors:!!this.debugger},this.threeRenderer.toneMapping=ACESFilmicToneMapping}catch(ne){console.warn(ne)}this.arRenderer=new ARRenderer(this),this.textureUtils=this.canRender?new TextureUtils(this.threeRenderer):null,CachingGLTFLoader.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}static get singleton(){return this._singleton}static resetSingleton(){const ee=this._singleton.dispose();for(const ne of ee)ne.disconnectedCallback();this._singleton=new Renderer({powerPreference:(self.ModelViewerElement||{}).powerPreference||DEFAULT_POWER_PREFERENCE,debug:isDebugMode()});for(const ne of ee)ne.connectedCallback()}get canRender(){return this.threeRenderer!=null}get scaleFactor(){return SCALE_STEPS[this.scaleStep]}set minScale(ee){let ne=1;for(;ne<SCALE_STEPS.length&&!(SCALE_STEPS[ne]<ee);)++ne;this.lastStep=ne-1}registerScene(ee){this.scenes.add(ee),ee.forceRescale();const ne=new Vector2;this.threeRenderer.getSize(ne),ee.canvas.width=ne.x,ee.canvas.height=ne.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((ae,ce)=>this.render(ae,ce)),this.debugger!=null&&this.debugger.addScene(ee)}unregisterScene(ee){this.scenes.delete(ee),this.canvas3D.parentElement===ee.canvas.parentElement&&ee.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&this.scenes.size===0&&this.threeRenderer.setAnimationLoop(null),this.debugger!=null&&this.debugger.removeScene(ee)}displayCanvas(ee){return this.multipleScenesVisible?ee.element[$canvas]:this.canvas3D}countVisibleScenes(){const{canvas3D:ee}=this;let ne=0,ae=null;for(const le of this.scenes){const{element:ue}=le;ue.modelIsVisible&&le.externalRenderer==null&&++ne,ee.parentElement===le.canvas.parentElement&&(ae=le)}const ce=ne>1;if(ae!=null){const le=ce&&!this.multipleScenesVisible,ue=!ae.element.modelIsVisible;if(le||ue){const{width:he,height:fe}=this.sceneSize(ae);this.copyPixels(ae,he,fe),ee.parentElement.removeChild(ee)}}this.multipleScenesVisible=ce}updateRendererSize(){const ee=resolveDpr();if(ee!==this.dpr)for(const ce of this.scenes){const{element:le}=ce;le[$updateSize](le.getBoundingClientRect())}let ne=0,ae=0;for(const ce of this.scenes)ne=Math.max(ne,ce.width),ae=Math.max(ae,ce.height);if(!(ne===this.width&&ae===this.height&&ee===this.dpr)){this.width=ne,this.height=ae,this.dpr=ee,ne=Math.ceil(ne*ee),ae=Math.ceil(ae*ee),this.canRender&&this.threeRenderer.setSize(ne,ae,!1);for(const ce of this.scenes){const{canvas:le}=ce;le.width=ne,le.height=ae,ce.forceRescale()}}}updateRendererScale(ee){const ne=this.scaleStep;this.avgFrameDuration+=clamp$2(DURATION_DECAY*(ee-this.avgFrameDuration),-MAX_AVG_CHANGE_MS,MAX_AVG_CHANGE_MS),this.avgFrameDuration>HIGH_FRAME_DURATION_MS?++this.scaleStep:this.avgFrameDuration<LOW_FRAME_DURATION_MS&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),ne!==this.scaleStep&&(this.avgFrameDuration=(HIGH_FRAME_DURATION_MS+LOW_FRAME_DURATION_MS)/2)}shouldRender(ee){if(ee.shouldRender())ee.scaleStep!=this.scaleStep&&(ee.scaleStep=this.scaleStep,this.rescaleCanvas(ee));else if(ee.scaleStep!=0)ee.scaleStep=0,this.rescaleCanvas(ee);else return!1;return!0}rescaleCanvas(ee){const ne=SCALE_STEPS[ee.scaleStep],ae=Math.ceil(this.width/ne),ce=Math.ceil(this.height/ne),{style:le}=ee.canvas;le.width=`${ae}px`,le.height=`${ce}px`,this.canvas3D.style.width=`${ae}px`,this.canvas3D.style.height=`${ce}px`;const ue=this.dpr*ne,he=ne<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";ee.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:ue,minimumDpr:this.dpr*SCALE_STEPS[this.lastStep],pixelWidth:Math.ceil(ee.width*ue),pixelHeight:Math.ceil(ee.height*ue),reason:he}}))}sceneSize(ee){const{dpr:ne}=this,ae=SCALE_STEPS[ee.scaleStep],ce=Math.min(Math.ceil(ee.width*ae*ne),this.canvas3D.width),le=Math.min(Math.ceil(ee.height*ae*ne),this.canvas3D.height);return{width:ce,height:le}}copyPixels(ee,ne,ae){const ce=ee.context;if(ce==null){console.log("could not acquire 2d context");return}ce.clearRect(0,0,ne,ae),ce.drawImage(this.canvas3D,0,0,ne,ae,0,0,ne,ae),ee.canvas.classList.add("show")}orderedScenes(){const ee=[];for(const ne of[!1,!0])for(const ae of this.scenes)ae.element.modelIsVisible===ne&&ee.push(ae);return ee}get isPresenting(){return this.arRenderer.isPresenting}preRender(ee,ne,ae){const{element:ce,exposure:le}=ee;ce[$tick](ne,ae);const ue=typeof le=="number"&&!Number.isNaN(le);this.threeRenderer.toneMappingExposure=ue?le:1}render(ee,ne){if(ne!=null){this.arRenderer.onWebXRFrame(ee,ne);return}const ae=ee-this.lastTick;if(this.lastTick=ee,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(ae),this.renderedLastFrame=!1);const{canvas3D:ce}=this;for(const le of this.orderedScenes()){const{element:ue}=le;if(!ue.loaded||!ue.modelIsVisible&&le.renderCount>0||(this.preRender(le,ee,ae),!this.shouldRender(le)))continue;if(le.externalRenderer!=null){const me=le.getCamera();me.updateMatrix();const{matrix:ge,projectionMatrix:ve}=me,ye=ge.elements.slice(),be=le.getTarget();ye[12]+=be.x,ye[13]+=be.y,ye[14]+=be.z,le.externalRenderer.render({viewMatrix:ye,projectionMatrix:ve.elements});continue}if(!ue.modelIsVisible&&!this.multipleScenesVisible)for(const me of this.scenes)me.element.modelIsVisible&&me.queueRender();const{width:he,height:fe}=this.sceneSize(le);le.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-fe,he,fe),this.threeRenderer.render(le,le.camera),this.multipleScenesVisible||!le.element.modelIsVisible&&le.renderCount===0?this.copyPixels(le,he,fe):ce.parentElement!==le.canvas.parentElement&&(le.canvas.parentElement.appendChild(ce),le.canvas.classList.remove("show")),le.hasRendered(),++le.renderCount,this.renderedLastFrame=!0}}dispose(){this.textureUtils!=null&&this.textureUtils.dispose(),this.threeRenderer!=null&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const ee=[];for(const ne of this.scenes)ee.push(ne.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),ee}}Renderer._singleton=new Renderer({powerPreference:(self.ModelViewerElement||{}).powerPreference||DEFAULT_POWER_PREFERENCE,debug:isDebugMode()});/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $correlatedObjects=Symbol("correlatedObjects"),$sourceObject=Symbol("sourceObject"),$onUpdate$1=Symbol("onUpdate");class ThreeDOMElement{constructor(ee,ne,ae=null){this[$onUpdate$1]=ee,this[$sourceObject]=ne,this[$correlatedObjects]=ae}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const quadMaterial=new MeshBasicMaterial,quad=new PlaneGeometry(2,2);let adhocNum=0;const $threeTexture=Symbol("threeTexture");let Image$1=class extends ThreeDOMElement{get[$threeTexture](){var ee;return console.assert(this[$correlatedObjects]!=null&&this[$correlatedObjects].size>0,"Image correlated object is undefined"),(ee=this[$correlatedObjects])===null||ee===void 0?void 0:ee.values().next().value}constructor(ee,ne,ae){ae=ae??{name:ne&&ne.image&&ne.image.src?ne.image.src.split("/").pop():"adhoc_image",uri:ne&&ne.image&&ne.image.src?ne.image.src:"adhoc_image"+adhocNum++},super(ee,ae,new Set(ne?[ne]:[]))}get name(){return this[$sourceObject].name||""}get uri(){return this[$sourceObject].uri}get bufferView(){return this[$sourceObject].bufferView}get element(){const ee=this[$threeTexture];if(ee&&(ee.isCanvasTexture||ee.isVideoTexture))return ee.image}get animation(){const ee=this[$threeTexture];if(ee&&ee.isCanvasTexture&&ee.animation)return ee.animation}get type(){return this.uri!=null?"external":"embedded"}set name(ee){this[$sourceObject].name=ee}update(){const ee=this[$threeTexture];ee&&ee.isCanvasTexture&&!ee.animation&&(this[$threeTexture].needsUpdate=!0,this[$onUpdate$1]())}async createThumbnail(ee,ne){const ae=new Scene;quadMaterial.map=this[$threeTexture];const ce=new Mesh(quad,quadMaterial);ae.add(ce);const le=new OrthographicCamera(-1,1,1,-1,0,1),{threeRenderer:ue}=Renderer.singleton,he=new WebGLRenderTarget(ee,ne);ue.setRenderTarget(he),ue.render(ae,le),ue.setRenderTarget(null);const fe=new Uint8Array(ee*ne*4);ue.readRenderTargetPixels(he,0,0,ee,ne,fe),blobCanvas.width=ee,blobCanvas.height=ne;const me=blobCanvas.getContext("2d"),ge=me.createImageData(ee,ne);return ge.data.set(fe),me.putImageData(ge,0,0),new Promise(async(ve,ye)=>{blobCanvas.toBlob(be=>{if(!be)return ye("Failed to capture thumbnail.");ve(URL.createObjectURL(be))},"image/png")})}};var Filter$1;(function(re){re[re.Nearest=9728]="Nearest",re[re.Linear=9729]="Linear",re[re.NearestMipmapNearest=9984]="NearestMipmapNearest",re[re.LinearMipmapNearest=9985]="LinearMipmapNearest",re[re.NearestMipmapLinear=9986]="NearestMipmapLinear",re[re.LinearMipmapLinear=9987]="LinearMipmapLinear"})(Filter$1||(Filter$1={}));var Wrap;(function(re){re[re.ClampToEdge=33071]="ClampToEdge",re[re.MirroredRepeat=33648]="MirroredRepeat",re[re.Repeat=10497]="Repeat"})(Wrap||(Wrap={}));/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const isMinFilter=(()=>{const re=[Filter$1.Nearest,Filter$1.Linear,Filter$1.NearestMipmapNearest,Filter$1.LinearMipmapLinear,Filter$1.NearestMipmapLinear,Filter$1.LinearMipmapLinear];return ee=>re.indexOf(ee)>-1})(),isMagFilter=(()=>{const re=[Filter$1.Nearest,Filter$1.Linear];return ee=>re.indexOf(ee)>-1})(),isWrapMode=(()=>{const re=[Wrap.ClampToEdge,Wrap.MirroredRepeat,Wrap.Repeat];return ee=>re.indexOf(ee)>-1})(),isValidSamplerValue=(re,ee)=>{switch(re){case"minFilter":return isMinFilter(ee);case"magFilter":return isMagFilter(ee);case"wrapS":case"wrapT":return isWrapMode(ee);default:throw new Error(`Cannot configure property "${re}" on Sampler`)}},$threeTextures=Symbol("threeTextures"),$setProperty=Symbol("setProperty"),$sourceSampler=Symbol("sourceSampler");let Sampler$1=class extends ThreeDOMElement{get[$threeTextures](){return console.assert(this[$correlatedObjects]!=null&&this[$correlatedObjects].size>0,"Sampler correlated object is undefined"),this[$correlatedObjects]}get[$sourceSampler](){return console.assert(this[$sourceObject]!=null,"Sampler source is undefined"),this[$sourceObject]}constructor(ee,ne,ae){ae=ae??{},ae.minFilter==null&&(ae.minFilter=ne?ne.minFilter:Filter$1.LinearMipmapLinear),ae.magFilter==null&&(ae.magFilter=ne?ne.magFilter:Filter$1.Linear),ae.wrapS==null&&(ae.wrapS=ne?ne.wrapS:Wrap.Repeat),ae.wrapT==null&&(ae.wrapT=ne?ne.wrapT:Wrap.Repeat),super(ee,ae,new Set(ne?[ne]:[]))}get name(){return this[$sourceObject].name||""}get minFilter(){return this[$sourceSampler].minFilter}get magFilter(){return this[$sourceSampler].magFilter}get wrapS(){return this[$sourceSampler].wrapS}get wrapT(){return this[$sourceSampler].wrapT}setMinFilter(ee){this[$setProperty]("minFilter",ee)}setMagFilter(ee){this[$setProperty]("magFilter",ee)}setWrapS(ee){this[$setProperty]("wrapS",ee)}setWrapT(ee){this[$setProperty]("wrapT",ee)}[$setProperty](ee,ne){const ae=this[$sourceSampler];if(ae!=null){if(isValidSamplerValue(ee,ne)){ae[ee]=ne;for(const ce of this[$threeTextures])ce[ee]=ne,ce.needsUpdate=!0}this[$onUpdate$1]()}}};/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $image=Symbol("image"),$sampler=Symbol("sampler");class Texture extends ThreeDOMElement{constructor(ee,ne,ae=null,ce=null,le=null){super(ee,ae||{},new Set(ne?[ne]:[])),this[$sampler]=new Sampler$1(ee,ne,ce),this[$image]=new Image$1(ee,ne,le)}get name(){return this[$sourceObject].name||""}set name(ee){this[$sourceObject].name=ee}get sampler(){return this[$sampler]}get source(){return this[$image]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$5,_b$4,_c$2;const $texture=Symbol("texture"),$transform=Symbol("transform"),$materials$1=Symbol("materials"),$usage=Symbol("usage"),$onUpdate=Symbol("onUpdate"),$activeVideo=Symbol("activeVideo");var TextureUsage$1;(function(re){re[re.Base=0]="Base",re[re.MetallicRoughness=1]="MetallicRoughness",re[re.Normal=2]="Normal",re[re.Occlusion=3]="Occlusion",re[re.Emissive=4]="Emissive"})(TextureUsage$1||(TextureUsage$1={}));class TextureInfo{constructor(ee,ne,ae,ce,le,ue){if(this[_a$5]=null,this[_b$4]={rotation:0,scale:new Vector2(1,1),offset:new Vector2(0,0)},this[_c$2]=!1,ue&&ae){const he=le.textures?le.textures[ue.index]:null,fe=he&&le.samplers?le.samplers[he.sampler]:null,me=he&&le.images?le.images[he.source]:null;this[$transform].rotation=ae.rotation,this[$transform].scale.copy(ae.repeat),this[$transform].offset.copy(ae.offset),this[$texture]=new Texture(ee,ae,he,fe,me)}this[$onUpdate]=ee,this[$materials$1]=ce,this[$usage]=ne}get texture(){return this[$texture]}setTexture(ee){var ne,ae;const ce=ee!=null?ee.source[$threeTexture]:null,le=(ne=this[$texture])===null||ne===void 0?void 0:ne.source[$threeTexture];if(le!=null&&le.isVideoTexture?this[$activeVideo]=!1:!((ae=this[$texture])===null||ae===void 0)&&ae.source.animation&&this[$texture].source.animation.removeEventListener("enterFrame",this[$onUpdate]),this[$texture]=ee,ce!=null&&ce.isVideoTexture){const he=ce.image;if(this[$activeVideo]=!0,he.requestVideoFrameCallback!=null){const fe=()=>{this[$activeVideo]&&(this[$onUpdate](),he.requestVideoFrameCallback(fe))};he.requestVideoFrameCallback(fe)}else{const fe=()=>{this[$activeVideo]&&(this[$onUpdate](),requestAnimationFrame(fe))};requestAnimationFrame(fe)}}else(ee==null?void 0:ee.source.animation)!=null&&ee.source.animation.addEventListener("enterFrame",this[$onUpdate]);let ue=sRGBEncoding;if(this[$materials$1])for(const he of this[$materials$1]){switch(this[$usage]){case TextureUsage$1.Base:he.map=ce;break;case TextureUsage$1.MetallicRoughness:ue=LinearEncoding,he.metalnessMap=ce,he.roughnessMap=ce;break;case TextureUsage$1.Normal:ue=LinearEncoding,he.normalMap=ce;break;case TextureUsage$1.Occlusion:ue=LinearEncoding,he.aoMap=ce;break;case TextureUsage$1.Emissive:he.emissiveMap=ce;break}he.needsUpdate=!0}ce&&(ce.encoding=ue,ce.rotation=this[$transform].rotation,ce.repeat=this[$transform].scale,ce.offset=this[$transform].offset),this[$onUpdate]()}}_a$5=$texture,_b$4=$transform,_c$2=$activeVideo;/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $threeMaterials=Symbol("threeMaterials"),$baseColorTexture=Symbol("baseColorTexture"),$metallicRoughnessTexture=Symbol("metallicRoughnessTexture");class PBRMetallicRoughness extends ThreeDOMElement{constructor(ee,ne,ae,ce){super(ee,ae,ce),ae.baseColorFactor==null&&(ae.baseColorFactor=[1,1,1,1]),ae.roughnessFactor==null&&(ae.roughnessFactor=1),ae.metallicFactor==null&&(ae.metallicFactor=1);const{baseColorTexture:le,metallicRoughnessTexture:ue}=ae,{map:he,metalnessMap:fe}=ce.values().next().value;this[$baseColorTexture]=new TextureInfo(ee,TextureUsage$1.Base,he,ce,ne,le||null),this[$metallicRoughnessTexture]=new TextureInfo(ee,TextureUsage$1.MetallicRoughness,fe,ce,ne,ue||null)}get[$threeMaterials](){return this[$correlatedObjects]}get baseColorFactor(){return this[$sourceObject].baseColorFactor}get metallicFactor(){return this[$sourceObject].metallicFactor}get roughnessFactor(){return this[$sourceObject].roughnessFactor}get baseColorTexture(){return this[$baseColorTexture]}get metallicRoughnessTexture(){return this[$metallicRoughnessTexture]}setBaseColorFactor(ee){const ne=new Color;ee instanceof Array?ne.fromArray(ee):ne.set(ee).convertSRGBToLinear();for(const ce of this[$threeMaterials])ce.color.set(ne),ee instanceof Array?ce.opacity=ee[3]:(ee=[0,0,0,ce.opacity],ne.toArray(ee));const ae=this[$sourceObject];ae.baseColorFactor=ee,this[$onUpdate$1]()}setMetallicFactor(ee){for(const ae of this[$threeMaterials])ae.metalness=ee;const ne=this[$sourceObject];ne.metallicFactor=ee,this[$onUpdate$1]()}setRoughnessFactor(ee){for(const ae of this[$threeMaterials])ae.roughness=ee;const ne=this[$sourceObject];ne.roughnessFactor=ee,this[$onUpdate$1]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$4;const $pbrMetallicRoughness=Symbol("pbrMetallicRoughness"),$normalTexture=Symbol("normalTexture"),$occlusionTexture=Symbol("occlusionTexture"),$emissiveTexture=Symbol("emissiveTexture"),$backingThreeMaterial=Symbol("backingThreeMaterial"),$applyAlphaCutoff=Symbol("applyAlphaCutoff"),$lazyLoadGLTFInfo=Symbol("lazyLoadGLTFInfo"),$initialize=Symbol("initialize"),$getLoadedMaterial=Symbol("getLoadedMaterial"),$ensureMaterialIsLoaded=Symbol("ensureMaterialIsLoaded"),$gltfIndex=Symbol("gltfIndex"),$setActive=Symbol("setActive"),$variantIndices=Symbol("variantIndices"),$isActive=Symbol("isActive"),$variantSet=Symbol("variantSet"),$modelVariants=Symbol("modelVariants");class Material extends ThreeDOMElement{constructor(ee,ne,ae,ce,le,ue,he,fe=void 0){super(ee,ae,he),this[_a$4]=new Set,this[$gltfIndex]=ce,this[$isActive]=le,this[$modelVariants]=ue,fe==null?this[$initialize](ne):this[$lazyLoadGLTFInfo]=fe}get[(_a$4=$variantSet,$backingThreeMaterial)](){return this[$correlatedObjects].values().next().value}[$initialize](ee){const ne=this[$onUpdate$1],ae=this[$sourceObject],ce=this[$correlatedObjects];ae.extensions&&ae.extensions.KHR_materials_pbrSpecularGlossiness&&console.warn(`Material ${ae.name} uses a deprecated extension
          "KHR_materials_pbrSpecularGlossiness", please use
          "pbrMetallicRoughness" instead. Specular Glossiness materials are
          no longer supported; to convert to metal-rough, see 
          https://www.donmccurdy.com/2022/11/28/converting-gltf-pbr-materials-from-specgloss-to-metalrough/.`),ae.pbrMetallicRoughness==null&&(ae.pbrMetallicRoughness={}),this[$pbrMetallicRoughness]=new PBRMetallicRoughness(ne,ee,ae.pbrMetallicRoughness,ce),ae.emissiveFactor==null&&(ae.emissiveFactor=[0,0,0]),ae.doubleSided==null&&(ae.doubleSided=!1),ae.alphaMode==null&&(ae.alphaMode="OPAQUE"),ae.alphaCutoff==null&&(ae.alphaCutoff=.5);const{normalTexture:le,occlusionTexture:ue,emissiveTexture:he}=ae,{normalMap:fe,aoMap:me,emissiveMap:ge}=ce.values().next().value;this[$normalTexture]=new TextureInfo(ne,TextureUsage$1.Normal,fe,ce,ee,le||null),this[$occlusionTexture]=new TextureInfo(ne,TextureUsage$1.Occlusion,me,ce,ee,ue||null),this[$emissiveTexture]=new TextureInfo(ne,TextureUsage$1.Emissive,ge,ce,ee,he||null)}async[$getLoadedMaterial](){if(this[$lazyLoadGLTFInfo]!=null){const{set:ee,material:ne}=await this[$lazyLoadGLTFInfo].doLazyLoad();return this[$correlatedObjects]=ee,this[$initialize](this[$lazyLoadGLTFInfo].gltf),this[$lazyLoadGLTFInfo]=void 0,this.ensureLoaded=async()=>{},ne}return this[$correlatedObjects].values().next().value}[$ensureMaterialIsLoaded](){if(this[$lazyLoadGLTFInfo]!=null)throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[$getLoadedMaterial]()}get isLoaded(){return this[$lazyLoadGLTFInfo]==null}get isActive(){return this[$isActive]}[$setActive](ee){this[$isActive]=ee}get name(){return this[$sourceObject].name}set name(ee){const ne=this[$sourceObject];if(ne!=null&&(ne.name=ee),this[$correlatedObjects]!=null)for(const ae of this[$correlatedObjects])ae.name=ee}get pbrMetallicRoughness(){return this[$ensureMaterialIsLoaded](),this[$pbrMetallicRoughness]}get normalTexture(){return this[$ensureMaterialIsLoaded](),this[$normalTexture]}get occlusionTexture(){return this[$ensureMaterialIsLoaded](),this[$occlusionTexture]}get emissiveTexture(){return this[$ensureMaterialIsLoaded](),this[$emissiveTexture]}get emissiveFactor(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].emissiveFactor}get index(){return this[$gltfIndex]}[$variantIndices](){return this[$variantSet]}hasVariant(ee){const ne=this[$modelVariants].get(ee);return ne!=null&&this[$variantSet].has(ne.index)}setEmissiveFactor(ee){this[$ensureMaterialIsLoaded]();const ne=new Color;ee instanceof Array?ne.fromArray(ee):ne.set(ee).convertSRGBToLinear();for(const ae of this[$correlatedObjects])ae.emissive.set(ne);this[$sourceObject].emissiveFactor=ne.toArray(),this[$onUpdate$1]()}[$applyAlphaCutoff](){this[$ensureMaterialIsLoaded]();const ee=this[$sourceObject];for(const ne of this[$correlatedObjects])this[$sourceObject].alphaMode==="MASK"?ne.alphaTest=ee.alphaCutoff:ne.alphaTest=void 0,ne.needsUpdate=!0}setAlphaCutoff(ee){this[$ensureMaterialIsLoaded](),this[$sourceObject].alphaCutoff=ee,this[$applyAlphaCutoff](),this[$onUpdate$1]()}getAlphaCutoff(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].alphaCutoff}setDoubleSided(ee){this[$ensureMaterialIsLoaded]();for(const ne of this[$correlatedObjects])ne.side=ee?DoubleSide:FrontSide,ne.needsUpdate=!0;this[$sourceObject].doubleSided=ee,this[$onUpdate$1]()}getDoubleSided(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].doubleSided}setAlphaMode(ee){this[$ensureMaterialIsLoaded]();const ne=(ae,ce)=>{ae.transparent=ce,ae.depthWrite=!ce};this[$sourceObject].alphaMode=ee;for(const ae of this[$correlatedObjects])ne(ae,ee==="BLEND"),this[$applyAlphaCutoff](),ae.needsUpdate=!0;this[$onUpdate$1]()}getAlphaMode(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].alphaMode}}let Node$2=class{constructor(ee){this.name="",this.children=new Array,this.name=ee}};class PrimitiveNode extends Node$2{constructor(ee,ne,ae,ce){super(ee.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=ee;const{gltf:le,threeGLTF:ue,threeObjectMap:he}=ce;this.modelVariants=ae,this.mesh.userData.variantData=ae;const fe=he.get(ee.material);fe.materials!=null?this.initialMaterialIdx=this.activeMaterialIdx=fe.materials:console.error(`Primitive (${ee.name}) missing initial material reference.`);const me=ee.userData.associations||{};if(me.meshes==null){console.error("Mesh is missing primitive index association");return}const ye=((le.meshes||[])[me.meshes].primitives||[])[me.primitives];if(ye==null){console.error("Mesh primitive definition is missing.");return}if(ye.material!=null)this.materials.set(ye.material,ne[ye.material]);else{const be=ne.findIndex(Ee=>Ee.name==="Default");be>=0?this.materials.set(be,ne[be]):console.warn("gltfPrimitive has no material!")}if(ye.extensions&&ye.extensions.KHR_materials_variants){const be=ye.extensions.KHR_materials_variants,Ce=ue.parser.json.extensions.KHR_materials_variants.variants;for(const Se of be.mappings){const Te=ne[Se.material];this.materials.set(Se.material,Te);for(const ke of Se.variants){const{name:Ne}=Ce[ke];this.variantToMaterialMap.set(ke,Te),Te[$variantIndices]().add(ke),ae.has(Ne)||ae.set(Ne,{name:Ne,index:ke})}}}}async setActiveMaterial(ee){const ne=this.materials.get(ee);return ne!=null&&(this.mesh.material=await ne[$getLoadedMaterial](),this.activeMaterialIdx=ee),this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(ee){return this.materials.get(ee)}async enableVariant(ee){if(ee==null)return this.setActiveMaterial(this.initialMaterialIdx);if(this.variantToMaterialMap!=null&&this.modelVariants.has(ee)){const ne=this.modelVariants.get(ee);return this.enableVariantHelper(ne.index)}return null}async enableVariantHelper(ee){if(this.variantToMaterialMap!=null&&ee!=null){const ne=this.variantToMaterialMap.get(ee);if(ne!=null)return this.setActiveMaterial(ne.index)}return null}async instantiateVariants(){if(this.variantToMaterialMap!=null)for(const ee of this.variantToMaterialMap.keys()){const ne=this.mesh.userData.variantMaterials.get(ee);if(ne.material!=null)continue;const ae=await this.enableVariantHelper(ee);ae!=null&&(ne.material=ae)}}get variantInfo(){return this.variantToMaterialMap}addVariant(ee,ne){if(!this.ensureVariantIsUnused(ne))return!1;this.modelVariants.has(ne)||this.modelVariants.set(ne,{name:ne,index:this.modelVariants.size});const ce=this.modelVariants.get(ne).index;return ee[$variantIndices]().add(ce),this.variantToMaterialMap.set(ce,ee),this.materials.set(ee.index,ee),this.updateVariantUserData(ce,ee),!0}deleteVariant(ee){if(this.variantInfo.has(ee)){this.variantInfo.delete(ee);const ne=this.mesh.userData.variantMaterials;ne!=null&&ne.delete(ee)}}updateVariantUserData(ee,ne){ne[$variantIndices]().add(ee),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(ee,{material:ne[$correlatedObjects].values().next().value,gltfMaterialIndex:ne.index})}ensureVariantIsUnused(ee){const ne=this.modelVariants.get(ee);return ne!=null&&this.variantInfo.has(ne.index)?(console.warn(`Primitive cannot add variant '${ee}' for this material, it already exists.`),!1):!0}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$3,_b$3,_c$1,_d$1,_e$1,_f$1;const $materials=Symbol("materials"),$hierarchy=Symbol("hierarchy"),$roots=Symbol("roots"),$primitivesList=Symbol("primitives"),$correlatedSceneGraph=Symbol("correlatedSceneGraph"),$prepareVariantsForExport=Symbol("prepareVariantsForExport"),$switchVariant=Symbol("switchVariant"),$materialFromPoint=Symbol("materialFromPoint"),$nodeFromPoint=Symbol("nodeFromPoint"),$nodeFromIndex=Symbol("nodeFromIndex"),$variantData=Symbol("variantData"),$availableVariants=Symbol("availableVariants"),$modelOnUpdate=Symbol("modelOnUpdate"),$cloneMaterial=Symbol("cloneMaterial");class LazyLoader{constructor(ee,ne,ae,ce){this.gltf=ee,this.gltfElementMap=ne,this.mapKey=ae,this.doLazyLoad=ce}}class Model{constructor(ee,ne=()=>{}){this[_a$3]=new Array,this[_b$3]=new Array,this[_c$1]=new Array,this[_d$1]=new Array,this[_e$1]=()=>{},this[_f$1]=new Map,this[$modelOnUpdate]=ne,this[$correlatedSceneGraph]=ee;const{gltf:ae,threeGLTF:ce,gltfElementMap:le}=ee;for(const[fe,me]of ae.materials.entries()){const ge=le.get(me);if(ge!=null)this[$materials].push(new Material(ne,ae,me,fe,!0,this[$variantData],ge));else{const ye=(ae.materials||[])[fe],be=fe,Ee=async()=>{const Ce=await ce.parser.getDependency("material",be),Se=new Set;return le.set(ye,Se),Se.add(Ce),{set:Se,material:Ce}};this[$materials].push(new Material(ne,ae,ye,fe,!1,this[$variantData],ge,new LazyLoader(ae,le,ye,Ee)))}}const ue=new Map,he=new Array;for(const fe of ce.scene.children)he.push(fe);for(;he.length>0;){const fe=he.pop();let me=null;fe instanceof Mesh?(me=new PrimitiveNode(fe,this.materials,this[$variantData],ee),this[$primitivesList].push(me)):me=new Node$2(fe.name);const ge=ue.get(fe);ge!=null?ge.children.push(me):this[$roots].push(me),this[$hierarchy].push(me);for(const ve of fe.children)he.push(ve),ue.set(fe,me)}}get materials(){return this[$materials]}[(_a$3=$materials,_b$3=$hierarchy,_c$1=$roots,_d$1=$primitivesList,_e$1=$modelOnUpdate,_f$1=$variantData,$availableVariants)](){const ee=Array.from(this[$variantData].values());return ee.sort((ne,ae)=>ne.index-ae.index),ee.map(ne=>ne.name)}getMaterialByName(ee){const ne=this[$materials].filter(ae=>ae.name===ee);return ne.length>0?ne[0]:null}[$nodeFromIndex](ee,ne){const ae=this[$hierarchy].find(ce=>{if(ce instanceof PrimitiveNode){const{meshes:le,primitives:ue}=ce.mesh.userData.associations;if(le==ee&&ue==ne)return!0}return!1});return ae??null}[$nodeFromPoint](ee){return this[$hierarchy].find(ne=>ne instanceof PrimitiveNode&&ne.mesh===ee.object)}[$materialFromPoint](ee){return this[$nodeFromPoint](ee).getActiveMaterial()}async[$switchVariant](ee){for(const ne of this[$primitivesList])await ne.enableVariant(ee);for(const ne of this.materials)ne[$setActive](!1);for(const ne of this[$primitivesList])this.materials[ne.getActiveMaterial().index][$setActive](!0)}async[$prepareVariantsForExport](){const ee=new Array;for(const ne of this[$primitivesList])ee.push(ne.instantiateVariants());await Promise.all(ee)}[$cloneMaterial](ee,ne){const ae=this.materials[ee];ae.isLoaded||console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);const ce=ae[$correlatedObjects],le=JSON.parse(JSON.stringify(ae[$sourceObject]));le.name=ne,this[$correlatedSceneGraph].gltf.materials.push(le);const he=new Set;for(const[me,ge]of ce.entries()){const ve=ge.clone();ve.name=ne+(ce.size>1?"_inst"+me:""),he.add(ve)}const fe=new Material(this[$modelOnUpdate],this[$correlatedSceneGraph].gltf,le,this[$materials].length,!1,this[$variantData],he);return this[$materials].push(fe),fe}createMaterialInstanceForVariant(ee,ne,ae,ce=!0){let le=null;for(const ue of this[$primitivesList]){const he=this[$variantData].get(ae);he!=null&&ue.variantInfo.has(he.index)||ue.getMaterial(ee)!=null&&(this.hasVariant(ae)||this.createVariant(ae),le==null&&(le=this[$cloneMaterial](ee,ne)),ue.addVariant(le,ae))}if(ce&&le!=null){le[$setActive](!0),this.materials[ee][$setActive](!1);for(const ue of this[$primitivesList])ue.enableVariant(ae)}return le}createVariant(ee){this[$variantData].has(ee)?console.warn(`Variant '${ee}'' already exists`):this[$variantData].set(ee,{name:ee,index:this[$variantData].size})}hasVariant(ee){return this[$variantData].has(ee)}setMaterialToVariant(ee,ne){if(this[$availableVariants]().find(ae=>ae===ne)==null){console.warn(`Can't add material to '${ne}', the variant does not exist.'`);return}if(ee<0||ee>=this.materials.length){console.error("setMaterialToVariant(): materialIndex is out of bounds.");return}for(const ae of this[$primitivesList]){const ce=ae.getMaterial(ee);ce!=null&&ae.addVariant(ce,ne)}}updateVariantName(ee,ne){const ae=this[$variantData].get(ee);ae!=null&&(ae.name=ne,this[$variantData].set(ne,ae),this[$variantData].delete(ee))}deleteVariant(ee){const ne=this[$variantData].get(ee);if(ne!=null){for(const ae of this.materials)ae.hasVariant(ee)&&ae[$variantSet].delete(ne.index);for(const ae of this[$primitivesList])ae.deleteVariant(ne.index);this[$variantData].delete(ee)}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$5=globalThis&&globalThis.__decorate||function(re,ee,ne,ae){var ce=arguments.length,le=ce<3?ee:ae===null?ae=Object.getOwnPropertyDescriptor(ee,ne):ae,ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")le=Reflect.decorate(re,ee,ne,ae);else for(var he=re.length-1;he>=0;he--)(ue=re[he])&&(le=(ce<3?ue(le):ce>3?ue(ee,ne,le):ue(ee,ne))||le);return ce>3&&le&&Object.defineProperty(ee,ne,le),le};const $currentGLTF=Symbol("currentGLTF"),$originalGltfJson=Symbol("originalGltfJson"),$model=Symbol("model"),$getOnUpdateMethod=Symbol("getOnUpdateMethod"),$buildTexture=Symbol("buildTexture"),SceneGraphMixin=re=>{var ee,ne,ae;class ce extends re{constructor(){super(...arguments),this[ee]=void 0,this[ne]=null,this[ae]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[$model]}get availableVariants(){return this.model?this.model[$availableVariants]():[]}get originalGltfJson(){return this[$originalGltfJson]}[(ee=$model,ne=$currentGLTF,ae=$originalGltfJson,$getOnUpdateMethod)](){return()=>{this[$needsRender]()}}[$buildTexture](ue){return ue.encoding=sRGBEncoding,ue.wrapS=RepeatWrapping,ue.wrapT=RepeatWrapping,new Texture(this[$getOnUpdateMethod](),ue)}async createTexture(ue,he="image/png"){const{textureUtils:fe}=this[$renderer],me=await fe.loadImage(ue);return me.userData.mimeType=he,this[$buildTexture](me)}async createLottieTexture(ue,he=1){const{textureUtils:fe}=this[$renderer],me=await fe.loadLottie(ue,he);return this[$buildTexture](me)}createVideoTexture(ue){const he=document.createElement("video");he.src=ue,he.muted=!0,he.play(),he.loop=!0;const fe=new VideoTexture(he);return this[$buildTexture](fe)}createCanvasTexture(){const ue=document.createElement("canvas"),he=new CanvasTexture(ue);return this[$buildTexture](he)}async updated(ue){if(super.updated(ue),ue.has("variantName")){const he=this[$progressTracker].beginActivity();he(.1);const fe=this[$model],{variantName:me}=this;fe!=null&&(await fe[$switchVariant](me),this[$needsRender](),this.dispatchEvent(new CustomEvent("variant-applied"))),he(1)}if(ue.has("orientation")||ue.has("scale")){if(!this.loaded)return;const he=this[$scene];he.applyTransform(),he.updateBoundingBox(),he.updateShadow(),this[$renderer].arRenderer.onUpdateScene(),this[$needsRender]()}}[$onModelLoad](){super[$onModelLoad]();const{currentGLTF:ue}=this[$scene];if(ue!=null){const{correlatedSceneGraph:he}=ue;he!=null&&ue!==this[$currentGLTF]&&(this[$model]=new Model(he,this[$getOnUpdateMethod]()),this[$originalGltfJson]=JSON.parse(JSON.stringify(he.gltf))),"variants"in ue.userData&&this.requestUpdate("variantName")}this[$currentGLTF]=ue}async exportScene(ue){const he=this[$scene];return new Promise(async(fe,me)=>{const ge={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(ge,ue),ge.animations=he.animations,ge.truncateDrawRange=!0;const ve=he.shadow;let ye=!1;ve!=null&&(ye=ve.visible,ve.visible=!1),await this[$model][$prepareVariantsForExport](),new GLTFExporter().register(Ee=>new GLTFExporterMaterialsVariantsExtension(Ee)).parse(he.model,Ee=>fe(new Blob([ge.binary?Ee:JSON.stringify(Ee)],{type:ge.binary?"application/octet-stream":"application/json"})),()=>me("glTF export failed"),ge),ve!=null&&(ve.visible=ye)})}materialFromPoint(ue,he){const fe=this[$model];if(fe==null)return null;const me=this[$scene],ge=me.getNDC(ue,he),ve=me.hitFromPoint(ge);return ve==null||ve.face==null?null:fe[$materialFromPoint](ve)}}return __decorate$5([e$4({type:String,attribute:"variant-name"})],ce.prototype,"variantName",void 0),__decorate$5([e$4({type:String,attribute:"orientation"})],ce.prototype,"orientation",void 0),__decorate$5([e$4({type:String,attribute:"scale"})],ce.prototype,"scale",void 0),ce};/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a=new Vector3,b$1=new Vector3,c$2=new Vector3,mat=new Matrix3,triangle=new Triangle,quat=new Quaternion;class Hotspot extends CSS2DObject{constructor(ee){super(document.createElement("div")),this.normal=new Vector3(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=ee.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(ee.position),this.updateNormal(ee.normal),this.surface=ee.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){(!this.facingCamera||!this.initialized)&&this.updateVisibility(!0)}hide(){(this.facingCamera||!this.initialized)&&this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,this.referenceCount===0}updatePosition(ee){if(ee==null)return;const ne=parseExpressions(ee)[0].terms;for(let ae=0;ae<3;++ae)this.position.setComponent(ae,normalizeUnit(ne[ae]).number);this.updateMatrixWorld()}updateNormal(ee){if(ee==null)return;const ne=parseExpressions(ee)[0].terms;for(let ae=0;ae<3;++ae)this.normal.setComponent(ae,ne[ae].number)}updateSurface(ee){if(!ee&&this.initialized)return;const{mesh:ne,tri:ae,bary:ce}=this;if(ne==null||ae==null||ce==null)return;ne.getVertexPosition(ae.x,a),ne.getVertexPosition(ae.y,b$1),ne.getVertexPosition(ae.z,c$2),a.toArray(mat.elements,0),b$1.toArray(mat.elements,3),c$2.toArray(mat.elements,6),this.position.copy(ce).applyMatrix3(mat);const le=this.parent;le.worldToLocal(ne.localToWorld(this.position)),triangle.set(a,b$1,c$2),triangle.getNormal(this.normal).transformDirection(ne.matrixWorld);const ue=le.parent;quat.setFromAxisAngle(a.set(0,1,0),-ue.yaw),this.normal.applyQuaternion(quat)}orient(ee){this.pivot.style.transform=`rotate(${ee}rad)`}updateVisibility(ee){ee?this.element.classList.remove("hide"):this.element.classList.add("hide"),this.slot.assignedNodes().forEach(ne=>{if(ne.nodeType!==Node.ELEMENT_NODE)return;const ae=ne,ce=ae.dataset.visibilityAttribute;if(ce!=null){const le=`data-${ce}`;ee?ae.setAttribute(le,""):ae.removeAttribute(le)}ae.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:ee}}))}),this.initialized=!0}}const HorizontalBlurShader={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},VerticalBlurShader={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};function lerp(re,ee,ne){return(1-ne)*re+ne*ee}/* @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LOG_MAX_RESOLUTION=9,LOG_MIN_RESOLUTION=6,ANIMATION_SCALING=2,DEFAULT_HARD_INTENSITY=.3;class Shadow extends Object3D{constructor(ee,ne,ae){super(),this.camera=new OrthographicCamera,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new MeshDepthMaterial,this.horizontalBlurMaterial=new ShaderMaterial(HorizontalBlurShader),this.verticalBlurMaterial=new ShaderMaterial(VerticalBlurShader),this.intensity=0,this.softness=1,this.boundingBox=new Box3,this.size=new Vector3,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:ce}=this;ce.rotation.x=Math.PI/2,ce.left=-.5,ce.right=.5,ce.bottom=-.5,ce.top=.5,this.add(ce);const le=new PlaneGeometry,ue=new MeshBasicMaterial({opacity:1,transparent:!0,side:BackSide});this.floor=new Mesh(le,ue),this.floor.userData.shadow=!0,ce.add(this.floor),this.blurPlane=new Mesh(le),this.blurPlane.visible=!1,ce.add(this.blurPlane),ee.target.add(this),this.depthMaterial.onBeforeCompile=function(he){he.fragmentShader=he.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(ee,ne,ae)}setScene(ee,ne,ae){const{boundingBox:ce,size:le,rotation:ue,position:he}=this;if(this.isAnimated=ee.animationNames.length>0,this.boundingBox.copy(ee.boundingBox),this.size.copy(ee.size),this.maxDimension=Math.max(le.x,le.y,le.z)*(this.isAnimated?ANIMATION_SCALING:1),this.boundingBox.getCenter(he),ae==="back"){const{min:fe,max:me}=ce;[fe.y,fe.z]=[fe.z,fe.y],[me.y,me.z]=[me.z,me.y],[le.y,le.z]=[le.z,le.y],ue.x=Math.PI/2,ue.y=Math.PI}else ue.x=0,ue.y=0;if(this.isAnimated){const fe=ce.min.y,me=ce.max.y;le.y=this.maxDimension,ce.expandByVector(le.subScalar(this.maxDimension).multiplyScalar(-.5)),ce.min.y=fe,ce.max.y=me,le.set(this.maxDimension,me-fe,this.maxDimension)}ae==="bottom"?he.y=ce.min.y:he.z=ce.min.y,this.setSoftness(ne)}setSoftness(ee){this.softness=ee;const{size:ne,camera:ae}=this,ce=this.isAnimated?ANIMATION_SCALING:1,le=ce*Math.pow(2,LOG_MAX_RESOLUTION-ee*(LOG_MAX_RESOLUTION-LOG_MIN_RESOLUTION));this.setMapSize(le);const ue=ne.y/2,he=ne.y*ce;ae.near=0,ae.far=lerp(he,ue,ee),this.depthMaterial.opacity=1/ee,ae.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(ee){const{size:ne}=this;this.isAnimated&&(ee*=ANIMATION_SCALING);const ae=Math.floor(ne.x>ne.z?ee:ee*ne.x/ne.z),ce=Math.floor(ne.x>ne.z?ee*ne.z/ne.x:ee),le=10,ue=le+ae,he=le+ce;if(this.renderTarget!=null&&(this.renderTarget.width!==ue||this.renderTarget.height!==he)&&(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),this.renderTarget==null){const fe={format:RGBAFormat};this.renderTarget=new WebGLRenderTarget(ue,he,fe),this.renderTargetBlur=new WebGLRenderTarget(ue,he,fe),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(ne.x*(1+le/ae),ne.z*(1+le/ce),1),this.needsUpdate=!0}setIntensity(ee){this.intensity=ee,ee>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=ee*lerp(DEFAULT_HARD_INTENSITY,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(ee){this.floor.position.z=-ee+.001*this.maxDimension}render(ee,ne){ne.overrideMaterial=this.depthMaterial;const ae=ee.getClearAlpha();ee.setClearAlpha(0),this.floor.visible=!1;const ce=ee.xr.enabled;ee.xr.enabled=!1;const le=ee.getRenderTarget();ee.setRenderTarget(this.renderTarget),ee.render(ne,this.camera),ne.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(ee),ee.xr.enabled=ce,ee.setRenderTarget(le),ee.setClearAlpha(ae)}blurShadow(ee){const{camera:ne,horizontalBlurMaterial:ae,verticalBlurMaterial:ce,renderTarget:le,renderTargetBlur:ue,blurPlane:he}=this;he.visible=!0,he.material=ae,ae.uniforms.h.value=1/this.renderTarget.width,ae.uniforms.tDiffuse.value=this.renderTarget.texture,ee.setRenderTarget(ue),ee.render(he,ne),he.material=ce,ce.uniforms.v.value=1/this.renderTarget.height,ce.uniforms.tDiffuse.value=this.renderTargetBlur.texture,ee.setRenderTarget(le),ee.render(he,ne),he.visible=!1}dispose(){this.renderTarget!=null&&this.renderTarget.dispose(),this.renderTargetBlur!=null&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MIN_SHADOW_RATIO=100,view=new Vector3,target=new Vector3,normalWorld=new Vector3,raycaster=new Raycaster,vector3=new Vector3,ndc=new Vector2;class ModelScene extends Scene{constructor({canvas:ee,element:ne,width:ae,height:ce}){super(),this.annotationRenderer=new CSS2DRenderer,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new PerspectiveCamera(45,1,.1,100),this.xrCamera=null,this.url=null,this.target=new Object3D,this.animationNames=[],this.boundingBox=new Box3,this.boundingSphere=new Sphere,this.size=new Vector3,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.canScale=!0,this.isDirty=!1,this.goalTarget=new Vector3,this.targetDamperX=new Damper,this.targetDamperY=new Damper,this.targetDamperZ=new Damper,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.name="ModelScene",this.element=ne,this.canvas=ee,this.camera=new PerspectiveCamera(45,1,.1,100),this.camera.name="MainCamera",this.add(this.target),this.setSize(ae,ce),this.target.name="Target",this.mixer=new AnimationMixer(this.target);const{domElement:le}=this.annotationRenderer,{style:ue}=le;ue.display="none",ue.pointerEvents="none",ue.position="absolute",ue.top="0",this.element.shadowRoot.querySelector(".default").appendChild(le),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return this.xrCamera!=null?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(ee){this.reset(),this._model=ee,this.target.add(ee),await this.setupScene()}async setSource(ee,ne=()=>{}){if(!ee||ee===this.url){ne(1);return}if(this.reset(),this.url=ee,this.externalRenderer!=null){const he=await this.externalRenderer.load(ne);this.boundingSphere.radius=he.framedRadius,this.idealAspect=he.fieldOfViewAspect;return}this.cancelPendingSourceChange!=null&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);let ae;try{ae=await new Promise(async(he,fe)=>{this.cancelPendingSourceChange=()=>fe();try{const me=await this.element[$renderer].loader.load(ee,this.element,ne);he(me)}catch(me){fe(me)}})}catch(he){if(he==null)return;throw he}this.cancelPendingSourceChange=null,this.reset(),this.url=ee,this._currentGLTF=ae,ae!=null&&(this._model=ae.scene,this.target.add(ae.scene));const{animations:ce}=ae,le=new Map,ue=[];for(const he of ce)le.set(he.name,he),ue.push(he.name);this.animations=ce,this.animationsByName=le,this.animationNames=ue,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity)}reset(){this.url=null,this.renderCount=0,this.queueRender(),this.shadow!=null&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:ee}=this;ee!=null&&(ee.removeFromParent(),this._model=null);const ne=this._currentGLTF;ne!=null&&(ne.dispose(),this._currentGLTF=null),this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),this.shadow!=null&&(this.shadow.dispose(),this.shadow=null),this.element[$currentGLTF]=null,this.element[$originalGltfJson]=null,this.element[$model]=null}get currentGLTF(){return this._currentGLTF}setSize(ee,ne){if(!(this.width===ee&&this.height===ne)){if(this.width=Math.max(ee,1),this.height=Math.max(ne,1),this.annotationRenderer.setSize(ee,ne),this.aspect=this.width/this.height,this.externalRenderer!=null){const ae=resolveDpr();this.externalRenderer.resize(ee*ae,ne*ae)}this.queueRender()}}markBakedShadow(ee){ee.userData.shadow=!0,this.bakedShadows.add(ee)}unmarkBakedShadow(ee){ee.userData.shadow=!1,ee.visible=!0,this.bakedShadows.delete(ee),this.boundingBox.expandByObject(ee)}findBakedShadows(ee){const ne=new Box3;ee.traverse(ae=>{const ce=ae;if(!ce.isMesh||!ce.material.transparent)return;ne.setFromObject(ce);const ue=ne.getSize(vector3),he=Math.min(ue.x,ue.y,ue.z);Math.max(ue.x,ue.y,ue.z)<MIN_SHADOW_RATIO*he||this.markBakedShadow(ce)})}checkBakedShadows(){const{min:ee,max:ne}=this.boundingBox,ae=new Box3;this.boundingBox.getSize(this.size);for(const ce of this.bakedShadows)ae.setFromObject(ce),!(ae.min.y<ee.y+this.size.y/MIN_SHADOW_RATIO&&ae.min.x<=ee.x&&ae.max.x>=ne.x&&ae.min.z<=ee.z&&ae.max.z>=ne.z)&&(ae.min.z<ee.z+this.size.z/MIN_SHADOW_RATIO&&ae.min.x<=ee.x&&ae.max.x>=ne.x&&ae.min.y<=ee.y&&ae.max.y>=ne.y||this.unmarkBakedShadow(ce))}applyTransform(){const{model:ee}=this;if(ee==null)return;const ne=parseExpressions(this.element.orientation)[0].terms,ae=normalizeUnit(ne[0]).number,ce=normalizeUnit(ne[1]).number,le=normalizeUnit(ne[2]).number;ee.quaternion.setFromEuler(new Euler(ce,le,ae,"YXZ"));const ue=parseExpressions(this.element.scale)[0].terms;ee.scale.set(ue[0].number,ue[1].number,ue[2].number)}updateBoundingBox(){const{model:ee}=this;if(ee==null)return;this.target.remove(ee),this.findBakedShadows(ee);const ne=(ae,ce)=>ae.expandByPoint(ce);this.setBakedShadowVisibility(!1),this.boundingBox=reduceVertices(ee,ne,new Box3),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(ae=>this.unmarkBakedShadow(ae)),this.boundingBox=reduceVertices(ee,ne,new Box3)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(ee)}async updateFraming(){const{model:ee}=this;if(ee==null)return;this.target.remove(ee),this.setBakedShadowVisibility(!1);const{center:ne}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,ne.copy(this.getTarget());const ae=(le,ue)=>Math.max(le,ne.distanceToSquared(ue));this.boundingSphere.radius=Math.sqrt(reduceVertices(ee,ae,0));const ce=(le,ue)=>{ue.sub(ne);const he=Math.sqrt(ue.x*ue.x+ue.z*ue.z);return Math.max(le,he/(this.idealCameraDistance()-Math.abs(ue.y)))};this.idealAspect=reduceVertices(ee,ce,0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(ee)}setBakedShadowVisibility(ee=this.shadowIntensity<=0){for(const ne of this.bakedShadows)ne.visible=ee}idealCameraDistance(){const ee=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(ee)}adjustedFoV(ee){const ne=Math.tan(ee/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(ne)*180/Math.PI}getNDC(ee,ne){if(this.xrCamera!=null)ndc.set(ee/window.screen.width,ne/window.screen.height);else{const ae=this.element.getBoundingClientRect();ndc.set((ee-ae.x)/this.width,(ne-ae.y)/this.height)}return ndc.multiplyScalar(2).subScalar(1),ndc.y*=-1,ndc}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(ee,ne){this.element[$renderer].arRenderer.presentedScene!==this&&(this.environment=ee,this.background=ne,this.queueRender())}setTarget(ee,ne,ae){this.goalTarget.set(-ee,-ne,-ae)}setTargetDamperDecayTime(ee){this.targetDamperX.setDecayTime(ee),this.targetDamperY.setDecayTime(ee),this.targetDamperZ.setDecayTime(ee)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(SETTLING_TIME)}updateTarget(ee){const ne=this.goalTarget,ae=this.target.position;if(ne.equals(ae))return!1;{const ce=this.boundingSphere.radius/10;let{x:le,y:ue,z:he}=ae;return le=this.targetDamperX.update(le,ne.x,ee,ce),ue=this.targetDamperY.update(ue,ne.y,ee,ce),he=this.targetDamperZ.update(he,ne.z,ee,ce),this.target.position.set(le,ue,he),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(ee,ne){const{x:ae,z:ce}=this.position;this.yaw=Math.atan2(ee-ae,ne-ce)}get model(){return this._model}set yaw(ee){this.rotation.y=ee,this.queueRender()}get yaw(){return this.rotation.y}set animationTime(ee){this.mixer.setTime(ee),this.queueShadowRender()}get animationTime(){if(this.currentAnimationAction!=null){const ee=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===LoopPingPong&&(ee&1)===1?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(ee){this.mixer.timeScale=ee}get animationTimeScale(){return this.mixer.timeScale}get duration(){return this.currentAnimationAction!=null&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(ee=null,ne=0,ae=LoopRepeat,ce=1/0){if(this._currentGLTF==null)return;const{animations:le}=this;if(le==null||le.length===0){console.warn("Cannot play animation (model does not have any animations)");return}let ue=null;if(ee!=null&&(ue=this.animationsByName.get(ee),ue==null)){const he=parseInt(ee);!isNaN(he)&&he>=0&&he<le.length&&(ue=le[he])}ue==null&&(ue=le[0]);try{const{currentAnimationAction:he}=this,fe=this.mixer.clipAction(ue,this);this.currentAnimationAction=fe,this.element.paused?this.mixer.stopAllAction():(fe.paused=!1,he!=null&&fe!==he?fe.crossFadeFrom(he,ne,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),fe.setLoop(ae,ce),fe.enabled=!0,fe.clampWhenFinished=!0,fe.play()}catch(he){console.error(he)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(ee){this.mixer.update(ee),this.queueShadowRender()}subscribeMixerEvent(ee,ne){this.mixer.addEventListener(ee,ne)}updateShadow(){const ee=this.shadow;if(ee!=null){const ne=this.element.arPlacement==="wall"?"back":"bottom";ee.setScene(this,this.shadowSoftness,ne),ee.needsUpdate=!0}}renderShadow(ee){const ne=this.shadow;ne!=null&&ne.needsUpdate==!0&&(ne.render(ee,this),ne.needsUpdate=!1)}queueShadowRender(){this.shadow!=null&&(this.shadow.needsUpdate=!0)}setShadowIntensity(ee){if(this.shadowIntensity=ee,this._currentGLTF!=null&&(this.setBakedShadowVisibility(),!(ee<=0&&this.shadow==null))){if(this.shadow==null){const ne=this.element.arPlacement==="wall"?"back":"bottom";this.shadow=new Shadow(this,this.shadowSoftness,ne)}this.shadow.setIntensity(ee)}}setShadowSoftness(ee){this.shadowSoftness=ee;const ne=this.shadow;ne!=null&&ne.setSoftness(ee)}setShadowOffset(ee){const ne=this.shadow;ne!=null&&ne.setOffset(ee)}get raycaster(){return raycaster}hitFromPoint(ee,ne=this){return this.raycaster.setFromCamera(ee,this.getCamera()),this.raycaster.intersectObject(ne,!0).find(ce=>ce.object.visible&&!ce.object.userData.shadow)}positionAndNormalFromPoint(ee,ne=this){const ae=this.hitFromPoint(ee,ne);return ae==null||ae.face==null?null:ae.uv==null?{position:ae.point,normal:ae.face.normal,uv:null}:(ae.face.normal.applyNormalMatrix(new Matrix3().getNormalMatrix(ae.object.matrixWorld)),{position:ae.point,normal:ae.face.normal,uv:ae.uv})}surfaceFromPoint(ee,ne=this){const ae=this.element.model;if(ae==null)return null;const ce=this.hitFromPoint(ee,ne);if(ce==null||ce.face==null)return null;const le=ae[$nodeFromPoint](ce),{meshes:ue,primitives:he}=le.mesh.userData.associations,fe=new Vector3,me=new Vector3,ge=new Vector3,{a:ve,b:ye,c:be}=ce.face,Ee=ce.object;Ee.getVertexPosition(ve,fe),Ee.getVertexPosition(ye,me),Ee.getVertexPosition(be,ge);const Ce=new Triangle(fe,me,ge),Se=new Vector3;return Ce.getBarycoord(Ee.worldToLocal(ce.point),Se),`${ue} ${he} ${ve} ${ye} ${be} ${Se.x.toFixed(3)} ${Se.y.toFixed(3)} ${Se.z.toFixed(3)}`}addHotspot(ee){this.target.add(ee),this.annotationRenderer.domElement.appendChild(ee.element)}removeHotspot(ee){this.target.remove(ee)}forHotspots(ee){const{children:ne}=this.target;for(let ae=0,ce=ne.length;ae<ce;ae++){const le=ne[ae];le instanceof Hotspot&&ee(le)}}initializeSurface(ee){if(ee.surface!=null&&ee.mesh==null){const ne=parseExpressions(ee.surface)[0].terms;if(ne.length!=8){console.warn(ee.surface+" does not have exactly 8 numbers.");return}const ae=this.element.model[$nodeFromIndex](ne[0].number,ne[1].number),ce=new Vector3(ne[2].number,ne[3].number,ne[4].number);if(ae==null){console.warn(ee.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");return}const le=ae.mesh.geometry.attributes.position.count;if(ce.x>=le||ce.y>=le||ce.z>=le){console.warn(ee.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");return}const ue=new Vector3(ne[5].number,ne[6].number,ne[7].number);ee.mesh=ae.mesh,ee.tri=ce,ee.bary=ue}}updateSurfaceHotspots(){const ee=!this.element.paused;this.forHotspots(ne=>{this.initializeSurface(ne),ne.updateSurface(ee)})}updateHotspotsVisibility(ee){this.forHotspots(ne=>{view.copy(ee),target.setFromMatrixPosition(ne.matrixWorld),view.sub(target),normalWorld.copy(ne.normal).transformDirection(this.target.matrixWorld),view.dot(normalWorld)<0?ne.hide():ne.show()})}orientHotspots(ee){this.forHotspots(ne=>{ne.orient(ee)})}setHotspotsVisibility(ee){this.forHotspots(ne=>{ne.visible=ee})}updateSchema(ee){var ne;const{schemaElement:ae,element:ce}=this,{alt:le,poster:ue,iosSrc:he}=ce;if(ee!=null){const fe=[{"@type":"MediaObject",contentUrl:ee,encodingFormat:((ne=ee.split(".").pop())===null||ne===void 0?void 0:ne.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];he&&fe.push({"@type":"MediaObject",contentUrl:he,encodingFormat:"model/vnd.usdz+zip"});const me={"@context":"http://schema.org/","@type":"3DModel",image:ue??void 0,name:le??void 0,encoding:fe};ae.textContent=JSON.stringify(me),document.head.appendChild(ae)}else ae.parentElement!=null&&ae.parentElement.removeChild(ae)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dataUrlToBlob=async re=>new Promise((ee,ne)=>{const ce=re.match(/data:(.*);/);if(!ce)return ne(new Error(`${re} is not a valid data Url`));const le=ce[1],ue=re.replace(/data:image\/\w+;base64,/,""),he=atob(ue),fe=[];for(let me=0;me<he.length;me+=512){const ge=he.slice(me,me+512),ve=new Array(ge.length);for(let be=0;be<ge.length;be++)ve[be]=ge.charCodeAt(be);const ye=new Uint8Array(ve);fe.push(ye)}ee(new Blob(fe,{type:le}))});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProgressTracker extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(){const ee={progress:0,completed:!1};return this.ongoingActivities.add(ee),this.ongoingActivityCount===1&&this.announceTotalProgress(ee,0),ne=>{let ae;return ae=Math.max(clamp$2(ne,0,1),ee.progress),ae!==ee.progress&&this.announceTotalProgress(ee,ae),ee.progress}}announceTotalProgress(ee,ne){let ae=0,ce=0;ne==1&&(ee.completed=!0);for(const he of this.ongoingActivities){const{progress:fe}=he;ae+=1-fe,he.completed===!0&&ce++}const le=ee.progress;ee.progress=ne,this.totalProgress+=(ne-le)*(1-this.totalProgress)/ae;const ue=ce===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:ue}})),ce===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$4=globalThis&&globalThis.__decorate||function(re,ee,ne,ae){var ce=arguments.length,le=ce<3?ee:ae===null?ae=Object.getOwnPropertyDescriptor(ee,ne):ae,ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")le=Reflect.decorate(re,ee,ne,ae);else for(var he=re.length-1;he>=0;he--)(ue=re[he])&&(le=(ce<3?ue(le):ce>3?ue(ee,ne,le):ue(ee,ne))||le);return ce>3&&le&&Object.defineProperty(ee,ne,le),le},_a$2,_b$2,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o;const CLEAR_MODEL_TIMEOUT_MS=10,FALLBACK_SIZE_UPDATE_THRESHOLD_MS=50,ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD=0,UNSIZED_MEDIA_WIDTH=300,UNSIZED_MEDIA_HEIGHT=150,blobCanvas=document.createElement("canvas"),$fallbackResizeHandler=Symbol("fallbackResizeHandler"),$defaultAriaLabel=Symbol("defaultAriaLabel"),$resizeObserver=Symbol("resizeObserver"),$clearModelTimeout=Symbol("clearModelTimeout"),$onContextLost=Symbol("onContextLost"),$loaded=Symbol("loaded"),$status=Symbol("status"),$onFocus=Symbol("onFocus"),$onBlur=Symbol("onBlur"),$updateSize=Symbol("updateSize"),$intersectionObserver=Symbol("intersectionObserver"),$isElementInViewport=Symbol("isElementInViewport"),$announceModelVisibility=Symbol("announceModelVisibility"),$ariaLabel=Symbol("ariaLabel"),$altDefaulted=Symbol("altDefaulted"),$statusElement=Symbol("statusElement"),$updateStatus=Symbol("updateStatus"),$loadedTime=Symbol("loadedTime"),$updateSource=Symbol("updateSource"),$markLoaded=Symbol("markLoaded"),$container=Symbol("container"),$userInputElement=Symbol("input"),$canvas=Symbol("canvas"),$scene=Symbol("scene"),$needsRender=Symbol("needsRender"),$tick=Symbol("tick"),$onModelLoad=Symbol("onModelLoad"),$onResize=Symbol("onResize"),$renderer=Symbol("renderer"),$progressTracker=Symbol("progressTracker"),$getLoaded=Symbol("getLoaded"),$getModelIsVisible=Symbol("getModelIsVisible"),$shouldAttemptPreload=Symbol("shouldAttemptPreload"),toVector3D=re=>({x:re.x,y:re.y,z:re.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),toVector2D=re=>({u:re.x,v:re.y,toString(){return`${this.u} ${this.v}`}});class ModelViewerElementBase extends d$2{constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[_a$2]=!1,this[_b$2]=!1,this[_c]=0,this[_d]="",this[_e]=null,this[_f]=debounce$1(()=>{const ce=this.getBoundingClientRect();this[$updateSize](ce)},FALLBACK_SIZE_UPDATE_THRESHOLD_MS),this[_g]=debounce$1(ce=>{const le=this.modelIsVisible;le!==ce&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:le}}))},ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD),this[_h]=null,this[_j]=null,this[_k]=new ProgressTracker,this[_l]=()=>{this[$statusElement].textContent=this[$status]},this[_m]=()=>{this[$statusElement].textContent=""},this[_o]=ce=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:ce.sourceEvent}}))},this.attachShadow({mode:"open"});const ee=this.shadowRoot;makeTemplate(ee),this[$container]=ee.querySelector(".container"),this[$userInputElement]=ee.querySelector(".userInput"),this[$canvas]=ee.querySelector("canvas"),this[$statusElement]=ee.querySelector("#status"),this[$defaultAriaLabel]=this[$userInputElement].getAttribute("aria-label");let ne,ae;if(this.isConnected){const ce=this.getBoundingClientRect();ne=ce.width,ae=ce.height}else ne=UNSIZED_MEDIA_WIDTH,ae=UNSIZED_MEDIA_HEIGHT;this[$scene]=new ModelScene({canvas:this[$canvas],element:this,width:ne,height:ae}),Promise.resolve().then(()=>{this[$updateSize](this.getBoundingClientRect())}),HAS_RESIZE_OBSERVER&&(this[$resizeObserver]=new ResizeObserver(ce=>{if(!this[$renderer].isPresenting)for(let le of ce)le.target===this&&this[$updateSize](le.contentRect)})),HAS_INTERSECTION_OBSERVER?this[$intersectionObserver]=new IntersectionObserver(ce=>{for(let le of ce)if(le.target===this){const ue=this.modelIsVisible;this[$isElementInViewport]=le.isIntersecting,this[$announceModelVisibility](ue),this[$isElementInViewport]&&!this.loaded&&this[$updateSource]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[$isElementInViewport]=!0}static get is(){return"model-viewer"}static set modelCacheSize(ee){CachingGLTFLoader[$evictionPolicy].evictionThreshold=ee}static get modelCacheSize(){return CachingGLTFLoader[$evictionPolicy].evictionThreshold}static set minimumRenderScale(ee){ee>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),ee<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),Renderer.singleton.minScale=ee}static get minimumRenderScale(){return Renderer.singleton.minScale}get loaded(){return this[$getLoaded]()}get[(_a$2=$isElementInViewport,_b$2=$loaded,_c=$loadedTime,_d=$status,_e=$clearModelTimeout,_f=$fallbackResizeHandler,_g=$announceModelVisibility,_h=$resizeObserver,_j=$intersectionObserver,_k=$progressTracker,$renderer)](){return Renderer.singleton}get modelIsVisible(){return this[$getModelIsVisible]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),HAS_RESIZE_OBSERVER?this[$resizeObserver].observe(this):self.addEventListener("resize",this[$fallbackResizeHandler]),HAS_INTERSECTION_OBSERVER&&this[$intersectionObserver].observe(this),this.addEventListener("focus",this[$onFocus]),this.addEventListener("blur",this[$onBlur]);const ee=this[$renderer];ee.addEventListener("contextlost",this[$onContextLost]),ee.registerScene(this[$scene]),this[$clearModelTimeout]!=null&&(self.clearTimeout(this[$clearModelTimeout]),this[$clearModelTimeout]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),HAS_RESIZE_OBSERVER?this[$resizeObserver].unobserve(this):self.removeEventListener("resize",this[$fallbackResizeHandler]),HAS_INTERSECTION_OBSERVER&&this[$intersectionObserver].unobserve(this),this.removeEventListener("focus",this[$onFocus]),this.removeEventListener("blur",this[$onBlur]);const ee=this[$renderer];ee.removeEventListener("contextlost",this[$onContextLost]),ee.unregisterScene(this[$scene]),this[$clearModelTimeout]=self.setTimeout(()=>{this[$scene].dispose(),this[$clearModelTimeout]=null},CLEAR_MODEL_TIMEOUT_MS)}updated(ee){super.updated(ee),ee.has("src")&&(this.src==null?(this[$loaded]=!1,this[$loadedTime]=0,this[$scene].reset()):this.src!==this[$scene].url&&(this[$loaded]=!1,this[$loadedTime]=0,this[$updateSource]())),ee.has("alt")&&this[$userInputElement].setAttribute("aria-label",this[$ariaLabel]),ee.has("withCredentials")&&(CachingGLTFLoader.withCredentials=this.withCredentials,this[$renderer].textureUtils.withCredentials=this.withCredentials),ee.has("generateSchema")&&(this.generateSchema?this[$scene].updateSchema(this.src):this[$scene].updateSchema(null))}toDataURL(ee,ne){return this[$renderer].displayCanvas(this[$scene]).toDataURL(ee,ne)}async toBlob(ee){const ne=ee?ee.mimeType:void 0,ae=ee?ee.qualityArgument:void 0,ce=ee?ee.idealAspect:void 0,{width:le,height:ue,idealAspect:he,aspect:fe}=this[$scene],{dpr:me,scaleFactor:ge}=this[$renderer];let ve=le*ge*me,ye=ue*ge*me,be=0,Ee=0;if(ce===!0)if(he>fe){const Ce=ye;ye=Math.round(ve/he),Ee=(Ce-ye)/2}else{const Ce=ve;ve=Math.round(ye*he),be=(Ce-ve)/2}blobCanvas.width=ve,blobCanvas.height=ye;try{return new Promise(async(Ce,Se)=>{if(blobCanvas.getContext("2d").drawImage(this[$renderer].displayCanvas(this[$scene]),be,Ee,ve,ye,0,0,ve,ye),blobCanvas.msToBlob&&(!ne||ne==="image/png"))return Ce(blobCanvas.msToBlob());if(!blobCanvas.toBlob)return Ce(await dataUrlToBlob(blobCanvas.toDataURL(ne,ae)));blobCanvas.toBlob(Te=>{if(!Te)return Se(new Error("Unable to retrieve canvas blob"));Ce(Te)},ne,ae)})}finally{this[$updateSize]({width:le,height:ue})}}registerRenderer(ee){this[$scene].externalRenderer=ee}unregisterRenderer(){this[$scene].externalRenderer=null}get[$ariaLabel](){return this[$altDefaulted]}get[$altDefaulted](){return this.alt==null||this.alt==="null"?this[$defaultAriaLabel]:this.alt}[$getLoaded](){return this[$loaded]}[$getModelIsVisible](){return this.loaded&&this[$isElementInViewport]}[$shouldAttemptPreload](){return!!this.src&&this[$isElementInViewport]}[$updateSize]({width:ee,height:ne}){ee===0||ne===0||(this[$container].style.width=`${ee}px`,this[$container].style.height=`${ne}px`,this[$onResize]({width:ee,height:ne}))}[$tick](ee,ne){}[$markLoaded](){this[$loaded]||(this[$loaded]=!0,this[$loadedTime]=performance.now())}[$needsRender](){this[$scene].queueRender()}[$onModelLoad](){}[$updateStatus](ee){this[$status]=ee;const ne=this.getRootNode();ne!=null&&ne.activeElement===this&&this[$statusElement].textContent!=ee&&(this[$statusElement].textContent=ee)}[(_l=$onFocus,_m=$onBlur,$onResize)](ee){this[$scene].setSize(ee.width,ee.height)}async[(_o=$onContextLost,$updateSource)](){const ee=this[$scene];if(this.loaded||!this[$shouldAttemptPreload]()||this.src===ee.url)return;this.generateSchema&&ee.updateSchema(this.src),this[$updateStatus]("Loading"),ee.stopAnimation();const ne=this[$progressTracker].beginActivity(),ae=this.src;try{const ce=ee.setSource(ae,ue=>ne(clamp$2(ue,0,1)*.95)),le=this[$updateEnvironment]();await Promise.all([ce,le]),this[$markLoaded](),this[$onModelLoad](),await new Promise(ue=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:ae}})),ue()})})})}catch(ce){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:ce}}))}finally{ne(1)}}}__decorate$4([e$4({type:String})],ModelViewerElementBase.prototype,"alt",void 0);__decorate$4([e$4({type:String})],ModelViewerElementBase.prototype,"src",void 0);__decorate$4([e$4({type:Boolean,attribute:"with-credentials"})],ModelViewerElementBase.prototype,"withCredentials",void 0);__decorate$4([e$4({type:Boolean,attribute:"generate-schema"})],ModelViewerElementBase.prototype,"generateSchema",void 0);/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$3=globalThis&&globalThis.__decorate||function(re,ee,ne,ae){var ce=arguments.length,le=ce<3?ee:ae===null?ae=Object.getOwnPropertyDescriptor(ee,ne):ae,ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")le=Reflect.decorate(re,ee,ne,ae);else for(var he=re.length-1;he>=0;he--)(ue=re[he])&&(le=(ce<3?ue(le):ce>3?ue(ee,ne,le):ue(ee,ne))||le);return ce>3&&le&&Object.defineProperty(ee,ne,le),le};const MILLISECONDS_PER_SECOND=1e3,$changeAnimation=Symbol("changeAnimation"),$paused=Symbol("paused"),DEFAULT_PLAY_OPTIONS={repetitions:1/0,pingpong:!1},AnimationMixin=re=>{var ee;class ne extends re{constructor(...ce){super(ce),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[ee]=!0,this[$scene].subscribeMixerEvent("loop",le=>{const ue=le.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:ue}}))}),this[$scene].subscribeMixerEvent("finished",()=>{this[$paused]=!0,this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[$scene].animationNames:[]}get duration(){return this[$scene].duration}get paused(){return this[$paused]}get currentTime(){return this[$scene].animationTime}set currentTime(ce){this[$scene].animationTime=ce,this[$needsRender]()}get timeScale(){return this[$scene].animationTimeScale}set timeScale(ce){this[$scene].animationTimeScale=ce}pause(){this[$paused]||(this[$paused]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(ce){this.availableAnimations.length>0&&(this[$paused]=!1,this[$changeAnimation](ce),this.dispatchEvent(new CustomEvent("play")))}[(ee=$paused,$onModelLoad)](){super[$onModelLoad](),this[$paused]=!0,this.autoplay&&this.play()}[$tick](ce,le){super[$tick](ce,le),!(this[$paused]||!this[$getModelIsVisible]()&&!this[$renderer].isPresenting)&&(this[$scene].updateAnimation(le/MILLISECONDS_PER_SECOND),this[$needsRender]())}updated(ce){super.updated(ce),ce.has("autoplay")&&this.autoplay&&this.play(),ce.has("animationName")&&this[$changeAnimation]()}[$changeAnimation](ce=DEFAULT_PLAY_OPTIONS){var le;const ue=(le=ce.repetitions)!==null&&le!==void 0?le:1/0,he=ce.pingpong?LoopPingPong:ue===1?LoopOnce:LoopRepeat;this[$scene].playAnimation(this.animationName,this.animationCrossfadeDuration/MILLISECONDS_PER_SECOND,he,ue),this[$paused]&&(this[$scene].updateAnimation(0),this[$needsRender]())}}return __decorate$3([e$4({type:Boolean})],ne.prototype,"autoplay",void 0),__decorate$3([e$4({type:String,attribute:"animation-name"})],ne.prototype,"animationName",void 0),__decorate$3([e$4({type:Number,attribute:"animation-crossfade-duration"})],ne.prototype,"animationCrossfadeDuration",void 0),ne};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $hotspotMap=Symbol("hotspotMap"),$mutationCallback=Symbol("mutationCallback"),$observer=Symbol("observer"),$addHotspot=Symbol("addHotspot"),$removeHotspot=Symbol("removeHotspot"),worldToModel=new Matrix4,AnnotationMixin=re=>{var ee,ne,ae;class ce extends re{constructor(){super(...arguments),this[ee]=new Map,this[ne]=ue=>{ue.forEach(he=>{(!(he instanceof MutationRecord)||he.type==="childList")&&(he.addedNodes.forEach(fe=>{this[$addHotspot](fe)}),he.removedNodes.forEach(fe=>{this[$removeHotspot](fe)}),this[$needsRender]())})},this[ae]=new MutationObserver(this[$mutationCallback])}connectedCallback(){super.connectedCallback();for(let he=0;he<this.children.length;++he)this[$addHotspot](this.children[he]);const{ShadyDOM:ue}=self;ue==null?this[$observer].observe(this,{childList:!0}):this[$observer]=ue.observeChildren(this,this[$mutationCallback])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:ue}=self;ue==null?this[$observer].disconnect():ue.unobserveChildren(this[$observer])}[(ee=$hotspotMap,ne=$mutationCallback,ae=$observer,$tick)](ue,he){super[$tick](ue,he);const fe=this[$scene],{annotationRenderer:me}=fe,ge=fe.getCamera();fe.shouldRender()&&(fe.updateSurfaceHotspots(),fe.updateHotspotsVisibility(ge.position),me.domElement.style.display="",me.render(fe,ge))}updateHotspot(ue){const he=this[$hotspotMap].get(ue.name);he!=null&&(he.updatePosition(ue.position),he.updateNormal(ue.normal),he.surface=ue.surface,this[$needsRender]())}queryHotspot(ue){const he=this[$hotspotMap].get(ue);if(he==null)return null;const fe=toVector3D(he.position),me=toVector3D(he.normal),ge=he.facingCamera,ve=this[$scene],ye=ve.getCamera(),be=new Vector3;be.setFromMatrixPosition(he.matrixWorld),be.project(ye);const Ee=ve.width/2,Ce=ve.height/2;be.x=be.x*Ee+Ee,be.y=-(be.y*Ce)+Ce;const Se=toVector3D(new Vector3(be.x,be.y,be.z));return!Number.isFinite(Se.x)||!Number.isFinite(Se.y)?null:{position:fe,normal:me,canvasPosition:Se,facingCamera:ge}}positionAndNormalFromPoint(ue,he){const fe=this[$scene],me=fe.getNDC(ue,he),ge=fe.positionAndNormalFromPoint(me);if(ge==null)return null;worldToModel.copy(fe.target.matrixWorld).invert();const ve=toVector3D(ge.position.applyMatrix4(worldToModel)),ye=toVector3D(ge.normal.transformDirection(worldToModel));let be=null;return ge.uv!=null&&(be=toVector2D(ge.uv)),{position:ve,normal:ye,uv:be}}surfaceFromPoint(ue,he){const fe=this[$scene],me=fe.getNDC(ue,he);return fe.surfaceFromPoint(me)}[$addHotspot](ue){if(!(ue instanceof HTMLElement&&ue.slot.indexOf("hotspot")===0))return;let he=this[$hotspotMap].get(ue.slot);he!=null?he.increment():(he=new Hotspot({name:ue.slot,position:ue.dataset.position,normal:ue.dataset.normal,surface:ue.dataset.surface}),this[$hotspotMap].set(ue.slot,he),this[$scene].addHotspot(he)),this[$scene].queueRender()}[$removeHotspot](ue){if(!(ue instanceof HTMLElement))return;const he=this[$hotspotMap].get(ue.slot);he&&(he.decrement()&&(this[$scene].removeHotspot(he),this[$hotspotMap].delete(ue.slot)),this[$scene].queueRender())}}return ce};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var durl=function(re){return URL.createObjectURL(new Blob([re],{type:"text/javascript"}))};try{URL.revokeObjectURL(durl(""))}catch{durl=function(ee){return"data:application/javascript;charset=UTF-8,"+encodeURI(ee)}}var u8$1=Uint8Array,u16$1=Uint16Array,u32$1=Uint32Array,fleb$1=new u8$1([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb$1=new u8$1([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim$1=new u8$1([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb$1=function(re,ee){for(var ne=new u16$1(31),ae=0;ae<31;++ae)ne[ae]=ee+=1<<re[ae-1];for(var ce=new u32$1(ne[30]),ae=1;ae<30;++ae)for(var le=ne[ae];le<ne[ae+1];++le)ce[le]=le-ne[ae]<<5|ae;return[ne,ce]},_a$1=freb$1(fleb$1,2),fl$1=_a$1[0],revfl$1=_a$1[1];fl$1[28]=258,revfl$1[258]=28;var _b$1=freb$1(fdeb$1,0),revfd=_b$1[1],rev$1=new u16$1(32768);for(var i$2=0;i$2<32768;++i$2){var x$2=(i$2&43690)>>>1|(i$2&21845)<<1;x$2=(x$2&52428)>>>2|(x$2&13107)<<2,x$2=(x$2&61680)>>>4|(x$2&3855)<<4,rev$1[i$2]=((x$2&65280)>>>8|(x$2&255)<<8)>>>1}var hMap$1=function(re,ee,ne){for(var ae=re.length,ce=0,le=new u16$1(ee);ce<ae;++ce)++le[re[ce]-1];var ue=new u16$1(ee);for(ce=0;ce<ee;++ce)ue[ce]=ue[ce-1]+le[ce-1]<<1;var he;if(ne){he=new u16$1(1<<ee);var fe=15-ee;for(ce=0;ce<ae;++ce)if(re[ce])for(var me=ce<<4|re[ce],ge=ee-re[ce],ve=ue[re[ce]-1]++<<ge,ye=ve|(1<<ge)-1;ve<=ye;++ve)he[rev$1[ve]>>>fe]=me}else for(he=new u16$1(ae),ce=0;ce<ae;++ce)re[ce]&&(he[ce]=rev$1[ue[re[ce]-1]++]>>>15-re[ce]);return he},flt$1=new u8$1(288);for(var i$2=0;i$2<144;++i$2)flt$1[i$2]=8;for(var i$2=144;i$2<256;++i$2)flt$1[i$2]=9;for(var i$2=256;i$2<280;++i$2)flt$1[i$2]=7;for(var i$2=280;i$2<288;++i$2)flt$1[i$2]=8;var fdt$1=new u8$1(32);for(var i$2=0;i$2<32;++i$2)fdt$1[i$2]=5;var flm=hMap$1(flt$1,9,0),fdm=hMap$1(fdt$1,5,0),shft$1=function(re){return(re/8|0)+(re&7&&1)},slc$1=function(re,ee,ne){(ee==null||ee<0)&&(ee=0),(ne==null||ne>re.length)&&(ne=re.length);var ae=new(re instanceof u16$1?u16$1:re instanceof u32$1?u32$1:u8$1)(ne-ee);return ae.set(re.subarray(ee,ne)),ae},wbits=function(re,ee,ne){ne<<=ee&7;var ae=ee/8|0;re[ae]|=ne,re[ae+1]|=ne>>>8},wbits16=function(re,ee,ne){ne<<=ee&7;var ae=ee/8|0;re[ae]|=ne,re[ae+1]|=ne>>>8,re[ae+2]|=ne>>>16},hTree=function(re,ee){for(var ne=[],ae=0;ae<re.length;++ae)re[ae]&&ne.push({s:ae,f:re[ae]});var ce=ne.length,le=ne.slice();if(!ce)return[et$1,0];if(ce==1){var ue=new u8$1(ne[0].s+1);return ue[ne[0].s]=1,[ue,1]}ne.sort(function(De,Oe){return De.f-Oe.f}),ne.push({s:-1,f:25001});var he=ne[0],fe=ne[1],me=0,ge=1,ve=2;for(ne[0]={s:-1,f:he.f+fe.f,l:he,r:fe};ge!=ce-1;)he=ne[ne[me].f<ne[ve].f?me++:ve++],fe=ne[me!=ge&&ne[me].f<ne[ve].f?me++:ve++],ne[ge++]={s:-1,f:he.f+fe.f,l:he,r:fe};for(var ye=le[0].s,ae=1;ae<ce;++ae)le[ae].s>ye&&(ye=le[ae].s);var be=new u16$1(ye+1),Ee=ln(ne[ge-1],be,0);if(Ee>ee){var ae=0,Ce=0,Se=Ee-ee,Te=1<<Se;for(le.sort(function(Oe,Re){return be[Re.s]-be[Oe.s]||Oe.f-Re.f});ae<ce;++ae){var ke=le[ae].s;if(be[ke]>ee)Ce+=Te-(1<<Ee-be[ke]),be[ke]=ee;else break}for(Ce>>>=Se;Ce>0;){var Ne=le[ae].s;be[Ne]<ee?Ce-=1<<ee-be[Ne]++-1:++ae}for(;ae>=0&&Ce;--ae){var Fe=le[ae].s;be[Fe]==ee&&(--be[Fe],++Ce)}Ee=ee}return[new u8$1(be),Ee]},ln=function(re,ee,ne){return re.s==-1?Math.max(ln(re.l,ee,ne+1),ln(re.r,ee,ne+1)):ee[re.s]=ne},lc=function(re){for(var ee=re.length;ee&&!re[--ee];);for(var ne=new u16$1(++ee),ae=0,ce=re[0],le=1,ue=function(fe){ne[ae++]=fe},he=1;he<=ee;++he)if(re[he]==ce&&he!=ee)++le;else{if(!ce&&le>2){for(;le>138;le-=138)ue(32754);le>2&&(ue(le>10?le-11<<5|28690:le-3<<5|12305),le=0)}else if(le>3){for(ue(ce),--le;le>6;le-=6)ue(8304);le>2&&(ue(le-3<<5|8208),le=0)}for(;le--;)ue(ce);le=1,ce=re[he]}return[ne.subarray(0,ae),ee]},clen=function(re,ee){for(var ne=0,ae=0;ae<ee.length;++ae)ne+=re[ae]*ee[ae];return ne},wfblk=function(re,ee,ne){var ae=ne.length,ce=shft$1(ee+2);re[ce]=ae&255,re[ce+1]=ae>>>8,re[ce+2]=re[ce]^255,re[ce+3]=re[ce+1]^255;for(var le=0;le<ae;++le)re[ce+le+4]=ne[le];return(ce+4+ae)*8},wblk=function(re,ee,ne,ae,ce,le,ue,he,fe,me,ge){wbits(ee,ge++,ne),++ce[256];for(var ve=hTree(ce,15),ye=ve[0],be=ve[1],Ee=hTree(le,15),Ce=Ee[0],Se=Ee[1],Te=lc(ye),ke=Te[0],Ne=Te[1],Fe=lc(Ce),De=Fe[0],Oe=Fe[1],Re=new u16$1(19),Be=0;Be<ke.length;++Be)Re[ke[Be]&31]++;for(var Be=0;Be<De.length;++Be)Re[De[Be]&31]++;for(var Le=hTree(Re,7),je=Le[0],Ge=Le[1],qe=19;qe>4&&!je[clim$1[qe-1]];--qe);var Ue=me+5<<3,ze=clen(ce,flt$1)+clen(le,fdt$1)+ue,He=clen(ce,ye)+clen(le,Ce)+ue+14+3*qe+clen(Re,je)+(2*Re[16]+3*Re[17]+7*Re[18]);if(Ue<=ze&&Ue<=He)return wfblk(ee,ge,re.subarray(fe,fe+me));var Ye,Xe,We,Ze;if(wbits(ee,ge,1+(He<ze)),ge+=2,He<ze){Ye=hMap$1(ye,be,0),Xe=ye,We=hMap$1(Ce,Se,0),Ze=Ce;var Vt=hMap$1(je,Ge,0);wbits(ee,ge,Ne-257),wbits(ee,ge+5,Oe-1),wbits(ee,ge+10,qe-4),ge+=14;for(var Be=0;Be<qe;++Be)wbits(ee,ge+3*Be,je[clim$1[Be]]);ge+=3*qe;for(var Qt=[ke,De],Yt=0;Yt<2;++Yt)for(var Jt=Qt[Yt],Be=0;Be<Jt.length;++Be){var rn=Jt[Be]&31;wbits(ee,ge,Vt[rn]),ge+=je[rn],rn>15&&(wbits(ee,ge,Jt[Be]>>>5&127),ge+=Jt[Be]>>>12)}}else Ye=flm,Xe=flt$1,We=fdm,Ze=fdt$1;for(var Be=0;Be<he;++Be)if(ae[Be]>255){var rn=ae[Be]>>>18&31;wbits16(ee,ge,Ye[rn+257]),ge+=Xe[rn+257],rn>7&&(wbits(ee,ge,ae[Be]>>>23&31),ge+=fleb$1[rn]);var nn=ae[Be]&31;wbits16(ee,ge,We[nn]),ge+=Ze[nn],nn>3&&(wbits16(ee,ge,ae[Be]>>>5&8191),ge+=fdeb$1[nn])}else wbits16(ee,ge,Ye[ae[Be]]),ge+=Xe[ae[Be]];return wbits16(ee,ge,Ye[256]),ge+Xe[256]},deo=new u32$1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8$1(0),dflt=function(re,ee,ne,ae,ce,le){var ue=re.length,he=new u8$1(ae+ue+5*(1+Math.ceil(ue/7e3))+ce),fe=he.subarray(ae,he.length-ce),me=0;if(!ee||ue<8)for(var ge=0;ge<=ue;ge+=65535){var ve=ge+65535;ve<ue?me=wfblk(fe,me,re.subarray(ge,ve)):(fe[ge]=le,me=wfblk(fe,me,re.subarray(ge,ue)))}else{for(var ye=deo[ee-1],be=ye>>>13,Ee=ye&8191,Ce=(1<<ne)-1,Se=new u16$1(32768),Te=new u16$1(Ce+1),ke=Math.ceil(ne/3),Ne=2*ke,Fe=function(Rn){return(re[Rn]^re[Rn+1]<<ke^re[Rn+2]<<Ne)&Ce},De=new u32$1(25e3),Oe=new u16$1(288),Re=new u16$1(32),Be=0,Le=0,ge=0,je=0,Ge=0,qe=0;ge<ue;++ge){var Ue=Fe(ge),ze=ge&32767,He=Te[Ue];if(Se[ze]=He,Te[Ue]=ze,Ge<=ge){var Ye=ue-ge;if((Be>7e3||je>24576)&&Ye>423){me=wblk(re,fe,0,De,Oe,Re,Le,je,qe,ge-qe,me),je=Be=Le=0,qe=ge;for(var Xe=0;Xe<286;++Xe)Oe[Xe]=0;for(var Xe=0;Xe<30;++Xe)Re[Xe]=0}var We=2,Ze=0,Vt=Ee,Qt=ze-He&32767;if(Ye>2&&Ue==Fe(ge-Qt))for(var Yt=Math.min(be,Ye)-1,Jt=Math.min(32767,ge),rn=Math.min(258,Ye);Qt<=Jt&&--Vt&&ze!=He;){if(re[ge+We]==re[ge+We-Qt]){for(var nn=0;nn<rn&&re[ge+nn]==re[ge+nn-Qt];++nn);if(nn>We){if(We=nn,Ze=Qt,nn>Yt)break;for(var fn=Math.min(Qt,nn-2),an=0,Xe=0;Xe<fn;++Xe){var un=ge-Qt+Xe+32768&32767,bn=Se[un],En=un-bn+32768&32767;En>an&&(an=En,He=un)}}}ze=He,He=Se[ze],Qt+=ze-He+32768&32767}if(Ze){De[je++]=268435456|revfl$1[We]<<18|revfd[Ze];var $n=revfl$1[We]&31,On=revfd[Ze]&31;Le+=fleb$1[$n]+fdeb$1[On],++Oe[257+$n],++Re[On],Ge=ge+We,++Be}else De[je++]=re[ge],++Oe[re[ge]]}}me=wblk(re,fe,le,De,Oe,Re,Le,je,qe,ge-qe,me),!le&&me&7&&(me=wfblk(fe,me+1,et$1))}return slc$1(he,0,ae+shft$1(me)+ce)},crct=function(){for(var re=new u32$1(256),ee=0;ee<256;++ee){for(var ne=ee,ae=9;--ae;)ne=(ne&1&&3988292384)^ne>>>1;re[ee]=ne}return re}(),crc=function(){var re=-1;return{p:function(ee){for(var ne=re,ae=0;ae<ee.length;++ae)ne=crct[ne&255^ee[ae]]^ne>>>8;re=ne},d:function(){return~re}}},dopt=function(re,ee,ne,ae,ce){return dflt(re,ee.level==null?6:ee.level,ee.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(re.length)))*1.5):12+ee.mem,ne,ae,!ce)},mrg=function(re,ee){var ne={};for(var ae in re)ne[ae]=re[ae];for(var ae in ee)ne[ae]=ee[ae];return ne},wbytes=function(re,ee,ne){for(;ne;++ee)re[ee]=ne,ne>>>=8};function deflateSync(re,ee){return dopt(re,ee||{},0,0)}var fltn=function(re,ee,ne,ae){for(var ce in re){var le=re[ce],ue=ee+ce;le instanceof u8$1?ne[ue]=[le,ae]:Array.isArray(le)?ne[ue]=[le[0],mrg(ae,le[1])]:fltn(le,ue+"/",ne,ae)}},te=typeof TextEncoder<"u"&&new TextEncoder,td$1=typeof TextDecoder<"u"&&new TextDecoder,tds$1=0;try{td$1.decode(et$1,{stream:!0}),tds$1=1}catch{}function strToU8(re,ee){if(ee){for(var ne=new u8$1(re.length),ae=0;ae<re.length;++ae)ne[ae]=re.charCodeAt(ae);return ne}if(te)return te.encode(re);for(var ce=re.length,le=new u8$1(re.length+(re.length>>1)),ue=0,he=function(ge){le[ue++]=ge},ae=0;ae<ce;++ae){if(ue+5>le.length){var fe=new u8$1(ue+8+(ce-ae<<1));fe.set(le),le=fe}var me=re.charCodeAt(ae);me<128||ee?he(me):me<2048?(he(192|me>>6),he(128|me&63)):me>55295&&me<57344?(me=65536+(me&1047552)|re.charCodeAt(++ae)&1023,he(240|me>>18),he(128|me>>12&63),he(128|me>>6&63),he(128|me&63)):(he(224|me>>12),he(128|me>>6&63),he(128|me&63))}return slc$1(le,0,ue)}var exfl=function(re){var ee=0;if(re)for(var ne in re){var ae=re[ne].length;if(ae>65535)throw"extra field too long";ee+=ae+4}return ee},wzh=function(re,ee,ne,ae,ce,le,ue,he){var fe=ae.length,me=ne.extra,ge=he&&he.length,ve=exfl(me);wbytes(re,ee,ue!=null?33639248:67324752),ee+=4,ue!=null&&(re[ee++]=20,re[ee++]=ne.os),re[ee]=20,ee+=2,re[ee++]=ne.flag<<1|(le==null&&8),re[ee++]=ce&&8,re[ee++]=ne.compression&255,re[ee++]=ne.compression>>8;var ye=new Date(ne.mtime==null?Date.now():ne.mtime),be=ye.getFullYear()-1980;if(be<0||be>119)throw"date not in range 1980-2099";if(wbytes(re,ee,be<<25|ye.getMonth()+1<<21|ye.getDate()<<16|ye.getHours()<<11|ye.getMinutes()<<5|ye.getSeconds()>>>1),ee+=4,le!=null&&(wbytes(re,ee,ne.crc),wbytes(re,ee+4,le),wbytes(re,ee+8,ne.size)),wbytes(re,ee+12,fe),wbytes(re,ee+14,ve),ee+=16,ue!=null&&(wbytes(re,ee,ge),wbytes(re,ee+6,ne.attrs),wbytes(re,ee+10,ue),ee+=14),re.set(ae,ee),ee+=fe,ve)for(var Ee in me){var Ce=me[Ee],Se=Ce.length;wbytes(re,ee,+Ee),wbytes(re,ee+2,Se),re.set(Ce,ee+4),ee+=4+Se}return ge&&(re.set(he,ee),ee+=ge),ee},wzf=function(re,ee,ne,ae,ce){wbytes(re,ee,101010256),wbytes(re,ee+8,ne),wbytes(re,ee+10,ne),wbytes(re,ee+12,ae),wbytes(re,ee+16,ce)};function zipSync(re,ee){ee||(ee={});var ne={},ae=[];fltn(re,"",ne,ee);var ce=0,le=0;for(var ue in ne){var he=ne[ue],fe=he[0],me=he[1],ge=me.level==0?0:8,ve=strToU8(ue),ye=ve.length,be=me.comment,Ee=be&&strToU8(be),Ce=Ee&&Ee.length,Se=exfl(me.extra);if(ye>65535)throw"filename too long";var Te=ge?deflateSync(fe,me):fe,ke=Te.length,Ne=crc();Ne.p(fe),ae.push(mrg(me,{size:fe.length,crc:Ne.d(),c:Te,f:ve,m:Ee,u:ye!=ue.length||Ee&&be.length!=Ce,o:ce,compression:ge})),ce+=30+ye+Se+ke,le+=76+2*(ye+Se)+(Ce||0)+ke}for(var Fe=new u8$1(le+22),De=ce,Oe=le-ce,Re=0;Re<ae.length;++Re){var ve=ae[Re];wzh(Fe,ve.o,ve,ve.f,ve.u,ve.c.length);var Be=30+ve.f.length+exfl(ve.extra);Fe.set(ve.c,ve.o+Be),wzh(Fe,ce,ve,ve.f,ve.u,ve.c.length,ve.o,ve.m),ce+=16+Be+(ve.m?ve.m.length:0)}return wzf(Fe,ce,ae.length,Oe,De),Fe}class USDZExporter{async parse(ee,ne={}){ne=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}}},ne);const ae={},ce="model.usda";ae[ce]=null;let le=buildHeader();le+=buildSceneStart(ne);const ue={},he={};ee.traverseVisible(me=>{if(me.isMesh){const ge=me.geometry,ve=me.material;if(ve.isMeshStandardMaterial){const ye="geometries/Geometry_"+ge.id+".usd";if(!(ye in ae)){const be=buildMeshObject(ge);ae[ye]=buildUSDFileAsString(be)}ve.uuid in ue||(ue[ve.uuid]=ve),le+=buildXform(me,ge,ve)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",me)}else me.isCamera&&(le+=buildCamera(me))}),le+=buildSceneEnd(),le+=buildMaterials(ue,he),ae[ce]=strToU8(le),le=null;for(const me in he){const ge=he[me],ve=me.split("_")[1],ye=ge.format===1023,be=imageToCanvas(ge.image,ve),Ee=await new Promise(Ce=>be.toBlob(Ce,ye?"image/png":"image/jpeg",1));ae[`textures/Texture_${me}.${ye?"png":"jpg"}`]=new Uint8Array(await Ee.arrayBuffer())}let fe=0;for(const me in ae){const ge=ae[me],ve=34+me.length;fe+=ve;const ye=fe&63;if(ye!==4){const be=64-ye,Ee=new Uint8Array(be);ae[me]=[ge,{extra:{12345:Ee}}]}fe=ge.length}return zipSync(ae,{level:0})}}function imageToCanvas(re,ee){if(typeof HTMLImageElement<"u"&&re instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&re instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&re instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&re instanceof ImageBitmap){const ne=1024/Math.max(re.width,re.height),ae=document.createElement("canvas");ae.width=re.width*Math.min(1,ne),ae.height=re.height*Math.min(1,ne);const ce=ae.getContext("2d");if(ce.drawImage(re,0,0,ae.width,ae.height),ee!==void 0){const le=parseInt(ee,16),ue=(le>>16&255)/255,he=(le>>8&255)/255,fe=(le&255)/255,me=ce.getImageData(0,0,ae.width,ae.height),ge=me.data;for(let ve=0;ve<ge.length;ve+=4)ge[ve+0]=ge[ve+0]*ue,ge[ve+1]=ge[ve+1]*he,ge[ve+2]=ge[ve+2]*fe;ce.putImageData(me,0,0)}return ae}else throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}const PRECISION=7;function buildHeader(){return`#usda 1.0
(
    customLayerData = {
        string creator = "Three.js USDZExporter"
    }
    metersPerUnit = 1
    upAxis = "Y"
)

`}function buildSceneStart(re){return`def Xform "Root"
{
    def Scope "Scenes" (
        kind = "sceneLibrary"
    )
    {
        def Xform "Scene" (
            customData = {
                bool preliminary_collidesWithEnvironment = 0
                string sceneName = "Scene"
            }
            sceneName = "Scene"
        )
        {
        token preliminary:anchoring:type = "${re.ar.anchoring.type}"
        token preliminary:planeAnchoring:alignment = "${re.ar.planeAnchoring.alignment}"

`}function buildSceneEnd(){return`
        }
    }
}

`}function buildUSDFileAsString(re){let ee=buildHeader();return ee+=re,strToU8(ee)}function buildXform(re,ee,ne){const ae="Object_"+re.id,ce=buildMatrix(re.matrixWorld);return re.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",re),`def Xform "${ae}" (
    prepend references = @./geometries/Geometry_${ee.id}.usd@</Geometry>
)
{
    matrix4d xformOp:transform = ${ce}
    uniform token[] xformOpOrder = ["xformOp:transform"]

    rel material:binding = </Materials/Material_${ne.id}>
}

`}function buildMatrix(re){const ee=re.elements;return`( ${buildMatrixRow(ee,0)}, ${buildMatrixRow(ee,4)}, ${buildMatrixRow(ee,8)}, ${buildMatrixRow(ee,12)} )`}function buildMatrixRow(re,ee){return`(${re[ee+0]}, ${re[ee+1]}, ${re[ee+2]}, ${re[ee+3]})`}function buildMeshObject(re){return`
def "Geometry"
{
  ${buildMesh(re)}
}
`}function buildMesh(re){const ee="Geometry",ne=re.attributes,ae=ne.position.count;return`
    def Mesh "${ee}"
    {
        int[] faceVertexCounts = [${buildMeshVertexCount(re)}]
        int[] faceVertexIndices = [${buildMeshVertexIndices(re)}]
        normal3f[] normals = [${buildVector3Array(ne.normal,ae)}] (
            interpolation = "vertex"
        )
        point3f[] points = [${buildVector3Array(ne.position,ae)}]
        float2[] primvars:st = [${buildVector2Array(ne.uv,ae)}] (
            interpolation = "vertex"
        )
        uniform token subdivisionScheme = "none"
    }
`}function buildMeshVertexCount(re){const ee=re.index!==null?re.index.count:re.attributes.position.count;return Array(ee/3).fill(3).join(", ")}function buildMeshVertexIndices(re){const ee=re.index,ne=[];if(ee!==null)for(let ae=0;ae<ee.count;ae++)ne.push(ee.getX(ae));else{const ae=re.attributes.position.count;for(let ce=0;ce<ae;ce++)ne.push(ce)}return ne.join(", ")}function buildVector3Array(re,ee){if(re===void 0)return console.warn("USDZExporter: Normals missing."),Array(ee).fill("(0, 0, 0)").join(", ");const ne=[];for(let ae=0;ae<re.count;ae++){const ce=re.getX(ae),le=re.getY(ae),ue=re.getZ(ae);ne.push(`(${ce.toPrecision(PRECISION)}, ${le.toPrecision(PRECISION)}, ${ue.toPrecision(PRECISION)})`)}return ne.join(", ")}function buildVector2Array(re,ee){if(re===void 0)return console.warn("USDZExporter: UVs missing."),Array(ee).fill("(0, 0)").join(", ");const ne=[];for(let ae=0;ae<re.count;ae++){const ce=re.getX(ae),le=re.getY(ae);ne.push(`(${ce.toPrecision(PRECISION)}, ${1-le.toPrecision(PRECISION)})`)}return ne.join(", ")}function buildMaterials(re,ee){const ne=[];for(const ae in re){const ce=re[ae];ne.push(buildMaterial(ce,ee))}return`def "Materials"
{
${ne.join("")}
}

`}function buildMaterial(re,ee){const ne="            ",ae=[],ce=[];function le(ue,he,fe){const me=ue.id+(fe?"_"+fe.getHexString():""),ge=ue.format===1023;return ee[me]=ue,`
        def Shader "Transform2d_${he}" (
            sdrMetadata = {
                string role = "math"
            }
        )
        {
            uniform token info:id = "UsdTransform2d"
            float2 inputs:in.connect = </Materials/Material_${re.id}/uvReader_st.outputs:result>
            float2 inputs:scale = ${buildVector2(ue.repeat)}
            float2 inputs:translation = ${buildVector2(ue.offset)}
            float2 outputs:result
        }

        def Shader "Texture_${ue.id}_${he}"
        {
            uniform token info:id = "UsdUVTexture"
            asset inputs:file = @textures/Texture_${me}.${ge?"png":"jpg"}@
            float2 inputs:st.connect = </Materials/Material_${re.id}/Transform2d_${he}.outputs:result>
            token inputs:wrapS = "repeat"
            token inputs:wrapT = "repeat"
            float outputs:r
            float outputs:g
            float outputs:b
            float3 outputs:rgb
            ${re.transparent||re.alphaTest>0?"float outputs:a":""}
        }`}return re.side===DoubleSide&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",re),re.map!==null?(ae.push(`${ne}color3f inputs:diffuseColor.connect = </Materials/Material_${re.id}/Texture_${re.map.id}_diffuse.outputs:rgb>`),re.transparent?ae.push(`${ne}float inputs:opacity.connect = </Materials/Material_${re.id}/Texture_${re.map.id}_diffuse.outputs:a>`):re.alphaTest>0&&(ae.push(`${ne}float inputs:opacity.connect = </Materials/Material_${re.id}/Texture_${re.map.id}_diffuse.outputs:a>`),ae.push(`${ne}float inputs:opacityThreshold = ${re.alphaTest}`)),ce.push(le(re.map,"diffuse",re.color))):ae.push(`${ne}color3f inputs:diffuseColor = ${buildColor(re.color)}`),re.emissiveMap!==null?(ae.push(`${ne}color3f inputs:emissiveColor.connect = </Materials/Material_${re.id}/Texture_${re.emissiveMap.id}_emissive.outputs:rgb>`),ce.push(le(re.emissiveMap,"emissive"))):re.emissive.getHex()>0&&ae.push(`${ne}color3f inputs:emissiveColor = ${buildColor(re.emissive)}`),re.normalMap!==null&&(ae.push(`${ne}normal3f inputs:normal.connect = </Materials/Material_${re.id}/Texture_${re.normalMap.id}_normal.outputs:rgb>`),ce.push(le(re.normalMap,"normal"))),re.aoMap!==null&&(ae.push(`${ne}float inputs:occlusion.connect = </Materials/Material_${re.id}/Texture_${re.aoMap.id}_occlusion.outputs:r>`),ce.push(le(re.aoMap,"occlusion"))),re.roughnessMap!==null&&re.roughness===1?(ae.push(`${ne}float inputs:roughness.connect = </Materials/Material_${re.id}/Texture_${re.roughnessMap.id}_roughness.outputs:g>`),ce.push(le(re.roughnessMap,"roughness"))):ae.push(`${ne}float inputs:roughness = ${re.roughness}`),re.metalnessMap!==null&&re.metalness===1?(ae.push(`${ne}float inputs:metallic.connect = </Materials/Material_${re.id}/Texture_${re.metalnessMap.id}_metallic.outputs:b>`),ce.push(le(re.metalnessMap,"metallic"))):ae.push(`${ne}float inputs:metallic = ${re.metalness}`),re.alphaMap!==null?(ae.push(`${ne}float inputs:opacity.connect = </Materials/Material_${re.id}/Texture_${re.alphaMap.id}_opacity.outputs:r>`),ae.push(`${ne}float inputs:opacityThreshold = 0.0001`),ce.push(le(re.alphaMap,"opacity"))):ae.push(`${ne}float inputs:opacity = ${re.opacity}`),re.isMeshPhysicalMaterial&&(ae.push(`${ne}float inputs:clearcoat = ${re.clearcoat}`),ae.push(`${ne}float inputs:clearcoatRoughness = ${re.clearcoatRoughness}`),ae.push(`${ne}float inputs:ior = ${re.ior}`)),`
    def Material "Material_${re.id}"
    {
        def Shader "PreviewSurface"
        {
            uniform token info:id = "UsdPreviewSurface"
${ae.join(`
`)}
            int inputs:useSpecularWorkflow = 0
            token outputs:surface
        }

        token outputs:surface.connect = </Materials/Material_${re.id}/PreviewSurface.outputs:surface>
        token inputs:frame:stPrimvarName = "st"

        def Shader "uvReader_st"
        {
            uniform token info:id = "UsdPrimvarReader_float2"
            token inputs:varname.connect = </Materials/Material_${re.id}.inputs:frame:stPrimvarName>
            float2 inputs:fallback = (0.0, 0.0)
            float2 outputs:result
        }

${ce.join(`
`)}

    }
`}function buildColor(re){return`(${re.r}, ${re.g}, ${re.b})`}function buildVector2(re){return`(${re.x}, ${re.y})`}function buildCamera(re){const ee=re.name?re.name:"Camera_"+re.id,ne=buildMatrix(re.matrixWorld);return re.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",re),re.isOrthographicCamera?`def Camera "${ee}"
		{
			matrix4d xformOp:transform = ${ne}
			uniform token[] xformOpOrder = ["xformOp:transform"]
	
			float2 clippingRange = (${re.near.toPrecision(PRECISION)}, ${re.far.toPrecision(PRECISION)})
			float horizontalAperture = ${((Math.abs(re.left)+Math.abs(re.right))*10).toPrecision(PRECISION)}
			float verticalAperture = ${((Math.abs(re.top)+Math.abs(re.bottom))*10).toPrecision(PRECISION)}
			token projection = "orthographic"
		}
	
	`:`def Camera "${ee}"
		{
			matrix4d xformOp:transform = ${ne}
			uniform token[] xformOpOrder = ["xformOp:transform"]
	
			float2 clippingRange = (${re.near.toPrecision(PRECISION)}, ${re.far.toPrecision(PRECISION)})
			float focalLength = ${re.getFocalLength().toPrecision(PRECISION)}
			float focusDistance = ${re.focus.toPrecision(PRECISION)}
			float horizontalAperture = ${re.getFilmWidth().toPrecision(PRECISION)}
			token projection = "perspective"
			float verticalAperture = ${re.getFilmHeight().toPrecision(PRECISION)}
		}
	
	`}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const enumerationDeserializer=re=>ee=>{try{const ne=parseExpressions(ee),ae=(ne.length?ne[0].terms:[]).filter(le=>le&&le.type==="ident").map(le=>le.value).filter(le=>re.indexOf(le)>-1),ce=new Set;for(const le of ae)ce.add(le);return ce}catch{}return new Set};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$2=globalThis&&globalThis.__decorate||function(re,ee,ne,ae){var ce=arguments.length,le=ce<3?ee:ae===null?ae=Object.getOwnPropertyDescriptor(ee,ne):ae,ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")le=Reflect.decorate(re,ee,ne,ae);else for(var he=re.length-1;he>=0;he--)(ue=re[he])&&(le=(ce<3?ue(le):ce>3?ue(ee,ne,le):ue(ee,ne))||le);return ce>3&&le&&Object.defineProperty(ee,ne,le),le};let isWebXRBlocked=!1,isSceneViewerBlocked=!1;const noArViewerSigil="#model-viewer-no-ar-fallback",deserializeARModes=enumerationDeserializer(["quick-look","scene-viewer","webxr","none"]),DEFAULT_AR_MODES="webxr scene-viewer quick-look",ARMode={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},$arButtonContainer=Symbol("arButtonContainer"),$enterARWithWebXR=Symbol("enterARWithWebXR"),$openSceneViewer=Symbol("openSceneViewer"),$openIOSARQuickLook=Symbol("openIOSARQuickLook"),$canActivateAR=Symbol("canActivateAR"),$arMode=Symbol("arMode"),$arModes=Symbol("arModes"),$arAnchor=Symbol("arAnchor"),$preload=Symbol("preload"),$onARButtonContainerClick=Symbol("onARButtonContainerClick"),$onARStatus=Symbol("onARStatus"),$onARTracking=Symbol("onARTracking"),$onARTap=Symbol("onARTap"),$selectARMode=Symbol("selectARMode"),$triggerLoad=Symbol("triggerLoad"),ARMixin=re=>{var ee,ne,ae,ce,le,ue,he,fe,me,ge;class ve extends re{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes=DEFAULT_AR_MODES,this.iosSrc=null,this.xrEnvironment=!1,this[ee]=!1,this[ne]=this.shadowRoot.querySelector(".ar-button"),this[ae]=document.createElement("a"),this[ce]=new Set,this[le]=ARMode.NONE,this[ue]=!1,this[he]=be=>{be.preventDefault(),this.activateAR()},this[fe]=({status:be})=>{(be===ARStatus.NOT_PRESENTING||this[$renderer].arRenderer.presentedScene===this[$scene])&&(this.setAttribute("ar-status",be),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:be}})),be===ARStatus.NOT_PRESENTING?this.removeAttribute("ar-tracking"):be===ARStatus.SESSION_STARTED&&this.setAttribute("ar-tracking",ARTracking.TRACKING))},this[me]=({status:be})=>{this.setAttribute("ar-tracking",be),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:be}}))},this[ge]=be=>{be.data=="_apple_ar_quicklook_button_tapped"&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[$arMode]!==ARMode.NONE}connectedCallback(){super.connectedCallback(),this[$renderer].arRenderer.addEventListener("status",this[$onARStatus]),this.setAttribute("ar-status",ARStatus.NOT_PRESENTING),this[$renderer].arRenderer.addEventListener("tracking",this[$onARTracking]),this[$arAnchor].addEventListener("message",this[$onARTap])}disconnectedCallback(){super.disconnectedCallback(),this[$renderer].arRenderer.removeEventListener("status",this[$onARStatus]),this[$renderer].arRenderer.removeEventListener("tracking",this[$onARTracking]),this[$arAnchor].removeEventListener("message",this[$onARTap])}update(be){super.update(be),be.has("arScale")&&(this[$scene].canScale=this.arScale!=="fixed"),be.has("arPlacement")&&(this[$scene].updateShadow(),this[$needsRender]()),be.has("arModes")&&(this[$arModes]=deserializeARModes(this.arModes)),(be.has("ar")||be.has("arModes")||be.has("src")||be.has("iosSrc"))&&this[$selectARMode]()}async activateAR(){switch(this[$arMode]){case ARMode.QUICK_LOOK:this[$openIOSARQuickLook]();break;case ARMode.WEBXR:await this[$enterARWithWebXR]();break;case ARMode.SCENE_VIEWER:this[$openSceneViewer]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");break}}async[(ee=$canActivateAR,ne=$arButtonContainer,ae=$arAnchor,ce=$arModes,le=$arMode,ue=$preload,he=$onARButtonContainerClick,fe=$onARStatus,me=$onARTracking,ge=$onARTap,$selectARMode)](){let be=ARMode.NONE;if(this.ar){if(this.src!=null)for(const Ee of this[$arModes]){if(Ee==="webxr"&&IS_WEBXR_AR_CANDIDATE&&!isWebXRBlocked&&await this[$renderer].arRenderer.supportsPresentation()){be=ARMode.WEBXR;break}if(Ee==="scene-viewer"&&IS_SCENEVIEWER_CANDIDATE&&!isSceneViewerBlocked){be=ARMode.SCENE_VIEWER;break}if(Ee==="quick-look"&&IS_AR_QUICKLOOK_CANDIDATE){be=ARMode.QUICK_LOOK;break}}be===ARMode.NONE&&this.iosSrc!=null&&IS_AR_QUICKLOOK_CANDIDATE&&(be=ARMode.QUICK_LOOK)}if(be!==ARMode.NONE)this[$arButtonContainer].classList.add("enabled"),this[$arButtonContainer].addEventListener("click",this[$onARButtonContainerClick]);else if(this[$arButtonContainer].classList.contains("enabled")){this[$arButtonContainer].removeEventListener("click",this[$onARButtonContainerClick]),this[$arButtonContainer].classList.remove("enabled");const Ee=ARStatus.FAILED;this.setAttribute("ar-status",Ee),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:Ee}}))}this[$arMode]=be}async[$enterARWithWebXR](){console.log("Attempting to present in AR with WebXR..."),await this[$triggerLoad]();try{this[$arButtonContainer].removeEventListener("click",this[$onARButtonContainerClick]);const{arRenderer:be}=this[$renderer];be.placeOnWall=this.arPlacement==="wall",await be.present(this[$scene],this.xrEnvironment)}catch(be){console.warn("Error while trying to present in AR with WebXR"),console.error(be),await this[$renderer].arRenderer.stopPresenting(),isWebXRBlocked=!0,console.warn("Falling back to next ar-mode"),await this[$selectARMode](),this.activateAR()}finally{this[$selectARMode]()}}async[$triggerLoad](){this.loaded||(this[$preload]=!0,this[$updateSource](),await waitForEvent(this,"load"),this[$preload]=!1)}[$shouldAttemptPreload](){return super[$shouldAttemptPreload]()||this[$preload]}[$openSceneViewer](){const be=self.location.toString(),Ee=new URL(be),Ce=new URL(this.src,be);Ce.hash&&(Ce.hash="");const Se=new URLSearchParams(Ce.search);if(Ee.hash=noArViewerSigil,Se.set("mode","ar_preferred"),Se.has("disable_occlusion")||Se.set("disable_occlusion","true"),this.arScale==="fixed"&&Se.set("resizable","false"),this.arPlacement==="wall"&&Se.set("enable_vertical_placement","true"),Se.has("sound")){const Ne=new URL(Se.get("sound"),be);Se.set("sound",Ne.toString())}if(Se.has("link")){const Ne=new URL(Se.get("link"),be);Se.set("link",Ne.toString())}const Te=`intent://arvr.google.com/scene-viewer/1.0?${Se.toString()+"&file="+encodeURIComponent(Ce.toString())}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(Ee.toString())};end;`,ke=()=>{self.location.hash===noArViewerSigil&&(isSceneViewerBlocked=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[$selectARMode]())};self.addEventListener("hashchange",ke,{once:!0}),this[$arAnchor].setAttribute("href",Te),console.log("Attempting to present in AR with Scene Viewer..."),this[$arAnchor].click()}async[$openIOSARQuickLook](){const be=!this.iosSrc;this[$arButtonContainer].classList.remove("enabled");const Ee=be?await this.prepareUSDZ():this.iosSrc,Ce=new URL(Ee,self.location.toString());if(be){const ke=self.location.toString(),Ne=new URL(ke),Fe=new URL(this.src,Ne);Fe.hash&&(Ce.hash=Fe.hash)}this.arScale==="fixed"&&(Ce.hash&&(Ce.hash+="&"),Ce.hash+="allowsContentScaling=0");const Se=this[$arAnchor];Se.setAttribute("rel","ar");const Te=document.createElement("img");Se.appendChild(Te),Se.setAttribute("href",Ce.toString()),be&&Se.setAttribute("download","model.usdz"),Se.style.display="none",Se.isConnected||this.shadowRoot.appendChild(Se),console.log("Attempting to present in AR with Quick Look..."),Se.click(),Se.removeChild(Te),be&&URL.revokeObjectURL(Ee),this[$arButtonContainer].classList.add("enabled")}async prepareUSDZ(){const be=this[$progressTracker].beginActivity();await this[$triggerLoad]();const{model:Ee,shadow:Ce}=this[$scene];if(Ee==null)return"";let Se=!1;Ce!=null&&(Se=Ce.visible,Ce.visible=!1),be(.2);const ke=await new USDZExporter().parse(Ee),Ne=new Blob([ke],{type:"model/vnd.usdz+zip"}),Fe=URL.createObjectURL(Ne);return be(1),Ce!=null&&(Ce.visible=Se),Fe}}return __decorate$2([e$4({type:Boolean,attribute:"ar"})],ve.prototype,"ar",void 0),__decorate$2([e$4({type:String,attribute:"ar-scale"})],ve.prototype,"arScale",void 0),__decorate$2([e$4({type:String,attribute:"ar-placement"})],ve.prototype,"arPlacement",void 0),__decorate$2([e$4({type:String,attribute:"ar-modes"})],ve.prototype,"arModes",void 0),__decorate$2([e$4({type:String,attribute:"ios-src"})],ve.prototype,"iosSrc",void 0),__decorate$2([e$4({type:Boolean,attribute:"xr-environment"})],ve.prototype,"xrEnvironment",void 0),ve};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$1=globalThis&&globalThis.__decorate||function(re,ee,ne,ae){var ce=arguments.length,le=ce<3?ee:ae===null?ae=Object.getOwnPropertyDescriptor(ee,ne):ae,ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")le=Reflect.decorate(re,ee,ne,ae);else for(var he=re.length-1;he>=0;he--)(ue=re[he])&&(le=(ce<3?ue(le):ce>3?ue(ee,ne,le):ue(ee,ne))||le);return ce>3&&le&&Object.defineProperty(ee,ne,le),le};const PROGRESS_BAR_UPDATE_THRESHOLD=100,DEFAULT_DRACO_DECODER_LOCATION="https://www.gstatic.com/draco/versioned/decoders/1.5.6/",DEFAULT_KTX2_TRANSCODER_LOCATION="https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/",DEFAULT_LOTTIE_LOADER_LOCATION="https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js",RevealStrategy={AUTO:"auto",MANUAL:"manual"},LoadingStrategy={AUTO:"auto",LAZY:"lazy",EAGER:"eager"},$defaultProgressBarElement=Symbol("defaultProgressBarElement"),$posterContainerElement=Symbol("posterContainerElement"),$defaultPosterElement=Symbol("defaultPosterElement"),$shouldDismissPoster=Symbol("shouldDismissPoster"),$hidePoster=Symbol("hidePoster"),$modelIsRevealed=Symbol("modelIsRevealed"),$updateProgressBar=Symbol("updateProgressBar"),$ariaLabelCallToAction=Symbol("ariaLabelCallToAction"),$onProgress=Symbol("onProgress"),LoadingMixin=re=>{var ee,ne,ae,ce,le,ue,he,fe;class me extends re{constructor(...ve){super(...ve),this.poster=null,this.reveal=RevealStrategy.AUTO,this.loading=LoadingStrategy.AUTO,this[ee]=!1,this[ne]=!1,this[ae]=this.shadowRoot.querySelector(".slot.poster"),this[ce]=this.shadowRoot.querySelector("#default-poster"),this[le]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[ue]=this[$defaultPosterElement].getAttribute("aria-label"),this[he]=throttle(Se=>{const Te=this[$defaultProgressBarElement].parentNode;requestAnimationFrame(()=>{this[$defaultProgressBarElement].style.transform=`scaleX(${Se})`,Se===0&&(Te.removeChild(this[$defaultProgressBarElement]),Te.appendChild(this[$defaultProgressBarElement])),Se===1?this[$defaultProgressBarElement].classList.add("hide"):this[$defaultProgressBarElement].classList.remove("hide")})},PROGRESS_BAR_UPDATE_THRESHOLD),this[fe]=Se=>{const Te=Se.detail.totalProgress;Te===1&&(this[$updateProgressBar].flush(),this.loaded&&(this[$shouldDismissPoster]||this.reveal===RevealStrategy.AUTO)&&this[$hidePoster]()),this[$updateProgressBar](Te),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:Te}}))};const ye=self.ModelViewerElement||{},be=ye.dracoDecoderLocation||DEFAULT_DRACO_DECODER_LOCATION;CachingGLTFLoader.setDRACODecoderLocation(be);const Ee=ye.ktx2TranscoderLocation||DEFAULT_KTX2_TRANSCODER_LOCATION;CachingGLTFLoader.setKTX2TranscoderLocation(Ee),ye.meshoptDecoderLocation&&CachingGLTFLoader.setMeshoptDecoderLocation(ye.meshoptDecoderLocation);const Ce=ye.lottieLoaderLocation||DEFAULT_LOTTIE_LOADER_LOCATION;Renderer.singleton.textureUtils.lottieLoaderUrl=Ce}static set dracoDecoderLocation(ve){CachingGLTFLoader.setDRACODecoderLocation(ve)}static get dracoDecoderLocation(){return CachingGLTFLoader.getDRACODecoderLocation()}static set ktx2TranscoderLocation(ve){CachingGLTFLoader.setKTX2TranscoderLocation(ve)}static get ktx2TranscoderLocation(){return CachingGLTFLoader.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(ve){CachingGLTFLoader.setMeshoptDecoderLocation(ve)}static get meshoptDecoderLocation(){return CachingGLTFLoader.getMeshoptDecoderLocation()}static set lottieLoaderLocation(ve){Renderer.singleton.textureUtils.lottieLoaderUrl=ve}static get lottieLoaderLocation(){return Renderer.singleton.textureUtils.lottieLoaderUrl}static mapURLs(ve){Renderer.singleton.loader[$loader].manager.setURLModifier(ve)}dismissPoster(){this.loaded?this[$hidePoster]():(this[$shouldDismissPoster]=!0,this[$updateSource]())}showPoster(){const ve=this[$posterContainerElement];if(ve.classList.contains("show"))return;ve.classList.add("show"),this[$userInputElement].classList.remove("show");const ye=this[$defaultPosterElement];ye.removeAttribute("tabindex"),ye.removeAttribute("aria-hidden");const be=this.modelIsVisible;this[$modelIsRevealed]=!1,this[$announceModelVisibility](be)}getDimensions(){return toVector3D(this[$scene].size)}getBoundingBoxCenter(){return toVector3D(this[$scene].boundingBox.getCenter(new Vector3))}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[$progressTracker].addEventListener("progress",this[$onProgress])}disconnectedCallback(){super.disconnectedCallback(),this[$progressTracker].removeEventListener("progress",this[$onProgress])}async updated(ve){super.updated(ve),ve.has("poster")&&this.poster!=null&&(this[$defaultPosterElement].style.backgroundImage=`url(${this.poster})`),ve.has("alt")&&this[$defaultPosterElement].setAttribute("aria-label",this[$altDefaulted]),(ve.has("reveal")||ve.has("loading"))&&this[$updateSource]()}[(ee=$modelIsRevealed,ne=$shouldDismissPoster,ae=$posterContainerElement,ce=$defaultPosterElement,le=$defaultProgressBarElement,ue=$ariaLabelCallToAction,he=$updateProgressBar,fe=$onProgress,$shouldAttemptPreload)](){return!!this.src&&(this[$shouldDismissPoster]||this.loading===LoadingStrategy.EAGER||this.reveal===RevealStrategy.AUTO&&this[$isElementInViewport])}[$hidePoster](){this[$shouldDismissPoster]=!1;const ve=this[$posterContainerElement];if(!ve.classList.contains("show"))return;ve.classList.remove("show"),this[$userInputElement].classList.add("show");const ye=this.modelIsVisible;this[$modelIsRevealed]=!0,this[$announceModelVisibility](ye);const be=this.getRootNode();be&&be.activeElement===this&&this[$userInputElement].focus();const Ee=this[$defaultPosterElement];Ee.setAttribute("aria-hidden","true"),Ee.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[$getModelIsVisible](){return super[$getModelIsVisible]()&&this[$modelIsRevealed]}}return __decorate$1([e$4({type:String})],me.prototype,"poster",void 0),__decorate$1([e$4({type:String})],me.prototype,"reveal",void 0),__decorate$1([e$4({type:String})],me.prototype,"loading",void 0),me};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate=globalThis&&globalThis.__decorate||function(re,ee,ne,ae){var ce=arguments.length,le=ce<3?ee:ae===null?ae=Object.getOwnPropertyDescriptor(ee,ne):ae,ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")le=Reflect.decorate(re,ee,ne,ae);else for(var he=re.length-1;he>=0;he--)(ue=re[he])&&(le=(ce<3?ue(le):ce>3?ue(ee,ne,le):ue(ee,ne))||le);return ce>3&&le&&Object.defineProperty(ee,ne,le),le};const DEFAULT_ROTATION_SPEED=Math.PI/32,AUTO_ROTATE_DELAY_DEFAULT=3e3,rotationRateIntrinsics={basis:[degreesToRadians(numberNode(DEFAULT_ROTATION_SPEED,"rad"))],keywords:{auto:[null]}},$autoRotateStartTime=Symbol("autoRotateStartTime"),$radiansPerSecond=Symbol("radiansPerSecond"),$syncRotationRate=Symbol("syncRotationRate"),$onCameraChange=Symbol("onCameraChange"),StagingMixin=re=>{var ee,ne,ae;class ce extends re{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=AUTO_ROTATE_DELAY_DEFAULT,this.rotationPerSecond="auto",this[ee]=performance.now(),this[ne]=0,this[ae]=ue=>{this.autoRotate&&ue.detail.source==="user-interaction"&&(this[$autoRotateStartTime]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[$onCameraChange]),this[$autoRotateStartTime]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[$onCameraChange]),this[$autoRotateStartTime]=performance.now()}updated(ue){super.updated(ue),ue.has("autoRotate")&&(this[$autoRotateStartTime]=performance.now())}[(ee=$autoRotateStartTime,ne=$radiansPerSecond,$syncRotationRate)](ue){this[$radiansPerSecond]=ue[0]}[$tick](ue,he){if(super[$tick](ue,he),!this.autoRotate||!this[$getModelIsVisible]()||this[$renderer].isPresenting)return;const fe=Math.min(he,ue-this[$autoRotateStartTime]-this.autoRotateDelay);fe>0&&(this[$scene].yaw=this.turntableRotation+this[$radiansPerSecond]*fe*.001)}get turntableRotation(){return this[$scene].yaw}resetTurntableRotation(ue=0){this[$scene].yaw=ue}}return ae=$onCameraChange,__decorate([e$4({type:Boolean,attribute:"auto-rotate"})],ce.prototype,"autoRotate",void 0),__decorate([e$4({type:Number,attribute:"auto-rotate-delay"})],ce.prototype,"autoRotateDelay",void 0),__decorate([style$3({intrinsics:rotationRateIntrinsics,updateHandler:$syncRotationRate}),e$4({type:String,attribute:"rotation-per-second"})],ce.prototype,"rotationPerSecond",void 0),ce},FocusVisiblePolyfillMixin=re=>{var ee;const ne=le=>{if(le.shadowRoot==null||le.hasAttribute("data-js-focus-visible"))return()=>{};if(self.applyFocusVisiblePolyfill)self.applyFocusVisiblePolyfill(le.shadowRoot);else{const ue=()=>{self.applyFocusVisiblePolyfill(le.shadowRoot)};return self.addEventListener("focus-visible-polyfill-ready",ue,{once:!0}),()=>{self.removeEventListener("focus-visible-polyfill-ready",ue)}}return()=>{}},ae=Symbol("endPolyfillCoordination");class ce extends re{constructor(){super(...arguments),this[ee]=null}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[ae]==null&&(this[ae]=ne(this))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this[ae]!=null&&(this[ae](),this[ae]=null)}}return ee=ae,ce};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ModelViewerElement=AnnotationMixin(SceneGraphMixin(StagingMixin(EnvironmentMixin(ControlsMixin(ARMixin(LoadingMixin(AnimationMixin(FocusVisiblePolyfillMixin(ModelViewerElementBase)))))))));customElements.define("model-viewer",ModelViewerElement);const GLBComponent=({artifactUri:re,displayUri:ee,previewUri:ne,displayView:ae,nft:ce})=>{let le={src:ne||re};return ae&&(le={...le,autoplay:!0,"auto-rotate":!0,"data-js-focus-visible":!0,"interaction-prompt":"none",ar:!0,"ar-modes":"webxr scene-viewer quick-look","camera-controls":!0}),ae?jsx$1("model-viewer",{...le,title:`GLB object ${ce.token_id}`,children:jsx$1("button",{slot:"ar-button",className:styles$Q.arButton,children:"AR"})}):jsx$1(ImageComponent,{previewUri:ne,displayUri:ee,displayView:!1,nft:ce})},iOS=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,container$r="_container_1lpzo_216",displayviewVideo="_displayviewVideo_1lpzo_221",video="_video_1lpzo_227",icon$1="_icon_1lpzo_232",styles$O={container:container$r,displayviewVideo,video,icon:icon$1},VideoComponent=({artifactUri:re,displayUri:ee,previewUri:ne,inView:ae,displayView:ce,nft:le,forceVideo:ue})=>{const he=reactExports.useRef();return reactExports.useEffect(()=>{if(!ce)return;const fe=ge=>iOS||ge.readyState>2,me=ge=>ge.currentTime>0&&!ge.paused&&!ge.ended&&ge.readyState>2;if(ae){if(fe(he.current))try{he.current.play()}catch(ge){console.error(ge)}}else if(fe(he.current)&&me(he.current))try{he.current.pause()}catch(ge){console.error(ge)}},[ae,ce]),ce||ue?jsx$1("video",{ref:he,className:styles$O.displayviewVideo,autoPlay:!0,playsInline:!0,muted:!ce,loop:!0,controls:ce,src:ne||re,poster:ee,title:`video object ${le.token_id}`}):jsxs(Fragment,{children:[jsx$1("div",{className:styles$O.icon,children:jsx$1(VideoIcon,{size:32})}),jsx$1(ImageComponent,{artifactUri:re,displayUri:ee,previewUri:ne,inView:ae,displayView:ce,nft:le})]})},feed_container$2="_feed_container_1vzb9_216",container$q="_container_1vzb9_217",button$4="_button_1vzb9_232",styles$N={feed_container:feed_container$2,container:container$q,button:button$4},AudioComponent=({artifactUri:re,displayUri:ee,previewUri:ne,displayView:ae,nft:ce})=>{const le=reactExports.useRef(),[ue,he]=reactExports.useState(!1),fe=()=>{he(!ue)};return reactExports.useEffect(()=>{le.current&&(ue?le.current.play():le.current.pause())},[ue]),ae?jsxs("div",{className:styles$N.container,children:[jsx$1("img",{src:ee,alt:`cover for audio object ${ce.token_id}`}),jsx$1("audio",{playsInline:!0,autoPlay:ae,src:ne||re,controls:!0})]}):jsxs("div",{className:styles$N.feed_container,children:[jsx$1(Button,{to:`${PATH.OBJKT}/${ce.token_id}`,children:jsx$1("img",{alt:`cover for audio object ${ce.token_id}`,src:ee})}),jsx$1(Button,{className:styles$N.button,onClick:fe,children:ue?jsx$1(SvgPause,{fill:"var(--gray-10)",width:64,height:64}):jsx$1(SvgPlay,{fill:"var(--gray-10)",width:64,height:64})}),jsx$1("audio",{ref:le,src:ne||re})]})},vector="_vector_19knq_1",display="_display_19knq_24",container$p="_container_19knq_32",interactive$1="_interactive_19knq_47",styles$M={vector,display,container:container$p,interactive:interactive$1},index$2="",VectorComponent=({artifactUri:re,previewUri:ee,displayView:ne,nft:ae})=>{const ce=useUserStore(me=>me.address),le=classNames$1({[styles$M.container]:!0,[styles$M.interactive]:ne,[styles$M.display]:ne});let ue=!1,he=!1;ce&&(ue=ce),ae.token_id&&(he=ae.token_id);const fe=ee||`${re}?creator=${ae.artist_address}&viewer=${ue}&objkt=${he}`;return ne?jsx$1("div",{className:le,children:jsx$1("iframe",{title:`SVG object ${ae.token_id}`,src:fe,sandbox:"allow-scripts",scrolling:"no"})}):jsx$1("div",{className:`${le} vector-container`,children:jsx$1("iframe",{className:`${styles$M.vector} vector`,title:`SVG object ${ae.token_id}`,src:fe,sandbox:"allow-scripts",scrolling:"no"})})};var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(re,ee){for(var ne=new u16(31),ae=0;ae<31;++ae)ne[ae]=ee+=1<<re[ae-1];for(var ce=new u32(ne[30]),ae=1;ae<30;++ae)for(var le=ne[ae];le<ne[ae+1];++le)ce[le]=le-ne[ae]<<5|ae;return[ne,ce]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>>8|(x$1&255)<<8)>>>1}var hMap=function(re,ee,ne){for(var ae=re.length,ce=0,le=new u16(ee);ce<ae;++ce)re[ce]&&++le[re[ce]-1];var ue=new u16(ee);for(ce=0;ce<ee;++ce)ue[ce]=ue[ce-1]+le[ce-1]<<1;var he;if(ne){he=new u16(1<<ee);var fe=15-ee;for(ce=0;ce<ae;++ce)if(re[ce])for(var me=ce<<4|re[ce],ge=ee-re[ce],ve=ue[re[ce]-1]++<<ge,ye=ve|(1<<ge)-1;ve<=ye;++ve)he[rev[ve]>>>fe]=me}else for(he=new u16(ae),ce=0;ce<ae;++ce)re[ce]&&(he[ce]=rev[ue[re[ce]-1]++]>>>15-re[ce]);return he},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flrm=hMap(flt,9,1),fdrm=hMap(fdt,5,1),max$5=function(re){for(var ee=re[0],ne=1;ne<re.length;++ne)re[ne]>ee&&(ee=re[ne]);return ee},bits$1=function(re,ee,ne){var ae=ee/8|0;return(re[ae]|re[ae+1]<<8)>>(ee&7)&ne},bits16=function(re,ee){var ne=ee/8|0;return(re[ne]|re[ne+1]<<8|re[ne+2]<<16)>>(ee&7)},shft=function(re){return(re+7)/8|0},slc=function(re,ee,ne){(ee==null||ee<0)&&(ee=0),(ne==null||ne>re.length)&&(ne=re.length);var ae=new(re.BYTES_PER_ELEMENT==2?u16:re.BYTES_PER_ELEMENT==4?u32:u8)(ne-ee);return ae.set(re.subarray(ee,ne)),ae},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(re,ee,ne){var ae=new Error(ee||ec[re]);if(ae.code=re,Error.captureStackTrace&&Error.captureStackTrace(ae,err),!ne)throw ae;return ae},inflt=function(re,ee,ne){var ae=re.length;if(!ae||ne&&ne.f&&!ne.l)return ee||new u8(0);var ce=!ee||ne,le=!ne||ne.i;ne||(ne={}),ee||(ee=new u8(ae*3));var ue=function(fn){var an=ee.length;if(fn>an){var un=new u8(Math.max(an*2,fn));un.set(ee),ee=un}},he=ne.f||0,fe=ne.p||0,me=ne.b||0,ge=ne.l,ve=ne.d,ye=ne.m,be=ne.n,Ee=ae*8;do{if(!ge){he=bits$1(re,fe,1);var Ce=bits$1(re,fe+1,3);if(fe+=3,Ce)if(Ce==1)ge=flrm,ve=fdrm,ye=9,be=5;else if(Ce==2){var Ne=bits$1(re,fe,31)+257,Fe=bits$1(re,fe+10,15)+4,De=Ne+bits$1(re,fe+5,31)+1;fe+=14;for(var Oe=new u8(De),Re=new u8(19),Be=0;Be<Fe;++Be)Re[clim[Be]]=bits$1(re,fe+Be*3,7);fe+=Fe*3;for(var Le=max$5(Re),je=(1<<Le)-1,Ge=hMap(Re,Le,1),Be=0;Be<De;){var qe=Ge[bits$1(re,fe,je)];fe+=qe&15;var Se=qe>>>4;if(Se<16)Oe[Be++]=Se;else{var Ue=0,ze=0;for(Se==16?(ze=3+bits$1(re,fe,3),fe+=2,Ue=Oe[Be-1]):Se==17?(ze=3+bits$1(re,fe,7),fe+=3):Se==18&&(ze=11+bits$1(re,fe,127),fe+=7);ze--;)Oe[Be++]=Ue}}var He=Oe.subarray(0,Ne),Ye=Oe.subarray(Ne);ye=max$5(He),be=max$5(Ye),ge=hMap(He,ye,1),ve=hMap(Ye,be,1)}else err(1);else{var Se=shft(fe)+4,Te=re[Se-4]|re[Se-3]<<8,ke=Se+Te;if(ke>ae){le&&err(0);break}ce&&ue(me+Te),ee.set(re.subarray(Se,ke),me),ne.b=me+=Te,ne.p=fe=ke*8,ne.f=he;continue}if(fe>Ee){le&&err(0);break}}ce&&ue(me+131072);for(var Xe=(1<<ye)-1,We=(1<<be)-1,Ze=fe;;Ze=fe){var Ue=ge[bits16(re,fe)&Xe],Vt=Ue>>>4;if(fe+=Ue&15,fe>Ee){le&&err(0);break}if(Ue||err(2),Vt<256)ee[me++]=Vt;else if(Vt==256){Ze=fe,ge=null;break}else{var Qt=Vt-254;if(Vt>264){var Be=Vt-257,Yt=fleb[Be];Qt=bits$1(re,fe,(1<<Yt)-1)+fl[Be],fe+=Yt}var Jt=ve[bits16(re,fe)&We],rn=Jt>>>4;Jt||err(3),fe+=Jt&15;var Ye=fd[rn];if(rn>3){var Yt=fdeb[rn];Ye+=bits16(re,fe)&(1<<Yt)-1,fe+=Yt}if(fe>Ee){le&&err(0);break}ce&&ue(me+131072);for(var nn=me+Qt;me<nn;me+=4)ee[me]=ee[me-Ye],ee[me+1]=ee[me+1-Ye],ee[me+2]=ee[me+2-Ye],ee[me+3]=ee[me+3-Ye];me=nn}}ne.l=ge,ne.p=Ze,ne.b=me,ne.f=he,ge&&(he=1,ne.m=ye,ne.d=ve,ne.n=be)}while(!he);return me==ee.length?ee:slc(ee,0,me)},et=new u8(0),b2=function(re,ee){return re[ee]|re[ee+1]<<8},b4=function(re,ee){return(re[ee]|re[ee+1]<<8|re[ee+2]<<16|re[ee+3]<<24)>>>0},b8=function(re,ee){return b4(re,ee)+b4(re,ee+4)*4294967296};function inflateSync(re,ee){return inflt(re,ee)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch{}var dutf8=function(re){for(var ee="",ne=0;;){var ae=re[ne++],ce=(ae>127)+(ae>223)+(ae>239);if(ne+ce>re.length)return[ee,slc(re,ne-1)];ce?ce==3?(ae=((ae&15)<<18|(re[ne++]&63)<<12|(re[ne++]&63)<<6|re[ne++]&63)-65536,ee+=String.fromCharCode(55296|ae>>10,56320|ae&1023)):ce&1?ee+=String.fromCharCode((ae&31)<<6|re[ne++]&63):ee+=String.fromCharCode((ae&15)<<12|(re[ne++]&63)<<6|re[ne++]&63):ee+=String.fromCharCode(ae)}};function strFromU8(re,ee){if(ee){for(var ne="",ae=0;ae<re.length;ae+=16384)ne+=String.fromCharCode.apply(null,re.subarray(ae,ae+16384));return ne}else{if(td)return td.decode(re);var ce=dutf8(re),le=ce[0],ue=ce[1];return ue.length&&err(8),le}}var slzh=function(re,ee){return ee+30+b2(re,ee+26)+b2(re,ee+28)},zh=function(re,ee,ne){var ae=b2(re,ee+28),ce=strFromU8(re.subarray(ee+46,ee+46+ae),!(b2(re,ee+8)&2048)),le=ee+46+ae,ue=b4(re,ee+20),he=ne&&ue==4294967295?z64e(re,le):[ue,b4(re,ee+24),b4(re,ee+42)],fe=he[0],me=he[1],ge=he[2];return[b2(re,ee+10),fe,me,ce,le+b2(re,ee+30)+b2(re,ee+32),ge]},z64e=function(re,ee){for(;b2(re,ee)!=1;ee+=4+b2(re,ee+2));return[b8(re,ee+12),b8(re,ee+4),b8(re,ee+20)]};function unzipSync(re,ee){for(var ne={},ae=re.length-22;b4(re,ae)!=101010256;--ae)(!ae||re.length-ae>65558)&&err(13);var ce=b2(re,ae+8);if(!ce)return{};var le=b4(re,ae+16),ue=le==4294967295||ce==65535;if(ue){var he=b4(re,ae-12);ue=b4(re,he)==101075792,ue&&(ce=b4(re,he+32),le=b4(re,he+48))}for(var fe=ee&&ee.filter,me=0;me<ce;++me){var ge=zh(re,le,ue),ve=ge[0],ye=ge[1],be=ge[2],Ee=ge[3],Ce=ge[4],Se=ge[5],Te=slzh(re,Se);le=Ce,(!fe||fe({name:Ee,size:ye,originalSize:be,compression:ve}))&&(ve?ve==8?ne[Ee]=inflateSync(re.subarray(Te,Te+ye),new u8(be)):err(14,"unknown compression type "+ve):ne[Ee]=slc(re,Te,Te+ye))}return ne}var mimeTypes={};const require$$0={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}};/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015-2022 Douglas Christopher Wilson
 * MIT Licensed
 */var mimeDb=require$$0;function assertPath(re){if(typeof re!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(re))}function normalizeStringPosix(re,ee){for(var ne="",ae=0,ce=-1,le=0,ue,he=0;he<=re.length;++he){if(he<re.length)ue=re.charCodeAt(he);else{if(ue===47)break;ue=47}if(ue===47){if(!(ce===he-1||le===1))if(ce!==he-1&&le===2){if(ne.length<2||ae!==2||ne.charCodeAt(ne.length-1)!==46||ne.charCodeAt(ne.length-2)!==46){if(ne.length>2){var fe=ne.lastIndexOf("/");if(fe!==ne.length-1){fe===-1?(ne="",ae=0):(ne=ne.slice(0,fe),ae=ne.length-1-ne.lastIndexOf("/")),ce=he,le=0;continue}}else if(ne.length===2||ne.length===1){ne="",ae=0,ce=he,le=0;continue}}ee&&(ne.length>0?ne+="/..":ne="..",ae=2)}else ne.length>0?ne+="/"+re.slice(ce+1,he):ne=re.slice(ce+1,he),ae=he-ce-1;ce=he,le=0}else ue===46&&le!==-1?++le:le=-1}return ne}function _format(re,ee){var ne=ee.dir||ee.root,ae=ee.base||(ee.name||"")+(ee.ext||"");return ne?ne===ee.root?ne+ae:ne+re+ae:ae}var posix={resolve:function(){for(var ee="",ne=!1,ae,ce=arguments.length-1;ce>=-1&&!ne;ce--){var le;ce>=0?le=arguments[ce]:(ae===void 0&&(ae=browser$1$1.cwd()),le=ae),assertPath(le),le.length!==0&&(ee=le+"/"+ee,ne=le.charCodeAt(0)===47)}return ee=normalizeStringPosix(ee,!ne),ne?ee.length>0?"/"+ee:"/":ee.length>0?ee:"."},normalize:function(ee){if(assertPath(ee),ee.length===0)return".";var ne=ee.charCodeAt(0)===47,ae=ee.charCodeAt(ee.length-1)===47;return ee=normalizeStringPosix(ee,!ne),ee.length===0&&!ne&&(ee="."),ee.length>0&&ae&&(ee+="/"),ne?"/"+ee:ee},isAbsolute:function(ee){return assertPath(ee),ee.length>0&&ee.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var ee,ne=0;ne<arguments.length;++ne){var ae=arguments[ne];assertPath(ae),ae.length>0&&(ee===void 0?ee=ae:ee+="/"+ae)}return ee===void 0?".":posix.normalize(ee)},relative:function(ee,ne){if(assertPath(ee),assertPath(ne),ee===ne||(ee=posix.resolve(ee),ne=posix.resolve(ne),ee===ne))return"";for(var ae=1;ae<ee.length&&ee.charCodeAt(ae)===47;++ae);for(var ce=ee.length,le=ce-ae,ue=1;ue<ne.length&&ne.charCodeAt(ue)===47;++ue);for(var he=ne.length,fe=he-ue,me=le<fe?le:fe,ge=-1,ve=0;ve<=me;++ve){if(ve===me){if(fe>me){if(ne.charCodeAt(ue+ve)===47)return ne.slice(ue+ve+1);if(ve===0)return ne.slice(ue+ve)}else le>me&&(ee.charCodeAt(ae+ve)===47?ge=ve:ve===0&&(ge=0));break}var ye=ee.charCodeAt(ae+ve),be=ne.charCodeAt(ue+ve);if(ye!==be)break;ye===47&&(ge=ve)}var Ee="";for(ve=ae+ge+1;ve<=ce;++ve)(ve===ce||ee.charCodeAt(ve)===47)&&(Ee.length===0?Ee+="..":Ee+="/..");return Ee.length>0?Ee+ne.slice(ue+ge):(ue+=ge,ne.charCodeAt(ue)===47&&++ue,ne.slice(ue))},_makeLong:function(ee){return ee},dirname:function(ee){if(assertPath(ee),ee.length===0)return".";for(var ne=ee.charCodeAt(0),ae=ne===47,ce=-1,le=!0,ue=ee.length-1;ue>=1;--ue)if(ne=ee.charCodeAt(ue),ne===47){if(!le){ce=ue;break}}else le=!1;return ce===-1?ae?"/":".":ae&&ce===1?"//":ee.slice(0,ce)},basename:function(ee,ne){if(ne!==void 0&&typeof ne!="string")throw new TypeError('"ext" argument must be a string');assertPath(ee);var ae=0,ce=-1,le=!0,ue;if(ne!==void 0&&ne.length>0&&ne.length<=ee.length){if(ne.length===ee.length&&ne===ee)return"";var he=ne.length-1,fe=-1;for(ue=ee.length-1;ue>=0;--ue){var me=ee.charCodeAt(ue);if(me===47){if(!le){ae=ue+1;break}}else fe===-1&&(le=!1,fe=ue+1),he>=0&&(me===ne.charCodeAt(he)?--he===-1&&(ce=ue):(he=-1,ce=fe))}return ae===ce?ce=fe:ce===-1&&(ce=ee.length),ee.slice(ae,ce)}else{for(ue=ee.length-1;ue>=0;--ue)if(ee.charCodeAt(ue)===47){if(!le){ae=ue+1;break}}else ce===-1&&(le=!1,ce=ue+1);return ce===-1?"":ee.slice(ae,ce)}},extname:function(ee){assertPath(ee);for(var ne=-1,ae=0,ce=-1,le=!0,ue=0,he=ee.length-1;he>=0;--he){var fe=ee.charCodeAt(he);if(fe===47){if(!le){ae=he+1;break}continue}ce===-1&&(le=!1,ce=he+1),fe===46?ne===-1?ne=he:ue!==1&&(ue=1):ne!==-1&&(ue=-1)}return ne===-1||ce===-1||ue===0||ue===1&&ne===ce-1&&ne===ae+1?"":ee.slice(ne,ce)},format:function(ee){if(ee===null||typeof ee!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof ee);return _format("/",ee)},parse:function(ee){assertPath(ee);var ne={root:"",dir:"",base:"",ext:"",name:""};if(ee.length===0)return ne;var ae=ee.charCodeAt(0),ce=ae===47,le;ce?(ne.root="/",le=1):le=0;for(var ue=-1,he=0,fe=-1,me=!0,ge=ee.length-1,ve=0;ge>=le;--ge){if(ae=ee.charCodeAt(ge),ae===47){if(!me){he=ge+1;break}continue}fe===-1&&(me=!1,fe=ge+1),ae===46?ue===-1?ue=ge:ve!==1&&(ve=1):ue!==-1&&(ve=-1)}return ue===-1||fe===-1||ve===0||ve===1&&ue===fe-1&&ue===he+1?fe!==-1&&(he===0&&ce?ne.base=ne.name=ee.slice(1,fe):ne.base=ne.name=ee.slice(he,fe)):(he===0&&ce?(ne.name=ee.slice(1,ue),ne.base=ee.slice(1,fe)):(ne.name=ee.slice(he,ue),ne.base=ee.slice(he,fe)),ne.ext=ee.slice(ue,fe)),he>0?ne.dir=ee.slice(0,he-1):ce&&(ne.dir="/"),ne},sep:"/",delimiter:":",win32:null,posix:null};posix.posix=posix;var pathBrowserify=posix;/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */(function(re){var ee=mimeDb,ne=pathBrowserify.extname,ae=/^\s*([^;\s]*)(?:;|\s|$)/,ce=/^text\//i;re.charset=le,re.charsets={lookup:le},re.contentType=ue,re.extension=he,re.extensions=Object.create(null),re.lookup=fe,re.types=Object.create(null),me(re.extensions,re.types);function le(ge){if(!ge||typeof ge!="string")return!1;var ve=ae.exec(ge),ye=ve&&ee[ve[1].toLowerCase()];return ye&&ye.charset?ye.charset:ve&&ce.test(ve[1])?"UTF-8":!1}function ue(ge){if(!ge||typeof ge!="string")return!1;var ve=ge.indexOf("/")===-1?re.lookup(ge):ge;if(!ve)return!1;if(ve.indexOf("charset")===-1){var ye=re.charset(ve);ye&&(ve+="; charset="+ye.toLowerCase())}return ve}function he(ge){if(!ge||typeof ge!="string")return!1;var ve=ae.exec(ge),ye=ve&&re.extensions[ve[1].toLowerCase()];return!ye||!ye.length?!1:ye[0]}function fe(ge){if(!ge||typeof ge!="string")return!1;var ve=ne("x."+ge).toLowerCase().substr(1);return ve&&re.types[ve]||!1}function me(ge,ve){var ye=["nginx","apache",void 0,"iana"];Object.keys(ee).forEach(function(Ee){var Ce=ee[Ee],Se=Ce.extensions;if(!(!Se||!Se.length)){ge[Ee]=Se;for(var Te=0;Te<Se.length;Te++){var ke=Se[Te];if(ve[ke]){var Ne=ye.indexOf(ee[ve[ke]].source),Fe=ye.indexOf(Ce.source);if(ve[ke]!=="application/octet-stream"&&(Ne>Fe||Ne===Fe&&ve[ke].substr(0,12)==="application/"))continue}ve[ke]=Ee}}})}})(mimeTypes);const mime=getDefaultExportFromCjs(mimeTypes);async function prepareFilesFromZIP(re){console.debug("Preparing files from ZIP");let ee=await unzipBuffer(re);const ne=ee["index.html"];ee["index_raw.html"]=new Blob([ne],{type:ne.type});for(let ae in ee)if(ae.endsWith(".html")||ae.endsWith(".htm")){const ce=await ee[ae].arrayBuffer(),le=injectCSPMetaTagIntoBuffer(ce);ee[ae]=new Blob([le],{type:ne.type})}return ee=Object.entries(ee).map(ae=>(console.debug("Entry: ",ae),{path:ae[0],blob:ae[1]})),ee=ee.filter(ae=>ae.path!==""),ee}async function unzipBuffer(re){console.debug("Unzipping buffer");let ee=unzipSync(re);ee=Object.entries(ee).map(ce=>(console.debug("Entry: ",ce),{path:ce[0],buffer:ce[1]}));let ne=null;for(const ce of ee)if(ce.path.replace(/^.*[\\/]/,"")==="index.html"){const ue=ce.path.match(/.*\//)||"/";ue.length>0&&(console.debug("Found root dir: ",ue[0]),ne=ue[0]);break}if(ne===null){const ce="No index.html file found!";throw new Error(ce)}console.debug("Creating file map");const ae={};return ee.forEach((ce,le)=>{const ue=ne==="/"?ce.path:ce.path.replace(`${ne}`,"");console.debug("Entry relPath: ",ue);let he;ce.buffer.length===0&&(ce.path.endsWith("/")||!ce.path)?he=MIMETYPE.DIRECTORY:he=mime.lookup(ce.path),ae[ue]=new Blob([ce.buffer],{type:he})}),ae}function injectCSPMetaTagIntoBuffer(re){const ee=new TextDecoder().decode(re),ne=injectCSPMetaTagIntoHTML(ee);return new TextEncoder().encode(ne)}function injectCSPMetaTagIntoHTML(re){const ne=new DOMParser().parseFromString(re,"text/html"),ae=ne.head.querySelectorAll('meta[http-equiv="Content-Security-Policy"]');if(ae.length)for(const ce of ae)ce.remove();if(!ne.head){const ce="index.html is missing <head> tag!";throw window.alert(ce),new Error(ce)}return ne.head.insertAdjacentHTML("afterbegin",`
    <meta http-equiv="Content-Security-Policy" content="
    upgrade-insecure-requests;
    default-src
      'none';
    frame-src
      'self';
    child-src
      'self'
      'unsafe-inline'
      blob:;
    script-src
      'self'
      'unsafe-inline'
      'unsafe-eval'
      blob:;
    style-src
      'self'
      'unsafe-inline';
    img-src
      'self'
      'unsafe-inline'
      data:
      blob:
      https://services.tzkt.io
      https://cloudflare-ipfs.com/
      https://ipfs.io/
      https://templewallet.com/logo.png
      https://gateway.pinata.cloud/;
    font-src
      'self'
      data:
      https://cloudflare-ipfs.com/
      https://fonts.googleapis.com/
      https://ipfs.io/
      https://gateway.pinata.cloud/;
    connect-src
      'self'
      https://better-call.dev
      https://*.better-call.dev
      https://*.cryptonomic-infra.tech
      https://cryptonomic-infra.tech
      blob:
      data:
      ws:
      wss:
      bootstrap.libp2p.io
      preload.ipfs.io
      https://mainnet.smartpy.io
      https://mainnet-tezos.giganode.io
      https://api.etherscan.io
      https://api.thegraph.com
      https://*.tzkt.io
      https://api.hicdex.com
      https://hdapi.teztools.io
      https://*.teia.rocks
      https://data.objkt.com
      https://api.tzstats.com
      https://*.wikidata.org
      https://*.coinmarketcap.com
      https://api.openweathermap.org
      https://hicetnunc.xyz
      https://*.hicetnunc.xyz
      https://teia.art
      https://*.teia.art
      https://api.teztok.com
      https://*.connkt.art
      https://*.hicetnunc.art
      https://*.teztools.io;
    manifest-src
      'self';
    base-uri
      'self';
    form-action
      'none';
    media-src
      'self'
      'unsafe-inline'
      data:
      blob:
      https://cloudflare-ipfs.com/
      https://ipfs.io/
      https://gateway.pinata.cloud/;
    prefetch-src
      'self'
      https://cloudflare-ipfs.com/
      https://fonts.googleapis.com/
      https://ipfs.io/
      https://gateway.pinata.cloud/;
    worker-src
      'self'
      'unsafe-inline'
      blob:;">
  `),`<!DOCTYPE html><html>${ne.documentElement.innerHTML}</html>`}async function validateFiles(re){if(!re["index.html"])return{valid:!1,error:"Missing index.html file"};let ne=await re["index.html"].text();return new DOMParser().parseFromString(ne,"text/html").head?{valid:!0}:{valid:!1,error:"Missing <head> tag in index.html. Please refer to the Interactive OBJKTs Guide.."}}async function dataRUIToBuffer(re){const ee=await fetch(re).then(ce=>ce.blob()),ne=await new Response(ee).arrayBuffer();return new Uint8Array(ne)}const html="_html_1to66_1",container$o="_container_1to66_24",interactive="_interactive_1to66_38",preview$2="_preview_1to66_43",button$3="_button_1to66_51",gradient$2="_gradient_1to66_61",warning="_warning_1to66_88",error$1="_error_1to66_96",styles$L={html,container:container$o,interactive,preview:preview$2,button:button$3,gradient:gradient$2,warning,error:error$1},uid=Math.round(Math.random()*1e8).toString(),allowed_features="accelerometer; camera; fullscreen; gyroscope; microphone; midi *; xr-spatial-tracking;",sandbox_features="allow-scripts allow-same-origin allow-modals allow-pointer-lock",HTMLComponent=re=>{const{artifactUri:ee,displayUri:ne,previewUri:ae,nft:ce,displayView:le}=re,ue=useUserStore(Fe=>Fe.address),he=useModalStore(Fe=>Fe.show);let fe=!1,me=!1,ge=!1;ce.artist_address&&(fe=ce.artist_address),ue&&(me=ue),ce.token_id&&(ge=String(ce.token_id));const ve=reactExports.useRef(null),ye=reactExports.useRef(null),be=reactExports.useRef(!1),[Ee,Ce]=reactExports.useState(null),[Se,Te]=reactExports.useState(null),ke=async()=>{be.current=!0;const Fe=await dataRUIToBuffer(ae);try{const Oe=(await prepareFilesFromZIP(Fe)).reduce((Be,Le)=>({...Be,[Le.path]:Le.blob}),{});ye.current=Oe;const Re=await validateFiles(ye.current);Re.error?(console.error(Re.error),Te(Re.error)):Te(null),Ce(Re.valid),be.current=!1}catch(De){he(`Couldn't unpack ZIP file: ${De}`),console.error(De);return}};ae&&!ye.current&&!be.current&&ke(),reactExports.useEffect(()=>{const Fe=async De=>{De.data===uid&&ve.current.contentWindow.postMessage({target:"hicetnunc-html-preview",data:ye.current},"*")};return window.addEventListener("message",Fe),()=>window.removeEventListener("message",Fe)},[ae]);const Ne=classNames$1({[styles$L.container]:!0,[styles$L.interactive]:le});if(ae){if(fe=me,Ee)return jsx$1("div",{className:Ne,children:jsx$1("iframe",{ref:ve,title:`interactive object ${ce.token_id}`,src:`https://iframe.teia.art/html/?uid=${uid}&creator=${fe}&viewer=${me}&objkt=${ge}`,sandbox:sandbox_features,allow:allowed_features})});if(Ee===!1)return jsxs("div",{className:styles$L.error,children:["Preview Error: ",Se]})}return le?jsx$1("div",{children:jsx$1("iframe",{className:`${styles$L.html} zip-embed`,title:`interactive object ${ce.token_id}`,src:`${ee}/?creator=${fe}&viewer=${me}&objkt=${ge}`,sandbox:sandbox_features,allow:allowed_features})}):jsx$1("div",{className:Ne,children:jsxs("div",{className:styles$L.preview,children:[jsx$1("img",{src:ne,alt:`interactive object ${ce.token_id}`}),jsx$1("div",{className:styles$L.button,children:jsx$1(Button,{alt:"View Generative Token",children:jsx$1(GenerativeIcon,{})})})]})})},UnknownComponent=({mimeType:re})=>{const[ee,ne]=reactExports.useState("checking");return reactExports.useEffect(()=>{const ae=re==null?void 0:re.toLowerCase().includes("png");ne(ae?"processing":"unknown")},[re]),jsx$1("div",{className:"flex items-center justify-center p-4",children:jsx$1("div",{className:"bg-gray-100 rounded p-4 text-center",children:ee==="processing"?jsxs("div",{children:[jsx$1("p",{children:"Metadata processing..."}),jsx$1("p",{className:"text-sm text-gray-500",children:"Please wait while we process your file"})]}):jsxs("div",{children:[jsxs("p",{children:["Unknown file type: ",re]}),jsx$1("p",{className:"text-sm text-gray-500",children:"This file type is not supported"})]})})})},container$n="_container_mdltp_216",pdfNav="_pdfNav_mdltp_225",previous_page="_previous_page_mdltp_238",page="_page_mdltp_246",styles$K={container:container$n,pdfNav,previous_page,page};displayWorkerWarning();pdfExports.GlobalWorkerOptions.workerSrc=new URL("/teia-ui/previews/pr-455/assets/pdf.worker-6b078827.js",self.location);const TextLayer="",AnnotationLayer="",options$1={cMapUrl:"cmaps/",cMapPacked:!0,standardFontDataUrl:"standard_fonts/"},PdfComponent=reactExports.memo(function({artifactUri:re,displayUri:ee,previewUri:ne,displayView:ae,nft:ce}){const[le,ue]=reactExports.useState(),[he,fe]=reactExports.useState(1),[me,ge]=reactExports.useState(),[ve,ye]=reactExports.useState(ae),[be,Ee]=reactExports.useState(!0),[Ce,Se]=reactExports.useState(),Te=reactExports.useRef(null),ke=reactExports.useMemo(()=>ne||re,[ne,re]);function Ne({numPages:Ge}){ue(Ge)}function Fe(Ge){console.error(`PDF Error: ${Ge.message}`)}function De(Ge){fe(qe=>qe+Ge)}function Oe(){De(-1)}function Re(){De(1)}const Be=()=>{var Ge;ve&&(ye(!1),Se((Ge=Te.current)==null?void 0:Ge.clientHeight)),ge(he)};function Le(Ge,qe){function Ue(ze){if(ze===null){Ee(!1);return}Ge(ze)}switch(qe){case 1:{const ze=prompt("Enter the password to open this PDF file.");Ue(ze);break}case 2:{const ze=prompt("Invalid password. Please try again.");Ue(ze);break}}}const je=jsxs(Fragment,{children:[jsx$1(ImageComponent,{artifactUri:ee,displayUri:ee,previewUri:ne,displayView:!1,nft:ce},`img-${ce.token_id}`),ve&&jsx$1("p",{style:{textAlign:"center",margin:"1em"},children:"Loading PDF..."},`loading-${ce.token_id}`)]});return ae?jsxs("div",{ref:Te,className:styles$K.container,children:[be?jsxs(Document$1,{file:ke,loading:je,onPassword:Le,onLoadSuccess:Ne,onLoadError:Fe,title:`PDF object ${ce.token_id}`,options:options$1,children:[me&&me!==he&&jsx$1(Page$1,{className:styles$K.previous_page,pageNumber:me,height:Ce},`${me}`),jsx$1(Page$1,{className:styles$K.page,pageNumber:he,onRenderSuccess:Be,height:Ce},he)]}):jsx$1(Button,{onClick:()=>{Ee(!0)},children:"Reload PDF with password"}),!ve&&be&&jsxs("div",{className:styles$K.pdfNav,children:[jsx$1(Button,{disabled:he<=1,onClick:Oe,children:"Prev «"}),jsxs("p",{children:["Page ",he||(le?1:"--")," of ",le||"--"]}),jsx$1(Button,{disabled:le?he>=le:!1,onClick:Re,children:">» Next"})]})]}):je}),methodMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],nativeAPI=(()=>{if(typeof document>"u")return!1;const re=methodMap[0],ee={};for(const ne of methodMap)if((ne==null?void 0:ne[1])in document){for(const[ce,le]of ne.entries())ee[re[ce]]=le;return ee}return!1})(),eventNameMap={change:nativeAPI.fullscreenchange,error:nativeAPI.fullscreenerror};let screenfull={request(re=document.documentElement,ee){return new Promise((ne,ae)=>{const ce=()=>{screenfull.off("change",ce),ne()};screenfull.on("change",ce);const le=re[nativeAPI.requestFullscreen](ee);le instanceof Promise&&le.then(ce).catch(ae)})},exit(){return new Promise((re,ee)=>{if(!screenfull.isFullscreen){re();return}const ne=()=>{screenfull.off("change",ne),re()};screenfull.on("change",ne);const ae=document[nativeAPI.exitFullscreen]();ae instanceof Promise&&ae.then(ne).catch(ee)})},toggle(re,ee){return screenfull.isFullscreen?screenfull.exit():screenfull.request(re,ee)},onchange(re){screenfull.on("change",re)},onerror(re){screenfull.on("error",re)},on(re,ee){const ne=eventNameMap[re];ne&&document.addEventListener(ne,ee,!1)},off(re,ee){const ne=eventNameMap[re];ne&&document.removeEventListener(ne,ee,!1)},raw:nativeAPI};Object.defineProperties(screenfull,{isFullscreen:{get:()=>!!document[nativeAPI.fullscreenElement]},element:{enumerable:!0,get:()=>document[nativeAPI.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[nativeAPI.fullscreenEnabled]}});nativeAPI||(screenfull={isEnabled:!1});const screenfull$1=screenfull,observerMap=new Map,RootIds=new WeakMap;let rootId=0,unsupportedValue;function getRootId(re){return re?(RootIds.has(re)||(rootId+=1,RootIds.set(re,rootId.toString())),RootIds.get(re)):"0"}function optionsToId(re){return Object.keys(re).sort().filter(ee=>re[ee]!==void 0).map(ee=>`${ee}_${ee==="root"?getRootId(re.root):re[ee]}`).toString()}function createObserver(re){let ee=optionsToId(re),ne=observerMap.get(ee);if(!ne){const ae=new Map;let ce;const le=new IntersectionObserver(ue=>{ue.forEach(he=>{var fe;const me=he.isIntersecting&&ce.some(ge=>he.intersectionRatio>=ge);re.trackVisibility&&typeof he.isVisible>"u"&&(he.isVisible=me),(fe=ae.get(he.target))==null||fe.forEach(ge=>{ge(me,he)})})},re);ce=le.thresholds||(Array.isArray(re.threshold)?re.threshold:[re.threshold||0]),ne={id:ee,observer:le,elements:ae},observerMap.set(ee,ne)}return ne}function observe(re,ee,ne={},ae=unsupportedValue){if(typeof window.IntersectionObserver>"u"&&ae!==void 0){const fe=re.getBoundingClientRect();return ee(ae,{isIntersecting:ae,target:re,intersectionRatio:typeof ne.threshold=="number"?ne.threshold:0,time:0,boundingClientRect:fe,intersectionRect:fe,rootBounds:fe}),()=>{}}const{id:ce,observer:le,elements:ue}=createObserver(ne);let he=ue.get(re)||[];return ue.has(re)||ue.set(re,he),he.push(ee),le.observe(re),function(){he.splice(he.indexOf(ee),1),he.length===0&&(ue.delete(re),le.unobserve(re)),ue.size===0&&(le.disconnect(),observerMap.delete(ce))}}function useInView({threshold:re,delay:ee,trackVisibility:ne,rootMargin:ae,root:ce,triggerOnce:le,skip:ue,initialInView:he,fallbackInView:fe,onChange:me}={}){var ge;const[ve,ye]=reactExports.useState(null),be=reactExports.useRef(),[Ee,Ce]=reactExports.useState({inView:!!he,entry:void 0});be.current=me,reactExports.useEffect(()=>{if(ue||!ve)return;let Ne;return Ne=observe(ve,(Fe,De)=>{Ce({inView:Fe,entry:De}),be.current&&be.current(Fe,De),De.isIntersecting&&le&&Ne&&(Ne(),Ne=void 0)},{root:ce,rootMargin:ae,threshold:re,trackVisibility:ne,delay:ee},fe),()=>{Ne&&Ne()}},[Array.isArray(re)?re.toString():re,ve,ce,ae,le,ue,ne,fe,ee]);const Se=(ge=Ee.entry)==null?void 0:ge.target,Te=reactExports.useRef();!ve&&Se&&!le&&!ue&&Te.current!==Se&&(Te.current=Se,Ce({inView:!!he,entry:void 0}));const ke=[ye,Ee.inView,Ee.entry];return ke.ref=ke[0],ke.inView=ke[1],ke.entry=ke[2],ke}const flex$1="_flex_rhi74_216",anaverse_view="_anaverse_view_rhi74_225",container$m="_container_rhi74_234",feed="_feed_rhi74_244",fullscreen="_fullscreen_rhi74_253",icon="_icon_rhi74_277",icon_fullscreen="_icon_fullscreen_rhi74_307",styles$J={flex:flex$1,anaverse_view,container:container$m,feed,fullscreen,icon,icon_fullscreen},style$2="",getAnaverseUrl=(re,ee)=>ee?`https://anaver.se/?gallery=1&loadsingle=1&singlecontract=${HEN_CONTRACT_FA2}&singletokenid=${re}&wallet=${ee}&partnerPlatform=teia.art`:`https://anaver.se/?gallery=1&loadsingle=1&singlecontract=${HEN_CONTRACT_FA2}&singletokenid=${re}&partnerPlatform=teia.art`,AnaverseViewer=(re,ee)=>{const ne=getAnaverseUrl(re,ee);return jsx$1("iframe",{className:styles$J.anaverse_view,title:`#${re} inside Anaverse`,id:"anavIframe",src:ne})},Container$1=({nft:re,children:ee,displayView:ne})=>{const ae=reactExports.useRef(null),[ce,le]=reactExports.useState(),[ue,he]=reactExports.useState(),{ref:fe,inView:me}=useInView({threshold:0,initialInView:!1}),ge=[MIMETYPE.MP4,MIMETYPE.OGV,MIMETYPE.QUICKTIME,MIMETYPE.WEBM].includes(re.mime_type),ve=()=>{ae.current&&(screenfull$1.isFullscreen?screenfull$1.exit():screenfull$1.request(ae.current,{navigationUI:"hide"}))};reactExports.useEffect(()=>{const Te=ke=>{iOS||(screenfull$1.isFullscreen?le(!0):le(!1),window.dispatchEvent(new Event("resize")))};return(ge||!iOS)&&(document.addEventListener("fullscreenchange",Te),document.addEventListener("webkitfullscreenchange",Te,!1)),()=>{(ge||!iOS)&&(document.removeEventListener("fullscreenchange",Te),document.removeEventListener("webkitfullscreenchange",Te,!1))}},[]);const ye=classNames$1({[styles$J.container]:!0,[styles$J.fullscreen]:ce,[styles$J.flex]:ne,[styles$J.feed]:!ne}),be=useUserStore(Te=>Te.address),Ee=AnaverseViewer(re.token_id,be),Ce=React.Children.map(ee,Te=>React.isValidElement(Te)?React.cloneElement(Te,{inView:me,displayView:ne}):Te),Se=()=>{!!window.chrome?he(!ue):window.open(getAnaverseUrl(re.token_id,be),"_blank")};return jsx$1("div",{ref:fe,children:jsxs("div",{ref:ae,className:ye,children:[ue?Ee:Ce,jsxs("div",{style:{display:"flex"},children:[ne&&!iOS&&!ge&&jsx$1(Button,{alt:"Fullscreen Button",className:styles$J.icon+" svg-icon "+(ce?styles$J.icon_fullscreen:""),onClick:ve,children:ce?jsx$1(SvgFullscreenEnter,{width:32}):jsx$1(SvgFullscreenExit,{width:32})}),ne&&!iOS&&jsx$1(Button,{title:"Show in Anaverse",alt:"Anaverse Button",className:styles$J.icon+" svg-icon ",onClick:Se,children:jsx$1(SvgEnterAnav,{width:32})})]})]})})},container$l="_container_mhzek_1",preview$1="_preview_mhzek_16",button$2="_button_mhzek_31",gradient$1="_gradient_mhzek_41",styles$I={container:container$l,preview:preview$1,button:button$2,gradient:gradient$1},MD=({displayView:re,displayUri:ee,artifactUri:ne,previewUri:ae,preview:ce,objktID:le})=>{const[ue,he]=React.useState("");return React.useEffect(()=>{if(ne&&axios.get(ne).then(fe=>{he(fe.data)}),ce&&ae)if(ae.startsWith("data:text/markdown;base64,")){const fe=ae.replace("data:text/markdown;base64,","");he(atob(fe))}else console.error("previewUri is not a base64 encoded markdown",ae)},[ne,ae,re,ee,ce]),re?jsx$1("div",{className:styles$I.container,children:jsxs("div",{className:styles$I.preview,children:[jsx$1("img",{src:ee,alt:`cover for markdown object ${le}`}),jsx$1("div",{className:styles$I.button,children:jsx$1(Button,{alt:"View Markdown Token"})})]})}):jsx$1("div",{children:jsx$1(Container$3,{children:jsx$1(Markdown$1,{children:ue})})})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EPSILON_FLOAT32$1=1e-7,EPSILON_FLOAT16$1=1e-4;class DataStorage{constructor(ee,ne){this.backend=ee,this.dataMover=ne,this.data=new WeakMap,this.dataIdsCount=0}get(ee){return this.data.has(ee)||this.dataMover.moveData(this.backend,ee),this.data.get(ee)}set(ee,ne){this.dataIdsCount++,this.data.set(ee,ne)}has(ee){return this.data.has(ee)}delete(ee){return this.dataIdsCount--,this.data.delete(ee)}numDataIds(){return this.dataIdsCount}}class KernelBackend{decComplexRef(ee){}time(ee){return notYetImplemented("time")}read(ee){return notYetImplemented("read")}readSync(ee){return notYetImplemented("readSync")}numDataIds(){return notYetImplemented("numDataIds")}disposeData(ee){return notYetImplemented("disposeData")}write(ee,ne,ae){return notYetImplemented("write")}move(ee,ne,ae,ce){return notYetImplemented("move")}memory(){return notYetImplemented("memory")}floatPrecision(){return notYetImplemented("floatPrecision")}epsilon(){return this.floatPrecision()===32?EPSILON_FLOAT32$1:EPSILON_FLOAT16$1}batchMatMul(ee,ne,ae,ce){return notYetImplemented("batchMatMul")}fusedBatchMatMul({a:ee,b:ne,transposeA:ae,transposeB:ce,bias:le,activation:ue,preluActivationWeights:he}){return notYetImplemented("fusedBatchMatMul")}slice(ee,ne,ae){return notYetImplemented("slice")}stridedSlice(ee,ne,ae,ce){return notYetImplemented("stridedSlice")}unstack(ee,ne){return notYetImplemented("unstack")}reverse(ee,ne){return notYetImplemented("reverse")}concat(ee,ne){return notYetImplemented("concat")}neg(ee){return notYetImplemented("neg")}add(ee,ne){return notYetImplemented("add")}addN(ee){return notYetImplemented("addN")}subtract(ee,ne){return notYetImplemented("subtract")}multiply(ee,ne){return notYetImplemented("multiply")}realDivide(ee,ne){return notYetImplemented("realDivide")}floorDiv(ee,ne){return notYetImplemented("floorDiv")}sum(ee,ne){return notYetImplemented("sum")}prod(ee,ne){return notYetImplemented("prod")}unsortedSegmentSum(ee,ne,ae){return notYetImplemented("unsortedSegmentSum")}argMin(ee,ne){return notYetImplemented("argMin")}argMax(ee,ne){return notYetImplemented("argMax")}equal(ee,ne){return notYetImplemented("equal")}notEqual(ee,ne){return notYetImplemented("notEqual")}less(ee,ne){return notYetImplemented("less")}lessEqual(ee,ne){return notYetImplemented("lessEqual")}greater(ee,ne){return notYetImplemented("greater")}greaterEqual(ee,ne){return notYetImplemented("greaterEqual")}logicalNot(ee){return notYetImplemented("logicalNot")}logicalAnd(ee,ne){return notYetImplemented("logicalAnd")}logicalOr(ee,ne){return notYetImplemented("logicalOr")}where(ee){return notYetImplemented("where")}select(ee,ne,ae){return notYetImplemented("select")}topk(ee,ne,ae){return notYetImplemented("topk")}min(ee,ne){return notYetImplemented("min")}minimum(ee,ne){return notYetImplemented("minimum")}mod(ee,ne){return notYetImplemented("mod")}max(ee,ne){return notYetImplemented("max")}maximum(ee,ne){return notYetImplemented("maximum")}all(ee,ne){return notYetImplemented("all")}any(ee,ne){return notYetImplemented("any")}squaredDifference(ee,ne){return notYetImplemented("squaredDifference")}ceil(ee){return notYetImplemented("ceil")}floor(ee){return notYetImplemented("floor")}round(ee){return notYetImplemented("round")}sign(ee){return notYetImplemented("sign")}isNaN(ee){return notYetImplemented("isNaN")}isInf(ee){return notYetImplemented("isInf")}isFinite(ee){return notYetImplemented("isFinite")}pow(ee,ne){return notYetImplemented("pow")}exp(ee){return notYetImplemented("exp")}expm1(ee){return notYetImplemented("expm1")}softmax(ee,ne){return notYetImplemented("softmax")}log(ee){return notYetImplemented("log")}log1p(ee){return notYetImplemented("log1p")}sqrt(ee){return notYetImplemented("sqrt")}rsqrt(ee){return notYetImplemented("rsqrt")}square(ee){return notYetImplemented("square")}reciprocal(ee){return notYetImplemented("reciprocal")}relu(ee){return notYetImplemented("relu")}relu6(ee){return notYetImplemented("relu6")}prelu(ee,ne){return notYetImplemented("prelu")}elu(ee){return notYetImplemented("elu")}eluDer(ee,ne){return notYetImplemented("eluDer")}selu(ee){return notYetImplemented("selu")}int(ee){return notYetImplemented("int")}clip(ee,ne,ae){return notYetImplemented("clip")}abs(ee){return notYetImplemented("abs")}complexAbs(ee){return notYetImplemented("complexAbs")}sigmoid(ee){return notYetImplemented("sigmoid")}softplus(ee){return notYetImplemented("softplus")}sin(ee){return notYetImplemented("sin")}cos(ee){return notYetImplemented("cos")}tan(ee){return notYetImplemented("tan")}asin(ee){return notYetImplemented("asin")}acos(ee){return notYetImplemented("acos")}atan(ee){return notYetImplemented("atan")}atan2(ee,ne){return notYetImplemented("atan2")}sinh(ee){return notYetImplemented("sinh")}cosh(ee){return notYetImplemented("cosh")}tanh(ee){return notYetImplemented("tanh")}asinh(ee){return notYetImplemented("asinh")}acosh(ee){return notYetImplemented("acosh")}atanh(ee){return notYetImplemented("atanh")}erf(ee){return notYetImplemented("erf")}step(ee,ne){return notYetImplemented("step")}fusedConv2d({input:ee,filter:ne,convInfo:ae,bias:ce,activation:le,preluActivationWeights:ue}){return notYetImplemented("fusedConv2d")}conv2d(ee,ne,ae){return notYetImplemented("conv2d")}conv2dDerInput(ee,ne,ae){return notYetImplemented("conv2dDerInput")}conv2dDerFilter(ee,ne,ae){return notYetImplemented("conv2dDerFilter")}fusedDepthwiseConv2D({input:ee,filter:ne,convInfo:ae,bias:ce,activation:le,preluActivationWeights:ue}){return notYetImplemented("fusedDepthwiseConv2D")}depthwiseConv2D(ee,ne,ae){return notYetImplemented("depthwiseConv2D")}depthwiseConv2DDerInput(ee,ne,ae){return notYetImplemented("depthwiseConv2DDerInput")}depthwiseConv2DDerFilter(ee,ne,ae){return notYetImplemented("depthwiseConv2DDerFilter")}conv3d(ee,ne,ae){return notYetImplemented("conv3d")}conv3dDerInput(ee,ne,ae){return notYetImplemented("conv3dDerInput")}conv3dDerFilter(ee,ne,ae){return notYetImplemented("conv3dDerFilter")}maxPool(ee,ne){return notYetImplemented("maxPool")}maxPoolBackprop(ee,ne,ae,ce){return notYetImplemented("maxPoolBackprop")}avgPool(ee,ne){return notYetImplemented("avgPool")}avgPoolBackprop(ee,ne,ae){return notYetImplemented("avgPoolBackprop")}avgPool3d(ee,ne){return notYetImplemented("avgPool3d")}avgPool3dBackprop(ee,ne,ae){return notYetImplemented("avgPool3dBackprop")}maxPool3d(ee,ne){return notYetImplemented("maxPool3d")}maxPool3dBackprop(ee,ne,ae,ce){return notYetImplemented("maxPool3dBackprop")}reshape(ee,ne){return notYetImplemented("reshape")}cast(ee,ne){return notYetImplemented("cast")}tile(ee,ne){return notYetImplemented("tile")}pad(ee,ne,ae){return notYetImplemented("pad")}transpose(ee,ne){return notYetImplemented("transpose")}gather(ee,ne,ae,ce=0){return notYetImplemented("gather")}gatherND(ee,ne){return notYetImplemented("gatherND")}scatterND(ee,ne,ae){return notYetImplemented("scatterND")}batchToSpaceND(ee,ne,ae){return notYetImplemented("batchToSpaceND")}spaceToBatchND(ee,ne,ae){return notYetImplemented("spaceToBatchND")}resizeBilinear(ee,ne,ae,ce,le){return notYetImplemented("resizeBilinear")}resizeBilinearBackprop(ee,ne,ae){return notYetImplemented("resizeBilinearBackprop")}resizeNearestNeighbor(ee,ne,ae,ce,le){return notYetImplemented("resizeNearestNeighbor")}resizeNearestNeighborBackprop(ee,ne,ae){return notYetImplemented("resizeNearestNeighborBackprop")}batchNorm(ee,ne,ae,ce,le,ue){return notYetImplemented("batchNorm")}localResponseNormalization4D(ee,ne,ae,ce,le){return notYetImplemented("localResponseNormalization4D")}LRNGrad(ee,ne,ae,ce,le,ue,he){return notYetImplemented("LRNGrad")}multinomial(ee,ne,ae,ce){return notYetImplemented("multinomial")}oneHot(ee,ne,ae,ce){return notYetImplemented("oneHot")}cumsum(ee,ne,ae,ce){return notYetImplemented("cumsum")}nonMaxSuppression(ee,ne,ae,ce,le){return notYetImplemented("nonMaxSuppression")}fft(ee){return notYetImplemented("fft")}ifft(ee){return notYetImplemented("ifft")}complex(ee,ne){return notYetImplemented("complex")}real(ee){return notYetImplemented("real")}imag(ee){return notYetImplemented("imag")}cropAndResize(ee,ne,ae,ce,le,ue){return notYetImplemented("cropAndResize")}depthToSpace(ee,ne,ae){return notYetImplemented("depthToSpace")}split(ee,ne,ae){return notYetImplemented("split")}sparseToDense(ee,ne,ae,ce){return notYetImplemented("sparseToDense")}diag(ee){return notYetImplemented("diag")}fill(ee,ne,ae){return notYetImplemented("fill")}onesLike(ee){return notYetImplemented("onesLike")}zerosLike(ee){return notYetImplemented("zerosLike")}linspace(ee,ne,ae){return notYetImplemented("linspace")}dispose(){return notYetImplemented("dispose")}}function notYetImplemented(re){throw new Error(`'${re}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function shuffle(re){let ee=re.length,ne=0,ae=0;for(;ee>0;)ae=Math.random()*ee|0,ee--,ne=re[ee],re[ee]=re[ae],re[ae]=ne}function clamp$1(re,ee,ne){return Math.max(re,Math.min(ee,ne))}function nearestLargerEven(re){return re%2===0?re:re+1}function sum$3(re){let ee=0;for(let ne=0;ne<re.length;ne++)ee+=re[ne];return ee}function assert$2(re,ee){if(!re)throw new Error(typeof ee=="string"?ee:ee())}function assertShapesMatch(re,ee,ne=""){assert$2(arraysEqual(re,ee),()=>ne+` Shapes ${re} and ${ee} must match`)}function assertNonNull(re){assert$2(re!=null,()=>"The input to the tensor constructor must be a non-null value.")}function flatten$2(re,ee=[],ne=!1){if(ee==null&&(ee=[]),Array.isArray(re)||isTypedArray$3(re)&&!ne)for(let ae=0;ae<re.length;++ae)flatten$2(re[ae],ee,ne);else ee.push(re);return ee}function sizeFromShape(re){if(re.length===0)return 1;let ee=re[0];for(let ne=1;ne<re.length;ne++)ee*=re[ne];return ee}function arraysEqual(re,ee){if(re===ee)return!0;if(re==null||ee==null||re.length!==ee.length)return!1;for(let ne=0;ne<re.length;ne++)if(re[ne]!==ee[ne])return!1;return!0}function isInt(re){return re%1===0}function sizeToSquarishShape(re){const ee=Math.ceil(Math.sqrt(re));return[ee,Math.ceil(re/ee)]}function rightPad(re,ee){return ee<=re.length?re:re+" ".repeat(ee-re.length)}function repeatedTry(re,ee=ae=>0,ne){return new Promise((ae,ce)=>{let le=0;const ue=()=>{if(re()){ae();return}le++;const he=ee(le);if(ne!=null&&le>=ne){ce();return}setTimeout(ue,he)};ue()})}function inferFromImplicitShape(re,ee){let ne=1,ae=-1;for(let le=0;le<re.length;++le)if(re[le]>=0)ne*=re[le];else if(re[le]===-1){if(ae!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${ae} and dim ${le}`);ae=le}else if(re[le]<0)throw Error(`Shapes can not be < 0. Found ${re[le]} at dim ${le}`);if(ae===-1){if(ee>0&&ee!==ne)throw Error(`Size(${ee}) must match the product of shape ${re}`);return re}if(ne===0)throw Error(`Cannot infer the missing size in [${re}] when there are 0 elements`);if(ee%ne!==0)throw Error(`The implicit shape can't be a fractional number. Got ${ee} / ${ne}`);const ce=re.slice();return ce[ae]=ee/ne,ce}function parseAxisParam(re,ee){const ne=ee.length;return re=re==null?ee.map((ae,ce)=>ce):[].concat(re),assert$2(re.every(ae=>ae>=-ne&&ae<ne),()=>`All values in axis param must be in range [-${ne}, ${ne}) but got axis ${re}`),assert$2(re.every(ae=>isInt(ae)),()=>`All values in axis param must be integers but got axis ${re}`),re.map(ae=>ae<0?ne+ae:ae)}function squeezeShape(re,ee){const ne=[],ae=[],ce=ee!=null&&Array.isArray(ee)&&ee.length===0,le=ee==null||ce?null:parseAxisParam(ee,re).sort();let ue=0;for(let he=0;he<re.length;++he){if(le!=null){if(le[ue]===he&&re[he]!==1)throw new Error(`Can't squeeze axis ${he} since its dim '${re[he]}' is not 1`);(le[ue]==null||le[ue]>he)&&re[he]===1&&(ne.push(re[he]),ae.push(he)),le[ue]<=he&&ue++}re[he]!==1&&(ne.push(re[he]),ae.push(he))}return{newShape:ne,keptDims:ae}}function getTypedArrayFromDType(re,ee){let ne=null;if(re==null||re==="float32")ne=new Float32Array(ee);else if(re==="int32")ne=new Int32Array(ee);else if(re==="bool")ne=new Uint8Array(ee);else throw new Error(`Unknown data type ${re}`);return ne}function getArrayFromDType(re,ee){let ne=null;if(re==null||re==="float32")ne=new Float32Array(ee);else if(re==="int32")ne=new Int32Array(ee);else if(re==="bool")ne=new Uint8Array(ee);else if(re==="string")ne=new Array(ee);else throw new Error(`Unknown data type ${re}`);return ne}function checkConversionForErrors(re,ee){for(let ne=0;ne<re.length;ne++){const ae=re[ne];if(isNaN(ae)||!isFinite(ae))throw Error(`A tensor of type ${ee} being uploaded contains ${ae}.`)}}function isValidDtype(re){return re==="bool"||re==="complex64"||re==="float32"||re==="int32"||re==="string"}function hasEncodingLoss(re,ee){return!(ee==="complex64"||ee==="float32"&&re!=="complex64"||ee==="int32"&&re!=="float32"&&re!=="complex64"||ee==="bool"&&re==="bool")}function isTypedArray$3(re){return re instanceof Float32Array||re instanceof Int32Array||re instanceof Uint8Array}function bytesPerElement(re){if(re==="float32"||re==="int32")return 4;if(re==="complex64")return 8;if(re==="bool")return 1;throw new Error(`Unknown dtype ${re}`)}function bytesFromStringArray(re){if(re==null)return 0;let ee=0;return re.forEach(ne=>ee+=ne.length),ee}function isString$2(re){return typeof re=="string"||re instanceof String}function isBoolean$2(re){return typeof re=="boolean"}function isNumber$3(re){return typeof re=="number"}function inferDtype(re){return Array.isArray(re)?inferDtype(re[0]):re instanceof Float32Array?"float32":re instanceof Int32Array||re instanceof Uint8Array?"int32":isNumber$3(re)?"float32":isString$2(re)?"string":isBoolean$2(re)?"bool":"float32"}function isFunction$3(re){return!!(re&&re.constructor&&re.call&&re.apply)}function nearestDivisor(re,ee){for(let ne=ee;ne<re;++ne)if(re%ne===0)return ne;return re}function computeStrides(re){const ee=re.length;if(ee<2)return[];const ne=new Array(ee-1);ne[ee-2]=re[ee-1];for(let ae=ee-3;ae>=0;--ae)ne[ae]=ne[ae+1]*re[ae+1];return ne}function createNestedArray(re,ee,ne){const ae=new Array;if(ee.length===1){const ce=ee[0];for(let le=0;le<ce;le++)ae[le]=ne[re+le]}else{const ce=ee[0],le=ee.slice(1),ue=le.reduce((he,fe)=>he*fe);for(let he=0;he<ce;he++)ae[he]=createNestedArray(re+he*ue,le,ne)}return ae}function toNestedArray(re,ee){if(re.length===0)return ee[0];const ne=re.reduce((ae,ce)=>ae*ce);if(ne===0)return[];if(ne!==ee.length)throw new Error(`[${re}] does not match the input size ${ee.length}.`);return createNestedArray(0,re,ee)}function makeOnesTypedArray(re,ee){const ne=makeZerosTypedArray(re,ee);for(let ae=0;ae<ne.length;ae++)ne[ae]=1;return ne}function makeZerosTypedArray(re,ee){if(ee==null||ee==="float32"||ee==="complex64")return new Float32Array(re);if(ee==="int32")return new Int32Array(re);if(ee==="bool")return new Uint8Array(re);throw new Error(`Unknown data type ${ee}`)}function makeZerosNestedTypedArray(re,ee){const ne=re.reduce((ae,ce)=>ae*ce,1);if(ee==null||ee==="float32")return toNestedArray(re,new Float32Array(ne));if(ee==="int32")return toNestedArray(re,new Int32Array(ne));if(ee==="bool")return toNestedArray(re,new Uint8Array(ne));throw new Error(`Unknown data type ${ee}`)}function assertNonNegativeIntegerDimensions(re){re.forEach(ee=>{assert$2(Number.isInteger(ee)&&ee>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${re}].`)})}function locToIndex(re,ee,ne){if(ee===0)return 0;if(ee===1)return re[0];let ae=re[re.length-1];for(let ce=0;ce<re.length-1;++ce)ae+=ne[ce]*re[ce];return ae}function indexToLoc(re,ee,ne){if(ee===0)return[];if(ee===1)return[re];const ae=new Array(ee);for(let ce=0;ce<ae.length-1;++ce)ae[ce]=Math.floor(re/ne[ce]),re-=ae[ce]*ne[ce];return ae[ae.length-1]=re,ae}function isPromise(re){return re&&re.then&&typeof re.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TENSORFLOWJS_FLAGS_PREFIX="tfjsflags";class Environment{constructor(ee){this.global=ee,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(ee,ne){this.platform!=null&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${ne}.`),this.platformName=ee,this.platform=ne}registerFlag(ee,ne,ae){if(this.flagRegistry[ee]={evaluationFn:ne,setHook:ae},this.urlFlags[ee]!=null){const ce=this.urlFlags[ee];console.warn(`Setting feature override from URL ${ee}: ${ce}.`),this.set(ee,ce)}}async getAsync(ee){return ee in this.flags?this.flags[ee]:(this.flags[ee]=await this.evaluateFlag(ee),this.flags[ee])}get(ee){if(ee in this.flags)return this.flags[ee];const ne=this.evaluateFlag(ee);if(isPromise(ne))throw new Error(`Flag ${ee} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[ee]=ne,this.flags[ee]}getNumber(ee){return this.get(ee)}getBool(ee){return this.get(ee)}getFlags(){return this.flags}get features(){return this.flags}set(ee,ne){if(this.flagRegistry[ee]==null)throw new Error(`Cannot set flag ${ee} as it has not been registered.`);this.flags[ee]=ne,this.flagRegistry[ee].setHook!=null&&this.flagRegistry[ee].setHook(ne)}evaluateFlag(ee){if(this.flagRegistry[ee]==null)throw new Error(`Cannot evaluate flag '${ee}': no evaluation function found.`);return this.flagRegistry[ee].evaluationFn()}setFlags(ee){this.flags=Object.assign({},ee)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const ee=getQueryParams(this.global.location.search);TENSORFLOWJS_FLAGS_PREFIX in ee&&ee[TENSORFLOWJS_FLAGS_PREFIX].split(",").forEach(ae=>{const[ce,le]=ae.split(":");this.urlFlags[ce]=parseValue(ce,le)})}}function getQueryParams(re){const ee={};return re.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(ne,...ae)=>(decodeParam(ee,ae[0],ae[1]),ae.join("="))),ee}function decodeParam(re,ee,ne){re[decodeURIComponent(ee)]=decodeURIComponent(ne||"")}function parseValue(re,ee){if(ee=ee.toLowerCase(),ee==="true"||ee==="false")return ee==="true";if(`${+ee}`===ee)return+ee;throw new Error(`Could not parse value flag value ${ee} for flag ${re}.`)}function env(){return ENV$2}let ENV$2=null;function setEnvironmentGlobal(re){ENV$2=re}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let globalNameSpace;function getGlobalNamespace(){if(globalNameSpace==null){let re;if(typeof window<"u")re=window;else if(typeof globalThis<"u")re=globalThis;else if(typeof browser$1$1<"u")re=browser$1$1;else if(typeof self<"u")re=self;else throw new Error("Could not find a globalThis object");globalNameSpace=re}return globalNameSpace}function getGlobalMap(){const re=getGlobalNamespace();return re._tfGlobals==null&&(re._tfGlobals=new Map),re._tfGlobals}function getGlobal(re,ee){const ne=getGlobalMap();if(ne.has(re))return ne.get(re);{const ae=ee();return ne.set(re,ae),ne.get(re)}}const Abs$1="Abs",Acos="Acos",Acosh="Acosh",Add$2="Add",AddN="AddN",All="All",Any="Any",ArgMax="ArgMax",ArgMin="ArgMin",Asin="Asin",Asinh="Asinh",Atan="Atan",Atanh="Atanh",Atan2="Atan2",AvgPool="AvgPool",AvgPoolGrad="AvgPoolGrad",AvgPool3D="AvgPool3D",AvgPool3DGrad="AvgPool3DGrad",BatchMatMul="BatchMatMul",BatchToSpaceND="BatchToSpaceND",Bincount="Bincount",BroadcastTo="BroadcastTo",Cast="Cast",Ceil="Ceil",ClipByValue="ClipByValue",Complex="Complex",ComplexAbs="ComplexAbs",Concat="Concat",Conv2D$1="Conv2D",Conv2DBackpropFilter="Conv2DBackpropFilter",Conv2DBackpropInput="Conv2DBackpropInput",Conv3D$1="Conv3D",Conv3DBackpropFilterV2="Conv3DBackpropFilterV2",Conv3DBackpropInputV2="Conv3DBackpropInputV2",Cos="Cos",Cosh="Cosh",Cumsum="Cumsum",CropAndResize="CropAndResize",DenseBincount="DenseBincount",DepthToSpace="DepthToSpace",DepthwiseConv2dNative="DepthwiseConv2dNative",DepthwiseConv2dNativeBackpropFilter="DepthwiseConv2dNativeBackpropFilter",DepthwiseConv2dNativeBackpropInput="DepthwiseConv2dNativeBackpropInput",Diag="Diag",Dilation2D="Dilation2D",Dilation2DBackpropInput="Dilation2DBackpropInput",Dilation2DBackpropFilter="Dilation2DBackpropFilter",RealDiv="RealDiv",Elu$1="Elu",EluGrad="EluGrad",Erf="Erf",Equal="Equal",Exp="Exp",ExpandDims="ExpandDims",Expm1="Expm1",FFT$2="FFT",Fill="Fill",FlipLeftRight="FlipLeftRight",Floor="Floor",FloorDiv="FloorDiv",FusedBatchNorm="FusedBatchNorm",GatherV2="GatherV2",GatherNd="GatherNd",Greater="Greater",GreaterEqual="GreaterEqual",Identity$1="Identity",IFFT="IFFT",Imag="Imag",IsFinite="IsFinite",IsInf="IsInf",IsNan="IsNan",LeakyRelu="LeakyRelu",Less="Less",LessEqual="LessEqual",LinSpace="LinSpace",Log="Log",Log1p="Log1p",LogicalAnd="LogicalAnd",LogicalNot="LogicalNot",LogicalOr="LogicalOr",LogSoftmax$1="LogSoftmax",LRN="LRN",LRNGrad="LRNGrad",Max="Max",Maximum$1="Maximum",MaxPool="MaxPool",MaxPoolGrad="MaxPoolGrad",MaxPool3D="MaxPool3D",MaxPool3DGrad="MaxPool3DGrad",MaxPoolWithArgmax="MaxPoolWithArgmax",Mean="Mean",Min="Min",Minimum$1="Minimum",MirrorPad="MirrorPad",Mod="Mod",Multinomial="Multinomial",Multiply$2="Multiply",Neg="Neg",NotEqual="NotEqual",NonMaxSuppressionV3="NonMaxSuppressionV3",NonMaxSuppressionV4="NonMaxSuppressionV4",NonMaxSuppressionV5="NonMaxSuppressionV5",OnesLike="OnesLike",OneHot="OneHot",Pack="Pack",PadV2="PadV2",Pow$1="Pow",Prelu="Prelu",Prod="Prod",Range="Range",Real="Real",Reciprocal="Reciprocal",Relu$1="Relu",Reshape$1="Reshape",ResizeNearestNeighbor="ResizeNearestNeighbor",ResizeNearestNeighborGrad="ResizeNearestNeighborGrad",ResizeBilinear="ResizeBilinear",ResizeBilinearGrad="ResizeBilinearGrad",Relu6$1="Relu6",Reverse="Reverse",Round="Round",Rsqrt="Rsqrt",ScatterNd="ScatterNd",Select$2="Select",Selu$1="Selu",Slice="Slice",Sin="Sin",Sinh="Sinh",Sign="Sign",Sigmoid$1="Sigmoid",Softplus$1="Softplus",Sqrt="Sqrt",Sum="Sum",SpaceToBatchND="SpaceToBatchND",SplitV="SplitV",Softmax$2="Softmax",SquaredDifference="SquaredDifference",Square="Square",Sub="Sub",SparseToDense="SparseToDense",StridedSlice="StridedSlice",Tan="Tan",Tanh$1="Tanh",Tile="Tile",TopK="TopK",Transpose="Transpose",Unique="Unique",Unpack="Unpack",UnsortedSegmentSum="UnsortedSegmentSum",ZerosLike="ZerosLike",Step="Step",FromPixels="FromPixels",RotateWithOffset="RotateWithOffset",_FusedMatMul="_FusedMatMul",FusedConv2D="FusedConv2D",FusedDepthwiseConv2D="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kernelRegistry=getGlobal("kernelRegistry",()=>new Map),gradRegistry=getGlobal("gradRegistry",()=>new Map);function getKernel(re,ee){const ne=makeKey(re,ee);return kernelRegistry.get(ne)}function getGradient(re){return gradRegistry.get(re)}function getKernelsForBackend(re){const ee=kernelRegistry.entries(),ne=[];for(;;){const{done:ae,value:ce}=ee.next();if(ae)break;const[le,ue]=ce,[he]=le.split("_");he===re&&ne.push(ue)}return ne}function registerKernel(re){const{kernelName:ee,backendName:ne}=re,ae=makeKey(ee,ne);kernelRegistry.has(ae)&&console.warn(`The kernel '${ee}' for backend '${ne}' is already registered`),kernelRegistry.set(ae,re)}function registerGradient(re){const{kernelName:ee}=re;gradRegistry.has(ee)&&env().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${ee}'`),gradRegistry.set(ee,re)}function makeKey(re,ee){return`${ee}_${re}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createScalarValue(re,ee){return ee==="string"?encodeString(re):toTypedArray([re],ee)}function noConversionNeeded(re,ee){return re instanceof Float32Array&&ee==="float32"||re instanceof Int32Array&&ee==="int32"||re instanceof Uint8Array&&ee==="bool"}function toTypedArray(re,ee){if(ee==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(re)&&(re=flatten$2(re)),env().getBool("DEBUG")&&checkConversionForErrors(re,ee),noConversionNeeded(re,ee))return re;if(ee==null||ee==="float32"||ee==="complex64")return new Float32Array(re);if(ee==="int32")return new Int32Array(re);if(ee==="bool"){const ne=new Uint8Array(re.length);for(let ae=0;ae<ne.length;++ae)Math.round(re[ae])!==0&&(ne[ae]=1);return ne}else throw new Error(`Unknown data type ${ee}`)}function now$1(){return env().platform.now()}function encodeString(re,ee="utf-8"){return ee=ee||"utf-8",env().platform.encode(re,ee)}function decodeString(re,ee="utf-8"){return ee=ee||"utf-8",env().platform.decode(re,ee)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Profiler{constructor(ee,ne){this.backendTimer=ee,this.logger=ne,ne==null&&(this.logger=new Logger)}profileKernel(ee,ne,ae){let ce;const le=()=>{ce=ae()},ue=this.backendTimer.time(le);if(env().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let fe=0;fe<ce.length;fe++){const me=ce[fe];me.data().then(ge=>{checkComputationForErrors(ge,me.dtype,ee)})}return{kernelName:ee,outputs:ce,inputs:ne,timeMs:ue.then(fe=>fe.kernelMs),extraInfo:ue.then(fe=>fe.getExtraProfileInfo!=null?fe.getExtraProfileInfo():"")}}logKernelProfile(ee){const{kernelName:ne,outputs:ae,timeMs:ce,inputs:le,extraInfo:ue}=ee;ae.forEach(he=>{Promise.all([he.data(),ce,ue]).then(fe=>{this.logger.logKernelProfile(ne,he,fe[0],fe[1],le,fe[2])})})}}function checkComputationForErrors(re,ee,ne){if(ee!=="float32")return!1;for(let ae=0;ae<re.length;ae++){const ce=re[ae];if(isNaN(ce)||!isFinite(ce))return console.warn(`Found ${ce} in the result of '${ne}'`),!0}return!1}class Logger{logKernelProfile(ee,ne,ae,ce,le,ue){const he=typeof ce=="number"?rightPad(`${ce}ms`,9):ce.error,fe=rightPad(ee,25),me=ne.rank,ge=ne.size,ve=rightPad(ne.shape.toString(),14);let ye="";for(const be in le){const Ee=le[be];if(Ee!=null){const Ce=Ee.shape||ne.shape,Se=Ce.length;ye+=`${be}: ${Se}D ${Se>0?Ce:""} `}}console.log(`%c${fe}	%c${he}	%c${me}D ${ve}	%c${ge}	%c${ye}	%c${ue}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getFilteredNodesXToY(re,ee,ne){const ae={},ce={};for(let fe=0;fe<ee.length;fe++)ae[ee[fe].id]=!0;for(let fe=0;fe<re.length;fe++){const me=re[fe],ge=me.inputs;for(const ve in ge){const ye=ge[ve];let be=!1;for(let Ee=0;Ee<ee.length;Ee++)if(ae[ye.id]){me.outputs.forEach(Ce=>ae[Ce.id]=!0),be=!0,ce[me.id]=!0;break}if(be)break}}const le={};le[ne.id]=!0;const ue={};for(let fe=re.length-1;fe>=0;fe--){const me=re[fe],ge=me.inputs;for(let ve=0;ve<me.outputs.length;ve++)if(le[me.outputs[ve].id]){for(const ye in ge)le[ge[ye].id]=!0,ue[me.id]=!0;break}}const he=[];for(let fe=0;fe<re.length;fe++){const me=re[fe];if(ce[me.id]&&ue[me.id]){const ge={};for(const ye in me.inputs){const be=me.inputs[ye];ae[be.id]&&(ge[ye]=be)}const ve=Object.assign({},me);ve.inputs=ge,ve.outputs=me.outputs,he.push(ve)}}return he}function backpropagateGradients(re,ee,ne,ae){for(let ce=ee.length-1;ce>=0;ce--){const le=ee[ce],ue=[];if(le.outputs.forEach(fe=>{const me=re[fe.id];me!=null?ue.push(me):ue.push(null)}),le.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${le.kernelName}.`);const he=le.gradient(ue);for(const fe in le.inputs){if(!(fe in he))throw new Error(`Cannot backprop through input ${fe}. Available gradients found: ${Object.keys(he)}.`);const me=ne(()=>he[fe]());if(me.dtype!=="float32")throw new Error(`Error in gradient for op ${le.kernelName}. The gradient of input ${fe} must have 'float32' dtype, but has '${me.dtype}'`);const ge=le.inputs[fe];if(!arraysEqual(me.shape,ge.shape))throw new Error(`Error in gradient for op ${le.kernelName}. The gradient of input '${fe}' has shape '${me.shape}', which does not match the shape of the input '${ge.shape}'`);if(re[ge.id]==null)re[ge.id]=me;else{const ve=re[ge.id];re[ge.id]=ae(ve,me),ve.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FORMAT_LIMIT_NUM_VALS=20,FORMAT_NUM_FIRST_LAST_VALS=3,FORMAT_NUM_SIG_DIGITS=7;function tensorToString(re,ee,ne,ae){const ce=computeStrides(ee),le=computeMaxSizePerColumn(re,ee,ne,ce),ue=ee.length,he=subTensorToString(re,ee,ne,ce,le),fe=["Tensor"];return ae&&(fe.push(`  dtype: ${ne}`),fe.push(`  rank: ${ue}`),fe.push(`  shape: [${ee}]`),fe.push("  values:")),fe.push(he.map(me=>"    "+me).join(`
`)),fe.join(`
`)}function computeMaxSizePerColumn(re,ee,ne,ae){const ce=sizeFromShape(ee),le=ae[ae.length-1],ue=new Array(le).fill(0),he=ee.length,fe=ne==="complex64"?createComplexTuples(re):re;if(he>1)for(let me=0;me<ce/le;me++){const ge=me*le;for(let ve=0;ve<le;ve++)ue[ve]=Math.max(ue[ve],valToString(fe[ge+ve],0,ne).length)}return ue}function valToString(re,ee,ne){let ae;return Array.isArray(re)?ae=`${parseFloat(re[0].toFixed(FORMAT_NUM_SIG_DIGITS))} + ${parseFloat(re[1].toFixed(FORMAT_NUM_SIG_DIGITS))}j`:isString$2(re)?ae=`'${re}'`:ne==="bool"?ae=boolNumToString(re):ae=parseFloat(re.toFixed(FORMAT_NUM_SIG_DIGITS)).toString(),rightPad(ae,ee)}function boolNumToString(re){return re===0?"false":"true"}function subTensorToString(re,ee,ne,ae,ce,le=!0){const ue=ne==="complex64"?2:1,he=ee[0],fe=ee.length;if(fe===0){if(ne==="complex64"){const Ce=createComplexTuples(re);return[valToString(Ce[0],0,ne)]}return ne==="bool"?[boolNumToString(re[0])]:[re[0].toString()]}if(fe===1){if(he>FORMAT_LIMIT_NUM_VALS){const Se=FORMAT_NUM_FIRST_LAST_VALS*ue;let Te=Array.from(re.slice(0,Se)),ke=Array.from(re.slice((he-FORMAT_NUM_FIRST_LAST_VALS)*ue,he*ue));return ne==="complex64"&&(Te=createComplexTuples(Te),ke=createComplexTuples(ke)),["["+Te.map((Ne,Fe)=>valToString(Ne,ce[Fe],ne)).join(", ")+", ..., "+ke.map((Ne,Fe)=>valToString(Ne,ce[he-FORMAT_NUM_FIRST_LAST_VALS+Fe],ne)).join(", ")+"]"]}return["["+(ne==="complex64"?createComplexTuples(re):Array.from(re)).map((Se,Te)=>valToString(Se,ce[Te],ne)).join(", ")+"]"]}const me=ee.slice(1),ge=ae.slice(1),ve=ae[0]*ue,ye=[];if(he>FORMAT_LIMIT_NUM_VALS){for(let Ce=0;Ce<FORMAT_NUM_FIRST_LAST_VALS;Ce++){const Se=Ce*ve,Te=Se+ve;ye.push(...subTensorToString(re.slice(Se,Te),me,ne,ge,ce,!1))}ye.push("...");for(let Ce=he-FORMAT_NUM_FIRST_LAST_VALS;Ce<he;Ce++){const Se=Ce*ve,Te=Se+ve;ye.push(...subTensorToString(re.slice(Se,Te),me,ne,ge,ce,Ce===he-1))}}else for(let Ce=0;Ce<he;Ce++){const Se=Ce*ve,Te=Se+ve;ye.push(...subTensorToString(re.slice(Se,Te),me,ne,ge,ce,Ce===he-1))}const be=fe===2?",":"";ye[0]="["+ye[0]+be;for(let Ce=1;Ce<ye.length-1;Ce++)ye[Ce]=" "+ye[Ce]+be;let Ee=`,
`;for(let Ce=2;Ce<fe;Ce++)Ee+=`
`;return ye[ye.length-1]=" "+ye[ye.length-1]+"]"+(le?"":Ee),ye}function createComplexTuples(re){const ee=[];for(let ne=0;ne<re.length;ne+=2)ee.push([re[ne],re[ne+1]]);return ee}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TensorBuffer{constructor(ee,ne,ae){if(this.dtype=ne,this.shape=ee.slice(),this.size=sizeFromShape(ee),ae!=null){const ce=ae.length;assert$2(ce===this.size,()=>`Length of values '${ce}' does not match the size inferred by the shape '${this.size}'.`)}if(ne==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=ae||getArrayFromDType(ne,this.size),this.strides=computeStrides(ee)}set(ee,...ne){ne.length===0&&(ne=[0]),assert$2(ne.length===this.rank,()=>`The number of provided coordinates (${ne.length}) must match the rank (${this.rank})`);const ae=this.locToIndex(ne);this.values[ae]=ee}get(...ee){ee.length===0&&(ee=[0]);let ne=0;for(const ce of ee){if(ce<0||ce>=this.shape[ne]){const le=`Requested out of range element at ${ee}.   Buffer shape=${this.shape}`;throw new Error(le)}ne++}let ae=ee[ee.length-1];for(let ce=0;ce<ee.length-1;++ce)ae+=this.strides[ce]*ee[ce];return this.values[ae]}locToIndex(ee){if(this.rank===0)return 0;if(this.rank===1)return ee[0];let ne=ee[ee.length-1];for(let ae=0;ae<ee.length-1;++ae)ne+=this.strides[ae]*ee[ae];return ne}indexToLoc(ee){if(this.rank===0)return[];if(this.rank===1)return[ee];const ne=new Array(this.shape.length);for(let ae=0;ae<ne.length-1;++ae)ne[ae]=Math.floor(ee/this.strides[ae]),ee-=ne[ae]*this.strides[ae];return ne[ne.length-1]=ee,ne}get rank(){return this.shape.length}toTensor(){return trackerFn().makeTensor(this.values,this.shape,this.dtype)}}let trackerFn=null,opHandler$1=null;function setTensorTracker(re){trackerFn=re}function setOpHandler(re){opHandler$1=re}class Tensor{constructor(ee,ne,ae,ce){this.kept=!1,this.isDisposedInternal=!1,this.shape=ee.slice(),this.dtype=ne||"float32",this.size=sizeFromShape(ee),this.strides=computeStrides(ee),this.dataId=ae,this.id=ce,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const ee=await this.data();return opHandler$1.buffer(this.shape,this.dtype,ee)}bufferSync(){return opHandler$1.buffer(this.shape,this.dtype,this.dataSync())}async array(){const ee=await this.data();return toNestedArray(this.shape,ee)}arraySync(){return toNestedArray(this.shape,this.dataSync())}async data(){this.throwIfDisposed();const ee=trackerFn().read(this.dataId);if(this.dtype==="string"){const ne=await ee;try{return ne.map(ae=>decodeString(ae))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return ee}dataSync(){this.throwIfDisposed();const ee=trackerFn().readSync(this.dataId);if(this.dtype==="string")try{return ee.map(ne=>decodeString(ne))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return ee}async bytes(){this.throwIfDisposed();const ee=await trackerFn().read(this.dataId);return this.dtype==="string"?ee:new Uint8Array(ee.buffer)}dispose(){this.isDisposed||(trackerFn().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(ee=!1){return opHandler$1.print(this,ee)}clone(){return this.throwIfDisposed(),opHandler$1.clone(this)}toString(ee=!1){const ne=this.dataSync();return tensorToString(ne,this.shape,this.dtype,ee)}cast(ee){return this.throwIfDisposed(),opHandler$1.cast(this,ee)}variable(ee=!0,ne,ae){return this.throwIfDisposed(),trackerFn().makeVariable(this,ee,ne,ae)}}Object.defineProperty(Tensor,Symbol.hasInstance,{value:re=>!!re&&re.data!=null&&re.dataSync!=null&&re.throwIfDisposed!=null});class Variable extends Tensor{constructor(ee,ne,ae,ce){super(ee.shape,ee.dtype,ee.dataId,ce),this.trainable=ne,this.name=ae}assign(ee){if(ee.dtype!==this.dtype)throw new Error(`dtype of the new value (${ee.dtype}) and previous value (${this.dtype}) must match`);if(!arraysEqual(ee.shape,this.shape))throw new Error(`shape of the new value (${ee.shape}) and previous value (${this.shape}) must match`);trackerFn().disposeTensor(this),this.dataId=ee.dataId,trackerFn().incRef(this,null)}dispose(){trackerFn().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Variable,Symbol.hasInstance,{value:re=>re instanceof Tensor&&re.assign!=null&&re.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Rank;(function(re){re.R0="R0",re.R1="R1",re.R2="R2",re.R3="R3",re.R4="R4",re.R5="R5",re.R6="R6"})(Rank||(Rank={}));var UpcastInt32AndMap;(function(re){re.float32="float32",re.int32="int32",re.bool="int32",re.complex64="complex64"})(UpcastInt32AndMap||(UpcastInt32AndMap={}));var UpcastBoolAndMap;(function(re){re.float32="float32",re.int32="int32",re.bool="bool",re.complex64="complex64"})(UpcastBoolAndMap||(UpcastBoolAndMap={}));var UpcastFloat32AndMap;(function(re){re.float32="float32",re.int32="float32",re.bool="float32",re.complex64="complex64"})(UpcastFloat32AndMap||(UpcastFloat32AndMap={}));var UpcastComplex64AndMap;(function(re){re.float32="complex64",re.int32="complex64",re.bool="complex64",re.complex64="complex64"})(UpcastComplex64AndMap||(UpcastComplex64AndMap={}));const upcastTypeMap={float32:UpcastFloat32AndMap,int32:UpcastInt32AndMap,bool:UpcastBoolAndMap,complex64:UpcastComplex64AndMap};function upcastType(re,ee){if(re==="string"||ee==="string"){if(re==="string"&&ee==="string")return"string";throw new Error(`Can not upcast ${re} with ${ee}`)}return upcastTypeMap[re][ee]}function sumOutType(re){return upcastType(re,"int32")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function makeTypesMatch(re,ee){if(re.dtype===ee.dtype)return[re,ee];const ne=upcastType(re.dtype,ee.dtype);return[re.cast(ne),ee.cast(ne)]}function getTensorsInContainer(re){const ee=[];return walkTensorContainer(re,ee,new Set),ee}function walkTensorContainer(re,ee,ne){if(re==null)return;if(re instanceof Tensor){ee.push(re);return}if(!isIterable(re))return;const ae=re;for(const ce in ae){const le=ae[ce];ne.has(le)||(ne.add(le),walkTensorContainer(le,ee,ne))}}function isIterable(re){return Array.isArray(re)||typeof re=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EngineState{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(ee=>ee.name)))}}}dispose(){for(const ee in this.registeredVariables)this.registeredVariables[ee].dispose()}}class Engine{constructor(ee){this.ENV=ee,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new EngineState}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const ee=this.getSortedBackends();for(let ne=0;ne<ee.length;ne++){const ae=ee[ne];if(await this.initializeBackend(ae).success){await this.setBackend(ae);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:ee,asyncInit:ne}=this.initializeBackendsAndReturnBest();if(ne)throw new Error(`The highest priority backend '${ee}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(ee)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(ee){if(!(ee in this.registry))if(ee in this.registryFactory){const{asyncInit:ne}=this.initializeBackend(ee);if(ne)return null}else return null;return this.registry[ee]}findBackendFactory(ee){return ee in this.registryFactory?this.registryFactory[ee].factory:null}registerBackend(ee,ne,ae=1){return ee in this.registryFactory?(console.warn(`${ee} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[ee]={factory:ne,priority:ae},!0)}async setBackend(ee){if(this.registryFactory[ee]==null)throw new Error(`Backend name '${ee}' not found in registry`);if(this.backendName=ee,this.registry[ee]==null){this.backendInstance=null;const{success:ne,asyncInit:ae}=this.initializeBackend(ee);if(!(ae?await ne:ne))return!1}return this.backendInstance=this.registry[ee],this.setupRegisteredKernels(),this.profiler=new Profiler(this.backendInstance),!0}setupRegisteredKernels(){getKernelsForBackend(this.backendName).forEach(ne=>{ne.setupFunc!=null&&ne.setupFunc(this.backendInstance)})}disposeRegisteredKernels(ee){getKernelsForBackend(ee).forEach(ae=>{ae.disposeFunc!=null&&ae.disposeFunc(this.registry[ee])})}initializeBackend(ee){const ne=this.registryFactory[ee];if(ne==null)throw new Error(`Cannot initialize backend ${ee}, no registration found.`);try{const ae=ne.factory();if(ae&&!(ae instanceof KernelBackend)&&typeof ae.then=="function"){const ce=++this.pendingBackendInitId,le=ae.then(ue=>ce<this.pendingBackendInitId?!1:(this.registry[ee]=ue,this.pendingBackendInit=null,!0)).catch(ue=>(ce<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${ee} failed`),console.warn(ue.stack||ue.message)),!1));return this.pendingBackendInit=le,{success:le,asyncInit:!0}}else return this.registry[ee]=ae,{success:!0,asyncInit:!1}}catch(ae){return console.warn(`Initialization of backend ${ee} failed`),console.warn(ae.stack||ae.message),{success:!1,asyncInit:!1}}}removeBackend(ee){if(!(ee in this.registryFactory))throw new Error(`${ee} backend not found in registry`);this.backendName===ee&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,ee in this.registry&&(this.disposeRegisteredKernels(ee),this.registry[ee].dispose(),delete this.registry[ee]),delete this.registryFactory[ee],this.backendName===ee&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((ee,ne)=>this.registryFactory[ne].priority-this.registryFactory[ee].priority)}initializeBackendsAndReturnBest(){const ee=this.getSortedBackends();for(let ne=0;ne<ee.length;ne++){const ae=ee[ne],{success:ce,asyncInit:le}=this.initializeBackend(ae);if(le||ce)return{name:ae,asyncInit:le}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(ee,ne){const ae=this.state.tensorInfo.get(ne),ce=ae.backend,le=this.readSync(ne);ce.disposeData(ne),ae.backend=ee,ee.move(ne,le,ae.shape,ae.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(ee,ne){let ae=null;if(ne==null){if(typeof ee!="function")throw new Error("Please provide a function to tidy()");ne=ee}else{if(typeof ee!="string"&&!(ee instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof ne!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");ae=ee}let ce;return this.scopedRun(()=>this.startScope(ae),()=>this.endScope(ce),()=>(ce=ne(),ce instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ce))}scopedRun(ee,ne,ae){ee();try{const ce=ae();return ne(),ce}catch(ce){throw ne(),ce}}nextTensorId(){return Engine.nextTensorId++}nextVariableId(){return Engine.nextVariableId++}clone(ee){const ne=this.makeTensorFromDataId(ee.dataId,ee.shape,ee.dtype),ae={x:ee},ce=ue=>({x:()=>{const he="float32",fe={x:ue},me={dtype:he};return ENGINE.runKernelFunc(ge=>ge.cast(ue,he),fe,null,Cast,me)}}),le=[];return this.addTapeNode(this.state.activeScope.name,ae,[ne],ce,le,{}),ne}runKernel(ee,ne,ae,ce,le){return this.runKernelFunc(null,ne,null,ee,ae,ce,le)}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(ee,ne,ae){const ce=this.backend.numDataIds();let le=0;ae.forEach(fe=>{le+=fe.dtype==="complex64"?3:1});const ue=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],he=ce-ne-le-ue;if(he>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${he} data ids) after running '${ee}'`)}runKernelFunc(ee,ne,ae,ce,le,ue,he){let fe,me=[];const ge=this.isTapeOn();ce==null&&(ce=this.state.activeScope!=null?this.state.activeScope.name:"");const ve=this.state.numBytes,ye=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let be;this.backendName==null&&this.backend;const Ee=getKernel(ce,this.backendName);let Ce;if(Ee!=null)be=()=>{const Te=this.backend.numDataIds();Ce=Ee.kernelFunc({inputs:ne,attrs:le,backend:this.backend});const ke=Array.isArray(Ce)?Ce:[Ce];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(ce,Te,ke);const Ne=ke.map(Fe=>{if(Fe.rank!=null)return Fe;const{dataId:De,shape:Oe,dtype:Re}=Fe;return this.makeTensorFromDataId(De,Oe,Re)});if(ge){let Fe=this.getTensorsForGradient(ce,ne,Ne);if(Fe==null){he==null&&(he=[]);const De=Ne.filter((Oe,Re)=>he[Re]);Fe=(ue||[]).slice().concat(De)}me=this.saveTensorsForBackwardMode(Fe)}return Ne};else{if(ee==null)throw new Error(`Error running ${ce}: Neither modular kernel nor forward func passed`);const Te=ke=>{ge&&(me=ke.map(Ne=>this.keep(this.clone(Ne))))};be=()=>{const ke=this.backend.numDataIds();Ce=this.tidy(()=>ee(this.backend,Te));const Ne=Array.isArray(Ce)?Ce:[Ce];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(ce,ke,Ne),Ne}}let Se;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?fe=be():(Se=this.profiler.profileKernel(ce,ne,()=>be()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(Se),fe=Se.outputs)}),ge&&this.addTapeNode(ce,ne,fe,ae,me,le),this.state.profiling&&this.state.activeProfile.kernels.push({name:ce,bytesAdded:this.state.numBytes-ve,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-ye,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(ne).map(Te=>ne[Te]!=null?ne[Te].shape:null),outputShapes:fe.map(Te=>Te.shape),kernelTimeMs:Se.timeMs,extraInfo:Se.extraInfo}),Array.isArray(Ce)?fe:fe[0]}saveTensorsForBackwardMode(ee){return ee.map(ae=>this.keep(this.clone(ae)))}getTensorsForGradient(ee,ne,ae){const ce=getGradient(ee);if(ce!=null){const le=ce.inputsToSave||[],ue=ce.outputsToSave||[];let he;ce.saveAllInputs?(assert$2(Array.isArray(ne),()=>"saveAllInputs is true, expected inputs to be an array."),he=Object.keys(ne).map(me=>ne[me])):he=le.map(me=>ne[me]);const fe=ae.filter((me,ge)=>ue[ge]);return he.concat(fe)}return null}makeTensor(ee,ne,ae,ce){if(ee==null)throw new Error("Values passed to engine.makeTensor() are null");ae=ae||"float32",ce=ce||this.backend;let le=ee;ae==="string"&&isString$2(ee[0])&&(le=ee.map(fe=>encodeString(fe)));const ue=ce.write(le,ne,ae),he=new Tensor(ne,ae,ue,this.nextTensorId());if(this.incRef(he,ce),ae==="string"){const fe=this.state.tensorInfo.get(ue),me=bytesFromStringArray(le);this.state.numBytes+=me-fe.bytes,fe.bytes=me}return he}makeTensorFromDataId(ee,ne,ae,ce){ae=ae||"float32";const le=new Tensor(ne,ae,ee,this.nextTensorId());return this.incRef(le,ce),le}makeVariable(ee,ne=!0,ae,ce){ae=ae||this.nextVariableId().toString(),ce!=null&&ce!==ee.dtype&&(ee=ee.cast(ce));const le=new Variable(ee,ne,ae,this.nextTensorId());if(this.state.registeredVariables[le.name]!=null)throw new Error(`Variable with name ${le.name} was already registered`);return this.state.registeredVariables[le.name]=le,this.incRef(le,this.backend),le}incRef(ee,ne){const ae=this.state.tensorInfo.has(ee.dataId)?this.state.tensorInfo.get(ee.dataId).refCount:0;if(this.state.numTensors++,ee.dtype==="string"&&this.state.numStringTensors++,ae===0){this.state.numDataBuffers++;let ce=0;ee.dtype!=="complex64"&&ee.dtype!=="string"&&(ce=ee.size*bytesPerElement(ee.dtype)),this.state.tensorInfo.set(ee.dataId,{backend:ne||this.backend,dtype:ee.dtype,shape:ee.shape,bytes:ce,refCount:0}),this.state.numBytes+=ce}this.state.tensorInfo.get(ee.dataId).refCount++,ee instanceof Variable||this.track(ee)}disposeTensor(ee){if(!this.state.tensorInfo.has(ee.dataId))return;this.state.numTensors--,ee.dtype==="string"&&this.state.numStringTensors--;const ne=this.state.tensorInfo.get(ee.dataId);ne.refCount<=1?(ee.dtype!=="complex64"&&(this.state.numBytes-=ne.bytes),this.state.numDataBuffers--,ne.backend.disposeData(ee.dataId),this.state.tensorInfo.delete(ee.dataId)):(ne.backend.decComplexRef(ee.dataId),this.state.tensorInfo.get(ee.dataId).refCount--)}disposeVariables(){for(const ee in this.state.registeredVariables){const ne=this.state.registeredVariables[ee];this.disposeVariable(ne)}}disposeVariable(ee){this.disposeTensor(ee),this.state.registeredVariables[ee.name]!=null&&delete this.state.registeredVariables[ee.name]}memory(){const ee=this.backend.memory();return ee.numTensors=this.state.numTensors,ee.numDataBuffers=this.state.numDataBuffers,ee.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(ee.unreliable=!0,ee.reasons==null&&(ee.reasons=[]),ee.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),ee}async profile(ee){this.state.profiling=!0;const ne=this.state.numBytes,ae=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await ee(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(ce=>ce.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-ne,this.state.activeProfile.newTensors=this.state.numTensors-ae;for(const ce of this.state.activeProfile.kernels)ce.kernelTimeMs=await ce.kernelTimeMs,ce.extraInfo=await ce.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(ee,ne,ae,ce,le,ue){const he={id:this.state.nextTapeNodeId++,kernelName:ee,inputs:ne,outputs:ae,saved:le},fe=getGradient(ee);fe!=null&&(ce=fe.gradFunc),ce!=null&&(he.gradient=me=>(me=me.map((ge,ve)=>{if(ge==null){const ye=ae[ve],be=makeZerosTypedArray(ye.size,ye.dtype);return this.makeTensor(be,ye.shape,ye.dtype)}return ge}),ce(me.length>1?me:me[0],le,ue))),this.state.activeTape.push(he)}keep(ee){return ee.kept=!0,ee}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(ee){const ne={track:[],name:"unnamed scope",id:this.state.nextScopeId++};ee&&(ne.name=ee),this.state.scopeStack.push(ne),this.state.activeScope=ne}endScope(ee){const ne=getTensorsInContainer(ee),ae=new Set(ne.map(le=>le.id));for(let le=0;le<this.state.activeScope.track.length;le++){const ue=this.state.activeScope.track[le];!ue.kept&&!ae.has(ue.id)&&ue.dispose()}const ce=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],ne.forEach(le=>{!le.kept&&le.scopeId===ce.id&&this.track(le)})}gradients(ee,ne,ae,ce=!1){if(assert$2(ne.length>0,()=>"gradients() received an empty list of xs."),ae!=null&&ae.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${ae.dtype}'`);const le=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",ee));assert$2(le instanceof Tensor,()=>"The result y returned by f() must be a tensor.");const ue=getFilteredNodesXToY(this.state.activeTape,ne,le);if(!ce&&ue.length===0&&ne.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const he={};he[le.id]=ae??ones$1(le.shape),backpropagateGradients(he,ue,me=>this.tidy(me),add$2);const fe=ne.map(me=>he[me.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(me=>{for(const ge of me.saved)ge.dispose()}),this.state.activeTape=null),{value:le,grads:fe}})}customGrad(ee){return assert$2(isFunction$3(ee),()=>"The f passed in customGrad(f) must be a function."),(...ne)=>{assert$2(ne.every(le=>le instanceof Tensor),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let ae;const ce={};return ne.forEach((le,ue)=>{ce[ue]=le}),this.runKernelFunc((le,ue)=>(ae=ee(...ne,ue),assert$2(ae.value instanceof Tensor,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),assert$2(isFunction$3(ae.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),ae.value),ce,(le,ue)=>{const he=ae.gradFunc(le,ue),fe=Array.isArray(he)?he:[he];assert$2(fe.length===ne.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),assert$2(fe.every(ge=>ge instanceof Tensor),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const me={};return fe.forEach((ge,ve)=>{me[ve]=()=>ge}),me})}}readSync(ee){return this.state.tensorInfo.get(ee).backend.readSync(ee)}read(ee){return this.state.tensorInfo.get(ee).backend.read(ee)}async time(ee){const ne=now$1(),ae=await this.backend.time(ee);return ae.wallMs=now$1()-ne,ae}track(ee){return this.state.activeScope!=null&&(ee.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(ee)),ee}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new EngineState;for(const ee in this.registry)this.disposeRegisteredKernels(ee),this.registry[ee].dispose(),delete this.registry[ee];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Engine.nextTensorId=0;Engine.nextVariableId=0;function ones$1(re){const ee=makeOnesTypedArray(sizeFromShape(re),"float32");return ENGINE.makeTensor(ee,re,"float32")}function getOrMakeEngine(){const re=getGlobalNamespace();if(re._tfengine==null){const ee=new Environment(re);re._tfengine=new Engine(ee)}return setEnvironmentGlobal(re._tfengine.ENV),setTensorTracker(()=>re._tfengine),re._tfengine}const ENGINE=getOrMakeEngine();function add$2(re,ee){const ne={a:re,b:ee};return ENGINE.runKernel(Add$2,ne)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _isNavigatorDefined(){return typeof navigator<"u"&&navigator!=null}function isMobile(){if(_isNavigatorDefined()){const re=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(re)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(re.substr(0,4))}return!1}function isBrowser$2(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const ENV$1=env();ENV$1.registerFlag("DEBUG",()=>!1,re=>{re&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ENV$1.registerFlag("IS_BROWSER",()=>isBrowser$2());ENV$1.registerFlag("IS_NODE",()=>typeof browser$1$1<"u"&&typeof browser$1$1.versions<"u"&&typeof browser$1$1.versions.node<"u");ENV$1.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ENV$1.registerFlag("PROD",()=>!1);ENV$1.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ENV$1.getBool("DEBUG"));ENV$1.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ENV$1.registerFlag("IS_TEST",()=>!1);ENV$1.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function inferShape(re,ee){let ne=re;if(isTypedArray$3(re))return ee==="string"?[]:[re.length];if(!Array.isArray(re))return[];const ae=[];for(;Array.isArray(ne)||isTypedArray$3(ne)&&ee!=="string";)ae.push(ne.length),ne=ne[0];return Array.isArray(re)&&env().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&deepAssertShapeConsistency(re,ae,[]),ae}function deepAssertShapeConsistency(re,ee,ne){if(ne=ne||[],!Array.isArray(re)&&!isTypedArray$3(re)){assert$2(ee.length===0,()=>`Element arr[${ne.join("][")}] is a primitive, but should be an array/TypedArray of ${ee[0]} elements`);return}assert$2(ee.length>0,()=>`Element arr[${ne.join("][")}] should be a primitive, but is an array of ${re.length} elements`),assert$2(re.length===ee[0],()=>`Element arr[${ne.join("][")}] should have ${ee[0]} elements, but has ${re.length} elements`);const ae=ee.slice(1);for(let ce=0;ce<re.length;++ce)deepAssertShapeConsistency(re[ce],ae,ne.concat(ce))}function assertDtype(re,ee,ne,ae){if(re!=="string_or_numeric"){if(re==null)throw new Error("Expected dtype cannot be null.");if(re!=="numeric"&&re!==ee||re==="numeric"&&ee==="string")throw new Error(`Argument '${ne}' passed to '${ae}' must be ${re} tensor, but got ${ee} tensor`)}}function convertToTensor(re,ee,ne,ae="numeric"){if(re instanceof Tensor)return assertDtype(ae,re.dtype,ee,ne),re;let ce=inferDtype(re);if(ce!=="string"&&["bool","int32","float32"].indexOf(ae)>=0&&(ce=ae),assertDtype(ae,ce,ee,ne),re==null||!isTypedArray$3(re)&&!Array.isArray(re)&&typeof re!="number"&&typeof re!="boolean"&&typeof re!="string"){const fe=re==null?"null":re.constructor.name;throw new Error(`Argument '${ee}' passed to '${ne}' must be a Tensor or TensorLike, but got '${fe}'`)}const le=inferShape(re,ce);!isTypedArray$3(re)&&!Array.isArray(re)&&(re=[re]);const he=ce!=="string"?toTypedArray(re,ce):flatten$2(re,[],!0);return ENGINE.makeTensor(he,le,ce)}function convertToTensorArray(re,ee,ne,ae="numeric"){if(!Array.isArray(re))throw new Error(`Argument ${ee} passed to ${ne} must be a \`Tensor[]\` or \`TensorLike[]\``);return re.map((le,ue)=>convertToTensor(le,`${ee}[${ue}]`,ne,ae))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OP_SCOPE_SUFFIX="__op";function op(re){const ee=Object.keys(re);if(ee.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${ee.length} keys.`);let ne=ee[0];const ae=re[ne];ne.endsWith("_")&&(ne=ne.substring(0,ne.length-1)),ne=ne+OP_SCOPE_SUFFIX;const ce=(...le)=>{ENGINE.startScope(ne);try{const ue=ae(...le);return isPromise(ue)&&console.error("Cannot return a Promise inside of tidy."),ENGINE.endScope(ue),ue}catch(ue){throw ENGINE.endScope(null),ue}};return Object.defineProperty(ce,"name",{value:ne,configurable:!0}),ce}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function complex_(re,ee){const ne=convertToTensor(re,"real","complex"),ae=convertToTensor(ee,"imag","complex");assertShapesMatch(ne.shape,ae.shape,`real and imag shapes, ${ne.shape} and ${ae.shape}, must match in call to tf.complex().`);const ce={real:ne,imag:ae};return ENGINE.runKernel(Complex,ce)}const complex$2=op({complex_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function makeTensor(re,ee,ne,ae){if(ae==null&&(ae=inferDtype(re)),ae==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!isTypedArray$3(re)&&!Array.isArray(re)&&typeof re!="number"&&typeof re!="boolean"&&typeof re!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(ee!=null){assertNonNegativeIntegerDimensions(ee);const ce=sizeFromShape(ee),le=sizeFromShape(ne);assert$2(ce===le,()=>`Based on the provided shape, [${ee}], the tensor should have ${ce} values but has ${le}`);for(let ue=0;ue<ne.length;++ue){const he=ne[ue],fe=ue===ne.length-1?he!==sizeFromShape(ee.slice(ue)):!0;assert$2(ne[ue]===ee[ue]||!fe,()=>`Error creating a new Tensor. Inferred shape (${ne}) does not match the provided shape (${ee}). `)}}return!isTypedArray$3(re)&&!Array.isArray(re)&&(re=[re]),ee=ee||ne,re=ae!=="string"?toTypedArray(re,ae):flatten$2(re,[],!0),ENGINE.makeTensor(re,ee,ae)}const NUM_BYTES_STRING_LENGTH=4;async function encodeWeights(re,ee){const ne=[],ae=[],ce=Array.isArray(re)?re.map(ue=>ue.name):Object.keys(re);for(let ue=0;ue<ce.length;++ue){const he=ce[ue],fe=Array.isArray(re)?re[ue].tensor:re[he];if(fe.dtype!=="float32"&&fe.dtype!=="int32"&&fe.dtype!=="bool"&&fe.dtype!=="string"&&fe.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${he}': ${fe.dtype}`);const me={name:he,shape:fe.shape,dtype:fe.dtype};if(fe.dtype==="string"){const ge=new Promise(async ve=>{const ye=await fe.bytes(),be=ye.reduce((Se,Te)=>Se+Te.length,0)+NUM_BYTES_STRING_LENGTH*ye.length,Ee=new Uint8Array(be);let Ce=0;for(let Se=0;Se<ye.length;Se++){const Te=ye[Se],ke=new Uint8Array(new Uint32Array([Te.length]).buffer);Ee.set(ke,Ce),Ce+=NUM_BYTES_STRING_LENGTH,Ee.set(Te,Ce),Ce+=Te.length}ve(Ee)});ae.push(ge)}else ae.push(fe.data());ee!=null&&(me.group=ee),ne.push(me)}const le=await Promise.all(ae);return{data:concatenateTypedArrays(le),specs:ne}}function concatenateTypedArrays(re){if(re===null)throw new Error(`Invalid input value: ${JSON.stringify(re)}`);let ee=0;const ne=[];re.forEach(le=>{if(ee+=le.byteLength,ne.push(le.byteLength===le.buffer.byteLength?le:new le.constructor(le)),!(le instanceof Float32Array||le instanceof Int32Array||le instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${le.constructor.name}`)});const ae=new Uint8Array(ee);let ce=0;return ne.forEach(le=>{ae.set(new Uint8Array(le.buffer),ce),ce+=le.byteLength}),ae.buffer}const useNodeBuffer=typeof Buffer$2<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function stringByteLength(re){return useNodeBuffer?Buffer$2.byteLength(re):new Blob([re]).size}function arrayBufferToBase64String(re){if(useNodeBuffer)return Buffer$2.from(re).toString("base64");const ee=new Uint8Array(re);let ne="";for(let ae=0,ce=ee.length;ae<ce;ae++)ne+=String.fromCharCode(ee[ae]);return btoa(ne)}function base64StringToArrayBuffer(re){if(useNodeBuffer){const ae=Buffer$2.from(re,"base64");return ae.buffer.slice(ae.byteOffset,ae.byteOffset+ae.byteLength)}const ee=atob(re),ne=new Uint8Array(ee.length);for(let ae=0;ae<ee.length;++ae)ne.set([ee.charCodeAt(ae)],ae);return ne.buffer}function concatenateArrayBuffers(re){if(re.length===1)return re[0];let ee=0;re.forEach(ce=>{ee+=ce.byteLength});const ne=new Uint8Array(ee);let ae=0;return re.forEach(ce=>{ne.set(new Uint8Array(ce),ae),ae+=ce.byteLength}),ne.buffer}function getModelArtifactsInfoForJSON(re){if(re.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:re.modelTopology==null?0:stringByteLength(JSON.stringify(re.modelTopology)),weightSpecsBytes:re.weightSpecs==null?0:stringByteLength(JSON.stringify(re.weightSpecs)),weightDataBytes:re.weightData==null?0:re.weightData.byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IORouterRegistry{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return IORouterRegistry.instance==null&&(IORouterRegistry.instance=new IORouterRegistry),IORouterRegistry.instance}static registerSaveRouter(ee){IORouterRegistry.getInstance().saveRouters.push(ee)}static registerLoadRouter(ee){IORouterRegistry.getInstance().loadRouters.push(ee)}static getSaveHandlers(ee){return IORouterRegistry.getHandlers(ee,"save")}static getLoadHandlers(ee,ne){return IORouterRegistry.getHandlers(ee,"load",ne)}static getHandlers(ee,ne,ae){const ce=[];return(ne==="load"?IORouterRegistry.getInstance().loadRouters:IORouterRegistry.getInstance().saveRouters).forEach(ue=>{const he=ue(ee,ae);he!==null&&ce.push(he)}),ce}}const getSaveHandlers=re=>IORouterRegistry.getSaveHandlers(re);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DATABASE_NAME="tensorflowjs",DATABASE_VERSION=1,MODEL_STORE_NAME="models_store",INFO_STORE_NAME="model_info_store";function getIndexedDBFactory(){if(!env().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const re=typeof window>"u"?self:window,ee=re.indexedDB||re.mozIndexedDB||re.webkitIndexedDB||re.msIndexedDB||re.shimIndexedDB;if(ee==null)throw new Error("The current browser does not appear to support IndexedDB.");return ee}function setUpDatabase(re){const ee=re.result;ee.createObjectStore(MODEL_STORE_NAME,{keyPath:"modelPath"}),ee.createObjectStore(INFO_STORE_NAME,{keyPath:"modelPath"})}class BrowserIndexedDB{constructor(ee){if(this.indexedDB=getIndexedDBFactory(),ee==null||!ee)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=ee}async save(ee){if(ee.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,ee)}async load(){return this.databaseAction(this.modelPath)}databaseAction(ee,ne){return new Promise((ae,ce)=>{const le=this.indexedDB.open(DATABASE_NAME,DATABASE_VERSION);le.onupgradeneeded=()=>setUpDatabase(le),le.onsuccess=()=>{const ue=le.result;if(ne==null){const he=ue.transaction(MODEL_STORE_NAME,"readonly"),me=he.objectStore(MODEL_STORE_NAME).get(this.modelPath);me.onsuccess=()=>{if(me.result==null)return ue.close(),ce(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));ae(me.result.modelArtifacts)},me.onerror=ge=>(ue.close(),ce(me.error)),he.oncomplete=()=>ue.close()}else{const he=getModelArtifactsInfoForJSON(ne),fe=ue.transaction(INFO_STORE_NAME,"readwrite");let me=fe.objectStore(INFO_STORE_NAME);const ge=me.put({modelPath:this.modelPath,modelArtifactsInfo:he});let ve;ge.onsuccess=()=>{ve=ue.transaction(MODEL_STORE_NAME,"readwrite");const be=ve.objectStore(MODEL_STORE_NAME).put({modelPath:this.modelPath,modelArtifacts:ne,modelArtifactsInfo:he});be.onsuccess=()=>ae({modelArtifactsInfo:he}),be.onerror=Ee=>{me=fe.objectStore(INFO_STORE_NAME);const Ce=me.delete(this.modelPath);Ce.onsuccess=()=>(ue.close(),ce(be.error)),Ce.onerror=Se=>(ue.close(),ce(be.error))}},ge.onerror=ye=>(ue.close(),ce(ge.error)),fe.oncomplete=()=>{ve==null?ue.close():ve.oncomplete=()=>ue.close()}}},le.onerror=ue=>ce(le.error)})}}BrowserIndexedDB.URL_SCHEME="indexeddb://";const indexedDBRouter=re=>env().getBool("IS_BROWSER")&&!Array.isArray(re)&&re.startsWith(BrowserIndexedDB.URL_SCHEME)?browserIndexedDB(re.slice(BrowserIndexedDB.URL_SCHEME.length)):null;IORouterRegistry.registerSaveRouter(indexedDBRouter);IORouterRegistry.registerLoadRouter(indexedDBRouter);function browserIndexedDB(re){return new BrowserIndexedDB(re)}function maybeStripScheme$1(re){return re.startsWith(BrowserIndexedDB.URL_SCHEME)?re.slice(BrowserIndexedDB.URL_SCHEME.length):re}class BrowserIndexedDBManager{constructor(){this.indexedDB=getIndexedDBFactory()}async listModels(){return new Promise((ee,ne)=>{const ae=this.indexedDB.open(DATABASE_NAME,DATABASE_VERSION);ae.onupgradeneeded=()=>setUpDatabase(ae),ae.onsuccess=()=>{const ce=ae.result,le=ce.transaction(INFO_STORE_NAME,"readonly"),he=le.objectStore(INFO_STORE_NAME).getAll();he.onsuccess=()=>{const fe={};for(const me of he.result)fe[me.modelPath]=me.modelArtifactsInfo;ee(fe)},he.onerror=fe=>(ce.close(),ne(he.error)),le.oncomplete=()=>ce.close()},ae.onerror=ce=>ne(ae.error)})}async removeModel(ee){return ee=maybeStripScheme$1(ee),new Promise((ne,ae)=>{const ce=this.indexedDB.open(DATABASE_NAME,DATABASE_VERSION);ce.onupgradeneeded=()=>setUpDatabase(ce),ce.onsuccess=()=>{const le=ce.result,ue=le.transaction(INFO_STORE_NAME,"readwrite"),he=ue.objectStore(INFO_STORE_NAME),fe=he.get(ee);let me;fe.onsuccess=()=>{if(fe.result==null)return le.close(),ae(new Error(`Cannot find model with path '${ee}' in IndexedDB.`));{const ge=he.delete(ee),ve=()=>{me=le.transaction(MODEL_STORE_NAME,"readwrite");const be=me.objectStore(MODEL_STORE_NAME).delete(ee);be.onsuccess=()=>ne(fe.result.modelArtifactsInfo),be.onerror=Ee=>ae(fe.error)};ge.onsuccess=ve,ge.onerror=ye=>(ve(),le.close(),ae(fe.error))}},fe.onerror=ge=>(le.close(),ae(fe.error)),ue.oncomplete=()=>{me==null?le.close():me.oncomplete=()=>le.close()}},ce.onerror=le=>ae(ce.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PATH_SEPARATOR="/",PATH_PREFIX="tensorflowjs_models",INFO_SUFFIX="info",MODEL_TOPOLOGY_SUFFIX="model_topology",WEIGHT_SPECS_SUFFIX="weight_specs",WEIGHT_DATA_SUFFIX="weight_data",MODEL_METADATA_SUFFIX="model_metadata";function getModelKeys(re){return{info:[PATH_PREFIX,re,INFO_SUFFIX].join(PATH_SEPARATOR),topology:[PATH_PREFIX,re,MODEL_TOPOLOGY_SUFFIX].join(PATH_SEPARATOR),weightSpecs:[PATH_PREFIX,re,WEIGHT_SPECS_SUFFIX].join(PATH_SEPARATOR),weightData:[PATH_PREFIX,re,WEIGHT_DATA_SUFFIX].join(PATH_SEPARATOR),modelMetadata:[PATH_PREFIX,re,MODEL_METADATA_SUFFIX].join(PATH_SEPARATOR)}}function getModelPathFromKey(re){const ee=re.split(PATH_SEPARATOR);if(ee.length<3)throw new Error(`Invalid key format: ${re}`);return ee.slice(1,ee.length-1).join(PATH_SEPARATOR)}function maybeStripScheme(re){return re.startsWith(BrowserLocalStorage.URL_SCHEME)?re.slice(BrowserLocalStorage.URL_SCHEME.length):re}class BrowserLocalStorage{constructor(ee){if(!env().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,ee==null||!ee)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=ee,this.keys=getModelKeys(this.modelPath)}async save(ee){if(ee.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const ne=JSON.stringify(ee.modelTopology),ae=JSON.stringify(ee.weightSpecs),ce=getModelArtifactsInfoForJSON(ee);try{this.LS.setItem(this.keys.info,JSON.stringify(ce)),this.LS.setItem(this.keys.topology,ne),this.LS.setItem(this.keys.weightSpecs,ae),this.LS.setItem(this.keys.weightData,arrayBufferToBase64String(ee.weightData));const le={format:ee.format,generatedBy:ee.generatedBy,convertedBy:ee.convertedBy};return ee.signature!=null&&(le.signature=ee.signature),ee.userDefinedMetadata!=null&&(le.userDefinedMetadata=ee.userDefinedMetadata),ee.modelInitializer!=null&&(le.modelInitializer=ee.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(le)),{modelArtifactsInfo:ce}}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${ce.modelTopologyBytes}, weightSpecsBytes=${ce.weightSpecsBytes}, weightDataBytes=${ce.weightDataBytes}.`)}}}async load(){const ee=JSON.parse(this.LS.getItem(this.keys.info));if(ee==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(ee.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const ne={},ae=JSON.parse(this.LS.getItem(this.keys.topology));if(ae==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);ne.modelTopology=ae;const ce=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(ce==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);ne.weightSpecs=ce;const le=this.LS.getItem(this.keys.modelMetadata);if(le!=null){const he=JSON.parse(le);ne.format=he.format,ne.generatedBy=he.generatedBy,ne.convertedBy=he.convertedBy,he.signature!=null&&(ne.signature=he.signature),he.userDefinedMetadata!=null&&(ne.userDefinedMetadata=he.userDefinedMetadata),he.modelInitializer!=null&&(ne.modelInitializer=he.modelInitializer)}const ue=this.LS.getItem(this.keys.weightData);if(ue==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return ne.weightData=base64StringToArrayBuffer(ue),ne}}BrowserLocalStorage.URL_SCHEME="localstorage://";const localStorageRouter=re=>env().getBool("IS_BROWSER")&&!Array.isArray(re)&&re.startsWith(BrowserLocalStorage.URL_SCHEME)?browserLocalStorage(re.slice(BrowserLocalStorage.URL_SCHEME.length)):null;IORouterRegistry.registerSaveRouter(localStorageRouter);IORouterRegistry.registerLoadRouter(localStorageRouter);function browserLocalStorage(re){return new BrowserLocalStorage(re)}class BrowserLocalStorageManager{constructor(){assert$2(env().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),assert$2(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const ee={},ne=PATH_PREFIX+PATH_SEPARATOR,ae=PATH_SEPARATOR+INFO_SUFFIX;for(let ce=0;ce<this.LS.length;++ce){const le=this.LS.key(ce);if(le.startsWith(ne)&&le.endsWith(ae)){const ue=getModelPathFromKey(le);ee[ue]=JSON.parse(this.LS.getItem(le))}}return ee}async removeModel(ee){ee=maybeStripScheme(ee);const ne=getModelKeys(ee);if(this.LS.getItem(ne.info)==null)throw new Error(`Cannot find model at path '${ee}'`);const ae=JSON.parse(this.LS.getItem(ne.info));return this.LS.removeItem(ne.info),this.LS.removeItem(ne.topology),this.LS.removeItem(ne.weightSpecs),this.LS.removeItem(ne.weightData),ae}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const URL_SCHEME_SUFFIX="://";class ModelStoreManagerRegistry{constructor(){this.managers={}}static getInstance(){return ModelStoreManagerRegistry.instance==null&&(ModelStoreManagerRegistry.instance=new ModelStoreManagerRegistry),ModelStoreManagerRegistry.instance}static registerManager(ee,ne){assert$2(ee!=null,()=>"scheme must not be undefined or null."),ee.endsWith(URL_SCHEME_SUFFIX)&&(ee=ee.slice(0,ee.indexOf(URL_SCHEME_SUFFIX))),assert$2(ee.length>0,()=>"scheme must not be an empty string.");const ae=ModelStoreManagerRegistry.getInstance();assert$2(ae.managers[ee]==null,()=>`A model store manager is already registered for scheme '${ee}'.`),ae.managers[ee]=ne}static getManager(ee){const ne=this.getInstance().managers[ee];if(ne==null)throw new Error(`Cannot find model manager for scheme '${ee}'`);return ne}static getSchemes(){return Object.keys(this.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PlatformBrowser{fetch(ee,ne){return fetch(ee,ne)}now(){return performance.now()}encode(ee,ne){if(ne!=="utf-8"&&ne!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${ne}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(ee)}decode(ee,ne){return new TextDecoder(ne).decode(ee)}}if(env().get("IS_BROWSER")){env().setPlatform("browser",new PlatformBrowser);try{ModelStoreManagerRegistry.registerManager(BrowserLocalStorage.URL_SCHEME,new BrowserLocalStorageManager)}catch{}try{ModelStoreManagerRegistry.registerManager(BrowserIndexedDB.URL_SCHEME,new BrowserIndexedDBManager)}catch{}}const getNodeFetch={importFetch:()=>require$$0$1};let systemFetch;class PlatformNode{constructor(){this.util=require$$1$1,this.textEncoder=new this.util.TextEncoder}fetch(ee,ne){return env().global.fetch!=null?env().global.fetch(ee,ne):(systemFetch==null&&(systemFetch=getNodeFetch.importFetch()),systemFetch(ee,ne))}now(){const ee=browser$1$1.hrtime();return ee[0]*1e3+ee[1]/1e6}encode(ee,ne){if(ne!=="utf-8"&&ne!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${ne}`);return this.textEncoder.encode(ee)}decode(ee,ne){return ee.length===0?"":new this.util.TextDecoder(ne).decode(ee)}}env().get("IS_NODE")&&env().setPlatform("node",new PlatformNode);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function buffer$1(re,ee="float32",ne){return ee=ee||"float32",assertNonNegativeIntegerDimensions(re),new TensorBuffer(re,ee,ne)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cast_(re,ee){const ne=convertToTensor(re,"x","cast");if(!isValidDtype(ee))throw new Error(`Failed to cast to unknown dtype ${ee}`);if(ee==="string"&&ne.dtype!=="string"||ee!=="string"&&ne.dtype==="string")throw new Error("Only strings can be casted to strings");const ae={x:ne},ce={dtype:ee};return ENGINE.runKernel(Cast,ae,ce)}const cast$3=op({cast_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function clone_(re){const ne={x:convertToTensor(re,"x","clone","string_or_numeric")};return ENGINE.runKernel(Identity$1,ne)}const clone$1=op({clone_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function print(re,ee=!1){console.log(re.toString(ee))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getOrMakeEngine();const opHandler={buffer:buffer$1,cast:cast$3,clone:clone$1,print};setOpHandler(opHandler);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function matMul_(re,ee,ne=!1,ae=!1){let ce=convertToTensor(re,"a","matMul"),le=convertToTensor(ee,"b","matMul");[ce,le]=makeTypesMatch(ce,le);const ue={a:ce,b:le},he={transposeA:ne,transposeB:ae};return ENGINE.runKernel(BatchMatMul,ue,he)}const matMul$1=op({matMul_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oneHot_(re,ee,ne=1,ae=0){if(ee<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${ee}`);const le={indices:convertToTensor(re,"indices","oneHot","int32")},ue={depth:ee,onValue:ne,offValue:ae};return ENGINE.runKernel(OneHot,le,ue)}const oneHot$2=op({oneHot_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transpose_(re,ee){const ne=convertToTensor(re,"x","transpose");if(ee==null&&(ee=ne.shape.map((le,ue)=>ue).reverse()),assert$2(ne.rank===ee.length,()=>`Error in transpose: rank of input ${ne.rank} must match length of perm ${ee}.`),ee.forEach(le=>{assert$2(le>=0&&le<ne.rank,()=>`All entries in 'perm' must be between 0 and ${ne.rank-1} but got ${ee}`)}),ne.rank<=1)return ne.clone();const ae={x:ne},ce={perm:ee};return ENGINE.runKernel(Transpose,ae,ce)}const transpose$2=op({transpose_});function prepareAndValidate(re,ee){const ne=re.shape.length,ae=ee.shape.length;if(ne<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${ne}.`);if(ae<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${ae}.`);if(ee.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${ee.dtype}.`);if(ee.shape[ae-1]>ne)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${ee.shape[ae-1]} vs. ${ne}`);if(sizeFromShape(re.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${re.shape}.`);const ce=ee.shape,le=ce[ce.length-1];let ue=1;for(let ve=0;ve<ce.length-1;++ve)ue*=ce[ve];const he=re.shape,fe=ce.slice();fe.pop();let me=1;for(let ve=le;ve<ne;++ve)me*=he[ve],fe.push(he[ve]);const ge=[...computeStrides(re.shape).map(ve=>ve/me),1].slice(0,le);return[fe,ue,me,ge]}function validateUpdateShape(re,ee,ne){const ae=ee.rank>1?ee.shape[ee.rank-1]:1,ce=ee.rank>1?ee.rank-1:1,le=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${ne.shape}, indices.shape: ${ee.shape}, shape: ${re}, sliceDim: ${ae}, and batchDim: ${ce}.`;if(ne.rank<ce)throw new Error(le+` update.rank < ${ce}. `);if(re.length<ae+(ne.rank-ce))throw new Error(le+` Output shape length < ${ae+(ne.rank-ce)}`);if(ne.rank!==ce+re.length-ae)throw new Error(le+` update.rank != ${ce+re.length-ae}`);for(let ue=0;ue<ce;++ue)if(ne.shape[ue]!==ee.shape[ue])throw new Error(le+` updates.shape[${ue}] (${ne.shape[ue]}) != indices.shape[${ue}] (${ee.shape[ue]}).`);for(let ue=0;ue<ne.rank-ce;++ue)if(ne.shape[ue+ce]!==re[ue+ae])throw new Error(le+` updates.shape[${ue+ce}] (${ne.shape[ue+ce]}) != shape[${ue+ce}] (${re[ue+ce]})`)}function validateInput(re,ee,ne){if(ee.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${ee.rank}.`);if(re.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${re.rank}.`);if(ee.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${ee.dtype}`);if(ne.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${ne}`);if(ne.length===0){if(ee.size===0)throw new Error(`Indices specified for empty output. indices shape: ${ee.shape}`);if(re.size===0)throw new Error(`Updates specified for empty output. updates shape: ${re.shape}`)}validateUpdateShape(ne,ee,re)}function calculateShapes(re,ee,ne){const ae=ee.shape.length,ce=ae>1?ee.shape[ae-1]:1,le=ne.length;let ue=1;for(let ve=ce;ve<le;++ve)ue*=ne[ve];const he=ce<1?1:ce,fe=sizeFromShape(ee.shape)/he,me=[...computeStrides(ne.slice(0,ce)),1],ge=sizeFromShape(ne);return{sliceRank:ce,numUpdates:fe,sliceSize:ue,strides:me,outputSize:ge}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function assertParamsValid(re,ee,ne){const ae=re.shape.length;assert$2(ae===ee.length,()=>`Error in slice${ae}D: Length of begin ${ee} must match the rank of the array (${ae}).`),assert$2(ae===ne.length,()=>`Error in slice${ae}D: Length of size ${ne} must match the rank of the array (${ae}).`);for(let ce=0;ce<ae;++ce)assert$2(ee[ce]+ne[ce]<=re.shape[ce],()=>`Error in slice${ae}D: begin[${ce}] + size[${ce}] (${ee[ce]+ne[ce]}) would overflow input.shape[${ce}] (${re.shape[ce]})`)}function maskToAxes(re){const ee=[];let ne=0;for(;re>0;)re&1&&ee.push(ne),re/=2,ne++;return ee}function computeOutShape$2(re,ee,ne){const ae=[];for(let ce=0;ce<re.length;ce++)ae[ce]=Math.ceil((ee[ce]-re[ce])/ne[ce]);return ae}function stridesWithElidedDims(re,ee,ne,ae){const ce=[...re];for(let le=ce.length;le<ae.length;le++)ce.push(1);for(let le=0;le<ne;le++)le===0?ce[ee]=1:(ce.splice(ee,0,1),ce.pop());return ce}function unnormalizeAxis(re,ee,ne){return ne<=re?ne:ne-(ee-1)}function getElidedAxes(re,ee){const ne=[];for(let ae=0;ae<re;ae++)ne.push(ee+ae);return ne}function getNormalizedAxes(re,ee,ne,ae,ce,le,ue,he,fe){const me=re.length;let ge=new Array(me),ve=new Array(me),ye=new Array(me);if(ee.length&&ne>0){const be=ee[0],Ee=ne+1;ge=startIndicesWithElidedDims(ue,be,Ee,ae,re),ve=stopIndicesWithElidedDims(he,be,Ee,ce,re),ye=stridesWithElidedDims(le,be,Ee,re)}else for(let be=0;be<me;be++)ge[be]=startForAxis(ue,ae,le,re,be,fe),ve[be]=stopForAxis(he,ce,le,re,be,fe),ye[be]=stridesForAxis(le,be,fe);return{begin:ge,end:ve,strides:ye}}function startIndicesWithElidedDims(re,ee,ne,ae,ce){const le=[...ce],ue=getElidedAxes(ne,ee);for(let he=0;he<le.length;he++)if(ue.indexOf(he)>-1)le[he]=0;else{const fe=unnormalizeAxis(ee,ne,he);let me=ae[fe];re&1<<fe&&(me=0),le[he]=me}return le}function stopIndicesWithElidedDims(re,ee,ne,ae,ce){const le=[...ce],ue=getElidedAxes(ne,ee);for(let he=0;he<le.length;he++)if(ue.indexOf(he)>-1)le[he]=Number.MAX_SAFE_INTEGER;else{const fe=unnormalizeAxis(ee,ne,he);let me=ae[fe];re&1<<fe&&(me=Number.MAX_SAFE_INTEGER),le[he]=me}for(let he=0;he<le.length;he++){const fe=ce[he];le[he]<0&&(le[he]+=fe),le[he]=clamp$1(0,le[he],ce[he])}return le}function stridesForAxis(re,ee,ne){let ae=re[ee];return(ne&1<<ee||ae==null)&&(ae=1),ae}function startForAxis(re,ee,ne,ae,ce,le){let ue=ee[ce];const he=ne[ce]||1;(re&1<<ce||le&1<<ce||ue==null)&&(he>0?ue=Number.MIN_SAFE_INTEGER:ue=Number.MAX_SAFE_INTEGER);const fe=ae[ce];return ue<0&&(ue+=fe),ue=clamp$1(0,ue,fe-1),ue}function stopForAxis(re,ee,ne,ae,ce,le){let ue=ee[ce];const he=ne[ce]||1;(re&1<<ce||le&1<<ce||ue==null)&&(he>0?ue=Number.MAX_SAFE_INTEGER:ue=Number.MIN_SAFE_INTEGER);const fe=ae[ce];return ue<0&&(ue+=fe),he>0?ue=clamp$1(0,ue,fe):ue=clamp$1(-1,ue,fe-1),ue}function isSliceContinous(re,ee,ne){let ae=ne.length;for(let ce=0;ce<ne.length;ce++)if(ne[ce]>1){ae=ce;break}for(let ce=ae+1;ce<ne.length;ce++)if(ee[ce]>0||ne[ce]!==re[ce])return!1;return!0}function computeFlatOffset(re,ee){let ne=re.length>0?re[re.length-1]:1;for(let ae=0;ae<re.length-1;ae++)ne+=re[ae]*ee[ae];return ne}function parseSliceParams(re,ee,ne){let ae;const ce=re.shape.length;typeof ee=="number"?ae=[ee,...new Array(ce-1).fill(0)]:ee.length<ce?ae=ee.concat(new Array(ce-ee.length).fill(0)):ae=ee.slice(),ae.forEach(ue=>{assert$2(ue!==-1,()=>"slice() does not support negative begin indexing.")});let le;return ne==null?le=new Array(ce).fill(-1):typeof ne=="number"?le=[ne,...new Array(ce-1).fill(-1)]:ne.length<ce?le=ne.concat(new Array(ce-ne.length).fill(-1)):le=ne,le=le.map((ue,he)=>ue>=0?ue:(assert$2(ue===-1,()=>`Negative size values should be exactly -1 but got ${ue} for the slice() size at index ${he}.`),re.shape[he]-ae[he])),[ae,le]}function sliceInfo(re,ee,ne,ae,ce,le,ue,he,fe){let me=ee.slice(),ge=ne.slice(),ve=ae;ae==null&&(ve=new Array(me.length));const ye=maskToAxes(ue);if(ye.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(ue!==0&&he!==0)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(ue!==0&&fe!==0)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const be=re.length-me.length,Ee=maskToAxes(he),Ce=re.slice();Ee.forEach(Re=>{me[Re]=0,ge[Re]=1,Ce.splice(Re,0,1)});const{begin:Se,end:Te,strides:ke}=getNormalizedAxes(Ce,ye,be,me,ge,ve,ce,le,ue);me=Se,ge=Te,ve=ke;const Ne=maskToAxes(fe);Ne.forEach(Re=>{ge[Re]=me[Re]+1,ve[Re]=1});const Fe=computeOutShape$2(me,ge,ve),De=Fe.filter((Re,Be)=>Ne.indexOf(Be)===-1);return{nonStrided:ve.every(Re=>Re===1),$begin:me,$end:ge,$strides:ve,size:Fe,newShape:Ce,outShape:De}}const slice_util=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid,computeFlatOffset,computeOutShape:computeOutShape$2,getNormalizedAxes,isSliceContinous,maskToAxes,parseSliceParams,sliceInfo,startForAxis,startIndicesWithElidedDims,stopForAxis,stopIndicesWithElidedDims,stridesForAxis,stridesWithElidedDims},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Serializable{getClassName(){return this.constructor.className}static fromConfig(ee,ne){return new ee(ne)}}class SerializationMap{constructor(){this.classNameMap={}}static getMap(){return SerializationMap.instance==null&&(SerializationMap.instance=new SerializationMap),SerializationMap.instance}static register(ee){SerializationMap.getMap().classNameMap[ee.className]=[ee,ee.fromConfig]}}function registerClass(re){assert$2(re.className!=null,()=>"Class being registered does not have the static className property defined."),assert$2(typeof re.className=="string",()=>"className is required to be a string, but got type "+typeof re.className),assert$2(re.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),SerializationMap.register(re)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function deprecationWarn(re){env().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(re+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function engine(){return ENGINE}function memory(){return ENGINE.memory()}function tidy(re,ee){return ENGINE.tidy(re,ee)}function dispose(re){getTensorsInContainer(re).forEach(ne=>ne.dispose())}function keep(re){return ENGINE.keep(re)}function registerBackend(re,ee,ne=1){return ENGINE.registerBackend(re,ee,ne)}function backend(){return ENGINE.backend}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function add_(re,ee){let ne=convertToTensor(re,"a","add"),ae=convertToTensor(ee,"b","add");[ne,ae]=makeTypesMatch(ne,ae);const ce={a:ne,b:ae};return ENGINE.runKernel(Add$2,ce)}const add$1=op({add_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function floorDiv_(re,ee){let ne=convertToTensor(re,"a","floorDiv"),ae=convertToTensor(ee,"b","floorDiv");[ne,ae]=makeTypesMatch(ne,ae);const ce={a:ne,b:ae};return ENGINE.runKernel(FloorDiv,ce)}const floorDiv$2=op({floorDiv_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function div_(re,ee){let ne=convertToTensor(re,"a","div"),ae=convertToTensor(ee,"b","div");if([ne,ae]=makeTypesMatch(ne,ae),ne.dtype==="int32"&&ae.dtype==="int32")return floorDiv$2(ne,ae);const ce={a:ne,b:ae},le={};return ENGINE.runKernel(RealDiv,ce,le)}const div$1=op({div_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mul_(re,ee){let ne=convertToTensor(re,"a","mul"),ae=convertToTensor(ee,"b","mul");[ne,ae]=makeTypesMatch(ne,ae);const ce={a:ne,b:ae};return ENGINE.runKernel(Multiply$2,ce)}const mul=op({mul_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function abs_(re){const ee=convertToTensor(re,"x","abs");if(ee.dtype==="complex64"){const ne={x:ee};return ENGINE.runKernel(ComplexAbs,ne)}else{const ne={x:ee};return ENGINE.runKernel(Abs$1,ne)}}const abs$3=op({abs_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function acos_(re){const ne={x:convertToTensor(re,"x","acos")};return ENGINE.runKernel(Acos,ne)}const acos$2=op({acos_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function acosh_(re){const ne={x:convertToTensor(re,"x","acosh")};return ENGINE.runKernel(Acosh,ne)}const acosh$2=op({acosh_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function all_(re,ee=null,ne=!1){const ce={x:convertToTensor(re,"x","all","bool")},le={axis:ee,keepDims:ne};return ENGINE.runKernel(All,ce,le)}const all$2=op({all_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function any_(re,ee=null,ne=!1){const ce={x:convertToTensor(re,"x","any","bool")},le={axis:ee,keepDims:ne};return ENGINE.runKernel(Any,ce,le)}const any$2=op({any_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMax_(re,ee=0){const ae={x:convertToTensor(re,"x","argMax")},ce={axis:ee};return ENGINE.runKernel(ArgMax,ae,ce)}const argMax$2=op({argMax_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMin_(re,ee=0){const ae={x:convertToTensor(re,"x","argMin")},ce={axis:ee};return ENGINE.runKernel(ArgMin,ae,ce)}const argMin$2=op({argMin_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function asin_(re){const ne={x:convertToTensor(re,"x","asin")};return ENGINE.runKernel(Asin,ne)}const asin$2=op({asin_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function asinh_(re){const ne={x:convertToTensor(re,"x","asinh")};return ENGINE.runKernel(Asinh,ne)}const asinh$2=op({asinh_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function atan_(re){const ne={x:convertToTensor(re,"x","atan")};return ENGINE.runKernel(Atan,ne)}const atan$2=op({atan_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function atan2_(re,ee){let ne=convertToTensor(re,"a","atan2"),ae=convertToTensor(ee,"b","atan2");[ne,ae]=makeTypesMatch(ne,ae);const ce={a:ne,b:ae};return ENGINE.runKernel(Atan2,ce)}const atan2$2=op({atan2_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function atanh_(re){const ne={x:convertToTensor(re,"x","atanh")};return ENGINE.runKernel(Atanh,ne)}const atanh$2=op({atanh_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function computeDilation2DInfo(re,ee,ne,ae,ce="NHWC",le){const ue=re[3],he=[...ee,ue],fe=convertConv2DDataFormat(ce);return computeConv2DInfo(re,he,ne,le,ae,null,null,fe)}function computePool2DInfo(re,ee,ne,ae,ce,le,ue="channelsLast"){const[he,fe]=parseTupleParam(ee);let me;if(ue==="channelsLast")me=[he,fe,re[3],re[3]];else if(ue==="channelsFirst")me=[he,fe,re[1],re[1]];else throw new Error(`Unknown dataFormat ${ue}`);return computeConv2DInfo(re,me,ne,ae,ce,le,!1,ue)}function computePool3DInfo(re,ee,ne,ae,ce,le,ue="NDHWC"){const[he,fe,me]=parse3TupleParam(ee);let ge,ve;if(ue==="NDHWC")ve="channelsLast",ge=[he,fe,me,re[4],re[4]];else if(ue==="NCDHW")ve="channelsFirst",ge=[he,fe,me,re[1],re[1]];else throw new Error(`Unknown dataFormat ${ue}`);return computeConv3DInfo(re,ge,ne,ae,ce,!1,ve,le)}function computeConv2DInfo(re,ee,ne,ae,ce,le,ue=!1,he="channelsLast"){let[fe,me,ge,ve]=[-1,-1,-1,-1];if(he==="channelsLast")[fe,me,ge,ve]=re;else if(he==="channelsFirst")[fe,ve,me,ge]=re;else throw new Error(`Unknown dataFormat ${he}`);const[ye,be,,Ee]=ee,[Ce,Se]=parseTupleParam(ne),[Te,ke]=parseTupleParam(ae),Ne=getEffectiveFilterSize(ye,Te),Fe=getEffectiveFilterSize(be,ke),{padInfo:De,outHeight:Oe,outWidth:Re}=getPadAndOutInfo(ce,me,ge,Ce,Se,Ne,Fe,le,he),Be=ue?Ee*ve:Ee;let Le;return he==="channelsFirst"?Le=[fe,Be,Oe,Re]:he==="channelsLast"&&(Le=[fe,Oe,Re,Be]),{batchSize:fe,dataFormat:he,inHeight:me,inWidth:ge,inChannels:ve,outHeight:Oe,outWidth:Re,outChannels:Be,padInfo:De,strideHeight:Ce,strideWidth:Se,filterHeight:ye,filterWidth:be,effectiveFilterHeight:Ne,effectiveFilterWidth:Fe,dilationHeight:Te,dilationWidth:ke,inShape:re,outShape:Le,filterShape:ee}}function computeConv3DInfo(re,ee,ne,ae,ce,le=!1,ue="channelsLast",he){let[fe,me,ge,ve,ye]=[-1,-1,-1,-1,-1];if(ue==="channelsLast")[fe,me,ge,ve,ye]=re;else if(ue==="channelsFirst")[fe,ye,me,ge,ve]=re;else throw new Error(`Unknown dataFormat ${ue}`);const[be,Ee,Ce,,Se]=ee,[Te,ke,Ne]=parse3TupleParam(ne),[Fe,De,Oe]=parse3TupleParam(ae),Re=getEffectiveFilterSize(be,Fe),Be=getEffectiveFilterSize(Ee,De),Le=getEffectiveFilterSize(Ce,Oe),{padInfo:je,outDepth:Ge,outHeight:qe,outWidth:Ue}=get3DPadAndOutInfo(ce,me,ge,ve,Te,ke,Ne,Re,Be,Le,he),ze=le?Se*ye:Se;let He;return ue==="channelsFirst"?He=[fe,ze,Ge,qe,Ue]:ue==="channelsLast"&&(He=[fe,Ge,qe,Ue,ze]),{batchSize:fe,dataFormat:ue,inDepth:me,inHeight:ge,inWidth:ve,inChannels:ye,outDepth:Ge,outHeight:qe,outWidth:Ue,outChannels:ze,padInfo:je,strideDepth:Te,strideHeight:ke,strideWidth:Ne,filterDepth:be,filterHeight:Ee,filterWidth:Ce,effectiveFilterDepth:Re,effectiveFilterHeight:Be,effectiveFilterWidth:Le,dilationDepth:Fe,dilationHeight:De,dilationWidth:Oe,inShape:re,outShape:He,filterShape:ee}}function computeOutputShape2D(re,ee,ne,ae,ce){ae==null&&(ae=computeDefaultPad(re,ee,ne));const le=re[0],ue=re[1],he=round$4((le-ee+2*ae)/ne+1,ce),fe=round$4((ue-ee+2*ae)/ne+1,ce);return[he,fe]}function computeOutputShape4D(re,ee,ne,ae,ce,le){ce==null&&(ce=computeDefaultPad(re,ee,ae));const ue=re[0],he=re[1],fe=re[2],me=round$4((ue-ee+2*ce)/ae+1,le),ge=round$4((he-ee+2*ce)/ae+1,le),ve=round$4((fe-ee+2*ce)/ae+1,le);return[me,ge,ve,ne]}function computeDefaultPad(re,ee,ne,ae=1){const ce=getEffectiveFilterSize(ee,ae);return Math.floor((re[0]*(ne-1)-ne+ce)/2)}function parseTupleParam(re){return typeof re=="number"?[re,re,re]:re.length===2?[re[0],re[1],1]:re}function parse3TupleParam(re){return typeof re=="number"?[re,re,re]:re}function getEffectiveFilterSize(re,ee){return ee<=1?re:re+(re-1)*(ee-1)}function getPadAndOutInfo(re,ee,ne,ae,ce,le,ue,he,fe){let me,ge,ve;if(typeof re=="number"){me={top:re,bottom:re,left:re,right:re,type:re===0?"VALID":"NUMBER"};const be=computeOutputShape2D([ee,ne],le,ae,re,he);ge=be[0],ve=be[1]}else if(re==="same"){ge=Math.ceil(ee/ae),ve=Math.ceil(ne/ce);const ye=Math.max(0,(ge-1)*ae+le-ee),be=Math.max(0,(ve-1)*ce+ue-ne),Ee=Math.floor(ye/2),Ce=ye-Ee,Se=Math.floor(be/2),Te=be-Se;me={top:Ee,bottom:Ce,left:Se,right:Te,type:"SAME"}}else if(re==="valid")me={top:0,bottom:0,left:0,right:0,type:"VALID"},ge=Math.ceil((ee-le+1)/ae),ve=Math.ceil((ne-ue+1)/ce);else if(typeof re=="object"){const ye=fe==="channelsLast"?re[1][0]:re[2][0],be=fe==="channelsLast"?re[1][1]:re[2][1],Ee=fe==="channelsLast"?re[2][0]:re[3][0],Ce=fe==="channelsLast"?re[2][1]:re[3][1];me={top:ye,bottom:be,left:Ee,right:Ce,type:ye===0&&be===0&&Ee===0&&Ce===0?"VALID":"EXPLICIT"},ge=round$4((ee-le+ye+be)/ae+1,he),ve=round$4((ne-ue+Ee+Ce)/ce+1,he)}else throw Error(`Unknown padding parameter: ${re}`);return{padInfo:me,outHeight:ge,outWidth:ve}}function get3DPadAndOutInfo(re,ee,ne,ae,ce,le,ue,he,fe,me,ge){let ve,ye,be,Ee;if(typeof re=="number"){ve={top:re,bottom:re,left:re,right:re,front:re,back:re,type:re===0?"VALID":"NUMBER"};const Se=computeOutputShape4D([ee,ne,ae,1],he,1,ce,re,ge);ye=Se[0],be=Se[1],Ee=Se[2]}else if(re==="same"){ye=Math.ceil(ee/ce),be=Math.ceil(ne/le),Ee=Math.ceil(ae/ue);const Ce=(ye-1)*ce+he-ee,Se=(be-1)*le+fe-ne,Te=(Ee-1)*ue+me-ae,ke=Math.floor(Ce/2),Ne=Ce-ke,Fe=Math.floor(Se/2),De=Se-Fe,Oe=Math.floor(Te/2),Re=Te-Oe;ve={top:Fe,bottom:De,left:Oe,right:Re,front:ke,back:Ne,type:"SAME"}}else if(re==="valid")ve={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},ye=Math.ceil((ee-he+1)/ce),be=Math.ceil((ne-fe+1)/le),Ee=Math.ceil((ae-me+1)/ue);else throw Error(`Unknown padding parameter: ${re}`);return{padInfo:ve,outDepth:ye,outHeight:be,outWidth:Ee}}function round$4(re,ee){if(!ee)return Math.trunc(re);switch(ee){case"round":return Math.round(re);case"ceil":return Math.ceil(re);case"floor":return Math.floor(re);default:throw new Error(`Unknown roundingMode ${ee}`)}}function tupleValuesAreOne(re){const[ee,ne,ae]=parseTupleParam(re);return ee===1&&ne===1&&ae===1}function eitherStridesOrDilationsAreOne(re,ee){return tupleValuesAreOne(re)||tupleValuesAreOne(ee)}function convertConv2DDataFormat(re){if(re==="NHWC")return"channelsLast";if(re==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${re}`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reshape_(re,ee){const ae={x:convertToTensor(re,"x","reshape","string_or_numeric")},ce={shape:ee};return ENGINE.runKernel(Reshape$1,ae,ce)}const reshape$2=op({reshape_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool_(re,ee,ne,ae,ce){const le=convertToTensor(re,"x","avgPool","float32"),ue=1;assert$2(eitherStridesOrDilationsAreOne(ne,ue),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${ne} and dilations '${ue}'`);let he=le,fe=!1;le.rank===3&&(fe=!0,he=reshape$2(le,[1,le.shape[0],le.shape[1],le.shape[2]])),assert$2(he.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${he.rank}.`),ce!=null&&assert$2(isInt(ae),()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${ce} but got pad ${ae}.`);const me={x:he},ge={filterSize:ee,strides:ne,pad:ae,dimRoundingMode:ce};let ve=ENGINE.runKernel(AvgPool,me,ge);return ve=cast$3(ve,le.dtype),fe?reshape$2(ve,[ve.shape[1],ve.shape[2],ve.shape[3]]):ve}const avgPool$2=op({avgPool_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3d_(re,ee,ne,ae,ce,le="NDHWC",ue){ue==null?ue=[1,1,1]:deprecationWarn("dilations is deprecated, this field will be gone in v3.0.0.");const he=convertToTensor(re,"x","avgPool3d","float32");let fe=he,me=!1;he.rank===4&&(me=!0,fe=reshape$2(he,[1,he.shape[0],he.shape[1],he.shape[2],he.shape[3]])),assert$2(fe.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${fe.rank}.`),assert$2(le==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${le}`),assert$2(eitherStridesOrDilationsAreOne(ne,ue),()=>`Error in avgPool3d: Either strides or dilations must be 1. Got strides ${ne} and dilations '${ue}'`),ce!=null&&assert$2(isInt(ae),()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${ce} but got pad ${ae}.`);const ge={x:fe},ve={filterSize:ee,strides:ne,pad:ae,dimRoundingMode:ce,dataFormat:le,dilations:ue};let ye=ENGINE.runKernel(AvgPool3D,ge,ve);return ye=cast$3(ye,fe.dtype),me?reshape$2(ye,[ye.shape[1],ye.shape[2],ye.shape[3],ye.shape[4]]):ye}const avgPool3d=op({avgPool3d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concat_(re,ee=0){assert$2(re.length>=1,()=>"Pass at least one tensor to concat");const ne=convertToTensorArray(re,"tensors","concat","string_or_numeric");if(ne[0].dtype==="complex64"&&ne.forEach(le=>{if(le.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${le.dtype}. `)}),ne.length===1)return clone$1(ne[0]);const ae=ne,ce={axis:ee};return ENGINE.runKernel(Concat,ae,ce)}const concat$2=op({concat_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sigmoid_(re){const ne={x:convertToTensor(re,"x","sigmoid")};return ENGINE.runKernel(Sigmoid$1,ne)}const sigmoid$2=op({sigmoid_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice_(re,ee,ne){const ae=convertToTensor(re,"x","slice","string_or_numeric");if(ae.rank===0)throw new Error("Slicing scalar is not possible");const ce={x:ae},le={begin:ee,size:ne};return ENGINE.runKernel(Slice,ce,le)}const slice$4=op({slice_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tanh_(re){const ne={x:convertToTensor(re,"x","tanh")};return ENGINE.runKernel(Tanh$1,ne)}const tanh$2=op({tanh_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchToSpaceND_(re,ee,ne){const ae=convertToTensor(re,"x","batchToSpaceND"),ce=ee.reduce((he,fe)=>he*fe);assert$2(ae.rank>=1+ee.length,()=>`input rank is ${ae.rank} but should be > than blockShape.length ${ee.length}`),assert$2(ne.length===ee.length,()=>`crops.length is ${ne.length} but should be equal to blockShape.length  ${ee.length}`),assert$2(ae.shape[0]%ce===0,()=>`input tensor batch is ${ae.shape[0]} but is not divisible by the product of the elements of blockShape ${ee.join(" * ")} === ${ce}`);const le={x:ae},ue={blockShape:ee,crops:ne};return ENGINE.runKernel(BatchToSpaceND,le,ue)}const batchToSpaceND$2=op({batchToSpaceND_});function xAs4D(re){let ee;return re.rank===0||re.rank===1?ee=reshape$2(re,[1,1,1,re.size]):re.rank===2?ee=reshape$2(re,[1,1,re.shape[0],re.shape[1]]):re.rank===3?ee=reshape$2(re,[1,re.shape[0],re.shape[1],re.shape[2]]):ee=re,ee}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchNorm_(re,ee,ne,ae,ce,le){le==null&&(le=.001);const ue=convertToTensor(re,"x","batchNorm"),he=convertToTensor(ee,"mean","batchNorm"),fe=convertToTensor(ne,"variance","batchNorm");let me;ce!=null&&(me=convertToTensor(ce,"scale","batchNorm"));let ge;ae!=null&&(ge=convertToTensor(ae,"offset","batchNorm")),assert$2(he.rank===fe.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),assert$2(ge==null||he.rank===ge.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),assert$2(me==null||he.rank===me.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const ye={x:xAs4D(ue),scale:me,offset:ge,mean:he,variance:fe},be={varianceEpsilon:le},Ee=ENGINE.runKernel(FusedBatchNorm,ye,be);return reshape$2(Ee,ue.shape)}const batchNorm$2=op({batchNorm_});function batchNorm2d_(re,ee,ne,ae,ce,le){const ue=convertToTensor(re,"x","batchNorm"),he=convertToTensor(ee,"mean","batchNorm"),fe=convertToTensor(ne,"variance","batchNorm");let me;ce!=null&&(me=convertToTensor(ce,"scale","batchNorm"));let ge;return ae!=null&&(ge=convertToTensor(ae,"offset","batchNorm")),assert$2(ue.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${ue.rank}.`),assert$2(he.rank===2||he.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${he.rank}.`),assert$2(fe.rank===2||fe.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${fe.rank}.`),me!=null&&assert$2(me.rank===2||me.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${me.rank}.`),ge!=null&&assert$2(ge.rank===2||ge.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${ge.rank}.`),batchNorm$2(ue,he,fe,ge,me,le)}const batchNorm2d=op({batchNorm2d_});function batchNorm3d_(re,ee,ne,ae,ce,le){const ue=convertToTensor(re,"x","batchNorm"),he=convertToTensor(ee,"mean","batchNorm"),fe=convertToTensor(ne,"variance","batchNorm");let me;ce!=null&&(me=convertToTensor(ce,"scale","batchNorm"));let ge;return ae!=null&&(ge=convertToTensor(ae,"offset","batchNorm")),assert$2(ue.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${ue.rank}.`),assert$2(he.rank===3||he.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${he.rank}.`),assert$2(fe.rank===3||fe.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${fe.rank}.`),me!=null&&assert$2(me.rank===3||me.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${me.rank}.`),ge!=null&&assert$2(ge.rank===3||ge.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${ge.rank}.`),batchNorm$2(ue,he,fe,ge,me,le)}const batchNorm3d=op({batchNorm3d_});function batchNorm4d_(re,ee,ne,ae,ce,le){const ue=convertToTensor(re,"x","batchNorm"),he=convertToTensor(ee,"mean","batchNorm"),fe=convertToTensor(ne,"variance","batchNorm");let me;ce!=null&&(me=convertToTensor(ce,"scale","batchNorm"));let ge;return ae!=null&&(ge=convertToTensor(ae,"offset","batchNorm")),assert$2(ue.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${ue.rank}.`),assert$2(he.rank===4||he.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${he.rank}.`),assert$2(fe.rank===4||fe.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${fe.rank}.`),me!=null&&assert$2(me.rank===4||me.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${me.rank}.`),ge!=null&&assert$2(ge.rank===4||ge.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${ge.rank}.`),batchNorm$2(ue,he,fe,ge,me,le)}const batchNorm4d=op({batchNorm4d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function broadcastTo_(re,ee){let ne=convertToTensor(re,"broadcastTo","x");const ae=ne.shape;if(ee.some(me=>!(me>0)||me%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${ee}].`);if(ee.length<ne.rank)throw new Error(`broadcastTo(): shape.length=${ee.length} < input.rank=${ne.rank}.`);if(ee.length>ne.rank){const me=ne.shape.slice();for(;me.length<ee.length;)me.unshift(1);ne=reshape$2(ne,me)}const ce=ne.shape,le=Array.from(ee);for(let me=ee.length-1;me>=0;me--)if(ce[me]===ee[me])le[me]=1;else if(ne.shape[me]!==1)throw new Error(`broadcastTo(): [${ae}] cannot be broadcast to [${ee}].`);if(le.map((me,ge)=>me>1?ge:-1).filter(me=>me>=0).length===0)return clone$1(ne);const he={x:ne},fe={reps:le};return ENGINE.runKernel(Tile,he,fe)}const broadcastTo=op({broadcastTo_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ceil_(re){const ne={x:convertToTensor(re,"x","ceil")};return ENGINE.runKernel(Ceil,ne)}const ceil$2=op({ceil_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function clipByValue_(re,ee,ne){const ae=convertToTensor(re,"x","clipByValue");assert$2(ee<=ne,()=>`Error in clip: min (${ee}) must be less than or equal to max (${ne}).`);const ce={x:ae},le={clipValueMin:ee,clipValueMax:ne};return ENGINE.runKernel(ClipByValue,ce,le)}const clipByValue$1=op({clipByValue_});function concat1d_(re){return concat$2(re,0)}const concat1d=op({concat1d_});function concat2d_(re,ee){return concat$2(re,ee)}const concat2d=op({concat2d_});function concat3d_(re,ee){return concat$2(re,ee)}const concat3d=op({concat3d_});function concat4d_(re,ee){return concat$2(re,ee)}const concat4d=op({concat4d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2d_(re,ee,ne,ae,ce="NHWC",le=[1,1],ue){const he=convertToTensor(re,"x","conv2d"),fe=convertToTensor(ee,"filter","conv2d");let me=he,ge=!1;he.rank===3&&(ge=!0,me=reshape$2(he,[1,he.shape[0],he.shape[1],he.shape[2]])),assert$2(me.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${me.rank}.`),assert$2(fe.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${fe.rank}.`),ue!=null&&assert$2(isInt(ae),()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${ue} but got pad ${ae}.`);const ve=ce==="NHWC"?me.shape[3]:me.shape[1];assert$2(ve===fe.shape[2],()=>`Error in conv2d: depth of input (${ve}) must match input depth for filter ${fe.shape[2]}.`),assert$2(eitherStridesOrDilationsAreOne(ne,le),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${ne} and dilations '${le}'`);const ye={x:me,filter:fe},be={strides:ne,pad:ae,dataFormat:ce,dilations:le,dimRoundingMode:ue},Ee=ENGINE.runKernel(Conv2D$1,ye,be);return ge?reshape$2(Ee,[Ee.shape[1],Ee.shape[2],Ee.shape[3]]):Ee}const conv2d$2=op({conv2d_});function conv1d_(re,ee,ne,ae,ce="NWC",le=1,ue){const he=convertToTensor(re,"x","conv1d"),fe=convertToTensor(ee,"filter","conv1d");let me=he,ge=!1;he.rank===2&&(ge=!0,me=reshape$2(he,[1,he.shape[0],he.shape[1]])),assert$2(me.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${me.rank}.`),assert$2(fe.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${fe.rank}.`),ue!=null&&assert$2(isInt(ae),()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${ue} but got pad ${ae}.`),assert$2(me.shape[2]===fe.shape[1],()=>`Error in conv1d: depth of input (${me.shape[2]}) must match input depth for filter ${fe.shape[1]}.`),assert$2(eitherStridesOrDilationsAreOne(ne,le),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${ne} and dilation '${le}'`),assert$2(ce==="NWC",()=>`Error in conv1d: got dataFormat of ${ce} but only NWC is currently supported.`);const ve=reshape$2(fe,[1,fe.shape[0],fe.shape[1],fe.shape[2]]),ye=reshape$2(me,[me.shape[0],1,me.shape[1],me.shape[2]]),Se=conv2d$2(ye,ve,[1,ne],ae,"NHWC",[1,le],ue);return ge?reshape$2(Se,[Se.shape[2],Se.shape[3]]):reshape$2(Se,[Se.shape[0],Se.shape[2],Se.shape[3]])}const conv1d=op({conv1d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropInput_(re,ee,ne,ae,ce,le="NHWC",ue){assert$2(re.length===ee.rank,()=>`Length of inShape (${re.length}) and rank of dy (${ee.rank}) must match`);let he=re,fe=ee,me=!1;ee.rank===3&&(me=!0,fe=reshape$2(ee,[1,ee.shape[0],ee.shape[1],ee.shape[2]]),he=[1,re[0],re[1],re[2]]),assert$2(he.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${he.length}.`),assert$2(fe.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${fe.rank}`),assert$2(ne.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${ne.rank}`);const ge=le==="NHWC"?he[3]:he[1],ve=le==="NHWC"?fe.shape[3]:fe.shape[1];assert$2(ge===ne.shape[2],()=>`Error in conv2dDerInput: depth of input (${ge}) must match input depth for filter ${ne.shape[2]}.`),assert$2(ve===ne.shape[3],()=>`Error in conv2dDerInput: depth of output (${ve}) must match output depth for filter ${ne.shape[3]}.`),ue!=null&&assert$2(isInt(ce),()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${ue} but got pad ${ce}.`);const ye={dy:fe,filter:ne},be={strides:ae,pad:ce,dataFormat:le,dimRoundingMode:ue,inputShape:he},Ee=ENGINE.runKernel(Conv2DBackpropInput,ye,be);return me?reshape$2(Ee,[Ee.shape[1],Ee.shape[2],Ee.shape[3]]):Ee}const conv2DBackpropInput$2=op({conv2DBackpropInput_});function conv2dTranspose_(re,ee,ne,ae,ce,le){const ue=convertToTensor(re,"x","conv2dTranspose"),he=convertToTensor(ee,"filter","conv2dTranspose");return conv2DBackpropInput$2(ne,ue,he,ae,ce,"NHWC",le)}const conv2dTranspose=op({conv2dTranspose_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3d_(re,ee,ne,ae,ce="NDHWC",le=[1,1,1]){const ue=convertToTensor(re,"x","conv3d"),he=convertToTensor(ee,"filter","conv3d");let fe=ue,me=!1;ue.rank===4&&(me=!0,fe=reshape$2(ue,[1,ue.shape[0],ue.shape[1],ue.shape[2],ue.shape[3]])),assert$2(fe.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${fe.rank}.`),assert$2(he.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${he.rank}.`),assert$2(fe.shape[4]===he.shape[3],()=>`Error in conv3d: depth of input (${fe.shape[4]}) must match input depth for filter ${he.shape[3]}.`),assert$2(eitherStridesOrDilationsAreOne(ne,le),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${ne} and dilations '${le}'`),assert$2(ce==="NDHWC",()=>`Error in conv3d: got dataFormat of ${ce} but only NDHWC is currently supported.`);const ge={x:fe,filter:he},ve={strides:ne,pad:ae,dataFormat:ce,dilations:le},ye=ENGINE.runKernel(Conv3D$1,ge,ve);return me?reshape$2(ye,[ye.shape[1],ye.shape[2],ye.shape[3],ye.shape[4]]):ye}const conv3d=op({conv3d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropInput_(re,ee,ne,ae,ce){assert$2(re.length===ee.rank,()=>`Length of inShape (${re.length}) and rank of dy (${ee.rank}) must match`);let le=re,ue=ee,he=!1;ee.rank===4&&(he=!0,ue=reshape$2(ee,[1,ee.shape[0],ee.shape[1],ee.shape[2],ee.shape[3]]),le=[1,re[0],re[1],re[2],re[3]]);const fe=le[4],me=ue.shape[4];assert$2(le.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${le.length}.`),assert$2(ue.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${ue.rank}`),assert$2(ne.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${ne.rank}`),assert$2(fe===ne.shape[3],()=>`Error in conv3dDerInput: depth of input (${fe}) must match input depth for filter ${ne.shape[3]}.`),assert$2(me===ne.shape[4],()=>`Error in conv3dDerInput: depth of output (${me}) must match output depth for filter ${ne.shape[4]}.`);const ge={dy:ue,filter:ne},ve={pad:ce,strides:ae,inputShape:le},ye=ENGINE.runKernel(Conv3DBackpropInputV2,ge,ve);return he?reshape$2(ye,[ye.shape[1],ye.shape[2],ye.shape[3],ye.shape[4]]):ye}const conv3DBackpropInput$1=op({conv3DBackpropInput_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cos_(re){const ne={x:convertToTensor(re,"x","cos")};return ENGINE.runKernel(Cos,ne)}const cos$2=op({cos_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cosh_(re){const ne={x:convertToTensor(re,"x","cosh")};return ENGINE.runKernel(Cosh,ne)}const cosh$2=op({cosh_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumsum_(re,ee=0,ne=!1,ae=!1){const le={x:convertToTensor(re,"x","cumsum")},ue={axis:ee,exclusive:ne,reverse:ae};return ENGINE.runKernel(Cumsum,le,ue)}const cumsum$2=op({cumsum_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthToSpace_(re,ee,ne="NHWC"){const ae=convertToTensor(re,"x","depthToSpace"),ce=ne==="NHWC"?ae.shape[1]:ae.shape[2],le=ne==="NHWC"?ae.shape[2]:ae.shape[3],ue=ne==="NHWC"?ae.shape[3]:ae.shape[1];assert$2(ce*ee>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${ce} and ${ee}  for depthToSpace with input shape
    ${ae.shape}`),assert$2(le*ee>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${le} and ${ee} for depthToSpace with input shape
        ${ae.shape}`),assert$2(ue%(ee*ee)===0,()=>`Dimension size must be evenly divisible by ${ee*ee} but is ${ue} for depthToSpace with input shape ${ae.shape}`);const he={x:ae},fe={blockSize:ee,dataFormat:ne};return ENGINE.runKernel(DepthToSpace,he,fe)}const depthToSpace$2=op({depthToSpace_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2d_(re,ee,ne,ae,ce="NHWC",le=[1,1],ue){const he=convertToTensor(re,"x","depthwiseConv2d"),fe=convertToTensor(ee,"filter","depthwiseConv2d");let me=he,ge=!1;he.rank===3&&(ge=!0,me=reshape$2(he,[1,he.shape[0],he.shape[1],he.shape[2]])),assert$2(me.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${me.rank}.`),assert$2(fe.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${fe.rank}.`),assert$2(me.shape[3]===fe.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${me.shape[3]}) must match the inChannels dimension in filter ${fe.shape[2]}.`),ue!=null&&assert$2(isInt(ae),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${ue} but got pad ${ae}.`);const ve={x:me,filter:fe},ye={strides:ne,pad:ae,dataFormat:ce,dilations:le,dimRoundingMode:ue},be=ENGINE.runKernel(DepthwiseConv2dNative,ve,ye);return ge?reshape$2(be,[be.shape[1],be.shape[2],be.shape[3]]):be}const depthwiseConv2d$1=op({depthwiseConv2d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dilation2d_(re,ee,ne,ae,ce=[1,1],le="NHWC"){const ue=convertToTensor(re,"x","dilation2d"),he=convertToTensor(ee,"filter","dilation2d");assert$2(ue.rank===3||ue.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${ue.rank}.`),assert$2(he.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${he.rank}.`),assert$2(le==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${le}`);let fe=ue,me=!1;ue.rank===3&&(fe=reshape$2(ue,[1,ue.shape[0],ue.shape[1],ue.shape[2]]),me=!0);const ge={x:fe,filter:he},ve={strides:ne,pad:ae,dilations:ce},ye=ENGINE.runKernel(Dilation2D,ge,ve);return me?reshape$2(ye,[ye.shape[1],ye.shape[2],ye.shape[3]]):ye}const dilation2d=op({dilation2d_});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getBroadcastDims$1(re,ee){const ne=re.length,ae=[];for(let ce=0;ce<ne;ce++){const le=ne-1-ce,ue=re[le]||1;(ee[ee.length-1-ce]||1)>1&&ue===1&&ae.unshift(le)}return ae}function getReductionAxes(re,ee){const ne=[];for(let ae=0;ae<ee.length;ae++){const ce=re[re.length-ae-1],le=ee.length-ae-1,ue=ee[le];(ce==null||ce===1&&ue>1)&&ne.unshift(le)}return ne}function assertAndGetBroadcastShape(re,ee){const ne=[],ae=Math.max(re.length,ee.length);for(let ce=0;ce<ae;ce++){let le=re[re.length-ce-1];le==null&&(le=1);let ue=ee[ee.length-ce-1];if(ue==null&&(ue=1),le===1)ne.unshift(ue);else if(ue===1)ne.unshift(le);else if(le!==ue){const he=`Operands could not be broadcast together with shapes ${re} and ${ee}.`;throw Error(he)}else ne.unshift(le)}return ne}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function equal_(re,ee){let ne=convertToTensor(re,"a","equal"),ae=convertToTensor(ee,"b","equal");[ne,ae]=makeTypesMatch(ne,ae),assertAndGetBroadcastShape(ne.shape,ae.shape);const ce={a:ne,b:ae};return ENGINE.runKernel(Equal,ce)}const equal$2=op({equal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function where_(re,ee,ne){const ae=convertToTensor(ee,"a","where"),ce=convertToTensor(ne,"b","where"),le=convertToTensor(re,"condition","where","bool"),ue=assertAndGetBroadcastShape(ae.shape,ce.shape),he=broadcastTo(ae,ue),fe=broadcastTo(ce,ue);le.rank===1&&assert$2(le.shape[0]===ae.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),le.rank!==1&&assertShapesMatch(le.shape,fe.shape,"Error in where: ");const me={condition:le,t:he,e:fe};return ENGINE.runKernel(Select$2,me)}const where=op({where_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zerosLike_(re){const ne={x:convertToTensor(re,"x","zerosLike")};return ENGINE.runKernel(ZerosLike,ne)}const zerosLike$2=op({zerosLike_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function divNoNan_(re,ee){let ne=convertToTensor(re,"a","div"),ae=convertToTensor(ee,"b","div");[ne,ae]=makeTypesMatch(ne,ae);const ce=div$1(ne,ae),le=zerosLike$2(ce),ue=equal$2(ae,le);return where(ue,le,ce)}const divNoNan=op({divNoNan_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dot_(re,ee){const ne=convertToTensor(re,"t1","dot"),ae=convertToTensor(ee,"t2","dot");assert$2((ne.rank===1||ne.rank===2)&&(ae.rank===1||ae.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${ne.rank} and ${ae.rank}.`);const ce=ne.rank===1?ne.size:ne.shape[1],le=ae.rank===1?ae.size:ae.shape[0];if(assert$2(ce===le,()=>`Error in dot: inner dimensions of inputs must match, but got ${ce} and ${le}.`),ne.rank===1&&ae.rank===1){const ue=reshape$2(ne,[1,-1]),he=reshape$2(ae,[-1,1]),fe=matMul$1(ue,he);return reshape$2(fe,[])}else if(ne.rank===1&&ae.rank===2){const ue=reshape$2(ne,[1,-1]),he=reshape$2(ae,[ae.shape[0],ae.shape[1]]),fe=matMul$1(ue,he);return reshape$2(fe,[fe.size])}else if(ne.rank===2&&ae.rank===1){const ue=reshape$2(ae,[-1,1]),he=matMul$1(ne,ue);return reshape$2(he,[he.size])}else{const ue=reshape$2(ae,[ae.shape[0],ae.shape[1]]);return matMul$1(ne,ue)}}const dot$1=op({dot_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function elu_(re){const ne={x:convertToTensor(re,"x","elu")};return ENGINE.runKernel(Elu$1,ne)}const elu$3=op({elu_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function erf_(re){let ee=convertToTensor(re,"x","erf");assert$2(ee.dtype==="int32"||ee.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),ee.dtype==="int32"&&(ee=cast$3(ee,"float32"));const ne={x:ee};return ENGINE.runKernel(Erf,ne)}const erf$2=op({erf_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function exp_(re){const ne={x:convertToTensor(re,"x","exp")};return ENGINE.runKernel(Exp,ne)}const exp$2=op({exp_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expandDims_(re,ee=0){const ne=convertToTensor(re,"x","expandDims","string_or_numeric");assert$2(ee<=ne.rank,()=>"Axis must be <= rank of the tensor");const ae={input:ne},ce={dim:ee};return ENGINE.runKernel(ExpandDims,ae,ce)}const expandDims$3=op({expandDims_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expm1_(re){const ne={x:convertToTensor(re,"x","expm1")};return ENGINE.runKernel(Expm1,ne)}const expm1$2=op({expm1_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tile_(re,ee){const ne=convertToTensor(re,"x","tile","string_or_numeric");assert$2(ne.rank===ee.length,()=>`Error in transpose: rank of input ${ne.rank} must match length of reps ${ee}.`);const ae={x:ne},ce={reps:ee};return ENGINE.runKernel(Tile,ae,ce)}const tile$3=op({tile_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eye_(re,ee,ne,ae="float32"){ee==null&&(ee=re);const ce=buffer$1([re,ee],ae),le=re<=ee?re:ee;for(let he=0;he<le;++he)ce.set(1,he,he);const ue=reshape$2(ce.toTensor(),[re,ee]);if(ne==null)return ue;if(ne.length===1)return tile$3(expandDims$3(ue,0),[ne[0],1,1]);if(ne.length===2)return tile$3(expandDims$3(expandDims$3(ue,0),0),[ne[0],ne[1],1,1]);if(ne.length===3)return tile$3(expandDims$3(expandDims$3(expandDims$3(ue,0),0),0),[ne[0],ne[1],ne[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${ne.length}D.`)}const eye=op({eye_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fill$3(re,ee,ne){const ae={shape:re,value:ee,dtype:ne};return ENGINE.runKernel(Fill,{},ae)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function floor_(re){const ne={x:convertToTensor(re,"x","floor")};return ENGINE.runKernel(Floor,ne)}const floor$3=op({floor_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gather_(re,ee,ne=0,ae=0){const ce=convertToTensor(re,"x","gather"),le=convertToTensor(ee,"indices","gather","int32"),ue={x:ce,indices:le},he={axis:ne,batchDims:ae};return ENGINE.runKernel(GatherV2,ue,he)}const gather$1=op({gather_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function greater_(re,ee){let ne=convertToTensor(re,"a","greater"),ae=convertToTensor(ee,"b","greater");[ne,ae]=makeTypesMatch(ne,ae),assertAndGetBroadcastShape(ne.shape,ae.shape);const ce={a:ne,b:ae};return ENGINE.runKernel(Greater,ce)}const greater$2=op({greater_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function greaterEqual_(re,ee){let ne=convertToTensor(re,"a","greaterEqual"),ae=convertToTensor(ee,"b","greaterEqual");[ne,ae]=makeTypesMatch(ne,ae),assertAndGetBroadcastShape(ne.shape,ae.shape);const ce={a:ne,b:ae};return ENGINE.runKernel(GreaterEqual,ce)}const greaterEqual$2=op({greaterEqual_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imag_(re){const ne={input:convertToTensor(re,"input","imag")};return ENGINE.runKernel(Imag,ne)}const imag$2=op({imag_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function isFinite_(re){const ne={x:convertToTensor(re,"x","isFinite")};return ENGINE.runKernel(IsFinite,ne)}const isFinite$3=op({isFinite_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function isInf_(re){const ne={x:convertToTensor(re,"x","isInf")};return ENGINE.runKernel(IsInf,ne)}const isInf$2=op({isInf_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function isNaN_(re){const ne={x:convertToTensor(re,"x","isNaN")};return ENGINE.runKernel(IsNan,ne)}const isNaN$3=op({isNaN_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function leakyRelu_(re,ee=.2){const ae={x:convertToTensor(re,"x","leakyRelu")},ce={alpha:ee};return ENGINE.runKernel(LeakyRelu,ae,ce)}const leakyRelu$2=op({leakyRelu_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function less_(re,ee){let ne=convertToTensor(re,"a","less"),ae=convertToTensor(ee,"b","less");[ne,ae]=makeTypesMatch(ne,ae),assertAndGetBroadcastShape(ne.shape,ae.shape);const ce={a:ne,b:ae};return ENGINE.runKernel(Less,ce)}const less$2=op({less_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lessEqual_(re,ee){let ne=convertToTensor(re,"a","lessEqual"),ae=convertToTensor(ee,"b","lessEqual");[ne,ae]=makeTypesMatch(ne,ae),assertAndGetBroadcastShape(ne.shape,ae.shape);const ce={a:ne,b:ae};return ENGINE.runKernel(LessEqual,ce)}const lessEqual$2=op({lessEqual_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function localResponseNormalization_(re,ee=5,ne=1,ae=1,ce=.5){const le=convertToTensor(re,"x","localResponseNormalization");assert$2(le.rank===4||le.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${le.rank}.`),assert$2(isInt(ee),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${ee}.`);let ue=le,he=!1;le.rank===3&&(he=!0,ue=reshape$2(le,[1,le.shape[0],le.shape[1],le.shape[2]]));const fe={x:ue},me={depthRadius:ee,bias:ne,alpha:ae,beta:ce},ge=ENGINE.runKernel(LRN,fe,me);return he?reshape$2(ge,[ge.shape[1],ge.shape[2],ge.shape[3]]):ge}const localResponseNormalization=op({localResponseNormalization_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function log_(re){const ne={x:convertToTensor(re,"x","log")};return ENGINE.runKernel(Log,ne)}const log$5=op({log_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function log1p_(re){const ne={x:convertToTensor(re,"x","log1p")};return ENGINE.runKernel(Log1p,ne)}const log1p$2=op({log1p_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function variableGrads(re,ee){assert$2(isFunction$3(re),()=>"The f passed in variableGrads(f) must be a function"),assert$2(ee==null||Array.isArray(ee)&&ee.every(me=>me instanceof Variable),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const ne=ee!=null;if(!ne){ee=[];for(const me in ENGINE.registeredVariables)ee.push(ENGINE.registeredVariables[me])}const ae=ne?ee.filter(me=>!me.trainable):null,ce=ee.length;ee=ee.filter(me=>me.trainable),assert$2(ee.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${ce} variables is trainable.`);const le=!0,{value:ue,grads:he}=ENGINE.gradients(re,ee,null,le);assert$2(he.some(me=>me!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),assert$2(ue.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${ue.rank} tensor`);const fe={};return ee.forEach((me,ge)=>{he[ge]!=null&&(fe[me.name]=he[ge])}),ae!=null&&ae.forEach(me=>fe[me.name]=null),{value:ue,grads:fe}}function customGrad(re){return ENGINE.customGrad(re)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function neg_(re){const ne={x:convertToTensor(re,"x","neg")};return ENGINE.runKernel(Neg,ne)}const neg$2=op({neg_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softplus_(re){const ne={x:convertToTensor(re,"x","softplus")};return ENGINE.runKernel(Softplus$1,ne)}const softplus$2=op({softplus_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logSigmoid_(re){const ee=convertToTensor(re,"x","logSigmoid");return customGrad(ae=>({value:neg$2(softplus$2(neg$2(ae))),gradFunc:ue=>mul(ue,sigmoid$2(neg$2(ae)))}))(ee)}const logSigmoid=op({logSigmoid_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function max_(re,ee=null,ne=!1){const ce={x:convertToTensor(re,"x","max")},le={reductionIndices:ee,keepDims:ne};return ENGINE.runKernel(Max,ce,le)}const max$4=op({max_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sub_(re,ee){let ne=convertToTensor(re,"a","sub"),ae=convertToTensor(ee,"b","sub");[ne,ae]=makeTypesMatch(ne,ae);const ce={a:ne,b:ae};return ENGINE.runKernel(Sub,ce)}const sub$2=op({sub_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sum_(re,ee=null,ne=!1){let ae=convertToTensor(re,"x","sum");ae.dtype==="bool"&&(ae=cast$3(ae,"int32"));const ce={x:ae},le={axis:ee,keepDims:ne};return ENGINE.runKernel(Sum,ce,le)}const sum$2=op({sum_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logSoftmax_(re,ee=-1){const ne=convertToTensor(re,"logits","logSoftmax");if(ee===-1&&(ee=ne.rank-1),ee!==ne.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${ne.rank} and axis was ${ee}`);return customGrad((ce,le)=>{const he=max$4(ce,ee,!0),fe=sub$2(ce,he),me=sub$2(cast$3(fe,"float32"),log$5(sum$2(exp$2(fe),ee,!0)));return le([me]),{value:me,gradFunc:(ve,ye)=>{const[be]=ye,Ee=!0,Ce=exp$2(be);return sub$2(ve,mul(sum$2(ve,ee,Ee),Ce))}}})(ne)}const logSoftmax=op({logSoftmax_});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function axesAreInnerMostDims(re,ee){for(let ne=0;ne<re.length;++ne)if(re[re.length-ne-1]!==ee-1-ne)return!1;return!0}function combineLocations(re,ee,ne){const ae=re.length+ee.length,ce=[];let le=0,ue=0;for(let he=0;he<ae;he++)ne.indexOf(he)===-1?ce.push(re[le++]):ce.push(ee[ue++]);return ce}function computeOutAndReduceShapes(re,ee){const ne=[],ae=re.length;for(let le=0;le<ae;le++)ee.indexOf(le)===-1&&ne.push(re[le]);const ce=ee.map(le=>re[le]);return[ne,ce]}function expandShapeToKeepDim(re,ee){const ne=ee.map(ae=>1);return combineLocations(re,ne,ee)}function assertAxesAreInnerMostDims(re,ee,ne){assert$2(axesAreInnerMostDims(ee,ne),()=>`${re} supports only inner-most axes for now. Got axes ${ee} and rank-${ne} input.`)}function getAxesPermutation(re,ee){if(axesAreInnerMostDims(re,ee))return null;const ne=[];for(let ae=0;ae<ee;++ae)re.indexOf(ae)===-1&&ne.push(ae);return re.forEach(ae=>ne.push(ae)),ne}function getUndoAxesPermutation(re){return re.map((ee,ne)=>[ne,ee]).sort((ee,ne)=>ee[1]-ne[1]).map(ee=>ee[0])}function getInnerMostAxes(re,ee){const ne=[];for(let ae=ee-re;ae<ee;++ae)ne.push(ae);return ne}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logSumExp_(re,ee=null,ne=!1){const ae=convertToTensor(re,"x","logSumExp"),ce=parseAxisParam(ee,ae.shape),le=max$4(ae,ce,!0),ue=sub$2(ae,le),he=exp$2(ue),fe=sum$2(he,ce),me=log$5(fe),ge=add$1(reshape$2(le,me.shape),me);if(ne){const ve=expandShapeToKeepDim(ge.shape,ce);return reshape$2(ge,ve)}return ge}const logSumExp=op({logSumExp_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalAnd_(re,ee){const ne=convertToTensor(re,"a","logicalAnd","bool"),ae=convertToTensor(ee,"b","logicalAnd","bool");assertAndGetBroadcastShape(ne.shape,ae.shape);const ce={a:ne,b:ae};return ENGINE.runKernel(LogicalAnd,ce)}const logicalAnd$2=op({logicalAnd_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalNot_(re){const ne={x:convertToTensor(re,"x","logicalNot","bool")};return ENGINE.runKernel(LogicalNot,ne)}const logicalNot$2=op({logicalNot_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalOr_(re,ee){const ne=convertToTensor(re,"a","logicalOr","bool"),ae=convertToTensor(ee,"b","logicalOr","bool");assertAndGetBroadcastShape(ne.shape,ae.shape);const ce={a:ne,b:ae};return ENGINE.runKernel(LogicalOr,ce)}const logicalOr$2=op({logicalOr_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalXor_(re,ee){const ne=convertToTensor(re,"a","logicalXor","bool"),ae=convertToTensor(ee,"b","logicalXor","bool");return assertAndGetBroadcastShape(ne.shape,ae.shape),logicalAnd$2(logicalOr$2(re,ee),logicalNot$2(logicalAnd$2(re,ee)))}const logicalXor=op({logicalXor_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool_(re,ee,ne,ae,ce){const le=convertToTensor(re,"x","maxPool"),ue=1;let he=le,fe=!1;le.rank===3&&(fe=!0,he=reshape$2(le,[1,le.shape[0],le.shape[1],le.shape[2]])),assert$2(he.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${he.rank}.`),assert$2(eitherStridesOrDilationsAreOne(ne,ue),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${ne} and dilations '${ue}'`),ce!=null&&assert$2(isInt(ae),()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${ce} but got pad ${ae}.`);const me={x:he},ge={filterSize:ee,strides:ne,pad:ae,dimRoundingMode:ce},ve=ENGINE.runKernel(MaxPool,me,ge);return fe?reshape$2(ve,[ve.shape[1],ve.shape[2],ve.shape[3]]):ve}const maxPool$2=op({maxPool_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3d_(re,ee=[1,1,1],ne,ae,ce,le="NDHWC",ue){ue==null?ue=[1,1,1]:deprecationWarn("dilations is deprecated, this field will be gone in v3.0.0.");const he=convertToTensor(re,"x","maxPool3d");let fe=he,me=!1;he.rank===4&&(me=!0,fe=reshape$2(he,[1,he.shape[0],he.shape[1],he.shape[2],he.shape[3]])),assert$2(fe.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${fe.rank}.`),assert$2(le==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${le}`),assert$2(eitherStridesOrDilationsAreOne(ne,ue),()=>`Error in maxPool3d: Either strides or dilations must be 1. Got strides ${ne} and dilations '${ue}'`),ce!=null&&assert$2(isInt(ae),()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${ce} but got pad ${ae}.`);const ge={x:fe},ve={filterSize:ee,strides:ne,pad:ae,dimRoundingMode:ce,dataFormat:le,dilations:ue},ye=ENGINE.runKernel(MaxPool3D,ge,ve);return me?reshape$2(ye,[ye.shape[1],ye.shape[2],ye.shape[3],ye.shape[4]]):ye}const maxPool3d$1=op({maxPool3d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maximum_(re,ee){let ne=convertToTensor(re,"a","maximum"),ae=convertToTensor(ee,"b","maximum");[ne,ae]=makeTypesMatch(ne,ae),ne.dtype==="bool"&&(ne=cast$3(ne,"int32"),ae=cast$3(ae,"int32")),assertAndGetBroadcastShape(ne.shape,ae.shape);const ce={a:ne,b:ae};return ENGINE.runKernel(Maximum$1,ce)}const maximum$2=op({maximum_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mean_(re,ee=null,ne=!1){const ce={x:convertToTensor(re,"x","mean")},le={axis:ee,keepDims:ne};return ENGINE.runKernel(Mean,ce,le)}const mean$1=op({mean_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function min_(re,ee=null,ne=!1){const ce={x:convertToTensor(re,"x","min")},le={axis:ee,keepDims:ne};return ENGINE.runKernel(Min,ce,le)}const min$4=op({min_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function minimum_(re,ee){let ne=convertToTensor(re,"a","minimum"),ae=convertToTensor(ee,"b","minimum");[ne,ae]=makeTypesMatch(ne,ae),ne.dtype==="bool"&&(ne=cast$3(ne,"int32"),ae=cast$3(ae,"int32")),assertAndGetBroadcastShape(ne.shape,ae.shape);const ce={a:ne,b:ae};return ENGINE.runKernel(Minimum$1,ce)}const minimum$2=op({minimum_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mirrorPad_(re,ee,ne){assert$2(ne==="reflect"||ne==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${ne}.`);const ae=convertToTensor(re,"x","mirrorPad");if(ae.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");assert$2(ee.length===ae.rank,()=>`Padding doesn't match input. Must be ${ae.rank}. Got ${ee.length}.`);const ce=ne==="reflect"?1:0;for(let he=0;he<ae.rank;he++)assert$2(ee[he].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),assert$2(ee[he][0]>=0&&ee[he][0]<=ae.shape[he]-ce&&ee[he][1]>=0&&ee[he][1]<=ae.shape[he]-ce,()=>`Padding in dimension ${he} cannot be greater than or equal to ${ae.shape[he]-ce} or less than 0 for input of shape ${ae.shape}`);const le={paddings:ee,mode:ne},ue={x:ae};return ENGINE.runKernel(MirrorPad,ue,le)}const mirrorPad$1=op({mirrorPad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mod_(re,ee){let ne=convertToTensor(re,"a","mod"),ae=convertToTensor(ee,"b","mod");[ne,ae]=makeTypesMatch(ne,ae);const ce={a:ne,b:ae};return ENGINE.runKernel(Mod,ce)}const mod$2=op({mod_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function square_(re){const ee=convertToTensor(re,"x","square"),ne={};return ENGINE.runKernel("Square",{x:ee},ne)}const square$3=op({square_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function moments_(re,ee=null,ne=!1){re=convertToTensor(re,"x","moments");const ae=parseAxisParam(ee,re.shape),ce=mean$1(re,ae,ne);let le=ce.shape;ne||(le=expandShapeToKeepDim(ce.shape,ae));const ue=square$3(sub$2(cast$3(re,"float32"),reshape$2(ce,le))),he=mean$1(ue,ae,ne);return{mean:ce,variance:he}}const moments=op({moments_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function notEqual_(re,ee){let ne=convertToTensor(re,"a","notEqual"),ae=convertToTensor(ee,"b","notEqual");[ne,ae]=makeTypesMatch(ne,ae),assertAndGetBroadcastShape(ne.shape,ae.shape);const ce={a:ne,b:ae};return ENGINE.runKernel(NotEqual,ce)}const notEqual$2=op({notEqual_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zeros$1(re,ee="float32"){if(ee==="complex64"){const ae=zeros$1(re,"float32"),ce=zeros$1(re,"float32");return complex$2(ae,ce)}const ne=makeZerosTypedArray(sizeFromShape(re),ee);return ENGINE.makeTensor(ne,re,ee)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ones(re,ee="float32"){if(ee==="complex64"){const ae=ones(re,"float32"),ce=zeros$1(re,"float32");return complex$2(ae,ce)}const ne=makeOnesTypedArray(sizeFromShape(re),ee);return ENGINE.makeTensor(ne,re,ee)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function onesLike_(re){const ne={x:convertToTensor(re,"x","onesLike")};return ENGINE.runKernel(OnesLike,ne)}const onesLike$2=op({onesLike_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pad_(re,ee,ne=0){const ae=convertToTensor(re,"x","pad");if(ae.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const ce={paddings:ee,constantValue:ne},le={x:ae};return ENGINE.runKernel(PadV2,le,ce)}const pad=op({pad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function spaceToBatchND_(re,ee,ne){const ae=convertToTensor(re,"x","spaceToBatchND");assert$2(ae.rank>=1+ee.length,()=>`input rank ${ae.rank} should be > than [blockShape] ${ee.length}`),assert$2(ne.length===ee.length,()=>`paddings.shape[0] ${ne.length} must be equal to [blockShape] ${ee.length}`),assert$2(ae.shape.reduce((ue,he,fe)=>fe>0&&fe<=ee.length?ue&&(he+ne[fe-1][0]+ne[fe-1][1])%ee[fe-1]===0:ue,!0),()=>`input spatial dimensions ${ae.shape.slice(1)} with paddings ${ne.toString()} must be divisible by blockShapes ${ee.toString()}`);const ce={x:ae},le={blockShape:ee,paddings:ne};return ENGINE.runKernel(SpaceToBatchND,ce,le)}const spaceToBatchND$2=op({spaceToBatchND_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pool_(re,ee,ne,ae,ce,le){ce==null&&(ce=[1,1]),le==null&&(le=1),ae===0&&(ae="valid");const ue=convertToTensor(re,"x","maxPool");let he=ue,fe=!1;ue.rank===3&&(fe=!0,he=reshape$2(ue,[1,ue.shape[0],ue.shape[1],ue.shape[2]])),assert$2(eitherStridesOrDilationsAreOne(le,ce),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${le} and dilations '${ce}'`);const me=computePool2DInfo(he.shape,ee,le,ce,ae),ge=[me.dilationHeight,me.dilationWidth];let ve;ae==="same"?ve=withSpaceToBatchBasePaddings([me.filterHeight,me.filterWidth],ge):ve=[[0,0],[0,0]];const ye=ge[0]===1&&ge[1]===1,[be,Ee]=requiredSpaceToBatchPaddings([me.inHeight,me.inWidth],ge,ve),Ce=ye?ae:"valid",Se=ye?he:spaceToBatchND$2(he,ge,be),ke=(ne==="avg"?()=>avgPool$2(Se,ee,le,Ce):()=>maxPool$2(Se,ee,le,Ce))(),Ne=ye?ke:batchToSpaceND$2(ke,ge,Ee);return fe?reshape$2(Ne,[Ne.shape[1],Ne.shape[2],Ne.shape[3]]):Ne}function requiredSpaceToBatchPaddings(re,ee,ne){const ae=ne.map(ge=>ge[0]),ce=ne.map(ge=>ge[1]),le=re.concat(ae,ce),ue=ee.map((ge,ve)=>(ge-le[ve]%ge)%ge),he=ce.map((ge,ve)=>ge+ue[ve]),fe=ee.map((ge,ve)=>[ae[ve],he[ve]]),me=ee.map((ge,ve)=>[0,ue[ve]]);return[fe,me]}function withSpaceToBatchBasePaddings(re,ee){const ae=re.map((ue,he)=>ue+(ue-1)*(ee[he]-1)).map(ue=>ue-1),ce=ae.map(ue=>Math.floor(ue/2)),le=ae.map((ue,he)=>ue-ce[he]);return ae.map((ue,he)=>[ce[he],le[he]])}const pool$2=op({pool_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pow_(re,ee){let ne=convertToTensor(re,"base","pow"),ae=convertToTensor(ee,"exp","pow");[ne,ae]=makeTypesMatch(ne,ae);const ce={a:ne,b:ae};return ENGINE.runKernel(Pow$1,ce)}const pow$2=op({pow_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prelu_(re,ee){const ne=convertToTensor(re,"x","prelu"),ae=convertToTensor(ee,"alpha","prelu"),ce={x:ne,alpha:ae};return ENGINE.runKernel(Prelu,ce)}const prelu$2=op({prelu_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prod_(re,ee=null,ne=!1){let ae=convertToTensor(re,"x","prod");ae.dtype==="bool"&&(ae=cast$3(ae,"int32"));const ce={x:ae},le={axis:ee,keepDims:ne};return ENGINE.runKernel(Prod,ce,le)}const prod$2=op({prod_});var alea$5={exports:{}};alea$5.exports;(function(re){(function(ee,ne,ae){function ce(fe){var me=this,ge=he();me.next=function(){var ve=2091639*me.s0+me.c*23283064365386963e-26;return me.s0=me.s1,me.s1=me.s2,me.s2=ve-(me.c=ve|0)},me.c=1,me.s0=ge(" "),me.s1=ge(" "),me.s2=ge(" "),me.s0-=ge(fe),me.s0<0&&(me.s0+=1),me.s1-=ge(fe),me.s1<0&&(me.s1+=1),me.s2-=ge(fe),me.s2<0&&(me.s2+=1),ge=null}function le(fe,me){return me.c=fe.c,me.s0=fe.s0,me.s1=fe.s1,me.s2=fe.s2,me}function ue(fe,me){var ge=new ce(fe),ve=me&&me.state,ye=ge.next;return ye.int32=function(){return ge.next()*4294967296|0},ye.double=function(){return ye()+(ye()*2097152|0)*11102230246251565e-32},ye.quick=ye,ve&&(typeof ve=="object"&&le(ve,ge),ye.state=function(){return le(ge,{})}),ye}function he(){var fe=4022871197,me=function(ge){ge=ge.toString();for(var ve=0;ve<ge.length;ve++){fe+=ge.charCodeAt(ve);var ye=.02519603282416938*fe;fe=ye>>>0,ye-=fe,ye*=fe,fe=ye>>>0,ye-=fe,fe+=ye*4294967296}return(fe>>>0)*23283064365386963e-26};return me}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.alea=ue})(commonjsGlobal,re,!1)})(alea$5);var aleaExports$2=alea$5.exports,xor128$5={exports:{}};xor128$5.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this,me="";fe.x=0,fe.y=0,fe.z=0,fe.w=0,fe.next=function(){var ve=fe.x^fe.x<<11;return fe.x=fe.y,fe.y=fe.z,fe.z=fe.w,fe.w^=fe.w>>>19^ve^ve>>>8},he===(he|0)?fe.x=he:me+=he;for(var ge=0;ge<me.length+64;ge++)fe.x^=me.charCodeAt(ge)|0,fe.next()}function le(he,fe){return fe.x=he.x,fe.y=he.y,fe.z=he.z,fe.w=he.w,fe}function ue(he,fe){var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(typeof ge=="object"&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.xor128=ue})(commonjsGlobal,re,!1)})(xor128$5);var xor128Exports$2=xor128$5.exports,xorwow$5={exports:{}};xorwow$5.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this,me="";fe.next=function(){var ve=fe.x^fe.x>>>2;return fe.x=fe.y,fe.y=fe.z,fe.z=fe.w,fe.w=fe.v,(fe.d=fe.d+362437|0)+(fe.v=fe.v^fe.v<<4^(ve^ve<<1))|0},fe.x=0,fe.y=0,fe.z=0,fe.w=0,fe.v=0,he===(he|0)?fe.x=he:me+=he;for(var ge=0;ge<me.length+64;ge++)fe.x^=me.charCodeAt(ge)|0,ge==me.length&&(fe.d=fe.x<<10^fe.x>>>4),fe.next()}function le(he,fe){return fe.x=he.x,fe.y=he.y,fe.z=he.z,fe.w=he.w,fe.v=he.v,fe.d=he.d,fe}function ue(he,fe){var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(typeof ge=="object"&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.xorwow=ue})(commonjsGlobal,re,!1)})(xorwow$5);var xorwowExports$2=xorwow$5.exports,xorshift7$5={exports:{}};xorshift7$5.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this;fe.next=function(){var ge=fe.x,ve=fe.i,ye,be;return ye=ge[ve],ye^=ye>>>7,be=ye^ye<<24,ye=ge[ve+1&7],be^=ye^ye>>>10,ye=ge[ve+3&7],be^=ye^ye>>>3,ye=ge[ve+4&7],be^=ye^ye<<7,ye=ge[ve+7&7],ye=ye^ye<<13,be^=ye^ye<<9,ge[ve]=be,fe.i=ve+1&7,be};function me(ge,ve){var ye,be=[];if(ve===(ve|0))be[0]=ve;else for(ve=""+ve,ye=0;ye<ve.length;++ye)be[ye&7]=be[ye&7]<<15^ve.charCodeAt(ye)+be[ye+1&7]<<13;for(;be.length<8;)be.push(0);for(ye=0;ye<8&&be[ye]===0;++ye);for(ye==8?be[7]=-1:be[ye],ge.x=be,ge.i=0,ye=256;ye>0;--ye)ge.next()}me(fe,he)}function le(he,fe){return fe.x=he.x.slice(),fe.i=he.i,fe}function ue(he,fe){he==null&&(he=+new Date);var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(ge.x&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.xorshift7=ue})(commonjsGlobal,re,!1)})(xorshift7$5);var xorshift7Exports$2=xorshift7$5.exports,xor4096$5={exports:{}};xor4096$5.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this;fe.next=function(){var ge=fe.w,ve=fe.X,ye=fe.i,be,Ee;return fe.w=ge=ge+1640531527|0,Ee=ve[ye+34&127],be=ve[ye=ye+1&127],Ee^=Ee<<13,be^=be<<17,Ee^=Ee>>>15,be^=be>>>12,Ee=ve[ye]=Ee^be,fe.i=ye,Ee+(ge^ge>>>16)|0};function me(ge,ve){var ye,be,Ee,Ce,Se,Te=[],ke=128;for(ve===(ve|0)?(be=ve,ve=null):(ve=ve+"\0",be=0,ke=Math.max(ke,ve.length)),Ee=0,Ce=-32;Ce<ke;++Ce)ve&&(be^=ve.charCodeAt((Ce+32)%ve.length)),Ce===0&&(Se=be),be^=be<<10,be^=be>>>15,be^=be<<4,be^=be>>>13,Ce>=0&&(Se=Se+1640531527|0,ye=Te[Ce&127]^=be+Se,Ee=ye==0?Ee+1:0);for(Ee>=128&&(Te[(ve&&ve.length||0)&127]=-1),Ee=127,Ce=4*128;Ce>0;--Ce)be=Te[Ee+34&127],ye=Te[Ee=Ee+1&127],be^=be<<13,ye^=ye<<17,be^=be>>>15,ye^=ye>>>12,Te[Ee]=be^ye;ge.w=Se,ge.X=Te,ge.i=Ee}me(fe,he)}function le(he,fe){return fe.i=he.i,fe.w=he.w,fe.X=he.X.slice(),fe}function ue(he,fe){he==null&&(he=+new Date);var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(ge.X&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.xor4096=ue})(commonjsGlobal,re,!1)})(xor4096$5);var xor4096Exports$2=xor4096$5.exports,tychei$5={exports:{}};tychei$5.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this,me="";fe.next=function(){var ve=fe.b,ye=fe.c,be=fe.d,Ee=fe.a;return ve=ve<<25^ve>>>7^ye,ye=ye-be|0,be=be<<24^be>>>8^Ee,Ee=Ee-ve|0,fe.b=ve=ve<<20^ve>>>12^ye,fe.c=ye=ye-be|0,fe.d=be<<16^ye>>>16^Ee,fe.a=Ee-ve|0},fe.a=0,fe.b=0,fe.c=-1640531527,fe.d=1367130551,he===Math.floor(he)?(fe.a=he/4294967296|0,fe.b=he|0):me+=he;for(var ge=0;ge<me.length+20;ge++)fe.b^=me.charCodeAt(ge)|0,fe.next()}function le(he,fe){return fe.a=he.a,fe.b=he.b,fe.c=he.c,fe.d=he.d,fe}function ue(he,fe){var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(typeof ge=="object"&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.tychei=ue})(commonjsGlobal,re,!1)})(tychei$5);var tycheiExports$2=tychei$5.exports,seedrandom$4={exports:{}};(function(re){(function(ee,ne){var ae=256,ce=6,le=52,ue="random",he=ne.pow(ae,ce),fe=ne.pow(2,le),me=fe*2,ge=ae-1,ve;function ye(Ne,Fe,De){var Oe=[];Fe=Fe==!0?{entropy:!0}:Fe||{};var Re=Se(Ce(Fe.entropy?[Ne,ke(ee)]:Ne??Te(),3),Oe),Be=new be(Oe),Le=function(){for(var je=Be.g(ce),Ge=he,qe=0;je<fe;)je=(je+qe)*ae,Ge*=ae,qe=Be.g(1);for(;je>=me;)je/=2,Ge/=2,qe>>>=1;return(je+qe)/Ge};return Le.int32=function(){return Be.g(4)|0},Le.quick=function(){return Be.g(4)/4294967296},Le.double=Le,Se(ke(Be.S),ee),(Fe.pass||De||function(je,Ge,qe,Ue){return Ue&&(Ue.S&&Ee(Ue,Be),je.state=function(){return Ee(Be,{})}),qe?(ne[ue]=je,Ge):je})(Le,Re,"globalThis"in Fe?Fe.global:this==ne,Fe.state)}ne["seed"+ue]=ye;function be(Ne){var Fe,De=Ne.length,Oe=this,Re=0,Be=Oe.i=Oe.j=0,Le=Oe.S=[];for(De||(Ne=[De++]);Re<ae;)Le[Re]=Re++;for(Re=0;Re<ae;Re++)Le[Re]=Le[Be=ge&Be+Ne[Re%De]+(Fe=Le[Re])],Le[Be]=Fe;(Oe.g=function(je){for(var Ge,qe=0,Ue=Oe.i,ze=Oe.j,He=Oe.S;je--;)Ge=He[Ue=ge&Ue+1],qe=qe*ae+He[ge&(He[Ue]=He[ze=ge&ze+Ge])+(He[ze]=Ge)];return Oe.i=Ue,Oe.j=ze,qe})(ae)}function Ee(Ne,Fe){return Fe.i=Ne.i,Fe.j=Ne.j,Fe.S=Ne.S.slice(),Fe}function Ce(Ne,Fe){var De=[],Oe=typeof Ne,Re;if(Fe&&Oe=="object")for(Re in Ne)try{De.push(Ce(Ne[Re],Fe-1))}catch{}return De.length?De:Oe=="string"?Ne:Ne+"\0"}function Se(Ne,Fe){for(var De=Ne+"",Oe,Re=0;Re<De.length;)Fe[ge&Re]=ge&(Oe^=Fe[ge&Re]*19)+De.charCodeAt(Re++);return ke(Fe)}function Te(){try{var Ne;return ve&&(Ne=ve.randomBytes)?Ne=Ne(ae):(Ne=new Uint8Array(ae),(globalThis.crypto||globalThis.msCrypto).getRandomValues(Ne)),ke(Ne)}catch{var Fe=globalThis.navigator,De=Fe&&Fe.plugins;return[+new Date,globalThis,De,globalThis.screen,ke(ee)]}}function ke(Ne){return String.fromCharCode.apply(0,Ne)}if(Se(ne.random(),ee),re.exports){re.exports=ye;try{ve=require$$0$1}catch{}}})([],Math)})(seedrandom$4);var seedrandomExports$2=seedrandom$4.exports,alea$4=aleaExports$2,xor128$4=xor128Exports$2,xorwow$4=xorwowExports$2,xorshift7$4=xorshift7Exports$2,xor4096$4=xor4096Exports$2,tychei$4=tycheiExports$2,sr$2=seedrandomExports$2;sr$2.alea=alea$4;sr$2.xor128=xor128$4;sr$2.xorwow=xorwow$4;sr$2.xorshift7=xorshift7$4;sr$2.xor4096=xor4096$4;sr$2.tychei=tychei$4;var seedrandom$3=sr$2;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MPRandGauss{constructor(ee,ne,ae,ce,le){this.mean=ee,this.stdDev=ne,this.dtype=ae,this.nextVal=NaN,this.truncated=ce,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const ue=le||Math.random();this.random=seedrandom$3.alea(ue.toString())}nextValue(){if(!isNaN(this.nextVal)){const ce=this.nextVal;return this.nextVal=NaN,ce}let ee,ne,ae=!1;for(;!ae;){let ce,le,ue;do ce=2*this.random()-1,le=2*this.random()-1,ue=ce*ce+le*le;while(ue>=1||ue===0);const he=Math.sqrt(-2*Math.log(ue)/ue);ee=this.mean+this.stdDev*ce*he,ne=this.mean+this.stdDev*le*he,(!this.truncated||this.isValidTruncated(ee))&&(ae=!0)}return(!this.truncated||this.isValidTruncated(ne))&&(this.nextVal=this.convertValue(ne)),this.convertValue(ee)}convertValue(ee){return this.dtype==null||this.dtype==="float32"?ee:Math.round(ee)}isValidTruncated(ee){return ee<=this.upper&&ee>=this.lower}}class UniformRandom{constructor(ee=0,ne=1,ae,ce){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=ee,this.range=ne-ee,this.dtype=ae,ce==null&&(ce=Math.random()),typeof ce=="number"&&(ce=ce.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${ee} - ${ne} <= 1 and dtype is not float`);this.random=seedrandom$3.alea(ce)}convertValue(ee){return this.canReturnFloat()?ee:Math.round(ee)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function randomNormal_(re,ee=0,ne=1,ae,ce){if(ae!=null&&ae==="bool")throw new Error(`Unsupported data type ${ae}`);const le=new MPRandGauss(ee,ne,ae,!1,ce),ue=buffer$1(re,ae);for(let he=0;he<ue.values.length;he++)ue.values[he]=le.nextValue();return ue.toTensor()}const randomNormal$1=op({randomNormal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function randomUniform_(re,ee=0,ne=1,ae="float32",ce){const le=buffer$1(re,ae),ue=new UniformRandom(ee,ne,null,ce);for(let he=0;he<le.values.length;he++)le.values[he]=ue.nextValue();return le.toTensor()}const randomUniform=op({randomUniform_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function range$4(re,ee,ne=1,ae="float32"){if(ne===0)throw new Error("Cannot have a step of zero");const ce={start:re,stop:ee,step:ne,dtype:ae};return ENGINE.runKernel(Range,{},ce)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function real_(re){const ne={input:convertToTensor(re,"input","real")};return ENGINE.runKernel(Real,ne)}const real$2=op({real_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reciprocal_(re){const ne={x:convertToTensor(re,"x","reciprocal")};return ENGINE.runKernel(Reciprocal,ne)}const reciprocal$2=op({reciprocal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function relu_(re){const ne={x:convertToTensor(re,"x","relu")};return ENGINE.runKernel(Relu$1,ne)}const relu$2=op({relu_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function relu6_(re){const ne={x:convertToTensor(re,"x","relu6")};return ENGINE.runKernel(Relu6$1,ne)}const relu6$2=op({relu6_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse_(re,ee){const ae={x:convertToTensor(re,"x","reverse")},ce={dims:ee};return ENGINE.runKernel(Reverse,ae,ce)}const reverse$2=op({reverse_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function round_(re){const ne={x:convertToTensor(re,"x","round")};return ENGINE.runKernel(Round,ne)}const round$3=op({round_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rsqrt_(re){const ne={x:convertToTensor(re,"x","rsqrt")};return ENGINE.runKernel(Rsqrt,ne)}const rsqrt$2=op({rsqrt_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scalar(re,ee){if((isTypedArray$3(re)&&ee!=="string"||Array.isArray(re))&&ee!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(ee==="string"&&isTypedArray$3(re)&&!(re instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return makeTensor(re,[],[],ee)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function selu_(re){const ne={x:convertToTensor(re,"x","selu")};return ENGINE.runKernel(Selu$1,ne)}const selu$2=op({selu_});function separableConv2d_(re,ee,ne,ae,ce,le=[1,1],ue="NHWC"){const he=convertToTensor(re,"x","separableConv2d"),fe=convertToTensor(ee,"depthwiseFilter","separableConv2d"),me=convertToTensor(ne,"pointwiseFilter","separableConv2d");let ge=he,ve=!1;if(he.rank===3&&(ve=!0,ge=reshape$2(he,[1,he.shape[0],he.shape[1],he.shape[2]])),ue==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");assert$2(ge.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${ge.rank}.`),assert$2(fe.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${fe.rank}.`),assert$2(me.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${fe.rank}.`),assert$2(me.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${me.shape[0]}.`),assert$2(me.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${me.shape[1]}.`);const ye=fe.shape[2],be=fe.shape[3];assert$2(me.shape[2]===ye*be,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${ye*be}, but got ${me.shape[2]}.`);const Ee=depthwiseConv2d$1(ge,fe,ae,ce,ue,le),Se=conv2d$2(Ee,me,1,"valid",ue);return ve?reshape$2(Se,[Se.shape[1],Se.shape[2],Se.shape[3]]):Se}const separableConv2d=op({separableConv2d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sign_(re){const ne={x:convertToTensor(re,"x","sign")};return ENGINE.runKernel(Sign,ne)}const sign$3=op({sign_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sin_(re){const ne={x:convertToTensor(re,"x","sin")};return ENGINE.runKernel(Sin,ne)}const sin$2=op({sin_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sinh_(re){const ne={x:convertToTensor(re,"x","sinh")};return ENGINE.runKernel(Sinh,ne)}const sinh$2=op({sinh_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice1d_(re,ee,ne){const ae=convertToTensor(re,"x","slice1d");return assert$2(ae.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${ae.rank} tensor`),slice$4(ae,[ee],[ne])}const slice1d=op({slice1d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice2d_(re,ee,ne){const ae=convertToTensor(re,"x","slice2d");return assert$2(ae.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${ae.rank} tensor`),slice$4(ae,ee,ne)}const slice2d=op({slice2d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice3d_(re,ee,ne){const ae=convertToTensor(re,"x","slice3d");return assert$2(ae.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${ae.rank} tensor`),slice$4(ae,ee,ne)}const slice3d=op({slice3d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice4d_(re,ee,ne){const ae=convertToTensor(re,"x","slice4d");return assert$2(ae.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${ae.rank} tensor`),slice$4(ae,ee,ne)}const slice4d=op({slice4d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softmax_(re,ee=-1){const ne=convertToTensor(re,"logits","softmax","float32");if(ee===-1&&(ee=ne.rank-1),ee!==ne.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${ne.rank} and dim was ${ee}`);const ae={logits:ne},ce={dim:ee};return ENGINE.runKernel(Softmax$2,ae,ce)}const softmax$2=op({softmax_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fft_(re){assert$2(re.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${re.dtype}.`);const ee={input:re};return ENGINE.runKernel(FFT$2,ee)}const fft$3=op({fft_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ifft_(re){assert$2(re.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${re.dtype}.`);const ee={input:re};return ENGINE.runKernel(IFFT,ee)}const ifft$2=op({ifft_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function irfft_(re){const ee=re.shape[re.shape.length-1],ne=re.size/ee;let ae;if(ee<=2){const ce=reshape$2(re,[ne,ee]);ae=ifft$2(ce)}else{const ce=[ne,2*(ee-1)],le=reshape$2(real$2(re),[ne,ee]),ue=reshape$2(imag$2(re),[ne,ee]),he=reverse$2(slice$4(le,[0,1],[ne,ee-2]),1),fe=mul(reverse$2(slice$4(ue,[0,1],[ne,ee-2]),1),scalar(-1)),me=concat$2([le,he],1),ge=concat$2([ue,fe],1),ve=reshape$2(complex$2(me,ge),[ce[0],ce[1]]);ae=ifft$2(ve)}if(ae=real$2(ae),re.rank===3&&re.shape[0]!==0){const ce=ae,le=re.shape[0];ae=reshape$2(ae,[le,ae.shape[0]/le,ae.shape[1]]),ce.dispose()}return ae}const irfft=op({irfft_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function split_(re,ee,ne=0){const ce={x:convertToTensor(re,"x","split")},le={numOrSizeSplits:ee,axis:ne};return ENGINE.runKernel(SplitV,ce,le)}const split=op({split_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rfft_(re,ee){assert$2(re.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${re.dtype}`);let ne=re.shape[re.shape.length-1];const ae=re.size/ne;let ce;if(ee!=null&&ee<ne){const Ee=re.shape.map(Se=>0),Ce=re.shape.map(Se=>Se);Ce[re.shape.length-1]=ee,ce=slice$4(re,Ee,Ce),ne=ee}else if(ee!=null&&ee>ne){const Ee=re.shape.map(Ce=>Ce);Ee[re.shape.length-1]=ee-ne,ce=concat$2([re,zeros$1(Ee)],re.shape.length-1),ne=ee}else ce=re;const le=zerosLike$2(ce),ue=reshape$2(complex$2(ce,le),[ae,ne]),he=fft$3(ue),fe=Math.floor(ne/2)+1,me=real$2(he),ge=imag$2(he),ve=split(me,[fe,ne-fe],me.shape.length-1),ye=split(ge,[fe,ne-fe],ge.shape.length-1),be=ce.shape.slice();return be[ce.shape.length-1]=fe,reshape$2(complex$2(ve[0],ye[0]),be)}const rfft=op({rfft_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sqrt_(re){const ne={x:convertToTensor(re,"x","sqrt")};return ENGINE.runKernel(Sqrt,ne)}const sqrt$2=op({sqrt_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function squaredDifference_(re,ee){let ne=convertToTensor(re,"a","squaredDifference"),ae=convertToTensor(ee,"b","squaredDifference");[ne,ae]=makeTypesMatch(ne,ae),assertAndGetBroadcastShape(ne.shape,ae.shape);const ce={a:ne,b:ae},le={};return ENGINE.runKernel(SquaredDifference,ce,le)}const squaredDifference$2=op({squaredDifference_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function squeeze_(re,ee){const ne=convertToTensor(re,"x","squeeze");return reshape$2(ne,squeezeShape(ne.shape,ee).newShape)}const squeeze=op({squeeze_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stack_(re,ee=0){const ne=convertToTensorArray(re,"tensors","stack","string_or_numeric");assert$2(ne.length>=1,()=>"Pass at least one tensor to tf.stack"),ne.length>0&&assert$2(ee<=ne[0].rank,()=>"Axis must be <= rank of the tensor");const ae=ne,ce={axis:ee};return ENGINE.runKernel(Pack,ae,ce)}const stack$1=op({stack_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function step_(re,ee=0){const ae={x:convertToTensor(re,"x","step")},ce={alpha:ee};return ENGINE.runKernel(Step,ae,ce)}const step$2=op({step_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSlice_(re,ee,ne,ae,ce=0,le=0,ue=0,he=0,fe=0){const ge={x:convertToTensor(re,"x","stridedSlice")},ve={begin:ee,end:ne,strides:ae,beginMask:ce,endMask:le,ellipsisMask:ue,newAxisMask:he,shrinkAxisMask:fe};return ENGINE.runKernel(StridedSlice,ge,ve)}const stridedSlice$2=op({stridedSlice_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tan_(re){const ne={x:convertToTensor(re,"x","tan")};return ENGINE.runKernel(Tan,ne)}const tan$2=op({tan_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensor1d(re,ee){assertNonNull(re);const ne=inferShape(re,ee);if(ne.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return makeTensor(re,null,ne,ee)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensor2d(re,ee,ne){if(assertNonNull(re),ee!=null&&ee.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const ae=inferShape(re,ne);if(ae.length!==2&&ae.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(ae.length===1&&ee==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return makeTensor(re,ee,ae,ne)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function topk_(re,ee=1,ne=!0){const ae=convertToTensor(re,"x","topk");if(ae.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const ce=ae.shape[ae.shape.length-1];if(ee>ce)throw new Error(`'k' passed to topk() must be <= the last dimension (${ce}) but got ${ee}`);const le={x:ae},ue={k:ee,sorted:ne},[he,fe]=ENGINE.runKernel(TopK,le,ue);return{values:he,indices:fe}}const topk=op({topk_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function truncatedNormal_(re,ee=0,ne=1,ae,ce){if(ae!=null&&ae==="bool")throw new Error("Unsupported data type $ { dtype }");const le=new MPRandGauss(ee,ne,ae,!0,ce),ue=buffer$1(re,ae);for(let he=0;he<ue.values.length;he++)ue.values[he]=le.nextValue();return ue.toTensor()}const truncatedNormal=op({truncatedNormal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unique_(re,ee=0){const ne=convertToTensor(re,"x","unique","string_or_numeric");assert$2(ne.rank>0,()=>"The input tensor must be at least 1D");const ae={x:ne},ce={axis:ee},[le,ue]=ENGINE.runKernel(Unique,ae,ce);return{values:le,indices:ue}}const unique$4=op({unique_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unsortedSegmentSum_(re,ee,ne){const ae=convertToTensor(re,"x","unsortedSegmentSum"),ce=convertToTensor(ee,"segmentIds","unsortedSegmentSum","int32");assert$2(isInt(ne),()=>"numSegments must be of dtype int");const le={x:ae,segmentIds:ce},ue={numSegments:ne};return ENGINE.runKernel(UnsortedSegmentSum,le,ue)}const unsortedSegmentSum$2=op({unsortedSegmentSum_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unstack_(re,ee=0){const ne=convertToTensor(re,"x","unstack","string_or_numeric");assert$2(ee>=-ne.shape.length&&ee<ne.shape.length,()=>`Axis = ${ee} is not in [-${ne.shape.length}, ${ne.shape.length})`);const ae={value:ne},ce={axis:ee};return ENGINE.runKernel(Unpack,ae,ce)}const unstack=op({unstack_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function variable(re,ee=!0,ne,ae){return ENGINE.makeVariable(re,ee,ne,ae)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function whereImpl$2(re,ee){const ne=[];for(let le=0;le<ee.length;le++)ee[le]&&ne.push(le);const ae=buffer$1(re,"int32"),ce=buffer$1([ne.length,re.length],"int32");for(let le=0;le<ne.length;le++){const ue=ae.indexToLoc(ne[le]),he=le*re.length;ce.values.set(ue,he)}return ce.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function notEqualStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","notEqualStrict"),ae=convertToTensor(ee,"b","notEqualStrict");return assertShapesMatch(ne.shape,ae.shape,"Error in notEqualStrict: "),notEqual$2(ne,ae)}function lessStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","lessStrict"),ae=convertToTensor(ee,"b","lessStrict");return assertShapesMatch(ne.shape,ae.shape,"Error in lessStrict: "),less$2(ne,ae)}function equalStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","equalStrict"),ae=convertToTensor(ee,"b","equalStrict");return assertShapesMatch(ne.shape,ae.shape,"Error in equalStrict: "),equal$2(ne,ae)}function lessEqualStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","lessEqualStrict"),ae=convertToTensor(ee,"b","lessEqualStrict");return assertShapesMatch(ne.shape,ae.shape,"Error in lessEqualStrict: "),lessEqual$2(ne,ae)}function greaterStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","greaterStrict"),ae=convertToTensor(ee,"b","greaterStrict");return assertShapesMatch(ne.shape,ae.shape,"Error in greaterStrict: "),greater$2(ne,ae)}function greaterEqualStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","greaterEqualStrict"),ae=convertToTensor(ee,"b","greaterEqualStrict");return assertShapesMatch(ne.shape,ae.shape,"Error in greaterEqualStrict: "),greaterEqual$2(ne,ae)}const equalStrict=op({equalStrict_}),greaterEqualStrict=op({greaterEqualStrict_}),greaterStrict=op({greaterStrict_}),lessEqualStrict=op({lessEqualStrict_}),lessStrict=op({lessStrict_}),notEqualStrict=op({notEqualStrict_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function addStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","addStrict"),ae=convertToTensor(ee,"b","addStrict");return assertShapesMatch(ne.shape,ae.shape,"Error in addStrict: "),add$1(ne,ae)}function subStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","subStrict"),ae=convertToTensor(ee,"b","subStrict");return assertShapesMatch(ne.shape,ae.shape,"Error in subStrict: "),sub$2(ne,ae)}function powStrict_(re,ee){return deprecationWarn("strict variants of ops have been deprecated and will be removed in future"),assertShapesMatch(re.shape,ee.shape,"Error in powStrict: "),pow$2(re,ee)}function mulStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","mul"),ae=convertToTensor(ee,"b","mul");return assertShapesMatch(ne.shape,ae.shape,"Error in multiplyStrict: "),mul(ne,ae)}function divStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","div"),ae=convertToTensor(ee,"b","div");return assertShapesMatch(ne.shape,ae.shape,"Error in divideStrict: "),div$1(ne,ae)}function modStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","modStrict"),ae=convertToTensor(ee,"b","modStrict");return assertShapesMatch(ne.shape,ae.shape,"Error in modStrict: "),mod$2(ne,ae)}function minimumStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","minimumStrict"),ae=convertToTensor(ee,"b","minimumStrict");return assertShapesMatch(ne.shape,ae.shape,"Error in minimumStrict: "),minimum$2(ne,ae)}function maximumStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","maximumStrict"),ae=convertToTensor(ee,"b","maximumStrict");return assertShapesMatch(ne.shape,ae.shape,"Error in maximumStrict: "),maximum$2(ne,ae)}function squaredDifferenceStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","squaredDifferenceStrict"),ae=convertToTensor(ee,"b","squaredDifferenceStrict");return assertShapesMatch(ne.shape,ae.shape,"Error in squaredDifferenceStrict: "),squaredDifference$2(ne,ae)}const addStrict=op({addStrict_}),divStrict=op({divStrict_}),maximumStrict=op({maximumStrict_}),minimumStrict=op({minimumStrict_}),modStrict=op({modStrict_}),mulStrict=op({mulStrict_}),powStrict=op({powStrict_}),squaredDifferenceStrict=op({squaredDifferenceStrict_}),subStrict=op({subStrict_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function norm_(re,ee="euclidean",ne=null,ae=!1){re=convertToTensor(re,"x","norm");const ce=normImpl(re,ee,ne);let le=ce.shape;if(ae){const ue=parseAxisParam(ne,re.shape);le=expandShapeToKeepDim(ce.shape,ue)}return reshape$2(ce,le)}function normImpl(re,ee,ne=null){if(re.rank===0)return abs$3(re);if(re.rank!==1&&ne===null)return normImpl(reshape$2(re,[-1]),ee,ne);if(re.rank===1||typeof ne=="number"||Array.isArray(ne)&&ne.length===1){if(ee===1)return sum$2(abs$3(re),ne);if(ee===1/0)return max$4(abs$3(re),ne);if(ee===-1/0)return min$4(abs$3(re),ne);if(ee==="euclidean"||ee===2)return sqrt$2(sum$2(pow$2(abs$3(re),scalar(2,"int32")),ne));throw new Error(`Error in norm: invalid ord value: ${ee}`)}if(Array.isArray(ne)&&ne.length===2){if(ee===1)return max$4(sum$2(abs$3(re),ne[0]),ne[1]-1);if(ee===1/0)return max$4(sum$2(abs$3(re),ne[1]),ne[0]);if(ee===-1/0)return min$4(sum$2(abs$3(re),ne[1]),ne[0]);if(ee==="fro"||ee==="euclidean")return sqrt$2(sum$2(square$3(re),ne));throw new Error(`Error in norm: invalid ord value: ${ee}`)}throw new Error(`Error in norm: invalid axis: ${ne}`)}const norm=op({norm_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getNoiseShape(re,ee){if(ee==null)return re.shape.slice();if(arraysEqual(re.shape,ee))return ee;if(re.shape.length===ee.length){const ne=[];for(let ae=0;ae<re.shape.length;ae++)ee[ae]==null&&re.shape[ae]!=null?ne.push(re.shape[ae]):ne.push(ee[ae]);return ne}return ee}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dropout_(re,ee,ne,ae){const ce=convertToTensor(re,"x","dropout");if(assert$2(ce.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${ce.dtype} tensor instead.`),assert$2(ee>=0&&ee<1,()=>`rate must be a float in the range [0, 1), but got ${ee}.`),ee===0)return re instanceof Tensor?ce.clone():ce;const le=getNoiseShape(ce,ne),ue=1-ee,he=div$1(floor$3(add$1(randomUniform(le,0,1,"float32",ae),ue)),ue);return mul(ce,he)}const dropout$1=op({dropout_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropFilter_(re,ee,ne,ae,ce,le="NHWC",ue){let he=re;re.rank===3&&(he=reshape$2(re,[1,re.shape[0],re.shape[1],re.shape[2]]));let fe=ee;fe.rank===3&&(fe=reshape$2(ee,[1,ee.shape[0],ee.shape[1],ee.shape[2]])),assert$2(he.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${he.shape}.`),assert$2(fe.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${fe.shape}.`),assert$2(ne.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${ne}.`);const me=le==="NHWC"?he.shape[3]:he.shape[1],ge=le==="NHWC"?fe.shape[3]:fe.shape[1];assert$2(me===ne[2],()=>`Error in conv2dDerFilter: depth of input ${me}) must match input depth in filter (${ne[2]}.`),assert$2(ge===ne[3],()=>`Error in conv2dDerFilter: depth of dy (${ge}) must match output depth for filter (${ne[3]}).`),ue!=null&&assert$2(isInt(ce),()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${ue} but got pad ${ce}.`);const ve={x:he,dy:fe},ye={strides:ae,pad:ce,dataFormat:le,dimRoundingMode:ue,filterShape:ne};return ENGINE.runKernel(Conv2DBackpropFilter,ve,ye)}const conv2DBackpropFilter$2=op({conv2DBackpropFilter_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getFusedDyActivation(re,ee,ne){if(ne==null||ne==="linear")return re;if(ne==="relu")return mul(re,step$2(ee));throw new Error(`Cannot compute gradient for fused activation ${ne}.`)}function getFusedBiasGradient(re,ee){let ne=ee;const ae=getReductionAxes(re.shape,ee.shape);return ae.length>0&&(ne=sum$2(ne,ae)),reshape$2(ne,re.shape)}function applyActivation$1(re,ee,ne,ae){if(ee==="linear")return re;if(ee==="relu")return relu$2(re);if(ee==="elu")return elu$3(re);if(ee==="relu6")return relu6$2(re);if(ee==="prelu")return prelu$2(re,ne);if(ee==="leakyrelu")return leakyRelu$2(re,ae);throw new Error(`Unknown fused activation ${ee}.`)}const shouldFuse=(re,ee)=>!(re>0)||ee==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedConv2d_({x:re,filter:ee,strides:ne,pad:ae,dataFormat:ce="NHWC",dilations:le=[1,1],dimRoundingMode:ue,bias:he,activation:fe="linear",preluActivationWeights:me,leakyreluAlpha:ge}){if(fe=fe||"linear",shouldFuse(ENGINE.state.gradientDepth,fe)===!1){let De=conv2d$2(re,ee,ne,ae,ce,le,ue);return he!=null&&(De=add$1(De,he)),applyActivation$1(De,fe,me,ge)}const ve=convertToTensor(re,"x","conv2d"),ye=convertToTensor(ee,"filter","conv2d");let be=ve,Ee=!1;ve.rank===3&&(Ee=!0,be=reshape$2(ve,[1,ve.shape[0],ve.shape[1],ve.shape[2]])),assert$2(be.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${be.rank}.`),assert$2(ye.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${ye.rank}.`),ue!=null&&assert$2(isInt(ae),()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${ue} but got pad ${ae}.`),assert$2(be.shape[3]===ye.shape[2],()=>`Error in conv2d: depth of input (${be.shape[3]}) must match input depth for filter ${ye.shape[2]}.`),assert$2(eitherStridesOrDilationsAreOne(ne,le),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${ne} and dilations '${le}'`),assert$2(ce==="NHWC",()=>`Error in conv2d: got dataFormat of ${ce} but only NHWC is currently supported.`);const Ce=computeConv2DInfo(be.shape,ye.shape,ne,le,ae,ue);let Se;he!=null&&(Se=convertToTensor(he,"bias","fused conv2d"),[Se]=makeTypesMatch(Se,ve),assertAndGetBroadcastShape(Ce.outShape,Se.shape));let Te;me!=null&&(Te=convertToTensor(me,"prelu weights","fused conv2d"));const ke=(De,Oe)=>{const[Re,Be,Le,je]=Oe,Ge=getFusedDyActivation(De,Le,fe);assert$2(tupleValuesAreOne(le),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${le}'`);const qe=conv2DBackpropInput$2(Be.shape,Ge,Re,ne,ae),Ue=conv2DBackpropFilter$2(Be,Ge,Re.shape,ne,ae),ze=[qe,Ue];if(je!=null){const He=getFusedBiasGradient(je,Ge);ze.push(He)}return ze},Ne={x:be,filter:ye,bias:Se,preluActivationWeights:Te},Fe={strides:ne,pad:ae,dataFormat:ce,dilations:le,dimRoundingMode:ue,activation:fe,leakyreluAlpha:ge};return he==null?customGrad((Oe,Re,Be)=>{let Le=ENGINE.runKernel(FusedConv2D,Ne,Fe);return Be([Re,Oe,Le]),Ee&&(Le=reshape$2(Le,[Le.shape[1],Le.shape[2],Le.shape[3]])),{value:Le,gradFunc:ke}})(be,ye):customGrad((Oe,Re,Be,Le)=>{let je=ENGINE.runKernel(FusedConv2D,Ne,Fe);return Le([Re,Oe,je,Be]),Ee&&(je=reshape$2(je,[je.shape[1],je.shape[2],je.shape[3]])),{value:je,gradFunc:ke}})(be,ye,Se)}const conv2d$1=op({fusedConv2d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropFilter_(re,ee,ne,ae,ce,le=[1,1],ue){let he=re;re.rank===3&&(he=reshape$2(re,[1,re.shape[0],re.shape[1],re.shape[2]]));let fe=ee;fe.rank===3&&(fe=reshape$2(ee,[1,ee.shape[0],ee.shape[1],ee.shape[2]]));const me={x:he,dy:fe},ge={strides:ae,pad:ce,dimRoundingMode:ue,dilations:le,filterShape:ne};return ENGINE.runKernel(DepthwiseConv2dNativeBackpropFilter,me,ge)}const depthwiseConv2dNativeBackpropFilter$2=op({depthwiseConv2dNativeBackpropFilter_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropInput_(re,ee,ne,ae,ce,le=[1,1],ue){let he=ee,fe=!1;ee.rank===3&&(fe=!0,he=reshape$2(ee,[1,ee.shape[0],ee.shape[1],ee.shape[2]]));const me={dy:he,filter:ne},ge={strides:ae,pad:ce,dimRoundingMode:ue,dilations:le,inputShape:re},ve=ENGINE.runKernel(DepthwiseConv2dNativeBackpropInput,me,ge);return fe?reshape$2(ve,[ve.shape[1],ve.shape[2],ve.shape[3]]):ve}const depthwiseConv2dNativeBackpropInput$2=op({depthwiseConv2dNativeBackpropInput_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedMatMul_({a:re,b:ee,transposeA:ne=!1,transposeB:ae=!1,bias:ce,activation:le="linear",preluActivationWeights:ue,leakyreluAlpha:he}){if(shouldFuse(ENGINE.state.gradientDepth,le)===!1){let je=matMul$1(re,ee,ne,ae);return ce!=null&&(je=add$1(je,ce)),applyActivation$1(je,le,ue,he)}let fe=convertToTensor(re,"a","fused matMul"),me=convertToTensor(ee,"b","fused matMul");[fe,me]=makeTypesMatch(fe,me);const ge=ne?fe.shape[fe.rank-2]:fe.shape[fe.rank-1],ve=ae?me.shape[me.rank-1]:me.shape[me.rank-2],ye=ne?fe.shape[fe.rank-1]:fe.shape[fe.rank-2],be=ae?me.shape[me.rank-2]:me.shape[me.rank-1],Ee=fe.shape.slice(0,-2),Ce=me.shape.slice(0,-2),Se=sizeFromShape(Ee),Te=sizeFromShape(Ce);assert$2(fe.rank>=2&&me.rank>=2&&fe.rank===me.rank,()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${fe.rank} and ${me.rank}.`),assert$2(arraysEqual(Ee,Ce),()=>`Error in fused matMul: outer dimensions (${Ee}) and (${Ce}) of Tensors with shapes ${fe.shape} and ${me.shape} must match.`),assert$2(ge===ve,()=>`Error in fused matMul: inner shapes (${ge}) and (${ve}) of Tensors with shapes ${fe.shape} and ${me.shape} and transposeA=${ne} and transposeB=${ae} must match.`);const ke=fe.shape.slice(0,-2).concat([ye,be]),Ne=ne?reshape$2(fe,[Se,ge,ye]):reshape$2(fe,[Se,ye,ge]),Fe=ae?reshape$2(me,[Te,be,ve]):reshape$2(me,[Te,ve,be]);let De;ce!=null&&(De=convertToTensor(ce,"bias","fused matMul"),[De]=makeTypesMatch(De,fe),assertAndGetBroadcastShape(ke,De.shape));let Oe;ue!=null&&(Oe=convertToTensor(ue,"prelu weights","fused matMul"));const Re=(je,Ge)=>{const[qe,Ue,ze,He]=Ge,Ye=getFusedDyActivation(reshape$2(je,ze.shape),ze,le);let Xe,We;if(!ne&&!ae?(Xe=matMul$1(Ye,Ue,!1,!0),We=matMul$1(qe,Ye,!0,!1)):!ne&&ae?(Xe=matMul$1(Ye,Ue,!1,!1),We=matMul$1(Ye,qe,!0,!1)):ne&&!ae?(Xe=matMul$1(Ue,Ye,!1,!0),We=matMul$1(qe,Ye,!1,!1)):(Xe=matMul$1(Ue,Ye,!0,!0),We=matMul$1(Ye,qe,!0,!0)),ce!=null){const Ze=getFusedBiasGradient(He,Ye);return[Xe,We,Ze]}else return[Xe,We]},Be={a:Ne,b:Fe,bias:De,preluActivationWeights:Oe},Le={transposeA:ne,transposeB:ae,activation:le,leakyreluAlpha:he};return ce==null?customGrad((Ge,qe,Ue)=>{const ze=ENGINE.runKernel(_FusedMatMul,Be,Le);return Ue([Ge,qe,ze]),{value:reshape$2(ze,ke),gradFunc:Re}})(Ne,Fe):customGrad((Ge,qe,Ue,ze)=>{const He=ENGINE.runKernel(_FusedMatMul,Be,Le);return ze([Ge,qe,He,Ue]),{value:reshape$2(He,ke),gradFunc:Re}})(Ne,Fe,De)}const matMul=op({fusedMatMul_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function binaryInsert(re,ee,ne){const ae=binarySearch(re,ee,ne),ce=ae<0?-(ae+1):ae;re.splice(ce,0,ee)}function binarySearch(re,ee,ne){return binarySearch_(re,ee,ne||defaultComparator)}function defaultComparator(re,ee){return re>ee?1:re<ee?-1:0}function binarySearch_(re,ee,ne){let ae=0,ce=re.length,le=0,ue=!1;for(;ae<ce;){le=ae+(ce-ae>>>1);const he=ne(ee,re[le]);he>0?ae=le+1:(ce=le,ue=!he)}return ue?ae:-ae-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nonMaxSuppressionV3Impl$2(re,ee,ne,ae,ce){return nonMaxSuppressionImpl_(re,ee,ne,ae,ce,0)}function nonMaxSuppressionV4Impl$2(re,ee,ne,ae,ce,le){return nonMaxSuppressionImpl_(re,ee,ne,ae,ce,0,!1,le,!0)}function nonMaxSuppressionV5Impl$2(re,ee,ne,ae,ce,le){return nonMaxSuppressionImpl_(re,ee,ne,ae,ce,le,!0)}function nonMaxSuppressionImpl_(re,ee,ne,ae,ce,le,ue=!1,he=!1,fe=!1){const me=[];for(let Se=0;Se<ee.length;Se++)ee[Se]>ce&&me.push({score:ee[Se],boxIndex:Se,suppressBeginIndex:0});me.sort(ascendingComparator);const ge=le>0?-.5/le:0,ve=[],ye=[];for(;ve.length<ne&&me.length>0;){const Se=me.pop(),{score:Te,boxIndex:ke,suppressBeginIndex:Ne}=Se;if(Te<ce)break;let Fe=!1;for(let De=ve.length-1;De>=Ne;--De){const Oe=intersectionOverUnion(re,ke,ve[De]);if(Oe>=ae){Fe=!0;break}if(Se.score=Se.score*suppressWeight(ae,ge,Oe),Se.score<=ce)break}Se.suppressBeginIndex=ve.length,Fe||(Se.score===Te?(ve.push(ke),ye.push(Se.score)):Se.score>ce&&binaryInsert(me,Se,ascendingComparator))}const be=ve.length,Ee=ne-be;he&&Ee>0&&(ve.push(...new Array(Ee).fill(0)),ye.push(...new Array(Ee).fill(0)));const Ce={selectedIndices:ve};return ue&&(Ce.selectedScores=ye),fe&&(Ce.validOutputs=be),Ce}function intersectionOverUnion(re,ee,ne){const ae=re.subarray(ee*4,ee*4+4),ce=re.subarray(ne*4,ne*4+4),le=Math.min(ae[0],ae[2]),ue=Math.min(ae[1],ae[3]),he=Math.max(ae[0],ae[2]),fe=Math.max(ae[1],ae[3]),me=Math.min(ce[0],ce[2]),ge=Math.min(ce[1],ce[3]),ve=Math.max(ce[0],ce[2]),ye=Math.max(ce[1],ce[3]),be=(he-le)*(fe-ue),Ee=(ve-me)*(ye-ge);if(be<=0||Ee<=0)return 0;const Ce=Math.max(le,me),Se=Math.max(ue,ge),Te=Math.min(he,ve),ke=Math.min(fe,ye),Ne=Math.max(Te-Ce,0)*Math.max(ke-Se,0);return Ne/(be+Ee-Ne)}function suppressWeight(re,ee,ne){const ae=Math.exp(ee*ne*ne);return ne<=re?ae:0}function ascendingComparator(re,ee){return re.score-ee.score||re.score===ee.score&&ee.boxIndex-re.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinear_(re,ee,ne=!1,ae=!1){const ce=convertToTensor(re,"images","resizeBilinear");assert$2(ce.rank===3||ce.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${ce.rank}.`),assert$2(ee.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${ee}.`),assert$2(ae===!1||ne===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let le=ce,ue=!1;ce.rank===3&&(ue=!0,le=reshape$2(ce,[1,ce.shape[0],ce.shape[1],ce.shape[2]]));const he={images:le},fe={alignCorners:ne,halfPixelCenters:ae,size:ee},me=ENGINE.runKernel(ResizeBilinear,he,fe);return ue?reshape$2(me,[me.shape[1],me.shape[2],me.shape[3]]):me}const resizeBilinear$2=op({resizeBilinear_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighbor_(re,ee,ne=!1,ae=!1){const ce=convertToTensor(re,"images","resizeNearestNeighbor");assert$2(ce.rank===3||ce.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${ce.rank}.`),assert$2(ee.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${ee}.`),assert$2(ce.dtype==="float32"||ce.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),assert$2(ae===!1||ne===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let le=ce,ue=!1;ce.rank===3&&(ue=!0,le=reshape$2(ce,[1,ce.shape[0],ce.shape[1],ce.shape[2]]));const he={images:le},fe={alignCorners:ne,halfPixelCenters:ae,size:ee},me=ENGINE.runKernel(ResizeNearestNeighbor,he,fe);return ue?reshape$2(me,[me.shape[1],me.shape[2],me.shape[3]]):me}const resizeNearestNeighbor$2=op({resizeNearestNeighbor_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bandPart_(re,ee,ne){assert$2(ee%1===0,()=>`bandPart(): numLower must be an integer, got ${ee}.`),assert$2(ne%1===0,()=>`bandPart(): numUpper must be an integer, got ${ne}.`);const ae=convertToTensor(re,"a","bandPart");assert$2(ae.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${ae.rank}.`);const ce=ae.shape,[le,ue]=ae.shape.slice(-2);if(!(ee<=le))throw new Error(`bandPart(): numLower (${ee}) must not be greater than the number of rows (${le}).`);if(!(ne<=ue))throw new Error(`bandPart(): numUpper (${ne}) must not be greater than the number of columns (${ue}).`);ee<0&&(ee=le),ne<0&&(ne=ue);const he=reshape$2(range$4(0,le,1,"int32"),[-1,1]),fe=range$4(0,ue,1,"int32"),me=sub$2(he,fe),ge=logicalAnd$2(lessEqual$2(me,scalar(+ee,"int32")),greaterEqual$2(me,scalar(-ne,"int32"))),ve=zeros$1([le,ue],ae.dtype);return reshape$2(stack$1(unstack(reshape$2(ae,[-1,le,ue])).map(ye=>where(ge,ye,ve))),ce)}const bandPart=op({bandPart_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gramSchmidt_(re){let ee;if(Array.isArray(re)){ee=!1,assert$2(re!=null&&re.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const ce=re[0].shape[0];for(let le=1;le<re.length;++le)assert$2(re[le].shape[0]===ce,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${re[le].shape[0]} vs. ${ce})`)}else ee=!0,re=split(re,re.shape[0],0).map(ce=>squeeze(ce,[0]));assert$2(re.length<=re[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${re.length}) exceeds number of dimensions (${re[0].shape[0]}).`);const ne=[],ae=re;for(let ce=0;ce<re.length;++ce)ne.push(ENGINE.tidy(()=>{let le=ae[ce];if(ce>0)for(let ue=0;ue<ce;++ue){const he=mul(sum$2(mul(ne[ue],le)),ne[ue]);le=sub$2(le,he)}return div$1(le,norm(le,"euclidean"))}));return ee?stack$1(ne,0):ne}const gramSchmidt=op({gramSchmidt_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qr_(re,ee=!1){if(assert$2(re.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${re.rank}`),re.rank===2)return qr2d(re,ee);{const ne=re.shape.slice(0,re.shape.length-2).reduce((fe,me)=>fe*me),ae=unstack(reshape$2(re,[ne,re.shape[re.shape.length-2],re.shape[re.shape.length-1]]),0),ce=[],le=[];ae.forEach(fe=>{const[me,ge]=qr2d(fe,ee);ce.push(me),le.push(ge)});const ue=reshape$2(stack$1(ce,0),re.shape),he=reshape$2(stack$1(le,0),re.shape);return[ue,he]}}function qr2d(re,ee=!1){return ENGINE.tidy(()=>{assert$2(re.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${re.shape.length}D Tensor.`);const ne=re.shape[0],ae=re.shape[1];let ce=eye(ne),le=clone$1(re);const ue=tensor2d([[1]],[1,1]);let he=clone$1(ue);const fe=ne>=ae?ae:ne;for(let me=0;me<fe;++me){const ge=le,ve=he,ye=ce;[he,le,ce]=ENGINE.tidy(()=>{const be=slice$4(le,[me,me],[ne-me,1]),Ee=norm(be),Ce=slice$4(le,[me,me],[1,1]),Se=where(greater$2(Ce,0),tensor2d([[-1]]),tensor2d([[1]])),Te=sub$2(Ce,mul(Se,Ee)),ke=div$1(be,Te);ke.shape[0]===1?he=clone$1(ue):he=concat$2([ue,slice$4(ke,[1,0],[ke.shape[0]-1,ke.shape[1]])],0);const Ne=neg$2(div$1(matMul$1(Se,Te),Ee)),Fe=slice$4(le,[me,0],[ne-me,ae]),De=mul(Ne,he),Oe=transpose$2(he);if(me===0)le=sub$2(Fe,matMul$1(De,matMul$1(Oe,Fe)));else{const Le=sub$2(Fe,matMul$1(De,matMul$1(Oe,Fe)));le=concat$2([slice$4(le,[0,0],[me,ae]),Le],0)}const Re=transpose$2(De),Be=slice$4(ce,[0,me],[ne,ce.shape[1]-me]);if(me===0)ce=sub$2(Be,matMul$1(matMul$1(Be,he),Re));else{const Le=sub$2(Be,matMul$1(matMul$1(Be,he),Re));ce=concat$2([slice$4(ce,[0,0],[ne,me]),Le],1)}return[he,le,ce]}),dispose([ge,ve,ye])}return!ee&&ne>ae&&(ce=slice$4(ce,[0,0],[ne,ae]),le=slice$4(le,[0,0],[ae,ae])),[ce,le]})}const qr=op({qr_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const linalg={bandPart,gramSchmidt,qr};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Optimizer extends Serializable{minimize(ee,ne=!1,ae){const{value:ce,grads:le}=this.computeGradients(ee,ae);if(ae!=null){const ue=ae.map(he=>({name:he.name,tensor:le[he.name]}));this.applyGradients(ue)}else this.applyGradients(le);return dispose(le),ne?ce:(ce.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(ee,ne){return variableGrads(ee,ne)}dispose(){this.iterations_!=null&&dispose(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:scalar(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(ee){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(ee){return this.iterations_=(await ee[0].tensor.data())[0],ee.slice(1)}}Object.defineProperty(Optimizer,Symbol.hasInstance,{value:re=>re.minimize!=null&&re.computeGradients!=null&&re.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdadeltaOptimizer extends Optimizer{constructor(ee,ne,ae=null){super(),this.learningRate=ee,this.rho=ne,this.epsilon=ae,this.accumulatedGrads=[],this.accumulatedUpdates=[],ae==null&&(this.epsilon=ENGINE.backend.epsilon())}applyGradients(ee){(Array.isArray(ee)?ee.map(ae=>ae.name):Object.keys(ee)).forEach((ae,ce)=>{const le=ENGINE.registeredVariables[ae],ue=!1;this.accumulatedGrads[ce]==null&&(this.accumulatedGrads[ce]={originalName:`${ae}/accum_grad`,variable:tidy(()=>zerosLike$2(le).variable(ue))}),this.accumulatedUpdates[ce]==null&&(this.accumulatedUpdates[ce]={originalName:`${ae}/accum_var`,variable:tidy(()=>zerosLike$2(le).variable(ue))});const he=Array.isArray(ee)?ee[ce].tensor:ee[ae];if(he==null)return;const fe=this.accumulatedGrads[ce].variable,me=this.accumulatedUpdates[ce].variable;tidy(()=>{const ge=add$1(mul(fe,this.rho),mul(square$3(he),1-this.rho)),ve=mul(div$1(sqrt$2(add$1(me,this.epsilon)),sqrt$2(add$1(fe,this.epsilon))),he),ye=add$1(mul(me,this.rho),mul(square$3(ve),1-this.rho));fe.assign(ge),me.assign(ye);const be=add$1(mul(ve,-this.learningRate),le);le.assign(be)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(dispose(this.accumulatedGrads.map(ee=>ee.variable)),dispose(this.accumulatedUpdates.map(ee=>ee.variable)))}async getWeights(){const ee=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(ee.map(ne=>({name:ne.originalName,tensor:ne.variable})))}async setWeights(ee){ee=await this.extractIterations(ee);const ne=ee.length/2,ae=!1;this.accumulatedGrads=ee.slice(0,ne).map(ce=>({originalName:ce.name,variable:ce.tensor.variable(ae)})),this.accumulatedUpdates=ee.slice(ne,ne*2).map(ce=>({originalName:ce.name,variable:ce.tensor.variable(ae)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(ee,ne){return new ee(ne.learningRate,ne.rho,ne.epsilon)}}AdadeltaOptimizer.className="Adadelta";registerClass(AdadeltaOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdagradOptimizer extends Optimizer{constructor(ee,ne=.1){super(),this.learningRate=ee,this.initialAccumulatorValue=ne,this.accumulatedGrads=[]}applyGradients(ee){(Array.isArray(ee)?ee.map(ae=>ae.name):Object.keys(ee)).forEach((ae,ce)=>{const le=ENGINE.registeredVariables[ae];this.accumulatedGrads[ce]==null&&(this.accumulatedGrads[ce]={originalName:`${ae}/accumulator`,variable:tidy(()=>fill$3(le.shape,this.initialAccumulatorValue).variable(!1))});const ue=Array.isArray(ee)?ee[ce].tensor:ee[ae];if(ue==null)return;const he=this.accumulatedGrads[ce].variable;tidy(()=>{const fe=add$1(he,square$3(ue));he.assign(fe);const me=add$1(mul(div$1(ue,sqrt$2(add$1(fe,ENGINE.backend.epsilon()))),-this.learningRate),le);le.assign(me)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&dispose(this.accumulatedGrads.map(ee=>ee.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(ee=>({name:ee.originalName,tensor:ee.variable})))}async setWeights(ee){ee=await this.extractIterations(ee);const ne=!1;this.accumulatedGrads=ee.map(ae=>({originalName:ae.name,variable:ae.tensor.variable(ne)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(ee,ne){return new ee(ne.learningRate,ne.initialAccumulatorValue)}}AdagradOptimizer.className="Adagrad";registerClass(AdagradOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdamOptimizer extends Optimizer{constructor(ee,ne,ae,ce=null){super(),this.learningRate=ee,this.beta1=ne,this.beta2=ae,this.epsilon=ce,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],tidy(()=>{this.accBeta1=scalar(ne).variable(),this.accBeta2=scalar(ae).variable()}),ce==null&&(this.epsilon=ENGINE.backend.epsilon())}applyGradients(ee){const ne=Array.isArray(ee)?ee.map(ae=>ae.name):Object.keys(ee);tidy(()=>{const ae=sub$2(1,this.accBeta1),ce=sub$2(1,this.accBeta2);ne.forEach((le,ue)=>{const he=ENGINE.registeredVariables[le],fe=!1;this.accumulatedFirstMoment[ue]==null&&(this.accumulatedFirstMoment[ue]={originalName:`${le}/m`,variable:tidy(()=>zerosLike$2(he).variable(fe))}),this.accumulatedSecondMoment[ue]==null&&(this.accumulatedSecondMoment[ue]={originalName:`${le}/v`,variable:tidy(()=>zerosLike$2(he).variable(fe))});const me=Array.isArray(ee)?ee[ue].tensor:ee[le];if(me==null)return;const ge=this.accumulatedFirstMoment[ue].variable,ve=this.accumulatedSecondMoment[ue].variable,ye=add$1(mul(ge,this.beta1),mul(me,1-this.beta1)),be=add$1(mul(ve,this.beta2),mul(square$3(me),1-this.beta2)),Ee=div$1(ye,ae),Ce=div$1(be,ce);ge.assign(ye),ve.assign(be);const Se=add$1(mul(div$1(Ee,add$1(sqrt$2(Ce),this.epsilon)),-this.learningRate),he);he.assign(Se)}),this.accBeta1.assign(mul(this.accBeta1,this.beta1)),this.accBeta2.assign(mul(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&dispose(this.accumulatedFirstMoment.map(ee=>ee.variable)),this.accumulatedSecondMoment!=null&&dispose(this.accumulatedSecondMoment.map(ee=>ee.variable))}async getWeights(){const ee=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(ee.map(ne=>({name:ne.originalName,tensor:ne.variable})))}async setWeights(ee){ee=await this.extractIterations(ee),tidy(()=>{this.accBeta1.assign(pow$2(this.beta1,this.iterations_+1)),this.accBeta2.assign(pow$2(this.beta2,this.iterations_+1))});const ne=ee.length/2,ae=!1;this.accumulatedFirstMoment=ee.slice(0,ne).map(ce=>({originalName:ce.name,variable:ce.tensor.variable(ae)})),this.accumulatedSecondMoment=ee.slice(ne,ne*2).map(ce=>({originalName:ce.name,variable:ce.tensor.variable(ae)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(ee,ne){return new ee(ne.learningRate,ne.beta1,ne.beta2,ne.epsilon)}}AdamOptimizer.className="Adam";registerClass(AdamOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdamaxOptimizer extends Optimizer{constructor(ee,ne,ae,ce=null,le=0){super(),this.learningRate=ee,this.beta1=ne,this.beta2=ae,this.epsilon=ce,this.decay=le,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],tidy(()=>{this.iteration=scalar(0).variable(),this.accBeta1=scalar(ne).variable()}),ce==null&&(this.epsilon=ENGINE.backend.epsilon())}applyGradients(ee){const ne=Array.isArray(ee)?ee.map(ae=>ae.name):Object.keys(ee);tidy(()=>{const ae=sub$2(1,this.accBeta1),ce=div$1(-this.learningRate,add$1(mul(this.iteration,this.decay),1));ne.forEach((le,ue)=>{const he=ENGINE.registeredVariables[le],fe=!1;this.accumulatedFirstMoment[ue]==null&&(this.accumulatedFirstMoment[ue]={originalName:`${le}/m`,variable:zerosLike$2(he).variable(fe)}),this.accumulatedWeightedInfNorm[ue]==null&&(this.accumulatedWeightedInfNorm[ue]={originalName:`${le}/v`,variable:zerosLike$2(he).variable(fe)});const me=Array.isArray(ee)?ee[ue].tensor:ee[le];if(me==null)return;const ge=this.accumulatedFirstMoment[ue].variable,ve=this.accumulatedWeightedInfNorm[ue].variable,ye=add$1(mul(ge,this.beta1),mul(me,1-this.beta1)),be=mul(ve,this.beta2),Ee=abs$3(me),Ce=maximum$2(be,Ee);ge.assign(ye),ve.assign(Ce);const Se=add$1(mul(div$1(ce,ae),div$1(ye,add$1(Ce,this.epsilon))),he);he.assign(Se)}),this.iteration.assign(add$1(this.iteration,1)),this.accBeta1.assign(mul(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&dispose(this.accumulatedFirstMoment.map(ee=>ee.variable)),this.accumulatedWeightedInfNorm!=null&&dispose(this.accumulatedWeightedInfNorm.map(ee=>ee.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(ee){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(ee,ne){return new ee(ne.learningRate,ne.beta1,ne.beta2,ne.epsilon,ne.decay)}}AdamaxOptimizer.className="Adamax";registerClass(AdamaxOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SGDOptimizer extends Optimizer{constructor(ee){super(),this.learningRate=ee,this.setLearningRate(ee)}applyGradients(ee){(Array.isArray(ee)?ee.map(ae=>ae.name):Object.keys(ee)).forEach((ae,ce)=>{const le=Array.isArray(ee)?ee[ce].tensor:ee[ae];if(le==null)return;const ue=ENGINE.registeredVariables[ae];tidy(()=>{const he=add$1(mul(this.c,le),ue);ue.assign(he)})}),this.incrementIterations()}setLearningRate(ee){this.learningRate=ee,this.c!=null&&this.c.dispose(),this.c=keep(scalar(-ee))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(ee){if(ee=await this.extractIterations(ee),ee.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(ee,ne){return new ee(ne.learningRate)}}SGDOptimizer.className="SGD";registerClass(SGDOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MomentumOptimizer extends SGDOptimizer{constructor(ee,ne,ae=!1){super(ee),this.learningRate=ee,this.momentum=ne,this.useNesterov=ae,this.accumulations=[],this.m=scalar(this.momentum)}applyGradients(ee){(Array.isArray(ee)?ee.map(ae=>ae.name):Object.keys(ee)).forEach((ae,ce)=>{const le=ENGINE.registeredVariables[ae];this.accumulations[ce]==null&&(this.accumulations[ce]={originalName:`${ae}/momentum`,variable:tidy(()=>zerosLike$2(le).variable(!1))});const ue=this.accumulations[ce].variable,he=Array.isArray(ee)?ee[ce].tensor:ee[ae];he!=null&&tidy(()=>{let fe;const me=add$1(mul(this.m,ue),he);this.useNesterov?fe=add$1(mul(this.c,add$1(he,mul(me,this.m))),le):fe=add$1(mul(this.c,me),le),ue.assign(me),le.assign(fe)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&dispose(this.accumulations.map(ee=>ee.variable))}setMomentum(ee){this.momentum=ee}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(ee=>({name:ee.originalName,tensor:ee.variable})))}async setWeights(ee){ee=await this.extractIterations(ee);const ne=!1;this.accumulations=ee.map(ae=>({originalName:ae.name,variable:ae.tensor.variable(ne)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(ee,ne){return new ee(ne.learningRate,ne.momentum,ne.useNesterov)}}MomentumOptimizer.className="Momentum";registerClass(MomentumOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RMSPropOptimizer extends Optimizer{constructor(ee,ne=.9,ae=0,ce=null,le=!1){if(super(),this.learningRate=ee,this.decay=ne,this.momentum=ae,this.epsilon=ce,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=le,ce==null&&(this.epsilon=ENGINE.backend.epsilon()),ee==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(ee){(Array.isArray(ee)?ee.map(ae=>ae.name):Object.keys(ee)).forEach((ae,ce)=>{const le=ENGINE.registeredVariables[ae],ue=!1;this.accumulatedMeanSquares[ce]==null&&(this.accumulatedMeanSquares[ce]={originalName:`${ae}/rms`,variable:tidy(()=>zerosLike$2(le).variable(ue))}),this.accumulatedMoments[ce]==null&&(this.accumulatedMoments[ce]={originalName:`${ae}/momentum`,variable:tidy(()=>zerosLike$2(le).variable(ue))}),this.accumulatedMeanGrads[ce]==null&&this.centered&&(this.accumulatedMeanGrads[ce]={originalName:`${ae}/mg`,variable:tidy(()=>zerosLike$2(le).variable(ue))});const he=Array.isArray(ee)?ee[ce].tensor:ee[ae];if(he==null)return;const fe=this.accumulatedMeanSquares[ce].variable,me=this.accumulatedMoments[ce].variable;tidy(()=>{const ge=add$1(mul(fe,this.decay),mul(square$3(he),1-this.decay));if(this.centered){const ve=this.accumulatedMeanGrads[ce].variable,ye=add$1(mul(ve,this.decay),mul(he,1-this.decay)),be=div$1(mul(he,this.learningRate),sqrt$2(sub$2(ge,add$1(square$3(ye),this.epsilon)))),Ee=add$1(mul(me,this.momentum),be);fe.assign(ge),ve.assign(ye),me.assign(Ee);const Ce=sub$2(le,Ee);le.assign(Ce)}else{const ve=add$1(mul(fe,this.decay),mul(square$3(he),1-this.decay)),ye=add$1(mul(me,this.momentum),div$1(mul(he,this.learningRate),sqrt$2(add$1(ve,this.epsilon))));fe.assign(ve),me.assign(ye);const be=sub$2(le,ye);le.assign(be)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&dispose(this.accumulatedMeanSquares.map(ee=>ee.variable)),this.accumulatedMeanGrads!=null&&this.centered&&dispose(this.accumulatedMeanGrads.map(ee=>ee.variable)),this.accumulatedMoments!=null&&dispose(this.accumulatedMoments.map(ee=>ee.variable))}async getWeights(){const ee=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&ee.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(ee.map(ne=>({name:ne.originalName,tensor:ne.variable})))}async setWeights(ee){ee=await this.extractIterations(ee);const ne=this.centered?ee.length/3:ee.length/2,ae=!1;this.accumulatedMeanSquares=ee.slice(0,ne).map(ce=>({originalName:ce.name,variable:ce.tensor.variable(ae)})),this.accumulatedMoments=ee.slice(ne,ne*2).map(ce=>({originalName:ce.name,variable:ce.tensor.variable(ae)})),this.centered&&(this.accumulatedMeanGrads=ee.slice(ne*2,ne*3).map(ce=>({originalName:ce.name,variable:ce.tensor.variable(ae)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(ee,ne){return new ee(ne.learningRate,ne.decay,ne.momentum,ne.epsilon,ne.centered)}}RMSPropOptimizer.className="RMSProp";registerClass(RMSPropOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OptimizerConstructors{static sgd(ee){return new SGDOptimizer(ee)}static momentum(ee,ne,ae=!1){return new MomentumOptimizer(ee,ne,ae)}static rmsprop(ee,ne=.9,ae=0,ce=null,le=!1){return new RMSPropOptimizer(ee,ne,ae,ce,le)}static adam(ee=.001,ne=.9,ae=.999,ce=null){return new AdamOptimizer(ee,ne,ae,ce)}static adadelta(ee=.001,ne=.95,ae=null){return new AdadeltaOptimizer(ee,ne,ae)}static adamax(ee=.002,ne=.9,ae=.999,ce=null,le=0){return new AdamaxOptimizer(ee,ne,ae,ce,le)}static adagrad(ee,ne=.1){return new AdagradOptimizer(ee,ne)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const train={sgd:OptimizerConstructors.sgd,momentum:OptimizerConstructors.momentum,adadelta:OptimizerConstructors.adadelta,adagrad:OptimizerConstructors.adagrad,rmsprop:OptimizerConstructors.rmsprop,adamax:OptimizerConstructors.adamax,adam:OptimizerConstructors.adam};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const delayCallback=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:re=>re())();function nextFrame(){return new Promise(re=>delayCallback(()=>re()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function assertParamsConsistent(re,ee){const ne=re[0].length;re.forEach((ce,le)=>{assert$2(ce.length===ne,()=>`Error in concat${ne}D: rank of tensors[${le}] must be the same as the rank of the rest (${ne})`)}),assert$2(ee>=0&&ee<ne,()=>`Error in concat${ne}D: axis must be between 0 and ${ne-1}.`);const ae=re[0];re.forEach((ce,le)=>{for(let ue=0;ue<ne;ue++)assert$2(ue===ee||ce[ue]===ae[ue],()=>`Error in concat${ne}D: Shape of tensors[${le}] (${ce}) does not match the shape of the rest (${ae}) along the non-concatenated axis ${le}.`)})}function computeOutShape$1(re,ee){const ne=re[0].slice();for(let ae=1;ae<re.length;ae++)ne[ee]+=re[ae][ee];return ne}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PARALLELIZE_THRESHOLD=30;function computeOptimalWindowSize(re){return re<=PARALLELIZE_THRESHOLD?re:nearestDivisor(re,Math.floor(Math.sqrt(re)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getImageCenter(re,ee,ne){const ae=ne*(typeof re=="number"?re:re[0]),ce=ee*(typeof re=="number"?re:re[1]);return[ae,ce]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getReshaped(re,ee,ne,ae=!0){let ce=[];if(ae)ce=ce.concat(ee.slice(0)),ce.push(re[0]/ne),ce=ce.concat(re.slice(1));else{ce=ce.concat(re[0]);const le=ee.length;for(let ue=0;ue<le;++ue)ce=ce.concat([re[ue+1]/ee[ue],ee[ue]]);ce=ce.concat(re.slice(le+1))}return ce}function getPermuted(re,ee,ne=!0){const ae=[];if(ne){ae.push(ee);for(let ce=ee+1;ce<re;++ce)ce<=2*ee?(ae.push(ce),ae.push(ce-(ee+1))):ae.push(ce)}else{const ce=[],le=[];for(let ue=1;ue<re;++ue)ue>=ee*2+1||ue%2===1?le.push(ue):ce.push(ue);ae.push(...ce),ae.push(0),ae.push(...le)}return ae}function getReshapedPermuted(re,ee,ne,ae=!0){const ce=[];ae?ce.push(re[0]/ne):ce.push(re[0]*ne);for(let le=1;le<re.length;++le)le<=ee.length?ae?ce.push(ee[le-1]*re[le]):ce.push(re[le]/ee[le-1]):ce.push(re[le]);return ce}function getSliceBeginCoords(re,ee){const ne=[0];for(let ae=0;ae<ee;++ae)ne.push(re[ae][0]);return ne}function getSliceSize(re,ee,ne){const ae=re.slice(0,1);for(let ce=0;ce<ne;++ce)ae.push(re[ce+1]-ee[ce][0]-ee[ce][1]);return ae}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SELU_SCALEALPHA=1.7580993408473768,SELU_SCALE=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ERF_P=.3275911,ERF_A1=.254829592,ERF_A2=-.284496736,ERF_A3=1.421413741,ERF_A4=-1.453152027,ERF_A5=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function warn$1(...re){env().getBool("IS_TEST")||console.warn(...re)}function log$4(...re){env().getBool("IS_TEST")||console.log(...re)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mergeRealAndImagArrays(re,ee){if(re.length!==ee.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${re.length}, imag: ${ee.length}.`);const ne=new Float32Array(re.length*2);for(let ae=0;ae<ne.length;ae+=2)ne[ae]=re[ae/2],ne[ae+1]=ee[ae/2];return ne}function splitRealAndImagArrays(re){const ee=new Float32Array(re.length/2),ne=new Float32Array(re.length/2);for(let ae=0;ae<re.length;ae+=2)ee[ae/2]=re[ae],ne[ae/2]=re[ae+1];return{real:ee,imag:ne}}function complexWithEvenIndex(re){const ee=Math.ceil(re.length/4),ne=new Float32Array(ee),ae=new Float32Array(ee);for(let ce=0;ce<re.length;ce+=4)ne[Math.floor(ce/4)]=re[ce],ae[Math.floor(ce/4)]=re[ce+1];return{real:ne,imag:ae}}function complexWithOddIndex(re){const ee=Math.floor(re.length/4),ne=new Float32Array(ee),ae=new Float32Array(ee);for(let ce=2;ce<re.length;ce+=4)ne[Math.floor(ce/4)]=re[ce],ae[Math.floor(ce/4)]=re[ce+1];return{real:ne,imag:ae}}function getComplexWithIndex(re,ee){const ne=re[ee*2],ae=re[ee*2+1];return{real:ne,imag:ae}}function assignToTypedArray(re,ee,ne,ae){re[ae*2]=ee,re[ae*2+1]=ne}function exponents(re,ee){const ne=new Float32Array(re/2),ae=new Float32Array(re/2);for(let ce=0;ce<Math.ceil(re/2);ce++){const le=(ee?2:-2)*Math.PI*(ce/re);ne[ce]=Math.cos(le),ae[ce]=Math.sin(le)}return{real:ne,imag:ae}}function exponent(re,ee,ne){const ae=(ne?2:-2)*Math.PI*(re/ee),ce=Math.cos(ae),le=Math.sin(ae);return{real:ce,imag:le}}function prepareSplitSize(re,ee,ne=0){let ae=[];if(typeof ee=="number")assert$2(re.shape[ne]%ee===0,()=>"Number of splits must evenly divide the axis."),ae=new Array(ee).fill(re.shape[ne]/ee);else{const ce=ee.reduce((ue,he)=>(he===-1&&(ue+=1),ue),0);assert$2(ce<=1,()=>"There should be only one negative value in split array.");const le=ee.indexOf(-1);if(le!==-1){const ue=ee.reduce((he,fe)=>fe>0?he+fe:he);ee[le]=re.shape[ne]-ue}assert$2(re.shape[ne]===ee.reduce((ue,he)=>ue+he),()=>"The sum of sizes must match the size of the axis dimension."),ae=ee}return ae}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function segOpComputeOptimalWindowSize(re,ee){let ne=!1,ae;for(re<=PARALLELIZE_THRESHOLD?(ae=re,ne=!0):ae=nearestDivisor(re,Math.floor(Math.sqrt(re)));!ne;)ae>ee||ae===re?ne=!0:ae=nearestDivisor(re,ae+1);return ae}function computeOutShape(re,ee,ne){const ae=[],ce=re.length;for(let le=0;le<ce;le++)le!==ee?ae.push(re[le]):ae.push(ne);return ae}function collectGatherOpShapeInfo(re,ee,ne,ae){const ce=ee.shape.length,le=re.shape.length;if(ae!==0&&(ae<-ce||ae>ce))throw new Error(`Expect batchDims in the range of [-${ce}, ${ce}], but got ${ae}`);if(ae<0&&(ae+=ce),ae>le)throw new Error(`batchDims (${ae}) must be less than rank(x) (
    ${le}).`);if(ne<ae)throw new Error(`batchDims (${ae}) must be less than or equal to axis (${ne}).`);for(let ve=0;ve<ae;++ve)if(re.shape[ve]!==ee.shape[ve])throw new Error(`x.shape[${ve}]: ${re.shape[ve]} should be equal to indices.shape[${ve}]: ${ee.shape[ve]}.`);const ue=re.shape[ne],he=[];let fe=1,me=1,ge=1;for(let ve=0;ve<ae;++ve)he.push(re.shape[ve]),fe*=re.shape[ve];for(let ve=ae;ve<ne;ve++)he.push(re.shape[ve]),me*=re.shape[ve];for(let ve=ae;ve<ce;ve++)he.push(ee.shape[ve]);for(let ve=ne+1;ve<le;ve++)he.push(re.shape[ve]),ge*=re.shape[ve];return{batchSize:fe,sliceSize:ge,outerSize:me,dimSize:ue,outputShape:he}}const segment_util=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo,computeOutShape,segOpComputeOptimalWindowSize},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function castTensor(re,ee,ne){if(ee==="complex64"){if(re.dtype==="complex64")return re.clone();const ae=zeros$1(re.shape),ce=cast$3(re,"float32"),le=ne.complex(ce,ae);return ae.dispose(),ce.dispose(),le}if(!hasEncodingLoss(re.dtype,ee))return ENGINE.makeTensorFromDataId(re.dataId,re.shape,ee);if(re.dtype==="complex64"){const ae=ne.real(re),ce=cast$3(ae,ee);return ae.dispose(),ce}if(ee==="int32")return ne.int(re);if(ee==="bool"){const ae=scalar(0,re.dtype),ce=ne.notEqual(re,ae);return ae.dispose(),ce}else throw new Error(`Error in Cast: failed to cast ${re.dtype} to ${ee}`)}function reshapeTensor(re,ee){return ENGINE.makeTensorFromDataId(re.dataId,ee,re.dtype)}function fromUint8ToStringArray(re){try{return re.map(ee=>decodeString(ee))}catch(ee){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${ee}`)}}function fromStringArrayToUint8(re){return re.map(ee=>encodeString(ee))}const backend_util=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1,ERF_A2,ERF_A3,ERF_A4,ERF_A5,ERF_P,PARALLELIZE_THRESHOLD,SELU_SCALE,SELU_SCALEALPHA,applyActivation:applyActivation$1,assertAndGetBroadcastShape,assertAxesAreInnerMostDims,assertParamsConsistent,assignToTypedArray,axesAreInnerMostDims,calculateShapes,castTensor,combineLocations,complexWithEvenIndex,complexWithOddIndex,computeConv2DInfo,computeConv3DInfo,computeDefaultPad,computeDilation2DInfo,computeOptimalWindowSize,computeOutAndReduceShapes,computeOutShape:computeOutShape$1,computePool2DInfo,computePool3DInfo,convertConv2DDataFormat,eitherStridesOrDilationsAreOne,expandShapeToKeepDim,exponent,exponents,fromStringArrayToUint8,fromUint8ToStringArray,getAxesPermutation,getBroadcastDims:getBroadcastDims$1,getComplexWithIndex,getFusedBiasGradient,getFusedDyActivation,getImageCenter,getInnerMostAxes,getPermuted,getReductionAxes,getReshaped,getReshapedPermuted,getSliceBeginCoords,getSliceSize,getUndoAxesPermutation,log:log$4,mergeRealAndImagArrays,prepareAndValidate,prepareSplitSize,reshapeTensor,segment_util,shouldFuse,slice_util,splitRealAndImagArrays,tupleValuesAreOne,upcastType,validateInput,validateUpdateShape,warn:warn$1},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const absGradConfig={kernelName:Abs$1,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(re,step$2(cast$3(ne,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acosGradConfig={kernelName:Acos,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>{const ae=square$3(cast$3(ne,"float32")),ce=sqrt$2(sub$2(scalar(1),ae));return neg$2(div$1(re,ce))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acoshGradConfig={kernelName:Acosh,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>{const ae=sqrt$2(sub$2(square$3(cast$3(ne,"float32")),1));return div$1(re,ae)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const addGradConfig={kernelName:Add$2,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ae]=ee,ce=assertAndGetBroadcastShape(ne.shape,ae.shape);return{a:()=>{let he=re;const fe=getReductionAxes(ne.shape,ce);return fe.length>0&&(he=sum$2(he,fe)),reshape$2(he,ne.shape)},b:()=>{let he=re;const fe=getReductionAxes(ae.shape,ce);return fe.length>0&&(he=sum$2(he,fe)),reshape$2(he,ae.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const addNGradConfig={kernelName:AddN,saveAllInputs:!0,gradFunc:(re,ee)=>{const ne={};return ee.forEach((ae,ce)=>{ne[ce]=()=>re.clone()}),ne}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const argMaxGradConfig={kernelName:ArgMax,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>zerosLike$2(ne)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const argMinGradConfig={kernelName:ArgMin,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>zerosLike$2(ne)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asinGradConfig={kernelName:Asin,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,sqrt$2(sub$2(scalar(1),square$3(cast$3(ne,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asinhGradConfig={kernelName:Asinh,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>{const ae=sqrt$2(add$1(scalar(1),square$3(cast$3(ne,"float32"))));return div$1(re,ae)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atan2GradConfig={kernelName:Atan2,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ae]=ee,ce=assertAndGetBroadcastShape(ne.shape,ae.shape);return{a:()=>{const he=add$1(square$3(ne),square$3(ae));let fe=mul(re,div$1(ae,he));const me=getReductionAxes(ne.shape,ce);return me.length>0&&(fe=sum$2(fe,me)),reshape$2(fe,ne.shape)},b:()=>{const he=add$1(square$3(ne),square$3(ae));let fe=neg$2(mul(re,div$1(ne,he)));const me=getReductionAxes(ae.shape,ce);return me.length>0&&(fe=sum$2(fe,me)),reshape$2(fe,ae.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atanGradConfig={kernelName:Atan,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,add$1(square$3(cast$3(ne,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atanhGradConfig={kernelName:Atanh,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,sub$2(scalar(1),square$3(cast$3(ne,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3dGrad_(re,ee,ne,ae,ce=[1,1,1],le,ue){const he=convertToTensor(re,"dy","avgPool3dGrad"),fe=convertToTensor(ee,"input","avgPool3dGrad");let me=he,ge=fe,ve=!1;fe.rank===4&&(ve=!0,me=reshape$2(he,[1,he.shape[0],he.shape[1],he.shape[2],he.shape[3]]),ge=reshape$2(fe,[1,fe.shape[0],fe.shape[1],fe.shape[2],fe.shape[3]])),assert$2(me.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${me.rank}.`),assert$2(ge.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${ge.rank}.`),assert$2(eitherStridesOrDilationsAreOne(ae,ce),()=>`Error in avgPool3dGrad: Either strides or dilations must be 1. Got strides ${ae} and dilations '${ce}'`),ue!=null&&assert$2(isInt(le),()=>`Error in avgPool3dGrad: pad must be an integer when using, dimRoundingMode ${ue} but got pad ${le}.`);const ye={dy:me,input:ge},be={filterSize:ne,strides:ae,dilations:ce,pad:le,dimRoundingMode:ue},Ee=ENGINE.runKernel(AvgPool3DGrad,ye,be);return ve?reshape$2(Ee,[Ee.shape[1],Ee.shape[2],Ee.shape[3],Ee.shape[4]]):Ee}const avgPool3dGrad=op({avgPool3dGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const avgPool3DGradConfig$1={kernelName:AvgPool3D,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ae]=ee,{filterSize:ce,strides:le,dilations:ue,pad:he,dimRoundingMode:fe}=ne,me=ue??[1,1,1];return{x:()=>avgPool3dGrad(re,ae,ce,le,me,he,fe)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPoolGrad_(re,ee,ne,ae,ce){const le=convertToTensor(re,"dy","avgPoolGrad"),ue=convertToTensor(ee,"input","avgPoolGrad");assert$2(ue.rank===le.rank,()=>`Rank of input (${ue.rank}) does not match rank of dy (${le.rank})`);let he=ue,fe=le,me=!1;ue.rank===3&&(me=!0,he=reshape$2(ue,[1,ue.shape[0],ue.shape[1],ue.shape[2]]),fe=reshape$2(le,[1,le.shape[0],le.shape[1],le.shape[2]])),assert$2(fe.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${fe.rank}.`),assert$2(he.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${he.rank}.`);const ge={dy:fe,input:he},ve={filterSize:ne,strides:ae,pad:ce},ye=ENGINE.runKernel(AvgPoolGrad,ge,ve);return me?reshape$2(ye,[ye.shape[1],ye.shape[2],ye.shape[3]]):ye}const avgPoolGrad$2=op({avgPoolGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const avgPoolGradConfig$2={kernelName:AvgPool,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ae]=ee,{filterSize:ce,strides:le,pad:ue}=ne;return{x:()=>avgPoolGrad$2(re,ae,ce,le,ue)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchMatMulGradConfig={kernelName:BatchMatMul,inputsToSave:["a","b"],gradFunc:(re,ee,ne)=>{const[ae,ce]=ee,{transposeA:le,transposeB:ue}=ne;return!le&&!ue?{a:()=>matMul$1(re,ce,!1,!0),b:()=>matMul$1(ae,re,!0,!1)}:!le&&ue?{a:()=>matMul$1(re,ce,!1,!1),b:()=>matMul$1(re,ae,!0,!1)}:le&&!ue?{a:()=>matMul$1(ce,re,!1,!0),b:()=>matMul$1(ae,re,!1,!1)}:{a:()=>matMul$1(ce,re,!0,!0),b:()=>matMul$1(re,ae,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchToSpaceNDGradConfig={kernelName:BatchToSpaceND,gradFunc:(re,ee,ne)=>{const{blockShape:ae,crops:ce}=ne;return{x:()=>spaceToBatchND$2(re,ae,ce)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const broadcastToGradConfig={kernelName:BroadcastTo,gradFunc:(re,ee,ne)=>{const ae=ne,ce=ae.inputShape,le=ae.shape,ue=Array.from(le);for(let fe=ce.length-1;fe>=0;fe--)if(ce[fe]===le[fe])ue[fe]=1;else if(ce[fe]!==1)throw new Error(`broadcastTo(): [${ce}] cannot be broadcast to [${le}].`);const he=[];for(let fe=0;fe<ue.length;fe++)ue[fe]>1&&he.push(fe);return{x:()=>sum$2(re,he,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const castGradConfig={kernelName:Cast,gradFunc:re=>({x:()=>re.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ceilGradConfig={kernelName:Ceil,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const clipByValueGradConfig={kernelName:ClipByValue,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ae]=ee,{clipValueMin:ce,clipValueMax:le}=ne;return{x:()=>where(logicalAnd$2(greaterEqual$2(ae,ce),lessEqual$2(ae,le)),re,zerosLike$2(re))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const complexAbsGradConfig={kernelName:ComplexAbs,inputsToSave:["x"],gradFunc:absGradConfig.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const concatGradConfig={kernelName:Concat,saveAllInputs:!0,gradFunc:(re,ee,ne)=>{const ae=ee.map(fe=>fe.shape),{axis:ce}=ne,le=parseAxisParam(ce,ee[0].shape)[0],ue=ae.map(fe=>fe[le]);return split(re,ue,le).map(fe=>()=>fe)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const conv2DGradConfig={kernelName:Conv2D$1,inputsToSave:["x","filter"],gradFunc:(re,ee,ne)=>{const[ae,ce]=ee,{dilations:le,strides:ue,pad:he,dataFormat:fe}=ne;return assert$2(tupleValuesAreOne(le),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${le}'`),{x:()=>conv2DBackpropInput$2(ae.shape,re,ce,ue,he,fe),filter:()=>conv2DBackpropFilter$2(ae,re,ce.shape,ue,he,fe)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const conv2DBackpropInputGradConfig={kernelName:Conv2DBackpropInput,inputsToSave:["dy","filter"],gradFunc:(re,ee,ne)=>{const[ae,ce]=ee,{strides:le,pad:ue,dataFormat:he,dimRoundingMode:fe}=ne;return{dy:()=>conv2d$2(re,ce,le,ue,he,1,fe),filter:()=>conv2DBackpropFilter$2(re,ae,ce.shape,le,ue,he,fe)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropFilter_(re,ee,ne,ae,ce){let le=re;re.rank===4&&(le=reshape$2(re,[1,re.shape[0],re.shape[1],re.shape[2],re.shape[3]]));let ue=ee;ue.rank===4&&(ue=reshape$2(ee,[1,ee.shape[0],ee.shape[1],ee.shape[2],ee.shape[3]])),assert$2(le.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${le.shape}.`),assert$2(ue.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${ue.shape}.`),assert$2(ne.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${ne}.`),assert$2(le.shape[4]===ne[3],()=>`Error in conv3dDerFilter: depth of input ${le.shape[4]}) must match input depth in filter (${ne[3]}.`),assert$2(ue.shape[4]===ne[4],()=>`Error in conv3dDerFilter: depth of dy (${ue.shape[4]}) must match output depth for filter (${ne[4]}).`);const he={x:le,dy:ue},fe={strides:ae,pad:ce,filterShape:ne};return ENGINE.runKernel(Conv3DBackpropFilterV2,he,fe)}const conv3DBackpropFilter=op({conv3DBackpropFilter_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const conv3DGradConfig={kernelName:Conv3D$1,inputsToSave:["x","filter"],gradFunc:(re,ee,ne)=>{const{dilations:ae,strides:ce,pad:le}=ne;assert$2(tupleValuesAreOne(ae),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${ae}'`);const[ue,he]=ee;return{x:()=>conv3DBackpropInput$1(ue.shape,re,he,ce,le),filter:()=>conv3DBackpropFilter(ue,re,he.shape,ce,le)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cosGradConfig={kernelName:Cos,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(neg$2(sin$2(cast$3(ne,"float32"))),re)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const coshGradConfig={kernelName:Cosh,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(sinh$2(cast$3(ne,"float32")),re)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cumsumGradConfig={kernelName:Cumsum,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ae]=ee,{axis:ce,exclusive:le,reverse:ue}=ne;return{x:()=>{const he=getAxesPermutation([ce],ae.rank);let fe=cumsum$2(re,ce,le,!ue);return he!=null&&(fe=transpose$2(fe,he)),fe}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const depthwiseConv2dNativeGradConfig={kernelName:DepthwiseConv2dNative,inputsToSave:["x","filter"],gradFunc:(re,ee,ne)=>{const{dilations:ae,strides:ce,pad:le,dimRoundingMode:ue}=ne,he=ae??[1,1];assert$2(tupleValuesAreOne(he),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${he}'`);const[fe,me]=ee;return assert$2(fe.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${fe.rank}.`),assert$2(me.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${me.rank}.`),assert$2(fe.shape[3]===me.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${fe.shape[3]}) must match the inChannels dimension in filter ${me.shape[2]}.`),assert$2(eitherStridesOrDilationsAreOne(ce,he),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${ce} and dilations '${he}'.`),ue!=null&&assert$2(isInt(le),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${ue} but got pad ${le}.`),{x:()=>depthwiseConv2dNativeBackpropInput$2(fe.shape,re,me,ce,le,ae,ue),filter:()=>depthwiseConv2dNativeBackpropFilter$2(fe,re,me.shape,ce,le,ae,ue)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2dGradConfig={kernelName:Dilation2D,inputsToSave:["x","filter"],gradFunc:(re,ee,ne)=>{const[ae,ce]=ee,le={x:ae,filter:ce,dy:re},ue={x:ae,filter:ce,dy:re};return{x:()=>ENGINE.runKernel(Dilation2DBackpropInput,le,ne),filter:()=>ENGINE.runKernel(Dilation2DBackpropFilter,ue,ne)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eluGradConfig$2={kernelName:Elu$1,outputsToSave:[!0],gradFunc:(re,ee)=>{const[ne]=ee,ae={dy:re,y:ne};return{x:()=>ENGINE.runKernel(EluGrad,ae)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const erfGradConfig={kernelName:Erf,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee,ae=mul(exp$2(neg$2(square$3(ne))),2/Math.sqrt(Math.PI));return{x:()=>mul(re,ae)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expGradConfig={kernelName:Exp,outputsToSave:[!0],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(re,ne)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expandDimsGradConfig={kernelName:ExpandDims,inputsToSave:["input"],gradFunc:(re,ee)=>{const[ne]=ee;return{input:()=>reshape$2(re,ne.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expm1GradConfig={kernelName:Expm1,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(re,exp$2(ne))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorGradConfig={kernelName:Floor,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorDivGradConfig={kernelName:FloorDiv,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ae]=ee,ce=assertAndGetBroadcastShape(ne.shape,ae.shape);return{a:()=>{const he=div$1(re,cast$3(ae,"float32")),fe=getReductionAxes(ne.shape,ce);return fe.length>0?reshape$2(sum$2(he,fe),ne.shape):he},b:()=>{let he=mul(re,cast$3(ne,"float32"));const fe=getReductionAxes(ae.shape,ce);fe.length>0&&(he=reshape$2(sum$2(he,fe),ae.shape));const me=square$3(ae);return neg$2(div$1(he,cast$3(me,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fusedBatchNormGradConfig={kernelName:FusedBatchNorm,inputsToSave:["x","mean","variance","scale"],gradFunc:(re,ee,ne)=>{const{varianceEpsilon:ae}=ne,[ce,le,ue,he]=ee,fe=he??scalar(1),me=getReductionAxes(le.shape,ce.shape),ge=[];if(le.rank===1){for(let Fe=0;Fe<ce.shape.length-1;++Fe)ge.push(ce.shape[Fe]);ge.push(1)}const ve=sub$2(ce,le),ye=mul(re,fe),be=rsqrt$2(add$1(ue,scalar(ae))),Ee=mul(mul(mul(be,be),be),scalar(-.5));return{x:()=>le.rank===1?reshape$2(mul(mul(re,tile$3(reshape$2(be,[1,1,1,le.shape[0]]),ge)),fe),ce.shape):reshape$2(mul(mul(re,be),fe),ce.shape),mean:()=>{let Fe=mul(mul(be,scalar(-1)),ye);return le.rank===1&&(Fe=sum$2(Fe,me)),reshape$2(Fe,le.shape)},variance:()=>{let Fe=mul(mul(Ee,ve),ye);return le.rank===1&&(Fe=sum$2(Fe,me)),reshape$2(Fe,le.shape)},scale:()=>{const Fe=mul(ve,be);let De=mul(re,Fe);return le.rank===1&&(De=sum$2(De,me)),reshape$2(De,le.shape)},offset:()=>{let Fe=re;return le.rank===1&&(Fe=sum$2(Fe,me)),reshape$2(Fe,le.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gatherGradConfig={kernelName:GatherV2,inputsToSave:["x","indices"],gradFunc:(re,ee,ne)=>{const[ae,ce]=ee,{axis:le}=ne,ue=parseAxisParam(le,ae.shape)[0];return{x:()=>{const fe=ae.shape,me=ce.size,ge=fe.slice(0,ue),ve=ge.length,ye=fe.slice(le,fe.length).slice(1),be=ye.length,Ee=arrayRange(0,ve),Ce=arrayRange(ve+1,ve+1+be),Se=arrayConcat([ge,[me],ye]),Te=reshape$2(re,Se),ke=reshape$2(ce,[me]),Ne=arrayConcat([[ve],Ee,Ce]),Fe=transpose$2(Te,Ne);let De=unsortedSegmentSum$2(Fe,ke,ae.shape[ue]);const Oe=getUndoAxesPermutation(Ne);return De=transpose$2(De,Oe),De},indices:()=>ce}}};function arrayRange(re,ee){const ne=[];for(let ae=re;ae<ee;++ae)ne.push(ae);return ne}function arrayConcat(re){const ee=[];for(let ne=0;ne<re.length;++ne)for(let ae=0;ae<re[ne].length;++ae)ee.push(re[ne][ae]);return ee}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const greaterEqualGradConfig={kernelName:GreaterEqual,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ae]=ee;return{a:()=>zerosLike$2(ne),b:()=>zerosLike$2(ae)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const identityGradConfig={kernelName:Identity$1,gradFunc:re=>({x:()=>cast$3(re,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isFiniteGradConfig={kernelName:IsFinite,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isInfGradConfig={kernelName:IsInf,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isNanGradConfig={kernelName:IsNan,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const leakyReluGradConfig={kernelName:LeakyRelu,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ae]=ee,{alpha:ce}=ne,le=greater$2(ae,0);return{x:()=>where(le,re,mul(re,ce))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const log1pGradConfig={kernelName:Log1p,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,add$1(ne,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logGradConfig={kernelName:Log,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,cast$3(ne,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logSoftmaxGradConfig={kernelName:LogSoftmax$1,inputsToSave:[],outputsToSave:[!0],gradFunc:(re,ee,ne)=>{const[ae]=ee,{axis:ce}=ne;return{logits:()=>{const ue=exp$2(ae);return sub$2(re,mul(sum$2(re,ce,!0),ue))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function localResponseNormalizationBackprop_(re,ee,ne,ae=5,ce=1,le=1,ue=.5){const he={x:re,y:ee,dy:ne},fe={depthRadius:ae,bias:ce,alpha:le,beta:ue};return ENGINE.runKernel(LRNGrad,he,fe)}const localResponseNormalizationBackprop=op({localResponseNormalizationBackprop_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lrnGradConfig={kernelName:LRN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(re,ee,ne)=>{const[ae,ce]=ee,{depthRadius:le,bias:ue,alpha:he,beta:fe}=ne;return{x:()=>localResponseNormalizationBackprop(ae,ce,re,le,ue,he,fe)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gradForMinAndMax(re,ee,ne,ae){return ee.rank<ne.rank&&(ee=reshape$2(ee,expandShapeToKeepDim(ee.shape,ae))),re.rank<ne.rank&&(re=reshape$2(re,expandShapeToKeepDim(re.shape,ae))),{x:()=>mul(re,cast$3(equal$2(ne,ee),re.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxGradConfig={kernelName:Max,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(re,ee,ne)=>{const ae=ne,{reductionIndices:ce}=ae,le=ee[0],ue=ee[1],he=parseAxisParam(ce,le.shape),fe=gradForMinAndMax(re,ue,le,he);return{x:()=>fe.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maximumGradConfig={kernelName:Maximum$1,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ae]=ee;return{a:()=>mul(re,cast$3(greaterEqual$2(ne,ae),"float32")),b:()=>mul(re,cast$3(less$2(ne,ae),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3dGrad_(re,ee,ne,ae,ce,le=[1,1,1],ue,he){const fe=convertToTensor(re,"dy","maxPool3dGrad"),me=convertToTensor(ee,"input","maxPool3dGrad"),ge=convertToTensor(ne,"output","maxPool3dGrad");let ve=fe,ye=me,be=ge,Ee=!1;me.rank===4&&(Ee=!0,ve=reshape$2(fe,[1,fe.shape[0],fe.shape[1],fe.shape[2],fe.shape[3]]),ye=reshape$2(me,[1,me.shape[0],me.shape[1],me.shape[2],me.shape[3]]),be=reshape$2(ge,[1,ge.shape[0],ge.shape[1],ge.shape[2],ge.shape[3]])),assert$2(ve.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${ve.rank}.`),assert$2(ye.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${ye.rank}.`),assert$2(be.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${be.rank}.`),assert$2(eitherStridesOrDilationsAreOne(ce,le),()=>`Error in maxPool3dGrad: Either strides or dilations must be 1. Got strides ${ce} and dilations '${le}'`),he!=null&&assert$2(isInt(ue),()=>`Error in maxPool3dGrad: pad must be an integer when using, dimRoundingMode ${he} but got pad ${ue}.`);const Ce={dy:ve,input:ye,output:be},Se={filterSize:ae,strides:ce,dilations:le,pad:ue,dimRoundingMode:he},Te=ENGINE.runKernel(MaxPool3DGrad,Ce,Se);return Ee?reshape$2(Te,[Te.shape[1],Te.shape[2],Te.shape[3],Te.shape[4]]):Te}const maxPool3dGrad=op({maxPool3dGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPool3DGradConfig$1={kernelName:MaxPool3D,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(re,ee,ne)=>{const[ae,ce]=ee,{filterSize:le,strides:ue,dilations:he,pad:fe,dimRoundingMode:me}=ne,ge=he??[1,1,1];return{x:()=>maxPool3dGrad(re,ae,ce,le,ue,ge,fe,me)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolGrad_(re,ee,ne,ae,ce,le,ue){const he=convertToTensor(re,"dy","maxPoolGrad"),fe=convertToTensor(ee,"input","maxPoolGrad"),me=convertToTensor(ne,"output","maxPoolGrad");assert$2(fe.rank===he.rank,()=>`Rank of input (${fe.rank}) does not match rank of dy (${he.rank})`),assert$2(he.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${he.rank}.`),assert$2(fe.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${fe.rank}.`),ue!=null&&assert$2(isInt(le),()=>`Error in maxPoolGrad: pad must be an integer when using, dimRoundingMode ${ue} but got pad ${le}.`);const ge={dy:he,input:fe,output:me},ve={filterSize:ae,strides:ce,pad:le,dimRoundingMode:ue};return ENGINE.runKernel(MaxPoolGrad,ge,ve)}const maxPoolGrad$2=op({maxPoolGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPoolGradConfig$2={kernelName:MaxPool,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(re,ee,ne)=>{const[ae,ce]=ee,{filterSize:le,strides:ue,pad:he}=ne;return{x:()=>maxPoolGrad$2(re,ae,ce,le,ue,he)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const meanGradConfig={kernelName:Mean,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ae]=ee,{axis:ce}=ne,le=parseAxisParam(ce,ae.shape),he=computeOutAndReduceShapes(ae.shape,le)[1],fe=sizeFromShape(he);return{x:()=>{const ge=ae.shape.slice();le.forEach(be=>{ge[be]=1});const ve=reshape$2(re,ge);return div$1(mul(ve,ones(ae.shape,"float32")),fe)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const minGradConfig={kernelName:Min,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(re,ee,ne)=>{const ae=ne,{axis:ce}=ae,[le,ue]=ee,he=parseAxisParam(ce,le.shape),fe=gradForMinAndMax(re,ue,le,he);return{x:()=>fe.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const minimumGradConfig={kernelName:Minimum$1,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ae]=ee;return{a:()=>mul(re,cast$3(lessEqual$2(ne,ae),"float32")),b:()=>mul(re,cast$3(greater$2(ne,ae),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mirrorPadGradConfig={kernelName:MirrorPad,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const ae=ee[0],{paddings:ce}=ne,le=ce.map(ue=>ue[0]);return{x:()=>slice$4(re,le,ae.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const modGradConfig={kernelName:Mod,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ae]=ee,ce=assertAndGetBroadcastShape(ne.shape,ae.shape);return{a:()=>{const he=getReductionAxes(ne.shape,ce);return he.length>0?reshape$2(sum$2(re,he),ne.shape):re},b:()=>{const he=mul(re,neg$2(floor$3(div$1(ne,ae)))),fe=getReductionAxes(ae.shape,ce);return fe.length>0?reshape$2(sum$2(he,fe),ae.shape):he}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const multiplyGradConfig={kernelName:Multiply$2,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ae]=ee,ce=assertAndGetBroadcastShape(ne.shape,ae.shape);return{a:()=>{const he=mul(re,cast$3(ae,"float32")),fe=getReductionAxes(ne.shape,ce);return fe.length>0?reshape$2(sum$2(he,fe),ne.shape):he},b:()=>{const he=mul(re,cast$3(ne,"float32")),fe=getReductionAxes(ae.shape,ce);return fe.length>0?reshape$2(sum$2(he,fe),ae.shape):he}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const negGradConfig={kernelName:Neg,gradFunc:re=>({x:()=>neg$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oneHotGradConfig={kernelName:OneHot,inputsToSave:["indices"],gradFunc:(re,ee)=>{const ne=ee[0];return{indices:()=>zeros$1(ne.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const onesLikeGradConfig={kernelName:OnesLike,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const packGradConfig={kernelName:Pack,saveAllInputs:!0,gradFunc:(re,ee,ne)=>{const{axis:ae}=ne;return unstack(re,ae).map(le=>()=>le)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const padV2GradConfig={kernelName:PadV2,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const ae=ee[0],{paddings:ce}=ne,le=ce.map(ue=>ue[0]);return{x:()=>slice$4(re,le,ae.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const powGradConfig={kernelName:Pow$1,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(re,ee)=>{const[ne,ae,ce]=ee,le=ne,ue=ae,he=assertAndGetBroadcastShape(le.shape,ue.shape);return{a:()=>{const ge=cast$3(ue,"float32");let ve=mul(re,mul(ge,pow$2(le,sub$2(ge,scalar(1)))));const ye=getReductionAxes(le.shape,he);return ye.length>0&&(ve=sum$2(ve,ye)),reshape$2(ve,le.shape)},b:()=>{const ge=greater$2(le,0),ve=where(ge,log$5(le),zerosLike$2(le));let ye=mul(re,mul(ce,ve));const be=getReductionAxes(ue.shape,he);return be.length>0&&(ye=sum$2(ye,be)),reshape$2(ye,ue.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const preluGradConfig={kernelName:Prelu,inputsToSave:["x","alpha"],gradFunc:(re,ee)=>{const[ne,ae]=ee,ce=greater$2(ne,0);return{x:()=>where(ce,re,mul(re,ae)),alpha:()=>{let le=where(ce,zerosLike$2(re),mul(re,ne));const ue=getReductionAxes(ae.shape,re.shape);return ue.length>0&&(le=sum$2(le,ue)),reshape$2(le,ae.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const divGradConfig={kernelName:RealDiv,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ae]=ee,ce=assertAndGetBroadcastShape(ne.shape,ae.shape);return{a:()=>{const he=div$1(re,cast$3(ae,"float32")),fe=getReductionAxes(ne.shape,ce);return fe.length>0?reshape$2(sum$2(he,fe),ne.shape):he},b:()=>{let he=mul(re,cast$3(ne,"float32"));const fe=getReductionAxes(ae.shape,ce);fe.length>0&&(he=reshape$2(sum$2(he,fe),ae.shape));const me=square$3(ae);return neg$2(div$1(he,cast$3(me,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reciprocalGradConfig={kernelName:Reciprocal,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,neg$2(square$3(ne)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const relu6GradConfig={kernelName:Relu6$1,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee,ae=mul(lessEqual$2(ne,6),step$2(ne));return{x:()=>mul(re,cast$3(ae,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reluGradConfig={kernelName:Relu$1,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(re,cast$3(step$2(ne),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reshapeGradConfig={kernelName:Reshape$1,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>reshape$2(re,ne.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const resizeBilinearGradConfig$2={kernelName:ResizeBilinear,inputsToSave:["images"],gradFunc:(re,ee,ne)=>{const[ae]=ee,ce={dy:re,images:ae};return{images:()=>ENGINE.runKernel(ResizeBilinearGrad,ce,ne)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const resizeNearestNeighborGradConfig$2={kernelName:ResizeNearestNeighbor,inputsToSave:["images"],gradFunc:(re,ee,ne)=>{const[ae]=ee,ce={dy:re,images:ae};return{images:()=>ENGINE.runKernel(ResizeNearestNeighborGrad,ce,ne)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reverseGradConfig={kernelName:Reverse,gradFunc:(re,ee,ne)=>{const{dims:ae}=ne,ce=parseAxisParam(ae,re.shape);return{x:()=>reverse$2(re,ce)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const roundGradConfig={kernelName:Round,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rsqrtGradConfig={kernelName:Rsqrt,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>neg$2(div$1(re,mul(pow$2(ne,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const selectGradConfig={kernelName:Select$2,inputsToSave:["condition"],gradFunc:(re,ee)=>{const[ne]=ee;return{condition:()=>cast$3(zerosLike$2(ne),"float32"),t:()=>mul(re,cast$3(ne,re.dtype)),e:()=>mul(re,cast$3(logicalNot$2(ne),re.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const seluGradConfig={kernelName:Selu$1,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>{const ae=greater$2(ne,scalar(0)),ce=scalar(SELU_SCALEALPHA),le=scalar(SELU_SCALE),ue=mul(re,le),he=mul(mul(re,ce),exp$2(cast$3(ne,"float32")));return where(ae,ue,he)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sigmoidGradConfig={kernelName:Sigmoid$1,outputsToSave:[!0],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(re,mul(ne,sub$2(scalar(1),ne)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const signGradConfig={kernelName:Sign,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sinGradConfig={kernelName:Sin,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(cos$2(cast$3(ne,"float32")),re)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sinhGradConfig={kernelName:Sinh,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(cosh$2(cast$3(ne,"float32")),re)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sliceGradConfig={kernelName:Slice,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ae]=ee,{begin:ce,size:le}=ne,ue=ae.shape,[he,fe]=parseSliceParams(ae,ce,le),me=[];for(let ge=0;ge<re.rank;ge++)me.push([he[ge],ue[ge]-he[ge]-fe[ge]]);return{x:()=>pad(re,me)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const softmaxGradConfig={kernelName:Softmax$2,outputsToSave:[!0],gradFunc:(re,ee,ne)=>{const[ae]=ee,{dim:ce}=ne,le=!0,ue=mul(re,ae);return{logits:()=>sub$2(ue,mul(sum$2(ue,[ce],le),ae))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const softplusGradConfig={kernelName:Softplus$1,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(re,sigmoid$2(ne))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const spaceToBatchNDGradConfig={kernelName:SpaceToBatchND,gradFunc:(re,ee,ne)=>{const{blockShape:ae,paddings:ce}=ne;return{x:()=>batchToSpaceND$2(re,ae,ce)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const splitVGradConfig={kernelName:SplitV,gradFunc:(re,ee,ne)=>{const{axis:ae}=ne;return{x:()=>concat$2(re,ae)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sqrtGradConfig={kernelName:Sqrt,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,mul(sqrt$2(cast$3(ne,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squareGradConfig={kernelName:Square,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(re,mul(cast$3(ne,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squaredDifferenceGradConfig={kernelName:SquaredDifference,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ae]=ee,ce=scalar(2);return{a:()=>mul(re,mul(ce,sub$2(ne,ae))),b:()=>mul(re,mul(ce,sub$2(ae,ne)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const stepGradConfig={kernelName:Step,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const subGradConfig={kernelName:Sub,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ae]=ee,ce=assertAndGetBroadcastShape(ne.shape,ae.shape);return{a:()=>{let he=re;const fe=getReductionAxes(ne.shape,ce);return fe.length>0&&(he=sum$2(he,fe)),reshape$2(he,ne.shape)},b:()=>{let he=re;const fe=getReductionAxes(ae.shape,ce);return fe.length>0&&(he=sum$2(he,fe)),reshape$2(neg$2(he),ae.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sumGradConfig={kernelName:Sum,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ae]=ee,ce=ae.shape.slice(),{axis:le}=ne;parseAxisParam(le,ae.shape).forEach(me=>{ce[me]=1});const he=reshape$2(re,ce),fe=mul(he,ones(ae.shape,"float32"));return{x:()=>fe}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tanGradConfig={kernelName:Tan,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,square$3(cos$2(ne)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tanhGradConfig={kernelName:Tanh$1,outputsToSave:[!0],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(sub$2(scalar(1),square$3(ne)),re)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tileGradConfig={kernelName:Tile,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ae]=ee,{reps:ce}=ne;return{x:()=>{let ue=zerosLike$2(ae);if(ae.rank===1)for(let he=0;he<ce[0];++he)ue=add$1(ue,slice$4(re,[he*ae.shape[0]],[ae.shape[0]]));else if(ae.rank===2)for(let he=0;he<ce[0];++he)for(let fe=0;fe<ce[1];++fe)ue=add$1(ue,slice$4(re,[he*ae.shape[0],fe*ae.shape[1]],[ae.shape[0],ae.shape[1]]));else if(ae.rank===3)for(let he=0;he<ce[0];++he)for(let fe=0;fe<ce[1];++fe)for(let me=0;me<ce[2];++me)ue=add$1(ue,slice$4(re,[he*ae.shape[0],fe*ae.shape[1],me*ae.shape[2]],[ae.shape[0],ae.shape[1],ae.shape[2]]));else if(ae.rank===4)for(let he=0;he<ce[0];++he)for(let fe=0;fe<ce[1];++fe)for(let me=0;me<ce[2];++me)for(let ge=0;ge<ce[3];++ge)ue=add$1(ue,slice$4(re,[he*ae.shape[0],fe*ae.shape[1],me*ae.shape[2],ge*ae.shape[3]],[ae.shape[0],ae.shape[1],ae.shape[2],ae.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${ae.rank} tensors yet.`);return ue}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const transposeGradConfig={kernelName:Transpose,gradFunc:(re,ee,ne)=>{const ae=ne,{perm:ce}=ae,le=getUndoAxesPermutation(ce);return{x:()=>transpose$2(re,le)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const unpackGradConfig={kernelName:Unpack,gradFunc:(re,ee,ne)=>{const ae=ne,{axis:ce}=ae;return{value:()=>stack$1(re,ce)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const unsortedSegmentSumGradConfig={kernelName:UnsortedSegmentSum,inputsToSave:["segmentIds"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>gatherDropNegatives(re,ne)}}};function gatherDropNegatives(re,ee){const ne=maximum$2(ee,zerosLike$2(ee)),ae=gather$1(re,ne);let ce=greaterEqual$2(ee,scalar(0,"int32"));const le=ae.rank-ce.rank;for(let he=0;he<le;++he)ce=expandDims$3(ce,he+1);ce=logicalAnd$2(ce,ones(ae.shape,"bool"));const ue=zerosLike$2(ae);return where(ce,ae,ue)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zerosLikeGradConfig={kernelName:ZerosLike,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gradConfigs=[absGradConfig,acosGradConfig,acoshGradConfig,addGradConfig,addNGradConfig,argMaxGradConfig,argMinGradConfig,asinGradConfig,asinhGradConfig,atan2GradConfig,atanGradConfig,atanhGradConfig,avgPool3DGradConfig$1,avgPoolGradConfig$2,batchMatMulGradConfig,batchToSpaceNDGradConfig,broadcastToGradConfig,castGradConfig,ceilGradConfig,clipByValueGradConfig,complexAbsGradConfig,concatGradConfig,conv2DBackpropInputGradConfig,conv2DGradConfig,conv3DGradConfig,cosGradConfig,coshGradConfig,cumsumGradConfig,depthwiseConv2dNativeGradConfig,dilation2dGradConfig,divGradConfig,eluGradConfig$2,erfGradConfig,expGradConfig,expandDimsGradConfig,expm1GradConfig,floorDivGradConfig,floorGradConfig,fusedBatchNormGradConfig,gatherGradConfig,greaterEqualGradConfig,identityGradConfig,isFiniteGradConfig,isInfGradConfig,isNanGradConfig,leakyReluGradConfig,log1pGradConfig,logGradConfig,logSoftmaxGradConfig,lrnGradConfig,maxGradConfig,maxGradConfig,maximumGradConfig,maxPool3DGradConfig$1,maxPoolGradConfig$2,meanGradConfig,minGradConfig,minimumGradConfig,mirrorPadGradConfig,modGradConfig,multiplyGradConfig,negGradConfig,oneHotGradConfig,onesLikeGradConfig,packGradConfig,padV2GradConfig,padV2GradConfig,powGradConfig,preluGradConfig,reciprocalGradConfig,relu6GradConfig,reluGradConfig,reshapeGradConfig,resizeBilinearGradConfig$2,resizeNearestNeighborGradConfig$2,reverseGradConfig,roundGradConfig,rsqrtGradConfig,selectGradConfig,seluGradConfig,sigmoidGradConfig,signGradConfig,sinGradConfig,sinhGradConfig,sliceGradConfig,softmaxGradConfig,softplusGradConfig,spaceToBatchNDGradConfig,spaceToBatchNDGradConfig,splitVGradConfig,splitVGradConfig,sqrtGradConfig,squaredDifferenceGradConfig,squareGradConfig,stepGradConfig,subGradConfig,sumGradConfig,tanGradConfig,tanhGradConfig,tileGradConfig,transposeGradConfig,unpackGradConfig,unsortedSegmentSumGradConfig,zerosLikeGradConfig];for(const re of gradConfigs)registerGradient(re);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.abs=function(){return this.throwIfDisposed(),abs$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.acos=function(){return this.throwIfDisposed(),acos$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.acosh=function(){return this.throwIfDisposed(),acosh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.addStrict=function(re){return this.throwIfDisposed(),addStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.add=function(re){return this.throwIfDisposed(),add$1(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.all=function(re,ee){return this.throwIfDisposed(),all$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.any=function(re,ee){return this.throwIfDisposed(),any$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.argMax=function(re){return this.throwIfDisposed(),argMax$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.argMin=function(re){return this.throwIfDisposed(),argMin$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.asScalar=function(){return this.throwIfDisposed(),assert$2(this.size===1,()=>"The array must have only 1 element."),reshape$2(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.asType=function(re){return this.throwIfDisposed(),cast$3(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as1D=function(){return this.throwIfDisposed(),reshape$2(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as2D=function(re,ee){return this.throwIfDisposed(),reshape$2(this,[re,ee])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as3D=function(re,ee,ne){return this.throwIfDisposed(),reshape$2(this,[re,ee,ne])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as4D=function(re,ee,ne,ae){return this.throwIfDisposed(),reshape$2(this,[re,ee,ne,ae])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as5D=function(re,ee,ne,ae,ce){return this.throwIfDisposed(),reshape$2(this,[re,ee,ne,ae,ce])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.asin=function(){return this.throwIfDisposed(),asin$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.asinh=function(){return this.throwIfDisposed(),asinh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.atan=function(){return this.throwIfDisposed(),atan$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.atan2=function(re){return this.throwIfDisposed(),atan2$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.atanh=function(){return this.throwIfDisposed(),atanh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.avgPool=function(re,ee,ne,ae){return this.throwIfDisposed(),avgPool$2(this,re,ee,ne,ae)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.batchToSpaceND=function(re,ee){return this.throwIfDisposed(),batchToSpaceND$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.batchNorm=function(re,ee,ne,ae,ce){return this.throwIfDisposed(),batchNorm$2(this,re,ee,ne,ae,ce)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.broadcastTo=function(re){return this.throwIfDisposed(),broadcastTo(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.cast=function(re){return this.throwIfDisposed(),cast$3(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.ceil=function(){return this.throwIfDisposed(),ceil$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.clipByValue=function(re,ee){return this.throwIfDisposed(),clipByValue$1(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.concat=function(re,ee){return this.throwIfDisposed(),re instanceof Tensor&&(re=[re]),concat$2([this,...re],ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.conv1d=function(re,ee,ne,ae,ce,le){return this.throwIfDisposed(),conv1d(this,re,ee,ne,ae,ce,le)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.conv2dTranspose=function(re,ee,ne,ae,ce){return this.throwIfDisposed(),conv2dTranspose(this,re,ee,ne,ae,ce)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.conv2d=function(re,ee,ne,ae,ce,le){return this.throwIfDisposed(),conv2d$2(this,re,ee,ne,ae,ce,le)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.cos=function(){return this.throwIfDisposed(),cos$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.cosh=function(){return this.throwIfDisposed(),cosh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.cumsum=function(re,ee,ne){return this.throwIfDisposed(),cumsum$2(this,re,ee,ne)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.depthToSpace=function(re,ee){return this.throwIfDisposed(),depthToSpace$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.depthwiseConv2D=function(re,ee,ne,ae,ce,le){return deprecationWarn("depthwiseConv2D is deprecated, use depthwiseConv2d instead"),this.throwIfDisposed(),depthwiseConv2d$1(this,re,ee,ne,ae,ce,le)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.depthwiseConv2d=function(re,ee,ne,ae,ce,le){return this.throwIfDisposed(),depthwiseConv2d$1(this,re,ee,ne,ae,ce,le)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.dilation2d=function(re,ee,ne,ae,ce){return this.throwIfDisposed(),dilation2d(this,re,ee,ne,ae,ce)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.divNoNan=function(re){return this.throwIfDisposed(),divNoNan(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.divStrict=function(re){return this.throwIfDisposed(),divStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.div=function(re){return this.throwIfDisposed(),div$1(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.dot=function(re){return this.throwIfDisposed(),dot$1(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.elu=function(){return this.throwIfDisposed(),elu$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.equalStrict=function(re){return this.throwIfDisposed(),equalStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.equal=function(re){return this.throwIfDisposed(),equal$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.erf=function(){return this.throwIfDisposed(),erf$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.exp=function(){return this.throwIfDisposed(),exp$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.expandDims=function(re){return this.throwIfDisposed(),expandDims$3(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.expm1=function(){return this.throwIfDisposed(),expm1$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.fft=function(){return this.throwIfDisposed(),fft$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.flatten=function(){return this.throwIfDisposed(),reshape$2(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.floor=function(){return this.throwIfDisposed(),floor$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.floorDiv=function(re){return this.throwIfDisposed(),floorDiv$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.gather=function(re,ee){return this.throwIfDisposed(),gather$1(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.greaterEqualStrict=function(re){return this.throwIfDisposed(),greaterEqualStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.greaterEqual=function(re){return this.throwIfDisposed(),greaterEqual$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.greaterStrict=function(re){return this.throwIfDisposed(),greaterStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.greater=function(re){return this.throwIfDisposed(),greater$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.ifft=function(){return this.throwIfDisposed(),ifft$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.irfft=function(){return this.throwIfDisposed(),irfft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.isFinite=function(){return this.throwIfDisposed(),isFinite$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.isInf=function(){return this.throwIfDisposed(),isInf$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.isNaN=function(){return this.throwIfDisposed(),isNaN$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.leakyRelu=function(re){return this.throwIfDisposed(),leakyRelu$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.lessEqualStrict=function(re){return this.throwIfDisposed(),lessEqualStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.lessEqual=function(re){return this.throwIfDisposed(),lessEqual$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.lessStrict=function(re){return this.throwIfDisposed(),lessStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.less=function(re){return this.throwIfDisposed(),less$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.localResponseNormalization=function(re,ee,ne,ae){return this.throwIfDisposed(),localResponseNormalization(this,re,ee,ne,ae)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logSigmoid=function(){return this.throwIfDisposed(),logSigmoid(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logSoftmax=function(re){return this.throwIfDisposed(),logSoftmax(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logSumExp=function(re,ee){return this.throwIfDisposed(),logSumExp(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.log=function(){return this.throwIfDisposed(),log$5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.log1p=function(){return this.throwIfDisposed(),log1p$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logicalAnd=function(re){return this.throwIfDisposed(),logicalAnd$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logicalNot=function(){return this.throwIfDisposed(),logicalNot$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logicalOr=function(re){return this.throwIfDisposed(),logicalOr$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logicalXor=function(re){return this.throwIfDisposed(),logicalXor(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.matMul=function(re,ee,ne){return this.throwIfDisposed(),matMul$1(this,re,ee,ne)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.maxPool=function(re,ee,ne,ae){return this.throwIfDisposed(),maxPool$2(this,re,ee,ne,ae)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.max=function(re,ee){return this.throwIfDisposed(),max$4(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.maximumStrict=function(re){return this.throwIfDisposed(),maximumStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.maximum=function(re){return this.throwIfDisposed(),maximum$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mean=function(re,ee){return this.throwIfDisposed(),mean$1(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.min=function(re,ee){return this.throwIfDisposed(),min$4(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.minimumStrict=function(re){return this.throwIfDisposed(),minimumStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.minimum=function(re){return this.throwIfDisposed(),minimum$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mirrorPad=function(re,ee){return this.throwIfDisposed(),mirrorPad$1(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.modStrict=function(re){return this.throwIfDisposed(),modStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mod=function(re){return this.throwIfDisposed(),mod$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mulStrict=function(re){return this.throwIfDisposed(),mulStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mul=function(re){return this.throwIfDisposed(),mul(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.neg=function(){return this.throwIfDisposed(),neg$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.norm=function(re,ee,ne){return this.throwIfDisposed(),norm(this,re,ee,ne)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.notEqualStrict=function(re){return this.throwIfDisposed(),notEqualStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.notEqual=function(re){return this.throwIfDisposed(),notEqual$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.oneHot=function(re,ee=1,ne=0){return this.throwIfDisposed(),oneHot$2(this,re,ee,ne)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.onesLike=function(){return this.throwIfDisposed(),onesLike$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.pad=function(re,ee){return this.throwIfDisposed(),pad(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.pool=function(re,ee,ne,ae,ce){return this.throwIfDisposed(),pool$2(this,re,ee,ne,ae,ce)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.powStrict=function(re){return this.throwIfDisposed(),powStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.pow=function(re){return this.throwIfDisposed(),pow$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.prelu=function(re){return this.throwIfDisposed(),prelu$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.prod=function(re,ee){return this.throwIfDisposed(),prod$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.reciprocal=function(){return this.throwIfDisposed(),reciprocal$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.relu=function(){return this.throwIfDisposed(),relu$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.relu6=function(){return this.throwIfDisposed(),relu6$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.reshapeAs=function(re){return this.throwIfDisposed(),reshape$2(this,re.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.reshape=function(re){return this.throwIfDisposed(),reshape$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.resizeBilinear=function(re,ee,ne){return this.throwIfDisposed(),resizeBilinear$2(this,re,ee,ne)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.resizeNearestNeighbor=function(re,ee,ne){return this.throwIfDisposed(),resizeNearestNeighbor$2(this,re,ee,ne)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.reverse=function(re){return this.throwIfDisposed(),reverse$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.rfft=function(){return this.throwIfDisposed(),rfft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.round=function(){return this.throwIfDisposed(),round$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.rsqrt=function(){return this.throwIfDisposed(),rsqrt$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.selu=function(){return this.throwIfDisposed(),selu$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.separableConv2d=function(re,ee,ne,ae,ce,le){return this.throwIfDisposed(),separableConv2d(this,re,ee,ne,ae,ce,le)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sigmoid=function(){return this.throwIfDisposed(),sigmoid$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sign=function(){return this.throwIfDisposed(),sign$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sin=function(){return this.throwIfDisposed(),sin$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sinh=function(){return this.throwIfDisposed(),sinh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.slice=function(re,ee){return this.throwIfDisposed(),slice$4(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.softmax=function(re){return this.throwIfDisposed(),softmax$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.softplus=function(){return this.throwIfDisposed(),softplus$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.spaceToBatchND=function(re,ee){return this.throwIfDisposed(),spaceToBatchND$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.split=function(re,ee){return this.throwIfDisposed(),split(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sqrt=function(){return this.throwIfDisposed(),sqrt$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.square=function(){return this.throwIfDisposed(),square$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.squaredDifference=function(re){return this.throwIfDisposed(),squaredDifference$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.squaredDifferenceStrict=function(re){return this.throwIfDisposed(),squaredDifferenceStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.squeeze=function(re){return this.throwIfDisposed(),squeeze(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.stack=function(re,ee){this.throwIfDisposed();const ne=re instanceof Tensor?[this,re]:[this,...re];return stack$1(ne,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.step=function(re){return this.throwIfDisposed(),step$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.stridedSlice=function(re,ee,ne,ae,ce,le,ue,he){return this.throwIfDisposed(),stridedSlice$2(this,re,ee,ne,ae,ce,le,ue,he)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.subStrict=function(re){return this.throwIfDisposed(),subStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sub=function(re){return this.throwIfDisposed(),sub$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sum=function(re,ee){return this.throwIfDisposed(),sum$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.tan=function(){return this.throwIfDisposed(),tan$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.tanh=function(){return this.throwIfDisposed(),tanh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.tile=function(re){return this.throwIfDisposed(),tile$3(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.toBool=function(){return this.throwIfDisposed(),cast$3(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.toFloat=function(){return this.throwIfDisposed(),cast$3(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.toInt=function(){return this.throwIfDisposed(),cast$3(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.topk=function(re,ee){return this.throwIfDisposed(),topk(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.transpose=function(re){return this.throwIfDisposed(),transpose$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.unique=function(re){return this.throwIfDisposed(),unique$4(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.unsortedSegmentSum=function(re,ee){return this.throwIfDisposed(),unsortedSegmentSum$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.unstack=function(re){return this.throwIfDisposed(),unstack(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.where=function(re,ee){return this.throwIfDisposed(),where(re,this,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.zerosLike=function(){return this.throwIfDisposed(),zerosLike$2(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let _epsilon;function epsilon$1(){return _epsilon==null&&(_epsilon=backend().epsilon()),_epsilon}function imageDataFormat(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class AttributeError extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,AttributeError.prototype)}}class RuntimeError extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,RuntimeError.prototype)}}class ValueError extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,ValueError.prototype)}}class NotImplementedError extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,NotImplementedError.prototype)}}class AssertionError extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,AssertionError.prototype)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pyListRepeat(re,ee){if(Array.isArray(re)){let ne=[];for(let ae=0;ae<ee;ae++)ne=ne.concat(re);return ne}else{const ne=new Array(ee);return ne.fill(re),ne}}function assert$1(re,ee){if(!re)throw new AssertionError(ee)}function count(re,ee){let ne=0;for(const ae of re)ae===ee&&ne++;return ne}function singletonOrArray(re){return re.length===1?re[0]:re}function toList(re){return Array.isArray(re)?re:[re]}function toSnakeCase(re){const ne=re.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return ne[0]!=="_"?ne:"private"+ne}function toCamelCase(re){return re.length<=1||re.indexOf("_")===-1?re:re.replace(/[_]+(\w|$)/g,(ee,ne)=>ne.toUpperCase())}let _GLOBAL_CUSTOM_OBJECTS={};function serializeKerasObject(re){if(re==null)return null;const ee={};return ee.className=re.getClassName(),ee.config=re.getConfig(),ee}function convertNDArrayScalarsInConfig(re){if(!(re==null||typeof re!="object"))if(Array.isArray(re))re.forEach(ee=>convertNDArrayScalarsInConfig(ee));else{const ee=Object.keys(re);for(const ne of ee){const ae=re[ne];ae!=null&&typeof ae=="object"&&(!Array.isArray(ae)&&ae.type==="ndarray"&&typeof ae.value=="number"?re[ne]=ae.value:convertNDArrayScalarsInConfig(ae))}}}function deserializeKerasObject(re,ee={},ne={},ae="object",ce=!1){if(typeof re=="string"){const le=re;let ue;if(le in ne)ue=ne[le];else if(le in _GLOBAL_CUSTOM_OBJECTS)ue=_GLOBAL_CUSTOM_OBJECTS[le];else if(ue=ee[le],ue==null)throw new ValueError(`Unknown ${ae}: ${re}. This may be due to one of the following reasons:
1. The ${ae} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${ae} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return ue}else{const le=re;if(le.className==null||le.config==null)throw new ValueError(`${ae}: Improper config format: ${JSON.stringify(le)}.
'className' and 'config' must set.`);const ue=le.className;let he,fe;if(ue in ne?[he,fe]=ne[ue]:ue in _GLOBAL_CUSTOM_OBJECTS?[he,fe]=_GLOBAL_CUSTOM_OBJECTS.className:ue in ee&&([he,fe]=ee[ue]),he==null)throw new ValueError(`Unknown ${ae}: ${ue}. This may be due to one of the following reasons:
1. The ${ae} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${ae} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(fe!=null){const me={};for(const be of Object.keys(_GLOBAL_CUSTOM_OBJECTS))me[be]=_GLOBAL_CUSTOM_OBJECTS[be];for(const be of Object.keys(ne))me[be]=ne[be];const ge=le.config;ge.customObjects=me;const ve=Object.assign({},_GLOBAL_CUSTOM_OBJECTS);for(const be of Object.keys(ne))_GLOBAL_CUSTOM_OBJECTS[be]=ne[be];convertNDArrayScalarsInConfig(le.config);const ye=fe(he,le.config,ne,ce);return _GLOBAL_CUSTOM_OBJECTS=Object.assign({},ve),ye}else{const me=Object.assign({},_GLOBAL_CUSTOM_OBJECTS);for(const ve of Object.keys(ne))_GLOBAL_CUSTOM_OBJECTS[ve]=ne[ve];const ge=new he(le.config);return _GLOBAL_CUSTOM_OBJECTS=Object.assign({},me),ge}}}function numberCompare(re,ee){return re<ee?-1:re>ee?1:0}function reverseNumberCompare(re,ee){return-1*numberCompare(re,ee)}function unique$3(re){if(re==null)return re;const ee=[];for(const ne of re)ee.indexOf(ne)===-1&&ee.push(ne);return ee}function isObjectEmpty(re){if(re==null)throw new ValueError(`Invalid value in obj: ${JSON.stringify(re)}`);for(const ee in re)if(re.hasOwnProperty(ee))return!1;return!0}function checkStringTypeUnionValue(re,ee,ne){if(ne!=null&&re.indexOf(ne)<0)throw new ValueError(`${ne} is not a valid ${ee}.  Valid values are ${re} or null/undefined.`)}function checkArrayTypeAndLength(re,ee,ne=0,ae=1/0){return assert$1(ne>=0),assert$1(ae>=ne),Array.isArray(re)&&re.length>=ne&&re.length<=ae&&re.every(ce=>typeof ce===ee)}function assertPositiveInteger(re,ee){Array.isArray(re)?(assert$2(re.length>0,()=>`${ee} is unexpectedly an empty array.`),re.forEach((ne,ae)=>assertPositiveInteger(ne,`element ${ae+1} of ${ee}`))):assert$2(Number.isInteger(re)&&re>0,()=>`Expected ${ee} to be a positive integer, but got ${formatAsFriendlyString(re)}.`)}function formatAsFriendlyString(re){return re===null?"null":Array.isArray(re)?"["+re.map(ee=>formatAsFriendlyString(ee)).join(",")+"]":typeof re=="string"?`"${re}"`:`${re}`}function debounce(re,ee){let ne=now$1(),ae;return(...le)=>{const ue=now$1();return ue-ne<ee||(ne=ue,ae=re(...le)),ae}}function mapActivationToFusedKernel(re){return re==="relu"?"relu":re==="linear"?"linear":re==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function calcL2Norms(re,ee){return tidy(()=>sqrt$2(sum$2(mul(re,re),ee,!0)))}class Constraint extends Serializable{getConfig(){return{}}}class MaxNorm extends Constraint{constructor(ee){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=ee.maxValue!=null?ee.maxValue:this.defaultMaxValue,this.axis=ee.axis!=null?ee.axis:this.defaultAxis}apply(ee){return tidy(()=>{const ne=calcL2Norms(ee,this.axis),ae=clipByValue$1(ne,0,this.maxValue);return mul(ee,div$1(ae,add$1(epsilon$1(),ne)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}MaxNorm.className="MaxNorm";registerClass(MaxNorm);class UnitNorm extends Constraint{constructor(ee){super(),this.defaultAxis=0,this.axis=ee.axis!=null?ee.axis:this.defaultAxis}apply(ee){return tidy(()=>div$1(ee,add$1(epsilon$1(),calcL2Norms(ee,this.axis))))}getConfig(){return{axis:this.axis}}}UnitNorm.className="UnitNorm";registerClass(UnitNorm);class NonNeg extends Constraint{apply(ee){return relu$2(ee)}}NonNeg.className="NonNeg";registerClass(NonNeg);class MinMaxNorm extends Constraint{constructor(ee){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=ee.minValue!=null?ee.minValue:this.defaultMinValue,this.maxValue=ee.maxValue!=null?ee.maxValue:this.defaultMaxValue,this.rate=ee.rate!=null?ee.rate:this.defaultRate,this.axis=ee.axis!=null?ee.axis:this.defaultAxis}apply(ee){return tidy(()=>{const ne=calcL2Norms(ee,this.axis),ae=add$1(mul(this.rate,clipByValue$1(ne,this.minValue,this.maxValue)),mul(1-this.rate,ne));return mul(ee,div$1(ae,add$1(epsilon$1(),ne)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}MinMaxNorm.className="MinMaxNorm";registerClass(MinMaxNorm);const CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function serializeConstraint(re){return serializeKerasObject(re)}function deserializeConstraint(re,ee={}){return deserializeKerasObject(re,SerializationMap.getMap().classNameMap,ee,"constraint")}function getConstraint(re){if(re==null)return null;if(typeof re=="string"){const ne={className:re in CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP?CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP[re]:re,config:{}};return deserializeConstraint(ne)}else return re instanceof Constraint?re:deserializeConstraint(re)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const VALID_DATA_FORMAT_VALUES=["channelsFirst","channelsLast"],VALID_INTERPOLATION_FORMAT_VALUES=["nearest","bilinear"],VALID_PADDING_MODE_VALUES=["valid","same","causal"],VALID_POOL_MODE_VALUES=["max","avg"],VALID_BIDIRECTIONAL_MERGE_MODES=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const nameMap=new Map;function checkDataFormat(re){checkStringTypeUnionValue(VALID_DATA_FORMAT_VALUES,"DataFormat",re)}function checkInterpolationFormat(re){checkStringTypeUnionValue(VALID_INTERPOLATION_FORMAT_VALUES,"InterpolationFormat",re)}function checkPaddingMode(re){checkStringTypeUnionValue(VALID_PADDING_MODE_VALUES,"PaddingMode",re)}function checkPoolMode(re){checkStringTypeUnionValue(VALID_POOL_MODE_VALUES,"PoolMode",re)}const _nameScopeStack=[],_nameScopeDivider="/";function nameScope(re,ee){_nameScopeStack.push(re);try{const ne=ee();return _nameScopeStack.pop(),ne}catch(ne){throw _nameScopeStack.pop(),ne}}function currentNameScopePrefix(){return _nameScopeStack.length===0?"":_nameScopeStack.join(_nameScopeDivider)+_nameScopeDivider}function getScopedTensorName(re){if(!isValidTensorName(re))throw new Error("Not a valid tensor name: '"+re+"'");return currentNameScopePrefix()+re}function getUniqueTensorName(re){if(!isValidTensorName(re))throw new Error("Not a valid tensor name: '"+re+"'");nameMap.has(re)||nameMap.set(re,0);const ee=nameMap.get(re);if(nameMap.set(re,nameMap.get(re)+1),ee>0){const ne=`${re}_${ee}`;return nameMap.set(ne,1),ne}else return re}const tensorNameRegex=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function isValidTensorName(re){return!!re.match(tensorNameRegex)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isInteger(re){return re===parseInt(re.toString(),10)}function arrayProd(re,ee,ne){ee==null&&(ee=0),ne==null&&(ne=re.length);let ae=1;for(let ce=ee;ce<ne;++ce)ae*=re[ce];return ae}function toArray1D(re){return re=Array.isArray(re)?new Float32Array(re):re,tensor1d(re)}function min$3(re){return min$4(toArray1D(re)).dataSync()[0]}function max$3(re){return max$4(toArray1D(re)).dataSync()[0]}function range$3(re,ee){if(ee<re)throw new ValueError(`end (${ee}) < begin (${re}) is forbidden.`);const ne=[];for(let ae=re;ae<ee;++ae)ne.push(ae);return ne}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cast$2(re,ee){return re.asType(ee)}function expandDims$2(re,ee=-1){const ne=re.shape.slice();return ee<0&&(ee=ne.length+ee+1),ne.splice(ee,0,1),re.reshape(ne)}function repeat(re,ee){return tidy(()=>{if(re.shape.length!==2)throw new ValueError(`repeat() expects a rank-2 tensor, but received a rank-${re.shape.length} tensor.`);const ne=expandDims$2(re,1);return tile$2(ne,[1,ee,1])})}function flatten$1(re){const ee=[arrayProd(re.shape)];return re.reshape(ee)}function batchFlatten(re){if(re.rank<=1)throw new ValueError(`batchFlatten requires a minimum rank of 2. Got rank: ${re.rank}.`);const ee=[re.shape[0],arrayProd(re.shape,1)];return re.reshape(ee)}function sliceAlongFirstAxis(re,ee,ne){return tidy(()=>{switch(re.rank){case 1:return slice1d(re,ee,ne);case 2:return slice2d(re,[ee,0],[ne,re.shape[1]]);case 3:return slice3d(re,[ee,0,0],[ne,re.shape[1],re.shape[2]]);case 4:return slice4d(re,[ee,0,0,0],[ne,re.shape[1],re.shape[2],re.shape[3]]);case 5:return slice$4(re,[ee,0,0,0,0],[ne,re.shape[1],re.shape[2],re.shape[3],re.shape[4]]);case 6:return slice$4(re,[ee,0,0,0,0,0],[ne,re.shape[1],re.shape[2],re.shape[3],re.shape[4],re.shape[5]]);default:throw new ValueError(`sliceAlongFirstAxis() received an unsupported tensor rank: ${re.rank}`)}})}function sliceAlongLastAxis(re,ee,ne){return tidy(()=>{switch(re.rank){case 1:return slice1d(re,ee,ne);case 2:return slice2d(re,[0,ee],[re.shape[0],ne]);case 3:return slice3d(re,[0,0,ee],[re.shape[0],re.shape[1],ne]);case 4:return slice4d(re,[0,0,0,ee],[re.shape[0],re.shape[1],re.shape[2],ne]);default:throw new ValueError(`sliceAlongLastAxis() received an unsupported tensor rank: ${re.rank}`)}})}function sliceAlongAxis(re,ee,ne,ae){return tidy(()=>{switch(re.rank){case 1:return slice1d(re,ee,ne);case 2:switch(ae){case 1:return sliceAlongFirstAxis(re,ee,ne);case 2:return sliceAlongLastAxis(re,ee,ne);default:throw new ValueError(`The axis is not within the rank of the tensor ${ae}`)}case 3:switch(ae){case 1:return sliceAlongFirstAxis(re,ee,ne);case 2:return slice3d(re,[0,ee,0],[re.shape[0],ne,re.shape[2]]);case 3:return sliceAlongLastAxis(re,ee,ne);default:throw new ValueError(`The axis is not within the rank of the tensor ${ae}`)}case 4:switch(ae){case 1:return sliceAlongFirstAxis(re,ee,ne);case 2:return slice4d(re,[0,ee,0,0],[re.shape[0],ne,re.shape[2],re.shape[3]]);case 3:return slice4d(re,[0,0,ee,0],[re.shape[0],re.shape[1],ne,re.shape[3]]);case 4:return sliceAlongLastAxis(re,ee,ne);default:throw new ValueError(`The axis is not within the rank of the tensor ${ae}`)}default:throw new ValueError(`sliceAlongLastAxis() received an unsupported tensor rank: ${re.rank}`)}})}function concatenate(re,ee=-1){let ne;return ee<0&&(ne=re[0].rank,ne!==0?ee=ne:ee=0),ee===re[0].rank&&(ee=-1),concat$2(re,ee)}function concatAlongFirstAxis(re,ee){switch(re.rank){case 1:return concat1d([re,ee]);case 2:return concat2d([re,ee],0);case 3:return concat3d([re,ee],0);case 4:return concat4d([re,ee],0);default:throw new ValueError(`concatAlongFirstAxis() received an unsupported tensor rank: ${re.rank}`)}}function tile$2(re,ee){if(Array.isArray(ee)||(ee=[ee]),re.rank!==ee.length)throw new ValueError(`The length of input n (${ee.length}) does not match the number of dimensions in input x (${re.rank})`);return tile$3(re,ee)}function randomNormal(re,ee=0,ne=1,ae,ce){return randomNormal$1(re,ee,ne,ae,ce)}function dot(re,ee,ne,ae){if(re.rank<2||ee.rank<2)throw new NotImplementedError(`dot requires both inputs to be rank >= 2 but got x shape = ${re.shape} and y shape = ${ee.shape}`);if(ee.rank>=3){const ce=re.shape.slice(-1)[0],le=ee.shape.slice(-2)[0];if(ce!==le)throw new NotImplementedError(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${re.shape} and  y shape = ${ee.shape}`)}if(re.rank===2&&ee.rank===2)return matMul({a:re,b:ee,transposeA:!1,transposeB:!1,bias:ae?reshapeBias(re.rank,ae,imageDataFormat()):null,activation:ne});{const ce=re.shape.slice(),le=ce.pop();re=re.reshape([-1,le]);const ue=ee.shape.slice(),he=ue.pop(),fe=ue.pop(),me=[...ue,he],ge=Array.from({length:ee.rank},(Ee,Ce)=>Ce===0?ee.rank-2:Ce<=ee.rank-2?Ce-1:Ce);ee=ee.transpose(ge).reshape([fe,-1]);const ve=[...ce,...me];return matMul({a:re,b:ee,transposeA:!1,transposeB:!1,bias:ae?reshapeBias(re.rank,ae,imageDataFormat()):null,activation:ne}).reshape(ve)}}function gather(re,ee,ne){return tidy(()=>(Array.isArray(ee)?ee=tensor1d(ee,"int32"):ee=ee.toInt(),gather$1(re,ee,ne)))}function square$2(re){return mul(re,re)}function reshapeBias(re,ee,ne){const ae=ee.shape;if(ee.rank!==1&&ee.rank!==re)throw new ValueError(`Unexpected bias dimensions: ${ee.rank}; expected it to be 1 or ${re}`);if(re===5){if(ne==="channelsFirst")return ae.length===1?ee.reshape([1,ae[0],1,1,1]):ee.reshape([1,ae[3],ae[0],ae[1],ae[2]]);if(ne==="channelsLast")return ae.length===1?ee.reshape([1,1,1,1,ae[0]]):ee.reshape([1].concat(ae))}else if(re===4){if(ne==="channelsFirst")return ae.length===1?ee.reshape([1,ae[0],1,1]):ee.reshape([1,ae[2],ae[0],ae[1]]);if(ne==="channelsLast")return ae.length===1?ee.reshape([1,1,1,ae[0]]):ee.reshape([1].concat(ae))}else if(re===3){if(ne==="channelsFirst")return ae.length===1?ee.reshape([1,ae[0],1]):ee.reshape([1,ae[1],ae[0]]);if(ne==="channelsLast")return ae.length===1?ee.reshape([1,1,ae[0]]):ee.reshape([1].concat(ae))}else if(re<3)return ee;throw new ValueError(`Unsupported input rank by biasAdd: ${ee.rank}`)}function biasAdd(re,ee,ne){return tidy(()=>(ne==null&&(ne=imageDataFormat()),checkDataFormat(ne),re.add(reshapeBias(re.rank,ee,ne))))}function elu$2(re,ee=1){if(ee!==1)throw new NotImplementedError(`Support for alpha values other than 1 (${ee}) is not implemented yet.`);return elu$3(re)}function softsign(re){return tidy(()=>div$1(re,abs$3(re).add(1)))}function dropout(re,ee,ne,ae){return tidy(()=>dropout$1(re,ee,ne,ae))}function hardSigmoid(re){return tidy(()=>{const ee=add$1(.5,mul(.2,re));return clipByValue$1(ee,0,1)})}function inTrainPhase(re,ee,ne=!1){return ne?re():ee()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const VALID_FAN_MODE_VALUES=["fanIn","fanOut","fanAvg"],VALID_DISTRIBUTION_VALUES=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function checkFanMode(re){checkStringTypeUnionValue(VALID_FAN_MODE_VALUES,"FanMode",re)}function checkDistribution(re){checkStringTypeUnionValue(VALID_DISTRIBUTION_VALUES,"Distribution",re)}class Initializer extends Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Zeros extends Initializer{apply(ee,ne){return zeros$1(ee,ne)}}Zeros.className="Zeros";registerClass(Zeros);class Ones extends Initializer{apply(ee,ne){return ones(ee,ne)}}Ones.className="Ones";registerClass(Ones);class Constant extends Initializer{constructor(ee){if(super(),typeof ee!="object")throw new ValueError(`Expected argument of type ConstantConfig but got ${ee}`);if(ee.value===void 0)throw new ValueError(`config must have value set but got ${ee}`);this.value=ee.value}apply(ee,ne){return tidy(()=>mul(scalar(this.value),ones(ee,ne)))}getConfig(){return{value:this.value}}}Constant.className="Constant";registerClass(Constant);class RandomUniform extends Initializer{constructor(ee){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=ee.minval||this.DEFAULT_MINVAL,this.maxval=ee.maxval||this.DEFAULT_MAXVAL,this.seed=ee.seed}apply(ee,ne){return randomUniform(ee,this.minval,this.maxval,ne)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}RandomUniform.className="RandomUniform";registerClass(RandomUniform);class RandomNormal extends Initializer{constructor(ee){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=ee.mean||this.DEFAULT_MEAN,this.stddev=ee.stddev||this.DEFAULT_STDDEV,this.seed=ee.seed}apply(ee,ne){if(ne=ne||"float32",ne!=="float32"&&ne!=="int32")throw new NotImplementedError(`randomNormal does not support dType ${ne}.`);return randomNormal(ee,this.mean,this.stddev,ne,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}RandomNormal.className="RandomNormal";registerClass(RandomNormal);class TruncatedNormal extends Initializer{constructor(ee){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=ee.mean||this.DEFAULT_MEAN,this.stddev=ee.stddev||this.DEFAULT_STDDEV,this.seed=ee.seed}apply(ee,ne){if(ne=ne||"float32",ne!=="float32"&&ne!=="int32")throw new NotImplementedError(`truncatedNormal does not support dType ${ne}.`);return truncatedNormal(ee,this.mean,this.stddev,ne,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}TruncatedNormal.className="TruncatedNormal";registerClass(TruncatedNormal);class Identity extends Initializer{constructor(ee){super(),this.gain=ee.gain!=null?ee.gain:1}apply(ee,ne){return tidy(()=>{if(ee.length!==2||ee[0]!==ee[1])throw new ValueError("Identity matrix initializer can only be used for 2D square matrices.");return mul(this.gain,eye(ee[0]))})}getConfig(){return{gain:this.gain}}}Identity.className="Identity";registerClass(Identity);function computeFans(re,ee="channelsLast"){let ne,ae;if(checkDataFormat(ee),re.length===2)ne=re[0],ae=re[1];else if([3,4,5].indexOf(re.length)!==-1){if(ee==="channelsFirst"){const ce=arrayProd(re,2);ne=re[1]*ce,ae=re[0]*ce}else if(ee==="channelsLast"){const ce=arrayProd(re,0,re.length-2);ne=re[re.length-2]*ce,ae=re[re.length-1]*ce}}else{const ce=arrayProd(re);ne=Math.sqrt(ce),ae=Math.sqrt(ce)}return[ne,ae]}class VarianceScaling extends Initializer{constructor(ee){if(super(),ee.scale<0)throw new ValueError(`scale must be a positive float. Got: ${ee.scale}`);this.scale=ee.scale==null?1:ee.scale,this.mode=ee.mode==null?"fanIn":ee.mode,checkFanMode(this.mode),this.distribution=ee.distribution==null?"normal":ee.distribution,checkDistribution(this.distribution),this.seed=ee.seed}apply(ee,ne){const ae=computeFans(ee),ce=ae[0],le=ae[1];let ue=this.scale;if(this.mode==="fanIn"?ue/=Math.max(1,ce):this.mode==="fanOut"?ue/=Math.max(1,le):ue/=Math.max(1,(ce+le)/2),this.distribution==="normal"){const he=Math.sqrt(ue);if(ne=ne||"float32",ne!=="float32"&&ne!=="int32")throw new NotImplementedError(`${this.getClassName()} does not support dType ${ne}.`);return truncatedNormal(ee,0,he,ne,this.seed)}else{const he=Math.sqrt(3*ue);return randomUniform(ee,-he,he,ne)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}VarianceScaling.className="VarianceScaling";registerClass(VarianceScaling);class GlorotUniform extends VarianceScaling{constructor(ee){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:ee==null?null:ee.seed})}getClassName(){return VarianceScaling.className}}GlorotUniform.className="GlorotUniform";registerClass(GlorotUniform);class GlorotNormal extends VarianceScaling{constructor(ee){super({scale:1,mode:"fanAvg",distribution:"normal",seed:ee==null?null:ee.seed})}getClassName(){return VarianceScaling.className}}GlorotNormal.className="GlorotNormal";registerClass(GlorotNormal);class HeNormal extends VarianceScaling{constructor(ee){super({scale:2,mode:"fanIn",distribution:"normal",seed:ee==null?null:ee.seed})}getClassName(){return VarianceScaling.className}}HeNormal.className="HeNormal";registerClass(HeNormal);class HeUniform extends VarianceScaling{constructor(ee){super({scale:2,mode:"fanIn",distribution:"uniform",seed:ee==null?null:ee.seed})}getClassName(){return VarianceScaling.className}}HeUniform.className="HeUniform";registerClass(HeUniform);class LeCunNormal extends VarianceScaling{constructor(ee){super({scale:1,mode:"fanIn",distribution:"normal",seed:ee==null?null:ee.seed})}getClassName(){return VarianceScaling.className}}LeCunNormal.className="LeCunNormal";registerClass(LeCunNormal);class LeCunUniform extends VarianceScaling{constructor(ee){super({scale:1,mode:"fanIn",distribution:"uniform",seed:ee==null?null:ee.seed})}getClassName(){return VarianceScaling.className}}LeCunUniform.className="LeCunNormal";registerClass(LeCunUniform);class Orthogonal extends Initializer{constructor(ee){if(super(),this.DEFAULT_GAIN=1,this.gain=ee.gain==null?this.DEFAULT_GAIN:ee.gain,this.seed=ee.seed,this.seed!=null)throw new NotImplementedError("Random seed is not implemented for Orthogonal Initializer yet.")}apply(ee,ne){return tidy(()=>{if(ee.length<2)throw new NotImplementedError("Shape must be at least 2D.");ee[0]*ee[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${ee[0]*ee[1]}) elements: Slowness may result.`);const ae=ee[0]>ee[1]?[ee[1],ee[0]]:ee,ce=randomNormal(ae,0,1,"float32");let le=linalg.gramSchmidt(ce);return ee[0]>ee[1]&&(le=le.transpose()),mul(this.gain,le)})}getConfig(){return{gain:this.gain,seed:this.seed}}}Orthogonal.className="Orthogonal";registerClass(Orthogonal);const INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function deserializeInitializer(re,ee={}){return deserializeKerasObject(re,SerializationMap.getMap().classNameMap,ee,"initializer")}function serializeInitializer(re){return serializeKerasObject(re)}function getInitializer(re){if(typeof re=="string"){const ee=re in INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP?INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP[re]:re;if(ee==="GlorotNormal")return new GlorotNormal;if(ee==="GlorotUniform")return new GlorotUniform;if(ee==="HeNormal")return new HeNormal;if(ee==="HeUniform")return new HeUniform;if(ee==="LeCunNormal")return new LeCunNormal;if(ee==="LeCunUniform")return new LeCunUniform;{const ne={};return ne.className=ee,ne.config={},deserializeInitializer(ne)}}else return re instanceof Initializer?re:deserializeInitializer(re)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let _nextUniqueTensorId=0;function getNextUniqueTensorId(){return _nextUniqueTensorId++}const _uidPrefixes={};function getUid(re=""){return re in _uidPrefixes||(_uidPrefixes[re]=0),_uidPrefixes[re]+=1,re+_uidPrefixes[re].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isArrayOfShapes(re){return Array.isArray(re)&&Array.isArray(re[0])}function normalizeShapeList(re){return re.length===0?[]:Array.isArray(re[0])?re:[re]}function getExactlyOneTensor(re){let ee;if(Array.isArray(re)){if(re.length!==1)throw new ValueError(`Expected Tensor length to be 1; got ${re.length}`);ee=re[0]}else ee=re;return ee}function getExactlyOneShape(re){if(Array.isArray(re)&&Array.isArray(re[0])){if(re.length===1)return re=re,re[0];throw new ValueError(`Expected exactly 1 Shape; got ${re.length}`)}else return re}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function countParamsInWeights(re){let ee=0;for(const ne of re)ne.shape.length===0?ee+=1:ee+=ne.shape.reduce((ae,ce)=>ae*ce);return ee}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const DEFAULT_VARIABLE_NAME_PREFIX="Variable";class LayerVariable{constructor(ee,ne="float32",ae=DEFAULT_VARIABLE_NAME_PREFIX,ce=!0,le=null){this.dtype=ne??"float32",this.shape=ee.shape,this.id=getNextUniqueTensorId(),ae=ae??DEFAULT_VARIABLE_NAME_PREFIX,this.originalName=getScopedTensorName(ae),this.name=getUniqueTensorName(this.originalName),this.trainable_=ce,this.constraint=le,this.val=variable(ee,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(ee){return this.assertNotDisposed(),checkShapesMatch(this.val,ee),this.val.id!==ee.id&&(this.val.assign(ee),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(ee){this.trainable_=ee,this.val.trainable=ee}}function checkShapesMatch(re,ee){if(re.shape.toString()!==ee.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(re.shape)+" vs. "+JSON.stringify(ee.shape))}function batchGetValue(re){return re.map(ee=>ee.read())}function batchSetValue(re){re.forEach(ee=>{ee[0].write(ee[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class InputSpec{constructor(ee){this.dtype=ee.dtype,this.shape=ee.shape,ee.shape!=null?this.ndim=ee.shape.length:this.ndim=ee.ndim,this.maxNDim=ee.maxNDim,this.minNDim=ee.minNDim,this.axes=ee.axes||{}}}class SymbolicTensor{constructor(ee,ne,ae,ce,le,ue,he){this.dtype=ee,this.shape=ne,this.sourceLayer=ae,this.inputs=ce,this.callArgs=le,this.outputTensorIndex=he,this.id=getNextUniqueTensorId(),ue!=null&&(this.originalName=getScopedTensorName(ue),this.name=getUniqueTensorName(this.originalName)),this.rank=ne.length}}let _nextNodeID=0,Node$1=class{constructor(ee,ne){this.callArgs=ne,this.id=_nextNodeID++,this.outboundLayer=ee.outboundLayer,this.inboundLayers=ee.inboundLayers,this.nodeIndices=ee.nodeIndices,this.tensorIndices=ee.tensorIndices,this.inputTensors=ee.inputTensors,this.outputTensors=ee.outputTensors,this.inputMasks=ee.inputMasks,this.outputMasks=ee.outputMasks,this.inputShapes=ee.inputShapes,this.outputShapes=ee.outputShapes;for(const ae of ee.inboundLayers)ae!=null&&ae.outboundNodes.push(this);ee.outboundLayer.inboundNodes.push(this)}getConfig(){const ee=[];for(const ne of this.inboundLayers)ne!=null?ee.push(ne.name):ee.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:ee,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},_nextLayerID=0;class Layer extends Serializable{constructor(ee={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=_nextLayerID++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let ne=ee.name;if(!ne){const ae=this.getClassName();ne=toSnakeCase(ae)+"_"+getUid(ae)}if(this.name=ne,this.trainable_=ee.trainable==null?!0:ee.trainable,ee.inputShape!=null||ee.batchInputShape!=null){let ae;if(ee.batchInputShape!=null)ae=ee.batchInputShape;else if(ee.inputShape!=null){let le=null;ee.batchSize!=null&&(le=ee.batchSize),ae=[le].concat(ee.inputShape)}this.batchInputShape=ae;let ce=ee.dtype;ce==null&&(ce=ee.inputDType),ce==null&&(ce="float32"),this.dtype=ce}ee.weights!=null?this.initialWeights=ee.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(ee,ne){return ee.name+"_ib-"+ne.toString()}getNodeAtIndex(ee,ne){if(this.inboundNodes.length===0)throw new RuntimeError(`The layer has never been called and thus has no defined ${ne}.`);if(this.inboundNodes.length<=ee)throw new ValueError(`Asked to get ${ne} at node ${ee}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[ee]}getInputAt(ee){return singletonOrArray(this.getNodeAtIndex(ee,"input").inputTensors)}getOutputAt(ee){return singletonOrArray(this.getNodeAtIndex(ee,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new AttributeError(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new AttributeError(`Layer ${this.name} is not connected, no input to return.`);return singletonOrArray(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new AttributeError(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new AttributeError(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return singletonOrArray(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(ee=>ee())}get updates(){return this._updates}get built(){return this._built}set built(ee){this._built=ee}get trainable(){return this.trainable_}set trainable(ee){this._trainableWeights.forEach(ne=>ne.trainable=ee),this.trainable_=ee}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(ee=>ee.trainable):[]}set trainableWeights(ee){this._trainableWeights=ee}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(ee=>!ee.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(ee){this._nonTrainableWeights=ee}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(ee){if(ee=toList(ee),this.inputSpec==null||this.inputSpec.length===0)return;const ne=toList(this.inputSpec);if(ee.length!==ne.length)throw new ValueError(`Layer ${this.name} expects ${ne.length} inputs, but it received ${ee.length} input tensors. Input received: ${ee}`);for(let ae=0;ae<ee.length;ae++){const ce=ee[ae],le=ne[ae];if(le==null)continue;const ue=ce.rank;if(le.ndim!=null&&ue!==le.ndim)throw new ValueError(`Input ${ae} is incompatible with layer ${this.name}: expected ndim=${le.ndim}, found ndim=${ue}`);if(le.maxNDim!=null&&ue>le.maxNDim)throw new ValueError(`Input ${ae} is incompatible with layer ${this.name}: expected max_ndim=${le.maxNDim}, found ndim=${ue}`);if(le.minNDim!=null&&ue<le.minNDim)throw new ValueError(`Input ${ae} is incompatible with layer ${this.name}: expected min_ndim=${le.minNDim}, found ndim=${ue}.`);if(le.dtype!=null&&ce.dtype!==le.dtype)throw new ValueError(`Input ${ae} is incompatible with layer ${this.name} : expected dtype=${le.dtype}, found dtype=${ce.dtype}.`);if(le.axes){const he=ce.shape;for(const fe in le.axes){const me=Number(fe),ge=le.axes[fe],ve=me>=0?he[me]:he[he.length+me];if(ge!=null&&[ge,null].indexOf(ve)===-1)throw new ValueError(`Input ${ae} is incompatible with layer ${this.name}: expected axis ${me} of input shape to have value ${ge} but got shape ${he}.`)}}if(le.shape!=null)for(let he=0;he<le.shape.length;++he){const fe=le.shape[he],me=ce.shape[he];if(fe!=null&&me!=null&&fe!==me)throw new ValueError(`Input ${ae} is incompatible with layer ${this.name}: expected shape=${le.shape}, found shape=${ce.shape}.`)}}}call(ee,ne){return ee}invokeCallHook(ee,ne){this._callHook!=null&&this._callHook(ee,ne)}setCallHook(ee){this._callHook=ee}clearCallHook(){this._callHook=null}apply(ee,ne){ne=ne||{},this.assertNotDisposed();const ae=toList(ee);let ce=!0;for(const ue of ae)if(!(ue instanceof SymbolicTensor)){ce=!1;break}let le=!0;for(const ue of ae)if(ue instanceof SymbolicTensor){le=!1;break}if(ce===le)throw new ValueError("Arguments to apply() must be all SymbolicTensors or all Tensors");return nameScope(this.name,()=>{if(!this.built){this.assertInputCompatibility(ee);const ue=[];for(const he of toList(ee))ue.push(he.shape);this.build(singletonOrArray(ue)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&le&&(this._refCount=1)}if(this.assertInputCompatibility(ee),le){let ue=this.call(ee,ne);const he=toList(ue),fe=[];for(let me of he)ae.indexOf(me)!==-1&&(me=me.clone()),fe.push(me);if(ue=singletonOrArray(fe),this.activityRegularizer!=null)throw new NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return ue}else{const ue=collectInputShape(ee),he=this.computeOutputShape(ue);let fe;const me=guessOutputDType(ee);if(this.warnOnIncompatibleInputShape(Array.isArray(ee)?ue[0]:ue),he!=null&&he.length>0&&Array.isArray(he[0])?fe=he.map((ge,ve)=>new SymbolicTensor(me,ge,this,toList(ee),ne,this.name,ve)):fe=new SymbolicTensor(me,he,this,toList(ee),ne,this.name),this.addInboundNode(ee,fe,null,null,ue,he,ne),this._refCount++,this.activityRegularizer!=null)throw new NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return fe}})}warnOnIncompatibleInputShape(ee){if(this.batchInputShape!=null)if(ee.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(ee)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let ne=!1;this.batchInputShape.forEach((ae,ce)=>{ae!=null&&ee[ce]!=null&&ee[ce]!==ae&&(ne=!0)}),ne&&console.warn(`The shape of the input tensor (${JSON.stringify(ee)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new AttributeError(`The layer ${this.name} has never been called and thus has no defined output shape.`);const ee=[];for(const ne of this.inboundNodes){const ae=JSON.stringify(ne.outputShapes);ee.indexOf(ae)===-1&&ee.push(ae)}if(ee.length===1){const ne=this.inboundNodes[0].outputShapes;return Array.isArray(ne)&&Array.isArray(ne[0])&&ne.length===1?ne[0]:ne}else throw new AttributeError(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new RuntimeError(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return countParamsInWeights(this.weights)}build(ee){this.built=!0}getWeights(ee=!1){return batchGetValue(ee?this.trainableWeights:this.weights)}setWeights(ee){tidy(()=>{const ne=this.weights;if(ne.length!==ee.length)throw new ValueError(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${ee.length}, but the layer was expecting ${ne.length} weights. Provided weights: ${ee}...`);if(ne.length===0)return;const ae=[],ce=batchGetValue(ne);for(let le=0;le<ce.length;++le){const ue=ce[le],he=ne[le],fe=ee[le];if(!arraysEqual(ue.shape,fe.shape))throw new ValueError(`Layer weight shape ${ue.shape} not compatible with provided weight shape ${fe.shape}`);ae.push([he,fe])}batchSetValue(ae)})}addWeight(ee,ne,ae,ce,le,ue,he){if(this._addedWeightNames.indexOf(ee)!==-1)throw new ValueError(`Duplicate weight name ${ee} for layer ${this.name}`);this._addedWeightNames.push(ee),ae==null&&(ae="float32"),this.fastWeightInitDuringBuild&&(ce=getInitializer("zeros"));const fe=ce.apply(ne,ae),me=new LayerVariable(fe,ae,ee,ue,he);return fe.dispose(),le!=null&&this.addLoss(()=>le.apply(me.read())),ue==null&&(ue=!0),ue?this._trainableWeights.push(me):this._nonTrainableWeights.push(me),me}setFastWeightInitDuringBuild(ee){this.fastWeightInitDuringBuild=ee}addLoss(ee){ee==null||Array.isArray(ee)&&ee.length===0||(ee=toList(ee),this._losses!==void 0&&this._losses!==null&&this.losses.push(...ee))}computeOutputShape(ee){return ee}computeMask(ee,ne){if(!this.supportsMasking){if(ne!=null)if(Array.isArray(ne))ne.forEach(ae=>{if(ae!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return ne}addInboundNode(ee,ne,ae,ce,le,ue,he=null){const fe=toList(ee);ne=toList(ne),ae=toList(ae),ce=toList(ce),le=normalizeShapeList(le),ue=normalizeShapeList(ue);const me=[],ge=[],ve=[];for(const ye of fe)me.push(ye.sourceLayer),ge.push(ye.nodeIndex),ve.push(ye.tensorIndex);new Node$1({outboundLayer:this,inboundLayers:me,nodeIndices:ge,tensorIndices:ve,inputTensors:fe,outputTensors:ne,inputMasks:ae,outputMasks:ce,inputShapes:le,outputShapes:ue},he);for(let ye=0;ye<ne.length;ye++)ne[ye].sourceLayer=this,ne[ye].nodeIndex=this.inboundNodes.length-1,ne[ye].tensorIndex=ye}getConfig(){const ee={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(ee.batchInputShape=this.batchInputShape),this.dtype!=null&&(ee.dtype=this.dtype),ee}disposeWeights(){return this.weights.forEach(ee=>ee.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let ee=0;return--this._refCount===0&&(ee=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:ee}}}function collectInputShape(re){re=toList(re);const ee=[];for(const ne of re)ee.push(ne.shape);return singletonOrArray(ee)}function guessOutputDType(re){return"float32"}function getSourceInputs(re,ee,ne){if((ee==null||ne!=null&&ne>0)&&(ee=re.sourceLayer,ne=re.nodeIndex),ee.inboundNodes.length===0)return[re];{const ae=ee.inboundNodes[ne];if(ae.inboundLayers.length===0)return ae.inputTensors;{const ce=[];for(let le=0;le<ae.inboundLayers.length;le++){const ue=ae.inputTensors[le],he=ae.inboundLayers[le],fe=ae.nodeIndices[le],me=getSourceInputs(ue,he,fe);for(const ge of me)ce.indexOf(ge)===-1&&ce.push(ge)}return ce}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class InputLayer extends Layer{constructor(ee){if(super({dtype:ee.dtype,name:ee.name!=null?ee.name:getUid("input").toString()}),ee.batchSize==null&&(ee.batchSize=null),ee.sparse==null&&(ee.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=ee.sparse,ee.inputShape!=null&&ee.batchInputShape!=null)throw new ValueError("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let ne=ee.batchInputShape;if(ne==null){if(ee.inputShape==null)throw new ValueError("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");ne=[ee.batchSize].concat(ee.inputShape)}else if(ee.batchSize!=null)throw new ValueError("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const ae=ee.dtype||"float32";this.batchInputShape=ne,this.dtype=ae,this.inputSpec=[{shape:ne}];const ce=new SymbolicTensor(this.dtype,this.batchInputShape,this,[],{},this.name);ce.nodeIndex=0,ce.tensorIndex=0,new Node$1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[ce],outputTensors:[ce],inputMasks:[null],outputMasks:[null],inputShapes:[ne],outputShapes:[ne]})}apply(ee,ne){throw new ValueError(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}InputLayer.className="InputLayer";registerClass(InputLayer);function Input$3(re){if(re.batchShape==null&&re.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(re.batchShape!=null&&re.shape!=null)throw new ValueError("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let ee=re.batchShape;re.shape!=null&&ee==null&&(ee=[null].concat(re.shape));let ne=re.dtype;return ne==null&&(ne="float32"),new InputLayer({batchInputShape:ee,name:re.name,dtype:ne,sparse:re.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function resolveScalarsInLogs(re){if(re==null)return;const ee=[],ne=[],ae=[];for(const ce in re){const le=re[ce];if(typeof le!="number"){const ue=le;ee.push(ue.data()),ne.push(ce),ae.push(ue)}}if(ee.length>0){const ce=await Promise.all(ee);for(let le=0;le<ce.length;++le)re[ne[le]]=ce[le][0];dispose(ae)}}function disposeTensorsInLogs(re){if(re!=null)for(const ee in re){const ne=re[ee];typeof ne!="number"&&ne.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var ModelLoggingVerbosity;(function(re){re[re.SILENT=0]="SILENT",re[re.VERBOSE=1]="VERBOSE"})(ModelLoggingVerbosity||(ModelLoggingVerbosity={}));const DEFAULT_YIELD_EVERY_MS=125;class BaseCallback{constructor(){this.validationData=null}setParams(ee){this.params=ee}async onEpochBegin(ee,ne){}async onEpochEnd(ee,ne){}async onBatchBegin(ee,ne){}async onBatchEnd(ee,ne){}async onTrainBegin(ee){}async onTrainEnd(ee){}setModel(ee){}}class CallbackList{constructor(ee,ne=10){ee==null&&(ee=[]),this.callbacks=ee,this.queueLength=ne}append(ee){this.callbacks.push(ee)}setParams(ee){for(const ne of this.callbacks)ne.setParams(ee)}setModel(ee){for(const ne of this.callbacks)ne.setModel(ee)}async onEpochBegin(ee,ne){ne==null&&(ne={});for(const ae of this.callbacks)await ae.onEpochBegin(ee,ne)}async onEpochEnd(ee,ne){ne==null&&(ne={});for(const ae of this.callbacks)await ae.onEpochEnd(ee,ne)}async onBatchBegin(ee,ne){ne==null&&(ne={});for(const ae of this.callbacks)await ae.onBatchBegin(ee,ne)}async onBatchEnd(ee,ne){ne==null&&(ne={});for(const ae of this.callbacks)await ae.onBatchEnd(ee,ne)}async onTrainBegin(ee){ee==null&&(ee={});for(const ne of this.callbacks)await ne.onTrainBegin(ee)}async onTrainEnd(ee){ee==null&&(ee={});for(const ne of this.callbacks)await ne.onTrainEnd(ee)}}class BaseLogger extends BaseCallback{constructor(){super()}async onEpochBegin(ee){this.seen=0,this.totals={}}async onBatchEnd(ee,ne){ne==null&&(ne={});const ae=ne.size==null?0:ne.size;this.seen+=ae;for(const ce in ne){const le=ne[ce];if(typeof le=="number")this.totals.hasOwnProperty(ce)||(this.totals[ce]=0),this.totals[ce]=this.totals[ce]+le*ae;else{let ue;ce in this.totals?ue=this.totals[ce]:this.totals[ce]=0;const he=tidy(()=>add$1(this.totals[ce],mul(le,ae)));this.totals[ce]=he,ue!=null&&ue.dispose()}}}async onEpochEnd(ee,ne){if(ne!=null)for(const ae of this.params.metrics)this.totals[ae]!=null&&(typeof this.totals[ae]=="number"?ne[ae]=this.totals[ae]/this.seen:tidy(()=>{const ce=mul(div$1(1,this.seen),this.totals[ae]);ne[ae]=ce,this.totals[ae].dispose(),keep(ne[ae])}))}}let History$1=class extends BaseCallback{async onTrainBegin(ee){this.epoch=[],this.history={}}async onEpochEnd(ee,ne){ne==null&&(ne={}),this.epoch.push(ee);for(const ae in ne)this.history[ae]==null&&(this.history[ae]=[]),this.history[ae].push(ne[ae])}async syncData(){const ee=[],ne=[],ae=[];for(const le in this.history){const ue=this.history[le];for(let he=0;he<ue.length;++he)if(typeof ue[he]!="number"){const fe=ue[he];ee.push(fe.data()),ne.push(le),ae.push(he)}}const ce=await Promise.all(ee);for(let le=0;le<ce.length;++le)this.history[ne[le]][ae[le]].dispose(),this.history[ne[le]][ae[le]]=ce[le][0]}};class CustomCallback extends BaseCallback{constructor(ee,ne){if(super(),this.currentEpoch=0,this.yieldEvery=ne||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=DEFAULT_YIELD_EVERY_MS),this.yieldEvery==="never"&&ee.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");isNumber$3(this.yieldEvery)&&(this.maybeWait=debounce(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=ee.onTrainBegin,this.trainEnd=ee.onTrainEnd,this.epochBegin=ee.onEpochBegin,this.epochEnd=ee.onEpochEnd,this.batchBegin=ee.onBatchBegin,this.batchEnd=ee.onBatchEnd,this.yield=ee.onYield}async maybeWait(ee,ne,ae){const ce=[];this.yield!=null&&(await resolveScalarsInLogs(ae),ce.push(this.yield(ee,ne,ae))),ce.push(nextFrame()),await Promise.all(ce)}async onEpochBegin(ee,ne){this.currentEpoch=ee,this.epochBegin!=null&&(await resolveScalarsInLogs(ne),await this.epochBegin(ee,ne))}async onEpochEnd(ee,ne){const ae=[];this.epochEnd!=null&&(await resolveScalarsInLogs(ne),ae.push(this.epochEnd(ee,ne))),this.yieldEvery==="epoch"&&ae.push(nextFrame()),await Promise.all(ae)}async onBatchBegin(ee,ne){this.batchBegin!=null&&(await resolveScalarsInLogs(ne),await this.batchBegin(ee,ne))}async onBatchEnd(ee,ne){const ae=[];this.batchEnd!=null&&(await resolveScalarsInLogs(ne),ae.push(this.batchEnd(ee,ne))),this.yieldEvery==="batch"?ae.push(nextFrame()):isNumber$3(this.yieldEvery)&&ae.push(this.maybeWait(this.currentEpoch,ee,ne)),await Promise.all(ae)}async onTrainBegin(ee){this.trainBegin!=null&&(await resolveScalarsInLogs(ee),await this.trainBegin(ee))}async onTrainEnd(ee){this.trainEnd!=null&&(await resolveScalarsInLogs(ee),await this.trainEnd(ee))}}function standardizeCallbacks(re,ee){return re==null&&(re={}),re instanceof BaseCallback?[re]:Array.isArray(re)&&re[0]instanceof BaseCallback?re:toList(re).map(ae=>new CustomCallback(ae,ee))}class CallbackConstructorRegistry{constructor(){}static registerCallbackConstructor(ee,ne){assert$2(ee>=0&&Number.isInteger(ee),()=>`Verbosity level is expected to be an integer >= 0, but got ${ee}`),CallbackConstructorRegistry.checkForDuplicate(ne),CallbackConstructorRegistry.constructors[ee]==null&&(CallbackConstructorRegistry.constructors[ee]=[]),CallbackConstructorRegistry.constructors[ee].push(ne)}static checkForDuplicate(ee){for(const ne in CallbackConstructorRegistry.constructors)CallbackConstructorRegistry.constructors[+ne].forEach(ce=>{if(ce===ee)throw new ValueError("Duplicate callback constructor.")})}static clear(){CallbackConstructorRegistry.constructors={}}static createCallbacks(ee){const ne=[];for(const ae in CallbackConstructorRegistry.constructors){const ce=+ae;ee>=ce&&ne.push(...CallbackConstructorRegistry.constructors[ce])}return ne.map(ae=>new ae)}}CallbackConstructorRegistry.constructors={};function configureCallbacks(re,ee,ne,ae,ce,le,ue,he,fe){const me=new History$1,ge=[new BaseLogger,...CallbackConstructorRegistry.createCallbacks(ee)];re!=null&&ge.push(...re),ge.push(me);const ve=new CallbackList(ge);return ve.setParams({epochs:ne,initialEpoch:ae,samples:ce,steps:le,batchSize:ue,verbose:ee,doValidation:he,metrics:fe}),{callbackList:ve,history:me}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function deserialize(re,ee={},ne=!1){return deserializeKerasObject(re,SerializationMap.getMap().classNameMap,ee,"layer",ne)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function l2Normalize(re,ee){return tidy(()=>{re.dtype!=="float32"&&(re=re.asType("float32"));const ne=sum$2(square$2(re),ee,!0),ae=fill$3(ne.shape,epsilon$1()),ce=sqrt$2(maximum$2(ne,ae));return div$1(re,ce)})}function meanSquaredError(re,ee){return tidy(()=>mean$1(square$2(sub$2(ee,re)),-1))}function meanAbsoluteError(re,ee){return tidy(()=>mean$1(abs$3(sub$2(ee,re)),-1))}function meanAbsolutePercentageError(re,ee){return tidy(()=>{const ne=sub$2(re,ee),ae=clipByValue$1(abs$3(re),epsilon$1(),Number.MAX_VALUE),ce=abs$3(div$1(ne,ae));return mul(100,mean$1(ce,-1))})}function meanSquaredLogarithmicError(re,ee){return tidy(()=>{const ne=clipByValue$1(ee,epsilon$1(),Number.MAX_VALUE),ae=log$5(add$1(1,ne)),ce=clipByValue$1(re,epsilon$1(),Number.MAX_VALUE),le=log$5(add$1(1,ce));return mean$1(square$2(sub$2(ae,le)),-1)})}function squaredHinge(re,ee){return tidy(()=>{const ne=maximum$2(0,sub$2(1,mul(re,ee)));return mean$1(square$2(ne),-1)})}function hinge(re,ee){return tidy(()=>{const ne=maximum$2(0,sub$2(1,mul(re,ee)));return mean$1(ne,-1)})}function categoricalHinge(re,ee){return tidy(()=>{const ne=sum$2(mul(re,ee),-1),ae=max$4(mul(sub$2(1,re),ee),-1);return maximum$2(0,add$1(1,sub$2(ae,ne)))})}function logcosh(re,ee){return tidy(()=>{const ne=Math.log(2),ae=sub$2(ee,re),ce=sub$2(add$1(ae,softplus$2(mul(-2,ae))),ne);return mean$1(ce,-1)})}function categoricalCrossentropy$1(re,ee,ne=!1){return tidy(()=>{if(ne)ee=softmax$2(ee);else{const ae=sum$2(ee,ee.shape.length-1,!0);ee=div$1(ee,ae)}return ee=clipByValue$1(ee,epsilon$1(),1-epsilon$1()),neg$2(sum$2(mul(re.toFloat(),log$5(ee)),ee.shape.length-1))})}function sparseCategoricalCrossentropy$1(re,ee,ne=!1){return tidy(()=>{const ae=floor$3(flatten$1(re)).toInt();ee=clipByValue$1(ee,epsilon$1(),1-epsilon$1());const ce=ee.shape,le=oneHot$2(ae,ce[ce.length-1]).reshape(ce);return categoricalCrossentropy$1(le,ee,ne)})}function sigmoidCrossEntropyWithLogits(re,ee){if(!arraysEqual(re.shape,ee.shape))throw new ValueError(`logits and labels must have the same shape, but got shapes ${JSON.stringify(re.shape)} and ${JSON.stringify(ee.shape)}`);return tidy(()=>{const ne=ee.relu(),ae=ee.abs().neg();return ne.sub(ee.mul(re)).add(ae.exp().log1p())})}function binaryCrossentropy$1(re,ee){return tidy(()=>{let ne;return ne=clipByValue$1(ee,epsilon$1(),1-epsilon$1()),ne=log$5(div$1(ne,sub$2(1,ne))),mean$1(sigmoidCrossEntropyWithLogits(re,ne),-1)})}function kullbackLeiblerDivergence(re,ee){return tidy(()=>{const ne=clipByValue$1(re,epsilon$1(),1),ae=clipByValue$1(ee,epsilon$1(),1);return sum$2(mul(re,log$5(div$1(ne,ae))),-1)})}function poisson(re,ee){return tidy(()=>{const ne=log$5(add$1(epsilon$1(),ee));return mean$1(sub$2(ee,mul(re,ne)),-1)})}function cosineProximity(re,ee){return tidy(()=>{const ne=l2Normalize(re,-1),ae=l2Normalize(ee,-1),ce=mul(ne,ae);return neg$2(sum$2(ce,-1))})}const lossesMap={meanSquaredError,meanAbsoluteError,meanAbsolutePercentageError,meanSquaredLogarithmicError,squaredHinge,hinge,categoricalHinge,logcosh,categoricalCrossentropy:categoricalCrossentropy$1,sparseCategoricalCrossentropy:sparseCategoricalCrossentropy$1,binaryCrossentropy:binaryCrossentropy$1,kullbackLeiblerDivergence,poisson,cosineProximity};function get$3(re){if(typeof re=="string"){if(re in lossesMap)return lossesMap[re];let ee=`Unknown loss ${re}`;throw re.toLowerCase().includes("softmaxcrossentropy")&&(ee=`Unknown loss ${re}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ValueError(ee)}else return re}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function binaryAccuracy(re,ee){return tidy(()=>{const ne=mul(.5,onesLike$2(ee)),ae=cast$2(greater$2(ee,ne),re.dtype);return mean$1(equal$2(re,ae),-1)})}function categoricalAccuracy(re,ee){return tidy(()=>cast$2(equal$2(argMax$2(re,-1),argMax$2(ee,-1)),"float32"))}function truePositives(re,ee){return tidy(()=>logicalAnd$2(re.equal(1),ee.equal(1)).sum().cast("float32"))}function falsePositives(re,ee){return tidy(()=>logicalAnd$2(re.equal(0),ee.equal(1)).sum().cast("float32"))}function precision(re,ee){return tidy(()=>{const ne=truePositives(re,ee),ae=falsePositives(re,ee),ce=ne.add(ae);return where(greater$2(ce,0),ne.div(ce),0).cast("float32")})}function binaryCrossentropy(re,ee){return binaryCrossentropy$1(re,ee)}function sparseCategoricalAccuracy(re,ee){return re.rank===ee.rank&&(re=re.squeeze([re.rank-1])),ee=ee.argMax(-1),ee.dtype!==re.dtype&&(ee=ee.asType(re.dtype)),equal$2(re,ee).asType("float32")}const mse=meanSquaredError,MSE=meanSquaredError,mae=meanAbsoluteError,MAE=meanAbsoluteError,mape=meanAbsolutePercentageError,MAPE=meanAbsolutePercentageError,categoricalCrossentropy=categoricalCrossentropy$1,cosine=cosineProximity,sparseCategoricalCrossentropy=sparseCategoricalCrossentropy$1,metricsMap={binaryAccuracy,categoricalAccuracy,precision,categoricalCrossentropy,sparseCategoricalCrossentropy,mse,MSE,mae,MAE,mape,MAPE,cosine};function get$2(re){if(typeof re=="string"&&re in metricsMap)return metricsMap[re];if(typeof re!="string"&&re!=null)return re;throw new ValueError(`Unknown metric ${re}`)}function getLossOrMetricName(re){if(assert$1(re!==null,`Unknown LossOrMetricFn ${re}`),typeof re=="string")return re;{let ee;for(const ne of Object.keys(lossesMap))if(lossesMap[ne]===re){ee=ne;break}if(ee!==void 0)return ee;for(const ne of Object.keys(metricsMap))if(metricsMap[ne]===re){ee=ne;break}return ee!==void 0?ee:re.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function getOptimizer(re){const ee={Adagrad:()=>train.adagrad(.01),Adadelta:()=>train.adadelta(1,.95,epsilon$1()),Adam:()=>train.adam(.001,.9,.999,epsilon$1()),Adamax:()=>train.adamax(.002,.9,.999,epsilon$1(),0),RMSProp:()=>train.rmsprop(.001,.9,0,epsilon$1()),SGD:()=>train.sgd(.01)};if(ee.adagrad=ee.Adagrad,ee.adadelta=ee.Adadelta,ee.adam=ee.Adam,ee.adamax=ee.Adamax,ee.rmsprop=ee.RMSProp,ee.sgd=ee.SGD,re in ee)return ee[re]();throw new ValueError(`Unknown Optimizer ${re}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH=1*1024*1024;function checkUserDefinedMetadata(re,ee,ne=!1){if(re==null||typeof re!="object"||Object.getPrototypeOf(re)!==Object.prototype||!plainObjectCheck(re))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(ne){const ae=JSON.stringify(re);ae.length>MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH&&console.warn(`User-defined metadata of model "${ee}" is too large in size (length=${ae.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH}.`)}}function plainObjectCheck(re){if(re===null)return!0;if(typeof re=="object")if(Object.getPrototypeOf(re)===Object.prototype){const ee=Object.keys(re);for(const ne of ee)if(typeof ne!="string"||!plainObjectCheck(re[ne]))return!1;return!0}else if(Array.isArray(re)){for(const ee of re)if(!plainObjectCheck(ee))return!1;return!0}else return!1;else{const ee=typeof re;return ee==="string"||ee==="number"||ee==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function printSummary(re,ee,ne,ae=console.log){const ce=isModelSequentialLike(re),le=["Layer (type)","Output shape","Param #"];ce?(ee=ee||65,ne=ne||[.45,.85,1]):(ee=ee||98,ne=ne||[.33,.55,.67,1]),ne[ne.length-1]<=1&&(ne=ne.map(ge=>Math.floor(ee*ge)));let ue;if(!ce){le.push("Receives inputs"),ue=[];for(const ge in re.nodesByDepth)ue.push(...re.nodesByDepth[ge])}ae("_".repeat(ee)),printRow(le,ne,ae),ae("=".repeat(ee));const he=re.layers;for(let ge=0;ge<he.length;++ge)ce?printLayerSummary(he[ge],ne,ae):printLayerSummaryWithConnections(he[ge],ne,ue,ae),ae((ge===he.length-1?"=":"_").repeat(ee));re.checkTrainableWeightsConsistency();const fe=countTrainableParams(re),me=countParamsInWeights(re.nonTrainableWeights);ae(`Total params: ${fe+me}`),ae(`Trainable params: ${fe}`),ae(`Non-trainable params: ${me}`),ae("_".repeat(ee))}function countTrainableParams(re){let ee;return re.collectedTrainableWeights!=null?ee=countParamsInWeights(re.collectedTrainableWeights):ee=countParamsInWeights(re.trainableWeights),ee}function isModelSequentialLike(re){let ee=!0;const ne=[],ae=[];for(const ce in re.nodesByDepth)ne.push(re.nodesByDepth[ce]);for(const ce of ne){if(ce.length>1||ce.length===1&&ce[0].inboundLayers.length>1){ee=!1;break}ae.push(...ce)}if(ee)for(const ce of re.layers){let le=!1;for(const ue of ce.inboundNodes)if(ae.indexOf(ue)!==-1)if(le){ee=!1;break}else le=!0;if(!ee)break}return ee}function printRow(re,ee,ne=console.log){let ae="";for(let ce=0;ce<re.length;++ce)ce>0&&(ae=ae.slice(0,ae.length-1)+" "),ae+=re[ce],ae=ae.slice(0,ee[ce]),ae+=" ".repeat(ee[ce]-ae.length);ne(ae)}function printLayerSummary(re,ee,ne){let ae;try{ae=JSON.stringify(re.outputShape)}catch{ae="multiple"}const ce=re.name,le=re.getClassName(),ue=[`${ce} (${le})`,ae,re.countParams().toString()];printRow(ue,ee,ne)}function printLayerSummaryWithConnections(re,ee,ne,ae){let ce;try{ce=JSON.stringify(re.outputShape)}catch{ce="multiple"}const le=[];for(const ge of re.inboundNodes)if(!(ne!=null&&ne.length>0&&ne.indexOf(ge)===-1))for(let ve=0;ve<ge.inboundLayers.length;++ve){const ye=ge.inboundLayers[ve].name,be=ge.nodeIndices[ve],Ee=ge.tensorIndices[ve];le.push(`${ye}[${be}][${Ee}]`)}const ue=re.name,he=re.getClassName(),fe=le.length===0?"":le[0],me=[`${ue} (${he})`,ce,re.countParams().toString(),fe];printRow(me,ee,ae);for(let ge=1;ge<le.length;++ge)printRow(["","","",le[ge]],ee,ae)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isArrayItemInputOrOutputName(re,ee,ne){return(re==="inboundNodes"||re==="outputLayers"||re==="inputLayers")&&ee===0&&typeof ne=="string"}function convertPythonicToTs(re,ee){if(re===null)return null;if(typeof re=="string")return toCamelCase(re);if(typeof re=="number"||typeof re=="boolean")return re;if(re instanceof Array){const ne=[],ae=re.length;for(let ce=0;ce<ae;++ce){const le=re[ce];isArrayItemInputOrOutputName(ee,ce,le)?ne.push(le):ne.push(convertPythonicToTs(le,ee))}return ne}else{const ne={};for(const ae of Object.keys(re)){const ce=re[ae];if(ae==="name"&&typeof ce=="string")ne[ae]=ce;else{const le=toCamelCase(ae);ne[le]=convertPythonicToTs(ce,le)}}return ne}}function convertTsToPythonic(re,ee){if(re==null)return null;if(typeof re=="string")return toSnakeCase(re);if(typeof re=="number"||typeof re=="boolean")return re;if(re instanceof Array){const ne=[],ae=re.length;for(let ce=0;ce<ae;++ce){const le=re[ce];isArrayItemInputOrOutputName(ee,ce,le)?ne.push(le):ne.push(convertTsToPythonic(le,ee))}return ne}else{const ne={};for(const ae of Object.keys(re)){const ce=re[ae],le=toSnakeCase(ae);(ae==="name"||ae==="className")&&typeof ce=="string"?ne[le]=ce:ne[le]=convertTsToPythonic(ce,ae)}return ne}}/** @license See the LICENSE file. */const version$1="2.8.6";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function assertFeedCompatibility(re,ee){if(re.dtype==null||re.dtype===ee.dtype)return ee;try{return cast$3(ee,re.dtype)}catch{throw new ValueError(`The dtype of the feed (${ee.dtype}) can not be cast to the dtype of the key '${re.name}' (${re.dtype}).`)}}class FeedDict{constructor(ee){if(this.id2Value={},this.id2Mask={},this.name2Id={},ee instanceof FeedDict)for(const ne in ee.id2Value)this.id2Value[ne]=ee.id2Value[ne],ne in ee.id2Mask&&(this.id2Mask[ne]=ee.id2Mask[ne]);else{if(ee==null)return;for(const ne of ee)this.add(ne.key,ne.value)}}add(ee,ne,ae){if(this.id2Value[ee.id]==null)this.id2Value[ee.id]=assertFeedCompatibility(ee,ne),this.name2Id[ee.name]=ee.id,ae!=null&&(this.id2Mask[ee.id]=ae);else throw new ValueError(`Duplicate key: name=${ee.name}, id=${ee.id}`);return this}addFeed(ee){this.add(ee.key,ee.value)}hasKey(ee){return this.id2Value[ee.id]!=null}names(){return Object.keys(this.name2Id)}getValue(ee){if(ee instanceof SymbolicTensor){if(this.id2Value[ee.id]==null)throw new ValueError(`Nonexistent key: ${ee.name}`);return this.id2Value[ee.id]}else{const ne=this.name2Id[ee];if(ne==null)throw new ValueError(`Feed dict has no SymbolicTensor name: ${ee}`);return this.id2Value[ne]}}getMask(ee){if(ee instanceof SymbolicTensor){if(this.id2Value[ee.id]==null)throw new ValueError(`Nonexistent key: ${ee.name}`);return this.id2Mask[ee.id]}else{const ne=this.name2Id[ee];if(ne==null)throw new ValueError(`Feed dict has no SymbolicTensor name: ${ee}`);return this.id2Mask[ne]}}disposeMasks(){this.id2Mask!=null&&dispose(this.id2Mask)}}const cachedSorted={},cachedRecipientCounts={};function execute(re,ee,ne,ae){const ce=ne==null?!1:ne.training,le=Array.isArray(re),ue=le?re:[re],he=ue.map(Ee=>Ee.name),fe=[],me=ee.names();for(const Ee of he)me.indexOf(Ee)!==-1?fe.push(ee.getValue(Ee)):fe.push(null);ae!=null&&(ae.maxNumTensors=-1/0,ae.minNumTensors=1/0);const ge=he.join(",")+"|"+ee.names().join(",");let ve,ye;if(cachedSorted[ge]==null){const Ee=getTopologicalSortAndRecipientCounts(ue,ee);ve=Ee.sorted,ye=Ee.recipientCounts,cachedSorted[ge]=ve,cachedRecipientCounts[ge]=ye}ve=cachedSorted[ge],ye={},ce||Object.assign(ye,cachedRecipientCounts[ge]);const be=new FeedDict(ee);for(let Ee=0;Ee<ve.length;++Ee){if(ae!=null){const Le=memory().numTensors;Le>ae.maxNumTensors&&(ae.maxNumTensors=Le),Le<ae.minNumTensors&&(ae.minNumTensors=Le)}const Ce=ve[Ee],Se=Ce.sourceLayer;if(Se instanceof InputLayer)continue;const Te=[],ke=[],Ne=[];let Fe=!1;for(const Le of Ce.inputs){const je=be.getValue(Le),Ge=be.getMask(Le);Te.push(je),ke.push(Ge),Ge!=null&&(Fe=!0),ce||(ye[Le.name]--,ye[Le.name]===0&&!ee.hasKey(Le)&&he.indexOf(Le.name)===-1&&!je.isDisposed&&Le.sourceLayer.stateful!==!0&&Ne.push(je))}Fe&&(ne=ne||{},ne.mask=ke[0]);const De=toList(Se.apply(Te,ne));let Oe=null;Se.supportsMasking&&(Oe=Se.computeMask(Te,ke));const Re=getNodeOutputs(Ce),Be=Array.isArray(Re)?Re:[Re];for(let Le=0;Le<Be.length;++Le){be.hasKey(Be[Le])||be.add(Be[Le],De[Le],Array.isArray(Oe)?Oe[0]:Oe);const je=he.indexOf(Be[Le].name);je!==-1&&(fe[je]=De[Le])}ce||dispose(Ne)}return be.disposeMasks(),le?fe:fe[0]}function getTopologicalSortAndRecipientCounts(re,ee){assert$2(re!=null&&re.length>0,()=>"Expected at least one fetch, got none");let ne=[],ae={};if(re.length===1){const ce=getTopologicalSortAndRecipientCountsForOneFetch(re[0],ee);ne=ce.sorted,ae=ce.recipientMap}else{const ce=new Set;for(const le of re){const{sorted:ue,recipientMap:he}=getTopologicalSortAndRecipientCountsForOneFetch(le,ee);for(const fe of ue)ce.has(fe.name)||(ne.push(fe),ce.add(fe.name));for(const fe in he)ae[fe]==null&&(ae[fe]=new Set),he[fe].forEach(me=>ae[fe].add(me))}}return{sorted:ne,recipientCounts:recipientMap2Counts(ae)}}function recipientMap2Counts(re){const ee={};for(const ne in re)ee[ne]=re[ne].size;return ee}function getTopologicalSortAndRecipientCountsForOneFetch(re,ee){const ne=new Set,ae=[],ce={};for(const he of ee.names())ne.add(he);const le=[],ue=[];for(le.push(re);le.length>0;){const he=le[le.length-1];if(ne.has(he.name)){le.pop();continue}const fe=ue[ue.length-1]===le.length-1;if(he.inputs.length===0||fe)le.pop(),ae.push(he),ne.add(he.name),fe&&ue.pop();else{ue.push(le.length-1);for(const me of he.inputs)ce[me.name]==null&&(ce[me.name]=new Set),ce[me.name].add(he.name),!ne.has(me.name)&&le.push(me)}}return{sorted:ae,recipientMap:ce}}function getNodeOutputs(re){let ee;if(re.sourceLayer.inboundNodes.length===1)ee=re.sourceLayer.output;else{let ne=null;for(let ae=0;ae<re.sourceLayer.inboundNodes.length;++ae)for(const ce of re.sourceLayer.inboundNodes[ae].outputTensors)if(ce.id===re.id){ne=ae;break}ee=re.sourceLayer.getOutputAt(ne)}return ee}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Container extends Layer{constructor(ee){if(super({}),this.containerNodes=new Set,this.name=ee.name,this.name==null){const ke=this.getClassName().toLowerCase();this.name=getUid(ke)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(ee.inputs)?this.inputs=ee.inputs.slice():this.inputs=[ee.inputs],Array.isArray(ee.outputs)?this.outputs=ee.outputs.slice():this.outputs=[ee.outputs],unique$3(this.inputs).length!==this.inputs.length)throw new ValueError(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(ke=>ke.name)}`);unique$3(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(ke=>ke.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const ke of this.outputs){const Ne=ke.sourceLayer,Fe=ke.nodeIndex,De=ke.tensorIndex;this.outputLayers.push(Ne),this.outputLayersNodeIndices.push(Fe),this.outputLayersTensorIndices.push(De)}for(const ke of this.inputs){const Ne=ke.sourceLayer,Fe=ke.nodeIndex,De=ke.tensorIndex;assert$1(Fe===0,"input layer has >1 nodes"),assert$1(De===0,"input layer has >1 tensors"),this.inputLayers.push(Ne),this.inputLayersNodeIndices.push(Fe),this.inputLayersTensorIndices.push(De)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let ke=0;ke<this.inputLayers.length;ke++){const Ne=this.inputLayers[ke];if(!(Ne instanceof InputLayer))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${ee.inputs}. Input ${ke} (0-based) originates from layer type ${Ne.getClassName()}.`);this.inputNames.push(Ne.name),this.feedInputShapes.push(Ne.batchInputShape),this.feedInputNames.push(Ne.name)}for(const ke of this.outputLayers)this.outputNames.push(ke.name);this.internalInputShapes=this.inputs.map(ke=>ke.shape),this.internalOutputShapes=this.outputs.map(ke=>ke.shape);const ne={},ae={},ce={},le={},ue={},he=[],fe=(ke,Ne,Fe,De,Oe,Re)=>{(De==null||Oe==null||Re==null)&&(De=ke.sourceLayer,Oe=ke.nodeIndex,Re=ke.tensorIndex);const Be=De.inboundNodes[Oe];if(Fe.indexOf(Be)!==-1)throw new RuntimeError(`The tensor ${ke.name} at layer "${De.name}" is part of a cycle.`);if(Ne.indexOf(Be)!==-1)return;this.containerNodes.add(Container.nodeKey(De,Oe)),De.id in ue||(ue[De.id]=Object.keys(ue).length),Fe.indexOf(Be)===-1&&Fe.push(Be);const Le=Be.inboundLayers.length;for(let je=0;je<Le;je++){const Ge=Be.inputTensors[je],qe=Be.inboundLayers[je],Ue=Be.nodeIndices[je],ze=Be.tensorIndices[je];fe(Ge,Ne,Fe,qe,Ue,ze)}for(Ne.push(Be);Fe.indexOf(Be)>=0;)Fe.splice(Fe.indexOf(Be),1);he.push(Be)},me=[],ge=[];for(const ke of this.outputs)fe(ke,me,ge);const ve=he.slice().reverse();for(const ke of ve){ae[ke.id]=ke,ke.id in ne||(ne[ke.id]=0);let Ne=ne[ke.id];const Fe=ce[ke.outboundLayer.id]==null?0:ce[ke.outboundLayer.id];Ne=Math.max(Ne,Fe),ce[ke.outboundLayer.id]=Ne,le[ke.outboundLayer.id]=ke.outboundLayer,ne[ke.id]=Ne;for(let De=0;De<ke.inboundLayers.length;De++){const Oe=ke.inboundLayers[De],Re=ke.nodeIndices[De],Be=Oe.inboundNodes[Re],Le=ne[Be.id]==null?0:ne[Be.id];ne[Be.id]=Math.max(Ne+1,Le),ae[Be.id]=Be}}const ye={};for(const ke in ne){const Ne=ne[ke];Ne in ye||(ye[Ne]=[]),ye[Ne].push(ae[ke])}const be={};for(const ke in ce){const Ne=ce[ke];Ne in be||(be[Ne]=[]),be[Ne].push(le[ke])}let Ee=Object.keys(be).map(ke=>parseInt(ke,10)).sort(reverseNumberCompare);this.layers=[];for(const ke of Ee){const Ne=be[ke];Ne.sort((Fe,De)=>{const Oe=ue[Fe.id],Re=ue[De.id];return Oe<Re?-1:Oe>Re?1:0});for(const Fe of Ne)Fe instanceof Container&&this.internalContainerRefs.push(Fe),this.layers.push(Fe)}this.layersByDepth=be,Ee=Object.keys(ye).map(ke=>parseInt(ke,10)).sort(reverseNumberCompare);const Ce=this.inputs.slice(),Se=[];for(const ke of Ee)for(const Ne of ye[ke]){const Fe=Ne.outboundLayer;if(Fe!=null){for(const De of Ne.inputTensors)if(Ce.indexOf(De)===-1)throw new RuntimeError(`Graph disconnected: cannot obtain value for tensor ${De} at layer "${Fe.name}". The following previous layers were accessed without issue: ${Se}`);for(const De of Ne.outputTensors)Ce.push(De);Se.push(Fe.name)}}this.nodesByDepth=ye;const Te=this.layers.map(ke=>ke.name);for(const ke of Te){const Ne=Te.filter(Fe=>Fe===ke).length;if(Ne!==1)throw new RuntimeError(`The name "${ke}" is used ${Ne} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(Te))}this.outboundNodes=[],this.inboundNodes=[],new Node$1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(ke=>null),outputMasks:this.outputs.map(ke=>null),inputShapes:this.inputs.map(ke=>ke.shape),outputShapes:this.outputs.map(ke=>ke.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const ee={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const ne of this.layers)ee.numDisposedVariables+=ne.dispose().numDisposedVariables;for(const ne of this.internalContainerRefs)ee.numDisposedVariables+=ne.dispose().numDisposedVariables}return ee.refCountAfterDispose=this._refCount,ee}get trainable(){return this.trainable_}set trainable(ee){this.layers.forEach(ne=>{ne._trainableWeights.forEach(ae=>ae.trainable=ee)}),this.trainable_=ee}get trainableWeights(){if(this._trainableWeights.length>0)throw new ValueError("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let ee=[];for(const ne of this.layers)ee=ee.concat(ne.trainableWeights);return ee}get nonTrainableWeights(){const ee=[];for(const ne of this.layers)ee.push(...ne.nonTrainableWeights);if(!this.trainable){const ne=[];for(const ae of this.layers)ne.push(...ae.trainableWeights);return ne.concat(ee)}return ee}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(ee,ne=!0){const ae={};let ce=0;for(const ue of this.layers)for(const he of ue.weights){if(ae[he.originalName]!=null)throw new ValueError(`Duplicate weight name: ${he.originalName}`);ae[he.originalName]=he,ce++}const le=[];for(const ue in ee){let he=ue;if(ae[ue]==null){const fe=ue.split("/");he=fe.slice(0,-2).concat([fe[fe.length-1]]).join("/")}if(ae[he]!=null)le.push([ae[he],ee[ue]]);else if(ne)throw new ValueError(`Provided weight data has no target variable: ${ue}`);delete ae[he]}if(ne){const ue=[];for(const he in ae)ue.push(he);if(ue.length>0)throw new ValueError(`${ue.length} of ${ce} weights are not set: ${ue}`)}batchSetValue(le)}updatedConfig(){const ee=this.getConfig(),ne={};return ne.className=this.getClassName(),ne.config=ee,ne.kerasVersion=`tfjs-layers ${version$1}`,ne.backend="TensorFlow.js",ne}toJSON(ee,ne=!0){const ae=convertTsToPythonic(this.updatedConfig());return ne?JSON.stringify(ae):ae}call(ee,ne){return tidy(()=>{ee=toList(ee);const ae=new FeedDict;for(let ce=0;ce<this.inputs.length;++ce)ae.add(this.inputs[ce],ee[ce]);return execute(this.outputs,ae,ne)})}computeMask(ee,ne){return tidy(()=>{ee=toList(ee);let ae;return ne==null?ae=pyListRepeat(null,ee.length):ae=toList(ne),this.runInternalGraph(ee,ae)[1]})}computeOutputShape(ee){const ne=normalizeShapeList(ee);if(ne.length!==this.inputLayers.length)throw new ValueError(`Invalid inputShape argument ${ee}: model has ${this.inputLayers.length} tensor inputs.`);const ae={};for(let he=0;he<ne.length;he++){const fe=this.inputLayers[he],me=ne[he],ge=fe.name+"_0_0";ae[ge]=me}const ce=Object.keys(this.nodesByDepth).map(he=>parseInt(he,10)).sort(reverseNumberCompare);if(ce.length>1)for(const he of ce){const fe=this.nodesByDepth[he];for(const me of fe){const ge=me.outboundLayer;if(this.inputLayers.map(Ce=>Ce.id).indexOf(ge.id)!==-1)continue;const ve=[];for(let Ce=0;Ce<me.inboundLayers.length;Ce++){const Se=me.inboundLayers[Ce],Te=me.nodeIndices[Ce],ke=me.tensorIndices[Ce],Ne=`${Se.name}_${Te}_${ke}`,Fe=ae[Ne];ve.push(Fe)}const ye=ge.computeOutputShape(singletonOrArray(ve)),be=normalizeShapeList(ye),Ee=ge.inboundNodes.indexOf(me);for(let Ce=0;Ce<be.length;Ce++){const Se=`${ge.name}_${Ee}_${Ce}`;ae[Se]=be[Ce]}}}const le=[],ue=[];for(let he=0;he<this.outputLayers.length;he++){const fe=this.outputLayers[he],me=this.outputLayersNodeIndices[he],ge=this.outputLayersTensorIndices[he],ve=`${fe.name}_${me}_${ge}`;ue.push(ve)}for(let he=0;he<ue.length;he++){const fe=ue[he];assert$1(fe in ae),le.push(ae[fe])}return singletonOrArray(le)}runInternalGraph(ee,ne){ne==null&&(ne=pyListRepeat(null,ee.length));const ae={};for(let fe=0;fe<this.inputs.length;++fe){const me=this.inputs[fe],ge=ee[fe],ve=ne[fe];ae[me.id]=[ge,ve]}const ce=Object.keys(this.nodesByDepth).map(fe=>parseInt(fe,10)).sort(reverseNumberCompare);for(const fe of ce){const me=this.nodesByDepth[fe];for(const ge of me){const ve=ge.outboundLayer,ye=ge.inputTensors,be=ge.outputTensors,Ee=new Array;for(const Ce of ye)Ce.id in ae&&Ee.push(ae[Ce.id]);if(Ee.length===ye.length){let Ce={},Se,Te,ke,Ne;if(ge.callArgs!=null&&(Ce=ge.callArgs),Ee.length===1){const[Fe,De]=Ee[0];Ce.mask==null&&(Ce.mask=De),ke=toList(ve.call(Fe,Ce)),Ne=toList(ve.computeMask(Fe,De)),Se=[Fe],Te=[De]}else Se=Ee.map(Fe=>Fe[0]),Te=Ee.map(Fe=>Fe[1]),Ce.mask==null&&(Ce.mask=Te),ke=toList(ve.call(Se,Ce)),Ne=toList(ve.computeMask(Se,Te));if(ve.activityRegularizer)throw new NotImplementedError("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let Fe=0;Fe<be.length;++Fe){const De=be[Fe],Oe=ke[Fe],Re=Ne[Fe];ae[De.id]=[Oe,Re]}}}}const le=[],ue=[],he=[];for(const fe of this.outputs){assert$1(fe.id in ae,`Could not compute output ${fe.name} : ${fe.id}`);const[me,ge]=ae[fe.id];he.push(me.shape),le.push(me),ue.push(ge)}return[le,ue,he]}buildNodeConversionMap(ee){const ne={};let ae;for(const ce of this.layers){ae=ce instanceof Container?1:0;for(let le=0;le<ce.inboundNodes.length;le++){const ue=Container.nodeKey(ce,le);this.containerNodes.has(ue)&&(ne[ue]=ae,ae+=1)}}return ne}getLayer(ee,ne){if(ne!=null){if(this.layers.length<=ne)throw new ValueError(`Was asked to retrieve layer at index ${ne}, but model only has ${this.layers.length} layer(s).`);return this.layers[ne]}else if(ee==null)throw new ValueError("Provide either a layer name or layer index");for(const ae of this.layers)if(ae.name===ee)return ae;throw new ValueError(`No such layer: ${ee}`)}calculateLosses(){return tidy(()=>{const ee=[];for(const ne of this.layers)for(let ae=0;ae<ne.inboundNodes.length;++ae){const ce=Container.nodeKey(ne,ae);this.containerNodes.has(ce)&&ee.push(...ne.calculateLosses())}return ee})}getConfig(){const ee={name:this.name},ne=this.buildNodeConversionMap(this.layers),ae=[];for(const ue of this.layers){const he=ue.getClassName(),fe=ue.getConfig(),me=[];for(let ve=0;ve<ue.inboundNodes.length;ve++){const ye=ue.inboundNodes[ve],be=Container.nodeKey(ue,ve);let Ee={};if(this.containerNodes.has(be)){if(ye.callArgs)try{JSON.stringify(ye.callArgs),Ee=ye.callArgs}catch{console.warn(`Layer ${ue.name} was passed non-serializable keyword arguments: ${ye.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),Ee={}}if(ye.inboundLayers.length>0){const Ce=[];for(let Se=0;Se<ye.inboundLayers.length;Se++){const Te=ye.inboundLayers[Se],ke=ye.nodeIndices[Se],Ne=ye.tensorIndices[Se],Fe=Container.nodeKey(Te,ke);let De=ne[Fe];De==null&&(De=0),Ce.push([Te.name,De,Ne,Ee])}me.push(Ce)}}}const ge={};ge.name=ue.name,ge.className=he,ge.config=fe,ge.inboundNodes=me,ae.push(ge)}ee.layers=ae;const ce=[];for(let ue=0;ue<this.inputLayers.length;ue++){const he=this.inputLayers[ue],fe=this.inputLayersNodeIndices[ue],me=Container.nodeKey(he,fe);if(!this.containerNodes.has(me))continue;let ge=ne[me];ge==null&&(ge=0);const ve=this.inputLayersTensorIndices[ue];ce.push([he.name,ge,ve])}ee.inputLayers=ce;const le=[];for(let ue=0;ue<this.outputLayers.length;ue++){const he=this.outputLayers[ue],fe=this.outputLayersNodeIndices[ue],me=Container.nodeKey(he,fe);if(!this.containerNodes.has(me))continue;let ge=ne[me];ge==null&&(ge=0);const ve=this.outputLayersTensorIndices[ue];le.push([he.name,ge,ve])}return ee.outputLayers=le,ee}static fromConfig(ee,ne,ae={},ce=!1){const le={},ue={};function he(Se,Te){Se.name in ue?ue[Se.name].push(Te):ue[Se.name]=[Te]}function fe(Se,Te){const ke=[];let Ne;for(const Fe of Te){const De=Fe[0],Oe=Fe[1],Re=Fe[2];if(Ne=Fe[3]==null?{}:Fe[3],!(De in le)){he(Se,Te);return}const Be=le[De];if(Be.inboundNodes.length<=Oe){he(Se,Te);return}const Le=Be.inboundNodes[Oe];ke.push(Le.outputTensors[Re])}ke.length>0&&Se.apply(singletonOrArray(ke),Ne)}function me(Se){const Te=Se.name,ke=deserialize(Se,ne.customObjects!=null?ne.customObjects:{});ke.setFastWeightInitDuringBuild(ce),le[Te]=ke,Se.inboundNodes.forEach(Fe=>{if(!(Fe instanceof Array))throw new ValueError(`Corrupted configuration, expected array for nodeData: ${Fe}`);he(ke,Fe)})}const ge=ne.name,ve=ne.layers;for(const Se of ve)me(Se);for(;!isObjectEmpty(ue);)for(const Se of ve){const Te=le[Se.name];if(Te.name in ue){const ke=ue[Te.name];delete ue[Te.name];for(const Ne of ke)fe(Te,Ne)}}const ye=[],be=[],Ee=ne.inputLayers;for(const Se of Ee){const Te=Se[0],ke=Se[1],Ne=Se[2];assert$1(Te in le);const De=le[Te].inboundNodes[ke].outputTensors;ye.push(De[Ne])}const Ce=ne.outputLayers;for(const Se of Ce){const Te=Se[0],ke=Se[1],Ne=Se[2];assert$1(Te in le);const De=le[Te].inboundNodes[ke].outputTensors;be.push(De[Ne])}return new ee({inputs:ye,outputs:be,name:ge})}get stateful(){if(this._stateful)throw new ValueError("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const ee of this.layers)if(ee.stateful)return!0;return!1}resetStates(){tidy(()=>{this.layers.forEach(ee=>{ee.stateful&&ee.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function standardizeSampleOrClassWeights(re,ee,ne){const ae=ee.length;if(re==null||Array.isArray(re)&&re.length===0)return ee.map(ce=>null);if(ae===1)return Array.isArray(re)&&re.length===1?re:typeof re=="object"&&ee[0]in re?[re[ee[0]]]:[re];if(Array.isArray(re)){if(re.length!==ae)throw new Error(`Provided ${ne} is an array of ${re.length} element(s), but the model has ${ae} outputs. Make sure a set of weights is provided for each model output.`);return re}else if(typeof re=="object"&&Object.keys(re).length>0&&typeof re[Object.keys(re)[0]]=="object"){const ce=[];return ee.forEach(le=>{le in re?ce.push(re[le]):ce.push(null)}),ce}else throw new Error(`The model has multiple (${ae}) outputs, so ${ne} must be either an array with ${ae} elements or an object with ${ee} keys. Provided ${ne} not understood: ${JSON.stringify(re)}`)}function standardizeClassWeights(re,ee){return standardizeSampleOrClassWeights(re,ee,"classWeight")}async function standardizeWeights(re,ee,ne,ae){if(ee!=null||ae!=null)throw new Error("Support sampleWeight is not implemented yet");if(ne!=null){const ce=tidy(()=>{if(re.shape.length===1)return re.clone();if(re.shape.length===2){if(re.shape[1]>1)return re.argMax(1);if(re.shape[1]===1)return re.reshape([re.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${re.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${re.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),le=Array.from(await ce.data());dispose(ce);const ue=[];return le.forEach(he=>{if(ne[he]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${he} exists in the data but not in classWeight`);ue.push(ne[he])}),tensor1d(ue,"float32")}else return null}function computeWeightedLoss(re,ee){return mul(re,ee)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const DEFAULT_VALIDATION_BATCH_SIZE=32;function standardizeDataIteratorOutput(re,ee){let ne,ae;const ce=ee;ne=ce.xs,ae=ce.ys,assert$2(ne!=null&&ae!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${ee}`);const le=flattenTensorOrArrayOrMap("input",re.inputNames,ne),ue=flattenTensorOrArrayOrMap("output",re.outputNames,ae),he=le[0].shape[0];assert$2(le.length===re.inputs.length,()=>`LayersModel has ${re.inputs.length} inputs, but the dataset provides ${le.length} inputs.  (Expected input keys: ${JSON.stringify(re.inputNames)})`),assert$2(ue.length===re.outputs.length,()=>`LayersModel has ${re.outputs.length} outputs, but the dataset provides ${ue.length} outputs.  (Expected output keys: ${JSON.stringify(re.outputNames)})`);for(let fe=0;fe<le.length;fe++)assert$2(le[fe].shape[0]===he,()=>`Batch size mismatch: input ${re.inputNames[fe]} has ${le[fe].shape[0]}; expected  ${he} based on input ${re.inputNames[0]}.`);for(let fe=0;fe<ue.length;fe++)assert$2(ue[fe].shape[0]===he,()=>`Batch size mismatch: output ${re.outputNames[fe]} has ${ue[fe].shape[0]}; expected  ${he} based on input ${re.inputNames[0]}.`);return{xs:le,ys:ue}}function flattenTensorOrArrayOrMap(re,ee,ne){if(ne instanceof Tensor)return[ne];if(Array.isArray(ne))return assert$2(ne.length===ee.length,()=>`Received an array of ${ne.length} Tensors, but expected ${ee.length} to match the ${re} keys ${ee}.`),ne;{const ae=[];for(const ce of ee){if(ne[ce]==null)throw new ValueError(`The feature data generated by the dataset lacks the required ${re} key '${ce}'.`);ae.push(ne[ce])}return ae}}function standardizeTensorValidationData(re){if(re.length===3)throw new NotImplementedError("Validation with sample weights is not implemented yet.");return{xs:re[0],ys:re[1]}}async function fitDataset(re,ee,ne){const ae=ne.batchesPerEpoch!=null;if(assert$2(re.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),assert$2(ne!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),assert$2(ne.epochs!=null&&ne.epochs>0&&Number.isInteger(ne.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${ne.epochs}`),assert$2(!ae||ne.batchesPerEpoch>0&&Number.isInteger(ne.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${ne.batchesPerEpoch}`),assert$2(ne.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),re.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");re.isTraining=!0;try{const ce=ne.validationData!=null;let le,ue;if(ce)if(isDatasetObject(ne.validationData))assert$2(ne.validationBatches==null||ne.validationBatches>0&&Number.isInteger(ne.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${ne.validationBatches}`);else{const Se=standardizeTensorValidationData(ne.validationData);le=Se.xs,ue=Se.ys}const he=re.makeTrainFunction(),fe=re.getDedupedMetricsNames();let me;ce?me=fe.slice().concat(fe.map(Se=>"val_"+Se)):me=fe.slice();const ge=standardizeCallbacks(ne.callbacks,ne.yieldEvery),ve=ne.verbose==null?1:ne.verbose,{callbackList:ye,history:be}=configureCallbacks(ge,ve,ne.epochs,null,null,getStepsPerEpoch(ee,ne),null,ce,me);ye.setModel(re),re.history=be,await ye.onTrainBegin(),re.stopTraining_=!1;let Ee=ne.initialEpoch==null?0:ne.initialEpoch,Ce=await ee.iterator();for(;Ee<ne.epochs;){const Se={};await ye.onEpochBegin(Ee);let Te=0,ke=0;for(ae||(Ce=await ee.iterator());!ae||Te<ne.batchesPerEpoch;){const Ne=await Ce.next();if(ae&&Ne.done){console.warn(`You provided \`batchesPerEpoch\` as ${ne.batchesPerEpoch}, but your dataset iterator ran out of data after ${Te} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${ne.batchesPerEpoch*ne.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(Ne.value!=null){const{xs:Fe,ys:De}=standardizeDataIteratorOutput(re,Ne.value),Oe={};Oe.batch=ke,Oe.size=Fe[0].shape[0],await ye.onBatchBegin(ke,Oe);const Re=[];if(ne.classWeight!=null){const je=standardizeClassWeights(ne.classWeight,re.outputNames);for(let Ge=0;Ge<je.length;++Ge)Re.push(await standardizeWeights(De[Ge],null,je[Ge]))}const Be=Fe.concat(De).concat(Re),Le=he(Be);dispose(Be);for(let je=0;je<fe.length;++je){const Ge=fe[je],qe=Le[je];Oe[Ge]=qe,keep(qe)}await ye.onBatchEnd(ke,Oe),disposeTensorsInLogs(Oe),ke++,Te++}if(ae?Te>=ne.batchesPerEpoch:Ne.done){if(ce){let Fe;isDatasetObject(ne.validationData)?Fe=toList(await re.evaluateDataset(ne.validationData,{batches:ne.validationBatches})):Fe=toList(re.evaluate(le,ue,{batchSize:ne.validationBatchSize==null?DEFAULT_VALIDATION_BATCH_SIZE:ne.validationBatchSize,verbose:0}));for(let De=0;De<re.metricsNames.length;++De)Se[`val_${re.metricsNames[De]}`]=Fe[De]}break}if(re.stopTraining_)break}if(await ye.onEpochEnd(Ee,Se),Ee++,re.stopTraining_)break}return await ye.onTrainEnd(),await re.history.syncData(),re.history}finally{re.isTraining=!1}}function getStepsPerEpoch(re,ee){let ne=null;return ee.batchesPerEpoch!=null?ne=ee.batchesPerEpoch:Number.isFinite(re.size)&&(ne=re.size),ne}function isDatasetObject(re){return typeof re.iterator=="function"}function isLazyIteratorObject(re){return typeof re.next=="function"}async function evaluateDataset(re,ee,ne){ne=ne||{};const ae=ne.batches!=null,ce=re.testFunction;let le=[];if(ne.verbose>0)throw new NotImplementedError("Verbose mode is not implemented yet.");assert$2(!ae||ne.batches>0&&Number.isInteger(ne.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(ne.batches)}`);const ue=isLazyIteratorObject(ee)?ee:await ee.iterator();let he=0,fe=0;for(;!ae||fe<ne.batches;){const me=await ue.next();if(le=tidy(()=>{if(me.value){const{xs:ge,ys:ve}=standardizeDataIteratorOutput(re,me.value),ye=ge.concat(ve),be=tidy(()=>ce(ye));if(dispose(ye),fe===0)for(let Ce=0;Ce<be.length;++Ce)le.push(scalar(0));const Ee=ye[0].shape[0];for(let Ce=0;Ce<be.length;++Ce){const Se=be[Ce],Te=le[Ce];le[Ce]=tidy(()=>add$1(le[Ce],mul(Ee,Se))),fe>0&&dispose(Te)}dispose(be),he+=Ee,++fe}return le}),me.done){ae&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${ne.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let me=0;me<le.length;++me){const ge=le[me];le[me]=div$1(le[me],he),dispose(ge)}return singletonOrArray(le)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function checkBatchSize(re){assert$2(re>0&&Number.isInteger(re),()=>`batchSize is required to be a positive integer, but got ${re}`)}function sliceArrays(re,ee,ne){return re==null?[null]:Array.isArray(re)?re.map(ae=>sliceAlongFirstAxis(ae,ee,ne-ee)):sliceAlongFirstAxis(re,ee,ne-ee)}function sliceArraysByIndices(re,ee){return tidy(()=>re==null?null:Array.isArray(re)?re.map(ne=>sliceArraysByIndices(ne,ee)):gather(re,ee.dtype==="int32"?ee:ee.toInt()))}function makeBatches(re,ee){const ne=[];let ae=0,ce=null;for(;ae<re;)ce=ae+ee,ce>=re&&(ce=re),ne.push([ae,ce]),ae=ce;return ne}async function fitLoop(re,ee,ne,ae,ce,le,ue,he,fe,me,ge,ve,ye,be,Ee){ce==null&&(ce=32),le==null&&(le=1),ge==null&&(ge=!0),ye==null&&(ye=0);let Ce=!1;if(fe!=null&&me!=null&&(Ce=!0),Ee!=null&&(Ce=!0,be==null))throw new ValueError("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const Se=re.checkNumSamples(ne,ce,be,"steps_per_epoch");let Te;Se!=null&&(Te=range$3(0,Se)),ue==null&&(ue=1);const{callbackList:ke,history:Ne}=configureCallbacks(he,ue,le,ye,Se,be,ce,Ce,ve);ke.setModel(re),re.history=Ne,await ke.onTrainBegin(),re.stopTraining_=!1;for(let Fe=ye;Fe<le;++Fe){await ke.onEpochBegin(Fe);const De={};if(be!=null)throw new NotImplementedError("stepsPerEpoch mode is not implemented yet.");{if(ge==="batch")throw new NotImplementedError("batch shuffling is not implemneted yet");ge&&shuffle(Te);const Oe=tensor1d(Te),Re=makeBatches(Se,ce);for(let Be=0;Be<Re.length;++Be){const Le={};if(await ke.onBatchBegin(Be,Le),tidy(()=>{const je=Re[Be][0],Ge=Re[Be][1],qe=sliceAlongFirstAxis(Oe,je,Ge-je);Le.batch=Be,Le.size=Ge-je;const Ue=sliceArraysByIndices(ne,qe),ze=ee(Ue);for(let He=0;He<ae.length;++He){const Ye=ae[He],Xe=ze[He];Le[Ye]=Xe,keep(Xe)}if(Be===Re.length-1&&Ce){const He=re.testLoop(fe,me,ce);for(let Ye=0;Ye<ae.length;++Ye){const Xe=ae[Ye],We=He[Ye];keep(We),De["val_"+Xe]=We}}}),await ke.onBatchEnd(Be,Le),disposeTensorsInLogs(Le),re.stopTraining_)break}Oe.dispose()}if(await ke.onEpochEnd(Fe,De),re.stopTraining_)break}return await ke.onTrainEnd(),await re.history.syncData(),re.history}async function fitTensors(re,ee,ne,ae={}){if(re.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");re.isTraining=!0;let ce,le,ue,he,fe,me,ge;try{const ve=ae.batchSize==null?32:ae.batchSize;checkBatchSize(ve);const ye=!1,be=await re.standardizeUserData(ee,ne,ae.sampleWeight,ae.classWeight,ye,ve);ce=be[0],le=be[1],ge=be[2];let Ee=!1,Ce;if(ae.validationData!=null&&ae.validationData.length>0){if(Ee=!0,ae.validationData.length===2)ue=ae.validationData[0],he=ae.validationData[1];else throw ae.validationData.length===3?new NotImplementedError("validationData including sample weights is not supported yet."):new ValueError(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${ae.validationData} is invalid.`);const Re=!0,Be=await re.standardizeUserData(ue,he,null,null,Re,ve);fe=Be[0],me=Be[1],Ce=fe.concat(me)}else if(ae.validationSplit!=null&&ae.validationSplit>0&&ae.validationSplit<1){Ee=!0;const Re=Math.floor(ce[0].shape[0]*(1-ae.validationSplit)),Be=ce[0].shape[0];fe=sliceArrays(ce,Re,Be),ce=sliceArrays(ce,0,Re),me=sliceArrays(le,Re,Be),le=sliceArrays(le,0,Re),Ce=fe.concat(me)}else ae.validationSteps!=null&&(Ee=!0);const Se=ce.concat(le).concat(ge);re.checkTrainableWeightsConsistency();const Te=re.makeTrainFunction(),ke=re.getDedupedMetricsNames();let Ne,Fe;Ee?(re.makeTestFunction(),Ne=re.testFunction,Fe=ke.slice().concat(ke.map(Re=>"val_"+Re))):(Ne=null,Ce=[],Fe=ke.slice());const De=standardizeCallbacks(ae.callbacks,ae.yieldEvery);return await fitLoop(re,Te,Se,ke,ve,ae.epochs,ae.verbose,De,Ne,Ce,ae.shuffle,Fe,ae.initialEpoch,null,null)}finally{re.isTraining=!1,disposeNewTensors(ce,ee),disposeNewTensors(le,ne),disposeNewTensors(fe,ue),disposeNewTensors(me,he),ge!=null&&dispose(ge)}}function ensureTensorsRank2OrHigher(re){const ee=[];re instanceof Tensor&&(re=[re]);for(let ne=0;ne<re.length;++ne){const ae=re[ne];if(ae.rank===1)ee.push(expandDims$2(ae,1));else{if(ae.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");ee.push(ae)}}return ee}function disposeNewTensors(re,ee){if(re==null)return;const ne=[];if(ee instanceof Tensor)ne.push(ee.id);else if(Array.isArray(ee))ee.forEach(ce=>ne.push(ce.id));else if(ee!=null)for(const ce in ee){const le=ee[ce];ne.push(le.id)}const ae=[];if(re instanceof Tensor)ne.indexOf(re.id)===-1&&ae.push(re);else if(Array.isArray(re))re.forEach(ce=>{ne.indexOf(ce.id)===-1&&ae.push(ce)});else if(re!=null)for(const ce in re){const le=re[ce];ne.indexOf(le.id)===-1&&ae.push(le)}ae.forEach(ce=>{ce.isDisposed||ce.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isDataTensor(re){return re instanceof Tensor}function isDataArray(re){return Array.isArray(re)}function isDataDict(re){return!isDataTensor(re)&&!isDataArray(re)}function standardizeInputData(re,ee,ne,ae=!0,ce=""){if(ee==null||ee.length===0){if(re!=null){let ue=!1;if(isDataArray(re)&&re.length>0)ue=!0;else if(isDataDict(re)){for(const he in re)if(re.hasOwnProperty(he)){ue=!0;break}}else ue=!0;if(ue)throw new ValueError(`Error when checking model ${ce} expected no data, but got ${re}`)}return[]}if(re==null)return ee.map(ue=>null);let le;if(isDataDict(re)){re=re,le=[];for(const ue of ee){if(re[ue]==null)throw new ValueError(`No data provided for "${ue}". Need data for each key in: ${ee}`);le.push(re[ue])}}else if(isDataArray(re)){if(re=re,re.length!==ee.length)throw new ValueError(`Error when checking model ${ce}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${ee.length} Tensor(s), but instead got the following list of Tensor(s): ${re}`);le=re}else{if(re=re,ee.length>1)throw new ValueError(`The model ${ce} expects ${ee.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${re.shape}`);le=[re]}if(le=ensureTensorsRank2OrHigher(le),ne!=null)for(let ue=0;ue<ee.length;++ue){if(ne[ue]==null)continue;const he=le[ue];if(he.shape.length!==ne[ue].length)throw new ValueError(`Error when checking ${ce}: expected ${ee[ue]} to have ${ne[ue].length} dimension(s). but got array with shape ${he.shape}`);for(let fe=0;fe<ne[ue].length;++fe){if(fe===0&&!ae)continue;const me=he.shape[fe],ge=ne[ue][fe];if(ge!=null&&ge>=0&&me!==ge)throw new ValueError(`Error when checking ${ce}: expected ${ee[ue]} to have shape [${ne[ue]}], but got array with shape [${he.shape}].`)}}return le}function checkArrayLengths(re,ee,ne){const ae=unique$3(re.map(le=>le.shape[0]));ae.sort();const ce=unique$3(ee.map(le=>le.shape[0]));if(ce.sort(),ae.length>1)throw new ValueError(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(re.map(le=>le.shape))}`);if(ce.length>1)throw new ValueError(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(ee.map(le=>le.shape))}`);if(ae.length>0&&ce.length>0&&!arraysEqual(ae,ce))throw new ValueError(`Input Tensors should have the same number of samples as target Tensors. Found ${ae[0]} input sample(s) and ${ce[0]} target sample(s).`)}function checkLossAndTargetCompatibility(re,ee,ne){const ae=[meanSquaredError,binaryCrossentropy$1,categoricalCrossentropy$1];for(let ce=0;ce<re.length;++ce){const le=re[ce],ue=ee[ce],he=ne[ce];if(ue!=null){if(ue===categoricalCrossentropy$1&&le.shape[le.shape.length-1]===1)throw new ValueError(`You are passing a target array of shape ${le.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(ae.indexOf(ue)!==-1){const fe=le.shape.slice(1),me=he.slice(1);for(let ge=0;ge<fe.length;++ge){const ve=fe[ge],ye=me[ge];if(ye!=null&&ve!==ye)throw new ValueError(`A target Tensor with shape ${le.shape} was passed for an output of shape ${he}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function checkInputData(re,ee,ne,ae=!0,ce=""){let le;if(Array.isArray(re)){if(re.length!==ee.length)throw new ValueError(`Error when checking model ${ce}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${ee.length} Tensor(s), but instead got ${re.length} Tensors(s).`);le=re}else{if(ee.length>1)throw new ValueError(`The model expects ${ee.length} ${ce} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(re.shape)}.`);le=[re]}if(ne!=null)for(let ue=0;ue<ee.length;++ue){if(ne[ue]==null)continue;const he=le[ue];if(he.shape.length!==ne[ue].length)throw new ValueError(`Error when checking ${ce}: expected ${ee[ue]} to have ${ne[ue].length} dimension(s), but got array with shape ${JSON.stringify(he.shape)}`);for(let fe=0;fe<ne[ue].length;++fe){if(fe===0&&!ae)continue;const me=he.shape[fe],ge=ne[ue][fe];if(ge!=null&&ge!==me)throw new ValueError(`Error when checking ${ce}: expected ${ee[ue]} to have shape ${JSON.stringify(ne[ue])} but got array with shape ${JSON.stringify(he.shape)}.`)}}}function collectMetrics(re,ee){if(re==null||Array.isArray(re)&&re.length===0)return ee.map(ae=>[]);let ne;if(typeof re=="string"||typeof re=="function")ne=[re];else if(Array.isArray(re)||typeof re=="object")ne=re;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${re}`);if(Array.isArray(ne))return ee.map(ae=>ne);{const ae=[];for(const ce of ee){let le=ne.hasOwnProperty(ce)?ne[ce]:[];Array.isArray(le)||(le=[le]),ae.push(le)}return ae}}const LAYERS_MODEL_FORMAT_NAME="layers-model";class LayersModel extends Container{constructor(ee){super(ee),this.isTraining=!1}summary(ee,ne,ae=console.log){if(!this.built)throw new ValueError("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");printSummary(this,ee,ne,ae)}compile(ee){if(ee.loss==null&&(ee.loss=[]),this.loss=ee.loss,typeof ee.optimizer=="string")this.optimizer_=getOptimizer(ee.optimizer),this.isOptimizerOwned=!0;else{if(!(ee.optimizer instanceof Optimizer))throw new ValueError("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=ee.optimizer,this.isOptimizerOwned=!1}let ne=[];if(!Array.isArray(ee.loss)&&typeof ee.loss!="string"&&typeof ee.loss!="function"){ee.loss=ee.loss;for(const ue in ee.loss)if(this.outputNames.indexOf(ue)===-1)throw new ValueError(`Unknown entry in loss dictionary: "${ue}". Only expected the following keys: ${this.outputNames}`);for(const ue of this.outputNames)ee.loss[ue]==null&&console.warn(`Output "${ue}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${ue} during training`),ne.push(get$3(ee.loss[ue]))}else if(Array.isArray(ee.loss)){if(ee.loss.length!==this.outputs.length)throw new ValueError(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${ee.loss}.`);ne=ee.loss.map(he=>get$3(he))}else{const ue=get$3(ee.loss);this.outputs.forEach(he=>{ne.push(ue)})}this.lossFunctions=ne,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let ue=0;ue<this.outputs.length;++ue){const he=this.internalOutputShapes[ue],fe=this.outputNames[ue];this.feedOutputNames.push(fe),this.feedOutputShapes.push(he),this.feedLossFns.push(this.lossFunctions[ue])}const ae=[];this.metrics=ee.metrics,this.metricsNames=["loss"],this.metricsTensors=[],nameScope("loss",()=>{for(let ue=0;ue<this.outputs.length;++ue){if(ae.indexOf(ue)!==-1)continue;const he=this.lossFunctions[ue];this.outputs.length>1&&(this.metricsTensors.push([he,ue]),this.metricsNames.push(this.outputNames[ue]+"_loss"))}});const ce=collectMetrics(ee.metrics,this.outputNames),le=(ue,he,fe)=>{this.outputNames.length>1&&(he=this.outputNames[ue]+"_"+he),this.metricsNames.push(he),this.metricsTensors.push([fe,ue])};nameScope("metric",()=>{for(let ue=0;ue<this.outputs.length;++ue){if(ae.indexOf(ue)!==-1)continue;const he=ce[ue];(me=>{const ge="";let ve,ye,be;for(const Ee of me){if(typeof Ee=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(Ee)!==-1){const Se=this.internalOutputShapes[ue];Se[Se.length-1]===1||this.lossFunctions[ue]===binaryCrossentropy$1?["accuracy","acc"].indexOf(Ee)!==-1?ye=binaryAccuracy:["crossentropy","ce"].indexOf(Ee)!==-1&&(ye=binaryCrossentropy):this.lossFunctions[ue]===sparseCategoricalCrossentropy$1?["accuracy","acc"].indexOf(Ee)!==-1?ye=sparseCategoricalAccuracy:["crossentropy","ce"].indexOf(Ee)!==-1&&(ye=sparseCategoricalCrossentropy):["accuracy","acc"].indexOf(Ee)!==-1?ye=categoricalAccuracy:["crossentropy","ce"].indexOf(Ee)!==-1&&(ye=categoricalCrossentropy);let Te;["accuracy","acc"].indexOf(Ee)!==-1?Te="acc":["crossentropy","ce"].indexOf(Ee)!==-1&&(Te="ce"),be=ye,ve=ge+Te}else be=get$2(Ee),ve=ge+getLossOrMetricName(Ee);let Ce;nameScope(ve,()=>{Ce=be}),le(ue,ve,Ce)}})(he)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(ee,ne,ae={}){const ce=ae.batchSize==null?32:ae.batchSize;checkBatchSize(ce);const le=!0,ue=this.standardizeUserDataXY(ee,ne,le,ce);try{const he=ue[0].concat(ue[1]);this.makeTestFunction();const fe=this.testFunction,me=this.testLoop(fe,he,ce,ae.verbose,ae.steps);return singletonOrArray(me)}finally{disposeNewTensors(ue[0],ee),disposeNewTensors(ue[1],ne)}}async evaluateDataset(ee,ne){return this.makeTestFunction(),evaluateDataset(this,ee,ne)}checkNumSamples(ee,ne,ae,ce="steps"){let le;if(ae!=null){if(le=null,ne!=null)throw new ValueError(`If ${ce} is set, batchSize must be null or undefined.Got batchSize = ${ne}`)}else if(ee!=null)Array.isArray(ee)?le=ee[0].shape[0]:le=ee.shape[0];else throw new ValueError(`Either the input data should have a defined shape, or ${ce} shoud be specified.`);return le}execute(ee,ne){if(Array.isArray(ne)&&ne.length===0)throw new ValueError("`outputs` is an empty Array, which is not allowed.");const ae=Array.isArray(ne),ce=ae?ne:[ne],le=this.retrieveSymbolicTensors(ce),ue=new FeedDict;if(ee instanceof Tensor&&(ee=[ee]),Array.isArray(ee)){if(ee.length!==this.inputs.length)throw new ValueError(`The number of inputs provided (${ee.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let fe=0;fe<this.inputs.length;++fe)ue.add(this.inputs[fe],ee[fe])}else for(const fe of this.inputs){const me=ee[fe.name];if(me==null)throw new ValueError(`No value is provided for the model's input ${fe.name}`);ue.add(fe,me)}const he=execute(le,ue);return ae?he:he[0]}retrieveSymbolicTensors(ee){const ne=pyListRepeat(null,ee.length);let ae=ee.length;for(const ce of this.layers){const le=Array.isArray(ce.output)?ce.output:[ce.output],ue=le.map(he=>he.name);for(let he=0;he<ee.length;++he){const fe=ue.indexOf(ee[he]);if(fe!==-1&&(ne[he]=le[fe],ae--),ae===0)break}if(ae===0)break}if(ae>0){const ce=[];throw ne.forEach((le,ue)=>{le==null&&ce.push(ee[ue])}),new ValueError(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(ce)}`)}return ne}predictLoop(ee,ne=32,ae=!1){return tidy(()=>{const ce=this.checkNumSamples(ee);if(ae)throw new NotImplementedError("Verbose predictLoop() is not implemented yet.");const le=makeBatches(ce,ne),ue=this.outputs.map(he=>[]);for(let he=0;he<le.length;++he)tidy(()=>{const me=le[he][0],ge=le[he][1],ve=sliceArrays(ee,me,ge),ye=[];if(Array.isArray(ve))for(let Ee=0;Ee<ve.length;++Ee)ye.push({key:this.inputs[Ee],value:ve[Ee]});else ye.push({key:this.inputs[0],value:ve});const be=new FeedDict(ye);return execute(this.outputs,be)}).forEach((me,ge)=>ue[ge].push(me));return singletonOrArray(ue.map(he=>concat$2(he,0)))})}predict(ee,ne={}){const ae=ensureTensorsRank2OrHigher(ee);checkInputData(ae,this.inputNames,this.feedInputShapes,!1);try{const ce=ne.batchSize==null?32:ne.batchSize;return checkBatchSize(ce),this.predictLoop(ae,ce)}finally{disposeNewTensors(ae,ee)}}predictOnBatch(ee){checkInputData(ee,this.inputNames,this.feedInputShapes,!0);const ne=(Array.isArray(ee)?ee[0]:ee).shape[0];return this.predictLoop(ee,ne)}standardizeUserDataXY(ee,ne,ae=!0,ce){if(this.optimizer_==null)throw new RuntimeError("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const le=[];for(let ue=0;ue<this.feedOutputShapes.length;++ue){const he=this.feedOutputShapes[ue];this.feedLossFns[ue]===sparseCategoricalCrossentropy$1?le.push(he.slice(0,he.length-1).concat([1])):le.push(he)}if(ee=standardizeInputData(ee,this.feedInputNames,this.feedInputShapes,!1,"input"),ne=standardizeInputData(ne,this.feedOutputNames,le,!1,"target"),checkArrayLengths(ee,ne),checkLossAndTargetCompatibility(ne,this.feedLossFns,this.feedOutputShapes),this.stateful&&ce!=null&&ce>0&&ee[0].shape[0]%ce!==0)throw new ValueError(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${ce}. Found: ${ee[0].shape[0]} sample(s).`);return[ee,ne]}async standardizeUserData(ee,ne,ae,ce,le=!0,ue){const[he,fe]=this.standardizeUserDataXY(ee,ne,le,ue);if(ae!=null)throw new Error("sample weight is not supported yet.");let me=null;if(ce!=null){const ge=standardizeClassWeights(ce,this.outputNames);me=[];for(let ve=0;ve<ge.length;++ve)me.push(await standardizeWeights(fe[ve],null,ge[ve]))}return[he,fe,me]}testLoop(ee,ne,ae,ce=0,le){return tidy(()=>{const ue=this.checkNumSamples(ne,ae,le,"steps"),he=[];if(ce>0)throw new NotImplementedError("Verbose mode is not implemented yet.");if(le!=null)throw new NotImplementedError("steps mode in testLoop() is not implemented yet");{const fe=makeBatches(ue,ae),me=tensor1d(range$3(0,ue));for(let ge=0;ge<fe.length;++ge){const ve=fe[ge][0],ye=fe[ge][1],be=sliceAlongFirstAxis(me,ve,ye-ve),Ee=sliceArraysByIndices(ne,be),Ce=ee(Ee);if(ge===0)for(let Se=0;Se<Ce.length;++Se)he.push(scalar(0));for(let Se=0;Se<Ce.length;++Se){const Te=Ce[Se];he[Se]=add$1(he[Se],mul(ye-ve,Te))}}for(let ge=0;ge<he.length;++ge)he[ge]=div$1(he[ge],ue)}return he})}getDedupedMetricsNames(){const ee=this.metricsNames,ne=[];for(let ae=0;ae<ee.length;++ae){const ce=ee[ae];let le=ce;if(count(ee,ce)>1){const ue=count(ee.slice(0,ae),ce);le+=`_${ue}`}ne.push(le)}return ne}makeTrainFunction(){return ee=>{const ne=[],ae=ee.slice(0,this.inputs.length),ce=ee.slice(this.inputs.length,this.inputs.length+this.outputs.length),le=ee.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),ue=[],he=()=>{const ve=[];for(let Ce=0;Ce<this.inputs.length;++Ce)ve.push({key:this.inputs[Ce],value:ae[Ce]});const ye=new FeedDict(ve),be=execute(this.outputs,ye,{training:!0});let Ee;for(let Ce=0;Ce<this.lossFunctions.length;++Ce){const Se=this.lossFunctions[Ce];let Te=Se(ce[Ce],be[Ce]);le[Ce]!=null&&(Te=computeWeightedLoss(Te,le[Ce]));const ke=mean$1(Te);ne.push(ke),Ce===0?Ee=Te:Ee=add$1(Ee,Te)}for(let Ce=0;Ce<this.metricsTensors.length;++Ce){let Se;if(this.outputs.length>1&&Ce<this.outputs.length)Se=ne[Ce];else{const Te=this.metricsTensors[Ce][0],ke=this.metricsTensors[Ce][1];Se=mean$1(Te(ce[ke],be[ke]))}keep(Se),ue.push(Se)}return Ee=mean$1(Ee),this.calculateLosses().forEach(Ce=>{Ee=add$1(Ee,Ce)}),Ee},fe=this.collectedTrainableWeights.map(ve=>ve.read()),me=!0;return[this.optimizer_.minimize(he,me,fe)].concat(ue)}}makeTestFunction(){this.testFunction=ee=>tidy(()=>{const ne=[];let ae;const ce=ee.slice(0,this.inputs.length),le=ee.slice(this.inputs.length,this.inputs.length+this.outputs.length),ue=[];for(let me=0;me<this.inputs.length;++me)ue.push({key:this.inputs[me],value:ce[me]});const he=new FeedDict(ue),fe=execute(this.outputs,he);for(let me=0;me<this.lossFunctions.length;++me){const ge=this.lossFunctions[me],ve=mean$1(ge(le[me],fe[me]));me===0?ae=ve:ae=add$1(ae,ve),ne.push(ae)}for(let me=0;me<this.metricsTensors.length;++me){const ge=this.metricsTensors[me][0],ve=this.metricsTensors[me][1],ye=mean$1(ge(le[ve],fe[ve]));ne.push(ye)}return ne})}async fit(ee,ne,ae={}){return fitTensors(this,ee,ne,ae)}async fitDataset(ee,ne){return fitDataset(this,ee,ne)}async trainOnBatch(ee,ne){const ae=await this.standardizeUserData(ee,ne),ce=ae[0],le=ae[1],he=this.makeTrainFunction()(ce.concat(le)),fe=[];for(const me of he){const ge=await me.data();fe.push(ge[0])}return dispose(he),singletonOrArray(fe)}getNamedWeights(ee){const ne=[],ae=ee!=null&&ee.trainableOnly,ce=ae?this.trainableWeights:this.weights,le=this.getWeights(ae);for(let ue=0;ue<ce.length;++ue)ae&&!ce[ue].trainable||ne.push({name:ce[ue].originalName,tensor:le[ue]});return ne}set stopTraining(ee){this.stopTraining_=ee}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(ee){this.optimizer_!==ee&&(this.optimizer_=ee,this.isOptimizerOwned=!1)}dispose(){const ee=super.dispose();if(ee.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const ne=memory().numTensors;this.optimizer_.dispose(),ee.numDisposedVariables+=ne-memory().numTensors}return ee}getLossIdentifiers(){let ee;if(typeof this.loss=="string")ee=toSnakeCase(this.loss);else if(Array.isArray(this.loss)){for(const ne of this.loss)if(typeof ne!="string")throw new Error("Serialization of non-string loss is not supported.");ee=this.loss.map(ne=>toSnakeCase(ne))}else{const ne=Object.keys(this.loss);ee={};const ae=this.loss;for(const ce of ne)if(typeof ae[ce]=="string")ee[ce]=toSnakeCase(ae[ce]);else throw new Error("Serialization of non-string loss is not supported.")}return ee}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[toSnakeCase(getLossOrMetricName(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(ee=>toSnakeCase(getLossOrMetricName(ee)));{const ee={};for(const ne in this.metrics)ee[ne]=toSnakeCase(getLossOrMetricName(this.metrics[ne]));return ee}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(ee){if(ee.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(ee.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(ee.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const ne=convertPythonicToTs(ee.optimizer_config),ae=deserialize(ne);let ce;if(typeof ee.loss=="string")ce=toCamelCase(ee.loss);else if(Array.isArray(ee.loss))ce=ee.loss.map(ue=>toCamelCase(ue));else if(ee.loss!=null){ce={};for(const ue in ee.loss)ce[ue]=toCamelCase(ee.loss[ue])}let le;if(Array.isArray(ee.metrics))le=ee.metrics.map(ue=>toCamelCase(ue));else if(ee.metrics!=null){le={};for(const ue in ee.metrics)le[ue]=toCamelCase(ee.metrics[ue])}this.compile({loss:ce,metrics:le,optimizer:ae})}async save(ee,ne){if(typeof ee=="string"){const me=getSaveHandlers(ee);if(me.length===0)throw new ValueError(`Cannot find any save handlers for URL '${ee}'`);if(me.length>1)throw new ValueError(`Found more than one (${me.length}) save handlers for URL '${ee}'`);ee=me[0]}if(ee.save==null)throw new ValueError("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const ae=await encodeWeights(this.getNamedWeights(ne)),ce=!1,le=null,he={modelTopology:this.toJSON(le,ce),format:LAYERS_MODEL_FORMAT_NAME,generatedBy:`TensorFlow.js tfjs-layers v${version$1}`,convertedBy:null};if((ne==null?!1:ne.includeOptimizer)&&this.optimizer!=null){he.trainingConfig=this.getTrainingConfig();const me="optimizer",{data:ge,specs:ve}=await encodeWeights(await this.optimizer.getWeights(),me);ae.specs.push(...ve),ae.data=concatenateArrayBuffers([ae.data,ge])}return this.userDefinedMetadata!=null&&(checkUserDefinedMetadata(this.userDefinedMetadata,this.name,!0),he.userDefinedMetadata=this.userDefinedMetadata),he.weightData=ae.data,he.weightSpecs=ae.specs,ee.save(he)}setUserDefinedMetadata(ee){checkUserDefinedMetadata(ee,this.name),this.userDefinedMetadata=ee}getUserDefinedMetadata(){return this.userDefinedMetadata}}LayersModel.className="Model";registerClass(LayersModel);class Functional extends LayersModel{}Functional.className="Functional";registerClass(Functional);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Sequential extends LayersModel{constructor(ee){if(super({inputs:[],outputs:[]}),ee=ee||{},this.trainable=!0,this.built=!1,this.name=ee.name!=null?ee.name:getUid("sequential_"),ee.layers!=null)for(const ne of ee.layers)this.add(ne)}checkShape(ee){if(ee.inboundNodes[0].outputTensors[0].shape.some(ae=>ae<0))throw new ValueError(`Negative dimension size caused by adding layer ${ee.name} with input shape [${ee.inboundNodes[0].inputTensors[0].shape}]`)}add(ee){const ne=ee instanceof Sequential||ee instanceof LayersModel;let ae;if(ne){if(ae=ee,ae.outputs.length!==1)throw new ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(ae.inputs.length!==1)throw new ValueError("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(ee.inboundNodes.length===0){if(ee.batchInputShape==null)throw new ValueError("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const ce=Input$3({batchShape:ee.batchInputShape,dtype:ee.dtype,name:ee.name+"_input"});ee.apply(ce)}if(ne)this.outputs=ae.outputs,this.inputs=ae.inputs;else{if(ee.inboundNodes.length!==1)throw new ValueError(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${ee.name} which has ${ee.inboundNodes.length} pre-existing inbound connections.`);if(ee.inboundNodes[0].outputTensors.length!==1)throw new ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(ee),this.outputs=[ee.inboundNodes[0].outputTensors[0]],this.inputs=getSourceInputs(this.outputs[0])}this.inboundNodes=[],new Node$1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:pyListRepeat(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(ce=>ce.shape),outputShapes:this.outputs[0].shape})}else{const ce=ee.apply(this.outputs[0]);if(Array.isArray(ce))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(ee),this.outputs=[ce],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(ee),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const ee=this.layers.length-1;this.layers[ee].outboundNodes=[],this.outputs=[this.layers[ee].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(ee,ne){return this.model==null&&this.build(),this.model.call(ee,ne)}build(ee){if(getExactlyOneShape(ee),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new LayersModel({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(ee,ne,ae=console.log){this.built||this.build(),super.summary(ee,ne,ae)}setWeights(ee){this.model==null&&this.build(),this.model.setWeights(ee)}evaluate(ee,ne,ae={}){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.evaluate(ee,ne,ae)}async evaluateDataset(ee,ne){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.evaluateDataset(ee,ne)}predict(ee,ne={}){return this.model==null&&this.build(),this.model.predict(ee,ne)}predictOnBatch(ee){return this.model==null&&this.build(),this.model.predictOnBatch(ee)}compile(ee){this.build(),this.model.compile(ee),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(ee){this.model.optimizer=ee}async fit(ee,ne,ae={}){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.fit(ee,ne,ae)}async fitDataset(ee,ne){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.fitDataset(ee,ne)}async trainOnBatch(ee,ne){return this.model.trainOnBatch(ee,ne)}static fromConfig(ee,ne,ae={},ce=!1){let le,ue={};if(ne instanceof Array){if(ne[0].className==null||ne[0].className==="Merge")throw new ValueError("Legacy serialization format not supported yet.");le=ne}else assert$2(ne.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),le=ne.layers,delete ne.layers,ue=ne;const he=new ee(ue);if(!(he instanceof Sequential))throw new NotImplementedError(`Sequential.fromConfig called on non-Sequential input: ${he}`);for(const fe of le){const ge=deserialize(fe,void 0,ce);ce&&ge.setFastWeightInitDuringBuild(!0),he.add(ge)}return he}set stopTraining(ee){if(this.model==null)throw new ValueError("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=ee}get stopTraining(){if(this.model==null)throw new ValueError("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const ee=[];for(const ne of this.layers){const ae={};ae.className=ne.getClassName(),ae.config=ne.getConfig(),ee.push(ae)}return{name:this.name,layers:ee}}}Sequential.className="Sequential";registerClass(Sequential);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Activation$1=class extends Serializable{getConfig(){return{}}};class Elu extends Activation$1{apply(ee,ne=1){return elu$2(ee,ne)}}Elu.className="elu";registerClass(Elu);class Selu extends Activation$1{apply(ee){return selu$2(ee)}}Selu.className="selu";registerClass(Selu);class Relu extends Activation$1{apply(ee){return relu$2(ee)}}Relu.className="relu";registerClass(Relu);class Relu6 extends Activation$1{apply(ee){return tidy(()=>minimum$2(6,relu$2(ee)))}}Relu6.className="relu6";registerClass(Relu6);class Linear extends Activation$1{apply(ee){return ee}}Linear.className="linear";registerClass(Linear);class Sigmoid extends Activation$1{apply(ee){return sigmoid$2(ee)}}Sigmoid.className="sigmoid";registerClass(Sigmoid);class HardSigmoid extends Activation$1{apply(ee){return hardSigmoid(ee)}}HardSigmoid.className="hardSigmoid";registerClass(HardSigmoid);class Softplus extends Activation$1{apply(ee){return softplus$2(ee)}}Softplus.className="softplus";registerClass(Softplus);class Softsign extends Activation$1{apply(ee){return softsign(ee)}}Softsign.className="softsign";registerClass(Softsign);class Tanh extends Activation$1{apply(ee){return tanh$2(ee)}}Tanh.className="tanh";registerClass(Tanh);let Softmax$1=class extends Activation$1{apply(ee,ne=-1){return softmax$2(ee,ne)}};Softmax$1.className="softmax";registerClass(Softmax$1);class LogSoftmax extends Activation$1{apply(ee,ne=-1){return logSoftmax(ee,ne)}}LogSoftmax.className="logSoftmax";registerClass(LogSoftmax);class Swish extends Activation$1{apply(ee,ne=1){return tidy(()=>sigmoid$2(ee.mul(ne)).mul(ee))}}Swish.className="swish";registerClass(Swish);function serializeActivation(re){return re.getClassName()}function deserializeActivation(re,ee={}){return deserializeKerasObject(re,SerializationMap.getMap().classNameMap,ee,"activation")}function getActivation(re){if(re==null){const ee={};return ee.className="linear",ee.config={},deserializeActivation(ee)}if(typeof re=="string"){const ee={};return ee.className=re,ee.config={},deserializeActivation(ee)}else return re instanceof Activation$1?re:deserializeActivation(re)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function assertObjectArgs(re){if(re!=null&&typeof re!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${re}`)}class Regularizer extends Serializable{}class L1L2 extends Regularizer{constructor(ee){super(),assertObjectArgs(ee),this.l1=ee==null||ee.l1==null?.01:ee.l1,this.l2=ee==null||ee.l2==null?.01:ee.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(ee){return tidy(()=>{let ne=zeros$1([1]);return this.hasL1&&(ne=add$1(ne,sum$2(mul(this.l1,abs$3(ee))))),this.hasL2&&(ne=add$1(ne,sum$2(mul(this.l2,square$2(ee))))),ne.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(ee,ne){return new ee({l1:ne.l1,l2:ne.l2})}}L1L2.className="L1L2";registerClass(L1L2);const REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP={l1l2:"L1L2"};function serializeRegularizer(re){return serializeKerasObject(re)}function deserializeRegularizer(re,ee={}){return deserializeKerasObject(re,SerializationMap.getMap().classNameMap,ee,"regularizer")}function getRegularizer(re){if(re==null)return null;if(typeof re=="string"){const ne={className:re in REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP?REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP[re]:re,config:{}};return deserializeRegularizer(ne)}else return re instanceof Regularizer?re:deserializeRegularizer(re)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ReLU extends Layer{constructor(ee){super(ee??{}),this.supportsMasking=!0,ee!=null&&(this.maxValue=ee.maxValue)}call(ee,ne){ee=getExactlyOneTensor(ee);let ae=relu$2(ee);return this.maxValue!=null&&(ae=clipByValue$1(ae,0,this.maxValue)),ae}computeOutputShape(ee){return ee}getConfig(){const ee={maxValue:this.maxValue},ne=super.getConfig();return Object.assign(ee,ne),ee}}ReLU.className="ReLU";registerClass(ReLU);class LeakyReLU extends Layer{constructor(ee){super(ee??{}),this.DEFAULT_ALPHA=.3,ee==null&&(ee={}),this.alpha=ee.alpha==null?this.DEFAULT_ALPHA:ee.alpha}call(ee,ne){const ae=getExactlyOneTensor(ee);return leakyRelu$2(ae,this.alpha)}computeOutputShape(ee){return ee}getConfig(){const ee={alpha:this.alpha},ne=super.getConfig();return Object.assign(ee,ne),ee}}LeakyReLU.className="LeakyReLU";registerClass(LeakyReLU);class PReLU extends Layer{constructor(ee){if(super(ee??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",ee==null&&(ee={}),this.supportsMasking=!0,this.alphaInitializer=getInitializer(ee.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=getRegularizer(ee.alphaRegularizer),this.alphaConstraint=getConstraint(ee.alphaConstraint),ee.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(ee.sharedAxes))this.sharedAxes=ee.sharedAxes;else if(typeof ee.sharedAxes=="number")this.sharedAxes=[ee.sharedAxes];else throw new ValueError(`Expected sharedAxes to be a number or an array of numbers, but got ${ee.sharedAxes}`)}build(ee){ee=getExactlyOneShape(ee);const ne=ee.slice(1);if(this.sharedAxes!=null)for(const ce of this.sharedAxes)ne[ce-1]=1;this.alpha=this.addWeight("alpha",ne,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const ae={};if(this.sharedAxes!=null)for(let ce=1;ce<ee.length;++ce)ae[ce]=ee[ce];this.inputSpec=[new InputSpec({ndim:ee.length,axes:ae})],this.built=!0}call(ee,ne){return ee=getExactlyOneTensor(ee),prelu$2(ee,this.alpha.read())}getConfig(){const ee={alphaInitializer:serializeInitializer(this.alphaInitializer),alphaRegularizer:serializeRegularizer(this.alphaRegularizer),alphaConstraint:serializeConstraint(this.alphaConstraint),sharedAxes:this.sharedAxes},ne=super.getConfig();return Object.assign(ee,ne),ee}}PReLU.className="PReLU";registerClass(PReLU);let ELU$3=class extends Layer{constructor(ee){if(super(ee??{}),this.DEFAULT_ALPHA=1,ee==null&&(ee={}),ee.alpha!=null&&ee.alpha!==this.DEFAULT_ALPHA)throw new NotImplementedError(`Non-default alpha value (${ee.alpha}) is not supported by the ELU layer yet.`);this.alpha=ee.alpha==null?this.DEFAULT_ALPHA:ee.alpha}call(ee,ne){const ae=getExactlyOneTensor(ee);return elu$3(ae)}computeOutputShape(ee){return ee}getConfig(){const ee={alpha:this.alpha},ne=super.getConfig();return Object.assign(ee,ne),ee}};ELU$3.className="ELU";registerClass(ELU$3);class ThresholdedReLU extends Layer{constructor(ee){super(ee??{}),this.DEFAULT_THETA=1,ee==null&&(ee={}),this.theta=ee.theta==null?this.DEFAULT_THETA:ee.theta}call(ee,ne){const ae=getExactlyOneTensor(ee);return ae.mul(cast$2(ae.greater(this.theta),"float32"))}computeOutputShape(ee){return ee}getConfig(){const ee={theta:this.theta},ne=super.getConfig();return Object.assign(ee,ne),ee}}ThresholdedReLU.className="ThresholdedReLU";registerClass(ThresholdedReLU);class Softmax extends Layer{constructor(ee){super(ee??{}),this.DEFAULT_AXIS=1,ee==null&&(ee={}),this.softmax=new Softmax$1().apply,this.axis=ee.axis==null?this.DEFAULT_AXIS:ee.axis}call(ee,ne){const ae=getExactlyOneTensor(ee);return this.softmax(ae,this.axis)}computeOutputShape(ee){return ee}getConfig(){const ee={axis:this.axis},ne=super.getConfig();return Object.assign(ee,ne),ee}}Softmax.className="Softmax";registerClass(Softmax);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function normalizeArray(re,ee,ne){if(typeof re=="number")return pyListRepeat(re,ee);if(re.length!==ee)throw new ValueError(`The ${ne} argument must be an integer or tuple of ${ee} integers. Received: ${re.length} elements.`);for(let ae=0;ae<ee;++ae){const ce=re[ae];if(!isInteger(ce))throw new ValueError(`The ${ne} argument must be an integer or tuple of ${ee} integers. Received: ${JSON.stringify(re)} including a non-integer number ${ce}`)}return re}function convOutputLength(re,ee,ne,ae,ce=1){if(re==null)return re;const le=ee+(ee-1)*(ce-1);let ue;return ne==="same"?ue=re:ue=re-le+1,Math.floor((ue+ae-1)/ae)}function deconvLength(re,ee,ne,ae){if(re==null)return null;if(ae==="valid")re=re*ee+max$3([ne-ee,0]);else if(ae==="same")re=re*ee;else throw new ValueError(`Unsupport padding mode: ${ae}.`);return re}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function preprocessConv2DInput(re,ee){return tidy(()=>(checkDataFormat(ee),ee==="channelsFirst"?transpose$2(re,[0,2,3,1]):re))}function preprocessConv3DInput(re,ee){return tidy(()=>(checkDataFormat(ee),ee==="channelsFirst"?transpose$2(re,[0,2,3,4,1]):re))}function conv1dWithBias(re,ee,ne,ae=1,ce="valid",le,ue=1){return tidy(()=>{if(le==null&&(le=imageDataFormat()),checkDataFormat(le),re.shape.length!==3)throw new ValueError(`The input of a conv1dWithBias operation should be 3, but is ${re.shape.length} instead.`);if(ee.shape.length!==3)throw new ValueError(`The kernel for a conv1dWithBias operation should be 3, but is ${ee.shape.length} instead`);if(ne!=null&&ne.shape.length!==1)throw new ValueError(`The bias for a conv1dWithBias operation should be 1, but is ${ee.shape.length} instead`);if(le==="channelsFirst"&&(re=transpose$2(re,[0,2,1])),ce==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let he=conv1d(re,ee,ae,ce==="same"?"same":"valid","NWC",ue);return ne!=null&&(he=biasAdd(he,ne)),he})}function conv2dWithBiasActivation(re,ee,ne,ae=[1,1],ce="valid",le,ue,he=null){return tidy(()=>{if(le==null&&(le=imageDataFormat()),checkDataFormat(le),re.rank!==3&&re.rank!==4)throw new ValueError(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${re.rank}.`);if(ee.rank!==3&&ee.rank!==4)throw new ValueError(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${re.rank}.`);let fe=preprocessConv2DInput(re,le);if(ce==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return fe=conv2d$1({x:fe,filter:ee,strides:ae,pad:ce==="same"?"same":"valid",dilations:ue,dataFormat:"NHWC",bias:ne,activation:he}),le==="channelsFirst"&&(fe=transpose$2(fe,[0,3,1,2])),fe})}function conv3dWithBias(re,ee,ne,ae=[1,1,1],ce="valid",le,ue){return tidy(()=>{if(le==null&&(le=imageDataFormat()),checkDataFormat(le),re.rank!==4&&re.rank!==5)throw new ValueError(`conv3dWithBias expects input to be of rank 4 or 5, but received ${re.rank}.`);if(ee.rank!==4&&ee.rank!==5)throw new ValueError(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${re.rank}.`);let he=preprocessConv3DInput(re,le);if(ce==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return he=conv3d(he,ee,ae,ce==="same"?"same":"valid","NDHWC",ue),ne!=null&&(he=biasAdd(he,ne)),le==="channelsFirst"&&(he=transpose$2(he,[0,4,1,2,3])),he})}class BaseConv extends Layer{constructor(ee,ne){if(super(ne),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",BaseConv.verifyArgs(ne),this.rank=ee,assertPositiveInteger(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new NotImplementedError(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=normalizeArray(ne.kernelSize,ee,"kernelSize"),this.strides=normalizeArray(ne.strides==null?1:ne.strides,ee,"strides"),this.padding=ne.padding==null?"valid":ne.padding,checkPaddingMode(this.padding),this.dataFormat=ne.dataFormat==null?"channelsLast":ne.dataFormat,checkDataFormat(this.dataFormat),this.activation=getActivation(ne.activation),this.useBias=ne.useBias==null?!0:ne.useBias,this.biasInitializer=getInitializer(ne.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=getConstraint(ne.biasConstraint),this.biasRegularizer=getRegularizer(ne.biasRegularizer),this.activityRegularizer=getRegularizer(ne.activityRegularizer),this.dilationRate=normalizeArray(ne.dilationRate==null?1:ne.dilationRate,ee,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ValueError(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ValueError(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ValueError(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(ee){if(assert$1("kernelSize"in ee,"required key 'kernelSize' not in config"),typeof ee.kernelSize!="number"&&!checkArrayTypeAndLength(ee.kernelSize,"number",1,3))throw new ValueError(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(ee.kernelSize)}.`)}getConfig(){const ee={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:serializeActivation(this.activation),useBias:this.useBias,biasInitializer:serializeInitializer(this.biasInitializer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),biasConstraint:serializeConstraint(this.biasConstraint)},ne=super.getConfig();return Object.assign(ee,ne),ee}}class Conv extends BaseConv{constructor(ee,ne){super(ee,ne),this.kernel=null,Conv.verifyArgs(ne),this.filters=ne.filters,assertPositiveInteger(this.filters,"filters"),this.kernelInitializer=getInitializer(ne.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=getConstraint(ne.kernelConstraint),this.kernelRegularizer=getRegularizer(ne.kernelRegularizer)}build(ee){ee=getExactlyOneShape(ee);const ne=this.dataFormat==="channelsFirst"?1:ee.length-1;if(ee[ne]==null)throw new ValueError(`The channel dimension of the input should be defined. Found ${ee[ne]}`);const ae=ee[ne],ce=this.kernelSize.concat([ae,this.filters]);this.kernel=this.addWeight("kernel",ce,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[ne]:ae}}],this.built=!0}call(ee,ne){return tidy(()=>{ee=getExactlyOneTensor(ee);let ae;const ce=this.bias==null?null:this.bias.read(),le=mapActivationToFusedKernel(this.activation.getClassName());if(le!=null&&this.rank===2)ae=conv2dWithBiasActivation(ee,this.kernel.read(),ce,this.strides,this.padding,this.dataFormat,this.dilationRate,le);else{if(this.rank===1)ae=conv1dWithBias(ee,this.kernel.read(),ce,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)ae=conv2dWithBiasActivation(ee,this.kernel.read(),ce,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)ae=conv3dWithBias(ee,this.kernel.read(),ce,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new NotImplementedError("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(ae=this.activation.apply(ae))}return ae})}computeOutputShape(ee){ee=getExactlyOneShape(ee);const ne=[],ae=this.dataFormat==="channelsLast"?ee.slice(1,ee.length-1):ee.slice(2);for(let le=0;le<ae.length;++le){const ue=convOutputLength(ae[le],this.kernelSize[le],this.padding,this.strides[le],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[le]);ne.push(ue)}let ce=[ee[0]];return this.dataFormat==="channelsLast"?(ce=ce.concat(ne),ce.push(this.filters)):(ce.push(this.filters),ce=ce.concat(ne)),ce}getConfig(){const ee={filters:this.filters,kernelInitializer:serializeInitializer(this.kernelInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint)},ne=super.getConfig();return Object.assign(ee,ne),ee}static verifyArgs(ee){if(!("filters"in ee)||typeof ee.filters!="number"||ee.filters<1)throw new ValueError(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(ee.filters)}`)}}class Conv2D extends Conv{constructor(ee){super(2,ee),Conv2D.verifyArgs(ee)}getConfig(){const ee=super.getConfig();return delete ee.rank,ee}static verifyArgs(ee){if(typeof ee.kernelSize!="number"&&!checkArrayTypeAndLength(ee.kernelSize,"number",1,2))throw new ValueError(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(ee.kernelSize)}.`)}}Conv2D.className="Conv2D";registerClass(Conv2D);class Conv3D extends Conv{constructor(ee){super(3,ee),Conv3D.verifyArgs(ee)}getConfig(){const ee=super.getConfig();return delete ee.rank,ee}static verifyArgs(ee){if(typeof ee.kernelSize!="number"&&!(Array.isArray(ee.kernelSize)&&(ee.kernelSize.length===1||ee.kernelSize.length===3)))throw new ValueError(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(ee.kernelSize)}.`)}}Conv3D.className="Conv3D";registerClass(Conv3D);class Conv2DTranspose extends Conv2D{constructor(ee){if(super(ee),this.inputSpec=[new InputSpec({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ValueError(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(ee){if(ee=getExactlyOneShape(ee),ee.length!==4)throw new ValueError("Input should have rank 4; Received input shape: "+JSON.stringify(ee));const ne=this.dataFormat==="channelsFirst"?1:ee.length-1;if(ee[ne]==null)throw new ValueError("The channel dimension of the inputs should be defined. Found `None`.");const ae=ee[ne],ce=this.kernelSize.concat([this.filters,ae]);this.kernel=this.addWeight("kernel",ce,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new InputSpec({ndim:4,axes:{[ne]:ae}})],this.built=!0}call(ee,ne){return tidy(()=>{let ae=getExactlyOneTensor(ee);if(ae.shape.length!==4)throw new ValueError(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${ae.shape.length}`);const ce=ae.shape,le=ce[0];let ue,he;this.dataFormat==="channelsFirst"?(ue=2,he=3):(ue=1,he=2);const fe=ce[ue],me=ce[he],ge=this.kernelSize[0],ve=this.kernelSize[1],ye=this.strides[0],be=this.strides[1],Ee=deconvLength(fe,ye,ge,this.padding),Ce=deconvLength(me,be,ve,this.padding),Se=[le,Ee,Ce,this.filters];this.dataFormat!=="channelsLast"&&(ae=transpose$2(ae,[0,2,3,1]));let Te=conv2dTranspose(ae,this.kernel.read(),Se,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(Te=transpose$2(Te,[0,3,1,2])),this.bias!=null&&(Te=biasAdd(Te,this.bias.read(),this.dataFormat)),this.activation!=null&&(Te=this.activation.apply(Te)),Te})}computeOutputShape(ee){ee=getExactlyOneShape(ee);const ne=ee.slice();let ae,ce,le;this.dataFormat==="channelsFirst"?(ae=1,ce=2,le=3):(ae=3,ce=1,le=2);const ue=this.kernelSize[0],he=this.kernelSize[1],fe=this.strides[0],me=this.strides[1];return ne[ae]=this.filters,ne[ce]=deconvLength(ne[ce],fe,ue,this.padding),ne[le]=deconvLength(ne[le],me,he,this.padding),ne}getConfig(){const ee=super.getConfig();return delete ee.dilationRate,ee}}Conv2DTranspose.className="Conv2DTranspose";registerClass(Conv2DTranspose);class SeparableConv extends Conv{constructor(ee,ne){if(super(ee,ne),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,ne.filters==null)throw new ValueError("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(ne.kernelInitializer!=null||ne.kernelRegularizer!=null||ne.kernelConstraint!=null)throw new ValueError("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(ne.padding!=null&&ne.padding!=="same"&&ne.padding!=="valid")throw new ValueError(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(ne.padding)}`);this.depthMultiplier=ne.depthMultiplier==null?1:ne.depthMultiplier,this.depthwiseInitializer=getInitializer(ne.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=getRegularizer(ne.depthwiseRegularizer),this.depthwiseConstraint=getConstraint(ne.depthwiseConstraint),this.pointwiseInitializer=getInitializer(ne.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=getRegularizer(ne.pointwiseRegularizer),this.pointwiseConstraint=getConstraint(ne.pointwiseConstraint)}build(ee){if(ee=getExactlyOneShape(ee),ee.length<this.rank+2)throw new ValueError(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(ee)}`);const ne=this.dataFormat==="channelsFirst"?1:ee.length-1;if(ee[ne]==null||ee[ne]<0)throw new ValueError(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(ee[ne])}`);const ae=ee[ne],ce=this.kernelSize.concat([ae,this.depthMultiplier]),le=[];for(let he=0;he<this.rank;++he)le.push(1);le.push(ae*this.depthMultiplier,this.filters);const ue=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",ce,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,ue,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",le,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,ue,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,ue,this.biasConstraint):this.bias=null,this.inputSpec=[new InputSpec({ndim:this.rank+2,axes:{[ne]:ae}})],this.built=!0}call(ee,ne){return tidy(()=>{ee=getExactlyOneTensor(ee);let ae;if(this.rank===1)throw new NotImplementedError("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(ee=transpose$2(ee,[0,2,3,1])),ae=separableConv2d(ee,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(ae=biasAdd(ae,this.bias.read(),this.dataFormat)),this.activation!=null&&(ae=this.activation.apply(ae)),this.dataFormat==="channelsFirst"&&(ae=transpose$2(ae,[0,3,1,2])),ae})}getConfig(){const ee=super.getConfig();return delete ee.rank,delete ee.kernelInitializer,delete ee.kernelRegularizer,delete ee.kernelConstraint,ee.depthwiseInitializer=serializeInitializer(this.depthwiseInitializer),ee.pointwiseInitializer=serializeInitializer(this.pointwiseInitializer),ee.depthwiseRegularizer=serializeRegularizer(this.depthwiseRegularizer),ee.pointwiseRegularizer=serializeRegularizer(this.pointwiseRegularizer),ee.depthwiseConstraint=serializeConstraint(this.depthwiseConstraint),ee.pointwiseConstraint=serializeConstraint(this.pointwiseConstraint),ee}}SeparableConv.className="SeparableConv";class SeparableConv2D extends SeparableConv{constructor(ee){super(2,ee)}}SeparableConv2D.className="SeparableConv2D";registerClass(SeparableConv2D);class Conv1D extends Conv{constructor(ee){super(1,ee),Conv1D.verifyArgs(ee),this.inputSpec=[{ndim:3}]}getConfig(){const ee=super.getConfig();return delete ee.rank,delete ee.dataFormat,ee}static verifyArgs(ee){if(typeof ee.kernelSize!="number"&&!checkArrayTypeAndLength(ee.kernelSize,"number",1,1))throw new ValueError(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(ee.kernelSize)}.`)}}Conv1D.className="Conv1D";registerClass(Conv1D);class Cropping2D extends Layer{constructor(ee){super(ee),typeof ee.cropping=="number"?this.cropping=[[ee.cropping,ee.cropping],[ee.cropping,ee.cropping]]:typeof ee.cropping[0]=="number"?this.cropping=[[ee.cropping[0],ee.cropping[0]],[ee.cropping[1],ee.cropping[1]]]:this.cropping=ee.cropping,this.dataFormat=ee.dataFormat===void 0?"channelsLast":ee.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(ee){return this.dataFormat==="channelsFirst"?[ee[0],ee[1],ee[2]-this.cropping[0][0]-this.cropping[0][1],ee[3]-this.cropping[1][0]-this.cropping[1][1]]:[ee[0],ee[1]-this.cropping[0][0]-this.cropping[0][1],ee[2]-this.cropping[1][0]-this.cropping[1][1],ee[3]]}call(ee,ne){return tidy(()=>{if(ee=getExactlyOneTensor(ee),this.dataFormat==="channelsLast"){const ae=sliceAlongAxis(ee,this.cropping[0][0],ee.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return sliceAlongAxis(ae,this.cropping[1][0],ee.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const ae=sliceAlongAxis(ee,this.cropping[0][0],ee.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return sliceAlongAxis(ae,this.cropping[1][0],ee.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const ee={cropping:this.cropping,dataFormat:this.dataFormat},ne=super.getConfig();return Object.assign(ee,ne),ee}}Cropping2D.className="Cropping2D";registerClass(Cropping2D);class UpSampling2D extends Layer{constructor(ee){super(ee),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=ee.size==null?this.DEFAULT_SIZE:ee.size,this.dataFormat=ee.dataFormat==null?"channelsLast":ee.dataFormat,checkDataFormat(this.dataFormat),this.interpolation=ee.interpolation==null?"nearest":ee.interpolation,checkInterpolationFormat(this.interpolation)}computeOutputShape(ee){if(this.dataFormat==="channelsFirst"){const ne=ee[2]==null?null:this.size[0]*ee[2],ae=ee[3]==null?null:this.size[1]*ee[3];return[ee[0],ee[1],ne,ae]}else{const ne=ee[1]==null?null:this.size[0]*ee[1],ae=ee[2]==null?null:this.size[1]*ee[2];return[ee[0],ne,ae,ee[3]]}}call(ee,ne){return tidy(()=>{let ae=getExactlyOneTensor(ee);const ce=ae.shape;if(this.dataFormat==="channelsFirst"){ae=transpose$2(ae,[0,2,3,1]);const le=this.size[0]*ce[2],ue=this.size[1]*ce[3],he=this.interpolation==="nearest"?ae.resizeNearestNeighbor([le,ue]):ae.resizeBilinear([le,ue]);return transpose$2(he,[0,3,1,2])}else{const le=this.size[0]*ce[1],ue=this.size[1]*ce[2];return this.interpolation==="nearest"?ae.resizeNearestNeighbor([le,ue]):ae.resizeBilinear([le,ue])}})}getConfig(){const ee={size:this.size,dataFormat:this.dataFormat},ne=super.getConfig();return Object.assign(ee,ne),ee}}UpSampling2D.className="UpSampling2D";registerClass(UpSampling2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function depthwiseConv2d(re,ee,ne=[1,1],ae="valid",ce,le){return tidy(()=>{ce==null&&(ce=imageDataFormat()),checkDataFormat(ce);let ue=preprocessConv2DInput(re,ce);if(re.rank!==4)throw new ValueError(`Input for depthwiseConv2d is required to be 4-D, but is instead ${re.rank}-D`);if(ee.rank!==4)throw new ValueError(`depthwiseKernel is required to be 4-D, but is instead ${ee.rank}-D`);return ue=depthwiseConv2d$1(ue,ee,ne,ae==="same"?"same":"valid","NHWC",le),ce==="channelsFirst"&&(ue=transpose$2(ue,[0,3,1,2])),ue})}class DepthwiseConv2D extends BaseConv{constructor(ee){super(2,ee),this.depthwiseKernel=null,this.depthMultiplier=ee.depthMultiplier==null?1:ee.depthMultiplier,this.depthwiseInitializer=getInitializer(ee.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=getConstraint(ee.depthwiseConstraint),this.depthwiseRegularizer=getRegularizer(ee.depthwiseRegularizer)}build(ee){if(ee=getExactlyOneShape(ee),ee.length<4)throw new ValueError(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(ee)}.`);const ne=this.dataFormat==="channelsFirst"?1:3;if(ee[ne]==null||ee[ne]<0)throw new ValueError(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${ee[ne]}).`);const ae=ee[ne],ce=[this.kernelSize[0],this.kernelSize[1],ae,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",ce,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[ae*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(ee,ne){return tidy(()=>{ee=getExactlyOneTensor(ee);let ae=depthwiseConv2d(ee,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(ae=biasAdd(ae,this.bias.read(),this.dataFormat)),this.activation!=null&&(ae=this.activation.apply(ae)),ae})}computeOutputShape(ee){ee=getExactlyOneShape(ee);const ne=this.dataFormat==="channelsFirst"?ee[2]:ee[1],ae=this.dataFormat==="channelsFirst"?ee[3]:ee[2],ce=this.dataFormat==="channelsFirst"?ee[1]*this.depthMultiplier:ee[3]*this.depthMultiplier,le=convOutputLength(ne,this.kernelSize[0],this.padding,this.strides[0]),ue=convOutputLength(ae,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[ee[0],ce,le,ue]:[ee[0],le,ue,ce]}getConfig(){const ee=super.getConfig();return ee.depthMultiplier=this.depthMultiplier,ee.depthwiseInitializer=serializeInitializer(this.depthwiseInitializer),ee.depthwiseRegularizer=serializeRegularizer(this.depthwiseRegularizer),ee.depthwiseConstraint=serializeConstraint(this.depthwiseRegularizer),ee}}DepthwiseConv2D.className="DepthwiseConv2D";registerClass(DepthwiseConv2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function standardizeArgs(re,ee,ne,ae){if(Array.isArray(re)){if(ee!=null||ne!=null)throw new ValueError("When inputs is an array, neither initialState or constants should be provided");ae!=null&&(ne=re.slice(re.length-ae,re.length),re=re.slice(0,re.length-ae)),re.length>1&&(ee=re.slice(1,re.length)),re=re[0]}function ce(le){return le==null||Array.isArray(le)?le:[le]}return ee=ce(ee),ne=ce(ne),{inputs:re,initialState:ee,constants:ne}}function rnn(re,ee,ne,ae=!1,ce,le,ue=!1,he=!1){return tidy(()=>{const fe=ee.shape.length;if(fe<3)throw new ValueError(`Input should be at least 3D, but is ${fe}D.`);const me=[1,0].concat(range$3(2,fe));if(ee=transpose$2(ee,me),le!=null)throw new NotImplementedError("The rnn() functoin of the deeplearn.js backend does not support constants yet.");ue&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),ce!=null&&(ce=ce.asType("bool").asType("float32"),ce.rank===fe-1&&(ce=expandDims$3(ce,-1)),ce=transpose$2(ce,me)),ae&&(ee=reverse$2(ee,0),ce!=null&&(ce=reverse$2(ce,0)));const ge=[];let ve,ye=ne;const be=ee.shape[0],Ee=unstack(ee);let Ce;ce!=null&&(Ce=unstack(ce));for(let Te=0;Te<be;++Te){const ke=Ee[Te],Ne=tidy(()=>re(ke,ye));if(ce==null)ve=Ne[0],ye=Ne[1];else{const Fe=tidy(()=>{const De=Ce[Te],Oe=onesLike$2(De).sub(De),Re=Ne[0].mul(De).add(ye[0].mul(Oe)),Be=ye.map((Le,je)=>Ne[1][je].mul(De).add(Le.mul(Oe)));return{output:Re,newStates:Be}});ve=Fe.output,ye=Fe.newStates}he&&ge.push(ve)}let Se;return he&&(Se=stack$1(ge,1)),[ve,Se,ye]})}class RNN extends Layer{constructor(ee){super(ee);let ne;if(ee.cell==null)throw new ValueError("cell property is missing for the constructor of RNN.");if(Array.isArray(ee.cell)?ne=new StackedRNNCells({cells:ee.cell}):ne=ee.cell,ne.stateSize==null)throw new ValueError("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=ne,this.returnSequences=ee.returnSequences==null?!1:ee.returnSequences,this.returnState=ee.returnState==null?!1:ee.returnState,this.goBackwards=ee.goBackwards==null?!1:ee.goBackwards,this._stateful=ee.stateful==null?!1:ee.stateful,this.unroll=ee.unroll==null?!1:ee.unroll,this.supportsMasking=!0,this.inputSpec=[new InputSpec({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const ee=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return range$3(0,ee).map(ne=>null)}else return this.states_}setStates(ee){this.states_=ee}computeOutputShape(ee){isArrayOfShapes(ee)&&(ee=ee[0]),ee=ee;let ne=this.cell.stateSize;Array.isArray(ne)||(ne=[ne]);const ae=ne[0];let ce;if(this.returnSequences?ce=[ee[0],ee[1],ae]:ce=[ee[0],ae],this.returnState){const le=[];for(const ue of ne)le.push([ee[0],ue]);return[ce].concat(le)}else return ce}computeMask(ee,ne){return tidy(()=>{Array.isArray(ne)&&(ne=ne[0]);const ae=this.returnSequences?ne:null;if(this.returnState){const ce=this.states.map(le=>null);return[ae].concat(ce)}else return ae})}get states(){if(this.states_==null){const ee=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,ne=[];for(let ae=0;ae<ee;++ae)ne.push(null);return ne}else return this.states_}set states(ee){this.states_=ee}build(ee){if(this.numConstants!=null)throw new NotImplementedError("Constants support is not implemented in RNN yet.");isArrayOfShapes(ee)&&(ee=ee[0]),ee=ee;const ne=this.stateful?ee[0]:null,ae=ee.slice(2);this.inputSpec[0]=new InputSpec({shape:[ne,null,...ae]});const ce=[ee[0]].concat(ee.slice(2));this.cell.build(ce);let le;if(Array.isArray(this.cell.stateSize)?le=this.cell.stateSize:le=[this.cell.stateSize],this.stateSpec!=null){if(!arraysEqual(this.stateSpec.map(ue=>ue.shape[ue.shape.length-1]),le))throw new ValueError(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=le.map(ue=>new InputSpec({shape:[null,ue]}));this.stateful&&this.resetStates()}resetStates(ee,ne=!1){tidy(()=>{if(!this.stateful)throw new AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");const ae=this.inputSpec[0].shape[0];if(ae==null)throw new ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(ce=>zeros$1([ae,ce])):this.states_=[zeros$1([ae,this.cell.stateSize])];else if(ee==null)dispose(this.states_),this.keptStates!=null&&(dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(ce=>zeros$1([ae,ce])):this.states_[0]=zeros$1([ae,this.cell.stateSize]);else{if(Array.isArray(ee)||(ee=[ee]),ee.length!==this.states_.length)throw new ValueError(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${ee.length} state value(s). Input received: ${ee}`);ne===!0?this.keptStates.push(this.states_.slice()):dispose(this.states_);for(let ce=0;ce<this.states_.length;++ce){const le=ee[ce],ue=Array.isArray(this.cell.stateSize)?this.cell.stateSize[ce]:this.cell.stateSize,he=[ae,ue];if(!arraysEqual(le.shape,he))throw new ValueError(`State ${ce} is incompatible with layer ${this.name}: expected shape=${he}, received shape=${le.shape}`);this.states_[ce]=le}}this.states_=this.states_.map(ce=>keep(ce.clone()))})}apply(ee,ne){let ae=ne==null?null:ne.initialState,ce=ne==null?null:ne.constants;ne==null&&(ne={});const le=standardizeArgs(ee,ae,ce,this.numConstants);ee=le.inputs,ae=le.initialState,ce=le.constants;let ue=[],he=[];if(ae!=null){ne.initialState=ae,ue=ue.concat(ae),this.stateSpec=[];for(const me of ae)this.stateSpec.push(new InputSpec({shape:me.shape}));he=he.concat(this.stateSpec)}if(ce!=null&&(ne.constants=ce,ue=ue.concat(ce),this.numConstants=ce.length),ue[0]instanceof SymbolicTensor){const me=[ee].concat(ue),ge=this.inputSpec.concat(he),ve=this.inputSpec;this.inputSpec=ge;const ye=super.apply(me,ne);return this.inputSpec=ve,ye}else return super.apply(ee,ne)}call(ee,ne){return tidy(()=>{const ae=ne==null?null:ne.mask,ce=ne==null?null:ne.training;let le=ne==null?null:ne.initialState;ee=getExactlyOneTensor(ee),le==null&&(this.stateful?le=this.states_:le=this.getInitialState(ee));const ue=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(le.length!==ue)throw new ValueError(`RNN Layer has ${ue} state(s) but was passed ${le.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const he={training:ce},me=rnn((Ee,Ce)=>{const Se=this.cell.call([Ee].concat(Ce),he);return[Se[0],Se.slice(1)]},ee,le,this.goBackwards,ae,null,this.unroll,this.returnSequences),ge=me[0],ve=me[1],ye=me[2];this.stateful&&this.resetStates(ye,ce);const be=this.returnSequences?ve:ge;return this.returnState?[be].concat(ye):be})}getInitialState(ee){return tidy(()=>{let ne=zeros$1(ee.shape);return ne=sum$2(ne,[1,2]),ne=expandDims$2(ne),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(ae=>ae>1?tile$2(ne,[1,ae]):ne):this.cell.stateSize>1?[tile$2(ne,[1,this.cell.stateSize])]:[ne]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(ee){super.setFastWeightInitDuringBuild(ee),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(ee)}getConfig(){const ee=super.getConfig(),ne={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(ne.numConstants=this.numConstants);const ae=this.cell.getConfig();return this.getClassName()===RNN.className&&(ne.cell={className:this.cell.getClassName(),config:ae}),Object.assign({},ae,ee,ne)}static fromConfig(ee,ne,ae={}){const ce=ne.cell,le=deserialize(ce,ae);return new ee(Object.assign(ne,{cell:le}))}}RNN.className="RNN";registerClass(RNN);class RNNCell extends Layer{}class SimpleRNNCell extends RNNCell{constructor(ee){super(ee),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=ee.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation(ee.activation==null?this.DEFAULT_ACTIVATION:ee.activation),this.useBias=ee.useBias==null?!0:ee.useBias,this.kernelInitializer=getInitializer(ee.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=getInitializer(ee.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=getInitializer(ee.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=getRegularizer(ee.kernelRegularizer),this.recurrentRegularizer=getRegularizer(ee.recurrentRegularizer),this.biasRegularizer=getRegularizer(ee.biasRegularizer),this.kernelConstraint=getConstraint(ee.kernelConstraint),this.recurrentConstraint=getConstraint(ee.recurrentConstraint),this.biasConstraint=getConstraint(ee.biasConstraint),this.dropout=min$3([1,max$3([0,ee.dropout==null?0:ee.dropout])]),this.recurrentDropout=min$3([1,max$3([0,ee.recurrentDropout==null?0:ee.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(ee){ee=getExactlyOneShape(ee),this.kernel=this.addWeight("kernel",[ee[ee.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(ee,ne){return tidy(()=>{if(ee=ee,ee.length!==2)throw new ValueError(`SimpleRNNCell expects 2 input Tensors, got ${ee.length}.`);let ae=ee[1];ee=ee[0];const ce=ne.training==null?!1:ne.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2(ee),rate:this.dropout,training:ce})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(ae),rate:this.recurrentDropout,training:ce}));let le;const ue=this.dropoutMask,he=this.recurrentDropoutMask;ue!=null?le=dot(mul(ee,ue),this.kernel.read()):le=dot(ee,this.kernel.read()),this.bias!=null&&(le=biasAdd(le,this.bias.read())),he!=null&&(ae=mul(ae,he));let fe=add$1(le,dot(ae,this.recurrentKernel.read()));return this.activation!=null&&(fe=this.activation.apply(fe)),[fe,fe]})}getConfig(){const ee=super.getConfig(),ne={units:this.units,activation:serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},ee,ne)}}SimpleRNNCell.className="SimpleRNNCell";registerClass(SimpleRNNCell);class SimpleRNN extends RNN{constructor(ee){ee.cell=new SimpleRNNCell(ee),super(ee)}call(ee,ne){return tidy(()=>{this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const ae=ne==null?null:ne.mask,ce=ne==null?null:ne.training,le=ne==null?null:ne.initialState;return super.call(ee,{mask:ae,training:ce,initialState:le})})}static fromConfig(ee,ne){return new ee(ne)}}SimpleRNN.className="SimpleRNN";registerClass(SimpleRNN);class GRUCell extends RNNCell{constructor(ee){if(super(ee),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",ee.resetAfter)throw new ValueError("GRUCell does not support reset_after parameter set to true.");this.units=ee.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation(ee.activation===void 0?this.DEFAULT_ACTIVATION:ee.activation),this.recurrentActivation=getActivation(ee.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:ee.recurrentActivation),this.useBias=ee.useBias==null?!0:ee.useBias,this.kernelInitializer=getInitializer(ee.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=getInitializer(ee.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=getInitializer(ee.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=getRegularizer(ee.kernelRegularizer),this.recurrentRegularizer=getRegularizer(ee.recurrentRegularizer),this.biasRegularizer=getRegularizer(ee.biasRegularizer),this.kernelConstraint=getConstraint(ee.kernelConstraint),this.recurrentConstraint=getConstraint(ee.recurrentConstraint),this.biasConstraint=getConstraint(ee.biasConstraint),this.dropout=min$3([1,max$3([0,ee.dropout==null?0:ee.dropout])]),this.recurrentDropout=min$3([1,max$3([0,ee.recurrentDropout==null?0:ee.recurrentDropout])]),this.implementation=ee.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(ee){ee=getExactlyOneShape(ee);const ne=ee[ee.length-1];this.kernel=this.addWeight("kernel",[ne,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(ee,ne){return tidy(()=>{if(ee=ee,ee.length!==2)throw new ValueError(`GRUCell expects 2 input Tensors (inputs, h, c), got ${ee.length}.`);const ae=ne.training==null?!1:ne.training;let ce=ee[1];ee=ee[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2(ee),rate:this.dropout,training:ae,count:3})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(ce),rate:this.recurrentDropout,training:ae,count:3}));const le=this.dropoutMask,ue=this.recurrentDropoutMask;let he,fe,me;0<this.dropout&&this.dropout<1&&(ee=mul(ee,le[0]));let ge=dot(ee,this.kernel.read());this.useBias&&(ge=biasAdd(ge,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(ce=mul(ce,ue[0]));const ve=this.recurrentKernel.read(),[ye,be]=split(ve,[2*this.units,this.units],ve.rank-1),Ee=dot(ce,ye),[Ce,Se,Te]=split(ge,3,ge.rank-1),[ke,Ne]=split(Ee,2,Ee.rank-1);he=this.recurrentActivation.apply(add$1(Ce,ke)),fe=this.recurrentActivation.apply(add$1(Se,Ne));const Fe=dot(mul(fe,ce),be);me=this.activation.apply(add$1(Te,Fe));const De=add$1(mul(he,ce),mul(add$1(1,neg$2(he)),me));return[De,De]})}getConfig(){const ee=super.getConfig(),ne={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},ee,ne)}}GRUCell.className="GRUCell";registerClass(GRUCell);class GRU extends RNN{constructor(ee){ee.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),ee.cell=new GRUCell(ee),super(ee)}call(ee,ne){return tidy(()=>{this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const ae=ne==null?null:ne.mask,ce=ne==null?null:ne.training,le=ne==null?null:ne.initialState;return super.call(ee,{mask:ae,training:ce,initialState:le})})}static fromConfig(ee,ne){return ne.implmentation===0&&(ne.implementation=1),new ee(ne)}}GRU.className="GRU";registerClass(GRU);class LSTMCell extends RNNCell{constructor(ee){super(ee),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=ee.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation(ee.activation===void 0?this.DEFAULT_ACTIVATION:ee.activation),this.recurrentActivation=getActivation(ee.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:ee.recurrentActivation),this.useBias=ee.useBias==null?!0:ee.useBias,this.kernelInitializer=getInitializer(ee.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=getInitializer(ee.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=getInitializer(ee.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=ee.unitForgetBias,this.kernelRegularizer=getRegularizer(ee.kernelRegularizer),this.recurrentRegularizer=getRegularizer(ee.recurrentRegularizer),this.biasRegularizer=getRegularizer(ee.biasRegularizer),this.kernelConstraint=getConstraint(ee.kernelConstraint),this.recurrentConstraint=getConstraint(ee.recurrentConstraint),this.biasConstraint=getConstraint(ee.biasConstraint),this.dropout=min$3([1,max$3([0,ee.dropout==null?0:ee.dropout])]),this.recurrentDropout=min$3([1,max$3([0,ee.recurrentDropout==null?0:ee.recurrentDropout])]),this.implementation=ee.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(ee){var ne;ee=getExactlyOneShape(ee);const ae=ee[ee.length-1];this.kernel=this.addWeight("kernel",[ae,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let ce;if(this.useBias){if(this.unitForgetBias){const le=this.biasInitializer,ue=this.units;ce=new(ne=class extends Initializer{apply(fe,me){const ge=le.apply([ue]),ve=new Ones().apply([ue]),ye=le.apply([ue*2]);return concatAlongFirstAxis(concatAlongFirstAxis(ge,ve),ye)}},ne.className="CustomInit",ne)}else ce=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,ce,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(ee,ne){return tidy(()=>{const ae=ne.training==null?!1:ne.training;if(ee=ee,ee.length!==3)throw new ValueError(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${ee.length}.`);let ce=ee[1];const le=ee[2];ee=ee[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2(ee),rate:this.dropout,training:ae,count:4})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(ce),rate:this.recurrentDropout,training:ae,count:4}));const ue=this.dropoutMask,he=this.recurrentDropoutMask;let fe,me,ge,ve;0<this.dropout&&this.dropout<1&&(ee=mul(ee,ue[0]));let ye=dot(ee,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(ce=mul(ce,he[0])),ye=add$1(ye,dot(ce,this.recurrentKernel.read())),this.useBias&&(ye=biasAdd(ye,this.bias.read()));const[be,Ee,Ce,Se]=split(ye,4,ye.rank-1);fe=this.recurrentActivation.apply(be),me=this.recurrentActivation.apply(Ee),ge=add$1(mul(me,le),mul(fe,this.activation.apply(Ce))),ve=this.recurrentActivation.apply(Se);const Te=mul(ve,this.activation.apply(ge));return[Te,Te,ge]})}getConfig(){const ee=super.getConfig(),ne={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},ee,ne)}}LSTMCell.className="LSTMCell";registerClass(LSTMCell);class LSTM extends RNN{constructor(ee){ee.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),ee.cell=new LSTMCell(ee),super(ee)}call(ee,ne){return tidy(()=>{this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const ae=ne==null?null:ne.mask,ce=ne==null?null:ne.training,le=ne==null?null:ne.initialState;return super.call(ee,{mask:ae,training:ce,initialState:le})})}static fromConfig(ee,ne){return ne.implmentation===0&&(ne.implementation=1),new ee(ne)}}LSTM.className="LSTM";registerClass(LSTM);class StackedRNNCells extends RNNCell{constructor(ee){super(ee),this.cells=ee.cells}get stateSize(){const ee=[];for(const ne of this.cells.slice().reverse())Array.isArray(ne.stateSize)?ee.push(...ne.stateSize):ee.push(ne.stateSize);return ee}call(ee,ne){return tidy(()=>{ee=ee;let ae=ee.slice(1);const ce=[];for(const he of this.cells.slice().reverse())Array.isArray(he.stateSize)?ce.push(ae.splice(0,he.stateSize.length)):ce.push(ae.splice(0,1));ce.reverse();const le=[];let ue;for(let he=0;he<this.cells.length;++he){const fe=this.cells[he];ae=ce[he],he===0?ue=[ee[0]].concat(ae):ue=[ue[0]].concat(ae),ue=fe.call(ue,ne),le.push(ue.slice(1))}ae=[];for(const he of le.slice().reverse())ae.push(...he);return[ue[0]].concat(ae)})}build(ee){isArrayOfShapes(ee)&&(ee=ee[0]),ee=ee;let ne;this.cells.forEach((ae,ce)=>{nameScope(`RNNCell_${ce}`,()=>{ae.build(ee),Array.isArray(ae.stateSize)?ne=ae.stateSize[0]:ne=ae.stateSize,ee=[ee[0],ne]})}),this.built=!0}getConfig(){const ee=super.getConfig(),ne=le=>({className:le.getClassName(),config:le.getConfig()}),ce={cells:this.cells.map(ne)};return Object.assign({},ee,ce)}static fromConfig(ee,ne,ae={}){const ce=[];for(const le of ne.cells)ce.push(deserialize(le,ae));return new ee({cells:ce})}get trainableWeights(){if(!this.trainable)return[];const ee=[];for(const ne of this.cells)ee.push(...ne.trainableWeights);return ee}get nonTrainableWeights(){const ee=[];for(const ne of this.cells)ee.push(...ne.nonTrainableWeights);if(!this.trainable){const ne=[];for(const ae of this.cells)ne.push(...ae.trainableWeights);return ne.concat(ee)}return ee}getWeights(){const ee=[];for(const ne of this.cells)ee.push(...ne.weights);return batchGetValue(ee)}setWeights(ee){const ne=[];for(const ae of this.cells){const ce=ae.weights.length,le=ee.splice(ce);for(let ue=0;ue<ae.weights.length;++ue)ne.push([ae.weights[ue],le[ue]])}batchSetValue(ne)}}StackedRNNCells.className="StackedRNNCells";registerClass(StackedRNNCells);function generateDropoutMask(re){const{ones:ee,rate:ne,training:ae=!1,count:ce=1}=re,le=()=>dropout(ee(),ne),ue=()=>inTrainPhase(le,ee,ae);return!ce||ce<=1?keep(ue().clone()):Array(ce).fill(void 0).map(ue).map(fe=>keep(fe.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var __rest=globalThis&&globalThis.__rest||function(re,ee){var ne={};for(var ae in re)Object.prototype.hasOwnProperty.call(re,ae)&&ee.indexOf(ae)<0&&(ne[ae]=re[ae]);if(re!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,ae=Object.getOwnPropertySymbols(re);ce<ae.length;ce++)ee.indexOf(ae[ce])<0&&Object.prototype.propertyIsEnumerable.call(re,ae[ce])&&(ne[ae[ce]]=re[ae[ce]]);return ne};class ConvRNN2D extends RNN{constructor(ee){if(ee.unroll)throw new NotImplementedError("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(ee.cell))throw new NotImplementedError("It is not possible at the moment to stack convolutional cells.");super(ee),this.inputSpec=[new InputSpec({ndim:5})]}call(ee,ne){return tidy(()=>{if(this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),ne&&ne.constants)throw new ValueError("ConvRNN2D cell does not support constants");const ae=ne==null?null:ne.mask,ce=ne==null?null:ne.training,le=ne==null?null:ne.initialState;return super.call(ee,{mask:ae,training:ce,initialState:le})})}computeOutputShape(ee){let ne=this.computeSingleOutputShape(ee);return this.returnSequences||(ne=[ne[0],...ne.slice(2)]),this.returnState&&(ne=[ne,...Array(2).fill([ee[0],...ne.slice(-3)])]),ne}getInitialState(ee){return tidy(()=>{const{stateSize:ne}=this.cell,ae=ee.shape,ce=this.computeSingleOutputShape(ae),le=[ce[0],...ce.slice(2)],ue=zeros$1(le);return Array.isArray(ne)?Array(ne.length).fill(ue):[ue]})}resetStates(ee,ne=!1){tidy(()=>{if(!this.stateful)throw new AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");const ae=this.inputSpec[0].shape,ce=this.computeSingleOutputShape(ae),le=[ce[0],...ce.slice(2)];if(ae[0]==null)throw new ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>zeros$1(le)):this.states_=[zeros$1(le)];else if(ee==null)dispose(this.states_),this.keptStates!=null&&(dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>zeros$1(le)):this.states_[0]=zeros$1(le);else{if(Array.isArray(ee)||(ee=[ee]),ee.length!==this.states_.length)throw new ValueError(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${ee.length} state value(s). Input received: ${ee}`);ne?this.keptStates.push(this.states_.slice()):dispose(this.states_);for(let he=0;he<this.states_.length;++he){const fe=ee[he],me=le;if(!arraysEqual(fe.shape,me))throw new ValueError(`State ${he} is incompatible with layer ${this.name}: expected shape=${me}, received shape=${fe.shape}`);this.states_[he]=fe}}this.states_=this.states_.map(he=>keep(he.clone()))})}computeSingleOutputShape(ee){const{dataFormat:ne,filters:ae,kernelSize:ce,padding:le,strides:ue,dilationRate:he}=this.cell,fe=ne==="channelsFirst",me=ee[fe?3:2],ge=ee[fe?4:3],ve=convOutputLength(me,ce[0],le,ue[0],he[0]),ye=convOutputLength(ge,ce[1],le,ue[1],he[1]);return[...ee.slice(0,2),...fe?[ae,ve,ye]:[ve,ye,ae]]}}ConvRNN2D.className="ConvRNN2D";class ConvLSTM2DCell extends LSTMCell{constructor(ee){const{filters:ne,kernelSize:ae,strides:ce,padding:le,dataFormat:ue,dilationRate:he}=ee;super(Object.assign({},ee,{units:ne})),this.filters=ne,assertPositiveInteger(this.filters,"filters"),this.kernelSize=normalizeArray(ae,2,"kernelSize"),this.kernelSize.forEach(fe=>assertPositiveInteger(fe,"kernelSize")),this.strides=normalizeArray(ce||1,2,"strides"),this.strides.forEach(fe=>assertPositiveInteger(fe,"strides")),this.padding=le||"valid",checkPaddingMode(this.padding),this.dataFormat=ue||"channelsLast",checkDataFormat(this.dataFormat),this.dilationRate=normalizeArray(he||1,2,"dilationRate"),this.dilationRate.forEach(fe=>assertPositiveInteger(fe,"dilationRate"))}build(ee){var ne;ee=getExactlyOneShape(ee);const ae=this.dataFormat==="channelsFirst"?1:ee.length-1;if(ee[ae]==null)throw new ValueError(`The channel dimension of the input should be defined. Found ${ee[ae]}`);const ce=ee[ae],le=4,ue=this.kernelSize.concat([ce,this.filters*le]);this.kernel=this.addWeight("kernel",ue,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const he=this.kernelSize.concat([this.filters,this.filters*le]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",he,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let fe;if(this.unitForgetBias){const me=this.biasInitializer,ge=this.filters;fe=new(ne=class extends Initializer{apply(ye,be){const Ee=me.apply([ge]),Ce=ones([ge]),Se=me.apply([ge*2]);return concatenate([Ee,Ce,Se])}},ne.className="CustomInit",ne)}else fe=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*le],null,fe,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(ee,ne){return tidy(()=>{if(ee.length!==3)throw new ValueError(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${ee.length}.`);const ae=ne.training||!1,ce=ee[0],le=ee[1],ue=ee[2],he=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2(ce),rate:this.dropout,training:ae,count:he}));const fe=this.dropoutMask,me=(Vt,Qt,Yt)=>!Qt||!Qt[Yt]?Vt:mul(Qt[Yt],Vt);let ge=me(ce,fe,0),ve=me(ce,fe,1),ye=me(ce,fe,2),be=me(ce,fe,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(le),rate:this.recurrentDropout,training:ae,count:he}));const Ee=this.recurrentDropoutMask;let Ce=me(le,Ee,0),Se=me(le,Ee,1),Te=me(le,Ee,2),ke=me(le,Ee,3);const Ne=3,[Fe,De,Oe,Re]=split(this.kernel.read(),he,Ne),[Be,Le,je,Ge]=this.useBias?split(this.bias.read(),he):[null,null,null,null];ge=this.inputConv(ge,Fe,Be,this.padding),ve=this.inputConv(ve,De,Le,this.padding),ye=this.inputConv(ye,Oe,je,this.padding),be=this.inputConv(be,Re,Ge,this.padding);const[qe,Ue,ze,He]=split(this.recurrentKernel.read(),he,Ne);Ce=this.recurrentConv(Ce,qe),Se=this.recurrentConv(Se,Ue),Te=this.recurrentConv(Te,ze),ke=this.recurrentConv(ke,He);const Ye=this.recurrentActivation.apply(add$1(ge,Ce)),Xe=this.recurrentActivation.apply(add$1(ve,Se)),We=add$1(mul(Xe,ue),mul(Ye,this.activation.apply(add$1(ye,Te)))),Ze=mul(this.recurrentActivation.apply(add$1(be,ke)),this.activation.apply(We));return[Ze,Ze,We]})}getConfig(){const ee=super.getConfig(),ne=__rest(ee,["units"]),ae={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},ne,ae)}inputConv(ee,ne,ae,ce){const le=conv2d$2(ee,ne,this.strides,ce||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return ae?biasAdd(le,ae,this.dataFormat):le}recurrentConv(ee,ne){return conv2d$2(ee,ne,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}ConvLSTM2DCell.className="ConvLSTM2DCell";registerClass(ConvLSTM2DCell);class ConvLSTM2D extends ConvRNN2D{constructor(ee){const ne=new ConvLSTM2DCell(ee);super(Object.assign({},ee,{cell:ne}))}static fromConfig(ee,ne){return new ee(ne)}}ConvLSTM2D.className="ConvLSTM2D";registerClass(ConvLSTM2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Dropout extends Layer{constructor(ee){super(ee),this.rate=Math.max(Math.min(ee.rate,1),0),this.noiseShape=ee.noiseShape,this.seed=ee.seed,this.supportsMasking=!0}getNoiseShape(ee){if(this.noiseShape==null)return this.noiseShape;const ne=ee.shape,ae=[];for(let ce=0;ce<this.noiseShape.length;++ce)ae.push(this.noiseShape[ce]==null?ne[ce]:this.noiseShape[ce]);return ae}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);const ae=getExactlyOneTensor(ee);if(0<this.rate&&this.rate<1){const ce=ne.training==null?!1:ne.training,le=this.getNoiseShape(ae);return inTrainPhase(()=>dropout(ae,this.rate,le,this.seed),()=>ae,ce)}return ee})}getConfig(){const ee={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},ne=super.getConfig();return Object.assign(ee,ne),ee}dispose(){return super.dispose()}}Dropout.className="Dropout";registerClass(Dropout);class SpatialDropout1D extends Dropout{constructor(ee){super(ee),this.inputSpec=[{ndim:3}]}getNoiseShape(ee){const ne=ee.shape;return[ne[0],1,ne[2]]}}SpatialDropout1D.className="SpatialDropout1D";registerClass(SpatialDropout1D);class Dense extends Layer{constructor(ee){if(super(ee),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",ee.batchInputShape==null&&ee.inputShape==null&&ee.inputDim!=null){let ne=null;ee.batchSize!=null&&(ne=ee.batchSize),this.batchInputShape=[ne,ee.inputDim]}this.units=ee.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation(ee.activation),ee.useBias!=null&&(this.useBias=ee.useBias),this.kernelInitializer=getInitializer(ee.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=getInitializer(ee.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=getConstraint(ee.kernelConstraint),this.biasConstraint=getConstraint(ee.biasConstraint),this.kernelRegularizer=getRegularizer(ee.kernelRegularizer),this.biasRegularizer=getRegularizer(ee.biasRegularizer),this.activityRegularizer=getRegularizer(ee.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(ee){ee=getExactlyOneShape(ee);const ne=ee[ee.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[ne,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:ne}}],this.built=!0}computeOutputShape(ee){ee=getExactlyOneShape(ee);const ne=ee.slice();return ne[ne.length-1]=this.units,ne}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);const ae=getExactlyOneTensor(ee),ce=mapActivationToFusedKernel(this.activation.getClassName());let le;return ce!=null?le=dot(ae,this.kernel.read(),ce,this.bias?this.bias.read():null):(le=dot(ae,this.kernel.read()),this.bias!=null&&(le=biasAdd(le,this.bias.read())),this.activation!=null&&(le=this.activation.apply(le))),le})}getConfig(){const ee={units:this.units,activation:serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),biasConstraint:serializeConstraint(this.biasConstraint)},ne=super.getConfig();return Object.assign(ee,ne),ee}}Dense.className="Dense";registerClass(Dense);class Flatten extends Layer{constructor(ee){ee=ee||{},super(ee),this.inputSpec=[{minNDim:3}],this.dataFormat=ee.dataFormat}computeOutputShape(ee){ee=getExactlyOneShape(ee);for(const ne of ee.slice(1))if(ne==null)throw new ValueError(`The shape of the input to "Flatten" is not fully defined (got ${ee.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[ee[0],arrayProd(ee,1)]}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);let ae=getExactlyOneTensor(ee);if(this.dataFormat==="channelsFirst"&&ae.rank>1){const ce=[0];for(let le=2;le<ae.rank;++le)ce.push(le);ce.push(1),ae=ae.transpose(ce)}return batchFlatten(ae)})}getConfig(){const ee={};this.dataFormat!=null&&(ee.dataFormat=this.dataFormat);const ne=super.getConfig();return Object.assign(ee,ne),ee}}Flatten.className="Flatten";registerClass(Flatten);class Activation extends Layer{constructor(ee){super(ee),this.supportsMasking=!0,this.activation=getActivation(ee.activation)}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);const ae=getExactlyOneTensor(ee);return this.activation.apply(ae)})}getConfig(){const ee={activation:serializeActivation(this.activation)},ne=super.getConfig();return Object.assign(ee,ne),ee}}Activation.className="Activation";registerClass(Activation);class RepeatVector extends Layer{constructor(ee){super(ee),this.n=ee.n,this.inputSpec=[{ndim:2}]}computeOutputShape(ee){return[ee[0],this.n,ee[1]]}call(ee,ne){return tidy(()=>(ee=getExactlyOneTensor(ee),repeat(ee,this.n)))}getConfig(){const ee={n:this.n},ne=super.getConfig();return Object.assign(ee,ne),ee}}RepeatVector.className="RepeatVector";registerClass(RepeatVector);class Reshape extends Layer{constructor(ee){super(ee),this.targetShape=ee.targetShape;for(let ne=0;ne<this.targetShape.length;++ne)this.isUnknown(this.targetShape[ne])&&(this.targetShape[ne]=null)}isUnknown(ee){return ee<0||ee==null}fixUnknownDimension(ee,ne){const ae="Total size of new array must be unchanged.",ce=ne.slice();let le=1,ue=null;for(let fe=0;fe<ce.length;++fe){const me=ce[fe];if(this.isUnknown(me))if(ue===null)ue=fe;else throw new ValueError("Can only specifiy one unknown dimension.");else le*=me}const he=arrayProd(ee);if(ue!==null){if(le===0||he%le!==0)throw new ValueError(ae);ce[ue]=he/le}else if(he!==le)throw new ValueError(ae);return ce}computeOutputShape(ee){let ne=!1;for(let ae=0;ae<ee.length;++ae)if(this.isUnknown(ee[ae])){ne=!0;break}return ne?ee.slice(0,1).concat(this.targetShape):ee.slice(0,1).concat(this.fixUnknownDimension(ee.slice(1),this.targetShape))}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);const ae=getExactlyOneTensor(ee),ce=ae.shape,le=ce.slice(0,1).concat(this.fixUnknownDimension(ce.slice(1),this.targetShape));return ae.reshape(le)})}getConfig(){const ee={targetShape:this.targetShape},ne=super.getConfig();return Object.assign(ee,ne),ee}}Reshape.className="Reshape";registerClass(Reshape);class Permute extends Layer{constructor(ee){if(super(ee),ee.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(ee.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${ee.dims} instead.`);const ne=range$3(1,ee.dims.length+1);if(!arraysEqual(ee.dims.slice().sort(),ne))throw new Error("Invalid permutation `dims`: "+JSON.stringify(ee.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=ee.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new InputSpec({ndim:this.dims.length+1})]}computeOutputShape(ee){ee=getExactlyOneShape(ee);const ne=ee.slice();return this.dims.forEach((ae,ce)=>{ne[ce+1]=ee[ae]}),ne}call(ee,ne){return transpose$2(getExactlyOneTensor(ee),this.dimsIncludingBatch)}getConfig(){const ee={dims:this.dims},ne=super.getConfig();return Object.assign(ee,ne),ee}}Permute.className="Permute";registerClass(Permute);class Masking extends Layer{constructor(ee){super(ee??{}),this.supportsMasking=!0,ee!=null?this.maskValue=ee.maskValue==null?0:ee.maskValue:this.maskValue=0}computeOutputShape(ee){return ee}getConfig(){const ee=super.getConfig(),ne={maskValue:this.maskValue};return Object.assign(ne,ee),ne}computeMask(ee,ne){const ae=getExactlyOneTensor(ee),ce=-1;return any$2(notEqual$2(ae,this.maskValue),ce)}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);const ae=getExactlyOneTensor(ee),ce=-1,le=!0,ue=any$2(notEqual$2(ae,this.maskValue),ce,le);return ae.mul(ue.asType(ae.dtype))})}}Masking.className="Masking";registerClass(Masking);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Embedding extends Layer{constructor(ee){if(super(ee),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",ee.batchInputShape==null&&ee.inputShape==null){let ne=null;ee.batchSize!=null&&(ne=ee.batchSize),ee.inputLength==null?this.batchInputShape=[ne,null]:this.batchInputShape=[ne].concat(toList(ee.inputLength))}this.inputDim=ee.inputDim,assertPositiveInteger(this.inputDim,"inputDim"),this.outputDim=ee.outputDim,assertPositiveInteger(this.outputDim,"outputDim"),this.embeddingsInitializer=getInitializer(ee.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=getRegularizer(ee.embeddingsRegularizer),this.activityRegularizer=getRegularizer(ee.activityRegularizer),this.embeddingsConstraint=getConstraint(ee.embeddingsConstraint),this.maskZero=ee.maskZero,this.supportsMasking=ee.maskZero,this.inputLength=ee.inputLength}build(ee){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(ee){}computeMask(ee,ne){return tidy(()=>this.maskZero?(ee=getExactlyOneTensor(ee),notEqual$2(ee,zerosLike$2(ee))):null)}computeOutputShape(ee){if(ee=getExactlyOneShape(ee),this.inputLength==null)return[...ee,this.outputDim];const ne=toList(this.inputLength);if(ne.length!==ee.length-1)throw new ValueError(`"inputLength" is ${this.inputLength}, but received input shape has shape ${ee}`);{let ae=0;for(let ce=0;ce<ne.length;++ce){const le=ne[ce],ue=ee[ce+1];if(le!=null&&ue!=null&&le!==ue)throw new ValueError(`"inputLength" is ${this.inputLength}, but received input shape has shape ${ee}`);le==null&&(ne[ae]=ue),ae++}}return[ee[0],...ne,this.outputDim]}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);let ae=getExactlyOneTensor(ee);return ae.dtype!=="int32"&&(ae=cast$2(ae,"int32")),gather(this.embeddings.read(),ae.as1D()).reshape(getExactlyOneShape(this.computeOutputShape(ae.shape)))})}getConfig(){const ee={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:serializeInitializer(this.embeddingsInitializer),embeddingsRegularizer:serializeRegularizer(this.embeddingsRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),embeddingsConstraint:serializeConstraint(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},ne=super.getConfig();return Object.assign(ee,ne),ee}}Embedding.className="Embedding";registerClass(Embedding);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Merge$1=class extends Layer{constructor(ee){super(ee||{}),this.supportsMasking=!0}mergeFunction(ee){throw new NotImplementedError}computeElementwiseOpOutputShape(ee,ne){if(ee==null||ne==null)return null;if(ee.length<ne.length)return this.computeElementwiseOpOutputShape(ne,ee);if(ne.length===0)return ee;const ae=ee.slice(0,ee.length-ne.length);for(let ce=0;ce<ne.length;++ce){const le=ee[ee.length-ne.length+ce],ue=ne[ce];if(le==null||ue==null||le<0||ue<0)ae.push(null);else if(le===1)ae.push(ue);else if(ue===1)ae.push(le);else{if(le!==ue)throw new ValueError("Operands could not be broadcast together with shapes "+JSON.stringify(ee)+" "+JSON.stringify(ne));ae.push(le)}}return ae}build(ee){if(Array.isArray(ee)&&!Array.isArray(ee[0])&&(ee=[getExactlyOneShape(ee)]),ee=ee,ee.length<2)throw new ValueError(`A merge layer should be called on an Array of at least 2 inputs. Got ${ee.length} input(s).`);let ne=[];for(const le of ee)le!=null&&le[0]!==null&&ne.push(le[0]);if(ne=unique$3(ne),ne.length>1)throw new ValueError(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(ee)}.`);let ae=ee[0]==null?null:ee[0].slice(1);for(let le=1;le<ee.length;++le){const ue=ee[le]==null?null:ee[le].slice(1);ae=this.computeElementwiseOpOutputShape(ae,ue)}const ce=ee.map(le=>le.length);ee.indexOf(null)===-1&&unique$3(ce).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(ee,ne){return tidy(()=>{if(ee=ee,this.reshapeRequired){const ae=[],ce=ee.map(le=>le.rank);if(ce.indexOf(null)===-1){const le=max$3(ce);for(let ue of ee){const he=ue.rank;for(let fe=0;fe<le-he;++fe)ue=expandDims$2(ue,1);ae.push(ue)}return this.mergeFunction(ae)}else{let le=!1;for(const fe of ee){const me=fe.rank;if(me==null){const ge=fe.shape,ve=ge[0],ye=ge.slice(1).concat([ve]);let be=fe.reshape([ve].concat(arrayProd(ge.slice(1))));be=transpose$2(be,[1,0]),be=be.reshape(ye),ae.push(be),le=!0}else if(me>1){const ge=range$3(1,me).concat([0]);ae.push(transpose$2(fe,ge)),le=!0}else ae.push(fe)}let ue=this.mergeFunction(ae);const he=ue.rank;if(le){if(he==null){const fe=ue.shape,me=fe.length,ge=fe[me-1],ve=[ge].concat(fe.slice(0,fe.length-1));ue=transpose$2(ue.reshape([-1,ge]),[1,0]).reshape(ve)}else if(he>1){const fe=[he-1].concat(range$3(0,he-1));ue=transpose$2(ue,fe)}}return ue}}else return this.mergeFunction(ee)})}computeOutputShape(ee){ee=ee;let ne;ee[0]==null?ne=null:ne=ee[0].slice(1);for(let ce=1;ce<ee.length;++ce){const le=ee[ce]==null?null:ee[ce].slice(1);ne=this.computeElementwiseOpOutputShape(ne,le)}let ae=[];for(const ce of ee)ce!=null&&ce[0]!==null&&ae.push(ce[0]);return ae=unique$3(ae),ae.length===1?ne=ae.concat(ne):ne=[null].concat(ne),ne}computeMask(ee,ne){return tidy(()=>{if(ne==null)return null;if(!Array.isArray(ne))throw new ValueError("`mask` should be an Array");if(!Array.isArray(ee))throw new ValueError("`inputs` should be an Array");if(ne.length!==ee.length)throw new ValueError(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${ee.length} vs ${ne.length})`);if(ne.every(ce=>ce==null))return null;ne=ne.map(ce=>ce==null?ce:expandDims$3(ce,0));let ae=ne[0];for(let ce=1;ce<ne.length-1;++ce)ae=logicalAnd$2(ae,ne[ce]);return ae})}},Add$1=class extends Merge$1{constructor(ee){super(ee)}mergeFunction(ee){return tidy(()=>{let ne=ee[0].clone();for(let ae=1;ae<ee.length;++ae)ne=add$1(ne,ee[ae]);return ne})}};Add$1.className="Add";registerClass(Add$1);let Multiply$1=class extends Merge$1{constructor(ee){super(ee)}mergeFunction(ee){return tidy(()=>{let ne=ee[0].clone();for(let ae=1;ae<ee.length;++ae)ne=mul(ne,ee[ae]);return ne})}};Multiply$1.className="Multiply";registerClass(Multiply$1);class Average extends Merge$1{constructor(ee){super(ee)}mergeFunction(ee){return tidy(()=>{let ne=ee[0].clone();for(let ae=1;ae<ee.length;++ae)ne=add$1(ne,ee[ae]);return mul(1/ee.length,ne)})}}Average.className="Average";registerClass(Average);class Maximum extends Merge$1{constructor(ee){super(ee)}mergeFunction(ee){return tidy(()=>{let ne=ee[0];for(let ae=1;ae<ee.length;++ae)ne=maximum$2(ne,ee[ae]);return ne})}}Maximum.className="Maximum";registerClass(Maximum);class Minimum extends Merge$1{constructor(ee){super(ee)}mergeFunction(ee){return tidy(()=>{let ne=ee[0];for(let ae=1;ae<ee.length;++ae)ne=minimum$2(ne,ee[ae]);return ne})}}Minimum.className="Minimum";registerClass(Minimum);class Concatenate extends Merge$1{constructor(ee){super(ee),this.DEFAULT_AXIS=-1,ee==null&&(ee={}),this.axis=ee.axis==null?this.DEFAULT_AXIS:ee.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(ee){if(!(Array.isArray(ee)&&Array.isArray(ee[0]))||ee.length===1)throw new ValueError("A `Concatenate` layer should be called on a list of at least 2 inputs");ee=ee;let ne=!0;for(const ce of ee)if(ce!=null){ne=!1;break}if(ne)return;const ae=[];for(let ce=0;ce<ee.length;++ce){const le=ee[ce].slice();le.splice(this.axis,1);let ue=!1;for(const he of ae)if(arraysEqual(he,le)){ue=!0;break}ue||ae.push(le)}if(ae.length>1)throw new ValueError("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(ee))}mergeFunction(ee){return tidy(()=>concatenate(ee,this.axis))}computeOutputShape(ee){if(!(Array.isArray(ee)&&Array.isArray(ee[0])))throw new ValueError("A `Concatenate` layer should be called on a list of inputs.");const ne=ee,ae=ne[0].slice(),ce=this.axis<0?ae.length+this.axis:this.axis;for(const le of ne.slice(1)){if(ae[ce]==null||le[ce]==null){ae[ce]=null;break}ae[ce]+=le[ce]}return ae}computeMask(ee,ne){if(ne==null)return null;if(!Array.isArray(ne))throw new ValueError("`mask` should be an array for Concatenate");if(!Array.isArray(ee))throw new ValueError("`inputs` should be an array for Concatenate");if(ne.length!==ee.length)throw new ValueError(`Mismatch in the length of mask (${ne.length}) and the legnth of inputs (${ee.length})`);return tidy(()=>{let ae=!0;if(ne.forEach(ue=>{if(ue!=null){ae=!1;return}}),ae)return null;const ce=[];for(let ue=0;ue<ee.length;++ue)ne[ue]==null?ce.push(onesLike$2(ee[ue]).asType("bool")):ne[ue].rank<ee[ue].rank?ce.push(expandDims$3(ne[ue],-1)):ce.push(ne[ue]);const le=concat$2(ce,this.axis);return all$2(le,-1,!1)})}getConfig(){const ee={axis:this.axis},ne=super.getConfig();return Object.assign(ee,ne),ee}}Concatenate.className="Concatenate";registerClass(Concatenate);function interpretAxis(re,ee){for(;re<0;)re+=ee;return re}function batchDot(re,ee,ne){if(re.shape.length>3||ee.shape.length>3)throw new NotImplementedError("batchDot is not implemented for tensors of 4D or higher rank yet");if(assert$2(re.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${re.shape.length}`),assert$2(re.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${ee.shape.length}`),typeof ne=="number"&&(ne=[ne,ne]),re.dtype==="complex64"||ee.dtype==="complex64")throw new NotImplementedError("batchDot is not implemented for complex64-type Tensors yet.");const ae=re.shape.length,ce=ee.shape.length;ne==null&&(ne=[ae-1,ce-2]);const le=ne;return tidy(()=>{let ue;if(ae>ce){ue=ae-ce;const fe=[];for(let me=0;me<ue;++me)fe.push(1);ee=ee.reshape(ee.shape.concat(fe))}else if(ce>ae){ue=ce-ae;const fe=[];for(let me=0;me<ue;++me)fe.push(1);re=re.reshape(re.shape.concat(fe))}else ue=0;let he;if(re.shape.length===2&&ee.shape.length===2)le[0]===le[1]?he=re.mul(ee).sum(le[0]):he=re.transpose([1,0]).mul(ee).sum(le[1]);else{const fe=le[0]!==re.shape.length-1,me=le[1]===ee.shape.length-1;he=re.matMul(ee,fe,me)}if(ue>0){let fe;ae>ce?fe=ae+ce-3:fe=ae-1;const me=[];for(let ge=fe;ge<fe+ue;++ge)me.push(ge);he=he.squeeze(me)}return he.shape.length===1&&(he=he.expandDims(1)),he})}class Dot extends Merge$1{constructor(ee){super(ee),this.axes=ee.axes,this.normalize=ee.normalize==null?!1:ee.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(ee){assert$2(Array.isArray(ee)&&ee.length===2&&Array.isArray(ee[0])&&Array.isArray(ee[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const ne=ee[0],ae=ee[1];if(ne.length>3||ae.length>3)throw new NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");const ce=this.interpretAxes(ne,ae);if(ne[ce[0]]!==ae[ce[1]])throw new ValueError(`Dimension incompatibility: ${ne[ce[0]]} !== ${ae[ce[1]]}`)}mergeFunction(ee){if(ee.length!==2)throw new ValueError(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${ee.length} input(s).`);let ne=ee[0],ae=ee[1],ce;return Array.isArray(this.axes)?ce=this.axes.map((le,ue)=>interpretAxis(le,ee[ue].shape.length)):ce=[interpretAxis(this.axes,ne.shape.length),interpretAxis(this.axes,ae.shape.length)],this.normalize&&(ne=l2Normalize(ne,ce[0]),ae=l2Normalize(ae,ce[1])),batchDot(ne,ae,ce)}interpretAxes(ee,ne){let ae;return Array.isArray(this.axes)?ae=this.axes:ae=[interpretAxis(this.axes,ee.length),interpretAxis(this.axes,ne.length)],ae}computeOutputShape(ee){assert$2(Array.isArray(ee)&&ee.length===2&&Array.isArray(ee[0])&&Array.isArray(ee[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const ne=ee[0].slice(),ae=ee[1].slice();if(ne.length>3||ae.length>3)throw new NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");const ce=this.interpretAxes(ne,ae);ne.splice(ce[0],1),ae.splice(ce[1],1),ae.splice(0,1);const le=ne.concat(ae);return le.length===1&&le.push(1),le}computeMask(ee,ne){return null}getConfig(){const ee={axes:this.axes,normalize:this.normalize},ne=super.getConfig();return Object.assign(ee,ne),ee}}Dot.className="Dot";registerClass(Dot);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class GaussianNoise extends Layer{constructor(ee){super(ee),this.supportsMasking=!0,this.stddev=ee.stddev}computeOutputShape(ee){return ee}getConfig(){const ee=super.getConfig(),ne={stddev:this.stddev};return Object.assign(ne,ee),ne}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);const ae=getExactlyOneTensor(ee);return inTrainPhase(()=>randomNormal(ae.shape,0,this.stddev).add(ae),()=>ae,ne.training||!1)})}}GaussianNoise.className="GaussianNoise";registerClass(GaussianNoise);class GaussianDropout extends Layer{constructor(ee){super(ee),this.supportsMasking=!0,this.rate=ee.rate}computeOutputShape(ee){return ee}getConfig(){const ee=super.getConfig(),ne={rate:this.rate};return Object.assign(ne,ee),ne}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);const ae=getExactlyOneTensor(ee);return this.rate>0&&this.rate<1?inTrainPhase(()=>{const le=Math.sqrt(this.rate/(1-this.rate));return ae.mul(randomNormal(ae.shape,1,le))},()=>ae,ne.training||!1):ae})}}GaussianDropout.className="GaussianDropout";registerClass(GaussianDropout);class AlphaDropout extends Layer{constructor(ee){super(ee),this.supportsMasking=!0,this.rate=ee.rate,this.noiseShape=ee.noiseShape}_getNoiseShape(ee){return this.noiseShape||getExactlyOneTensor(ee).shape}computeOutputShape(ee){return ee}getConfig(){const ee=super.getConfig(),ne={rate:this.rate};return Object.assign(ne,ee),ne}call(ee,ne){return tidy(()=>{if(this.rate<1&&this.rate>0){const ae=this._getNoiseShape(ee);return inTrainPhase(()=>{const le=getExactlyOneTensor(ee),ue=1.6732632423543772,he=1.0507009873554805,fe=-ue*he;let me=greaterEqual$2(randomUniform(ae),this.rate);me=cast$2(me,"float32");const ge=((1-this.rate)*(1+this.rate*fe**2))**-.5,ve=-ge*fe*this.rate;return le.mul(me).add(me.add(-1).mul(fe)).mul(ge).add(ve)},()=>getExactlyOneTensor(ee),ne.training||!1)}return ee})}}AlphaDropout.className="AlphaDropout";registerClass(AlphaDropout);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function batchNormalization(re,ee,ne,ae,ce,le=.001){let ue;if(re.rank===2)ue=batchNorm2d(re,ee,ne,ae,ce,le);else if(re.rank===3)ue=batchNorm3d(re,ee,ne,ae,ce,le);else if(re.rank===4)ue=batchNorm4d(re,ee,ne,ae,ce,le);else throw new NotImplementedError(`batchNormalization is not implemented for array of rank ${re.rank} yet`);return ue}function regularNormalizeBatchInTraining(re,ee,ne,ae,ce=.001){return tidy(()=>{const le=moments(re,ae),ue=le.mean,he=le.variance;return[batchNormalization(re,ue,he,ne,ee,ce),ue,he]})}function broadcastNormalizeBatchInTraining(re,ee,ne,ae,ce=.001){return tidy(()=>{const le=moments(re,ae),ue=le.mean,he=le.variance,fe=[];for(const Ee of range$3(0,re.rank))ae.indexOf(Ee)!==-1?fe.push(1):fe.push(re.shape[Ee]);const me=ue.reshape(fe),ge=he.reshape(fe),ve=ee==null?null:ee.reshape(fe),ye=ne==null?null:ne.reshape(fe);return[batchNormalization(re,me,ge,ye,ve,ce),ue,he]})}function normalizeBatchInTraining(re,ee,ne,ae,ce=.001){return arraysEqual(ae.slice().sort(),range$3(0,re.rank-1))?regularNormalizeBatchInTraining(re,ee,ne,ae,ce):broadcastNormalizeBatchInTraining(re,ee,ne,ae,ce)}class BatchNormalization extends Layer{constructor(ee){ee==null&&(ee={}),super(ee),this.supportsMasking=!0,this.axis=ee.axis==null?-1:ee.axis,this.momentum=ee.momentum==null?.99:ee.momentum,this.epsilon=ee.epsilon==null?.001:ee.epsilon,this.center=ee.center==null?!0:ee.center,this.scale=ee.scale==null?!0:ee.scale,this.betaInitializer=getInitializer(ee.betaInitializer||"zeros"),this.gammaInitializer=getInitializer(ee.gammaInitializer||"ones"),this.movingMeanInitializer=getInitializer(ee.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=getInitializer(ee.movingVarianceInitializer||"ones"),this.betaConstraint=getConstraint(ee.betaConstraint),this.gammaConstraint=getConstraint(ee.gammaConstraint),this.betaRegularizer=getRegularizer(ee.betaRegularizer),this.gammaRegularizer=getRegularizer(ee.gammaRegularizer)}build(ee){ee=getExactlyOneShape(ee);const ne=this.axis>=0?this.axis:this.axis+ee.length,ae=ee[ne];if(ae==null)throw new ValueError(`Axis ${ne} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(ee)}.`);this.inputSpec=[new InputSpec({ndim:ee.length,axes:{[ne]:ae}})];const ce=[ae];this.scale&&(this.gamma=this.addWeight("gamma",ce,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",ce,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",ce,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",ce,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(ee,ne){return tidy(()=>{const ae=ne.training==null?!1:ne.training,ce=getExactlyOneTensor(ee),le=ce.shape,ue=le.length,he=range$3(0,ue),fe=this.axis>=0?this.axis:this.axis+ue;he.splice(fe,1);const me=pyListRepeat(1,ue);me[fe]=le[fe];const ge=he.slice();ge.sort();const ve=!arraysEqual(ge,range$3(0,ue).slice(0,ue-1)),ye=()=>{if(ve){const ke=this.movingMean.read().reshape(me),Ne=this.movingVariance.read().reshape(me),Fe=this.center?this.beta.read().reshape(me):null,De=this.scale?this.gamma.read().reshape(me):null;return batchNormalization(ce,ke,Ne,Fe,De,this.epsilon)}else return batchNormalization(ce,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!ae)return ye();const[be,Ee,Ce]=normalizeBatchInTraining(ce,this.gamma.read(),this.beta.read(),he,this.epsilon),Se=(ke,Ne,Fe)=>{tidy(()=>{const De=1-Fe,Oe=ke.read(),Re=Oe.sub(Ne).mul(De);ke.write(Oe.sub(Re))})};return(()=>{Se(this.movingMean,Ee,this.momentum),Se(this.movingVariance,Ce,this.momentum)})(),be})}getConfig(){const ee={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:serializeInitializer(this.betaInitializer),gammaInitializer:serializeInitializer(this.gammaInitializer),movingMeanInitializer:serializeInitializer(this.movingMeanInitializer),movingVarianceInitializer:serializeInitializer(this.movingVarianceInitializer),betaRegularizer:serializeRegularizer(this.betaRegularizer),gammaRegularizer:serializeRegularizer(this.gammaRegularizer),betaConstraint:serializeConstraint(this.betaConstraint),gammaConstraint:serializeConstraint(this.gammaConstraint)},ne=super.getConfig();return Object.assign(ee,ne),ee}}BatchNormalization.className="BatchNormalization";registerClass(BatchNormalization);class LayerNormalization extends Layer{constructor(ee){if(ee==null&&(ee={}),super(ee),this.axis=ee.axis==null?-1:ee.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const ne of this.axis)if(!Number.isInteger(ne))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=ee.epsilon==null?.001:ee.epsilon,this.center=ee.center==null?!0:ee.center,this.scale=ee.scale==null?!0:ee.scale,this.betaInitializer=getInitializer(ee.betaInitializer||"zeros"),this.gammaInitializer=getInitializer(ee.gammaInitializer||"ones"),this.betaRegularizer=getRegularizer(ee.betaRegularizer),this.gammaRegularizer=getRegularizer(ee.gammaRegularizer),this.supportsMasking=!0}build(ee){ee=getExactlyOneShape(ee);const ne=ee.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let le=0;le<this.axis.length;++le)this.axis[le]<0&&(this.axis[le]+=ne);for(const le of this.axis)if(le<0||le>=ne)throw new Error(`Invalid axis: ${le}`);if(this.axis.length!==unique$3(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const ae=this.axis.map(le=>ee[le]),ce=!0;this.scale?this.gamma=this.addWeight("gamma",ae,"float32",this.gammaInitializer,this.gammaRegularizer,ce):this.gamma=null,this.center?this.beta=this.addWeight("beta",ae,"float32",this.betaInitializer,this.betaRegularizer,ce):this.beta=null,this.built=!0}call(ee,ne){const ae=getExactlyOneTensor(ee),ce=ae.shape,le=ce.length;return tidy(()=>{let{mean:he,variance:fe}=moments(ae,this.axis,!0);const me=pyListRepeat(1,le);for(const Ce of this.axis)me[Ce]=ce[Ce];const ge=Ce=>Ce!=null&&Ce.shape.length!==le&&this.axis!==[le-1]?Ce.reshape(me):Ce;let ve=ge(this.gamma.read()),ye=ge(this.beta.read());const be=[],Ee=[];for(let Ce=0;Ce<le;++Ce)this.axis.indexOf(Ce)!==-1?(be.push(ce[Ce]),Ee.push(1)):(be.push(1),Ee.push(ce[Ce]));return he=he.tile(be),fe=fe.tile(be),ve=ve.tile(Ee),ye=ye.tile(Ee),batchNormalization(ae,he,fe,ye,ve,this.epsilon)})}getConfig(){const ee={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:serializeInitializer(this.betaInitializer),gammaInitializer:serializeInitializer(this.gammaInitializer),betaRegularizer:serializeRegularizer(this.betaRegularizer),gammaRegularizer:serializeRegularizer(this.gammaRegularizer)},ne=super.getConfig();return Object.assign(ee,ne),ee}}LayerNormalization.className="LayerNormalization";registerClass(LayerNormalization);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function spatial2dPadding(re,ee,ne){return tidy(()=>{if(re.rank!==4)throw new ValueError(`temporalPadding expects input tensor to be 4-D, but received a ${re.rank}-D tensor.`);if(ee==null&&(ee=[[1,1],[1,1]]),ee.length!==2||ee[0].length!==2||ee[1].length!==2)throw new ValueError("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(ne==null&&(ne=imageDataFormat()),ne!=="channelsLast"&&ne!=="channelsFirst")throw new ValueError(`Unknown data format: ${ne}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let ae;return ne==="channelsFirst"?ae=[[0,0],[0,0],ee[0],ee[1]]:ae=[[0,0],ee[0],ee[1],[0,0]],pad(re,ae)})}class ZeroPadding2D extends Layer{constructor(ee){if(ee==null&&(ee={}),super(ee),this.dataFormat=ee.dataFormat==null?imageDataFormat():ee.dataFormat,ee.padding==null)this.padding=[[1,1],[1,1]];else if(typeof ee.padding=="number")this.padding=[[ee.padding,ee.padding],[ee.padding,ee.padding]];else{if(ee.padding=ee.padding,ee.padding.length!==2)throw new ValueError(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${ee.padding.length} array.`);let ne,ae;if(typeof ee.padding[0]=="number")ne=[ee.padding[0],ee.padding[0]],ae=[ee.padding[1],ee.padding[1]];else{if(ee.padding=ee.padding,ee.padding[0].length!==2)throw new ValueError(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${ee.padding[0].length} array.`);if(ne=ee.padding[0],ee.padding[1].length!==2)throw new ValueError(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${ee.padding[1].length} array.`);ae=ee.padding[1]}this.padding=[ne,ae]}this.inputSpec=[new InputSpec({ndim:4})]}computeOutputShape(ee){ee=getExactlyOneShape(ee);let ne,ae;return this.dataFormat==="channelsFirst"?(ee[2]!=null&&ee[2]>=0?ne=ee[2]+this.padding[0][0]+this.padding[0][1]:ne=null,ee[3]!=null&&ee[3]>=0?ae=ee[3]+this.padding[1][0]+this.padding[1][1]:ae=null,[ee[0],ee[1],ne,ae]):(ee[1]!=null&&ee[1]>=0?ne=ee[1]+this.padding[0][0]+this.padding[0][1]:ne=null,ee[2]!=null&&ee[2]>=0?ae=ee[2]+this.padding[1][0]+this.padding[1][1]:ae=null,[ee[0],ne,ae,ee[3]])}call(ee,ne){return tidy(()=>spatial2dPadding(getExactlyOneTensor(ee),this.padding,this.dataFormat))}getConfig(){const ee={padding:this.padding,dataFormat:this.dataFormat},ne=super.getConfig();return Object.assign(ee,ne),ee}}ZeroPadding2D.className="ZeroPadding2D";registerClass(ZeroPadding2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pool2d(re,ee,ne,ae,ce,le){return tidy(()=>{checkDataFormat(ce),checkPoolMode(le),checkPaddingMode(ae),ne==null&&(ne=[1,1]),ae==null&&(ae="valid"),ce==null&&(ce=imageDataFormat()),le==null&&(le="max"),re=preprocessConv2DInput(re,ce);let ue;const he=ae==="same"?"same":"valid";return le==="max"?ue=maxPool$2(re,ee,ne,he):ue=avgPool$2(re,ee,ne,he),ce==="channelsFirst"&&(ue=transpose$2(ue,[0,3,1,2])),ue})}function pool3d$1(re,ee,ne,ae,ce,le){return tidy(()=>{checkDataFormat(ce),checkPoolMode(le),checkPaddingMode(ae),ne==null&&(ne=[1,1,1]),ae==null&&(ae="valid"),ce==null&&(ce=imageDataFormat()),le==null&&(le="max"),re=preprocessConv3DInput(re,ce);let ue;const he=ae==="same"?"same":"valid";return le==="max"?ue=maxPool3d$1(re,ee,ne,he):ue=avgPool3d(re,ee,ne,he),ce==="channelsFirst"&&(ue=transpose$2(ue,[0,4,1,2,3])),ue})}class Pooling1D extends Layer{constructor(ee){if(ee.poolSize==null&&(ee.poolSize=2),super(ee),typeof ee.poolSize=="number")this.poolSize=[ee.poolSize];else if(Array.isArray(ee.poolSize)&&ee.poolSize.length===1&&typeof ee.poolSize[0]=="number")this.poolSize=ee.poolSize;else throw new ValueError(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(ee.poolSize)}`);if(assertPositiveInteger(this.poolSize,"poolSize"),ee.strides==null)this.strides=this.poolSize;else if(typeof ee.strides=="number")this.strides=[ee.strides];else if(Array.isArray(ee.strides)&&ee.strides.length===1&&typeof ee.strides[0]=="number")this.strides=ee.strides;else throw new ValueError(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(ee.strides)}`);assertPositiveInteger(this.strides,"strides"),this.padding=ee.padding==null?"valid":ee.padding,checkPaddingMode(this.padding),this.inputSpec=[new InputSpec({ndim:3})]}computeOutputShape(ee){ee=getExactlyOneShape(ee);const ne=convOutputLength(ee[1],this.poolSize[0],this.padding,this.strides[0]);return[ee[0],ne,ee[2]]}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne),ee=expandDims$2(getExactlyOneTensor(ee),2);const ae=this.poolingFunction(getExactlyOneTensor(ee),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return squeeze(ae,[2])})}getConfig(){const ee={poolSize:this.poolSize,padding:this.padding,strides:this.strides},ne=super.getConfig();return Object.assign(ee,ne),ee}}class MaxPooling1D extends Pooling1D{constructor(ee){super(ee)}poolingFunction(ee,ne,ae,ce,le){return checkDataFormat(le),checkPaddingMode(ce),pool2d(ee,ne,ae,ce,le,"max")}}MaxPooling1D.className="MaxPooling1D";registerClass(MaxPooling1D);class AveragePooling1D extends Pooling1D{constructor(ee){super(ee)}poolingFunction(ee,ne,ae,ce,le){return checkDataFormat(le),checkPaddingMode(ce),pool2d(ee,ne,ae,ce,le,"avg")}}AveragePooling1D.className="AveragePooling1D";registerClass(AveragePooling1D);class Pooling2D extends Layer{constructor(ee){if(ee.poolSize==null&&(ee.poolSize=[2,2]),super(ee),this.poolSize=Array.isArray(ee.poolSize)?ee.poolSize:[ee.poolSize,ee.poolSize],ee.strides==null)this.strides=this.poolSize;else if(Array.isArray(ee.strides)){if(ee.strides.length!==2)throw new ValueError(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${ee.strides.length}.`);this.strides=ee.strides}else this.strides=[ee.strides,ee.strides];assertPositiveInteger(this.poolSize,"poolSize"),assertPositiveInteger(this.strides,"strides"),this.padding=ee.padding==null?"valid":ee.padding,this.dataFormat=ee.dataFormat==null?"channelsLast":ee.dataFormat,checkDataFormat(this.dataFormat),checkPaddingMode(this.padding),this.inputSpec=[new InputSpec({ndim:4})]}computeOutputShape(ee){ee=getExactlyOneShape(ee);let ne=this.dataFormat==="channelsFirst"?ee[2]:ee[1],ae=this.dataFormat==="channelsFirst"?ee[3]:ee[2];return ne=convOutputLength(ne,this.poolSize[0],this.padding,this.strides[0]),ae=convOutputLength(ae,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[ee[0],ee[1],ne,ae]:[ee[0],ne,ae,ee[3]]}call(ee,ne){return tidy(()=>(this.invokeCallHook(ee,ne),this.poolingFunction(getExactlyOneTensor(ee),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const ee={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},ne=super.getConfig();return Object.assign(ee,ne),ee}}class MaxPooling2D extends Pooling2D{constructor(ee){super(ee)}poolingFunction(ee,ne,ae,ce,le){return checkDataFormat(le),checkPaddingMode(ce),pool2d(ee,ne,ae,ce,le,"max")}}MaxPooling2D.className="MaxPooling2D";registerClass(MaxPooling2D);class AveragePooling2D extends Pooling2D{constructor(ee){super(ee)}poolingFunction(ee,ne,ae,ce,le){return checkDataFormat(le),checkPaddingMode(ce),pool2d(ee,ne,ae,ce,le,"avg")}}AveragePooling2D.className="AveragePooling2D";registerClass(AveragePooling2D);class Pooling3D extends Layer{constructor(ee){if(ee.poolSize==null&&(ee.poolSize=[2,2,2]),super(ee),this.poolSize=Array.isArray(ee.poolSize)?ee.poolSize:[ee.poolSize,ee.poolSize,ee.poolSize],ee.strides==null)this.strides=this.poolSize;else if(Array.isArray(ee.strides)){if(ee.strides.length!==3)throw new ValueError(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${ee.strides.length}.`);this.strides=ee.strides}else this.strides=[ee.strides,ee.strides,ee.strides];assertPositiveInteger(this.poolSize,"poolSize"),assertPositiveInteger(this.strides,"strides"),this.padding=ee.padding==null?"valid":ee.padding,this.dataFormat=ee.dataFormat==null?"channelsLast":ee.dataFormat,checkDataFormat(this.dataFormat),checkPaddingMode(this.padding),this.inputSpec=[new InputSpec({ndim:5})]}computeOutputShape(ee){ee=getExactlyOneShape(ee);let ne=this.dataFormat==="channelsFirst"?ee[2]:ee[1],ae=this.dataFormat==="channelsFirst"?ee[3]:ee[2],ce=this.dataFormat==="channelsFirst"?ee[4]:ee[3];return ne=convOutputLength(ne,this.poolSize[0],this.padding,this.strides[0]),ae=convOutputLength(ae,this.poolSize[1],this.padding,this.strides[1]),ce=convOutputLength(ce,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[ee[0],ee[1],ne,ae,ce]:[ee[0],ne,ae,ce,ee[4]]}call(ee,ne){return tidy(()=>(this.invokeCallHook(ee,ne),this.poolingFunction(getExactlyOneTensor(ee),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const ee={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},ne=super.getConfig();return Object.assign(ee,ne),ee}}class MaxPooling3D extends Pooling3D{constructor(ee){super(ee)}poolingFunction(ee,ne,ae,ce,le){return checkDataFormat(le),checkPaddingMode(ce),pool3d$1(ee,ne,ae,ce,le,"max")}}MaxPooling3D.className="MaxPooling3D";registerClass(MaxPooling3D);class AveragePooling3D extends Pooling3D{constructor(ee){super(ee)}poolingFunction(ee,ne,ae,ce,le){return checkDataFormat(le),checkPaddingMode(ce),pool3d$1(ee,ne,ae,ce,le,"avg")}}AveragePooling3D.className="AveragePooling3D";registerClass(AveragePooling3D);class GlobalPooling1D extends Layer{constructor(ee){super(ee),this.inputSpec=[new InputSpec({ndim:3})]}computeOutputShape(ee){return[ee[0],ee[2]]}call(ee,ne){throw new NotImplementedError}}class GlobalAveragePooling1D extends GlobalPooling1D{constructor(ee){super(ee||{})}call(ee,ne){return tidy(()=>{const ae=getExactlyOneTensor(ee);return mean$1(ae,1)})}}GlobalAveragePooling1D.className="GlobalAveragePooling1D";registerClass(GlobalAveragePooling1D);class GlobalMaxPooling1D extends GlobalPooling1D{constructor(ee){super(ee||{})}call(ee,ne){return tidy(()=>{const ae=getExactlyOneTensor(ee);return max$4(ae,1)})}}GlobalMaxPooling1D.className="GlobalMaxPooling1D";registerClass(GlobalMaxPooling1D);class GlobalPooling2D extends Layer{constructor(ee){super(ee),this.dataFormat=ee.dataFormat==null?"channelsLast":ee.dataFormat,checkDataFormat(this.dataFormat),this.inputSpec=[new InputSpec({ndim:4})]}computeOutputShape(ee){return ee=ee,this.dataFormat==="channelsLast"?[ee[0],ee[3]]:[ee[0],ee[1]]}call(ee,ne){throw new NotImplementedError}getConfig(){const ee={dataFormat:this.dataFormat},ne=super.getConfig();return Object.assign(ee,ne),ee}}class GlobalAveragePooling2D extends GlobalPooling2D{call(ee,ne){return tidy(()=>{const ae=getExactlyOneTensor(ee);return this.dataFormat==="channelsLast"?mean$1(ae,[1,2]):mean$1(ae,[2,3])})}}GlobalAveragePooling2D.className="GlobalAveragePooling2D";registerClass(GlobalAveragePooling2D);class GlobalMaxPooling2D extends GlobalPooling2D{call(ee,ne){return tidy(()=>{const ae=getExactlyOneTensor(ee);return this.dataFormat==="channelsLast"?max$4(ae,[1,2]):max$4(ae,[2,3])})}}GlobalMaxPooling2D.className="GlobalMaxPooling2D";registerClass(GlobalMaxPooling2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wrapper extends Layer{constructor(ee){super(ee),this.layer=ee.layer}build(ee){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(ee){this.layer!=null&&(this.layer.trainable=ee)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(ee){this.layer.setWeights(ee)}getConfig(){const ee={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},ne=super.getConfig();return Object.assign(ee,ne),ee}setFastWeightInitDuringBuild(ee){super.setFastWeightInitDuringBuild(ee),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(ee)}static fromConfig(ee,ne,ae={}){const ce=ne.layer,le=deserialize(ce,ae);delete ne.layer;const ue={layer:le};return Object.assign(ue,ne),new ee(ue)}}class TimeDistributed extends Wrapper{constructor(ee){super(ee),this.supportsMasking=!0}build(ee){if(ee=getExactlyOneShape(ee),ee.length<3)throw new ValueError(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(ee)}`);this.inputSpec=[{shape:ee}];const ne=[ee[0]].concat(ee.slice(2));this.layer.built||(this.layer.build(ne),this.layer.built=!0),super.build(ee)}computeOutputShape(ee){ee=getExactlyOneShape(ee);const ne=[ee[0]].concat(ee.slice(2)),ae=this.layer.computeOutputShape(ne),ce=ee[1];return[ae[0],ce].concat(ae.slice(1))}call(ee,ne){return tidy(()=>(ee=getExactlyOneTensor(ee),rnn((ue,he)=>[getExactlyOneTensor(this.layer.call(ue,ne)),[]],ee,[],!1,null,null,!1,!0)[1]))}}TimeDistributed.className="TimeDistributed";registerClass(TimeDistributed);function checkBidirectionalMergeMode(re){checkStringTypeUnionValue(VALID_BIDIRECTIONAL_MERGE_MODES,"BidirectionalMergeMode",re)}const DEFAULT_BIDIRECTIONAL_MERGE_MODE="concat";class Bidirectional extends Wrapper{constructor(ee){super(ee);const ne=ee.layer.getConfig(),ae={};ae.className=ee.layer.getClassName(),ae.config=ne,this.forwardLayer=deserialize(ae),ne.goBackwards=ne.goBackwards!==!0;const ce={};if(ce.className=ee.layer.getClassName(),ce.config=ne,this.backwardLayer=deserialize(ce),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=ee.mergeMode===void 0?DEFAULT_BIDIRECTIONAL_MERGE_MODE:ee.mergeMode,checkBidirectionalMergeMode(this.mergeMode),ee.weights)throw new NotImplementedError("weights support is not implemented for Bidirectional layer yet.");this._stateful=ee.layer.stateful,this.returnSequences=ee.layer.returnSequences,this.returnState=ee.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=ee.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(ee){this._trainable=ee,this.forwardLayer!=null&&(this.forwardLayer.trainable=ee),this.backwardLayer!=null&&(this.backwardLayer.trainable=ee)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(ee){const ne=ee.length,ae=Math.floor(ne/2);this.forwardLayer.setWeights(ee.slice(0,ae)),this.backwardLayer.setWeights(ee.slice(ae))}computeOutputShape(ee){let ne=this.forwardLayer.computeOutputShape(ee);Array.isArray(ne)&&Array.isArray(ne[0])||(ne=[ne]),ne=ne;let ae,ce,le;return this.returnState&&(le=ne.slice(1)),ae=ne[0],ae=ae,this.mergeMode==="concat"?(ae[ae.length-1]*=2,ce=[ae]):this.mergeMode==null?ce=[ae,ae.slice()]:ce=[ae],this.returnState?this.mergeMode==null?ce.concat(le).concat(le.slice()):[ae].concat(le).concat(le.slice()):singletonOrArray(ce)}apply(ee,ne){let ae=ne==null?null:ne.initialState,ce=ne==null?null:ne.constants;ne==null&&(ne={});const le=standardizeArgs(ee,ae,ce,this.numConstants);if(ee=le.inputs,ae=le.initialState,ce=le.constants,Array.isArray(ee)&&(ae=ee.slice(1),ee=ee[0]),(ae==null||ae.length===0)&&ce==null)return super.apply(ee,ne);const ue=[],he=[];if(ae!=null){const me=ae.length;if(me%2>0)throw new ValueError("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");ne.initialState=ae,ue.push(...ae);const ge=ae.map(ve=>new InputSpec({shape:ve.shape}));this.forwardLayer.stateSpec=ge.slice(0,me/2),this.backwardLayer.stateSpec=ge.slice(me/2),he.push(...ge)}if(ce!=null)throw new NotImplementedError("Support for constants in Bidirectional layers is not implemented yet.");const fe=ue[0]instanceof SymbolicTensor;for(const me of ue)if(me instanceof SymbolicTensor!==fe)throw new ValueError("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(fe){const me=[ee].concat(ue),ge=this.inputSpec.concat(he),ve=this.inputSpec;this.inputSpec=ge;const ye=super.apply(me,ne);return this.inputSpec=ve,ye}else return super.apply(ee,ne)}call(ee,ne){return tidy(()=>{const ae=ne.initialState;let ce,le;if(ae==null)ce=this.forwardLayer.call(ee,ne),le=this.backwardLayer.call(ee,ne);else{const fe=ae.slice(0,ae.length/2),me=ae.slice(ae.length/2);ce=this.forwardLayer.call(ee,Object.assign(ne,{initialState:fe})),le=this.backwardLayer.call(ee,Object.assign(ne,{initialState:me}))}let ue;this.returnState&&(Array.isArray(ce)&&(ue=ce.slice(1).concat(le.slice(1))),ce=ce[0],le=le[0]),this.returnSequences&&(le=reverse$2(le,1));let he;return this.mergeMode==="concat"?he=concatenate([ce,le]):this.mergeMode==="sum"?he=add$1(ce,le):this.mergeMode==="ave"?he=mul(.5,add$1(ce,le)):this.mergeMode==="mul"?he=mul(ce,le):this.mergeMode==null&&(he=[ce,le]),this.returnState?this.mergeMode==null?he.concat(ue):[he].concat(ue):he})}resetStates(ee){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(ee){nameScope(this.forwardLayer.name,()=>{this.forwardLayer.build(ee)}),nameScope(this.backwardLayer.name,()=>{this.backwardLayer.build(ee)}),this.built=!0}computeMask(ee,ne){Array.isArray(ne)&&(ne=ne[0]);let ae;if(this.returnSequences?this.mergeMode==null?ae=[ne,ne]:ae=ne:this.mergeMode==null?ae=[null,null]:ae=null,this.returnState){const le=this.forwardLayer.states.map(ue=>null);return Array.isArray(ae)?ae.concat(le).concat(le):[ae].concat(le).concat(le)}else return ae}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(ee){super.setFastWeightInitDuringBuild(ee),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(ee),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(ee)}getConfig(){const ee={mergeMode:this.mergeMode},ne=super.getConfig();return Object.assign(ee,ne),ee}static fromConfig(ee,ne){const ae=deserialize(ne.layer);if(delete ne.layer,ne.numConstants!=null)throw new NotImplementedError("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const ce=ne;return ce.layer=ae,new ee(ce)}}Bidirectional.className="Bidirectional";registerClass(Bidirectional);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var DataType;(function(re){re[re.DT_INVALID=0]="DT_INVALID",re[re.DT_FLOAT=1]="DT_FLOAT",re[re.DT_DOUBLE=2]="DT_DOUBLE",re[re.DT_INT32=3]="DT_INT32",re[re.DT_UINT8=4]="DT_UINT8",re[re.DT_INT16=5]="DT_INT16",re[re.DT_INT8=6]="DT_INT8",re[re.DT_STRING=7]="DT_STRING",re[re.DT_COMPLEX64=8]="DT_COMPLEX64",re[re.DT_INT64=9]="DT_INT64",re[re.DT_BOOL=10]="DT_BOOL",re[re.DT_QINT8=11]="DT_QINT8",re[re.DT_QUINT8=12]="DT_QUINT8",re[re.DT_QINT32=13]="DT_QINT32",re[re.DT_BFLOAT16=14]="DT_BFLOAT16",re[re.DT_FLOAT_REF=101]="DT_FLOAT_REF",re[re.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",re[re.DT_INT32_REF=103]="DT_INT32_REF",re[re.DT_UINT8_REF=104]="DT_UINT8_REF",re[re.DT_INT16_REF=105]="DT_INT16_REF",re[re.DT_INT8_REF=106]="DT_INT8_REF",re[re.DT_STRING_REF=107]="DT_STRING_REF",re[re.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",re[re.DT_INT64_REF=109]="DT_INT64_REF",re[re.DT_BOOL_REF=110]="DT_BOOL_REF",re[re.DT_QINT8_REF=111]="DT_QINT8_REF",re[re.DT_QUINT8_REF=112]="DT_QUINT8_REF",re[re.DT_QINT32_REF=113]="DT_QINT32_REF",re[re.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"})(DataType||(DataType={}));var SaverDef;(function(re){(function(ee){ee[ee.LEGACY=0]="LEGACY",ee[ee.V1=1]="V1",ee[ee.V2=2]="V2"})(re.CheckpointFormatVersion||(re.CheckpointFormatVersion={}))})(SaverDef||(SaverDef={}));var alea$3={exports:{}};alea$3.exports;(function(re){(function(ee,ne,ae){function ce(fe){var me=this,ge=he();me.next=function(){var ve=2091639*me.s0+me.c*23283064365386963e-26;return me.s0=me.s1,me.s1=me.s2,me.s2=ve-(me.c=ve|0)},me.c=1,me.s0=ge(" "),me.s1=ge(" "),me.s2=ge(" "),me.s0-=ge(fe),me.s0<0&&(me.s0+=1),me.s1-=ge(fe),me.s1<0&&(me.s1+=1),me.s2-=ge(fe),me.s2<0&&(me.s2+=1),ge=null}function le(fe,me){return me.c=fe.c,me.s0=fe.s0,me.s1=fe.s1,me.s2=fe.s2,me}function ue(fe,me){var ge=new ce(fe),ve=me&&me.state,ye=ge.next;return ye.int32=function(){return ge.next()*4294967296|0},ye.double=function(){return ye()+(ye()*2097152|0)*11102230246251565e-32},ye.quick=ye,ve&&(typeof ve=="object"&&le(ve,ge),ye.state=function(){return le(ge,{})}),ye}function he(){var fe=4022871197,me=function(ge){ge=ge.toString();for(var ve=0;ve<ge.length;ve++){fe+=ge.charCodeAt(ve);var ye=.02519603282416938*fe;fe=ye>>>0,ye-=fe,ye*=fe,fe=ye>>>0,ye-=fe,fe+=ye*4294967296}return(fe>>>0)*23283064365386963e-26};return me}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.alea=ue})(commonjsGlobal,re,!1)})(alea$3);var aleaExports$1=alea$3.exports,xor128$3={exports:{}};xor128$3.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this,me="";fe.x=0,fe.y=0,fe.z=0,fe.w=0,fe.next=function(){var ve=fe.x^fe.x<<11;return fe.x=fe.y,fe.y=fe.z,fe.z=fe.w,fe.w^=fe.w>>>19^ve^ve>>>8},he===(he|0)?fe.x=he:me+=he;for(var ge=0;ge<me.length+64;ge++)fe.x^=me.charCodeAt(ge)|0,fe.next()}function le(he,fe){return fe.x=he.x,fe.y=he.y,fe.z=he.z,fe.w=he.w,fe}function ue(he,fe){var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(typeof ge=="object"&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.xor128=ue})(commonjsGlobal,re,!1)})(xor128$3);var xor128Exports$1=xor128$3.exports,xorwow$3={exports:{}};xorwow$3.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this,me="";fe.next=function(){var ve=fe.x^fe.x>>>2;return fe.x=fe.y,fe.y=fe.z,fe.z=fe.w,fe.w=fe.v,(fe.d=fe.d+362437|0)+(fe.v=fe.v^fe.v<<4^(ve^ve<<1))|0},fe.x=0,fe.y=0,fe.z=0,fe.w=0,fe.v=0,he===(he|0)?fe.x=he:me+=he;for(var ge=0;ge<me.length+64;ge++)fe.x^=me.charCodeAt(ge)|0,ge==me.length&&(fe.d=fe.x<<10^fe.x>>>4),fe.next()}function le(he,fe){return fe.x=he.x,fe.y=he.y,fe.z=he.z,fe.w=he.w,fe.v=he.v,fe.d=he.d,fe}function ue(he,fe){var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(typeof ge=="object"&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.xorwow=ue})(commonjsGlobal,re,!1)})(xorwow$3);var xorwowExports$1=xorwow$3.exports,xorshift7$3={exports:{}};xorshift7$3.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this;fe.next=function(){var ge=fe.x,ve=fe.i,ye,be;return ye=ge[ve],ye^=ye>>>7,be=ye^ye<<24,ye=ge[ve+1&7],be^=ye^ye>>>10,ye=ge[ve+3&7],be^=ye^ye>>>3,ye=ge[ve+4&7],be^=ye^ye<<7,ye=ge[ve+7&7],ye=ye^ye<<13,be^=ye^ye<<9,ge[ve]=be,fe.i=ve+1&7,be};function me(ge,ve){var ye,be=[];if(ve===(ve|0))be[0]=ve;else for(ve=""+ve,ye=0;ye<ve.length;++ye)be[ye&7]=be[ye&7]<<15^ve.charCodeAt(ye)+be[ye+1&7]<<13;for(;be.length<8;)be.push(0);for(ye=0;ye<8&&be[ye]===0;++ye);for(ye==8?be[7]=-1:be[ye],ge.x=be,ge.i=0,ye=256;ye>0;--ye)ge.next()}me(fe,he)}function le(he,fe){return fe.x=he.x.slice(),fe.i=he.i,fe}function ue(he,fe){he==null&&(he=+new Date);var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(ge.x&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.xorshift7=ue})(commonjsGlobal,re,!1)})(xorshift7$3);var xorshift7Exports$1=xorshift7$3.exports,xor4096$3={exports:{}};xor4096$3.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this;fe.next=function(){var ge=fe.w,ve=fe.X,ye=fe.i,be,Ee;return fe.w=ge=ge+1640531527|0,Ee=ve[ye+34&127],be=ve[ye=ye+1&127],Ee^=Ee<<13,be^=be<<17,Ee^=Ee>>>15,be^=be>>>12,Ee=ve[ye]=Ee^be,fe.i=ye,Ee+(ge^ge>>>16)|0};function me(ge,ve){var ye,be,Ee,Ce,Se,Te=[],ke=128;for(ve===(ve|0)?(be=ve,ve=null):(ve=ve+"\0",be=0,ke=Math.max(ke,ve.length)),Ee=0,Ce=-32;Ce<ke;++Ce)ve&&(be^=ve.charCodeAt((Ce+32)%ve.length)),Ce===0&&(Se=be),be^=be<<10,be^=be>>>15,be^=be<<4,be^=be>>>13,Ce>=0&&(Se=Se+1640531527|0,ye=Te[Ce&127]^=be+Se,Ee=ye==0?Ee+1:0);for(Ee>=128&&(Te[(ve&&ve.length||0)&127]=-1),Ee=127,Ce=4*128;Ce>0;--Ce)be=Te[Ee+34&127],ye=Te[Ee=Ee+1&127],be^=be<<13,ye^=ye<<17,be^=be>>>15,ye^=ye>>>12,Te[Ee]=be^ye;ge.w=Se,ge.X=Te,ge.i=Ee}me(fe,he)}function le(he,fe){return fe.i=he.i,fe.w=he.w,fe.X=he.X.slice(),fe}function ue(he,fe){he==null&&(he=+new Date);var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(ge.X&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.xor4096=ue})(commonjsGlobal,re,!1)})(xor4096$3);var xor4096Exports$1=xor4096$3.exports,tychei$3={exports:{}};tychei$3.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this,me="";fe.next=function(){var ve=fe.b,ye=fe.c,be=fe.d,Ee=fe.a;return ve=ve<<25^ve>>>7^ye,ye=ye-be|0,be=be<<24^be>>>8^Ee,Ee=Ee-ve|0,fe.b=ve=ve<<20^ve>>>12^ye,fe.c=ye=ye-be|0,fe.d=be<<16^ye>>>16^Ee,fe.a=Ee-ve|0},fe.a=0,fe.b=0,fe.c=-1640531527,fe.d=1367130551,he===Math.floor(he)?(fe.a=he/4294967296|0,fe.b=he|0):me+=he;for(var ge=0;ge<me.length+20;ge++)fe.b^=me.charCodeAt(ge)|0,fe.next()}function le(he,fe){return fe.a=he.a,fe.b=he.b,fe.c=he.c,fe.d=he.d,fe}function ue(he,fe){var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(typeof ge=="object"&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.tychei=ue})(commonjsGlobal,re,!1)})(tychei$3);var tycheiExports$1=tychei$3.exports,seedrandom$2={exports:{}};(function(re){(function(ee,ne){(0,eval)("this");var ae=256,ce=6,le=52,ue="random",he=ne.pow(ae,ce),fe=ne.pow(2,le),me=fe*2,ge=ae-1,ve;function ye(Ne,Fe,De){var Oe=[];Fe=Fe==!0?{entropy:!0}:Fe||{};var Re=Se(Ce(Fe.entropy?[Ne,ke(ee)]:Ne??Te(),3),Oe),Be=new be(Oe),Le=function(){for(var je=Be.g(ce),Ge=he,qe=0;je<fe;)je=(je+qe)*ae,Ge*=ae,qe=Be.g(1);for(;je>=me;)je/=2,Ge/=2,qe>>>=1;return(je+qe)/Ge};return Le.int32=function(){return Be.g(4)|0},Le.quick=function(){return Be.g(4)/4294967296},Le.double=Le,Se(ke(Be.S),ee),(Fe.pass||De||function(je,Ge,qe,Ue){return Ue&&(Ue.S&&Ee(Ue,Be),je.state=function(){return Ee(Be,{})}),qe?(ne[ue]=je,Ge):je})(Le,Re,"globalThis"in Fe?Fe.global:this==ne,Fe.state)}ne["seed"+ue]=ye;function be(Ne){var Fe,De=Ne.length,Oe=this,Re=0,Be=Oe.i=Oe.j=0,Le=Oe.S=[];for(De||(Ne=[De++]);Re<ae;)Le[Re]=Re++;for(Re=0;Re<ae;Re++)Le[Re]=Le[Be=ge&Be+Ne[Re%De]+(Fe=Le[Re])],Le[Be]=Fe;(Oe.g=function(je){for(var Ge,qe=0,Ue=Oe.i,ze=Oe.j,He=Oe.S;je--;)Ge=He[Ue=ge&Ue+1],qe=qe*ae+He[ge&(He[Ue]=He[ze=ge&ze+Ge])+(He[ze]=Ge)];return Oe.i=Ue,Oe.j=ze,qe})(ae)}function Ee(Ne,Fe){return Fe.i=Ne.i,Fe.j=Ne.j,Fe.S=Ne.S.slice(),Fe}function Ce(Ne,Fe){var De=[],Oe=typeof Ne,Re;if(Fe&&Oe=="object")for(Re in Ne)try{De.push(Ce(Ne[Re],Fe-1))}catch{}return De.length?De:Oe=="string"?Ne:Ne+"\0"}function Se(Ne,Fe){for(var De=Ne+"",Oe,Re=0;Re<De.length;)Fe[ge&Re]=ge&(Oe^=Fe[ge&Re]*19)+De.charCodeAt(Re++);return ke(Fe)}function Te(){try{var Ne;return ve&&(Ne=ve.randomBytes)?Ne=Ne(ae):(Ne=new Uint8Array(ae),(globalThis.crypto||globalThis.msCrypto).getRandomValues(Ne)),ke(Ne)}catch{var Fe=globalThis.navigator,De=Fe&&Fe.plugins;return[+new Date,globalThis,De,globalThis.screen,ke(ee)]}}function ke(Ne){return String.fromCharCode.apply(0,Ne)}if(Se(ne.random(),ee),re.exports){re.exports=ye;try{ve=require$$0$1}catch{}}})([],Math)})(seedrandom$2);var seedrandomExports$1=seedrandom$2.exports,alea$2=aleaExports$1,xor128$2=xor128Exports$1,xorwow$2=xorwowExports$1,xorshift7$2=xorshift7Exports$1,xor4096$2=xor4096Exports$1,tychei$2=tycheiExports$1,sr$1=seedrandomExports$1;sr$1.alea=alea$2;sr$1.xor128=xor128$2;sr$1.xorwow=xorwow$2;sr$1.xorshift7=xorshift7$2;sr$1.xor4096=xor4096$2;sr$1.tychei=tychei$2;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ZipMismatchMode;(function(re){re[re.FAIL=0]="FAIL",re[re.SHORTEST=1]="SHORTEST",re[re.LONGEST=2]="LONGEST"})(ZipMismatchMode||(ZipMismatchMode={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function assertNotComplex$1(re,ee){Array.isArray(re)||(re=[re]),re.forEach(ne=>{ne!=null&&assert$2(ne.dtype!=="complex64",()=>`${ee} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const whereImpl$1=whereImpl$2;class MathBackendCPU extends KernelBackend{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new DataStorage(this,engine())}write(ee,ne,ae){this.firstUse&&(this.firstUse=!1,env().get("IS_NODE")&&warn$1(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));const ce={};return this.data.set(ce,{values:ee,dtype:ae,refCount:1}),ce}makeTensorInfo(ee,ne,ae){let ce;if(ne==="string"&&ae!=null&&ae.length>0&&isString$2(ae[0])){const le=ae.map(ue=>encodeString(ue));ce=this.write(le,ee,ne)}else ce=this.write(ae,ee,ne);return{dataId:ce,shape:ee,dtype:ne}}incRef(ee){const ne=this.data.get(ee);ne.refCount++}decRef(ee){if(this.data.has(ee)){const ne=this.data.get(ee);ne.refCount--}}move(ee,ne,ae,ce){this.data.set(ee,{values:ne,dtype:ce,refCount:1})}numDataIds(){return this.data.numDataIds()}async read(ee){return this.readSync(ee)}readSync(ee){const{dtype:ne,complexTensorInfos:ae}=this.data.get(ee);if(ne==="complex64"){const ce=this.readSync(ae.real.dataId),le=this.readSync(ae.imag.dataId);return mergeRealAndImagArrays(ce,le)}return this.data.get(ee).values}bufferSync(ee){const ne=this.readSync(ee.dataId);let ae=ne;if(ee.dtype==="string")try{ae=ne.map(ce=>decodeString(ce))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return buffer$1(ee.shape,ee.dtype,ae)}makeOutput(ee,ne,ae){const ce=this.write(ee,ne,ae);return engine().makeTensorFromDataId(ce,ne,ae,this)}disposeData(ee){if(this.data.has(ee)){const{complexTensorInfos:ne}=this.data.get(ee);ne!=null&&(this.disposeData(ne.real.dataId),this.disposeData(ne.imag.dataId)),this.data.delete(ee)}}disposeIntermediateTensorInfo(ee){const ne=ee.dataId;if(this.data.has(ne)){const ae=this.data.get(ne);ae.refCount--,ae.refCount<1&&this.disposeData(ne)}}async time(ee){const ne=now$1();return ee(),{kernelMs:now$1()-ne}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(ee){assertNotComplex$1([ee],"where");const ne=this.readSync(ee.dataId);return whereImpl$1(ee.shape,ne)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function simpleAbsImpl(re){const ee=new Float32Array(re.length);for(let ne=0;ne<re.length;++ne)ee[ne]=Math.abs(re[ne]);return ee}const abs$2=re=>{const{x:ee}=re.inputs,ne=re.backend;assertNotComplex$1(ee,"abs");let ae=new Float32Array(sizeFromShape(ee.shape));const ce=ne.data.get(ee.dataId).values;return ae=simpleAbsImpl(ce),ne.makeOutput(ae,ee.shape,"float32")},absConfig$1={kernelName:Abs$1,backendName:"cpu",kernelFunc:abs$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createSimpleBinaryKernelImpl(re){return(ee,ne,ae,ce,le)=>{const ue=assertAndGetBroadcastShape(ee,ne),he=ue.length,fe=computeStrides(ue),me=sizeFromShape(ue),ge=getTypedArrayFromDType(le,me),ve=ee.length,ye=ne.length,be=computeStrides(ee),Ee=computeStrides(ne),Ce=getBroadcastDims$1(ee,ue),Se=getBroadcastDims$1(ne,ue);if(Ce.length+Se.length===0)for(let Te=0;Te<ge.length;++Te)ge[Te]=re(ae[Te%ae.length],ce[Te%ce.length]);else for(let Te=0;Te<ge.length;++Te){const ke=indexToLoc(Te,he,fe),Ne=ke.slice(-ve);Ce.forEach(Re=>Ne[Re]=0);const Fe=locToIndex(Ne,ve,be),De=ke.slice(-ye);Se.forEach(Re=>De[Re]=0);const Oe=locToIndex(De,ye,Ee);ge[Te]=re(ae[Fe],ce[Oe])}return[ge,ue]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function complex$1(re){const{inputs:ee,backend:ne}=re,{real:ae,imag:ce}=ee,le=ne.data.get(ae.dataId).values,ue=ne.data.get(ce.dataId).values,he=ne.makeTensorInfo(ae.shape,"complex64"),fe=ne.data.get(he.dataId);return fe.complexTensorInfos={real:ne.makeTensorInfo(ae.shape,"float32",le),imag:ne.makeTensorInfo(ce.shape,"float32",ue)},he}const complexConfig$1={kernelName:Complex,backendName:"cpu",kernelFunc:complex$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zeros(re,ee,ne="float32"){if(ne==="complex64"){const ce=zeros(re,ee,"float32"),le=zeros(re,ee,"float32");return complex$1({inputs:{real:ce,imag:le},backend:re})}const ae=makeZerosTypedArray(sizeFromShape(ee),ne);return re.makeTensorInfo(ee,ne,ae)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function identity$4(re){const{inputs:ee,backend:ne}=re,{x:ae}=ee;return ne.incRef(ae.dataId),{dataId:ae.dataId,shape:ae.shape,dtype:ae.dtype}}const identityConfig$1={kernelName:Identity$1,backendName:"cpu",kernelFunc:identity$4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function real$1(re){const{inputs:ee,backend:ne}=re,{input:ae}=ee,ce=ne.data.get(ae.dataId).complexTensorInfos.real,le=ne.data.get(ce.dataId).values;return ne.makeTensorInfo(ce.shape,ce.dtype,le)}const realConfig$1={kernelName:Real,backendName:"cpu",kernelFunc:real$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cast$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{dtype:le}=ae;if(le==="complex64"){if(ce.dtype==="complex64")return identity$4({inputs:{x:ce},backend:ne});const ue=zeros(ne,ce.shape,ce.dtype),he=cast$1({inputs:{x:ce},backend:ne,attrs:{dtype:"float32"}}),fe=complex$1({inputs:{real:he,imag:ue},backend:ne});return ne.disposeIntermediateTensorInfo(ue),ne.disposeIntermediateTensorInfo(he),fe}if(ce.dtype==="complex64"){const ue=real$1({inputs:{input:ce},backend:ne}),he=cast$1({inputs:{x:ue},backend:ne,attrs:{dtype:le}});return ne.disposeIntermediateTensorInfo(ue),he}if(!hasEncodingLoss(ce.dtype,le)){const ue=identity$4({inputs:{x:ce},backend:ne});return{dataId:ue.dataId,shape:ue.shape,dtype:le}}if(le==="int32"){const ue=ne.data.get(ce.dataId).values,he=Int32Array.from(ue);return ne.makeTensorInfo(ce.shape,"int32",he)}if(le==="bool"){const ue=ne.data.get(ce.dataId).values,he=toTypedArray([0],ce.dtype),[fe,me]=createSimpleBinaryKernelImpl((ge,ve)=>ge!==ve?1:0)(ce.shape,[],ue,he,"bool");return ne.makeTensorInfo(me,"bool",fe)}throw new Error(`Error in Cast: failed to cast ${ce.dtype} to ${le}`)}const castConfig$1={kernelName:Cast,backendName:"cpu",kernelFunc:cast$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function binaryKernelFunc$1(re,ee,ne,ae){return ne==null?({inputs:ce,backend:le})=>{const{a:ue,b:he}=ce,fe=le;assertNotComplex$1([ue,he],re);const me=fe.data.get(ue.dataId).values,ge=fe.data.get(he.dataId).values,ve=ae||ue.dtype,[ye,be]=ee(ue.shape,he.shape,me,ge,ve);return fe.makeTensorInfo(be,ve,ye)}:({inputs:ce,backend:le})=>{const{a:ue,b:he}=ce,fe=le;if(ue.dtype==="complex64"||he.dtype==="complex64"){const me=cast$1({inputs:{x:ue},backend:fe,attrs:{dtype:"complex64"}}),ge=fe.data.get(me.dataId),ve=ge.complexTensorInfos.real,ye=ge.complexTensorInfos.imag,be=fe.data.get(ve.dataId).values,Ee=fe.data.get(ye.dataId).values,Ce=cast$1({inputs:{x:he},backend:fe,attrs:{dtype:"complex64"}}),Se=fe.data.get(Ce.dataId),Te=Se.complexTensorInfos.real,ke=Se.complexTensorInfos.imag,Ne=fe.data.get(Te.dataId).values,Fe=fe.data.get(ke.dataId).values,[De,Oe,Re]=ne(ue.shape,he.shape,be,Ee,Ne,Fe),Be=fe.makeTensorInfo(Re,"float32",De),Le=fe.makeTensorInfo(Re,"float32",Oe),je=complex$1({inputs:{real:Be,imag:Le},backend:fe});return fe.disposeIntermediateTensorInfo(me),fe.disposeIntermediateTensorInfo(Ce),fe.disposeIntermediateTensorInfo(Be),fe.disposeIntermediateTensorInfo(Le),je}else{const me=fe.data.get(ue.dataId).values,ge=fe.data.get(he.dataId).values,ve=ae||ue.dtype,[ye,be]=ee(ue.shape,he.shape,me,ge,ve);return fe.makeTensorInfo(be,ve,ye)}}}function createComplexBinaryKernelImpl(re){return(ee,ne,ae,ce,le,ue)=>{const he=assertAndGetBroadcastShape(ee,ne),fe=sizeFromShape(he),me=he.length,ge=computeStrides(he),ve=getTypedArrayFromDType("float32",fe),ye=getTypedArrayFromDType("float32",fe),be=getBroadcastDims$1(ee,he),Ee=getBroadcastDims$1(ne,he),Ce=mergeRealAndImagArrays(ae,ce),Se=mergeRealAndImagArrays(le,ue),Te=ee.length,ke=computeStrides(ee),Ne=ne.length,Fe=computeStrides(ne);if(be.length+Ee.length===0)for(let De=0;De<ve.length;De++){const Oe=De%Ce.length,Re=De%Se.length,Be=re(Ce[Oe*2],Ce[Oe*2+1],Se[Re*2],Se[Re*2+1]);ve[De]=Be.real,ye[De]=Be.imag}else for(let De=0;De<ve.length;De++){const Oe=indexToLoc(De,me,ge),Re=Oe.slice(-Te);be.forEach(qe=>Re[qe]=0);const Be=locToIndex(Re,Te,ke),Le=Oe.slice(-Ne);Ee.forEach(qe=>Le[qe]=0);const je=locToIndex(Le,Ne,Fe),Ge=re(Ce[Be*2],Ce[Be*2+1],Se[je*2],Se[je*2+1]);ve[De]=Ge.real,ye[De]=Ge.imag}return[ve,ye,he]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const addImpl=createSimpleBinaryKernelImpl((re,ee)=>re+ee),addComplexImpl=createComplexBinaryKernelImpl((re,ee,ne,ae)=>({real:re+ne,imag:ee+ae})),add=binaryKernelFunc$1(Add$2,addImpl,addComplexImpl),addConfig$1={kernelName:Add$2,backendName:"cpu",kernelFunc:add};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bincountImpl(re,ee,ne,ae,ce){const le=sizeFromShape(ae),ue=makeZerosTypedArray(ce,ne);for(let he=0;he<re.length;he++){const fe=re[he];if(fe<0)throw new Error("Input x must be non-negative!");fe>=ce||(le>0?ue[fe]+=ee[he]:ue[fe]+=1)}return ue}function bincountReduceImpl(re,ee,ne,ae=!1){const ce=re.shape[0],le=re.shape[1],ue=buffer$1([ce,ne],ee.dtype);for(let he=0;he<ce;he++)for(let fe=0;fe<le;fe++){const me=re.get(he,fe);if(me<0)throw new Error("Input x must be non-negative!");me>=ne||(ae?ue.set(1,he,me):ee.size>0?ue.set(ue.get(he,me)+ee.get(he,fe),he,me):ue.set(ue.get(he,me)+1,he,me))}return ue}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createSimpleUnaryImpl(re){return(ee,ne,ae)=>{const ce=getTypedArrayFromDType(ne,ee.length);for(let le=0;le<ee.length;++le)ce[le]=re(ee[le],ae);return ce}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unaryKernelFunc$1(re,ee,ne){return({inputs:ae,attrs:ce,backend:le})=>{const{x:ue}=ae;if(assertNotComplex$1(ue,re),ue.dtype==="string"||ne==="string")throw new Error("unaryKernelFunc does not support string input/output");const he=le,fe=he.data.get(ue.dataId).values,me=sizeFromShape(ue.shape),ge=ne||ue.dtype,ve=getArrayFromDType(ge,me);for(let ye=0;ye<me;++ye)ve[ye]=ee(fe[ye],ce);return he.makeTensorInfo(ue.shape,ge,ve)}}function unaryKernelFuncFromImpl(re,ee,ne){return({inputs:ae,attrs:ce,backend:le})=>{const{x:ue}=ae;if(assertNotComplex$1(ue,re),ue.dtype==="string"||ne==="string")throw new Error("unaryKernelFunc does not support string input/output");const he=le,fe=he.data.get(ue.dataId).values,me=ne||ue.dtype,ge=ee(fe,me,ce);return he.makeTensorInfo(ue.shape,me,ge)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ceilImpl=createSimpleUnaryImpl(re=>Math.ceil(re)),ceil$1=unaryKernelFuncFromImpl(Ceil,ceilImpl),ceilConfig$1={kernelName:Ceil,backendName:"cpu",kernelFunc:ceil$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concatImpl$1(re,ee,ne,ae){const ce=getArrayFromDType(ne,sizeFromShape(ee));if(ae&&ne!=="string"){let le=0;re.forEach(ue=>{const he=sizeFromShape(ue.shape);ce.set(ue.vals,le),le+=he})}else{let le=0;re.forEach(ue=>{const he=ne==="string"?fromUint8ToStringArray(ue.vals):ue.vals;let fe=0;for(let me=0;me<ue.shape[0];++me){const ge=me*ee[1]+le;for(let ve=0;ve<ue.shape[1];++ve)ce[ge+ve]=he[fe++]}le+=ue.shape[1]})}return ce}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expImpl=createSimpleUnaryImpl(re=>Math.exp(re)),exp$1=unaryKernelFuncFromImpl(Exp,expImpl),expConfig$1={kernelName:Exp,backendName:"cpu",kernelFunc:exp$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expm1Impl=createSimpleUnaryImpl(re=>Math.expm1(re)),expm1$1=unaryKernelFuncFromImpl(Expm1,expm1Impl),expm1Config$1={kernelName:Expm1,backendName:"cpu",kernelFunc:expm1$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorImpl=createSimpleUnaryImpl(re=>Math.floor(re)),floor$2=unaryKernelFuncFromImpl(Floor,floorImpl),floorConfig$1={kernelName:Floor,backendName:"cpu",kernelFunc:floor$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherV2Impl(re,ee,ne){const ae=buffer$1(ne,re.dtype);for(let ce=0;ce<ae.size;++ce){const ue=ae.indexToLoc(ce).slice(),he=ue[0],fe=ue[2],me=ee.locToIndex([he,fe]);ue[2]=ee.values[me];const ge=re.locToIndex(ue);ae.values[ce]=re.values[ge]}return ae}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const greaterImpl=createSimpleBinaryKernelImpl((re,ee)=>re>ee?1:0),greater$1=binaryKernelFunc$1(Greater,greaterImpl,null,"bool"),greaterConfig$1={kernelName:Greater,backendName:"cpu",kernelFunc:greater$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lessImpl=createSimpleBinaryKernelImpl((re,ee)=>re<ee?1:0),less$1=binaryKernelFunc$1(Less,lessImpl,null,"bool"),lessConfig$1={kernelName:Less,backendName:"cpu",kernelFunc:less$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function linSpaceImpl(re,ee,ne){const ae=(ee-re)/(ne-1),ce=makeZerosTypedArray(ne,"float32");ce[0]=re;for(let le=1;le<ce.length;le++)ce[le]=ce[le-1]+ae;return ce}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logImpl=createSimpleUnaryImpl(re=>Math.log(re)),log$3=unaryKernelFuncFromImpl(Log,logImpl),logConfig$1={kernelName:Log,backendName:"cpu",kernelFunc:log$3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxImpl$1(re,ee,ne,ae){const ce=getTypedArrayFromDType(ae,sizeFromShape(ne));for(let le=0;le<ce.length;++le){const ue=le*ee;let he=re[ue];for(let fe=0;fe<ee;++fe){const me=re[ue+fe];me>he&&(he=me)}ce[le]=he}return ce}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maximumImpl=createSimpleBinaryKernelImpl((re,ee)=>Math.max(re,ee)),maximum$1=binaryKernelFunc$1(Maximum$1,maximumImpl),maximumConfig$1={kernelName:Maximum$1,backendName:"cpu",kernelFunc:maximum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const minimumImpl=createSimpleBinaryKernelImpl((re,ee)=>Math.min(re,ee)),minimum$1=binaryKernelFunc$1(Minimum$1,minimumImpl),minimumConfig$1={kernelName:Minimum$1,backendName:"cpu",kernelFunc:minimum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const multiplyImpl=createSimpleBinaryKernelImpl((re,ee)=>re*ee),multiplyComplexImpl=createComplexBinaryKernelImpl((re,ee,ne,ae)=>({real:re*ne-ee*ae,imag:re*ae+ee*ne})),multiply$2=binaryKernelFunc$1(Multiply$2,multiplyImpl,multiplyComplexImpl),multiplyConfig$1={kernelName:Multiply$2,backendName:"cpu",kernelFunc:multiply$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function negImpl(re,ee,ne){const ae=createScalarValue(-1,ne);return multiplyImpl([],ee,ae,re,ne)}function neg$1(re){const{inputs:ee,backend:ne}=re,{x:ae}=ee;assertNotComplex$1(ae,"neg");const ce=ne.data.get(ae.dataId).values,[le,ue]=negImpl(ce,ae.shape,ae.dtype);return ne.makeTensorInfo(ue,ae.dtype,le)}const negConfig$1={kernelName:Neg,backendName:"cpu",kernelFunc:neg$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const notEqualImpl=createSimpleBinaryKernelImpl((re,ee)=>re!==ee?1:0),notEqual$1=binaryKernelFunc$1(NotEqual,notEqualImpl,null,"bool"),notEqualConfig$1={kernelName:NotEqual,backendName:"cpu",kernelFunc:notEqual$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transposeImpl$1(re,ee,ne,ae,ce){const le=ee.length,ue=sizeFromShape(ee),he=computeStrides(ee),fe=computeStrides(ce),me=getTypedArrayFromDType(ne,sizeFromShape(ce));for(let ge=0;ge<ue;++ge){const ve=indexToLoc(ge,le,he),ye=new Array(ve.length);for(let Ee=0;Ee<ye.length;Ee++)ye[Ee]=ve[ae[Ee]];const be=locToIndex(ye,le,fe);me[be]=re[ge]}return me}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transpose$1(re){const{inputs:ee,attrs:ne,backend:ae}=re,{x:ce}=ee,{perm:le}=ne;assertNotComplex$1(ce,"transpose");const ue=ce.shape.length,he=new Array(ue);for(let ve=0;ve<he.length;ve++)he[ve]=ce.shape[le[ve]];const fe=ae.data.get(ce.dataId).values,me=transposeImpl$1(fe,ce.shape,ce.dtype,le,he);return{dataId:ae.write(me,he,ce.dtype),shape:he,dtype:ce.dtype}}const transposeConfig$1={kernelName:Transpose,backendName:"cpu",kernelFunc:transpose$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prodImpl(re,ee,ne,ae){const[ce,le]=computeOutAndReduceShapes(re,ae),ue=upcastType(ee,"int32"),he=makeZerosTypedArray(sizeFromShape(ce),ue),fe=sizeFromShape(le);for(let me=0;me<he.length;++me){const ge=me*fe;let ve=1;for(let ye=0;ye<fe;++ye)ve*=ne[ge+ye];he[me]=ve}return{outVals:he,outShape:ce,outDtype:ue}}function prod$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le,keepDims:ue}=ae;assertNotComplex$1(ce,"prod");const he=ce.shape.length,fe=parseAxisParam(le,ce.shape),me=getAxesPermutation(fe,he);let ge=fe,ve=ce;const ye=[];me!=null&&(ve=transpose$1({inputs:{x:ce},backend:ne,attrs:{perm:me}}),ye.push(ve),ge=getInnerMostAxes(ge.length,he));const be=ne.data.get(ve.dataId).values,{outVals:Ee,outShape:Ce,outDtype:Se}=prodImpl(ve.shape,ve.dtype,be,ge);let Te=Ce;return ue&&(Te=expandShapeToKeepDim(Ce,fe)),ye.forEach(ke=>ne.disposeIntermediateTensorInfo(ke)),ne.makeTensorInfo(Te,Se,Ee)}const prodConfig$1={kernelName:Prod,backendName:"cpu",kernelFunc:prod$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rangeImpl(re,ee,ne,ae){const ce=re===ee,le=re<ee&&ne<0,ue=ee<re&&ne>1;if(ce||le||ue)return makeZerosTypedArray(0,ae);const he=Math.abs(Math.ceil((ee-re)/ne)),fe=makeZerosTypedArray(he,ae);ee<re&&ne===1&&(ne=-1),fe[0]=re;for(let me=1;me<fe.length;me++)fe[me]=fe[me-1]+ne;return fe}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rsqrtImpl=createSimpleUnaryImpl(re=>1/Math.sqrt(re)),rsqrt$1=unaryKernelFuncFromImpl(Rsqrt,rsqrtImpl),rsqrtConfig$1={kernelName:Rsqrt,backendName:"cpu",kernelFunc:rsqrt$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sliceImpl(re,ee,ne,ae,ce){const le=isSliceContinous(ae,ee,ne),ue=sizeFromShape(ne),he=computeStrides(ae);if(le){const ve=computeFlatOffset(ee,he);return ce==="string"?re.slice(ve,ve+ue):re.subarray(ve,ve+ue)}const fe=ce==="string"?fromUint8ToStringArray(re):re,me=buffer$1(ae,ce,fe),ge=buffer$1(ne,ce);for(let ve=0;ve<ge.size;++ve){const ye=ge.indexToLoc(ve),be=ye.map((Ee,Ce)=>Ee+ee[Ce]);ge.set(me.get(...be),...ye)}return ce==="string"?fromStringArrayToUint8(ge.values):ge.values}function slice$3(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{begin:le,size:ue}=ae;assertNotComplex$1(ce,"slice");const[he,fe]=parseSliceParams(ce,le,ue);assertParamsValid(ce,he,fe);const me=ne.data.get(ce.dataId).values,ge=sliceImpl(me,he,fe,ce.shape,ce.dtype);return ne.makeTensorInfo(fe,ce.dtype,ge)}const sliceConfig$1={kernelName:Slice,backendName:"cpu",kernelFunc:slice$3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squaredDifferenceImpl=createSimpleBinaryKernelImpl((re,ee)=>{const ne=re-ee;return ne*ne}),squaredDifference$1=binaryKernelFunc$1(SquaredDifference,squaredDifferenceImpl),squaredDifferenceConfig$1={kernelName:SquaredDifference,backendName:"cpu",kernelFunc:squaredDifference$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSliceImpl(re,ee,ne,ae){const ce=buffer$1(re,ee.dtype);for(let le=0;le<ce.size;le++){const ue=ce.indexToLoc(le),he=new Array(ue.length);for(let fe=0;fe<he.length;fe++)he[fe]=ue[fe]*ne[fe]+ae[fe];ce.set(ee.get(...he),...ue)}return ce}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const subImpl=createSimpleBinaryKernelImpl((re,ee)=>re-ee),subComplexImpl=createComplexBinaryKernelImpl((re,ee,ne,ae)=>({real:re-ne,imag:ee-ae})),sub$1=binaryKernelFunc$1(Sub,subImpl,subComplexImpl),subConfig$1={kernelName:Sub,backendName:"cpu",kernelFunc:sub$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tileImpl(re,ee){const ne=new Array(re.rank);for(let ce=0;ce<ne.length;ce++)ne[ce]=re.shape[ce]*ee[ce];const ae=buffer$1(ne,re.dtype);for(let ce=0;ce<ae.values.length;++ce){const le=ae.indexToLoc(ce),ue=new Array(re.rank);for(let fe=0;fe<ue.length;fe++)ue[fe]=le[fe]%re.shape[fe];const he=re.locToIndex(ue);ae.values[ce]=re.values[he]}return ae}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function topKImpl(re,ee,ne,ae,ce){const le=ee[ee.length-1],[ue,he]=[re.length/le,le],fe=getTypedArrayFromDType(ne,ue*ae),me=getTypedArrayFromDType("int32",ue*ae);for(let ve=0;ve<ue;ve++){const ye=ve*he,be=re.subarray(ye,ye+he),Ee=[];for(let ke=0;ke<be.length;ke++)Ee.push({value:be[ke],index:ke});Ee.sort((ke,Ne)=>Ne.value-ke.value);const Ce=ve*ae,Se=fe.subarray(Ce,Ce+ae),Te=me.subarray(Ce,Ce+ae);for(let ke=0;ke<ae;ke++)Se[ke]=Ee[ke].value,Te[ke]=Ee[ke].index}const ge=ee.slice();return ge[ge.length-1]=ae,[buffer$1(ge,ne,fe),buffer$1(ge,"int32",me)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uniqueImpl(re,ee,ne,ae){const ce=parseAxisParam(ee,ne)[0],le=[1,ne[0],1];for(let Ee=0;Ee<ce;Ee++)le[0]*=ne[Ee];le[1]=ne[ce];for(let Ee=ce+1;Ee<ne.length;Ee++)le[2]*=ne[Ee];const ue={},he=new Int32Array(ne[ce]),fe=new TensorBuffer(le,ae,re),me=[],ge=le[0]===1&&le[2]===1;for(let Ee=0;Ee<ne[ce];Ee++){let Ce;if(ge)Ce=re[Ee].toString();else{const Se=[];for(let Te=0;Te<le[0];Te++)for(let ke=0;ke<le[2];ke++)Se.push(fe.get(Te,Ee,ke));Ce=Se.join(",")}if(ue[Ce]!==void 0)he[Ee]=ue[Ce];else{const Se=Object.keys(ue).length;ue[Ce]=Se,he[Ee]=Se,me.push(Ee)}}const ve=le.slice();ve[1]=Object.keys(ue).length;const ye=new TensorBuffer(ve,ae);me.forEach((Ee,Ce)=>{for(let Se=0;Se<le[0];Se++)for(let Te=0;Te<le[2];Te++)ye.set(fe.get(Se,Ee,Te),Se,Ce,Te)});const be=ne.slice();return be[ce]=ve[1],{outputValues:ye.values,outputShape:be,indices:he}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const shared=Object.freeze(Object.defineProperty({__proto__:null,addImpl,bincountImpl,bincountReduceImpl,ceilImpl,concatImpl:concatImpl$1,expImpl,expm1Impl,floorImpl,gatherV2Impl,greaterImpl,lessImpl,linSpaceImpl,logImpl,maxImpl:maxImpl$1,maximumImpl,minimumImpl,multiplyImpl,negImpl,notEqualImpl,prodImpl,rangeImpl,rsqrtImpl,simpleAbsImpl,sliceImpl,squaredDifferenceImpl,stridedSliceImpl,subImpl,tileImpl,topKImpl,transposeImpl:transposeImpl$1,uniqueImpl},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */registerBackend("cpu",()=>new MathBackendCPU,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const elu$1=unaryKernelFunc$1(Elu$1,re=>re>=0?re:Math.exp(re)-1),eluConfig$1={kernelName:Elu$1,backendName:"cpu",kernelFunc:elu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function leakyRelu$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{alpha:le}=ae;assertNotComplex$1([ce],"leakyRelu");const ue=sizeFromShape(ce.shape),he=ne.data.get(ce.dataId).values,fe=getTypedArrayFromDType("float32",ue);for(let me=0;me<he.length;me++)fe[me]=he[me]<0?le*he[me]:he[me];return ne.makeTensorInfo(ce.shape,"float32",fe)}const leakyReluConfig$1={kernelName:LeakyRelu,backendName:"cpu",kernelFunc:leakyRelu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const preluImpl=createSimpleBinaryKernelImpl((re,ee)=>re<0?ee*re:re);function prelu$1(re){const{inputs:ee,backend:ne}=re,{x:ae,alpha:ce}=ee;assertNotComplex$1([ae,ce],"prelu");const le=ne.data.get(ae.dataId).values,ue=ne.data.get(ce.dataId).values,[he,fe]=preluImpl(ae.shape,ce.shape,le,ue,ae.dtype);return ne.makeTensorInfo(fe,ae.dtype,he)}const preluConfig$1={kernelName:Prelu,backendName:"cpu",kernelFunc:prelu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const relu$1=unaryKernelFunc$1(Relu$1,re=>Math.max(0,re)),reluConfig$1={kernelName:Relu$1,backendName:"cpu",kernelFunc:relu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const relu6$1=unaryKernelFunc$1(Relu6$1,re=>Math.min(Math.max(0,re),6)),relu6Config$1={kernelName:Relu6$1,backendName:"cpu",kernelFunc:relu6$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function applyActivation(re,ee,ne,ae,ce){if(ne==="linear")return identity$4({inputs:{x:ee},backend:re});if(ne==="relu")return relu$1({inputs:{x:ee},backend:re});if(ne==="elu")return elu$1({inputs:{x:ee},backend:re});if(ne==="relu6")return relu6$1({inputs:{x:ee},backend:re});if(ne==="prelu")return prelu$1({inputs:{x:ee,alpha:ae},backend:re});if(ne==="leakyrelu")return leakyRelu$1({inputs:{x:ee},backend:re,attrs:{alpha:ce}});throw new Error(`Activation ${ne} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reshape$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{shape:le}=ae,ue=sizeFromShape(ce.shape),he=inferFromImplicitShape(le,ue),fe=sizeFromShape(he);assert$2(ue===fe,()=>`The new shape (${he}) has ${fe} elements and the old shape (${ce.shape}) has ${ue} elements. The new shape and old shape must have the same number of elements.`),ne.incRef(ce.dataId);const me=ne.data.get(ce.dataId);if(me.complexTensorInfos!=null){const ge=me.complexTensorInfos.real,ve=me.complexTensorInfos.imag;ge.shape=he,ve.shape=he}return{dataId:ce.dataId,shape:he,dtype:ce.dtype}}const reshapeConfig$1={kernelName:Reshape$1,backendName:"cpu",kernelFunc:reshape$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchMatMul$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{a:ce,b:le}=ee,{transposeA:ue,transposeB:he}=ae;assertNotComplex$1([ce,le],"matMul");const fe=ce.shape.length,me=le.shape.length,ge=ue?ce.shape[fe-2]:ce.shape[fe-1],ve=he?le.shape[me-1]:le.shape[me-2],ye=ue?ce.shape[fe-1]:ce.shape[fe-2],be=he?le.shape[me-2]:le.shape[me-1],Ee=ce.shape.slice(0,-2),Ce=le.shape.slice(0,-2),Se=sizeFromShape(Ee),Te=sizeFromShape(Ce),ke=Se===Te||Se===1||Te===1;assert$2(fe>=2&&me>=2&&ke,()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${Ee}) and (${Ce}).`);const Fe=(Se>Te?ce.shape.slice(0,-2):le.shape.slice(0,-2)).concat([ye,be]);assert$2(ge===ve,()=>`Error in matMul: inner shapes (${ge}) and (${ve}) of Tensors with shapes ${ce.shape} and ${le.shape} and transposeA=${ue} and transposeB=${he} must match.`);const De=ue?[Se,ge,ye]:[Se,ye,ge],Oe=he?[Te,be,ve]:[Te,ve,be],Re=reshape$1({inputs:{x:ce},backend:ne,attrs:{shape:De}}),Be=reshape$1({inputs:{x:le},backend:ne,attrs:{shape:Oe}}),Le=ue?Re.shape[1]:Re.shape[2],je=ue?Re.shape[2]:Re.shape[1],Ge=he?Be.shape[1]:Be.shape[2],qe=Math.max(Se,Te),Ue=ne.data.get(Re.dataId).values,ze=ne.data.get(Be.dataId).values,He=computeStrides(Re.shape),Ye=computeStrides(Be.shape),[Xe,We,Ze]=ue?[He[0],1,He[1]]:[He[0],He[1],1],[Vt,Qt,Yt]=he?[1,Ye[1],Ye[0]]:[Ye[1],1,Ye[0]],Jt=je*Ge,rn=buffer$1([qe,je,Ge],Re.dtype),nn=rn.values,fn=ne.blockSize;for(let an=0;an<qe;an++)for(let un=0;un<je;un+=fn)for(let bn=0;bn<Ge;bn+=fn)for(let En=0;En<Le;En+=fn){const $n=Math.min(un+fn,je),On=Math.min(bn+fn,Ge),zn=Math.min(En+fn,Le);for(let Rn=un;Rn<$n;Rn++)for(let Ut=bn;Ut<On;Ut++){let tn=0;for(let dn=En;dn<zn;dn++){const xn=Math.min(an,Se-1)*Xe,An=Math.min(an,Te-1)*Yt,vn=Ue[xn+Rn*We+dn*Ze],Nn=ze[dn*Vt+Ut*Qt+An];tn+=vn*Nn}nn[an*Jt+(Rn*Ge+Ut)]+=tn}}return ne.disposeIntermediateTensorInfo(Re),ne.disposeIntermediateTensorInfo(Be),ne.makeTensorInfo(Fe,rn.dtype,rn.values)}const batchMatMulConfig$1={kernelName:BatchMatMul,backendName:"cpu",kernelFunc:batchMatMul$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _fusedMatMul$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{a:ce,b:le,bias:ue,preluActivationWeights:he}=ee,{transposeA:fe,transposeB:me,activation:ge,leakyreluAlpha:ve}=ae;let ye,be,Ee;const Ce=[];ye=batchMatMul$1({inputs:{a:ce,b:le},attrs:{transposeA:fe,transposeB:me},backend:ne}),ue&&(be=add({inputs:{a:ye,b:ue},backend:ne}),Ce.push(ye),ye=be),ge&&(Ee=applyActivation(ne,ye,ge,he,ve),Ce.push(ye),ye=Ee);for(const Te of Ce)ne.disposeIntermediateTensorInfo(Te);return ye}const _fusedMatMulConfig$1={kernelName:_FusedMatMul,backendName:"cpu",kernelFunc:_fusedMatMul$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acos$1=unaryKernelFunc$1(Acos,re=>Math.acos(re)),acosConfig$1={kernelName:Acos,backendName:"cpu",kernelFunc:acos$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acosh$1=unaryKernelFunc$1(Acosh,re=>Math.acosh(re)),acoshConfig$1={kernelName:Acosh,backendName:"cpu",kernelFunc:acosh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function addN$1(re){const{inputs:ee,backend:ne}=re,ae=ee;assertNotComplex$1(ee,"addN");const ce=ae.map(he=>ne.data.get(he.dataId).values),le=buffer$1(ae[0].shape,ae[0].dtype),ue=le.values;for(let he=0;he<ae.length;he++){const fe=ce[he];for(let me=0;me<ue.length;me++)ue[me]+=fe[me]}return ne.makeTensorInfo(le.shape,le.dtype,le.values)}const addNConfig$1={kernelName:AddN,backendName:"cpu",kernelFunc:addN$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function all$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le,keepDims:ue}=ae;assertNotComplex$1(ce,"all");const he=parseAxisParam(le,ce.shape);let fe=he;const me=getAxesPermutation(fe,ce.shape.length);let ge=ce;me!=null&&(ge=transpose$1({inputs:{x:ce},backend:ne,attrs:{perm:me}}),fe=getInnerMostAxes(fe.length,ce.shape.length)),assertAxesAreInnerMostDims("all",fe,ge.shape.length);const[ve,ye]=computeOutAndReduceShapes(ge.shape,fe),be=sizeFromShape(ye),Ee=makeZerosTypedArray(sizeFromShape(ve),ge.dtype),Ce=ne.data.get(ge.dataId).values;for(let Te=0;Te<Ee.length;++Te){const ke=Te*be;let Ne=Ce[ke];for(let Fe=0;Fe<be;++Fe){const De=Ce[ke+Fe];Ne=Ne&&De}Ee[Te]=Ne}me!=null&&ne.disposeIntermediateTensorInfo(ge);const Se=ne.makeTensorInfo(ve,ge.dtype,Ee);if(ue){const Te=expandShapeToKeepDim(ve,he),ke=reshape$1({inputs:{x:Se},backend:ne,attrs:{shape:Te}});return ne.disposeIntermediateTensorInfo(Se),ke}return Se}const allConfig$1={kernelName:All,backendName:"cpu",kernelFunc:all$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function any$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le,keepDims:ue}=ae;assertNotComplex$1(ce,"any");const he=parseAxisParam(le,ce.shape);let fe=he;const me=getAxesPermutation(fe,ce.shape.length);let ge=ce;me!=null&&(ge=transpose$1({inputs:{x:ce},backend:ne,attrs:{perm:me}}),fe=getInnerMostAxes(fe.length,ce.shape.length)),assertAxesAreInnerMostDims("any",fe,ge.shape.length);const[ve,ye]=computeOutAndReduceShapes(ge.shape,fe),be=sizeFromShape(ye),Ee=makeZerosTypedArray(sizeFromShape(ve),ge.dtype),Ce=ne.data.get(ge.dataId).values;for(let Te=0;Te<Ee.length;++Te){const ke=Te*be;let Ne=Ce[ke];for(let Fe=0;Fe<be;++Fe){const De=Ce[ke+Fe];Ne=Ne||De}Ee[Te]=Ne}me!=null&&ne.disposeIntermediateTensorInfo(ge);const Se=ne.makeTensorInfo(ve,ge.dtype,Ee);if(ue){const Te=expandShapeToKeepDim(ve,he),ke=reshape$1({inputs:{x:Se},backend:ne,attrs:{shape:Te}});return ne.disposeIntermediateTensorInfo(Se),ke}return Se}const anyConfig$1={kernelName:Any,backendName:"cpu",kernelFunc:any$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMax$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le}=ae;assertNotComplex$1(ce,"argMax");let ue=parseAxisParam(le,ce.shape);const he=getAxesPermutation(ue,ce.shape.length);let fe=ce;const me=[];he!=null&&(fe=transpose$1({inputs:{x:ce},backend:ne,attrs:{perm:he}}),me.push(fe),ue=getInnerMostAxes(ue.length,fe.shape.length)),ue=[ue[0]],assertAxesAreInnerMostDims("argMax",ue,fe.shape.length);const[ge,ve]=computeOutAndReduceShapes(fe.shape,ue),ye=sizeFromShape(ge),be=makeZerosTypedArray(ye,"int32"),Ee=sizeFromShape(ve),Ce=ne.data.get(fe.dataId).values;for(let Se=0;Se<be.length;++Se){const Te=Se*Ee;let ke=Ce[Te],Ne=0;for(let Fe=0;Fe<Ee;++Fe){const De=Ce[Te+Fe];De>ke&&(ke=De,Ne=Fe)}be[Se]=Ne}return me.forEach(Se=>ne.disposeIntermediateTensorInfo(Se)),ne.makeTensorInfo(ge,"int32",be)}const argMaxConfig$1={kernelName:ArgMax,backendName:"cpu",kernelFunc:argMax$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMin$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le}=ae;assertNotComplex$1(ce,"argMin");let ue=parseAxisParam(le,ce.shape);const he=getAxesPermutation(ue,ce.shape.length);let fe=ce;const me=[];he!=null&&(fe=transpose$1({inputs:{x:ce},backend:ne,attrs:{perm:he}}),me.push(fe),ue=getInnerMostAxes(ue.length,fe.shape.length)),ue=[ue[0]],assertAxesAreInnerMostDims("argMin",ue,fe.shape.length);const[ge,ve]=computeOutAndReduceShapes(fe.shape,ue),ye=sizeFromShape(ge),be=makeZerosTypedArray(ye,"int32"),Ee=sizeFromShape(ve),Ce=ne.data.get(fe.dataId).values;for(let Se=0;Se<be.length;++Se){const Te=Se*Ee;let ke=Ce[Te],Ne=0;for(let Fe=0;Fe<Ee;++Fe){const De=Ce[Te+Fe];De<ke&&(ke=De,Ne=Fe)}be[Se]=Ne}return me.forEach(Se=>ne.disposeIntermediateTensorInfo(Se)),ne.makeTensorInfo(ge,"int32",be)}const argMinConfig$1={kernelName:ArgMin,backendName:"cpu",kernelFunc:argMin$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asin$1=unaryKernelFunc$1(Asin,re=>Math.asin(re)),asinConfig$1={kernelName:Asin,backendName:"cpu",kernelFunc:asin$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asinh$1=unaryKernelFunc$1(Asinh,re=>Math.asinh(re)),asinhConfig$1={kernelName:Asinh,backendName:"cpu",kernelFunc:asinh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atan$1=unaryKernelFunc$1(Atan,re=>Math.atan(re)),atanConfig$1={kernelName:Atan,backendName:"cpu",kernelFunc:atan$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atan2Impl=createSimpleBinaryKernelImpl((re,ee)=>Math.atan2(re,ee)),atan2$1=binaryKernelFunc$1(Atan2,atan2Impl),atan2Config$1={kernelName:Atan2,backendName:"cpu",kernelFunc:atan2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atanh$1=unaryKernelFunc$1(Atanh,re=>Math.atanh(re)),atanhConfig$1={kernelName:Atanh,backendName:"cpu",kernelFunc:atanh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pool$1(re,ee,ne,ae,ce,le){const ue=ce.strideHeight,he=ce.strideWidth,fe=ce.dilationHeight,me=ce.dilationWidth,ge=ce.effectiveFilterHeight,ve=ce.effectiveFilterWidth,ye=ce.padInfo.top,be=ce.padInfo.left,Ee=le==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,Ce=buffer$1(ce.outShape,ne),Se=Ce.values,Te=ce.outShape[1]*ce.outShape[2]*ce.outShape[3],ke=ce.outShape[2]*ce.outShape[3],Ne=ce.outShape[3];for(let Fe=0;Fe<ce.batchSize;++Fe){const De=Fe*Te,Oe=Fe*ae[0];for(let Re=0;Re<ce.inChannels;++Re)for(let Be=0;Be<ce.outHeight;++Be){const Le=Be*ue-ye,je=Math.max(0,Le),Ge=Math.min(ce.inHeight,ge+Le),qe=De+Be*ke;for(let Ue=0;Ue<ce.outWidth;++Ue){const ze=Ue*he-be,He=Math.max(0,ze),Ye=Math.min(ce.inWidth,ve+ze);let Xe=Ee,We=0,Ze=0;for(let Qt=je;Qt<Ge;Qt+=fe){const Yt=Oe+Qt*ae[1];for(let Jt=He;Jt<Ye;Jt+=me){const rn=Yt+Jt*ae[2],nn=re[rn+Re];le==="max"&&nn>Xe?Xe=nn:le==="avg"&&(We+=nn,Ze++)}if(isNaN(Xe))break}const Vt=qe+Ue*Ne+Re;Se[Vt]=le==="avg"?We/Ze:Xe}}}return Ce}function maxPoolPositions(re,ee,ne,ae,ce=!1,le=!1){const ue=buffer$1(ae.outShape,"int32"),he=ae.strideHeight,fe=ae.strideWidth,me=ae.dilationHeight,ge=ae.dilationWidth,ve=ae.effectiveFilterHeight,ye=ae.effectiveFilterWidth,be=ae.padInfo.top,Ee=ae.padInfo.left,Ce=buffer$1(ee,ne,re);for(let Se=0;Se<ae.batchSize;++Se)for(let Te=0;Te<ae.inChannels;++Te)for(let ke=0;ke<ae.outHeight;++ke){const Ne=ke*he-be;let Fe=Ne;for(;Fe<0;)Fe+=me;const De=Math.min(ae.inHeight,ve+Ne);for(let Oe=0;Oe<ae.outWidth;++Oe){const Re=Oe*fe-Ee;let Be=Re;for(;Be<0;)Be+=ge;const Le=Math.min(ae.inWidth,ye+Re);let je=Number.NEGATIVE_INFINITY,Ge=-1;for(let qe=Fe;qe<De;qe+=me){const Ue=qe-Ne;for(let ze=Be;ze<Le;ze+=ge){const He=ze-Re,Ye=Ce.get(Se,qe,ze,Te);Ye>je&&(je=Ye,ce?Ge=le?((Se*ae.inHeight+qe)*ae.inWidth+ze)*ae.inChannels+Te:(qe*ae.inWidth+ze)*ae.inChannels+Te:Ge=Ue*ye+He)}}ue.set(Ge,Se,ke,Oe,Te)}}return ue}function pool3d(re,ee,ne,ae,ce,le){const ue=ce.strideDepth,he=ce.strideHeight,fe=ce.strideWidth,me=ce.dilationDepth,ge=ce.dilationHeight,ve=ce.dilationWidth,ye=ce.effectiveFilterDepth,be=ce.effectiveFilterHeight,Ee=ce.effectiveFilterWidth,Ce=ce.padInfo.front,Se=ce.padInfo.top,Te=ce.padInfo.left,ke=le==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,Ne=buffer$1(ce.outShape,ne),Fe=Ne.values,De=ce.outShape[1]*ce.outShape[2]*ce.outShape[3]*ce.outShape[4],Oe=ce.outShape[2]*ce.outShape[3]*ce.outShape[4],Re=ce.outShape[3]*ce.outShape[4],Be=ce.outShape[4];for(let Le=0;Le<ce.batchSize;++Le){const je=Le*De,Ge=Le*ae[0];for(let qe=0;qe<ce.inChannels;++qe)for(let Ue=0;Ue<ce.outDepth;++Ue){const ze=Ue*ue-Ce;let He=ze;for(;He<0;)He+=me;const Ye=Math.min(ce.inDepth,ye+ze),Xe=je+Ue*Oe;for(let We=0;We<ce.outHeight;++We){const Ze=We*he-Se;let Vt=Ze;for(;Vt<0;)Vt+=ge;const Qt=Math.min(ce.inHeight,be+Ze),Yt=Xe+We*Re;for(let Jt=0;Jt<ce.outWidth;++Jt){const rn=Jt*fe-Te;let nn=rn;for(;nn<0;)nn+=ve;const fn=Math.min(ce.inWidth,Ee+rn),an=Yt+Jt*Be;let un=ke,bn=0,En=0;for(let On=He;On<Ye;On+=me){const zn=Ge+On*ae[1];for(let Rn=Vt;Rn<Qt;Rn+=ge){const Ut=zn+Rn*ae[2];for(let tn=nn;tn<fn;tn+=ve){const dn=Ut+tn*ae[3],xn=re[dn+qe];if(le==="max"&&xn>un?un=xn:le==="avg"&&(bn+=xn,En++),isNaN(un))break}if(isNaN(un))break}if(isNaN(un))break}const $n=an+qe;Fe[$n]=le==="avg"?bn/En:un}}}}return Ne}function maxPool3dPositions(re,ee){const ne=buffer$1(ee.outShape,"int32"),ae=ee.strideDepth,ce=ee.strideHeight,le=ee.strideWidth,ue=ee.dilationDepth,he=ee.dilationHeight,fe=ee.dilationWidth,me=ee.effectiveFilterDepth,ge=ee.effectiveFilterHeight,ve=ee.effectiveFilterWidth,ye=ee.padInfo.front,be=ee.padInfo.top,Ee=ee.padInfo.left;for(let Ce=0;Ce<ee.batchSize;++Ce)for(let Se=0;Se<ee.inChannels;++Se)for(let Te=0;Te<ee.outDepth;++Te){const ke=Te*ae-ye;let Ne=ke;for(;Ne<0;)Ne+=ue;const Fe=Math.min(ee.inDepth,me+ke);for(let De=0;De<ee.outHeight;++De){const Oe=De*ce-be;let Re=Oe;for(;Re<0;)Re+=he;const Be=Math.min(ee.inHeight,ge+Oe);for(let Le=0;Le<ee.outWidth;++Le){const je=Le*le-Ee;let Ge=je;for(;Ge<0;)Ge+=fe;const qe=Math.min(ee.inWidth,ve+je);let Ue=Number.NEGATIVE_INFINITY,ze=-1;for(let He=Ne;He<Fe;He+=ue){const Ye=He-ke;for(let Xe=Re;Xe<Be;Xe+=he){const We=Xe-Oe;for(let Ze=Ge;Ze<qe;Ze+=fe){const Vt=Ze-je,Qt=re.get(Ce,He,Xe,Ze,Se);Qt>=Ue&&(Ue=Qt,ze=Ye*ge*ve+We*ge+Vt)}}}ne.set(ze,Ce,Te,De,Le,Se)}}}return ne}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee;assertNotComplex$1(ce,"avgPool");const{filterSize:le,strides:ue,pad:he,dimRoundingMode:fe}=ae,me=1;assert$2(eitherStridesOrDilationsAreOne(ue,me),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${ue} and dilations '${me}'`);const ge=computePool2DInfo(ce.shape,le,ue,me,he,fe);let ve;if(ge.filterWidth===1&&ge.filterHeight===1&&arraysEqual(ge.inShape,ge.outShape))ve=identity$4({inputs:{x:ce},backend:ne});else{const ye=ne.data.get(ce.dataId).values,be=computeStrides(ce.shape),Ee=pool$1(ye,ce.shape,ce.dtype,be,ge,"avg");ve=ne.makeTensorInfo(ge.outShape,ce.dtype,Ee.values)}return ve}const avgPoolConfig$1={kernelName:AvgPool,backendName:"cpu",kernelFunc:avgPool$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3D$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{filterSize:le,strides:ue,pad:he,dimRoundingMode:fe,dataFormat:me,dilations:ge}=ae;assertNotComplex$1(ce,"avgPool3d");let ve=ge;ve==null&&(ve=[1,1,1]);const ye=computePool3DInfo(ce.shape,le,ue,ve,he,fe,me),be=ne.data.get(ce.dataId).values,Ee=pool3d(be,ce.shape,ce.dtype,computeStrides(ce.shape),ye,"avg");return ne.makeTensorInfo(Ee.shape,"float32",Ee.values)}const avgPool3DConfig$1={kernelName:AvgPool3D,backendName:"cpu",kernelFunc:avgPool3D$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3DGrad$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{dy:ce,input:le}=ee,{filterSize:ue,strides:he,pad:fe,dilations:me,dimRoundingMode:ge}=ae;assertNotComplex$1([ce,le],"avgPool3DGrad");const ve=computePool3DInfo(le.shape,ue,he,me,fe,ge),ye=ve.strideDepth,be=ve.strideHeight,Ee=ve.strideWidth,Ce=ve.filterDepth,Se=ve.filterHeight,Te=ve.filterWidth,ke=ve.dilationDepth,Ne=ve.dilationHeight,Fe=ve.dilationWidth,De=ve.effectiveFilterDepth,Oe=ve.effectiveFilterHeight,Re=ve.effectiveFilterWidth,Be=De-1-ve.padInfo.front,Le=Re-1-ve.padInfo.left,je=Oe-1-ve.padInfo.top,Ge=buffer$1(le.shape,"float32"),qe=1/(Ce*Se*Te),Ue=ne.bufferSync(ce);for(let ze=0;ze<ve.batchSize;++ze)for(let He=0;He<ve.inChannels;++He)for(let Ye=0;Ye<ve.inDepth;++Ye)for(let Xe=0;Xe<ve.inHeight;++Xe)for(let We=0;We<ve.inWidth;++We){const Ze=Ye-Be,Vt=Xe-je,Qt=We-Le;let Yt=0;for(let Jt=0;Jt<De;Jt+=ke){const rn=(Ze+Jt)/ye;if(!(rn<0||rn>=ve.outDepth||Math.floor(rn)!==rn))for(let nn=0;nn<Oe;nn+=Ne){const fn=(Vt+nn)/be;if(!(fn<0||fn>=ve.outHeight||Math.floor(fn)!==fn))for(let an=0;an<Re;an+=Fe){const un=(Qt+an)/Ee;if(un<0||un>=ve.outWidth||Math.floor(un)!==un)continue;const bn=Ue.get(ze,rn,fn,un,He);Yt+=bn}}}Ge.set(Yt*qe,ze,Ye,Xe,We,He)}return ne.makeTensorInfo(Ge.shape,Ge.dtype,Ge.values)}const avgPool3DGradConfig={kernelName:AvgPool3DGrad,backendName:"cpu",kernelFunc:avgPool3DGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPoolGrad$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{dy:ce,input:le}=ee,ue=le;assertNotComplex$1([ce,le],"avgPoolGrad");const{filterSize:he,strides:fe,pad:me}=ae,ge=computePool2DInfo(ue.shape,he,fe,1,me),ve=ge.strideHeight,ye=ge.strideWidth,be=ge.filterHeight,Ee=ge.filterWidth,Ce=ge.dilationHeight,Se=ge.dilationWidth,Te=ge.effectiveFilterHeight,ke=ge.effectiveFilterWidth,Ne=ke-1-ge.padInfo.left,Fe=Te-1-ge.padInfo.top,De=buffer$1(ue.shape,"float32"),Oe=1/(be*Ee),Re=ne.data.get(ce.dataId).values,Be=buffer$1(ce.shape,"float32",Re);for(let Le=0;Le<ge.batchSize;++Le)for(let je=0;je<ge.inChannels;++je)for(let Ge=0;Ge<ge.inHeight;++Ge)for(let qe=0;qe<ge.inWidth;++qe){const Ue=Ge-Fe,ze=qe-Ne;let He=0;for(let Ye=0;Ye<Te;Ye+=Ce){const Xe=(Ue+Ye)/ve;if(!(Xe<0||Xe>=ge.outHeight||Math.floor(Xe)!==Xe))for(let We=0;We<ke;We+=Se){const Ze=(ze+We)/ye;if(Ze<0||Ze>=ge.outWidth||Math.floor(Ze)!==Ze)continue;const Vt=Be.get(Le,Xe,Ze,je);He+=Vt}}De.set(He*Oe,Le,Ge,qe,je)}return ne.makeTensorInfo(De.shape,De.dtype,De.values)}const avgPoolGradConfig$1={kernelName:AvgPoolGrad,backendName:"cpu",kernelFunc:avgPoolGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchNorm$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,scale:le,offset:ue,mean:he,variance:fe}=ee;assert$2(he.shape.length===fe.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),assert$2(ue==null||he.shape.length===ue.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),assert$2(le==null||he.shape.length===le.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),assertNotComplex$1([ce,he,fe,le,ue],"batchNorm");let{varianceEpsilon:me}=ae;me==null&&(me=.001);const ge=ne.data.get(ce.dataId).values,ve=ne.data.get(he.dataId).values,ye=ne.data.get(fe.dataId).values,be=le?ne.data.get(le.dataId).values:new Float32Array([1]),Ee=ue?ne.data.get(ue.dataId).values:new Float32Array([0]),Ce=new Float32Array(ge.length),Se=Ee.length,Te=be.length,ke=ye.length,Ne=ve.length;let Fe=0,De=0,Oe=0,Re=0;for(let Be=0;Be<ge.length;++Be)Ce[Be]=Ee[Fe++]+(ge[Be]-ve[De++])*be[Oe++]/Math.sqrt(ye[Re++]+me),Fe>=Se&&(Fe=0),De>=Ne&&(De=0),Oe>=Te&&(Oe=0),Re>=ke&&(Re=0);return ne.makeTensorInfo(ce.shape,ce.dtype,Ce)}const batchNormConfig$1={kernelName:FusedBatchNorm,backendName:"cpu",kernelFunc:batchNorm$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchToSpaceND$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{blockShape:le,crops:ue}=ae;assertNotComplex$1([ce],"batchToSpaceND");const he=le.reduce((Te,ke)=>Te*ke),fe=getReshaped(ce.shape,le,he),me=getPermuted(fe.length,le.length),ge=getReshapedPermuted(ce.shape,le,he),ve=getSliceBeginCoords(ue,le.length),ye=getSliceSize(ge,ue,le.length),be=reshape$1({inputs:{x:ce},backend:ne,attrs:{shape:fe}}),Ee=transpose$1({inputs:{x:be},backend:ne,attrs:{perm:me}}),Ce=reshape$1({inputs:{x:Ee},backend:ne,attrs:{shape:ge}}),Se=slice$3({inputs:{x:Ce},backend:ne,attrs:{begin:ve,size:ye}});return ne.disposeIntermediateTensorInfo(be),ne.disposeIntermediateTensorInfo(Ee),ne.disposeIntermediateTensorInfo(Ce),Se}const batchToSpaceNDConfig$1={kernelName:BatchToSpaceND,backendName:"cpu",kernelFunc:batchToSpaceND$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bincount$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,weights:le}=ee,{size:ue}=ae,he=ne.data.get(ce.dataId).values,fe=ne.data.get(le.dataId).values,me=bincountImpl(he,fe,le.dtype,le.shape,ue);return ne.makeTensorInfo([ue],le.dtype,me)}const bincountConfig$1={kernelName:Bincount,backendName:"cpu",kernelFunc:bincount$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const clip=unaryKernelFunc$1(ClipByValue,(re,ee)=>{const ne=ee;return re>ne.clipValueMax?ne.clipValueMax:re<ne.clipValueMin?ne.clipValueMin:re}),clipConfig={kernelName:ClipByValue,backendName:"cpu",kernelFunc:clip};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const complexAbs$1=re=>{const{x:ee}=re.inputs,ne=re.backend,ae=new Float32Array(sizeFromShape(ee.shape)),ce=ne.data.get(ee.dataId),le=ce.complexTensorInfos.real,ue=ce.complexTensorInfos.imag,he=ne.data.get(le.dataId).values,fe=ne.data.get(ue.dataId).values;for(let me=0;me<he.length;me++){const ge=he[me],ve=fe[me];ae[me]=Math.hypot(ge,ve)}return ne.makeOutput(ae,ee.shape,"float32")},complexAbsConfig$1={kernelName:ComplexAbs,backendName:"cpu",kernelFunc:complexAbs$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imag$1(re){const{inputs:ee,backend:ne}=re,{input:ae}=ee,ce=ne.data.get(ae.dataId).complexTensorInfos.imag,le=ne.data.get(ce.dataId).values;return ne.makeTensorInfo(ce.shape,ce.dtype,le)}const imagConfig$1={kernelName:Imag,backendName:"cpu",kernelFunc:imag$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concat$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{axis:ce}=ae,le=parseAxisParam(ce,ee[0].shape)[0];let ue=computeOutShape$1(ee.map(Ce=>Ce.shape),le);if(sizeFromShape(ue)===0)return ne.makeTensorInfo(ue,ee[0].dtype,[]);const he=ee.filter(Ce=>sizeFromShape(Ce.shape)>0);if(he.length===1)return identity$4({inputs:{x:he[0]},backend:ne});const fe=he.map(Ce=>Ce.shape);if(assertParamsConsistent(fe,le),he[0].dtype==="complex64"){const Ce=he.map(Fe=>real$1({inputs:{input:Fe},backend:ne})),Se=he.map(Fe=>imag$1({inputs:{input:Fe},backend:ne})),Te=concat$1({inputs:Ce,backend:ne,attrs:{axis:le}}),ke=concat$1({inputs:Se,backend:ne,attrs:{axis:le}}),Ne=complex$1({inputs:{real:Te,imag:ke},backend:ne});return Ce.forEach(Fe=>ne.disposeIntermediateTensorInfo(Fe)),Se.forEach(Fe=>ne.disposeIntermediateTensorInfo(Fe)),ne.disposeIntermediateTensorInfo(Te),ne.disposeIntermediateTensorInfo(ke),Ne}const me=he.map(Ce=>{const Te=[-1,sizeFromShape(Ce.shape.slice(le))];return reshape$1({inputs:{x:Ce},backend:ne,attrs:{shape:Te}})}),ge=me.map(Ce=>({vals:ne.data.get(Ce.dataId).values,shape:Ce.shape}));ue=computeOutShape$1(me.map(Ce=>Ce.shape),1);const ve=me[0].shape[0]===1,ye=concatImpl$1(ge,ue,ee[0].dtype,ve),be=computeOutShape$1(he.map(Ce=>Ce.shape),le),Ee=ne.makeTensorInfo(be,ee[0].dtype,ye);return me.forEach(Ce=>ne.disposeIntermediateTensorInfo(Ce)),Ee}const concatConfig$1={kernelName:Concat,backendName:"cpu",kernelFunc:concat$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2D(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,filter:le}=ee,{strides:ue,pad:he,dataFormat:fe,dilations:me,dimRoundingMode:ge}=ae;assertNotComplex$1([ce,le],"conv2d");const ve=convertConv2DDataFormat(fe),ye=computeConv2DInfo(ce.shape,le.shape,ue,me,he,ge,!1,ve),be=ye.filterHeight,Ee=ye.filterWidth,Ce=ye.dilationHeight,Se=ye.dilationWidth,Te=ye.padInfo.left,ke=ye.padInfo.top,Ne=ye.dataFormat==="channelsLast",Fe=new TensorBuffer(ye.outShape,ce.dtype),De=computeStrides(ce.shape),Oe=computeStrides(le.shape),Re=De[0],Be=Ne?De[1]:De[2],Le=Ne?De[2]:1,je=Ne?1:De[1],Ge=Fe.strides[0],qe=Ne?Fe.strides[1]:Fe.strides[2],Ue=Ne?Fe.strides[2]:1,ze=Ne?1:Fe.strides[1],He=ne.data.get(ce.dataId).values,Ye=ne.data.get(le.dataId).values,Xe=Fe.values;for(let We=0;We<ye.batchSize;++We){const Ze=We*Re,Vt=We*Ge;for(let Qt=0;Qt<ye.outHeight;++Qt){const Yt=Vt+Qt*qe,Jt=Qt*ye.strideHeight-ke;for(let rn=0;rn<be;++rn){const nn=Jt+rn*Ce;if(nn<0||nn>=ye.inHeight)continue;const fn=rn*Oe[0],an=Ze+nn*Be;for(let un=0;un<ye.outWidth;++un){const bn=Yt+un*Ue,En=un*ye.strideWidth-Te;for(let $n=0;$n<Ee;++$n){const On=En+$n*Se;if(On<0||On>=ye.inWidth)continue;const zn=fn+$n*Oe[1],Rn=an+On*Le;let Ut=zn;for(let tn=0;tn<ye.inChannels;++tn){const dn=He[Rn+tn*je];for(let xn=0;xn<ye.outChannels;++xn)Xe[bn+xn*ze]+=dn*Ye[Ut+xn];Ut+=ye.outChannels}}}}}}return ne.makeTensorInfo(Fe.shape,Fe.dtype,Xe)}const conv2DConfig$1={kernelName:Conv2D$1,backendName:"cpu",kernelFunc:conv2D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropFilter$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,dy:le}=ee,{strides:ue,pad:he,dataFormat:fe,dimRoundingMode:me,filterShape:ge}=ae;assertNotComplex$1([ce,le],"conv2dBackpropFilter");const ve=convertConv2DDataFormat(fe),ye=computeConv2DInfo(ce.shape,ge,ue,1,he,me,!1,ve),{strideHeight:be,strideWidth:Ee,filterHeight:Ce,filterWidth:Se}=ye,Te=ye.dataFormat==="channelsLast",ke=new TensorBuffer(ye.filterShape,"float32"),Ne=ye.padInfo.left,Fe=ye.padInfo.top,De=ne.data.get(ce.dataId).values,Oe=ne.data.get(le.dataId).values,Re=new TensorBuffer(ce.shape,ce.dtype,De),Be=new TensorBuffer(le.shape,le.dtype,Oe);for(let Le=0;Le<Ce;++Le){const je=Math.max(0,Math.ceil((Fe-Le)/be)),Ge=Math.min(ye.outHeight,(ye.inHeight+Fe-Le)/be);for(let qe=0;qe<Se;++qe){const Ue=Math.max(0,Math.ceil((Ne-qe)/Ee)),ze=Math.min(ye.outWidth,(ye.inWidth+Ne-qe)/Ee);for(let He=0;He<ye.inChannels;++He)for(let Ye=0;Ye<ye.outChannels;++Ye){let Xe=0;for(let We=0;We<ye.batchSize;++We)for(let Ze=je;Ze<Ge;++Ze){const Vt=Le+Ze*be-Fe;for(let Qt=Ue;Qt<ze;++Qt){const Yt=qe+Qt*Ee-Ne;Te?Xe+=Re.get(We,Vt,Yt,He)*Be.get(We,Ze,Qt,Ye):Xe+=Re.get(We,He,Vt,Yt)*Be.get(We,Ye,Ze,Qt)}}ke.set(Xe,Le,qe,He,Ye)}}}return ne.makeTensorInfo(ke.shape,ke.dtype,ke.values)}const conv2DBackpropFilterConfig$1={kernelName:Conv2DBackpropFilter,backendName:"cpu",kernelFunc:conv2DBackpropFilter$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropInput$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{dy:ce,filter:le}=ee,{inputShape:ue,strides:he,pad:fe,dataFormat:me,dimRoundingMode:ge}=ae;assertNotComplex$1([ce,le],"conv2dBackpropInput");const ve=computeStrides(le.shape),ye=computeStrides(ce.shape);let be=convertConv2DDataFormat(me);const Ee=computeConv2DInfo(ue,le.shape,he,1,fe,ge,!1,be),Ce=new TensorBuffer(Ee.inShape,"float32"),Se=Ce.values,Te=ne.data.get(ce.dataId).values,ke=ne.data.get(le.dataId).values,[Ne,Fe,De]=ve,{batchSize:Oe,filterHeight:Re,filterWidth:Be,inChannels:Le,inHeight:je,inWidth:Ge,outChannels:qe,outHeight:Ue,outWidth:ze,strideHeight:He,strideWidth:Ye}=Ee;be=Ee.dataFormat;const Xe=Re-1-Ee.padInfo.top,We=Be-1-Ee.padInfo.left,Ze=be==="channelsLast",Vt=Ce.strides[0],Qt=Ze?Ce.strides[1]:Ce.strides[2],Yt=Ze?Ce.strides[2]:1,Jt=Ze?1:Ce.strides[1],rn=ye[0],nn=Ze?ye[1]:ye[2],fn=Ze?ye[2]:1,an=Ze?1:ye[1];for(let un=0;un<Oe;++un)for(let bn=0;bn<Le;++bn)for(let En=0;En<je;++En){const $n=En-Xe,On=Math.max(0,Math.ceil($n/He)),zn=Math.min(Ue,(Re+$n)/He);for(let Rn=0;Rn<Ge;++Rn){const Ut=Rn-We,tn=Math.max(0,Math.ceil(Ut/Ye)),dn=Math.min(ze,(Be+Ut)/Ye);let xn=0;for(let vn=On;vn<zn;++vn){const Nn=vn*He-$n;for(let Gn=tn;Gn<dn;++Gn){const Wn=Gn*Ye-Ut,Vn=rn*un+nn*vn+fn*Gn,Hn=Ne*(Re-1-Nn)+Fe*(Be-1-Wn)+De*bn;for(let hs=0;hs<qe;++hs){const Pn=Te[Vn+an*hs],Jn=ke[Hn+hs];xn+=Pn*Jn}}}const An=Vt*un+Qt*En+Yt*Rn+Jt*bn;Se[An]=xn}}return ne.makeTensorInfo(Ce.shape,Ce.dtype,Ce.values)}const conv2DBackpropInputConfig$1={kernelName:Conv2DBackpropInput,backendName:"cpu",kernelFunc:conv2DBackpropInput$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3D$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,filter:le}=ee,{strides:ue,pad:he,dilations:fe}=ae;assertNotComplex$1([ce,le],"conv3d");const me=computeConv3DInfo(ce.shape,le.shape,ue,fe,he),{filterDepth:ge,filterHeight:ve,filterWidth:ye,dilationDepth:be,dilationHeight:Ee,dilationWidth:Ce,padInfo:Se}=me,Te=Se.front,ke=Se.left,Ne=Se.top,Fe=new TensorBuffer(me.outShape,ce.dtype),De=ne.data.get(ce.dataId).values,Oe=ne.data.get(le.dataId).values,Re=Fe.values,Be=computeStrides(ce.shape),Le=computeStrides(le.shape);for(let je=0;je<me.batchSize;++je){const Ge=je*Be[0],qe=je*Fe.strides[0];for(let Ue=0;Ue<me.outDepth;++Ue){const ze=qe+Ue*Fe.strides[1],He=Ue*me.strideDepth-Te;for(let Ye=0;Ye<ge;++Ye){const Xe=He+Ye*be;if(Xe<0||Xe>=me.inDepth)continue;const We=Ye*Le[0],Ze=Ge+Xe*Be[1];for(let Vt=0;Vt<me.outHeight;++Vt){const Qt=ze+Vt*Fe.strides[2],Yt=Vt*me.strideHeight-Ne;for(let Jt=0;Jt<ve;++Jt){const rn=Yt+Jt*Ee;if(rn<0||rn>=me.inHeight)continue;const nn=We+Jt*Le[1],fn=Ze+rn*Be[2];for(let an=0;an<me.outWidth;++an){const un=Qt+an*me.outChannels,bn=an*me.strideWidth-ke;for(let En=0;En<ye;++En){const $n=bn+En*Ce;if($n<0||$n>=me.inWidth)continue;const On=nn+En*Le[2],zn=fn+$n*me.inChannels;let Rn=On;for(let Ut=0;Ut<me.inChannels;++Ut){const tn=De[zn+Ut];for(let dn=0;dn<me.outChannels;++dn)Re[un+dn]+=tn*Oe[Rn+dn];Rn+=me.outChannels}}}}}}}}return ne.makeTensorInfo(Fe.shape,Fe.dtype,Fe.values)}const conv3DConfig$1={kernelName:Conv3D$1,backendName:"cpu",kernelFunc:conv3D$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropFilterV2$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,dy:le}=ee,{strides:ue,pad:he,filterShape:fe}=ae;assertNotComplex$1([ce,le],"conv3dBackpropFilterV2");const me=computeStrides(ce.shape),ge=computeStrides(le.shape),ve=computeConv3DInfo(ce.shape,fe,ue,1,he),ye=ve.strideDepth,be=ve.strideHeight,Ee=ve.strideWidth,Ce=ve.filterDepth,Se=ve.filterHeight,Te=ve.filterWidth,ke=new TensorBuffer(ve.filterShape,"float32"),Ne=ke.values,[Fe,De,Oe,Re]=ke.strides,Be=ne.data.get(le.dataId).values,[Le,je,Ge,qe]=ge,Ue=ne.data.get(ce.dataId).values,[ze,He,Ye,Xe]=me,We=ve.padInfo.front,Ze=ve.padInfo.left,Vt=ve.padInfo.top;for(let Qt=0;Qt<Ce;++Qt){const Yt=Math.max(0,Math.ceil((We-Qt)/ye)),Jt=Math.min(ve.outDepth,(ve.inDepth+We-Qt)/ye),rn=Qt*Fe;for(let nn=0;nn<Se;++nn){const fn=Math.max(0,Math.ceil((Vt-nn)/be)),an=Math.min(ve.outHeight,(ve.inHeight+Vt-nn)/be),un=nn*De+rn;for(let bn=0;bn<Te;++bn){const En=Math.max(0,Math.ceil((Ze-bn)/Ee)),$n=Math.min(ve.outWidth,(ve.inWidth+Ze-bn)/Ee),On=bn*Oe+un;for(let zn=0;zn<ve.inChannels;++zn){const Rn=zn*Re+On;for(let Ut=0;Ut<ve.outChannels;++Ut){let tn=0;for(let dn=0;dn<ve.batchSize;++dn){const xn=dn*ze,An=dn*Le;for(let vn=Yt;vn<Jt;++vn){const Gn=(Qt+vn*ye-We)*He+xn,Wn=vn*je+An;for(let Vn=fn;Vn<an;++Vn){const hs=(nn+Vn*be-Vt)*Ye+Gn,Pn=Vn*Ge+Wn;for(let Jn=En;Jn<$n;++Jn){const cn=(bn+Jn*Ee-Ze)*Xe+hs,Fn=Jn*qe+Pn;tn+=Ue[cn+zn]*Be[Fn+Ut]}}}}Ne[Rn+Ut]=tn}}}}}return ne.makeTensorInfo(ke.shape,ke.dtype,ke.values)}const conv3DBackpropFilterV2Config$1={kernelName:Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:conv3DBackpropFilterV2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropInputV2(re){const{inputs:ee,backend:ne,attrs:ae}=re,{dy:ce,filter:le}=ee,{pad:ue,strides:he,inputShape:fe}=ae;assertNotComplex$1([ce],"conv3dBackpropInputV2");const me=computeStrides(ce.shape),ge=computeStrides(le.shape),ve=computeConv3DInfo(fe,le.shape,he,1,ue),ye=new TensorBuffer(ve.inShape,"float32"),be=ye.values,[Ee,Ce,Se,Te]=ye.strides,ke=ne.data.get(ce.dataId).values,[Ne,Fe,De,Oe]=me,Re=ne.data.get(le.dataId).values,[Be,Le,je,Ge]=ge,{batchSize:qe,filterDepth:Ue,filterHeight:ze,filterWidth:He,inChannels:Ye,inDepth:Xe,inHeight:We,inWidth:Ze,outChannels:Vt,outDepth:Qt,outHeight:Yt,outWidth:Jt,strideDepth:rn,strideHeight:nn,strideWidth:fn}=ve,an=Ue-1-ve.padInfo.front,un=ze-1-ve.padInfo.top,bn=He-1-ve.padInfo.left;for(let En=0;En<qe;++En)for(let $n=0;$n<Ye;++$n)for(let On=0;On<Xe;++On){const zn=On-an,Rn=Math.max(0,Math.ceil(zn/rn)),Ut=Math.min(Qt,(Ue+zn)/rn);for(let tn=0;tn<We;++tn){const dn=tn-un,xn=Math.max(0,Math.ceil(dn/nn)),An=Math.min(Yt,(ze+dn)/nn);for(let vn=0;vn<Ze;++vn){const Nn=vn-bn,Gn=Math.max(0,Math.ceil(Nn/fn)),Wn=Math.min(Jt,(He+Nn)/fn);let Vn=0;for(let Hn=Rn;Hn<Ut;++Hn){const hs=Hn*rn-zn;for(let Pn=xn;Pn<An;++Pn){const Jn=Pn*nn-dn;for(let gn=Gn;gn<Wn;++gn){const cn=gn*fn-Nn,Fn=Ne*En+Fe*Hn+De*Pn+Oe*gn,In=Be*(Ue-1-hs)+Le*(ze-1-Jn)+je*(He-1-cn)+Ge*$n;for(let cs=0;cs<Vt;++cs){const Ss=ke[Fn+cs],os=Re[In+cs];Vn+=Ss*os}}}}be[Ee*En+Ce*On+Se*tn+Te*vn+$n]=Vn}}}return ne.makeTensorInfo(ye.shape,ye.dtype,ye.values)}const conv3DBackpropInputV2Config={kernelName:Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:conv3DBackpropInputV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cos$1=unaryKernelFunc$1(Cos,re=>Math.cos(re)),cosConfig$1={kernelName:Cos,backendName:"cpu",kernelFunc:cos$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cosh$1=unaryKernelFunc$1(Cosh,re=>Math.cosh(re)),coshConfig$1={kernelName:Cosh,backendName:"cpu",kernelFunc:cosh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cropAndResize$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{image:ce,boxes:le,boxInd:ue}=ee,{cropSize:he,method:fe,extrapolationValue:me}=ae,[ge,ve,ye,be]=ce.shape,Ee=le.shape[0],[Ce,Se]=he,Te=buffer$1([Ee,Ce,Se,be],"float32"),ke=ne.data.get(le.dataId).values,Ne=ne.data.get(ue.dataId).values,Fe=ne.data.get(ce.dataId).values,De=computeStrides(ce.shape),Oe=computeStrides(Te.shape);for(let Re=0;Re<Ee;Re++){const Be=Re*4,Le=ke[Be],je=ke[Be+1],Ge=ke[Be+2],qe=ke[Be+3],Ue=Ne[Re];if(Ue>=ge)continue;const ze=Ce>1?(Ge-Le)*(ve-1)/(Ce-1):0,He=Se>1?(qe-je)*(ye-1)/(Se-1):0;for(let Ye=0;Ye<Ce;Ye++){const Xe=Ce>1?Le*(ve-1)+Ye*ze:.5*(Le+Ge)*(ve-1);if(Xe<0||Xe>ve-1){for(let We=0;We<Se;We++)for(let Ze=0;Ze<be;Ze++){const Vt=Ze+We*Oe[2]+Ye*Oe[1]+Re*Oe[0];Te.values[Vt]=me}continue}if(fe==="bilinear"){const We=Math.floor(Xe),Ze=Math.ceil(Xe),Vt=Xe-We;for(let Qt=0;Qt<Se;Qt++){const Yt=Se>1?je*(ye-1)+Qt*He:.5*(je+qe)*(ye-1);if(Yt<0||Yt>ye-1){for(let fn=0;fn<be;fn++){const an=fn+Qt*Oe[2]+Ye*Oe[1]+Re*Oe[0];Te.values[an]=me}continue}const Jt=Math.floor(Yt),rn=Math.ceil(Yt),nn=Yt-Jt;for(let fn=0;fn<be;fn++){let an=fn+Jt*De[2]+We*De[1]+Ue*De[0];const un=Fe[an];an=fn+rn*De[2]+We*De[1]+Ue*De[0];const bn=Fe[an];an=fn+Jt*De[2]+Ze*De[1]+Ue*De[0];const En=Fe[an];an=fn+rn*De[2]+Ze*De[1]+Ue*De[0];const $n=Fe[an],On=un+(bn-un)*nn,zn=En+($n-En)*nn;an=fn+Qt*Oe[2]+Ye*Oe[1]+Re*Oe[0],Te.values[an]=On+(zn-On)*Vt}}}else for(let We=0;We<Se;++We){const Ze=Se>1?je*(ye-1)+We*He:.5*(je+qe)*(ye-1);if(Ze<0||Ze>ye-1){for(let Yt=0;Yt<be;Yt++){const Jt=Yt+We*Oe[2]+Ye*Oe[1]+Re*Oe[0];Te.values[Jt]=me}continue}const Vt=Math.round(Ze),Qt=Math.round(Xe);for(let Yt=0;Yt<be;Yt++){const Jt=Yt+Vt*De[2]+Qt*De[1]+Ue*De[0],rn=Yt+We*Oe[2]+Ye*Oe[1]+Re*Oe[0];Te.values[rn]=Fe[Jt]}}}}return ne.makeTensorInfo(Te.shape,Te.dtype,Te.values)}const cropAndResizeConfig$1={kernelName:CropAndResize,backendName:"cpu",kernelFunc:cropAndResize$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumsum$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le,exclusive:ue,reverse:he}=ae;assertNotComplex$1(ce,"cumsum");const fe=getAxesPermutation([le],ce.shape.length);let me=ce;fe!=null&&(me=transpose$1({inputs:{x:ce},backend:ne,attrs:{perm:fe}}));const ge=getInnerMostAxes(1,ce.shape.length)[0];if(ge!==me.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${me.shape.length-1} but got axis=${ge}`);const ve=upcastType(me.dtype,"int32"),ye=makeZerosTypedArray(sizeFromShape(me.shape),ve),be=ne.data.get(me.dataId).values,Ee=me.shape[me.shape.length-1],Ce=he?(Te,ke)=>Te+Ee-ke-1:(Te,ke)=>Te+ke;for(let Te=0;Te<be.length;Te+=Ee)for(let ke=0;ke<Ee;ke++){const Ne=Ce(Te,ke);if(ke===0)ye[Ne]=ue?0:be[Ne];else{const Fe=Ce(Te,ke-1);ye[Ne]=ue?be[Fe]+ye[Fe]:be[Ne]+ye[Fe]}}const Se=ne.makeTensorInfo(me.shape,ve,ye);if(fe!=null){const Te=getUndoAxesPermutation(fe),ke=transpose$1({inputs:{x:Se},backend:ne,attrs:{perm:Te}});return ne.disposeIntermediateTensorInfo(Se),ne.disposeIntermediateTensorInfo(me),ke}return Se}const cumsumConfig$1={kernelName:Cumsum,backendName:"cpu",kernelFunc:cumsum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function denseBincount$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,weights:le}=ee,{size:ue,binaryOutput:he}=ae;if(ce.shape.length===1){const fe=ne.data.get(ce.dataId).values,me=ne.data.get(le.dataId).values,ge=bincountImpl(fe,me,le.dtype,le.shape,ue);return ne.makeTensorInfo([ue],le.dtype,ge)}else if(ce.shape.length===2){const fe=ne.bufferSync(ce),me=ne.bufferSync(le),ge=bincountReduceImpl(fe,me,ue,he);return ne.makeTensorInfo(ge.shape,le.dtype,ge.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${ce.shape.length}.`)}const denseBincountConfig$1={kernelName:DenseBincount,backendName:"cpu",kernelFunc:denseBincount$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthToSpace$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{blockSize:le,dataFormat:ue}=ae;assert$2(ue==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${ue}`),assert$2(le>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${le}`);const he=ce.shape[0],fe=ce.shape[1],me=ce.shape[2],ge=ce.shape[3],ve=fe*le,ye=me*le,be=ge/(le*le),Ee=ne.data.get(ce.dataId).values,Ce=new Float32Array(he*ve*ye*be);let Se=0;for(let Te=0;Te<he;++Te)for(let ke=0;ke<ve;++ke){const Ne=Math.floor(ke/le),Fe=ke%le;for(let De=0;De<ye;++De){const Oe=Math.floor(De/le),Re=De%le,Be=(Fe*le+Re)*be;for(let Le=0;Le<be;++Le){const Ge=Le+Be+ge*(Oe+me*(Ne+fe*Te));Ce[Se++]=Ee[Ge]}}}return ne.makeTensorInfo([he,ve,ye,be],ce.dtype,Ce)}const depthToSpaceConfig$1={kernelName:DepthToSpace,backendName:"cpu",kernelFunc:depthToSpace$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNative$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,filter:le}=ee,{strides:ue,pad:he,dilations:fe,dimRoundingMode:me}=ae;assertNotComplex$1([ce,le],"depthwiseConv2DNative");const ge=computeStrides(ce.shape),ve=computeStrides(le.shape);let ye=fe;ye==null&&(ye=[1,1]),assert$2(eitherStridesOrDilationsAreOne(ue,ye),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${ue} and dilations '${ye}'`);const be=computeConv2DInfo(ce.shape,le.shape,ue,ye,he,me,!0),{filterHeight:Ee,filterWidth:Ce,dilationHeight:Se,dilationWidth:Te,padInfo:ke}=be,Ne=ke.left,Fe=ke.top,De=be.outChannels/be.inChannels,Oe=new TensorBuffer(be.outShape,ce.dtype),Re=ne.data.get(ce.dataId).values,Be=ne.data.get(le.dataId).values,Le=Oe.values;for(let je=0;je<be.batchSize;++je){const Ge=je*ge[0],qe=je*Oe.strides[0];for(let Ue=0;Ue<be.outHeight;++Ue){const ze=qe+Ue*Oe.strides[1],He=Ue*be.strideHeight-Ne;for(let Ye=0;Ye<Ee;++Ye){const Xe=He+Ye*Se;if(Xe<0||Xe>=be.inHeight)continue;const We=Ye*ve[0],Ze=Ge+Xe*ge[1];for(let Vt=0;Vt<be.outWidth;++Vt){const Qt=ze+Vt*Oe.strides[2],Yt=Vt*be.strideWidth-Fe;for(let Jt=0;Jt<Ce;++Jt){const rn=Yt+Jt*Te;if(rn<0||rn>=be.inWidth)continue;const nn=We+Jt*ve[1],fn=Ze+rn*be.inChannels;let an=Qt,un=nn;for(let bn=0;bn<be.inChannels;++bn){const En=Re[fn+bn];for(let $n=0;$n<De;++$n)Le[an+$n]+=En*Be[un+$n];an+=De,un+=De}}}}}}return ne.makeTensorInfo(Oe.shape,Oe.dtype,Oe.values)}const depthwiseConv2dNativeConfig$1={kernelName:DepthwiseConv2dNative,backendName:"cpu",kernelFunc:depthwiseConv2dNative$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropFilter$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,dy:le}=ee,{strides:ue,dilations:he,pad:fe,dimRoundingMode:me,filterShape:ge}=ae;assertNotComplex$1([ce,le],"depthwiseConv2dNativeBackpropFilter");const ve=computeConv2DInfo(ce.shape,ge,ue,he,fe,me,!0),{strideHeight:ye,strideWidth:be,filterHeight:Ee,filterWidth:Ce}=ve,Se=new TensorBuffer(ve.filterShape,"float32"),Te=ve.padInfo.left,ke=ve.padInfo.top,Ne=ve.outChannels/ve.inChannels,Fe=ne.data.get(ce.dataId).values,De=new TensorBuffer(ce.shape,ce.dtype,Fe),Oe=ne.data.get(le.dataId).values,Re=new TensorBuffer(le.shape,le.dtype,Oe);for(let Be=0;Be<Ee;++Be){const Le=Math.max(0,Math.ceil((ke-Be)/ye)),je=Math.min(ve.outHeight,(ve.inHeight+ke-Be)/ye);for(let Ge=0;Ge<Ce;++Ge){const qe=Math.max(0,Math.ceil((Te-Ge)/be)),Ue=Math.min(ve.outWidth,(ve.inWidth+Te-Ge)/be);for(let ze=0;ze<ve.outChannels;++ze){const He=Math.trunc(ze/Ne),Ye=ze%Ne;let Xe=0;for(let We=0;We<ve.batchSize;++We)for(let Ze=Le;Ze<je;++Ze){const Vt=Be+Ze*ye-ke;for(let Qt=qe;Qt<Ue;++Qt){const Yt=Ge+Qt*be-Te;Xe+=De.get(We,Vt,Yt,He)*Re.get(We,Ze,Qt,ze)}}Se.set(Xe,Be,Ge,He,Ye)}}}return ne.makeTensorInfo(Se.shape,Se.dtype,Se.values)}const depthwiseConv2dNativeBackpropFilterConfig$1={kernelName:DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:depthwiseConv2dNativeBackpropFilter$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropInput$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{dy:ce,filter:le}=ee,{strides:ue,dilations:he,pad:fe,dimRoundingMode:me,inputShape:ge}=ae;assertNotComplex$1([ce,le],"depthwiseConv2DNativeBackpropInput");const ve=computeStrides(ce.shape),ye=computeStrides(le.shape),be=computeConv2DInfo(ge,le.shape,ue,he,fe,me,!0),Ee=new TensorBuffer(be.inShape,"float32"),Ce=Ee.values,[Se,Te,ke]=Ee.strides,Ne=ne.data.get(ce.dataId).values,[Fe,De,Oe]=ve,Re=ne.data.get(le.dataId).values,[Be,Le,je]=ye,{batchSize:Ge,filterHeight:qe,filterWidth:Ue,inChannels:ze,inHeight:He,inWidth:Ye,outChannels:Xe,outHeight:We,outWidth:Ze,strideHeight:Vt,strideWidth:Qt}=be,Yt=qe-1-be.padInfo.top,Jt=Ue-1-be.padInfo.left,rn=Xe/ze;for(let nn=0;nn<Ge;++nn)for(let fn=0;fn<ze;++fn)for(let an=0;an<He;++an){const un=an-Yt,bn=Math.max(0,Math.ceil(un/Vt)),En=Math.min(We,(qe+un)/Vt);for(let $n=0;$n<Ye;++$n){const On=$n-Jt,zn=Math.max(0,Math.ceil(On/Qt)),Rn=Math.min(Ze,(Ue+On)/Qt);let Ut=0;for(let tn=bn;tn<En;++tn){const dn=tn*Vt-un;for(let xn=zn;xn<Rn;++xn){const An=xn*Qt-On,vn=Fe*nn+De*tn+Oe*xn,Nn=Be*(qe-1-dn)+Le*(Ue-1-An)+je*fn;for(let Gn=0;Gn<rn;++Gn){const Wn=fn*rn+Gn,Vn=Ne[vn+Wn],Hn=Re[Nn+Gn];Ut+=Vn*Hn}}}Ce[Se*nn+Te*an+ke*$n+fn]=Ut}}return ne.makeTensorInfo(Ee.shape,Ee.dtype,Ee.values)}const depthwiseConv2dNativeBackpropInputConfig$1={kernelName:DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:depthwiseConv2dNativeBackpropInput$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function diag$1(re){const{inputs:ee,backend:ne}=re,{x:ae}=ee,ce=sizeFromShape(ae.shape),le=ne.data.get(ae.dataId).values,ue=buffer$1([ce,ce],ae.dtype),he=ue.values;for(let me=0;me<le.length;me++)he[me*ce+me]=le[me];const fe=[...ae.shape,...ae.shape];return ne.makeTensorInfo(fe,ue.dtype,ue.values)}const diagConfig$1={kernelName:Diag,backendName:"cpu",kernelFunc:diag$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2dConfig={kernelName:Dilation2D,backendName:"cpu",kernelFunc:({inputs:re,backend:ee,attrs:ne})=>{const{x:ae,filter:ce}=re,{strides:le,pad:ue,dilations:he}=ne,fe=ee,me=fe.data.get(ae.dataId).values,ge=ae.shape.length,ve=fe.data.get(ce.dataId).values,ye=ce.shape.length,{batchSize:be,inHeight:Ee,inWidth:Ce,inChannels:Se,outHeight:Te,outWidth:ke,padInfo:Ne,strideHeight:Fe,strideWidth:De,filterHeight:Oe,filterWidth:Re,dilationHeight:Be,dilationWidth:Le,outShape:je}=computeDilation2DInfo(ae.shape,ce.shape,le,ue,"NHWC",he),Ge=sizeFromShape(je),qe=je.length,Ue=getArrayFromDType(ae.dtype,Ge);for(let He=0;He<be;++He)for(let Ye=0;Ye<Te;++Ye){const Xe=Ye*Fe-Ne.top;for(let We=0;We<ke;++We){const Ze=We*De-Ne.left;for(let Vt=0;Vt<Se;++Vt){let Qt=Number.MIN_SAFE_INTEGER;for(let Jt=0;Jt<Oe;++Jt){const rn=Xe+Jt*Be;if(rn>=0&&rn<Ee)for(let nn=0;nn<Re;++nn){const fn=Ze+nn*Le;if(fn>=0&&fn<Ce){const an=locToIndex([He,rn,fn,Vt],ge,computeStrides(ae.shape)),un=locToIndex([Jt,nn,Vt],ye,computeStrides(ce.shape)),bn=me[an]+ve[un];bn>Qt&&(Qt=bn)}}}const Yt=locToIndex([He,Ye,We,Vt],qe,computeStrides(je));Ue[Yt]=Qt}}}return{dataId:fe.write(toTypedArray(Ue,ae.dtype),je,ae.dtype),shape:je,dtype:ae.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2dBackpropFilterConfig={kernelName:Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:({inputs:re,backend:ee,attrs:ne})=>{const{x:ae,filter:ce,dy:le}=re,{strides:ue,pad:he,dilations:fe}=ne,me=ee,ge=toNestedArray(ae.shape,me.data.get(ae.dataId).values),ve=toNestedArray(ce.shape,me.data.get(ce.dataId).values),{batchSize:ye,inHeight:be,inWidth:Ee,inChannels:Ce,outHeight:Se,outWidth:Te,padInfo:ke,strideHeight:Ne,strideWidth:Fe,filterHeight:De,filterWidth:Oe,dilationHeight:Re,dilationWidth:Be,outShape:Le}=computeDilation2DInfo(ae.shape,ce.shape,ue,he,"NHWC",fe);assert$2(le.rank===Le.length,()=>`Error in ${Dilation2DBackpropFilter}, dy must have the same rank as output ${Le.length}, but got ${le.rank}`);const je=toNestedArray(Le,me.data.get(le.dataId).values),Ge=makeZerosNestedTypedArray(ce.shape,ce.dtype);for(let Ue=0;Ue<ye;++Ue)for(let ze=0;ze<Se;++ze){const He=ze*Ne-ke.top;for(let Ye=0;Ye<Te;++Ye){const Xe=Ye*Fe-ke.left;for(let We=0;We<Ce;++We){let Ze=Number.MIN_SAFE_INTEGER,Vt=0,Qt=0;for(let Yt=0;Yt<De;++Yt){const Jt=He+Yt*Re;if(Jt>=0&&Jt<be)for(let rn=0;rn<Oe;++rn){const nn=Xe+rn*Be;if(nn>=0&&nn<Ee){const fn=ge[Ue][Jt][nn][We]+ve[Yt][rn][We];fn>Ze&&(Ze=fn,Vt=Yt,Qt=rn)}}}Ge[Vt][Qt][We]+=je[Ue][ze][Ye][We]}}}return{dataId:me.write(toTypedArray(Ge,ae.dtype),ce.shape,ce.dtype),shape:ce.shape,dtype:ce.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2dBackpropInputConfig={kernelName:Dilation2DBackpropInput,backendName:"cpu",kernelFunc:({inputs:re,backend:ee,attrs:ne})=>{const{x:ae,filter:ce,dy:le}=re,{strides:ue,pad:he,dilations:fe}=ne,me=ee,ge=toNestedArray(ae.shape,me.data.get(ae.dataId).values),ve=toNestedArray(ce.shape,me.data.get(ce.dataId).values),{batchSize:ye,inHeight:be,inWidth:Ee,inChannels:Ce,outHeight:Se,outWidth:Te,padInfo:ke,strideHeight:Ne,strideWidth:Fe,filterHeight:De,filterWidth:Oe,dilationHeight:Re,dilationWidth:Be,outShape:Le}=computeDilation2DInfo(ae.shape,ce.shape,ue,he,"NHWC",fe);assert$2(le.rank===Le.length,()=>`Error in ${Dilation2DBackpropInput}, dy must have the same rank as output ${Le.length}, but got ${le.rank}`);const je=toNestedArray(Le,me.data.get(le.dataId).values),Ge=makeZerosNestedTypedArray(ae.shape,ae.dtype);for(let Ue=0;Ue<ye;++Ue)for(let ze=0;ze<Se;++ze){const He=ze*Ne-ke.top;for(let Ye=0;Ye<Te;++Ye){const Xe=Ye*Fe-ke.left;for(let We=0;We<Ce;++We){let Ze=Number.MIN_SAFE_INTEGER,Vt=He<0?0:He,Qt=Xe<0?0:Xe;for(let Yt=0;Yt<De;++Yt){const Jt=He+Yt*Re;if(Jt>=0&&Jt<be)for(let rn=0;rn<Oe;++rn){const nn=Xe+rn*Be;if(nn>=0&&nn<Ee){const fn=ge[Ue][Jt][nn][We]+ve[Yt][rn][We];fn>Ze&&(Ze=fn,Vt=Jt,Qt=nn)}}}Ge[Ue][Vt][Qt][We]+=je[Ue][ze][Ye][We]}}}return{dataId:me.write(toTypedArray(Ge,ae.dtype),ae.shape,ae.dtype),shape:ae.shape,dtype:ae.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eluGrad$1(re){const{inputs:ee,backend:ne}=re,{dy:ae,y:ce}=ee;assertNotComplex$1([ae,ce],"eluGrad");const le=new Float32Array(sizeFromShape(ce.shape)),ue=ne.data.get(ce.dataId).values,he=ne.data.get(ae.dataId).values;for(let fe=0;fe<ue.length;++fe){const me=ue[fe];me>=1?le[fe]=he[fe]:le[fe]=he[fe]*(me+1)}return ne.makeTensorInfo(ce.shape,"float32",le)}const eluGradConfig$1={kernelName:EluGrad,backendName:"cpu",kernelFunc:eluGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const equalImpl=createSimpleBinaryKernelImpl((re,ee)=>re===ee?1:0),equal$1=binaryKernelFunc$1(Equal,equalImpl,null,"bool"),equalConfig$1={kernelName:Equal,backendName:"cpu",kernelFunc:equal$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p$1=ERF_P,a1=ERF_A1,a2=ERF_A2,a3=ERF_A3,a4=ERF_A4,a5=ERF_A5,erf$1=unaryKernelFunc$1(Erf,re=>{const ee=Math.sign(re),ne=Math.abs(re),ae=1/(1+p$1*ne);return ee*(1-((((a5*ae+a4)*ae+a3)*ae+a2)*ae+a1)*ae*Math.exp(-ne*ne))}),erfConfig$1={kernelName:Erf,backendName:"cpu",kernelFunc:erf$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expandDims$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{input:ce}=ee,{dim:le}=ae,ue=ce.shape.length,he=ce.shape.slice();let fe=le;return le<0&&(assert$2(-(ue+1)<=le,()=>`Axis must be in the interval [${-(ue+1)}, ${ue}]`),fe=ue+le+1),he.splice(fe,0,1),reshape$1({inputs:{x:ce},backend:ne,attrs:{shape:he}})}const expandDimsConfig$1={kernelName:ExpandDims,backendName:"cpu",kernelFunc:expandDims$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const realDivImpl=createSimpleBinaryKernelImpl((re,ee)=>re/ee),div=binaryKernelFunc$1(RealDiv,realDivImpl),realDivConfig$1={kernelName:RealDiv,backendName:"cpu",kernelFunc:div};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fftBatch(re,ee,ne){const ae=re.shape,ce=ae[0],le=ae[1],ue=ne.data.get(re.dataId),he=ue.complexTensorInfos.real,fe=ue.complexTensorInfos.imag,me=[ce,le],ge=sizeFromShape(me),ve=getTypedArrayFromDType("float32",ge),ye=getTypedArrayFromDType("float32",ge);for(let Se=0;Se<ce;Se++){const Te=slice$3({inputs:{x:he},backend:ne,attrs:{begin:[Se,0],size:[1,le]}}),ke=slice$3({inputs:{x:fe},backend:ne,attrs:{begin:[Se,0],size:[1,le]}}),Ne=complex$1({inputs:{real:Te,imag:ke},backend:ne}),{real:Fe,imag:De}=fftImpl$1(Ne,ee,ne),Oe=mergeRealAndImagArrays(Fe,De);for(let Re=0;Re<le;Re++){const Be=getComplexWithIndex(Oe,Re);ve[Se*le+Re]=Be.real,ye[Se*le+Re]=Be.imag}ne.disposeIntermediateTensorInfo(Te),ne.disposeIntermediateTensorInfo(ke),ne.disposeIntermediateTensorInfo(Ne)}const be=ne.makeTensorInfo(me,"float32",ve),Ee=ne.makeTensorInfo(me,"float32",ye),Ce=complex$1({inputs:{real:be,imag:Ee},backend:ne});return ne.disposeIntermediateTensorInfo(be),ne.disposeIntermediateTensorInfo(Ee),Ce}function fftImpl$1(re,ee,ne){const ae=sizeFromShape(re.shape),ce=ne.data.get(re.dataId),le=ne.data.get(ce.complexTensorInfos.real.dataId).values,ue=ne.data.get(ce.complexTensorInfos.imag.dataId).values;if(isExponentOf2(ae)){const he=fftRadix2$1(le,ue,ae,ee,ne),fe=[re.shape[0],re.shape[1]];if(ee){const me=ne.makeTensorInfo(fe,"float32",he.real),ge=ne.makeTensorInfo(fe,"float32",he.imag),ve=ne.makeTensorInfo([],"float32",createScalarValue(ae,"float32")),ye=identity$4({inputs:{x:ve},backend:ne}),be=realDivConfig$1.kernelFunc({inputs:{a:me,b:ve},backend:ne}),Ee=realDivConfig$1.kernelFunc({inputs:{a:ge,b:ye},backend:ne}),Ce=ne.data.get(be.dataId).values,Se=ne.data.get(Ee.dataId).values;return ne.disposeIntermediateTensorInfo(me),ne.disposeIntermediateTensorInfo(ge),ne.disposeIntermediateTensorInfo(ve),ne.disposeIntermediateTensorInfo(ye),ne.disposeIntermediateTensorInfo(be),ne.disposeIntermediateTensorInfo(Ee),{real:Ce,imag:Se}}return he}else{const he=mergeRealAndImagArrays(le,ue),fe=fourierTransformByMatmul(he,ae,ee);return splitRealAndImagArrays(fe)}}function isExponentOf2(re){return(re&re-1)===0}function fftRadix2$1(re,ee,ne,ae,ce){if(ne===1)return{real:re,imag:ee};const le=mergeRealAndImagArrays(re,ee),ue=ne/2,he=complexWithEvenIndex(le),fe=he.real,me=he.imag,ge=[fe.length],ve=ce.makeTensorInfo(ge,"float32",fe),ye=ce.makeTensorInfo(ge,"float32",me),be=complex$1({inputs:{real:ve,imag:ye},backend:ce}),Ee=complexWithOddIndex(le),Ce=Ee.real,Se=Ee.imag,Te=[Ce.length],ke=ce.makeTensorInfo(Te,"float32",Ce),Ne=ce.makeTensorInfo(Te,"float32",Se),Fe=complex$1({inputs:{real:ke,imag:Ne},backend:ce}),De=fftRadix2$1(fe,me,ue,ae,ce),Oe=De.real,Re=De.imag,Be=[Oe.length],Le=ce.makeTensorInfo(Be,"float32",Oe),je=ce.makeTensorInfo(Be,"float32",Re),Ge=complex$1({inputs:{real:Le,imag:je},backend:ce}),qe=fftRadix2$1(Ce,Se,ue,ae,ce),Ue=qe.real,ze=qe.imag,He=[Ue.length],Ye=ce.makeTensorInfo(He,"float32",Ue),Xe=ce.makeTensorInfo(He,"float32",ze),We=complex$1({inputs:{real:Ye,imag:Xe},backend:ce}),Ze=exponents(ne,ae),Vt=[Ze.real.length],Qt=ce.makeTensorInfo(Vt,"float32",Ze.real),Yt=ce.makeTensorInfo(Vt,"float32",Ze.imag),Jt=complex$1({inputs:{real:Qt,imag:Yt},backend:ce}),rn=multiply$2({inputs:{a:Jt,b:We},backend:ce}),nn=add({inputs:{a:Ge,b:rn},backend:ce}),fn=sub$1({inputs:{a:Ge,b:rn},backend:ce}),an=real$1({inputs:{input:nn},backend:ce}),un=real$1({inputs:{input:fn},backend:ce}),bn=imag$1({inputs:{input:nn},backend:ce}),En=imag$1({inputs:{input:fn},backend:ce}),$n=concat$1({inputs:[an,un],backend:ce,attrs:{axis:0}}),On=concat$1({inputs:[bn,En],backend:ce,attrs:{axis:0}}),zn=ce.data.get($n.dataId).values,Rn=ce.data.get(On.dataId).values;return ce.disposeIntermediateTensorInfo(ve),ce.disposeIntermediateTensorInfo(ye),ce.disposeIntermediateTensorInfo(be),ce.disposeIntermediateTensorInfo(ke),ce.disposeIntermediateTensorInfo(Ne),ce.disposeIntermediateTensorInfo(Fe),ce.disposeIntermediateTensorInfo(Le),ce.disposeIntermediateTensorInfo(je),ce.disposeIntermediateTensorInfo(Ge),ce.disposeIntermediateTensorInfo(Ye),ce.disposeIntermediateTensorInfo(Xe),ce.disposeIntermediateTensorInfo(We),ce.disposeIntermediateTensorInfo(Qt),ce.disposeIntermediateTensorInfo(Yt),ce.disposeIntermediateTensorInfo(Jt),ce.disposeIntermediateTensorInfo(rn),ce.disposeIntermediateTensorInfo(nn),ce.disposeIntermediateTensorInfo(fn),ce.disposeIntermediateTensorInfo(an),ce.disposeIntermediateTensorInfo(bn),ce.disposeIntermediateTensorInfo(un),ce.disposeIntermediateTensorInfo(En),ce.disposeIntermediateTensorInfo($n),ce.disposeIntermediateTensorInfo(On),{real:zn,imag:Rn}}function fourierTransformByMatmul(re,ee,ne){const ae=new Float32Array(ee*2);for(let ce=0;ce<ee;ce++){let le=0,ue=0;for(let he=0;he<ee;he++){const fe=exponent(ce*he,ee,ne),me=getComplexWithIndex(re,he);le+=me.real*fe.real-me.imag*fe.imag,ue+=me.real*fe.imag+me.imag*fe.real}ne&&(le/=ee,ue/=ee),assignToTypedArray(ae,le,ue,ce)}return ae}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fft$2(re){const{inputs:ee,backend:ne}=re,{input:ae}=ee,ce=sizeFromShape(ae.shape),le=ae.shape[ae.shape.length-1],ue=ce/le,he=reshape$1({inputs:{x:ae},backend:ne,attrs:{shape:[ue,le]}}),fe=fftBatch(he,!1,ne),me=reshape$1({inputs:{x:fe},backend:ne,attrs:{shape:ae.shape}});return ne.disposeIntermediateTensorInfo(he),ne.disposeIntermediateTensorInfo(fe),me}const fftConfig$1={kernelName:FFT$2,backendName:"cpu",kernelFunc:fft$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fill$2(re){const{backend:ee,attrs:ne}=re,{shape:ae,value:ce,dtype:le}=ne,ue=le||inferDtype(ce),he=getArrayFromDType(ue,sizeFromShape(ae));return fillValues(he,ce,ue),ee.makeTensorInfo(ae,ue,he)}const fillConfig$1={kernelName:Fill,backendName:"cpu",kernelFunc:fill$2};function fillValues(re,ee,ne){re.fill(ee)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const flipLeftRightConfig$1={kernelName:FlipLeftRight,backendName:"cpu",kernelFunc:({inputs:re,attrs:ee,backend:ne})=>{const{image:ae}=re,ce=ne,le=getTypedArrayFromDType(ae.dtype,sizeFromShape(ae.shape)),[ue,he,fe,me]=ae.shape,ge=ce.data.get(ae.dataId).values;for(let ye=0;ye<ue;ye++){const be=ye*fe*he*me;for(let Ee=0;Ee<he;Ee++){const Ce=Ee*(fe*me);for(let Se=0;Se<fe;Se++){const Te=Se*me;for(let ke=0;ke<me;ke++){const Fe=[ue,Ee,Se,ke][2],De=Math.round(fe-Fe),Oe=be+Ce+Te+ke;let Re=ge[Oe];if(De>=0&&De<fe){const Be=De*me,Le=be+Ce+Be+ke;Re=ge[Le]}le[Oe]=Re}}}}return{dataId:ce.write(le,ae.shape,ae.dtype),shape:ae.shape,dtype:ae.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorDivImpl=createSimpleBinaryKernelImpl((re,ee)=>Math.floor(re/ee)),floorDiv$1=binaryKernelFunc$1(FloorDiv,floorDivImpl,null,"int32"),floorDivConfig$1={kernelName:FloorDiv,backendName:"cpu",kernelFunc:floorDiv$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedConv2D(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,filter:le,bias:ue,preluActivationWeights:he}=ee,{strides:fe,pad:me,dataFormat:ge,dilations:ve,dimRoundingMode:ye,activation:be,leakyreluAlpha:Ee}=ae;let Ce=conv2D({inputs:{x:ce,filter:le},backend:ne,attrs:{strides:fe,pad:me,dataFormat:ge,dilations:ve,dimRoundingMode:ye}});if(ue){const Se=Ce;Ce=add({inputs:{a:Ce,b:ue},backend:ne}),ne.disposeIntermediateTensorInfo(Se)}if(be){const Se=Ce;Ce=applyActivation(ne,Ce,be,he,Ee),ne.disposeIntermediateTensorInfo(Se)}return Ce}const fusedConv2DConfig$1={kernelName:FusedConv2D,backendName:"cpu",kernelFunc:fusedConv2D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedDepthwiseConv2D$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,filter:le,bias:ue,preluActivationWeights:he}=ee,{strides:fe,pad:me,dataFormat:ge,dilations:ve,dimRoundingMode:ye,activation:be,leakyreluAlpha:Ee}=ae;let Ce=depthwiseConv2dNative$1({inputs:{x:ce,filter:le},backend:ne,attrs:{strides:fe,pad:me,dataFormat:ge,dilations:ve,dimRoundingMode:ye}});if(ue){const Se=Ce;Ce=add({inputs:{a:Ce,b:ue},backend:ne}),ne.disposeIntermediateTensorInfo(Se)}if(be){const Se=Ce;Ce=applyActivation(ne,Ce,be,he,Ee),ne.disposeIntermediateTensorInfo(Se)}return Ce}const fusedDepthwiseConv2DConfig$1={kernelName:FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:fusedDepthwiseConv2D$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherNd$1(re){const{inputs:ee,backend:ne}=re,{params:ae,indices:ce}=ee,le=sizeFromShape(ae.shape),ue=ce.shape,he=ue[ue.length-1],[fe,me,ge,ve]=prepareAndValidate(ae,ce);if(me===0)return ne.makeTensorInfo(fe,ae.dtype,[]);const ye=buffer$1([me,ge],ae.dtype),be=ne.data.get(ce.dataId).values,Ee=ne.data.get(ae.dataId).values;for(let Ce=0;Ce<me;Ce++){const Se=[];let Te=0;for(let ke=0;ke<he;ke++){const Ne=be[Ce*he+ke];Te+=Ne*ve[ke],Se.push(Ne)}if(Te<0||Te>=le/ge)throw new Error(`Invalid indices: ${Se} does not index into ${ae.shape}`);for(let ke=0;ke<ge;ke++)ye.values[Ce*ge+ke]=Ee[Te*ge+ke]}return ne.makeTensorInfo(fe,ye.dtype,ye.values)}const gatherNdConfig$1={kernelName:GatherNd,backendName:"cpu",kernelFunc:gatherNd$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherV2$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,indices:le}=ee,{axis:ue,batchDims:he}=ae;assertNotComplex$1([ce,le],"gatherV2");let fe=he;he==null&&(fe=0);const me=sizeFromShape(le.shape),ge=parseAxisParam(ue,ce.shape)[0],ve=collectGatherOpShapeInfo(ce,le,ge,fe),ye=reshape$1({inputs:{x:ce},backend:ne,attrs:{shape:[ve.batchSize,ve.outerSize,ve.dimSize,ve.sliceSize]}}),be=reshape$1({inputs:{x:le},backend:ne,attrs:{shape:[ve.batchSize,me/ve.batchSize]}}),Ee=[ve.batchSize,ve.outerSize,me/ve.batchSize,ve.sliceSize],Ce=ne.bufferSync(be),Se=ne.bufferSync(ye),Te=gatherV2Impl(Se,Ce,Ee);return ne.disposeIntermediateTensorInfo(ye),ne.disposeIntermediateTensorInfo(be),ne.makeTensorInfo(ve.outputShape,Te.dtype,Te.values)}const gatherV2Config$1={kernelName:GatherV2,backendName:"cpu",kernelFunc:gatherV2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const greaterEqualImpl=createSimpleBinaryKernelImpl((re,ee)=>re>=ee?1:0),greaterEqual$1=binaryKernelFunc$1(GreaterEqual,greaterEqualImpl,null,"bool"),greaterEqualConfig$1={kernelName:GreaterEqual,backendName:"cpu",kernelFunc:greaterEqual$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ifft$1(re){const{inputs:ee,backend:ne}=re,{input:ae}=ee,ce=sizeFromShape(ae.shape),le=ae.shape[ae.shape.length-1],ue=ce/le,he=reshape$1({inputs:{x:ae},backend:ne,attrs:{shape:[ue,le]}}),fe=fftBatch(he,!0,ne),me=reshape$1({inputs:{x:fe},backend:ne,attrs:{shape:ae.shape}});return ne.disposeIntermediateTensorInfo(he),ne.disposeIntermediateTensorInfo(fe),me}const ifftConfig$1={kernelName:IFFT,backendName:"cpu",kernelFunc:ifft$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isFinite$2=unaryKernelFunc$1(IsFinite,re=>Number.isFinite(re)?1:0,"bool"),isFiniteConfig$1={kernelName:IsFinite,backendName:"cpu",kernelFunc:isFinite$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isInf$1=unaryKernelFunc$1(IsInf,re=>Math.abs(re)===1/0?1:0,"bool"),isInfConfig$1={kernelName:IsInf,backendName:"cpu",kernelFunc:isInf$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isNaN$2=unaryKernelFunc$1(IsNan,re=>Number.isNaN(re)?1:0,"bool"),isNaNConfig$1={kernelName:IsNan,backendName:"cpu",kernelFunc:isNaN$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lessEqualImpl=createSimpleBinaryKernelImpl((re,ee)=>re<=ee?1:0),lessEqual$1=binaryKernelFunc$1(LessEqual,lessEqualImpl,null,"bool"),lessEqualConfig$1={kernelName:LessEqual,backendName:"cpu",kernelFunc:lessEqual$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function linSpace$1(re){const{backend:ee,attrs:ne}=re,{start:ae,stop:ce,num:le}=ne,ue=linSpaceImpl(ae,ce,le);return ee.makeTensorInfo([ue.length],"float32",ue)}const linSpaceConfig$1={kernelName:LinSpace,backendName:"cpu",kernelFunc:linSpace$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const log1p$1=unaryKernelFunc$1(Log1p,re=>Math.log1p(re)),log1pConfig$1={kernelName:Log1p,backendName:"cpu",kernelFunc:log1p$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logicalAndImpl=createSimpleBinaryKernelImpl((re,ee)=>re&&ee),logicalAnd$1=binaryKernelFunc$1(LogicalAnd,logicalAndImpl,null,"bool"),logicalAndConfig$1={kernelName:LogicalAnd,backendName:"cpu",kernelFunc:logicalAnd$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logicalNot$1=unaryKernelFunc$1(LogicalNot,re=>re?0:1,"bool"),logicalNotConfig$1={kernelName:LogicalNot,backendName:"cpu",kernelFunc:logicalNot$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logicalOrImpl=createSimpleBinaryKernelImpl((re,ee)=>re||ee),logicalOr$1=binaryKernelFunc$1(LogicalOr,logicalOrImpl,null,"bool"),logicalOrConfig$1={kernelName:LogicalOr,backendName:"cpu",kernelFunc:logicalOr$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRN(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{depthRadius:le,bias:ue,alpha:he,beta:fe}=ae;assertNotComplex$1(ce,"LRN");const me=ce.shape[3],ge=me-1,ve=ne.data.get(ce.dataId).values,ye=sizeFromShape(ce.shape),be=new Float32Array(ye);function Ee(Ce){const Se=Ce%me;let Te=Ce-Se+Math.max(0,Se-le);const ke=Ce-Se+Math.min(Se+le,ge);let Ne=0;for(;Te<=ke;Te++){const Fe=ve[Te];Ne+=Fe*Fe}return Ne}for(let Ce=0;Ce<ye;Ce++){const Se=Ee(Ce),Te=ve[Ce]*Math.pow(ue+he*Se,-fe);be[Ce]=Te}return ne.makeTensorInfo(ce.shape,ce.dtype,be)}const lRNConfig={kernelName:LRN,backendName:"cpu",kernelFunc:lRN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRNGrad(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,y:le,dy:ue}=ee,{depthRadius:he,bias:fe,alpha:me,beta:ge}=ae;assertNotComplex$1(ue,"LRNGrad");const ve=sizeFromShape(ue.shape),ye=ue.shape[3],be=ne.data.get(ue.dataId).values,Ee=ne.data.get(ce.dataId).values,Ce=ne.data.get(le.dataId).values,Se=new Float32Array(ve),Te=ve;for(let ke=0;ke<Te;ke++){const Ne=ke%ye,Fe=ke-Ne+Math.max(0,Ne-he),De=ke-Ne+Math.min(ye,Ne+he+1);let Oe=0;for(let Re=Fe;Re<De;Re++)Oe+=Math.pow(Ee[Re],2);Oe=me*Oe+fe;for(let Re=Fe;Re<De;Re++){let Be=-2*me*ge*Ee[Re]*Ce[ke]/Oe;ke===Re&&(Be+=Math.pow(Oe,-ge)),Be*=be[ke],Se[Re]+=Be}}return ne.makeTensorInfo(ue.shape,ce.dtype,Se)}const lRNGradConfig={kernelName:LRNGrad,backendName:"cpu",kernelFunc:lRNGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function max$2(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{reductionIndices:le,keepDims:ue}=ae,he=ne;let fe=ce.shape;const me=fe.length,ge=parseAxisParam(le,fe);let ve=ge;const ye=getAxesPermutation(ve,me);let be=he.data.get(ce.dataId).values;if(ye!=null){const Fe=new Array(me);for(let De=0;De<Fe.length;De++)Fe[De]=fe[ye[De]];be=transposeImpl$1(be,fe,ce.dtype,ye,Fe),ve=getInnerMostAxes(ve.length,me),fe=Fe}assertNotComplex$1(ce,"max"),assertAxesAreInnerMostDims("max",ve,me);const[Ee,Ce]=computeOutAndReduceShapes(fe,ve),Se=sizeFromShape(Ce),Te=maxImpl$1(be,Se,Ee,ce.dtype),ke=he.write(Te,Ee,ce.dtype);let Ne=Ee;return ue&&(Ne=expandShapeToKeepDim(Ee,ge)),{dataId:ke,shape:Ne,dtype:ce.dtype}}const maxConfig$1={kernelName:Max,backendName:"cpu",kernelFunc:max$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee;assertNotComplex$1(ce,"maxPool");const{filterSize:le,strides:ue,pad:he,dimRoundingMode:fe}=ae,me=1;assert$2(eitherStridesOrDilationsAreOne(ue,me),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${ue} and dilations '${me}'`);const ge=computePool2DInfo(ce.shape,le,ue,me,he,fe);let ve;if(ge.filterWidth===1&&ge.filterHeight===1&&arraysEqual(ge.inShape,ge.outShape))ve=identity$4({inputs:{x:ce},backend:ne});else{const ye=ne.data.get(ce.dataId).values,be=computeStrides(ce.shape),Ee=pool$1(ye,ce.shape,ce.dtype,be,ge,"max");ve=ne.makeTensorInfo(ge.outShape,ce.dtype,Ee.values)}return ve}const maxPoolConfig$1={kernelName:MaxPool,backendName:"cpu",kernelFunc:maxPool$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3D(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{filterSize:le,strides:ue,pad:he,dimRoundingMode:fe,dataFormat:me,dilations:ge}=ae;assertNotComplex$1(ce,"maxPool3d");let ve=ge;ve==null&&(ve=[1,1,1]);const ye=computePool3DInfo(ce.shape,le,ue,ve,he,fe,me),be=ne.data.get(ce.dataId).values,Ee=pool3d(be,ce.shape,ce.dtype,computeStrides(ce.shape),ye,"max");return ne.makeTensorInfo(Ee.shape,"float32",Ee.values)}const maxPool3DConfig$1={kernelName:MaxPool3D,backendName:"cpu",kernelFunc:maxPool3D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3DGrad$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{dy:ce,input:le}=ee,{filterSize:ue,strides:he,pad:fe,dilations:me,dimRoundingMode:ge}=ae;assertNotComplex$1([ce,le],"maxPool3DGrad");const ve=computePool3DInfo(le.shape,ue,he,me,fe,ge),ye=ne.bufferSync(le),be=maxPool3dPositions(ye,ve),Ee=ve.strideDepth,Ce=ve.strideHeight,Se=ve.strideWidth,Te=ve.dilationDepth,ke=ve.dilationHeight,Ne=ve.dilationWidth,Fe=ve.effectiveFilterDepth,De=ve.effectiveFilterHeight,Oe=ve.effectiveFilterWidth,Re=Fe-1-ve.padInfo.front,Be=Oe-1-ve.padInfo.left,Le=De-1-ve.padInfo.top,je=buffer$1(le.shape,"float32"),Ge=ne.bufferSync(ce);for(let qe=0;qe<ve.batchSize;++qe)for(let Ue=0;Ue<ve.inChannels;++Ue)for(let ze=0;ze<ve.inDepth;++ze)for(let He=0;He<ve.inHeight;++He)for(let Ye=0;Ye<ve.inWidth;++Ye){const Xe=ze-Re,We=He-Le,Ze=Ye-Be;let Vt=0;for(let Qt=0;Qt<Fe;Qt+=Te){const Yt=(Xe+Qt)/Ee;if(!(Yt<0||Yt>=ve.outDepth||Math.floor(Yt)!==Yt))for(let Jt=0;Jt<De;Jt+=ke){const rn=(We+Jt)/Ce;if(!(rn<0||rn>=ve.outHeight||Math.floor(rn)!==rn))for(let nn=0;nn<Oe;nn+=Ne){const fn=(Ze+nn)/Se;if(fn<0||fn>=ve.outWidth||Math.floor(fn)!==fn)continue;const an=Fe*De*Oe-1-be.get(qe,Yt,rn,fn,Ue),un=Qt*De*Oe+Jt*Oe+nn,bn=an===un?1:0;if(bn===0)continue;const En=Ge.get(qe,Yt,rn,fn,Ue);Vt+=En*bn}}}je.set(Vt,qe,ze,He,Ye,Ue)}return ne.makeTensorInfo(je.shape,je.dtype,je.values)}const maxPool3DGradConfig={kernelName:MaxPool3DGrad,backendName:"cpu",kernelFunc:maxPool3DGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolGrad$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{dy:ce,input:le,output:ue}=ee,he=le;assertNotComplex$1([le,ue],"maxPoolGrad");const{filterSize:fe,strides:me,pad:ge,dimRoundingMode:ve}=ae,ye=computePool2DInfo(he.shape,fe,me,1,ge,ve),be=ne.data.get(he.dataId).values,Ee=buffer$1(ye.outShape,he.dtype,maxPoolPositions(be,he.shape,he.dtype,ye).values),Ce=ye.strideHeight,Se=ye.strideWidth,Te=ye.dilationHeight,ke=ye.dilationWidth,Ne=ye.effectiveFilterHeight,Fe=ye.effectiveFilterWidth,De=Fe-1-ye.padInfo.left,Oe=Ne-1-ye.padInfo.top,Re=buffer$1(he.shape,"float32"),Be=ne.data.get(ce.dataId).values,Le=buffer$1(ce.shape,"float32",Be);for(let je=0;je<ye.batchSize;++je)for(let Ge=0;Ge<ye.inChannels;++Ge)for(let qe=0;qe<ye.inHeight;++qe)for(let Ue=0;Ue<ye.inWidth;++Ue){const ze=qe-Oe,He=Ue-De;let Ye=0;for(let Xe=0;Xe<Ne;Xe+=Te){const We=(ze+Xe)/Ce;if(!(We<0||We>=ye.outHeight||Math.floor(We)!==We))for(let Ze=0;Ze<Fe;Ze+=ke){const Vt=(He+Ze)/Se;if(Vt<0||Vt>=ye.outWidth||Math.floor(Vt)!==Vt)continue;const Qt=Ne*Fe-1-Ee.get(je,We,Vt,Ge),Yt=Xe*Fe+Ze,Jt=Qt===Yt?1:0;if(Jt===0)continue;const rn=Le.get(je,We,Vt,Ge);Ye+=rn*Jt}}Re.set(Ye,je,qe,Ue,Ge)}return ne.makeTensorInfo(Re.shape,Re.dtype,Re.values)}const maxPoolGradConfig$1={kernelName:MaxPoolGrad,backendName:"cpu",kernelFunc:maxPoolGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolWithArgmaxImpl$1(re,ee,ne,ae,ce){const le=computeStrides(ee),ue=pool$1(re,ee,ne,le,ce,"max"),he=maxPoolPositions(re,ee,ne,ce,!0,ae);return[ue.values,he.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPoolWithArgmaxConfig$1={kernelName:MaxPoolWithArgmax,backendName:"cpu",kernelFunc:({inputs:re,attrs:ee,backend:ne})=>{const{x:ae}=re,{filterSize:ce,strides:le,pad:ue,includeBatchInIndex:he}=ee,fe=ne;assertNotComplex$1(ae,"MaxPoolWithArgmax");const me=fe.data.get(ae.dataId).values,ge=computePool2DInfo(ae.shape,ce,le,[1,1],ue),[ve,ye]=maxPoolWithArgmaxImpl$1(me,ae.shape,ae.dtype,he,ge),be=fe.write(ve,ge.outShape,ae.dtype),Ee=fe.write(ye,ge.outShape,ae.dtype);return[{dataId:be,shape:ge.outShape,dtype:ae.dtype},{dataId:Ee,shape:ge.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sum$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le,keepDims:ue}=ae;assertNotComplex$1(ce,"sum");let he;ce.dtype==="bool"?he=cast$1({inputs:{x:ce},backend:ne,attrs:{dtype:"int32"}}):he=identity$4({inputs:{x:ce},backend:ne});const fe=he.shape.length,me=parseAxisParam(le,he.shape),ge=getAxesPermutation(me,fe);let ve=me,ye=he;ge!=null&&(ye=transpose$1({inputs:{x:he},backend:ne,attrs:{perm:ge}}),ve=getInnerMostAxes(ve.length,fe)),assertAxesAreInnerMostDims("sum",ve,ye.shape.length);const[be,Ee]=computeOutAndReduceShapes(ye.shape,ve),Ce=upcastType(ye.dtype,"int32");let Se=zeros(ne,be,Ce);const Te=sizeFromShape(Ee),ke=ne.data.get(Se.dataId).values,Ne=ne.data.get(ye.dataId).values;for(let Fe=0;Fe<ke.length;++Fe){const De=Fe*Te;let Oe=0;for(let Re=0;Re<Te;++Re)Oe+=Ne[De+Re];ke[Fe]=Oe}if(ue){const Fe=expandShapeToKeepDim(Se.shape,me),De=Se;Se=reshape$1({inputs:{x:Se},backend:ne,attrs:{shape:Fe}}),ne.disposeIntermediateTensorInfo(De)}return ne.disposeIntermediateTensorInfo(he),ge!=null&&ne.disposeIntermediateTensorInfo(ye),Se}const sumConfig$1={kernelName:Sum,backendName:"cpu",kernelFunc:sum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mean(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le,keepDims:ue}=ae,he=parseAxisParam(le,ce.shape),me=computeOutAndReduceShapes(ce.shape,he)[1],ge=sizeFromShape(me),ve=[],ye=ne.makeTensorInfo([],"float32",new Float32Array([ge]));ve.push(ye);const be=cast$1({inputs:{x:ce},backend:ne,attrs:{dtype:"float32"}});ve.push(be);const Ee=div({inputs:{a:be,b:ye},backend:ne});ve.push(Ee);const Ce=sum$1({inputs:{x:Ee},backend:ne,attrs:{axis:le,keepDims:ue}});return ve.forEach(Se=>ne.disposeIntermediateTensorInfo(Se)),Ce}const meanConfig$1={kernelName:Mean,backendName:"cpu",kernelFunc:mean};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function min$2(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le,keepDims:ue}=ae;assertNotComplex$1(ce,"min");const he=parseAxisParam(le,ce.shape);let fe=he;const me=getAxesPermutation(fe,ce.shape.length);let ge=ce;me!=null&&(ge=transpose$1({inputs:{x:ce},backend:ne,attrs:{perm:me}}),fe=getInnerMostAxes(fe.length,ce.shape.length)),assertAxesAreInnerMostDims("min",fe,ge.shape.length);const[ve,ye]=computeOutAndReduceShapes(ge.shape,fe),be=sizeFromShape(ye),Ee=makeZerosTypedArray(sizeFromShape(ve),ge.dtype),Ce=ne.data.get(ge.dataId).values;for(let Te=0;Te<Ee.length;++Te){const ke=Te*be;let Ne=Ce[ke];for(let Fe=0;Fe<be;++Fe){const De=Ce[ke+Fe];De<Ne&&(Ne=De)}Ee[Te]=Ne}me!=null&&ne.disposeIntermediateTensorInfo(ge);const Se=ne.makeTensorInfo(ve,ge.dtype,Ee);if(ue){const Te=expandShapeToKeepDim(ve,he),ke=reshape$1({inputs:{x:Se},backend:ne,attrs:{shape:Te}});return ne.disposeIntermediateTensorInfo(Se),ke}return Se}const minConfig$1={kernelName:Min,backendName:"cpu",kernelFunc:min$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mirrorPad(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{paddings:le,mode:ue}=ae;assertNotComplex$1(ce,"mirrorPad");const he=le.map((Ne,Fe)=>Ne[0]+ce.shape[Fe]+Ne[1]),fe=le.map(Ne=>Ne[0]),me=le.map((Ne,Fe)=>Ne[0]+ce.shape[Fe]),ge=ue==="reflect"?0:1,ve=ne.data.get(ce.dataId).values,ye=ce.shape.length,be=computeStrides(ce.shape),Ee=sizeFromShape(he),Ce=he.length,Se=computeStrides(he),Te=getTypedArrayFromDType(ce.dtype,Ee);for(let Ne=0;Ne<Ee;Ne++){let Fe=indexToLoc(Ne,Ce,Se);for(let Oe=0;Oe<Ce;Oe++)Fe[Oe]<fe[Oe]?Fe[Oe]=fe[Oe]*2-Fe[Oe]-ge:Fe[Oe]>=me[Oe]&&(Fe[Oe]=(me[Oe]-1)*2-Fe[Oe]+ge);Fe=Fe.map((Oe,Re)=>Oe-fe[Re]);const De=locToIndex(Fe,ye,be);Te[Ne]=ve[De]}return{dataId:ne.write(Te,he,ce.dtype),shape:he,dtype:ce.dtype}}const mirrorPadConfig$1={kernelName:MirrorPad,backendName:"cpu",kernelFunc:mirrorPad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const modImpl=createSimpleBinaryKernelImpl((re,ee)=>{const ne=re%ee;return re<0&&ee<0||re>=0&&ee>=0?ne:(ne+ee)%ee}),mod$1=binaryKernelFunc$1(Mod,modImpl),modConfig$1={kernelName:Mod,backendName:"cpu",kernelFunc:mod$1};var alea$1={exports:{}};alea$1.exports;(function(re){(function(ee,ne,ae){function ce(fe){var me=this,ge=he();me.next=function(){var ve=2091639*me.s0+me.c*23283064365386963e-26;return me.s0=me.s1,me.s1=me.s2,me.s2=ve-(me.c=ve|0)},me.c=1,me.s0=ge(" "),me.s1=ge(" "),me.s2=ge(" "),me.s0-=ge(fe),me.s0<0&&(me.s0+=1),me.s1-=ge(fe),me.s1<0&&(me.s1+=1),me.s2-=ge(fe),me.s2<0&&(me.s2+=1),ge=null}function le(fe,me){return me.c=fe.c,me.s0=fe.s0,me.s1=fe.s1,me.s2=fe.s2,me}function ue(fe,me){var ge=new ce(fe),ve=me&&me.state,ye=ge.next;return ye.int32=function(){return ge.next()*4294967296|0},ye.double=function(){return ye()+(ye()*2097152|0)*11102230246251565e-32},ye.quick=ye,ve&&(typeof ve=="object"&&le(ve,ge),ye.state=function(){return le(ge,{})}),ye}function he(){var fe=4022871197,me=function(ge){ge=ge.toString();for(var ve=0;ve<ge.length;ve++){fe+=ge.charCodeAt(ve);var ye=.02519603282416938*fe;fe=ye>>>0,ye-=fe,ye*=fe,fe=ye>>>0,ye-=fe,fe+=ye*4294967296}return(fe>>>0)*23283064365386963e-26};return me}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.alea=ue})(commonjsGlobal,re,!1)})(alea$1);var aleaExports=alea$1.exports,xor128$1={exports:{}};xor128$1.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this,me="";fe.x=0,fe.y=0,fe.z=0,fe.w=0,fe.next=function(){var ve=fe.x^fe.x<<11;return fe.x=fe.y,fe.y=fe.z,fe.z=fe.w,fe.w^=fe.w>>>19^ve^ve>>>8},he===(he|0)?fe.x=he:me+=he;for(var ge=0;ge<me.length+64;ge++)fe.x^=me.charCodeAt(ge)|0,fe.next()}function le(he,fe){return fe.x=he.x,fe.y=he.y,fe.z=he.z,fe.w=he.w,fe}function ue(he,fe){var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(typeof ge=="object"&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.xor128=ue})(commonjsGlobal,re,!1)})(xor128$1);var xor128Exports=xor128$1.exports,xorwow$1={exports:{}};xorwow$1.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this,me="";fe.next=function(){var ve=fe.x^fe.x>>>2;return fe.x=fe.y,fe.y=fe.z,fe.z=fe.w,fe.w=fe.v,(fe.d=fe.d+362437|0)+(fe.v=fe.v^fe.v<<4^(ve^ve<<1))|0},fe.x=0,fe.y=0,fe.z=0,fe.w=0,fe.v=0,he===(he|0)?fe.x=he:me+=he;for(var ge=0;ge<me.length+64;ge++)fe.x^=me.charCodeAt(ge)|0,ge==me.length&&(fe.d=fe.x<<10^fe.x>>>4),fe.next()}function le(he,fe){return fe.x=he.x,fe.y=he.y,fe.z=he.z,fe.w=he.w,fe.v=he.v,fe.d=he.d,fe}function ue(he,fe){var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(typeof ge=="object"&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.xorwow=ue})(commonjsGlobal,re,!1)})(xorwow$1);var xorwowExports=xorwow$1.exports,xorshift7$1={exports:{}};xorshift7$1.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this;fe.next=function(){var ge=fe.x,ve=fe.i,ye,be;return ye=ge[ve],ye^=ye>>>7,be=ye^ye<<24,ye=ge[ve+1&7],be^=ye^ye>>>10,ye=ge[ve+3&7],be^=ye^ye>>>3,ye=ge[ve+4&7],be^=ye^ye<<7,ye=ge[ve+7&7],ye=ye^ye<<13,be^=ye^ye<<9,ge[ve]=be,fe.i=ve+1&7,be};function me(ge,ve){var ye,be=[];if(ve===(ve|0))be[0]=ve;else for(ve=""+ve,ye=0;ye<ve.length;++ye)be[ye&7]=be[ye&7]<<15^ve.charCodeAt(ye)+be[ye+1&7]<<13;for(;be.length<8;)be.push(0);for(ye=0;ye<8&&be[ye]===0;++ye);for(ye==8?be[7]=-1:be[ye],ge.x=be,ge.i=0,ye=256;ye>0;--ye)ge.next()}me(fe,he)}function le(he,fe){return fe.x=he.x.slice(),fe.i=he.i,fe}function ue(he,fe){he==null&&(he=+new Date);var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(ge.x&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.xorshift7=ue})(commonjsGlobal,re,!1)})(xorshift7$1);var xorshift7Exports=xorshift7$1.exports,xor4096$1={exports:{}};xor4096$1.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this;fe.next=function(){var ge=fe.w,ve=fe.X,ye=fe.i,be,Ee;return fe.w=ge=ge+1640531527|0,Ee=ve[ye+34&127],be=ve[ye=ye+1&127],Ee^=Ee<<13,be^=be<<17,Ee^=Ee>>>15,be^=be>>>12,Ee=ve[ye]=Ee^be,fe.i=ye,Ee+(ge^ge>>>16)|0};function me(ge,ve){var ye,be,Ee,Ce,Se,Te=[],ke=128;for(ve===(ve|0)?(be=ve,ve=null):(ve=ve+"\0",be=0,ke=Math.max(ke,ve.length)),Ee=0,Ce=-32;Ce<ke;++Ce)ve&&(be^=ve.charCodeAt((Ce+32)%ve.length)),Ce===0&&(Se=be),be^=be<<10,be^=be>>>15,be^=be<<4,be^=be>>>13,Ce>=0&&(Se=Se+1640531527|0,ye=Te[Ce&127]^=be+Se,Ee=ye==0?Ee+1:0);for(Ee>=128&&(Te[(ve&&ve.length||0)&127]=-1),Ee=127,Ce=4*128;Ce>0;--Ce)be=Te[Ee+34&127],ye=Te[Ee=Ee+1&127],be^=be<<13,ye^=ye<<17,be^=be>>>15,ye^=ye>>>12,Te[Ee]=be^ye;ge.w=Se,ge.X=Te,ge.i=Ee}me(fe,he)}function le(he,fe){return fe.i=he.i,fe.w=he.w,fe.X=he.X.slice(),fe}function ue(he,fe){he==null&&(he=+new Date);var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(ge.X&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.xor4096=ue})(commonjsGlobal,re,!1)})(xor4096$1);var xor4096Exports=xor4096$1.exports,tychei$1={exports:{}};tychei$1.exports;(function(re){(function(ee,ne,ae){function ce(he){var fe=this,me="";fe.next=function(){var ve=fe.b,ye=fe.c,be=fe.d,Ee=fe.a;return ve=ve<<25^ve>>>7^ye,ye=ye-be|0,be=be<<24^be>>>8^Ee,Ee=Ee-ve|0,fe.b=ve=ve<<20^ve>>>12^ye,fe.c=ye=ye-be|0,fe.d=be<<16^ye>>>16^Ee,fe.a=Ee-ve|0},fe.a=0,fe.b=0,fe.c=-1640531527,fe.d=1367130551,he===Math.floor(he)?(fe.a=he/4294967296|0,fe.b=he|0):me+=he;for(var ge=0;ge<me.length+20;ge++)fe.b^=me.charCodeAt(ge)|0,fe.next()}function le(he,fe){return fe.a=he.a,fe.b=he.b,fe.c=he.c,fe.d=he.d,fe}function ue(he,fe){var me=new ce(he),ge=fe&&fe.state,ve=function(){return(me.next()>>>0)/4294967296};return ve.double=function(){do var ye=me.next()>>>11,be=(me.next()>>>0)/4294967296,Ee=(ye+be)/(1<<21);while(Ee===0);return Ee},ve.int32=me.next,ve.quick=ve,ge&&(typeof ge=="object"&&le(ge,me),ve.state=function(){return le(me,{})}),ve}ne&&ne.exports?ne.exports=ue:ae&&ae.amd?ae(function(){return ue}):this.tychei=ue})(commonjsGlobal,re,!1)})(tychei$1);var tycheiExports=tychei$1.exports,seedrandom$1={exports:{}};(function(re){(function(ee,ne){var ae=256,ce=6,le=52,ue="random",he=ne.pow(ae,ce),fe=ne.pow(2,le),me=fe*2,ge=ae-1,ve;function ye(Ne,Fe,De){var Oe=[];Fe=Fe==!0?{entropy:!0}:Fe||{};var Re=Se(Ce(Fe.entropy?[Ne,ke(ee)]:Ne??Te(),3),Oe),Be=new be(Oe),Le=function(){for(var je=Be.g(ce),Ge=he,qe=0;je<fe;)je=(je+qe)*ae,Ge*=ae,qe=Be.g(1);for(;je>=me;)je/=2,Ge/=2,qe>>>=1;return(je+qe)/Ge};return Le.int32=function(){return Be.g(4)|0},Le.quick=function(){return Be.g(4)/4294967296},Le.double=Le,Se(ke(Be.S),ee),(Fe.pass||De||function(je,Ge,qe,Ue){return Ue&&(Ue.S&&Ee(Ue,Be),je.state=function(){return Ee(Be,{})}),qe?(ne[ue]=je,Ge):je})(Le,Re,"globalThis"in Fe?Fe.global:this==ne,Fe.state)}ne["seed"+ue]=ye;function be(Ne){var Fe,De=Ne.length,Oe=this,Re=0,Be=Oe.i=Oe.j=0,Le=Oe.S=[];for(De||(Ne=[De++]);Re<ae;)Le[Re]=Re++;for(Re=0;Re<ae;Re++)Le[Re]=Le[Be=ge&Be+Ne[Re%De]+(Fe=Le[Re])],Le[Be]=Fe;(Oe.g=function(je){for(var Ge,qe=0,Ue=Oe.i,ze=Oe.j,He=Oe.S;je--;)Ge=He[Ue=ge&Ue+1],qe=qe*ae+He[ge&(He[Ue]=He[ze=ge&ze+Ge])+(He[ze]=Ge)];return Oe.i=Ue,Oe.j=ze,qe})(ae)}function Ee(Ne,Fe){return Fe.i=Ne.i,Fe.j=Ne.j,Fe.S=Ne.S.slice(),Fe}function Ce(Ne,Fe){var De=[],Oe=typeof Ne,Re;if(Fe&&Oe=="object")for(Re in Ne)try{De.push(Ce(Ne[Re],Fe-1))}catch{}return De.length?De:Oe=="string"?Ne:Ne+"\0"}function Se(Ne,Fe){for(var De=Ne+"",Oe,Re=0;Re<De.length;)Fe[ge&Re]=ge&(Oe^=Fe[ge&Re]*19)+De.charCodeAt(Re++);return ke(Fe)}function Te(){try{var Ne;return ve&&(Ne=ve.randomBytes)?Ne=Ne(ae):(Ne=new Uint8Array(ae),(globalThis.crypto||globalThis.msCrypto).getRandomValues(Ne)),ke(Ne)}catch{var Fe=globalThis.navigator,De=Fe&&Fe.plugins;return[+new Date,globalThis,De,globalThis.screen,ke(ee)]}}function ke(Ne){return String.fromCharCode.apply(0,Ne)}if(Se(ne.random(),ee),re.exports){re.exports=ye;try{ve=require$$0$1}catch{}}})([],Math)})(seedrandom$1);var seedrandomExports=seedrandom$1.exports,alea=aleaExports,xor128=xor128Exports,xorwow=xorwowExports,xorshift7=xorshift7Exports,xor4096=xor4096Exports,tychei=tycheiExports,sr=seedrandomExports;sr.alea=alea;sr.xor128=xor128;sr.xorwow=xorwow;sr.xorshift7=xorshift7;sr.xor4096=xor4096;sr.tychei=tychei;var seedrandom=sr;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softmax$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{logits:ce}=ee,{dim:le}=ae,ue=ce.shape.length;let he=le;if(he===-1&&(he=ue-1),he!==ue-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${ue} and dim was ${he}`);const fe=parseAxisParam([he],ce.shape),me=max$2({inputs:{x:ce},backend:ne,attrs:{reductionIndices:fe,keepDims:!1}}),ge=expandShapeToKeepDim(me.shape,fe),ve=reshape$1({inputs:{x:me},backend:ne,attrs:{shape:ge}}),ye=sub$1({inputs:{a:ce,b:ve},backend:ne}),be=exp$1({inputs:{x:ye},backend:ne}),Ee=sum$1({inputs:{x:be},backend:ne,attrs:{axis:fe,keepDims:!1}}),Ce=reshape$1({inputs:{x:Ee},backend:ne,attrs:{shape:ge}}),Se=div({inputs:{a:be,b:Ce},backend:ne});return ne.disposeIntermediateTensorInfo(me),ne.disposeIntermediateTensorInfo(ve),ne.disposeIntermediateTensorInfo(ye),ne.disposeIntermediateTensorInfo(be),ne.disposeIntermediateTensorInfo(Ee),ne.disposeIntermediateTensorInfo(Ce),Se}const softmaxConfig$1={kernelName:Softmax$2,backendName:"cpu",kernelFunc:softmax$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function multinomial$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{logits:ce}=ee,{numSamples:le,seed:ue,normalized:he}=ae;assertNotComplex$1(ce,"multinomial");const fe=he?ce:softmax$1({inputs:{logits:ce},backend:ne,attrs:{dim:-1}}),me=fe.shape[0],ge=fe.shape[1],ve=ne.data.get(fe.dataId).values,ye=[me,le],be=makeZerosTypedArray(sizeFromShape(ye),"int32");for(let Ee=0;Ee<me;++Ee){const Ce=Ee*ge,Se=new Float32Array(ge-1);Se[0]=ve[Ce];for(let Ne=1;Ne<Se.length;++Ne)Se[Ne]=Se[Ne-1]+ve[Ce+Ne];const Te=seedrandom.alea(ue.toString()),ke=Ee*le;for(let Ne=0;Ne<le;++Ne){const Fe=Te();be[ke+Ne]=Se.length;for(let De=0;De<Se.length;De++)if(Fe<Se[De]){be[ke+Ne]=De;break}}}return he||ne.disposeIntermediateTensorInfo(fe),ne.makeTensorInfo(ye,"int32",be)}const multinomialConfig$1={kernelName:Multinomial,backendName:"cpu",kernelFunc:multinomial$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV3Impl$1=nonMaxSuppressionV3Impl$2;function nonMaxSuppressionV3$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{boxes:ce,scores:le}=ee,{maxOutputSize:ue,iouThreshold:he,scoreThreshold:fe}=ae;assertNotComplex$1(ce,"NonMaxSuppression");const me=ne.data.get(ce.dataId).values,ge=ne.data.get(le.dataId).values,{selectedIndices:ve}=nonMaxSuppressionV3Impl$1(me,ge,ue,he,fe);return ne.makeTensorInfo([ve.length],"int32",new Int32Array(ve))}const nonMaxSuppressionV3Config$1={kernelName:NonMaxSuppressionV3,backendName:"cpu",kernelFunc:nonMaxSuppressionV3$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV4Impl$1=nonMaxSuppressionV4Impl$2;function nonMaxSuppressionV4$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{boxes:ce,scores:le}=ee,{maxOutputSize:ue,iouThreshold:he,scoreThreshold:fe,padToMaxOutputSize:me}=ae;assertNotComplex$1(ce,"NonMaxSuppressionPadded");const ge=ne.data.get(ce.dataId).values,ve=ne.data.get(le.dataId).values,{selectedIndices:ye,validOutputs:be}=nonMaxSuppressionV4Impl$1(ge,ve,ue,he,fe,me);return[ne.makeTensorInfo([ye.length],"int32",new Int32Array(ye)),ne.makeTensorInfo([],"int32",new Int32Array([be]))]}const nonMaxSuppressionV4Config$1={kernelName:NonMaxSuppressionV4,backendName:"cpu",kernelFunc:nonMaxSuppressionV4$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV5Impl$1=nonMaxSuppressionV5Impl$2;function nonMaxSuppressionV5$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{boxes:ce,scores:le}=ee,{maxOutputSize:ue,iouThreshold:he,scoreThreshold:fe,softNmsSigma:me}=ae;assertNotComplex$1(ce,"NonMaxSuppressionWithScore");const ge=ne.data.get(ce.dataId).values,ve=ne.data.get(le.dataId).values,ye=ue,be=he,Ee=fe,Ce=me,{selectedIndices:Se,selectedScores:Te}=nonMaxSuppressionV5Impl$1(ge,ve,ye,be,Ee,Ce);return[ne.makeTensorInfo([Se.length],"int32",new Int32Array(Se)),ne.makeTensorInfo([Te.length],"float32",new Float32Array(Te))]}const nonMaxSuppressionV5Config$1={kernelName:NonMaxSuppressionV5,backendName:"cpu",kernelFunc:nonMaxSuppressionV5$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oneHot$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{indices:ce}=ee,{depth:le,onValue:ue,offValue:he}=ae;assertNotComplex$1(ce,"oneHot");const fe=sizeFromShape(ce.shape),me=new Float32Array(fe*le);me.fill(he);const ge=ne.data.get(ce.dataId).values;for(let ve=0;ve<fe;++ve)ge[ve]>=0&&ge[ve]<le&&(me[ve*le+ge[ve]]=ue);return ne.makeTensorInfo([...ce.shape,le],"int32",me)}const oneHotConfig$1={kernelName:OneHot,backendName:"cpu",kernelFunc:oneHot$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zerosLike$1(re){const{inputs:ee,backend:ne}=re,{x:ae}=ee;if(ae.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(ae.dtype==="complex64"){const ce=real$1({inputs:{input:ae},backend:ne}),le=zerosLike$1({inputs:{x:ce},backend:ne}),ue=imag$1({inputs:{input:ae},backend:ne}),he=zerosLike$1({inputs:{x:ue},backend:ne}),fe=complex$1({inputs:{real:le,imag:he},backend:ne});return ne.disposeIntermediateTensorInfo(ce),ne.disposeIntermediateTensorInfo(le),ne.disposeIntermediateTensorInfo(ue),ne.disposeIntermediateTensorInfo(he),fe}else return fill$2({backend:ne,attrs:{shape:ae.shape,value:0,dtype:ae.dtype}})}const zerosLikeConfig$1={kernelName:ZerosLike,backendName:"cpu",kernelFunc:zerosLike$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function onesLike$1(re){const{inputs:ee,backend:ne}=re,{x:ae}=ee;if(ae.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(ae.dtype==="complex64"){const ce=real$1({inputs:{input:ae},backend:ne}),le=onesLike$1({inputs:{x:ce},backend:ne}),ue=imag$1({inputs:{input:ae},backend:ne}),he=zerosLike$1({inputs:{x:ue},backend:ne}),fe=complex$1({inputs:{real:le,imag:he},backend:ne});return ne.disposeIntermediateTensorInfo(ce),ne.disposeIntermediateTensorInfo(le),ne.disposeIntermediateTensorInfo(ue),ne.disposeIntermediateTensorInfo(he),fe}else return fill$2({backend:ne,attrs:{shape:ae.shape,value:1,dtype:ae.dtype}})}const onesLikeConfig$1={kernelName:OnesLike,backendName:"cpu",kernelFunc:onesLike$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pack$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{axis:ce}=ae;if(ee.length===1)return expandDims$1({inputs:{input:ee[0]},backend:ne,attrs:{dim:ce}});const le=ee[0].shape,ue=ee[0].dtype;ee.forEach(ge=>{assertShapesMatch(le,ge.shape,"All tensors passed to stack must have matching shapes"),assert$2(ue===ge.dtype,()=>"All tensors passed to stack must have matching dtypes")});const he=[],fe=ee.map(ge=>{const ve=expandDims$1({inputs:{input:ge},backend:ne,attrs:{dim:ce}});return he.push(ve),ve}),me=concat$1({inputs:fe,backend:ne,attrs:{axis:ce}});return he.forEach(ge=>ne.disposeIntermediateTensorInfo(ge)),me}const packConfig$1={kernelName:Pack,backendName:"cpu",kernelFunc:pack$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function padV2$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{paddings:le,constantValue:ue}=ae;assertNotComplex$1(ce,"pad");const he=le.map((ke,Ne)=>ke[0]+ce.shape[Ne]+ke[1]),fe=le.map(ke=>ke[0]),me=ne.data.get(ce.dataId).values,ge=sizeFromShape(ce.shape),ve=ce.shape.length,ye=computeStrides(ce.shape),be=sizeFromShape(he),Ee=he.length,Ce=computeStrides(he),Se=getTypedArrayFromDType(ce.dtype,be);ue!==0&&Se.fill(ue);for(let ke=0;ke<ge;ke++){const Fe=indexToLoc(ke,ve,ye).map((Oe,Re)=>Oe+fe[Re]),De=locToIndex(Fe,Ee,Ce);Se[De]=me[ke]}return{dataId:ne.write(Se,he,ce.dtype),shape:he,dtype:ce.dtype}}const padV2Config$1={kernelName:PadV2,backendName:"cpu",kernelFunc:padV2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const powImpl=createSimpleBinaryKernelImpl((re,ee)=>Math.pow(re,ee)),pow$1=binaryKernelFunc$1(Pow$1,powImpl),powConfig$1={kernelName:Pow$1,backendName:"cpu",kernelFunc:pow$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function range$2(re){const{backend:ee,attrs:ne}=re,{start:ae,stop:ce,dtype:le,step:ue}=ne,he=rangeImpl(ae,ce,ue,le);return ee.makeTensorInfo([he.length],le,he)}const rangeConfig$1={kernelName:Range,backendName:"cpu",kernelFunc:range$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reciprocal$1=unaryKernelFunc$1(Reciprocal,re=>1/re),reciprocalConfig$1={kernelName:Reciprocal,backendName:"cpu",kernelFunc:reciprocal$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinear$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{images:ce}=ee,{alignCorners:le,halfPixelCenters:ue,size:he}=ae;assertNotComplex$1(ce,"resizeBilinear");const fe=computeStrides(ce.shape),[me,ge]=he,[ve,ye,be,Ee]=ce.shape,Ce=ne.data.get(ce.dataId).values,Se=new Float32Array(sizeFromShape([ve,me,ge,Ee])),Te=[le&&me>1?ye-1:ye,le&&ge>1?be-1:be],ke=[le&&me>1?me-1:me,le&&ge>1?ge-1:ge];let Ne=0;const Fe=Te[0]/ke[0],De=Te[1]/ke[1];for(let Oe=0;Oe<ve;Oe++)for(let Re=0;Re<me;Re++){let Be;ue?Be=Fe*(Re+.5)-.5:Be=Fe*Re;const Le=Math.max(0,Math.floor(Be)),je=Be-Le,Ge=Math.min(ye-1,Math.ceil(Be)),qe=Oe*fe[0]+Le*fe[1],Ue=Oe*fe[0]+Ge*fe[1];for(let ze=0;ze<ge;ze++){let He;ue?He=De*(ze+.5)-.5:He=De*ze;const Ye=Math.max(0,Math.floor(He)),Xe=He-Ye,We=Math.min(be-1,Math.ceil(He)),Ze=qe+Ye*fe[2],Vt=Ue+Ye*fe[2],Qt=qe+We*fe[2],Yt=Ue+We*fe[2];for(let Jt=0;Jt<Ee;Jt++){const rn=Ce[Ze+Jt],nn=Ce[Vt+Jt],fn=Ce[Qt+Jt],an=Ce[Yt+Jt],un=rn+(fn-rn)*Xe,bn=nn+(an-nn)*Xe,En=un+(bn-un)*je;Se[Ne++]=En}}}return ne.makeTensorInfo([ve,me,ge,Ee],"float32",Se)}const resizeBilinearConfig$1={kernelName:ResizeBilinear,backendName:"cpu",kernelFunc:resizeBilinear$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinearGrad$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{images:ce,dy:le}=ee,{alignCorners:ue}=ae;assertNotComplex$1([le,ce],"resizeBilinearGrad");const he=computeStrides(ce.shape),[fe,me,ge,ve]=ce.shape,[,ye,be]=le.shape,Ee=new Float32Array(fe*me*ge*ve),Ce=[ue&&ye>1?me-1:me,ue&&be>1?ge-1:ge],Se=[ue&&ye>1?ye-1:ye,ue&&be>1?be-1:be],Te=Ce[0]/Se[0],ke=Ce[1]/Se[1],Ne=ne.data.get(le.dataId).values;let Fe=0;for(let De=0;De<fe;De++){const Oe=De*he[0];for(let Re=0;Re<ye;Re++){const Be=Re*Te,Le=Math.floor(Be),je=Math.min(Math.ceil(Be),me-1),Ge=Oe+Le*he[1],qe=Oe+je*he[1],Ue=Be-Le,ze=1-Ue;for(let He=0;He<be;He++){const Ye=He*ke,Xe=Math.floor(Ye),We=Math.min(Math.ceil(Ye),ge-1),Ze=Ye-Xe,Vt=1-Ze,Qt=Ge+Xe*he[2],Yt=Ge+We*he[2],Jt=qe+Xe*he[2],rn=qe+We*he[2],nn=ze*Vt,fn=ze*Ze,an=Ue*Vt,un=Ue*Ze;for(let bn=0;bn<ve;bn++){const En=Ne[Fe++];Ee[Qt+bn]+=En*nn,Ee[Yt+bn]+=En*fn,Ee[Jt+bn]+=En*an,Ee[rn+bn]+=En*un}}}}return ne.makeTensorInfo([fe,ge,me,ve],"float32",Ee)}const resizeBilinearGradConfig$1={kernelName:ResizeBilinearGrad,backendName:"cpu",kernelFunc:resizeBilinearGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighbor$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{images:ce}=ee,{alignCorners:le,halfPixelCenters:ue,size:he}=ae;assertNotComplex$1(ce,"resizeNearestNeighbor");const fe=computeStrides(ce.shape),[me,ge]=he,[ve,ye,be,Ee]=ce.shape,Ce=ne.data.get(ce.dataId).values,Se=new Float32Array(ve*me*ge*Ee),Te=[le&&me>1?ye-1:ye,le&&ge>1?be-1:be],ke=[le&&me>1?me-1:me,le&&ge>1?ge-1:ge],Ne=Te[0]/ke[0],Fe=Te[1]/ke[1];let De=0;for(let Oe=0;Oe<ve;Oe++){const Re=Oe*fe[0];for(let Be=0;Be<me;Be++){const Le=ue?Ne*(Be+.5):Ne*Be;let je=Math.min(ye-1,le?Math.round(Le):Math.floor(Le));ue&&(je=Math.max(0,je));const Ge=Re+je*fe[1];for(let qe=0;qe<ge;qe++){const Ue=ue?Fe*(qe+.5):Fe*qe;let ze=Math.min(be-1,le?Math.round(Ue):Math.floor(Ue));ue&&(ze=Math.max(0,ze));const He=Ge+ze*fe[2];for(let Ye=0;Ye<Ee;Ye++){const Xe=Ce[He+Ye];Se[De++]=Xe}}}}return ne.makeTensorInfo([ve,me,ge,Ee],ce.dtype,Se)}const resizeNearestNeighborConfig$1={kernelName:ResizeNearestNeighbor,backendName:"cpu",kernelFunc:resizeNearestNeighbor$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighborGrad$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{images:ce,dy:le}=ee,{alignCorners:ue}=ae;assertNotComplex$1([le,ce],"resizeNearestNeighborGrad");const he=computeStrides(ce.shape),fe=computeStrides(le.shape),[me,ge,ve,ye]=ce.shape,[,be,Ee]=le.shape,Ce=new Float32Array(me*ge*ve*ye),Se=ne.data.get(le.dataId).values,Te=[ue&&be>1?ge-1:ge,ue&&Ee>1?ve-1:ve],ke=[ue&&be>1?be-1:be,ue&&Ee>1?Ee-1:Ee],Ne=Te[0]/ke[0],Fe=Te[1]/ke[1],De=1/Ne,Oe=1/Fe,Re=Math.ceil(De)*2+2,Be=Math.ceil(Oe)*2+2;for(let Le=0;Le<me;Le++){const je=Le*he[0];for(let Ge=0;Ge<ge;Ge++){const qe=je+Ge*he[1],Ue=Math.floor(Ge*De),ze=Math.floor(Ue-Re/2);for(let He=0;He<ve;He++){const Ye=qe+He*he[2],Xe=Math.floor(He*Oe),We=Math.floor(Xe-Be/2);for(let Ze=0;Ze<ye;Ze++){let Vt=0;for(let Qt=0;Qt<Re;Qt++){const Yt=Qt+ze;if(Yt<0||Yt>=be)continue;const Jt=je+Yt*fe[1],rn=Yt*Ne,nn=Math.min(ge-1,ue?Math.round(rn):Math.floor(rn));if(Ge===nn)for(let fn=0;fn<Be;fn++){const an=fn+We;if(an<0||an>=Ee)continue;const un=Jt+an*fe[2],bn=an*Fe,En=Math.min(ve-1,ue?Math.round(bn):Math.floor(bn));He===En&&(Vt+=Se[un+Ze])}}Ce[Ye+Ze]=Vt}}}}return ne.makeTensorInfo(ce.shape,ce.dtype,Ce)}const resizeNearestNeighborGradConfig$1={kernelName:ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:resizeNearestNeighborGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{dims:le}=ae;assertNotComplex$1(ce,"reverse");const ue=ce.shape.length,he=parseAxisParam(le,ce.shape);if(ue===0)return identity$4({inputs:{x:ce},backend:ne});const fe=new TensorBuffer(ce.shape,ce.dtype),me=ne.bufferSync(ce);for(let ge=0;ge<fe.size;ge++){const ve=fe.indexToLoc(ge),ye=ve.slice();he.forEach(be=>ye[be]=ce.shape[be]-1-ye[be]),fe.set(me.get(...ye),...ve)}return ne.makeTensorInfo(fe.shape,fe.dtype,fe.values)}const reverseConfig$1={kernelName:Reverse,backendName:"cpu",kernelFunc:reverse$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rotateWithOffsetConfig$1={kernelName:RotateWithOffset,backendName:"cpu",kernelFunc:({inputs:re,attrs:ee,backend:ne})=>{const{image:ae}=re,{radians:ce,fillValue:le,center:ue}=ee,he=ne,fe=getTypedArrayFromDType(ae.dtype,sizeFromShape(ae.shape)),[me,ge,ve,ye]=ae.shape,[be,Ee]=getImageCenter(ue,ge,ve),Ce=255,Se=Math.sin(ce),Te=Math.cos(ce),ke=he.data.get(ae.dataId).values;for(let Fe=0;Fe<me;Fe++){const De=Fe*ve*ge*ye;for(let Oe=0;Oe<ge;Oe++){const Re=Oe*(ve*ye);for(let Be=0;Be<ve;Be++){const Le=Be*ye;for(let je=0;je<ye;je++){const Ge=[me,Oe,Be,je],qe=Ge[2],Ue=Ge[1];let ze=(qe-be)*Te-(Ue-Ee)*Se,He=(qe-be)*Se+(Ue-Ee)*Te;ze=Math.round(ze+be),He=Math.round(He+Ee);let Ye=le;if(typeof le!="number"&&(je===3?Ye=Ce:Ye=le[je]),ze>=0&&ze<ve&&He>=0&&He<ge){const We=He*(ve*ye),Ze=ze*ye,Vt=De+We+Ze+je;Ye=ke[Vt]}const Xe=De+Re+Le+je;fe[Xe]=Ye}}}}return{dataId:he.write(fe,ae.shape,ae.dtype),shape:ae.shape,dtype:ae.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const round$2=unaryKernelFunc$1(Round,re=>{const ee=Math.floor(re);return re-ee<.5?Math.floor(re):re-ee>.5?Math.ceil(re):ee%2===0?ee:ee+1}),roundConfig$1={kernelName:Round,backendName:"cpu",kernelFunc:round$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scatterImpl(re,ee,ne,ae,ce,le,ue,he,fe,me){const ge=[ae/ce,ce],ve=re.values,ye=ee.values;if(ae===0)return buffer$1(ne,ee.dtype);const be=buffer$1(ge,ee.dtype);be.values.fill(fe);for(let Ee=0;Ee<le;Ee++){const Ce=[];let Se=0;for(let Te=0;Te<ue;Te++){const ke=ve[Ee*ue+Te];Ce.push(ke),Se+=ke*he[Te]}if(Se<0||Se>=ae/ce)throw new Error(`Invalid indices: ${Ce} does not index into ${ne}`);for(let Te=0;Te<ce;Te++)me?be.values[Se*ce+Te]+=ye[Ee*ce+Te]:be.values[Se*ce+Te]=ee.rank===0?ye[0]:ye[Ee*ce+Te]}return be}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scatterNd$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{indices:ce,updates:le}=ee,{shape:ue}=ae,{sliceRank:he,numUpdates:fe,sliceSize:me,strides:ge,outputSize:ve}=calculateShapes(le,ce,ue),ye=!0,be=ne.bufferSync(ce),Ee=ne.bufferSync(le),Ce=scatterImpl(be,Ee,ue,ve,me,fe,he,ge,0,ye);return ne.makeTensorInfo(ue,Ce.dtype,Ce.values)}const scatterNdConfig$1={kernelName:ScatterNd,backendName:"cpu",kernelFunc:scatterNd$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function select$1(re){const{inputs:ee,backend:ne}=re,{condition:ae,t:ce,e:le}=ee;assertNotComplex$1([ae,ce,le],"select");const ue=ae.shape.length,he=ne.data.get(ae.dataId).values,fe=ne.data.get(ce.dataId).values,me=ne.data.get(le.dataId).values,ge=upcastType(ce.dtype,le.dtype),ve=makeZerosTypedArray(sizeFromShape(ce.shape),ge);let ye=0;const be=ue===0||ue>1||ce.shape.length===1?1:sizeFromShape(ce.shape.slice(1));for(let Ee=0;Ee<he.length;Ee++)for(let Ce=0;Ce<be;Ce++)he[Ee]===1?ve[ye++]=fe[Ee]:ve[ye++]=me[Ee];return ne.makeTensorInfo(ce.shape,ge,ve)}const selectConfig$1={kernelName:Select$2,backendName:"cpu",kernelFunc:select$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const scaleAlpha=SELU_SCALEALPHA,scale$1=SELU_SCALE,selu$1=unaryKernelFunc$1(Selu$1,re=>re>=0?scale$1*re:scaleAlpha*(Math.exp(re)-1)),seluConfig$1={kernelName:Selu$1,backendName:"cpu",kernelFunc:selu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sigmoid$1=unaryKernelFunc$1(Sigmoid$1,re=>1/(1+Math.exp(-re))),sigmoidConfig$1={kernelName:Sigmoid$1,backendName:"cpu",kernelFunc:sigmoid$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sign$2=unaryKernelFunc$1(Sign,re=>re<0?-1:re>0?1:0),signConfig$1={kernelName:Sign,backendName:"cpu",kernelFunc:sign$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sin$1=unaryKernelFunc$1(Sin,re=>Math.sin(re)),sinConfig$1={kernelName:Sin,backendName:"cpu",kernelFunc:sin$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sinh$1=unaryKernelFunc$1(Sinh,re=>Math.sinh(re)),sinhConfig$1={kernelName:Sinh,backendName:"cpu",kernelFunc:sinh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const epsilon=11920928955078125e-23,threshold=Math.log(epsilon)+2,softplus$1=unaryKernelFunc$1(Softplus$1,re=>{const ee=re>-threshold,ne=re<threshold,ae=Math.exp(re);let ce;return ne?ce=ae:ee?ce=re:ce=Math.log(1+ae),ce}),softplusConfig$1={kernelName:Softplus$1,backendName:"cpu",kernelFunc:softplus$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function spaceToBatchND$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{blockShape:le,paddings:ue}=ae;assertNotComplex$1([ce],"spaceToBatchND");const he=sizeFromShape(le),fe=[[0,0]];fe.push(...ue);for(let Oe=1+le.length;Oe<ce.shape.length;++Oe)fe.push([0,0]);const me=padV2Config$1.kernelFunc({inputs:{x:ce},backend:ne,attrs:{paddings:fe,constantValue:0}}),ge=getReshaped(me.shape,le,he,!1),ve=getPermuted(ge.length,le.length,!1),ye=getReshapedPermuted(me.shape,le,he,!1),Ce=reshape$1({inputs:{x:me},backend:ne,attrs:{shape:ge}}),ke=transpose$1({inputs:{x:Ce},backend:ne,attrs:{perm:ve}}),De=reshape$1({inputs:{x:ke},backend:ne,attrs:{shape:ye}});return ne.disposeIntermediateTensorInfo(me),ne.disposeIntermediateTensorInfo(Ce),ne.disposeIntermediateTensorInfo(ke),De}const spaceToBatchNDConfig$1={kernelName:SpaceToBatchND,backendName:"cpu",kernelFunc:spaceToBatchND$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseToDense$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{sparseIndices:ce,sparseValues:le,defaultValue:ue}=ee,{outputShape:he}=ae,{sliceRank:fe,numUpdates:me,sliceSize:ge,strides:ve,outputSize:ye}=calculateShapes(le,ce,he),be=!1,Ee=ne.bufferSync(ce),Ce=ne.bufferSync(le),Se=ne.data.get(ue.dataId).values[0],Te=scatterImpl(Ee,Ce,he,ye,ge,me,fe,ve,Se,be);return ne.makeTensorInfo(he,Te.dtype,Te.values)}const sparseToDenseConfig$1={kernelName:SparseToDense,backendName:"cpu",kernelFunc:sparseToDense$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function splitV$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{numOrSizeSplits:le,axis:ue}=ae,he=parseAxisParam(ue,ce.shape)[0],fe=prepareSplitSize(ce,le,he),me=new Array(ce.shape.length).fill(0),ge=ce.shape.slice();return fe.map(ve=>{const ye=[...ge];ye[he]=ve;const be=slice$3({inputs:{x:ce},backend:ne,attrs:{begin:me,size:ye}});return me[he]+=ve,be})}const splitVConfig$1={kernelName:SplitV,backendName:"cpu",kernelFunc:splitV$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sqrt$1=unaryKernelFunc$1(Sqrt,re=>Math.sqrt(re)),sqrtConfig$1={kernelName:Sqrt,backendName:"cpu",kernelFunc:sqrt$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squareConfig$1={kernelName:Square,backendName:"cpu",kernelFunc:({inputs:re,backend:ee})=>{const{x:ne}=re,ae=ee;assertNotComplex$1(ne,"square");const ce=ae.data.get(ne.dataId).values,le=new Float32Array(ce.length);for(let he=0;he<ce.length;++he){const fe=ce[he];le[he]=fe*fe}return{dataId:ae.write(le,ne.shape,ne.dtype),shape:ne.shape,dtype:ne.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const step$1=unaryKernelFunc$1(Step,(re,ee)=>{const ne=ee;return isNaN(re)?NaN:re>0?1:ne.alpha}),stepConfig$1={kernelName:Step,backendName:"cpu",kernelFunc:step$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSlice$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{begin:le,end:ue,strides:he,beginMask:fe,endMask:me,ellipsisMask:ge,newAxisMask:ve,shrinkAxisMask:ye}=ae;assertNotComplex$1(ce,"stridedSlice");const{nonStrided:be,$begin:Ee,$strides:Ce,size:Se,newShape:Te,outShape:ke}=sliceInfo(ce.shape,le,ue,he,fe,me,ge,ve,ye),Ne=reshape$1({inputs:{x:ce},backend:ne,attrs:{shape:Te}});let Fe;if(be){const Oe=slice$3({inputs:{x:Ne},backend:ne,attrs:{begin:Ee,size:Se}});Fe=reshape$1({inputs:{x:Oe},backend:ne,attrs:{shape:ke}}),ne.disposeIntermediateTensorInfo(Oe)}else if(ke.some(Oe=>Oe===0))Fe=ne.makeTensorInfo(ke,ce.dtype,[]);else{const Oe=ne.bufferSync(Ne),Re=stridedSliceImpl(ke,Oe,Ce,Ee);Fe=ne.makeTensorInfo(Re.shape,Re.dtype,Re.values)}const De=reshape$1({inputs:{x:Fe},backend:ne,attrs:{shape:ke}});return ne.disposeIntermediateTensorInfo(Ne),ne.disposeIntermediateTensorInfo(Fe),De}const stridedSliceConfig$1={kernelName:StridedSlice,backendName:"cpu",kernelFunc:stridedSlice$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tan$1=unaryKernelFunc$1(Tan,re=>Math.tan(re)),tanConfig$1={kernelName:Tan,backendName:"cpu",kernelFunc:tan$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tanh$1=unaryKernelFunc$1(Tanh$1,re=>Math.tanh(re)),tanhConfig$1={kernelName:Tanh$1,backendName:"cpu",kernelFunc:tanh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tile$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{reps:le}=ae;assertNotComplex$1(ce,"tile");const ue=tileImpl(ne.bufferSync(ce),le);return ne.makeTensorInfo(ue.shape,ue.dtype,ue.values)}const tileConfig$1={kernelName:Tile,backendName:"cpu",kernelFunc:tile$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function topK$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{k:le,sorted:ue}=ae;assertNotComplex$1(ce,"topk");const he=ne.data.get(ce.dataId).values,[fe,me]=topKImpl(he,ce.shape,ce.dtype,le);return[ne.makeTensorInfo(fe.shape,fe.dtype,fe.values),ne.makeTensorInfo(me.shape,me.dtype,me.values)]}const topKConfig$1={kernelName:TopK,backendName:"cpu",kernelFunc:topK$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unique$2(re){const{inputs:ee,attrs:ne,backend:ae}=re,{axis:ce}=ne,{x:le}=ee;assertNotComplex$1(le,"unique");const ue=ae.data.get(le.dataId).values,{outputValues:he,outputShape:fe,indices:me}=uniqueImpl(ue,ce,le.shape,le.dtype);return[ae.makeTensorInfo(fe,le.dtype,he),ae.makeTensorInfo([me.length],"int32",me)]}const uniqueConfig$1={kernelName:Unique,backendName:"cpu",kernelFunc:unique$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unpack$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{value:ce}=ee;let{axis:le}=ae;le<0&&(le+=ce.shape.length);const ue=ce.shape.length,he=ce.shape[le],fe=new Array(ue-1);let me=0;for(let be=0;be<ue;be++)be!==le&&(fe[me++]=ce.shape[be]);const ge=new Array(ue).fill(0),ve=ce.shape.slice();ve[le]=1;const ye=new Array(he);for(let be=0;be<ye.length;be++){ge[le]=be;const Ee=slice$3({inputs:{x:ce},backend:ne,attrs:{begin:ge,size:ve}});ye[be]=reshape$1({inputs:{x:Ee},backend:ne,attrs:{shape:fe}}),ne.disposeIntermediateTensorInfo(Ee)}return ye}const unpackConfig$1={kernelName:Unpack,backendName:"cpu",kernelFunc:unpack$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unsortedSegmentSum$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,segmentIds:le}=ee,{numSegments:ue}=ae;assertNotComplex$1(ce,"unsortedSegmentSum");const he=ce.shape.length,fe=le.shape.length,me=[],ge=[],ve=he-fe;let ye=le;for(let Ee=0;Ee<ve;++Ee){const Ce=expandDims$1({inputs:{input:ye},backend:ne,attrs:{dim:Ee+1}});ye=Ce,ge.push(Ce)}for(let Ee=0;Ee<ue;++Ee){const Ce=createScalarValue(Ee,"int32"),Se=ne.makeTensorInfo([],"int32",Ce),Te=equal$1({inputs:{a:Se,b:ye},backend:ne}),ke=cast$1({inputs:{x:Te},backend:ne,attrs:{dtype:"float32"}}),Ne=multiply$2({inputs:{a:ke,b:ce},backend:ne}),Fe=sum$1({inputs:{x:Ne},backend:ne,attrs:{axis:0,keepDims:!1}});me.push(Fe),ge.push(Se),ge.push(Te),ge.push(ke),ge.push(Ne),ge.push(Fe)}const be=pack$1({inputs:me,backend:ne,attrs:{axis:0}});return ge.forEach(Ee=>ne.disposeIntermediateTensorInfo(Ee)),be}const unsortedSegmentSumConfig$1={kernelName:UnsortedSegmentSum,backendName:"cpu",kernelFunc:unsortedSegmentSum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kernelConfigs$1=[_fusedMatMulConfig$1,absConfig$1,acosConfig$1,acoshConfig$1,addConfig$1,addNConfig$1,allConfig$1,anyConfig$1,argMaxConfig$1,argMinConfig$1,asinConfig$1,asinhConfig$1,atanConfig$1,atan2Config$1,atanhConfig$1,avgPoolConfig$1,avgPool3DConfig$1,avgPool3DGradConfig,avgPoolGradConfig$1,batchMatMulConfig$1,batchNormConfig$1,batchToSpaceNDConfig$1,bincountConfig$1,castConfig$1,ceilConfig$1,clipConfig,complexConfig$1,complexAbsConfig$1,concatConfig$1,conv2DBackpropFilterConfig$1,conv2DBackpropInputConfig$1,conv2DConfig$1,conv3DBackpropFilterV2Config$1,conv3DBackpropInputV2Config,conv3DConfig$1,cosConfig$1,coshConfig$1,cropAndResizeConfig$1,cumsumConfig$1,denseBincountConfig$1,depthToSpaceConfig$1,depthwiseConv2dNativeConfig$1,depthwiseConv2dNativeBackpropFilterConfig$1,depthwiseConv2dNativeBackpropInputConfig$1,diagConfig$1,dilation2dConfig,dilation2dBackpropInputConfig,dilation2dBackpropFilterConfig,realDivConfig$1,eluConfig$1,eluGradConfig$1,equalConfig$1,erfConfig$1,expConfig$1,expandDimsConfig$1,expm1Config$1,fftConfig$1,fillConfig$1,flipLeftRightConfig$1,floorConfig$1,floorDivConfig$1,fusedConv2DConfig$1,fusedDepthwiseConv2DConfig$1,gatherNdConfig$1,gatherV2Config$1,greaterConfig$1,greaterEqualConfig$1,identityConfig$1,ifftConfig$1,imagConfig$1,isFiniteConfig$1,isInfConfig$1,isNaNConfig$1,leakyReluConfig$1,lessConfig$1,lessEqualConfig$1,linSpaceConfig$1,logConfig$1,log1pConfig$1,logicalAndConfig$1,logicalNotConfig$1,logicalOrConfig$1,lRNConfig,lRNGradConfig,maximumConfig$1,maxPoolConfig$1,maxPool3DConfig$1,maxPool3DGradConfig,maxPoolGradConfig$1,maxPoolWithArgmaxConfig$1,maxConfig$1,meanConfig$1,minConfig$1,minimumConfig$1,mirrorPadConfig$1,modConfig$1,multinomialConfig$1,multiplyConfig$1,negConfig$1,nonMaxSuppressionV3Config$1,nonMaxSuppressionV4Config$1,nonMaxSuppressionV5Config$1,notEqualConfig$1,oneHotConfig$1,onesLikeConfig$1,packConfig$1,padV2Config$1,powConfig$1,preluConfig$1,prodConfig$1,rangeConfig$1,realConfig$1,reciprocalConfig$1,reluConfig$1,relu6Config$1,reshapeConfig$1,resizeBilinearConfig$1,resizeBilinearGradConfig$1,resizeNearestNeighborConfig$1,resizeNearestNeighborGradConfig$1,reverseConfig$1,rotateWithOffsetConfig$1,roundConfig$1,rsqrtConfig$1,scatterNdConfig$1,selectConfig$1,seluConfig$1,sigmoidConfig$1,signConfig$1,sinConfig$1,sinhConfig$1,sliceConfig$1,softmaxConfig$1,softplusConfig$1,spaceToBatchNDConfig$1,sparseToDenseConfig$1,splitVConfig$1,sqrtConfig$1,squareConfig$1,squaredDifferenceConfig$1,stepConfig$1,stridedSliceConfig$1,subConfig$1,sumConfig$1,tanConfig$1,tanhConfig$1,tileConfig$1,topKConfig$1,transposeConfig$1,uniqueConfig$1,unpackConfig$1,unsortedSegmentSumConfig$1,zerosLikeConfig$1];for(const re of kernelConfigs$1)registerKernel(re);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const contexts={},WEBGL_ATTRIBUTES={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function setWebGLContext(re,ee){contexts[re]=ee}function getWebGLContext(re){if(!(re in contexts)){const ne=getWebGLRenderingContext(re);if(ne!==null)contexts[re]=ne;else return console.log("Could not get context for WebGL version",re),null}const ee=contexts[re];return ee.isContextLost()?(delete contexts[re],getWebGLContext(re)):(ee.disable(ee.DEPTH_TEST),ee.disable(ee.STENCIL_TEST),ee.disable(ee.BLEND),ee.disable(ee.DITHER),ee.disable(ee.POLYGON_OFFSET_FILL),ee.disable(ee.SAMPLE_COVERAGE),ee.enable(ee.SCISSOR_TEST),ee.enable(ee.CULL_FACE),ee.cullFace(ee.BACK),contexts[re])}function createCanvas(re){if(typeof OffscreenCanvas<"u"&&re===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function getWebGLRenderingContext(re){if(re!==1&&re!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const ee=createCanvas(re);return ee.addEventListener("webglcontextlost",ne=>{ne.preventDefault(),delete contexts[re]},!1),re===1?ee.getContext("webgl",WEBGL_ATTRIBUTES)||ee.getContext("experimental-webgl",WEBGL_ATTRIBUTES):ee.getContext("webgl2",WEBGL_ATTRIBUTES)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var PackingScheme;(function(re){re[re.DENSE=0]="DENSE",re[re.SHARED_BATCH=1]="SHARED_BATCH"})(PackingScheme||(PackingScheme={}));var TextureUsage;(function(re){re[re.RENDER=0]="RENDER",re[re.UPLOAD=1]="UPLOAD",re[re.PIXELS=2]="PIXELS",re[re.DOWNLOAD=3]="DOWNLOAD"})(TextureUsage||(TextureUsage={}));var PhysicalTextureType;(function(re){re[re.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",re[re.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",re[re.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",re[re.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",re[re.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(PhysicalTextureType||(PhysicalTextureType={}));function getUnpackedMatrixTextureShapeWidthHeight(re,ee){return[ee,re]}function getUnpackedArraySizeFromMatrixSize(re,ee){return re*ee}function getDenseTexShape(re){const ee=sizeFromShape(re),ne=Math.ceil(ee/4);return sizeToSquarishShape(ne)}function getPackedMatrixTextureShapeWidthHeight(re,ee){return[Math.max(1,Math.ceil(ee/2)),Math.max(1,Math.ceil(re/2))]}function getPackedRGBAArraySizeFromMatrixShape(re,ee){const[ne,ae]=getPackedMatrixTextureShapeWidthHeight(re,ee);return ne*ae*4}function getTextureConfig(re,ee){const ne=re;let ae,ce,le,ue,he,fe,me,ge,ve,ye;return env().getNumber("WEBGL_VERSION")===2?(ae=ne.R32F,ce=ne.R16F,le=ne.RGBA16F,ue=ne.RGBA32F,he=ne.RED,me=4,ge=1,ve=ne.HALF_FLOAT,ye=ne.FLOAT):(ae=re.RGBA,ce=re.RGBA,le=re.RGBA,ue=ne.RGBA,he=re.RGBA,me=4,ge=4,ve=ee!=null?ee.HALF_FLOAT_OES:null,ye=re.FLOAT),fe=re.RGBA,{internalFormatFloat:ae,internalFormatHalfFloat:ce,internalFormatPackedHalfFloat:le,internalFormatPackedFloat:ue,textureFormatFloat:he,downloadTextureFormat:fe,downloadUnpackNumChannels:me,defaultNumChannels:ge,textureTypeHalfFloat:ve,textureTypeFloat:ye}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function callAndCheck(re,ee){const ne=ee();return env().getBool("DEBUG")&&checkWebGLError(re),ne}function checkWebGLError(re){const ee=re.getError();if(ee!==re.NO_ERROR)throw new Error("WebGL Error: "+getWebGLErrorMessage(re,ee))}const MIN_FLOAT16=596e-10,MAX_FLOAT16=65504;function canBeRepresented(re){return!!(env().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||re===0||MIN_FLOAT16<Math.abs(re)&&Math.abs(re)<MAX_FLOAT16)}function getWebGLErrorMessage(re,ee){switch(ee){case re.NO_ERROR:return"NO_ERROR";case re.INVALID_ENUM:return"INVALID_ENUM";case re.INVALID_VALUE:return"INVALID_VALUE";case re.INVALID_OPERATION:return"INVALID_OPERATION";case re.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case re.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case re.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${ee}`}}function getExtensionOrThrow(re,ee){return throwIfNull(re,()=>re.getExtension(ee),'Extension "'+ee+'" not supported on this browser.')}function createVertexShader$1(re,ee){const ne=throwIfNull(re,()=>re.createShader(re.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(callAndCheck(re,()=>re.shaderSource(ne,ee)),callAndCheck(re,()=>re.compileShader(ne)),re.getShaderParameter(ne,re.COMPILE_STATUS)===!1)throw console.log(re.getShaderInfoLog(ne)),new Error("Failed to compile vertex shader.");return ne}function createFragmentShader(re,ee){const ne=throwIfNull(re,()=>re.createShader(re.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(callAndCheck(re,()=>re.shaderSource(ne,ee)),callAndCheck(re,()=>re.compileShader(ne)),re.getShaderParameter(ne,re.COMPILE_STATUS)===!1)throw logShaderSourceAndInfoLog(ee,re.getShaderInfoLog(ne)),new Error("Failed to compile fragment shader.");return ne}const lineNumberRegex=/ERROR: [0-9]+:([0-9]+):/g;function logShaderSourceAndInfoLog(re,ee){const ne=lineNumberRegex.exec(ee);if(ne==null){console.log(`Couldn't parse line number in error: ${ee}`),console.log(re);return}const ae=+ne[1],ce=re.split(`
`),le=ce.length.toString().length+2,ue=ce.map((ve,ye)=>rightPad((ye+1).toString(),le)+ve);let he=0;for(let ve=0;ve<ue.length;ve++)he=Math.max(ue[ve].length,he);const fe=ue.slice(0,ae-1),me=ue.slice(ae-1,ae),ge=ue.slice(ae);console.log(fe.join(`
`)),console.log(ee.split(`
`)[0]),console.log(`%c ${rightPad(me[0],he)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(ge.join(`
`))}function createProgram(re){return throwIfNull(re,()=>re.createProgram(),"Unable to create WebGLProgram.")}function linkProgram(re,ee){if(callAndCheck(re,()=>re.linkProgram(ee)),re.getProgramParameter(ee,re.LINK_STATUS)===!1)throw console.log(re.getProgramInfoLog(ee)),new Error("Failed to link vertex and fragment shaders.")}function validateProgram(re,ee){if(callAndCheck(re,()=>re.validateProgram(ee)),re.getProgramParameter(ee,re.VALIDATE_STATUS)===!1)throw console.log(re.getProgramInfoLog(ee)),new Error("Shader program validation failed.")}function createStaticVertexBuffer(re,ee){const ne=throwIfNull(re,()=>re.createBuffer(),"Unable to create WebGLBuffer");return callAndCheck(re,()=>re.bindBuffer(re.ARRAY_BUFFER,ne)),callAndCheck(re,()=>re.bufferData(re.ARRAY_BUFFER,ee,re.STATIC_DRAW)),ne}function createStaticIndexBuffer(re,ee){const ne=throwIfNull(re,()=>re.createBuffer(),"Unable to create WebGLBuffer");return callAndCheck(re,()=>re.bindBuffer(re.ELEMENT_ARRAY_BUFFER,ne)),callAndCheck(re,()=>re.bufferData(re.ELEMENT_ARRAY_BUFFER,ee,re.STATIC_DRAW)),ne}function createTexture(re){return throwIfNull(re,()=>re.createTexture(),"Unable to create WebGLTexture.")}function validateTextureSize(re,ee){const ne=env().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(re<=0||ee<=0){const ae=`[${re}x${ee}]`;throw new Error("Requested texture size "+ae+" is invalid.")}if(re>ne||ee>ne){const ae=`[${re}x${ee}]`,ce=`[${ne}x${ne}]`;throw new Error("Requested texture size "+ae+" greater than WebGL maximum on this browser / GPU "+ce+".")}}function createFramebuffer(re){return throwIfNull(re,()=>re.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function bindVertexBufferToProgramAttribute(re,ee,ne,ae,ce,le,ue){const he=re.getAttribLocation(ee,ne);return he===-1?!1:(callAndCheck(re,()=>re.bindBuffer(re.ARRAY_BUFFER,ae)),callAndCheck(re,()=>re.vertexAttribPointer(he,ce,re.FLOAT,!1,le,ue)),callAndCheck(re,()=>re.enableVertexAttribArray(he)),!0)}function bindTextureUnit(re,ee,ne){validateTextureUnit(re,ne),callAndCheck(re,()=>re.activeTexture(re.TEXTURE0+ne)),callAndCheck(re,()=>re.bindTexture(re.TEXTURE_2D,ee))}function getProgramUniformLocationOrThrow(re,ee,ne){return throwIfNull(re,()=>re.getUniformLocation(ee,ne),'uniform "'+ne+'" not present in program.')}function getProgramUniformLocation(re,ee,ne){return re.getUniformLocation(ee,ne)}function bindTextureToProgramUniformSampler(re,ee,ne,ae){callAndCheck(re,()=>bindTextureUnit(re,ee,ae)),callAndCheck(re,()=>re.uniform1i(ne,ae))}function bindColorTextureToFramebuffer(re,ee,ne){callAndCheck(re,()=>re.bindFramebuffer(re.FRAMEBUFFER,ne)),callAndCheck(re,()=>re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,ee,0))}function unbindColorTextureFromFramebuffer(re,ee){callAndCheck(re,()=>re.bindFramebuffer(re.FRAMEBUFFER,ee)),callAndCheck(re,()=>re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,null,0))}function validateFramebuffer(re){const ee=re.checkFramebufferStatus(re.FRAMEBUFFER);if(ee!==re.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+getFramebufferErrorMessage(re,ee))}function getFramebufferErrorMessage(re,ee){switch(ee){case re.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case re.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case re.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case re.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${ee}`}}function throwIfNull(re,ee,ne){const ae=callAndCheck(re,()=>ee());if(ae==null)throw new Error(ne);return ae}function validateTextureUnit(re,ee){const ne=re.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,ae=ee+re.TEXTURE0;if(ae<re.TEXTURE0||ae>ne){const ce=`[gl.TEXTURE0, gl.TEXTURE${ne}]`;throw new Error(`textureUnit must be in ${ce}.`)}}function getBatchDim(re,ee=2){return sizeFromShape(re.slice(0,re.length-ee))}function getRowsCols(re){if(re.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[re.length>1?re[re.length-2]:1,re[re.length-1]]}function getShapeAs3D(re){let ee=[1,1,1];return re.length===0||re.length===1&&re[0]===1||(ee=[getBatchDim(re),...getRowsCols(re)]),ee}function getTextureShapeFromLogicalShape(re,ee=!1){let ne=env().getNumber("WEBGL_MAX_TEXTURE_SIZE");ee&&(ne=ne*2,re=re.map((ce,le)=>le>=re.length-2?nearestLargerEven(re[le]):re[le]),re.length===1&&(re=[2,re[0]])),re.length!==2&&(re=squeezeShape(re).newShape);let ae=sizeFromShape(re);if(re.length<=1&&ae<=ne)return[1,ae];if(re.length===2&&re[0]<=ne&&re[1]<=ne)return re;if(re.length===3&&re[0]*re[1]<=ne&&re[2]<=ne)return[re[0]*re[1],re[2]];if(re.length===3&&re[0]<=ne&&re[1]*re[2]<=ne)return[re[0],re[1]*re[2]];if(re.length===4&&re[0]*re[1]*re[2]<=ne&&re[3]<=ne)return[re[0]*re[1]*re[2],re[3]];if(re.length===4&&re[0]<=ne&&re[1]*re[2]*re[3]<=ne)return[re[0],re[1]*re[2]*re[3]];if(ee){const ce=getBatchDim(re);let le=2,ue=2;return re.length&&([le,ue]=getRowsCols(re)),ae=ce*(le/2)*(ue/2),sizeToSquarishShape(ae).map(he=>he*2)}return sizeToSquarishShape(ae)}function isEven(re){return re%2===0}function isReshapeFree(re,ee){if(re=re.slice(-2),ee=ee.slice(-2),arraysEqual(re,ee)||!re.length||!ee.length||re[0]===0||re[1]===0||ee[0]===0||ee[1]===0)return!0;if(re.length!==ee.length){const ne=re.slice(-1)[0],ae=ee.slice(-1)[0];if(ne===ae||isEven(ne)&&isEven(ae)&&(re[0]===1||ee[0]===1))return!0}return re[1]===ee[1]&&isEven(re[0])&&isEven(ee[0])}let MAX_TEXTURE_SIZE,MAX_TEXTURES_IN_SHADER;function getWebGLMaxTextureSize(re){if(MAX_TEXTURE_SIZE==null){const ee=getWebGLContext(re);MAX_TEXTURE_SIZE=ee.getParameter(ee.MAX_TEXTURE_SIZE)}return MAX_TEXTURE_SIZE}function getMaxTexturesInShader(re){if(MAX_TEXTURES_IN_SHADER==null){const ee=getWebGLContext(re);MAX_TEXTURES_IN_SHADER=ee.getParameter(ee.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,MAX_TEXTURES_IN_SHADER)}function getWebGLDisjointQueryTimerVersion(re){if(re===0)return 0;let ee;const ne=getWebGLContext(re);return hasExtension(ne,"EXT_disjoint_timer_query_webgl2")&&re===2?ee=2:hasExtension(ne,"EXT_disjoint_timer_query")?ee=1:ee=0,ee}function hasExtension(re,ee){return re.getExtension(ee)!=null}function isWebGLVersionEnabled(re){try{if(getWebGLContext(re)!=null)return!0}catch(ee){return console.log("Error when getting WebGL context: ",ee),!1}return!1}function isCapableOfRenderingToFloatTexture(re){if(re===0)return!1;const ee=getWebGLContext(re);if(re===1){if(!hasExtension(ee,"OES_texture_float"))return!1}else if(!hasExtension(ee,"EXT_color_buffer_float"))return!1;return createFloatTextureAndBindToFramebuffer(ee)}function isDownloadFloatTextureEnabled(re){if(re===0)return!1;const ee=getWebGLContext(re);if(re===1){if(!hasExtension(ee,"OES_texture_float")||!hasExtension(ee,"WEBGL_color_buffer_float"))return!1}else{if(hasExtension(ee,"EXT_color_buffer_float"))return createFloatTextureAndBindToFramebuffer(ee);const ae="EXT_color_buffer_half_float";if(hasExtension(ee,ae)){const ce=ee.getExtension(ae);return createHalfFloatTextureAndBindToFramebuffer(ee,ce)}return!1}return createFloatTextureAndBindToFramebuffer(ee)}function createFloatTextureAndBindToFramebuffer(re){const ee=getTextureConfig(re),ne=re.createTexture();re.bindTexture(re.TEXTURE_2D,ne);const ae=1,ce=1;re.texImage2D(re.TEXTURE_2D,0,ee.internalFormatFloat,ae,ce,0,ee.textureFormatFloat,ee.textureTypeFloat,null);const le=re.createFramebuffer();re.bindFramebuffer(re.FRAMEBUFFER,le),re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,ne,0);const ue=re.checkFramebufferStatus(re.FRAMEBUFFER)===re.FRAMEBUFFER_COMPLETE;return re.bindTexture(re.TEXTURE_2D,null),re.bindFramebuffer(re.FRAMEBUFFER,null),re.deleteTexture(ne),re.deleteFramebuffer(le),ue}function createHalfFloatTextureAndBindToFramebuffer(re,ee){const ne=getTextureConfig(re,ee),ae=re.createTexture();re.bindTexture(re.TEXTURE_2D,ae);const ce=1,le=1;re.texImage2D(re.TEXTURE_2D,0,ne.internalFormatHalfFloat,ce,le,0,ne.textureFormatFloat,ne.textureTypeHalfFloat,null);const ue=re.createFramebuffer();re.bindFramebuffer(re.FRAMEBUFFER,ue),re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,ae,0);const he=re.checkFramebufferStatus(re.FRAMEBUFFER)===re.FRAMEBUFFER_COMPLETE;return re.bindTexture(re.TEXTURE_2D,null),re.bindFramebuffer(re.FRAMEBUFFER,null),re.deleteTexture(ae),re.deleteFramebuffer(ue),he}function isWebGLFenceEnabled(re){return re!==2?!1:getWebGLContext(re).fenceSync!=null}function assertNotComplex(re,ee){Array.isArray(re)||(re=[re]),re.forEach(ne=>{ne!=null&&assert$2(ne.dtype!=="complex64",()=>`${ee} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ENV=env();ENV.registerFlag("HAS_WEBGL",()=>ENV.getNumber("WEBGL_VERSION")>0);ENV.registerFlag("WEBGL_VERSION",()=>isWebGLVersionEnabled(2)?2:isWebGLVersionEnabled(1)?1:0);ENV.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);ENV.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>ENV.get("WEBGL_VERSION")===2);ENV.registerFlag("WEBGL_CPU_FORWARD",()=>!0);ENV.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);ENV.registerFlag("WEBGL_PACK",()=>ENV.getBool("HAS_WEBGL"));ENV.registerFlag("WEBGL_PACK_NORMALIZATION",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_CLIP",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1);ENV.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_REDUCE",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_LAZILY_UNPACK",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_CONV_IM2COL",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>getWebGLMaxTextureSize(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>getMaxTexturesInShader(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const re=ENV.getNumber("WEBGL_VERSION");return re===0?0:getWebGLDisjointQueryTimerVersion(re)});ENV.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>ENV.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!isMobile());ENV.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>isCapableOfRenderingToFloatTexture(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>ENV.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:ENV.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));ENV.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>isDownloadFloatTextureEnabled(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_FENCE_API_ENABLED",()=>isWebGLFenceEnabled(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>ENV.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);ENV.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,re=>{if(re<0&&re!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${re}.`)});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getGlslDifferences(){let re,ee,ne,ae,ce,le,ue,he,fe,me;return env().getNumber("WEBGL_VERSION")===2?(re="#version 300 es",ee="in",ne="out",ae="in",ce="texture",le="outputColor",ue="out vec4 outputColor;",he=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,fe="",me=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(re="",ee="attribute",ne="varying",ae="varying",ce="texture2D",le="gl_FragColor",ue="",he=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,fe=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,me=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:re,attribute:ee,varyingVs:ne,varyingFs:ae,texture2D:ce,output:le,defineOutput:ue,defineSpecialNaN:he,defineSpecialInf:fe,defineRound:me}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getLogicalCoordinatesFromFlatIndex(re,ee,ne="index"){const ae=computeStrides(ee);return ae.map((ce,le)=>{const ue=`int ${re[le]} = ${ne} / ${ce}`,he=le===ae.length-1?`int ${re[le+1]} = ${ne} - ${re[le]} * ${ce}`:`index -= ${re[le]} * ${ce}`;return`${ue}; ${he};`}).join("")}function getFlatIndexFrom3D(re){const ee=computeStrides(re).map(ne=>ne.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${ee[0]} + coords.y * ${ee[1]} + coords.z;
  }
`}const ENCODE_FLOAT_SNIPPET=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DecodeMatrixProgram{constructor(ee){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=PackingScheme.DENSE;const ne=getDenseTexShape(ee),ae=getGlslDifferences();this.outputShape=ee,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${getLogicalCoordinatesFromFlatIndex(["r","c","d"],ee)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(${ne[0]}, ${ne[1]}));
        int index = 4 * (resTexRC.x * ${ne[1]} + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${ae.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DecodeMatrixPackedProgram{constructor(ee){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=PackingScheme.DENSE;const ne=getDenseTexShape(ee),ae=getGlslDifferences();this.outputShape=ee,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${getLogicalCoordinatesFromFlatIndex(["r","c","d"],ee)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(${ne[0]}, ${ne[1]}));
        int index = 4 * (resTexRC.x * ${ne[1]} + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${ae.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeFloatProgram{constructor(ee){this.variableNames=["A"],this.outTexUsage=TextureUsage.DOWNLOAD;const ne=getGlslDifferences();this.outputShape=ee,this.userCode=`
      ${ENCODE_FLOAT_SNIPPET}

      void main() {
        float x = getAAtOutCoords();
        ${ne.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeFloatPackedProgram{constructor(ee){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=TextureUsage.DOWNLOAD;const ne=getGlslDifferences();this.outputShape=ee,this.userCode=`
      ${ENCODE_FLOAT_SNIPPET}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${ne.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeMatrixProgram{constructor(ee,ne,ae=!1){this.variableNames=["A"];const ce=getGlslDifferences(),[le,ue]=ne;this.outputShape=ee;let he="result";ae&&(he="floor(result * 255. + 0.5)"),this.userCode=`
      ${getFlatIndexFrom3D(ee)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / ${ue};
        int c = imod(flatIndex, ${ue});
        vec2 uv = (vec2(c, r) + halfCR) / vec2(${ue}.0, ${le}.0);
        vec4 values = ${ce.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${ce.output} = vec4(${he}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeMatrixPackedProgram{constructor(ee,ne,ae=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const ce=getGlslDifferences(),[le,ue]=ne;this.outputShape=ee;let he="",fe="result";ae&&(fe="floor(result * 255. + 0.5)");for(let me=0;me<=1;me++)for(let ge=0;ge<=1;ge++){const ve=me*2+ge;he+=`
          localCoords = coords;
          if(localCoords[2] + ${ge} < ${ee[2]}) {
            localCoords[2] += ${ge};
            if(localCoords[1] + ${me} < ${ee[1]}) {
              localCoords[1] += ${me};

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / ${ue};
              c = imod(flatIndex, ${ue});
              uv = (vec2(c, r) + halfCR) / vec2(${ue}.0, ${le}.0);
              values = ${ce.texture2D}(A, uv);

              if(offset == 0) {
                result[${ve}] = values[0];
              } else if(offset == 1) {
                result[${ve}] = values[1];
              } else if(offset == 2) {
                result[${ve}] = values[2];
              } else {
                result[${ve}] = values[3];
              }
            }
          }
        `}this.userCode=`
      ${getFlatIndexFrom3D(ee)}

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        ${he}

        ${ce.output} = ${fe};
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createVertexShader(re){const ee=getGlslDifferences(),ne=`${ee.version}
    precision highp float;
    ${ee.attribute} vec3 clipSpacePos;
    ${ee.attribute} vec2 uv;
    ${ee.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return createVertexShader$1(re,ne)}function createVertexBuffer(re){const ee=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return createStaticVertexBuffer(re,ee)}function createIndexBuffer(re){const ee=new Uint16Array([0,1,2,2,1,3]);return createStaticIndexBuffer(re,ee)}function createAndConfigureTexture(re,ee,ne,ae,ce,le){validateTextureSize(ee,ne);const ue=createTexture(re),he=re.TEXTURE_2D;return callAndCheck(re,()=>re.bindTexture(he,ue)),callAndCheck(re,()=>re.texParameteri(he,re.TEXTURE_WRAP_S,re.CLAMP_TO_EDGE)),callAndCheck(re,()=>re.texParameteri(he,re.TEXTURE_WRAP_T,re.CLAMP_TO_EDGE)),callAndCheck(re,()=>re.texParameteri(he,re.TEXTURE_MIN_FILTER,re.NEAREST)),callAndCheck(re,()=>re.texParameteri(he,re.TEXTURE_MAG_FILTER,re.NEAREST)),callAndCheck(re,()=>re.texImage2D(he,0,ae,ee,ne,0,ce,le,null)),callAndCheck(re,()=>re.bindTexture(re.TEXTURE_2D,null)),ue}function getInternalFormatForFloat32MatrixTexture(re){return re.internalFormatFloat}function createFloat32MatrixTexture(re,ee,ne,ae){const[ce,le]=getUnpackedMatrixTextureShapeWidthHeight(ee,ne);return createAndConfigureTexture(re,ce,le,getInternalFormatForFloat32MatrixTexture(ae),ae.textureFormatFloat,re.FLOAT)}function getInternalFormatForFloat16MatrixTexture(re){return re.internalFormatHalfFloat}function createFloat16MatrixTexture(re,ee,ne,ae){const[ce,le]=getUnpackedMatrixTextureShapeWidthHeight(ee,ne);return createAndConfigureTexture(re,ce,le,getInternalFormatForFloat16MatrixTexture(ae),ae.textureFormatFloat,ae.textureTypeHalfFloat)}function getInternalFormatForUnsignedBytesMatrixTexture(re){return re.downloadTextureFormat}function createUnsignedBytesMatrixTexture(re,ee,ne,ae){const[ce,le]=getUnpackedMatrixTextureShapeWidthHeight(ee,ne);return createAndConfigureTexture(re,ce,le,getInternalFormatForUnsignedBytesMatrixTexture(ae),re.RGBA,re.UNSIGNED_BYTE)}function getInternalFormatForPackedMatrixTexture(re){return re.internalFormatPackedFloat}function createPackedMatrixTexture(re,ee,ne,ae){const[ce,le]=getPackedMatrixTextureShapeWidthHeight(ee,ne);return createAndConfigureTexture(re,ce,le,getInternalFormatForPackedMatrixTexture(ae),re.RGBA,re.FLOAT)}function getInternalFormatForFloat16PackedMatrixTexture(re){return re.internalFormatPackedHalfFloat}function createFloat16PackedMatrixTexture(re,ee,ne,ae){const[ce,le]=getPackedMatrixTextureShapeWidthHeight(ee,ne);return createAndConfigureTexture(re,ce,le,getInternalFormatForFloat16PackedMatrixTexture(ae),re.RGBA,ae.textureTypeHalfFloat)}function bindVertexProgramAttributeStreams(re,ee,ne){return callAndCheck(re,()=>re.bindBuffer(re.ARRAY_BUFFER,ne)),bindVertexBufferToProgramAttribute(re,ee,"clipSpacePos",ne,3,20,0)&&bindVertexBufferToProgramAttribute(re,ee,"uv",ne,2,20,12)}function uploadDenseMatrixToTexture(re,ee,ne,ae,ce,le){callAndCheck(re,()=>re.bindTexture(re.TEXTURE_2D,ee));let ue,he,fe;ce instanceof Uint8Array?(ue=new Uint8Array(ne*ae*4),he=re.UNSIGNED_BYTE,fe=re.RGBA):(ue=new Float32Array(ne*ae*4),he=re.FLOAT,fe=le.internalFormatPackedFloat),ue.set(ce),callAndCheck(re,()=>re.texImage2D(re.TEXTURE_2D,0,fe,ne,ae,0,re.RGBA,he,ue)),callAndCheck(re,()=>re.bindTexture(re.TEXTURE_2D,null))}function uploadPixelDataToTexture(re,ee,ne){callAndCheck(re,()=>re.bindTexture(re.TEXTURE_2D,ee)),ne.data instanceof Uint8Array?callAndCheck(re,()=>re.texImage2D(re.TEXTURE_2D,0,re.RGBA,ne.width,ne.height,0,re.RGBA,re.UNSIGNED_BYTE,ne.data)):callAndCheck(re,()=>re.texImage2D(re.TEXTURE_2D,0,re.RGBA,re.RGBA,re.UNSIGNED_BYTE,ne)),callAndCheck(re,()=>re.bindTexture(re.TEXTURE_2D,null))}function createBufferFromOutputTexture(re,ee,ne,ae){const ce=re.createBuffer();callAndCheck(re,()=>re.bindBuffer(re.PIXEL_PACK_BUFFER,ce));const he=4*4*ee*ne;return callAndCheck(re,()=>re.bufferData(re.PIXEL_PACK_BUFFER,he,re.STREAM_READ)),callAndCheck(re,()=>re.readPixels(0,0,ne,ee,re.RGBA,re.FLOAT,0)),callAndCheck(re,()=>re.bindBuffer(re.PIXEL_PACK_BUFFER,null)),ce}function downloadFloat32MatrixFromBuffer(re,ee,ne){const ae=re,ce=new Float32Array(ne);return ae.bindBuffer(ae.PIXEL_PACK_BUFFER,ee),ae.getBufferSubData(ae.PIXEL_PACK_BUFFER,0,ce),ae.bindBuffer(ae.PIXEL_PACK_BUFFER,null),ce}function downloadByteEncodedFloatMatrixFromOutputTexture(re,ee,ne,ae){const[ce,le]=getUnpackedMatrixTextureShapeWidthHeight(ee,ne),ue=4,he=new Uint8Array(getUnpackedArraySizeFromMatrixSize(ee*ne,ue));return callAndCheck(re,()=>re.readPixels(0,0,ce,le,ae.downloadTextureFormat,re.UNSIGNED_BYTE,he)),new Float32Array(he.buffer)}function downloadPackedMatrixFromBuffer(re,ee,ne,ae,ce,le,ue,he){const fe=re,me=new Float32Array(getPackedRGBAArraySizeFromMatrixShape(le,ue));return fe.bindBuffer(fe.PIXEL_PACK_BUFFER,ee),fe.getBufferSubData(fe.PIXEL_PACK_BUFFER,0,me),fe.bindBuffer(fe.PIXEL_PACK_BUFFER,null),me}function downloadMatrixFromPackedOutputTexture(re,ee,ne){const ae=new Float32Array(ee*ne*4);return callAndCheck(re,()=>re.readPixels(0,0,ne,ee,re.RGBA,re.FLOAT,ae)),ae}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GPGPUContext{constructor(ee){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const ne=env().getNumber("WEBGL_VERSION");ee!=null?(this.gl=ee,setWebGLContext(ne,ee)):this.gl=getWebGLContext(ne);let ae="WEBGL_color_buffer_float";const ce="EXT_color_buffer_half_float";if(env().getNumber("WEBGL_VERSION")===1){const le="OES_texture_float",ue="OES_texture_half_float";if(this.textureFloatExtension=getExtensionOrThrow(this.gl,le),hasExtension(this.gl,ue))this.textureHalfFloatExtension=getExtensionOrThrow(this.gl,ue);else if(env().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(ae),hasExtension(this.gl,ce))this.colorBufferHalfFloatExtension=getExtensionOrThrow(this.gl,ce);else if(env().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(ae="EXT_color_buffer_float",hasExtension(this.gl,ae))this.colorBufferFloatExtension=this.gl.getExtension(ae);else if(hasExtension(this.gl,ce))this.colorBufferHalfFloatExtension=this.gl.getExtension(ce);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=createVertexBuffer(this.gl),this.indexBuffer=createIndexBuffer(this.gl),this.framebuffer=createFramebuffer(this.gl),this.textureConfig=getTextureConfig(this.gl,this.textureHalfFloatExtension)}get debug(){return env().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const ee=this.gl;callAndCheck(ee,()=>ee.finish()),callAndCheck(ee,()=>ee.bindFramebuffer(ee.FRAMEBUFFER,null)),callAndCheck(ee,()=>ee.deleteFramebuffer(this.framebuffer)),callAndCheck(ee,()=>ee.bindBuffer(ee.ARRAY_BUFFER,null)),callAndCheck(ee,()=>ee.bindBuffer(ee.ELEMENT_ARRAY_BUFFER,null)),callAndCheck(ee,()=>ee.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(ee,ne){return this.throwIfDisposed(),createFloat32MatrixTexture(this.gl,ee,ne,this.textureConfig)}createFloat16MatrixTexture(ee,ne){return this.throwIfDisposed(),createFloat16MatrixTexture(this.gl,ee,ne,this.textureConfig)}createUnsignedBytesMatrixTexture(ee,ne){return this.throwIfDisposed(),createUnsignedBytesMatrixTexture(this.gl,ee,ne,this.textureConfig)}uploadPixelDataToTexture(ee,ne){this.throwIfDisposed(),uploadPixelDataToTexture(this.gl,ee,ne)}uploadDenseMatrixToTexture(ee,ne,ae,ce){this.throwIfDisposed(),uploadDenseMatrixToTexture(this.gl,ee,ne,ae,ce,this.textureConfig)}createFloat16PackedMatrixTexture(ee,ne){return this.throwIfDisposed(),createFloat16PackedMatrixTexture(this.gl,ee,ne,this.textureConfig)}createPackedMatrixTexture(ee,ne){return this.throwIfDisposed(),createPackedMatrixTexture(this.gl,ee,ne,this.textureConfig)}deleteMatrixTexture(ee){this.throwIfDisposed(),this.outputTexture===ee&&(unbindColorTextureFromFramebuffer(this.gl,this.framebuffer),this.outputTexture=null),callAndCheck(this.gl,()=>this.gl.deleteTexture(ee))}downloadByteEncodedFloatMatrixFromOutputTexture(ee,ne,ae){return this.downloadMatrixDriver(ee,()=>downloadByteEncodedFloatMatrixFromOutputTexture(this.gl,ne,ae,this.textureConfig))}downloadPackedMatrixFromBuffer(ee,ne,ae,ce,le,ue){return downloadPackedMatrixFromBuffer(this.gl,ee,ne,ae,ce,le,ue,this.textureConfig)}downloadFloat32MatrixFromBuffer(ee,ne){return downloadFloat32MatrixFromBuffer(this.gl,ee,ne)}createBufferFromTexture(ee,ne,ae){this.bindTextureToFrameBuffer(ee);const ce=createBufferFromOutputTexture(this.gl,ne,ae,this.textureConfig);return this.unbindTextureToFrameBuffer(),ce}createAndWaitForFence(){const ee=this.createFence(this.gl);return this.pollFence(ee)}createFence(ee){let ne,ae;if(env().getBool("WEBGL_FENCE_API_ENABLED")){const ce=ee,le=ce.fenceSync(ce.SYNC_GPU_COMMANDS_COMPLETE,0);ee.flush(),ae=()=>{const ue=ce.clientWaitSync(le,0,0);return ue===ce.ALREADY_SIGNALED||ue===ce.CONDITION_SATISFIED},ne=le}else env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(ne=this.beginQuery(),this.endQuery(),ae=()=>this.isQueryAvailable(ne,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):ae=()=>!0;return{query:ne,isFencePassed:ae}}downloadMatrixFromPackedTexture(ee,ne,ae){return this.downloadMatrixDriver(ee,()=>downloadMatrixFromPackedOutputTexture(this.gl,ne,ae))}createProgram(ee){this.throwIfDisposed();const ne=this.gl,ae=createFragmentShader(ne,ee),ce=createVertexShader(ne),le=createProgram(ne);return callAndCheck(ne,()=>ne.attachShader(le,ce)),callAndCheck(ne,()=>ne.attachShader(le,ae)),linkProgram(ne,le),this.debug&&validateProgram(ne,le),this.vertexAttrsAreBound||(this.setProgram(le),this.vertexAttrsAreBound=bindVertexProgramAttributeStreams(ne,this.program,this.vertexBuffer)),le}deleteProgram(ee){this.throwIfDisposed(),ee===this.program&&(this.program=null),ee!=null&&callAndCheck(this.gl,()=>this.gl.deleteProgram(ee))}setProgram(ee){this.throwIfDisposed(),this.program=ee,this.program!=null&&this.debug&&validateProgram(this.gl,this.program),callAndCheck(this.gl,()=>this.gl.useProgram(ee))}getUniformLocation(ee,ne,ae=!0){return this.throwIfDisposed(),ae?getProgramUniformLocationOrThrow(this.gl,ee,ne):getProgramUniformLocation(this.gl,ee,ne)}getAttributeLocation(ee,ne){return this.throwIfDisposed(),callAndCheck(this.gl,()=>this.gl.getAttribLocation(ee,ne))}getUniformLocationNoThrow(ee,ne){return this.throwIfDisposed(),this.gl.getUniformLocation(ee,ne)}setInputMatrixTexture(ee,ne,ae){this.throwIfDisposed(),this.throwIfNoProgram(),bindTextureToProgramUniformSampler(this.gl,ee,ne,ae)}setOutputMatrixTexture(ee,ne,ae){this.setOutputMatrixTextureDriver(ee,ae,ne)}setOutputPackedMatrixTexture(ee,ne,ae){this.throwIfDisposed();const[ce,le]=getPackedMatrixTextureShapeWidthHeight(ne,ae);this.setOutputMatrixTextureDriver(ee,ce,le)}setOutputMatrixWriteRegion(ee,ne,ae,ce){this.setOutputMatrixWriteRegionDriver(ae,ee,ce,ne)}setOutputPackedMatrixWriteRegion(ee,ne,ae,ce){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&validateProgram(this.gl,this.program),validateFramebuffer(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const ee=this.gl;this.debug&&this.debugValidate(),callAndCheck(ee,()=>ee.drawElements(ee.TRIANGLES,6,ee.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),callAndCheck(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=getExtensionOrThrow(this.gl,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const ae=this.gl,ce=this.getQueryTimerExtensionWebGL2(),le=ae.createQuery();return ae.beginQuery(ce.TIME_ELAPSED_EXT,le),le}const ee=this.getQueryTimerExtensionWebGL1(),ne=ee.createQueryEXT();return ee.beginQueryEXT(ee.TIME_ELAPSED_EXT,ne),ne}endQuery(){if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const ne=this.gl,ae=this.getQueryTimerExtensionWebGL2();ne.endQuery(ae.TIME_ELAPSED_EXT);return}const ee=this.getQueryTimerExtensionWebGL1();ee.endQueryEXT(ee.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(ee){return await repeatedTry(()=>this.disposed||this.isQueryAvailable(ee,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(ee,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(ee,ne){if(ne===0)return null;if(ne===2){const ae=this.gl;return ae.getQueryParameter(ee,ae.QUERY_RESULT)/1e6}else{const ae=this.getQueryTimerExtensionWebGL1();return ae.getQueryObjectEXT(ee,ae.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(ee,ne){if(ne===0)return!0;if(ne===2){const ae=this.gl,ce=this.getQueryTimerExtensionWebGL2(),le=ae.getQueryParameter(ee,ae.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(ce.GPU_DISJOINT_EXT)),le&&!this.disjoint}else{const ae=this.getQueryTimerExtensionWebGL1(),ce=ae.getQueryObjectEXT(ee,ae.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(ae.GPU_DISJOINT_EXT)),ce&&!this.disjoint}}pollFence(ee){return new Promise(ne=>{this.addItemToPoll(()=>ee.isFencePassed(),()=>ne())})}pollItems(){const ee=linearSearchLastTrue(this.itemsToPoll.map(ne=>ne.isDoneFn));for(let ne=0;ne<=ee;++ne){const{resolveFn:ae}=this.itemsToPoll[ne];ae()}this.itemsToPoll=this.itemsToPoll.slice(ee+1)}addItemToPoll(ee,ne){this.itemsToPoll.push({isDoneFn:ee,resolveFn:ne}),!(this.itemsToPoll.length>1)&&repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0))}bindTextureToFrameBuffer(ee){this.throwIfDisposed(),bindColorTextureToFramebuffer(this.gl,ee,this.framebuffer),this.debug&&validateFramebuffer(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(bindColorTextureToFramebuffer(this.gl,this.outputTexture,this.framebuffer),this.debug&&validateFramebuffer(this.gl)):unbindColorTextureFromFramebuffer(this.gl,this.framebuffer)}downloadMatrixDriver(ee,ne){this.bindTextureToFrameBuffer(ee);const ae=ne();return this.unbindTextureToFrameBuffer(),ae}setOutputMatrixTextureDriver(ee,ne,ae){this.throwIfDisposed();const ce=this.gl;bindColorTextureToFramebuffer(ce,ee,this.framebuffer),this.debug&&validateFramebuffer(ce),this.outputTexture=ee,callAndCheck(ce,()=>ce.viewport(0,0,ne,ae)),callAndCheck(ce,()=>ce.scissor(0,0,ne,ae))}setOutputMatrixWriteRegionDriver(ee,ne,ae,ce){this.throwIfDisposed(),callAndCheck(this.gl,()=>this.gl.scissor(ee,ne,ae,ce))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function linearSearchLastTrue(re){let ee=0;for(;ee<re.length&&re[ee]();++ee);return ee-1}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims}=backend_util;function makeShader(re,ee,ne,ae){const ce=[];re.forEach(Ee=>{const Ce=sizeFromShape(Ee.shapeInfo.logicalShape);Ee.shapeInfo.isUniform?ce.push(`uniform float ${Ee.name}${Ce>1?`[${Ce}]`:""};`):(ce.push(`uniform sampler2D ${Ee.name};`),ce.push(`uniform int offset${Ee.name};`))});const le=ce.join(`
`),ue=re.map(Ee=>getInputSamplingSnippet(Ee,ee,ae)).join(`
`),he=ee.texShape,fe=getGlslDifferences(),me=getFloatTextureSampleSnippet(fe);let ge,ve,ye=getShaderPrefix(fe);return ee.isPacked?(ge=getPackedOutputSamplingSnippet(ee.logicalShape,he),ve=getFloatTextureSetRGBASnippet(fe)):(ge=getOutputSamplingSnippet(ee.logicalShape,he),ve=getFloatTextureSetRSnippet(fe)),ae&&(ye+=SHADER_PACKED_PREFIX),[ye,me,ve,le,ge,ue,ne].join(`
`)}function getSamplerFromInInfo(re){const ee=re.shapeInfo.logicalShape;switch(ee.length){case 0:return getSamplerScalar(re);case 1:return getSampler1D(re);case 2:return getSampler2D(re);case 3:return getSampler3D(re);case 4:return getSampler4D(re);case 5:return getSampler5D(re);case 6:return getSampler6D(re);default:throw new Error(`${ee.length}-D input sampling is not yet supported`)}}function getPackedSamplerFromInInfo(re){switch(re.shapeInfo.logicalShape.length){case 0:return getPackedSamplerScalar(re);case 1:return getPackedSampler1D(re);case 2:return getPackedSampler2D(re);case 3:return getPackedSampler3D(re);default:return getPackedSamplerND(re)}}function getInputSamplingSnippet(re,ee,ne=!1){let ae="";ne?ae+=getPackedSamplerFromInInfo(re):ae+=getSamplerFromInInfo(re);const ce=re.shapeInfo.logicalShape,le=ee.logicalShape;return ce.length<=le.length&&(ne?ae+=getPackedSamplerAtOutputCoords(re,ee):ae+=getSamplerAtOutputCoords(re,ee)),ae}function getPackedOutputSamplingSnippet(re,ee){switch(re.length){case 0:return getOutputScalarCoords();case 1:return getOutputPacked1DCoords(re,ee);case 2:return getOutputPacked2DCoords(re,ee);case 3:return getOutputPacked3DCoords(re,ee);default:return getOutputPackedNDCoords(re,ee)}}function getOutputSamplingSnippet(re,ee){switch(re.length){case 0:return getOutputScalarCoords();case 1:return getOutput1DCoords(re,ee);case 2:return getOutput2DCoords(re,ee);case 3:return getOutput3DCoords(re,ee);case 4:return getOutput4DCoords(re,ee);case 5:return getOutput5DCoords(re,ee);case 6:return getOutput6DCoords(re,ee);default:throw new Error(`${re.length}-D output sampling is not yet supported`)}}function getFloatTextureSampleSnippet(re){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${re.texture2D}(textureSampler, uv).r;
    }
  `}function getFloatTextureSetRSnippet(re){return`
    void setOutput(float val) {
      ${re.output} = vec4(val, 0, 0, 0);
    }
  `}function getFloatTextureSetRGBASnippet(re){return`
    void setOutput(vec4 val) {
      ${re.output} = val;
    }
  `}function getShaderPrefix(re){return`${re.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${re.varyingFs} vec2 resultUV;
    ${re.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${re.defineSpecialNaN}
    ${re.defineSpecialInf}
    ${re.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${SAMPLE_1D_SNIPPET}
    ${SAMPLE_2D_SNIPPET}
    ${SAMPLE_3D_SNIPPET}
  `}const SAMPLE_1D_SNIPPET=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SAMPLE_2D_SNIPPET=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SAMPLE_3D_SNIPPET=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SHADER_PACKED_PREFIX=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function getOutputScalarCoords(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function getOutputPacked1DCoords(re,ee){const ne=[Math.ceil(ee[0]/2),Math.ceil(ee[1]/2)];return ne[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${ne[1]}.0);
      }
    `:ne[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${ne[0]}.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${ne[0]}, ${ne[1]}));
      return 2 * (resTexRC.x * ${ne[1]} + resTexRC.y);
    }
  `}function getOutput1DCoords(re,ee){return ee[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * ${ee[1]}.0);
      }
    `:ee[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * ${ee[0]}.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${ee[0]}, ${ee[1]}));
      return resTexRC.x * ${ee[1]} + resTexRC.y;
    }
  `}function getOutputPacked3DCoords(re,ee){const ne=[Math.ceil(ee[0]/2),Math.ceil(ee[1]/2)],ae=Math.ceil(re[2]/2),ce=ae*Math.ceil(re[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${ne[0]}, ${ne[1]}));
      int index = resTexRC.x * ${ne[1]} + resTexRC.y;

      int b = index / ${ce};
      index -= b * ${ce};

      int r = 2 * (index / ${ae});
      int c = imod(index, ${ae}) * 2;

      return ivec3(b, r, c);
    }
  `}function getOutput3DCoords(re,ee){const ne=getLogicalCoordinatesFromFlatIndex(["r","c","d"],re);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${ee[0]}, ${ee[1]}));
      int index = resTexRC.x * ${ee[1]} + resTexRC.y;
      ${ne}
      return ivec3(r, c, d);
    }
  `}function getOutputPackedNDCoords(re,ee){const ne=[Math.ceil(ee[0]/2),Math.ceil(ee[1]/2)],ae=Math.ceil(re[re.length-1]/2),ce=ae*Math.ceil(re[re.length-2]/2);let le=ce,ue="",he="b, r, c";for(let fe=2;fe<re.length-1;fe++)le*=re[re.length-fe-1],ue=`
      int b${fe} = index / ${le};
      index -= b${fe} * ${le};
    `+ue,he=`b${fe}, `+he;return`
    ivec${re.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${ne[0]}, ${ne[1]}));
      int index = resTexRC.x * ${ne[1]} + resTexRC.y;

      ${ue}

      int b = index / ${ce};
      index -= b * ${ce};

      int r = 2 * (index / ${ae});
      int c = imod(index, ${ae}) * 2;

      return ivec${re.length}(${he});
    }
  `}function getOutput4DCoords(re,ee){const ne=getLogicalCoordinatesFromFlatIndex(["r","c","d","d2"],re);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${ee[0]}, ${ee[1]}));
      int index = resTexRC.x * ${ee[1]} + resTexRC.y;
      ${ne}
      return ivec4(r, c, d, d2);
    }
  `}function getOutput5DCoords(re,ee){const ne=getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3"],re);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${ee[0]},
                             ${ee[1]}));

      int index = resTexRC.x * ${ee[1]} + resTexRC.y;

      ${ne}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function getOutput6DCoords(re,ee){const ne=getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3","d4"],re);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${ee[0]}, ${ee[1]}));
      int index = resTexRC.x * ${ee[1]} + resTexRC.y;

      ${ne}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function getOutputPacked2DCoords(re,ee){const ne=[Math.ceil(ee[0]/2),Math.ceil(ee[1]/2)];if(arraysEqual(re,ee))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${ne[0]}, ${ne[1]}));
      }
    `;const ae=Math.ceil(re[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${ne[0]}, ${ne[1]}));

      int index = resTexRC.x * ${ne[1]} + resTexRC.y;
      int r = 2 * (index / ${ae});
      int c = imod(index, ${ae}) * 2;

      return ivec2(r, c);
    }
  `}function getOutput2DCoords(re,ee){return arraysEqual(re,ee)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${ee[0]}, ${ee[1]}));
      }
    `:re[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${ee[0]}, ${ee[1]}));
        int index = resTexRC.x * ${ee[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:re[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${ee[0]}, ${ee[1]}));
        int index = resTexRC.x * ${ee[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${ee[0]}, ${ee[1]}));
      int index = resTexRC.x * ${ee[1]} + resTexRC.y;
      int r = index / ${re[1]};
      int c = index - r * ${re[1]};
      return ivec2(r, c);
    }
  `}function getFlatOffsetUniformName(re){return`offset${re}`}function getPackedSamplerScalar(re){const ee=re.name,ne="get"+ee.charAt(0).toUpperCase()+ee.slice(1),ae=getGlslDifferences();return`
    vec4 ${ne}() {
      return ${ae.texture2D}(${ee}, halfCR);
    }
  `}function getSamplerScalar(re){const ee=re.name,ne="get"+ee.charAt(0).toUpperCase()+ee.slice(1);if(re.shapeInfo.isUniform)return`float ${ne}() {return ${ee};}`;const[ae,ce]=re.shapeInfo.texShape;if(ae===1&&ce===1)return`
      float ${ne}() {
        return sampleTexture(${ee}, halfCR);
      }
    `;const[le,ue]=re.shapeInfo.texShape,he=getFlatOffsetUniformName(ee);return`
    float ${ne}() {
      vec2 uv = uvFromFlat(${le}, ${ue}, ${he});
      return sampleTexture(${ee}, uv);
    }
  `}function getPackedSampler1D(re){const ee=re.name,ne="get"+ee.charAt(0).toUpperCase()+ee.slice(1),ae=re.shapeInfo.texShape,ce=[Math.ceil(ae[0]/2),Math.ceil(ae[1]/2)],le=getGlslDifferences();return`
    vec4 ${ne}(int index) {
      vec2 uv = packedUVfrom1D(
        ${ce[0]}, ${ce[1]}, index);
      return ${le.texture2D}(${ee}, uv);
    }
  `}function getSampler1D(re){const ee=re.name,ne="get"+ee.charAt(0).toUpperCase()+ee.slice(1);if(re.shapeInfo.isUniform)return`
      float ${ne}(int index) {
        ${getUniformSampler(re)}
      }
    `;const ae=re.shapeInfo.texShape,ce=ae[0],le=ae[1];if(le===1&&ce===1)return`
      float ${ne}(int index) {
        return sampleTexture(${ee}, halfCR);
      }
    `;const ue=getFlatOffsetUniformName(ee);return le===1?`
      float ${ne}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${ue}) + 0.5) / ${ce}.0);
        return sampleTexture(${ee}, uv);
      }
    `:ce===1?`
      float ${ne}(int index) {
        vec2 uv = vec2((float(index + ${ue}) + 0.5) / ${le}.0, 0.5);
        return sampleTexture(${ee}, uv);
      }
    `:`
    float ${ne}(int index) {
      vec2 uv = uvFromFlat(${ce}, ${le}, index + ${ue});
      return sampleTexture(${ee}, uv);
    }
  `}function getPackedSampler2D(re){const ee=re.shapeInfo.logicalShape,ne=re.name,ae="get"+ne.charAt(0).toUpperCase()+ne.slice(1),ce=re.shapeInfo.texShape,le=ce[0],ue=ce[1],he=getGlslDifferences();if(ce!=null&&arraysEqual(ee,ce))return`
      vec4 ${ae}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${ue}.0, ${le}.0);

        return ${he.texture2D}(${ne}, uv);
      }
    `;const fe=[Math.ceil(ce[0]/2),Math.ceil(ce[1]/2)],me=Math.ceil(ee[1]/2);return`
    vec4 ${ae}(int row, int col) {
      vec2 uv = packedUVfrom2D(${me}, ${fe[0]}, ${fe[1]}, row, col);
      return ${he.texture2D}(${ne}, uv);
    }
  `}function getSampler2D(re){const ee=re.shapeInfo.logicalShape,ne=re.name,ae="get"+ne.charAt(0).toUpperCase()+ne.slice(1),ce=re.shapeInfo.texShape;if(ce!=null&&arraysEqual(ee,ce)){const ve=ce[0],ye=ce[1];return`
    float ${ae}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${ye}.0, ${ve}.0);
      return sampleTexture(${ne}, uv);
    }
  `}const{newShape:le,keptDims:ue}=squeezeShape(ee),he=le;if(he.length<ee.length){const ve=squeezeInputInfo(re,he),ye=["row","col"];return`
      ${getSamplerFromInInfo(ve)}
      float ${ae}(int row, int col) {
        return ${ae}(${getSqueezedParams(ye,ue)});
      }
    `}if(re.shapeInfo.isUniform)return`
      float ${ae}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${ee[1]}, 1)));
        ${getUniformSampler(re)}
      }
    `;const fe=ce[0],me=ce[1],ge=getFlatOffsetUniformName(ne);return me===1?`
    float ${ae}(int row, int col) {
      float index = dot(vec3(row, col, ${ge}), vec3(${ee[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${fe}.0);
      return sampleTexture(${ne}, uv);
    }
  `:fe===1?`
    float ${ae}(int row, int col) {
      float index = dot(vec3(row, col, ${ge}), vec3(${ee[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${me}.0, 0.5);
      return sampleTexture(${ne}, uv);
    }
  `:`
  float ${ae}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${ee[1]} + col + ${ge};
    vec2 uv = uvFromFlat(${fe}, ${me}, index);
    return sampleTexture(${ne}, uv);
  }
`}function getPackedSampler3D(re){const ee=re.shapeInfo.logicalShape,ne=re.name,ae="get"+ne.charAt(0).toUpperCase()+ne.slice(1),ce=re.shapeInfo.texShape,le=[Math.ceil(ce[0]/2),Math.ceil(ce[1]/2)];if(ee[0]===1){const ve=ee.slice(1),ye=[1,2],be=squeezeInputInfo(re,ve),Ee=["b","row","col"];return`
        ${getPackedSamplerFromInInfo(be)}
        vec4 ${ae}(int b, int row, int col) {
          return ${ae}(${getSqueezedParams(Ee,ye)});
        }
      `}const ue=le[0],he=le[1],fe=Math.ceil(ee[2]/2),me=fe*Math.ceil(ee[1]/2),ge=getGlslDifferences();return`
    vec4 ${ae}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${ue}, ${he}, ${me}, ${fe}, b, row, col);
      return ${ge.texture2D}(${ne}, uv);
    }
  `}function getSampler3D(re){const ee=re.shapeInfo.logicalShape,ne=re.name,ae="get"+ne.charAt(0).toUpperCase()+ne.slice(1),ce=ee[1]*ee[2],le=ee[2],{newShape:ue,keptDims:he}=squeezeShape(ee),fe=ue;if(fe.length<ee.length){const Ee=squeezeInputInfo(re,fe),Ce=["row","col","depth"];return`
        ${getSamplerFromInInfo(Ee)}
        float ${ae}(int row, int col, int depth) {
          return ${ae}(${getSqueezedParams(Ce,he)});
        }
      `}if(re.shapeInfo.isUniform)return`
      float ${ae}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${ce}, ${le}, 1)));
        ${getUniformSampler(re)}
      }
    `;const me=re.shapeInfo.texShape,ge=me[0],ve=me[1],ye=re.shapeInfo.flatOffset;if(ve===ce&&ye==null)return`
        float ${ae}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${le}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${ve}.0, ${ge}.0);
          return sampleTexture(${ne}, uv);
        }
      `;if(ve===le&&ye==null)return`
    float ${ae}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${ee[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${ve}.0, ${ge}.0);
      return sampleTexture(${ne}, uv);
    }
  `;const be=getFlatOffsetUniformName(ne);return`
      float ${ae}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${ce} + col * ${le} + depth + ${be};
        vec2 uv = uvFromFlat(${ge}, ${ve}, index);
        return sampleTexture(${ne}, uv);
      }
  `}function getPackedSamplerND(re){const ee=re.shapeInfo.logicalShape,ne=ee.length,ae=re.name,ce="get"+ae.charAt(0).toUpperCase()+ae.slice(1),le=re.shapeInfo.texShape,ue=[Math.ceil(le[0]/2),Math.ceil(le[1]/2)],he=ue[0],fe=ue[1],me=Math.ceil(ee[ne-1]/2);let ge=me*Math.ceil(ee[ne-2]/2),ve="int b, int row, int col",ye=`b * ${ge} + (row / 2) * ${me} + (col / 2)`;for(let Ee=2;Ee<ne-1;Ee++)ve=`int b${Ee}, `+ve,ge*=ee[ne-Ee-1],ye=`b${Ee} * ${ge} + `+ye;const be=getGlslDifferences();return`
    vec4 ${ce}(${ve}) {
      int index = ${ye};
      int texR = index / ${fe};
      int texC = index - texR * ${fe};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${fe}, ${he});
      return ${be.texture2D}(${ae}, uv);
    }
  `}function getSampler4D(re){const ee=re.shapeInfo.logicalShape,ne=re.name,ae="get"+ne.charAt(0).toUpperCase()+ne.slice(1),ce=ee[3],le=ee[2]*ce,ue=ee[1]*le,{newShape:he,keptDims:fe}=squeezeShape(ee);if(he.length<ee.length){const Ee=squeezeInputInfo(re,he),Ce=["row","col","depth","depth2"];return`
      ${getSamplerFromInInfo(Ee)}
      float ${ae}(int row, int col, int depth, int depth2) {
        return ${ae}(${getSqueezedParams(Ce,fe)});
      }
    `}if(re.shapeInfo.isUniform)return`
      float ${ae}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${ue}, ${le}, ${ce}, 1)));
        ${getUniformSampler(re)}
      }
    `;const me=re.shapeInfo.flatOffset,ge=re.shapeInfo.texShape,ve=ge[0],ye=ge[1];if(ye===ue&&me==null)return`
      float ${ae}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${le}, ${ce}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${ye}.0, ${ve}.0);
        return sampleTexture(${ne}, uv);
      }
    `;if(ye===ce&&me==null)return`
      float ${ae}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${ee[1]*ee[2]}, ${ee[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${ye}.0, ${ve}.0);
        return sampleTexture(${ne}, uv);
      }
    `;const be=getFlatOffsetUniformName(ne);return`
    float ${ae}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${ue} + col * ${le} +
          depth * ${ce} + depth2;
      vec2 uv = uvFromFlat(${ve}, ${ye}, index + ${be});
      return sampleTexture(${ne}, uv);
    }
  `}function getSampler5D(re){const ee=re.shapeInfo.logicalShape,ne=re.name,ae="get"+ne.charAt(0).toUpperCase()+ne.slice(1),ce=ee[4],le=ee[3]*ce,ue=ee[2]*le,he=ee[1]*ue,{newShape:fe,keptDims:me}=squeezeShape(ee);if(fe.length<ee.length){const Ce=squeezeInputInfo(re,fe),Se=["row","col","depth","depth2","depth3"];return`
      ${getSamplerFromInInfo(Ce)}
      float ${ae}(int row, int col, int depth, int depth2, int depth3) {
        return ${ae}(${getSqueezedParams(Se,me)});
      }
    `}if(re.shapeInfo.isUniform)return`
      float ${ae}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${he}, ${ue}, ${le}, ${ce})) +
          depth3;
        ${getUniformSampler(re)}
      }
    `;const ge=re.shapeInfo.flatOffset,ve=re.shapeInfo.texShape,ye=ve[0],be=ve[1];if(be===he&&ge==null)return`
      float ${ae}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${ue}, ${le}, ${ce}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${be}.0, ${ye}.0);
        return sampleTexture(${ne}, uv);
      }
    `;if(be===ce&&ge==null)return`
      float ${ae}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${ee[1]*ee[2]*ee[3]},
               ${ee[2]*ee[3]}, ${ee[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${be}.0, ${ye}.0);
        return sampleTexture(${ne}, uv);
      }
    `;const Ee=getFlatOffsetUniformName(ne);return`
    float ${ae}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${he} + col * ${ue} + depth * ${le} +
          depth2 * ${ce} + depth3 + ${Ee};
      vec2 uv = uvFromFlat(${ye}, ${be}, index);
      return sampleTexture(${ne}, uv);
    }
  `}function getSampler6D(re){const ee=re.shapeInfo.logicalShape,ne=re.name,ae="get"+ne.charAt(0).toUpperCase()+ne.slice(1),{newShape:ce,keptDims:le}=squeezeShape(ee);if(ce.length<ee.length){const Se=squeezeInputInfo(re,ce),Te=["row","col","depth","depth2","depth3","depth4"];return`
      ${getSamplerFromInInfo(Se)}
      float ${ae}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${ae}(${getSqueezedParams(Te,le)});
      }
    `}const ue=ee[5],he=ee[4]*ue,fe=ee[3]*he,me=ee[2]*fe,ge=ee[1]*me;if(re.shapeInfo.isUniform)return`
      float ${ae}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${ge}, ${me}, ${fe}, ${he})) +
          dot(
            vec2(depth3, depth4),
            vec2(${ue}, 1)));
        ${getUniformSampler(re)}
      }
    `;const ve=re.shapeInfo.flatOffset,ye=re.shapeInfo.texShape,be=ye[0],Ee=ye[1];if(Ee===ge&&ve==null)return`
      float ${ae}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${me}, ${fe}, ${he}, ${ue})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${Ee}.0, ${be}.0);
        return sampleTexture(${ne}, uv);
      }
    `;if(Ee===ue&&ve==null)return`
      float ${ae}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${ee[1]*ee[2]*ee[3]*ee[4]},
               ${ee[2]*ee[3]*ee[4]},
               ${ee[3]*ee[4]},
               ${ee[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${Ee}.0, ${be}.0);
        return sampleTexture(${ne}, uv);
      }
    `;const Ce=getFlatOffsetUniformName(ne);return`
    float ${ae}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${ge} + col * ${me} + depth * ${fe} +
          depth2 * ${he} + depth3 * ${ue} + depth4 + ${Ce};
      vec2 uv = uvFromFlat(${be}, ${Ee}, index);
      return sampleTexture(${ne}, uv);
    }
  `}function getUniformSampler(re){const ee=re.name,ne=sizeFromShape(re.shapeInfo.logicalShape);return ne<2?`return ${ee};`:`
    for (int i = 0; i < ${ne}; i++) {
      if (i == index) {
        return ${ee}[i];
      }
    }
  `}function getPackedSamplerAtOutputCoords(re,ee){const ne=re.name,ae=ne.charAt(0).toUpperCase()+ne.slice(1),ce="get"+ae+"AtOutCoords",le=re.shapeInfo.logicalShape.length,ue=ee.logicalShape.length,he=getBroadcastDims(re.shapeInfo.logicalShape,ee.logicalShape),fe=getCoordsDataType(ue),me=ue-le;let ge;const ve=["x","y","z","w","u","v"];le===0?ge="":ue<2&&he.length>=1?ge="coords = 0;":ge=he.map(ke=>`coords.${ve[ke+me]} = 0;`).join(`
`);let ye="";ue<2&&le>0?ye="coords":ye=re.shapeInfo.logicalShape.map((ke,Ne)=>`coords.${ve[Ne+me]}`).join(", ");let be="return outputValue;";const Ce=sizeFromShape(re.shapeInfo.logicalShape)===1,Te=sizeFromShape(ee.logicalShape)===1;if(le===1&&!Ce&&!Te)be=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(Ce&&!Te)ue===1?be=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:be=`
        return vec4(outputValue.x);
      `;else if(he.length){const ke=le-2,Ne=le-1;he.indexOf(ke)>-1&&he.indexOf(Ne)>-1?be="return vec4(outputValue.x);":he.indexOf(ke)>-1?be="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":he.indexOf(Ne)>-1&&(be="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${ce}() {
      ${fe} coords = getOutputCoords();
      ${ge}
      vec4 outputValue = get${ae}(${ye});
      ${be}
    }
  `}function getSamplerAtOutputCoords(re,ee){const ne=re.name,ae=ne.charAt(0).toUpperCase()+ne.slice(1),ce="get"+ae+"AtOutCoords",le=ee.texShape,ue=re.shapeInfo.texShape,he=re.shapeInfo.logicalShape.length,fe=ee.logicalShape.length;if(!re.shapeInfo.isUniform&&he===fe&&re.shapeInfo.flatOffset==null&&arraysEqual(ue,le))return`
      float ${ce}() {
        return sampleTexture(${ne}, resultUV);
      }
    `;const me=getCoordsDataType(fe),ge=getBroadcastDims(re.shapeInfo.logicalShape,ee.logicalShape),ve=fe-he;let ye;const be=["x","y","z","w","u","v"];he===0?ye="":fe<2&&ge.length>=1?ye="coords = 0;":ye=ge.map(Ce=>`coords.${be[Ce+ve]} = 0;`).join(`
`);let Ee="";return fe<2&&he>0?Ee="coords":Ee=re.shapeInfo.logicalShape.map((Ce,Se)=>`coords.${be[Se+ve]}`).join(", "),`
    float ${ce}() {
      ${me} coords = getOutputCoords();
      ${ye}
      return get${ae}(${Ee});
    }
  `}function getCoordsDataType(re){if(re<=1)return"int";if(re===2)return"ivec2";if(re===3)return"ivec3";if(re===4)return"ivec4";if(re===5)return"ivec5";if(re===6)return"ivec6";throw Error(`GPU for rank ${re} is not yet supported`)}function squeezeInputInfo(re,ee){const ne=JSON.parse(JSON.stringify(re));return ne.shapeInfo.logicalShape=ee,ne}function getSqueezedParams(re,ee){return ee.map(ne=>re[ne]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function compileProgram(re,ee,ne,ae){const ce=ee.userCode,le=ne.map((be,Ee)=>{const Ce={logicalShape:be.shape,texShape:be.isUniform?null:be.texData.texShape,isUniform:be.isUniform,isPacked:be.isUniform?!1:be.texData.isPacked,flatOffset:null};return be.texData!=null&&be.texData.slice!=null&&be.texData.slice.flatOffset>0&&(Ce.flatOffset=be.texData.slice.flatOffset),{name:ee.variableNames[Ee],shapeInfo:Ce}}),ue=le.map(be=>be.shapeInfo),he={logicalShape:ae.shape,texShape:ae.texData.texShape,isUniform:!1,isPacked:ae.texData.isPacked,flatOffset:null},fe=makeShader(le,he,ce,ee.packedInputs),me=re.createProgram(fe);let ge=null;const ve=re.getUniformLocation(me,"NAN",!1);env().getNumber("WEBGL_VERSION")===1&&(ge=re.getUniformLocation(me,"INFINITY",!1));const ye={};for(let be=0;be<ee.variableNames.length;be++){const Ee=ee.variableNames[be],Ce=!1;ye[Ee]=re.getUniformLocation(me,Ee,Ce),ye[`offset${Ee}`]=re.getUniformLocation(me,`offset${Ee}`,Ce)}return{program:ee,source:fe,webGLProgram:me,uniformLocations:ye,inShapeInfos:ue,outShapeInfo:he,infLoc:ge,nanLoc:ve}}function validateBinaryAndProgram(re,ee){if(re.length!==ee.length)throw Error(`Binary was compiled with ${re.length} inputs, but was executed with ${ee.length} inputs`);re.forEach((ne,ae)=>{const ce=ne.logicalShape,le=ee[ae],ue=le.shape;if(!arraysEqual(ce,ue))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${ce} and ${ue} must match`);if(ne.isUniform&&le.isUniform)return;const he=ne.texShape,fe=le.isUniform?null:le.texData.texShape;if(!arraysEqual(he,fe))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${he} and ${fe} must match`)})}function runProgram(re,ee,ne,ae,ce){validateBinaryAndProgram(ee.inShapeInfos,ne),validateBinaryAndProgram([ee.outShapeInfo],[ae]);const le=ae.texData.texture,ue=ae.texData.texShape;ae.texData.isPacked?re.setOutputPackedMatrixTexture(le,ue[0],ue[1]):re.setOutputMatrixTexture(le,ue[0],ue[1]),re.setProgram(ee.webGLProgram),env().getNumber("WEBGL_VERSION")===1&&ee.infLoc!==null&&re.gl.uniform1f(ee.infLoc,1/0),ee.nanLoc!==null&&re.gl.uniform1f(ee.nanLoc,NaN),ne.forEach((he,fe)=>{const me=ee.program.variableNames[fe],ge=ee.uniformLocations[me],ve=ee.uniformLocations[`offset${me}`];if(ge!=null){if(he.isUniform){if(sizeFromShape(he.shape)<2)re.gl.uniform1f(ge,he.uniformValues[0]);else{let ye=he.uniformValues;ye instanceof Float32Array||(ye=new Float32Array(ye)),re.gl.uniform1fv(ge,ye)}return}he.texData.slice!=null&&ve!=null&&re.gl.uniform1i(ve,he.texData.slice.flatOffset),re.setInputMatrixTexture(he.texData.texture,ge,fe)}}),ce!=null&&ce(re,ee.webGLProgram),re.executeProgram()}function makeShaderKey(re,ee,ne){let ae="";ee.concat(ne).forEach(ue=>{const he=ue.texData!=null&&ue.texData.slice!=null&&ue.texData.slice.flatOffset>0,fe=ue.isUniform?"uniform":ue.texData.texShape;ae+=`${ue.shape}_${fe}_${he}`});const ce=re.userCode;let le=re.constructor.name;return le+="_"+ae+"_"+ce,le}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:addImplCPU,bincountImpl:bincountImplCPU,bincountReduceImpl:bincountReduceImplCPU,ceilImpl:ceilImplCPU,concatImpl:concatImplCPU,expImpl:expImplCPU,expm1Impl:expm1ImplCPU,floorImpl:floorImplCPU,gatherV2Impl:gatherV2ImplCPU,greaterImpl:greaterImplCPU,lessImpl:lessImplCPU,linSpaceImpl:linSpaceImplCPU,logImpl:logImplCPU,maxImpl:maxImplCPU,maximumImpl:maximumImplCPU,minimumImpl:minimumImplCPU,multiplyImpl:multiplyImplCPU,negImpl:negImplCPU,prodImpl:prodImplCPU,rangeImpl:rangeImplCPU,rsqrtImpl:rsqrtImplCPU,simpleAbsImpl:simpleAbsImplCPU,sliceImpl:sliceImplCPU,stridedSliceImpl:stridedSliceImplCPU,subImpl:subImplCPU,tileImpl:tileImplCPU,topKImpl:topKImplCPU,transposeImpl:transposeImplCPU,uniqueImpl:uniqueImplCPU}=shared;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getVecChannels(re,ee){return["x","y","z","w","u","v"].slice(0,ee).map(ne=>`${re}.${ne}`)}function getChannels(re,ee){return ee===1?[re]:getVecChannels(re,ee)}function getSourceCoords$2(re,ee){if(re===1)return"rc";let ne="";for(let ae=0;ae<re;ae++)ne+=ee[ae],ae<re-1&&(ne+=",");return ne}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PackProgram{constructor(ee){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=ee;const ne=ee.length;if(ne===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const ae=getChannels("rc",ne),ce=getCoordsDataType(ne),le=getOutOfBoundsCondition(ne,ee,ae),ue=getSetup(ne,ee[ee.length-1],ee[ee.length-2],ae),he=getOutput(ee,ae);this.userCode=`
        void main() {
          ${ce} rc = getOutputCoords();

          if(${le}) {
            setOutput(vec4(0));
          } else {
            ${ue}

            setOutput(vec4(${he}));
          }
        }
      `}}}function getSourceCoordsArr(re,ee){const ne=[];for(let ae=0;ae<=1;ae++)for(let ce=0;ce<=1;ce++){let le=`${ae===0?"r":"rp1"}, ${ce===0?"c":"cp1"}`;for(let ue=2;ue<re;ue++)le=`${ee[ee.length-1-ue]},`+le;ne.push(le)}return ne}function getOutOfBoundsCondition(re,ee,ne){if(re===1)return`rc > ${ee[0]}`;let ae="";for(let ce=re-2;ce<re;ce++)ae+=`${ne[ce]} >= ${ee[ce]}`,ce<re-1&&(ae+="||");return ae}function getSetup(re,ee,ne,ae){if(re===1)return"";const ce=ae.slice(-2);return`
    int r = ${ce[0]};
    int c = ${ce[1]};
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= ${ee};
    bool rEdge = rp1 >= ${ne};
  `}function getOutput(re,ee){const ne=re.length,ae=getSourceCoordsArr(ne,ee);return ne===1?`getA(rc),
            rc + 1 >= ${re[0]} ? 0. : getA(rc + 1),
            0, 0`:`getA(${ae[0]}),
          cEdge ? 0. : getA(${ae[1]}),
          rEdge ? 0. : getA(${ae[2]}),
          rEdge || cEdge ? 0. : getA(${ae[3]})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReshapePackedProgram{constructor(ee,ne){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ee;let ae="";for(let ce=0;ce<4;ce++){let le="thisRC = rc;";ce%2===1&&(le+="thisRC.z += 1;"),ce>1&&(le+="thisRC.y += 1;"),ae+=`
        ${le}
        ${ce>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${ce}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${ce>0?"}":""}
      `}this.userCode=`
      ${getReshapedInputCoords(ne)}
      ${getFlatIndexFrom3D(ee)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${ee[1]};
        int cols = ${ee[2]};

        ${ae}

        setOutput(result);
      }
    `}}function getReshapedInputCoords(re){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${getLogicalCoordinatesFromFlatIndex(["r","c","d"],re)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TextureManager{constructor(ee){this.gpgpu=ee,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(ee,ne,ae){const ce=getPhysicalFromLogicalTextureType(ne,ae),le=getKeyFromTextureShape(ee,ce,ae);le in this.freeTextures||(this.freeTextures[le]=[]),le in this.usedTextures||(this.usedTextures[le]=[]);const ue=computeBytes(ee,ce,this.gpgpu.gl,this.gpgpu.textureConfig,ae);if(this.freeTextures[le].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=ue,this.log();const fe=this.freeTextures[le].shift();return this.usedTextures[le].push(fe),fe}let he;return ce===PhysicalTextureType.PACKED_2X2_FLOAT32?he=this.gpgpu.createPackedMatrixTexture(ee[0],ee[1]):ce===PhysicalTextureType.PACKED_2X2_FLOAT16?he=this.gpgpu.createFloat16PackedMatrixTexture(ee[0],ee[1]):ce===PhysicalTextureType.UNPACKED_FLOAT32?he=this.gpgpu.createFloat32MatrixTexture(ee[0],ee[1]):ce===PhysicalTextureType.UNPACKED_FLOAT16?he=this.gpgpu.createFloat16MatrixTexture(ee[0],ee[1]):ce===PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE&&(he=this.gpgpu.createUnsignedBytesMatrixTexture(ee[0],ee[1])),this.usedTextures[le].push(he),this.numUsedTextures++,this._numBytesAllocated+=ue,this.log(),he}releaseTexture(ee,ne,ae,ce){if(this.freeTextures==null)return;const le=getPhysicalFromLogicalTextureType(ae,ce),ue=getKeyFromTextureShape(ne,le,ce);ue in this.freeTextures||(this.freeTextures[ue]=[]);const he=computeBytes(ne,le,this.gpgpu.gl,this.gpgpu.textureConfig,ce),fe=env().get("WEBGL_DELETE_TEXTURE_THRESHOLD");fe!==-1&&this._numBytesAllocated>fe?(this.gpgpu.deleteMatrixTexture(ee),this._numBytesAllocated-=he):(this.freeTextures[ue].push(ee),this.numFreeTextures++,this._numBytesFree+=he),this.numUsedTextures--;const me=this.usedTextures[ue],ge=me.indexOf(ee);if(ge<0)throw new Error("Cannot release a texture that was never provided by this texture manager");me.splice(ge,1),this.log()}log(){if(!this.logEnabled)return;const ee=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${ee})`);const ne=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*ne)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const ee in this.freeTextures)this.freeTextures[ee].forEach(ne=>{this.gpgpu.deleteMatrixTexture(ne)});for(const ee in this.usedTextures)this.usedTextures[ee].forEach(ne=>{this.gpgpu.deleteMatrixTexture(ne)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function numBytesForInternalFormat(re,ee){const ne=re;if(ee===ne.R32F)return 4;if(ee===ne.R16F)return 2;if(ee===ne.RGBA32F)return 16;if(ee===re.RGBA)return 16;if(ee===ne.RGBA16F)return 8;throw new Error(`Unknown internal format ${ee}`)}function computeBytes(re,ee,ne,ae,ce){const le=internalFormatForPhysicalTexType(ee,ae);let ue;if(ce){const[fe,me]=getPackedMatrixTextureShapeWidthHeight(re[0],re[1]);ue=fe*me}else{const[fe,me]=getUnpackedMatrixTextureShapeWidthHeight(re[0],re[1]);ue=fe*me}const he=numBytesForInternalFormat(ne,le);return ue*he}function internalFormatForPhysicalTexType(re,ee){switch(re){case PhysicalTextureType.PACKED_2X2_FLOAT32:return getInternalFormatForPackedMatrixTexture(ee);case PhysicalTextureType.PACKED_2X2_FLOAT16:return getInternalFormatForFloat16PackedMatrixTexture(ee);case PhysicalTextureType.UNPACKED_FLOAT32:return getInternalFormatForFloat32MatrixTexture(ee);case PhysicalTextureType.UNPACKED_FLOAT16:return getInternalFormatForFloat16MatrixTexture(ee);case PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE:return getInternalFormatForUnsignedBytesMatrixTexture(ee);default:throw new Error(`Unknown physical texture type ${re}`)}}function getPhysicalTextureForRendering(re){return env().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?re?PhysicalTextureType.PACKED_2X2_FLOAT32:PhysicalTextureType.UNPACKED_FLOAT32:re?PhysicalTextureType.PACKED_2X2_FLOAT16:PhysicalTextureType.UNPACKED_FLOAT16}function getPhysicalFromLogicalTextureType(re,ee){if(re===TextureUsage.UPLOAD)return PhysicalTextureType.PACKED_2X2_FLOAT32;if(re===TextureUsage.RENDER||re==null)return getPhysicalTextureForRendering(ee);if(re===TextureUsage.DOWNLOAD||re===TextureUsage.PIXELS)return PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${re}`)}function getKeyFromTextureShape(re,ee,ne){return`${re[0]}_${re[1]}_${ee}_${ne}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UnaryOpProgram{constructor(ee,ne){this.variableNames=["A"],this.outputShape=ee,this.userCode=`
      float unaryOperation(float x) {
        ${ne}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const CHECK_NAN_SNIPPET$2="if (isnan(x)) return x;",LINEAR$1="return x;",ABS$1="return abs(x);",ELU$2="return (x >= 0.0) ? x : (exp(x) - 1.0);",RELU$2=CHECK_NAN_SNIPPET$2+`
  return (x < 0.0) ? 0.0 : x;
`,RELU6$2=CHECK_NAN_SNIPPET$2+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,CLONE="return x;";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LINEAR="return x;",ELU$1=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,RELU$1=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,RELU6$1=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;class UnaryOpPackedProgram{constructor(ee,ne){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ee,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${ne}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UnpackProgram{constructor(ee){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=ee;const ne=ee.length,ae=getChannels("rc",ne),ce=getCoordsDataType(ne),le=getSourceCoords$2(ne,ae),ue=ae.slice(-2),he=ne<=1?"rc":`vec2(${ue.join(",")})`;this.userCode=`
      void main() {
        ${ce} rc = getOutputCoords();
        vec4 packedInput = getA(${le});

        setOutput(getChannel(packedInput, ${he}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const whereImpl=whereImpl$2,EPSILON_FLOAT32=1e-7,EPSILON_FLOAT16=1e-4,binaryCaches={};function getBinaryCache(re){return re in binaryCaches||(binaryCaches[re]={}),binaryCaches[re]}const CPU_HANDOFF_SIZE_THRESHOLD=128,BEFORE_PAGING_CONSTANT=600;function numMBBeforeWarning(){return env().global.screen==null?1024:env().global.screen.height*env().global.screen.width*window.devicePixelRatio*BEFORE_PAGING_CONSTANT/1024/1024}class MathBackendWebGL extends KernelBackend{constructor(ee){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,this.disposed=!1,!env().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(ee==null){const ne=getWebGLContext(env().getNumber("WEBGL_VERSION"));this.binaryCache=getBinaryCache(env().getNumber("WEBGL_VERSION")),this.gpgpu=new GPGPUContext(ne),this.canvas=ne.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=ee,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=ee.gl.canvas;this.textureManager=new TextureManager(this.gpgpu),this.numMBBeforeWarning=numMBBeforeWarning(),this.texData=new DataStorage(this,engine())}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(ee,ne,ae){if((env().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||env().getBool("DEBUG"))&&this.checkNumericalProblems(ee),ae==="complex64"&&ee!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const ce={};return this.texData.set(ce,{shape:ne,dtype:ae,values:ee,usage:TextureUsage.UPLOAD,refCount:1,complexParentRefCount:0}),ce}incRef(ee){const ne=this.texData.get(ee);ne.refCount++}decRef(ee){if(this.texData.has(ee)){const ne=this.texData.get(ee);ne.refCount--}}decComplexRef(ee){if(this.texData.has(ee)){const ne=this.texData.get(ee);ne.complexParentRefCount>0&&ne.refCount--}}move(ee,ne,ae,ce){if(env().getBool("DEBUG")&&this.checkNumericalProblems(ne),ce==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(ee,{shape:ae,dtype:ce,values:ne,usage:TextureUsage.UPLOAD,refCount:1,complexParentRefCount:0})}disposeIntermediateTensorInfo(ee){const ne=ee.dataId;if(this.texData.has(ne)){const ae=this.texData.get(ne);ae.refCount--,ae.refCount<1&&this.disposeData(ne)}}readSync(ee){const ne=this.texData.get(ee),{values:ae,dtype:ce,complexTensorInfos:le,slice:ue,shape:he,isPacked:fe}=ne;if(ue!=null){let ye;fe?ye=new UnaryOpPackedProgram(he,CLONE):ye=new UnaryOpProgram(he,CLONE);const be=this.runWebGLProgram(ye,[{dataId:ee,shape:he,dtype:ce}],ce),Ee=this.readSync(be.dataId);return this.disposeIntermediateTensorInfo(be),Ee}if(ae!=null)return this.convertAndCacheOnCPU(ee);if(ce==="string")return ae;const me=this.activeTimers!=null;let ge;me&&(ge=now$1());let ve;if(ce==="complex64"){const ye=this.readSync(le.real.dataId),be=this.readSync(le.imag.dataId);ve=mergeRealAndImagArrays(ye,be)}else ve=this.getValuesFromTexture(ee);return me&&(this.downloadWaitMs+=now$1()-ge),this.convertAndCacheOnCPU(ee,ve)}async read(ee){if(this.pendingRead.has(ee)){const Ee=this.pendingRead.get(ee);return new Promise(Ce=>Ee.push(Ce))}const ne=this.texData.get(ee),{values:ae,shape:ce,slice:le,dtype:ue,complexTensorInfos:he,isPacked:fe}=ne;if(le!=null){let Ee;fe?Ee=new UnaryOpPackedProgram(ce,CLONE):Ee=new UnaryOpProgram(ce,CLONE);const Ce=this.runWebGLProgram(Ee,[{dataId:ee,shape:ce,dtype:ue}],ue),Se=this.read(Ce.dataId);return this.disposeIntermediateTensorInfo(Ce),Se}if(ae!=null)return this.convertAndCacheOnCPU(ee);if(!env().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&env().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let me=null,ge;if(ue!=="complex64"&&env().get("WEBGL_BUFFER_SUPPORTED")){ge=this.decode(ee);const Ee=this.texData.get(ge.dataId);me=this.gpgpu.createBufferFromTexture(Ee.texture,...getDenseTexShape(ce))}this.pendingRead.set(ee,[]),ue!=="complex64"&&await this.gpgpu.createAndWaitForFence();let ve;if(ue==="complex64"){const Ee=await Promise.all([this.read(he.real.dataId),this.read(he.imag.dataId)]),Ce=Ee[0],Se=Ee[1];ve=mergeRealAndImagArrays(Ce,Se)}else if(me==null)ve=this.getValuesFromTexture(ee);else{const Ee=sizeFromShape(ce);ve=this.gpgpu.downloadFloat32MatrixFromBuffer(me,Ee)}ge!=null&&this.disposeIntermediateTensorInfo(ge);const ye=this.convertAndCacheOnCPU(ee,ve),be=this.pendingRead.get(ee);return this.pendingRead.delete(ee),be.forEach(Ee=>Ee(ye)),this.pendingDisposal.has(ee)&&(this.pendingDisposal.delete(ee),this.disposeData(ee),this.pendingDeletes--),ye}bufferSync(ee){const ne=this.readSync(ee.dataId);let ae=ne;if(ee.dtype==="string")try{ae=ne.map(ce=>decodeString(ce))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return buffer$1(ee.shape,ee.dtype,ae)}checkNumericalProblems(ee){if(ee!=null)for(let ne=0;ne<ee.length;ne++){const ae=ee[ne];if(!canBeRepresented(ae))throw env().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${ae} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${ae} cannot be represented on this device.`)}}getValuesFromTexture(ee){const{shape:ne,dtype:ae,isPacked:ce}=this.texData.get(ee),le=sizeFromShape(ne);if(env().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const ye=this.decode(ee),be=this.texData.get(ye.dataId),Ee=this.gpgpu.downloadMatrixFromPackedTexture(be.texture,...getDenseTexShape(ne)).subarray(0,le);return this.disposeIntermediateTensorInfo(ye),Ee}const ue=env().getBool("WEBGL_PACK")&&ce===!0,he=ue?getShapeAs3D(ne):ne,fe=ue?new EncodeFloatPackedProgram(he):new EncodeFloatProgram(he),me=this.runWebGLProgram(fe,[{shape:he,dtype:ae,dataId:ee}],"float32"),ge=this.texData.get(me.dataId),ve=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(ge.texture,ge.texShape[0],ge.texShape[1]).subarray(0,le);return this.disposeIntermediateTensorInfo(me),ve}async time(ee){const ne=this.activeTimers,ae=[];let ce=!1;this.programTimersStack==null?(this.programTimersStack=ae,ce=!0):this.activeTimers.push(ae),this.activeTimers=ae,ee();const le=flatten$2(this.activeTimers.map(fe=>fe.query)).filter(fe=>fe!=null),ue=flatten$2(this.activeTimers.map(fe=>fe.name)).filter(fe=>fe!=null);this.activeTimers=ne,ce&&(this.programTimersStack=null);const he={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const fe=await Promise.all(le);he.kernelMs=sum$3(fe),he.getExtraProfileInfo=()=>fe.map((me,ge)=>({name:ue[ge],ms:me})).map(me=>`${me.name}: ${me.ms}`).join(", ")}else he.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,he}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:now$1(),endMs:null}}endTimer(ee){return env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),ee):(ee.endMs=now$1(),ee)}async getQueryTime(ee){if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(ee);const ne=ee;return ne.endMs-ne.startMs}disposeData(ee){if(this.pendingDisposal.has(ee))return;if(this.pendingRead.has(ee)){this.pendingDisposal.add(ee),this.pendingDeletes++;return}if(!this.texData.has(ee))return;if(this.texData.get(ee).complexParentRefCount>0){this.texData.get(ee).refCount--;return}this.releaseGPUData(ee);const{complexTensorInfos:ne}=this.texData.get(ee);ne!=null&&(this.texData.get(ne.real.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(ne.real),this.texData.get(ne.imag.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(ne.imag)),this.texData.delete(ee)}releaseGPUData(ee){const{texture:ne,dtype:ae,texShape:ce,usage:le,isPacked:ue,slice:he}=this.texData.get(ee),fe=he&&he.origDataId||ee,me=this.dataRefCount.get(fe);me>1?this.dataRefCount.set(fe,me-1):(this.dataRefCount.delete(fe),ne!=null&&(this.numBytesInGPU-=this.computeBytes(ce,ae),this.textureManager.releaseTexture(ne,ce,le,ue)));const ge=this.texData.get(ee);ge.texture=null,ge.texShape=null,ge.isPacked=!1,ge.slice=null}getTexture(ee){return this.uploadToGPU(ee),this.texData.get(ee).texture}getDataInfo(ee){return this.texData.get(ee)}getCPUBackend(){return env().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=engine().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(ee,ne=CPU_HANDOFF_SIZE_THRESHOLD){const ae=this.getCPUBackend();return!env().getBool("IS_TEST")&&!this.warnedAboutCPUBackend&&ae==null&&(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),ae!=null&&ee.every(ce=>this.texData.get(ce.dataId).texture==null&&sizeFromShape(ce.shape)<ne)}getGPGPUContext(){return this.gpgpu}where(ee){warn$1("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const ne=ee.dataSync();return whereImpl(ee.shape,ne)}packedUnaryOp(ee,ne,ae){const ce=new UnaryOpPackedProgram(ee.shape,ne);return this.compileAndRun(ce,[ee],ae)}abs(ee){if(this.shouldExecuteOnCPU([ee])&&ee.dtype!=="complex64"){const ae=simpleAbsImplCPU(this.texData.get(ee.dataId).values);return this.makeOutput(ee.shape,ee.dtype,ae)}if(env().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(ee,ABS$1,ee.dtype);const ne=new UnaryOpProgram(ee.shape,ABS$1);return this.compileAndRun(ne,[ee])}makeTensorInfo(ee,ne,ae){let ce;if(ne==="string"&&ae!=null&&ae.length>0&&isString$2(ae[0])){const le=ae.map(ue=>encodeString(ue));ce=this.write(le,ee,ne)}else ce=this.write(ae,ee,ne);return this.texData.get(ce).usage=null,{dataId:ce,shape:ee,dtype:ne}}makeOutput(ee,ne,ae){const{dataId:ce}=this.makeTensorInfo(ee,ne,ae);return engine().makeTensorFromDataId(ce,ee,ne,this)}unpackTensor(ee){const ne=new UnpackProgram(ee.shape);return this.runWebGLProgram(ne,[ee],ee.dtype)}packTensor(ee){const ne=new PackProgram(ee.shape),ae=!0;return this.runWebGLProgram(ne,[ee],ee.dtype,null,ae)}packedReshape(ee,ne){const ae=[getBatchDim(ee.shape),...getRowsCols(ee.shape)],ce={dtype:ee.dtype,shape:ae,dataId:ee.dataId},le=[getBatchDim(ne),...getRowsCols(ne)],ue=new ReshapePackedProgram(le,ae),he=!0,fe=this.runWebGLProgram(ue,[ce],ee.dtype,null,he);return{dataId:fe.dataId,shape:ne,dtype:fe.dtype}}decode(ee){const ne=this.texData.get(ee),{isPacked:ae,shape:ce,dtype:le}=ne,ue=getShapeAs3D(ce);let he;ae?he=new DecodeMatrixPackedProgram(ue):he=new DecodeMatrixProgram(ue);const fe=!0,me=this.runWebGLProgram(he,[{shape:ue,dtype:le,dataId:ee}],le,null,fe);return{dtype:le,shape:ce,dataId:me.dataId}}runWebGLProgram(ee,ne,ae,ce,le=!1){const ue=this.makeTensorInfo(ee.outputShape,ae),he=this.texData.get(ue.dataId);if(ee.packedOutput&&(he.isPacked=!0),ee.outPackingScheme===PackingScheme.DENSE){const Ce=getDenseTexShape(ee.outputShape);he.texShape=Ce.map(Se=>Se*2)}if(ee.outTexUsage!=null&&(he.usage=ee.outTexUsage),sizeFromShape(ue.shape)===0)return he.values=getTypedArrayFromDType(ue.dtype,0),ue;const fe=[],me=ne.map(Ce=>{if(Ce.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let Se=this.texData.get(Ce.dataId);if(Se.texture==null){if(!ee.packedInputs&&sizeFromShape(Ce.shape)<=env().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:Ce.shape,texData:null,isUniform:!0,uniformValues:Se.values};ee.packedInputs&&(Se.isPacked=!0,Se.shape=Ce.shape)}else if(!!Se.isPacked!=!!ee.packedInputs)Ce=Se.isPacked?this.unpackTensor(Ce):this.packTensor(Ce),fe.push(Ce),Se=this.texData.get(Ce.dataId);else if(Se.isPacked&&!isReshapeFree(Se.shape,Ce.shape)){const Te=Ce,ke=Ce.shape;Ce.shape=Se.shape,Ce=this.packedReshape(Ce,ke),fe.push(Ce),Se=this.texData.get(Ce.dataId),Te.shape=ke}return this.uploadToGPU(Ce.dataId),{shape:Ce.shape,texData:Se,isUniform:!1}});this.uploadToGPU(ue.dataId);const ge={shape:ue.shape,texData:he,isUniform:!1},ve=makeShaderKey(ee,me,ge),ye=this.getAndSaveBinary(ve,()=>compileProgram(this.gpgpu,ee,me,ge)),be=this.activeTimers!=null;let Ee;if(be&&(Ee=this.startTimer()),runProgram(this.gpgpu,ye,me,ge,ce),fe.forEach(Ce=>this.disposeIntermediateTensorInfo(Ce)),be&&(Ee=this.endTimer(Ee),this.activeTimers.push({name:ee.constructor.name,query:this.getQueryTime(Ee)})),!env().getBool("WEBGL_LAZILY_UNPACK")&&he.isPacked&&le===!1){const Ce=this.unpackTensor(ue);return this.disposeIntermediateTensorInfo(ue),Ce}return ue}compileAndRun(ee,ne,ae,ce,le=!1){ae=ae||ne[0].dtype;const ue=this.runWebGLProgram(ee,ne,ae,ce,le);return engine().makeTensorFromDataId(ue.dataId,ue.shape,ue.dtype)}getAndSaveBinary(ee,ne){return ee in this.binaryCache||(this.binaryCache[ee]=ne()),this.binaryCache[ee]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(env().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(ne=>{this.gpgpu.deleteProgram(this.binaryCache[ne].webGLProgram),delete this.binaryCache[ne]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=tidy(()=>{if(!env().get("WEBGL_RENDER_FLOAT32_ENABLED")){const ee=env().getBool("DEBUG");env().set("DEBUG",!1);const ne=this.abs(scalar(1e-8)).dataSync()[0];if(env().set("DEBUG",ee),ne>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?EPSILON_FLOAT32:EPSILON_FLOAT16}uploadToGPU(ee){const ne=this.texData.get(ee),{shape:ae,dtype:ce,values:le,texture:ue,usage:he,isPacked:fe}=ne;if(ue!=null)return;const me=this.activeTimers!=null;let ge;me&&(ge=now$1());let ve=ne.texShape;if(ve==null&&(ve=getTextureShapeFromLogicalShape(ae,fe),ne.texShape=ve),le!=null){const ye=getShapeAs3D(ae);let be,Ee=ve[1],Ce=ve[0];const Se=le instanceof Uint8Array;fe?([Ee,Ce]=getPackedMatrixTextureShapeWidthHeight(ve[0],ve[1]),be=new EncodeMatrixPackedProgram(ye,[Ce,Ee],Se)):be=new EncodeMatrixProgram(ye,[Ce,Ee],Se);const Te=this.makeTensorInfo([Ce,Ee],ce);Se?this.texData.get(Te.dataId).usage=TextureUsage.PIXELS:this.texData.get(Te.dataId).usage=TextureUsage.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(Te.dataId),Ee,Ce,le);const ke=!0,Ne=this.runWebGLProgram(be,[Te],ce,null,ke),Fe=this.texData.get(Ne.dataId);ne.texture=Fe.texture,ne.texShape=Fe.texShape,ne.isPacked=Fe.isPacked,ne.usage=Fe.usage,this.disposeIntermediateTensorInfo(Te),this.texData.delete(Ne.dataId),ne.values=null,me&&(this.uploadWaitMs+=now$1()-ge)}else{const ye=this.acquireTexture(ve,he,ce,fe);ne.texture=ye}}convertAndCacheOnCPU(ee,ne){const ae=this.texData.get(ee),{dtype:ce}=ae;return this.releaseGPUData(ee),ne!=null&&(ae.values=float32ToTypedArray(ne,ce)),ae.values}acquireTexture(ee,ne,ae,ce){if(this.numBytesInGPU+=this.computeBytes(ee,ae),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const le=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${le} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(ee,ne,ce)}computeBytes(ee,ne){return ee[0]*ee[1]*bytesPerElement(ne)}}function float32ToTypedArray(re,ee){if(ee==="float32"||ee==="complex64")return re;if(ee==="int32"||ee==="bool"){const ne=ee==="int32"?new Int32Array(re.length):new Uint8Array(re.length);for(let ae=0;ae<ne.length;++ae)ne[ae]=Math.round(re[ae]);return ne}else throw new Error(`Unknown dtype ${ee}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */isBrowser$2()&&registerBackend("webgl",()=>new MathBackendWebGL,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHECK_NAN_SNIPPET$1=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class BinaryOpProgram{constructor(ee,ne,ae){this.variableNames=["A","B"],this.outputShape=assertAndGetBroadcastShape(ne,ae),this.userCode=`
      float binaryOperation(float a, float b) {
        ${ee}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHECK_NAN_SNIPPET=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;class BinaryOpPackedProgram{constructor(ee,ne,ae,ce=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=assertAndGetBroadcastShape(ne,ae);const le=this.outputShape.length;let ue="";if(ce)if(le===0||sizeFromShape(this.outputShape)===1)ue=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(ue=`
          ${getCoordsDataType(le)} coords = getOutputCoords();
        `,le===1)ue+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const fe=getChannels("coords",le);ue+=`
            bool nextRowOutOfBounds =
              (${fe[le-2]} + 1) >= ${this.outputShape[le-2]};
            bool nextColOutOfBounds =
              (${fe[le-1]} + 1) >= ${this.outputShape[le-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${ee}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${ue}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function identity$3(re){const{inputs:ee,backend:ne}=re,{x:ae}=ee;return ne.incRef(ae.dataId),{dataId:ae.dataId,shape:ae.shape,dtype:ae.dtype}}const identityConfig={kernelName:Identity$1,backendName:"webgl",kernelFunc:identity$3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function complex(re){const{inputs:ee,backend:ne}=re,{real:ae,imag:ce}=ee,le=ne.makeTensorInfo(ae.shape,"complex64"),ue=ne.texData.get(le.dataId),he=identity$3({inputs:{x:ae},backend:ne}),fe=ne.texData.get(he.dataId);fe.complexParentRefCount++;const me=identity$3({inputs:{x:ce},backend:ne}),ge=ne.texData.get(me.dataId);return ge.complexParentRefCount++,ue.complexTensorInfos={real:he,imag:me},le}const complexConfig={kernelName:Complex,backendName:"webgl",kernelFunc:complex};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LEAKYRELU="return (a < 0.) ? b * a : a;",LEAKYRELU_PACKED=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function leakyRelu(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{alpha:le}=ae,ue=ne.makeTensorInfo([],"float32",createScalarValue(le,"float32")),he=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new BinaryOpPackedProgram(LEAKYRELU_PACKED,ce.shape,ue.shape):new BinaryOpProgram(LEAKYRELU,ce.shape,ue.shape),fe=ne.runWebGLProgram(he,[ce,ue],ce.dtype);return ne.disposeIntermediateTensorInfo(ue),fe}const leakyReluConfig={kernelName:LeakyRelu,backendName:"webgl",kernelFunc:leakyRelu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PRELU="return (a < 0.) ? b * a : a;",PRELU_PACKED=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function prelu(re){const{inputs:ee,backend:ne}=re,{x:ae,alpha:ce}=ee,le=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new BinaryOpPackedProgram(PRELU_PACKED,ae.shape,ce.shape):new BinaryOpProgram(PRELU,ae.shape,ce.shape);return ne.runWebGLProgram(le,[ae,ce],ae.dtype)}const preluConfig={kernelName:Prelu,backendName:"webgl",kernelFunc:prelu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHECK_NAN_SNIPPET_UNARY="if (isnan(x)) return x;",CHECK_NAN_SNIPPET_BINARY=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,CHECK_NAN_SNIPPET_BINARY_PACKED=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;function unaryKernelFunc({opSnippet:re,packedOpSnippet:ee,cpuKernelImpl:ne,dtype:ae}){return({inputs:ce,backend:le})=>{const{x:ue}=ce,he=le,fe=ae||ue.dtype;if(he.shouldExecuteOnCPU([ue])&&ne!=null){const ve=he.texData.get(ue.dataId),ye=ne(ve.values,fe);return he.makeTensorInfo(ue.shape,fe,ye)}const me=env().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&ee!=null;let ge;return me?ge=new UnaryOpPackedProgram(ue.shape,ee):ge=new UnaryOpProgram(ue.shape,re),he.runWebGLProgram(ge,[ue],fe)}}function binaryKernelFunc({opSnippet:re,packedOpSnippet:ee,checkOutOfBounds:ne=!1,supportsComplex:ae=!1,cpuKernelImpl:ce,dtype:le}){return({inputs:ue,backend:he})=>{const{a:fe,b:me}=ue,ge=he;if(ae&&fe.dtype==="complex64"){const Ee=ge.texData.get(fe.dataId),Ce=ge.texData.get(me.dataId),[Se,Te]=[[Ee.complexTensorInfos.real,Ce.complexTensorInfos.real],[Ee.complexTensorInfos.imag,Ce.complexTensorInfos.imag]].map(Ne=>{const[Fe,De]=Ne,Oe={dataId:Fe.dataId,dtype:Fe.dtype,shape:fe.shape},Re={dataId:De.dataId,dtype:De.dtype,shape:me.shape},Be=new BinaryOpProgram(re,fe.shape,me.shape);return ge.runWebGLProgram(Be,[Oe,Re],upcastType(Fe.dtype,De.dtype))}),ke=complex({inputs:{real:Se,imag:Te},backend:ge});return ge.disposeIntermediateTensorInfo(Se),ge.disposeIntermediateTensorInfo(Te),ke}const ve=le||upcastType(fe.dtype,me.dtype);if(ge.shouldExecuteOnCPU([fe,me])&&ce!=null){const Ee=ge.texData.get(fe.dataId),Ce=ge.texData.get(me.dataId),[Se,Te]=ce(fe.shape,me.shape,Ee.values,Ce.values,ve),ke=ge.makeTensorInfo(Te,ve),Ne=ge.texData.get(ke.dataId);return Ne.values=Se,ke}const ye=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&ee!=null;let be;return ye?be=new BinaryOpPackedProgram(ee,fe.shape,me.shape,ne):be=new BinaryOpProgram(re,fe.shape,me.shape),ge.runWebGLProgram(be,[fe,me],ve)}}function mapActivationToShaderProgram(re,ee=!1){if(re==="linear")return ee?LINEAR:LINEAR$1;if(re==="relu")return ee?RELU$1:RELU$2;if(re==="elu")return ee?ELU$1:ELU$2;if(re==="relu6")return ee?RELU6$1:RELU6$2;if(re==="prelu")return ee?PRELU_PACKED:PRELU;if(re==="leakyrelu")return ee?LEAKYRELU_PACKED:LEAKYRELU;throw new Error(`Activation ${re} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MatMulPackedProgram{constructor(ee,ne,ae,ce=!1,le=!1,ue=!1,he=null,fe=!1,me=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ae;const ge=ce?ee[1]:ee[2],ve=Math.ceil(ge/2),ye=ce?"i * 2, rc.y":"rc.y, i * 2",be=le?"rc.z, i * 2":"i * 2, rc.z",Ee=ce?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],Ce=le?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let Se="",Te="";he&&(fe?Se=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${he}
        }`:me?Se=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${he}
        }`:Se=`vec4 activation(vec4 x) {
          ${he}
        }`,Te="result = activation(result);");const ke=ue?"result += getBiasAtOutCoords();":"";ue&&this.variableNames.push("bias"),fe&&this.variableNames.push("preluActivationWeights"),me&&this.variableNames.push("leakyreluAlpha");let Ne="rc.x",Fe="rc.x";ee[0]<ne[0]?Ne=`int(min(float(rc.x), ${ee[0]-1}.))`:ne[0]<ee[0]&&(Fe=`int(min(float(rc.x), ${ne[0]-1}.))`),this.userCode=`
      ${Se}

      const float sharedDimension = ${ve}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${ve}; i++) {
          int batchA = ${Ne};
          int batchB = ${Fe};
          vec4 a = getMatrixA(batchA, ${ye});
          vec4 b = getMatrixB(batchB, ${be});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${Ee[0]} * ${Ce[0]});
          result += (${Ee[1]} * ${Ce[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${ke}

        ${Te}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COMPLEX_MULTIPLY={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class BinaryOpComplexProgram{constructor(ee,ne,ae){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=assertAndGetBroadcastShape(ne,ae),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${ee}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MUL="return a * b;";function multiply$1(re){const{inputs:ee,backend:ne}=re,{a:ae,b:ce}=ee,le=upcastType(ae.dtype,ce.dtype);if(ae.dtype==="complex64"){const he=ne.texData.get(ae.dataId),fe=ne.texData.get(ce.dataId),me=new BinaryOpComplexProgram(COMPLEX_MULTIPLY.REAL,ae.shape,ce.shape),ge=new BinaryOpComplexProgram(COMPLEX_MULTIPLY.IMAG,ae.shape,ce.shape),ve=[{dataId:he.complexTensorInfos.real.dataId,dtype:he.complexTensorInfos.real.dtype,shape:ae.shape},{dataId:he.complexTensorInfos.imag.dataId,dtype:he.complexTensorInfos.imag.dtype,shape:ae.shape},{dataId:fe.complexTensorInfos.real.dataId,dtype:fe.complexTensorInfos.real.dtype,shape:ce.shape},{dataId:fe.complexTensorInfos.imag.dataId,dtype:fe.complexTensorInfos.imag.dtype,shape:ce.shape}],ye=ne.runWebGLProgram(me,ve,"float32"),be=ne.runWebGLProgram(ge,ve,"float32"),Ee=complex({inputs:{real:ye,imag:be},backend:ne});return ne.disposeIntermediateTensorInfo(ye),ne.disposeIntermediateTensorInfo(be),Ee}if(ne.shouldExecuteOnCPU([ae,ce])){const he=ne.texData.get(ae.dataId),fe=ne.texData.get(ce.dataId),[me,ge]=multiplyImplCPU(ae.shape,ce.shape,he.values,fe.values,le),ve=ne.makeTensorInfo(ge,le),ye=ne.texData.get(ve.dataId);return ye.values=me,ve}let ue;return env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?ue=new BinaryOpPackedProgram(MUL,ae.shape,ce.shape):ue=new BinaryOpProgram(MUL,ae.shape,ce.shape),ne.runWebGLProgram(ue,[ae,ce],le)}const multiplyConfig={kernelName:Multiply$2,backendName:"webgl",kernelFunc:multiply$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function packedReshape(re,ee,ne){const ae=[getBatchDim(re.shape),...getRowsCols(re.shape)],ce={dtype:re.dtype,shape:ae,dataId:re.dataId},le=[getBatchDim(ee),...getRowsCols(ee)],ue=new ReshapePackedProgram(le,ae),he=!0,fe=ne.runWebGLProgram(ue,[ce],re.dtype,null,he);return{dataId:fe.dataId,shape:ee,dtype:fe.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reshape(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{shape:le}=ae,ue=ne,he=sizeFromShape(ce.shape),fe=inferFromImplicitShape(le,he),me=sizeFromShape(fe);assert$2(he===me,()=>`The new shape (${fe}) has ${me} elements and the old shape (${ce.shape}) has ${he} elements. The new shape and old shape must have the same number of elements.`);const ge=ue.texData.get(ce.dataId);return ge.isPacked&&!isReshapeFree(ce.shape,fe)&&!(ge.texture!==null&&isReshapeFree(ge.shape,fe))?packedReshape(ce,fe,ue):(ue.incRef(ce.dataId),{dataId:ce.dataId,shape:fe,dtype:ce.dtype})}const reshapeConfig={kernelName:Reshape$1,backendName:"webgl",kernelFunc:reshape};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MeanProgram{constructor(ee,ne){this.variableNames=["x"];const{windowSize:ae,batchSize:ce,inSize:le,outSize:ue}=ee;this.outputShape=[ce,ue];const he=Math.floor(ae/4)*4,fe=ae%4;let me="sumValue += dot(values, ones);";if(ne!=null){const ve=1/ne;me=`sumValue += dot(values * ${isInt(ve)?ve.toPrecision(2):ve}, ones);`}let ge="";le%ae>0&&(ge=`
        if (inIdx < 0 || inIdx >= ${le}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${ge}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${ae};

        float sumValue = 0.0;

        for (int i = 0; i < ${he}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${me}
        }

        int inIdx = inOffset + ${he};
        if (${fe===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${me}
        } else if (${fe===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${me}
        } else if (${fe===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${me}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReduceProgram{constructor(ee,ne){this.variableNames=["x"];const{windowSize:ae,batchSize:ce,inSize:le,outSize:ue}=ee;this.outputShape=[ce,ue];let he="0.0",fe="";ne==="prod"?he="1.0":ne==="min"?(he="1.0 / 1e-20",fe="min"):ne==="max"&&(he="-1.0 / 1e-20",fe="max");let me=`${ne}(${ne}(${ne}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;ne==="sum"?me="sumValue":ne==="prod"?me="prodValue":ne==="all"?me="allValue":ne==="any"&&(me="anyValue");const ge=Math.floor(ae/4)*4,ve=ae%4;let ye=`
      if (${ne==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${ne==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${fe}(values, minMaxValue);
      }
    `,be="vec4";ne==="all"?(he="1.0",ye=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,be="bvec4"):ne==="any"&&(he="0.0",ye=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,be="bvec4");let Ee="";le%ae>0&&(Ee=`
        if (inIdx < 0 || inIdx >= ${le}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${he};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${Ee}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${ae};

        vec4 minMaxValue = vec4(${he});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${ge}; i += 4) {
          int inIdx = inOffset + i;
          ${be} values = ${be}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${ye}
        }

        int inIdx = inOffset + ${ge};
        if (${ve===1}) {
          ${be} values = ${be}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${ye}
        } else if (${ve===2}) {
          ${be} values = ${be}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${ye}
        } else if (${ve===3}) {
          ${be} values = ${be}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${ye}
        }
        setOutput(${me});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getReductionStages(re){const ee=[];for(;ee.length===0||ee[ee.length-1].outSize!==1;){const ne=ee.length?ee[ee.length-1].outSize:re[1],ae=computeOptimalWindowSize(ne);ee.push({inSize:ne,windowSize:ae,outSize:Math.ceil(ne/ae)})}return ee}function reduce(re,ee,ne,ae){const ce=getReductionStages(re.shape);let le=re;for(let ue=0;ue<ce.length;ue++){const{inSize:he,windowSize:fe,outSize:me}=ce[ue];let ge,ve;ne==="mean"?ge=ue===0?new MeanProgram({windowSize:fe,inSize:he,batchSize:re.shape[0],outSize:me},he):new MeanProgram({windowSize:fe,inSize:he,batchSize:re.shape[0],outSize:me}):ge=new ReduceProgram({windowSize:fe,inSize:he,batchSize:re.shape[0],outSize:me},ne),ve=le,le=ae.runWebGLProgram(ge,[le],ee),ve.dataId!==re.dataId&&ae.disposeIntermediateTensorInfo(ve)}return le}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TransposeProgram{constructor(ee,ne){this.variableNames=["A"];const ae=new Array(ee.length);for(let ue=0;ue<ae.length;ue++)ae[ue]=ee[ne[ue]];this.outputShape=ae,this.rank=ae.length;const ce=getCoordsDataType(this.rank),le=getSwitchedCoords(ne);this.userCode=`
    void main() {
      ${ce} resRC = getOutputCoords();
      setOutput(getA(${le}));
    }
    `}}function getSwitchedCoords(re){const ee=re.length;if(ee>6)throw Error(`Transpose for rank ${ee} is not yet supported`);const ne=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],ae=new Array(ee);for(let ce=0;ce<re.length;ce++)ae[re[ce]]=ne[ce];return ae.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TransposePackedProgram{constructor(ee,ne){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const ae=new Array(ee.length);for(let ge=0;ge<ae.length;ge++)ae[ge]=ee[ne[ge]];if(this.outputShape=ae,this.rank=ae.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const ce=getCoordsDataType(this.rank),le=getVecChannels("rc",this.rank),ue=new Array(this.rank);for(let ge=0;ge<ne.length;ge++)ue[ne[ge]]=le[ge];const he=`vec2(${ue.slice(-2).join()})`,fe=`++${le[this.rank-1]} < ${ae[this.rank-1]}`,me=`getChannel(getA(${ue.join()}), ${he})`;this.userCode=`
    void main() {
      ${ce} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${me};
      if(${fe}) {
        result[1] = ${me};
      }
      --${le[this.rank-1]};
      if(++${le[this.rank-2]} < ${ae[this.rank-2]}) {
        result[2] = ${me};
        if(${fe}) {
          result[3] = ${me};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transposeImpl(re,ee,ne){const ae=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TransposePackedProgram(re.shape,ee):new TransposeProgram(re.shape,ee);return ne.runWebGLProgram(ae,[re],re.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sumImpl(re,ee,ne,ae){const ce=ee,le=re.shape.length,ue=parseAxisParam(ce,re.shape);let he=ue;const fe=getAxesPermutation(he,le),me=fe!=null;let ge=re;me&&(ge=transposeImpl(re,fe,ae),he=getInnerMostAxes(he.length,le)),assertAxesAreInnerMostDims("sum",he,le);const[ve,ye]=computeOutAndReduceShapes(ge.shape,he);let be=ve;ne&&(be=expandShapeToKeepDim(ve,ue));const Ee=sizeFromShape(ye),Se=sizeFromShape(re.shape)/Ee,Te=reshape({inputs:{x:ge},attrs:{shape:[Se,Ee]},backend:ae}),ke=sumOutType(re.dtype),Ne=reduce(Te,ke,"sum",ae),Fe=reshape({inputs:{x:Ne},attrs:{shape:be},backend:ae});return ae.disposeIntermediateTensorInfo(Te),ae.disposeIntermediateTensorInfo(Ne),me&&ae.disposeIntermediateTensorInfo(ge),Fe}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sum(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le,keepDims:ue}=ae;return sumImpl(ce,le,ue,ne)}const sumConfig={kernelName:Sum,backendName:"webgl",kernelFunc:sum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transpose(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{perm:le}=ae,ue=ne,he=ce.shape.length,fe=new Array(he);for(let ge=0;ge<fe.length;ge++)fe[ge]=ce.shape[le[ge]];let me;if(ue.shouldExecuteOnCPU([ce])){const ve=ue.texData.get(ce.dataId).values,ye=transposeImplCPU(ve,ce.shape,ce.dtype,le,fe);me=ue.makeTensorInfo(fe,ce.dtype);const be=ue.texData.get(me.dataId);be.values=ye}else me=transposeImpl(ce,le,ue);return me}const transposeConfig={kernelName:Transpose,backendName:"webgl",kernelFunc:transpose};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MATMUL_SHARED_DIM_THRESHOLD=1e3;function batchMatMulImpl({a:re,b:ee,transposeA:ne,transposeB:ae,backend:ce,bias:le=null,preluActivationWeights:ue=null,leakyreluAlpha:he=0,activation:fe=null}){const me=re.shape.length,ge=ee.shape.length,ve=ne?re.shape[me-2]:re.shape[me-1],ye=ae?ee.shape[ge-1]:ee.shape[ge-2],be=ne?re.shape[me-1]:re.shape[me-2],Ee=ae?ee.shape[ge-2]:ee.shape[ge-1],Ce=re.shape.slice(0,-2),Se=ee.shape.slice(0,-2),Te=sizeFromShape(Ce),ke=sizeFromShape(Se),Ne=Te===ke||Te===1||ke===1;assert$2(me>=2&&ge>=2&&Ne,()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${Ce}) and (${Se}).`);const De=(Te>ke?re.shape.slice(0,-2):ee.shape.slice(0,-2)).concat([be,Ee]);assert$2(ve===ye,()=>`Error in matMul: inner shapes (${ve}) and (${ye}) of Tensors with shapes ${re.shape} and ${ee.shape} and transposeA=${ne} and transposeB=${ae} must match.`);const Oe=ne?[Te,ve,be]:[Te,be,ve],Re=ae?[ke,Ee,ye]:[ke,ye,Ee],Be=reshape({inputs:{x:re},backend:ce,attrs:{shape:Oe}}),Le=reshape({inputs:{x:ee},backend:ce,attrs:{shape:Re}}),je=[Be,Le],Ge=Math.max(Te,ke),qe=ne?Be.shape[1]:Be.shape[2],Ue=le!=null,ze=ue!=null,He=fe==="leakyrelu",Ye=fe!=null?mapActivationToShaderProgram(fe,!0):null,Xe=Ue||ze||He||Ye!=null;let We;if((be===1||Ee===1)&&qe>MATMUL_SHARED_DIM_THRESHOLD&&Xe===!1){let Vt=Be,Qt=Le;ne&&(Vt=transpose({inputs:{x:Be},backend:ce,attrs:{perm:[0,2,1]}}),je.push(Vt)),ae&&(Qt=transpose({inputs:{x:Le},backend:ce,attrs:{perm:[0,2,1]}}),je.push(Qt));const Yt=Ee!==1,Jt=Ee===1;let rn=Vt;Yt&&(rn=reshape({inputs:{x:Vt},backend:ce,attrs:{shape:[Ge,qe,1]}}),je.push(rn));const nn=Ee===1?2:1;let fn=Qt;Jt&&(fn=reshape({inputs:{x:Qt},backend:ce,attrs:{shape:[Ge,1,qe]}}),je.push(fn));const an=multiply$1({inputs:{a:rn,b:fn},backend:ce});We=sum({inputs:{x:an},backend:ce,attrs:{axis:nn,keepDims:!0}}),je.push(an)}else{const Vt=upcastType(re.dtype,ee.dtype),Qt=new MatMulPackedProgram(Oe,Re,[Ge,be,Ee],ne,ae,Ue,Ye,ze,He),Yt=[Be,Le];if(le!=null&&Yt.push(le),ze&&Yt.push(ue),He){const Jt=ce.makeTensorInfo([],"float32",createScalarValue(he,"float32"));Yt.push(Jt),je.push(Jt)}We=ce.runWebGLProgram(Qt,Yt,Vt)}const Ze=reshape({inputs:{x:We},backend:ce,attrs:{shape:De}});je.push(We);for(const Vt of je)ce.disposeIntermediateTensorInfo(Vt);return Ze}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _fusedMatMul(re){const{inputs:ee,backend:ne,attrs:ae}=re,{a:ce,b:le,bias:ue,preluActivationWeights:he}=ee,{transposeA:fe,transposeB:me,activation:ge,leakyreluAlpha:ve}=ae;return batchMatMulImpl({a:ce,b:le,transposeA:fe,transposeB:me,backend:ne,bias:ue,preluActivationWeights:he,leakyreluAlpha:ve,activation:ge})}const _fusedMatMulConfig={kernelName:_FusedMatMul,backendName:"webgl",kernelFunc:_fusedMatMul};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ABS="return abs(x);";function abs$1(re){const{inputs:ee,backend:ne}=re,{x:ae}=ee;if(ne.shouldExecuteOnCPU([ae])&&ae.dtype!=="complex64"){const le=ne.texData.get(ae.dataId),ue=simpleAbsImplCPU(le.values);return ne.makeTensorInfo(ae.shape,ae.dtype,ue)}let ce;return env().getBool("WEBGL_PACK_UNARY_OPERATIONS")?ce=new UnaryOpPackedProgram(ae.shape,ABS):ce=new UnaryOpProgram(ae.shape,ABS),ne.runWebGLProgram(ce,[ae],ae.dtype)}const absConfig={kernelName:Abs$1,backendName:"webgl",kernelFunc:abs$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ACOS=CHECK_NAN_SNIPPET$2+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,acos=unaryKernelFunc({opSnippet:ACOS}),acosConfig={kernelName:Acos,backendName:"webgl",kernelFunc:acos};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ACOSH=CHECK_NAN_SNIPPET$2+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,acosh=unaryKernelFunc({opSnippet:ACOSH}),acoshConfig={kernelName:Acosh,backendName:"webgl",kernelFunc:acosh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ADD="return a + b;",addKernelFunc=binaryKernelFunc({opSnippet:ADD,packedOpSnippet:ADD,supportsComplex:!0,cpuKernelImpl:addImplCPU}),addConfig={kernelName:Add$2,backendName:"webgl",kernelFunc:addKernelFunc};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AddNProgram{constructor(ee,ne){this.outputShape=[],this.outputShape=ee,this.variableNames=ne.map((le,ue)=>`T${ue}`);const ae=[];this.variableNames.forEach(le=>{ae.push(`float v${le} = get${le}AtOutCoords();`)});const ce=this.variableNames.map(le=>`v${le}`).join(" + ");this.userCode=`
      void main() {
        ${ae.join(`
        `)}

        float result = ${ce};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AddNPackedProgram{constructor(ee,ne){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ee,this.variableNames=ne.map((le,ue)=>`T${ue}`);const ae=[];this.variableNames.forEach(le=>{ae.push(`vec4 v${le} = get${le}AtOutCoords();`)});const ce=this.variableNames.map(le=>`v${le}`).join(" + ");this.userCode=`
      void main() {
        ${ae.join(`
        `)}

        vec4 result = ${ce};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function addN(re){const{inputs:ee,backend:ne}=re,ae=ee;if(ae.length===1)return identity$3({inputs:{x:ae[0]},backend:ne});if(ae.length>env().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const fe=Math.floor(ae.length/2),me=addN({inputs:ae.slice(0,fe),backend:ne}),ge=addN({inputs:ae.slice(fe),backend:ne});return addN({inputs:[me,ge],backend:ne})}const ce=ae.map(fe=>fe.dtype).reduce((fe,me)=>upcastType(fe,me)),le=ae.map(fe=>fe.shape),he=env().getBool("WEBGL_PACK")?new AddNPackedProgram(ae[0].shape,le):new AddNProgram(ae[0].shape,le);return ne.runWebGLProgram(he,ae,ce)}const addNConfig={kernelName:AddN,backendName:"webgl",kernelFunc:addN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function all(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le,keepDims:ue}=ae,he=ce.shape.length,fe=parseAxisParam(le,ce.shape);let me=fe;const ge=getAxesPermutation(me,he);let ve=ce;ge!=null&&(ve=transpose({inputs:{x:ce},backend:ne,attrs:{perm:ge}}),me=getInnerMostAxes(me.length,he)),assertAxesAreInnerMostDims("all",me,he);const[ye,be]=computeOutAndReduceShapes(ve.shape,me),Ee=sizeFromShape(be),Ce=reshape({inputs:{x:ve},backend:ne,attrs:{shape:[-1,Ee]}}),Se=reduce(Ce,Ce.dtype,"all",ne);let Te;if(ue){const ke=expandShapeToKeepDim(ye,fe);Te=reshape({inputs:{x:Se},backend:ne,attrs:{shape:ke}})}else Te=reshape({inputs:{x:Se},backend:ne,attrs:{shape:ye}});return ne.disposeIntermediateTensorInfo(Ce),ne.disposeIntermediateTensorInfo(Se),ge!=null&&ne.disposeIntermediateTensorInfo(ve),Te}const allConfig={kernelName:All,backendName:"webgl",kernelFunc:all};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function any(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le,keepDims:ue}=ae,he=ce.shape.length,fe=parseAxisParam(le,ce.shape);let me=fe;const ge=getAxesPermutation(me,he);let ve=ce;ge!=null&&(ve=transpose({inputs:{x:ce},backend:ne,attrs:{perm:ge}}),me=getInnerMostAxes(me.length,he)),assertAxesAreInnerMostDims("any",me,he);const[ye,be]=computeOutAndReduceShapes(ve.shape,me),Ee=sizeFromShape(be),Ce=reshape({inputs:{x:ve},backend:ne,attrs:{shape:[-1,Ee]}}),Se=reduce(Ce,Ce.dtype,"any",ne);let Te;if(ue){const ke=expandShapeToKeepDim(ye,fe);Te=reshape({inputs:{x:Se},backend:ne,attrs:{shape:ke}})}else Te=reshape({inputs:{x:Se},backend:ne,attrs:{shape:ye}});return ne.disposeIntermediateTensorInfo(Ce),ne.disposeIntermediateTensorInfo(Se),ge!=null&&ne.disposeIntermediateTensorInfo(ve),Te}const anyConfig={kernelName:Any,backendName:"webgl",kernelFunc:any};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ArgMinMaxProgram{constructor(ee,ne,ae){this.variableNames=["A"];const{windowSize:ce,batchSize:le,outSize:ue}=ee;ae||this.variableNames.push("bestIndicesA"),this.outputShape=[le,ue];const he=ne==="max"?">":"<",fe=ae?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${ce};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${ce}; i++) {
          int inIdx = ${fe};
          float candidate = getA(batch, inIdx);
          if (candidate ${he} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ArgMinMaxPackedProgram{constructor(ee,ne,ae,ce){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,assert$2(ee.length>2,()=>`Packed arg${ae.charAt(0).toUpperCase()+ae.slice(1)} supports only inputs with rank above 2.`);const le=ee[ee.length-1],ue=Math.ceil(le/ne);this.outputShape=ee.slice(0,-1),ue>1&&this.outputShape.push(ue),ce||this.variableNames.push("bestIndicesA");const he=this.outputShape,fe=he.length,me=getCoordsDataType(fe),ge=getChannels("coords",fe);let ve,ye;if(ue===1){ye=fe+1;const Be=getCoordsDataType(ye);ve=`
        ${Be} sourceLocR = ${Be}(${ge.join()}, 0);
        ++${ge[fe-1]};
        ${Be} sourceLocG = ${Be}(${ge.join()}, 0);
        ++${ge[fe-2]};
        ${Be} sourceLocA = ${Be}(${ge.join()}, 0);
        --${ge[fe-1]};
        ${Be} sourceLocB = ${Be}(${ge.join()}, 0);
        --${ge[fe-2]};`}else ye=fe,ve=`
        ${me} sourceLocR = coords;
        ++${ge[fe-1]};
        ${me} sourceLocG = coords;
        ++${ge[fe-2]};
        ${me} sourceLocA = coords;
        --${ge[fe-1]};
        ${me} sourceLocB = coords;
        --${ge[fe-2]};`;const be=["x","y","z","w","u","v"].slice(0,ye),Ee="."+be[ye-1],Ce=be.map(Be=>"int "+Be),Se=getChannels("sourceLocR",ye-1).concat("inIdx.r"),Te=getChannels("sourceLocG",ye-1).concat("inIdx.g"),ke=getChannels("sourceLocB",ye-1).concat("inIdx.b"),Ne=getChannels("sourceLocA",ye-1).concat("inIdx.a"),Fe=ae==="max"?"greaterThan":"lessThan",De=ce?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${Se.join()}),
                             getBestIndicesAChannel(${Te.join()}),
                             getBestIndicesAChannel(${ke.join()}),
                             getBestIndicesAChannel(${Ne.join()})));`,Oe=`vec4(
            getAChannel(${Se.join()}),
            hasNextCol ? getAChannel(${Te.join()}) : 0.,
            hasNextRow ? getAChannel(${ke.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${Ne.join()}) : 0.)`,Re=ce?"":`
      float getBestIndicesAChannel(${Ce.join()}) {
        return getChannel(getBestIndicesA(${be.join()}),
                                          vec2(${be.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${Ce.join()}) {
        return getChannel(getA(${be.join()}),
                               vec2(${be.slice(-2).join()}));
      }
      ${Re}
      void main() {
        ${me} coords = getOutputCoords();
        bool hasNextCol = ${ge[fe-1]} < ${he[fe-1]-1};
        bool hasNextRow = ${ge[fe-2]} < ${he[fe-2]-1};
        ${ve}
        ivec4 srcIdx = ivec4(sourceLocR${Ee}, sourceLocG${Ee},
          sourceLocB${Ee}, sourceLocA${Ee}) * ${ne};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${Oe};

        for (int i = 0; i < ${ne}; i++) {
          inIdx = srcIdx;
          ${De}
          vec4 candidate = ${Oe};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${Fe}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argReduce(re,ee,ne,ae=null){let ce=ee.shape[0],le=ee.shape[1];ae!=null&&(ce=ae.shape[0],le=ae.shape[1]);const ue=computeOptimalWindowSize(le),he={windowSize:ue,inSize:le,batchSize:ce,outSize:Math.ceil(le/ue)},fe=new ArgMinMaxProgram(he,ne,ae==null),me=[ee];ae!=null&&me.push(ae);const ge=re.runWebGLProgram(fe,me,"int32");if(ge.shape[1]===1)return ge;const ve=argReduce(re,ee,ne,ge);return re.disposeIntermediateTensorInfo(ge),ve}function argReducePacked(re,ee,ne,ae=null){const ce=ae!=null?ae.shape:ee.shape,le=ce[ce.length-1],ue=computeOptimalWindowSize(le),he=new ArgMinMaxPackedProgram(ce,ue,ne,ae==null),fe=ae==null?[ee]:[ee,ae],me=re.runWebGLProgram(he,fe,"int32");if(me.shape.length===ee.shape.length){const ge=argReducePacked(re,ee,ne,me);return re.disposeIntermediateTensorInfo(me),ge}return me}function argMinMaxReduce(re,ee,ne,ae){const ce=[ne];if(assertAxesAreInnerMostDims("arg"+ae.charAt(0).toUpperCase()+ae.slice(1),ce,ee.shape.length),!env().getBool("WEBGL_PACK_REDUCE")||ee.shape.length<=2){const le=[],[ue,he]=computeOutAndReduceShapes(ee.shape,ce),fe=sizeFromShape(he),me=reshape({inputs:{x:ee},backend:re,attrs:{shape:[-1,fe]}});le.push(me);const ge=argReduce(re,me,ae);le.push(ge);const ve=reshape({inputs:{x:ge},backend:re,attrs:{shape:ue}});return le.forEach(ye=>re.disposeIntermediateTensorInfo(ye)),ve}return argReducePacked(re,ee,ae)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMax(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le}=ae;let ue=parseAxisParam(le,ce.shape);const he=getAxesPermutation(ue,ce.shape.length);let fe=ce;const me=[];he!=null&&(fe=transpose({inputs:{x:ce},backend:ne,attrs:{perm:he}}),me.push(fe),ue=getInnerMostAxes(ue.length,fe.shape.length)),assertAxesAreInnerMostDims("argMax",[ue[0]],fe.shape.length);const ge=argMinMaxReduce(ne,fe,ue[0],"max");return me.forEach(ve=>ne.disposeIntermediateTensorInfo(ve)),ge}const argMaxConfig={kernelName:ArgMax,backendName:"webgl",kernelFunc:argMax};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMin(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le}=ae;let ue=parseAxisParam(le,ce.shape);const he=getAxesPermutation(ue,ce.shape.length);let fe=ce;const me=[];he!=null&&(fe=transpose({inputs:{x:ce},backend:ne,attrs:{perm:he}}),me.push(fe),ue=getInnerMostAxes(ue.length,fe.shape.length)),assertAxesAreInnerMostDims("argMin",[ue[0]],fe.shape.length);const ge=argMinMaxReduce(ne,fe,ue[0],"min");return me.forEach(ve=>ne.disposeIntermediateTensorInfo(ve)),ge}const argMinConfig={kernelName:ArgMin,backendName:"webgl",kernelFunc:argMin};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ASIN=CHECK_NAN_SNIPPET$2+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,asin=unaryKernelFunc({opSnippet:ASIN}),asinConfig={kernelName:Asin,backendName:"webgl",kernelFunc:asin};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ASINH=CHECK_NAN_SNIPPET$2+"return log(x + sqrt(x * x + 1.0));",asinh=unaryKernelFunc({opSnippet:ASINH}),asinhConfig={kernelName:Asinh,backendName:"webgl",kernelFunc:asinh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATAN=CHECK_NAN_SNIPPET$2+`
  return atan(x);
`,atan=unaryKernelFunc({opSnippet:ATAN}),atanConfig={kernelName:Atan,backendName:"webgl",kernelFunc:atan};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATAN2=CHECK_NAN_SNIPPET_BINARY+`
  return atan(a, b);
`,ATAN2_PACKED=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+CHECK_NAN_SNIPPET_BINARY_PACKED+`
  return result;
`,atan2=binaryKernelFunc({opSnippet:ATAN2,packedOpSnippet:ATAN2_PACKED}),atan2Config={kernelName:Atan2,backendName:"webgl",kernelFunc:atan2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATANH=CHECK_NAN_SNIPPET$2+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,atanh=unaryKernelFunc({opSnippet:ATANH}),atanhConfig={kernelName:Atanh,backendName:"webgl",kernelFunc:atanh};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pool2DProgram{constructor(ee,ne,ae,ce=!1,le=!1){if(this.variableNames=["x"],ne==="avg"&&ae)throw new Error("Cannot compute positions for average pool.");const ue=ee.filterWidth,he=ee.strideHeight,fe=ee.strideWidth,me=ee.dilationHeight,ge=ee.dilationWidth,ve=ee.effectiveFilterHeight,ye=ee.effectiveFilterWidth,be=ee.padInfo.top,Ee=ee.padInfo.left;this.outputShape=ee.outShape;const Ce=ne==="avg",Se=`((batch  * ${ee.inHeight} + xR) * ${ee.inWidth} + xC) * ${ee.inChannels} + d`,Te=`(xR * ${ee.inWidth} + xC) * ${ee.inChannels} + d`;let ke="0.0";if(Ce||(ke="-1.0 / 1e-20"),ae){const Be=">=";this.userCode=`
        const ivec2 strides = ivec2(${he}, ${fe});
        const ivec2 pads = ivec2(${be}, ${Ee});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${ve};
              wR += ${me}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${ee.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${ye};
                wC += ${ge}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${ee.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${Be} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${ce?le?Se:Te:`wR * ${ye} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const Ne="max";let Fe=`${ne}(${ne}(${ne}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;ne==="avg"&&(Fe="avgValue / count");const De=Math.floor(ue/4)*4,Oe=ue%4,Re=`
      if (${Ce}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${Ne}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${he}, ${fe});
      const ivec2 pads = ivec2(${be}, ${Ee});
      const float initializationValue = ${ke};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${ee.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${ke});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${ve};
            wR += ${me}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${ee.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${De}; wC += 4) {
            int xC = xCCorner + wC * ${ge};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${ge}, d),
              getValue(batch, xR, xC + 2 * ${ge}, d),
              getValue(batch, xR, xC + 3 * ${ge}, d)
            );

            ${Re}
          }

          int xC = xCCorner + ${De};
          if (${Oe===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${Re}
          } else if (${Oe===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${ge}, d),
              initializationValue,
              initializationValue
            );

            ${Re}
          } else if (${Oe===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${ge}, d),
              getValue(batch, xR, xC + 2 * ${ge}, d),
              initializationValue
            );

            ${Re}
          }
        }
        setOutput(${Fe});
      }
    `}}class Pool3DProgram{constructor(ee,ne,ae,ce=!1,le=!1){if(this.variableNames=["x"],ne==="avg"&&ae)throw new Error("Cannot compute positions for average pool.");const ue=ee.filterWidth,he=ee.strideDepth,fe=ee.strideHeight,me=ee.strideWidth,ge=ee.dilationDepth,ve=ee.dilationHeight,ye=ee.dilationWidth,be=ee.effectiveFilterDepth,Ee=ee.effectiveFilterHeight,Ce=ee.effectiveFilterWidth,Se=ee.padInfo.front,Te=ee.padInfo.top,ke=ee.padInfo.left;this.outputShape=ee.outShape;const Ne=ne==="avg";let Fe="0.0";if(Ne||(Fe="-1.0 / 1e-20"),ae){const je=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${he}, ${fe}, ${me});
        const ivec3 pads = ivec3(${Se}, ${Te}, ${ke});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${be};
              wD += ${ge}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${ee.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${Ee};
                wR += ${ve}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${ee.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${Ce};
                  wC += ${ye}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${ee.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${je} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${ce?le?`(((batch * ${ee.inDepth} + xD) * ${ee.inHeight} + xR) * ${ee.inWidth} + xC) * ${ee.inChannels} + ch`:`((xD * ${ee.inHeight} + xR) * ${ee.inWidth} + xC) * ${ee.inChannels} + ch`:`wD * ${Ee} * ${Ce} +
                      wR * ${Ce} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const De="max";let Oe=`${ne}(${ne}(${ne}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;ne==="avg"&&(Oe="avgValue / count");const Re=Math.floor(ue/4)*4,Be=ue%4,Le=`
      if (${Ne}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${De}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${he}, ${fe}, ${me});
      const ivec3 pads = ivec3(${Se}, ${Te}, ${ke});
      const float initializationValue = ${Fe};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${ee.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${Fe});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${be};
            wD += ${ge}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${ee.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${Ee};
            wR += ${ve}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${ee.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${Re}; wC += 4) {
              int xC = xCCorner + wC * ${ye};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${ye}, ch),
                getValue(batch, xD, xR, xC + 2 * ${ye}, ch),
                getValue(batch, xD, xR, xC + 3 * ${ye}, ch)
              );

              ${Le}
            }

            int xC = xCCorner + ${Re};
            if (${Be===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${Le}
            } else if (${Be===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${ye}, ch),
                initializationValue,
                initializationValue
              );

              ${Le}
            } else if (${Be===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${ye}, ch),
                getValue(batch, xD, xR, xC + 2 * ${ye}, ch),
                initializationValue
              );

              ${Le}
            }
          }
          setOutput(${Oe});
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee;assertNotComplex(ce,"avgPool");const{filterSize:le,strides:ue,pad:he,dimRoundingMode:fe}=ae,me=1;assert$2(eitherStridesOrDilationsAreOne(ue,me),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${ue} and dilations '${me}'`);const ge=computePool2DInfo(ce.shape,le,ue,me,he,fe);if(ge.filterWidth===1&&ge.filterHeight===1&&arraysEqual(ge.inShape,ge.outShape))return identity$3({inputs:{x:ce},backend:ne});const ve=new Pool2DProgram(ge,"avg",!1);return ne.runWebGLProgram(ve,[ce],"float32")}const avgPoolConfig={kernelName:AvgPool,backendName:"webgl",kernelFunc:avgPool};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3D(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{filterSize:le,strides:ue,pad:he,dimRoundingMode:fe,dataFormat:me}=ae,ge=[1,1,1],ve=computePool3DInfo(ce.shape,le,ue,ge,he,fe,me),ye=new Pool3DProgram(ve,"avg",!1);return ne.runWebGLProgram(ye,[ce],"float32")}const avgPool3DConfig={kernelName:AvgPool3D,backendName:"webgl",kernelFunc:avgPool3D};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AvgPool2DBackpropProgram{constructor(ee){this.variableNames=["dy"],this.outputShape=ee.inShape;const ne=ee.filterHeight,ae=ee.filterWidth,ce=ee.strideHeight,le=ee.strideWidth,ue=ee.dilationHeight,he=ee.dilationWidth,fe=ee.effectiveFilterHeight,me=ee.effectiveFilterWidth,ge=fe-1-ee.padInfo.top,ve=me-1-ee.padInfo.left,ye=1/(ne*ae);this.userCode=`
      const ivec2 pads = ivec2(${ge}, ${ve});
      const float avgMultiplier = float(${ye});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${fe};
            wR += ${ue}) {
          float dyR = float(dyRCorner + wR) / ${ce}.0;

          if (dyR < 0.0 || dyR >= ${ee.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${me};
            wC+= ${he}) {
            float dyC = float(dyCCorner + wC) / ${le}.0;

            if (dyC < 0.0 || dyC >= ${ee.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class AvgPool3DBackpropProgram{constructor(ee){this.variableNames=["dy"],this.outputShape=ee.inShape;const ne=ee.filterDepth,ae=ee.filterHeight,ce=ee.filterWidth,le=ee.strideDepth,ue=ee.strideHeight,he=ee.strideWidth,fe=ee.dilationDepth,me=ee.dilationHeight,ge=ee.dilationWidth,ve=ee.effectiveFilterDepth,ye=ee.effectiveFilterHeight,be=ee.effectiveFilterWidth,Ee=ve-1-ee.padInfo.front,Ce=ye-1-ee.padInfo.top,Se=be-1-ee.padInfo.left,Te=1/(ne*ae*ce);this.userCode=`
      const ivec3 pads = ivec3(${Ee}, ${Ce}, ${Se});
      const float avgMultiplier = float(${Te});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${ve};
            wD += ${fe}) {
          float dyD = float(dyDCorner + wD) / ${le}.0;

          if (dyD < 0.0 || dyD >= ${ee.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${ye};
              wR += ${me}) {
            float dyR = float(dyRCorner + wR) / ${ue}.0;

            if (dyR < 0.0 || dyR >= ${ee.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${be};
                wC += ${ge}) {
              float dyC = float(dyCCorner + wC) / ${he}.0;

              if (dyC < 0.0 || dyC >= ${ee.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3DGrad(re){const{inputs:ee,backend:ne,attrs:ae}=re,{dy:ce,input:le}=ee,ue=le,{filterSize:he,strides:fe,pad:me,dimRoundingMode:ge}=ae,ve=[1,1,1],ye=computePool3DInfo(ue.shape,he,fe,ve,me,ge),be=new AvgPool3DBackpropProgram(ye);return ne.runWebGLProgram(be,[ce],ue.dtype)}const avgPoolGrad3DConfig={kernelName:AvgPool3DGrad,backendName:"webgl",kernelFunc:avgPool3DGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPoolGrad(re){const{inputs:ee,backend:ne,attrs:ae}=re,{dy:ce,input:le}=ee,ue=le;assertNotComplex([ce,le],"avgPoolGrad");const{filterSize:he,strides:fe,pad:me}=ae,ge=computePool2DInfo(ue.shape,he,fe,1,me),ve=new AvgPool2DBackpropProgram(ge);return ne.runWebGLProgram(ve,[ce],ue.dtype)}const avgPoolGradConfig={kernelName:AvgPoolGrad,backendName:"webgl",kernelFunc:avgPoolGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchMatMul(re){const{inputs:ee,backend:ne,attrs:ae}=re,{a:ce,b:le}=ee,{transposeA:ue,transposeB:he}=ae;return batchMatMulImpl({a:ce,b:le,transposeA:ue,transposeB:he,backend:ne})}const batchMatMulConfig={kernelName:BatchMatMul,backendName:"webgl",kernelFunc:batchMatMul};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BatchNormProgram{constructor(ee,ne,ae,ce,le,ue){this.outputShape=[],this.variableNames=["x","mean","variance"],assertAndGetBroadcastShape(ee,ne),assertAndGetBroadcastShape(ee,ae);let he="0.0";ce!=null&&(assertAndGetBroadcastShape(ee,ce),this.variableNames.push("offset"),he="getOffsetAtOutCoords()");let fe="1.0";le!=null&&(assertAndGetBroadcastShape(ee,le),this.variableNames.push("scale"),fe="getScaleAtOutCoords()"),this.outputShape=ee,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${he};
        float scale = ${fe};
        float inv = scale * inversesqrt(variance + float(${ue}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BatchNormPackedProgram{constructor(ee,ne,ae,ce,le,ue){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],assertAndGetBroadcastShape(ee,ne),assertAndGetBroadcastShape(ee,ae);let he="vec4(0.0)";ce!=null&&(assertAndGetBroadcastShape(ee,ce),this.variableNames.push("offset"),he="getOffsetAtOutCoords()");let fe="vec4(1.0)";le!=null&&(assertAndGetBroadcastShape(ee,le),this.variableNames.push("scale"),fe="getScaleAtOutCoords()"),this.outputShape=ee,this.userCode=`
      void main() {
        vec4 offset = ${he};
        vec4 scale = ${fe};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${ue}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchNorm=({inputs:re,backend:ee,attrs:ne})=>{const{x:ae,mean:ce,variance:le,offset:ue,scale:he}=re;assert$2(ce.shape.length===le.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),assert$2(ue==null||ce.shape.length===ue.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),assert$2(he==null||ce.shape.length===he.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:fe}=ne;fe==null&&(fe=.001);const me=[ae,ce,le];let ge=null;ue!=null&&(ge=ue.shape,me.push(ue));let ve=null;he!=null&&(ve=he.shape,me.push(he));const ye=env().getBool("WEBGL_PACK_NORMALIZATION")?new BatchNormPackedProgram(ae.shape,ce.shape,le.shape,ge,ve,fe):new BatchNormProgram(ae.shape,ce.shape,le.shape,ge,ve,fe);return ee.runWebGLProgram(ye,me,me[0].dtype)},batchNormConfig={kernelName:FusedBatchNorm,backendName:"webgl",kernelFunc:batchNorm};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SliceProgram{constructor(ee){this.variableNames=["source"],this.outputShape=ee,this.rank=ee.length;const ne=getCoordsDataType(this.rank),ae=`uniform int start[${this.rank}];`,ce=getCoords$1(this.rank);let le;const ue=ee.map((he,fe)=>`sourceLoc.${coords[fe]} = start[${fe}] + coords.${coords[fe]};`);le=`
        ${ne} sourceLoc;
        ${ne} coords = getOutputCoords();
        ${ue.join(`
`)}
      `,this.userCode=`
      ${ae}
      void main() {
        ${le}
        setOutput(getSource(${ce}));
      }
    `}getCustomSetupFunc(ee){if(ee.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${ee.length})`);return(ne,ae)=>{this.startLoc==null&&(this.startLoc=ne.getUniformLocationNoThrow(ae,"start"),this.startLoc==null)||ne.gl.uniform1iv(this.startLoc,ee)}}}const coords=["x","y","z","w","u","v"];function getCoords$1(re){if(re===1)return"sourceLoc";if(re<=6)return coords.slice(0,re).map(ee=>"sourceLoc."+ee).join(",");throw Error(`Slicing for rank ${re} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SlicePackedProgram{constructor(ee){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ee,this.rank=ee.length;const ne=getCoordsDataType(this.rank),ae=getChannels("coords",this.rank),ce=getChannels("sourceLoc",this.rank),le=this.rank===1?"sourceLoc":`vec2(${ce.slice(-2).join()})`,ue=`getChannel(getSource(${ce.join()}), ${le})`,he=`
      result.x = ${ue};
      if (++${ae[this.rank-1]} < ${ee[this.rank-1]}) {
        ++${ce[this.rank-1]};
        result.y = ${ue};
        --${ce[this.rank-1]};
      }
    `,fe=this.rank===1?"":`
      --${ae[this.rank-1]};
      if (++${ae[this.rank-2]} < ${ee[this.rank-2]}) {
        ++${ce[this.rank-2]};
        result.z = ${ue};
        if (++${ae[this.rank-1]} < ${ee[this.rank-1]}) {
          ++${ce[this.rank-1]};
          result.w = ${ue};
        }
      }
    `,me=this.rank<=4?`sourceLoc = coords +
            ${ne}(${ee.map((ge,ve)=>`start[${ve}]`).join()});`:ee.map((ge,ve)=>`${ce[ve]} = ${ae[ve]} + start[${ve}];`).join(`
`);this.userCode=`
      uniform int start[${this.rank}];
      void main() {
        ${ne} coords = getOutputCoords();
        ${ne} sourceLoc;
        ${me}
        vec4 result = vec4(0.);
        ${he}
        ${fe}
        setOutput(result);
      }
    `}getCustomSetupFunc(ee){if(ee.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${ee.length})`);return(ne,ae)=>{this.startLoc==null&&(this.startLoc=ne.getUniformLocationNoThrow(ae,"start"),this.startLoc==null)||ne.gl.uniform1iv(this.startLoc,ee)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function shallowSlice(re,ee,ne,ae){const ce=ae.texData.get(re.dataId),le=ae.makeTensorInfo(ne,re.dtype),ue=ae.texData.get(le.dataId);Object.assign(ue,ce),ue.complexParentRefCount=0,ue.refCount=1,ue.shape=ne,ue.dtype=re.dtype;let he=computeFlatOffset(ee,computeStrides(re.shape));ce.slice&&(he+=ce.slice.flatOffset),ue.slice={flatOffset:he,origDataId:ce.slice&&ce.slice.origDataId||re.dataId};const fe=ae.dataRefCount.get(ue.slice.origDataId)||1;return ae.dataRefCount.set(ue.slice.origDataId,fe+1),le}function slice$2(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{begin:le,size:ue}=ae,[he,fe]=parseSliceParams(ce,le,ue);if(assertParamsValid(ce,he,fe),sizeFromShape(fe)===0)return ne.makeTensorInfo(fe,ce.dtype,[]);if(ne.shouldExecuteOnCPU([ce])||ce.dtype==="string"){const ve=ne.texData.get(ce.dataId),ye=sliceImplCPU(ve.values,he,fe,ce.shape,ce.dtype);return ne.makeTensorInfo(fe,ce.dtype,ye)}const{isPacked:me}=ne.texData.get(ce.dataId),ge=isSliceContinous(ce.shape,he,fe);if(me||!ge){const ve=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new SlicePackedProgram(fe):new SliceProgram(fe),ye=ve.getCustomSetupFunc(he);return ne.runWebGLProgram(ve,[ce],ce.dtype,ye)}return ne.uploadToGPU(ce.dataId),shallowSlice(ce,he,fe,ne)}const sliceConfig={kernelName:Slice,backendName:"webgl",kernelFunc:slice$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchToSpaceND=re=>{const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{blockShape:le,crops:ue}=ae;assert$2(ce.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const he=le.reduce((ke,Ne)=>ke*Ne),fe=getReshaped(ce.shape,le,he),me=getPermuted(fe.length,le.length),ge=getReshapedPermuted(ce.shape,le,he),ve=getSliceBeginCoords(ue,le.length),ye=getSliceSize(ge,ue,le.length),be=[],Ee=reshape({inputs:{x:ce},backend:ne,attrs:{shape:fe}}),Ce=transpose({inputs:{x:Ee},backend:ne,attrs:{perm:me}}),Se=reshape({inputs:{x:Ce},backend:ne,attrs:{shape:ge}}),Te=slice$2({inputs:{x:Se},backend:ne,attrs:{begin:ve,size:ye}});return be.push(Ee),be.push(Ce),be.push(Se),be.forEach(ke=>ne.disposeIntermediateTensorInfo(ke)),Te},batchToSpaceNDConfig={kernelName:BatchToSpaceND,backendName:"webgl",kernelFunc:batchToSpaceND};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bincount(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,weights:le}=ee,{size:ue}=ae,he=ne.readSync(ce.dataId),fe=ne.readSync(le.dataId),me=bincountImplCPU(he,fe,le.dtype,le.shape,ue);return ne.makeTensorInfo([ue],le.dtype,me)}const bincountConfig={kernelName:Bincount,backendName:"webgl",kernelFunc:bincount};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NOT_EQUAL="return float(a != b);",notEqual=binaryKernelFunc({opSnippet:NOT_EQUAL,dtype:"bool"}),notEqualConfig={kernelName:NotEqual,backendName:"webgl",kernelFunc:notEqual};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function real(re){const{inputs:ee,backend:ne}=re,{input:ae}=ee,ce=ne.texData.get(ae.dataId);return identity$3({inputs:{x:ce.complexTensorInfos.real},backend:ne})}const realConfig={kernelName:Real,backendName:"webgl",kernelFunc:real};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TO_INT="return float(int(x));";function int(re,ee){const ne=new UnaryOpProgram(re.shape,TO_INT),ae=ee.runWebGLProgram(ne,[re],"int32");return{dataId:ae.dataId,shape:ae.shape,dtype:ae.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cast(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{dtype:le}=ae;if(le==="complex64"){if(ce.dtype==="complex64")return identity$3({inputs:{x:ce},backend:ne});const ue=zeros$1(ce.shape),he=cast({inputs:{x:ce},backend:ne,attrs:{dtype:"float32"}}),fe=complex({inputs:{real:he,imag:ue},backend:ne});return ue.dispose(),ne.disposeIntermediateTensorInfo(he),fe}if(ce.dtype==="complex64"){const ue=real({inputs:{input:ce},backend:ne}),he=cast({inputs:{x:ue},backend:ne,attrs:{dtype:le}});return ne.disposeIntermediateTensorInfo(ue),he}if(!hasEncodingLoss(ce.dtype,le)){const ue=identity$3({inputs:{x:ce},backend:ne});return{dataId:ue.dataId,shape:ue.shape,dtype:le}}if(le==="int32")return int(ce,ne);if(le==="bool"){const ue=ne.makeTensorInfo([],"bool",getTypedArrayFromDType("bool",1)),fe=notEqual({inputs:{a:ce,b:ue},backend:ne});return ne.disposeIntermediateTensorInfo(ue),fe}throw new Error(`Error in Cast: failed to cast ${ce.dtype} to ${le}`)}const castConfig={kernelName:Cast,backendName:"webgl",kernelFunc:cast};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CEIL="return ceil(x);",ceil=unaryKernelFunc({opSnippet:CEIL,packedOpSnippet:CEIL,cpuKernelImpl:ceilImplCPU}),ceilConfig={kernelName:Ceil,backendName:"webgl",kernelFunc:ceil};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ClipProgram{constructor(ee){this.variableNames=["A"],this.outputShape=ee,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}getCustomSetupFunc(ee,ne){return(ae,ce)=>{this.minLoc==null&&(this.minLoc=ae.getUniformLocationNoThrow(ce,"minVal"),this.maxLoc=ae.getUniformLocationNoThrow(ce,"maxVal")),ae.gl.uniform1f(this.minLoc,ee),ae.gl.uniform1f(this.maxLoc,ne)}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ClipPackedProgram{constructor(ee){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ee,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}getCustomSetupFunc(ee,ne){return(ae,ce)=>{this.minLoc==null&&(this.minLoc=ae.getUniformLocationNoThrow(ce,"minVal"),this.maxLoc=ae.getUniformLocationNoThrow(ce,"maxVal")),ae.gl.uniform1f(this.minLoc,ee),ae.gl.uniform1f(this.maxLoc,ne)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function clipByValue(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{clipValueMin:le,clipValueMax:ue}=ae;let he;env().getBool("WEBGL_PACK_CLIP")?he=new ClipPackedProgram(ce.shape):he=new ClipProgram(ce.shape);const fe=he.getCustomSetupFunc(le,ue);return ne.runWebGLProgram(he,[ce],ce.dtype,fe)}const clipByValueConfig={kernelName:ClipByValue,backendName:"webgl",kernelFunc:clipByValue};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ComplexAbsProgram{constructor(ee){this.variableNames=["real","imag"],this.outputShape=ee,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function makeComplexComponentTensorInfo(re,ee){return{dataId:ee.dataId,dtype:ee.dtype,shape:re.shape}}function complexAbs(re){const{inputs:ee,backend:ne}=re,{x:ae}=ee,ce=ne.texData.get(ae.dataId),le=new ComplexAbsProgram(ae.shape),ue=[makeComplexComponentTensorInfo(ae,ce.complexTensorInfos.real),makeComplexComponentTensorInfo(ae,ce.complexTensorInfos.imag)];return ne.runWebGLProgram(le,ue,ue[0].dtype)}const complexAbsConfig={kernelName:ComplexAbs,backendName:"webgl",kernelFunc:complexAbs};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ConcatProgram{constructor(ee){this.outputShape=[],this.outputShape=computeOutShape$1(ee,1),this.variableNames=ee.map((ue,he)=>`T${he}`);const ne=new Array(ee.length-1);ne[0]=ee[0][1];for(let ue=1;ue<ne.length;ue++)ne[ue]=ne[ue-1]+ee[ue][1];const ae=[`if (yC < ${ne[0]}) setOutput(getT0(yR, yC));`];for(let ue=1;ue<ne.length;ue++){const he=ne[ue-1];ae.push(`else if (yC < ${ne[ue]}) setOutput(getT${ue}(yR, yC-${he}));`)}const ce=ne.length,le=ne[ne.length-1];ae.push(`else setOutput(getT${ce}(yR, yC-${le}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${ae.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ConcatPackedProgram{constructor(ee,ne){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=computeOutShape$1(ee,ne);const ae=this.outputShape,ce=ae.length,le=getCoordsDataType(ce),ue=getChannels("coords",ce),he=["x","y","z","w","u","v"].slice(0,ce);this.variableNames=ee.map((Ce,Se)=>`T${Se}`);const fe=new Array(ee.length-1);fe[0]=ee[0][ne];for(let Ce=1;Ce<fe.length;Ce++)fe[Ce]=fe[Ce-1]+ee[Ce][ne];const me=he[ne],ge=he.slice(-2),ve=he.join();let ye=`if (${me} < ${fe[0]}) {
        return getChannel(
            getT0(${ve}), vec2(${ge.join()}));
        }`;for(let Ce=1;Ce<fe.length;Ce++){const Se=fe[Ce-1];ye+=`
        if (${me} < ${fe[Ce]}  && ${me} >= ${fe[Ce-1]}) {
          return getChannel(
            getT${Ce}(${shiftedChannels(he,me,Se)}),
            vec2(${shiftedChannels(ge,me,Se)}));
        }`}const be=fe.length,Ee=fe[fe.length-1];ye+=`
        return getChannel(
          getT${be}(${shiftedChannels(he,me,Ee)}),
          vec2(${shiftedChannels(ge,me,Ee)}));`,this.userCode=`
      float getValue(${he.map(Ce=>"int "+Ce)}) {
        ${ye}
      }

      void main() {
        ${le} coords = getOutputCoords();
        vec4 result = vec4(getValue(${ue}), 0., 0., 0.);

        ${ue[ce-1]} = ${ue[ce-1]} + 1;
        if (${ue[ce-1]} < ${ae[ce-1]}) {
          result.g = getValue(${ue});
        }

        ${ue[ce-2]} = ${ue[ce-2]} + 1;
        if (${ue[ce-2]} < ${ae[ce-2]}) {
          result.a = getValue(${ue});
        }

        ${ue[ce-1]} = ${ue[ce-1]} - 1;
        if (${ue[ce-2]} < ${ae[ce-2]} &&
            ${ue[ce-1]} < ${ae[ce-1]}) {
          result.b = getValue(${ue});
        }
        setOutput(result);
      }
    `}}function shiftedChannels(re,ee,ne){const ae=re.indexOf(ee);return re.map((le,ue)=>ue===ae?`${le} - ${ne}`:le).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imag(re){const{inputs:ee,backend:ne}=re,{input:ae}=ee,ce=ne.texData.get(ae.dataId);return identity$3({inputs:{x:ce.complexTensorInfos.imag},backend:ne})}const imagConfig={kernelName:Imag,backendName:"webgl",kernelFunc:imag};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concatImpl(re,ee,ne){const ae=re[0].dtype;if(ae==="complex64"){const me=re.map(Ee=>real({inputs:{input:Ee},backend:ne})),ge=re.map(Ee=>imag({inputs:{input:Ee},backend:ne})),ve=concatImpl(me,ee,ne),ye=concatImpl(ge,ee,ne),be=complex({inputs:{real:ve,imag:ye},backend:ne});return me.forEach(Ee=>ne.disposeIntermediateTensorInfo(Ee)),ge.forEach(Ee=>ne.disposeIntermediateTensorInfo(Ee)),ne.disposeIntermediateTensorInfo(ve),ne.disposeIntermediateTensorInfo(ye),be}if(ae==="string"){const{tensors2D:me,outShape:ge}=computeTensors2D(re,ee,ne),ve=me.map(Se=>({vals:ne.readSync(Se.dataId),shape:Se.shape})),ye=me[0].shape[0]===1,be=concatImplCPU(ve,ge,ae,ye),Ee=computeOutShape$1(re.map(Se=>Se.shape),ee),Ce=ne.makeTensorInfo(Ee,ae,be);return me.forEach(Se=>ne.disposeIntermediateTensorInfo(Se)),Ce}if(re.length>env().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const me=Math.floor(re.length/2),ge=concatImpl(re.slice(0,me),ee,ne),ve=concatImpl(re.slice(me),ee,ne),ye=concatImpl([ge,ve],ee,ne);return ne.disposeIntermediateTensorInfo(ge),ne.disposeIntermediateTensorInfo(ve),ye}if(env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&re[0].shape.length>1){const me=new ConcatPackedProgram(re.map(ge=>ge.shape),ee);return ne.runWebGLProgram(me,re,ae)}const{tensors2D:ce,outShape:le}=computeTensors2D(re,ee,ne),ue=new ConcatProgram(ce.map(me=>me.shape)),he=ne.runWebGLProgram(ue,ce,ae);ce.forEach(me=>ne.disposeIntermediateTensorInfo(me));const fe=reshape({inputs:{x:he},attrs:{shape:le},backend:ne});return ne.disposeIntermediateTensorInfo(he),fe}function computeTensors2D(re,ee,ne){const ae=computeOutShape$1(re.map(le=>le.shape),ee);return{tensors2D:re.map(le=>reshape({inputs:{x:le},attrs:{shape:[-1,sizeFromShape(le.shape.slice(ee))]},backend:ne})),outShape:ae}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concat(re){const{inputs:ee,backend:ne,attrs:ae}=re,{axis:ce}=ae,le=parseAxisParam(ce,ee[0].shape)[0],ue=computeOutShape$1(ee.map(me=>me.shape),le);if(sizeFromShape(ue)===0)return ne.makeTensorInfo(ue,ee[0].dtype,[]);const he=ee.filter(me=>sizeFromShape(me.shape)>0);if(he.length===1)return identity$3({inputs:{x:he[0]},backend:ne});const fe=he.map(me=>me.shape);return assertParamsConsistent(fe,le),concatImpl(he,le,ne)}const concatConfig={kernelName:Concat,backendName:"webgl",kernelFunc:concat};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Conv2DProgram{constructor(ee,ne=!1,ae=null,ce=!1,le=!1){this.variableNames=["x","W"],this.outputShape=ee.outShape;const ue=ee.padInfo.top,he=ee.padInfo.left,fe=ee.strideHeight,me=ee.strideWidth,ge=ee.dilationHeight,ve=ee.dilationWidth,ye=ee.filterHeight,be=ee.filterWidth,Ee=Math.floor(ee.inChannels/4)*4,Ce=ee.inChannels%4,Se=ee.dataFormat==="channelsLast",Te=Se?1:2,ke=Se?2:3,Ne=Se?3:1;let Fe="",De="";ae&&(ce?Fe=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${ae}
        }`:le?Fe=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${ae}
        }`:Fe=`
          float activation(float x) {
            ${ae}
          }
        `,De="result = activation(result);");const Oe=ne?"result += getBiasAtOutCoords();":"";ne&&this.variableNames.push("bias"),ce&&this.variableNames.push("preluActivationWeights"),le&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${Fe}

      const ivec2 strides = ivec2(${fe}, ${me});
      const ivec2 pads = ivec2(${ue}, ${he});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${Ne}];

        ivec2 xRCCorner =
            ivec2(coords[${Te}], coords[${ke}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${ye}; wR++) {
          int xR = xRCorner + wR * ${ge};

          if (xR < 0 || xR >= ${ee.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${be}; wC++) {
            int xC = xCCorner + wC * ${ve};

            if (xC < 0 || xC >= ${ee.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${Ee}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${Se}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${Ce===1}) {

              if (${Se}) {
                dotProd +=
                    getX(batch, xR, xC, ${Ee}) *
                    getW(wR, wC, ${Ee}, d2);
              } else {
                dotProd +=
                    getX(batch, ${Ee}, xR, xC) *
                    getW(wR, wC, ${Ee}, d2);
              }

            } else if (${Ce===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${Ee}, d2),
                getW(wR, wC, ${Ee} + 1, d2)
              );

              if (${Se}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${Ee}),
                  getX(batch, xR, xC, ${Ee} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${Ee}, xR, xC),
                  getX(batch, ${Ee} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${Ce===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${Ee}, d2),
                getW(wR, wC, ${Ee} + 1, d2),
                getW(wR, wC, ${Ee} + 2, d2)
              );

              if (${Se}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${Ee}),
                  getX(batch, xR, xC, ${Ee} + 1),
                  getX(batch, xR, xC, ${Ee} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${Ee}, xR, xC),
                  getX(batch, ${Ee} + 1, xR, xC),
                  getX(batch, ${Ee} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${Oe}
        ${De}
        setOutput(result);
      }
    `}}class Conv3DProgram{constructor(ee){this.variableNames=["x","W"],this.outputShape=ee.outShape;const ne=ee.padInfo.front,ae=ee.padInfo.top,ce=ee.padInfo.left,le=ee.strideDepth,ue=ee.strideHeight,he=ee.strideWidth,fe=ee.dilationDepth,me=ee.dilationHeight,ge=ee.dilationWidth,ve=ee.filterDepth,ye=ee.filterHeight,be=ee.filterWidth,Ee=Math.floor(ee.inChannels/4)*4,Ce=ee.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${le}, ${ue}, ${he});
      const ivec3 pads = ivec3(${ne}, ${ae}, ${ce});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${ve}; wF++) {
          int xF = xFCorner + wF * ${fe};

          if (xF < 0 || xF >= ${ee.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${ye}; wR++) {
            int xR = xRCorner + wR * ${me};

            if (xR < 0 || xR >= ${ee.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${be}; wC++) {
              int xC = xCCorner + wC * ${ge};

              if (xC < 0 || xC >= ${ee.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${Ee}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${Ce===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${Ee}) *
                  getW(wF, wR, wC, ${Ee}, d2);
              } else if (${Ce===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${Ee}),
                  getX(batch, xF, xR, xC, ${Ee} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${Ee}, d2),
                  getW(wF, wR, wC, ${Ee} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${Ce===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${Ee}),
                  getX(batch, xF, xR, xC, ${Ee} + 1),
                  getX(batch, xF, xR, xC, ${Ee} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${Ee}, d2),
                  getW(wF, wR, wC, ${Ee} + 1, d2),
                  getW(wF, wR, wC, ${Ee} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Im2ColPackedProgram{constructor(ee,ne,ae){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ee;const{filterWidth:ce,inChannels:le,strideWidth:ue,strideHeight:he,padInfo:fe,outWidth:me,dilationWidth:ge,dilationHeight:ve,dataFormat:ye}=ae,{left:be,top:Ee}=fe,Ce=le*ce,Se=getGlslDifferences(),Te=ye==="channelsLast",ke=Te?0:1,Ne=Te?1:2;let Fe="";for(let De=0;De<=1;De++)for(let Oe=0;Oe<=1;Oe++)Fe+=`
          blockIndex = rc.y + ${Oe};
          pos = rc.x + ${De};

          if(blockIndex < ${ee[1]} && pos < ${ee[0]}) {
            offsetY = int(blockIndex / (${me})) * ${he} - ${Ee};
            d0 = offsetY + ${ve} * (pos / ${Ce});

            if(d0 < ${ne[ke]} && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), ${me}.) * ${ue}. - ${be}.);
              d1 = offsetX + ${ge} * (int(mod(float(pos), ${Ce}.) / ${le}.));

              if(d1 < ${ne[Ne]} && d1 >= 0) {

                ch = int(mod(float(pos), ${le}.));

                if (${Te}) {
                  innerDims = vec2(d1, ch);
                  result[${De*2+Oe}] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${De*2+Oe}] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${Fe}

        ${Se.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2dByMatMul({x:re,filter:ee,convInfo:ne,backend:ae,bias:ce=null,preluActivationWeights:le=null,leakyreluAlpha:ue=0,activation:he=null}){const fe=re.shape,me=ae.texData.get(re.dataId),ge=ne.inChannels,ve=fe[0]*fe[1]*fe[2],ye=ne.outChannels,be=ne.dataFormat==="channelsLast",Ee=!1,Ce=!1;let Se;const Te=[],ke=(ve===1||ye===1)&&ge>MATMUL_SHARED_DIM_THRESHOLD,Ne=fe[2]%2!==0&&!!me.isPacked;if(ke||!env().getBool("WEBGL_LAZILY_UNPACK")||!env().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!Ne){const Fe=be?fe[0]*fe[1]*fe[2]:fe[0]*fe[2]*fe[3],De=reshape({inputs:{x:re},backend:ae,attrs:{shape:[1,Fe,ne.inChannels]}}),Oe=reshape({inputs:{x:ee},backend:ae,attrs:{shape:[1,ne.inChannels,ne.outChannels]}}),Re=batchMatMulImpl({a:De,b:Oe,transposeA:Ee,transposeB:Ce,backend:ae,bias:ce,activation:he,preluActivationWeights:le,leakyreluAlpha:ue});Se=reshape({inputs:{x:Re},backend:ae,attrs:{shape:ne.outShape}}),Te.push(De),Te.push(Oe),Te.push(Re)}else{const Fe=be?fe[0]*fe[1]*(fe[2]+1):fe[0]*fe[2]*(fe[3]+1),De={dataId:re.dataId,shape:[1,Fe,ne.inChannels],dtype:re.dtype},Oe=me.shape;me.shape=me.shape.slice(),me.shape[me.shape.length-2]++,assert$2(isReshapeFree(me.shape,De.shape),()=>`packed reshape ${me.shape} to ${De.shape} isn't free`);const Re=reshape({inputs:{x:ee},backend:ae,attrs:{shape:[1,ne.inChannels,ne.outChannels]}});Te.push(Re);const Be=batchMatMulImpl({a:De,b:Re,backend:ae,transposeA:Ee,transposeB:Ce,bias:ce,activation:he,preluActivationWeights:le,leakyreluAlpha:ue}),Le=ae.texData.get(Be.dataId);assert$2(Le.isPacked,()=>"batchMatMul result is expected to be packed"),me.shape=Oe,Le.shape=ne.outShape,Se=identity$3({inputs:{x:Be},backend:ae}),Se.shape=ne.outShape,Te.push(Be)}for(const Fe of Te)ae.disposeIntermediateTensorInfo(Fe);return Se}function conv2dWithIm2Row({x:re,filter:ee,convInfo:ne,backend:ae,bias:ce=null,preluActivationWeights:le=null,leakyreluAlpha:ue=0,activation:he=null}){const{filterWidth:fe,filterHeight:me,inChannels:ge,outWidth:ve,outHeight:ye,dataFormat:be}=ne,Ee=be==="channelsLast",Ce=fe*me*ge,Se=ye*ve,Te=[Ce,Se],ke=!0,Ne=!1,Fe=[],De=reshape({inputs:{x:re},backend:ae,attrs:{shape:re.shape.slice(1)}}),Oe=reshape({inputs:{x:ee},backend:ae,attrs:{shape:[1,Ce,sizeFromShape(ee.shape)/Ce]}});Fe.push(De),Fe.push(Oe);const Re=new Im2ColPackedProgram(Te,De.shape,ne),Be=ae.runWebGLProgram(Re,[De],"float32"),Le=reshape({inputs:{x:Be},backend:ae,attrs:{shape:[1,Te[0],Te[1]]}});Fe.push(Be),Fe.push(Le);const je=ce!=null,Ge=le!=null,qe=he==="leakyrelu",Ue=he?mapActivationToShaderProgram(he,!0):null,ze=new MatMulPackedProgram(Le.shape,Oe.shape,[1,Se,ne.outChannels],ke,Ne,je,Ue,Ge,qe),He=[Le,Oe];if(ce&&He.push(ce),Ge&&He.push(le),qe){const Ze=ae.makeTensorInfo([],"float32",createScalarValue(ue,"float32"));He.push(Ze),Fe.push(Ze)}const Ye=ae.runWebGLProgram(ze,He,"float32"),Xe=Ee?[1,ye,ve,ne.outChannels]:[1,ne.outChannels,ye,ve],We=reshape({inputs:{x:Ye},backend:ae,attrs:{shape:Xe}});Fe.push(Ye);for(const Ze of Fe)ae.disposeIntermediateTensorInfo(Ze);return We}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2d(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,filter:le}=ee,{strides:ue,pad:he,dataFormat:fe,dilations:me,dimRoundingMode:ge}=ae,ve=convertConv2DDataFormat(fe),ye=computeConv2DInfo(ce.shape,le.shape,ue,me,he,ge,!1,ve);let be;if(ye.filterHeight===1&&ye.filterWidth===1&&ye.dilationHeight===1&&ye.dilationWidth===1&&ye.strideHeight===1&&ye.strideWidth===1&&(ye.padInfo.type==="SAME"||ye.padInfo.type==="VALID"))be=conv2dByMatMul({x:ce,filter:le,convInfo:ye,backend:ne});else if(env().getBool("WEBGL_CONV_IM2COL")&&ce.shape[0]===1)be=conv2dWithIm2Row({x:ce,filter:le,convInfo:ye,backend:ne});else{const Ce=new Conv2DProgram(ye);be=ne.runWebGLProgram(Ce,[ce,le],"float32")}const Ee=reshape({inputs:{x:be},backend:ne,attrs:{shape:ye.outShape}});return ne.disposeIntermediateTensorInfo(be),Ee}const conv2DConfig={kernelName:Conv2D$1,backendName:"webgl",kernelFunc:conv2d};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Conv2DDerFilterProgram{constructor(ee){this.variableNames=["x","dy"],this.outputShape=ee.filterShape;const ne=ee.strideHeight,ae=ee.strideWidth,ce=ee.padInfo.top,le=ee.padInfo.left,ue=ee.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${ee.batchSize}; b++) {
          for (int yR = 0; yR < ${ee.outHeight}; yR++) {
            int xR = wR + yR * ${ne} - ${ce};

            if (xR < 0 || xR >= ${ee.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${ee.outWidth}; yC++) {
              int xC = wC + yC * ${ae} - ${le};

              if (xC < 0 || xC >= ${ee.inWidth}) {
                continue;
              }

              if (${ue}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Conv2DDerInputProgram{constructor(ee){this.variableNames=["dy","W"],this.outputShape=ee.inShape;const ne=ee.filterHeight,ae=ee.filterWidth,ce=ee.strideHeight,le=ee.strideWidth,ue=ee.dataFormat==="channelsLast",he=ne-1-ee.padInfo.top,fe=ae-1-ee.padInfo.left,me=ue?1:2,ge=ue?2:3,ve=ue?3:1;this.userCode=`
      const ivec2 pads = ivec2(${he}, ${fe});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${ve}];

        ivec2 dyCorner = ivec2(coords[${me}], coords[${ge}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${ne}; wR++) {
          float dyR = float(dyRCorner + wR) / ${ce}.0;

          if (dyR < 0.0 || dyR >= ${ee.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${ne} - 1 - wR;

          for (int wC = 0; wC < ${ae}; wC++) {
            float dyC = float(dyCCorner + wC) / ${le}.0;

            if (dyC < 0.0 || dyC >= ${ee.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${ae} - 1 - wC;

            for (int d2 = 0; d2 < ${ee.outChannels}; d2++) {

              if (${ue}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Conv3DDerFilterProgram{constructor(ee){this.variableNames=["x","dy"],this.outputShape=ee.filterShape;const ne=ee.strideDepth,ae=ee.strideHeight,ce=ee.strideWidth,le=ee.padInfo.front,ue=ee.padInfo.top,he=ee.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${ee.batchSize}; b++) {
          for (int yF = 0; yF < ${ee.outDepth}; yF++) {
            int xF = wF + yF * ${ne} - ${le};

            if (xF < 0 || xF >= ${ee.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${ee.outHeight}; yR++) {
              int xR = wR + yR * ${ae} - ${ue};

              if (xR < 0 || xR >= ${ee.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${ee.outWidth}; yC++) {
                int xC = wC + yC * ${ce} - ${he};

                if (xC < 0 || xC >= ${ee.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Conv3DDerInputProgram{constructor(ee){this.variableNames=["dy","W"],this.outputShape=ee.inShape;const ne=ee.filterDepth,ae=ee.filterHeight,ce=ee.filterWidth,le=ee.strideDepth,ue=ee.strideHeight,he=ee.strideWidth,fe=ne-1-ee.padInfo.front,me=ae-1-ee.padInfo.top,ge=ce-1-ee.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${fe}, ${me}, ${ge});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${ne}; wF++) {
          float dyF = float(dyFCorner + wF) / ${le}.0;

          if (dyF < 0.0 || dyF >= ${ee.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${ne} - 1 - wF;

          for (int wR = 0; wR < ${ae}; wR++) {
            float dyR = float(dyRCorner + wR) / ${ue}.0;

            if (dyR < 0.0 || dyR >= ${ee.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${ae} - 1 - wR;

            for (int wC = 0; wC < ${ce}; wC++) {
              float dyC = float(dyCCorner + wC) / ${he}.0;

              if (dyC < 0.0 || dyC >= ${ee.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${ce} - 1 - wC;

              for (int d2 = 0; d2 < ${ee.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropFilter(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,dy:le}=ee,{strides:ue,pad:he,dataFormat:fe,dimRoundingMode:me,filterShape:ge}=ae,ve=convertConv2DDataFormat(fe),ye=computeConv2DInfo(ce.shape,ge,ue,1,he,me,!1,ve),be=new Conv2DDerFilterProgram(ye);return ne.runWebGLProgram(be,[ce,le],"float32")}const conv2DBackpropFilterConfig={kernelName:Conv2DBackpropFilter,backendName:"webgl",kernelFunc:conv2DBackpropFilter};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropInput(re){const{inputs:ee,backend:ne,attrs:ae}=re,{dy:ce,filter:le}=ee,{inputShape:ue,strides:he,pad:fe,dataFormat:me,dimRoundingMode:ge}=ae,ve=convertConv2DDataFormat(me),ye=computeConv2DInfo(ue,le.shape,he,1,fe,ge,!1,ve),be=new Conv2DDerInputProgram(ye);return ne.runWebGLProgram(be,[ce,le],"float32")}const conv2DBackpropInputConfig={kernelName:Conv2DBackpropInput,backendName:"webgl",kernelFunc:conv2DBackpropInput};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3D(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,filter:le}=ee,{strides:ue,pad:he,dilations:fe}=ae,me=computeConv3DInfo(ce.shape,le.shape,ue,fe,he),ge=new Conv3DProgram(me);return ne.runWebGLProgram(ge,[ce,le],"float32")}const conv3DConfig={kernelName:Conv3D$1,backendName:"webgl",kernelFunc:conv3D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropFilterV2(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,dy:le}=ee,{strides:ue,pad:he,filterShape:fe}=ae,me=computeConv3DInfo(ce.shape,fe,ue,1,he),ge=new Conv3DDerFilterProgram(me);return ne.runWebGLProgram(ge,[ce,le],"float32")}const conv3DBackpropFilterV2Config={kernelName:Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:conv3DBackpropFilterV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropInput(re){const{inputs:ee,backend:ne,attrs:ae}=re,{dy:ce,filter:le}=ee,{pad:ue,strides:he,inputShape:fe}=ae,me=computeConv3DInfo(fe,le.shape,he,1,ue),ge=new Conv3DDerInputProgram(me);return ne.runWebGLProgram(ge,[ce,le],"float32")}const conv3DBackpropInputConfig={kernelName:Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:conv3DBackpropInput};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COS=CHECK_NAN_SNIPPET_UNARY+`
  return cos(x);
`,cos=unaryKernelFunc({opSnippet:COS}),cosConfig={kernelName:Cos,backendName:"webgl",kernelFunc:cos};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COSH=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,cosh=unaryKernelFunc({opSnippet:COSH}),coshConfig={kernelName:Cosh,backendName:"webgl",kernelFunc:cosh};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CropAndResizeProgram{constructor(ee,ne,ae,ce,le){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[ue,he,fe,me]=ee,[ge]=ne,[ve,ye]=ae;this.outputShape=[ge,ve,ye,me];const be=ce==="bilinear"?1:0,[Ee,Ce]=[`${he-1}.0`,`${fe-1}.0`],[Se,Te,ke]=ve>1?[`${(he-1)/(ve-1)}`,"(y2-y1) * height_ratio",`y1*${Ee} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${Ee}`],[Ne,Fe,De]=ye>1?[`${(fe-1)/(ye-1)}`,"(x2-x1) * width_ratio",`x1*${Ce} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${Ce}`];this.userCode=`
      const float height_ratio = float(${Se});
      const float width_ratio = float(${Ne});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${ue}) {
          return;
        }

        float height_scale = ${Te};
        float width_scale = ${Fe};

        float in_y = ${ke};
        if( in_y < 0.0 || in_y > ${Ee} ) {
          setOutput(float(${le}));
          return;
        }
        float in_x = ${De};
        if( in_x < 0.0 || in_x > ${Ce} ) {
          setOutput(float(${le}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${be} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cropAndResize=re=>{const{inputs:ee,backend:ne,attrs:ae}=re,{image:ce,boxes:le,boxInd:ue}=ee,{cropSize:he,method:fe,extrapolationValue:me}=ae,ge=new CropAndResizeProgram(ce.shape,le.shape,he,fe,me);return ne.runWebGLProgram(ge,[ce,le,ue],"float32")},cropAndResizeConfig={kernelName:CropAndResize,backendName:"webgl",kernelFunc:cropAndResize};class CumSumProgram{constructor(ee,ne,ae){this.variableNames=["x"],this.outputShape=ee;const ce=ee.length,le=ne?"0.0":`getX(${getCoords(ce,"coords")})`,ue=ee[ee.length-1];let he="",fe="";ne?(he=ae?`end != ${ue-1}`:"end != 0",fe=ae?"end + 1":"end - 1"):(he=ae?`end + pow2 < ${ue}`:"end >= pow2",fe=ae?"end + pow2":"end - pow2"),this.userCode=`
      uniform float index;
      void main() {
        ${getCoordsDataType(ce)} coords = getOutputCoords();
        int end = ${getFinalCoord(ce,"coords")};
        float val = ${le};
        int pow2 = int(pow(2.0, index));
        if (${he}) {
          int idx = ${fe};
          ${getFinalCoord(ce,"coords")} = idx;
          val += getX(${getCoords(ce,"coords")});
        }
        setOutput(val);
      }
    `}getCustomSetupFunc(ee){return(ne,ae)=>{this.index==null&&(this.index=ne.getUniformLocation(ae,"index")),ne.gl.uniform1f(this.index,ee)}}}function getCoords(re,ee){if(re===1)return`${ee}`;if(re===2)return`${ee}.x, ${ee}.y`;if(re===3)return`${ee}.x, ${ee}.y, ${ee}.z`;if(re===4)return`${ee}.x, ${ee}.y, ${ee}.z, ${ee}.w`;throw Error(`Cumulative sum for rank ${re} is not yet supported`)}function getFinalCoord(re,ee){if(re===1)return`${ee}`;if(re===2)return`${ee}.y`;if(re===3)return`${ee}.z`;if(re===4)return`${ee}.w`;throw Error(`Cumulative sum for rank ${re} is not yet supported`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumsum(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le,exclusive:ue,reverse:he}=ae,fe=ce.shape.length,me=getAxesPermutation([le],fe);let ge=ce;me!=null&&(ge=transpose({inputs:{x:ce},backend:ne,attrs:{perm:me}}));const ve=getInnerMostAxes(1,fe)[0];if(ve!==fe-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${ce.shape.length-1} but got axis=${le}`);const ye=ge.shape[ve];let be=identity$3({inputs:{x:ge},backend:ne});for(let Ee=0;Ee<=Math.ceil(Math.log2(ye))-1;Ee++){const Ce=new CumSumProgram(ge.shape,!1,he),Se=Ce.getCustomSetupFunc(Ee),Te=be;be=ne.runWebGLProgram(Ce,[be],be.dtype,Se),ne.disposeIntermediateTensorInfo(Te)}if(ue){const Ee=new CumSumProgram(ge.shape,ue,he),Ce=be;be=ne.runWebGLProgram(Ee,[be],be.dtype),ne.disposeIntermediateTensorInfo(Ce)}if(me!=null){const Ee=getUndoAxesPermutation(me),Ce=transpose({inputs:{x:be},backend:ne,attrs:{perm:Ee}});return ne.disposeIntermediateTensorInfo(be),ne.disposeIntermediateTensorInfo(ge),Ce}return be}const cumsumConfig={kernelName:Cumsum,backendName:"webgl",kernelFunc:cumsum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function denseBincount(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,weights:le}=ee,{size:ue,binaryOutput:he}=ae;if(ce.shape.length===1){const fe=ne.readSync(ce.dataId),me=ne.readSync(le.dataId),ge=bincountImplCPU(fe,me,le.dtype,le.shape,ue);return ne.makeTensorInfo([ue],le.dtype,ge)}else if(ce.shape.length===2){const fe=ne.bufferSync(ce),me=ne.bufferSync(le),ge=bincountReduceImplCPU(fe,me,ue,he);return ne.makeTensorInfo(ge.shape,le.dtype,ge.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${ce.shape.length}.`)}const denseBincountConfig={kernelName:DenseBincount,backendName:"webgl",kernelFunc:denseBincount};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthToSpaceProgram{constructor(ee,ne,ae){this.variableNames=["x"],this.outputShape=[],this.outputShape=ee,this.blockSize=ne,this.dataFormat=ae,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${ne};
      int offset_h = imod(h, ${ne});
      int in_w = w / ${ne};
      int offset_w = imod(w, ${ne});
      int offset_d = (offset_h * ${ne} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthToSpace(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{blockSize:le,dataFormat:ue}=ae;assert$2(le>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${le}`);const he=ce.shape[0],fe=ue==="NHWC"?ce.shape[1]:ce.shape[2],me=ue==="NHWC"?ce.shape[2]:ce.shape[3],ge=ue==="NHWC"?ce.shape[3]:ce.shape[1],ve=fe*le,ye=me*le,be=ge/(le*le),Ee=ue==="NHWC"?[he,ve,ye,be]:[he,be,ve,ye],Ce=new DepthToSpaceProgram(Ee,le,ue);return ne.runWebGLProgram(Ce,[ce],ce.dtype)}const depthToSpaceConfig={kernelName:DepthToSpace,backendName:"webgl",kernelFunc:depthToSpace};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthwiseConv2DProgram{constructor(ee,ne=!1,ae=null,ce=!1,le=!1){this.variableNames=["x","W"],this.outputShape=ee.outShape;const ue=ee.inHeight,he=ee.inWidth,fe=ee.padInfo.top,me=ee.padInfo.left,ge=ee.strideHeight,ve=ee.strideWidth,ye=ee.dilationHeight,be=ee.dilationWidth,Ee=ee.filterHeight,Ce=ee.filterWidth,Se=ee.outChannels/ee.inChannels;let Te="",ke="";ae&&(ce?Te=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${ae}
        }`:le?Te=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${ae}
        }`:Te=`
          float activation(float x) {
            ${ae}
          }
        `,ke="result = activation(result);");const Ne=ne?"result += getBiasAtOutCoords();":"";ne&&this.variableNames.push("bias"),ce&&this.variableNames.push("preluActivationWeights"),le&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${Te}

      const ivec2 strides = ivec2(${ge}, ${ve});
      const ivec2 pads = ivec2(${fe}, ${me});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${Se};
        int q = d2 - d1 * ${Se};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${Ee}; wR++) {
          int xR = xRCorner + wR * ${ye};

          if (xR < 0 || xR >= ${ue}) {
            continue;
          }

          for (int wC = 0; wC < ${Ce}; wC++) {
            int xC = xCCorner + wC * ${be};

            if (xC < 0 || xC >= ${he}) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${Ne}
        ${ke}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthwiseConvPacked2DProgram{constructor(ee,ne=!1,ae=null,ce=!1,le=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ee.outShape;const ue=ee.inHeight,he=ee.inWidth,fe=ee.padInfo.top,me=ee.padInfo.left,ge=ee.strideHeight,ve=ee.strideWidth,ye=ee.dilationHeight,be=ee.dilationWidth,Ee=ee.filterHeight,Ce=ee.filterWidth,Se=Ce;let Te="int xR; int xC; int xCOffset;";for(let De=0;De<Ee;De++)for(let Oe=0;Oe<Ce;Oe++)Te+=`
          vec4 xTexelR${De}C${Oe*2} = vec4(0.);
          vec4 wR${De}C${Oe} = vec4(0.);
          vec4 xR${De}C${Oe} = vec4(0.);`;for(let De=0;De<Ee;De++)for(let Oe=0;Oe<Se;Oe++){const Re=Oe*2;if(Te+=`
          xR = xRCorner + ${De*ye};
          xC = xCCorner + ${Re*be};
        `,ve===1){if(Re<Ce&&(me%2===1?Te+=`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < ${ue} && xCOffset >= 0 && xCOffset < ${he}) {
                  xTexelR${De}C${Re} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= ${he}) {
                    xTexelR${De}C${Re}.zw = vec2(0.);
                  }
                } else {
                  xTexelR${De}C${Re} = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < ${ue} && xCOffset >= 0 && xCOffset < ${he}) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= ${he}) {
                    previous.zw = vec2(0.);
                  }

                  xR${De}C${Re} = vec4(previous.zw, xTexelR${De}C${Re}.xy);
                } else {
                  xR${De}C${Re} = vec4(0, 0, xTexelR${De}C${Re}.xy);
                }
              `:Te+=`
                if(xR >= 0 && xR < ${ue} && xC >= 0 && xC < ${he}) {
                  xTexelR${De}C${Re} = getX(batch, xR, xC, d1);
                } else {
                  xTexelR${De}C${Re} = vec4(0.);
                }

                xR${De}C${Re} = xTexelR${De}C${Re};
              `,Re+1<Ce)){const Be=me%2===0?nearestLargerEven(be):be;be%2===0&&me%2===1||be%2!==0&&me%2!==1?(Te+=`
                  xCOffset = xC + ${me%2} + ${Be};

                  if(xR >= 0 && xR < ${ue} &&
                    xCOffset >= 0 && xCOffset < ${he}) {
                    xTexelR${De}C${Re+2} = getX(batch, xR, xCOffset, d1);
                  }
                `,be>1&&(Te+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < ${ue} &&
                      xCOffset >= 0 && xCOffset < ${he}) {
                      xTexelR${De}C${Re} = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR${De}C${Re} = vec4(0.);
                    }
                  `),Te+=`
                  xR${De}C${Re+1} = vec4(
                    xTexelR${De}C${Re}.zw, xTexelR${De}C${Re+2}.xy);
                `):Te+=`
                  xCOffset = xC + ${Be};

                  if(xR >= 0 && xR < ${ue} &&
                    xCOffset >= 0 && xCOffset < ${he}) {
                    xTexelR${De}C${Re+2} = getX(batch, xR, xCOffset, d1);
                  }

                  xR${De}C${Re+1} = xTexelR${De}C${Re+2};
                `}}else Re<Ce&&(Te+=`
              if(xR >= 0 && xR < ${ue}) {
            `,me%2===1?(Te+=`
                xCOffset = xC + 1 - ${ve};
                if(xCOffset >= 0 && xCOffset < ${he}) {
                  xTexelR${De}C${Re} = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR${De}C${Re} = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < ${he}) {
                  xTexelR${De}C${Re+2} = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR${De}C${Re+2} = vec4(0.);
                }

                xR${De}C${Re} = vec4(
                  xTexelR${De}C${Re}.zw, xTexelR${De}C${Re+2}.zw);
              `,Re+1<Ce&&(Te+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + ${ve};
                  if(xCOffset >= 0 && xCOffset < ${he}) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR${De}C${Re+1} = vec4(xTexelR${De}C${Re+2}.xy, final.xy);
                `)):(Te+=`
                if(xC >= 0 && xC < ${he}) {
                  xTexelR${De}C${Re} = getX(batch, xR, xC, d1);
                } else {
                  xTexelR${De}C${Re} = vec4(0.);
                }

                xCOffset = xC + ${ve};
                if(xCOffset >= 0 && xCOffset < ${he}) {
                  xTexelR${De}C${Re+2} = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR${De}C${Re+2} = vec4(0.);
                }

                xR${De}C${Re} = vec4(
                  xTexelR${De}C${Re}.xy, xTexelR${De}C${Re+2}.xy);
              `,Re+1<Ce&&(Te+=`
                  xR${De}C${Re+1} = vec4(
                    xTexelR${De}C${Re}.zw, xTexelR${De}C${Re+2}.zw);
                `)),Te+="}");Re<Ce&&(Te+=`
            vec4 wTexelR${De}C${Re} = getW(${De}, ${Re}, d1, q);
            wR${De}C${Re} = vec4(wTexelR${De}C${Re}.xz, wTexelR${De}C${Re}.xz);
          `,Re+1<Ce&&(Te+=`
              vec4 wTexelR${De}C${Re+1} = getW(${De}, ${Re+1}, d1, q);
              wR${De}C${Re+1} =
                vec4(wTexelR${De}C${Re+1}.xz, wTexelR${De}C${Re+1}.xz);`))}for(let De=0;De<Ee;De++)for(let Oe=0;Oe<Ce;Oe++)Te+=`dotProd += xR${De}C${Oe} * wR${De}C${Oe};`;let ke="",Ne="";ae&&(ce?ke=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${ae}
        }`:le?ke=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${ae}
        }`:ke=`vec4 activation(vec4 x) {
          ${ae}
        }`,Ne="result = activation(result);");const Fe=ne?"result += getBiasAtOutCoords();":"";ne&&this.variableNames.push("bias"),ce&&this.variableNames.push("preluActivationWeights"),le&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${ke}

      const ivec2 strides = ivec2(${ge}, ${ve});
      const ivec2 pads = ivec2(${fe}, ${me});

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        ${Te}

        vec4 result = dotProd;
        ${Fe}
        ${Ne}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNative(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,filter:le}=ee,{strides:ue,pad:he,dilations:fe,dimRoundingMode:me}=ae;let ge=fe;ge==null&&(ge=[1,1]),assert$2(eitherStridesOrDilationsAreOne(ue,ge),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${ue} and dilations '${ge}'`);const ve=computeConv2DInfo(ce.shape,le.shape,ue,ge,he,me,!0);let ye;return env().getBool("WEBGL_PACK_DEPTHWISECONV")&&ve.strideWidth<=2&&ve.outChannels/ve.inChannels===1?ye=new DepthwiseConvPacked2DProgram(ve):ye=new DepthwiseConv2DProgram(ve),ne.runWebGLProgram(ye,[ce,le],"float32")}const depthwiseConv2dNativeConfig={kernelName:DepthwiseConv2dNative,backendName:"webgl",kernelFunc:depthwiseConv2dNative};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthwiseConv2DDerFilterProgram{constructor(ee){this.variableNames=["x","dy"],this.outputShape=ee.filterShape;const ne=ee.strideHeight,ae=ee.strideWidth,ce=ee.padInfo.top,le=ee.padInfo.left,ue=ee.outChannels/ee.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${ue} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${ee.batchSize}; b++) {
          for (int yR = 0; yR < ${ee.outHeight}; yR++) {
            int xR = wR + yR * ${ne} - ${ce};

            if (xR < 0 || xR >= ${ee.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${ee.outWidth}; yC++) {
              int xC = wC + yC * ${ae} - ${le};

              if (xC < 0 || xC >= ${ee.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class DepthwiseConv2DDerInputProgram{constructor(ee){this.variableNames=["dy","W"],this.outputShape=ee.inShape;const ne=ee.filterHeight,ae=ee.filterWidth,ce=ee.strideHeight,le=ee.strideWidth,ue=ne-1-ee.padInfo.top,he=ae-1-ee.padInfo.left,fe=ee.outChannels/ee.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${ue}, ${he});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${ne}; wR++) {
          float dyR = float(dyRCorner + wR) / ${ce}.0;

          if (dyR < 0.0 || dyR >= ${ee.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${ne} - 1 - wR;

          for (int wC = 0; wC < ${ae}; wC++) {
            float dyC = float(dyCCorner + wC) / ${le}.0;

            if (dyC < 0.0 || dyC >= ${ee.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${ae} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${fe}; dm++) {
              int d2 = d1 * ${fe} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropFilter(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,dy:le}=ee,{strides:ue,dilations:he,pad:fe,dimRoundingMode:me,filterShape:ge}=ae,ve=computeConv2DInfo(ce.shape,ge,ue,he,fe,me,!0),ye=new DepthwiseConv2DDerFilterProgram(ve);return ne.runWebGLProgram(ye,[ce,le],"float32")}const depthwiseConv2dNativeBackpropFilterConfig={kernelName:DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:depthwiseConv2dNativeBackpropFilter};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropInput(re){const{inputs:ee,backend:ne,attrs:ae}=re,{dy:ce,filter:le}=ee,{strides:ue,dilations:he,pad:fe,dimRoundingMode:me,inputShape:ge}=ae,ve=computeConv2DInfo(ge,le.shape,ue,he,fe,me,!0),ye=new DepthwiseConv2DDerInputProgram(ve);return ne.runWebGLProgram(ye,[ce,le],"float32")}const depthwiseConv2dNativeBackpropInputConfig={kernelName:DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:depthwiseConv2dNativeBackpropInput};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DiagProgram{constructor(ee){this.variableNames=["X"],this.outputShape=[ee,ee],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function diag(re){const{inputs:ee,backend:ne}=re,{x:ae}=ee,ce=[...ae.shape,...ae.shape],le=sizeFromShape(ae.shape),ue=reshape({inputs:{x:ae},backend:ne,attrs:{shape:[le]}}),he=new DiagProgram(le),fe=ne.runWebGLProgram(he,[ue],ue.dtype),me=reshape({inputs:{x:fe},backend:ne,attrs:{shape:ce}});return ne.disposeIntermediateTensorInfo(ue),ne.disposeIntermediateTensorInfo(fe),me}const diagConfig={kernelName:Diag,backendName:"webgl",kernelFunc:diag};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dilation2DProgram{constructor(ee){this.variableNames=["x","W"],this.outputShape=ee.outShape;const{inHeight:ne,inWidth:ae,padInfo:ce,strideHeight:le,strideWidth:ue,filterHeight:he,filterWidth:fe,dilationHeight:me,dilationWidth:ge}=ee,{top:ve,left:ye}=ce;this.userCode=`
      const ivec2 strides = ivec2(${le}, ${ue});
      const ivec2 pads = ivec2(${ve}, ${ye});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${he}; h++) {
          int hIn = hBeg + h * ${me};

          if (hIn >= 0 && hIn < ${ne}) {
            for (int w = 0; w < ${fe}; w++) {
              int wIn = wBeg + w * ${ge};

              if (wIn >= 0 && wIn < ${ae}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dilation2D(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,filter:le}=ee,{strides:ue,pad:he,dilations:fe}=ae,me=computeDilation2DInfo(ce.shape,le.shape,ue,he,"NHWC",fe);let ge;const ve=new Dilation2DProgram(me);ge=ne.runWebGLProgram(ve,[ce,le],"float32");const ye=reshape({inputs:{x:ge},backend:ne,attrs:{shape:me.outShape}});return ne.disposeIntermediateTensorInfo(ge),ye}const dilation2DConfig={kernelName:Dilation2D,backendName:"webgl",kernelFunc:dilation2D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ELU="return (x >= 0.0) ? x : (exp(x) - 1.0);",ELU_PACKED=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,elu=unaryKernelFunc({opSnippet:ELU,packedOpSnippet:ELU_PACKED}),eluConfig={kernelName:Elu$1,backendName:"webgl",kernelFunc:elu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ELU_DER="return (b >= 1.0) ? a : a * (b + 1.0);",ELU_DER_PACKED=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,eluGrad=re=>{const{inputs:ee,backend:ne}=re,{dy:ae,y:ce}=ee,le=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new BinaryOpPackedProgram(ELU_DER_PACKED,ae.shape,ce.shape):new BinaryOpProgram(ELU_DER,ae.shape,ce.shape);return ne.runWebGLProgram(le,[ae,ce],ae.dtype)},eluGradConfig={kernelName:EluGrad,backendName:"webgl",kernelFunc:eluGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PACKED_EQUAL=`
  return vec4(equal(a, b));
`,EQUAL="return float(a == b);",equal=binaryKernelFunc({opSnippet:EQUAL,packedOpSnippet:PACKED_EQUAL,dtype:"bool"}),equalConfig={kernelName:Equal,backendName:"webgl",kernelFunc:equal};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ERF=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${ERF_P};
  float a1 = ${ERF_A1};
  float a2 = ${ERF_A2};
  float a3 = ${ERF_A3};
  float a4 = ${ERF_A4};
  float a5 = ${ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,erf=unaryKernelFunc({opSnippet:ERF}),erfConfig={kernelName:Erf,backendName:"webgl",kernelFunc:erf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EXP="return exp(x);",exp=unaryKernelFunc({opSnippet:EXP,packedOpSnippet:EXP,cpuKernelImpl:expImplCPU}),expConfig={kernelName:Exp,backendName:"webgl",kernelFunc:exp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expandDims(re){const{inputs:ee,attrs:ne,backend:ae}=re,{dim:ce}=ne,{input:le}=ee,ue=le.shape.length,he=le.shape.slice();let fe=ce;return ce<0&&(assert$2(-(ue+1)<=ce,()=>`Axis must be in the interval [${-(ue+1)}, ${ue}]`),fe=ue+ce+1),he.splice(fe,0,1),reshape({inputs:{x:le},backend:ae,attrs:{shape:he}})}const expandDimsConfig={kernelName:ExpandDims,backendName:"webgl",kernelFunc:expandDims};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EXPM1="return exp(x) - 1.0;",expm1=unaryKernelFunc({opSnippet:EXPM1,packedOpSnippet:EXPM1,cpuKernelImpl:expm1ImplCPU}),expm1Config={kernelName:Expm1,backendName:"webgl",kernelFunc:expm1};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FFTProgram{constructor(ee,ne,ae){this.variableNames=["real","imag"];const ce=ne[1];this.outputShape=ne;const le=ae?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,ue=ae?`${ce}.0`:"1.0";let he;if(ee==="real")he="return real * expR - imag * expI;";else if(ee==="imag")he="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${ee}.`);this.userCode=`
      const float exponentMultiplier = ${le};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${he}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${ce});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${ce}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${ue};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fftImpl(re,ee,ne){const ae=ne.texData.get(re.dataId),ce=sizeFromShape(re.shape),le=re.shape[re.shape.length-1],ue=ce/le,he=reshape({inputs:{x:re},backend:ne,attrs:{shape:[ue,le]}}),fe=he.shape,me=new FFTProgram("real",fe,ee),ge=new FFTProgram("imag",fe,ee),ve=[{dataId:ae.complexTensorInfos.real.dataId,dtype:ae.complexTensorInfos.real.dtype,shape:fe},{dataId:ae.complexTensorInfos.imag.dataId,dtype:ae.complexTensorInfos.imag.dtype,shape:fe}],ye=ne.runWebGLProgram(me,ve,"float32"),be=ne.runWebGLProgram(ge,ve,"float32"),Ee=complex({inputs:{real:ye,imag:be},backend:ne});ne.disposeIntermediateTensorInfo(ye),ne.disposeIntermediateTensorInfo(be);const Ce=reshape({inputs:{x:Ee},backend:ne,attrs:{shape:re.shape}});return ne.disposeIntermediateTensorInfo(he),ne.disposeIntermediateTensorInfo(Ee),Ce}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fft$1(re){const{inputs:ee,backend:ne}=re,{input:ae}=ee;return fftImpl(ae,!1,ne)}const fftConfig={kernelName:FFT$2,backendName:"webgl",kernelFunc:fft$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FillProgram{constructor(ee,ne){this.outputShape=[],this.variableNames=["x"],this.outputShape=ee,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}getCustomSetupFunc(ee){return(ne,ae)=>{this.valueLoc==null&&(this.valueLoc=ne.getUniformLocationNoThrow(ae,"value")),ne.gl.uniform1f(this.valueLoc,ee)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fill$1(re){const{backend:ee,attrs:ne}=re,{shape:ae,value:ce}=ne;let{dtype:le}=ne;if(le=le||inferDtype(ce),le==="string"){const ue=getArrayFromDType(le,sizeFromShape(ae));return ue.fill(ce),ee.makeTensorInfo(ae,le,ue)}else{const ue=new FillProgram(ae,ce),he=ue.getCustomSetupFunc(ce);return ee.runWebGLProgram(ue,[],le,he)}}const fillConfig={kernelName:Fill,backendName:"webgl",kernelFunc:fill$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FlipLeftRightProgram{constructor(ee){this.variableNames=["Image"],this.outputShape=[];const ne=ee[2];this.outputShape=ee,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${ne} - x;
          float outputValue;
          if(coordX >= 0 && coordX < ${ne}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const flipLeftRightConfig={kernelName:FlipLeftRight,backendName:"webgl",kernelFunc:({inputs:re,backend:ee})=>{const{image:ne}=re,ae=ee,ce=new FlipLeftRightProgram(ne.shape);return ae.runWebGLProgram(ce,[ne],ne.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FLOOR="return floor(x);",floor$1=unaryKernelFunc({opSnippet:FLOOR,packedOpSnippet:FLOOR,cpuKernelImpl:floorImplCPU}),floorConfig={kernelName:Floor,backendName:"webgl",kernelFunc:floor$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const INT_DIV=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,INT_DIV_PACKED=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,floorDiv=binaryKernelFunc({opSnippet:INT_DIV,packedOpSnippet:INT_DIV_PACKED,dtype:"int32"}),floorDivConfig={kernelName:FloorDiv,backendName:"webgl",kernelFunc:floorDiv};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FromPixelsProgram{constructor(ee){this.variableNames=["A"];const ne=getGlslDifferences(),[ae,ce]=ee;this.outputShape=ee,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${ce}.0, ${ae}.0);

        vec4 values = ${ne.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FromPixelsPackedProgram{constructor(ee){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const ne=getGlslDifferences(),[ae,ce]=ee;this.outputShape=ee,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${ce}.0, ${ae}.0);
            vec4 values = ${ne.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${ne.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fromPixelsConfig={kernelName:FromPixels,backendName:"webgl",kernelFunc:fromPixels};let fromPixels2DContext;function fromPixels(re){const{inputs:ee,backend:ne,attrs:ae}=re;let{pixels:ce}=ee;const{numChannels:le}=ae,ue=typeof HTMLVideoElement<"u"&&ce instanceof HTMLVideoElement,he=typeof HTMLImageElement<"u"&&ce instanceof HTMLImageElement,fe=typeof ImageBitmap<"u"&&ce instanceof ImageBitmap,[me,ge]=ue?[ce.videoWidth,ce.videoHeight]:[ce.width,ce.height],ve=[ge,me],ye=[ge,me,le];(he||ue||fe)&&(fromPixels2DContext==null&&(fromPixels2DContext=document.createElement("canvas").getContext("2d")),fromPixels2DContext.canvas.width=me,fromPixels2DContext.canvas.height=ge,fromPixels2DContext.drawImage(ce,0,0,me,ge),ce=fromPixels2DContext.canvas);const be=ne.makeTensorInfo(ve,"int32");ne.texData.get(be.dataId).usage=TextureUsage.PIXELS,ne.gpgpu.uploadPixelDataToTexture(ne.getTexture(be.dataId),ce);const Ee=env().getBool("WEBGL_PACK")?new FromPixelsPackedProgram(ye):new FromPixelsProgram(ye),Ce=ne.runWebGLProgram(Ee,[be],"int32");return ne.disposeData(be.dataId),Ce}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedConv2d(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,filter:le,bias:ue,preluActivationWeights:he}=ee,{strides:fe,pad:me,dataFormat:ge,dilations:ve,dimRoundingMode:ye,activation:be,leakyreluAlpha:Ee}=ae,Ce=convertConv2DDataFormat(ge),Se=computeConv2DInfo(ce.shape,le.shape,fe,ve,me,ye,!1,Ce);let Te;const ke=[];if(Se.filterHeight===1&&Se.filterWidth===1&&Se.dilationHeight===1&&Se.dilationWidth===1&&Se.strideHeight===1&&Se.strideWidth===1&&(Se.padInfo.type==="SAME"||Se.padInfo.type==="VALID"))Te=conv2dByMatMul({x:ce,filter:le,convInfo:Se,backend:ne,bias:ue,activation:be,preluActivationWeights:he,leakyreluAlpha:Ee});else if(env().getBool("WEBGL_CONV_IM2COL")&&ce.shape[0]===1)Te=conv2dWithIm2Row({x:ce,filter:le,convInfo:Se,backend:ne,bias:ue,activation:be,preluActivationWeights:he,leakyreluAlpha:Ee});else{const Fe=ue!=null,De=he!=null,Oe=be==="leakyrelu",Re=be?mapActivationToShaderProgram(be,!1):null,Be=new Conv2DProgram(Se,Fe,Re,De,Oe),Le=[ce,le];if(ue&&Le.push(ue),he&&Le.push(he),Oe){const je=ne.makeTensorInfo([],"float32",createScalarValue(Ee,"float32"));Le.push(je),ke.push(je)}Te=ne.runWebGLProgram(Be,Le,"float32")}const Ne=reshape({inputs:{x:Te},backend:ne,attrs:{shape:Se.outShape}});return ke.push(Te),ke.forEach(Fe=>ne.disposeIntermediateTensorInfo(Fe)),Ne}const fusedConv2DConfig={kernelName:FusedConv2D,backendName:"webgl",kernelFunc:fusedConv2d};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedDepthwiseConv2D(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,filter:le,bias:ue,preluActivationWeights:he}=ee,{strides:fe,pad:me,dilations:ge,dimRoundingMode:ve,activation:ye,leakyreluAlpha:be}=ae,Ee=[];let Ce=ge;Ce==null&&(Ce=[1,1]),assert$2(eitherStridesOrDilationsAreOne(fe,Ce),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${fe} and dilations '${Ce}'`);const Se=computeConv2DInfo(ce.shape,le.shape,fe,Ce,me,ve,!0),Te=env().getBool("WEBGL_PACK_DEPTHWISECONV")&&Se.strideWidth<=2&&Se.outChannels/Se.inChannels===1,ke=ye?mapActivationToShaderProgram(ye,Te):null,Ne=[ce,le],Fe=ue!=null,De=he!=null,Oe=ye==="leakyrelu";if(Fe&&Ne.push(ue),De&&Ne.push(he),Oe){const Le=ne.makeTensorInfo([],"float32",createScalarValue(be,"float32"));Ne.push(Le),Ee.push(Le)}let Re;Te?Re=new DepthwiseConvPacked2DProgram(Se,Fe,ke,De,Oe):Re=new DepthwiseConv2DProgram(Se,Fe,ke,De,Oe);const Be=ne.runWebGLProgram(Re,Ne,"float32");return Ee.forEach(Le=>ne.disposeIntermediateTensorInfo(Le)),Be}const fusedDepthwiseConv2DConfig={kernelName:FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:fusedDepthwiseConv2D};class GatherNDProgram{constructor(ee,ne,ae){this.sliceDim=ee,this.strides=ne,this.variableNames=["x","indices"],this.outputShape=ae;const ce=getCoordsDataType(ne.length),le=getCoordsDataType(ae.length),ue=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        ${ce} strides = ${ce}(${this.strides});
         void main() {
          ${le} coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < ${this.sliceDim}; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * ${ue};
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherNd(re){const{inputs:ee,backend:ne}=re,{params:ae,indices:ce}=ee,le=ce.shape,ue=le[le.length-1],[he,fe,me,ge]=prepareAndValidate(ae,ce),ve=reshape({inputs:{x:ce},backend:ne,attrs:{shape:[fe,ue]}}),ye=reshape({inputs:{x:ae},backend:ne,attrs:{shape:[sizeFromShape(ae.shape)/me,me]}}),be=new GatherNDProgram(ue,ge,[fe,me]),Ee=ne.runWebGLProgram(be,[ye,ve],ye.dtype),Ce=reshape({inputs:{x:Ee},backend:ne,attrs:{shape:he}});return ne.disposeIntermediateTensorInfo(ve),ne.disposeIntermediateTensorInfo(ye),ne.disposeIntermediateTensorInfo(Ee),Ce}const gatherNdConfig={kernelName:GatherNd,backendName:"webgl",kernelFunc:gatherNd};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GatherProgram{constructor(ee,ne){this.variableNames=["A","indices"],this.outputShape=ne,this.rank=ne.length;const ae=getCoordsDataType(this.rank),ce=getSourceCoords$1(ee);this.userCode=`
      void main() {
        ${ae} resRC = getOutputCoords();
        setOutput(getA(${ce}));
      }
    `}}function getSourceCoords$1(re,ee){const ne=["resRC.x","resRC.y","resRC.z","resRC.w"],ae=[];for(let ce=0;ce<re.length;ce++)ce===2?ae.push("int(getIndices(resRC.x, resRC.z))"):ae.push(`${ne[ce]}`);return ae.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherV2(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,indices:le}=ee,{axis:ue,batchDims:he}=ae,fe=parseAxisParam(ue,ce.shape)[0],me=collectGatherOpShapeInfo(ce,le,fe,he),ge=sizeFromShape(le.shape),ve=[],ye=reshape({inputs:{x:ce},backend:ne,attrs:{shape:[me.batchSize,me.outerSize,me.dimSize,me.sliceSize]}}),be=reshape({inputs:{x:le},backend:ne,attrs:{shape:[me.batchSize,ge/me.batchSize]}});ve.push(ye),ve.push(be);const Ee=[me.batchSize,me.outerSize,ge/me.batchSize,me.sliceSize];if(ne.shouldExecuteOnCPU([ce,le])||ce.dtype==="string"){const ke=ne.bufferSync(be),Ne=ne.bufferSync(ye),Fe=gatherV2ImplCPU(Ne,ke,Ee);return ve.forEach(De=>ne.disposeIntermediateTensorInfo(De)),ne.makeTensorInfo(me.outputShape,Fe.dtype,Fe.values)}const Ce=new GatherProgram(ye.shape,Ee),Se=ne.runWebGLProgram(Ce,[ye,be],ye.dtype);ve.push(Se);const Te=reshape({inputs:{x:Se},backend:ne,attrs:{shape:me.outputShape}});return ve.forEach(ke=>ne.disposeIntermediateTensorInfo(ke)),Te}const gatherV2Config={kernelName:GatherV2,backendName:"webgl",kernelFunc:gatherV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GREATER="return float(a > b);",GREATER_PACKED=`
  return vec4(greaterThan(a, b));
`,greater=binaryKernelFunc({opSnippet:GREATER,packedOpSnippet:GREATER_PACKED,cpuKernelImpl:greaterImplCPU,dtype:"bool"}),greaterConfig={kernelName:Greater,backendName:"webgl",kernelFunc:greater};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GREATER_EQUAL="return float(a >= b);",GREATER_EQUAL_PACKED=`
  return vec4(greaterThanEqual(a, b));
`,greaterEqual=binaryKernelFunc({opSnippet:GREATER_EQUAL,packedOpSnippet:GREATER_EQUAL_PACKED,dtype:"bool"}),greaterEqualConfig={kernelName:GreaterEqual,backendName:"webgl",kernelFunc:greaterEqual};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ifft(re){const{inputs:ee,backend:ne}=re,{input:ae}=ee;return fftImpl(ae,!0,ne)}const ifftConfig={kernelName:IFFT,backendName:"webgl",kernelFunc:ifft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IS_FINITE="return float(!isnan(x) && !isinf(x));",isFinite$1=unaryKernelFunc({opSnippet:IS_FINITE,dtype:"bool"}),isFiniteConfig={kernelName:IsFinite,backendName:"webgl",kernelFunc:isFinite$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IS_INF="return float(isinf(x));",isInf=unaryKernelFunc({opSnippet:IS_INF,dtype:"bool"}),isInfConfig={kernelName:IsInf,backendName:"webgl",kernelFunc:isInf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IS_NAN="return float(isnan(x));",isNaN$1=unaryKernelFunc({opSnippet:IS_NAN,dtype:"bool"}),isNaNConfig={kernelName:IsNan,backendName:"webgl",kernelFunc:isNaN$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LESS="return float(a < b);",LESS_PACKED=`
  return vec4(lessThan(a, b));
`,less=binaryKernelFunc({opSnippet:LESS,packedOpSnippet:LESS_PACKED,cpuKernelImpl:lessImplCPU,dtype:"bool"}),lessConfig={kernelName:Less,backendName:"webgl",kernelFunc:less};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LESS_EQUAL="return float(a <= b);",LESS_EQUAL_PACKED=`
  return vec4(lessThanEqual(a, b));
`,lessEqual=binaryKernelFunc({opSnippet:LESS_EQUAL,packedOpSnippet:LESS_EQUAL_PACKED,dtype:"bool"}),lessEqualConfig={kernelName:LessEqual,backendName:"webgl",kernelFunc:lessEqual};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function linSpace(re){const{backend:ee,attrs:ne}=re,{start:ae,stop:ce,num:le}=ne,ue=linSpaceImplCPU(ae,ce,le);return ee.makeTensorInfo([ue.length],"float32",ue)}const linSpaceConfig={kernelName:LinSpace,backendName:"webgl",kernelFunc:linSpace};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOG=`if (x < 0.0) return NAN;
  return log(x);`,LOG_PACKED=`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,log$2=unaryKernelFunc({opSnippet:LOG,packedOpSnippet:LOG_PACKED,cpuKernelImpl:logImplCPU}),logConfig={kernelName:Log,backendName:"webgl",kernelFunc:log$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOG1P="return log(1.0 + x);",log1p=unaryKernelFunc({opSnippet:LOG1P}),log1pConfig={kernelName:Log1p,backendName:"webgl",kernelFunc:log1p};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOGICAL_AND="return float(a >= 1.0 && b >= 1.0);",LOGICAL_AND_PACKED=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,logicalAnd=binaryKernelFunc({opSnippet:LOGICAL_AND,packedOpSnippet:LOGICAL_AND_PACKED,dtype:"bool"}),logicalAndConfig={kernelName:LogicalAnd,backendName:"webgl",kernelFunc:logicalAnd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOGICAL_NOT="return float(!(x >= 1.0));",logicalNot=unaryKernelFunc({opSnippet:LOGICAL_NOT}),logicalNotConfig={kernelName:LogicalNot,backendName:"webgl",kernelFunc:logicalNot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOGICAL_OR="return float(a >= 1.0 || b >= 1.0);",LOGICAL_OR_PACKED=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,logicalOr=binaryKernelFunc({opSnippet:LOGICAL_OR,packedOpSnippet:LOGICAL_OR_PACKED,dtype:"bool"}),logicalOrConfig={kernelName:LogicalOr,backendName:"webgl",kernelFunc:logicalOr};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LRNProgram{constructor(ee,ne,ae,ce,le){this.variableNames=["x"],this.outputShape=[];const ue=ne,he=ee[3]-1;this.outputShape=ee;let fe;const me=`float(${ae}) + float(${ce}) * sum`;le===.5?fe=`inversesqrt(${me})`:le===1?fe=`1.0/(${me})`:fe=`exp(log(${me}) * float(-${le}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${ue}; j <= ${ue}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${he}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${fe};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LRNPackedProgram{constructor(ee,ne,ae,ce,le){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const ue=ne,he=ee[3]-1;this.outputShape=ee;let fe;const me=`float(${ae}) + float(${ce}) * sum`;le===.5?fe=`inversesqrt(${me})`:le===1?fe=`1.0/(${me})`:fe=`exp(log(${me}) * float(-${le}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${ue};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${ue}; j <= ${ue}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${he}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${fe};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lrn=re=>{const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{depthRadius:le,bias:ue,alpha:he,beta:fe}=ae,me=env().getBool("WEBGL_PACK_NORMALIZATION")?new LRNPackedProgram(ce.shape,le,ue,he,fe):new LRNProgram(ce.shape,le,ue,he,fe);return ne.runWebGLProgram(me,[ce],ce.dtype)},LRNConfig={kernelName:LRN,backendName:"webgl",kernelFunc:lrn};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LRNGradProgram{constructor(ee,ne,ae,ce,le){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=ee,this.depth=ee[3],this.depthRadius=ne,this.bias=ae,this.alpha=ce,this.beta=le,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${ne})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${ne} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${ce}) * norm + float(${ae});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${ce})
                * float(${le})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${le});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lrnGrad=re=>{const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,y:le,dy:ue}=ee,{depthRadius:he,bias:fe,alpha:me,beta:ge}=ae,ve=new LRNGradProgram(ce.shape,he,fe,me,ge);return ne.runWebGLProgram(ve,[ce,le,ue],ce.dtype)},LRNGradConfig={kernelName:LRNGrad,backendName:"webgl",kernelFunc:lrnGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxImpl(re,ee,ne,ae){const ce=sizeFromShape(ee),ue=sizeFromShape(re.shape)/ce,he=reshape({inputs:{x:re},attrs:{shape:[ue,ce]},backend:ae}),fe=reduce(he,re.dtype,"max",ae),me=reshape({inputs:{x:fe},attrs:{shape:ne},backend:ae});return ae.disposeIntermediateTensorInfo(he),ae.disposeIntermediateTensorInfo(fe),me}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function max$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{reductionIndices:le,keepDims:ue}=ae,he=ce.shape.length,fe=parseAxisParam(le,ce.shape);let me=fe;const ge=getAxesPermutation(me,he),ve=ge!=null,ye=ne.shouldExecuteOnCPU([ce]);let be=ce;if(ve){if(ye){const Ne=ne.texData.get(be.dataId).values,Fe=new Array(he);for(let Re=0;Re<Fe.length;Re++)Fe[Re]=ce.shape[ge[Re]];const De=transposeImplCPU(Ne,ce.shape,ce.dtype,ge,Fe);be=ne.makeTensorInfo(Fe,ce.dtype);const Oe=ne.texData.get(be.dataId);Oe.values=De}else be=transposeImpl(ce,ge,ne);me=getInnerMostAxes(me.length,he)}assertAxesAreInnerMostDims("max",me,he);const[Ee,Ce]=computeOutAndReduceShapes(be.shape,me);let Se=Ee;ue&&(Se=expandShapeToKeepDim(Ee,fe));let Te;if(ye){const Ne=ne.texData.get(be.dataId).values,Fe=maxImplCPU(Ne,sizeFromShape(Ce),Se,ce.dtype);Te=ne.makeTensorInfo(Se,ce.dtype);const De=ne.texData.get(Te.dataId);De.values=Fe}else Te=maxImpl(be,Ce,Se,ne);return ve&&ne.disposeIntermediateTensorInfo(be),Te}const maxConfig={kernelName:Max,backendName:"webgl",kernelFunc:max$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MAXIMUM=CHECK_NAN_SNIPPET$1+`
  return max(a, b);
`,MAXIMUM_PACKED=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+CHECK_NAN_SNIPPET+`
  return result;
`,maximum=binaryKernelFunc({opSnippet:MAXIMUM,packedOpSnippet:MAXIMUM_PACKED,cpuKernelImpl:maximumImplCPU}),maximumConfig={kernelName:Maximum$1,backendName:"webgl",kernelFunc:maximum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee;assertNotComplex(ce,"maxPool");const{filterSize:le,strides:ue,pad:he,dimRoundingMode:fe}=ae,me=1;assert$2(eitherStridesOrDilationsAreOne(ue,me),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${ue} and dilations '${me}'`);const ge=computePool2DInfo(ce.shape,le,ue,me,he,fe);if(ge.filterWidth===1&&ge.filterHeight===1&&arraysEqual(ge.inShape,ge.outShape))return identity$3({inputs:{x:ce},backend:ne});const ve=new Pool2DProgram(ge,"max",!1);return ne.runWebGLProgram(ve,[ce],ce.dtype)}const maxPoolConfig={kernelName:MaxPool,backendName:"webgl",kernelFunc:maxPool};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3d(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{filterSize:le,strides:ue,pad:he,dataFormat:fe,dimRoundingMode:me}=ae,ge=[1,1,1],ve=computePool3DInfo(ce.shape,le,ue,ge,he,me,fe),ye=new Pool3DProgram(ve,"max",!1);return ne.runWebGLProgram(ye,[ce],ce.dtype)}const maxPool3DConfig={kernelName:MaxPool3D,backendName:"webgl",kernelFunc:maxPool3d};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MaxPool2DBackpropProgram{constructor(ee){this.variableNames=["dy","maxPos"],this.outputShape=ee.inShape;const ne=ee.strideHeight,ae=ee.strideWidth,ce=ee.dilationHeight,le=ee.effectiveFilterHeight,ue=ee.effectiveFilterWidth,he=le-1-ee.padInfo.top,fe=ue-1-ee.padInfo.left,me=le*ue-1;this.userCode=`
      const ivec2 pads = ivec2(${he}, ${fe});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${le};
          wR += ${ce}) {
          float dyR = float(dyRCorner + wR) / ${ne}.0;

          if (dyR < 0.0 || dyR >= ${ee.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${ue}; wC++) {
            float dyC = float(dyCCorner + wC) / ${ae}.0;

            if (dyC < 0.0 || dyC >= ${ee.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${me} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${ue} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class MaxPool3DBackpropProgram{constructor(ee){this.variableNames=["dy","maxPos"],this.outputShape=ee.inShape;const ne=ee.strideDepth,ae=ee.strideHeight,ce=ee.strideWidth,le=ee.dilationDepth,ue=ee.dilationHeight,he=ee.dilationWidth,fe=ee.effectiveFilterDepth,me=ee.effectiveFilterHeight,ge=ee.effectiveFilterWidth,ve=fe-1-ee.padInfo.front,ye=me-1-ee.padInfo.top,be=ge-1-ee.padInfo.left,Ee=fe*me*ge-1;this.userCode=`
      const ivec3 pads = ivec3(${ve}, ${ye}, ${be});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${fe};
           wD += ${le}) {
          float dyD = float(dyDCorner + wD) / ${ne}.0;

          if (dyD < 0.0 || dyD >= ${ee.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${me};
              wR += ${ue}) {
            float dyR = float(dyRCorner + wR) / ${ae}.0;

            if (dyR < 0.0 || dyR >= ${ee.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${ge};
                wC += ${he}) {
              float dyC = float(dyCCorner + wC) / ${ce}.0;

              if (dyC < 0.0 || dyC >= ${ee.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${Ee} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${me} * ${ge} +
                  wR * ${ge} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3DGrad(re){const{inputs:ee,backend:ne,attrs:ae}=re,{dy:ce,input:le}=ee,ue=le,{filterSize:he,strides:fe,pad:me,dimRoundingMode:ge}=ae,ve=[1,1,1],ye=computePool3DInfo(ue.shape,he,fe,ve,me,ge),be=new Pool3DProgram(ye,"max",!0),Ee=ne.runWebGLProgram(be,[ue],ue.dtype),Ce=new MaxPool3DBackpropProgram(ye),Se=ne.runWebGLProgram(Ce,[ce,Ee],ue.dtype);return ne.disposeIntermediateTensorInfo(Ee),Se}const maxPoolGrad3DConfig={kernelName:MaxPool3DGrad,backendName:"webgl",kernelFunc:maxPool3DGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolGrad(re){const{inputs:ee,backend:ne,attrs:ae}=re,{dy:ce,input:le,output:ue}=ee,he=le;assertNotComplex([le,ue],"maxPoolGrad");const{filterSize:fe,strides:me,pad:ge,dimRoundingMode:ve}=ae,ye=computePool2DInfo(he.shape,fe,me,1,ge,ve),be=!0,Ee=new Pool2DProgram(ye,"max",be),Ce=ne.runWebGLProgram(Ee,[he],he.dtype),Se=new MaxPool2DBackpropProgram(ye),Te=ne.runWebGLProgram(Se,[ce,Ce],he.dtype);return ne.disposeIntermediateTensorInfo(Ce),Te}const maxPoolGradConfig={kernelName:MaxPoolGrad,backendName:"webgl",kernelFunc:maxPoolGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolWithArgmaxImpl(re,ee,ne,ae){let ce=new Pool2DProgram(ne,"max",!1);const le=ae.runWebGLProgram(ce,[re],"float32");ce=new Pool2DProgram(ne,"max",!0,!0,ee);const ue=ae.runWebGLProgram(ce,[re],"float32");return[le,ue]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPoolWithArgmaxConfig={kernelName:MaxPoolWithArgmax,backendName:"webgl",kernelFunc:({inputs:re,attrs:ee,backend:ne})=>{const{x:ae}=re,{filterSize:ce,strides:le,pad:ue,includeBatchInIndex:he}=ee,fe=ne;assert$2(ae.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${ae.shape.length}.`);const me=[1,1];assert$2(eitherStridesOrDilationsAreOne(le,me),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${le} and dilations '${me}'`);const ge=computePool2DInfo(ae.shape,ce,le,me,ue),[ve,ye]=maxPoolWithArgmaxImpl(ae,he,ge,fe);return[ve,ye]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function meanImpl(re,ee,ne,ae){const ce=sizeFromShape(ee),ue=sizeFromShape(re.shape)/ce,he=reshape({inputs:{x:re},attrs:{shape:[ue,ce]},backend:ae}),fe=reduce(he,"float32","mean",ae),me=reshape({inputs:{x:fe},attrs:{shape:ne},backend:ae});return ae.disposeIntermediateTensorInfo(he),ae.disposeIntermediateTensorInfo(fe),me}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const meanConfig={kernelName:Mean,backendName:"webgl",kernelFunc:({inputs:re,attrs:ee,backend:ne})=>{const{x:ae}=re,{keepDims:ce,axis:le}=ee,ue=ne,he=ae.shape.length,fe=parseAxisParam(le,ae.shape);let me=fe;const ge=getAxesPermutation(me,he),ve=ge!=null,ye=ue.shouldExecuteOnCPU([ae]),be=[];let Ee=ae;if(ve){if(ye){const Fe=ue.texData.get(Ee.dataId).values,De=new Array(he);for(let Be=0;Be<De.length;Be++)De[Be]=ae.shape[ge[Be]];const Oe=transposeImplCPU(Fe,ae.shape,ae.dtype,ge,De);Ee=ue.makeTensorInfo(De,ae.dtype);const Re=ue.texData.get(Ee.dataId);Re.values=Oe}else Ee=transposeImpl(ae,ge,ue);be.push(Ee),me=getInnerMostAxes(me.length,he)}assertAxesAreInnerMostDims("sum",me,he);const[Ce,Se]=computeOutAndReduceShapes(Ee.shape,me);let Te=Ce;ce&&(Te=expandShapeToKeepDim(Ce,fe));const ke=meanImpl(Ee,Se,Te,ue);for(const Ne of be)ue.disposeIntermediateTensorInfo(Ne);return ke}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function min$1(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le,keepDims:ue}=ae,he=ce.shape.length,fe=parseAxisParam(le,ce.shape);let me=fe;const ge=getAxesPermutation(me,he);let ve=ce;ge!=null&&(ve=transpose({inputs:{x:ce},backend:ne,attrs:{perm:ge}}),me=getInnerMostAxes(me.length,ce.shape.length)),assertAxesAreInnerMostDims("min",me,he);const[ye,be]=computeOutAndReduceShapes(ve.shape,me),Ee=sizeFromShape(be),Ce=reshape({inputs:{x:ve},backend:ne,attrs:{shape:[-1,Ee]}}),Se=reduce(Ce,Ce.dtype,"min",ne);let Te;if(ue){const ke=expandShapeToKeepDim(ye,fe);Te=reshape({inputs:{x:Se},backend:ne,attrs:{shape:ke}})}else Te=reshape({inputs:{x:Se},backend:ne,attrs:{shape:ye}});return ne.disposeIntermediateTensorInfo(Ce),ne.disposeIntermediateTensorInfo(Se),ge!=null&&ne.disposeIntermediateTensorInfo(ve),Te}const minConfig={kernelName:Min,backendName:"webgl",kernelFunc:min$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MINIMUM=CHECK_NAN_SNIPPET$1+`
  return min(a, b);
`,MINIMUM_PACKED=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+CHECK_NAN_SNIPPET+`
  return result;
`,minimum=binaryKernelFunc({opSnippet:MINIMUM,packedOpSnippet:MINIMUM_PACKED,cpuKernelImpl:minimumImplCPU}),minimumConfig={kernelName:Minimum$1,backendName:"webgl",kernelFunc:minimum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MirrorPadProgram{constructor(ee,ne,ae){this.variableNames=["x"],this.outputShape=ne.map((ge,ve)=>ge[0]+ee[ve]+ge[1]);const ce=ee.length,le=getCoordsDataType(ce),ue=ne.map(ge=>ge[0]).join(","),he=ne.map((ge,ve)=>ge[0]+ee[ve]).join(","),fe=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,ce),me=ae==="reflect"?0:1;if(ce===1){this.userCode=`
        int start = ${ue};
        int end = ${he};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${me};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${me};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${le} start = ${le}(${ue});
      ${le} end = ${le}(${he});

      void main() {
        ${le} outC = getOutputCoords();
        for (int i = 0; i < ${ce}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${me};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${me};
          }
        }
        ${le} coords = outC - start;
        setOutput(getX(${fe}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MirrorPadPackedProgram{constructor(ee,ne,ae){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ne.map((Ee,Ce)=>Ee[0]+ee[Ce]+Ee[1]);const ce=ee.length,le=getCoordsDataType(ce),ue=ne.map(Ee=>Ee[0]).join(","),he=ne.map((Ee,Ce)=>Ee[0]+ee[Ce]).join(","),fe=getChannels("rc",ce),me=getChannels("source",ce),ge=`${fe[ce-1]} < ${this.outputShape[ce-1]}`,ve=ce===1?"source":`vec2(${me.slice(-2).join()})`,ye=ae==="reflect"?0:1;let be="";if(ce===1){const Ee=`
        ${le} source = rc;
        if (source < start) {
          source = start * 2 - source - ${ye};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${ye};
        }
        source -= start;
      `;be=`
        ${le} rc = outputLoc;
        ${Ee}
        result[0] = getChannel(getX(${me.join()}), ${ve});
        ${fe[ce-1]} += 1;
        if(${ge}) {
          ${Ee}
          result[1] = getChannel(getX(${me.join()}), ${ve});
        }
      `}else{const Ee=`
        ${le} source = rc;
        ${le} lt = ${le}(lessThan(source, start));
        ${le} gte = ${le}(greaterThanEqual(source, end));
        ${le} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${ye}) +
                gte * ((end - 1) * 2 - source + ${ye});
        source -= start;
      `;be=`
        ${le} rc = outputLoc;
        ${Ee}
        result[0] = getChannel(getX(${me.join()}), ${ve});
        ${fe[ce-1]} += 1;
        if(${ge}) {
          ${Ee}
          result[1] = getChannel(getX(${me.join()}), ${ve});
        }
        rc = outputLoc;
        ${fe[ce-2]} += 1;
        if(${fe[ce-2]} < ${this.outputShape[ce-2]}) {
          ${Ee}
          result[2] = getChannel(getX(${me.join()}), ${ve});
          ${fe[ce-1]} += 1;
          if(${ge}) {
            ${Ee}
            result[3] = getChannel(getX(${me.join()}), ${ve});
          }
        }
      `}this.userCode=`
      const ${le} start = ${le}(${ue});
      const ${le} end = ${le}(${he});

      void main() {
        ${le} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${be}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mirrorPadKernelFunc=({inputs:re,backend:ee,attrs:ne})=>{const{x:ae}=re,{paddings:ce,mode:le}=ne,ue=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new MirrorPadPackedProgram(ae.shape,ce,le):new MirrorPadProgram(ae.shape,ce,le);return ee.runWebGLProgram(ue,[ae],ae.dtype)},mirrorPadConfig={kernelName:MirrorPad,backendName:"webgl",kernelFunc:mirrorPadKernelFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MOD=`if (b == 0.0) return NAN;
  return mod(a, b);`,MOD_PACKED=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+CHECK_NAN_SNIPPET+`
  return result;
`,mod=binaryKernelFunc({opSnippet:MOD,packedOpSnippet:MOD_PACKED}),modConfig={kernelName:Mod,backendName:"webgl",kernelFunc:mod};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MultinomialProgram{constructor(ee,ne,ae){this.variableNames=["probs"],this.outputShape=[ee,ae],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${ne-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${ne-1}));
      }
    `}getCustomSetupFunc(ee){return(ne,ae)=>{this.seedLoc==null&&(this.seedLoc=ne.getUniformLocation(ae,"seed")),ne.gl.uniform1f(this.seedLoc,ee)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DIV=`
if (a == b) {
  return 1.0;
};
return a / b;`,DIV_PACKED=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,realDiv=binaryKernelFunc({opSnippet:DIV,packedOpSnippet:DIV_PACKED,checkOutOfBounds:!0}),realDivConfig={kernelName:RealDiv,backendName:"webgl",kernelFunc:realDiv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SUB="return a - b;",sub=binaryKernelFunc({opSnippet:SUB,packedOpSnippet:SUB,supportsComplex:!0,cpuKernelImpl:subImplCPU}),subConfig={kernelName:Sub,backendName:"webgl",kernelFunc:sub};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softmax(re){const{inputs:ee,backend:ne,attrs:ae}=re,{logits:ce}=ee,{dim:le}=ae,ue=parseAxisParam([le],ce.shape),he=max$1({inputs:{x:ce},backend:ne,attrs:{reductionIndices:ue,keepDims:!1}}),fe=expandShapeToKeepDim(he.shape,ue),me=reshape({inputs:{x:he},backend:ne,attrs:{shape:fe}}),ge=sub({inputs:{a:ce,b:me},backend:ne}),ve=exp({inputs:{x:ge},backend:ne}),ye=sum({inputs:{x:ve},backend:ne,attrs:{axis:ue,keepDims:!1}}),be=reshape({inputs:{x:ye},backend:ne,attrs:{shape:fe}}),Ee=realDiv({inputs:{a:ve,b:be},backend:ne});return ne.disposeIntermediateTensorInfo(he),ne.disposeIntermediateTensorInfo(me),ne.disposeIntermediateTensorInfo(ge),ne.disposeIntermediateTensorInfo(ve),ne.disposeIntermediateTensorInfo(ye),ne.disposeIntermediateTensorInfo(be),Ee}const softmaxConfig={kernelName:Softmax$2,backendName:"webgl",kernelFunc:softmax};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function multinomial(re){const{inputs:ee,backend:ne,attrs:ae}=re,{logits:ce}=ee,{numSamples:le,seed:ue,normalized:he}=ae,fe=he?ce:softmax({inputs:{logits:ce},backend:ne,attrs:{dim:ce.shape.length-1}}),me=fe.shape[0],ge=fe.shape[1],ve=new MultinomialProgram(me,ge,le),ye=ve.getCustomSetupFunc(ue),be=ne.runWebGLProgram(ve,[fe],"int32",ye);return he||ne.disposeIntermediateTensorInfo(fe),be}const multinomialConfig={kernelName:Multinomial,backendName:"webgl",kernelFunc:multinomial};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NEG="return -x;";function neg(re){const{inputs:ee,backend:ne}=re,{x:ae}=ee;if(ne.shouldExecuteOnCPU([ae])){const le=ne.texData.get(ae.dataId),[ue,he]=negImplCPU(le.values,ae.shape,ae.dtype);return ne.makeTensorInfo(he,ae.dtype,ue)}let ce;return env().getBool("WEBGL_PACK_UNARY_OPERATIONS")?ce=new UnaryOpPackedProgram(ae.shape,NEG):ce=new UnaryOpProgram(ae.shape,NEG),ne.runWebGLProgram(ce,[ae],ae.dtype)}const negConfig={kernelName:Neg,backendName:"webgl",kernelFunc:neg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV3Impl=nonMaxSuppressionV3Impl$2;function nonMaxSuppressionV3(re){warn$1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:ee,backend:ne,attrs:ae}=re,{boxes:ce,scores:le}=ee,{maxOutputSize:ue,iouThreshold:he,scoreThreshold:fe}=ae,me=ne.readSync(ce.dataId),ge=ne.readSync(le.dataId),{selectedIndices:ve}=nonMaxSuppressionV3Impl(me,ge,ue,he,fe);return ne.makeTensorInfo([ve.length],"int32",new Int32Array(ve))}const nonMaxSuppressionV3Config={kernelName:NonMaxSuppressionV3,backendName:"webgl",kernelFunc:nonMaxSuppressionV3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV4Impl=nonMaxSuppressionV4Impl$2;function nonMaxSuppressionV4(re){warn$1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:ee,backend:ne,attrs:ae}=re,{boxes:ce,scores:le}=ee,{maxOutputSize:ue,iouThreshold:he,scoreThreshold:fe,padToMaxOutputSize:me}=ae,ge=ne.readSync(ce.dataId),ve=ne.readSync(le.dataId),{selectedIndices:ye,validOutputs:be}=nonMaxSuppressionV4Impl(ge,ve,ue,he,fe,me);return[ne.makeTensorInfo([ye.length],"int32",new Int32Array(ye)),ne.makeTensorInfo([],"int32",new Int32Array([be]))]}const nonMaxSuppressionV4Config={kernelName:NonMaxSuppressionV4,backendName:"webgl",kernelFunc:nonMaxSuppressionV4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV5Impl=nonMaxSuppressionV5Impl$2;function nonMaxSuppressionV5(re){warn$1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:ee,backend:ne,attrs:ae}=re,{boxes:ce,scores:le}=ee,{maxOutputSize:ue,iouThreshold:he,scoreThreshold:fe,softNmsSigma:me}=ae,ge=ne.readSync(ce.dataId),ve=ne.readSync(le.dataId),ye=ue,be=he,Ee=fe,Ce=me,{selectedIndices:Se,selectedScores:Te}=nonMaxSuppressionV5Impl(ge,ve,ye,be,Ee,Ce);return[ne.makeTensorInfo([Se.length],"int32",new Int32Array(Se)),ne.makeTensorInfo([Te.length],"float32",new Float32Array(Te))]}const nonMaxSuppressionV5Config={kernelName:NonMaxSuppressionV5,backendName:"webgl",kernelFunc:nonMaxSuppressionV5};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OneHotProgram{constructor(ee,ne,ae,ce){this.variableNames=["indices"],this.outputShape=[ee,ne],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${ce}), float(${ae}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oneHot=re=>{const{inputs:ee,backend:ne,attrs:ae}=re,{indices:ce}=ee,{depth:le,onValue:ue,offValue:he}=ae,fe=sizeFromShape(ce.shape),me=new OneHotProgram(fe,le,ue,he),ge=reshape({inputs:{x:ce},backend:ne,attrs:{shape:[fe]}}),ve=ne.runWebGLProgram(me,[ge],ce.dtype);ne.disposeIntermediateTensorInfo(ge);const ye=[...ce.shape,le],be=reshape({inputs:{x:ve},backend:ne,attrs:{shape:ye}});return ne.disposeIntermediateTensorInfo(ve),be},oneHotConfig={kernelName:OneHot,backendName:"webgl",kernelFunc:oneHot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zerosLike(re){const{inputs:ee,backend:ne}=re,{x:ae}=ee;if(ae.dtype==="complex64"){const ce=real({inputs:{input:ae},backend:ne}),le=zerosLike({inputs:{x:ce},backend:ne}),ue=imag({inputs:{input:ae},backend:ne}),he=zerosLike({inputs:{x:ue},backend:ne}),fe=complex({inputs:{real:le,imag:he},backend:ne});return ne.disposeIntermediateTensorInfo(ce),ne.disposeIntermediateTensorInfo(le),ne.disposeIntermediateTensorInfo(ue),ne.disposeIntermediateTensorInfo(he),fe}else return fill$1({attrs:{shape:ae.shape,dtype:ae.dtype,value:ae.dtype==="string"?"":0},backend:ne})}const zerosLikeConfig={kernelName:ZerosLike,backendName:"webgl",kernelFunc:zerosLike};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function onesLike(re){const{inputs:ee,backend:ne}=re,{x:ae}=ee;if(ae.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(ae.dtype==="complex64"){const ce=real({inputs:{input:ae},backend:ne}),le=onesLike({inputs:{x:ce},backend:ne}),ue=imag({inputs:{input:ae},backend:ne}),he=zerosLike({inputs:{x:ue},backend:ne}),fe=complex({inputs:{real:le,imag:he},backend:ne});return ne.disposeIntermediateTensorInfo(ce),ne.disposeIntermediateTensorInfo(le),ne.disposeIntermediateTensorInfo(ue),ne.disposeIntermediateTensorInfo(he),fe}else return fill$1({attrs:{shape:ae.shape,dtype:ae.dtype,value:1},backend:ne})}const onesLikeConfig={kernelName:OnesLike,backendName:"webgl",kernelFunc:onesLike};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pack(re){const{inputs:ee,backend:ne,attrs:ae}=re,{axis:ce}=ae;if(ee.length===1)return expandDims({inputs:{input:ee[0]},backend:ne,attrs:{dim:ce}});const le=ee[0].shape,ue=ee[0].dtype;ee.forEach(ge=>{assertShapesMatch(le,ge.shape,"All tensors passed to stack must have matching shapes"),assert$2(ue===ge.dtype,()=>"All tensors passed to stack must have matching dtypes")});const he=[],fe=ee.map(ge=>{const ve=expandDims({inputs:{input:ge},backend:ne,attrs:{dim:ce}});return he.push(ve),ve}),me=concat({inputs:fe,backend:ne,attrs:{axis:ce}});return he.forEach(ge=>ne.disposeIntermediateTensorInfo(ge)),me}const packConfig={kernelName:Pack,backendName:"webgl",kernelFunc:pack};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PadProgram{constructor(ee,ne,ae){this.variableNames=["x"],this.outputShape=ne.map((me,ge)=>me[0]+ee[ge]+me[1]);const ce=ee.length,le=getCoordsDataType(ce),ue=ne.map(me=>me[0]).join(","),he=ne.map((me,ge)=>me[0]+ee[ge]).join(","),fe=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,ce);if(ce===1){this.userCode=`
        int start = ${ue};
        int end = ${he};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(${ae}));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${le} start = ${le}(${ue});
      ${le} end = ${le}(${he});

      void main() {
        ${le} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(${ae}));
        } else {
          ${le} coords = outC - start;
          setOutput(getX(${fe}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PadPackedProgram{constructor(ee,ne,ae){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ne.map((Ce,Se)=>Ce[0]+ee[Se]+Ce[1]);const ce=ee.length,le=getCoordsDataType(ce),ue=ne.map(Ce=>Ce[0]).join(","),he=ne.map((Ce,Se)=>Ce[0]+ee[Se]).join(","),fe=getChannels("rc",ce),me=getChannels("source",ce),ge=`${fe[ce-1]} < ${this.outputShape[ce-1]}`,ve=ce===1?"source":`vec2(${me.slice(-2).join()})`,ye=[`${le} rc = outputLoc;`,`${fe[ce-1]} += 1;
       if(${ge}) {
      `,ce===1?"":`}
       rc = outputLoc;
       ${fe[ce-2]} += 1;
       if(${fe[ce-2]} < ${this.outputShape[ce-2]}) {`,ce===1?"":`  ${fe[ce-1]} += 1;
         if(${ge}) {`],be=ce===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let Ee="";for(let Ce=0,Se=ce===1?2:4;Ce<Se;Ce++)Ee+=`
        ${ye[Ce]}
        if (${be}) {
          result[${Ce}] = float(${ae});
        } else {
          ${le} source = rc - start;
          result[${Ce}] = getChannel(getX(${me.join()}), ${ve});
        }
      `;Ee+=ce===1?"} ":"}}",this.userCode=`
      const ${le} start = ${le}(${ue});
      const ${le} end = ${le}(${he});

      void main() {
        ${le} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${Ee}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const padV2=re=>{const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{paddings:le,constantValue:ue}=ae,he=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new PadPackedProgram(ce.shape,le,ue):new PadProgram(ce.shape,le,ue);return ne.runWebGLProgram(he,[ce],ce.dtype)},padV2Config={kernelName:PadV2,backendName:"webgl",kernelFunc:padV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const POW=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,POW_PACKED=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+CHECK_NAN_SNIPPET+`
  return result;
`,pow=binaryKernelFunc({opSnippet:POW,packedOpSnippet:POW_PACKED}),powConfig={kernelName:Pow$1,backendName:"webgl",kernelFunc:pow};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prod(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{axis:le,keepDims:ue}=ae,he=ce.shape.length,fe=[],me=parseAxisParam(le,ce.shape);let ge=me;const ve=getAxesPermutation(ge,he);let ye=ce;ve!=null&&(ye=transpose({inputs:{x:ce},backend:ne,attrs:{perm:ve}}),ge=getInnerMostAxes(ge.length,he),fe.push(ye)),assertAxesAreInnerMostDims("prod",ge,he);let be;if(ne.shouldExecuteOnCPU([ye])){const Ee=ne.texData.get(ye.dataId).values,{outVals:Ce,outShape:Se,outDtype:Te}=prodImplCPU(ye.shape,ye.dtype,Ee,ge);be=ne.makeTensorInfo(Se,Te,Ce)}else{const[Ee,Ce]=computeOutAndReduceShapes(ye.shape,ge),Se=sizeFromShape(Ce),Te=reshape({inputs:{x:ye},backend:ne,attrs:{shape:[-1,Se]}}),ke=sumOutType(ce.dtype),Ne=reduce(Te,ke,"prod",ne);be=reshape({inputs:{x:Ne},backend:ne,attrs:{shape:Ee}}),fe.push(Te),fe.push(Ne)}if(ue){fe.push(be);const Ee=expandShapeToKeepDim(be.shape,me);be=reshape({inputs:{x:be},backend:ne,attrs:{shape:Ee}})}return fe.forEach(Ee=>ne.disposeIntermediateTensorInfo(Ee)),be}const prodConfig={kernelName:Prod,backendName:"webgl",kernelFunc:prod};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const range$1=re=>{const{backend:ee,attrs:ne}=re,{start:ae,stop:ce,step:le,dtype:ue}=ne,he=rangeImplCPU(ae,ce,le,ue);return ee.makeTensorInfo([he.length],ue,he)},rangeConfig={kernelName:Range,backendName:"webgl",kernelFunc:range$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RECIPROCAL="return 1.0 / x;",reciprocal=unaryKernelFunc({opSnippet:RECIPROCAL}),reciprocalConfig={kernelName:Reciprocal,backendName:"webgl",kernelFunc:reciprocal};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RELU=CHECK_NAN_SNIPPET$2+`
  return (x < 0.0) ? 0.0 : x;
`,RELU_PACKED=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,relu=unaryKernelFunc({opSnippet:RELU,packedOpSnippet:RELU_PACKED}),reluConfig={kernelName:Relu$1,backendName:"webgl",kernelFunc:relu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RELU6=CHECK_NAN_SNIPPET$2+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,RELU6_PACKED=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,relu6=unaryKernelFunc({opSnippet:RELU6,packedOpSnippet:RELU6_PACKED}),relu6Config={kernelName:Relu6$1,backendName:"webgl",kernelFunc:relu6};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeBilinearProgram{constructor(ee,ne,ae,ce,le){this.variableNames=["A"],this.outputShape=[];const[ue,he,fe,me]=ee;this.outputShape=[ue,ne,ae,me];const ge=[ce&&ne>1?he-1:he,ce&&ae>1?fe-1:fe],ve=[ce&&ne>1?ne-1:ne,ce&&ae>1?ae-1:ae];let ye;le?ye="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":ye="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${ge[0]/ve[0]},
          ${ge[1]/ve[1]});
      const vec2 inputShapeRC = vec2(${he}.0, ${fe}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${ye};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeBilinearPackedProgram{constructor(ee,ne,ae,ce,le){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[ue,he,fe,me]=ee;this.outputShape=[ue,ne,ae,me];const ge=[ce&&ne>1?he-1:he,ce&&ae>1?fe-1:fe],ve=[ce&&ne>1?ne-1:ne,ce&&ae>1?ae-1:ae];let ye;le?ye="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":ye="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${ge[0]/ve[0]},
          ${ge[1]/ve[1]},
          ${ge[1]/ve[1]});
      const vec3 inputShapeRC = vec3(${he}.0, ${fe}.0,
                                     ${fe}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${ye};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${me-1};
        bool hasNextRow = coords.z < ${ae-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinear(re){const{inputs:ee,backend:ne,attrs:ae}=re,{images:ce}=ee,{alignCorners:le,halfPixelCenters:ue,size:he}=ae,[fe,me]=he,ge=env().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ResizeBilinearPackedProgram(ce.shape,fe,me,le,ue):new ResizeBilinearProgram(ce.shape,fe,me,le,ue);return ne.runWebGLProgram(ge,[ce],"float32")}const resizeBilinearConfig={kernelName:ResizeBilinear,backendName:"webgl",kernelFunc:resizeBilinear};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeBilinearBackpropProgram{constructor(ee,ne,ae){this.variableNames=["dy"],this.outputShape=[],this.outputShape=ne;const[,ce,le]=ne,[,ue,he]=ee,fe=[ae&&ue>1?ce-1:ce,ae&&he>1?le-1:le],me=[ae&&ue>1?ue-1:ue,ae&&he>1?he-1:he],ge=fe[0]/me[0],ve=fe[1]/me[1],ye=1/ge,be=1/ve,Ee=Math.ceil(ye)*2+2,Ce=Math.ceil(be)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${ge});
        const float widthScale = float(${ve});

        const float invHeightScale = float(${ye});
        const float invWidthScale = float(${be});

        const int winHeight = int(${Ee});
        const int winWidth = int(${Ce});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${ue}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${he}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${ce-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${le-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinearGrad(re){const{inputs:ee,backend:ne,attrs:ae}=re,{images:ce,dy:le}=ee,{alignCorners:ue}=ae,he=new ResizeBilinearBackpropProgram(le.shape,ce.shape,ue);return ne.runWebGLProgram(he,[le],le.dtype)}const resizeBilinearGradConfig={kernelName:ResizeBilinearGrad,backendName:"webgl",kernelFunc:resizeBilinearGrad};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeNearestNeighborProgram{constructor(ee,ne,ae,ce,le){this.variableNames=["A"],this.outputShape=[];const[ue,he,fe,me]=ee;this.outputShape=[ue,ne,ae,me];const ge=[ce&&ne>1?he-1:he,ce&&ae>1?fe-1:fe],ve=[ce&&ne>1?ne-1:ne,ce&&ae>1?ae-1:ae],ye=ce?"0.5":"0.0";let be;le?be="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":be="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${ge[0]/ve[0]},
          ${ge[1]/ve[1]});
      const vec2 inputShapeRC = vec2(${he}.0, ${fe}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${be};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${ye})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighbor(re){const{inputs:ee,backend:ne,attrs:ae}=re,{images:ce}=ee,{alignCorners:le,halfPixelCenters:ue,size:he}=ae,[fe,me]=he,ge=new ResizeNearestNeighborProgram(ce.shape,fe,me,le,ue);return ne.runWebGLProgram(ge,[ce],ce.dtype)}const resizeNearestNeighborConfig={kernelName:ResizeNearestNeighbor,backendName:"webgl",kernelFunc:resizeNearestNeighbor};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeNearestNeigborBackpropProgram{constructor(ee,ne,ae){this.variableNames=["dy"],this.outputShape=[],this.outputShape=ne;const[,ce,le]=ne,[,ue,he]=ee,fe=[ae&&ue>1?ce-1:ce,ae&&he>1?le-1:le],me=[ae&&ue>1?ue-1:ue,ae&&he>1?he-1:he],ge=fe[0]/me[0],ve=fe[1]/me[1],ye=1/ge,be=1/ve,Ee=Math.ceil(ye)*2+2,Ce=Math.ceil(be)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${ge});
        const float widthScale = float(${ve});

        const float invHeightScale = float(${ye});
        const float invWidthScale = float(${be});

        const int winHeight = int(${Ee});
        const int winWidth = int(${Ce});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${ue}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${he}) {
              continue;
            }

            float sourceFracRow =
              float(${fe[0]}) *
                (float(dyR) / float(${me[0]}));

            float sourceFracCol =
                float(${fe[1]}) *
                  (float(dyC) / float(${me[1]}));

            int sourceNearestRow = int(min(
                float(int(${ce}) - 1),
                ${ae} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${le}) - 1),
                ${ae} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighborGrad(re){const{inputs:ee,backend:ne,attrs:ae}=re,{images:ce,dy:le}=ee,{alignCorners:ue}=ae,he=new ResizeNearestNeigborBackpropProgram(le.shape,ce.shape,ue);return ne.runWebGLProgram(he,[le],le.dtype)}const resizeNearestNeighborGradConfig={kernelName:ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:resizeNearestNeighborGrad};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReverseProgram{constructor(ee,ne){this.variableNames=["x"];const ae=ee.length;if(ae>4)throw new Error(`WebGL backend: Reverse of rank-${ae} tensor is not yet supported`);if(this.outputShape=ee,ae===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${ee[0]} - coord - 1));
        }
      `;return}const ce=he=>ne.indexOf(he)!==-1&&ee[he]!==1?`${ee[he]} - coords[${he}] - 1`:`coords[${he}]`,le=ee.map((he,fe)=>ce(fe)).join(","),ue=getCoordsDataType(ae);this.userCode=`
      void main() {
        ${ue} coords = getOutputCoords();
        setOutput(getX(${le}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReversePackedProgram{constructor(ee,ne){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const ae=ee.length;if(ae>4)throw new Error(`WebGL backend: Reverse of rank-${ae} tensor is not yet supported`);this.outputShape=ee;const ce=getChannels("rc",ae),le=`${ce[ae-1]} + 1 < ${this.outputShape[ae-1]}`,ue=`${ce[ae-2]} + 1 < ${this.outputShape[ae-2]}`,he=getCoordsDataType(ae);ae===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${ee[0]} - rc - 1),
            ${ee[0]} - rc - 1);
          if(${le}){
              result.g = getChannel(getX(${ee[0]} - (rc  + 1) - 1),
                ${ee[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${he} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${fe(ce.slice())};
          if(${le}){
            result.g = ${me(ce.slice())};
          }
          if(${ue}) {
            result.b = ${ge(ce.slice())};
            if(${le}) {
              result.a = ${ve(ce.slice())};
            }
          }
          setOutput(result);
        }
    `;function fe(Ee){return ye(Ee)}function me(Ee){return Ee[ae-1]="("+Ee[ae-1]+" + 1)",ye(Ee)}function ge(Ee){return Ee[ae-2]="("+Ee[ae-2]+" + 1)",ye(Ee)}function ve(Ee){return Ee[ae-1]="("+Ee[ae-1]+" + 1)",Ee[ae-2]="("+Ee[ae-2]+" + 1)",ye(Ee)}function ye(Ee){const Ce=ee.map((ke,Ne)=>be(Ne,Ee)),Se=Ce.join(","),Te=Ce.slice(-2).join(",");return`getChannel(getX(${Se}), vec2(${Te}))`}function be(Ee,Ce){return ne.indexOf(Ee)!==-1&&ee[Ee]!==1?`${ee[Ee]} - ${Ce[Ee]} - 1`:`${Ce[Ee]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{dims:le}=ae,ue=ce.shape.length,he=parseAxisParam(le,ce.shape);if(ue===0)return identity$3({inputs:{x:ce},backend:ne});const fe=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ReversePackedProgram(ce.shape,he):new ReverseProgram(ce.shape,he);return ne.runWebGLProgram(fe,[ce],ce.dtype)}const reverseConfig={kernelName:Reverse,backendName:"webgl",kernelFunc:reverse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RotateProgram{constructor(ee,ne,ae,ce){this.variableNames=["Image"],this.outputShape=[];const le=ee[1],ue=ee[2],he=Math.sin(ne).toFixed(3),fe=Math.cos(ne).toFixed(3);this.outputShape=ee;const[me,ge]=getImageCenter(ce,le,ue),ve=me.toFixed(3),ye=ge.toFixed(3);let be="";typeof ae=="number"?be=`float outputValue = ${ae.toFixed(2)};`:be=`
        vec3 fill = vec3(${ae.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - ${ve}) * ${fe} - (float(y) - ${ye}) * ${he};
          float coordYFloat = (float(x) - ${ve}) * ${he} + (float(y) - ${ye}) * ${fe};
          int coordX = int(round(coordXFloat + ${ve}));
          int coordY = int(round(coordYFloat + ${ye}));
          ${be}
          if(coordX >= 0 && coordX < ${ue} && coordY >= 0 && coordY < ${le}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rotateWithOffsetConfig={kernelName:RotateWithOffset,backendName:"webgl",kernelFunc:({inputs:re,attrs:ee,backend:ne})=>{const{image:ae}=re,{radians:ce,fillValue:le,center:ue}=ee,he=ne,fe=new RotateProgram(ae.shape,ce,le,ue);return he.runWebGLProgram(fe,[ae],ae.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ROUND=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,round$1=unaryKernelFunc({opSnippet:ROUND}),roundConfig={kernelName:Round,backendName:"webgl",kernelFunc:round$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RSQRT="return inversesqrt(x);",rsqrt=unaryKernelFunc({opSnippet:RSQRT,cpuKernelImpl:rsqrtImplCPU}),rsqrtConfig={kernelName:Rsqrt,backendName:"webgl",kernelFunc:rsqrt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ScatterProgram{constructor(ee,ne,ae,ce,le,ue,he=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=ue;const fe=getCoordsDataType(le.length),me=getCoordsDataType(ue.length);let ge="";ae===1?ge="i":ae===2&&(ge="i, j");const ve=`getIndices(${ge})`;let ye="";ce===1?ye="i":ce===2&&(ye="i, coords[1]");const be=`getUpdates(${ye})`,Ee=ne>1?"strides[j]":"strides";this.userCode=`
        ${fe} strides = ${fe}(${le});

        void main() {
          ${me} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${ee}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${ne}; j++) {
              int index = round(${ve});
              flattenedIndex += index * ${Ee};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${be};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scatterNd(re){const{inputs:ee,backend:ne,attrs:ae}=re,{indices:ce,updates:le}=ee,{shape:ue}=ae,{sliceRank:he,numUpdates:fe,sliceSize:me,strides:ge,outputSize:ve}=calculateShapes(le,ce,ue),ye=[ve/me,me];if(ve===0)return ne.makeTensorInfo(ue,ce.dtype);const be=reshape({inputs:{x:ce},backend:ne,attrs:{shape:[fe,he]}}),Ee=reshape({inputs:{x:le},backend:ne,attrs:{shape:[fe,me]}}),Ce=ne.makeTensorInfo([],"float32",new Float32Array([0])),Se=new ScatterProgram(fe,he,be.shape.length,Ee.shape.length,ge,ye),Te=ne.runWebGLProgram(Se,[Ee,be,Ce],Ee.dtype),ke=reshape({inputs:{x:Te},backend:ne,attrs:{shape:ue}});return ne.disposeIntermediateTensorInfo(be),ne.disposeIntermediateTensorInfo(Ee),ne.disposeIntermediateTensorInfo(Te),ne.disposeIntermediateTensorInfo(Ce),ke}const scatterNdConfig={kernelName:ScatterNd,backendName:"webgl",kernelFunc:scatterNd};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SelectProgram{constructor(ee,ne,ae){this.variableNames=["c","a","b"],this.outputShape=ne;let ce,le;if(ae>4)throw Error(`Where for rank ${ae} is not yet supported`);if(ae===1)le="resRC",ce="resRC";else{const he=["resRC.x","resRC.y","resRC.z","resRC.w"],fe=[],me=[];for(let ge=0;ge<ne.length;ge++)me.push(`${he[ge]}`),ge<ee&&fe.push(`${he[ge]}`);ce=fe.join(),le=me.join()}const ue=getCoordsDataType(ae);this.userCode=`
      void main() {
        ${ue} resRC = getOutputCoords();
        float cVal = getC(${ce});
        if (cVal >= 1.0) {
          setOutput(getA(${le}));
        } else {
          setOutput(getB(${le}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function select(re){const{inputs:ee,backend:ne}=re,{condition:ae,t:ce,e:le}=ee,ue=new SelectProgram(ae.shape.length,ce.shape,ce.shape.length);return ne.runWebGLProgram(ue,[ae,ce,le],upcastType(ce.dtype,le.dtype))}const selectConfig={kernelName:Select$2,backendName:"webgl",kernelFunc:select};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SELU=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${SELU_SCALEALPHA};
  float scale = ${SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,selu=unaryKernelFunc({opSnippet:SELU}),seluConfig={kernelName:Selu$1,backendName:"webgl",kernelFunc:selu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIGMOID="return 1.0 / (1.0 + exp(-1.0 * x));",sigmoid=unaryKernelFunc({opSnippet:SIGMOID}),sigmoidConfig={kernelName:Sigmoid$1,backendName:"webgl",kernelFunc:sigmoid};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIGN=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,sign$1=unaryKernelFunc({opSnippet:SIGN}),signConfig={kernelName:Sign,backendName:"webgl",kernelFunc:sign$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIN=CHECK_NAN_SNIPPET_UNARY+`
  return sin(x);
`,sin=unaryKernelFunc({opSnippet:SIN}),sinConfig={kernelName:Sin,backendName:"webgl",kernelFunc:sin};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SINH=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,sinh=unaryKernelFunc({opSnippet:SINH}),sinhConfig={kernelName:Sinh,backendName:"webgl",kernelFunc:sinh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SOFTPLUS=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,softplus=unaryKernelFunc({opSnippet:SOFTPLUS}),softplusConfig={kernelName:Softplus$1,backendName:"webgl",kernelFunc:softplus};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const spaceToBatchND=re=>{const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{blockShape:le,paddings:ue}=ae;assert$2(ce.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const he=le.reduce((Te,ke)=>Te*ke),fe=[[0,0]];fe.push(...ue);for(let Te=1+le.length;Te<ce.shape.length;++Te)fe.push([0,0]);const me=[],ge=padV2({inputs:{x:ce},backend:ne,attrs:{paddings:fe,constantValue:0}}),ve=getReshaped(ge.shape,le,he,!1),ye=getPermuted(ve.length,le.length,!1),be=getReshapedPermuted(ge.shape,le,he,!1),Ee=reshape({inputs:{x:ge},backend:ne,attrs:{shape:ve}}),Ce=transpose({inputs:{x:Ee},backend:ne,attrs:{perm:ye}}),Se=reshape({inputs:{x:Ce},backend:ne,attrs:{shape:be}});return me.push(ge),me.push(Ee),me.push(Ce),me.forEach(Te=>ne.disposeIntermediateTensorInfo(Te)),Se},spaceToBatchNDConfig={kernelName:SpaceToBatchND,backendName:"webgl",kernelFunc:spaceToBatchND};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseToDense(re){const{inputs:ee,backend:ne,attrs:ae}=re,{sparseIndices:ce,sparseValues:le,defaultValue:ue}=ee,{outputShape:he}=ae,{sliceRank:fe,numUpdates:me,strides:ge,outputSize:ve}=calculateShapes(le,ce,he),ye=!1,be=new ScatterProgram(me,fe,ce.shape.length,le.shape.length,ge,[ve,1],ye),Ee=ne.runWebGLProgram(be,[le,ce,ue],le.dtype),Ce=reshape({inputs:{x:Ee},backend:ne,attrs:{shape:he}});return ne.disposeIntermediateTensorInfo(Ee),Ce}const sparseToDenseConfig={kernelName:SparseToDense,backendName:"webgl",kernelFunc:sparseToDense};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function splitV(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{numOrSizeSplits:le,axis:ue}=ae,he=parseAxisParam(ue,ce.shape)[0],fe=prepareSplitSize(ce,le,he),me=ce.shape.length,ge=new Array(me).fill(0),ve=ce.shape.slice();return fe.map(ye=>{const be=[...ve];be[he]=ye;const Ee=slice$2({inputs:{x:ce},backend:ne,attrs:{begin:ge,size:be}});return ge[he]+=ye,Ee})}const splitVConfig={kernelName:SplitV,backendName:"webgl",kernelFunc:splitV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQRT="return sqrt(x);",sqrt=unaryKernelFunc({opSnippet:SQRT}),sqrtConfig={kernelName:Sqrt,backendName:"webgl",kernelFunc:sqrt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQUARE="return x * x;",square$1=unaryKernelFunc({opSnippet:SQUARE}),squareConfig={kernelName:Square,backendName:"webgl",kernelFunc:square$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQUARED_DIFFERENCE="return (a - b) * (a - b);",squaredDifference=binaryKernelFunc({opSnippet:SQUARED_DIFFERENCE,packedOpSnippet:SQUARED_DIFFERENCE}),squaredDifferenceConfig={kernelName:SquaredDifference,backendName:"webgl",kernelFunc:squaredDifference};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function step({inputs:re,attrs:ee,backend:ne}){const{x:ae}=re,ce=CHECK_NAN_SNIPPET$2+`
    return x > 0.0 ? 1.0 : float(${ee.alpha});
  `,le=new UnaryOpProgram(ae.shape,ce);return ne.runWebGLProgram(le,[ae],ae.dtype)}const stepConfig={kernelName:Step,backendName:"webgl",kernelFunc:step};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class StridedSliceProgram{constructor(ee,ne,ae){this.variableNames=["x"],this.outputShape=ae;const ce=ae.length,le=getCoordsDataType(ae.length),ue=getCoordsDataType(ae.length);let he="";if(ce===1)he="coords * strides + begin";else{let fe=0;he=ae.map((me,ge)=>(fe++,ae.length===1?`coords * strides[${ge}] + begin[${ge}]`:`coords[${fe-1}] * strides[${ge}] + begin[${ge}]`)).join(",")}this.userCode=`
      ${le} begin = ${le}(${ee});
      ${le} strides = ${le}(${ne});

      void main() {
        ${ue} coords = getOutputCoords();
        setOutput(getX(${he}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSlice(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{begin:le,end:ue,strides:he,beginMask:fe,endMask:me,ellipsisMask:ge,newAxisMask:ve,shrinkAxisMask:ye}=ae,{nonStrided:be,$begin:Ee,$strides:Ce,size:Se,newShape:Te,outShape:ke}=sliceInfo(ce.shape,le,ue,he,fe,me,ge,ve,ye),Ne=reshape({inputs:{x:ce},backend:ne,attrs:{shape:Te}});let Fe;if(be){const Oe=slice$2({inputs:{x:Ne},backend:ne,attrs:{begin:Ee,size:Se}});Fe=reshape({inputs:{x:Oe},backend:ne,attrs:{shape:ke}}),ne.disposeIntermediateTensorInfo(Oe)}else if(ke.some(Oe=>Oe===0))Fe=ne.makeTensorInfo(ke,ce.dtype,[]);else if(ne.shouldExecuteOnCPU([Ne])){const Be=ne.texData.get(Ne.dataId).values,Le=buffer$1(Ne.shape,Ne.dtype,Be),je=stridedSliceImplCPU(ke,Le,Ce,Ee);Fe=ne.makeTensorInfo(ke,Ne.dtype,je.values)}else{const Re=new StridedSliceProgram(Ee,Ce,ke);Fe=ne.runWebGLProgram(Re,[Ne],Ne.dtype)}const De=reshape({inputs:{x:Fe},backend:ne,attrs:{shape:ke}});return ne.disposeIntermediateTensorInfo(Ne),ne.disposeIntermediateTensorInfo(Fe),De}const stridedSliceConfig={kernelName:StridedSlice,backendName:"webgl",kernelFunc:stridedSlice};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TAN="return tan(x);",tan=unaryKernelFunc({opSnippet:TAN}),tanConfig={kernelName:Tan,backendName:"webgl",kernelFunc:tan};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TANH=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,tanh=unaryKernelFunc({opSnippet:TANH}),tanhConfig={kernelName:Tanh$1,backendName:"webgl",kernelFunc:tanh};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TileProgram{constructor(ee,ne){this.variableNames=["A"];const ae=new Array(ee.length);for(let ue=0;ue<ae.length;ue++)ae[ue]=ee[ue]*ne[ue];this.outputShape=ae,this.rank=ae.length;const ce=getCoordsDataType(this.rank),le=getSourceCoords(ee);this.userCode=`
      void main() {
        ${ce} resRC = getOutputCoords();
        setOutput(getA(${le}));
      }
    `}}function getSourceCoords(re){const ee=re.length;if(ee>5)throw Error(`Tile for rank ${ee} is not yet supported`);if(ee===1)return`imod(resRC, ${re[0]})`;const ne=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],ae=[];for(let ce=0;ce<re.length;ce++)ae.push(`imod(${ne[ce]}, ${re[ce]})`);return ae.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tile(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{reps:le}=ae;if(ce.dtype==="string"){const me=ne.readSync(ce.dataId).map(ye=>decodeString(ye)),ge=buffer$1(ce.shape,ce.dtype,me),ve=tileImplCPU(ge,le);return ne.makeTensorInfo(ve.shape,ve.dtype,ve.values)}const ue=new TileProgram(ce.shape,le);return ne.runWebGLProgram(ue,[ce],ce.dtype)}const tileConfig={kernelName:Tile,backendName:"webgl",kernelFunc:tile};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function topK(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce}=ee,{k:le,sorted:ue}=ae,he=ne.readSync(ce.dataId),[fe,me]=topKImplCPU(he,ce.shape,ce.dtype,le,ue);return[ne.makeTensorInfo(fe.shape,fe.dtype,fe.values),ne.makeTensorInfo(me.shape,me.dtype,me.values)]}const topKConfig={kernelName:TopK,backendName:"webgl",kernelFunc:topK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unique$1(re){const{inputs:ee,attrs:ne,backend:ae}=re,{axis:ce}=ne,{x:le}=ee;assertNotComplex(le,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const ue=ae.readSync(le.dataId),{outputValues:he,outputShape:fe,indices:me}=uniqueImplCPU(ue,ce,le.shape,le.dtype);return[ae.makeTensorInfo(fe,le.dtype,he),ae.makeTensorInfo([me.length],"int32",me)]}const uniqueConfig={kernelName:Unique,backendName:"webgl",kernelFunc:unique$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unpack(re){const{inputs:ee,backend:ne,attrs:ae}=re,{value:ce}=ee;let{axis:le}=ae;le<0&&(le+=ce.shape.length);const ue=ce,he=ue.shape.length,fe=ce.shape[le],me=new Array(he-1);let ge=0;for(let Ce=0;Ce<he;Ce++)Ce!==le&&(me[ge++]=ue.shape[Ce]);const ve=[],ye=new Array(he).fill(0),be=ue.shape.slice();be[le]=1;const Ee=new Array(fe);for(let Ce=0;Ce<Ee.length;Ce++){ye[le]=Ce;const Se=slice$2({inputs:{x:ue},backend:ne,attrs:{begin:ye,size:be}}),Te=reshape({inputs:{x:Se},backend:ne,attrs:{shape:me}});Ee[Ce]=Te,ve.push(Se)}return ve.forEach(Ce=>ne.disposeIntermediateTensorInfo(Ce)),Ee}const unpackConfig={kernelName:Unpack,backendName:"webgl",kernelFunc:unpack};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SegmentOpProgram{constructor(ee,ne){this.variableNames=["x","segmentIds"];const ae=ee.windowSize,ce=ee.batchSize,le=ee.inSize,ue=ee.numSegments,he=ue*Math.ceil(le/ae);this.outputShape=[ce,he];const fe="0.0",me="sumValue",ge=Math.floor(ae/4)*4,ve=ae%4,ye=`
        sumValue += dot(values, segFilter);
    `;let be="";le%ae>0&&(be=`
        if (inIdx < 0 || inIdx >= ${le}) {
          return initializationValue;
        }
      `);let Ee="";le%ae>0&&(Ee=`
        if (inIdx < 0 || inIdx >= ${le}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${fe};

      float getValue(int batch, int inIdx) {
        ${be}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${Ee}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${ue})) * float(${ae}));
        int currentSeg = int(mod(float(outIdx), float(${ue})));

        float sumValue = 0.0;

        for (int i = 0; i < ${ge}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${ye}
        }

        int inIdx = inOffset + ${ge};
        if (${ve===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${ye}
        } else if (${ve===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${ye}
        } else if (${ve===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${ye}
        }
        setOutput(${me});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unsortedSegmentSum(re){const{inputs:ee,backend:ne,attrs:ae}=re,{x:ce,segmentIds:le}=ee,{numSegments:ue}=ae,he=ce.shape.length,fe=[];let me=0;const ge=getAxesPermutation([me],he);let ve=ce;ge!=null&&(ve=transpose({inputs:{x:ce},backend:ne,attrs:{perm:ge}}),fe.push(ve),me=getInnerMostAxes(1,he)[0]);const ye=computeOutShape(ve.shape,me,ue),be=sizeFromShape([ve.shape[me]]),Ee=reshape({inputs:{x:ve},backend:ne,attrs:{shape:[-1,be]}});fe.push(Ee);const Ce=sumOutType(ce.dtype),Se=(Fe,De,Oe,Re,Be)=>{const Le=Fe.shape[0],je=Fe.shape[1],Ge=segOpComputeOptimalWindowSize(je,Be),qe={windowSize:Ge,inSize:je,batchSize:Le,numSegments:Be},Ue=new SegmentOpProgram(qe,De),ze=ne.compileAndRun(Ue,[Fe,Oe],Re);if(fe.push(ze),ze.shape[1]===Be)return ze;const He=range$1({backend:ne,attrs:{start:0,stop:Be,step:1,dtype:"float32"}}),Ye=tile({inputs:{x:He},backend:ne,attrs:{reps:[je/Ge]}});return fe.push(He),fe.push(Ye),Se(ze,De,Ye,Re,Be)},Te=Se(Ee,"unsortedSegmentSum",le,Ce,ue),ke=reshape({inputs:{x:Te},backend:ne,attrs:{shape:ye}});let Ne=ke;if(ge!=null){fe.push(ke);const Fe=getUndoAxesPermutation(ge);Ne=transpose({inputs:{x:Ne},backend:ne,attrs:{perm:Fe}})}return fe.forEach(Fe=>ne.disposeIntermediateTensorInfo(Fe)),Ne}const unsortedSegmentSumConfig={kernelName:UnsortedSegmentSum,backendName:"webgl",kernelFunc:unsortedSegmentSum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kernelConfigs=[LRNConfig,LRNGradConfig,_fusedMatMulConfig,absConfig,acosConfig,acoshConfig,addConfig,addNConfig,allConfig,anyConfig,argMaxConfig,argMinConfig,asinConfig,asinhConfig,atan2Config,atanConfig,atanhConfig,avgPool3DConfig,avgPoolConfig,avgPoolGrad3DConfig,avgPoolGradConfig,batchMatMulConfig,batchNormConfig,batchToSpaceNDConfig,bincountConfig,castConfig,ceilConfig,clipByValueConfig,complexAbsConfig,complexConfig,concatConfig,conv2DBackpropFilterConfig,conv2DBackpropInputConfig,conv2DConfig,conv3DBackpropFilterV2Config,conv3DBackpropInputConfig,conv3DConfig,cosConfig,coshConfig,cropAndResizeConfig,cumsumConfig,denseBincountConfig,depthToSpaceConfig,depthwiseConv2dNativeBackpropFilterConfig,depthwiseConv2dNativeBackpropInputConfig,depthwiseConv2dNativeConfig,diagConfig,dilation2DConfig,eluConfig,eluGradConfig,equalConfig,erfConfig,expConfig,expandDimsConfig,expm1Config,fftConfig,fillConfig,flipLeftRightConfig,floorConfig,floorDivConfig,fromPixelsConfig,fusedConv2DConfig,fusedDepthwiseConv2DConfig,gatherNdConfig,gatherV2Config,greaterConfig,greaterEqualConfig,identityConfig,ifftConfig,imagConfig,isFiniteConfig,isInfConfig,isNaNConfig,leakyReluConfig,lessConfig,lessEqualConfig,linSpaceConfig,log1pConfig,logConfig,logicalAndConfig,logicalNotConfig,logicalOrConfig,maxConfig,maxPool3DConfig,maxPoolConfig,maxPoolGrad3DConfig,maxPoolGradConfig,maxPoolWithArgmaxConfig,maximumConfig,meanConfig,minConfig,minimumConfig,mirrorPadConfig,modConfig,multinomialConfig,multiplyConfig,negConfig,nonMaxSuppressionV3Config,nonMaxSuppressionV4Config,nonMaxSuppressionV5Config,notEqualConfig,oneHotConfig,onesLikeConfig,packConfig,padV2Config,powConfig,preluConfig,prodConfig,rangeConfig,realConfig,realDivConfig,reciprocalConfig,relu6Config,reluConfig,reshapeConfig,resizeBilinearConfig,resizeBilinearGradConfig,resizeNearestNeighborConfig,resizeNearestNeighborGradConfig,reverseConfig,rotateWithOffsetConfig,roundConfig,rsqrtConfig,scatterNdConfig,selectConfig,seluConfig,sigmoidConfig,signConfig,sinConfig,sinhConfig,sliceConfig,softmaxConfig,softplusConfig,spaceToBatchNDConfig,sparseToDenseConfig,splitVConfig,sqrtConfig,squareConfig,squaredDifferenceConfig,stepConfig,stridedSliceConfig,subConfig,sumConfig,tanConfig,tanhConfig,tileConfig,topKConfig,transposeConfig,uniqueConfig,unpackConfig,unsortedSegmentSumConfig,zerosLikeConfig];for(const re of kernelConfigs)registerKernel(re);var NAMES="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" "),names=function(re){return typeof re!="string"?NAMES.slice():NAMES.filter(function(ee){var ne=ee[1]||" ";return re.indexOf(ne)!==-1})};names(" #");names(" b");var REGEX$2=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenize$1(re){typeof re!="string"&&(re="");var ee=REGEX$2.exec(re);return[ee[1].toUpperCase(),ee[2].replace(/x/g,"##"),ee[3],ee[4]]}var NO_NOTE=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),SEMI=[0,2,4,5,7,9,11],properties$1=function(re){var ee=tokenize$1(re);if(ee[0]===""||ee[3]!=="")return NO_NOTE;var ne=ee[0],ae=ee[1],ce=ee[2],le={letter:ne,acc:ae,octStr:ce,pc:ne+ae,name:ne+ae+ce,step:(ne.charCodeAt(0)+3)%7,alt:ae[0]==="b"?-ae.length:ae.length,oct:ce.length?+ce:null,chroma:0,midi:null,freq:null};return le.chroma=(SEMI[le.step]+le.alt+120)%12,le.midi=le.oct!==null?SEMI[le.step]+le.alt+12*(le.oct+1):null,le.freq=midiToFreq(le.midi),Object.freeze(le)},memo=function(re,ee){return ee===void 0&&(ee={}),function(ne){return ee[ne]||(ee[ne]=re(ne))}},props$1=memo(properties$1),midiToFreq=function(re,ee){return ee===void 0&&(ee=440),typeof re=="number"?Math.pow(2,(re-69)/12)*ee:null},chroma$2=function(re){return props$1(re).chroma},IVL_TNL="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",IVL_STR="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$1=new RegExp("^"+IVL_TNL+"|"+IVL_STR+"$"),SIZES=[0,2,4,5,7,9,11],TYPES="PMMPPMM",tokenize=function(re){var ee=REGEX$1.exec(""+re);return ee===null?null:ee[1]?[ee[1],ee[2]]:[ee[4],ee[3]]},NO_IVL=Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null,oct:null}),qToAlt=function(re,ee){return ee==="M"&&re==="M"||ee==="P"&&re==="P"?0:ee==="m"&&re==="M"?-1:/^A+$/.test(ee)?ee.length:/^d+$/.test(ee)?re==="P"?-ee.length:-ee.length-1:null},numToStep=function(re){return(Math.abs(re)-1)%7},properties=function(re){var ee=tokenize(re);if(ee===null)return NO_IVL;var ne={num:0,q:"d",name:"",type:"M",step:0,dir:-1,simple:1,alt:0,oct:0,semitones:0,chroma:0,ic:0};return ne.num=+ee[0],ne.q=ee[1],ne.step=numToStep(ne.num),ne.type=TYPES[ne.step],ne.type==="M"&&ne.q==="P"?NO_IVL:(ne.name=""+ne.num+ne.q,ne.dir=ne.num<0?-1:1,ne.simple=ne.num===8||ne.num===-8?ne.num:ne.dir*(ne.step+1),ne.alt=qToAlt(ne.type,ne.q),ne.oct=Math.floor((Math.abs(ne.num)-1)/7),ne.semitones=ne.dir*(SIZES[ne.step]+ne.alt+12*ne.oct),ne.chroma=(ne.dir*(SIZES[ne.step]+ne.alt)%12+12)%12,Object.freeze(ne))},cache={};function props(re){return typeof re!="string"?NO_IVL:cache[re]||(cache[re]=properties(re))}var chroma$1=function(re){return props(re).chroma};const chromatic=["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],lydian=["1P 2M 3M 4A 5P 6M 7M"],major=["1P 2M 3M 4P 5P 6M 7M",["ionian"]],mixolydian=["1P 2M 3M 4P 5P 6M 7m",["dominant"]],dorian=["1P 2M 3m 4P 5P 6M 7m"],aeolian=["1P 2M 3m 4P 5P 6m 7m",["minor"]],phrygian=["1P 2m 3m 4P 5P 6m 7m"],locrian=["1P 2m 3m 4P 5d 6m 7m"],altered=["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],diminished=["1P 2M 3m 4P 5d 6m 6M 7M",["whole-half diminished"]],iwato=["1P 2m 4P 5d 7m"],hirajoshi=["1P 2M 3m 5P 6m"],kumoijoshi=["1P 2m 4P 5P 6m"],pelog=["1P 2m 3m 5P 6m"],prometheus=["1P 2M 3M 4A 6M 7m"],ritusen=["1P 2M 4P 5P 6M"],scriabin=["1P 2m 3M 5P 6M"],piongio=["1P 2M 4P 5P 6M 7m"],augmented=["1P 2A 3M 5P 5A 7M"],neopolitan=["1P 2m 3m 4P 5P 6m 7M"],egyptian=["1P 2M 4P 5P 7m"],oriental=["1P 2m 3M 4P 5d 6M 7m"],flamenco=["1P 2m 3m 3M 4A 5P 7m"],balinese=["1P 2m 3m 4P 5P 6m 7M"],persian=["1P 2m 3M 4P 5d 6m 7M"],bebop=["1P 2M 3M 4P 5P 6M 7m 7M"],enigmatic=["1P 2m 3M 5d 6m 7m 7M"],ichikosucho=["1P 2M 3M 4P 5d 5P 6M 7M"],sdata={chromatic,lydian,major,mixolydian,dorian,aeolian,phrygian,locrian,"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m",["half-diminished"]],altered,"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"phrygian dominant":["1P 2m 3M 4P 5P 6m 7m",["spanish","phrygian major"]],"half-whole diminished":["1P 2m 3m 3M 4A 5P 6M 7m",["dominant diminished"]],diminished,"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],iwato,hirajoshi,kumoijoshi,pelog,"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],prometheus,"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],ritusen,scriabin,piongio,"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],augmented,"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],neopolitan,"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],egyptian,"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],oriental,"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],flamenco,balinese,"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],persian,bebop,"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],enigmatic,"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],ichikosucho,"six tone symmetric":["1P 2m 3M 4P 5A 6M"]},M=["1P 3M 5P",["Major",""]],M13=["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],M6=["1P 3M 5P 13M",["6"]],M69=["1P 3M 5P 6M 9M",["69"]],M7add13=["1P 3M 5P 6M 7M 9M"],M7b5=["1P 3M 5d 7M"],M7b6=["1P 3M 6m 7M"],M7b9=["1P 3M 5P 7M 9m"],M7sus4=["1P 4P 5P 7M"],M9=["1P 3M 5P 7M 9M",["maj9","Maj9"]],M9b5=["1P 3M 5d 7M 9M"],M9sus4=["1P 4P 5P 7M 9M"],Madd9=["1P 3M 5P 9M",["2","add9","add2"]],Maj7=["1P 3M 5P 7M",["maj7","M7"]],Mb5=["1P 3M 5d"],Mb6=["1P 3M 13m"],Msus2=["1P 2M 5P",["add9no3","sus2"]],Msus4=["1P 4P 5P",["sus","sus4"]],Maddb9=["1P 3M 5P 9m"],m$2=["1P 3m 5P"],m11=["1P 3m 5P 7m 9M 11P",["_11"]],m11b5=["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],m13=["1P 3m 5P 7m 9M 11P 13M",["_13"]],m6=["1P 3m 4P 5P 13M",["_6"]],m69=["1P 3m 5P 6M 9M",["_69"]],m7=["1P 3m 5P 7m",["minor7","_","_7"]],m7add11=["1P 3m 5P 7m 11P",["m7add4"]],m7b5=["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],m9=["1P 3m 5P 7m 9M",["_9"]],m9b5=["1P 3m 7m 12d 2M",["h9","-9b5"]],mMaj7=["1P 3m 5P 7M",["mM7","_M7"]],mMaj7b6=["1P 3m 5P 6m 7M",["mM7b6"]],mM9=["1P 3m 5P 7M 9M",["mMaj9","-M9"]],mM9b6=["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],mb6M7=["1P 3m 6m 7M"],mb6b9=["1P 3m 6m 9m"],o=["1P 3m 5d",["mb5","dim"]],o7=["1P 3m 5d 13M",["diminished","m6b5","dim7"]],o7M7=["1P 3m 5d 6M 7M"],oM7=["1P 3m 5d 7M"],sus24=["1P 2M 4P 5P",["sus4add9"]],madd4=["1P 3m 4P 5P"],madd9=["1P 3m 5P 9M"],cdata={4:["1P 4P 7m 10m",["quartal"]],5:["1P 5P"],7:["1P 3M 5P 7m",["Dominant","Dom"]],9:["1P 3M 5P 7m 9M",["79"]],11:["1P 5P 7m 9M 11P"],13:["1P 3M 5P 7m 9M 13M",["13_"]],64:["5P 8P 10M"],M,"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],M13,"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],M6,"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],M69,"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],M7add13,M7b5,M7b6,M7b9,M7sus4,M9,"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],M9b5,M9sus4,Madd9,Maj7,Mb5,Mb6,Msus2,Msus4,Maddb9,"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],m:m$2,"m#5":["1P 3m 5A",["m+","mb6"]],m11,"m11A 5":["1P 3m 6m 7m 9M 11P"],m11b5,m13,m6,m69,m7,"m7#5":["1P 3m 6m 7m"],m7add11,m7b5,m9,"m9#5":["1P 3m 6m 7m 9M"],m9b5,mMaj7,mMaj7b6,mM9,mM9b6,mb6M7,mb6b9,o,o7,o7M7,oM7,sus24,"+add#9":["1P 3M 5A 9A"],madd4,madd9};var chr=function(re){return chroma$2(re)||chroma$1(re)||0};function chroma(re){if(isChroma(re))return re;if(!Array.isArray(re))return"";var ee=[0,0,0,0,0,0,0,0,0,0,0,0];return re.map(chr).forEach(function(ne){ee[ne]=1}),ee.join("")}var REGEX=/^[01]{12}$/;function isChroma(re){return REGEX.test(re)}var dictionary=function(re){var ee=Object.keys(re).sort(),ne=[],ae=[],ce=function(he,fe,me){ne[he]=fe,ae[me]=ae[me]||[],ae[me].push(he)};ee.forEach(function(he){var fe=re[he][0].split(" "),me=re[he][1],ge=chroma(fe);ce(he,fe,ge),me&&me.forEach(function(ve){return ce(ve,fe,ge)})});var le=Object.keys(ne).sort(),ue=function(he){return ne[he]};return ue.names=function(he){return typeof he=="string"?(ae[he]||[]).slice():(he===!0?le:ee).slice()},ue},scale=dictionary(sdata),chord=dictionary(cdata);scale.names;chord.names;const DEFAULT_QUARTERS_PER_MINUTE=120,DEFAULT_VELOCITY=80,DEFAULT_DRUM_PITCH_CLASSES=[[36,35],[38,27,28,31,32,33,34,37,39,40,56,65,66,75,85],[42,44,54,68,69,70,71,73,78,80],[46,67,72,74,79,81],[45,29,41,61,64,84],[48,47,60,63,77,86,87],[50,30,43,62,76,83],[49,55,57,58],[51,52,53,59,82]],MIN_MIDI_VELOCITY=0,MAX_MIDI_VELOCITY=127,MIDI_VELOCITIES=MAX_MIDI_VELOCITY-MIN_MIDI_VELOCITY+1,MIN_MIDI_PITCH=0,MAX_MIDI_PITCH=127,MIN_PIANO_PITCH=21,MAX_PIANO_PITCH=108,MIN_DRUM_PITCH=35,MAX_DRUM_PITCH=81,LO_CLICK_PITCH=89,HI_CLICK_PITCH=90,LO_CLICK_CLASS=9,HI_CLICK_CLASS=10;var ChordQuality;(function(re){re[re.Major=0]="Major",re[re.Minor=1]="Minor",re[re.Augmented=2]="Augmented",re[re.Diminished=3]="Diminished",re[re.Other=4]="Other"})(ChordQuality||(ChordQuality={}));var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(re,ee){for(var ne=new Array(arguments.length-1),ae=0,ce=2,le=!0;ce<arguments.length;)ne[ae++]=arguments[ce++];return new Promise(function(he,fe){ne[ae]=function(ge){if(le)if(le=!1,ge)fe(ge);else{for(var ve=new Array(arguments.length-1),ye=0;ye<ve.length;)ve[ye++]=arguments[ye];he.apply(null,ve)}};try{re.apply(ee||null,ne)}catch(me){le&&(le=!1,fe(me))}})}var base64$1={};(function(re){var ee=re;ee.length=function(he){var fe=he.length;if(!fe)return 0;for(var me=0;--fe%4>1&&he.charAt(fe)==="=";)++me;return Math.ceil(he.length*3)/4-me};for(var ne=new Array(64),ae=new Array(123),ce=0;ce<64;)ae[ne[ce]=ce<26?ce+65:ce<52?ce+71:ce<62?ce-4:ce-59|43]=ce++;ee.encode=function(he,fe,me){for(var ge=null,ve=[],ye=0,be=0,Ee;fe<me;){var Ce=he[fe++];switch(be){case 0:ve[ye++]=ne[Ce>>2],Ee=(Ce&3)<<4,be=1;break;case 1:ve[ye++]=ne[Ee|Ce>>4],Ee=(Ce&15)<<2,be=2;break;case 2:ve[ye++]=ne[Ee|Ce>>6],ve[ye++]=ne[Ce&63],be=0;break}ye>8191&&((ge||(ge=[])).push(String.fromCharCode.apply(String,ve)),ye=0)}return be&&(ve[ye++]=ne[Ee],ve[ye++]=61,be===1&&(ve[ye++]=61)),ge?(ye&&ge.push(String.fromCharCode.apply(String,ve.slice(0,ye))),ge.join("")):String.fromCharCode.apply(String,ve.slice(0,ye))};var le="invalid encoding";ee.decode=function(he,fe,me){for(var ge=me,ve=0,ye,be=0;be<he.length;){var Ee=he.charCodeAt(be++);if(Ee===61&&ve>1)break;if((Ee=ae[Ee])===void 0)throw Error(le);switch(ve){case 0:ye=Ee,ve=1;break;case 1:fe[me++]=ye<<2|(Ee&48)>>4,ye=Ee,ve=2;break;case 2:fe[me++]=(ye&15)<<4|(Ee&60)>>2,ye=Ee,ve=3;break;case 3:fe[me++]=(ye&3)<<6|Ee,ve=0;break}}if(ve===1)throw Error(le);return me-ge},ee.test=function(he){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(he)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(ee,ne,ae){return(this._listeners[ee]||(this._listeners[ee]=[])).push({fn:ne,ctx:ae||this}),this};EventEmitter.prototype.off=function(ee,ne){if(ee===void 0)this._listeners={};else if(ne===void 0)this._listeners[ee]=[];else for(var ae=this._listeners[ee],ce=0;ce<ae.length;)ae[ce].fn===ne?ae.splice(ce,1):++ce;return this};EventEmitter.prototype.emit=function(ee){var ne=this._listeners[ee];if(ne){for(var ae=[],ce=1;ce<arguments.length;)ae.push(arguments[ce++]);for(ce=0;ce<ne.length;)ne[ce].fn.apply(ne[ce++].ctx,ae)}return this};var float=factory(factory);function factory(re){return typeof Float32Array<"u"?function(){var ee=new Float32Array([-0]),ne=new Uint8Array(ee.buffer),ae=ne[3]===128;function ce(fe,me,ge){ee[0]=fe,me[ge]=ne[0],me[ge+1]=ne[1],me[ge+2]=ne[2],me[ge+3]=ne[3]}function le(fe,me,ge){ee[0]=fe,me[ge]=ne[3],me[ge+1]=ne[2],me[ge+2]=ne[1],me[ge+3]=ne[0]}re.writeFloatLE=ae?ce:le,re.writeFloatBE=ae?le:ce;function ue(fe,me){return ne[0]=fe[me],ne[1]=fe[me+1],ne[2]=fe[me+2],ne[3]=fe[me+3],ee[0]}function he(fe,me){return ne[3]=fe[me],ne[2]=fe[me+1],ne[1]=fe[me+2],ne[0]=fe[me+3],ee[0]}re.readFloatLE=ae?ue:he,re.readFloatBE=ae?he:ue}():function(){function ee(ae,ce,le,ue){var he=ce<0?1:0;if(he&&(ce=-ce),ce===0)ae(1/ce>0?0:2147483648,le,ue);else if(isNaN(ce))ae(2143289344,le,ue);else if(ce>34028234663852886e22)ae((he<<31|2139095040)>>>0,le,ue);else if(ce<11754943508222875e-54)ae((he<<31|Math.round(ce/1401298464324817e-60))>>>0,le,ue);else{var fe=Math.floor(Math.log(ce)/Math.LN2),me=Math.round(ce*Math.pow(2,-fe)*8388608)&8388607;ae((he<<31|fe+127<<23|me)>>>0,le,ue)}}re.writeFloatLE=ee.bind(null,writeUintLE),re.writeFloatBE=ee.bind(null,writeUintBE);function ne(ae,ce,le){var ue=ae(ce,le),he=(ue>>31)*2+1,fe=ue>>>23&255,me=ue&8388607;return fe===255?me?NaN:he*(1/0):fe===0?he*1401298464324817e-60*me:he*Math.pow(2,fe-150)*(me+8388608)}re.readFloatLE=ne.bind(null,readUintLE),re.readFloatBE=ne.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var ee=new Float64Array([-0]),ne=new Uint8Array(ee.buffer),ae=ne[7]===128;function ce(fe,me,ge){ee[0]=fe,me[ge]=ne[0],me[ge+1]=ne[1],me[ge+2]=ne[2],me[ge+3]=ne[3],me[ge+4]=ne[4],me[ge+5]=ne[5],me[ge+6]=ne[6],me[ge+7]=ne[7]}function le(fe,me,ge){ee[0]=fe,me[ge]=ne[7],me[ge+1]=ne[6],me[ge+2]=ne[5],me[ge+3]=ne[4],me[ge+4]=ne[3],me[ge+5]=ne[2],me[ge+6]=ne[1],me[ge+7]=ne[0]}re.writeDoubleLE=ae?ce:le,re.writeDoubleBE=ae?le:ce;function ue(fe,me){return ne[0]=fe[me],ne[1]=fe[me+1],ne[2]=fe[me+2],ne[3]=fe[me+3],ne[4]=fe[me+4],ne[5]=fe[me+5],ne[6]=fe[me+6],ne[7]=fe[me+7],ee[0]}function he(fe,me){return ne[7]=fe[me],ne[6]=fe[me+1],ne[5]=fe[me+2],ne[4]=fe[me+3],ne[3]=fe[me+4],ne[2]=fe[me+5],ne[1]=fe[me+6],ne[0]=fe[me+7],ee[0]}re.readDoubleLE=ae?ue:he,re.readDoubleBE=ae?he:ue}():function(){function ee(ae,ce,le,ue,he,fe){var me=ue<0?1:0;if(me&&(ue=-ue),ue===0)ae(0,he,fe+ce),ae(1/ue>0?0:2147483648,he,fe+le);else if(isNaN(ue))ae(0,he,fe+ce),ae(2146959360,he,fe+le);else if(ue>17976931348623157e292)ae(0,he,fe+ce),ae((me<<31|2146435072)>>>0,he,fe+le);else{var ge;if(ue<22250738585072014e-324)ge=ue/5e-324,ae(ge>>>0,he,fe+ce),ae((me<<31|ge/4294967296)>>>0,he,fe+le);else{var ve=Math.floor(Math.log(ue)/Math.LN2);ve===1024&&(ve=1023),ge=ue*Math.pow(2,-ve),ae(ge*4503599627370496>>>0,he,fe+ce),ae((me<<31|ve+1023<<20|ge*1048576&1048575)>>>0,he,fe+le)}}}re.writeDoubleLE=ee.bind(null,writeUintLE,0,4),re.writeDoubleBE=ee.bind(null,writeUintBE,4,0);function ne(ae,ce,le,ue,he){var fe=ae(ue,he+ce),me=ae(ue,he+le),ge=(me>>31)*2+1,ve=me>>>20&2047,ye=4294967296*(me&1048575)+fe;return ve===2047?ye?NaN:ge*(1/0):ve===0?ge*5e-324*ye:ge*Math.pow(2,ve-1075)*(ye+4503599627370496)}re.readDoubleLE=ne.bind(null,readUintLE,0,4),re.readDoubleBE=ne.bind(null,readUintBE,4,0)}(),re}function writeUintLE(re,ee,ne){ee[ne]=re&255,ee[ne+1]=re>>>8&255,ee[ne+2]=re>>>16&255,ee[ne+3]=re>>>24}function writeUintBE(re,ee,ne){ee[ne]=re>>>24,ee[ne+1]=re>>>16&255,ee[ne+2]=re>>>8&255,ee[ne+3]=re&255}function readUintLE(re,ee){return(re[ee]|re[ee+1]<<8|re[ee+2]<<16|re[ee+3]<<24)>>>0}function readUintBE(re,ee){return(re[ee]<<24|re[ee+1]<<16|re[ee+2]<<8|re[ee+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(re){}return null}var utf8$2={};(function(re){var ee=re;ee.length=function(ae){for(var ce=0,le=0,ue=0;ue<ae.length;++ue)le=ae.charCodeAt(ue),le<128?ce+=1:le<2048?ce+=2:(le&64512)===55296&&(ae.charCodeAt(ue+1)&64512)===56320?(++ue,ce+=4):ce+=3;return ce},ee.read=function(ae,ce,le){var ue=le-ce;if(ue<1)return"";for(var he=null,fe=[],me=0,ge;ce<le;)ge=ae[ce++],ge<128?fe[me++]=ge:ge>191&&ge<224?fe[me++]=(ge&31)<<6|ae[ce++]&63:ge>239&&ge<365?(ge=((ge&7)<<18|(ae[ce++]&63)<<12|(ae[ce++]&63)<<6|ae[ce++]&63)-65536,fe[me++]=55296+(ge>>10),fe[me++]=56320+(ge&1023)):fe[me++]=(ge&15)<<12|(ae[ce++]&63)<<6|ae[ce++]&63,me>8191&&((he||(he=[])).push(String.fromCharCode.apply(String,fe)),me=0);return he?(me&&he.push(String.fromCharCode.apply(String,fe.slice(0,me))),he.join("")):String.fromCharCode.apply(String,fe.slice(0,me))},ee.write=function(ae,ce,le){for(var ue=le,he,fe,me=0;me<ae.length;++me)he=ae.charCodeAt(me),he<128?ce[le++]=he:he<2048?(ce[le++]=he>>6|192,ce[le++]=he&63|128):(he&64512)===55296&&((fe=ae.charCodeAt(me+1))&64512)===56320?(he=65536+((he&1023)<<10)+(fe&1023),++me,ce[le++]=he>>18|240,ce[le++]=he>>12&63|128,ce[le++]=he>>6&63|128,ce[le++]=he&63|128):(ce[le++]=he>>12|224,ce[le++]=he>>6&63|128,ce[le++]=he&63|128);return le-ue}})(utf8$2);var pool_1=pool;function pool(re,ee,ne){var ae=ne||8192,ce=ae>>>1,le=null,ue=ae;return function(fe){if(fe<1||fe>ce)return re(fe);ue+fe>ae&&(le=re(ae),ue=0);var me=ee.call(le,ue,ue+=fe);return ue&7&&(ue=(ue|7)+1),me}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=ee;var re=requireMinimal();function ee(le,ue){this.lo=le>>>0,this.hi=ue>>>0}var ne=ee.zero=new ee(0,0);ne.toNumber=function(){return 0},ne.zzEncode=ne.zzDecode=function(){return this},ne.length=function(){return 1};var ae=ee.zeroHash="\0\0\0\0\0\0\0\0";ee.fromNumber=function(ue){if(ue===0)return ne;var he=ue<0;he&&(ue=-ue);var fe=ue>>>0,me=(ue-fe)/4294967296>>>0;return he&&(me=~me>>>0,fe=~fe>>>0,++fe>4294967295&&(fe=0,++me>4294967295&&(me=0))),new ee(fe,me)},ee.from=function(ue){if(typeof ue=="number")return ee.fromNumber(ue);if(re.isString(ue))if(re.Long)ue=re.Long.fromString(ue);else return ee.fromNumber(parseInt(ue,10));return ue.low||ue.high?new ee(ue.low>>>0,ue.high>>>0):ne},ee.prototype.toNumber=function(ue){if(!ue&&this.hi>>>31){var he=~this.lo+1>>>0,fe=~this.hi>>>0;return he||(fe=fe+1>>>0),-(he+fe*4294967296)}return this.lo+this.hi*4294967296},ee.prototype.toLong=function(ue){return re.Long?new re.Long(this.lo|0,this.hi|0,!!ue):{low:this.lo|0,high:this.hi|0,unsigned:!!ue}};var ce=String.prototype.charCodeAt;return ee.fromHash=function(ue){return ue===ae?ne:new ee((ce.call(ue,0)|ce.call(ue,1)<<8|ce.call(ue,2)<<16|ce.call(ue,3)<<24)>>>0,(ce.call(ue,4)|ce.call(ue,5)<<8|ce.call(ue,6)<<16|ce.call(ue,7)<<24)>>>0)},ee.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},ee.prototype.zzEncode=function(){var ue=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^ue)>>>0,this.lo=(this.lo<<1^ue)>>>0,this},ee.prototype.zzDecode=function(){var ue=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^ue)>>>0,this.hi=(this.hi>>>1^ue)>>>0,this},ee.prototype.length=function(){var ue=this.lo,he=(this.lo>>>28|this.hi<<4)>>>0,fe=this.hi>>>24;return fe===0?he===0?ue<16384?ue<128?1:2:ue<2097152?3:4:he<16384?he<128?5:6:he<2097152?7:8:fe<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(re){var ee=re;ee.asPromise=aspromise,ee.base64=base64$1,ee.EventEmitter=eventemitter,ee.float=float,ee.inquire=inquire_1,ee.utf8=utf8$2,ee.pool=pool_1,ee.LongBits=requireLongbits(),ee.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node),ee.global=ee.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,ee.emptyArray=Object.freeze?Object.freeze([]):[],ee.emptyObject=Object.freeze?Object.freeze({}):{},ee.isInteger=Number.isInteger||function(le){return typeof le=="number"&&isFinite(le)&&Math.floor(le)===le},ee.isString=function(le){return typeof le=="string"||le instanceof String},ee.isObject=function(le){return le&&typeof le=="object"},ee.isset=ee.isSet=function(le,ue){var he=le[ue];return he!=null&&le.hasOwnProperty(ue)?typeof he!="object"||(Array.isArray(he)?he.length:Object.keys(he).length)>0:!1},ee.Buffer=function(){try{var ce=ee.inquire("buffer").Buffer;return ce.prototype.utf8Write?ce:null}catch{return null}}(),ee._Buffer_from=null,ee._Buffer_allocUnsafe=null,ee.newBuffer=function(le){return typeof le=="number"?ee.Buffer?ee._Buffer_allocUnsafe(le):new ee.Array(le):ee.Buffer?ee._Buffer_from(le):typeof Uint8Array>"u"?le:new Uint8Array(le)},ee.Array=typeof Uint8Array<"u"?Uint8Array:Array,ee.Long=ee.global.dcodeIO&&ee.global.dcodeIO.Long||ee.global.Long||ee.inquire("long"),ee.key2Re=/^true|false|0|1$/,ee.key32Re=/^-?(?:0|[1-9][0-9]*)$/,ee.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,ee.longToHash=function(le){return le?ee.LongBits.from(le).toHash():ee.LongBits.zeroHash},ee.longFromHash=function(le,ue){var he=ee.LongBits.fromHash(le);return ee.Long?ee.Long.fromBits(he.lo,he.hi,ue):he.toNumber(!!ue)};function ne(ce,le,ue){for(var he=Object.keys(le),fe=0;fe<he.length;++fe)(ce[he[fe]]===void 0||!ue)&&(ce[he[fe]]=le[he[fe]]);return ce}ee.merge=ne,ee.lcFirst=function(le){return le.charAt(0).toLowerCase()+le.substring(1)};function ae(ce){function le(ue,he){if(!(this instanceof le))return new le(ue,he);Object.defineProperty(this,"message",{get:function(){return ue}}),Error.captureStackTrace?Error.captureStackTrace(this,le):Object.defineProperty(this,"stack",{value:new Error().stack||""}),he&&ne(this,he)}return(le.prototype=Object.create(Error.prototype)).constructor=le,Object.defineProperty(le.prototype,"name",{get:function(){return ce}}),le.prototype.toString=function(){return this.name+": "+this.message},le}ee.newError=ae,ee.ProtocolError=ae("ProtocolError"),ee.oneOfGetter=function(le){for(var ue={},he=0;he<le.length;++he)ue[le[he]]=1;return function(){for(var fe=Object.keys(this),me=fe.length-1;me>-1;--me)if(ue[fe[me]]===1&&this[fe[me]]!==void 0&&this[fe[me]]!==null)return fe[me]}},ee.oneOfSetter=function(le){return function(ue){for(var he=0;he<le.length;++he)le[he]!==ue&&delete this[le[he]]}},ee.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},ee._configure=function(){var ce=ee.Buffer;if(!ce){ee._Buffer_from=ee._Buffer_allocUnsafe=null;return}ee._Buffer_from=ce.from!==Uint8Array.from&&ce.from||function(ue,he){return new ce(ue,he)},ee._Buffer_allocUnsafe=ce.allocUnsafe||function(ue){return new ce(ue)}}}(minimal$1)),minimal$1}var writer=Writer$2,util$5=requireMinimal(),BufferWriter$1,LongBits$1=util$5.LongBits,base64=util$5.base64,utf8$1=util$5.utf8;function Op(re,ee,ne){this.fn=re,this.len=ee,this.next=void 0,this.val=ne}function noop$3(){}function State(re){this.head=re.head,this.tail=re.tail,this.len=re.len,this.next=re.states}function Writer$2(){this.len=0,this.head=new Op(noop$3,0,0),this.tail=this.head,this.states=null}var create$1=function re(){return util$5.Buffer?function(){return(Writer$2.create=function(){return new BufferWriter$1})()}:function(){return new Writer$2}};Writer$2.create=create$1();Writer$2.alloc=function re(ee){return new util$5.Array(ee)};util$5.Array!==Array&&(Writer$2.alloc=util$5.pool(Writer$2.alloc,util$5.Array.prototype.subarray));Writer$2.prototype._push=function re(ee,ne,ae){return this.tail=this.tail.next=new Op(ee,ne,ae),this.len+=ne,this};function writeByte(re,ee,ne){ee[ne]=re&255}function writeVarint32(re,ee,ne){for(;re>127;)ee[ne++]=re&127|128,re>>>=7;ee[ne]=re}function VarintOp(re,ee){this.len=re,this.next=void 0,this.val=ee}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$2.prototype.uint32=function re(ee){return this.len+=(this.tail=this.tail.next=new VarintOp((ee=ee>>>0)<128?1:ee<16384?2:ee<2097152?3:ee<268435456?4:5,ee)).len,this};Writer$2.prototype.int32=function re(ee){return ee<0?this._push(writeVarint64,10,LongBits$1.fromNumber(ee)):this.uint32(ee)};Writer$2.prototype.sint32=function re(ee){return this.uint32((ee<<1^ee>>31)>>>0)};function writeVarint64(re,ee,ne){for(;re.hi;)ee[ne++]=re.lo&127|128,re.lo=(re.lo>>>7|re.hi<<25)>>>0,re.hi>>>=7;for(;re.lo>127;)ee[ne++]=re.lo&127|128,re.lo=re.lo>>>7;ee[ne++]=re.lo}Writer$2.prototype.uint64=function re(ee){var ne=LongBits$1.from(ee);return this._push(writeVarint64,ne.length(),ne)};Writer$2.prototype.int64=Writer$2.prototype.uint64;Writer$2.prototype.sint64=function re(ee){var ne=LongBits$1.from(ee).zzEncode();return this._push(writeVarint64,ne.length(),ne)};Writer$2.prototype.bool=function re(ee){return this._push(writeByte,1,ee?1:0)};function writeFixed32(re,ee,ne){ee[ne]=re&255,ee[ne+1]=re>>>8&255,ee[ne+2]=re>>>16&255,ee[ne+3]=re>>>24}Writer$2.prototype.fixed32=function re(ee){return this._push(writeFixed32,4,ee>>>0)};Writer$2.prototype.sfixed32=Writer$2.prototype.fixed32;Writer$2.prototype.fixed64=function re(ee){var ne=LongBits$1.from(ee);return this._push(writeFixed32,4,ne.lo)._push(writeFixed32,4,ne.hi)};Writer$2.prototype.sfixed64=Writer$2.prototype.fixed64;Writer$2.prototype.float=function re(ee){return this._push(util$5.float.writeFloatLE,4,ee)};Writer$2.prototype.double=function re(ee){return this._push(util$5.float.writeDoubleLE,8,ee)};var writeBytes=util$5.Array.prototype.set?function re(ee,ne,ae){ne.set(ee,ae)}:function re(ee,ne,ae){for(var ce=0;ce<ee.length;++ce)ne[ae+ce]=ee[ce]};Writer$2.prototype.bytes=function re(ee){var ne=ee.length>>>0;if(!ne)return this._push(writeByte,1,0);if(util$5.isString(ee)){var ae=Writer$2.alloc(ne=base64.length(ee));base64.decode(ee,ae,0),ee=ae}return this.uint32(ne)._push(writeBytes,ne,ee)};Writer$2.prototype.string=function re(ee){var ne=utf8$1.length(ee);return ne?this.uint32(ne)._push(utf8$1.write,ne,ee):this._push(writeByte,1,0)};Writer$2.prototype.fork=function re(){return this.states=new State(this),this.head=this.tail=new Op(noop$3,0,0),this.len=0,this};Writer$2.prototype.reset=function re(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$3,0,0),this.len=0),this};Writer$2.prototype.ldelim=function re(){var ee=this.head,ne=this.tail,ae=this.len;return this.reset().uint32(ae),ae&&(this.tail.next=ee.next,this.tail=ne,this.len+=ae),this};Writer$2.prototype.finish=function re(){for(var ee=this.head.next,ne=this.constructor.alloc(this.len),ae=0;ee;)ee.fn(ee.val,ne,ae),ae+=ee.len,ee=ee.next;return ne};Writer$2._configure=function(re){BufferWriter$1=re,Writer$2.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer$1=writer;(BufferWriter.prototype=Object.create(Writer$1.prototype)).constructor=BufferWriter;var util$4=requireMinimal();function BufferWriter(){Writer$1.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$4._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$4.Buffer&&util$4.Buffer.prototype instanceof Uint8Array&&util$4.Buffer.prototype.set.name==="set"?function(ee,ne,ae){ne.set(ee,ae)}:function(ee,ne,ae){if(ee.copy)ee.copy(ne,ae,0,ee.length);else for(var ce=0;ce<ee.length;)ne[ae++]=ee[ce++]}};BufferWriter.prototype.bytes=function re(ee){util$4.isString(ee)&&(ee=util$4._Buffer_from(ee,"base64"));var ne=ee.length>>>0;return this.uint32(ne),ne&&this._push(BufferWriter.writeBytesBuffer,ne,ee),this};function writeStringBuffer(re,ee,ne){re.length<40?util$4.utf8.write(re,ee,ne):ee.utf8Write?ee.utf8Write(re,ne):ee.write(re,ne)}BufferWriter.prototype.string=function re(ee){var ne=util$4.Buffer.byteLength(ee);return this.uint32(ne),ne&&this._push(writeStringBuffer,ne,ee),this};BufferWriter._configure();var reader=Reader$1,util$3=requireMinimal(),BufferReader$1,LongBits=util$3.LongBits,utf8=util$3.utf8;function indexOutOfRange(re,ee){return RangeError("index out of range: "+re.pos+" + "+(ee||1)+" > "+re.len)}function Reader$1(re){this.buf=re,this.pos=0,this.len=re.length}var create_array=typeof Uint8Array<"u"?function re(ee){if(ee instanceof Uint8Array||Array.isArray(ee))return new Reader$1(ee);throw Error("illegal buffer")}:function re(ee){if(Array.isArray(ee))return new Reader$1(ee);throw Error("illegal buffer")},create=function re(){return util$3.Buffer?function(ne){return(Reader$1.create=function(ce){return util$3.Buffer.isBuffer(ce)?new BufferReader$1(ce):create_array(ce)})(ne)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$3.Array.prototype.subarray||util$3.Array.prototype.slice;Reader$1.prototype.uint32=function re(){var ee=4294967295;return function(){if(ee=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(ee=(ee|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(ee=(ee|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(ee=(ee|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(ee=(ee|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return ee;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return ee}}();Reader$1.prototype.int32=function re(){return this.uint32()|0};Reader$1.prototype.sint32=function re(){var ee=this.uint32();return ee>>>1^-(ee&1)|0};function readLongVarint(){var re=new LongBits(0,0),ee=0;if(this.len-this.pos>4){for(;ee<4;++ee)if(re.lo=(re.lo|(this.buf[this.pos]&127)<<ee*7)>>>0,this.buf[this.pos++]<128)return re;if(re.lo=(re.lo|(this.buf[this.pos]&127)<<28)>>>0,re.hi=(re.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return re;ee=0}else{for(;ee<3;++ee){if(this.pos>=this.len)throw indexOutOfRange(this);if(re.lo=(re.lo|(this.buf[this.pos]&127)<<ee*7)>>>0,this.buf[this.pos++]<128)return re}return re.lo=(re.lo|(this.buf[this.pos++]&127)<<ee*7)>>>0,re}if(this.len-this.pos>4){for(;ee<5;++ee)if(re.hi=(re.hi|(this.buf[this.pos]&127)<<ee*7+3)>>>0,this.buf[this.pos++]<128)return re}else for(;ee<5;++ee){if(this.pos>=this.len)throw indexOutOfRange(this);if(re.hi=(re.hi|(this.buf[this.pos]&127)<<ee*7+3)>>>0,this.buf[this.pos++]<128)return re}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function re(){return this.uint32()!==0};function readFixed32_end(re,ee){return(re[ee-4]|re[ee-3]<<8|re[ee-2]<<16|re[ee-1]<<24)>>>0}Reader$1.prototype.fixed32=function re(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function re(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function re(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var ee=util$3.float.readFloatLE(this.buf,this.pos);return this.pos+=4,ee};Reader$1.prototype.double=function re(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var ee=util$3.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,ee};Reader$1.prototype.bytes=function re(){var ee=this.uint32(),ne=this.pos,ae=this.pos+ee;if(ae>this.len)throw indexOutOfRange(this,ee);return this.pos+=ee,Array.isArray(this.buf)?this.buf.slice(ne,ae):ne===ae?new this.buf.constructor(0):this._slice.call(this.buf,ne,ae)};Reader$1.prototype.string=function re(){var ee=this.bytes();return utf8.read(ee,0,ee.length)};Reader$1.prototype.skip=function re(ee){if(typeof ee=="number"){if(this.pos+ee>this.len)throw indexOutOfRange(this,ee);this.pos+=ee}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(re){switch(re){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(re=this.uint32()&7)!==4;)this.skipType(re);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+re+" at offset "+this.pos)}return this};Reader$1._configure=function(re){BufferReader$1=re,Reader$1.create=create(),BufferReader$1._configure();var ee=util$3.Long?"toLong":"toNumber";util$3.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[ee](!1)},uint64:function(){return readLongVarint.call(this)[ee](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[ee](!1)},fixed64:function(){return readFixed64.call(this)[ee](!0)},sfixed64:function(){return readFixed64.call(this)[ee](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$2=requireMinimal();function BufferReader(re){Reader.call(this,re)}BufferReader._configure=function(){util$2.Buffer&&(BufferReader.prototype._slice=util$2.Buffer.prototype.slice)};BufferReader.prototype.string=function re(){var ee=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+ee,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+ee,this.len))};BufferReader._configure();var rpc={},service=Service,util$1=requireMinimal();(Service.prototype=Object.create(util$1.EventEmitter.prototype)).constructor=Service;function Service(re,ee,ne){if(typeof re!="function")throw TypeError("rpcImpl must be a function");util$1.EventEmitter.call(this),this.rpcImpl=re,this.requestDelimited=!!ee,this.responseDelimited=!!ne}Service.prototype.rpcCall=function re(ee,ne,ae,ce,le){if(!ce)throw TypeError("request must be specified");var ue=this;if(!le)return util$1.asPromise(re,ue,ee,ne,ae,ce);if(!ue.rpcImpl){setTimeout(function(){le(Error("already ended"))},0);return}try{return ue.rpcImpl(ee,ne[ue.requestDelimited?"encodeDelimited":"encode"](ce).finish(),function(fe,me){if(fe)return ue.emit("error",fe,ee),le(fe);if(me===null){ue.end(!0);return}if(!(me instanceof ae))try{me=ae[ue.responseDelimited?"decodeDelimited":"decode"](me)}catch(ge){return ue.emit("error",ge,ee),le(ge)}return ue.emit("data",me,ee),le(null,me)})}catch(he){ue.emit("error",he,ee),setTimeout(function(){le(he)},0);return}};Service.prototype.end=function re(ee){return this.rpcImpl&&(ee||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(re){var ee=re;ee.Service=service})(rpc);var roots={};(function(re){var ee=re;ee.build="minimal",ee.Writer=writer,ee.BufferWriter=writer_buffer,ee.Reader=reader,ee.BufferReader=reader_buffer,ee.util=requireMinimal(),ee.rpc=rpc,ee.roots=roots,ee.configure=ne;function ne(){ee.util._configure(),ee.Writer._configure(ee.BufferWriter),ee.Reader._configure(ee.BufferReader)}ne()})(indexMinimal);var minimal=indexMinimal,$protobuf=minimal,$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.default||($protobuf.roots.default={});$root.tensorflow=function(){var re={};return re.magenta=function(){var ee={};return ee.NoteSequence=function(){function ne(ae){if(this.timeSignatures=[],this.keySignatures=[],this.tempos=[],this.notes=[],this.pitchBends=[],this.controlChanges=[],this.partInfos=[],this.textAnnotations=[],this.sectionAnnotations=[],this.sectionGroups=[],ae)for(var ce=Object.keys(ae),le=0;le<ce.length;++le)ae[ce[le]]!=null&&(this[ce[le]]=ae[ce[le]])}return ne.prototype.id="",ne.prototype.filename="",ne.prototype.referenceNumber=$util.Long?$util.Long.fromBits(0,0,!1):0,ne.prototype.collectionName="",ne.prototype.ticksPerQuarter=0,ne.prototype.timeSignatures=$util.emptyArray,ne.prototype.keySignatures=$util.emptyArray,ne.prototype.tempos=$util.emptyArray,ne.prototype.notes=$util.emptyArray,ne.prototype.totalTime=0,ne.prototype.totalQuantizedSteps=$util.Long?$util.Long.fromBits(0,0,!1):0,ne.prototype.pitchBends=$util.emptyArray,ne.prototype.controlChanges=$util.emptyArray,ne.prototype.partInfos=$util.emptyArray,ne.prototype.sourceInfo=null,ne.prototype.textAnnotations=$util.emptyArray,ne.prototype.sectionAnnotations=$util.emptyArray,ne.prototype.sectionGroups=$util.emptyArray,ne.prototype.quantizationInfo=null,ne.prototype.subsequenceInfo=null,ne.prototype.sequenceMetadata=null,ne.create=function(ce){return new ne(ce)},ne.encode=function(ce,le){if(le||(le=$Writer.create()),ce.id!=null&&ce.hasOwnProperty("id")&&le.uint32(10).string(ce.id),ce.filename!=null&&ce.hasOwnProperty("filename")&&le.uint32(18).string(ce.filename),ce.collectionName!=null&&ce.hasOwnProperty("collectionName")&&le.uint32(26).string(ce.collectionName),ce.ticksPerQuarter!=null&&ce.hasOwnProperty("ticksPerQuarter")&&le.uint32(32).int32(ce.ticksPerQuarter),ce.timeSignatures!=null&&ce.timeSignatures.length)for(var ue=0;ue<ce.timeSignatures.length;++ue)$root.tensorflow.magenta.NoteSequence.TimeSignature.encode(ce.timeSignatures[ue],le.uint32(42).fork()).ldelim();if(ce.keySignatures!=null&&ce.keySignatures.length)for(var ue=0;ue<ce.keySignatures.length;++ue)$root.tensorflow.magenta.NoteSequence.KeySignature.encode(ce.keySignatures[ue],le.uint32(50).fork()).ldelim();if(ce.tempos!=null&&ce.tempos.length)for(var ue=0;ue<ce.tempos.length;++ue)$root.tensorflow.magenta.NoteSequence.Tempo.encode(ce.tempos[ue],le.uint32(58).fork()).ldelim();if(ce.notes!=null&&ce.notes.length)for(var ue=0;ue<ce.notes.length;++ue)$root.tensorflow.magenta.NoteSequence.Note.encode(ce.notes[ue],le.uint32(66).fork()).ldelim();if(ce.totalTime!=null&&ce.hasOwnProperty("totalTime")&&le.uint32(73).double(ce.totalTime),ce.pitchBends!=null&&ce.pitchBends.length)for(var ue=0;ue<ce.pitchBends.length;++ue)$root.tensorflow.magenta.NoteSequence.PitchBend.encode(ce.pitchBends[ue],le.uint32(82).fork()).ldelim();if(ce.controlChanges!=null&&ce.controlChanges.length)for(var ue=0;ue<ce.controlChanges.length;++ue)$root.tensorflow.magenta.NoteSequence.ControlChange.encode(ce.controlChanges[ue],le.uint32(90).fork()).ldelim();if(ce.partInfos!=null&&ce.partInfos.length)for(var ue=0;ue<ce.partInfos.length;++ue)$root.tensorflow.magenta.NoteSequence.PartInfo.encode(ce.partInfos[ue],le.uint32(98).fork()).ldelim();if(ce.sourceInfo!=null&&ce.hasOwnProperty("sourceInfo")&&$root.tensorflow.magenta.NoteSequence.SourceInfo.encode(ce.sourceInfo,le.uint32(106).fork()).ldelim(),ce.textAnnotations!=null&&ce.textAnnotations.length)for(var ue=0;ue<ce.textAnnotations.length;++ue)$root.tensorflow.magenta.NoteSequence.TextAnnotation.encode(ce.textAnnotations[ue],le.uint32(114).fork()).ldelim();if(ce.quantizationInfo!=null&&ce.hasOwnProperty("quantizationInfo")&&$root.tensorflow.magenta.NoteSequence.QuantizationInfo.encode(ce.quantizationInfo,le.uint32(122).fork()).ldelim(),ce.totalQuantizedSteps!=null&&ce.hasOwnProperty("totalQuantizedSteps")&&le.uint32(128).int64(ce.totalQuantizedSteps),ce.subsequenceInfo!=null&&ce.hasOwnProperty("subsequenceInfo")&&$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.encode(ce.subsequenceInfo,le.uint32(138).fork()).ldelim(),ce.referenceNumber!=null&&ce.hasOwnProperty("referenceNumber")&&le.uint32(144).int64(ce.referenceNumber),ce.sequenceMetadata!=null&&ce.hasOwnProperty("sequenceMetadata")&&$root.tensorflow.magenta.SequenceMetadata.encode(ce.sequenceMetadata,le.uint32(154).fork()).ldelim(),ce.sectionAnnotations!=null&&ce.sectionAnnotations.length)for(var ue=0;ue<ce.sectionAnnotations.length;++ue)$root.tensorflow.magenta.NoteSequence.SectionAnnotation.encode(ce.sectionAnnotations[ue],le.uint32(162).fork()).ldelim();if(ce.sectionGroups!=null&&ce.sectionGroups.length)for(var ue=0;ue<ce.sectionGroups.length;++ue)$root.tensorflow.magenta.NoteSequence.SectionGroup.encode(ce.sectionGroups[ue],le.uint32(170).fork()).ldelim();return le},ne.encodeDelimited=function(ce,le){return this.encode(ce,le).ldelim()},ne.decode=function(ce,le){ce instanceof $Reader||(ce=$Reader.create(ce));for(var ue=le===void 0?ce.len:ce.pos+le,he=new $root.tensorflow.magenta.NoteSequence;ce.pos<ue;){var fe=ce.uint32();switch(fe>>>3){case 1:he.id=ce.string();break;case 2:he.filename=ce.string();break;case 18:he.referenceNumber=$util.Long?ce.int64().toNumber():ce.int64();break;case 3:he.collectionName=ce.string();break;case 4:he.ticksPerQuarter=ce.int32();break;case 5:he.timeSignatures&&he.timeSignatures.length||(he.timeSignatures=[]),he.timeSignatures.push($root.tensorflow.magenta.NoteSequence.TimeSignature.decode(ce,ce.uint32()));break;case 6:he.keySignatures&&he.keySignatures.length||(he.keySignatures=[]),he.keySignatures.push($root.tensorflow.magenta.NoteSequence.KeySignature.decode(ce,ce.uint32()));break;case 7:he.tempos&&he.tempos.length||(he.tempos=[]),he.tempos.push($root.tensorflow.magenta.NoteSequence.Tempo.decode(ce,ce.uint32()));break;case 8:he.notes&&he.notes.length||(he.notes=[]),he.notes.push($root.tensorflow.magenta.NoteSequence.Note.decode(ce,ce.uint32()));break;case 9:he.totalTime=ce.double();break;case 16:he.totalQuantizedSteps=$util.Long?ce.int64().toNumber():ce.int64();break;case 10:he.pitchBends&&he.pitchBends.length||(he.pitchBends=[]),he.pitchBends.push($root.tensorflow.magenta.NoteSequence.PitchBend.decode(ce,ce.uint32()));break;case 11:he.controlChanges&&he.controlChanges.length||(he.controlChanges=[]),he.controlChanges.push($root.tensorflow.magenta.NoteSequence.ControlChange.decode(ce,ce.uint32()));break;case 12:he.partInfos&&he.partInfos.length||(he.partInfos=[]),he.partInfos.push($root.tensorflow.magenta.NoteSequence.PartInfo.decode(ce,ce.uint32()));break;case 13:he.sourceInfo=$root.tensorflow.magenta.NoteSequence.SourceInfo.decode(ce,ce.uint32());break;case 14:he.textAnnotations&&he.textAnnotations.length||(he.textAnnotations=[]),he.textAnnotations.push($root.tensorflow.magenta.NoteSequence.TextAnnotation.decode(ce,ce.uint32()));break;case 20:he.sectionAnnotations&&he.sectionAnnotations.length||(he.sectionAnnotations=[]),he.sectionAnnotations.push($root.tensorflow.magenta.NoteSequence.SectionAnnotation.decode(ce,ce.uint32()));break;case 21:he.sectionGroups&&he.sectionGroups.length||(he.sectionGroups=[]),he.sectionGroups.push($root.tensorflow.magenta.NoteSequence.SectionGroup.decode(ce,ce.uint32()));break;case 15:he.quantizationInfo=$root.tensorflow.magenta.NoteSequence.QuantizationInfo.decode(ce,ce.uint32());break;case 17:he.subsequenceInfo=$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.decode(ce,ce.uint32());break;case 19:he.sequenceMetadata=$root.tensorflow.magenta.SequenceMetadata.decode(ce,ce.uint32());break;default:ce.skipType(fe&7);break}}return he},ne.decodeDelimited=function(ce){return ce instanceof $Reader||(ce=new $Reader(ce)),this.decode(ce,ce.uint32())},ne.verify=function(ce){if(typeof ce!="object"||ce===null)return"object expected";if(ce.id!=null&&ce.hasOwnProperty("id")&&!$util.isString(ce.id))return"id: string expected";if(ce.filename!=null&&ce.hasOwnProperty("filename")&&!$util.isString(ce.filename))return"filename: string expected";if(ce.referenceNumber!=null&&ce.hasOwnProperty("referenceNumber")&&!$util.isInteger(ce.referenceNumber)&&!(ce.referenceNumber&&$util.isInteger(ce.referenceNumber.low)&&$util.isInteger(ce.referenceNumber.high)))return"referenceNumber: integer|Long expected";if(ce.collectionName!=null&&ce.hasOwnProperty("collectionName")&&!$util.isString(ce.collectionName))return"collectionName: string expected";if(ce.ticksPerQuarter!=null&&ce.hasOwnProperty("ticksPerQuarter")&&!$util.isInteger(ce.ticksPerQuarter))return"ticksPerQuarter: integer expected";if(ce.timeSignatures!=null&&ce.hasOwnProperty("timeSignatures")){if(!Array.isArray(ce.timeSignatures))return"timeSignatures: array expected";for(var le=0;le<ce.timeSignatures.length;++le){var ue=$root.tensorflow.magenta.NoteSequence.TimeSignature.verify(ce.timeSignatures[le]);if(ue)return"timeSignatures."+ue}}if(ce.keySignatures!=null&&ce.hasOwnProperty("keySignatures")){if(!Array.isArray(ce.keySignatures))return"keySignatures: array expected";for(var le=0;le<ce.keySignatures.length;++le){var ue=$root.tensorflow.magenta.NoteSequence.KeySignature.verify(ce.keySignatures[le]);if(ue)return"keySignatures."+ue}}if(ce.tempos!=null&&ce.hasOwnProperty("tempos")){if(!Array.isArray(ce.tempos))return"tempos: array expected";for(var le=0;le<ce.tempos.length;++le){var ue=$root.tensorflow.magenta.NoteSequence.Tempo.verify(ce.tempos[le]);if(ue)return"tempos."+ue}}if(ce.notes!=null&&ce.hasOwnProperty("notes")){if(!Array.isArray(ce.notes))return"notes: array expected";for(var le=0;le<ce.notes.length;++le){var ue=$root.tensorflow.magenta.NoteSequence.Note.verify(ce.notes[le]);if(ue)return"notes."+ue}}if(ce.totalTime!=null&&ce.hasOwnProperty("totalTime")&&typeof ce.totalTime!="number")return"totalTime: number expected";if(ce.totalQuantizedSteps!=null&&ce.hasOwnProperty("totalQuantizedSteps")&&!$util.isInteger(ce.totalQuantizedSteps)&&!(ce.totalQuantizedSteps&&$util.isInteger(ce.totalQuantizedSteps.low)&&$util.isInteger(ce.totalQuantizedSteps.high)))return"totalQuantizedSteps: integer|Long expected";if(ce.pitchBends!=null&&ce.hasOwnProperty("pitchBends")){if(!Array.isArray(ce.pitchBends))return"pitchBends: array expected";for(var le=0;le<ce.pitchBends.length;++le){var ue=$root.tensorflow.magenta.NoteSequence.PitchBend.verify(ce.pitchBends[le]);if(ue)return"pitchBends."+ue}}if(ce.controlChanges!=null&&ce.hasOwnProperty("controlChanges")){if(!Array.isArray(ce.controlChanges))return"controlChanges: array expected";for(var le=0;le<ce.controlChanges.length;++le){var ue=$root.tensorflow.magenta.NoteSequence.ControlChange.verify(ce.controlChanges[le]);if(ue)return"controlChanges."+ue}}if(ce.partInfos!=null&&ce.hasOwnProperty("partInfos")){if(!Array.isArray(ce.partInfos))return"partInfos: array expected";for(var le=0;le<ce.partInfos.length;++le){var ue=$root.tensorflow.magenta.NoteSequence.PartInfo.verify(ce.partInfos[le]);if(ue)return"partInfos."+ue}}if(ce.sourceInfo!=null&&ce.hasOwnProperty("sourceInfo")){var ue=$root.tensorflow.magenta.NoteSequence.SourceInfo.verify(ce.sourceInfo);if(ue)return"sourceInfo."+ue}if(ce.textAnnotations!=null&&ce.hasOwnProperty("textAnnotations")){if(!Array.isArray(ce.textAnnotations))return"textAnnotations: array expected";for(var le=0;le<ce.textAnnotations.length;++le){var ue=$root.tensorflow.magenta.NoteSequence.TextAnnotation.verify(ce.textAnnotations[le]);if(ue)return"textAnnotations."+ue}}if(ce.sectionAnnotations!=null&&ce.hasOwnProperty("sectionAnnotations")){if(!Array.isArray(ce.sectionAnnotations))return"sectionAnnotations: array expected";for(var le=0;le<ce.sectionAnnotations.length;++le){var ue=$root.tensorflow.magenta.NoteSequence.SectionAnnotation.verify(ce.sectionAnnotations[le]);if(ue)return"sectionAnnotations."+ue}}if(ce.sectionGroups!=null&&ce.hasOwnProperty("sectionGroups")){if(!Array.isArray(ce.sectionGroups))return"sectionGroups: array expected";for(var le=0;le<ce.sectionGroups.length;++le){var ue=$root.tensorflow.magenta.NoteSequence.SectionGroup.verify(ce.sectionGroups[le]);if(ue)return"sectionGroups."+ue}}if(ce.quantizationInfo!=null&&ce.hasOwnProperty("quantizationInfo")){var ue=$root.tensorflow.magenta.NoteSequence.QuantizationInfo.verify(ce.quantizationInfo);if(ue)return"quantizationInfo."+ue}if(ce.subsequenceInfo!=null&&ce.hasOwnProperty("subsequenceInfo")){var ue=$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.verify(ce.subsequenceInfo);if(ue)return"subsequenceInfo."+ue}if(ce.sequenceMetadata!=null&&ce.hasOwnProperty("sequenceMetadata")){var ue=$root.tensorflow.magenta.SequenceMetadata.verify(ce.sequenceMetadata);if(ue)return"sequenceMetadata."+ue}return null},ne.fromObject=function(ce){if(ce instanceof $root.tensorflow.magenta.NoteSequence)return ce;var le=new $root.tensorflow.magenta.NoteSequence;if(ce.id!=null&&(le.id=String(ce.id)),ce.filename!=null&&(le.filename=String(ce.filename)),ce.referenceNumber!=null&&($util.Long?(le.referenceNumber=$util.Long.fromValue(ce.referenceNumber)).unsigned=!1:typeof ce.referenceNumber=="string"?le.referenceNumber=parseInt(ce.referenceNumber,10):typeof ce.referenceNumber=="number"?le.referenceNumber=ce.referenceNumber:typeof ce.referenceNumber=="object"&&(le.referenceNumber=new $util.LongBits(ce.referenceNumber.low>>>0,ce.referenceNumber.high>>>0).toNumber())),ce.collectionName!=null&&(le.collectionName=String(ce.collectionName)),ce.ticksPerQuarter!=null&&(le.ticksPerQuarter=ce.ticksPerQuarter|0),ce.timeSignatures){if(!Array.isArray(ce.timeSignatures))throw TypeError(".tensorflow.magenta.NoteSequence.timeSignatures: array expected");le.timeSignatures=[];for(var ue=0;ue<ce.timeSignatures.length;++ue){if(typeof ce.timeSignatures[ue]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.timeSignatures: object expected");le.timeSignatures[ue]=$root.tensorflow.magenta.NoteSequence.TimeSignature.fromObject(ce.timeSignatures[ue])}}if(ce.keySignatures){if(!Array.isArray(ce.keySignatures))throw TypeError(".tensorflow.magenta.NoteSequence.keySignatures: array expected");le.keySignatures=[];for(var ue=0;ue<ce.keySignatures.length;++ue){if(typeof ce.keySignatures[ue]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.keySignatures: object expected");le.keySignatures[ue]=$root.tensorflow.magenta.NoteSequence.KeySignature.fromObject(ce.keySignatures[ue])}}if(ce.tempos){if(!Array.isArray(ce.tempos))throw TypeError(".tensorflow.magenta.NoteSequence.tempos: array expected");le.tempos=[];for(var ue=0;ue<ce.tempos.length;++ue){if(typeof ce.tempos[ue]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.tempos: object expected");le.tempos[ue]=$root.tensorflow.magenta.NoteSequence.Tempo.fromObject(ce.tempos[ue])}}if(ce.notes){if(!Array.isArray(ce.notes))throw TypeError(".tensorflow.magenta.NoteSequence.notes: array expected");le.notes=[];for(var ue=0;ue<ce.notes.length;++ue){if(typeof ce.notes[ue]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.notes: object expected");le.notes[ue]=$root.tensorflow.magenta.NoteSequence.Note.fromObject(ce.notes[ue])}}if(ce.totalTime!=null&&(le.totalTime=Number(ce.totalTime)),ce.totalQuantizedSteps!=null&&($util.Long?(le.totalQuantizedSteps=$util.Long.fromValue(ce.totalQuantizedSteps)).unsigned=!1:typeof ce.totalQuantizedSteps=="string"?le.totalQuantizedSteps=parseInt(ce.totalQuantizedSteps,10):typeof ce.totalQuantizedSteps=="number"?le.totalQuantizedSteps=ce.totalQuantizedSteps:typeof ce.totalQuantizedSteps=="object"&&(le.totalQuantizedSteps=new $util.LongBits(ce.totalQuantizedSteps.low>>>0,ce.totalQuantizedSteps.high>>>0).toNumber())),ce.pitchBends){if(!Array.isArray(ce.pitchBends))throw TypeError(".tensorflow.magenta.NoteSequence.pitchBends: array expected");le.pitchBends=[];for(var ue=0;ue<ce.pitchBends.length;++ue){if(typeof ce.pitchBends[ue]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.pitchBends: object expected");le.pitchBends[ue]=$root.tensorflow.magenta.NoteSequence.PitchBend.fromObject(ce.pitchBends[ue])}}if(ce.controlChanges){if(!Array.isArray(ce.controlChanges))throw TypeError(".tensorflow.magenta.NoteSequence.controlChanges: array expected");le.controlChanges=[];for(var ue=0;ue<ce.controlChanges.length;++ue){if(typeof ce.controlChanges[ue]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.controlChanges: object expected");le.controlChanges[ue]=$root.tensorflow.magenta.NoteSequence.ControlChange.fromObject(ce.controlChanges[ue])}}if(ce.partInfos){if(!Array.isArray(ce.partInfos))throw TypeError(".tensorflow.magenta.NoteSequence.partInfos: array expected");le.partInfos=[];for(var ue=0;ue<ce.partInfos.length;++ue){if(typeof ce.partInfos[ue]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.partInfos: object expected");le.partInfos[ue]=$root.tensorflow.magenta.NoteSequence.PartInfo.fromObject(ce.partInfos[ue])}}if(ce.sourceInfo!=null){if(typeof ce.sourceInfo!="object")throw TypeError(".tensorflow.magenta.NoteSequence.sourceInfo: object expected");le.sourceInfo=$root.tensorflow.magenta.NoteSequence.SourceInfo.fromObject(ce.sourceInfo)}if(ce.textAnnotations){if(!Array.isArray(ce.textAnnotations))throw TypeError(".tensorflow.magenta.NoteSequence.textAnnotations: array expected");le.textAnnotations=[];for(var ue=0;ue<ce.textAnnotations.length;++ue){if(typeof ce.textAnnotations[ue]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.textAnnotations: object expected");le.textAnnotations[ue]=$root.tensorflow.magenta.NoteSequence.TextAnnotation.fromObject(ce.textAnnotations[ue])}}if(ce.sectionAnnotations){if(!Array.isArray(ce.sectionAnnotations))throw TypeError(".tensorflow.magenta.NoteSequence.sectionAnnotations: array expected");le.sectionAnnotations=[];for(var ue=0;ue<ce.sectionAnnotations.length;++ue){if(typeof ce.sectionAnnotations[ue]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.sectionAnnotations: object expected");le.sectionAnnotations[ue]=$root.tensorflow.magenta.NoteSequence.SectionAnnotation.fromObject(ce.sectionAnnotations[ue])}}if(ce.sectionGroups){if(!Array.isArray(ce.sectionGroups))throw TypeError(".tensorflow.magenta.NoteSequence.sectionGroups: array expected");le.sectionGroups=[];for(var ue=0;ue<ce.sectionGroups.length;++ue){if(typeof ce.sectionGroups[ue]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.sectionGroups: object expected");le.sectionGroups[ue]=$root.tensorflow.magenta.NoteSequence.SectionGroup.fromObject(ce.sectionGroups[ue])}}if(ce.quantizationInfo!=null){if(typeof ce.quantizationInfo!="object")throw TypeError(".tensorflow.magenta.NoteSequence.quantizationInfo: object expected");le.quantizationInfo=$root.tensorflow.magenta.NoteSequence.QuantizationInfo.fromObject(ce.quantizationInfo)}if(ce.subsequenceInfo!=null){if(typeof ce.subsequenceInfo!="object")throw TypeError(".tensorflow.magenta.NoteSequence.subsequenceInfo: object expected");le.subsequenceInfo=$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.fromObject(ce.subsequenceInfo)}if(ce.sequenceMetadata!=null){if(typeof ce.sequenceMetadata!="object")throw TypeError(".tensorflow.magenta.NoteSequence.sequenceMetadata: object expected");le.sequenceMetadata=$root.tensorflow.magenta.SequenceMetadata.fromObject(ce.sequenceMetadata)}return le},ne.toObject=function(ce,le){le||(le={});var ue={};if((le.arrays||le.defaults)&&(ue.timeSignatures=[],ue.keySignatures=[],ue.tempos=[],ue.notes=[],ue.pitchBends=[],ue.controlChanges=[],ue.partInfos=[],ue.textAnnotations=[],ue.sectionAnnotations=[],ue.sectionGroups=[]),le.defaults){if(ue.id="",ue.filename="",ue.collectionName="",ue.ticksPerQuarter=0,ue.totalTime=0,ue.sourceInfo=null,ue.quantizationInfo=null,$util.Long){var he=new $util.Long(0,0,!1);ue.totalQuantizedSteps=le.longs===String?he.toString():le.longs===Number?he.toNumber():he}else ue.totalQuantizedSteps=le.longs===String?"0":0;if(ue.subsequenceInfo=null,$util.Long){var he=new $util.Long(0,0,!1);ue.referenceNumber=le.longs===String?he.toString():le.longs===Number?he.toNumber():he}else ue.referenceNumber=le.longs===String?"0":0;ue.sequenceMetadata=null}if(ce.id!=null&&ce.hasOwnProperty("id")&&(ue.id=ce.id),ce.filename!=null&&ce.hasOwnProperty("filename")&&(ue.filename=ce.filename),ce.collectionName!=null&&ce.hasOwnProperty("collectionName")&&(ue.collectionName=ce.collectionName),ce.ticksPerQuarter!=null&&ce.hasOwnProperty("ticksPerQuarter")&&(ue.ticksPerQuarter=ce.ticksPerQuarter),ce.timeSignatures&&ce.timeSignatures.length){ue.timeSignatures=[];for(var fe=0;fe<ce.timeSignatures.length;++fe)ue.timeSignatures[fe]=$root.tensorflow.magenta.NoteSequence.TimeSignature.toObject(ce.timeSignatures[fe],le)}if(ce.keySignatures&&ce.keySignatures.length){ue.keySignatures=[];for(var fe=0;fe<ce.keySignatures.length;++fe)ue.keySignatures[fe]=$root.tensorflow.magenta.NoteSequence.KeySignature.toObject(ce.keySignatures[fe],le)}if(ce.tempos&&ce.tempos.length){ue.tempos=[];for(var fe=0;fe<ce.tempos.length;++fe)ue.tempos[fe]=$root.tensorflow.magenta.NoteSequence.Tempo.toObject(ce.tempos[fe],le)}if(ce.notes&&ce.notes.length){ue.notes=[];for(var fe=0;fe<ce.notes.length;++fe)ue.notes[fe]=$root.tensorflow.magenta.NoteSequence.Note.toObject(ce.notes[fe],le)}if(ce.totalTime!=null&&ce.hasOwnProperty("totalTime")&&(ue.totalTime=le.json&&!isFinite(ce.totalTime)?String(ce.totalTime):ce.totalTime),ce.pitchBends&&ce.pitchBends.length){ue.pitchBends=[];for(var fe=0;fe<ce.pitchBends.length;++fe)ue.pitchBends[fe]=$root.tensorflow.magenta.NoteSequence.PitchBend.toObject(ce.pitchBends[fe],le)}if(ce.controlChanges&&ce.controlChanges.length){ue.controlChanges=[];for(var fe=0;fe<ce.controlChanges.length;++fe)ue.controlChanges[fe]=$root.tensorflow.magenta.NoteSequence.ControlChange.toObject(ce.controlChanges[fe],le)}if(ce.partInfos&&ce.partInfos.length){ue.partInfos=[];for(var fe=0;fe<ce.partInfos.length;++fe)ue.partInfos[fe]=$root.tensorflow.magenta.NoteSequence.PartInfo.toObject(ce.partInfos[fe],le)}if(ce.sourceInfo!=null&&ce.hasOwnProperty("sourceInfo")&&(ue.sourceInfo=$root.tensorflow.magenta.NoteSequence.SourceInfo.toObject(ce.sourceInfo,le)),ce.textAnnotations&&ce.textAnnotations.length){ue.textAnnotations=[];for(var fe=0;fe<ce.textAnnotations.length;++fe)ue.textAnnotations[fe]=$root.tensorflow.magenta.NoteSequence.TextAnnotation.toObject(ce.textAnnotations[fe],le)}if(ce.quantizationInfo!=null&&ce.hasOwnProperty("quantizationInfo")&&(ue.quantizationInfo=$root.tensorflow.magenta.NoteSequence.QuantizationInfo.toObject(ce.quantizationInfo,le)),ce.totalQuantizedSteps!=null&&ce.hasOwnProperty("totalQuantizedSteps")&&(typeof ce.totalQuantizedSteps=="number"?ue.totalQuantizedSteps=le.longs===String?String(ce.totalQuantizedSteps):ce.totalQuantizedSteps:ue.totalQuantizedSteps=le.longs===String?$util.Long.prototype.toString.call(ce.totalQuantizedSteps):le.longs===Number?new $util.LongBits(ce.totalQuantizedSteps.low>>>0,ce.totalQuantizedSteps.high>>>0).toNumber():ce.totalQuantizedSteps),ce.subsequenceInfo!=null&&ce.hasOwnProperty("subsequenceInfo")&&(ue.subsequenceInfo=$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.toObject(ce.subsequenceInfo,le)),ce.referenceNumber!=null&&ce.hasOwnProperty("referenceNumber")&&(typeof ce.referenceNumber=="number"?ue.referenceNumber=le.longs===String?String(ce.referenceNumber):ce.referenceNumber:ue.referenceNumber=le.longs===String?$util.Long.prototype.toString.call(ce.referenceNumber):le.longs===Number?new $util.LongBits(ce.referenceNumber.low>>>0,ce.referenceNumber.high>>>0).toNumber():ce.referenceNumber),ce.sequenceMetadata!=null&&ce.hasOwnProperty("sequenceMetadata")&&(ue.sequenceMetadata=$root.tensorflow.magenta.SequenceMetadata.toObject(ce.sequenceMetadata,le)),ce.sectionAnnotations&&ce.sectionAnnotations.length){ue.sectionAnnotations=[];for(var fe=0;fe<ce.sectionAnnotations.length;++fe)ue.sectionAnnotations[fe]=$root.tensorflow.magenta.NoteSequence.SectionAnnotation.toObject(ce.sectionAnnotations[fe],le)}if(ce.sectionGroups&&ce.sectionGroups.length){ue.sectionGroups=[];for(var fe=0;fe<ce.sectionGroups.length;++fe)ue.sectionGroups[fe]=$root.tensorflow.magenta.NoteSequence.SectionGroup.toObject(ce.sectionGroups[fe],le)}return ue},ne.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ne.Note=function(){function ae(ce){if(ce)for(var le=Object.keys(ce),ue=0;ue<le.length;++ue)ce[le[ue]]!=null&&(this[le[ue]]=ce[le[ue]])}return ae.prototype.pitch=0,ae.prototype.pitchName=0,ae.prototype.velocity=0,ae.prototype.startTime=0,ae.prototype.quantizedStartStep=$util.Long?$util.Long.fromBits(0,0,!1):0,ae.prototype.endTime=0,ae.prototype.quantizedEndStep=$util.Long?$util.Long.fromBits(0,0,!1):0,ae.prototype.numerator=0,ae.prototype.denominator=0,ae.prototype.instrument=0,ae.prototype.program=0,ae.prototype.isDrum=!1,ae.prototype.part=0,ae.prototype.voice=0,ae.create=function(le){return new ae(le)},ae.encode=function(le,ue){return ue||(ue=$Writer.create()),le.pitch!=null&&le.hasOwnProperty("pitch")&&ue.uint32(8).int32(le.pitch),le.velocity!=null&&le.hasOwnProperty("velocity")&&ue.uint32(16).int32(le.velocity),le.startTime!=null&&le.hasOwnProperty("startTime")&&ue.uint32(25).double(le.startTime),le.endTime!=null&&le.hasOwnProperty("endTime")&&ue.uint32(33).double(le.endTime),le.numerator!=null&&le.hasOwnProperty("numerator")&&ue.uint32(40).int32(le.numerator),le.denominator!=null&&le.hasOwnProperty("denominator")&&ue.uint32(48).int32(le.denominator),le.instrument!=null&&le.hasOwnProperty("instrument")&&ue.uint32(56).int32(le.instrument),le.program!=null&&le.hasOwnProperty("program")&&ue.uint32(64).int32(le.program),le.isDrum!=null&&le.hasOwnProperty("isDrum")&&ue.uint32(72).bool(le.isDrum),le.part!=null&&le.hasOwnProperty("part")&&ue.uint32(80).int32(le.part),le.pitchName!=null&&le.hasOwnProperty("pitchName")&&ue.uint32(88).int32(le.pitchName),le.voice!=null&&le.hasOwnProperty("voice")&&ue.uint32(96).int32(le.voice),le.quantizedStartStep!=null&&le.hasOwnProperty("quantizedStartStep")&&ue.uint32(104).int64(le.quantizedStartStep),le.quantizedEndStep!=null&&le.hasOwnProperty("quantizedEndStep")&&ue.uint32(112).int64(le.quantizedEndStep),ue},ae.encodeDelimited=function(le,ue){return this.encode(le,ue).ldelim()},ae.decode=function(le,ue){le instanceof $Reader||(le=$Reader.create(le));for(var he=ue===void 0?le.len:le.pos+ue,fe=new $root.tensorflow.magenta.NoteSequence.Note;le.pos<he;){var me=le.uint32();switch(me>>>3){case 1:fe.pitch=le.int32();break;case 11:fe.pitchName=le.int32();break;case 2:fe.velocity=le.int32();break;case 3:fe.startTime=le.double();break;case 13:fe.quantizedStartStep=$util.Long?le.int64().toNumber():le.int64();break;case 4:fe.endTime=le.double();break;case 14:fe.quantizedEndStep=$util.Long?le.int64().toNumber():le.int64();break;case 5:fe.numerator=le.int32();break;case 6:fe.denominator=le.int32();break;case 7:fe.instrument=le.int32();break;case 8:fe.program=le.int32();break;case 9:fe.isDrum=le.bool();break;case 10:fe.part=le.int32();break;case 12:fe.voice=le.int32();break;default:le.skipType(me&7);break}}return fe},ae.decodeDelimited=function(le){return le instanceof $Reader||(le=new $Reader(le)),this.decode(le,le.uint32())},ae.verify=function(le){if(typeof le!="object"||le===null)return"object expected";if(le.pitch!=null&&le.hasOwnProperty("pitch")&&!$util.isInteger(le.pitch))return"pitch: integer expected";if(le.pitchName!=null&&le.hasOwnProperty("pitchName"))switch(le.pitchName){default:return"pitchName: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:break}return le.velocity!=null&&le.hasOwnProperty("velocity")&&!$util.isInteger(le.velocity)?"velocity: integer expected":le.startTime!=null&&le.hasOwnProperty("startTime")&&typeof le.startTime!="number"?"startTime: number expected":le.quantizedStartStep!=null&&le.hasOwnProperty("quantizedStartStep")&&!$util.isInteger(le.quantizedStartStep)&&!(le.quantizedStartStep&&$util.isInteger(le.quantizedStartStep.low)&&$util.isInteger(le.quantizedStartStep.high))?"quantizedStartStep: integer|Long expected":le.endTime!=null&&le.hasOwnProperty("endTime")&&typeof le.endTime!="number"?"endTime: number expected":le.quantizedEndStep!=null&&le.hasOwnProperty("quantizedEndStep")&&!$util.isInteger(le.quantizedEndStep)&&!(le.quantizedEndStep&&$util.isInteger(le.quantizedEndStep.low)&&$util.isInteger(le.quantizedEndStep.high))?"quantizedEndStep: integer|Long expected":le.numerator!=null&&le.hasOwnProperty("numerator")&&!$util.isInteger(le.numerator)?"numerator: integer expected":le.denominator!=null&&le.hasOwnProperty("denominator")&&!$util.isInteger(le.denominator)?"denominator: integer expected":le.instrument!=null&&le.hasOwnProperty("instrument")&&!$util.isInteger(le.instrument)?"instrument: integer expected":le.program!=null&&le.hasOwnProperty("program")&&!$util.isInteger(le.program)?"program: integer expected":le.isDrum!=null&&le.hasOwnProperty("isDrum")&&typeof le.isDrum!="boolean"?"isDrum: boolean expected":le.part!=null&&le.hasOwnProperty("part")&&!$util.isInteger(le.part)?"part: integer expected":le.voice!=null&&le.hasOwnProperty("voice")&&!$util.isInteger(le.voice)?"voice: integer expected":null},ae.fromObject=function(le){if(le instanceof $root.tensorflow.magenta.NoteSequence.Note)return le;var ue=new $root.tensorflow.magenta.NoteSequence.Note;switch(le.pitch!=null&&(ue.pitch=le.pitch|0),le.pitchName){case"UNKNOWN_PITCH_NAME":case 0:ue.pitchName=0;break;case"F_FLAT_FLAT":case 1:ue.pitchName=1;break;case"C_FLAT_FLAT":case 2:ue.pitchName=2;break;case"G_FLAT_FLAT":case 3:ue.pitchName=3;break;case"D_FLAT_FLAT":case 4:ue.pitchName=4;break;case"A_FLAT_FLAT":case 5:ue.pitchName=5;break;case"E_FLAT_FLAT":case 6:ue.pitchName=6;break;case"B_FLAT_FLAT":case 7:ue.pitchName=7;break;case"F_FLAT":case 8:ue.pitchName=8;break;case"C_FLAT":case 9:ue.pitchName=9;break;case"G_FLAT":case 10:ue.pitchName=10;break;case"D_FLAT":case 11:ue.pitchName=11;break;case"A_FLAT":case 12:ue.pitchName=12;break;case"E_FLAT":case 13:ue.pitchName=13;break;case"B_FLAT":case 14:ue.pitchName=14;break;case"F":case 15:ue.pitchName=15;break;case"C":case 16:ue.pitchName=16;break;case"G":case 17:ue.pitchName=17;break;case"D":case 18:ue.pitchName=18;break;case"A":case 19:ue.pitchName=19;break;case"E":case 20:ue.pitchName=20;break;case"B":case 21:ue.pitchName=21;break;case"F_SHARP":case 22:ue.pitchName=22;break;case"C_SHARP":case 23:ue.pitchName=23;break;case"G_SHARP":case 24:ue.pitchName=24;break;case"D_SHARP":case 25:ue.pitchName=25;break;case"A_SHARP":case 26:ue.pitchName=26;break;case"E_SHARP":case 27:ue.pitchName=27;break;case"B_SHARP":case 28:ue.pitchName=28;break;case"F_SHARP_SHARP":case 29:ue.pitchName=29;break;case"C_SHARP_SHARP":case 30:ue.pitchName=30;break;case"G_SHARP_SHARP":case 31:ue.pitchName=31;break;case"D_SHARP_SHARP":case 32:ue.pitchName=32;break;case"A_SHARP_SHARP":case 33:ue.pitchName=33;break;case"E_SHARP_SHARP":case 34:ue.pitchName=34;break;case"B_SHARP_SHARP":case 35:ue.pitchName=35;break}return le.velocity!=null&&(ue.velocity=le.velocity|0),le.startTime!=null&&(ue.startTime=Number(le.startTime)),le.quantizedStartStep!=null&&($util.Long?(ue.quantizedStartStep=$util.Long.fromValue(le.quantizedStartStep)).unsigned=!1:typeof le.quantizedStartStep=="string"?ue.quantizedStartStep=parseInt(le.quantizedStartStep,10):typeof le.quantizedStartStep=="number"?ue.quantizedStartStep=le.quantizedStartStep:typeof le.quantizedStartStep=="object"&&(ue.quantizedStartStep=new $util.LongBits(le.quantizedStartStep.low>>>0,le.quantizedStartStep.high>>>0).toNumber())),le.endTime!=null&&(ue.endTime=Number(le.endTime)),le.quantizedEndStep!=null&&($util.Long?(ue.quantizedEndStep=$util.Long.fromValue(le.quantizedEndStep)).unsigned=!1:typeof le.quantizedEndStep=="string"?ue.quantizedEndStep=parseInt(le.quantizedEndStep,10):typeof le.quantizedEndStep=="number"?ue.quantizedEndStep=le.quantizedEndStep:typeof le.quantizedEndStep=="object"&&(ue.quantizedEndStep=new $util.LongBits(le.quantizedEndStep.low>>>0,le.quantizedEndStep.high>>>0).toNumber())),le.numerator!=null&&(ue.numerator=le.numerator|0),le.denominator!=null&&(ue.denominator=le.denominator|0),le.instrument!=null&&(ue.instrument=le.instrument|0),le.program!=null&&(ue.program=le.program|0),le.isDrum!=null&&(ue.isDrum=!!le.isDrum),le.part!=null&&(ue.part=le.part|0),le.voice!=null&&(ue.voice=le.voice|0),ue},ae.toObject=function(le,ue){ue||(ue={});var he={};if(ue.defaults){if(he.pitch=0,he.velocity=0,he.startTime=0,he.endTime=0,he.numerator=0,he.denominator=0,he.instrument=0,he.program=0,he.isDrum=!1,he.part=0,he.pitchName=ue.enums===String?"UNKNOWN_PITCH_NAME":0,he.voice=0,$util.Long){var fe=new $util.Long(0,0,!1);he.quantizedStartStep=ue.longs===String?fe.toString():ue.longs===Number?fe.toNumber():fe}else he.quantizedStartStep=ue.longs===String?"0":0;if($util.Long){var fe=new $util.Long(0,0,!1);he.quantizedEndStep=ue.longs===String?fe.toString():ue.longs===Number?fe.toNumber():fe}else he.quantizedEndStep=ue.longs===String?"0":0}return le.pitch!=null&&le.hasOwnProperty("pitch")&&(he.pitch=le.pitch),le.velocity!=null&&le.hasOwnProperty("velocity")&&(he.velocity=le.velocity),le.startTime!=null&&le.hasOwnProperty("startTime")&&(he.startTime=ue.json&&!isFinite(le.startTime)?String(le.startTime):le.startTime),le.endTime!=null&&le.hasOwnProperty("endTime")&&(he.endTime=ue.json&&!isFinite(le.endTime)?String(le.endTime):le.endTime),le.numerator!=null&&le.hasOwnProperty("numerator")&&(he.numerator=le.numerator),le.denominator!=null&&le.hasOwnProperty("denominator")&&(he.denominator=le.denominator),le.instrument!=null&&le.hasOwnProperty("instrument")&&(he.instrument=le.instrument),le.program!=null&&le.hasOwnProperty("program")&&(he.program=le.program),le.isDrum!=null&&le.hasOwnProperty("isDrum")&&(he.isDrum=le.isDrum),le.part!=null&&le.hasOwnProperty("part")&&(he.part=le.part),le.pitchName!=null&&le.hasOwnProperty("pitchName")&&(he.pitchName=ue.enums===String?$root.tensorflow.magenta.NoteSequence.PitchName[le.pitchName]:le.pitchName),le.voice!=null&&le.hasOwnProperty("voice")&&(he.voice=le.voice),le.quantizedStartStep!=null&&le.hasOwnProperty("quantizedStartStep")&&(typeof le.quantizedStartStep=="number"?he.quantizedStartStep=ue.longs===String?String(le.quantizedStartStep):le.quantizedStartStep:he.quantizedStartStep=ue.longs===String?$util.Long.prototype.toString.call(le.quantizedStartStep):ue.longs===Number?new $util.LongBits(le.quantizedStartStep.low>>>0,le.quantizedStartStep.high>>>0).toNumber():le.quantizedStartStep),le.quantizedEndStep!=null&&le.hasOwnProperty("quantizedEndStep")&&(typeof le.quantizedEndStep=="number"?he.quantizedEndStep=ue.longs===String?String(le.quantizedEndStep):le.quantizedEndStep:he.quantizedEndStep=ue.longs===String?$util.Long.prototype.toString.call(le.quantizedEndStep):ue.longs===Number?new $util.LongBits(le.quantizedEndStep.low>>>0,le.quantizedEndStep.high>>>0).toNumber():le.quantizedEndStep),he},ae.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ae}(),ne.PitchName=function(){var ae={},ce=Object.create(ae);return ce[ae[0]="UNKNOWN_PITCH_NAME"]=0,ce[ae[1]="F_FLAT_FLAT"]=1,ce[ae[2]="C_FLAT_FLAT"]=2,ce[ae[3]="G_FLAT_FLAT"]=3,ce[ae[4]="D_FLAT_FLAT"]=4,ce[ae[5]="A_FLAT_FLAT"]=5,ce[ae[6]="E_FLAT_FLAT"]=6,ce[ae[7]="B_FLAT_FLAT"]=7,ce[ae[8]="F_FLAT"]=8,ce[ae[9]="C_FLAT"]=9,ce[ae[10]="G_FLAT"]=10,ce[ae[11]="D_FLAT"]=11,ce[ae[12]="A_FLAT"]=12,ce[ae[13]="E_FLAT"]=13,ce[ae[14]="B_FLAT"]=14,ce[ae[15]="F"]=15,ce[ae[16]="C"]=16,ce[ae[17]="G"]=17,ce[ae[18]="D"]=18,ce[ae[19]="A"]=19,ce[ae[20]="E"]=20,ce[ae[21]="B"]=21,ce[ae[22]="F_SHARP"]=22,ce[ae[23]="C_SHARP"]=23,ce[ae[24]="G_SHARP"]=24,ce[ae[25]="D_SHARP"]=25,ce[ae[26]="A_SHARP"]=26,ce[ae[27]="E_SHARP"]=27,ce[ae[28]="B_SHARP"]=28,ce[ae[29]="F_SHARP_SHARP"]=29,ce[ae[30]="C_SHARP_SHARP"]=30,ce[ae[31]="G_SHARP_SHARP"]=31,ce[ae[32]="D_SHARP_SHARP"]=32,ce[ae[33]="A_SHARP_SHARP"]=33,ce[ae[34]="E_SHARP_SHARP"]=34,ce[ae[35]="B_SHARP_SHARP"]=35,ce}(),ne.TimeSignature=function(){function ae(ce){if(ce)for(var le=Object.keys(ce),ue=0;ue<le.length;++ue)ce[le[ue]]!=null&&(this[le[ue]]=ce[le[ue]])}return ae.prototype.time=0,ae.prototype.numerator=0,ae.prototype.denominator=0,ae.create=function(le){return new ae(le)},ae.encode=function(le,ue){return ue||(ue=$Writer.create()),le.time!=null&&le.hasOwnProperty("time")&&ue.uint32(9).double(le.time),le.numerator!=null&&le.hasOwnProperty("numerator")&&ue.uint32(16).int32(le.numerator),le.denominator!=null&&le.hasOwnProperty("denominator")&&ue.uint32(24).int32(le.denominator),ue},ae.encodeDelimited=function(le,ue){return this.encode(le,ue).ldelim()},ae.decode=function(le,ue){le instanceof $Reader||(le=$Reader.create(le));for(var he=ue===void 0?le.len:le.pos+ue,fe=new $root.tensorflow.magenta.NoteSequence.TimeSignature;le.pos<he;){var me=le.uint32();switch(me>>>3){case 1:fe.time=le.double();break;case 2:fe.numerator=le.int32();break;case 3:fe.denominator=le.int32();break;default:le.skipType(me&7);break}}return fe},ae.decodeDelimited=function(le){return le instanceof $Reader||(le=new $Reader(le)),this.decode(le,le.uint32())},ae.verify=function(le){return typeof le!="object"||le===null?"object expected":le.time!=null&&le.hasOwnProperty("time")&&typeof le.time!="number"?"time: number expected":le.numerator!=null&&le.hasOwnProperty("numerator")&&!$util.isInteger(le.numerator)?"numerator: integer expected":le.denominator!=null&&le.hasOwnProperty("denominator")&&!$util.isInteger(le.denominator)?"denominator: integer expected":null},ae.fromObject=function(le){if(le instanceof $root.tensorflow.magenta.NoteSequence.TimeSignature)return le;var ue=new $root.tensorflow.magenta.NoteSequence.TimeSignature;return le.time!=null&&(ue.time=Number(le.time)),le.numerator!=null&&(ue.numerator=le.numerator|0),le.denominator!=null&&(ue.denominator=le.denominator|0),ue},ae.toObject=function(le,ue){ue||(ue={});var he={};return ue.defaults&&(he.time=0,he.numerator=0,he.denominator=0),le.time!=null&&le.hasOwnProperty("time")&&(he.time=ue.json&&!isFinite(le.time)?String(le.time):le.time),le.numerator!=null&&le.hasOwnProperty("numerator")&&(he.numerator=le.numerator),le.denominator!=null&&le.hasOwnProperty("denominator")&&(he.denominator=le.denominator),he},ae.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ae}(),ne.KeySignature=function(){function ae(ce){if(ce)for(var le=Object.keys(ce),ue=0;ue<le.length;++ue)ce[le[ue]]!=null&&(this[le[ue]]=ce[le[ue]])}return ae.prototype.time=0,ae.prototype.key=0,ae.prototype.mode=0,ae.create=function(le){return new ae(le)},ae.encode=function(le,ue){return ue||(ue=$Writer.create()),le.time!=null&&le.hasOwnProperty("time")&&ue.uint32(9).double(le.time),le.key!=null&&le.hasOwnProperty("key")&&ue.uint32(16).int32(le.key),le.mode!=null&&le.hasOwnProperty("mode")&&ue.uint32(24).int32(le.mode),ue},ae.encodeDelimited=function(le,ue){return this.encode(le,ue).ldelim()},ae.decode=function(le,ue){le instanceof $Reader||(le=$Reader.create(le));for(var he=ue===void 0?le.len:le.pos+ue,fe=new $root.tensorflow.magenta.NoteSequence.KeySignature;le.pos<he;){var me=le.uint32();switch(me>>>3){case 1:fe.time=le.double();break;case 2:fe.key=le.int32();break;case 3:fe.mode=le.int32();break;default:le.skipType(me&7);break}}return fe},ae.decodeDelimited=function(le){return le instanceof $Reader||(le=new $Reader(le)),this.decode(le,le.uint32())},ae.verify=function(le){if(typeof le!="object"||le===null)return"object expected";if(le.time!=null&&le.hasOwnProperty("time")&&typeof le.time!="number")return"time: number expected";if(le.key!=null&&le.hasOwnProperty("key"))switch(le.key){default:return"key: enum value expected";case 0:case 1:case 1:case 2:case 3:case 3:case 4:case 5:case 6:case 6:case 7:case 8:case 8:case 9:case 10:case 10:case 11:break}if(le.mode!=null&&le.hasOwnProperty("mode"))switch(le.mode){default:return"mode: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break}return null},ae.fromObject=function(le){if(le instanceof $root.tensorflow.magenta.NoteSequence.KeySignature)return le;var ue=new $root.tensorflow.magenta.NoteSequence.KeySignature;switch(le.time!=null&&(ue.time=Number(le.time)),le.key){case"C":case 0:ue.key=0;break;case"C_SHARP":case 1:ue.key=1;break;case"D_FLAT":case 1:ue.key=1;break;case"D":case 2:ue.key=2;break;case"D_SHARP":case 3:ue.key=3;break;case"E_FLAT":case 3:ue.key=3;break;case"E":case 4:ue.key=4;break;case"F":case 5:ue.key=5;break;case"F_SHARP":case 6:ue.key=6;break;case"G_FLAT":case 6:ue.key=6;break;case"G":case 7:ue.key=7;break;case"G_SHARP":case 8:ue.key=8;break;case"A_FLAT":case 8:ue.key=8;break;case"A":case 9:ue.key=9;break;case"A_SHARP":case 10:ue.key=10;break;case"B_FLAT":case 10:ue.key=10;break;case"B":case 11:ue.key=11;break}switch(le.mode){case"MAJOR":case 0:ue.mode=0;break;case"MINOR":case 1:ue.mode=1;break;case"NOT_SPECIFIED":case 2:ue.mode=2;break;case"MIXOLYDIAN":case 3:ue.mode=3;break;case"DORIAN":case 4:ue.mode=4;break;case"PHRYGIAN":case 5:ue.mode=5;break;case"LYDIAN":case 6:ue.mode=6;break;case"LOCRIAN":case 7:ue.mode=7;break}return ue},ae.toObject=function(le,ue){ue||(ue={});var he={};return ue.defaults&&(he.time=0,he.key=ue.enums===String?"C":0,he.mode=ue.enums===String?"MAJOR":0),le.time!=null&&le.hasOwnProperty("time")&&(he.time=ue.json&&!isFinite(le.time)?String(le.time):le.time),le.key!=null&&le.hasOwnProperty("key")&&(he.key=ue.enums===String?$root.tensorflow.magenta.NoteSequence.KeySignature.Key[le.key]:le.key),le.mode!=null&&le.hasOwnProperty("mode")&&(he.mode=ue.enums===String?$root.tensorflow.magenta.NoteSequence.KeySignature.Mode[le.mode]:le.mode),he},ae.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ae.Key=function(){var ce={},le=Object.create(ce);return le[ce[0]="C"]=0,le[ce[1]="C_SHARP"]=1,le.D_FLAT=1,le[ce[2]="D"]=2,le[ce[3]="D_SHARP"]=3,le.E_FLAT=3,le[ce[4]="E"]=4,le[ce[5]="F"]=5,le[ce[6]="F_SHARP"]=6,le.G_FLAT=6,le[ce[7]="G"]=7,le[ce[8]="G_SHARP"]=8,le.A_FLAT=8,le[ce[9]="A"]=9,le[ce[10]="A_SHARP"]=10,le.B_FLAT=10,le[ce[11]="B"]=11,le}(),ae.Mode=function(){var ce={},le=Object.create(ce);return le[ce[0]="MAJOR"]=0,le[ce[1]="MINOR"]=1,le[ce[2]="NOT_SPECIFIED"]=2,le[ce[3]="MIXOLYDIAN"]=3,le[ce[4]="DORIAN"]=4,le[ce[5]="PHRYGIAN"]=5,le[ce[6]="LYDIAN"]=6,le[ce[7]="LOCRIAN"]=7,le}(),ae}(),ne.Tempo=function(){function ae(ce){if(ce)for(var le=Object.keys(ce),ue=0;ue<le.length;++ue)ce[le[ue]]!=null&&(this[le[ue]]=ce[le[ue]])}return ae.prototype.time=0,ae.prototype.qpm=0,ae.create=function(le){return new ae(le)},ae.encode=function(le,ue){return ue||(ue=$Writer.create()),le.time!=null&&le.hasOwnProperty("time")&&ue.uint32(9).double(le.time),le.qpm!=null&&le.hasOwnProperty("qpm")&&ue.uint32(17).double(le.qpm),ue},ae.encodeDelimited=function(le,ue){return this.encode(le,ue).ldelim()},ae.decode=function(le,ue){le instanceof $Reader||(le=$Reader.create(le));for(var he=ue===void 0?le.len:le.pos+ue,fe=new $root.tensorflow.magenta.NoteSequence.Tempo;le.pos<he;){var me=le.uint32();switch(me>>>3){case 1:fe.time=le.double();break;case 2:fe.qpm=le.double();break;default:le.skipType(me&7);break}}return fe},ae.decodeDelimited=function(le){return le instanceof $Reader||(le=new $Reader(le)),this.decode(le,le.uint32())},ae.verify=function(le){return typeof le!="object"||le===null?"object expected":le.time!=null&&le.hasOwnProperty("time")&&typeof le.time!="number"?"time: number expected":le.qpm!=null&&le.hasOwnProperty("qpm")&&typeof le.qpm!="number"?"qpm: number expected":null},ae.fromObject=function(le){if(le instanceof $root.tensorflow.magenta.NoteSequence.Tempo)return le;var ue=new $root.tensorflow.magenta.NoteSequence.Tempo;return le.time!=null&&(ue.time=Number(le.time)),le.qpm!=null&&(ue.qpm=Number(le.qpm)),ue},ae.toObject=function(le,ue){ue||(ue={});var he={};return ue.defaults&&(he.time=0,he.qpm=0),le.time!=null&&le.hasOwnProperty("time")&&(he.time=ue.json&&!isFinite(le.time)?String(le.time):le.time),le.qpm!=null&&le.hasOwnProperty("qpm")&&(he.qpm=ue.json&&!isFinite(le.qpm)?String(le.qpm):le.qpm),he},ae.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ae}(),ne.PitchBend=function(){function ae(ce){if(ce)for(var le=Object.keys(ce),ue=0;ue<le.length;++ue)ce[le[ue]]!=null&&(this[le[ue]]=ce[le[ue]])}return ae.prototype.time=0,ae.prototype.bend=0,ae.prototype.instrument=0,ae.prototype.program=0,ae.prototype.isDrum=!1,ae.create=function(le){return new ae(le)},ae.encode=function(le,ue){return ue||(ue=$Writer.create()),le.time!=null&&le.hasOwnProperty("time")&&ue.uint32(9).double(le.time),le.bend!=null&&le.hasOwnProperty("bend")&&ue.uint32(16).int32(le.bend),le.instrument!=null&&le.hasOwnProperty("instrument")&&ue.uint32(24).int32(le.instrument),le.program!=null&&le.hasOwnProperty("program")&&ue.uint32(32).int32(le.program),le.isDrum!=null&&le.hasOwnProperty("isDrum")&&ue.uint32(40).bool(le.isDrum),ue},ae.encodeDelimited=function(le,ue){return this.encode(le,ue).ldelim()},ae.decode=function(le,ue){le instanceof $Reader||(le=$Reader.create(le));for(var he=ue===void 0?le.len:le.pos+ue,fe=new $root.tensorflow.magenta.NoteSequence.PitchBend;le.pos<he;){var me=le.uint32();switch(me>>>3){case 1:fe.time=le.double();break;case 2:fe.bend=le.int32();break;case 3:fe.instrument=le.int32();break;case 4:fe.program=le.int32();break;case 5:fe.isDrum=le.bool();break;default:le.skipType(me&7);break}}return fe},ae.decodeDelimited=function(le){return le instanceof $Reader||(le=new $Reader(le)),this.decode(le,le.uint32())},ae.verify=function(le){return typeof le!="object"||le===null?"object expected":le.time!=null&&le.hasOwnProperty("time")&&typeof le.time!="number"?"time: number expected":le.bend!=null&&le.hasOwnProperty("bend")&&!$util.isInteger(le.bend)?"bend: integer expected":le.instrument!=null&&le.hasOwnProperty("instrument")&&!$util.isInteger(le.instrument)?"instrument: integer expected":le.program!=null&&le.hasOwnProperty("program")&&!$util.isInteger(le.program)?"program: integer expected":le.isDrum!=null&&le.hasOwnProperty("isDrum")&&typeof le.isDrum!="boolean"?"isDrum: boolean expected":null},ae.fromObject=function(le){if(le instanceof $root.tensorflow.magenta.NoteSequence.PitchBend)return le;var ue=new $root.tensorflow.magenta.NoteSequence.PitchBend;return le.time!=null&&(ue.time=Number(le.time)),le.bend!=null&&(ue.bend=le.bend|0),le.instrument!=null&&(ue.instrument=le.instrument|0),le.program!=null&&(ue.program=le.program|0),le.isDrum!=null&&(ue.isDrum=!!le.isDrum),ue},ae.toObject=function(le,ue){ue||(ue={});var he={};return ue.defaults&&(he.time=0,he.bend=0,he.instrument=0,he.program=0,he.isDrum=!1),le.time!=null&&le.hasOwnProperty("time")&&(he.time=ue.json&&!isFinite(le.time)?String(le.time):le.time),le.bend!=null&&le.hasOwnProperty("bend")&&(he.bend=le.bend),le.instrument!=null&&le.hasOwnProperty("instrument")&&(he.instrument=le.instrument),le.program!=null&&le.hasOwnProperty("program")&&(he.program=le.program),le.isDrum!=null&&le.hasOwnProperty("isDrum")&&(he.isDrum=le.isDrum),he},ae.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ae}(),ne.ControlChange=function(){function ae(ce){if(ce)for(var le=Object.keys(ce),ue=0;ue<le.length;++ue)ce[le[ue]]!=null&&(this[le[ue]]=ce[le[ue]])}return ae.prototype.time=0,ae.prototype.quantizedStep=$util.Long?$util.Long.fromBits(0,0,!1):0,ae.prototype.controlNumber=0,ae.prototype.controlValue=0,ae.prototype.instrument=0,ae.prototype.program=0,ae.prototype.isDrum=!1,ae.create=function(le){return new ae(le)},ae.encode=function(le,ue){return ue||(ue=$Writer.create()),le.time!=null&&le.hasOwnProperty("time")&&ue.uint32(9).double(le.time),le.controlNumber!=null&&le.hasOwnProperty("controlNumber")&&ue.uint32(16).int32(le.controlNumber),le.controlValue!=null&&le.hasOwnProperty("controlValue")&&ue.uint32(24).int32(le.controlValue),le.instrument!=null&&le.hasOwnProperty("instrument")&&ue.uint32(32).int32(le.instrument),le.program!=null&&le.hasOwnProperty("program")&&ue.uint32(40).int32(le.program),le.isDrum!=null&&le.hasOwnProperty("isDrum")&&ue.uint32(48).bool(le.isDrum),le.quantizedStep!=null&&le.hasOwnProperty("quantizedStep")&&ue.uint32(56).int64(le.quantizedStep),ue},ae.encodeDelimited=function(le,ue){return this.encode(le,ue).ldelim()},ae.decode=function(le,ue){le instanceof $Reader||(le=$Reader.create(le));for(var he=ue===void 0?le.len:le.pos+ue,fe=new $root.tensorflow.magenta.NoteSequence.ControlChange;le.pos<he;){var me=le.uint32();switch(me>>>3){case 1:fe.time=le.double();break;case 7:fe.quantizedStep=$util.Long?le.int64().toNumber():le.int64();break;case 2:fe.controlNumber=le.int32();break;case 3:fe.controlValue=le.int32();break;case 4:fe.instrument=le.int32();break;case 5:fe.program=le.int32();break;case 6:fe.isDrum=le.bool();break;default:le.skipType(me&7);break}}return fe},ae.decodeDelimited=function(le){return le instanceof $Reader||(le=new $Reader(le)),this.decode(le,le.uint32())},ae.verify=function(le){return typeof le!="object"||le===null?"object expected":le.time!=null&&le.hasOwnProperty("time")&&typeof le.time!="number"?"time: number expected":le.quantizedStep!=null&&le.hasOwnProperty("quantizedStep")&&!$util.isInteger(le.quantizedStep)&&!(le.quantizedStep&&$util.isInteger(le.quantizedStep.low)&&$util.isInteger(le.quantizedStep.high))?"quantizedStep: integer|Long expected":le.controlNumber!=null&&le.hasOwnProperty("controlNumber")&&!$util.isInteger(le.controlNumber)?"controlNumber: integer expected":le.controlValue!=null&&le.hasOwnProperty("controlValue")&&!$util.isInteger(le.controlValue)?"controlValue: integer expected":le.instrument!=null&&le.hasOwnProperty("instrument")&&!$util.isInteger(le.instrument)?"instrument: integer expected":le.program!=null&&le.hasOwnProperty("program")&&!$util.isInteger(le.program)?"program: integer expected":le.isDrum!=null&&le.hasOwnProperty("isDrum")&&typeof le.isDrum!="boolean"?"isDrum: boolean expected":null},ae.fromObject=function(le){if(le instanceof $root.tensorflow.magenta.NoteSequence.ControlChange)return le;var ue=new $root.tensorflow.magenta.NoteSequence.ControlChange;return le.time!=null&&(ue.time=Number(le.time)),le.quantizedStep!=null&&($util.Long?(ue.quantizedStep=$util.Long.fromValue(le.quantizedStep)).unsigned=!1:typeof le.quantizedStep=="string"?ue.quantizedStep=parseInt(le.quantizedStep,10):typeof le.quantizedStep=="number"?ue.quantizedStep=le.quantizedStep:typeof le.quantizedStep=="object"&&(ue.quantizedStep=new $util.LongBits(le.quantizedStep.low>>>0,le.quantizedStep.high>>>0).toNumber())),le.controlNumber!=null&&(ue.controlNumber=le.controlNumber|0),le.controlValue!=null&&(ue.controlValue=le.controlValue|0),le.instrument!=null&&(ue.instrument=le.instrument|0),le.program!=null&&(ue.program=le.program|0),le.isDrum!=null&&(ue.isDrum=!!le.isDrum),ue},ae.toObject=function(le,ue){ue||(ue={});var he={};if(ue.defaults)if(he.time=0,he.controlNumber=0,he.controlValue=0,he.instrument=0,he.program=0,he.isDrum=!1,$util.Long){var fe=new $util.Long(0,0,!1);he.quantizedStep=ue.longs===String?fe.toString():ue.longs===Number?fe.toNumber():fe}else he.quantizedStep=ue.longs===String?"0":0;return le.time!=null&&le.hasOwnProperty("time")&&(he.time=ue.json&&!isFinite(le.time)?String(le.time):le.time),le.controlNumber!=null&&le.hasOwnProperty("controlNumber")&&(he.controlNumber=le.controlNumber),le.controlValue!=null&&le.hasOwnProperty("controlValue")&&(he.controlValue=le.controlValue),le.instrument!=null&&le.hasOwnProperty("instrument")&&(he.instrument=le.instrument),le.program!=null&&le.hasOwnProperty("program")&&(he.program=le.program),le.isDrum!=null&&le.hasOwnProperty("isDrum")&&(he.isDrum=le.isDrum),le.quantizedStep!=null&&le.hasOwnProperty("quantizedStep")&&(typeof le.quantizedStep=="number"?he.quantizedStep=ue.longs===String?String(le.quantizedStep):le.quantizedStep:he.quantizedStep=ue.longs===String?$util.Long.prototype.toString.call(le.quantizedStep):ue.longs===Number?new $util.LongBits(le.quantizedStep.low>>>0,le.quantizedStep.high>>>0).toNumber():le.quantizedStep),he},ae.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ae}(),ne.PartInfo=function(){function ae(ce){if(ce)for(var le=Object.keys(ce),ue=0;ue<le.length;++ue)ce[le[ue]]!=null&&(this[le[ue]]=ce[le[ue]])}return ae.prototype.part=0,ae.prototype.name="",ae.create=function(le){return new ae(le)},ae.encode=function(le,ue){return ue||(ue=$Writer.create()),le.part!=null&&le.hasOwnProperty("part")&&ue.uint32(8).int32(le.part),le.name!=null&&le.hasOwnProperty("name")&&ue.uint32(18).string(le.name),ue},ae.encodeDelimited=function(le,ue){return this.encode(le,ue).ldelim()},ae.decode=function(le,ue){le instanceof $Reader||(le=$Reader.create(le));for(var he=ue===void 0?le.len:le.pos+ue,fe=new $root.tensorflow.magenta.NoteSequence.PartInfo;le.pos<he;){var me=le.uint32();switch(me>>>3){case 1:fe.part=le.int32();break;case 2:fe.name=le.string();break;default:le.skipType(me&7);break}}return fe},ae.decodeDelimited=function(le){return le instanceof $Reader||(le=new $Reader(le)),this.decode(le,le.uint32())},ae.verify=function(le){return typeof le!="object"||le===null?"object expected":le.part!=null&&le.hasOwnProperty("part")&&!$util.isInteger(le.part)?"part: integer expected":le.name!=null&&le.hasOwnProperty("name")&&!$util.isString(le.name)?"name: string expected":null},ae.fromObject=function(le){if(le instanceof $root.tensorflow.magenta.NoteSequence.PartInfo)return le;var ue=new $root.tensorflow.magenta.NoteSequence.PartInfo;return le.part!=null&&(ue.part=le.part|0),le.name!=null&&(ue.name=String(le.name)),ue},ae.toObject=function(le,ue){ue||(ue={});var he={};return ue.defaults&&(he.part=0,he.name=""),le.part!=null&&le.hasOwnProperty("part")&&(he.part=le.part),le.name!=null&&le.hasOwnProperty("name")&&(he.name=le.name),he},ae.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ae}(),ne.SourceInfo=function(){function ae(ce){if(ce)for(var le=Object.keys(ce),ue=0;ue<le.length;++ue)ce[le[ue]]!=null&&(this[le[ue]]=ce[le[ue]])}return ae.prototype.sourceType=0,ae.prototype.encodingType=0,ae.prototype.parser=0,ae.create=function(le){return new ae(le)},ae.encode=function(le,ue){return ue||(ue=$Writer.create()),le.sourceType!=null&&le.hasOwnProperty("sourceType")&&ue.uint32(8).int32(le.sourceType),le.encodingType!=null&&le.hasOwnProperty("encodingType")&&ue.uint32(16).int32(le.encodingType),le.parser!=null&&le.hasOwnProperty("parser")&&ue.uint32(24).int32(le.parser),ue},ae.encodeDelimited=function(le,ue){return this.encode(le,ue).ldelim()},ae.decode=function(le,ue){le instanceof $Reader||(le=$Reader.create(le));for(var he=ue===void 0?le.len:le.pos+ue,fe=new $root.tensorflow.magenta.NoteSequence.SourceInfo;le.pos<he;){var me=le.uint32();switch(me>>>3){case 1:fe.sourceType=le.int32();break;case 2:fe.encodingType=le.int32();break;case 3:fe.parser=le.int32();break;default:le.skipType(me&7);break}}return fe},ae.decodeDelimited=function(le){return le instanceof $Reader||(le=new $Reader(le)),this.decode(le,le.uint32())},ae.verify=function(le){if(typeof le!="object"||le===null)return"object expected";if(le.sourceType!=null&&le.hasOwnProperty("sourceType"))switch(le.sourceType){default:return"sourceType: enum value expected";case 0:case 1:case 2:break}if(le.encodingType!=null&&le.hasOwnProperty("encodingType"))switch(le.encodingType){default:return"encodingType: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(le.parser!=null&&le.hasOwnProperty("parser"))switch(le.parser){default:return"parser: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:break}return null},ae.fromObject=function(le){if(le instanceof $root.tensorflow.magenta.NoteSequence.SourceInfo)return le;var ue=new $root.tensorflow.magenta.NoteSequence.SourceInfo;switch(le.sourceType){case"UNKNOWN_SOURCE_TYPE":case 0:ue.sourceType=0;break;case"SCORE_BASED":case 1:ue.sourceType=1;break;case"PERFORMANCE_BASED":case 2:ue.sourceType=2;break}switch(le.encodingType){case"UNKNOWN_ENCODING_TYPE":case 0:ue.encodingType=0;break;case"MUSIC_XML":case 1:ue.encodingType=1;break;case"ABC":case 2:ue.encodingType=2;break;case"MIDI":case 3:ue.encodingType=3;break;case"MUSICNET":case 4:ue.encodingType=4;break}switch(le.parser){case"UNKNOWN_PARSER":case 0:ue.parser=0;break;case"MUSIC21":case 1:ue.parser=1;break;case"PRETTY_MIDI":case 2:ue.parser=2;break;case"MAGENTA_MUSIC_XML":case 3:ue.parser=3;break;case"MAGENTA_MUSICNET":case 4:ue.parser=4;break;case"MAGENTA_ABC":case 5:ue.parser=5;break;case"TONEJS_MIDI_CONVERT":case 6:ue.parser=6;break}return ue},ae.toObject=function(le,ue){ue||(ue={});var he={};return ue.defaults&&(he.sourceType=ue.enums===String?"UNKNOWN_SOURCE_TYPE":0,he.encodingType=ue.enums===String?"UNKNOWN_ENCODING_TYPE":0,he.parser=ue.enums===String?"UNKNOWN_PARSER":0),le.sourceType!=null&&le.hasOwnProperty("sourceType")&&(he.sourceType=ue.enums===String?$root.tensorflow.magenta.NoteSequence.SourceInfo.SourceType[le.sourceType]:le.sourceType),le.encodingType!=null&&le.hasOwnProperty("encodingType")&&(he.encodingType=ue.enums===String?$root.tensorflow.magenta.NoteSequence.SourceInfo.EncodingType[le.encodingType]:le.encodingType),le.parser!=null&&le.hasOwnProperty("parser")&&(he.parser=ue.enums===String?$root.tensorflow.magenta.NoteSequence.SourceInfo.Parser[le.parser]:le.parser),he},ae.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ae.SourceType=function(){var ce={},le=Object.create(ce);return le[ce[0]="UNKNOWN_SOURCE_TYPE"]=0,le[ce[1]="SCORE_BASED"]=1,le[ce[2]="PERFORMANCE_BASED"]=2,le}(),ae.EncodingType=function(){var ce={},le=Object.create(ce);return le[ce[0]="UNKNOWN_ENCODING_TYPE"]=0,le[ce[1]="MUSIC_XML"]=1,le[ce[2]="ABC"]=2,le[ce[3]="MIDI"]=3,le[ce[4]="MUSICNET"]=4,le}(),ae.Parser=function(){var ce={},le=Object.create(ce);return le[ce[0]="UNKNOWN_PARSER"]=0,le[ce[1]="MUSIC21"]=1,le[ce[2]="PRETTY_MIDI"]=2,le[ce[3]="MAGENTA_MUSIC_XML"]=3,le[ce[4]="MAGENTA_MUSICNET"]=4,le[ce[5]="MAGENTA_ABC"]=5,le[ce[6]="TONEJS_MIDI_CONVERT"]=6,le}(),ae}(),ne.TextAnnotation=function(){function ae(ce){if(ce)for(var le=Object.keys(ce),ue=0;ue<le.length;++ue)ce[le[ue]]!=null&&(this[le[ue]]=ce[le[ue]])}return ae.prototype.time=0,ae.prototype.quantizedStep=$util.Long?$util.Long.fromBits(0,0,!1):0,ae.prototype.text="",ae.prototype.annotationType=0,ae.create=function(le){return new ae(le)},ae.encode=function(le,ue){return ue||(ue=$Writer.create()),le.time!=null&&le.hasOwnProperty("time")&&ue.uint32(9).double(le.time),le.text!=null&&le.hasOwnProperty("text")&&ue.uint32(18).string(le.text),le.annotationType!=null&&le.hasOwnProperty("annotationType")&&ue.uint32(24).int32(le.annotationType),le.quantizedStep!=null&&le.hasOwnProperty("quantizedStep")&&ue.uint32(32).int64(le.quantizedStep),ue},ae.encodeDelimited=function(le,ue){return this.encode(le,ue).ldelim()},ae.decode=function(le,ue){le instanceof $Reader||(le=$Reader.create(le));for(var he=ue===void 0?le.len:le.pos+ue,fe=new $root.tensorflow.magenta.NoteSequence.TextAnnotation;le.pos<he;){var me=le.uint32();switch(me>>>3){case 1:fe.time=le.double();break;case 4:fe.quantizedStep=$util.Long?le.int64().toNumber():le.int64();break;case 2:fe.text=le.string();break;case 3:fe.annotationType=le.int32();break;default:le.skipType(me&7);break}}return fe},ae.decodeDelimited=function(le){return le instanceof $Reader||(le=new $Reader(le)),this.decode(le,le.uint32())},ae.verify=function(le){if(typeof le!="object"||le===null)return"object expected";if(le.time!=null&&le.hasOwnProperty("time")&&typeof le.time!="number")return"time: number expected";if(le.quantizedStep!=null&&le.hasOwnProperty("quantizedStep")&&!$util.isInteger(le.quantizedStep)&&!(le.quantizedStep&&$util.isInteger(le.quantizedStep.low)&&$util.isInteger(le.quantizedStep.high)))return"quantizedStep: integer|Long expected";if(le.text!=null&&le.hasOwnProperty("text")&&!$util.isString(le.text))return"text: string expected";if(le.annotationType!=null&&le.hasOwnProperty("annotationType"))switch(le.annotationType){default:return"annotationType: enum value expected";case 0:case 1:case 2:break}return null},ae.fromObject=function(le){if(le instanceof $root.tensorflow.magenta.NoteSequence.TextAnnotation)return le;var ue=new $root.tensorflow.magenta.NoteSequence.TextAnnotation;switch(le.time!=null&&(ue.time=Number(le.time)),le.quantizedStep!=null&&($util.Long?(ue.quantizedStep=$util.Long.fromValue(le.quantizedStep)).unsigned=!1:typeof le.quantizedStep=="string"?ue.quantizedStep=parseInt(le.quantizedStep,10):typeof le.quantizedStep=="number"?ue.quantizedStep=le.quantizedStep:typeof le.quantizedStep=="object"&&(ue.quantizedStep=new $util.LongBits(le.quantizedStep.low>>>0,le.quantizedStep.high>>>0).toNumber())),le.text!=null&&(ue.text=String(le.text)),le.annotationType){case"UNKNOWN":case 0:ue.annotationType=0;break;case"CHORD_SYMBOL":case 1:ue.annotationType=1;break;case"BEAT":case 2:ue.annotationType=2;break}return ue},ae.toObject=function(le,ue){ue||(ue={});var he={};if(ue.defaults)if(he.time=0,he.text="",he.annotationType=ue.enums===String?"UNKNOWN":0,$util.Long){var fe=new $util.Long(0,0,!1);he.quantizedStep=ue.longs===String?fe.toString():ue.longs===Number?fe.toNumber():fe}else he.quantizedStep=ue.longs===String?"0":0;return le.time!=null&&le.hasOwnProperty("time")&&(he.time=ue.json&&!isFinite(le.time)?String(le.time):le.time),le.text!=null&&le.hasOwnProperty("text")&&(he.text=le.text),le.annotationType!=null&&le.hasOwnProperty("annotationType")&&(he.annotationType=ue.enums===String?$root.tensorflow.magenta.NoteSequence.TextAnnotation.TextAnnotationType[le.annotationType]:le.annotationType),le.quantizedStep!=null&&le.hasOwnProperty("quantizedStep")&&(typeof le.quantizedStep=="number"?he.quantizedStep=ue.longs===String?String(le.quantizedStep):le.quantizedStep:he.quantizedStep=ue.longs===String?$util.Long.prototype.toString.call(le.quantizedStep):ue.longs===Number?new $util.LongBits(le.quantizedStep.low>>>0,le.quantizedStep.high>>>0).toNumber():le.quantizedStep),he},ae.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ae.TextAnnotationType=function(){var ce={},le=Object.create(ce);return le[ce[0]="UNKNOWN"]=0,le[ce[1]="CHORD_SYMBOL"]=1,le[ce[2]="BEAT"]=2,le}(),ae}(),ne.QuantizationInfo=function(){function ae(le){if(le)for(var ue=Object.keys(le),he=0;he<ue.length;++he)le[ue[he]]!=null&&(this[ue[he]]=le[ue[he]])}ae.prototype.stepsPerQuarter=0,ae.prototype.stepsPerSecond=0;var ce;return Object.defineProperty(ae.prototype,"resolution",{get:$util.oneOfGetter(ce=["stepsPerQuarter","stepsPerSecond"]),set:$util.oneOfSetter(ce)}),ae.create=function(ue){return new ae(ue)},ae.encode=function(ue,he){return he||(he=$Writer.create()),ue.stepsPerQuarter!=null&&ue.hasOwnProperty("stepsPerQuarter")&&he.uint32(8).int32(ue.stepsPerQuarter),ue.stepsPerSecond!=null&&ue.hasOwnProperty("stepsPerSecond")&&he.uint32(16).int32(ue.stepsPerSecond),he},ae.encodeDelimited=function(ue,he){return this.encode(ue,he).ldelim()},ae.decode=function(ue,he){ue instanceof $Reader||(ue=$Reader.create(ue));for(var fe=he===void 0?ue.len:ue.pos+he,me=new $root.tensorflow.magenta.NoteSequence.QuantizationInfo;ue.pos<fe;){var ge=ue.uint32();switch(ge>>>3){case 1:me.stepsPerQuarter=ue.int32();break;case 2:me.stepsPerSecond=ue.int32();break;default:ue.skipType(ge&7);break}}return me},ae.decodeDelimited=function(ue){return ue instanceof $Reader||(ue=new $Reader(ue)),this.decode(ue,ue.uint32())},ae.verify=function(ue){if(typeof ue!="object"||ue===null)return"object expected";var he={};if(ue.stepsPerQuarter!=null&&ue.hasOwnProperty("stepsPerQuarter")&&(he.resolution=1,!$util.isInteger(ue.stepsPerQuarter)))return"stepsPerQuarter: integer expected";if(ue.stepsPerSecond!=null&&ue.hasOwnProperty("stepsPerSecond")){if(he.resolution===1)return"resolution: multiple values";if(he.resolution=1,!$util.isInteger(ue.stepsPerSecond))return"stepsPerSecond: integer expected"}return null},ae.fromObject=function(ue){if(ue instanceof $root.tensorflow.magenta.NoteSequence.QuantizationInfo)return ue;var he=new $root.tensorflow.magenta.NoteSequence.QuantizationInfo;return ue.stepsPerQuarter!=null&&(he.stepsPerQuarter=ue.stepsPerQuarter|0),ue.stepsPerSecond!=null&&(he.stepsPerSecond=ue.stepsPerSecond|0),he},ae.toObject=function(ue,he){he||(he={});var fe={};return ue.stepsPerQuarter!=null&&ue.hasOwnProperty("stepsPerQuarter")&&(fe.stepsPerQuarter=ue.stepsPerQuarter,he.oneofs&&(fe.resolution="stepsPerQuarter")),ue.stepsPerSecond!=null&&ue.hasOwnProperty("stepsPerSecond")&&(fe.stepsPerSecond=ue.stepsPerSecond,he.oneofs&&(fe.resolution="stepsPerSecond")),fe},ae.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ae}(),ne.SubsequenceInfo=function(){function ae(ce){if(ce)for(var le=Object.keys(ce),ue=0;ue<le.length;++ue)ce[le[ue]]!=null&&(this[le[ue]]=ce[le[ue]])}return ae.prototype.startTimeOffset=0,ae.prototype.endTimeOffset=0,ae.create=function(le){return new ae(le)},ae.encode=function(le,ue){return ue||(ue=$Writer.create()),le.startTimeOffset!=null&&le.hasOwnProperty("startTimeOffset")&&ue.uint32(9).double(le.startTimeOffset),le.endTimeOffset!=null&&le.hasOwnProperty("endTimeOffset")&&ue.uint32(17).double(le.endTimeOffset),ue},ae.encodeDelimited=function(le,ue){return this.encode(le,ue).ldelim()},ae.decode=function(le,ue){le instanceof $Reader||(le=$Reader.create(le));for(var he=ue===void 0?le.len:le.pos+ue,fe=new $root.tensorflow.magenta.NoteSequence.SubsequenceInfo;le.pos<he;){var me=le.uint32();switch(me>>>3){case 1:fe.startTimeOffset=le.double();break;case 2:fe.endTimeOffset=le.double();break;default:le.skipType(me&7);break}}return fe},ae.decodeDelimited=function(le){return le instanceof $Reader||(le=new $Reader(le)),this.decode(le,le.uint32())},ae.verify=function(le){return typeof le!="object"||le===null?"object expected":le.startTimeOffset!=null&&le.hasOwnProperty("startTimeOffset")&&typeof le.startTimeOffset!="number"?"startTimeOffset: number expected":le.endTimeOffset!=null&&le.hasOwnProperty("endTimeOffset")&&typeof le.endTimeOffset!="number"?"endTimeOffset: number expected":null},ae.fromObject=function(le){if(le instanceof $root.tensorflow.magenta.NoteSequence.SubsequenceInfo)return le;var ue=new $root.tensorflow.magenta.NoteSequence.SubsequenceInfo;return le.startTimeOffset!=null&&(ue.startTimeOffset=Number(le.startTimeOffset)),le.endTimeOffset!=null&&(ue.endTimeOffset=Number(le.endTimeOffset)),ue},ae.toObject=function(le,ue){ue||(ue={});var he={};return ue.defaults&&(he.startTimeOffset=0,he.endTimeOffset=0),le.startTimeOffset!=null&&le.hasOwnProperty("startTimeOffset")&&(he.startTimeOffset=ue.json&&!isFinite(le.startTimeOffset)?String(le.startTimeOffset):le.startTimeOffset),le.endTimeOffset!=null&&le.hasOwnProperty("endTimeOffset")&&(he.endTimeOffset=ue.json&&!isFinite(le.endTimeOffset)?String(le.endTimeOffset):le.endTimeOffset),he},ae.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ae}(),ne.SectionAnnotation=function(){function ae(ce){if(ce)for(var le=Object.keys(ce),ue=0;ue<le.length;++ue)ce[le[ue]]!=null&&(this[le[ue]]=ce[le[ue]])}return ae.prototype.time=0,ae.prototype.sectionId=$util.Long?$util.Long.fromBits(0,0,!1):0,ae.create=function(le){return new ae(le)},ae.encode=function(le,ue){return ue||(ue=$Writer.create()),le.time!=null&&le.hasOwnProperty("time")&&ue.uint32(9).double(le.time),le.sectionId!=null&&le.hasOwnProperty("sectionId")&&ue.uint32(32).int64(le.sectionId),ue},ae.encodeDelimited=function(le,ue){return this.encode(le,ue).ldelim()},ae.decode=function(le,ue){le instanceof $Reader||(le=$Reader.create(le));for(var he=ue===void 0?le.len:le.pos+ue,fe=new $root.tensorflow.magenta.NoteSequence.SectionAnnotation;le.pos<he;){var me=le.uint32();switch(me>>>3){case 1:fe.time=le.double();break;case 4:fe.sectionId=$util.Long?le.int64().toNumber():le.int64();break;default:le.skipType(me&7);break}}return fe},ae.decodeDelimited=function(le){return le instanceof $Reader||(le=new $Reader(le)),this.decode(le,le.uint32())},ae.verify=function(le){return typeof le!="object"||le===null?"object expected":le.time!=null&&le.hasOwnProperty("time")&&typeof le.time!="number"?"time: number expected":le.sectionId!=null&&le.hasOwnProperty("sectionId")&&!$util.isInteger(le.sectionId)&&!(le.sectionId&&$util.isInteger(le.sectionId.low)&&$util.isInteger(le.sectionId.high))?"sectionId: integer|Long expected":null},ae.fromObject=function(le){if(le instanceof $root.tensorflow.magenta.NoteSequence.SectionAnnotation)return le;var ue=new $root.tensorflow.magenta.NoteSequence.SectionAnnotation;return le.time!=null&&(ue.time=Number(le.time)),le.sectionId!=null&&($util.Long?(ue.sectionId=$util.Long.fromValue(le.sectionId)).unsigned=!1:typeof le.sectionId=="string"?ue.sectionId=parseInt(le.sectionId,10):typeof le.sectionId=="number"?ue.sectionId=le.sectionId:typeof le.sectionId=="object"&&(ue.sectionId=new $util.LongBits(le.sectionId.low>>>0,le.sectionId.high>>>0).toNumber())),ue},ae.toObject=function(le,ue){ue||(ue={});var he={};if(ue.defaults)if(he.time=0,$util.Long){var fe=new $util.Long(0,0,!1);he.sectionId=ue.longs===String?fe.toString():ue.longs===Number?fe.toNumber():fe}else he.sectionId=ue.longs===String?"0":0;return le.time!=null&&le.hasOwnProperty("time")&&(he.time=ue.json&&!isFinite(le.time)?String(le.time):le.time),le.sectionId!=null&&le.hasOwnProperty("sectionId")&&(typeof le.sectionId=="number"?he.sectionId=ue.longs===String?String(le.sectionId):le.sectionId:he.sectionId=ue.longs===String?$util.Long.prototype.toString.call(le.sectionId):ue.longs===Number?new $util.LongBits(le.sectionId.low>>>0,le.sectionId.high>>>0).toNumber():le.sectionId),he},ae.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ae}(),ne.Section=function(){function ae(le){if(le)for(var ue=Object.keys(le),he=0;he<ue.length;++he)le[ue[he]]!=null&&(this[ue[he]]=le[ue[he]])}ae.prototype.sectionId=$util.Long?$util.Long.fromBits(0,0,!1):0,ae.prototype.sectionGroup=null;var ce;return Object.defineProperty(ae.prototype,"sectionType",{get:$util.oneOfGetter(ce=["sectionId","sectionGroup"]),set:$util.oneOfSetter(ce)}),ae.create=function(ue){return new ae(ue)},ae.encode=function(ue,he){return he||(he=$Writer.create()),ue.sectionId!=null&&ue.hasOwnProperty("sectionId")&&he.uint32(8).int64(ue.sectionId),ue.sectionGroup!=null&&ue.hasOwnProperty("sectionGroup")&&$root.tensorflow.magenta.NoteSequence.SectionGroup.encode(ue.sectionGroup,he.uint32(18).fork()).ldelim(),he},ae.encodeDelimited=function(ue,he){return this.encode(ue,he).ldelim()},ae.decode=function(ue,he){ue instanceof $Reader||(ue=$Reader.create(ue));for(var fe=he===void 0?ue.len:ue.pos+he,me=new $root.tensorflow.magenta.NoteSequence.Section;ue.pos<fe;){var ge=ue.uint32();switch(ge>>>3){case 1:me.sectionId=$util.Long?ue.int64().toNumber():ue.int64();break;case 2:me.sectionGroup=$root.tensorflow.magenta.NoteSequence.SectionGroup.decode(ue,ue.uint32());break;default:ue.skipType(ge&7);break}}return me},ae.decodeDelimited=function(ue){return ue instanceof $Reader||(ue=new $Reader(ue)),this.decode(ue,ue.uint32())},ae.verify=function(ue){if(typeof ue!="object"||ue===null)return"object expected";var he={};if(ue.sectionId!=null&&ue.hasOwnProperty("sectionId")&&(he.sectionType=1,!$util.isInteger(ue.sectionId)&&!(ue.sectionId&&$util.isInteger(ue.sectionId.low)&&$util.isInteger(ue.sectionId.high))))return"sectionId: integer|Long expected";if(ue.sectionGroup!=null&&ue.hasOwnProperty("sectionGroup")){if(he.sectionType===1)return"sectionType: multiple values";he.sectionType=1;{var fe=$root.tensorflow.magenta.NoteSequence.SectionGroup.verify(ue.sectionGroup);if(fe)return"sectionGroup."+fe}}return null},ae.fromObject=function(ue){if(ue instanceof $root.tensorflow.magenta.NoteSequence.Section)return ue;var he=new $root.tensorflow.magenta.NoteSequence.Section;if(ue.sectionId!=null&&($util.Long?(he.sectionId=$util.Long.fromValue(ue.sectionId)).unsigned=!1:typeof ue.sectionId=="string"?he.sectionId=parseInt(ue.sectionId,10):typeof ue.sectionId=="number"?he.sectionId=ue.sectionId:typeof ue.sectionId=="object"&&(he.sectionId=new $util.LongBits(ue.sectionId.low>>>0,ue.sectionId.high>>>0).toNumber())),ue.sectionGroup!=null){if(typeof ue.sectionGroup!="object")throw TypeError(".tensorflow.magenta.NoteSequence.Section.sectionGroup: object expected");he.sectionGroup=$root.tensorflow.magenta.NoteSequence.SectionGroup.fromObject(ue.sectionGroup)}return he},ae.toObject=function(ue,he){he||(he={});var fe={};return ue.sectionId!=null&&ue.hasOwnProperty("sectionId")&&(typeof ue.sectionId=="number"?fe.sectionId=he.longs===String?String(ue.sectionId):ue.sectionId:fe.sectionId=he.longs===String?$util.Long.prototype.toString.call(ue.sectionId):he.longs===Number?new $util.LongBits(ue.sectionId.low>>>0,ue.sectionId.high>>>0).toNumber():ue.sectionId,he.oneofs&&(fe.sectionType="sectionId")),ue.sectionGroup!=null&&ue.hasOwnProperty("sectionGroup")&&(fe.sectionGroup=$root.tensorflow.magenta.NoteSequence.SectionGroup.toObject(ue.sectionGroup,he),he.oneofs&&(fe.sectionType="sectionGroup")),fe},ae.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ae}(),ne.SectionGroup=function(){function ae(ce){if(this.sections=[],ce)for(var le=Object.keys(ce),ue=0;ue<le.length;++ue)ce[le[ue]]!=null&&(this[le[ue]]=ce[le[ue]])}return ae.prototype.sections=$util.emptyArray,ae.prototype.numTimes=0,ae.create=function(le){return new ae(le)},ae.encode=function(le,ue){if(ue||(ue=$Writer.create()),le.sections!=null&&le.sections.length)for(var he=0;he<le.sections.length;++he)$root.tensorflow.magenta.NoteSequence.Section.encode(le.sections[he],ue.uint32(10).fork()).ldelim();return le.numTimes!=null&&le.hasOwnProperty("numTimes")&&ue.uint32(16).int32(le.numTimes),ue},ae.encodeDelimited=function(le,ue){return this.encode(le,ue).ldelim()},ae.decode=function(le,ue){le instanceof $Reader||(le=$Reader.create(le));for(var he=ue===void 0?le.len:le.pos+ue,fe=new $root.tensorflow.magenta.NoteSequence.SectionGroup;le.pos<he;){var me=le.uint32();switch(me>>>3){case 1:fe.sections&&fe.sections.length||(fe.sections=[]),fe.sections.push($root.tensorflow.magenta.NoteSequence.Section.decode(le,le.uint32()));break;case 2:fe.numTimes=le.int32();break;default:le.skipType(me&7);break}}return fe},ae.decodeDelimited=function(le){return le instanceof $Reader||(le=new $Reader(le)),this.decode(le,le.uint32())},ae.verify=function(le){if(typeof le!="object"||le===null)return"object expected";if(le.sections!=null&&le.hasOwnProperty("sections")){if(!Array.isArray(le.sections))return"sections: array expected";for(var ue=0;ue<le.sections.length;++ue){var he=$root.tensorflow.magenta.NoteSequence.Section.verify(le.sections[ue]);if(he)return"sections."+he}}return le.numTimes!=null&&le.hasOwnProperty("numTimes")&&!$util.isInteger(le.numTimes)?"numTimes: integer expected":null},ae.fromObject=function(le){if(le instanceof $root.tensorflow.magenta.NoteSequence.SectionGroup)return le;var ue=new $root.tensorflow.magenta.NoteSequence.SectionGroup;if(le.sections){if(!Array.isArray(le.sections))throw TypeError(".tensorflow.magenta.NoteSequence.SectionGroup.sections: array expected");ue.sections=[];for(var he=0;he<le.sections.length;++he){if(typeof le.sections[he]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.SectionGroup.sections: object expected");ue.sections[he]=$root.tensorflow.magenta.NoteSequence.Section.fromObject(le.sections[he])}}return le.numTimes!=null&&(ue.numTimes=le.numTimes|0),ue},ae.toObject=function(le,ue){ue||(ue={});var he={};if((ue.arrays||ue.defaults)&&(he.sections=[]),ue.defaults&&(he.numTimes=0),le.sections&&le.sections.length){he.sections=[];for(var fe=0;fe<le.sections.length;++fe)he.sections[fe]=$root.tensorflow.magenta.NoteSequence.Section.toObject(le.sections[fe],ue)}return le.numTimes!=null&&le.hasOwnProperty("numTimes")&&(he.numTimes=le.numTimes),he},ae.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ae}(),ne}(),ee.SequenceMetadata=function(){function ne(ae){if(this.genre=[],this.composers=[],ae)for(var ce=Object.keys(ae),le=0;le<ce.length;++le)ae[ce[le]]!=null&&(this[ce[le]]=ae[ce[le]])}return ne.prototype.title="",ne.prototype.artist="",ne.prototype.genre=$util.emptyArray,ne.prototype.composers=$util.emptyArray,ne.create=function(ce){return new ne(ce)},ne.encode=function(ce,le){if(le||(le=$Writer.create()),ce.title!=null&&ce.hasOwnProperty("title")&&le.uint32(10).string(ce.title),ce.artist!=null&&ce.hasOwnProperty("artist")&&le.uint32(18).string(ce.artist),ce.genre!=null&&ce.genre.length)for(var ue=0;ue<ce.genre.length;++ue)le.uint32(26).string(ce.genre[ue]);if(ce.composers!=null&&ce.composers.length)for(var ue=0;ue<ce.composers.length;++ue)le.uint32(34).string(ce.composers[ue]);return le},ne.encodeDelimited=function(ce,le){return this.encode(ce,le).ldelim()},ne.decode=function(ce,le){ce instanceof $Reader||(ce=$Reader.create(ce));for(var ue=le===void 0?ce.len:ce.pos+le,he=new $root.tensorflow.magenta.SequenceMetadata;ce.pos<ue;){var fe=ce.uint32();switch(fe>>>3){case 1:he.title=ce.string();break;case 2:he.artist=ce.string();break;case 3:he.genre&&he.genre.length||(he.genre=[]),he.genre.push(ce.string());break;case 4:he.composers&&he.composers.length||(he.composers=[]),he.composers.push(ce.string());break;default:ce.skipType(fe&7);break}}return he},ne.decodeDelimited=function(ce){return ce instanceof $Reader||(ce=new $Reader(ce)),this.decode(ce,ce.uint32())},ne.verify=function(ce){if(typeof ce!="object"||ce===null)return"object expected";if(ce.title!=null&&ce.hasOwnProperty("title")&&!$util.isString(ce.title))return"title: string expected";if(ce.artist!=null&&ce.hasOwnProperty("artist")&&!$util.isString(ce.artist))return"artist: string expected";if(ce.genre!=null&&ce.hasOwnProperty("genre")){if(!Array.isArray(ce.genre))return"genre: array expected";for(var le=0;le<ce.genre.length;++le)if(!$util.isString(ce.genre[le]))return"genre: string[] expected"}if(ce.composers!=null&&ce.hasOwnProperty("composers")){if(!Array.isArray(ce.composers))return"composers: array expected";for(var le=0;le<ce.composers.length;++le)if(!$util.isString(ce.composers[le]))return"composers: string[] expected"}return null},ne.fromObject=function(ce){if(ce instanceof $root.tensorflow.magenta.SequenceMetadata)return ce;var le=new $root.tensorflow.magenta.SequenceMetadata;if(ce.title!=null&&(le.title=String(ce.title)),ce.artist!=null&&(le.artist=String(ce.artist)),ce.genre){if(!Array.isArray(ce.genre))throw TypeError(".tensorflow.magenta.SequenceMetadata.genre: array expected");le.genre=[];for(var ue=0;ue<ce.genre.length;++ue)le.genre[ue]=String(ce.genre[ue])}if(ce.composers){if(!Array.isArray(ce.composers))throw TypeError(".tensorflow.magenta.SequenceMetadata.composers: array expected");le.composers=[];for(var ue=0;ue<ce.composers.length;++ue)le.composers[ue]=String(ce.composers[ue])}return le},ne.toObject=function(ce,le){le||(le={});var ue={};if((le.arrays||le.defaults)&&(ue.genre=[],ue.composers=[]),le.defaults&&(ue.title="",ue.artist=""),ce.title!=null&&ce.hasOwnProperty("title")&&(ue.title=ce.title),ce.artist!=null&&ce.hasOwnProperty("artist")&&(ue.artist=ce.artist),ce.genre&&ce.genre.length){ue.genre=[];for(var he=0;he<ce.genre.length;++he)ue.genre[he]=ce.genre[he]}if(ce.composers&&ce.composers.length){ue.composers=[];for(var he=0;he<ce.composers.length;++he)ue.composers[he]=ce.composers[he]}return ue},ne.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ne}(),ee.VelocityRange=function(){function ne(ae){if(ae)for(var ce=Object.keys(ae),le=0;le<ce.length;++le)ae[ce[le]]!=null&&(this[ce[le]]=ae[ce[le]])}return ne.prototype.min=0,ne.prototype.max=0,ne.create=function(ce){return new ne(ce)},ne.encode=function(ce,le){return le||(le=$Writer.create()),ce.min!=null&&ce.hasOwnProperty("min")&&le.uint32(8).int32(ce.min),ce.max!=null&&ce.hasOwnProperty("max")&&le.uint32(16).int32(ce.max),le},ne.encodeDelimited=function(ce,le){return this.encode(ce,le).ldelim()},ne.decode=function(ce,le){ce instanceof $Reader||(ce=$Reader.create(ce));for(var ue=le===void 0?ce.len:ce.pos+le,he=new $root.tensorflow.magenta.VelocityRange;ce.pos<ue;){var fe=ce.uint32();switch(fe>>>3){case 1:he.min=ce.int32();break;case 2:he.max=ce.int32();break;default:ce.skipType(fe&7);break}}return he},ne.decodeDelimited=function(ce){return ce instanceof $Reader||(ce=new $Reader(ce)),this.decode(ce,ce.uint32())},ne.verify=function(ce){return typeof ce!="object"||ce===null?"object expected":ce.min!=null&&ce.hasOwnProperty("min")&&!$util.isInteger(ce.min)?"min: integer expected":ce.max!=null&&ce.hasOwnProperty("max")&&!$util.isInteger(ce.max)?"max: integer expected":null},ne.fromObject=function(ce){if(ce instanceof $root.tensorflow.magenta.VelocityRange)return ce;var le=new $root.tensorflow.magenta.VelocityRange;return ce.min!=null&&(le.min=ce.min|0),ce.max!=null&&(le.max=ce.max|0),le},ne.toObject=function(ce,le){le||(le={});var ue={};return le.defaults&&(ue.min=0,ue.max=0),ce.min!=null&&ce.hasOwnProperty("min")&&(ue.min=ce.min),ce.max!=null&&ce.hasOwnProperty("max")&&(ue.max=ce.max),ue},ne.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ne}(),ee}(),re}();var proto=$root,NoteSequence=proto.tensorflow.magenta.NoteSequence,browser={exports:{}},hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(re,ee){var ne=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate globalThis object")};ne(),re.exports=ee=globalThis.fetch,globalThis.fetch&&(ee.default=globalThis.fetch.bind(globalThis)),ee.Headers=globalThis.Headers,ee.Request=globalThis.Request,ee.Response=globalThis.Response}(browser,browser.exports)),browser.exports}globalThis.process.hrtime();function getGlobalObject(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("cannot find the globalThis object")}const globalObject=getGlobalObject();globalObject.fetch.bind(globalObject);globalObject.performance;globalObject.navigator;const isSafari=!!globalObject.webkitOfflineAudioContext,isWorker=typeof globalObject.WorkerGlobalScope<"u";function getOfflineAudioContext(re){if(re=isSafari?44100:re,isWorker)throw new Error("Cannot use offline audio context in a web worker.");const ne=globalObject.webkitOfflineAudioContext;return isSafari?new ne(1,re,re):new globalObject.OfflineAudioContext(1,re,re)}const isNode$1=typeof globalThis<"u"&&typeof globalThis.process<"u",fetch$1=isNode$1?requireBrowser():window.fetch.bind(window);var Level;(function(re){re[re.NONE=0]="NONE",re[re.WARN=5]="WARN",re[re.INFO=10]="INFO",re[re.DEBUG=20]="DEBUG"})(Level||(Level={}));let verbosity=10;function log$1(re,ee="Magenta.js",ne=10){if(ne===0)throw Error("Logging level cannot be NONE.");verbosity>=ne&&(ne===5?console.warn:console.log)(`%c ${ee} `,"background:magenta; color:white",re)}class MultipleTempoException extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class QuantizationStatusException extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}function clone(re){return NoteSequence.decode(NoteSequence.encode(re).finish())}function getQuantizedTimeEvents(re){return re.controlChanges.concat(re.textAnnotations)}function assertSingleTempo(re){if(!(!re.tempos||re.tempos.length===0)){if(re.tempos.sort((ee,ne)=>ee.time-ne.time),re.tempos[0].time!==0&&re.tempos[0].qpm!==DEFAULT_QUARTERS_PER_MINUTE)throw new MultipleTempoException(`NoteSequence has an implicit tempo change from initial ${DEFAULT_QUARTERS_PER_MINUTE} qpm to ${re.tempos[0].qpm} qpm at ${re.tempos[0].time} seconds.`);for(let ee=1;ee<re.tempos.length;ee++)if(re.tempos[ee].qpm!==re.tempos[0].qpm)throw new MultipleTempoException(`NoteSequence has at least one tempo change from ${re.tempos[0].qpm} qpm to ${re.tempos[ee].qpm}qpm at ${re.tempos[ee].time} seconds.`)}}function isQuantizedSequence(re){return re.quantizationInfo&&(re.quantizationInfo.stepsPerQuarter>0||re.quantizationInfo.stepsPerSecond>0)}function isRelativeQuantizedSequence(re){return re.quantizationInfo&&re.quantizationInfo.stepsPerQuarter>0}function assertIsRelativeQuantizedSequence(re){if(!isRelativeQuantizedSequence(re))throw new QuantizationStatusException(`NoteSequence ${re.id} is not quantized or is quantized based on absolute timing`)}function unquantizeSequence(re,ee){assertIsRelativeQuantizedSequence(re),assertSingleTempo(re);const ne=clone(re);ee?ne.tempos&&ne.tempos.length>0?ne.tempos[0].qpm=ee:ne.tempos.push(NoteSequence.Tempo.create({time:0,qpm:ee})):ee=re.tempos&&re.tempos.length>0?ne.tempos[0].qpm:DEFAULT_QUARTERS_PER_MINUTE;const ae=ce=>ce/ne.quantizationInfo.stepsPerQuarter*(60/ee);return ne.totalTime=ae(ne.totalQuantizedSteps),ne.notes.forEach(ce=>{ce.startTime=ae(ce.quantizedStartStep),ce.endTime=ae(ce.quantizedEndStep),ne.totalTime=Math.max(ne.totalTime,ce.endTime),delete ce.quantizedStartStep,delete ce.quantizedEndStep}),getQuantizedTimeEvents(ne).forEach(ce=>{ce.time=ae(ce.time)}),delete ne.totalQuantizedSteps,delete ne.quantizationInfo,ne}const version="14.7.77",createExtendedExponentialRampToValueAutomationEvent=(re,ee,ne)=>({endTime:ee,insertTime:ne,type:"exponentialRampToValue",value:re}),createExtendedLinearRampToValueAutomationEvent=(re,ee,ne)=>({endTime:ee,insertTime:ne,type:"linearRampToValue",value:re}),createSetValueAutomationEvent=(re,ee)=>({startTime:ee,type:"setValue",value:re}),createSetValueCurveAutomationEvent=(re,ee,ne)=>({duration:ne,startTime:ee,type:"setValueCurve",values:re}),getTargetValueAtTime=(re,ee,{startTime:ne,target:ae,timeConstant:ce})=>ae+(ee-ae)*Math.exp((ne-re)/ce),isExponentialRampToValueAutomationEvent=re=>re.type==="exponentialRampToValue",isLinearRampToValueAutomationEvent=re=>re.type==="linearRampToValue",isAnyRampToValueAutomationEvent=re=>isExponentialRampToValueAutomationEvent(re)||isLinearRampToValueAutomationEvent(re),isSetValueAutomationEvent=re=>re.type==="setValue",isSetValueCurveAutomationEvent=re=>re.type==="setValueCurve",getValueOfAutomationEventAtIndexAtTime=(re,ee,ne,ae)=>{const ce=re[ee];return ce===void 0?ae:isAnyRampToValueAutomationEvent(ce)||isSetValueAutomationEvent(ce)?ce.value:isSetValueCurveAutomationEvent(ce)?ce.values[ce.values.length-1]:getTargetValueAtTime(ne,getValueOfAutomationEventAtIndexAtTime(re,ee-1,ce.startTime,ae),ce)},getEndTimeAndValueOfPreviousAutomationEvent=(re,ee,ne,ae,ce)=>ne===void 0?[ae.insertTime,ce]:isAnyRampToValueAutomationEvent(ne)?[ne.endTime,ne.value]:isSetValueAutomationEvent(ne)?[ne.startTime,ne.value]:isSetValueCurveAutomationEvent(ne)?[ne.startTime+ne.duration,ne.values[ne.values.length-1]]:[ne.startTime,getValueOfAutomationEventAtIndexAtTime(re,ee-1,ne.startTime,ce)],isCancelAndHoldAutomationEvent=re=>re.type==="cancelAndHold",isCancelScheduledValuesAutomationEvent=re=>re.type==="cancelScheduledValues",getEventTime=re=>isCancelAndHoldAutomationEvent(re)||isCancelScheduledValuesAutomationEvent(re)?re.cancelTime:isExponentialRampToValueAutomationEvent(re)||isLinearRampToValueAutomationEvent(re)?re.endTime:re.startTime,getExponentialRampValueAtTime=(re,ee,ne,{endTime:ae,value:ce})=>ne===ce?ce:0<ne&&0<ce||ne<0&&ce<0?ne*(ce/ne)**((re-ee)/(ae-ee)):0,getLinearRampValueAtTime=(re,ee,ne,{endTime:ae,value:ce})=>ne+(re-ee)/(ae-ee)*(ce-ne),interpolateValue=(re,ee)=>{const ne=Math.floor(ee),ae=Math.ceil(ee);return ne===ae?re[ne]:(1-(ee-ne))*re[ne]+(1-(ae-ee))*re[ae]},getValueCurveValueAtTime=(re,{duration:ee,startTime:ne,values:ae})=>{const ce=(re-ne)/ee*(ae.length-1);return interpolateValue(ae,ce)},isSetTargetAutomationEvent=re=>re.type==="setTarget";class AutomationEventList{constructor(ee){this._automationEvents=[],this._currenTime=0,this._defaultValue=ee}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(ee){const ne=getEventTime(ee);if(isCancelAndHoldAutomationEvent(ee)||isCancelScheduledValuesAutomationEvent(ee)){const ae=this._automationEvents.findIndex(le=>isCancelScheduledValuesAutomationEvent(ee)&&isSetValueCurveAutomationEvent(le)?le.startTime+le.duration>=ne:getEventTime(le)>=ne),ce=this._automationEvents[ae];if(ae!==-1&&(this._automationEvents=this._automationEvents.slice(0,ae)),isCancelAndHoldAutomationEvent(ee)){const le=this._automationEvents[this._automationEvents.length-1];if(ce!==void 0&&isAnyRampToValueAutomationEvent(ce)){if(le!==void 0&&isSetTargetAutomationEvent(le))throw new Error("The internal list is malformed.");const ue=le===void 0?ce.insertTime:isSetValueCurveAutomationEvent(le)?le.startTime+le.duration:getEventTime(le),he=le===void 0?this._defaultValue:isSetValueCurveAutomationEvent(le)?le.values[le.values.length-1]:le.value,fe=isExponentialRampToValueAutomationEvent(ce)?getExponentialRampValueAtTime(ne,ue,he,ce):getLinearRampValueAtTime(ne,ue,he,ce),me=isExponentialRampToValueAutomationEvent(ce)?createExtendedExponentialRampToValueAutomationEvent(fe,ne,this._currenTime):createExtendedLinearRampToValueAutomationEvent(fe,ne,this._currenTime);this._automationEvents.push(me)}if(le!==void 0&&isSetTargetAutomationEvent(le)&&this._automationEvents.push(createSetValueAutomationEvent(this.getValue(ne),ne)),le!==void 0&&isSetValueCurveAutomationEvent(le)&&le.startTime+le.duration>ne){const ue=ne-le.startTime,he=(le.values.length-1)/le.duration,fe=Math.max(2,1+Math.ceil(ue*he)),me=ue/(fe-1)*he,ge=le.values.slice(0,fe);if(me<1)for(let ve=1;ve<fe;ve+=1){const ye=me*ve%1;ge[ve]=le.values[ve-1]*(1-ye)+le.values[ve]*ye}this._automationEvents[this._automationEvents.length-1]=createSetValueCurveAutomationEvent(ge,le.startTime,ue)}}}else{const ae=this._automationEvents.findIndex(ue=>getEventTime(ue)>ne),ce=ae===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[ae-1];if(ce!==void 0&&isSetValueCurveAutomationEvent(ce)&&getEventTime(ce)+ce.duration>ne)return!1;const le=isExponentialRampToValueAutomationEvent(ee)?createExtendedExponentialRampToValueAutomationEvent(ee.value,ee.endTime,this._currenTime):isLinearRampToValueAutomationEvent(ee)?createExtendedLinearRampToValueAutomationEvent(ee.value,ne,this._currenTime):ee;if(ae===-1)this._automationEvents.push(le);else{if(isSetValueCurveAutomationEvent(ee)&&ne+ee.duration>getEventTime(this._automationEvents[ae]))return!1;this._automationEvents.splice(ae,0,le)}}return!0}flush(ee){const ne=this._automationEvents.findIndex(ae=>getEventTime(ae)>ee);if(ne>1){const ae=this._automationEvents.slice(ne-1),ce=ae[0];isSetTargetAutomationEvent(ce)&&ae.unshift(createSetValueAutomationEvent(getValueOfAutomationEventAtIndexAtTime(this._automationEvents,ne-2,ce.startTime,this._defaultValue),ce.startTime)),this._automationEvents=ae}}getValue(ee){if(this._automationEvents.length===0)return this._defaultValue;const ne=this._automationEvents.findIndex(ue=>getEventTime(ue)>ee),ae=this._automationEvents[ne],ce=(ne===-1?this._automationEvents.length:ne)-1,le=this._automationEvents[ce];if(le!==void 0&&isSetTargetAutomationEvent(le)&&(ae===void 0||!isAnyRampToValueAutomationEvent(ae)||ae.insertTime>ee))return getTargetValueAtTime(ee,getValueOfAutomationEventAtIndexAtTime(this._automationEvents,ce-1,le.startTime,this._defaultValue),le);if(le!==void 0&&isSetValueAutomationEvent(le)&&(ae===void 0||!isAnyRampToValueAutomationEvent(ae)))return le.value;if(le!==void 0&&isSetValueCurveAutomationEvent(le)&&(ae===void 0||!isAnyRampToValueAutomationEvent(ae)||le.startTime+le.duration>ee))return ee<le.startTime+le.duration?getValueCurveValueAtTime(ee,le):le.values[le.values.length-1];if(le!==void 0&&isAnyRampToValueAutomationEvent(le)&&(ae===void 0||!isAnyRampToValueAutomationEvent(ae)))return le.value;if(ae!==void 0&&isExponentialRampToValueAutomationEvent(ae)){const[ue,he]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,ce,le,ae,this._defaultValue);return getExponentialRampValueAtTime(ee,ue,he,ae)}if(ae!==void 0&&isLinearRampToValueAutomationEvent(ae)){const[ue,he]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,ce,le,ae,this._defaultValue);return getLinearRampValueAtTime(ee,ue,he,ae)}return this._defaultValue}}const createCancelAndHoldAutomationEvent=re=>({cancelTime:re,type:"cancelAndHold"}),createCancelScheduledValuesAutomationEvent=re=>({cancelTime:re,type:"cancelScheduledValues"}),createExponentialRampToValueAutomationEvent=(re,ee)=>({endTime:ee,type:"exponentialRampToValue",value:re}),createLinearRampToValueAutomationEvent=(re,ee)=>({endTime:ee,type:"linearRampToValue",value:re}),createSetTargetAutomationEvent=(re,ee,ne)=>({startTime:ee,target:re,timeConstant:ne,type:"setTarget"}),createAbortError=()=>new DOMException("","AbortError"),createAddActiveInputConnectionToAudioNode=re=>(ee,ne,[ae,ce,le],ue)=>{re(ee[ce],[ne,ae,le],he=>he[0]===ne&&he[1]===ae,ue)},createAddAudioNodeConnections=re=>(ee,ne,ae)=>{const ce=[];for(let le=0;le<ae.numberOfInputs;le+=1)ce.push(new Set);re.set(ee,{activeInputs:ce,outputs:new Set,passiveInputs:new WeakMap,renderer:ne})},createAddAudioParamConnections=re=>(ee,ne)=>{re.set(ee,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:ne})},ACTIVE_AUDIO_NODE_STORE=new WeakSet,AUDIO_NODE_CONNECTIONS_STORE=new WeakMap,AUDIO_NODE_STORE=new WeakMap,AUDIO_PARAM_CONNECTIONS_STORE=new WeakMap,AUDIO_PARAM_STORE=new WeakMap,CONTEXT_STORE=new WeakMap,EVENT_LISTENERS=new WeakMap,CYCLE_COUNTERS=new WeakMap,NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=new WeakMap,NODE_TO_PROCESSOR_MAPS=new WeakMap,handler={construct(){return handler}},isConstructible=re=>{try{const ee=new Proxy(re,handler);new ee}catch{return!1}return!0},IMPORT_STATEMENT_REGEX=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,splitImportStatements=(re,ee)=>{const ne=[];let ae=re.replace(/^[\s]+/,""),ce=ae.match(IMPORT_STATEMENT_REGEX);for(;ce!==null;){const le=ce[1].slice(1,-1),ue=ce[0].replace(/([\s]+)?;?$/,"").replace(le,new URL(le,ee).toString());ne.push(ue),ae=ae.slice(ce[0].length).replace(/^[\s]+/,""),ce=ae.match(IMPORT_STATEMENT_REGEX)}return[ne.join(";"),ae]},verifyParameterDescriptors=re=>{if(re!==void 0&&!Array.isArray(re))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},verifyProcessorCtor=re=>{if(!isConstructible(re))throw new TypeError("The given value for processorCtor should be a constructor.");if(re.prototype===null||typeof re.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},createAddAudioWorkletModule=(re,ee,ne,ae,ce,le,ue,he,fe,me,ge,ve,ye)=>{let be=0;return(Ee,Ce,Se={credentials:"omit"})=>{const Te=ge.get(Ee);if(Te!==void 0&&Te.has(Ce))return Promise.resolve();const ke=me.get(Ee);if(ke!==void 0){const De=ke.get(Ce);if(De!==void 0)return De}const Ne=le(Ee),Fe=Ne.audioWorklet===void 0?ce(Ce).then(([De,Oe])=>{const[Re,Be]=splitImportStatements(De,Oe),Le=`${Re};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,globalThis,registerProcessor,sampleRate,self,window)=>{${Be}
})})(window,'_AWGS')`;return ne(Le)}).then(()=>{const De=ye._AWGS.pop();if(De===void 0)throw new SyntaxError;ae(Ne.currentTime,Ne.sampleRate,()=>De(class{},void 0,(Oe,Re)=>{if(Oe.trim()==="")throw ee();const Be=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(Ne);if(Be!==void 0){if(Be.has(Oe))throw ee();verifyProcessorCtor(Re),verifyParameterDescriptors(Re.parameterDescriptors),Be.set(Oe,Re)}else verifyProcessorCtor(Re),verifyParameterDescriptors(Re.parameterDescriptors),NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(Ne,new Map([[Oe,Re]]))},Ne.sampleRate,void 0,void 0))}):Promise.all([ce(Ce),Promise.resolve(re(ve,ve))]).then(([[De,Oe],Re])=>{const Be=be+1;be=Be;const[Le,je]=splitImportStatements(De,Oe),ze=`${Le};((AudioWorkletProcessor,registerProcessor)=>{${je}
})(${Re?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${Re?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${Re?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${Be}',class extends AudioWorkletProcessor{process(){return !1}})`,He=new Blob([ze],{type:"application/javascript; charset=utf-8"}),Ye=URL.createObjectURL(He);return Ne.audioWorklet.addModule(Ye,Se).then(()=>{if(he(Ne))return Ne;const Xe=ue(Ne);return Xe.audioWorklet.addModule(Ye,Se).then(()=>Xe)}).then(Xe=>{if(fe===null)throw new SyntaxError;try{new fe(Xe,`__sac${Be}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Ye))});return ke===void 0?me.set(Ee,new Map([[Ce,Fe]])):ke.set(Ce,Fe),Fe.then(()=>{const De=ge.get(Ee);De===void 0?ge.set(Ee,new Set([Ce])):De.add(Ce)}).finally(()=>{const De=me.get(Ee);De!==void 0&&De.delete(Ce)}),Fe}},getValueForKey=(re,ee)=>{const ne=re.get(ee);if(ne===void 0)throw new Error("A value with the given key could not be found.");return ne},pickElementFromSet=(re,ee)=>{const ne=Array.from(re).filter(ee);if(ne.length>1)throw Error("More than one element was found.");if(ne.length===0)throw Error("No element was found.");const[ae]=ne;return re.delete(ae),ae},deletePassiveInputConnectionToAudioNode=(re,ee,ne,ae)=>{const ce=getValueForKey(re,ee),le=pickElementFromSet(ce,ue=>ue[0]===ne&&ue[1]===ae);return ce.size===0&&re.delete(ee),le},getEventListenersOfAudioNode=re=>getValueForKey(EVENT_LISTENERS,re),setInternalStateToActive=re=>{if(ACTIVE_AUDIO_NODE_STORE.has(re))throw new Error("The AudioNode is already stored.");ACTIVE_AUDIO_NODE_STORE.add(re),getEventListenersOfAudioNode(re).forEach(ee=>ee(!0))},isAudioWorkletNode=re=>"port"in re,setInternalStateToPassive=re=>{if(!ACTIVE_AUDIO_NODE_STORE.has(re))throw new Error("The AudioNode is not stored.");ACTIVE_AUDIO_NODE_STORE.delete(re),getEventListenersOfAudioNode(re).forEach(ee=>ee(!1))},setInternalStateToPassiveWhenNecessary=(re,ee)=>{!isAudioWorkletNode(re)&&ee.every(ne=>ne.size===0)&&setInternalStateToPassive(re)},createAddConnectionToAudioNode=(re,ee,ne,ae,ce,le,ue,he,fe,me,ge,ve,ye)=>{const be=new WeakMap;return(Ee,Ce,Se,Te,ke)=>{const{activeInputs:Ne,passiveInputs:Fe}=le(Ce),{outputs:De}=le(Ee),Oe=he(Ee),Re=Be=>{const Le=fe(Ce),je=fe(Ee);if(Be){const Ge=deletePassiveInputConnectionToAudioNode(Fe,Ee,Se,Te);re(Ne,Ee,Ge,!1),!ke&&!ve(Ee)&&ne(je,Le,Se,Te),ye(Ce)&&setInternalStateToActive(Ce)}else{const Ge=ae(Ne,Ee,Se,Te);ee(Fe,Te,Ge,!1),!ke&&!ve(Ee)&&ce(je,Le,Se,Te);const qe=ue(Ce);if(qe===0)ge(Ce)&&setInternalStateToPassiveWhenNecessary(Ce,Ne);else{const Ue=be.get(Ce);Ue!==void 0&&clearTimeout(Ue),be.set(Ce,setTimeout(()=>{ge(Ce)&&setInternalStateToPassiveWhenNecessary(Ce,Ne)},qe*1e3))}}};return me(De,[Ce,Se,Te],Be=>Be[0]===Ce&&Be[1]===Se&&Be[2]===Te,!0)?(Oe.add(Re),ge(Ee)?re(Ne,Ee,[Se,Te,Re],!0):ee(Fe,Te,[Ee,Se,Re],!0),!0):!1}},createAddPassiveInputConnectionToAudioNode=re=>(ee,ne,[ae,ce,le],ue)=>{const he=ee.get(ae);he===void 0?ee.set(ae,new Set([[ce,ne,le]])):re(he,[ce,ne,le],fe=>fe[0]===ce&&fe[1]===ne,ue)},createAddSilentConnection=re=>(ee,ne)=>{const ae=re(ee,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});ne.connect(ae).connect(ee.destination);const ce=()=>{ne.removeEventListener("ended",ce),ne.disconnect(ae),ae.disconnect()};ne.addEventListener("ended",ce)},createAddUnrenderedAudioWorkletNode=re=>(ee,ne)=>{re(ee).add(ne)},DEFAULT_OPTIONS$j={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},createAnalyserNodeConstructor=(re,ee,ne,ae,ce,le)=>class extends re{constructor(he,fe){const me=ce(he),ge={...DEFAULT_OPTIONS$j,...fe},ve=ae(me,ge),ye=le(me)?ee():null;super(he,!1,ve,ye),this._nativeAnalyserNode=ve}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(he){this._nativeAnalyserNode.fftSize=he}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(he){const fe=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=he,!(he>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=fe,ne()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(he){const fe=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=he,!(this._nativeAnalyserNode.maxDecibels>he))throw this._nativeAnalyserNode.minDecibels=fe,ne()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(he){this._nativeAnalyserNode.smoothingTimeConstant=he}getByteFrequencyData(he){this._nativeAnalyserNode.getByteFrequencyData(he)}getByteTimeDomainData(he){this._nativeAnalyserNode.getByteTimeDomainData(he)}getFloatFrequencyData(he){this._nativeAnalyserNode.getFloatFrequencyData(he)}getFloatTimeDomainData(he){this._nativeAnalyserNode.getFloatTimeDomainData(he)}},isOwnedByContext=(re,ee)=>re.context===ee,createAnalyserNodeRendererFactory=(re,ee,ne)=>()=>{const ae=new WeakMap,ce=async(le,ue)=>{let he=ee(le);if(!isOwnedByContext(he,ue)){const me={channelCount:he.channelCount,channelCountMode:he.channelCountMode,channelInterpretation:he.channelInterpretation,fftSize:he.fftSize,maxDecibels:he.maxDecibels,minDecibels:he.minDecibels,smoothingTimeConstant:he.smoothingTimeConstant};he=re(ue,me)}return ae.set(ue,he),await ne(le,ue,he),he};return{render(le,ue){const he=ae.get(ue);return he!==void 0?Promise.resolve(he):ce(le,ue)}}},testAudioBufferCopyChannelMethodsOutOfBoundsSupport=re=>{try{re.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},createIndexSizeError=()=>new DOMException("","IndexSizeError"),wrapAudioBufferGetChannelDataMethod=re=>{re.getChannelData=(ee=>ne=>{try{return ee.call(re,ne)}catch(ae){throw ae.code===12?createIndexSizeError():ae}})(re.getChannelData)},DEFAULT_OPTIONS$i={numberOfChannels:1},createAudioBufferConstructor=(re,ee,ne,ae,ce,le,ue,he)=>{let fe=null;return class Fu{constructor(ge){if(ce===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:ve,numberOfChannels:ye,sampleRate:be}={...DEFAULT_OPTIONS$i,...ge};fe===null&&(fe=new ce(1,1,44100));const Ee=ae!==null&&ee(le,le)?new ae({length:ve,numberOfChannels:ye,sampleRate:be}):fe.createBuffer(ye,ve,be);if(Ee.numberOfChannels===0)throw ne();return typeof Ee.copyFromChannel!="function"?(ue(Ee),wrapAudioBufferGetChannelDataMethod(Ee)):ee(testAudioBufferCopyChannelMethodsOutOfBoundsSupport,()=>testAudioBufferCopyChannelMethodsOutOfBoundsSupport(Ee))||he(Ee),re.add(Ee),Ee}static[Symbol.hasInstance](ge){return ge!==null&&typeof ge=="object"&&Object.getPrototypeOf(ge)===Fu.prototype||re.has(ge)}}},MOST_NEGATIVE_SINGLE_FLOAT=-34028234663852886e22,MOST_POSITIVE_SINGLE_FLOAT=-MOST_NEGATIVE_SINGLE_FLOAT,isActiveAudioNode=re=>ACTIVE_AUDIO_NODE_STORE.has(re),DEFAULT_OPTIONS$h={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},createAudioBufferSourceNodeConstructor=(re,ee,ne,ae,ce,le,ue,he)=>class extends re{constructor(me,ge){const ve=le(me),ye={...DEFAULT_OPTIONS$h,...ge},be=ce(ve,ye),Ee=ue(ve),Ce=Ee?ee():null;super(me,!1,be,Ce),this._audioBufferSourceNodeRenderer=Ce,this._isBufferNullified=!1,this._isBufferSet=ye.buffer!==null,this._nativeAudioBufferSourceNode=be,this._onended=null,this._playbackRate=ne(this,Ee,be.playbackRate,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(me){if(this._nativeAudioBufferSourceNode.buffer=me,me!==null){if(this._isBufferSet)throw ae();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(me){this._nativeAudioBufferSourceNode.loop=me}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(me){this._nativeAudioBufferSourceNode.loopEnd=me}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(me){this._nativeAudioBufferSourceNode.loopStart=me}get onended(){return this._onended}set onended(me){const ge=typeof me=="function"?he(this,me):null;this._nativeAudioBufferSourceNode.onended=ge;const ve=this._nativeAudioBufferSourceNode.onended;this._onended=ve!==null&&ve===ge?me:ve}get playbackRate(){return this._playbackRate}start(me=0,ge=0,ve){if(this._nativeAudioBufferSourceNode.start(me,ge,ve),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=ve===void 0?[me,ge]:[me,ge,ve]),this.context.state!=="closed"){setInternalStateToActive(this);const ye=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",ye),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",ye)}}stop(me=0){this._nativeAudioBufferSourceNode.stop(me),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=me)}},createAudioBufferSourceNodeRendererFactory=(re,ee,ne,ae,ce)=>()=>{const le=new WeakMap;let ue=null,he=null;const fe=async(me,ge)=>{let ve=ne(me);const ye=isOwnedByContext(ve,ge);if(!ye){const be={buffer:ve.buffer,channelCount:ve.channelCount,channelCountMode:ve.channelCountMode,channelInterpretation:ve.channelInterpretation,loop:ve.loop,loopEnd:ve.loopEnd,loopStart:ve.loopStart,playbackRate:ve.playbackRate.value};ve=ee(ge,be),ue!==null&&ve.start(...ue),he!==null&&ve.stop(he)}return le.set(ge,ve),ye?await re(ge,me.playbackRate,ve.playbackRate):await ae(ge,me.playbackRate,ve.playbackRate),await ce(me,ge,ve),ve};return{set start(me){ue=me},set stop(me){he=me},render(me,ge){const ve=le.get(ge);return ve!==void 0?Promise.resolve(ve):fe(me,ge)}}},isAudioBufferSourceNode=re=>"playbackRate"in re,isBiquadFilterNode=re=>"frequency"in re&&"gain"in re,isConstantSourceNode=re=>"offset"in re,isGainNode=re=>!("frequency"in re)&&"gain"in re,isOscillatorNode=re=>"detune"in re&&"frequency"in re,isStereoPannerNode=re=>"pan"in re,getAudioNodeConnections=re=>getValueForKey(AUDIO_NODE_CONNECTIONS_STORE,re),getAudioParamConnections=re=>getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE,re),deactivateActiveAudioNodeInputConnections=(re,ee)=>{const{activeInputs:ne}=getAudioNodeConnections(re);ne.forEach(ce=>ce.forEach(([le])=>{ee.includes(re)||deactivateActiveAudioNodeInputConnections(le,[...ee,re])}));const ae=isAudioBufferSourceNode(re)?[re.playbackRate]:isAudioWorkletNode(re)?Array.from(re.parameters.values()):isBiquadFilterNode(re)?[re.Q,re.detune,re.frequency,re.gain]:isConstantSourceNode(re)?[re.offset]:isGainNode(re)?[re.gain]:isOscillatorNode(re)?[re.detune,re.frequency]:isStereoPannerNode(re)?[re.pan]:[];for(const ce of ae){const le=getAudioParamConnections(ce);le!==void 0&&le.activeInputs.forEach(([ue])=>deactivateActiveAudioNodeInputConnections(ue,ee))}isActiveAudioNode(re)&&setInternalStateToPassive(re)},deactivateAudioGraph=re=>{deactivateActiveAudioNodeInputConnections(re.destination,[])},isValidLatencyHint=re=>re===void 0||typeof re=="number"||typeof re=="string"&&(re==="balanced"||re==="interactive"||re==="playback"),createAudioContextConstructor=(re,ee,ne,ae,ce,le,ue,he,fe)=>class extends re{constructor(ge={}){if(fe===null)throw new Error("Missing the native AudioContext constructor.");let ve;try{ve=new fe(ge)}catch(Ee){throw Ee.code===12&&Ee.message==="sampleRate is not in range"?ne():Ee}if(ve===null)throw ae();if(!isValidLatencyHint(ge.latencyHint))throw new TypeError(`The provided value '${ge.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(ge.sampleRate!==void 0&&ve.sampleRate!==ge.sampleRate)throw ne();super(ve,2);const{latencyHint:ye}=ge,{sampleRate:be}=ve;if(this._baseLatency=typeof ve.baseLatency=="number"?ve.baseLatency:ye==="balanced"?512/be:ye==="interactive"||ye===void 0?256/be:ye==="playback"?1024/be:Math.max(2,Math.min(128,Math.round(ye*be/128)))*128/be,this._nativeAudioContext=ve,fe.name==="webkitAudioContext"?(this._nativeGainNode=ve.createGain(),this._nativeOscillatorNode=ve.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(ve.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,ve.state==="running"){this._state="suspended";const Ee=()=>{this._state==="suspended"&&(this._state=null),ve.removeEventListener("statechange",Ee)};ve.addEventListener("statechange",Ee)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw ee()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),deactivateAudioGraph(this)}))}createMediaElementSource(ge){return new ce(this,{mediaElement:ge})}createMediaStreamDestination(){return new le(this)}createMediaStreamSource(ge){return new ue(this,{mediaStream:ge})}createMediaStreamTrackSource(ge){return new he(this,{mediaStreamTrack:ge})}resume(){return this._state==="suspended"?new Promise((ge,ve)=>{const ye=()=>{this._nativeAudioContext.removeEventListener("statechange",ye),this._nativeAudioContext.state==="running"?ge():this.resume().then(ge,ve)};this._nativeAudioContext.addEventListener("statechange",ye)}):this._nativeAudioContext.resume().catch(ge=>{throw ge===void 0||ge.code===15?ee():ge})}suspend(){return this._nativeAudioContext.suspend().catch(ge=>{throw ge===void 0?ee():ge})}},createAudioDestinationNodeConstructor=(re,ee,ne,ae,ce,le,ue,he)=>class extends re{constructor(me,ge){const ve=le(me),ye=ue(ve),be=ce(ve,ge,ye),Ee=ye?ee(he):null;super(me,!1,be,Ee),this._isNodeOfNativeOfflineAudioContext=ye,this._nativeAudioDestinationNode=be}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(me){if(this._isNodeOfNativeOfflineAudioContext)throw ae();if(me>this._nativeAudioDestinationNode.maxChannelCount)throw ne();this._nativeAudioDestinationNode.channelCount=me}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(me){if(this._isNodeOfNativeOfflineAudioContext)throw ae();this._nativeAudioDestinationNode.channelCountMode=me}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},createAudioDestinationNodeRenderer=re=>{const ee=new WeakMap,ne=async(ae,ce)=>{const le=ce.destination;return ee.set(ce,le),await re(ae,ce,le),le};return{render(ae,ce){const le=ee.get(ce);return le!==void 0?Promise.resolve(le):ne(ae,ce)}}},createAudioListenerFactory=(re,ee,ne,ae,ce,le,ue,he)=>(fe,me)=>{const ge=me.listener,ve=()=>{const De=new Float32Array(1),Oe=ee(me,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),Re=ue(me);let Be=!1,Le=[0,0,-1,0,1,0],je=[0,0,0];const Ge=()=>{if(Be)return;Be=!0;const He=ae(me,256,9,0);He.onaudioprocess=({inputBuffer:Ye})=>{const Xe=[le(Ye,De,0),le(Ye,De,1),le(Ye,De,2),le(Ye,De,3),le(Ye,De,4),le(Ye,De,5)];Xe.some((Ze,Vt)=>Ze!==Le[Vt])&&(ge.setOrientation(...Xe),Le=Xe);const We=[le(Ye,De,6),le(Ye,De,7),le(Ye,De,8)];We.some((Ze,Vt)=>Ze!==je[Vt])&&(ge.setPosition(...We),je=We)},Oe.connect(He)},qe=He=>Ye=>{Ye!==Le[He]&&(Le[He]=Ye,ge.setOrientation(...Le))},Ue=He=>Ye=>{Ye!==je[He]&&(je[He]=Ye,ge.setPosition(...je))},ze=(He,Ye,Xe)=>{const We=ne(me,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Ye});We.connect(Oe,0,He),We.start(),Object.defineProperty(We.offset,"defaultValue",{get(){return Ye}});const Ze=re({context:fe},Re,We.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT);return he(Ze,"value",Vt=>()=>Vt.call(Ze),Vt=>Qt=>{try{Vt.call(Ze,Qt)}catch(Yt){if(Yt.code!==9)throw Yt}Ge(),Re&&Xe(Qt)}),Ze.cancelAndHoldAtTime=(Vt=>Re?()=>{throw ce()}:(...Qt)=>{const Yt=Vt.apply(Ze,Qt);return Ge(),Yt})(Ze.cancelAndHoldAtTime),Ze.cancelScheduledValues=(Vt=>Re?()=>{throw ce()}:(...Qt)=>{const Yt=Vt.apply(Ze,Qt);return Ge(),Yt})(Ze.cancelScheduledValues),Ze.exponentialRampToValueAtTime=(Vt=>Re?()=>{throw ce()}:(...Qt)=>{const Yt=Vt.apply(Ze,Qt);return Ge(),Yt})(Ze.exponentialRampToValueAtTime),Ze.linearRampToValueAtTime=(Vt=>Re?()=>{throw ce()}:(...Qt)=>{const Yt=Vt.apply(Ze,Qt);return Ge(),Yt})(Ze.linearRampToValueAtTime),Ze.setTargetAtTime=(Vt=>Re?()=>{throw ce()}:(...Qt)=>{const Yt=Vt.apply(Ze,Qt);return Ge(),Yt})(Ze.setTargetAtTime),Ze.setValueAtTime=(Vt=>Re?()=>{throw ce()}:(...Qt)=>{const Yt=Vt.apply(Ze,Qt);return Ge(),Yt})(Ze.setValueAtTime),Ze.setValueCurveAtTime=(Vt=>Re?()=>{throw ce()}:(...Qt)=>{const Yt=Vt.apply(Ze,Qt);return Ge(),Yt})(Ze.setValueCurveAtTime),Ze};return{forwardX:ze(0,0,qe(0)),forwardY:ze(1,0,qe(1)),forwardZ:ze(2,-1,qe(2)),positionX:ze(6,0,Ue(0)),positionY:ze(7,0,Ue(1)),positionZ:ze(8,0,Ue(2)),upX:ze(3,0,qe(3)),upY:ze(4,1,qe(4)),upZ:ze(5,0,qe(5))}},{forwardX:ye,forwardY:be,forwardZ:Ee,positionX:Ce,positionY:Se,positionZ:Te,upX:ke,upY:Ne,upZ:Fe}=ge.forwardX===void 0?ve():ge;return{get forwardX(){return ye},get forwardY(){return be},get forwardZ(){return Ee},get positionX(){return Ce},get positionY(){return Se},get positionZ(){return Te},get upX(){return ke},get upY(){return Ne},get upZ(){return Fe}}},isAudioNode$1=re=>"context"in re,isAudioNodeOutputConnection=re=>isAudioNode$1(re[0]),insertElementInSet=(re,ee,ne,ae)=>{for(const ce of re)if(ne(ce)){if(ae)return!1;throw Error("The set contains at least one similar element.")}return re.add(ee),!0},addActiveInputConnectionToAudioParam=(re,ee,[ne,ae],ce)=>{insertElementInSet(re,[ee,ne,ae],le=>le[0]===ee&&le[1]===ne,ce)},addPassiveInputConnectionToAudioParam=(re,[ee,ne,ae],ce)=>{const le=re.get(ee);le===void 0?re.set(ee,new Set([[ne,ae]])):insertElementInSet(le,[ne,ae],ue=>ue[0]===ne,ce)},isNativeAudioNodeFaker=re=>"inputs"in re,connectNativeAudioNodeToNativeAudioNode=(re,ee,ne,ae)=>{if(isNativeAudioNodeFaker(ee)){const ce=ee.inputs[ae];return re.connect(ce,ne,0),[ce,ne,0]}return re.connect(ee,ne,ae),[ee,ne,ae]},deleteActiveInputConnection=(re,ee,ne)=>{for(const ae of re)if(ae[0]===ee&&ae[1]===ne)return re.delete(ae),ae;return null},deleteActiveInputConnectionToAudioParam=(re,ee,ne)=>pickElementFromSet(re,ae=>ae[0]===ee&&ae[1]===ne),deleteEventListenerOfAudioNode=(re,ee)=>{if(!getEventListenersOfAudioNode(re).delete(ee))throw new Error("Missing the expected event listener.")},deletePassiveInputConnectionToAudioParam=(re,ee,ne)=>{const ae=getValueForKey(re,ee),ce=pickElementFromSet(ae,le=>le[0]===ne);return ae.size===0&&re.delete(ee),ce},disconnectNativeAudioNodeFromNativeAudioNode=(re,ee,ne,ae)=>{isNativeAudioNodeFaker(ee)?re.disconnect(ee.inputs[ae],ne,0):re.disconnect(ee,ne,ae)},getNativeAudioNode=re=>getValueForKey(AUDIO_NODE_STORE,re),getNativeAudioParam=re=>getValueForKey(AUDIO_PARAM_STORE,re),isPartOfACycle=re=>CYCLE_COUNTERS.has(re),isPassiveAudioNode=re=>!ACTIVE_AUDIO_NODE_STORE.has(re),testAudioNodeDisconnectMethodSupport=(re,ee)=>new Promise(ne=>{if(ee!==null)ne(!0);else{const ae=re.createScriptProcessor(256,1,1),ce=re.createGain(),le=re.createBuffer(1,2,44100),ue=le.getChannelData(0);ue[0]=1,ue[1]=1;const he=re.createBufferSource();he.buffer=le,he.loop=!0,he.connect(ae).connect(re.destination),he.connect(ce),he.disconnect(ce),ae.onaudioprocess=fe=>{const me=fe.inputBuffer.getChannelData(0);Array.prototype.some.call(me,ge=>ge===1)?ne(!0):ne(!1),he.stop(),ae.onaudioprocess=null,he.disconnect(ae),ae.disconnect(re.destination)},he.start()}}),visitEachAudioNodeOnce=(re,ee)=>{const ne=new Map;for(const ae of re)for(const ce of ae){const le=ne.get(ce);ne.set(ce,le===void 0?1:le+1)}ne.forEach((ae,ce)=>ee(ce,ae))},isNativeAudioNode$1=re=>"context"in re,wrapAudioNodeDisconnectMethod=re=>{const ee=new Map;re.connect=(ne=>(ae,ce=0,le=0)=>{const ue=isNativeAudioNode$1(ae)?ne(ae,ce,le):ne(ae,ce),he=ee.get(ae);return he===void 0?ee.set(ae,[{input:le,output:ce}]):he.every(fe=>fe.input!==le||fe.output!==ce)&&he.push({input:le,output:ce}),ue})(re.connect.bind(re)),re.disconnect=(ne=>(ae,ce,le)=>{if(ne.apply(re),ae===void 0)ee.clear();else if(typeof ae=="number")for(const[ue,he]of ee){const fe=he.filter(me=>me.output!==ae);fe.length===0?ee.delete(ue):ee.set(ue,fe)}else if(ee.has(ae))if(ce===void 0)ee.delete(ae);else{const ue=ee.get(ae);if(ue!==void 0){const he=ue.filter(fe=>fe.output!==ce&&(fe.input!==le||le===void 0));he.length===0?ee.delete(ae):ee.set(ae,he)}}for(const[ue,he]of ee)he.forEach(fe=>{isNativeAudioNode$1(ue)?re.connect(ue,fe.output,fe.input):re.connect(ue,fe.output)})})(re.disconnect)},addConnectionToAudioParamOfAudioContext=(re,ee,ne,ae)=>{const{activeInputs:ce,passiveInputs:le}=getAudioParamConnections(ee),{outputs:ue}=getAudioNodeConnections(re),he=getEventListenersOfAudioNode(re),fe=me=>{const ge=getNativeAudioNode(re),ve=getNativeAudioParam(ee);if(me){const ye=deletePassiveInputConnectionToAudioParam(le,re,ne);addActiveInputConnectionToAudioParam(ce,re,ye,!1),!ae&&!isPartOfACycle(re)&&ge.connect(ve,ne)}else{const ye=deleteActiveInputConnectionToAudioParam(ce,re,ne);addPassiveInputConnectionToAudioParam(le,ye,!1),!ae&&!isPartOfACycle(re)&&ge.disconnect(ve,ne)}};return insertElementInSet(ue,[ee,ne],me=>me[0]===ee&&me[1]===ne,!0)?(he.add(fe),isActiveAudioNode(re)?addActiveInputConnectionToAudioParam(ce,re,[ne,fe],!0):addPassiveInputConnectionToAudioParam(le,[re,ne,fe],!0),!0):!1},deleteInputConnectionOfAudioNode=(re,ee,ne,ae)=>{const{activeInputs:ce,passiveInputs:le}=getAudioNodeConnections(ee),ue=deleteActiveInputConnection(ce[ae],re,ne);return ue===null?[deletePassiveInputConnectionToAudioNode(le,re,ne,ae)[2],!1]:[ue[2],!0]},deleteInputConnectionOfAudioParam=(re,ee,ne)=>{const{activeInputs:ae,passiveInputs:ce}=getAudioParamConnections(ee),le=deleteActiveInputConnection(ae,re,ne);return le===null?[deletePassiveInputConnectionToAudioParam(ce,re,ne)[1],!1]:[le[2],!0]},deleteInputsOfAudioNode=(re,ee,ne,ae,ce)=>{const[le,ue]=deleteInputConnectionOfAudioNode(re,ne,ae,ce);if(le!==null&&(deleteEventListenerOfAudioNode(re,le),ue&&!ee&&!isPartOfACycle(re)&&disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(re),getNativeAudioNode(ne),ae,ce)),isActiveAudioNode(ne)){const{activeInputs:he}=getAudioNodeConnections(ne);setInternalStateToPassiveWhenNecessary(ne,he)}},deleteInputsOfAudioParam=(re,ee,ne,ae)=>{const[ce,le]=deleteInputConnectionOfAudioParam(re,ne,ae);ce!==null&&(deleteEventListenerOfAudioNode(re,ce),le&&!ee&&!isPartOfACycle(re)&&getNativeAudioNode(re).disconnect(getNativeAudioParam(ne),ae))},deleteAnyConnection=(re,ee)=>{const ne=getAudioNodeConnections(re),ae=[];for(const ce of ne.outputs)isAudioNodeOutputConnection(ce)?deleteInputsOfAudioNode(re,ee,...ce):deleteInputsOfAudioParam(re,ee,...ce),ae.push(ce[0]);return ne.outputs.clear(),ae},deleteConnectionAtOutput=(re,ee,ne)=>{const ae=getAudioNodeConnections(re),ce=[];for(const le of ae.outputs)le[1]===ne&&(isAudioNodeOutputConnection(le)?deleteInputsOfAudioNode(re,ee,...le):deleteInputsOfAudioParam(re,ee,...le),ce.push(le[0]),ae.outputs.delete(le));return ce},deleteConnectionToDestination=(re,ee,ne,ae,ce)=>{const le=getAudioNodeConnections(re);return Array.from(le.outputs).filter(ue=>ue[0]===ne&&(ae===void 0||ue[1]===ae)&&(ce===void 0||ue[2]===ce)).map(ue=>(isAudioNodeOutputConnection(ue)?deleteInputsOfAudioNode(re,ee,...ue):deleteInputsOfAudioParam(re,ee,...ue),le.outputs.delete(ue),ue[0]))},createAudioNodeConstructor=(re,ee,ne,ae,ce,le,ue,he,fe,me,ge,ve,ye,be,Ee,Ce)=>class extends me{constructor(Te,ke,Ne,Fe){super(Ne),this._context=Te,this._nativeAudioNode=Ne;const De=ge(Te);ve(De)&&ne(testAudioNodeDisconnectMethodSupport,()=>testAudioNodeDisconnectMethodSupport(De,Ce))!==!0&&wrapAudioNodeDisconnectMethod(Ne),AUDIO_NODE_STORE.set(this,Ne),EVENT_LISTENERS.set(this,new Set),Te.state!=="closed"&&ke&&setInternalStateToActive(this),re(this,Fe,Ne)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(Te){this._nativeAudioNode.channelCount=Te}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(Te){this._nativeAudioNode.channelCountMode=Te}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(Te){this._nativeAudioNode.channelInterpretation=Te}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(Te,ke=0,Ne=0){if(ke<0||ke>=this._nativeAudioNode.numberOfOutputs)throw ce();const Fe=ge(this._context),De=Ee(Fe);if(ye(Te)||be(Te))throw le();if(isAudioNode$1(Te)){const Be=getNativeAudioNode(Te);try{const je=connectNativeAudioNodeToNativeAudioNode(this._nativeAudioNode,Be,ke,Ne),Ge=isPassiveAudioNode(this);(De||Ge)&&this._nativeAudioNode.disconnect(...je),this.context.state!=="closed"&&!Ge&&isPassiveAudioNode(Te)&&setInternalStateToActive(Te)}catch(je){throw je.code===12?le():je}if(ee(this,Te,ke,Ne,De)){const je=fe([this],Te);visitEachAudioNodeOnce(je,ae(De))}return Te}const Oe=getNativeAudioParam(Te);if(Oe.name==="playbackRate"&&Oe.maxValue===1024)throw ue();try{this._nativeAudioNode.connect(Oe,ke),(De||isPassiveAudioNode(this))&&this._nativeAudioNode.disconnect(Oe,ke)}catch(Be){throw Be.code===12?le():Be}if(addConnectionToAudioParamOfAudioContext(this,Te,ke,De)){const Be=fe([this],Te);visitEachAudioNodeOnce(Be,ae(De))}}disconnect(Te,ke,Ne){let Fe;const De=ge(this._context),Oe=Ee(De);if(Te===void 0)Fe=deleteAnyConnection(this,Oe);else if(typeof Te=="number"){if(Te<0||Te>=this.numberOfOutputs)throw ce();Fe=deleteConnectionAtOutput(this,Oe,Te)}else{if(ke!==void 0&&(ke<0||ke>=this.numberOfOutputs)||isAudioNode$1(Te)&&Ne!==void 0&&(Ne<0||Ne>=Te.numberOfInputs))throw ce();if(Fe=deleteConnectionToDestination(this,Oe,Te,ke,Ne),Fe.length===0)throw le()}for(const Re of Fe){const Be=fe([this],Re);visitEachAudioNodeOnce(Be,he)}}},createAudioParamFactory=(re,ee,ne,ae,ce,le,ue,he,fe,me,ge,ve,ye)=>(be,Ee,Ce,Se=null,Te=null)=>{const ke=Ce.value,Ne=new AutomationEventList(ke),Fe=Ee?ae(Ne):null,De={get defaultValue(){return ke},get maxValue(){return Se===null?Ce.maxValue:Se},get minValue(){return Te===null?Ce.minValue:Te},get value(){return Ce.value},set value(Oe){Ce.value=Oe,De.setValueAtTime(Oe,be.context.currentTime)},cancelAndHoldAtTime(Oe){if(typeof Ce.cancelAndHoldAtTime=="function")Fe===null&&Ne.flush(be.context.currentTime),Ne.add(ce(Oe)),Ce.cancelAndHoldAtTime(Oe);else{const Re=Array.from(Ne).pop();Fe===null&&Ne.flush(be.context.currentTime),Ne.add(ce(Oe));const Be=Array.from(Ne).pop();Ce.cancelScheduledValues(Oe),Re!==Be&&Be!==void 0&&(Be.type==="exponentialRampToValue"?Ce.exponentialRampToValueAtTime(Be.value,Be.endTime):Be.type==="linearRampToValue"?Ce.linearRampToValueAtTime(Be.value,Be.endTime):Be.type==="setValue"?Ce.setValueAtTime(Be.value,Be.startTime):Be.type==="setValueCurve"&&Ce.setValueCurveAtTime(Be.values,Be.startTime,Be.duration))}return De},cancelScheduledValues(Oe){return Fe===null&&Ne.flush(be.context.currentTime),Ne.add(le(Oe)),Ce.cancelScheduledValues(Oe),De},exponentialRampToValueAtTime(Oe,Re){if(Oe===0)throw new RangeError;if(!Number.isFinite(Re)||Re<0)throw new RangeError;const Be=be.context.currentTime;return Fe===null&&Ne.flush(Be),Array.from(Ne).length===0&&(Ne.add(me(ke,Be)),Ce.setValueAtTime(ke,Be)),Ne.add(ue(Oe,Re)),Ce.exponentialRampToValueAtTime(Oe,Re),De},linearRampToValueAtTime(Oe,Re){const Be=be.context.currentTime;return Fe===null&&Ne.flush(Be),Array.from(Ne).length===0&&(Ne.add(me(ke,Be)),Ce.setValueAtTime(ke,Be)),Ne.add(he(Oe,Re)),Ce.linearRampToValueAtTime(Oe,Re),De},setTargetAtTime(Oe,Re,Be){return Fe===null&&Ne.flush(be.context.currentTime),Ne.add(fe(Oe,Re,Be)),Ce.setTargetAtTime(Oe,Re,Be),De},setValueAtTime(Oe,Re){return Fe===null&&Ne.flush(be.context.currentTime),Ne.add(me(Oe,Re)),Ce.setValueAtTime(Oe,Re),De},setValueCurveAtTime(Oe,Re,Be){const Le=Oe instanceof Float32Array?Oe:new Float32Array(Oe);if(ve!==null&&ve.name==="webkitAudioContext"){const je=Re+Be,Ge=be.context.sampleRate,qe=Math.ceil(Re*Ge),Ue=Math.floor(je*Ge),ze=Ue-qe,He=new Float32Array(ze);for(let Xe=0;Xe<ze;Xe+=1){const We=(Le.length-1)/Be*((qe+Xe)/Ge-Re),Ze=Math.floor(We),Vt=Math.ceil(We);He[Xe]=Ze===Vt?Le[Ze]:(1-(We-Ze))*Le[Ze]+(1-(Vt-We))*Le[Vt]}Fe===null&&Ne.flush(be.context.currentTime),Ne.add(ge(He,Re,Be)),Ce.setValueCurveAtTime(He,Re,Be);const Ye=Ue/Ge;Ye<je&&ye(De,He[He.length-1],Ye),ye(De,Le[Le.length-1],je)}else Fe===null&&Ne.flush(be.context.currentTime),Ne.add(ge(Le,Re,Be)),Ce.setValueCurveAtTime(Le,Re,Be);return De}};return ne.set(De,Ce),ee.set(De,be),re(De,Fe),De},createAudioParamRenderer=re=>({replay(ee){for(const ne of re)if(ne.type==="exponentialRampToValue"){const{endTime:ae,value:ce}=ne;ee.exponentialRampToValueAtTime(ce,ae)}else if(ne.type==="linearRampToValue"){const{endTime:ae,value:ce}=ne;ee.linearRampToValueAtTime(ce,ae)}else if(ne.type==="setTarget"){const{startTime:ae,target:ce,timeConstant:le}=ne;ee.setTargetAtTime(ce,ae,le)}else if(ne.type==="setValue"){const{startTime:ae,value:ce}=ne;ee.setValueAtTime(ce,ae)}else if(ne.type==="setValueCurve"){const{duration:ae,startTime:ce,values:le}=ne;ee.setValueCurveAtTime(le,ce,ae)}else throw new Error("Can't apply an unknown automation.")}});class ReadOnlyMap{constructor(ee){this._map=new Map(ee)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(ee,ne=null){return this._map.forEach((ae,ce)=>ee.call(ne,ae,ce,this))}get(ee){return this._map.get(ee)}has(ee){return this._map.has(ee)}keys(){return this._map.keys()}values(){return this._map.values()}}const DEFAULT_OPTIONS$g={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},createAudioWorkletNodeConstructor=(re,ee,ne,ae,ce,le,ue,he,fe,me,ge,ve,ye,be)=>class extends ee{constructor(Ce,Se,Te){var ke;const Ne=he(Ce),Fe=fe(Ne),De=ge({...DEFAULT_OPTIONS$g,...Te});ye(De);const Oe=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(Ne),Re=Oe==null?void 0:Oe.get(Se),Be=Fe||Ne.state!=="closed"?Ne:(ke=ue(Ne))!==null&&ke!==void 0?ke:Ne,Le=ce(Be,Fe?null:Ce.baseLatency,me,Se,Re,De),je=Fe?ae(Se,De,Re):null;super(Ce,!0,Le,je);const Ge=[];Le.parameters.forEach((Ue,ze)=>{const He=ne(this,Fe,Ue);Ge.push([ze,He])}),this._nativeAudioWorkletNode=Le,this._onprocessorerror=null,this._parameters=new ReadOnlyMap(Ge),Fe&&re(Ne,this);const{activeInputs:qe}=le(this);ve(Le,qe)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(Ce){const Se=typeof Ce=="function"?be(this,Ce):null;this._nativeAudioWorkletNode.onprocessorerror=Se;const Te=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=Te!==null&&Te===Se?Ce:Te}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function copyFromChannel(re,ee,ne,ae,ce){if(typeof re.copyFromChannel=="function")ee[ne].byteLength===0&&(ee[ne]=new Float32Array(128)),re.copyFromChannel(ee[ne],ae,ce);else{const le=re.getChannelData(ae);if(ee[ne].byteLength===0)ee[ne]=le.slice(ce,ce+128);else{const ue=new Float32Array(le.buffer,ce*Float32Array.BYTES_PER_ELEMENT,128);ee[ne].set(ue)}}}const copyToChannel=(re,ee,ne,ae,ce)=>{typeof re.copyToChannel=="function"?ee[ne].byteLength!==0&&re.copyToChannel(ee[ne],ae,ce):ee[ne].byteLength!==0&&re.getChannelData(ae).set(ee[ne],ce)},createNestedArrays=(re,ee)=>{const ne=[];for(let ae=0;ae<re;ae+=1){const ce=[],le=typeof ee=="number"?ee:ee[ae];for(let ue=0;ue<le;ue+=1)ce.push(new Float32Array(128));ne.push(ce)}return ne},getAudioWorkletProcessor=(re,ee)=>{const ne=getValueForKey(NODE_TO_PROCESSOR_MAPS,re),ae=getNativeAudioNode(ee);return getValueForKey(ne,ae)},processBuffer=async(re,ee,ne,ae,ce,le,ue)=>{const he=ee===null?Math.ceil(re.context.length/128)*128:ee.length,fe=ae.channelCount*ae.numberOfInputs,me=ce.reduce((Se,Te)=>Se+Te,0),ge=me===0?null:ne.createBuffer(me,he,ne.sampleRate);if(le===void 0)throw new Error("Missing the processor constructor.");const ve=getAudioNodeConnections(re),ye=await getAudioWorkletProcessor(ne,re),be=createNestedArrays(ae.numberOfInputs,ae.channelCount),Ee=createNestedArrays(ae.numberOfOutputs,ce),Ce=Array.from(re.parameters.keys()).reduce((Se,Te)=>({...Se,[Te]:new Float32Array(128)}),{});for(let Se=0;Se<he;Se+=128){if(ae.numberOfInputs>0&&ee!==null)for(let Te=0;Te<ae.numberOfInputs;Te+=1)for(let ke=0;ke<ae.channelCount;ke+=1)copyFromChannel(ee,be[Te],ke,ke,Se);le.parameterDescriptors!==void 0&&ee!==null&&le.parameterDescriptors.forEach(({name:Te},ke)=>{copyFromChannel(ee,Ce,Te,fe+ke,Se)});for(let Te=0;Te<ae.numberOfInputs;Te+=1)for(let ke=0;ke<ce[Te];ke+=1)Ee[Te][ke].byteLength===0&&(Ee[Te][ke]=new Float32Array(128));try{const Te=be.map((Ne,Fe)=>ve.activeInputs[Fe].size===0?[]:Ne),ke=ue(Se/ne.sampleRate,ne.sampleRate,()=>ye.process(Te,Ee,Ce));if(ge!==null)for(let Ne=0,Fe=0;Ne<ae.numberOfOutputs;Ne+=1){for(let De=0;De<ce[Ne];De+=1)copyToChannel(ge,Ee[Ne],De,Fe+De,Se);Fe+=ce[Ne]}if(!ke)break}catch(Te){re.dispatchEvent(new ErrorEvent("processorerror",{colno:Te.colno,filename:Te.filename,lineno:Te.lineno,message:Te.message}));break}}return ge},createAudioWorkletNodeRendererFactory=(re,ee,ne,ae,ce,le,ue,he,fe,me,ge,ve,ye,be,Ee,Ce)=>(Se,Te,ke)=>{const Ne=new WeakMap;let Fe=null;const De=async(Oe,Re)=>{let Be=ge(Oe),Le=null;const je=isOwnedByContext(Be,Re),Ge=Array.isArray(Te.outputChannelCount)?Te.outputChannelCount:Array.from(Te.outputChannelCount);if(ve===null){const qe=Ge.reduce((Ye,Xe)=>Ye+Xe,0),Ue=ce(Re,{channelCount:Math.max(1,qe),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,qe)}),ze=[];for(let Ye=0;Ye<Oe.numberOfOutputs;Ye+=1)ze.push(ae(Re,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Ge[Ye]}));const He=ue(Re,{channelCount:Te.channelCount,channelCountMode:Te.channelCountMode,channelInterpretation:Te.channelInterpretation,gain:1});He.connect=ee.bind(null,ze),He.disconnect=fe.bind(null,ze),Le=[Ue,ze,He]}else je||(Be=new ve(Re,Se));if(Ne.set(Re,Le===null?Be:Le[2]),Le!==null){if(Fe===null){if(ke===void 0)throw new Error("Missing the processor constructor.");if(ye===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Xe=Oe.channelCount*Oe.numberOfInputs,We=ke.parameterDescriptors===void 0?0:ke.parameterDescriptors.length,Ze=Xe+We;Fe=processBuffer(Oe,Ze===0?null:await(async()=>{const Qt=new ye(Ze,Math.ceil(Oe.context.length/128)*128,Re.sampleRate),Yt=[],Jt=[];for(let fn=0;fn<Te.numberOfInputs;fn+=1)Yt.push(ue(Qt,{channelCount:Te.channelCount,channelCountMode:Te.channelCountMode,channelInterpretation:Te.channelInterpretation,gain:1})),Jt.push(ce(Qt,{channelCount:Te.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Te.channelCount}));const rn=await Promise.all(Array.from(Oe.parameters.values()).map(async fn=>{const an=le(Qt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:fn.value});return await be(Qt,fn,an.offset),an})),nn=ae(Qt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Xe+We)});for(let fn=0;fn<Te.numberOfInputs;fn+=1){Yt[fn].connect(Jt[fn]);for(let an=0;an<Te.channelCount;an+=1)Jt[fn].connect(nn,an,fn*Te.channelCount+an)}for(const[fn,an]of rn.entries())an.connect(nn,0,Xe+fn),an.start(0);return nn.connect(Qt.destination),await Promise.all(Yt.map(fn=>Ee(Oe,Qt,fn))),Ce(Qt)})(),Re,Te,Ge,ke,me)}const qe=await Fe,Ue=ne(Re,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[ze,He,Ye]=Le;qe!==null&&(Ue.buffer=qe,Ue.start(0)),Ue.connect(ze);for(let Xe=0,We=0;Xe<Oe.numberOfOutputs;Xe+=1){const Ze=He[Xe];for(let Vt=0;Vt<Ge[Xe];Vt+=1)ze.connect(Ze,We+Vt,Vt);We+=Ge[Xe]}return Ye}if(je)for(const[qe,Ue]of Oe.parameters.entries())await re(Re,Ue,Be.parameters.get(qe));else for(const[qe,Ue]of Oe.parameters.entries())await be(Re,Ue,Be.parameters.get(qe));return await Ee(Oe,Re,Be),Be};return{render(Oe,Re){he(Re,Oe);const Be=Ne.get(Re);return Be!==void 0?Promise.resolve(Be):De(Oe,Re)}}},createBaseAudioContextConstructor=(re,ee,ne,ae,ce,le,ue,he,fe,me,ge,ve,ye,be,Ee,Ce,Se,Te,ke,Ne)=>class extends Ee{constructor(De,Oe){super(De,Oe),this._nativeContext=De,this._audioWorklet=re===void 0?void 0:{addModule:(Re,Be)=>re(this,Re,Be)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new ee(this)}createBiquadFilter(){return new ce(this)}createBuffer(De,Oe,Re){return new ne({length:Oe,numberOfChannels:De,sampleRate:Re})}createBufferSource(){return new ae(this)}createChannelMerger(De=6){return new le(this,{numberOfInputs:De})}createChannelSplitter(De=6){return new ue(this,{numberOfOutputs:De})}createConstantSource(){return new he(this)}createConvolver(){return new fe(this)}createDelay(De=1){return new ge(this,{maxDelayTime:De})}createDynamicsCompressor(){return new ve(this)}createGain(){return new ye(this)}createIIRFilter(De,Oe){return new be(this,{feedback:Oe,feedforward:De})}createOscillator(){return new Ce(this)}createPanner(){return new Se(this)}createPeriodicWave(De,Oe,Re={disableNormalization:!1}){return new Te(this,{...Re,imag:Oe,real:De})}createStereoPanner(){return new ke(this)}createWaveShaper(){return new Ne(this)}decodeAudioData(De,Oe,Re){return me(this._nativeContext,De).then(Be=>(typeof Oe=="function"&&Oe(Be),Be),Be=>{throw typeof Re=="function"&&Re(Be),Be})}},DEFAULT_OPTIONS$f={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},createBiquadFilterNodeConstructor=(re,ee,ne,ae,ce,le,ue,he)=>class extends re{constructor(me,ge){const ve=le(me),ye={...DEFAULT_OPTIONS$f,...ge},be=ce(ve,ye),Ee=ue(ve),Ce=Ee?ne():null;super(me,!1,be,Ce),this._Q=ee(this,Ee,be.Q,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._detune=ee(this,Ee,be.detune,1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT),-1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT)),this._frequency=ee(this,Ee,be.frequency,me.sampleRate/2,0),this._gain=ee(this,Ee,be.gain,40*Math.log10(MOST_POSITIVE_SINGLE_FLOAT),MOST_NEGATIVE_SINGLE_FLOAT),this._nativeBiquadFilterNode=be,he(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(me){this._nativeBiquadFilterNode.type=me}getFrequencyResponse(me,ge,ve){try{this._nativeBiquadFilterNode.getFrequencyResponse(me,ge,ve)}catch(ye){throw ye.code===11?ae():ye}if(me.length!==ge.length||ge.length!==ve.length)throw ae()}},createBiquadFilterNodeRendererFactory=(re,ee,ne,ae,ce)=>()=>{const le=new WeakMap,ue=async(he,fe)=>{let me=ne(he);const ge=isOwnedByContext(me,fe);if(!ge){const ve={Q:me.Q.value,channelCount:me.channelCount,channelCountMode:me.channelCountMode,channelInterpretation:me.channelInterpretation,detune:me.detune.value,frequency:me.frequency.value,gain:me.gain.value,type:me.type};me=ee(fe,ve)}return le.set(fe,me),ge?(await re(fe,he.Q,me.Q),await re(fe,he.detune,me.detune),await re(fe,he.frequency,me.frequency),await re(fe,he.gain,me.gain)):(await ae(fe,he.Q,me.Q),await ae(fe,he.detune,me.detune),await ae(fe,he.frequency,me.frequency),await ae(fe,he.gain,me.gain)),await ce(he,fe,me),me};return{render(he,fe){const me=le.get(fe);return me!==void 0?Promise.resolve(me):ue(he,fe)}}},createCacheTestResult=(re,ee)=>(ne,ae)=>{const ce=ee.get(ne);if(ce!==void 0)return ce;const le=re.get(ne);if(le!==void 0)return le;try{const ue=ae();return ue instanceof Promise?(re.set(ne,ue),ue.catch(()=>!1).then(he=>(re.delete(ne),ee.set(ne,he),he))):(ee.set(ne,ue),ue)}catch{return ee.set(ne,!1),!1}},DEFAULT_OPTIONS$e={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},createChannelMergerNodeConstructor=(re,ee,ne,ae,ce)=>class extends re{constructor(ue,he){const fe=ae(ue),me={...DEFAULT_OPTIONS$e,...he},ge=ne(fe,me),ve=ce(fe)?ee():null;super(ue,!1,ge,ve)}},createChannelMergerNodeRendererFactory=(re,ee,ne)=>()=>{const ae=new WeakMap,ce=async(le,ue)=>{let he=ee(le);if(!isOwnedByContext(he,ue)){const me={channelCount:he.channelCount,channelCountMode:he.channelCountMode,channelInterpretation:he.channelInterpretation,numberOfInputs:he.numberOfInputs};he=re(ue,me)}return ae.set(ue,he),await ne(le,ue,he),he};return{render(le,ue){const he=ae.get(ue);return he!==void 0?Promise.resolve(he):ce(le,ue)}}},DEFAULT_OPTIONS$d={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},createChannelSplitterNodeConstructor=(re,ee,ne,ae,ce,le)=>class extends re{constructor(he,fe){const me=ae(he),ge=le({...DEFAULT_OPTIONS$d,...fe}),ve=ne(me,ge),ye=ce(me)?ee():null;super(he,!1,ve,ye)}},createChannelSplitterNodeRendererFactory=(re,ee,ne)=>()=>{const ae=new WeakMap,ce=async(le,ue)=>{let he=ee(le);if(!isOwnedByContext(he,ue)){const me={channelCount:he.channelCount,channelCountMode:he.channelCountMode,channelInterpretation:he.channelInterpretation,numberOfOutputs:he.numberOfOutputs};he=re(ue,me)}return ae.set(ue,he),await ne(le,ue,he),he};return{render(le,ue){const he=ae.get(ue);return he!==void 0?Promise.resolve(he):ce(le,ue)}}},createConnectAudioParam=re=>(ee,ne,ae)=>re(ne,ee,ae),createConnectMultipleOutputs=re=>(ee,ne,ae=0,ce=0)=>{const le=ee[ae];if(le===void 0)throw re();return isNativeAudioNode$1(ne)?le.connect(ne,0,ce):le.connect(ne,0)},createConnectedNativeAudioBufferSourceNodeFactory=re=>(ee,ne)=>{const ae=re(ee,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),ce=ee.createBuffer(1,2,44100);return ae.buffer=ce,ae.loop=!0,ae.connect(ne),ae.start(),()=>{ae.stop(),ae.disconnect(ne)}},DEFAULT_OPTIONS$c={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},createConstantSourceNodeConstructor=(re,ee,ne,ae,ce,le,ue)=>class extends re{constructor(fe,me){const ge=ce(fe),ve={...DEFAULT_OPTIONS$c,...me},ye=ae(ge,ve),be=le(ge),Ee=be?ne():null;super(fe,!1,ye,Ee),this._constantSourceNodeRenderer=Ee,this._nativeConstantSourceNode=ye,this._offset=ee(this,be,ye.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(fe){const me=typeof fe=="function"?ue(this,fe):null;this._nativeConstantSourceNode.onended=me;const ge=this._nativeConstantSourceNode.onended;this._onended=ge!==null&&ge===me?fe:ge}start(fe=0){if(this._nativeConstantSourceNode.start(fe),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=fe),this.context.state!=="closed"){setInternalStateToActive(this);const me=()=>{this._nativeConstantSourceNode.removeEventListener("ended",me),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeConstantSourceNode.addEventListener("ended",me)}}stop(fe=0){this._nativeConstantSourceNode.stop(fe),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=fe)}},createConstantSourceNodeRendererFactory=(re,ee,ne,ae,ce)=>()=>{const le=new WeakMap;let ue=null,he=null;const fe=async(me,ge)=>{let ve=ne(me);const ye=isOwnedByContext(ve,ge);if(!ye){const be={channelCount:ve.channelCount,channelCountMode:ve.channelCountMode,channelInterpretation:ve.channelInterpretation,offset:ve.offset.value};ve=ee(ge,be),ue!==null&&ve.start(ue),he!==null&&ve.stop(he)}return le.set(ge,ve),ye?await re(ge,me.offset,ve.offset):await ae(ge,me.offset,ve.offset),await ce(me,ge,ve),ve};return{set start(me){ue=me},set stop(me){he=me},render(me,ge){const ve=le.get(ge);return ve!==void 0?Promise.resolve(ve):fe(me,ge)}}},createConvertNumberToUnsignedLong=re=>ee=>(re[0]=ee,re[0]),DEFAULT_OPTIONS$b={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},createConvolverNodeConstructor=(re,ee,ne,ae,ce,le)=>class extends re{constructor(he,fe){const me=ae(he),ge={...DEFAULT_OPTIONS$b,...fe},ve=ne(me,ge),be=ce(me)?ee():null;super(he,!1,ve,be),this._isBufferNullified=!1,this._nativeConvolverNode=ve,ge.buffer!==null&&le(this,ge.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(he){if(this._nativeConvolverNode.buffer=he,he===null&&this._nativeConvolverNode.buffer!==null){const fe=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=fe.createBuffer(1,1,fe.sampleRate),this._isBufferNullified=!0,le(this,0)}else this._isBufferNullified=!1,le(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(he){this._nativeConvolverNode.normalize=he}},createConvolverNodeRendererFactory=(re,ee,ne)=>()=>{const ae=new WeakMap,ce=async(le,ue)=>{let he=ee(le);if(!isOwnedByContext(he,ue)){const me={buffer:he.buffer,channelCount:he.channelCount,channelCountMode:he.channelCountMode,channelInterpretation:he.channelInterpretation,disableNormalization:!he.normalize};he=re(ue,me)}return ae.set(ue,he),isNativeAudioNodeFaker(he)?await ne(le,ue,he.inputs[0]):await ne(le,ue,he),he};return{render(le,ue){const he=ae.get(ue);return he!==void 0?Promise.resolve(he):ce(le,ue)}}},createCreateNativeOfflineAudioContext=(re,ee)=>(ne,ae,ce)=>{if(ee===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new ee(ne,ae,ce)}catch(le){throw le.name==="SyntaxError"?re():le}},createDataCloneError=()=>new DOMException("","DataCloneError"),detachArrayBuffer=re=>{const{port1:ee,port2:ne}=new MessageChannel;return new Promise(ae=>{const ce=()=>{ne.onmessage=null,ee.close(),ne.close(),ae()};ne.onmessage=()=>ce();try{ee.postMessage(re,[re])}catch{}finally{ce()}})},createDecodeAudioData=(re,ee,ne,ae,ce,le,ue,he,fe,me,ge)=>(ve,ye)=>{const be=ue(ve)?ve:le(ve);if(ce.has(ye)){const Ee=ne();return Promise.reject(Ee)}try{ce.add(ye)}catch{}return ee(fe,()=>fe(be))?be.decodeAudioData(ye).then(Ee=>(detachArrayBuffer(ye).catch(()=>{}),ee(he,()=>he(Ee))||ge(Ee),re.add(Ee),Ee)):new Promise((Ee,Ce)=>{const Se=async()=>{try{await detachArrayBuffer(ye)}catch{}},Te=ke=>{Ce(ke),Se()};try{be.decodeAudioData(ye,ke=>{typeof ke.copyFromChannel!="function"&&(me(ke),wrapAudioBufferGetChannelDataMethod(ke)),re.add(ke),Se().then(()=>Ee(ke))},ke=>{Te(ke===null?ae():ke)})}catch(ke){Te(ke)}})},createDecrementCycleCounter=(re,ee,ne,ae,ce,le,ue,he)=>(fe,me)=>{const ge=ee.get(fe);if(ge===void 0)throw new Error("Missing the expected cycle count.");const ve=le(fe.context),ye=he(ve);if(ge===me){if(ee.delete(fe),!ye&&ue(fe)){const be=ae(fe),{outputs:Ee}=ne(fe);for(const Ce of Ee)if(isAudioNodeOutputConnection(Ce)){const Se=ae(Ce[0]);re(be,Se,Ce[1],Ce[2])}else{const Se=ce(Ce[0]);be.connect(Se,Ce[1])}}}else ee.set(fe,ge-me)},DEFAULT_OPTIONS$a={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},createDelayNodeConstructor=(re,ee,ne,ae,ce,le,ue)=>class extends re{constructor(fe,me){const ge=ce(fe),ve={...DEFAULT_OPTIONS$a,...me},ye=ae(ge,ve),be=le(ge),Ee=be?ne(ve.maxDelayTime):null;super(fe,!1,ye,Ee),this._delayTime=ee(this,be,ye.delayTime),ue(this,ve.maxDelayTime)}get delayTime(){return this._delayTime}},createDelayNodeRendererFactory=(re,ee,ne,ae,ce)=>le=>{const ue=new WeakMap,he=async(fe,me)=>{let ge=ne(fe);const ve=isOwnedByContext(ge,me);if(!ve){const ye={channelCount:ge.channelCount,channelCountMode:ge.channelCountMode,channelInterpretation:ge.channelInterpretation,delayTime:ge.delayTime.value,maxDelayTime:le};ge=ee(me,ye)}return ue.set(me,ge),ve?await re(me,fe.delayTime,ge.delayTime):await ae(me,fe.delayTime,ge.delayTime),await ce(fe,me,ge),ge};return{render(fe,me){const ge=ue.get(me);return ge!==void 0?Promise.resolve(ge):he(fe,me)}}},createDeleteActiveInputConnectionToAudioNode=re=>(ee,ne,ae,ce)=>re(ee[ce],le=>le[0]===ne&&le[1]===ae),createDeleteUnrenderedAudioWorkletNode=re=>(ee,ne)=>{re(ee).delete(ne)},isDelayNode=re=>"delayTime"in re,createDetectCycles=(re,ee,ne)=>function ae(ce,le){const ue=isAudioNode$1(le)?le:ne(re,le);if(isDelayNode(ue))return[];if(ce[0]===ue)return[ce];if(ce.includes(ue))return[];const{outputs:he}=ee(ue);return Array.from(he).map(fe=>ae([...ce,ue],fe[0])).reduce((fe,me)=>fe.concat(me),[])},getOutputAudioNodeAtIndex=(re,ee,ne)=>{const ae=ee[ne];if(ae===void 0)throw re();return ae},createDisconnectMultipleOutputs=re=>(ee,ne=void 0,ae=void 0,ce=0)=>ne===void 0?ee.forEach(le=>le.disconnect()):typeof ne=="number"?getOutputAudioNodeAtIndex(re,ee,ne).disconnect():isNativeAudioNode$1(ne)?ae===void 0?ee.forEach(le=>le.disconnect(ne)):ce===void 0?getOutputAudioNodeAtIndex(re,ee,ae).disconnect(ne,0):getOutputAudioNodeAtIndex(re,ee,ae).disconnect(ne,0,ce):ae===void 0?ee.forEach(le=>le.disconnect(ne)):getOutputAudioNodeAtIndex(re,ee,ae).disconnect(ne,0),DEFAULT_OPTIONS$9={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},createDynamicsCompressorNodeConstructor=(re,ee,ne,ae,ce,le,ue,he)=>class extends re{constructor(me,ge){const ve=le(me),ye={...DEFAULT_OPTIONS$9,...ge},be=ae(ve,ye),Ee=ue(ve),Ce=Ee?ne():null;super(me,!1,be,Ce),this._attack=ee(this,Ee,be.attack),this._knee=ee(this,Ee,be.knee),this._nativeDynamicsCompressorNode=be,this._ratio=ee(this,Ee,be.ratio),this._release=ee(this,Ee,be.release),this._threshold=ee(this,Ee,be.threshold),he(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(me){const ge=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=me,me>2)throw this._nativeDynamicsCompressorNode.channelCount=ge,ce()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(me){const ge=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=me,me==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=ge,ce()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},createDynamicsCompressorNodeRendererFactory=(re,ee,ne,ae,ce)=>()=>{const le=new WeakMap,ue=async(he,fe)=>{let me=ne(he);const ge=isOwnedByContext(me,fe);if(!ge){const ve={attack:me.attack.value,channelCount:me.channelCount,channelCountMode:me.channelCountMode,channelInterpretation:me.channelInterpretation,knee:me.knee.value,ratio:me.ratio.value,release:me.release.value,threshold:me.threshold.value};me=ee(fe,ve)}return le.set(fe,me),ge?(await re(fe,he.attack,me.attack),await re(fe,he.knee,me.knee),await re(fe,he.ratio,me.ratio),await re(fe,he.release,me.release),await re(fe,he.threshold,me.threshold)):(await ae(fe,he.attack,me.attack),await ae(fe,he.knee,me.knee),await ae(fe,he.ratio,me.ratio),await ae(fe,he.release,me.release),await ae(fe,he.threshold,me.threshold)),await ce(he,fe,me),me};return{render(he,fe){const me=le.get(fe);return me!==void 0?Promise.resolve(me):ue(he,fe)}}},createEncodingError=()=>new DOMException("","EncodingError"),createEvaluateSource=re=>ee=>new Promise((ne,ae)=>{if(re===null){ae(new SyntaxError);return}const ce=re.document.head;if(ce===null)ae(new SyntaxError);else{const le=re.document.createElement("script"),ue=new Blob([ee],{type:"application/javascript"}),he=URL.createObjectURL(ue),fe=re.onerror,me=()=>{re.onerror=fe,URL.revokeObjectURL(he)};re.onerror=(ge,ve,ye,be,Ee)=>{if(ve===he||ve===re.location.href&&ye===1&&be===1)return me(),ae(Ee),!1;if(fe!==null)return fe(ge,ve,ye,be,Ee)},le.onerror=()=>{me(),ae(new SyntaxError)},le.onload=()=>{me(),ne()},le.src=he,le.type="module",ce.appendChild(le)}}),createEventTargetConstructor=re=>class{constructor(ne){this._nativeEventTarget=ne,this._listeners=new WeakMap}addEventListener(ne,ae,ce){if(ae!==null){let le=this._listeners.get(ae);le===void 0&&(le=re(this,ae),typeof ae=="function"&&this._listeners.set(ae,le)),this._nativeEventTarget.addEventListener(ne,le,ce)}}dispatchEvent(ne){return this._nativeEventTarget.dispatchEvent(ne)}removeEventListener(ne,ae,ce){const le=ae===null?void 0:this._listeners.get(ae);this._nativeEventTarget.removeEventListener(ne,le===void 0?null:le,ce)}},createExposeCurrentFrameAndCurrentTime=re=>(ee,ne,ae)=>{Object.defineProperties(re,{currentFrame:{configurable:!0,get(){return Math.round(ee*ne)}},currentTime:{configurable:!0,get(){return ee}}});try{return ae()}finally{re!==null&&(delete re.currentFrame,delete re.currentTime)}},createFetchSource=re=>async ee=>{try{const ne=await fetch(ee);if(ne.ok)return[await ne.text(),ne.url]}catch{}throw re()},DEFAULT_OPTIONS$8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},createGainNodeConstructor=(re,ee,ne,ae,ce,le)=>class extends re{constructor(he,fe){const me=ce(he),ge={...DEFAULT_OPTIONS$8,...fe},ve=ae(me,ge),ye=le(me),be=ye?ne():null;super(he,!1,ve,be),this._gain=ee(this,ye,ve.gain,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get gain(){return this._gain}},createGainNodeRendererFactory=(re,ee,ne,ae,ce)=>()=>{const le=new WeakMap,ue=async(he,fe)=>{let me=ne(he);const ge=isOwnedByContext(me,fe);if(!ge){const ve={channelCount:me.channelCount,channelCountMode:me.channelCountMode,channelInterpretation:me.channelInterpretation,gain:me.gain.value};me=ee(fe,ve)}return le.set(fe,me),ge?await re(fe,he.gain,me.gain):await ae(fe,he.gain,me.gain),await ce(he,fe,me),me};return{render(he,fe){const me=le.get(fe);return me!==void 0?Promise.resolve(me):ue(he,fe)}}},createGetActiveAudioWorkletNodeInputs=(re,ee)=>ne=>ee(re,ne),createGetAudioNodeRenderer=re=>ee=>{const ne=re(ee);if(ne.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return ne.renderer},createGetAudioNodeTailTime=re=>ee=>{var ne;return(ne=re.get(ee))!==null&&ne!==void 0?ne:0},createGetAudioParamRenderer=re=>ee=>{const ne=re(ee);if(ne.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return ne.renderer},createGetBackupOfflineAudioContext=re=>ee=>re.get(ee),createInvalidStateError=()=>new DOMException("","InvalidStateError"),createGetNativeContext=re=>ee=>{const ne=re.get(ee);if(ne===void 0)throw createInvalidStateError();return ne},createGetOrCreateBackupOfflineAudioContext=(re,ee)=>ne=>{let ae=re.get(ne);if(ae!==void 0)return ae;if(ee===null)throw new Error("Missing the native OfflineAudioContext constructor.");return ae=new ee(1,1,44100),re.set(ne,ae),ae},createGetUnrenderedAudioWorkletNodes=re=>ee=>{const ne=re.get(ee);if(ne===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return ne},createInvalidAccessError=()=>new DOMException("","InvalidAccessError"),wrapIIRFilterNodeGetFrequencyResponseMethod=re=>{re.getFrequencyResponse=(ee=>(ne,ae,ce)=>{if(ne.length!==ae.length||ae.length!==ce.length)throw createInvalidAccessError();return ee.call(re,ne,ae,ce)})(re.getFrequencyResponse)},DEFAULT_OPTIONS$7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},createIIRFilterNodeConstructor=(re,ee,ne,ae,ce,le)=>class extends re{constructor(he,fe){const me=ae(he),ge=ce(me),ve={...DEFAULT_OPTIONS$7,...fe},ye=ee(me,ge?null:he.baseLatency,ve),be=ge?ne(ve.feedback,ve.feedforward):null;super(he,!1,ye,be),wrapIIRFilterNodeGetFrequencyResponseMethod(ye),this._nativeIIRFilterNode=ye,le(this,1)}getFrequencyResponse(he,fe,me){return this._nativeIIRFilterNode.getFrequencyResponse(he,fe,me)}},filterBuffer=(re,ee,ne,ae,ce,le,ue,he,fe,me,ge)=>{const ve=me.length;let ye=he;for(let be=0;be<ve;be+=1){let Ee=ne[0]*me[be];for(let Ce=1;Ce<ce;Ce+=1){const Se=ye-Ce&fe-1;Ee+=ne[Ce]*le[Se],Ee-=re[Ce]*ue[Se]}for(let Ce=ce;Ce<ae;Ce+=1)Ee+=ne[Ce]*le[ye-Ce&fe-1];for(let Ce=ce;Ce<ee;Ce+=1)Ee-=re[Ce]*ue[ye-Ce&fe-1];le[ye]=me[be],ue[ye]=Ee,ye=ye+1&fe-1,ge[be]=Ee}return ye},filterFullBuffer=(re,ee,ne,ae)=>{const ce=ne instanceof Float64Array?ne:new Float64Array(ne),le=ae instanceof Float64Array?ae:new Float64Array(ae),ue=ce.length,he=le.length,fe=Math.min(ue,he);if(ce[0]!==1){for(let Ee=0;Ee<ue;Ee+=1)le[Ee]/=ce[0];for(let Ee=1;Ee<he;Ee+=1)ce[Ee]/=ce[0]}const me=32,ge=new Float32Array(me),ve=new Float32Array(me),ye=ee.createBuffer(re.numberOfChannels,re.length,re.sampleRate),be=re.numberOfChannels;for(let Ee=0;Ee<be;Ee+=1){const Ce=re.getChannelData(Ee),Se=ye.getChannelData(Ee);ge.fill(0),ve.fill(0),filterBuffer(ce,ue,le,he,fe,ge,ve,0,me,Ce,Se)}return ye},createIIRFilterNodeRendererFactory=(re,ee,ne,ae,ce)=>(le,ue)=>{const he=new WeakMap;let fe=null;const me=async(ge,ve)=>{let ye=null,be=ee(ge);const Ee=isOwnedByContext(be,ve);if(ve.createIIRFilter===void 0?ye=re(ve,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):Ee||(be=ve.createIIRFilter(ue,le)),he.set(ve,ye===null?be:ye),ye!==null){if(fe===null){if(ne===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Se=new ne(ge.context.destination.channelCount,ge.context.length,ve.sampleRate);fe=(async()=>{await ae(ge,Se,Se.destination);const Te=await ce(Se);return filterFullBuffer(Te,ve,le,ue)})()}const Ce=await fe;return ye.buffer=Ce,ye.start(0),ye}return await ae(ge,ve,be),be};return{render(ge,ve){const ye=he.get(ve);return ye!==void 0?Promise.resolve(ye):me(ge,ve)}}},createIncrementCycleCounterFactory=(re,ee,ne,ae,ce,le)=>ue=>(he,fe)=>{const me=re.get(he);if(me===void 0){if(!ue&&le(he)){const ge=ae(he),{outputs:ve}=ne(he);for(const ye of ve)if(isAudioNodeOutputConnection(ye)){const be=ae(ye[0]);ee(ge,be,ye[1],ye[2])}else{const be=ce(ye[0]);ge.disconnect(be,ye[1])}}re.set(he,fe)}else re.set(he,me+fe)},createIsAnyAudioContext=(re,ee)=>ne=>{const ae=re.get(ne);return ee(ae)||ee(ne)},createIsAnyAudioNode=(re,ee)=>ne=>re.has(ne)||ee(ne),createIsAnyAudioParam=(re,ee)=>ne=>re.has(ne)||ee(ne),createIsAnyOfflineAudioContext=(re,ee)=>ne=>{const ae=re.get(ne);return ee(ae)||ee(ne)},createIsNativeAudioContext=re=>ee=>re!==null&&ee instanceof re,createIsNativeAudioNode=re=>ee=>re!==null&&typeof re.AudioNode=="function"&&ee instanceof re.AudioNode,createIsNativeAudioParam=re=>ee=>re!==null&&typeof re.AudioParam=="function"&&ee instanceof re.AudioParam,createIsNativeContext=(re,ee)=>ne=>re(ne)||ee(ne),createIsNativeOfflineAudioContext=re=>ee=>re!==null&&ee instanceof re,createIsSecureContext=re=>re!==null&&re.isSecureContext,createIsSupportedPromise=async(re,ee,ne,ae,ce,le,ue,he,fe,me,ge,ve,ye,be,Ee,Ce)=>re(ee,ee)&&re(ne,ne)&&re(ce,ce)&&re(le,le)&&re(he,he)&&re(fe,fe)&&re(me,me)&&re(ge,ge)&&re(ve,ve)&&re(ye,ye)&&re(be,be)?(await Promise.all([re(ae,ae),re(ue,ue),re(Ee,Ee),re(Ce,Ce)])).every(Te=>Te):!1,createMediaElementAudioSourceNodeConstructor=(re,ee,ne,ae)=>class extends re{constructor(le,ue){const he=ne(le),fe=ee(he,ue);if(ae(he))throw TypeError();super(le,!0,fe,null),this._nativeMediaElementAudioSourceNode=fe}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},DEFAULT_OPTIONS$6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},createMediaStreamAudioDestinationNodeConstructor=(re,ee,ne,ae)=>class extends re{constructor(le,ue){const he=ne(le);if(ae(he))throw new TypeError;const fe={...DEFAULT_OPTIONS$6,...ue},me=ee(he,fe);super(le,!1,me,null),this._nativeMediaStreamAudioDestinationNode=me}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},createMediaStreamAudioSourceNodeConstructor=(re,ee,ne,ae)=>class extends re{constructor(le,ue){const he=ne(le),fe=ee(he,ue);if(ae(he))throw new TypeError;super(le,!0,fe,null),this._nativeMediaStreamAudioSourceNode=fe}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},createMediaStreamTrackAudioSourceNodeConstructor=(re,ee,ne)=>class extends re{constructor(ce,le){const ue=ne(ce),he=ee(ue,le);super(ce,!0,he,null)}},createMinimalBaseAudioContextConstructor=(re,ee,ne,ae,ce,le)=>class extends ne{constructor(he,fe){super(he),this._nativeContext=he,CONTEXT_STORE.set(this,he),ae(he)&&ce.set(he,new Set),this._destination=new re(this,fe),this._listener=ee(this,he),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(he){const fe=typeof he=="function"?le(this,he):null;this._nativeContext.onstatechange=fe;const me=this._nativeContext.onstatechange;this._onstatechange=me!==null&&me===fe?he:me}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},testPromiseSupport=re=>{const ee=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const ne=re.decodeAudioData(ee.buffer,()=>{});return ne===void 0?!1:(ne.catch(()=>{}),!0)}catch{}return!1},createMonitorConnections=(re,ee)=>(ne,ae,ce)=>{const le=new Set;return ne.connect=(ue=>(he,fe=0,me=0)=>{const ge=le.size===0;if(ee(he))return ue.call(ne,he,fe,me),re(le,[he,fe,me],ve=>ve[0]===he&&ve[1]===fe&&ve[2]===me,!0),ge&&ae(),he;ue.call(ne,he,fe),re(le,[he,fe],ve=>ve[0]===he&&ve[1]===fe,!0),ge&&ae()})(ne.connect),ne.disconnect=(ue=>(he,fe,me)=>{const ge=le.size>0;if(he===void 0)ue.apply(ne),le.clear();else if(typeof he=="number"){ue.call(ne,he);for(const ye of le)ye[1]===he&&le.delete(ye)}else{ee(he)?ue.call(ne,he,fe,me):ue.call(ne,he,fe);for(const ye of le)ye[0]===he&&(fe===void 0||ye[1]===fe)&&(me===void 0||ye[2]===me)&&le.delete(ye)}const ve=le.size===0;ge&&ve&&ce()})(ne.disconnect),ne},assignNativeAudioNodeOption=(re,ee,ne)=>{const ae=ee[ne];ae!==void 0&&ae!==re[ne]&&(re[ne]=ae)},assignNativeAudioNodeOptions=(re,ee)=>{assignNativeAudioNodeOption(re,ee,"channelCount"),assignNativeAudioNodeOption(re,ee,"channelCountMode"),assignNativeAudioNodeOption(re,ee,"channelInterpretation")},testAnalyserNodeGetFloatTimeDomainDataMethodSupport=re=>typeof re.getFloatTimeDomainData=="function",wrapAnalyserNodeGetFloatTimeDomainDataMethod=re=>{re.getFloatTimeDomainData=ee=>{const ne=new Uint8Array(ee.length);re.getByteTimeDomainData(ne);const ae=Math.max(ne.length,re.fftSize);for(let ce=0;ce<ae;ce+=1)ee[ce]=(ne[ce]-128)*.0078125;return ee}},createNativeAnalyserNodeFactory=(re,ee)=>(ne,ae)=>{const ce=ne.createAnalyser();if(assignNativeAudioNodeOptions(ce,ae),!(ae.maxDecibels>ae.minDecibels))throw ee();return assignNativeAudioNodeOption(ce,ae,"fftSize"),assignNativeAudioNodeOption(ce,ae,"maxDecibels"),assignNativeAudioNodeOption(ce,ae,"minDecibels"),assignNativeAudioNodeOption(ce,ae,"smoothingTimeConstant"),re(testAnalyserNodeGetFloatTimeDomainDataMethodSupport,()=>testAnalyserNodeGetFloatTimeDomainDataMethodSupport(ce))||wrapAnalyserNodeGetFloatTimeDomainDataMethod(ce),ce},createNativeAudioBufferConstructor=re=>re===null?null:re.hasOwnProperty("AudioBuffer")?re.AudioBuffer:null,assignNativeAudioNodeAudioParamValue=(re,ee,ne)=>{const ae=ee[ne];ae!==void 0&&ae!==re[ne].value&&(re[ne].value=ae)},wrapAudioBufferSourceNodeStartMethodConsecutiveCalls=re=>{re.start=(ee=>{let ne=!1;return(ae=0,ce=0,le)=>{if(ne)throw createInvalidStateError();ee.call(re,ae,ce,le),ne=!0}})(re.start)},wrapAudioScheduledSourceNodeStartMethodNegativeParameters=re=>{re.start=(ee=>(ne=0,ae=0,ce)=>{if(typeof ce=="number"&&ce<0||ae<0||ne<0)throw new RangeError("The parameters can't be negative.");ee.call(re,ne,ae,ce)})(re.start)},wrapAudioScheduledSourceNodeStopMethodNegativeParameters=re=>{re.stop=(ee=>(ne=0)=>{if(ne<0)throw new RangeError("The parameter can't be negative.");ee.call(re,ne)})(re.stop)},createNativeAudioBufferSourceNodeFactory=(re,ee,ne,ae,ce,le,ue,he,fe,me,ge)=>(ve,ye)=>{const be=ve.createBufferSource();return assignNativeAudioNodeOptions(be,ye),assignNativeAudioNodeAudioParamValue(be,ye,"playbackRate"),assignNativeAudioNodeOption(be,ye,"buffer"),assignNativeAudioNodeOption(be,ye,"loop"),assignNativeAudioNodeOption(be,ye,"loopEnd"),assignNativeAudioNodeOption(be,ye,"loopStart"),ee(ne,()=>ne(ve))||wrapAudioBufferSourceNodeStartMethodConsecutiveCalls(be),ee(ae,()=>ae(ve))||fe(be),ee(ce,()=>ce(ve))||me(be,ve),ee(le,()=>le(ve))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(be),ee(ue,()=>ue(ve))||ge(be,ve),ee(he,()=>he(ve))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(be),re(ve,be),be},createNativeAudioContextConstructor=re=>re===null?null:re.hasOwnProperty("AudioContext")?re.AudioContext:re.hasOwnProperty("webkitAudioContext")?re.webkitAudioContext:null,createNativeAudioDestinationNodeFactory=(re,ee)=>(ne,ae,ce)=>{const le=ne.destination;if(le.channelCount!==ae)try{le.channelCount=ae}catch{}ce&&le.channelCountMode!=="explicit"&&(le.channelCountMode="explicit"),le.maxChannelCount===0&&Object.defineProperty(le,"maxChannelCount",{value:ae});const ue=re(ne,{channelCount:ae,channelCountMode:le.channelCountMode,channelInterpretation:le.channelInterpretation,gain:1});return ee(ue,"channelCount",he=>()=>he.call(ue),he=>fe=>{he.call(ue,fe);try{le.channelCount=fe}catch(me){if(fe>le.maxChannelCount)throw me}}),ee(ue,"channelCountMode",he=>()=>he.call(ue),he=>fe=>{he.call(ue,fe),le.channelCountMode=fe}),ee(ue,"channelInterpretation",he=>()=>he.call(ue),he=>fe=>{he.call(ue,fe),le.channelInterpretation=fe}),Object.defineProperty(ue,"maxChannelCount",{get:()=>le.maxChannelCount}),ue.connect(le),ue},createNativeAudioWorkletNodeConstructor=re=>re===null?null:re.hasOwnProperty("AudioWorkletNode")?re.AudioWorkletNode:null,testClonabilityOfAudioWorkletNodeOptions=re=>{const{port1:ee}=new MessageChannel;try{ee.postMessage(re)}finally{ee.close()}},createNativeAudioWorkletNodeFactory=(re,ee,ne,ae,ce)=>(le,ue,he,fe,me,ge)=>{if(he!==null)try{const ve=new he(le,fe,ge),ye=new Map;let be=null;if(Object.defineProperties(ve,{channelCount:{get:()=>ge.channelCount,set:()=>{throw re()}},channelCountMode:{get:()=>"explicit",set:()=>{throw re()}},onprocessorerror:{get:()=>be,set:Ee=>{typeof be=="function"&&ve.removeEventListener("processorerror",be),be=typeof Ee=="function"?Ee:null,typeof be=="function"&&ve.addEventListener("processorerror",be)}}}),ve.addEventListener=(Ee=>(...Ce)=>{if(Ce[0]==="processorerror"){const Se=typeof Ce[1]=="function"?Ce[1]:typeof Ce[1]=="object"&&Ce[1]!==null&&typeof Ce[1].handleEvent=="function"?Ce[1].handleEvent:null;if(Se!==null){const Te=ye.get(Ce[1]);Te!==void 0?Ce[1]=Te:(Ce[1]=ke=>{ke.type==="error"?(Object.defineProperties(ke,{type:{value:"processorerror"}}),Se(ke)):Se(new ErrorEvent(Ce[0],{...ke}))},ye.set(Se,Ce[1]))}}return Ee.call(ve,"error",Ce[1],Ce[2]),Ee.call(ve,...Ce)})(ve.addEventListener),ve.removeEventListener=(Ee=>(...Ce)=>{if(Ce[0]==="processorerror"){const Se=ye.get(Ce[1]);Se!==void 0&&(ye.delete(Ce[1]),Ce[1]=Se)}return Ee.call(ve,"error",Ce[1],Ce[2]),Ee.call(ve,Ce[0],Ce[1],Ce[2])})(ve.removeEventListener),ge.numberOfOutputs!==0){const Ee=ne(le,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return ve.connect(Ee).connect(le.destination),ce(ve,()=>Ee.disconnect(),()=>Ee.connect(le.destination))}return ve}catch(ve){throw ve.code===11?ae():ve}if(me===void 0)throw ae();return testClonabilityOfAudioWorkletNodeOptions(ge),ee(le,ue,me,ge)},computeBufferSize=(re,ee)=>re===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(re*ee))))),cloneAudioWorkletNodeOptions=re=>new Promise((ee,ne)=>{const{port1:ae,port2:ce}=new MessageChannel;ae.onmessage=({data:le})=>{ae.close(),ce.close(),ee(le)},ae.onmessageerror=({data:le})=>{ae.close(),ce.close(),ne(le)},ce.postMessage(re)}),createAudioWorkletProcessorPromise=async(re,ee)=>{const ne=await cloneAudioWorkletNodeOptions(ee);return new re(ne)},createAudioWorkletProcessor=(re,ee,ne,ae)=>{let ce=NODE_TO_PROCESSOR_MAPS.get(re);ce===void 0&&(ce=new WeakMap,NODE_TO_PROCESSOR_MAPS.set(re,ce));const le=createAudioWorkletProcessorPromise(ne,ae);return ce.set(ee,le),le},createNativeAudioWorkletNodeFakerFactory=(re,ee,ne,ae,ce,le,ue,he,fe,me,ge,ve,ye)=>(be,Ee,Ce,Se)=>{if(Se.numberOfInputs===0&&Se.numberOfOutputs===0)throw fe();const Te=Array.isArray(Se.outputChannelCount)?Se.outputChannelCount:Array.from(Se.outputChannelCount);if(Te.some(Ut=>Ut<1))throw fe();if(Te.length!==Se.numberOfOutputs)throw ee();if(Se.channelCountMode!=="explicit")throw fe();const ke=Se.channelCount*Se.numberOfInputs,Ne=Te.reduce((Ut,tn)=>Ut+tn,0),Fe=Ce.parameterDescriptors===void 0?0:Ce.parameterDescriptors.length;if(ke+Fe>6||Ne>6)throw fe();const De=new MessageChannel,Oe=[],Re=[];for(let Ut=0;Ut<Se.numberOfInputs;Ut+=1)Oe.push(ue(be,{channelCount:Se.channelCount,channelCountMode:Se.channelCountMode,channelInterpretation:Se.channelInterpretation,gain:1})),Re.push(ce(be,{channelCount:Se.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Se.channelCount}));const Be=[];if(Ce.parameterDescriptors!==void 0)for(const{defaultValue:Ut,maxValue:tn,minValue:dn,name:xn}of Ce.parameterDescriptors){const An=le(be,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Se.parameterData[xn]!==void 0?Se.parameterData[xn]:Ut===void 0?0:Ut});Object.defineProperties(An.offset,{defaultValue:{get:()=>Ut===void 0?0:Ut},maxValue:{get:()=>tn===void 0?MOST_POSITIVE_SINGLE_FLOAT:tn},minValue:{get:()=>dn===void 0?MOST_NEGATIVE_SINGLE_FLOAT:dn}}),Be.push(An)}const Le=ae(be,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,ke+Fe)}),je=computeBufferSize(Ee,be.sampleRate),Ge=he(be,je,ke+Fe,Math.max(1,Ne)),qe=ce(be,{channelCount:Math.max(1,Ne),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,Ne)}),Ue=[];for(let Ut=0;Ut<Se.numberOfOutputs;Ut+=1)Ue.push(ae(be,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Te[Ut]}));for(let Ut=0;Ut<Se.numberOfInputs;Ut+=1){Oe[Ut].connect(Re[Ut]);for(let tn=0;tn<Se.channelCount;tn+=1)Re[Ut].connect(Le,tn,Ut*Se.channelCount+tn)}const ze=new ReadOnlyMap(Ce.parameterDescriptors===void 0?[]:Ce.parameterDescriptors.map(({name:Ut},tn)=>{const dn=Be[tn];return dn.connect(Le,0,ke+tn),dn.start(0),[Ut,dn.offset]}));Le.connect(Ge);let He=Se.channelInterpretation,Ye=null;const Xe=Se.numberOfOutputs===0?[Ge]:Ue,We={get bufferSize(){return je},get channelCount(){return Se.channelCount},set channelCount(Ut){throw ne()},get channelCountMode(){return Se.channelCountMode},set channelCountMode(Ut){throw ne()},get channelInterpretation(){return He},set channelInterpretation(Ut){for(const tn of Oe)tn.channelInterpretation=Ut;He=Ut},get context(){return Ge.context},get inputs(){return Oe},get numberOfInputs(){return Se.numberOfInputs},get numberOfOutputs(){return Se.numberOfOutputs},get onprocessorerror(){return Ye},set onprocessorerror(Ut){typeof Ye=="function"&&We.removeEventListener("processorerror",Ye),Ye=typeof Ut=="function"?Ut:null,typeof Ye=="function"&&We.addEventListener("processorerror",Ye)},get parameters(){return ze},get port(){return De.port2},addEventListener(...Ut){return Ge.addEventListener(Ut[0],Ut[1],Ut[2])},connect:re.bind(null,Xe),disconnect:me.bind(null,Xe),dispatchEvent(...Ut){return Ge.dispatchEvent(Ut[0])},removeEventListener(...Ut){return Ge.removeEventListener(Ut[0],Ut[1],Ut[2])}},Ze=new Map;De.port1.addEventListener=(Ut=>(...tn)=>{if(tn[0]==="message"){const dn=typeof tn[1]=="function"?tn[1]:typeof tn[1]=="object"&&tn[1]!==null&&typeof tn[1].handleEvent=="function"?tn[1].handleEvent:null;if(dn!==null){const xn=Ze.get(tn[1]);xn!==void 0?tn[1]=xn:(tn[1]=An=>{ge(be.currentTime,be.sampleRate,()=>dn(An))},Ze.set(dn,tn[1]))}}return Ut.call(De.port1,tn[0],tn[1],tn[2])})(De.port1.addEventListener),De.port1.removeEventListener=(Ut=>(...tn)=>{if(tn[0]==="message"){const dn=Ze.get(tn[1]);dn!==void 0&&(Ze.delete(tn[1]),tn[1]=dn)}return Ut.call(De.port1,tn[0],tn[1],tn[2])})(De.port1.removeEventListener);let Vt=null;Object.defineProperty(De.port1,"onmessage",{get:()=>Vt,set:Ut=>{typeof Vt=="function"&&De.port1.removeEventListener("message",Vt),Vt=typeof Ut=="function"?Ut:null,typeof Vt=="function"&&(De.port1.addEventListener("message",Vt),De.port1.start())}}),Ce.prototype.port=De.port1;let Qt=null;createAudioWorkletProcessor(be,We,Ce,Se).then(Ut=>Qt=Ut);const Jt=createNestedArrays(Se.numberOfInputs,Se.channelCount),rn=createNestedArrays(Se.numberOfOutputs,Te),nn=Ce.parameterDescriptors===void 0?[]:Ce.parameterDescriptors.reduce((Ut,{name:tn})=>({...Ut,[tn]:new Float32Array(128)}),{});let fn=!0;const an=()=>{Se.numberOfOutputs>0&&Ge.disconnect(qe);for(let Ut=0,tn=0;Ut<Se.numberOfOutputs;Ut+=1){const dn=Ue[Ut];for(let xn=0;xn<Te[Ut];xn+=1)qe.disconnect(dn,tn+xn,xn);tn+=Te[Ut]}},un=new Map;Ge.onaudioprocess=({inputBuffer:Ut,outputBuffer:tn})=>{if(Qt!==null){const dn=ve(We);for(let xn=0;xn<je;xn+=128){for(let An=0;An<Se.numberOfInputs;An+=1)for(let vn=0;vn<Se.channelCount;vn+=1)copyFromChannel(Ut,Jt[An],vn,vn,xn);Ce.parameterDescriptors!==void 0&&Ce.parameterDescriptors.forEach(({name:An},vn)=>{copyFromChannel(Ut,nn,An,ke+vn,xn)});for(let An=0;An<Se.numberOfInputs;An+=1)for(let vn=0;vn<Te[An];vn+=1)rn[An][vn].byteLength===0&&(rn[An][vn]=new Float32Array(128));try{const An=Jt.map((Nn,Gn)=>{if(dn[Gn].size>0)return un.set(Gn,je/128),Nn;const Vn=un.get(Gn);return Vn===void 0?[]:(Nn.every(Hn=>Hn.every(hs=>hs===0))&&(Vn===1?un.delete(Gn):un.set(Gn,Vn-1)),Nn)});fn=ge(be.currentTime+xn/be.sampleRate,be.sampleRate,()=>Qt.process(An,rn,nn));for(let Nn=0,Gn=0;Nn<Se.numberOfOutputs;Nn+=1){for(let Wn=0;Wn<Te[Nn];Wn+=1)copyToChannel(tn,rn[Nn],Wn,Gn+Wn,xn);Gn+=Te[Nn]}}catch(An){fn=!1,We.dispatchEvent(new ErrorEvent("processorerror",{colno:An.colno,filename:An.filename,lineno:An.lineno,message:An.message}))}if(!fn){for(let An=0;An<Se.numberOfInputs;An+=1){Oe[An].disconnect(Re[An]);for(let vn=0;vn<Se.channelCount;vn+=1)Re[xn].disconnect(Le,vn,An*Se.channelCount+vn)}if(Ce.parameterDescriptors!==void 0){const An=Ce.parameterDescriptors.length;for(let vn=0;vn<An;vn+=1){const Nn=Be[vn];Nn.disconnect(Le,0,ke+vn),Nn.stop()}}Le.disconnect(Ge),Ge.onaudioprocess=null,bn?an():On();break}}}};let bn=!1;const En=ue(be,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),$n=()=>Ge.connect(En).connect(be.destination),On=()=>{Ge.disconnect(En),En.disconnect()},zn=()=>{if(fn){On(),Se.numberOfOutputs>0&&Ge.connect(qe);for(let Ut=0,tn=0;Ut<Se.numberOfOutputs;Ut+=1){const dn=Ue[Ut];for(let xn=0;xn<Te[Ut];xn+=1)qe.connect(dn,tn+xn,xn);tn+=Te[Ut]}}bn=!0},Rn=()=>{fn&&($n(),an()),bn=!1};return $n(),ye(We,zn,Rn)},createNativeBiquadFilterNode=(re,ee)=>{const ne=re.createBiquadFilter();return assignNativeAudioNodeOptions(ne,ee),assignNativeAudioNodeAudioParamValue(ne,ee,"Q"),assignNativeAudioNodeAudioParamValue(ne,ee,"detune"),assignNativeAudioNodeAudioParamValue(ne,ee,"frequency"),assignNativeAudioNodeAudioParamValue(ne,ee,"gain"),assignNativeAudioNodeOption(ne,ee,"type"),ne},createNativeChannelMergerNodeFactory=(re,ee)=>(ne,ae)=>{const ce=ne.createChannelMerger(ae.numberOfInputs);return re!==null&&re.name==="webkitAudioContext"&&ee(ne,ce),assignNativeAudioNodeOptions(ce,ae),ce},wrapChannelSplitterNode=re=>{const ee=re.numberOfOutputs;Object.defineProperty(re,"channelCount",{get:()=>ee,set:ne=>{if(ne!==ee)throw createInvalidStateError()}}),Object.defineProperty(re,"channelCountMode",{get:()=>"explicit",set:ne=>{if(ne!=="explicit")throw createInvalidStateError()}}),Object.defineProperty(re,"channelInterpretation",{get:()=>"discrete",set:ne=>{if(ne!=="discrete")throw createInvalidStateError()}})},createNativeChannelSplitterNode=(re,ee)=>{const ne=re.createChannelSplitter(ee.numberOfOutputs);return assignNativeAudioNodeOptions(ne,ee),wrapChannelSplitterNode(ne),ne},createNativeConstantSourceNodeFactory=(re,ee,ne,ae,ce)=>(le,ue)=>{if(le.createConstantSource===void 0)return ne(le,ue);const he=le.createConstantSource();return assignNativeAudioNodeOptions(he,ue),assignNativeAudioNodeAudioParamValue(he,ue,"offset"),ee(ae,()=>ae(le))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(he),ee(ce,()=>ce(le))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(he),re(le,he),he},interceptConnections=(re,ee)=>(re.connect=ee.connect.bind(ee),re.disconnect=ee.disconnect.bind(ee),re),createNativeConstantSourceNodeFakerFactory=(re,ee,ne,ae)=>(ce,{offset:le,...ue})=>{const he=ce.createBuffer(1,2,44100),fe=ee(ce,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),me=ne(ce,{...ue,gain:le}),ge=he.getChannelData(0);ge[0]=1,ge[1]=1,fe.buffer=he,fe.loop=!0;const ve={get bufferSize(){},get channelCount(){return me.channelCount},set channelCount(Ee){me.channelCount=Ee},get channelCountMode(){return me.channelCountMode},set channelCountMode(Ee){me.channelCountMode=Ee},get channelInterpretation(){return me.channelInterpretation},set channelInterpretation(Ee){me.channelInterpretation=Ee},get context(){return me.context},get inputs(){return[]},get numberOfInputs(){return fe.numberOfInputs},get numberOfOutputs(){return me.numberOfOutputs},get offset(){return me.gain},get onended(){return fe.onended},set onended(Ee){fe.onended=Ee},addEventListener(...Ee){return fe.addEventListener(Ee[0],Ee[1],Ee[2])},dispatchEvent(...Ee){return fe.dispatchEvent(Ee[0])},removeEventListener(...Ee){return fe.removeEventListener(Ee[0],Ee[1],Ee[2])},start(Ee=0){fe.start.call(fe,Ee)},stop(Ee=0){fe.stop.call(fe,Ee)}},ye=()=>fe.connect(me),be=()=>fe.disconnect(me);return re(ce,fe),ae(interceptConnections(ve,me),ye,be)},createNativeConvolverNodeFactory=(re,ee)=>(ne,ae)=>{const ce=ne.createConvolver();if(assignNativeAudioNodeOptions(ce,ae),ae.disableNormalization===ce.normalize&&(ce.normalize=!ae.disableNormalization),assignNativeAudioNodeOption(ce,ae,"buffer"),ae.channelCount>2||(ee(ce,"channelCount",le=>()=>le.call(ce),le=>ue=>{if(ue>2)throw re();return le.call(ce,ue)}),ae.channelCountMode==="max"))throw re();return ee(ce,"channelCountMode",le=>()=>le.call(ce),le=>ue=>{if(ue==="max")throw re();return le.call(ce,ue)}),ce},createNativeDelayNode=(re,ee)=>{const ne=re.createDelay(ee.maxDelayTime);return assignNativeAudioNodeOptions(ne,ee),assignNativeAudioNodeAudioParamValue(ne,ee,"delayTime"),ne},createNativeDynamicsCompressorNodeFactory=re=>(ee,ne)=>{const ae=ee.createDynamicsCompressor();if(assignNativeAudioNodeOptions(ae,ne),ne.channelCount>2||ne.channelCountMode==="max")throw re();return assignNativeAudioNodeAudioParamValue(ae,ne,"attack"),assignNativeAudioNodeAudioParamValue(ae,ne,"knee"),assignNativeAudioNodeAudioParamValue(ae,ne,"ratio"),assignNativeAudioNodeAudioParamValue(ae,ne,"release"),assignNativeAudioNodeAudioParamValue(ae,ne,"threshold"),ae},createNativeGainNode=(re,ee)=>{const ne=re.createGain();return assignNativeAudioNodeOptions(ne,ee),assignNativeAudioNodeAudioParamValue(ne,ee,"gain"),ne},createNativeIIRFilterNodeFactory=re=>(ee,ne,ae)=>{if(ee.createIIRFilter===void 0)return re(ee,ne,ae);const ce=ee.createIIRFilter(ae.feedforward,ae.feedback);return assignNativeAudioNodeOptions(ce,ae),ce};function divide(re,ee){const ne=ee[0]*ee[0]+ee[1]*ee[1];return[(re[0]*ee[0]+re[1]*ee[1])/ne,(re[1]*ee[0]-re[0]*ee[1])/ne]}function multiply(re,ee){return[re[0]*ee[0]-re[1]*ee[1],re[0]*ee[1]+re[1]*ee[0]]}function evaluatePolynomial(re,ee){let ne=[0,0];for(let ae=re.length-1;ae>=0;ae-=1)ne=multiply(ne,ee),ne[0]+=re[ae];return ne}const createNativeIIRFilterNodeFakerFactory=(re,ee,ne,ae)=>(ce,le,{channelCount:ue,channelCountMode:he,channelInterpretation:fe,feedback:me,feedforward:ge})=>{const ve=computeBufferSize(le,ce.sampleRate),ye=me instanceof Float64Array?me:new Float64Array(me),be=ge instanceof Float64Array?ge:new Float64Array(ge),Ee=ye.length,Ce=be.length,Se=Math.min(Ee,Ce);if(Ee===0||Ee>20)throw ae();if(ye[0]===0)throw ee();if(Ce===0||Ce>20)throw ae();if(be[0]===0)throw ee();if(ye[0]!==1){for(let Be=0;Be<Ce;Be+=1)be[Be]/=ye[0];for(let Be=1;Be<Ee;Be+=1)ye[Be]/=ye[0]}const Te=ne(ce,ve,ue,ue);Te.channelCount=ue,Te.channelCountMode=he,Te.channelInterpretation=fe;const ke=32,Ne=[],Fe=[],De=[];for(let Be=0;Be<ue;Be+=1){Ne.push(0);const Le=new Float32Array(ke),je=new Float32Array(ke);Le.fill(0),je.fill(0),Fe.push(Le),De.push(je)}Te.onaudioprocess=Be=>{const Le=Be.inputBuffer,je=Be.outputBuffer,Ge=Le.numberOfChannels;for(let qe=0;qe<Ge;qe+=1){const Ue=Le.getChannelData(qe),ze=je.getChannelData(qe);Ne[qe]=filterBuffer(ye,Ee,be,Ce,Se,Fe[qe],De[qe],Ne[qe],ke,Ue,ze)}};const Oe=ce.sampleRate/2;return interceptConnections({get bufferSize(){return ve},get channelCount(){return Te.channelCount},set channelCount(Be){Te.channelCount=Be},get channelCountMode(){return Te.channelCountMode},set channelCountMode(Be){Te.channelCountMode=Be},get channelInterpretation(){return Te.channelInterpretation},set channelInterpretation(Be){Te.channelInterpretation=Be},get context(){return Te.context},get inputs(){return[Te]},get numberOfInputs(){return Te.numberOfInputs},get numberOfOutputs(){return Te.numberOfOutputs},addEventListener(...Be){return Te.addEventListener(Be[0],Be[1],Be[2])},dispatchEvent(...Be){return Te.dispatchEvent(Be[0])},getFrequencyResponse(Be,Le,je){if(Be.length!==Le.length||Le.length!==je.length)throw re();const Ge=Be.length;for(let qe=0;qe<Ge;qe+=1){const Ue=-Math.PI*(Be[qe]/Oe),ze=[Math.cos(Ue),Math.sin(Ue)],He=evaluatePolynomial(be,ze),Ye=evaluatePolynomial(ye,ze),Xe=divide(He,Ye);Le[qe]=Math.sqrt(Xe[0]*Xe[0]+Xe[1]*Xe[1]),je[qe]=Math.atan2(Xe[1],Xe[0])}},removeEventListener(...Be){return Te.removeEventListener(Be[0],Be[1],Be[2])}},Te)},createNativeMediaElementAudioSourceNode=(re,ee)=>re.createMediaElementSource(ee.mediaElement),createNativeMediaStreamAudioDestinationNode=(re,ee)=>{const ne=re.createMediaStreamDestination();return assignNativeAudioNodeOptions(ne,ee),ne.numberOfOutputs===1&&Object.defineProperty(ne,"numberOfOutputs",{get:()=>0}),ne},createNativeMediaStreamAudioSourceNode=(re,{mediaStream:ee})=>{const ne=ee.getAudioTracks();ne.sort((le,ue)=>le.id<ue.id?-1:le.id>ue.id?1:0);const ae=ne.slice(0,1),ce=re.createMediaStreamSource(new MediaStream(ae));return Object.defineProperty(ce,"mediaStream",{value:ee}),ce},createNativeMediaStreamTrackAudioSourceNodeFactory=(re,ee)=>(ne,{mediaStreamTrack:ae})=>{if(typeof ne.createMediaStreamTrackSource=="function")return ne.createMediaStreamTrackSource(ae);const ce=new MediaStream([ae]),le=ne.createMediaStreamSource(ce);if(ae.kind!=="audio")throw re();if(ee(ne))throw new TypeError;return le},createNativeOfflineAudioContextConstructor=re=>re===null?null:re.hasOwnProperty("OfflineAudioContext")?re.OfflineAudioContext:re.hasOwnProperty("webkitOfflineAudioContext")?re.webkitOfflineAudioContext:null,createNativeOscillatorNodeFactory=(re,ee,ne,ae,ce,le)=>(ue,he)=>{const fe=ue.createOscillator();return assignNativeAudioNodeOptions(fe,he),assignNativeAudioNodeAudioParamValue(fe,he,"detune"),assignNativeAudioNodeAudioParamValue(fe,he,"frequency"),he.periodicWave!==void 0?fe.setPeriodicWave(he.periodicWave):assignNativeAudioNodeOption(fe,he,"type"),ee(ne,()=>ne(ue))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(fe),ee(ae,()=>ae(ue))||le(fe,ue),ee(ce,()=>ce(ue))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(fe),re(ue,fe),fe},createNativePannerNodeFactory=re=>(ee,ne)=>{const ae=ee.createPanner();return ae.orientationX===void 0?re(ee,ne):(assignNativeAudioNodeOptions(ae,ne),assignNativeAudioNodeAudioParamValue(ae,ne,"orientationX"),assignNativeAudioNodeAudioParamValue(ae,ne,"orientationY"),assignNativeAudioNodeAudioParamValue(ae,ne,"orientationZ"),assignNativeAudioNodeAudioParamValue(ae,ne,"positionX"),assignNativeAudioNodeAudioParamValue(ae,ne,"positionY"),assignNativeAudioNodeAudioParamValue(ae,ne,"positionZ"),assignNativeAudioNodeOption(ae,ne,"coneInnerAngle"),assignNativeAudioNodeOption(ae,ne,"coneOuterAngle"),assignNativeAudioNodeOption(ae,ne,"coneOuterGain"),assignNativeAudioNodeOption(ae,ne,"distanceModel"),assignNativeAudioNodeOption(ae,ne,"maxDistance"),assignNativeAudioNodeOption(ae,ne,"panningModel"),assignNativeAudioNodeOption(ae,ne,"refDistance"),assignNativeAudioNodeOption(ae,ne,"rolloffFactor"),ae)},createNativePannerNodeFakerFactory=(re,ee,ne,ae,ce,le,ue,he,fe,me)=>(ge,{coneInnerAngle:ve,coneOuterAngle:ye,coneOuterGain:be,distanceModel:Ee,maxDistance:Ce,orientationX:Se,orientationY:Te,orientationZ:ke,panningModel:Ne,positionX:Fe,positionY:De,positionZ:Oe,refDistance:Re,rolloffFactor:Be,...Le})=>{const je=ge.createPanner();if(Le.channelCount>2||Le.channelCountMode==="max")throw ue();assignNativeAudioNodeOptions(je,Le);const Ge={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},qe=ne(ge,{...Ge,channelInterpretation:"speakers",numberOfInputs:6}),Ue=ae(ge,{...Le,gain:1}),ze=ae(ge,{...Ge,gain:1}),He=ae(ge,{...Ge,gain:0}),Ye=ae(ge,{...Ge,gain:0}),Xe=ae(ge,{...Ge,gain:0}),We=ae(ge,{...Ge,gain:0}),Ze=ae(ge,{...Ge,gain:0}),Vt=ce(ge,256,6,1),Qt=le(ge,{...Ge,curve:new Float32Array([1,1]),oversample:"none"});let Yt=[Se,Te,ke],Jt=[Fe,De,Oe];const rn=new Float32Array(1);Vt.onaudioprocess=({inputBuffer:un})=>{const bn=[fe(un,rn,0),fe(un,rn,1),fe(un,rn,2)];bn.some(($n,On)=>$n!==Yt[On])&&(je.setOrientation(...bn),Yt=bn);const En=[fe(un,rn,3),fe(un,rn,4),fe(un,rn,5)];En.some(($n,On)=>$n!==Jt[On])&&(je.setPosition(...En),Jt=En)},Object.defineProperty(He.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Ye.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Xe.gain,"defaultValue",{get:()=>0}),Object.defineProperty(We.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Ze.gain,"defaultValue",{get:()=>0});const nn={get bufferSize(){},get channelCount(){return je.channelCount},set channelCount(un){if(un>2)throw ue();Ue.channelCount=un,je.channelCount=un},get channelCountMode(){return je.channelCountMode},set channelCountMode(un){if(un==="max")throw ue();Ue.channelCountMode=un,je.channelCountMode=un},get channelInterpretation(){return je.channelInterpretation},set channelInterpretation(un){Ue.channelInterpretation=un,je.channelInterpretation=un},get coneInnerAngle(){return je.coneInnerAngle},set coneInnerAngle(un){je.coneInnerAngle=un},get coneOuterAngle(){return je.coneOuterAngle},set coneOuterAngle(un){je.coneOuterAngle=un},get coneOuterGain(){return je.coneOuterGain},set coneOuterGain(un){if(un<0||un>1)throw ee();je.coneOuterGain=un},get context(){return je.context},get distanceModel(){return je.distanceModel},set distanceModel(un){je.distanceModel=un},get inputs(){return[Ue]},get maxDistance(){return je.maxDistance},set maxDistance(un){if(un<0)throw new RangeError;je.maxDistance=un},get numberOfInputs(){return je.numberOfInputs},get numberOfOutputs(){return je.numberOfOutputs},get orientationX(){return ze.gain},get orientationY(){return He.gain},get orientationZ(){return Ye.gain},get panningModel(){return je.panningModel},set panningModel(un){je.panningModel=un},get positionX(){return Xe.gain},get positionY(){return We.gain},get positionZ(){return Ze.gain},get refDistance(){return je.refDistance},set refDistance(un){if(un<0)throw new RangeError;je.refDistance=un},get rolloffFactor(){return je.rolloffFactor},set rolloffFactor(un){if(un<0)throw new RangeError;je.rolloffFactor=un},addEventListener(...un){return Ue.addEventListener(un[0],un[1],un[2])},dispatchEvent(...un){return Ue.dispatchEvent(un[0])},removeEventListener(...un){return Ue.removeEventListener(un[0],un[1],un[2])}};ve!==nn.coneInnerAngle&&(nn.coneInnerAngle=ve),ye!==nn.coneOuterAngle&&(nn.coneOuterAngle=ye),be!==nn.coneOuterGain&&(nn.coneOuterGain=be),Ee!==nn.distanceModel&&(nn.distanceModel=Ee),Ce!==nn.maxDistance&&(nn.maxDistance=Ce),Se!==nn.orientationX.value&&(nn.orientationX.value=Se),Te!==nn.orientationY.value&&(nn.orientationY.value=Te),ke!==nn.orientationZ.value&&(nn.orientationZ.value=ke),Ne!==nn.panningModel&&(nn.panningModel=Ne),Fe!==nn.positionX.value&&(nn.positionX.value=Fe),De!==nn.positionY.value&&(nn.positionY.value=De),Oe!==nn.positionZ.value&&(nn.positionZ.value=Oe),Re!==nn.refDistance&&(nn.refDistance=Re),Be!==nn.rolloffFactor&&(nn.rolloffFactor=Be),(Yt[0]!==1||Yt[1]!==0||Yt[2]!==0)&&je.setOrientation(...Yt),(Jt[0]!==0||Jt[1]!==0||Jt[2]!==0)&&je.setPosition(...Jt);const fn=()=>{Ue.connect(je),re(Ue,Qt,0,0),Qt.connect(ze).connect(qe,0,0),Qt.connect(He).connect(qe,0,1),Qt.connect(Ye).connect(qe,0,2),Qt.connect(Xe).connect(qe,0,3),Qt.connect(We).connect(qe,0,4),Qt.connect(Ze).connect(qe,0,5),qe.connect(Vt).connect(ge.destination)},an=()=>{Ue.disconnect(je),he(Ue,Qt,0,0),Qt.disconnect(ze),ze.disconnect(qe),Qt.disconnect(He),He.disconnect(qe),Qt.disconnect(Ye),Ye.disconnect(qe),Qt.disconnect(Xe),Xe.disconnect(qe),Qt.disconnect(We),We.disconnect(qe),Qt.disconnect(Ze),Ze.disconnect(qe),qe.disconnect(Vt),Vt.disconnect(ge.destination)};return me(interceptConnections(nn,je),fn,an)},createNativePeriodicWaveFactory=re=>(ee,{disableNormalization:ne,imag:ae,real:ce})=>{const le=ae instanceof Float32Array?ae:new Float32Array(ae),ue=ce instanceof Float32Array?ce:new Float32Array(ce),he=ee.createPeriodicWave(ue,le,{disableNormalization:ne});if(Array.from(ae).length<2)throw re();return he},createNativeScriptProcessorNode=(re,ee,ne,ae)=>re.createScriptProcessor(ee,ne,ae),createNativeStereoPannerNodeFactory=(re,ee)=>(ne,ae)=>{const ce=ae.channelCountMode;if(ce==="clamped-max")throw ee();if(ne.createStereoPanner===void 0)return re(ne,ae);const le=ne.createStereoPanner();return assignNativeAudioNodeOptions(le,ae),assignNativeAudioNodeAudioParamValue(le,ae,"pan"),Object.defineProperty(le,"channelCountMode",{get:()=>ce,set:ue=>{if(ue!==ce)throw ee()}}),le},createNativeStereoPannerNodeFakerFactory=(re,ee,ne,ae,ce,le)=>{const he=new Float32Array([1,1]),fe=Math.PI/2,me={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},ge={...me,oversample:"none"},ve=(Ee,Ce,Se,Te)=>{const ke=new Float32Array(16385),Ne=new Float32Array(16385);for(let Le=0;Le<16385;Le+=1){const je=Le/16384*fe;ke[Le]=Math.cos(je),Ne[Le]=Math.sin(je)}const Fe=ne(Ee,{...me,gain:0}),De=ae(Ee,{...ge,curve:ke}),Oe=ae(Ee,{...ge,curve:he}),Re=ne(Ee,{...me,gain:0}),Be=ae(Ee,{...ge,curve:Ne});return{connectGraph(){Ce.connect(Fe),Ce.connect(Oe.inputs===void 0?Oe:Oe.inputs[0]),Ce.connect(Re),Oe.connect(Se),Se.connect(De.inputs===void 0?De:De.inputs[0]),Se.connect(Be.inputs===void 0?Be:Be.inputs[0]),De.connect(Fe.gain),Be.connect(Re.gain),Fe.connect(Te,0,0),Re.connect(Te,0,1)},disconnectGraph(){Ce.disconnect(Fe),Ce.disconnect(Oe.inputs===void 0?Oe:Oe.inputs[0]),Ce.disconnect(Re),Oe.disconnect(Se),Se.disconnect(De.inputs===void 0?De:De.inputs[0]),Se.disconnect(Be.inputs===void 0?Be:Be.inputs[0]),De.disconnect(Fe.gain),Be.disconnect(Re.gain),Fe.disconnect(Te,0,0),Re.disconnect(Te,0,1)}}},ye=(Ee,Ce,Se,Te)=>{const ke=new Float32Array(16385),Ne=new Float32Array(16385),Fe=new Float32Array(16385),De=new Float32Array(16385),Oe=Math.floor(16385/2);for(let Xe=0;Xe<16385;Xe+=1)if(Xe>Oe){const We=(Xe-Oe)/(16384-Oe)*fe;ke[Xe]=Math.cos(We),Ne[Xe]=Math.sin(We),Fe[Xe]=0,De[Xe]=1}else{const We=Xe/(16384-Oe)*fe;ke[Xe]=1,Ne[Xe]=0,Fe[Xe]=Math.cos(We),De[Xe]=Math.sin(We)}const Re=ee(Ee,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),Be=ne(Ee,{...me,gain:0}),Le=ae(Ee,{...ge,curve:ke}),je=ne(Ee,{...me,gain:0}),Ge=ae(Ee,{...ge,curve:Ne}),qe=ae(Ee,{...ge,curve:he}),Ue=ne(Ee,{...me,gain:0}),ze=ae(Ee,{...ge,curve:Fe}),He=ne(Ee,{...me,gain:0}),Ye=ae(Ee,{...ge,curve:De});return{connectGraph(){Ce.connect(Re),Ce.connect(qe.inputs===void 0?qe:qe.inputs[0]),Re.connect(Be,0),Re.connect(je,0),Re.connect(Ue,1),Re.connect(He,1),qe.connect(Se),Se.connect(Le.inputs===void 0?Le:Le.inputs[0]),Se.connect(Ge.inputs===void 0?Ge:Ge.inputs[0]),Se.connect(ze.inputs===void 0?ze:ze.inputs[0]),Se.connect(Ye.inputs===void 0?Ye:Ye.inputs[0]),Le.connect(Be.gain),Ge.connect(je.gain),ze.connect(Ue.gain),Ye.connect(He.gain),Be.connect(Te,0,0),Ue.connect(Te,0,0),je.connect(Te,0,1),He.connect(Te,0,1)},disconnectGraph(){Ce.disconnect(Re),Ce.disconnect(qe.inputs===void 0?qe:qe.inputs[0]),Re.disconnect(Be,0),Re.disconnect(je,0),Re.disconnect(Ue,1),Re.disconnect(He,1),qe.disconnect(Se),Se.disconnect(Le.inputs===void 0?Le:Le.inputs[0]),Se.disconnect(Ge.inputs===void 0?Ge:Ge.inputs[0]),Se.disconnect(ze.inputs===void 0?ze:ze.inputs[0]),Se.disconnect(Ye.inputs===void 0?Ye:Ye.inputs[0]),Le.disconnect(Be.gain),Ge.disconnect(je.gain),ze.disconnect(Ue.gain),Ye.disconnect(He.gain),Be.disconnect(Te,0,0),Ue.disconnect(Te,0,0),je.disconnect(Te,0,1),He.disconnect(Te,0,1)}}},be=(Ee,Ce,Se,Te,ke)=>{if(Ce===1)return ve(Ee,Se,Te,ke);if(Ce===2)return ye(Ee,Se,Te,ke);throw ce()};return(Ee,{channelCount:Ce,channelCountMode:Se,pan:Te,...ke})=>{if(Se==="max")throw ce();const Ne=re(Ee,{...ke,channelCount:1,channelCountMode:Se,numberOfInputs:2}),Fe=ne(Ee,{...ke,channelCount:Ce,channelCountMode:Se,gain:1}),De=ne(Ee,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:Te});let{connectGraph:Oe,disconnectGraph:Re}=be(Ee,Ce,Fe,De,Ne);Object.defineProperty(De.gain,"defaultValue",{get:()=>0}),Object.defineProperty(De.gain,"maxValue",{get:()=>1}),Object.defineProperty(De.gain,"minValue",{get:()=>-1});const Be={get bufferSize(){},get channelCount(){return Fe.channelCount},set channelCount(qe){Fe.channelCount!==qe&&(Le&&Re(),{connectGraph:Oe,disconnectGraph:Re}=be(Ee,qe,Fe,De,Ne),Le&&Oe()),Fe.channelCount=qe},get channelCountMode(){return Fe.channelCountMode},set channelCountMode(qe){if(qe==="clamped-max"||qe==="max")throw ce();Fe.channelCountMode=qe},get channelInterpretation(){return Fe.channelInterpretation},set channelInterpretation(qe){Fe.channelInterpretation=qe},get context(){return Fe.context},get inputs(){return[Fe]},get numberOfInputs(){return Fe.numberOfInputs},get numberOfOutputs(){return Fe.numberOfOutputs},get pan(){return De.gain},addEventListener(...qe){return Fe.addEventListener(qe[0],qe[1],qe[2])},dispatchEvent(...qe){return Fe.dispatchEvent(qe[0])},removeEventListener(...qe){return Fe.removeEventListener(qe[0],qe[1],qe[2])}};let Le=!1;const je=()=>{Oe(),Le=!0},Ge=()=>{Re(),Le=!1};return le(interceptConnections(Be,Ne),je,Ge)}},createNativeWaveShaperNodeFactory=(re,ee,ne,ae,ce,le,ue)=>(he,fe)=>{const me=he.createWaveShaper();if(le!==null&&le.name==="webkitAudioContext"&&he.createGain().gain.automationRate===void 0)return ne(he,fe);assignNativeAudioNodeOptions(me,fe);const ge=fe.curve===null||fe.curve instanceof Float32Array?fe.curve:new Float32Array(fe.curve);if(ge!==null&&ge.length<2)throw ee();assignNativeAudioNodeOption(me,{curve:ge},"curve"),assignNativeAudioNodeOption(me,fe,"oversample");let ve=null,ye=!1;return ue(me,"curve",Ce=>()=>Ce.call(me),Ce=>Se=>(Ce.call(me,Se),ye&&(ae(Se)&&ve===null?ve=re(he,me):!ae(Se)&&ve!==null&&(ve(),ve=null)),Se)),ce(me,()=>{ye=!0,ae(me.curve)&&(ve=re(he,me))},()=>{ye=!1,ve!==null&&(ve(),ve=null)})},createNativeWaveShaperNodeFakerFactory=(re,ee,ne,ae,ce)=>(le,{curve:ue,oversample:he,...fe})=>{const me=le.createWaveShaper(),ge=le.createWaveShaper();assignNativeAudioNodeOptions(me,fe),assignNativeAudioNodeOptions(ge,fe);const ve=ne(le,{...fe,gain:1}),ye=ne(le,{...fe,gain:-1}),be=ne(le,{...fe,gain:1}),Ee=ne(le,{...fe,gain:-1});let Ce=null,Se=!1,Te=null;const ke={get bufferSize(){},get channelCount(){return me.channelCount},set channelCount(De){ve.channelCount=De,ye.channelCount=De,me.channelCount=De,be.channelCount=De,ge.channelCount=De,Ee.channelCount=De},get channelCountMode(){return me.channelCountMode},set channelCountMode(De){ve.channelCountMode=De,ye.channelCountMode=De,me.channelCountMode=De,be.channelCountMode=De,ge.channelCountMode=De,Ee.channelCountMode=De},get channelInterpretation(){return me.channelInterpretation},set channelInterpretation(De){ve.channelInterpretation=De,ye.channelInterpretation=De,me.channelInterpretation=De,be.channelInterpretation=De,ge.channelInterpretation=De,Ee.channelInterpretation=De},get context(){return me.context},get curve(){return Te},set curve(De){if(De!==null&&De.length<2)throw ee();if(De===null)me.curve=De,ge.curve=De;else{const Oe=De.length,Re=new Float32Array(Oe+2-Oe%2),Be=new Float32Array(Oe+2-Oe%2);Re[0]=De[0],Be[0]=-De[Oe-1];const Le=Math.ceil((Oe+1)/2),je=(Oe+1)/2-1;for(let Ge=1;Ge<Le;Ge+=1){const qe=Ge/Le*je,Ue=Math.floor(qe),ze=Math.ceil(qe);Re[Ge]=Ue===ze?De[Ue]:(1-(qe-Ue))*De[Ue]+(1-(ze-qe))*De[ze],Be[Ge]=Ue===ze?-De[Oe-1-Ue]:-((1-(qe-Ue))*De[Oe-1-Ue])-(1-(ze-qe))*De[Oe-1-ze]}Re[Le]=Oe%2===1?De[Le-1]:(De[Le-2]+De[Le-1])/2,me.curve=Re,ge.curve=Be}Te=De,Se&&(ae(Te)&&Ce===null?Ce=re(le,ve):Ce!==null&&(Ce(),Ce=null))},get inputs(){return[ve]},get numberOfInputs(){return me.numberOfInputs},get numberOfOutputs(){return me.numberOfOutputs},get oversample(){return me.oversample},set oversample(De){me.oversample=De,ge.oversample=De},addEventListener(...De){return ve.addEventListener(De[0],De[1],De[2])},dispatchEvent(...De){return ve.dispatchEvent(De[0])},removeEventListener(...De){return ve.removeEventListener(De[0],De[1],De[2])}};ue!==null&&(ke.curve=ue instanceof Float32Array?ue:new Float32Array(ue)),he!==ke.oversample&&(ke.oversample=he);const Ne=()=>{ve.connect(me).connect(be),ve.connect(ye).connect(ge).connect(Ee).connect(be),Se=!0,ae(Te)&&(Ce=re(le,ve))},Fe=()=>{ve.disconnect(me),me.disconnect(be),ve.disconnect(ye),ye.disconnect(ge),ge.disconnect(Ee),Ee.disconnect(be),Se=!1,Ce!==null&&(Ce(),Ce=null)};return ce(interceptConnections(ke,be),Ne,Fe)},createNotSupportedError=()=>new DOMException("","NotSupportedError"),DEFAULT_OPTIONS$5={numberOfChannels:1},createOfflineAudioContextConstructor=(re,ee,ne,ae,ce)=>class extends re{constructor(ue,he,fe){let me;if(typeof ue=="number"&&he!==void 0&&fe!==void 0)me={length:he,numberOfChannels:ue,sampleRate:fe};else if(typeof ue=="object")me=ue;else throw new Error("The given parameters are not valid.");const{length:ge,numberOfChannels:ve,sampleRate:ye}={...DEFAULT_OPTIONS$5,...me},be=ae(ve,ge,ye);ee(testPromiseSupport,()=>testPromiseSupport(be))||be.addEventListener("statechange",(()=>{let Ee=0;const Ce=Se=>{this._state==="running"&&(Ee>0?(be.removeEventListener("statechange",Ce),Se.stopImmediatePropagation(),this._waitForThePromiseToSettle(Se)):Ee+=1)};return Ce})()),super(be,ve),this._length=ge,this._nativeOfflineAudioContext=be,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(ne()):(this._state="running",ce(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,deactivateAudioGraph(this)}))}_waitForThePromiseToSettle(ue){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(ue):setTimeout(()=>this._waitForThePromiseToSettle(ue))}},DEFAULT_OPTIONS$4={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},createOscillatorNodeConstructor=(re,ee,ne,ae,ce,le,ue)=>class extends re{constructor(fe,me){const ge=ce(fe),ve={...DEFAULT_OPTIONS$4,...me},ye=ne(ge,ve),be=le(ge),Ee=be?ae():null,Ce=fe.sampleRate/2;super(fe,!1,ye,Ee),this._detune=ee(this,be,ye.detune,153600,-153600),this._frequency=ee(this,be,ye.frequency,Ce,-Ce),this._nativeOscillatorNode=ye,this._onended=null,this._oscillatorNodeRenderer=Ee,this._oscillatorNodeRenderer!==null&&ve.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=ve.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(fe){const me=typeof fe=="function"?ue(this,fe):null;this._nativeOscillatorNode.onended=me;const ge=this._nativeOscillatorNode.onended;this._onended=ge!==null&&ge===me?fe:ge}get type(){return this._nativeOscillatorNode.type}set type(fe){this._nativeOscillatorNode.type=fe,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(fe){this._nativeOscillatorNode.setPeriodicWave(fe),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=fe)}start(fe=0){if(this._nativeOscillatorNode.start(fe),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=fe),this.context.state!=="closed"){setInternalStateToActive(this);const me=()=>{this._nativeOscillatorNode.removeEventListener("ended",me),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeOscillatorNode.addEventListener("ended",me)}}stop(fe=0){this._nativeOscillatorNode.stop(fe),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=fe)}},createOscillatorNodeRendererFactory=(re,ee,ne,ae,ce)=>()=>{const le=new WeakMap;let ue=null,he=null,fe=null;const me=async(ge,ve)=>{let ye=ne(ge);const be=isOwnedByContext(ye,ve);if(!be){const Ee={channelCount:ye.channelCount,channelCountMode:ye.channelCountMode,channelInterpretation:ye.channelInterpretation,detune:ye.detune.value,frequency:ye.frequency.value,periodicWave:ue===null?void 0:ue,type:ye.type};ye=ee(ve,Ee),he!==null&&ye.start(he),fe!==null&&ye.stop(fe)}return le.set(ve,ye),be?(await re(ve,ge.detune,ye.detune),await re(ve,ge.frequency,ye.frequency)):(await ae(ve,ge.detune,ye.detune),await ae(ve,ge.frequency,ye.frequency)),await ce(ge,ve,ye),ye};return{set periodicWave(ge){ue=ge},set start(ge){he=ge},set stop(ge){fe=ge},render(ge,ve){const ye=le.get(ve);return ye!==void 0?Promise.resolve(ye):me(ge,ve)}}},DEFAULT_OPTIONS$3={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},createPannerNodeConstructor=(re,ee,ne,ae,ce,le,ue)=>class extends re{constructor(fe,me){const ge=ce(fe),ve={...DEFAULT_OPTIONS$3,...me},ye=ne(ge,ve),be=le(ge),Ee=be?ae():null;super(fe,!1,ye,Ee),this._nativePannerNode=ye,this._orientationX=ee(this,be,ye.orientationX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationY=ee(this,be,ye.orientationY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationZ=ee(this,be,ye.orientationZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionX=ee(this,be,ye.positionX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionY=ee(this,be,ye.positionY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionZ=ee(this,be,ye.positionZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),ue(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(fe){this._nativePannerNode.coneInnerAngle=fe}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(fe){this._nativePannerNode.coneOuterAngle=fe}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(fe){this._nativePannerNode.coneOuterGain=fe}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(fe){this._nativePannerNode.distanceModel=fe}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(fe){this._nativePannerNode.maxDistance=fe}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(fe){this._nativePannerNode.panningModel=fe}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(fe){this._nativePannerNode.refDistance=fe}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(fe){this._nativePannerNode.rolloffFactor=fe}},createPannerNodeRendererFactory=(re,ee,ne,ae,ce,le,ue,he,fe,me)=>()=>{const ge=new WeakMap;let ve=null;const ye=async(be,Ee)=>{let Ce=null,Se=le(be);const Te={channelCount:Se.channelCount,channelCountMode:Se.channelCountMode,channelInterpretation:Se.channelInterpretation},ke={...Te,coneInnerAngle:Se.coneInnerAngle,coneOuterAngle:Se.coneOuterAngle,coneOuterGain:Se.coneOuterGain,distanceModel:Se.distanceModel,maxDistance:Se.maxDistance,panningModel:Se.panningModel,refDistance:Se.refDistance,rolloffFactor:Se.rolloffFactor},Ne=isOwnedByContext(Se,Ee);if("bufferSize"in Se)Ce=ae(Ee,{...Te,gain:1});else if(!Ne){const Fe={...ke,orientationX:Se.orientationX.value,orientationY:Se.orientationY.value,orientationZ:Se.orientationZ.value,positionX:Se.positionX.value,positionY:Se.positionY.value,positionZ:Se.positionZ.value};Se=ce(Ee,Fe)}if(ge.set(Ee,Ce===null?Se:Ce),Ce!==null){if(ve===null){if(ue===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Ge=new ue(6,be.context.length,Ee.sampleRate),qe=ee(Ge,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});qe.connect(Ge.destination),ve=(async()=>{const Ue=await Promise.all([be.orientationX,be.orientationY,be.orientationZ,be.positionX,be.positionY,be.positionZ].map(async(ze,He)=>{const Ye=ne(Ge,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:He===0?1:0});return await he(Ge,ze,Ye.offset),Ye}));for(let ze=0;ze<6;ze+=1)Ue[ze].connect(qe,0,ze),Ue[ze].start(0);return me(Ge)})()}const Fe=await ve,De=ae(Ee,{...Te,gain:1});await fe(be,Ee,De);const Oe=[];for(let Ge=0;Ge<Fe.numberOfChannels;Ge+=1)Oe.push(Fe.getChannelData(Ge));let Re=[Oe[0][0],Oe[1][0],Oe[2][0]],Be=[Oe[3][0],Oe[4][0],Oe[5][0]],Le=ae(Ee,{...Te,gain:1}),je=ce(Ee,{...ke,orientationX:Re[0],orientationY:Re[1],orientationZ:Re[2],positionX:Be[0],positionY:Be[1],positionZ:Be[2]});De.connect(Le).connect(je.inputs[0]),je.connect(Ce);for(let Ge=128;Ge<Fe.length;Ge+=128){const qe=[Oe[0][Ge],Oe[1][Ge],Oe[2][Ge]],Ue=[Oe[3][Ge],Oe[4][Ge],Oe[5][Ge]];if(qe.some((ze,He)=>ze!==Re[He])||Ue.some((ze,He)=>ze!==Be[He])){Re=qe,Be=Ue;const ze=Ge/Ee.sampleRate;Le.gain.setValueAtTime(0,ze),Le=ae(Ee,{...Te,gain:0}),je=ce(Ee,{...ke,orientationX:Re[0],orientationY:Re[1],orientationZ:Re[2],positionX:Be[0],positionY:Be[1],positionZ:Be[2]}),Le.gain.setValueAtTime(1,ze),De.connect(Le).connect(je.inputs[0]),je.connect(Ce)}}return Ce}return Ne?(await re(Ee,be.orientationX,Se.orientationX),await re(Ee,be.orientationY,Se.orientationY),await re(Ee,be.orientationZ,Se.orientationZ),await re(Ee,be.positionX,Se.positionX),await re(Ee,be.positionY,Se.positionY),await re(Ee,be.positionZ,Se.positionZ)):(await he(Ee,be.orientationX,Se.orientationX),await he(Ee,be.orientationY,Se.orientationY),await he(Ee,be.orientationZ,Se.orientationZ),await he(Ee,be.positionX,Se.positionX),await he(Ee,be.positionY,Se.positionY),await he(Ee,be.positionZ,Se.positionZ)),isNativeAudioNodeFaker(Se)?await fe(be,Ee,Se.inputs[0]):await fe(be,Ee,Se),Se};return{render(be,Ee){const Ce=ge.get(Ee);return Ce!==void 0?Promise.resolve(Ce):ye(be,Ee)}}},DEFAULT_OPTIONS$2={disableNormalization:!1},createPeriodicWaveConstructor=(re,ee,ne,ae)=>class Ru{constructor(le,ue){const he=ee(le),fe=ae({...DEFAULT_OPTIONS$2,...ue}),me=re(he,fe);return ne.add(me),me}static[Symbol.hasInstance](le){return le!==null&&typeof le=="object"&&Object.getPrototypeOf(le)===Ru.prototype||ne.has(le)}},createRenderAutomation=(re,ee)=>(ne,ae,ce)=>(re(ae).replay(ce),ee(ae,ne,ce)),createRenderInputsOfAudioNode=(re,ee,ne)=>async(ae,ce,le)=>{const ue=re(ae);await Promise.all(ue.activeInputs.map((he,fe)=>Array.from(he).map(async([me,ge])=>{const ye=await ee(me).render(me,ce),be=ae.context.destination;!ne(me)&&(ae!==be||!ne(ae))&&ye.connect(le,ge,fe)})).reduce((he,fe)=>[...he,...fe],[]))},createRenderInputsOfAudioParam=(re,ee,ne)=>async(ae,ce,le)=>{const ue=ee(ae);await Promise.all(Array.from(ue.activeInputs).map(async([he,fe])=>{const ge=await re(he).render(he,ce);ne(he)||ge.connect(le,fe)}))},createRenderNativeOfflineAudioContext=(re,ee,ne,ae)=>ce=>re(testPromiseSupport,()=>testPromiseSupport(ce))?Promise.resolve(re(ae,ae)).then(le=>{if(!le){const ue=ne(ce,512,0,1);ce.oncomplete=()=>{ue.onaudioprocess=null,ue.disconnect()},ue.onaudioprocess=()=>ce.currentTime,ue.connect(ce.destination)}return ce.startRendering()}):new Promise(le=>{const ue=ee(ce,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});ce.oncomplete=he=>{ue.disconnect(),le(he.renderedBuffer)},ue.connect(ce.destination),ce.startRendering()}),createSetActiveAudioWorkletNodeInputs=re=>(ee,ne)=>{re.set(ee,ne)},createSetAudioNodeTailTime=re=>(ee,ne)=>re.set(ee,ne),createStartRendering=(re,ee,ne,ae,ce,le,ue,he)=>(fe,me)=>ne(fe).render(fe,me).then(()=>Promise.all(Array.from(ae(me)).map(ge=>ne(ge).render(ge,me)))).then(()=>ce(me)).then(ge=>(typeof ge.copyFromChannel!="function"?(ue(ge),wrapAudioBufferGetChannelDataMethod(ge)):ee(le,()=>le(ge))||he(ge),re.add(ge),ge)),DEFAULT_OPTIONS$1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},createStereoPannerNodeConstructor=(re,ee,ne,ae,ce,le)=>class extends re{constructor(he,fe){const me=ce(he),ge={...DEFAULT_OPTIONS$1,...fe},ve=ne(me,ge),ye=le(me),be=ye?ae():null;super(he,!1,ve,be),this._pan=ee(this,ye,ve.pan)}get pan(){return this._pan}},createStereoPannerNodeRendererFactory=(re,ee,ne,ae,ce)=>()=>{const le=new WeakMap,ue=async(he,fe)=>{let me=ne(he);const ge=isOwnedByContext(me,fe);if(!ge){const ve={channelCount:me.channelCount,channelCountMode:me.channelCountMode,channelInterpretation:me.channelInterpretation,pan:me.pan.value};me=ee(fe,ve)}return le.set(fe,me),ge?await re(fe,he.pan,me.pan):await ae(fe,he.pan,me.pan),isNativeAudioNodeFaker(me)?await ce(he,fe,me.inputs[0]):await ce(he,fe,me),me};return{render(he,fe){const me=le.get(fe);return me!==void 0?Promise.resolve(me):ue(he,fe)}}},createTestAudioBufferConstructorSupport=re=>()=>{if(re===null)return!1;try{new re({length:1,sampleRate:44100})}catch{return!1}return!0},createTestAudioBufferCopyChannelMethodsSubarraySupport=re=>()=>{if(re===null)return!1;const ne=new re(1,1,44100).createBuffer(1,1,44100);if(ne.copyToChannel===void 0)return!0;const ae=new Float32Array(2);try{ne.copyFromChannel(ae,0,0)}catch{return!1}return!0},createTestAudioContextCloseMethodSupport=re=>()=>{if(re===null)return!1;if(re.prototype!==void 0&&re.prototype.close!==void 0)return!0;const ee=new re,ne=ee.close!==void 0;try{ee.close()}catch{}return ne},createTestAudioContextDecodeAudioDataMethodTypeErrorSupport=re=>()=>{if(re===null)return Promise.resolve(!1);const ee=new re(1,1,44100);return new Promise(ne=>{let ae=!0;const ce=ue=>{ae&&(ae=!1,ee.startRendering(),ne(ue instanceof TypeError))};let le;try{le=ee.decodeAudioData(null,()=>{},ce)}catch(ue){ce(ue)}le!==void 0&&le.catch(ce)})},createTestAudioContextOptionsSupport=re=>()=>{if(re===null)return!1;let ee;try{ee=new re({latencyHint:"balanced"})}catch{return!1}return ee.close(),!0},createTestAudioNodeConnectMethodSupport=re=>()=>{if(re===null)return!1;const ne=new re(1,1,44100).createGain(),ae=ne.connect(ne)===ne;return ne.disconnect(ne),ae},createTestAudioWorkletProcessorNoOutputsSupport=(re,ee)=>async()=>{if(re===null)return!0;if(ee===null)return!1;const ne=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),ae=new MessageChannel,ce=new ee(1,128,44100),le=URL.createObjectURL(ne);let ue=!1;try{await ce.audioWorklet.addModule(le);const he=new re(ce,"a",{numberOfOutputs:0}),fe=ce.createOscillator();await new Promise(me=>{he.port.onmessage=()=>me(),he.port.postMessage(ae.port2,[ae.port2])}),he.port.onmessage=()=>ue=!0,fe.connect(he),fe.start(0),await ce.startRendering(),ue=await new Promise(me=>{ae.port1.onmessage=({data:ge})=>me(ge===1),ae.port1.postMessage(0)})}catch{}finally{ae.port1.close(),URL.revokeObjectURL(le)}return ue},createTestAudioWorkletProcessorPostMessageSupport=(re,ee)=>async()=>{if(re===null)return!0;if(ee===null)return!1;const ne=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),ae=new ee(1,128,44100),ce=URL.createObjectURL(ne);let le=!1,ue=!1;try{await ae.audioWorklet.addModule(ce);const he=new re(ae,"a",{numberOfOutputs:0}),fe=ae.createOscillator();he.port.onmessage=()=>le=!0,he.onprocessorerror=()=>ue=!0,fe.connect(he),fe.start(0),await ae.startRendering(),await new Promise(me=>setTimeout(me))}catch{}finally{URL.revokeObjectURL(ce)}return le&&!ue},createTestChannelMergerNodeChannelCountSupport=re=>()=>{if(re===null)return!1;const ne=new re(1,1,44100).createChannelMerger();if(ne.channelCountMode==="max")return!0;try{ne.channelCount=2}catch{return!0}return!1},createTestConstantSourceNodeAccurateSchedulingSupport=re=>()=>{if(re===null)return!1;const ee=new re(1,1,44100);return ee.createConstantSource===void 0?!0:ee.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY},createTestConvolverNodeBufferReassignabilitySupport=re=>()=>{if(re===null)return!1;const ee=new re(1,1,44100),ne=ee.createConvolver();ne.buffer=ee.createBuffer(1,1,ee.sampleRate);try{ne.buffer=ee.createBuffer(1,1,ee.sampleRate)}catch{return!1}return!0},createTestConvolverNodeChannelCountSupport=re=>()=>{if(re===null)return!1;const ne=new re(1,1,44100).createConvolver();try{ne.channelCount=1}catch{return!1}return!0},createTestIsSecureContextSupport=re=>()=>re!==null&&re.hasOwnProperty("isSecureContext"),createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport=re=>()=>{if(re===null)return!1;const ee=new re;try{return ee.createMediaStreamSource(new MediaStream),!1}catch{return!0}finally{ee.close()}},createTestOfflineAudioContextCurrentTimeSupport=(re,ee)=>()=>{if(ee===null)return Promise.resolve(!1);const ne=new ee(1,1,44100),ae=re(ne,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(ce=>{ne.oncomplete=()=>{ae.disconnect(),ce(ne.currentTime!==0)},ne.startRendering()})},createTestStereoPannerNodeDefaultValueSupport=re=>()=>{if(re===null)return Promise.resolve(!1);const ee=new re(1,1,44100);if(ee.createStereoPanner===void 0||ee.createConstantSource===void 0)return Promise.resolve(!0);const ne=ee.createConstantSource(),ae=ee.createStereoPanner();return ne.channelCount=1,ne.offset.value=1,ae.channelCount=1,ne.start(),ne.connect(ae).connect(ee.destination),ee.startRendering().then(ce=>ce.getChannelData(0)[0]!==1)},createUnknownError=()=>new DOMException("","UnknownError"),DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},createWaveShaperNodeConstructor=(re,ee,ne,ae,ce,le,ue)=>class extends re{constructor(fe,me){const ge=ce(fe),ve={...DEFAULT_OPTIONS,...me},ye=ne(ge,ve),Ee=le(ge)?ae():null;super(fe,!0,ye,Ee),this._isCurveNullified=!1,this._nativeWaveShaperNode=ye,ue(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(fe){if(fe===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(fe.length<2)throw ee();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=fe}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(fe){this._nativeWaveShaperNode.oversample=fe}},createWaveShaperNodeRendererFactory=(re,ee,ne)=>()=>{const ae=new WeakMap,ce=async(le,ue)=>{let he=ee(le);if(!isOwnedByContext(he,ue)){const me={channelCount:he.channelCount,channelCountMode:he.channelCountMode,channelInterpretation:he.channelInterpretation,curve:he.curve,oversample:he.oversample};he=re(ue,me)}return ae.set(ue,he),isNativeAudioNodeFaker(he)?await ne(le,ue,he.inputs[0]):await ne(le,ue,he),he};return{render(le,ue){const he=ae.get(ue);return he!==void 0?Promise.resolve(he):ce(le,ue)}}},createWindow=()=>typeof window>"u"?null:window,createWrapAudioBufferCopyChannelMethods=(re,ee)=>ne=>{ne.copyFromChannel=(ae,ce,le=0)=>{const ue=re(le),he=re(ce);if(he>=ne.numberOfChannels)throw ee();const fe=ne.length,me=ne.getChannelData(he),ge=ae.length;for(let ve=ue<0?-ue:0;ve+ue<fe&&ve<ge;ve+=1)ae[ve]=me[ve+ue]},ne.copyToChannel=(ae,ce,le=0)=>{const ue=re(le),he=re(ce);if(he>=ne.numberOfChannels)throw ee();const fe=ne.length,me=ne.getChannelData(he),ge=ae.length;for(let ve=ue<0?-ue:0;ve+ue<fe&&ve<ge;ve+=1)me[ve+ue]=ae[ve]}},createWrapAudioBufferCopyChannelMethodsOutOfBounds=re=>ee=>{ee.copyFromChannel=(ne=>(ae,ce,le=0)=>{const ue=re(le),he=re(ce);if(ue<ee.length)return ne.call(ee,ae,he,ue)})(ee.copyFromChannel),ee.copyToChannel=(ne=>(ae,ce,le=0)=>{const ue=re(le),he=re(ce);if(ue<ee.length)return ne.call(ee,ae,he,ue)})(ee.copyToChannel)},createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer=re=>(ee,ne)=>{const ae=ne.createBuffer(1,1,44100);ee.buffer===null&&(ee.buffer=ae),re(ee,"buffer",ce=>()=>{const le=ce.call(ee);return le===ae?null:le},ce=>le=>ce.call(ee,le===null?ae:le))},createWrapChannelMergerNode=(re,ee)=>(ne,ae)=>{ae.channelCount=1,ae.channelCountMode="explicit",Object.defineProperty(ae,"channelCount",{get:()=>1,set:()=>{throw re()}}),Object.defineProperty(ae,"channelCountMode",{get:()=>"explicit",set:()=>{throw re()}});const ce=ne.createBufferSource();ee(ae,()=>{const he=ae.numberOfInputs;for(let fe=0;fe<he;fe+=1)ce.connect(ae,0,fe)},()=>ce.disconnect(ae))},getFirstSample=(re,ee,ne)=>re.copyFromChannel===void 0?re.getChannelData(ne)[0]:(re.copyFromChannel(ee,ne),ee[0]),isDCCurve=re=>{if(re===null)return!1;const ee=re.length;return ee%2!==0?re[Math.floor(ee/2)]!==0:re[ee/2-1]+re[ee/2]!==0},overwriteAccessors=(re,ee,ne,ae)=>{let ce=re;for(;!ce.hasOwnProperty(ee);)ce=Object.getPrototypeOf(ce);const{get:le,set:ue}=Object.getOwnPropertyDescriptor(ce,ee);Object.defineProperty(re,ee,{get:ne(le),set:ae(ue)})},sanitizeAudioWorkletNodeOptions=re=>({...re,outputChannelCount:re.outputChannelCount!==void 0?re.outputChannelCount:re.numberOfInputs===1&&re.numberOfOutputs===1?[re.channelCount]:Array.from({length:re.numberOfOutputs},()=>1)}),sanitizeChannelSplitterOptions=re=>({...re,channelCount:re.numberOfOutputs}),sanitizePeriodicWaveOptions=re=>{const{imag:ee,real:ne}=re;return ee===void 0?ne===void 0?{...re,imag:[0,0],real:[0,0]}:{...re,imag:Array.from(ne,()=>0),real:ne}:ne===void 0?{...re,imag:ee,real:Array.from(ee,()=>0)}:{...re,imag:ee,real:ne}},setValueAtTimeUntilPossible=(re,ee,ne)=>{try{re.setValueAtTime(ee,ne)}catch(ae){if(ae.code!==9)throw ae;setValueAtTimeUntilPossible(re,ee,ne+1e-7)}},testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport=re=>{const ee=re.createBufferSource();ee.start();try{ee.start()}catch{return!0}return!1},testAudioBufferSourceNodeStartMethodOffsetClampingSupport=re=>{const ee=re.createBufferSource(),ne=re.createBuffer(1,1,44100);ee.buffer=ne;try{ee.start(0,1)}catch{return!1}return!0},testAudioBufferSourceNodeStopMethodNullifiedBufferSupport=re=>{const ee=re.createBufferSource();ee.start();try{ee.stop()}catch{return!1}return!0},testAudioScheduledSourceNodeStartMethodNegativeParametersSupport=re=>{const ee=re.createOscillator();try{ee.start(-1)}catch(ne){return ne instanceof RangeError}return!1},testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=re=>{const ee=re.createBuffer(1,1,44100),ne=re.createBufferSource();ne.buffer=ee,ne.start(),ne.stop();try{return ne.stop(),!0}catch{return!1}},testAudioScheduledSourceNodeStopMethodNegativeParametersSupport=re=>{const ee=re.createOscillator();try{ee.stop(-1)}catch(ne){return ne instanceof RangeError}return!1},testAudioWorkletNodeOptionsClonability=re=>{const{port1:ee,port2:ne}=new MessageChannel;try{ee.postMessage(re)}finally{ee.close(),ne.close()}},testDomExceptionConstructorSupport=()=>{try{new DOMException}catch{return!1}return!0},testTransferablesSupport=()=>new Promise(re=>{const ee=new ArrayBuffer(0),{port1:ne,port2:ae}=new MessageChannel;ne.onmessage=({data:ce})=>re(ce!==null),ae.postMessage(ee,[ee])}),wrapAudioBufferSourceNodeStartMethodOffsetClamping=re=>{re.start=(ee=>(ne=0,ae=0,ce)=>{const le=re.buffer,ue=le===null?ae:Math.min(le.duration,ae);le!==null&&ue>le.duration-.5/re.context.sampleRate?ee.call(re,ne,0,0):ee.call(re,ne,ue,ce)})(re.start)},wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=(re,ee)=>{const ne=ee.createGain();re.connect(ne);const ae=(ce=>()=>{ce.call(re,ne),re.removeEventListener("ended",ae)})(re.disconnect);re.addEventListener("ended",ae),interceptConnections(re,ne),re.stop=(ce=>{let le=!1;return(ue=0)=>{if(le)try{ce.call(re,ue)}catch{ne.gain.setValueAtTime(0,ue)}else ce.call(re,ue),le=!0}})(re.stop)},wrapEventListener=(re,ee)=>ne=>{const ae={value:re};return Object.defineProperties(ne,{currentTarget:ae,target:ae}),typeof ee=="function"?ee.call(re,ne):ee.handleEvent.call(re,ne)},addActiveInputConnectionToAudioNode=createAddActiveInputConnectionToAudioNode(insertElementInSet),addPassiveInputConnectionToAudioNode=createAddPassiveInputConnectionToAudioNode(insertElementInSet),deleteActiveInputConnectionToAudioNode=createDeleteActiveInputConnectionToAudioNode(pickElementFromSet),audioNodeTailTimeStore=new WeakMap,getAudioNodeTailTime=createGetAudioNodeTailTime(audioNodeTailTimeStore),cacheTestResult=createCacheTestResult(new Map,new WeakMap),window$1=createWindow(),createNativeAnalyserNode=createNativeAnalyserNodeFactory(cacheTestResult,createIndexSizeError),getAudioNodeRenderer=createGetAudioNodeRenderer(getAudioNodeConnections),renderInputsOfAudioNode=createRenderInputsOfAudioNode(getAudioNodeConnections,getAudioNodeRenderer,isPartOfACycle),createAnalyserNodeRenderer=createAnalyserNodeRendererFactory(createNativeAnalyserNode,getNativeAudioNode,renderInputsOfAudioNode),getNativeContext=createGetNativeContext(CONTEXT_STORE),nativeOfflineAudioContextConstructor=createNativeOfflineAudioContextConstructor(window$1),isNativeOfflineAudioContext=createIsNativeOfflineAudioContext(nativeOfflineAudioContextConstructor),audioParamAudioNodeStore=new WeakMap,eventTargetConstructor=createEventTargetConstructor(wrapEventListener),nativeAudioContextConstructor=createNativeAudioContextConstructor(window$1),isNativeAudioContext=createIsNativeAudioContext(nativeAudioContextConstructor),isNativeAudioNode=createIsNativeAudioNode(window$1),isNativeAudioParam=createIsNativeAudioParam(window$1),nativeAudioWorkletNodeConstructor=createNativeAudioWorkletNodeConstructor(window$1),audioNodeConstructor=createAudioNodeConstructor(createAddAudioNodeConnections(AUDIO_NODE_CONNECTIONS_STORE),createAddConnectionToAudioNode(addActiveInputConnectionToAudioNode,addPassiveInputConnectionToAudioNode,connectNativeAudioNodeToNativeAudioNode,deleteActiveInputConnectionToAudioNode,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getAudioNodeTailTime,getEventListenersOfAudioNode,getNativeAudioNode,insertElementInSet,isActiveAudioNode,isPartOfACycle,isPassiveAudioNode),cacheTestResult,createIncrementCycleCounterFactory(CYCLE_COUNTERS,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,isActiveAudioNode),createIndexSizeError,createInvalidAccessError,createNotSupportedError,createDecrementCycleCounter(connectNativeAudioNodeToNativeAudioNode,CYCLE_COUNTERS,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,getNativeContext,isActiveAudioNode,isNativeOfflineAudioContext),createDetectCycles(audioParamAudioNodeStore,getAudioNodeConnections,getValueForKey),eventTargetConstructor,getNativeContext,isNativeAudioContext,isNativeAudioNode,isNativeAudioParam,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor),analyserNodeConstructor=createAnalyserNodeConstructor(audioNodeConstructor,createAnalyserNodeRenderer,createIndexSizeError,createNativeAnalyserNode,getNativeContext,isNativeOfflineAudioContext),audioBufferStore=new WeakSet,nativeAudioBufferConstructor=createNativeAudioBufferConstructor(window$1),convertNumberToUnsignedLong=createConvertNumberToUnsignedLong(new Uint32Array(1)),wrapAudioBufferCopyChannelMethods=createWrapAudioBufferCopyChannelMethods(convertNumberToUnsignedLong,createIndexSizeError),wrapAudioBufferCopyChannelMethodsOutOfBounds=createWrapAudioBufferCopyChannelMethodsOutOfBounds(convertNumberToUnsignedLong),audioBufferConstructor=createAudioBufferConstructor(audioBufferStore,cacheTestResult,createNotSupportedError,nativeAudioBufferConstructor,nativeOfflineAudioContextConstructor,createTestAudioBufferConstructorSupport(nativeAudioBufferConstructor),wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),addSilentConnection=createAddSilentConnection(createNativeGainNode),renderInputsOfAudioParam=createRenderInputsOfAudioParam(getAudioNodeRenderer,getAudioParamConnections,isPartOfACycle),connectAudioParam=createConnectAudioParam(renderInputsOfAudioParam),createNativeAudioBufferSourceNode=createNativeAudioBufferSourceNodeFactory(addSilentConnection,cacheTestResult,testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,testAudioBufferSourceNodeStartMethodOffsetClampingSupport,testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioBufferSourceNodeStartMethodOffsetClamping,createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer(overwriteAccessors),wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),renderAutomation=createRenderAutomation(createGetAudioParamRenderer(getAudioParamConnections),renderInputsOfAudioParam),createAudioBufferSourceNodeRenderer=createAudioBufferSourceNodeRendererFactory(connectAudioParam,createNativeAudioBufferSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),createAudioParam=createAudioParamFactory(createAddAudioParamConnections(AUDIO_PARAM_CONNECTIONS_STORE),audioParamAudioNodeStore,AUDIO_PARAM_STORE,createAudioParamRenderer,createCancelAndHoldAutomationEvent,createCancelScheduledValuesAutomationEvent,createExponentialRampToValueAutomationEvent,createLinearRampToValueAutomationEvent,createSetTargetAutomationEvent,createSetValueAutomationEvent,createSetValueCurveAutomationEvent,nativeAudioContextConstructor,setValueAtTimeUntilPossible),audioBufferSourceNodeConstructor=createAudioBufferSourceNodeConstructor(audioNodeConstructor,createAudioBufferSourceNodeRenderer,createAudioParam,createInvalidStateError,createNativeAudioBufferSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),audioDestinationNodeConstructor=createAudioDestinationNodeConstructor(audioNodeConstructor,createAudioDestinationNodeRenderer,createIndexSizeError,createInvalidStateError,createNativeAudioDestinationNodeFactory(createNativeGainNode,overwriteAccessors),getNativeContext,isNativeOfflineAudioContext,renderInputsOfAudioNode),createBiquadFilterNodeRenderer=createBiquadFilterNodeRendererFactory(connectAudioParam,createNativeBiquadFilterNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),setAudioNodeTailTime=createSetAudioNodeTailTime(audioNodeTailTimeStore),biquadFilterNodeConstructor=createBiquadFilterNodeConstructor(audioNodeConstructor,createAudioParam,createBiquadFilterNodeRenderer,createInvalidAccessError,createNativeBiquadFilterNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),monitorConnections=createMonitorConnections(insertElementInSet,isNativeAudioNode),wrapChannelMergerNode=createWrapChannelMergerNode(createInvalidStateError,monitorConnections),createNativeChannelMergerNode=createNativeChannelMergerNodeFactory(nativeAudioContextConstructor,wrapChannelMergerNode),createChannelMergerNodeRenderer=createChannelMergerNodeRendererFactory(createNativeChannelMergerNode,getNativeAudioNode,renderInputsOfAudioNode),channelMergerNodeConstructor=createChannelMergerNodeConstructor(audioNodeConstructor,createChannelMergerNodeRenderer,createNativeChannelMergerNode,getNativeContext,isNativeOfflineAudioContext),createChannelSplitterNodeRenderer=createChannelSplitterNodeRendererFactory(createNativeChannelSplitterNode,getNativeAudioNode,renderInputsOfAudioNode),channelSplitterNodeConstructor=createChannelSplitterNodeConstructor(audioNodeConstructor,createChannelSplitterNodeRenderer,createNativeChannelSplitterNode,getNativeContext,isNativeOfflineAudioContext,sanitizeChannelSplitterOptions),createNativeConstantSourceNodeFaker=createNativeConstantSourceNodeFakerFactory(addSilentConnection,createNativeAudioBufferSourceNode,createNativeGainNode,monitorConnections),createNativeConstantSourceNode=createNativeConstantSourceNodeFactory(addSilentConnection,cacheTestResult,createNativeConstantSourceNodeFaker,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport),createConstantSourceNodeRenderer=createConstantSourceNodeRendererFactory(connectAudioParam,createNativeConstantSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),constantSourceNodeConstructor=createConstantSourceNodeConstructor(audioNodeConstructor,createAudioParam,createConstantSourceNodeRenderer,createNativeConstantSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createNativeConvolverNode=createNativeConvolverNodeFactory(createNotSupportedError,overwriteAccessors),createConvolverNodeRenderer=createConvolverNodeRendererFactory(createNativeConvolverNode,getNativeAudioNode,renderInputsOfAudioNode),convolverNodeConstructor=createConvolverNodeConstructor(audioNodeConstructor,createConvolverNodeRenderer,createNativeConvolverNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createDelayNodeRenderer=createDelayNodeRendererFactory(connectAudioParam,createNativeDelayNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),delayNodeConstructor=createDelayNodeConstructor(audioNodeConstructor,createAudioParam,createDelayNodeRenderer,createNativeDelayNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativeDynamicsCompressorNode=createNativeDynamicsCompressorNodeFactory(createNotSupportedError),createDynamicsCompressorNodeRenderer=createDynamicsCompressorNodeRendererFactory(connectAudioParam,createNativeDynamicsCompressorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),dynamicsCompressorNodeConstructor=createDynamicsCompressorNodeConstructor(audioNodeConstructor,createAudioParam,createDynamicsCompressorNodeRenderer,createNativeDynamicsCompressorNode,createNotSupportedError,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createGainNodeRenderer=createGainNodeRendererFactory(connectAudioParam,createNativeGainNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),gainNodeConstructor=createGainNodeConstructor(audioNodeConstructor,createAudioParam,createGainNodeRenderer,createNativeGainNode,getNativeContext,isNativeOfflineAudioContext),createNativeIIRFilterNodeFaker=createNativeIIRFilterNodeFakerFactory(createInvalidAccessError,createInvalidStateError,createNativeScriptProcessorNode,createNotSupportedError),renderNativeOfflineAudioContext=createRenderNativeOfflineAudioContext(cacheTestResult,createNativeGainNode,createNativeScriptProcessorNode,createTestOfflineAudioContextCurrentTimeSupport(createNativeGainNode,nativeOfflineAudioContextConstructor)),createIIRFilterNodeRenderer=createIIRFilterNodeRendererFactory(createNativeAudioBufferSourceNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderInputsOfAudioNode,renderNativeOfflineAudioContext),createNativeIIRFilterNode=createNativeIIRFilterNodeFactory(createNativeIIRFilterNodeFaker),iIRFilterNodeConstructor=createIIRFilterNodeConstructor(audioNodeConstructor,createNativeIIRFilterNode,createIIRFilterNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createAudioListener=createAudioListenerFactory(createAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeScriptProcessorNode,createNotSupportedError,getFirstSample,isNativeOfflineAudioContext,overwriteAccessors),unrenderedAudioWorkletNodeStore=new WeakMap,minimalBaseAudioContextConstructor=createMinimalBaseAudioContextConstructor(audioDestinationNodeConstructor,createAudioListener,eventTargetConstructor,isNativeOfflineAudioContext,unrenderedAudioWorkletNodeStore,wrapEventListener),createNativeOscillatorNode=createNativeOscillatorNodeFactory(addSilentConnection,cacheTestResult,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),createOscillatorNodeRenderer=createOscillatorNodeRendererFactory(connectAudioParam,createNativeOscillatorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),oscillatorNodeConstructor=createOscillatorNodeConstructor(audioNodeConstructor,createAudioParam,createNativeOscillatorNode,createOscillatorNodeRenderer,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createConnectedNativeAudioBufferSourceNode=createConnectedNativeAudioBufferSourceNodeFactory(createNativeAudioBufferSourceNode),createNativeWaveShaperNodeFaker=createNativeWaveShaperNodeFakerFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeGainNode,isDCCurve,monitorConnections),createNativeWaveShaperNode=createNativeWaveShaperNodeFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeWaveShaperNodeFaker,isDCCurve,monitorConnections,nativeAudioContextConstructor,overwriteAccessors),createNativePannerNodeFaker=createNativePannerNodeFakerFactory(connectNativeAudioNodeToNativeAudioNode,createInvalidStateError,createNativeChannelMergerNode,createNativeGainNode,createNativeScriptProcessorNode,createNativeWaveShaperNode,createNotSupportedError,disconnectNativeAudioNodeFromNativeAudioNode,getFirstSample,monitorConnections),createNativePannerNode=createNativePannerNodeFactory(createNativePannerNodeFaker),createPannerNodeRenderer=createPannerNodeRendererFactory(connectAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeGainNode,createNativePannerNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),pannerNodeConstructor=createPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativePannerNode,createPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativePeriodicWave=createNativePeriodicWaveFactory(createIndexSizeError),periodicWaveConstructor=createPeriodicWaveConstructor(createNativePeriodicWave,getNativeContext,new WeakSet,sanitizePeriodicWaveOptions),nativeStereoPannerNodeFakerFactory=createNativeStereoPannerNodeFakerFactory(createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeGainNode,createNativeWaveShaperNode,createNotSupportedError,monitorConnections),createNativeStereoPannerNode=createNativeStereoPannerNodeFactory(nativeStereoPannerNodeFakerFactory,createNotSupportedError),createStereoPannerNodeRenderer=createStereoPannerNodeRendererFactory(connectAudioParam,createNativeStereoPannerNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),stereoPannerNodeConstructor=createStereoPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativeStereoPannerNode,createStereoPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext),createWaveShaperNodeRenderer=createWaveShaperNodeRendererFactory(createNativeWaveShaperNode,getNativeAudioNode,renderInputsOfAudioNode),waveShaperNodeConstructor=createWaveShaperNodeConstructor(audioNodeConstructor,createInvalidStateError,createNativeWaveShaperNode,createWaveShaperNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),isSecureContext=createIsSecureContext(window$1),exposeCurrentFrameAndCurrentTime=createExposeCurrentFrameAndCurrentTime(window$1),backupOfflineAudioContextStore=new WeakMap,getOrCreateBackupOfflineAudioContext=createGetOrCreateBackupOfflineAudioContext(backupOfflineAudioContextStore,nativeOfflineAudioContextConstructor),addAudioWorkletModule=isSecureContext?createAddAudioWorkletModule(cacheTestResult,createNotSupportedError,createEvaluateSource(window$1),exposeCurrentFrameAndCurrentTime,createFetchSource(createAbortError),getNativeContext,getOrCreateBackupOfflineAudioContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,new WeakMap,new WeakMap,createTestAudioWorkletProcessorPostMessageSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),window$1):void 0,isNativeContext=createIsNativeContext(isNativeAudioContext,isNativeOfflineAudioContext),decodeAudioData=createDecodeAudioData(audioBufferStore,cacheTestResult,createDataCloneError,createEncodingError,new WeakSet,getNativeContext,isNativeContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,testPromiseSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),baseAudioContextConstructor=createBaseAudioContextConstructor(addAudioWorkletModule,analyserNodeConstructor,audioBufferConstructor,audioBufferSourceNodeConstructor,biquadFilterNodeConstructor,channelMergerNodeConstructor,channelSplitterNodeConstructor,constantSourceNodeConstructor,convolverNodeConstructor,decodeAudioData,delayNodeConstructor,dynamicsCompressorNodeConstructor,gainNodeConstructor,iIRFilterNodeConstructor,minimalBaseAudioContextConstructor,oscillatorNodeConstructor,pannerNodeConstructor,periodicWaveConstructor,stereoPannerNodeConstructor,waveShaperNodeConstructor),mediaElementAudioSourceNodeConstructor=createMediaElementAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaElementAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioDestinationNodeConstructor=createMediaStreamAudioDestinationNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioDestinationNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioSourceNodeConstructor=createMediaStreamAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),createNativeMediaStreamTrackAudioSourceNode=createNativeMediaStreamTrackAudioSourceNodeFactory(createInvalidStateError,isNativeOfflineAudioContext),mediaStreamTrackAudioSourceNodeConstructor=createMediaStreamTrackAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamTrackAudioSourceNode,getNativeContext),audioContextConstructor=createAudioContextConstructor(baseAudioContextConstructor,createInvalidStateError,createNotSupportedError,createUnknownError,mediaElementAudioSourceNodeConstructor,mediaStreamAudioDestinationNodeConstructor,mediaStreamAudioSourceNodeConstructor,mediaStreamTrackAudioSourceNodeConstructor,nativeAudioContextConstructor),getUnrenderedAudioWorkletNodes=createGetUnrenderedAudioWorkletNodes(unrenderedAudioWorkletNodeStore),addUnrenderedAudioWorkletNode=createAddUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),connectMultipleOutputs=createConnectMultipleOutputs(createIndexSizeError),deleteUnrenderedAudioWorkletNode=createDeleteUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),disconnectMultipleOutputs=createDisconnectMultipleOutputs(createIndexSizeError),activeAudioWorkletNodeInputsStore=new WeakMap,getActiveAudioWorkletNodeInputs=createGetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore,getValueForKey),createNativeAudioWorkletNodeFaker=createNativeAudioWorkletNodeFakerFactory(connectMultipleOutputs,createIndexSizeError,createInvalidStateError,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,createNativeScriptProcessorNode,createNotSupportedError,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getActiveAudioWorkletNodeInputs,monitorConnections),createNativeAudioWorkletNode=createNativeAudioWorkletNodeFactory(createInvalidStateError,createNativeAudioWorkletNodeFaker,createNativeGainNode,createNotSupportedError,monitorConnections),createAudioWorkletNodeRenderer=createAudioWorkletNodeRendererFactory(connectAudioParam,connectMultipleOutputs,createNativeAudioBufferSourceNode,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,deleteUnrenderedAudioWorkletNode,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getNativeAudioNode,nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),getBackupOfflineAudioContext=createGetBackupOfflineAudioContext(backupOfflineAudioContextStore),setActiveAudioWorkletNodeInputs=createSetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore),audioWorkletNodeConstructor=isSecureContext?createAudioWorkletNodeConstructor(addUnrenderedAudioWorkletNode,audioNodeConstructor,createAudioParam,createAudioWorkletNodeRenderer,createNativeAudioWorkletNode,getAudioNodeConnections,getBackupOfflineAudioContext,getNativeContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,sanitizeAudioWorkletNodeOptions,setActiveAudioWorkletNodeInputs,testAudioWorkletNodeOptionsClonability,wrapEventListener):void 0,createNativeOfflineAudioContext=createCreateNativeOfflineAudioContext(createNotSupportedError,nativeOfflineAudioContextConstructor),startRendering=createStartRendering(audioBufferStore,cacheTestResult,getAudioNodeRenderer,getUnrenderedAudioWorkletNodes,renderNativeOfflineAudioContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),offlineAudioContextConstructor=createOfflineAudioContextConstructor(baseAudioContextConstructor,cacheTestResult,createInvalidStateError,createNativeOfflineAudioContext,startRendering),isAnyAudioContext=createIsAnyAudioContext(CONTEXT_STORE,isNativeAudioContext),isAnyAudioNode=createIsAnyAudioNode(AUDIO_NODE_STORE,isNativeAudioNode),isAnyAudioParam=createIsAnyAudioParam(AUDIO_PARAM_STORE,isNativeAudioParam),isAnyOfflineAudioContext=createIsAnyOfflineAudioContext(CONTEXT_STORE,isNativeOfflineAudioContext),isSupported=()=>createIsSupportedPromise(cacheTestResult,createTestAudioBufferCopyChannelMethodsSubarraySupport(nativeOfflineAudioContextConstructor),createTestAudioContextCloseMethodSupport(nativeAudioContextConstructor),createTestAudioContextDecodeAudioDataMethodTypeErrorSupport(nativeOfflineAudioContextConstructor),createTestAudioContextOptionsSupport(nativeAudioContextConstructor),createTestAudioNodeConnectMethodSupport(nativeOfflineAudioContextConstructor),createTestAudioWorkletProcessorNoOutputsSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),createTestChannelMergerNodeChannelCountSupport(nativeOfflineAudioContextConstructor),createTestConstantSourceNodeAccurateSchedulingSupport(nativeOfflineAudioContextConstructor),createTestConvolverNodeBufferReassignabilitySupport(nativeOfflineAudioContextConstructor),createTestConvolverNodeChannelCountSupport(nativeOfflineAudioContextConstructor),testDomExceptionConstructorSupport,createTestIsSecureContextSupport(window$1),createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport(nativeAudioContextConstructor),createTestStereoPannerNodeDefaultValueSupport(nativeOfflineAudioContextConstructor),testTransferablesSupport);function assert(re,ee){if(!re)throw new Error(ee)}function assertRange(re,ee,ne=1/0){if(!(ee<=re&&re<=ne))throw new RangeError(`Value must be within [${ee}, ${ne}], got: ${re}`)}function assertContextRunning(re){!re.isOffline&&re.state!=="running"&&warn('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let defaultLogger=console;function setLogger(re){defaultLogger=re}function log(...re){defaultLogger.log(...re)}function warn(...re){defaultLogger.warn(...re)}const Debug=Object.freeze(Object.defineProperty({__proto__:null,assert,assertContextRunning,assertRange,log,setLogger,warn},Symbol.toStringTag,{value:"Module"}));function isUndef(re){return typeof re>"u"}function isDefined(re){return!isUndef(re)}function isFunction$2(re){return typeof re=="function"}function isNumber$2(re){return typeof re=="number"}function isObject$4(re){return Object.prototype.toString.call(re)==="[object Object]"&&re.constructor===Object}function isBoolean$1(re){return typeof re=="boolean"}function isArray$8(re){return Array.isArray(re)}function isString$1(re){return typeof re=="string"}function isNote(re){return isString$1(re)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(re)}function createAudioContext(re){return new audioContextConstructor(re)}function createOfflineAudioContext(re,ee,ne){return new offlineAudioContextConstructor(re,ee,ne)}const theWindow=typeof self=="object"?self:null,hasAudioContext=theWindow&&(theWindow.hasOwnProperty("AudioContext")||theWindow.hasOwnProperty("webkitAudioContext"));function createAudioWorkletNode(re,ee,ne){return assert(isDefined(audioWorkletNodeConstructor),"This node only works in a secure context (https or localhost)"),new audioWorkletNodeConstructor(re,ee,ne)}class Ticker{constructor(ee,ne,ae){this._callback=ee,this._type=ne,this._updateInterval=ae,this._createClock()}_createWorker(){const ee=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),ne=URL.createObjectURL(ee),ae=new Worker(ne);ae.onmessage=this._callback.bind(this),this._worker=ae}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(ee){this._updateInterval=Math.max(ee,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(ee*1e3,1))}get type(){return this._type}set type(ee){this._disposeClock(),this._type=ee,this._createClock()}dispose(){this._disposeClock()}}function isAudioParam(re){return isAnyAudioParam(re)}function isAudioNode(re){return isAnyAudioNode(re)}function isOfflineAudioContext(re){return isAnyOfflineAudioContext(re)}function isAudioContext(re){return isAnyAudioContext(re)}function isAudioBuffer(re){return re instanceof AudioBuffer}function noCopy(re,ee){return re==="value"||isAudioParam(ee)||isAudioNode(ee)||isAudioBuffer(ee)}function deepMerge(re,...ee){if(!ee.length)return re;const ne=ee.shift();if(isObject$4(re)&&isObject$4(ne))for(const ae in ne)noCopy(ae,ne[ae])?re[ae]=ne[ae]:isObject$4(ne[ae])?(re[ae]||Object.assign(re,{[ae]:{}}),deepMerge(re[ae],ne[ae])):Object.assign(re,{[ae]:ne[ae]});return deepMerge(re,...ee)}function deepEquals(re,ee){return re.length===ee.length&&re.every((ne,ae)=>ee[ae]===ne)}function optionsFromArguments(re,ee,ne=[],ae){const ce={},le=Array.from(ee);if(isObject$4(le[0])&&ae&&!Reflect.has(le[0],ae)&&(Object.keys(le[0]).some(he=>Reflect.has(re,he))||(deepMerge(ce,{[ae]:le[0]}),ne.splice(ne.indexOf(ae),1),le.shift())),le.length===1&&isObject$4(le[0]))deepMerge(ce,le[0]);else for(let ue=0;ue<ne.length;ue++)isDefined(le[ue])&&(ce[ne[ue]]=le[ue]);return deepMerge(re,ce)}function getDefaultsFromInstance(re){return re.constructor.getDefaults()}function defaultArg(re,ee){return isUndef(re)?ee:re}function omitFromObject(re,ee){return ee.forEach(ne=>{Reflect.has(re,ne)&&delete re[ne]}),re}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */let Tone$1=class{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...ee){(this.debug||theWindow&&this.toString()===theWindow.TONE_DEBUG_CLASS)&&log(this,...ee)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}};Tone$1.version=version;const EPSILON=1e-6;function GT(re,ee){return re>ee+EPSILON}function GTE(re,ee){return GT(re,ee)||EQ(re,ee)}function LT(re,ee){return re+EPSILON<ee}function EQ(re,ee){return Math.abs(re-ee)<EPSILON}function clamp(re,ee,ne){return Math.max(Math.min(re,ne),ee)}class Timeline extends Tone$1{constructor(){super(),this.name="Timeline",this._timeline=[];const ee=optionsFromArguments(Timeline.getDefaults(),arguments,["memory"]);this.memory=ee.memory,this.increasing=ee.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(ee){if(assert(Reflect.has(ee,"time"),"Timeline: events must have a time attribute"),ee.time=ee.time.valueOf(),this.increasing&&this.length){const ne=this._timeline[this.length-1];assert(GTE(ee.time,ne.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(ee)}else{const ne=this._search(ee.time);this._timeline.splice(ne+1,0,ee)}if(this.length>this.memory){const ne=this.length-this.memory;this._timeline.splice(0,ne)}return this}remove(ee){const ne=this._timeline.indexOf(ee);return ne!==-1&&this._timeline.splice(ne,1),this}get(ee,ne="time"){const ae=this._search(ee,ne);return ae!==-1?this._timeline[ae]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(ee,ne="time"){const ae=this._search(ee,ne);return ae+1<this._timeline.length?this._timeline[ae+1]:null}getBefore(ee){const ne=this._timeline.length;if(ne>0&&this._timeline[ne-1].time<ee)return this._timeline[ne-1];const ae=this._search(ee);return ae-1>=0?this._timeline[ae-1]:null}cancel(ee){if(this._timeline.length>1){let ne=this._search(ee);if(ne>=0)if(EQ(this._timeline[ne].time,ee)){for(let ae=ne;ae>=0&&EQ(this._timeline[ae].time,ee);ae--)ne=ae;this._timeline=this._timeline.slice(0,ne)}else this._timeline=this._timeline.slice(0,ne+1);else this._timeline=[]}else this._timeline.length===1&&GTE(this._timeline[0].time,ee)&&(this._timeline=[]);return this}cancelBefore(ee){const ne=this._search(ee);return ne>=0&&(this._timeline=this._timeline.slice(ne+1)),this}previousEvent(ee){const ne=this._timeline.indexOf(ee);return ne>0?this._timeline[ne-1]:null}_search(ee,ne="time"){if(this._timeline.length===0)return-1;let ae=0;const ce=this._timeline.length;let le=ce;if(ce>0&&this._timeline[ce-1][ne]<=ee)return ce-1;for(;ae<le;){let ue=Math.floor(ae+(le-ae)/2);const he=this._timeline[ue],fe=this._timeline[ue+1];if(EQ(he[ne],ee)){for(let me=ue;me<this._timeline.length;me++){const ge=this._timeline[me];if(EQ(ge[ne],ee))ue=me;else break}return ue}else{if(LT(he[ne],ee)&&GT(fe[ne],ee))return ue;GT(he[ne],ee)?le=ue:ae=ue+1}}return-1}_iterate(ee,ne=0,ae=this._timeline.length-1){this._timeline.slice(ne,ae+1).forEach(ee)}forEach(ee){return this._iterate(ee),this}forEachBefore(ee,ne){const ae=this._search(ee);return ae!==-1&&this._iterate(ne,0,ae),this}forEachAfter(ee,ne){const ae=this._search(ee);return this._iterate(ne,ae+1),this}forEachBetween(ee,ne,ae){let ce=this._search(ee),le=this._search(ne);return ce!==-1&&le!==-1?(this._timeline[ce].time!==ee&&(ce+=1),this._timeline[le].time===ne&&(le-=1),this._iterate(ae,ce,le)):ce===-1&&this._iterate(ae,0,le),this}forEachFrom(ee,ne){let ae=this._search(ee);for(;ae>=0&&this._timeline[ae].time>=ee;)ae--;return this._iterate(ne,ae+1),this}forEachAtTime(ee,ne){const ae=this._search(ee);if(ae!==-1&&EQ(this._timeline[ae].time,ee)){let ce=ae;for(let le=ae;le>=0&&EQ(this._timeline[le].time,ee);le--)ce=le;this._iterate(le=>{ne(le)},ce,ae)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const notifyNewContext=[];function onContextInit(re){notifyNewContext.push(re)}function initializeContext(re){notifyNewContext.forEach(ee=>ee(re))}const notifyCloseContext=[];function onContextClose(re){notifyCloseContext.push(re)}function closeContext(re){notifyCloseContext.forEach(ee=>ee(re))}class Emitter extends Tone$1{constructor(){super(...arguments),this.name="Emitter"}on(ee,ne){return ee.split(/\W+/).forEach(ce=>{isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(ce)||(this._events[ce]=[]),this._events[ce].push(ne)}),this}once(ee,ne){const ae=(...ce)=>{ne(...ce),this.off(ee,ae)};return this.on(ee,ae),this}off(ee,ne){return ee.split(/\W+/).forEach(ce=>{if(isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(ee))if(isUndef(ne))this._events[ee]=[];else{const le=this._events[ee];for(let ue=le.length-1;ue>=0;ue--)le[ue]===ne&&le.splice(ue,1)}}),this}emit(ee,...ne){if(this._events&&this._events.hasOwnProperty(ee)){const ae=this._events[ee].slice(0);for(let ce=0,le=ae.length;ce<le;ce++)ae[ce].apply(this,ne)}return this}static mixin(ee){["on","once","off","emit"].forEach(ne=>{const ae=Object.getOwnPropertyDescriptor(Emitter.prototype,ne);Object.defineProperty(ee.prototype,ne,ae)})}dispose(){return super.dispose(),this._events=void 0,this}}class BaseContext extends Emitter{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Context extends BaseContext{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Timeline,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const ee=optionsFromArguments(Context.getDefaults(),arguments,["context"]);ee.context?this._context=ee.context:this._context=createAudioContext({latencyHint:ee.latencyHint}),this._ticker=new Ticker(this.emit.bind(this,"tick"),ee.clockSource,ee.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(ee.latencyHint),this.lookAhead=ee.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(initializeContext(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(ee,ne,ae){return this._context.createBuffer(ee,ne,ae)}createChannelMerger(ee){return this._context.createChannelMerger(ee)}createChannelSplitter(ee){return this._context.createChannelSplitter(ee)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(ee){return this._context.createDelay(ee)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(ee,ne){return this._context.createIIRFilter(ee,ne)}createPanner(){return this._context.createPanner()}createPeriodicWave(ee,ne,ae){return this._context.createPeriodicWave(ee,ne,ae)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(ee){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(ee)}createMediaElementSource(ee){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(ee)}createMediaStreamDestination(){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(ee){return this._context.decodeAudioData(ee)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(ee){assert(!this._initialized,"The listener cannot be set after initialization."),this._listener=ee}get transport(){return this.initialize(),this._transport}set transport(ee){assert(!this._initialized,"The transport cannot be set after initialization."),this._transport=ee}get draw(){return this.initialize(),this._draw}set draw(ee){assert(!this._initialized,"Draw cannot be set after initialization."),this._draw=ee}get destination(){return this.initialize(),this._destination}set destination(ee){assert(!this._initialized,"The destination cannot be set after initialization."),this._destination=ee}createAudioWorkletNode(ee,ne){return createAudioWorkletNode(this.rawContext,ee,ne)}addAudioWorkletModule(ee,ne){return __awaiter$1(this,void 0,void 0,function*(){assert(isDefined(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(ne)||this._workletModules.set(ne,this.rawContext.audioWorklet.addModule(ee)),yield this._workletModules.get(ne)})}workletsAreReady(){return __awaiter$1(this,void 0,void 0,function*(){const ee=[];this._workletModules.forEach(ne=>ee.push(ne)),yield Promise.all(ee)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(ee){this._ticker.updateInterval=ee}get clockSource(){return this._ticker.type}set clockSource(ee){this._ticker.type=ee}get latencyHint(){return this._latencyHint}_setLatencyHint(ee){let ne=0;if(this._latencyHint=ee,isString$1(ee))switch(ee){case"interactive":ne=.1;break;case"playback":ne=.5;break;case"balanced":ne=.25;break}this.lookAhead=ne,this.updateInterval=ne/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return isAudioContext(this._context)?this._context.resume():Promise.resolve()}close(){return __awaiter$1(this,void 0,void 0,function*(){isAudioContext(this._context)&&(yield this._context.close()),this._initialized&&closeContext(this)})}getConstant(ee){if(this._constants.has(ee))return this._constants.get(ee);{const ne=this._context.createBuffer(1,128,this._context.sampleRate),ae=ne.getChannelData(0);for(let le=0;le<ae.length;le++)ae[le]=ee;const ce=this._context.createBufferSource();return ce.channelCount=1,ce.channelCountMode="explicit",ce.buffer=ne,ce.loop=!0,ce.start(0),this._constants.set(ee,ce),ce}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(ee=>this._constants[ee].disconnect()),this}_timeoutLoop(){const ee=this.now();let ne=this._timeouts.peek();for(;this._timeouts.length&&ne&&ne.time<=ee;)ne.callback(),this._timeouts.shift(),ne=this._timeouts.peek()}setTimeout(ee,ne){this._timeoutIds++;const ae=this.now();return this._timeouts.add({callback:ee,id:this._timeoutIds,time:ae+ne}),this._timeoutIds}clearTimeout(ee){return this._timeouts.forEach(ne=>{ne.id===ee&&this._timeouts.remove(ne)}),this}clearInterval(ee){return this.clearTimeout(ee)}setInterval(ee,ne){const ae=++this._timeoutIds,ce=()=>{const le=this.now();this._timeouts.add({callback:()=>{ee(),ce()},id:ae,time:le+ne})};return ce(),ae}}class DummyContext extends BaseContext{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(ee,ne,ae){return{}}createChannelMerger(ee){return{}}createChannelSplitter(ee){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(ee){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(ee,ne){return{}}createPanner(){return{}}createPeriodicWave(ee,ne,ae){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(ee){return{}}createMediaElementSource(ee){return{}}createMediaStreamDestination(){return{}}decodeAudioData(ee){return Promise.resolve({})}createAudioWorkletNode(ee,ne){return{}}get rawContext(){return{}}addAudioWorkletModule(ee,ne){return __awaiter$1(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(ee,ne){return 0}clearTimeout(ee){return this}setInterval(ee,ne){return 0}clearInterval(ee){return this}getConstant(ee){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(ee){}get destination(){return{}}set destination(ee){}now(){return 0}immediate(){return 0}}function readOnly(re,ee){isArray$8(ee)?ee.forEach(ne=>readOnly(re,ne)):Object.defineProperty(re,ee,{enumerable:!0,writable:!1})}function writable(re,ee){isArray$8(ee)?ee.forEach(ne=>writable(re,ne)):Object.defineProperty(re,ee,{writable:!0})}const noOp=()=>{};class ToneAudioBuffer extends Tone$1{constructor(){super(),this.name="ToneAudioBuffer",this.onload=noOp;const ee=optionsFromArguments(ToneAudioBuffer.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=ee.reverse,this.onload=ee.onload,ee.url&&isAudioBuffer(ee.url)||ee.url instanceof ToneAudioBuffer?this.set(ee.url):isString$1(ee.url)&&this.load(ee.url).catch(ee.onerror)}static getDefaults(){return{onerror:noOp,onload:noOp,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:getContext().sampleRate}set(ee){return ee instanceof ToneAudioBuffer?ee.loaded?this._buffer=ee.get():ee.onload=()=>{this.set(ee),this.onload(this)}:this._buffer=ee,this._reversed&&this._reverse(),this}get(){return this._buffer}load(ee){return __awaiter$1(this,void 0,void 0,function*(){const ne=ToneAudioBuffer.load(ee).then(ae=>{this.set(ae),this.onload(this)});ToneAudioBuffer.downloads.push(ne);try{yield ne}finally{const ae=ToneAudioBuffer.downloads.indexOf(ne);ToneAudioBuffer.downloads.splice(ae,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(ee){const ne=isArray$8(ee)&&ee[0].length>0,ae=ne?ee.length:1,ce=ne?ee[0].length:ee.length,le=getContext(),ue=le.createBuffer(ae,ce,le.sampleRate),he=!ne&&ae===1?[ee]:ee;for(let fe=0;fe<ae;fe++)ue.copyToChannel(he[fe],fe);return this._buffer=ue,this}toMono(ee){if(isNumber$2(ee))this.fromArray(this.toArray(ee));else{let ne=new Float32Array(this.length);const ae=this.numberOfChannels;for(let ce=0;ce<ae;ce++){const le=this.toArray(ce);for(let ue=0;ue<le.length;ue++)ne[ue]+=le[ue]}ne=ne.map(ce=>ce/ae),this.fromArray(ne)}return this}toArray(ee){if(isNumber$2(ee))return this.getChannelData(ee);if(this.numberOfChannels===1)return this.toArray(0);{const ne=[];for(let ae=0;ae<this.numberOfChannels;ae++)ne[ae]=this.getChannelData(ae);return ne}}getChannelData(ee){return this._buffer?this._buffer.getChannelData(ee):new Float32Array(0)}slice(ee,ne=this.duration){const ae=Math.floor(ee*this.sampleRate),ce=Math.floor(ne*this.sampleRate);assert(ae<ce,"The start time must be less than the end time");const le=ce-ae,ue=getContext().createBuffer(this.numberOfChannels,le,this.sampleRate);for(let he=0;he<this.numberOfChannels;he++)ue.copyToChannel(this.getChannelData(he).subarray(ae,ce),he);return new ToneAudioBuffer(ue)}_reverse(){if(this.loaded)for(let ee=0;ee<this.numberOfChannels;ee++)this.getChannelData(ee).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(ee){this._reversed!==ee&&(this._reversed=ee,this._reverse())}static fromArray(ee){return new ToneAudioBuffer().fromArray(ee)}static fromUrl(ee){return __awaiter$1(this,void 0,void 0,function*(){return yield new ToneAudioBuffer().load(ee)})}static load(ee){return __awaiter$1(this,void 0,void 0,function*(){const ne=ee.match(/\[([^\]\[]+\|.+)\]$/);if(ne){const he=ne[1].split("|");let fe=he[0];for(const me of he)if(ToneAudioBuffer.supportsType(me)){fe=me;break}ee=ee.replace(ne[0],fe)}const ae=ToneAudioBuffer.baseUrl===""||ToneAudioBuffer.baseUrl.endsWith("/")?ToneAudioBuffer.baseUrl:ToneAudioBuffer.baseUrl+"/",ce=yield fetch(ae+ee);if(!ce.ok)throw new Error(`could not load url: ${ee}`);const le=yield ce.arrayBuffer();return yield getContext().decodeAudioData(le)})}static supportsType(ee){const ne=ee.split("."),ae=ne[ne.length-1];return document.createElement("audio").canPlayType("audio/"+ae)!==""}static loaded(){return __awaiter$1(this,void 0,void 0,function*(){for(yield Promise.resolve();ToneAudioBuffer.downloads.length;)yield ToneAudioBuffer.downloads[0]})}}ToneAudioBuffer.baseUrl="";ToneAudioBuffer.downloads=[];class OfflineContext extends Context{constructor(){super({clockSource:"offline",context:isOfflineAudioContext(arguments[0])?arguments[0]:createOfflineAudioContext(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:isOfflineAudioContext(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=isOfflineAudioContext(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(ee){return __awaiter$1(this,void 0,void 0,function*(){let ne=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,ne++;const ae=Math.floor(this.sampleRate/128);ee&&ne%ae===0&&(yield new Promise(ce=>setTimeout(ce,1)))}})}render(ee=!0){return __awaiter$1(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(ee);const ne=yield this._context.startRendering();return new ToneAudioBuffer(ne)})}close(){return Promise.resolve()}}const dummyContext=new DummyContext;let globalContext=dummyContext;function getContext(){return globalContext===dummyContext&&hasAudioContext&&setContext(new Context),globalContext}function setContext(re){isAudioContext(re)?globalContext=new Context(re):isOfflineAudioContext(re)?globalContext=new OfflineContext(re):globalContext=re}function start(){return globalContext.resume()}if(theWindow&&!theWindow.TONE_SILENCE_LOGGING){const ee=` * Tone.js v${version} * `;console.log(`%c${ee}`,"background: #000; color: #fff")}function dbToGain(re){return Math.pow(10,re/20)}function gainToDb(re){return 20*(Math.log(re)/Math.LN10)}function intervalToFrequencyRatio(re){return Math.pow(2,re/12)}let A4=440;function getA4(){return A4}function setA4(re){A4=re}function ftom(re){return Math.round(ftomf(re))}function ftomf(re){return 69+12*Math.log2(re/A4)}function mtof(re){return A4*Math.pow(2,(re-69)/12)}class TimeBaseClass extends Tone$1{constructor(ee,ne,ae){super(),this.defaultUnits="s",this._val=ne,this._units=ae,this.context=ee,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:ee=>this._frequencyToUnits(parseFloat(ee)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:ee=>this._ticksToUnits(parseInt(ee,10)),regexp:/^(\d+)i$/i},m:{method:ee=>this._beatsToUnits(parseInt(ee,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(ee,ne)=>{const ae=parseInt(ee,10),ce=ne==="."?1.5:1;return ae===1?this._beatsToUnits(this._getTimeSignature())*ce:this._beatsToUnits(4/ae)*ce},regexp:/^(\d+)n(\.?)$/i},number:{method:ee=>this._expressions[this.defaultUnits].method.call(this,ee),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:ee=>this._secondsToUnits(parseFloat(ee)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:ee=>parseInt(ee,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:ee=>{const ne=parseInt(ee,10);return this._beatsToUnits(8/(Math.floor(ne)*3))},regexp:/^(\d+)t$/i},tr:{method:(ee,ne,ae)=>{let ce=0;return ee&&ee!=="0"&&(ce+=this._beatsToUnits(this._getTimeSignature()*parseFloat(ee))),ne&&ne!=="0"&&(ce+=this._beatsToUnits(parseFloat(ne))),ae&&ae!=="0"&&(ce+=this._beatsToUnits(parseFloat(ae)/4)),ce},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof TimeBaseClass&&this.fromType(this._val),isUndef(this._val))return this._noArg();if(isString$1(this._val)&&isUndef(this._units)){for(const ee in this._expressions)if(this._expressions[ee].regexp.test(this._val.trim())){this._units=ee;break}}else if(isObject$4(this._val)){let ee=0;for(const ne in this._val)if(isDefined(this._val[ne])){const ae=this._val[ne],ce=new this.constructor(this.context,ne).valueOf()*ae;ee+=ce}return ee}if(isDefined(this._units)){const ee=this._expressions[this._units],ne=this._val.toString().trim().match(ee.regexp);return ne?ee.method.apply(this,ne.slice(1)):ee.method.call(this,this._val)}else return isString$1(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(ee){return 1/ee}_beatsToUnits(ee){return 60/this._getBpm()*ee}_secondsToUnits(ee){return ee}_ticksToUnits(ee){return ee*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(ee){switch(this._units=void 0,this.defaultUnits){case"s":this._val=ee.toSeconds();break;case"i":this._val=ee.toTicks();break;case"hz":this._val=ee.toFrequency();break;case"midi":this._val=ee.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class TimeClass extends TimeBaseClass{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:ee=>this._now()+new this.constructor(this.context,ee).valueOf(),regexp:/^\+(.+)/},quantize:{method:ee=>{const ne=new TimeClass(this.context,ee).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(ne))},regexp:/^@(.+)/}})}quantize(ee,ne=1){const ae=new this.constructor(this.context,ee).valueOf(),ce=this.valueOf(),he=Math.round(ce/ae)*ae-ce;return ce+he*ne}toNotation(){const ee=this.toSeconds(),ne=["1m"];for(let le=1;le<9;le++){const ue=Math.pow(2,le);ne.push(ue+"n."),ne.push(ue+"n"),ne.push(ue+"t")}ne.push("0");let ae=ne[0],ce=new TimeClass(this.context,ne[0]).toSeconds();return ne.forEach(le=>{const ue=new TimeClass(this.context,le).toSeconds();Math.abs(ue-ee)<Math.abs(ce-ee)&&(ae=le,ce=ue)}),ae}toBarsBeatsSixteenths(){const ee=this._beatsToUnits(1);let ne=this.valueOf()/ee;ne=parseFloat(ne.toFixed(4));const ae=Math.floor(ne/this._getTimeSignature());let ce=ne%1*4;ne=Math.floor(ne)%this._getTimeSignature();const le=ce.toString();return le.length>3&&(ce=parseFloat(parseFloat(le).toFixed(3))),[ae,ne,ce].join(":")}toTicks(){const ee=this._beatsToUnits(1),ne=this.valueOf()/ee;return Math.round(ne*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return ftom(this.toFrequency())}_now(){return this.context.now()}}function Time(re,ee){return new TimeClass(getContext(),re,ee)}class FrequencyClass extends TimeClass{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return getA4()}static set A4(ee){setA4(ee)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(ee){return this.defaultUnits==="midi"?ee:FrequencyClass.mtof(ee)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(ee,ne){const ce=noteToScaleIndex[ee.toLowerCase()]+(parseInt(ne,10)+1)*12;return this.defaultUnits==="midi"?ce:FrequencyClass.mtof(ce)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(ee,ne,ae){let ce=1;return ee&&ee!=="0"&&(ce*=this._beatsToUnits(this._getTimeSignature()*parseFloat(ee))),ne&&ne!=="0"&&(ce*=this._beatsToUnits(parseFloat(ne))),ae&&ae!=="0"&&(ce*=this._beatsToUnits(parseFloat(ae)/4)),ce}}})}transpose(ee){return new FrequencyClass(this.context,this.valueOf()*intervalToFrequencyRatio(ee))}harmonize(ee){return ee.map(ne=>this.transpose(ne))}toMidi(){return ftom(this.valueOf())}toNote(){const ee=this.toFrequency(),ne=Math.log2(ee/FrequencyClass.A4);let ae=Math.round(12*ne)+57;const ce=Math.floor(ae/12);return ce<0&&(ae+=-12*ce),scaleIndexToNote[ae%12]+ce.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const ee=this._beatsToUnits(1),ne=this.valueOf()/ee;return Math.floor(ne*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(ee){return ee}_ticksToUnits(ee){return 1/(ee*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(ee){return 1/super._beatsToUnits(ee)}_secondsToUnits(ee){return 1/ee}static mtof(ee){return mtof(ee)}static ftom(ee){return ftom(ee)}}const noteToScaleIndex={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},scaleIndexToNote=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Frequency(re,ee){return new FrequencyClass(getContext(),re,ee)}class TransportTimeClass extends TimeClass{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function TransportTime(re,ee){return new TransportTimeClass(getContext(),re,ee)}class ToneWithContext extends Tone$1{constructor(){super();const ee=optionsFromArguments(ToneWithContext.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=ee.context}static getDefaults(){return{context:getContext()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(ee){return new TimeClass(this.context,ee).toSeconds()}toFrequency(ee){return new FrequencyClass(this.context,ee).toFrequency()}toTicks(ee){return new TransportTimeClass(this.context,ee).toTicks()}_getPartialProperties(ee){const ne=this.get();return Object.keys(ne).forEach(ae=>{isUndef(ee[ae])&&delete ne[ae]}),ne}get(){const ee=getDefaultsFromInstance(this);return Object.keys(ee).forEach(ne=>{if(Reflect.has(this,ne)){const ae=this[ne];isDefined(ae)&&isDefined(ae.value)&&isDefined(ae.setValueAtTime)?ee[ne]=ae.value:ae instanceof ToneWithContext?ee[ne]=ae._getPartialProperties(ee[ne]):isArray$8(ae)||isNumber$2(ae)||isString$1(ae)||isBoolean$1(ae)?ee[ne]=ae:delete ee[ne]}}),ee}set(ee){return Object.keys(ee).forEach(ne=>{Reflect.has(this,ne)&&isDefined(this[ne])&&(this[ne]&&isDefined(this[ne].value)&&isDefined(this[ne].setValueAtTime)?this[ne].value!==ee[ne]&&(this[ne].value=ee[ne]):this[ne]instanceof ToneWithContext?this[ne].set(ee[ne]):this[ne]=ee[ne])}),this}}class StateTimeline extends Timeline{constructor(ee="stopped"){super(),this.name="StateTimeline",this._initial=ee,this.setStateAtTime(this._initial,0)}getValueAtTime(ee){const ne=this.get(ee);return ne!==null?ne.state:this._initial}setStateAtTime(ee,ne,ae){return assertRange(ne,0),this.add(Object.assign({},ae,{state:ee,time:ne})),this}getLastState(ee,ne){const ae=this._search(ne);for(let ce=ae;ce>=0;ce--){const le=this._timeline[ce];if(le.state===ee)return le}}getNextState(ee,ne){const ae=this._search(ne);if(ae!==-1)for(let ce=ae;ce<this._timeline.length;ce++){const le=this._timeline[ce];if(le.state===ee)return le}}}class Param extends ToneWithContext{constructor(){super(optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const ee=optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"]);for(assert(isDefined(ee.param)&&(isAudioParam(ee.param)||ee.param instanceof Param),"param must be an AudioParam");!isAudioParam(ee.param);)ee.param=ee.param._param;this._swappable=isDefined(ee.swappable)?ee.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=ee.param,this.input.connect(this._param)):this._param=this.input=ee.param,this._events=new Timeline(1e3),this._initialValue=this._param.defaultValue,this.units=ee.units,this.convert=ee.convert,this._minValue=ee.minValue,this._maxValue=ee.maxValue,isDefined(ee.value)&&ee.value!==this._toType(this._initialValue)&&this.setValueAtTime(ee.value,0)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{convert:!0,units:"number"})}get value(){const ee=this.now();return this.getValueAtTime(ee)}set value(ee){this.cancelScheduledValues(this.now()),this.setValueAtTime(ee,this.now())}get minValue(){return isDefined(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return isDefined(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(ee,ne){return this.units===ne}_assertRange(ee){return isDefined(this.maxValue)&&isDefined(this.minValue)&&assertRange(ee,this._fromType(this.minValue),this._fromType(this.maxValue)),ee}_fromType(ee){return this.convert&&!this.overridden?this._is(ee,"time")?this.toSeconds(ee):this._is(ee,"decibels")?dbToGain(ee):this._is(ee,"frequency")?this.toFrequency(ee):ee:this.overridden?0:ee}_toType(ee){return this.convert&&this.units==="decibels"?gainToDb(ee):ee}setValueAtTime(ee,ne){const ae=this.toSeconds(ne),ce=this._fromType(ee);return assert(isFinite(ce)&&isFinite(ae),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(ee)}, ${JSON.stringify(ne)}`),this._assertRange(ce),this.log(this.units,"setValueAtTime",ee,ae),this._events.add({time:ae,type:"setValueAtTime",value:ce}),this._param.setValueAtTime(ce,ae),this}getValueAtTime(ee){const ne=Math.max(this.toSeconds(ee),0),ae=this._events.getAfter(ne),ce=this._events.get(ne);let le=this._initialValue;if(ce===null)le=this._initialValue;else if(ce.type==="setTargetAtTime"&&(ae===null||ae.type==="setValueAtTime")){const ue=this._events.getBefore(ce.time);let he;ue===null?he=this._initialValue:he=ue.value,ce.type==="setTargetAtTime"&&(le=this._exponentialApproach(ce.time,he,ce.value,ce.constant,ne))}else if(ae===null)le=ce.value;else if(ae.type==="linearRampToValueAtTime"||ae.type==="exponentialRampToValueAtTime"){let ue=ce.value;if(ce.type==="setTargetAtTime"){const he=this._events.getBefore(ce.time);he===null?ue=this._initialValue:ue=he.value}ae.type==="linearRampToValueAtTime"?le=this._linearInterpolate(ce.time,ue,ae.time,ae.value,ne):le=this._exponentialInterpolate(ce.time,ue,ae.time,ae.value,ne)}else le=ce.value;return this._toType(le)}setRampPoint(ee){ee=this.toSeconds(ee);let ne=this.getValueAtTime(ee);return this.cancelAndHoldAtTime(ee),this._fromType(ne)===0&&(ne=this._toType(this._minOutput)),this.setValueAtTime(ne,ee),this}linearRampToValueAtTime(ee,ne){const ae=this._fromType(ee),ce=this.toSeconds(ne);return assert(isFinite(ae)&&isFinite(ce),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(ee)}, ${JSON.stringify(ne)}`),this._assertRange(ae),this._events.add({time:ce,type:"linearRampToValueAtTime",value:ae}),this.log(this.units,"linearRampToValueAtTime",ee,ce),this._param.linearRampToValueAtTime(ae,ce),this}exponentialRampToValueAtTime(ee,ne){let ae=this._fromType(ee);ae=EQ(ae,0)?this._minOutput:ae,this._assertRange(ae);const ce=this.toSeconds(ne);return assert(isFinite(ae)&&isFinite(ce),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(ee)}, ${JSON.stringify(ne)}`),this._events.add({time:ce,type:"exponentialRampToValueAtTime",value:ae}),this.log(this.units,"exponentialRampToValueAtTime",ee,ce),this._param.exponentialRampToValueAtTime(ae,ce),this}exponentialRampTo(ee,ne,ae){return ae=this.toSeconds(ae),this.setRampPoint(ae),this.exponentialRampToValueAtTime(ee,ae+this.toSeconds(ne)),this}linearRampTo(ee,ne,ae){return ae=this.toSeconds(ae),this.setRampPoint(ae),this.linearRampToValueAtTime(ee,ae+this.toSeconds(ne)),this}targetRampTo(ee,ne,ae){return ae=this.toSeconds(ae),this.setRampPoint(ae),this.exponentialApproachValueAtTime(ee,ae,ne),this}exponentialApproachValueAtTime(ee,ne,ae){ne=this.toSeconds(ne),ae=this.toSeconds(ae);const ce=Math.log(ae+1)/Math.log(200);return this.setTargetAtTime(ee,ne,ce),this.cancelAndHoldAtTime(ne+ae*.9),this.linearRampToValueAtTime(ee,ne+ae),this}setTargetAtTime(ee,ne,ae){const ce=this._fromType(ee);assert(isFinite(ae)&&ae>0,"timeConstant must be a number greater than 0");const le=this.toSeconds(ne);return this._assertRange(ce),assert(isFinite(ce)&&isFinite(le),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(ee)}, ${JSON.stringify(ne)}`),this._events.add({constant:ae,time:le,type:"setTargetAtTime",value:ce}),this.log(this.units,"setTargetAtTime",ee,le,ae),this._param.setTargetAtTime(ce,le,ae),this}setValueCurveAtTime(ee,ne,ae,ce=1){ae=this.toSeconds(ae),ne=this.toSeconds(ne);const le=this._fromType(ee[0])*ce;this.setValueAtTime(this._toType(le),ne);const ue=ae/(ee.length-1);for(let he=1;he<ee.length;he++){const fe=this._fromType(ee[he])*ce;this.linearRampToValueAtTime(this._toType(fe),ne+he*ue)}return this}cancelScheduledValues(ee){const ne=this.toSeconds(ee);return assert(isFinite(ne),`Invalid argument to cancelScheduledValues: ${JSON.stringify(ee)}`),this._events.cancel(ne),this._param.cancelScheduledValues(ne),this.log(this.units,"cancelScheduledValues",ne),this}cancelAndHoldAtTime(ee){const ne=this.toSeconds(ee),ae=this._fromType(this.getValueAtTime(ne));assert(isFinite(ne),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(ee)}`),this.log(this.units,"cancelAndHoldAtTime",ne,"value="+ae);const ce=this._events.get(ne),le=this._events.getAfter(ne);return ce&&EQ(ce.time,ne)?le?(this._param.cancelScheduledValues(le.time),this._events.cancel(le.time)):(this._param.cancelAndHoldAtTime(ne),this._events.cancel(ne+this.sampleTime)):le&&(this._param.cancelScheduledValues(le.time),this._events.cancel(le.time),le.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(ae),ne):le.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(ae),ne)),this._events.add({time:ne,type:"setValueAtTime",value:ae}),this._param.setValueAtTime(ae,ne),this}rampTo(ee,ne=.1,ae){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(ee,ne,ae):this.linearRampTo(ee,ne,ae),this}apply(ee){const ne=this.context.currentTime;ee.setValueAtTime(this.getValueAtTime(ne),ne);const ae=this._events.get(ne);if(ae&&ae.type==="setTargetAtTime"){const ce=this._events.getAfter(ae.time),le=ce?ce.time:ne+2,ue=(le-ne)/10;for(let he=ne;he<le;he+=ue)ee.linearRampToValueAtTime(this.getValueAtTime(he),he)}return this._events.forEachAfter(this.context.currentTime,ce=>{ce.type==="cancelScheduledValues"?ee.cancelScheduledValues(ce.time):ce.type==="setTargetAtTime"?ee.setTargetAtTime(ce.value,ce.time,ce.constant):ee[ce.type](ce.value,ce.time)}),this}setParam(ee){assert(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const ne=this.input;return ne.disconnect(this._param),this.apply(ee),this._param=ee,ne.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(ee,ne,ae,ce,le){return ae+(ne-ae)*Math.exp(-(le-ee)/ce)}_linearInterpolate(ee,ne,ae,ce,le){return ne+(ce-ne)*((le-ee)/(ae-ee))}_exponentialInterpolate(ee,ne,ae,ce,le){return ne*Math.pow(ce/ne,(le-ee)/(ae-ee))}}class ToneAudioNode extends ToneWithContext{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return isDefined(this.input)?isAudioParam(this.input)||this.input instanceof Param?1:this.input.numberOfInputs:0}get numberOfOutputs(){return isDefined(this.output)?this.output.numberOfOutputs:0}_isAudioNode(ee){return isDefined(ee)&&(ee instanceof ToneAudioNode||isAudioNode(ee))}_getInternalNodes(){const ee=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&ee.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&ee.push(this.output),ee}_setChannelProperties(ee){this._getInternalNodes().forEach(ae=>{ae.channelCount=ee.channelCount,ae.channelCountMode=ee.channelCountMode,ae.channelInterpretation=ee.channelInterpretation})}_getChannelProperties(){const ee=this._getInternalNodes();assert(ee.length>0,"ToneAudioNode does not have any internal nodes");const ne=ee[0];return{channelCount:ne.channelCount,channelCountMode:ne.channelCountMode,channelInterpretation:ne.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(ee){const ne=this._getChannelProperties();this._setChannelProperties(Object.assign(ne,{channelCount:ee}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(ee){const ne=this._getChannelProperties();this._setChannelProperties(Object.assign(ne,{channelCountMode:ee}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(ee){const ne=this._getChannelProperties();this._setChannelProperties(Object.assign(ne,{channelInterpretation:ee}))}connect(ee,ne=0,ae=0){return connect(this,ee,ne,ae),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return warn("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(ee,ne=0,ae=0){return disconnect(this,ee,ne,ae),this}chain(...ee){return connectSeries(this,...ee),this}fan(...ee){return ee.forEach(ne=>this.connect(ne)),this}dispose(){return super.dispose(),isDefined(this.input)&&(this.input instanceof ToneAudioNode?this.input.dispose():isAudioNode(this.input)&&this.input.disconnect()),isDefined(this.output)&&(this.output instanceof ToneAudioNode?this.output.dispose():isAudioNode(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function connectSeries(...re){const ee=re.shift();re.reduce((ne,ae)=>(ne instanceof ToneAudioNode?ne.connect(ae):isAudioNode(ne)&&connect(ne,ae),ae),ee)}function connect(re,ee,ne=0,ae=0){for(assert(isDefined(re),"Cannot connect from undefined node"),assert(isDefined(ee),"Cannot connect to undefined node"),(ee instanceof ToneAudioNode||isAudioNode(ee))&&assert(ee.numberOfInputs>0,"Cannot connect to node with no inputs"),assert(re.numberOfOutputs>0,"Cannot connect from node with no outputs");ee instanceof ToneAudioNode||ee instanceof Param;)isDefined(ee.input)&&(ee=ee.input);for(;re instanceof ToneAudioNode;)isDefined(re.output)&&(re=re.output);isAudioParam(ee)?re.connect(ee,ne):re.connect(ee,ne,ae)}function disconnect(re,ee,ne=0,ae=0){if(isDefined(ee))for(;ee instanceof ToneAudioNode;)ee=ee.input;for(;!isAudioNode(re);)isDefined(re.output)&&(re=re.output);isAudioParam(ee)?re.disconnect(ee,ne):isAudioNode(ee)?re.disconnect(ee,ne,ae):re.disconnect()}class Gain extends ToneAudioNode{constructor(){super(optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const ee=optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"]);this.gain=new Param({context:this.context,convert:ee.convert,param:this._gainNode.gain,units:ee.units,value:ee.gain,minValue:ee.minValue,maxValue:ee.maxValue}),readOnly(this,"gain")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class OneShotSource extends ToneAudioNode{constructor(ee){super(ee),this.onended=noOp,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Gain({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(ne){const ae=this.toSeconds(ne);return this._startTime!==-1&&ae>=this._startTime&&(this._stopTime===-1||ae<=this._stopTime)?"started":"stopped"},this._fadeIn=ee.fadeIn,this._fadeOut=ee.fadeOut,this._curve=ee.curve,this.onended=ee.onended}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:noOp})}_startGain(ee,ne=1){assert(this._startTime===-1,"Source cannot be started more than once");const ae=this.toSeconds(this._fadeIn);return this._startTime=ee+ae,this._startTime=Math.max(this._startTime,this.context.currentTime),ae>0?(this._gainNode.gain.setValueAtTime(0,ee),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(ne,ee+ae):this._gainNode.gain.exponentialApproachValueAtTime(ne,ee,ae)):this._gainNode.gain.setValueAtTime(ne,ee),this}stop(ee){return this.log("stop",ee),this._stopGain(this.toSeconds(ee)),this}_stopGain(ee){assert(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const ne=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(ee)+ne,this._stopTime=Math.max(this._stopTime,this.context.currentTime),ne>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,ne,ee):this._gainNode.gain.targetRampTo(0,ne,ee):(this._gainNode.gain.cancelAndHoldAtTime(ee),this._gainNode.gain.setValueAtTime(0,ee)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const ae=this._curve==="exponential"?ne*2:0;this._stopSource(this.now()+ae),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==noOp&&(this.onended(this),this.onended=noOp,!this.context.isOffline)){const ee=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(ee):setTimeout(ee,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),assert(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class ToneConstantSource extends OneShotSource{constructor(){super(optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const ee=optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"]);connect(this._source,this._gainNode),this.offset=new Param({context:this.context,convert:ee.convert,param:this._source.offset,units:ee.units,value:ee.offset,minValue:ee.minValue,maxValue:ee.maxValue})}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{convert:!0,offset:1,units:"number"})}start(ee){const ne=this.toSeconds(ee);return this.log("start",ne),this._startGain(ne),this._source.start(ne),this}_stopSource(ee){this._source.stop(ee)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Signal extends ToneAudioNode{constructor(){super(optionsFromArguments(Signal.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const ee=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new ToneConstantSource({context:this.context,convert:ee.convert,offset:ee.value,units:ee.units,minValue:ee.minValue,maxValue:ee.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,units:"number",value:0})}connect(ee,ne=0,ae=0){return connectSignal(this,ee,ne,ae),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(ee,ne){return this._param.setValueAtTime(ee,ne),this}getValueAtTime(ee){return this._param.getValueAtTime(ee)}setRampPoint(ee){return this._param.setRampPoint(ee),this}linearRampToValueAtTime(ee,ne){return this._param.linearRampToValueAtTime(ee,ne),this}exponentialRampToValueAtTime(ee,ne){return this._param.exponentialRampToValueAtTime(ee,ne),this}exponentialRampTo(ee,ne,ae){return this._param.exponentialRampTo(ee,ne,ae),this}linearRampTo(ee,ne,ae){return this._param.linearRampTo(ee,ne,ae),this}targetRampTo(ee,ne,ae){return this._param.targetRampTo(ee,ne,ae),this}exponentialApproachValueAtTime(ee,ne,ae){return this._param.exponentialApproachValueAtTime(ee,ne,ae),this}setTargetAtTime(ee,ne,ae){return this._param.setTargetAtTime(ee,ne,ae),this}setValueCurveAtTime(ee,ne,ae,ce){return this._param.setValueCurveAtTime(ee,ne,ae,ce),this}cancelScheduledValues(ee){return this._param.cancelScheduledValues(ee),this}cancelAndHoldAtTime(ee){return this._param.cancelAndHoldAtTime(ee),this}rampTo(ee,ne,ae){return this._param.rampTo(ee,ne,ae),this}get value(){return this._param.value}set value(ee){this._param.value=ee}get convert(){return this._param.convert}set convert(ee){this._param.convert=ee}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(ee){this._param.overridden=ee}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(ee){return this._param.apply(ee),this}}function connectSignal(re,ee,ne,ae){(ee instanceof Param||isAudioParam(ee)||ee instanceof Signal&&ee.override)&&(ee.cancelScheduledValues(0),ee.setValueAtTime(0,0),ee instanceof Signal&&(ee.overridden=!0)),connect(re,ee,ne,ae)}class TickParam extends Param{constructor(){super(optionsFromArguments(TickParam.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Timeline(1/0),this._multiplier=1;const ee=optionsFromArguments(TickParam.getDefaults(),arguments,["value"]);this._multiplier=ee.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(ee.value)}),this.setValueAtTime(ee.value,0)}static getDefaults(){return Object.assign(Param.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(ee,ne,ae){ne=this.toSeconds(ne),this.setRampPoint(ne);const ce=this._fromType(ee),le=this._events.get(ne),ue=Math.round(Math.max(1/ae,1));for(let he=0;he<=ue;he++){const fe=ae*he+ne,me=this._exponentialApproach(le.time,le.value,ce,ae,fe);this.linearRampToValueAtTime(this._toType(me),fe)}return this}setValueAtTime(ee,ne){const ae=this.toSeconds(ne);super.setValueAtTime(ee,ne);const ce=this._events.get(ae),le=this._events.previousEvent(ce),ue=this._getTicksUntilEvent(le,ae);return ce.ticks=Math.max(ue,0),this}linearRampToValueAtTime(ee,ne){const ae=this.toSeconds(ne);super.linearRampToValueAtTime(ee,ne);const ce=this._events.get(ae),le=this._events.previousEvent(ce),ue=this._getTicksUntilEvent(le,ae);return ce.ticks=Math.max(ue,0),this}exponentialRampToValueAtTime(ee,ne){ne=this.toSeconds(ne);const ae=this._fromType(ee),ce=this._events.get(ne),le=Math.round(Math.max((ne-ce.time)*10,1)),ue=(ne-ce.time)/le;for(let he=0;he<=le;he++){const fe=ue*he+ce.time,me=this._exponentialInterpolate(ce.time,ce.value,ne,ae,fe);this.linearRampToValueAtTime(this._toType(me),fe)}return this}_getTicksUntilEvent(ee,ne){if(ee===null)ee={ticks:0,time:0,type:"setValueAtTime",value:0};else if(isUndef(ee.ticks)){const ue=this._events.previousEvent(ee);ee.ticks=this._getTicksUntilEvent(ue,ee.time)}const ae=this._fromType(this.getValueAtTime(ee.time));let ce=this._fromType(this.getValueAtTime(ne));const le=this._events.get(ne);return le&&le.time===ne&&le.type==="setValueAtTime"&&(ce=this._fromType(this.getValueAtTime(ne-this.sampleTime))),.5*(ne-ee.time)*(ae+ce)+ee.ticks}getTicksAtTime(ee){const ne=this.toSeconds(ee),ae=this._events.get(ne);return Math.max(this._getTicksUntilEvent(ae,ne),0)}getDurationOfTicks(ee,ne){const ae=this.toSeconds(ne),ce=this.getTicksAtTime(ne);return this.getTimeOfTick(ce+ee)-ae}getTimeOfTick(ee){const ne=this._events.get(ee,"ticks"),ae=this._events.getAfter(ee,"ticks");if(ne&&ne.ticks===ee)return ne.time;if(ne&&ae&&ae.type==="linearRampToValueAtTime"&&ne.value!==ae.value){const ce=this._fromType(this.getValueAtTime(ne.time)),ue=(this._fromType(this.getValueAtTime(ae.time))-ce)/(ae.time-ne.time),he=Math.sqrt(Math.pow(ce,2)-2*ue*(ne.ticks-ee)),fe=(-ce+he)/ue,me=(-ce-he)/ue;return(fe>0?fe:me)+ne.time}else return ne?ne.value===0?1/0:ne.time+(ee-ne.ticks)/ne.value:ee/this._initialValue}ticksToTime(ee,ne){return this.getDurationOfTicks(ee,ne)}timeToTicks(ee,ne){const ae=this.toSeconds(ne),ce=this.toSeconds(ee),le=this.getTicksAtTime(ae);return this.getTicksAtTime(ae+ce)-le}_fromType(ee){return this.units==="bpm"&&this.multiplier?1/(60/ee/this.multiplier):super._fromType(ee)}_toType(ee){return this.units==="bpm"&&this.multiplier?ee/this.multiplier*60:super._toType(ee)}get multiplier(){return this._multiplier}set multiplier(ee){const ne=this.value;this._multiplier=ee,this.cancelScheduledValues(0),this.setValueAtTime(ne,0)}}class TickSignal extends Signal{constructor(){super(optionsFromArguments(TickSignal.getDefaults(),arguments,["value"])),this.name="TickSignal";const ee=optionsFromArguments(TickSignal.getDefaults(),arguments,["value"]);this.input=this._param=new TickParam({context:this.context,convert:ee.convert,multiplier:ee.multiplier,param:this._constantSource.offset,units:ee.units,value:ee.value})}static getDefaults(){return Object.assign(Signal.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(ee,ne){return this._param.ticksToTime(ee,ne)}timeToTicks(ee,ne){return this._param.timeToTicks(ee,ne)}getTimeOfTick(ee){return this._param.getTimeOfTick(ee)}getDurationOfTicks(ee,ne){return this._param.getDurationOfTicks(ee,ne)}getTicksAtTime(ee){return this._param.getTicksAtTime(ee)}get multiplier(){return this._param.multiplier}set multiplier(ee){this._param.multiplier=ee}dispose(){return super.dispose(),this._param.dispose(),this}}class TickSource extends ToneWithContext{constructor(){super(optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new StateTimeline,this._tickOffset=new Timeline;const ee=optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"]);this.frequency=new TickSignal({context:this.context,units:ee.units,value:ee.frequency}),readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ToneWithContext.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(ee,ne){const ae=this.toSeconds(ee);return this._state.getValueAtTime(ae)!=="started"&&(this._state.setStateAtTime("started",ae),isDefined(ne)&&this.setTicksAtTime(ne,ae)),this}stop(ee){const ne=this.toSeconds(ee);if(this._state.getValueAtTime(ne)==="stopped"){const ae=this._state.get(ne);ae&&ae.time>0&&(this._tickOffset.cancel(ae.time),this._state.cancel(ae.time))}return this._state.cancel(ne),this._state.setStateAtTime("stopped",ne),this.setTicksAtTime(0,ne),this}pause(ee){const ne=this.toSeconds(ee);return this._state.getValueAtTime(ne)==="started"&&this._state.setStateAtTime("paused",ne),this}cancel(ee){return ee=this.toSeconds(ee),this._state.cancel(ee),this._tickOffset.cancel(ee),this}getTicksAtTime(ee){const ne=this.toSeconds(ee),ae=this._state.getLastState("stopped",ne),ce={state:"paused",time:ne};this._state.add(ce);let le=ae,ue=0;return this._state.forEachBetween(ae.time,ne+this.sampleTime,he=>{let fe=le.time;const me=this._tickOffset.get(he.time);me&&me.time>=le.time&&(ue=me.ticks,fe=me.time),le.state==="started"&&he.state!=="started"&&(ue+=this.frequency.getTicksAtTime(he.time)-this.frequency.getTicksAtTime(fe)),le=he}),this._state.remove(ce),ue}get ticks(){return this.getTicksAtTime(this.now())}set ticks(ee){this.setTicksAtTime(ee,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(ee){const ne=this.now(),ae=this.frequency.timeToTicks(ee,ne);this.setTicksAtTime(ae,ne)}getSecondsAtTime(ee){ee=this.toSeconds(ee);const ne=this._state.getLastState("stopped",ee),ae={state:"paused",time:ee};this._state.add(ae);let ce=ne,le=0;return this._state.forEachBetween(ne.time,ee+this.sampleTime,ue=>{let he=ce.time;const fe=this._tickOffset.get(ue.time);fe&&fe.time>=ce.time&&(le=fe.seconds,he=fe.time),ce.state==="started"&&ue.state!=="started"&&(le+=ue.time-he),ce=ue}),this._state.remove(ae),le}setTicksAtTime(ee,ne){return ne=this.toSeconds(ne),this._tickOffset.cancel(ne),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(ee,ne),ticks:ee,time:ne}),this}getStateAtTime(ee){return ee=this.toSeconds(ee),this._state.getValueAtTime(ee)}getTimeOfTick(ee,ne=this.now()){const ae=this._tickOffset.get(ne),ce=this._state.get(ne),le=Math.max(ae.time,ce.time),ue=this.frequency.getTicksAtTime(le)+ee-ae.ticks;return this.frequency.getTimeOfTick(ue)}forEachTickBetween(ee,ne,ae){let ce=this._state.get(ee);this._state.forEachBetween(ee,ne,ue=>{ce&&ce.state==="started"&&ue.state!=="started"&&this.forEachTickBetween(Math.max(ce.time,ee),ue.time-this.sampleTime,ae),ce=ue});let le=null;if(ce&&ce.state==="started"){const ue=Math.max(ce.time,ee),he=this.frequency.getTicksAtTime(ue),fe=this.frequency.getTicksAtTime(ce.time),me=he-fe;let ge=Math.ceil(me)-me;ge=EQ(ge,1)?0:ge;let ve=this.frequency.getTimeOfTick(he+ge);for(;ve<ne;){try{ae(ve,Math.round(this.getTicksAtTime(ve)))}catch(ye){le=ye;break}ve+=this.frequency.getDurationOfTicks(1,ve)}}if(le)throw le;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class Clock extends ToneWithContext{constructor(){super(optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=noOp,this._lastUpdate=0,this._state=new StateTimeline("stopped"),this._boundLoop=this._loop.bind(this);const ee=optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"]);this.callback=ee.callback,this._tickSource=new TickSource({context:this.context,frequency:ee.frequency,units:ee.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(ee,ne){assertContextRunning(this.context);const ae=this.toSeconds(ee);return this.log("start",ae),this._state.getValueAtTime(ae)!=="started"&&(this._state.setStateAtTime("started",ae),this._tickSource.start(ae,ne),ae<this._lastUpdate&&this.emit("start",ae,ne)),this}stop(ee){const ne=this.toSeconds(ee);return this.log("stop",ne),this._state.cancel(ne),this._state.setStateAtTime("stopped",ne),this._tickSource.stop(ne),ne<this._lastUpdate&&this.emit("stop",ne),this}pause(ee){const ne=this.toSeconds(ee);return this._state.getValueAtTime(ne)==="started"&&(this._state.setStateAtTime("paused",ne),this._tickSource.pause(ne),ne<this._lastUpdate&&this.emit("pause",ne)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(ee){this._tickSource.ticks=ee}get seconds(){return this._tickSource.seconds}set seconds(ee){this._tickSource.seconds=ee}getSecondsAtTime(ee){return this._tickSource.getSecondsAtTime(ee)}setTicksAtTime(ee,ne){return this._tickSource.setTicksAtTime(ee,ne),this}getTimeOfTick(ee,ne=this.now()){return this._tickSource.getTimeOfTick(ee,ne)}getTicksAtTime(ee){return this._tickSource.getTicksAtTime(ee)}nextTickTime(ee,ne){const ae=this.toSeconds(ne),ce=this.getTicksAtTime(ae);return this._tickSource.getTimeOfTick(ce+ee,ae)}_loop(){const ee=this._lastUpdate,ne=this.now();this._lastUpdate=ne,this.log("loop",ee,ne),ee!==ne&&(this._state.forEachBetween(ee,ne,ae=>{switch(ae.state){case"started":const ce=this._tickSource.getTicksAtTime(ae.time);this.emit("start",ae.time,ce);break;case"stopped":ae.time!==0&&this.emit("stop",ae.time);break;case"paused":this.emit("pause",ae.time);break}}),this._tickSource.forEachTickBetween(ee,ne,(ae,ce)=>{this.callback(ae,ce)}))}getStateAtTime(ee){const ne=this.toSeconds(ee);return this._state.getValueAtTime(ne)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Emitter.mixin(Clock);class Delay extends ToneAudioNode{constructor(){super(optionsFromArguments(Delay.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const ee=optionsFromArguments(Delay.getDefaults(),arguments,["delayTime","maxDelay"]),ne=this.toSeconds(ee.maxDelay);this._maxDelay=Math.max(ne,this.toSeconds(ee.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(ne),this.delayTime=new Param({context:this.context,param:this._delayNode.delayTime,units:"time",value:ee.delayTime,minValue:0,maxValue:this.maxDelay}),readOnly(this,"delayTime")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}function Offline(re,ee,ne=2,ae=getContext().sampleRate){return __awaiter$1(this,void 0,void 0,function*(){const ce=getContext(),le=new OfflineContext(ne,ee,ae);setContext(le),yield re(le);const ue=le.render();setContext(ce);const he=yield ue;return new ToneAudioBuffer(he)})}class ToneAudioBuffers extends Tone$1{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const ee=optionsFromArguments(ToneAudioBuffers.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=ee.baseUrl,Object.keys(ee.urls).forEach(ne=>{this._loadingCount++;const ae=ee.urls[ne];this.add(ne,ae,this._bufferLoaded.bind(this,ee.onload),ee.onerror)})}static getDefaults(){return{baseUrl:"",onerror:noOp,onload:noOp,urls:{}}}has(ee){return this._buffers.has(ee.toString())}get(ee){return assert(this.has(ee),`ToneAudioBuffers has no buffer named: ${ee}`),this._buffers.get(ee.toString())}_bufferLoaded(ee){this._loadingCount--,this._loadingCount===0&&ee&&ee()}get loaded(){return Array.from(this._buffers).every(([ee,ne])=>ne.loaded)}add(ee,ne,ae=noOp,ce=noOp){return isString$1(ne)?this._buffers.set(ee.toString(),new ToneAudioBuffer(this.baseUrl+ne,ae,ce)):this._buffers.set(ee.toString(),new ToneAudioBuffer(ne,ae,ce)),this}dispose(){return super.dispose(),this._buffers.forEach(ee=>ee.dispose()),this._buffers.clear(),this}}class MidiClass extends FrequencyClass{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(ee){return ftom(super._frequencyToUnits(ee))}_ticksToUnits(ee){return ftom(super._ticksToUnits(ee))}_beatsToUnits(ee){return ftom(super._beatsToUnits(ee))}_secondsToUnits(ee){return ftom(super._secondsToUnits(ee))}toMidi(){return this.valueOf()}toFrequency(){return mtof(this.toMidi())}transpose(ee){return new MidiClass(this.context,this.toMidi()+ee)}}function Midi$1(re,ee){return new MidiClass(getContext(),re,ee)}class TicksClass extends TransportTimeClass{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(ee){return this._getPPQ()*ee}_secondsToUnits(ee){return Math.floor(ee/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(ee){return ee}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function Ticks(re,ee){return new TicksClass(getContext(),re,ee)}let Draw$1=class extends ToneWithContext{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Timeline,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(ee,ne){return this._events.add({callback:ee,time:this.toSeconds(ne)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(ee){return this._events.cancel(this.toSeconds(ee)),this}_drawLoop(){const ee=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=ee;){const ne=this._events.shift();ne&&ee-ne.time<=this.expiration&&ne.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}};onContextInit(re=>{re.draw=new Draw$1({context:re})});onContextClose(re=>{re.draw.dispose()});class IntervalTimeline extends Tone$1{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(ee){assert(isDefined(ee.time),"Events must have a time property"),assert(isDefined(ee.duration),"Events must have a duration parameter"),ee.time=ee.time.valueOf();let ne=new IntervalNode(ee.time,ee.time+ee.duration,ee);for(this._root===null?this._root=ne:this._root.insert(ne),this._length++;ne!==null;)ne.updateHeight(),ne.updateMax(),this._rebalance(ne),ne=ne.parent;return this}remove(ee){if(this._root!==null){const ne=[];this._root.search(ee.time,ne);for(const ae of ne)if(ae.event===ee){this._removeNode(ae),this._length--;break}}return this}get length(){return this._length}cancel(ee){return this.forEachFrom(ee,ne=>this.remove(ne)),this}_setRoot(ee){this._root=ee,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(ee,ne){ee.parent!==null?(ee.isLeftChild()?ee.parent.left=ne:ee.parent.right=ne,this._rebalance(ee.parent)):this._setRoot(ne)}_removeNode(ee){if(ee.left===null&&ee.right===null)this._replaceNodeInParent(ee,null);else if(ee.right===null)this._replaceNodeInParent(ee,ee.left);else if(ee.left===null)this._replaceNodeInParent(ee,ee.right);else{const ne=ee.getBalance();let ae,ce=null;if(ne>0)if(ee.left.right===null)ae=ee.left,ae.right=ee.right,ce=ae;else{for(ae=ee.left.right;ae.right!==null;)ae=ae.right;ae.parent&&(ae.parent.right=ae.left,ce=ae.parent,ae.left=ee.left,ae.right=ee.right)}else if(ee.right.left===null)ae=ee.right,ae.left=ee.left,ce=ae;else{for(ae=ee.right.left;ae.left!==null;)ae=ae.left;ae.parent&&(ae.parent.left=ae.right,ce=ae.parent,ae.left=ee.left,ae.right=ee.right)}ee.parent!==null?ee.isLeftChild()?ee.parent.left=ae:ee.parent.right=ae:this._setRoot(ae),ce&&this._rebalance(ce)}ee.dispose()}_rotateLeft(ee){const ne=ee.parent,ae=ee.isLeftChild(),ce=ee.right;ce&&(ee.right=ce.left,ce.left=ee),ne!==null?ae?ne.left=ce:ne.right=ce:this._setRoot(ce)}_rotateRight(ee){const ne=ee.parent,ae=ee.isLeftChild(),ce=ee.left;ce&&(ee.left=ce.right,ce.right=ee),ne!==null?ae?ne.left=ce:ne.right=ce:this._setRoot(ce)}_rebalance(ee){const ne=ee.getBalance();ne>1&&ee.left?ee.left.getBalance()<0?this._rotateLeft(ee.left):this._rotateRight(ee):ne<-1&&ee.right&&(ee.right.getBalance()>0?this._rotateRight(ee.right):this._rotateLeft(ee))}get(ee){if(this._root!==null){const ne=[];if(this._root.search(ee,ne),ne.length>0){let ae=ne[0];for(let ce=1;ce<ne.length;ce++)ne[ce].low>ae.low&&(ae=ne[ce]);return ae.event}}return null}forEach(ee){if(this._root!==null){const ne=[];this._root.traverse(ae=>ne.push(ae)),ne.forEach(ae=>{ae.event&&ee(ae.event)})}return this}forEachAtTime(ee,ne){if(this._root!==null){const ae=[];this._root.search(ee,ae),ae.forEach(ce=>{ce.event&&ne(ce.event)})}return this}forEachFrom(ee,ne){if(this._root!==null){const ae=[];this._root.searchAfter(ee,ae),ae.forEach(ce=>{ce.event&&ne(ce.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(ee=>ee.dispose()),this._root=null,this}}class IntervalNode{constructor(ee,ne,ae){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=ae,this.low=ee,this.high=ne,this.max=this.high}insert(ee){ee.low<=this.low?this.left===null?this.left=ee:this.left.insert(ee):this.right===null?this.right=ee:this.right.insert(ee)}search(ee,ne){ee>this.max||(this.left!==null&&this.left.search(ee,ne),this.low<=ee&&this.high>ee&&ne.push(this),!(this.low>ee)&&this.right!==null&&this.right.search(ee,ne))}searchAfter(ee,ne){this.low>=ee&&(ne.push(this),this.left!==null&&this.left.searchAfter(ee,ne)),this.right!==null&&this.right.searchAfter(ee,ne)}traverse(ee){ee(this),this.left!==null&&this.left.traverse(ee),this.right!==null&&this.right.traverse(ee)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let ee=0;return this.left!==null&&this.right!==null?ee=this.left.height-this.right.height:this.left!==null?ee=this.left.height+1:this.right!==null&&(ee=-(this.right.height+1)),ee}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(ee){this._left=ee,ee!==null&&(ee.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(ee){this._right=ee,ee!==null&&(ee.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}const Units=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class Volume extends ToneAudioNode{constructor(){super(optionsFromArguments(Volume.getDefaults(),arguments,["volume"])),this.name="Volume";const ee=optionsFromArguments(Volume.getDefaults(),arguments,["volume"]);this.input=this.output=new Gain({context:this.context,gain:ee.volume,units:"decibels"}),this.volume=this.output.gain,readOnly(this,"volume"),this._unmutedVolume=ee.volume,this.mute=ee.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(ee){!this.mute&&ee?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!ee&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}let Destination$1=class uc extends ToneAudioNode{constructor(){super(optionsFromArguments(uc.getDefaults(),arguments)),this.name="Destination",this.input=new Volume({context:this.context}),this.output=new Gain({context:this.context}),this.volume=this.input.volume;const ee=optionsFromArguments(uc.getDefaults(),arguments);connectSeries(this.input,this.output,this.context.rawContext.destination),this.mute=ee.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(ee){this.input.mute=ee}chain(...ee){return this.input.disconnect(),ee.unshift(this.input),ee.push(this.output),connectSeries(...ee),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};onContextInit(re=>{re.destination=new Destination$1({context:re})});onContextClose(re=>{re.destination.dispose()});class TimelineValue extends Tone$1{constructor(ee){super(),this.name="TimelineValue",this._timeline=new Timeline({memory:10}),this._initialValue=ee}set(ee,ne){return this._timeline.add({value:ee,time:ne}),this}get(ee){const ne=this._timeline.get(ee);return ne?ne.value:this._initialValue}}class TransportEvent{constructor(ee,ne){this.id=TransportEvent._eventId++;const ae=Object.assign(TransportEvent.getDefaults(),ne);this.transport=ee,this.callback=ae.callback,this._once=ae.once,this.time=ae.time}static getDefaults(){return{callback:noOp,once:!1,time:0}}invoke(ee){this.callback&&(this.callback(ee),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}TransportEvent._eventId=0;class TransportRepeatEvent extends TransportEvent{constructor(ee,ne){super(ee,ne),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const ae=Object.assign(TransportRepeatEvent.getDefaults(),ne);this.duration=new TicksClass(ee.context,ae.duration).valueOf(),this._interval=new TicksClass(ee.context,ae.interval).valueOf(),this._nextTick=ae.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},TransportEvent.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(ee){this._createEvents(ee),super.invoke(ee)}_createEvents(ee){const ne=this.transport.getTicksAtTime(ee);ne>=this.time&&ne>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()))}_restart(ee){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const ne=this.transport.getTicksAtTime(ee);ne>this.time&&(this._nextTick=this.time+Math.ceil((ne-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}let Transport$1=class dc extends ToneWithContext{constructor(){super(optionsFromArguments(dc.getDefaults(),arguments)),this.name="Transport",this._loop=new TimelineValue(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Timeline,this._repeatedEvents=new IntervalTimeline,this._syncedSignals=[],this._swingAmount=0;const ee=optionsFromArguments(dc.getDefaults(),arguments);this._ppq=ee.ppq,this._clock=new Clock({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=ee.ppq,this.bpm.setValueAtTime(ee.bpm,0),readOnly(this,"bpm"),this._timeSignature=ee.timeSignature,this._swingTicks=ee.ppq/2}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(ee,ne){if(this._loop.get(ee)&&ne>=this._loopEnd&&(this.emit("loopEnd",ee),this._clock.setTicksAtTime(this._loopStart,ee),ne=this._loopStart,this.emit("loopStart",ee,this._clock.getSecondsAtTime(ee)),this.emit("loop",ee)),this._swingAmount>0&&ne%this._ppq!==0&&ne%(this._swingTicks*2)!==0){const ae=ne%(this._swingTicks*2)/(this._swingTicks*2),ce=Math.sin(ae*Math.PI)*this._swingAmount;ee+=new TicksClass(this.context,this._swingTicks*2/3).toSeconds()*ce}this._timeline.forEachAtTime(ne,ae=>ae.invoke(ee))}schedule(ee,ne){const ae=new TransportEvent(this,{callback:ee,time:new TransportTimeClass(this.context,ne).toTicks()});return this._addEvent(ae,this._timeline)}scheduleRepeat(ee,ne,ae,ce=1/0){const le=new TransportRepeatEvent(this,{callback:ee,duration:new TimeClass(this.context,ce).toTicks(),interval:new TimeClass(this.context,ne).toTicks(),time:new TransportTimeClass(this.context,ae).toTicks()});return this._addEvent(le,this._repeatedEvents)}scheduleOnce(ee,ne){const ae=new TransportEvent(this,{callback:ee,once:!0,time:new TransportTimeClass(this.context,ne).toTicks()});return this._addEvent(ae,this._timeline)}clear(ee){if(this._scheduledEvents.hasOwnProperty(ee)){const ne=this._scheduledEvents[ee.toString()];ne.timeline.remove(ne.event),ne.event.dispose(),delete this._scheduledEvents[ee.toString()]}return this}_addEvent(ee,ne){return this._scheduledEvents[ee.id.toString()]={event:ee,timeline:ne},ne.add(ee),ee.id}cancel(ee=0){const ne=this.toTicks(ee);return this._timeline.forEachFrom(ne,ae=>this.clear(ae.id)),this._repeatedEvents.forEachFrom(ne,ae=>this.clear(ae.id)),this}_bindClockEvents(){this._clock.on("start",(ee,ne)=>{ne=new TicksClass(this.context,ne).toSeconds(),this.emit("start",ee,ne)}),this._clock.on("stop",ee=>{this.emit("stop",ee)}),this._clock.on("pause",ee=>{this.emit("pause",ee)})}get state(){return this._clock.getStateAtTime(this.now())}start(ee,ne){let ae;return isDefined(ne)&&(ae=this.toTicks(ne)),this._clock.start(ee,ae),this}stop(ee){return this._clock.stop(ee),this}pause(ee){return this._clock.pause(ee),this}toggle(ee){return ee=this.toSeconds(ee),this._clock.getStateAtTime(ee)!=="started"?this.start(ee):this.stop(ee),this}get timeSignature(){return this._timeSignature}set timeSignature(ee){isArray$8(ee)&&(ee=ee[0]/ee[1]*4),this._timeSignature=ee}get loopStart(){return new TimeClass(this.context,this._loopStart,"i").toSeconds()}set loopStart(ee){this._loopStart=this.toTicks(ee)}get loopEnd(){return new TimeClass(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(ee){this._loopEnd=this.toTicks(ee)}get loop(){return this._loop.get(this.now())}set loop(ee){this._loop.set(ee,this.now())}setLoopPoints(ee,ne){return this.loopStart=ee,this.loopEnd=ne,this}get swing(){return this._swingAmount}set swing(ee){this._swingAmount=ee}get swingSubdivision(){return new TicksClass(this.context,this._swingTicks).toNotation()}set swingSubdivision(ee){this._swingTicks=this.toTicks(ee)}get position(){const ee=this.now(),ne=this._clock.getTicksAtTime(ee);return new TicksClass(this.context,ne).toBarsBeatsSixteenths()}set position(ee){const ne=this.toTicks(ee);this.ticks=ne}get seconds(){return this._clock.seconds}set seconds(ee){const ne=this.now(),ae=this._clock.frequency.timeToTicks(ee,ne);this.ticks=ae}get progress(){if(this.loop){const ee=this.now();return(this._clock.getTicksAtTime(ee)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(ee){if(this._clock.ticks!==ee){const ne=this.now();if(this.state==="started"){const ae=this._clock.getTicksAtTime(ne),ce=this._clock.frequency.getDurationOfTicks(Math.ceil(ae)-ae,ne),le=ne+ce;this.emit("stop",le),this._clock.setTicksAtTime(ee,le),this.emit("start",le,this._clock.getSecondsAtTime(le))}else this._clock.setTicksAtTime(ee,ne)}}getTicksAtTime(ee){return Math.round(this._clock.getTicksAtTime(ee))}getSecondsAtTime(ee){return this._clock.getSecondsAtTime(ee)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(ee){this._clock.frequency.multiplier=ee}nextSubdivision(ee){if(ee=this.toTicks(ee),this.state!=="started")return 0;{const ne=this.now(),ae=this.getTicksAtTime(ne),ce=ee-ae%ee;return this._clock.nextTickTime(ce,ne)}}syncSignal(ee,ne){if(!ne){const ce=this.now();if(ee.getValueAtTime(ce)!==0){const ue=1/(60/this.bpm.getValueAtTime(ce)/this.PPQ);ne=ee.getValueAtTime(ce)/ue}else ne=0}const ae=new Gain(ne);return this.bpm.connect(ae),ae.connect(ee._param),this._syncedSignals.push({initial:ee.value,ratio:ae,signal:ee}),ee.value=0,this}unsyncSignal(ee){for(let ne=this._syncedSignals.length-1;ne>=0;ne--){const ae=this._syncedSignals[ne];ae.signal===ee&&(ae.ratio.dispose(),ae.signal.value=ae.initial,this._syncedSignals.splice(ne,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),writable(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}};Emitter.mixin(Transport$1);onContextInit(re=>{re.transport=new Transport$1({context:re})});onContextClose(re=>{re.transport.dispose()});class Source extends ToneAudioNode{constructor(ee){super(ee),this.input=void 0,this._state=new StateTimeline("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=noOp,this._syncedStop=noOp,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Volume({context:this.context,mute:ee.mute,volume:ee.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this.onstop=ee.onstop}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,onstop:noOp,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(ee){this._volume.mute=ee}_clampToCurrentTime(ee){return this._synced?ee:Math.max(ee,this.context.currentTime)}start(ee,ne,ae){let ce=isUndef(ee)&&this._synced?this.context.transport.seconds:this.toSeconds(ee);if(ce=this._clampToCurrentTime(ce),!this._synced&&this._state.getValueAtTime(ce)==="started")assert(GT(ce,this._state.get(ce).time),"Start time must be strictly greater than previous start time"),this._state.cancel(ce),this._state.setStateAtTime("started",ce),this.log("restart",ce),this.restart(ce,ne,ae);else if(this.log("start",ce),this._state.setStateAtTime("started",ce),this._synced){const le=this._state.get(ce);le&&(le.offset=this.toSeconds(defaultArg(ne,0)),le.duration=ae?this.toSeconds(ae):void 0);const ue=this.context.transport.schedule(he=>{this._start(he,ne,ae)},ce);this._scheduled.push(ue),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>ce&&this._syncedStart(this.now(),this.context.transport.seconds)}else assertContextRunning(this.context),this._start(ce,ne,ae);return this}stop(ee){let ne=isUndef(ee)&&this._synced?this.context.transport.seconds:this.toSeconds(ee);if(ne=this._clampToCurrentTime(ne),this._state.getValueAtTime(ne)==="started"||isDefined(this._state.getNextState("started",ne))){if(this.log("stop",ne),!this._synced)this._stop(ne);else{const ae=this.context.transport.schedule(this._stop.bind(this),ne);this._scheduled.push(ae)}this._state.cancel(ne),this._state.setStateAtTime("stopped",ne)}return this}restart(ee,ne,ae){return ee=this.toSeconds(ee),this._state.getValueAtTime(ee)==="started"&&(this._state.cancel(ee),this._restart(ee,ne,ae)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(ee,ne)=>{if(ne>0){const ae=this._state.get(ne);if(ae&&ae.state==="started"&&ae.time!==ne){const ce=ne-this.toSeconds(ae.time);let le;ae.duration&&(le=this.toSeconds(ae.duration)-ce),this._start(ee,this.toSeconds(ae.offset)+ce,le)}}},this._syncedStop=ee=>{const ne=this.context.transport.getSecondsAtTime(Math.max(ee-this.sampleTime,0));this._state.getValueAtTime(ne)==="started"&&this._stop(ee)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(ee=>this.context.transport.clear(ee)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=noOp,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ToneBufferSource extends OneShotSource{constructor(){super(optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const ee=optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"]);connect(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Param({context:this.context,param:this._source.playbackRate,units:"positive",value:ee.playbackRate}),this.loop=ee.loop,this.loopStart=ee.loopStart,this.loopEnd=ee.loopEnd,this._buffer=new ToneAudioBuffer(ee.url,ee.onload,ee.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{url:new ToneAudioBuffer,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(ee){this._fadeIn=ee}get fadeOut(){return this._fadeOut}set fadeOut(ee){this._fadeOut=ee}get curve(){return this._curve}set curve(ee){this._curve=ee}start(ee,ne,ae,ce=1){assert(this.buffer.loaded,"buffer is either not set or not loaded");const le=this.toSeconds(ee);this._startGain(le,ce),this.loop?ne=defaultArg(ne,this.loopStart):ne=defaultArg(ne,0);let ue=Math.max(this.toSeconds(ne),0);if(this.loop){const he=this.toSeconds(this.loopEnd)||this.buffer.duration,fe=this.toSeconds(this.loopStart),me=he-fe;GTE(ue,he)&&(ue=(ue-fe)%me+fe),EQ(ue,this.buffer.duration)&&(ue=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,LT(ue,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(le,ue)),isDefined(ae)){let he=this.toSeconds(ae);he=Math.max(he,0),this.stop(le+he)}return this}_stopSource(ee){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(ee)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(ee){this._source.loopStart=this.toSeconds(ee)}get loopEnd(){return this._source.loopEnd}set loopEnd(ee){this._source.loopEnd=this.toSeconds(ee)}get buffer(){return this._buffer}set buffer(ee){this._buffer.set(ee)}get loop(){return this._source.loop}set loop(ee){this._source.loop=ee,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Noise extends Source{constructor(){super(optionsFromArguments(Noise.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const ee=optionsFromArguments(Noise.getDefaults(),arguments,["type"]);this._playbackRate=ee.playbackRate,this.type=ee.type,this._fadeIn=ee.fadeIn,this._fadeOut=ee.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(ee){if(assert(ee in _noiseBuffers,"Noise: invalid type: "+ee),this._type!==ee&&(this._type=ee,this.state==="started")){const ne=this.now();this._stop(ne),this._start(ne)}}get playbackRate(){return this._playbackRate}set playbackRate(ee){this._playbackRate=ee,this._source&&(this._source.playbackRate.value=ee)}_start(ee){const ne=_noiseBuffers[this._type];this._source=new ToneBufferSource({url:ne,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(ee),Math.random()*(ne.duration-.001))}_stop(ee){this._source&&(this._source.stop(this.toSeconds(ee)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(ee){this._fadeIn=ee,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(ee){this._fadeOut=ee,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(ee){this._stop(ee),this._start(ee)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const BUFFER_LENGTH=44100*5,NUM_CHANNELS=2,_noiseCache={brown:null,pink:null,white:null},_noiseBuffers={get brown(){if(!_noiseCache.brown){const re=[];for(let ee=0;ee<NUM_CHANNELS;ee++){const ne=new Float32Array(BUFFER_LENGTH);re[ee]=ne;let ae=0;for(let ce=0;ce<BUFFER_LENGTH;ce++){const le=Math.random()*2-1;ne[ce]=(ae+.02*le)/1.02,ae=ne[ce],ne[ce]*=3.5}}_noiseCache.brown=new ToneAudioBuffer().fromArray(re)}return _noiseCache.brown},get pink(){if(!_noiseCache.pink){const re=[];for(let ee=0;ee<NUM_CHANNELS;ee++){const ne=new Float32Array(BUFFER_LENGTH);re[ee]=ne;let ae,ce,le,ue,he,fe,me;ae=ce=le=ue=he=fe=me=0;for(let ge=0;ge<BUFFER_LENGTH;ge++){const ve=Math.random()*2-1;ae=.99886*ae+ve*.0555179,ce=.99332*ce+ve*.0750759,le=.969*le+ve*.153852,ue=.8665*ue+ve*.3104856,he=.55*he+ve*.5329522,fe=-.7616*fe-ve*.016898,ne[ge]=ae+ce+le+ue+he+fe+me+ve*.5362,ne[ge]*=.11,me=ve*.115926}}_noiseCache.pink=new ToneAudioBuffer().fromArray(re)}return _noiseCache.pink},get white(){if(!_noiseCache.white){const re=[];for(let ee=0;ee<NUM_CHANNELS;ee++){const ne=new Float32Array(BUFFER_LENGTH);re[ee]=ne;for(let ae=0;ae<BUFFER_LENGTH;ae++)ne[ae]=Math.random()*2-1}_noiseCache.white=new ToneAudioBuffer().fromArray(re)}return _noiseCache.white}};class UserMedia extends ToneAudioNode{constructor(){super(optionsFromArguments(UserMedia.getDefaults(),arguments,["volume"])),this.name="UserMedia";const ee=optionsFromArguments(UserMedia.getDefaults(),arguments,["volume"]);this._volume=this.output=new Volume({context:this.context,volume:ee.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this.mute=ee.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}open(ee){return __awaiter$1(this,void 0,void 0,function*(){assert(UserMedia.supported,"UserMedia is not supported"),this.state==="started"&&this.close();const ne=yield UserMedia.enumerateDevices();isNumber$2(ee)?this._device=ne[ee]:(this._device=ne.find(le=>le.label===ee||le.deviceId===ee),!this._device&&ne.length>0&&(this._device=ne[0]),assert(isDefined(this._device),`No matching device ${ee}`));const ae={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(ae.audio.deviceId=this._device.deviceId);const ce=yield navigator.mediaDevices.getUserMedia(ae);if(!this._stream){this._stream=ce;const le=this.context.createMediaStreamSource(ce);connect(le,this.output),this._mediaStream=le}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(ee=>{ee.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return __awaiter$1(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(ne=>ne.kind==="audioinput")})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){if(this._device)return this._device.deviceId}get groupId(){if(this._device)return this._device.groupId}get label(){if(this._device)return this._device.label}get mute(){return this._volume.mute}set mute(ee){this._volume.mute=ee}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return isDefined(navigator.mediaDevices)&&isDefined(navigator.mediaDevices.getUserMedia)}}function generateWaveform(re,ee){return __awaiter$1(this,void 0,void 0,function*(){const ne=ee/re.context.sampleRate,ae=new OfflineContext(1,ne,re.context.sampleRate);return new re.constructor(Object.assign(re.get(),{frequency:2/ne,detune:0,context:ae})).toDestination().start(0),(yield ae.render()).getChannelData(0)})}class ToneOscillatorNode extends OneShotSource{constructor(){super(optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const ee=optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"]);connect(this._oscillator,this._gainNode),this.type=ee.type,this.frequency=new Param({context:this.context,param:this._oscillator.frequency,units:"frequency",value:ee.frequency}),this.detune=new Param({context:this.context,param:this._oscillator.detune,units:"cents",value:ee.detune}),readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(ee){const ne=this.toSeconds(ee);return this.log("start",ne),this._startGain(ne),this._oscillator.start(ne),this}_stopSource(ee){this._oscillator.stop(ee)}setPeriodicWave(ee){return this._oscillator.setPeriodicWave(ee),this}get type(){return this._oscillator.type}set type(ee){this._oscillator.type=ee}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Oscillator extends Source{constructor(){super(optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const ee=optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"]);this.frequency=new Signal({context:this.context,units:"frequency",value:ee.frequency}),readOnly(this,"frequency"),this.detune=new Signal({context:this.context,units:"cents",value:ee.detune}),readOnly(this,"detune"),this._partials=ee.partials,this._partialCount=ee.partialCount,this._type=ee.type,ee.partialCount&&ee.type!=="custom"&&(this._type=this.baseType+ee.partialCount.toString()),this.phase=ee.phase}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(ee){const ne=this.toSeconds(ee),ae=new ToneOscillatorNode({context:this.context,onended:()=>this.onstop(this)});this._oscillator=ae,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(ne)}_stop(ee){const ne=this.toSeconds(ee);this._oscillator&&this._oscillator.stop(ne)}_restart(ee){const ne=this.toSeconds(ee);return this.log("restart",ne),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(ne),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Oscillator._periodicWaveCache.find(ne=>ne.phase===this._phase&&deepEquals(ne.partials,this._partials));{const ee=Oscillator._periodicWaveCache.find(ne=>ne.type===this._type&&ne.phase===this._phase);return this._partialCount=ee?ee.partialCount:this._partialCount,ee}}get type(){return this._type}set type(ee){this._type=ee;const ne=["sine","square","sawtooth","triangle"].indexOf(ee)!==-1;if(this._phase===0&&ne)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=ee);else{const ae=this._getCachedPeriodicWave();if(isDefined(ae)){const{partials:ce,wave:le}=ae;this._wave=le,this._partials=ce,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[ce,le]=this._getRealImaginary(ee,this._phase),ue=this.context.createPeriodicWave(ce,le);this._wave=ue,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Oscillator._periodicWaveCache.push({imag:le,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:ce,type:this._type,wave:this._wave}),Oscillator._periodicWaveCache.length>100&&Oscillator._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(ee){this.partialCount&&this._type!=="custom"&&ee!=="custom"?this.type=ee+this.partialCount:this.type=ee}get partialCount(){return this._partialCount}set partialCount(ee){assertRange(ee,0);let ne=this._type;const ae=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(ae&&(ne=ae[1]),this._type!=="custom")ee===0?this.type=ne:this.type=ne+ee.toString();else{const ce=new Float32Array(ee);this._partials.forEach((le,ue)=>ce[ue]=le),this._partials=Array.from(ce),this.type=this._type}}_getRealImaginary(ee,ne){let ce=2048;const le=new Float32Array(ce),ue=new Float32Array(ce);let he=1;if(ee==="custom"){if(he=this._partials.length+1,this._partialCount=this._partials.length,ce=he,this._partials.length===0)return[le,ue]}else{const fe=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(ee);fe?(he=parseInt(fe[2],10)+1,this._partialCount=parseInt(fe[2],10),ee=fe[1],he=Math.max(he,2),ce=he):this._partialCount=0,this._partials=[]}for(let fe=1;fe<ce;++fe){const me=2/(fe*Math.PI);let ge;switch(ee){case"sine":ge=fe<=he?1:0,this._partials[fe-1]=ge;break;case"square":ge=fe&1?2*me:0,this._partials[fe-1]=ge;break;case"sawtooth":ge=me*(fe&1?1:-1),this._partials[fe-1]=ge;break;case"triangle":fe&1?ge=2*(me*me)*(fe-1>>1&1?-1:1):ge=0,this._partials[fe-1]=ge;break;case"custom":ge=this._partials[fe-1];break;default:throw new TypeError("Oscillator: invalid type: "+ee)}ge!==0?(le[fe]=-ge*Math.sin(ne*fe),ue[fe]=ge*Math.cos(ne*fe)):(le[fe]=0,ue[fe]=0)}return[le,ue]}_inverseFFT(ee,ne,ae){let ce=0;const le=ee.length;for(let ue=0;ue<le;ue++)ce+=ee[ue]*Math.cos(ue*ae)+ne[ue]*Math.sin(ue*ae);return ce}getInitialValue(){const[ee,ne]=this._getRealImaginary(this._type,0);let ae=0;const ce=Math.PI*2,le=32;for(let ue=0;ue<le;ue++)ae=Math.max(this._inverseFFT(ee,ne,ue/le*ce),ae);return clamp(-this._inverseFFT(ee,ne,this._phase)/ae,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(ee){this._partials=ee,this._partialCount=this._partials.length,ee.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(ee){this._phase=ee*Math.PI/180,this.type=this._type}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,ee)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Oscillator._periodicWaveCache=[];class SignalOperator extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(SignalOperator.getDefaults(),arguments,["context"])))}connect(ee,ne=0,ae=0){return connectSignal(this,ee,ne,ae),this}}class WaveShaper extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const ee=optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]);isArray$8(ee.mapping)||ee.mapping instanceof Float32Array?this.curve=Float32Array.from(ee.mapping):isFunction$2(ee.mapping)&&this.setMap(ee.mapping,ee.length)}static getDefaults(){return Object.assign(Signal.getDefaults(),{length:1024})}setMap(ee,ne=1024){const ae=new Float32Array(ne);for(let ce=0,le=ne;ce<le;ce++){const ue=ce/(le-1)*2-1;ae[ce]=ee(ue,ce)}return this.curve=ae,this}get curve(){return this._shaper.curve}set curve(ee){this._shaper.curve=ee}get oversample(){return this._shaper.oversample}set oversample(ee){const ne=["none","2x","4x"].some(ae=>ae.includes(ee));assert(ne,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=ee}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class AudioToGain extends SignalOperator{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new WaveShaper({context:this.context,mapping:ee=>(ee+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Multiply extends Signal{constructor(){super(Object.assign(optionsFromArguments(Multiply.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const ee=optionsFromArguments(Multiply.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Gain({context:this.context,minValue:ee.minValue,maxValue:ee.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(ee.value,0)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class AMOscillator extends Source{constructor(){super(optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new AudioToGain({context:this.context}),this._modulationNode=new Gain({context:this.context});const ee=optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Oscillator({context:this.context,detune:ee.detune,frequency:ee.frequency,onstop:()=>this.onstop(this),phase:ee.phase,type:ee.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Oscillator({context:this.context,phase:ee.phase,type:ee.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:ee.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),readOnly(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(ee){this._modulator.start(ee),this._carrier.start(ee)}_stop(ee){this._modulator.stop(ee),this._carrier.stop(ee)}_restart(ee){this._modulator.restart(ee),this._carrier.restart(ee)}get type(){return this._carrier.type}set type(ee){this._carrier.type=ee}get baseType(){return this._carrier.baseType}set baseType(ee){this._carrier.baseType=ee}get partialCount(){return this._carrier.partialCount}set partialCount(ee){this._carrier.partialCount=ee}get modulationType(){return this._modulator.type}set modulationType(ee){this._modulator.type=ee}get phase(){return this._carrier.phase}set phase(ee){this._carrier.phase=ee,this._modulator.phase=ee}get partials(){return this._carrier.partials}set partials(ee){this._carrier.partials=ee}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,ee)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class FMOscillator extends Source{constructor(){super(optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Gain({context:this.context,gain:0});const ee=optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Oscillator({context:this.context,detune:ee.detune,frequency:0,onstop:()=>this.onstop(this),phase:ee.phase,type:ee.type}),this.detune=this._carrier.detune,this.frequency=new Signal({context:this.context,units:"frequency",value:ee.frequency}),this._modulator=new Oscillator({context:this.context,phase:ee.phase,type:ee.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:ee.harmonicity}),this.modulationIndex=new Multiply({context:this.context,units:"positive",value:ee.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),readOnly(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(ee){this._modulator.start(ee),this._carrier.start(ee)}_stop(ee){this._modulator.stop(ee),this._carrier.stop(ee)}_restart(ee){return this._modulator.restart(ee),this._carrier.restart(ee),this}get type(){return this._carrier.type}set type(ee){this._carrier.type=ee}get baseType(){return this._carrier.baseType}set baseType(ee){this._carrier.baseType=ee}get partialCount(){return this._carrier.partialCount}set partialCount(ee){this._carrier.partialCount=ee}get modulationType(){return this._modulator.type}set modulationType(ee){this._modulator.type=ee}get phase(){return this._carrier.phase}set phase(ee){this._carrier.phase=ee,this._modulator.phase=ee}get partials(){return this._carrier.partials}set partials(ee){this._carrier.partials=ee}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,ee)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class PulseOscillator extends Source{constructor(){super(optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Gain({context:this.context,gain:0}),this._thresh=new WaveShaper({context:this.context,mapping:ne=>ne<=0?-1:1});const ee=optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"]);this.width=new Signal({context:this.context,units:"audioRange",value:ee.width}),this._triangle=new Oscillator({context:this.context,detune:ee.detune,frequency:ee.frequency,onstop:()=>this.onstop(this),phase:ee.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),readOnly(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(ee){ee=this.toSeconds(ee),this._triangle.start(ee),this._widthGate.gain.setValueAtTime(1,ee)}_stop(ee){ee=this.toSeconds(ee),this._triangle.stop(ee),this._widthGate.gain.cancelScheduledValues(ee),this._widthGate.gain.setValueAtTime(0,ee)}_restart(ee){this._triangle.restart(ee),this._widthGate.gain.cancelScheduledValues(ee),this._widthGate.gain.setValueAtTime(1,ee)}get phase(){return this._triangle.phase}set phase(ee){this._triangle.phase=ee}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(ee){this._triangle.type=ee}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,ee)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class FatOscillator extends Source{constructor(){super(optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const ee=optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Signal({context:this.context,units:"frequency",value:ee.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:ee.detune}),this._spread=ee.spread,this._type=ee.type,this._phase=ee.phase,this._partials=ee.partials,this._partialCount=ee.partialCount,this.count=ee.count,readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(ee){ee=this.toSeconds(ee),this._forEach(ne=>ne.start(ee))}_stop(ee){ee=this.toSeconds(ee),this._forEach(ne=>ne.stop(ee))}_restart(ee){this._forEach(ne=>ne.restart(ee))}_forEach(ee){for(let ne=0;ne<this._oscillators.length;ne++)ee(this._oscillators[ne],ne)}get type(){return this._type}set type(ee){this._type=ee,this._forEach(ne=>ne.type=ee)}get spread(){return this._spread}set spread(ee){if(this._spread=ee,this._oscillators.length>1){const ne=-ee/2,ae=ee/(this._oscillators.length-1);this._forEach((ce,le)=>ce.detune.value=ne+ae*le)}}get count(){return this._oscillators.length}set count(ee){if(assertRange(ee,1),this._oscillators.length!==ee){this._forEach(ne=>ne.dispose()),this._oscillators=[];for(let ne=0;ne<ee;ne++){const ae=new Oscillator({context:this.context,volume:-6-ee*1.1,type:this._type,phase:this._phase+ne/ee*360,partialCount:this._partialCount,onstop:ne===0?()=>this.onstop(this):noOp});this.type==="custom"&&(ae.partials=this._partials),this.frequency.connect(ae.frequency),this.detune.connect(ae.detune),ae.detune.overridden=!1,ae.connect(this.output),this._oscillators[ne]=ae}this.spread=this._spread,this.state==="started"&&this._forEach(ne=>ne.start())}}get phase(){return this._phase}set phase(ee){this._phase=ee,this._forEach((ne,ae)=>ne.phase=this._phase+ae/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(ee){this._forEach(ne=>ne.baseType=ee),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(ee){this._partials=ee,this._partialCount=this._partials.length,ee.length&&(this._type="custom",this._forEach(ne=>ne.partials=ee))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(ee){this._partialCount=ee,this._forEach(ne=>ne.partialCount=ee),this._type=this._oscillators[0].type}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,ee)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(ee=>ee.dispose()),this}}class PWMOscillator extends Source{constructor(){super(optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Multiply({context:this.context,value:2});const ee=optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new PulseOscillator({context:this.context,frequency:ee.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Oscillator({context:this.context,detune:ee.detune,frequency:ee.frequency,onstop:()=>this.onstop(this),phase:ee.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),readOnly(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(ee){ee=this.toSeconds(ee),this._modulator.start(ee),this._pulse.start(ee)}_stop(ee){ee=this.toSeconds(ee),this._modulator.stop(ee),this._pulse.stop(ee)}_restart(ee){this._modulator.restart(ee),this._pulse.restart(ee)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(ee){this._modulator.phase=ee}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,ee)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const OmniOscillatorSourceMap={am:AMOscillator,fat:FatOscillator,fm:FMOscillator,oscillator:Oscillator,pulse:PulseOscillator,pwm:PWMOscillator};class OmniOscillator extends Source{constructor(){super(optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const ee=optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"]);this.frequency=new Signal({context:this.context,units:"frequency",value:ee.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:ee.detune}),readOnly(this,["frequency","detune"]),this.set(ee)}static getDefaults(){return Object.assign(Oscillator.getDefaults(),FMOscillator.getDefaults(),AMOscillator.getDefaults(),FatOscillator.getDefaults(),PulseOscillator.getDefaults(),PWMOscillator.getDefaults())}_start(ee){this._oscillator.start(ee)}_stop(ee){this._oscillator.stop(ee)}_restart(ee){return this._oscillator.restart(ee),this}get type(){let ee="";return["am","fm","fat"].some(ne=>this._sourceType===ne)&&(ee=this._sourceType),ee+this._oscillator.type}set type(ee){ee.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=ee.substr(2)):ee.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=ee.substr(2)):ee.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=ee.substr(3)):ee==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):ee==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=ee)}get partials(){return this._oscillator.partials}set partials(ee){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=ee)}get partialCount(){return this._oscillator.partialCount}set partialCount(ee){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=ee)}set(ee){return Reflect.has(ee,"type")&&ee.type&&(this.type=ee.type),super.set(ee),this}_createNewOscillator(ee){if(ee!==this._sourceType){this._sourceType=ee;const ne=OmniOscillatorSourceMap[ee],ae=this.now();if(this._oscillator){const ce=this._oscillator;ce.stop(ae),this.context.setTimeout(()=>ce.dispose(),this.blockTime)}this._oscillator=new ne({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(ae)}}get phase(){return this._oscillator.phase}set phase(ee){this._oscillator.phase=ee}get sourceType(){return this._sourceType}set sourceType(ee){let ne="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(ne=this._oscillator.type),ee==="fm"?this.type="fm"+ne:ee==="am"?this.type="am"+ne:ee==="fat"?this.type="fat"+ne:ee==="oscillator"?this.type=ne:ee==="pulse"?this.type="pulse":ee==="pwm"&&(this.type="pwm")}_getOscType(ee,ne){return ee instanceof OmniOscillatorSourceMap[ne]}get baseType(){return this._oscillator.baseType}set baseType(ee){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&ee!=="pulse"&&ee!=="pwm"&&(this._oscillator.baseType=ee)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(ee){this._getOscType(this._oscillator,"fat")&&isNumber$2(ee)&&(this._oscillator.count=ee)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(ee){this._getOscType(this._oscillator,"fat")&&isNumber$2(ee)&&(this._oscillator.spread=ee)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(ee){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&isString$1(ee)&&(this._oscillator.modulationType=ee)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,ee)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Add extends Signal{constructor(){super(Object.assign(optionsFromArguments(Add.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new Gain({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,connectSeries(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Scale extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(Scale.getDefaults(),arguments,["min","max"]))),this.name="Scale";const ee=optionsFromArguments(Scale.getDefaults(),arguments,["min","max"]);this._mult=this.input=new Multiply({context:this.context,value:ee.max-ee.min}),this._add=this.output=new Add({context:this.context,value:ee.min}),this._min=ee.min,this._max=ee.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(ee){this._min=ee,this._setRange()}get max(){return this._max}set max(ee){this._max=ee,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Zero extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(Zero.getDefaults(),arguments))),this.name="Zero",this._gain=new Gain({context:this.context}),this.output=this._gain,this.input=void 0,connect(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),disconnect(this.context.getConstant(0),this._gain),this}}class LFO extends ToneAudioNode{constructor(){super(optionsFromArguments(LFO.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Param.prototype._fromType,this._toType=Param.prototype._toType,this._is=Param.prototype._is,this._clampValue=Param.prototype._clampValue;const ee=optionsFromArguments(LFO.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new Oscillator(ee),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Gain({context:this.context,gain:ee.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Signal({context:this.context,units:"audioRange",value:0}),this._zeros=new Zero({context:this.context}),this._a2g=new AudioToGain({context:this.context}),this._scaler=this.output=new Scale({context:this.context,max:ee.max,min:ee.min}),this.units=ee.units,this.min=ee.min,this.max=ee.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),readOnly(this,["amplitude","frequency"]),this.phase=ee.phase}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(ee){return ee=this.toSeconds(ee),this._stoppedSignal.setValueAtTime(0,ee),this._oscillator.start(ee),this}stop(ee){return ee=this.toSeconds(ee),this._stoppedSignal.setValueAtTime(this._stoppedValue,ee),this._oscillator.stop(ee),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(ee){ee=this._fromType(ee),this._scaler.min=ee}get max(){return this._toType(this._scaler.max)}set max(ee){ee=this._fromType(ee),this._scaler.max=ee}get type(){return this._oscillator.type}set type(ee){this._oscillator.type=ee,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(ee){this._oscillator.partials=ee,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(ee){this._oscillator.phase=ee,this._setStoppedValue()}get units(){return this._units}set units(ee){const ne=this.min,ae=this.max;this._units=ee,this.min=ne,this.max=ae}get state(){return this._oscillator.state}connect(ee,ne,ae){return(ee instanceof Param||ee instanceof Signal)&&(this.convert=ee.convert,this.units=ee.units),connectSignal(this,ee,ne,ae),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function range(re,ee=1/0){const ne=new WeakMap;return function(ae,ce){Reflect.defineProperty(ae,ce,{configurable:!0,enumerable:!0,get:function(){return ne.get(this)},set:function(le){assertRange(le,re,ee),ne.set(this,le)}})}}function timeRange(re,ee=1/0){const ne=new WeakMap;return function(ae,ce){Reflect.defineProperty(ae,ce,{configurable:!0,enumerable:!0,get:function(){return ne.get(this)},set:function(le){assertRange(this.toSeconds(le),re,ee),ne.set(this,le)}})}}let Player$1=class hc extends Source{constructor(){super(optionsFromArguments(hc.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const ee=optionsFromArguments(hc.getDefaults(),arguments,["url","onload"]);this._buffer=new ToneAudioBuffer({onload:this._onload.bind(this,ee.onload),onerror:ee.onerror,reverse:ee.reverse,url:ee.url}),this.autostart=ee.autostart,this._loop=ee.loop,this._loopStart=ee.loopStart,this._loopEnd=ee.loopEnd,this._playbackRate=ee.playbackRate,this.fadeIn=ee.fadeIn,this.fadeOut=ee.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1,reverse:!1})}load(ee){return __awaiter$1(this,void 0,void 0,function*(){return yield this._buffer.load(ee),this._onload(),this})}_onload(ee=noOp){ee(),this.autostart&&this.start()}_onSourceEnd(ee){this.onstop(this),this._activeSources.delete(ee),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(ee,ne,ae){return super.start(ee,ne,ae),this}_start(ee,ne,ae){this._loop?ne=defaultArg(ne,this._loopStart):ne=defaultArg(ne,0);const ce=this.toSeconds(ne),le=ae;ae=defaultArg(ae,Math.max(this._buffer.duration-ce,0));let ue=this.toSeconds(ae);ue=ue/this._playbackRate,ee=this.toSeconds(ee);const he=new ToneBufferSource({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(ee+ue),this._state.setStateAtTime("stopped",ee+ue,{implicitEnd:!0})),this._activeSources.add(he),this._loop&&isUndef(le)?he.start(ee,ce):he.start(ee,ce,ue-this.toSeconds(this.fadeOut))}_stop(ee){const ne=this.toSeconds(ee);this._activeSources.forEach(ae=>ae.stop(ne))}restart(ee,ne,ae){return super.restart(ee,ne,ae),this}_restart(ee,ne,ae){this._stop(ee),this._start(ee,ne,ae)}seek(ee,ne){const ae=this.toSeconds(ne);if(this._state.getValueAtTime(ae)==="started"){const ce=this.toSeconds(ee);this._stop(ae),this._start(ae,ce)}return this}setLoopPoints(ee,ne){return this.loopStart=ee,this.loopEnd=ne,this}get loopStart(){return this._loopStart}set loopStart(ee){this._loopStart=ee,this.buffer.loaded&&assertRange(this.toSeconds(ee),0,this.buffer.duration),this._activeSources.forEach(ne=>{ne.loopStart=ee})}get loopEnd(){return this._loopEnd}set loopEnd(ee){this._loopEnd=ee,this.buffer.loaded&&assertRange(this.toSeconds(ee),0,this.buffer.duration),this._activeSources.forEach(ne=>{ne.loopEnd=ee})}get buffer(){return this._buffer}set buffer(ee){this._buffer.set(ee)}get loop(){return this._loop}set loop(ee){if(this._loop!==ee&&(this._loop=ee,this._activeSources.forEach(ne=>{ne.loop=ee}),ee)){const ne=this._state.getNextState("stopped",this.now());ne&&this._state.cancel(ne.time)}}get playbackRate(){return this._playbackRate}set playbackRate(ee){this._playbackRate=ee;const ne=this.now(),ae=this._state.getNextState("stopped",ne);ae&&ae.implicitEnd&&(this._state.cancel(ae.time),this._activeSources.forEach(ce=>ce.cancelStop())),this._activeSources.forEach(ce=>{ce.playbackRate.setValueAtTime(ee,ne)})}get reverse(){return this._buffer.reverse}set reverse(ee){this._buffer.reverse=ee}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(ee=>ee.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}};__decorate$8([timeRange(0)],Player$1.prototype,"fadeIn",void 0);__decorate$8([timeRange(0)],Player$1.prototype,"fadeOut",void 0);class Players extends ToneAudioNode{constructor(){super(optionsFromArguments(Players.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;const ee=optionsFromArguments(Players.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new Volume({context:this.context,volume:ee.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this._buffers=new ToneAudioBuffers({urls:ee.urls,onload:ee.onload,baseUrl:ee.baseUrl,onerror:ee.onerror}),this.mute=ee.mute,this._fadeIn=ee.fadeIn,this._fadeOut=ee.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:noOp,onerror:noOp,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(ee){this._volume.mute=ee}get fadeIn(){return this._fadeIn}set fadeIn(ee){this._fadeIn=ee,this._players.forEach(ne=>{ne.fadeIn=ee})}get fadeOut(){return this._fadeOut}set fadeOut(ee){this._fadeOut=ee,this._players.forEach(ne=>{ne.fadeOut=ee})}get state(){return Array.from(this._players).some(([ne,ae])=>ae.state==="started")?"started":"stopped"}has(ee){return this._buffers.has(ee)}player(ee){if(assert(this.has(ee),`No Player with the name ${ee} exists on this object`),!this._players.has(ee)){const ne=new Player$1({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(ee)}).connect(this.output);this._players.set(ee,ne)}return this._players.get(ee)}get loaded(){return this._buffers.loaded}add(ee,ne,ae){return assert(!this._buffers.has(ee),"A buffer with that name already exists on this object"),this._buffers.add(ee,ne,ae),this}stopAll(ee){return this._players.forEach(ne=>ne.stop(ee)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(ee=>ee.dispose()),this._buffers.dispose(),this}}class GrainPlayer extends Source{constructor(){super(optionsFromArguments(GrainPlayer.getDefaults(),arguments,["url","onload"])),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[];const ee=optionsFromArguments(GrainPlayer.getDefaults(),arguments,["url","onload"]);this.buffer=new ToneAudioBuffer({onload:ee.onload,onerror:ee.onerror,reverse:ee.reverse,url:ee.url}),this._clock=new Clock({context:this.context,callback:this._tick.bind(this),frequency:1/ee.grainSize}),this._playbackRate=ee.playbackRate,this._grainSize=ee.grainSize,this._overlap=ee.overlap,this.detune=ee.detune,this.overlap=ee.overlap,this.loop=ee.loop,this.playbackRate=ee.playbackRate,this.grainSize=ee.grainSize,this.loopStart=ee.loopStart,this.loopEnd=ee.loopEnd,this.reverse=ee.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(Source.getDefaults(),{onload:noOp,onerror:noOp,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(ee,ne,ae){ne=defaultArg(ne,0),ne=this.toSeconds(ne),ee=this.toSeconds(ee);const ce=1/this._clock.frequency.getValueAtTime(ee);this._clock.start(ee,ne/ce),ae&&this.stop(ee+this.toSeconds(ae))}restart(ee,ne,ae){return super.restart(ee,ne,ae),this}_restart(ee,ne,ae){this._stop(ee),this._start(ee,ne,ae)}_stop(ee){this._clock.stop(ee)}_onstop(ee){this._activeSources.forEach(ne=>{ne.fadeOut=0,ne.stop(ee)}),this.onstop(this)}_tick(ee){const ne=this._clock.getTicksAtTime(ee),ae=ne*this._grainSize;if(this.log("offset",ae),!this.loop&&ae>this.buffer.duration){this.stop(ee);return}const ce=ae<this._overlap?0:this._overlap,le=new ToneBufferSource({context:this.context,url:this.buffer,fadeIn:ce,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:intervalToFrequencyRatio(this.detune/100)}).connect(this.output);le.start(ee,this._grainSize*ne),le.stop(ee+this._grainSize/this.playbackRate),this._activeSources.push(le),le.onended=()=>{const ue=this._activeSources.indexOf(le);ue!==-1&&this._activeSources.splice(ue,1)}}get playbackRate(){return this._playbackRate}set playbackRate(ee){assertRange(ee,.001),this._playbackRate=ee,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(ee){this.buffer.loaded&&assertRange(this.toSeconds(ee),0,this.buffer.duration),this._loopStart=this.toSeconds(ee)}get loopEnd(){return this._loopEnd}set loopEnd(ee){this.buffer.loaded&&assertRange(this.toSeconds(ee),0,this.buffer.duration),this._loopEnd=this.toSeconds(ee)}get reverse(){return this.buffer.reverse}set reverse(ee){this.buffer.reverse=ee}get grainSize(){return this._grainSize}set grainSize(ee){this._grainSize=this.toSeconds(ee),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(ee){const ne=this.toSeconds(ee);assertRange(ne,0),this._overlap=ne}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(ee=>ee.dispose()),this}}class Abs extends SignalOperator{constructor(){super(...arguments),this.name="Abs",this._abs=new WaveShaper({context:this.context,mapping:ee=>Math.abs(ee)<.001?0:Math.abs(ee)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class GainToAudio extends SignalOperator{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new WaveShaper({context:this.context,mapping:ee=>Math.abs(ee)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Negate extends SignalOperator{constructor(){super(...arguments),this.name="Negate",this._multiply=new Multiply({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class Subtract extends Signal{constructor(){super(Object.assign(optionsFromArguments(Subtract.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Subtract",this._sum=new Gain({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new Negate({context:this.context}),this.subtrahend=this._param,connectSeries(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class GreaterThanZero extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(GreaterThanZero.getDefaults(),arguments))),this.name="GreaterThanZero",this._thresh=this.output=new WaveShaper({context:this.context,length:127,mapping:ee=>ee<=0?0:1}),this._scale=this.input=new Multiply({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class GreaterThan extends Signal{constructor(){super(Object.assign(optionsFromArguments(GreaterThan.getDefaults(),arguments,["value"]))),this.name="GreaterThan",this.override=!1;const ee=optionsFromArguments(GreaterThan.getDefaults(),arguments,["value"]);this._subtract=this.input=new Subtract({context:this.context,value:ee.value}),this._gtz=this.output=new GreaterThanZero({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,readOnly(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class Pow extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(Pow.getDefaults(),arguments,["value"]))),this.name="Pow";const ee=optionsFromArguments(Pow.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new WaveShaper({context:this.context,mapping:this._expFunc(ee.value),length:8192}),this._exponent=ee.value}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{value:1})}_expFunc(ee){return ne=>Math.pow(Math.abs(ne),ee)}get value(){return this._exponent}set value(ee){this._exponent=ee,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class ScaleExp extends Scale{constructor(){super(Object.assign(optionsFromArguments(ScaleExp.getDefaults(),arguments,["min","max","exponent"]))),this.name="ScaleExp";const ee=optionsFromArguments(ScaleExp.getDefaults(),arguments,["min","max","exponent"]);this.input=this._exp=new Pow({context:this.context,value:ee.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(Scale.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(ee){this._exp.value=ee}dispose(){return super.dispose(),this._exp.dispose(),this}}class SyncedSignal extends Signal{constructor(){super(optionsFromArguments(Signal.getDefaults(),arguments,["value","units"])),this.name="SyncedSignal",this.override=!1;const ee=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);this._lastVal=ee.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new ToneConstantSource({context:this.context,offset:ee.value,units:ee.units}).start(0),this.setValueAtTime(ee.value,0)}_onTick(ee){const ne=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==ne&&(this._lastVal=ne,this._constantSource.offset.setValueAtTime(ne,ee))}_anchorValue(ee){const ne=super.getValueAtTime(this.context.transport.seconds);this._lastVal=ne,this._constantSource.offset.cancelAndHoldAtTime(ee),this._constantSource.offset.setValueAtTime(ne,ee)}getValueAtTime(ee){const ne=new TransportTimeClass(this.context,ee).toSeconds();return super.getValueAtTime(ne)}setValueAtTime(ee,ne){const ae=new TransportTimeClass(this.context,ne).toSeconds();return super.setValueAtTime(ee,ae),this}linearRampToValueAtTime(ee,ne){const ae=new TransportTimeClass(this.context,ne).toSeconds();return super.linearRampToValueAtTime(ee,ae),this}exponentialRampToValueAtTime(ee,ne){const ae=new TransportTimeClass(this.context,ne).toSeconds();return super.exponentialRampToValueAtTime(ee,ae),this}setTargetAtTime(ee,ne,ae){const ce=new TransportTimeClass(this.context,ne).toSeconds();return super.setTargetAtTime(ee,ce,ae),this}cancelScheduledValues(ee){const ne=new TransportTimeClass(this.context,ee).toSeconds();return super.cancelScheduledValues(ne),this}setValueCurveAtTime(ee,ne,ae,ce){const le=new TransportTimeClass(this.context,ne).toSeconds();return ae=this.toSeconds(ae),super.setValueCurveAtTime(ee,le,ae,ce),this}cancelAndHoldAtTime(ee){const ne=new TransportTimeClass(this.context,ee).toSeconds();return super.cancelAndHoldAtTime(ne),this}setRampPoint(ee){const ne=new TransportTimeClass(this.context,ee).toSeconds();return super.setRampPoint(ne),this}exponentialRampTo(ee,ne,ae){const ce=new TransportTimeClass(this.context,ae).toSeconds();return super.exponentialRampTo(ee,ne,ce),this}linearRampTo(ee,ne,ae){const ce=new TransportTimeClass(this.context,ae).toSeconds();return super.linearRampTo(ee,ne,ce),this}targetRampTo(ee,ne,ae){const ce=new TransportTimeClass(this.context,ae).toSeconds();return super.targetRampTo(ee,ne,ce),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class Envelope extends ToneAudioNode{constructor(){super(optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Signal({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const ee=optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=ee.attack,this.decay=ee.decay,this.sustain=ee.sustain,this.release=ee.release,this.attackCurve=ee.attackCurve,this.releaseCurve=ee.releaseCurve,this.decayCurve=ee.decayCurve}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(ee,ne){if(isString$1(ee))return ee;{let ae;for(ae in EnvelopeCurves)if(EnvelopeCurves[ae][ne]===ee)return ae;return ee}}_setCurve(ee,ne,ae){if(isString$1(ae)&&Reflect.has(EnvelopeCurves,ae)){const ce=EnvelopeCurves[ae];isObject$4(ce)?ee!=="_decayCurve"&&(this[ee]=ce[ne]):this[ee]=ce}else if(isArray$8(ae)&&ee!=="_decayCurve")this[ee]=ae;else throw new Error("Envelope: invalid curve: "+ae)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(ee){this._setCurve("_attackCurve","In",ee)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(ee){this._setCurve("_releaseCurve","Out",ee)}get decayCurve(){return this._decayCurve}set decayCurve(ee){assert(["linear","exponential"].some(ne=>ne===ee),`Invalid envelope curve: ${ee}`),this._decayCurve=ee}triggerAttack(ee,ne=1){this.log("triggerAttack",ee,ne),ee=this.toSeconds(ee);let ce=this.toSeconds(this.attack);const le=this.toSeconds(this.decay),ue=this.getValueAtTime(ee);if(ue>0){const he=1/ce;ce=(1-ue)/he}if(ce<this.sampleTime)this._sig.cancelScheduledValues(ee),this._sig.setValueAtTime(ne,ee);else if(this._attackCurve==="linear")this._sig.linearRampTo(ne,ce,ee);else if(this._attackCurve==="exponential")this._sig.targetRampTo(ne,ce,ee);else{this._sig.cancelAndHoldAtTime(ee);let he=this._attackCurve;for(let fe=1;fe<he.length;fe++)if(he[fe-1]<=ue&&ue<=he[fe]){he=this._attackCurve.slice(fe),he[0]=ue;break}this._sig.setValueCurveAtTime(he,ee,ce,ne)}if(le&&this.sustain<1){const he=ne*this.sustain,fe=ee+ce;this.log("decay",fe),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(he,le+fe):this._sig.exponentialApproachValueAtTime(he,fe,le)}return this}triggerRelease(ee){this.log("triggerRelease",ee),ee=this.toSeconds(ee);const ne=this.getValueAtTime(ee);if(ne>0){const ae=this.toSeconds(this.release);ae<this.sampleTime?this._sig.setValueAtTime(0,ee):this._releaseCurve==="linear"?this._sig.linearRampTo(0,ae,ee):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,ae,ee):(assert(isArray$8(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(ee),this._sig.setValueCurveAtTime(this._releaseCurve,ee,ae,ne))}return this}getValueAtTime(ee){return this._sig.getValueAtTime(ee)}triggerAttackRelease(ee,ne,ae=1){return ne=this.toSeconds(ne),this.triggerAttack(ne,ae),this.triggerRelease(ne+this.toSeconds(ee)),this}cancel(ee){return this._sig.cancelScheduledValues(this.toSeconds(ee)),this}connect(ee,ne=0,ae=0){return connectSignal(this,ee,ne,ae),this}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){const ne=ee/this.context.sampleRate,ae=new OfflineContext(1,ne,this.context.sampleRate),ce=this.toSeconds(this.attack)+this.toSeconds(this.decay),le=ce+this.toSeconds(this.release),ue=le*.1,he=le+ue,fe=new this.constructor(Object.assign(this.get(),{attack:ne*this.toSeconds(this.attack)/he,decay:ne*this.toSeconds(this.decay)/he,release:ne*this.toSeconds(this.release)/he,context:ae}));return fe._sig.toDestination(),fe.triggerAttackRelease(ne*(ce+ue)/he,0),(yield ae.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}__decorate$8([timeRange(0)],Envelope.prototype,"attack",void 0);__decorate$8([timeRange(0)],Envelope.prototype,"decay",void 0);__decorate$8([range(0,1)],Envelope.prototype,"sustain",void 0);__decorate$8([timeRange(0)],Envelope.prototype,"release",void 0);const EnvelopeCurves=(()=>{let ee,ne;const ae=[];for(ee=0;ee<128;ee++)ae[ee]=Math.sin(ee/(128-1)*(Math.PI/2));const ce=[],le=6.4;for(ee=0;ee<128-1;ee++){ne=ee/(128-1);const ye=Math.sin(ne*(Math.PI*2)*le-Math.PI/2)+1;ce[ee]=ye/10+ne*.83}ce[128-1]=1;const ue=[],he=5;for(ee=0;ee<128;ee++)ue[ee]=Math.ceil(ee/(128-1)*he)/he;const fe=[];for(ee=0;ee<128;ee++)ne=ee/(128-1),fe[ee]=.5*(1-Math.cos(Math.PI*ne));const me=[];for(ee=0;ee<128;ee++){ne=ee/(128-1);const ye=Math.pow(ne,3)*4+.2,be=Math.cos(ye*Math.PI*2*ne);me[ee]=Math.abs(be*(1-ne))}function ge(ye){const be=new Array(ye.length);for(let Ee=0;Ee<ye.length;Ee++)be[Ee]=1-ye[Ee];return be}function ve(ye){return ye.slice(0).reverse()}return{bounce:{In:ge(me),Out:me},cosine:{In:ae,Out:ve(ae)},exponential:"exponential",linear:"linear",ripple:{In:ce,Out:ge(ce)},sine:{In:fe,Out:ge(fe)},step:{In:ue,Out:ge(ue)}}})();let Instrument$3=class pc extends ToneAudioNode{constructor(){super(optionsFromArguments(pc.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const ee=optionsFromArguments(pc.getDefaults(),arguments);this._volume=this.output=new Volume({context:this.context,volume:ee.volume}),this.volume=this._volume.volume,readOnly(this,"volume")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let ee=!1;return this._synced||(this._synced=!0,ee=!0),ee}_syncMethod(ee,ne){const ae=this["_original_"+ee]=this[ee];this[ee]=(...ce)=>{const le=ce[ne],ue=this.context.transport.schedule(he=>{ce[ne]=he,ae.apply(this,ce)},le);this._scheduledEvents.push(ue)}}unsync(){return this._scheduledEvents.forEach(ee=>this.context.transport.clear(ee)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(ee,ne,ae,ce){const le=this.toSeconds(ae),ue=this.toSeconds(ne);return this.triggerAttack(ee,le,ce),this.triggerRelease(le+ue),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};class Monophonic extends Instrument$3{constructor(){super(optionsFromArguments(Monophonic.getDefaults(),arguments));const ee=optionsFromArguments(Monophonic.getDefaults(),arguments);this.portamento=ee.portamento,this.onsilence=ee.onsilence}static getDefaults(){return Object.assign(Instrument$3.getDefaults(),{detune:0,onsilence:noOp,portamento:0})}triggerAttack(ee,ne,ae=1){this.log("triggerAttack",ee,ne,ae);const ce=this.toSeconds(ne);return this._triggerEnvelopeAttack(ce,ae),this.setNote(ee,ce),this}triggerRelease(ee){this.log("triggerRelease",ee);const ne=this.toSeconds(ee);return this._triggerEnvelopeRelease(ne),this}setNote(ee,ne){const ae=this.toSeconds(ne),ce=ee instanceof FrequencyClass?ee.toFrequency():ee;if(this.portamento>0&&this.getLevelAtTime(ae)>.05){const le=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(ce,le,ae)}else this.frequency.setValueAtTime(ce,ae);return this}}__decorate$8([timeRange(0)],Monophonic.prototype,"portamento",void 0);class AmplitudeEnvelope extends Envelope{constructor(){super(optionsFromArguments(AmplitudeEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Gain({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Synth extends Monophonic{constructor(){super(optionsFromArguments(Synth.getDefaults(),arguments)),this.name="Synth";const ee=optionsFromArguments(Synth.getDefaults(),arguments);this.oscillator=new OmniOscillator(Object.assign({context:this.context,detune:ee.detune,onstop:()=>this.onsilence(this)},ee.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},ee.envelope)),this.oscillator.chain(this.envelope,this.output),readOnly(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(ee,ne){if(this.envelope.triggerAttack(ee,ne),this.oscillator.start(ee),this.envelope.sustain===0){const ae=this.toSeconds(this.envelope.attack),ce=this.toSeconds(this.envelope.decay);this.oscillator.stop(ee+ae+ce)}}_triggerEnvelopeRelease(ee){this.envelope.triggerRelease(ee),this.oscillator.stop(ee+this.toSeconds(this.envelope.release))}getLevelAtTime(ee){return ee=this.toSeconds(ee),this.envelope.getValueAtTime(ee)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class ModulationSynth extends Monophonic{constructor(){super(optionsFromArguments(ModulationSynth.getDefaults(),arguments)),this.name="ModulationSynth";const ee=optionsFromArguments(ModulationSynth.getDefaults(),arguments);this._carrier=new Synth({context:this.context,oscillator:ee.oscillator,envelope:ee.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Synth({context:this.context,oscillator:ee.modulation,envelope:ee.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Signal({context:this.context,units:"frequency"}),this.detune=new Signal({context:this.context,value:ee.detune,units:"cents"}),this.harmonicity=new Multiply({context:this.context,value:ee.harmonicity,minValue:0}),this._modulationNode=new Gain({context:this.context,gain:0}),readOnly(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{harmonicity:3,oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(ee,ne){this._carrier._triggerEnvelopeAttack(ee,ne),this._modulator._triggerEnvelopeAttack(ee,ne)}_triggerEnvelopeRelease(ee){return this._carrier._triggerEnvelopeRelease(ee),this._modulator._triggerEnvelopeRelease(ee),this}getLevelAtTime(ee){return ee=this.toSeconds(ee),this.envelope.getValueAtTime(ee)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class AMSynth extends ModulationSynth{constructor(){super(optionsFromArguments(AMSynth.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new AudioToGain({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class BiquadFilter extends ToneAudioNode{constructor(){super(optionsFromArguments(BiquadFilter.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const ee=optionsFromArguments(BiquadFilter.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Param({context:this.context,units:"number",value:ee.Q,param:this._filter.Q}),this.frequency=new Param({context:this.context,units:"frequency",value:ee.frequency,param:this._filter.frequency}),this.detune=new Param({context:this.context,units:"cents",value:ee.detune,param:this._filter.detune}),this.gain=new Param({context:this.context,units:"decibels",convert:!1,value:ee.gain,param:this._filter.gain}),this.type=ee.type}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(ee){assert(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(ee)!==-1,`Invalid filter type: ${ee}`),this._filter.type=ee}getFrequencyResponse(ee=128){const ne=new Float32Array(ee);for(let ue=0;ue<ee;ue++){const fe=Math.pow(ue/ee,2)*(2e4-20)+20;ne[ue]=fe}const ae=new Float32Array(ee),ce=new Float32Array(ee),le=this.context.createBiquadFilter();return le.type=this.type,le.Q.value=this.Q.value,le.frequency.value=this.frequency.value,le.gain.value=this.gain.value,le.getFrequencyResponse(ne,ae,ce),ae}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Filter extends ToneAudioNode{constructor(){super(optionsFromArguments(Filter.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._filters=[];const ee=optionsFromArguments(Filter.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new Signal({context:this.context,units:"positive",value:ee.Q}),this.frequency=new Signal({context:this.context,units:"frequency",value:ee.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:ee.detune}),this.gain=new Signal({context:this.context,units:"decibels",convert:!1,value:ee.gain}),this._type=ee.type,this.rolloff=ee.rolloff,readOnly(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(ee){assert(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(ee)!==-1,`Invalid filter type: ${ee}`),this._type=ee,this._filters.forEach(ae=>ae.type=ee)}get rolloff(){return this._rolloff}set rolloff(ee){const ne=isNumber$2(ee)?ee:parseInt(ee,10),ae=[-12,-24,-48,-96];let ce=ae.indexOf(ne);assert(ce!==-1,`rolloff can only be ${ae.join(", ")}`),ce+=1,this._rolloff=ne,this.input.disconnect(),this._filters.forEach(le=>le.disconnect()),this._filters=new Array(ce);for(let le=0;le<ce;le++){const ue=new BiquadFilter({context:this.context});ue.type=this._type,this.frequency.connect(ue.frequency),this.detune.connect(ue.detune),this.Q.connect(ue.Q),this.gain.connect(ue.gain),this._filters[le]=ue}this._internalChannels=this._filters,connectSeries(this.input,...this._internalChannels,this.output)}getFrequencyResponse(ee=128){const ne=new BiquadFilter({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),ae=new Float32Array(ee).map(()=>1);return this._filters.forEach(()=>{ne.getFrequencyResponse(ee).forEach((le,ue)=>ae[ue]*=le)}),ne.dispose(),ae}dispose(){return super.dispose(),this._filters.forEach(ee=>{ee.dispose()}),writable(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class FrequencyEnvelope extends Envelope{constructor(){super(optionsFromArguments(FrequencyEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const ee=optionsFromArguments(FrequencyEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=ee.octaves,this._baseFrequency=this.toFrequency(ee.baseFrequency),this._exponent=this.input=new Pow({context:this.context,value:ee.exponent}),this._scale=this.output=new Scale({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Envelope.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(ee){const ne=this.toFrequency(ee);assertRange(ne,0),this._baseFrequency=ne,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(ee){this._octaves=ee,this._scale.max=this._baseFrequency*Math.pow(2,ee)}get exponent(){return this._exponent.value}set exponent(ee){this._exponent.value=ee}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class MonoSynth extends Monophonic{constructor(){super(optionsFromArguments(MonoSynth.getDefaults(),arguments)),this.name="MonoSynth";const ee=optionsFromArguments(MonoSynth.getDefaults(),arguments);this.oscillator=new OmniOscillator(Object.assign(ee.oscillator,{context:this.context,detune:ee.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Filter(Object.assign(ee.filter,{context:this.context})),this.filterEnvelope=new FrequencyEnvelope(Object.assign(ee.filterEnvelope,{context:this.context})),this.envelope=new AmplitudeEnvelope(Object.assign(ee.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),readOnly(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(omitFromObject(Filter.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(omitFromObject(FrequencyEnvelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),Object.keys(Source.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(ee,ne=1){if(this.envelope.triggerAttack(ee,ne),this.filterEnvelope.triggerAttack(ee),this.oscillator.start(ee),this.envelope.sustain===0){const ae=this.toSeconds(this.envelope.attack),ce=this.toSeconds(this.envelope.decay);this.oscillator.stop(ee+ae+ce)}}_triggerEnvelopeRelease(ee){this.envelope.triggerRelease(ee),this.filterEnvelope.triggerRelease(ee),this.oscillator.stop(ee+this.toSeconds(this.envelope.release))}getLevelAtTime(ee){return ee=this.toSeconds(ee),this.envelope.getValueAtTime(ee)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class DuoSynth extends Monophonic{constructor(){super(optionsFromArguments(DuoSynth.getDefaults(),arguments)),this.name="DuoSynth";const ee=optionsFromArguments(DuoSynth.getDefaults(),arguments);this.voice0=new MonoSynth(Object.assign(ee.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new MonoSynth(Object.assign(ee.voice1,{context:this.context})),this.harmonicity=new Multiply({context:this.context,units:"positive",value:ee.harmonicity}),this._vibrato=new LFO({frequency:ee.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new Gain({context:this.context,units:"normalRange",gain:ee.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Signal({context:this.context,units:"frequency",value:440}),this.detune=new Signal({context:this.context,units:"cents",value:ee.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),readOnly(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(ee){return ee=this.toSeconds(ee),this.voice0.envelope.getValueAtTime(ee)+this.voice1.envelope.getValueAtTime(ee)}static getDefaults(){return deepMerge(Monophonic.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:deepMerge(omitFromObject(MonoSynth.getDefaults(),Object.keys(Monophonic.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:deepMerge(omitFromObject(MonoSynth.getDefaults(),Object.keys(Monophonic.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(ee,ne){this.voice0._triggerEnvelopeAttack(ee,ne),this.voice1._triggerEnvelopeAttack(ee,ne)}_triggerEnvelopeRelease(ee){return this.voice0._triggerEnvelopeRelease(ee),this.voice1._triggerEnvelopeRelease(ee),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class FMSynth extends ModulationSynth{constructor(){super(optionsFromArguments(FMSynth.getDefaults(),arguments)),this.name="FMSynth";const ee=optionsFromArguments(FMSynth.getDefaults(),arguments);this.modulationIndex=new Multiply({context:this.context,value:ee.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(ModulationSynth.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const inharmRatios=[1,1.483,1.932,2.546,2.63,3.897];class MetalSynth extends Monophonic{constructor(){super(optionsFromArguments(MetalSynth.getDefaults(),arguments)),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];const ee=optionsFromArguments(MetalSynth.getDefaults(),arguments);this.detune=new Signal({context:this.context,units:"cents",value:ee.detune}),this.frequency=new Signal({context:this.context,units:"frequency"}),this._amplitude=new Gain({context:this.context,gain:0}).connect(this.output),this._highpass=new Filter({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let ne=0;ne<inharmRatios.length;ne++){const ae=new FMOscillator({context:this.context,harmonicity:ee.harmonicity,modulationIndex:ee.modulationIndex,modulationType:"square",onstop:ne===0?()=>this.onsilence(this):noOp,type:"square"});ae.connect(this._highpass),this._oscillators[ne]=ae;const ce=new Multiply({context:this.context,value:inharmRatios[ne]});this._freqMultipliers[ne]=ce,this.frequency.chain(ce,ae.frequency),this.detune.connect(ae.detune)}this._filterFreqScaler=new Scale({context:this.context,max:7e3,min:this.toFrequency(ee.resonance)}),this.envelope=new Envelope({attack:ee.envelope.attack,attackCurve:"linear",context:this.context,decay:ee.envelope.decay,release:ee.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=ee.octaves,this.octaves=ee.octaves}static getDefaults(){return deepMerge(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(ee,ne=1){return this.envelope.triggerAttack(ee,ne),this._oscillators.forEach(ae=>ae.start(ee)),this.envelope.sustain===0&&this._oscillators.forEach(ae=>{ae.stop(ee+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(ee){return this.envelope.triggerRelease(ee),this._oscillators.forEach(ne=>ne.stop(ee+this.toSeconds(this.envelope.release))),this}getLevelAtTime(ee){return ee=this.toSeconds(ee),this.envelope.getValueAtTime(ee)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(ee){this._oscillators.forEach(ne=>ne.modulationIndex.value=ee)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(ee){this._oscillators.forEach(ne=>ne.harmonicity.value=ee)}get resonance(){return this._filterFreqScaler.min}set resonance(ee){this._filterFreqScaler.min=this.toFrequency(ee),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(ee){this._octaves=ee,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,ee)}dispose(){return super.dispose(),this._oscillators.forEach(ee=>ee.dispose()),this._freqMultipliers.forEach(ee=>ee.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class MembraneSynth extends Synth{constructor(){super(optionsFromArguments(MembraneSynth.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const ee=optionsFromArguments(MembraneSynth.getDefaults(),arguments);this.pitchDecay=ee.pitchDecay,this.octaves=ee.octaves,readOnly(this,["oscillator","envelope"])}static getDefaults(){return deepMerge(Monophonic.getDefaults(),Synth.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(ee,ne){const ae=this.toSeconds(ne),ce=this.toFrequency(ee instanceof FrequencyClass?ee.toFrequency():ee),le=ce*this.octaves;return this.oscillator.frequency.setValueAtTime(le,ae),this.oscillator.frequency.exponentialRampToValueAtTime(ce,ae+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}__decorate$8([range(0)],MembraneSynth.prototype,"octaves",void 0);__decorate$8([timeRange(0)],MembraneSynth.prototype,"pitchDecay",void 0);class NoiseSynth extends Instrument$3{constructor(){super(optionsFromArguments(NoiseSynth.getDefaults(),arguments)),this.name="NoiseSynth";const ee=optionsFromArguments(NoiseSynth.getDefaults(),arguments);this.noise=new Noise(Object.assign({context:this.context},ee.noise)),this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},ee.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Instrument$3.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(omitFromObject(Noise.getDefaults(),Object.keys(Source.getDefaults())),{type:"white"})})}triggerAttack(ee,ne=1){return ee=this.toSeconds(ee),this.envelope.triggerAttack(ee,ne),this.noise.start(ee),this.envelope.sustain===0&&this.noise.stop(ee+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(ee){return ee=this.toSeconds(ee),this.envelope.triggerRelease(ee),this.noise.stop(ee+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(ee,ne,ae=1){return ne=this.toSeconds(ne),ee=this.toSeconds(ee),this.triggerAttack(ne,ae),this.triggerRelease(ne+ee),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const workletContext=new Set;function addToWorklet(re){workletContext.add(re)}function registerProcessor(re,ee){const ne=`registerProcessor("${re}", ${ee})`;workletContext.add(ne)}function getWorkletGlobalScope(){return Array.from(workletContext).join(`
`)}class ToneAudioWorklet extends ToneAudioNode{constructor(ee){super(ee),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=noOp;const ne=URL.createObjectURL(new Blob([getWorkletGlobalScope()],{type:"text/javascript"})),ae=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(ne,ae).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(ae,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const toneAudioWorkletProcessor=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;addToWorklet(toneAudioWorkletProcessor);const singleIOProcess=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;addToWorklet(singleIOProcess);const delayLine=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;addToWorklet(delayLine);const workletName$1="feedback-comb-filter",feedbackCombFilter=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;registerProcessor(workletName$1,feedbackCombFilter);class FeedbackCombFilter extends ToneAudioWorklet{constructor(){super(optionsFromArguments(FeedbackCombFilter.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const ee=optionsFromArguments(FeedbackCombFilter.getDefaults(),arguments,["delayTime","resonance"]);this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.delayTime=new Param({context:this.context,value:ee.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new Param({context:this.context,value:ee.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),readOnly(this,["resonance","delayTime"])}_audioWorkletName(){return workletName$1}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{delayTime:.1,resonance:.5})}onReady(ee){connectSeries(this.input,ee,this.output);const ne=ee.parameters.get("delayTime");this.delayTime.setParam(ne);const ae=ee.parameters.get("feedback");this.resonance.setParam(ae)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class OnePoleFilter extends ToneAudioNode{constructor(){super(optionsFromArguments(OnePoleFilter.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";const ee=optionsFromArguments(OnePoleFilter.getDefaults(),arguments,["frequency","type"]);this._frequency=ee.frequency,this._type=ee.type,this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const ee=this._filter,ne=this.toFrequency(this._frequency),ae=1/(2*Math.PI*ne);if(this._type==="lowpass"){const ce=1/(ae*this.context.sampleRate),le=ce-1;this._filter=this.context.createIIRFilter([ce,0],[1,le])}else{const ce=1/(ae*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,ce])}this.input.chain(this._filter,this.output),ee&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(ee),ee.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(ee){this._frequency=ee,this._createFilter()}get type(){return this._type}set type(ee){this._type=ee,this._createFilter()}getFrequencyResponse(ee=128){const ne=new Float32Array(ee);for(let le=0;le<ee;le++){const he=Math.pow(le/ee,2)*(2e4-20)+20;ne[le]=he}const ae=new Float32Array(ee),ce=new Float32Array(ee);return this._filter.getFrequencyResponse(ne,ae,ce),ae}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class LowpassCombFilter extends ToneAudioNode{constructor(){super(optionsFromArguments(LowpassCombFilter.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";const ee=optionsFromArguments(LowpassCombFilter.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new FeedbackCombFilter({context:this.context,delayTime:ee.delayTime,resonance:ee.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new OnePoleFilter({context:this.context,frequency:ee.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(ee){this._lowpass.frequency=ee}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class PluckSynth extends Instrument$3{constructor(){super(optionsFromArguments(PluckSynth.getDefaults(),arguments)),this.name="PluckSynth";const ee=optionsFromArguments(PluckSynth.getDefaults(),arguments);this._noise=new Noise({context:this.context,type:"pink"}),this.attackNoise=ee.attackNoise,this._lfcf=new LowpassCombFilter({context:this.context,dampening:ee.dampening,resonance:ee.resonance}),this.resonance=ee.resonance,this.release=ee.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return deepMerge(Instrument$3.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(ee){this._lfcf.dampening=ee}triggerAttack(ee,ne){const ae=this.toFrequency(ee);ne=this.toSeconds(ne);const ce=1/ae;return this._lfcf.delayTime.setValueAtTime(ce,ne),this._noise.start(ne),this._noise.stop(ne+ce*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(ne),this._lfcf.resonance.setValueAtTime(this.resonance,ne),this}triggerRelease(ee){return this._lfcf.resonance.linearRampTo(0,this.release,ee),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class PolySynth extends Instrument$3{constructor(){super(optionsFromArguments(PolySynth.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;const ee=optionsFromArguments(PolySynth.getDefaults(),arguments,["voice","options"]);assert(!isNumber$2(ee.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const ne=ee.voice.getDefaults();this.options=Object.assign(ne,ee.options),this.voice=ee.voice,this.maxPolyphony=ee.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const ae=this._voices.indexOf(this._dummyVoice);this._voices.splice(ae,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Instrument$3.getDefaults(),{maxPolyphony:32,options:{},voice:Synth})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(ee){this._availableVoices.push(ee);const ne=this._activeVoices.findIndex(ae=>ae.voice===ee);this._activeVoices.splice(ne,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const ee=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return ee.connect(this.output),this._voices.push(ee),ee}else warn("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const ee=this._availableVoices.shift(),ne=this._voices.indexOf(ee);this._voices.splice(ne,1),this.context.isOffline||ee.dispose()}}_triggerAttack(ee,ne,ae){ee.forEach(ce=>{const le=new MidiClass(this.context,ce).toMidi(),ue=this._getNextAvailableVoice();ue&&(ue.triggerAttack(ce,ne,ae),this._activeVoices.push({midi:le,voice:ue,released:!1}),this.log("triggerAttack",ce,ne))})}_triggerRelease(ee,ne){ee.forEach(ae=>{const ce=new MidiClass(this.context,ae).toMidi(),le=this._activeVoices.find(({midi:ue,released:he})=>ue===ce&&!he);le&&(le.voice.triggerRelease(ne),le.released=!0,this.log("triggerRelease",ae,ne))})}_scheduleEvent(ee,ne,ae,ce){assert(!this.disposed,"Synth was already disposed"),ae<=this.now()?ee==="attack"?this._triggerAttack(ne,ae,ce):this._triggerRelease(ne,ae):this.context.setTimeout(()=>{this._scheduleEvent(ee,ne,ae,ce)},ae-this.now())}triggerAttack(ee,ne,ae){Array.isArray(ee)||(ee=[ee]);const ce=this.toSeconds(ne);return this._scheduleEvent("attack",ee,ce,ae),this}triggerRelease(ee,ne){Array.isArray(ee)||(ee=[ee]);const ae=this.toSeconds(ne);return this._scheduleEvent("release",ee,ae),this}triggerAttackRelease(ee,ne,ae,ce){const le=this.toSeconds(ae);if(this.triggerAttack(ee,le,ce),isArray$8(ne)){assert(isArray$8(ee),"If the duration is an array, the notes must also be an array"),ee=ee;for(let ue=0;ue<ee.length;ue++){const he=ne[Math.min(ue,ne.length-1)],fe=this.toSeconds(he);assert(fe>0,"The duration must be greater than 0"),this.triggerRelease(ee[ue],le+fe)}}else{const ue=this.toSeconds(ne);assert(ue>0,"The duration must be greater than 0"),this.triggerRelease(ee,le+ue)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(ee){const ne=omitFromObject(ee,["onsilence","context"]);return this.options=deepMerge(this.options,ne),this._voices.forEach(ae=>ae.set(ne)),this._dummyVoice.set(ne),this}get(){return this._dummyVoice.get()}releaseAll(ee){const ne=this.toSeconds(ee);return this._activeVoices.forEach(({voice:ae})=>{ae.triggerRelease(ne)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(ee=>ee.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Sampler extends Instrument$3{constructor(){super(optionsFromArguments(Sampler.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const ee=optionsFromArguments(Sampler.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),ne={};Object.keys(ee.urls).forEach(ae=>{const ce=parseInt(ae,10);if(assert(isNote(ae)||isNumber$2(ce)&&isFinite(ce),`url key is neither a note or midi pitch: ${ae}`),isNote(ae)){const le=new FrequencyClass(this.context,ae).toMidi();ne[le]=ee.urls[ae]}else isNumber$2(ce)&&isFinite(ce)&&(ne[ce]=ee.urls[ce])}),this._buffers=new ToneAudioBuffers({urls:ne,onload:ee.onload,baseUrl:ee.baseUrl,onerror:ee.onerror}),this.attack=ee.attack,this.release=ee.release,this.curve=ee.curve,this._buffers.loaded&&Promise.resolve().then(ee.onload)}static getDefaults(){return Object.assign(Instrument$3.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:noOp,onerror:noOp,release:.1,urls:{}})}_findClosest(ee){let ae=0;for(;ae<96;){if(this._buffers.has(ee+ae))return-ae;if(this._buffers.has(ee-ae))return ae;ae++}throw new Error(`No available buffers for note: ${ee}`)}triggerAttack(ee,ne,ae=1){return this.log("triggerAttack",ee,ne,ae),Array.isArray(ee)||(ee=[ee]),ee.forEach(ce=>{const le=ftomf(new FrequencyClass(this.context,ce).toFrequency()),ue=Math.round(le),he=le-ue,fe=this._findClosest(ue),me=ue-fe,ge=this._buffers.get(me),ve=intervalToFrequencyRatio(fe+he),ye=new ToneBufferSource({url:ge,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:ve}).connect(this.output);ye.start(ne,0,ge.duration/ve,ae),isArray$8(this._activeSources.get(ue))||this._activeSources.set(ue,[]),this._activeSources.get(ue).push(ye),ye.onended=()=>{if(this._activeSources&&this._activeSources.has(ue)){const be=this._activeSources.get(ue),Ee=be.indexOf(ye);Ee!==-1&&be.splice(Ee,1)}}}),this}triggerRelease(ee,ne){return this.log("triggerRelease",ee,ne),Array.isArray(ee)||(ee=[ee]),ee.forEach(ae=>{const ce=new FrequencyClass(this.context,ae).toMidi();if(this._activeSources.has(ce)&&this._activeSources.get(ce).length){const le=this._activeSources.get(ce);ne=this.toSeconds(ne),le.forEach(ue=>{ue.stop(ne)}),this._activeSources.set(ce,[])}}),this}releaseAll(ee){const ne=this.toSeconds(ee);return this._activeSources.forEach(ae=>{for(;ae.length;)ae.shift().stop(ne)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(ee,ne,ae,ce=1){const le=this.toSeconds(ae);return this.triggerAttack(ee,le,ce),isArray$8(ne)?(assert(isArray$8(ee),"notes must be an array when duration is array"),ee.forEach((ue,he)=>{const fe=ne[Math.min(he,ne.length-1)];this.triggerRelease(ue,le+this.toSeconds(fe))})):this.triggerRelease(ee,le+this.toSeconds(ne)),this}add(ee,ne,ae){if(assert(isNote(ee)||isFinite(ee),`note must be a pitch or midi: ${ee}`),isNote(ee)){const ce=new FrequencyClass(this.context,ee).toMidi();this._buffers.add(ce,ne,ae)}else this._buffers.add(ee,ne,ae);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(ee=>{ee.forEach(ne=>ne.dispose())}),this._activeSources.clear(),this}}__decorate$8([timeRange(0)],Sampler.prototype,"attack",void 0);__decorate$8([timeRange(0)],Sampler.prototype,"release",void 0);class ToneEvent extends ToneWithContext{constructor(){super(optionsFromArguments(ToneEvent.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new StateTimeline("stopped"),this._startOffset=0;const ee=optionsFromArguments(ToneEvent.getDefaults(),arguments,["callback","value"]);this._loop=ee.loop,this.callback=ee.callback,this.value=ee.value,this._loopStart=this.toTicks(ee.loopStart),this._loopEnd=this.toTicks(ee.loopEnd),this._playbackRate=ee.playbackRate,this._probability=ee.probability,this._humanize=ee.humanize,this.mute=ee.mute,this._playbackRate=ee.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(ee=-1){this._state.forEachFrom(ee,ne=>{let ae;if(ne.state==="started"){ne.id!==-1&&this.context.transport.clear(ne.id);const ce=ne.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||isNumber$2(this._loop)&&this._loop>1){ae=1/0,isNumber$2(this._loop)&&(ae=this._loop*this._getLoopDuration());const le=this._state.getAfter(ce);le!==null&&(ae=Math.min(ae,le.time-ce)),ae!==1/0&&(this._state.setStateAtTime("stopped",ce+ae+1,{id:-1}),ae=new TicksClass(this.context,ae));const ue=new TicksClass(this.context,this._getLoopDuration());ne.id=this.context.transport.scheduleRepeat(this._tick.bind(this),ue,new TicksClass(this.context,ce),ae)}else ne.id=this.context.transport.schedule(this._tick.bind(this),new TicksClass(this.context,ce))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(ee){this._startOffset=ee}get probability(){return this._probability}set probability(ee){this._probability=ee}get humanize(){return this._humanize}set humanize(ee){this._humanize=ee}start(ee){const ne=this.toTicks(ee);return this._state.getValueAtTime(ne)==="stopped"&&(this._state.add({id:-1,state:"started",time:ne}),this._rescheduleEvents(ne)),this}stop(ee){this.cancel(ee);const ne=this.toTicks(ee);if(this._state.getValueAtTime(ne)==="started"){this._state.setStateAtTime("stopped",ne,{id:-1});const ae=this._state.getBefore(ne);let ce=ne;ae!==null&&(ce=ae.time),this._rescheduleEvents(ce)}return this}cancel(ee){ee=defaultArg(ee,-1/0);const ne=this.toTicks(ee);return this._state.forEachFrom(ne,ae=>{this.context.transport.clear(ae.id)}),this._state.cancel(ne),this}_tick(ee){const ne=this.context.transport.getTicksAtTime(ee);if(!this.mute&&this._state.getValueAtTime(ne)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let ae=.02;isBoolean$1(this.humanize)||(ae=this.toSeconds(this.humanize)),ee+=(Math.random()*2-1)*ae}this.callback(ee,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(ee){this._loop=ee,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(ee){this._playbackRate=ee,this._rescheduleEvents()}get loopEnd(){return new TicksClass(this.context,this._loopEnd).toSeconds()}set loopEnd(ee){this._loopEnd=this.toTicks(ee),this._loop&&this._rescheduleEvents()}get loopStart(){return new TicksClass(this.context,this._loopStart).toSeconds()}set loopStart(ee){this._loopStart=this.toTicks(ee),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const ee=this.context.transport.ticks,ne=this._state.get(ee);if(ne!==null&&ne.state==="started"){const ae=this._getLoopDuration();return(ee-ne.time)%ae/ae}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Loop extends ToneWithContext{constructor(){super(optionsFromArguments(Loop.getDefaults(),arguments,["callback","interval"])),this.name="Loop";const ee=optionsFromArguments(Loop.getDefaults(),arguments,["callback","interval"]);this._event=new ToneEvent({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:ee.interval,playbackRate:ee.playbackRate,probability:ee.probability}),this.callback=ee.callback,this.iterations=ee.iterations}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{interval:"4n",callback:noOp,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(ee){return this._event.start(ee),this}stop(ee){return this._event.stop(ee),this}cancel(ee){return this._event.cancel(ee),this}_tick(ee){this.callback(ee)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(ee){this._event.loopEnd=ee}get playbackRate(){return this._event.playbackRate}set playbackRate(ee){this._event.playbackRate=ee}get humanize(){return this._event.humanize}set humanize(ee){this._event.humanize=ee}get probability(){return this._event.probability}set probability(ee){this._event.probability=ee}get mute(){return this._event.mute}set mute(ee){this._event.mute=ee}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(ee){ee===1/0?this._event.loop=!0:this._event.loop=ee}dispose(){return super.dispose(),this._event.dispose(),this}}class Part extends ToneEvent{constructor(){super(optionsFromArguments(Part.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new StateTimeline("stopped"),this._events=new Set;const ee=optionsFromArguments(Part.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,ee.events.forEach(ne=>{isArray$8(ne)?this.add(ne[0],ne[1]):this.add(ne)})}static getDefaults(){return Object.assign(ToneEvent.getDefaults(),{events:[]})}start(ee,ne){const ae=this.toTicks(ee);if(this._state.getValueAtTime(ae)!=="started"){ne=defaultArg(ne,this._loop?this._loopStart:0),this._loop?ne=defaultArg(ne,this._loopStart):ne=defaultArg(ne,0);const ce=this.toTicks(ne);this._state.add({id:-1,offset:ce,state:"started",time:ae}),this._forEach(le=>{this._startNote(le,ae,ce)})}return this}_startNote(ee,ne,ae){ne-=ae,this._loop?ee.startOffset>=this._loopStart&&ee.startOffset<this._loopEnd?(ee.startOffset<ae&&(ne+=this._getLoopDuration()),ee.start(new TicksClass(this.context,ne))):ee.startOffset<this._loopStart&&ee.startOffset>=ae&&(ee.loop=!1,ee.start(new TicksClass(this.context,ne))):ee.startOffset>=ae&&ee.start(new TicksClass(this.context,ne))}get startOffset(){return this._startOffset}set startOffset(ee){this._startOffset=ee,this._forEach(ne=>{ne.startOffset+=this._startOffset})}stop(ee){const ne=this.toTicks(ee);return this._state.cancel(ne),this._state.setStateAtTime("stopped",ne),this._forEach(ae=>{ae.stop(ee)}),this}at(ee,ne){const ae=new TransportTimeClass(this.context,ee).toTicks(),ce=new TicksClass(this.context,1).toSeconds(),le=this._events.values();let ue=le.next();for(;!ue.done;){const he=ue.value;if(Math.abs(ae-he.startOffset)<ce)return isDefined(ne)&&(he.value=ne),he;ue=le.next()}return isDefined(ne)?(this.add(ee,ne),this.at(ee)):null}add(ee,ne){ee instanceof Object&&Reflect.has(ee,"time")&&(ne=ee,ee=ne.time);const ae=this.toTicks(ee);let ce;return ne instanceof ToneEvent?(ce=ne,ce.callback=this._tick.bind(this)):ce=new ToneEvent({callback:this._tick.bind(this),context:this.context,value:ne}),ce.startOffset=ae,ce.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(ce),this._restartEvent(ce),this}_restartEvent(ee){this._state.forEach(ne=>{ne.state==="started"?this._startNote(ee,ne.time,ne.offset):ee.stop(new TicksClass(this.context,ne.time))})}remove(ee,ne){return isObject$4(ee)&&ee.hasOwnProperty("time")&&(ne=ee,ee=ne.time),ee=this.toTicks(ee),this._events.forEach(ae=>{ae.startOffset===ee&&(isUndef(ne)||isDefined(ne)&&ae.value===ne)&&(this._events.delete(ae),ae.dispose())}),this}clear(){return this._forEach(ee=>ee.dispose()),this._events.clear(),this}cancel(ee){return this._forEach(ne=>ne.cancel(ee)),this._state.cancel(this.toTicks(ee)),this}_forEach(ee){return this._events&&this._events.forEach(ne=>{ne instanceof Part?ne._forEach(ee):ee(ne)}),this}_setAll(ee,ne){this._forEach(ae=>{ae[ee]=ne})}_tick(ee,ne){this.mute||this.callback(ee,ne)}_testLoopBoundries(ee){this._loop&&(ee.startOffset<this._loopStart||ee.startOffset>=this._loopEnd)?ee.cancel(0):ee.state==="stopped"&&this._restartEvent(ee)}get probability(){return this._probability}set probability(ee){this._probability=ee,this._setAll("probability",ee)}get humanize(){return this._humanize}set humanize(ee){this._humanize=ee,this._setAll("humanize",ee)}get loop(){return this._loop}set loop(ee){this._loop=ee,this._forEach(ne=>{ne.loopStart=this.loopStart,ne.loopEnd=this.loopEnd,ne.loop=ee,this._testLoopBoundries(ne)})}get loopEnd(){return new TicksClass(this.context,this._loopEnd).toSeconds()}set loopEnd(ee){this._loopEnd=this.toTicks(ee),this._loop&&this._forEach(ne=>{ne.loopEnd=ee,this._testLoopBoundries(ne)})}get loopStart(){return new TicksClass(this.context,this._loopStart).toSeconds()}set loopStart(ee){this._loopStart=this.toTicks(ee),this._loop&&this._forEach(ne=>{ne.loopStart=this.loopStart,this._testLoopBoundries(ne)})}get playbackRate(){return this._playbackRate}set playbackRate(ee){this._playbackRate=ee,this._setAll("playbackRate",ee)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*upPatternGen(re){let ee=0;for(;ee<re.length;)ee=clampToArraySize(ee,re),yield re[ee],ee++}function*downPatternGen(re){let ee=re.length-1;for(;ee>=0;)ee=clampToArraySize(ee,re),yield re[ee],ee--}function*infiniteGen(re,ee){for(;;)yield*ee(re)}function clampToArraySize(re,ee){return clamp(re,0,ee.length-1)}function*alternatingGenerator(re,ee){let ne=ee?0:re.length-1;for(;;)ne=clampToArraySize(ne,re),yield re[ne],ee?(ne++,ne>=re.length-1&&(ee=!1)):(ne--,ne<=0&&(ee=!0))}function*jumpUp(re){let ee=0,ne=0;for(;ee<re.length;)ee=clampToArraySize(ee,re),yield re[ee],ne++,ee+=ne%2?2:-1}function*jumpDown(re){let ee=re.length-1,ne=0;for(;ee>=0;)ee=clampToArraySize(ee,re),yield re[ee],ne++,ee+=ne%2?-2:1}function*randomGen(re){for(;;){const ee=Math.floor(Math.random()*re.length);yield re[ee]}}function*randomOnce(re){const ee=[];for(let ne=0;ne<re.length;ne++)ee.push(ne);for(;ee.length>0;){const ne=ee.splice(Math.floor(ee.length*Math.random()),1),ae=clampToArraySize(ne[0],re);yield re[ae]}}function*randomWalk(re){let ee=Math.floor(Math.random()*re.length);for(;;)ee===0?ee++:ee===re.length-1||Math.random()<.5?ee--:ee++,yield re[ee]}function*PatternGenerator(re,ee="up",ne=0){switch(assert(re.length>0,"The array must have more than one value in it"),ee){case"up":yield*infiniteGen(re,upPatternGen);case"down":yield*infiniteGen(re,downPatternGen);case"upDown":yield*alternatingGenerator(re,!0);case"downUp":yield*alternatingGenerator(re,!1);case"alternateUp":yield*infiniteGen(re,jumpUp);case"alternateDown":yield*infiniteGen(re,jumpDown);case"random":yield*randomGen(re);case"randomOnce":yield*infiniteGen(re,randomOnce);case"randomWalk":yield*randomWalk(re)}}class Pattern extends Loop{constructor(){super(optionsFromArguments(Pattern.getDefaults(),arguments,["callback","values","pattern"])),this.name="Pattern";const ee=optionsFromArguments(Pattern.getDefaults(),arguments,["callback","values","pattern"]);this.callback=ee.callback,this._values=ee.values,this._pattern=PatternGenerator(ee.values,ee.pattern),this._type=ee.pattern}static getDefaults(){return Object.assign(Loop.getDefaults(),{pattern:"up",values:[],callback:noOp})}_tick(ee){const ne=this._pattern.next();this._value=ne.value,this.callback(ee,this._value)}get values(){return this._values}set values(ee){this._values=ee,this.pattern=this._type}get value(){return this._value}get pattern(){return this._type}set pattern(ee){this._type=ee,this._pattern=PatternGenerator(this._values,this._type)}}class Sequence extends ToneEvent{constructor(){super(optionsFromArguments(Sequence.getDefaults(),arguments,["callback","events","subdivision"])),this.name="Sequence",this._part=new Part({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[];const ee=optionsFromArguments(Sequence.getDefaults(),arguments,["callback","events","subdivision"]);this._subdivision=this.toTicks(ee.subdivision),this.events=ee.events,this.loop=ee.loop,this.loopStart=ee.loopStart,this.loopEnd=ee.loopEnd,this.playbackRate=ee.playbackRate,this.probability=ee.probability,this.humanize=ee.humanize,this.mute=ee.mute,this.playbackRate=ee.playbackRate}static getDefaults(){return Object.assign(omitFromObject(ToneEvent.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(ee,ne){ne!==null&&this.callback(ee,ne)}get events(){return this._events}set events(ee){this.clear(),this._eventsArray=ee,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(ee,ne){return this._part.start(ee,ne&&this._indexTime(ne)),this}stop(ee){return this._part.stop(ee),this}get subdivision(){return new TicksClass(this.context,this._subdivision).toSeconds()}_createSequence(ee){return new Proxy(ee,{get:(ne,ae)=>ne[ae],set:(ne,ae,ce)=>(isString$1(ae)&&isFinite(parseInt(ae,10))&&isArray$8(ce)?ne[ae]=this._createSequence(ce):ne[ae]=ce,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(ee,ne,ae){ee.forEach((ce,le)=>{const ue=le*ne+ae;if(isArray$8(ce))this._rescheduleSequence(ce,ne/ce.length,ue);else{const he=new TicksClass(this.context,ue,"i").toSeconds();this._part.add(he,ce)}})}_indexTime(ee){return new TicksClass(this.context,ee*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(ee){this._part.loop=ee}get loopStart(){return this._loopStart}set loopStart(ee){this._loopStart=ee,this._part.loopStart=this._indexTime(ee)}get loopEnd(){return this._loopEnd}set loopEnd(ee){this._loopEnd=ee,ee===0?this._part.loopEnd=this._indexTime(this._eventsArray.length):this._part.loopEnd=this._indexTime(ee)}get startOffset(){return this._part.startOffset}set startOffset(ee){this._part.startOffset=ee}get playbackRate(){return this._part.playbackRate}set playbackRate(ee){this._part.playbackRate=ee}get probability(){return this._part.probability}set probability(ee){this._part.probability=ee}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(ee){this._part.humanize=ee}get length(){return this._part.length}}class CrossFade extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new GainToAudio({context:this.context}),this.a=new Gain({context:this.context,gain:0}),this.b=new Gain({context:this.context,gain:0}),this.output=new Gain({context:this.context}),this._internalChannels=[this.a,this.b];const ee=optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]);this.fade=new Signal({context:this.context,units:"normalRange",value:ee.fade}),readOnly(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",connect(this._split,this.a.gain,0),connect(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Effect extends ToneAudioNode{constructor(ee){super(ee),this.name="Effect",this._dryWet=new CrossFade({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Gain({context:this.context}),this.effectReturn=new Gain({context:this.context}),this.input=new Gain({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(ee.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],readOnly(this,"wet")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}connectEffect(ee){return this._internalChannels.push(ee),this.effectSend.chain(ee,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class LFOEffect extends Effect{constructor(ee){super(ee),this.name="LFOEffect",this._lfo=new LFO({context:this.context,frequency:ee.frequency,amplitude:ee.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=ee.type,readOnly(this,["frequency","depth"])}static getDefaults(){return Object.assign(Effect.getDefaults(),{frequency:1,type:"sine",depth:1})}start(ee){return this._lfo.start(ee),this}stop(ee){return this._lfo.stop(ee),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(ee){this._lfo.type=ee}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class AutoFilter extends LFOEffect{constructor(){super(optionsFromArguments(AutoFilter.getDefaults(),arguments,["frequency","baseFrequency","octaves"])),this.name="AutoFilter";const ee=optionsFromArguments(AutoFilter.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);this.filter=new Filter(Object.assign(ee.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=ee.octaves,this.baseFrequency=ee.baseFrequency}static getDefaults(){return Object.assign(LFOEffect.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(ee){this._lfo.min=this.toFrequency(ee),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(ee){this._octaves=ee,this._lfo.max=this._lfo.min*Math.pow(2,ee)}dispose(){return super.dispose(),this.filter.dispose(),this}}class Panner extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Panner.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const ee=optionsFromArguments(Panner.getDefaults(),arguments,["pan"]);this.pan=new Param({context:this.context,param:this._panner.pan,value:ee.pan,minValue:-1,maxValue:1}),this._panner.channelCount=ee.channelCount,this._panner.channelCountMode="explicit",readOnly(this,"pan")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class AutoPanner extends LFOEffect{constructor(){super(optionsFromArguments(AutoPanner.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";const ee=optionsFromArguments(AutoPanner.getDefaults(),arguments,["frequency"]);this._panner=new Panner({context:this.context,channelCount:ee.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(LFOEffect.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class Follower extends ToneAudioNode{constructor(){super(optionsFromArguments(Follower.getDefaults(),arguments,["smoothing"])),this.name="Follower";const ee=optionsFromArguments(Follower.getDefaults(),arguments,["smoothing"]);this._abs=this.input=new Abs({context:this.context}),this._lowpass=this.output=new OnePoleFilter({context:this.context,frequency:1/this.toSeconds(ee.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=ee.smoothing}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(ee){this._smoothing=ee,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class AutoWah extends Effect{constructor(){super(optionsFromArguments(AutoWah.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"])),this.name="AutoWah";const ee=optionsFromArguments(AutoWah.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);this._follower=new Follower({context:this.context,smoothing:ee.follower}),this._sweepRange=new ScaleExp({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(ee.baseFrequency),this._octaves=ee.octaves,this._inputBoost=new Gain({context:this.context}),this._bandpass=new Filter({context:this.context,rolloff:-48,frequency:0,Q:ee.Q}),this._peaking=new Filter({context:this.context,type:"peaking"}),this._peaking.gain.value=ee.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=ee.sensitivity,readOnly(this,["gain","Q"])}static getDefaults(){return Object.assign(Effect.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(ee){this._octaves=ee,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(ee){this._follower.smoothing=ee}get baseFrequency(){return this._baseFrequency}set baseFrequency(ee){this._baseFrequency=this.toFrequency(ee),this._setSweepRange()}get sensitivity(){return gainToDb(1/this._inputBoost.gain.value)}set sensitivity(ee){this._inputBoost.gain.value=1/dbToGain(ee)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const workletName="bit-crusher",bitCrusherWorklet=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;registerProcessor(workletName,bitCrusherWorklet);class BitCrusher extends Effect{constructor(){super(optionsFromArguments(BitCrusher.getDefaults(),arguments,["bits"])),this.name="BitCrusher";const ee=optionsFromArguments(BitCrusher.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new BitCrusherWorklet({context:this.context,bits:ee.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(Effect.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class BitCrusherWorklet extends ToneAudioWorklet{constructor(){super(optionsFromArguments(BitCrusherWorklet.getDefaults(),arguments)),this.name="BitCrusherWorklet";const ee=optionsFromArguments(BitCrusherWorklet.getDefaults(),arguments);this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.bits=new Param({context:this.context,value:ee.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(ToneAudioWorklet.getDefaults(),{bits:12})}_audioWorkletName(){return workletName}onReady(ee){connectSeries(this.input,ee,this.output);const ne=ee.parameters.get("bits");this.bits.setParam(ne)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class Chebyshev extends Effect{constructor(){super(optionsFromArguments(Chebyshev.getDefaults(),arguments,["order"])),this.name="Chebyshev";const ee=optionsFromArguments(Chebyshev.getDefaults(),arguments,["order"]);this._shaper=new WaveShaper({context:this.context,length:4096}),this._order=ee.order,this.connectEffect(this._shaper),this.order=ee.order,this.oversample=ee.oversample}static getDefaults(){return Object.assign(Effect.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(ee,ne,ae){return ae.has(ne)||(ne===0?ae.set(ne,0):ne===1?ae.set(ne,ee):ae.set(ne,2*ee*this._getCoefficient(ee,ne-1,ae)-this._getCoefficient(ee,ne-2,ae))),ae.get(ne)}get order(){return this._order}set order(ee){this._order=ee,this._shaper.setMap(ne=>this._getCoefficient(ne,ee,new Map))}get oversample(){return this._shaper.oversample}set oversample(ee){this._shaper.oversample=ee}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Split extends ToneAudioNode{constructor(){super(optionsFromArguments(Split.getDefaults(),arguments,["channels"])),this.name="Split";const ee=optionsFromArguments(Split.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(ee.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Merge extends ToneAudioNode{constructor(){super(optionsFromArguments(Merge.getDefaults(),arguments,["channels"])),this.name="Merge";const ee=optionsFromArguments(Merge.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(ee.channels)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class StereoEffect extends ToneAudioNode{constructor(ee){super(ee),this.name="StereoEffect",this.input=new Gain({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new CrossFade({context:this.context,fade:ee.wet}),this.wet=this._dryWet.fade,this._split=new Split({context:this.context,channels:2}),this._merge=new Merge({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),readOnly(this,["wet"])}connectEffectLeft(...ee){this._split.connect(ee[0],0,0),connectSeries(...ee),connect(ee[ee.length-1],this._merge,0,0)}connectEffectRight(...ee){this._split.connect(ee[0],1,0),connectSeries(...ee),connect(ee[ee.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class StereoFeedbackEffect extends StereoEffect{constructor(ee){super(ee),this.feedback=new Signal({context:this.context,value:ee.feedback,units:"normalRange"}),this._feedbackL=new Gain({context:this.context}),this._feedbackR=new Gain({context:this.context}),this._feedbackSplit=new Split({context:this.context,channels:2}),this._feedbackMerge=new Merge({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),readOnly(this,["feedback"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Chorus extends StereoFeedbackEffect{constructor(){super(optionsFromArguments(Chorus.getDefaults(),arguments,["frequency","delayTime","depth"])),this.name="Chorus";const ee=optionsFromArguments(Chorus.getDefaults(),arguments,["frequency","delayTime","depth"]);this._depth=ee.depth,this._delayTime=ee.delayTime/1e3,this._lfoL=new LFO({context:this.context,frequency:ee.frequency,min:0,max:1}),this._lfoR=new LFO({context:this.context,frequency:ee.frequency,min:0,max:1,phase:180}),this._delayNodeL=new Delay({context:this.context}),this._delayNodeR=new Delay({context:this.context}),this.frequency=this._lfoL.frequency,readOnly(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=ee.type,this.spread=ee.spread}static getDefaults(){return Object.assign(StereoFeedbackEffect.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(ee){this._depth=ee;const ne=this._delayTime*ee;this._lfoL.min=Math.max(this._delayTime-ne,0),this._lfoL.max=this._delayTime+ne,this._lfoR.min=Math.max(this._delayTime-ne,0),this._lfoR.max=this._delayTime+ne}get delayTime(){return this._delayTime*1e3}set delayTime(ee){this._delayTime=ee/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(ee){this._lfoL.type=ee,this._lfoR.type=ee}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(ee){this._lfoL.phase=90-ee/2,this._lfoR.phase=ee/2+90}start(ee){return this._lfoL.start(ee),this._lfoR.start(ee),this}stop(ee){return this._lfoL.stop(ee),this._lfoR.stop(ee),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Distortion extends Effect{constructor(){super(optionsFromArguments(Distortion.getDefaults(),arguments,["distortion"])),this.name="Distortion";const ee=optionsFromArguments(Distortion.getDefaults(),arguments,["distortion"]);this._shaper=new WaveShaper({context:this.context,length:4096}),this._distortion=ee.distortion,this.connectEffect(this._shaper),this.distortion=ee.distortion,this.oversample=ee.oversample}static getDefaults(){return Object.assign(Effect.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(ee){this._distortion=ee;const ne=ee*100,ae=Math.PI/180;this._shaper.setMap(ce=>Math.abs(ce)<.001?0:(3+ne)*ce*20*ae/(Math.PI+ne*Math.abs(ce)))}get oversample(){return this._shaper.oversample}set oversample(ee){this._shaper.oversample=ee}dispose(){return super.dispose(),this._shaper.dispose(),this}}class FeedbackEffect extends Effect{constructor(ee){super(ee),this.name="FeedbackEffect",this._feedbackGain=new Gain({context:this.context,gain:ee.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,readOnly(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Effect.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class FeedbackDelay extends FeedbackEffect{constructor(){super(optionsFromArguments(FeedbackDelay.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";const ee=optionsFromArguments(FeedbackDelay.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new Delay({context:this.context,delayTime:ee.delayTime,maxDelay:ee.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),readOnly(this,"delayTime")}static getDefaults(){return Object.assign(FeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class PhaseShiftAllpass extends ToneAudioNode{constructor(ee){super(ee),this.name="PhaseShiftAllpass",this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.offset90=new Gain({context:this.context});const ne=[.6923878,.9360654322959,.988229522686,.9987488452737],ae=[.4021921162426,.856171088242,.9722909545651,.9952884791278];this._bank0=this._createAllPassFilterBank(ne),this._bank1=this._createAllPassFilterBank(ae),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),connectSeries(this.input,...this._bank0,this._oneSampleDelay,this.output),connectSeries(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(ee){return ee.map(ae=>{const ce=[[ae*ae,0,-1],[1,0,-(ae*ae)]];return this.context.createIIRFilter(ce[0],ce[1])})}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(ee=>ee.disconnect()),this._bank1.forEach(ee=>ee.disconnect()),this._oneSampleDelay.disconnect(),this}}class FrequencyShifter extends Effect{constructor(){super(optionsFromArguments(FrequencyShifter.getDefaults(),arguments,["frequency"])),this.name="FrequencyShifter";const ee=optionsFromArguments(FrequencyShifter.getDefaults(),arguments,["frequency"]);this.frequency=new Signal({context:this.context,units:"frequency",value:ee.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new ToneOscillatorNode({context:this.context,type:"sine"}),this._cosine=new Oscillator({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new Multiply({context:this.context}),this._cosineMultiply=new Multiply({context:this.context}),this._negate=new Negate({context:this.context}),this._add=new Add({context:this.context}),this._phaseShifter=new PhaseShiftAllpass({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const ne=this.immediate();this._sine.start(ne),this._cosine.start(ne)}static getDefaults(){return Object.assign(Effect.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const combFilterTunings=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],allpassFilterFrequencies=[225,556,441,341];class Freeverb extends StereoEffect{constructor(){super(optionsFromArguments(Freeverb.getDefaults(),arguments,["roomSize","dampening"])),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];const ee=optionsFromArguments(Freeverb.getDefaults(),arguments,["roomSize","dampening"]);this.roomSize=new Signal({context:this.context,value:ee.roomSize,units:"normalRange"}),this._allpassFiltersL=allpassFilterFrequencies.map(ne=>{const ae=this.context.createBiquadFilter();return ae.type="allpass",ae.frequency.value=ne,ae}),this._allpassFiltersR=allpassFilterFrequencies.map(ne=>{const ae=this.context.createBiquadFilter();return ae.type="allpass",ae.frequency.value=ne,ae}),this._combFilters=combFilterTunings.map((ne,ae)=>{const ce=new LowpassCombFilter({context:this.context,dampening:ee.dampening,delayTime:ne});return ae<combFilterTunings.length/2?this.connectEffectLeft(ce,...this._allpassFiltersL):this.connectEffectRight(ce,...this._allpassFiltersR),this.roomSize.connect(ce.resonance),ce}),readOnly(this,["roomSize"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(ee){this._combFilters.forEach(ne=>ne.dampening=ee)}dispose(){return super.dispose(),this._allpassFiltersL.forEach(ee=>ee.disconnect()),this._allpassFiltersR.forEach(ee=>ee.disconnect()),this._combFilters.forEach(ee=>ee.dispose()),this.roomSize.dispose(),this}}const combFilterDelayTimes=[1687/25e3,1601/25e3,2053/25e3,2251/25e3],combFilterResonances=[.773,.802,.753,.733],allpassFilterFreqs=[347,113,37];class JCReverb extends StereoEffect{constructor(){super(optionsFromArguments(JCReverb.getDefaults(),arguments,["roomSize"])),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[];const ee=optionsFromArguments(JCReverb.getDefaults(),arguments,["roomSize"]);this.roomSize=new Signal({context:this.context,value:ee.roomSize,units:"normalRange"}),this._scaleRoomSize=new Scale({context:this.context,min:-.733,max:.197}),this._allpassFilters=allpassFilterFreqs.map(ne=>{const ae=this.context.createBiquadFilter();return ae.type="allpass",ae.frequency.value=ne,ae}),this._feedbackCombFilters=combFilterDelayTimes.map((ne,ae)=>{const ce=new FeedbackCombFilter({context:this.context,delayTime:ne});return this._scaleRoomSize.connect(ce.resonance),ce.resonance.value=combFilterResonances[ae],ae<combFilterDelayTimes.length/2?this.connectEffectLeft(...this._allpassFilters,ce):this.connectEffectRight(...this._allpassFilters,ce),ce}),this.roomSize.connect(this._scaleRoomSize),readOnly(this,["roomSize"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(ee=>ee.disconnect()),this._feedbackCombFilters.forEach(ee=>ee.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class StereoXFeedbackEffect extends StereoFeedbackEffect{constructor(ee){super(ee),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),readOnly(this,["feedback"])}}class PingPongDelay extends StereoXFeedbackEffect{constructor(){super(optionsFromArguments(PingPongDelay.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";const ee=optionsFromArguments(PingPongDelay.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new Delay({context:this.context,maxDelay:ee.maxDelay}),this._rightDelay=new Delay({context:this.context,maxDelay:ee.maxDelay}),this._rightPreDelay=new Delay({context:this.context,maxDelay:ee.maxDelay}),this.delayTime=new Signal({context:this.context,units:"time",value:ee.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),readOnly(this,["delayTime"])}static getDefaults(){return Object.assign(StereoXFeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class PitchShift extends FeedbackEffect{constructor(){super(optionsFromArguments(PitchShift.getDefaults(),arguments,["pitch"])),this.name="PitchShift";const ee=optionsFromArguments(PitchShift.getDefaults(),arguments,["pitch"]);this._frequency=new Signal({context:this.context}),this._delayA=new Delay({maxDelay:1,context:this.context}),this._lfoA=new LFO({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new Delay({maxDelay:1,context:this.context}),this._lfoB=new LFO({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new CrossFade({context:this.context}),this._crossFadeLFO=new LFO({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new Delay({delayTime:ee.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,readOnly(this,"delayTime"),this._pitch=ee.pitch,this._windowSize=ee.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const ne=this.now();this._lfoA.start(ne),this._lfoB.start(ne),this._crossFadeLFO.start(ne),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(FeedbackEffect.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(ee){this._pitch=ee;let ne=0;ee<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,ne=intervalToFrequencyRatio(ee-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,ne=intervalToFrequencyRatio(ee)-1),this._frequency.value=ne*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(ee){this._windowSize=this.toSeconds(ee),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class Phaser extends StereoEffect{constructor(){super(optionsFromArguments(Phaser.getDefaults(),arguments,["frequency","octaves","baseFrequency"])),this.name="Phaser";const ee=optionsFromArguments(Phaser.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);this._lfoL=new LFO({context:this.context,frequency:ee.frequency,min:0,max:1}),this._lfoR=new LFO({context:this.context,frequency:ee.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(ee.baseFrequency),this._octaves=ee.octaves,this.Q=new Signal({context:this.context,value:ee.Q,units:"positive"}),this._filtersL=this._makeFilters(ee.stages,this._lfoL),this._filtersR=this._makeFilters(ee.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=ee.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=ee.baseFrequency,this.octaves=ee.octaves,this._lfoL.start(),this._lfoR.start(),readOnly(this,["frequency","Q"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(ee,ne){const ae=[];for(let ce=0;ce<ee;ce++){const le=this.context.createBiquadFilter();le.type="allpass",this.Q.connect(le.Q),ne.connect(le.frequency),ae.push(le)}return ae}get octaves(){return this._octaves}set octaves(ee){this._octaves=ee;const ne=this._baseFrequency*Math.pow(2,ee);this._lfoL.max=ne,this._lfoR.max=ne}get baseFrequency(){return this._baseFrequency}set baseFrequency(ee){this._baseFrequency=this.toFrequency(ee),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(ee=>ee.disconnect()),this._filtersR.forEach(ee=>ee.disconnect()),this.frequency.dispose(),this}}class Reverb extends Effect{constructor(){super(optionsFromArguments(Reverb.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const ee=optionsFromArguments(Reverb.getDefaults(),arguments,["decay"]);this._decay=ee.decay,this._preDelay=ee.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Effect.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(ee){ee=this.toSeconds(ee),assertRange(ee,.001),this._decay=ee,this.generate()}get preDelay(){return this._preDelay}set preDelay(ee){ee=this.toSeconds(ee),assertRange(ee,0),this._preDelay=ee,this.generate()}generate(){return __awaiter$1(this,void 0,void 0,function*(){const ee=this.ready,ne=new OfflineContext(2,this._decay+this._preDelay,this.context.sampleRate),ae=new Noise({context:ne}),ce=new Noise({context:ne}),le=new Merge({context:ne});ae.connect(le,0,0),ce.connect(le,0,1);const ue=new Gain({context:ne}).toDestination();le.connect(ue),ae.start(0),ce.start(0),ue.gain.setValueAtTime(0,0),ue.gain.setValueAtTime(1,this._preDelay),ue.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const he=ne.render();return this.ready=he.then(noOp),yield ee,this._convolver.buffer=(yield he).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class MidSideSplit extends ToneAudioNode{constructor(){super(optionsFromArguments(MidSideSplit.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new Split({channels:2,context:this.context}),this._midAdd=new Add({context:this.context}),this.mid=new Multiply({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new Subtract({context:this.context}),this.side=new Multiply({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class MidSideMerge extends ToneAudioNode{constructor(){super(optionsFromArguments(MidSideMerge.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new Gain({context:this.context}),this.side=new Gain({context:this.context}),this._left=new Add({context:this.context}),this._leftMult=new Multiply({context:this.context,value:Math.SQRT1_2}),this._right=new Subtract({context:this.context}),this._rightMult=new Multiply({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new Merge({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class MidSideEffect extends Effect{constructor(ee){super(ee),this.name="MidSideEffect",this._midSideMerge=new MidSideMerge({context:this.context}),this._midSideSplit=new MidSideSplit({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...ee){this._midSend.chain(...ee,this._midReturn)}connectEffectSide(...ee){this._sideSend.chain(...ee,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class StereoWidener extends MidSideEffect{constructor(){super(optionsFromArguments(StereoWidener.getDefaults(),arguments,["width"])),this.name="StereoWidener";const ee=optionsFromArguments(StereoWidener.getDefaults(),arguments,["width"]);this.width=new Signal({context:this.context,value:ee.width,units:"normalRange"}),readOnly(this,["width"]),this._twoTimesWidthMid=new Multiply({context:this.context,value:2}),this._twoTimesWidthSide=new Multiply({context:this.context,value:2}),this._midMult=new Multiply({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new Subtract({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),connect(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new Multiply({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(MidSideEffect.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class Tremolo extends StereoEffect{constructor(){super(optionsFromArguments(Tremolo.getDefaults(),arguments,["frequency","depth"])),this.name="Tremolo";const ee=optionsFromArguments(Tremolo.getDefaults(),arguments,["frequency","depth"]);this._lfoL=new LFO({context:this.context,type:ee.type,min:1,max:0}),this._lfoR=new LFO({context:this.context,type:ee.type,min:1,max:0}),this._amplitudeL=new Gain({context:this.context}),this._amplitudeR=new Gain({context:this.context}),this.frequency=new Signal({context:this.context,value:ee.frequency,units:"frequency"}),this.depth=new Signal({context:this.context,value:ee.depth,units:"normalRange"}),readOnly(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=ee.spread}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(ee){return this._lfoL.start(ee),this._lfoR.start(ee),this}stop(ee){return this._lfoL.stop(ee),this._lfoR.stop(ee),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(ee){this._lfoL.type=ee,this._lfoR.type=ee}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(ee){this._lfoL.phase=90-ee/2,this._lfoR.phase=ee/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Vibrato extends Effect{constructor(){super(optionsFromArguments(Vibrato.getDefaults(),arguments,["frequency","depth"])),this.name="Vibrato";const ee=optionsFromArguments(Vibrato.getDefaults(),arguments,["frequency","depth"]);this._delayNode=new Delay({context:this.context,delayTime:0,maxDelay:ee.maxDelay}),this._lfo=new LFO({context:this.context,type:ee.type,min:0,max:ee.maxDelay,frequency:ee.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=ee.depth,readOnly(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(Effect.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(ee){this._lfo.type=ee}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Analyser extends ToneAudioNode{constructor(){super(optionsFromArguments(Analyser.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const ee=optionsFromArguments(Analyser.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new Gain({context:this.context}),this._split=new Split({context:this.context,channels:ee.channels}),this.input.connect(this._split),assertRange(ee.channels,1);for(let ne=0;ne<ee.channels;ne++)this._analysers[ne]=this.context.createAnalyser(),this._split.connect(this._analysers[ne],ne,0);this.size=ee.size,this.type=ee.type}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((ee,ne)=>{const ae=this._buffers[ne];this._type==="fft"?ee.getFloatFrequencyData(ae):this._type==="waveform"&&ee.getFloatTimeDomainData(ae)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(ee){this._analysers.forEach((ne,ae)=>{ne.fftSize=ee*2,this._buffers[ae]=new Float32Array(ee)})}get channels(){return this._analysers.length}get type(){return this._type}set type(ee){assert(ee==="waveform"||ee==="fft",`Analyser: invalid type: ${ee}`),this._type=ee}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(ee){this._analysers.forEach(ne=>ne.smoothingTimeConstant=ee)}dispose(){return super.dispose(),this._analysers.forEach(ee=>ee.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class MeterBase extends ToneAudioNode{constructor(){super(optionsFromArguments(MeterBase.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Analyser({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Meter extends MeterBase{constructor(){super(optionsFromArguments(Meter.getDefaults(),arguments,["smoothing"])),this.name="Meter",this._rms=0;const ee=optionsFromArguments(Meter.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new Analyser({context:this.context,size:256,type:"waveform",channels:ee.channels}),this.smoothing=ee.smoothing,this.normalRange=ee.normalRange}static getDefaults(){return Object.assign(MeterBase.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}getLevel(){return warn("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const ee=this._analyser.getValue(),ae=(this.channels===1?[ee]:ee).map(ce=>{const le=ce.reduce((he,fe)=>he+fe*fe,0),ue=Math.sqrt(le/ce.length);return this._rms=Math.max(ue,this._rms*this.smoothing),this.normalRange?this._rms:gainToDb(this._rms)});return this.channels===1?ae[0]:ae}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}let FFT$1=class fc extends MeterBase{constructor(){super(optionsFromArguments(fc.getDefaults(),arguments,["size"])),this.name="FFT";const ee=optionsFromArguments(fc.getDefaults(),arguments,["size"]);this.normalRange=ee.normalRange,this._analyser.type="fft",this.size=ee.size}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(ne=>this.normalRange?dbToGain(ne):ne)}get size(){return this._analyser.size}set size(ee){this._analyser.size=ee}get smoothing(){return this._analyser.smoothing}set smoothing(ee){this._analyser.smoothing=ee}getFrequencyOfIndex(ee){return assert(0<=ee&&ee<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),ee*this.context.sampleRate/(this.size*2)}};class DCMeter extends MeterBase{constructor(){super(optionsFromArguments(DCMeter.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class Waveform extends MeterBase{constructor(){super(optionsFromArguments(Waveform.getDefaults(),arguments,["size"])),this.name="Waveform";const ee=optionsFromArguments(Waveform.getDefaults(),arguments,["size"]);this._analyser.type="waveform",this.size=ee.size}static getDefaults(){return Object.assign(MeterBase.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(ee){this._analyser.size=ee}}class Solo extends ToneAudioNode{constructor(){super(optionsFromArguments(Solo.getDefaults(),arguments,["solo"])),this.name="Solo";const ee=optionsFromArguments(Solo.getDefaults(),arguments,["solo"]);this.input=this.output=new Gain({context:this.context}),Solo._allSolos.has(this.context)||Solo._allSolos.set(this.context,new Set),Solo._allSolos.get(this.context).add(this),this.solo=ee.solo}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(ee){ee?this._addSolo():this._removeSolo(),Solo._allSolos.get(this.context).forEach(ne=>ne._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Solo._soloed.has(this.context)||Solo._soloed.set(this.context,new Set),Solo._soloed.get(this.context).add(this)}_removeSolo(){Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).delete(this)}_isSoloed(){return Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).has(this)}_noSolos(){return!Solo._soloed.has(this.context)||Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Solo._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Solo._allSolos=new Map;Solo._soloed=new Map;class PanVol extends ToneAudioNode{constructor(){super(optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const ee=optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Panner({context:this.context,pan:ee.pan,channelCount:ee.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Volume({context:this.context,volume:ee.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=ee.mute,readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(ee){this._volume.mute=ee}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Channel extends ToneAudioNode{constructor(){super(optionsFromArguments(Channel.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const ee=optionsFromArguments(Channel.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Solo({solo:ee.solo,context:this.context}),this._panVol=this.output=new PanVol({context:this.context,pan:ee.pan,volume:ee.volume,mute:ee.mute,channelCount:ee.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(ee){this._solo.solo=ee}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(ee){this._panVol.mute=ee}_getBus(ee){return Channel.buses.has(ee)||Channel.buses.set(ee,new Gain({context:this.context})),Channel.buses.get(ee)}send(ee,ne=0){const ae=this._getBus(ee),ce=new Gain({context:this.context,units:"decibels",gain:ne});return this.connect(ce),ce.connect(ae),ce}receive(ee){return this._getBus(ee).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Channel.buses=new Map;class Mono extends ToneAudioNode{constructor(){super(optionsFromArguments(Mono.getDefaults(),arguments)),this.name="Mono",this.input=new Gain({context:this.context}),this._merge=this.output=new Merge({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class MultibandSplit extends ToneAudioNode{constructor(){super(optionsFromArguments(MultibandSplit.getDefaults(),arguments,["lowFrequency","highFrequency"])),this.name="MultibandSplit",this.input=new Gain({context:this.context}),this.output=void 0,this.low=new Filter({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Filter({context:this.context,frequency:0,type:"highpass"}),this.mid=new Filter({context:this.context,frequency:0,type:"lowpass"}),this.high=new Filter({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high];const ee=optionsFromArguments(MultibandSplit.getDefaults(),arguments,["lowFrequency","highFrequency"]);this.lowFrequency=new Signal({context:this.context,units:"frequency",value:ee.lowFrequency}),this.highFrequency=new Signal({context:this.context,units:"frequency",value:ee.highFrequency}),this.Q=new Signal({context:this.context,units:"positive",value:ee.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),readOnly(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),writable(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}let Listener$1=class extends ToneAudioNode{constructor(){super(...arguments),this.name="Listener",this.positionX=new Param({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Param({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Param({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Param({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Param({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Param({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Param({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Param({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Param({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}};onContextInit(re=>{re.listener=new Listener$1({context:re})});onContextClose(re=>{re.listener.dispose()});class Panner3D extends ToneAudioNode{constructor(){super(optionsFromArguments(Panner3D.getDefaults(),arguments,["positionX","positionY","positionZ"])),this.name="Panner3D";const ee=optionsFromArguments(Panner3D.getDefaults(),arguments,["positionX","positionY","positionZ"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=ee.panningModel,this.maxDistance=ee.maxDistance,this.distanceModel=ee.distanceModel,this.coneOuterGain=ee.coneOuterGain,this.coneOuterAngle=ee.coneOuterAngle,this.coneInnerAngle=ee.coneInnerAngle,this.refDistance=ee.refDistance,this.rolloffFactor=ee.rolloffFactor,this.positionX=new Param({context:this.context,param:this._panner.positionX,value:ee.positionX}),this.positionY=new Param({context:this.context,param:this._panner.positionY,value:ee.positionY}),this.positionZ=new Param({context:this.context,param:this._panner.positionZ,value:ee.positionZ}),this.orientationX=new Param({context:this.context,param:this._panner.orientationX,value:ee.orientationX}),this.orientationY=new Param({context:this.context,param:this._panner.orientationY,value:ee.orientationY}),this.orientationZ=new Param({context:this.context,param:this._panner.orientationZ,value:ee.orientationZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(ee,ne,ae){return this.positionX.value=ee,this.positionY.value=ne,this.positionZ.value=ae,this}setOrientation(ee,ne,ae){return this.orientationX.value=ee,this.orientationY.value=ne,this.orientationZ.value=ae,this}get panningModel(){return this._panner.panningModel}set panningModel(ee){this._panner.panningModel=ee}get refDistance(){return this._panner.refDistance}set refDistance(ee){this._panner.refDistance=ee}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(ee){this._panner.rolloffFactor=ee}get distanceModel(){return this._panner.distanceModel}set distanceModel(ee){this._panner.distanceModel=ee}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(ee){this._panner.coneInnerAngle=ee}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(ee){this._panner.coneOuterAngle=ee}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(ee){this._panner.coneOuterGain=ee}get maxDistance(){return this._panner.maxDistance}set maxDistance(ee){this._panner.maxDistance=ee}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class Recorder extends ToneAudioNode{constructor(){super(optionsFromArguments(Recorder.getDefaults(),arguments)),this.name="Recorder";const ee=optionsFromArguments(Recorder.getDefaults(),arguments);this.input=new Gain({context:this.context}),assert(Recorder.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:ee.mimeType})}static getDefaults(){return ToneAudioNode.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return theWindow!==null&&Reflect.has(theWindow,"MediaRecorder")}get state(){return this._recorder.state==="inactive"?"stopped":this._recorder.state==="paused"?"paused":"started"}start(){return __awaiter$1(this,void 0,void 0,function*(){assert(this.state!=="started","Recorder is already started");const ee=new Promise(ne=>{const ae=()=>{this._recorder.removeEventListener("start",ae,!1),ne()};this._recorder.addEventListener("start",ae,!1)});return this._recorder.start(),yield ee})}stop(){return __awaiter$1(this,void 0,void 0,function*(){assert(this.state!=="stopped","Recorder is not started");const ee=new Promise(ne=>{const ae=ce=>{this._recorder.removeEventListener("dataavailable",ae,!1),ne(ce.data)};this._recorder.addEventListener("dataavailable",ae,!1)});return this._recorder.stop(),yield ee})}pause(){return assert(this.state==="started","Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}let Compressor$1=class mc extends ToneAudioNode{constructor(){super(optionsFromArguments(mc.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const ee=optionsFromArguments(mc.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new Param({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:ee.threshold}),this.attack=new Param({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:ee.attack}),this.release=new Param({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:ee.release}),this.knee=new Param({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:ee.knee}),this.ratio=new Param({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:ee.ratio}),readOnly(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}};class Gate extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Gate.getDefaults(),arguments,["threshold","smoothing"]))),this.name="Gate";const ee=optionsFromArguments(Gate.getDefaults(),arguments,["threshold","smoothing"]);this._follower=new Follower({context:this.context,smoothing:ee.smoothing}),this._gt=new GreaterThan({context:this.context,value:dbToGain(ee.threshold)}),this.input=new Gain({context:this.context}),this._gate=this.output=new Gain({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return gainToDb(this._gt.value)}set threshold(ee){this._gt.value=dbToGain(ee)}get smoothing(){return this._follower.smoothing}set smoothing(ee){this._follower.smoothing=ee}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class Limiter extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Limiter.getDefaults(),arguments,["threshold"]))),this.name="Limiter";const ee=optionsFromArguments(Limiter.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new Compressor$1({context:this.context,ratio:20,attack:.003,release:.01,threshold:ee.threshold}),this.threshold=this._compressor.threshold,readOnly(this,"threshold")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class MidSideCompressor extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(MidSideCompressor.getDefaults(),arguments))),this.name="MidSideCompressor";const ee=optionsFromArguments(MidSideCompressor.getDefaults(),arguments);this._midSideSplit=this.input=new MidSideSplit({context:this.context}),this._midSideMerge=this.output=new MidSideMerge({context:this.context}),this.mid=new Compressor$1(Object.assign(ee.mid,{context:this.context})),this.side=new Compressor$1(Object.assign(ee.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),readOnly(this,["mid","side"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class MultibandCompressor extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(MultibandCompressor.getDefaults(),arguments))),this.name="MultibandCompressor";const ee=optionsFromArguments(MultibandCompressor.getDefaults(),arguments);this._splitter=this.input=new MultibandSplit({context:this.context,lowFrequency:ee.lowFrequency,highFrequency:ee.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new Gain({context:this.context}),this.low=new Compressor$1(Object.assign(ee.low,{context:this.context})),this.mid=new Compressor$1(Object.assign(ee.mid,{context:this.context})),this.high=new Compressor$1(Object.assign(ee.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),readOnly(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class EQ3 extends ToneAudioNode{constructor(){super(optionsFromArguments(EQ3.getDefaults(),arguments,["low","mid","high"])),this.name="EQ3",this.output=new Gain({context:this.context}),this._internalChannels=[];const ee=optionsFromArguments(EQ3.getDefaults(),arguments,["low","mid","high"]);this.input=this._multibandSplit=new MultibandSplit({context:this.context,highFrequency:ee.highFrequency,lowFrequency:ee.lowFrequency}),this._lowGain=new Gain({context:this.context,gain:ee.low,units:"decibels"}),this._midGain=new Gain({context:this.context,gain:ee.mid,units:"decibels"}),this._highGain=new Gain({context:this.context,gain:ee.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),readOnly(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),writable(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class Convolver extends ToneAudioNode{constructor(){super(optionsFromArguments(Convolver.getDefaults(),arguments,["url","onload"])),this.name="Convolver",this._convolver=this.context.createConvolver();const ee=optionsFromArguments(Convolver.getDefaults(),arguments,["url","onload"]);this._buffer=new ToneAudioBuffer(ee.url,ne=>{this.buffer=ne,ee.onload()}),this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=ee.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{normalize:!0,onload:noOp})}load(ee){return __awaiter$1(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(ee)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(ee){ee&&this._buffer.set(ee),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const ne=this._buffer.get();this._convolver.buffer=ne||null}get normalize(){return this._convolver.normalize}set normalize(ee){this._convolver.normalize=ee}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function now(){return getContext().now()}function immediate(){return getContext().immediate()}const Transport=getContext().transport;function getTransport(){return getContext().transport}const Destination=getContext().destination,Master=getContext().destination;function getDestination(){return getContext().destination}const Listener=getContext().listener;function getListener(){return getContext().listener}const Draw=getContext().draw;function getDraw(){return getContext().draw}const context=getContext();function loaded(){return ToneAudioBuffer.loaded()}const Buffer$1=ToneAudioBuffer,Buffers=ToneAudioBuffers,BufferSource=ToneBufferSource,Tone=Object.freeze(Object.defineProperty({__proto__:null,AMOscillator,AMSynth,Abs,Add,AmplitudeEnvelope,Analyser,AudioToGain,AutoFilter,AutoPanner,AutoWah,BaseContext,BiquadFilter,BitCrusher,Buffer:Buffer$1,BufferSource,Buffers,Channel,Chebyshev,Chorus,Clock,Compressor:Compressor$1,Context,Convolver,CrossFade,DCMeter,Delay,Destination,Distortion,Draw,DuoSynth,EQ3,Emitter,Envelope,FFT:FFT$1,FMOscillator,FMSynth,FatOscillator,FeedbackCombFilter,FeedbackDelay,Filter,Follower,Freeverb,Frequency,FrequencyClass,FrequencyEnvelope,FrequencyShifter,Gain,GainToAudio,Gate,GrainPlayer,GreaterThan,GreaterThanZero,IntervalTimeline,JCReverb,LFO,Limiter,Listener,Loop,LowpassCombFilter,Master,MembraneSynth,Merge,MetalSynth,Meter,MidSideCompressor,MidSideMerge,MidSideSplit,Midi:Midi$1,MidiClass,Mono,MonoSynth,MultibandCompressor,MultibandSplit,Multiply,Negate,Noise,NoiseSynth,Offline,OfflineContext,OmniOscillator,OnePoleFilter,Oscillator,PWMOscillator,PanVol,Panner,Panner3D,Param,Part,Pattern,Phaser,PingPongDelay,PitchShift,Player:Player$1,Players,PluckSynth,PolySynth,Pow,PulseOscillator,Recorder,Reverb,Sampler,Scale,ScaleExp,Sequence,Signal,Solo,Split,StateTimeline,StereoWidener,Subtract,SyncedSignal,Synth,Ticks,TicksClass,Time,TimeClass,Timeline,ToneAudioBuffer,ToneAudioBuffers,ToneAudioNode,ToneBufferSource,ToneEvent,ToneOscillatorNode,Transport,TransportTime,TransportTimeClass,Tremolo,Unit:Units,UserMedia,Vibrato,Volume,WaveShaper,Waveform,Zero,connect,connectSeries,connectSignal,context,dbToGain,debug:Debug,defaultArg,disconnect,ftom,gainToDb,getContext,getDestination,getDraw,getListener,getTransport,immediate,intervalToFrequencyRatio,isArray:isArray$8,isBoolean:isBoolean$1,isDefined,isFunction:isFunction$2,isNote,isNumber:isNumber$2,isObject:isObject$4,isString:isString$1,isUndef,loaded,mtof,now,optionsFromArguments,setContext,start,supported:isSupported,version},Symbol.toStringTag,{value:"Module"}));var Midi={},midiFile={};function parseMidi(re){var ee=new Parser(re),ne=ee.readChunk();if(ne.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+ne.id+"'";for(var ae=parseHeader(ne.data),ce=[],le=0;!ee.eof()&&le<ae.numTracks;le++){var ue=ee.readChunk();if(ue.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+ue.id+"'";var he=parseTrack(ue.data);ce.push(he)}return{header:ae,tracks:ce}}function parseHeader(re){var ee=new Parser(re),ne=ee.readUInt16(),ae=ee.readUInt16(),ce={format:ne,numTracks:ae},le=ee.readUInt16();return le&32768?(ce.framesPerSecond=256-(le>>8),ce.ticksPerFrame=le&255):ce.ticksPerBeat=le,ce}function parseTrack(re){for(var ee=new Parser(re),ne=[];!ee.eof();){var ae=le();ne.push(ae)}return ne;var ce;function le(){var ue={};ue.deltaTime=ee.readVarInt();var he=ee.readUInt8();if((he&240)===240)if(he===255){ue.meta=!0;var fe=ee.readUInt8(),me=ee.readVarInt();switch(fe){case 0:if(ue.type="sequenceNumber",me!==2)throw"Expected length for sequenceNumber event is 2, got "+me;return ue.number=ee.readUInt16(),ue;case 1:return ue.type="text",ue.text=ee.readString(me),ue;case 2:return ue.type="copyrightNotice",ue.text=ee.readString(me),ue;case 3:return ue.type="trackName",ue.text=ee.readString(me),ue;case 4:return ue.type="instrumentName",ue.text=ee.readString(me),ue;case 5:return ue.type="lyrics",ue.text=ee.readString(me),ue;case 6:return ue.type="marker",ue.text=ee.readString(me),ue;case 7:return ue.type="cuePoint",ue.text=ee.readString(me),ue;case 32:if(ue.type="channelPrefix",me!=1)throw"Expected length for channelPrefix event is 1, got "+me;return ue.channel=ee.readUInt8(),ue;case 33:if(ue.type="portPrefix",me!=1)throw"Expected length for portPrefix event is 1, got "+me;return ue.port=ee.readUInt8(),ue;case 47:if(ue.type="endOfTrack",me!=0)throw"Expected length for endOfTrack event is 0, got "+me;return ue;case 81:if(ue.type="setTempo",me!=3)throw"Expected length for setTempo event is 3, got "+me;return ue.microsecondsPerBeat=ee.readUInt24(),ue;case 84:if(ue.type="smpteOffset",me!=5)throw"Expected length for smpteOffset event is 5, got "+me;var ge=ee.readUInt8(),ve={0:24,32:25,64:29,96:30};return ue.frameRate=ve[ge&96],ue.hour=ge&31,ue.min=ee.readUInt8(),ue.sec=ee.readUInt8(),ue.frame=ee.readUInt8(),ue.subFrame=ee.readUInt8(),ue;case 88:if(ue.type="timeSignature",me!=2&&me!=4)throw"Expected length for timeSignature event is 4 or 2, got "+me;return ue.numerator=ee.readUInt8(),ue.denominator=1<<ee.readUInt8(),me===4?(ue.metronome=ee.readUInt8(),ue.thirtyseconds=ee.readUInt8()):(ue.metronome=36,ue.thirtyseconds=8),ue;case 89:if(ue.type="keySignature",me!=2)throw"Expected length for keySignature event is 2, got "+me;return ue.key=ee.readInt8(),ue.scale=ee.readUInt8(),ue;case 127:return ue.type="sequencerSpecific",ue.data=ee.readBytes(me),ue;default:return ue.type="unknownMeta",ue.data=ee.readBytes(me),ue.metatypeByte=fe,ue}}else if(he==240){ue.type="sysEx";var me=ee.readVarInt();return ue.data=ee.readBytes(me),ue}else if(he==247){ue.type="endSysEx";var me=ee.readVarInt();return ue.data=ee.readBytes(me),ue}else throw"Unrecognised MIDI event type byte: "+he;else{var ye;if(he&128)ye=ee.readUInt8(),ce=he;else{if(ce===null)throw"Running status byte encountered before status byte";ye=he,he=ce,ue.running=!0}var be=he>>4;switch(ue.channel=he&15,be){case 8:return ue.type="noteOff",ue.noteNumber=ye,ue.velocity=ee.readUInt8(),ue;case 9:var Ee=ee.readUInt8();return ue.type=Ee===0?"noteOff":"noteOn",ue.noteNumber=ye,ue.velocity=Ee,Ee===0&&(ue.byte9=!0),ue;case 10:return ue.type="noteAftertouch",ue.noteNumber=ye,ue.amount=ee.readUInt8(),ue;case 11:return ue.type="controller",ue.controllerType=ye,ue.value=ee.readUInt8(),ue;case 12:return ue.type="programChange",ue.programNumber=ye,ue;case 13:return ue.type="channelAftertouch",ue.amount=ye,ue;case 14:return ue.type="pitchBend",ue.value=ye+(ee.readUInt8()<<7)-8192,ue;default:throw"Unrecognised MIDI event type: "+be}}}}function Parser(re){this.buffer=re,this.bufferLen=this.buffer.length,this.pos=0}Parser.prototype.eof=function(){return this.pos>=this.bufferLen};Parser.prototype.readUInt8=function(){var re=this.buffer[this.pos];return this.pos+=1,re};Parser.prototype.readInt8=function(){var re=this.readUInt8();return re&128?re-256:re};Parser.prototype.readUInt16=function(){var re=this.readUInt8(),ee=this.readUInt8();return(re<<8)+ee};Parser.prototype.readInt16=function(){var re=this.readUInt16();return re&32768?re-65536:re};Parser.prototype.readUInt24=function(){var re=this.readUInt8(),ee=this.readUInt8(),ne=this.readUInt8();return(re<<16)+(ee<<8)+ne};Parser.prototype.readInt24=function(){var re=this.readUInt24();return re&8388608?re-16777216:re};Parser.prototype.readUInt32=function(){var re=this.readUInt8(),ee=this.readUInt8(),ne=this.readUInt8(),ae=this.readUInt8();return(re<<24)+(ee<<16)+(ne<<8)+ae};Parser.prototype.readBytes=function(re){var ee=this.buffer.slice(this.pos,this.pos+re);return this.pos+=re,ee};Parser.prototype.readString=function(re){var ee=this.readBytes(re);return String.fromCharCode.apply(null,ee)};Parser.prototype.readVarInt=function(){for(var re=0;!this.eof();){var ee=this.readUInt8();if(ee&128)re+=ee&127,re<<=7;else return re+ee}return re};Parser.prototype.readChunk=function(){var re=this.readString(4),ee=this.readUInt32(),ne=this.readBytes(ee);return{id:re,length:ee,data:ne}};var midiParser=parseMidi;function writeMidi(re,ee){if(typeof re!="object")throw"Invalid MIDI data";ee=ee||{};var ne=re.header||{},ae=re.tracks||[],ce,le=ae.length,ue=new Writer;for(writeHeader(ue,ne,le),ce=0;ce<le;ce++)writeTrack(ue,ae[ce],ee);return ue.buffer}function writeHeader(re,ee,ne){var ae=ee.format==null?1:ee.format,ce=128;ee.timeDivision?ce=ee.timeDivision:ee.ticksPerFrame&&ee.framesPerSecond?ce=-(ee.framesPerSecond&255)<<8|ee.ticksPerFrame&255:ee.ticksPerBeat&&(ce=ee.ticksPerBeat&32767);var le=new Writer;le.writeUInt16(ae),le.writeUInt16(ne),le.writeUInt16(ce),re.writeChunk("MThd",le.buffer)}function writeTrack(re,ee,ne){var ae=new Writer,ce,le=ee.length,ue=null;for(ce=0;ce<le;ce++)(ne.running===!1||!ne.running&&!ee[ce].running)&&(ue=null),ue=writeEvent(ae,ee[ce],ue,ne.useByte9ForNoteOff);re.writeChunk("MTrk",ae.buffer)}function writeEvent(re,ee,ne,ae){var ce=ee.type,le=ee.deltaTime,ue=ee.text||"",he=ee.data||[],fe=null;switch(re.writeVarInt(le),ce){case"sequenceNumber":re.writeUInt8(255),re.writeUInt8(0),re.writeVarInt(2),re.writeUInt16(ee.number);break;case"text":re.writeUInt8(255),re.writeUInt8(1),re.writeVarInt(ue.length),re.writeString(ue);break;case"copyrightNotice":re.writeUInt8(255),re.writeUInt8(2),re.writeVarInt(ue.length),re.writeString(ue);break;case"trackName":re.writeUInt8(255),re.writeUInt8(3),re.writeVarInt(ue.length),re.writeString(ue);break;case"instrumentName":re.writeUInt8(255),re.writeUInt8(4),re.writeVarInt(ue.length),re.writeString(ue);break;case"lyrics":re.writeUInt8(255),re.writeUInt8(5),re.writeVarInt(ue.length),re.writeString(ue);break;case"marker":re.writeUInt8(255),re.writeUInt8(6),re.writeVarInt(ue.length),re.writeString(ue);break;case"cuePoint":re.writeUInt8(255),re.writeUInt8(7),re.writeVarInt(ue.length),re.writeString(ue);break;case"channelPrefix":re.writeUInt8(255),re.writeUInt8(32),re.writeVarInt(1),re.writeUInt8(ee.channel);break;case"portPrefix":re.writeUInt8(255),re.writeUInt8(33),re.writeVarInt(1),re.writeUInt8(ee.port);break;case"endOfTrack":re.writeUInt8(255),re.writeUInt8(47),re.writeVarInt(0);break;case"setTempo":re.writeUInt8(255),re.writeUInt8(81),re.writeVarInt(3),re.writeUInt24(ee.microsecondsPerBeat);break;case"smpteOffset":re.writeUInt8(255),re.writeUInt8(84),re.writeVarInt(5);var me={24:0,25:32,29:64,30:96},ge=ee.hour&31|me[ee.frameRate];re.writeUInt8(ge),re.writeUInt8(ee.min),re.writeUInt8(ee.sec),re.writeUInt8(ee.frame),re.writeUInt8(ee.subFrame);break;case"timeSignature":re.writeUInt8(255),re.writeUInt8(88),re.writeVarInt(4),re.writeUInt8(ee.numerator);var ve=Math.floor(Math.log(ee.denominator)/Math.LN2)&255;re.writeUInt8(ve),re.writeUInt8(ee.metronome),re.writeUInt8(ee.thirtyseconds||8);break;case"keySignature":re.writeUInt8(255),re.writeUInt8(89),re.writeVarInt(2),re.writeInt8(ee.key),re.writeUInt8(ee.scale);break;case"sequencerSpecific":re.writeUInt8(255),re.writeUInt8(127),re.writeVarInt(he.length),re.writeBytes(he);break;case"unknownMeta":ee.metatypeByte!=null&&(re.writeUInt8(255),re.writeUInt8(ee.metatypeByte),re.writeVarInt(he.length),re.writeBytes(he));break;case"sysEx":re.writeUInt8(240),re.writeVarInt(he.length),re.writeBytes(he);break;case"endSysEx":re.writeUInt8(247),re.writeVarInt(he.length),re.writeBytes(he);break;case"noteOff":var ye=ae!==!1&&ee.byte9||ae&&ee.velocity==0?144:128;fe=ye|ee.channel,fe!==ne&&re.writeUInt8(fe),re.writeUInt8(ee.noteNumber),re.writeUInt8(ee.velocity);break;case"noteOn":fe=144|ee.channel,fe!==ne&&re.writeUInt8(fe),re.writeUInt8(ee.noteNumber),re.writeUInt8(ee.velocity);break;case"noteAftertouch":fe=160|ee.channel,fe!==ne&&re.writeUInt8(fe),re.writeUInt8(ee.noteNumber),re.writeUInt8(ee.amount);break;case"controller":fe=176|ee.channel,fe!==ne&&re.writeUInt8(fe),re.writeUInt8(ee.controllerType),re.writeUInt8(ee.value);break;case"programChange":fe=192|ee.channel,fe!==ne&&re.writeUInt8(fe),re.writeUInt8(ee.programNumber);break;case"channelAftertouch":fe=208|ee.channel,fe!==ne&&re.writeUInt8(fe),re.writeUInt8(ee.amount);break;case"pitchBend":fe=224|ee.channel,fe!==ne&&re.writeUInt8(fe);var be=8192+ee.value,Ee=be&127,Ce=be>>7&127;re.writeUInt8(Ee),re.writeUInt8(Ce);break;default:throw"Unrecognized event type: "+ce}return fe}function Writer(){this.buffer=[]}Writer.prototype.writeUInt8=function(re){this.buffer.push(re&255)};Writer.prototype.writeInt8=Writer.prototype.writeUInt8;Writer.prototype.writeUInt16=function(re){var ee=re>>8&255,ne=re&255;this.writeUInt8(ee),this.writeUInt8(ne)};Writer.prototype.writeInt16=Writer.prototype.writeUInt16;Writer.prototype.writeUInt24=function(re){var ee=re>>16&255,ne=re>>8&255,ae=re&255;this.writeUInt8(ee),this.writeUInt8(ne),this.writeUInt8(ae)};Writer.prototype.writeInt24=Writer.prototype.writeUInt24;Writer.prototype.writeUInt32=function(re){var ee=re>>24&255,ne=re>>16&255,ae=re>>8&255,ce=re&255;this.writeUInt8(ee),this.writeUInt8(ne),this.writeUInt8(ae),this.writeUInt8(ce)};Writer.prototype.writeInt32=Writer.prototype.writeUInt32;Writer.prototype.writeBytes=function(re){this.buffer=this.buffer.concat(Array.prototype.slice.call(re,0))};Writer.prototype.writeString=function(re){var ee,ne=re.length,ae=[];for(ee=0;ee<ne;ee++)ae.push(re.codePointAt(ee));this.writeBytes(ae)};Writer.prototype.writeVarInt=function(re){if(re<0)throw"Cannot write negative variable-length integer";if(re<=127)this.writeUInt8(re);else{var ee=re,ne=[];for(ne.push(ee&127),ee>>=7;ee;){var ae=ee&127|128;ne.push(ae),ee>>=7}this.writeBytes(ne.reverse())}};Writer.prototype.writeChunk=function(re,ee){this.writeString(re),this.writeUInt32(ee.length),this.writeBytes(ee)};var midiWriter=writeMidi;midiFile.parseMidi=midiParser;midiFile.writeMidi=midiWriter;var Header$1={},BinarySearch={};Object.defineProperty(BinarySearch,"__esModule",{value:!0});BinarySearch.insert=BinarySearch.search=void 0;function search(re,ee,ne){ne===void 0&&(ne="ticks");var ae=0,ce=re.length,le=ce;if(ce>0&&re[ce-1][ne]<=ee)return ce-1;for(;ae<le;){var ue=Math.floor(ae+(le-ae)/2),he=re[ue],fe=re[ue+1];if(he[ne]===ee){for(var me=ue;me<re.length;me++){var ge=re[me];ge[ne]===ee&&(ue=me)}return ue}else{if(he[ne]<ee&&fe[ne]>ee)return ue;he[ne]>ee?le=ue:he[ne]<ee&&(ae=ue+1)}}return-1}BinarySearch.search=search;function insert(re,ee,ne){if(ne===void 0&&(ne="ticks"),re.length){var ae=search(re,ee[ne],ne);re.splice(ae+1,0,ee)}else re.push(ee)}BinarySearch.insert=insert;(function(re){Object.defineProperty(re,"__esModule",{value:!0}),re.Header=re.keySignatureKeys=void 0;var ee=BinarySearch,ne=new WeakMap;re.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var ae=function(){function ce(le){var ue=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",ne.set(this,480),le){ne.set(this,le.header.ticksPerBeat),le.tracks.forEach(function(fe){fe.forEach(function(me){me.meta&&(me.type==="timeSignature"?ue.timeSignatures.push({ticks:me.absoluteTime,timeSignature:[me.numerator,me.denominator]}):me.type==="setTempo"?ue.tempos.push({bpm:6e7/me.microsecondsPerBeat,ticks:me.absoluteTime}):me.type==="keySignature"&&ue.keySignatures.push({key:re.keySignatureKeys[me.key+7],scale:me.scale===0?"major":"minor",ticks:me.absoluteTime}))})});var he=0;le.tracks[0].forEach(function(fe){he+=fe.deltaTime,fe.meta&&(fe.type==="trackName"?ue.name=fe.text:(fe.type==="text"||fe.type==="cuePoint"||fe.type==="marker"||fe.type==="lyrics")&&ue.meta.push({text:fe.text,ticks:he,type:fe.type}))}),this.update()}}return ce.prototype.update=function(){var le=this,ue=0,he=0;this.tempos.sort(function(fe,me){return fe.ticks-me.ticks}),this.tempos.forEach(function(fe,me){var ge=me>0?le.tempos[me-1].bpm:le.tempos[0].bpm,ve=fe.ticks/le.ppq-he,ye=60/ge*ve;fe.time=ye+ue,ue=fe.time,he+=ve}),this.timeSignatures.sort(function(fe,me){return fe.ticks-me.ticks}),this.timeSignatures.forEach(function(fe,me){var ge=me>0?le.timeSignatures[me-1]:le.timeSignatures[0],ve=(fe.ticks-ge.ticks)/le.ppq,ye=ve/ge.timeSignature[0]/(ge.timeSignature[1]/4);ge.measures=ge.measures||0,fe.measures=ye+ge.measures})},ce.prototype.ticksToSeconds=function(le){var ue=(0,ee.search)(this.tempos,le);if(ue!==-1){var he=this.tempos[ue],fe=he.time,me=(le-he.ticks)/this.ppq;return fe+60/he.bpm*me}else{var ge=le/this.ppq;return 60/120*ge}},ce.prototype.ticksToMeasures=function(le){var ue=(0,ee.search)(this.timeSignatures,le);if(ue!==-1){var he=this.timeSignatures[ue],fe=(le-he.ticks)/this.ppq;return he.measures+fe/(he.timeSignature[0]/he.timeSignature[1])/4}else return le/this.ppq/4},Object.defineProperty(ce.prototype,"ppq",{get:function(){return ne.get(this)},enumerable:!1,configurable:!0}),ce.prototype.secondsToTicks=function(le){var ue=(0,ee.search)(this.tempos,le,"time");if(ue!==-1){var he=this.tempos[ue],fe=he.time,me=le-fe,ge=me/(60/he.bpm);return Math.round(he.ticks+ge*this.ppq)}else{var ve=le/.5;return Math.round(ve*this.ppq)}},ce.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(le){return{bpm:le.bpm,ticks:le.ticks}}),timeSignatures:this.timeSignatures}},ce.prototype.fromJSON=function(le){this.name=le.name,this.tempos=le.tempos.map(function(ue){return Object.assign({},ue)}),this.timeSignatures=le.timeSignatures.map(function(ue){return Object.assign({},ue)}),this.keySignatures=le.keySignatures.map(function(ue){return Object.assign({},ue)}),this.meta=le.meta.map(function(ue){return Object.assign({},ue)}),ne.set(this,le.ppq),this.update()},ce.prototype.setTempo=function(le){this.tempos=[{bpm:le,ticks:0}],this.update()},ce}();re.Header=ae})(Header$1);var Track$1={},ControlChange={};(function(re){Object.defineProperty(re,"__esModule",{value:!0}),re.ControlChange=re.controlChangeIds=re.controlChangeNames=void 0,re.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},re.controlChangeIds=Object.keys(re.controlChangeNames).reduce(function(ce,le){return ce[re.controlChangeNames[le]]=le,ce},{});var ee=new WeakMap,ne=new WeakMap,ae=function(){function ce(le,ue){ee.set(this,ue),ne.set(this,le.controllerType),this.ticks=le.absoluteTime,this.value=le.value}return Object.defineProperty(ce.prototype,"number",{get:function(){return ne.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(ce.prototype,"name",{get:function(){return re.controlChangeNames[this.number]?re.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(ce.prototype,"time",{get:function(){var le=ee.get(this);return le.ticksToSeconds(this.ticks)},set:function(le){var ue=ee.get(this);this.ticks=ue.secondsToTicks(le)},enumerable:!1,configurable:!0}),ce.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},ce}();re.ControlChange=ae})(ControlChange);var ControlChanges={};Object.defineProperty(ControlChanges,"__esModule",{value:!0});ControlChanges.createControlChanges=void 0;var ControlChange_1$1=ControlChange;function createControlChanges(){return new Proxy({},{get:function(re,ee){if(re[ee])return re[ee];if(ControlChange_1$1.controlChangeIds.hasOwnProperty(ee))return re[ControlChange_1$1.controlChangeIds[ee]]},set:function(re,ee,ne){return ControlChange_1$1.controlChangeIds.hasOwnProperty(ee)?re[ControlChange_1$1.controlChangeIds[ee]]=ne:re[ee]=ne,!0}})}ControlChanges.createControlChanges=createControlChanges;var PitchBend$1={};Object.defineProperty(PitchBend$1,"__esModule",{value:!0});PitchBend$1.PitchBend=void 0;var privateHeaderMap$2=new WeakMap,PitchBend=function(){function re(ee,ne){privateHeaderMap$2.set(this,ne),this.ticks=ee.absoluteTime,this.value=ee.value}return Object.defineProperty(re.prototype,"time",{get:function(){var ee=privateHeaderMap$2.get(this);return ee.ticksToSeconds(this.ticks)},set:function(ee){var ne=privateHeaderMap$2.get(this);this.ticks=ne.secondsToTicks(ee)},enumerable:!1,configurable:!0}),re.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},re}();PitchBend$1.PitchBend=PitchBend;var Instrument$2={},InstrumentMaps={};Object.defineProperty(InstrumentMaps,"__esModule",{value:!0});InstrumentMaps.DrumKitByPatchID=InstrumentMaps.InstrumentFamilyByID=InstrumentMaps.instrumentByPatchID=void 0;InstrumentMaps.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];InstrumentMaps.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];InstrumentMaps.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(Instrument$2,"__esModule",{value:!0});Instrument$2.Instrument=void 0;var InstrumentMaps_1=InstrumentMaps,privateTrackMap=new WeakMap,Instrument$1=function(){function re(ee,ne){if(this.number=0,privateTrackMap.set(this,ne),this.number=0,ee){var ae=ee.find(function(ce){return ce.type==="programChange"});ae&&(this.number=ae.programNumber)}}return Object.defineProperty(re.prototype,"name",{get:function(){return this.percussion?InstrumentMaps_1.DrumKitByPatchID[this.number]:InstrumentMaps_1.instrumentByPatchID[this.number]},set:function(ee){var ne=InstrumentMaps_1.instrumentByPatchID.indexOf(ee);ne!==-1&&(this.number=ne)},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"family",{get:function(){return this.percussion?"drums":InstrumentMaps_1.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"percussion",{get:function(){var ee=privateTrackMap.get(this);return ee.channel===9},enumerable:!1,configurable:!0}),re.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},re.prototype.fromJSON=function(ee){this.number=ee.number},re}();Instrument$2.Instrument=Instrument$1;var Note$1={};Object.defineProperty(Note$1,"__esModule",{value:!0});Note$1.Note=void 0;function midiToPitch(re){var ee=Math.floor(re/12)-1;return midiToPitchClass(re)+ee.toString()}function midiToPitchClass(re){var ee=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],ne=re%12;return ee[ne]}function pitchClassToMidi(re){var ee=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return ee.indexOf(re)}var pitchToMidi=function(){var re=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,ee={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(ne){var ae=re.exec(ne),ce=ae[1],le=ae[2],ue=ee[ce.toLowerCase()];return ue+(parseInt(le,10)+1)*12}}(),privateHeaderMap$1=new WeakMap,Note=function(){function re(ee,ne,ae){privateHeaderMap$1.set(this,ae),this.midi=ee.midi,this.velocity=ee.velocity,this.noteOffVelocity=ne.velocity,this.ticks=ee.ticks,this.durationTicks=ne.ticks-ee.ticks}return Object.defineProperty(re.prototype,"name",{get:function(){return midiToPitch(this.midi)},set:function(ee){this.midi=pitchToMidi(ee)},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(ee){var ne=ee-this.octave;this.midi+=ne*12},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"pitch",{get:function(){return midiToPitchClass(this.midi)},set:function(ee){this.midi=12*(this.octave+1)+pitchClassToMidi(ee)},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"duration",{get:function(){var ee=privateHeaderMap$1.get(this);return ee.ticksToSeconds(this.ticks+this.durationTicks)-ee.ticksToSeconds(this.ticks)},set:function(ee){var ne=privateHeaderMap$1.get(this),ae=ne.secondsToTicks(this.time+ee);this.durationTicks=ae-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"time",{get:function(){var ee=privateHeaderMap$1.get(this);return ee.ticksToSeconds(this.ticks)},set:function(ee){var ne=privateHeaderMap$1.get(this);this.ticks=ne.secondsToTicks(ee)},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"bars",{get:function(){var ee=privateHeaderMap$1.get(this);return ee.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),re.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},re}();Note$1.Note=Note;Object.defineProperty(Track$1,"__esModule",{value:!0});Track$1.Track=void 0;var BinarySearch_1=BinarySearch,ControlChange_1=ControlChange,ControlChanges_1=ControlChanges,PitchBend_1=PitchBend$1,Instrument_1=Instrument$2,Note_1=Note$1,privateHeaderMap=new WeakMap,Track=function(){function re(ee,ne){var ae=this;if(this.name="",this.notes=[],this.controlChanges=(0,ControlChanges_1.createControlChanges)(),this.pitchBends=[],privateHeaderMap.set(this,ne),ee){var ce=ee.find(function(ye){return ye.type==="trackName"});this.name=ce?ce.text:""}if(this.instrument=new Instrument_1.Instrument(ee,this),this.channel=0,ee){for(var le=ee.filter(function(ye){return ye.type==="noteOn"}),ue=ee.filter(function(ye){return ye.type==="noteOff"}),he=function(){var ye=le.shift();fe.channel=ye.channel;var be=ue.findIndex(function(Ce){return Ce.noteNumber===ye.noteNumber&&Ce.absoluteTime>=ye.absoluteTime});if(be!==-1){var Ee=ue.splice(be,1)[0];fe.addNote({durationTicks:Ee.absoluteTime-ye.absoluteTime,midi:ye.noteNumber,noteOffVelocity:Ee.velocity/127,ticks:ye.absoluteTime,velocity:ye.velocity/127})}},fe=this;le.length;)he();var me=ee.filter(function(ye){return ye.type==="controller"});me.forEach(function(ye){ae.addCC({number:ye.controllerType,ticks:ye.absoluteTime,value:ye.value/127})});var ge=ee.filter(function(ye){return ye.type==="pitchBend"});ge.forEach(function(ye){ae.addPitchBend({ticks:ye.absoluteTime,value:ye.value/Math.pow(2,13)})});var ve=ee.find(function(ye){return ye.type==="endOfTrack"});this.endOfTrackTicks=ve!==void 0?ve.absoluteTime:void 0}}return re.prototype.addNote=function(ee){var ne=privateHeaderMap.get(this),ae=new Note_1.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},ne);return Object.assign(ae,ee),(0,BinarySearch_1.insert)(this.notes,ae,"ticks"),this},re.prototype.addCC=function(ee){var ne=privateHeaderMap.get(this),ae=new ControlChange_1.ControlChange({controllerType:ee.number},ne);return delete ee.number,Object.assign(ae,ee),Array.isArray(this.controlChanges[ae.number])||(this.controlChanges[ae.number]=[]),(0,BinarySearch_1.insert)(this.controlChanges[ae.number],ae,"ticks"),this},re.prototype.addPitchBend=function(ee){var ne=privateHeaderMap.get(this),ae=new PitchBend_1.PitchBend({},ne);return Object.assign(ae,ee),(0,BinarySearch_1.insert)(this.pitchBends,ae,"ticks"),this},Object.defineProperty(re.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var ee=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,ne=0;ne<this.notes.length-1;ne++){var ae=this.notes[ne].time+this.notes[ne].duration;ee<ae&&(ee=ae)}return ee},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var ee=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,ne=0;ne<this.notes.length-1;ne++){var ae=this.notes[ne].ticks+this.notes[ne].durationTicks;ee<ae&&(ee=ae)}return ee},enumerable:!1,configurable:!0}),re.prototype.fromJSON=function(ee){var ne=this;this.name=ee.name,this.channel=ee.channel,this.instrument=new Instrument_1.Instrument(void 0,this),this.instrument.fromJSON(ee.instrument),ee.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=ee.endOfTrackTicks);for(var ae in ee.controlChanges)ee.controlChanges[ae]&&ee.controlChanges[ae].forEach(function(ce){ne.addCC({number:ce.number,ticks:ce.ticks,value:ce.value})});ee.notes.forEach(function(ce){ne.addNote({durationTicks:ce.durationTicks,midi:ce.midi,ticks:ce.ticks,velocity:ce.velocity})})},re.prototype.toJSON=function(){for(var ee={},ne=0;ne<127;ne++)this.controlChanges.hasOwnProperty(ne)&&(ee[ne]=this.controlChanges[ne].map(function(ce){return ce.toJSON()}));var ae={channel:this.channel,controlChanges:ee,pitchBends:this.pitchBends.map(function(ce){return ce.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(ce){return ce.toJSON()})};return this.endOfTrackTicks!==void 0&&(ae.endOfTrackTicks=this.endOfTrackTicks),ae},re}();Track$1.Track=Track;var Encode={};function flatten(re){var ee=[];return $flatten(re,ee),ee}function $flatten(re,ee){for(var ne=0;ne<re.length;ne++){var ae=re[ne];Array.isArray(ae)?$flatten(ae,ee):ee.push(ae)}}const dist_es2015=Object.freeze(Object.defineProperty({__proto__:null,flatten},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(dist_es2015);var __spreadArray=commonjsGlobal&&commonjsGlobal.__spreadArray||function(re,ee,ne){if(ne||arguments.length===2)for(var ae=0,ce=ee.length,le;ae<ce;ae++)(le||!(ae in ee))&&(le||(le=Array.prototype.slice.call(ee,0,ae)),le[ae]=ee[ae]);return re.concat(le||Array.prototype.slice.call(ee))};Object.defineProperty(Encode,"__esModule",{value:!0});Encode.encode=void 0;var midi_file_1=midiFile,Header_1=Header$1,array_flatten_1=require$$2;function encodeNote(re,ee){return[{absoluteTime:re.ticks,channel:ee,deltaTime:0,noteNumber:re.midi,type:"noteOn",velocity:Math.floor(re.velocity*127)},{absoluteTime:re.ticks+re.durationTicks,channel:ee,deltaTime:0,noteNumber:re.midi,type:"noteOff",velocity:Math.floor(re.noteOffVelocity*127)}]}function encodeNotes(re){return(0,array_flatten_1.flatten)(re.notes.map(function(ee){return encodeNote(ee,re.channel)}))}function encodeControlChange(re,ee){return{absoluteTime:re.ticks,channel:ee,controllerType:re.number,deltaTime:0,type:"controller",value:Math.floor(re.value*127)}}function encodeControlChanges(re){for(var ee=[],ne=0;ne<127;ne++)re.controlChanges.hasOwnProperty(ne)&&re.controlChanges[ne].forEach(function(ae){ee.push(encodeControlChange(ae,re.channel))});return ee}function encodePitchBend(re,ee){return{absoluteTime:re.ticks,channel:ee,deltaTime:0,type:"pitchBend",value:re.value}}function encodePitchBends(re){var ee=[];return re.pitchBends.forEach(function(ne){ee.push(encodePitchBend(ne,re.channel))}),ee}function encodeInstrument(re){return{absoluteTime:0,channel:re.channel,deltaTime:0,programNumber:re.instrument.number,type:"programChange"}}function encodeTrackName(re){return{absoluteTime:0,deltaTime:0,meta:!0,text:re,type:"trackName"}}function encodeTempo(re){return{absoluteTime:re.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/re.bpm),type:"setTempo"}}function encodeTimeSignature(re){return{absoluteTime:re.ticks,deltaTime:0,denominator:re.timeSignature[1],meta:!0,metronome:24,numerator:re.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function encodeKeySignature(re){var ee=Header_1.keySignatureKeys.indexOf(re.key);return{absoluteTime:re.ticks,deltaTime:0,key:ee+7,meta:!0,scale:re.scale==="major"?0:1,type:"keySignature"}}function encodeText(re){return{absoluteTime:re.ticks,deltaTime:0,meta:!0,text:re.text,type:re.type}}function encode(re){var ee={header:{format:1,numTracks:re.tracks.length+1,ticksPerBeat:re.header.ppq},tracks:__spreadArray([__spreadArray(__spreadArray(__spreadArray(__spreadArray([{absoluteTime:0,deltaTime:0,meta:!0,text:re.header.name,type:"trackName"}],re.header.keySignatures.map(function(ne){return encodeKeySignature(ne)}),!0),re.header.meta.map(function(ne){return encodeText(ne)}),!0),re.header.tempos.map(function(ne){return encodeTempo(ne)}),!0),re.header.timeSignatures.map(function(ne){return encodeTimeSignature(ne)}),!0)],re.tracks.map(function(ne){return __spreadArray(__spreadArray(__spreadArray([encodeTrackName(ne.name),encodeInstrument(ne)],encodeNotes(ne),!0),encodeControlChanges(ne),!0),encodePitchBends(ne),!0)}),!0)};return ee.tracks=ee.tracks.map(function(ne){ne=ne.sort(function(ce,le){return ce.absoluteTime-le.absoluteTime});var ae=0;return ne.forEach(function(ce){ce.deltaTime=ce.absoluteTime-ae,ae=ce.absoluteTime,delete ce.absoluteTime}),ne.push({deltaTime:0,meta:!0,type:"endOfTrack"}),ne}),new Uint8Array((0,midi_file_1.writeMidi)(ee))}Encode.encode=encode;(function(re){var ee=commonjsGlobal&&commonjsGlobal.__awaiter||function(ve,ye,be,Ee){function Ce(Se){return Se instanceof be?Se:new be(function(Te){Te(Se)})}return new(be||(be=Promise))(function(Se,Te){function ke(De){try{Fe(Ee.next(De))}catch(Oe){Te(Oe)}}function Ne(De){try{Fe(Ee.throw(De))}catch(Oe){Te(Oe)}}function Fe(De){De.done?Se(De.value):Ce(De.value).then(ke,Ne)}Fe((Ee=Ee.apply(ve,ye||[])).next())})},ne=commonjsGlobal&&commonjsGlobal.__generator||function(ve,ye){var be={label:0,sent:function(){if(Se[0]&1)throw Se[1];return Se[1]},trys:[],ops:[]},Ee,Ce,Se,Te;return Te={next:ke(0),throw:ke(1),return:ke(2)},typeof Symbol=="function"&&(Te[Symbol.iterator]=function(){return this}),Te;function ke(Fe){return function(De){return Ne([Fe,De])}}function Ne(Fe){if(Ee)throw new TypeError("Generator is already executing.");for(;be;)try{if(Ee=1,Ce&&(Se=Fe[0]&2?Ce.return:Fe[0]?Ce.throw||((Se=Ce.return)&&Se.call(Ce),0):Ce.next)&&!(Se=Se.call(Ce,Fe[1])).done)return Se;switch(Ce=0,Se&&(Fe=[Fe[0]&2,Se.value]),Fe[0]){case 0:case 1:Se=Fe;break;case 4:return be.label++,{value:Fe[1],done:!1};case 5:be.label++,Ce=Fe[1],Fe=[0];continue;case 7:Fe=be.ops.pop(),be.trys.pop();continue;default:if(Se=be.trys,!(Se=Se.length>0&&Se[Se.length-1])&&(Fe[0]===6||Fe[0]===2)){be=0;continue}if(Fe[0]===3&&(!Se||Fe[1]>Se[0]&&Fe[1]<Se[3])){be.label=Fe[1];break}if(Fe[0]===6&&be.label<Se[1]){be.label=Se[1],Se=Fe;break}if(Se&&be.label<Se[2]){be.label=Se[2],be.ops.push(Fe);break}Se[2]&&be.ops.pop(),be.trys.pop();continue}Fe=ye.call(ve,be)}catch(De){Fe=[6,De],Ce=0}finally{Ee=Se=0}if(Fe[0]&5)throw Fe[1];return{value:Fe[0]?Fe[1]:void 0,done:!0}}};Object.defineProperty(re,"__esModule",{value:!0}),re.Header=re.Track=re.Midi=void 0;var ae=midiFile,ce=Header$1,le=Track$1,ue=Encode,he=function(){function ve(ye){var be=this,Ee=null;if(ye){var Ce=ye instanceof ArrayBuffer?new Uint8Array(ye):ye;Ee=(0,ae.parseMidi)(Ce),Ee.tracks.forEach(function(Se){var Te=0;Se.forEach(function(ke){Te+=ke.deltaTime,ke.absoluteTime=Te})}),Ee.tracks=ge(Ee.tracks)}this.header=new ce.Header(Ee),this.tracks=[],ye&&(this.tracks=Ee.tracks.map(function(Se){return new le.Track(Se,be.header)}),Ee.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return ve.fromUrl=function(ye){return ee(this,void 0,void 0,function(){var be,Ee;return ne(this,function(Ce){switch(Ce.label){case 0:return[4,fetch(ye)];case 1:return be=Ce.sent(),be.ok?[4,be.arrayBuffer()]:[3,3];case 2:return Ee=Ce.sent(),[2,new ve(Ee)];case 3:throw new Error("Could not load '".concat(ye,"'"))}})})},Object.defineProperty(ve.prototype,"name",{get:function(){return this.header.name},set:function(ye){this.header.name=ye},enumerable:!1,configurable:!0}),Object.defineProperty(ve.prototype,"duration",{get:function(){var ye=this.tracks.map(function(be){return be.duration});return Math.max.apply(Math,ye)},enumerable:!1,configurable:!0}),Object.defineProperty(ve.prototype,"durationTicks",{get:function(){var ye=this.tracks.map(function(be){return be.durationTicks});return Math.max.apply(Math,ye)},enumerable:!1,configurable:!0}),ve.prototype.addTrack=function(){var ye=new le.Track(void 0,this.header);return this.tracks.push(ye),ye},ve.prototype.toArray=function(){return(0,ue.encode)(this)},ve.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(ye){return ye.toJSON()})}},ve.prototype.fromJSON=function(ye){var be=this;this.header=new ce.Header,this.header.fromJSON(ye.header),this.tracks=ye.tracks.map(function(Ee){var Ce=new le.Track(void 0,be.header);return Ce.fromJSON(Ee),Ce})},ve.prototype.clone=function(){var ye=new ve;return ye.fromJSON(this.toJSON()),ye},ve}();re.Midi=he;var fe=Track$1;Object.defineProperty(re,"Track",{enumerable:!0,get:function(){return fe.Track}});var me=Header$1;Object.defineProperty(re,"Header",{enumerable:!0,get:function(){return me.Header}});function ge(ve){for(var ye=[],be=0;be<ve.length;be++)for(var Ee=ye.length,Ce=new Map,Se=Array(16).fill(0),Te=0,ke=ve[be];Te<ke.length;Te++){var Ne=ke[Te],Fe=Ee,De=Ne.channel;if(De!==void 0){Ne.type==="programChange"&&(Se[De]=Ne.programNumber);var Oe=Se[De],Re="".concat(Oe," ").concat(De);Ce.has(Re)?Fe=Ce.get(Re):(Fe=Ee+Ce.size,Ce.set(Re,Fe))}ye[Fe]||ye.push([]),ye[Fe].push(Ne)}return ye}})(Midi);function midiToSequenceProto(re){const ee=new Midi.Midi(re),ne=NoteSequence.create();ne.ticksPerQuarter=ee.header.ppq,ne.sourceInfo=NoteSequence.SourceInfo.create({parser:NoteSequence.SourceInfo.Parser.TONEJS_MIDI_CONVERT,encodingType:NoteSequence.SourceInfo.EncodingType.MIDI});for(const ce of ee.header.timeSignatures)ne.timeSignatures.push(NoteSequence.TimeSignature.create({time:ee.header.ticksToSeconds(ce.ticks),numerator:ce.timeSignature[0],denominator:ce.timeSignature[1]}));ne.timeSignatures.length||ne.timeSignatures.push(NoteSequence.TimeSignature.create({time:0,numerator:4,denominator:4}));for(const ce of ee.header.tempos)ne.tempos.push(NoteSequence.Tempo.create({time:ce.time,qpm:ce.bpm}));let ae=-1;for(const ce of ee.tracks){ce.notes.length>0&&(ae+=1);for(const he of ce.notes){const fe=he.time,me=he.duration,ge=fe+me;ne.notes.push(NoteSequence.Note.create({instrument:ae,program:ce.instrument.number,startTime:fe,endTime:ge,pitch:he.midi,velocity:Math.floor(he.velocity*MIDI_VELOCITIES),isDrum:ce.instrument.percussion})),ge>ne.totalTime&&(ne.totalTime=ge)}const le=Object.values(ce.controlChanges),ue=[].concat.apply([],le);for(const he of ue)ne.controlChanges.push(NoteSequence.ControlChange.create({time:he.time,controlNumber:he.number,controlValue:Math.floor(he.value*(MIDI_VELOCITIES-1)),instrument:ae,program:ce.instrument.number,isDrum:ce.instrument.percussion}))}return ne}function urlToBlob(re){return new Promise((ee,ne)=>{fetch$1(re).then(ae=>ae.blob()).then(ae=>{ee(ae)}).catch(ae=>ne(ae))})}function blobToNoteSequence(re){return new Promise((ee,ne)=>{const ae=new FileReader;ae.onload=ce=>{try{const le=midiToSequenceProto(ae.result);ee(le)}catch(le){ne(le)}},ae.onerror=ce=>ne(ce),ae.readAsArrayBuffer(re)})}function urlToNoteSequence(re){return urlToBlob(re).then(blobToNoteSequence)}class Instrument{constructor(ee){this.FADE_SECONDS=.1,this.baseURL=ee,this.buffers=new ToneAudioBuffers,this.sourceMap=new Map,this.initialized=!1}async initialize(){await fetch$1(`${this.baseURL}/instrument.json`).then(ee=>ee.json()).then(ee=>{this.name=ee.name,this.minPitch=ee.minPitch,this.maxPitch=ee.maxPitch,this.durationSeconds=ee.durationSeconds,this.releaseSeconds=ee.releaseSeconds,this.percussive=ee.percussive,this.velocities=ee.velocities,this.initialized=!0})}sampleInfoToName(ee){return this.velocities?`p${ee.pitch}_v${ee.velocity}`:`p${ee.pitch}`}sampleNameToURL(ee){return`${this.baseURL}/${ee}.mp3`}nearestVelocity(ee){if(!this.velocities)return ee;ee||(ee=DEFAULT_VELOCITY);let ne,ae=MIDI_VELOCITIES;return this.velocities.forEach(ce=>{const le=Math.abs(ce-ee);le<ae&&(ne=ce,ae=le)}),ne}async loadSamples(ee){this.initialized||await this.initialize();const ne=ee.filter(le=>le.pitch<this.minPitch||le.pitch>this.maxPitch?(log$1(`Pitch ${le.pitch} is outside the valid range for ${this.name}, ignoring.`,"SoundFont"),!1):!0).map(le=>this.sampleInfoToName({pitch:le.pitch,velocity:this.nearestVelocity(le.velocity)})),ce=Array.from(new Set(ne)).filter(le=>!this.buffers.has(le)).map(le=>({name:le,url:this.sampleNameToURL(le)}));ce.length>0&&(ce.forEach(le=>this.buffers.add(le.name,le.url)),await loaded(),log$1(`Loaded samples for ${this.name}.`,"SoundFont"))}playNote(ee,ne,ae,ce,le){const ue=this.getBuffer(ee,ne);if(!ue)return;ce>this.durationSeconds&&log$1(`Requested note duration longer than sample duration: ${ce} > ${this.durationSeconds}`,"SoundFont");const he=new ToneBufferSource({url:ue,fadeOut:this.FADE_SECONDS}).connect(le);if(he.start(ae,0,void 0,1),!this.percussive&&ce<this.durationSeconds){const fe=new ToneBufferSource({url:ue,fadeOut:this.FADE_SECONDS}).connect(le);he.stop(ae+ce+this.FADE_SECONDS),fe.start(ae+ce,this.durationSeconds,void 0,1)}}playNoteDown(ee,ne,ae){const ce=this.getBuffer(ee,ne);if(!ce)return;const le=new ToneBufferSource(ce).connect(ae);le.start(0,0,void 0,1),this.sourceMap.has(ee)&&this.sourceMap.get(ee).stop(now()+this.FADE_SECONDS,this.FADE_SECONDS),this.sourceMap.set(ee,le)}playNoteUp(ee,ne,ae){if(!this.sourceMap.has(ee))return;const ce=this.getBuffer(ee,ne);if(!ce)return;new ToneBufferSource({url:ce,fadeOut:this.FADE_SECONDS}).connect(ae).start(0,this.durationSeconds,void 0,1),this.sourceMap.get(ee).stop(now()+this.FADE_SECONDS,this.FADE_SECONDS),this.sourceMap.delete(ee)}getBuffer(ee,ne){if(!this.initialized)throw new Error("Instrument is not initialized.");if(ee<this.minPitch||ee>this.maxPitch){log$1(`Pitch ${ee} is outside the valid range for ${this.name} (${this.minPitch}-${this.maxPitch})`,"SoundFont");return}const ae=this.sampleInfoToName({pitch:ee,velocity:this.nearestVelocity(ne)});if(!this.buffers.has(ae))throw new Error(`Buffer not found for ${this.name}: ${ae}`);const ce=this.buffers.get(ae);if(!ce.loaded)throw new Error(`Buffer not loaded for ${this.name}: ${ae}`);return ce}}class SoundFont{constructor(ee){this.baseURL=ee,this.instruments=new Map,this.initialized=!1}async initialize(){await fetch$1(`${this.baseURL}/soundfont.json`).then(ee=>ee.json()).then(ee=>{this.name=ee.name;for(const ne in ee.instruments){const ae=`${this.baseURL}/${ee.instruments[ne]}`;this.instruments.set(ne==="drums"?"drums":+ne,new Instrument(ae))}this.initialized=!0})}async loadSamples(ee){this.initialized||await this.initialize();const ne=new Map;ee.forEach(ae=>{ae.isDrum=ae.isDrum||!1,ae.program=ae.program||0;const ce=ae.isDrum?"drums":ae.program,le={pitch:ae.pitch,velocity:ae.velocity};ne.has(ce)?ne.get(ce).push(le):this.instruments.has(ce)?ne.set(ce,[le]):log$1(`No instrument in ${this.name} for: program=${ae.program}, isDrum=${ae.isDrum}`,"SoundFont")}),await Promise.all(Array.from(ne.keys()).map(ae=>this.instruments.get(ae).loadSamples(ne.get(ae))))}playNote(ee,ne,ae,ce,le=0,ue=!1,he){const fe=ue?"drums":le;if(!this.initialized)throw new Error("SoundFont is not initialized.");if(!this.instruments.has(fe)){log$1(`No instrument in ${this.name} for: program=${le}, isDrum=${ue}`,"SoundFont");return}this.instruments.get(fe).playNote(ee,ne,ae,ce,he)}playNoteDown(ee,ne,ae=0,ce=!1,le){const ue=ce?"drums":ae;if(!this.initialized)throw new Error("SoundFont is not initialized.");if(!this.instruments.has(ue)){log$1(`No instrument in ${this.name} for: program=${ae}, isDrum=${ce}`,"SoundFont");return}this.instruments.get(ue).playNoteDown(ee,ne,le)}playNoteUp(ee,ne,ae=0,ce=!1,le){const ue=ce?"drums":ae;if(!this.initialized)throw new Error("SoundFont is not initialized.");if(!this.instruments.has(ue)){log$1(`No instrument in ${this.name} for: program=${ae}, isDrum=${ce}`,"SoundFont");return}this.instruments.get(ue).playNoteUp(ee,ne,le)}}function compareQuantizedNotes(re,ee){return re.quantizedStartStep<ee.quantizedStartStep?-1:re.quantizedStartStep>ee.quantizedStartStep?1:re.pitch<ee.pitch?-1:1}class BasePlayer{constructor(ee=!1,ne){this.playClick=ee,this.callbackObject=ne,this.desiredQPM=void 0}setTempo(ee){this.desiredQPM=ee,Transport.state==="started"&&(Transport.bpm.value=ee)}makeClickSequence(ee){const ne=clone(ee),ae=ne.notes.map(le=>le.quantizedEndStep),ce=Math.max(...ae);for(let le=0;le<ce;le+=4){const ue={pitch:le%16===0?LO_CLICK_PITCH:HI_CLICK_PITCH,quantizedStartStep:le,isDrum:!0,quantizedEndStep:le+1};ne.notes.push(ue)}return ne.notes.sort(compareQuantizedNotes),ne}resumeContext(){context.resume()}start(ee,ne,ae=0){if(this.getPlayState()==="started")throw new Error("Cannot start playback; player is already playing.");if(this.getPlayState()==="paused")throw new Error("Cannot `start()` a paused player; use `resume()`.");if(Transport.state!=="stopped")throw new Error("Cannot start playback while `Tone.Transport` is in use.");this.resumeContext();const ce=isQuantizedSequence(ee);if(this.playClick&&ce&&(ee=this.makeClickSequence(ee)),ne?Transport.bpm.value=ne:ee.tempos&&ee.tempos.length>0&&ee.tempos[0].qpm>0?Transport.bpm.value=ee.tempos[0].qpm:Transport.bpm.value=DEFAULT_QUARTERS_PER_MINUTE,ce)ee=unquantizeSequence(ee,ne);else if(ne)throw new Error("Cannot specify a `qpm` for a non-quantized sequence.");const le=new Part((ue,he)=>{this.currentPart===le&&(this.playNote(ue,he),this.callbackObject&&Draw.schedule(()=>{this.callbackObject.run(he,ue)},ue))},ee.notes.map(ue=>[ue.startTime,ue]));return this.currentPart=le,this.desiredQPM&&(Transport.bpm.value=this.desiredQPM),this.currentPart.start(void 0,ae),Transport.state!=="started"&&Transport.start(),new Promise(ue=>{this.scheduledStop=Transport.schedule(()=>{this.stop(),ue(),this.callbackObject&&this.callbackObject.stop()},`+${ee.totalTime}`)})}stop(){this.isPlaying()&&(this.currentPart.stop(),Transport.stop(),this.currentPart=null),Transport.clear(this.scheduledStop),this.scheduledStop=void 0,this.desiredQPM=void 0}pause(){if(!this.isPlaying())throw new Error("Cannot pause playback while the player is stopped.");Transport.pause()}resume(){if(this.getPlayState()!=="paused")throw new Error(`Cannot resume playback while "${this.getPlayState()}".`);Transport.start()}seekTo(ee){if(!this.isPlaying())throw new Error("Cannot seek while the player is stopped.");Transport.seconds=ee}isPlaying(){return!!this.currentPart}getPlayState(){return this.isPlaying()?Transport.state:"stopped"}}class DrumKit{constructor(){this.DRUM_PITCH_TO_CLASS=new Map,this.kick=new MembraneSynth().toDestination(),this.tomLow=new MembraneSynth({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.tomMid=new MembraneSynth({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.tomHigh=new MembraneSynth({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.closedHihat=new MetalSynth({frequency:400,envelope:{attack:.001,decay:.1,release:.8},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1}).toDestination(),this.openHihat=new MetalSynth({frequency:400,envelope:{attack:.001,decay:.5,release:.8,sustain:1},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1}).toDestination(),this.ride=new MetalSynth().toDestination(),this.crash=new MetalSynth({frequency:300,envelope:{attack:.001,decay:1,release:3},harmonicity:5.1,modulationIndex:64,resonance:4e3,octaves:1.5}).toDestination(),this.snare=new NoiseSynth({noise:{type:"white"},envelope:{attack:.005,decay:.05,sustain:.1,release:.4}}).toDestination(),this.loClick=new MembraneSynth({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.hiClick=new MembraneSynth({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.pitchPlayers=[(ee,ne=1)=>this.kick.triggerAttackRelease("C2","8n",ee,ne),(ee,ne=1)=>this.snare.triggerAttackRelease("16n",ee,ne),(ee,ne=1)=>this.closedHihat.triggerAttack(ee,.3,ne),(ee,ne=1)=>this.openHihat.triggerAttack(ee,.3,ne),(ee,ne=.5)=>this.tomLow.triggerAttack("G3",ee,ne),(ee,ne=.5)=>this.tomMid.triggerAttack("C4",ee,ne),(ee,ne=.5)=>this.tomHigh.triggerAttack("F4",ee,ne),(ee,ne=1)=>this.crash.triggerAttack(ee,1,ne),(ee,ne=1)=>this.ride.triggerAttack(ee,.5,ne),(ee,ne=.5)=>this.loClick.triggerAttack("G5",ee,ne),(ee,ne=.5)=>this.hiClick.triggerAttack("C6",ee,ne)];for(let ee=0;ee<DEFAULT_DRUM_PITCH_CLASSES.length;++ee)DEFAULT_DRUM_PITCH_CLASSES[ee].forEach(ne=>{this.DRUM_PITCH_TO_CLASS.set(ne,ee)});this.DRUM_PITCH_TO_CLASS.set(LO_CLICK_PITCH,LO_CLICK_CLASS),this.DRUM_PITCH_TO_CLASS.set(HI_CLICK_PITCH,HI_CLICK_CLASS)}static getInstance(){return DrumKit.instance||(DrumKit.instance=new DrumKit),DrumKit.instance}playNote(ee,ne,ae){this.pitchPlayers[this.DRUM_PITCH_TO_CLASS.get(ee)](ne,ae)}}class Player extends BasePlayer{constructor(){super(...arguments),this.drumKit=DrumKit.getInstance(),this.bassSynth=new Synth({volume:5,oscillator:{type:"triangle"}}).toDestination(),this.polySynth=new PolySynth().toDestination()}playNote(ee,ne){const ae=ne.hasOwnProperty("velocity")?ne.velocity/MAX_MIDI_VELOCITY:void 0;if(ne.isDrum)this.drumKit.playNote(ne.pitch,ee,ae);else{const ce=Frequency(ne.pitch,"midi").toFrequency(),le=ne.endTime-ne.startTime;this.getSynth(ne.instrument,ne.program).triggerAttackRelease(ce,le,ee,ae)}}getSynth(ee,ne){return ne!==void 0&&ne>=32&&ne<=39?this.bassSynth:this.polySynth}}Player.tone=Tone;class SoundFontPlayer extends BasePlayer{constructor(ee,ne=Master,ae,ce,le){super(!1,le),this.soundFont=new SoundFont(ee),this.output=ne,this.programOutputs=ae,this.drumOutputs=ce}async loadSamples(ee){await this.soundFont.loadSamples(ee.notes.map(ne=>({pitch:ne.pitch,velocity:ne.velocity,program:ne.program||0,isDrum:ne.isDrum||!1})))}async loadAllSamples(ee=0,ne=!1){const ae=NoteSequence.create(),ce=ne?MIN_DRUM_PITCH:MIN_PIANO_PITCH,le=ne?MAX_DRUM_PITCH:MAX_PIANO_PITCH;for(let ue=ce;ue<=le;ue++)for(let he=MIN_MIDI_VELOCITY;he<MAX_MIDI_VELOCITY;he++)ae.notes.push({pitch:ue,velocity:he,program:ee,isDrum:ne});return this.loadSamples(ae)}resumeContext(){context.resume()}start(ee,ne,ae=0){return this.resumeContext(),this.loadSamples(ee).then(()=>super.start(ee,ne,ae))}playNote(ee,ne){this.soundFont.playNote(ne.pitch,ne.velocity,ee,ne.endTime-ne.startTime,ne.program,ne.isDrum,this.getAudioNodeOutput(ne))}playNoteDown(ee){this.soundFont.playNoteDown(ee.pitch,ee.velocity,ee.program,ee.isDrum,this.getAudioNodeOutput(ee))}playNoteUp(ee){this.soundFont.playNoteUp(ee.pitch,ee.velocity,ee.program,ee.isDrum,this.getAudioNodeOutput(ee))}getAudioNodeOutput(ee){let ne=this.output;return this.programOutputs&&!ee.isDrum?this.programOutputs.has(ee.program)&&(ne=this.programOutputs.get(ee.program)):this.drumOutputs&&ee.isDrum&&this.drumOutputs.has(ee.pitch)&&(ne=this.drumOutputs.get(ee.pitch)),ne}}var es6={exports:{}};(function(re,ee){(function(ne,ae){re.exports=ae()})(self,function(){return function(ne){var ae={};function ce(le){if(ae[le])return ae[le].exports;var ue=ae[le]={i:le,l:!1,exports:{}};return ne[le].call(ue.exports,ue,ue.exports,ce),ue.l=!0,ue.exports}return ce.m=ne,ce.c=ae,ce.d=function(le,ue,he){ce.o(le,ue)||Object.defineProperty(le,ue,{enumerable:!0,get:he})},ce.r=function(le){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(le,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(le,"__esModule",{value:!0})},ce.t=function(le,ue){if(1&ue&&(le=ce(le)),8&ue||4&ue&&typeof le=="object"&&le&&le.__esModule)return le;var he=Object.create(null);if(ce.r(he),Object.defineProperty(he,"default",{enumerable:!0,value:le}),2&ue&&typeof le!="string")for(var fe in le)ce.d(he,fe,(function(me){return le[me]}).bind(null,fe));return he},ce.n=function(le){var ue=le&&le.__esModule?function(){return le.default}:function(){return le};return ce.d(ue,"a",ue),ue},ce.o=function(le,ue){return Object.prototype.hasOwnProperty.call(le,ue)},ce.p="",ce(ce.s=4)}([function(ne,ae,ce){ce.r(ae),ce.d(ae,"SVGNS",function(){return le}),ce.d(ae,"drawSVGPath",function(){return ue}),ce.d(ae,"drawSVGText",function(){return he}),ce.d(ae,"createSVGGroupChild",function(){return fe}),ce.d(ae,"setFade",function(){return me});const le="http://www.w3.org/2000/svg";function ue(ge,ve,ye,be,Ee,Ce,Se=1){const Te=document.createElementNS(le,"path");return Te.setAttributeNS(null,"d",ve),Te.setAttributeNS(null,"transform",`translate(${ye}, ${be}) scale(${Ee}, ${Ce})`),Te.setAttributeNS(null,"opacity",`${Se}`),ge.appendChild(Te),Te}function he(ge,ve,ye,be,Ee,Ce=!1,Se=1,Te=1){const ke=document.createElementNS(le,"text");ke.setAttributeNS(null,"font-family","Times"),ke.setAttributeNS(null,"font-size",Ee),Ce&&ke.setAttributeNS(null,"font-weight","bold"),ke.setAttributeNS(null,"transform",`translate(${ye}, ${be}) scale(${Se}, ${Te})`);const Ne=document.createTextNode(ve);return ke.appendChild(Ne),ge.appendChild(ke),ke}function fe(ge,ve){const ye=document.createElementNS(le,"g");return ye.setAttribute("data-id",ve),ge.appendChild(ye),ye}function me(ge,ve=!1,ye=1,be=0){let Ee=ge.querySelector("animate");if(!Ee){(Ee=document.createElementNS(le,"animate")).setAttributeNS(null,"attributeName","opacity"),Ee.setAttributeNS(null,"dur","4s"),Ee.setAttributeNS(null,"fill","freeze"),Ee.setAttributeNS(null,"keyTimes","0; 0.25; 0.5; 0.75; 1");const Ce=(ye+3*be)/4;Ee.setAttributeNS(null,"values",`${ye}; ${Ce}; ${be}; ${Ce}; ${ye}`)}return ve?Ee.setAttributeNS(null,"repeatCount","indefinite"):Ee.setAttributeNS(null,"repeatCount","1"),ge.appendChild(Ee),ge}},function(ne,ae,ce){ce.r(ae),ce.d(ae,"PATH_SCALE",function(){return le}),ce.d(ae,"staffLinePath",function(){return he}),ce.d(ae,"extraLinePath",function(){return fe}),ce.d(ae,"barPath",function(){return me}),ce.d(ae,"stemPath",function(){return ge}),ce.d(ae,"singleFlagPath",function(){return ve}),ce.d(ae,"multiFlagPath",function(){return ye}),ce.d(ae,"tiePath",function(){return be}),ce.d(ae,"dotPath",function(){return Ee}),ce.d(ae,"NOTE_PATHS",function(){return Ce}),ce.d(ae,"REST_PATHS",function(){return Se}),ce.d(ae,"CLEF_PATHS",function(){return Te}),ce.d(ae,"ACCIDENTAL_PATHS",function(){return ke});const le=100,ue=`M 0,10 C 0,-15 35,-50 80,-50 110,-50 125,-35 125,-10 
125,15 90,50 45,50 15,50 0,35 0,10 Z`,he="m 0,0 h 100",fe="m -25,0 h 175",me="m 0,-200 v 400",ge="m 0,0 v 100 h 15 v -100 z",ve=`M0,0 h 12 c 7,100 175,156 62,314 79,-177 -49,
-193 -61,-200 l -13,-5 z`,ye=`m 0,0 h 10 c 6,72 173,64 84,227 44,-120 -44,
-123 -94,-167 z`,be=`M 0,25 C 10,46 30,67 50,67 69,67 90,47 100,25 94,
65 73,89 50,89 26,89 5,63 0,25 Z`,Ee="M 5 -20 a 20 20 0 1 0 0.00001 0 z",Ce={4:{path:`m 0,0 c 0,-37 49,-51 79,-51 31,0 83,13 83,51 0,39 
-55,51 -84,51 C 49,51 0,37 0,0 Z m 111,31 c 13,-19 0,-58 -22,-68 -33,-15 
-53,10 -39,49 9,27 48,39 61,19 z`,width:150,stemVSteps:0,stemAnchor:0,flags:0},2:{path:`m 0,10 c 0,-25 35,-60 80,-60 15,0 45,4 45,40 C 125,16 
89,50 45,50 17,50 0,36 0,10 Z m 71,7 c 17,-11 45,-34 38,-45 -7,-10 -39,1 
-57,12 -19,11 -42,31 -36,42 6,10 37,2 55,-9 z`,width:125,stemVSteps:7,stemAnchor:-10,flags:0},1:{path:ue,width:125,stemVSteps:7,stemAnchor:-10,flags:0},.5:{path:ue,width:125,stemVSteps:7,stemAnchor:-10,flags:1},.25:{path:ue,width:125,stemVSteps:9,stemAnchor:-10,flags:2},.125:{path:ue,width:125,stemVSteps:11,stemAnchor:-10,flags:3},.0625:{path:ue,width:125,stemVSteps:13,stemAnchor:-10,flags:4}},Se={4:"m 0,-50 h 125 v -50 H 0 Z",2:"M 0,0 H 125 V -50 H 0 Z",1:`m 0,-25 c 39,-39 37,-75 8,-120 l 6,-5 61,103 C 
40,-13 31,4 73,71 l -5,5 C 14,52 16,125 67,144 l -4,6 C -37,102 -1,22 59,60 Z`,.5:`m 52,-47 c 26,-2 42,-21 48,-42 l 12,4 L 64,83 52,79 
88,-49 c 0,0 -17,22 -57,22 -16,0 -31,-13 -31,-27 0,-18 10,-31 27,-31 17,0 
33,15 25,38 z`,.25:`m 129,-191 c -6,21 -22,40 -48,42 8,-23 -8,-38 
-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -20,69 
c -7,18 -22,33 -45,35 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 15,27 
31,27 40,0 57,-22 57,-22 l -36,128 12,4 77,-270 z`,.125:`m 129,-191 c -6,21 -22,40 -48,42 8,-23 -8,-38 
-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -20,69 
c -7,18 -22,33 -45,35 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 15,27 
31,27 40,0 57,-22 57,-22 L 68,20 C 61,37 46,51 24,52 32,29 16,14 -1,14 c 
-17,0 -27,13 -27,31 0,14 15,27 31,27 38,0 55,-20 57,-22 l -36,128 12,4 
105,-369 z`,.0625:`m 158,-292 c -6,21 -22,40 -48,42 8,-23 -8,-38 
-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -17,61 
v 0 c -6,21 -22,40 -48,42 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 
15,27 31,27 40,0 57,-22 57,-22 l -20,69 c -7,18 -22,33 -45,35 8,-23 -8,-38 
-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 L 68,20 C 
61,37 46,51 24,52 32,29 16,14 -1,14 c -17,0 -27,13 -27,31 0,14 15,27 31,27 
38,0 55,-20 57,-22 l -36,128 12,4 134,-469 z`},Te={50:{path:`m 101,-199 c -49,0 -100,28 -100,83 0,39 58,57 82,26 15,-20 
-4,-47 -32,-47 -23,1 -25,0 -25,-8 0,-22 40,-46 71,-41 91,16 67,208 -105,302 
75,-27 198,-94 211,-201 6,-66 -42,-114 -102,-114 z m 143,33 c -13,0 -23,11 
-23,24 0,14 10,24 23,24 13,0 23,-11 23,-24 0,-13 -10,-24 -23,-24 z m 2,83 c 
-13,0 -23,11 -23,24 0,14 10,24 23,24 13,0 23,-11 23,-24 0,-13 -10,-24 -23,-24 
z`,upper:-4,lower:3},71:{path:`M 139,48 C 102,57 76,120 131,151 41,128 64,24 129,2 L 
117,-57 C -32,47 26,217 166,182 Z m 12,-1 27,131 C 242,153 216,46 151,47 
Z m -35,-177 c 34,-23 82,-117 50,-140 -23,-17 -71,33 -50,140 z m -10,10 c 
-23,-77 -20,-200 48,-213 19,-4 89,171 -26,266 l 13,66 c 120,-6 137,155 
39,191 l 12,58 c 30,131 -137,145 -138,47 0,-29 37,-59 63,-37 21,18 25,71 
-25,70 32,42 103,0 91,-65 L 167,193 C 56,232 -112,63 106,-120 Z`,upper:-7,lower:8}},ke=[null,`m -49,-121 v 52 l -29,9 v -48 h -8 v 51 l -20,6 v 29 l 
20,-6 v 70 l -20,6 v 30 l 20,-6 v 51 h 8 V 69 l 30,-8 v 50 h 8 V 58 l 20,-6 
V 23 l -20,6 v -71 l 20,-6 v -29 l -20,6 v -50 z m 1,82 v 71 l -29,9 v -71 z`,`M -106,-166 V 67 c 52,-42 85,-56 85,-94 0,-47 -46,-51 
-73,-22 v -117 z m 31,120 c 20,0 42,46 -20,91 V -7 c 0,-28 10,-39 20,-39 z`,`m -81,-58 v -48 H -92 V 73 l 60,-13 v 50 h 11 V -72 Z m 
50,24 v 58 l -50,11 v -58 z`]},function(ne,ae,ce){ce.r(ae),ce.d(ae,"MIN_RESOLUTION",function(){return le}),ce.d(ae,"STEM_WIDTH",function(){return ue}),ce.d(ae,"LINE_STROKE",function(){return he}),ce.d(ae,"COMPACT_SPACING",function(){return fe});const le=.0625,ue=15,he=1,fe=150},function(ne,ae,ce){ce.r(ae),ce.d(ae,"MAX_QUARTER_DIVISION",function(){return ge}),ce.d(ae,"ScrollType",function(){return ve}),ce.d(ae,"StaffSVGRender",function(){return ye});var le=ce(2),ue=ce(0),he=ce(1);const fe=[{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[0,1,0,1,0,0,1,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,0,3,0,3,0,0,3,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,0,1,0,3,0,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,0,3,0,2,0,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,3,0,0,3,0,3,0,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,2,0,0,2,0,2,0,0,3]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-7],accidental:[3,0,3,0,3,0,0,3,0,3,0,0]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[0,1,0,1,0,3,0,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,0,3,0,3,0,2,0,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,0,1,0,3,0,3,0,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,0,3,0,2,0,2,0,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,3,0,0,3,0,3,0,3,0,0]}],me=[{accidental:1,pitches:[]},{accidental:2,pitches:[70,75,68,73,66]},{accidental:1,pitches:[78,73]},{accidental:2,pitches:[70,75,68]},{accidental:1,pitches:[78,73,80,75]},{accidental:2,pitches:[70]},{accidental:2,pitches:[70,75,68,73,66,71]},{accidental:1,pitches:[78]},{accidental:2,pitches:[70,75,68,73]},{accidental:1,pitches:[78,73,80]},{accidental:2,pitches:[70,75]},{accidental:1,pitches:[78,73,80,75,70]}],ge=16;var ve;(function(be){be[be.PAGE=0]="PAGE",be[be.NOTE=1]="NOTE",be[be.BAR=2]="BAR"})(ve||(ve={}));class ye{constructor(Ee,Ce,Se){this.handleScrollEvent=Te=>{this.lastKnownScrollLeft=this.parentElement.scrollLeft,this.ticking||window.requestAnimationFrame(()=>{this.changeAndDrawSignaturesIfNeeded(this.lastKnownScrollLeft),this.ticking=!1}),this.ticking=!0},this.scoreInfo=Ee,this.config={noteHeight:Ce.noteHeight||6,noteSpacing:Ce.noteSpacing||1,pixelsPerTimeStep:Ce.pixelsPerTimeStep||30,noteRGB:Ce.noteRGB||"8, 41, 64",activeNoteRGB:Ce.activeNoteRGB||"240, 84, 119"},this.div=Se,this.timeSignatureNumerator=4,this.timeSignatureDenominator=4,this.key=Ce.defaultKey||0,this.scrollType=Ce.scrollType||ve.PAGE,this.scale=this.config.noteHeight/he.PATH_SCALE,(Ce.pixelsPerTimeStep===void 0||Ce.pixelsPerTimeStep<=0)&&(this.config.pixelsPerTimeStep=0,this.config.noteSpacing=le.COMPACT_SPACING*this.scale),this.clear(),this.redraw()}clear(){for(;this.div.lastChild;)this.div.removeChild(this.div.lastChild);this.div.style.overflow="visible",this.div.style.position="relative",this.overlaySVG=document.createElementNS(ue.SVGNS,"svg"),this.overlaySVG.style.position="absolute",this.div.appendChild(this.overlaySVG),this.overlayG=Object(ue.createSVGGroupChild)(this.overlaySVG,"overlay"),this.signaturesBlinking=!1,this.signaturesQuarters=0,this.parentElement=document.createElement("div"),this.parentElement.style.overflow="auto",this.div.appendChild(this.parentElement),this.ticking=!1,this.lastKnownScrollLeft=0,this.parentElement.addEventListener("scroll",this.handleScrollEvent),this.staffSVG=document.createElementNS(ue.SVGNS,"svg"),this.parentElement.appendChild(this.staffSVG),this.staffG=Object(ue.createSVGGroupChild)(this.staffSVG,"staff"),this.linesG=Object(ue.createSVGGroupChild)(this.staffSVG,"lines"),this.setStroke(this.linesG),this.staffG.appendChild(this.linesG),this.musicG=Object(ue.createSVGGroupChild)(this.staffSVG,"music"),this.setFill(this.musicG),this.setStroke(this.musicG,0),this.staffG.appendChild(this.musicG),this.signaturesG=Object(ue.createSVGGroupChild)(this.staffSVG,"signatures"),this.staffG.appendChild(this.signaturesG);let Ee=0,Ce=0;this.scoreInfo.notes.forEach(Te=>{Ee+=Te.pitch,++Ce});const Se=Ee/Ce;this.clef=Se<60?50:71,this.signaturesList=[{x:0,q:0}],this.signatureCurrent=0,this.signatureNext=0,this.changeKeySignatureIfNeeded(0),this.changeTimeSignatureIfNeeded(0),this.vStepSize=this.config.noteHeight/2,this.hStepSize=this.config.pixelsPerTimeStep,this.staffOffset=0,this.height=0,this.width=0,this.musicBlockMap=new Map,this.playingNotes=[],this.lastBar=0,this.barAccidentals={},this.lastQ=-1}isPaintingActiveNote(Ee,Ce){const Se=Ee.start===Ce.start,Te=Ee.start<=Ce.start&&Ee.start+Ee.length>=Ce.start+Ce.length;return Se||Te}redraw(Ee,Ce){let Se=-1;const Te=this.config.pixelsPerTimeStep===0;if(Ee){const ke=[];this.playingNotes.forEach(Fe=>{this.isPaintingActiveNote(Fe,Ee)?ke.push(Fe):this.highlightElement(this.getGroup(Fe),!1)}),this.playingNotes=ke;const Ne=this.getGroup(Ee);if(Ne){this.playingNotes.push(Ee),this.highlightElement(Ne,!0),Se=Ne.getBoundingClientRect().left-this.staffSVG.getBoundingClientRect().left;const Fe=Ee.start,De=Ne.getAttribute("data-is-bar-beginning");(this.scrollType!==ve.BAR||De)&&this.scrollIntoViewIfNeeded(Ce,Se),!Te&&this.signaturesBlinking&&Fe>=this.signaturesQuarters&&(this.signaturesBlinking=!1,Object(ue.setFade)(this.overlayG,this.signaturesBlinking))}}else{this.setDetails();const ke=this.lastQ===-1;let Ne=0,Fe=0;ke?(Fe=this.drawSignatures(this.overlayG,Ne,!0,!0,!0),Te&&(this.width=0,Fe+=this.config.noteSpacing),Fe+=this.drawRests(this.initialRest,Ne+Fe)):Ne=this.width,this.musicBlockMap.forEach((Re,Be)=>{Te||(Ne=this.quartersToTime(Be)*this.hStepSize),Be>this.lastQ?(Fe+=this.drawMusicBlock(Re,Ne+Fe),this.lastQ=Be):Be===this.lastQ&&(Fe+=this.drawRests(Re,Ne+Fe))});const De=this.staffSVG.getBoundingClientRect(),Oe=this.musicG.getBoundingClientRect();if(this.updateVerticalBoundaries(Oe.top-De.top,Oe.bottom-De.top),Te)this.width+=Fe;else{const Re=this.musicBlockMap.get(this.lastQ),Be=this.quartersToTime(this.lastQ+Re.notes[0].length);this.width=Be*this.config.pixelsPerTimeStep}this.staffSVG.setAttributeNS(null,"width",`${this.width}`),this.redrawStaff(this.linesG,0,this.width)}return Se}drawMusicBlock(Ee,Ce){const Se=Ee.notes[0].start;let Te=this.drawBarIfNeeded(Se,Ce);Te+=this.drawSignaturesIfNeeded(Se,Ce+Te);let ke=0;for(let De=4;De>=le.MIN_RESOLUTION&&!ke;De/=2)De<=Ee.notes[0].length&&(ke=De);if(ke===0){const De=Ee.notes[0].length===0?"[infinite]":`${4/Ee.notes[0].length}`;console.warn(" StaffRender ","background:orange; color:white",`StaffRender does not handle notes shorther than 1/${4/le.MIN_RESOLUTION}th, and this score tries to draw a 1/${De}th. Shortest possible note will be drawn instead.`),ke=le.MIN_RESOLUTION}const Ne=he.NOTE_PATHS[ke];let Fe;if(Ne.stemAnchor&&(Fe=Object(ue.createSVGGroupChild)(this.musicG,"stem")),Ee.notes.forEach(De=>{const Oe=De.vSteps*this.vStepSize,Re=2*(De.vSteps>0?Math.floor(De.vSteps/2):Math.ceil(De.vSteps/2)),Be=De.vSteps>0?-2:2;for(let Le=Re;Math.abs(Le)>4;Le+=Be)Object(ue.drawSVGPath)(this.linesG,he.extraLinePath,Ce+Te,Le*this.vStepSize,this.scale,1);if(De.g=De.tiedFrom?De.tiedFrom.g:Object(ue.createSVGGroupChild)(this.musicG,`${De.start}-${De.pitch}`),Ee.isBarBeginning&&De.g.setAttribute("data-is-bar-beginning","true"),De.tiedFrom){const Le=Ce+Te-De.tiedFrom.xHeadRight;Object(ue.drawSVGPath)(De.g,he.tiePath,De.tiedFrom.xHeadRight,Oe,Le/he.PATH_SCALE,this.scale*(De.vSteps<0?-1:1),De.opacity)}Object(ue.drawSVGPath)(De.g,Ne.path,Ce+Te,Oe,this.scale,this.scale,De.opacity),De.xHeadRight=Ce+Te+Ne.width*this.scale,1.5*ke<=De.length&&Object(ue.drawSVGPath)(De.g,he.dotPath,Ce+Te+Ne.width*this.scale+this.vStepSize/2,Oe-this.vStepSize/2,this.scale,this.scale,De.opacity),De.accidental!==0&&Object(ue.drawSVGPath)(De.g,he.ACCIDENTAL_PATHS[De.accidental],Ce+Te,Oe,this.scale,this.scale,De.opacity)}),Ne.stemAnchor){let De,Oe,Re=Ce+Te;const Be=Ne.stemAnchor*this.scale,Le=Ee.minVStep+Ee.maxVStep<0,je=Ne.flags>2?2*(Ne.flags-2):0;if(Le?(De=Ee.maxVStep*this.vStepSize-Be,Oe=(Ee.minVStep+7+je)*this.vStepSize):(Re+=(Ne.width-le.STEM_WIDTH)*this.scale,De=Ee.minVStep*this.vStepSize+Be,Oe=(Ee.maxVStep-7-je)*this.vStepSize),Object(ue.drawSVGPath)(Fe,he.stemPath,Re,De,this.scale,(Oe-De)/he.PATH_SCALE),Ne.flags===1)Object(ue.drawSVGPath)(Fe,he.singleFlagPath,Re,Oe,this.scale,this.scale*(Le?-1:1),1);else if(Ne.flags>1)for(let Ge=0;Ge<Ne.flags;++Ge)Object(ue.drawSVGPath)(Fe,he.multiFlagPath,Re,Oe,this.scale,this.scale*(Le?-1:1),1),Oe+=(Le?-2:2)*this.vStepSize}return this.config.pixelsPerTimeStep===0&&(Te+=Ne.width*this.scale,Fe&&(Te+=Fe.getBoundingClientRect().width),Te+=this.config.noteSpacing),Te+=this.drawRests(Ee,Ce+Te)}drawBarIfNeeded(Ee,Ce){let Se=0;const Te=this.lastBar+this.getBarLength();return Ee!==0&&Ee>=Te&&(this.config.pixelsPerTimeStep>0?Ce-=this.config.noteSpacing:Se=this.config.noteSpacing,Object(ue.drawSVGPath)(this.linesG,he.barPath,Ce,0,1,this.scale),this.lastBar=Te),Se}drawRests(Ee,Ce){let Se=0,Te=Ee.restToNextLength;if(Te){this.config.pixelsPerTimeStep>0&&(Ce+=this.quartersToTime(Ee.notes[0].length)*this.hStepSize);let ke=Ee.notes[0].start+Ee.notes[0].length,Ne=0;const Fe=this.lastBar+this.getBarLength()-ke;let De;for(Te>Fe&&(Ne=Te-Fe,Te=Fe),De=4;De>this.getBarLength()&&De>=le.MIN_RESOLUTION;De/=2);let Oe=De;for(;(Te||Ne)&&Oe>=le.MIN_RESOLUTION;){if(Oe<=Te){Se+=this.drawBarIfNeeded(ke,Ce+Se),Se+=this.drawSignaturesIfNeeded(ke,Ce+Se);const Re=Object(ue.drawSVGPath)(this.musicG,he.REST_PATHS[Oe],Ce+Se,0,this.scale,this.scale);this.config.pixelsPerTimeStep>0?Ce+=this.quartersToTime(Oe)*this.hStepSize:(Se+=Re.getBoundingClientRect().width,Se+=this.config.noteSpacing),ke+=Oe,Te-=Oe}if(Ne&&Te<=0){const Re=this.getBarLength();for(Ne>Re?(Te=Re,Ne-=Re):(Te=Ne,Ne=0),De=4;De>this.getBarLength()&&De>=le.MIN_RESOLUTION;De/=2);Oe=De}Te<Oe&&(Oe/=2)}}return Se}redrawStaff(Ee,Ce,Se){let Te=Ee.querySelector('g[data-id="staff-five-lines"]');if(Te)Te.setAttributeNS(null,"transform",`scale(${Se/he.PATH_SCALE}, 1)`);else{Te=Object(ue.createSVGGroupChild)(Ee,"staff-five-lines");const ke=0;for(let Ne=-4;Ne<=4;Ne+=2)Object(ue.drawSVGPath)(Te,he.staffLinePath,Ce,ke+Ne*this.vStepSize,Se/he.PATH_SCALE,1)}return Te}clearSignatureOverlay(){for(;this.overlayG.lastChild;)this.overlayG.removeChild(this.overlayG.lastChild)}drawSignaturesIfNeeded(Ee,Ce){let Se=0;const Te=this.changeKeySignatureIfNeeded(Ee),ke=this.changeTimeSignatureIfNeeded(Ee);if(Te||ke){const Ne=le.COMPACT_SPACING*this.scale*(this.config.pixelsPerTimeStep>0?3:2);this.signaturesList.push({x:Ce-Ne,q:Ee}),this.signatureNext===null&&(this.signatureNext=Ce);const Fe=Ee>0?Object(ue.createSVGGroupChild)(this.signaturesG,"signatures"):this.overlayG;Se+=this.drawSignatures(Fe,Ce+Se,!1,Te,ke)}return this.config.pixelsPerTimeStep===0?Se:0}drawSignatures(Ee,Ce,Se,Te,ke){const Ne=le.COMPACT_SPACING*this.scale;let Fe,De=Ne;const Oe=Ee===this.overlayG||this.config.pixelsPerTimeStep>0;if(Oe){(Fe=document.createElementNS(ue.SVGNS,"rect")).setAttributeNS(null,"x",`${Ce}`),Fe.setAttributeNS(null,"y","0"),Fe.setAttributeNS(null,"width","1"),Fe.setAttributeNS(null,"height","1"),Fe.setAttribute("data-id","background"),Ee.appendChild(Fe);const je=document.defaultView.getComputedStyle(this.div.parentElement);Fe.setAttributeNS(null,"fill",je.getPropertyValue("background-color"))}if(Se){const je=Object(ue.drawSVGPath)(Ee,he.CLEF_PATHS[this.clef].path,Ce+De,0,this.scale,this.scale);this.setFill(je),De+=3*Ne}if(Te){const je=me[this.key].accidental,Ge=this.clef===71?0:14;me[this.key].pitches.forEach(qe=>{const Ue=this.getPitchDetails(qe).vSteps,ze=Object(ue.drawSVGPath)(Ee,he.ACCIDENTAL_PATHS[je],Ce+De,(Ge+Ue)*this.vStepSize,this.scale,this.scale);this.setFill(ze),De+=ze.getBoundingClientRect().width})}if(ke){const je=Object(ue.createSVGGroupChild)(Ee,"time-key"),Ge=`${2.85*this.config.noteHeight}px`;Object(ue.drawSVGText)(je,`${this.timeSignatureNumerator}`,Ce+De,-.5,Ge,!0),Object(ue.drawSVGText)(je,`${this.timeSignatureDenominator}`,Ce+De,4*this.vStepSize-.5,Ge,!0),this.setFill(je),De+=je.getBoundingClientRect().width+Ne}const Re=this.redrawStaff(Ee,Ce,De);this.setStroke(Re);const Be=this.div.getBoundingClientRect(),Le=Ee.getBoundingClientRect();if(this.updateVerticalBoundaries(Le.top-Be.top,Le.bottom-Be.top),Oe&&(Fe.setAttributeNS(null,"y",`${-this.staffOffset}`),Fe.setAttributeNS(null,"height",`${this.height}`),Fe.setAttributeNS(null,"width",`${De}`)),Ee===this.overlayG){this.overlaySVG.setAttributeNS(null,"width",`${De+5}`);for(let je=0;je<5;++je){const Ge=Object(ue.drawSVGPath)(Ee,he.stemPath,De+je,je*je-this.staffOffset,1/le.STEM_WIDTH,(this.height-2*je*je)/he.PATH_SCALE,(je-5)*(je-5)*2/he.PATH_SCALE);this.setFill(Ge)}}if(this.config.pixelsPerTimeStep>0){const je=this.signaturesQuarters===0;return je&&(this.signaturesQuarters=this.timeToQuarters(De/this.hStepSize)),(je||Ce>0)&&(this.signaturesBlinking=!0,Object(ue.setFade)(Ee,this.signaturesBlinking)),0}return De}changeKeySignatureIfNeeded(Ee){if(this.scoreInfo.keySignatures){let Ce=this.key;for(let Se=0;Se<this.scoreInfo.keySignatures.length&&this.scoreInfo.keySignatures[Se].start<=Ee;++Se)Ce=this.scoreInfo.keySignatures[Se].key;if(Ce!==this.key)return this.key=Ce,!0}return!1}changeTimeSignatureIfNeeded(Ee){if(this.scoreInfo.timeSignatures){let Ce=this.timeSignatureNumerator,Se=this.timeSignatureDenominator;for(let Te=0;Te<this.scoreInfo.timeSignatures.length&&this.scoreInfo.timeSignatures[Te].start<=Ee;++Te)Ce=this.scoreInfo.timeSignatures[Te].numerator,Se=this.scoreInfo.timeSignatures[Te].denominator;if(Ce!==this.timeSignatureNumerator||Se!==this.timeSignatureDenominator)return this.timeSignatureNumerator=Ce,this.timeSignatureDenominator=Se,!0}return!1}changeAndDrawSignaturesIfNeeded(Ee){let Ce;if(Ee<this.signatureCurrent||this.signatureNext!==null&&this.signatureNext<=Ee){Ce=this.signaturesList[0].q,this.signatureNext=null;for(let Se=0;Se<this.signaturesList.length;++Se){if(Ee<this.signaturesList[Se].x){this.signatureNext=this.signaturesList[Se].x;break}this.signatureCurrent=this.signaturesList[Se].x,Ce=this.signaturesList[Se].q}}if(Ce!==void 0){const Se=this.key,Te=this.timeSignatureNumerator,ke=this.timeSignatureDenominator;this.changeKeySignatureIfNeeded(Ce),this.changeTimeSignatureIfNeeded(Ce),this.clearSignatureOverlay(),this.drawSignatures(this.overlayG,0,!0,!0,!0),this.key=Se,this.timeSignatureNumerator=Te,this.timeSignatureDenominator=ke}this.config.pixelsPerTimeStep>0&&Ee===0&&(this.signatureNext=0,this.signaturesBlinking=!0,Object(ue.setFade)(this.overlayG,this.signaturesBlinking))}getBarLength(){return 4*this.timeSignatureNumerator/this.timeSignatureDenominator}scrollIntoViewIfNeeded(Ee,Ce){if(Ee)if(this.scrollType===ve.PAGE){const Se=this.parentElement.getBoundingClientRect().width;Ce>this.parentElement.scrollLeft+Se&&(this.parentElement.scrollLeft=Ce-20)}else{const Se=this.parentElement.getBoundingClientRect().width;this.parentElement.scrollLeft=Ce-.5*Se}}updateVerticalBoundaries(Ee,Ce){let Se=0;if(Ee<0){this.staffOffset-=Ee;const Te=`translate(0, ${this.staffOffset})`;this.overlayG.setAttributeNS(null,"transform",Te),this.staffG.setAttributeNS(null,"transform",Te),Se=this.height-Ee}if((Se=Math.max(Se,Ce-Ee))>this.height){this.height=Se,this.overlaySVG.setAttributeNS(null,"height",`${this.height}`),this.staffSVG.setAttributeNS(null,"height",`${this.height}`);const Te=this.div.querySelectorAll('rect[data-id="background"]');for(let ke=0;ke<Te.length;++ke){const Ne=Te[ke];Ne.setAttributeNS(null,"y",`${-this.staffOffset}`),Ne.setAttributeNS(null,"height",`${this.height}`)}}}setFill(Ee,Ce=!1){Ee.setAttributeNS(null,"fill",this.getColor(Ce))}setStroke(Ee,Ce=le.LINE_STROKE,Se=!1){Ee.setAttributeNS(null,"stroke",this.getColor(Se)),Ee.setAttributeNS(null,"stroke-width",`${Ce}`)}getColor(Ee){return`rgb(${Ee?this.config.activeNoteRGB:this.config.noteRGB})`}getOpacity(Ee){return Ee?Ee/127*.8+.2:1}getGroup(Ee){const Ce=Ee.start,Se=Ee.pitch;return this.staffSVG.querySelector(`g[data-id="${Ce}-${Se}"]`)}highlightElement(Ee,Ce){Ee.setAttribute("fill",this.getColor(Ce)),Ee.setAttribute("stroke",this.getColor(Ce))}getBarBeginnings(){const Ee=new Set;let Ce=0;this.scoreInfo.notes.forEach(ke=>{ke.start+ke.length>Ce&&(Ce=ke.start+ke.length)});const Se=this.scoreInfo.timeSignatures?this.scoreInfo.timeSignatures.slice(0):[{start:0,numerator:4,denominator:4}];Se.sort((ke,Ne)=>ke.start-Ne.start);let Te=0;for(let ke=0;ke<Se.length;++ke){const Ne=ke===Se.length-1?Ce:Se[ke].start,Fe=4*Se[ke].numerator/Se[ke].denominator;for(;Te<Ne;Te+=Fe)Ee.add(Te)}return Ee}quartersToTime(Ee){return Ee/this.scoreInfo.tempos[0].qpm*60}timeToQuarters(Ee){return Ee*this.scoreInfo.tempos[0].qpm/60}setDetails(){let Ee=new Map;const Ce=this.getBarBeginnings(),Se=new Set(Ce);this.scoreInfo.notes.slice().sort((Oe,Re)=>Oe.start-Re.start).forEach(Oe=>{const Re=this.getQNote(Oe);Se.add(Re.start),Se.add(Re.start+Re.length),Ee.has(Re.start)?Ee.get(Re.start).push(Re):Ee.set(Re.start,[Re])}),Array.from(Se).sort((Oe,Re)=>Oe-Re).forEach(Oe=>{const Re=[];Ee.forEach(Be=>{Be.forEach(Le=>{const je=this.splitQNote(Le,Oe);je&&Re.push(je)})}),Re.forEach(Be=>{Ee.has(Be.start)?Ee.get(Be.start).push(Be):Ee.set(Be.start,[Be])})}),Ee=new Map(Array.from(Ee).sort((Oe,Re)=>Oe[0]-Re[0]));const Te=this.key;let ke=null,Ne=0;const Fe=Ce[Symbol.iterator]();let De=Fe.next();Ee.forEach((Oe,Re)=>{const Be={maxVStep:Number.MAX_SAFE_INTEGER,minVStep:Number.MIN_SAFE_INTEGER,restToNextLength:0,isBarBeginning:!1,notes:[]};this.changeKeySignatureIfNeeded(Re);const Le=De.value+this.getBarLength();!De.done&&Re>=Le&&(De=Fe.next(),this.barAccidentals={},Be.isBarBeginning=!0),Oe.forEach(je=>{this.analyzePitch(je,Re),Be.minVStep=Math.max(je.vSteps,Be.minVStep),Be.maxVStep=Math.min(je.vSteps,Be.maxVStep),Be.notes.push(je)}),ke&&(ke.restToNextLength=Re-Ne),this.musicBlockMap.set(Re,Be),ke=Be,Ne=Re+Be.notes[0].length}),this.initialRest={maxVStep:0,minVStep:0,restToNextLength:this.musicBlockMap.values().next().value.notes[0].start,isBarBeginning:!0,notes:[{start:0,length:0,vSteps:0,accidental:0,opacity:0,pitch:0,xHeadRight:0}]},this.key=Te}getQNote(Ee){return{start:Ee.start,length:Ee.length,vSteps:0,accidental:0,opacity:this.getOpacity(Ee.intensity),pitch:Ee.pitch,xHeadRight:0}}splitQNote(Ee,Ce){const Se=Ee.start+Ee.length-Ce;return Ce>Ee.start&&Se>0?(Ee.length-=Se,{start:Ce,length:Se,vSteps:Ee.vSteps,accidental:Ee.accidental,opacity:Ee.opacity,pitch:Ee.pitch,xHeadRight:0,tiedFrom:Ee}):null}analyzePitch(Ee,Ce){const Se=this.getPitchDetails(Ee.pitch);Se.vSteps in this.barAccidentals?Se.accidental===this.barAccidentals[Se.vSteps]?Se.accidental=0:(this.barAccidentals[Se.vSteps]===3?Se.accidental=Se.keyAccidental:Se.accidental===0&&(Se.accidental=3),this.barAccidentals[Se.vSteps]=Se.accidental):(Ee.tiedFrom&&(Se.accidental=0),this.barAccidentals[Se.vSteps]=Se.accidental),Ee.vSteps=Se.vSteps,Ee.accidental=Se.accidental}getPitchDetails(Ee){const Ce=Ee-60,Se=Math.floor(Ce/12),Te=Ce-12*Se,ke=fe[this.key].steps[Te],Ne=this.clef===71?6:-6,Fe=me[this.key].accidental===1?69+(Te+3)%12:64+(Te+8)%12;return{vSteps:Ne-7*Se+ke,accidental:fe[this.key].accidental[Te],keyAccidental:me[this.key].pitches.indexOf(Fe)>-1?me[this.key].accidental:0}}}},function(ne,ae,ce){ce.r(ae);var le=ce(3);ce.d(ae,"MAX_QUARTER_DIVISION",function(){return le.MAX_QUARTER_DIVISION}),ce.d(ae,"ScrollType",function(){return le.ScrollType}),ce.d(ae,"StaffSVGRender",function(){return le.StaffSVGRender})}])})})(es6);var es6Exports=es6.exports;const MIN_NOTE_LENGTH=1;class BaseVisualizer{constructor(ee,ne={}){const ae=isQuantizedSequence(ee),ce=ee.tempos&&ee.tempos.length>0?ee.tempos[0].qpm:void 0;this.noteSequence=ae?unquantizeSequence(ee,ce):ee;const le=30;this.config={noteHeight:ne.noteHeight||6,noteSpacing:ne.noteSpacing||1,pixelsPerTimeStep:ne.pixelsPerTimeStep||le,noteRGB:ne.noteRGB||"8, 41, 64",activeNoteRGB:ne.activeNoteRGB||"240, 84, 119",minPitch:ne.minPitch,maxPitch:ne.maxPitch};const ue=this.getSize();this.width=ue.width,this.height=ue.height}updateMinMaxPitches(ee=!1){if(!(this.config.minPitch&&this.config.maxPitch)){this.config.minPitch===void 0&&(this.config.minPitch=MAX_MIDI_PITCH),this.config.maxPitch===void 0&&(this.config.maxPitch=MIN_MIDI_PITCH);for(const ne of this.noteSequence.notes)this.config.minPitch=Math.min(ne.pitch,this.config.minPitch),this.config.maxPitch=Math.max(ne.pitch,this.config.maxPitch);ee||(this.config.minPitch-=2,this.config.maxPitch+=2)}}getSize(){this.updateMinMaxPitches();const ee=(this.config.maxPitch-this.config.minPitch)*this.config.noteHeight,ne=this.noteSequence.totalTime;if(!ne)throw new Error("The sequence you are using with the visualizer does not have a totalQuantizedSteps or totalTime field set, so the visualizer can't be horizontally sized correctly.");return{width:ne*this.config.pixelsPerTimeStep,height:ee}}getNotePosition(ee,ne){const ae=this.getNoteEndTime(ee)-this.getNoteStartTime(ee),ce=this.getNoteStartTime(ee)*this.config.pixelsPerTimeStep,le=Math.max(this.config.pixelsPerTimeStep*ae-this.config.noteSpacing,MIN_NOTE_LENGTH),ue=this.height-(ee.pitch-this.config.minPitch)*this.config.noteHeight;return{x:ce,y:ue,w:le,h:this.config.noteHeight}}scrollIntoViewIfNeeded(ee,ne){if(ee&&this.parentElement){const ae=this.parentElement.getBoundingClientRect().width;ne>this.parentElement.scrollLeft+ae&&(this.parentElement.scrollLeft=ne-20)}}getNoteStartTime(ee){return Math.round(ee.startTime*1e8)/1e8}getNoteEndTime(ee){return Math.round(ee.endTime*1e8)/1e8}isPaintingActiveNote(ee,ne){const ae=this.getNoteStartTime(ee)===this.getNoteStartTime(ne),ce=this.getNoteStartTime(ee)<=this.getNoteStartTime(ne)&&this.getNoteEndTime(ee)>=this.getNoteEndTime(ne);return ae||ce}}class BaseSVGVisualizer extends BaseVisualizer{constructor(ee,ne={}){super(ee,ne),this.drawn=!1}redraw(ee,ne){if(this.drawn||this.draw(),!ee)return null;this.unfillActiveRect(this.svg);let ae;for(let ce=0;ce<this.noteSequence.notes.length;ce++){const le=this.noteSequence.notes[ce];if(!(ee&&this.isPaintingActiveNote(le,ee)))continue;const he=this.svg.querySelector(`rect[data-index="${ce}"]`);this.fillActiveRect(he,le),le===ee&&(ae=parseFloat(he.getAttribute("x")))}return this.scrollIntoViewIfNeeded(ne,ae),ae}fillActiveRect(ee,ne){ee.setAttribute("fill",this.getNoteFillColor(ne,!0)),ee.classList.add("active")}unfillActiveRect(ee){const ne=ee.querySelectorAll("rect.active");for(let ae=0;ae<ne.length;++ae){const ce=ne[ae],le=this.getNoteFillColor(this.noteSequence.notes[parseInt(ce.getAttribute("data-index"),10)],!1);ce.setAttribute("fill",le),ce.classList.remove("active")}}draw(){for(let ee=0;ee<this.noteSequence.notes.length;ee++){const ne=this.noteSequence.notes[ee],ae=this.getNotePosition(ne,ee),ce=this.getNoteFillColor(ne,!1),le=[["index",ee],["instrument",ne.instrument],["program",ne.program],["isDrum",ne.isDrum===!0],["pitch",ne.pitch]],ue=[["--midi-velocity",String(ne.velocity!==void 0?ne.velocity:127)]];this.drawNote(ae.x,ae.y,ae.w,ae.h,ce,le,ue)}this.drawn=!0}getNoteFillColor(ee,ne){const ce=ee.velocity?ee.velocity/100+.2:1;return`rgba(${ne?this.config.activeNoteRGB:this.config.noteRGB},
  ${ce})`}drawNote(ee,ne,ae,ce,le,ue,he){if(!this.svg)return;const fe=document.createElementNS("http://www.w3.org/2000/svg","rect");fe.classList.add("note"),fe.setAttribute("fill",le),fe.setAttribute("x",`${Math.round(ee)}`),fe.setAttribute("y",`${Math.round(ne)}`),fe.setAttribute("width",`${Math.round(ae)}`),fe.setAttribute("height",`${Math.round(ce)}`),ue.forEach(([me,ge])=>{ge!==void 0&&(fe.dataset[me]=`${ge}`)}),he.forEach(([me,ge])=>{fe.style.setProperty(me,ge)}),this.svg.appendChild(fe)}clear(){this.svg.innerHTML="",this.drawn=!1}clearActiveNotes(){this.unfillActiveRect(this.svg)}}class PianoRollSVGVisualizer extends BaseSVGVisualizer{constructor(ee,ne,ae={}){if(super(ee,ae),!(ne instanceof SVGSVGElement))throw new Error("This visualizer requires an <svg> element to display the visualization");this.svg=ne,this.parentElement=ne.parentElement;const ce=this.getSize();this.width=ce.width,this.height=ce.height,this.svg.style.width=`${this.width}px`,this.svg.style.height=`${this.height}px`,this.clear(),this.draw()}}class WaterfallSVGVisualizer extends BaseSVGVisualizer{constructor(ee,ne,ae={}){if(super(ee,ae),this.NOTES_PER_OCTAVE=12,this.WHITE_NOTES_PER_OCTAVE=7,this.LOW_C=24,this.firstDrawnOctave=0,this.lastDrawnOctave=6,!(ne instanceof HTMLDivElement))throw new Error("This visualizer requires a <div> element to display the visualization");this.config.whiteNoteWidth=ae.whiteNoteWidth||20,this.config.blackNoteWidth=ae.blackNoteWidth||this.config.whiteNoteWidth*2/3,this.config.whiteNoteHeight=ae.whiteNoteHeight||70,this.config.blackNoteHeight=ae.blackNoteHeight||2*70/3,this.config.showOnlyOctavesUsed=ae.showOnlyOctavesUsed,this.setupDOM(ne);const ce=this.getSize();this.width=ce.width,this.height=ce.height,this.svg.style.width=`${this.width}px`,this.svg.style.height=`${this.height}px`,this.svgPiano.style.width=`${this.width}px`,this.svgPiano.style.height=`${this.config.whiteNoteHeight}px`,this.parentElement.style.width=`${this.width+this.config.whiteNoteWidth}px`,this.parentElement.scrollTop=this.parentElement.scrollHeight,this.clear(),this.drawPiano(),this.draw()}setupDOM(ee){this.parentElement=document.createElement("div"),this.parentElement.classList.add("waterfall-notes-container");const ne=Math.max(ee.getBoundingClientRect().height,200);this.parentElement.style.paddingTop=`${ne-this.config.whiteNoteHeight}px`,this.parentElement.style.height=`${ne-this.config.whiteNoteHeight}px`,this.parentElement.style.boxSizing="border-box",this.parentElement.style.overflowX="hidden",this.parentElement.style.overflowY="auto",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgPiano=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.classList.add("waterfall-notes"),this.svgPiano.classList.add("waterfall-piano"),this.parentElement.appendChild(this.svg),ee.innerHTML="",ee.appendChild(this.parentElement),ee.appendChild(this.svgPiano)}redraw(ee,ne){if(this.drawn||this.draw(),!ee)return null;this.clearActiveNotes(),this.parentElement.style.paddingTop=this.parentElement.style.height;for(let ae=0;ae<this.noteSequence.notes.length;ae++){const ce=this.noteSequence.notes[ae];if(!(ee&&this.isPaintingActiveNote(ce,ee)))continue;const ue=this.svg.querySelector(`rect[data-index="${ae}"]`);this.fillActiveRect(ue,ce);const he=this.svgPiano.querySelector(`rect[data-pitch="${ce.pitch}"]`);if(this.fillActiveRect(he,ce),ce===ee){const fe=parseFloat(ue.getAttribute("y")),me=parseFloat(ue.getAttribute("height"));return fe<this.parentElement.scrollTop-me&&(this.parentElement.scrollTop=fe+me),fe}}return null}getSize(){this.updateMinMaxPitches(!0);let ee=52;if(this.config.showOnlyOctavesUsed){let le=!1,ue=!1;for(let he=1;he<7;he++){const fe=this.LOW_C+this.NOTES_PER_OCTAVE*he;!le&&fe>this.config.minPitch&&(this.firstDrawnOctave=he-1,le=!0),!ue&&fe>this.config.maxPitch&&(this.lastDrawnOctave=he-1,ue=!0)}ee=(this.lastDrawnOctave-this.firstDrawnOctave+1)*this.WHITE_NOTES_PER_OCTAVE}const ne=ee*this.config.whiteNoteWidth,ae=this.noteSequence.totalTime;if(!ae)throw new Error("The sequence you are using with the visualizer does not have a totalQuantizedSteps or totalTime field set, so the visualizer can't be horizontally sized correctly.");const ce=Math.max(ae*this.config.pixelsPerTimeStep,MIN_NOTE_LENGTH);return{width:ne,height:ce}}getNotePosition(ee,ne){const ae=this.svgPiano.querySelector(`rect[data-pitch="${ee.pitch}"]`);if(!ae)return null;const ce=this.getNoteEndTime(ee)-this.getNoteStartTime(ee),le=Number(ae.getAttribute("x")),ue=Number(ae.getAttribute("width")),he=Math.max(this.config.pixelsPerTimeStep*ce-this.config.noteSpacing,MIN_NOTE_LENGTH),fe=this.height-this.getNoteStartTime(ee)*this.config.pixelsPerTimeStep-he;return{x:le,y:fe,w:ue,h:he}}drawPiano(){this.svgPiano.innerHTML="";const ee=this.config.whiteNoteWidth-this.config.blackNoteWidth/2,ne=[1,3,6,8,10];let ae=0,ce=0;this.config.showOnlyOctavesUsed?ce=this.firstDrawnOctave*this.NOTES_PER_OCTAVE+this.LOW_C:(ce=this.LOW_C-3,this.drawWhiteKey(ce,ae),this.drawWhiteKey(ce+2,this.config.whiteNoteWidth),ce+=3,ae=2*this.config.whiteNoteWidth);for(let le=this.firstDrawnOctave;le<=this.lastDrawnOctave;le++)for(let ue=0;ue<this.NOTES_PER_OCTAVE;ue++)ne.indexOf(ue)===-1&&(this.drawWhiteKey(ce,ae),ae+=this.config.whiteNoteWidth),ce++;this.config.showOnlyOctavesUsed?(ce=this.firstDrawnOctave*this.NOTES_PER_OCTAVE+this.LOW_C,ae=-this.config.whiteNoteWidth):(this.drawWhiteKey(ce,ae),ce=this.LOW_C-3,this.drawBlackKey(ce+1,ee),ce+=3,ae=this.config.whiteNoteWidth);for(let le=this.firstDrawnOctave;le<=this.lastDrawnOctave;le++)for(let ue=0;ue<this.NOTES_PER_OCTAVE;ue++)ne.indexOf(ue)!==-1?this.drawBlackKey(ce,ae+ee):ae+=this.config.whiteNoteWidth,ce++}drawWhiteKey(ee,ne){const ae=document.createElementNS("http://www.w3.org/2000/svg","rect");return ae.dataset.pitch=String(ee),ae.setAttribute("x",String(ne)),ae.setAttribute("y","0"),ae.setAttribute("width",String(this.config.whiteNoteWidth)),ae.setAttribute("height",String(this.config.whiteNoteHeight)),ae.setAttribute("fill","white"),ae.setAttribute("original-fill","white"),ae.setAttribute("stroke","black"),ae.setAttribute("stroke-width","3px"),ae.classList.add("white"),this.svgPiano.appendChild(ae),ae}drawBlackKey(ee,ne){const ae=document.createElementNS("http://www.w3.org/2000/svg","rect");return ae.dataset.pitch=String(ee),ae.setAttribute("x",String(ne)),ae.setAttribute("y","0"),ae.setAttribute("width",String(this.config.blackNoteWidth)),ae.setAttribute("height",String(this.config.blackNoteHeight)),ae.setAttribute("fill","black"),ae.setAttribute("original-fill","black"),ae.setAttribute("stroke","black"),ae.setAttribute("stroke-width","3px"),ae.classList.add("black"),this.svgPiano.appendChild(ae),ae}clearActiveNotes(){super.unfillActiveRect(this.svg);const ee=this.svgPiano.querySelectorAll("rect.active");for(let ne=0;ne<ee.length;++ne){const ae=ee[ne];ae.setAttribute("fill",ae.getAttribute("original-fill")),ae.classList.remove("active")}}}var ScrollType;(function(re){re[re.PAGE=0]="PAGE",re[re.NOTE=1]="NOTE",re[re.BAR=2]="BAR"})(ScrollType||(ScrollType={}));class StaffSVGVisualizer extends BaseVisualizer{constructor(ee,ne,ae={}){super(ee,ae),(ae.pixelsPerTimeStep===void 0||ae.pixelsPerTimeStep<=0)&&(this.config.pixelsPerTimeStep=0),this.instruments=ae.instruments||[],this.render=new es6Exports.StaffSVGRender(this.getScoreInfo(ee),{noteHeight:this.config.noteHeight,noteSpacing:this.config.noteSpacing,pixelsPerTimeStep:this.config.pixelsPerTimeStep,noteRGB:this.config.noteRGB,activeNoteRGB:this.config.activeNoteRGB,defaultKey:ae.defaultKey||0,scrollType:ae.scrollType||ScrollType.PAGE},ne),this.drawnNotes=ee.notes.length,this.clear(),this.redraw()}clear(){this.render.clear()}redraw(ee,ne){this.drawnNotes!==this.noteSequence.notes.length&&(this.render.scoreInfo=this.getScoreInfo(this.noteSequence));const ae=ee?this.getNoteInfo(ee):void 0;return this.render.redraw(ae,ne)}isNoteInInstruments(ee){return ee.instrument===void 0||this.instruments.length===0?!0:this.instruments.indexOf(ee.instrument)>=0}timeToQuarters(ee){const ne=ee*this.noteSequence.tempos[0].qpm/60;return Math.round(ne*16)/16}getNoteInfo(ee){const ne=this.timeToQuarters(ee.startTime),ae=this.timeToQuarters(ee.endTime);return{start:ne,length:ae-ne,pitch:ee.pitch,intensity:ee.velocity}}getScoreInfo(ee){const ne=[];return ee.notes.forEach(ae=>{this.isNoteInInstruments(ae)&&ne.push(this.getNoteInfo(ae))}),{notes:ne,tempos:ee.tempos?ee.tempos.map(ae=>({start:this.timeToQuarters(ae.time),qpm:ae.qpm})):[],keySignatures:ee.keySignatures?ee.keySignatures.map(ae=>({start:this.timeToQuarters(ae.time),key:ae.key})):[],timeSignatures:ee.timeSignatures?ee.timeSignatures.map(ae=>({start:this.timeToQuarters(ae.time),numerator:ae.numerator,denominator:ae.denominator})):[]}}clearActiveNotes(){this.redraw()}}/**
 * html-midi-player@1.5.0
 * https://github.com/cifkao/html-midi-player.git
 * @author Ondřej Cífka (@cifkao)
 * @license BSD-2-Clause
 */var playIcon=`<svg width="24" height="24" version="1.1" viewBox="0 0 6.35 6.35" xmlns="http://www.w3.org/2000/svg">
 <path d="m4.4979 3.175-2.1167 1.5875v-3.175z" stroke-width=".70201"/>
</svg>
`,pauseIcon=`<svg width="24" height="24" version="1.1" viewBox="0 0 6.35 6.35" xmlns="http://www.w3.org/2000/svg">
 <path d="m1.8521 1.5875v3.175h0.92604v-3.175zm1.7198 0v3.175h0.92604v-3.175z" stroke-width=".24153"/>
</svg>
`,errorIcon=`<svg width="24" height="24" version="1.1" viewBox="0 0 6.35 6.35" xmlns="http://www.w3.org/2000/svg">
 <path transform="scale(.26458)" d="m12 3.5a8.4993 8.4993 0 0 0-8.5 8.5 8.4993 8.4993 0 0 0 8.5 8.5 8.4993 8.4993 0 0 0 8.5-8.5 8.4993 8.4993 0 0 0-8.5-8.5zm-1.4062 3.5h3v6h-3v-6zm0 8h3v2h-3v-2z"/>
</svg>
`,controlsCSS=`:host {
  display: inline-block;
  width: 300px;
  margin: 3px;
  vertical-align: bottom;
  font-family: sans-serif;
  font-size: 14px;
}

:focus:not(.focus-visible) {
  outline: none;
}

.controls {
  width: inherit;
  height: inherit;
  box-sizing: border-box;
  display: flex;
  flex-direction: row;
  position: relative;
  overflow: hidden;
  align-items: center;
  border-radius: 100px;
  background: #f2f5f6;
  padding: 0 0.25em;
  user-select: none;
}
.controls > * {
  margin: 0.8em 0.45em;
}
.controls input, .controls button {
  cursor: pointer;
}
.controls input:disabled, .controls button:disabled {
  cursor: inherit;
}
.controls button {
  text-align: center;
  background: rgba(204, 204, 204, 0);
  border: none;
  width: 32px;
  height: 32px;
  border-radius: 100%;
  transition: background-color 0.25s ease 0s;
  padding: 0;
}
.controls button:not(:disabled):hover {
  background: rgba(204, 204, 204, 0.3);
}
.controls button:not(:disabled):active {
  background: rgba(204, 204, 204, 0.6);
}
.controls button .icon {
  display: none;
}
.controls button .icon, .controls button .icon svg {
  vertical-align: middle;
}
.controls button .icon svg {
  fill: currentColor;
}
.controls .seek-bar {
  flex: 1;
  min-width: 0;
  margin-right: 1.1em;
  background: transparent;
}
.controls .seek-bar::-moz-range-track {
  background-color: #555;
}
.controls.stopped .play-icon, .controls.playing .stop-icon, .controls.error .error-icon {
  display: inherit;
}
.controls.frozen > div, .controls > button:disabled .icon {
  opacity: 0.5;
}
.controls .overlay {
  z-index: 0;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  margin: 0;
  box-sizing: border-box;
  display: none;
  opacity: 1;
}
.controls.loading .loading-overlay {
  display: block;
  background: linear-gradient(110deg, #92929200 5%, #92929288 25%, #92929200 45%);
  background-size: 250% 100%;
  background-repeat: repeat-y;
  animation: shimmer 1.5s linear infinite;
}

@keyframes shimmer {
  0% {
    background-position: 125% 0;
  }
  100% {
    background-position: -200% 0;
  }
}`,visualizerCSS=`:host {
  display: block;
}

::slotted(.piano-roll-visualizer) {
  overflow-x: auto;
}`;const controlsTemplate=document.createElement("template");controlsTemplate.innerHTML=`
<style>
${controlsCSS}
</style>
<div class="controls stopped frozen" part="control-panel">
  <button class="play" part="play-button" disabled>
    <span class="icon play-icon">${playIcon}</span>
    <span class="icon stop-icon">${pauseIcon}</span>
    <span class="icon error-icon">${errorIcon}</span>
  </button>
  <div part="time"><span class="current-time" part="current-time">0:00</span> / <span class="total-time" part="total-time">0:00</span></div>
  <input type="range" min="0" max="0" value="0" step="any" class="seek-bar" part="seek-bar" disabled>
  <div class="overlay loading-overlay" part="loading-overlay"></div>
</div>
`;const visualizerTemplate=document.createElement("template");visualizerTemplate.innerHTML=`
<style>
${visualizerCSS}
</style>
<slot>
</slot>
`;function formatTime(re){const ee=re<0;re=Math.floor(Math.abs(re||0));const ne=re%60,ae=(re-ne)/60,ce=(re-ne-60*ae)/3600,le=ne>9?`${ne}`:`0${ne}`,ue=ae>9||!ce?`${ae}:`:`0${ae}:`,he=ce?`${ce}:`:"";return(ee?"-":"")+he+ue+le}const VISUALIZER_TYPES=["piano-roll","waterfall","staff"];class VisualizerElement extends HTMLElement{constructor(){super(...arguments),this.domInitialized=!1,this.ns=null,this._config={}}static get observedAttributes(){return["src","type"]}connectedCallback(){this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(visualizerTemplate.content.cloneNode(!0)),!this.domInitialized&&(this.domInitialized=!0,this.wrapper=document.createElement("div"),this.appendChild(this.wrapper),this.initVisualizerNow())}attributeChangedCallback(ee,ne,ae){(ee==="src"||ee==="type")&&this.initVisualizer()}initVisualizer(){this.initTimeout==null&&(this.initTimeout=window.setTimeout(()=>this.initVisualizerNow()))}async initVisualizerNow(){if(this.initTimeout=null,!!this.domInitialized&&(this.src&&(this.ns=null,this.ns=await urlToNoteSequence(this.src)),this.wrapper.innerHTML="",!!this.ns)){if(this.type==="piano-roll"){this.wrapper.classList.add("piano-roll-visualizer");const ee=document.createElementNS("http://www.w3.org/2000/svg","svg");this.wrapper.appendChild(ee),this.visualizer=new PianoRollSVGVisualizer(this.ns,ee,this._config)}else if(this.type==="waterfall")this.wrapper.classList.add("waterfall-visualizer"),this.visualizer=new WaterfallSVGVisualizer(this.ns,this.wrapper,this._config);else if(this.type==="staff"){this.wrapper.classList.add("staff-visualizer");const ee=document.createElement("div");this.wrapper.appendChild(ee),this.visualizer=new StaffSVGVisualizer(this.ns,ee,this._config)}}}reload(){this.initVisualizerNow()}redraw(ee){this.visualizer&&this.visualizer.redraw(ee,ee!=null)}clearActiveNotes(){this.visualizer&&this.visualizer.clearActiveNotes()}get noteSequence(){return this.ns}set noteSequence(ee){this.ns!=ee&&(this.ns=ee,this.removeAttribute("src"),this.initVisualizer())}get src(){return this.getAttribute("src")}set src(ee){this.ns=null,this.setOrRemoveAttribute("src",ee),this.initVisualizer()}get type(){let ee=this.getAttribute("type");return VISUALIZER_TYPES.indexOf(ee)<0&&(ee="piano-roll"),ee}set type(ee){if(ee!=null&&VISUALIZER_TYPES.indexOf(ee)<0)throw new Error(`Unknown visualizer type ${ee}. Allowed values: ${VISUALIZER_TYPES.join(", ")}`);this.setOrRemoveAttribute("type",ee)}get config(){return this._config}set config(ee){this._config=ee,this.initVisualizer()}setOrRemoveAttribute(ee,ne){ne==null?this.removeAttribute(ee):this.setAttribute(ee,ne)}}const VISUALIZER_EVENTS=["start","stop","note"],DEFAULT_SOUNDFONT="https://storage.googleapis.com/magentadata/js/soundfonts/sgm_plus";let playingPlayer=null;class PlayerElement extends HTMLElement{constructor(){super(),this.domInitialized=!1,this.needInitNs=!1,this.visualizerListeners=new Map,this.ns=null,this._playing=!1,this.seeking=!1,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(controlsTemplate.content.cloneNode(!0)),this.controlPanel=this.shadowRoot.querySelector(".controls"),this.playButton=this.controlPanel.querySelector(".play"),this.currentTimeLabel=this.controlPanel.querySelector(".current-time"),this.totalTimeLabel=this.controlPanel.querySelector(".total-time"),this.seekBar=this.controlPanel.querySelector(".seek-bar")}static get observedAttributes(){return["sound-font","src","visualizer"]}connectedCallback(){if(this.domInitialized)return;this.domInitialized=!0;const ee=window.applyFocusVisiblePolyfill;ee!=null&&ee(this.shadowRoot),this.playButton.addEventListener("click",()=>{this.player.isPlaying()?this.stop():this.start()}),this.seekBar.addEventListener("input",()=>{this.seeking=!0,this.player&&this.player.getPlayState()==="started"&&this.player.pause()}),this.seekBar.addEventListener("change",()=>{const ne=this.currentTime;this.currentTimeLabel.textContent=formatTime(ne),this.player&&this.player.isPlaying()&&(this.player.seekTo(ne),this.player.getPlayState()==="paused"&&this.player.resume()),this.seeking=!1}),this.initPlayerNow()}attributeChangedCallback(ee,ne,ae){if(this.hasAttribute(ee)||(ae=null),ee==="sound-font"||ee==="src")this.initPlayer();else if(ee==="visualizer"){const ce=()=>{this.setVisualizerSelector(ae)};document.readyState==="loading"?window.addEventListener("DOMContentLoaded",ce):ce()}}initPlayer(ee=!0){this.needInitNs=this.needInitNs||ee,this.initTimeout==null&&(this.stop(),this.setLoading(),this.initTimeout=window.setTimeout(()=>this.initPlayerNow(this.needInitNs)))}async initPlayerNow(ee=!0){if(this.initTimeout=null,this.needInitNs=!1,!!this.domInitialized)try{let ne=null;if(ee&&(this.src&&(this.ns=null,this.ns=await urlToNoteSequence(this.src)),this.currentTime=0,this.ns||this.setError("No content loaded")),ne=this.ns,ne)this.seekBar.max=String(ne.totalTime),this.totalTimeLabel.textContent=formatTime(ne.totalTime);else{this.seekBar.max="0",this.totalTimeLabel.textContent=formatTime(0);return}let ae=this.soundFont;const ce={run:le=>this.ns===ne&&this.noteCallback(le),stop:()=>{}};if(ae===null?this.player=new Player(!1,ce):(ae===""&&(ae=DEFAULT_SOUNDFONT),this.player=new SoundFontPlayer(ae,void 0,void 0,void 0,ce),await this.player.loadSamples(ne)),this.ns!==ne)return;this.setLoaded(),this.dispatchEvent(new CustomEvent("load"))}catch(ne){throw this.setError(String(ne)),ne}}reload(){this.initPlayerNow()}start(){this._start()}_start(ee=!1){(async()=>{if(this.player)if(this.player.getPlayState()=="stopped"){playingPlayer&&playingPlayer.playing&&!(playingPlayer==this&&ee)&&playingPlayer.stop(),playingPlayer=this,this._playing=!0;let ne=this.currentTime;this.ns.notes.filter(ae=>ae.startTime>ne).length==0&&(ne=0),this.currentTime=ne,this.controlPanel.classList.remove("stopped"),this.controlPanel.classList.add("playing");try{for(const ce of this.visualizerListeners.keys())ce.noteSequence!=this.ns&&(ce.noteSequence=this.ns,ce.reload());const ae=this.player.start(this.ns,void 0,ne);ee?this.dispatchEvent(new CustomEvent("loop")):this.dispatchEvent(new CustomEvent("start")),await ae,this.handleStop(!0)}catch(ae){throw this.handleStop(),ae}}else this.player.getPlayState()=="paused"&&this.player.resume()})()}stop(){this.player&&this.player.isPlaying()&&this.player.stop(),this.handleStop(!1)}addVisualizer(ee){const ne={start:()=>{ee.noteSequence=this.noteSequence},stop:()=>{ee.clearActiveNotes()},note:ae=>{ee.redraw(ae.detail.note)}};for(const ae of VISUALIZER_EVENTS)this.addEventListener(ae,ne[ae]);this.visualizerListeners.set(ee,ne)}removeVisualizer(ee){const ne=this.visualizerListeners.get(ee);for(const ae of VISUALIZER_EVENTS)this.removeEventListener(ae,ne[ae]);this.visualizerListeners.delete(ee)}noteCallback(ee){this.playing&&(this.dispatchEvent(new CustomEvent("note",{detail:{note:ee}})),!this.seeking&&(this.seekBar.value=String(ee.startTime),this.currentTimeLabel.textContent=formatTime(ee.startTime)))}handleStop(ee=!1){if(ee){if(this.loop){this.currentTime=0,this._start(!0);return}this.currentTime=this.duration}this.controlPanel.classList.remove("playing"),this.controlPanel.classList.add("stopped"),this._playing&&(this._playing=!1,this.dispatchEvent(new CustomEvent("stop",{detail:{finished:ee}})))}setVisualizerSelector(ee){for(const ne of this.visualizerListeners.values())for(const ae of VISUALIZER_EVENTS)this.removeEventListener(ae,ne[ae]);if(this.visualizerListeners.clear(),ee!=null)for(const ne of document.querySelectorAll(ee)){if(!(ne instanceof VisualizerElement)){console.warn(`Selector ${ee} matched non-visualizer element`,ne);continue}this.addVisualizer(ne)}}setLoading(){this.playButton.disabled=!0,this.seekBar.disabled=!0,this.controlPanel.classList.remove("error"),this.controlPanel.classList.add("loading","frozen"),this.controlPanel.removeAttribute("title")}setLoaded(){this.controlPanel.classList.remove("loading","frozen"),this.playButton.disabled=!1,this.seekBar.disabled=!1}setError(ee){this.playButton.disabled=!0,this.seekBar.disabled=!0,this.controlPanel.classList.remove("loading","stopped","playing"),this.controlPanel.classList.add("error","frozen"),this.controlPanel.title=ee}get noteSequence(){return this.ns}set noteSequence(ee){this.ns!=ee&&(this.ns=ee,this.removeAttribute("src"),this.initPlayer())}get src(){return this.getAttribute("src")}set src(ee){this.ns=null,this.setOrRemoveAttribute("src",ee),this.initPlayer()}get soundFont(){return this.getAttribute("sound-font")}set soundFont(ee){this.setOrRemoveAttribute("sound-font",ee)}get loop(){return this.getAttribute("loop")!=null}set loop(ee){this.setOrRemoveAttribute("loop",ee?"":null)}get currentTime(){return parseFloat(this.seekBar.value)}set currentTime(ee){this.seekBar.value=String(ee),this.currentTimeLabel.textContent=formatTime(this.currentTime),this.player&&this.player.isPlaying()&&this.player.seekTo(ee)}get duration(){return parseFloat(this.seekBar.max)}get playing(){return this._playing}setOrRemoveAttribute(ee,ne){ne==null?this.removeAttribute(ee):this.setAttribute(ee,ne)}}window.customElements.define("midi-player",PlayerElement);window.customElements.define("midi-visualizer",VisualizerElement);const feed_container$1="_feed_container_1bc7r_216",container$k="_container_1bc7r_217",player_container="_player_container_1bc7r_223",volume_slider="_volume_slider_1bc7r_238",slider="_slider_1bc7r_256",volume_container="_volume_container_1bc7r_270",button$1="_button_1bc7r_312",playerButton="_playerButton_1bc7r_321",styles$H={feed_container:feed_container$1,container:container$k,player_container,volume_slider,slider,volume_container,button:button$1,playerButton};/*!
 * Compressor.js v1.1.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-10-05T02:32:40.212Z
 */function ownKeys$1(re,ee){var ne=Object.keys(re);if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(re);ee&&(ae=ae.filter(function(ce){return Object.getOwnPropertyDescriptor(re,ce).enumerable})),ne.push.apply(ne,ae)}return ne}function _objectSpread2$1(re){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee]!=null?arguments[ee]:{};ee%2?ownKeys$1(Object(ne),!0).forEach(function(ae){_defineProperty(re,ae,ne[ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(re,Object.getOwnPropertyDescriptors(ne)):ownKeys$1(Object(ne)).forEach(function(ae){Object.defineProperty(re,ae,Object.getOwnPropertyDescriptor(ne,ae))})}return re}function _classCallCheck(re,ee){if(!(re instanceof ee))throw new TypeError("Cannot call a class as a function")}function _defineProperties(re,ee){for(var ne=0;ne<ee.length;ne++){var ae=ee[ne];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(re,ae.key,ae)}}function _createClass(re,ee,ne){return ee&&_defineProperties(re.prototype,ee),ne&&_defineProperties(re,ne),re}function _defineProperty(re,ee,ne){return ee in re?Object.defineProperty(re,ee,{value:ne,enumerable:!0,configurable:!0,writable:!0}):re[ee]=ne,re}function _extends(){return _extends=Object.assign||function(re){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee];for(var ae in ne)Object.prototype.hasOwnProperty.call(ne,ae)&&(re[ae]=ne[ae])}return re},_extends.apply(this,arguments)}var canvasToBlob={exports:{}};(function(re){typeof window>"u"||function(ee){var ne=ee.HTMLCanvasElement&&ee.HTMLCanvasElement.prototype,ae=ee.Blob&&function(){try{return!!new Blob}catch{return!1}}(),ce=ae&&ee.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),le=ee.BlobBuilder||ee.WebKitBlobBuilder||ee.MozBlobBuilder||ee.MSBlobBuilder,ue=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,he=(ae||le)&&ee.atob&&ee.ArrayBuffer&&ee.Uint8Array&&function(fe){var me,ge,ve,ye,be,Ee,Ce,Se,Te;if(me=fe.match(ue),!me)throw new Error("invalid data URI");for(ge=me[2]?me[1]:"text/plain"+(me[3]||";charset=US-ASCII"),ve=!!me[4],ye=fe.slice(me[0].length),ve?be=atob(ye):be=decodeURIComponent(ye),Ee=new ArrayBuffer(be.length),Ce=new Uint8Array(Ee),Se=0;Se<be.length;Se+=1)Ce[Se]=be.charCodeAt(Se);return ae?new Blob([ce?Ce:Ee],{type:ge}):(Te=new le,Te.append(Ee),Te.getBlob(ge))};ee.HTMLCanvasElement&&!ne.toBlob&&(ne.mozGetAsFile?ne.toBlob=function(fe,me,ge){var ve=this;setTimeout(function(){ge&&ne.toDataURL&&he?fe(he(ve.toDataURL(me,ge))):fe(ve.mozGetAsFile("blob",me))})}:ne.toDataURL&&he&&(ne.msToBlob?ne.toBlob=function(fe,me,ge){var ve=this;setTimeout(function(){(me&&me!=="image/png"||ge)&&ne.toDataURL&&he?fe(he(ve.toDataURL(me,ge))):fe(ve.msToBlob(me))})}:ne.toBlob=function(fe,me,ge){var ve=this;setTimeout(function(){fe(he(ve.toDataURL(me,ge)))})})),re.exports?re.exports=he:ee.dataURLtoBlob=he}(window)})(canvasToBlob);var toBlob=canvasToBlob.exports,isBlob=function re(ee){return typeof Blob>"u"?!1:ee instanceof Blob||Object.prototype.toString.call(ee)==="[object Blob]"},DEFAULTS={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},IS_BROWSER=typeof window<"u"&&typeof window.document<"u",WINDOW=IS_BROWSER?window:{},isPositiveNumber=function re(ee){return ee>0&&ee<1/0},slice$1=Array.prototype.slice;function toArray(re){return Array.from?Array.from(re):slice$1.call(re)}var REGEXP_IMAGE_TYPE=/^image\/.+$/;function isImageType(re){return REGEXP_IMAGE_TYPE.test(re)}function imageTypeToExtension(re){var ee=isImageType(re)?re.substr(6):"";return ee==="jpeg"&&(ee="jpg"),".".concat(ee)}var fromCharCode=String.fromCharCode;function getStringFromCharCode(re,ee,ne){var ae="",ce;for(ne+=ee,ce=ee;ce<ne;ce+=1)ae+=fromCharCode(re.getUint8(ce));return ae}var btoa$1=WINDOW.btoa;function arrayBufferToDataURL(re,ee){for(var ne=[],ae=8192,ce=new Uint8Array(re);ce.length>0;)ne.push(fromCharCode.apply(null,toArray(ce.subarray(0,ae)))),ce=ce.subarray(ae);return"data:".concat(ee,";base64,").concat(btoa$1(ne.join("")))}function resetAndGetOrientation(re){var ee=new DataView(re),ne;try{var ae,ce,le;if(ee.getUint8(0)===255&&ee.getUint8(1)===216)for(var ue=ee.byteLength,he=2;he+1<ue;){if(ee.getUint8(he)===255&&ee.getUint8(he+1)===225){ce=he;break}he+=1}if(ce){var fe=ce+4,me=ce+10;if(getStringFromCharCode(ee,fe,4)==="Exif"){var ge=ee.getUint16(me);if(ae=ge===18761,(ae||ge===19789)&&ee.getUint16(me+2,ae)===42){var ve=ee.getUint32(me+4,ae);ve>=8&&(le=me+ve)}}}if(le){var ye=ee.getUint16(le,ae),be,Ee;for(Ee=0;Ee<ye;Ee+=1)if(be=le+Ee*12+2,ee.getUint16(be,ae)===274){be+=8,ne=ee.getUint16(be,ae),ee.setUint16(be,1,ae);break}}}catch{ne=1}return ne}function parseOrientation(re){var ee=0,ne=1,ae=1;switch(re){case 2:ne=-1;break;case 3:ee=-180;break;case 4:ae=-1;break;case 5:ee=90,ae=-1;break;case 6:ee=90;break;case 7:ee=90,ne=-1;break;case 8:ee=-90;break}return{rotate:ee,scaleX:ne,scaleY:ae}}var REGEXP_DECIMALS=/\.\d*(?:0|9){12}\d*$/;function normalizeDecimalNumber(re){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return REGEXP_DECIMALS.test(re)?Math.round(re*ee)/ee:re}function getAdjustedSizes(re){var ee=re.aspectRatio,ne=re.height,ae=re.width,ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",le=isPositiveNumber(ae),ue=isPositiveNumber(ne);if(le&&ue){var he=ne*ee;(ce==="contain"||ce==="none")&&he>ae||ce==="cover"&&he<ae?ne=ae/ee:ae=ne*ee}else le?ne=ae/ee:ue&&(ae=ne*ee);return{width:ae,height:ne}}var ArrayBuffer$1=WINDOW.ArrayBuffer,FileReader$1=WINDOW.FileReader,URL$1=WINDOW.URL||WINDOW.webkitURL,REGEXP_EXTENSION=/\.\w+$/,AnotherCompressor=WINDOW.Compressor,Compressor=function(){function re(ee,ne){_classCallCheck(this,re),this.file=ee,this.image=new Image,this.options=_objectSpread2$1(_objectSpread2$1({},DEFAULTS),ne),this.aborted=!1,this.result=null,this.init()}return _createClass(re,[{key:"init",value:function(){var ne=this,ae=this.file,ce=this.options;if(!isBlob(ae)){this.fail(new Error("The first argument must be a File or Blob object."));return}var le=ae.type;if(!isImageType(le)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!URL$1||!FileReader$1){this.fail(new Error("The current browser does not support image compression."));return}if(ArrayBuffer$1||(ce.checkOrientation=!1),URL$1&&!ce.checkOrientation)this.load({url:URL$1.createObjectURL(ae)});else{var ue=new FileReader$1,he=ce.checkOrientation&&le==="image/jpeg";this.reader=ue,ue.onload=function(fe){var me=fe.target,ge=me.result,ve={};if(he){var ye=resetAndGetOrientation(ge);ye>1||!URL$1?(ve.url=arrayBufferToDataURL(ge,le),ye>1&&_extends(ve,parseOrientation(ye))):ve.url=URL$1.createObjectURL(ae)}else ve.url=ge;ne.load(ve)},ue.onabort=function(){ne.fail(new Error("Aborted to read the image with FileReader."))},ue.onerror=function(){ne.fail(new Error("Failed to read the image with FileReader."))},ue.onloadend=function(){ne.reader=null},he?ue.readAsArrayBuffer(ae):ue.readAsDataURL(ae)}}},{key:"load",value:function(ne){var ae=this,ce=this.file,le=this.image;le.onload=function(){ae.draw(_objectSpread2$1(_objectSpread2$1({},ne),{},{naturalWidth:le.naturalWidth,naturalHeight:le.naturalHeight}))},le.onabort=function(){ae.fail(new Error("Aborted to load the image."))},le.onerror=function(){ae.fail(new Error("Failed to load the image."))},WINDOW.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent)&&(le.crossOrigin="anonymous"),le.alt=ce.name,le.src=ne.url}},{key:"draw",value:function(ne){var ae=this,ce=ne.naturalWidth,le=ne.naturalHeight,ue=ne.rotate,he=ue===void 0?0:ue,fe=ne.scaleX,me=fe===void 0?1:fe,ge=ne.scaleY,ve=ge===void 0?1:ge,ye=this.file,be=this.image,Ee=this.options,Ce=document.createElement("canvas"),Se=Ce.getContext("2d"),Te=Math.abs(he)%180===90,ke=(Ee.resize==="contain"||Ee.resize==="cover")&&isPositiveNumber(Ee.width)&&isPositiveNumber(Ee.height),Ne=Math.max(Ee.maxWidth,0)||1/0,Fe=Math.max(Ee.maxHeight,0)||1/0,De=Math.max(Ee.minWidth,0)||0,Oe=Math.max(Ee.minHeight,0)||0,Re=ce/le,Be=Ee.width,Le=Ee.height;if(Te){var je=[Fe,Ne];Ne=je[0],Fe=je[1];var Ge=[Oe,De];De=Ge[0],Oe=Ge[1];var qe=[Le,Be];Be=qe[0],Le=qe[1]}ke&&(Re=Be/Le);var Ue=getAdjustedSizes({aspectRatio:Re,width:Ne,height:Fe},"contain");Ne=Ue.width,Fe=Ue.height;var ze=getAdjustedSizes({aspectRatio:Re,width:De,height:Oe},"cover");if(De=ze.width,Oe=ze.height,ke){var He=getAdjustedSizes({aspectRatio:Re,width:Be,height:Le},Ee.resize);Be=He.width,Le=He.height}else{var Ye=getAdjustedSizes({aspectRatio:Re,width:Be,height:Le}),Xe=Ye.width;Be=Xe===void 0?ce:Xe;var We=Ye.height;Le=We===void 0?le:We}Be=Math.floor(normalizeDecimalNumber(Math.min(Math.max(Be,De),Ne))),Le=Math.floor(normalizeDecimalNumber(Math.min(Math.max(Le,Oe),Fe)));var Ze=-Be/2,Vt=-Le/2,Qt=Be,Yt=Le,Jt=[];if(ke){var rn=0,nn=0,fn=ce,an=le,un=getAdjustedSizes({aspectRatio:Re,width:ce,height:le},{contain:"cover",cover:"contain"}[Ee.resize]);fn=un.width,an=un.height,rn=(ce-fn)/2,nn=(le-an)/2,Jt.push(rn,nn,fn,an)}if(Jt.push(Ze,Vt,Qt,Yt),Te){var bn=[Le,Be];Be=bn[0],Le=bn[1]}Ce.width=Be,Ce.height=Le,isImageType(Ee.mimeType)||(Ee.mimeType=ye.type);var En="transparent";if(ye.size>Ee.convertSize&&Ee.convertTypes.indexOf(Ee.mimeType)>=0&&(Ee.mimeType="image/jpeg"),Ee.mimeType==="image/jpeg"&&(En="#fff"),Se.fillStyle=En,Se.fillRect(0,0,Be,Le),Ee.beforeDraw&&Ee.beforeDraw.call(this,Se,Ce),!this.aborted&&(Se.save(),Se.translate(Be/2,Le/2),Se.rotate(he*Math.PI/180),Se.scale(me,ve),Se.drawImage.apply(Se,[be].concat(Jt)),Se.restore(),Ee.drew&&Ee.drew.call(this,Se,Ce),!this.aborted)){var $n=function(zn){ae.aborted||ae.done({naturalWidth:ce,naturalHeight:le,result:zn})};Ce.toBlob?Ce.toBlob($n,Ee.mimeType,Ee.quality):$n(toBlob(Ce.toDataURL(Ee.mimeType,Ee.quality)))}}},{key:"done",value:function(ne){var ae=ne.naturalWidth,ce=ne.naturalHeight,le=ne.result,ue=this.file,he=this.image,fe=this.options;if(URL$1&&!fe.checkOrientation&&URL$1.revokeObjectURL(he.src),le)if(fe.strict&&le.size>ue.size&&fe.mimeType===ue.type&&!(fe.width>ae||fe.height>ce||fe.minWidth>ae||fe.minHeight>ce||fe.maxWidth<ae||fe.maxHeight<ce))le=ue;else{var me=new Date;le.lastModified=me.getTime(),le.lastModifiedDate=me,le.name=ue.name,le.name&&le.type!==ue.type&&(le.name=le.name.replace(REGEXP_EXTENSION,imageTypeToExtension(le.type)))}else le=ue;this.result=le,fe.success&&fe.success.call(this,le)}},{key:"fail",value:function(ne){var ae=this.options;if(ae.error)ae.error.call(this,ne);else throw ne}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=AnotherCompressor,re}},{key:"setDefaults",value:function(ne){_extends(DEFAULTS,ne)}}]),re}();const getMimeType=re=>new Promise(ee=>{const ne=new FileReader;ne.onloadend=function(ae){if(ae.target.readyState===FileReader.DONE){const ce=new Uint8Array(ae.target.result),le=[];ce.forEach(fe=>{le.push(fe.toString(16))});const ue=le.join("").toUpperCase();let he;switch(ue){case"7BA2020":he=MIMETYPE.GLTF;break;case"676C5446":he=MIMETYPE.GLB;break;default:he="Unknown MimeType"}ee(he)}},ne.onerror=()=>ee("Unknown MimeType"),ne.readAsArrayBuffer(re.slice(0,4))}),extensionFromMimetype=re=>{switch(re){case MIMETYPE.JPEG:return"jpg";case MIMETYPE.PNG:return"png";case MIMETYPE.GIF:return"gif";default:return"jpg"}},removeExtension=re=>re.split(".").slice(0,-1).join("."),getImageDimensions=async re=>await new Promise((ee,ne)=>{if(re){const ae=new Image;ae.src=re.reader,ae.onload=function(){ee({imageWidth:ae.width,imageHeight:ae.height})},ae.onerror=ce=>{ee({imageWidth:0,imageHeight:0})};return}ee({imageWidth:0,imageHeight:0})}),generateCompressedImage=async(re,ee)=>{if(!re.file)return;const ne=await compressImage(re.file,ee),ae=ne.type,ce=await ne.arrayBuffer(),le=await blobToDataURL(ne);return{mimeType:ae,buffer:ce,reader:le}},blobToDataURL=async re=>new Promise((ee,ne)=>{const ae=new FileReader;ae.onerror=ne,ae.onload=ce=>ee(ae.result),ae.readAsDataURL(re)}),compressImage=(re,ee)=>new Promise((ne,ae)=>{new Compressor(re,{...ee,success(ce){ne(ce)},error(ce){ae(ce)}})}),generateCoverAndThumbnail=async re=>{if(re.mimeType===MIMETYPE.GIF)return{cover:re,thumbnail:re};console.debug("Generating cover");const ee=await generateCompressedImage(re,COVER_COMPRESSOR_OPTIONS);console.debug("Generating thumbnail");const ne=await generateCompressedImage(re,THUMBNAIL_COMPRESSOR_OPTIONS);return{cover:ee,thumbnail:ne}},generateTypedArtCoverImage=async(re,ee,ne,ae)=>{if(!re||re.trim().length===0)throw new Error("Input text must not be empty");ne=ne||1024;const ce=(Fe,De)=>{const Oe=document.createElement("canvas");Oe.width=Fe,Oe.height=De;const Re=Oe.getContext("2d");if(!Re)throw new Error("Could not create canvas context");return Re},le=ee?"Iosevka":"Source Sans Pro",ue=.75,he=16;let fe=Math.max(he,ne*ue);const me=`${fe}px ${le}`,ge=ce(ne,ne);ge.font=me,ge.filter="grayscale(100%)",ge.fillStyle="transparent",ge.fillRect(0,0,ne,ne),ge.fillStyle="white";let ve=re.split(`
`).filter((Fe,De,Oe)=>Fe.trim()!==""||De===Oe.length-1||Oe[De+1].trim()!=="");const ye=50,be=ne-ye*2,Ee=ne-ye*2,Ce=ve.reduce((Fe,De)=>ge.measureText(De).width>ge.measureText(Fe).width?De:Fe,"");let Se=ge.measureText(")").actualBoundingBoxAscent+ge.measureText(")").actualBoundingBoxDescent+5,Te=ge.measureText(Ce).width;for(;(ve.length*Se>Ee||Te>be)&&(fe-=1,ge.font=`${fe}px ${le}`,!(fe<=he));)Te=ge.measureText(Ce).width,Se=ge.measureText(")").actualBoundingBoxAscent+ge.measureText(")").actualBoundingBoxDescent+5;Te>be&&(ve=[re.split(`
`)[0].substring(0,Math.floor(be/fe)-3)+"..."]),Se=ge.measureText(")").actualBoundingBoxAscent+ge.measureText(")").actualBoundingBoxDescent+5;const ke=ve.length*Se,Ne=(ne-ke)/2;return ge.imageSmoothingEnabled=!0,ge.imageSmoothingQuality="high",ve.forEach((Fe,De)=>{let Oe=ye;if(ae){const Re=ge.measureText(Fe).width;Oe=(ne-Re)/2}ge.fillText(Fe,Oe,Ne+(De+1)*Se)}),new Promise((Fe,De)=>{ge.canvas.toBlob(Oe=>{if(!Oe){De(new Error("Failed to generate image"));return}const Re=new File([Oe],"Generated Cover.png",{type:"image/png"});Fe(Re)},"image/png")})},generateMidiCover=async(re,ee)=>new Promise((ne,ae)=>{var be;const ue=document.createElement("canvas");ue.width=1024,ue.height=1024;const he=ue.getContext("2d");if(!he){ae(new Error("Could not create canvas context"));return}he.clearRect(0,0,ue.width,ue.height);const fe=ee.tracks,me=lodashExports.truncate(re||((be=ee==null?void 0:ee.tracks)==null?void 0:be[0].name)||"Midi Track",{length:50});he.strokeStyle="white",he.lineWidth=5,he.strokeRect(0,0,ue.width,ue.height);const ge=ue.width-2*30,ye=(ue.height-2*30)/128;he.font="40px Arial",he.fillStyle="white",he.textAlign="center",he.fillText(me,ue.width/2,30+40),he.fillText("(MIDI)",ue.width/2,30+90),fe.forEach((Ee,Ce)=>{const Se=Ee.notes,Te=Se.reduce((Ne,Fe)=>Math.max(Ne,Fe.time+Fe.duration),0),ke=.5+Ce/fe.length*.5;he.fillStyle=`rgba(255, 255, 255, ${ke})`,Se.forEach(Ne=>{const Fe=30+Ne.time*ge/Te,De=ue.height-30-Ne.midi*ye,Oe=Ne.duration*ge/Te,Re=5;he.fillRect(Fe,De,Oe,Re)})}),ue.toBlob(Ee=>{if(!Ee){ae(new Error("Failed to generate image"));return}const Ce=new File([Ee],"Generated_MIDI_Cover.png",{type:"image/png"});ne(Ce)},"image/png")}),convertFileToFileForm=async re=>{const ee=re.type===""?await getMimeType(re):re.type,ne=Buffer.from(await re.arrayBuffer()),ae=re.name+".png";let ce=new FileReader;const le=new Blob([ne],{type:ee});ce=await blobToDataURL(le);const ue={mimeType:ee,fileName:ae+".png",fileSize:re.size};return{title:ae,mimeType:ee,file:re,buffer:ne,reader:ce,format:ue}},processAudioForVisualizer=re=>{const ee=re.split(",")[1]||re,ne=atob(ee),ae=new ArrayBuffer(ne.length),ce=new Uint8Array(ae);for(let le=0;le<ne.length;le++)ce[le]=ne.charCodeAt(le);return new Blob([ae],{type:"audio/mpeg"})};async function processMidiData(re,ee){try{const ne=await new Midi.Midi.fromUrl(re),ae=parseInt(ee)/100;ne.tracks.forEach(ue=>{ue.notes.forEach(he=>{he.velocity*=ae})});const ce=ne.toArray(),le=new Blob([ce],{type:"audio/midi"});return URL.createObjectURL(le)}catch(ne){throw console.error("Failed to modify MIDI data:",ne),ne}}const processMidiCover=async re=>{const ee=new Midi.Midi(re.artifact.buffer);let ne=await generateMidiCover(re.title,ee);return re.cover=await convertFileToFileForm(ne),re};var PitchClass;(function(re){re[re.None=0]="None",re[re.C=1]="C",re[re.Cs=2]="Cs",re[re.D=3]="D",re[re.Eb=4]="Eb",re[re.E=5]="E",re[re.F=6]="F",re[re.Fs=7]="Fs",re[re.G=8]="G",re[re.Ab=9]="Ab",re[re.A=10]="A",re[re.Bb=11]="Bb",re[re.B=12]="B"})(PitchClass||(PitchClass={}));var ChordFamily;(function(re){re[re.None=0]="None",re[re.Maj=1]="Maj",re[re.Min=2]="Min",re[re.Aug=3]="Aug",re[re.Dim=4]="Dim",re[re.Seven=5]="Seven",re[re.Maj7=6]="Maj7",re[re.Min7=7]="Min7",re[re.Min7b5=8]="Min7b5"})(ChordFamily||(ChordFamily={}));function FFT(re){if(this.size=re|0,this.size<=1||this.size&this.size-1)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=re<<1;for(var ee=new Array(this.size*2),ne=0;ne<ee.length;ne+=2){const fe=Math.PI*ne/this.size;ee[ne]=Math.cos(fe),ee[ne+1]=-Math.sin(fe)}this.table=ee;for(var ae=0,ce=1;this.size>ce;ce<<=1)ae++;this._width=ae%2===0?ae-1:ae,this._bitrev=new Array(1<<this._width);for(var le=0;le<this._bitrev.length;le++){this._bitrev[le]=0;for(var ue=0;ue<this._width;ue+=2){var he=this._width-ue-2;this._bitrev[le]|=(le>>>ue&3)<<he}}this._out=null,this._data=null,this._inv=0}FFT.prototype.fromComplexArray=function re(ee,ne){for(var ae=ne||new Array(ee.length>>>1),ce=0;ce<ee.length;ce+=2)ae[ce>>>1]=ee[ce];return ae};FFT.prototype.createComplexArray=function re(){const ee=new Array(this._csize);for(var ne=0;ne<ee.length;ne++)ee[ne]=0;return ee};FFT.prototype.toComplexArray=function re(ee,ne){for(var ae=ne||this.createComplexArray(),ce=0;ce<ae.length;ce+=2)ae[ce]=ee[ce>>>1],ae[ce+1]=0;return ae};FFT.prototype.completeSpectrum=function re(ee){for(var ne=this._csize,ae=ne>>>1,ce=2;ce<ae;ce+=2)ee[ne-ce]=ee[ce],ee[ne-ce+1]=-ee[ce+1]};FFT.prototype.transform=function re(ee,ne){if(ee===ne)throw new Error("Input and output buffers must be different");this._out=ee,this._data=ne,this._inv=0,this._transform4(),this._out=null,this._data=null};FFT.prototype.realTransform=function re(ee,ne){if(ee===ne)throw new Error("Input and output buffers must be different");this._out=ee,this._data=ne,this._inv=0,this._realTransform4(),this._out=null,this._data=null};FFT.prototype.inverseTransform=function re(ee,ne){if(ee===ne)throw new Error("Input and output buffers must be different");this._out=ee,this._data=ne,this._inv=1,this._transform4();for(var ae=0;ae<ee.length;ae++)ee[ae]/=this.size;this._out=null,this._data=null};FFT.prototype._transform4=function re(){var ee=this._out,ne=this._csize,ae=this._width,ce=1<<ae,le=ne/ce<<1,ue,he,fe=this._bitrev;if(le===4)for(ue=0,he=0;ue<ne;ue+=le,he++){const Ce=fe[he];this._singleTransform2(ue,Ce,ce)}else for(ue=0,he=0;ue<ne;ue+=le,he++){const Ce=fe[he];this._singleTransform4(ue,Ce,ce)}var me=this._inv?-1:1,ge=this.table;for(ce>>=2;ce>=2;ce>>=2){le=ne/ce<<1;var ve=le>>>2;for(ue=0;ue<ne;ue+=le)for(var ye=ue+ve,be=ue,Ee=0;be<ye;be+=2,Ee+=ce){const Ce=be,Se=Ce+ve,Te=Se+ve,ke=Te+ve,Ne=ee[Ce],Fe=ee[Ce+1],De=ee[Se],Oe=ee[Se+1],Re=ee[Te],Be=ee[Te+1],Le=ee[ke],je=ee[ke+1],Ge=Ne,qe=Fe,Ue=ge[Ee],ze=me*ge[Ee+1],He=De*Ue-Oe*ze,Ye=De*ze+Oe*Ue,Xe=ge[2*Ee],We=me*ge[2*Ee+1],Ze=Re*Xe-Be*We,Vt=Re*We+Be*Xe,Qt=ge[3*Ee],Yt=me*ge[3*Ee+1],Jt=Le*Qt-je*Yt,rn=Le*Yt+je*Qt,nn=Ge+Ze,fn=qe+Vt,an=Ge-Ze,un=qe-Vt,bn=He+Jt,En=Ye+rn,$n=me*(He-Jt),On=me*(Ye-rn),zn=nn+bn,Rn=fn+En,Ut=nn-bn,tn=fn-En,dn=an+On,xn=un-$n,An=an-On,vn=un+$n;ee[Ce]=zn,ee[Ce+1]=Rn,ee[Se]=dn,ee[Se+1]=xn,ee[Te]=Ut,ee[Te+1]=tn,ee[ke]=An,ee[ke+1]=vn}}};FFT.prototype._singleTransform2=function re(ee,ne,ae){const ce=this._out,le=this._data,ue=le[ne],he=le[ne+1],fe=le[ne+ae],me=le[ne+ae+1],ge=ue+fe,ve=he+me,ye=ue-fe,be=he-me;ce[ee]=ge,ce[ee+1]=ve,ce[ee+2]=ye,ce[ee+3]=be};FFT.prototype._singleTransform4=function re(ee,ne,ae){const ce=this._out,le=this._data,ue=this._inv?-1:1,he=ae*2,fe=ae*3,me=le[ne],ge=le[ne+1],ve=le[ne+ae],ye=le[ne+ae+1],be=le[ne+he],Ee=le[ne+he+1],Ce=le[ne+fe],Se=le[ne+fe+1],Te=me+be,ke=ge+Ee,Ne=me-be,Fe=ge-Ee,De=ve+Ce,Oe=ye+Se,Re=ue*(ve-Ce),Be=ue*(ye-Se),Le=Te+De,je=ke+Oe,Ge=Ne+Be,qe=Fe-Re,Ue=Te-De,ze=ke-Oe,He=Ne-Be,Ye=Fe+Re;ce[ee]=Le,ce[ee+1]=je,ce[ee+2]=Ge,ce[ee+3]=qe,ce[ee+4]=Ue,ce[ee+5]=ze,ce[ee+6]=He,ce[ee+7]=Ye};FFT.prototype._realTransform4=function re(){var ee=this._out,ne=this._csize,ae=this._width,ce=1<<ae,le=ne/ce<<1,ue,he,fe=this._bitrev;if(le===4)for(ue=0,he=0;ue<ne;ue+=le,he++){const Ss=fe[he];this._singleRealTransform2(ue,Ss>>>1,ce>>>1)}else for(ue=0,he=0;ue<ne;ue+=le,he++){const Ss=fe[he];this._singleRealTransform4(ue,Ss>>>1,ce>>>1)}var me=this._inv?-1:1,ge=this.table;for(ce>>=2;ce>=2;ce>>=2){le=ne/ce<<1;var ve=le>>>1,ye=ve>>>1,be=ye>>>1;for(ue=0;ue<ne;ue+=le)for(var Ee=0,Ce=0;Ee<=be;Ee+=2,Ce+=ce){var Se=ue+Ee,Te=Se+ye,ke=Te+ye,Ne=ke+ye,Fe=ee[Se],De=ee[Se+1],Oe=ee[Te],Re=ee[Te+1],Be=ee[ke],Le=ee[ke+1],je=ee[Ne],Ge=ee[Ne+1],qe=Fe,Ue=De,ze=ge[Ce],He=me*ge[Ce+1],Ye=Oe*ze-Re*He,Xe=Oe*He+Re*ze,We=ge[2*Ce],Ze=me*ge[2*Ce+1],Vt=Be*We-Le*Ze,Qt=Be*Ze+Le*We,Yt=ge[3*Ce],Jt=me*ge[3*Ce+1],rn=je*Yt-Ge*Jt,nn=je*Jt+Ge*Yt,fn=qe+Vt,an=Ue+Qt,un=qe-Vt,bn=Ue-Qt,En=Ye+rn,$n=Xe+nn,On=me*(Ye-rn),zn=me*(Xe-nn),Rn=fn+En,Ut=an+$n,tn=un+zn,dn=bn-On;if(ee[Se]=Rn,ee[Se+1]=Ut,ee[Te]=tn,ee[Te+1]=dn,Ee===0){var xn=fn-En,An=an-$n;ee[ke]=xn,ee[ke+1]=An;continue}if(Ee!==be){var vn=un,Nn=-bn,Gn=fn,Wn=-an,Vn=-me*zn,Hn=-me*On,hs=-me*$n,Pn=-me*En,Jn=vn+Vn,gn=Nn+Hn,cn=Gn+Pn,Fn=Wn-hs,In=ue+ye-Ee,cs=ue+ve-Ee;ee[In]=Jn,ee[In+1]=gn,ee[cs]=cn,ee[cs+1]=Fn}}}};FFT.prototype._singleRealTransform2=function re(ee,ne,ae){const ce=this._out,le=this._data,ue=le[ne],he=le[ne+ae],fe=ue+he,me=ue-he;ce[ee]=fe,ce[ee+1]=0,ce[ee+2]=me,ce[ee+3]=0};FFT.prototype._singleRealTransform4=function re(ee,ne,ae){const ce=this._out,le=this._data,ue=this._inv?-1:1,he=ae*2,fe=ae*3,me=le[ne],ge=le[ne+ae],ve=le[ne+he],ye=le[ne+fe],be=me+ve,Ee=me-ve,Ce=ge+ye,Se=ue*(ge-ye),Te=be+Ce,ke=Ee,Ne=-Se,Fe=be-Ce,De=Ee,Oe=Se;ce[ee]=Te,ce[ee+1]=0,ce[ee+2]=ke,ce[ee+3]=Ne,ce[ee+4]=Fe,ce[ee+5]=0,ce[ee+6]=De,ce[ee+7]=Oe};var ndarrayOps={};function unique_pred(re,ee){for(var ne=1,ae=re.length,ce=re[0],le=re[0],ue=1;ue<ae;++ue)if(le=ce,ce=re[ue],ee(ce,le)){if(ue===ne){ne++;continue}re[ne++]=ce}return re.length=ne,re}function unique_eq(re){for(var ee=1,ne=re.length,ae=re[0],ce=re[0],le=1;le<ne;++le,ce=ae)if(ce=ae,ae=re[le],ae!==ce){if(le===ee){ee++;continue}re[ee++]=ae}return re.length=ee,re}function unique(re,ee,ne){return re.length===0?re:ee?(ne||re.sort(ee),unique_pred(re,ee)):(ne||re.sort(),unique_eq(re))}var uniq$4=unique,uniq$3=uniq$4;function innerFill(re,ee,ne){var ae=re.length,ce=ee.arrayArgs.length,le=ee.indexArgs.length>0,ue=[],he=[],fe=0,me=0,ge,ve;for(ge=0;ge<ae;++ge)he.push(["i",ge,"=0"].join(""));for(ve=0;ve<ce;++ve)for(ge=0;ge<ae;++ge)me=fe,fe=re[ge],ge===0?he.push(["d",ve,"s",ge,"=t",ve,"p",fe].join("")):he.push(["d",ve,"s",ge,"=(t",ve,"p",fe,"-s",me,"*t",ve,"p",me,")"].join(""));for(he.length>0&&ue.push("var "+he.join(",")),ge=ae-1;ge>=0;--ge)fe=re[ge],ue.push(["for(i",ge,"=0;i",ge,"<s",fe,";++i",ge,"){"].join(""));for(ue.push(ne),ge=0;ge<ae;++ge){for(me=fe,fe=re[ge],ve=0;ve<ce;++ve)ue.push(["p",ve,"+=d",ve,"s",ge].join(""));le&&(ge>0&&ue.push(["index[",me,"]-=s",me].join("")),ue.push(["++index[",fe,"]"].join(""))),ue.push("}")}return ue.join(`
`)}function outerFill(re,ee,ne,ae){for(var ce=ee.length,le=ne.arrayArgs.length,ue=ne.blockSize,he=ne.indexArgs.length>0,fe=[],me=0;me<le;++me)fe.push(["var offset",me,"=p",me].join(""));for(var me=re;me<ce;++me)fe.push(["for(var j"+me+"=SS[",ee[me],"]|0;j",me,">0;){"].join("")),fe.push(["if(j",me,"<",ue,"){"].join("")),fe.push(["s",ee[me],"=j",me].join("")),fe.push(["j",me,"=0"].join("")),fe.push(["}else{s",ee[me],"=",ue].join("")),fe.push(["j",me,"-=",ue,"}"].join("")),he&&fe.push(["index[",ee[me],"]=j",me].join(""));for(var me=0;me<le;++me){for(var ge=["offset"+me],ve=re;ve<ce;++ve)ge.push(["j",ve,"*t",me,"p",ee[ve]].join(""));fe.push(["p",me,"=(",ge.join("+"),")"].join(""))}fe.push(innerFill(ee,ne,ae));for(var me=re;me<ce;++me)fe.push("}");return fe.join(`
`)}function countMatches(re){for(var ee=0,ne=re[0].length;ee<ne;){for(var ae=1;ae<re.length;++ae)if(re[ae][ee]!==re[0][ee])return ee;++ee}return ee}function processBlock(re,ee,ne){for(var ae=re.body,ce=[],le=[],ue=0;ue<re.args.length;++ue){var he=re.args[ue];if(!(he.count<=0)){var fe=new RegExp(he.name,"g"),me="",ge=ee.arrayArgs.indexOf(ue);switch(ee.argTypes[ue]){case"offset":var ve=ee.offsetArgIndex.indexOf(ue),ye=ee.offsetArgs[ve];ge=ye.array,me="+q"+ve;case"array":me="p"+ge+me;var be="l"+ue,Ee="a"+ge;if(ee.arrayBlockIndices[ge]===0)he.count===1?ne[ge]==="generic"?he.lvalue?(ce.push(["var ",be,"=",Ee,".get(",me,")"].join("")),ae=ae.replace(fe,be),le.push([Ee,".set(",me,",",be,")"].join(""))):ae=ae.replace(fe,[Ee,".get(",me,")"].join("")):ae=ae.replace(fe,[Ee,"[",me,"]"].join("")):ne[ge]==="generic"?(ce.push(["var ",be,"=",Ee,".get(",me,")"].join("")),ae=ae.replace(fe,be),he.lvalue&&le.push([Ee,".set(",me,",",be,")"].join(""))):(ce.push(["var ",be,"=",Ee,"[",me,"]"].join("")),ae=ae.replace(fe,be),he.lvalue&&le.push([Ee,"[",me,"]=",be].join("")));else{for(var Ce=[he.name],Se=[me],Te=0;Te<Math.abs(ee.arrayBlockIndices[ge]);Te++)Ce.push("\\s*\\[([^\\]]+)\\]"),Se.push("$"+(Te+1)+"*t"+ge+"b"+Te);if(fe=new RegExp(Ce.join(""),"g"),me=Se.join("+"),ne[ge]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");ae=ae.replace(fe,[Ee,"[",me,"]"].join(""))}break;case"scalar":ae=ae.replace(fe,"Y"+ee.scalarArgs.indexOf(ue));break;case"index":ae=ae.replace(fe,"index");break;case"shape":ae=ae.replace(fe,"shape");break}}}return[ce.join(`
`),ae,le.join(`
`)].join(`
`).trim()}function typeSummary(re){for(var ee=new Array(re.length),ne=!0,ae=0;ae<re.length;++ae){var ce=re[ae],le=ce.match(/\d+/);le?le=le[0]:le="",ce.charAt(0)===0?ee[ae]="u"+ce.charAt(1)+le:ee[ae]=ce.charAt(0)+le,ae>0&&(ne=ne&&ee[ae]===ee[ae-1])}return ne?ee[0]:ee.join("")}function generateCWiseOp(re,ee){for(var ne=ee[1].length-Math.abs(re.arrayBlockIndices[0])|0,ae=new Array(re.arrayArgs.length),ce=new Array(re.arrayArgs.length),le=0;le<re.arrayArgs.length;++le)ce[le]=ee[2*le],ae[le]=ee[2*le+1];for(var ue=[],he=[],fe=[],me=[],ge=[],le=0;le<re.arrayArgs.length;++le){re.arrayBlockIndices[le]<0?(fe.push(0),me.push(ne),ue.push(ne),he.push(ne+re.arrayBlockIndices[le])):(fe.push(re.arrayBlockIndices[le]),me.push(re.arrayBlockIndices[le]+ne),ue.push(0),he.push(re.arrayBlockIndices[le]));for(var ve=[],ye=0;ye<ae[le].length;ye++)fe[le]<=ae[le][ye]&&ae[le][ye]<me[le]&&ve.push(ae[le][ye]-fe[le]);ge.push(ve)}for(var be=["SS"],Ee=["'use strict'"],Ce=[],ye=0;ye<ne;++ye)Ce.push(["s",ye,"=SS[",ye,"]"].join(""));for(var le=0;le<re.arrayArgs.length;++le){be.push("a"+le),be.push("t"+le),be.push("p"+le);for(var ye=0;ye<ne;++ye)Ce.push(["t",le,"p",ye,"=t",le,"[",fe[le]+ye,"]"].join(""));for(var ye=0;ye<Math.abs(re.arrayBlockIndices[le]);++ye)Ce.push(["t",le,"b",ye,"=t",le,"[",ue[le]+ye,"]"].join(""))}for(var le=0;le<re.scalarArgs.length;++le)be.push("Y"+le);if(re.shapeArgs.length>0&&Ce.push("shape=SS.slice(0)"),re.indexArgs.length>0){for(var Se=new Array(ne),le=0;le<ne;++le)Se[le]="0";Ce.push(["index=[",Se.join(","),"]"].join(""))}for(var le=0;le<re.offsetArgs.length;++le){for(var Te=re.offsetArgs[le],ke=[],ye=0;ye<Te.offset.length;++ye)Te.offset[ye]!==0&&(Te.offset[ye]===1?ke.push(["t",Te.array,"p",ye].join("")):ke.push([Te.offset[ye],"*t",Te.array,"p",ye].join("")));ke.length===0?Ce.push("q"+le+"=0"):Ce.push(["q",le,"=",ke.join("+")].join(""))}var Ne=uniq$3([].concat(re.pre.thisVars).concat(re.body.thisVars).concat(re.post.thisVars));Ce=Ce.concat(Ne),Ce.length>0&&Ee.push("var "+Ce.join(","));for(var le=0;le<re.arrayArgs.length;++le)Ee.push("p"+le+"|=0");re.pre.body.length>3&&Ee.push(processBlock(re.pre,re,ce));var Fe=processBlock(re.body,re,ce),De=countMatches(ge);De<ne?Ee.push(outerFill(De,ge[0],re,Fe)):Ee.push(innerFill(ge[0],re,Fe)),re.post.body.length>3&&Ee.push(processBlock(re.post,re,ce)),re.debug&&console.log("-----Generated cwise routine for ",ee,`:
`+Ee.join(`
`)+`
----------`);var Oe=[re.funcName||"unnamed","_cwise_loop_",ae[0].join("s"),"m",De,typeSummary(ce)].join(""),Re=new Function(["function ",Oe,"(",be.join(","),"){",Ee.join(`
`),"} return ",Oe].join(""));return Re()}var compile$3=generateCWiseOp,compile$2=compile$3;function createThunk$1(re){var ee=["'use strict'","var CACHED={}"],ne=[],ae=re.funcName+"_cwise_thunk";ee.push(["return function ",ae,"(",re.shimArgs.join(","),"){"].join(""));for(var ce=[],le=[],ue=[["array",re.arrayArgs[0],".shape.slice(",Math.max(0,re.arrayBlockIndices[0]),re.arrayBlockIndices[0]<0?","+re.arrayBlockIndices[0]+")":")"].join("")],he=[],fe=[],me=0;me<re.arrayArgs.length;++me){var ge=re.arrayArgs[me];ne.push(["t",ge,"=array",ge,".dtype,","r",ge,"=array",ge,".order"].join("")),ce.push("t"+ge),ce.push("r"+ge),le.push("t"+ge),le.push("r"+ge+".join()"),ue.push("array"+ge+".data"),ue.push("array"+ge+".stride"),ue.push("array"+ge+".offset|0"),me>0&&(he.push("array"+re.arrayArgs[0]+".shape.length===array"+ge+".shape.length+"+(Math.abs(re.arrayBlockIndices[0])-Math.abs(re.arrayBlockIndices[me]))),fe.push("array"+re.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,re.arrayBlockIndices[0])+"]===array"+ge+".shape[shapeIndex+"+Math.max(0,re.arrayBlockIndices[me])+"]"))}re.arrayArgs.length>1&&(ee.push("if (!("+he.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),ee.push("for(var shapeIndex=array"+re.arrayArgs[0]+".shape.length-"+Math.abs(re.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),ee.push("if (!("+fe.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),ee.push("}"));for(var me=0;me<re.scalarArgs.length;++me)ue.push("scalar"+re.scalarArgs[me]);ne.push(["type=[",le.join(","),"].join()"].join("")),ne.push("proc=CACHED[type]"),ee.push("var "+ne.join(",")),ee.push(["if(!proc){","CACHED[type]=proc=compile([",ce.join(","),"])}","return proc(",ue.join(","),")}"].join("")),re.debug&&console.log(`-----Generated thunk:
`+ee.join(`
`)+`
----------`);var ve=new Function("compile",ee.join(`
`));return ve(compile$2.bind(void 0,re))}var thunk=createThunk$1,createThunk=thunk;function Procedure(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function compileCwise(re){var ee=new Procedure;ee.pre=re.pre,ee.body=re.body,ee.post=re.post;var ne=re.args.slice(0);ee.argTypes=ne;for(var ae=0;ae<ne.length;++ae){var ce=ne[ae];if(ce==="array"||typeof ce=="object"&&ce.blockIndices){if(ee.argTypes[ae]="array",ee.arrayArgs.push(ae),ee.arrayBlockIndices.push(ce.blockIndices?ce.blockIndices:0),ee.shimArgs.push("array"+ae),ae<ee.pre.args.length&&ee.pre.args[ae].count>0)throw new Error("cwise: pre() block may not reference array args");if(ae<ee.post.args.length&&ee.post.args[ae].count>0)throw new Error("cwise: post() block may not reference array args")}else if(ce==="scalar")ee.scalarArgs.push(ae),ee.shimArgs.push("scalar"+ae);else if(ce==="index"){if(ee.indexArgs.push(ae),ae<ee.pre.args.length&&ee.pre.args[ae].count>0)throw new Error("cwise: pre() block may not reference array index");if(ae<ee.body.args.length&&ee.body.args[ae].lvalue)throw new Error("cwise: body() block may not write to array index");if(ae<ee.post.args.length&&ee.post.args[ae].count>0)throw new Error("cwise: post() block may not reference array index")}else if(ce==="shape"){if(ee.shapeArgs.push(ae),ae<ee.pre.args.length&&ee.pre.args[ae].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(ae<ee.body.args.length&&ee.body.args[ae].lvalue)throw new Error("cwise: body() block may not write to array shape");if(ae<ee.post.args.length&&ee.post.args[ae].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof ce=="object"&&ce.offset)ee.argTypes[ae]="offset",ee.offsetArgs.push({array:ce.array,offset:ce.offset}),ee.offsetArgIndex.push(ae);else throw new Error("cwise: Unknown argument type "+ne[ae])}if(ee.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(ee.pre.args.length>ne.length)throw new Error("cwise: Too many arguments in pre() block");if(ee.body.args.length>ne.length)throw new Error("cwise: Too many arguments in body() block");if(ee.post.args.length>ne.length)throw new Error("cwise: Too many arguments in post() block");return ee.debug=!!re.printCode||!!re.debug,ee.funcName=re.funcName||"cwise",ee.blockSize=re.blockSize||64,createThunk(ee)}var compiler=compileCwise;(function(re){var ee=compiler,ne={body:"",args:[],thisVars:[],localVars:[]};function ae(ye){if(!ye)return ne;for(var be=0;be<ye.args.length;++be){var Ee=ye.args[be];be===0?ye.args[be]={name:Ee,lvalue:!0,rvalue:!!ye.rvalue,count:ye.count||1}:ye.args[be]={name:Ee,lvalue:!1,rvalue:!0,count:1}}return ye.thisVars||(ye.thisVars=[]),ye.localVars||(ye.localVars=[]),ye}function ce(ye){return ee({args:ye.args,pre:ae(ye.pre),body:ae(ye.body),post:ae(ye.proc),funcName:ye.funcName})}function le(ye){for(var be=[],Ee=0;Ee<ye.args.length;++Ee)be.push("a"+Ee);var Ce=new Function("P",["return function ",ye.funcName,"_ndarrayops(",be.join(","),") {P(",be.join(","),");return a0}"].join(""));return Ce(ce(ye))}var ue={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var ye in ue){var be=ue[ye];re[ye]=le({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+be+"c"},funcName:ye}),re[ye+"eq"]=le({args:["array","array"],body:{args:["a","b"],body:"a"+be+"=b"},rvalue:!0,funcName:ye+"eq"}),re[ye+"s"]=le({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+be+"s"},funcName:ye+"s"}),re[ye+"seq"]=le({args:["array","scalar"],body:{args:["a","s"],body:"a"+be+"=s"},rvalue:!0,funcName:ye+"seq"})}})();var he={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var ye in he){var be=he[ye];re[ye]=le({args:["array","array"],body:{args:["a","b"],body:"a="+be+"b"},funcName:ye}),re[ye+"eq"]=le({args:["array"],body:{args:["a"],body:"a="+be+"a"},rvalue:!0,count:2,funcName:ye+"eq"})}})();var fe={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var ye in fe){var be=fe[ye];re[ye]=le({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+be+"c"},funcName:ye}),re[ye+"s"]=le({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+be+"s"},funcName:ye+"s"}),re[ye+"eq"]=le({args:["array","array"],body:{args:["a","b"],body:"a=a"+be+"b"},rvalue:!0,count:2,funcName:ye+"eq"}),re[ye+"seq"]=le({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+be+"s"},rvalue:!0,count:2,funcName:ye+"seq"})}})();var me=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var ye=0;ye<me.length;++ye){var be=me[ye];re[be]=le({args:["array","array"],pre:{args:[],body:"this_f=Math."+be,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:be}),re[be+"eq"]=le({args:["array"],pre:{args:[],body:"this_f=Math."+be,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:be+"eq"})}})();var ge=["max","min","atan2","pow"];(function(){for(var ye=0;ye<ge.length;++ye){var be=ge[ye];re[be]=le({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+be,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:be}),re[be+"s"]=le({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+be,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:be+"s"}),re[be+"eq"]=le({args:["array","array"],pre:{args:[],body:"this_f=Math."+be,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:be+"eq"}),re[be+"seq"]=le({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+be,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:be+"seq"})}})();var ve=["atan2","pow"];(function(){for(var ye=0;ye<ve.length;++ye){var be=ve[ye];re[be+"op"]=le({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+be,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:be+"op"}),re[be+"ops"]=le({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+be,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:be+"ops"}),re[be+"opeq"]=le({args:["array","array"],pre:{args:[],body:"this_f=Math."+be,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:be+"opeq"}),re[be+"opseq"]=le({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+be,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:be+"opseq"})}})(),re.any=ee({args:["array"],pre:ne,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),re.all=ee({args:["array"],pre:ne,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),re.sum=ee({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),re.prod=ee({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),re.norm2squared=ee({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),re.norm2=ee({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),re.norminf=ee({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),re.norm1=ee({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),re.sup=ee({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),re.inf=ee({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),re.argmin=ee({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),re.argmax=ee({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),re.random=le({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),re.assign=le({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),re.assigns=le({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),re.equals=ee({args:["array","array"],pre:ne,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(ndarrayOps);var twiddle={},INT_BITS=32;twiddle.INT_BITS=INT_BITS;twiddle.INT_MAX=2147483647;twiddle.INT_MIN=-1<<INT_BITS-1;twiddle.sign=function(re){return(re>0)-(re<0)};twiddle.abs=function(re){var ee=re>>INT_BITS-1;return(re^ee)-ee};twiddle.min=function(re,ee){return ee^(re^ee)&-(re<ee)};twiddle.max=function(re,ee){return re^(re^ee)&-(re<ee)};twiddle.isPow2=function(re){return!(re&re-1)&&!!re};twiddle.log2=function(re){var ee,ne;return ee=(re>65535)<<4,re>>>=ee,ne=(re>255)<<3,re>>>=ne,ee|=ne,ne=(re>15)<<2,re>>>=ne,ee|=ne,ne=(re>3)<<1,re>>>=ne,ee|=ne,ee|re>>1};twiddle.log10=function(re){return re>=1e9?9:re>=1e8?8:re>=1e7?7:re>=1e6?6:re>=1e5?5:re>=1e4?4:re>=1e3?3:re>=100?2:re>=10?1:0};twiddle.popCount=function(re){return re=re-(re>>>1&1431655765),re=(re&858993459)+(re>>>2&858993459),(re+(re>>>4)&252645135)*16843009>>>24};function countTrailingZeros(re){var ee=32;return re&=-re,re&&ee--,re&65535&&(ee-=16),re&16711935&&(ee-=8),re&252645135&&(ee-=4),re&858993459&&(ee-=2),re&1431655765&&(ee-=1),ee}twiddle.countTrailingZeros=countTrailingZeros;twiddle.nextPow2=function(re){return re+=re===0,--re,re|=re>>>1,re|=re>>>2,re|=re>>>4,re|=re>>>8,re|=re>>>16,re+1};twiddle.prevPow2=function(re){return re|=re>>>1,re|=re>>>2,re|=re>>>4,re|=re>>>8,re|=re>>>16,re-(re>>>1)};twiddle.parity=function(re){return re^=re>>>16,re^=re>>>8,re^=re>>>4,re&=15,27030>>>re&1};var REVERSE_TABLE=new Array(256);(function(re){for(var ee=0;ee<256;++ee){var ne=ee,ae=ee,ce=7;for(ne>>>=1;ne;ne>>>=1)ae<<=1,ae|=ne&1,--ce;re[ee]=ae<<ce&255}})(REVERSE_TABLE);twiddle.reverse=function(re){return REVERSE_TABLE[re&255]<<24|REVERSE_TABLE[re>>>8&255]<<16|REVERSE_TABLE[re>>>16&255]<<8|REVERSE_TABLE[re>>>24&255]};twiddle.interleave2=function(re,ee){return re&=65535,re=(re|re<<8)&16711935,re=(re|re<<4)&252645135,re=(re|re<<2)&858993459,re=(re|re<<1)&1431655765,ee&=65535,ee=(ee|ee<<8)&16711935,ee=(ee|ee<<4)&252645135,ee=(ee|ee<<2)&858993459,ee=(ee|ee<<1)&1431655765,re|ee<<1};twiddle.deinterleave2=function(re,ee){return re=re>>>ee&1431655765,re=(re|re>>>1)&858993459,re=(re|re>>>2)&252645135,re=(re|re>>>4)&16711935,re=(re|re>>>16)&65535,re<<16>>16};twiddle.interleave3=function(re,ee,ne){return re&=1023,re=(re|re<<16)&4278190335,re=(re|re<<8)&251719695,re=(re|re<<4)&3272356035,re=(re|re<<2)&1227133513,ee&=1023,ee=(ee|ee<<16)&4278190335,ee=(ee|ee<<8)&251719695,ee=(ee|ee<<4)&3272356035,ee=(ee|ee<<2)&1227133513,re|=ee<<1,ne&=1023,ne=(ne|ne<<16)&4278190335,ne=(ne|ne<<8)&251719695,ne=(ne|ne<<4)&3272356035,ne=(ne|ne<<2)&1227133513,re|ne<<2};twiddle.deinterleave3=function(re,ee){return re=re>>>ee&1227133513,re=(re|re>>>2)&3272356035,re=(re|re>>>4)&251719695,re=(re|re>>>8)&4278190335,re=(re|re>>>16)&1023,re<<22>>22};twiddle.nextCombination=function(re){var ee=re|re-1;return ee+1|(~ee&-~ee)-1>>>countTrailingZeros(re)+1};function dupe_array(re,ee,ne){var ae=re[ne]|0;if(ae<=0)return[];var ce=new Array(ae),le;if(ne===re.length-1)for(le=0;le<ae;++le)ce[le]=ee;else for(le=0;le<ae;++le)ce[le]=dupe_array(re,ee,ne+1);return ce}function dupe_number(re,ee){var ne,ae;for(ne=new Array(re),ae=0;ae<re;++ae)ne[ae]=ee;return ne}function dupe(re,ee){switch(typeof ee>"u"&&(ee=0),typeof re){case"number":if(re>0)return dupe_number(re|0,ee);break;case"object":if(typeof re.length=="number")return dupe_array(re,ee,0);break}return[]}var dup$1=dupe,dup=dup$1;buffer$2.Buffer;globalThis.__TYPEDARRAY_POOL||(globalThis.__TYPEDARRAY_POOL={UINT8:dup([32,0]),UINT16:dup([32,0]),UINT32:dup([32,0]),BIGUINT64:dup([32,0]),INT8:dup([32,0]),INT16:dup([32,0]),INT32:dup([32,0]),BIGINT64:dup([32,0]),FLOAT:dup([32,0]),DOUBLE:dup([32,0]),DATA:dup([32,0]),UINT8C:dup([32,0]),BUFFER:dup([32,0])});var POOL=globalThis.__TYPEDARRAY_POOL;POOL.UINT8C||(POOL.UINT8C=dup([32,0]));POOL.BIGUINT64||(POOL.BIGUINT64=dup([32,0]));POOL.BIGINT64||(POOL.BIGINT64=dup([32,0]));POOL.BUFFER||(POOL.BUFFER=dup([32,0]));POOL.DATA;POOL.BUFFER;var fftMatrix={exports:{}},bits=twiddle;function fft(re,ee,ne,ae,ce,le,ue){re|=0,ee|=0,ne|=0,ce|=0,le|=0,bits.isPow2(ne)?fftRadix2(re,ee,ne,ae,ce,le):fftBluestein(re,ee,ne,ae,ce,le,ue)}fftMatrix.exports=fft;function scratchMemory(re){return bits.isPow2(re)?0:2*re+4*bits.nextPow2(2*re+1)}fftMatrix.exports.scratchMemory=scratchMemory;function fftRadix2(re,ee,ne,ae,ce,le){re|=0,ee|=0,ne|=0,ce|=0,le|=0;var ue,he,fe,me,ge,ve,ye,be,Ee,Ce,Se,Te,ke,Ne,Fe,De,Oe,Re,Be,Le,je,Ge,qe,Ue,ze;for(ue=ne,he=bits.log2(ue),Re=0;Re<ee;++Re){for(ye=ue>>1,ge=0,fe=0;fe<ue-1;fe++){for(fe<ge&&(ke=ae[ce+fe],ae[ce+fe]=ae[ce+ge],ae[ce+ge]=ke,ke=ae[le+fe],ae[le+fe]=ae[le+ge],ae[le+ge]=ke),ve=ye;ve<=ge;)ge-=ve,ve>>=1;ge+=ve}for(Se=-1,Te=0,Ce=1,be=0;be<he;be++){for(Ee=Ce,Ce<<=1,De=1,Oe=0,ge=0;ge<Ee;ge++){for(fe=ge;fe<ue;fe+=Ce)me=fe+Ee,Be=ae[ce+me],Le=ae[le+me],je=ae[ce+fe],Ge=ae[le+fe],qe=De*(Be+Le),Ue=Be*(Oe-De),ze=Le*(De+Oe),Ne=qe-ze,Fe=qe+Ue,ae[ce+me]=je-Ne,ae[le+me]=Ge-Fe,ae[ce+fe]+=Ne,ae[le+fe]+=Fe;qe=Se*(De+Oe),Ue=De*(Te-Se),ze=Oe*(Se+Te),De=qe-ze,Oe=qe+Ue}Te=Math.sqrt((1-Se)/2),re<0&&(Te=-Te),Se=Math.sqrt((1+Se)/2)}if(re<0){var He=1/ue;for(fe=0;fe<ue;fe++)ae[ce+fe]*=He,ae[le+fe]*=He}ce+=ne,le+=ne}}function fftBluestein(re,ee,ne,ae,ce,le,ue){re|=0,ee|=0,ne|=0,ce|=0,le|=0,ue|=0;var he=bits.nextPow2(2*ne+1),fe=ue,me=fe+ne,ge=me+ne,ve=ge+he,ye=ve+he,be=ye+he,Ee=-re*Math.PI/ne,Ce,Se,Te,ke,Ne,Fe,De,Oe,Re;for(Re=0;Re<ne;++Re)Se=Ee*(Re*Re%(ne*2)),ke=Math.cos(Se),Ne=Math.sin(Se),ae[ye+(he-Re)]=ae[ye+Re]=ae[fe+Re]=ke,ae[be+(he-Re)]=ae[be+Re]=ae[me+Re]=Ne;for(Re=ne;Re<=he-ne;++Re)ae[ye+Re]=0;for(Re=ne;Re<=he-ne;++Re)ae[be+Re]=0;for(fftRadix2(1,1,he,ae,ye,be),re<0?Ee=1/ne:Ee=1,Ce=0;Ce<ee;++Ce){for(Re=0;Re<ne;++Re)Se=ae[ce+Re],Te=ae[le+Re],ke=ae[fe+Re],Ne=-ae[me+Re],Fe=ke*(Se+Te),De=Se*(Ne-ke),Oe=Te*(ke+Ne),ae[ge+Re]=Fe-Oe,ae[ve+Re]=Fe+De;for(Re=ne;Re<he;++Re)ae[ge+Re]=0;for(Re=ne;Re<he;++Re)ae[ve+Re]=0;for(fftRadix2(1,1,he,ae,ge,ve),Re=0;Re<he;++Re)Se=ae[ge+Re],Te=ae[ve+Re],ke=ae[ye+Re],Ne=ae[be+Re],Fe=ke*(Se+Te),De=Se*(Ne-ke),Oe=Te*(ke+Ne),ae[ge+Re]=Fe-Oe,ae[ve+Re]=Fe+De;for(fftRadix2(-1,1,he,ae,ge,ve),Re=0;Re<ne;++Re)Se=ae[ge+Re],Te=ae[ve+Re],ke=ae[fe+Re],Ne=-ae[me+Re],Fe=ke*(Se+Te),De=Se*(Ne-ke),Oe=Te*(ke+Ne),ae[ce+Re]=Ee*(Fe-Oe),ae[le+Re]=Ee*(Fe+De);ce+=ne,le+=ne}}var esprima$1={};(function(re){(function(ee,ne){ne(re)})(commonjsGlobal,function(ee){var ne,ae,ce,le,ue,he,fe,me,ge,ve,ye,be,Ee,Ce,Se,Te,ke,Ne;ne={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},ae={},ae[ne.BooleanLiteral]="Boolean",ae[ne.EOF]="<end>",ae[ne.Identifier]="Identifier",ae[ne.Keyword]="Keyword",ae[ne.NullLiteral]="Null",ae[ne.NumericLiteral]="Numeric",ae[ne.Punctuator]="Punctuator",ae[ne.StringLiteral]="String",ae[ne.RegularExpression]="RegularExpression",ce=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],le={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},ue={Data:1,Get:2,Set:4},he={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},fe={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function Fe(Pe,Qe){if(!Pe)throw new Error("ASSERT: "+Qe)}function De(Pe){return Pe>=48&&Pe<=57}function Oe(Pe){return"0123456789abcdefABCDEF".indexOf(Pe)>=0}function Re(Pe){return"01234567".indexOf(Pe)>=0}function Be(Pe){return Pe===32||Pe===9||Pe===11||Pe===12||Pe===160||Pe>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(Pe)>=0}function Le(Pe){return Pe===10||Pe===13||Pe===8232||Pe===8233}function je(Pe){return Pe===36||Pe===95||Pe>=65&&Pe<=90||Pe>=97&&Pe<=122||Pe===92||Pe>=128&&fe.NonAsciiIdentifierStart.test(String.fromCharCode(Pe))}function Ge(Pe){return Pe===36||Pe===95||Pe>=65&&Pe<=90||Pe>=97&&Pe<=122||Pe>=48&&Pe<=57||Pe===92||Pe>=128&&fe.NonAsciiIdentifierPart.test(String.fromCharCode(Pe))}function qe(Pe){switch(Pe){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function Ue(Pe){switch(Pe){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function ze(Pe){return Pe==="eval"||Pe==="arguments"}function He(Pe){if(ve&&Ue(Pe))return!0;switch(Pe.length){case 2:return Pe==="if"||Pe==="in"||Pe==="do";case 3:return Pe==="var"||Pe==="for"||Pe==="new"||Pe==="try"||Pe==="let";case 4:return Pe==="this"||Pe==="else"||Pe==="case"||Pe==="void"||Pe==="with"||Pe==="enum";case 5:return Pe==="while"||Pe==="break"||Pe==="catch"||Pe==="throw"||Pe==="const"||Pe==="yield"||Pe==="class"||Pe==="super";case 6:return Pe==="return"||Pe==="typeof"||Pe==="delete"||Pe==="switch"||Pe==="export"||Pe==="import";case 7:return Pe==="default"||Pe==="finally"||Pe==="extends";case 8:return Pe==="function"||Pe==="continue"||Pe==="debugger";case 10:return Pe==="instanceof";default:return!1}}function Ye(Pe,Qe,Kt,hn,wn){var Mn;Fe(typeof Kt=="number","Comment must have valid position"),!(ke.lastCommentStart>=Kt)&&(ke.lastCommentStart=Kt,Mn={type:Pe,value:Qe},Ne.range&&(Mn.range=[Kt,hn]),Ne.loc&&(Mn.loc=wn),Ne.comments.push(Mn),Ne.attachComment&&(Ne.leadingComments.push(Mn),Ne.trailingComments.push(Mn)))}function Xe(Pe){var Qe,Kt,hn,wn;for(Qe=ye-Pe,Kt={start:{line:be,column:ye-Ee-Pe}};ye<Ce;)if(hn=ge.charCodeAt(ye),++ye,Le(hn)){Ne.comments&&(wn=ge.slice(Qe+Pe,ye-1),Kt.end={line:be,column:ye-Ee-1},Ye("Line",wn,Qe,ye-1,Kt)),hn===13&&ge.charCodeAt(ye)===10&&++ye,++be,Ee=ye;return}Ne.comments&&(wn=ge.slice(Qe+Pe,ye),Kt.end={line:be,column:ye-Ee},Ye("Line",wn,Qe,ye,Kt))}function We(){var Pe,Qe,Kt,hn;for(Ne.comments&&(Pe=ye-2,Qe={start:{line:be,column:ye-Ee-2}});ye<Ce;)if(Kt=ge.charCodeAt(ye),Le(Kt))Kt===13&&ge.charCodeAt(ye+1)===10&&++ye,++be,++ye,Ee=ye,ye>=Ce&&Vn({},he.UnexpectedToken,"ILLEGAL");else if(Kt===42){if(ge.charCodeAt(ye+1)===47){++ye,++ye,Ne.comments&&(hn=ge.slice(Pe+2,ye-2),Qe.end={line:be,column:ye-Ee},Ye("Block",hn,Pe,ye,Qe));return}++ye}else++ye;Vn({},he.UnexpectedToken,"ILLEGAL")}function Ze(){var Pe,Qe;for(Qe=ye===0;ye<Ce;)if(Pe=ge.charCodeAt(ye),Be(Pe))++ye;else if(Le(Pe))++ye,Pe===13&&ge.charCodeAt(ye)===10&&++ye,++be,Ee=ye,Qe=!0;else if(Pe===47)if(Pe=ge.charCodeAt(ye+1),Pe===47)++ye,++ye,Xe(2),Qe=!0;else if(Pe===42)++ye,++ye,We();else break;else if(Qe&&Pe===45)if(ge.charCodeAt(ye+1)===45&&ge.charCodeAt(ye+2)===62)ye+=3,Xe(3);else break;else if(Pe===60)if(ge.slice(ye+1,ye+4)==="!--")++ye,++ye,++ye,++ye,Xe(4);else break;else break}function Vt(Pe){var Qe,Kt,hn,wn=0;for(Kt=Pe==="u"?4:2,Qe=0;Qe<Kt;++Qe)if(ye<Ce&&Oe(ge[ye]))hn=ge[ye++],wn=wn*16+"0123456789abcdef".indexOf(hn.toLowerCase());else return"";return String.fromCharCode(wn)}function Qt(){var Pe,Qe;for(Pe=ge.charCodeAt(ye++),Qe=String.fromCharCode(Pe),Pe===92&&(ge.charCodeAt(ye)!==117&&Vn({},he.UnexpectedToken,"ILLEGAL"),++ye,Pe=Vt("u"),(!Pe||Pe==="\\"||!je(Pe.charCodeAt(0)))&&Vn({},he.UnexpectedToken,"ILLEGAL"),Qe=Pe);ye<Ce&&(Pe=ge.charCodeAt(ye),!!Ge(Pe));)++ye,Qe+=String.fromCharCode(Pe),Pe===92&&(Qe=Qe.substr(0,Qe.length-1),ge.charCodeAt(ye)!==117&&Vn({},he.UnexpectedToken,"ILLEGAL"),++ye,Pe=Vt("u"),(!Pe||Pe==="\\"||!Ge(Pe.charCodeAt(0)))&&Vn({},he.UnexpectedToken,"ILLEGAL"),Qe+=Pe);return Qe}function Yt(){var Pe,Qe;for(Pe=ye++;ye<Ce;){if(Qe=ge.charCodeAt(ye),Qe===92)return ye=Pe,Qt();if(Ge(Qe))++ye;else break}return ge.slice(Pe,ye)}function Jt(){var Pe,Qe,Kt;return Pe=ye,Qe=ge.charCodeAt(ye)===92?Qt():Yt(),Qe.length===1?Kt=ne.Identifier:He(Qe)?Kt=ne.Keyword:Qe==="null"?Kt=ne.NullLiteral:Qe==="true"||Qe==="false"?Kt=ne.BooleanLiteral:Kt=ne.Identifier,{type:Kt,value:Qe,lineNumber:be,lineStart:Ee,start:Pe,end:ye}}function rn(){var Pe=ye,Qe=ge.charCodeAt(ye),Kt,hn=ge[ye],wn,Mn,ts;switch(Qe){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ye,Ne.tokenize&&(Qe===40?Ne.openParenToken=Ne.tokens.length:Qe===123&&(Ne.openCurlyToken=Ne.tokens.length)),{type:ne.Punctuator,value:String.fromCharCode(Qe),lineNumber:be,lineStart:Ee,start:Pe,end:ye};default:if(Kt=ge.charCodeAt(ye+1),Kt===61)switch(Qe){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ye+=2,{type:ne.Punctuator,value:String.fromCharCode(Qe)+String.fromCharCode(Kt),lineNumber:be,lineStart:Ee,start:Pe,end:ye};case 33:case 61:return ye+=2,ge.charCodeAt(ye)===61&&++ye,{type:ne.Punctuator,value:ge.slice(Pe,ye),lineNumber:be,lineStart:Ee,start:Pe,end:ye}}}if(ts=ge.substr(ye,4),ts===">>>=")return ye+=4,{type:ne.Punctuator,value:ts,lineNumber:be,lineStart:Ee,start:Pe,end:ye};if(Mn=ts.substr(0,3),Mn===">>>"||Mn==="<<="||Mn===">>=")return ye+=3,{type:ne.Punctuator,value:Mn,lineNumber:be,lineStart:Ee,start:Pe,end:ye};if(wn=Mn.substr(0,2),hn===wn[1]&&"+-<>&|".indexOf(hn)>=0||wn==="=>")return ye+=2,{type:ne.Punctuator,value:wn,lineNumber:be,lineStart:Ee,start:Pe,end:ye};if("<>=!+-*%&|^/".indexOf(hn)>=0)return++ye,{type:ne.Punctuator,value:hn,lineNumber:be,lineStart:Ee,start:Pe,end:ye};Vn({},he.UnexpectedToken,"ILLEGAL")}function nn(Pe){for(var Qe="";ye<Ce&&Oe(ge[ye]);)Qe+=ge[ye++];return Qe.length===0&&Vn({},he.UnexpectedToken,"ILLEGAL"),je(ge.charCodeAt(ye))&&Vn({},he.UnexpectedToken,"ILLEGAL"),{type:ne.NumericLiteral,value:parseInt("0x"+Qe,16),lineNumber:be,lineStart:Ee,start:Pe,end:ye}}function fn(Pe){for(var Qe="0"+ge[ye++];ye<Ce&&Re(ge[ye]);)Qe+=ge[ye++];return(je(ge.charCodeAt(ye))||De(ge.charCodeAt(ye)))&&Vn({},he.UnexpectedToken,"ILLEGAL"),{type:ne.NumericLiteral,value:parseInt(Qe,8),octal:!0,lineNumber:be,lineStart:Ee,start:Pe,end:ye}}function an(){var Pe,Qe;for(Pe=ye+1;Pe<Ce;++Pe){if(Qe=ge[Pe],Qe==="8"||Qe==="9")return!1;if(!Re(Qe))return!0}return!0}function un(){var Pe,Qe,Kt;if(Kt=ge[ye],Fe(De(Kt.charCodeAt(0))||Kt===".","Numeric literal must start with a decimal digit or a decimal point"),Qe=ye,Pe="",Kt!=="."){if(Pe=ge[ye++],Kt=ge[ye],Pe==="0"){if(Kt==="x"||Kt==="X")return++ye,nn(Qe);if(Re(Kt)&&an())return fn(Qe)}for(;De(ge.charCodeAt(ye));)Pe+=ge[ye++];Kt=ge[ye]}if(Kt==="."){for(Pe+=ge[ye++];De(ge.charCodeAt(ye));)Pe+=ge[ye++];Kt=ge[ye]}if(Kt==="e"||Kt==="E")if(Pe+=ge[ye++],Kt=ge[ye],(Kt==="+"||Kt==="-")&&(Pe+=ge[ye++]),De(ge.charCodeAt(ye)))for(;De(ge.charCodeAt(ye));)Pe+=ge[ye++];else Vn({},he.UnexpectedToken,"ILLEGAL");return je(ge.charCodeAt(ye))&&Vn({},he.UnexpectedToken,"ILLEGAL"),{type:ne.NumericLiteral,value:parseFloat(Pe),lineNumber:be,lineStart:Ee,start:Qe,end:ye}}function bn(){var Pe="",Qe,Kt,hn,wn,Mn,ts,ls=!1,Cs,ks;for(Cs=be,ks=Ee,Qe=ge[ye],Fe(Qe==="'"||Qe==='"',"String literal must starts with a quote"),Kt=ye,++ye;ye<Ce;)if(hn=ge[ye++],hn===Qe){Qe="";break}else if(hn==="\\")if(hn=ge[ye++],!hn||!Le(hn.charCodeAt(0)))switch(hn){case"u":case"x":ts=ye,Mn=Vt(hn),Mn?Pe+=Mn:(ye=ts,Pe+=hn);break;case"n":Pe+=`
`;break;case"r":Pe+="\r";break;case"t":Pe+="	";break;case"b":Pe+="\b";break;case"f":Pe+="\f";break;case"v":Pe+="\v";break;default:Re(hn)?(wn="01234567".indexOf(hn),wn!==0&&(ls=!0),ye<Ce&&Re(ge[ye])&&(ls=!0,wn=wn*8+"01234567".indexOf(ge[ye++]),"0123".indexOf(hn)>=0&&ye<Ce&&Re(ge[ye])&&(wn=wn*8+"01234567".indexOf(ge[ye++]))),Pe+=String.fromCharCode(wn)):Pe+=hn;break}else++be,hn==="\r"&&ge[ye]===`
`&&++ye,Ee=ye;else{if(Le(hn.charCodeAt(0)))break;Pe+=hn}return Qe!==""&&Vn({},he.UnexpectedToken,"ILLEGAL"),{type:ne.StringLiteral,value:Pe,octal:ls,startLineNumber:Cs,startLineStart:ks,lineNumber:be,lineStart:Ee,start:Kt,end:ye}}function En(Pe,Qe){var Kt;try{Kt=new RegExp(Pe,Qe)}catch{Vn({},he.InvalidRegExp)}return Kt}function $n(){var Pe,Qe,Kt,hn,wn;for(Pe=ge[ye],Fe(Pe==="/","Regular expression literal must start with a slash"),Qe=ge[ye++],Kt=!1,hn=!1;ye<Ce;)if(Pe=ge[ye++],Qe+=Pe,Pe==="\\")Pe=ge[ye++],Le(Pe.charCodeAt(0))&&Vn({},he.UnterminatedRegExp),Qe+=Pe;else if(Le(Pe.charCodeAt(0)))Vn({},he.UnterminatedRegExp);else if(Kt)Pe==="]"&&(Kt=!1);else if(Pe==="/"){hn=!0;break}else Pe==="["&&(Kt=!0);return hn||Vn({},he.UnterminatedRegExp),wn=Qe.substr(1,Qe.length-2),{value:wn,literal:Qe}}function On(){var Pe,Qe,Kt,hn;for(Qe="",Kt="";ye<Ce&&(Pe=ge[ye],!!Ge(Pe.charCodeAt(0)));)if(++ye,Pe==="\\"&&ye<Ce)if(Pe=ge[ye],Pe==="u"){if(++ye,hn=ye,Pe=Vt("u"),Pe)for(Kt+=Pe,Qe+="\\u";hn<ye;++hn)Qe+=ge[hn];else ye=hn,Kt+="u",Qe+="\\u";Hn({},he.UnexpectedToken,"ILLEGAL")}else Qe+="\\",Hn({},he.UnexpectedToken,"ILLEGAL");else Kt+=Pe,Qe+=Pe;return{value:Kt,literal:Qe}}function zn(){var Pe,Qe,Kt,hn;return Te=null,Ze(),Pe=ye,Qe=$n(),Kt=On(),hn=En(Qe.value,Kt.value),Ne.tokenize?{type:ne.RegularExpression,value:hn,lineNumber:be,lineStart:Ee,start:Pe,end:ye}:{literal:Qe.literal+Kt.literal,value:hn,start:Pe,end:ye}}function Rn(){var Pe,Qe,Kt,hn;return Ze(),Pe=ye,Qe={start:{line:be,column:ye-Ee}},Kt=zn(),Qe.end={line:be,column:ye-Ee},Ne.tokenize||(Ne.tokens.length>0&&(hn=Ne.tokens[Ne.tokens.length-1],hn.range[0]===Pe&&hn.type==="Punctuator"&&(hn.value==="/"||hn.value==="/=")&&Ne.tokens.pop()),Ne.tokens.push({type:"RegularExpression",value:Kt.literal,range:[Pe,ye],loc:Qe})),Kt}function Ut(Pe){return Pe.type===ne.Identifier||Pe.type===ne.Keyword||Pe.type===ne.BooleanLiteral||Pe.type===ne.NullLiteral}function tn(){var Pe,Qe;if(Pe=Ne.tokens[Ne.tokens.length-1],!Pe)return Rn();if(Pe.type==="Punctuator"){if(Pe.value==="]")return rn();if(Pe.value===")")return Qe=Ne.tokens[Ne.openParenToken-1],Qe&&Qe.type==="Keyword"&&(Qe.value==="if"||Qe.value==="while"||Qe.value==="for"||Qe.value==="with")?Rn():rn();if(Pe.value==="}"){if(Ne.tokens[Ne.openCurlyToken-3]&&Ne.tokens[Ne.openCurlyToken-3].type==="Keyword"){if(Qe=Ne.tokens[Ne.openCurlyToken-4],!Qe)return rn()}else if(Ne.tokens[Ne.openCurlyToken-4]&&Ne.tokens[Ne.openCurlyToken-4].type==="Keyword"){if(Qe=Ne.tokens[Ne.openCurlyToken-5],!Qe)return Rn()}else return rn();return ce.indexOf(Qe.value)>=0?rn():Rn()}return Rn()}return Pe.type==="Keyword"&&Pe.value!=="this"?Rn():rn()}function dn(){var Pe;return Ze(),ye>=Ce?{type:ne.EOF,lineNumber:be,lineStart:Ee,start:ye,end:ye}:(Pe=ge.charCodeAt(ye),je(Pe)?Jt():Pe===40||Pe===41||Pe===59?rn():Pe===39||Pe===34?bn():Pe===46?De(ge.charCodeAt(ye+1))?un():rn():De(Pe)?un():Ne.tokenize&&Pe===47?tn():rn())}function xn(){var Pe,Qe,Kt;return Ze(),Pe={start:{line:be,column:ye-Ee}},Qe=dn(),Pe.end={line:be,column:ye-Ee},Qe.type!==ne.EOF&&(Kt=ge.slice(Qe.start,Qe.end),Ne.tokens.push({type:ae[Qe.type],value:Kt,range:[Qe.start,Qe.end],loc:Pe})),Qe}function An(){var Pe;return Pe=Te,ye=Pe.end,be=Pe.lineNumber,Ee=Pe.lineStart,Te=typeof Ne.tokens<"u"?xn():dn(),ye=Pe.end,be=Pe.lineNumber,Ee=Pe.lineStart,Pe}function vn(){var Pe,Qe,Kt;Pe=ye,Qe=be,Kt=Ee,Te=typeof Ne.tokens<"u"?xn():dn(),ye=Pe,be=Qe,Ee=Kt}function Nn(Pe,Qe){this.line=Pe,this.column=Qe}function Gn(Pe,Qe,Kt,hn){this.start=new Nn(Pe,Qe),this.end=new Nn(Kt,hn)}me={name:"SyntaxTree",processComment:function(Pe){var Qe,Kt;if(!(Pe.type===le.Program&&Pe.body.length>0)){for(Ne.trailingComments.length>0?Ne.trailingComments[0].range[0]>=Pe.range[1]?(Kt=Ne.trailingComments,Ne.trailingComments=[]):Ne.trailingComments.length=0:Ne.bottomRightStack.length>0&&Ne.bottomRightStack[Ne.bottomRightStack.length-1].trailingComments&&Ne.bottomRightStack[Ne.bottomRightStack.length-1].trailingComments[0].range[0]>=Pe.range[1]&&(Kt=Ne.bottomRightStack[Ne.bottomRightStack.length-1].trailingComments,delete Ne.bottomRightStack[Ne.bottomRightStack.length-1].trailingComments);Ne.bottomRightStack.length>0&&Ne.bottomRightStack[Ne.bottomRightStack.length-1].range[0]>=Pe.range[0];)Qe=Ne.bottomRightStack.pop();Qe?Qe.leadingComments&&Qe.leadingComments[Qe.leadingComments.length-1].range[1]<=Pe.range[0]&&(Pe.leadingComments=Qe.leadingComments,delete Qe.leadingComments):Ne.leadingComments.length>0&&Ne.leadingComments[Ne.leadingComments.length-1].range[1]<=Pe.range[0]&&(Pe.leadingComments=Ne.leadingComments,Ne.leadingComments=[]),Kt&&(Pe.trailingComments=Kt),Ne.bottomRightStack.push(Pe)}},markEnd:function(Pe,Qe){return Ne.range&&(Pe.range=[Qe.start,ye]),Ne.loc&&(Pe.loc=new Gn(Qe.startLineNumber===void 0?Qe.lineNumber:Qe.startLineNumber,Qe.start-(Qe.startLineStart===void 0?Qe.lineStart:Qe.startLineStart),be,ye-Ee),this.postProcess(Pe)),Ne.attachComment&&this.processComment(Pe),Pe},postProcess:function(Pe){return Ne.source&&(Pe.loc.source=Ne.source),Pe},createArrayExpression:function(Pe){return{type:le.ArrayExpression,elements:Pe}},createAssignmentExpression:function(Pe,Qe,Kt){return{type:le.AssignmentExpression,operator:Pe,left:Qe,right:Kt}},createBinaryExpression:function(Pe,Qe,Kt){var hn=Pe==="||"||Pe==="&&"?le.LogicalExpression:le.BinaryExpression;return{type:hn,operator:Pe,left:Qe,right:Kt}},createBlockStatement:function(Pe){return{type:le.BlockStatement,body:Pe}},createBreakStatement:function(Pe){return{type:le.BreakStatement,label:Pe}},createCallExpression:function(Pe,Qe){return{type:le.CallExpression,callee:Pe,arguments:Qe}},createCatchClause:function(Pe,Qe){return{type:le.CatchClause,param:Pe,body:Qe}},createConditionalExpression:function(Pe,Qe,Kt){return{type:le.ConditionalExpression,test:Pe,consequent:Qe,alternate:Kt}},createContinueStatement:function(Pe){return{type:le.ContinueStatement,label:Pe}},createDebuggerStatement:function(){return{type:le.DebuggerStatement}},createDoWhileStatement:function(Pe,Qe){return{type:le.DoWhileStatement,body:Pe,test:Qe}},createEmptyStatement:function(){return{type:le.EmptyStatement}},createExpressionStatement:function(Pe){return{type:le.ExpressionStatement,expression:Pe}},createForStatement:function(Pe,Qe,Kt,hn){return{type:le.ForStatement,init:Pe,test:Qe,update:Kt,body:hn}},createForInStatement:function(Pe,Qe,Kt){return{type:le.ForInStatement,left:Pe,right:Qe,body:Kt,each:!1}},createFunctionDeclaration:function(Pe,Qe,Kt,hn){return{type:le.FunctionDeclaration,id:Pe,params:Qe,defaults:Kt,body:hn,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(Pe,Qe,Kt,hn){return{type:le.FunctionExpression,id:Pe,params:Qe,defaults:Kt,body:hn,rest:null,generator:!1,expression:!1}},createIdentifier:function(Pe){return{type:le.Identifier,name:Pe}},createIfStatement:function(Pe,Qe,Kt){return{type:le.IfStatement,test:Pe,consequent:Qe,alternate:Kt}},createLabeledStatement:function(Pe,Qe){return{type:le.LabeledStatement,label:Pe,body:Qe}},createLiteral:function(Pe){return{type:le.Literal,value:Pe.value,raw:ge.slice(Pe.start,Pe.end)}},createMemberExpression:function(Pe,Qe,Kt){return{type:le.MemberExpression,computed:Pe==="[",object:Qe,property:Kt}},createNewExpression:function(Pe,Qe){return{type:le.NewExpression,callee:Pe,arguments:Qe}},createObjectExpression:function(Pe){return{type:le.ObjectExpression,properties:Pe}},createPostfixExpression:function(Pe,Qe){return{type:le.UpdateExpression,operator:Pe,argument:Qe,prefix:!1}},createProgram:function(Pe){return{type:le.Program,body:Pe}},createProperty:function(Pe,Qe,Kt){return{type:le.Property,key:Qe,value:Kt,kind:Pe}},createReturnStatement:function(Pe){return{type:le.ReturnStatement,argument:Pe}},createSequenceExpression:function(Pe){return{type:le.SequenceExpression,expressions:Pe}},createSwitchCase:function(Pe,Qe){return{type:le.SwitchCase,test:Pe,consequent:Qe}},createSwitchStatement:function(Pe,Qe){return{type:le.SwitchStatement,discriminant:Pe,cases:Qe}},createThisExpression:function(){return{type:le.ThisExpression}},createThrowStatement:function(Pe){return{type:le.ThrowStatement,argument:Pe}},createTryStatement:function(Pe,Qe,Kt,hn){return{type:le.TryStatement,block:Pe,guardedHandlers:Qe,handlers:Kt,finalizer:hn}},createUnaryExpression:function(Pe,Qe){return Pe==="++"||Pe==="--"?{type:le.UpdateExpression,operator:Pe,argument:Qe,prefix:!0}:{type:le.UnaryExpression,operator:Pe,argument:Qe,prefix:!0}},createVariableDeclaration:function(Pe,Qe){return{type:le.VariableDeclaration,declarations:Pe,kind:Qe}},createVariableDeclarator:function(Pe,Qe){return{type:le.VariableDeclarator,id:Pe,init:Qe}},createWhileStatement:function(Pe,Qe){return{type:le.WhileStatement,test:Pe,body:Qe}},createWithStatement:function(Pe,Qe){return{type:le.WithStatement,object:Pe,body:Qe}}};function Wn(){var Pe,Qe,Kt,hn;return Pe=ye,Qe=be,Kt=Ee,Ze(),hn=be!==Qe,ye=Pe,be=Qe,Ee=Kt,hn}function Vn(Pe,Qe){var Kt,hn=Array.prototype.slice.call(arguments,2),wn=Qe.replace(/%(\d)/g,function(Mn,ts){return Fe(ts<hn.length,"Message reference must be in range"),hn[ts]});throw typeof Pe.lineNumber=="number"?(Kt=new Error("Line "+Pe.lineNumber+": "+wn),Kt.index=Pe.start,Kt.lineNumber=Pe.lineNumber,Kt.column=Pe.start-Ee+1):(Kt=new Error("Line "+be+": "+wn),Kt.index=ye,Kt.lineNumber=be,Kt.column=ye-Ee+1),Kt.description=wn,Kt}function Hn(){try{Vn.apply(null,arguments)}catch(Pe){if(Ne.errors)Ne.errors.push(Pe);else throw Pe}}function hs(Pe){if(Pe.type===ne.EOF&&Vn(Pe,he.UnexpectedEOS),Pe.type===ne.NumericLiteral&&Vn(Pe,he.UnexpectedNumber),Pe.type===ne.StringLiteral&&Vn(Pe,he.UnexpectedString),Pe.type===ne.Identifier&&Vn(Pe,he.UnexpectedIdentifier),Pe.type===ne.Keyword){if(qe(Pe.value))Vn(Pe,he.UnexpectedReserved);else if(ve&&Ue(Pe.value)){Hn(Pe,he.StrictReservedWord);return}Vn(Pe,he.UnexpectedToken,Pe.value)}Vn(Pe,he.UnexpectedToken,Pe.value)}function Pn(Pe){var Qe=An();(Qe.type!==ne.Punctuator||Qe.value!==Pe)&&hs(Qe)}function Jn(Pe){var Qe=An();(Qe.type!==ne.Keyword||Qe.value!==Pe)&&hs(Qe)}function gn(Pe){return Te.type===ne.Punctuator&&Te.value===Pe}function cn(Pe){return Te.type===ne.Keyword&&Te.value===Pe}function Fn(){var Pe;return Te.type!==ne.Punctuator?!1:(Pe=Te.value,Pe==="="||Pe==="*="||Pe==="/="||Pe==="%="||Pe==="+="||Pe==="-="||Pe==="<<="||Pe===">>="||Pe===">>>="||Pe==="&="||Pe==="^="||Pe==="|=")}function In(){var Pe,Qe=ye,Kt=be,hn=Ee,wn=Te;if(ge.charCodeAt(ye)===59||gn(";")){An();return}if(Pe=be,Ze(),be!==Pe){ye=Qe,be=Kt,Ee=hn,Te=wn;return}Te.type!==ne.EOF&&!gn("}")&&hs(Te)}function cs(Pe){return Pe.type===le.Identifier||Pe.type===le.MemberExpression}function Ss(){var Pe=[],Qe;for(Qe=Te,Pn("[");!gn("]");)gn(",")?(An(),Pe.push(null)):(Pe.push(js()),gn("]")||Pn(","));return An(),Se.markEnd(Se.createArrayExpression(Pe),Qe)}function os(Pe,Qe){var Kt,hn,wn;return Kt=ve,wn=Te,hn=xi(),Qe&&ve&&ze(Pe[0].name)&&Hn(Qe,he.StrictParamName),ve=Kt,Se.markEnd(Se.createFunctionExpression(null,Pe,[],hn),wn)}function _n(){var Pe,Qe;return Qe=Te,Pe=An(),Pe.type===ne.StringLiteral||Pe.type===ne.NumericLiteral?(ve&&Pe.octal&&Hn(Pe,he.StrictOctalLiteral),Se.markEnd(Se.createLiteral(Pe),Qe)):Se.markEnd(Se.createIdentifier(Pe.value),Qe)}function kn(){var Pe,Qe,Kt,hn,wn,Mn;if(Pe=Te,Mn=Te,Pe.type===ne.Identifier)return Kt=_n(),Pe.value==="get"&&!gn(":")?(Qe=_n(),Pn("("),Pn(")"),hn=os([]),Se.markEnd(Se.createProperty("get",Qe,hn),Mn)):Pe.value==="set"&&!gn(":")?(Qe=_n(),Pn("("),Pe=Te,Pe.type!==ne.Identifier?(Pn(")"),Hn(Pe,he.UnexpectedToken,Pe.value),hn=os([])):(wn=[vr()],Pn(")"),hn=os(wn,Pe)),Se.markEnd(Se.createProperty("set",Qe,hn),Mn)):(Pn(":"),hn=js(),Se.markEnd(Se.createProperty("init",Kt,hn),Mn));if(Pe.type===ne.EOF||Pe.type===ne.Punctuator)hs(Pe);else return Qe=_n(),Pn(":"),hn=js(),Se.markEnd(Se.createProperty("init",Qe,hn),Mn)}function jn(){var Pe=[],Qe,Kt,hn,wn,Mn={},ts=String,ls;for(ls=Te,Pn("{");!gn("}");)Qe=kn(),Qe.key.type===le.Identifier?Kt=Qe.key.name:Kt=ts(Qe.key.value),wn=Qe.kind==="init"?ue.Data:Qe.kind==="get"?ue.Get:ue.Set,hn="$"+Kt,Object.prototype.hasOwnProperty.call(Mn,hn)?(Mn[hn]===ue.Data?ve&&wn===ue.Data?Hn({},he.StrictDuplicateProperty):wn!==ue.Data&&Hn({},he.AccessorDataProperty):wn===ue.Data?Hn({},he.AccessorDataProperty):Mn[hn]&wn&&Hn({},he.AccessorGetSet),Mn[hn]|=wn):Mn[hn]=wn,Pe.push(Qe),gn("}")||Pn(",");return Pn("}"),Se.markEnd(Se.createObjectExpression(Pe),ls)}function Un(){var Pe;return Pn("("),Pe=Fs(),Pn(")"),Pe}function es(){var Pe,Qe,Kt,hn;if(gn("("))return Un();if(gn("["))return Ss();if(gn("{"))return jn();if(Pe=Te.type,hn=Te,Pe===ne.Identifier)Kt=Se.createIdentifier(An().value);else if(Pe===ne.StringLiteral||Pe===ne.NumericLiteral)ve&&Te.octal&&Hn(Te,he.StrictOctalLiteral),Kt=Se.createLiteral(An());else if(Pe===ne.Keyword){if(cn("function"))return Ki();cn("this")?(An(),Kt=Se.createThisExpression()):hs(An())}else Pe===ne.BooleanLiteral?(Qe=An(),Qe.value=Qe.value==="true",Kt=Se.createLiteral(Qe)):Pe===ne.NullLiteral?(Qe=An(),Qe.value=null,Kt=Se.createLiteral(Qe)):gn("/")||gn("/=")?(typeof Ne.tokens<"u"?Kt=Se.createLiteral(Rn()):Kt=Se.createLiteral(zn()),vn()):hs(An());return Se.markEnd(Kt,hn)}function ds(){var Pe=[];if(Pn("("),!gn(")"))for(;ye<Ce&&(Pe.push(js()),!gn(")"));)Pn(",");return Pn(")"),Pe}function As(){var Pe,Qe;return Qe=Te,Pe=An(),Ut(Pe)||hs(Pe),Se.markEnd(Se.createIdentifier(Pe.value),Qe)}function vs(){return Pn("."),As()}function fs(){var Pe;return Pn("["),Pe=Fs(),Pn("]"),Pe}function Ts(){var Pe,Qe,Kt;return Kt=Te,Jn("new"),Pe=Is(),Qe=gn("(")?ds():[],Se.markEnd(Se.createNewExpression(Pe,Qe),Kt)}function Es(){var Pe,Qe,Kt,hn,wn=ke.allowIn;for(hn=Te,ke.allowIn=!0,Pe=cn("new")?Ts():es();;){if(gn("."))Kt=vs(),Pe=Se.createMemberExpression(".",Pe,Kt);else if(gn("("))Qe=ds(),Pe=Se.createCallExpression(Pe,Qe);else if(gn("["))Kt=fs(),Pe=Se.createMemberExpression("[",Pe,Kt);else break;Se.markEnd(Pe,hn)}return ke.allowIn=wn,Pe}function Is(){var Pe,Qe,Kt;for(Fe(ke.allowIn,"callee of new expression always allow in keyword."),Kt=Te,Pe=cn("new")?Ts():es();gn(".")||gn("[");)gn("[")?(Qe=fs(),Pe=Se.createMemberExpression("[",Pe,Qe)):(Qe=vs(),Pe=Se.createMemberExpression(".",Pe,Qe)),Se.markEnd(Pe,Kt);return Pe}function hr(){var Pe,Qe,Kt=Te;return Pe=Es(),Te.type===ne.Punctuator&&(gn("++")||gn("--"))&&!Wn()&&(ve&&Pe.type===le.Identifier&&ze(Pe.name)&&Hn({},he.StrictLHSPostfix),cs(Pe)||Hn({},he.InvalidLHSInAssignment),Qe=An(),Pe=Se.markEnd(Se.createPostfixExpression(Qe.value,Pe),Kt)),Pe}function Ls(){var Pe,Qe,Kt;return Te.type!==ne.Punctuator&&Te.type!==ne.Keyword?Qe=hr():gn("++")||gn("--")?(Kt=Te,Pe=An(),Qe=Ls(),ve&&Qe.type===le.Identifier&&ze(Qe.name)&&Hn({},he.StrictLHSPrefix),cs(Qe)||Hn({},he.InvalidLHSInAssignment),Qe=Se.createUnaryExpression(Pe.value,Qe),Qe=Se.markEnd(Qe,Kt)):gn("+")||gn("-")||gn("~")||gn("!")?(Kt=Te,Pe=An(),Qe=Ls(),Qe=Se.createUnaryExpression(Pe.value,Qe),Qe=Se.markEnd(Qe,Kt)):cn("delete")||cn("void")||cn("typeof")?(Kt=Te,Pe=An(),Qe=Ls(),Qe=Se.createUnaryExpression(Pe.value,Qe),Qe=Se.markEnd(Qe,Kt),ve&&Qe.operator==="delete"&&Qe.argument.type===le.Identifier&&Hn({},he.StrictDelete)):Qe=hr(),Qe}function Cr(Pe,Qe){var Kt=0;if(Pe.type!==ne.Punctuator&&Pe.type!==ne.Keyword)return 0;switch(Pe.value){case"||":Kt=1;break;case"&&":Kt=2;break;case"|":Kt=3;break;case"^":Kt=4;break;case"&":Kt=5;break;case"==":case"!=":case"===":case"!==":Kt=6;break;case"<":case">":case"<=":case">=":case"instanceof":Kt=7;break;case"in":Kt=Qe?7:0;break;case"<<":case">>":case">>>":Kt=8;break;case"+":case"-":Kt=9;break;case"*":case"/":case"%":Kt=11;break}return Kt}function Fr(){var Pe,Qe,Kt,hn,wn,Mn,ts,ls,Cs,ks;if(Pe=Te,Cs=Ls(),hn=Te,wn=Cr(hn,ke.allowIn),wn===0)return Cs;for(hn.prec=wn,An(),Qe=[Pe,Te],ts=Ls(),Mn=[Cs,hn,ts];(wn=Cr(Te,ke.allowIn))>0;){for(;Mn.length>2&&wn<=Mn[Mn.length-2].prec;)ts=Mn.pop(),ls=Mn.pop().value,Cs=Mn.pop(),Kt=Se.createBinaryExpression(ls,Cs,ts),Qe.pop(),Pe=Qe[Qe.length-1],Se.markEnd(Kt,Pe),Mn.push(Kt);hn=An(),hn.prec=wn,Mn.push(hn),Qe.push(Te),Kt=Ls(),Mn.push(Kt)}for(ks=Mn.length-1,Kt=Mn[ks],Qe.pop();ks>1;)Kt=Se.createBinaryExpression(Mn[ks-1].value,Mn[ks-2],Kt),ks-=2,Pe=Qe.pop(),Se.markEnd(Kt,Pe);return Kt}function ti(){var Pe,Qe,Kt,hn,wn;return wn=Te,Pe=Fr(),gn("?")&&(An(),Qe=ke.allowIn,ke.allowIn=!0,Kt=js(),ke.allowIn=Qe,Pn(":"),hn=js(),Pe=Se.createConditionalExpression(Pe,Kt,hn),Se.markEnd(Pe,wn)),Pe}function js(){var Pe,Qe,Kt,hn,wn;return Pe=Te,wn=Te,hn=Qe=ti(),Fn()&&(cs(Qe)||Hn({},he.InvalidLHSInAssignment),ve&&Qe.type===le.Identifier&&ze(Qe.name)&&Hn(Pe,he.StrictLHSAssignment),Pe=An(),Kt=js(),hn=Se.markEnd(Se.createAssignmentExpression(Pe.value,Qe,Kt),wn)),hn}function Fs(){var Pe,Qe=Te;if(Pe=js(),gn(",")){for(Pe=Se.createSequenceExpression([Pe]);ye<Ce&&gn(",");)An(),Pe.expressions.push(js());Se.markEnd(Pe,Qe)}return Pe}function Po(){for(var Pe=[],Qe;ye<Ce&&!(gn("}")||(Qe=Or(),typeof Qe>"u"));)Pe.push(Qe);return Pe}function ni(){var Pe,Qe;return Qe=Te,Pn("{"),Pe=Po(),Pn("}"),Se.markEnd(Se.createBlockStatement(Pe),Qe)}function vr(){var Pe,Qe;return Qe=Te,Pe=An(),Pe.type!==ne.Identifier&&hs(Pe),Se.markEnd(Se.createIdentifier(Pe.value),Qe)}function Lo(Pe){var Qe=null,Kt,hn;return hn=Te,Kt=vr(),ve&&ze(Kt.name)&&Hn({},he.StrictVarName),Pe==="const"?(Pn("="),Qe=js()):gn("=")&&(An(),Qe=js()),Se.markEnd(Se.createVariableDeclarator(Kt,Qe),hn)}function yi(Pe){var Qe=[];do{if(Qe.push(Lo(Pe)),!gn(","))break;An()}while(ye<Ce);return Qe}function zo(){var Pe;return Jn("var"),Pe=yi(),In(),Se.createVariableDeclaration(Pe,"var")}function Vo(Pe){var Qe,Kt;return Kt=Te,Jn(Pe),Qe=yi(Pe),In(),Se.markEnd(Se.createVariableDeclaration(Qe,Pe),Kt)}function Gi(){return Pn(";"),Se.createEmptyStatement()}function jo(){var Pe=Fs();return In(),Se.createExpressionStatement(Pe)}function Uo(){var Pe,Qe,Kt;return Jn("if"),Pn("("),Pe=Fs(),Pn(")"),Qe=nr(),cn("else")?(An(),Kt=nr()):Kt=null,Se.createIfStatement(Pe,Qe,Kt)}function Go(){var Pe,Qe,Kt;return Jn("do"),Kt=ke.inIteration,ke.inIteration=!0,Pe=nr(),ke.inIteration=Kt,Jn("while"),Pn("("),Qe=Fs(),Pn(")"),gn(";")&&An(),Se.createDoWhileStatement(Pe,Qe)}function qo(){var Pe,Qe,Kt;return Jn("while"),Pn("("),Pe=Fs(),Pn(")"),Kt=ke.inIteration,ke.inIteration=!0,Qe=nr(),ke.inIteration=Kt,Se.createWhileStatement(Pe,Qe)}function Ho(){var Pe,Qe,Kt;return Kt=Te,Pe=An(),Qe=yi(),Se.markEnd(Se.createVariableDeclaration(Qe,Pe.value),Kt)}function Wo(){var Pe,Qe,Kt,hn,wn,Mn,ts,ls=ke.allowIn;return Pe=Qe=Kt=null,Jn("for"),Pn("("),gn(";")?An():(cn("var")||cn("let")?(ke.allowIn=!1,Pe=Ho(),ke.allowIn=ls,Pe.declarations.length===1&&cn("in")&&(An(),hn=Pe,wn=Fs(),Pe=null)):(ke.allowIn=!1,Pe=Fs(),ke.allowIn=ls,cn("in")&&(cs(Pe)||Hn({},he.InvalidLHSInForIn),An(),hn=Pe,wn=Fs(),Pe=null)),typeof hn>"u"&&Pn(";")),typeof hn>"u"&&(gn(";")||(Qe=Fs()),Pn(";"),gn(")")||(Kt=Fs())),Pn(")"),ts=ke.inIteration,ke.inIteration=!0,Mn=nr(),ke.inIteration=ts,typeof hn>"u"?Se.createForStatement(Pe,Qe,Kt,Mn):Se.createForInStatement(hn,wn,Mn)}function si(){var Pe=null,Qe;return Jn("continue"),ge.charCodeAt(ye)===59?(An(),ke.inIteration||Vn({},he.IllegalContinue),Se.createContinueStatement(null)):Wn()?(ke.inIteration||Vn({},he.IllegalContinue),Se.createContinueStatement(null)):(Te.type===ne.Identifier&&(Pe=vr(),Qe="$"+Pe.name,Object.prototype.hasOwnProperty.call(ke.labelSet,Qe)||Vn({},he.UnknownLabel,Pe.name)),In(),Pe===null&&!ke.inIteration&&Vn({},he.IllegalContinue),Se.createContinueStatement(Pe))}function Qo(){var Pe=null,Qe;return Jn("break"),ge.charCodeAt(ye)===59?(An(),ke.inIteration||ke.inSwitch||Vn({},he.IllegalBreak),Se.createBreakStatement(null)):Wn()?(ke.inIteration||ke.inSwitch||Vn({},he.IllegalBreak),Se.createBreakStatement(null)):(Te.type===ne.Identifier&&(Pe=vr(),Qe="$"+Pe.name,Object.prototype.hasOwnProperty.call(ke.labelSet,Qe)||Vn({},he.UnknownLabel,Pe.name)),In(),Pe===null&&!(ke.inIteration||ke.inSwitch)&&Vn({},he.IllegalBreak),Se.createBreakStatement(Pe))}function ri(){var Pe=null;return Jn("return"),ke.inFunctionBody||Hn({},he.IllegalReturn),ge.charCodeAt(ye)===32&&je(ge.charCodeAt(ye+1))?(Pe=Fs(),In(),Se.createReturnStatement(Pe)):Wn()?Se.createReturnStatement(null):(gn(";")||!gn("}")&&Te.type!==ne.EOF&&(Pe=Fs()),In(),Se.createReturnStatement(Pe))}function Ko(){var Pe,Qe;return ve&&(Ze(),Hn({},he.StrictModeWith)),Jn("with"),Pn("("),Pe=Fs(),Pn(")"),Qe=nr(),Se.createWithStatement(Pe,Qe)}function Yo(){var Pe,Qe=[],Kt,hn;for(hn=Te,cn("default")?(An(),Pe=null):(Jn("case"),Pe=Fs()),Pn(":");ye<Ce&&!(gn("}")||cn("default")||cn("case"));)Kt=nr(),Qe.push(Kt);return Se.markEnd(Se.createSwitchCase(Pe,Qe),hn)}function Xo(){var Pe,Qe,Kt,hn,wn;if(Jn("switch"),Pn("("),Pe=Fs(),Pn(")"),Pn("{"),Qe=[],gn("}"))return An(),Se.createSwitchStatement(Pe,Qe);for(hn=ke.inSwitch,ke.inSwitch=!0,wn=!1;ye<Ce&&!gn("}");)Kt=Yo(),Kt.test===null&&(wn&&Vn({},he.MultipleDefaultsInSwitch),wn=!0),Qe.push(Kt);return ke.inSwitch=hn,Pn("}"),Se.createSwitchStatement(Pe,Qe)}function qi(){var Pe;return Jn("throw"),Wn()&&Vn({},he.NewlineAfterThrow),Pe=Fs(),In(),Se.createThrowStatement(Pe)}function Hi(){var Pe,Qe,Kt;return Kt=Te,Jn("catch"),Pn("("),gn(")")&&hs(Te),Pe=vr(),ve&&ze(Pe.name)&&Hn({},he.StrictCatchVariable),Pn(")"),Qe=ni(),Se.markEnd(Se.createCatchClause(Pe,Qe),Kt)}function Wi(){var Pe,Qe=[],Kt=null;return Jn("try"),Pe=ni(),cn("catch")&&Qe.push(Hi()),cn("finally")&&(An(),Kt=ni()),Qe.length===0&&!Kt&&Vn({},he.NoCatchOrFinally),Se.createTryStatement(Pe,[],Qe,Kt)}function Jo(){return Jn("debugger"),In(),Se.createDebuggerStatement()}function nr(){var Pe=Te.type,Qe,Kt,hn,wn;if(Pe===ne.EOF&&hs(Te),Pe===ne.Punctuator&&Te.value==="{")return ni();if(wn=Te,Pe===ne.Punctuator)switch(Te.value){case";":return Se.markEnd(Gi(),wn);case"(":return Se.markEnd(jo(),wn)}if(Pe===ne.Keyword)switch(Te.value){case"break":return Se.markEnd(Qo(),wn);case"continue":return Se.markEnd(si(),wn);case"debugger":return Se.markEnd(Jo(),wn);case"do":return Se.markEnd(Go(),wn);case"for":return Se.markEnd(Wo(),wn);case"function":return Se.markEnd(bi(),wn);case"if":return Se.markEnd(Uo(),wn);case"return":return Se.markEnd(ri(),wn);case"switch":return Se.markEnd(Xo(),wn);case"throw":return Se.markEnd(qi(),wn);case"try":return Se.markEnd(Wi(),wn);case"var":return Se.markEnd(zo(),wn);case"while":return Se.markEnd(qo(),wn);case"with":return Se.markEnd(Ko(),wn)}return Qe=Fs(),Qe.type===le.Identifier&&gn(":")?(An(),hn="$"+Qe.name,Object.prototype.hasOwnProperty.call(ke.labelSet,hn)&&Vn({},he.Redeclaration,"Label",Qe.name),ke.labelSet[hn]=!0,Kt=nr(),delete ke.labelSet[hn],Se.markEnd(Se.createLabeledStatement(Qe,Kt),wn)):(In(),Se.markEnd(Se.createExpressionStatement(Qe),wn))}function xi(){var Pe,Qe=[],Kt,hn,wn,Mn,ts,ls,Cs,ks;for(ks=Te,Pn("{");ye<Ce&&!(Te.type!==ne.StringLiteral||(Kt=Te,Pe=Or(),Qe.push(Pe),Pe.expression.type!==le.Literal));)hn=ge.slice(Kt.start+1,Kt.end-1),hn==="use strict"?(ve=!0,wn&&Hn(wn,he.StrictOctalLiteral)):!wn&&Kt.octal&&(wn=Kt);for(Mn=ke.labelSet,ts=ke.inIteration,ls=ke.inSwitch,Cs=ke.inFunctionBody,ke.labelSet={},ke.inIteration=!1,ke.inSwitch=!1,ke.inFunctionBody=!0;ye<Ce&&!(gn("}")||(Pe=Or(),typeof Pe>"u"));)Qe.push(Pe);return Pn("}"),ke.labelSet=Mn,ke.inIteration=ts,ke.inSwitch=ls,ke.inFunctionBody=Cs,Se.markEnd(Se.createBlockStatement(Qe),ks)}function Qi(Pe){var Qe,Kt=[],hn,wn,Mn,ts,ls;if(Pn("("),!gn(")"))for(Mn={};ye<Ce&&(hn=Te,Qe=vr(),ts="$"+hn.value,ve?(ze(hn.value)&&(wn=hn,ls=he.StrictParamName),Object.prototype.hasOwnProperty.call(Mn,ts)&&(wn=hn,ls=he.StrictParamDupe)):Pe||(ze(hn.value)?(Pe=hn,ls=he.StrictParamName):Ue(hn.value)?(Pe=hn,ls=he.StrictReservedWord):Object.prototype.hasOwnProperty.call(Mn,ts)&&(Pe=hn,ls=he.StrictParamDupe)),Kt.push(Qe),Mn[ts]=!0,!gn(")"));)Pn(",");return Pn(")"),{params:Kt,stricted:wn,firstRestricted:Pe,message:ls}}function bi(){var Pe,Qe=[],Kt,hn,wn,Mn,ts,ls,Cs,ks;return ks=Te,Jn("function"),hn=Te,Pe=vr(),ve?ze(hn.value)&&Hn(hn,he.StrictFunctionName):ze(hn.value)?(ts=hn,ls=he.StrictFunctionName):Ue(hn.value)&&(ts=hn,ls=he.StrictReservedWord),Mn=Qi(ts),Qe=Mn.params,wn=Mn.stricted,ts=Mn.firstRestricted,Mn.message&&(ls=Mn.message),Cs=ve,Kt=xi(),ve&&ts&&Vn(ts,ls),ve&&wn&&Hn(wn,ls),ve=Cs,Se.markEnd(Se.createFunctionDeclaration(Pe,Qe,[],Kt),ks)}function Ki(){var Pe,Qe=null,Kt,hn,wn,Mn,ts=[],ls,Cs,ks;return ks=Te,Jn("function"),gn("(")||(Pe=Te,Qe=vr(),ve?ze(Pe.value)&&Hn(Pe,he.StrictFunctionName):ze(Pe.value)?(hn=Pe,wn=he.StrictFunctionName):Ue(Pe.value)&&(hn=Pe,wn=he.StrictReservedWord)),Mn=Qi(hn),ts=Mn.params,Kt=Mn.stricted,hn=Mn.firstRestricted,Mn.message&&(wn=Mn.message),Cs=ve,ls=xi(),ve&&hn&&Vn(hn,wn),ve&&Kt&&Hn(Kt,wn),ve=Cs,Se.markEnd(Se.createFunctionExpression(Qe,ts,[],ls),ks)}function Or(){if(Te.type===ne.Keyword)switch(Te.value){case"const":case"let":return Vo(Te.value);case"function":return bi();default:return nr()}if(Te.type!==ne.EOF)return nr()}function Ci(){for(var Pe,Qe=[],Kt,hn,wn;ye<Ce&&(Kt=Te,!(Kt.type!==ne.StringLiteral||(Pe=Or(),Qe.push(Pe),Pe.expression.type!==le.Literal)));)hn=ge.slice(Kt.start+1,Kt.end-1),hn==="use strict"?(ve=!0,wn&&Hn(wn,he.StrictOctalLiteral)):!wn&&Kt.octal&&(wn=Kt);for(;ye<Ce&&(Pe=Or(),!(typeof Pe>"u"));)Qe.push(Pe);return Qe}function Zo(){var Pe,Qe;return Ze(),vn(),Qe=Te,ve=!1,Pe=Ci(),Se.markEnd(Se.createProgram(Pe),Qe)}function _i(){var Pe,Qe,Kt,hn=[];for(Pe=0;Pe<Ne.tokens.length;++Pe)Qe=Ne.tokens[Pe],Kt={type:Qe.type,value:Qe.value},Ne.range&&(Kt.range=Qe.range),Ne.loc&&(Kt.loc=Qe.loc),hn.push(Kt);Ne.tokens=hn}function ii(Pe,Qe){var Kt,hn,wn;Kt=String,typeof Pe!="string"&&!(Pe instanceof String)&&(Pe=Kt(Pe)),Se=me,ge=Pe,ye=0,be=ge.length>0?1:0,Ee=0,Ce=ge.length,Te=null,ke={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Ne={},Qe=Qe||{},Qe.tokens=!0,Ne.tokens=[],Ne.tokenize=!0,Ne.openParenToken=-1,Ne.openCurlyToken=-1,Ne.range=typeof Qe.range=="boolean"&&Qe.range,Ne.loc=typeof Qe.loc=="boolean"&&Qe.loc,typeof Qe.comment=="boolean"&&Qe.comment&&(Ne.comments=[]),typeof Qe.tolerant=="boolean"&&Qe.tolerant&&(Ne.errors=[]);try{if(vn(),Te.type===ne.EOF)return Ne.tokens;for(hn=An();Te.type!==ne.EOF;)try{hn=An()}catch(Mn){if(hn=Te,Ne.errors){Ne.errors.push(Mn);break}else throw Mn}_i(),wn=Ne.tokens,typeof Ne.comments<"u"&&(wn.comments=Ne.comments),typeof Ne.errors<"u"&&(wn.errors=Ne.errors)}catch(Mn){throw Mn}finally{Ne={}}return wn}function Yi(Pe,Qe){var Kt,hn;hn=String,typeof Pe!="string"&&!(Pe instanceof String)&&(Pe=hn(Pe)),Se=me,ge=Pe,ye=0,be=ge.length>0?1:0,Ee=0,Ce=ge.length,Te=null,ke={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Ne={},typeof Qe<"u"&&(Ne.range=typeof Qe.range=="boolean"&&Qe.range,Ne.loc=typeof Qe.loc=="boolean"&&Qe.loc,Ne.attachComment=typeof Qe.attachComment=="boolean"&&Qe.attachComment,Ne.loc&&Qe.source!==null&&Qe.source!==void 0&&(Ne.source=hn(Qe.source)),typeof Qe.tokens=="boolean"&&Qe.tokens&&(Ne.tokens=[]),typeof Qe.comment=="boolean"&&Qe.comment&&(Ne.comments=[]),typeof Qe.tolerant=="boolean"&&Qe.tolerant&&(Ne.errors=[]),Ne.attachComment&&(Ne.range=!0,Ne.comments=[],Ne.bottomRightStack=[],Ne.trailingComments=[],Ne.leadingComments=[]));try{Kt=Zo(),typeof Ne.comments<"u"&&(Kt.comments=Ne.comments),typeof Ne.tokens<"u"&&(_i(),Kt.tokens=Ne.tokens),typeof Ne.errors<"u"&&(Kt.errors=Ne.errors)}catch(wn){throw wn}finally{Ne={}}return Kt}ee.version="1.2.5",ee.tokenize=ii,ee.parse=Yi,ee.Syntax=function(){var Pe,Qe={};typeof Object.create=="function"&&(Qe=Object.create(null));for(Pe in le)le.hasOwnProperty(Pe)&&(Qe[Pe]=le[Pe]);return typeof Object.freeze=="function"&&Object.freeze(Qe),Qe}()})})(esprima$1);var esprima=esprima$1,uniq$2=uniq$4,PREFIX_COUNTER=0;function CompiledArgument(re,ee,ne){this.name=re,this.lvalue=ee,this.rvalue=ne,this.count=0}function CompiledRoutine(re,ee,ne,ae){this.body=re,this.args=ee,this.thisVars=ne,this.localVars=ae}function isGlobal(re){if(re==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?re in window:typeof globalThis<"u"?re in globalThis:typeof self<"u"?re in self:!1}function getArgNames(re){for(var ee=re.body[0].expression.callee.params,ne=new Array(ee.length),ae=0;ae<ee.length;++ae)ne[ae]=ee[ae].name;return ne}function preprocess(re){for(var ee=["(",re,")()"].join(""),ne=esprima.parse(ee,{range:!0}),ae="_inline_"+PREFIX_COUNTER+++"_",ce=getArgNames(ne),le=new Array(ce.length),ue=0;ue<ce.length;++ue)le[ue]=new CompiledArgument([ae,"arg",ue,"_"].join(""),!1,!1);for(var he=new Array(ee.length),ue=0,fe=ee.length;ue<fe;++ue)he[ue]=ee.charAt(ue);var me=[],ge=[];function ve(Fe){var De=ae+Fe.replace(/\_/g,"__");return me.push(De),De}function ye(Fe){var De="this_"+Fe.replace(/\_/g,"__");return ge.push(De),De}function be(Fe,De){for(var Oe=Fe.range[0],Re=Fe.range[1],Be=Oe+1;Be<Re;++Be)he[Be]="";he[Oe]=De}function Ee(Fe){return"'"+Fe.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function Ce(Fe){return he.slice(Fe.range[0],Fe.range[1]).join("")}var Se=1,Te=2;function ke(Fe){return Fe.parent.type==="AssignmentExpression"&&Fe.parent.left===Fe?Fe.parent.operator==="="?Se:Se|Te:Fe.parent.type==="UpdateExpression"?Se|Te:Te}(function Fe(De,Oe){if(De.parent=Oe,De.type==="MemberExpression")De.computed?(Fe(De.object,De),Fe(De.property,De)):De.object.type==="ThisExpression"?be(De,ye(De.property.name)):Fe(De.object,De);else{if(De.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(De.type==="Identifier"){var Re=De.name,Be=ce.indexOf(Re);if(Be>=0){var Le=le[Be],je=ke(De);je&Se&&(Le.lvalue=!0),je&Te&&(Le.rvalue=!0),++Le.count,be(De,Le.name)}else isGlobal(Re)||be(De,ve(Re))}else if(De.type==="Literal")typeof De.value=="string"&&be(De,Ee(De.value));else{if(De.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var Ge=Object.keys(De),qe=0,Ue=Ge.length;qe<Ue;++qe)if(Ge[qe]!=="parent"){var ze=De[Ge[qe]];if(ze)if(ze instanceof Array)for(var He=0;He<ze.length;++He)ze[He]&&typeof ze[He].type=="string"&&Fe(ze[He],De);else typeof ze.type=="string"&&Fe(ze,De)}}}})(ne.body[0].expression.callee.body,void 0),uniq$2(me),uniq$2(ge);var Ne=new CompiledRoutine(Ce(ne.body[0].expression.callee.body),le,ge,me);return Ne}var cwiseParser=preprocess,parse$2=cwiseParser,compile$1=compiler,REQUIRED_FIELDS=["args","body"],OPTIONAL_FIELDS=["pre","post","printCode","funcName","blockSize"];function createCWise(re){for(var ee in re)REQUIRED_FIELDS.indexOf(ee)<0&&OPTIONAL_FIELDS.indexOf(ee)<0&&console.warn("cwise: Unknown argument '"+ee+"' passed to expression compiler");for(var ne=0;ne<REQUIRED_FIELDS.length;++ne)if(!re[REQUIRED_FIELDS[ne]])throw new Error("cwise: Missing argument: "+REQUIRED_FIELDS[ne]);return compile$1({args:re.args,pre:parse$2(re.pre||function(){}),body:parse$2(re.body),post:parse$2(re.post||function(){}),debug:!!re.printCode,funcName:re.funcName||re.body.name||"cwise",blockSize:re.blockSize||64})}var cwiseEsprima=createCWise,cwise=cwiseEsprima;cwise({args:["array","array","scalar","scalar","scalar"],body:function re(ee,ne,ae,ce,le){}});const SAMPLE_RATE=16e3;getOfflineAudioContext(SAMPLE_RATE);const MidiComponent=({artifactUri:re,displayUri:ee,previewUri:ne,displayView:ae,nft:ce})=>{const[le,ue]=reactExports.useState(ne||re),[he,fe]=reactExports.useState(100),[me,ge]=reactExports.useState(!1),[ve,ye]=reactExports.useState(!1),be=reactExports.useRef(),Ee=()=>{ge(!me)};reactExports.useEffect(()=>{be.current&&(me?be.current.start():be.current.stop())},[me]),reactExports.useEffect(()=>{(ne||re)&&processMidiData(ne||re,he).then(Se=>{ue(Se)}).catch(Se=>{console.error("Error processing MIDI:",Se)})},[ne,re,he]);const Ce=reactExports.useCallback(Se=>{fe(Se.target.value)},[]);return reactExports.useEffect(()=>{be.current&&(be.current.addEventListener("start",()=>{ye(!0)}),be.current.addEventListener("stop",()=>{ye(!1)}))},[be.current]),ae?jsxs("div",{className:styles$H.container,children:[jsx$1("img",{src:ee,alt:"cover for midi nft"}),jsx$1("i",{children:"Please manually stop midi player before navigating out of this page."}),jsxs("div",{className:styles$H.player_container,children:[jsx$1("midi-player",{id:"midi-player",ref:be,src:le}),jsxs("div",{className:styles$H.volume_container,children:[jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"black",class:"w-6 h-6",children:jsx$1("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})}),jsx$1("input",{onInput:Ce,disabled:ve,type:"range",min:"1",max:"100",value:he,className:styles$H.volume_slider,id:"volume-slider"})]})]})]}):jsxs("div",{className:styles$H.feed_container,children:[jsx$1(Button,{to:`${PATH.OBJKT}/${ce.token_id}`,children:jsx$1("img",{alt:`cover for midi object ${ce.token_id}`,src:ee})}),jsx$1(Button,{className:styles$H.button,onClick:Ee,children:me?jsxs("div",{className:styles$H.playerButton,children:[jsx$1(SvgPause,{fill:"var(--gray-10)",width:64,height:64}),jsx$1("i",{children:"Please manually stop midi player before navigating away from this page."})]}):jsx$1(SvgPlay,{fill:"var(--gray-10)",width:64,height:64})}),jsx$1("div",{id:"feed-player",style:{display:"none"},children:jsx$1("midi-player",{id:"midi-player",ref:be,src:le})})]})},container$j="_container_c9n77_1",preview="_preview_c9n77_18",button="_button_c9n77_33",gradient="_gradient_c9n77_43",styles$G={container:container$j,preview,button,gradient},TXT=({artifactUri:re,displayUri:ee,displayView:ne,previewUri:ae,nft:ce})=>{const[le,ue]=React.useState(""),[he,fe]=React.useState(!1),me=reactExports.useRef();return React.useEffect(()=>{var ve;if(re?axios.get(re).then(ye=>{ue(ye.data)}):ee&&((async()=>{await fetch(ee).then(ye=>{if(!ye.ok)throw new Error("Error reading blob");return ye.text()}).then(ye=>{ue(ye)}).catch(ye=>{console.error("Error fetching the file:",ye)})})(),fe(ce.is_mono_type)),ce!=null&&ce.tags&&((ve=ce==null?void 0:ce.tags)==null?void 0:ve.length)>0){let ye=ce.tags.map(be=>be.tag.toLowerCase());(ye.includes("monospace")||ye.includes("mono"))&&fe(!0)}},[re,ae,ne,ee,ce]),jsx$1("div",{ref:me,className:styles$G.container,children:jsx$1("div",{className:styles$G.preview,children:!ne&&ae?jsx$1("img",{alt:`Text NFT thumbnail for ${ce.token_id}`,src:ae}):jsx$1("pre",{style:{fontFamily:he?"Iosevka, monospace":"Source Sans Pro, sans-serif",overflowY:"auto"},children:le})})})},RenderMediaType=({nft:re,previewUri:ee,previewDisplayUri:ne,displayView:ae,details:ce})=>{const le=reactExports.useMemo(()=>re.artifact_uri?HashToURL(re.artifact_uri,"CDN",{size:"raw"}):"",[re]);if(!re)throw Error("No OBJKT to render");if(re.metadata_status==="unprocessed")throw Error(`The OBJKT #${re.token_id} is being processed`,{cause:"Processing Metadata"});const ue=reactExports.useMemo(()=>{var me;return!!(!re.display_uri&&((me=re.mime_type)!=null&&me.startsWith("video")))},[re]),he=reactExports.useMemo(()=>{var me;if(ne)return ne;if(re.display_uri)return HashToURL(re.display_uri,"CDN",{size:"raw"});if((me=re.mime_type)!=null&&me.startsWith("video"))return HashToURL(re.artifact_uri,"CDN",{size:"raw"})},[re,ne]),fe=reactExports.useMemo(()=>{switch(re.mime_type){case MIMETYPE.BMP:case MIMETYPE.GIF:case MIMETYPE.JPEG:case MIMETYPE.PNG:case MIMETYPE.TIFF:case MIMETYPE.WEBP:return jsx$1(ImageComponent,{artifactUri:le,displayUri:he,displayView:ae,previewUri:ee,nft:re});case MIMETYPE.SVG:return jsx$1(VectorComponent,{artifactUri:le,displayUri:he,displayView:ae,previewUri:ee,nft:re});case MIMETYPE.DIRECTORY:case MIMETYPE.ZIP:case MIMETYPE.ZIP1:case MIMETYPE.ZIP2:return jsx$1(HTMLComponent,{artifactUri:le,displayUri:he,displayView:ae,previewUri:ee,nft:re});case MIMETYPE.MP4:case MIMETYPE.OGV:case MIMETYPE.QUICKTIME:case MIMETYPE.WEBM:return jsx$1(VideoComponent,{artifactUri:le,displayUri:he,displayView:ae,previewUri:ee,nft:re,forceVideo:ue});case MIMETYPE.GLB:case MIMETYPE.GLTF:return jsx$1(GLBComponent,{artifactUri:le,displayUri:he,displayView:ae,previewUri:ee,nft:re});case MIMETYPE.MP3:case MIMETYPE.OGG:case MIMETYPE.OGA:case MIMETYPE.FLAC:case MIMETYPE.WAV:case MIMETYPE.XWAV:return jsx$1(AudioComponent,{artifactUri:le,displayUri:he,displayView:ae,previewUri:ee,nft:re});case MIMETYPE.PDF:return jsx$1(PdfComponent,{artifactUri:le,displayUri:he,displayView:ae,previewUri:ee,nft:re});case MIMETYPE.MD:return jsx$1(MD,{artifactUri:le,displayUri:he,displayView:ae,previewUri:ee,nft:re});case MIMETYPE.MIDI:case MIMETYPE.MID:return jsx$1(MidiComponent,{artifactUri:le,displayUri:he,displayView:ae,previewUri:ee,nft:re});case MIMETYPE.TXT:return jsx$1(TXT,{artifactUri:le,displayUri:ee,displayView:ae,previewUri:he,nft:re});default:return jsx$1(UnknownComponent,{mimeType:re.mime_type})}},[re.mime_type]);if(re.metadata_status==="error"){const me=Error(`The OBJKT #${re.token_id} failed to index, 
      if this persists for more than a day please log an issue.`,{cause:"Metadata Error"});return console.error(me),null}return jsxs(Container$1,{displayView:ae,nft:re,children:[ce,fe]})},hover_details="_hover_details_1v35r_216",moderated="_moderated_1v35r_232",moderation_corner="_moderation_corner_1v35r_236",container$i="_container_1v35r_290",token_infos_container="_token_infos_container_1v35r_298",blur$1="_blur_1v35r_306",photo_protect="_photo_protect_1v35r_310",masonry="_masonry_1v35r_318",styles$F={hover_details,moderated,moderation_corner,container:container$i,token_infos_container,blur:blur$1,photo_protect,masonry},info_variants={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},TokenHover=({nft:re,visible:ee})=>jsx$1(AnimatePresence,{children:ee&&jsxs(motion.div,{...info_variants,className:styles$F.hover_details,children:[jsxs("h3",{children:["#",re.token_id]}),jsx$1("h4",{children:re.name}),jsx$1("p",{children:re.description})]})}),FeedItem=({nft:re})=>{var fe;const[ee,ne]=useLocalSettings(me=>[me.nsfwFriendly,me.photosensitiveFriendly],shallow),ae=useLocalSettings(me=>me.zen),ce=useLocalSettings(me=>me.viewMode),[le,ue]=reactExports.useState(!1),he=classNames$1({[styles$F.container]:!0,[styles$F.blur]:re.isNSFW&&!ee,[styles$F.photo_protect]:re.isPhotosensitive&&!ne,[styles$F.masonry]:ce==="masonry"});return jsxs("div",{onMouseOver:()=>ue(!0),onFocus:()=>ue(!0),onMouseOut:()=>ue(!1),onBlur:()=>ue(!1),className:he,children:[(fe=re.mime_type)!=null&&fe.startsWith("audio")?jsx$1(RenderMediaType,{details:jsx$1(TokenHover,{nft:re,visible:le&&!ae}),nft:re}):jsx$1(Link,{"aria-label":`OBJKT ${re.token_id}`,to:`${PATH.OBJKT}/${re.token_id}`,children:jsx$1(RenderMediaType,{details:jsx$1(TokenHover,{nft:re,visible:le&&!ae}),nft:re})}),!ae&&jsx$1("div",{className:styles$F.token_infos_container,children:jsx$1(ItemInfoCompact,{nft:re})})]})};class InfiniteScroll extends reactExports.Component{constructor(ee){super(ee),this.scrollListener=this.scrollListener.bind(this),this.eventListenerOptions=this.eventListenerOptions.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this)}componentDidMount(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}componentDidUpdate(){if(this.props.isReverse&&this.loadMore){const ee=this.getParentElement(this.scrollComponent);ee.scrollTop=ee.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}componentWillUnmount(){this.detachScrollListener(),this.detachMousewheelListener()}isPassiveSupported(){let ee=!1;const ne={get passive(){ee=!0}};try{document.addEventListener("test",null,ne),document.removeEventListener("test",null,ne)}catch{}return ee}eventListenerOptions(){let ee=this.props.useCapture;return this.isPassiveSupported()?ee={useCapture:this.props.useCapture,passive:!0}:ee={passive:!1},ee}setDefaultLoader(ee){this.defaultLoader=ee}detachMousewheelListener(){let ee=window;this.props.useWindow===!1&&(ee=this.scrollComponent.parentNode),ee.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}detachScrollListener(){let ee=window;this.props.useWindow===!1&&(ee=this.getParentElement(this.scrollComponent)),ee.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),ee.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}getParentElement(ee){const ne=this.props.getScrollParent&&this.props.getScrollParent();return ne??(ee&&ee.parentNode)}filterProps(ee){return ee}attachScrollListener(){const ee=this.getParentElement(this.scrollComponent);if(!this.props.hasMore||!ee)return;let ne=window;this.props.useWindow===!1&&(ne=ee),ne.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),ne.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),ne.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}mousewheelListener(ee){ee.deltaY===1&&!this.isPassiveSupported()&&ee.preventDefault()}scrollListener(){const ee=this.scrollComponent,ne=window,ae=this.getParentElement(ee);let ce;if(this.props.useWindow){const le=document.documentElement||document.body.parentNode||document.body,ue=ne.pageYOffset!==void 0?ne.pageYOffset:le.scrollTop;this.props.isReverse?ce=ue:ce=this.calculateOffset(ee,ue)}else this.props.isReverse?ce=ae.scrollTop:ce=ee.scrollHeight-ae.scrollTop-ae.clientHeight;ce<Number(this.props.threshold)&&ee&&ee.offsetParent!==null&&(this.detachScrollListener(),this.beforeScrollHeight=ae.scrollHeight,this.beforeScrollTop=ae.scrollTop,typeof this.props.loadMore=="function"&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}calculateOffset(ee,ne){return ee?this.calculateTopPosition(ee)+(ee.offsetHeight-ne-window.innerHeight):0}calculateTopPosition(ee){return ee?ee.offsetTop+this.calculateTopPosition(ee.offsetParent):0}render(){const ee=this.filterProps(this.props),{children:ne,element:ae,hasMore:ce,initialLoad:le,isReverse:ue,loader:he,loadMore:fe,pageStart:me,ref:ge,threshold:ve,useCapture:ye,useWindow:be,getScrollParent:Ee,...Ce}=ee;Ce.ref=Te=>{this.scrollComponent=Te,ge&&ge(Te)};const Se=[ne];return ce&&(he?ue?Se.unshift(he):Se.push(he):this.defaultLoader&&(ue?Se.unshift(this.defaultLoader):Se.push(this.defaultLoader))),React.createElement(ae,Ce,Se)}}cc(InfiniteScroll,"propTypes",{children:PropTypes.node.isRequired,element:PropTypes.node,hasMore:PropTypes.bool,initialLoad:PropTypes.bool,isReverse:PropTypes.bool,loader:PropTypes.node,loadMore:PropTypes.func.isRequired,pageStart:PropTypes.number,ref:PropTypes.func,getScrollParent:PropTypes.func,threshold:PropTypes.number,useCapture:PropTypes.bool,useWindow:PropTypes.bool}),cc(InfiniteScroll,"defaultProps",{element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null});function laggy(re){return(ee,ne,ae)=>{const ce=reactExports.useRef(),le=re(ee,ne,ae);reactExports.useEffect(()=>{le.data!==void 0&&(ce.current=le.data)},[le.data]);const ue=reactExports.useCallback(()=>{ce.current=void 0},[]),he=le.data===void 0?ce.current:le.data,fe=le.data===void 0&&ce.current!==void 0;return Object.assign({},le,{data:he,isLagging:fe,resetLaggy:ue})}}const toolbar="_toolbar_7x5s1_216",filter_box="_filter_box_7x5s1_236",feeds_area="_feeds_area_7x5s1_251",filter_area="_filter_area_7x5s1_258",feeds_button="_feeds_button_7x5s1_263",separator$1="_separator_7x5s1_283",feeds_dropdown="_feeds_dropdown_7x5s1_288",view_mode_area="_view_mode_area_7x5s1_292",tagline="_tagline_7x5s1_301",media_type="_media_type_7x5s1_306",confirm_box="_confirm_box_7x5s1_312",tags="_tags_7x5s1_320",subtitle="_subtitle_7x5s1_327",filters_container="_filters_container_7x5s1_331",styles$E={toolbar,filter_box,feeds_area,filter_area,feeds_button,separator:separator$1,feeds_dropdown,view_mode_area,tagline,media_type,confirm_box,tags,subtitle,filters_container},addBodyClass=re=>document.body.classList.add(re),removeBodyClass=re=>document.body.classList.remove(re);function useBodyClass(re){reactExports.useEffect(()=>(re instanceof Array?re.map(addBodyClass):addBodyClass(re),()=>{re instanceof Array?re.map(removeBodyClass):removeBodyClass(re)}),[re])}const dropdown_container="_dropdown_container_1x8nz_216",vertical="_vertical_1x8nz_237",header_button="_header_button_1x8nz_241",menu_left="_menu_left_1x8nz_254",header_button_open="_header_button_open_1x8nz_260",header_button_toggled="_header_button_toggled_1x8nz_273",left$2="_left_1x8nz_281",styles$D={dropdown_container,vertical,header_button,menu_left,header_button_open,header_button_toggled,left:left$2},useClickOutside=(re,ee,ne=!1)=>{const ae=ce=>{re.current&&!re.current.contains(ce.target)&&(ne&&re.current.parentElement.contains(ce.target)||ee())};reactExports.useEffect(()=>(document.addEventListener("mousedown",ae),()=>{document.removeEventListener("mousedown",ae)}),[])};/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */var twemoji=function(){var re={base:"https://twemoji.maxcdn.com/v/14.0.2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:ke,toCodePoint:Oe},onerror:function(){this.parentNode&&this.parentNode.replaceChild(fe(this.alt,!1),this)},parse:Ne,replace:Fe,test:De},ee={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},ne=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef0-\udef6]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedd-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude74\ude78-\ude7c\ude80-\ude86\ude90-\udeac\udeb0-\udeba\udec0-\udec2\uded0-\uded9\udee0-\udee7]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,ae=/\uFE0F/g,ce=String.fromCharCode(8205),le=/[&<>'"]/g,ue=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,he=String.fromCharCode;return re;function fe(Re,Be){return document.createTextNode(Be?Re.replace(ae,""):Re)}function me(Re){return Re.replace(le,Ce)}function ge(Re,Be){return"".concat(Be.base,Be.size,"/",Re,Be.ext)}function ve(Re,Be){for(var Le=Re.childNodes,je=Le.length,Ge,qe;je--;)Ge=Le[je],qe=Ge.nodeType,qe===3?Be.push(Ge):qe===1&&!("ownerSVGElement"in Ge)&&!ue.test(Ge.nodeName.toLowerCase())&&ve(Ge,Be);return Be}function ye(Re){return Oe(Re.indexOf(ce)<0?Re.replace(ae,""):Re)}function be(Re,Be){for(var Le=ve(Re,[]),je=Le.length,Ge,qe,Ue,ze,He,Ye,Xe,We,Ze,Vt,Qt,Yt,Jt;je--;){for(Ue=!1,ze=document.createDocumentFragment(),He=Le[je],Ye=He.nodeValue,We=0;Xe=ne.exec(Ye);){if(Ze=Xe.index,Ze!==We&&ze.appendChild(fe(Ye.slice(We,Ze),!0)),Qt=Xe[0],Yt=ye(Qt),We=Ze+Qt.length,Jt=Be.callback(Yt,Be),Yt&&Jt){Vt=new Image,Vt.onerror=Be.onerror,Vt.setAttribute("draggable","false"),Ge=Be.attributes(Qt,Yt);for(qe in Ge)Ge.hasOwnProperty(qe)&&qe.indexOf("on")!==0&&!Vt.hasAttribute(qe)&&Vt.setAttribute(qe,Ge[qe]);Vt.className=Be.className,Vt.alt=Qt,Vt.src=Jt,Ue=!0,ze.appendChild(Vt)}Vt||ze.appendChild(fe(Qt,!1)),Vt=null}Ue&&(We<Ye.length&&ze.appendChild(fe(Ye.slice(We),!0)),He.parentNode.replaceChild(ze,He))}return Re}function Ee(Re,Be){return Fe(Re,function(Le){var je=Le,Ge=ye(Le),qe=Be.callback(Ge,Be),Ue,ze;if(Ge&&qe){je="<img ".concat('class="',Be.className,'" ','draggable="false" ','alt="',Le,'"',' src="',qe,'"'),Ue=Be.attributes(Le,Ge);for(ze in Ue)Ue.hasOwnProperty(ze)&&ze.indexOf("on")!==0&&je.indexOf(" "+ze+"=")===-1&&(je=je.concat(" ",ze,'="',me(Ue[ze]),'"'));je=je.concat("/>")}return je})}function Ce(Re){return ee[Re]}function Se(){return null}function Te(Re){return typeof Re=="number"?Re+"x"+Re:Re}function ke(Re){var Be=typeof Re=="string"?parseInt(Re,16):Re;return Be<65536?he(Be):(Be-=65536,he(55296+(Be>>10),56320+(Be&1023)))}function Ne(Re,Be){return(!Be||typeof Be=="function")&&(Be={callback:Be}),(typeof Re=="string"?Ee:be)(Re,{callback:Be.callback||ge,attributes:typeof Be.attributes=="function"?Be.attributes:Se,base:typeof Be.base=="string"?Be.base:re.base,ext:Be.ext||re.ext,size:Be.folder||Te(Be.size||re.size),className:Be.className||re.className,onerror:Be.onerror||re.onerror})}function Fe(Re,Be){return String(Re).replace(ne,Be)}function De(Re){ne.lastIndex=0;var Be=ne.test(Re);return ne.lastIndex=0,Be}function Oe(Re,Be){for(var Le=[],je=0,Ge=0,qe=0;qe<Re.length;)je=Re.charCodeAt(qe++),Ge?(Le.push((65536+(Ge-55296<<10)+(je-56320)).toString(16)),Ge=0):55296<=je&&je<=56319?Ge=je:Le.push(je.toString(16));return Le.join(Be||"-")}}();function useTwemoji(){reactExports.useEffect(()=>{twemoji.parse(document.body,{folder:"svg",ext:".svg",base:"https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/"})},[])}function DropDown({children:re,setOpen:ee,vertical:ne,menuID:ae,left:ce}){useBodyClass("overlay");const le=reactExports.useRef(null);useTwemoji(),useClickOutside(le,()=>{ee(!1)},!0);const ue=classNames$1({[styles$D.dropdown_container]:!0,[styles$D.vertical]:ne,[styles$D.left]:ce});return jsx$1(motion.div,{className:ue,initial:"hidden",animate:"show",variants:containerMenu,id:ae||"dropdown",ref:le,children:jsx$1(AnimatePresence,{children:re})})}const DropDown$1=reactExports.memo(DropDown);function DropdownButton({menuID:re,direction:ee="right",label:ne,alt:ae,icon:ce,toggled:le,children:ue,onClick:he,className:fe}){const[me,ge]=reactExports.useState(!1);useTwemoji();const ve=()=>{ge(!me)},ye=classNames$1({[styles$D.header_button]:!0,[styles$D.header_button_open]:me,[styles$D.header_button_toggled]:le}),be=classNames$1({[styles$D.menu_left]:ee==="left"}),Ee={};return ee==="left"&&(Ee.left=!0),jsxs(motion.div,{className:`${fe||""} ${be}`,children:[jsx$1(Button,{alt:ae,className:ye,"data-toggle":re,onClick:()=>{ve(),he&&he()},children:jsxs(Fragment,{children:[ne,ce]})}),jsx$1(AnimatePresence,{children:ue&&me&&React.cloneElement(ue,{setOpen:ge,...Ee})})]})}const DropdownButton$1=reactExports.memo(DropdownButton),locationMap=new Map([["---sort_feeds","Sort Feeds"],["/feed/sales","Recent Sales"],["/feed/random","Random"],["/feed/newobjkts","New OBJKTs"],["/feed/friends","Friends"],["---fund_feeds","Event Feeds"],["/feed/art4artists","Art4Artists"],["/feed/tez4pal","🇵🇸 Tez4Pal"],["/feed/morocco-quake-aid","🇲🇦 Quake Aid"],["/feed/quake-aid","🇹🇷🇸🇾 Quake Aid"],["/feed/ukraine","🇺🇦 Ukraine"],["/feed/pakistan","🇵🇰 Pakistan"],["/feed/iran","🇮🇷 Iran"],["/feed/tezospride","🏳️‍🌈 Tezospride"],["---mime_feeds","By Format"],["/feed/image","Image"],["/feed/video","Video"],["/feed/audio","Audio"],["/feed/glb","3D"],["/feed/html-svg","HTML & SVG"],["/feed/gif","GIF"],["/feed/pdf","PDF"],["/feed/md","Markdown"],["/feed/txt","Text"],["/feed/midi","Midi"]]),locationNeedSync=["/feed/friends"],FeedToolbar=({feeds_menu:re=!1})=>{const[ee,ne,ae]=useLocalSettings(he=>[he.viewMode,he.setViewMode,he.startFeed],shallow),ce=useLocation(),le=locationMap.get("/"+ce.pathname.split("/").slice(1,3).join("/"))||ae||DEFAULT_START_FEED,ue=useNavigate();return useUserStore(he=>[he.address],shallow),jsxs(motion.div,{className:styles$E.toolbar,children:[re&&jsx$1("div",{className:styles$E.feeds_area,children:jsx$1(DropdownButton$1,{alt:"feeds selection dropdown",menuID:"feeds",icon:jsx$1(SvgChevron,{}),label:le,className:styles$E.feeds_dropdown,children:jsx$1(DropDown$1,{menuID:"feeds",children:jsx$1("div",{className:styles$E.feeds_button,children:[...locationMap.keys()].map(he=>he.startsWith("-")?jsxs(Fragment,{children:[jsx$1(Line,{className:styles$E.separator},he),jsx$1("span",{className:styles$E.subtitle,children:locationMap.get(he)})]}):locationNeedSync.includes(he)?jsx$1(Button,{onClick:()=>{ue("/sync",{state:`${he}`})},children:locationMap.get(he)},he):jsx$1(Button,{to:he,children:locationMap.get(he)},he))})})})}),jsxs("div",{className:styles$E.view_mode_area,children:[jsx$1(IconToggle,{alt:"single view mode",toggled:ee==="single",onClick:()=>{ne("single")},icon:jsx$1(SvgSingleView,{})}),jsx$1(IconToggle,{alt:"masonry view mode",toggled:ee==="masonry",onClick:()=>ne("masonry"),icon:jsx$1(SvgMasonry,{})})]})]})},single_view="_single_view_96p3b_216",load_container="_load_container_96p3b_222",feed_container="_feed_container_96p3b_231",infinite_scroll="_infinite_scroll_96p3b_251",empty_section="_empty_section_96p3b_256",styles$C={single_view,load_container,feed_container,infinite_scroll,empty_section};function useFirstMountState(){var re=reactExports.useRef(!0);return re.current?(re.current=!1,!0):re.current}var useUpdateEffect=function(re,ee){var ne=useFirstMountState();reactExports.useEffect(function(){if(!ne)return re()},ee)};const useUpdateEffect$1=useUpdateEffect;function on(re){for(var ee=[],ne=1;ne<arguments.length;ne++)ee[ne-1]=arguments[ne];re&&re.addEventListener&&re.addEventListener.apply(re,ee)}function off(re){for(var ee=[],ne=1;ne<arguments.length;ne++)ee[ne-1]=arguments[ne];re&&re.removeEventListener&&re.removeEventListener.apply(re,ee)}var isBrowser$1=typeof window<"u",toggleSelection=function(){var re=document.getSelection();if(!re.rangeCount)return function(){};for(var ee=document.activeElement,ne=[],ae=0;ae<re.rangeCount;ae++)ne.push(re.getRangeAt(ae));switch(ee.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":ee.blur();break;default:ee=null;break}return re.removeAllRanges(),function(){re.type==="Caret"&&re.removeAllRanges(),re.rangeCount||ne.forEach(function(ce){re.addRange(ce)}),ee&&ee.focus()}},deselectCurrent=toggleSelection,clipboardToIE11Formatting={"text/plain":"Text","text/html":"Url",default:"Text"},defaultMessage="Copy to clipboard: #{key}, Enter";function format(re){var ee=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return re.replace(/#{\s*key\s*}/g,ee)}function copy$1(re,ee){var ne,ae,ce,le,ue,he,fe=!1;ee||(ee={}),ne=ee.debug||!1;try{ce=deselectCurrent(),le=document.createRange(),ue=document.getSelection(),he=document.createElement("span"),he.textContent=re,he.ariaHidden="true",he.style.all="unset",he.style.position="fixed",he.style.top=0,he.style.clip="rect(0, 0, 0, 0)",he.style.whiteSpace="pre",he.style.webkitUserSelect="text",he.style.MozUserSelect="text",he.style.msUserSelect="text",he.style.userSelect="text",he.addEventListener("copy",function(ge){if(ge.stopPropagation(),ee.format)if(ge.preventDefault(),typeof ge.clipboardData>"u"){ne&&console.warn("unable to use e.clipboardData"),ne&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var ve=clipboardToIE11Formatting[ee.format]||clipboardToIE11Formatting.default;window.clipboardData.setData(ve,re)}else ge.clipboardData.clearData(),ge.clipboardData.setData(ee.format,re);ee.onCopy&&(ge.preventDefault(),ee.onCopy(ge.clipboardData))}),document.body.appendChild(he),le.selectNodeContents(he),ue.addRange(le);var me=document.execCommand("copy");if(!me)throw new Error("copy command was unsuccessful");fe=!0}catch(ge){ne&&console.error("unable to copy using execCommand: ",ge),ne&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(ee.format||"text",re),ee.onCopy&&ee.onCopy(window.clipboardData),fe=!0}catch(ve){ne&&console.error("unable to copy using clipboardData: ",ve),ne&&console.error("falling back to prompt"),ae=format("message"in ee?ee.message:defaultMessage),window.prompt(ae,re)}}finally{ue&&(typeof ue.removeRange=="function"?ue.removeRange(le):ue.removeAllRanges()),he&&document.body.removeChild(he),ce()}return fe}var copyToClipboard=copy$1;const r$1=getDefaultExportFromCjs(copyToClipboard);var useEffectOnce=function(re){reactExports.useEffect(re,[])};const useEffectOnce$1=useEffectOnce;var getInitialState=function(re,ee){return ee!==void 0?ee:isBrowser$1?window.matchMedia(re).matches:!1},useMedia=function(re,ee){var ne=reactExports.useState(getInitialState(re,ee)),ae=ne[0],ce=ne[1];return reactExports.useEffect(function(){var le=!0,ue=window.matchMedia(re),he=function(){le&&ce(!!ue.matches)};return ue.addListener(he),ce(ue.matches),function(){le=!1,ue.removeListener(he)}},[re]),ae};const useMedia$1=useMedia;var useMount=function(re){useEffectOnce$1(function(){re()})};const useMount$1=useMount;var useUnmount=function(re){var ee=reactExports.useRef(re);ee.current=re,useEffectOnce$1(function(){return function(){return ee.current()}})};const useUnmount$1=useUnmount;var useRafState=function(re){var ee=reactExports.useRef(0),ne=reactExports.useState(re),ae=ne[0],ce=ne[1],le=reactExports.useCallback(function(ue){cancelAnimationFrame(ee.current),ee.current=requestAnimationFrame(function(){ce(ue)})},[]);return useUnmount$1(function(){cancelAnimationFrame(ee.current)}),[ae,le]};const useRafState$1=useRafState;var useWindowScroll=function(){var re=useRafState$1(function(){return{x:isBrowser$1?window.pageXOffset:0,y:isBrowser$1?window.pageYOffset:0}}),ee=re[0],ne=re[1];return reactExports.useEffect(function(){var ae=function(){ne(function(ce){var le=window.pageXOffset,ue=window.pageYOffset;return ce.x!==le||ce.y!==ue?{x:le,y:ue}:ce})};return ae(),on(window,"scroll",ae,{capture:!1,passive:!0}),function(){off(window,"scroll",ae)}},[]),ee};const useWindowScroll$1=useWindowScroll,useKeyboard=(re,ee,ne)=>{const[ae,ce]=reactExports.useState([!1,null]),[le,ue]=reactExports.useState(null);return useMount$1(()=>{__vitePreload(()=>import("./keyboard-ceef30bd.js").then(he=>he.k),["assets/keyboard-ceef30bd.js","assets/contracts-deb3232b.js"]).then(he=>ue(he.default||he))}),reactExports.useEffect(()=>{if(!le)return;const he=me=>ce([!0,me]),fe=me=>ce([!1,me]);return le.bind(re,he,fe,!0),()=>{le.unbind(re,he,fe)}},[re,le]),useUpdateEffect$1(()=>{!ae[0]&&ne?ne():ae[0]&&ee&&ee()},[ae[0]]),ae};function SingleView({tokens:re}){return jsx$1("div",{className:`${styles$C.single_view} no-fool`,children:re.map(ee=>jsx$1(FeedItem,{nft:ee},ee.token_id))})}function MasonryView({tokens:re}){return jsx$1(ResponsiveMasonry,{children:re.map(ee=>jsx$1(FeedItem,{nft:ee},ee.key||ee.token_id))})}function TokenCollection({query:re,label:ee,namespace:ne,showRestricted:ae=!1,overrideProtections:ce=!1,feeds_menu:le=!1,disable:ue=!1,variables:he={},swrParams:fe=[],itemsPerLoad:me=40,maxItems:ge=2e3,resultsPath:ve="tokens",tokenPath:ye="",keyPath:be="token_id",emptyMessage:Ee="no results",postProcessTokens:Ce=Te=>Te,extractTokensFromResponse:Se=(Te,{postProcessTokens:ke,resultsPath:Ne,tokenPath:Fe,keyPath:De})=>ke(get$5(Te,Ne).map(Oe=>({...Fe?get$5(Oe,Fe):Oe,key:get$5(Oe,De)})))}){const[Te]=useUserStore(Ye=>[Ye.address]),[ke,Ne]=useSearchParams(),{walletBlockMap:Fe,nsfwMap:De,photosensitiveMap:Oe,objktBlockMap:Re}=useSettings(),[Be,Le,je]=useLocalSettings(Ye=>[Ye.viewMode,Ye.toggleViewMode,Ye.toggleZen],shallow);useKeyboard("v",Le),useKeyboard("z",je);const Ge=ke.get(ne)?parseInt(ke.get(ne),10):me,{data:qe,error:Ue}=useSWR(ue?null:[ne,...fe],async Ye=>typeof re=="string"?distExports.request("https://teztok.teia.rocks/v1/graphql",re,{...he,...ge?{limit:ge}:{}}):re,{revalidateIfStale:!1,revalidateOnFocus:!1,use:[laggy]});if(Ue)return jsx$1(Container$3,{children:jsx$1("pre",{children:JSON.stringify(Ue,null,2)})});if(!qe)return jsxs("div",{className:styles$C.feed_container,children:[jsx$1(FeedToolbar,{feeds_menu:le}),jsx$1("div",{className:styles$C.load_container,children:jsx$1(Loading,{message:`Loading ${ee||ne}`})})]});if(Fe===void 0)throw new Error("Please try again in a few minutes.",{cause:"Could not retrieve the ban list"});const ze=Se(qe,{postProcessTokens:Ce,resultsPath:ve,tokenPath:ye,keyPath:be}).filter(Ye=>ae?!0:Fe.get(Ye.artist_address)!==1&&Re.get(Ye.id)!==1).map(Ye=>{var Xe,We,Ze;return{...Ye,isNSFW:!ce&&(De.get(Ye.token_id)===1||((Xe=Ye.teia_meta)==null?void 0:Xe.content_rating)===METADATA_CONTENT_RATING_MATURE),isPhotosensitive:!ce&&(Oe.get(Ye.token_id)===1||((Ze=(We=Ye.teia_meta)==null?void 0:We.accessibility)==null?void 0:Ze.hazards.includes(METADATA_ACCESSIBILITY_HAZARDS_PHOTOSENS))),isModerated:(Oe.get(Ye.token_id)===1||De.get(Ye.token_id)===1)&&Ye.artist_address===Te}});if(!ze.length)return jsxs("div",{className:styles$C.feed_container,children:[jsx$1(FeedToolbar,{feeds_menu:le}),jsx$1("div",{className:styles$C.empty_section,children:jsx$1("h1",{children:Ee})})]});const He=ze.slice(0,Ge);return jsxs("div",{className:`${styles$C.feed_container} no-fool`,children:[jsx$1(FeedToolbar,{feeds_menu:le}),jsx$1(IconCache.Provider,{value:{},children:jsx$1(InfiniteScroll,{className:`${styles$C.infinite_scroll} no-fool`,loadMore:()=>{Ne({...Object.fromEntries(ke),[ne]:Ge+me},{preventScrollReset:!0})},hasMore:Ge<ze.length,children:Be==="single"?jsx$1(SingleView,{tokens:He}):jsx$1(MasonryView,{tokens:He})})})]})}function TagFeed({tag:re,...ee}){return jsx$1(TokenCollection,{feeds_menu:!0,label:re,variables:{tag:re},swrParams:[re],maxItems:600,query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query getObjktsByTag($tag: String!, $limit: Int!) {
          tokens(
            where: {
              tags: { tag: { _eq: $tag } },
              editions: { _neq: 0 },
              fa2_address: { _eq: "${HEN_CONTRACT_FA2}" },
              metadata_status: { _eq: "processed" }
            }
            order_by: { minted_at: desc }
            limit: $limit
          ) {
            ...baseTokenFields
          }
        }
      `,...ee})}const Tags$1=()=>{const{tag:re}=useParams();return jsx$1(Page,{feed:!0,title:`Tag ${re}`,children:jsx$1(TagFeed,{tag:re,namespace:`tag_${re}`})})},buttons$6="_buttons_f3kt5_216",about="_about_f3kt5_221",styles$B={buttons:buttons$6,about},ReactComponent$4=function(re){return Object.keys(re).forEach(function(ne){re[ne]}),React.createElement("div",null,React.createElement("h1",null,"Teia is"),React.createElement("p",null,"... a collaborative artwork made of artworks, a place for ideas and creative works."),React.createElement("p",null,"... a non-profit, open-source online platform for trading digital assets as OBJKT NFTs."),React.createElement("p",null,"... a collective, aligning under the values of sustainability, accessibility, and equity."),React.createElement("p",null,"... owned and maintained by its community, built and improved by its participants."),React.createElement("p",null,"... an infinite work in progress."),React.createElement("hr",null),React.createElement("p",null,React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#core-values"},"Core Values")),React.createElement("p",null,React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#code-of-conduct"},"Code of Conduct")),React.createElement("p",null,React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#terms-and-conditions"},"Terms and Conditions")),React.createElement("p",null,React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#content-moderation"},"Account Restrictions/Content Moderation")),React.createElement("hr",null),React.createElement("h2",null,"Links"),React.createElement("p",null,"Documentation: ",React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki"},"wiki.teia.art")),React.createElement("p",null,"Blog: ",React.createElement("a",{href:"https://blog.teia.art"},"blog.teia.art")),React.createElement("p",null,"Announcements and Updates: ",React.createElement("a",{href:"https://twitter.com/TeiaCommunity"},"Twitter")),React.createElement("p",null,"Join the community: ",React.createElement("a",{href:"https://discord.com/invite/7pZrPCcgnG"},"discord")),React.createElement("p",null,"Report Harassment or Scams via the ",React.createElement("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLSeuBmNJjTiROSbHXXiQ5e-ia6fFywHKZ7Dj4-7sZtyltGY3yA/viewform"},"Report Form")),React.createElement("p",null,"Report Bugs via a ",React.createElement("a",{href:"https://github.com/teia-community/teia-ui/issues"},"Github issue")),React.createElement("p",null,"DAO Agora/Forum: ",React.createElement("a",{href:"https://discourse.teia.art/"},"discourse.teia.art")),React.createElement("p",null,"Code: ",React.createElement("a",{href:"https://github.com/teia-community"},"Teia Github")),React.createElement("p",null,"Community Curation: ",React.createElement("a",{href:"https://twitter.com/TeiaCommunity"},"@TeiaArt")),React.createElement("hr",null),React.createElement("h2",null,"Imprint"),React.createElement("p",null,React.createElement("strong",null,"Teia DAO LLC")),React.createElement("p",null,"Mail: info@teia.art"),React.createElement("p",null,"Principals office address: PO Box 852, Long Island Rd Majuro, Marshall Islands MH 96960"),React.createElement("p",null,"Registration Number: 10020-23 (Registrated via ",React.createElement("a",{href:"https://www.midao.org/"},"MIDAO Directory Services"),")"),React.createElement("hr",null),React.createElement("h2",null,"Tech Specs"),React.createElement("p",null,"The Teia Marketplace Interface and marketplace contract are ",React.createElement("a",{href:"https://github.com/teia-community/teia-ui"},"code forks")," based on the open source Tezos NFT marketplace ",React.createElement("a",{href:"https://github.com/hicetnunc2000"},"hic et nunc")," that have been and will be further developed and maintained by the Teia community."),React.createElement("p",null,"The ",React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Marketplace-Fees"},"marketplace fees")," are set to 2.5%."),React.createElement("hr",null),React.createElement("h2",null,"Smart Contracts:"),React.createElement("p",null,React.createElement("strong",null,"FA2 Token Contract:")," ",React.createElement("a",{href:"https://tzstats.com/KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton"},"KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton")," by ",React.createElement("a",{href:"https://github.com/hicetnunc2000/objkt-swap"},"hicetnunclab2000")),React.createElement("p",null,React.createElement("strong",null,"Minting Contract:")," ",React.createElement("a",{href:"https://tzkt.io/KT1Hkg5qeNhfwpKW4fXvq7HGZB9z2EnmCCA9/operations/"},"KT1Hkg5qeNhfwpKW4fXvq7HGZB9z2EnmCCA9")," by ",React.createElement("a",{href:"https://github.com/hicetnunc2000/objkt-swap"},"hicetnunclab2000")),React.createElement("p",null,React.createElement("strong",null,"Marketplace Contract:")," ",React.createElement("a",{href:"https://tzkt.io/KT1PHubm9HtyQEJ4BBpMTVomq6mhbfNZ9z5w/operations/"},"KT1PHubm9HtyQEJ4BBpMTVomq6mhbfNZ9z5w")," by ",React.createElement("a",{href:"https://github.com/teia-community/teia-smart-contracts/blob/main/python/contracts/teiaMarketplace_v1.py"},"Teia community")," - audited by ",React.createElement("a",{href:"https://github.com/InferenceAG/ReportPublications/blob/master/Inference%20AG%20-%20Teia%20community%20-%20marketplace%20%26%20multisig%20-%20v1.0.pdf"},"Inference AG")),React.createElement("p",null,React.createElement("strong",null,"Marketplace Contract Admin:")," ",React.createElement("a",{href:"https://tzkt.io/KT1PKBTVmdxfgkFvSeNUQacYiEFsPBw16B4P/operations/"},"KT1PKBTVmdxfgkFvSeNUQacYiEFsPBw16B4P")," - ",React.createElement("a",{href:"https://multisign.onrender.com/"},"multisig contract")," developed by the Teia Community"),React.createElement("hr",null),React.createElement("p",null,"All code and contracts above have been ",React.createElement("a",{href:"https://github.com/teia-community/teia-ui/blob/main/LICENSE"},"released under the MIT license.")),React.createElement("hr",null))};function About(){return jsx$1(Page,{title:"about",children:jsx$1("div",{className:styles$B.about,children:jsx$1(ReactComponent$4,{})})})}function useClipboard(re,ee){var ne=reactExports.useState(!1),ae=ne[0],ce=ne[1],le=ee&&ee.successDuration;return reactExports.useEffect(function(){if(ae&&le){var ue=setTimeout(function(){ce(!1)},le);return function(){clearTimeout(ue)}}},[ae,le]),[ae,function(){var ue=r$1(re);ce(ue)}]}const identicon$2="_identicon_1g3ye_216",smol="_smol_1g3ye_229",styles$A={identicon:identicon$2,smol},alphabet58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",base58=base(alphabet58),s=64;function bound(re,ee){return Math.abs((ee-re)%ee)}function corner({x:re,y:ee}){const ce=s-13,le=s*2-26;return re+ee<13||re+ee>le||re>ce&&ee<13||ee>ce&&re<13}function newPath(re){return re.substr(-2)!=="M "}function dummyAddress(){const re=[{tag:0,curve:0,prefix:"tz1"},{tag:0,curve:1,prefix:"tz2"},{tag:0,curve:2,prefix:"tz3"},{tag:1,prefix:"KT1"}],ee=re[Math.floor(Math.random()*re.length)],ne=window.crypto.getRandomValues(new Uint8Array(20)),ae=new Uint8Array(22);ae[0]=ee.tag,ee.tag===0&&ee.curve&&(ae[1]=ee.curve),ae.set(ne,ee.tag===0?2:1),ee.tag===1&&(ae[21]=0);const ce=base58.encode(ae);return ee.prefix+ce}function avatar(re){re=re||dummyAddress();const ee=base58.decode(re.trim().substr(3)),ne=buffer$2.Buffer.from(ee).toString("hex"),ae=ne.split("").reduce((fe,me)=>fe+parseInt(me,16),0),ce=ne.split("").slice(-5).reduce((fe,me)=>fe+parseInt(me,16),0),le=[];for(let fe=0;fe<ne.length-2;fe++){const me=parseInt(`${ne[fe]}${ne[fe+1]}${ne[fe+2]}`,16)+ae,ge=bound(Math.round((me||s/2)/s),s),ve=bound(Math.round(me/(ge||s/2)),s);le.push({x:ge,y:ve,n:me})}let ue="M ",he=!1;for(let fe=0;fe<le.length;fe++){const me=le[fe];if(newPath(ue))if(corner(me)&&me.n%2===0&&(me.x+me.y)%7<2){const ge=me.x%5+me.y%7;ue+=`
          M ${bound(me.x+s/10,s)-ge}, ${bound(me.y+s/10,s)}
          a ${ge},${ge} 0 1,0 ${ge*2},0
          a ${ge},${ge} 0 1,0 -${ge*2},0
        `,he=!0}else if(me.n%7===3){const ge=me.x%5+me.y%7;ue+=`
          M ${bound(me.x+s/10,s)-ge}, ${bound(me.y+s/10,s)}
          a ${ge},${ge} 0 1,0 ${ge*2},0
          a ${ge},${ge} 0 1,0 -${ge*2},0
        `,he=!0}else me.n%2===0&&me.x%5<3?(ue+=` M ${me.x},${me.y}`,ue+=` L ${me.x},${me.y}`,he=!1):me.n%2===1?(ue+=` M ${me.x},${me.y}`,ue+=` L ${me.y},${me.x}`,he=!1):(ue+=` M ${me.x},${me.y}`,ue+=` L ${me.x},${me.y}`,he=!1,fe<le.length-2&&(ue+=` ${le[fe+1].x},${le[fe+1].y}`,ue+=` ${le[fe+2].x},${le[fe+2].y}`));else he?(ue+=` M ${me.x},${me.y}`,ue+=` L ${me.x},${me.y}`,he=!1):(ue+=` ${me.x},${me.y}`,he=!1)}return[ue,ce]}const identicons=[(re,ee,ne)=>jsx$1("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:jsx$1("path",{id:"path",d:`${re}`})}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsx$1("filter",{id:`filter${ee}`,x:"0%",y:"0%",width:"100%",height:"100%",filterUnits:"objectBoundingBox",primitiveUnits:"userSpaceOnUse",children:jsx$1("feMorphology",{operator:"erode",radius:"3 1",x:"0%",y:"0%",width:"100%",height:"100%",in:"SourceGraphic",result:"morphology"})}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxs("filter",{id:`filter${ee}`,children:[jsx$1("feTurbulence",{type:"turbulence",baseFrequency:"0.005",numOctaves:"4",result:"turbulence"}),jsx$1("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"30",xChannelSelector:"R",yChannelSelector:"G"}),jsx$1("feMorphology",{operator:"dilate",radius:"0.5"}),jsx$1("feMorphology",{operator:"erode",radius:"0.5"})]}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxs("filter",{id:`filter${ee}`,children:[jsx$1("feTurbulence",{type:"turbulence",baseFrequency:"0.005",numOctaves:"4",result:"turbulence"}),jsx$1("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"50",xChannelSelector:"R",yChannelSelector:"G"}),jsx$1("feMorphology",{operator:"erode",radius:"0.5"})]}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxs("filter",{id:`filter${ee}`,children:[jsx$1("feTurbulence",{type:"turbulence",baseFrequency:"0.5 0",numOctaves:"1",result:"turbulence"}),jsx$1("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"10",xChannelSelector:"R",yChannelSelector:"G"})]}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxs("filter",{id:`filter${ee}`,children:[jsx$1("feTurbulence",{type:"turbulence",baseFrequency:"0.05 0.5",numOctaves:"1",result:"turbulence"}),jsx$1("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"10",xChannelSelector:"R",yChannelSelector:"G"})]}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsx$1("filter",{id:`filter${ee}`,children:jsx$1("feMorphology",{operator:"erode",radius:"1"})}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsx$1("filter",{id:`filter${ee}`,children:jsx$1("feMorphology",{operator:"dilate",radius:"1.2"})}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxs("filter",{id:`filter${ee}`,x:"0",y:"0",width:"100%",height:"100%",children:[jsx$1("feTile",{in:"SourceGraphic",x:"16",y:"16",width:"98",height:"98"}),jsx$1("feTile",{})]}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxs("filter",{id:`filter${ee}`,children:[jsx$1("feTurbulence",{type:"turbulence",baseFrequency:"0.05",numOctaves:"2",result:"turbulence"}),jsx$1("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]})],Identicon=({address:re="",logo:ee,className:ne})=>{const ae=reactExports.useMemo(()=>{if(ee)return ee.startsWith("ipfs://")?HashToURL(ee,"CDN",{size:"raw"}):ee},[ee]),[ce,le]=reactExports.useState(!1),[ue,he]=reactExports.useState(!1),fe=classNames$1(styles$A.identicon,ne,ue?styles$A.smol:""),me=({target:be})=>{const Ee=be.naturalWidth,Ce=be.naturalHeight;Ee+Ce<256&&he(!0)};if(ae)return ce?jsx$1("video",{className:fe,"aria-label":"identicon",src:ae}):jsx$1(buildExports.LazyLoadImage,{className:fe,src:ae,alt:"identicon",onLoad:me,onError:be=>{console.error(be),le(!0)}});const[ge,ve]=avatar(re);return identicons[ve%identicons.length](ge,re,fe)},Identicon$1=reactExports.memo(Identicon);function reorderBigmapData(re,ee,ne=!1){const ae=re?{}:void 0;return re==null||re.forEach(ce=>ae[ee?ce.key[ee]:ce.key]=ne?bytes2Char(ce.value):ce.value),ae}function useBalance(re){const{data:ee,mutate:ne}=useSWR(re?`/v1/accounts/${re}/balance`:null,getTzktData);return[ee?ee/1e6:0,ne]}function useDaoTokenBalance(re){const ee={"token.contract":DAO_TOKEN_CONTRACT,"token.tokenId":"0",account:re,select:"balance"},{data:ne,mutate:ae}=useSWR(re?["/v1/tokens/balances",ee]:null,getTzktData);return[ne!=null&&ne[0]?parseInt(ne[0])/DAO_TOKEN_DECIMALS:0,ae]}function useStorage(re){const{data:ee,mutate:ne}=useSWR(re?`/v1/contracts/${re}/storage`:null,getTzktData);return[ee,ne]}function useDaoGovernanceParameters(re){const ee={limit:1e4,active:!0,select:"key,value"},{data:ne,mutate:ae}=useSWR(re!=null&&re.governance_parameters?[`/v1/bigmaps/${re.governance_parameters}/keys`,ee]:null,getTzktData);return[reorderBigmapData(ne),ae]}function useDaoProposals(re){const ee={limit:1e4,active:!0,select:"key,value"},{data:ne,mutate:ae}=useSWR(re!=null&&re.proposals?[`/v1/bigmaps/${re.proposals}/keys`,ee]:null,getTzktData);return[reorderBigmapData(ne),ae]}function useDaoRepresentatives(re){const{data:ee,mutate:ne}=useSWR(re!=null&&re.representatives?`/v1/contracts/${re.representatives}/storage`:null,getTzktData);return[ee!=null&&ee.representatives?Object.fromEntries(Object.entries(ee.representatives).sort(([,ce],[,le])=>ce<le?-1:ce>le?1:0)):void 0,ne]}function useDaoUserVotes(re,ee){const ne={"key.address":re,limit:1e4,active:!0,select:"key,value"},{data:ae,mutate:ce}=useSWR(re&&(ee!=null&&ee.token_votes)?[`/v1/bigmaps/${ee.token_votes}/keys`,ne]:null,getTzktData);return[reorderBigmapData(ae,"nat"),ce]}function useDaoCommunityVotes(re,ee){const ne={"key.string":re,limit:1e4,active:!0,select:"key,value"},{data:ae,mutate:ce}=useSWR(re&&(ee!=null&&ee.representatives_votes)?[`/v1/bigmaps/${ee.representatives_votes}/keys`,ne]:null,getTzktData);return[reorderBigmapData(ae,"nat"),ce]}function useAliases(re){(re==null?void 0:re.length)===1&&re.push(re[0]);const ee={"key.in":re==null?void 0:re.join(","),limit:1e4,active:!0,select:"key,value"},{data:ne,mutate:ae}=useSWR((re==null?void 0:re.length)>0?["/v1/bigmaps/3919/keys",ee]:null,getTzktData);return[reorderBigmapData(ne,void 0,!0),ae]}function useDaoUsersAliases(re,ee,ne){const ae=new Set;return re&&ae.add(re),ee&&Object.keys(ee).forEach(ce=>ae.add(ce)),ne&&Object.values(ne).forEach(ce=>{ae.add(ce.issuer),ce.kind.transfer_mutez?ce.kind.transfer_mutez.forEach(le=>ae.add(le.destination)):ce.kind.transfer_token&&ce.kind.transfer_token.distribution.forEach(le=>ae.add(le.destination))}),useAliases(Array.from(ae))}function useDaoMemberCount(re){const ee={"token.contract":DAO_TOKEN_CONTRACT,"token.tokenId":"0","balance.gt":re*DAO_TOKEN_DECIMALS},{data:ne,mutate:ae}=useSWR(["/v1/tokens/balances/count",ee],getTzktData);return[ne?parseInt(ne):0,ae]}function usePolls(re){const ee={limit:1e4,active:!0,select:"key,value"},{data:ne,mutate:ae}=useSWR(re!=null&&re.polls?[`/v1/bigmaps/${re.polls}/keys`,ee]:null,getTzktData);return[reorderBigmapData(ne),ae]}function useUserPollVotes(re,ee){const ne={"key.address":re,limit:1e4,active:!0,select:"key,value"},{data:ae,mutate:ce}=useSWR(re&&(ee!=null&&ee.votes)?[`/v1/bigmaps/${ee.votes}/keys`,ne]:null,getTzktData);return[reorderBigmapData(ae,"nat"),ce]}function usePollsUsersAliases(re,ee){const ne=new Set;return re&&ne.add(re),ee&&Object.values(ee).forEach(ae=>{ne.add(ae.issuer)}),useAliases(Array.from(ne))}function useObjkt(re){const{data:ee,mutate:ne}=useSWR(re?["/poll/objkt/",re]:null,async(ae,ce)=>fetchObjktDetails(ce),{revalidateIfStale:!1,revalidateOnFocus:!1});return[ee,ne]}const identicon$1="_identicon_1j1cd_216",square="_square_1j1cd_221",profile="_profile_1j1cd_233",info$2="_info_1j1cd_240",user$1="_user_1j1cd_243",user_pfp="_user_pfp_1j1cd_259",socials="_socials_1j1cd_267",menu$2="_menu_1j1cd_278",profile_page$1="_profile_page_1j1cd_287",container$h="_container_1j1cd_291",number="_number_1j1cd_296",filter="_filter_1j1cd_306",card="_card_1j1cd_319",cardContainer="_cardContainer_1j1cd_333",cardText="_cardText_1j1cd_337",cardTitle="_cardTitle_1j1cd_347",cardCollect="_cardCollect_1j1cd_353",cardCollectPrice="_cardCollectPrice_1j1cd_372",tag$2="_tag_1j1cd_376",top="_top_1j1cd_393",restricted$2="_restricted_1j1cd_448",blur="_blur_1j1cd_461",tools="_tools_1j1cd_465",styles$z={identicon:identicon$1,square,profile,info:info$2,user:user$1,user_pfp,socials,menu:menu$2,profile_page:profile_page$1,container:container$h,number,filter,card,cardContainer,cardText,cardTitle,cardCollect,cardCollectPrice,tag:tag$2,top,restricted:restricted$2,blur,tools};async function reverseRecord(re){var ne,ae,ce,le;const ee=await axios.post("https://api.tezos.domains/graphql",{query:"query reverseRecord($address: String!) { reverseRecord(address: $address) { domain { name }}}",variables:{address:re}},{headers:{"Content-Type":"application/json"}});return((le=(ce=(ae=(ne=ee==null?void 0:ee.data)==null?void 0:ne.data)==null?void 0:ae.reverseRecord)==null?void 0:ce.domain)==null?void 0:le.name)||""}function Profile({user:re}){const[ee,ne]=useClipboard(re.discord),[ae,ce]=useClipboard(re.address,{successDuration:2500}),[le]=useDaoTokenBalance(re.address),ue=useDisplayStore(ge=>ge.coreParticipants),[he,fe]=reactExports.useState(""),me=reactExports.useCallback(()=>{reverseRecord(re.address).then(ge=>{fe(ge)})},[re.address]);return reactExports.useEffect(()=>{me()},[me]),jsx$1("div",{className:styles$z.container,children:jsxs("div",{className:styles$z.profile,children:[jsx$1("div",{className:styles$z.user_pfp,children:jsx$1(Identicon$1,{className:styles$z.identicon,address:re.address,logo:re.identicon})}),jsxs("div",{className:styles$z.info,children:[jsx$1("p",{className:styles$z.user,children:re.subjkt||re.alias}),re.description&&jsx$1("p",{children:re.description}),ue&&ue.length>0&&jsx$1(ParticipantList$1,{title:!1,participants:ue}),jsxs("div",{style:{display:"flex",gap:"1em",alignItems:"center"},children:[jsx$1(Button,{href:`https://tzkt.io/${re.address}`,children:he||walletPreview(re.address)}),jsx$1(Button,{className:styles$z.square,onClick:ce}),ae&&"Copied!"]}),le>=0&&jsxs("p",{children:[Math.round(le*10)/10," ",jsx$1("a",{href:"dao",children:"TEIA"})]}),jsxs("div",{className:styles$z.socials,children:[re.twitter&&jsx$1(Button,{alt:`User profile on Twitter (@${re.twitter})`,href:`https://twitter.com/${re.twitter}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"})})}),re.discord&&jsx$1(Button,{alt:`User profile on Discord, click to copy (${re.discord})`,onClick:ne,children:jsx$1("span",{className:styles$z.top,"data-position":"top","data-tooltip":ee?"Copied":re.discord,style:{marginRight:"10px"},children:jsx$1("svg",{width:"20",height:"15",viewBox:"0 0 20 15",xmlns:"http://www.w3.org/2000/svg",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M16.9308 1.24342C15.6561 0.667894 14.2892 0.243873 12.8599 0.00101874C12.8339 -0.00366827 12.8079 0.00804483 12.7945 0.0314716C12.6187 0.339138 12.4239 0.740513 12.2876 1.05599C10.7503 0.829542 9.22099 0.829542 7.71527 1.05599C7.57887 0.733501 7.37707 0.339138 7.20048 0.0314716C7.18707 0.00882646 7.16107 -0.00288664 7.13504 0.00101874C5.70659 0.243097 4.33963 0.667118 3.06411 1.24342C3.05307 1.2481 3.04361 1.25592 3.03732 1.26606C0.444493 5.07759 -0.265792 8.79544 0.0826501 12.4672C0.0842267 12.4852 0.0944749 12.5023 0.108665 12.5133C1.81934 13.7494 3.47642 14.4998 5.10273 14.9973C5.12876 15.0051 5.15634 14.9957 5.1729 14.9746C5.55761 14.4577 5.90054 13.9126 6.19456 13.3394C6.21192 13.3059 6.19535 13.266 6.15989 13.2528C5.61594 13.0497 5.098 12.8022 4.59977 12.5211C4.56037 12.4984 4.55721 12.443 4.59347 12.4164C4.69831 12.3391 4.80318 12.2587 4.9033 12.1775C4.92141 12.1626 4.94665 12.1595 4.96794 12.1689C8.24107 13.6393 11.7846 13.6393 15.0191 12.1689C15.0404 12.1587 15.0657 12.1619 15.0846 12.1767C15.1847 12.2579 15.2895 12.3391 15.3952 12.4164C15.4314 12.443 15.4291 12.4984 15.3897 12.5211C14.8914 12.8076 14.3735 13.0497 13.8288 13.252C13.7933 13.2653 13.7775 13.3059 13.7949 13.3394C14.0952 13.9118 14.4381 14.4569 14.8157 14.9738C14.8315 14.9957 14.8599 15.0051 14.8859 14.9973C16.5201 14.4998 18.1772 13.7494 19.8879 12.5133C19.9028 12.5023 19.9123 12.4859 19.9139 12.468C20.3309 8.22302 19.2154 4.53566 16.9568 1.26684C16.9513 1.25592 16.9419 1.2481 16.9308 1.24342ZM6.68335 10.2315C5.69792 10.2315 4.88594 9.34128 4.88594 8.24802C4.88594 7.15476 5.68217 6.26456 6.68335 6.26456C7.69239 6.26456 8.49651 7.16258 8.48073 8.24802C8.48073 9.34128 7.68451 10.2315 6.68335 10.2315ZM13.329 10.2315C12.3435 10.2315 11.5316 9.34128 11.5316 8.24802C11.5316 7.15476 12.3278 6.26456 13.329 6.26456C14.338 6.26456 15.1421 7.16258 15.1264 8.24802C15.1264 9.34128 14.338 10.2315 13.329 10.2315Z"})})})}),re.github&&jsx$1(Button,{alt:`User profile on Github (@${re.github})`,href:`https://github.com/${re.github}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})})}),re.gitlab&&jsx$1(Button,{alt:`User profile on gitlab (@${re.gitlab})`,href:`https://gitlab.com/${re.gitlab}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"m21.94 13.11-1.05-3.22c0-.03-.01-.06-.02-.09l-2.11-6.48a.859.859 0 0 0-.8-.57c-.36 0-.68.25-.79.58l-2 6.17H8.84L6.83 3.33a.851.851 0 0 0-.79-.58c-.37 0-.69.25-.8.58L3.13 9.82v.01l-1.07 3.28c-.16.5.01 1.04.44 1.34l9.22 6.71c.17.12.39.12.56-.01l9.22-6.7c.43-.3.6-.84.44-1.34M8.15 10.45l2.57 7.91-6.17-7.91m8.73 7.92 2.47-7.59.1-.33h3.61l-5.59 7.16m4.1-13.67 1.81 5.56h-3.62m-1.3.95-1.79 5.51L12 19.24l-2.86-8.79M6.03 3.94 7.84 9.5H4.23m-1.18 4.19c-.09-.07-.13-.19-.09-.29l.79-2.43 5.82 7.45m11.38-4.73-6.51 4.73.02-.03 5.79-7.42.79 2.43c.04.1 0 .22-.09.29"})})}),re.site&&jsx$1(Button,{alt:`User web site ${re.site}`,href:`${re.site}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 24 24",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2 0-.68.06-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.923 7.923 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8.008 8.008 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.65 15.65 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z"})})}),re.email&&jsx$1(Button,{alt:`User email address ${re.email}`,href:`mailto: ${re.email}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 -2.5 20 20",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"m18 2.291-8 7.027-8-7.037V2h16v.291ZM2 13V4.945l8 7.035 8-7.027V13H2Zm-2 2h20V0H0v15Z"})})}),re.reddit&&jsx$1(Button,{alt:`User reddit account (${re.reddit})`,href:`https://www.reddit.com/${re.reddit}`,children:jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 279.748 279.748",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:[jsx$1("path",{d:"M279.748 133.142c0-19.299-15.701-35-35-35-10.768 0-20.674 4.812-27.279 13.064-18.532-8.431-39.663-13.626-62.015-15.271l19.206-60.692 42.895 9.294c3.285 12.782 14.901 22.258 28.693 22.258 16.336 0 29.627-13.29 29.627-29.626 0-16.336-13.291-29.627-29.627-29.627-11.801 0-21.999 6.941-26.759 16.95l-49.497-10.725a10.002 10.002 0 0 0-11.651 6.756L134.636 95.43c-26.164.638-50.988 6.053-72.356 15.775-6.606-8.251-16.512-13.063-27.28-13.063-19.299 0-35 15.701-35 35 0 9.373 3.683 18.173 10.222 24.709-3.9 8.37-5.875 17.076-5.875 25.936 0 24.048 14.396 46.492 40.538 63.199 25.447 16.264 59.183 25.221 94.989 25.221 35.808 0 69.542-8.957 94.989-25.221 26.142-16.707 40.538-39.151 40.538-63.199 0-8.859-1.975-17.565-5.875-25.936 6.539-6.537 10.222-15.336 10.222-24.709zM15.369 145.139c-2.212-3.59-3.369-7.688-3.369-11.997 0-12.682 10.317-23 23-23 5.444 0 10.558 1.851 14.649 5.258-14.622 8.302-26.132 18.289-34.28 29.739zm52.671 20.266c0-13.785 11.215-25 25-25s25 11.215 25 25-11.215 25-25 25-25-11.215-25-25zm123.119 57.054c-9.745 10.637-29.396 17.244-51.285 17.244-21.888 0-41.539-6.607-51.284-17.244a9.937 9.937 0 0 1-2.617-7.192 9.933 9.933 0 0 1 3.235-6.937 9.974 9.974 0 0 1 6.754-2.627c2.797 0 5.484 1.183 7.373 3.244 5.803 6.333 20.827 10.756 36.539 10.756s30.737-4.423 36.539-10.756a10.022 10.022 0 0 1 7.374-3.244c2.508 0 4.906.933 6.755 2.627a9.928 9.928 0 0 1 3.234 6.937 9.933 9.933 0 0 1-2.617 7.192zm-4.451-32.054c-13.785 0-25-11.215-25-25s11.215-25 25-25 25 11.215 25 25-11.215 25-25 25zm77.671-45.266c-8.147-11.45-19.657-21.436-34.28-29.739 4.092-3.408 9.205-5.258 14.649-5.258 12.683 0 23 10.318 23 23 0 4.309-1.157 8.407-3.369 11.997z"})," "]})}),re.mailchain&&jsx$1(Button,{alt:`User mailchain address (${re.mailchain})`,href:`https://app.mailchain.com/mailto:${re.mailchain}@tezos.mailchain.com`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M7.879 6.894a.985.985 0 0 0-.984.985v8.242c0 .543.44.984.984.984h8.242a.985.985 0 0 0 .984-.984V7.88a.985.985 0 0 0-.984-.985zM16.12 18.65H7.88a2.529 2.529 0 0 1-2.527-2.528V7.88a2.529 2.529 0 0 1 2.527-2.527h8.242a2.529 2.529 0 0 1 2.527 2.527v8.242a2.529 2.529 0 0 1-2.527 2.528zm.125-15.106a.878.878 0 0 0-.621.258l-1.7 1.7a.878.878 0 0 0 0 1.246l3.329 3.328a.878.878 0 0 0 1.246 0l1.7-1.7a.878.878 0 0 0 0-1.246L16.87 3.801a.887.887 0 0 0-.625-.258Zm1.633 8.332a2.424 2.424 0 0 1-1.715-.707l-3.332-3.332a2.407 2.407 0 0 1-.707-1.714c0-.649.25-1.258.707-1.715l1.7-1.7a2.407 2.407 0 0 1 1.714-.706c.649 0 1.258.25 1.715.707l3.332 3.332c.457.457.707 1.066.707 1.714 0 .649-.25 1.258-.707 1.715l-1.7 1.7a2.424 2.424 0 0 1-1.714.706zM7.754 3.543a.887.887 0 0 0-.625.258L3.8 7.13a.878.878 0 0 0 0 1.246l1.699 1.7a.878.878 0 0 0 1.246 0l3.328-3.328a.882.882 0 0 0 0-1.246L8.375 3.8a.878.878 0 0 0-.621-.258ZM6.12 11.876c-.648 0-1.258-.25-1.715-.707L2.707 9.47A2.407 2.407 0 0 1 2 7.754c0-.648.25-1.257.707-1.714L6.04 2.708A2.407 2.407 0 0 1 7.754 2c.648 0 1.258.25 1.715.707l1.699 1.699a2.428 2.428 0 0 1 0 3.43l-3.332 3.332a2.407 2.407 0 0 1-1.715.707Zm0 1.794a.878.878 0 0 0-.621.257l-1.7 1.7a.878.878 0 0 0 0 1.246L7.13 20.2a.878.878 0 0 0 1.246 0l1.7-1.7a.878.878 0 0 0 0-1.246l-3.329-3.328a.887.887 0 0 0-.625-.258ZM7.754 22a2.424 2.424 0 0 1-1.715-.708l-3.332-3.332A2.407 2.407 0 0 1 2 16.247c0-.649.25-1.258.707-1.715l1.7-1.7a2.407 2.407 0 0 1 1.714-.706c.649 0 1.258.25 1.715.707l3.332 3.332a2.4 2.4 0 0 1 .707 1.714c0 .649-.25 1.258-.707 1.715l-1.7 1.7A2.424 2.424 0 0 1 7.755 22Zm10.125-8.332a.88.88 0 0 0-.625.257l-3.328 3.328a.882.882 0 0 0 0 1.247l1.699 1.699a.878.878 0 0 0 1.246 0l3.328-3.328a.878.878 0 0 0 0-1.246l-1.699-1.7a.878.878 0 0 0-.621-.257ZM16.246 22a2.424 2.424 0 0 1-1.715-.708l-1.699-1.699a2.428 2.428 0 0 1 0-3.43l3.332-3.331a2.4 2.4 0 0 1 1.715-.707c.648 0 1.258.25 1.715.707l1.695 1.699c.457.457.71 1.066.71 1.715 0 .648-.253 1.257-.706 1.714l-3.332 3.332a2.424 2.424 0 0 1-1.715.707z"})})}),re.telegram&&jsx$1(Button,{alt:`User telegram account (${re.telegram})`,href:`https://t.me/${re.telegram}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"m9.78 18.65.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42Z"})})}),re.facebook&&jsx$1(Button,{alt:`User facebook account (${re.facebook})`,href:`https://www.facebook.com/${re.facebook}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M12 2.04c-5.5 0-10 4.49-10 10.02 0 5 3.66 9.15 8.44 9.9v-7H7.9v-2.9h2.54V9.85c0-2.51 1.49-3.89 3.78-3.89 1.09 0 2.23.19 2.23.19v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.88h2.78l-.45 2.9h-2.33v7a10 10 0 0 0 8.44-9.9c0-5.53-4.5-10.02-10-10.02Z"})})}),re.instagram&&jsx$1(Button,{alt:`User instagram account (${re.instagram})`,href:`https://www.instagram.com/${re.instagram}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3Z"})})}),re.dns&&jsx$1(Button,{alt:`User DNS Profile (${re.dns})`,href:`http://${re.dns}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"})})})]})]})]})})}const container$g="_container_314o8_216",tab$1="_tab_314o8_220",active$1="_active_314o8_223",selected$2="_selected_314o8_223",tabs$1="_tabs_314o8_229",line$3="_line_314o8_247",styles$y={container:container$g,tab:tab$1,active:active$1,selected:selected$2,tabs:tabs$1,line:line$3},Tabs=({tabs:re,className:ee,filter:ne})=>{const ae=reactExports.useMemo(()=>ne?re.map(ne).filter(ce=>ce!==null):re,[re,ne]);return jsxs("div",{className:`${styles$y.container} ${ee||""}`,children:[jsx$1("div",{className:styles$y.tabs,children:ae.map((ce,le)=>ce?jsx$1(Button,{alt:`tab_${ce.title}`,preventScrollReset:!0,className:styles$y.tab,activeClass:styles$y.active,disabled:ce.disabled,to:ce==null?void 0:ce.to,children:ce.title},ce.title):null)}),jsx$1(Line,{className:styles$y.line})]})},check_container$1="_check_container_1047g_216",checkmark$1="_checkmark_1047g_233",container$f="_container_1047g_261",small$2="_small_1047g_309",styles$x={check_container:check_container$1,checkmark:checkmark$1,container:container$f,small:small$2},Checkbox=reactExports.forwardRef(({name:re,label:ee,alt:ne,initial:ae,onCheck:ce=()=>null,onBlur:le=()=>null,onWheel:ue=()=>null,title:he="",disabled:fe,checked:me,autoFocus:ge=!1,className:ve,small:ye},be)=>{const[Ee,Ce]=useControlled(me,ae),Se=reactExports.useCallback(ke=>{if(fe)return;const Ne=ke.target.checked;Ce(Ne),ce==null||ce(Ne)},[Ee,fe]),Te=classNames$1({[styles$x.check_container]:!0,[styles$x.small]:ye});return jsxs("label",{title:he,className:`${Te} ${ve||""}`,children:[ee,jsx$1("input",{ref:be,"aria-label":ne||re,defaultChecked:ae,type:"checkbox",name:re,onChange:Se,onBlur:le,onWheel:ue,checked:me,"aria-checked":Ee,disabled:fe}),jsx$1("span",{className:styles$x.checkmark})]})}),Checkbox$1=reactExports.memo(Checkbox),box$1="_box_1czlq_1",buttons$5="_buttons_1czlq_17",styles$w={box:box$1,buttons:buttons$5},Warning=({onInteract:re})=>{const[ee,ne]=reactExports.useState(!1),{setNsfwFriendly:ae,setPhotosensitiveFriendly:ce}=useLocalSettings(fe=>[fe.setNsfwFriendly,fe.setPhotosensitiveFriendly]),le=fe=>{re(fe)},ue=()=>{ee&&(console.log("disabling protections for good"),ae(!0),ce(!0)),le(!0)},he=()=>{le(!1)};return jsxs("div",{className:styles$w.box,children:[jsx$1("h1",{children:"Override Mode"}),jsxs("div",{children:[jsx$1("p",{children:"The override mode momentarily removes visual protections (NSFW and Flashing content)"}),jsx$1("p",{children:"By clicking enable, those filters will be removed only for this profile"}),jsx$1("p",{children:'You can tick the "Remember my choice" checkbox to make it effective across teia.'}),jsxs("p",{children:["If you ever need to change these, head to the local",jsx$1(Button,{inline:!0,strong:!0,to:"/settings",children:"settings"})]})]}),jsxs("div",{className:styles$w.buttons,children:[jsx$1(Button,{onClick:he,"data-id":"skip",shadow_box:!0,children:"Skip"}),jsx$1(Button,{onClick:ue,"data-id":"enable",shadow_box:!0,children:"Enable"})]}),jsx$1(Checkbox$1,{checked:ee,onCheck:ne,label:"Remember my choice"})]})};async function fetchUserInfo(re,ee="user_address"){let ne=await getUser(re,ee);if(!ne&&ee!=="user_address")throw new Error(`SUBJKT ${re} is not registered`,{cause:"User not found"});if(!ne&&validateAddress(re)===ValidationResult.VALID&&(ne={user_address:re}),!(ne!=null&&ne.user_address))throw new Error(`Invalid or missing Tz address: ${re}`,{cause:"Address not found"});const ae=await GetUserMetadata(ne.user_address);console.log(ae);const ce=ae?{...ae}:{};return ce.address=ne.user_address,get$5(ne,"metadata.data.description")&&(ce.description=get$5(ne,"metadata.data.description")),get$5(ne,"metadata.data.identicon")&&(ce.identicon=get$5(ne,"metadata.data.identicon")),ne.name&&(ce.subjkt=ne.name),ce}const useDisplayStore=create$2(subscribeWithSelector((re,ee)=>({coreParticipants:void 0})));function Display(){const{address:re,name:ee}=useParams(),{walletBlockMap:ne,underReviewMap:ae}=useSettings(),[ce,le]=reactExports.useState(),[ue,he]=reactExports.useState(),[fe,me]=reactExports.useState();let[ge]=useSearchParams();const{nsfwFriendly:ve,photosensitiveFriendly:ye}=useLocalSettings(Ne=>[Ne.nsfwFriendly,Ne.photosensitiveFriendly]);reactExports.useLayoutEffect(()=>{ge.get("yolo")!==null&&(!ve||!ye)&&le(!0),he(ge.get("show")!==null)},[]);const[be]=reactExports.useState(!1),{data:Ee,error:Ce}=useSWR(["/user",re||ee],(Ne,Fe)=>fetchUserInfo(Fe,re?"user_address":"name"),{revalidateIfStale:!1,revalidateOnFocus:!1}),Se=reactExports.useMemo(()=>Ee!=null&&Ee.address?ne.get(Ee.address)===1:!1,[Ee==null?void 0:Ee.address,ne]),Te=reactExports.useMemo(()=>Ee!=null&&Ee.address?ae.get(Ee.address)===1:!1,[Ee==null?void 0:Ee.address,ae]);if(Ce)throw Ce;if(!Ee)return jsx$1(Page,{title:"loading",children:jsx$1(Loading,{message:"Getting user profile"})});const ke=[{title:"Creations",to:""},{title:"Collection",to:"collection"},{title:"Curation",to:"curation"},{title:"Collabs",to:"collabs"}];return jsx$1(Page,{feed:!0,title:Ee.alias,children:ce?jsx$1(Warning,{onInteract:Ne=>{me(Ne),le(!1)}}):jsxs(Fragment,{children:[jsx$1(Profile,{user:Ee}),Ee.address.substr(0,2)!=="KT"&&jsx$1("div",{className:styles$z.menu,children:jsx$1(Tabs,{tabs:ke})}),(Se||Te)&&jsxs("div",{className:styles$z.restricted,children:[jsxs("h1",{children:[Te?"Under review":"Restricted"," account",ue?"(bypassed)":""]}),jsxs("p",{children:["Contact the Teia moderators on",jsx$1(Button,{small:!0,inline:!0,href:"https://discord.gg/TKeybhYhNe",children:"Discord"}),"to resolve the status."]}),jsxs("p",{children:["See the",jsx$1(Button,{inline:!0,small:!0,href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#3-terms-and-conditions---account-restrictions",children:"Teia Terms and Conditions"})]})]}),jsx$1(Outlet,{context:{showRestricted:ue,overrideProtections:fe,showFilters:be,address:Ee.address}})]})})}const CollabDisplay=()=>{const{id:re,name:ee}=useParams(),{data:ne,error:ae}=useSWR(!re||!ee?["/contract",re,ee]:null,async()=>{const fe=await fetchCollabCreations(ee||re,ee?"subjkt":"address");if(!fe.split_contracts.length)throw new Error("unknown split contract");return{tokens:fe.tokens,split_contract:fe.split_contracts[0]}},{revalidateIfStale:!1,revalidateOnFocus:!1});if(reactExports.useEffect(()=>{useDisplayStore.setState({coreParticipants:get$5(ne==null?void 0:ne.split_contract,"shareholders",[]).filter(({holder_type:fe})=>fe===CollaboratorType.CORE_PARTICIPANT)})},[ne==null?void 0:ne.split_contract]),ae)return jsx$1("pre",{children:JSON.stringify(ae,null,2)});if(!ne)return jsx$1(Loading,{message:"Collab contract"});const{split_contract:ce,tokens:le}=ne,ue=ce==null?void 0:ce.contract_address;return re&&["KT1CSfR6kx3uwDEXpwuCPnqp3MhpzfPmnLKj","KT1XhXv6jBpkahnvrtdiSi8foWXneWEjcz6F"].indexOf(re)>-1?jsx$1(Navigate,{to:`${PATH.ISSUER}/${re}`,replace:!0}):jsx$1(Fragment,{children:jsx$1(TokenCollection,{namespace:"collab-tokens",emptyMessage:"This collab has no OBJKT creations to display",swrParams:[ue],query:{tokens:le}})})},validAddress=re=>re.length?["tz","KT"].includes(re.substr(0,2))&&re.length===36:!1,extractAddress=re=>{let ee;return ee=/^.*(tz[\w\d]{34}).*$/i.exec(re.trim()),ee?ee[1]:(ee=/^.*(kt[\w\d]{34}).*$/i.exec(re.trim()),ee?ee[1]:!1)},groupShareTotal=re=>re.reduce((ee,ne)=>(ne.shares||0)+ee,0),TipSelector=({onSelect:re})=>jsx$1("div",{className:collabStyles.tipSelect,children:tipOptions.map(ee=>jsxs("button",{onClick:()=>re(ee),children:[ee,isNaN(ee)?"":"%"]},`btn-${ee}`))}),check_container="_check_container_1047g_216",checkmark="_checkmark_1047g_233",container$e="_container_1047g_261",small$1="_small_1047g_309",inputStyles={check_container,checkmark,container:container$e,small:small$1},BeneficiaryRow=({beneficiary:re,onUpdate:ee,onAdd:ne,onRemove:ae,onPasteMulti:ce,onSelectPercentage:le,minimalView:ue})=>{const[he,fe]=reactExports.useState(),[me,ge]=reactExports.useState(re.address),[ve,ye]=reactExports.useState(re.shares);reactExports.useEffect(()=>{const{address:ke,shares:Ne}=re;!he&&ke&&GetUserMetadata(ke).then(({data:Fe})=>fe(Fe)),he&&!ke&&fe(),ge(ke),ye(Ne)},[re,he]);const be=(ke,Ne)=>{if(Ne.replace(/\r/g,"").split(/\n/).length>1)ce(Ne);else{const De={...re,[ke]:isNaN(Ne)?Ne:Number(Ne)};ee(De)}},Ee=classNames$1(inputStyles.container,collabStyles.input),Ce=ke=>{ke.keyCode===13&&ne&&ne(re)},Te=(he?he.alias:null)||`${me?"":"(tz... or KT...)"}`;return ue?jsxs("tr",{className:collabStyles.row,children:[jsx$1("td",{className:collabStyles.addressCell,children:me}),jsxs("td",{className:collabStyles.sharesCell,children:[re.share,"%"]})]}):jsxs("tr",{className:collabStyles.row,children:[jsx$1("td",{className:collabStyles.addressCell,children:jsx$1("div",{className:Ee,children:jsxs("label",{children:[jsx$1("p",{children:"Address"}),jsx$1("textarea",{rows:1,value:me||"",className:collabStyles.textInput,placeholder:Te,onChange:ke=>be("address",ke.target.value)})]})})}),jsx$1("td",{className:collabStyles.sharesCell,children:jsxs("div",{className:Ee,children:[jsxs("label",{children:[jsx$1("p",{children:"Shares"}),jsx$1("input",{type:"number",placeholder:"(proportional)",value:ve||"",onKeyDown:Ce,onChange:ke=>be("shares",ke.target.value)})]}),!ve&&le&&jsx$1(TipSelector,{onSelect:le})]})}),jsx$1("td",{className:collabStyles.actionCell,children:jsx$1(Button,{onClick:ae,children:jsx$1(Secondary$1,{children:jsx$1(SvgClose,{})})})})]})},ProjectList=({beneficiaries:re,onSelect:ee})=>{const[ne,ae]=reactExports.useState(!1),ce=re.map(me=>me.address),le=re.filter(me=>me.address&&me.shares),ue=ossProjects.filter(me=>!ce.includes(me.address)),he=classNames$1(collabStyles.btn,{[collabStyles.muted]:ne||ue.length<ossProjects.length||le.length>0,[collabStyles.absolute]:ne}),fe=(me,ge)=>{ee(me,ge),ae(!1)};return ue.length>0?jsxs("div",{className:ne?collabStyles.projectList:null,children:[jsx$1("button",{className:he,onClick:()=>ae(!ne),children:jsx$1(Secondary$1,{children:ne?"Close":"Choose from popular projects"})}),ne&&jsx$1("ul",{className:collabStyles.list,children:ue.map(me=>{const{name:ge,address:ve}=me;return jsx$1("li",{children:jsx$1("button",{className:collabStyles.btn,onClick:()=>fe(ve,ge),children:ge})},ve)})})]}):null},AddCollaboratorsButton=({collaborators:re,onClick:ee,threshold:ne=2})=>{const ae=re.filter(ce=>!!ce.shares&&validAddress(ce.address));return jsx$1("div",{className:collabStyles.mt3,children:jsx$1(Button,{onClick:ee,disabled:ae.length<ne,className:collabStyles.btnSecondary,shadow_box:!0,children:ae.length===0?"Skip":"Next"})})},AddCollaboratorsButton$1=reactExports.memo(AddCollaboratorsButton),BeneficiariesUI=({beneficiaries:re,setBeneficiaries:ee,onSelectPercentage:ne,totalParticipants:ae,onComplete:ce})=>{const[le,ue]=reactExports.useState(""),he=(Se,Te)=>{typeof Se=="object"&&(Se="");const ke=re.filter(Fe=>Fe.address),Ne={...collaboratorTemplate,address:Se||"",name:Te};ee([...ke,Ne])},fe=Se=>{ne(Se,0);const Te=[...re];Te.splice(Se,1),ee(Te)},me=(Se,Te)=>{const ke=[...re];ke[Se]={...Te,share:Te.percentage},ee([...ke])};if(le.length){const Se=re.filter(De=>De.address).map(De=>De.address),ke=le.replace(/\r/g,"").split(/\n/).map(De=>extractAddress(De)).filter(De=>De),Fe=Se.concat(ke).map(De=>({...collaboratorTemplate,address:De}));ee(Fe),ue("")}const ge=classNames$1(collabStyles.mt3,{[collabStyles.mb1]:re.length===0,[collabStyles.mb2]:re.length>0}),ve=classNames$1(collabStyles.muted,{[collabStyles.mb1]:re.length===0,[collabStyles.mb2]:re.length>0}),ye=re.filter(Se=>Se.address&&Se.shares),be=re[re.length-1],Ee=be?!be.address:!0,Ce=ae===re.length;return jsxs(reactExports.Fragment,{children:[jsx$1("h2",{className:ge,children:jsx$1("strong",{children:"Beneficiaries"})}),re.length===0&&jsx$1("p",{className:ve,children:"Do you want to include anyone that wasn’t a collaborator, eg. the team who made the collab contract ;)"}),re.length===0&&jsx$1("button",{className:collabStyles.btn,onClick:he,children:jsx$1(Secondary$1,{children:"Add address manually"})}),re.length>0&&jsxs("table",{className:collabStyles.table,children:[jsx$1("tbody",{children:re.map((Se,Te)=>jsx$1(BeneficiaryRow,{beneficiary:Se,onUpdate:ke=>me(Te,ke),onRemove:()=>fe(Te),onAdd:he,onPasteMulti:ue,onSelectPercentage:Ce?null:ke=>ne(Te,ke)},`beneficiary-${Te}`))}),re.filter(Se=>Se.address).length>0&&jsx$1("tfoot",{children:jsx$1("tr",{children:jsx$1("td",{children:jsx$1("button",{className:collabStyles.btn,onClick:()=>he(),disabled:Ee,children:"Add another beneficiary"})})})})]}),jsx$1(ProjectList,{beneficiaries:re,onSelect:he}),ye.length>0&&ae>=2&&jsx$1(AddCollaboratorsButton$1,{threshold:1,collaborators:re,onClick:ce}),(ye.length===0||ae<2)&&jsxs("div",{className:collabStyles.mt2,children:[ae>=2&&jsx$1(Button,{shadow_box:!0,onClick:ce,children:"Skip"}),ae<2&&jsx$1("p",{className:collabStyles.muted,children:"You need to have at least two participants to create a collaborative contract"})]})]})},CollaboratorRow=({collaborator:re,onUpdate:ee,onAdd:ne,onRemove:ae,onPasteMulti:ce,minimalView:le,onEdit:ue})=>{const[he,fe]=reactExports.useState(),[me,ge]=reactExports.useState(re.address),[ve,ye]=reactExports.useState(re.shares),be=reactExports.useRef();reactExports.useEffect(()=>{const{address:Ne,shares:Fe}=re;ge(Ne),ye(Fe)},[re]),reactExports.useEffect(()=>{const Ne=validAddress(me);Ne&&!ve&&be.current&&be.current.focus(),Ne?(console.debug("valid address, checking meta",he,me),(!he||he&&he.tzprofile!==me)&&GetUserMetadata(me).then(({data:Fe})=>{console.debug("Data from user meta query",Fe),fe(Fe)})):fe()},[me,ve,he]);const Ee=(Ne,Fe)=>{if(Fe.replace(/\r/g,"").split(/\n/).length>1)ce(Fe);else{const Oe={...re,[Ne]:isNaN(Fe)?Fe:Number(Fe)};ee(Oe)}},Ce=classNames$1(inputStyles.container,collabStyles.input),Se=Ne=>{Ne.keyCode===13&&ne&&ne(re)},Te=he?he.alias:null,ke=Te||`${me?"":"(tz... or KT...)"}`;return le?jsxs("tr",{className:collabStyles.row,onClick:ue,children:[jsxs("td",{className:collabStyles.cellWithPadding,children:[Te&&jsx$1("p",{children:Te}),jsx$1("span",{children:me})]}),jsxs("td",{className:collabStyles.cellWithPadding,children:[re.shares," Shares"]})]}):jsxs("tr",{className:collabStyles.row,children:[jsx$1("td",{className:collabStyles.addressCell,children:jsx$1("div",{className:Ce,children:jsxs("label",{children:[jsx$1("p",{children:"Address"}),jsx$1("textarea",{rows:1,className:collabStyles.textInput,onChange:Ne=>Ee("address",Ne.target.value),placeholder:ke,value:me||""})]})})}),jsx$1("td",{className:collabStyles.sharesCell,children:jsx$1("div",{className:Ce,children:jsxs("label",{children:[jsx$1("p",{children:"Shares"}),jsx$1("input",{ref:be,type:"number",onChange:Ne=>Ee("shares",Ne.target.value),onKeyDown:Se,placeholder:"(proportional)",label:"shares",value:ve||""})]})})}),ae&&jsx$1("td",{className:collabStyles.actionCell,children:jsx$1(Button,{onClick:ae,children:jsx$1(Secondary$1,{children:jsx$1(SvgClose,{})})})})]})},CollaboratorTable=({collaborators:re,setCollaborators:ee,availableShares:ne,minimalView:ae,onEdit:ce})=>{const[le,ue]=reactExports.useState(""),[he,fe]=reactExports.useState(!1),me=()=>{ee([...re,{...collaboratorTemplate}]),ae&&ce()},ge=Ee=>{const Ce=[...re];Ce.splice(Ee,1),ee(Ce)},ve=(Ee,Ce)=>{const Se=[...re];Se.length>1&&Se.some((Te,ke)=>Te.address===Ce.address&&ke!==Ee)?console.debug("Address exists"):Se[Ee]=Ce,ee(Se)};reactExports.useEffect(()=>{if(le.length){const Ee=re.filter(Fe=>Fe.address).map(Fe=>Fe.address),Se=le.replace(/\r/g,"").split(/\n/).map(Fe=>extractAddress(Fe)).filter(Fe=>!!Fe&&Ee.indexOf(Fe)===-1),Te=Ee.concat(Se),ke=Math.floor(100/Te.length),Ne=Te.map(Fe=>({address:Fe,shares:ke}));fe(!0),ee(Ne),ue("")}re.length===0&&(he||ee([{...collaboratorTemplate}]))},[le,re,ee,he,fe]);const ye=re[re.length-1],be=ye?!ye.address:!0;return jsx$1("div",{children:jsxs("table",{className:collabStyles.table,children:[jsx$1("tbody",{children:re.map((Ee,Ce)=>jsx$1(CollaboratorRow,{collaborator:Ee,availableShares:ne,onUpdate:Se=>ve(Ce,Se),onRemove:()=>ge(Ce),onAdd:me,onEdit:ce,onPasteMulti:ue,minimalView:ae},`collaborator-${Ce}`))}),re.filter(Ee=>Ee.address).length>0&&jsx$1("tfoot",{children:jsx$1("tr",{children:jsx$1("td",{colSpan:ae?2:3,children:jsx$1("button",{className:collabStyles.btn,onClick:()=>me(),disabled:be,children:"Add another collaborator"})})})})]})})},ReviewStage=({collaborators:re,beneficiaries:ee,onEdit:ne})=>{const ae=groupShareTotal(re)+groupShareTotal(ee),ce=re.length,le=ee.length,ue=useCollabStore(fe=>fe.originateProxy),he=async()=>{const fe={},me=re.filter(ye=>ye.shares).map(ye=>({...ye,role:"collaborator"})),ge=ee.filter(ye=>ye.shares).map(ye=>({...ye,role:"benefactor"})),ve=me.concat(ge);Object.values(ve).forEach(ye=>fe[ye.address]={share:parseFloat(Math.floor(ye.shares*1e3)),isCore:ye.role==="collaborator"}),await ue(fe)};return jsxs(Container$3,{children:[jsx$1("h1",{className:collabStyles.mb1,children:jsx$1("strong",{children:"Review & Create"})}),jsxs("p",{className:collabStyles.descriptive,children:["You have a total of ",ae," shares divided between ",ce+le," ","addresses. Percentages may not total 100% due to rounding."]}),jsx$1("h2",{className:collabStyles.mt3,children:"Collaborators"}),re.length>0&&jsxs("table",{className:collabStyles.reviewTable,children:[jsx$1("thead",{children:jsxs("tr",{children:[jsx$1("th",{children:"Address"}),jsx$1("th",{children:"Shares"}),jsx$1("th",{style:{textAlign:"right"},children:"%"})]})}),jsx$1("tbody",{children:re.map(fe=>{const{address:me,shares:ge,name:ve}=fe,ye=(ge/ae*100).toFixed(2);return jsxs("tr",{children:[jsxs("td",{className:collabStyles.cellWithPadding,children:[ve&&jsx$1("p",{className:collabStyles.muted,children:ve}),me]}),jsx$1("td",{className:collabStyles.cellWithPadding,children:ge}),jsx$1("td",{className:collabStyles.cellWithPadding,style:{textAlign:"right"},children:ye})]},me)})})]}),re.length===0&&jsx$1("p",{className:collabStyles.muted,children:"No core collaborators"}),ee.length>0&&jsxs(reactExports.Fragment,{children:[jsx$1("h2",{className:collabStyles.mt3,children:"Beneficiaries"}),jsxs("table",{className:collabStyles.reviewTable,children:[jsx$1("thead",{children:jsxs("tr",{children:[jsx$1("th",{children:"Address"}),jsx$1("th",{children:"Shares"}),jsx$1("th",{style:{textAlign:"right"},children:"%"})]})}),jsx$1("tbody",{children:ee.map(fe=>{const{address:me,shares:ge,name:ve}=fe,ye=(ge/ae*100).toFixed(2);return jsxs("tr",{children:[jsxs("td",{className:collabStyles.cellWithPadding,children:[ve&&jsx$1("p",{className:collabStyles.muted,children:ve}),me]}),jsx$1("td",{className:collabStyles.cellWithPadding,children:ge}),jsx$1("td",{className:collabStyles.cellWithPadding,style:{textAlign:"right"},children:ye})]},me)})})]})]}),jsx$1("div",{className:collabStyles.mt3,children:jsx$1(Button,{shadow_box:!0,onClick:()=>he(),children:"Create collaborative contract"})}),jsx$1("button",{className:collabStyles.btn,onClick:ne,children:"< Go back"})]})},mb1="_mb1_3qkq2_216",mt1="_mt1_3qkq2_220",mb2="_mb2_3qkq2_224",mt2="_mt2_3qkq2_228",mb3="_mb3_3qkq2_232",mt3="_mt3_3qkq2_236",muted="_muted_3qkq2_240",tabs="_tabs_3qkq2_249",styles$v={mb1,mt1,mb2,mt2,mb3,mt3,muted,tabs},CreateCollaboration=()=>{const re=useUserStore(ke=>ke.address),[ee,ne]=reactExports.useState(!0),[ae,ce]=reactExports.useState([]),[le,ue]=reactExports.useState([]),[he,fe]=reactExports.useState(!1),[me,ge]=reactExports.useState(!1),ve=groupShareTotal(ae)+groupShareTotal(le),ye=ae.filter(ke=>!!ke.shares&&validAddress(ke.address));reactExports.useEffect(()=>{le.length===0&&fe(!1)},[me,le.length]),reactExports.useEffect(()=>{!ee&&!he&&fe(!0),ye.length===0&&ce([])},[ee,he,ye.length]);const be=(ke,Ne)=>{const Fe=le[ke],De=[...le];console.debug("_calculateShares",ke,Ne),De[ke]={...Fe,shares:Math.ceil(ve*Ne/100)};const Oe=ve-groupShareTotal(De),Re=ae.map(Be=>{const Le=Be.shares/groupShareTotal(ae),je=Math.floor(Le*Oe*100)/100;return{...Be,shares:je}});ue(De),ce(Re)},Ee=ye.length+le.length,Ce=classNames$1(styles$v.mb2,styles$v.muted),Se=!ee&&(he||me),Te=ee||ye.length>0;return re?me?jsx$1(ReviewStage,{collaborators:ye,beneficiaries:le,onEdit:()=>ge(!1)}):jsxs(Container$3,{children:[jsx$1("h1",{className:Te?styles$v.mb1:styles$v.mb2,children:jsx$1("strong",{children:"Core collaborators"})}),Te&&jsxs(reactExports.Fragment,{children:[jsx$1("p",{className:Ce,children:"Note: shares don’t have to add up to 100% - splits are calculated as proportions of the total shares."}),jsx$1("p",{className:Ce,children:"You can paste multiple addresses to get an auto split"})]}),Te&&jsx$1(CollaboratorTable,{collaborators:ee?ae:ye,setCollaborators:ce,minimalView:Se,onEdit:()=>ne(!0)}),!Te&&jsx$1("p",{className:styles$v.muted,children:jsx$1(Button,{onClick:()=>ne(!0),children:jsx$1(Secondary$1,{children:"No core collaborators - click to add"})})}),!Se&&jsx$1(AddCollaboratorsButton$1,{threshold:0,collaborators:ae,onClick:()=>ne(!1)}),he&&jsx$1(BeneficiariesUI,{totalParticipants:Ee,totalShares:ve,beneficiaries:le,setBeneficiaries:ue,minimalView:me,onComplete:()=>ge(!0),onSelectPercentage:(ke,Ne)=>be(ke,Ne)})]}):jsx$1(Container$3,{children:"Please sync your wallet to create a collaboration"})},CountdownTimer=({endDate:re,onComplete:ee})=>{const ne=()=>{const ue=Math.abs(re-new Date);return Math.floor(ue/1e3%60)},[ae,ce]=reactExports.useState(ne());return reactExports.useEffect(()=>{const le=setTimeout(()=>{const ue=ne();ce(ue)},1e3);return()=>clearTimeout(le)}),reactExports.useEffect(()=>{ae<=0&&ee()},[ae]),ae>0?`${ae}s`:"checking..."},CollabParticipantInfo=({collabData:re,expanded:ee=!1})=>{const[ne,ae]=useUserStore(Se=>[Se.proxyAddress,Se.address]),{administrator_address:ce,contract_address:le,contract_profile:ue,shareholders:he}=re,fe=ae===ce,me=he.filter(({holder_type:Se})=>Se===CollaboratorType.CORE_PARTICIPANT),ge=he.filter(({holder_type:Se})=>Se===CollaboratorType.BENEFACTOR),ve=classNames$1(collabStyles.flex,collabStyles.flexBetween,collabStyles.alignStart,collabStyles.mb2,{[collabStyles.border]:le===ne}),ye=classNames$1(collabStyles.flex,collabStyles.flexBetween,collabStyles.alignStart,collabStyles.fullWidth),be=get$5(ue,"name"),Ee=be||le,Ce=be?`/collab/${be}`:`${PATH.COLLAB}/${le}`;return jsx$1("li",{className:ve,children:jsxs("div",{className:collabStyles.fullWidth,children:[jsxs("div",{className:ye,children:[Ee&&jsx$1("h3",{children:jsx$1("strong",{children:jsx$1(Link,{to:Ce,children:Ee})})}),le!==ne&&fe&&jsx$1(Button,{shadow_box:!0,onClick:()=>useUserStore.setState({proxyAddress:le,proxyName:be}),children:"sign in"}),le===ne&&fe&&jsx$1(Button,{shadow_box:!0,onClick:()=>useUserStore.setState({proxyAddress:void 0,proxyName:void 0}),children:"sign out"})]}),!be&&fe&&jsxs("p",{children:["to set the name of this collab,"," ",le!==ne?"sign in and":""," visit"," ",jsx$1(Link,{to:"/subjkt",style:{textDecoration:"underline"},children:"settings"})]}),ee&&jsxs(reactExports.Fragment,{children:[jsxs("p",{children:[jsx$1("span",{className:collabStyles.infoLabel,children:"address:"}),jsx$1(Link,{className:collabStyles.link,to:`${PATH.ISSUER}/${le}`,children:le})]})," ",me.length>0&&jsx$1(ParticipantList$1,{title:"participants",participants:me}),ge.length>0&&jsx$1(ParticipantList$1,{title:"beneficiaries",participants:ge})]})]})},le)},CollabList=({description:re,collabs:ee})=>{const[ne,ae]=reactExports.useState(!1),ce=classNames$1(collabStyles.flex,collabStyles.flexBetween),le=classNames$1(collabStyles.borderBottom,collabStyles.mb3);return jsxs("div",{className:le,children:[jsxs("div",{className:ce,children:[re&&jsx$1("p",{className:collabStyles.mb1,children:re}),jsx$1("div",{className:collabStyles.mb2,children:jsx$1(Button,{shadow_box:!0,onClick:()=>ae(!ne),children:ne?"less detail":"more detail"})})]}),jsx$1("ul",{children:ee.map(ue=>jsx$1(CollabParticipantInfo,{collabData:ue,expanded:ne},ue.contract_address))})]})},CollabContractsOverview=({showAdminOnly:re=!1})=>{const ee=useUserStore(Ee=>Ee.address),[ne,ae,ce]=useCollabStore(Ee=>[Ee.originatedContract,Ee.originationOpHash,Ee.findOriginatedContractFromOpHash],shallow),[le,ue]=reactExports.useState([]),[he,fe]=reactExports.useState(!0),[me,ge]=reactExports.useState(30),[ve,ye]=reactExports.useState();reactExports.useEffect(()=>{if(!(ae&&!ve))return;const Ee=new Date;Ee.setTime(Ee.getTime()+me*1e3),ye(Ee)},[ae,ve,me]),reactExports.useEffect(()=>{ee&&(fe(!0),console.debug("Now checking for available collabs"),fetchGraphQL(getCollabsForAddress,"GetCollabs",{address:ee}).then(({data:Ee})=>{if(fe(!1),!Ee)return;const Ce=Ee.split_contracts||[],Se=Ce.filter(Ne=>Ne.administrator_address===ee),Te=Ce.filter(Ne=>Ne.administrator_address!==ee),ke=re?Ce.filter(Ne=>Ne.administrator_address===ee):[...Se,...Te];ue(ke)}))},[ee,ne,re]);const be=()=>{ce(ae),ge(10)};return jsxs(Container$3,{children:[ae&&ve&&jsxs("p",{className:collabStyles.mb3,children:["Collab contract creation in progress..."," ",jsx$1(CountdownTimer,{endDate:ve,onComplete:be})]}),ne&&jsxs("div",{className:collabStyles.mb3,children:[jsx$1("p",{children:jsx$1("strong",{children:"Collaborative contract created successfully!"})}),jsxs("p",{children:["Address: ",ne.address]})]}),le.length>0&&jsx$1(CollabList,{description:re?"you can mint with these collab contracts:":"you are part of these collab contracts:",collabs:le}),le.length===0&&!ae&&jsx$1("p",{children:he?"Looking for collabs...":"You are not a manager of any collaborations at the moment"})]})},TABS$4=[{title:"Manage",to:""},{title:"Create",to:"create"}],Collaborate=()=>{const re=useNavigate();return reactExports.useEffect(()=>{const ee=ae=>{console.debug({originationOpHash:ae}),ae&&re("/")};return useCollabStore.subscribe(ae=>ae.originationOpHash,ee)},[]),jsxs(Page,{title:"proxy",children:[jsx$1(Tabs,{className:styles$v.tabs,tabs:TABS$4}),jsx$1(Outlet,{})]})};function Input$1({type:re="text",placeholder:ee="placeholder",name:ne,min:ae,max:ce,maxlength:le=500,label:ue,onChange:he=Te=>null,onBlur:fe=()=>null,disabled:me,value:ge,children:ve,defaultValue:ye,pattern:be,onKeyDown:Ee,className:Ce},Se){const[Te,ke]=useControlled(ge,ye),Ne=reactExports.useCallback(Fe=>{he(Fe);const De=Fe.target;if(De){const Oe=re==="number"?isNaN(De.valueAsNumber)?De.value:De.valueAsNumber:De.value;ke(Oe),he(Oe)}},[ke,he,re]);return jsxs("div",{className:`${styles$x.container} ${Ce||""}`,children:[jsxs("label",{htmlFor:ne||ue||"",children:[jsx$1("p",{children:ue||ne||""}),jsx$1("input",{type:re,ref:Se,placeholder:ee,name:ne||ue||"",min:ae,max:ce,maxLength:le,defaultValue:ye,value:Te||"",onChange:Ne,onBlur:fe,pattern:be,onWheel:Fe=>Fe.target.blur(),onKeyDown:Ee,autoComplete:"off"})]}),ve]})}const Input$2=reactExports.memo(React.forwardRef(Input$1)),Textarea=reactExports.forwardRef(({type:re="text",placeholder:ee="placeholder",name:ne="input-name-not-set",min:ae,max:ce,children:le,maxlength:ue=5e4,label:he,onChange:fe=()=>null,onBlur:me=()=>null,disabled:ge,value:ve,className:ye},be)=>jsxs("div",{className:`${styles$x.container} ${ye||""}`,children:[jsxs("label",{htmlFor:ne,children:[jsx$1("p",{children:he}),jsx$1("textarea",{ref:be,type:re,placeholder:ee,name:ne,min:ae,max:ce,maxLength:ue,value:ve,onChange:fe,onBlur:me,disabled:ge})]}),le]})),Textarea$1=reactExports.memo(Textarea);function SimpleInput({type:re,label:ee,min:ne,max:ae,step:ce,minlength:le,maxlength:ue,placeholder:he,value:fe,onChange:me,pattern:ge,className:ve,children:ye}){const be=Ee=>{var Ce;return me(re==="file"?(Ce=Ee.target.files)==null?void 0:Ce[0]:Ee.target.value)};return jsxs("div",{className:`${styles$x.container} ${ve??""}`,children:[jsxs("label",{children:[jsx$1("p",{children:ee}),jsx$1("input",{type:re,min:ne,max:ae,step:ce,minLength:le,maxLength:ue,placeholder:he,value:fe,onChange:be,pattern:ge,autoComplete:"off"})]}),ye]})}function TransferFields({labels:re,placeholders:ee,transfers:ne,onChange:ae,className:ce,step:le,children:ue}){const he=(me,ge,ve)=>{const ye=ne.map(be=>({...be}));ye[me][ge]=ve,ae(ye)},fe=(me,ge)=>{me.preventDefault();const ve=ne.map(ye=>({...ye}));ge?ve.push({amount:"",destination:""}):ve.length>1&&ve.pop(),ae(ve)};return jsxs("div",{children:[ne.map((me,ge)=>jsxs("div",{children:[jsx$1(SimpleInput,{type:"number",label:`${re.amount} (${ge+1})`,placeholder:(ee==null?void 0:ee.amount)??"0",min:"0",step:le,value:me.amount,onChange:ve=>he(ge,"amount",ve),className:ce,children:ue}),jsx$1(SimpleInput,{type:"text",label:`${re.destination} (${ge+1})`,placeholder:(ee==null?void 0:ee.destination)??"tz1...",minlenght:"36",maxlength:"36",value:me.destination,onChange:ve=>he(ge,"destination",ve),className:ce,children:ue})]},ge)),jsx$1(IncrementButtons,{onClick:fe})]})}const subjkt_editor="_subjkt_editor_1l8zw_216",identicon="_identicon_1l8zw_229",title_line="_title_line_1l8zw_233",fields$1="_fields_1l8zw_239",localSettings="_localSettings_1l8zw_247",info$1="_info_1l8zw_257",explainer="_explainer_1l8zw_274",styles$u={subjkt_editor,identicon,title_line,fields:fields$1,localSettings,info:info$1,explainer},container$d="_container_4ijx1_216",label$1="_label_4ijx1_233",styles$t={container:container$d,label:label$1};function ownKeys(re,ee){var ne=Object.keys(re);if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(re);ee&&(ae=ae.filter(function(ce){return Object.getOwnPropertyDescriptor(re,ce).enumerable})),ne.push.apply(ne,ae)}return ne}function _objectSpread2(re){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee]!=null?arguments[ee]:{};ee%2?ownKeys(Object(ne),!0).forEach(function(ae){_defineProperty$2(re,ae,ne[ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(re,Object.getOwnPropertyDescriptors(ne)):ownKeys(Object(ne)).forEach(function(ae){Object.defineProperty(re,ae,Object.getOwnPropertyDescriptor(ne,ae))})}return re}var _excluded$5=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function useStateManager(re){var ee=re.defaultInputValue,ne=ee===void 0?"":ee,ae=re.defaultMenuIsOpen,ce=ae===void 0?!1:ae,le=re.defaultValue,ue=le===void 0?null:le,he=re.inputValue,fe=re.menuIsOpen,me=re.onChange,ge=re.onInputChange,ve=re.onMenuClose,ye=re.onMenuOpen,be=re.value,Ee=_objectWithoutProperties$1(re,_excluded$5),Ce=reactExports.useState(he!==void 0?he:ne),Se=_slicedToArray(Ce,2),Te=Se[0],ke=Se[1],Ne=reactExports.useState(fe!==void 0?fe:ce),Fe=_slicedToArray(Ne,2),De=Fe[0],Oe=Fe[1],Re=reactExports.useState(be!==void 0?be:ue),Be=_slicedToArray(Re,2),Le=Be[0],je=Be[1],Ge=reactExports.useCallback(function(We,Ze){typeof me=="function"&&me(We,Ze),je(We)},[me]),qe=reactExports.useCallback(function(We,Ze){var Vt;typeof ge=="function"&&(Vt=ge(We,Ze)),ke(Vt!==void 0?Vt:We)},[ge]),Ue=reactExports.useCallback(function(){typeof ye=="function"&&ye(),Oe(!0)},[ye]),ze=reactExports.useCallback(function(){typeof ve=="function"&&ve(),Oe(!1)},[ve]),He=he!==void 0?he:Te,Ye=fe!==void 0?fe:De,Xe=be!==void 0?be:Le;return _objectSpread2(_objectSpread2({},Ee),{},{inputValue:He,menuIsOpen:Ye,onChange:Ge,onInputChange:qe,onMenuClose:ze,onMenuOpen:Ue,value:Xe})}function _isNativeReflectConstruct(){try{var re=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!re})()}function _createSuper(re){var ee=_isNativeReflectConstruct();return function(){var ne,ae=_getPrototypeOf(re);if(ee){var ce=_getPrototypeOf(this).constructor;ne=Reflect.construct(ae,arguments,ce)}else ne=ae.apply(this,arguments);return _possibleConstructorReturn(this,ne)}}function sheetForTag(re){if(re.sheet)return re.sheet;for(var ee=0;ee<document.styleSheets.length;ee++)if(document.styleSheets[ee].ownerNode===re)return document.styleSheets[ee]}function createStyleElement(re){var ee=document.createElement("style");return ee.setAttribute("data-emotion",re.key),re.nonce!==void 0&&ee.setAttribute("nonce",re.nonce),ee.appendChild(document.createTextNode("")),ee.setAttribute("data-s",""),ee}var StyleSheet=function(){function re(ne){var ae=this;this._insertTag=function(ce){var le;ae.tags.length===0?ae.insertionPoint?le=ae.insertionPoint.nextSibling:ae.prepend?le=ae.container.firstChild:le=ae.before:le=ae.tags[ae.tags.length-1].nextSibling,ae.container.insertBefore(ce,le),ae.tags.push(ce)},this.isSpeedy=ne.speedy===void 0?!0:ne.speedy,this.tags=[],this.ctr=0,this.nonce=ne.nonce,this.key=ne.key,this.container=ne.container,this.prepend=ne.prepend,this.insertionPoint=ne.insertionPoint,this.before=null}var ee=re.prototype;return ee.hydrate=function(ae){ae.forEach(this._insertTag)},ee.insert=function(ae){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var ce=this.tags[this.tags.length-1];if(this.isSpeedy){var le=sheetForTag(ce);try{le.insertRule(ae,le.cssRules.length)}catch{}}else ce.appendChild(document.createTextNode(ae));this.ctr++},ee.flush=function(){this.tags.forEach(function(ae){return ae.parentNode&&ae.parentNode.removeChild(ae)}),this.tags=[],this.ctr=0},re}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(re,ee){return charat(re,0)^45?(((ee<<2^charat(re,0))<<2^charat(re,1))<<2^charat(re,2))<<2^charat(re,3):0}function trim(re){return re.trim()}function match(re,ee){return(re=ee.exec(re))?re[0]:re}function replace(re,ee,ne){return re.replace(ee,ne)}function indexof(re,ee){return re.indexOf(ee)}function charat(re,ee){return re.charCodeAt(ee)|0}function substr(re,ee,ne){return re.slice(ee,ne)}function strlen(re){return re.length}function sizeof(re){return re.length}function append(re,ee){return ee.push(re),re}function combine(re,ee){return re.map(ee).join("")}var line$2=1,column$1=1,length=0,position=0,character=0,characters="";function node(re,ee,ne,ae,ce,le,ue){return{value:re,root:ee,parent:ne,type:ae,props:ce,children:le,line:line$2,column:column$1,length:ue,return:""}}function copy(re,ee){return assign(node("",null,null,"",null,null,0),re,{length:-re.length},ee)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column$1--,character===10&&(column$1=1,line$2--),character}function next(){return character=position<length?charat(characters,position++):0,column$1++,character===10&&(column$1=1,line$2++),character}function peek$1(){return charat(characters,position)}function caret(){return position}function slice(re,ee){return substr(characters,re,ee)}function token$1(re){switch(re){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(re){return line$2=column$1=1,length=strlen(characters=re),position=0,[]}function dealloc(re){return characters="",re}function delimit(re){return trim(slice(position-1,delimiter(re===91?re+2:re===40?re+1:re)))}function whitespace(re){for(;(character=peek$1())&&character<33;)next();return token$1(re)>2||token$1(character)>3?"":" "}function escaping(re,ee){for(;--ee&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(re,caret()+(ee<6&&peek$1()==32&&next()==32))}function delimiter(re){for(;next();)switch(character){case re:return position;case 34:case 39:re!==34&&re!==39&&delimiter(character);break;case 40:re===41&&delimiter(re);break;case 92:next();break}return position}function commenter(re,ee){for(;next()&&re+character!==47+10;)if(re+character===42+42&&peek$1()===47)break;return"/*"+slice(ee,position-1)+"*"+from(re===47?re:next())}function identifier(re){for(;!token$1(peek$1());)next();return slice(re,position)}function compile(re){return dealloc(parse$1("",null,null,null,[""],re=alloc(re),0,[0],re))}function parse$1(re,ee,ne,ae,ce,le,ue,he,fe){for(var me=0,ge=0,ve=ue,ye=0,be=0,Ee=0,Ce=1,Se=1,Te=1,ke=0,Ne="",Fe=ce,De=le,Oe=ae,Re=Ne;Se;)switch(Ee=ke,ke=next()){case 40:if(Ee!=108&&charat(Re,ve-1)==58){indexof(Re+=replace(delimit(ke),"&","&\f"),"&\f")!=-1&&(Te=-1);break}case 34:case 39:case 91:Re+=delimit(ke);break;case 9:case 10:case 13:case 32:Re+=whitespace(Ee);break;case 92:Re+=escaping(caret()-1,7);continue;case 47:switch(peek$1()){case 42:case 47:append(comment(commenter(next(),caret()),ee,ne),fe);break;default:Re+="/"}break;case 123*Ce:he[me++]=strlen(Re)*Te;case 125*Ce:case 59:case 0:switch(ke){case 0:case 125:Se=0;case 59+ge:be>0&&strlen(Re)-ve&&append(be>32?declaration(Re+";",ae,ne,ve-1):declaration(replace(Re," ","")+";",ae,ne,ve-2),fe);break;case 59:Re+=";";default:if(append(Oe=ruleset(Re,ee,ne,me,ge,ce,he,Ne,Fe=[],De=[],ve),le),ke===123)if(ge===0)parse$1(Re,ee,Oe,Oe,Fe,le,ve,he,De);else switch(ye===99&&charat(Re,3)===110?100:ye){case 100:case 109:case 115:parse$1(re,Oe,Oe,ae&&append(ruleset(re,Oe,Oe,0,0,ce,he,Ne,ce,Fe=[],ve),De),ce,De,ve,he,ae?Fe:De);break;default:parse$1(Re,Oe,Oe,Oe,[""],De,0,he,De)}}me=ge=be=0,Ce=Te=1,Ne=Re="",ve=ue;break;case 58:ve=1+strlen(Re),be=Ee;default:if(Ce<1){if(ke==123)--Ce;else if(ke==125&&Ce++==0&&prev()==125)continue}switch(Re+=from(ke),ke*Ce){case 38:Te=ge>0?1:(Re+="\f",-1);break;case 44:he[me++]=(strlen(Re)-1)*Te,Te=1;break;case 64:peek$1()===45&&(Re+=delimit(next())),ye=peek$1(),ge=ve=strlen(Ne=Re+=identifier(caret())),ke++;break;case 45:Ee===45&&strlen(Re)==2&&(Ce=0)}}return le}function ruleset(re,ee,ne,ae,ce,le,ue,he,fe,me,ge){for(var ve=ce-1,ye=ce===0?le:[""],be=sizeof(ye),Ee=0,Ce=0,Se=0;Ee<ae;++Ee)for(var Te=0,ke=substr(re,ve+1,ve=abs(Ce=ue[Ee])),Ne=re;Te<be;++Te)(Ne=trim(Ce>0?ye[Te]+" "+ke:replace(ke,/&\f/g,ye[Te])))&&(fe[Se++]=Ne);return node(re,ee,ne,ce===0?RULESET:he,fe,me,ge)}function comment(re,ee,ne){return node(re,ee,ne,COMMENT,from(char()),substr(re,2,-2),0)}function declaration(re,ee,ne,ae){return node(re,ee,ne,DECLARATION,substr(re,0,ae),substr(re,ae+1,-1),ae)}function serialize(re,ee){for(var ne="",ae=sizeof(re),ce=0;ce<ae;ce++)ne+=ee(re[ce],ce,re,ee)||"";return ne}function stringify$1(re,ee,ne,ae){switch(re.type){case IMPORT:case DECLARATION:return re.return=re.return||re.value;case COMMENT:return"";case KEYFRAMES:return re.return=re.value+"{"+serialize(re.children,ae)+"}";case RULESET:re.value=re.props.join(",")}return strlen(ne=serialize(re.children,ae))?re.return=re.value+"{"+ne+"}":""}function middleware(re){var ee=sizeof(re);return function(ne,ae,ce,le){for(var ue="",he=0;he<ee;he++)ue+=re[he](ne,ae,ce,le)||"";return ue}}function rulesheet(re){return function(ee){ee.root||(ee=ee.return)&&re(ee)}}function memoize(re){var ee=Object.create(null);return function(ne){return ee[ne]===void 0&&(ee[ne]=re(ne)),ee[ne]}}var identifierWithPointTracking=function re(ee,ne,ae){for(var ce=0,le=0;ce=le,le=peek$1(),ce===38&&le===12&&(ne[ae]=1),!token$1(le);)next();return slice(ee,position)},toRules=function re(ee,ne){var ae=-1,ce=44;do switch(token$1(ce)){case 0:ce===38&&peek$1()===12&&(ne[ae]=1),ee[ae]+=identifierWithPointTracking(position-1,ne,ae);break;case 2:ee[ae]+=delimit(ce);break;case 4:if(ce===44){ee[++ae]=peek$1()===58?"&\f":"",ne[ae]=ee[ae].length;break}default:ee[ae]+=from(ce)}while(ce=next());return ee},getRules=function re(ee,ne){return dealloc(toRules(alloc(ee),ne))},fixedElements=new WeakMap,compat=function re(ee){if(!(ee.type!=="rule"||!ee.parent||ee.length<1)){for(var ne=ee.value,ae=ee.parent,ce=ee.column===ae.column&&ee.line===ae.line;ae.type!=="rule";)if(ae=ae.parent,!ae)return;if(!(ee.props.length===1&&ne.charCodeAt(0)!==58&&!fixedElements.get(ae))&&!ce){fixedElements.set(ee,!0);for(var le=[],ue=getRules(ne,le),he=ae.props,fe=0,me=0;fe<ue.length;fe++)for(var ge=0;ge<he.length;ge++,me++)ee.props[me]=le[fe]?ue[fe].replace(/&\f/g,he[ge]):he[ge]+" "+ue[fe]}}},removeLabel=function re(ee){if(ee.type==="decl"){var ne=ee.value;ne.charCodeAt(0)===108&&ne.charCodeAt(2)===98&&(ee.return="",ee.value="")}};function prefix(re,ee){switch(hash(re,ee)){case 5103:return WEBKIT+"print-"+re+re;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+re+re;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+re+MOZ+re+MS+re+re;case 6828:case 4268:return WEBKIT+re+MS+re+re;case 6165:return WEBKIT+re+MS+"flex-"+re+re;case 5187:return WEBKIT+re+replace(re,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+re;case 5443:return WEBKIT+re+MS+"flex-item-"+replace(re,/flex-|-self/,"")+re;case 4675:return WEBKIT+re+MS+"flex-line-pack"+replace(re,/align-content|flex-|-self/,"")+re;case 5548:return WEBKIT+re+MS+replace(re,"shrink","negative")+re;case 5292:return WEBKIT+re+MS+replace(re,"basis","preferred-size")+re;case 6060:return WEBKIT+"box-"+replace(re,"-grow","")+WEBKIT+re+MS+replace(re,"grow","positive")+re;case 4554:return WEBKIT+replace(re,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+re;case 6187:return replace(replace(replace(re,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),re,"")+re;case 5495:case 3959:return replace(re,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(re,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+re+re;case 4095:case 3583:case 4068:case 2532:return replace(re,/(.+)-inline(.+)/,WEBKIT+"$1$2")+re;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(re)-1-ee>6)switch(charat(re,ee+1)){case 109:if(charat(re,ee+4)!==45)break;case 102:return replace(re,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(re,ee+3)==108?"$3":"$2-$3"))+re;case 115:return~indexof(re,"stretch")?prefix(replace(re,"stretch","fill-available"),ee)+re:re}break;case 4949:if(charat(re,ee+1)!==115)break;case 6444:switch(charat(re,strlen(re)-3-(~indexof(re,"!important")&&10))){case 107:return replace(re,":",":"+WEBKIT)+re;case 101:return replace(re,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(re,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+re}break;case 5936:switch(charat(re,ee+11)){case 114:return WEBKIT+re+MS+replace(re,/[svh]\w+-[tblr]{2}/,"tb")+re;case 108:return WEBKIT+re+MS+replace(re,/[svh]\w+-[tblr]{2}/,"tb-rl")+re;case 45:return WEBKIT+re+MS+replace(re,/[svh]\w+-[tblr]{2}/,"lr")+re}return WEBKIT+re+MS+re+re}return re}var prefixer=function re(ee,ne,ae,ce){if(ee.length>-1&&!ee.return)switch(ee.type){case DECLARATION:ee.return=prefix(ee.value,ee.length);break;case KEYFRAMES:return serialize([copy(ee,{value:replace(ee.value,"@","@"+WEBKIT)})],ce);case RULESET:if(ee.length)return combine(ee.props,function(le){switch(match(le,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(ee,{props:[replace(le,/:(read-\w+)/,":"+MOZ+"$1")]})],ce);case"::placeholder":return serialize([copy(ee,{props:[replace(le,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(ee,{props:[replace(le,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(ee,{props:[replace(le,/:(plac\w+)/,MS+"input-$1")]})],ce)}return""})}},defaultStylisPlugins=[prefixer],createCache=function re(ee){var ne=ee.key;if(ne==="css"){var ae=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(ae,function(Ce){var Se=Ce.getAttribute("data-emotion");Se.indexOf(" ")!==-1&&(document.head.appendChild(Ce),Ce.setAttribute("data-s",""))})}var ce=ee.stylisPlugins||defaultStylisPlugins,le={},ue,he=[];ue=ee.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+ne+' "]'),function(Ce){for(var Se=Ce.getAttribute("data-emotion").split(" "),Te=1;Te<Se.length;Te++)le[Se[Te]]=!0;he.push(Ce)});var fe,me=[compat,removeLabel];{var ge,ve=[stringify$1,rulesheet(function(Ce){ge.insert(Ce)})],ye=middleware(me.concat(ce,ve)),be=function(Se){return serialize(compile(Se),ye)};fe=function(Se,Te,ke,Ne){ge=ke,be(Se?Se+"{"+Te.styles+"}":Te.styles),Ne&&(Ee.inserted[Te.name]=!0)}}var Ee={key:ne,sheet:new StyleSheet({key:ne,container:ue,nonce:ee.nonce,speedy:ee.speedy,prepend:ee.prepend,insertionPoint:ee.insertionPoint}),nonce:ee.nonce,inserted:le,registered:{},insert:fe};return Ee.sheet.hydrate(he),Ee},reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=typeof Symbol=="function"&&Symbol.for,c$1=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m$1=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w$1=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(re){if(typeof re=="object"&&re!==null){var ee=re.$$typeof;switch(ee){case c$1:switch(re=re.type,re){case l:case m$1:case e:case g:case f:case p:return re;default:switch(re=re&&re.$$typeof,re){case k:case n:case t:case r:case h:return re;default:return ee}}case d:return ee}}}function A(re){return z(re)===m$1}reactIs_production_min.AsyncMode=l;reactIs_production_min.ConcurrentMode=m$1;reactIs_production_min.ContextConsumer=k;reactIs_production_min.ContextProvider=h;reactIs_production_min.Element=c$1;reactIs_production_min.ForwardRef=n;reactIs_production_min.Fragment=e;reactIs_production_min.Lazy=t;reactIs_production_min.Memo=r;reactIs_production_min.Portal=d;reactIs_production_min.Profiler=g;reactIs_production_min.StrictMode=f;reactIs_production_min.Suspense=p;reactIs_production_min.isAsyncMode=function(re){return A(re)||z(re)===l};reactIs_production_min.isConcurrentMode=A;reactIs_production_min.isContextConsumer=function(re){return z(re)===k};reactIs_production_min.isContextProvider=function(re){return z(re)===h};reactIs_production_min.isElement=function(re){return typeof re=="object"&&re!==null&&re.$$typeof===c$1};reactIs_production_min.isForwardRef=function(re){return z(re)===n};reactIs_production_min.isFragment=function(re){return z(re)===e};reactIs_production_min.isLazy=function(re){return z(re)===t};reactIs_production_min.isMemo=function(re){return z(re)===r};reactIs_production_min.isPortal=function(re){return z(re)===d};reactIs_production_min.isProfiler=function(re){return z(re)===g};reactIs_production_min.isStrictMode=function(re){return z(re)===f};reactIs_production_min.isSuspense=function(re){return z(re)===p};reactIs_production_min.isValidElementType=function(re){return typeof re=="string"||typeof re=="function"||re===e||re===m$1||re===g||re===f||re===p||re===q||typeof re=="object"&&re!==null&&(re.$$typeof===t||re.$$typeof===r||re.$$typeof===h||re.$$typeof===k||re.$$typeof===n||re.$$typeof===w$1||re.$$typeof===x||re.$$typeof===y||re.$$typeof===v)};reactIs_production_min.typeOf=z;reactIs$1.exports=reactIs_production_min;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser=!0;function getRegisteredStyles(re,ee,ne){var ae="";return ne.split(" ").forEach(function(ce){re[ce]!==void 0?ee.push(re[ce]+";"):ae+=ce+" "}),ae}var registerStyles=function re(ee,ne,ae){var ce=ee.key+"-"+ne.name;(ae===!1||isBrowser===!1)&&ee.registered[ce]===void 0&&(ee.registered[ce]=ne.styles)},insertStyles=function re(ee,ne,ae){registerStyles(ee,ne,ae);var ce=ee.key+"-"+ne.name;if(ee.inserted[ne.name]===void 0){var le=ne;do ee.insert(ne===le?"."+ce:"",le,ee.sheet,!0),le=le.next;while(le!==void 0)}};function murmur2(re){for(var ee=0,ne,ae=0,ce=re.length;ce>=4;++ae,ce-=4)ne=re.charCodeAt(ae)&255|(re.charCodeAt(++ae)&255)<<8|(re.charCodeAt(++ae)&255)<<16|(re.charCodeAt(++ae)&255)<<24,ne=(ne&65535)*1540483477+((ne>>>16)*59797<<16),ne^=ne>>>24,ee=(ne&65535)*1540483477+((ne>>>16)*59797<<16)^(ee&65535)*1540483477+((ee>>>16)*59797<<16);switch(ce){case 3:ee^=(re.charCodeAt(ae+2)&255)<<16;case 2:ee^=(re.charCodeAt(ae+1)&255)<<8;case 1:ee^=re.charCodeAt(ae)&255,ee=(ee&65535)*1540483477+((ee>>>16)*59797<<16)}return ee^=ee>>>13,ee=(ee&65535)*1540483477+((ee>>>16)*59797<<16),((ee^ee>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function re(ee){return ee.charCodeAt(1)===45},isProcessableValue=function re(ee){return ee!=null&&typeof ee!="boolean"},processStyleName=memoize(function(re){return isCustomProperty(re)?re:re.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function re(ee,ne){switch(ee){case"animation":case"animationName":if(typeof ne=="string")return ne.replace(animationRegex,function(ae,ce,le){return cursor={name:ce,styles:le,next:cursor},ce})}return unitlessKeys[ee]!==1&&!isCustomProperty(ee)&&typeof ne=="number"&&ne!==0?ne+"px":ne},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(re,ee,ne){if(ne==null)return"";if(ne.__emotion_styles!==void 0)return ne;switch(typeof ne){case"boolean":return"";case"object":{if(ne.anim===1)return cursor={name:ne.name,styles:ne.styles,next:cursor},ne.name;if(ne.styles!==void 0){var ae=ne.next;if(ae!==void 0)for(;ae!==void 0;)cursor={name:ae.name,styles:ae.styles,next:cursor},ae=ae.next;var ce=ne.styles+";";return ce}return createStringFromObject(re,ee,ne)}case"function":{if(re!==void 0){var le=cursor,ue=ne(re);return cursor=le,handleInterpolation(re,ee,ue)}break}}if(ee==null)return ne;var he=ee[ne];return he!==void 0?he:ne}function createStringFromObject(re,ee,ne){var ae="";if(Array.isArray(ne))for(var ce=0;ce<ne.length;ce++)ae+=handleInterpolation(re,ee,ne[ce])+";";else for(var le in ne){var ue=ne[le];if(typeof ue!="object")ee!=null&&ee[ue]!==void 0?ae+=le+"{"+ee[ue]+"}":isProcessableValue(ue)&&(ae+=processStyleName(le)+":"+processStyleValue(le,ue)+";");else if(Array.isArray(ue)&&typeof ue[0]=="string"&&(ee==null||ee[ue[0]]===void 0))for(var he=0;he<ue.length;he++)isProcessableValue(ue[he])&&(ae+=processStyleName(le)+":"+processStyleValue(le,ue[he])+";");else{var fe=handleInterpolation(re,ee,ue);switch(le){case"animation":case"animationName":{ae+=processStyleName(le)+":"+fe+";";break}default:ae+=le+"{"+fe+"}"}}}return ae}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function re(ee,ne,ae){if(ee.length===1&&typeof ee[0]=="object"&&ee[0]!==null&&ee[0].styles!==void 0)return ee[0];var ce=!0,le="";cursor=void 0;var ue=ee[0];ue==null||ue.raw===void 0?(ce=!1,le+=handleInterpolation(ae,ne,ue)):le+=ue[0];for(var he=1;he<ee.length;he++)le+=handleInterpolation(ae,ne,ee[he]),ce&&(le+=ue[he]);labelPattern.lastIndex=0;for(var fe="",me;(me=labelPattern.exec(le))!==null;)fe+="-"+me[1];var ge=murmur2(le)+fe;return{name:ge,styles:le,next:cursor}},syncFallback=function re(ee){return ee()},useInsertionEffect=React$1["useInsertionEffect"]?React$1["useInsertionEffect"]:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,hasOwnProperty$4={}.hasOwnProperty,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function re(ee){return reactExports.forwardRef(function(ne,ae){var ce=reactExports.useContext(EmotionCacheContext);return ee(ne,ce,ae)})},ThemeContext=reactExports.createContext({}),typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function re(ee,ne){var ae={};for(var ce in ne)hasOwnProperty$4.call(ne,ce)&&(ae[ce]=ne[ce]);return ae[typePropName]=ee,ae},Insertion=function re(ee){var ne=ee.cache,ae=ee.serialized,ce=ee.isStringTag;return registerStyles(ne,ae,ce),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(ne,ae,ce)}),null},Emotion=withEmotionCache(function(re,ee,ne){var ae=re.css;typeof ae=="string"&&ee.registered[ae]!==void 0&&(ae=ee.registered[ae]);var ce=re[typePropName],le=[ae],ue="";typeof re.className=="string"?ue=getRegisteredStyles(ee.registered,le,re.className):re.className!=null&&(ue=re.className+" ");var he=serializeStyles(le,void 0,reactExports.useContext(ThemeContext));ue+=ee.key+"-"+he.name;var fe={};for(var me in re)hasOwnProperty$4.call(re,me)&&me!=="css"&&me!==typePropName&&(fe[me]=re[me]);return fe.ref=ne,fe.className=ue,reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:ee,serialized:he,isStringTag:typeof ce=="string"}),reactExports.createElement(ce,fe))}),jsx=function re(ee,ne){var ae=arguments;if(ne==null||!hasOwnProperty$4.call(ne,"css"))return reactExports.createElement.apply(void 0,ae);var ce=ae.length,le=new Array(ce);le[0]=Emotion,le[1]=createEmotionProps(ee,ne);for(var ue=2;ue<ce;ue++)le[ue]=ae[ue];return reactExports.createElement.apply(null,le)};function css$2(){for(var re=arguments.length,ee=new Array(re),ne=0;ne<re;ne++)ee[ne]=arguments[ne];return serializeStyles(ee)}var keyframes=function re(){var ee=css$2.apply(void 0,arguments),ne="animation-"+ee.name;return{name:ne,styles:"@keyframes "+ne+"{"+ee.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function _taggedTemplateLiteral(re,ee){return ee||(ee=re.slice(0)),Object.freeze(Object.defineProperties(re,{raw:{value:Object.freeze(ee)}}))}const min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=re=>({x:re,y:re});function rectToClientRect(re){return{...re,top:re.y,left:re.x,right:re.x+re.width,bottom:re.y+re.height}}function getNodeName(re){return isNode(re)?(re.nodeName||"").toLowerCase():"#document"}function getWindow(re){var ee;return(re==null||(ee=re.ownerDocument)==null?void 0:ee.defaultView)||window}function getDocumentElement(re){var ee;return(ee=(isNode(re)?re.ownerDocument:re.document)||window.document)==null?void 0:ee.documentElement}function isNode(re){return re instanceof Node||re instanceof getWindow(re).Node}function isElement(re){return re instanceof Element||re instanceof getWindow(re).Element}function isHTMLElement$1(re){return re instanceof HTMLElement||re instanceof getWindow(re).HTMLElement}function isShadowRoot(re){return typeof ShadowRoot>"u"?!1:re instanceof ShadowRoot||re instanceof getWindow(re).ShadowRoot}function isOverflowElement(re){const{overflow:ee,overflowX:ne,overflowY:ae,display:ce}=getComputedStyle$1(re);return/auto|scroll|overlay|hidden|clip/.test(ee+ae+ne)&&!["inline","contents"].includes(ce)}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(re){return["html","body","#document"].includes(getNodeName(re))}function getComputedStyle$1(re){return getWindow(re).getComputedStyle(re)}function getParentNode(re){if(getNodeName(re)==="html")return re;const ee=re.assignedSlot||re.parentNode||isShadowRoot(re)&&re.host||getDocumentElement(re);return isShadowRoot(ee)?ee.host:ee}function getNearestOverflowAncestor(re){const ee=getParentNode(re);return isLastTraversableNode(ee)?re.ownerDocument?re.ownerDocument.body:re.body:isHTMLElement$1(ee)&&isOverflowElement(ee)?ee:getNearestOverflowAncestor(ee)}function getOverflowAncestors(re,ee,ne){var ae;ee===void 0&&(ee=[]),ne===void 0&&(ne=!0);const ce=getNearestOverflowAncestor(re),le=ce===((ae=re.ownerDocument)==null?void 0:ae.body),ue=getWindow(ce);return le?ee.concat(ue,ue.visualViewport||[],isOverflowElement(ce)?ce:[],ue.frameElement&&ne?getOverflowAncestors(ue.frameElement):[]):ee.concat(ce,getOverflowAncestors(ce,[],ne))}function getCssDimensions(re){const ee=getComputedStyle$1(re);let ne=parseFloat(ee.width)||0,ae=parseFloat(ee.height)||0;const ce=isHTMLElement$1(re),le=ce?re.offsetWidth:ne,ue=ce?re.offsetHeight:ae,he=round(ne)!==le||round(ae)!==ue;return he&&(ne=le,ae=ue),{width:ne,height:ae,$:he}}function unwrapElement(re){return isElement(re)?re:re.contextElement}function getScale(re){const ee=unwrapElement(re);if(!isHTMLElement$1(ee))return createCoords(1);const ne=ee.getBoundingClientRect(),{width:ae,height:ce,$:le}=getCssDimensions(ee);let ue=(le?round(ne.width):ne.width)/ae,he=(le?round(ne.height):ne.height)/ce;return(!ue||!Number.isFinite(ue))&&(ue=1),(!he||!Number.isFinite(he))&&(he=1),{x:ue,y:he}}const noOffsets=createCoords(0);function getVisualOffsets(re){const ee=getWindow(re);return!isWebKit()||!ee.visualViewport?noOffsets:{x:ee.visualViewport.offsetLeft,y:ee.visualViewport.offsetTop}}function shouldAddVisualOffsets(re,ee,ne){return ee===void 0&&(ee=!1),!ne||ee&&ne!==getWindow(re)?!1:ee}function getBoundingClientRect(re,ee,ne,ae){ee===void 0&&(ee=!1),ne===void 0&&(ne=!1);const ce=re.getBoundingClientRect(),le=unwrapElement(re);let ue=createCoords(1);ee&&(ae?isElement(ae)&&(ue=getScale(ae)):ue=getScale(re));const he=shouldAddVisualOffsets(le,ne,ae)?getVisualOffsets(le):createCoords(0);let fe=(ce.left+he.x)/ue.x,me=(ce.top+he.y)/ue.y,ge=ce.width/ue.x,ve=ce.height/ue.y;if(le){const ye=getWindow(le),be=ae&&isElement(ae)?getWindow(ae):ae;let Ee=ye.frameElement;for(;Ee&&ae&&be!==ye;){const Ce=getScale(Ee),Se=Ee.getBoundingClientRect(),Te=getComputedStyle$1(Ee),ke=Se.left+(Ee.clientLeft+parseFloat(Te.paddingLeft))*Ce.x,Ne=Se.top+(Ee.clientTop+parseFloat(Te.paddingTop))*Ce.y;fe*=Ce.x,me*=Ce.y,ge*=Ce.x,ve*=Ce.y,fe+=ke,me+=Ne,Ee=getWindow(Ee).frameElement}}return rectToClientRect({width:ge,height:ve,x:fe,y:me})}function observeMove(re,ee){let ne=null,ae;const ce=getDocumentElement(re);function le(){var he;clearTimeout(ae),(he=ne)==null||he.disconnect(),ne=null}function ue(he,fe){he===void 0&&(he=!1),fe===void 0&&(fe=1),le();const{left:me,top:ge,width:ve,height:ye}=re.getBoundingClientRect();if(he||ee(),!ve||!ye)return;const be=floor(ge),Ee=floor(ce.clientWidth-(me+ve)),Ce=floor(ce.clientHeight-(ge+ye)),Se=floor(me),ke={rootMargin:-be+"px "+-Ee+"px "+-Ce+"px "+-Se+"px",threshold:max(0,min(1,fe))||1};let Ne=!0;function Fe(De){const Oe=De[0].intersectionRatio;if(Oe!==fe){if(!Ne)return ue();Oe?ue(!1,Oe):ae=setTimeout(()=>{ue(!1,1e-7)},100)}Ne=!1}try{ne=new IntersectionObserver(Fe,{...ke,root:ce.ownerDocument})}catch{ne=new IntersectionObserver(Fe,ke)}ne.observe(re)}return ue(!0),le}function autoUpdate(re,ee,ne,ae){ae===void 0&&(ae={});const{ancestorScroll:ce=!0,ancestorResize:le=!0,elementResize:ue=typeof ResizeObserver=="function",layoutShift:he=typeof IntersectionObserver=="function",animationFrame:fe=!1}=ae,me=unwrapElement(re),ge=ce||le?[...me?getOverflowAncestors(me):[],...getOverflowAncestors(ee)]:[];ge.forEach(Te=>{ce&&Te.addEventListener("scroll",ne,{passive:!0}),le&&Te.addEventListener("resize",ne)});const ve=me&&he?observeMove(me,ne):null;let ye=-1,be=null;ue&&(be=new ResizeObserver(Te=>{let[ke]=Te;ke&&ke.target===me&&be&&(be.unobserve(ee),cancelAnimationFrame(ye),ye=requestAnimationFrame(()=>{var Ne;(Ne=be)==null||Ne.observe(ee)})),ne()}),me&&!fe&&be.observe(me),be.observe(ee));let Ee,Ce=fe?getBoundingClientRect(re):null;fe&&Se();function Se(){const Te=getBoundingClientRect(re);Ce&&(Te.x!==Ce.x||Te.y!==Ce.y||Te.width!==Ce.width||Te.height!==Ce.height)&&ne(),Ce=Te,Ee=requestAnimationFrame(Se)}return ne(),()=>{var Te;ge.forEach(ke=>{ce&&ke.removeEventListener("scroll",ne),le&&ke.removeEventListener("resize",ne)}),ve==null||ve(),(Te=be)==null||Te.disconnect(),be=null,fe&&cancelAnimationFrame(Ee)}}var index$1=reactExports.useLayoutEffect,_excluded$3=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],noop$2=function re(){};function applyPrefixToName(re,ee){return ee?ee[0]==="-"?re+ee:re+"__"+ee:re}function classNames(re,ee){for(var ne=arguments.length,ae=new Array(ne>2?ne-2:0),ce=2;ce<ne;ce++)ae[ce-2]=arguments[ce];var le=[].concat(ae);if(ee&&re)for(var ue in ee)ee.hasOwnProperty(ue)&&ee[ue]&&le.push("".concat(applyPrefixToName(re,ue)));return le.filter(function(he){return he}).map(function(he){return String(he).trim()}).join(" ")}var cleanValue=function re(ee){return isArray$7(ee)?ee.filter(Boolean):_typeof(ee)==="object"&&ee!==null?[ee]:[]},cleanCommonProps=function re(ee){ee.className,ee.clearValue,ee.cx,ee.getStyles,ee.getClassNames,ee.getValue,ee.hasValue,ee.isMulti,ee.isRtl,ee.options,ee.selectOption,ee.selectProps,ee.setValue,ee.theme;var ne=_objectWithoutProperties$1(ee,_excluded$3);return _objectSpread2({},ne)},getStyleProps=function re(ee,ne,ae){var ce=ee.cx,le=ee.getStyles,ue=ee.getClassNames,he=ee.className;return{css:le(ne,ee),className:ce(ae??{},ue(ne,ee),he)}};function isDocumentElement(re){return[document.documentElement,document.body,window].indexOf(re)>-1}function normalizedHeight(re){return isDocumentElement(re)?window.innerHeight:re.clientHeight}function getScrollTop(re){return isDocumentElement(re)?window.pageYOffset:re.scrollTop}function scrollTo(re,ee){if(isDocumentElement(re)){window.scrollTo(0,ee);return}re.scrollTop=ee}function getScrollParent(re){var ee=getComputedStyle(re),ne=ee.position==="absolute",ae=/(auto|scroll)/;if(ee.position==="fixed")return document.documentElement;for(var ce=re;ce=ce.parentElement;)if(ee=getComputedStyle(ce),!(ne&&ee.position==="static")&&ae.test(ee.overflow+ee.overflowY+ee.overflowX))return ce;return document.documentElement}function easeOutCubic(re,ee,ne,ae){return ne*((re=re/ae-1)*re*re+1)+ee}function animatedScrollTo(re,ee){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:noop$2,ce=getScrollTop(re),le=ee-ce,ue=10,he=0;function fe(){he+=ue;var me=easeOutCubic(he,ce,le,ne);scrollTo(re,me),he<ne?window.requestAnimationFrame(fe):ae(re)}fe()}function scrollIntoView(re,ee){var ne=re.getBoundingClientRect(),ae=ee.getBoundingClientRect(),ce=ee.offsetHeight/3;ae.bottom+ce>ne.bottom?scrollTo(re,Math.min(ee.offsetTop+ee.clientHeight-re.offsetHeight+ce,re.scrollHeight)):ae.top-ce<ne.top&&scrollTo(re,Math.max(ee.offsetTop-ce,0))}function getBoundingClientObj(re){var ee=re.getBoundingClientRect();return{bottom:ee.bottom,height:ee.height,left:ee.left,right:ee.right,top:ee.top,width:ee.width}}function isTouchCapable(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function isMobileDevice(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var passiveOptionAccessed=!1,options={get passive(){return passiveOptionAccessed=!0}},w=typeof window<"u"?window:{};w.addEventListener&&w.removeEventListener&&(w.addEventListener("p",noop$2,options),w.removeEventListener("p",noop$2,!1));var supportsPassiveEvents=passiveOptionAccessed;function notNullish(re){return re!=null}function isArray$7(re){return Array.isArray(re)}function valueTernary(re,ee,ne){return re?ee:ne}function singleValueAsValue(re){return re}function multiValueAsValue(re){return re}var removeProps=function re(ee){for(var ne=arguments.length,ae=new Array(ne>1?ne-1:0),ce=1;ce<ne;ce++)ae[ce-1]=arguments[ce];var le=Object.entries(ee).filter(function(ue){var he=_slicedToArray(ue,1),fe=he[0];return!ae.includes(fe)});return le.reduce(function(ue,he){var fe=_slicedToArray(he,2),me=fe[0],ge=fe[1];return ue[me]=ge,ue},{})};function getMenuPlacement(re){var ee=re.maxHeight,ne=re.menuEl,ae=re.minHeight,ce=re.placement,le=re.shouldScroll,ue=re.isFixedPosition,he=re.controlHeight,fe=getScrollParent(ne),me={placement:"bottom",maxHeight:ee};if(!ne||!ne.offsetParent)return me;var ge=fe.getBoundingClientRect(),ve=ge.height,ye=ne.getBoundingClientRect(),be=ye.bottom,Ee=ye.height,Ce=ye.top,Se=ne.offsetParent.getBoundingClientRect(),Te=Se.top,ke=ue?window.innerHeight:normalizedHeight(fe),Ne=getScrollTop(fe),Fe=parseInt(getComputedStyle(ne).marginBottom,10),De=parseInt(getComputedStyle(ne).marginTop,10),Oe=Te-De,Re=ke-Ce,Be=Oe+Ne,Le=ve-Ne-Ce,je=be-ke+Ne+Fe,Ge=Ne+Ce-De,qe=160;switch(ce){case"auto":case"bottom":if(Re>=Ee)return{placement:"bottom",maxHeight:ee};if(Le>=Ee&&!ue)return le&&animatedScrollTo(fe,je,qe),{placement:"bottom",maxHeight:ee};if(!ue&&Le>=ae||ue&&Re>=ae){le&&animatedScrollTo(fe,je,qe);var Ue=ue?Re-Fe:Le-Fe;return{placement:"bottom",maxHeight:Ue}}if(ce==="auto"||ue){var ze=ee,He=ue?Oe:Be;return He>=ae&&(ze=Math.min(He-Fe-he,ee)),{placement:"top",maxHeight:ze}}if(ce==="bottom")return le&&scrollTo(fe,je),{placement:"bottom",maxHeight:ee};break;case"top":if(Oe>=Ee)return{placement:"top",maxHeight:ee};if(Be>=Ee&&!ue)return le&&animatedScrollTo(fe,Ge,qe),{placement:"top",maxHeight:ee};if(!ue&&Be>=ae||ue&&Oe>=ae){var Ye=ee;return(!ue&&Be>=ae||ue&&Oe>=ae)&&(Ye=ue?Oe-De:Be-De),le&&animatedScrollTo(fe,Ge,qe),{placement:"top",maxHeight:Ye}}return{placement:"bottom",maxHeight:ee};default:throw new Error('Invalid placement provided "'.concat(ce,'".'))}return me}function alignToControl(re){var ee={bottom:"top",top:"bottom"};return re?ee[re]:"bottom"}var coercePlacement=function re(ee){return ee==="auto"?"bottom":ee},menuCSS=function re(ee,ne){var ae,ce=ee.placement,le=ee.theme,ue=le.borderRadius,he=le.spacing,fe=le.colors;return _objectSpread2((ae={label:"menu"},_defineProperty$2(ae,alignToControl(ce),"100%"),_defineProperty$2(ae,"position","absolute"),_defineProperty$2(ae,"width","100%"),_defineProperty$2(ae,"zIndex",1),ae),ne?{}:{backgroundColor:fe.neutral0,borderRadius:ue,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:he.menuGutter,marginTop:he.menuGutter})},PortalPlacementContext=reactExports.createContext(null),MenuPlacer=function re(ee){var ne=ee.children,ae=ee.minMenuHeight,ce=ee.maxMenuHeight,le=ee.menuPlacement,ue=ee.menuPosition,he=ee.menuShouldScrollIntoView,fe=ee.theme,me=reactExports.useContext(PortalPlacementContext)||{},ge=me.setPortalPlacement,ve=reactExports.useRef(null),ye=reactExports.useState(ce),be=_slicedToArray(ye,2),Ee=be[0],Ce=be[1],Se=reactExports.useState(null),Te=_slicedToArray(Se,2),ke=Te[0],Ne=Te[1],Fe=fe.spacing.controlHeight;return index$1(function(){var De=ve.current;if(De){var Oe=ue==="fixed",Re=he&&!Oe,Be=getMenuPlacement({maxHeight:ce,menuEl:De,minHeight:ae,placement:le,shouldScroll:Re,isFixedPosition:Oe,controlHeight:Fe});Ce(Be.maxHeight),Ne(Be.placement),ge==null||ge(Be.placement)}},[ce,le,ue,he,ae,ge,Fe]),ne({ref:ve,placerProps:_objectSpread2(_objectSpread2({},ee),{},{placement:ke||coercePlacement(le),maxHeight:Ee})})},Menu$1=function re(ee){var ne=ee.children,ae=ee.innerRef,ce=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"menu",{menu:!0}),{ref:ae},ce),ne)},menuListCSS=function re(ee,ne){var ae=ee.maxHeight,ce=ee.theme.spacing.baseUnit;return _objectSpread2({maxHeight:ae,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},ne?{}:{paddingBottom:ce,paddingTop:ce})},MenuList=function re(ee){var ne=ee.children,ae=ee.innerProps,ce=ee.innerRef,le=ee.isMulti;return jsx("div",_extends$2({},getStyleProps(ee,"menuList",{"menu-list":!0,"menu-list--is-multi":le}),{ref:ce},ae),ne)},noticeCSS=function re(ee,ne){var ae=ee.theme,ce=ae.spacing.baseUnit,le=ae.colors;return _objectSpread2({textAlign:"center"},ne?{}:{color:le.neutral40,padding:"".concat(ce*2,"px ").concat(ce*3,"px")})},noOptionsMessageCSS=noticeCSS,loadingMessageCSS=noticeCSS,NoOptionsMessage=function re(ee){var ne=ee.children,ae=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),ae),ne)};NoOptionsMessage.defaultProps={children:"No options"};var LoadingMessage=function re(ee){var ne=ee.children,ae=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),ae),ne)};LoadingMessage.defaultProps={children:"Loading..."};var menuPortalCSS=function re(ee){var ne=ee.rect,ae=ee.offset,ce=ee.position;return{left:ne.left,position:ce,top:ae,width:ne.width,zIndex:1}},MenuPortal=function re(ee){var ne=ee.appendTo,ae=ee.children,ce=ee.controlElement,le=ee.innerProps,ue=ee.menuPlacement,he=ee.menuPosition,fe=reactExports.useRef(null),me=reactExports.useRef(null),ge=reactExports.useState(coercePlacement(ue)),ve=_slicedToArray(ge,2),ye=ve[0],be=ve[1],Ee=reactExports.useMemo(function(){return{setPortalPlacement:be}},[]),Ce=reactExports.useState(null),Se=_slicedToArray(Ce,2),Te=Se[0],ke=Se[1],Ne=reactExports.useCallback(function(){if(ce){var Re=getBoundingClientObj(ce),Be=he==="fixed"?0:window.pageYOffset,Le=Re[ye]+Be;(Le!==(Te==null?void 0:Te.offset)||Re.left!==(Te==null?void 0:Te.rect.left)||Re.width!==(Te==null?void 0:Te.rect.width))&&ke({offset:Le,rect:Re})}},[ce,he,ye,Te==null?void 0:Te.offset,Te==null?void 0:Te.rect.left,Te==null?void 0:Te.rect.width]);index$1(function(){Ne()},[Ne]);var Fe=reactExports.useCallback(function(){typeof me.current=="function"&&(me.current(),me.current=null),ce&&fe.current&&(me.current=autoUpdate(ce,fe.current,Ne,{elementResize:"ResizeObserver"in window}))},[ce,Ne]);index$1(function(){Fe()},[Fe]);var De=reactExports.useCallback(function(Re){fe.current=Re,Fe()},[Fe]);if(!ne&&he!=="fixed"||!Te)return null;var Oe=jsx("div",_extends$2({ref:De},getStyleProps(_objectSpread2(_objectSpread2({},ee),{},{offset:Te.offset,position:he,rect:Te.rect}),"menuPortal",{"menu-portal":!0}),le),ae);return jsx(PortalPlacementContext.Provider,{value:Ee},ne?reactDomExports.createPortal(Oe,ne):Oe)},containerCSS=function re(ee){var ne=ee.isDisabled,ae=ee.isRtl;return{label:"container",direction:ae?"rtl":void 0,pointerEvents:ne?"none":void 0,position:"relative"}},SelectContainer=function re(ee){var ne=ee.children,ae=ee.innerProps,ce=ee.isDisabled,le=ee.isRtl;return jsx("div",_extends$2({},getStyleProps(ee,"container",{"--is-disabled":ce,"--is-rtl":le}),ae),ne)},valueContainerCSS=function re(ee,ne){var ae=ee.theme.spacing,ce=ee.isMulti,le=ee.hasValue,ue=ee.selectProps.controlShouldRenderValue;return _objectSpread2({alignItems:"center",display:ce&&le&&ue?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},ne?{}:{padding:"".concat(ae.baseUnit/2,"px ").concat(ae.baseUnit*2,"px")})},ValueContainer=function re(ee){var ne=ee.children,ae=ee.innerProps,ce=ee.isMulti,le=ee.hasValue;return jsx("div",_extends$2({},getStyleProps(ee,"valueContainer",{"value-container":!0,"value-container--is-multi":ce,"value-container--has-value":le}),ae),ne)},indicatorsContainerCSS=function re(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},IndicatorsContainer=function re(ee){var ne=ee.children,ae=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"indicatorsContainer",{indicators:!0}),ae),ne)},_templateObject,_excluded$2=["size"],_ref2$2={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Svg=function re(ee){var ne=ee.size,ae=_objectWithoutProperties$1(ee,_excluded$2);return jsx("svg",_extends$2({height:ne,width:ne,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:_ref2$2},ae))},CrossIcon=function re(ee){return jsx(Svg,_extends$2({size:20},ee),jsx("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},DownChevron=function re(ee){return jsx(Svg,_extends$2({size:20},ee),jsx("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},baseCSS=function re(ee,ne){var ae=ee.isFocused,ce=ee.theme,le=ce.spacing.baseUnit,ue=ce.colors;return _objectSpread2({label:"indicatorContainer",display:"flex",transition:"color 150ms"},ne?{}:{color:ae?ue.neutral60:ue.neutral20,padding:le*2,":hover":{color:ae?ue.neutral80:ue.neutral40}})},dropdownIndicatorCSS=baseCSS,DropdownIndicator=function re(ee){var ne=ee.children,ae=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),ae),ne||jsx(DownChevron,null))},clearIndicatorCSS=baseCSS,ClearIndicator=function re(ee){var ne=ee.children,ae=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"clearIndicator",{indicator:!0,"clear-indicator":!0}),ae),ne||jsx(CrossIcon,null))},indicatorSeparatorCSS=function re(ee,ne){var ae=ee.isDisabled,ce=ee.theme,le=ce.spacing.baseUnit,ue=ce.colors;return _objectSpread2({label:"indicatorSeparator",alignSelf:"stretch",width:1},ne?{}:{backgroundColor:ae?ue.neutral10:ue.neutral20,marginBottom:le*2,marginTop:le*2})},IndicatorSeparator=function re(ee){var ne=ee.innerProps;return jsx("span",_extends$2({},ne,getStyleProps(ee,"indicatorSeparator",{"indicator-separator":!0})))},loadingDotAnimations=keyframes(_templateObject||(_templateObject=_taggedTemplateLiteral([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),loadingIndicatorCSS=function re(ee,ne){var ae=ee.isFocused,ce=ee.size,le=ee.theme,ue=le.colors,he=le.spacing.baseUnit;return _objectSpread2({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:ce,lineHeight:1,marginRight:ce,textAlign:"center",verticalAlign:"middle"},ne?{}:{color:ae?ue.neutral60:ue.neutral20,padding:he*2})},LoadingDot=function re(ee){var ne=ee.delay,ae=ee.offset;return jsx("span",{css:css$2({animation:"".concat(loadingDotAnimations," 1s ease-in-out ").concat(ne,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:ae?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},LoadingIndicator=function re(ee){var ne=ee.innerProps,ae=ee.isRtl;return jsx("div",_extends$2({},getStyleProps(ee,"loadingIndicator",{indicator:!0,"loading-indicator":!0}),ne),jsx(LoadingDot,{delay:0,offset:ae}),jsx(LoadingDot,{delay:160,offset:!0}),jsx(LoadingDot,{delay:320,offset:!ae}))};LoadingIndicator.defaultProps={size:4};var css$1=function re(ee,ne){var ae=ee.isDisabled,ce=ee.isFocused,le=ee.theme,ue=le.colors,he=le.borderRadius,fe=le.spacing;return _objectSpread2({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:fe.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},ne?{}:{backgroundColor:ae?ue.neutral5:ue.neutral0,borderColor:ae?ue.neutral10:ce?ue.primary:ue.neutral20,borderRadius:he,borderStyle:"solid",borderWidth:1,boxShadow:ce?"0 0 0 1px ".concat(ue.primary):void 0,"&:hover":{borderColor:ce?ue.primary:ue.neutral30}})},Control=function re(ee){var ne=ee.children,ae=ee.isDisabled,ce=ee.isFocused,le=ee.innerRef,ue=ee.innerProps,he=ee.menuIsOpen;return jsx("div",_extends$2({ref:le},getStyleProps(ee,"control",{control:!0,"control--is-disabled":ae,"control--is-focused":ce,"control--menu-is-open":he}),ue),ne)},_excluded$1=["data"],groupCSS=function re(ee,ne){var ae=ee.theme.spacing;return ne?{}:{paddingBottom:ae.baseUnit*2,paddingTop:ae.baseUnit*2}},Group=function re(ee){var ne=ee.children,ae=ee.cx,ce=ee.getStyles,le=ee.getClassNames,ue=ee.Heading,he=ee.headingProps,fe=ee.innerProps,me=ee.label,ge=ee.theme,ve=ee.selectProps;return jsx("div",_extends$2({},getStyleProps(ee,"group",{group:!0}),fe),jsx(ue,_extends$2({},he,{selectProps:ve,theme:ge,getStyles:ce,getClassNames:le,cx:ae}),me),jsx("div",null,ne))},groupHeadingCSS=function re(ee,ne){var ae=ee.theme,ce=ae.colors,le=ae.spacing;return _objectSpread2({label:"group",cursor:"default",display:"block"},ne?{}:{color:ce.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:le.baseUnit*3,paddingRight:le.baseUnit*3,textTransform:"uppercase"})},GroupHeading=function re(ee){var ne=cleanCommonProps(ee);ne.data;var ae=_objectWithoutProperties$1(ne,_excluded$1);return jsx("div",_extends$2({},getStyleProps(ee,"groupHeading",{"group-heading":!0}),ae))},_excluded$4=["innerRef","isDisabled","isHidden","inputClassName"],inputCSS=function re(ee,ne){var ae=ee.isDisabled,ce=ee.value,le=ee.theme,ue=le.spacing,he=le.colors;return _objectSpread2(_objectSpread2({visibility:ae?"hidden":"visible",transform:ce?"translateZ(0)":""},containerStyle),ne?{}:{margin:ue.baseUnit/2,paddingBottom:ue.baseUnit/2,paddingTop:ue.baseUnit/2,color:he.neutral80})},spacingStyle={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},containerStyle={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":_objectSpread2({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},spacingStyle)},inputStyle=function re(ee){return _objectSpread2({label:"input",color:"inherit",background:0,opacity:ee?0:1,width:"100%"},spacingStyle)},Input=function re(ee){var ne=ee.cx,ae=ee.value,ce=cleanCommonProps(ee),le=ce.innerRef,ue=ce.isDisabled,he=ce.isHidden,fe=ce.inputClassName,me=_objectWithoutProperties$1(ce,_excluded$4);return jsx("div",_extends$2({},getStyleProps(ee,"input",{"input-container":!0}),{"data-value":ae||""}),jsx("input",_extends$2({className:ne({input:!0},fe),ref:le,style:inputStyle(he),disabled:ue},me)))},multiValueCSS=function re(ee,ne){var ae=ee.theme,ce=ae.spacing,le=ae.borderRadius,ue=ae.colors;return _objectSpread2({label:"multiValue",display:"flex",minWidth:0},ne?{}:{backgroundColor:ue.neutral10,borderRadius:le/2,margin:ce.baseUnit/2})},multiValueLabelCSS=function re(ee,ne){var ae=ee.theme,ce=ae.borderRadius,le=ae.colors,ue=ee.cropWithEllipsis;return _objectSpread2({overflow:"hidden",textOverflow:ue||ue===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},ne?{}:{borderRadius:ce/2,color:le.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemoveCSS=function re(ee,ne){var ae=ee.theme,ce=ae.spacing,le=ae.borderRadius,ue=ae.colors,he=ee.isFocused;return _objectSpread2({alignItems:"center",display:"flex"},ne?{}:{borderRadius:le/2,backgroundColor:he?ue.dangerLight:void 0,paddingLeft:ce.baseUnit,paddingRight:ce.baseUnit,":hover":{backgroundColor:ue.dangerLight,color:ue.danger}})},MultiValueGeneric=function re(ee){var ne=ee.children,ae=ee.innerProps;return jsx("div",ae,ne)},MultiValueContainer=MultiValueGeneric,MultiValueLabel=MultiValueGeneric;function MultiValueRemove(re){var ee=re.children,ne=re.innerProps;return jsx("div",_extends$2({role:"button"},ne),ee||jsx(CrossIcon,{size:14}))}var MultiValue=function re(ee){var ne=ee.children,ae=ee.components,ce=ee.data,le=ee.innerProps,ue=ee.isDisabled,he=ee.removeProps,fe=ee.selectProps,me=ae.Container,ge=ae.Label,ve=ae.Remove;return jsx(me,{data:ce,innerProps:_objectSpread2(_objectSpread2({},getStyleProps(ee,"multiValue",{"multi-value":!0,"multi-value--is-disabled":ue})),le),selectProps:fe},jsx(ge,{data:ce,innerProps:_objectSpread2({},getStyleProps(ee,"multiValueLabel",{"multi-value__label":!0})),selectProps:fe},ne),jsx(ve,{data:ce,innerProps:_objectSpread2(_objectSpread2({},getStyleProps(ee,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(ne||"option")},he),selectProps:fe}))},optionCSS=function re(ee,ne){var ae=ee.isDisabled,ce=ee.isFocused,le=ee.isSelected,ue=ee.theme,he=ue.spacing,fe=ue.colors;return _objectSpread2({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},ne?{}:{backgroundColor:le?fe.primary:ce?fe.primary25:"transparent",color:ae?fe.neutral20:le?fe.neutral0:"inherit",padding:"".concat(he.baseUnit*2,"px ").concat(he.baseUnit*3,"px"),":active":{backgroundColor:ae?void 0:le?fe.primary:fe.primary50}})},Option=function re(ee){var ne=ee.children,ae=ee.isDisabled,ce=ee.isFocused,le=ee.isSelected,ue=ee.innerRef,he=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"option",{option:!0,"option--is-disabled":ae,"option--is-focused":ce,"option--is-selected":le}),{ref:ue,"aria-disabled":ae},he),ne)},placeholderCSS=function re(ee,ne){var ae=ee.theme,ce=ae.spacing,le=ae.colors;return _objectSpread2({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},ne?{}:{color:le.neutral50,marginLeft:ce.baseUnit/2,marginRight:ce.baseUnit/2})},Placeholder=function re(ee){var ne=ee.children,ae=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"placeholder",{placeholder:!0}),ae),ne)},css=function re(ee,ne){var ae=ee.isDisabled,ce=ee.theme,le=ce.spacing,ue=ce.colors;return _objectSpread2({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},ne?{}:{color:ae?ue.neutral40:ue.neutral80,marginLeft:le.baseUnit/2,marginRight:le.baseUnit/2})},SingleValue=function re(ee){var ne=ee.children,ae=ee.isDisabled,ce=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"singleValue",{"single-value":!0,"single-value--is-disabled":ae}),ce),ne)},components={ClearIndicator,Control,DropdownIndicator,DownChevron,CrossIcon,Group,GroupHeading,IndicatorsContainer,IndicatorSeparator,Input,LoadingIndicator,Menu:Menu$1,MenuList,MenuPortal,LoadingMessage,NoOptionsMessage,MultiValue,MultiValueContainer,MultiValueLabel,MultiValueRemove,Option,Placeholder,SelectContainer,SingleValue,ValueContainer},defaultComponents=function re(ee){return _objectSpread2(_objectSpread2({},components),ee.components)},safeIsNaN=Number.isNaN||function re(ee){return typeof ee=="number"&&ee!==ee};function isEqual(re,ee){return!!(re===ee||safeIsNaN(re)&&safeIsNaN(ee))}function areInputsEqual(re,ee){if(re.length!==ee.length)return!1;for(var ne=0;ne<re.length;ne++)if(!isEqual(re[ne],ee[ne]))return!1;return!0}function memoizeOne(re,ee){ee===void 0&&(ee=areInputsEqual);var ne=null;function ae(){for(var ce=[],le=0;le<arguments.length;le++)ce[le]=arguments[le];if(ne&&ne.lastThis===this&&ee(ce,ne.lastArgs))return ne.lastResult;var ue=re.apply(this,ce);return ne={lastResult:ue,lastArgs:ce,lastThis:this},ue}return ae.clear=function(){ne=null},ae}var _ref={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},A11yText=function re(ee){return jsx("span",_extends$2({css:_ref},ee))},defaultAriaLiveMessages={guidance:function re(ee){var ne=ee.isSearchable,ae=ee.isMulti,ce=ee.isDisabled,le=ee.tabSelectsValue,ue=ee.context;switch(ue){case"menu":return"Use Up and Down to choose options".concat(ce?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(le?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(ee["aria-label"]||"Select"," is focused ").concat(ne?",type to refine list":"",", press Down to open the menu, ").concat(ae?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function re(ee){var ne=ee.action,ae=ee.label,ce=ae===void 0?"":ae,le=ee.labels,ue=ee.isDisabled;switch(ne){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(ce,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(le.length>1?"s":""," ").concat(le.join(","),", selected.");case"select-option":return ue?"option ".concat(ce," is disabled. Select another option."):"option ".concat(ce,", selected.");default:return""}},onFocus:function re(ee){var ne=ee.context,ae=ee.focused,ce=ee.options,le=ee.label,ue=le===void 0?"":le,he=ee.selectValue,fe=ee.isDisabled,me=ee.isSelected,ge=function(Ee,Ce){return Ee&&Ee.length?"".concat(Ee.indexOf(Ce)+1," of ").concat(Ee.length):""};if(ne==="value"&&he)return"value ".concat(ue," focused, ").concat(ge(he,ae),".");if(ne==="menu"){var ve=fe?" disabled":"",ye="".concat(me?"selected":"focused").concat(ve);return"option ".concat(ue," ").concat(ye,", ").concat(ge(ce,ae),".")}return""},onFilter:function re(ee){var ne=ee.inputValue,ae=ee.resultsMessage;return"".concat(ae).concat(ne?" for search term "+ne:"",".")}},LiveRegion=function re(ee){var ne=ee.ariaSelection,ae=ee.focusedOption,ce=ee.focusedValue,le=ee.focusableOptions,ue=ee.isFocused,he=ee.selectValue,fe=ee.selectProps,me=ee.id,ge=fe.ariaLiveMessages,ve=fe.getOptionLabel,ye=fe.inputValue,be=fe.isMulti,Ee=fe.isOptionDisabled,Ce=fe.isSearchable,Se=fe.menuIsOpen,Te=fe.options,ke=fe.screenReaderStatus,Ne=fe.tabSelectsValue,Fe=fe["aria-label"],De=fe["aria-live"],Oe=reactExports.useMemo(function(){return _objectSpread2(_objectSpread2({},defaultAriaLiveMessages),ge||{})},[ge]),Re=reactExports.useMemo(function(){var ze="";if(ne&&Oe.onChange){var He=ne.option,Ye=ne.options,Xe=ne.removedValue,We=ne.removedValues,Ze=ne.value,Vt=function(an){return Array.isArray(an)?null:an},Qt=Xe||He||Vt(Ze),Yt=Qt?ve(Qt):"",Jt=Ye||We||void 0,rn=Jt?Jt.map(ve):[],nn=_objectSpread2({isDisabled:Qt&&Ee(Qt,he),label:Yt,labels:rn},ne);ze=Oe.onChange(nn)}return ze},[ne,Oe,Ee,he,ve]),Be=reactExports.useMemo(function(){var ze="",He=ae||ce,Ye=!!(ae&&he&&he.includes(ae));if(He&&Oe.onFocus){var Xe={focused:He,label:ve(He),isDisabled:Ee(He,he),isSelected:Ye,options:le,context:He===ae?"menu":"value",selectValue:he};ze=Oe.onFocus(Xe)}return ze},[ae,ce,ve,Ee,Oe,le,he]),Le=reactExports.useMemo(function(){var ze="";if(Se&&Te.length&&Oe.onFilter){var He=ke({count:le.length});ze=Oe.onFilter({inputValue:ye,resultsMessage:He})}return ze},[le,ye,Se,Oe,Te,ke]),je=reactExports.useMemo(function(){var ze="";if(Oe.guidance){var He=ce?"value":Se?"menu":"input";ze=Oe.guidance({"aria-label":Fe,context:He,isDisabled:ae&&Ee(ae,he),isMulti:be,isSearchable:Ce,tabSelectsValue:Ne})}return ze},[Fe,ae,ce,be,Ee,Ce,Se,Oe,he,Ne]),Ge="".concat(Be," ").concat(Le," ").concat(je),qe=jsx(reactExports.Fragment,null,jsx("span",{id:"aria-selection"},Re),jsx("span",{id:"aria-context"},Ge)),Ue=(ne==null?void 0:ne.action)==="initial-input-focus";return jsx(reactExports.Fragment,null,jsx(A11yText,{id:me},Ue&&qe),jsx(A11yText,{"aria-live":De,"aria-atomic":"false","aria-relevant":"additions text"},ue&&!Ue&&qe))},diacritics=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],anyDiacritic=new RegExp("["+diacritics.map(function(re){return re.letters}).join("")+"]","g"),diacriticToBase={};for(var i=0;i<diacritics.length;i++)for(var diacritic=diacritics[i],j=0;j<diacritic.letters.length;j++)diacriticToBase[diacritic.letters[j]]=diacritic.base;var stripDiacritics=function re(ee){return ee.replace(anyDiacritic,function(ne){return diacriticToBase[ne]})},memoizedStripDiacriticsForInput=memoizeOne(stripDiacritics),trimString=function re(ee){return ee.replace(/^\s+|\s+$/g,"")},defaultStringify=function re(ee){return"".concat(ee.label," ").concat(ee.value)},createFilter=function re(ee){return function(ne,ae){if(ne.data.__isNew__)return!0;var ce=_objectSpread2({ignoreCase:!0,ignoreAccents:!0,stringify:defaultStringify,trim:!0,matchFrom:"any"},ee),le=ce.ignoreCase,ue=ce.ignoreAccents,he=ce.stringify,fe=ce.trim,me=ce.matchFrom,ge=fe?trimString(ae):ae,ve=fe?trimString(he(ne)):he(ne);return le&&(ge=ge.toLowerCase(),ve=ve.toLowerCase()),ue&&(ge=memoizedStripDiacriticsForInput(ge),ve=stripDiacritics(ve)),me==="start"?ve.substr(0,ge.length)===ge:ve.indexOf(ge)>-1}},_excluded=["innerRef"];function DummyInput(re){var ee=re.innerRef,ne=_objectWithoutProperties$1(re,_excluded),ae=removeProps(ne,"onExited","in","enter","exit","appear");return jsx("input",_extends$2({ref:ee},ae,{css:css$2({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var cancelScroll=function re(ee){ee.preventDefault(),ee.stopPropagation()};function useScrollCapture(re){var ee=re.isEnabled,ne=re.onBottomArrive,ae=re.onBottomLeave,ce=re.onTopArrive,le=re.onTopLeave,ue=reactExports.useRef(!1),he=reactExports.useRef(!1),fe=reactExports.useRef(0),me=reactExports.useRef(null),ge=reactExports.useCallback(function(Se,Te){if(me.current!==null){var ke=me.current,Ne=ke.scrollTop,Fe=ke.scrollHeight,De=ke.clientHeight,Oe=me.current,Re=Te>0,Be=Fe-De-Ne,Le=!1;Be>Te&&ue.current&&(ae&&ae(Se),ue.current=!1),Re&&he.current&&(le&&le(Se),he.current=!1),Re&&Te>Be?(ne&&!ue.current&&ne(Se),Oe.scrollTop=Fe,Le=!0,ue.current=!0):!Re&&-Te>Ne&&(ce&&!he.current&&ce(Se),Oe.scrollTop=0,Le=!0,he.current=!0),Le&&cancelScroll(Se)}},[ne,ae,ce,le]),ve=reactExports.useCallback(function(Se){ge(Se,Se.deltaY)},[ge]),ye=reactExports.useCallback(function(Se){fe.current=Se.changedTouches[0].clientY},[]),be=reactExports.useCallback(function(Se){var Te=fe.current-Se.changedTouches[0].clientY;ge(Se,Te)},[ge]),Ee=reactExports.useCallback(function(Se){if(Se){var Te=supportsPassiveEvents?{passive:!1}:!1;Se.addEventListener("wheel",ve,Te),Se.addEventListener("touchstart",ye,Te),Se.addEventListener("touchmove",be,Te)}},[be,ye,ve]),Ce=reactExports.useCallback(function(Se){Se&&(Se.removeEventListener("wheel",ve,!1),Se.removeEventListener("touchstart",ye,!1),Se.removeEventListener("touchmove",be,!1))},[be,ye,ve]);return reactExports.useEffect(function(){if(ee){var Se=me.current;return Ee(Se),function(){Ce(Se)}}},[ee,Ee,Ce]),function(Se){me.current=Se}}var STYLE_KEYS=["boxSizing","height","overflow","paddingRight","position"],LOCK_STYLES={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function preventTouchMove(re){re.preventDefault()}function allowTouchMove(re){re.stopPropagation()}function preventInertiaScroll(){var re=this.scrollTop,ee=this.scrollHeight,ne=re+this.offsetHeight;re===0?this.scrollTop=1:ne===ee&&(this.scrollTop=re-1)}function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints}var canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement),activeScrollLocks=0,listenerOptions={capture:!1,passive:!1};function useScrollLock(re){var ee=re.isEnabled,ne=re.accountForScrollbars,ae=ne===void 0?!0:ne,ce=reactExports.useRef({}),le=reactExports.useRef(null),ue=reactExports.useCallback(function(fe){if(canUseDOM){var me=document.body,ge=me&&me.style;if(ae&&STYLE_KEYS.forEach(function(Ee){var Ce=ge&&ge[Ee];ce.current[Ee]=Ce}),ae&&activeScrollLocks<1){var ve=parseInt(ce.current.paddingRight,10)||0,ye=document.body?document.body.clientWidth:0,be=window.innerWidth-ye+ve||0;Object.keys(LOCK_STYLES).forEach(function(Ee){var Ce=LOCK_STYLES[Ee];ge&&(ge[Ee]=Ce)}),ge&&(ge.paddingRight="".concat(be,"px"))}me&&isTouchDevice()&&(me.addEventListener("touchmove",preventTouchMove,listenerOptions),fe&&(fe.addEventListener("touchstart",preventInertiaScroll,listenerOptions),fe.addEventListener("touchmove",allowTouchMove,listenerOptions))),activeScrollLocks+=1}},[ae]),he=reactExports.useCallback(function(fe){if(canUseDOM){var me=document.body,ge=me&&me.style;activeScrollLocks=Math.max(activeScrollLocks-1,0),ae&&activeScrollLocks<1&&STYLE_KEYS.forEach(function(ve){var ye=ce.current[ve];ge&&(ge[ve]=ye)}),me&&isTouchDevice()&&(me.removeEventListener("touchmove",preventTouchMove,listenerOptions),fe&&(fe.removeEventListener("touchstart",preventInertiaScroll,listenerOptions),fe.removeEventListener("touchmove",allowTouchMove,listenerOptions)))}},[ae]);return reactExports.useEffect(function(){if(ee){var fe=le.current;return ue(fe),function(){he(fe)}}},[ee,ue,he]),function(fe){le.current=fe}}var blurSelectInput=function re(){return document.activeElement&&document.activeElement.blur()},_ref2$1={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function ScrollManager(re){var ee=re.children,ne=re.lockEnabled,ae=re.captureEnabled,ce=ae===void 0?!0:ae,le=re.onBottomArrive,ue=re.onBottomLeave,he=re.onTopArrive,fe=re.onTopLeave,me=useScrollCapture({isEnabled:ce,onBottomArrive:le,onBottomLeave:ue,onTopArrive:he,onTopLeave:fe}),ge=useScrollLock({isEnabled:ne}),ve=function(be){me(be),ge(be)};return jsx(reactExports.Fragment,null,ne&&jsx("div",{onClick:blurSelectInput,css:_ref2$1}),ee(ve))}var _ref2={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},RequiredInput=function re(ee){var ne=ee.name,ae=ee.onFocus;return jsx("input",{required:!0,name:ne,tabIndex:-1,onFocus:ae,css:_ref2,value:"",onChange:function(){}})},formatGroupLabel=function re(ee){return ee.label},getOptionLabel$1=function re(ee){return ee.label},getOptionValue$1=function re(ee){return ee.value},isOptionDisabled=function re(ee){return!!ee.isDisabled},defaultStyles={clearIndicator:clearIndicatorCSS,container:containerCSS,control:css$1,dropdownIndicator:dropdownIndicatorCSS,group:groupCSS,groupHeading:groupHeadingCSS,indicatorsContainer:indicatorsContainerCSS,indicatorSeparator:indicatorSeparatorCSS,input:inputCSS,loadingIndicator:loadingIndicatorCSS,loadingMessage:loadingMessageCSS,menu:menuCSS,menuList:menuListCSS,menuPortal:menuPortalCSS,multiValue:multiValueCSS,multiValueLabel:multiValueLabelCSS,multiValueRemove:multiValueRemoveCSS,noOptionsMessage:noOptionsMessageCSS,option:optionCSS,placeholder:placeholderCSS,singleValue:css,valueContainer:valueContainerCSS},colors={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},borderRadius=4,baseUnit=4,controlHeight=38,menuGutter=baseUnit*2,spacing={baseUnit,controlHeight,menuGutter},defaultTheme={borderRadius,colors,spacing},defaultProps={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:isTouchCapable(),captureMenuScroll:!isTouchCapable(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:createFilter(),formatGroupLabel,getOptionLabel:getOptionLabel$1,getOptionValue:getOptionValue$1,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled,loadingMessage:function re(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!isMobileDevice(),noOptionsMessage:function re(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function re(ee){var ne=ee.count;return"".concat(ne," result").concat(ne!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function toCategorizedOption(re,ee,ne,ae){var ce=_isOptionDisabled(re,ee,ne),le=_isOptionSelected(re,ee,ne),ue=getOptionLabel(re,ee),he=getOptionValue(re,ee);return{type:"option",data:ee,isDisabled:ce,isSelected:le,label:ue,value:he,index:ae}}function buildCategorizedOptions(re,ee){return re.options.map(function(ne,ae){if("options"in ne){var ce=ne.options.map(function(ue,he){return toCategorizedOption(re,ue,ee,he)}).filter(function(ue){return isFocusable(re,ue)});return ce.length>0?{type:"group",data:ne,options:ce,index:ae}:void 0}var le=toCategorizedOption(re,ne,ee,ae);return isFocusable(re,le)?le:void 0}).filter(notNullish)}function buildFocusableOptionsFromCategorizedOptions(re){return re.reduce(function(ee,ne){return ne.type==="group"?ee.push.apply(ee,_toConsumableArray(ne.options.map(function(ae){return ae.data}))):ee.push(ne.data),ee},[])}function buildFocusableOptions(re,ee){return buildFocusableOptionsFromCategorizedOptions(buildCategorizedOptions(re,ee))}function isFocusable(re,ee){var ne=re.inputValue,ae=ne===void 0?"":ne,ce=ee.data,le=ee.isSelected,ue=ee.label,he=ee.value;return(!shouldHideSelectedOptions(re)||!le)&&_filterOption(re,{label:ue,value:he,data:ce},ae)}function getNextFocusedValue(re,ee){var ne=re.focusedValue,ae=re.selectValue,ce=ae.indexOf(ne);if(ce>-1){var le=ee.indexOf(ne);if(le>-1)return ne;if(ce<ee.length)return ee[ce]}return null}function getNextFocusedOption(re,ee){var ne=re.focusedOption;return ne&&ee.indexOf(ne)>-1?ne:ee[0]}var getOptionLabel=function re(ee,ne){return ee.getOptionLabel(ne)},getOptionValue=function re(ee,ne){return ee.getOptionValue(ne)};function _isOptionDisabled(re,ee,ne){return typeof re.isOptionDisabled=="function"?re.isOptionDisabled(ee,ne):!1}function _isOptionSelected(re,ee,ne){if(ne.indexOf(ee)>-1)return!0;if(typeof re.isOptionSelected=="function")return re.isOptionSelected(ee,ne);var ae=getOptionValue(re,ee);return ne.some(function(ce){return getOptionValue(re,ce)===ae})}function _filterOption(re,ee,ne){return re.filterOption?re.filterOption(ee,ne):!0}var shouldHideSelectedOptions=function re(ee){var ne=ee.hideSelectedOptions,ae=ee.isMulti;return ne===void 0?ae:ne},instanceId=1,Select$1=function(re){_inherits(ne,re);var ee=_createSuper(ne);function ne(ae){var ce;if(_classCallCheck$1(this,ne),ce=ee.call(this,ae),ce.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},ce.blockOptionHover=!1,ce.isComposing=!1,ce.commonProps=void 0,ce.initialTouchX=0,ce.initialTouchY=0,ce.instancePrefix="",ce.openAfterFocus=!1,ce.scrollToFocusedOptionOnUpdate=!1,ce.userIsDragging=void 0,ce.controlRef=null,ce.getControlRef=function(he){ce.controlRef=he},ce.focusedOptionRef=null,ce.getFocusedOptionRef=function(he){ce.focusedOptionRef=he},ce.menuListRef=null,ce.getMenuListRef=function(he){ce.menuListRef=he},ce.inputRef=null,ce.getInputRef=function(he){ce.inputRef=he},ce.focus=ce.focusInput,ce.blur=ce.blurInput,ce.onChange=function(he,fe){var me=ce.props,ge=me.onChange,ve=me.name;fe.name=ve,ce.ariaOnChange(he,fe),ge(he,fe)},ce.setValue=function(he,fe,me){var ge=ce.props,ve=ge.closeMenuOnSelect,ye=ge.isMulti,be=ge.inputValue;ce.onInputChange("",{action:"set-value",prevInputValue:be}),ve&&(ce.setState({inputIsHiddenAfterUpdate:!ye}),ce.onMenuClose()),ce.setState({clearFocusValueOnUpdate:!0}),ce.onChange(he,{action:fe,option:me})},ce.selectOption=function(he){var fe=ce.props,me=fe.blurInputOnSelect,ge=fe.isMulti,ve=fe.name,ye=ce.state.selectValue,be=ge&&ce.isOptionSelected(he,ye),Ee=ce.isOptionDisabled(he,ye);if(be){var Ce=ce.getOptionValue(he);ce.setValue(ye.filter(function(Se){return ce.getOptionValue(Se)!==Ce}),"deselect-option",he)}else if(!Ee)ge?ce.setValue([].concat(_toConsumableArray(ye),[he]),"select-option",he):ce.setValue(he,"select-option");else{ce.ariaOnChange(he,{action:"select-option",option:he,name:ve});return}me&&ce.blurInput()},ce.removeValue=function(he){var fe=ce.props.isMulti,me=ce.state.selectValue,ge=ce.getOptionValue(he),ve=me.filter(function(be){return ce.getOptionValue(be)!==ge}),ye=valueTernary(fe,ve,ve[0]||null);ce.onChange(ye,{action:"remove-value",removedValue:he}),ce.focusInput()},ce.clearValue=function(){var he=ce.state.selectValue;ce.onChange(valueTernary(ce.props.isMulti,[],null),{action:"clear",removedValues:he})},ce.popValue=function(){var he=ce.props.isMulti,fe=ce.state.selectValue,me=fe[fe.length-1],ge=fe.slice(0,fe.length-1),ve=valueTernary(he,ge,ge[0]||null);ce.onChange(ve,{action:"pop-value",removedValue:me})},ce.getValue=function(){return ce.state.selectValue},ce.cx=function(){for(var he=arguments.length,fe=new Array(he),me=0;me<he;me++)fe[me]=arguments[me];return classNames.apply(void 0,[ce.props.classNamePrefix].concat(fe))},ce.getOptionLabel=function(he){return getOptionLabel(ce.props,he)},ce.getOptionValue=function(he){return getOptionValue(ce.props,he)},ce.getStyles=function(he,fe){var me=ce.props.unstyled,ge=defaultStyles[he](fe,me);ge.boxSizing="border-box";var ve=ce.props.styles[he];return ve?ve(ge,fe):ge},ce.getClassNames=function(he,fe){var me,ge;return(me=(ge=ce.props.classNames)[he])===null||me===void 0?void 0:me.call(ge,fe)},ce.getElementId=function(he){return"".concat(ce.instancePrefix,"-").concat(he)},ce.getComponents=function(){return defaultComponents(ce.props)},ce.buildCategorizedOptions=function(){return buildCategorizedOptions(ce.props,ce.state.selectValue)},ce.getCategorizedOptions=function(){return ce.props.menuIsOpen?ce.buildCategorizedOptions():[]},ce.buildFocusableOptions=function(){return buildFocusableOptionsFromCategorizedOptions(ce.buildCategorizedOptions())},ce.getFocusableOptions=function(){return ce.props.menuIsOpen?ce.buildFocusableOptions():[]},ce.ariaOnChange=function(he,fe){ce.setState({ariaSelection:_objectSpread2({value:he},fe)})},ce.onMenuMouseDown=function(he){he.button===0&&(he.stopPropagation(),he.preventDefault(),ce.focusInput())},ce.onMenuMouseMove=function(he){ce.blockOptionHover=!1},ce.onControlMouseDown=function(he){if(!he.defaultPrevented){var fe=ce.props.openMenuOnClick;ce.state.isFocused?ce.props.menuIsOpen?he.target.tagName!=="INPUT"&&he.target.tagName!=="TEXTAREA"&&ce.onMenuClose():fe&&ce.openMenu("first"):(fe&&(ce.openAfterFocus=!0),ce.focusInput()),he.target.tagName!=="INPUT"&&he.target.tagName!=="TEXTAREA"&&he.preventDefault()}},ce.onDropdownIndicatorMouseDown=function(he){if(!(he&&he.type==="mousedown"&&he.button!==0)&&!ce.props.isDisabled){var fe=ce.props,me=fe.isMulti,ge=fe.menuIsOpen;ce.focusInput(),ge?(ce.setState({inputIsHiddenAfterUpdate:!me}),ce.onMenuClose()):ce.openMenu("first"),he.preventDefault()}},ce.onClearIndicatorMouseDown=function(he){he&&he.type==="mousedown"&&he.button!==0||(ce.clearValue(),he.preventDefault(),ce.openAfterFocus=!1,he.type==="touchend"?ce.focusInput():setTimeout(function(){return ce.focusInput()}))},ce.onScroll=function(he){typeof ce.props.closeMenuOnScroll=="boolean"?he.target instanceof HTMLElement&&isDocumentElement(he.target)&&ce.props.onMenuClose():typeof ce.props.closeMenuOnScroll=="function"&&ce.props.closeMenuOnScroll(he)&&ce.props.onMenuClose()},ce.onCompositionStart=function(){ce.isComposing=!0},ce.onCompositionEnd=function(){ce.isComposing=!1},ce.onTouchStart=function(he){var fe=he.touches,me=fe&&fe.item(0);me&&(ce.initialTouchX=me.clientX,ce.initialTouchY=me.clientY,ce.userIsDragging=!1)},ce.onTouchMove=function(he){var fe=he.touches,me=fe&&fe.item(0);if(me){var ge=Math.abs(me.clientX-ce.initialTouchX),ve=Math.abs(me.clientY-ce.initialTouchY),ye=5;ce.userIsDragging=ge>ye||ve>ye}},ce.onTouchEnd=function(he){ce.userIsDragging||(ce.controlRef&&!ce.controlRef.contains(he.target)&&ce.menuListRef&&!ce.menuListRef.contains(he.target)&&ce.blurInput(),ce.initialTouchX=0,ce.initialTouchY=0)},ce.onControlTouchEnd=function(he){ce.userIsDragging||ce.onControlMouseDown(he)},ce.onClearIndicatorTouchEnd=function(he){ce.userIsDragging||ce.onClearIndicatorMouseDown(he)},ce.onDropdownIndicatorTouchEnd=function(he){ce.userIsDragging||ce.onDropdownIndicatorMouseDown(he)},ce.handleInputChange=function(he){var fe=ce.props.inputValue,me=he.currentTarget.value;ce.setState({inputIsHiddenAfterUpdate:!1}),ce.onInputChange(me,{action:"input-change",prevInputValue:fe}),ce.props.menuIsOpen||ce.onMenuOpen()},ce.onInputFocus=function(he){ce.props.onFocus&&ce.props.onFocus(he),ce.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(ce.openAfterFocus||ce.props.openMenuOnFocus)&&ce.openMenu("first"),ce.openAfterFocus=!1},ce.onInputBlur=function(he){var fe=ce.props.inputValue;if(ce.menuListRef&&ce.menuListRef.contains(document.activeElement)){ce.inputRef.focus();return}ce.props.onBlur&&ce.props.onBlur(he),ce.onInputChange("",{action:"input-blur",prevInputValue:fe}),ce.onMenuClose(),ce.setState({focusedValue:null,isFocused:!1})},ce.onOptionHover=function(he){ce.blockOptionHover||ce.state.focusedOption===he||ce.setState({focusedOption:he})},ce.shouldHideSelectedOptions=function(){return shouldHideSelectedOptions(ce.props)},ce.onValueInputFocus=function(he){he.preventDefault(),he.stopPropagation(),ce.focus()},ce.onKeyDown=function(he){var fe=ce.props,me=fe.isMulti,ge=fe.backspaceRemovesValue,ve=fe.escapeClearsValue,ye=fe.inputValue,be=fe.isClearable,Ee=fe.isDisabled,Ce=fe.menuIsOpen,Se=fe.onKeyDown,Te=fe.tabSelectsValue,ke=fe.openMenuOnFocus,Ne=ce.state,Fe=Ne.focusedOption,De=Ne.focusedValue,Oe=Ne.selectValue;if(!Ee&&!(typeof Se=="function"&&(Se(he),he.defaultPrevented))){switch(ce.blockOptionHover=!0,he.key){case"ArrowLeft":if(!me||ye)return;ce.focusValue("previous");break;case"ArrowRight":if(!me||ye)return;ce.focusValue("next");break;case"Delete":case"Backspace":if(ye)return;if(De)ce.removeValue(De);else{if(!ge)return;me?ce.popValue():be&&ce.clearValue()}break;case"Tab":if(ce.isComposing||he.shiftKey||!Ce||!Te||!Fe||ke&&ce.isOptionSelected(Fe,Oe))return;ce.selectOption(Fe);break;case"Enter":if(he.keyCode===229)break;if(Ce){if(!Fe||ce.isComposing)return;ce.selectOption(Fe);break}return;case"Escape":Ce?(ce.setState({inputIsHiddenAfterUpdate:!1}),ce.onInputChange("",{action:"menu-close",prevInputValue:ye}),ce.onMenuClose()):be&&ve&&ce.clearValue();break;case" ":if(ye)return;if(!Ce){ce.openMenu("first");break}if(!Fe)return;ce.selectOption(Fe);break;case"ArrowUp":Ce?ce.focusOption("up"):ce.openMenu("last");break;case"ArrowDown":Ce?ce.focusOption("down"):ce.openMenu("first");break;case"PageUp":if(!Ce)return;ce.focusOption("pageup");break;case"PageDown":if(!Ce)return;ce.focusOption("pagedown");break;case"Home":if(!Ce)return;ce.focusOption("first");break;case"End":if(!Ce)return;ce.focusOption("last");break;default:return}he.preventDefault()}},ce.instancePrefix="react-select-"+(ce.props.instanceId||++instanceId),ce.state.selectValue=cleanValue(ae.value),ae.menuIsOpen&&ce.state.selectValue.length){var le=ce.buildFocusableOptions(),ue=le.indexOf(ce.state.selectValue[0]);ce.state.focusedOption=le[ue]}return ce}return _createClass$1(ne,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&scrollIntoView(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(ce){var le=this.props,ue=le.isDisabled,he=le.menuIsOpen,fe=this.state.isFocused;(fe&&!ue&&ce.isDisabled||fe&&he&&!ce.menuIsOpen)&&this.focusInput(),fe&&ue&&!ce.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!fe&&!ue&&ce.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(scrollIntoView(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(ce,le){this.props.onInputChange(ce,le)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(ce){var le=this,ue=this.state,he=ue.selectValue,fe=ue.isFocused,me=this.buildFocusableOptions(),ge=ce==="first"?0:me.length-1;if(!this.props.isMulti){var ve=me.indexOf(he[0]);ve>-1&&(ge=ve)}this.scrollToFocusedOptionOnUpdate=!(fe&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:me[ge]},function(){return le.onMenuOpen()})}},{key:"focusValue",value:function(ce){var le=this.state,ue=le.selectValue,he=le.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var fe=ue.indexOf(he);he||(fe=-1);var me=ue.length-1,ge=-1;if(ue.length){switch(ce){case"previous":fe===0?ge=0:fe===-1?ge=me:ge=fe-1;break;case"next":fe>-1&&fe<me&&(ge=fe+1);break}this.setState({inputIsHidden:ge!==-1,focusedValue:ue[ge]})}}}},{key:"focusOption",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",le=this.props.pageSize,ue=this.state.focusedOption,he=this.getFocusableOptions();if(he.length){var fe=0,me=he.indexOf(ue);ue||(me=-1),ce==="up"?fe=me>0?me-1:he.length-1:ce==="down"?fe=(me+1)%he.length:ce==="pageup"?(fe=me-le,fe<0&&(fe=0)):ce==="pagedown"?(fe=me+le,fe>he.length-1&&(fe=he.length-1)):ce==="last"&&(fe=he.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:he[fe],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(defaultTheme):_objectSpread2(_objectSpread2({},defaultTheme),this.props.theme):defaultTheme}},{key:"getCommonProps",value:function(){var ce=this.clearValue,le=this.cx,ue=this.getStyles,he=this.getClassNames,fe=this.getValue,me=this.selectOption,ge=this.setValue,ve=this.props,ye=ve.isMulti,be=ve.isRtl,Ee=ve.options,Ce=this.hasValue();return{clearValue:ce,cx:le,getStyles:ue,getClassNames:he,getValue:fe,hasValue:Ce,isMulti:ye,isRtl:be,options:Ee,selectOption:me,selectProps:ve,setValue:ge,theme:this.getTheme()}}},{key:"hasValue",value:function(){var ce=this.state.selectValue;return ce.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var ce=this.props,le=ce.isClearable,ue=ce.isMulti;return le===void 0?ue:le}},{key:"isOptionDisabled",value:function(ce,le){return _isOptionDisabled(this.props,ce,le)}},{key:"isOptionSelected",value:function(ce,le){return _isOptionSelected(this.props,ce,le)}},{key:"filterOption",value:function(ce,le){return _filterOption(this.props,ce,le)}},{key:"formatOptionLabel",value:function(ce,le){if(typeof this.props.formatOptionLabel=="function"){var ue=this.props.inputValue,he=this.state.selectValue;return this.props.formatOptionLabel(ce,{context:le,inputValue:ue,selectValue:he})}else return this.getOptionLabel(ce)}},{key:"formatGroupLabel",value:function(ce){return this.props.formatGroupLabel(ce)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var ce=this.props,le=ce.isDisabled,ue=ce.isSearchable,he=ce.inputId,fe=ce.inputValue,me=ce.tabIndex,ge=ce.form,ve=ce.menuIsOpen,ye=ce.required,be=this.getComponents(),Ee=be.Input,Ce=this.state,Se=Ce.inputIsHidden,Te=Ce.ariaSelection,ke=this.commonProps,Ne=he||this.getElementId("input"),Fe=_objectSpread2(_objectSpread2(_objectSpread2({"aria-autocomplete":"list","aria-expanded":ve,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":ye,role:"combobox"},ve&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!ue&&{"aria-readonly":!0}),this.hasValue()?(Te==null?void 0:Te.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return ue?reactExports.createElement(Ee,_extends$2({},ke,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:Ne,innerRef:this.getInputRef,isDisabled:le,isHidden:Se,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:me,form:ge,type:"text",value:fe},Fe)):reactExports.createElement(DummyInput,_extends$2({id:Ne,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:noop$2,onFocus:this.onInputFocus,disabled:le,tabIndex:me,inputMode:"none",form:ge,value:""},Fe))}},{key:"renderPlaceholderOrValue",value:function(){var ce=this,le=this.getComponents(),ue=le.MultiValue,he=le.MultiValueContainer,fe=le.MultiValueLabel,me=le.MultiValueRemove,ge=le.SingleValue,ve=le.Placeholder,ye=this.commonProps,be=this.props,Ee=be.controlShouldRenderValue,Ce=be.isDisabled,Se=be.isMulti,Te=be.inputValue,ke=be.placeholder,Ne=this.state,Fe=Ne.selectValue,De=Ne.focusedValue,Oe=Ne.isFocused;if(!this.hasValue()||!Ee)return Te?null:reactExports.createElement(ve,_extends$2({},ye,{key:"placeholder",isDisabled:Ce,isFocused:Oe,innerProps:{id:this.getElementId("placeholder")}}),ke);if(Se)return Fe.map(function(Be,Le){var je=Be===De,Ge="".concat(ce.getOptionLabel(Be),"-").concat(ce.getOptionValue(Be));return reactExports.createElement(ue,_extends$2({},ye,{components:{Container:he,Label:fe,Remove:me},isFocused:je,isDisabled:Ce,key:Ge,index:Le,removeProps:{onClick:function(){return ce.removeValue(Be)},onTouchEnd:function(){return ce.removeValue(Be)},onMouseDown:function(Ue){Ue.preventDefault()}},data:Be}),ce.formatOptionLabel(Be,"value"))});if(Te)return null;var Re=Fe[0];return reactExports.createElement(ge,_extends$2({},ye,{data:Re,isDisabled:Ce}),this.formatOptionLabel(Re,"value"))}},{key:"renderClearIndicator",value:function(){var ce=this.getComponents(),le=ce.ClearIndicator,ue=this.commonProps,he=this.props,fe=he.isDisabled,me=he.isLoading,ge=this.state.isFocused;if(!this.isClearable()||!le||fe||!this.hasValue()||me)return null;var ve={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return reactExports.createElement(le,_extends$2({},ue,{innerProps:ve,isFocused:ge}))}},{key:"renderLoadingIndicator",value:function(){var ce=this.getComponents(),le=ce.LoadingIndicator,ue=this.commonProps,he=this.props,fe=he.isDisabled,me=he.isLoading,ge=this.state.isFocused;if(!le||!me)return null;var ve={"aria-hidden":"true"};return reactExports.createElement(le,_extends$2({},ue,{innerProps:ve,isDisabled:fe,isFocused:ge}))}},{key:"renderIndicatorSeparator",value:function(){var ce=this.getComponents(),le=ce.DropdownIndicator,ue=ce.IndicatorSeparator;if(!le||!ue)return null;var he=this.commonProps,fe=this.props.isDisabled,me=this.state.isFocused;return reactExports.createElement(ue,_extends$2({},he,{isDisabled:fe,isFocused:me}))}},{key:"renderDropdownIndicator",value:function(){var ce=this.getComponents(),le=ce.DropdownIndicator;if(!le)return null;var ue=this.commonProps,he=this.props.isDisabled,fe=this.state.isFocused,me={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return reactExports.createElement(le,_extends$2({},ue,{innerProps:me,isDisabled:he,isFocused:fe}))}},{key:"renderMenu",value:function(){var ce=this,le=this.getComponents(),ue=le.Group,he=le.GroupHeading,fe=le.Menu,me=le.MenuList,ge=le.MenuPortal,ve=le.LoadingMessage,ye=le.NoOptionsMessage,be=le.Option,Ee=this.commonProps,Ce=this.state.focusedOption,Se=this.props,Te=Se.captureMenuScroll,ke=Se.inputValue,Ne=Se.isLoading,Fe=Se.loadingMessage,De=Se.minMenuHeight,Oe=Se.maxMenuHeight,Re=Se.menuIsOpen,Be=Se.menuPlacement,Le=Se.menuPosition,je=Se.menuPortalTarget,Ge=Se.menuShouldBlockScroll,qe=Se.menuShouldScrollIntoView,Ue=Se.noOptionsMessage,ze=Se.onMenuScrollToTop,He=Se.onMenuScrollToBottom;if(!Re)return null;var Ye=function(Jt,rn){var nn=Jt.type,fn=Jt.data,an=Jt.isDisabled,un=Jt.isSelected,bn=Jt.label,En=Jt.value,$n=Ce===fn,On=an?void 0:function(){return ce.onOptionHover(fn)},zn=an?void 0:function(){return ce.selectOption(fn)},Rn="".concat(ce.getElementId("option"),"-").concat(rn),Ut={id:Rn,onClick:zn,onMouseMove:On,onMouseOver:On,tabIndex:-1};return reactExports.createElement(be,_extends$2({},Ee,{innerProps:Ut,data:fn,isDisabled:an,isSelected:un,key:Rn,label:bn,type:nn,value:En,isFocused:$n,innerRef:$n?ce.getFocusedOptionRef:void 0}),ce.formatOptionLabel(Jt.data,"menu"))},Xe;if(this.hasOptions())Xe=this.getCategorizedOptions().map(function(Yt){if(Yt.type==="group"){var Jt=Yt.data,rn=Yt.options,nn=Yt.index,fn="".concat(ce.getElementId("group"),"-").concat(nn),an="".concat(fn,"-heading");return reactExports.createElement(ue,_extends$2({},Ee,{key:fn,data:Jt,options:rn,Heading:he,headingProps:{id:an,data:Yt.data},label:ce.formatGroupLabel(Yt.data)}),Yt.options.map(function(un){return Ye(un,"".concat(nn,"-").concat(un.index))}))}else if(Yt.type==="option")return Ye(Yt,"".concat(Yt.index))});else if(Ne){var We=Fe({inputValue:ke});if(We===null)return null;Xe=reactExports.createElement(ve,Ee,We)}else{var Ze=Ue({inputValue:ke});if(Ze===null)return null;Xe=reactExports.createElement(ye,Ee,Ze)}var Vt={minMenuHeight:De,maxMenuHeight:Oe,menuPlacement:Be,menuPosition:Le,menuShouldScrollIntoView:qe},Qt=reactExports.createElement(MenuPlacer,_extends$2({},Ee,Vt),function(Yt){var Jt=Yt.ref,rn=Yt.placerProps,nn=rn.placement,fn=rn.maxHeight;return reactExports.createElement(fe,_extends$2({},Ee,Vt,{innerRef:Jt,innerProps:{onMouseDown:ce.onMenuMouseDown,onMouseMove:ce.onMenuMouseMove,id:ce.getElementId("listbox")},isLoading:Ne,placement:nn}),reactExports.createElement(ScrollManager,{captureEnabled:Te,onTopArrive:ze,onBottomArrive:He,lockEnabled:Ge},function(an){return reactExports.createElement(me,_extends$2({},Ee,{innerRef:function(bn){ce.getMenuListRef(bn),an(bn)},isLoading:Ne,maxHeight:fn,focusedOption:Ce}),Xe)}))});return je||Le==="fixed"?reactExports.createElement(ge,_extends$2({},Ee,{appendTo:je,controlElement:this.controlRef,menuPlacement:Be,menuPosition:Le}),Qt):Qt}},{key:"renderFormField",value:function(){var ce=this,le=this.props,ue=le.delimiter,he=le.isDisabled,fe=le.isMulti,me=le.name,ge=le.required,ve=this.state.selectValue;if(!(!me||he)){if(ge&&!this.hasValue())return reactExports.createElement(RequiredInput,{name:me,onFocus:this.onValueInputFocus});if(fe)if(ue){var ye=ve.map(function(Ce){return ce.getOptionValue(Ce)}).join(ue);return reactExports.createElement("input",{name:me,type:"hidden",value:ye})}else{var be=ve.length>0?ve.map(function(Ce,Se){return reactExports.createElement("input",{key:"i-".concat(Se),name:me,type:"hidden",value:ce.getOptionValue(Ce)})}):reactExports.createElement("input",{name:me,type:"hidden",value:""});return reactExports.createElement("div",null,be)}else{var Ee=ve[0]?this.getOptionValue(ve[0]):"";return reactExports.createElement("input",{name:me,type:"hidden",value:Ee})}}}},{key:"renderLiveRegion",value:function(){var ce=this.commonProps,le=this.state,ue=le.ariaSelection,he=le.focusedOption,fe=le.focusedValue,me=le.isFocused,ge=le.selectValue,ve=this.getFocusableOptions();return reactExports.createElement(LiveRegion,_extends$2({},ce,{id:this.getElementId("live-region"),ariaSelection:ue,focusedOption:he,focusedValue:fe,isFocused:me,selectValue:ge,focusableOptions:ve}))}},{key:"render",value:function(){var ce=this.getComponents(),le=ce.Control,ue=ce.IndicatorsContainer,he=ce.SelectContainer,fe=ce.ValueContainer,me=this.props,ge=me.className,ve=me.id,ye=me.isDisabled,be=me.menuIsOpen,Ee=this.state.isFocused,Ce=this.commonProps=this.getCommonProps();return reactExports.createElement(he,_extends$2({},Ce,{className:ge,innerProps:{id:ve,onKeyDown:this.onKeyDown},isDisabled:ye,isFocused:Ee}),this.renderLiveRegion(),reactExports.createElement(le,_extends$2({},Ce,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:ye,isFocused:Ee,menuIsOpen:be}),reactExports.createElement(fe,_extends$2({},Ce,{isDisabled:ye}),this.renderPlaceholderOrValue(),this.renderInput()),reactExports.createElement(ue,_extends$2({},Ce,{isDisabled:ye}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(ce,le){var ue=le.prevProps,he=le.clearFocusValueOnUpdate,fe=le.inputIsHiddenAfterUpdate,me=le.ariaSelection,ge=le.isFocused,ve=le.prevWasFocused,ye=ce.options,be=ce.value,Ee=ce.menuIsOpen,Ce=ce.inputValue,Se=ce.isMulti,Te=cleanValue(be),ke={};if(ue&&(be!==ue.value||ye!==ue.options||Ee!==ue.menuIsOpen||Ce!==ue.inputValue)){var Ne=Ee?buildFocusableOptions(ce,Te):[],Fe=he?getNextFocusedValue(le,Te):null,De=getNextFocusedOption(le,Ne);ke={selectValue:Te,focusedOption:De,focusedValue:Fe,clearFocusValueOnUpdate:!1}}var Oe=fe!=null&&ce!==ue?{inputIsHidden:fe,inputIsHiddenAfterUpdate:void 0}:{},Re=me,Be=ge&&ve;return ge&&!Be&&(Re={value:valueTernary(Se,Te,Te[0]||null),options:Te,action:"initial-input-focus"},Be=!ve),(me==null?void 0:me.action)==="initial-input-focus"&&(Re=null),_objectSpread2(_objectSpread2(_objectSpread2({},ke),Oe),{},{prevProps:ce,ariaSelection:Re,prevWasFocused:Be})}}]),ne}(reactExports.Component);Select$1.defaultProps=defaultProps;var StateManagedSelect=reactExports.forwardRef(function(re,ee){var ne=useStateManager(re);return reactExports.createElement(Select$1,_extends$2({ref:ee},ne))});const ReactSelect=StateManagedSelect,theme=re=>({...re,colors:{...re.colors,text:"var(--background-color)",primary:"var(--text-color)"}}),common={color:"var(--text-color)"},style$1={option:(re,{isSelected:ee})=>({...re,color:ee?"var(--background-color)":"var(--text-color)",backgroundColor:ee?"var(--text-color)":"var(--background-color)","&:hover":{color:"var(--background-color)",backgroundColor:"var(--gray-60)"}}),dropdownIndicator:re=>({...re,...common,opacity:.6,"&:hover":{color:"var(--text-color)",opacity:.8}}),placeholder:re=>({...re,color:"var(--gray-60)"}),indicatorSeparator:re=>({...re,backgroundColor:"var(--gray-60)"}),valueContainer:re=>({...re,padding:"0px"}),input:re=>({...re,...common}),control:(re,{isFocused:ee})=>({...re,...common,backgroundColor:"var(--background-color)",border:"none"}),menu:re=>({...re,backgroundColor:"var(--background-color)",zIndex:9999}),menuList:re=>({...re,"::-webkit-scrollbar":{width:"4px",height:"0px"},"::-webkit-scrollbar-track":{background:"var(--gray-20)"},"::-webkit-scrollbar-thumb":{background:"var(--gray-60)"},"::-webkit-scrollbar-thumb:hover":{background:"var(--gray-80)"}}),menuPortal:re=>({...re,zIndex:9999}),singleValue:re=>({...re,...common,overflow:"visible"})},Select=reactExports.forwardRef(({label:re,alt:ee,value:ne,search:ae=!1,defaultValue:ce,options:le,onChange:ue=()=>null,disabled:he,children:fe,placeholder:me,className:ge,style:ve,...ye},be)=>{const[Ee,Ce]=useControlled(ne,ce),Se=reactExports.useCallback(Te=>{Ce(Te),ue(Te)},[Ee]);return jsxs("label",{style:ve,className:`${styles$t.label} ${ge||""}`,children:[jsx$1("p",{children:re}),jsx$1(ReactSelect,{inputRef:be,"aria-label":ee||re,styles:style$1,theme,className:styles$t.container,classNamePrefix:"react_select",onChange:Se,options:le,disabled:he,placeholder:me,isSearchable:ae,menuPortalTarget:document.querySelector("body"),value:Ee===void 0?"":Ee,...ye}),fe]})}),ThemeSelection=re=>{const ee=useLocalSettings(ae=>ae.theme),ne=useLocalSettings(ae=>ae.setTheme);return jsx$1(Select,{alt:"theme selection",value:{label:THEMES[ee],value:ee},onChange:ae=>ne(ae.value,re.apply),options:THEME_OPTIONS,...re})};var Space_Separator=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,unicode={Space_Separator,ID_Start,ID_Continue},util={isSpaceSeparator(re){return typeof re=="string"&&unicode.Space_Separator.test(re)},isIdStartChar(re){return typeof re=="string"&&(re>="a"&&re<="z"||re>="A"&&re<="Z"||re==="$"||re==="_"||unicode.ID_Start.test(re))},isIdContinueChar(re){return typeof re=="string"&&(re>="a"&&re<="z"||re>="A"&&re<="Z"||re>="0"&&re<="9"||re==="$"||re==="_"||re==="‌"||re==="‍"||unicode.ID_Continue.test(re))},isDigit(re){return typeof re=="string"&&/[0-9]/.test(re)},isHexDigit(re){return typeof re=="string"&&/[0-9A-Fa-f]/.test(re)}};let source,parseState,stack,pos,line$1,column,token,key,root$5;var parse=function re(ee,ne){source=String(ee),parseState="start",stack=[],pos=0,line$1=1,column=0,token=void 0,key=void 0,root$5=void 0;do token=lex(),parseStates[parseState]();while(token.type!=="eof");return typeof ne=="function"?internalize({"":root$5},"",ne):root$5};function internalize(re,ee,ne){const ae=re[ee];if(ae!=null&&typeof ae=="object")if(Array.isArray(ae))for(let ce=0;ce<ae.length;ce++){const le=String(ce),ue=internalize(ae,le,ne);ue===void 0?delete ae[le]:Object.defineProperty(ae,le,{value:ue,writable:!0,enumerable:!0,configurable:!0})}else for(const ce in ae){const le=internalize(ae,ce,ne);le===void 0?delete ae[ce]:Object.defineProperty(ae,ce,{value:le,writable:!0,enumerable:!0,configurable:!0})}return ne.call(re,ee,ae)}let lexState,buffer,doubleQuote,sign,c;function lex(){for(lexState="default",buffer="",doubleQuote=!1,sign=1;;){c=peek();const re=lexStates[lexState]();if(re)return re}}function peek(){if(source[pos])return String.fromCodePoint(source.codePointAt(pos))}function read(){const re=peek();return re===`
`?(line$1++,column=0):re?column+=re.length:column++,re&&(pos+=re.length),re}const lexStates={default(){switch(c){case"	":case"\v":case"\f":case" ":case" ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":read();return;case"/":read(),lexState="comment";return;case void 0:return read(),newToken("eof")}if(util.isSpaceSeparator(c)){read();return}return lexStates[parseState]()},comment(){switch(c){case"*":read(),lexState="multiLineComment";return;case"/":read(),lexState="singleLineComment";return}throw invalidChar(read())},multiLineComment(){switch(c){case"*":read(),lexState="multiLineCommentAsterisk";return;case void 0:throw invalidChar(read())}read()},multiLineCommentAsterisk(){switch(c){case"*":read();return;case"/":read(),lexState="default";return;case void 0:throw invalidChar(read())}read(),lexState="multiLineComment"},singleLineComment(){switch(c){case`
`:case"\r":case"\u2028":case"\u2029":read(),lexState="default";return;case void 0:return read(),newToken("eof")}read()},value(){switch(c){case"{":case"[":return newToken("punctuator",read());case"n":return read(),literal("ull"),newToken("null",null);case"t":return read(),literal("rue"),newToken("boolean",!0);case"f":return read(),literal("alse"),newToken("boolean",!1);case"-":case"+":read()==="-"&&(sign=-1),lexState="sign";return;case".":buffer=read(),lexState="decimalPointLeading";return;case"0":buffer=read(),lexState="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":buffer=read(),lexState="decimalInteger";return;case"I":return read(),literal("nfinity"),newToken("numeric",1/0);case"N":return read(),literal("aN"),newToken("numeric",NaN);case'"':case"'":doubleQuote=read()==='"',buffer="",lexState="string";return}throw invalidChar(read())},identifierNameStartEscape(){if(c!=="u")throw invalidChar(read());read();const re=unicodeEscape();switch(re){case"$":case"_":break;default:if(!util.isIdStartChar(re))throw invalidIdentifier();break}buffer+=re,lexState="identifierName"},identifierName(){switch(c){case"$":case"_":case"‌":case"‍":buffer+=read();return;case"\\":read(),lexState="identifierNameEscape";return}if(util.isIdContinueChar(c)){buffer+=read();return}return newToken("identifier",buffer)},identifierNameEscape(){if(c!=="u")throw invalidChar(read());read();const re=unicodeEscape();switch(re){case"$":case"_":case"‌":case"‍":break;default:if(!util.isIdContinueChar(re))throw invalidIdentifier();break}buffer+=re,lexState="identifierName"},sign(){switch(c){case".":buffer=read(),lexState="decimalPointLeading";return;case"0":buffer=read(),lexState="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":buffer=read(),lexState="decimalInteger";return;case"I":return read(),literal("nfinity"),newToken("numeric",sign*(1/0));case"N":return read(),literal("aN"),newToken("numeric",NaN)}throw invalidChar(read())},zero(){switch(c){case".":buffer+=read(),lexState="decimalPoint";return;case"e":case"E":buffer+=read(),lexState="decimalExponent";return;case"x":case"X":buffer+=read(),lexState="hexadecimal";return}return newToken("numeric",sign*0)},decimalInteger(){switch(c){case".":buffer+=read(),lexState="decimalPoint";return;case"e":case"E":buffer+=read(),lexState="decimalExponent";return}if(util.isDigit(c)){buffer+=read();return}return newToken("numeric",sign*Number(buffer))},decimalPointLeading(){if(util.isDigit(c)){buffer+=read(),lexState="decimalFraction";return}throw invalidChar(read())},decimalPoint(){switch(c){case"e":case"E":buffer+=read(),lexState="decimalExponent";return}if(util.isDigit(c)){buffer+=read(),lexState="decimalFraction";return}return newToken("numeric",sign*Number(buffer))},decimalFraction(){switch(c){case"e":case"E":buffer+=read(),lexState="decimalExponent";return}if(util.isDigit(c)){buffer+=read();return}return newToken("numeric",sign*Number(buffer))},decimalExponent(){switch(c){case"+":case"-":buffer+=read(),lexState="decimalExponentSign";return}if(util.isDigit(c)){buffer+=read(),lexState="decimalExponentInteger";return}throw invalidChar(read())},decimalExponentSign(){if(util.isDigit(c)){buffer+=read(),lexState="decimalExponentInteger";return}throw invalidChar(read())},decimalExponentInteger(){if(util.isDigit(c)){buffer+=read();return}return newToken("numeric",sign*Number(buffer))},hexadecimal(){if(util.isHexDigit(c)){buffer+=read(),lexState="hexadecimalInteger";return}throw invalidChar(read())},hexadecimalInteger(){if(util.isHexDigit(c)){buffer+=read();return}return newToken("numeric",sign*Number(buffer))},string(){switch(c){case"\\":read(),buffer+=escape();return;case'"':if(doubleQuote)return read(),newToken("string",buffer);buffer+=read();return;case"'":if(!doubleQuote)return read(),newToken("string",buffer);buffer+=read();return;case`
`:case"\r":throw invalidChar(read());case"\u2028":case"\u2029":separatorChar(c);break;case void 0:throw invalidChar(read())}buffer+=read()},start(){switch(c){case"{":case"[":return newToken("punctuator",read())}lexState="value"},beforePropertyName(){switch(c){case"$":case"_":buffer=read(),lexState="identifierName";return;case"\\":read(),lexState="identifierNameStartEscape";return;case"}":return newToken("punctuator",read());case'"':case"'":doubleQuote=read()==='"',lexState="string";return}if(util.isIdStartChar(c)){buffer+=read(),lexState="identifierName";return}throw invalidChar(read())},afterPropertyName(){if(c===":")return newToken("punctuator",read());throw invalidChar(read())},beforePropertyValue(){lexState="value"},afterPropertyValue(){switch(c){case",":case"}":return newToken("punctuator",read())}throw invalidChar(read())},beforeArrayValue(){if(c==="]")return newToken("punctuator",read());lexState="value"},afterArrayValue(){switch(c){case",":case"]":return newToken("punctuator",read())}throw invalidChar(read())},end(){throw invalidChar(read())}};function newToken(re,ee){return{type:re,value:ee,line:line$1,column}}function literal(re){for(const ee of re){if(peek()!==ee)throw invalidChar(read());read()}}function escape(){switch(peek()){case"b":return read(),"\b";case"f":return read(),"\f";case"n":return read(),`
`;case"r":return read(),"\r";case"t":return read(),"	";case"v":return read(),"\v";case"0":if(read(),util.isDigit(peek()))throw invalidChar(read());return"\0";case"x":return read(),hexEscape();case"u":return read(),unicodeEscape();case`
`:case"\u2028":case"\u2029":return read(),"";case"\r":return read(),peek()===`
`&&read(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw invalidChar(read());case void 0:throw invalidChar(read())}return read()}function hexEscape(){let re="",ee=peek();if(!util.isHexDigit(ee)||(re+=read(),ee=peek(),!util.isHexDigit(ee)))throw invalidChar(read());return re+=read(),String.fromCodePoint(parseInt(re,16))}function unicodeEscape(){let re="",ee=4;for(;ee-- >0;){const ne=peek();if(!util.isHexDigit(ne))throw invalidChar(read());re+=read()}return String.fromCodePoint(parseInt(re,16))}const parseStates={start(){if(token.type==="eof")throw invalidEOF();push()},beforePropertyName(){switch(token.type){case"identifier":case"string":key=token.value,parseState="afterPropertyName";return;case"punctuator":pop();return;case"eof":throw invalidEOF()}},afterPropertyName(){if(token.type==="eof")throw invalidEOF();parseState="beforePropertyValue"},beforePropertyValue(){if(token.type==="eof")throw invalidEOF();push()},beforeArrayValue(){if(token.type==="eof")throw invalidEOF();if(token.type==="punctuator"&&token.value==="]"){pop();return}push()},afterPropertyValue(){if(token.type==="eof")throw invalidEOF();switch(token.value){case",":parseState="beforePropertyName";return;case"}":pop()}},afterArrayValue(){if(token.type==="eof")throw invalidEOF();switch(token.value){case",":parseState="beforeArrayValue";return;case"]":pop()}},end(){}};function push(){let re;switch(token.type){case"punctuator":switch(token.value){case"{":re={};break;case"[":re=[];break}break;case"null":case"boolean":case"numeric":case"string":re=token.value;break}if(root$5===void 0)root$5=re;else{const ee=stack[stack.length-1];Array.isArray(ee)?ee.push(re):Object.defineProperty(ee,key,{value:re,writable:!0,enumerable:!0,configurable:!0})}if(re!==null&&typeof re=="object")stack.push(re),Array.isArray(re)?parseState="beforeArrayValue":parseState="beforePropertyName";else{const ee=stack[stack.length-1];ee==null?parseState="end":Array.isArray(ee)?parseState="afterArrayValue":parseState="afterPropertyValue"}}function pop(){stack.pop();const re=stack[stack.length-1];re==null?parseState="end":Array.isArray(re)?parseState="afterArrayValue":parseState="afterPropertyValue"}function invalidChar(re){return syntaxError(re===void 0?`JSON5: invalid end of input at ${line$1}:${column}`:`JSON5: invalid character '${formatChar(re)}' at ${line$1}:${column}`)}function invalidEOF(){return syntaxError(`JSON5: invalid end of input at ${line$1}:${column}`)}function invalidIdentifier(){return column-=5,syntaxError(`JSON5: invalid identifier character at ${line$1}:${column}`)}function separatorChar(re){console.warn(`JSON5: '${formatChar(re)}' in strings is not valid ECMAScript; consider escaping`)}function formatChar(re){const ee={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(ee[re])return ee[re];if(re<" "){const ne=re.charCodeAt(0).toString(16);return"\\x"+("00"+ne).substring(ne.length)}return re}function syntaxError(re){const ee=new SyntaxError(re);return ee.lineNumber=line$1,ee.columnNumber=column,ee}var stringify=function re(ee,ne,ae){const ce=[];let le="",ue,he,fe="",me;if(ne!=null&&typeof ne=="object"&&!Array.isArray(ne)&&(ae=ne.space,me=ne.quote,ne=ne.replacer),typeof ne=="function")he=ne;else if(Array.isArray(ne)){ue=[];for(const Ce of ne){let Se;typeof Ce=="string"?Se=Ce:(typeof Ce=="number"||Ce instanceof String||Ce instanceof Number)&&(Se=String(Ce)),Se!==void 0&&ue.indexOf(Se)<0&&ue.push(Se)}}return ae instanceof Number?ae=Number(ae):ae instanceof String&&(ae=String(ae)),typeof ae=="number"?ae>0&&(ae=Math.min(10,Math.floor(ae)),fe="          ".substr(0,ae)):typeof ae=="string"&&(fe=ae.substr(0,10)),ge("",{"":ee});function ge(Ce,Se){let Te=Se[Ce];switch(Te!=null&&(typeof Te.toJSON5=="function"?Te=Te.toJSON5(Ce):typeof Te.toJSON=="function"&&(Te=Te.toJSON(Ce))),he&&(Te=he.call(Se,Ce,Te)),Te instanceof Number?Te=Number(Te):Te instanceof String?Te=String(Te):Te instanceof Boolean&&(Te=Te.valueOf()),Te){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof Te=="string")return ve(Te);if(typeof Te=="number")return String(Te);if(typeof Te=="object")return Array.isArray(Te)?Ee(Te):ye(Te)}function ve(Ce){const Se={"'":.1,'"':.2},Te={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let ke="";for(let Fe=0;Fe<Ce.length;Fe++){const De=Ce[Fe];switch(De){case"'":case'"':Se[De]++,ke+=De;continue;case"\0":if(util.isDigit(Ce[Fe+1])){ke+="\\x00";continue}}if(Te[De]){ke+=Te[De];continue}if(De<" "){let Oe=De.charCodeAt(0).toString(16);ke+="\\x"+("00"+Oe).substring(Oe.length);continue}ke+=De}const Ne=me||Object.keys(Se).reduce((Fe,De)=>Se[Fe]<Se[De]?Fe:De);return ke=ke.replace(new RegExp(Ne,"g"),Te[Ne]),Ne+ke+Ne}function ye(Ce){if(ce.indexOf(Ce)>=0)throw TypeError("Converting circular structure to JSON5");ce.push(Ce);let Se=le;le=le+fe;let Te=ue||Object.keys(Ce),ke=[];for(const Fe of Te){const De=ge(Fe,Ce);if(De!==void 0){let Oe=be(Fe)+":";fe!==""&&(Oe+=" "),Oe+=De,ke.push(Oe)}}let Ne;if(ke.length===0)Ne="{}";else{let Fe;if(fe==="")Fe=ke.join(","),Ne="{"+Fe+"}";else{let De=`,
`+le;Fe=ke.join(De),Ne=`{
`+le+Fe+`,
`+Se+"}"}}return ce.pop(),le=Se,Ne}function be(Ce){if(Ce.length===0)return ve(Ce);const Se=String.fromCodePoint(Ce.codePointAt(0));if(!util.isIdStartChar(Se))return ve(Ce);for(let Te=Se.length;Te<Ce.length;Te++)if(!util.isIdContinueChar(String.fromCodePoint(Ce.codePointAt(Te))))return ve(Ce);return Ce}function Ee(Ce){if(ce.indexOf(Ce)>=0)throw TypeError("Converting circular structure to JSON5");ce.push(Ce);let Se=le;le=le+fe;let Te=[];for(let Ne=0;Ne<Ce.length;Ne++){const Fe=ge(String(Ne),Ce);Te.push(Fe!==void 0?Fe:"null")}let ke;if(Te.length===0)ke="[]";else if(fe==="")ke="["+Te.join(",")+"]";else{let Ne=`,
`+le,Fe=Te.join(Ne);ke=`[
`+le+Fe+`,
`+Se+"]"}return ce.pop(),le=Se,ke}};const JSON5={parse,stringify};var lib=JSON5;const Settings=()=>{const[re,ee]=reactExports.useState(!1);reactExports.useEffect(()=>{async function ke(){const Fe=await(await fetch(`${BANNER_URL}/banner_config.json`)).text(),De=lib.parse(Fe);ee(De.enable===1)}try{ke()}catch(Ne){console.error(Ne)}},[]);const[ne,ae,ce,le,ue,he,fe,me,ge,ve,ye,be,Ee,Ce,Se,Te]=useLocalSettings(ke=>[ke.nsfwFriendly,ke.setNsfwFriendly,ke.photosensitiveFriendly,ke.setPhotosensitiveFriendly,ke.startFeed,ke.setStartFeed,ke.rpcNode,ke.setRpcNode,ke.customRpcNode,ke.setCustomRpcNode,ke.tilted,ke.setTilted,ke.imgproxy,ke.setImgproxy,ke.has_seen_banner,ke.setHasSeenBanner]);return jsxs(Page,{children:[jsxs("div",{className:styles$u.info,children:[jsx$1("h1",{children:"Local Settings"}),jsx$1("p",{children:"Those settings are non portable and only stored in your current browser cache."}),jsx$1(Line,{className:styles$u.title_line})]}),jsx$1("div",{className:styles$u.localSettings,children:jsxs("div",{className:styles$u.fields,children:[jsx$1("p",{children:jsx$1("strong",{children:"Feed preferences"})}),jsx$1(Checkbox$1,{alt:`click to ${ne?"disable":"enable"} the blurring of NSFW tokens on feeds`,checked:ne,onCheck:ae,label:"Allow NSFW on feeds"}),jsx$1(Checkbox$1,{alt:`click to ${ce?"disable":"enable"} the blurring of photosensitive tokens on feeds`,checked:ce,onCheck:le,label:"Allow Photosensitive on feeds"}),jsx$1(Select,{label:"Start Feed",value:{label:ue.replace(/[^\x00-\xFF]/g,""),value:ue},options:FEED_LIST.map(ke=>({label:ke.replace(/[^\x00-\xFF]/g,""),value:ke})),onChange:ke=>{he(ke.value)}}),jsx$1(Line,{}),jsx$1(ThemeSelection,{label:"Theme"}),jsx$1(Line,{}),jsx$1(Select,{label:"RPC Node",value:{label:fe,value:fe},options:rpc_nodes.map(ke=>({label:ke,value:ke})),onChange:ke=>{me(ke.value)}}),fe==="custom"&&jsx$1(Input$2,{name:"custom-rpc",value:ge,onChange:ve,placeholder:"url to a RPC node",label:"Custom RPC node"}),jsx$1(Line,{}),jsx$1(Checkbox$1,{alt:`click to ${ye?"disable":"enable"} fool around (a throwback of the 2023 april fool)`,title:`click to ${ye?"disable":"enable"} fool around (a throwback of the 2023 april fool)`,checked:ye,onCheck:be,className:"no-fool",label:"Fool Around"}),jsx$1(Line,{}),jsx$1(Checkbox$1,{alt:`click to ${Ee?"disable":"enable"} imgproxy thumbnails. Not using imgproxy will load fullsize images from ipfs directly instead (performance penalty)`,title:`click to ${Ee?"disable":"enable"} imgproxy thumbnails. Not using imgproxy will load fullsize images from ipfs directly instead (performance penalty)`,checked:Ee,onCheck:Ce,initial:!0,label:"Use thumbnails to increase performance"}),re&&jsx$1(Checkbox$1,{alt:`click to ${Te?"disable":"enable"} last event banner (this is automatically reset for you on new announcements)`,title:`click to ${Te?"disable":"enable"} last event banner (this is automatically reset for you on new announcements)`,checked:Se,onCheck:Te,label:"Hide banner for last announcement"})]})})]})};async function uploadFileToIPFSProxy$1(re,ee="Preparing OBJKT"){const ne=useModalStore.getState().step,ae=useModalStore.getState().show,ce=new FormData,le=mime.lookup(re.path);if(!le){ae("Filetype Error",`Could not determine the type from file ${re.path}`);return}const ue=re.size?` (${(re.size/1e6).toFixed(1)}mb)`:"";return ne(ee,`uploading ${re.path}${ue} as ${le}`),console.debug(`uploading ${re.path} as ${le}`),ce.append("asset",new File([re.blob],re.path,{type:le})),(await axios.post("https://ipfsproxy.teia.rocks/single",ce,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:fe=>{const me=Number(fe.loaded/fe.total*100).toFixed(1);ne(ee,`uploading ${re.path}${ue} as ${le}
## ${me}%`)}})).data.cid}async function uploadMultipleFilesToIPFSProxy(re){const ee=new FormData,ne=useModalStore.getState().step;return ne("Preparing OBJKT","uploading multiple files"),re.forEach(ce=>{const le=mime.lookup(ce.path);console.debug(`uploading ${ce.path} as ${le}`),ee.append("assets",new File([ce.blob],encodeURI(ce.path),{type:le||""}))}),(await axios.post("https://ipfsproxy.teia.rocks/multiple",ee,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:ce=>{const le=Number(ce.loaded/ce.total*100).toFixed(1);ne("Preparing OBJKT",`uploading multiple files
## ${le}%`)}})).data.cid}const isDoubleMint=async re=>{const ee=distExports.gql`
    query uriQuery($address: String!, $ids: [String!] = "") {
      tokens(
        order_by: { minted_at: desc }
        where: {
          editions: { _gt: "0" }
          metadata_status: { _eq: "processed" }
          artifact_uri: { _in: $ids }
          artist_address: { _eq: $address }
        }
      ) {
        token_id
      }
    }
  `,{proxyAddress:ne,address:ae}=useUserStore.getState(),{show:ce}=useModalStore.getState(),{errors:le,data:ue}=await fetchGraphQL(ee,"uriQuery",{address:ne||ae,ids:[re]});return console.debug(ue),le?(ce(`GraphQL Error: ${JSON.stringify(le)}`),!0):ue?!ue.tokens||ue.tokens.every(({editions:fe})=>fe===0)?!1:(ce(`Duplicate mint detected: [#${ue.tokens[0].token_id}](/objkt/${ue.tokens[0].token_id}) is already minted`),!0):!1},prepareFile=async({name:re,description:ee,tags:ne,address:ae,file:ce,cover:le,thumbnail:ue,rights:he,rightsUri:fe,language:me,accessibility:ge,contentRating:ve,formats:ye})=>{var De,Oe,Re,Be,Le,je,Ge;const be=useModalStore.getState().step,Ee=useModalStore.getState().show,Ce=!ce.mimeType.startsWith("image");if(!((De=ce.file)!=null&&De.name)){console.error("Incomplete item received",ce),Ee("No name for file","");return}const Se=await uploadFileToIPFSProxy$1({blob:new Blob([ce.buffer]),path:ce.file.name,size:(Oe=ce.file)==null?void 0:Oe.size});be("Preparing OBJKT",`Successfully uploaded file to IPFS: ${Se}`);const Te=`ipfs://${Se}`;if(await isDoubleMint(Te))throw Error("Double Mint",{cause:"You already minted the same token."});ye.length>0&&(ye[0].uri=Te,console.debug("file format",ye[0]));let ke=Te;if(Ce&&le){const qe=await uploadFileToIPFSProxy$1({blob:new Blob([le.buffer]),path:`cover_${le.file?le.file.name:(Re=le.format)==null?void 0:Re.fileName}`,size:(Be=le.file)==null?void 0:Be.size});if(be("Preparing OBJKT",`Successfully uploaded cover to IPFS: ${qe}`),console.debug(`Successfully uploaded cover to IPFS: ${qe}`),ke=`ipfs://${qe}`,le!=null&&le.format){const Ue=JSON.parse(JSON.stringify(le.format));Ue.uri=ke,Ue.fileName=`cover_${Ue.fileName}`,ye.push(Ue),console.debug("cover format",Ue)}}let Ne=IPFS_DEFAULT_THUMBNAIL_URI;if(ue&&((Le=ue.file)==null?void 0:Le.type)==="image/gif"){if(console.debug("GIF format detected, we will use the artifact's cid as the thumbnail to avoid uploading twice"),Ne=`${Te}`,ue!=null&&ue.format){const qe=JSON.parse(JSON.stringify(ue.format));qe.uri=Ne,qe.fileName=`thumbnail_${qe.fileName}`,ye.push(qe),console.debug("thumbnail format",qe)}}else if(ue){if(Ne=`ipfs://${await uploadFileToIPFSProxy$1({blob:new Blob([ue.buffer]),path:`thumbnail_${ue.file?ue.file.name:(je=ue.format)==null?void 0:je.fileName}`,size:(Ge=ue.file)==null?void 0:Ge.size})}`,ue!=null&&ue.format){const Ue=JSON.parse(JSON.stringify(ue.format));Ue.uri=Ne,Ue.fileName=`thumbnail_${Ue.fileName}`,ye.push(Ue),console.debug("thumbnail format",Ue)}}else console.debug("Using default thumbnail CID");const Fe=await buildMetadataFile({name:re,description:ee,tags:ne,uri:Te,address:ae,displayUri:ke,thumbnailUri:Ne,rights:he,rightsUri:fe,language:me,accessibility:ge,contentRating:ve,formats:ye});return be("Preparing OBJKT","Uploading metadata file"),console.debug("Uploading metadata file:",JSON.parse(Fe)),await uploadFileToIPFSProxy$1({blob:new Blob([buffer$2.Buffer.from(Fe)]),path:"metadata.json"})},prepareDirectory=async({name:re,description:ee,tags:ne,address:ae,files:ce,cover:le,thumbnail:ue,generateDisplayUri:he,rights:fe,rightsUri:me,language:ge,accessibility:ve,contentRating:ye,formats:be})=>{var Fe,De,Oe;const Ee=useModalStore.getState().step,Ce=await uploadFilesToDirectory(ce);Ee("Preparing OBJKT",`Successfully uploaded directory to IPFS: ${Ce.directory}`),console.debug("Successfully uploaded directory to IPFS:",Ce.directory);const Se=`ipfs://${Ce.directory}`;be.length>0&&(be[0].uri=Se,console.debug("file format",be[0]));let Te="";if(he){const Re=await uploadFileToIPFSProxy$1({blob:new Blob([le.buffer]),path:`cover_${((Fe=le.format)==null?void 0:Fe.fileName)||"format"}`});if(Ee("Preparing OBJKT","Successfully uploaded cover to IPFS"),console.debug(`Successfully uploaded cover to IPFS: ${Re}`),Te=`ipfs://${Re}`,le!=null&&le.format){const Be=JSON.parse(JSON.stringify(le.format));Be.uri=Te,Be.fileName=`cover_${Be.fileName}`,be.push(Be),console.debug("cover format",Be)}}let ke=IPFS_DEFAULT_THUMBNAIL_URI;if(he&&ue&&(ke=`ipfs://${await uploadFileToIPFSProxy$1({blob:new Blob([ue.buffer]),path:((De=ue.format)==null?void 0:De.fileName)||ue.title||((Oe=ue.file)==null?void 0:Oe.name)||""})}`,ue!=null&&ue.format)){const Be=JSON.parse(JSON.stringify(ue.format));Be.uri=ke,Be.fileName=`thumbnail_${Be.fileName}`,be.push(Be),console.debug("thumbnail format",Be)}const Ne=await buildMetadataFile({name:re,description:ee,tags:ne,uri:Se,address:ae,displayUri:Te,thumbnailUri:ke,rights:fe,rightsUri:me,language:ge,accessibility:ve,contentRating:ye,formats:be});return console.debug("Uploading metadata file:",JSON.parse(Ne)),await uploadFileToIPFSProxy$1({blob:new Blob([buffer$2.Buffer.from(Ne)]),path:"metadata.json"})};function not_directory(re){return re.blob.type!==MIMETYPE.DIRECTORY}async function uploadFilesToDirectory(re){return console.debug("uploadFilesToDirectory",re),re=re.filter(not_directory),{directory:await uploadMultipleFilesToIPFSProxy(re)}}async function buildMetadataFile({name:re,description:ee,tags:ne,uri:ae,address:ce,displayUri:le="",thumbnailUri:ue=IPFS_DEFAULT_THUMBNAIL_URI,rights:he,rightsUri:fe,language:me,accessibility:ge,contentRating:ve,formats:ye}){const be={name:re,description:ee,tags:ne?ne.replace(/\s/g,"").split(","):[],symbol:"OBJKT",artifactUri:ae,displayUri:le,thumbnailUri:ue,creators:[ce],formats:ye,decimals:0,isBooleanAmount:!1,shouldPreferSymbol:!1,rights:he,date:new Date().toISOString(),mintingTool:"https://teia.art/mint"};if(ge&&(be.accessibility=ge),ve&&(be.contentRating=ve),he==="custom"&&fe){const Ee=await uploadFileToIPFSProxy$1({blob:new Blob([buffer$2.Buffer.from(JSON.stringify(fe))]),path:"license.json"});be.rightsUri=`ipfs://${Ee}`}return me!=null&&(be.language=me),JSON.stringify(be)}const query_tz=distExports.gql`
  query addressQuery($address: String!) {
    teia_users(where: { user_address: { _eq: $address } }) {
      user_address
      name
      metadata {
        data
      }
    }
  }
`,query_name_exist=distExports.gql`
  query nameExists($name: String!) {
    teia_users(where: { name: { _eq: $name } }) {
      user_address
    }
  }
`;async function fetchTz(re){const{errors:ee,data:ne}=await fetchGraphQL(query_tz,"addressQuery",{address:re});return ee&&console.error(ee),get$5(ne,"teia_users.0",{user_address:re})}const Subjkt=()=>{const[re,ee]=reactExports.useState(!0),[ne,ae]=reactExports.useState(""),[ce,le]=reactExports.useState(""),[ue,he]=reactExports.useState(""),[fe,me]=reactExports.useState(),[ge,ve]=reactExports.useState(""),ye="Editing Profile",[be,Ee,Ce]=useUserStore(De=>[De.address,De.proxyAddress,De.registry]),Se=useModalStore(De=>De.show),Te=Ee||be;reactExports.useEffect(()=>{(async()=>{var Oe,Re;if(Te){const Be=await fetchTz(Te);if(console.debug("Subjkt Infos:",Be),Be){const{metadata:Le,name:je}=Be;je&&ae(je),Le&&!_$1.isEmpty(Le==null?void 0:Le.data)&&((Oe=Le==null?void 0:Le.data)!=null&&Oe.description&&le(Le.data.description),(Re=Le==null?void 0:Le.data)!=null&&Re.identicon&&he(Le.data.identicon))}}ee(!1)})()},[]);const ke=async()=>{if(!ne)return!1;const{errors:De,data:Oe}=await fetchGraphQL(query_name_exist,"nameExists",{name:ne});if(De)return console.error(De),!1;if(Oe.teia_users.length===0)return!1;const Re=Oe.teia_users[0];return Re.user_address===be||Re.user_address===Ee?!1:(console.error(`name exists and is registered to ${Re.user_address}`),Se("Subjkt",`The provided name is already registered by ${Re.user_address}`),!0)},Ne=async()=>{if(await ke())return;let De=ue;const Oe=useModalStore.getState().show,Re=useModalStore.getState().step;if(Re(ye,"uploading SUBJKT"),fe){const[je]=fe;Re(ye,"uploading identicon");const Ge=buffer$2.Buffer.from(await je.arrayBuffer());De=`ipfs://${await uploadFileToIPFSProxy$1({blob:new Blob([Ge]),path:je.name},ye)}`}const Be=JSON.stringify({description:ce,identicon:De});Re(ye,"uploading metadatas"),console.debug("Uploading metadatas file to IPFS",JSON.parse(Be));const Le=await uploadFileToIPFSProxy$1({blob:new Blob([buffer$2.Buffer.from(Be)]),path:"profile_metadata.json"});if(Le==null){Oe(`${ye} (Error)`,"Error uploading SUBJKT"),console.error("Error uploading metadatas file to IPFS");return}console.debug("Uploaded metadatas file to IPFS",Le),Re(ye,"Minting SUBJKT"),he(De),await Ce(ne,Le)},Fe=async De=>{if(De.target.files){const[Oe]=De.target.files;ve(URL.createObjectURL(Oe)),me(De.target.files)}};return!re&&jsxs(Page,{children:[jsx$1("h1",{children:"Subjkt Settings"}),jsx$1(Line,{className:styles$u.title_line}),jsxs("div",{className:styles$u.subjkt_editor,children:[jsxs("div",{className:styles$u.fields,children:[jsx$1(Identicon,{className:styles$u.identicon,address:be,logo:ge||ue}),jsx$1("input",{type:"file",onChange:Fe,title:"avatar file"})]}),jsxs("div",{className:styles$u.fields,children:[jsx$1(Input$2,{name:"subjkt",value:ne,onChange:ae,onBlur:De=>{/[^A-Za-z0-9-._]/.test(De.target.value)&&Se("Subjkt contains invalid characters. This field can only contain: letters (a-z A-Z), numbers (0-9), . (dot), - (dash), _ (underscore)")},placeholder:"can contain letters (a-z A-Z), numbers (0-9), . (dot), - (dash), _ (underscore)",label:"Username",pattern:"^[A-Za-z0-9-._]*$"}),jsx$1(Input$2,{name:"description",value:ce,onChange:le,placeholder:"(Max length 500 characters)",label:"Description"})]})]}),jsx$1(Button,{shadow_box:!0,onClick:Ne,children:"Save Profile"}),jsx$1("div",{style:{display:"inline"},children:jsxs("p",{style:{paddingTop:"7.5px"},children:[jsx$1("span",{children:"Link your Twitter, Discord, GitHub, and website with "}),jsx$1("span",{children:jsx$1("a",{style:{fontWeight:"bold"},target:"_blank",href:"https://profiles.tzkt.io",rel:"noreferrer",children:"TzKT Profiles"})})]})})]})},container$c="_container_1nrpp_216",headline$1="_headline_1nrpp_221",loading_containter$1="_loading_containter_1nrpp_228",section$3="_section_1nrpp_235",section_title$2="_section_title_1nrpp_260",proposal="_proposal_1nrpp_264",proposal_id="_proposal_id_1nrpp_274",proposal_title="_proposal_title_1nrpp_281",proposal_information="_proposal_information_1nrpp_286",user_vote$1="_user_vote_1nrpp_297",proposal_buttons="_proposal_buttons_1nrpp_303",styles$s={container:container$c,headline:headline$1,loading_containter:loading_containter$1,section:section$3,section_title:section_title$2,proposal,proposal_id,proposal_title,proposal_information,user_vote:user_vote$1,proposal_buttons};function LoadingDaoMessage({message:re}){return jsx$1("div",{className:styles$s.loading_containter,children:jsx$1(Loading,{message:re??"Loading DAO information"})})}const TABS$3=[{title:"Parameters",to:""},{title:"Proposals",to:"proposals"},{title:"Submit",to:"submit",private:!0}];function DAO(){const[re]=useStorage(DAO_GOVERNANCE_CONTRACT),[ee]=useDaoGovernanceParameters(re),[ne]=useDaoProposals(re),[ae]=useDaoRepresentatives(re),ce=useUserStore(he=>he.address),le=ae==null?void 0:ae[ce],[ue]=useDaoTokenBalance(ce);return jsx$1(Page,{title:"Teia DAO",children:jsxs("div",{className:styles$s.container,children:[jsx$1("h1",{className:styles$s.headline,children:"Teia DAO"}),!ee||!ne?jsx$1(LoadingDaoMessage,{}):jsxs(Fragment,{children:[jsx$1(Tabs,{tabs:TABS$3,filter:he=>ue===0&&!le&&he.private?null:he}),jsx$1(Outlet,{})]})]})})}async function downloadJsonFileFromIpfs(re){const ee=await fetch(CIDToURL(re));return ee.ok||console.error(`There was a problem downloading a file from ipfs with cid ${re}`),ee.json()}async function uploadFileToIPFSProxy(re){var ae;const ee=new FormData;ee.append("asset",re);const ne=await axios.post("https://ipfsproxy.teia.rocks/single",ee,{headers:{"Content-Type":"multipart/form-data"}});return(ae=ne==null?void 0:ne.data)==null?void 0:ae.cid}const useDaoStore=create$2()(subscribeWithSelector(persist((re,ee)=>({voteProposal:async(ne,ae,ce,le)=>{const ue=useUserStore.getState().handleOp,he=useModalStore.getState().showError,fe=useModalStore.getState().step,me="Vote DAO proposal";fe(me,"Waiting for confirmation",!0);try{const ge=await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT),ve={proposal_id:ne,vote:{[ae]:[["unit"]]},max_checkpoints:ce},ye=ge.methodsObject.token_vote(ve),be=await ue(ye,me);return le==null||le(),be}catch(ge){he(me,ge)}},voteProposalAsRepresentative:async(ne,ae,ce)=>{const le=useUserStore.getState().handleOp,ue=useModalStore.getState().showError,he=useModalStore.getState().step,fe="Vote DAO proposal as representative";he(fe,"Waiting for confirmation",!0);try{const me=await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT),ge={proposal_id:ne,vote:{[ae]:[["unit"]]}},ve=me.methodsObject.representatives_vote(ge),ye=await le(ve,fe);return ce==null||ce(),ye}catch(me){ue(fe,me)}},cancelProposal:async(ne,ae,ce)=>{const le=useUserStore.getState().handleOp,ue=useModalStore.getState().showError,he=useModalStore.getState().step,fe="Cancel DAO proposal";he(fe,"Waiting for confirmation",!0);try{const ge=(await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT)).methods.cancel_proposal(ne,ae),ve=await le(ge,fe);return ce==null||ce(),ve}catch(me){ue(fe,me)}},evaluateVotingResult:async(ne,ae)=>{const ce=useUserStore.getState().handleOp,le=useModalStore.getState().showError,ue=useModalStore.getState().step,he="Evaluate DAO proposal voting result";ue(he,"Waiting for confirmation",!0);try{const me=(await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT)).methods.evaluate_voting_result(ne),ge=await ce(me,he);return ae==null||ae(),ge}catch(fe){le(he,fe)}},executeProposal:async(ne,ae)=>{const ce=useUserStore.getState().handleOp,le=useModalStore.getState().showError,ue=useModalStore.getState().step,he="Execute DAO proposal";ue(he,"Waiting for confirmation",!0);try{const me=(await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT)).methods.execute_proposal(ne),ge=await ce(me,he);return ae==null||ae(),ge}catch(fe){le(he,fe)}},createProposal:async(ne,ae,ce,le)=>{const ue=useUserStore.getState().address,he=useUserStore.getState().handleOp,fe=useModalStore.getState().show,me=useModalStore.getState().showError,ge=useModalStore.getState().step,ve="Submit DAO proposal";if(!ne||ne.length<10){fe(ve,"The proposal title must be at least 10 characters long");return}if(!ae){fe(ve,"The proposal description needs to be uploaded first to IPFS");return}ge(ve,"Waiting for confirmation",!0);try{const ye=await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT),be=await Tezos.wallet.at(DAO_TOKEN_CONTRACT),Ee={owner:ue,operator:DAO_GOVERNANCE_CONTRACT,token_id:0},Ce={title:char2Bytes(ne),description:char2Bytes(`ipfs://${ae}`),kind:ce};let Se=Tezos.wallet.batch();Se=Se.withContractCall(be.methods.update_operators([{add_operator:Ee}])),Se=Se.withContractCall(ye.methodsObject.create_proposal(Ce)),Se=Se.withContractCall(be.methods.update_operators([{remove_operator:Ee}]));const Te=await he(Se,ve);return le==null||le(),Te}catch(ye){me(ve,ye)}},createTextProposal:async(ne,ae,ce)=>{const le={text:[["unit"]]};return ee().createProposal(ne,ae,le,ce)},createTransferMutezProposal:async(ne,ae,ce,le)=>{const ue=useModalStore.getState().show;for(const{destination:he}of ce){if(!(he&&validateAddress(he)===3)){ue("Submit DAO proposal",`The provided address is not a valid tezos address: ${he}`);return}const fe={transfer_mutez:ce};return ee().createProposal(ne,ae,fe,le)}},createTransferTokenProposal:async(ne,ae,ce,le,ue,he)=>{const fe=useModalStore.getState().show;if(!(ce&&validateAddress(ce)===3)){fe("Submit DAO proposal",`The provided token contract address is not a valid tezos address: ${ce}`);return}for(const{destination:ge}of ue)if(!(ge&&validateAddress(ge)===3)){fe("Submit DAO proposal",`The provided address is not a valid tezos address: ${ge}`);return}const me={transfer_token:{fa2:ce,token_id:le,distribution:ue}};return ee().createProposal(ne,ae,me,he)},createLambdaFunctionProposal:async(ne,ae,ce,le)=>{const ue=useModalStore.getState().show;let he;try{he=new Parser$2().parseMichelineExpression(ce)}catch{ue("Create DAO proposal","The provided lambda function Michelson code is not correct");return}const fe={lambda_function:he};return ee().createProposal(ne,ae,fe,le)},claimTokens:async()=>{const ne=useUserStore.getState().address,ae=useUserStore.getState().handleOp,ce=useModalStore.getState().show,le=useModalStore.getState().showError,ue=useModalStore.getState().step,he="Claim DAO tokens";if(ue(he,"Claiming Teia DAO tokens",!0),!ne){ce(he,"You need to sync your wallet first");return}const fe=await downloadJsonFileFromIpfs(DISTRIBUTION_MAPPING_IPFS_PATH);if(fe){if(!(ne in fe)){ce(he,`Your wallet is not in the distribution list.
Sorry, you don't qualify to claim any tokens.`);return}}else{ce(he,"Could not download the distribution map from IPFS");return}const me=fe[ne],ge=await downloadJsonFileFromIpfs(MERKLE_DATA_IPFS_PATHS[me]);if(!ge){ce(he,"Could not download the user Merkle proofs from IPFS");return}const ve=ge[ne],ye=parseInt(ve.tokens)/DAO_TOKEN_DECIMALS,be=await getClaimedDaoTokens(ne),Ee=ye-(be||0);if(Ee===0){ce(he,"Sorry, but you already claimed all your tokens");return}ue(he,`You are allowed to claim ${Ee} DAO tokens`);try{const Se=(await Tezos.wallet.at(DAO_TOKEN_CLAIM_CONTRACT)).methods.claim(ve.proof,ve.leafDataPacked);return await ae(Se,he,{amount:0,storageLimit:400})}catch(Ce){le(he,Ce)}}}),{name:"dao",storage:createJSONStorage(()=>localStorage)}))),ipfs_link="_ipfs_link_yqy4p_1",styles$r={ipfs_link};function TeiaUserLink({address:re,alias:ee,shorten:ne,className:ae,children:ce}){return jsx$1("a",{href:`/tz/${re}`,className:ae??"",children:ce??ee??(ne?walletPreview(re):re)})}function DefaultLink({href:re,className:ee,children:ne}){return jsx$1("a",{href:re,target:"_blank",rel:"noreferrer",className:ee??"",children:ne??"link"})}function TzktLink({link:re,className:ee,children:ne}){return jsx$1(DefaultLink,{href:`https://tzkt.io/${re}`,className:ee,children:ne??"TzKT link"})}function TezosAddressLink({address:re,alias:ee,shorten:ne,className:ae,children:ce}){return jsx$1(TzktLink,{link:re,className:ae,children:ce??ee??(ne?walletPreview(re):re)})}function TokenLink({fa2:re,id:ee,className:ne,children:ae}){const ce=TOKENS.find(ue=>ue.fa2===re),le=ce?ce.multiasset?`${ce.name}#${ee}`:ce.name:`token #${ee}`;return ce!=null&&ce.website?jsx$1(DefaultLink,{href:`${ce.website}${ee}`,className:ne,children:ae??le}):jsx$1(TzktLink,{link:`${re}/tokens/${ee}`,className:ne,children:ae??le})}function IpfsLink({cid:re,type:ee,className:ne,children:ae}){return jsx$1(DefaultLink,{href:CIDToURL(re,ee??"IPFS"),className:`${styles$r.ipfs_link} ${ne??""}`,children:ae??re})}function Claim(){const re=useDaoStore(ae=>ae.claimTokens),[ee,ne]=reactExports.useState(!1);return jsx$1(Page,{title:"Claim DAO tokens",large:!0,children:jsxs("div",{className:styles$s.container,children:[jsxs("div",{className:styles$s.headline,children:[jsx$1("h1",{children:"Welcome to the TEIA tokens claim page!"}),jsx$1("p",{children:"Here you can claim your Teia DAO tokens."}),jsx$1(SvgTeiaDao,{})]}),jsxs("section",{className:styles$s.section,children:[jsx$1("p",{children:'By owning TEIA tokens, you are part of the Teia DAO LLC and eligible to put forward and vote on DAO proposals for Teia. Teia DAO tokens, (or "TEIA tokens") are specifically designed and intended for governance purposes within the Teia DAO ecosystem.'}),jsxs("p",{children:["If your Tezos wallet satisfies the conditions laid out in the"," ",jsx$1(DefaultLink,{href:"https://blog.teia.art/blog/fact-sheet-token-drop",children:"token distribution fact sheet"})," ","you are eligible to claim your TEIA tokens during the claiming period (August 20th, 2023 to November 20th, 2023). You can find a table with all eligible Tezos addresses and the amount of tokens in this"," ",jsx$1(DefaultLink,{href:"https://docs.google.com/spreadsheets/d/11jFANEUsvNSc9vQGD7sc46n_BOp8v0tGOLY1LG0KENk/edit?usp=sharing",children:"token distribution spreadsheet"}),"."]}),jsxs("p",{children:["For any questions or assistance regarding the token claim process get in touch with the team via discord or mail at"," ",jsx$1("a",{href:"mailto:info@teia.art",children:"info@teia.art"})]})]}),jsx$1(Line,{}),jsxs("section",{className:styles$s.section,children:[jsx$1("h1",{className:styles$s.section_title,children:"How to Claim your Tokens"}),jsxs("ol",{children:[jsxs("li",{counter:"1",children:[jsx$1("b",{children:"Sync your wallet"})," with teia.art (top right corner). Please check the URL before syncing your wallet: The only official TEIA token claim page is at www.teia.art/claim"]}),jsxs("li",{counter:"2",children:[jsx$1("b",{children:"Read the legal disclaimer below."})," It outlines important information regarding the nature of TEIA tokens and your responsibilities as a token holder."]}),jsxs("li",{counter:"3",children:[jsx$1("b",{children:"Confirm you have read the disclaimer"})," by checking the box at the bottom of this page to get access to the claim button."]}),jsxs("li",{counter:"4",children:[jsx$1("b",{children:'Click on the "Claim TEIA tokens" button'})," at the bottom of this page to initiate the token claim process and confirm the operation with your wallet. Your tokens should arrive in your wallet after a few minutes."]})]}),jsx$1("p",{children:"If you own multiple eligible wallets, unsync your wallet and repeat these steps for each of your wallets."})]}),jsx$1(Line,{}),jsxs("section",{className:styles$s.section,children:[jsx$1("h1",{className:styles$s.section_title,children:"Legal Disclaimer"}),jsx$1("p",{children:`By claiming your Teia DAO tokens ("TEIA tokens"), you agree to be bound by the terms and conditions set forth in this disclaimer. If you do not agree with any part of this disclaimer, don't participate in the token claim process!`}),jsxs("ol",{children:[jsxs("li",{counter:"1",children:[jsx$1("b",{children:"Governance only:"})," The TEIA tokens are intended solely for governance purposes within the Teia DAO ecosystem. TEIA tokens do not represent any form of investment in the Teia DAO or any associated entity. TEIA tokens are not intended to be securities or investment assets. The Teia DAO LLC does not intend to generate and distribute profits among its members. Teia does not sell TEIA tokens and does not intend to generate profit with the tokens. Claiming TEIA tokens via this claim page is free."]}),jsxs("li",{counter:"2",children:[jsx$1("b",{children:"No investment advice:"})," The information provided on this claim page, as well as any other informational materials, blog articles, or announcements published by Teia DAO LLC, are strictly for informational purposes. It does not constitute investment advice or any form of recommendation. The Teia DAO team does not endorse or recommend the purchase or sale of TEIA tokens as investment assets. The Teia DAO team makes no guarantees or representations regarding the future value, utility, or performance of TEIA tokens. The value of TEIA tokens may fluctuate, and you may experience losses if you choose to acquire or trade them. The Teia DAO team disclaims any responsibility for such losses."]}),jsxs("li",{counter:"3",children:[jsx$1("b",{children:"DAO membership:"})," By claiming and/or holding TEIA tokens, you become a member of the Teia DAO LLC. Teia does not require you to provide any personal information, as long as you hold less than 10% of tokens in circulation. Every address is limited to 400k TEIA tokens (5% of total supply) initially. This limit can be adjusted between 1% and 10% of total supply via DAO vote. If you want to stop being a Teia DAO member, you can send all your TEIA tokens to the"," ",jsx$1(DefaultLink,{href:"https://tzkt.io/KT1J9FYz29RBQi1oGLw8uXyACrzXzV1dHuvb/operations/",children:"Teia Treasury Address"}),"."]}),jsxs("li",{counter:"4",children:[jsx$1("b",{children:"Regulatory compliance:"})," The distribution and use of TEIA tokens may be subject to various laws, regulations, and restrictions in different jurisdictions. It is your sole responsibility to ensure compliance with any applicable laws and regulations before participating in the TEIA token claim process. The Teia DAO team does not provide legal, regulatory, or tax advice."]}),jsxs("li",{counter:"5",children:[jsx$1("b",{children:"No liability:"})," To the maximum extent permitted by applicable law, the Teia DAO team, its contributors, affiliates, partners, and any other associated entities shall not be liable for any direct, indirect, incidental, consequential, or punitive damages arising out of or in connection with the TEIA tokens or your participation in the TEIA token claim process."]}),jsxs("li",{counter:"6",children:[jsx$1("b",{children:"Risk acknowledgement:"})," By participating in the TEIA token claim process, you acknowledge and assume the risks associated with blockchain technology, cryptocurrencies, and the volatility of the cryptocurrency market. You agree to hold the Teia DAO team harmless against any claims, demands, actions, or liabilities arising from your participation."]}),jsxs("li",{counter:"7",children:[jsx$1("b",{children:"Updates and amendments:"})," The Teia DAO team reserves the right to modify, update, or amend this disclaimer at any time without prior notice."]})]}),jsx$1("br",{}),jsx$1(Checkbox$1,{alt:`click to ${ee?"decline":"accept"} the legal disclaimer`,checked:ee,onCheck:ne,label:"I have read and understood the legal disclaimer and agree to it"}),jsx$1("i",{children:"You need to accept the disclaimer in order to access the token claim button."})]}),ee&&jsxs(Fragment,{children:[jsx$1(Line,{}),jsxs("section",{className:styles$s.section,children:[jsx$1("h1",{className:styles$s.section_title,children:"Claim your TEIA tokens!"}),jsx$1("p",{children:jsx$1(Button,{shadow_box:!0,onClick:re,children:"Claim TEIA tokens"})})]}),jsx$1(Line,{}),jsxs("section",{className:styles$s.section,children:[jsx$1("h1",{className:styles$s.section_title,children:"Troubleshooting"}),jsx$1("p",{children:"Here are some of the most common solutions if the token claim process fails."}),jsxs("ol",{children:[jsx$1("li",{children:"Unsync and resync your wallet from teia.art"}),jsx$1("li",{children:"Check if you have enough funds for the transaction in your wallet. The transaction cost for the claim process is about 0.1-0.2 tez."}),jsx$1("li",{children:"Clear your browser cache."}),jsxs("li",{children:["Switch the rpc node in the"," ",jsx$1(DefaultLink,{href:"/settings",children:"config menu"}),", reload the page and try again."]})]})]})]})]})})}const details="_details_fqfiu_217",container$b="_container_fqfiu_228",transfers="_transfers_fqfiu_234",code="_code_fqfiu_245",styles$q={details,container:container$b,transfers,code};function Details({label:re,className:ee,children:ne}){return jsxs("details",{className:`${styles$q.details} ${ee??""}`,children:[jsx$1("summary",{children:re}),jsx$1("div",{className:styles$q.container,children:ne})]})}function TezTansfersDetails({label:re,transfers:ee,aliases:ne,className:ae}){return jsx$1(Details,{label:re,className:ae,children:jsx$1("table",{className:styles$q.transfers,children:jsx$1("tbody",{children:ee.map((ce,le)=>jsxs("tr",{children:[jsxs("td",{children:[ce.amount/1e6," tez"]}),jsxs("td",{children:["to"," ",jsx$1(TezosAddressLink,{address:ce.destination,alias:ne==null?void 0:ne[ce.destination],shorten:!0})]})]},le))})})})}function TokenTansfersDetails({label:re,fa2:ee,transfers:ne,aliases:ae,className:ce}){const le=TOKENS.find(he=>he.fa2===ee),ue=(le==null?void 0:le.decimals)??1;return jsx$1(Details,{label:re,className:ce,children:jsx$1("table",{className:styles$q.transfers,children:jsx$1("tbody",{children:ne.map((he,fe)=>jsxs("tr",{children:[jsxs("td",{children:[he.amount/ue," ",!le||le.multiasset?`edition${he.amount/ue===1?"":"s"}`:le.name]}),jsxs("td",{children:["to"," ",jsx$1(TezosAddressLink,{address:he.destination,alias:ae==null?void 0:ae[he.destination],shorten:!0})]})]},fe))})})})}function CodeDetails({label:re,code:ee,className:ne}){return jsx$1(Details,{label:re,className:ne,children:jsx$1("pre",{className:styles$q.code,children:ee})})}const votes="_votes_1pvl1_216",yes_vote="_yes_vote_1pvl1_230",no_vote="_no_vote_1pvl1_235",abstain_vote="_abstain_vote_1pvl1_240",empty_vote="_empty_vote_1pvl1_245",styles$p={votes,yes_vote,no_vote,abstain_vote,empty_vote};function Votes({votes:re,labels:ee={yes:"yes",no:"no",abstain:"abs",empty:"--"},showValues:ne,onClick:ae,className:ce}){const{yes:le,no:ue,abstain:he}=re,fe=Number(le)+Number(ue)+Number(he);return jsxs("button",{onClick:ge=>{ge.preventDefault(),ae()},className:`${styles$p.votes} ${ce??""}`,children:[le>0&&jsx$1("span",{className:styles$p.yes_vote,style:{width:`${100*le/fe}%`},children:ne?Math.round(le):ee.yes}),ue>0&&jsx$1("span",{className:styles$p.no_vote,style:{width:`${100*ue/fe}%`},children:ne?Math.round(ue):ee.no}),he>0&&jsx$1("span",{className:styles$p.abstain_vote,style:{width:`${100*he/fe}%`},children:ne?Math.round(he):ee.abstain}),fe===0&&jsx$1("span",{className:styles$p.empty_vote,style:{width:"100%"},children:ne?0:ee.empty})]})}const getTimeAgo=re=>{const ee=Math.round(new Date(re).getTime()/1e3),ae=Math.round(new Date().getTime()/1e3)-ee;let ce,le;return ae/60<60?(ce="minutes",le=Math.round(ae/60),le<=1&&(ce="minute")):ae/(60*60)<24?(ce="hours",le=Math.round(ae/(60*60)),le<=1&&(ce="hour")):(ce="days",le=Math.round(ae/(60*60*24)),le<=1&&(ce="day")),`${le} ${ce} ago`},getWordDate=re=>{const ee=new Date(re),ne={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};return ee.toLocaleString("en-GB",ne)};function parseLambda(re){const ne=new Parser$2().parseJSON(JSON.parse(re));return emitMicheline(ne,{indent:"    ",newline:`
`}).replace(/0x0[0123]{1}[\w\d]{42}/g,le=>`"${encodePubKey(le.slice(2))}"`).replace(/0x0[0123]{1}[\w\d]{40}/g,le=>`"${encodeKeyHash(le.slice(2))}"`)}function Proposal({proposalId:re}){const[ee]=useStorage(DAO_GOVERNANCE_CONTRACT),[ne]=useDaoGovernanceParameters(ee),[ae,ce]=useDaoProposals(ee),[le]=useDaoRepresentatives(ee),ue=useUserStore(je=>je.address),he=le==null?void 0:le[ue],[fe,me]=useDaoTokenBalance(ue),[ge,ve]=useDaoUserVotes(ue,ee),[ye,be]=useDaoCommunityVotes(he,ee),[Ee]=useDaoUsersAliases(ue,le,ae);if(!ne||!ae)return;const Ce=ae[re],Se=ne[Ce.gp_index],Te=fe>0,ke=fe>=Se.min_amount/DAO_TOKEN_DECIMALS,Ne=parseInt(Se.vote_period),Fe=parseInt(Se.wait_period),De=new Date(Ce.timestamp);De.setDate(De.getDate()+Ne);const Oe=new Date(Ce.timestamp);Oe.setDate(Oe.getDate()+Ne+Fe);const Re=new Date,Be=Re>De,Le=Re>Oe;return Ce.id=re,Ce.voteExpirationTime=De,Ce.waitExpirationTime=Oe,Ce.voteFinished=Be,Ce.waitFinished=Le,jsxs("div",{className:styles$s.proposal,children:[jsxs("h3",{className:styles$s.proposal_title,children:[jsxs(Link,{"aria-label":`Proposal ${re}`,to:`${PATH.PROPOSAL}/${re}`,className:styles$s.proposal_id,children:["#",re]}),bytes2Char(Ce.title)]}),jsxs("div",{className:styles$s.proposal_information,children:[jsxs("div",{children:[jsx$1(ProposalDescription,{proposal:Ce,aliases:Ee}),jsx$1(ProposalVotesSummary,{tokenVotes:Ce.token_votes,representativesVotes:Ce.representatives_votes,quorum:Ce.quorum,gp:Se,showUserVotes:fe>0||he||ge&&Object.keys(ge).length>0,userCommunity:he,userVote:ge==null?void 0:ge[re],userCommunityVote:ye==null?void 0:ye[re]})]}),jsx$1(ProposalActions,{proposalId:re,canVote:Ce.status.open&&!Be&&ke&&!(ge!=null&&ge[re]),canVoteAsRepresentative:Ce.status.open&&!Be&&he&&!(ye!=null&&ye[re]),canEvaluate:Ce.status.open&&Be&&Te,canExecute:Ce.status.approved&&Le&&Te,canCancel:(Ce.status.open||Ce.status.approved)&&(Ce.issuer===ue||ee.guardians===ue),callback:()=>{ce(),me(),ve(),be()}})]})]})}function ProposalDescription({proposal:re,aliases:ee}){const ne=bytes2Char(re.description),ae=ne.split("//")[1];return jsxs("div",{children:[jsxs("p",{children:["Proposed by"," ",jsx$1(TeiaUserLink,{address:re.issuer,alias:ee==null?void 0:ee[re.issuer],shorten:!0})," ","on ",getWordDate(re.timestamp),"."]}),jsx$1("p",{children:`Status: ${Object.keys(re.status)[0].toUpperCase()}`}),!re.status.cancelled&&(re.voteFinished?!re.waitFinished&&jsxs("p",{children:["Waiting period ends on ",getWordDate(re.waitExpirationTime),"."]}):jsxs("p",{children:["Voting period ends on ",getWordDate(re.voteExpirationTime),"."]})),jsxs("p",{children:["Description: ",ae?jsx$1(IpfsLink,{cid:ae,children:"IPFS"}):ne]}),jsx$1(ProposalContent,{content:re.kind,aliases:ee})]})}function ProposalContent({content:re,aliases:ee}){if(re.text)return jsx$1("p",{children:"Effect: Approves a text proposal."});if(re.transfer_mutez){const ne=re.transfer_mutez,ae=ne.reduce((ce,le)=>ce+le.amount/1e6,0);return ne.length===1?jsxs("p",{children:["Effect: Transfers ",ae," tez to"," ",jsx$1(TezosAddressLink,{address:ne[0].destination,alias:ee==null?void 0:ee[ne[0].destination],shorten:!0}),"."]}):jsxs(Fragment,{children:[jsxs("p",{children:["Effect: Transfers ",ae," tez."]}),jsx$1(TezTansfersDetails,{label:"See transfer details",transfers:ne,aliases:ee})]})}else if(re.transfer_token){const ne=re.transfer_token.fa2,ae=re.transfer_token.token_id,ce=TOKENS.find(fe=>fe.fa2===ne),le=(ce==null?void 0:ce.decimals)??1,ue=re.transfer_token.distribution,he=ue.reduce((fe,me)=>fe+me.amount/le,0);return ue.length===1?jsxs("p",{children:["Effect: Transfers ",he," ",(!ce||ce.multiasset)&&`edition${he===1?"":"s"} of `,jsx$1(TokenLink,{fa2:ne,id:ae})," to"," ",jsx$1(TezosAddressLink,{address:ue[0].destination,alias:ee==null?void 0:ee[ue[0].destination],shorten:!0}),"."]}):jsxs(Fragment,{children:[jsxs("p",{children:["Effect: Transfers ",he," ",(!ce||ce.multiasset)&&`edition${he===1?"":"s"} of `,jsx$1(TokenLink,{fa2:ne,id:ae}),"."]}),jsx$1(TokenTansfersDetails,{label:"See transfer details",fa2:ne,transfers:ue,aliases:ee})]})}else return jsxs(Fragment,{children:[jsx$1("p",{children:"Effect: Executes a lambda function."}),jsx$1(CodeDetails,{label:"See Micheline code",code:parseLambda(re.lambda_function)})]})}function ProposalVotesSummary({tokenVotes:re,representativesVotes:ee,quorum:ne,gp:ae,showUserVotes:ce,userCommunity:le,userVote:ue,userCommunityVote:he}){const[fe,me]=reactExports.useState(!1),ge=ae.supermajority/100,ve=ae.vote_method.linear?DAO_TOKEN_DECIMALS:Math.pow(DAO_TOKEN_DECIMALS,.5),ye=ee.total>0?Math.min(ae.representatives_share/ee.total,ae.representative_max_share)/100:0,be=ne*ye,Ee=parseInt(re.total)+ee.total*be,Ce=parseInt(re.positive)+ee.positive*be,Se=parseInt(re.negative)+ee.negative*be,Te=parseInt(re.abstain)+ee.abstain*be,ke=Ee>ne,Ne=Ce>(Ce+Se)*ge,Fe=ke?0:ne-Ee,De=Ne?0:Ee===0?ve:Se*ge/(1-ge)-Ce;return jsxs("div",{children:[jsx$1("p",{children:"Token votes:"}),jsx$1(Votes,{votes:{yes:re.positive/ve,no:re.negative/ve,abstain:re.abstain/ve},showValues:fe,onClick:()=>me(!fe)}),jsx$1("p",{children:"Representatives votes:"}),jsx$1(Votes,{votes:{yes:ee.positive*be/ve,no:ee.negative*be/ve,abstain:ee.abstain*be/ve},showValues:fe,onClick:()=>me(!fe)}),jsx$1("p",{children:"Combined votes:"}),jsx$1(Votes,{votes:{yes:Ce/ve,no:Se/ve,abstain:Te/ve},showValues:fe,onClick:()=>me(!fe)}),jsxs("p",{children:["Passes supermajority condition?"," ",Ne?"Yes.":`No, ${Math.ceil(De/ve)} yes vote${De!==ve?"s":""} still missing.`]}),jsxs("p",{children:["Passes minimum quorum condition?"," ",ke?"Yes.":`No, ${Math.ceil(Fe/ve)} vote${Fe!==ve?"s":""} still missing.`]}),ce&&jsxs("p",{children:["Your votes:",jsx$1("span",{className:styles$s.user_vote,children:jsx$1(Votes,{votes:{yes:ue!=null&&ue.vote.yes?ue.weight/ve:0,no:ue!=null&&ue.vote.no?ue.weight/ve:0,abstain:ue!=null&&ue.vote.abstain?ue.weight/ve:0},showValues:fe,onClick:()=>me(!fe)})}),le&&jsx$1("span",{className:styles$s.user_vote,children:jsx$1(Votes,{votes:{yes:he!=null&&he.yes?be/ve:0,no:he!=null&&he.no?be/ve:0,abstain:he!=null&&he.abstain?be/ve:0},showValues:fe,onClick:()=>me(!fe)})})]})]})}function ProposalActions({proposalId:re,canVote:ee,canVoteAsRepresentative:ne,canEvaluate:ae,canExecute:ce,canCancel:le,callback:ue}){const he=useDaoStore(ye=>ye.voteProposal),fe=useDaoStore(ye=>ye.voteProposalAsRepresentative),me=useDaoStore(ye=>ye.cancelProposal),ge=useDaoStore(ye=>ye.evaluateVotingResult),ve=useDaoStore(ye=>ye.executeProposal);if(ee||ne||ae||ce||le)return jsxs("div",{children:[ee&&jsxs("div",{children:[jsx$1("p",{children:"Vote with your tokens:"}),jsxs("div",{className:styles$s.proposal_buttons,children:[jsx$1(Button,{onClick:()=>he(re,"yes",null,ue),shadow_box:!0,fit:!0,children:"yes"}),jsx$1(Button,{onClick:()=>he(re,"no",null,ue),shadow_box:!0,fit:!0,children:"no"}),jsx$1(Button,{onClick:()=>he(re,"abstain",null,ue),shadow_box:!0,fit:!0,children:"abstain"})]})]}),ne&&jsxs("div",{children:[jsx$1("p",{children:"Vote as representative:"}),jsxs("div",{className:styles$s.proposal_buttons,children:[jsx$1(Button,{onClick:()=>fe(re,"yes",ue),shadow_box:!0,fit:!0,children:"yes"}),jsx$1(Button,{onClick:()=>fe(re,"no",ue),shadow_box:!0,fit:!0,children:"no"}),jsx$1(Button,{onClick:()=>fe(re,"abstain",ue),shadow_box:!0,fit:!0,children:"abstain"})]})]}),ae&&jsxs("div",{children:[jsx$1("p",{children:"Evaluate the proposal:"}),jsx$1("div",{className:styles$s.proposal_buttons,children:jsx$1(Button,{onClick:()=>ge(re,ue),shadow_box:!0,fit:!0,children:"evaluate"})})]}),ce&&jsxs("div",{children:[jsx$1("p",{children:"Execute the proposal:"}),jsx$1("div",{className:styles$s.proposal_buttons,children:jsx$1(Button,{onClick:()=>ve(re,ue),shadow_box:!0,fit:!0,children:"execute"})})]}),le&&jsxs("div",{children:[jsx$1("p",{children:"Cancel the proposal:"}),jsx$1("div",{className:styles$s.proposal_buttons,children:jsx$1(Button,{onClick:()=>me(re,!0,ue),shadow_box:!0,fit:!0,children:"cancel"})})]})]})}function ProposalDisplay(){const[re]=useStorage(DAO_GOVERNANCE_CONTRACT),[ee]=useDaoGovernanceParameters(re),[ne]=useDaoProposals(re),{id:ae}=useParams();return ne&&!ne[ae]?jsx$1(RootErrorBoundary,{title:"Wrong DAO proposal id",msg:`The last DAO proposal id is ${re.counter-1}`}):jsx$1(Page,{title:`DAO proposal #${ae}`,children:jsxs("div",{className:styles$s.container,children:[jsx$1("h1",{className:styles$s.headline,children:"DAO proposal"}),!ee||!ne?jsx$1(LoadingDaoMessage,{message:"Loading proposal information"}):jsxs(Fragment,{children:[jsx$1("section",{className:styles$s.section,children:jsx$1(Proposal,{proposalId:ae})}),jsx$1(PaginationButtons,{path:PATH.PROPOSAL,current:parseInt(ae),min:0,max:re.counter-1})]})]})})}const section$2="_section_15hzx_1",section_title$1="_section_title_15hzx_11",parameters_list="_parameters_list_15hzx_15",proposal_form="_proposal_form_15hzx_19",proposal_form_fields="_proposal_form_fields_15hzx_23",proposal_form_field="_proposal_form_field_15hzx_23",styles$o={section:section$2,section_title:section_title$1,parameters_list,proposal_form,proposal_form_fields,proposal_form_field},TeiaTokenMetadata=()=>{var ue,he;const[re,ee]=reactExports.useState(null),[ne,ae]=reactExports.useState(!0),[ce,le]=reactExports.useState(null);return reactExports.useEffect(()=>{(async()=>{try{const me=await getTzktData("/v1/tokens?contract=KT1QrtA753MSv8VGxkDrKKyJniG5JtuHHbtV&tokenId=0");me&&me.length>0?ee(me[0]):le("No token data found.")}catch(me){le("Failed to fetch token data."),console.error("Error fetching token data:",me)}finally{ae(!1)}})()},[]),ne?jsx$1("p",{children:"Loading token data..."}):ce?jsx$1("p",{children:ce}):re?jsxs("div",{className:"teia-token-metadata",children:[jsxs("h2",{children:[jsx$1("strong",{children:"Symbol:"})," ",re.metadata.symbol]}),jsx$1("br",{}),jsxs("p",{children:[jsx$1("strong",{children:"Token ID:"})," ",re.tokenId]}),jsxs("p",{children:[jsx$1("strong",{children:"Token Standard:"})," ",re.standard]}),jsxs("p",{children:[jsx$1("strong",{children:"Contract Alias:"})," ",re.contract.alias]}),jsxs("p",{children:[jsx$1("strong",{children:"Contract Address:"})," ",re.contract.address]}),jsxs("p",{children:[jsx$1("strong",{children:"First Minter Alias:"})," ",((ue=re.firstMinter)==null?void 0:ue.alias)||"N/A"]}),jsxs("p",{children:[jsx$1("strong",{children:"First Minter Address:"})," ",((he=re.firstMinter)==null?void 0:he.address)||"N/A"]}),jsxs("p",{children:[jsx$1("strong",{children:"Transfers Count:"})," ",re.transfersCount]}),jsxs("p",{children:[jsx$1("strong",{children:"Balances Count:"})," ",re.balancesCount]}),jsxs("p",{children:[jsx$1("strong",{children:"Holders Count:"})," ",re.holdersCount]}),jsxs("p",{children:[jsx$1("strong",{children:"Total Minted:"})," ",(parseInt(re.totalMinted)/1e6).toFixed(2)," TEIA"]}),jsxs("p",{children:[jsx$1("strong",{children:"Total Burned:"})," ",(parseInt(re.totalBurned)/1e6).toFixed(2)," TEIA"]}),jsxs("p",{children:[jsx$1("strong",{children:"Total Supply:"})," ",(parseInt(re.totalSupply)/1e6).toFixed(2)," TEIA"]})]}):jsx$1("p",{children:"No token data available."})},strong="_strong_1uioe_216",container$a="_container_1uioe_220",inline="_inline_1uioe_240",fit="_fit_1uioe_244",small="_small_1uioe_247",disabled="_disabled_1uioe_250",full="_full_1uioe_255",primary="_primary_1uioe_268",selected$1="_selected_1uioe_272",active="_active_1uioe_272",menu$1="_menu_1uioe_276",secondary="_secondary_1uioe_292",box="_box_1uioe_307",shadow_box="_shadow_box_1uioe_336",left$1="_left_1uioe_353",button_theme="_button_theme_1uioe_357",pagination_button="_pagination_button_1uioe_368",daoDonateButton="_daoDonateButton_1uioe_376",donateInput="_donateInput_1uioe_397",donateButton="_donateButton_1uioe_414",styles$n={strong,container:container$a,inline,fit,small,disabled,full,primary,selected:selected$1,active,menu:menu$1,secondary,box,shadow_box,left:left$1,button_theme,pagination_button,daoDonateButton,donateInput,donateButton},DonateInput=()=>{const[re,ee]=reactExports.useState(""),[ne]=useUserStore(le=>[le.donate]),ae=le=>{ee(le.target.value)},ce=()=>{const le=parseFloat(re);if(isNaN(le)||le<=0){alert("Please enter a valid donation amount");return}ne(le,DAO_TREASURY_CONTRACT)};return jsxs("div",{className:styles$n.daoDonateButton,children:[jsx$1("h4",{children:"Donate to DAO Treasury"}),jsxs("p",{children:["Address: ",DAO_TREASURY_CONTRACT]}),jsx$1("input",{type:"number",value:re,onChange:ae,placeholder:"Enter Number in XTZ",inputMode:"decimal",pattern:"[0-9]*",min:"0",className:styles$n.donateInput}),jsx$1("br",{}),jsx$1("input",{type:"button",value:`Donate ${re} XTZ`,onClick:ce,className:styles$n.donateButton})]})};function DaoParameters(){const[re]=useStorage(DAO_GOVERNANCE_CONTRACT),[ee]=useDaoGovernanceParameters(re),[ne]=useDaoProposals(re),[ae]=useDaoRepresentatives(re),[ce]=useDaoMemberCount(0),[le]=useBalance(DAO_TREASURY_CONTRACT),[ue]=useDaoTokenBalance(DAO_TREASURY_CONTRACT),he=useUserStore(Te=>Te.address),fe=ae==null?void 0:ae[he],[me]=useDaoTokenBalance(he),[ge]=useDaoUserVotes(he,re),[ve]=useDaoCommunityVotes(fe,re),[ye]=useDaoUsersAliases(he,ae,ne);if(!ee||!ne||!ae)return jsx$1(LoadingDaoMessage,{});const be=ee[re.gp_counter-1],Ee=be.vote_method.linear?DAO_TOKEN_DECIMALS:Math.pow(DAO_TOKEN_DECIMALS,.5),Ce=ge?Object.keys(ge).length:0,Se=ve?Object.keys(ve).length:0;return jsxs(Fragment,{children:[he&&jsxs(Fragment,{children:[jsxs("section",{className:styles$o.section,children:[jsx$1("h1",{className:styles$o.section_title,children:"User Information"}),jsx$1("p",{children:"Your activities with the TEIA DAO is listed here."}),jsxs("ul",{className:styles$o.parameters_list,children:[jsxs("li",{children:["Address: ",jsx$1(TeiaUserLink,{address:he,shorten:!0})]}),fe&&jsxs("li",{children:["Representative for ",fe,"."]}),jsxs("li",{children:["DAO Token Balance: ",Math.round(me*10)/10," TEIA"]}),jsxs("li",{children:["Submitted Proposals:"," ",Object.values(ne).reduce((Te,ke)=>Te+(ke.issuer===he?1:0),0)]}),jsxs("li",{children:["Voted in ",Ce," Proposal",Ce===1?"":"s","."]}),fe&&jsxs("li",{children:["Voted in ",Se," Proposal",Se===1?"":"s"," as community representative."]})]})]}),jsx$1(Line,{})]}),jsxs("section",{className:styles$o.section,children:[jsx$1("h1",{className:styles$o.section_title,children:"DAO Information"}),jsxs("p",{children:["Community-wide statistics and usage activities of the TEIA DAO. To learn more about the the ideas and philosophies behind the DAO, visit the"," ",jsx$1("a",{href:"https://blog.teia.art/blog/dao-test-launch",target:"_blank",rel:"noopener noreferrer",children:"official blog post"})," ","after the DAO's first launch. For detailed information on governance processes, check out the"," ",jsx$1("a",{href:"https://github.com/teia-community/teia-docs/wiki/Governance-on-Teia",target:"_blank",rel:"noopener noreferrer",children:"Governance on Teia Documentation"}),"."]}),jsx$1("p",{children:"The information for the DAO is sourced from tzkt.io and cross-referenced with TEIA's own indexer, both pulling from Tezos' on-chain data."}),jsxs("ul",{className:styles$o.parameters_list,children:[jsxs("li",{children:["Members:"," ",jsxs(TzktLink,{link:`${DAO_TOKEN_CONTRACT}/tokens/0/holders`,children:[ce," (Click for List of Existing Members)"]})]}),jsxs("li",{children:["Total Number of Proposals: ",Object.keys(ne).length]}),jsxs("li",{children:["Open Proposals:"," ",Object.values(ne).reduce((Te,ke)=>Te+(ke.status.open?1:0),0)]}),jsxs("li",{children:["Executed Proposals:"," ",Object.values(ne).reduce((Te,ke)=>Te+(ke.status.executed?1:0),0)]}),jsxs("li",{children:["Rejected Proposals:"," ",Object.values(ne).reduce((Te,ke)=>Te+(ke.status.rejected?1:0),0)]}),jsxs("li",{children:["Cancelled Proposals:"," ",Object.values(ne).reduce((Te,ke)=>Te+(ke.status.cancelled?1:0),0)]}),jsxs("li",{children:["Treasury Balance (",DAO_TREASURY_CONTRACT,"): ",Math.round(le)," ","tez and ",Math.round(ue*10)/10," TEIA tokens"]})]}),jsx$1("br",{}),jsx$1(DonateInput,{destinationAddress:re.treasury}),jsx$1("br",{}),jsx$1(TeiaTokenMetadata,{}),jsx$1("p",{children:jsx$1("a",{href:"https://quipuswap.com/swap/tez-KT1QrtA753MSv8VGxkDrKKyJniG5JtuHHbtV_0",target:"_blank",rel:"noreferrer",children:"Convert XTZ to TEIA on Quipuswap (Decentralized Exchange)"})})]}),jsx$1(Line,{}),jsxs("section",{className:styles$o.section,children:[jsx$1("h1",{className:styles$o.section_title,children:"Community Representatives"}),jsx$1("p",{children:"Community Representatives are for voting members who are interested in delegating their votes to other members of the community - people may want to entrust their voting power to someone who is more active in the DAO proposal process to represent them, for example. Otherwise, the DAO defaults to direct participation based on the number of TEIA tokens each wallet holds."}),jsxs("p",{children:["For more information, read the"," ",jsx$1("a",{href:"https://github.com/teia-community/teia-docs/wiki/Governance-on-Teia",target:"_blank",rel:"noopener noreferrer",children:"Governance on Teia Documentation"})," ","for more details."]}),jsx$1("h4",{children:"Currently Active Community Representatives"}),jsx$1("ul",{className:styles$o.parameters_list,children:Object.entries(ae).map(([Te,ke])=>jsxs("li",{children:[`${ke}: `,jsx$1(TeiaUserLink,{address:Te,alias:ye==null?void 0:ye[Te],shorten:!0})]},ke))})]}),jsx$1(Line,{}),jsxs("section",{className:styles$o.section,children:[jsx$1("h1",{className:styles$o.section_title,children:"Current DAO Governance Parameters"}),jsx$1("p",{children:"How the current governance model works in terms of voting, timing, and weighting of each vote. These parameters can change at any time - however, to change these parameters it must be done so by the approval of the DAO itself."}),jsxs("ul",{className:styles$o.parameters_list,children:[jsxs("li",{children:["Vote Method:"," ",be.vote_method.linear?"linear weight":"quadratic weight"]}),jsxs("li",{children:["Required Quorum: ",re.quorum/Ee," weighted votes"]}),jsxs("li",{children:["Percentage for Supermajority: ",be.supermajority,"% positive votes"]}),jsxs("li",{children:["Representatives Vote Share: ",be.representatives_share,"% of the quorum"]}),jsxs("li",{children:["Representative Max Vote Share: ",be.representative_max_share,"% of the quorum"]}),jsxs("li",{children:["Proposal Voting Period: ",be.vote_period," Days"]}),jsxs("li",{children:["Proposal Waiting Period: ",be.wait_period," Days"]}),jsxs("li",{children:["Number of Tokens to Escrow to Submit a Proposal:"," ",be.escrow_amount/DAO_TOKEN_DECIMALS," TEIA tokens"]}),jsxs("li",{children:["Minimum Number of Tokens Required to Vote on a Proposal:"," ",be.min_amount/DAO_TOKEN_DECIMALS," TEIA tokens"]})]}),jsxs("p",{children:["Currently TEIA's marketplace contract is handled by"," ",jsx$1("a",{href:"https://core-team-multisig.onrender.com/proposals",target:"_blank",children:"TEIA's Core Team Multisig"})," ",`for teia.art's day-to-day activities. TEIA token holders are legally defined as "operating members" of TEIA DAO LLC, which gives them ultimate authority over the actions and functions of the community, expressed through the voting and proposal mechanisms of the DAO itself.`]})]}),jsx$1(Line,{}),jsxs("section",{className:styles$o.section,children:[jsx$1("h1",{className:styles$o.section_title,children:"Smart Contracts"}),jsx$1("p",{children:"The current set of smart contracts that keep the DAO running on a technical level. These contracts may be replaced or updated on occasion for adjustments or improvements, but can only be done through the approval of the DAO's proposal process."}),jsxs("ul",{className:styles$o.parameters_list,children:[jsxs("li",{children:["DAO Governance:"," ",jsx$1(TezosAddressLink,{address:DAO_GOVERNANCE_CONTRACT,shorten:!0})]}),jsxs("li",{children:["DAO Token: ",jsx$1(TezosAddressLink,{address:re.token,shorten:!0})]}),jsxs("li",{children:["DAO Treasury:"," ",jsx$1(TezosAddressLink,{address:re.treasury,shorten:!0})]}),jsxs("li",{children:["DAO Guardians:"," ",jsx$1(TezosAddressLink,{address:re.guardians,shorten:!0})]}),jsxs("li",{children:["DAO Administrator:"," ",jsx$1(TezosAddressLink,{address:re.administrator,shorten:!0})]}),jsxs("li",{children:["Community Representatives:"," ",jsx$1(TezosAddressLink,{address:re.representatives,shorten:!0})]})]})]}),jsx$1(Line,{}),jsxs("section",{className:styles$o.section,children:[jsx$1("h1",{className:styles$o.section_title,children:"Polls"}),jsx$1("p",{children:"TEIA's polling system is a community tool that any TEIA member can use for any purpose - it is often used for feature requests, testing interest or getting feedback for ideas (artistic or technical), measuring community sentiment around certain issues, or just for fun."}),jsxs("p",{children:["TEIA's polling system can be found ",jsx$1("a",{href:"/polls",children:"here."})," (The DAO is typically reserved for issues that affect core administration, budgeting, and existential issues that require the full participation of the community itself.)"]})]})]})}const PROPOSAL_STATUS_OPTIONS={toVote:"Proposals to vote",voted:"Already voted proposals",toEvaluate:"Proposals to evaluate",approved:"Approved proposals",toExecute:"Proposals to execute",executed:"Executed proposals",rejected:"Rejected proposals",cancelled:"Cancelled proposals"};function DaoProposals(){const[re,ee]=reactExports.useState("toVote"),[ne]=useStorage(DAO_GOVERNANCE_CONTRACT),[ae]=useDaoGovernanceParameters(ne),[ce]=useDaoProposals(ne),[le]=useDaoRepresentatives(ne),ue=useUserStore(be=>be.address),he=le==null?void 0:le[ue],[fe]=useDaoUserVotes(ue,ne),[me]=useDaoCommunityVotes(he,ne);if(!ae||!ce||!le)return jsx$1(LoadingDaoMessage,{});const ge=Object.fromEntries(Object.keys(PROPOSAL_STATUS_OPTIONS).map(be=>[be,[]])),ve=new Date;for(const be of Object.keys(ce).reverse()){const Ee=ce[be],Ce=ae[Ee.gp_index],Se=parseInt(Ce.vote_period),Te=parseInt(Ce.wait_period),ke=new Date(Ee.timestamp);ke.setDate(ke.getDate()+Se);const Ne=new Date(Ee.timestamp);Ne.setDate(Ne.getDate()+Se+Te),Ee.status.open?ve>ke?ge.toEvaluate.push(be):fe!=null&&fe[be]?he&&!(me!=null&&me[be])?ge.toVote.push(be):ge.voted.push(be):ge.toVote.push(be):Ee.status.approved?ve>Ne?ge.toExecute.push(be):ge.approved.push(be):Ee.status.executed?ge.executed.push(be):Ee.status.rejected?ge.rejected.push(be):Ee.status.cancelled&&ge.cancelled.push(be)}const ye=Object.keys(PROPOSAL_STATUS_OPTIONS).filter(be=>be==="toVote"||ge[be].length>0);return jsxs("section",{className:styles$o.section,children:[jsx$1("h1",{className:styles$o.section_title,children:"Teia DAO proposals"}),jsx$1(Select,{alt:"proposal group selection",value:{value:re,label:`${PROPOSAL_STATUS_OPTIONS[re]} (${ge[re].length})`},onChange:be=>ee(be.value),options:ye.map(be=>({value:be,label:`${PROPOSAL_STATUS_OPTIONS[be]} (${ge[be].length})`})),children:jsx$1(Line,{})}),jsx$1(ProposalGroup,{status:re,proposalIds:ge[re]})]})}function ProposalGroup({status:re,proposalIds:ee}){const ne=(()=>{switch(re){case"toVote":return ee.length>0?"These proposals are still in the voting phase and you didn't vote for them yet.":"There are no new proposals to vote at the moment.";case"voted":return"These proposals are still in the voting phase, but you already voted them.";case"toEvaluate":return"The voting period for these proposals has finished. You can evaluate their result to see if they are approved or rejected.";case"approved":return"These are approved proposals that are still in the waiting phase. Once the waiting phase finishes, you will be able to execute them.";case"toExecute":return"These proposals have been approved by the DAO and can be exectuded.";case"executed":return"These proposals have been executed already.";case"rejected":return"These proposals didn't reach the required quorum and/or supermajority. As a result, they were rejected by the DAO.";case"cancelled":return"These proposals were cancelled by the proposal issuer or the DAO guardians.";default:return""}})();return jsxs(Fragment,{children:[jsx$1("p",{children:ne}),ee.length>0&&jsx$1("ul",{children:ee.map((ae,ce)=>jsxs("li",{children:[jsx$1(Proposal,{proposalId:ae}),ce<ee.length-1&&jsx$1(Line,{})]},ae))})]})}const container$9="_container_lmgaj_1",ipfs_upload_button="_ipfs_upload_button_lmgaj_6",ipfs_result="_ipfs_result_lmgaj_19",allowed="_allowed_lmgaj_26",selected="_selected_lmgaj_33",styles$m={container:container$9,ipfs_upload_button,ipfs_result,allowed,selected},Upload=reactExports.forwardRef(({label:re,file:ee,placeHolder:ne,allowedTypes:ae,allowedTypesLabel:ce,children:le,onChange:ue=()=>null,...he},fe)=>{const{language:me}=useLanguage(),[ge,ve]=reactExports.useState(ne),ye=async Ee=>{const{files:Ce}=Ee.target,Se=Ce[0];if(!Se){ve(ne);return}ve(Se.name);const Te=Se.type===""?await getMimeType(Se):Se.type,ke=Buffer.from(await Se.arrayBuffer()),Ne=new FileReader;Ne.addEventListener("load",Fe=>{ue({title:ge,mimeType:Te,file:Se,buffer:ke,reader:Fe.target.result})}),Ne.readAsDataURL(Se)},be={type:"file",name:he.name||"file"};return ae&&(be.accept=ae.join(",")),jsxs("div",{className:styles$m.container,children:[jsx$1("strong",{children:re}),jsxs("label",{children:[ge,jsx$1("input",{...be,ref:fe,onChange:ye,...he})]}),jsxs("div",{className:styles$m.allowed,children:[me.mint.supports,": ",ce]}),le]})});function IpfsUploader({label:re,placeholder:ee,value:ne,onChange:ae,className:ce,displayUploadInformation:le=!0,children:ue}){const[he,fe]=reactExports.useState(void 0),me=ye=>{fe(ye.target.files[0]),ae("")},ge=async ye=>{ye.preventDefault(),ae(await uploadFileToIpfs(he,le))},ve=async ye=>{ye.preventDefault(),fe(void 0),ae("")};return jsxs("div",{className:`${styles$m.container} ${ce??""}`,children:[jsx$1("p",{children:jsx$1("strong",{children:re})}),!he&&jsxs("label",{children:[ee,jsx$1("input",{type:"file",onChange:me})]}),he&&ne===""&&jsxs(Fragment,{children:[jsxs("button",{onClick:ge,className:styles$m.ipfs_upload_button,children:["Upload ",he.name," to IPFS"]}),jsx$1(Button,{onClick:ve,small:!0,children:"Clear field"})]}),he&&ne!==""&&jsxs(Fragment,{children:[jsxs("p",{className:styles$m.ipfs_result,children:[jsxs("span",{children:[he.name," ",jsx$1(IpfsLink,{cid:ne,children:"IPFS"})]}),jsx$1(Button,{onClick:ve,small:!0,children:"Clear field"})]}),ue]})]})}async function uploadFileToIpfs(re,ee){const ne=useModalStore.getState().step,ae=useModalStore.getState().close;ee&&ne("IPFS upload",`Uploading ${re.name} to IPFS...`);const ce=await uploadFileToIPFSProxy(re);return ee&&ae(),ce}const PROPOSAL_KINDS={text:"Text proposal",transferTez:"Transfer tez proposal",transferToken:"Transfer token proposal",lambdaFunction:"Lambda function proposal"};function SubmitDaoProposals(){const[re,ee]=reactExports.useState("text"),[ne]=useStorage(DAO_GOVERNANCE_CONTRACT),[ae]=useDaoGovernanceParameters(ne),[,ce]=useDaoProposals(ne),le=useUserStore(ge=>ge.address),[ue,he]=useDaoTokenBalance(le);if(!ae)return jsx$1(LoadingDaoMessage,{});const me=ae[ne.gp_counter-1].escrow_amount/DAO_TOKEN_DECIMALS;return jsxs("section",{className:styles$o.section,children:[jsx$1("h1",{className:styles$o.section_title,children:"Submit a new DAO proposal"}),ue===0?jsx$1("p",{children:"Only DAO members can create proposals."}):ue<me?jsxs("p",{children:["A minimum of ",me," TEIA tokens are needed to create proposals."]}):jsxs(Fragment,{children:[jsx$1(Select,{alt:"proposal form selection",value:{value:re,label:PROPOSAL_KINDS[re]},onChange:ge=>ee(ge.value),options:Object.entries(PROPOSAL_KINDS).map(([ge,ve])=>({value:ge,label:ve})),children:jsx$1(Line,{})}),jsx$1(ProposalForm,{kind:re,callback:()=>{ce(),he()}})]})]})}function ProposalForm({kind:re,callback:ee}){switch(re){case"text":return jsxs(Fragment,{children:[jsxs("p",{children:["Use this form to create a DAO proposal for Teia. DAO proposals should primarily be used for significant decisions for the LLC and must be both practically and legally viable. For polling and smaller suggestions, please use the"," ",jsx$1("a",{href:"https://teia.art/polls",children:"Community poll tool"})]}),jsx$1("p",{children:"This proposal has no direct consequences on the blockchain. However, if accepted and executed, it should trigger some off-chain actions by one of the Teia DAO members (e.g. change a website UI, decide on a dog name, buy bread at the bakery). The proposal description will be stored in IPFS for archival purposes."}),jsx$1(TextProposalForm,{callback:ee})]});case"transferTez":return jsxs(Fragment,{children:[jsx$1("p",{children:"Use this form to create a proposal that, if accepted, will transfer the specified amount of XTZ from the DAO treasury to a list of Tezos addresses. The proposal description will be stored in IPFS for archival purposes."}),jsx$1(TransferTezProposalForm,{callback:ee})]});case"transferToken":return jsxs(Fragment,{children:[jsx$1("p",{children:"Use this form to create a proposal that, if accepted, it will transfer the specified amount of token editions from the DAO treasury to a list of Tezos addresses. The proposal description will be stored in IPFS for archival purposes."}),jsx$1(TransferTokenProposalForm,{callback:ee})]});case"lambdaFunction":return jsxs(Fragment,{children:[jsx$1("p",{children:"Use this form to create a proposal that, if accepted, will execute some smart contract code stored in a Michelson lambda function. The proposal description will be stored in IPFS for archival purposes."}),jsx$1("p",{children:"This proposal could be used to administer other smart contracts of which the DAO is the administrator (e.g. to update the Teia marketplace fees), or to execute entry points from other contracts (e.g. swap or collect a token, vote in another DAO / multisig)."}),jsx$1("p",{children:"Warning: Executing arbitrary smart contract code could compromise the DAO or have unexpected consequences. The lambda function code should have been revised by some trusted smart contract expert before the proposal is accepted and executed."}),jsx$1(LambdaFunctionProposalForm,{callback:ee})]});default:return}}function CommonProposalFields({title:re,setTitle:ee,descriptionIpfsCid:ne,setDescriptionIpfsCid:ae}){return jsxs(Fragment,{children:[jsx$1(SimpleInput,{type:"text",label:"Proposal title",placeholder:"Write a meaningful title for your proposal here",maxlength:"500",value:re,onChange:ee,className:styles$o.proposal_form_field,children:jsx$1(Line,{})}),jsx$1(IpfsUploader,{label:"Proposal description",placeholder:"Select the file with the proposal description",value:ne,onChange:ae,className:styles$o.proposal_form_field,children:jsx$1(Line,{})})]})}function TextProposalForm({callback:re}){const[ee,ne]=reactExports.useState(""),[ae,ce]=reactExports.useState(""),le=useDaoStore(he=>he.createTextProposal),ue=he=>{he.preventDefault(),le(ee,ae,re)};return jsxs("form",{className:styles$o.proposal_form,onSubmit:ue,children:[jsx$1("div",{className:styles$o.proposal_form_fields,children:jsx$1(CommonProposalFields,{title:ee,setTitle:ne,descriptionIpfsCid:ae,setDescriptionIpfsCid:ce})}),jsx$1(Button,{shadow_box:!0,fit:!0,children:"Submit proposal"})]})}function TransferTezProposalForm({callback:re}){const[ee,ne]=reactExports.useState(""),[ae,ce]=reactExports.useState(""),[le,ue]=reactExports.useState([{amount:"",destination:""}]),he=useDaoStore(me=>me.createTransferMutezProposal),fe=me=>{me.preventDefault(),he(ee,ae,le.map(ge=>({amount:ge.amount*1e6,destination:ge.destination})),re)};return jsxs("form",{className:styles$o.proposal_form,onSubmit:fe,children:[jsxs("div",{className:styles$o.proposal_form_fields,children:[jsx$1(CommonProposalFields,{title:ee,setTitle:ne,descriptionIpfsCid:ae,setDescriptionIpfsCid:ce}),jsx$1(TransferFields,{labels:{amount:"Amount to transfer in tez",destination:"Destination address"},transfers:le,onChange:ue,step:"0.000001",className:styles$o.proposal_form_field,children:jsx$1(Line,{})})]}),jsx$1(Button,{shadow_box:!0,fit:!0,children:"Submit proposal"})]})}function TransferTokenProposalForm({callback:re}){const[ee,ne]=reactExports.useState(""),[ae,ce]=reactExports.useState(""),[le,ue]=reactExports.useState(""),[he,fe]=reactExports.useState(""),[me,ge]=reactExports.useState([{amount:"",destination:""}]),ve=useDaoStore(be=>be.createTransferTokenProposal),ye=be=>{const Ee=TOKENS.find(Ce=>Ce.fa2===le);be.preventDefault(),ve(ee,ae,le,he,me.map(Ce=>({amount:Ee?Ce.amount*Ee.decimals:Ce.amount,destination:Ce.destination})),re)};return jsxs("form",{className:styles$o.proposal_form,onSubmit:ye,children:[jsxs("div",{className:styles$o.proposal_form_fields,children:[jsx$1(CommonProposalFields,{title:ee,setTitle:ne,descriptionIpfsCid:ae,setDescriptionIpfsCid:ce}),jsx$1(SimpleInput,{type:"text",label:"Token contract address",placeholder:"KT...",minlenght:"36",maxlength:"36",value:le,onChange:ue,className:styles$o.proposal_form_field,children:jsx$1(Line,{})}),jsx$1(SimpleInput,{type:"number",label:"Token id",placeholder:"0",min:"0",step:"1",value:he,onChange:fe,className:styles$o.proposal_form_field,children:jsx$1(Line,{})}),jsx$1(TransferFields,{labels:{amount:"Token editions",destination:"Destination address"},transfers:me,onChange:ge,step:"1",className:styles$o.proposal_form_field,children:jsx$1(Line,{})})]}),jsx$1(Button,{shadow_box:!0,fit:!0,children:"Submit proposal"})]})}function LambdaFunctionProposalForm({callback:re}){const[ee,ne]=reactExports.useState(""),[ae,ce]=reactExports.useState(""),[le,ue]=reactExports.useState(""),he=useDaoStore(me=>me.createLambdaFunctionProposal),fe=me=>{me.preventDefault(),he(ee,ae,le,re)};return jsxs("form",{className:styles$o.proposal_form,onSubmit:fe,children:[jsxs("div",{className:styles$o.proposal_form_fields,children:[jsx$1(CommonProposalFields,{title:ee,setTitle:ne,descriptionIpfsCid:ae,setDescriptionIpfsCid:ce}),jsx$1(Textarea$1,{name:"lambdaFunctionCode",label:"Lambda function code in Micheline format",placeholder:"Write here the lambda function code",maxLength:"1000",value:le,onChange:me=>ue(me.target.value),className:styles$o.proposal_form_field,children:jsx$1(Line,{})})]}),jsx$1(Button,{shadow_box:!0,fit:!0,children:"Submit proposal"})]})}const container$8="_container_1okj8_216",headline="_headline_1okj8_221",loading_containter="_loading_containter_1okj8_225",section$1="_section_1okj8_232",poll="_poll_1okj8_242",poll_id="_poll_id_1okj8_252",poll_question="_poll_question_1okj8_259",poll_options="_poll_options_1okj8_263",poll_option="_poll_option_1okj8_263",winner_option="_winner_option_1okj8_287",poll_option_container="_poll_option_container_1okj8_295",user_vote="_user_vote_1okj8_299",poll_objkt_option="_poll_objkt_option_1okj8_303",styles$l={container:container$8,headline,loading_containter,section:section$1,poll,poll_id,poll_question,poll_options,poll_option,winner_option,poll_option_container,user_vote,poll_objkt_option};function LoadingPollsMessage({message:re}){return jsx$1("div",{className:styles$l.loading_containter,children:jsx$1(Loading,{message:re??"Loading polls information"})})}const TABS$2=[{title:"Polls",to:""},{title:"Create",to:"create"}];function TeiaPolls(){const[re]=useStorage(POLLS_CONTRACT),[ee]=usePolls(re);return jsx$1(Page,{title:"Teia Polls",children:jsxs("div",{className:styles$l.container,children:[jsx$1("h1",{className:styles$l.headline,children:"Teia Community Polls"}),ee?jsxs(Fragment,{children:[jsx$1(Tabs,{tabs:TABS$2}),jsx$1(Outlet,{})]}):jsx$1(LoadingPollsMessage,{})]})})}const usePollsStore=create$2()(subscribeWithSelector(persist((re,ee)=>({votePoll:async(ne,ae,ce,le)=>{const ue=useUserStore.getState().handleOp,he=useModalStore.getState().showError,fe=useModalStore.getState().step,me="Vote teia poll";fe(me,"Waiting for confirmation",!0);try{const ge=await Tezos.wallet.at(POLLS_CONTRACT),ve={poll_id:parseInt(ne),option:ae,max_checkpoints:ce},ye=ge.methodsObject.vote(ve),be=await ue(ye,me);return le==null||le(),be}catch(ge){he(me,ge)}},createPoll:async(ne,ae,ce,le,ue,he)=>{const fe=useUserStore.getState().handleOp,me=useModalStore.getState().show,ge=useModalStore.getState().showError,ve=useModalStore.getState().step,ye="Create teia poll";if(!ne||ne.length<10){me(ye,"The poll question must be at least 10 characters long");return}if(ue.length<2){me(ye,"The poll should have at least 2 options to vote");return}ve(ye,"Waiting for confirmation",!0);try{const be=await Tezos.wallet.at(POLLS_CONTRACT),Ee={question:char2Bytes(ne),description:ae===""?char2Bytes(""):char2Bytes(`ipfs://${ae}`),options:MichelsonMap.fromLiteral(Object.fromEntries(ue.map((Te,ke)=>[ke,char2Bytes(Te)]))),vote_weight_method:{[ce]:[["unit"]]},vote_period:le},Ce=be.methodsObject.create_poll(Ee),Se=await fe(Ce,ye);return he==null||he(),Se}catch(be){ge(ye,be)}}}),{name:"polls",storage:createJSONStorage(()=>localStorage)})));function Poll({pollId:re}){var Ee;const[ee]=useStorage(POLLS_CONTRACT),[ne,ae]=usePolls(ee),ce=useUserStore(Ce=>Ce.address),[le]=useDaoTokenBalance(ce),[ue,he]=useUserPollVotes(ce,ee),[fe]=usePollsUsersAliases(ce,ne);if(!ne)return;const me=ne[re],ge=parseInt(me.vote_period),ve=new Date(me.timestamp);ve.setDate(ve.getDate()+ge);const be=new Date>ve;return me.id=re,me.voteExpirationTime=ve,me.voteFinished=be,jsxs("div",{className:styles$l.poll,children:[jsxs("h3",{className:styles$l.poll_question,children:[jsxs(Link,{"aria-label":`Poll ${re}`,to:`${PATH.POLL}/${re}`,className:styles$l.poll_id,children:["#",re]}),bytes2Char(me.question)]}),jsx$1(PollDescription,{poll:me,aliases:fe}),jsx$1(PollVotesSummary,{poll:me,userVotedOption:(Ee=ue==null?void 0:ue[re])==null?void 0:Ee.option,canVote:!be&&le>0,callback:()=>{ae(),he()}})]})}function PollDescription({poll:re,aliases:ee}){const ne=re.description!==""?bytes2Char(re.description):"",ae=ne.split("//")[1];return jsxs(Fragment,{children:[jsxs("p",{children:["Created by"," ",jsx$1(TeiaUserLink,{address:re.issuer,alias:ee==null?void 0:ee[re.issuer],shorten:!0})," ","on ",getWordDate(re.timestamp),"."]}),!re.voteFinished&&jsxs("p",{children:["Voting period ends on ",getWordDate(re.voteExpirationTime),"."]}),ne!==""&&jsxs("p",{children:["Description: ",ae?jsx$1(IpfsLink,{cid:ae,children:"IPFS"}):ne]}),jsxs("p",{children:["Vote weight method:"," ",Object.keys(re.vote_weight_method)[0].toUpperCase()]})]})}function PollVotesSummary({poll:re,userVotedOption:ee,canVote:ne,callback:ae}){const[ce,le]=reactExports.useState(!1),ue=usePollsStore(ve=>ve.votePoll),he=Object.values(re.votes_count).map(ve=>parseInt(ve)),fe=he.reduce((ve,ye)=>ve+ye,0),me=Math.max(...he),ge=re.vote_weight_method.linear?DAO_TOKEN_DECIMALS:re.vote_weight_method.quadratic?Math.pow(DAO_TOKEN_DECIMALS,.5):1;return jsxs(Fragment,{children:[jsx$1("p",{children:"Options to vote:"}),jsx$1("ul",{className:styles$l.poll_options,children:Object.entries(re.votes_count).map(([ve,ye])=>jsxs("li",{className:`${styles$l.poll_option} ${parseInt(ye)===me&&me!==0?styles$l.winner_option:""}`,children:[jsxs("button",{onClick:()=>le(!ce),children:[ee===ve?jsxs("div",{className:styles$l.poll_option_container,children:[jsx$1("span",{className:styles$l.user_vote}),jsx$1(PollOption,{option:bytes2Char(re.options[ve])}),jsx$1("span",{className:styles$l.user_vote,children:"✔"})]}):jsx$1(PollOption,{option:bytes2Char(re.options[ve])}),jsx$1("div",{children:ce?`${fe===0?0:Math.round(100*ye/fe)}%`:`${Math.round(ye/ge)} vote${parseInt(ye)!==ge?"s":""}`})]}),ne&&jsx$1(Button,{onClick:()=>ue(re.id,ve,null,ae),shadow_box:!0,fit:!0,children:"Select"})]},ve))})]})}function PollOption({option:re}){return re.indexOf("http")>=0?jsx$1(DefaultLink,{href:re.slice(re.indexOf("http")),children:re.slice(0,re.indexOf("http"))||void 0}):re.indexOf("ipfs://")>=0?jsx$1(IpfsLink,{cid:re.split("ipfs://")[1]}):re.indexOf("OBJKT#")===0?jsx$1(ObjktOption,{id:re.split("#")[1]}):jsx$1("span",{children:re})}function ObjktOption({id:re}){const[ee]=useObjkt(re);return ee?jsxs("div",{className:styles$l.poll_objkt_option,children:[jsx$1(RenderMediaType,{nft:ee}),jsx$1("span",{children:`OBJKT#${re}`})]}):jsx$1("span",{children:`OBJKT#${re}`})}function PollDisplay(){const[re]=useStorage(POLLS_CONTRACT),[ee]=usePolls(re),{id:ne}=useParams();return ee&&!ee[ne]?jsx$1(RootErrorBoundary,{title:"Wrong poll id",msg:`The last Teia poll id is ${re.counter-1}`}):jsx$1(Page,{title:`Teia poll #${ne}`,children:jsxs("div",{className:styles$l.container,children:[jsx$1("h1",{className:styles$l.headline,children:"Teia poll"}),ee?jsxs(Fragment,{children:[jsx$1("section",{className:styles$l.section,children:jsx$1(Poll,{pollId:ne})}),jsx$1(PaginationButtons,{path:PATH.POLL,current:parseInt(ne),min:0,max:re.counter-1})]}):jsx$1(LoadingPollsMessage,{message:"Loading poll information"})]})})}const section="_section_1n27w_1",section_title="_section_title_1n27w_11",poll_form="_poll_form_1n27w_15",poll_form_fields="_poll_form_fields_1n27w_19",poll_form_field="_poll_form_field_1n27w_19",styles$k={section,section_title,poll_form,poll_form_fields,poll_form_field},POLL_STATUS_OPTIONS={active:"Active polls",finished:"Finished polls"};function Polls(){const[re,ee]=reactExports.useState("active"),[ne]=useStorage(POLLS_CONTRACT),[ae]=usePolls(ne);if(!ae)return jsx$1(LoadingPollsMessage,{});const ce=Object.fromEntries(Object.keys(POLL_STATUS_OPTIONS).map(ue=>[ue,[]])),le=new Date;for(const ue of Object.keys(ae).reverse()){const he=ae[ue],fe=parseInt(he.vote_period),me=new Date(he.timestamp);me.setDate(me.getDate()+fe),le>me?ce.finished.push(ue):ce.active.push(ue)}return jsxs("section",{className:styles$k.section,children:[jsx$1("h1",{className:styles$k.section_title,children:"Teia Polls"}),jsx$1("p",{children:"TEIA's polling system is a community tool that any TEIA member can use for any purpose - it is often used for feature requests, testing interest or getting feedback for ideas (artistic or technical), measuring community sentiment around certain issues, or just for fun."}),jsxs("p",{children:["To start or participate in a poll, the wallet sync'd must have a non-zero amount of TEIA tokens, which is a Layer-2 token under the Tezos (XTZ) chain. If you're interested in acquiring $TEIA, you can read the guide ",jsx$1("a",{href:"/dao",children:"here."})]}),jsx$1("p",{children:jsx$1("a",{href:"https://quipuswap.com/swap/tez-KT1QrtA753MSv8VGxkDrKKyJniG5JtuHHbtV_0",target:"_blank",rel:"noreferrer",children:"Convert XTZ to TEIA on Quipuswap (Decentralized Exchange)"})}),jsx$1(Line,{}),jsx$1(Select,{alt:"poll group selection",value:{value:re,label:`${POLL_STATUS_OPTIONS[re]} (${ce[re].length})`},onChange:ue=>ee(ue.value),options:Object.entries(POLL_STATUS_OPTIONS).map(([ue,he])=>({value:ue,label:`${he} (${ce[ue].length})`})),children:jsx$1(Line,{})}),jsx$1(PollGroup,{status:re,pollIds:ce[re]})]})}function PollGroup({status:re,pollIds:ee}){const ne=(()=>{switch(re){case"active":return ee.length>0?"These polls are still active. You can modify your previous vote if you want.":"There are no active polls to vote at the moment.";case"finished":return"These polls are closed and cannot be voted anymore.";default:return""}})();return jsxs(Fragment,{children:[jsx$1("p",{children:ne}),ee.length>0&&jsx$1("ul",{children:ee.map((ae,ce)=>jsxs("li",{children:[jsx$1(Poll,{pollId:ae}),ce<ee.length-1&&jsx$1(Line,{})]},ae))})]})}function CreatePolls(){const[re]=useStorage(POLLS_CONTRACT),[,ee]=usePolls(re),ne=useUserStore(ce=>ce.address),[ae]=useDaoTokenBalance(ne);return jsxs("section",{className:styles$k.section,children:[jsx$1("h1",{className:styles$k.section_title,children:"Create a new poll"}),ae===0?jsx$1("p",{children:"Only DAO members can create new polls."}):jsxs(Fragment,{children:[jsx$1("p",{children:"Use this form to create new Teia polls."}),jsx$1(PollForm,{callback:ee})]})]})}function PollForm({callback:re}){const[ee,ne]=reactExports.useState(""),[ae,ce]=reactExports.useState(""),[le,ue]=reactExports.useState("equal"),[he,fe]=reactExports.useState(""),[me,ge]=reactExports.useState(["","",""]),ve=usePollsStore(Se=>Se.createPoll),ye={equal:"Equal: one wallet, one vote",linear:"Linear: proportional to the amount of TEIA tokens",quadratic:"Quadratic: proportional to the square root of the amount of TEIA tokens"},be=(Se,Te)=>{const ke=me.slice();ke[Se]=Te,ge(ke)},Ee=(Se,Te)=>{Se.preventDefault();const ke=me.slice();Te?ke.push(""):ke.length>1&&ke.pop(),ge(ke)},Ce=Se=>{Se.preventDefault();const Te=me.map(ke=>ke.trim()).filter(ke=>ke!=="");ve(ee,ae,le,he,Te,re)};return jsxs("form",{className:styles$k.poll_form,onSubmit:Ce,children:[jsxs("div",{className:styles$k.poll_form_fields,children:[jsx$1(SimpleInput,{type:"text",label:"Poll question",placeholder:"Write here the question you want to ask",minlength:"10",maxlength:"500",value:ee,onChange:ne,className:styles$k.poll_form_field,children:jsx$1(Line,{})}),jsx$1(IpfsUploader,{label:"Poll description (optional)",placeholder:"Select the file with the poll description",value:ae,onChange:ce,className:styles$k.poll_form_field,children:jsx$1(Line,{})}),jsx$1(Select,{label:"Method to use to calculate the vote weight",alt:"Vote weight method selection",value:{value:le,label:ye[le]},onChange:Se=>ue(Se.value),options:Object.entries(ye).map(([Se,Te])=>({value:Se,label:Te})),children:jsx$1(Line,{})}),jsx$1(SimpleInput,{type:"number",label:"Poll duration in days",placeholder:"1",min:"1",max:"30",step:"1",value:he,onChange:fe,className:styles$k.poll_form_field,children:jsx$1(Line,{})}),jsxs("div",{children:[me.map((Se,Te)=>jsx$1(SimpleInput,{type:"text",label:`Option ${Te+1}`,placeholder:"A possible option to vote",minLength:"1",value:Se,onChange:ke=>be(Te,ke),className:styles$k.poll_form_field,children:jsx$1(Line,{})},Te)),jsx$1(IncrementButtons,{onClick:Ee})]})]}),jsx$1(Button,{shadow_box:!0,fit:!0,children:"Create poll"})]})}const faq__container="_faq__container_h54uh_1",faq__title="_faq__title_h54uh_36",faq__outer__container="_faq__outer__container_h54uh_42",styles$j={faq__container,faq__title,faq__outer__container},FAQ=()=>{const re=({text:ee,answer:ne})=>{const[ae,ce]=reactExports.useState(!1),le=()=>{ce(!ae)};return jsxs("li",{className:styles$j.buttons,children:[jsx$1(Button,{onClick:le,children:ee}),ae&&jsx$1("div",{className:styles$j.faq__answer,dangerouslySetInnerHTML:{__html:ne}})]})};return jsxs(Page,{title:"faq",large:!0,children:[jsxs("div",{className:styles$j.faq__outer__container,children:[jsx$1("h1",{className:styles$j.faq__title,children:"Getting Started with the TEIA Community"}),jsxs("ul",{className:styles$j.faq__container,children:[jsx$1(re,{text:"How do I Make a Wallet?",answer:`
<div class="markdown-body">
  <br />
  <p>First, you will need a Tezos wallet and Tezos funds.</p>
  <br />
  <div class="markdown-heading">
    <h2 class="heading-element">What is Tezos?</h2>
  </div>
  <p>Tezos (XTZ) is a liquid proof-of-stake cryptocurrency (LPoS). You can read more about it <a href="https://en.wikipedia.org/wiki/Tezos" rel="nofollow">on the Wikipedia Article about Tezos</a>.</p>
  <br />
  <div class="markdown-heading">
    <h2 class="heading-element">Recommended Wallet Apps</h2>
  </div>
  <ul>
    <li><a href="https://templewallet.com/" rel="nofollow">Temple wallet</a> which is a browser extension similar to Metamask, also being able to connect to Ledger devices.</li>
    <li><a href="https://wallet.kukai.app/" rel="nofollow">Kukai wallet</a>, which is a browser wallet, being possible to connect making use of Direct Auth using Twitter credentials. Kukai also works on smartphones.</li>
  </ul>
  <br />
  <div class="markdown-heading">
    <h2 class="heading-element">Where to Buy Tezos</h2>
  </div>
  <p>Minting on Teia only costs ~0.05 tezos. You can buy some tezos on an exchange site like Binance or Kraken. However, the exchange service might be limited depending on your country and location.</p>
  <br />
  <div class="markdown-heading">
    <h1 class="heading-element">The Teia Fountain</h1>
  </div>
  <br />
  <div class="markdown-heading">
    <h3 class="heading-element">⛲ Applying as an Artist</h3>
  </div>
  <p>Are you an artist who needs tez but can't get it? You can request a volunteer from the community to sponsor you in the #fountain channel on <a href="https://discord.gg/wGeXs4Z7wT" rel="nofollow">Discord</a>.</p>
  <br />
  <p>Please fill out this google form:</p>
  <ul>
    <li><a href="https://docs.google.com/forms/d/e/1FAIpQLSeT1Bm95K1ASVPMv2F0864COcKmm_-FGKortlEHMtMMLfNFZQ/viewform" rel="nofollow">https://docs.google.com/forms/d/e/1FAIpQLSeT1Bm95K1ASVPMv2F0864COcKmm_-FGKortlEHMtMMLfNFZQ/viewform</a></li>
    <li>After filling out the form, please send us a message in the #fountain channel on the Discord saying that you filled out the form.</li>
  </ul>
  <br />
  <div class="markdown-heading">
    <h3 class="heading-element">⛲ Volunteering as a Sponsor</h3>
  </div>
  <p>If you make some sales and would like to support other new artists you can send XTZ donations to the <a href="https://github.com/teia-community/teia-docs/wiki/Teia-Multisig-wallets">fountain multisig address</a> <strong>KT1EsvmkijLKPQmcJMbjDeKRXdwky1LWvwpG</strong></p>
  <br />
  <div class="markdown-heading">
    <h2 class="heading-element">Common Wallet Errors</h2>
  </div>
  <br />
  <p><strong>account doesn't exist error from tzkt.io</strong></p>
  <p>If your account on tzkt.io shows this, don't worry. It just means you don't have any transactions yet in your wallet. Once you receive some tezos it should go away.</p>
  <br />
  <p><strong>Prevalidation error in the temple wallet</strong></p>
  <p>This means you should refresh the page. Wait a couple of seconds for the transaction to go through and you will get the "applied" status.</p>
</div>
`}),jsx$1(re,{text:"How do I Mint?",answer:`
<div class="markdown-body">
  <br />
  <div class="markdown-heading">
    <h3 class="heading-element"><strong>mint</strong></h3>
  </div>
  <br />
  <p>1: <em>(verb)</em> to create an OBJKT (NFT)</p>
  <br />
  <hr>
  <div class="markdown-heading">
    <h2 class="heading-element">Important Rules and Considerations</h2>
  </div>
  <p>If you mint NFTs on Teia, we expect you to respect the <a href="https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions">Core Values</a> and especially note the detail on <a href="https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#about-copyminting">copyminting</a>.</p>
  <br />
  <p><em><strong>Copyminting</strong> is the act of taking another's work and minting it as your own. It also includes the act of minting the same work twice, either on the same or separate platforms/blockchains. Your account will get restricted if you do this.</em></p>
  <br />
  <p><strong>Please note that minting the same media file twice, even accidentally, may lead to an account restriction! If you made a mistake and want to re-mint your OBJKT, make sure to burn the old one first!</strong> <a href="https://github.com/teia-community/teia-docs/wiki/How-to-burn-%F0%9F%94%A5">(How to burn)</a></p>
  <br />
  <p><strong>If your account gets restricted, check <a href="https://objkt.com/asset/KT1XcFQv9EB2hoT484Cv58S2MvyMGX4C9TJq/1" rel="nofollow">how to unrestrict</a> it.</strong></p>
  <br />
  <div class="markdown-heading">
    <h2 class="heading-element">Step-by-Step Guide</h2>
  </div>
  <p>Minting is the operation of creating an NFT - at this point, you define the quantity of the NFT and information about it such as title and description. Once created, you will choose the number you want to make available and a price - this is a Swap operation.</p>
  <br />
  <p>It might be useful to prepare a text file with all the information you will need for minting - if the minting operation is interrupted, you might lose what you typed in. OGs know from experience how frustrating it can be, especially if you wrote a classy and long description without saving a copy.</p>
  <br />
  <ol>
    <li>
      <p>You should have already created a wallet (we recommend <a href="https://templewallet.com/" rel="nofollow">Temple</a> or <a href="https://wallet.kukai.app/" rel="nofollow">Kukai</a>). The wallet needs to have enough funds to mint. Click on “Sync". Your browser will show a pop-up asking you to sync with your wallet.</p>
      <br />
      <p><img src="https://camo.githubusercontent.com/06ef047ef421441b995cefa7ab335c59ab81bea9868a2bb395c150287a21b3c5/68747470733a2f2f692e6962622e636f2f323543574c6b332f73796e632e706e67" alt="sync button"></p>
      <p><img src="https://user-images.githubusercontent.com/6487972/226333131-7487d30a-a622-4e57-b037-1d442fe2597f.jpg" alt="beacon wallet popup"></p>
    </li>
    <li>
      <p>Approve the sync with your wallet.</p>
    </li>
    <br />
    <li>
      <p>Click the "Mint" link in the hamburger drop-down menu.</p>
      <br />
      <p><img src="https://user-images.githubusercontent.com/6487972/226333939-3dc61a26-73a1-4b8a-b4b4-d164f530e719.jpg" alt="minting page white"></p>
    </li>
    <br />
    <li>
      <p>Fill out the information for your OBJKT. Because all this information is stored on the Tezos blockchain, the edition size (quantity) you set is final; you can't add (although you can reduce by burning). Title, descriptions, tags, and royalties are also final. You price the OBJKT (a Swap operation) after the minting. You can upload display images/gifs depending on the media type (e.g., for mpgs).</p>
      <p>You can also select a license (default is None (all rights reserved)) and a language.</p>
    </li>
  </ol>
  <br />
  <div class="markdown-heading">
    <h3 class="heading-element"><strong>Text Mints on Teia</strong></h3>
  </div>
  <p>The Teia NFT marketplace now supports text mints of mimetype: text/plain. This allows for stories, poems, ASCII, and similar types of text-based art. The token's content is stored in IPFS.</p>
  <br />
  <div class="markdown-heading">
    <h3 class="heading-element"><strong>How to Mint Text</strong></h3>
  </div>
  <ol>
    <li>A new field on the minting page: "This is a text mint." Check this box.</li>
    <li>The text mint input will automatically hide and replace the description box.</li>
    <li>You will see the following fields on the minting form:
      <ul>
        <li>A checkbox for "Monospace Font Required."</li>
        <li>There is a text area labeled "Typed Art Input." Depending on the monospace font required checkbox value, the text area renders the monospace (Iosevka font) or non-monospace (Source Sans Pro font).</li>
      </ul>
    </li>
    <li>As you type text into the text area, a rendered preview of that text is displayed below it.</li>
    <li>The preview page is displayed once you click the "Submit" button.</li>
  </ol>
  <br />
  <p><strong>Note:</strong> The "monospace" tag is automatically added. The cover and thumbnail images are automatically generated based on the text input and the font selected. The description will also automatically be replaced by the text mint input.</p>
  <br />
  <p>You can view an example: <a href="https://teia.art/objkt/850488" rel="nofollow">OBJKT 850488</a></p>
  <br />
  <p>Source Sans Pro was selected for text mints as it's the default font (non-mono) on Objkt.com. This ensures text is encoded correctly and displayed as intended on Objkt.com and Teia.art. Currently, it seems that Objkt.com does not provide much monospace support for text mints, and a feature request has been raised here: <a href="https://roadmap.objkt.com/b/software-feature-request/use-a-monospaced-font-for-text-tokens/" rel="nofollow">https://roadmap.objkt.com/b/software-feature-request/use-a-monospaced-font-for-text-tokens/</a></p>
  </div>
`}),jsx$1(re,{text:"How do I Edit My Profile?",answer:`
<div class="markdown-body">
  <br />
  <div class="markdown-heading">
    <h2 class="heading-element">Settings &gt; Config</h2>
  </div>
  <br />
  <p>Profile information is useful in a number of ways. Most importantly, it can identify you to your potential collectors. Your profile details are saved with the Subjkt contract. The Profile page is where you update these, and it also links to the tzprofiles site so you can add that information.</p>
  <br />
  <p>To edit your profile, make sure you've synced your wallet with Teia. Click the menu icon or go to: <a href="https://www.teia.art/subjkt" rel="nofollow">https://www.teia.art/subjkt</a></p>
  <br />
  <p><img src="https://user-images.githubusercontent.com/6487972/222891286-6610bcdc-d99c-41cf-963e-c7c0c7fea7f8.jpg" alt=""></p>
  <br />
  <p>.. then click on the <strong>Profile</strong> option</p>
  <br />
  <p><img src="https://user-images.githubusercontent.com/6487972/225549393-810d6ccb-e4b2-4aba-bdca-b38ec44a1b7d.jpg" alt="full menu showing - profile highlighted"></p>
  <br />
  <p>Add a username, description, and choose an image for your profile pic. The profile pic may take a few moments to show up. Because it shows with a circular crop, you may have to adjust your initial picture and add it again.</p>
  <br />
  <p><strong>IMPORTANT</strong> <em>When configuring your username, please don't use any special characters or spaces. It's also case-sensitive, so we recommend ALL LOWERCASE.</em></p>
  <br />
  <p><img src="https://user-images.githubusercontent.com/6487972/222891328-88b309e9-d814-4d9a-8253-1f1f3a3fc3a9.jpg" alt="profile page - fields highlighted"></p>
  <br />
  <p>When you click Save Profile, your wallet will open so you can complete a transaction which saves the profile information.</p>
  <br />
  <p><img src="https://user-images.githubusercontent.com/6487972/225555404-8c9e635b-0492-4e90-bbcb-5fcc781eac4e.jpg" alt="profile and tzprofile copy"></p>
  <br />
  </div>
`}),jsx$1(re,{text:"How do I Add/Change the Price of My OBJKT?",answer:`
<div class="markdown-body">
  <br />
  <h1>How to Swap 🔃</h1>
  <br />
  <p>1: <em>(noun)</em> an act, instance, or process of exchanging one thing for another</p>
  <p>2: <em>(verb)</em> to set a price for your OBJKT</p>
  <br />
  <p>If you have just minted some OBJKTs or you have unsold OBJKTs, it's time to Swap them - that means pricing some or all, for collectors to buy.</p>
  <br />            
  <p><strong>Note</strong> - you can't swap OBJKTs that are already swapped, have already been collected, or if you don't have enough tez to pay the fees. You won't see Swap, Burn, Transfer options or be able to cancel swaps if you haven't synced the account that owns them.</p>
  <br />
  <p>You don't need to swap all of the OBJKTs you own. Many artists like to keep one or two, either as 'artist proofs' or for gifting etc.</p>
  <br />
  <p>Pricing is a tricky area that can be based on how big the edition size is, how well known and liked you are for your artwork, and how well you market it. Another consideration is how much <em>you</em> want for the work, not considering collectors and the current market. Pricing consistently and with some thought will influence some collectors.</p>
  <br />
  <p>If you're considering pricing very low (0.01 tez, for example) or free, consider the fact that bots or bottom-dwelling flippers may buy many (sometimes all). When collectors view the OBJKT history, they will see the churn of low price activity that such flippers create, and it can reflect badly on how responsible collectors will view both the work and you as an artist. You can give away manually or try to regulate flipper action by swapping in blocks at different times (this also helps collectors in different time zones).</p>
  <br />
  <h3>Step-by-Step Guide</h3>
  <ol>
    <li>
      <p>Click on your OBJKT's link to see the details. If you are synced to your wallet, you should see the "Swap" option next to History. (If you don’t see these options, then you have to sync your wallet again.)</p>
    </li>
    <li>
      <p>Click on Swap.</p>
    </li>
    <li>
      <p>Input how many OBJKTs out of your edition that you want to set for sale. For example, if you have <code>10</code> and you want to keep <code>1</code> and sell <code>9</code>, then input <code>9</code>. If you want to sell all of them, input <code>10</code>.</p>
    </li>
    <li>
      <p>Input how much each edition should cost in Tezos.</p>
    </li>
    <li>
      <p>Click the "swap" button. You will be prompted to approve the transaction in your wallet app.</p>
    </li>
    <li>
      <p>The user interface will update you on the transaction, or you can check in your wallet (look at 'activity' in Temple wallet). Once the transaction approves, your OBJKT/s are for sale to collectors. Go out and tell the Twitter world...</p>
    </li>
  </ol>
  <br />
  <h3>How Can I Track What I've Sold?</h3>
  <p>You can use the tools <a href="https://www.hictory.xyz/#" rel="nofollow">hictory</a> or <a href="https://hicdex.com/sold" rel="nofollow">hicdex</a>: Just enter your wallet address and see your last sales in chronological order!</p>
  <br />
  <h3>How Can I Get Notifications for When I Sell Something?</h3>
  <p>You can use the Cryptonoises bot <a href="https://cryptonoises.com/" target="_blank" rel="nofollow">[https://cryptonoises.com/]</a> developed by Andrii Bakulin. It works with both Telegram and Discord to get a notification every time something sells.</p>
</div>
`}),jsx$1(re,{text:"How do I Burn My OBJKT?",answer:`
<div class="markdown-body">
  <br />
  <p>1: <em>(verb)</em> to "delete" your OBJKT</p>
  <br />
  <p>Transactions on the blockchain are irreversible, so you can't "delete" them. The "burn" button sends the OBJKT to the <a href="https://tzkt.io/tz1burnburnburnburnburnburnburjAYjjX/operations/" rel="nofollow">burn address</a> - tz1burnburnburnburnburnburnburjAYjjX, or you can send it yourself using your wallet app. The burn address is an open address that nobody owns a key to, so objkts are never retrievable.</p>
  <p>If you are burning the objkt because you made a mistake and want to remint it, make sure there are no other owners - you can only burn those you own, so you will need to ask those collectors to burn those objkts before you can remint.</p>
  <br />
  <h3>To Burn an OBJKT:</h3>
  <ol>
    <li>
      <p>Make sure your wallet app is synced with Teia.</p>
    </li>
    <li>
      <p>Make sure you cancel the swap of the OBJKT so it can be available in your wallet when you are ready to burn it. The user interface will show you how many you have available for burning. Think very hard about how many you'll burn - you can't undo this.</p>
      <br />
      <p><img src="https://user-images.githubusercontent.com/6487972/227187937-600b66ec-627b-428f-8e47-cd8f1926c385.jpg" alt="burn screen"></p>
    </li>
    <li>
      <p>Press the burn button. Your wallet app will prompt you to confirm the transaction. Once the transaction completes, your wallet app will show the OBJKT as transferred to the burn address. The History tab will show a Burn transaction (and the fact that it is a transfer from your wallet to the burn wallet).</p>
      <br />
      <p><img src="https://user-images.githubusercontent.com/6487972/227189047-4bda94e0-352d-41c2-b8dd-fc63d730062e.jpg" alt="burning"></p>
      <p><img src="https://user-images.githubusercontent.com/6487972/227189074-9653b3cf-3264-4814-90b3-804abb0ce107.jpg" alt="burn successful"></p>
    </li>
    <li>
      <p>You can also send the OBJKT to a burn address directly from your Tezos wallet. The address is: <code>tz1burnburnburnburnburnburnburjAYjjX</code>.</p>
    </li>
  </ol>
  <br />
  <p><strong>Note:</strong> <em>If you burn all of the objkts that were minted, the objkt will disappear from your profile. If someone buys one of your editions, even if you burn the rest of them, the OBJKT won't disappear from your profile.</em></p>
</div>
`}),jsx$1(re,{text:"How do I Resell an OBJKT?",answer:`
<div class="markdown-body">
  <br />
  <h2>How to Sell an OBJKT Created by Another Artist</h2>
  <p>If you've collected another artist's OBJKT, then you own the right to resell it. This is also referred to as placing your OBJKT on the secondary market. It's much the same as swapping one of your own creations, although a royalty will be paid to the artist.</p>
  <br />
  <h3>Step-by-Step Guide</h3>
  <ol>
    <li>
      <p>Make sure your wallet is synced.</p>
    </li>
    <li>
      <p>Load your account page on Teia.</p>
    </li>
    <li>
      <p>Click on "collection" and click on the OBJKT you want to resell.</p>
    </li>
    <li>
      <p>Click on the "listings" tab to see all of the owners and sellers.</p>
    </li>
    <li>
      <p>Click on "swap" and set a price for your OBJKT. Remember - if there are royalties, that percentage will go to the artist, so consider that in the pricing.</p>
    </li>
    <li>
      <p>Click on the "swap" button and confirm the transaction in your wallet app.</p>
    </li>
  </ol>
  <br />
  <p>After your swap is active, the listing will show up in the <strong>Curation</strong> tab on your profile.</p>
  <p><em>IMPORTANT: Once swapping something up for sale, it is held in the Teia escrow wallet while it is "on the market." Therefore, the OBJKT will disappear from your collections. Don't worry; it's still up for sale!</em></p>
  <hr>
  <br />
  <h3>How Can I Track What I've Sold?</h3>
  <p>You can use the tools on <a href="https://hicdex.com" rel="nofollow">hicdex.com</a> to track transaction history.</p>
  <br />
  <h3>How Can I Get Notifications When I Sell Something?</h3>
  <p>You can use the Cryptonoises Telegram bot <a href="https://cryptonoises.com/" rel="nofollow">[https://cryptonoises.com/]</a> to get a notification every time something sells. We have Andrii Bakulin to thank for this very useful tool. Support him if you are able.</p>
</div>
`}),jsx$1(re,{text:"How Do I Get Started With Selling Copy and Usage Rights With TEIA?",answer:`
<div class="markdown-body">
  <br />
  <h2>TEIA's Copyright Features©️</h2>
  <p>TEIA empowers artists to attach copy and usage rights clauses to each minted OBJKT (NFT). These clauses are determined and declared by the artist at the time of minting. If you are interested in using this feature, it is essential to carefully read and understand the descriptions, explanations, and implications of each option before proceeding.</p>
  <br />
  <p>The primary purpose of this feature is to enable artists to sell usage rights for their works in a transparent, legal, and fair manner. The blockchain facilitates this process by providing clear, objective, and easily traceable documentation of the agreement and the involved parties.</p>
  <br />
  <p>Collectors may acquire these rights for purposes such as broadcasting, reproduction, merchandise sales, soundtracks, game assets, etc. TEIA DAO acts as a neutral platform that facilitates these agreements but does not intervene in or enforce the terms of the agreements. Please note that support for these clauses may vary across platforms, as the data is minted on-chain but not all platforms may choose to display or honor it.</p>
  <br />
  <p><strong>Disclaimer:</strong> TEIA is not a legal entity, organization, or institution with the authority to enforce laws or resolve disputes. The agreements attached to each mint (NFT) constitute a direct contractual relationship between the artist (licensor) and the collector (licensee). The terms of these agreements are determined at the time of minting and must be resolved through mutually agreed-upon means in the event of a dispute. Both parties are responsible for conclusively proving ownership of the relevant wallet(s) if required.</p>
  <br />
  <h3>Step-by-Step Guide</h3>
  <ol>
    <li>
      <p><strong>Sync Your Wallet:</strong> Ensure your wallet is synced with TEIA and that it is the correct wallet address you wish to associate with the agreements.</p>
    </li>
    <li>
      <p><strong>Navigate to "Mint":</strong> Go to the "Mint" section to begin creating your OBJKT.</p>
    </li>
    <li>
      <p><strong>Select "Custom License":</strong> Fill in the required details for your OBJKT, then choose "Custom License" from the License menu.</p>
    </li>
    <li>
      <p><strong>Define Your Terms:</strong> Review the available options for copyright clauses and permissions. Each option includes detailed explanations—read them thoroughly to select the agreement that best suits your work. If additional details or modifications are needed, use the Addendum section to customize the agreement.</p>
    </li>
    <li>
      <p><strong>Mint Your OBJKT:</strong> Once the terms are finalized, proceed to mint your OBJKT as usual.</p>
    </li>
    <li>
      <p><strong>Verify the Agreement:</strong> After minting, visit the "Asset" page to confirm that the clauses were saved correctly. Your work, along with its associated agreements, is now permanently registered on-chain. This makes it searchable on any platform that supports the metadata format. <a href="/objkt/863531/copyright" target="_blank" rel="noopener noreferrer">(View Example)</a></p>
    </li>
  </ol>
  <br />
  <h3>Important Notes</h3>
  <ul>
    <li><strong>Artist Responsibility:</strong> As the artist, you are responsible for clearly defining the terms of the agreement and ensuring they align with your intentions for the work.</li>
    <li><strong>Collector Responsibility:</strong> Collectors must review and agree to the terms before purchasing the OBJKT. Failure to comply with the terms may result in legal consequences.</li>
    <li><strong>Dispute Resolution:</strong> In the event of a dispute, both parties are encouraged to resolve the matter amicably. If necessary, seek legal counsel to enforce or interpret the terms of the agreement.</li>
  </ul>
  <br />
  <p>By using TEIA's copyright features, you acknowledge and agree to these terms. TEIA provides the tools to facilitate these agreements but assumes no liability for their enforcement or interpretation.</p>
</div>
`})]})]}),jsx$1("br",{}),jsx$1(Line,{}),jsxs("div",{className:styles$j.faq__outer__container,children:[jsx$1("h1",{children:"GitHub Documents (Open Source)"}),jsxs("ul",{className:styles$j.faq__container,children:[jsx$1(re,{text:"General FAQ",answer:`
<p>For general questions, check out the <a href="https://github.com/teia-community/teia-docs/wiki/General-FAQs" target="_blank" rel="noopener noreferrer">General FAQ</a> page.</p>
`}),jsx$1(re,{text:"Troubleshooting",answer:`
<p>If you're having issues, visit the <a href="https://github.com/teia-community/teia-docs/wiki/Troubleshooting" target="_blank" rel="noopener noreferrer">Troubleshooting Guide</a>.</p>
`}),jsx$1(re,{text:"Useful Tools",answer:`
<p>Explore tools created by the community:</p>
<ul>
  <li><a href="https://github.com/teia-community/teia-docs/wiki/Tools-made-by-the-community" target="_blank" rel="noopener noreferrer">Tezos Toolkit</a></li>
  <li><a href="https://tezos.com/ecosystem" target="_blank" rel="noopener noreferrer">NFT Marketplaces</a></li>
</ul>
`}),jsx$1(re,{text:"User Safety",answer:`
<p>Stay safe by following these tips:</p>
<ul>
  <li><strong>Never share your private key</strong>.</li>
  <li>Use trusted wallets and platforms.</li>
  <li>Enable two-factor authentication (2FA) where available.</li>
</ul>
`})]})]})]})};var ListCache$2=_ListCache;function stackClear$1(){this.__data__=new ListCache$2,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(re){var ee=this.__data__,ne=ee.delete(re);return this.size=ee.size,ne}var _stackDelete=stackDelete$1;function stackGet$1(re){return this.__data__.get(re)}var _stackGet=stackGet$1;function stackHas$1(re){return this.__data__.has(re)}var _stackHas=stackHas$1,ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE$1=200;function stackSet$1(re,ee){var ne=this.__data__;if(ne instanceof ListCache$1){var ae=ne.__data__;if(!Map$2||ae.length<LARGE_ARRAY_SIZE$1-1)return ae.push([re,ee]),this.size=++ne.size,this;ne=this.__data__=new MapCache$1(ae)}return ne.set(re,ee),this.size=ne.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$2(re){var ee=this.__data__=new ListCache(re);this.size=ee.size}Stack$2.prototype.clear=stackClear;Stack$2.prototype.delete=stackDelete;Stack$2.prototype.get=stackGet;Stack$2.prototype.has=stackHas;Stack$2.prototype.set=stackSet;var _Stack=Stack$2,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(re){return this.__data__.set(re,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(re){return this.__data__.has(re)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$2(re){var ee=-1,ne=re==null?0:re.length;for(this.__data__=new MapCache;++ee<ne;)this.add(re[ee])}SetCache$2.prototype.add=SetCache$2.prototype.push=setCacheAdd;SetCache$2.prototype.has=setCacheHas;var _SetCache=SetCache$2;function arraySome$1(re,ee){for(var ne=-1,ae=re==null?0:re.length;++ne<ae;)if(ee(re[ne],ne,re))return!0;return!1}var _arraySome=arraySome$1;function cacheHas$2(re,ee){return re.has(ee)}var _cacheHas=cacheHas$2,SetCache$1=_SetCache,arraySome=_arraySome,cacheHas$1=_cacheHas,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays$2(re,ee,ne,ae,ce,le){var ue=ne&COMPARE_PARTIAL_FLAG$5,he=re.length,fe=ee.length;if(he!=fe&&!(ue&&fe>he))return!1;var me=le.get(re),ge=le.get(ee);if(me&&ge)return me==ee&&ge==re;var ve=-1,ye=!0,be=ne&COMPARE_UNORDERED_FLAG$3?new SetCache$1:void 0;for(le.set(re,ee),le.set(ee,re);++ve<he;){var Ee=re[ve],Ce=ee[ve];if(ae)var Se=ue?ae(Ce,Ee,ve,ee,re,le):ae(Ee,Ce,ve,re,ee,le);if(Se!==void 0){if(Se)continue;ye=!1;break}if(be){if(!arraySome(ee,function(Te,ke){if(!cacheHas$1(be,ke)&&(Ee===Te||ce(Ee,Te,ne,ae,le)))return be.push(ke)})){ye=!1;break}}else if(!(Ee===Ce||ce(Ee,Ce,ne,ae,le))){ye=!1;break}}return le.delete(re),le.delete(ee),ye}var _equalArrays=equalArrays$2,root$4=_root,Uint8Array$2=root$4.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(re){var ee=-1,ne=Array(re.size);return re.forEach(function(ae,ce){ne[++ee]=[ce,ae]}),ne}var _mapToArray=mapToArray$1;function setToArray$3(re){var ee=-1,ne=Array(re.size);return re.forEach(function(ae){ne[++ee]=ae}),ne}var _setToArray=setToArray$3,Symbol$1=_Symbol,Uint8Array$1=_Uint8Array,eq$1=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray$2=_setToArray,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$2="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(re,ee,ne,ae,ce,le,ue){switch(ne){case dataViewTag$2:if(re.byteLength!=ee.byteLength||re.byteOffset!=ee.byteOffset)return!1;re=re.buffer,ee=ee.buffer;case arrayBufferTag$1:return!(re.byteLength!=ee.byteLength||!le(new Uint8Array$1(re),new Uint8Array$1(ee)));case boolTag$1:case dateTag$1:case numberTag$2:return eq$1(+re,+ee);case errorTag$1:return re.name==ee.name&&re.message==ee.message;case regexpTag$1:case stringTag$1:return re==ee+"";case mapTag$2:var he=mapToArray;case setTag$2:var fe=ae&COMPARE_PARTIAL_FLAG$4;if(he||(he=setToArray$2),re.size!=ee.size&&!fe)return!1;var me=ue.get(re);if(me)return me==ee;ae|=COMPARE_UNORDERED_FLAG$2,ue.set(re,ee);var ge=equalArrays$1(he(re),he(ee),ae,ce,le,ue);return ue.delete(re),ge;case symbolTag:if(symbolValueOf)return symbolValueOf.call(re)==symbolValueOf.call(ee)}return!1}var _equalByTag=equalByTag$1,arrayPush=_arrayPush,isArray$6=isArray_1;function baseGetAllKeys$1(re,ee,ne){var ae=ee(re);return isArray$6(re)?ae:arrayPush(ae,ne(re))}var _baseGetAllKeys=baseGetAllKeys$1;function arrayFilter$1(re,ee){for(var ne=-1,ae=re==null?0:re.length,ce=0,le=[];++ne<ae;){var ue=re[ne];ee(ue,ne,re)&&(le[ce++]=ue)}return le}var _arrayFilter=arrayFilter$1;function stubArray$1(){return[]}var stubArray_1=stubArray$1,arrayFilter=_arrayFilter,stubArray=stubArray_1,objectProto$5=Object.prototype,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols?function(re){return re==null?[]:(re=Object(re),arrayFilter(nativeGetSymbols(re),function(ee){return propertyIsEnumerable.call(re,ee)}))}:stubArray,_getSymbols=getSymbols$1;function baseTimes$1(re,ee){for(var ne=-1,ae=Array(re);++ne<re;)ae[ne]=ee(ne);return ae}var _baseTimes=baseTimes$1,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$2.exports;(function(re,ee){var ne=_root,ae=stubFalse_1,ce=ee&&!ee.nodeType&&ee,le=ce&&!0&&re&&!re.nodeType&&re,ue=le&&le.exports===ce,he=ue?ne.Buffer:void 0,fe=he?he.isBuffer:void 0,me=fe||ae;re.exports=me})(isBuffer$2,isBuffer$2.exports);var isBufferExports=isBuffer$2.exports,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$3(re,ee){var ne=typeof re;return ee=ee??MAX_SAFE_INTEGER$1,!!ee&&(ne=="number"||ne!="symbol"&&reIsUint.test(re))&&re>-1&&re%1==0&&re<ee}var _isIndex=isIndex$3,MAX_SAFE_INTEGER=9007199254740991;function isLength$3(re){return typeof re=="number"&&re>-1&&re%1==0&&re<=MAX_SAFE_INTEGER}var isLength_1=isLength$3,baseGetTag$2=_baseGetTag,isLength$2=isLength_1,isObjectLike$2=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(re){return isObjectLike$2(re)&&isLength$2(re.length)&&!!typedArrayTags[baseGetTag$2(re)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$2(re){return function(ee){return re(ee)}}var _baseUnary=baseUnary$2,_nodeUtil={exports:{}};_nodeUtil.exports;(function(re,ee){var ne=_freeGlobal,ae=ee&&!ee.nodeType&&ee,ce=ae&&!0&&re&&!re.nodeType&&re,le=ce&&ce.exports===ae,ue=le&&ne.process,he=function(){try{var fe=ce&&ce.require&&ce.require("util").types;return fe||ue&&ue.binding&&ue.binding("util")}catch{}}();re.exports=he})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary$1=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary$1(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$2,baseTimes=_baseTimes,isArguments$1=isArguments_1,isArray$5=isArray_1,isBuffer$1=isBufferExports,isIndex$2=_isIndex,isTypedArray$1=isTypedArray_1,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function arrayLikeKeys$1(re,ee){var ne=isArray$5(re),ae=!ne&&isArguments$1(re),ce=!ne&&!ae&&isBuffer$1(re),le=!ne&&!ae&&!ce&&isTypedArray$1(re),ue=ne||ae||ce||le,he=ue?baseTimes(re.length,String):[],fe=he.length;for(var me in re)(ee||hasOwnProperty$3.call(re,me))&&!(ue&&(me=="length"||ce&&(me=="offset"||me=="parent")||le&&(me=="buffer"||me=="byteLength"||me=="byteOffset")||isIndex$2(me,fe)))&&he.push(me);return he}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$3=Object.prototype;function isPrototype$1(re){var ee=re&&re.constructor,ne=typeof ee=="function"&&ee.prototype||objectProto$3;return re===ne}var _isPrototype=isPrototype$1;function overArg$1(re,ee){return function(ne){return re(ee(ne))}}var _overArg=overArg$1,overArg=_overArg,nativeKeys$1=overArg(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function baseKeys$1(re){if(!isPrototype(re))return nativeKeys(re);var ee=[];for(var ne in Object(re))hasOwnProperty$2.call(re,ne)&&ne!="constructor"&&ee.push(ne);return ee}var _baseKeys=baseKeys$1,isFunction$1=isFunction_1,isLength$1=isLength_1;function isArrayLike$4(re){return re!=null&&isLength$1(re.length)&&!isFunction$1(re)}var isArrayLike_1=isArrayLike$4,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$3=isArrayLike_1;function keys$3(re){return isArrayLike$3(re)?arrayLikeKeys(re):baseKeys(re)}var keys_1=keys$3,baseGetAllKeys=_baseGetAllKeys,getSymbols=_getSymbols,keys$2=keys_1;function getAllKeys$1(re){return baseGetAllKeys(re,keys$2,getSymbols)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects$1(re,ee,ne,ae,ce,le){var ue=ne&COMPARE_PARTIAL_FLAG$3,he=getAllKeys(re),fe=he.length,me=getAllKeys(ee),ge=me.length;if(fe!=ge&&!ue)return!1;for(var ve=fe;ve--;){var ye=he[ve];if(!(ue?ye in ee:hasOwnProperty$1.call(ee,ye)))return!1}var be=le.get(re),Ee=le.get(ee);if(be&&Ee)return be==ee&&Ee==re;var Ce=!0;le.set(re,ee),le.set(ee,re);for(var Se=ue;++ve<fe;){ye=he[ve];var Te=re[ye],ke=ee[ye];if(ae)var Ne=ue?ae(ke,Te,ye,ee,re,le):ae(Te,ke,ye,re,ee,le);if(!(Ne===void 0?Te===ke||ce(Te,ke,ne,ae,le):Ne)){Ce=!1;break}Se||(Se=ye=="constructor")}if(Ce&&!Se){var Fe=re.constructor,De=ee.constructor;Fe!=De&&"constructor"in re&&"constructor"in ee&&!(typeof Fe=="function"&&Fe instanceof Fe&&typeof De=="function"&&De instanceof De)&&(Ce=!1)}return le.delete(re),le.delete(ee),Ce}var _equalObjects=equalObjects$1,getNative$3=_getNative,root$3=_root,DataView$2=getNative$3(root$3,"DataView"),_DataView=DataView$2,getNative$2=_getNative,root$2=_root,Promise$2=getNative$2(root$2,"Promise"),_Promise=Promise$2,getNative$1=_getNative,root$1=_root,Set$3=getNative$1(root$1,"Set"),_Set=Set$3,getNative=_getNative,root=_root,WeakMap$2=getNative(root,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$2=_Set,WeakMap$1=_WeakMap,baseGetTag$1=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$1),getTag$1=baseGetTag$1;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$1(new Map$1)!=mapTag||Promise$1&&getTag$1(Promise$1.resolve())!=promiseTag||Set$2&&getTag$1(new Set$2)!=setTag||WeakMap$1&&getTag$1(new WeakMap$1)!=weakMapTag)&&(getTag$1=function(re){var ee=baseGetTag$1(re),ne=ee==objectTag$1?re.constructor:void 0,ae=ne?toSource(ne):"";if(ae)switch(ae){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return ee});var _getTag=getTag$1,Stack$1=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag=_getTag,isArray$4=isArray_1,isBuffer=isBufferExports,isTypedArray=isTypedArray_1,COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep$1(re,ee,ne,ae,ce,le){var ue=isArray$4(re),he=isArray$4(ee),fe=ue?arrayTag:getTag(re),me=he?arrayTag:getTag(ee);fe=fe==argsTag?objectTag:fe,me=me==argsTag?objectTag:me;var ge=fe==objectTag,ve=me==objectTag,ye=fe==me;if(ye&&isBuffer(re)){if(!isBuffer(ee))return!1;ue=!0,ge=!1}if(ye&&!ge)return le||(le=new Stack$1),ue||isTypedArray(re)?equalArrays(re,ee,ne,ae,ce,le):equalByTag(re,ee,fe,ne,ae,ce,le);if(!(ne&COMPARE_PARTIAL_FLAG$2)){var be=ge&&hasOwnProperty.call(re,"__wrapped__"),Ee=ve&&hasOwnProperty.call(ee,"__wrapped__");if(be||Ee){var Ce=be?re.value():re,Se=Ee?ee.value():ee;return le||(le=new Stack$1),ce(Ce,Se,ne,ae,le)}}return ye?(le||(le=new Stack$1),equalObjects(re,ee,ne,ae,ce,le)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike$1=isObjectLike_1;function baseIsEqual$2(re,ee,ne,ae,ce){return re===ee?!0:re==null||ee==null||!isObjectLike$1(re)&&!isObjectLike$1(ee)?re!==re&&ee!==ee:baseIsEqualDeep(re,ee,ne,ae,baseIsEqual$2,ce)}var _baseIsEqual=baseIsEqual$2,Stack=_Stack,baseIsEqual$1=_baseIsEqual,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch$1(re,ee,ne,ae){var ce=ne.length,le=ce,ue=!ae;if(re==null)return!le;for(re=Object(re);ce--;){var he=ne[ce];if(ue&&he[2]?he[1]!==re[he[0]]:!(he[0]in re))return!1}for(;++ce<le;){he=ne[ce];var fe=he[0],me=re[fe],ge=he[1];if(ue&&he[2]){if(me===void 0&&!(fe in re))return!1}else{var ve=new Stack;if(ae)var ye=ae(me,ge,fe,re,ee,ve);if(!(ye===void 0?baseIsEqual$1(ge,me,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,ae,ve):ye))return!1}}return!0}var _baseIsMatch=baseIsMatch$1,isObject$3=isObject_1;function isStrictComparable$2(re){return re===re&&!isObject$3(re)}var _isStrictComparable=isStrictComparable$2,isStrictComparable$1=_isStrictComparable,keys$1=keys_1;function getMatchData$1(re){for(var ee=keys$1(re),ne=ee.length;ne--;){var ae=ee[ne],ce=re[ae];ee[ne]=[ae,ce,isStrictComparable$1(ce)]}return ee}var _getMatchData=getMatchData$1;function matchesStrictComparable$2(re,ee){return function(ne){return ne==null?!1:ne[re]===ee&&(ee!==void 0||re in Object(ne))}}var _matchesStrictComparable=matchesStrictComparable$2,baseIsMatch=_baseIsMatch,getMatchData=_getMatchData,matchesStrictComparable$1=_matchesStrictComparable;function baseMatches$1(re){var ee=getMatchData(re);return ee.length==1&&ee[0][2]?matchesStrictComparable$1(ee[0][0],ee[0][1]):function(ne){return ne===re||baseIsMatch(ne,re,ee)}}var _baseMatches=baseMatches$1;function baseHasIn$1(re,ee){return re!=null&&ee in Object(re)}var _baseHasIn=baseHasIn$1,castPath=_castPath,isArguments=isArguments_1,isArray$3=isArray_1,isIndex$1=_isIndex,isLength=isLength_1,toKey$2=_toKey;function hasPath$1(re,ee,ne){ee=castPath(ee,re);for(var ae=-1,ce=ee.length,le=!1;++ae<ce;){var ue=toKey$2(ee[ae]);if(!(le=re!=null&&ne(re,ue)))break;re=re[ue]}return le||++ae!=ce?le:(ce=re==null?0:re.length,!!ce&&isLength(ce)&&isIndex$1(ue,ce)&&(isArray$3(re)||isArguments(re)))}var _hasPath=hasPath$1,baseHasIn=_baseHasIn,hasPath=_hasPath;function hasIn$1(re,ee){return re!=null&&hasPath(re,ee,baseHasIn)}var hasIn_1=hasIn$1,baseIsEqual=_baseIsEqual,get$1=get_1,hasIn=hasIn_1,isKey$2=_isKey,isStrictComparable=_isStrictComparable,matchesStrictComparable=_matchesStrictComparable,toKey$1=_toKey,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty$1(re,ee){return isKey$2(re)&&isStrictComparable(ee)?matchesStrictComparable(toKey$1(re),ee):function(ne){var ae=get$1(ne,re);return ae===void 0&&ae===ee?hasIn(ne,re):baseIsEqual(ee,ae,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}var _baseMatchesProperty=baseMatchesProperty$1;function identity$2(re){return re}var identity_1=identity$2;function baseProperty$1(re){return function(ee){return ee==null?void 0:ee[re]}}var _baseProperty=baseProperty$1,baseGet$2=_baseGet;function basePropertyDeep$1(re){return function(ee){return baseGet$2(ee,re)}}var _basePropertyDeep=basePropertyDeep$1,baseProperty=_baseProperty,basePropertyDeep=_basePropertyDeep,isKey$1=_isKey,toKey=_toKey;function property$1(re){return isKey$1(re)?baseProperty(toKey(re)):basePropertyDeep(re)}var property_1=property$1,baseMatches=_baseMatches,baseMatchesProperty=_baseMatchesProperty,identity$1=identity_1,isArray$2=isArray_1,property=property_1;function baseIteratee$2(re){return typeof re=="function"?re:re==null?identity$1:typeof re=="object"?isArray$2(re)?baseMatchesProperty(re[0],re[1]):baseMatches(re):property(re)}var _baseIteratee=baseIteratee$2;function baseFindIndex$1(re,ee,ne,ae){for(var ce=re.length,le=ne+(ae?1:-1);ae?le--:++le<ce;)if(ee(re[le],le,re))return le;return-1}var _baseFindIndex=baseFindIndex$1;function baseIsNaN$1(re){return re!==re}var _baseIsNaN=baseIsNaN$1;function strictIndexOf$1(re,ee,ne){for(var ae=ne-1,ce=re.length;++ae<ce;)if(re[ae]===ee)return ae;return-1}var _strictIndexOf=strictIndexOf$1,baseFindIndex=_baseFindIndex,baseIsNaN=_baseIsNaN,strictIndexOf=_strictIndexOf;function baseIndexOf$1(re,ee,ne){return ee===ee?strictIndexOf(re,ee,ne):baseFindIndex(re,baseIsNaN,ne)}var _baseIndexOf=baseIndexOf$1,baseIndexOf=_baseIndexOf;function arrayIncludes$1(re,ee){var ne=re==null?0:re.length;return!!ne&&baseIndexOf(re,ee,0)>-1}var _arrayIncludes=arrayIncludes$1;function arrayIncludesWith$1(re,ee,ne){for(var ae=-1,ce=re==null?0:re.length;++ae<ce;)if(ne(ee,re[ae]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith$1;function noop$1(){}var noop_1=noop$1,Set$1=_Set,noop=noop_1,setToArray$1=_setToArray,INFINITY$1=1/0,createSet$1=Set$1&&1/setToArray$1(new Set$1([,-0]))[1]==INFINITY$1?function(re){return new Set$1(re)}:noop,_createSet=createSet$1,SetCache=_SetCache,arrayIncludes=_arrayIncludes,arrayIncludesWith=_arrayIncludesWith,cacheHas=_cacheHas,createSet=_createSet,setToArray=_setToArray,LARGE_ARRAY_SIZE=200;function baseUniq$2(re,ee,ne){var ae=-1,ce=arrayIncludes,le=re.length,ue=!0,he=[],fe=he;if(ne)ue=!1,ce=arrayIncludesWith;else if(le>=LARGE_ARRAY_SIZE){var me=ee?null:createSet(re);if(me)return setToArray(me);ue=!1,ce=cacheHas,fe=new SetCache}else fe=ee?[]:he;e:for(;++ae<le;){var ge=re[ae],ve=ee?ee(ge):ge;if(ge=ne||ge!==0?ge:0,ue&&ve===ve){for(var ye=fe.length;ye--;)if(fe[ye]===ve)continue e;ee&&fe.push(ve),he.push(ge)}else ce(fe,ve,ne)||(fe!==he&&fe.push(ve),he.push(ge))}return he}var _baseUniq=baseUniq$2,baseIteratee$1=_baseIteratee,baseUniq$1=_baseUniq;function uniqBy(re,ee){return re&&re.length?baseUniq$1(re,baseIteratee$1(ee)):[]}var uniqBy_1=uniqBy;const uniqBy$1=getDefaultExportFromCjs(uniqBy_1);function NewObjktsFeed(){return jsx$1(TokenCollection,{feeds_menu:!0,label:"New OBJKTs",namespace:"new-objkts-feed",maxItems:600,postProcessTokens:re=>uniqBy$1(re,"artist_address"),query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query getNewObjkt($limit: Int!) {
          tokens(
            where: { editions: { _gt: "0" }, metadata_status: { _eq: "processed" }, fa2_address: { _eq: "${HEN_CONTRACT_FA2}"} }
            order_by: { minted_at: desc }
            limit: $limit

          ) {
            ...baseTokenFields
          }
        }
      `})}function MimeTypeFeed({label:re,namespace:ee,mimeTypes:ne}){return jsx$1(TokenCollection,{feeds_menu:!0,label:re,namespace:ee,maxItems:600,postProcessTokens:ae=>uniqBy$1(ae,"artist_address"),query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query getTokensByMimeTypes($limit: Int!) {
          tokens(where: { mime_type: {_in : [${ne.map(ae=>`"${ae}"`).join(", ")}] }, editions : { _neq : 0 }, metadata_status: { _eq: "processed" }, fa2_address: { _eq: "${HEN_CONTRACT_FA2}"}}, order_by: { minted_at: desc }, limit: $limit) {
              ...baseTokenFields
          }
        }
      `})}function GlbFeed(){return jsx$1(MimeTypeFeed,{label:"3D OBJKTs",namespace:"glb-feed",mimeTypes:["model/gltf-binary"]})}function AudioFeed(){return jsx$1(MimeTypeFeed,{label:"Audio OBJKTs",namespace:"audio-feed",mimeTypes:["audio/ogg","audio/wav","audio/mpeg","audio/vorbis","audio/mp4"]})}function MidiFeed(){return jsx$1(MimeTypeFeed,{label:"Midi OBJKTs",namespace:"midi-feed",mimeTypes:["audio/mid","audio/midi"]})}function VideoFeed(){return jsx$1(MimeTypeFeed,{label:"Video OBJKTs",namespace:"video-feed",mimeTypes:["video/mp4"]})}function PdfFeed(){return jsx$1(MimeTypeFeed,{label:"PDF OBJKTs",namespace:"pdf-feed",mimeTypes:["application/pdf"]})}function MarkdownFeed(){return jsx$1(MimeTypeFeed,{label:"Markdown OBJKTs",namespace:"md-feed",mimeTypes:["text/markdown"]})}function TextFeed(){return jsx$1(MimeTypeFeed,{label:"Text OBJKTs",namespace:"txt-feed",mimeTypes:["text/plain"]})}function ImageFeed(){return jsx$1(MimeTypeFeed,{label:"Image OBJKTs",namespace:"image-feed",mimeTypes:["image/jpeg","image/png","image/jpg"]})}function HtmlSvgFeed(){return jsx$1(MimeTypeFeed,{label:"Interactive OBJKTs (HTML or SVG)",namespace:"html-svg-feed",mimeTypes:["application/x-directory","image/svg+xml"]})}function GifFeed(){return jsx$1(MimeTypeFeed,{label:"GIF OBJKTs",namespace:"gif-feed",mimeTypes:["image/gif"]})}function createBaseFor$1(re){return function(ee,ne,ae){for(var ce=-1,le=Object(ee),ue=ae(ee),he=ue.length;he--;){var fe=ue[re?he:++ce];if(ne(le[fe],fe,le)===!1)break}return ee}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$1=createBaseFor(),_baseFor=baseFor$1,baseFor=_baseFor,keys=keys_1;function baseForOwn$1(re,ee){return re&&baseFor(re,ee,keys)}var _baseForOwn=baseForOwn$1,isArrayLike$2=isArrayLike_1;function createBaseEach$1(re,ee){return function(ne,ae){if(ne==null)return ne;if(!isArrayLike$2(ne))return re(ne,ae);for(var ce=ne.length,le=ee?ce:-1,ue=Object(ne);(ee?le--:++le<ce)&&ae(ue[le],le,ue)!==!1;);return ne}}var _createBaseEach=createBaseEach$1,baseForOwn=_baseForOwn,createBaseEach=_createBaseEach,baseEach$1=createBaseEach(baseForOwn),_baseEach=baseEach$1,baseEach=_baseEach,isArrayLike$1=isArrayLike_1;function baseMap$1(re,ee){var ne=-1,ae=isArrayLike$1(re)?Array(re.length):[];return baseEach(re,function(ce,le,ue){ae[++ne]=ee(ce,le,ue)}),ae}var _baseMap=baseMap$1;function baseSortBy$1(re,ee){var ne=re.length;for(re.sort(ee);ne--;)re[ne]=re[ne].value;return re}var _baseSortBy=baseSortBy$1,isSymbol$1=isSymbol_1;function compareAscending$1(re,ee){if(re!==ee){var ne=re!==void 0,ae=re===null,ce=re===re,le=isSymbol$1(re),ue=ee!==void 0,he=ee===null,fe=ee===ee,me=isSymbol$1(ee);if(!he&&!me&&!le&&re>ee||le&&ue&&fe&&!he&&!me||ae&&ue&&fe||!ne&&fe||!ce)return 1;if(!ae&&!le&&!me&&re<ee||me&&ne&&ce&&!ae&&!le||he&&ne&&ce||!ue&&ce||!fe)return-1}return 0}var _compareAscending=compareAscending$1,compareAscending=_compareAscending;function compareMultiple$1(re,ee,ne){for(var ae=-1,ce=re.criteria,le=ee.criteria,ue=ce.length,he=ne.length;++ae<ue;){var fe=compareAscending(ce[ae],le[ae]);if(fe){if(ae>=he)return fe;var me=ne[ae];return fe*(me=="desc"?-1:1)}}return re.index-ee.index}var _compareMultiple=compareMultiple$1,arrayMap=_arrayMap,baseGet$1=_baseGet,baseIteratee=_baseIteratee,baseMap=_baseMap,baseSortBy=_baseSortBy,baseUnary=_baseUnary,compareMultiple=_compareMultiple,identity=identity_1,isArray$1=isArray_1;function baseOrderBy$1(re,ee,ne){ee.length?ee=arrayMap(ee,function(le){return isArray$1(le)?function(ue){return baseGet$1(ue,le.length===1?le[0]:le)}:le}):ee=[identity];var ae=-1;ee=arrayMap(ee,baseUnary(baseIteratee));var ce=baseMap(re,function(le,ue,he){var fe=arrayMap(ee,function(me){return me(le)});return{criteria:fe,index:++ae,value:le}});return baseSortBy(ce,function(le,ue){return compareMultiple(le,ue,ne)})}var _baseOrderBy=baseOrderBy$1,baseOrderBy=_baseOrderBy,isArray=isArray_1;function orderBy(re,ee,ne,ae){return re==null?[]:(isArray(ee)||(ee=ee==null?[]:[ee]),ne=ae?void 0:ne,isArray(ne)||(ne=ne==null?[]:[ne]),baseOrderBy(re,ee,ne))}var orderBy_1=orderBy;const orderBy$1=getDefaultExportFromCjs(orderBy_1),tag$1="_tag_djinq_216",feed_info="_feed_info_djinq_238",styles$i={tag:tag$1,feed_info};function FundFeed({minShares:re=50,introText:ee,infoUrl:ne,contractAddress:ae,cause:ce,namespace:le,tags:ue=null}){return jsxs(Fragment,{children:[jsxs("div",{className:styles$i.feed_info,children:[jsx$1("p",{children:ee}),jsxs("a",{href:ne,target:"_blank",rel:"noreferrer",children:["More info ",jsx$1("strong",{children:"here"})]})]}),jsx$1(TokenCollection,{feeds_menu:!0,label:`Fundraise for ${ce}`,namespace:le,maxItems:600,extractTokensFromResponse:({tokens_by_share:he,tokens_by_tag:fe})=>orderBy$1(uniqBy$1([...flatten$4(he.map(({total_shares:me,shareholders:ge,created_tokens:ve})=>flatten$4(ge.map(ye=>{if([ae].includes(ye.shareholder_address)&&ye.shares/me*100>=re)return ve}).filter(ye=>ye!==void 0)))),...fe||[]].map(me=>({...me,key:me.token_id})),({key:me})=>me),["minted_at"],["desc"]),query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query GetCollabTokens($limit: Int!) {
          tokens_by_share: teia_split_contracts(limit: $limit, where: {shareholders: {shareholder_address: {_eq: "${ae}"}}}) {
            contract_profile {
              name
            }
            total_shares
            shareholders {
              shareholder_address
              shares
            }
            created_tokens(where: {editions: {_gt: "0"}, metadata_status: { _eq: "processed" }, teia_meta: { is_signed: { _eq: true }}}, order_by: { minted_at: desc }) {
              ...baseTokenFields
            }
          }
          ${ue?`
            tokens_by_tag: tokens(where: {tags: {tag: {_in: [${ue.map(he=>`"${he}"`)}]}}, editions: {_gt: "0"}, metadata_status: { _eq: "processed" },}, limit: $limit, order_by: { minted_at: desc }) {
              ...baseTokenFields
            }
          `:""}
        }
      `})]})}function IranFeed(){return jsx$1(FundFeed,{introText:jsx$1(Fragment,{children:"This feed shows OBJKTs minted with the Iran donation address as beneficiary of at least 50% of sales volume or tagged with #Tezos4Iran"}),contractAddress:IRAN_FUNDING_CONTRACT,cause:"Iran",namespace:"iran-feed",tags:["tezos4iran","#tezos4iran"],infoUrl:"https://github.com/teia-community/teia-docs/wiki/Tezos-for-Iran"})}function PakistanFeed(){return jsx$1(FundFeed,{introText:jsx$1(Fragment,{children:"This feed shows OBJKTs minted with the Pakistan donation address as beneficiary of at least 50% of sales volume."}),contractAddress:PAKISTAN_FUNDING_CONTRACT,cause:"Pakistan",namespace:"pakistan-feed",infoUrl:"https://github.com/teia-community/teia-docs/wiki/Pakistan-Fundraiser"})}function UkraineFeed(){return jsx$1(FundFeed,{introText:jsx$1(Fragment,{children:"This feed shows OBJKTs minted with the Ukraine donation address as beneficiary of at least 50% of sales volume."}),contractAddress:UKRAINE_FUNDING_CONTRACT,cause:"Ukraine",namespace:"ukraine-feed",infoUrl:"https://github.com/teia-community/teia-docs/wiki/Ukranian-Fundraising"})}function QuakeFeed(){return jsx$1(FundFeed,{introText:jsx$1(Fragment,{children:"Tezos community initiative to support those affected by the recent earthquake in Turkey and Syria. Given the events in Morocco, we are channeling our current support toward emergency relief there."}),contractAddress:QUAKE_FUNDING_CONTRACT,cause:"Morocco, Turkey and Syria Earthquakes",namespace:"quake-feed",tags:["TezQuakeAid","#TezQuakeAid"],infoUrl:"https://app.joyn.xyz/space/tezquakeaid-ec7f1f650671"})}function MoroccoQuakeFeed(){return jsx$1(FundFeed,{introText:jsx$1(Fragment,{children:"Tezos community initiative to support those affected by the recent earthquake in Morocco."}),contractAddress:MOROCCO_QUAKE_FUNDING_CONTRACT,cause:"Morocco Earthquakes",namespace:"morocco-quake-feed",tags:["TezQuakeAid","#TezQuakeAid"],infoUrl:"https://app.joyn.xyz/space/tezquakeaid-ec7f1f650671"})}function Tez4PalFeed(){return jsx$1(FundFeed,{introText:jsx$1(Fragment,{children:"The Tezos Fundraiser #Tez4Pal, supporting Gaza civilians."}),contractAddress:TEZ4PAL_FUNDING_ADDRESS,cause:"Supporting Gaza civilians",namespace:"tez4pal",tags:["Tez4Pal","#Tez4Pal","tez4pal","#tez4pal"],infoUrl:"https://twitter.com/LN0ir/status/1745946304742576400"})}function Art4ArtistsFeed(){return jsx$1(FundFeed,{introText:jsx$1(Fragment,{children:"#Art4Artists Breadfond"}),contractAddress:ART4ARTISTS_BREADFOND_CONTRACT,cause:"Art4Artists",namespace:"art4artists",tags:["Art4Artists","#Art4Artists"],infoUrl:"https://x.com/EggsUnknow/status/1848805355620602309"})}var baseUniq=_baseUniq;function uniq(re){return re&&re.length?baseUniq(re):[]}var uniq_1=uniq;const uniq$1=getDefaultExportFromCjs(uniq_1);async function fetchAllFrensAddresses(re){const{errors:ee,data:ne}=await fetchGraphQL(distExports.gql`
      query collectorGallery($address: String!) {
        holdings(
          where: {
            holder_address: { _eq: $address }
            amount: { _gt: 0 }
            token: { artist_address: { _neq: $address } }
          }
          order_by: { token_id: desc }
        ) {
          token {
            artist_address
          }
        }
      }
    `,"collectorGallery",{address:re});return ee?(console.error(ee),[]):uniq$1(ne.holdings.map(ae=>ae.token.artist_address))}function FriendsFeed(){const re=useParams(),{data:ee}=useSWR(["/feed/friends",re.address],async()=>fetchAllFrensAddresses(re.address),{revalidateIfStale:!1,revalidateOnFocus:!1});return jsxs(Fragment,{children:[jsx$1("div",{className:styles$i.feed_info,children:jsx$1("p",{children:"This feed shows OBJKTs of your collectors and artists you collected from."})}),jsx$1(TokenCollection,{feeds_menu:!0,disable:!ee,label:"Friends Feed",namespace:"friends",variables:{wallets:ee},swrParams:[re.address],query:distExports.gql`
          ${BaseTokenFieldsFragment}
          query frensGallery($wallets: [String!], $limit: Int!) {
            tokens(
              where: {
                editions: { _gt: 0 }
                artist_address: { _in: $wallets }
                metadata_status: { _eq: "processed" }
              }
              order_by: { minted_at: desc }
              limit: $limit
            ) {
              ...baseTokenFields
            }
          }
        `})]})}var nativeFloor=Math.floor,nativeRandom$1=Math.random;function baseRandom$1(re,ee){return re+nativeFloor(nativeRandom$1()*(ee-re+1))}var _baseRandom=baseRandom$1,eq=eq_1,isArrayLike=isArrayLike_1,isIndex=_isIndex,isObject$2=isObject_1;function isIterateeCall$1(re,ee,ne){if(!isObject$2(ne))return!1;var ae=typeof ee;return(ae=="number"?isArrayLike(ne)&&isIndex(ee,ne.length):ae=="string"&&ee in ne)?eq(ne[ee],re):!1}var _isIterateeCall=isIterateeCall$1,reWhitespace=/\s/;function trimmedEndIndex$1(re){for(var ee=re.length;ee--&&reWhitespace.test(re.charAt(ee)););return ee}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(re){return re&&re.slice(0,trimmedEndIndex(re)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$1=isObject_1,isSymbol=isSymbol_1,NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(re){if(typeof re=="number")return re;if(isSymbol(re))return NAN;if(isObject$1(re)){var ee=typeof re.valueOf=="function"?re.valueOf():re;re=isObject$1(ee)?ee+"":ee}if(typeof re!="string")return re===0?re:+re;re=baseTrim(re);var ne=reIsBinary.test(re);return ne||reIsOctal.test(re)?freeParseInt(re.slice(2),ne?2:8):reIsBadHex.test(re)?NAN:+re}var toNumber_1=toNumber$1,toNumber=toNumber_1,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$1(re){if(!re)return re===0?re:0;if(re=toNumber(re),re===INFINITY||re===-INFINITY){var ee=re<0?-1:1;return ee*MAX_INTEGER}return re===re?re:0}var toFinite_1=toFinite$1,baseRandom=_baseRandom,isIterateeCall=_isIterateeCall,toFinite=toFinite_1,freeParseFloat=parseFloat,nativeMin=Math.min,nativeRandom=Math.random;function random(re,ee,ne){if(ne&&typeof ne!="boolean"&&isIterateeCall(re,ee,ne)&&(ee=ne=void 0),ne===void 0&&(typeof ee=="boolean"?(ne=ee,ee=void 0):typeof re=="boolean"&&(ne=re,re=void 0)),re===void 0&&ee===void 0?(re=0,ee=1):(re=toFinite(re),ee===void 0?(ee=re,re=0):ee=toFinite(ee)),re>ee){var ae=re;re=ee,ee=ae}if(ne||re%1||ee%1){var ce=nativeRandom();return nativeMin(re+ce*(ee-re+freeParseFloat("1e-"+((ce+"").length-1))),ee)}return baseRandom(re,ee)}var random_1=random;const random$1=getDefaultExportFromCjs(random_1);function RandomFeed({firstId:re=196,lastId:ee=1592463,max:ne=200}){const ae=reactExports.useMemo(()=>{const ce=new Set;for(;ce.size<ne;)ce.add(`${random$1(re,ee)}`);return Array.from(ce)},[re,ee,ne]);return jsx$1(TokenCollection,{feeds_menu:!0,label:"Random",namespace:"random-feed",enableInfinityScroll:!1,variables:{tokenIds:ae},maxItems:200,query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query Objkts($tokenIds: [String!] = "", $limit: Int!) {
          tokens(where: { token_id: { _in: $tokenIds }, editions: { _neq: 0 }, fa2_address: { _eq: "${HEN_CONTRACT_FA2}" } }, limit: $limit) {
            ...baseTokenFields
          }
        }
      `})}function RecentSalesFeed(){return jsx$1(TokenCollection,{feeds_menu:!0,label:"Recent Sales",namespace:"recent-sales-feed",resultsPath:"events",tokenPath:"token",keyPath:"token.token_id",maxItems:600,postProcessTokens:re=>uniqBy$1(uniqBy$1(re,"token_id"),"artist_address"),query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query getLatestSales($limit: Int!) {
          events(limit: $limit, order_by: [{level: desc, opid: desc}], where: {token: {metadata_status: {_eq: "processed"}}, implements: {_eq: "SALE"}, fa2_address: {_eq: "${HEN_CONTRACT_FA2}"}}) {
            type
            timestamp
            token {
              ...baseTokenFields
            }
          }
        }
      `})}function SearchFeed(){const[re]=useSearchParams(),ee=re.get("term")||"";return jsx$1(TagFeed,{feeds_menu:!1,label:"Search",namespace:"search-feed",tag:ee})}const container$7="_container_dvrm0_216",subjkt_icon="_subjkt_icon_dvrm0_222",flex="_flex_dvrm0_229",description="_description_dvrm0_238",user="_user_dvrm0_243",user_box="_user_box_dvrm0_250",styles$h={container:container$7,subjkt_icon,flex,description,user,user_box};function SubjktsSearchResults(){const[re]=useSearchParams(),ee=re.get("term")||"",{data:ne}=useSWR(["subjkts-search",ee],async(ce,le)=>(await fetchGraphQL(distExports.gql`
          query getSubjkts($subjkt: String!) {
            teia_users(where: { name: { _ilike: $subjkt } }) {
              user_address
              name
              metadata {
                data
              }
            }
          }
        `,"getSubjkts",{subjkt:`%${le}%`})).data,{revalidateIfStale:!1,revalidateOnFocus:!1,use:[laggy]}),ae=uniqBy$1(get$5(ne,"teia_users")||[],({name:ce})=>ce).filter(({name:ce})=>ce);return ae.length?jsx$1("div",{className:styles$h.container,children:ae.map(({user_address:ce,name:le,metadata:ue})=>{var he;return jsxs("div",{className:styles$h.subjkt_result,children:[jsxs("div",{className:styles$h.flex,children:[jsxs(Link,{className:styles$h.user_box,to:`/${encodeURIComponent(le)}`,children:[ue.data&&jsx$1(Identicon,{className:styles$h.subjkt_icon,address:ce,logo:(he=ue.data)==null?void 0:he.identicon}),jsx$1("p",{className:styles$h.user,children:le})]})," ",jsx$1("p",{className:styles$h.description,children:get$5(ue,"data.description")})]}),jsx$1(Line,{},`${le}-line`)]},le)})}):null}const DefaultFeedComponent=RecentSalesFeed,feedComponentMap={"Recent Sales":RecentSalesFeed,Art4Artists:Art4ArtistsFeed,"🏳️‍🌈 Tezospride":TagFeed,"🇮🇷 Iran":IranFeed,"Quake Aid":QuakeFeed,"🇵🇰 Pakistan":PakistanFeed,"🇺🇦 Ukraine":UkraineFeed,"🇵🇸 Tez4Pal":Tez4PalFeed,Random:RandomFeed,"New OBJKTs":NewObjktsFeed,"3D":GlbFeed,Video:VideoFeed,Image:ImageFeed,Audio:AudioFeed,"HTML & SVG":HtmlSvgFeed,PDF:PdfFeed,Markdown:MarkdownFeed,GIF:GifFeed,Friends:FriendsFeed};function Home({isSearch:re=!1}){const ee=useOutlet(),[ne]=useSearchParams(),[ae,ce]=reactExports.useState(ne.get("term")||""),le=useNavigate(),[ue]=useLocalSettings(fe=>[fe.startFeed]),he=feedComponentMap[ue]||DefaultFeedComponent;return jsxs(Page,{feed:!re,title:"Home",children:[jsx$1(Fragment,{children:re&&jsx$1(Input$2,{type:"text",name:"Enter a search term and press enter:",onChange:fe=>{ce(fe)},placeholder:"Search ↵",onKeyDown:fe=>{fe.key==="Enter"&&le({pathname:"/search",search:createSearchParams({term:ae}).toString()},{replace:!0})},value:ae})}),jsx$1(Fragment,{children:re&&ne.get("term")?jsx$1(SubjktsSearchResults,{}):null}),re?ne.get("term")?jsx$1(SearchFeed,{}):jsx$1(Fragment,{}):ee||jsx$1(he,{})]})}const defaultValuesStored={title:"",description:"",tags:"",editions:void 0,royalties:void 0,license:void 0,customLicenseData:void 0,language:void 0,nsfw:!1,photosensitive:!1,isTyped:!1},defaultValues={artifact:void 0,cover:void 0,thumbnail:void 0,getValuesStored:()=>{},updateCustomLicenseData:()=>{}},useMintStore=create$2()(subscribeWithSelector(persist((re,ee)=>({...defaultValuesStored,...defaultValues,isValid:!1,updateCustomLicenseData:ne=>{re(ae=>({...ae,customLicenseData:ne}))},reset:()=>{re({...defaultValuesStored,...defaultValues})},getValuesStored:()=>{const ne=ee();return Object.fromEntries(Object.entries(ne).filter(([ae])=>Object.keys(defaultValues).includes(ae)))},mint:async ne=>{const{proxyAddress:ae,address:ce,sync:le,mint:ue}=useUserStore.getState(),{language:he,editions:fe,royalties:me,license:ge,customLicenseData:ve,artifact:ye,title:be,description:Ee,tags:Ce,cover:Se,photosensitive:Te,nsfw:ke,isMonoType:Ne,reset:Fe}=ee(),De=useModalStore.getState().show,Oe=useModalStore.getState().step,Re=useModalStore.getState().close;if(!ye||!ye.file)return;if(!ce){Oe("Sync Required","Sync your wallet"),await le(),Re();return}if(!ALLOWED_MIMETYPES.includes(ye.mimeType)){De(`File format invalid. supported formats include: ${ALLOWED_FILETYPES_LABEL.toLocaleLowerCase()}`);return}if(Se&&!ALLOWED_COVER_MIMETYPES.includes(Se.mimeType)){De(`Cover file format invalid. supported formats include: ${ALLOWED_COVER_FILETYPES_LABEL.toLocaleLowerCase()}`);return}const Be=parseInt((ye.file.size/1024/1024).toFixed(4));if(Be>MINT_FILESIZE){De(`Max file size (${Be}). Limit is currently ${MINT_FILESIZE}MB`);return}Oe("Mint","Preparing OBJKT");const Le=ae||ce;console.debug({minterAddress:Le});const je=Te?{hazards:[METADATA_ACCESSIBILITY_HAZARDS_PHOTOSENS]}:null,Ge=ke?METADATA_CONTENT_RATING_MATURE:null,{imageWidth:qe,imageHeight:Ue}=await getImageDimensions(ye),ze=[MIMETYPE.ZIP,MIMETYPE.ZIP1,MIMETYPE.ZIP2].includes(ye.mimeType),He=[],Ye=await generateCoverAndThumbnail(Se||ye),Xe=Se||Ye.cover,We=Ye.thumbnail;if(ye.mimeType.indexOf("image")===0){const Qt={mimeType:ye.mimeType,fileSize:ye.file.size,fileName:ye.file.name};qe&&Ue&&(Qt.dimensions={value:`${qe}x${Ue}`,unit:"px"}),He.push(Qt)}else ze?He.push({fileSize:ye.file.size,fileName:ye.file.name,mimeType:MIMETYPE.DIRECTORY}):He.push({fileSize:ye.file.size,fileName:ye.file.name,mimeType:ye.mimeType});if(ye.mimeType!==MIMETYPE.GIF){let Qt=!1;if(Xe){Qt=Xe.mimeType===MIMETYPE.GIF;const{imageWidth:Yt,imageHeight:Jt}=await getImageDimensions(Xe);Xe.format={mimeType:Xe.mimeType,fileSize:Xe.buffer.byteLength,fileName:`${removeExtension(ye.file.name)}.${Qt?"gif":extensionFromMimetype(Xe.mimeType)}`,dimensions:{value:`${Yt}x${Jt}`,unit:"px"}}}if(We&&!Qt){const{imageWidth:Yt,imageHeight:Jt}=await getImageDimensions(We);We.format={mimeType:We.mimeType,fileSize:We.buffer.byteLength,fileName:`${removeExtension(ye.file.name)}.${extensionFromMimetype(We.mimeType)}`,dimensions:{value:`${Yt}x${Jt}`,unit:"px"}}}}let Ze;if(ze){const Qt=await prepareFilesFromZIP(ye.buffer);Ze=await prepareDirectory({name:be,description:Ee,tags:Ce,address:Le,files:Qt,cover:Xe,thumbnail:We,generateDisplayUri:!0,rights:ge==null?void 0:ge.value,rightsUri:ve,language:he==null?void 0:he.value,accessibility:je,contentRating:Ge,formats:He})}else Ze=await prepareFile({name:be,description:Ee,tags:Ce,address:Le,file:ye,cover:Xe,thumbnail:We,rights:ge==null?void 0:ge.value,rightsUri:ve,language:he==null?void 0:he.value,accessibility:je,contentRating:Ge,formats:He});console.debug("Calling mint with",{minterAddress:Le,amount:fe,path:Ze,royalties:me});const Vt=await ue(Le,fe,Ze,me);console.debug("success",Vt),Vt&&Fe()}}),{name:"mint",storage:createJSONStorage(()=>localStorage),onRehydrateStorage:re=>(ee,ne)=>{ne&&console.log("an error happened during hydration",ne)},version:1,partialize:re=>Object.fromEntries(Object.entries(re).filter(([ee])=>Object.keys(defaultValuesStored).includes(ee)))})));var isCheckBoxInput=re=>re.type==="checkbox",isDateObject=re=>re instanceof Date,isNullOrUndefined=re=>re==null;const isObjectType=re=>typeof re=="object";var isObject=re=>!isNullOrUndefined(re)&&!Array.isArray(re)&&isObjectType(re)&&!isDateObject(re),getEventValue=re=>isObject(re)&&re.target?isCheckBoxInput(re.target)?re.target.checked:re.target.value:re,getNodeParentName=re=>re.substring(0,re.search(/\.\d+(\.|$)/))||re,isNameInFieldArray=(re,ee)=>re.has(getNodeParentName(ee)),compact=re=>Array.isArray(re)?re.filter(Boolean):[],isUndefined=re=>re===void 0,get=(re,ee,ne)=>{if(!ee||!isObject(re))return ne;const ae=compact(ee.split(/[,[\].]+?/)).reduce((ce,le)=>isNullOrUndefined(ce)?ce:ce[le],re);return isUndefined(ae)||ae===re?isUndefined(re[ee])?ne:re[ee]:ae};const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},HookFormContext=React.createContext(null),useFormContext=()=>React.useContext(HookFormContext),FormProvider=re=>{const{children:ee,...ne}=re;return React.createElement(HookFormContext.Provider,{value:ne},ee)};var getProxyFormState=(re,ee,ne,ae=!0)=>{const ce={defaultValues:ee._defaultValues};for(const le in re)Object.defineProperty(ce,le,{get:()=>{const ue=le;return ee._proxyFormState[ue]!==VALIDATION_MODE.all&&(ee._proxyFormState[ue]=!ae||VALIDATION_MODE.all),ne&&(ne[ue]=!0),re[ue]}});return ce},isEmptyObject=re=>isObject(re)&&!Object.keys(re).length,shouldRenderFormState=(re,ee,ne,ae)=>{ne(re);const{name:ce,...le}=re;return isEmptyObject(le)||Object.keys(le).length>=Object.keys(ee).length||Object.keys(le).find(ue=>ee[ue]===(!ae||VALIDATION_MODE.all))},convertToArrayPayload=re=>Array.isArray(re)?re:[re],shouldSubscribeByName=(re,ee,ne)=>ne&&ee?re===ee:!re||!ee||re===ee||convertToArrayPayload(re).some(ae=>ae&&(ae.startsWith(ee)||ee.startsWith(ae)));function useSubscribe(re){const ee=React.useRef(re);ee.current=re,React.useEffect(()=>{const ne=!re.disabled&&ee.current.subject.subscribe({next:ee.current.next});return()=>{ne&&ne.unsubscribe()}},[re.disabled])}function useFormState(re){const ee=useFormContext(),{control:ne=ee.control,disabled:ae,name:ce,exact:le}=re||{},[ue,he]=React.useState(ne._formState),fe=React.useRef(!0),me=React.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),ge=React.useRef(ce);return ge.current=ce,useSubscribe({disabled:ae,next:ve=>fe.current&&shouldSubscribeByName(ge.current,ve.name,le)&&shouldRenderFormState(ve,me.current,ne._updateFormState)&&he({...ne._formState,...ve}),subject:ne._subjects.state}),React.useEffect(()=>{fe.current=!0;const ve=ne._proxyFormState.isDirty&&ne._getDirty();return ve!==ne._formState.isDirty&&ne._subjects.state.next({isDirty:ve}),me.current.isValid&&ne._updateValid(!0),()=>{fe.current=!1}},[ne]),getProxyFormState(ue,ne,me.current,!1)}var isString=re=>typeof re=="string",generateWatchOutput=(re,ee,ne,ae,ce)=>isString(re)?(ae&&ee.watch.add(re),get(ne,re,ce)):Array.isArray(re)?re.map(le=>(ae&&ee.watch.add(le),get(ne,le))):(ae&&(ee.watchAll=!0),ne),isPlainObject=re=>{const ee=re.constructor&&re.constructor.prototype;return isObject(ee)&&ee.hasOwnProperty("isPrototypeOf")},isWeb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cloneObject(re){let ee;const ne=Array.isArray(re);if(re instanceof Date)ee=new Date(re);else if(re instanceof Set)ee=new Set(re);else if(!(isWeb&&(re instanceof Blob||re instanceof FileList))&&(ne||isObject(re)))if(ee=ne?[]:{},!Array.isArray(re)&&!isPlainObject(re))ee=re;else for(const ae in re)ee[ae]=cloneObject(re[ae]);else return re;return ee}function useWatch(re){const ee=useFormContext(),{control:ne=ee.control,name:ae,defaultValue:ce,disabled:le,exact:ue}=re||{},he=React.useRef(ae);he.current=ae,useSubscribe({disabled:le,subject:ne._subjects.watch,next:ge=>{shouldSubscribeByName(he.current,ge.name,ue)&&me(cloneObject(generateWatchOutput(he.current,ne._names,ge.values||ne._formValues,!1,ce)))}});const[fe,me]=React.useState(ne._getWatch(ae,ce));return React.useEffect(()=>ne._removeUnmounted()),fe}function useController(re){const ee=useFormContext(),{name:ne,control:ae=ee.control,shouldUnregister:ce}=re,le=isNameInFieldArray(ae._names.array,ne),ue=useWatch({control:ae,name:ne,defaultValue:get(ae._formValues,ne,get(ae._defaultValues,ne,re.defaultValue)),exact:!0}),he=useFormState({control:ae,name:ne}),fe=React.useRef(ae.register(ne,{...re.rules,value:ue}));return React.useEffect(()=>{const me=(ge,ve)=>{const ye=get(ae._fields,ge);ye&&(ye._f.mount=ve)};return me(ne,!0),()=>{const ge=ae._options.shouldUnregister||ce;(le?ge&&!ae._stateFlags.action:ge)?ae.unregister(ne):me(ne,!1)}},[ne,ae,le,ce]),{field:{name:ne,value:ue,onChange:React.useCallback(me=>fe.current.onChange({target:{value:getEventValue(me),name:ne},type:EVENTS.CHANGE}),[ne]),onBlur:React.useCallback(()=>fe.current.onBlur({target:{value:get(ae._formValues,ne),name:ne},type:EVENTS.BLUR}),[ne,ae]),ref:me=>{const ge=get(ae._fields,ne);ge&&me&&(ge._f.ref={focus:()=>me.focus(),select:()=>me.select(),setCustomValidity:ve=>me.setCustomValidity(ve),reportValidity:()=>me.reportValidity()})}},formState:he,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!get(he.errors,ne)},isDirty:{enumerable:!0,get:()=>!!get(he.dirtyFields,ne)},isTouched:{enumerable:!0,get:()=>!!get(he.touchedFields,ne)},error:{enumerable:!0,get:()=>get(he.errors,ne)}})}}const Controller=re=>re.render(useController(re));var appendErrors=(re,ee,ne,ae,ce)=>ee?{...ne[re],types:{...ne[re]&&ne[re].types?ne[re].types:{},[ae]:ce||!0}}:{},isKey=re=>/^\w*$/.test(re),stringToPath=re=>compact(re.replace(/["|']|\]/g,"").split(/\.|\[/));function set(re,ee,ne){let ae=-1;const ce=isKey(ee)?[ee]:stringToPath(ee),le=ce.length,ue=le-1;for(;++ae<le;){const he=ce[ae];let fe=ne;if(ae!==ue){const me=re[he];fe=isObject(me)||Array.isArray(me)?me:isNaN(+ce[ae+1])?{}:[]}re[he]=fe,re=re[he]}return re}const focusFieldBy=(re,ee,ne)=>{for(const ae of ne||Object.keys(re)){const ce=get(re,ae);if(ce){const{_f:le,...ue}=ce;if(le&&ee(le.name)){if(le.ref.focus){le.ref.focus();break}else if(le.refs&&le.refs[0].focus){le.refs[0].focus();break}}else isObject(ue)&&focusFieldBy(ue,ee)}}};var getValidationModes=re=>({isOnSubmit:!re||re===VALIDATION_MODE.onSubmit,isOnBlur:re===VALIDATION_MODE.onBlur,isOnChange:re===VALIDATION_MODE.onChange,isOnAll:re===VALIDATION_MODE.all,isOnTouch:re===VALIDATION_MODE.onTouched}),isWatched=(re,ee,ne)=>!ne&&(ee.watchAll||ee.watch.has(re)||[...ee.watch].some(ae=>re.startsWith(ae)&&/^\.\w+/.test(re.slice(ae.length)))),updateFieldArrayRootError=(re,ee,ne)=>{const ae=compact(get(re,ne));return set(ae,"root",ee[ne]),set(re,ne,ae),re},isBoolean=re=>typeof re=="boolean",isFileInput=re=>re.type==="file",isFunction=re=>typeof re=="function",isHTMLElement=re=>{if(!isWeb)return!1;const ee=re?re.ownerDocument:0;return re instanceof(ee&&ee.defaultView?ee.defaultView.HTMLElement:HTMLElement)},isMessage=re=>isString(re)||React.isValidElement(re),isRadioInput=re=>re.type==="radio",isRegex=re=>re instanceof RegExp;const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=re=>{if(Array.isArray(re)){if(re.length>1){const ee=re.filter(ne=>ne&&ne.checked&&!ne.disabled).map(ne=>ne.value);return{value:ee,isValid:!!ee.length}}return re[0].checked&&!re[0].disabled?re[0].attributes&&!isUndefined(re[0].attributes.value)?isUndefined(re[0].value)||re[0].value===""?validResult:{value:re[0].value,isValid:!0}:validResult:defaultResult}return defaultResult};const defaultReturn={isValid:!1,value:null};var getRadioValue=re=>Array.isArray(re)?re.reduce((ee,ne)=>ne&&ne.checked&&!ne.disabled?{isValid:!0,value:ne.value}:ee,defaultReturn):defaultReturn;function getValidateError(re,ee,ne="validate"){if(isMessage(re)||Array.isArray(re)&&re.every(isMessage)||isBoolean(re)&&!re)return{type:ne,message:isMessage(re)?re:"",ref:ee}}var getValueAndMessage=re=>isObject(re)&&!isRegex(re)?re:{value:re,message:""},validateField=async(re,ee,ne,ae,ce)=>{const{ref:le,refs:ue,required:he,maxLength:fe,minLength:me,min:ge,max:ve,pattern:ye,validate:be,name:Ee,valueAsNumber:Ce,mount:Se,disabled:Te}=re._f,ke=get(ee,Ee);if(!Se||Te)return{};const Ne=ue?ue[0]:le,Fe=qe=>{ae&&Ne.reportValidity&&(Ne.setCustomValidity(isBoolean(qe)?"":qe||""),Ne.reportValidity())},De={},Oe=isRadioInput(le),Re=isCheckBoxInput(le),Be=Oe||Re,Le=(Ce||isFileInput(le))&&isUndefined(le.value)&&isUndefined(ke)||isHTMLElement(le)&&le.value===""||ke===""||Array.isArray(ke)&&!ke.length,je=appendErrors.bind(null,Ee,ne,De),Ge=(qe,Ue,ze,He=INPUT_VALIDATION_RULES.maxLength,Ye=INPUT_VALIDATION_RULES.minLength)=>{const Xe=qe?Ue:ze;De[Ee]={type:qe?He:Ye,message:Xe,ref:le,...je(qe?He:Ye,Xe)}};if(ce?!Array.isArray(ke)||!ke.length:he&&(!Be&&(Le||isNullOrUndefined(ke))||isBoolean(ke)&&!ke||Re&&!getCheckboxValue(ue).isValid||Oe&&!getRadioValue(ue).isValid)){const{value:qe,message:Ue}=isMessage(he)?{value:!!he,message:he}:getValueAndMessage(he);if(qe&&(De[Ee]={type:INPUT_VALIDATION_RULES.required,message:Ue,ref:Ne,...je(INPUT_VALIDATION_RULES.required,Ue)},!ne))return Fe(Ue),De}if(!Le&&(!isNullOrUndefined(ge)||!isNullOrUndefined(ve))){let qe,Ue;const ze=getValueAndMessage(ve),He=getValueAndMessage(ge);if(!isNullOrUndefined(ke)&&!isNaN(ke)){const Ye=le.valueAsNumber||ke&&+ke;isNullOrUndefined(ze.value)||(qe=Ye>ze.value),isNullOrUndefined(He.value)||(Ue=Ye<He.value)}else{const Ye=le.valueAsDate||new Date(ke),Xe=Vt=>new Date(new Date().toDateString()+" "+Vt),We=le.type=="time",Ze=le.type=="week";isString(ze.value)&&ke&&(qe=We?Xe(ke)>Xe(ze.value):Ze?ke>ze.value:Ye>new Date(ze.value)),isString(He.value)&&ke&&(Ue=We?Xe(ke)<Xe(He.value):Ze?ke<He.value:Ye<new Date(He.value))}if((qe||Ue)&&(Ge(!!qe,ze.message,He.message,INPUT_VALIDATION_RULES.max,INPUT_VALIDATION_RULES.min),!ne))return Fe(De[Ee].message),De}if((fe||me)&&!Le&&(isString(ke)||ce&&Array.isArray(ke))){const qe=getValueAndMessage(fe),Ue=getValueAndMessage(me),ze=!isNullOrUndefined(qe.value)&&ke.length>qe.value,He=!isNullOrUndefined(Ue.value)&&ke.length<Ue.value;if((ze||He)&&(Ge(ze,qe.message,Ue.message),!ne))return Fe(De[Ee].message),De}if(ye&&!Le&&isString(ke)){const{value:qe,message:Ue}=getValueAndMessage(ye);if(isRegex(qe)&&!ke.match(qe)&&(De[Ee]={type:INPUT_VALIDATION_RULES.pattern,message:Ue,ref:le,...je(INPUT_VALIDATION_RULES.pattern,Ue)},!ne))return Fe(Ue),De}if(be){if(isFunction(be)){const qe=await be(ke,ee),Ue=getValidateError(qe,Ne);if(Ue&&(De[Ee]={...Ue,...je(INPUT_VALIDATION_RULES.validate,Ue.message)},!ne))return Fe(Ue.message),De}else if(isObject(be)){let qe={};for(const Ue in be){if(!isEmptyObject(qe)&&!ne)break;const ze=getValidateError(await be[Ue](ke,ee),Ne,Ue);ze&&(qe={...ze,...je(Ue,ze.message)},Fe(ze.message),ne&&(De[Ee]=qe))}if(!isEmptyObject(qe)&&(De[Ee]={ref:Ne,...qe},!ne))return De}}return Fe(!0),De};function baseGet(re,ee){const ne=ee.slice(0,-1).length;let ae=0;for(;ae<ne;)re=isUndefined(re)?ae++:re[ee[ae++]];return re}function isEmptyArray(re){for(const ee in re)if(!isUndefined(re[ee]))return!1;return!0}function unset(re,ee){const ne=Array.isArray(ee)?ee:isKey(ee)?[ee]:stringToPath(ee),ae=ne.length===1?re:baseGet(re,ne),ce=ne.length-1,le=ne[ce];return ae&&delete ae[le],ce!==0&&(isObject(ae)&&isEmptyObject(ae)||Array.isArray(ae)&&isEmptyArray(ae))&&unset(re,ne.slice(0,-1)),re}function createSubject(){let re=[];return{get observers(){return re},next:ce=>{for(const le of re)le.next(ce)},subscribe:ce=>(re.push(ce),{unsubscribe:()=>{re=re.filter(le=>le!==ce)}}),unsubscribe:()=>{re=[]}}}var isPrimitive=re=>isNullOrUndefined(re)||!isObjectType(re);function deepEqual(re,ee){if(isPrimitive(re)||isPrimitive(ee))return re===ee;if(isDateObject(re)&&isDateObject(ee))return re.getTime()===ee.getTime();const ne=Object.keys(re),ae=Object.keys(ee);if(ne.length!==ae.length)return!1;for(const ce of ne){const le=re[ce];if(!ae.includes(ce))return!1;if(ce!=="ref"){const ue=ee[ce];if(isDateObject(le)&&isDateObject(ue)||isObject(le)&&isObject(ue)||Array.isArray(le)&&Array.isArray(ue)?!deepEqual(le,ue):le!==ue)return!1}}return!0}var isMultipleSelect=re=>re.type==="select-multiple",isRadioOrCheckbox=re=>isRadioInput(re)||isCheckBoxInput(re),live=re=>isHTMLElement(re)&&re.isConnected,objectHasFunction=re=>{for(const ee in re)if(isFunction(re[ee]))return!0;return!1};function markFieldsDirty(re,ee={}){const ne=Array.isArray(re);if(isObject(re)||ne)for(const ae in re)Array.isArray(re[ae])||isObject(re[ae])&&!objectHasFunction(re[ae])?(ee[ae]=Array.isArray(re[ae])?[]:{},markFieldsDirty(re[ae],ee[ae])):isNullOrUndefined(re[ae])||(ee[ae]=!0);return ee}function getDirtyFieldsFromDefaultValues(re,ee,ne){const ae=Array.isArray(re);if(isObject(re)||ae)for(const ce in re)Array.isArray(re[ce])||isObject(re[ce])&&!objectHasFunction(re[ce])?isUndefined(ee)||isPrimitive(ne[ce])?ne[ce]=Array.isArray(re[ce])?markFieldsDirty(re[ce],[]):{...markFieldsDirty(re[ce])}:getDirtyFieldsFromDefaultValues(re[ce],isNullOrUndefined(ee)?{}:ee[ce],ne[ce]):deepEqual(re[ce],ee[ce])?delete ne[ce]:ne[ce]=!0;return ne}var getDirtyFields=(re,ee)=>getDirtyFieldsFromDefaultValues(re,ee,markFieldsDirty(ee)),getFieldValueAs=(re,{valueAsNumber:ee,valueAsDate:ne,setValueAs:ae})=>isUndefined(re)?re:ee?re===""?NaN:re&&+re:ne&&isString(re)?new Date(re):ae?ae(re):re;function getFieldValue(re){const ee=re.ref;if(!(re.refs?re.refs.every(ne=>ne.disabled):ee.disabled))return isFileInput(ee)?ee.files:isRadioInput(ee)?getRadioValue(re.refs).value:isMultipleSelect(ee)?[...ee.selectedOptions].map(({value:ne})=>ne):isCheckBoxInput(ee)?getCheckboxValue(re.refs).value:getFieldValueAs(isUndefined(ee.value)?re.ref.value:ee.value,re)}var getResolverOptions=(re,ee,ne,ae)=>{const ce={};for(const le of re){const ue=get(ee,le);ue&&set(ce,le,ue._f)}return{criteriaMode:ne,names:[...re],fields:ce,shouldUseNativeValidation:ae}},getRuleValue=re=>isUndefined(re)?re:isRegex(re)?re.source:isObject(re)?isRegex(re.value)?re.value.source:re.value:re,hasValidation=re=>re.mount&&(re.required||re.min||re.max||re.maxLength||re.minLength||re.pattern||re.validate);function schemaErrorLookup(re,ee,ne){const ae=get(re,ne);if(ae||isKey(ne))return{error:ae,name:ne};const ce=ne.split(".");for(;ce.length;){const le=ce.join("."),ue=get(ee,le),he=get(re,le);if(ue&&!Array.isArray(ue)&&ne!==le)return{name:ne};if(he&&he.type)return{name:le,error:he};ce.pop()}return{name:ne}}var skipValidation=(re,ee,ne,ae,ce)=>ce.isOnAll?!1:!ne&&ce.isOnTouch?!(ee||re):(ne?ae.isOnBlur:ce.isOnBlur)?!re:(ne?ae.isOnChange:ce.isOnChange)?re:!0,unsetEmptyArray=(re,ee)=>!compact(get(re,ee)).length&&unset(re,ee);const defaultOptions={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(re={},ee){let ne={...defaultOptions,...re};const ae=re.resetOptions&&re.resetOptions.keepDirtyValues;let ce={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},le={},ue=isObject(ne.defaultValues)||isObject(ne.values)?cloneObject(ne.defaultValues||ne.values)||{}:{},he=ne.shouldUnregister?{}:cloneObject(ue),fe={action:!1,mount:!1,watch:!1},me={mount:new Set,unMount:new Set,array:new Set,watch:new Set},ge,ve=0;const ye={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},be={watch:createSubject(),array:createSubject(),state:createSubject()},Ee=getValidationModes(ne.mode),Ce=getValidationModes(ne.reValidateMode),Se=ne.criteriaMode===VALIDATION_MODE.all,Te=Ut=>tn=>{clearTimeout(ve),ve=window.setTimeout(Ut,tn)},ke=async Ut=>{if(ye.isValid||Ut){const tn=ne.resolver?isEmptyObject((await Le()).errors):await Ge(le,!0);tn!==ce.isValid&&be.state.next({isValid:tn})}},Ne=Ut=>ye.isValidating&&be.state.next({isValidating:Ut}),Fe=(Ut,tn=[],dn,xn,An=!0,vn=!0)=>{if(xn&&dn){if(fe.action=!0,vn&&Array.isArray(get(le,Ut))){const Nn=dn(get(le,Ut),xn.argA,xn.argB);An&&set(le,Ut,Nn)}if(vn&&Array.isArray(get(ce.errors,Ut))){const Nn=dn(get(ce.errors,Ut),xn.argA,xn.argB);An&&set(ce.errors,Ut,Nn),unsetEmptyArray(ce.errors,Ut)}if(ye.touchedFields&&vn&&Array.isArray(get(ce.touchedFields,Ut))){const Nn=dn(get(ce.touchedFields,Ut),xn.argA,xn.argB);An&&set(ce.touchedFields,Ut,Nn)}ye.dirtyFields&&(ce.dirtyFields=getDirtyFields(ue,he)),be.state.next({name:Ut,isDirty:Ue(Ut,tn),dirtyFields:ce.dirtyFields,errors:ce.errors,isValid:ce.isValid})}else set(he,Ut,tn)},De=(Ut,tn)=>{set(ce.errors,Ut,tn),be.state.next({errors:ce.errors})},Oe=(Ut,tn,dn,xn)=>{const An=get(le,Ut);if(An){const vn=get(he,Ut,isUndefined(dn)?get(ue,Ut):dn);isUndefined(vn)||xn&&xn.defaultChecked||tn?set(he,Ut,tn?vn:getFieldValue(An._f)):Ye(Ut,vn),fe.mount&&ke()}},Re=(Ut,tn,dn,xn,An)=>{let vn=!1,Nn=!1;const Gn={name:Ut};if(!dn||xn){ye.isDirty&&(Nn=ce.isDirty,ce.isDirty=Gn.isDirty=Ue(),vn=Nn!==Gn.isDirty);const Wn=deepEqual(get(ue,Ut),tn);Nn=get(ce.dirtyFields,Ut),Wn?unset(ce.dirtyFields,Ut):set(ce.dirtyFields,Ut,!0),Gn.dirtyFields=ce.dirtyFields,vn=vn||ye.dirtyFields&&Nn!==!Wn}if(dn){const Wn=get(ce.touchedFields,Ut);Wn||(set(ce.touchedFields,Ut,dn),Gn.touchedFields=ce.touchedFields,vn=vn||ye.touchedFields&&Wn!==dn)}return vn&&An&&be.state.next(Gn),vn?Gn:{}},Be=(Ut,tn,dn,xn)=>{const An=get(ce.errors,Ut),vn=ye.isValid&&isBoolean(tn)&&ce.isValid!==tn;if(re.delayError&&dn?(ge=Te(()=>De(Ut,dn)),ge(re.delayError)):(clearTimeout(ve),ge=null,dn?set(ce.errors,Ut,dn):unset(ce.errors,Ut)),(dn?!deepEqual(An,dn):An)||!isEmptyObject(xn)||vn){const Nn={...xn,...vn&&isBoolean(tn)?{isValid:tn}:{},errors:ce.errors,name:Ut};ce={...ce,...Nn},be.state.next(Nn)}Ne(!1)},Le=async Ut=>await ne.resolver(he,ne.context,getResolverOptions(Ut||me.mount,le,ne.criteriaMode,ne.shouldUseNativeValidation)),je=async Ut=>{const{errors:tn}=await Le();if(Ut)for(const dn of Ut){const xn=get(tn,dn);xn?set(ce.errors,dn,xn):unset(ce.errors,dn)}else ce.errors=tn;return tn},Ge=async(Ut,tn,dn={valid:!0})=>{for(const xn in Ut){const An=Ut[xn];if(An){const{_f:vn,...Nn}=An;if(vn){const Gn=me.array.has(vn.name),Wn=await validateField(An,he,Se,ne.shouldUseNativeValidation,Gn);if(Wn[vn.name]&&(dn.valid=!1,tn))break;!tn&&(get(Wn,vn.name)?Gn?updateFieldArrayRootError(ce.errors,Wn,vn.name):set(ce.errors,vn.name,Wn[vn.name]):unset(ce.errors,vn.name))}Nn&&await Ge(Nn,tn,dn)}}return dn.valid},qe=()=>{for(const Ut of me.unMount){const tn=get(le,Ut);tn&&(tn._f.refs?tn._f.refs.every(dn=>!live(dn)):!live(tn._f.ref))&&fn(Ut)}me.unMount=new Set},Ue=(Ut,tn)=>(Ut&&tn&&set(he,Ut,tn),!deepEqual(Qt(),ue)),ze=(Ut,tn,dn)=>generateWatchOutput(Ut,me,{...fe.mount?he:isUndefined(tn)?ue:isString(Ut)?{[Ut]:tn}:tn},dn,tn),He=Ut=>compact(get(fe.mount?he:ue,Ut,re.shouldUnregister?get(ue,Ut,[]):[])),Ye=(Ut,tn,dn={})=>{const xn=get(le,Ut);let An=tn;if(xn){const vn=xn._f;vn&&(!vn.disabled&&set(he,Ut,getFieldValueAs(tn,vn)),An=isHTMLElement(vn.ref)&&isNullOrUndefined(tn)?"":tn,isMultipleSelect(vn.ref)?[...vn.ref.options].forEach(Nn=>Nn.selected=An.includes(Nn.value)):vn.refs?isCheckBoxInput(vn.ref)?vn.refs.length>1?vn.refs.forEach(Nn=>(!Nn.defaultChecked||!Nn.disabled)&&(Nn.checked=Array.isArray(An)?!!An.find(Gn=>Gn===Nn.value):An===Nn.value)):vn.refs[0]&&(vn.refs[0].checked=!!An):vn.refs.forEach(Nn=>Nn.checked=Nn.value===An):isFileInput(vn.ref)?vn.ref.value="":(vn.ref.value=An,vn.ref.type||be.watch.next({name:Ut})))}(dn.shouldDirty||dn.shouldTouch)&&Re(Ut,An,dn.shouldTouch,dn.shouldDirty,!0),dn.shouldValidate&&Vt(Ut)},Xe=(Ut,tn,dn)=>{for(const xn in tn){const An=tn[xn],vn=`${Ut}.${xn}`,Nn=get(le,vn);(me.array.has(Ut)||!isPrimitive(An)||Nn&&!Nn._f)&&!isDateObject(An)?Xe(vn,An,dn):Ye(vn,An,dn)}},We=(Ut,tn,dn={})=>{const xn=get(le,Ut),An=me.array.has(Ut),vn=cloneObject(tn);set(he,Ut,vn),An?(be.array.next({name:Ut,values:he}),(ye.isDirty||ye.dirtyFields)&&dn.shouldDirty&&be.state.next({name:Ut,dirtyFields:getDirtyFields(ue,he),isDirty:Ue(Ut,vn)})):xn&&!xn._f&&!isNullOrUndefined(vn)?Xe(Ut,vn,dn):Ye(Ut,vn,dn),isWatched(Ut,me)&&be.state.next({}),be.watch.next({name:Ut}),!fe.mount&&ee()},Ze=async Ut=>{const tn=Ut.target;let dn=tn.name;const xn=get(le,dn),An=()=>tn.type?getFieldValue(xn._f):getEventValue(Ut);if(xn){let vn,Nn;const Gn=An(),Wn=Ut.type===EVENTS.BLUR||Ut.type===EVENTS.FOCUS_OUT,Vn=!hasValidation(xn._f)&&!ne.resolver&&!get(ce.errors,dn)&&!xn._f.deps||skipValidation(Wn,get(ce.touchedFields,dn),ce.isSubmitted,Ce,Ee),Hn=isWatched(dn,me,Wn);set(he,dn,Gn),Wn?(xn._f.onBlur&&xn._f.onBlur(Ut),ge&&ge(0)):xn._f.onChange&&xn._f.onChange(Ut);const hs=Re(dn,Gn,Wn,!1),Pn=!isEmptyObject(hs)||Hn;if(!Wn&&be.watch.next({name:dn,type:Ut.type}),Vn)return ye.isValid&&ke(),Pn&&be.state.next({name:dn,...Hn?{}:hs});if(!Wn&&Hn&&be.state.next({}),Ne(!0),ne.resolver){const{errors:Jn}=await Le([dn]),gn=schemaErrorLookup(ce.errors,le,dn),cn=schemaErrorLookup(Jn,le,gn.name||dn);vn=cn.error,dn=cn.name,Nn=isEmptyObject(Jn)}else vn=(await validateField(xn,he,Se,ne.shouldUseNativeValidation))[dn],vn?Nn=!1:ye.isValid&&(Nn=await Ge(le,!0));xn._f.deps&&Vt(xn._f.deps),Be(dn,Nn,vn,hs)}},Vt=async(Ut,tn={})=>{let dn,xn;const An=convertToArrayPayload(Ut);if(Ne(!0),ne.resolver){const vn=await je(isUndefined(Ut)?Ut:An);dn=isEmptyObject(vn),xn=Ut?!An.some(Nn=>get(vn,Nn)):dn}else Ut?(xn=(await Promise.all(An.map(async vn=>{const Nn=get(le,vn);return await Ge(Nn&&Nn._f?{[vn]:Nn}:Nn)}))).every(Boolean),!(!xn&&!ce.isValid)&&ke()):xn=dn=await Ge(le);return be.state.next({...!isString(Ut)||ye.isValid&&dn!==ce.isValid?{}:{name:Ut},...ne.resolver||!Ut?{isValid:dn}:{},errors:ce.errors,isValidating:!1}),tn.shouldFocus&&!xn&&focusFieldBy(le,vn=>vn&&get(ce.errors,vn),Ut?An:me.mount),xn},Qt=Ut=>{const tn={...ue,...fe.mount?he:{}};return isUndefined(Ut)?tn:isString(Ut)?get(tn,Ut):Ut.map(dn=>get(tn,dn))},Yt=(Ut,tn)=>({invalid:!!get((tn||ce).errors,Ut),isDirty:!!get((tn||ce).dirtyFields,Ut),isTouched:!!get((tn||ce).touchedFields,Ut),error:get((tn||ce).errors,Ut)}),Jt=Ut=>{Ut&&convertToArrayPayload(Ut).forEach(tn=>unset(ce.errors,tn)),be.state.next({errors:Ut?ce.errors:{}})},rn=(Ut,tn,dn)=>{const xn=(get(le,Ut,{_f:{}})._f||{}).ref;set(ce.errors,Ut,{...tn,ref:xn}),be.state.next({name:Ut,errors:ce.errors,isValid:!1}),dn&&dn.shouldFocus&&xn&&xn.focus&&xn.focus()},nn=(Ut,tn)=>isFunction(Ut)?be.watch.subscribe({next:dn=>Ut(ze(void 0,tn),dn)}):ze(Ut,tn,!0),fn=(Ut,tn={})=>{for(const dn of Ut?convertToArrayPayload(Ut):me.mount)me.mount.delete(dn),me.array.delete(dn),get(le,dn)&&(tn.keepValue||(unset(le,dn),unset(he,dn)),!tn.keepError&&unset(ce.errors,dn),!tn.keepDirty&&unset(ce.dirtyFields,dn),!tn.keepTouched&&unset(ce.touchedFields,dn),!ne.shouldUnregister&&!tn.keepDefaultValue&&unset(ue,dn));be.watch.next({}),be.state.next({...ce,...tn.keepDirty?{isDirty:Ue()}:{}}),!tn.keepIsValid&&ke()},an=(Ut,tn={})=>{let dn=get(le,Ut);const xn=isBoolean(tn.disabled);return set(le,Ut,{...dn||{},_f:{...dn&&dn._f?dn._f:{ref:{name:Ut}},name:Ut,mount:!0,...tn}}),me.mount.add(Ut),dn?xn&&set(he,Ut,tn.disabled?void 0:get(he,Ut,getFieldValue(dn._f))):Oe(Ut,!0,tn.value),{...xn?{disabled:tn.disabled}:{},...ne.shouldUseNativeValidation?{required:!!tn.required,min:getRuleValue(tn.min),max:getRuleValue(tn.max),minLength:getRuleValue(tn.minLength),maxLength:getRuleValue(tn.maxLength),pattern:getRuleValue(tn.pattern)}:{},name:Ut,onChange:Ze,onBlur:Ze,ref:An=>{if(An){an(Ut,tn),dn=get(le,Ut);const vn=isUndefined(An.value)&&An.querySelectorAll&&An.querySelectorAll("input,select,textarea")[0]||An,Nn=isRadioOrCheckbox(vn),Gn=dn._f.refs||[];if(Nn?Gn.find(Wn=>Wn===vn):vn===dn._f.ref)return;set(le,Ut,{_f:{...dn._f,...Nn?{refs:[...Gn.filter(live),vn,...Array.isArray(get(ue,Ut))?[{}]:[]],ref:{type:vn.type,name:Ut}}:{ref:vn}}}),Oe(Ut,!1,void 0,vn)}else dn=get(le,Ut,{}),dn._f&&(dn._f.mount=!1),(ne.shouldUnregister||tn.shouldUnregister)&&!(isNameInFieldArray(me.array,Ut)&&fe.action)&&me.unMount.add(Ut)}}},un=()=>ne.shouldFocusError&&focusFieldBy(le,Ut=>Ut&&get(ce.errors,Ut),me.mount),bn=(Ut,tn)=>async dn=>{dn&&(dn.preventDefault&&dn.preventDefault(),dn.persist&&dn.persist());let xn=cloneObject(he);if(be.state.next({isSubmitting:!0}),ne.resolver){const{errors:An,values:vn}=await Le();ce.errors=An,xn=vn}else await Ge(le);unset(ce.errors,"root"),isEmptyObject(ce.errors)?(be.state.next({errors:{}}),await Ut(xn,dn)):(tn&&await tn({...ce.errors},dn),un()),be.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(ce.errors),submitCount:ce.submitCount+1,errors:ce.errors})},En=(Ut,tn={})=>{get(le,Ut)&&(isUndefined(tn.defaultValue)?We(Ut,get(ue,Ut)):(We(Ut,tn.defaultValue),set(ue,Ut,tn.defaultValue)),tn.keepTouched||unset(ce.touchedFields,Ut),tn.keepDirty||(unset(ce.dirtyFields,Ut),ce.isDirty=tn.defaultValue?Ue(Ut,get(ue,Ut)):Ue()),tn.keepError||(unset(ce.errors,Ut),ye.isValid&&ke()),be.state.next({...ce}))},$n=(Ut,tn={})=>{const dn=Ut||ue,xn=cloneObject(dn),An=Ut&&!isEmptyObject(Ut)?xn:ue;if(tn.keepDefaultValues||(ue=dn),!tn.keepValues){if(tn.keepDirtyValues||ae)for(const vn of me.mount)get(ce.dirtyFields,vn)?set(An,vn,get(he,vn)):We(vn,get(An,vn));else{if(isWeb&&isUndefined(Ut))for(const vn of me.mount){const Nn=get(le,vn);if(Nn&&Nn._f){const Gn=Array.isArray(Nn._f.refs)?Nn._f.refs[0]:Nn._f.ref;if(isHTMLElement(Gn)){const Wn=Gn.closest("form");if(Wn){Wn.reset();break}}}}le={}}he=re.shouldUnregister?tn.keepDefaultValues?cloneObject(ue):{}:xn,be.array.next({values:An}),be.watch.next({values:An})}me={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!fe.mount&&ee(),fe.mount=!ye.isValid||!!tn.keepIsValid,fe.watch=!!re.shouldUnregister,be.state.next({submitCount:tn.keepSubmitCount?ce.submitCount:0,isDirty:tn.keepDirty||tn.keepDirtyValues?ce.isDirty:!!(tn.keepDefaultValues&&!deepEqual(Ut,ue)),isSubmitted:tn.keepIsSubmitted?ce.isSubmitted:!1,dirtyFields:tn.keepDirty||tn.keepDirtyValues?ce.dirtyFields:tn.keepDefaultValues&&Ut?getDirtyFields(ue,Ut):{},touchedFields:tn.keepTouched?ce.touchedFields:{},errors:tn.keepErrors?ce.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},On=(Ut,tn)=>$n(isFunction(Ut)?Ut(he):Ut,tn),zn=(Ut,tn={})=>{const dn=get(le,Ut),xn=dn&&dn._f;if(xn){const An=xn.refs?xn.refs[0]:xn.ref;An.focus&&(An.focus(),tn.shouldSelect&&An.select())}},Rn=Ut=>{ce={...ce,...Ut}};return isFunction(ne.defaultValues)&&ne.defaultValues().then(Ut=>{On(Ut,ne.resetOptions),be.state.next({isLoading:!1})}),{control:{register:an,unregister:fn,getFieldState:Yt,_executeSchema:Le,_focusError:un,_getWatch:ze,_getDirty:Ue,_updateValid:ke,_removeUnmounted:qe,_updateFieldArray:Fe,_getFieldArray:He,_reset:$n,_updateFormState:Rn,_subjects:be,_proxyFormState:ye,get _fields(){return le},get _formValues(){return he},get _stateFlags(){return fe},set _stateFlags(Ut){fe=Ut},get _defaultValues(){return ue},get _names(){return me},set _names(Ut){me=Ut},get _formState(){return ce},set _formState(Ut){ce=Ut},get _options(){return ne},set _options(Ut){ne={...ne,...Ut}}},trigger:Vt,register:an,handleSubmit:bn,watch:nn,setValue:We,getValues:Qt,reset:On,resetField:En,clearErrors:Jt,unregister:fn,setError:rn,setFocus:zn,getFieldState:Yt}}function useForm(re={}){const ee=React.useRef(),[ne,ae]=React.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:isFunction(re.defaultValues)?void 0:re.defaultValues});ee.current||(ee.current={...createFormControl(re,()=>ae(le=>({...le}))),formState:ne});const ce=ee.current.control;return ce._options=re,useSubscribe({subject:ce._subjects.state,next:le=>{shouldRenderFormState(le,ce._proxyFormState,ce._updateFormState,!0)&&ae({...ce._formState})}}),React.useEffect(()=>{ce._stateFlags.mount||(ce._updateValid(),ce._stateFlags.mount=!0),ce._stateFlags.watch&&(ce._stateFlags.watch=!1,ce._subjects.state.next({})),ce._removeUnmounted()}),React.useEffect(()=>{re.values&&!deepEqual(re.values,ce._defaultValues)&&ce._reset(re.values,ce._options.resetOptions)},[re.values,ce]),React.useEffect(()=>{ne.submitCount&&ce._focusError()},[ce,ne.submitCount]),ee.current.formState=getProxyFormState(ne,ce),ee.current}const TABS$1=[{title:"Edit",to:""},{title:"Preview",to:"preview",disabled:!0},{title:"Mint",disabled:!0}];function Mint(){const re=useForm({defaultValues:useMintStore.getState(),mode:"onChange",reValidateMode:"onChange"}),ee=useUserStore(ye=>ye.address),ne=useUserStore(ye=>ye.userInfo),ae=useUserStore(ye=>ye.proxyAddress),ce=useUserStore(ye=>ye.proxyName),[le,ue]=reactExports.useState(),{isValid:he,errors:fe,isDirty:me}=useFormState({control:re.control}),ge=reactExports.useMemo(()=>(TABS$1[1].disabled=me||!he||Object.keys(fe).length>0,TABS$1),[he,fe,me]),ve=reactExports.useMemo(()=>ce||ae||(ne==null?void 0:ne.name)||ee,[ee,ae,ce,ne==null?void 0:ne.name]);return reactExports.useEffect(()=>{async function ye(){if(ee){const be=await useUserStore.getState().getBalance(ee);ue(be)}}ye()},[ee]),jsxs(Page,{title:"Mint",children:[jsx$1("h1",{children:"MINT"}),jsx$1(Tabs,{tabs:ge}),jsx$1(FormProvider,{...re,children:jsx$1(AnimatePresence,{mode:"sync",children:jsx$1(Outlet,{context:{balance:le,minterName:ve,address:ee,artifact:re.watch("artifact"),isTyped:re.watch("isTyped"),isMonoType:re.watch("isMonoType"),typedinput:re.watch("typedinput"),license:re.watch("license")}})})})]})}const objktview$1="_objktview_mfw1p_216",profile_page="_profile_page_mfw1p_231",info_ipfs$1="_info_ipfs_mfw1p_235",info_attributes$1="_info_attributes_mfw1p_245",infos_attributes_container$1="_infos_attributes_container_mfw1p_267",infos_container="_infos_container_mfw1p_268",profile_tabs="_profile_tabs_mfw1p_273",infos_attributes_flex$1="_infos_attributes_flex_mfw1p_278",container$6="_container_mfw1p_284",history$1="_history_mfw1p_289",history__mint__op$1="_history__mint__op_mfw1p_301",history__labels$1="_history__labels_mfw1p_337",history__event__container$1="_history__event__container_mfw1p_351",history__event$1="_history__event_mfw1p_351",history__from$1="_history__from_mfw1p_365",history__to$1="_history__to_mfw1p_366",history__ed$1="_history__ed_mfw1p_367",history__price$1="_history__price_mfw1p_368",history__date$1="_history__date_mfw1p_369",history__royalties$1="_history__royalties_mfw1p_420",history__secondary$1="_history__secondary_mfw1p_433",history__mobile$1="_history__mobile_mfw1p_438",history__inner__mobile$1="_history__inner__mobile_mfw1p_465",history__desktop$1="_history__desktop_mfw1p_481",objkt__title="_objkt__title_mfw1p_490",restricted$1="_restricted_mfw1p_501",tab="_tab_mfw1p_519",tab_area="_tab_area_mfw1p_530",styles$g={objktview:objktview$1,profile_page,info_ipfs:info_ipfs$1,info_attributes:info_attributes$1,infos_attributes_container:infos_attributes_container$1,infos_container,profile_tabs,infos_attributes_flex:infos_attributes_flex$1,container:container$6,history:history$1,history__mint__op:history__mint__op$1,history__labels:history__labels$1,history__event__container:history__event__container$1,history__event:history__event$1,history__from:history__from$1,history__to:history__to$1,history__ed:history__ed$1,history__price:history__price$1,history__date:history__date$1,history__royalties:history__royalties$1,history__secondary:history__secondary$1,history__mobile:history__mobile$1,history__inner__mobile:history__inner__mobile$1,history__desktop:history__desktop$1,objkt__title,restricted:restricted$1,tab,tab_area},style="",useObjktDisplayContext=()=>useOutletContext(),TABS=[{title:"Info",to:""},{title:"Listings",to:"listings"},{title:"History",to:"history"},{title:"Swap",to:"swap",private:!0,restricted:!0},{title:"Burn",to:"burn",private:!0},{title:"Transfer",to:"transfer",private:!0},{title:"Copyright",to:"copyright"}],ObjktDisplay=()=>{const{id:re}=useParams(),ee=useUserStore(ge=>ge.address),ne=useUserStore(ge=>ge.proxyAddress),{walletBlockMap:ae,nsfwMap:ce,photosensitiveMap:le,underReviewMap:ue}=useSettings(),{data:he,error:fe}=useSWR(["/token",re],async()=>{var ge,ve,ye;if(re){const be=await fetchObjktDetails(re);if(!be)throw/^\d+$/.test(re)?new Error(`Cannot find an OBJKT with id: ${re}`,{cause:"Unknown OBJKT"}):new Error(`Received a non numeric token_id: ${re}.
          This can happen if the requested SUBJKT is conflicting with a protected route. 
          You can still access it by its address (tz/<tz-address>)`,{cause:"Conflicting route"});const Ee=ce.get(be.token_id)===1,Ce=le.get(be.token_id)===1;return(Ee||((ge=be.teia_meta)==null?void 0:ge.content_rating)===METADATA_CONTENT_RATING_MATURE)&&(be.isNSFW=!0),(Ce||(ye=(ve=be.teia_meta)==null?void 0:ve.accessibility)!=null&&ye.hazards.includes(METADATA_ACCESSIBILITY_HAZARDS_PHOTOSENS))&&(be.isPhotosensitive=!0),(Ee||Ce)&&(be.isModerated=!0),be.restricted=ae.get(be.artist_address)===1,be.underReview=ue.get(be.artist_address)===1,be}},{revalidateIfStale:!1,revalidateOnFocus:!1}),me=!he&&!fe;if(me)return jsx$1(Page,{title:"loading",children:me&&jsx$1(Loading,{message:"Loading OBJKT"})});if(fe)throw fe;if(he)return jsx$1(Page,{className:styles$g.profile_page,title:he==null?void 0:he.name,children:jsxs(Fragment,{children:[he.restricted?jsxs("div",{className:styles$g.restricted,children:["Restricted OBJKT. Contact the Teia moderators on"," ",jsx$1("a",{href:"https://discord.gg/TKeybhYhNe",target:"_blank",rel:"noreferrer",children:"Discord"})," ","to resolve the status. See the"," ",jsx$1("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#content-moderation",target:"_blank",rel:"noreferrer",children:"Teia Terms and Conditions"}),"."]}):null,he.underReview&&jsxs("div",{className:styles$g.restricted,children:["OBJKT under review. Contact the Teia moderators on"," ",jsx$1("a",{href:"https://discord.gg/TKeybhYhNe",target:"_blank",rel:"noreferrer",children:"Discord"})," ","to resolve the status."]}),jsxs("div",{style:{position:"relative",display:"block",width:"100%"},className:"objkt-display",children:[jsx$1("div",{children:jsx$1(RenderMediaType,{nft:he,displayView:!0})}),jsx$1(ItemInfo,{nft:he})]}),jsx$1(Tabs,{tabs:TABS,className:styles$g.profile_tabs,filter:ge=>he!=null&&he.restricted&&ge.restricted||he!=null&&he.holdings&&ge.private&&he.holdings.map(ye=>ye.holder_address).includes(ee||"UNSYNCED")===!1&&he.artist_address!==ee&&he.artist_address!==ne?null:ge}),jsx$1("div",{className:styles$g.tab_area,children:jsx$1(Outlet,{context:{nft:he,viewer_address:ee}})})]})})},objktview="_objktview_1vvtg_216",info_ipfs="_info_ipfs_1vvtg_231",info_attributes="_info_attributes_1vvtg_241",infos_attributes_container="_infos_attributes_container_1vvtg_270",infos_attributes_flex="_infos_attributes_flex_1vvtg_274",container$5="_container_1vvtg_280",history="_history_1vvtg_286",history__mint__op="_history__mint__op_1vvtg_298",history__labels="_history__labels_1vvtg_334",history__event__container="_history__event__container_1vvtg_348",history__event="_history__event_1vvtg_348",history__from="_history__from_1vvtg_362",history__to="_history__to_1vvtg_363",history__ed="_history__ed_1vvtg_364",history__price="_history__price_1vvtg_365",history__date="_history__date_1vvtg_366",history__royalties="_history__royalties_1vvtg_417",history__secondary="_history__secondary_1vvtg_430",history__mobile="_history__mobile_1vvtg_435",history__inner__mobile="_history__inner__mobile_1vvtg_462",history__desktop="_history__desktop_1vvtg_478",basic_infos="_basic_infos_1vvtg_487",restricted="_restricted_1vvtg_497",styles$f={objktview,info_ipfs,info_attributes,infos_attributes_container,infos_attributes_flex,container:container$5,history,history__mint__op,history__labels,history__event__container,history__event,history__from,history__to,history__ed,history__price,history__date,history__royalties,history__secondary,history__mobile,history__inner__mobile,history__desktop,basic_infos,restricted},Burn=()=>{var ye,be;const{nft:re}=useObjktDisplayContext(),[ee,ne,ae]=useUserStore(Ee=>[Ee.burn,Ee.address,Ee.proxyAddress]),[ce,le]=useModalStore(Ee=>[Ee.visible,Ee.message]),[ue,he]=reactExports.useState(""),fe=(be=(ye=re.artist_profile)==null?void 0:ye.split_contract)==null?void 0:be.administrator_address,me=reactExports.useMemo(()=>{var Ee;return(Ee=re.holdings)==null?void 0:Ee.find(Ce=>Ce.holder_address===ne||Ce.holder_address===ae&&ne===fe)},[re,ne,ae,fe]),ge=reactExports.useMemo(()=>(me==null?void 0:me.amount)||0,[me]),ve=()=>{if(ue===""||ue==="0"){alert("Error: No amount specified.");return}if(ue>ge){alert(`Error: You're trying to burn ${ue}, but you only own ${ge}.`);return}ee(re.token_id,ue)};return jsx$1(Fragment,{children:ce?jsxs("div",{children:[jsx$1("p",{style:{position:"absolute",left:"50%",top:"35%"},children:le}),jsx$1(Loading,{})]}):jsxs("div",{children:[jsx$1(Container$3,{children:jsx$1("div",{className:styles$f.container,children:jsxs("p",{children:["You own ",ge," editions of OBJKT#",re.id,". How many would you like to burn?"]})})}),jsx$1(Container$3,{children:jsx$1("div",{className:styles$f.container,children:jsx$1(Input$2,{type:"number",placeholder:"OBJKTs to burn",value:ue,onChange:he,onBlur:Ee=>{parseInt(Ee.target.value)>=ge&&he(ge)}})})}),jsx$1(Container$3,{children:jsxs("div",{className:styles$f.container,children:[jsx$1("p",{style:{fontSize:"14px"},children:"Burning will transfer the OBJKTs from your possession to a burn address. Once in the burn address, the OBJKT can't be recovered or sold. You can only burn tokens that you own. If you have them swapped, you first need to cancel that swap before you try to burn them."}),jsx$1("br",{}),jsx$1("p",{children:jsx$1("strong",{children:"NB: This action is not reversable."})})]})}),jsx$1(Container$3,{children:jsx$1("div",{className:styles$f.container,children:jsx$1(Button,{shadow_box:!0,onClick:ve,fit:!0,children:"Burn"})})})]})})},container$4="_container_15s4d_216",owner="_owner_15s4d_220",styles$e={container:container$4,owner},OwnerList=({owners:re})=>{const ee=re.filter(ne=>ne.holder_address!==BURN_ADDRESS);return jsx$1("div",{className:styles$e.container,children:ee.map(({amount:ne,holder_address:ae,holder_profile:ce})=>jsxs("div",{className:styles$e.owner,children:[ne," ed. ",get$5(ce,"name")?jsx$1(Button,{to:`/${encodeURIComponent(get$5(ce,"name"))}`,children:get$5(ce,"name")}):MARKETPLACE_CONTRACTS_TO_NAME[ae]?jsx$1(Button,{to:`/tz/${ae}`,children:MARKETPLACE_CONTRACTS_TO_NAME[ae]}):jsx$1(Button,{to:`/tz/${ae}`,children:walletPreview(ae)})]},ae))})},container$3="_container_1fuf2_216",swap="_swap_1fuf2_221",issuer="_issuer_1fuf2_232",buttons$4="_buttons_1fuf2_243",swapLabel="_swapLabel_1fuf2_257",border="_border_1fuf2_271",nomobile="_nomobile_1fuf2_282",styles$d={container:container$3,swap,issuer,buttons:buttons$4,swapLabel,border,nomobile};function ListingRow({nft:re,listing:ee,onCollectClick:ne,reswapPrices:ae,setReswapPrices:ce,proxyAdminAddress:le,rowId:ue}){const{walletBlockMap:he}=useSettings(),[fe,me]=useUserStore(Ee=>[Ee.address,Ee.proxyAddress]),ge=useUserStore(Ee=>Ee.reswap),ve=useUserStore(Ee=>Ee.cancel),ye=ee.seller_address===fe||le===fe&&ee.seller_address===me;console.debug("isOwnSwap",ye);const be=reactExports.useMemo(()=>re.restricted||he.get(ee.seller_address)===1,[re.restricted,he,ee.seller_address]);return jsxs("div",{className:styles$d.swap,children:[jsxs("div",{className:styles$d.issuer,children:[ee.amount_left," ed. ",jsx$1(Button,{alt:"seller",to:`/tz/${ee.seller_address}`,children:get$5(ee,"seller_profile.name")||walletPreview(ee.seller_address)})]}),jsxs("div",{className:styles$d.buttons,children:[be&&jsx$1(RestrictedLabel,{}),jsx$1(MarketplaceLabel$1,{listing:ee}),!be&&he.get(ee.seller_address)!==1&&!ye&&jsx$1(Button,{alt:"collect",shadow_box:!0,onClick:()=>ne(ee),children:`Collect for ${ee.price/1e6} tez`}),ye&&!be&&(ee.type.startsWith("TEIA")||ee.type.startsWith("HEN"))&&jsxs(Fragment,{children:[jsx$1("div",{className:styles$d.break}),jsx$1("input",{value:ae[ue]||ee.price/1e6,onChange:Ee=>{const{value:Ce}=Ee.target;ce(Se=>({...Se,[ue]:Ce}))},type:"number",placeholder:"New price",style:{width:"80px",marginRight:"5px"}}),jsx$1(Button,{alt:"Click to reswap",className:styles$d.smol,shadow_box:!0,onClick:async()=>{const Ee=ae[ue];!Ee||Ee<=0||await ge(re,Ee*1e6,ee)},children:"reswap"})]}),ye&&jsx$1(Button,{alt:"Click to cancel swap",shadow_box:!0,onClick:()=>ve(ee.contract_address,ee.swap_id),className:styles$d.smol,children:"cancel"})]})]})}const Listings=({proxyAdminAddress:re,nft:ee,handleCollect:ne})=>{var ue;const[ae,ce]=reactExports.useState({}),le=(ue=ee.listings)==null?void 0:ue.map(he=>({...he,key:he.swap_id||he.ask_id||he.offer_id}));return jsxs("div",{className:styles$d.container,children:[le.map(he=>jsx$1(ListingRow,{nft:ee,rowId:he.key,listing:he,proxyAdminAddress:re,reswapPrices:ae,setReswapPrices:ce,onCollectClick:()=>{console.debug("buy",he),ne(he)}},he.key)),jsx$1(Line,{})]})},Collectors=()=>{var ue,he;const{nft:re}=useObjktDisplayContext(),[ee,ne,ae]=useUserStore(fe=>[fe.address,fe.sync,fe.collect]),ce=fe=>{ee==null?ne():ae(fe)},le=(he=(ue=re.artist_profile)==null?void 0:ue.split_contract)==null?void 0:he.administrator_address;return jsxs(Fragment,{children:[re.listings.length>0&&jsx$1(Container$3,{children:jsx$1(Listings,{nft:re,handleCollect:ce,proxyAdminAddress:le})}),jsx$1(Container$3,{children:jsx$1(OwnerList,{owners:re.holdings})})]})};var baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,numberTag="[object Number]";function isNumber(re){return typeof re=="number"||isObjectLike(re)&&baseGetTag(re)==numberTag}var isNumber_1=isNumber;const isNumber$1=getDefaultExportFromCjs(isNumber_1);function UsernameAndLink({event:re,attr:ee}){return jsx$1(Fragment,{children:get$5(re,`${ee}_profile.name`)?jsx$1("span",{children:jsx$1(Button,{href:`/${encodeURIComponent(get$5(re,`${ee}_profile.name`))}`,children:get$5(re,`${ee}_profile.name`)})}):jsx$1("span",{children:jsx$1(Button,{href:`/tz/${get$5(re,`${ee}_address`)}`,children:walletPreview(get$5(re,`${ee}_address`))})})})}function HistoryRow({eventType:re,from:ee,to:ne,editions:ae,price:ce,timestamp:le}){return jsxs("div",{className:`${styles$f.history}`,children:[jsx$1("div",{className:styles$f.history__event__container,children:re}),jsx$1("div",{className:styles$f.history__from,children:ee?jsxs(Fragment,{children:[jsx$1("div",{className:`${styles$f.history__mobile} ${styles$f.history__secondary}`,children:"From"}),ee]}):null}),jsx$1("div",{className:styles$f.history__to,children:ne?jsxs(Fragment,{children:[jsx$1("div",{className:`${styles$f.history__mobile} ${styles$f.history__secondary}`,children:"To"}),ne]}):null}),jsx$1("div",{className:`${styles$f.history__ed} ${styles$f.history__desktop}`,children:ae}),jsx$1("div",{className:`${styles$f.history__price} ${styles$f.history__desktop}`,children:isNumber$1(ce)?`${parseFloat(ce/1e6)} tez`:null}),jsx$1("div",{className:`${styles$f.history__date} ${styles$f.history__desktop}`,title:le,children:getTimeAgo(le)}),jsxs("div",{className:styles$f.history__inner__mobile,children:[jsx$1("div",{className:styles$f.history__date,title:le,children:getTimeAgo(le)}),jsxs("div",{className:styles$f.history__ed,children:["ed. ",ae]}),jsx$1("div",{className:styles$f.history__price,children:isNumber$1(ce)?`${parseFloat(ce/1e6)} tez`:null})]})]})}const History=()=>{const{nft:re}=useObjktDisplayContext();return console.debug("nft.events",re==null?void 0:re.events),jsx$1(Container$3,{children:jsxs("div",{className:styles$f.history__container,children:[jsxs("div",{className:styles$f.history__labels,children:[jsx$1("div",{className:styles$f.history__event,style:{width:"calc(10% + 35px)"},children:"Event"}),jsx$1("div",{className:styles$f.history__from,children:"From"}),jsx$1("div",{className:styles$f.history__to,children:"To"}),jsx$1("div",{className:styles$f.history__ed,children:"Ed."}),jsx$1("div",{className:styles$f.history__price,children:"Price"}),jsx$1("div",{className:styles$f.history__date,children:"Time"})]}),re.events.map(ee=>ee.implements==="SALE"?jsx$1(HistoryRow,{eventType:jsxs(Fragment,{children:[jsx$1(TradeIcon,{size:14}),jsx$1("a",{href:`https://tzkt.io/${ee.ophash}`,target:"_blank",rel:"noreferrer",children:"Trade"})]}),from:jsx$1(UsernameAndLink,{event:ee,attr:"seller"}),to:jsx$1(UsernameAndLink,{event:ee,attr:"buyer"}),editions:1,timestamp:ee.timestamp,price:ee.price},`t-${ee.id}`):["OBJKT_ASK","OBJKT_ASK_V2","OBJKT_ASK_V3","OBJKT_ASK_V3_PRE","OBJKT_ASK_V3_2","TEIA_SWAP","HEN_SWAP","HEN_SWAP_V2","VERSUM_SWAP"].includes(ee.type)?jsx$1(HistoryRow,{eventType:jsxs(Fragment,{children:[jsx$1(SwapIcon,{size:14}),jsx$1("a",{href:`https://tzkt.io/${ee.ophash}`,target:"_blank",rel:"noreferrer",children:"Swap"})]}),from:jsx$1(UsernameAndLink,{event:ee,attr:"seller"}),editions:ee.amount,timestamp:ee.timestamp,price:ee.price},`t-${ee.id}`):ee.type==="FA2_TRANSFER"&&ee.to_address!==BURN_ADDRESS&&!ee.from_address.startsWith("KT1")&&!ee.to_address.startsWith("KT1")?jsx$1(HistoryRow,{eventType:jsxs(Fragment,{children:[jsx$1(TradeIcon,{size:14}),jsx$1("a",{href:`https://tzkt.io/${ee.ophash}`,target:"_blank",rel:"noreferrer",children:"Transfer"})]}),from:jsx$1(UsernameAndLink,{event:ee,attr:"from"}),to:jsx$1(UsernameAndLink,{event:ee,attr:"to"}),editions:ee.amount,timestamp:ee.timestamp},`t-${ee.id}`):ee.type==="FA2_TRANSFER"&&ee.to_address===BURN_ADDRESS?jsx$1(HistoryRow,{eventType:jsxs(Fragment,{children:[jsx$1(BurnIcon,{size:14}),jsx$1("a",{href:`https://tzkt.io/${ee.ophash}`,target:"_blank",rel:"noreferrer",children:"Burn"})]}),from:jsx$1(UsernameAndLink,{event:ee,attr:"from"}),to:jsx$1("span",{children:jsx$1(Button,{href:`/tz/${encodeURIComponent(BURN_ADDRESS)}`,children:"Burn Address"})}),editions:ee.amount,timestamp:ee.timestamp},`t-${ee.id}`):ee.type==="HEN_MINT"?jsx$1(HistoryRow,{eventType:jsxs(Fragment,{children:[jsx$1(MintedIcon,{size:14}),jsx$1("div",{className:styles$f.history__mint__op,children:"Minted"})]}),editions:ee.editions,timestamp:ee.timestamp},`t-${ee.id}`):null),jsxs("div",{className:styles$f.history__royalties,children:[formatRoyalties(re)," Royalties"]})]})})},container$2="_container_gerq9_216",tag="_tag_gerq9_232",styles$c={container:container$2,tag},Tags=({tags:re})=>jsx$1("div",{className:styles$c.container,children:re.filter(ee=>ee!=="").map((ee,ne)=>jsx$1(Button,{to:`${PATH.TAGS}/${encodeURI(ee)}`,children:jsx$1("div",{className:styles$c.tag,children:ee})},`tag${ee}${ne}`))}),Attribute$1=({label:re,value:ee})=>jsxs("div",{className:styles$f.info_attributes,children:[re,":",jsx$1("p",{children:ee})]}),Info=()=>{var ue;const{nft:re,viewer_address:ee}=useObjktDisplayContext(),ne=HashToURL(re.artifact_uri)+`/?creator=${re.artist_address}&viewer=${ee||""}&objkt=${re.token_id}`,ae=ee?`https://anaver.se/?gallery=1&loadsingle=1&singlecontract=${HEN_CONTRACT_FA2}&singletokenid=${re.token_id}&wallet=${ee}&partnerPlatform=teia.art`:`https://anaver.se/?gallery=1&loadsingle=1&singlecontract=${HEN_CONTRACT_FA2}&singletokenid=${re.token_id}&partnerPlatform=teia.art`,ce=HashToURL(re.metadata_uri),le=re.rights==="custom"&&re.right_uri&&re.right_uri.startsWith("ipfs://")?HashToURL(re.right_uri):re.right_uri;return jsxs(Fragment,{children:[jsx$1(Container$3,{children:jsxs("div",{className:styles$f.infos_container,children:[jsxs("div",{className:styles$f.basic_infos,children:[jsx$1("h1",{children:re.name}),jsx$1("p",{children:re.description})]}),(ue=re.tags)!=null&&ue.length?jsx$1(Tags,{tags:re.tags.map(({tag:he})=>he)}):null]})}),jsx$1(Line,{}),jsx$1(Container$3,{children:jsxs("div",{className:styles$f.infos_attributes_container,children:[jsxs("div",{className:styles$f.infos_attributes_flex,children:[jsx$1(Attribute$1,{label:"Mimetype",value:re.mime_type}),re.language&&jsx$1(Attribute$1,{label:"Language",value:LANGUAGES[re.language]}),re.isNSFW&&jsx$1(Attribute$1,{label:"Content Rating",value:"NSFW (Mature)"}),re.isPhotosensitive&&jsx$1(Attribute$1,{label:"Accessibility Hazards",value:"Photo Sensitive"}),re.isModerated&&re.artist_address===ee&&jsx$1(Attribute$1,{label:"Moderation",value:"The TEIA content moderation team has overridden the NSFW or Photosensitive attributes on this token"}),jsxs("div",{className:styles$f.info_attributes,children:["Rights:",jsx$1("p",{children:re.rights?re.rights==="custom"?jsx$1("a",{target:"_blank",href:le,rel:"noreferrer",children:"Custom"}):LICENSE_TYPES[re.rights]:LICENSE_TYPES.none})]}),jsxs("div",{className:styles$f.info_attributes,children:["Mint date:",jsx$1("p",{children:getWordDate(re.minted_at)})]})]}),jsxs("div",{className:styles$f.info_ipfs,children:[jsx$1("a",{target:"_blank",rel:"noreferrer",href:ce,children:"Metadata"})," // ",jsx$1("a",{target:"_blank",rel:"noreferrer",href:ne,children:"View on ipfs"})," // ",jsx$1("a",{target:"_blank",rel:"noreferrer",href:ae,children:"View on anaverse"})]})]})})]})},Swap=()=>{var De;const{nft:re}=useObjktDisplayContext(),{id:ee}=useParams(),[ne,ae,ce]=useUserStore(Oe=>[Oe.address,Oe.proxyAddress,Oe.swap]),[le,ue,he,fe]=useModalStore(Oe=>[Oe.visible,Oe.progress,Oe.message,Oe.show]),[me,ge]=reactExports.useState(""),[ve,ye]=reactExports.useState(""),[be,Ee]=reactExports.useState("tez"),Ce=Oe=>{console.debug(Oe),Oe<=.1&&fe(`Price is really low (${Oe}ꜩ), for giveaways checkout hicetdono (dono.xtz.tools)`)},Se=(De=re.artist_profile)!=null&&De.is_split?re.artist_profile.split_contract.administrator_address:null,Te=reactExports.useMemo(()=>{var Oe;return(Oe=re.holdings)==null?void 0:Oe.find(Re=>Re.holder_address===ne||Re.holder_address===ae&&ne===Se)},[re,ne,ae,Se]),ke=reactExports.useMemo(()=>(Te==null?void 0:Te.amount)||0,[Te]),Ne=async()=>{if(console.debug({amount:me,price:ve}),!me){fe(`Please enter an OBJKT quantity to swap (current value: ${me})`);return}if(ve==null||ve<0){fe(`Please enter a price for the swap (current value: ${ve})`);return}console.debug(ne,re.royalties_total,(ve*1e6).toFixed(0),ee,re.artist_address,parseFloat(me)),console.log([ne,re.royalties_total,(ve*1e6).toFixed(0),ee,re.artist_address,parseFloat(me)]),be==="tez"&&await ce(ne,re.royalties_total/1e3,(ve*1e6).toFixed(0),ee,re.artist_address,parseFloat(me))},Fe={width:"75% !important"};return jsx$1(Fragment,{children:le?jsx$1(Container$3,{children:jsxs("div",{children:[jsx$1("p",{children:he}),jsx$1(Loading,{})]})}):jsxs("div",{children:[jsx$1(Container$3,{children:jsx$1("div",{className:styles$f.container,children:jsxs("p",{children:["You own ",ke," editions of OBJKT#",ee,". How many would you like to swap?"]})})}),jsx$1(Container$3,{children:jsxs("div",{className:styles$f.container,children:[jsx$1("h4",{children:"Quantity"}),jsx$1(Input$2,{type:"number",placeholder:"OBJKT quantity",min:1,value:me,onChange:ge,onBlur:Oe=>{parseInt(Oe.target.value)>ke&&ge(ke)},disabled:ue}),jsx$1("div",{style:{width:"100%",display:"flex"},children:jsxs("div",{style:{width:"100%"},children:[jsx$1("h4",{children:"Price"}),jsx$1(Input$2,{style:Fe,type:"number",placeholder:"Price Per OBJKT (XTZ)",value:ve,initial:0,onChange:ye,onBlur:Oe=>{const Re=parseFloat(Oe.target.value);Re>1e6?ye(1e6):Re<0&&ye(0),Ce(Re)},disabled:ue})]})}),jsx$1(Button,{shadow_box:!0,onClick:Ne,fit:!0,disabled:ue,children:"Swap"})]})}),jsx$1(Container$3,{children:jsx$1("div",{className:styles$f.container,children:jsx$1("p",{children:"The Teia marketplace fee is set to 2.5%. Fees get directed to the Teia DAO treasury multisig (KT1J9FYz29RBQi1oGLw8uXyACrzXzV1dHuvb)"})})})]})})},TxRow=({tx:re,index:ee,onAdd:ne,onRemove:ae})=>{const[ce,le]=reactExports.useState(""),[ue,he]=reactExports.useState(""),fe=useModalStore(ve=>ve.show),me=()=>{validateAddress(ue)?ne({index:ee,to_:ue,amount:parseInt(ce),token_id:re.token_id}):fe("Transfer",`Invalid address ${ue}`)},ge=ve=>{ve.code==="Enter"&&me()};return re?jsxs("tr",{className:collabStyles.row,children:[jsx$1("td",{style:{width:"200px"},children:jsx$1(Input$2,{type:"number",name:"transfer-quantity",label:"Quantity",placeholder:"OBJKT quantity",min:1,value:ce,onChange:ve=>{typeof ve=="number"&&le(ve.toString())}})}),jsx$1("td",{children:jsx$1(Input$2,{type:"text",label:"Recipient",placeholder:"to address (tz...)",value:ue,onChange:ve=>{typeof ve=="string"&&he(ve)},onKeyDown:ge,onBlur:me})}),ae&&jsx$1("td",{className:collabStyles.actionCell,children:jsx$1(Button,{alt:"Click to delete this transfer",fit:!0,onClick:()=>ae(re),children:jsx$1(SvgClose,{width:16})})}),!ae&&ue&&ce&&jsx$1("td",{className:collabStyles.actionCell,align:"center",children:jsx$1(Button,{alt:"Add transfer to batch list",fit:!0,shadow_box:!0,onClick:me,children:"add"})})]}):null},Transfer=()=>{var Se,Te,ke;const{nft:re}=useObjktDisplayContext(),[ee,ne,ae]=useUserStore(Ne=>[Ne.address,Ne.proxyAddress,Ne.transfer]),ce=ne||ee,le=(Se=re.artist_profile)!=null&&Se.is_split?(ke=(Te=re.artist_profile)==null?void 0:Te.split_contract)==null?void 0:ke.administrator_address:null,ue=reactExports.useMemo(()=>{var Ne;return(Ne=re.holdings)==null?void 0:Ne.find(Fe=>Fe.holder_address===ce&&(ee===ce||ee===le))},[re,ee,le,ce]),he={index:0,to_:void 0,amount:void 0,token_id:re.token_id},[fe,me]=reactExports.useState([{...he}]),ge=classNames$1(collabStyles.table,collabStyles.mt3,collabStyles.mb3),ve=fe.filter(Ne=>(Ne==null?void 0:Ne.to_)&&(Ne==null?void 0:Ne.amount)),ye=Ne=>{const Fe=[...fe];Fe[Ne.index]=Ne,me([...Fe,{...he,index:Fe.length}])},be=Ne=>{const Fe=[...fe];delete Fe[Ne.index],me(Fe)},Ee=()=>{ae(ve)},Ce=ue?ue.amount:0;return jsx$1(Fragment,{children:Ce===0?jsx$1("div",{className:collabStyles.container,children:jsx$1("p",{children:"No editions found to transfer."})}):jsxs("div",{className:collabStyles.container,children:[jsxs("h2",{children:["Transfer (count: ",ve.length,"/",Ce,")"]}),jsx$1("p",{children:"Add addresses below along with how many tokens you wish to send to each."}),jsxs("p",{children:["You currently have ",Ce," editions available."]}),jsx$1("table",{className:ge,children:jsx$1("tbody",{children:fe.map((Ne,Fe)=>jsx$1(TxRow,{tx:Ne,index:Fe,onAdd:ye,onRemove:Fe<fe.length-1?be:void 0},`transfer-${Fe}`))})}),jsx$1(Button,{alt:"Click to transfer the token to the selected wallets",onClick:Ee,disabled:ve.length===0,shadow_box:!0,className:collabStyles.btnSecondary,children:"send"})]})})},Copyright=()=>{const{nft:re,viewer_address:ee}=useObjktDisplayContext(),[ne,ae]=reactExports.useState(null),[ce,le]=reactExports.useState(!0),[ue,he]=reactExports.useState(!1),fe={reproduce:"Right to Reproduce",broadcast:"Right to Broadcast",publicDisplay:"Right to Public Display",createDerivativeWorks:"Right to Create Derivative Works",exclusiveRights:"Exclusive Rights",retainCreatorRights:"Retain Creator Rights Even When Exclusive",requireAttribution:"Require Attribution on Use",rightsAreTransferable:"Rights are Transferable (Secondary Sales)",releasePublicDomain:"Release to Public Domain",customUriEnabled:"Custom URI Enabled",customUri:"Custom URI (External Terms & Works Connected To This Agreement)"},me={reproduce:{true:"✅ Yes",false:"🚫 No"},broadcast:{true:"✅ Yes",false:"🚫 No"},publicDisplay:{true:"✅ Yes",false:"🚫 No"},createDerivativeWorks:{true:"✅ Yes",false:"🚫 No"},releasePublicDomain:{true:"✅ Yes",false:"🚫 No"},customUriEnabled:{true:"📝 Yes",false:"🚫 No"},retainCreatorRights:{true:"✅ Yes",false:"🚫 No"},requireAttribution:{true:"✅ Yes",false:"🚫 No"},rightsAreTransferable:{true:"✅ Yes",false:"🚫 No"}},ge={none:"🚫 None (No Exclusive Rights To Any Party)",majority:"⚖️ Majority Share (50%+ Editions Owned = Exclusive Rights)",superMajority:"⚖️ Super-Majority Share (66.667%+ Editions Owned = Exclusive Rights)"},ve=HashToURL(re==null?void 0:re.right_uri,"CDN",{size:"raw"});function ye(be){try{return new URL(be),!0}catch{return!1}}return reactExports.useEffect(()=>{if(!ve){le(!1);return}axios.get(ve).then(be=>{ae(be.data),he(!1)}).catch(be=>{console.error("Failed to fetch data:",be),he(!0)}).finally(()=>{le(!1)})},[ve]),ce?jsx$1("div",{children:"Loading license information..."}):ue||!ne&&!(re!=null&&re.rights)?jsx$1("div",{children:"N/A or License Data Not Specified. 🚫"}):jsxs(Fragment,{children:[(re==null?void 0:re.rights)==="custom"&&jsxs(Fragment,{children:[jsx$1(Container$3,{children:jsxs("div",{children:[jsx$1("h3",{children:"Custom License Info"}),jsx$1("br",{}),jsx$1("h4",{children:"URI to Agreement (Permanent)"}),jsx$1("a",{href:ve,target:"_blank",rel:"noopener noreferrer",children:"Metadata"}),jsx$1("br",{}),jsx$1("br",{}),jsx$1("h4",{children:"License Details"}),jsx$1("ul",{children:(ne==null?void 0:ne.clauses)&&Object.entries(ne==null?void 0:ne.clauses).map(([be,Ee])=>{var Te,ke;const Ce=fe[be],Se=me[be]?me[be][Ee]:Ee;if(be==="exclusiveRights")return jsxs("li",{children:["Exclusive Rights: ",ge[Ee]]},be);if(be==="expirationDate")return jsxs("li",{children:["Expiration Date:"," ",Ee?new Date((Te=ne==null?void 0:ne.clauses)==null?void 0:Te.expirationDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"None"]},"expirationDate");if(be==="customUri"){const Ne=(ke=ne==null?void 0:ne.clauses)!=null&&ke.customUriEnabled&&Ee?jsx$1("a",{href:Ee,target:"_blank",rel:"noopener noreferrer",children:Ee}):"None";return jsxs("li",{children:[Ce,": ",Ne]},be)}return be==="addendum"||be==="expirationDateExists"?null:jsxs("li",{children:[Ce,": ",Se]},be)})})]})}),jsx$1(Line,{}),jsx$1("br",{}),jsxs(Container$3,{children:[jsx$1("h2",{children:"Custom License Agreement"}),jsx$1("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word"},children:(ne==null?void 0:ne.documentText)||"No license document available."})]})]}),(re==null?void 0:re.rights)&&jsxs(Container$3,{children:[jsx$1("h3",{children:"License Information"}),jsx$1("p",{children:re==null?void 0:re.rights}),(re==null?void 0:re.right_uri)&&jsxs(Fragment,{children:[jsx$1("h4",{children:"Link to Metadata"}),jsx$1("a",{href:ye(re==null?void 0:re.right_uri)?re==null?void 0:re.right_uri:HashToURL(re==null?void 0:re.right_uri,"CDN",{size:"raw"}),target:"_blank",rel:"noopener noreferrer",children:"Metadata Link"})]})]})]})};function FilterButton({type:re,children:ee,isActive:ne,onClick:ae}){return jsx$1(Button,{onClick:()=>{ae(re)},children:jsx$1("div",{className:styles$z.tag,style:{textDecoration:ne?"underline":"none"},children:ee})})}function Filters({onChange:re,filter:ee,items:ne=[]}){return jsx$1(Container$3,{children:jsx$1("div",{style:{display:"flex",justifyContent:"flex-end"},children:ne.map(({type:ae,label:ce})=>jsx$1(FilterButton,{type:ae,onClick:re,isActive:ee===ae,children:ce},ae))})})}const FILTER_ALL$1="ALL",FILTER_FOR_SALE="FOR_SALE",FILTER_NOT_FOR_SALE$1="NOT_FOR_SALE";function Collections(){const{showFilters:re,showRestricted:ee,overrideProtections:ne,address:ae}=useOutletContext(),[ce,le]=reactExports.useState(FILTER_ALL$1);return jsxs(Fragment,{children:[re&&jsx$1(Filters,{filter:ce,onChange:le,items:[{type:FILTER_ALL$1,label:"All"},{type:FILTER_FOR_SALE,label:"For sale"},{type:FILTER_NOT_FOR_SALE$1,label:"Not for sale"}]}),jsx$1(TokenCollection,{showRestricted:ee,overrideProtections:ne,label:"Artist's Collection",namespace:"collections",swrParams:[ae],variables:{address:ae},emptyMessage:"no collections",maxItems:null,postProcessTokens:ue=>ce===FILTER_FOR_SALE?ue.filter(({listing_seller_address:he})=>he===ae):ce===FILTER_NOT_FOR_SALE$1?ue.filter(({listing_seller_address:he,artist_address:fe})=>fe!==ae):ue,extractTokensFromResponse:(ue,{postProcessTokens:he})=>{const fe=ue.holdings.map(({token:ve})=>ve),me=ue.listings.map(({token:ve,seller_address:ye})=>({...ve,listing_seller_address:ye})),ge=uniqBy$1([...fe,...me],({token_id:ve})=>ve).map(ve=>({...ve,key:ve.token_id}));return he(ge)},query:distExports.gql`
          ${BaseTokenFieldsFragment}
          query collectorGallery($address: String!) {
            holdings(
              where: {
                holder_address: { _eq: $address }
                token: {
                  artist_address: { _neq: $address }
                  metadata_status: { _eq: "processed" }
                }
                amount: { _gt: "0" }
              }
              order_by: { last_received_at: desc }
            ) {
              token {
                ...baseTokenFields
              }
            }
            listings(
              where: {
                token: { artist_address: { _neq: $address } }
                seller_address: { _eq: $address }
                status: { _eq: "active" }
              }
              distinct_on: token_id
            ) {
              seller_address
              token {
                ...baseTokenFields
              }
              contract_address
              amount_left
              price
            }
          }
        `})]})}const FILTER_ALL="ALL",FILTER_PRIMARY="PRIMARY",FILTER_SECONDARY="SECONDARY",FILTER_NOT_FOR_SALE="NOT_FOR_SALE";function Creations(){const{showFilters:re,showRestricted:ee,overrideProtections:ne,address:ae}=useOutletContext(),[ce,le]=reactExports.useState(FILTER_ALL);return jsxs(Fragment,{children:[re&&jsx$1(Filters,{filter:ce,onChange:le,items:[{type:FILTER_ALL,label:"All"},{type:FILTER_PRIMARY,label:"Primary"},{type:FILTER_SECONDARY,label:"Secondary"},{type:FILTER_NOT_FOR_SALE,label:"Not for sale"}]}),jsx$1(TokenCollection,{showRestricted:ee,overrideProtections:ne,label:"Artist's Creations",namespace:"creations",swrParams:[ae],variables:{address:ae},emptyMessage:"no creations",maxItems:null,extractTokensFromResponse:ue=>{const he=ue.artist_tokens,fe=ue.artist_single_collabs.map(me=>{var ge,ve;return(ge=me==null?void 0:me.split_contract)!=null&&ge.created_tokens&&me.split_contract.shareholders.length===1?(ve=me==null?void 0:me.split_contract)==null?void 0:ve.created_tokens:[]}).flat();return lodashExports.orderBy([...he,...fe],["minted_at"]).reverse().map(me=>({...me,key:me.token_id}))},postProcessTokens:ue=>ce===FILTER_PRIMARY?ue.filter(he=>get$5(he,"lowest_price_listing.seller_address")===ae):ce===FILTER_SECONDARY?ue.filter(he=>get$5(he,"lowest_price_listing.seller_address")!==ae):ce===FILTER_NOT_FOR_SALE?ue.filter(he=>get$5(he,"lowest_price_listing")===null):ue,query:distExports.gql`
            ${BaseTokenFieldsFragment}
            query creatorGallery($address: String!) {
              artist_tokens: tokens(
                where: {
                  artist_address: { _eq: $address }
                  editions: { _gt: 0 }
                  fa2_address: { _eq: "${HEN_CONTRACT_FA2}" }
                  metadata_status: { _eq: "processed" }
                }
                order_by: { minted_at: desc }
              ) {
                ...baseTokenFields
                lowest_price_listing
              }
              artist_single_collabs: teia_shareholders(
                where: { 
                  shareholder_address: { _eq: $address}, 
                  holder_type: { _eq: "core_participant" } 
                }) {
                split_contract{
                  shareholders(where:{holder_type:{_eq:"core_participant"}}) {
                    shareholder_address
                  }
                  created_tokens(where:{editions:{_gt:"0"}, teia_meta:{is_signed:{_eq:true}}}){
                    ...baseTokenFields
                    lowest_price_listing
                  }
                }
              }
            }
          `})]})}function Collabs(){const{showRestricted:re,address:ee,overrideProtections:ne}=useOutletContext(),[ae,ce]=reactExports.useState(!1),[le,ue]=reactExports.useState(!1);return jsxs(Fragment,{children:[ae?jsx$1("div",{className:styles$z.tools,children:jsx$1(Checkbox$1,{small:!0,checked:le,onCheck:ue,label:"Include unverified OBJKTs"})}):null,jsx$1(TokenCollection,{showRestricted:re,overrideProtections:ne,label:"Artist's Collabs",namespace:"collabs",swrParams:[ee],variables:{address:ee},emptyMessage:"no collabs",maxItems:null,extractTokensFromResponse:he=>{const fe=he.teia_shareholders.map(me=>get$5(me,"split_contract.created_tokens",[])).flat();return ce(fe.some(me=>!get$5(me,"teia_meta.is_signed"))),orderBy$1(fe,["minted_at"]).reverse().filter(me=>le||get$5(me,"teia_meta.is_signed")).map(me=>({...me,key:me.token_id}))},query:distExports.gql`
          ${BaseTokenFieldsFragment}
          query GetCollabTokens($address: String!) {
            teia_shareholders(
              where: {
                shareholder_address: { _eq: $address }
                holder_type: { _eq: "core_participant" }
              }
            ) {
              split_contract {
                created_tokens(where: { editions: { _gt: "0" } }) {
                  ...baseTokenFields
                }
              }
            }
          }
        `})]})}function Curation(){const{showRestricted:re,overrideProtections:ee,address:ne}=useOutletContext();return jsx$1(TokenCollection,{showRestricted:re,overrideProtections:ee,label:"Artist's Curation",namespace:"curation",swrParams:[ne],variables:{address:ne},emptyMessage:"no curated tokens",maxItems:null,extractTokensFromResponse:ae=>ae.listings.map(({token:ce,seller_address:le})=>({...ce,listing_seller_address:le,key:ce.token_id})),query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query curatorGallery($address: String!) {
          listings(
            where: {
              token: { artist_address: { _neq: $address } }
              seller_address: { _eq: $address }
              status: { _eq: "active" }
            }
            distinct_on: token_id
          ) {
            seller_address
            token {
              ...baseTokenFields
            }
            contract_address
            amount_left
            price
          }
        }
      `})}function Sync(){const re=useLocation(),[ee,ne,ae,ce]=useUserStore(ue=>[ue.address,ue.setAccount,ue.proxyAddress,ue.sync],shallow);reactExports.useEffect(()=>{(async()=>{ee||await ce(),await ne()})().catch(console.error)},[ee]);const le=ue=>{const he=ae||ee;switch(ue){case"/tz":case"/feed/friends":return`${ue}/${he}`;case"/settings":case"/subjkt":case"/mint":case"/collaborate":return ue;default:return"/"}};return ee?jsx$1(Navigate,{to:le(re.state),replace:!0}):jsxs(Page,{title:"",children:[jsx$1(Loading,{message:"Requesting Permissions"}),jsx$1(Button,{to:"/sync",children:"try again?"})]})}const buttons$3="_buttons_647me_216",terms="_terms_647me_221",styles$b={buttons:buttons$3,terms},ReactComponent$3=function(re){return Object.keys(re).forEach(function(ne){re[ne]}),React.createElement("div",null,React.createElement("h3",null,"Terms of Service for TEIA Marketplace and TEIA DAO LLC"),React.createElement("p",null,"Welcome to Teia Marketplace!"),React.createElement("p",null,"These terms and conditions outline the rules and regulations for the use of Teia’s marketplace, hosted at ",React.createElement("a",{href:"https://teia.art"},"https://teia.art"),", and operated by the nonprofit Decentralized Autonomous Organization “Teia DAO LLC's”, under Non-Profit Entities Act 2020 (P.L. 2021-29) (18 MIRC, Ch. 2), located at PO Box 852, Long Island Rd Majuro in the Republic of the Marshall Islands."),React.createElement("p",null,"By accessing this website you accept these terms and conditions. Also, by using our platform, you accept to abide by our ",React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions"},"Code of Conduct"),". Do not continue to use the Teia marketplace if you do not agree to take all of the terms and conditions stated on this page."),React.createElement("p",null,"To use our Service, you must use a third-party wallet that allows you to engage in transactions on blockchains. When you use Teia Marketplace, you acknowledge that you are subject to the terms of service and privacy policy of these wallet extensions."),React.createElement("p",null,`The following terminology applies to these Terms and Conditions, Privacy Policy, and all Agreements: "User", "You" and "Your" refers to you, the person logs on this website and compliant with the Company's terms and conditions. "The DAO", "Ourselves", "We", "Our" and "Us", refers to our Company. "Party", "Parties", or "Us", refers to both the Client and ourselves. Any use of the above terminology or other words in the singular, plural, capitalization, and/or he/she or they, are taken as interchangeable and therefore as referring to the same.`),React.createElement("h2",null,React.createElement("strong",null,"1. TEIA Marketplace")),React.createElement("p",null,React.createElement("strong",null,"1.1")," Teia marketplace provides a peer-to-peer web3 platform where users can interact with each other by transacting, selling, purchasing, and showcasing blockchain assets. 01.2.-Teia is not a broker, financial institution, or creditor, and it strictly provides a platform for trading Crypto Assets. TEIA Marketplace's focus is solely on facilitating transactions between buyers and sellers of Crypto Assets. TEIA is not a party to any agreement between buyers and sellers of Crypto Assets on the TEIA Marketplace, and any such agreement is solely between the buyer and the seller."),React.createElement("p",null,React.createElement("strong",null,"1.2")," TEIA does not have ownership, custody, or control of digital crypto assets created by our users. Creators of these digital assets are solely responsible for their content or functionality. TEIA is not responsible for any issues that may arise from the use or ownership of digital crypto assets including but not limited to their authenticity, quality, or legality."),React.createElement("h2",null,"2. License"),React.createElement("p",null,React.createElement("strong",null,"2.1")," Teia’s name is part of the intellectual property of Teia Markeptlac and its owned by TEIA or its affiliates or licensors and are protected by intellectual property laws. You may not copy, imitate, or use any TEIA’s name without our prior written permission for each use."),React.createElement("p",null,React.createElement("strong",null,"2.2")," All rights to the user content made available through Teia marketplace are retained by the user, with the exception of those required to enable the operation of our marketplace. By making your content available on Teia, you grant us a license to access, use, host, cache, store, copy, transmit, display, publish, and distribute in any media or distribution method, but solely as necessary to operate and provide services on our platform."),React.createElement("p",null,"You acknowledge and agree that these license rights are royalty-free, transferable, sub-licensable, worldwide, and irrevocable for the entire duration of your User Content being offered on the Teia platform."),React.createElement("p",null,React.createElement("strong",null,"2.3")," The content linked to or associated with any digital crypto assets displayed on TEIA Marketplace, are the property of their respective owners and are protected by intellectual property laws. You may not copy, imitate, or use any third-party intellectual property without the permission of the applicable intellectual property rights holder. Any reference to any products, services, processes, or other information by name, trademark, manufacturer, supplier, or otherwise, does not constitute or imply endorsement, sponsorship, or recommendation by TEIA Marketplace."),React.createElement("p",null,React.createElement("strong",null,"2.4 Software License:")," Teia is developed under MIT/Open Source license: Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Sofware, and to permit persons to whom the Sofware is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software."),React.createElement("p",null,"THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES, OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT, OR OTHERWISE, ARISING FROM, OUT OF, OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE"),React.createElement("h2",null,"3. Assumption of Risks and Content Liability"),React.createElement("ul",null,React.createElement("li",null,React.createElement("p",null,"By using our marketplace you acknowledge and accept the volatility of blockchain assets price. TEIA does not guarantee that purchasers of Crypto Assets will not suffer losses.")),React.createElement("li",null,React.createElement("p",null,"You are solely responsible for determining any applicable taxes for your crypto assets transactions. Neither TEIA nor any other party associated with TEIA will be responsible for determining their applicable taxes.")),React.createElement("li",null,React.createElement("p",null,"Crypto Assets are not stored, sent, or received by the TEIA Marketplace. This is because Crypto Assets only exist based on ownership records maintained on the supporting blockchain, and any transfers of Crypto Assets occur solely on the blockchain and not on the TEIA Marketplace.")),React.createElement("li",null,React.createElement("p",null,"In order to access and use Teia Marketplace, you are responsible for providing all the necessary software and equipment required for connectivity and usage of the service.")),React.createElement("li",null,React.createElement("p",null,"There are various risks involved in using cryptocurrencies, including but not limited to risks of software, hardware, internet connectivity, or unauthorized access by third parties to assets stored on your wallet. You acknowledge that TEIA will not be responsible for any communication failures, errors, or delays experienced while using Crypto Assets, regardless of the cause.")),React.createElement("li",null,React.createElement("p",null,React.createElement("strong",null,"Purchasing user-generated content has risks, including but not limited to counterfeit assets, mislabeled assets, assets with metadata decay vulnerabilities, assets with bugs, and assets that may become non-transferable. TEIA reserves the right to hide assets affected by these or other issues. Inaccessibility of assets on TEIA is not grounds for a claim against TEIA."))),React.createElement("li",null,React.createElement("p",null,"By using our Marketplace, you acknowledge and agree that you assume all risk and responsibility for any breach of license terms by purchasers of content sold on the platform. You waive and release Teia Marketplace from any claims, damages, or liability arising from such breaches or misuse."))),React.createElement("h2",null,"4. User's Rights and Obligations"),React.createElement("ul",null,React.createElement("li",null,React.createElement("p",null,"You agree not to engage in any activities that violate any laws, contracts, intellectual property rights, or other third-party rights. You acknowledge that you are solely responsible for your actions and behavior while accessing or using the platform.")),React.createElement("li",null,React.createElement("p",null,"You guarantee to abide by our Code of Conduct (",React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions"},"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions"),").")),React.createElement("li",null,React.createElement("p",null,"By purchasing a Crypto Asset through Teia Marketplace, you agree that you have conducted sufficient research and have gathered all necessary information to make an informed decision about its purchase.")),React.createElement("li",null,React.createElement("p",null,"You acknowledge and agree that you are solely responsible for verifying the authenticity, legitimacy, and identity of any Crypto Asset you purchase on Teia Marketplace. Furthermore, you understand and accept that Teia Marketplace makes no guarantees or promises regarding the identity, legitimacy, or authenticity of any Crypto Asset available on the platform.")),React.createElement("li",null,React.createElement("p",null,"When creating content through Teia Marketplace, you warrant that you own all legal rights or enough title in the intellectual property rights or you are legally authorized by the intellectual property owner of such asset.")),React.createElement("li",null,React.createElement("p",null,"The creator of each crypto asset determines the license terms applied to it. It's the users’ sole responsibility to review and understand the relevant licensing terms before making a purchase."))),React.createElement("h2",null,"5. Removal of Content From TEIA"),React.createElement("p",null,"If you find any content on our platform that is offensive for any reason, you are free to contact and inform us at any moment. We will consider requests to hide content that doesn’t follow any of our Policies, but we are not obligated to respond to you directly."),React.createElement("h2",null,"Disclaimer"),React.createElement("ul",null,React.createElement("li",null,React.createElement("p",null,"We do not guarantee that the Teia marketplace will meet your requirements, be uninterrupted, timely, secure, or error-free, or that it will be accurate, reliable, complete, or safe. We take no responsibility for any losses, damages, or claims arising from any use of crypto assets, including user errors, server failure or data loss, corrupted wallet files, unauthorized access to applications, or any unauthorized third-party activities.")),React.createElement("li",null,React.createElement("p",null,"Teia DAO LLC is not responsible for damages sustained due to vulnerability or any kind of failure, abnormal behavior of software (e.g., wallet, smart contract), blockchains, or any other features of the platform or its content.")),React.createElement("li",null,React.createElement("p",null,"We may, at our sole discretion and without prior notice, terminate your access to the Teia Marketplace for any reason or no reason at all. You acknowledge and agree that we will not be liable or obligated to you in any way in the event of such termination, and you will not be entitled to a refund of any fees paid to us, to the fullest extent allowed by applicable law.")),React.createElement("li",null,React.createElement("p",null,"We may modify or update our Marketplace and these Terms of Service at our discretion and without prior notice to you. You agree that the platform may change, evolve or be updated over time and that we may add or remove features and make changes to any aspect of Teia’s Marketplace."))),React.createElement("h2",null,"Content Warning**"),React.createElement("p",null,"The art on the Teia.art marketplace is user-created and some of it might not be suitable for all ages. If you are underaged, don’t use the platform without your legal guardians."),React.createElement("h2",null,"Jurisdiction"),React.createElement("ul",null,React.createElement("li",null,React.createElement("p",null,"These Terms shall be interpreted in accordance with the laws of the Republic of The Marshall Islands.")),React.createElement("li",null,React.createElement("p",null,"Any legal disputes that arise from or are related to these terms, including disputes regarding its validity, enforcement, modification, or termination, will be exclusively resolved in the ordinary courts of the Republic of The Marshall Islands"))))};function Terms(){return jsx$1(Page,{title:"terms",children:jsx$1("div",{className:styles$b.terms,children:jsx$1(ReactComponent$3,{})})})}var client={},m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const debug="_debug_z2d7t_216",name="_name_z2d7t_231",storage="_storage_z2d7t_236",debug_center="_debug_center_z2d7t_243",cross="_cross_z2d7t_244",fill="_fill_z2d7t_256",styles$a={debug,name,storage,debug_center,cross,fill},container$1="_container_18hys_216",grid="_grid_18hys_223",fill_bg="_fill_bg_18hys_234",large="_large_18hys_237",left="_left_18hys_240",right="_right_18hys_247",separator="_separator_18hys_257",address="_address_18hys_261",logo="_logo_18hys_267",sync_label="_sync_label_18hys_271",styles$9={container:container$1,grid,fill_bg,large,left,right,separator,address,logo,sync_label},menu="_menu_6nzca_216",styles$8={menu},transition={duration:.5,ease:[.43,.13,.23,.96]},Menu=reactExports.memo(({isOpen:re=!1})=>{const ee=re?"opened":"closed",ne={closed:{rotate:0},opened:{rotate:45,translateY:3}},ae={closed:{opacity:1},opened:{opacity:0}},ce={closed:{rotate:0,translateY:0},opened:{rotate:-45,translateY:-3}},le={strokeWidth:2,vectorEffect:"non-scaling-stroke",initial:"closed",animate:ee,transition};return jsx$1("div",{className:styles$8.menu,children:jsxs(motion.svg,{viewBox:"0 0 14 14",overflow:"visible",preserveAspectRatio:"none",children:[jsx$1(motion.line,{x1:"2",x2:"12",y1:"4",y2:"4",variants:ne,...le}),jsx$1(motion.line,{x1:"2",x2:"12",y1:"7",y2:"7",variants:ae,...le}),jsx$1(motion.line,{x1:"2",x2:"12",y1:"10",y2:"10",variants:ce,...le})]})})}),MainMenu=()=>{const[re,ee,ne,ae]=useUserStore(fe=>[fe.address,fe.proxyName,fe.proxyAddress,fe.userInfo],shallow),[ce,le]=useLocalSettings(fe=>[fe.zen,fe.setZen]),ue=ee||(ae==null?void 0:ae.name),he=ne||re;return jsxs(motion.div,{className:`${styles$Y.menu}`,...fadeIn(),children:[jsxs("nav",{className:`${styles$Y.content}`,children:[jsxs("div",{className:`${styles$Y.menu_left}`,children:[jsx$1(MenuItem,{className:styles$Y.menu_label,route:"search"}),jsx$1(MenuItem,{className:styles$Y.menu_label,route:"about"}),jsx$1(MenuItem,{className:styles$Y.menu_label,label:"Getting Started",route:"faq"})]}),jsx$1(Line,{className:styles$Y.line,vertical:!0}),jsxs("div",{className:styles$Y.menu_right,children:[jsx$1("div",{className:styles$Y.address,children:walletPreview(re)}),jsx$1(MenuItem,{className:styles$Y.menu_label,label:"Mint",route:"mint",need_sync:!0}),jsx$1(MenuItem,{className:styles$Y.menu_label,label:"Assets",route:`${ue||he}`||"tz",need_sync:!ue||!he}),jsx$1(MenuItem,{className:styles$Y.menu_label,need_sync:!0,route:"collaborate"}),jsx$1(MenuItem,{className:styles$Y.menu_label,label:"Profile",route:"subjkt",need_sync:!0}),jsx$1(MenuItem,{className:styles$Y.menu_label,label:"DAO Governance",route:"dao"}),jsx$1(MenuItem,{className:styles$Y.menu_label,label:"Polls",route:"polls"}),jsxs("div",{className:styles$Y.state_buttons,children:[jsx$1(Toggle,{box:!0,label:"ZEN",onToggle:le,toggled:ce}),jsx$1(ThemeSelection,{className:styles$Y.theme_selection})]})]})]}),jsx$1(Footer,{pin:!0})]})},bottom_banner="_bottom_banner_1bq7w_216",banner="_banner_1bq7w_232",close="_close_1bq7w_256",content="_content_1bq7w_262",styles$7={bottom_banner,banner,close,content},TopBanner=({children:re,color:ee})=>{const[ne,ae]=reactExports.useState(!0),{y:ce}=useWindowScroll$1();return reactExports.useEffect(()=>{ae(ce<50)},[ce]),jsx$1(AnimatePresence,{children:ne&&jsx$1(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"40px",y:0},exit:{opacity:0,y:-100},className:styles$7.banner,children:re})})},EventBanner=()=>{const[re,ee]=reactExports.useState(),[ne,ae]=reactExports.useState(),[ce,le]=useLocalSettings(ue=>[ue.has_seen_banner,ue.setHasSeenBanner]);return reactExports.useEffect(()=>{async function ue(){const fe=await(await fetch(`${BANNER_URL}/banner_config.json`)).text(),me=lib.parse(fe);if(ae(me),me.enable<=0)return;const ve=await(await fetch(`${BANNER_URL}/banner.md`)).text();ee(ve)}try{ue()}catch(he){console.error(he)}},[]),jsx$1(Fragment,{children:re&&!ce&&jsxs(TopBanner,{color:ne==null?void 0:ne.color,children:[jsx$1(Markdown,{className:styles$7.content,children:re}),jsx$1(Button,{onClick:()=>{le(!0)},className:styles$7.close,children:jsx$1(SvgClose,{fill:"var(--background-color)",width:"16"})})]})})},BottomBanner=({children:re=null})=>jsx$1("div",{className:styles$7.bottom_banner,children:re});reactExports.memo(BottomBanner);const sample_events=[{title:"Art4Artists",icon:"🖼️ ",link:"https://x.com/EggsUnknow/status/1848805355620602309",subtitle:"Art4Artists",content:"Tezos Ecosystem #Art4Artists Breadfond"},{title:"Objkt4Objkt (4th edition)",icon:"🖼️ ",link:"https://twitter.com/kikanicolela/status/1778112619066413422",subtitle:"Objkt4Objkt",content:"Community art event to celebrate the creativity and talent in the space, in an inclusive way!"},{title:"Anaverse Integration",icon:"🖼️ ",link:"https://blog.teia.art/blog/anaverse-integration-announcement",subtitle:"new feature",content:"Teia just received a nice little new feature: 3D previews for your NFTs! This new addition allows you to experience your tokens in a immersive genertive 3D space."},{title:"Tez4Pal",icon:"🇵🇸",feed:"tez4pal",link:"https://twitter.com/LN0ir/status/1745946304742576400",subtitle:"January 20 to February 20 2024",content:"The Tezos Fundraiser  #Tez4Pal, supporting Gaza civilians, is scheduled from Jan 20 to Feb 20."},{title:"TezQuakeAid - Morocco",icon:"🇲🇦 ",feed:"morocco-quake-aid",link:"https://app.joyn.xyz/space/tezquakeaid-ec7f1f650671",subtitle:"9th September 2023 - ",content:"In September 2023, Morocco has been hit by a devastating earthquake. The TezQuateAid team launched a fundraising campaign dedicated to assisting those who have been impacted by this tragic catastrophe."},{title:"Tezos Pride",icon:"🏳️‍🌈",feed:"tezospride",link:"https://github.com/teia-community/teia-docs/wiki/Tezospride",subtitle:"throughout June and beyond every year",content:"TezosPride is a continuous event to celebrate and support the 2SLGBTQ+ community in the Tezos ecosystem. The main event spans Pride Month (June) annually."},{title:"TezQuakeAid - Turkey/Syria",icon:"🇹🇷🇸🇾 ",feed:"quake-aid",link:"https://app.joyn.xyz/space/tezquakeaid-ec7f1f650671",subtitle:"8st February 2023 - March 2023",content:"The earthquakes in Turkey and Syria in February 2023 have caused immense devastation. The Tezos community has set up donation opportunities to recognised, independent relief organisations. Donations after April 2023 will be directed towards the current flood relief event for Morocco"},{title:"Tezos for Iran",icon:"🇮🇷 ",feed:"iran",link:"https://github.com/teia-community/teia-docs/wiki/Tezos-for-Iran",subtitle:"25 October - 1st January 2022",content:"In the wake of the historic protests against the killing of young Iranian women, Teia has set up a charity fundraiser in solidarity with the protests and to raise awareness for womens rights in Iran."},{title:"Pakistan Fundraiser",icon:"🇵🇰 ",feed:"pakistan",link:"https://github.com/teia-community/teia-docs/wiki/Pakistan-Fundraiser",subtitle:"1st October - 2nd December 2022",content:"In late August, torrential monsoon triggered the biggest climate related disasters in history: a third of Pakistans landmass is submerged in water affecting tens of millions of people, washing away houses, destroying crops, hospitals, schools. To date, more than 1,500 people have lost their lives to the floods, including 552 children. Currently, 73% of the flood victims have inadequate access to necessities like food, water, medical aid, etc."},{title:"Ukraine",feed:"ukraine",icon:"🇺🇦 ",link:"https://github.com/teia-community/teia-docs/wiki/Ukranian-Fundraising",subtitle:"Mid November - Late December 2022",content:`In support for our Ukrainian friends,
brothers and sisters, [Veqtor](https://twitter.com/Veqtor/status/1497167740146266112?s=20&t=mmvu8KPxybOa0TQXX32nFw)
from [Versum](https://twitter.com/versumofficial) in conjunction with [FxHash](https://twitter.com/fx_hash_/status/1497113572085751810?s=20&t=mmvu8KPxybOa0TQXX32nFw)
set up a [shared donation contract](https://tzkt.io/KT1DWnLiUkNtAQDErXxudFEH63JC6mqg3HEx/info),
that will redirect tezos to multiple charity orgs (listed below) in support of Ukraine relief, and we want to help support this initiative.
you can find the source code on [github](https://github.com/ciphrd/public-contracts/blob/master/donations_ukraine.py)`}],event_card="_event_card_ngueb_216",event_content="_event_content_ngueb_236",event_tag_line="_event_tag_line_ngueb_237",event_icon="_event_icon_ngueb_243",styles$6={event_card,event_content,event_tag_line,event_icon},EventCard=({event:re})=>{const ee={hidden:{opacity:0,x:-100,transition:{ease:"easeOut"}},show:{opacity:1,x:0,transition:{ease:"easeOut"}}};return jsxs("article",{className:styles$6.event_card,children:[jsx$1(motion.h1,{variants:ee,children:re.feed?jsxs(Button,{to:`/feed/${re.feed}`,children:[re.title," ",re.icon&&jsx$1("span",{className:styles$6.event_icon,children:re.icon})]}):jsxs(Button,{children:[re.title,re.icon&&jsx$1("span",{className:styles$6.event_icon,children:re.icon})]})}),jsx$1(motion.p,{variants:ee,className:styles$6.event_tag_line,children:re.subtitle}),jsxs(motion.div,{variants:ee,className:styles$6.event_content,children:[jsx$1(Markdown,{children:re.content}),re.link&&jsx$1("a",{target:"_blank",rel:"noreferrer",href:re.link,children:"More info >> "})]})]})},Header=()=>{const[re,ee,ne,ae,ce,le,ue,he]=useUserStore(Ge=>[Ge.address,Ge.setAccount,Ge.proxyName,Ge.proxyAddress,Ge.userInfo,Ge.unsync,Ge.sync,Ge.resetProxy],shallow),[fe,me,ge]=useModalStore(Ge=>[Ge.collapsed,Ge.setCollapsed,Ge.toggleMenu],shallow);reactExports.useEffect(()=>{const Ge=useLocalSettings.getState().applyTheme;return useLocalSettings.subscribe(Ue=>Ue.theme,Ge,{fireImmediately:!0})},[]),reactExports.useEffect(()=>{const Ge=document.body.parentElement;Ge&&(Ge.style.overflowY=fe?"":"scroll",Ge.style.position=fe?"":"fixed")},[fe]);const ve=useNavigate(),ye=useLocation(),be=useMedia$1("(min-width: 600px)"),[Ee,Ce]=reactExports.useState(),[Se,Te]=reactExports.useState(),[ke,Ne]=reactExports.useState("Sync"),[Fe,De]=reactExports.useState(""),[Oe,Re]=reactExports.useState("");reactExports.useEffect(()=>{ee(),Ce(Math.floor(Math.random()*150))},[]),reactExports.useEffect(()=>{Te(ye.pathname==="/")},[ye.pathname]),reactExports.useEffect(()=>{const Ge=([qe,Ue,ze,He])=>{if(Ne(qe?"Unsync":"Sync"),qe&&fe){const Ye=Ue?` (${ze||walletPreview(Ue)})`:"",Xe=He!=null&&He.name?`(${He.name})`:"";De(()=>walletPreview(qe)+(Ye||Xe)),Re(()=>ke.slice(ke.length-5,ke.length).split("").join(" "))}};return useUserStore.subscribe(qe=>[qe.address,qe.proxyAddress,qe.proxyName,qe.userInfo],Ge)},[]);const Be=(Ge,qe)=>{me(!0),ve(Ge,{state:qe})},Le=()=>{if(re)if(fe){const Ge=ne||(ce==null?void 0:ce.name),qe=ae||re;Be(Ge?`/${Ge}`:`${PATH.ISSUER}/${qe}`)}else le();else ue()},je=classNames$1({[styles$9.grid]:!0,[styles$9.fill_bg]:!fe});return jsxs(Fragment,{children:[jsx$1(EventBanner,{}),jsx$1(AnimatePresence,{children:!fe&&jsx$1(MainMenu,{})}),jsxs("header",{className:`${styles$9.container}`,children:[jsxs("div",{className:je,children:[jsx$1("div",{className:styles$9.left,children:jsx$1(DropdownButton$1,{alt:"events dropdown",className:styles$9.events_button,icon:jsx$1(SvgEvents,{}),menuID:"events",label:be?"Events":"",id:`events-${ye.pathname}`,children:jsx$1(DropDown$1,{menuID:"events",vertical:!0,children:sample_events==null?void 0:sample_events.map(Ge=>jsx$1(EventCard,{event:Ge},`${Ge.title} - ${Ge.subtitle}`))})})}),jsx$1(Button,{alt:"teia logo",to:Se?null:"/",onTo:()=>{me(!0),Te(Se)},onClick:()=>{Ce(Math.random()*100)},children:jsx$1(RotatingLogo$1,{seed:Ee,className:styles$9.logo})}),jsxs("div",{className:styles$9.right,children:[!fe&&jsx$1(Fragment,{children:jsxs(Button,{alt:"local settings",to:"/settings",onTo:()=>me(!0),className:styles$9.config_button,children:[jsx$1(SvgConfig,{fill:"var(--text-color)",width:16,height:16}),be&&"Config"]})}),!fe&&ae&&jsxs(Fragment,{children:[jsx$1(Line,{className:styles$9.separator,vertical:!0}),jsx$1(Button,{alt:"exit collab",small:!0,onClick:()=>he(),secondary:!0,children:"Exit collab"}),jsx$1(Line,{className:styles$9.separator,vertical:!0})]}),jsx$1(Button,{onClick:Le,className:styles$9.sync_label,secondary:!0,alt:fe?Oe?`wallet account ending in ${Oe}`:"sync wallet":Oe?"unsync":"sync",children:!fe||!re?jsx$1("span",{children:ke},"synclabel"):jsx$1("span",{children:Fe},"")}),jsx$1(Button,{alt:`${fe?"show":"hide"} menu`,onClick:ge,secondary:!0,children:jsx$1(Menu,{isOpen:!fe})})]})]}),jsx$1(Line,{})]})]})};function useFool(re=-2,ee=2){const[ne]=useLocalSettings(ae=>[ae.tilted]);reactExports.useEffect(()=>{let ae=document.getElementById("page-styles");ae||(ae=document.createElement("style"),ae.setAttribute("id","page-styles"),document.head.appendChild(ae));let ce="";if(ne){let le=0;for(;Math.abs(le)<.3;)le=Math.random()*(ee-re)+re;ce=`*:not(.no-fool):not([id^="beacon-alert-wrapper-"]):not(main):not(body):not(html):not(#root) { transition: transform 500ms; rotate:${le}deg; }`}ae.innerHTML=ce},[ne,re,ee])}const App=()=>{const{isLoading:re}=useSettings();return useFool(),re?jsx$1(Loading,{}):jsxs(Fragment,{children:[!1,jsx$1(ScrollRestoration,{getKey:ee=>ee.key}),jsxs(AnimatePresence,{mode:"wait",initial:!1,children:[jsx$1(Header,{},"header"),jsx$1(Outlet,{})]})]})};window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/);function unregister(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(re=>{re.unregister()}).catch(re=>{console.error(re.message)})}const index="";function HTMLWarning(){return jsxs("div",{className:styles$L.warning,children:[jsx$1("p",{children:"IMPORTANT: Please read the guide before minting!"}),jsx$1(Button,{href:"https://github.com/teia-community/teia-docs/wiki/Interactive-OBJKTs",children:jsx$1("strong",{children:"Interactive OBJKTs Guide"})})]})}const container="_container_1xgzz_1",field$2="_field_1xgzz_5",media="_media_1xgzz_8",info="_info_1xgzz_9",attributes="_attributes_1xgzz_17",label="_label_1xgzz_22",title="_title_1xgzz_56",styles$5={container,field:field$2,media,info,attributes,label,title},text_field_error="_text_field_error_1t5ar_1",error="_error_1t5ar_7",field$1="_field_1t5ar_11",typed_field="_typed_field_1t5ar_15",typed_preview="_typed_preview_1t5ar_28",mono="_mono_1t5ar_36",modalInfoIcon="_modalInfoIcon_1t5ar_40",local_styles={text_field_error,error,field:field$1,typed_field,typed_preview,mono,modalInfoIcon,"visualizer-image-download-button":"_visualizer-image-download-button_1t5ar_51"},copyrightModalText={overview:`
        <p>Copyright laws are over complex and conflicting - which is why in most cases, is handled by a case-by-case basis. In order for NFT Copyright to be admissible in courts, it's important for both Creators and Owners to understand the scope of what these Agreements can and cannot do.</p>
        <p>Copyright clauses are normally legally defined with traditional contracts and may involve agreements that specify the geographical areas, specific platforms, and duration for which the broadcasting is allowed. The "scope" of NFT mints are globalThis contracts here are currently set to "globalThis", "in perpetuity", and are "unlimited". They are, in essence, a "lump sum" estimation of how much the rights might be worth in total for the Work's entire life cycle. (Exclusivity is possible, and rights are also transferable based on ownership.)</p>
        <ul>
            <li><strong>Geographical Coverage:</strong> The rights are set globally, allowing for usage across all regions without any restrictions.</li>
            <li><strong>Duration of Rights:</strong> Rights are granted in perpetuity, meaning there is no expiration on the privileges and permissions granted to Owners after purchase.</li>
            <li><strong>Frequency of Rights:</strong> Rights are unlimited, not restricted by the number of broadcasts or platforms.</li>
            <li><strong>Exclusivity:</strong> Exclusive rights Agreements (privileges granted exclusive to one individual or entity and no one else), are possible using the number of Editions owned as a mechanism to facilitate these types of arrangements. (By default, all rights bestowed upon by the Creator are non-exclusive.)</li>
            <li><strong>Transferability:</strong> Rights are transferable because they are defined by the condition of ownership, allowing rights and associated privileges to be passed to others, unless stated otherwise.</li>
            <li><strong>Royalties:</strong> Royalties upon secondary sales still apply during transfers of ownership, which allows for Creators to earn "passive income", similar to deals that occur in traditional arts/entertainment industries.</li>
        </ul>
        <p>Note that some digital mediums (e.g. software, websites, video games) often fall into several categories, depending on how it's use. If you want a "permissive" contract, choose as many as applicable. If you want more granularity, think about use-cases and scope them as necessary. (e.g. for video games, reproduction rights will allow the developer to sell assets like art and music directly, whereas broadcasting rights will only allow to "use" them in-game.)
        <p>If geography, timelines (i.e. expiration dates), or frequency of usage (e.g. each Owner is only allowed to make X copies) is of importance, Creators can add those details in the Addendum sections to scope the Agreement as necessary.</p>
        <p>In all cases, the written text in this document will take precident over any data or metadata displays as the authoritative permissions for the Work, applied to both the Creator(s) and Owner(s), with the statements in the Addendums having the ability to overrule or nullify statements in the auto-generated portions of the document itself in cases of conflicts or inconsistencies. (Though it is recommended that you don't create contradictions in the document itself to avoid misunderstandings or misinterpretations.)</p>
    `,reproduce:`
        <p>This right allows the Owner of the Work to make direct copies of the work, for both commercial and non-commercial purposes.</p>
        <p>This applies to both digital and physical reproductions - prints, books and publications, merchandise, digital assets (e.g. for use in video games and software applications), educational use, and so on.</p>
        <p>For code-based works (e.g. application/x-directory), if you have your Work stored on a public repository, be careful not to create contradictions or conflicts with your licenses there and here, or it may lead to issues later that may be difficult to untangle.</p>
        <p>Reproduction rights are typically used for direct sales of the artwork, "as is". In music, record/album sales are typically done through reproduction rights, whereas the permissions to use in playback through broadcasting rights. Add more specificity to the Addendum sections if more granularity is required.</p>
        `,broadcast:`
        <p>This right allows the holder to broadcast the work to the public, across a variety of media platforms, both traditional and digital, for both commercial and non-commercial purposes.</p>
        <p>For traditional media, this includes the airing of works on television and radio, encompassing both entertainment and informational content. It also covers the broadcasting of live events such as concerts and sports.</p>
        <p>In the digital realm, the right extends to online streaming platforms, enabling the work to be shared globally. It also includes the use of social media platforms for live streaming events, sharing video clips, or hosting webinars and podcasts.</p>
        <p>Note that NFT ecosystems currently do not support tracking of plays, views, or interactions (for gaming, etc.) - yet. When these features eventually become integrated with on-chain ledgers, more options for Agreement types will open up for both Creators and Owners alike.</p>
        <p>If you're not sure how to set the initial price of license sales, it is recommended that you start low and let secondary sales determine an estimate for demand - Creators will still get paid through the royalties mechanism, which helps to mitigate some of the risk.</p>
        `,publicDisplay:`
        <p>This right allows the holder to display the work publicly, across various venues and platforms, encompassing both physical and digital displays.</p>
        <p>Physical displays can include exhibitions in art galleries, museums, or public spaces where artworks are shown to the public. It also covers the use of works in public areas like billboards, digital signage, and displays in commercial establishments like stores or restaurants.</p>
        <p>Digitally, this right extends to the display of works on websites, digital galleries, or other online platforms where the public can view them. This includes the use of images, videos, or other digital content on platforms intended for wide public reach.</p>
        <p>The public display rights are outlined in legal agreements that specify the scope of where and how the work can be displayed, and may include restrictions based on location, duration, or specific contexts. These rights are typically non-exclusive but can be negotiated depending on the creator's preferences and the nature of the display.</p>
        <p>As with other rights, the right to public display is transferable, allowing the holder to grant permissions to others under agreed terms.</p>
        <p>Note that there may be cases where reproduction and public display rights overlap - if more granularity is required, the Creator may consider specifying the scope (e.g. displays in museums are allowed, websites are not allowed) to avoid confusion.</p>
        `,createDerivativeWorks:`
        <p>This right allows the holder to make derivative works based on the original, for both commercial and non-commercial purposes. This includes modifications, adaptations, and new creations inspired by the original work and is often an Agreement between the Creator and other Creator(s) who are interested in using ideas or concepts from previously created Works.</p>
        <p>Derivative works can range from literary adaptations, such as turning a novel into a screenplay or a children's book, to artistic transformations, such as creating a sculpture based on a painting. It also includes technological adaptations like developing a video game based on a film or creating augmented reality experiences based on traditional media.</p>
        <p>In the digital domain, this right extends to remixing songs, re-editing videos for different platforms, or using existing software code to develop new applications.</p>
        <p>The agreements for derivative works specify the extent of modification allowed and may include limitations to ensure the original creator's vision and intellectual property are respected. These rights are typically negotiated on a case-by-case basis and can be exclusive or non-exclusive, depending on the agreement between the original creator and the rights holder.</p>
        <p>As with other intellectual property rights, the right to create derivative works is transferable. If the Creator wants to set limits or how their work is used by others, they may also choose to specify it in the Addendum section(s) as well.</p>
        `,exclusiveRights:`
        <p>Most Agreements will default to "No Exclusive Rights", but the Edition number system allows for Creators to create conditions with their Work that allows them to give exclusive rights to one individual or entity, if desired. (Especially if the Creator is concerned about how the Work will be used or represented by "unauthorized" dealers.)</p>
        <ul>
            <li><strong>Majority Share:</strong> Ownership of more than 50% of the editions confers exclusive rights to the owner.</li>
            <li><strong>Super-Majority Share:</strong> Ownership of 66.667% or more (approximately two-thirds) of the editions confers enhanced exclusive rights.</li>
            <li><strong>Rights Affected:</strong> The exclusive rights may include reproduction, broadcasting, public display, and creation of derivative works, depending on the percentage of ownership.</li>
            <li><strong>Transferability:</strong> These exclusive rights are transferable along with the ownership of the NFTs, which may cause certain rights and clauses to become "active". (A collector may decide to buy out the Editions from the other Owners out there, for example.) Rights, privledges, and permissions granted in this way is effective immediately after the transaction that triggered that condition to occur.</li>
            <li><strong>Retention of Creator's Rights:</strong> Despite the transfer or assignment of exclusive rights, creators may retain certain rights under specified conditions.</li>
        </ul>
        <p>Note: If you're unsure if you may or may not want the option to formulate exclusive deals for your Work, one option is to set it to majority share, then release 49% or less Editions to the public, which allows Creators to continue their sales while also keeping the option open in the future.</p>
        `,retainCreatorRights:`
        <p>This right allows Creators to retain all permissions, privledges, rights, even when exclusive rights are granted to another party. (The original definition of "selling out" actually comes from the act of Creators losing control over their own work, in exchange for money, which is something that can still happen today.)</p>
        <p>In most cases, it is recommended to keep this option checked, unless there is a specific reason to do otherwise. Some companies prefer "taking over" the management of the Work, or do partial allocations of rights (e.g. the Creator retains it for personal/educational use, whereas the company focuses on commercial, etc.) but that type of granularity is rare, especially with NFTs.</p>
        `,releasePublicDomain:`
        <p>This clause allows the work to be released to the public domain, effectively removing all copyright restrictions associated with it.</p>
        <p>By releasing the work to the public domain, the creator permits anyone to use, modify, and distribute the work without needing to seek permission or pay royalties. This can be a strategic decision for creators who wish to maximize the work's exposure and accessibility.</p>
        <p>Public domain release is often irrevocable, meaning once a work is released to the public domain, the creator cannot reclaim the rights. Therefore, it's crucial for Creators to carefully consider the implications before making such a decision, especially since it can be easily referenced on the blockchain itself. ("Announcements" made on social media or other privately-owned platforms may or may not be admissible as a declaration so it may be risky to assume so.</p>
        <p>This option can be particularly beneficial for educational, cultural, or philanthropic purposes, contributing to the broader public good by freely sharing creative works.</p>
        `,requireAttribution:`
        <p>This is simply a requirement that whenever the work is displayed in public settings (which includes broadcasts, events, social media posts, etc.) that the Owner of the work is required to give attribution to the original Creator(s) in some way, shape, or form.</p>
        <p>Many curators, content creators, and fans will do this out of courtesy to the artist, but there are times (like logos) where attribution may not be necessary, or even undesirable. Leaving this section blank leaves it up to the Owner as to what they want to do, but it's generally a good idea to make explicit what the usage rights are, if the artist has a preference for how they want their works used in public contexts.</p>
        <p>If you want more granularity in the way attributions are done, you may want to consider using the Addendum portions of the Custom License or reference Creative Commons licenses to get an idea of how these clauses are applied in practice. (Note: Once a work goes to Public Domain, attributions are no longer required.)</p>
        `,rightsAreTransferable:`
        <p>When rights are transferable, the Owner(s) of the Work are granted the ability to pass on their rights and privileges to subsequent Owners upon a sale. (i.e. "Secondary Sales") This transferability includes all forms of public display, reproduction, and sale, ensuring that rights can dynamically move within the marketplace while still respecting the original agreements set forth by the Creator(s).</p>
        <p>Transferable rights are particularly valuable in dynamic markets and industries where ownership frequently changes hands. They allow for continued use and enjoyment of the Work across different owners and contexts. However, it's important for each Owner to understand that the transfer of these rights must still adhere to the terms of the original contract, particularly concerning attribution and royalty obligations.</p>
        <p>If rights are *not* transferable, the original Owner (usually the Creator) retains exclusive control over the use of the Work, and any attempt to transfer these rights without explicit approval from the Creator is void. This setup ensures that the Creator can maintain a closer relationship with the usage of their Work, limiting the potential for unauthorized uses or dilution of the Work’s value in contexts they did not consent to.</p>
        <p>In either case, Creators and Owners should clearly understand the terms of transferability and its implications since it potentially has long-term ramifications, especially when there is no expiration date attached to each clause.</p>
        `,expirationDate:`
        <p>This is the date where all rights given to Owner(s) upon the ownership of each edition/license expires, effectively returning the privledges and rights granted through the Work back to the Creator.</p>
        <p>In professional contexts, expiration dates are typically set on a case-to-case basis (when an artist signs a "deal" with a label or company these details come into play), but if the Creator wants to create a blanket policy for their rights to be effective only during a limited time period, this option can be used to set a standard for all editions that apply to all Owners at once.</p>
    `,customUri:`
        <p>The Custom URI feature serves two important functions for creators:</p>
        
        <p><strong>1. External Reference:</strong><br>
        - Link to additional terms, restrictions, or declarations for the Work
        - Provide supplementary documentation or metadata
        - Reference creator's canonical information or portfolio</p>
        
        <p><strong>2. Retroactive Application:</strong><br>
        - Point to a previous work by the same creator
        - Apply current license terms to the referenced work
        - Must be verifiable through wallet address ownership</p>
        
        <p><strong>Important Considerations:</strong></p>
        <ul>
        <li>For standard web links (http://, https://):
          <ul>
            <li>- The URI reference is permanent, but destination content may change</li>
            <li>- Consider carefully if changeable content aligns with your intentions</li>
            <li>- Best for dynamic information that may need updates</li>
          </ul>
        </li>
        <li>For decentralized storage (ipfs://, etc.):
          <ul>
            <li>- Content is immutable and permanently stored</li>
            <li>- Ideal for fixed terms or historical references</li>
            <li>- Recommended for legal documents and permanent declarations</li>
          </ul>
        </li>
        </ul>
        
        <p><strong>Verification Requirements:</strong><br>
        When using this feature for retroactive application, creators must be able to prove ownership of both the current and referenced works through their wallet addresses. This typically requires maintaining access to both wallet addresses and being able to sign transactions or messages that verify ownership.</p>`},modalOverlay="_modalOverlay_6xe0q_216",modalContent="_modalContent_6xe0q_229",styles$4={modalOverlay,modalContent},InfoModal=({isOpen:re,title:ee,content:ne,onClose:ae})=>(reactExports.useEffect(()=>{const ce=le=>{le.target===document.getElementById("modal-overlay")&&ae()};return document.addEventListener("mousedown",ce),()=>document.removeEventListener("mousedown",ce)},[ae]),re?jsx$1("div",{id:"modal-overlay",className:styles$4.modalOverlay,children:jsxs("div",{className:styles$4.modalContent,children:[jsx$1("h2",{children:ee}),jsx$1("div",{children:ne})]})}):null),initialClauses={reproduce:!1,broadcast:!1,publicDisplay:!1,createDerivativeWorks:!1,exclusiveRights:"none",retainCreatorRights:!0,releasePublicDomain:!1,requireAttribution:!0,rightsAreTransferable:!0,expirationDate:"",expirationDateExists:!1,customUriEnabled:!1,customUri:"",addendum:""},clauseLabels={reproduce:"Right to Reproduce",broadcast:"Right to Broadcast",publicDisplay:"Right to Public Display",createDerivativeWorks:"Right to Create Derivative Works",exclusiveRights:"Exclusive Rights Based on Ownership Share",retainCreatorRights:"Creator Retains Rights Even When Exclusive",releasePublicDomain:"Release to Public Domain",requireAttribution:"Require Attribution on Use",rightsAreTransferable:"Rights are Transferable",expirationDateExists:"Clauses Have Expiration Date",expirationDate:"Date of Expiration",customUriEnabled:"Custom URI",overview:"Copyright Overview"},exclusiveRightsOptions=[{value:"none",label:" 🚫 None (No Exclusive Rights To Any Party)"},{value:"majority",label:" ⚖️ Majority Share (50%+ Editions Owned = Exclusive Rights)"},{value:"superMajority",label:" ⚖️ Super-Majority Share (66.667%+ Editions Owned = Exclusive Rights)"}],ClausesDescriptions=({clauses:re})=>{const ee={reproduce:{true:"✅ Yes",false:"🚫 No"},broadcast:{true:"✅ Yes",false:"🚫 No"},publicDisplay:{true:"✅ Yes",false:"🚫 No"},createDerivativeWorks:{true:"✅ Yes",false:"🚫 No"},releasePublicDomain:{true:"✅ Yes",false:"🚫 No"},requireAttribution:{true:"✅ Yes",false:"🚫 No"},rightsAreTransferable:{true:"✅ Yes",false:"🚫 No"},expirationDateExists:{true:"✅ Yes",false:"🚫 No"},expirationDate:{null:"None",default:new Date(re==null?void 0:re.expirationDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},customUriEnabled:{true:"📝 Yes",false:"🚫 No"},retainCreatorRights:{true:"✅ Yes",false:"⚠️ No"}};return jsxs("div",{children:[jsx$1("strong",{children:"Copyright Permissions Granted on Ownership:"}),jsx$1("ul",{children:Object.entries(re).map(([ne,ae])=>{var ce,le;if(ne==="exclusiveRights"){const ue=((ce=exclusiveRightsOptions.find(he=>(he==null?void 0:he.value)===ae))==null?void 0:ce.label)||"None";return jsxs("li",{children:["Exclusive Rights: ",ue]},ne)}else{if(ne==="customUri"||ne==="expirationDate")return null;if(ne==="expirationDateExists")return jsxs(React.Fragment,{children:[jsxs("li",{children:[clauseLabels[ne],": ",ee[ne][ae]]},ne),jsxs("li",{children:[clauseLabels.expirationDate,":"," ",re.expirationDateExists&&re.expirationDate?new Date(re.expirationDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"None"]},"expirationDate")]},ne);if(ne==="addendum")return jsxs("li",{children:["Addendum: ",ae?"✅ Yes":"🚫 No"]},ne);if(ne==="customUriEnabled")return ae?jsxs("li",{children:["Custom URI Enabled: ",ee==null?void 0:ee.customUriEnabled[!0]]},ne):null;{const ue=((le=ee[ne])==null?void 0:le[ae])||"Unknown Status";return jsxs("li",{children:[clauseLabels[ne],": ",ue]},ne)}}})}),jsx$1("br",{})]})};function CustomCopyrightForm({onChange:re,value:ee,defaultValue:ne}){var Ge,qe,Ue;const{watch:ae}=useFormContext(),{license:ce,minterName:le,address:ue}=useOutletContext(),[he,fe]=reactExports.useState((ne==null?void 0:ne.clauses)||initialClauses),[me,ge]=reactExports.useState("No Permissions Chosen"),[ve,ye]=reactExports.useState("No Permissions Chosen"),[be,Ee]=reactExports.useState(""),Ce=useMintStore(ze=>ze.updateCustomLicenseData);let Se=1;const Te=reactExports.useCallback(()=>{let ze=le?`[${le}, ${ue}]`:`[${ue}]`,He=`This Custom License Agreement ("Agreement") is granted by the creator ("Creator") of the Non-Fungible Token ("NFT") identified by the owner of wallet address ${ze} ("Wallet Address") for the Work "${ae("title")}" under the Minting Contract managed by the TEIA DAO LLC [${HEN_CONTRACT_FA2}]. This Agreement outlines the rights and obligations associated with the ownership and use of the NFT's likeness and any derivatives thereof ("Work").

“Editions” refers to the total number of authorized copies of the NFT that the Creator issues at the time of minting. Each copy represents an "Edition" of the NFT, allowing multiple Owners (or one Owner holding multiple copies) to hold rights to the Work under the terms of this Agreement.`;if(He+=`

In all cases, the written text in this document will take precedence over any data or metadata displays on or off-chain as the authoritative permissions for the Work, applied to both the Creator(s) and Owner(s). Statements in the Addendums have the ability to overrule or nullify statements in the auto-generated portions of this document in cases of conflicts or inconsistencies.`,He+=`

In cases where multiple Creators or Collaborators have contributed to the creation of the Work, the rights and obligations stipulated herein apply equally to all Creators. Each Creator is entitled to the rights granted under this Agreement, and such rights are shared collectively among all Creators unless specified otherwise.`,he.releasePublicDomain?He+=`

${Se++}. Release to Public Domain:
The Creator hereby releases all copyright and related rights, title, and interest in and to the Work into the public domain, free from any copyright restrictions. This release applies globally, allowing for the free use, reproduction, and modification of the Work without any compensation due to the Creator.`:(he.reproduce&&(He+=`

${Se++}. Right to Reproduce:
The Creator hereby grants to each owner of the NFT ("Owner") a worldwide license to use the Work for both commercial and non-commercial reproduction purposes.`),he.broadcast&&(He+=`

${Se++}. Right to Broadcast:
The Creator grants to each Owner a worldwide license to use the Work for broadcasting purposes for both commercial and non-commercial use.`),he.publicDisplay&&(He+=`

${Se++}. Right to Public Display:
The Creator grants to each Owner a worldwide license to publicly display the Work, either as a physical display or as a performance for live events. This license does not permit the monetization of the Work by the Owner and requires the Owner to provide full attribution to the Creator.`),he.createDerivativeWorks&&(He+=`

${Se++}. Right to Create Derivative Works:
The Creator grants to each Owner a worldwide license to publicly display the Work, either as a physical display or as a performance for live events. This license does not permit the monetization of the Work by the Owner and requires the Owner to provide full attribution to the Creator.`),he.requireAttribution&&(He+=`

${Se++}. Requirement for Attribution:
The Owner(s) of the Work are required to give proper and visible attribution to the Creator(s) whenever the Work is used in public settings, broadcasts, or any other form of public display or performance.acknowledge the Creator(s) by name or wallet address, unless otherwise agreed upon in writing by all parties involved. Failure to provide such attribution constitutes a breach of this Agreement, subject to the remedies available under applicable law.`),he.rightsAreTransferable&&(he.reproduce||he.broadcast||he.publicDisplay||he.createDerivativeWorks)?He+=`

${Se++}. Transferable Rights:
The rights granted under this Agreement to the Owner(s) of the Work are transferable. The Owner(s) may assign, transfer, or sublicense the rights to the Work, subject to maintaining proper and visible attribution to the Creator(s) whenever the Work is used in public settings, broadcasts, or any other form of public display or performance. This clause is applicable to all sales and edition numbers (unless stated otherwise), including both primary and secondary sales, promoting continuous and flexible utilization of the Work across different owners. In case of a dispute, ledger records from sales transactions will serve to confirm or deny claims as necessary. Failure to comply with attribution requirements constitutes a breach of this Agreement, subject to the remedies available under applicable law.`:!he.rightsAreTransferable&&(he.reproduce||he.broadcast||he.publicDisplay||he.createDerivativeWorks)&&(He+=`

${Se++}. Non-Transferable Rights:
The rights granted under this Agreement to the Owner(s) of the Work are non-transferable. Any attempt to transfer, assign, or sublicense the rights without explicit written consent from the Creator(s) is void. The Owner(s) must maintain proper and visible attribution to the Creator(s) whenever the Work is used in public settings, broadcasts, or any other form of public display or performance. This clause is applicable to Primary Sales, as defined as a direct sale from the Creator(s) to the first Owner(s) of an Edition of the Work from any Marketplace Contract. Upon any Secondary Sale, the rights and privileges initially granted are nullified. In case of a dispute, ledger records from sales transactions will serve to confirm or deny claims as necessary.`)),!he.publicDisplay&&!he.reproduce&&!he.broadcast&&!he.createDerivativeWorks&&!he.releasePublicDomain&&!he.requireAttribution&&(He+=`

${Se++}. All Rights Reserved: 
No rights are granted under this Agreement. All rights for the Work are reserved solely by the Creator.`),he.exclusiveRights==="none")He+=`

${Se++}. Exclusive Rights:
No exclusive rights are granted under this Agreement. All rights are non-exclusive and shared among all rightful owners or licensees - or in cases of "All Rights Reserved", exclusivity is granted solely to the Creator themselves.`;else if(he.reproduce||he.broadcast||he.publicDisplay||he.createDerivativeWorks){const Ye=he.exclusiveRights==="majority"?"majority share (over 50%)":"super-majority share (66.667%+ or exactly 2/3rds)";He+=`

${Se++}. Exclusive Rights:
The Creator grants exclusive rights as outlined in this Agreement to the Owner(s) holding a ${Ye} of the editions of the NFT at the time of its original mint. If no single party holds such a share, the rights outlined in this Agreement apply non-exclusively to all Owners. (In some cases, the Creator themselves may be the exclusive Owner.)`}if(he.exclusiveRights!=="none"&&he.retainCreatorRights&&(He+=`

${Se++}. Retention of Creator's Rights:
Despite reaching the threshold for exclusive rights, the Creator retains certain rights as specified under this Agreement, even if exclusivity conditions are met by other Owners. The rights are then split equally between the Creator and Owner which has been granted exclusive rights over the other Owner(s) of the Work, effective immediately after the date in which the condition for exclusivity has been met.`),he.expirationDate&&he.expirationDateExists){const Ye=new Date(he.expirationDate).toLocaleDateString();He+=`

${Se++}. Expiration Date:
This Agreement is effective until the date of ${Ye} (relative to the time of mint of the Work), after which the rights granted herein will terminate unless expressly renewed or extended in writing by the Creator. Upon expiration, all rights (including exclusive rights) returns back to the Creator's ownership and control.`}return he.customUriEnabled&&he.customUri&&(He+=`

${Se++}. Custom URI Reference and Retroactive Application:
The Work is subject to additional terms, conditions, and declarations specified at: ${he.customUri}. These external terms are hereby incorporated by reference into this Agreement and shall be considered binding to the same extent as if they were fully set forth herein.
    
This URI may serve one or both of the following purposes:
a) External Reference: The URI may contain supplementary terms, conditions, restrictions, or declarations that apply to this Work. These additional terms shall be considered as an extension of this Agreement.
    
b) Retroactive Application: If the URI points to a previous work by the same Creator, and the Creator can conclusively demonstrate through cryptographic proof that they control both the wallet address associated with this Work and the wallet address associated with the referenced work ${ze}, then all terms, rights, and restrictions specified in this Agreement shall apply retroactively to the referenced work. Such proof must be verifiable through blockchain records or other cryptographic means that establish an undeniable connection between the Creator's wallet addresses and both works.
    
The Creator bears the burden of proving ownership of both works through wallet address verification, transaction histories, or other blockchain-based evidence. In the absence of such proof, the retroactive application shall be considered void while the external reference shall remain in effect. Any conflicts between the terms specified in the URI and this Agreement shall be resolved in favor of the more restrictive terms, unless explicitly stated otherwise in either document.`),He+=`

${Se++}. Jurisdiction and Legal Authority:
This Agreement is subject to and shall be interpreted in accordance with the laws of the jurisdiction in which the Creator and Owner(s) are domiciled. The rights granted hereunder are subject to any applicable international, national, and local copyright and distribution laws.`,He+=`

${Se++}. Identification and Representation:
Each Owner (including the Creator and all Collaborators) affirms that the wallet address provided is under their control or under the control of the party they legitimately represent. Each Owner accepts all responsibility for validating their ownership or representative authority of the said wallet address. It is the Owner's duty to provide satisfactory proof of ownership or authorization as may be required to establish their connection to the wallet address in question. Failure to conclusively demonstrate such ownership or authority may result in denial of access to services, rights, or privileges associated with the wallet address under this Agreement.`,He+=`

${Se++}. Amendments and Modifications:
This Agreement may be amended or modified only by a written document signed by both the Creator and the Owner(s) holding the relevant majority or super-majority share, as applicable.`,He+=`

${Se++}. Proof of Ownership and Responsibility:
Each individual claiming ownership ("Claimant") must conclusively prove that they are the legitimate Owner or Creator of the specified wallet address associated with this Agreement. It is the sole responsibility of the Claimant to provide irrefutable evidence supporting their claim. This proof may include, but is not limited to, cryptographic signatures, transaction histories, and other blockchain-based verifications that establish an undeniable link between the Claimant and the wallet address in question. Failure to provide satisfactory evidence will result in the denial of any rights, privileges, or access purportedly associated with the wallet address under the terms of this Agreement.`,He+=`

${Se++}. Limitation of Platform Responsibility:
This Agreement is entered into solely between the Creator and the Owner(s) of the Non-Fungible Token ("NFT") and the associated digital or physical artwork ("Work"). TEIA (teia.art), formally operating under TEIA DAO LLC, and its affiliated members, collectively referred to as "Platform," do not bear any responsibility for the enforcement, execution, or maintenance of this Agreement. The Platform serves only as a venue for the creation, display, and trading of NFTs and does not participate in any legal relationships established under this Agreement between the Creator and the Owner(s). All responsibilities related to the enforcement and adherence to the terms of this Agreement rest solely with the Creator and the Owner(s). The Platform disclaims all liability for any actions or omissions of any user related to the provisions of this Agreement.`,He+=`

${Se++}. Perpetuity of Agreement:
Unless stated otherwise (in this Agreement itself), this Agreement remains effective in perpetuity as long as the Owner(s) can conclusively demonstrate proof of ownership of the NFT representing the Work, beyond reasonable doubt. Proof of ownership must be substantiated through reliable and verifiable means, which may include, but are not limited to, transaction records, cryptographic proofs, or any other blockchain-based evidence that unequivocally establishes ownership. This perpetual license ensures that the rights and privileges granted under this Agreement persist as long as the ownership criteria are met and validated.`,he.addendum&&(He+=`

Addendum By Creator:
${he==null?void 0:he.addendum}`),He},[ue,Se,he,le]),ke=reactExports.useCallback((ze,He)=>{let Ye;ze==null?Ye="":typeof ze=="object"&&"value"in ze?Ye=ze.value:Ye=ze,fe(He==="customUriEnabled"?Xe=>({...Xe,customUriEnabled:Ye===!0,...Ye===!1&&{customUri:""}}):He==="releasePublicDomain"&&Ye===!0?{reproduce:!1,broadcast:!1,publicDisplay:!1,createDerivativeWorks:!1,exclusiveRights:"none",retainCreatorRights:!1,rightsAreTransferable:!1,expirationDateExists:!1,expirationDate:"",releasePublicDomain:!0,customUriEnabled:!1,customUri:""}:Xe=>({...Xe,[He]:Ye,...He!=="releasePublicDomain"&&Xe.releasePublicDomain?{releasePublicDomain:!1}:null}))},[]),Ne=ze=>{const He=ze.target?ze.target.value:ze;function Ye(Xe){try{return new URL(Xe),!0}catch{return!1}}Ye(He)?fe(Xe=>({...Xe,customUri:He})):console.error("Invalid URI")},Fe=ze=>{var Xe,We;let He,Ye;ze!=null&&ze.target?(He=((Xe=ze==null?void 0:ze.target)==null?void 0:Xe.name)||"",Ye=((We=ze==null?void 0:ze.target)==null?void 0:We.value)||""):(He="addendum"|"",Ye=ze|""),fe(Ze=>({...Ze,[He]:Ye||""}))};reactExports.useEffect(()=>{let ze;!(he.reproduce||he.broadcast||he.publicDisplay||he.createDerivativeWorks||he.releasePublicDomain||he.requireAttribution)&&!he.customUriEnabled?ze="No Permissions Chosen (For Addendum or Expiration Date sections to show, choose at least one option in the checkboxes above.)":ze=Te(),ye(ze),ge(ze),Ce({clauses:he,documentText:ze})},[he==null?void 0:he.reproduce,he==null?void 0:he.broadcast,he==null?void 0:he.publicDisplay,he==null?void 0:he.createDerivativeWorks,he==null?void 0:he.exclusiveRights,he==null?void 0:he.releasePublicDomain,he==null?void 0:he.requireAttribution,he==null?void 0:he.rightsAreTransferable,he==null?void 0:he.expirationDate,he==null?void 0:he.expirationDateExists,ke,Te,Ce]),reactExports.useEffect(()=>{re({clauses:he,documentText:ve})},[he,ve,re]);const De=["reproduce","broadcast","publicDisplay","createDerivativeWorks","requireAttribution","rightsAreTransferable","releasePublicDomain"],[Oe,Re]=reactExports.useState({isOpen:!1,title:"",content:""}),Be=ze=>{const He=copyrightModalText[ze];Re({isOpen:!0,title:clauseLabels[ze],content:He||"No detailed information available."})},Le=(ze,He)=>{(ze.key==="Enter"||ze.key===" ")&&(ze.preventDefault(),Be(He))},je=ze=>{fe(He=>({...He,expirationDateExists:ze}))};return jsxs("div",{style:{borderBottom:"1px solid var(--gray-20)"},children:[jsxs("h3",{children:["Custom License Generation Form",jsx$1("span",{style:{marginLeft:"0.5em"},role:"button",tabIndex:0,onClick:()=>Be("overview"),onKeyPress:ze=>Le(ze,clauseLabels.overview),children:"(?)"})]}),jsxs("div",{style:{marginTop:"1em"},children:[De.map(ze=>jsxs("div",{style:{display:"flex"},children:[jsx$1(Checkbox$1,{name:ze,label:clauseLabels[ze],checked:he[ze],onCheck:He=>ke(He,ze),disabled:he.releasePublicDomain&&ze!=="releasePublicDomain"},ze),jsx$1("span",{role:"button",tabIndex:0,className:local_styles.modalInfoIcon,onClick:()=>Be(ze),onKeyPress:He=>Le(He,clauseLabels[ze]),children:"(?)"})]},ze)),Oe.isOpen&&jsx$1(InfoModal,{isOpen:Oe.isOpen,title:Oe.title,content:jsx$1("div",{dangerouslySetInnerHTML:{__html:Oe.content}}),onClose:()=>Re(ze=>({...ze,isOpen:!1}))}),jsxs("div",{className:"select-container",style:{marginTop:"2em"},children:[jsxs("div",{style:{display:"flex"},children:[jsx$1("h4",{children:clauseLabels.exclusiveRights}),jsx$1("span",{role:"button",tabIndex:0,className:local_styles.modalInfoIcon,onClick:()=>Be("exclusiveRights"),onKeyPress:ze=>Le(ze,clauseLabels.exclusiveRights),children:"(?)"})]}),jsx$1(ReactSelect,{name:"exclusiveRights",options:exclusiveRightsOptions,value:exclusiveRightsOptions.find(ze=>ze.value===he.exclusiveRights),onChange:ze=>ke(ze,"exclusiveRights"),placeholder:"Select Ownership Share Type",isDisabled:!Object.values(he).some(ze=>ze&&ze!=="none"),styles:style$1,theme,className:local_styles.container,classNamePrefix:"react_select"}),["majority","superMajority"].includes(he.exclusiveRights)&&jsxs(Fragment,{children:[jsx$1("br",{}),jsx$1(Checkbox$1,{name:"retainCreatorRights",label:"Creator Retains Their Rights Even When Exclusivity is Reached",checked:he.retainCreatorRights,onCheck:ze=>ke(ze,"retainCreatorRights"),className:local_styles.field})]})]}),jsxs("div",{style:{marginTop:"1em",display:"flex"},children:[jsx$1(Checkbox$1,{name:"expirationDateExists",label:"Add an Expiration Date to Clauses",checked:he==null?void 0:he.expirationDateExists,defaultValue:(Ge=ne==null?void 0:ne.clauses)==null?void 0:Ge.expirationDateExists,onCheck:je,className:local_styles.field}),jsx$1("span",{role:"button",tabIndex:0,className:local_styles.modalInfoIcon,onClick:()=>Be("exclusiveRights"),onKeyPress:ze=>Le(ze,clauseLabels.exclusiveRights),children:"(?)"})]}),he.expirationDateExists&&jsxs("div",{style:{marginTop:"1em"},children:[jsx$1("h4",{children:clauseLabels.expirationDate}),jsx$1(Input$2,{type:"date",value:he==null?void 0:he.expirationDate,onChange:ze=>ke(ze,"expirationDate"),defaultValue:(qe=ne==null?void 0:ne.clauses)==null?void 0:qe.expirationDate,className:local_styles.field})]}),he&&jsxs("div",{style:{marginTop:"1em"},children:[jsx$1("h4",{children:"Addendum/Notes"}),jsx$1(Textarea$1,{type:"text",name:"addendum",value:(he==null?void 0:he.addendum)||"",onChange:Fe,placeholder:"Add additional notes, clauses, restrictions, scopes, etc.",defaultValue:(Ue=ne==null?void 0:ne.clauses)==null?void 0:Ue.addendum,className:local_styles.field})]}),jsxs("div",{style:{marginTop:"1em"},children:[jsxs("div",{style:{display:"flex"},children:[jsx$1(Checkbox$1,{name:"customUriEnabled",label:"Use Custom URI",checked:he==null?void 0:he.customUriEnabled,onCheck:ze=>ke(ze,"customUriEnabled"),className:local_styles.field}),jsx$1("span",{role:"button",tabIndex:0,className:local_styles.modalInfoIcon,onClick:()=>Be("customUri"),onKeyPress:ze=>Le(ze,clauseLabels.customUriEnabled),children:"(?)"})]}),(he==null?void 0:he.customUriEnabled)&&jsx$1(Input$2,{type:"text",value:(he==null?void 0:he.customUri)||"",onChange:ze=>Ne(ze),placeholder:"Paste URI/URL Here (ipfs://, http://, https://)",className:local_styles.field}),be&&jsx$1("div",{className:local_styles.errorText,children:be})]})]}),jsxs("div",{style:{maxWidth:"100%",overflow:"auto",padding:"15px",margin:"20px 0",border:"1px solid #ccc",whiteSpace:"pre-wrap"},children:[jsx$1("h2",{children:"Custom License Agreement"}),jsx$1("pre",{style:{whiteSpace:"pre-wrap",overflowWrap:"break-word",wordWrap:"break-word"},children:me})]})]})}function isHTML(re){return re===MIMETYPE.ZIP||re===MIMETYPE.ZIP1||re===MIMETYPE.ZIP2}const Attribute=({title:re,children:ee})=>ee&&jsxs("div",{className:styles$5.attributes,children:[jsxs("strong",{children:[re,":"]}),ee]}),Field=({title:re,value:ee})=>ee&&jsxs("div",{className:styles$5.field,children:[jsxs("strong",{children:[re,":"]}),jsx$1("p",{children:ee})]}),Preview=()=>{const[re,ee,ne,ae,ce,le,ue,he,fe,me,ge,ve,ye]=useMintStore(Ce=>[Ce.tags,Ce.title,Ce.description,Ce.artifact,Ce.cover,Ce.license,Ce.customLicenseData,Ce.royalties,Ce.language,Ce.photosensitive,Ce.nsfw,Ce.editions,Ce.isMonoType]),{ignoreUriMap:be}=useSettings(),Ee=re?re===""?[]:re.replace(/\s/g,"").split(","):[];return ae?jsxs(motion.div,{className:styles$5.container,style:{width:"100%"},initial:{x:"20%"},animate:{x:0},exit:{x:"20%"},transition:{ease:"easeInOut"},children:[isHTML(ae.mimeType)&&jsx$1(HTMLWarning,{}),jsx$1("div",{className:styles$5.media,children:jsx$1(RenderMediaType,{displayView:!0,nft:{mime_type:ae.mimeType,is_mono_type:!!ye},previewUri:ae.reader,previewDisplayUri:ce==null?void 0:ce.reader})}),jsxs("div",{className:styles$5.info,children:[jsxs("div",{className:styles$5.title,children:[jsx$1("strong",{children:"Title:"}),ee]}),jsx$1(Field,{title:"Description",value:ne}),jsx$1(Field,{title:"License",value:le==null?void 0:le.label}),(ue==null?void 0:ue.clauses)&&(le==null?void 0:le.label)==="Custom License"&&jsxs("div",{children:[jsx$1(ClausesDescriptions,{clauses:ue==null?void 0:ue.clauses}),jsx$1(Field,{title:"Copyright License Agreement",value:ue==null?void 0:ue.documentText})]}),jsx$1(Field,{title:"Language",value:fe==null?void 0:fe.label}),(me||ge)&&jsxs("div",{className:styles$5.attributes,children:[jsx$1("strong",{children:"Attributes:"}),ge&&jsx$1("span",{className:styles$5.label,title:"This artwork is NSFW",children:"NSFW"}),me&&jsx$1("span",{className:styles$5.label,title:"This artwork can cause seizures",children:"Photo Sensitive Seizure Warning!"})]}),jsx$1(Attribute,{title:"Tags",children:(Ee==null?void 0:Ee.length)>0&&jsx$1(Tags,{tags:Ee})}),jsx$1(Attribute,{title:"Editions",children:ve}),jsxs(Attribute,{title:"Royalties",children:[he,"%"]})]}),jsx$1(Button,{onClick:()=>useMintStore.getState().mint(be),shadow_box:!0,fit:!0,children:"Mint"})]}):jsx$1(motion.div,{style:{width:"100%"},initial:{x:"20%"},animate:{x:0},exit:{x:"20%"},transition:{ease:"easeInOut"},children:jsx$1("p",{children:"No file provided for preview"})})};var oe={exports:{}},W={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ae;function pr(){if(Ae)return W;Ae=1;var re=React,ee=Symbol.for("react.element"),ne=Symbol.for("react.fragment"),ae=Object.prototype.hasOwnProperty,ce=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,le={key:!0,ref:!0,__self:!0,__source:!0};function ue(he,fe,me){var ge,ve={},ye=null,be=null;me!==void 0&&(ye=""+me),fe.key!==void 0&&(ye=""+fe.key),fe.ref!==void 0&&(be=fe.ref);for(ge in fe)ae.call(fe,ge)&&!le.hasOwnProperty(ge)&&(ve[ge]=fe[ge]);if(he&&he.defaultProps)for(ge in fe=he.defaultProps,fe)ve[ge]===void 0&&(ve[ge]=fe[ge]);return{$$typeof:ee,type:he,key:ye,ref:be,props:ve,_owner:ce.current}}return W.Fragment=ne,W.jsx=ue,W.jsxs=ue,W}oe.exports=pr();var Ie=oe.exports;const yr=(re,ee,ne,ae,ce)=>{const le=re.getChannelData(0),ue=ne/(ae+ce),he=Math.floor(le.length/ue),fe=ee/2;let me=[],ge=0;for(let ve=0;ve<ue;ve++){const ye=[];let be=0;const Ee=[];let Ce=0;for(let ke=0;ke<he&&ve*he+ke<re.length;ke++){const Ne=le[ve*he+ke];Ne<=0&&(ye.push(Ne),be++),Ne>0&&(Ee.push(Ne),Ce++)}const Se=ye.reduce((ke,Ne)=>ke+Ne,0)/be,Te={max:Ee.reduce((ke,Ne)=>ke+Ne,0)/Ce,min:Se};Te.max>ge&&(ge=Te.max),Math.abs(Te.min)>ge&&(ge=Math.abs(Te.min)),me.push(Te)}if(fe*.8>ge*fe){const ve=fe*.8/ge;me=me.map(ye=>({max:ye.max*ve,min:ye.min*ve}))}return me},ie=(re,ee,ne,ae,ce,le,ue,he=0,fe=1)=>{const me=ee.height/2,ge=ee.getContext("2d");if(!ge)return;ge.clearRect(0,0,ee.width,ee.height),ce!=="transparent"&&(ge.fillStyle=ce,ge.fillRect(0,0,ee.width,ee.height));const ve=(he||0)/fe;re.forEach((ye,be)=>{const Ee=be/re.length,Ce=ve>Ee;ge.fillStyle=Ce&&ue?ue:le;const Se=be*(ne+ae),Te=me+ye.min,ke=ne,Ne=me+ye.max-Te;ge.beginPath(),ge.roundRect?(ge.roundRect(Se,Te,ke,Ne,50),ge.fill()):ge.fillRect(Se,Te,ke,Ne)})},Rr=reactExports.forwardRef(({blob:re,width:ee,height:ne,barWidth:ae=2,gap:ce=1,currentTime:le,style:ue,backgroundColor:he="transparent",barColor:fe="rgb(184, 184, 184)",barPlayedColor:me="rgb(160, 198, 255)"},ge)=>{const ve=reactExports.useRef(null),[ye,be]=reactExports.useState([]),[Ee,Ce]=reactExports.useState(0);return reactExports.useImperativeHandle(ge,()=>ve.current,[]),reactExports.useEffect(()=>{(async()=>{if(!ve.current)return;if(!re){const Te=Array.from({length:100},()=>({max:0,min:0}));ie(Te,ve.current,ae,ce,he,fe,me);return}const Se=await re.arrayBuffer();await new AudioContext().decodeAudioData(Se,Te=>{if(!ve.current)return;Ce(Te.duration);const ke=yr(Te,ne,ee,ae,ce);be(ke),ie(ke,ve.current,ae,ce,he,fe,me)})})()},[re,ve.current]),reactExports.useEffect(()=>{ve.current&&ie(ye,ve.current,ae,ce,he,fe,me,le,Ee)},[le,Ee]),Ie.jsx("canvas",{ref:ve,width:ee,height:ne,style:{...ue}})});Rr.displayName="AudioVisualizer";const combineVisualizerWithMetadata=async(re,ee)=>new Promise((ne,ae)=>{try{const ce=document.createElement("canvas");ce.width=618,ce.height=382;const le=ce.getContext("2d");if(!le)throw new Error("Could not get canvas context");le.fillStyle="black",le.fillRect(0,0,ce.width,ce.height);const ue=re.querySelector("canvas"),he=re.querySelector("canvas:last-child");if(!ue||!he)throw new Error("Could not find canvas elements");le.drawImage(ue,0,0),le.drawImage(he,0,0),ce.toBlob(fe=>{fe?ne(fe):ae(new Error("Failed to create blob"))},"image/png")}catch(ce){ae(ce)}}),MetadataOverlay=({title:re,artist:ee,mimeType:ne,style:ae})=>{const ce=reactExports.useRef(null);return reactExports.useEffect(()=>{const le=ce.current;if(!le)return;const ue=le.getContext("2d");ue&&(ue.clearRect(0,0,le.width,le.height),ue.fillStyle="white",ue.font="16px monospace",ue.globalAlpha=.8,ue.fillText(`Title: ${re}`,15,25),ue.fillText(`Wallet: ${ee}`,15,45),ue.fillText(`${new Date().toISOString()}`,15,65),ue.fillText(`${ne}`,15,85),ue.fillText(`Mint Contract: ${HEN_CONTRACT_FA2} (HEN/TEIA)`,15,370))},[re,ee,ne]),jsx$1("canvas",{ref:ce,width:618,height:382,style:{...ae,pointerEvents:"none"}})},FieldError=reactExports.memo(({error:re,text:ee})=>{const ne=classNames$1({[local_styles.error]:!0,[local_styles.text_field_error]:ee});return jsx$1("p",{className:ne,children:re})}),FormFields=({value:re,field:ee,error:ne,register:ae,control:ce})=>{const le=ee.name,{watch:ue}=useFormContext(),[he,fe]=useUserStore(Ce=>[Ce.address,Ce.userInfo],shallow),[me,ge]=reactExports.useState(!1),[ve,ye]=reactExports.useState(null),be=reactExports.useRef(null),Ee=(Ce,Se)=>Ce!=null&&Ce.name?`${Ce.name} (${Se})`:Se;switch(ee.type){case"text":case"number":return jsxs(Input$2,{className:local_styles.field,name:le,type:ee.type,label:ee.label,defaultValue:ee.defaultValue,placeholder:ee.placeholder,...ae(le,ee.rules),children:[jsx$1(Line,{}),ne&&jsx$1(FieldError,{text:!0,error:ne.message})]});case"textarea":return jsxs(Textarea$1,{className:local_styles.field,label:ee.label,placeholder:ee.placeholder,defaultValue:ee.defaultValue,...ae(le,ee.rules),children:[jsx$1(Line,{}),ne&&jsx$1(FieldError,{text:!0,error:ne.message})]});case"typed-textarea":return jsxs(Textarea$1,{className:local_styles.typed_field,label:ee.label,placeholder:ee.placeholder,defaultValue:ee.defaultValue,...ae(le,ee.rules),children:[jsx$1(Line,{}),ne&&jsx$1(FieldError,{text:!0,error:ne.message})]});case"select":case"select-search":return jsx$1(Controller,{control:ce,defaultValue:ee.defaultValue,name:le,rules:ee.rules,render:({field:{onChange:Ce,value:Se,name:Te,ref:ke}})=>jsx$1(Select,{inputRef:ke,className:local_styles.field,options:ee.options,value:Se,search:ee.type==="select-search",label:ee.label,placeholder:ee.placeholder,defaultValue:ee.defaultValue,onChange:Ce})});case"checkbox":return jsx$1(Controller,{control:ce,defaultValue:ee.defaultValue,name:le,rules:ee.rules,render:({field:{onChange:Ce,value:Se,name:Te,ref:ke}})=>jsx$1(Checkbox$1,{ref:ke,className:local_styles.field,label:ee.label,defaultValue:ee.defaultValue,checked:Se,onCheck:Ne=>Ce(Ne)})});case"file":return jsx$1(Controller,{control:ce,defaultValue:ee.defaultValue,name:le,rules:ee.rules,render:({field:{onChange:Ce,value:Se,name:Te,ref:ke}})=>{var Ne;return jsx$1(Upload,{ref:ke,name:Te,file:Se==null?void 0:Se.file,label:ee.label,placeHolder:Se?(Ne=Se==null?void 0:Se.file)==null?void 0:Ne.name:ee.placeHolder,className:local_styles.field,onChange:Ce,allowedTypesLabel:ALLOWED_FILETYPES_LABEL,children:ne&&jsx$1(FieldError,{error:ne.message})})}});case"cover-file":return jsx$1(Controller,{control:ce,defaultValue:ee.defaultValue,name:le,rules:ee.rules,render:({field:{onChange:Ce,value:Se,name:Te,ref:ke}})=>{var Le,je,Ge;const Ne=ue(Se),Fe=Ne&&AUDIO_MIME_TYPES.includes((Le=Ne.artifact)==null?void 0:Le.mimeType),De=()=>{var qe;if(!me&&((qe=Ne==null?void 0:Ne.artifact)!=null&&qe.reader)){const Ue=processAudioForVisualizer(Ne.artifact.reader);ye(Ue)}ge(!0)},Oe={position:"relative",width:"100%",maxWidth:"618px",aspectRatio:"618/382",backgroundColor:"black",overflow:"hidden"},Re={position:"absolute",top:0,left:0,width:"100%",height:"100%"},Be=async()=>{var qe,Ue;if(be.current)try{const ze=await combineVisualizerWithMetadata(be.current,Ne),He=URL.createObjectURL(ze),Ye=document.createElement("a");Ye.href=He,Ye.download=`${((qe=Ne.artifact)==null?void 0:qe.name)||"audio"}_cover.png`,document.body.appendChild(Ye),Ye.click(),document.body.removeChild(Ye),URL.revokeObjectURL(He);const Xe=new File([ze],`${((Ue=Ne.artifact)==null?void 0:Ue.name)||"audio"}_cover.png`,{type:"image/png"});Ce({file:Xe})}catch(ze){console.error("Failed to save image:",ze)}};return jsxs(Fragment,{children:[Fe&&!me&&jsx$1(Button,{className:local_styles["visualizer-image-download-button"],onClick:()=>De(),children:"Generate Audio Visualization"}),Fe&&me&&jsxs("div",{className:local_styles.field,children:[jsx$1("p",{children:"Generated Image (Save and Upload Manually)"}),jsx$1("div",{ref:be,style:Oe,children:jsxs("div",{style:Re,children:[jsx$1(Rr,{blob:ve,width:618,height:382,backgroundColor:"black",waveColor:"white",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),jsx$1(MetadataOverlay,{title:ue("title")||"Untitled",artist:Ee(fe,he),mimeType:(je=Ne==null?void 0:Ne.artifact)==null?void 0:je.mimeType,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1}})]})}),jsx$1(Button,{className:local_styles["visualizer-image-download-button"],onClick:Be,children:"Download As File"})]}),jsx$1(Upload,{ref:ke,name:Te,file:Se==null?void 0:Se.file,label:ee.label,placeHolder:Se?(Ge=Se==null?void 0:Se.file)==null?void 0:Ge.name:ee.placeHolder,className:local_styles.field,onChange:Ce,allowedTypesLabel:ALLOWED_COVER_FILETYPES_LABEL,children:ne&&jsx$1(FieldError,{error:ne.message})})]})}});case"customCopyrightForm":return jsx$1(Controller,{control:ce,name:"customLicenseData",defaultValue:ee.defaultValue,rules:ee.rules,render:({field:{onChange:Ce,value:Se}})=>jsx$1(CustomCopyrightForm,{onChange:Ce,value:Se,defaultValue:ee.defaultValue})});default:return jsxs("p",{children:["Unknown field ",ee.label," of type ",ee.type]})}};function Form({fields:re,defaultValues:ee,children:ne,onSubmit:ae,onReset:ce}){const{register:le,control:ue,handleSubmit:he,watch:fe,reset:me,formState:{errors:ge}}=useFormContext();return jsxs("form",{style:{width:"100%"},onSubmit:he(ae),children:[re.map(ve=>{const ye=ve.watch?fe(ve.name):null;return jsx$1(FormFields,{register:le,value:ye,control:ue,field:{...ve,defaultValue:ee==null?void 0:ee[ve.name]},error:lodashExports.get(ge,ve.name)},ve.name)}),ne,jsx$1(Button,{onClick:()=>{ce==null||ce(),me(ee)},type:"button",children:"Clear Fields"}),jsx$1(Button,{fit:!0,shadow_box:!0,disabled:Object.keys(ge).length>0,children:"Submit"})]})}const Form$1=reactExports.memo(Form),fields=[{label:"Title",type:"text",placeholder:"Max 500 characters (optional)",rules:{maxLength:{value:500,message:"Title must be 500 characters or less"}}},{label:"This is a text mint",name:"isTyped",type:"checkbox",watch:!0},{label:"Description",type:"textarea",enable_if:"showArtifact",placeholder:"Max 5000 characters (optional)",rules:{value:5e3,message:"Description must be 5000 characters or less"}},{label:"Tags",type:"text",placeholder:"Comma separated. example: illustration, digital (optional)",rules:{setValueAs:re=>lodashExports.join(lodashExports.uniq(re.split(",").map(ee=>ee.trim()).filter(ee=>ee)),",")}},{label:"Editions",type:"number",placeholder:`No. editions, 1-${MAX_EDITIONS}`,rules:{required:"You need at least 1 edition",min:{value:1,message:"You need at least 1 edition"},max:{value:MAX_EDITIONS,message:`You can only mint ${MAX_EDITIONS} editions at once.`}}},{label:"Royalties",type:"number",placeholder:`After each sale (between ${MIN_ROYALTIES}-${MAX_ROYALTIES}%)`,rules:{required:`Royalties cannot be left empty, choose a value between ${MIN_ROYALTIES}% and ${MAX_ROYALTIES}%`,min:{value:MIN_ROYALTIES,message:`Royalties must be greater than ${MIN_ROYALTIES}%`},max:{value:MAX_ROYALTIES,message:`Royalties must be less than ${MAX_ROYALTIES}%`}}},{label:"License",placeholder:"(optional)",type:"select",alt:"license selection",options:LICENSE_TYPES_OPTIONS},{label:"Custom License",name:"customLicenseData",enable_if:"useCustomLicense",type:"customCopyrightForm"},{label:"Language",placeholder:"(optional)",rules:{valueAs:re=>re.value},type:"select-search",alt:"token language",options:LANGUAGES_OPTIONS},{label:"NSFW",type:"checkbox"},{label:"Photo Sensitive Seizure Warning",name:"photosensitive",type:"checkbox"},{label:"Monospace Font Required",name:"isMonoType",type:"checkbox",enable_if:"isTyped",watch:!0},{label:"Artifact",placeHolder:"Upload OBJKT",name:"artifact",type:"file",watch:!0,enable_if:"showArtifact",rules:{required:"You did not select a valid file"}},{label:"Typed Art Input",name:"typedinput",type:"typed-textarea",watch:!0,enable_if:"isTyped",rules:{required:"Typed art mints cannot be empty."}},{label:"Cover Image",placeHolder:"Upload Cover image",name:"cover",type:"cover-file",watch:!0,enable_if:"needsCover",rules:{required:"No cover provided"}}],getFields=re=>{const ee=Object.keys(re);return fields.map(ne=>(ne.name=ne.name||lodashExports.kebabCase(ne.label),ne)).filter(ne=>ne.enable_if&&ee.includes(ne.enable_if)?lodashExports.get(re,ne.enable_if):!0)},CollabSwitch=({address:re,name:ee,className:ne})=>{const[ae,ce]=reactExports.useState([]),[le,ue]=reactExports.useState(!1);reactExports.useEffect(()=>{fetchGraphQL(getCollabsForAddress,"GetCollabs",{address:re}).then(({data:fe,errors:me})=>{if(fe){const ge=fe.split_contracts;ce(ge||[])}})},[re]);const he=classNames$1(collabStyles.flex,collabStyles.flexBetween,ne);return jsxs(Fragment,{children:[ae.length>0&&jsxs("div",{className:he,children:[jsxs("p",{children:[jsx$1("span",{style:{opacity:.5},children:"minting as"})," ",ee]}),jsx$1(Button,{shadow_box:!0,onClick:()=>ue(!le),children:le?"Cancel":"Change"})]}),le&&jsx$1(CollabContractsOverview,{showAdminOnly:!0})]})},fundsWarning="_fundsWarning_dq9zo_216",attributes_checkboxes="_attributes_checkboxes_dq9zo_222",mint_form="_mint_form_dq9zo_240",field="_field_dq9zo_245",line="_line_dq9zo_249",collab_bar="_collab_bar_dq9zo_253",styles$3={fundsWarning,attributes_checkboxes,mint_form,field,line,collab_bar},processTypedInput=async re=>{if(!re.typedinput)throw Error("No typedinput");const ee=new Blob([re.typedinput],{type:"text/plain;charset=utf-8"}),ne=new File([ee],"typed.txt",{type:"text/plain",lastModified:Date.now()});re.artifact=await convertFileToFileForm(ne),re.artifact.reader=URL.createObjectURL(ee);const ae=await generateTypedArtCoverImage(re.typedinput,re.isMonoType===!0);re.cover=await convertFileToFileForm(ae);let ce=[],le=[];if(re.tags&&(ce=re.tags.split(","),le=ce.map(ue=>ue.toLowerCase())),re.isMonoType&&!le.includes("monospace"))ce=[...ce,"monospace"],re.tags=ce.join(",");else if(!re.isMonoType&&le.includes("monospace")){const ue=ce.filter(he=>he.toLowerCase()!=="monospace").join(",");re.tags=ue}return re.description=re.typedinput,re};function MintForm(){const{artifact:re,license:ee,minterName:ne,address:ae,balance:ce,isTyped:le,typedinput:ue,isMonoType:he}=useOutletContext(),fe=useNavigate(),[me,ge]=reactExports.useState(!1),[ve,ye]=reactExports.useState(!1),[be,Ee]=reactExports.useState(null),Ce=useMintStore(Ne=>Ne),Se=reactExports.useMemo(()=>getFields({needsCover:me,isTyped:ve,showArtifact:!ve,useCustomLicense:(ee==null?void 0:ee.value)==="custom"}),[me,ve,ee==null?void 0:ee.value]);reactExports.useEffect(()=>{var Fe;re&&ge(!((Fe=re==null?void 0:re.mimeType)!=null&&Fe.startsWith("image"))&&!AUTO_GENERATE_COVER_MIMETYPES.includes(re==null?void 0:re.mimeType)),ye(le);let Ne=document.querySelector("textarea[name='typedinput']");Ne&&(Ne.style.fontFamily=he?"Iosevka, monospace":"Source Sans Pro, sans-serif")},[re,le,he,Se]),reactExports.useEffect(()=>{ve?Te(ue):Ee(void 0)},[ve,ue,he]);const Te=async Ne=>{try{const Fe=await generateTypedArtCoverImage(Ne,he);Ee(Fe)}catch(Fe){console.error("Error generating cover image preview:",Fe.message),Ee(null)}},ke=async Ne=>{var Fe,De,Oe;try{if(!AUTO_GENERATE_COVER_MIMETYPES.includes((Fe=Ne.artifact)==null?void 0:Fe.mimeType)&&Ne.artifact){if((De=Ne.artifact.file)!=null&&De.size&&((Oe=Ne.artifact.file)==null?void 0:Oe.size)/1e6>2e3)throw new Error(`File too big: ${Ne.artifact.file.size/1e6}mb`);const Re=window.URL||window.webkitURL;Ne.artifact.reader=Re.createObjectURL(Ne.artifact.file)}else Ne.typedinput?Ne=await processTypedInput(Ne):(Ne.artifact.mimeType==="audio/midi"||Ne.artifact.mimeType==="audio/mid")&&(Ne=await processMidiCover(Ne));useMintStore.setState({...Ne,isValid:!0}),fe("preview")}catch(Re){useModalStore.getState().show(Re.message)}};return jsxs(motion.div,{style:{width:"100%"},initial:{x:"-20%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-20%",opacity:0},transition:{ease:"easeInOut"},children:[jsx$1(CollabSwitch,{address:ae,name:ne}),ce>0&&ce/1e6<.7&&jsx$1("div",{className:styles$3.fundsWarning,children:jsx$1("p",{children:`⚠️ You seem to be low on funds (${ce/1e6}ꜩ), mint will probably fail...`})}),jsx$1(Form$1,{defaultValues:Ce,onSubmit:ke,onReset:useMintStore.getState().reset,fields:Se,children:be&&jsx$1("img",{className:local_styles.typed_preview,src:URL.createObjectURL(be),alt:"Typed Art Preview"})})]})}async function fetchList(re){return(await axios.get(re)).data.map(ne=>ne.toString())}const lists={"NSFW List":"https://lists.teia.art/nsfw.json","Photo Sensitive List":"https://lists.teia.art/photosensitive.json","Restricted OBJKTs (deprecated)":"https://lists.teia.art/restricted_objkt.json"};function ListsFeed(){const[re,ee]=reactExports.useState(""),[ne,ae]=reactExports.useState(""),{data:ce}=useSWR(["/feed/lists",ne],async()=>fetchList(ne),{revalidateIfStale:!1,revalidateOnFocus:!1});return jsxs(Fragment,{children:[jsx$1("div",{style:{display:"flex",gap:"1em"},children:Object.keys(lists).map(le=>jsx$1(Button,{box:!0,onClick:()=>{ae(lists[le]),ee(lists[le])},children:le}))}),jsxs("div",{style:{display:"flex",marginTop:"25px",alignItems:"center",alignContent:"center",justifyContent:"center",width:"100%"},children:[jsx$1(Input$2,{placeholder:"link to a json list of tokens",type:"text",value:re,onChange:ee}),jsx$1(Button,{onClick:()=>{ae(re)},shadow_box:!0,children:"Search"})]}),ne&&jsx$1(TokenCollection,{disable:!ce,label:"Lists Feed",namespace:"lists",variables:{ids:ce},swrParams:[ne],query:distExports.gql`
            ${BaseTokenFieldsFragment}
            query fromList($ids: [String!], $limit: Int!) {
              tokens(
                where: { token_id: { _in: $ids } }
                order_by: { minted_at: desc }
                limit: $limit
              ) {
                ...baseTokenFields
              }
            }
          `})]})}const buttons$2="_buttons_1b0qk_216",codeofconduct="_codeofconduct_1b0qk_221",styles$2={buttons:buttons$2,codeofconduct},ReactComponent$2=function(re){return Object.keys(re).forEach(function(ne){re[ne]}),React.createElement("div",null,React.createElement("h1",null,React.createElement("strong",null,"Code of Conduct")),React.createElement("p",null,"Teia is a community of artists, creators, and collectors from all around the world, who come together to grow and inspire others. All participants in the community are expected to act lawfully, honestly, ethically, and in the best interest of the community. All users are expected to follow the rules and guidelines laid out in this document, acting against this CoC in any of Teias spaces might result in account restrictions or bans."),React.createElement("h2",null,"1. ",React.createElement("strong",null,"Contribute and Help Improve the Community")),React.createElement("ul",null,React.createElement("li",null,"Look for ways to contribute and find positive solutions. Stay open minded and empathetic around areas of improvements. And take initiative to help out where you can."),React.createElement("li",null,"Try to share your knowledge with the community."),React.createElement("li",null,"Your participation matters. If you feel that you or the group you identify with is underrepresented or does not have a voice in the community, know that you are welcome here. Be the first to fill that gap, invite your peers, and make yourself heard."),React.createElement("li",null,"Bugs and security flaws in the platform, blockchain or smart contract should be disclosed responsibly, according to regulations and best practices regarding those procedures.")),React.createElement("h2",null,"2. ",React.createElement("strong",null,"Unacceptable Behavior")),React.createElement("p",null,"We do not condone harassment or abuse against any member in any community environment, online or offline, for any reason. This includes the usage of Teia Infrastructure and smartcontracts related to Teia. Abusive actors can get banned from any Teia related spaces."),React.createElement("p",null,"People with significant experience and/or connections within the community are expected to behave with special care with regards to their privilege. i.e. negative comments and behaviour from them towards others may carry an unintended backlash or harm."),React.createElement("h3",null,"2.1. Harassment Includes"),React.createElement("ul",null,React.createElement("li",null,"Targeting individuals in a manner that makes them feel uncomfortable, unwelcome, or afraid."),React.createElement("li",null,"offensive verbal, visual or text based comments related to gender, age, sexual orientation, disability, neurotype, health related issues, income level, mental health status, trauma, physical appearance, body size, race, ethnicity, religion."),React.createElement("li",null,"Deliberate intimidation, stalking, following, sustained disruption of conversation."),React.createElement("li",null,"Violence, threats of violence or violent language directed against another person."),React.createElement("li",null,"Posting or displaying sexually explicit or violent material outside of the context of artistic expression."),React.createElement("li",null,`Posting or threatening to post other people's personally identifying information ("doxxing").`),React.createElement("li",null,"Inappropriate photography or recording."),React.createElement("li",null,"Inappropriate physical contact, unwelcomed sexual attention or advances, inappropriate touching, groping. You should always have someone's active consent before touching them.")),React.createElement("h3",null,"2.2. Abuse Includes"),React.createElement("ul",null,React.createElement("li",null,"Using one's authority, reputation or knowledge to intimidate or threaten others."),React.createElement("li",null,"Maliciously causing someone to doubt their own perceptions, senses, or understanding with the objective to win an argument or force someone to behave the way you want.")),React.createElement("h3",null,"2.3. Other Unacceptable Behavior"),React.createElement("ul",null,React.createElement("li",null,"Impersonating others and plagiarizing"),React.createElement("li",null,"Spamming or vandalizing any of Teias spaces, online or offline, on-chain or off-chain."),React.createElement("li",null,"Scamming and social engineering."),React.createElement("li",null,"Sustained disruption of community events, including talks and presentations."),React.createElement("li",null,"Advocating for, or encouraging any of the above behavior.")),React.createElement("h2",null,"3. Consequences of Unacceptable Behavior"),React.createElement("p",null,"Unacceptable behavior from any community member, including sponsors and those with decision-making authority, will not be tolerated."),React.createElement("p",null,"Anyone asked to stop unacceptable behavior is expected to comply immediately."),React.createElement("p",null,"If a community member engages in unacceptable behavior, the community organizers may take any action they deem appropriate, up to and including a temporary ban or permanent expulsion from the platforms and spaces associated with the Teia community without warning (and without refund in the case of a paid event)."),React.createElement("p",null,"If a community manager does not actively investigate any reported and unacceptable behavior fairly, they will need to be held responsible and might be removed from their position."),React.createElement("h2",null,"4. ",React.createElement("strong",null,"Fairplay on the Marketplace")),React.createElement("ul",null,React.createElement("li",null,"Collectors should voluntarily refrain from using automated tools for collecting, from  hindering other participants from collecting and from interfering with the site and the smart contracts in any way."),React.createElement("li",null,"Collectors should voluntarily refrain from collecting excessively such as collecting large amounts of a “free” or low priced edition. Participants should apply their discretion as to what counts as “excessive”."),React.createElement("li",null,"Artists have certain moral rights to work they create. We believe Art and also NFTs are more than simple financial assets and should be treated as such. owners of tokens should refrain from using NFT mechanisms such as burning in ways that could impact the creators moral rights to their work or reputation or endager the digital artwork/concept without the creators consent."),React.createElement("li",null,"Users are expected to refrain from any market manipulation such as wash trading and conspiring to artificially increase the perceived demand or price."),React.createElement("li",null,"Users should voluntarily refrain from minting other peoples work even if consent has been given by the original creator. While there are legitimate reasons for minting pieces by other artists for them (such as gallery projects) this goes against the spirit of NFTs and has proven to be problematic for various reasons. Gallery projects are asked to mint other artists work via Teia’s collab contracts with the main creator as co-collaborator.")),React.createElement("h2",null,"5. ",React.createElement("strong",null,"Reporting Guidelines")),React.createElement("p",null,'If you are subject to or witness unacceptable behavior, or have any other concerns, please notify a community organizer as soon as possible either via the report form, the discord channel #report or a mail to "info@teia.art"',React.createElement("br",null),"For reporting copymints, please use the discord channel #report-copyminters or send a mail to “info@teia.art”. If you report accounts via mail, please make sure to include: The full longform Tezos address of the reported account, and evidence of unacceptable behavior.",React.createElement("br",null),"Community moderators are available to help those experiencing unacceptable behavior feel safe.",React.createElement("br",null),"In the context of in-person events, organizers will also provide escorts as desired by the person experiencing distress.",React.createElement("br",null),"If you feel you have been falsely or unfairly accused of violating this Code of Conduct, you should notify Teia with a concise description of your grievance via mail. Your grievance will be handled in accordance with our existing governing policies."),React.createElement("h2",null,"6. ",React.createElement("strong",null,"Content Rules and Teia Profile Restrictions")),React.createElement("p",null,"The Teia community reserves its right to moderate content and ban/restrict wallets from the marketplace to make Teia a fair and safe experience for all."),React.createElement("p",null,"The content moderation team operates on the following Terms and works voluntarily to protect TEIA collectors and artists from copyminting and other types of malicious activity."),React.createElement("p",null,"Please understand their role and that processes like this do generate mistakes. The team investigates when alerted through the #report-copyminters channel in the TEIA Discord. Please respect their work, and help them by being courteous and accurate with the information that will help your inquiry."),React.createElement("p",null,"Various other Tezos marketplaces also use the TEIA restricted list of accounts, which means that once TEIA restricts an account, other NFT marketplaces will likely follow suit. Note that other marketplaces, even those using the same minting contracts, may have different Terms and Codes of Conduct, and so account restrictions may sometimes differ between platforms that display the same works."),React.createElement("p",null,"Since TEIA is a decentralized application, restricted OBJKTs are only restricted on Teia's user interface, meaning that they are still available through APIs and on-chain data."),React.createElement("h3",null,"6.1. Types of Profile Restrictions"),React.createElement("p",null,React.createElement("strong",null,"“Restricted account”")," Accounts that TEIA restricts are labeled “restricted account,” and OBJKTs that a restricted account has minted are labeled “restricted OBJKT” in the marketplace."),React.createElement("p",null,React.createElement("strong",null,"“Account under review”")," Accounts that are marked as “under review” have been flagged for further investigation or minor misbehaviour or general red flags. Accounts under review can still trade on the Teia UI. Users whose account has been put under review are asked to come to the #report-copyminters channel on the Teia discord for clarification."),React.createElement("h3",null,"6.2. Copyright and Intellectual Property"),React.createElement("p",null,"As artists and collectors of art, we want to acknowledge and protect intellectual property as it is crucial for our integrity and work but we also acknowledge that some forms of art need to use the works of others (i.e. remixes, tributes, quotes)."),React.createElement("p",null,React.createElement("em",null,"“Artists should avoid uses of existing copyrighted material that do not generate new artistic meaning, being aware that a change of medium, without more, may not meet this standard.”"),"*"),React.createElement("p",null,React.createElement("em",null,"“The use of a preexisting work, whether in part or in whole, should be justified by the artistic objective, and artists who deliberately repurpose copyrighted works should be prepared to explain their rationales both for doing so and for the extent of their uses”"),"[*]"),React.createElement("p",null,React.createElement("em",null,"“Artists should avoid suggesting that incorporated elements are original to them, unless that suggestion is integral to the meaning of the new work.”")," [*]"),React.createElement("p",null,"We suggest not to mint content that is in the public domain or under other similar licenses that allow reselling without creative changes or using it as a way of artistic expression."),React.createElement("p",null,"While some content is free to be used and if specified in the license even commercially, there are problematic implications that come with minting unchanged content and selling it as a NFT, such as occurring double mints if multiple people mint the same public domain content (see Terms & Conditions)."),React.createElement("p",null,"When creating a tribute piece to somebody else’s work, an artist should get written permission from the creator of the original, clearly label it as a hommage and name the original creator, unless there is an articulable aesthetic basis for not doing so (i.e. pastiche / sampling / collage / satire / public domain source)."),React.createElement("p",null,"[*] taken from page 11 of the “Code of Best Practices in Fair Use for the Visual Arts” by Patricia Aufderheide and Peter Jaszi, 2015)"),React.createElement("h3",null,"6.3. Proper Content Classification"),React.createElement("p",null,React.createElement("strong",null,"NSFW content:")," explicit, overtly sexual or violent imagery or potentially disturbing (“Not safe for work”) material should always be tagged as “NSFW” in the provided check box in the minting interface. This content is not banned but will be moderated differently on the platform."),React.createElement("p",null,React.createElement("strong",null,"Photosensitive content:")," Content that contains flashing/stroboscopic animations may cause harm to users and must be tagged accordingly with the checkbox provided in the minting UI to help make Teia a safe space for its users."),React.createElement("h3",null,"6.4. Possible Reasons for an account restriction:"),React.createElement("p",null,React.createElement("strong",null,"Copyminting"),": Minting another artist(s) work without their consent. Copyminting can also include works based on another artist's work, with minimal filters or modifications applied"),React.createElement("p",null,React.createElement("strong",null,"Double minting"),": Minting the same work more than once without artistic merit or an apparent reference for prospective buyers. Of every piece of content there should be only one NFT. Doublemints on multiple marketplaces, contracts or blockchains are treated as copymints. For pieces that are double-mints on the hicetnunc minting contract, this rule is enforced for objkts minted after 01.01.2022."),React.createElement("p",null,React.createElement("strong",null,"Infringed copyright"),": The use of artists' work in part or whole in a way that is not in line with the license/copyright of said work or not defendable through artistic merit."),React.createElement("p",null,React.createElement("strong",null,"Plagiarism:")," Implying authorship of work created by others; i.e. by copying, reproducing or using other peoples work as a base without clearly citing the source and giving credit within the work itself or within the description associated with the NFT. Exceptions can be made if the artistic merit lies within the practice of repurposing content."),React.createElement("p",null,React.createElement("strong",null,"Clear association with confirmed restricted accounts"),": Ample evidence of being a person that engaged in restricted behavior. i.e. by funding (sending an account its initial funds) of restricted accounts, being funded by a restricted account or other clear evidence of association with restricted accounts."),React.createElement("p",null,React.createElement("strong",null,"Market Manipulation"),": for example buying one's own tokens to artificially increase prices (“washtrading”)."),React.createElement("p",null,React.createElement("strong",null,"Freeloading"),": abusing the services or infrastructure of Teia in ways that put the platform in danger. Ie by minting excessive amounts of tokens in short periods of time. Cases like this don't necessarily result in a ban but Teia might need to reduce the impact on its infrastructure ie:. By unpinning the content from Teia's IPFS node."),React.createElement("p",null,React.createElement("strong",null,"Illegal Content:")," Minting material that glorifies human rights violations or is solely pornographic without artistic expression or might otherwise put Teia in legal jeopardy. This applies especially but is not limited to cases of copied or slightly modified NSFW content stolen from third parties and depictions of sexualized underaged characters. NSFW material is  generally allowed if classified properly."),React.createElement("p",null,React.createElement("strong",null,"Public domain content:")," Accounts that mint public domain content or content under C00 or similar licenses without changes or adding new artistic meaning might get restricted or those tokens might get restricted from getting sold, especially if they are not clearly indicating the original author and license in the description. This is due to the complexity to verify if such NFTs are complying with the license of the original content and the copymint team having only limited resources to do that."),React.createElement("p",null,"This rule might get lifted in the future with the implementation of new systems of verification or moderation. If your artistic practice involves using public domain work without change, it might help to notify the copymint team prior to minting and discussing the individual case."),React.createElement("p",null,React.createElement("strong",null,"Missing classification of NSFW/Photosensitive content:")," Teia might restrict accounts that mint NSFW or photosensitive material without properly classifying it upon mint, the team can also classify accounts or individual pieces after the mint."),React.createElement("p",null,React.createElement("strong",null,"Exploiting the marketplace contracts:")," For example by circumventing royalties."),React.createElement("p",null,React.createElement("strong",null,"Gambling and scamming"),": selling/using NFT tokens as a tool for scamming or gambling (i.e. prize scamming)."),React.createElement("p",null,React.createElement("strong",null,"Violating the Terms of Service or Code of Conduct in other ways:")," Mainly if it is overtly abusive to another group, invokes violence, or intimidates, harasses or impersonates."),React.createElement("h3",null,"6.5. Procedure if your Teia account has been restricted"),React.createElement("p",null,"If you are banned, please don’t create new accounts to circumvent the account restriction but request for an unban first, those accounts might get automatically banned. If you want to keep on minting, please get in touch with the content moderation team first and discuss the way forward."),React.createElement("p",null,"Contesting restrictions can be made through the #report-copyminters channel in the TEIA Discord. It’s important to notice that errors are possible at this stage, and we apologize for such cases. We ask users to direct such issues exclusively through the channel."),React.createElement("p",null,"Unfortunately, the Content moderation team has to begin the process with a lack of trust, and you have to convince them that you are trustworthy. The most straightforward way to overturn a mistaken restriction is to engage with the team politely and honestly."),React.createElement("p",null,"Provide your account address and the reason for the dispute. Be prepared to show works in progress or versions of a work in question so the team can verify and determine if the restriction is mistaken. Having a well-used Twitter account, work is shown on your website, Instagram, Flickr, Tumblr, etc., that is your own will help."),React.createElement("p",null,"If the copymint team agrees that the account does not violate the TEIA CoC, the account will have its restricted or under-review status removed. It takes about 5 mins for any changes to the restricted list to go live."))};function CodeOfConduct(){return jsx$1(Page,{title:"codeofconduct",children:jsx$1("div",{className:styles$2.codeofconduct,children:jsx$1(ReactComponent$2,{})})})}const buttons$1="_buttons_1d9qx_216",corevalues="_corevalues_1d9qx_221",styles$1={buttons:buttons$1,corevalues},ReactComponent$1=function(re){return Object.keys(re).forEach(function(ne){re[ne]}),React.createElement("div",null,React.createElement("h1",null,"TEIA's Core Values"),React.createElement("p",null,"TEIA is an open, digital platform of ideas and works of creativity. It is an artwork made of artworks; Artists and collectors coming together as equal lovers of creativity in order to emancipate and democratize art."),React.createElement("p",null,"We want to elevate art, no matter how known or unknown the artist. We want to protect our art. We want to fill the blank canvas that is TEIA."),React.createElement("p",null,"TEIA is a self sustaining organization managed by the community for the community."),React.createElement("p",null,"TEIA is built and improved by its participants. We believe that we as a collective can be bigger than the sum of our members. We strive to improve TEIA in a decentralised manner. That means we can build and evolve everything at once, everything follows chaotic growth. This infinite process might at times look disorganized from the outside looking in, but it isn't: The community organizes itself; chaos creates beauty."),React.createElement("p",null,"We want, however, to protect and preserve the spirit of Teia. Those core values should guide our decisions moving forward in this rapidly evolving space. This manifesto, collectively written, tries to put this spirit into words."),React.createElement("h2",null,"1. ",React.createElement("strong",null,"Inclusivity")),React.createElement("h3",null,"1.1. We believe in a community for all users and all art forms:"),React.createElement("ul",null,React.createElement("li",null,"Inclusive for everyone, no matter your race, ethnicity, religion, class, culture, national background and citizenship status, sexual orientation, gender identity and expression, age, or mental or physical disability, neurotype, health related issues, income level, mental health status or trauma"),React.createElement("li",null,"Inclusive for all participants, no matter the social/economic status."),React.createElement("li",null,"inclusive for all art forms and mediums including but not limited to: digital, analog, graphics, vr, video, audio, music, fiber, physical and the ones to come.")),React.createElement("p",null,"We want to reach a parity in voice and contribution between people from all communities and sorts of privileges and locations. This needs to be reached through concrete action and leveraging power."),React.createElement("hr",null),React.createElement("h2",null,"2. ",React.createElement("strong",null,"Respect")),React.createElement("p",null,"We believe in a community that respects one another’s dignity, ideas, thoughts and art."),React.createElement("p",null,"We respect our community and value each person's contribution."),React.createElement("p",null,"We understand that this is, and always will be, a work in progress and we are empathetic and patient with this process."),React.createElement("hr",null),React.createElement("h2",null,"3. ",React.createElement("strong",null,"Community/Solidarity")),React.createElement("p",null,"We are an egalitarian community. Our community is not about rank, status, or popularity. It’s about contributing, building together, fostering connections, encouraging community interactions, providing support, and growing together."),React.createElement("p",null,"The community must ensure the freedom of the individual, but this freedom ends where it endangers the well-being of the community."),React.createElement("p",null,"We want to:"),React.createElement("ul",null,React.createElement("li",null,"Avoid displaying indications of rank, status, or popularity but are open to celebrating contributions of time and skill."),React.createElement("li",null,"Build what benefits the whole community, not just a select few with the exception of accessibility features that enable underserved members."),React.createElement("li",null,"Create systems that are inclusive to the community as a whole."),React.createElement("li",null,"Avoid systems that could be exclusive in any shape or form."),React.createElement("li",null,"Protect the community and their intellectual property from threats.")),React.createElement("hr",null),React.createElement("h2",null,"4. ",React.createElement("strong",null,"Decentralization")),React.createElement("ul",null,React.createElement("li",null,"We believe in shared ownership on the platform, no one should have exclusive rights over others."),React.createElement("li",null,"We believe in a platform that radically dismantles and democratizes the established art market and methods of distribution."),React.createElement("li",null,"Teia should remain open source. We aim to create open solutions and look for ways to limit gatekeeping and share knowledge wherever possible."),React.createElement("li",null,"We want to build a transparent platform that facilitates a rich ecosystem and integrates with the world around it. We encourage third party additions/tools for the Teia core as long they stay true to the spirit of Teia."),React.createElement("li",null,"We want to build a platform where important decisions are voted on in an open and fair process before being implemented. We want to:",React.createElement("ul",null,React.createElement("li",null,"Encourage and secure open and free discussions around community voting."),React.createElement("li",null,"Give all users fair rights in this voting process."),React.createElement("li",null,"Encourage and help all members to participate in community votes."))),React.createElement("li",null,"The community should respect and encourage all opinions, even if they are against the consensus. The individual should respect consensus reached by the community in the same way.")),React.createElement("hr",null),React.createElement("h2",null,"5. ",React.createElement("strong",null,"Simplicity and Accessibility")),React.createElement("ul",null,React.createElement("li",null,"Teia should aim to be as accessible as possible. The creation of an account should be simple and fast and possible anonymously and without providing any personal information."),React.createElement("li",null,"Teia should not store or collect personal information about its members beyond their tezos addresses and user name and optional linked accounts."),React.createElement("li",null,"We want to provide a simple and easy-to-use platform for all users, including those with accessibility needs."),React.createElement("li",null,"We want to help those without access to the platform to get the ability to participate. (i.e. via donations for people who can’t afford to mint)"),React.createElement("li",null,"We believe in providing access to useful tools for all members of the community.")),React.createElement("hr",null),React.createElement("h2",null,"6. ",React.createElement("strong",null,"Sustainability")),React.createElement("p",null,"We believe in sustainability. With technology evolving, we as a community need to evolve too and build towards a more viable future. We shall be mindful of the consequences of our actions and evaluate our decisions with that in mind, always pursuing the least destructive path."),React.createElement("p",null,"Things that may look responsible now may be problematic for us and everyone in the future. Lifecycle impacts must be considered."),React.createElement("p",null,"With that in mind, we should always be open to the possibility of changing the technological foundations of Teia in order to ensure it stays sustainable, transparent and accessible to everyone."),React.createElement("p",null,"Teia should find decentralised and long-lasting solutions for storing files associated with Tokens minted on Teia. The files need to always be accessible to the public no matter the future state of the platform."),React.createElement("hr",null),React.createElement("h2",null,"7. ",React.createElement("strong",null,"Creativity")),React.createElement("p",null,"Creativity has no borders. We want to encourage and organize events that bring the globalThis community together and create bonds and collaborations between us and contribute to shaping the future of art as whole."),React.createElement("p",null,"We want to encourage and help the development of new forms and shapes of art through collaborations between the users."),React.createElement("p",null,"We believe in providing an open and supportive space for all artists and collectors to express themselves freely and without limitations."),React.createElement("p",null,"Creativity needs freedom, we want to make sure there are as few restrictions as possible in place to make Teia a place of creativity without limitations but also ensuring the intellectual rights of creators/artists and complying with legal requirements as well as the wellbeing of Teia's communiity."))};function CoreValues(){return jsx$1(Page,{title:"corevalues",children:jsx$1("div",{className:styles$1.corevalues,children:jsx$1(ReactComponent$1,{})})})}const buttons="_buttons_1qglu_216",privacypolicy="_privacypolicy_1qglu_221",styles={buttons,privacypolicy},ReactComponent=function(re){return Object.keys(re).forEach(function(ne){re[ne]}),React.createElement("div",null,React.createElement("h1",null,"Privacy Policy for Teia DAO LLC"),React.createElement("p",null,"At Teia, accessible from ",React.createElement("a",{href:"https://teia.art/"},"https://teia.art/"),", one of our main priorities is the privacy of our visitors. This Privacy Policy document contains the types of information that are collected and recorded by Teia and how we use this information. This Policy applies to information we collect on the Platform and through your use of the Platform. Please, review this Policy carefully. By accessing or using the Platform, you agree to the terms of this Policy on behalf of yourself or the entity or organization that you represent. If you do not agree to any term in this Policy, you should refrain from further use of our Services."),React.createElement("p",null,"If you have additional questions or require more information about our Privacy Policy, do not hesitate to contact us."),React.createElement("h2",null,"1. User data"),React.createElement("p",null,"Teia does not store personal data of its users however, it relies on data stored on decentralized storage solutions that are available to the public via either the Tezos blockchain IPFS and/or public indexers."),React.createElement("p",null,"Teia follows a standard procedure of using log files. These files log visitors when they visit websites. All hosting companies do this and are a part of hosting services' analytics. The information collected by log files includes internet protocol (IP) addresses, browser type, Internet Service Provider (ISP), date and time stamp, referring/exit pages, and possibly the number of clicks. These are not linked to any information that is personally identifiable. The purpose of the information is for analyzing trends, administering the site, tracking users' movement on the website, and gathering demographic information. Teia does ",React.createElement("strong",null,"NOT")," use any tracking 'cookies' like Google Analytics, Facebook Pixel, etc."),React.createElement("h2",null,"2. Third-Party Privacy Policies"),React.createElement("p",null,"Teia's Privacy Policy does not apply to other service providers or websites. Thus, we are advising you to consult the respective Privacy Policies of these third-party ad servers for more detailed information. It may include their practices and instructions about how to opt-out of certain options. You can choose to disable cookies through your individual browser options. To know more detailed information about cookie management with specific web browsers, it can be found on the browsers' respective websites."),React.createElement("p",null,"We might disclose user information in response to Subpoenas or Court Orders or to Protect Rights and to Comply with Our Policies."),React.createElement("h2",null,"3. Children's Information"),React.createElement("p",null,"Another part of our priority is adding protection for children while using the internet. We encourage parents and guardians to observe, participate in, and/or monitor and guide their online activity."),React.createElement("p",null,"Teia does not knowingly collect any Personal Identifiable Information from children under the age of  If you think that your child provided this kind of information on our website, we strongly encourage you to contact us immediately and we will do our best efforts to promptly remove such information from our records."),React.createElement("h2",null,"4. Online Privacy Policy Only"),React.createElement("p",null,"This Privacy Policy applies only to our online activities and is valid for visitors to our website with regard to the information that they shared and/or collect in Teia. This policy is not applicable to any information collected offline or via channels other than this website."),React.createElement("h2",null,"5. Accessing and Correcting your Information"),React.createElement("p",null,"To request rectification or deletion of any information collected by us concerning your use of the platform, please contact ",React.createElement("strong",null,"privacy@teia.xyz")," or send a written communication to the following postal address: PO Box 852, Long Island Rd, Majuro."),React.createElement("h2",null,"6. DMCA"),React.createElement("p",null,"The Digital Millennium Copyright Act (DMCA) sets forth a notification and counter-notification process initiated by a party complaining of alleged copyright infringement on the Platform. We may share information of the notifying, counter-notifying party, and any involved third parties, such as a collector, of an allegedly infringing artwork to facilitate communication between the relevant parties for the purposes of complying with or resolving a DMCA dispute or allegation of copyright infringement. Nothing in this Policy restricts our ability to: comply with applicable law, rules, or regulations, including the DMCA; comply with a civil, criminal, or regulatory inquiry, investigation, subpoena, or lawful court order; cooperate with law enforcement agencies about conduct we reasonably and in good faith believe may violate the law; protect our rights or our property; enforce our Terms of Service; or, prevent behavior that is (or that we think may be) illegal or unethical."),React.createElement("h2",null,"7. Consent and Terms of Use."),React.createElement("p",null,"By using our website, your usage, and any privacy dispute is subject to this Policy and our Terms of Use (link to Terms of Use)."),React.createElement("p",null,"We will notify users of changes to this Privacy Policy by posting the amended terms on the Service in advance of the effective date of the changes. If you do not agree to the changes, you should discontinue your use of the Service prior to the time the modified privacy policy takes effect. If you continue using the Service after the modified privacy policy takes effect, you will be bound by the modified privacy policy."))};function PrivacyPolicy(){return jsx$1(Page,{title:"privacypolicy",children:jsx$1("div",{className:styles.privacypolicy,children:jsx$1(ReactComponent,{})})})}const display_routes=jsxs(Fragment,{children:[jsx$1(Route,{index:!0,element:jsx$1(Creations,{})}),jsx$1(Route,{exact:!0,path:"collection",element:jsx$1(Collections,{})}),jsx$1(Route,{exact:!0,path:"curation",element:jsx$1(Curation,{})}),jsx$1(Route,{exact:!0,path:"collabs",element:jsx$1(Collabs,{})})]}),router=createBrowserRouter(createRoutesFromChildren(jsxs(Route,{path:"*",errorElement:jsx$1(RootErrorBoundary,{}),element:jsx$1(App,{}),children:[jsx$1(Route,{path:"/*",index:!0,element:jsx$1(Home,{})}),jsxs(Route,{path:"feed/*",element:jsx$1(Home,{}),children:[jsx$1(Route,{path:"sales",element:jsx$1(RecentSalesFeed,{})}),jsx$1(Route,{path:"lists",element:jsx$1(ListsFeed,{})}),jsx$1(Route,{path:"tezospride",element:jsx$1(TagFeed,{tag:"tezospride",namespace:"tezospride"})}),jsx$1(Route,{path:"iran",element:jsx$1(IranFeed,{})}),jsx$1(Route,{path:"tez4pal",element:jsx$1(Tez4PalFeed,{})}),jsx$1(Route,{path:"art4artists",element:jsx$1(Art4ArtistsFeed,{})}),jsx$1(Route,{path:"morocco-quake-aid",element:jsx$1(MoroccoQuakeFeed,{})}),jsx$1(Route,{path:"quake-aid",element:jsx$1(QuakeFeed,{})}),jsx$1(Route,{path:"iran",element:jsx$1(IranFeed,{})}),jsx$1(Route,{path:"pakistan",element:jsx$1(PakistanFeed,{})}),jsx$1(Route,{path:"ukraine",element:jsx$1(UkraineFeed,{})}),jsx$1(Route,{path:"random",element:jsx$1(RandomFeed,{})}),jsx$1(Route,{path:"newobjkts",element:jsx$1(NewObjktsFeed,{})}),jsx$1(Route,{path:"glb",element:jsx$1(GlbFeed,{})}),jsx$1(Route,{path:"video",element:jsx$1(VideoFeed,{})}),jsx$1(Route,{path:"image",element:jsx$1(ImageFeed,{})}),jsx$1(Route,{path:"audio",element:jsx$1(AudioFeed,{})}),jsx$1(Route,{path:"html-svg",element:jsx$1(HtmlSvgFeed,{})}),jsx$1(Route,{path:"pdf",element:jsx$1(PdfFeed,{})}),jsx$1(Route,{path:"md",element:jsx$1(MarkdownFeed,{})}),jsx$1(Route,{path:"txt",element:jsx$1(TextFeed,{})}),jsx$1(Route,{path:"midi",element:jsx$1(MidiFeed,{})}),jsx$1(Route,{path:"gif",element:jsx$1(GifFeed,{})}),jsx$1(Route,{path:"friends/:address",element:jsx$1(FriendsFeed,{})})]}),jsx$1(Route,{path:"search/*",element:jsx$1(Home,{isSearch:!0})}),jsx$1(Route,{path:"kt/:address",element:jsx$1(Display,{}),children:jsx$1(Route,{index:!0,element:jsx$1(CollabDisplay,{})})}),jsx$1(Route,{path:"collab/:name",element:jsx$1(Display,{}),children:jsx$1(Route,{index:!0,element:jsx$1(CollabDisplay,{})})}),jsx$1(Route,{exact:!0,path:"about",element:jsx$1(About,{})}),jsx$1(Route,{exact:!0,path:"terms",element:jsx$1(Terms,{})}),jsx$1(Route,{exact:!0,path:"faq",element:jsx$1(FAQ,{})}),jsx$1(Route,{exact:!0,path:"codeofconduct",element:jsx$1(CodeOfConduct,{})}),jsx$1(Route,{exact:!0,path:"corevalues",element:jsx$1(CoreValues,{})}),jsx$1(Route,{exact:!0,path:"privacypolicy",element:jsx$1(PrivacyPolicy,{})}),jsx$1(Route,{path:"sync",element:jsx$1(Sync,{})}),jsxs(Route,{exact:!0,path:"mint/*",element:jsx$1(Mint,{}),children:[jsx$1(Route,{index:!0,element:jsx$1(MintForm,{})}),jsx$1(Route,{path:"preview",element:jsx$1(Preview,{})})]}),jsxs(Route,{path:"collaborate/*",element:jsx$1(Collaborate,{}),children:[jsx$1(Route,{index:!0,element:jsx$1(CollabContractsOverview,{})}),jsx$1(Route,{path:"create",element:jsx$1(CreateCollaboration,{})})]}),jsxs(Route,{path:"objkt/:id/*",element:jsx$1(ObjktDisplay,{}),children:[jsx$1(Route,{index:!0,element:jsx$1(Info,{})}),jsx$1(Route,{path:"listings",element:jsx$1(Collectors,{})}),jsx$1(Route,{path:"history",element:jsx$1(History,{})}),jsx$1(Route,{path:"swap",element:jsx$1(Swap,{})}),jsx$1(Route,{path:"burn",element:jsx$1(Burn,{})}),jsx$1(Route,{path:"transfer",element:jsx$1(Transfer,{})}),jsx$1(Route,{path:"copyright",element:jsx$1(Copyright,{})})]}),jsx$1(Route,{path:"subjkt/*",element:jsx$1(Subjkt,{})}),jsx$1(Route,{path:"settings/*",element:jsx$1(Settings,{})}),jsx$1(Route,{path:"claim/*",element:jsx$1(Claim,{})}),jsxs(Route,{path:"dao/*",element:jsx$1(DAO,{}),children:[jsx$1(Route,{index:!0,element:jsx$1(DaoParameters,{})}),jsx$1(Route,{path:"proposals",element:jsx$1(DaoProposals,{})}),jsx$1(Route,{path:"submit",element:jsx$1(SubmitDaoProposals,{})}),jsx$1(Route,{path:"*",element:jsx$1(DaoParameters,{})})]}),jsx$1(Route,{path:"proposal/:id",element:jsx$1(ProposalDisplay,{})}),jsxs(Route,{path:"polls/*",element:jsx$1(TeiaPolls,{}),children:[jsx$1(Route,{index:!0,element:jsx$1(Polls,{})}),jsx$1(Route,{path:"create",element:jsx$1(CreatePolls,{})}),jsx$1(Route,{path:"*",element:jsx$1(Polls,{})})]}),jsx$1(Route,{path:"poll/:id",element:jsx$1(PollDisplay,{})}),jsx$1(Route,{path:"tags/:tag",element:jsx$1(Tags$1,{})}),jsx$1(Route,{path:"tz/:address/*",element:jsx$1(Display,{}),children:display_routes}),jsx$1(Route,{path:":name/*",element:jsx$1(Display,{}),children:display_routes})]})));client.createRoot(document.getElementById("root")).render(jsx$1(IconCache.Provider,{value:{},children:jsx$1(RouterProvider,{router})}));unregister();
